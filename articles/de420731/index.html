<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÜüèº üññüèΩ ü¶Ç Zabbix √ºber Steroide: Funktionsweise der einheitlichen √úberwachungsplattform von Sbertech üí¨ üåç üö£üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Mein Name ist Sergey Prutskikh, ich bin verantwortlich f√ºr die √úberwachungsrichtung von Sberbank-Technology. Das Hauptziel unserer Organis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Zabbix √ºber Steroide: Funktionsweise der einheitlichen √úberwachungsplattform von Sbertech</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/420731/"> Hallo Habr!  Mein Name ist Sergey Prutskikh, ich bin verantwortlich f√ºr die √úberwachungsrichtung von Sberbank-Technology.  Das Hauptziel unserer Organisation ist die Entwicklung und Erprobung von Softwareprodukten f√ºr die Sberbank.  Daf√ºr verf√ºgt das Unternehmen √ºber eine gro√üe IT-Infrastruktur - 15.000 Server sind in ca. 1.500 Testumgebungen unterteilt, die sich auf mehr als 500 automatisierte Systeme beziehen.  Insgesamt arbeiten rund 10.000 Spezialisten mit ihnen. <br><br>  Im Jahr 2015 haben wir begonnen, einen zentralen √úberwachungsdienst einzurichten.  Dar√ºber hinaus beschr√§nkte sich alles nicht nur auf die Umsetzung.  Im Rahmen der √úberwachung mussten viele Vorschriften, Anweisungen sowie die Beziehung zwischen den Einheiten von Sbertech ausgearbeitet werden.  In diesem Beitrag werde ich Ihnen ausf√ºhrlich erkl√§ren, wie wir die Plattform ausgew√§hlt haben, nach welchen Prinzipien wir alles erstellt haben und mit was wir am Ende gelandet sind. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dd4/b4c/166/dd4b4c166ea76bb4602de50d1267fc4f.png"><br><a name="habracut"></a><br><h3>  Die Hauptziele und die Ideologie des Projekts </h3><br>  Hier sind die Ziele, die wir im Projekt verfolgt haben: <br><br><ul><li>  Erhalt zuverl√§ssiger Daten zu Gr√∂√üe und Zusammensetzung der IT-Infrastruktur; <br></li><li>  Optimierung der Nutzung von IT-Einrichtungen; <br></li><li>  Reduzierung der Kosten f√ºr die Unterst√ºtzung und den Betrieb der IT-Infrastruktur von Entwicklungs- und Testumgebungen; <br></li><li>  Unterst√ºtzung der IT-Infrastruktur bei der Bereitschaft zur Entwicklung und zum Testen; <br></li><li>  Sofortige Information von Spezialisten √ºber Probleme bei der Arbeit von Testumgebungen; <br></li><li>  Die Pr√ºfung der Konformit√§t von Testumgebungen und industriellen AFMs ist f√ºr uns keine sehr typische Aufgabe. <br></li><li>  Datenerfassung f√ºr Berichte √ºber Testergebnisse, die die Messung kritischer Parameter in allen Testphasen erm√∂glichen. <br></li></ul><br>  Mit Blick auf die Zukunft kann ich sagen, dass alle Ziele bis zu dem einen oder anderen Grad bereits erreicht wurden.  Bei einigen damit verbundenen Problemen half die √úberwachung ebenfalls bei der L√∂sung. <br><br>  Zus√§tzlich zu den Zielen formulierten wir Prinzipien, eine Ideologie, an der wir w√§hrend des gesamten Projekts festhielten: <br><br><ul><li>  Die Benutzerzufriedenheit ist einer der Hauptindikatoren f√ºr die √úberwachung.  Auf der ITSMf 2017-Konferenz habe ich √ºber die √úberwachung der IT-Infrastruktur gesprochen, und der f√ºnfte Punkt steht NICHT in diesem Bericht: ‚ÄûZwingen Sie Ihre Mitarbeiter NICHT, mit dem √úberwachungssystem zu arbeiten.‚Äú  Es geht darum zu motivieren, nicht zu verpflichten.  Dies wird durch ordnungsgem√§√ü erstellte KPIs erreicht.  Zu Beginn des Dienstes werden solche KPIs m√∂glicherweise noch nicht angezeigt.  Dennoch ist es von den ersten Tagen der √úberwachung an sehr wichtig, potenzielle Kunden zu unterst√ºtzen. <br></li><li>  Mindestzeit f√ºr die Verfeinerung.  Daf√ºr verwenden wir agile Elemente.  Sie helfen dabei, neue Funktionen so schnell wie m√∂glich bereitzustellen und Feedback von Kunden zu erhalten. <br></li><li>  Die Offenheit des Systems, sowohl f√ºr Verbesserungen, die sich in der Erstellung eines einzelnen R√ºckstands, in Anfragen, an die jeder Mitarbeiter schreiben kann, als auch in Bezug auf die Bereitstellung von Informationen √§u√üert - unser Service erm√∂glicht es Ihnen, Informationen √ºber die √úberwachungskonfiguration zu erhalten, die normalerweise verborgen ist. <br></li><li>  Hoher Integrationsgrad in die t√§gliche Arbeit.  Unsere Priorit√§t ist es, die Funktionen zu implementieren, die Benutzer t√§glich ben√∂tigen.  Dies half in relativ kurzer Zeit, den √úberwachungsdienst innerhalb des Unternehmens bekannt zu machen. <br></li></ul><br><h3>  Die Wahl des √úberwachungssystems </h3><br>  In fast allen Projekten, an denen ich teilgenommen habe, tauchte fr√ºher oder sp√§ter eine Tabelle auf, in der die Funktionalit√§t verschiedener Systeme verglichen wurde, bei denen ein bestimmtes System einen offensichtlichen Vorteil hatte. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/23b/af4/364/23baf43643a36a9c93588c19ca2d7f19.png"><br><br>  Meiner Meinung nach kann eine solche vergleichende Analyse <b>nicht</b> vor dem sofortigen Beginn der Zusammenarbeit mit dem √úberwachungsdienst durchgef√ºhrt werden, und vor allem lohnt es sich nicht, eine Entscheidung √ºber die Auswahl der einen oder anderen L√∂sung auf der Grundlage dieser Analyse zu treffen.  Solange das System in Ihrem Unternehmen nicht f√ºr einen kurzen Zeitraum funktioniert, ist es unm√∂glich, eindeutig zu beurteilen, welche spezifischen Funktionen in Ihrem Unternehmen nachgefragt werden.  Solche Tabellen k√∂nnen hilfreich sein, wenn Sie das √úberwachungssystem aus irgendeinem Grund √§ndern m√∂chten. <br><br><h3>  Vergleich mit anderen Zabbix-Installationen </h3><br>  Sie k√∂nnen viel dar√ºber sprechen, wie man die Gr√∂√üe mehrerer Installationen von √úberwachungssystemen vergleicht, aber alle daf√ºr ausgew√§hlten Merkmale sind meiner Meinung nach ziemlich subjektiv.  Damit Sie eine genauere Vorstellung von der Gr√∂√üe unserer Installation haben, habe ich beschlossen, Beispiele f√ºr √§hnliche Dienste in anderen Unternehmen zu nennen, √ºber die Vertreter von Zabbix auf der Highload-Konferenz gesprochen haben. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/586/afa/bf5/586afabf5a7223a2fbe89cb714e3ec8e.png"><br><br>  Wie Sie sehen k√∂nnen, ist die Zabbix-Instanz in Sbertech den gr√∂√üten Installationen nicht viel unterlegen und entspricht in Bezug auf die Gesamtlast diesen. <br><br><h3>  Vorteile von Zabbix </h3><br>  In der zweiten Jahresh√§lfte 2017 haben wir ein Zabbix-Pilotprojekt zur √úberwachung der PROM-Infrastruktur durchgef√ºhrt.  Dann haben wir eine Reihe von qualitativen Kriterien formuliert, die wir den absoluten Vorteilen von Zabbix zuschreiben: <br><br><ul><li>  <i>Open Source</i>  Unbegrenzte M√∂glichkeiten zur Bearbeitung und Anpassung. <br></li><li>  <i>Offenheit des Mechanismus und der Quelle der Erfassung von Metriken.</i>  In kommerziellen Unternehmensl√∂sungen sind viele Metriken unverst√§ndlich - verschiedene Botnets, Speicherlecks, die selbst der technische Support des Anbieters oft nicht erkl√§ren kann.  Zabbix hat kein solches Problem - Sie k√∂nnen immer klar sagen, wie bestimmte Metriken erfasst werden.  Dadurch steigt die Glaubw√ºrdigkeit des Systems durch Systemadministratoren. <br></li><li>  <i>Relativ einfache Skalierung</i> - haupts√§chlich aufgrund der Einf√ºhrung zus√§tzlicher Proxyserver, auf die Sie einen Teil der Last √ºbertragen k√∂nnen.  Wenn Sie das Leistungslimit einer Instanz erreichen, k√∂nnen Sie die zweite erh√∂hen und beide unter einem Visualisierungssystem (Grafana) kombinieren. <br></li><li>  <i>Coole API</i> - meiner Meinung nach ist dies einer der Hauptvorteile von Zabbix.  Eine qualitativ hochwertige, gut entwickelte und verst√§ndliche API er√∂ffnet enorme M√∂glichkeiten f√ºr die Integration in verwandte Systeme, Automatisierung usw. <br></li><li>  <i>Das √úberwachen dynamischer Objekte</i> ist eine Kleinigkeit, aber nett.  In Zabbix ist diese √úberwachung einfach und intuitiv, sodass Sie sehr schnell gute Ergebnisse erzielen k√∂nnen.  Dynamische Objekte sind alle Objekte, die w√§hrend ihrer Lebensdauer auf Servern angezeigt und ausgeblendet werden: Dateisysteme, Netzwerkschnittstellen und andere.  Daher muss das Setzen und Entfernen dieser Objekte aus der √úberwachung automatisiert werden. <br></li><li>  <i>Eine relativ kleine Anzahl von Komponenten.</i>  Bei kommerziellen L√∂sungen ist jede Komponente ein separates Subsystem mit einer eigenen Basis, die separat installiert werden muss.  Und Zabbix ist ein einziges System, in dem alle √úberwachungsmethoden gleichzeitig konzentriert sind: Agent, Agentless, Netzwerk und andere - nur 14 Typen. <br></li><li>  <i>Datenvisualisierung mit Grafana.</i>  Durch die Integration in Grafana k√∂nnen Diagramme erstellt und sehr praktische Dashboards erstellt werden. <br></li><li>  <i>Verf√ºgbarkeit der √úberwachung der Verf√ºgbarkeit von IT-Diensten.</i>  Zabbix verf√ºgt √ºber ein integriertes Subsystem, mit dem die Verf√ºgbarkeit von IT-Services f√ºr die zuk√ºnftige Verwendung in SLA berechnet werden kann. <br></li><li>  <i>Die Flexibilit√§t, Metriken und deren Schwellenwerte zu erstellen.</i>  Hier hat Zabbix reichlich Gelegenheit, komplexe √úberwachungsmetriken zu konfigurieren: <br>  - Zun√§chst werden <i>berechnete Metriken erstellt</i> : Auf der Grundlage mehrerer einfacher Metriken wird eine komplexe berechnet. <br>  - Die <i>Vorverarbeitung des Metrikwerts</i> ist verf√ºgbar. Dies ist beispielsweise der Fall, wenn Sie ein gro√ües Datenarray in Zabbix laden. Bevor Sie eine bestimmte Metrik in die Datenbank einf√ºgen, analysiert Zabbix das Array und ruft genau die Daten ab, die Sie als Metrik speichern m√∂chten . <br>  - <i>Master-Metriken.</i>  Es ist m√∂glich, ein Array von Daten zu einem Objekt in einer Umfrage in einer gro√üen Metrik zu sammeln und diese dann als Datenquelle f√ºr andere Metriken zu verwenden.  Auf diese Weise k√∂nnen Sie die Anzahl der Abfragen reduzieren und die Erfassung aller Metriken rechtzeitig synchronisieren. <br></li><li>  <i>M√∂glichkeit der internen √úberwachung.</i>  Zabbix als Open Source-Produkt weist Leistungsprobleme auf.  Ein durchdachtes internes √úberwachungssystem hilft jedoch, diese Probleme schnell zu l√∂sen. <br></li></ul><br><h3>  Zabbix Nachteile </h3><br>  Fairerweise kann ich nur die meiner Meinung nach wichtigsten M√§ngel von Zabbix erw√§hnen.  Sie k√∂nnen auch eine anst√§ndige Liste von ihnen machen: <br><br><ul><li>  <i>Geringer Backend-Automatisierungsgrad.</i>  Ich werde reservieren, dass ich nicht die M√∂glichkeit hatte, mit allen Varianten des DBMS zu experimentieren.  Unser Unternehmen verwendet das Oracle DBMS als Zabbix-Backend.  Massenoperationen k√∂nnen mehr als eine Stunde dauern - zum Beispiel das Aktualisieren oder √Ñndern von Metriken, die an eine gro√üe Anzahl von Objekten (15.000 Netzwerkknoten) gebunden sind. <br></li><li>  <i>Fehlende integrierte Tools zur Verwaltung von √úberwachungsagenten.</i>  Solche Produkte sind in kommerziellen Produkten erh√§ltlich.  Zabbix hat das noch nicht.  Es gibt nicht einmal ein Toolkit-Update f√ºr Agenten.  Nat√ºrlich kann alles unabh√§ngig voneinander durchgef√ºhrt werden, aber es ist besser, diese Funktionen sofort zu verwenden. <br></li><li>  <i>Bisher geringe Ausarbeitung der √úberwachung der Verf√ºgbarkeit von IT-Diensten.</i>  Es ist toll, dass es √úberwachung gibt, aber sie muss weiterentwickelt werden.  Jetzt ist es nicht m√∂glich, den Benutzerzugriff auf einzelne Teile des Service-Ressourcen-Modells (im Folgenden: CPM) zu beschr√§nken.  Wenn der CPM-Baum gro√ü ist, wird die Weboberfl√§che langsamer.  Die M√∂glichkeiten zur Anpassung der Verf√ºgbarkeitsberechnung in diesem Subsystem sind noch gering. <br></li><li>  <i>Lange Updates.</i>  Das letzte Datenbank-Update hat ungef√§hr acht Stunden gedauert.  Zu diesem Zeitpunkt war der √úberwachungsdienst nicht verf√ºgbar.  Alternativ k√∂nnen Sie Support-Skripte anfordern und separat aktualisieren. <br></li><li>  <i>Die bescheidene Funktionalit√§t des eingebauten Visualisierungssubsystems.</i>  Grafana l√∂st dieses Problem, aber die eingebaute Visualisierung l√§sst zu w√ºnschen √ºbrig. <br></li><li>  <i>Integrierte DBMS-√úberwachung (ODBC).</i>  Tatsache ist, dass eine solche √úberwachung bei jeder Abfrage der Metrik eine separate Verbindung f√ºr Zabbix √∂ffnet.  Wenn Ihre Datenbank gro√ü ist (mit einer gro√üen Anzahl gesammelter Metriken), wird der darin enthaltene Verbindungspool m√∂glicherweise voll und die Datenbank reagiert nicht mehr, auch nicht f√ºr Zielsysteme.  Zabbix verf√ºgt √ºber ein alternatives √úberwachungstool (z. B. DBforBIX), das Einrichten f√ºr eine gro√üe Anzahl von Objekten ist jedoch eine ziemlich m√ºhsame Aufgabe.  Dazu m√ºssen Sie eine separate Automatisierung schreiben. <br></li><li>  <i>Mangelnde Bestandsflexibilit√§t f√ºr die IT-Infrastruktur.</i>  Einerseits ist es sch√∂n, es zu haben.  Auf der anderen Seite sieht es aus wie eine separate Registerkarte f√ºr jedes √úberwachungsobjekt, auf dem sich ein fester Satz von Inventarfeldern mit fest codierten Namen befindet.  Um etwas zu √§ndern, m√ºssen Sie in den Quellcode des Frontends gelangen.  Es ist auch unm√∂glich, die Anzahl dieser Felder und Gr√∂√üen zu √§ndern - es besteht die Gefahr, dass beim n√§chsten Update etwas kaputt geht. <br></li><li>  <i>Mangelnde Automatisierung beim Erstellen von Netzwerkkarten.</i>  Zum Vergleich k√∂nnen wir den HP OpenView Network Node Manager zitieren, der perfekt in der Lage ist, Netzwerktopologiekarten im automatischen Modus zu erstellen.  Zabbix muss alles manuell erstellen.  Vielleicht ist diese Funktionalit√§t aus diesem Grund bei uns praktisch nicht gefragt. <br></li><li>  <i>Mangelnde Flexibilit√§t im Vorbild.</i>  Zabbix bietet nur vier Benutzerrollen mit festen Funktionen.  Dar√ºber hinaus gibt es keine M√∂glichkeit, den Benutzerzugriff auf die Zabbix-API einzuschr√§nken.  Das hei√üt, wenn der Benutzer Zugriff auf das Frontend hat, hat er automatisch Zugriff auf die API.  F√ºr uns f√ºhrte dies dazu, dass Benutzer mit unpassenden Anforderungen das System ernsthaft belasteten.  Dar√ºber hinaus gibt es keine M√∂glichkeit, dem Benutzer Zugriff zu gew√§hren, um beispielsweise Metriken ohne Zugriff zu lesen und die Einstellungen des √úberwachungsobjekts zu bearbeiten. <br></li></ul><br><h3>  Systemarchitektur </h3><br>  Nun ein paar Worte zu den quantitativen Indikatoren und der Architektur unseres Systems. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2fe/ab0/deb/2feab0debc62ff8cd2bdcb4cf902ed93.png"><br><br>  Derzeit werden mehr als 16.000 Objekte (haupts√§chlich Server) √ºberwacht, von denen insgesamt fast zweieinhalb Millionen Metriken erfasst werden.  Ihre Gesamtlast f√ºr das System betr√§gt ungef√§hr 19.000 Werte pro Sekunde.  Alle √úberwachungsobjekte sind auf mehr als 1800 Ger√§tegruppen verteilt, von denen die √ºberwiegende Mehrheit bestimmten Testumgebungen entspricht.  Derzeit sind mehr als 1000 Benutzer im System registriert, die in 365 Funktionsgruppen unterteilt sind. <br><br>  Wie Sie sehen, legen wir gro√üen Wert auf die Verteilung von Ger√§ten und Benutzern in Gruppen.  Auf diese Weise k√∂nnen Sie die Genauigkeit von Warnungen aus unserem Service erheblich erh√∂hen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/731/845/a01/731845a01c910ff3960e2ed4c922790f.png"><br><br>  Insgesamt haben wir drei Zabbix-Instanzen.  Das Diagramm zeigt die Architektur des gr√∂√üten von ihnen, die die Haupt-IT-Infrastruktur f√ºr Entwicklung und Test √ºberwacht.  Eine andere Instanz √ºberwacht die √úberwachungsinfrastruktur.  Und die dritte Instanz wird bei uns f√ºr die Entwicklung und Erprobung neuer √úberwachungstools verwendet.  Die gesamte Struktur der Hauptinstanz wird auf Basis von VMWare virtualisiert.  Im Allgemeinen ist es nach M√∂glichkeit besser, kein Virtualisierungssystem zu verwenden, da es bei virtuellen Infrastrukturen viel schwieriger ist, Leistungsprobleme zu suchen und zu l√∂sen. <br><br>  Das Backend basiert auf Oracle Active Data Guard und besteht aus zwei Datenbanken - der Hauptdatenbank und der Replikatdatenbank.  Wir haben drei Fronten: <br><br><ul><li>  F√ºr administrative Aufgaben - Es ist so konfiguriert, dass schwere, komplexe und langfristige Vorg√§nge ausgef√ºhrt werden, die den Server stark belasten. <br></li><li>  Benutzerdefiniert - mit strengeren Einstellungen, die es Benutzern nicht erm√∂glichen, das Haupt√ºberwachungssystem zu stark zu √ºberlasten; <br></li><li>  F√ºr die Berichterstellung wird das Replikat betrachtet und f√ºr die Interaktion mit schreibgesch√ºtzten Datenbanken angepasst.  Grafana ist damit verbunden und bietet eine qualitativ hochwertige Visualisierung der √úberwachungsdaten. <br></li></ul><br><h3>  Implementierungsfunktionen </h3><br>  In dieser Geschichte habe ich beschlossen, mich nicht auf die grundlegenden Funktionen zu konzentrieren, die in fast jeder √úberwachung implementiert sind - das Beheben von Abst√ºrzen, das Sammeln von Informationen √ºber die Leistung oder Verf√ºgbarkeit von IT-Systemen.  Ich werde mich auf die Besonderheiten unseres Service konzentrieren. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bc2/b27/790/bc2b27790df161706cff0550fc1e2941.png"><br><br>  Zu diesen Merkmalen geh√∂rt in erster Linie ein hoher Automatisierungsgrad typischer Aufgaben.  Wir verbringen praktisch keine Zeit damit, Server f√ºr die √úberwachung einzurichten und Zugriff auf √úberwachungsergebnisse zu gew√§hren, sondern konzentrieren uns haupts√§chlich auf die Entwicklung des Dienstes und das Hinzuf√ºgen neuer nicht standardm√§√üiger Funktionen.  Mehr als 200 Automatisierungsskripte, die seit der Inbetriebnahme des √úberwachungsdienstes entwickelt wurden, helfen uns dabei sehr. <br><br>  Bevor Sie den Agenten in Zabbix registrieren k√∂nnen, muss er noch installiert werden.  Wie ich oben geschrieben habe, ist einer der Nachteile von Zabbix das Fehlen von Tools zur Verwaltung von √úberwachungsagenten.  Um Agenten zu installieren, haben wir daher im Rahmen unserer DevOps-Prozesse einen separaten Job organisiert.  Die folgende Abbildung zeigt das Agenteninstallationsdiagramm. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/af5/4de/670/af54de670af11dd04a36f77329daba5d.png"><br><br>  Wir haben zwei Haupteinstiegspunkte.  Dies ist entweder ein Python-Skript. √úber die REST-API werden an den Job Jenkins Informationen zu den Hosts √ºbergeben, auf denen Sie den Agenten installieren oder aktualisieren m√∂chten, eine Liste zus√§tzlicher Variablen sowie der Name des Playbooks, das Sie auf Ansible ausf√ºhren m√ºssen.  Oder die Standarddaten k√∂nnen von Bitbucket stammen.  In Jenkins k√∂nnen sie jedoch gem√§√ü den von uns √ºbergebenen Variablen vollst√§ndig ersetzt werden.  Auf diese Weise k√∂nnen wir beispielsweise Agenten aktualisieren, die von verschiedenen Proxyservern √ºberwacht werden.  Die Besonderheit unseres Prozesses ist, dass die Zabbix-Agentenkonfiguration fast im laufenden Betrieb erstellt wird. <br><br><h3>  Berichterstattung </h3><br>  Bereits zu Beginn des Projekts wurde klar, dass die von Zabbix-Tools bereitgestellten Standard-Reporting-Tools es uns nicht erm√∂glichen w√ºrden, alle unsere Anforderungen zu erf√ºllen.  In diesem Zusammenhang wurde auf der Grundlage der Microservice-Architektur ein separates Berichtssubsystem implementiert, das die Funktionen grundlegender √úberwachungsberichte erheblich erweitert.  Jetzt haben wir mehr als zwanzig Berichte in Betrieb.  Hier einige Beispiele zusammen mit den Zielen, die umgesetzt werden: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f10/a40/5a1/f10a405a1802e8555f1c16b4ecfdce8b.png"><br><br><h3>  Warnungen </h3><br>  Im Laufe der Arbeit des Dienstes haben sich E-Mail-Benachrichtigungen entwickelt.  So sehen sie im Moment aus: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fe3/3af/fa3/fe33affa3c0b96a53dfb61512014ebdc.png"><br><br>  Es gibt Informationen zum Problem und seinem Status sowie zum √úberwachungsobjekt.  Es gibt Links zu verwandten Metriken und Ereignissen, ein Feld zur Beschreibung des Problems, Links zu Anweisungen und ein Feedback-Formular.  F√ºr kritischere Unf√§lle haben wir nat√ºrlich auch eine SMS-Verteilung. <br><br>  Durch solche informativen Warnungen konnten wir die Kommunikation der meisten unserer Benutzer mit Zabbix selbst minimieren.  Es reicht aus, diese Mailingliste zu erhalten.  Wir haben Benutzer gut gruppiert - es gibt 365 Gruppen f√ºr 1080 Personen.  Daher f√§llt der Newsletter ziemlich gepunktet aus - und dementsprechend nicht √§rgerlich.  Viele unserer Benutzer haben fast vergessen, dass wir tats√§chlich Zabbix haben - sie verwenden den Grafana-Newsletter und das Visualisierungssystem. <br><br><h3>  Integration in Managementprozesse </h3><br>  Das Projekt umfasste zun√§chst die √úberwachung der Integration in einige unserer IT-Infrastrukturmanagementprozesse.  Wenn der √úberwachungsdienst einen Unfall registriert hat, k√∂nnen Sie ein Ticket daf√ºr erstellen - f√ºr diejenigen Teams, die mehr mit Jira arbeiten.  F√ºr Serviceabteilungen ist es m√∂glich, Vorf√§lle im HP Service Manager zu erstellen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/352/500/6bc/3525006bc45a4d9ff74654743393f6c3.png"><br><br>  Basierend auf Zabbix wurde auch eine Methode zur Optimierung der Nutzung der IT-Infrastruktur entwickelt und automatisiert.  Drei Hauptparameter sind optimiert: die Menge an CPU, RAM und Festplatten.  Diese Technik basiert auf einem gleitenden Durchschnitt und einem 90-Prozent-Perzentil.  Basierend auf dieser Technik f√§llt jedes Objekt oder jeder Server in eine von drei Kategorien: unterlastet, optimal geladen, √ºberladen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9f7/37d/ffc/9f737dffc031a0bcde5756ec5909fc76.png"><br><br>  Das Obige zeigt, wie diese Technik auf einen bestimmten Server angewendet wird.  Der rosa Korridor ist der Wert des gleitenden Durchschnitts.  Breiter gr√ºner Korridor - Rohdaten.  Und Blau ist ein 90-Prozent-Perzentil. <br><br>  Durch die Integration in die Konfigurationsdatenbank konnten die meisten Aufgaben im Zusammenhang mit der Bereitstellung des Zugriffs und der Erstellung eines Service-Ressourcen-Modells automatisiert werden.             ,      .     ,        ,  ,      . <br><br>     Zabbix              .      ,      . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/944/800/e3c/944800e3c8e3a3605e26a0c08ef962cc.png"><br><br>         ,     .       ,     .           . <br><br><h3>   </h3><br>    ,         .  2017      : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/85e/2e1/a9f/85e2e1a9f12c6fc8fcdf033fe919d0d9.png"><br><br>               2017 . <br><br>              ,  : <br><br><ul><li>      <br></li><li>      <br></li><li>      <br></li><li>     <br></li><li>   ,    <br></li><li>      <br></li></ul><br>      ,     .    70%              .      ,     ,  ,  . <br><br>                   2016 .       . ,                ,     . <br><br>       2016       .   -   ,       .         .          ,        <br><br><img src="https://habrastorage.org/webt/5j/n4/4z/5jn44zvhzoubqdm3hb-mabozkcc.png"><br><br>      2016        ,           : 600  CPU,  7,5      50   . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de420731/">https://habr.com/ru/post/de420731/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de420711/index.html">Moscow Data Science Major: Ank√ºndigung und Registrierung</a></li>
<li><a href="../de420713/index.html">Wie Chuck Hull den 3D-Druck erfand</a></li>
<li><a href="../de420715/index.html">Die harte Wahrheit √ºber die Schwere des Lernens</a></li>
<li><a href="../de420725/index.html">Wie ich AI beigebracht habe, Tetris f√ºr NES zu spielen. Teil 1: Analyse des Spielcodes</a></li>
<li><a href="../de420729/index.html">Offenes Webinar "Naive Bayes Classifier"</a></li>
<li><a href="../de420735/index.html">Wir laden Sie zum Finale des Find Yourself in Digital-Marathons im B√ºro der Mail.Ru Group ein</a></li>
<li><a href="../de420737/index.html">Mini ai cup 2 oder fast AgarIO - was k√∂nnte man tun, um zu gewinnen?</a></li>
<li><a href="../de420739/index.html">Die Box ist noch im Griff: Warum m√ºssen Sie 2018 noch selbst Sprachen lernen?</a></li>
<li><a href="../de420741/index.html">Spickzettel f√ºr Programmierer oder "Wir werden f√ºr Sie googeln"</a></li>
<li><a href="../de420749/index.html">GitLab f√ºr Continuous Delivery-Projekt auf InterSystems Technologies: Container</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>