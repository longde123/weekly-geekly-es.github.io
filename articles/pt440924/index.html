<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüíª üë©üèª‚Äçüîß üòä Hist√≥ria do segundo lugar na Copa da AI russa 2018: CodeBall ü§∞üèª ‚ôäÔ∏è üìè</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! 

 Sou estudante do terceiro ano e, no in√≠cio dos meus estudos na universidade, aprendi sobre a Ta√ßa Ai russa e, mais tarde, a Mini Ta√ßa ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hist√≥ria do segundo lugar na Copa da AI russa 2018: CodeBall</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/440924/"><img src="https://habrastorage.org/webt/af/ae/ow/afaeownubljxqa1m35toussj7si.jpeg" align="left" width="220">  Ol√° pessoal! <br><br>  Sou estudante do terceiro ano e, no in√≠cio dos meus estudos na universidade, aprendi sobre a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ta√ßa Ai russa</a> e, mais tarde, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mini Ta√ßa Ai</a> , competi√ß√µes em intelig√™ncia artificial, e comecei a participar ativamente delas, mostrando bons resultados.  Desta vez, o RAIC entrou na sess√£o, ent√£o nada poderia me impedir :) E hoje quero lhe contar como consegui ficar em segundo lugar. <br><br>  As regras da competi√ß√£o podem ser encontradas no site da competi√ß√£o e neste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> .  Link para o meu perfil: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">russianaicup.ru/profile/TonyK</a> . <br><a name="habracut"></a><br>  Por um lado, a tarefa deste ano foi semelhante √† dos anos anteriores, e parecia que a solu√ß√£o ideol√≥gica seria muito semelhante √†s anteriores (Agar IO e Mad Cars);  depois de uma semana, ficarei entediado e cansado de participar. <br><br>  Por outro lado, entendi que havia aprendido muito em competi√ß√µes anteriores com f√≠sica e agora posso aplicar essa experi√™ncia, n√£o pisar no ancinho antigo e, no final, mostrar um resultado melhor. <br><br>  Quanto √† visualiza√ß√£o, decidi que teria proje√ß√µes suficientes em diferentes eixos ou exibiria em um determinado √¢ngulo.  Mas eu estava muito enganado, e se n√£o fosse o visualizador m√°gico incorporado no Local Runner, que os organizadores acrescentaram mais tarde, eu teria que emprestar visualizadores 3D dos tipos de participantes que passaram a fase de testes beta escrevendo-os e colocando-os em dom√≠nio p√∫blico. <br><br>  Desta vez, o pseudo-c√≥digo do simulador estava dispon√≠vel, o que igualava as possibilidades daqueles que sabiam reverter a f√≠sica e escrever um bot legal, e aqueles que n√£o podiam reverter a f√≠sica, mas que tamb√©m podiam escrever um bot forte.  Acho que foi uma boa decis√£o dos organizadores. <br><br>  A primeira coisa que fiz foi reescrever o c√≥digo do simulador da documenta√ß√£o em C ++ e depois medir o tempo do simulador no meu computador antigo e no servidor.  No segundo caso, resultou duas vezes mais r√°pido, embora isso fosse esperado.  Imaginei quantas vezes e com que profundidade eu poderia simular.  Imediatamente ficou claro que seria necess√°rio esquecer a simula√ß√£o honesta de 100 microtics (no servidor, um tique de f√≠sica foi dividido em 100 "microtics"), e seria necess√°rio resolver problemas com precis√£o de maneira indireta. <br><br>  Como o shell foi organizado de tal maneira que a solicita√ß√£o de a√ß√£o para cada rob√¥ √© chamada separadamente em cada tick, implementei uma l√≥gica simples: no momento em que o primeiro rob√¥ √© solicitado, o programa encontra a√ß√µes para todos os rob√¥s, lembra e fornece a a√ß√£o do primeiro, e quando a a√ß√£o √© solicitada aos outros rob√¥s, ela devolve o que foi lembrado. <br><br>  Eu estava impaciente para enviar o bot para a batalha em breve.  Decidi gerar trajet√≥rias aleat√≥rias e escolher a melhor.  Ao mesmo tempo, ele queria que o conjunto gerado tornasse poss√≠vel a execu√ß√£o de algumas a√ß√µes complexas, por exemplo, contornar a bola pelo lado direito e depois bater. <br><br>  Uma trajet√≥ria √© um plano de a√ß√£o.  Inicialmente, a trajet√≥ria foi a seguinte: <br><br><ul><li>  defina a a√ß√£o em um √¢ngulo aleat√≥rio; </li><li>  em uma marca aleat√≥ria da trajet√≥ria, altere o √¢ngulo para outra marca aleat√≥ria; </li><li>  pule uma vez para uma marca aleat√≥ria da trajet√≥ria. </li></ul><br>  Esse espa√ßo de trajet√≥rias era um bom ajuste para pesquisa aleat√≥ria com o n√∫mero de simula√ß√µes que eu (e provavelmente todo mundo naquele momento) podia pagar com o simulador bruto da documenta√ß√£o.  Boas trajet√≥rias foram muitas vezes adivinhadas e, como a melhor trajet√≥ria do carrapato anterior foi preservada, a pesquisa acabou se estendendo no tempo. <br><br>  Todos os objetos foram colocados no simulador: meus rob√¥s, rob√¥s do oponente e a bola.  A avalia√ß√£o foi a mais simples: a soma das dist√¢ncias da bola ao gol do inimigo em todos os pontos da trajet√≥ria e os grandes valores do gol para algu√©m.  Profundidade da simula√ß√£o 200 ticks.  Os inimigos s√£o previstos na sua √∫ltima velocidade. <br><br><img src="https://habrastorage.org/webt/6p/n1/-f/6pn1-ft3htl0ohqjsqkcb3dvcfm.png"><br><br>  Eu imediatamente adicionei uma a√ß√£o separada para o segundo rob√¥, bem como o cancelamento for√ßado do salto, se durante o v√¥o n√£o houver contato com a bola, para n√£o pular em v√£o.  Ao mesmo tempo, meus rob√¥s passaram mais da metade do tempo e conheciam a melhor trajet√≥ria um do outro.  Agora, os primeiros <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gols</a> come√ßaram para advers√°rios fortes, que j√° tinham goleiro e uma l√≥gica mais complicada. <br><br>  Aconteceu ainda que eu n√£o considerava a dist√¢ncia dos port√µes inimigos, mas do ponto ao lado do centro do campo (misturado <code>x</code> e <code>z</code> ), mas isso n√£o afetou a estrat√©gia de forma alguma.  √â bom que, ap√≥s a corre√ß√£o, n√£o tenha piorado.  Isso geralmente acontece quando voc√™ escreve um bot. <br><br>  Depois, acrescentou o goleiro, alterando o placar: ele imp√¥s um p√™nalti para a bola na minha metade do campo e para o gol para mim, e tamb√©m estimou a dist√¢ncia do goleiro ao meu gol.  Agora o goleiro estava no gol e nocauteou a bola.  Uma otimiza√ß√£o importante foi que, se a bola n√£o estiver na minha metade do campo, 90% do tempo √© dado ao atacante e 10% ao goleiro, caso contr√°rio, 50%. <br><br>  A avalia√ß√£o das trajet√≥rias dos rob√¥s em cada ponto foi multiplicada por 0,9 ^ de profundidade. Derivei esse coeficiente empiricamente, como toda a pontua√ß√£o.  Os valores dos coeficientes n√£o mudaram por muito tempo no princ√≠pio de "obras, ok". <br><br>  Ele come√ßou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a ganhar os</a> topos e subir rapidamente no ranking.  A fase beta terminou. <br><br>  Por um longo tempo, n√£o tive ideias sobre a estrat√©gia, as vers√µes foram not√°veis ‚Äã‚Äãpor pequenas edi√ß√µes, corre√ß√µes de bugs (verificou-se que considerei a for√ßa m√©dia de rebote como <code>(MAX_HIT_E - MIN_HIT_E) / 2</code> ) e tamb√©m <code>(MAX_HIT_E - MIN_HIT_E) / 2</code> o simulador.  Um papel importante foi desempenhado pelo n√∫mero de trajet√≥rias que eu consegui resolver por tick, ent√£o me concentrei na otimiza√ß√£o.  Seios removidos e ra√≠zes quadradas.  Adicionada uma velocidade zero improv√°vel na trajet√≥ria antes ou depois de alterar o √¢ngulo.  Pontua√ß√£o ligeiramente alterada. <br><br>  A 16¬™ vers√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ficou por</a> muito tempo no topo da tabela, mas uma semana ap√≥s o final dos testes beta, como esperado, muitos come√ßaram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a vencer</a> . <br><br><img src="https://habrastorage.org/webt/nd/mi/1v/ndmi1vn6qa2rshoih_ufarabuj0.jpeg" align="left">  Tentei refinar a trajet√≥ria com a soma das dist√¢ncias mais pr√≥ximas do inimigo √† bola e tive um comportamento muito interessante.  Meus rob√¥s, quando n√£o podiam acertar com lucro, frequentemente come√ßavam a bloquear os inimigos, quebrando suas trajet√≥rias e impedindo que corressem para a bola, √†s vezes acontecia com muito sucesso e insidiosamente. <br><br>  Em seguida, consertei a precis√£o ao pular.  Se algu√©m pular no tick atual, primeiro fazemos 1 micr√≥tico duas vezes e depois os restantes 98 micr√≥ticos. Tamb√©m tentei compensar a perda de precis√£o com um coeficiente heur√≠stico quando a velocidade m√°xima √© alcan√ßada em alguns dos micr√≥ticos.  As melhorias ajudaram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bastante</a> e houve resultados mais precisos e pr√©-calculados. <br><br>  Tamb√©m nesse momento, comecei a exibir no site entre as informa√ß√µes de depura√ß√£o o n√∫mero de itera√ß√µes que consegui concluir.  Havia 250 deles em 200 ticks, no total, eu tive 50.000 ticks de simula√ß√µes durante o tempo alocado para minha estrat√©gia por tick. <br><br>  Ent√£o eu liguei as trajet√≥rias de muta√ß√£o.  Isso melhorou bastante a estrat√©gia.  Em aproximadamente metade de todas as itera√ß√µes, n√£o foi a nova trajet√≥ria usada, mas a melhor com valores ligeiramente alterados, que possibilitou convergir em algum lugar, por exemplo, para um m√°ximo local.  Acabou sendo uma estrat√©gia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">forte</a> na √©poca, que eu decidi deixar at√© o primeiro turno, embora ainda faltassem duas semanas antes.  Mas depois de alguns dias, ela deixou de dominar o topo. <br><br>  Passei algum tempo me afastando da aleatoriedade completa, por exemplo, tentei, com uma pesquisa tern√°ria, encontrar o √¢ngulo em que o rob√¥ precisa acelerar para acertar a bola.  Mas isso nem sempre funcionou, e eu n√£o descobri como desenvolver essa id√©ia. <br><br>  Meus rob√¥s sabiam pular apenas uma vez por trajet√≥ria, mas quando estavam no ch√£o e queriam pular e depois acertar a bola no ar, n√£o sabiam que, quando voc√™ toca na bola, pode pular uma segunda vez, atingindo a bola com for√ßa e n√£o apenas pressionando. <br><br>  Isso foi corrigido, e agora o simulador, quando percebeu que algu√©m poderia acertar a bola no tique atual, recuou um tique e for√ßou o rob√¥ a pular com for√ßa m√°xima.  Agora, parado no ch√£o, o rob√¥ sabia que iria empurrar o ch√£o e n√£o apenas empurrar, mas acertaria a bola com um segundo salto. <br><br>  Eu entendi que quando nitro e outro rob√¥ fossem adicionados, tudo seria dobrado por causa da falta de itera√ß√µes.  Tamb√©m em lugares diferentes, tive grandes problemas de precis√£o, que n√£o sabia como resolver.  N√£o vi nenhuma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">solu√ß√£o anal√≠tica</a> ou nenhuma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">maneira inteligente de gerenciamento</a> . <br><br>  Eu precisava de uma estrat√©gia completamente nova ou de um simulador m√°gico que combine precis√£o e velocidade, e na fase final me fornecer√° trajet√≥rias suficientes para percorrer.  N√£o criei uma nova estrat√©gia (surpreendentemente) e comecei a trabalhar em um simulador. <br><br><h2>  "Simulador inteligente" </h2><br>  A primeira coisa que eu queria lidar com precis√£o. <br><br>  Simulei 100 Mikrotiks de cada vez, embora uma colis√£o - ou algum outro evento - tenha ocorrido em um desses cem Mikrotiks.  Se voc√™ ignorar isso, os objetos colidem mais tarde do que na realidade (sempre nos 100¬∫ micr√≥ticos) e, portanto, saltam de maneira diferente.  No final da trajet√≥ria, esse pequeno erro pode se transformar em uma grande imprecis√£o.  Por exemplo, pensamos que a bola acerta o gol do inimigo, mas, na realidade, ela bate <s>na nossa</s> do poste. <br><br>  √â f√°cil ver que, em uma situa√ß√£o em que ocorre uma colis√£o nos <code>i</code> √©sticos microtics, em vez de contar todos os 100 microtics, basta contar os primeiros <code>i - 1</code> microtics de cada vez (na verdade, a etapa da f√≠sica √© considerada por um certo tempo <code>dt</code> , e agora esse tempo ser√° <code>t * (i - 1)</code> , onde <code>t</code> √© o tempo correspondente a um Mikrotik).  Agora voc√™ precisa simular 1 micr√≥tico ( <code>dt = t</code> ) e os restantes <code>100 - i</code> micr√≥ticos.  Obtemos exatamente o mesmo resultado em apenas tr√™s simula√ß√µes em vez de cem.  O √∫nico problema √© que n√£o sabemos em que microtics a colis√£o ocorrer√°. <br><br>  Estando em algum tick fixo da simula√ß√£o, podemos fazer qualquer n√∫mero de micr√≥ticos de 1 a 100 em uma simula√ß√£o e ver se h√° uma colis√£o ou n√£o.  Nesse caso, a imagem ser√° assim: a princ√≠pio n√£o h√° toque, mas a partir de um certo n√∫mero de microtics e at√© cem h√° um toque.  Exceto em casos muito raros, quando n√£o h√° contato a princ√≠pio, h√° um toque em algum segmento dos micr√≥ticos e, novamente, n√£o h√° toque novamente. <br><br>  Portanto, √© poss√≠vel encontrar o Mikrotik no qual a colis√£o ocorreu usando uma pesquisa bin√°ria de 10 simula√ß√µes no pior caso.  E, como descrito anteriormente, para tr√™s simula√ß√µes, voc√™ pode obter o estado do mundo atrav√©s de 100 microtics com precis√£o perfeita. <br><br>  De fato, havia v√°rios outros tipos de eventos al√©m de uma colis√£o, e v√°rios poderiam ter ocorrido em um tick, portanto, apenas o primeiro evento estava localizado em uma dicotomia, depois o segundo evento estava localizado no sufixo restante da dicotomia do tick, e assim por diante.  Assim, um carrapato foi considerado como segmento de v√°rios micr√≥ticos por simula√ß√£o, at√© que todos os eventos fossem contados. <br><br>  Portanto, os problemas foram resolvidos com precis√£o.  Mas, devido ao fato de haver 5 objetos na simula√ß√£o, e de acordo com as regras finais, deveria haver 7, e todos eles frequentemente travavam, em m√©dia as dicotomias eram chamadas com muita frequ√™ncia e isso funcionava proibitivamente por muito tempo.  Portanto, passei para a segunda etapa do desenvolvimento do simulador - otimiza√ß√£o. <br><br>  Obviamente, quando a trajet√≥ria de um dos rob√¥s termina, todos os outros objetos nos quais esse rob√¥ n√£o colide se movem sempre da mesma forma.  √â claro que n√£o √© necess√°rio recalcular seus estados com um simulador - por exemplo, calcular colis√µes pesadas com a arena. <br><br>  Antes de ordenar as trajet√≥rias de um rob√¥ em particular, basta simular e lembrar honestamente para os objetos restantes seus estados em todos os instantes, e simplesmente tirar esses estados da mem√≥ria.  Chamamos esses objetos de est√°ticos, e um rob√¥ para o qual a trajet√≥ria est√° classificada √© din√¢mico. <br><br>  Se subitamente algum objeto din√¢mico influencia (tem uma colis√£o) com um est√°tico, adicionamos esse objeto est√°tico aos din√¢micos at√© o final da simula√ß√£o da trajet√≥ria atual.  De fato, no est√°gio de armazenamento de estados para objetos est√°ticos, √© criado um gr√°fico de influ√™ncias um sobre o outro e, em seguida, √© usado para transferir corretamente objetos est√°ticos para objetos din√¢micos.  Por exemplo, um rob√¥ inimigo bate na bola e geramos um caminho em que derrubamos o rob√¥ inimigo antes que ele atinja a bola.  Agora, a bola voa mais longe e, durante a simula√ß√£o, quando o rob√¥ inimigo √© adicionado a objetos din√¢micos, √© necess√°rio observar que a bola deve ser adicionada aos objetos din√¢micos um pouco mais tarde, no tique-taque em que o rob√¥ inimigo acertaria a bola se n√£o interfer√≠ssemos nela .  No caso geral, isso √© feito recursivamente, de acordo com o gr√°fico de influ√™ncia. <br><br><img src="https://habrastorage.org/webt/ey/fr/cj/eyfrcjzg0s28o3fjqgberru64bm.jpeg"><br><br>  Agora, o simulador n√£o calcula todos os objetos, mas apenas os din√¢micos, e isso, em m√©dia, √© um objeto e meio em vez de sete, e dicotomias longas s√£o usadas com muito menos frequ√™ncia.  Acabou muito r√°pido, e n√£o precisa mais sofrer nas finais com rob√¥s adicionais - legal! <br><br>  A 26¬™ vers√£o com um novo simulador e uma profundidade de simula√ß√£o reduzida de 200 para 100 foi enviada para jogar no primeiro turno.  Mas continha alguns bugs e n√£o havia vantagem √≥bvia. <br><br>  O √∫ltimo problema com precis√£o permaneceu: movimento ao longo do arredondamento da arena.  Nesse caso, para obter precis√£o absoluta, √© necess√°rio contar honestamente 100 microtics.  A solu√ß√£o foi surpreendentemente simples: sempre salte de todas as superf√≠cies, exceto o piso.  Sem arredondamento - n√£o h√° problema. <br><br>  Al√©m disso, por algum tempo eu otimizei, fiquei desapontado e, observando jogos com estrat√©gias mais inteligentes, peguei novas constantes de pontua√ß√£o.  Tornou-se muito melhor, a estrat√©gia subiu alto no ranking e a 37¬™ vers√£o alcan√ßou o melhor resultado de todas as minhas estrat√©gias na sandbox o tempo todo antes da final. <br><br>  A partir da√≠, aluguei uma m√°quina de 32 n√∫cleos em um servi√ßo de nuvem para executar minhas estrat√©gias umas contra as outras e comecei a experimentar muito com tudo em sequ√™ncia.  Mudou as constantes.  Tentei usar minha pr√≥pria estrat√©gia para prever as a√ß√µes do inimigo, mas isso n√£o ajudou em jogos contra a minha estrat√©gia. <br><br>  Ao resolver a equa√ß√£o, ele aprendeu a calcular a √∫ltima a√ß√£o do inimigo e come√ßou a prever seu comportamento posterior.  Adicionado suporte para nitro: um ponto aleat√≥rio na superf√≠cie da esfera √© selecionado para a a√ß√£o.  Fez muitas edi√ß√µes menores.  Mas n√£o houve muito progresso.  No in√≠cio do segundo turno, 4-5 tops estavam me conquistando <br><br>  Ainda assim, n√£o me desesperei.  Tive duas melhorias que planejava implementar antes da final e esperava que elas melhorassem bastante a estrat√©gia.  Decidi n√£o enfrent√°-los at√© que o sandbox iniciasse de acordo com as regras finais. Em vez disso, dediquei um tempo para depurar e otimizar o que j√° havia sido feito para minimizar as chances de erros do mal na √∫ltima semana, quando cada minuto conta. <br><br>  A √∫ltima semana antes do in√≠cio da final. <br><br>  A primeira melhoria que fiz foi essa.  Nas partidas, no caso geral, a maioria dos meus problemas e qualquer outra estrat√©gia surgem quando o oponente toma posse da bola.  Ele de alguma forma bate nele, passa, em geral - controles.  √â imposs√≠vel prever a trajet√≥ria da bola e planejar mais algumas a√ß√µes lucrativas nesse caso. Resta fazer o que for at√© que o oponente cometa um erro e transfira o controle da bola para meus rob√¥s.  E depois disso, voc√™ deve tentar n√£o executar a√ß√µes que possam levar ao fato de que a bola estar√° novamente com o inimigo. <br><br>  Em outras palavras, no momento de planejar a trajet√≥ria, quero levar em considera√ß√£o as poss√≠veis posi√ß√µes dos advers√°rios e tentar n√£o bater na bola l√°.  Decidi usar um campo potencial quadridimensional (as tr√™s primeiras dimens√µes s√£o as coordenadas, o lado dos cubos √© igual ao di√¢metro do rob√¥ e a quarta dimens√£o √© o tempo), o qual preencherei, gerando trajet√≥rias inimigas aleat√≥rias. <br><br>  Mais tarde, ao avaliar a trajet√≥ria do meu rob√¥, calculei a soma em todos os cubos que cruzavam a bola nos pontos correspondentes no tempo e multiplicado por um coeficiente que excede todos os outros valores na pontua√ß√£o.  Ou seja, o campo potencial foi levado em considera√ß√£o com a maior prioridade ap√≥s a meta.  Tamb√©m permitiu remover inimigos da simula√ß√£o ap√≥s os primeiros 30 tiques (o inimigo poderia fazer qualquer coisa durante esse tempo enquanto estava no ch√£o, e previs√µes imprecisas e distantes apenas interferiam) se n√£o estivessem no ar (parecia que ningu√©m estaria no ar). ar para mudar a trajet√≥ria de maneira complexa usando nitro). <br><br>  Ao gerar trajet√≥rias aleat√≥rias para o inimigo, foi poss√≠vel descobrir o tempo m√≠nimo necess√°rio para ele bater na bola.  Este valor foi √∫til para resolver o problema com os primeiros pulos do meu goleiro fora do port√£o.  Muitos gols foram marcados para mim porque meu goleiro saltou cedo e se tornou incontrol√°vel no ar.  Depois disso, o inimigo previu com facilidade como meu goleiro voaria e, se pudesse, mudou a trajet√≥ria da bola antes que meu goleiro o alcan√ßasse.  Agora cancelei o pulo do goleiro se o inimigo conseguir acertar a bola mais cedo do que meu goleiro planeja fazer. <br><br><img src="https://habrastorage.org/webt/00/p5/e5/00p5e59dlcqljg9ags7vttdyohy.jpeg"><br><br>  Verificou-se que, sem danos significativos √† estrat√©gia, √© poss√≠vel calcular a trajet√≥ria n√£o todos os ticks, mas atrav√©s de um.  Ao reduzir pela metade o tempo de execu√ß√£o, eu dobrei o n√∫mero m√©dio de itera√ß√µes.  Alguma m√°gica acontece aqui.  Parece que, se contarmos as trajet√≥rias de cada segundo tick e dobrar o n√∫mero de itera√ß√µes, o n√∫mero m√©dio de itera√ß√µes n√£o ser√° alterado.  Mas, de fato, o simulador contar√° dois ticks (200 microtiks) por simula√ß√£o, em vez de um.  E as trajet√≥rias j√° ter√£o 50, e n√£o 100. √â por isso que o n√∫mero m√©dio de itera√ß√µes dobrar√°. <br><br>  Permaneceu alguns dias antes da final.  Embora minha estrat√©gia tenha come√ßado a sofrer menos gols devido ao bom controle de bola, n√£o comecei a marcar melhor.  Portanto, tive que motiv√°-la com um coeficiente quando em breve pelo objetivo de um oponente.  Quanto mais r√°pido um gol √© marcado, maior a propor√ß√£o.  E esse coeficiente est√° crescendo muito para exceder o restante da pontua√ß√£o e n√£o ter medo do campo em potencial, quando, por exemplo, restam 10 tiques antes da pontua√ß√£o. <br><br>  Adicionado um c√°lculo de onde o inimigo est√° enviando nitro.  Isso foi feito usando for√ßa bruta com um certo passo.  Al√©m disso, o goleiro come√ßou a reabastecer as reservas de nitro, quando nada amea√ßa meu objetivo. <br><br>  A segunda grande melhoria foi usar o minimax.  Se o uso de diferentes for√ßas de impacto para o inimigo durante a constru√ß√£o de trajet√≥rias est√°ticas afeta o v√¥o da bola, durante a busca foram consideradas as duas op√ß√µes, com for√ßa de impacto m√°xima e m√≠nima do inimigo, e o m√≠nimo das estimativas. <br><br>  Na final, eu tinha 7 op√ß√µes de trajet√≥rias quando o rob√¥ estava no ch√£o: <br><br><ul><li>  2 cantos sem salto; </li><li>  2 cantos com um salto; </li><li>  2 √¢ngulos com salto e velocidade nitro-codirecional; </li><li>  2 √¢ngulos com um salto e nitro compensa a gravidade; </li><li>  1 esquina com salto; </li><li>  1 √¢ngulo com salto e velocidade nitro-codirecional; </li><li>  1 canto com um salto e nitro compensa a gravidade (n√£o usado devido a um bug, notado ao escrever um artigo). </li></ul><br>  e duas op√ß√µes quando o rob√¥ est√° no ar: <br><br><ul><li>  nitro para um ponto aleat√≥rio na superf√≠cie da esfera e for√ßa de impacto aleat√≥ria; </li><li>  for√ßa de impacto aleat√≥ria. </li></ul><br>  Houve competi√ß√£o algumas horas antes da final, mas minha estrat√©gia foi claramente melhor.  Parecia que tudo j√° havia sido feito, eu n√£o dormia h√° mais de um dia e nada dependia de mim.  Permaneceu para assistir.  Duas horas antes da final, Andrei enviou seu graal rec√©m-assado e conquistou o primeiro lugar.  A hist√≥ria de sua participa√ß√£o pode ser encontrada aqui: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">habr.com/en/post/440398</a> . <br><br>  No intervalo entre as etapas da final, adicionei um campo potencial afastando a bola do meu gol, independentemente de tudo o mais, e isso, como me pareceu, me igualou a Andrei.  Mas j√° era tarde, porque perdi 7 pontos no primeiro tempo e at√© 3/3 de vit√≥rias no segundo tempo n√£o foram suficientes. <br><br>  RAIC √© uma competi√ß√£o dif√≠cil e pr√™mios s√£o dados aos participantes muito, muito dif√≠ceis.  Quando um participante est√° no topo da mesa, para ele isso n√£o √© apenas entretenimento - √© uma luta.  H√° muitas pequenas coisas a considerar ao escrever uma estrat√©gia forte.  Cada decis√£o tomada pode afetar significativamente o resultado. <br><br>  O c√≥digo fonte da estrat√©gia estar√° dispon√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt440924/">https://habr.com/ru/post/pt440924/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt440914/index.html">Perdi a f√© na ind√∫stria, queimei, mas o culto da ferramenta me salvou</a></li>
<li><a href="../pt440916/index.html">Radia√ß√£o: unidades</a></li>
<li><a href="../pt440918/index.html">Semana de seguran√ßa 08: hacking VFEMail live</a></li>
<li><a href="../pt440920/index.html">Implementando a interface do usu√°rio no iOS: melhor, mais r√°pido e escal√°vel</a></li>
<li><a href="../pt440922/index.html">Como o Level Flow funciona em Uncharted 4 e The Last Of Us</a></li>
<li><a href="../pt440928/index.html">Determine sua idade biol√≥gica no perfil</a></li>
<li><a href="../pt440930/index.html">Realizei cem entrevistas, recusei-me a centenas de pessoas - e s√≥ ent√£o aprendi a entrevistar</a></li>
<li><a href="../pt440932/index.html">Um pouco sobre intelig√™ncia de neg√≥cios de TI</a></li>
<li><a href="../pt440938/index.html">Por que o Google precisava de um gr√°fico de conhecimento?</a></li>
<li><a href="../pt440940/index.html">Redux - revisando a l√≥gica e as a√ß√µes do redutor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>