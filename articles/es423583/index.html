<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Conseguir accidentes a trav茅s de NotificationIRP en OSS  ★ </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola En una publicaci贸n anterior, se consider贸 un m茅todo para recibir alarmas activas a trav茅s de AlarmIRP. A continuaci贸n, veremos c贸mo recibir alarm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Conseguir accidentes a trav茅s de NotificationIRP en OSS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423583/">  Hola  En una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicaci贸n</a> anterior, se consider贸 un m茅todo para recibir alarmas activas a trav茅s de AlarmIRP.  A continuaci贸n, veremos c贸mo recibir alarmas a medida que ocurren usando NotificationIRP.  En el ejemplo, utilizaremos NetAct Nokia. <br><a name="habracut"></a><br>  En comparaci贸n con AlarmIRP, la interfaz considerada en este art铆culo nos requerir谩, adem谩s de crear un cliente CORBA, tambi茅n crear un "servidor CORBA" que procesar谩 los mensajes de NotificationIRP.  Este "servidor", entre otras cosas, debe implementar el m茅todo <i>push_structured_events</i> al que OSS transmitir谩 eventos en forma de <i>StructuredEvent []</i> .  Para hacer esto, necesitamos la siguiente clase: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IRPManager</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">org</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">omg</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CosNotifyComm</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SequencePushConsumerPOA</span></span></span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push_structured_events</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StructuredEvent[] notifications)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> org.omg.CosEventComm.Disconnected </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (StructuredEvent alarm: notifications) { alarmPrint(alarm); } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">offer_change</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EventType[] arg0, EventType[] arg1)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> org.omg.CosNotifyComm.InvalidEventType </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Offer Change!"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disconnect_sequence_push_consumer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Disconnected!"</span></span>); } }</code> </pre> <br>  El m茅todo alarmPrint es similar al mismo nombre del art铆culo anterior.  Al final, se adjuntar谩 el c贸digo completo de todo el proyecto. <br><br>  Ahora necesita "ajustar" esta clase con la funcionalidad del servidor ORB, obtener NotificationIRP y pasarle un enlace al objeto recibido. <br><br><pre> <code class="java hljs">_irpMan = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IRPManager(); _notificationOrb = ORB.init(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); org.omg.CORBA.ORB orb = ORB.init(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); org.omg.CORBA.Object rootObj = orb.string_to_object(readIOR()); _notifIrp = com.nsn.oss.nbi.internal.corba.NotificationIRPSystem.NotificationIRPHelper.narrow(rootObj); POA poa; poa = POAHelper.narrow(_notificationOrb.resolve_initial_references(<span class="hljs-string"><span class="hljs-string">"RootPOA"</span></span>)); poa.the_POAManager().activate(); _notifySrvr = poa.servant_to_reference(_irpMan); _notifyServer = _notificationOrb.object_to_string(_notifySrvr); <span class="hljs-comment"><span class="hljs-comment">//     String[] aCat = _notifIrp.get_notification_categories(new NotificationTypesSetHolder()); StringTypeOpt alarmFltr = new StringTypeOpt(); alarmFltr.value(alarmFilter); //   _attId = _notifIrp.attach_push(_notifyServer, timetick, aCat, alarmFltr, ""); // ORB   (new notificationThread()).start();</span></span></code> </pre><br>  Para ejecutar ORB usaremos un subproceso: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">notificationThread</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Thread</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ _notificationOrb.run(); } }</code> </pre><br>  OSS dejar谩 de enviarnos notificaciones despu茅s de que <i>expire el tiempo</i> , o hasta que lo <i>rechacemos</i> llamando al m茅todo de <i>desconexi贸n</i> .  Si necesitamos recibir mensajes despu茅s de que caduque el temporizador, debemos informarlo al sistema utilizando el m茅todo <i>get_subscription_status</i> .  Cuando se llama, el temporizador comenzar谩 la cuenta regresiva nuevamente. <br>  Queda por recopilar todo, encontrar las bibliotecas necesarias en NetAct y conectarse a la m谩quina virtual en la que se est谩 <i>ejecutando el</i> servidor <i>nbi3gc</i> (desde el IOR en este ejemplo estamos leyendo el archivo).  Para ejecutar el ejemplo propuesto, usaremos el comando: <br><blockquote>  java -cp .: jacorb-3.1.jar: jacorb-services-3.1.jar: nbi3gc-internal-corba-interface-17.8.0.158.jar AlarmClient </blockquote><br><div class="spoiler">  <b class="spoiler_title">Debajo del spoiler, el c贸digo de ejemplo completo</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.BufferedReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.FileReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.text.DateFormat; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.text.SimpleDateFormat; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Date; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.CORBA.IntHolder; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.CORBA.ORB; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.CORBA.ORBPackage.InvalidName; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.CosNotification.EventType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.CosNotification.Property; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.CosNotification.StructuredEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.PortableServer.POA; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.PortableServer.POAHelper; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.PortableServer.POAManagerPackage.AdapterInactive; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.PortableServer.POAPackage.ServantNotActive; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.PortableServer.POAPackage.WrongPolicy; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.TimeBase.UtcT; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.omg.TimeBase.UtcTHelper; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.nsn.oss.nbi.internal.corba.ManagedGenericIRPConstDefs.StringTypeOpt; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.nsn.oss.nbi.internal.corba.ManagedGenericIRPConstDefs.StringTypeOptHolder; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.nsn.oss.nbi.internal.corba.ManagedGenericIRPSystem.InvalidParameter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.nsn.oss.nbi.internal.corba.ManagedGenericIRPSystem.OperationNotSupported; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.nsn.oss.nbi.internal.corba.ManagedGenericIRPSystem.ParameterNotSupported; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.nsn.oss.nbi.internal.corba.NotificationIRPConstDefs.NotificationTypesSetHolder; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.nsn.oss.nbi.internal.corba.NotificationIRPSystem.GetNotificationCategories; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AlarmClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> com.nsn.oss.nbi.internal.corba.NotificationIRPSystem.NotificationIRP _notifIrp = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String alarmFilter =<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> UNIX_OFFSET = <span class="hljs-number"><span class="hljs-number">122192928000000000L</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String delimiter = <span class="hljs-string"><span class="hljs-string">";"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> org.omg.CORBA.ORB _notificationOrb = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String _notifyServer = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> org.omg.CORBA.Object _notifySrvr = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String _attId = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> IRPManager _irpMan = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> timetick = <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ AlarmClient ac = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AlarmClient(); ac.startNotifications(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Thread.sleep(<span class="hljs-number"><span class="hljs-number">20000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InterruptedException e) { e.printStackTrace(); } ac.stopNotifications(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readIOR</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String iorType)</span></span></span><span class="hljs-function"> </span></span>{ File f = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"/d/oss/global/var/NSN-nbi3gc/ior/NotificationIRP.ior"</span></span>); BufferedReader br; String iorContents = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { br = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BufferedReader(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileReader(f)); iorContents = br.readLine(); br.close(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { e.printStackTrace(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> iorContents; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alarmPrint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StructuredEvent alarm)</span></span></span></span>{ String result = <span class="hljs-string"><span class="hljs-string">""</span></span>; UtcT timeValue = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; Date dt; DateFormat df; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (alarm.filterable_data != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Property filterableData: alarm.filterable_data) { String fieldName = filterableData.name; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (fieldName){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"b"</span></span>: timeValue = UtcTHelper.extract(filterableData.value); dt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Date((timeValue.time - UNIX_OFFSET) / <span class="hljs-number"><span class="hljs-number">10000</span></span>); df = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleDateFormat(<span class="hljs-string"><span class="hljs-string">"dd-MM-yyyy HH:mm:ss"</span></span>); result = result + df.format(dt) + delimiter; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"e"</span></span>: result = result + filterableData.value.extract_string() + delimiter; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"i"</span></span>: result = result + filterableData.value.extract_string() + delimiter; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } System.out.println(result); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startNotifications</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ _irpMan = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IRPManager(); _notificationOrb = ORB.init(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); org.omg.CORBA.ORB orb = ORB.init(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); org.omg.CORBA.Object rootObj = orb.string_to_object(readIOR(<span class="hljs-string"><span class="hljs-string">"NotificationIRP"</span></span>)); _notifIrp = com.nsn.oss.nbi.internal.corba.NotificationIRPSystem.NotificationIRPHelper.narrow(rootObj); POA poa; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { poa = POAHelper.narrow(_notificationOrb.resolve_initial_references(<span class="hljs-string"><span class="hljs-string">"RootPOA"</span></span>)); poa.the_POAManager().activate(); _notifySrvr = poa.servant_to_reference(_irpMan); _notifyServer = _notificationOrb.object_to_string(_notifySrvr); String[] aCat = _notifIrp.get_notification_categories(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotificationTypesSetHolder()); StringTypeOpt alarmFltr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringTypeOpt(); alarmFltr.value(alarmFilter); _attId = _notifIrp.attach_push(_notifyServer, timetick, aCat, alarmFltr, <span class="hljs-string"><span class="hljs-string">""</span></span>); (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> notificationThread()).start(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InvalidName | AdapterInactive | ParameterNotSupported | com.nsn.oss.nbi.internal.corba.NotificationIRPSystem.AtLeastOneNotificationCategoryNotSupported | InvalidParameter | com.nsn.oss.nbi.internal.corba.NotificationIRPSystem.Attach | com.nsn.oss.nbi.internal.corba.NotificationIRPSystem.AlreadySubscribed | ServantNotActive | WrongPolicy | GetNotificationCategories | OperationNotSupported e) { e.printStackTrace(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stopNotifications</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { _notifIrp.detach(_notifyServer, _attId); _notificationOrb.shutdown(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (com.nsn.oss.nbi.internal.corba.NotificationIRPSystem.DetachException | ParameterNotSupported | InvalidParameter e) { e.printStackTrace(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">renewSubscription</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ com.nsn.oss.nbi.internal.corba.NotificationIRPConstDefs.SubscriptionStateHolder arg2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> com.nsn.oss.nbi.internal.corba.NotificationIRPConstDefs.SubscriptionStateHolder(); IntHolder arg3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntHolder(); StringTypeOptHolder arg1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringTypeOptHolder(); arg1.value.value(alarmFilter); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { _notifIrp.get_subscription_status(_attId, arg1, arg2, arg3); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InvalidParameter | com.nsn.oss.nbi.internal.corba.ManagedGenericIRPSystem.OperationNotSupported | com.nsn.oss.nbi.internal.corba.NotificationIRPSystem.GetSubscriptionStatus e) { e.printStackTrace(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> arg2.value.value(); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IRPManager</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">org</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">omg</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CosNotifyComm</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SequencePushConsumerPOA</span></span></span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push_structured_events</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StructuredEvent[] notifications)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> org.omg.CosEventComm.Disconnected </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (StructuredEvent alarm: notifications) { alarmPrint(alarm); } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">offer_change</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EventType[] arg0, EventType[] arg1)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> org.omg.CosNotifyComm.InvalidEventType </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Offer Change!"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disconnect_sequence_push_consumer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Disconnected!"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">notificationThread</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Thread</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ _notificationOrb.run(); } } }</code> </pre></div></div><br>  Gracias por su atencion  Result贸 brevemente, pero, en mi opini贸n, se consideran los puntos principales, espero que esta informaci贸n sea 煤til.  Preguntas y comentarios son bienvenidos. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es423583/">https://habr.com/ru/post/es423583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es423571/index.html">Todo tipo de cosas en MetaPost</a></li>
<li><a href="../es423573/index.html">La sincronicidad es un mito.</a></li>
<li><a href="../es423575/index.html">Est谩ndares de dise帽o en microelectr贸nica: 驴d贸nde hay realmente 7 nan贸metros en tecnolog铆a de 7 nm?</a></li>
<li><a href="../es423577/index.html">Creando un juego de l贸gica para una plataforma de juego</a></li>
<li><a href="../es423579/index.html">Servicios en la nube para WebGL? No gracias</a></li>
<li><a href="../es423585/index.html">Live: CI / CD en iOS y Android</a></li>
<li><a href="../es423587/index.html">Construyendo el cl煤ster InnoDB desde mysql 5.7 en centos 7</a></li>
<li><a href="../es423589/index.html">C贸mo elegimos TTS por ejemplo suena en el Diccionario</a></li>
<li><a href="../es423591/index.html">Viejas canciones sobre lo principal. Java y solicitudes salientes</a></li>
<li><a href="../es423593/index.html">Google anuncia un concurso para ataques a algoritmos de visi贸n artificial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>