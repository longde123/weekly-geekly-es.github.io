<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👃🏾 🎠 🈚️ Sedikit di belakang panggung VK ⛪️ 🕜 💅🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Untuk mengantisipasi Siberian HighLoad ++, kami berbicara dengan salah satu pembicara kami, Yuri Nasretdinov, menanyakan kepadanya apakah ia bekerja d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sedikit di belakang panggung VK</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/414881/"> Untuk mengantisipasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Siberian HighLoad ++,</a> kami berbicara dengan salah satu pembicara kami, Yuri Nasretdinov, menanyakan kepadanya apakah ia bekerja dengan baik di VKontakte, sementara pada saat yang sama membuka tabir kerahasiaan atas dapur internal jejaring sosial. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dd8/bf5/262/dd8bf526210478b0312431ee75a96903.jpg"><br><br>  Dalam kerangka konferensi, Yuri akan berbicara tentang bagaimana jejaring sosial memasukkan data ke dalam ClickHouse dari puluhan ribu server, yang baru saja kita bahas dalam percakapan saat ini. <br><a name="habracut"></a><br>  <b>- Tolong beritahu kami tentang pekerjaan Anda.</b> <br><br>  Saat ini saya bekerja di VK.  Benar, tidak begitu lama - sejak awal tahun ini.  Saya terlibat dalam infrastruktur video dan infrastruktur situs.  Situs ini terutama ditulis dalam PHP, dan saya mengembangkan layanan dan utilitas dalam PHP dan Go. <br><br>  <b>- Apa yang mendorong Anda untuk pergi bekerja di VK?</b> <br><br>  Saya diundang untuk bekerja di VK.  Dan saya pikir - mengapa tidak?  VKontakte adalah situs dengan muatan tertinggi di Rusia dan salah satu situs terbesar di seluruh Internet.  Saya selalu tertarik untuk mengerjakan proyek sebesar itu - untuk mengambil bagian dalam pengembangan situs dan aplikasi seluler.  Mungkin bahkan mempengaruhi perkembangan mereka, entah bagaimana membaik.  Ini mungkin faktor yang paling memotivasi - VKontakte semua orang tahu dan menggunakan.  Dan sangat menyenangkan bekerja pada produk semacam itu, untuk membantunya menjadi lebih baik. <br><br>  <b>- Sebelum itu, apakah Anda harus berurusan dengan skala yang serupa?</b> <br><br>  Ya, selama sekitar lima tahun saya bekerja di Badoo dalam posisi yang sama - dalam pembangunan infrastruktur.  Tetapi beban dalam VK adalah urutan besarnya lebih besar. <br><br>  <b>- Apakah Anda memiliki masalah saat beralih ke VK?</b> <br><br>  Kantor VKontakte terletak di St. Petersburg.  Dan sebelum itu saya tinggal di pinggiran kota, jadi saya harus pindah.  Langkah itu sendiri cukup mudah - perusahaan membantu.  Tetapi di St. Petersburg sangat dingin di musim dingin.  Ini mungkin hal yang paling sulit dihadapi. <br><br>  <b>- Tidak ada perasaan bahwa kehidupan tetap ada di suatu tempat di dalam Moscow Ring Road?</b> <br><br>  Pada mulanya, bagiku itu sangat terasa, terlepas dari kenyataan bahwa aku sebelumnya pernah ke kota-kota lain di Rusia, di samping Moskow.  Tetapi pada kenyataannya, saya suka St. Petersburg, bahkan mungkin lebih dari Moskow.  Dia lebih tenang - lebih sedikit orang, mereka tidak terburu-buru, dan ini bagus. <br><br>  <b>- Dan dari sudut pandang teknologi yang digunakan dalam pekerjaan - apa yang secara fundamental baru bagi Anda?</b> <br><br>  VKontakte sangat besar, masing-masing, benar-benar ada beberapa nuansa di sini yang belum pernah saya temui sebelumnya.  Misalnya, di Badoo praktis tidak ada profil yang sangat populer yang dikunjungi oleh banyak orang.  VKontakte memilikinya, karena ada sejumlah alat menarik yang memungkinkan Anda untuk dengan cepat mengukur akun yang sangat populer. <br><br>  Selain itu, VKontakte berbeda dalam hal itu, karena alasan historis, hampir semuanya ada di sini.  Tidak seperti, misalnya, Badoo, yang terutama menggunakan MySQL dan Memcache (plus layanannya), VKontakte menggunakan database sendiri dan bahkan versi Memcache sendiri.  Pengembang VK mampu menciptakan lebih banyak layanan yang sangat efisien (dengan latar belakang MySQL yang sama) yang bekerja dengan baik pada skala yang sangat besar.  Sebagian besar alat jadi tanpa file tidak dapat digunakan dalam infrastruktur yang mencakup puluhan ribu server, seperti VK, dan ini menciptakan kesulitan yang signifikan. <br><br>  <b>- Apakah sulit untuk dengan cepat menembus alat "internal" seperti itu?</b> <br><br>  Saya bekerja di departemen infrastruktur, dan tidak banyak hal yang tidak standar di sini.  Pada dasarnya ini adalah tumpukan standar yang bahkan lebih dari yang saya kerjakan sebelumnya.  Tetapi jika saya bekerja, misalnya, di departemen yang berurusan dengan fitur back-end, maka, tentu saja, akan ada pengetahuan yang berguna tentang bagaimana sistem Highload pada dasarnya dibangun, tetapi tidak detail spesifik.  Dalam situasi seperti itu, halaman untuk karyawan baru, deskripsi mekanisme internal membantu. <br><br>  Pada prinsipnya, bagian nyata dari infrastruktur VK diposting oleh Pavel Durov dalam sumber terbuka bersama dengan dokumentasi.  Siapa pun dapat membacanya, baca cara kerjanya.  Tetapi, tentu saja, jauh lebih mudah untuk memahami ini dalam konteks bagaimana itu digunakan secara internal.  Anda datang dan mulai melakukan tugas, secara bertahap mempelajari apa yang diperlukan untuk menyelesaikannya.  Lihat bagaimana hal itu sudah dilakukan, dan lakukan hal yang sama.  Dan itu sudah cukup.  Lagi pula, bahkan jika Anda menguasai membaca semua dokumentasi pada infrastruktur VK, sampai Anda mulai menggunakannya, kemungkinan besar Anda tidak akan mengerti bagaimana semuanya bekerja secara rinci. <br><br>  Saya perhatikan bahwa semua hal di atas berlaku untuk departemen saya (yang lain mungkin berbeda). <br><br>  <b>- Apakah Anda memiliki spesialisasi dalam VK?</b>  <b>Tugas apa yang Anda kelola untuk berpartisipasi?</b> <br><br>  Tidak ada spesialisasi seperti itu.  Saya melakukan apa yang saat ini diperlukan. <br>  Saya bekerja di departemen yang kegiatannya memengaruhi berbagai bagian infrastruktur jejaring sosial, dan ini adalah proyek besar (butuh banyak waktu untuk sepenuhnya memahami perangkat VK dengan pemahaman). <br><br>  Sebagai contoh, saya berpartisipasi dalam peningkatan parsial ke PHP7.  Ini, pada prinsipnya, berlaku untuk seluruh situs, tetapi pada saat yang sama tidak berlaku untuk detail spesifik apa pun. <br><br>  Contoh lain adalah masalah dengan mengumpulkan log, untuk solusi yang kami gunakan ClickHouse.  Saya akan membicarakan ini di HighLoad ++. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/02b/ab0/b88/02bab0b88c3afe4212bb71fdfbc17ed8.jpg"><br><br>  <b>- Mari kita beri spoiler kecil - apa fitur dari masalah ini?</b> <br><br>  Tangkapan itu merupakan kombinasi dari dua faktor: di satu sisi, kami memiliki banyak log yang ditulis, dan di sisi lain, kami perlu dengan cepat memeriksa mereka. <br><br>  Sistem yang ada, pada kenyataannya, tidak dapat menyimpan sejumlah besar data, dengan cepat hanya memberikan informasi terbaru.  Untuk mendapatkan ceritanya, Anda harus melakukan kueri yang sangat berat secara manual. <br><br>  <b>- Pembaca mungkin tertarik pada mengapa kolom ClickHouse digunakan untuk solusinya?</b> <br><br>  Kolom - karena kekhasan pekerjaan.  Seringkali saat mencari informasi dalam log, kita perlu memfilter berdasarkan server atau pengguna.  Ketika datang untuk membaca dari disk, database kolom memungkinkan Anda untuk mempercepat membaca berkali-kali (dengan latar belakang garis), yang dicapai dengan membaca hanya kolom yang diperlukan dan kompresi bit-bijaksana yang lebih efisien.  Selain itu, ClickHouse juga memparalelkan pertanyaan di seluruh kernel.  Yaitu  tidak seperti database klasik, ia dapat melakukan permintaan tunggal bahkan pada seluruh cluster, menggunakan hampir semua sumber daya baik prosesor dan disk.  Database seperti itu, terutama yang gratis, tidak terlalu banyak, jika ada.  ClickHouse muncul dengan sangat baik untuk tugas menyimpan log. <br><br>  Saya juga mencatat bahwa sebelum kedatangan saya, ClickHouse digunakan oleh admin VK dalam tugas yang agak khusus - sebagai alat back-end untuk Grafana.  Ini adalah pengumpulan data dan sistem grafik untuk server.  Benar, hanya beberapa server dengan ClickHouse yang digunakan, yaitu, sebenarnya, itu tidak tersedia untuk programmer. <br><br>  Setelah keputusan dibuat untuk menggunakan ClickHouse untuk menyimpan log, saya membantu menciptakan infrastruktur yang sesuai sehingga nyaman dan dapat dimengerti oleh semua orang. <br><br>  <b>- Apakah VK menggunakan solusi pihak ketiga dalam jumlah yang signifikan (selain yang disebutkan di atas)?</b> <br><br>  Tentu saja digunakan.  Sebagai contoh, Linux, di mana semua ini berputar.  Jangan meremehkan bagian pekerjaan yang dilakukan sistem operasi untuk kita. <br><br>  Anehnya, PHP digunakan.  Kami memiliki mesin berpemilik yang disebut KittenPHP, yang menerjemahkan PHP ke dalam C ++, tetapi untuk sejumlah tugas, termasuk produksi, PHP biasa juga digunakan. <br><br>  Digunakan oleh nginx.  Hingga saat ini, MySQL terlibat di beberapa tempat, tetapi secara bertahap kami menolaknya - kami menggunakan database yang ditulis sendiri. <br><br>  <b>- Dan bagaimana proses pengembangan dibangun?</b> <br><br>  Saya tidak melihat perbedaan besar antara proses dalam VK dan apa yang diterima di industri.  Kami memiliki pelacak bug, departemen yang menangani fungsi berbeda, bertanggung jawab atas bagian mereka dari proyek;  ada sprint yang bertanggung jawab atas komponen, dll. <br><br>  <b>- Alih-alih hasilnya, apakah mungkin untuk menunjukkan arah pengembangan departemen tempat Anda bekerja?</b> <br><br>  Sejauh yang saya tahu, sebelum departemen di mana saya sekarang bekerja terdiri dari 1-2 orang. <br>  Dan kami mulai terlibat dalam infrastruktur dalam bentuk yang sedang dilakukan sekarang (mungkin, sepertinya DevOps) belum lama ini.  Karena itu, masih terlalu dini untuk membicarakan rencana - kami sedang menyelesaikan masalah yang ada, dan sejauh ini kami memiliki cukup banyak pekerjaan.  Dan kita akan lihat nanti. <br><br><hr><br>  Yuri akan memberi tahu Anda lebih banyak tentang VK internal, menggunakan ClickHouse dan detail lainnya dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceramahnya</a> di Siberian HighLoad ++ pada 25-26 Juni.  Anda juga tentu akan tertarik dengan laporan ini: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Replikasi data real-time dari MySQL ke ClickHouse untuk kelancaran migrasi analitik dari MySQL ke ClickHouse</a> (Vladislav Klimenko, Valery Panov) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Belajar peringkat sedikit</a> (Andrey Aksenov) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Evolusi alat dan layanan di Badoo: kriteria seleksi kami dan apa yang</a> dihasilkannya (Anton Turetsky) </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id414881/">https://habr.com/ru/post/id414881/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id414871/index.html">Badai debu di Mars mencapai skala planet, bahkan Curiosity terpengaruh</a></li>
<li><a href="../id414873/index.html">IDisposable - bahwa ibumu tidak berbicara tentang membebaskan sumber daya. Bagian 1</a></li>
<li><a href="../id414875/index.html">Kubernet mengandung integrasi yang menggantikan Docker yang siap diproduksi</a></li>
<li><a href="../id414877/index.html">Lensa yang tidak biasa untuk kamera biasa atau cara berhenti memikirkan fokus</a></li>
<li><a href="../id414879/index.html">Mengapa 2 ekstruder di printer 3D?</a></li>
<li><a href="../id414883/index.html">Kenangan terdengar dengan cara baru: BBC memperbarui arsip suara proyek RemArc</a></li>
<li><a href="../id414885/index.html">Kami menangani kesalahan dan "penopang" dalam Daftar Badan Hukum Negara Bersatu - register negara dari badan hukum</a></li>
<li><a href="../id414887/index.html">Membuat hook kucing di Unity. Bagian 1</a></li>
<li><a href="../id414889/index.html">Ketika Lembaga Digital Membutuhkan IaaS</a></li>
<li><a href="../id414891/index.html">Kebiasaan Pengembang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>