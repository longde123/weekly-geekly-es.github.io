<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙏🏾 ✍🏾 👨🏿‍🎓 Vendredi JS: jeu JS et CSS en ligne 😒 👩🏻‍🚒 🤰🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beaucoup d'anciens se souviendront peut-être d'une épidémie d'articles avec des titres comme "% quelque chose% dans 30 lignes de JS". Et aussi le post...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vendredi JS: jeu JS et CSS en ligne</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419135/">  Beaucoup d'anciens se souviendront peut-être d'une épidémie d'articles avec des titres comme "% quelque chose% dans 30 lignes de JS".  Et aussi le post épique " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Jeu en 0 lignes de code sur JS pur</a> " qui a suivi, après quoi l'épidémie a brusquement décliné.  Conscient que je ne dépasserais jamais ce chef-d'œuvre, j'ai néanmoins décidé cinq ans plus tard de terminer mes cinq cents. <br><br>  Mesdames et Messieurs, nous vous proposons le jeu «Tic-Tac-Toe» à zéro lignes de JS, et aussi, contrairement au jeu mentionné ci-dessus, à zéro lignes de CSS (y compris les styles en ligne).  Uniquement du HTML pur, du hardcore. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/41/im/hj/41imhjnqxqozjtphb0vpbtyylx0.png"></div><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien vers le jeu</a> <br><br>  Cela a l'air moche, mais cela fonctionnera dans n'importe quel navigateur.  Sous la coupe, je vais vous dire pourquoi le jeu sans JS était dans la section "Vendredi JS", ainsi que d'autres détails sales.  Cependant, je n'ouvrirai l'Amérique à personne, si vous êtes un codeur expérimenté, vous ne pouvez même pas passer sous la coupe <br><a name="habracut"></a><br>  En fait, tout est très stupide.  Le jeu se compose de près de 6 000 pages de code HTML statique, reliant les uns aux autres.  Lorsque vous piquez sur une cellule du terrain de jeu, vous accédez à la page où le déplacement vers cette cellule a déjà été effectué.  Évidemment, écrire des pages de 6k avec vos mains est un plaisir en dessous de la moyenne.  Par conséquent (surprise!) Les pages sont générées par des scripts JS utilisant NodeJS. <br><br><div class="spoiler">  <b class="spoiler_title">Digression lyrique</b> <div class="spoiler_text">  Après avoir écrit la ligne précédente, je me suis soudainement demandé si l'expression «JS-script» n'était pas une tautologie, comme «CD-ROM» ou «VIP-person».  D'une part, cela semble l'être.  D'un autre côté, JS n'est toujours pas une abréviation, mais une abréviation de nature légèrement différente.  Cependant, le poste n'est toujours pas sur la philologie, car la digression lyrique se termine et l'attaque lyrique commence. <br></div></div><br>  Tout d'abord, nous construisons le soi-disant arbre de jeu - la totalité de tous les états de jeu possibles et les transitions entre eux.  L'état initial du jeu dans mon code est le suivant: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { <span class="hljs-attr"><span class="hljs-attr">player</span></span>: PLAYER_X, <span class="hljs-attr"><span class="hljs-attr">field</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">9</span></span>)).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> EMPTY_CELL), <span class="hljs-attr"><span class="hljs-attr">moves</span></span>: {} }</code> </pre> <br>  Il contient des informations sur qui est maintenant le tour et quel est l'état du terrain de jeu.  À l'avenir, il contiendra également des informations sur les mouvements qui peuvent être effectués et les états dans lesquels ils aboutiront, ainsi que d'autres choses agréables. <br><br>  Ensuite, nous commençons, je m'excuse pour la tautologie, à partir de l'état initial et faisons ce qui suit: <br><br><ol><li>  On vérifie si l'état est terminal (victoire des croix, victoire des jetons, nul). </li><li>  Si tel est le cas, ajoutez des informations à ce sujet à l'objet d'état et terminez. </li><li>  Sinon, parcourez toutes les cellules du champ. </li><li>  Pour chaque cellule vide du champ, créez un nouvel état de jeu dans lequel le joueur actuel a effectué un mouvement vers cette cellule et le mouvement a été transmis au joueur suivant. </li><li>  Dans le champ des <code>moves</code> de l'état actuel, ajoutez un enregistrement d'un mouvement possible.  La clé de cette entrée est l'index de cellule et la valeur est le lien vers le nouvel état. </li><li>  Nous répétons cet algorithme récursivement pour tous les nouveaux états apparus. </li></ol><br>  En fait, mon code est un peu plus compliqué, j'ai par habitude déplié la récursivité dans une boucle, et au lieu de références à d'autres états lors des <code>moves</code> leurs clés de chaîne sont stockées dans un certain tableau associatif.  Mais ce sont tous les détails. <br><br>  Ensuite, à partir de chaque objet d'état du jeu, nous générons une page HTML.  En parcourant l'objet de <code>moves</code> , nous remplissons les cellules vides du champ avec des liens vers les pages correspondant aux mouvements effectués dans ces cellules.  Ensuite, nous transformons le tableau unidimensionnel du champ en un tableau HTML bidimensionnel.  Nous ajoutons toutes sortes de choses agréables comme des instructions sur lesquelles le joueur marche et des liens vers la page d'accueil - et le tour est joué! <br><br>  En plus du mode, lorsque les croix et les zéros sont placés par une personne, dans mon hit méga-indie, il y a aussi la possibilité de jouer contre le cerveau de fer.  Ceci est réalisé comme suit: <br><br><ol><li>  Premièrement, récursivement (en fait pas) pour chaque état de jeu, le résultat attendu du jeu est calculé - celui qui sera atteint si les deux parties jouent parfaitement. </li><li>  Ensuite, l'arbre de jeu est modifié comme suit: au lieu du coup du joueur, nous faisons maintenant deux coups à la fois.  Le deuxième mouvement est le mouvement de l'intelligence artificielle.  De plus, parmi toutes les réponses possibles au coup du joueur, celle avec le meilleur résultat attendu est sélectionnée.  Ainsi, après avoir piqué sur une cage vide, le joueur se rend immédiatement à la position où une croix (ou zéro) est apparue dans cette cellule, et un zéro (ou croix) est apparu dans une autre cellule. </li><li>  Toutes les positions de jeu correspondant à des mouvements que l'IA ne fait pas sont rejetées sans pitié. </li><li>  Ensuite, le code HTML est généré à partir des positions restantes dans un dossier séparé - exactement le même que pour le cas de deux joueurs. </li></ol><br>  Par des principes similaires, vous pouvez implémenter n'importe quel jeu avec un arbre pas très grand.  Cependant, si je veux faire des échecs de cette manière, il me semble que le github refusera d'héberger ceci =) <br><br>  En parlant de github: vous pouvez y voir l'intégralité du code (le lien se trouve sur la page principale du jeu).  Sur ce point, en général, c'est tout.  Au revoir, filles et garçons.  A bientôt. <br><br>  <b>PS Le</b> remplacement des sauts de ligne du style Windows au style Unix est très long lorsqu'il s'agit de 6 000 fichiers.  J'ai regretté de ne pas avoir pris soin de cela au stade de l'écriture du code, mais j'ai quand même courageusement enduré <code>git add</code> à la fin. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419135/">https://habr.com/ru/post/fr419135/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419125/index.html">Le retour de la station soviétique. Analyses et documents</a></li>
<li><a href="../fr419127/index.html">Trois réincarnations d'une boutique en ligne. Comment drainer de l'argent, du temps et pourquoi les modèles sont bons</a></li>
<li><a href="../fr419129/index.html">Systèmes multi-agents dans la construction d'espaces virtuels</a></li>
<li><a href="../fr419131/index.html">Annonce de la date de lancement préliminaire du module lunaire SpaceIL</a></li>
<li><a href="../fr419133/index.html">Webinaires du vendredi: apprendre à programmer gratuitement</a></li>
<li><a href="../fr419137/index.html">Journalisation des activités à l'aide de l'API Web Beacon</a></li>
<li><a href="../fr419141/index.html">Le phishing sexuel gagne du terrain aux États-Unis</a></li>
<li><a href="../fr419143/index.html">Création d'une machine d'arcade d'émulation. Partie 4</a></li>
<li><a href="../fr419145/index.html">Fintech Digest: la capitalisation d'Apple a dépassé le billion de dollars, l'IA a aidé eBay à augmenter ses revenus de plusieurs milliards</a></li>
<li><a href="../fr419147/index.html">Cube à 1000 dimensions: est-il possible de créer un modèle informatique de la mémoire humaine aujourd'hui?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>