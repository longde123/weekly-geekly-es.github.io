<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öîÔ∏è üßõüèø üíÖ SwiftUI en los estantes üå¨Ô∏è ü§úüèª üéã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cada vez que aparece un nuevo marco en un lenguaje de programaci√≥n, tarde o temprano, aparecen personas que aprenden el lenguaje de √©l. Este fue proba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SwiftUI en los estantes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485548/"> Cada vez que aparece un nuevo marco en un lenguaje de programaci√≥n, tarde o temprano, aparecen personas que aprenden el lenguaje de √©l.  Este fue probablemente el caso en el desarrollo de iOS en el momento de la aparici√≥n de Swift: al principio se consider√≥ como una adici√≥n a Objective-C, pero todav√≠a no lo encontr√©.  Ahora, si comienza desde cero, la selecci√≥n del idioma ya no vale la pena.  Swift est√° m√°s all√° de la competencia. <br><br>  Lo mismo, pero a menor escala, est√° sucediendo con los marcos.  La aparici√≥n de SwiftUI no es una excepci√≥n.  Probablemente soy un representante de la primera generaci√≥n de desarrolladores que comenzaron aprendiendo SwiftUI, ignorando UIKit.  Esto tiene un precio: hasta ahora hay muy pocos materiales de capacitaci√≥n y ejemplos de c√≥digo de trabajo.  S√≠, la red ya tiene varios art√≠culos que hablan sobre una caracter√≠stica particular, una herramienta particular.  En el mismo <a href="https://www.hackingwithswift.com/quick-start/swiftui" rel="nofollow">www.hackingwithswift.com</a> ya hay muchos ejemplos de c√≥digo con explicaciones.  Sin embargo, hacen poco para ayudar a aquellos que deciden aprender SwiftUI desde cero, como yo.  La mayor√≠a de los materiales en la red son respuestas a preguntas espec√≠ficas formuladas.  Un desarrollador experimentado puede descubrir f√°cilmente c√≥mo funciona todo, por qu√© es as√≠ y por qu√© deber√≠a aplicarse.  Para un principiante, primero debe comprender qu√© pregunta hacer, y solo entonces puede llegar a estos art√≠culos. <br><br><img src="https://habrastorage.org/webt/1u/td/t6/1utdt6xa6tcsov4biwj2ura36s0.png"><br><br>  Debajo del corte, intentar√© sistematizar y clasificar lo que he logrado aprender en este momento.  El formato del art√≠culo es casi una gu√≠a, aunque m√°s bien, una hoja de trucos compilada por m√≠ en la forma en que me gustar√≠a leerla al comienzo de mi viaje.  Para los desarrolladores experimentados que a√∫n no han profundizado en SwiftUI, tambi√©n hay un par de ejemplos de c√≥digo interesantes, y las explicaciones textuales se pueden leer en diagonal. <br><br>  Espero que este art√≠culo te ahorre algo de tiempo cuando tambi√©n quieres sentir un poco de magia. <br><a name="habracut"></a><br><h3>  Para empezar, un poco sobre ti </h3><br>  Pr√°cticamente no tengo experiencia en desarrollo m√≥vil y experiencia significativa <br>  en 1s no podr√≠a ayudar mucho aqu√≠.  Sobre c√≥mo y por qu√© decid√≠ aprender SwiftUI, te dir√© en otro momento, si ser√° interesante para alguien, por supuesto. <br><br>  Sucedi√≥ que el comienzo de mi inmersi√≥n en el desarrollo m√≥vil coincidi√≥ con el lanzamiento de iOS 13 y SwiftUI.  Esta es una se√±al, pens√©, y decid√≠ comenzar de inmediato con ella, ignorando UIKit.  Me pareci√≥ una coincidencia divertida que comenc√© a trabajar con 1c en esos momentos: luego aparecieron los formularios administrados.  En el caso de 1c, la popularizaci√≥n de la nueva tecnolog√≠a tom√≥ casi cinco a√±os.  Cada vez que se instru√≠a a un desarrollador para que implementara alguna funcionalidad nueva, se enfrentaba a una elecci√≥n: hacerlo de manera r√°pida y confiable, con herramientas conocidas, o pasar mucho tiempo buscando nuevas y sin garant√≠as de resultados.  La elecci√≥n generalmente se hizo a favor de la velocidad y la calidad en este momento, y la inversi√≥n de tiempo en nuevas herramientas se retras√≥ por mucho tiempo. <br><br>  Ahora, aparentemente, la situaci√≥n con SwiftUI es casi la misma.  Todos est√°n interesados, todos entienden que este es el futuro, pero hasta ahora pocos se han tomado el tiempo para estudiarlo.  A menos que sea para proyectos de mascotas. <br><br>  En general, no me importaba qu√© marco estudiar, y decid√≠ arriesgarme a pesar de la opini√≥n general de que ser√≠a posible lanzarlo en producci√≥n en uno o dos a√±os.  Y dado que result√≥ ser uno de los pioneros, decid√≠ compartir mi experiencia pr√°ctica.  Quiero decir que no soy un gur√∫, y en general en el desarrollo m√≥vil, un hervidor de agua.  Sin embargo, ya he recorrido un cierto camino, durante el cual busqu√© en Internet en busca de informaci√≥n, y puedo decir con seguridad que no es suficiente y que pr√°cticamente no est√° sistematizado.  Pero en ruso, por supuesto, es pr√°cticamente inexistente.  Si es as√≠, decid√≠ reunir fuerzas, alejar el complejo de <a href="https://habr.com/ru/post/370877">impostores</a> y compartir con la comunidad lo que logr√© resolver por m√≠ mismo.  Proceder√© de la suposici√≥n de que el lector ya est√° al menos m√≠nimamente familiarizado con SwiftUI, y no descifrar√© cosas como <code>VStack{‚Ä¶}</code> , <code>Text(‚Ä¶)</code> , etc. <br><br>  Una vez m√°s, enfatizo que describir√© mejor mis propias impresiones de los intentos de lograr el resultado deseado de SwiftUI.  Bien podr√≠a no entender algo, y de algunos experimentos para sacar conclusiones err√≥neas o inexactas, por lo que cualquier correcci√≥n y aclaraci√≥n son bienvenidas. <br><br>  Para los desarrolladores experimentados, este art√≠culo puede parecer lleno de descripciones de cosas obvias, pero no juzgue estrictamente.  Todav√≠a no se han escrito tutoriales para dummies en SwiftUI. <br><br><h2>  ¬øQu√© demonios es este SwiftUI? </h2><br>  Entonces, probablemente comenzar√≠a con lo que se trata, esta es su SwiftUI.  Aqu√≠ nuevamente, surge mi primer pasado.  La analog√≠a con los formularios administrados solo se fortaleci√≥ cuando vi algunos videos tutoriales sobre c√≥mo dise√±ar interfaces en Storyboard (es decir, cuando trabajaba con UIKit).  Tom√© nostalgia de acuerdo con formas "incontrolables" en 1s: colocaci√≥n manual de elementos en el formulario, y especialmente enlaces ... Oh, cuando el autor del video de capacitaci√≥n durante unos 20 minutos habl√≥ sobre las complejidades de la uni√≥n de varios elementos entre s√≠ y los bordes de la pantalla, record√© con una sonrisa 1C - todo era igual antes de las formas controladas.  Bueno, casi ... un poco peor, por supuesto, bueno, y en consecuencia, m√°s f√°cil.  Y SwiftUI es, m√°s o menos, formularios gestionados de Apple.  Sin ataduras.  No hay guiones gr√°ficos y segways.  Simplemente describe la estructura de su Vista en c√≥digo.  Y eso es todo.  Todos los par√°metros, tama√±os, etc. se configuran directamente en el c√≥digo, pero de manera bastante simple.  M√°s precisamente, puede editar los par√°metros de los objetos existentes en Canvas, pero para esto, primero debe agregarlos en el c√≥digo.  Honestamente, no s√© c√≥mo funcionar√° esto en grandes equipos de desarrollo, donde se acostumbra separar el dise√±o del dise√±o y el contenido de la Vista en s√≠, pero como desarrollador independiente realmente me gusta este enfoque. <br><br><h3>  Estilo declarativo </h3><br>  SwiftUI asume que la descripci√≥n de la estructura de su Vista est√° completamente en c√≥digo.  Adem√°s, Apple nos ofrece un estilo declarativo de escribir este c√≥digo.  Es decir, algo como esto: <br><blockquote>  ‚ÄúEsta es una vista.  <s>(Por alguna raz√≥n, quiero decir "ver" y, en consecuencia, aplicar declinaci√≥n a una palabra femenina)</s> consta de dos campos de texto y una imagen.  Los campos de texto est√°n dispuestos uno tras otro horizontalmente.  La imagen est√° debajo de ellos y sus bordes se recortan en forma de c√≠rculo ". </blockquote>  Suena inusual, ¬øverdad?  Por lo general, en el c√≥digo describimos el proceso en s√≠, lo que hay que hacer para lograr el resultado que tenemos en nuestra cabeza: <br><blockquote>  "Inserte un bloque, inserte un campo de texto en este bloque, seguido de otro campo de texto, y despu√©s de eso, tome una foto, recorte sus bordes redonde√°ndolos y p√©guelos debajo". </blockquote>  Suena como una instrucci√≥n para muebles de Ikea.  Y en swiftUI, vemos de inmediato cu√°l deber√≠a ser el resultado.  Incluso sin Canvas o depuraci√≥n, la estructura del c√≥digo refleja claramente la estructura de la Vista.  Est√° claro qu√© y en qu√© secuencia se mostrar√° y con qu√© efectos. <br><br>  Un excelente art√≠culo sobre FunctionBuilder y c√≥mo le permite escribir c√≥digo en un estilo declarativo ya est√° en <a href="https://habr.com/ru/company/tinkoff/blog/455760/">Habr√©</a> . <br><br>  En principio, se ha escrito mucho sobre el estilo declarativo y sus ventajas, as√≠ que lo redondear√©.  Agregar√© de m√≠ mismo que me acostumbr√© un poco y realmente sent√≠ lo conveniente que es escribir c√≥digo en este estilo cuando se trata de interfaces.  ¬°Con esto, Apple golpe√≥ lo que se llama la diana! <br><br><h2>  ¬øEn qu√© consiste Ver? </h2><br>  Pero echemos un vistazo m√°s de cerca.  Apple sugiere que el estilo declarativo es as√≠: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text1 = <span class="hljs-string"><span class="hljs-string">"some text"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text2 = <span class="hljs-string"><span class="hljs-string">"some more text"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span>{ <span class="hljs-type"><span class="hljs-type">Text</span></span>(text1) .padding() .frame(width: <span class="hljs-number"><span class="hljs-number">100</span></span>, height: <span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(text2) .background(<span class="hljs-type"><span class="hljs-type">Color</span></span>.gray) .border(<span class="hljs-type"><span class="hljs-type">Color</span></span>.green) } } }</code> </pre> <br>  Tenga en cuenta que <code>View</code> es una estructura con algunos par√°metros.  Para hacer la <code>View</code> Estructura, necesitamos establecer el <code>body</code> par√°metro calculado, que devuelve <code>some View</code> .  Hablaremos de esto m√°s tarde.  El contenido del <code>body: some View { ‚Ä¶ }</code> cierre de <code>body: some View { ‚Ä¶ }</code> es la descripci√≥n de lo que se mostrar√° en la pantalla.  En realidad, esto es todo lo que se requiere para que nuestra estructura satisfaga los requisitos del protocolo View.  Sugiero centrarse principalmente en el <code>body</code> . <br><br><h3>  Y as√≠, estantes </h3><br>  En total, cont√© tres tipos de elementos a partir de los cuales se construye el cuerpo de la Vista: <br><br><ul><li>  <b>Otra vista</b> <br>  Es decir  Cada vista contiene una o m√°s <code>View</code> .  Esos, a su vez, tambi√©n pueden contener <code>View</code> predefinidas del sistema como <code>Text()</code> y personalizadas y complejas escritas por el desarrollador.  Resulta una especie de mu√±eca de anidaci√≥n con un nivel ilimitado de anidaci√≥n. </li><li>  <b>Modificadores</b> <br>  Con la ayuda de modificadores, ocurre toda la magia.  Gracias a ellos, le decimos breve y claramente a SwiftUI qu√© tipo de vista queremos ver.  C√≥mo funciona, a√∫n lo resolveremos, pero lo principal es que los modificadores agregan la pieza requerida al contenido de una <code>View</code> determinada. </li><li>  <b>Contenedores</b> <br>  Los primeros contenedores con los que comienza el est√°ndar "Hola, mundo" son <code>HStack</code> y <code>VStack</code> .  Un poco m√°s tarde, aparece <code>Group</code> , <code>Section</code> y otros.  De hecho, los contenedores son la misma Vista, pero tienen una funci√≥n.  Les pasa alg√∫n contenido que desea mostrar.  La caracter√≠stica completa del contenedor es que de alguna manera debe agrupar y mostrar los elementos de este contenido.  En este sentido, los contenedores son similares a los modificadores, con la √∫nica diferencia de que los modificadores est√°n destinados a cambiar una Vista ya preparada, y los contenedores organizan esta Vista (elementos de contenido o bloques de sintaxis declarativa) en un cierto orden, por ejemplo, vertical u horizontalmente ( <code>VStack{...}</code> <code>HStack{...}</code> ).  Tambi√©n hay contenedores espec√≠ficos, como <code>ForEach</code> o <code>GeometryReader</code> , hablaremos de ellos un poco m√°s tarde. <br><br>  En general, considero los contenedores como cualquier Vista, a la que se puede pasar el Contenido como par√°metro. </li></ul><br>  Y eso es todo.  Todos los elementos de pura raza SwiftUI pueden atribuirse a uno de estos tipos.  S√≠, esto no es suficiente para llenar su Vista con funcionalidad, pero esto es todo lo que necesita para mostrar su funcionalidad en la pantalla. <br><br><h3>  .modifiers (): ¬øc√≥mo se organizan? </h3><br>  Comencemos con lo m√°s simple.  Un modificador es en realidad una cosa muy simple.  Simplemente toma algo de <code>View</code> , le aplica algunos cambios <s>(¬øo s√≠?)</s> Y lo devuelve.  Es decir  El modificador es una funci√≥n de la <code>View</code> s√≠, que se devuelve a <code>self</code> , habiendo realizado previamente algunas modificaciones. <br><br>  A continuaci√≥n se muestra un ejemplo de c√≥digo con el que declaro mi propio modificador.  M√°s precisamente, sobrecargo el <code>frame(width:height:)</code> modificador existente <code>frame(width:height:)</code> , con el que puede corregir las dimensiones espec√≠ficas de una Vista en particular.  Desde el cuadro correspondiente, debe especificar el ancho y el alto, y necesitaba pasarle un objeto <code>CGSize</code> con un argumento, que es una descripci√≥n de solo el largo y el ancho.  ¬øPor qu√© necesitaba esto? Lo dir√© un poco m√°s tarde. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FrameFromSize</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewModifier</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> size: <span class="hljs-type"><span class="hljs-type">CGSize</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">body</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(content: Content)</span></span></span></span> -&gt; some <span class="hljs-type"><span class="hljs-type">View</span></span> { content .frame(width: size.width, height: size.height) } }</code> </pre> <br>  Con este c√≥digo, hemos creado una estructura que cumple con el protocolo <code>ViewModifier</code> .  Este protocolo requiere que la funci√≥n <code>body()</code> se implemente en esta estructura, cuya entrada ser√° <code>Content</code> , y la salida tendr√° <code>some View</code> : el mismo tipo que el par√°metro <code>body</code> de nuestra <code>View</code> (hablaremos sobre alguna Vista a continuaci√≥n) .  ¬øQu√© tipo de <code>Content</code> este? <br><br><h4>  Contenido + ViewBuilder = Ver </h4><br>  En la documentaci√≥n incorporada sobre √©l lo dice: <br><blockquote>  `content` es un proxy para la vista que tendr√° aplicado el modificador representado por` Self`. </blockquote>  Este es un tipo de proxy, que es un prefabricado de Vista al que se pueden aplicar modificadores.  Un tipo de producto semiacabado.  En realidad, el <code>Content</code> es un cierre de estilo declarativo que describe la estructura de la <code>View</code> .  Por lo tanto, si llamamos a este modificador para alguna Vista, entonces todo lo que hace es obtener el cierre del <code>body</code> y pasarlo a la funci√≥n de nuestro <code>body</code> , en el que agregamos nuestros cinco centavos a este cierre. <br><br>  Una vez m√°s, <code>View</code> es principalmente una estructura que almacena todos los par√°metros necesarios para generar una imagen en la pantalla.  Incluidas las instrucciones de montaje, de las cuales <code>Content</code> .  Por lo tanto, un cierre en un estilo declarativo ( <code>Content</code> ) procesado usando <code>ViewBuilder</code> nos devuelve una Vista. <br><br>  Volvamos a nuestro modificador.  En principio, la declaraci√≥n de la estructura <code>FrameFromSize</code> ya <code>FrameFromSize</code> suficiente para comenzar a aplicarla.  Dentro del <code>body</code> podemos escribir as√≠: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">RoundedRectangle</span></span>(cornerRadius: <span class="hljs-number"><span class="hljs-number">4</span></span>).modifier(<span class="hljs-type"><span class="hljs-type">FrameFromSize</span></span>(size: size))</code> </pre><br>  <code>modifier</code> es un m√©todo de protocolo de vista que extrae el contenido de la <code>View</code> modificando, lo pasa a la funci√≥n del cuerpo de la estructura del modificador y pasa el resultado al procesamiento de <code>ViewBuilder</code> o al siguiente modificador, si tenemos una cadena de modificaciones. <br><br>  Pero puede hacerlo a√∫n m√°s conciso declarando su propio modificador como una funci√≥n, ampliando as√≠ las capacidades del protocolo View. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size: CGSize)</span></span></span></span> -&gt; some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.modifier(<span class="hljs-type"><span class="hljs-type">FrameFromSize</span></span>(size: size)) } }</code> </pre> <br>  En este caso, sobrecargu√© el modificador existente <code>.frame(width: height:)</code> otra variante de los par√°metros de <code>.frame(width: height:)</code> .  Ahora, podemos usar la opci√≥n de llamar al modificador <code>frame(size:)</code> para cualquier <code>View</code> .  Al final result√≥ que, nada complicado. <br><br><div class="spoiler">  <b class="spoiler_title">Un poco sobre errores</b> <div class="spoiler_text">  Por cierto, pens√© que no era necesario expandir todo el protocolo, ser√≠a suficiente expandir espec√≠ficamente el <code>RoundedRectangle</code> en mi caso, y deber√≠a haber funcionado, como me pareci√≥ a m√≠, pero parece que Xcode no esperaba tal descaro, y cay√≥ con un error ininteligible " <code>Abort trap: 6</code> "y una propuesta para enviar un volcado a los desarrolladores.  En t√©rminos generales, en SwiftUI, las descripciones de errores hasta ahora muy a menudo no revelan completamente la causa de este error. <br></div></div><br>  De la misma manera, puede crear modificadores personalizados y usarlos de la misma manera que la SwiftUI incorporada: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">RoundedRectangle</span></span>(cornerRadius: <span class="hljs-number"><span class="hljs-number">4</span></span>).frame(size)</code> </pre><br>  Convenientemente, concisamente, claramente. <br><br>  Me imagino una cadena de modificaciones como cuentas ensartadas en un hilo: nuestra vista.  Esta analog√≠a tambi√©n es cierta en el sentido de que el orden en que se llaman las modificaciones importa. <br><br><img src="https://habrastorage.org/webt/tw/1p/ak/tw1paklgxp9d5acpcmwvjywxjce.png"><br><br><div class="spoiler">  <b class="spoiler_title">Casi todo en SwiftUI es Ver</b> <div class="spoiler_text">  Por cierto, una observaci√≥n interesante.  Como par√°metro de entrada, el fondo no acepta color, sino Ver.  Es decir  La clase Color no es solo una descripci√≥n del color, es una Vista completa, a la que se pueden aplicar modificadores y m√°s.  Y como fondo, en consecuencia, puede pasar otra Vista. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Modificadores: solo para modificaciones</b> <div class="spoiler_text">  Quiz√°s valga la pena se√±alar un punto m√°s.  SwiftUI simplemente ignora los modificadores que no cambian el contenido de origen y no se los llama.  Es decir  No podr√° realizar un desencadenador basado en el modificador que causa algunos eventos, pero no realiza ninguna acci√≥n con el contenido.  Apple nos est√° presionando constantemente para que abandonemos algunas acciones en tiempo de ejecuci√≥n al renderizar la interfaz y conf√≠e en el estilo declarativo. <br></div></div><br><h2>  Vista fija </h2><br>  Anteriormente hablamos sobre en qu√© consiste el <code>body</code> , el cuerpo de la <code>View</code> o sus instrucciones de montaje.  Volvamos a la <code>View</code> s√≠.  En primer lugar, es una estructura en la que se pueden declarar algunos par√°metros, y <code>body</code> es solo uno de ellos.  Como ya dijimos, descubrir qu√© <code>Content</code> , el <code>body</code> es una instrucci√≥n sobre c√≥mo ensamblar la Vista deseada, que es un cierre en un estilo declarativo.  Pero, ¬øqu√© deber√≠a devolver nuestro cierre? <br><br><h3>  alguna vista - conveniencia </h3><br><img align="right" src="https://habrastorage.org/webt/j9/zh/zz/j9zhzza2ma_4if9rhtzqjkqvdhi.jpeg"><br><br>  Y sin problemas llegamos a una pregunta que durante mucho tiempo no pude resolver, aunque esto no me impidi√≥ escribir c√≥digo de trabajo.  ¬øQu√© es esto <code>some View</code> ?  La documentaci√≥n dice que esta descripci√≥n es un "tipo de resultado opaco", pero eso no tiene mucho sentido. <br><br>  La palabra clave <code>some</code> es una versi√≥n "gen√©rica" ‚Äã‚Äãde una descripci√≥n de un tipo devuelto por un cierre que no depende de otra cosa que no sea el c√≥digo en s√≠.  Es decir  El resultado de acceder a la propiedad calculada del cuerpo de nuestra Vista debe ser alguna estructura que satisfaga el protocolo de Vista.  Puede haber muchos de ellos: texto, imagen o tal vez alguna estructura que haya declarado.  El chip completo de alguna palabra clave es declarar "gen√©rico" que se ajusta al protocolo de visualizaci√≥n.  Est√° est√°ticamente determinado por el c√≥digo implementado dentro del cuerpo de su Vista, y Xcode es capaz de analizar este c√≥digo y calcular la firma espec√≠fica del valor de retorno <s>(bueno, casi siempre)</s> .  Y algunos son solo un intento de no cargar al desarrollador con <a href="https://habr.com/ru/post/482834/">ceremonias</a> innecesarias.  Es suficiente que el desarrollador diga: "habr√° alg√∫n tipo de Vista", y cu√°l, resu√©lvelo t√∫ mismo.  La clave aqu√≠ es que el tipo concreto no est√° determinado por los par√°metros de entrada, como con el tipo gen√©rico habitual, sino directamente por el c√≥digo.  Por lo tanto, arriba, gen√©rico, cit√©. <br><br>  Xcode deber√≠a poder identificar un tipo espec√≠fico sin saber exactamente qu√© valores pasa a esta estructura.  Es importante comprender esto: despu√©s de la compilaci√≥n, la expresi√≥n Some View se reemplaza con el tipo espec√≠fico de su <code>View</code> .  Este tipo es bastante determinista y puede ser bastante complejo, por ejemplo, as√≠: <code>Group&lt;TupleView&lt;(Text, ForEach&lt;[SomeClass], SomeClass.ID, Text&gt;)&gt;&gt;</code> . <br><br>  El c√≥digo de muestra se puede restaurar a partir de este tipo: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">Group</span></span>{ <span class="hljs-type"><span class="hljs-type">Text</span></span>(‚Ä¶) <span class="hljs-type"><span class="hljs-type">ForEach</span></span>(‚Ä¶){(value: <span class="hljs-type"><span class="hljs-type">SomeClass</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type"><span class="hljs-type">Text</span></span>(‚Ä¶) } }</code> </pre> <br>  <code>ForEach</code> , como se puede ver en la firma de tipo, no es un ciclo de tiempo de ejecuci√≥n.  Esta es solo una <code>View</code> que se basa en una matriz de objetos <code>SomeClass</code> .  como el identificador de un <code>subView</code> particular asociado con el elemento de colecci√≥n, se indica el ID del elemento y para cada elemento se <code>subView</code> un <code>subView</code> tipo <code>Text</code> .  <code>Text</code> y <code>ForEach</code> combinan en <code>TupleView</code> , y todo esto se coloca en <code>Group</code> .  Hablaremos m√°s sobre <code>ForEach</code> m√°s detalle. <br><br>  ¬øImagina cu√°nto escribir√≠a si nos vi√©ramos obligados a describir una firma exacta como el <code>body</code> par√°metro?  Para evitar esto, se cre√≥ <code>some</code> palabra clave. <br><br><div class="spoiler">  <b class="spoiler_title">Resumen</b> <div class="spoiler_text">  <code>some</code> , esto es "gen√©rico - viceversa".  Obtenemos el gen√©rico cl√°sico desde fuera de la funci√≥n, y ya conociendo el tipo espec√≠fico del tipo gen√©rico, Xcode define c√≥mo funciona nuestra funci√≥n.  <code>some-</code> no depende de los par√°metros de entrada, sino solo del c√≥digo en s√≠.  Esto es simplemente una abreviatura, que permite no definir un tipo espec√≠fico, sino indicar solo la familia del valor devuelto por la funci√≥n (protocolo). <br></div></div><br><h3>  alguna vista - y consecuencias </h3><br>  El enfoque para calcular el tipo est√°tico de una expresi√≥n dentro del cuerpo da lugar, en mi opini√≥n, a dos puntos importantes: <br><br><ul><li>  Cuando se compila, Xcode analiza el contenido del cuerpo para calcular el tipo de retorno espec√≠fico.  En cuerpos complejos, esto puede llevar algo de tiempo.  En algunos cuerpos particularmente complejos, es posible que no pueda hacer frente a un tiempo sano en absoluto, y lo dir√° directamente. <br><img src="https://habrastorage.org/webt/-b/cf/nv/-bcfnvtylozajmnzcgjcto_8ms0.png"><br>  En general, View debe mantenerse lo m√°s simple posible.  Las estructuras complejas se colocan mejor en Vista separada.  Por lo tanto, cadenas enteras de tipos reales se reemplazan por un tipo: su CustomView, que permite que el compilador no se vuelva loco con todo este desastre. <br>  Por cierto, es realmente muy conveniente depurar una peque√±a parte de una Vista grande, aqu√≠ mismo, sobre la marcha, recibiendo y observando el resultado en Canvas. </li><li>  No podemos controlar directamente el flujo.  Si, si no, SwiftUI a√∫n puede procesarlo creando una "Vista de Schr√∂dinger" de tipo &lt;_ConditionalContent &lt;Text, TextField &gt;&gt;, entonces el operador de condici√≥n trinar solo se puede usar para seleccionar un valor de par√°metro espec√≠fico, pero no un tipo, o incluso para seleccionar una secuencia de modificadores. <br><img src="https://habrastorage.org/webt/cp/18/7s/cp187s4fsvn9v3kvwobduyk5rie.png"><br>  Pero vale la pena restaurar el mismo orden de modificadores, y ese registro deja de ser un problema. </li></ul><br><h2>  Excepto cuerpo </h2><br>  Sin embargo, puede haber otros par√°metros en la estructura con los que puede trabajar.  Como par√°metros podemos declarar las siguientes cosas. <br><br><h3>  Par√°metros externos </h3><br>  Estos son par√°metros de estructura simples que debemos pasar desde el exterior durante la inicializaci√≥n para que la Vista los represente de alguna manera: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TextView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> textValue: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(textValue) } }</code> </pre> <br>  En este ejemplo, el <code>textValue</code> para la estructura <code>TextView</code> es un par√°metro que debe rellenarse externamente porque no tiene un valor predeterminado.  Dado que las estructuras admiten la generaci√≥n autom√°tica de inicializadores, podemos usar esta Vista simplemente: <br><br><pre> <code class="swift hljs"> <span class="hljs-type"><span class="hljs-type">TextView</span></span>(textValue: <span class="hljs-string"><span class="hljs-string">"some text"</span></span>)</code> </pre><br>  Desde el exterior, tambi√©n puede transferir los cierres que deben realizarse cuando se produce un evento.  Por ejemplo, <code>Button(lable:action:)</code> hace exactamente eso: realiza el cierre de la acci√≥n aprobada cuando se hace clic en un bot√≥n. <br><br><h3>  estado - par√°metros </h3><br>  SwiftUI est√° utilizando de manera muy activa la nueva funci√≥n Swift 5.1: <a href="https://habr.com/ru/company/funcorp/blog/485008/">Property Wrapper</a> . <br><br>  En primer lugar, estas son variables de estado: par√°metros almacenados de nuestra estructura, cuyo cambio debe reflejarse en la pantalla.      <code>@State</code> ‚Äî   ,  <code>@ObservedObject</code> ‚Äî  .     <code>ObservableObject</code> ‚Äî  ,        (View,       <code>@ObservedObject</code> )    .        <code>@Published</code> . <br><br>      ,     ,      <code>ObservableObjectPublisher</code>    ,   <code>willSet()</code>  ,  , , <a href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-send-state-updates-manually-using-objectwillchange" rel="nofollow"></a> . <br><br> ,  ,  <code>body</code> ‚Äî    ? -       State-,    - State-  <code>body</code>   .    ,  <code>body</code> ‚Äî ,    , stateless . View    ,   ,   body   .      .   State-   <code>View</code> .   ,        ,    ,      . ,   <code>body</code> ‚Äî   .       ,   ,   ,    . <br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y un comentario mas</font></font></b> <div class="spoiler_text">     <code>didSet</code> <code>willSet</code>   ,   - .      ,     .  ,   ‚Äî    -  ,     . <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo de </font></font><a href="https://habr.com/ru/users/state/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cl√°sico </font><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tapCount = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">Button</span></span>(action: {<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.tapCount += <span class="hljs-number"><span class="hljs-number">1</span></span>}, label: { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Tap count \(tapCount)"</span></span>) }) } } }</code> </pre> <br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Par√°metros de enlace </font></font></h3><br> ,   -   View  <code>@State</code> <code>@ObservedObject</code> .       <code>View</code> ?    SwiftUI    PropertyWrapper ‚Äî <code>@Binding</code> .         .      <code>View</code> ,  ,   ,  ,   <code>View</code>  .       <code>@State</code> ‚Äî   ,   ,     .    ,      <code>@Binding</code> .    Property Wrapper,       ,     ,      <code>View</code> .    <code>inout</code>   <code>View</code> .      ,    ,   View,    .    <code>inout</code> ,        <code>$,</code>  ,         . React  . <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tapCount = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span>{ <span class="hljs-type"><span class="hljs-type">SomeView</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">count</span></span>: $tapCount) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"you tap \(tapCount) times"</span></span>) } } }</code> </pre><br>        . <code>@Binding var tapCount: Int</code> , ,     <code>Int</code> ,  <br><br><pre> <code class="plaintext hljs">Binding&lt;Int&gt;</code> </pre> <br>   , ,       <code>View</code> . <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span></span>{ @<span class="hljs-type"><span class="hljs-type">Binding</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tapCount: <span class="hljs-type"><span class="hljs-type">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">count</span></span>: <span class="hljs-type"><span class="hljs-type">Binding</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;){ <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._tapCount = <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> <span class="hljs-comment"><span class="hljs-comment">//    -    } var body: some View{ Button(action: {self.tapCount += 1}, label: { Text("Tap me") }) } }</span></span></code> </pre> <br>  ,  <code>init</code>    ,   - <code>@PropertyWrapper</code>     <code>self._</code> ‚Äî    ,  <code>self</code>    . ,   <code>self._</code>        .         . <br><br>   ,      ,   - <code>PropertyWrapper</code> ,  -,    <br><br><pre> <code class="plaintext hljs">Binding&lt;Int&gt;</code> </pre> <br>      <code>Int</code>   <code>.wrappedValue</code> . <br><br><div class="spoiler"> <b class="spoiler_title">  ,  </b> <div class="spoiler_text"> ,  Binding     .   View          View.      View      ,    @Binding-.  ,   View     <a href="https://habr.com/ru/users/state/" class="user_link">State</a>  @Binding ‚Äî ,     State-   Binding.       -,  ,    . <br></div></div><br><h3> EnvironmentObject </h3><br>  ,  <code>EnvironmentObject</code>  ‚Äî   <code>Binding</code> ,     <code>View</code>  ,       . <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">ContentView</span></span>().environmentObject(session)</code> </pre> <br> ,    ,  -  ,     View. ,   ,   - ,     EnvironmentObject  ,   View.   View,   ,     ,     @EnvironmentObject   <br><br><pre> <code class="swift hljs"> @<span class="hljs-type"><span class="hljs-type">EnvironmentObject</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> session: <span class="hljs-type"><span class="hljs-type">Session</span></span></code> </pre> <br>      .     <code>EnvironmentObject</code>       ,    .    3-, , ,       ,      .  <code>EnvironmentObject</code>      ,             <code>View</code> .    ,  <code>Binding</code> . <br><br> @Environment ‚Äî    .   ‚Äî   , .. .     , ,   (  ),     ,  ..  ,           CoreData: <br><br><pre> <code class="swift hljs">@<span class="hljs-type"><span class="hljs-type">Environment</span></span>(\.managedObjectContext) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> moc: <span class="hljs-type"><span class="hljs-type">NSManagedObjectContext</span></span></code> </pre><br> ,    CoreData  SwiftUI     .   , ,    .      . <br><br><h2> Custom @PropertyWrapper </h2><br>   , <code>PropertyWrapper</code> ‚Äî    setter-  getter-,    ,       <code>property wrapper</code> .       ,      getter{} setter{} ,      ,   <code>View</code> ,  . ,   <code>PropertyWrapper</code>      <code>UserDefaults</code> . <br><br><pre> <code class="swift hljs">@propertyWrapper <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserDefault</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> initialValue: <span class="hljs-type"><span class="hljs-type">T</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wrappedValue: <span class="hljs-type"><span class="hljs-type">T</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-type"><span class="hljs-type">UserDefaults</span></span>.standard.<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>(newValue, forKey: key) } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-type"><span class="hljs-type">UserDefaults</span></span>.standard.object(forKey: key) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">T</span></span> ?? initialValue } } }</code> </pre> <br>  ,         <code>UserDefaults</code> . Apple         ,  , ,             ,             . <br><br>  ,   - (   ),          ,   <code>UserDefaults</code> ,     : <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserPreferences</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">UserDefault</span></span>(key: <span class="hljs-string"><span class="hljs-string">"isCheatModeEnabled"</span></span>, initialValue: <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isCheatModeEnabled: <span class="hljs-type"><span class="hljs-type">Bool</span></span> @<span class="hljs-type"><span class="hljs-type">UserDefault</span></span>(key: <span class="hljs-string"><span class="hljs-string">"highestScore"</span></span>, initialValue: <span class="hljs-number"><span class="hljs-number">10000</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> highestScore: <span class="hljs-type"><span class="hljs-type">Int</span></span> @<span class="hljs-type"><span class="hljs-type">UserDefault</span></span>(key: <span class="hljs-string"><span class="hljs-string">"nickname"</span></span>, initialValue: <span class="hljs-string"><span class="hljs-string">"cloudstrife97"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nickname: <span class="hljs-type"><span class="hljs-type">String</span></span> }</code> </pre><br>     ,   ,   ,      . <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">UserPreferences</span></span>.isCheatModeEnabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-type"><span class="hljs-type">UserPreferences</span></span>.highestScore = <span class="hljs-number"><span class="hljs-number">25000</span></span> <span class="hljs-type"><span class="hljs-type">UserPreferences</span></span>.nickname = <span class="hljs-string"><span class="hljs-string">"squallleonhart‚Äù</span></span></code> </pre><br>    <a href="https://medium.com/swlh/understanding-property-wrappers-in-swift-by-examples-604206022b5c" rel="nofollow"></a> . <br><br><h2>  </h2><br>   ,      ,  .     ,    <code>body</code> . , ,   <code>View</code> .    ,           . ,   ‚Äî          .  ,      <code>@ViewBuilder</code> ,    View,     View,    ( ).  ,        ‚Äî . <code>VStack</code>    , <code>HStack</code> ,    .   ,         View,   <code>Content</code> ,   ,    <code>View</code> . ,   <code>View</code>   . ,  <code>HStack{Text(‚Ä¶)}</code>    <code>TupleView&lt;Text, Image&gt;</code> . <br><br> ,   ,   <code>View</code> ,      ‚Äî  ,       ,  body. ,     ,      <code>Text(¬´a¬ª)</code> <code>Text(¬´b¬ª)</code>  <code>HStack</code> .    <code>offset()</code>  <code>position()</code> ,       ,         <code>HStack</code> : <br><blockquote> HStack(spacing:, alingment:, context:). <br></blockquote> ,      ,     .   ‚Äî    . <br><br><h4> ForEach </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por separado, vale la pena hablar de ello </font></font><code>ForEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Este es un contenedor que sirve para reflejar en la pantalla todos los elementos de la colecci√≥n transferida. En primer lugar, debe comprender que esto no es lo mismo que solicitar una colecci√≥n </font></font><code>forEach(‚Ä¶)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Como dijimos anteriormente, </font></font><code>ForEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devuelve uno √∫nico </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, creado sobre la base de los elementos de la colecci√≥n transferida.</font></font> Es decir    ,    ,   ‚Äî      . <br>  , <code>ForEach</code>     -  ,   ,       ‚Äî   ,  , , ,    ( <code>List</code> ). <br><br> <code>ForEach</code>   :  ( <code>data: RandomAccesCollection</code> ),     ( <code>id: Hashable</code> )   ( <code>content: ()-&gt;Content</code> ).    :    , <code>ForEach</code>  <code>Content</code> ‚Äî .. .      ,  <code>content</code>   , <code>ForEach</code>     ,      . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La colecci√≥n </font></font><code>ForEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no </font><font style="vertical-align: inherit;">es </font><font style="vertical-align: inherit;">adecuada </font><font style="vertical-align: inherit;">para </font><font style="vertical-align: inherit;">ninguno, sino solo </font></font><code>RandomAccesCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Para varias colecciones desordenadas, es suficiente llamar al m√©todo </font></font><code>sorted(by:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con el que puede obtener </font></font><code>RandomAccesCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <code>ForEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Este es un conjunto </font></font><code>subView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generado para cada elemento de la colecci√≥n basado en el contenido transmitido. Es importante tener en cuenta que SwiftUI necesita saber </font></font><code>subView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con cu√°l elemento de la colecci√≥n est√° asociado. Para esto, cada uno </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debe tener un identificador. El segundo par√°metro es necesario precisamente para esto. Si los elementos de la colecci√≥n son </font></font><code>Hashable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tipos, como cadenas, puede escribir simplemente </font></font><code>id: \.self</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Esto significar√° que la cadena en s√≠ ser√° el identificador. Si los elementos de la colecci√≥n son clases y satisfacen el protocolo</font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Entonces se puede perder el segundo argumento. En este caso, la identificaci√≥n de cada elemento de la colecci√≥n se convertir√° en un identificador </font></font><code>subView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si su objeto tiene alg√∫n tipo de accesorios que brindan unicidad y que cumplan con el protocolo </font></font><code>Hashable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, puede especificarlo as√≠:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">ForEach</span></span>(values, id: \.value){item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ‚Ä¶}</code> </pre><br>   , <code>values</code> ‚Äî     <code>SomeObject</code> ,     <code>value: Int</code> .   ,       <code>View</code> ,     . ,        -   . <code>View</code>    1  1    ( ),   ,    <code>@Binding</code>  <code>View</code> . <br><br> ,    ,    Identifiable,     .  : <br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">ForEach</span></span>(keys.<span class="hljs-built_in"><span class="hljs-built_in">indices</span></span>){ind <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type"><span class="hljs-type">SomeView</span></span>(key: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.keys[ind]) }</code> </pre> <br>   ,       ,    .   ,   .       , ,    ,       , , ,    JSON .  ,   . <br><br>  ,   <code>Content</code> ,    <code>ForEach</code> .   ,      ,      (..       ,   2   ‚Äî  ).    ,       <code>Groupe{}</code> ‚Äî     . <br><br>            .  ,    ViewBuilder     . ,         <code>.frame(size:)</code> ?       .               (    ,       ).   CGSize,        .        ,       size,    <code>.ftame(width: size.width, height: size.height)</code> ‚Äî     .    ,       ‚Äî           . <br><br><h3> Custom container View </h3><br>    ,     .  ,     ‚Äú1:N‚Äù       .          <code>dict: [KeyObject: [SomeObject]]</code>  . <br><br>   ,        <code>KeyObject</code> (      <code>Hashable</code> ),     ‚Äî     ‚Äî <code>SomeObject</code> . <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeObject</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Identifiable</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> value: <span class="hljs-type"><span class="hljs-type">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> id: <span class="hljs-type"><span class="hljs-type">UUID</span></span> = <span class="hljs-type"><span class="hljs-type">UUID</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(value: <span class="hljs-type"><span class="hljs-type">Int</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.value = value } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KeyObject</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hashable</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Comparable</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(name: <span class="hljs-type"><span class="hljs-type">String</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.name = name } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> &lt; (lhs: KeyObject, rhs: KeyObject) -&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bool</span></span></span><span class="hljs-function"> </span></span>{ lhs.name &lt; rhs.name } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> == </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(lhs: KeyObject, rhs: KeyObject)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lhs.name == rhs.name } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hash</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(into hasher: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">inout</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Hasher)</span></span></span></span> { hasher.combine(name) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si su aplicaci√≥n planea alg√∫n tipo de an√°lisis con agrupaci√≥n, tiene sentido crear un contenedor separado para mostrar dichos diccionarios para no duplicar todo el c√≥digo en cada vista. Y dado que el usuario puede cambiar las agrupaciones, tendremos que usar gen√©ricos. No lo compliqu√© agregando un dise√±o visual, dejando solo la estructura de nuestro contenedor:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TreeView</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">K</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hashable</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">V</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Identifiable</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KeyContent</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ValueContent</span></span></span><span class="hljs-class">&gt;: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">K</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Comparable</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KeyContent</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ValueContent</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> data: [<span class="hljs-type"><span class="hljs-type">K</span></span>: [<span class="hljs-type"><span class="hljs-type">V</span></span>]] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> keyContent: (<span class="hljs-type"><span class="hljs-type">K</span></span>)-&gt;<span class="hljs-type"><span class="hljs-type">KeyContent</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> valueContent: (<span class="hljs-type"><span class="hljs-type">V</span></span>)-&gt;<span class="hljs-type"><span class="hljs-type">ValueContent</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span>{ <span class="hljs-type"><span class="hljs-type">VStack</span></span>(alignment: .leading, spacing: <span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-type"><span class="hljs-type">ForEach</span></span>(data.keys.sorted(), id: \.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>){(key: <span class="hljs-type"><span class="hljs-type">K</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type"><span class="hljs-type">VStack</span></span>(alignment: .trailing, spacing: <span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.keyContent(key) <span class="hljs-type"><span class="hljs-type">ForEach</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.data[key]!){(value: <span class="hljs-type"><span class="hljs-type">V</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.valueContent(value) } } } } } }</code> </pre><br>  ,     <code>[K: [V]]</code> ( <code>K</code> ‚Äî  - , <code>V</code> ‚Äî  ,     ),   :     ,  ‚Äî   .  ,       <code>ViewBuilder-</code>    (     ),       <code>ForEach</code> .       <code>RandomAccessCollection</code> ,  <code>dict.keys</code>   ,    .      <code>Comparable</code>  <code>KeyObject</code> . <br><br>     <code>ForEach</code> .   ,      ( <code>\.self</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) como el identificador de cada anidado </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Podr√≠a hacer esto porque las claves de diccionario deber√≠an admitir el protocolo de todos modos </font></font><code>Hashable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. En el segundo caso, agregu√© </font></font><code>SomeObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soporte de protocolo </font><font style="vertical-align: inherit;">a la clase</font></font><code>Identifiable</code> .         ‚Äî   id.    id   .     ‚Äî     ,        ‚Äî   id.  ,   .         .. ,           id.           id ‚Äî    .          ‚Äî    id  ,           <code>ForEach</code> . <br><br>    : <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dict: [<span class="hljs-type"><span class="hljs-type">KeyObject</span></span>: [<span class="hljs-type"><span class="hljs-type">SomeObject</span></span>]] = [ <span class="hljs-type"><span class="hljs-type">KeyObject</span></span>(name: <span class="hljs-string"><span class="hljs-string">"1st group"</span></span>) : [<span class="hljs-type"><span class="hljs-type">SomeObject</span></span>(value: <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-type"><span class="hljs-type">SomeObject</span></span>(value: <span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-type"><span class="hljs-type">SomeObject</span></span>(value: <span class="hljs-number"><span class="hljs-number">3</span></span>)], <span class="hljs-type"><span class="hljs-type">KeyObject</span></span>(name: <span class="hljs-string"><span class="hljs-string">"2nd group"</span></span>) : [<span class="hljs-type"><span class="hljs-type">SomeObject</span></span>(value: <span class="hljs-number"><span class="hljs-number">4</span></span>), <span class="hljs-type"><span class="hljs-type">SomeObject</span></span>(value: <span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-type"><span class="hljs-type">SomeObject</span></span>(value: <span class="hljs-number"><span class="hljs-number">6</span></span>)], <span class="hljs-type"><span class="hljs-type">KeyObject</span></span>(name: <span class="hljs-string"><span class="hljs-string">"3rd group"</span></span>) : [<span class="hljs-type"><span class="hljs-type">SomeObject</span></span>(value: <span class="hljs-number"><span class="hljs-number">7</span></span>), <span class="hljs-type"><span class="hljs-type">SomeObject</span></span>(value: <span class="hljs-number"><span class="hljs-number">8</span></span>), <span class="hljs-type"><span class="hljs-type">SomeObject</span></span>(value: <span class="hljs-number"><span class="hljs-number">9</span></span>)] ] <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">TreeView</span></span>(data: dict, keyContent: {keyObject <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"the key is: \(keyObject.name)"</span></span>) } ){valueObject <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"value: \(valueObject.value)"</span></span>) } } }</code> </pre> <br>      Canvas: <br><br><img src="https://habrastorage.org/webt/48/jl/e_/48jle_vonedzfqtotu7uclu2u1e.png"><br><br><h4> to be continued </h4><br>    .       ,    ,   <code>CoreData</code>    SwiftUI, ,  ,  ,    SwiftUI   ,     .  ,  ,  . <br><br>    ,   ‚Äî    .      . </div></div><p>Source: <a href="https://habr.com/ru/post/485548/">https://habr.com/ru/post/485548/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../485536/index.html">¬øEs posible hackear un avi√≥n - 2</a></li>
<li><a href="../485538/index.html">Zabbix: supervisa todo en una fila (en el ejemplo de Redis)</a></li>
<li><a href="../485542/index.html">Agregar gr√°ficos a Notion</a></li>
<li><a href="../485544/index.html">El ajedrez como sistema din√°mico.</a></li>
<li><a href="../485546/index.html">Se acerca el apocalipsis</a></li>
<li><a href="../485550/index.html">¬øHay vida m√°s all√° de la circunvalaci√≥n de Mosc√∫? C√≥mo buscamos y preparamos desarrolladores</a></li>
<li><a href="../485552/index.html">Otra forma de rastrear el tiempo y el n√∫mero de compilaci√≥n para Java</a></li>
<li><a href="../485554/index.html">Objetivos y resultados clave (OKR): nuestra experiencia de implementaci√≥n por fases</a></li>
<li><a href="../485556/index.html">Tom√≥ 12 a√±os crear una secci√≥n del mapa cerebral de Drosophila, los esfuerzos de 250 personas y $ 40 millones</a></li>
<li><a href="../485558/index.html">No hay mosquitos! Descripci√≥n general de los mosquitos "fito-municiones"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>