<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§µüèª üë®üèΩ‚Äçüéì ü¶à ¬øC√≥mo ver r√°pidamente advertencias interesantes generadas por el analizador PVS-Studio para c√≥digo C y C ++? üöë ü§öüèº üëºüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De vez en cuando, los programadores que comienzan a familiarizarse con el analizador de c√≥digo PVS-Studio preguntan: "¬øExiste una lista de advertencia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øC√≥mo ver r√°pidamente advertencias interesantes generadas por el analizador PVS-Studio para c√≥digo C y C ++?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/457332/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df3/c29/8f2/df3c298f21cb71d0c7c699b7e27269d3.png"></div><br>  De vez en cuando, los programadores que comienzan a familiarizarse con el analizador de c√≥digo PVS-Studio preguntan: "¬øExiste una lista de advertencias que indiquen errores con precisi√≥n?"  No existe tal lista por la raz√≥n de que las advertencias poco interesantes (falsas) en un proyecto y en otro resultan ser muy importantes y √∫tiles.  Sin embargo, es muy posible comenzar a conocer al analizador con las advertencias m√°s interesantes.  Echemos un vistazo m√°s de cerca a este tema. <br><a name="habracut"></a><br>  El problema es que durante los primeros lanzamientos, el programador, como regla, recibe una gran cantidad de advertencias en las que se "ahoga".  Naturalmente, tiene el deseo de familiarizarse con las advertencias m√°s interesantes para comprender si deber√≠a pasar todo este tiempo.  Genial, aqu√≠ hay tres pasos simples que le permitir√°n familiarizarse con los aspectos positivos m√°s interesantes. <br><br><h2>  Paso 1 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/648/436/d98/648436d98521380495f1c9f8ee384646.png"></div><br><br>  Deshabilite todos los tipos de alertas excepto general (GA).  Un error com√∫n: habilitar todo tipo de advertencias.  Para usuarios inexpertos, parece que cuanto m√°s lo enciendes, mejor.  ¬°Esto no es as√≠!  Hay conjuntos de diagn√≥sticos, como las comprobaciones de 64 bits y las reglas MISRA, que deben usarse solo con una idea clara de qu√© es y c√≥mo trabajar con ellos.  Por ejemplo, al activar los diagn√≥sticos MISRA para un programa de aplicaci√≥n ordinario, se ahogar√° en decenas, miles o cientos de miles de mensajes como: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2506</a> .  Misra  Una funci√≥n debe tener un √∫nico punto de salida al final. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2507</a> .  Misra  El cuerpo de una instrucci√≥n loop \ condicional debe estar entre llaves. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2523</a> .  Misra  Todas las constantes enteras de tipo sin signo deben tener el sufijo 'u' o 'U'. </li></ul><br>  La mayor√≠a de las advertencias de MISRA no indican errores, pero el c√≥digo huele mal.  Naturalmente, una persona comienza a hacer preguntas.  ¬øC√≥mo encontrar algo interesante en la masa de todas estas advertencias?  ¬øDiagn√≥stico bajo qu√© n√∫meros deber√≠a mirar?  Estas son las preguntas equivocadas.  Solo necesita deshabilitar el kit MISRA.  Este es el est√°ndar para escribir c√≥digo de calidad para dispositivos integrados.  La esencia del est√°ndar: hacer que el c√≥digo sea extremadamente simple y comprensible.  No intente aplicarlo donde sea inapropiado. <br><br>  Nota  S√≠, hay normas en el est√°ndar MISRA destinadas a identificar errores reales.  Ejemplo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2538</a> : el valor de la variable no inicializada no debe utilizarse.  Pero no tenga miedo de deshabilitar el est√°ndar MISRA.  No perder√°s nada.  Todav√≠a se encontrar√°n errores verdaderos en los diagn√≥sticos de prop√≥sito general (GA).  Por ejemplo, se encontrar√° una variable no inicializada gracias al diagn√≥stico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V614</a> . <br><br><h2>  Paso 2 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f30/9c1/d2f/f309c1d2fed7a2736170dad987cd4460.png"></div><br><br>  Cualquier analizador est√°tico genera falsos positivos durante los primeros inicios y requiere una determinada configuraci√≥n.  No se puede hacer nada con esto, pero no es tan aterrador como podr√≠a parecer.  Incluso una configuraci√≥n r√°pida simple le permite eliminar la mayor√≠a de las advertencias falsas y comenzar a familiarizarse con un informe ya bastante adecuado.  No hablaremos de esto con m√°s detalle, ya que escrib√≠ muchas veces, por ejemplo, en este art√≠culo: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Caracter√≠sticas del analizador PVS-Studio que usa el ejemplo EFL Core Libraries, 10-15% de falsos positivos</a> ". <br><br>  Pase un poco de tiempo deshabilitando advertencias expl√≠citamente irrelevantes y luchando contra falsos positivos debido a macros.  Las macros son generalmente la principal fuente de falsos positivos, ya que aparece una advertencia siempre que se utiliza una macro fallida.  Para suprimir las advertencias en las macros, se puede colocar un tipo especial de comentarios al lado de su declaraci√≥n.  El formato para escribir comentarios se discute con m√°s detalle en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> . <br><br>  S√≠, la configuraci√≥n inicial llevar√° un poco de tiempo, pero mejorar√° dr√°sticamente la percepci√≥n del informe al eliminar el ruido que distrae.  T√≥mate un tiempo para esto.  Si hay dificultades o preguntas, siempre estamos listos para ayudar y sugerir la mejor forma de configurar el analizador.  Si√©ntase libre de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escribir</a> y hacernos preguntas. <br><br><h2>  Paso 3 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f87/0ec/c49/f870ecc49989743ae8caea3c745e602e.png"></div><br><br>  Comienza a aprender las advertencias del nivel 1.  Y solo entonces mire 2 y 3. Los niveles de advertencia no son m√°s que la confiabilidad de la advertencia.  Las advertencias de nivel 1 tienen m√°s probabilidades de indicar un error verdadero que las 2. <br><br>  Podemos decir que al elegir "ver nivel 1", presionas el bot√≥n "ver los errores m√°s interesantes". <br><br>  La clasificaci√≥n de las alertas de PVS-Studio por niveles se describe con m√°s detalle en el art√≠culo " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo y por qu√© los analizadores est√°ticos tratan con falsos positivos</a> ". <br><br><h2>  Entonces, ¬øpor qu√© todav√≠a no hay una lista? </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df2/95f/70b/df295f70b19562c12916ec578022829f.png"></div><br><br>  Sin embargo, una idea con una lista de las advertencias m√°s √∫tiles puede parecer razonable.  Perm√≠tanme mostrar con un ejemplo pr√°ctico que la utilidad del diagn√≥stico es relativa y depende del proyecto. <br><br>  Considere la advertencia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V550</a> .  Una advertencia revela un posible error debido al hecho de que el operador == o! = Se utiliza para comparar n√∫meros de punto flotante. <br><br>  La mayor√≠a de los desarrolladores con los que habl√© creen que este diagn√≥stico es de poca utilidad y lo desactivan, ya que todos los aspectos positivos de su proyecto son falsos.  Y es por eso que este diagn√≥stico tiene baja confiabilidad y se ubica en el 3er nivel. <br><br>  De hecho, en la mayor√≠a de las aplicaciones, los tipos flotante / doble se utilizan en algoritmos muy simples.  Y, a menudo, una comparaci√≥n con una constante se usa √∫nicamente para verificar si se establece un valor predeterminado o si ha cambiado.  En este caso, una verificaci√≥n precisa es bastante apropiada.  Explicar√© esto con pseudoc√≥digo. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> value = <span class="hljs-number"><span class="hljs-number">1.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsUserInputNewValue()) value = GetUserValue(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value == <span class="hljs-number"><span class="hljs-number">1.0f</span></span>) DefaultBehavior(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Foo(value);</code> </pre> <br>  Aqu√≠ la comparaci√≥n <i>(valor == 1.0f) es</i> correcta y segura. <br><br>  ¬øSignifica esto que el V550 es un diagn√≥stico poco interesante?  No  Todo depende del proyecto.  Citar√© un fragmento del art√≠culo " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo probamos el an√°lisis est√°tico en nuestro proyecto de un simulador de entrenamiento de cirug√≠a endovascular</a> " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">,</a> escrito por uno de nuestros usuarios. <br><br>  Entonces, lo que el analizador est√°tico llama nuestra atenci√≥n aqu√≠: <br><br>  V550 Una comparaci√≥n precisa extra√±a: t! = 0. Probablemente sea mejor usar una comparaci√≥n con precisi√≥n definida: fabs (A - B)&gt; Epsilon.  objectextractpart.cpp 3401 <br><br><pre> <code class="cpp hljs">D3DXVECTOR3 N = VectorMultiplication( VectorMultiplication(V-VP, VN), VN); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Qsqrt(Scalar(N, N)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t!=<span class="hljs-number"><span class="hljs-number">0</span></span>) { N/=t; V = V - N * DistPointToSurface(V, VP, N); }</code> </pre> <br>  Errores similares se repiten con bastante frecuencia en esta biblioteca.  No dir√© que esto fue una sorpresa para m√≠.  Ya anteriormente encontr√© trabajo incorrecto con n√∫meros de punto flotante en este proyecto.  Sin embargo, no hab√≠a recursos para verificar sistem√°ticamente las fuentes para esto.  De acuerdo con los resultados de la verificaci√≥n, qued√≥ claro que debe darle al desarrollador algo para leer para ampliar sus horizontes en t√©rminos de trabajo con n√∫meros de punto flotante.  Le lanc√© enlaces a un par de buenos art√≠culos.  Veamos el resultado.  Es dif√≠cil decir inequ√≠vocamente si este error causa un mal funcionamiento real en el programa.  La soluci√≥n actual establece una serie de requisitos para la red poligonal inicial de arterias, a lo largo de la cual se simula la propagaci√≥n de una sustancia radioopaca.  Si no se cumplen los requisitos, el programa puede bloquearse o, obviamente, una operaci√≥n incorrecta.  Algunos de estos requisitos se obtienen anal√≠ticamente y otros emp√≠ricamente.  Es posible que esta segunda parte de los requisitos crezca solo del trabajo incorrecto con n√∫meros de punto flotante.  Cabe se√±alar que no todos los casos encontrados de usar la comparaci√≥n exacta de n√∫meros de punto flotante fueron un error. <br><br>  Como puede ver, lo que no es interesante en algunos proyectos es de inter√©s en otros.  Esto hace que sea imposible crear una lista de "m√°s interesantes". <br><br>  Nota  Es posible establecer el nivel de advertencia utilizando la configuraci√≥n.  Por ejemplo, si cree que los diagn√≥sticos del V550 merecen mucha atenci√≥n, puede moverlo del tercer nivel al primero.  Este tipo de configuraci√≥n se describe en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> (consulte "C√≥mo configurar su nivel para diagn√≥sticos espec√≠ficos"). <br><br><h2>  Conclusi√≥n </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37d/d9e/ecd/37dd9eecd44e33d66c2993ad552e11f7.png"></div><br><br>  Ahora ya sabe c√≥mo comenzar a estudiar las advertencias del analizador, considerando las m√°s interesantes.  Y no olvide consultar la documentaci√≥n para familiarizarse con la descripci√≥n detallada de las advertencias.  A veces sucede que detr√°s de una no predisposici√≥n, a primera vista, la advertencia es un infierno.  Un ejemplo de tales diagn√≥sticos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V597</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V1026</a> .  Gracias por su atencion <br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png" align="left"></a> </p><br><br>  Si desea compartir este art√≠culo con una audiencia de habla inglesa, utilice el enlace a la traducci√≥n: Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øC√≥mo verificar r√°pidamente las advertencias interesantes que brinda el analizador PVS-Studio para el c√≥digo C y C ++?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/457332/">https://habr.com/ru/post/457332/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457316/index.html">C√≥mo se organiza el juego de rol en el mundo real para los invitados de Armenia con viajes por la mitad del pa√≠s</a></li>
<li><a href="../457324/index.html">Eventos digitales en Mosc√∫ del 24 al 30 de junio</a></li>
<li><a href="../457326/index.html">Cl√∫ster de conmutaci√≥n por error PostgreSQL + Patroni. Experiencia de implementacion</a></li>
<li><a href="../457328/index.html">Categor√≠as en lugar de directorios, o el sistema de archivos sem√°ntico para Linux</a></li>
<li><a href="../457330/index.html">¬øC√≥mo verificar r√°pidamente las advertencias interesantes que brinda el analizador PVS-Studio para el c√≥digo C y C ++?</a></li>
<li><a href="../457334/index.html">TacacsGUI, Administrador de configuraci√≥n</a></li>
<li><a href="../457336/index.html">Las consecuencias de la extracci√≥n prematura de las muelas del juicio</a></li>
<li><a href="../457338/index.html">Blitz con Ilya Krasinsky: ¬øc√≥mo disparar malas hip√≥tesis, por qu√© descartar un producto y c√≥mo crecer para un m√≠nimo de acci√≥n?</a></li>
<li><a href="../457340/index.html">10 complementos PostCSS que le ahorrar√°n tiempo de dise√±o</a></li>
<li><a href="../457342/index.html">Se√±ales desde arriba: c√≥mo salvamos a los cart√≥grafos del trabajo innecesario y los ojos rojos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>