<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤵🏻 👨🏽‍🎓 🦈 ¿Cómo ver rápidamente advertencias interesantes generadas por el analizador PVS-Studio para código C y C ++? 🚑 🤚🏼 👼🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De vez en cuando, los programadores que comienzan a familiarizarse con el analizador de código PVS-Studio preguntan: "¿Existe una lista de advertencia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¿Cómo ver rápidamente advertencias interesantes generadas por el analizador PVS-Studio para código C y C ++?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/457332/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df3/c29/8f2/df3c298f21cb71d0c7c699b7e27269d3.png"></div><br>  De vez en cuando, los programadores que comienzan a familiarizarse con el analizador de código PVS-Studio preguntan: "¿Existe una lista de advertencias que indiquen errores con precisión?"  No existe tal lista por la razón de que las advertencias poco interesantes (falsas) en un proyecto y en otro resultan ser muy importantes y útiles.  Sin embargo, es muy posible comenzar a conocer al analizador con las advertencias más interesantes.  Echemos un vistazo más de cerca a este tema. <br><a name="habracut"></a><br>  El problema es que durante los primeros lanzamientos, el programador, como regla, recibe una gran cantidad de advertencias en las que se "ahoga".  Naturalmente, tiene el deseo de familiarizarse con las advertencias más interesantes para comprender si debería pasar todo este tiempo.  Genial, aquí hay tres pasos simples que le permitirán familiarizarse con los aspectos positivos más interesantes. <br><br><h2>  Paso 1 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/648/436/d98/648436d98521380495f1c9f8ee384646.png"></div><br><br>  Deshabilite todos los tipos de alertas excepto general (GA).  Un error común: habilitar todo tipo de advertencias.  Para usuarios inexpertos, parece que cuanto más lo enciendes, mejor.  ¡Esto no es así!  Hay conjuntos de diagnósticos, como las comprobaciones de 64 bits y las reglas MISRA, que deben usarse solo con una idea clara de qué es y cómo trabajar con ellos.  Por ejemplo, al activar los diagnósticos MISRA para un programa de aplicación ordinario, se ahogará en decenas, miles o cientos de miles de mensajes como: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2506</a> .  Misra  Una función debe tener un único punto de salida al final. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2507</a> .  Misra  El cuerpo de una instrucción loop \ condicional debe estar entre llaves. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2523</a> .  Misra  Todas las constantes enteras de tipo sin signo deben tener el sufijo 'u' o 'U'. </li></ul><br>  La mayoría de las advertencias de MISRA no indican errores, pero el código huele mal.  Naturalmente, una persona comienza a hacer preguntas.  ¿Cómo encontrar algo interesante en la masa de todas estas advertencias?  ¿Diagnóstico bajo qué números debería mirar?  Estas son las preguntas equivocadas.  Solo necesita deshabilitar el kit MISRA.  Este es el estándar para escribir código de calidad para dispositivos integrados.  La esencia del estándar: hacer que el código sea extremadamente simple y comprensible.  No intente aplicarlo donde sea inapropiado. <br><br>  Nota  Sí, hay normas en el estándar MISRA destinadas a identificar errores reales.  Ejemplo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2538</a> : el valor de la variable no inicializada no debe utilizarse.  Pero no tenga miedo de deshabilitar el estándar MISRA.  No perderás nada.  Todavía se encontrarán errores verdaderos en los diagnósticos de propósito general (GA).  Por ejemplo, se encontrará una variable no inicializada gracias al diagnóstico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V614</a> . <br><br><h2>  Paso 2 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f30/9c1/d2f/f309c1d2fed7a2736170dad987cd4460.png"></div><br><br>  Cualquier analizador estático genera falsos positivos durante los primeros inicios y requiere una determinada configuración.  No se puede hacer nada con esto, pero no es tan aterrador como podría parecer.  Incluso una configuración rápida simple le permite eliminar la mayoría de las advertencias falsas y comenzar a familiarizarse con un informe ya bastante adecuado.  No hablaremos de esto con más detalle, ya que escribí muchas veces, por ejemplo, en este artículo: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Características del analizador PVS-Studio que usa el ejemplo EFL Core Libraries, 10-15% de falsos positivos</a> ". <br><br>  Pase un poco de tiempo deshabilitando advertencias explícitamente irrelevantes y luchando contra falsos positivos debido a macros.  Las macros son generalmente la principal fuente de falsos positivos, ya que aparece una advertencia siempre que se utiliza una macro fallida.  Para suprimir las advertencias en las macros, se puede colocar un tipo especial de comentarios al lado de su declaración.  El formato para escribir comentarios se discute con más detalle en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentación</a> . <br><br>  Sí, la configuración inicial llevará un poco de tiempo, pero mejorará drásticamente la percepción del informe al eliminar el ruido que distrae.  Tómate un tiempo para esto.  Si hay dificultades o preguntas, siempre estamos listos para ayudar y sugerir la mejor forma de configurar el analizador.  Siéntase libre de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escribir</a> y hacernos preguntas. <br><br><h2>  Paso 3 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f87/0ec/c49/f870ecc49989743ae8caea3c745e602e.png"></div><br><br>  Comienza a aprender las advertencias del nivel 1.  Y solo entonces mire 2 y 3. Los niveles de advertencia no son más que la confiabilidad de la advertencia.  Las advertencias de nivel 1 tienen más probabilidades de indicar un error verdadero que las 2. <br><br>  Podemos decir que al elegir "ver nivel 1", presionas el botón "ver los errores más interesantes". <br><br>  La clasificación de las alertas de PVS-Studio por niveles se describe con más detalle en el artículo " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cómo y por qué los analizadores estáticos tratan con falsos positivos</a> ". <br><br><h2>  Entonces, ¿por qué todavía no hay una lista? </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df2/95f/70b/df295f70b19562c12916ec578022829f.png"></div><br><br>  Sin embargo, una idea con una lista de las advertencias más útiles puede parecer razonable.  Permítanme mostrar con un ejemplo práctico que la utilidad del diagnóstico es relativa y depende del proyecto. <br><br>  Considere la advertencia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V550</a> .  Una advertencia revela un posible error debido al hecho de que el operador == o! = Se utiliza para comparar números de punto flotante. <br><br>  La mayoría de los desarrolladores con los que hablé creen que este diagnóstico es de poca utilidad y lo desactivan, ya que todos los aspectos positivos de su proyecto son falsos.  Y es por eso que este diagnóstico tiene baja confiabilidad y se ubica en el 3er nivel. <br><br>  De hecho, en la mayoría de las aplicaciones, los tipos flotante / doble se utilizan en algoritmos muy simples.  Y, a menudo, una comparación con una constante se usa únicamente para verificar si se establece un valor predeterminado o si ha cambiado.  En este caso, una verificación precisa es bastante apropiada.  Explicaré esto con pseudocódigo. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> value = <span class="hljs-number"><span class="hljs-number">1.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsUserInputNewValue()) value = GetUserValue(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value == <span class="hljs-number"><span class="hljs-number">1.0f</span></span>) DefaultBehavior(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Foo(value);</code> </pre> <br>  Aquí la comparación <i>(valor == 1.0f) es</i> correcta y segura. <br><br>  ¿Significa esto que el V550 es un diagnóstico poco interesante?  No  Todo depende del proyecto.  Citaré un fragmento del artículo " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cómo probamos el análisis estático en nuestro proyecto de un simulador de entrenamiento de cirugía endovascular</a> " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">,</a> escrito por uno de nuestros usuarios. <br><br>  Entonces, lo que el analizador estático llama nuestra atención aquí: <br><br>  V550 Una comparación precisa extraña: t! = 0. Probablemente sea mejor usar una comparación con precisión definida: fabs (A - B)&gt; Epsilon.  objectextractpart.cpp 3401 <br><br><pre> <code class="cpp hljs">D3DXVECTOR3 N = VectorMultiplication( VectorMultiplication(V-VP, VN), VN); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Qsqrt(Scalar(N, N)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t!=<span class="hljs-number"><span class="hljs-number">0</span></span>) { N/=t; V = V - N * DistPointToSurface(V, VP, N); }</code> </pre> <br>  Errores similares se repiten con bastante frecuencia en esta biblioteca.  No diré que esto fue una sorpresa para mí.  Ya anteriormente encontré trabajo incorrecto con números de punto flotante en este proyecto.  Sin embargo, no había recursos para verificar sistemáticamente las fuentes para esto.  De acuerdo con los resultados de la verificación, quedó claro que debe darle al desarrollador algo para leer para ampliar sus horizontes en términos de trabajo con números de punto flotante.  Le lancé enlaces a un par de buenos artículos.  Veamos el resultado.  Es difícil decir inequívocamente si este error causa un mal funcionamiento real en el programa.  La solución actual establece una serie de requisitos para la red poligonal inicial de arterias, a lo largo de la cual se simula la propagación de una sustancia radioopaca.  Si no se cumplen los requisitos, el programa puede bloquearse o, obviamente, una operación incorrecta.  Algunos de estos requisitos se obtienen analíticamente y otros empíricamente.  Es posible que esta segunda parte de los requisitos crezca solo del trabajo incorrecto con números de punto flotante.  Cabe señalar que no todos los casos encontrados de usar la comparación exacta de números de punto flotante fueron un error. <br><br>  Como puede ver, lo que no es interesante en algunos proyectos es de interés en otros.  Esto hace que sea imposible crear una lista de "más interesantes". <br><br>  Nota  Es posible establecer el nivel de advertencia utilizando la configuración.  Por ejemplo, si cree que los diagnósticos del V550 merecen mucha atención, puede moverlo del tercer nivel al primero.  Este tipo de configuración se describe en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentación</a> (consulte "Cómo configurar su nivel para diagnósticos específicos"). <br><br><h2>  Conclusión </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37d/d9e/ecd/37dd9eecd44e33d66c2993ad552e11f7.png"></div><br><br>  Ahora ya sabe cómo comenzar a estudiar las advertencias del analizador, considerando las más interesantes.  Y no olvide consultar la documentación para familiarizarse con la descripción detallada de las advertencias.  A veces sucede que detrás de una no predisposición, a primera vista, la advertencia es un infierno.  Un ejemplo de tales diagnósticos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V597</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V1026</a> .  Gracias por su atencion <br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png" align="left"></a> </p><br><br>  Si desea compartir este artículo con una audiencia de habla inglesa, utilice el enlace a la traducción: Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¿Cómo verificar rápidamente las advertencias interesantes que brinda el analizador PVS-Studio para el código C y C ++?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/457332/">https://habr.com/ru/post/457332/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457316/index.html">Cómo se organiza el juego de rol en el mundo real para los invitados de Armenia con viajes por la mitad del país</a></li>
<li><a href="../457324/index.html">Eventos digitales en Moscú del 24 al 30 de junio</a></li>
<li><a href="../457326/index.html">Clúster de conmutación por error PostgreSQL + Patroni. Experiencia de implementacion</a></li>
<li><a href="../457328/index.html">Categorías en lugar de directorios, o el sistema de archivos semántico para Linux</a></li>
<li><a href="../457330/index.html">¿Cómo verificar rápidamente las advertencias interesantes que brinda el analizador PVS-Studio para el código C y C ++?</a></li>
<li><a href="../457334/index.html">TacacsGUI, Administrador de configuración</a></li>
<li><a href="../457336/index.html">Las consecuencias de la extracción prematura de las muelas del juicio</a></li>
<li><a href="../457338/index.html">Blitz con Ilya Krasinsky: ¿cómo disparar malas hipótesis, por qué descartar un producto y cómo crecer para un mínimo de acción?</a></li>
<li><a href="../457340/index.html">10 complementos PostCSS que le ahorrarán tiempo de diseño</a></li>
<li><a href="../457342/index.html">Señales desde arriba: cómo salvamos a los cartógrafos del trabajo innecesario y los ojos rojos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>