<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘ğŸ¼ âš½ï¸ ğŸšï¸ Apa yang menanti Anda sebelum, setelah dan selama transisi ke Kubernetes - catatan bisnis ğŸ‘´ğŸ½ ğŸ‘¨ğŸ¼â€ğŸ’» ğŸ¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya! 

 Pada artikel ini, kami memutuskan untuk berspekulasi sedikit tentang kapan dan mengapa bisnis membutuhkan Kubernetes. Betapa sulitny...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apa yang menanti Anda sebelum, setelah dan selama transisi ke Kubernetes - catatan bisnis</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/419353/">  Halo semuanya! <br><br>  Pada artikel ini, kami memutuskan untuk berspekulasi sedikit tentang kapan dan mengapa bisnis membutuhkan Kubernetes.  Betapa sulitnya teknologi untuk masuk, seberapa cepat dan bagaimana hasilnya.  Apakah itu layak dan apa yang semuanya mengancam.  Kami tidak mengatur sendiri tugas untuk menulis tinjauan teknis mendalam, yang jumlahnya banyak, tetapi dalam materi berikut kami pasti akan berbagi praktik terbaik kami dalam hal arsitektur aplikasi dan stabilitas di bawah Kubernetes.  Sekarang kita fokus pada apakah game itu sepadan dengan lilin dan apa yang kita dapatkan di jalan keluar. <br><br><img src="https://habrastorage.org/webt/tn/tb/cj/tntbcjekwq04x9inchtup9hyahi.png"><br><a name="habracut"></a><br>  Waktu ke pasar - kecepatan memperbarui pembaruan ke pasar - hari ini menjadi faktor kunci dalam efektivitas solusi TI.  Produk perlu ditingkatkan setiap hari: tambahkan fungsi dan modul baru ke dalamnya, simpan dokumentasi dan skrip dalam kondisi sempurna.  Pada saat yang sama, sistem online harus berjalan dengan lancar dan diperbarui tanpa mempengaruhi pengguna. <br><br>  Penjaga pembaruan terus-menerus yang tidak mencolok adalah layanan microser, wadah dan infrastruktur untuk orkestrasi mereka - Kubernetes (atau K8S, disebut dalam lingkaran teknis). <br><br><h2>  Bagaimana Kubernetes menyediakan pembaruan sistem yang berkelanjutan </h2><br>  Tugas utama saat memperbarui solusi TI adalah memastikan operasi yang benar setelah transfer dari lingkungan pengembangan ke platform produk.  Dan juga dalam kelancaran sistem pada saat memperbarui produk. <br><br>  Masalahnya terletak pada kenyataan bahwa pengaturan lingkungan pengembangan dan server industri sering tidak cocok.  Wadah memperbaiki masalah ini dengan menggabungkan semua komponen perangkat lunak ke dalam satu paket yang terisolasi dari lingkungan eksternal.  Ini memungkinkan Anda untuk menyebarkan aplikasi dengan cepat dan andal pada infrastruktur apa pun dan memfasilitasi pembaruan basis kode sistem. <br><br>  Tanpa disadari oleh pengguna, pembaruan terjadi melalui duplikasi wadah dan pengalihan sekuensial pengguna dari satu ke yang lain.  Untuk manajemen kontainer (orkestrasi) kami menggunakan Kuberenetes.  Pada akhirnya, ini memfasilitasi manajemen solusi, penyebaran dan peningkatan, pemantauan kinerja, dan debugging jika terjadi kegagalan. <br><br><h2>  Ketika sebuah perusahaan membutuhkan Kubernetes </h2><br>  Sudah waktunya bagi perusahaan untuk berpikir tentang beralih ke platform Kubernetes ketika: <br><br><ul><li>  Sebuah proyek atau sistem adalah alat yang signifikan untuk bisnis dan oleh karena itu harus toleran terhadap kesalahan dan terus bekerja, bahkan jika ada bagian yang rusak. </li><li>  Sistem ini sarat muatan, dengan tetap mempertahankan pembaruan atau peningkatan cepat. </li><li>  Sistem secara berkala membutuhkan kapasitas tambahan.  Dan membutuhkan mereka segera. </li><li>  Dan dengan semua ini, kecepatan pengiriman pembaruan ke lingkungan industri diukur dalam beberapa minggu, bulan, tahun, tetapi tidak pernah - berjam-jam atau berhari-hari. </li></ul><br>  Anda juga membutuhkan Kubernetes sebagai alat untuk otomatisasi dan standardisasi pekerjaan dengan solusi, jika selain dari yang di atas: <br><br><ul><li>  Tidak ada isolasi antara sistem TI perusahaan dan masing-masing dapat mempengaruhi yang lain. </li><li>  Jika Anda perlu menulis skrip terpisah setiap kali untuk berkomunikasi dengan parameter server tempat sistem digunakan, yaitu, Anda dapat mengatur skala proses ini hanya dengan tangan. </li><li> Ada orang-orang kunci dalam tim pengembangan - pembawa â€œpengetahuan rahasiaâ€ tentang proyek atau sistem, dan mereka tampak unik dan tak tergantikan. </li></ul><br>  Pada dasarnya, beralih ke Kubernetes adalah suatu keharusan bagi perusahaan yang perlu mendukung sistem informasi online 24/7. <br><br><h2>  Kenapa Kubernetes? </h2><br>  Kubernetes bukan satu-satunya alternatif untuk integrasi dan penyebaran berkelanjutan (CI / CD).  Tapi Kubernetes yang menjadi standar industri untuk mengelola sistem yang membutuhkan ketersediaan tinggi. <br><br>  Bagi kami sebagai pengembang, argumen yang menentukan yang mendukung Kubernet adalah sebagai berikut: <br><br><ul><li>  Platform ini berfokus pada aplikasi, bukan infrastruktur. </li><li>  Kubernetes nyaman untuk bekerja dengan satu pusat data, serta dengan beberapa, yang didistribusikan di berbagai kota. </li><li>  Dukungan solusi mudah melalui dokumentasi yang jelas dan komunitas yang aktif. </li><li>  Konfigurasi fleksibel berbagai aplikasi, distribusi lalu lintas aman. </li><li>  Dukungan kontainer Docker. </li></ul><br><h2>  Apa manfaat bisnis Kubernetes? </h2><br><ul><li>  Konfigurasi fleksibel dan proses pembaruan otomatis <br>  Anda sendiri yang menentukan bagian mana dari sistem yang akan dioperasikan secara komersial.  Kubernetes memungkinkan Anda membuat siklus rilis singkat.  Semua operasi - dari kode sumber sistem hingga rilis ke lingkungan produk - berlangsung secara otomatis.  Anda tidak perlu tim insinyur untuk membuat sistem bekerja.  Pembaruan saat ini tidak mempengaruhi kinerja sistem dan dapat dilakukan kapan saja nyaman bagi pengembang. </li><li>  Penempatan dan penskalaan sistem <br>  Sistem ini dapat ditempatkan pada kekuatan komputasi pelanggan (atau di pusat data), dan pada penyedia cloud apa pun, misalnya, Amazon atau Azure.  Tingkat kinerja dan toleransi kesalahan apa pun dapat dengan mudah dicapai dengan meningkatkan skala kluster. </li><li>  Standarisasi dan dokumentasi diri <br>  Solusinya tidak memerlukan instruksi.  Ini mendokumentasikan diri dan segera secara otomatis dikemas ke dalam unit penggunaan - wadah.  Kami menggambarkan konfigurasi di Kubernetes sebagai rencana / diagram.  Kami tidak menulis skrip yang mempersiapkan lingkungan, seperti sebelum Kubernetes.  Sebagai gantinya, kami meneruskan ke informasi Kubernetes (diagram) tentang bagaimana solusi seharusnya bekerja.  Dan dia sendiri yang mengimplementasikan skema ini. <br><br>  Pengembang sekarang menulis aplikasi untuk bekerja dalam wadah.  Insinyur DevOps menulis diagram tentang bagaimana aplikasi harus bekerja dalam sebuah wadah, dan Kubernetes sendiri melakukan tugas membangun solusi. <br><br>  Teknologi Kubernetes adalah standar.  Mudah bagi Anda untuk melatih karyawan baru dalam sistem rilis Anda atau mentransfer sistem ke kontraktor baru. <br><br>  Deskripsi konfigurasi akhir yang dibuat Kubernetes juga merupakan dokumentasi untuk sistem.  Dari namanya, segera hapus parameter apa yang dikonfigurasikan dan untuk apa parameter itu. <br><br>  Karena ini, platform Kubernetes secara keseluruhan merilis rilis, pembaruan, dan rilis aplikasi. </li></ul><br><ul><li>  Pengujian langsung tanpa rasa sakit <br>  Proses pengujian solusi telah berubah.  Pengembang dapat, sesuai permintaan, menciptakan lingkungan yang identik dengan produk untuk pengujian otomatis.  Dan log umum tentang cara kerja aplikasi dan cara kerja Kubernetes dengan aplikasi membantu untuk menyelidiki masalah dan menemukan kesalahan lebih cepat. </li></ul><br><h2>  Apa yang dibutuhkan oleh transisi bisnis ke Kubernetes </h2><br>  Kubernetes sendiri hanya akan menjadi bagian kecil dari sistem baru Anda.  Anda harus siap bahwa Kubernetes sebagai alat untuk menstandarisasi seluruh siklus pengembangan, memperbarui dan menerbitkan aplikasi akan memerlukan perubahan dalam segala hal pada saat transisi: arsitektur perangkat lunak, proses pengembangan dan pemeliharaan infrastruktur. <br><br><ul><li>  Arsitektur Solusi <br>  Dari sudut pandang produk, transisi hanya dimungkinkan jika sistem diimplementasikan atau ditingkatkan ke arsitektur layanan mikro berdasarkan layanan yang dapat dikemas dalam wadah (layanan tanpa kewarganegaraan). </li><li>  Proses pengembangan <br>  Dari sudut pandang proses pembangunan, transisi terutama melibatkan perubahan dalam pemikiran.  Setiap perbaikan situasional dan "kruk" yang ditambahkan pada saat terakhir benar-benar dikecualikan.  Pengembang solusi TI hanya dapat bekerja sebagai satu tim, yang awalnya membuat produk yang awalnya diuji, didukung, dikemas, dapat diurai.  Semuanya harus dibangun secara logis dari baris pertama kode ke operasi. </li><li>  Perbarui proses <br>  Bahkan pada tahap pengembangan arsitektur aplikasi, Anda perlu memikirkan cara memperbarui solusi tanpa henti.  Dan segera mengerti bagaimana Anda akan memperbarui database, API, bagaimana logis untuk mendukung beberapa versi aplikasi, dengan mempertimbangkan fakta bahwa orang-orang bekerja dengan sistem selama pembaruan dan mereka dapat jatuh ke dalam versi yang berbeda. <br><br>  Dan satu putaran pemikiran terkait dengan fakta bahwa ketika beralih ke Kubernetes, infrastruktur mulai bekerja dalam mode read-only, dan untuk memperbarui sistem, Anda perlu membuat versi baru dari gambar aplikasi dan memberitahu Kubernetes untuk menggunakan versi baru, dan nantinya akan mematikan versi lama dan akan menghapus dirinya sendiri. </li></ul><br><br>  Sehingga perbaikan sistem dan perubahan dalam teknologi kerja tidak bisa dihindari.  Bergerak tidak akan cepat.  Tetapi Anda perlu mengubah paradigma hanya sekali. <br><br><h2>  Kasing.  Bagaimana kami mentransfer sistem layanan-mikro ke Kubernetes </h2><br>  Kami beroperasi dalam lingkungan produk solusi yang sangat dimuat berdasarkan arsitektur layanan mikro, yang mentransmisikan lebih dari 300 ribu transaksi per hari, dan pada waktu puncak - 60-80 ribu per jam.  Kami secara teratur memperbarui produk, ada juga rilis yang lebih mendesak yang sebelumnya diperlukan untuk menangguhkan sistem atau bagian dari fungsinya untuk sementara waktu. <br><br>  Kami pergi ke lingkungan grosir tanpa K8S, tapi kami mengembangkan sistem awalnya dengan mata.  Butuh 6 minggu untuk menerjemahkan solusi ke Kubernetes.  Kami pindah ke arah berikut: <br><br><h4>  1) Menyiapkan pipa penempatan </h4><br>  a.  Mengkonfigurasi pipa untuk perakitan berkelanjutan, pengujian, dan pembaruan aplikasi (CI / CD) di lingkungan pengujian. <br>  b.  Menyiapkan pembaruan terus-menerus di lingkungan industri. <br>  c.  Persiapan dan konfigurasi lingkungan sedekat mungkin dengan lingkungan industri (preprod).  Kami menyebarkan dan menguji cluster di sebelah mesin virtual saat ini. <br>  d.  Pengembangan rencana untuk migrasi ke lingkungan industri. <br><br>  Jadi, semuanya tampak sederhana, kami memiliki pipa CI / CD untuk semua lingkungan dan Anda dapat beralih, tetapi masih terlalu dini! <br><br><h4>  2) Pemilihan konfigurasi cluster </h4><br>  Beberapa minggu kami habiskan untuk memilih konfigurasi komponen dan versi yang paling stabil dari kluster Kubernetes: sistem operasi + Docker + Kubernetes. <br><br>  Kami menguji 3 konfigurasi berbeda dari sistem operasi (Ubuntu, CentOS, Oracle Linux versi terbaru).  Di setiap sistem operasi, kami memeriksa 2 versi Docker dan Kubernet yang berbeda - versi yang dikirimkan dalam versi terbaru dari paket sistem operasi standar, dan versi terbaru dari pabrikan.  Sebagai hasilnya, konfigurasi dari distribusi standar Oracle Linux menunjukkan stabilitas terbesar, dan kami memutuskannya. <br><br><h4>  3) Mengkonfigurasi pengaturan wadah </h4><br>  Kami menghabiskan lebih banyak waktu menyetel parameter wadah - kami menyiapkan persyaratan untuk memori, disk, dan proses. <br><br>  Dan hanya setelah kami melakukan semua ini dan menguji berbagai parameter fungsi sistem (stabilitas, toleransi kesalahan dan lain-lain) dalam preprode di bawah beban yang dekat dengan yang tempur, dan sistem bekerja dengan stabil, kami beralih ke tahap akhir - migrasi. <br><br>  Kemudian semuanya sederhana. <br><br><h4>  Hari C. Migrasi </h4><br>  Untuk migrasi tempur, kami memilih waktu dengan beban sistem minimum: jumlah pengguna minimum dan tidak adanya peningkatan beban sesuai dengan jadwal kerja internal algoritma sistem. <br><br>  Waktu henti sistem sekitar satu jam dan praktis tidak memengaruhi pengguna.  Migrasi itu sendiri terdiri dari mengalihkan pengguna dari satu sistem ke yang lain dan mengamati bahwa semuanya berjalan dengan baik. <br><br><h4>  Hidup dengan Kubernet </h4><br>  Sekarang proses pembaruan tidak mempengaruhi kinerja sistem, itu dapat dilakukan kapan saja nyaman bagi pengembang dan terlihat sebagai berikut: <br><br><ol><li>  Pengembang membuat revisi, mengujinya, mengirim kode ke publikasi. </li><li>  Kode secara otomatis dirakit, dikemas dalam gambar buruh pelabuhan, dan diterbitkan ke repositori buruh pelabuhan pribadi. </li><li>  Kubernetes secara otomatis meningkatkan versi layanan baru, memeriksa apakah layanan berfungsi dengan benar, mengalihkan pengguna untuk menggunakan versi layanan baru, menghentikan pekerjaan versi lama dan menghapusnya dari cluster.  Pembaruan telah terjadi. </li></ol><br><h2>  Merangkum pengalaman kami </h2><br>  Anda perlu Kubernet jika: <br><br><ol><li>  Diperlukan ketersediaan sistem yang tinggi. </li><li>  Sistem ini berkembang secara dinamis, dan Anda perlu mengirimkan perubahan ke lingkungan produk dengan mata tertutup. </li><li>  Anda ingin bekerja sebagai tim tunggal dari kode ke lingkungan produk. </li><li>  Anda membuat sistem yang dinamis dan berkembang yang akan Anda operasikan selama bertahun-tahun. </li></ol><br>  Kubernetes â€œmahalâ€, karena memasuki teknologi akan membutuhkan: <br><br><ol><li>  Belajar oleh pengembang teknologi terkait. </li><li>  Tinjauan desain, pengembangan, penyebaran, pengujian, dan proses manajemen lingkungan. </li><li>  Pengalaman dalam mengoperasikan Kubernetes sendiri: sekarang Anda perlu memantau tidak hanya sistem Anda, tetapi juga layanan aplikasi Kubernetes. </li></ol><br>  Bayar Kubernet dengan sangat cepat: <br><br><ol><li>  Prosedur pembaruan sistem jauh lebih sederhana dan lebih cepat.  Pengembang dibebaskan dari seluruh blok kerja. </li><li>  Setiap spesialis baru akan memasuki proyek sudah di rel. </li><li>  Konveyor akan transparan dan otomatis. </li><li>  Pengalaman akan diulangi oleh tim Anda untuk sistem lain. </li><li>  Anda akan memperbarui sistem tanpa mematikannya, yang berarti Anda tidak akan menghentikan bisnis. </li></ol><br>  PS Saran praktis: bagi pintu masuk teknologi ke dalam dua tahap: mengembangkan sistem dengan arsitektur layanan mikro yang tepat dan memindahkannya di bawah kendali K8S.  Dengan demikian, transisi di bawah Kubernetes tidak akan berubah menjadi refactoring global. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id419353/">https://habr.com/ru/post/id419353/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id419339/index.html">Tantangan Boeing dan Keberhasilan SpaceX di Konferensi Grup Penasihat Keamanan Aerospace</a></li>
<li><a href="../id419341/index.html">Apa yang tidak mereka katakan tentang laporan Tesla</a></li>
<li><a href="../id419345/index.html">Laporan Club of Rome 2018, Bab 3.8: â€œEkonomi loop tertutup membutuhkan logika yang berbedaâ€</a></li>
<li><a href="../id419347/index.html">UE4 | Inventaris untuk Multi pemain # 3 | Struktur interaksi</a></li>
<li><a href="../id419349/index.html">Mengapa prioritas kerja dan nilai tidak berhasil</a></li>
<li><a href="../id419357/index.html">3CX Webmeeting Update: Peningkatan UI, Multimedia Bar, dan Statistik Kualitas Komunikasi</a></li>
<li><a href="../id419359/index.html">PHP Digest No. 136 (24 Juli - 6 Agustus 2018)</a></li>
<li><a href="../id419361/index.html">thindf - format data teks baru (alternatif untuk JSON)</a></li>
<li><a href="../id419363/index.html">GitLab 11.1: Panel Kontrol Keamanan dan Pencarian Tingkat Lanjut Dirilis</a></li>
<li><a href="../id419365/index.html">Kisah seorang pengacara IT. Bisnis outsourcing kehidupan. Bagian 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>