<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🔬 🎋 🖼️ Electron est un flash pour ordinateur de bureau ✍🏼 👦🏼 🙋🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pourquoi, dans l'application de bureau Slack, il y a très probablement un pilote pour que le contrôleur de jeu Xbox fonctionne et ce qui est vraiment ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Electron est un flash pour ordinateur de bureau</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427211/">  Pourquoi, dans l'application de bureau Slack, il y a très probablement un pilote pour que le contrôleur de jeu Xbox fonctionne et ce qui est vraiment mauvais d'utiliser Electron pour créer des applications de bureau. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3d8/764/0da/3d87640da319fa35ceb927bff2b82049.jpg" alt="image"><br><a name="habracut"></a><br>  Dans la capture d'écran ci-dessous, selon le profileur, Slack occupe presque toutes les ressources du processeur.  Je me demande ce qu'il fait là-bas? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a47/23d/f44/a4723df44feb99e183813b79e3e6b538.png" alt="image"><br><br>  Le processus a été lancé en arrière-plan lorsque cela s'est produit.  Je n'ai même pas interagi avec Slack - j'étais en réunion.  Et je l'ai remarqué uniquement à cause du bruit du système de refroidissement de mon ordinateur portable.  Le redémarrage de Slack cette fois a résolu le problème. <br><br>  Mais c'est normal pour Slack.  En arrière-plan, Slack consomme souvent 5% du processeur.  Que fait-il?  Je n'en ai aucune idée. <br><br>  Je parie que l'équipe de développement de Slack ne sait pas non plus.  Combien de lignes de code ont-ils dû écrire pour faire fonctionner leur client?  Je pense que 50 000 environ.  Peut-être 100 000.  Mais Slack n'est pas une application native.  Ou pas une application native ordinaire.  Il fonctionne au-dessus d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Electron</a> , ce qui signifie que lorsque vous le téléchargez, vous téléchargez en fait une copie complète de Google Chrome ( <i>plutôt, Chromium - environ Per.</i> ).  Chrome au moment de la rédaction du présent document contient <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">15 millions de lignes de code</a> qui ne sont pas des commentaires.  Code directement Slack représente moins de 1% de la charge. <br><br>  Chrome lui-même est toujours un porc.  Il est grand et complexe.  Il utilise la RAM et le processeur comme si personne d'autre ne les revendique et réduit considérablement la durée de vie de la batterie. <br><br>  Vous pouvez considérer Slack comme un petit programme JavaScript qui s'exécute dans un autre système d'exploitation Chrome (machine virtuelle) que vous exécutez pour utiliser essentiellement l'analogue d'IRC.  Même si Chrome lui-même est déjà en cours d'exécution, chaque application sur Electron déploie sa propre copie supplémentaire. <br><br>  Et appeler Chrome un système d'exploitation n'est pas une exagération.  Par le nombre de lignes de code, Chrome a presque la même taille que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le noyau Linux</a> .  Comme le noyau Linux, il dispose d'une API pour divers matériels, dont OpenGL, VR, MIDI.  Il contient une copie intégrée de SQLite, un système de gestion de mémoire et son propre gestionnaire de tâches.  Sur macOS, il a même un pilote USB pour le contrôleur de jeu Xbox 360. (Je sais qu'il est là parce que je l'ai écrit. Désolé.) <br><br>  Slack contient-il mon code pour la manette Xbox?  L'équipe Slack est-elle au courant?  Quelqu'un le sait-il même?  Slack occupe 160 Mo d'espace disque.  Il s'agit d'environ 70 exemplaires non compressés du Seigneur des anneaux.  Les autres applications Electron sur mon ordinateur sont Spotify (200 Mo) et Atom (260 Mo).  J'ai d'abord installé Linux à l'aide de disquettes.  Il faut 450 disquettes pour graver ces trois applications simples.  Ensemble, ils pèsent comme une distribution de bureau Ubuntu.  Ce qui, je pense, contient un client IRC, un éditeur de texte et un lecteur de musique.  Système d'exploitation complet, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">environnement utilisateur</a> et navigateur Web. <br><br>  Vous direz que l'espace disque est désormais sans valeur.  Oui, mais pas de RAM.  Le tout nouveau MacBook Pro brillant est équipé de 8 Go de RAM par défaut.  En raison de la durée de vie de la batterie, vous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ne pouvez pas</a> acheter un modèle avec plus de 16 Go.  Et en ce moment, Slack se situe entre 300 Mo et 1 Go dans la mémoire de mon ordinateur portable: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/42d/605/f00/42d605f00093fd9b0056c533ddae2af8.png" alt="image"><br><br>  Allez.  Il s'agit d'une application de partage de texte. <br><br>  Une autre chose qui manque toujours est la batterie.  Les processeurs modernes économisent l'énergie en s'arrêtant autant que possible (lorsqu'il n'y a pas de tâches).  La malédiction de la gestion de l'alimentation réside dans les programmes qui utilisent constamment le processeur pour quelques pour cent.  Ils font que le processeur se réveille constamment, overclocke et s'arrête à nouveau.  C'est le moyen idéal pour détruire la précieuse puissance de la batterie.  Si quelqu'un a le temps (laissez-le simplement fonctionner) - je verrais combien Spotify, Slack et Atom réduisent la durée de vie de la batterie sur les ordinateurs portables modernes.  C'est incroyable. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a4/0f0/496/7a40f04961ffc8fa1a8dbb52e1312380.png" alt="image"><br><br>  Et non, Spotify ne joue pas de musique.  Il est juste ... en train de courir.  Il fait ses mystérieuses affaires de chrome.  Et il utilise également quelques pour cent du processeur.  Juste pour exister. <br><br>  (En rédigeant cette note, Chrome a décidé de prendre 100% des ressources du processeur en représailles. Dans le gestionnaire de tâches intégré, c'était un mystérieux processus de «navigateur». Merci, Chrome.) <br><br>  Pour être honnête, JavaScript en dehors du navigateur n'est pas un problème.  En fait, je pense que les API fournies par le Web moderne sont bien meilleures que les API existantes du système d'exploitation.  Nous devons les utiliser. <br><br>  Mais nous devons trouver l'opportunité d'utiliser ces nouveaux paradigmes (React et ses amis) sur les plates-formes de bureau sans avoir à exécuter des copies plus sanglantes de Chrome.  Je ne suis tout simplement pas tellement intéressé par votre application pour justifier le démarrage d'une autre instance Chrome.  Il est facile pour un développeur de tomber dans le piège du sentiment que votre application ou votre site est un cadeau pour l'humanité et la chose la plus importante qu'il puisse faire.  Pourquoi ne pas profiter des ressources excédentaires?  Nous devons lutter contre cette façon de penser.  Un tel chemin mène à un monde où nous ne pouvons pas avoir de bonnes choses.  Un tel chemin mène à un monde où les batteries de nos ordinateurs portables doivent se développer pour fournir de l'énergie aux processeurs afin qu'ils effectuent un travail encore plus inutile.  Un tel chemin mène au retour de Shockwave Flash et des téléphones qui chauffent dans les poches, qui se déchargent mystérieusement quand on veut les utiliser.  Paranoïa par rapport à la charge de la batterie et fermeture des applications dès que nous avons fini de travailler avec eux.  (Je vous regarde, iTunes et Mischief.) <br><blockquote>  Dites simplement Electron NON </blockquote>  Développeurs, ne laissez pas vos amis écrire des applications sur Electron.  Si vous souhaitez utiliser JS et React, utilisez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">React Native</a> .  C'est comme Electron, mais vous n'avez pas besoin de distribuer une copie de Chrome à tous les utilisateurs et d'exécuter une autre copie de Chrome pour utiliser votre application.  Il s'avère que les systèmes d'exploitation modernes disposent déjà de bibliothèques d'interface utilisateur bonnes et rapides.  Utilisez-les, fous! <br><br>  Un autre fait triste est que même de nombreux développeurs n'ont aucune idée de ce qui se passe sur leurs ordinateurs.  Ils utilisent Slack, mais ne savent pas combien il est gourmand.  C'est votre responsabilité, en tant que développeur, de savoir tout cela.  Pratique.  Explorez les outils de profilage.  Utilisez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">iStatMeters</a> ou l'un des analogues gratuits.  Vous ne pouvez pas améliorer ce que vous ne mesurez pas. <br><br>  Nous devrions peut-être acheter des ordinateurs plus lents pour ressentir la douleur.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Facebook a délibérément limité la vitesse d'Internet dans ses bureaux</a> une fois par semaine, afin de sympathiser avec leurs utilisateurs dans d'autres pays du tiers monde (khe-Australie-khe).  Peut-être qu'en tant que développeurs, nous devrions également le faire avec nos ordinateurs, par exemple, pour que le code fonctionne beaucoup plus lentement que d'habitude afin de nous armer d'une intuition de performance.  Il y a quelques années, j'ai laissé mon ordinateur portable au travail pour un long week-end.  Au lieu de le poursuivre, j'ai décidé de brancher mon Raspberry Pi (sacrément lente 1ère génération) et de l'utiliser pour le développement.  Soudain, les nombreuses opérations qui ont été effectuées instantanément sur mon ordinateur portable i7 normal sont devenues terriblement lentes.  Et j'ai passé le week-end à rendre mon flux de travail plus fluide.  Tous ces réglages de performances sont également appliqués aux appareils standard.  Réduire le temps de lancement de 5 secondes à 2x sur le Raspberry Pi a fait un bond incroyable.  Ce correctif est également devenu un saut de 0,5 seconde à 0,2, ou quelque chose comme ça.  Ceci est encore très visible pour l'utilisateur.  Un temps de démarrage de 0,5 seconde est suffisamment court pour passer à côté de ce fait pendant le développement, mais une baisse à 0,2 semble évidemment beaucoup plus rapide. <br><br>  <b>Utilisateurs</b> : veuillez vous plaindre des programmes lents.  Dans la cour 2016 ( <i>... - env. Per.</i> ).  Nous transportons des superordinateurs dans nos poches.  Il est inacceptable que les programmes soient lents. <br><br>  <b>Développeurs</b> : les performances sont importantes.  La mémoire compte.  Peu m'importe que vous soyez la fille la plus attirante sur la piste de danse, Slack.  Je vous ferme dès que je quitte le bureau.  Je vous supprime de l'ordinateur dès que j'en ai l'occasion.  La lenteur est un bug.  Le programme le plus rapide est celui que vous n’exécutez pas.  Alors arrêtez d'incorporer tout Chrome dans votre application. <br><br>  Et vous tous, développeurs Web: apprenez C ou Rust ou quelque chose comme ça.  Vos programmes <i>s'exécutent sur un ordinateur</i> .  Jusqu'à ce que vous sachiez comment l'ordinateur fonctionne, vous êtes condamné.  Et sors de ma pelouse jusqu'à ce que tu le découvres!  <i>* poing tremblant *</i> <br><br>  Et oui, lisez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">crise des sites d'obésité</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">traduction sur Habr</a> ).  C'est très drôle.  Et très triste.  Et très vital. <br><br>  Edit: Spotify utilise en fait le Chromium Embedded Framework au lieu de se lancer via Electron.  Mais il intègre toujours Chrome.  Je ne savais pas à ce sujet lorsque j'ai écrit l'article, mais je n'enlève pas mes mots sur la performance ultime. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr427211/">https://habr.com/ru/post/fr427211/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr427199/index.html">Connaissance approfondie du trieur électromécanique de cartes perforées (excursion au début du XXe siècle)</a></li>
<li><a href="../fr427203/index.html">«Light Music»: parler de quatre outils électroniques insolites avec photocellules</a></li>
<li><a href="../fr427205/index.html">Habrakvest en l'honneur du 20e anniversaire du groupe Mail.Ru: gagnants et réponses</a></li>
<li><a href="../fr427207/index.html">Les employés de Rockstar se lèvent pour l'entreprise après avoir critiqué les semaines de travail de 100 heures</a></li>
<li><a href="../fr427209/index.html">GeoPuzzle - faites le monde morceau par morceau</a></li>
<li><a href="../fr427215/index.html">Les microservices doivent grandir, pas commencer par eux</a></li>
<li><a href="../fr427217/index.html">Analyse des performances des serveurs WSGI: deuxième partie</a></li>
<li><a href="../fr427219/index.html">Messagerie différée non bloquante inutile dans MPI: analyse légère et tutoriel pour ceux qui sont un peu "dans le sujet"</a></li>
<li><a href="../fr427221/index.html">Ce que j'ai réalisé sur le chemin de mon rêve d'intelligence artificielle</a></li>
<li><a href="../fr427223/index.html">Quelle est la responsabilité du développeur principal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>