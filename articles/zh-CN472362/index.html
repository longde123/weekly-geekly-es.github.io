<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸï¸ ğŸ¥š ğŸï¸ æˆ‘ä»¬æœç´¢å¹¶åˆ†æOrchard CMSä»£ç ä¸­çš„é”™è¯¯ ğŸ˜¾ ğŸ¥ˆ ğŸ¤¤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ–‡æ˜¯ä½¿ç”¨PVS-Studioé™æ€åˆ†æå™¨é‡æ–°æ£€æŸ¥Orchardé¡¹ç›®çš„ç»“æœã€‚ Orchardæ˜¯ä¸€ä¸ªå¼€æºå†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œéš¶å±äºOutercurve Foundationï¼ˆéè¥åˆ©æ€§ASP.NETé¡¹ç›®ç”»å»Šï¼‰çš„ä¸€éƒ¨åˆ†ã€‚ è¯¥æµ‹è¯•å¾ˆæœ‰è¶£ï¼Œå› ä¸ºè‡ªé¦–æ¬¡åˆ†æä»¥æ¥ï¼Œè¯¥é¡¹ç›®å’Œåˆ†æä»ªå·²æ˜¾ç€å¢é•¿ã€‚ æ–°çš„ç§¯æå› ç´ å’Œæœ‰è¶£çš„é”™è¯¯æ­£ç­‰ç€...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æˆ‘ä»¬æœç´¢å¹¶åˆ†æOrchard CMSä»£ç ä¸­çš„é”™è¯¯</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/472362/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ef5/c02/394/ef5c023947badf157fb4c97b6562ab91.png" alt="å›¾ç‰‡6"></div><br> æœ¬æ–‡æ˜¯ä½¿ç”¨PVS-Studioé™æ€åˆ†æå™¨é‡æ–°æ£€æŸ¥Orchardé¡¹ç›®çš„ç»“æœã€‚  Orchardæ˜¯ä¸€ä¸ªå¼€æºå†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œéš¶å±äºOutercurve Foundationï¼ˆéè¥åˆ©æ€§ASP.NETé¡¹ç›®ç”»å»Šï¼‰çš„ä¸€éƒ¨åˆ†ã€‚ è¯¥æµ‹è¯•å¾ˆæœ‰è¶£ï¼Œå› ä¸ºè‡ªé¦–æ¬¡åˆ†æä»¥æ¥ï¼Œè¯¥é¡¹ç›®å’Œåˆ†æä»ªå·²æ˜¾ç€å¢é•¿ã€‚ æ–°çš„ç§¯æå› ç´ å’Œæœ‰è¶£çš„é”™è¯¯æ­£ç­‰ç€æ‚¨ã€‚ <br><a name="habracut"></a><br>  <b>å…³äºæœå›­CMS</b> <br><br> ä¸‰å¹´å‰ï¼Œæˆ‘ä»¬åœ¨PVS-Studioä¸Š<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æµ‹è¯•äº†</a> Orchardã€‚ ä»é‚£æ—¶èµ·ï¼ŒCï¼ƒåˆ†æå™¨å¾—åˆ°äº†é•¿è¶³çš„å‘å±•ï¼šæˆ‘ä»¬æ”¹è¿›äº†æ•°æ®æµåˆ†æï¼Œå¼€å‘äº†è¿‡ç¨‹é—´åˆ†æï¼Œæ·»åŠ äº†æ–°çš„è¯Šæ–­æ–¹æ³•å¹¶ä¿®å¤äº†ä¸€äº›è¯¯æŠ¥ã€‚ æ­¤å¤–ï¼Œåˆ†æè¡¨æ˜ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„æ‰€æœ‰è¯„è®ºå‡å·²å¾—åˆ°çº æ­£ã€‚ è¿™æ„å‘³ç€ç›®æ ‡å¾—ä»¥å®ç°-ä»£ç å˜å¾—æ›´å¥½ã€‚ <br><br> æˆ‘æƒ³ç›¸ä¿¡å¼€å‘äººå‘˜å°†å…³æ³¨æœ¬æ–‡å¹¶è¿›è¡Œå¿…è¦çš„æ›´æ”¹ã€‚ å¦‚æœæ‚¨ä»‹ç»å¸¸è§„ä½¿ç”¨PVS-Studioçš„åšæ³•ï¼Œé‚£å°±æ›´å¥½äº†ã€‚ è®©æˆ‘æé†’æ‚¨ï¼Œå¯¹äº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¼€æº</a>é¡¹ç›®ï¼Œæˆ‘ä»¬æä¾›äº†è®¸å¯è¯çš„å…è´¹ç‰ˆæœ¬ã€‚ é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿˜æœ‰å…¶ä»–é€‚åˆå°é—­é¡¹ç›®çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é€‰é¡¹</a> ã€‚ <br><br> å¯ä»¥åƒæˆ‘ä¸€æ ·<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»è¿™é‡Œ</a>ä¸‹è½½Orchardé¡¹ç›®ä»£ç ã€‚ æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>æ‰¾åˆ°è¯¥é¡¹ç›®çš„å®Œæ•´è¯´æ˜ã€‚ å¦‚æœæ‚¨è¿˜æ²¡æœ‰æˆ‘ä»¬çš„PVS-Studioåˆ†æä»ªï¼Œåˆ™å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»æ­¤å¤„</a>ä¸‹è½½è¯•ç”¨ç‰ˆã€‚ æˆ‘ä½¿ç”¨çš„æ˜¯PVS-Studioç‰ˆæœ¬7.05 Betaã€‚ æˆ‘å°†åˆ†äº«å¥¹çš„å·¥ä½œæˆæœã€‚ æˆ‘å¸Œæœ›æ‚¨åŒæ„ä½¿ç”¨PVS-Studioçš„æœ‰ç”¨æ€§ã€‚ æœ€ä¸»è¦çš„æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®šæœŸ</a>ä½¿ç”¨åˆ†æä»ªã€‚ <br><br>  <b>éªŒè¯ç»“æœ</b> <br><br> æˆ‘å°†ä¸ºæ‚¨æä¾›ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„ä¸€äº›æ•°æ®ï¼Œä»¥ä¾¿æ‚¨ä¸å¿…åˆ‡æ¢æ¯”è¾ƒã€‚ <br><br>  â€œæ‰€æœ‰æ‰©å±•åä¸º.csçš„æ–‡ä»¶ï¼ˆ3739ä¸ªï¼‰éƒ½å‚ä¸äº†æœ€åä¸€æ¬¡æ£€æŸ¥ã€‚ å®ƒä»¬æ€»å…±åŒ…å«214,564è¡Œä»£ç ã€‚ æ ¹æ®å®¡æ ¸ç»“æœï¼Œæ”¶åˆ°äº†137æ¡è­¦å‘Šã€‚ åœ¨ç¬¬ä¸€ä¸ªï¼ˆé«˜ï¼‰ç½®ä¿¡åº¦ä¸‹ï¼Œæ”¶åˆ°39ä¸ªè­¦å‘Šã€‚ åœ¨ç¬¬äºŒçº§ï¼ˆå¹³å‡ï¼‰ï¼Œæ”¶åˆ°äº†60æ¡è­¦å‘Šã€‚â€ <br><br> ç›®å‰ï¼Œè¯¥é¡¹ç›®æœ‰2767ä¸ª.csæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥é¡¹ç›®å·²å°‘äºä¸€åƒä¸ªæ–‡ä»¶ã€‚ é€šè¿‡å‡å°‘æ–‡ä»¶æ•°é‡å’Œæ›´æ”¹å­˜å‚¨åº“åç§°æ¥åˆ¤æ–­ï¼Œå·²ä»é¡¹ç›®ä¸­åˆ†é…äº†å†…æ ¸ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æäº¤966</a> ï¼‰ã€‚ å†…æ ¸ä¸­æœ‰108,287è¡Œä»£ç ï¼Œåˆ†æå™¨å‘å‡º153æ¡è­¦å‘Šï¼Œå…¶ä¸­33æ¡ä¸ºé«˜çº§åˆ«ï¼Œå¹³å‡70æ¡ã€‚ æˆ‘ä»¬é€šå¸¸ä¸è€ƒè™‘ä¸‰çº§è­¦å‘Šï¼Œæˆ‘æ²¡æœ‰æ‰“ç ´ä¼ ç»Ÿã€‚ <br><br>  <b>PVS-Studioè­¦å‘Š</b> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3110</a> â€œ TryValidateModelâ€æ–¹æ³•å†…å¯èƒ½å­˜åœ¨æ— é™é€’å½’ã€‚  PrefixedModuleUpdater.cs 48 <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TryValidateModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> model, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> prefix</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TryValidateModel(model, Prefix(prefix)); }</code> </pre> <br> ä¸ä¸Šä¸€ç¯‡æ–‡ç« ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨æ— é™é€’å½’æ‰“å¼€é”™è¯¯åˆ—è¡¨ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¾ˆéš¾è¯´å¼€å‘å•†ç©¶ç«Ÿæƒ³åšä»€ä¹ˆã€‚ ä½†æ˜¯æˆ‘æ³¨æ„åˆ°<i>TryValidateModel</i>æ–¹æ³•æœ‰ä¸€ä¸ªå‚æ•°é‡è½½ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TryValidateModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> model</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _updateModel.TryValidateModel(model); }</code> </pre> <br> æˆ‘è®¤ä¸ºï¼Œä¸é‡è½½æ–¹æ³•ä¸€æ ·ï¼Œå¼€å‘äººå‘˜å¸Œæœ›é€šè¿‡<i>_updateModel</i>è°ƒç”¨æ–¹æ³•<i>ã€‚</i> ç¼–è¯‘å™¨æ²¡æœ‰çœ‹åˆ°é”™è¯¯ï¼Œ <i>_updateModel</i>æ˜¯<i>IUpdateModel</i>ç±»å‹ï¼Œå¹¶ä¸”å½“å‰ç±»ä¹Ÿå®ç°äº†æ­¤æ¥å£ã€‚ ç”±äºè¯¥æ–¹æ³•ä¸­æ²¡æœ‰å•ä¸€æ¡ä»¶å¯ä»¥é˜²æ­¢<i>StackOverflowException</i> ï¼Œå› æ­¤è¯¥æ–¹æ³•ç”šè‡³å¯èƒ½æ²¡æœ‰è¢«è°ƒç”¨è¿‡ä¸€æ¬¡ï¼Œä½†æˆ‘ä¸ä¼šæŒ‡æœ›å®ƒã€‚ å¦‚æœå‡è®¾æ­£ç¡®ï¼Œåˆ™æ ¡æ­£åçš„ç‰ˆæœ¬å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TryValidateModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> model, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> prefix</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _updateModel.TryValidateModel(model, Prefix(prefix)); }</code> </pre> <br>  <b>PVS-Studioè­¦å‘Šï¼š</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3008</a> â€œå†…å®¹â€å˜é‡å·²è¿ç»­ä¸¤æ¬¡åˆ†é…å€¼ã€‚ ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æ£€æŸ¥è¡Œï¼š197ã€190ã€‚DynamicCacheTagHelper.cs 197 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... IHtmlContent content; .... <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { content = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> output.GetChildContentAsync(); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { _cacheScopeManager.ExitScope(); } content = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ProcessContentAsync(output, cacheContext); .... }</code> </pre> <br> åˆ†æå™¨çœ‹åˆ°äº†ä¸¤ä¸ªå¯¹å±€éƒ¨å˜é‡<i>å†…å®¹çš„</i>åˆ†é…<i>ã€‚</i>  <i>GetChildContentAsync</i>æ˜¯åº“ä¸­çš„ä¸€ç§æ–¹æ³•ï¼Œå®ƒä¸è¶³ä»¥è®©æˆ‘ä»¬å†³å®šå¯¹å…¶è¿›è¡Œæ³¨é‡Šã€‚ å› æ­¤ï¼Œä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬å’Œåˆ†æäººå‘˜éƒ½å¯¹æ–¹æ³•çš„è¿”å›å¯¹è±¡å’Œå‰¯ä½œç”¨ä¸€æ— æ‰€çŸ¥ã€‚ ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è‚¯å®šåœ°è¯´ï¼Œåœ¨<i>å†…å®¹</i>ä¸­åˆ†é…ç»“æœæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ ä¹Ÿè®¸è¿™æ ¹æœ¬ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œåªæ˜¯ä¸€ä¸ªé¢å¤–çš„æ“ä½œã€‚ å…³äºä¿®å¤å®ƒçš„æ–¹å¼ï¼Œæˆ‘ä¸èƒ½å¾—å‡ºæ˜ç¡®çš„ç»“è®ºã€‚ æˆ‘å°†æŠŠè¿™ä¸ªå†³å®šç•™ç»™å¼€å‘å•†ã€‚ <br><br>  <b>PVS-Studioè­¦å‘Š</b> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3080</a>å¯èƒ½å–æ¶ˆç©ºå¼•ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥â€œ itemTagâ€ã€‚  CoreShapes.cs 92 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IHtmlContent&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">List</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ItemTag....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> itemTagName = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ItemTag != <span class="hljs-string"><span class="hljs-string">"-"</span></span>) { itemTagName = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(ItemTag) ? <span class="hljs-string"><span class="hljs-string">"li"</span></span> : ItemTag; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> index = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> items) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> itemTag = String.IsNullOrEmpty(itemTagName) ? <span class="hljs-literal"><span class="hljs-literal">null</span></span> : ....; .... itemTag.InnerHtml.AppendHtml(itemContent); listTag.InnerHtml.AppendHtml(itemTag); ++index; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> listTag; }</code> </pre> <br> åœ¨æ­¤ä»£ç ä¸­ï¼Œåˆ†æå™¨æ£€æµ‹åˆ°å±é™©çš„å–æ¶ˆå¼•ç”¨<i>itemTag</i> ã€‚ é™æ€åˆ†æä»ªå’Œæµ‹è¯•äººå‘˜ä¹‹é—´å·®å¼‚çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚ è¯¥æ–¹æ³•å…·æœ‰ä¸€ä¸ªåä¸º<i>ItemTag</i>çš„å‚æ•°å’Œä¸€ä¸ªåä¸º<i>itemTag</i>çš„å±€éƒ¨å˜é‡ã€‚ å¦‚æ‚¨æ‰€çŸ¥ï¼Œå·®å¼‚å¯¹äºç¼–è¯‘å™¨è€Œè¨€æ˜¯å·¨å¤§çš„ï¼ è¿™æ˜¯ä¸¤ä¸ªä¸åŒçš„å°½ç®¡ç›¸å…³çš„å˜é‡ã€‚ è¿æ¥é€šè¿‡ç¬¬ä¸‰ä¸ªå˜é‡<i>itemTagNameã€‚</i> å¼•å‘å¼‚å¸¸çš„æƒ…å†µæ˜¯è¿™æ ·çš„ï¼š <i>ItemTag</i>å‚æ•°ä¸ºâ€œ-â€ï¼Œæœªä¸º<i>itemTagName</i>åˆ†é…å€¼ï¼Œå®ƒå°†ä¿ç•™ä¸ºç©ºå¼•ç”¨ï¼Œå¦‚æœä¸ºç©ºå¼•ç”¨ï¼Œåˆ™æœ¬åœ°<i>itemTag</i>ä¹Ÿå°†å˜ä¸ºç©ºå¼•ç”¨ã€‚ æˆ‘è®¤ä¸ºæœ€å¥½åœ¨æ£€æŸ¥å­—ç¬¦ä¸²ååœ¨æ­¤å¤„å¼•å‘å¼‚å¸¸ã€‚ <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IHtmlContent&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">List</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ItemTag....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> itemTagName = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ItemTag != <span class="hljs-string"><span class="hljs-string">"-"</span></span>) { itemTagName = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(ItemTag) ? <span class="hljs-string"><span class="hljs-string">"li"</span></span> : ItemTag; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> index = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> items) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> itemTag = ....; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(String.IsNullOrEmpty(itemTag)) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> .... .... itemTag.InnerHtml.AppendHtml(itemContent); listTag.InnerHtml.AppendHtml(itemTag); ++index; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> listTag; }</code> </pre> <br>  <b>PVS-Studioè­¦å‘Šï¼š</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3095</a>åœ¨å¯¹nullè¿›è¡ŒéªŒè¯ä¹‹å‰ï¼Œå·²ä½¿ç”¨'remoteClient'å¯¹è±¡ã€‚ æ£€æŸ¥è¡Œï¼š49ï¼Œ51ã€‚ImportRemoteInstanceController.cs 49 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IActionResult&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Import</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ImportViewModel model</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> remoteClient = remoteClientList.RemoteClients.FirstOrDefault(....); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> apiKey = Encoding.UTF8.GetString(....(remoteClient.ProtectedApiKey)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (remoteClient == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || ....) { .... } .... }</code> </pre> <br> åˆ†æå™¨çœ‹åˆ°ä»¥ä¸‹å¯¹<i>remoteClient</i>çš„å–æ¶ˆå¼•ç”¨å’Œ<i>ç©º</i>æ£€æŸ¥ã€‚ å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªæ½œåœ¨çš„<i>NullReferenceException</i> ï¼Œå› ä¸º<i>FirstOrDefault</i>æ–¹æ³•å¯ä»¥è¿”å›é»˜è®¤å€¼ï¼ˆå¯¹äºå¼•ç”¨ç±»å‹ï¼Œå®ƒä¸º<i>null</i> ï¼‰ã€‚ æˆ‘æƒ³ï¼Œè¦ä¿®å¤ä»£ç ï¼Œåªéœ€è½¬ç§»ä¸Šé¢çš„æ£€æŸ¥ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IActionResult&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Import</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ImportViewModel model</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> remoteClient = remoteClientList.RemoteClients.FirstOrDefault(....); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (remoteClient != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> apiKey = UTF8.GetString(....remoteClient.ProtectedApiKey); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... } .... }</code> </pre> <br> è™½ç„¶ï¼Œå¯èƒ½æœ‰å¿…è¦ç”¨<i>First</i>ä»£æ›¿<i>FirstOrDefault</i>å¹¶å®Œå…¨å–æ¶ˆæ£€æŸ¥ã€‚ <br><br>  <b>ä»PVS-Studio 7.05 Betaå¼€å§‹ï¼š</b> <br><br> ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»æ³¨é‡Šäº†<i>LINQçš„</i>æ‰€æœ‰<i>orDefault</i>æ–¹æ³•ã€‚ æ­¤ä¿¡æ¯å°†ç”±æ–°çš„è¯Šæ–­ç¨‹åºä½¿ç”¨ï¼Œè¯·æ³¨æ„åœ¨ä¸æ£€æŸ¥çš„æƒ…å†µä¸‹å–æ¶ˆè°ƒç”¨è¿™äº›æ–¹æ³•çš„ç»“æœã€‚ å¯¹äºæ¯ä¸ª<i>orDefault</i>æ–¹æ³•ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆé€‚çš„å…ƒç´ ï¼Œåˆ™æœ‰ä¸€ä¸ªå¼•å‘å¼‚å¸¸çš„ç±»æ¯”ã€‚ ä¸æŠ½è±¡çš„<i>NullReferenceException</i>ç›¸æ¯”ï¼Œæ­¤å¼‚å¸¸å°†æ›´æœ‰åŠ©äºç†è§£é—®é¢˜ã€‚ <br><br> æˆ‘ä¸èƒ½ä¸åˆ†äº«è¯¥é¡¹ç›®å¼€å‘çš„è¯Šæ–­ç»“æœã€‚  27ä¸ªæ½œåœ¨å±é™©çš„åœ°æ–¹ã€‚ ä»¥ä¸‹æ˜¯å…¶ä¸­ä¸€äº›ï¼š <br><br>  ContentTypesAdminNodeNavigationBuilder.cs 71ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> treeBuilder = treeNodeBuilders.Where(....).FirstOrDefault(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> treeBuilder.BuildNavigationAsync(childNode, builder, treeNodeBuilders);</code> </pre> <br>  ListPartDisplayDriver.cs 217ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentTypePartDefinition = ....Parts.FirstOrDefault(....); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contentTypePartDefinition.Settings....;</code> </pre> <br>  ContentTypesAdminNodeNavigationBuilder.cs 113ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> typeEntry = node.ContentTypes.Where(....).FirstOrDefault(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> AddPrefixToClasses(typeEntry.IconClass);</code> </pre> <br>  <b>PVS-Studioè­¦å‘Š</b> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3080</a>æ–¹æ³•è¿”å›å€¼å¯èƒ½ä¼šç©ºå¼•ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥ï¼šCreateScopeï¼ˆï¼‰ã€‚  SetupService.cs 136 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetupInternalAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SetupContext context</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> shellContext = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ....) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> shellContext.CreateScope().UsingAsync(....); } .... }</code> </pre> <br> å› æ­¤ï¼Œåˆ†æå™¨æ³¨æ„åˆ°è°ƒç”¨<i>CreateScope</i>æ–¹æ³•çš„ç»“æœå·²å–æ¶ˆå¼•ç”¨ã€‚  <i>CreateScope</i>æ–¹æ³•å¾ˆå°ï¼Œæˆ‘å°†å…¨éƒ¨ä»‹ç»å®ƒï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ShellScope </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateScope</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_placeHolder) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scope = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShellScope(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-comment"><span class="hljs-comment">// A new scope can be only used on a non released shell. if (!released) { return scope; } scope.Dispose(); return null; }</span></span></code> </pre> <br> å¦‚æ‚¨æ‰€è§ï¼Œå®ƒåœ¨ä¸¤ç§æƒ…å†µä¸‹å¯ä»¥è¿”å›<i>null</i> ã€‚ åˆ†æå™¨æ— æ³•è¯´å‡ºç¨‹åºå°†ç»è¿‡å“ªä¸ªåˆ†æ”¯ï¼Œå› æ­¤å°†ä»£ç æ ‡è®°ä¸ºå¯ç–‘ã€‚ åœ¨æˆ‘çš„ä»£ç ä¸­ï¼Œæˆ‘å°†ç«‹å³æ·»åŠ ä¸€ä¸ª<i>ç©º</i>æ£€æŸ¥ã€‚ <br><br> ä¹Ÿè®¸æˆ‘è®¤ä¸ºæœ‰åè§ï¼Œä½†æ˜¯æ‰€æœ‰å¼‚æ­¥æ–¹æ³•éƒ½åº”å°½å¯èƒ½åœ°é’ˆå¯¹<i>NullReferenceException</i>è¿›è¡Œä¿é™©ã€‚ è°ƒè¯•è¿™äº›ä¸œè¥¿æ˜¯éå¸¸å¯ç–‘çš„ä¹è¶£ã€‚ <br><br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <i>CreateScope</i>æ–¹æ³•<i>æœ‰</i>å››ä¸ªè°ƒç”¨ï¼Œåœ¨ä¸¤ä¸ªè°ƒç”¨ä¸­æœ‰ä¸€ä¸ªæ£€æŸ¥ï¼Œä½†åœ¨å¦å¤–ä¸¤ä¸ªä¸­åˆ™ä¸¢å¤±äº†ã€‚ æ­¤å¤–ï¼Œæ²¡æœ‰éªŒè¯çš„ä¸€å¯¹ç±»ä¼¼äºå¤åˆ¶ç²˜è´´ï¼ˆä¸€ä¸ªç±»ï¼Œä¸€ä¸ªæ–¹æ³•ï¼Œå·²å–æ¶ˆå¼•ç”¨ä»¥è°ƒç”¨UsingAsyncï¼‰ã€‚ æˆ‘å·²ç»ä»è¿™å¯¹å‘å‡ºäº†ç¬¬ä¸€ä¸ªç”µè¯ï¼Œå½“ç„¶ï¼Œç¬¬äºŒä¸ªç”µè¯ä¹Ÿæœ‰ç±»ä¼¼çš„åˆ†æå™¨è­¦å‘Šï¼š <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3080</a>æ–¹æ³•è¿”å›å€¼çš„ç©ºnullå–æ¶ˆå¼•ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥ï¼šCreateScopeï¼ˆï¼‰ã€‚  SetupService.cs 192 <br><br>  <b>PVS-Studioè­¦å‘Šï¼š</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3127æ‰¾åˆ°</a>ä¸¤ä¸ªç›¸ä¼¼çš„ä»£ç ç‰‡æ®µã€‚ ä¹Ÿè®¸ï¼Œè¿™æ˜¯ä¸€ä¸ªé”™å­—ï¼Œåº”è¯¥ä½¿ç”¨â€œ AccessTokenSecretâ€å˜é‡ä»£æ›¿â€œ ConsumerSecretâ€ TwitterClientMessageHandler.cs 52 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureOAuthAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HttpRequestMessage request</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(settings.ConsumerSecret)) settings.ConsumerSecret = protrector.Unprotect(settings.ConsumerSecret); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(settings.ConsumerSecret)) settings.AccessTokenSecret = protrector.Unprotect(settings.AccessTokenSecret); .... }</code> </pre> <br> ç»å…¸å¤åˆ¶ç²˜è´´ã€‚  <i>ConsumerSecretè¿›è¡Œ</i>äº†ä¸¤æ¬¡æ£€æŸ¥ï¼Œè€Œ<i>AccessTokenSecret</i> <i>è¿›è¡Œäº†</i>æ£€æŸ¥-æ²¡æœ‰ä¸€æ¬¡ã€‚ æ˜¾ç„¶ï¼Œæ‚¨éœ€è¦ä¿®å¤ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureOAuthAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HttpRequestMessage request</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(settings.ConsumerSecret)) settings.ConsumerSecret = protrector.Unprotect(settings.ConsumerSecret); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(settings.AccessTokenSecret)) settings.AccessTokenSecret = protrector.Unprotect(settings.AccessTokenSecret); .... }</code> </pre> <br>  <b>PVS-Studioè­¦å‘Šï¼š</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3139</a>ä¸¤ä¸ªæˆ–æ›´å¤šæ¡ˆä¾‹åˆ†æ”¯æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚  SerialDocumentExecuter.cs 23 <br><br> å¦ä¸€ä¸ªå¤åˆ¶ç²˜è´´é”™è¯¯ã€‚ ä¸ºäº†æ›´æ¸…æ¥šä¸€ç‚¹ï¼Œæˆ‘å°†å…¨ç­è®¨è®ºï¼Œå› ä¸ºå®ƒå¾ˆå°ã€‚ <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SerialDocumentExecuter</span></span> : <span class="hljs-title"><span class="hljs-title">DocumentExecuter</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> IExecutionStrategy ParallelExecutionStrategy = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ParallelExecutionStrategy(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> IExecutionStrategy SerialExecutionStrategy = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SerialExecutionStrategy(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> IExecutionStrategy SubscriptionExecutionStrategy = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SubscriptionExecutionStrategy(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> IExecutionStrategy </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SelectExecutionStrategy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (context.Operation.OperationType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Query: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SerialExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Mutation: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SerialExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Subscription: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SubscriptionExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ....; } } }</code> </pre> <br> åˆ†æäººå‘˜è®¤ä¸ºä¸¤ä¸ªç›¸åŒçš„<i>æ¡ˆä¾‹</i>åˆ†æ”¯å¯ç–‘ã€‚ ç¡®å®ï¼Œè¯¥ç­çº§ä¸­æœ‰3ä¸ªå®ä½“ï¼Œå…¶ä¸­2ä¸ªåœ¨èµ°åŠ¨æ—¶è¿”å›ï¼Œä¸€ä¸ªæ²¡æœ‰ã€‚ å¦‚æœè®¡åˆ’è¿™æ ·åšå¹¶ä¸”æ”¾å¼ƒäº†ç¬¬ä¸‰ä¸ªé€‰é¡¹ï¼Œåˆ™å¯ä»¥é€šè¿‡å°†ä¸¤ä¸ªåˆ†æ”¯ç»„åˆå¦‚ä¸‹æ¥å°†å…¶åˆ é™¤ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (context.Operation.OperationType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Query: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Mutation: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SerialExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Subscription: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SubscriptionExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ....; }</code> </pre> <br> å¦‚æœè¿™æ˜¯å¤åˆ¶ç²˜è´´é”™è¯¯ï¼Œåˆ™éœ€è¦åƒè¿™æ ·æ›´æ­£è¿”å›çš„å­—æ®µï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (context.Operation.OperationType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Query: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ParallelExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Mutation: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SerialExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Subscription: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SubscriptionExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ....; }</code> </pre> <br> åä¹‹äº¦ç„¶ã€‚ æˆ‘ä¸ç†Ÿæ‚‰è¯¥é¡¹ç›®ï¼Œå› æ­¤æ— æ³•å…³è”è¿è¥å’Œç­–ç•¥ç±»å‹çš„åç§°ã€‚ <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (context.Operation.OperationType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Query: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SerialExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Mutation: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ParallelExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OperationType.Subscription: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SubscriptionExecutionStrategy; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ....; }</code> </pre> <br>  <b>PVS-Studioè­¦å‘Š</b> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3080</a>å¯èƒ½å–æ¶ˆç©ºå¼•ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥â€œè¯·æ±‚â€ã€‚  GraphQLMiddleware.cs 148 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HttpContext context....</span></span></span><span class="hljs-function">)</span></span> { .... GraphQLRequest request = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (HttpMethods.IsPost(context.Request.Method)) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (HttpMethods.IsGet(context.Request.Method)) { .... request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GraphQLRequest(); .... } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> queryToExecute = request.Query; .... }</code> </pre> <br> åœ¨ç¬¬ä¸€ä¸ª<i>if</i>å—ä¸­ï¼Œ <i>request</i>å˜é‡åœ¨å‡ ä¸ªåœ°æ–¹ï¼ˆä½†åœ¨æœ‰åµŒå¥—æ¡ä»¶çš„åœ°æ–¹ï¼‰è·å¾—çš„å€¼ä¸æ˜¯<i>null</i> ã€‚ æˆ‘æ²¡æœ‰åˆ—ä¸¾æ‰€æœ‰è¿™äº›æ¡ä»¶ï¼Œå› ä¸ºè¯¥ç¤ºä¾‹å¤ªéº»çƒ¦äº†ã€‚ æ£€æŸ¥<i>IsGet</i>æˆ–<i>IsPost</i>æ–¹æ³•çš„httpç±»å‹çš„ç¬¬ä¸€ä¸ªæ¡ä»¶<i>å°±</i> <i>è¶³å¤Ÿäº†</i> ã€‚  <i>Microsoft.AspNetCore.Http.HttpMethods</i>ç±»å…·æœ‰ä¹ç§ç”¨äºæ£€æŸ¥è¯·æ±‚ç±»å‹çš„é™æ€æ–¹æ³•ã€‚ è¿™æ„å‘³ç€ï¼Œä¾‹å¦‚ï¼Œå¦‚æœ<i>Delete</i>æˆ–<i>Set</i>è¯·æ±‚è¿›å…¥<i>ExecuteAsync</i>æ–¹æ³•ï¼Œåˆ™å°†å¼•å‘<i>NullReferenceException</i> ã€‚ å³ä½¿ç›®å‰æ ¹æœ¬ä¸æ”¯æŒè¿™ç§æ–¹æ³•ï¼Œæœ€å¥½è¿˜æ˜¯è¿›è¡Œä¾‹å¤–æ£€æŸ¥ã€‚ æ¯•ç«Ÿï¼Œå¯¹ç³»ç»Ÿçš„è¦æ±‚å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚ ä»¥ä¸‹éªŒè¯ç¤ºä¾‹ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HttpContext context....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (request == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ....; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> queryToExecute = request.Query; .... }</code> </pre> <br>  <b>PVS-Studioè­¦å‘Š</b> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3080</a>æ–¹æ³•è¿”å›å€¼å¯èƒ½ä¼šç©ºå¼•ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥ï¼šè·å–&lt;ContentPart&gt;ï¼ˆ...ï¼‰ã€‚  ContentPartHandlerCoordinator.cs 190 <br><br> åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œå¤§å¤šæ•°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3080</a>è¯Šæ–­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è§¦å‘å™¨éƒ½å¾ˆ</a>å®¹æ˜“çœ‹åˆ°ã€‚ éœ€è¦æ–¹æ³•å¯¼èˆªï¼Œçªå‡ºæ˜¾ç¤ºç±»å‹ï¼Œä»¤äººé¼“èˆçš„IDEæ°›å›´ã€‚ æˆ‘å°è¯•ä½¿ç¤ºä¾‹å°½å¯èƒ½ç®€çŸ­ï¼Œä»¥ä½¿æ‚¨æ›´è½»æ¾åœ°é˜…è¯»ã€‚ ä½†æ˜¯ï¼Œå¦‚æœè¿™å¯¹æˆ‘æ¥è¯´ä¸å¯è¡Œï¼Œæˆ–è€…æ‚¨æƒ³æ£€æŸ¥è‡ªå·±çš„ç¼–ç¨‹æ°´å¹³å¹¶è‡ªå·±å¼„æ¸…æ¥šï¼Œæˆ‘å»ºè®®æ‚¨çœ‹çœ‹æ­¤è¯Šæ–­å¦‚ä½•åœ¨ä»»ä½•æ‰“å¼€çš„é¡¹ç›®æˆ–æ‚¨è‡ªå·±çš„é¡¹ç›®ä¸­èµ·ä½œç”¨ã€‚ <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadingAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">LoadContentContext context</span></span></span><span class="hljs-function">)</span></span> { .... context.ContentItem.Get&lt;ContentPart&gt;(typePartDefinition.Name) .Weld(fieldName, fieldActivator.CreateInstance()); .... }</code> </pre> <br> åˆ†æä»ªåœ¨è¿™æ¡çº¿ä¸Šå‘èª“ã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹<i>Get</i>æ–¹æ³•<i>ï¼š</i> <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TElement Get&lt;TElement&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> ContentElement contentElement....) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TElement : ContentElement { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (TElement)contentElement.Get(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(TElement), name); }</code> </pre> <br> å®ƒå¯¼è‡´å…¶è¿‡è½½ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹å¥¹ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ContentElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ContentElement contentElement....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elementData = contentElement.Data[name] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> JObject; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elementData == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } .... }</code> </pre> <br> äº‹å®è¯æ˜ï¼Œå¦‚æœåœ¨é€šè¿‡<i>åç§°</i>ç´¢å¼•å™¨ä»<i>Data</i>æ¥æ”¶åˆ°å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ç±»å‹ä¸<i>JObject</i>ä¸å…¼å®¹çš„å®ä½“ï¼Œåˆ™<i>Get</i>æ–¹æ³•å°†è¿”å›<i>null</i> ã€‚ æˆ‘ä¸ä¼šå†’é™©åˆ¤æ–­è¿™ç§å¯èƒ½æ€§ï¼Œå› ä¸ºè¿™äº›ç±»å‹æ¥è‡ª<i>Newtonsoft.Json</i>åº“ï¼Œå¹¶ä¸”æˆ‘å¯¹æ­¤æœ‰ä¸€ç‚¹ç»éªŒã€‚ ä½†æ˜¯å¼€å‘äººå‘˜æ€€ç–‘æ‰€éœ€çš„é¡¹ç›®å¯èƒ½ä¸æ˜¯ã€‚ å› æ­¤ï¼Œå‚è€ƒé˜…è¯»ç»“æœæ—¶ä¸è¦å¿˜è®°è¿™ç§å¯èƒ½æ€§ã€‚ å¦‚æœæˆ‘ä»¬è®¤ä¸ºè¯¥èŠ‚ç‚¹åº”ä¸ºç¬¬ä¸€ä¸ª<i>Getï¼Œ</i>åˆ™ä¼šåœ¨ç¬¬ä¸€ä¸ª<i>Getä¸Š</i>æ·»åŠ å¼‚å¸¸å¼•å‘ï¼Œæˆ–è€…åœ¨å–æ¶ˆå¼•ç”¨ä¹‹å‰è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœä¸å­˜åœ¨è¯¥èŠ‚ç‚¹ä¸ä¼šæ”¹å˜å¸¸è§„é€»è¾‘ï¼ˆä¾‹å¦‚ï¼Œé‡‡ç”¨é»˜è®¤å€¼ï¼‰ã€‚ <br><br> é€‰é¡¹ä¸€ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ContentElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ContentElement contentElement....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elementData = contentElement.Data[name] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> JObject; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elementData == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span>.... } .... }</code> </pre> <br> é€‰é¡¹äºŒï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadingAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">LoadContentContext context</span></span></span><span class="hljs-function">)</span></span> { .... context.ContentItem.Get&lt;ContentPart&gt;(typePartDefinition.Name) ?.Weld(fieldName, fieldActivator.CreateInstance()); .... }</code> </pre> <br>  <b>PVS-Studioè­¦å‘Š</b> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V3080</a>å¯èƒ½å–æ¶ˆç©ºå¼•ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥â€œç»“æœâ€ã€‚  ContentQueryOrchardRazorHelperExtensions.cs 19 <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;IEnumerable&lt;ContentItem&gt;&gt; ContentQueryAsync(....) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> results = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> orchardHelper.QueryAsync(queryName, parameters); .... <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> results) { .... } .... }</code> </pre> <br> ä¸€ä¸ªç›¸å¯¹äºå‰ä¸€ä¸ªä¾‹å­çš„ç›¸å½“ç®€å•çš„ä¾‹å­ã€‚ åˆ†æå™¨è®¤ä¸ºè°ƒç”¨<i>QueryAsync</i>çš„ç»“æœå¯èƒ½æ˜¯ç©ºå¼•ç”¨ã€‚ æ–¹æ³•å¦‚ä¸‹ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IEnumerable&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QueryAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> query = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> queryManager.GetQueryAsync(queryName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (query == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } .... }</code> </pre> <br> è¿™é‡Œ<i>GetQueryAsync</i>æ˜¯ä¸€ä¸ªæ¥å£æ–¹æ³•ï¼Œæ‚¨ä¸èƒ½ç¡®å®šæ¯ä¸ªå®ç°ã€‚ è€Œä¸”ï¼Œåœ¨åŒä¸€é¡¹ç›®ä¸­æœ‰è¿™æ ·çš„é€‰æ‹©ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;Query&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetQueryAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> document = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> GetDocumentAsync(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(document.Queries.TryGetValue(name, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> query)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> query; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br> ç”±äºå¯¹å¤–éƒ¨å‡½æ•°å’Œç¼“å­˜è®¿é—®çš„è°ƒç”¨å¾ˆå¤šï¼Œå› æ­¤å¯¹<i>GetDocumentAsync</i>æ–¹æ³•çš„åˆ†æå˜å¾—å¾ˆå¤æ‚ã€‚ è®©æˆ‘ä»¬è¯¦ç»†è®¨è®ºä¸€ä¸‹å€¼å¾—æ·»åŠ ä¸€å¼ æ”¯ç¥¨çš„äº‹å®ã€‚ è€Œä¸”ï¼Œè¯¥æ–¹æ³•æ˜¯å¼‚æ­¥çš„ã€‚ <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;IEnumerable&lt;ContentItem&gt;&gt; ContentQueryAsync(....) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> results = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> orchardHelper.QueryAsync(queryName, parameters); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(results == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ....; .... <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> results) { .... } .... }</code> </pre> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/41f/fb1/e08/41ffb1e086795cd7ba94b22ed53ce33c.png" alt="å›¾ç‰‡14"></div><br><br>  <b>ç»“è®º</b> <br><br> æˆ‘ä¸ç¦æ³¨æ„åˆ°ä»£ç çš„é«˜è´¨é‡ï¼ æ˜¯çš„ï¼Œåœ¨æœ¬æ–‡ä¸­æˆ‘æ²¡æœ‰æåˆ°å…¶ä»–ç¼ºç‚¹ï¼Œä½†æ˜¯ä»ç„¶è€ƒè™‘äº†æœ€ä¸¥é‡çš„ç¼ºç‚¹ã€‚ å½“ç„¶ï¼Œè¿™å¹¶ä¸æ„å‘³ç€æ¯ä¸‰å¹´æ£€æŸ¥ä¸€æ¬¡å°±è¶³å¤Ÿäº†ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®šæœŸ</a>ä½¿ç”¨é™æ€åˆ†æä»ªå¯è·å¾—æœ€å¤§çš„å¥½å¤„ï¼Œå› ä¸ºè¿™ç§æ–¹æ³•ä½¿æ‚¨å¯ä»¥åœ¨æœ€å°çš„ç¼–è¾‘æˆæœ¬å’Œå¤æ‚æ€§çš„æƒ…å†µä¸‹å°½æ—©å‘ç°å¹¶ä¿®å¤é—®é¢˜ã€‚ <br><br> å°½ç®¡ä¸€æ¬¡æ€§æ£€æŸ¥æ•ˆæœä¸ä½³ï¼Œä½†æˆ‘è¿˜æ˜¯å»ºè®®æ‚¨ä¸‹è½½å¹¶å°è¯•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PVS-Studio-</a>å¦‚æœæ‚¨èƒ½æ‰¾åˆ°æœ‰è¶£çš„ä¸œè¥¿æ€ä¹ˆåŠï¼Ÿ <br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br> å¦‚æœæ‚¨æƒ³ä¸è®²è‹±è¯­çš„è¯»è€…åˆ†äº«æœ¬æ–‡ï¼Œè¯·ä½¿ç”¨ç¿»è¯‘é“¾æ¥ï¼šAlexander Senichkinã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‰«æOrchard CMSçš„ä»£ç ä¸­çš„é”™è¯¯</a> ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN472362/">https://habr.com/ru/post/zh-CN472362/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN472352/index.html">TechnoTextï¼Œç¬¬2é›†ã€‚ æˆ‘ä»¬è®²è¿°å“ˆå‹ƒï¼ˆHabrï¼‰çš„ä½œè€…å¦‚ä½•ç”Ÿæ´»å’Œå·¥ä½œåœ¨æ–‡ç« ä¸Š</a></li>
<li><a href="../zh-CN472354/index.html">æ¤…å­å’Œæ˜¾ç¤ºå™¨ä¹‹é—´æ˜¯ç³»ç»Ÿä¸­çš„ä¸»è¦æ¼æ´ï¼šVAPäººå‘˜</a></li>
<li><a href="../zh-CN472356/index.html">Microsoft vs IBMï¼šJavaæ”¯æŒæ–¹é¢çš„é‡å¤§å˜åŒ–</a></li>
<li><a href="../zh-CN472358/index.html">10æœˆ30æ—¥17:00ç½‘ç»œç ”è®¨ä¼šâ€œåœ¨ä¸€ä¸ªå°æ—¶å†…åœ¨CROCäº‘ä¸­éƒ¨ç½²Kubernetesé›†ç¾¤â€</a></li>
<li><a href="../zh-CN472360/index.html">æ‰«æOrchard CMSçš„ä»£ç ä»¥æŸ¥æ‰¾é”™è¯¯</a></li>
<li><a href="../zh-CN472364/index.html">PostgreSQLå¹¶è®°å½•æ¯ä¸ªç‰¹å®šè¿æ¥çš„ä¸€è‡´æ€§è®¾ç½®</a></li>
<li><a href="../zh-CN472366/index.html">Factorioä¸­çš„æ–°è·¯å¾„æŸ¥æ‰¾å™¨ç®—æ³•</a></li>
<li><a href="../zh-CN472368/index.html">è¯­éŸ³é’“é±¼ï¼šæˆ‘ä»¬åˆ†ææ”»å‡»æ–¹æ³•å’Œé’ˆå¯¹å®ƒä»¬çš„é˜²æŠ¤æ–¹æ³•</a></li>
<li><a href="../zh-CN472372/index.html">Androidè‡ªåŠ¨åŒ– è¶…çº§è½»æ¾çš„æŒ‡å—æ¥åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªEspressoæµ‹è¯•</a></li>
<li><a href="../zh-CN472374/index.html">ä¸ºä»€ä¹ˆæˆ‘ä»¬å°†æœåŠ¡å™¨ç§»è‡³å†°å²›</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>