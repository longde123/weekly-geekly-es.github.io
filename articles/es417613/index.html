<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ôüèª üå°Ô∏è ü•Ç Ceph como almacenamiento conectable: 5 ideas pr√°cticas de un gran proyecto üé≤ ‚úåüèæ üîû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dado el crecimiento de los datos, hoy en d√≠a se habla cada vez m√°s sobre almacenes de datos distribuidos y definidos por software, y tradicionalmente ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ceph como almacenamiento conectable: 5 ideas pr√°cticas de un gran proyecto</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redsys/blog/417613/"> Dado el crecimiento de los datos, hoy en d√≠a se habla cada vez m√°s sobre almacenes de datos distribuidos y definidos por software, y tradicionalmente se presta mucha atenci√≥n a la plataforma abierta de Ceph.  Hoy queremos hablar sobre las conclusiones a las que llegamos en el proceso de implementaci√≥n de un proyecto de almacenamiento de datos para un gran departamento ruso. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/jq/pm/iq/jqpmiqd9eymyfbnkqa8jjzk3kv4.png"><br><br>  Cuando se trata de almacenar datos de varios tipos, por supuesto, un almac√©n de datos distribuido viene inmediatamente a la mente.  Te√≥ricamente, existen muchas ventajas para tales soluciones: puede usar cualquier disco, el sistema funciona en cualquier servidor (incluso los muy antiguos), pr√°cticamente no hay l√≠mites para el escalado.  Es por eso que la introducci√≥n de dicho sistema se lanz√≥ hace varios a√±os en uno de los departamentos rusos m√°s grandes con unidades no solo en todas las regiones de la Federaci√≥n Rusa, sino incluso en todas las ciudades m√°s o menos grandes. <br><br>  Despu√©s de analizar las soluciones disponibles, se hizo la elecci√≥n a favor de Ceph.  Hubo varias razones para esta decisi√≥n: <br>  ‚Ä¢ Ceph es un producto bastante maduro, y hoy hay instalaciones de Ceph en petabytes de informaci√≥n. <br>  ‚Ä¢ Una gran comunidad participa en el desarrollo (incluidos nosotros), lo que significa que aparecer√°n nuevas funciones y mejoras para el almacenamiento. <br>  ‚Ä¢ Ceph ya tiene una buena API con soporte para varios lenguajes de programaci√≥n.  Esto era importante porque el producto obviamente necesitaba ser refinado para cumplir con los requisitos y expectativas del cliente. <br>  ‚Ä¢ Las licencias no cuestan nada.  No, por supuesto, el sistema necesita un mayor desarrollo, pero en el caso de las tareas espec√≠ficas del cliente, habr√≠a sido necesario llevar a cabo un desarrollo adicional de todos modos, entonces, ¬øpor qu√© no hacerlo sobre la base de un producto gratuito? <br>  ‚Ä¢ Finalmente, sanciones.  Las empresas estatales deber√≠an estar aseguradas de que la pr√≥xima vez que alguien se les ocurra la idea de imponerles restricciones y, por lo tanto, depender de un producto extranjero y especialmente estadounidense es peligroso.  Otra cosa, c√≥digo abierto. <br><br>  <b>Hallazgos pr√°cticos</b> <br>  La introducci√≥n de Ceph ocurri√≥ gradualmente durante varios meses.  Primero, el almacenamiento se lanz√≥ en la regi√≥n central, y luego replicamos la soluci√≥n conectando centros de datos regionales.  Con la llegada de cada nuevo nodo de red, el rendimiento del almacenamiento aument√≥, a pesar del aumento en los flujos de datos dentro de √©l, asegurando la transferencia de informaci√≥n de una regi√≥n a otra. <br>  Una caracter√≠stica del trabajo de cualquier organizaci√≥n grande es la necesidad de almacenar informaci√≥n heterog√©nea, que a menudo es un archivo binario.  Como muestra la pr√°ctica, los empleados simplemente no tienen tiempo para averiguar qu√© tipo de archivos son, clasificarlos y procesarlos de manera oportuna: la informaci√≥n se acumula m√°s r√°pidamente.  Y para no perder datos potencialmente importantes para actividades operativas, es necesario organizar su almacenamiento competente.  Por ejemplo, basado en almacenamiento distribuido. <br>  Y en el proceso de implementaci√≥n de dicho proyecto, sacamos varias conclusiones sobre el uso de Ceph: <br><br>  <b>Conclusi√≥n 1: Ceph reemplaza completamente todas las soluciones de respaldo</b> <br>  Como ha demostrado la pr√°ctica, la copia de seguridad de la mayor√≠a de la informaci√≥n no estructurada no se realiza en absoluto, ya que es extremadamente dif√≠cil implementarla.  Cuando se implementa Ceph, la copia de seguridad se obtiene como si "en forma de bonificaci√≥n".  Al configurar, simplemente establecemos par√°metros de replicaci√≥n: la cantidad de copias y la ubicaci√≥n de su ubicaci√≥n.  Si el cliente tiene varios centros de datos, se obtiene una configuraci√≥n desastrosa que simplemente no requiere copias de seguridad adicionales si hay 3-4 copias de datos en diferentes discos y servidores.  Tal sistema funciona mejor que cualquier soluci√≥n de hardware, al menos por el momento estamos hablando de grandes cantidades de datos y sistemas distribuidos geogr√°ficamente. <br><br>  <b>Conclusi√≥n 2: con grandes instalaciones, el rendimiento de Ceph es 99% igual al rendimiento de la red.</b> <br>  Cuando transferimos datos de una base de datos PostgreSQL (m√°s sobre eso a continuaci√≥n) a un almacenamiento basado en Ceph, la velocidad de carga en la mayor√≠a de los casos fue igual al ancho de banda de la red de transmisi√≥n de datos.  Si en algunos casos este no fuera el caso, la reconfiguraci√≥n de Ceph permiti√≥ alcanzar esta velocidad.  Por supuesto, no estamos hablando de conexiones de 100 Gb / s, pero con canales de datos est√°ndar para infraestructuras distribuidas geogr√°ficamente, es bastante posible lograr un rendimiento de punto de punto Ceph de 10 Mbit / s, 100 Mbit / so 1 Gbit / s.  Es suficiente distribuir correctamente los discos y configurar la agrupaci√≥n de informaci√≥n. <br><br>  <b>Conclusi√≥n 3: Lo principal es configurar correctamente Ceph teniendo en cuenta las peculiaridades de la empresa.</b> <br>  Hablando de configuraciones, la mayor parte de la experiencia en el trabajo de Ceph se requiere en la etapa de configuraci√≥n del sistema.  Adem√°s de los par√°metros de replicaci√≥n, la soluci√≥n tambi√©n le permite establecer niveles de acceso, reglas de retenci√≥n de datos, etc.  Por ejemplo, si tenemos mini centros de computaci√≥n en toda Rusia, podemos organizar el acceso r√°pido a documentos y archivos creados en nuestra regi√≥n, as√≠ como el acceso a todos los documentos corporativos desde cualquier lugar.  Este √∫ltimo funcionar√° con retrasos un poco m√°s largos y menor velocidad, pero tal "concentraci√≥n" de informaci√≥n en el lugar de propiedad crea condiciones √≥ptimas para la organizaci√≥n. <br><br>  <b>Conclusi√≥n 4: cuando ya est√° configurado, cualquier administrador de Linux puede administrar Ceph</b> <br>  Quiz√°s una de las caracter√≠sticas m√°s agradables de Ceph es que el sistema funciona sin una participaci√≥n humana innecesaria cuando ya est√° configurado.  Es decir, en los mini centros de datos remotos es suficiente contener solo al administrador de Linux, ya que el soporte para el pr√≥ximo segmento de Ceph no requiere ning√∫n conocimiento adicional. <br><br>  <b>Conclusi√≥n 5: Complementar Ceph con un sistema de indexaci√≥n externo hace que el almacenamiento sea conveniente para la b√∫squeda contextual</b> <br>  Como sabes, dentro de Ceph no hay ning√∫n √≠ndice que pueda usarse para buscar por contexto.  Por lo tanto, cuando se ingresa un objeto en el almacenamiento, es posible guardar los metadatos que sirven como √≠ndice.  Su volumen es bastante peque√±o y, por lo tanto, un DBMS relacional regular puede hacer frente f√°cilmente a ellos.  Por supuesto, este es un sistema adicional, pero este enfoque le permite encontrar r√°pidamente informaci√≥n por contexto entre los enormes vol√∫menes de datos no estructurados. <br><br><img src="https://habrastorage.org/webt/mm/fi/yl/mmfiylk06uevnxtcso-fkiak0a8.png"><br><br>  <b>Algunas palabras sobre transferencia de datos</b> <br>  Un proyecto grande involucra muchas etapas, pero quiz√°s lo m√°s interesante para nosotros fue el proceso de transferir grandes cantidades de datos de PostgreSQL a un nuevo repositorio.  Despu√©s de lanzar Ceph, surgi√≥ la tarea de migrar datos de m√∫ltiples bases de datos sin detener los servicios y los procesos comerciales y garantizar la integridad de la informaci√≥n. <br>  Para hacer esto, tuvimos que contribuir al desarrollo del proyecto Ceph Open Source y crear el m√≥dulo de migraci√≥n pg_rbytea, cuyo c√≥digo fuente se puede encontrar en el enlace ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/val5244/pg_rbytea</a> ).  La esencia de la soluci√≥n era transferir simult√°neamente datos de la base de datos especificada al repositorio de Ceph.  El m√≥dulo desarrollado le permite migrar datos instant√°neamente sin detener la base de datos, utilizando la abstracci√≥n del almacenamiento de objetos Rados, cuyo soporte se implementa en Ceph a nivel nativo.  Por cierto, hicimos un informe sobre esto en PG Conf a principios de 2018 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://pgconf.ru/2018/107082</a> ). <br>  En la primera etapa, varios datos binarios necesarios para el trabajo funcional de los departamentos del departamento se trasladaron al repositorio.  De hecho, todos esos archivos y objetos que no tienen claro c√≥mo almacenarlos debido a su enorme volumen total y estructura difusa.  A continuaci√≥n, se planea transferir diversos contenidos multimedia a Ceph, almacenando los documentos originales que se crean antes del reconocimiento y los archivos adjuntos de las cartas corporativas. <br>  Para que todo esto funcione sobre el almacenamiento, se desarrollaron servicios RESTful que permitieron usar Ceph para la integraci√≥n en los sistemas del cliente.  Una vez m√°s, la presencia de una API conveniente jug√≥ un papel importante, que le permite crear un servicio de complemento para varios sistemas de informaci√≥n.  Por lo tanto, Ceph se ha convertido en el repositorio principal, reclamando cada vez m√°s vol√∫menes y tipos de informaci√≥n dentro de la organizaci√≥n. <br><br>  <b>Conclusi√≥n</b> <br>  Existen varios almacenes de datos distribuidos en el mercado, incluidas soluciones comerciales y otros productos de c√≥digo abierto.  Algunos usan optimizaciones especiales, otros trabajan con compresi√≥n o usan Erasure Coding.  Sin embargo, en la pr√°ctica, est√°bamos convencidos de que Ceph es ideal para entornos verdaderamente distribuidos y grandes almacenamientos, porque en este caso el rendimiento del sistema est√° limitado solo por la velocidad de los canales de comunicaci√≥n, y usted ahorra mucho dinero en licencias por la cantidad de servidores o por la cantidad de datos (dependiendo de con qu√© producto comparar).  Un sistema Ceph bien ajustado le permite garantizar un rendimiento √≥ptimo con una supervisi√≥n m√≠nima por parte de los administradores locales en el campo.  Y esta es una gran ventaja si introduce una implementaci√≥n distribuida geogr√°ficamente. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es417613/">https://habr.com/ru/post/es417613/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es417601/index.html">Elige un servidor. ¬øQu√© buscar? Lista de verificaci√≥n</a></li>
<li><a href="../es417603/index.html">Anuncio de un mitap m√≥vil: ¬øQu√© hacer cuando la aplicaci√≥n se ha vuelto grande?</a></li>
<li><a href="../es417605/index.html">Conceptos b√°sicos de modelado 3D para impresi√≥n 3D</a></li>
<li><a href="../es417607/index.html">Las pruebas A / B no funcionan. Comprueba lo que est√°s haciendo mal</a></li>
<li><a href="../es417609/index.html">Especializaci√≥n en programaci√≥n deportiva en el cursor</a></li>
<li><a href="../es417615/index.html">Confesiones de Disk Cracker para Apple II: 4am Secrets</a></li>
<li><a href="../es417617/index.html">Cassandra por almacenar metadatos: √©xitos y fracasos</a></li>
<li><a href="../es417619/index.html">Win32 / Glupteba ya no est√° asociado con la operaci√≥n Windigo</a></li>
<li><a href="../es417621/index.html">¬øQu√© pas√≥ cuando desciframos la exhibici√≥n?</a></li>
<li><a href="../es417627/index.html">Hyper CRM o Mini ERP? Negocio en mal estado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>