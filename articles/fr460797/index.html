<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöä ‚öõÔ∏è üïâÔ∏è D√©veloppement JavaScript responsable Partie 2 üò± üèä üî§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En avril de cette ann√©e, nous avons publi√© une traduction du premier mat√©riel d'une s√©rie consacr√©e √† une approche responsable du d√©veloppement JavaSc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©veloppement JavaScript responsable Partie 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/460797/">  En avril de cette ann√©e, nous avons publi√© une traduction du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">premier mat√©riel</a> d'une s√©rie consacr√©e √† une approche responsable du d√©veloppement JavaScript.  L√†, l'auteur a r√©fl√©chi sur les technologies Web modernes et leur utilisation rationnelle.  Nous vous proposons maintenant une traduction du deuxi√®me article de cette s√©rie.  Il est consacr√© √† quelques d√©tails techniques concernant la conception de projets web. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/fu/0j/zo/fu0jzokbsmkz97fxen8dedmtg9e.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Avoir une id√©e</font> </h2><br>  Vous et votre √©quipe avez promu avec enthousiasme l'id√©e d'une refonte compl√®te du site Web vieillissant de l'entreprise.  Vos demandes ont atteint la direction, sont m√™me venues aux yeux des plus hauts dirigeants.  On vous a donn√© un feu vert.  Votre √©quipe s'est mise √† travailler avec enthousiasme, attirant des designers, des r√©dacteurs et d'autres sp√©cialistes.  Bient√¥t, vous avez d√©ploy√© un nouveau code. <br><br>  Les travaux ont commenc√© innocemment.  La commande d' <code>npm install</code> est ici, la commande d' <code>npm install</code> est l√†.  D√®s que vous avez regard√© autour de vous, les d√©pendances de production s'√©taient d√©j√† √©tablies comme si le d√©veloppement du projet √©tait un alcool sauvage, et c'est vous qui ne vous souciez pas du tout de ce qui sera demain matin. <br><br>  Alors tu as commenc√©. <br><br>  Mais, contrairement aux cons√©quences de la f√™te la plus folle, la chose terrible n'a pas commenc√© le lendemain matin.  Malheureusement - pas le lendemain matin.  Le calcul est venu en quelques mois.  Elle a pris la forme d√©sagr√©able de naus√©es l√©g√®res et de maux de t√™te pour les propri√©taires d'entreprise et les cadres interm√©diaires qui se demandaient pourquoi, apr√®s le lancement du nouveau site, les conversions et les revenus avaient chut√©.  Puis la catastrophe a pris de l'ampleur.  Cela s'est produit lorsque le directeur technique est revenu du week-end, qu'il a pass√© quelque part en dehors de la ville.  Il se demandait pourquoi le site Web de l'entreprise se chargeait si lentement (voire pas du tout) sur son t√©l√©phone. <br><br>  Avant, c'√©tait bon pour tout le monde.  Maintenant, d'autres temps sombres sont venus.  Rencontrez votre premi√®re gueule de bois apr√®s avoir consomm√© une grande dose de JavaScript. <br><br><h2>  <font color="#3AC1EF">Ce n'est pas de ta faute.</font> </h2><br>  Pendant que vous tentiez de faire face √† une gueule de bois infernale, des mots comme ¬´Je vous l'ai dit¬ª vous sembleraient une r√©primande bien m√©rit√©e.  Et si vous pouviez vous battre √† ce moment-l√†, ils pourraient servir d‚Äôoccasion √† un combat. <br><br>  En ce qui concerne les cons√©quences d'une utilisation imprudente de JavaScript, vous pouvez bl√¢mer tout et tout le monde.  Mais rechercher les coupables est une perte de temps.  L'appareil Web moderne lui-m√™me oblige les entreprises √† r√©soudre les probl√®mes plus rapidement que leurs concurrents.  Une telle pression signifie que nous, cherchant √† augmenter notre productivit√© autant que possible, sommes susceptibles de saisir quoi que ce soit.  Cela signifie que nous, avec un degr√© de probabilit√© √©lev√© (bien que cela ne puisse pas √™tre qualifi√© d'in√©vitable), cr√©erons des applications dans lesquelles il y aura de nombreux exc√®s et, tr√®s probablement, nous utiliserons des mod√®les qui nuisent aux performances et √† la disponibilit√© des applications. <br><br>  Le d√©veloppement Web n'est pas une t√¢che facile.  C'est un long travail.  Il est rarement bien ex√©cut√© du premier coup.  La meilleure chose √† propos de ce travail, cependant, est que nous ne devons pas tout faire parfaitement au tout d√©but.  Nous pouvons apporter des am√©liorations aux projets apr√®s leur lancement, et, en fait, ce mat√©riel y est consacr√©, le deuxi√®me d'une s√©rie d'articles sur une approche responsable du d√©veloppement JS.  La perfection est un objectif tr√®s √©loign√©.  En attendant, traitons de la gueule de bois JavaScript en am√©liorant, pour ainsi dire, les <i>scripts</i> <br>  sur le site dans un avenir proche. <br><br><h2>  <font color="#3AC1EF">Nous traitons des probl√®mes communs</font> </h2><br>  Cela peut sembler une approche m√©canique pour r√©soudre des probl√®mes, mais commencez par parcourir une liste de probl√®mes typiques et les moyens de les r√©soudre.  Dans les grandes √©quipes de d√©veloppement, ces choses sont souvent oubli√©es.  Cela est particuli√®rement vrai pour les √©quipes qui travaillent avec plusieurs r√©f√©rentiels ou n'utilisent pas de mod√®le optimis√© pour leurs projets. <br><br><h3>  <font color="#3AC1EF">‚ñç Appliquer l'algorithme de tremblement d'arbre</font> </h3><br>  Tout d'abord, v√©rifiez si vos outils sont configur√©s pour impl√©menter l'algorithme d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">agitation d'arbre</a> .  Si vous n'avez jamais rencontr√© ce concept auparavant, jetez un ≈ìil √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mon</a> mat√©riel √©crit l'an dernier.  Si nous expliquons le fonctionnement de cet algorithme en un mot, nous pouvons dire qu'en raison de son utilisation dans les assemblages de production de l'application, n'incluent pas les packages qui, bien qu'import√©s dans le projet, n'y sont pas utilis√©s. <br><br>  La mise en ≈ìuvre de l'algorithme d'agitation d'arbre est une fonctionnalit√© standard des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bundlers</a> modernes tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">webpack</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rollup</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Parcel</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Grunt</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gulp</a> sont des gestionnaires de t√¢ches.  Ils ne font pas √ßa.  Contrairement au bundler, le gestionnaire de t√¢ches ne cr√©e pas de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">graphique de d√©pendance</a> .  Le gestionnaire de t√¢ches est engag√©, √† l'aide des plug-ins n√©cessaires, effectuant des manipulations distinctes sur les fichiers qui lui sont transf√©r√©s.  Les fonctionnalit√©s des gestionnaires de t√¢ches peuvent √™tre √©tendues √† l'aide de plugins, ce qui leur permet de traiter JavaScript √† l'aide de bundlers.  Si l'extension des capacit√©s du gestionnaire de t√¢ches dans cette direction semble √™tre un probl√®me, vous devez probablement v√©rifier manuellement la base de code et en supprimer le code inutilis√©. <br><br>  Pour que l'algorithme d'agitation d'arbre fonctionne efficacement, les conditions suivantes doivent √™tre remplies: <br><br><ol><li>  Le code d'application et les packages install√©s doivent √™tre pr√©sent√©s sous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">forme de modules ES6</a> .  L'utilisation de l'algorithme d'agitation d'arbre pour les modules <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CommonJS</a> est presque impossible. </li><li>  Votre bundler ne doit pas transformer les modules ES6 en modules d'un autre format lors de la construction du projet.  Si cela se produit dans la cha√Æne d'outils qui utilise Babel, alors <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@ Babel / present-env</a> doit avoir les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modules: false</a> setting.  Cela entra√Ænera la conversion du code ES6 en code qui utilise CommonJS. </li></ol><br>  Si soudainement, lors de la construction de votre projet, l'algorithme de tremblement d'arbre n'est pas appliqu√©, l'inclusion de ce m√©canisme peut am√©liorer la situation.  Bien entendu, l'efficacit√© de cet algorithme varie d'un projet √† l'autre.  De plus, la possibilit√© de son utilisation d√©pend si les modules import√©s ont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des effets secondaires</a> .  Cela peut affecter la capacit√© du bundler √† se d√©barrasser de l'inclusion de modules import√©s inutiles dans l'assemblage. <br><br><h3>  <font color="#3AC1EF">‚ñçDivisez le code en parties</font> </h3><br>  Il est tr√®s probable que vous utilisez d√©j√† une forme de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©paration</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code</a> .  Cependant, vous devez v√©rifier comment cela se fait.  Quelle que soit la fa√ßon dont vous s√©parez le code, je veux vous proposer de vous poser les deux questions tr√®s pr√©cieuses suivantes: <br><br><ol><li>  Supprimez-vous le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code en double</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des points d'entr√©e</a> ? </li><li>  Chargez-vous paresseusement tout ce qui peut √™tre charg√© de cette mani√®re avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des importations dynamiques</a> ? </li></ol><br>  Ces probl√®mes sont importants car la r√©duction de la quantit√© de code redondant est un √©l√©ment de performance crucial.  Le chargement tardif du code am√©liore √©galement les performances en r√©duisant la quantit√© de code JavaScript qui fait partie de la page et se charge lors du chargement.  Si nous parlons de l'analyse du projet pour la pr√©sence de code redondant, alors pour cela, vous pouvez utiliser une sorte d'outil comme le Bundle Buddy.  Si votre projet a un probl√®me avec cela, cet outil vous en informera. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37f/e95/0f3/37fe950f3567d6e53c77969632713df8.png"></div><br>  <i><font color="#999999">L'outil Bundle Buddy peut v√©rifier les informations de compilation du webpack et d√©couvrir combien du m√™me code est utilis√© dans vos bundles</font></i> <br><br>  Si nous parlons de chargement paresseux de mat√©riaux, il peut √™tre difficile de trouver o√π chercher des opportunit√©s pour appliquer cette optimisation.  Lorsque je recherche un projet existant pour la possibilit√© d'utiliser le chargement paresseux, je recherche dans la base de code les endroits qui impliquent des interactions des utilisateurs avec le code.  Il peut s'agir, par exemple, de gestionnaires d'√©v√©nements de souris ou de clavier, ainsi que d'autres √©l√©ments similaires.  Tout code qui n√©cessite une action utilisateur pour s'ex√©cuter est un bon candidat pour lui appliquer la commande <code>import()</code> dynamique <code>import()</code> . <br><br>  Bien s√ªr, le chargement de scripts √† la demande comporte un risque de retards notables dans le passage du syst√®me en mode interactif.  En effet, avant que le programme puisse interagir avec l'utilisateur de mani√®re interactive, vous devez t√©l√©charger le script appropri√©.  Si la quantit√© de donn√©es transf√©r√©es ne vous d√©range pas, envisagez d'utiliser l'indicateur de ressource <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rel = prefetch</a> pour charger ces scripts de faible priorit√©.  Ces ressources ne rivaliseront pas pour la bande passante avec les ressources critiques.  Si le navigateur de l'utilisateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prend en charge</a> <code>rel=prefetch</code> , l'utilisation de cette info-bulle ne sera que b√©n√©fique.  Sinon, rien de mauvais ne se produira, car les navigateurs ignorent simplement le balisage qu'ils ne comprennent pas. <br><br><h3>  <font color="#3AC1EF">‚ñçUtilisez l'option webpack externals pour marquer les ressources situ√©es sur des serveurs √©trangers</font> </h3><br>  Id√©alement, vous devez h√©berger autant de d√©pendances que possible de votre site sur vos propres serveurs.  Si, pour une raison quelconque, vous devez, sans options, t√©l√©charger des d√©pendances √† partir des serveurs d'autres personnes - placez-les dans le bloc <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">externe</a> dans les param√®tres du webpack.  Si cela n'est pas fait, cela peut signifier que les visiteurs de votre site t√©l√©chargeront √† la fois le code que vous h√©bergez et le m√™me code √† partir des serveurs d'autres personnes. <br><br>  Jetez un ≈ìil √† une situation hypoth√©tique dans laquelle quelque chose comme cela pourrait nuire √† votre ressource.  Supposons que votre site t√©l√©charge la biblioth√®que Lodash √† partir d'une ressource CDN publique.  Vous avez √©galement install√© Lodash dans le projet √† des fins de d√©veloppement local.  Cependant, si vous ne sp√©cifiez pas dans les param√®tres du webpack que Lodash est une d√©pendance externe, votre code de production chargera la biblioth√®que √† partir du CDN, mais en m√™me temps, il sera inclus dans le bundle h√©berg√© sur votre serveur. <br><br>  Si vous connaissez bien les bundlers, alors tout cela peut vous sembler des v√©rit√©s banales.  Mais j'ai vu comment ces choses ne font pas attention.  Par cons√©quent, ne prenez pas le temps de rev√©rifier votre projet pour les probl√®mes ci-dessus. <br><br>  Si vous ne jugez pas n√©cessaire d'h√©berger vous-m√™me vos d√©pendances cr√©√©es par des d√©veloppeurs tiers, alors envisagez d'utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dns-prefetch</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">preconnect</a> , ou peut-√™tre m√™me de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pr√©charger des</a> indices avec eux.  Cela peut r√©duire le score <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TTI</a> (Time To Interactive, temps du site √† la premi√®re interactivit√©).  Et si des capacit√©s JavaScript sont requises pour afficher le contenu du site, alors l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">indice de vitesse</a> du site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">est √©galement</a> n√©cessaire. <br><br><h2>  <font color="#3AC1EF">Biblioth√®ques alternatives plus petites et frais g√©n√©raux r√©duits sur les syst√®mes utilisateur</font> </h2><br>  Ce qu'on appelle ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Userland JavaScript</a> ¬ª (biblioth√®ques JS d√©velopp√©es par l'utilisateur) semble √™tre un √©norme magasin de bonbons obsc√®ne.  Toute cette magnificence et cette vari√©t√© open source nous inspirent, les d√©veloppeurs, avec admiration.  Les cadres et les biblioth√®ques nous permettent d'√©tendre nos applications, en les √©quipant rapidement de fonctionnalit√©s qui aident √† r√©soudre une vari√©t√© de probl√®mes.  Si nous devions impl√©menter nous-m√™mes la m√™me fonctionnalit√©, cela prendrait beaucoup de temps et d'√©nergie. <br><br>  Bien que je pr√©conise personnellement une minimisation agressive de l'utilisation des frameworks clients et des biblioth√®ques dans mes projets, je ne peux que reconna√Ætre leur √©norme valeur et utilit√©.  Mais, malgr√© cela, lorsqu'il s'agit d'installer de nouvelles d√©pendances dans le projet, nous devons traiter chacune d'elles avec beaucoup de suspicion.  Si nous avons d√©j√† cr√©√© et lanc√© quelque chose, dont le fonctionnement d√©pend de nombreuses d√©pendances install√©es, cela signifie que nous supportons la charge suppl√©mentaire sur le syst√®me que tout cela cr√©e.  Il est probable que seuls les d√©veloppeurs de packages peuvent r√©soudre ce probl√®me en optimisant leur d√©veloppement.  En est-il ainsi? <br><br>  Peut-√™tre en est-il ainsi, mais peut-√™tre pas.  Cela d√©pend des d√©pendances utilis√©es.  Par exemple, React est une biblioth√®que extr√™mement populaire.  Mais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Preact</a> est une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tr√®s petite</a> alternative √† React, qui donne au d√©veloppeur presque les m√™mes API et reste compatible avec de nombreux modules compl√©mentaires React.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Luxon</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">date-fns</a> sont des alternatives √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">moment.js</a> , beaucoup plus compact que cette biblioth√®que, qui n'est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas si petite</a> . <br><br>  Dans des biblioth√®ques comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lodash,</a> vous pouvez trouver de nombreuses m√©thodes utiles.  Mais certains d'entre eux sont faciles √† remplacer par des m√©thodes ES6 standard.  Par exemple, la m√©thode <a href="">compacte</a> Lodash peut √™tre remplac√©e par la m√©thode des matrices de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">filtres</a> standard.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">De nombreuses</a> autres m√©thodes Lodash peuvent √©galement √™tre remplac√©es en toute s√©curit√© par des m√©thodes standard.  L'avantage de ce remplacement est que nous obtenons les m√™mes fonctionnalit√©s que l'utilisation de la biblioth√®que, mais que nous nous d√©barrassons d'une d√©pendance assez importante. <br><br>  Quoi que vous utilisiez, l'id√©e g√©n√©rale reste la m√™me: demandez si votre choix a des alternatives plus compactes.  D√©couvrez si vous pouvez r√©soudre les m√™mes probl√®mes avec des outils de langage standard.  Peut-√™tre serez-vous agr√©ablement surpris par le peu que vous avez √† faire des efforts pour r√©duire s√©rieusement la taille de l'application et la quantit√© de charge inutile qu'elle exerce sur les syst√®mes utilisateur. <br><br><h2>  <font color="#3AC1EF">Utiliser des technologies de chargement diff√©rentiel de scripts</font> </h2><br>  Il y a de fortes chances que Babel soit dans votre cha√Æne d'outils.  Cet outil est utilis√© pour transformer le code source compatible ES6 en code que les navigateurs h√©rit√©s peuvent ex√©cuter.  Cela signifie-t-il que nous sommes condamn√©s √† offrir d'√©normes offres, m√™me aux navigateurs qui n'en ont pas besoin, jusqu'√† ce que tous les anciens navigateurs disparaissent?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bien s√ªr que non</a> !  Le chargement diff√©rentiel des ressources permet de contourner ce probl√®me en cr√©ant deux assemblys diff√©rents bas√©s sur le code ES6: <br><br><ul><li>  Le premier assemblage comprend toutes les conversions de code et le polyfill requis pour que votre site fonctionne dans les navigateurs h√©rit√©s.  Vous offrez probablement maintenant aux clients cet assemblage particulier. </li><li>  Le deuxi√®me assemblage contient un minimum de conversions de code et de polyfill, ou s'en passe du tout.  Il est con√ßu pour les navigateurs modernes.  Il s'agit d'un assemblage que vous pourriez ne pas avoir.  Du moins pas encore. </li></ul><br>  Pour utiliser la technologie de chargement diff√©rentiel des assemblages, il faut travailler un peu.  Je n'entrerai pas dans les d√©tails ici - je donnerai un meilleur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien</a> vers mon mat√©riel, qui discute d'une des fa√ßons de mettre en ≈ìuvre cette technologie.  L'essence de tout cela est que vous pouvez modifier la configuration de votre build afin que lors de la construction du projet, une version suppl√©mentaire du bundle JS de votre site soit cr√©√©e.  Ce pack suppl√©mentaire sera plus petit que le pack principal.  Il sera destin√© uniquement aux navigateurs modernes.  La meilleure partie est que cette approche vous permet d‚Äôoptimiser la taille du bundle et en m√™me temps de ne rien sacrifier aux capacit√©s du projet.  Selon le code de l'application, les √©conomies sur la taille du bundle peuvent √™tre assez importantes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58a/fa7/803/58afa780391bbe685486a4a55f99b76b.jpg"></div><br>  <i><font color="#999999">Analyse des bundles pour les anciens navigateurs (√† gauche) et des bundles pour les nouveaux navigateurs (√† droite).</font></i>  <i><font color="#999999">L'√©tude de faisceaux a √©t√© r√©alis√©e √† l'aide de webpack-bundle-analyzer.</font></i>  <i><font color="#999999"><a href="">Voici la</a> version pleine grandeur de cette image.</font></i> <br><br>  Il est plus facile de donner diff√©rents packs √† diff√©rents navigateurs en utilisant l'astuce suivante.  Cela fonctionne bien dans les navigateurs modernes: <br><br><pre> <code class="javascript hljs">&lt;!--     : --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/js/app.mjs"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;!--     : --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">nomodule</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/js/app.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Malheureusement, cette approche pr√©sente des inconv√©nients.  Des navigateurs obsol√®tes comme IE11, et m√™me des navigateurs relativement modernes tels que les versions Edge 15-18, chargeront les deux bundles.  Si vous √™tes pr√™t √† le supporter, utilisez cette technique et ne vous inqui√©tez de rien. <br><br>  D'autre part, vous devez trouver quelque chose au cas o√π vous seriez pr√©occup√© par l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">impact</a> sur les performances de votre application du fait que les anciens navigateurs doivent t√©l√©charger les deux bundles.  Voici une solution potentielle √† ce probl√®me qui utilise l'injection de script (au lieu de la <code>&lt;script&gt;</code> nous avons utilis√©e ci-dessus).  Il √©vite le double chargement des bundles par les navigateurs appropri√©s.  Voici de quoi nous parlons: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scriptEl = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"script"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"noModule"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> scriptEl) {  <span class="hljs-comment"><span class="hljs-comment">//     scriptEl.src = "/js/app.mjs";  scriptEl.type = "module"; } else {  //     scriptEl.src = "/js/app.js";  scriptEl.defer = true; // type="module"   ,    . } //  ! document.body.appendChild(scriptEl);</span></span></code> </pre> <br>  Ce script suppose que si le navigateur prend en charge l'attribut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nomodule</a> dans l'√©l√©ment de <code>script</code> , il comprend la construction <code>type="module"</code> .  Cela garantit que les navigateurs h√©rit√©s ne recevront que des scripts con√ßus pour eux, et les navigateurs modernes recevront des scripts con√ßus pour eux.  Cependant, gardez √† l'esprit que les scripts int√©gr√©s dynamiquement sont charg√©s de mani√®re asynchrone par d√©faut.  Par cons√©quent, si l'ordre de chargement des d√©pendances est important pour vous, d√©finissez l'attribut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">async</a> sur <code>false</code> . <br><br><h2>  <font color="#3AC1EF">Transmettre moins</font> </h2><br>  Je ne vais pas attaquer Babel ici.  Cet outil est n√©cessaire dans le d√©veloppement Web moderne, mais c'est une entit√© tr√®s capricieuse.  Babel ajoute beaucoup de choses au code qu'il g√©n√®re, que le d√©veloppeur peut ne pas conna√Ætre.  Par cons√©quent, vous ne regretterez pas si vous regardez dans les entrailles de Babel et d√©couvrez exactement ce qu'il fait.  En particulier, la connaissance des m√©canismes internes de Babel montre clairement que de petits changements dans la fa√ßon dont quelqu'un √©crit du code peuvent avoir un effet positif sur ce que Babel g√©n√®re. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ff/159/898/6ff159898be42a49a07d2990071d1b37.png"></div><br>  <i><font color="#999999"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Transmettre moins</a></font></i> <br><br>  √Ä savoir - c'est ce dont nous parlons.  Par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les options par d√©faut</a> sont une fonctionnalit√© tr√®s pratique d'ES6 que vous utilisez peut-√™tre d√©j√†: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message, level = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"log"</span></span></span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); }</code> </pre> <br>  Ici, il convient de pr√™ter attention au param√®tre de <code>level</code> , dont la valeur par d√©faut est le <code>log</code> cha√Æne.  Cela signifie que si nous voulons appeler <code>console.log</code> √† l'aide de la fonction wrapper de l' <code>logger</code> , nous n'avons pas besoin de passer le <code>level</code> √† cette fonction.  Pratique, non?  Tout cela est bien - sauf pour le code que Babel obtient lors de la transformation de cette fonction: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> level = <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>.length &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> ? <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] : <span class="hljs-string"><span class="hljs-string">"log"</span></span>;  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); }</code> </pre> <br>  Ceci est un exemple de la fa√ßon dont, malgr√© le fait que nous soyons dirig√©s par de bonnes intentions, le confort que Babel donne peut avoir des cons√©quences n√©gatives.  Ce qui n'√©tait que quelques caract√®res dans le code source s'est transform√© en une construction beaucoup plus longue dans la version de production du programme.       - ,      ,     <code>arguments</code>  . <br><br> ,    ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ?  ,   Babel      : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   function logger(...args) {  const [level, message] = args;  console[level](message); } //   Babel function logger() {  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key &lt; _len; _key++) {    args[_key] = arguments[_key];  }  const level = args[0],        message = args[1];  console[level](message); }</span></span></code> </pre> <br>     ,  Babel         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@babel/preset-env</a> ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> .  , ,     , ,    ,        !       ‚Äî    ¬´¬ª   (  <code>true</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">loose</a> ).  ‚Äî  ,   ,     ,     ,  ,     .   ¬´¬ª       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>   ,     Babel   ,    . <br><br>    ,    ¬´¬ª   ,         ,     Babel   : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Babel      function logger(message, level) {  console[level || "log"](message); }</span></span></code> </pre> <br> ,    ‚Äî      JavaScript,       ,    .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> spread</a> ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . <br><br>          ‚Äî              : <br><br><ol><li>     ‚Äî    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@babel/runtime</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@babel/plugin-transform-runtime</a>  ,      ,  Babel    . </li><li>        ,       .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@babel/polyfill</a> .   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">babel</a> /preset-env <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">useBuiltins</a>   <code>usage</code> . </li></ol><br>      ,    ,   ,   ,    ,      .    ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JSX</a> ,      ,       ,       .        ,          ,          . ,   ,  .     ,     Babel       ‚Äî         .       ,  Babel.  ,             . <br><br><h2> <font color="#3AC1EF">:   ‚Äî   </font> </h2><br>   ,    . ,    JavaScript-,       ,     .      ,      ,       .  -       .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> .  ,           ,   ,  ,    ,   ,  ,    . <br><br>   ,  ,    ,      ,   ,    ,   ,  . - ‚Äî  . ,    ,  ,            .    .   ,  ,  ,    ,    .      ,      ,   ,          . <br><br>  <b>Chers lecteurs!</b>         JS-? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/rw/6v/yn/rw6vyn2bxx4usoqc39holmj2z8m.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr460797/">https://habr.com/ru/post/fr460797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr460783/index.html">Consensus sur la r√©putation du n≈ìud. Est-ce n√©cessaire?</a></li>
<li><a href="../fr460785/index.html">Applications pour les livres √©lectroniques sur le syst√®me d'exploitation Android. Partie 1. Introduction et applications bureautiques</a></li>
<li><a href="../fr460789/index.html">Enfin, le rajeunissement est une chose</a></li>
<li><a href="../fr460793/index.html">Structuration des applications React</a></li>
<li><a href="../fr460795/index.html">12 conseils pour am√©liorer les performances des applications JavaScript</a></li>
<li><a href="../fr460799/index.html">Demande de paiement API de navigateur standard</a></li>
<li><a href="../fr460801/index.html">27 outils VS Code g√©niaux pour les d√©veloppeurs JavaScript modernes</a></li>
<li><a href="../fr460803/index.html">Lire pour l'√©t√©: des livres pour les techniciens</a></li>
<li><a href="../fr460805/index.html">Comment transf√©rer des donn√©es entre microcontr√¥leurs √† 100 Mbps</a></li>
<li><a href="../fr460807/index.html">Mesurer sept fois, une fois impl√©menter l'outil BI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>