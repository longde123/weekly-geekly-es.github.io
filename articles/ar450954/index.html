<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ญ ๐ง ๐จโโค๏ธโ๐โ๐จ ููู ุชุนูููุง ุงุณุชุบูุงู Java ูู Docker ๐ ๐ง๐ฟ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชุญุช ุงูุบุทุงุก ุ ูุญุชูู hh.ru ุนูู ุนุฏุฏ ูุจูุฑ ูู ุฎุฏูุงุช Java ุงูุชู ุชุนูู ูู ุญุงููุงุช ุงูุฅุฑุณุงุก. ุฎูุงู ุนูููุง ุ ูุงุฌููุง ุงููุซูุฑ ูู ุงููุดุงูู ุบูุฑ ุงูุชุงููุฉ. ูู ูุซูุฑ ูู ุงูุญุงูุงุช...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููู ุชุนูููุง ุงุณุชุบูุงู Java ูู Docker</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/450954/" style=";text-align:right;direction:rtl">  ุชุญุช ุงูุบุทุงุก ุ ูุญุชูู hh.ru ุนูู ุนุฏุฏ ูุจูุฑ ูู ุฎุฏูุงุช Java ุงูุชู ุชุนูู ูู ุญุงููุงุช ุงูุฅุฑุณุงุก.  ุฎูุงู ุนูููุง ุ ูุงุฌููุง ุงููุซูุฑ ูู ุงููุดุงูู ุบูุฑ ุงูุชุงููุฉ.  ูู ูุซูุฑ ูู ุงูุญุงูุงุช ุ ูู ุฃุฌู ุงููุตูู ุฅูู ุฃุณูู ุงูุญู ุ ุงุถุทุฑุฑุช ุฅูู google ููุชุฑุฉ ุทูููุฉ ุ ููุฑุงุกุฉ ูุตุงุฏุฑ OpenJDK ูุญุชู ุงูุชุนุฑูู ุจุงูุฎุฏูุงุช ุนูู ุงูุฅูุชุงุฌ.  ุณุฃุญุงูู ูู ูุฐู ุงูููุงูุฉ ุฃู ุฃููู ุฌููุฑ ุงููุนุฑูุฉ ุงูููุชุณุจุฉ ูู ูุฐู ุงูุนูููุฉ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุฏูุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนุงูู ุงููููุงุก ูุฎุงุฏู ุงูุฌูุงุฒ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุฏูุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (ูุนู ุ ูุฑุฉ ุฃุฎุฑู) ูุชูุชูุช ุงูุฐุงูุฑุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญู ูุนุงูุฌ Java-OOM</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุญุณูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุญุฏ ูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ: ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุ ุบูุฑ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุญุฏ ูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ: ุชุชุจุน ุงูุฐุงูุฑุฉ ุงูุฃุตููุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌุงูุง ููุญุฑูุงุช ุงูุฃูุฑุงุต</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููุฉ ุชุชุจุน ูู ุดูุกุ</a> </li></ul><br><a name="habracut"></a><a name="cpu"></a><h4 style=";text-align:right;direction:rtl">  ุญุฏูุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ </h4><br>  ุงุนุชุฏูุง ุฃู ูุนูุด ูู ุฃุฌูุฒุฉ ุงูุชุฑุงุถูุฉ kvm ูุน ูููุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุงูุฐุงูุฑุฉ ุ ูุงูุงูุชูุงู ุฅูู Docker ุ ูุถุน ูููุฏ ููุงุซูุฉ ูู cgroups.  ูุงููุดููุฉ ุงูุฃููู ุงูุชู ูุงุฌููุงูุง ูู ุจุงูุชุญุฏูุฏ ุญุฏูุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ูุฌุจ ุฃู ุฃููู ุนูู ุงูููุฑ ุฃู ูุฐู ุงููุดููุฉ ูู ุชุนุฏ ุฐุงุช ุตูุฉ ุจุงูุฅุตุฏุงุฑุงุช ุงูุฃุฎูุฑุฉ ูู Java 8 ู Java โฅ 10. ุฅุฐุง ููุช ููุงูุจุฉ ุงูุนุตุฑ ุ ูููููู ุชุฎุทู ูุฐุง ุงููุณู ุจุฃูุงู. <br><br>  ูุฐูู ุ ูุจุฏุฃ ุฎุฏูุฉ ุตุบูุฑุฉ ูู ุงูุญุงููุฉ ููุฑู ุฃููุง ุชูุชุฌ ุนุฏุฏูุง ูุจูุฑูุง ูู ุงูุฎููุท.  ุฃู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุชุณุชููู ุฃูุซุฑ ุจูุซูุฑ ููุง ูุงู ูุชููุนุง ุ ูููุฉ ูู ุนุจุซุง.  ุฃู ูููุง ููู ูููู ุญูููู ุขุฎุฑ: ุนูู ุฌูุงุฒ ูุง ุ ุชุจุฏุฃ ุงูุฎุฏูุฉ ุจุดูู ุทุจูุนู ุ ูุนูู ุฌูุงุฒ ุขุฎุฑ ุ ูุจููุณ ุงูุฅุนุฏุงุฏุงุช ุ ุชุนุทู ุ ูุณูุฑ ูู ูุงุชู OOM. <br><br>  ูุชุถุญ ุฃู ุงูุญู ุจุณูุท ููุบุงูุฉ - ููุท Java ูุง ุชุฑู ุญุฏูุฏ - <code>--cpus</code> ุงููุญุฏุฏุฉ ูู ุฌูุงุฒ <code>--cpus</code> ูุชุนุชูุฏ ุฃู ุฌููุน <code>--cpus</code> ุงูุฌูุงุฒ ุงููุถูู ูููู ุงููุตูู ุฅูููุง.  ููููู ุฃู ูููู ููุงู ุงููุซูุฑ ูููู (ูู ุงูุฅุนุฏุงุฏ ุงูููุงุณู ูุฏููุง - 80). <br>  ุชููู ุงูููุชุจุงุช ุจุถุจุท ุญุฌู ุชุฌูุนุงุช ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุฅูู ุนุฏุฏ ุงููุนุงูุฌุงุช ุงููุชููุฑุฉ - ููู ุซู ุงูุนุฏุฏ ุงููุงุฆู ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท. <br>  ุชููู Java ููุณูุง ุจููุงุณ ุนุฏุฏ ูุคุดุฑุงุช ุชุฑุงุจุท GC ุจุงูุทุฑููุฉ ููุณูุง ุ ูุจุงูุชุงูู ุงุณุชููุงู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุงููููุฉ ุงูุฒูููุฉ - ุชุจุฏุฃ ุงูุฎุฏูุฉ ูู ุฅููุงู ุงููุซูุฑ ูู ุงูููุงุฑุฏ ุนูู ุฌูุน ุงูููุงูุฉ ุ ูุฐูู ุจุงุณุชุฎุฏุงู ุญุตุฉ ุงูุฃุณุฏ ูู ุงูุญุตุฉ ุงููุฎุตุตุฉ ููุง. <br>  ุฃูุถูุง ุ ูููู ููููุชุจุงุช (Netty ุนูู ูุฌู ุงูุฎุตูุต) ุ ูู ุจุนุถ ุงูุญุงูุงุช ุ ุถุจุท ุญุฌู ุฐุงูุฑุฉ ุฅููุงู ุงูุชุดุบูู ุนูู ุนุฏุฏ ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPU) ุ ููุง ูุคุฏู ุฅูู ุงุญุชูุงู ูุจูุฑ ุจุชุฌุงูุฒ ุงูุญุฏูุฏ ุงููุญุฏุฏุฉ ููุญุงููุฉ ุนูุฏ ุงูุชุดุบูู ุนูู ุฃุฌูุฒุฉ ุฃูุซุฑ ููุฉ. <br><br>  ูู ุงูุจุฏุงูุฉ ุ ููุง ุฃุธูุฑุช ูุฐู ุงููุดููุฉ ููุณูุง ุ ุญุงูููุง ุงุณุชุฎุฏุงู ุฌููุงุช ุงูุนูู ุงูุชุงููุฉ: <br>  - ุญุงูู ุงุณุชุฎุฏุงู ุงุซููู ูู ุงูุฎุฏูุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">libnumcpus</a> - ููุชุจุฉ ุชุชูุญ ูู "ุฎุฏุงุน" Java ุนู ุทุฑูู ุชุนููู ุนุฏุฏ ูุฎุชูู ูู ุงููุนุงูุฌุงุช ุงููุชุงุญุฉ ุ <br>  - ุฃุดูุฑ ุตุฑุงุญุฉ ุฅูู ุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท GC ุ <br>  - ุตุฑุงุญุฉ ูุถุน ูููุฏ ุนูู ุงุณุชุฎุฏุงู ุงููุฎุงุฒู ุงููุคูุชุฉ ููุจุงูุช ุงููุจุงุดุฑ. <br><br>  ููู ุ ุจุงูุทุจุน ุ ุงูุชููู ูุน ูุซู ูุฐู ุงูุนูุงุฒุงุช ููุณ ูุฑูุญูุง ุฌุฏูุง ุ ููุงู ุงูุงูุชูุงู ุฅูู Java 10 (ุซู Java 11) ุ ุญูุซ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุบูุจ</a> ูู ูุฐู ุงููุดููุงุช ุ ุญูุงู ุญูููููุง.  ูู ุงูุฅูุตุงู ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ูู ุงูุซูุงููุฉ ุ ุฃูุถูุง ุ ูุงู ูู ุดูุก ุนูู ูุง ูุฑุงู ูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุญุฏูุซ 191</a> ุ ุงูุฐู ุตุฏุฑ ูู ุฃูุชูุจุฑ 2018.  ุจุญููู ุฐูู ุงูููุช ุ ูุงู ุงูุฃูุฑ ุบูุฑ ุฐู ุตูุฉ ุจุงููุนู ุจุงููุณุจุฉ ููุง ุ ููู ูุง ุฃุชููุงู ูู ุฃูุถูุง. <br><br>  ูุฐุง ูุซุงู ุนูู ุฐูู ุญูุซ ูุง ูุคุฏู ุชุญุฏูุซ ุฅุตุฏุงุฑ Java ุฅูู ุงูุฑุถุง ุงูุฃุฎูุงูู ูุญุณุจ ุ ุจู ุฅูู ุฑุจุญ ููููุณ ุญูููู ูู ุดูู ุนูููุฉ ูุจุณุทุฉ ูุฃุฏุงุก ุฎุฏูุฉ ุฃุนูู. <br><br><a name="server-class"></a><h4 style=";text-align:right;direction:rtl">  ุนุงูู ุงููููุงุก ูุฎุงุฏู ุงูุฌูุงุฒ </h4><br>  ูุฐูู ุ ูู Java 10 ุ ุธูุฑุช ุฎูุงุฑุงุช <code>-XX:ActiveProcessorCount</code> ู <code>-XX:+UseContainerSupport</code> (ูุชู ููููุง ุฅูู Java 8) ุ ูุน ูุฑุงุนุงุฉ ุญุฏูุฏ ูุฌููุนุงุช cgroups ุงูุงูุชุฑุงุถูุฉ.  ุงูุขู ูู ุดูุก ูุงู ุฑุงุฆุนุง.  ุฃู ูุงุ <br><br>  ุจุนุฏ ูุฑูุฑ ุจุนุถ ุงูููุช ุนูู ุงูุชูุงููุง ุฅูู Java 10/11 ุ ุจุฏุฃูุง ููุงุญุธ ุจุนุถ ุงูุดุฐูุฐ.  ูุณุจุจ ูุง ุ ูู ุจุนุถ ุงูุฎุฏูุงุช ุ ุจุฏุช ุฑุณููุงุช GC ููุฃููุง ูู ุชุณุชุฎุฏู G1: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/gc/69/bo/gc69boghbrkf2wmxiuioszq5qgg.png"></div><br><br>  ูุงู ูุฐุง ุ ุจุนุจุงุฑุฉ ููุทูุฉ ุ ุบูุฑ ูุชููุน ุฅูู ุญุฏ ูุง ุ ูุฃููุง ุนุฑููุง ุจุงูุชุฃููุฏ ุฃู G1 ูู ุงููุฌูุน ุงูุงูุชุฑุงุถู ุ ุจุฏุกูุง ูู Java 9. ููู ุงูููุช ููุณู ุ ูุง ุชูุฌุฏ ูุดููุฉ ูู ูุฐุง ุงููุจูู ูู ุจุนุถ ุงูุฎุฏูุงุช - ูุชู ุชุดุบูู G1 ุ ููุง ูู ูุชููุน. <br><br>  ูุจุฏุฃ ูู ููู ูุชุนุซุฑ <a href="">ุดูุก ูุซูุฑ ููุงูุชูุงู</a> .  ุงุชุถุญ ุฃูู ุฅุฐุง ูุงู Java ูุนูู ุนูู ุฃูู ูู 3 ูุนุงูุฌุงุช ูุจุญุฏ ุฐุงูุฑุฉ ุฃูู ูู 2 ุฌูุฌุงุจุงูุช ุ ูุฅูู ูุนุชุจุฑ ููุณู ุนููููุง ููุง ูุณูุญ ุจุงุณุชุฎุฏุงู ุฃู ุดูุก ุขุฎุฑ ุบูุฑ SerialGC. <br><br>  ุจุงูููุงุณุจุฉ ุ ูุฐุง ูุคุซุฑ ููุท ุนูู <a href="">ุงุฎุชูุงุฑ GC</a> ูููุณ ูู ุนูุงูุฉ ุจุฎูุงุฑุงุช ุชุฌููุน -client / -server ู JIT. <br><br>  ูู ุงููุงุถุญ ุ ุนูุฏูุง ุงุณุชุฎุฏููุง Java 8 ุ ูุฅูู ูู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุญุฏูุฏ ุนุงูู ุงููููุงุก ูุงุนุชูุฏ ุฃูู ูุญุชูู ุนูู ุงููุซูุฑ ูู ุงููุนุงูุฌุงุช ูุงูุฐุงูุฑุฉ.  ุจุนุฏ ุงูุชุฑููุฉ ุฅูู Java 10 ุ ุจุฏุฃุช ุงูุนุฏูุฏ ูู ุงูุฎุฏูุงุช ุฐุงุช ุงูุญุฏูุฏ ุงูููุถูุนุฉ ุฃูู ูุฌุฃุฉ ุจุงุณุชุฎุฏุงู SerialGC.  ูุญุณู ุงูุญุธ ุ ูุชู ุงูุชุนุงูู ูุน ูุฐุง ุจูู ุจุณุงุทุฉ - ุนู ุทุฑูู ุชุญุฏูุฏ ุงูุฎูุงุฑ <code>-XX:+AlwaysActAsServerClassMachine</code> . <br><br><a name="malloc"></a><h4 style=";text-align:right;direction:rtl">  ุญุฏูุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (ูุนู ุ ูุฑุฉ ุฃุฎุฑู) ูุชูุชูุช ุงูุฐุงูุฑุฉ </h4><br>  ุจุงููุธุฑ ุฅูู ุงูุฑุณูู ุงูุจูุงููุฉ ูู ุงููุฑุงูุจุฉ ุ ูุงุญุธูุง ุจุทุฑููุฉ ูุง ุฃู ุญุฌู ูุฌููุนุฉ ุงููููู ููุญุงููุฉ ูุจูุฑ ุฌุฏูุง - ุจูุฏุฑ ุซูุงุซุฉ ุฃุถุนุงู ุญุฌู ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงููุฎุฐ.  ูููู ุฃู ูููู ูุฐุง ูู ุงูุญุงู ูู ุจุนุถ ุขููุฉ ุตุนุจุฉ ุงููุงุฏูุฉ ุงูุชู ุชุญุฌูู ูููุง ูุนุฏุฏ ุงููุนุงูุฌุงุช ูู ุงููุธุงู ููุง ูุนุฑู ุนู ุญุฏูุฏ ุนุงูู ุงููููุงุกุ <br><br>  ุงุชุถุญ ุฃู ุงูุขููุฉ ููุณุช ุตุนุจุฉ ุนูู ุงูุฅุทูุงู - ุจู ูู malloc ุงููุนุฑููุฉ ูู glibc.  ุจุงุฎุชุตุงุฑ ุ ูุณุชุฎุฏู glibc ูุง ูุณูู ุจุงูุณุงุญุงุช ูุชุฎุตูุต ุงูุฐุงูุฑุฉ.  ุนูุฏ ุฅูุดุงุก ุ ูุชู ุชุนููู ูู ููุถูุน ูุงุญุฏ ูู ุงูุณุงุญุงุช.  ุนูุฏูุง ูุฑูุฏ ูุคุดุฑ ุชุฑุงุจุท ูุณุชุฎุฏู glibc ุชุฎุตูุต ููุฏุงุฑ ูุนูู ูู ุงูุฐุงูุฑุฉ ูู ุงููููุฉ ุงูุฃุตููุฉ ูุงุญุชูุงุฌุงุชู ููุฏุนู malloc ุ ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูู ุงูุณุงุญุฉ ุงููุฎุตุตุฉ ููุง.  ุฅุฐุง ูุงูุช ุงูุณุงุญุฉ ุชูุฏู ุนุฏุฉ ุฎููุท ุ ูุณูู ุชุชูุงูุณ ูุฐู ุงูููุงุถูุน ุนูููุง.  ููุฒูุฏ ูู ุงูุณุงุญุงุช ุ ุชูุงูุณ ุฃูู ุ ูููู ุชุฌุฒุฆุฉ ุฃูุซุฑ ุ ูุฃู ูู ุณุงุญุฉ ูุฏููุง ูุงุฆูุฉ ุงูููุงุทู ุงูุญุฑุฉ ุงูุฎุงุตุฉ ุจูุง. <br><br>  ูู ุฃูุธูุฉ 64 ุจุช ุ ูุชู ุถุจุท ุงูุฑูู ุงูุงูุชุฑุงุถู ููุณุงุญุงุช ุนูู 8 * ุนุฏุฏ ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPU).  ูู ุงููุงุถุญ ุฃู ูุฐุง ููุซู ุนุจุกูุง ูุจูุฑูุง ุจุงููุณุจุฉ ููุง ุ ูุฃูู ูุง ุชุชููุฑ ุฌููุน ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูู ุงูุญุงููุฉ.  ุนูุงูุฉ ุนูู ุฐูู ุ ุจุงููุณุจุฉ ููุชุทุจููุงุช ุงููุณุชูุฏุฉ ุฅูู Java ุ ูุฅู ุงูุชูุงูุณ ุนูู ุงูุณุงุญุงุช ููุณ ูุซูู ุงูุตูุฉ ุจุงูููุถูุน ุ ูุธุฑูุง ูุฃู ูุนุธู ุงูุชุฎุตูุตุงุช ุชุชู ูู Java-heap ุ ุญูุซ ูููู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุจุงููุงูู ุนูุฏ ุจุฏุก ุงูุชุดุบูู. <br><br>  ุชูุนุฑู ููุฒุฉ malloc ูุฐู ููุชุฑุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุทูููุฉ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌุฏูุง</a> ุ ููุฐูู ุญููุง - ูุงุณุชุฎุฏุงู ูุชุบูุฑ ุงูุจูุฆุฉ <code>MALLOC_ARENA_MAX</code> ููุฅุดุงุฑุฉ ุตุฑุงุญุฉ ุฅูู ุนุฏุฏ ุงูุณุงุญุงุช.  ูู ุงูุณูู ุฌุฏูุง ุงูููุงู ุจุฃู ุญุงููุฉ.  ุฅููู ุชุฃุซูุฑ ุชุญุฏูุฏ <code>MALLOC_ARENA_MAX = 4</code> ุงูุฑุฆูุณูุฉ ูุฏููุง: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/jk/zq/lo/jkzqlo_pqiu4xppzbe-itkjvviy.png"></div><br><br>  ููุงู ุญุงูุชุงู ุนูู ูุฎุทุท RSS: ูู ูุงุญุฏุฉ (ุฒุฑูุงุก) ูููู ุจุชุดุบูู <code>MALLOC_ARENA_MAX</code> ุ ูุงูุขุฎุฑ (ุฃุญูุฑ) ูุนูุฏ ุชุดุบููู ููุชู.  ุงููุฑู ูุงุถุญ. <br><br>  ูููู ุจุนุฏ ุฐูู ุ ููุงู ุฑุบุจุฉ ูุนูููุฉ ููุนุฑูุฉ ูุง ุงูุฐู ุชูููู Java ุจุดูู ุนุงู ุนูู ุงูุฐุงูุฑุฉ.  ูู ูู ุงููููู ุชุดุบูู ุฎุฏูุฉ microservice ุนูู Java ูุน ุญุฏ ุฐุงูุฑุฉ 300-400 ููุบุง ุจุงูุช ููุง ุชุฎุดู ุฃู ุชุณูุท ูู Java-OOM ุฃู ูุง ููุชููุง ูุงุชู ูุธุงู OOMุ <br><br><a name="oom"></a><h4 style=";text-align:right;direction:rtl">  ูุญู ูุนุงูุฌ Java-OOM </h4><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุชุญุชุงุฌ ุฅูู ุงูุชุญุถูุฑ ูุญูููุฉ ุฃู OOMs ุฃูุฑ ูุง ููุฑ ููู ุ ูุชุญุชุงุฌ ุฅูู ุงูุชุนุงูู ูุนูุง ุจุดูู ุตุญูุญ - ุนูู ุงูุฃูู ุญูุธ ููุงูุจ ุงููุฑู.  ุงูุบุฑูุจ ุ ุญุชู ูุฐุง ุงูุชุนูุฏ ุงูุจุณูุท ูู ูุฑููู ุงูุฎุงุตุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุง ูุชู ุงููุชุงุจุฉ ููู ููุงูุจ ุงููุฑู - ุฅุฐุง ุชู ุจุงููุนู ุญูุธ ููู ุชูุฑูุบ ุงููุฑู ุงูุฐู ูุญูู ููุณ ุงูุงุณู ุ ููู ูุชู ุฅูุดุงุก ููู ุชูุฑูุบ ุฌุฏูุฏ. <br><br>  ูููู ูู Java <a href="">ุฅุถุงูุฉ</a> ุงูุฑูู ุงูุชุณูุณูู ูุชูุฑูุบ ุงูุนูููุฉ <a href="">ุชููุงุฆููุง</a> ุฅูู ุงุณู ุงูููู ุ ููู ูุฐุง ูู ูุณุงุนุฏูุง.  ุงูุฑูู ุงูุชุณูุณูู ุบูุฑ ูููุฏ ุ ูุฃู ูุฐุง ูู OOM ุ ูููุณ ุชูุฑูุบ ุงููุฑู ุงููุทููุจ ุจุงูุชุธุงู - ูุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู ุจุนุฏู ุ ูุฅุนุงุฏุฉ ุถุจุท ุงูุนุฏุงุฏ.  ููุนุฑู ุงูุนูููุฉ ุบูุฑ ููุงุณุจ ุ ูุฃูู ุฏุงุฆููุง ูุง ูููู ููุณู ูู ุนุงูู ุงูููู (1). <br><br>  ูุฐูู ุ ุชูุตููุง ุฅูู ูุฐุง ุงูุฎูุงุฑ: <br><br> <code>-XX:+HeapDumpOnOutOfMemoryError <br> -XX:+ExitOnOutOfMemoryError <br> -XX:HeapDumpPath=/var/crash/java.hprof <br> -XX:OnOutOfMemoryError="mv /var/crash/java.hprof /var/crash/heapdump.hprof"</code> <br> <br>  ุฅูู ุฃูุฑ ุจุณูุท ููุบุงูุฉ ุ ููุน ุจุนุถ ุงูุชุญุณููุงุช ุ ููููู ุชุนููู ุชุฎุฒููู ููุณ ููุท ุฃุญุฏุซ ุชูุฑูุบ ูููุฑููู ุ ูููู ูุงุญุชูุงุฌุงุชูุง ูุฐุง ุฃูุซุฑ ูู ูุงูู. <br><br>  Java OOM ููุณ ุงูุดูุก ุงููุญูุฏ ุงูุฐู ูุชุนูู ุนูููุง ููุงุฌูุชู.  ูู ุญุงููุฉ ููุง ุญุฏูุฏ ุนูู ุงูุฐุงูุฑุฉ ุงูุชู ุชุญุชููุง ุ ููููู ุชุฌุงูุฒูุง.  ูู ุญุงูุฉ ุญุฏูุซ ุฐูู ุ ูุชู ูุชู ุงูุญุงููุฉ ุจูุงุณุทุฉ ูุงุชู OOM ูุฅุนุงุฏุฉ ุชุดุบูู ุงููุธุงู (ูุณุชุฎุฏู <code>restart_policy: always</code> ).  ุจุทุจูุนุฉ ุงูุญุงู ุ ูุฐุง ุฃูุฑ ุบูุฑ ูุฑุบูุจ ููู ุ ููุฑูุฏ ุฃู ูุชุนูู ููููุฉ ูุถุน ูููุฏ ุจุดูู ุตุญูุญ ุนูู ุงูููุงุฑุฏ ุงููุณุชุฎุฏูุฉ ูู ูุจู JVM. <br><br><a name="opt-mem"></a><h4 style=";text-align:right;direction:rtl">  ุชุญุณูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ </h4><br>  ูููู ูุจู ูุถุน ุงูุญุฏูุฏ ุ ุชุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฃู JVM ูุง ุชูุฏุฑ ุงูููุงุฑุฏ.  ููุฏ ูุฌุญูุง ุจุงููุนู ูู ุชูููู ุงุณุชููุงู ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ุญุฏ ุฃูุตู ูุนุฏุฏ ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPU) ูุงููุชุบูุฑ <code>MALLOC_ARENA_MAX</code> .  ูู ููุงู ุฃู ุทุฑู ุฃุฎุฑู "ูุฌุงููุฉ ุชูุฑูุจุง" ููููุงู ุจุฐููุ <br><br>  ุงุชุถุญ ุฃู ููุงู ุจุนุถ ุงูุญูู ุงูุชู ุณุชููุฑ ุงููููู ูู ุงูุฐุงูุฑุฉ. <br><br>  ุงูุฃูู ูู ุงุณุชุฎุฏุงู ุงูุฎูุงุฑ <code>-Xss</code> (ุฃู <code>-XX:ThreadStackSize</code> ) ุ ูุงูุฐู ูุชุญูู ูู ุญุฌู ููุฏุณ ูุคุดุฑุงุช ุงูุชุฑุงุจุท.  ุงูุงูุชุฑุงุถู ูู JVM 64 ุจุช ูู 1 ููุบุงุจุงูุช.  ุงูุชุดููุง ุฃู 512 ููููุจุงูุช ูุงููุฉ ููุง.  ููุฐุง ุงูุณุจุจ ุ ูู ูุชู ุงูุชุดุงู StackOverflowException ูู ูุจู ุ ููููู ุฃุนุชุฑู ุฃู ูุฐุง ุบูุฑ ููุงุณุจ ููุฌููุน.  ูุงูุฑุจุญ ูู ูุฐุง ูู ุตุบูุฑ ุฌุฏุง. <br><br>  ูุงูุซุงูู ูู ุนูุงูุฉ <code>-XX:+UseStringDeduplication</code> (ูุน ุชูููู G1 GC).  ุฅููุง ุชุชูุญ ูู ุงูุญูุธ ุนูู ุงูุฐุงูุฑุฉ ุนู ุทุฑูู ุทู ุงูุตููู ุงูููุฑุฑุฉ ุจุณุจุจ ุชุญููู ุงููุนุงูุฌ ุงูุฅุถุงูู.  ุชุนุชูุฏ ุงูููุงุถูุฉ ุจูู ุงูุฐุงูุฑุฉ ููุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ููุท ุนูู ุงูุชุทุจูู ุงููุญุฏุฏ ูุฅุนุฏุงุฏุงุช ุขููุฉ ุฅูุบุงุก ุงูุจูุงูุงุช ุงูููุฑุฑุฉ ููุณูุง.  ูุฑุงุกุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุต ุงูุงุชูุงู</a> ูุงูุงุฎุชุจุงุฑ ูู ุฎุฏูุงุชู ุ ูุฏููุง ูุฐุง ุงูุฎูุงุฑ ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุชุทุจูู ุจุนุฏ. <br><br>  ูุฃุฎูุฑูุง ุ ุชุชูุซู ุงูุทุฑููุฉ ุงูุชู ูุง ุชูุงุณุจ ุงูุฌููุน (ูููููุง ุชูุงุณุจูุง) ูู ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">jemalloc</a> ุจุฏูุงู ูู malloc ุงูุฃุตูู.  ูุฐุง ุงูุชุทุจูู ููุฌู ูุญู ุชูููู ุชุฌุฒุฆุฉ ุงูุฐุงูุฑุฉ ูุฏุนู ุฏุนู ุชุนุฏุฏ ูุคุดุฑุงุช ุชุฑุงุจุท ููุงุฑูุฉ ูุน malloc ูู glibc.  ูููุง ูุชุนูู ุจุฎุฏูุงุชูุง ุ ุฃุนุทู jemalloc ููุณุจูุง ููุฐุงูุฑุฉ ุฃูุซุฑ ููููุงู ูู malloc ูุน <code>MALLOC_ARENA_MAX=4</code> ุ ุฏูู ุงูุชุฃุซูุฑ ุนูู ุงูุฃุฏุงุก ุจุดูู ูุจูุฑ. <br><br>  ุงูุฎูุงุฑุงุช ุงูุฃุฎุฑู ุ ุจูุง ูู ุฐูู ุชูู ุงูุชู ูุตููุง Alexei Shipilev ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">JVM Anatomy Quark # 12: Native Memory Tracking</a> ุ ุจุฏุช ุฎุทูุฑุฉ ุฅูู ุญุฏ ูุง ุฃู ุฃุฏุช ุฅูู ุชุฏููุฑ ููุญูุธ ูู ุงูุฃุฏุงุก.  ููุน ุฐูู ุ ูุฃุบุฑุงุถ ุชุนููููุฉ ุ ุฃูุตู ุจูุฑุงุกุฉ ูุฐุง ุงูููุงู. <br><br>  ูู ุบุถูู ุฐูู ุ ุฏุนูุง ููุชูู ุฅูู ุงูููุถูุน ุงูุชุงูู ุ ูุฃุฎูุฑุง ุ ุญุงูู ุฃู ุชุชุนูู ููููุฉ ุงูุญุฏ ูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ ูุชุญุฏูุฏ ุงูุญุฏูุฏ ุงูุตุญูุญุฉ. <br><br><a name="lim-mem-1"></a><h4 style=";text-align:right;direction:rtl">  ุงูุญุฏ ูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ: ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุ ุบูุฑ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ </h4><br>  ููุนู ูู ุดูุก ุจุดูู ุตุญูุญ ุ ุชุญุชุงุฌ ุฅูู ุชุฐูุฑ ุงูุฐุงูุฑุฉ ุงูุชู ุชุชููู ุจุดูู ุนุงู ูู Java.  ุฃููุงู ุ ุฏุนููุง ููุธุฑ ุฅูู ุงููุฌูุนุงุช ุงูุชู ูููู ุฑุตุฏ ุญุงูุชูุง ูู ุฎูุงู JMX. <br><br>  ุงูุฃูู ุ ุจุงูุทุจุน ุ ูู <b>ุงููุฑู</b> .  ุงูุฃูุฑ ุจุณูุท: <code>-Xmx</code> ุ ููู ููู ููุนู ุฐูู ุจุดูู ุตุญูุญุ  ูุณูุก ุงูุญุธ ุ ูุง ุชูุฌุฏ ูุตูุฉ ุนุงูููุฉ ููุง ุ ูู ูุฐุง ูุชููู ุนูู ุงูุชุทุจูู ูููู ุชุนุฑูู ุงูุชุญููู.  ุจุงููุณุจุฉ ููุฎุฏูุงุช ุงูุฌุฏูุฏุฉ ุ ูุจุฏุฃ ุจุญุฌู ูููุฉ ูุนููู ูุณุจูุงู (128 ููุฌุงุจุงูุช) ุ ูุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูููู ุจุฒูุงุฏุฉ ุฃู ุชููููู.  ูุฏุนู ุชูู ุงููุงุฆูุฉ ุ ููุงู ูุฑุงูุจุฉ ูุน ุงูุฑุณูู ุงูุจูุงููุฉ ูุงุณุชููุงู ุงูุฐุงูุฑุฉ ูููุงููุณ GC. <br><br>  ูู ููุณ ุงูููุช ูุซู <code>-Xmx</code> ูููุง ุจุชุนููู <code>-Xms == -Xmx</code> .  ููุณ ูุฏููุง ุฒูุงุฏุฉ ูู ุงูุฐุงูุฑุฉ ุ ูุฐูู ูู ูุตูุญุชูุง ุฃู ุชุณุชุฎุฏู ุงูุฎุฏูุฉ ุงูููุงุฑุฏ ุงูุชู ูุฏููุงูุง ุฅูู ุงูุญุฏ ุงูุฃูุตู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ุงูุฎุฏูุงุช ุงูุนุงุฏูุฉ ุ ูููู ุจุชุถููู <code>-XX:+AlwaysPreTouch</code> ูุขููุฉ ุตูุญุงุช Huge ุงูุดูุงูุฉ: <code>-XX:+UseTransparentHugePages -XX:+UseLargePagesInMetaspace</code> .  ููุน ุฐูู ุ ูุจู ุชูููู THP ุ ุงูุฑุฃ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุซุงุฆู</a> ุจุนูุงูุฉ ูุงุฎุชุจุฑ ููู ุชุชุตุฑู ุงูุฎุฏูุงุช ูุน ูุฐุง ุงูุฎูุงุฑ ููุชุฑุฉ ุทูููุฉ.  ูุง ูุชู ุงุณุชุจุนุงุฏ ุงูููุงุฌุขุช ุนูู ุฃุฌูุฒุฉ ุฐุงุช ุฐุงูุฑุฉ RAM ุบูุฑ ูุงููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ูุงู ุนูููุง ุฅููุงู ุชุดุบูู THP ุนูู ููุงุนุฏ ุงูุงุฎุชุจุงุฑ). <br><br>  ุงูุชุงูู ูู <b>ุบูุฑ ูููุฉ</b> .  ุชุชุถูู ุฐุงูุฑุฉ ุบูุฑ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ: <br>  - Metaspace ููุถุงุก ุงูุทุจูุฉ ุงููุถุบูุทุฉ ุ <br>  - ููุฏ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช. <br><br>  ุงููุธุฑ ูู ูุฐู ุงูุชุฌูุนุงุช ุจุงูุชุฑุชูุจ. <br><br>  ุจุงูุทุจุน ุ ููุฏ ุณูุน ุงูุฌููุน ุนู <b>Metaspace</b> ุ ูู ุฃุชุญุฏุซ ุนู ุฐูู ุจุงูุชูุตูู.  ูููู ุจุชุฎุฒูู ุจูุงูุงุช ุชุนุฑูู ุงููุฆุฉ ุ ูุฑูุฒ ุงูุทุฑููุฉ ุ ููุง ุฅูู ุฐูู.  ูู ุงููุงูุน ุ ูุนุชูุฏ ุงุณุชุฎุฏุงู Metaspace ุจุดูู ูุจุงุดุฑ ุนูู ุนุฏุฏ ูุญุฌู ุงููุฆุงุช ุงููุญููุฉ ุ ูููููู ุชุญุฏูุฏู ุ ูุซู hip ุ ููุท ุนู ุทุฑูู ุชุดุบูู ุงูุชุทุจูู ูุฅุฒุงูุฉ ุงูููุงููุณ ุนุจุฑ JMX.  ุจุดูู ุงูุชุฑุงุถู ุ ูุง ููุชุตุฑ Metaspace ุนูู ุฃู ุดูุก ุ ูููู ูู ุงูุณูู ุฌุฏูุง ุงูููุงู ุจุฐูู ุจุงุณุชุฎุฏุงู <code>-XX:MaxMetaspaceSize</code> . <br><br>  ุชุนุชุจุฑ <b>ูุณุงุญุฉ ุงููุตู ุงููุถุบูุทุฉ</b> ุฌุฒุกูุง ูู Metaspace ูุชุธูุฑ ุนูุฏูุง ูููู ุงูุฎูุงุฑ <code>-XX:+UseCompressedClassPointers</code> ููููููุง (ูุชู ุชููููู ุงูุชุฑุงุถููุง ูุฃููุงู <code>-XX:+UseCompressedClassPointers</code> ุงูุชู ุชูู ุนู 32 ุฌูุฌุงุจุงูุช ุ ุฃู ุนูุฏูุง ูููู ุฃู ูููุฑ ููุณุจูุง ุญูููููุง ููุฐุงูุฑุฉ).  ูููู ุฃู ูููู ุญุฌู ูุฐุง ุงูุชุฌูุน ูุญุฏูุฏูุง ุจูุงุณุทุฉ ุงูุฎูุงุฑ <code>-XX:CompressedClassSpaceSize</code> ุ ูููู ููุณ ููุงู ูุนูู ูุจูุฑ ุ ูุธุฑูุง ูุฃู ูุณุงุญุฉ ุงููุฆุฉ ุงููุถุบูุทุฉ ูุถููููุฉ ูู Metaspace ูุชูุชุตุฑ ุงููุณุงุญุฉ ุงูุฅุฌูุงููุฉ ููุฐุงูุฑุฉ ุงููุคููููุฉ ูู Metaspace ู Space Compressed Class Space ูู ููุงูุฉ ุงููุทุงู ุนูู <code>-XX:MaxMetaspaceSize</code> ูุงุญุฏ - <code>-XX:MaxMetaspaceSize</code> . <br><br>  ุจุงูููุงุณุจุฉ ุ ุฅุฐุง ูุธุฑุช ุฅูู ูุฑุงุกุงุช JMX ุ ูุณูุชู ุฏุงุฆููุง ุงุญุชุณุงุจ ููุฏุงุฑ ุงูุฐุงูุฑุฉ ุบูุฑ ุงููููุฉ <a href="">ููุฌููุน ูู</a> Metaspace ู Class Space Compress ู Cache Code.  ูู ุงููุงูุน ุ ุชุญุชุงุฌ ููุท ุฅูู ุชูุฎูุต Metaspace ู CodeCache. <br><br>  ูุฐูู ุ ูู <b>ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช</b> ููุท ุ ุธู <b>ููุฏ Cache</b> - ูุณุชูุฏุน ุงูููุฏ ุงูุฐู ุชู ุชุฌููุนู ุจูุงุณุทุฉ ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู JIT.  ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุชุนููู ุงูุญุฏ ุงูุฃูุตู ูุญุฌูู ุนูู 240 ููุฌุงุจุงูุช ุ ูุจุงููุณุจุฉ ููุฎุฏูุงุช ุงูุตุบูุฑุฉ ุ ูููู ุญุฌูู ุฃูุจุฑ ุนุฏุฉ ูุฑุงุช ูู ุงููุงุฒู.  ูููู ุชุนููู ุญุฌู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช <code>-XX:ReservedCodeCacheSize</code> ุงูุฎูุงุฑ <code>-XX:ReservedCodeCacheSize</code> .  ูุง ูููู ุชุญุฏูุฏ ุงูุญุฌู ุงูุตุญูุญ ุฅูุง ุนู ุทุฑูู ุชุดุบูู ุงูุชุทุจูู ููุชุงุจุนุชู ุถูู ููู ุชุนุฑูู ุชุญููู ูููุฐุฌู. <br><br>  ูู ุงูููู ุนุฏู ุงุฑุชูุงุจ ุฎุทุฃ ููุง ุ ูุธุฑูุง ูุนุฏู ููุงูุฉ Code Cache ูุญุฐู ุงูููุฏ ุงูุจุงุฑุฏ ูุงููุฏูู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช (- <code>-XX:+UseCodeCacheFlushing</code> ุจุดูู ุงูุชุฑุงุถู) ุ ููุฐุง ุจุฏูุฑู ูุฏ ูุคุฏู ุฅูู ุงุฑุชูุงุน ุงุณุชููุงู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุชุฏููุฑ ุงูุฃุฏุงุก .  ุณูููู ูู ุงูุฑุงุฆุน ุฅุฐุง ุฃูููู ุฑูู OOM ุนูุฏูุง ุชููุถ ููุฏ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ูุฐูู ููุงู ุนูุงูุฉ <code>-XX:+ExitOnFullCodeCache</code> ุ ูููู ูุณูุก ุงูุญุธ ุ ูุง ูุชููุฑ ูุฐุง <a href="">ุงูุฅุตุฏุงุฑ</a> ุฅูุง ูู <a href="">ุฅุตุฏุงุฑ ุชุทููุฑ</a> JVM. <br><br>  ุงููุฌููุนุฉ ุงูุฃุฎูุฑุฉ ุงูุชู ุชูุฌุฏ ุนููุง ูุนูููุงุช ูู JMX ูู <b>ุงูุฐุงูุฑุฉ ุงููุจุงุดุฑุฉ</b> .  ุจุดูู ุงูุชุฑุงุถู ุ ุญุฌููุง ุบูุฑ ูุญุฏูุฏ ุ ูุฐูู ูู ุงูููู ุชุนููู ููุน ูู ุงููููุฏ ุนููู - ุนูู ุงูุฃูู ุณูุชู ุชูุฌูู ุงูููุชุจุงุช ูุซู Netty ุ ุงูุชู ุชุณุชุฎุฏู ุจูุดุงุท ุงููุฎุงุฒู ุงููุคูุชุฉ ููุจุงูุช ุงููุจุงุดุฑ.  ููุณ ูู ุงูุตุนุจ ุชุนููู ุญุฏ ุจุงุณุชุฎุฏุงู ุนูุงูุฉ <code>-XX:MaxDirectMemorySize</code> ุ ููุฑุฉ โโุฃุฎุฑู ุ ุณูุณุงุนุฏูุง ุงูุฑุตุฏ ููุท ุนูู ุชุญุฏูุฏ ุงููููุฉ ุงูุตุญูุญุฉ. <br><br>  ุฅุฐู ูุง ุงูุฐู ูุตููุง ุฅููู ุญุชู ุงูุขูุ <br><br><pre style=";text-align:right;direction:rtl">  ุฐุงูุฑุฉ ุนูููุฉ ุฌุงูุง = 
     ูููุฉ + Metaspace + ุฑูุฒ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช + ุฐุงูุฑุฉ ูุจุงุดุฑุฉ =
         -Xmx +
         -XX: MaxMetaspaceSize +
         -XX: ReservedCodeCacheSize +
         -XX: MaxDirectMemorySize </pre><br><br>  ุฏุนูุง ูุญุงูู ุฑุณู ูู ุดูุก ุนูู ุงูุฑุณู ุงูุจูุงูู ูููุงุฑูุชู ูุน ุญุงููุฉ ุนุงูู ูููุงุก RSS. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/pg/ue/fx/pguefx_0kisoyxg8mna7dxlmimo.png"></div><br><br>  ุงูุณุทุฑ ุฃุนูุงู ูู RSS ููุญุงููุฉ ููู ุฃูุซุฑ ูู ูุฑุฉ ููุตู ูู ุงุณุชููุงู ุฐุงูุฑุฉ JVM ุ ูุงูุฐู ูููููุง ูุฑุงูุจุชู ูู ุฎูุงู JMX. <br><br>  ูุฒูุฏ ูู ุงูุญูุฑ! <br><br><a name="lim-mem-2"></a><h4 style=";text-align:right;direction:rtl">  ุงูุญุฏ ูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ: ุชุชุจุน ุงูุฐุงูุฑุฉ ุงูุฃุตููุฉ </h4><br>  ุจุงูุทุจุน ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงููููุฉ ูุบูุฑ ุงููููุฉ ูุงูุฐุงูุฑุฉ ุงููุจุงุดุฑุฉ ุ ูุณุชุฎุฏู JVM ูุฌููุนุฉ ูุงููุฉ ูู ุชุฌูุนุงุช ุงูุฐุงูุฑุฉ ุงูุฃุฎุฑู.  ุณูู <code>-XX:NativeMemoryTracking=summary</code> ุงูุนูุงูุฉ <code>-XX:NativeMemoryTracking=summary</code> ูุนูู <code>-XX:NativeMemoryTracking=summary</code> .  ุจุชูููู ูุฐุง ุงูุฎูุงุฑ ุ ุณูููู ูุงุฏุฑูู ุนูู ุงูุญุตูู ุนูู ูุนูููุงุช ุญูู ุงูุชุฌูุนุงุช ุงููุนุฑููุฉ ูุฏู JVM ุ ูููู ูู ุชููู ูุชุงุญุฉ ูู JMX.  ููููู ูุฑุงุกุฉ ุงููุฒูุฏ ุญูู ุงุณุชุฎุฏุงู ูุฐุง ุงูุฎูุงุฑ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุซุงุฆู</a> . <br><br>  ููุจุฏุฃ ุงูุฃูุซุฑ ูุถูุญุง - ุงูุฐุงูุฑุฉ ุงูุชู ุชุญุชููุง <b>ุฃููุงู ุงูุฎููุท</b> .  NMT ุชูุชุฌ ุดูุฆุง ูุซู ูุง ููู ูุฎุฏูุชูุง: <br><br><pre style=";text-align:right;direction:rtl">  ููุถูุน (ูุญุฌูุฒ = 32166 ูููู ุจุงูุช ุ ููุชุฒู = 5358 ูููู ุจุงูุช)
     (ุงูููุถูุน ุฑูู 52)
     (ููุฏุณ: ูุญุฌูุฒ = 31920 ูููู ุจุงูุช ุ ููุชุฒู = 5112 ูููู ุจุงูุช)
     (malloc = 185 ูููู ุจุงูุช # 270) 
     (ุงูุณุงุญุฉ = 61 ูููู ุจุงูุช # 102) </pre><br>  ุจุงูููุงุณุจุฉ ุ ูููู ุฃูุถูุง ุงูุนุซูุฑ ุนูู ุญุฌููุง ุฏูู ุชุชุจุน ุงูุฐุงูุฑุฉ ุงูุฃุตููุฉ ุ ุจุงุณุชุฎุฏุงู jstack ูุญูุฑ ููููุงู ูู <code>/proc/&lt;pid&gt;/smaps</code> .  ูุถุน ุฃูุฏุฑูู ุจุงูุฌูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุฏุงุฉ ุฎุงุตุฉ</a> ููุฐุง ุงูุบุฑุถ. <br><br>  ุญุฌู <b>ูุณุงุญุฉ ุงููุตู ุงููุดุชุฑูุฉ</b> ุฃุณูู ูู ุงูุชูููู: <br><br><pre style=";text-align:right;direction:rtl">  ูุณุงุญุฉ ุตู ูุดุชุฑูุฉ (ูุญุฌูุฒุฉ = 17084 ูููู ุจุงูุช ุ ููุชุฒูุฉ = 17084 ูููู ุจุงูุช)
     (ููู mmap: ูุญุฌูุฒ = 17084 ูููู ุจุงูุช ุ ููุชุฒู = 17084 ูููู ุจุงูุช) </pre><br>  ูุฐู ูู ุขููุฉ Class Data Sharing ุ <code>-Xshare</code> ู <code>-XX:+UseAppCDS</code> .  ูู Java 11 ุ ูุชู ุชุนููู ุงูุฎูุงุฑ <code>-Xshare</code> ุนูู ุชููุงุฆู ุจุดูู ุงูุชุฑุงุถู ุ ููุง ูุนูู ุฃูู ุฅุฐุง ูุงู ูุฏูู <code>$JAVA_HOME/lib/server/classes.jsa</code> (ูู ุตูุฑุฉ ุนุงูู ุชุญููู OpenJDK ุงูุฑุณูู) ุ ูุณูุชู ุชุญููู ุฎุฑูุทุฉ ุงูุฐุงูุฑุฉ- ุฃูู ุนูุฏ ุจุฏุก ุชุดุบูู JVM ุ ุชุณุฑูุน ููุช ุจุฏุก ุงูุชุดุบูู.  ููููุง ูุฐูู ุ ูู ุงูุณูู ุชุญุฏูุฏ ุญุฌู ูุณุงุญุฉ ุงููุตู ุงููุดุชุฑูุฉ ุฅุฐุง ููุช ุชุนุฑู ุญุฌู ุฃุฑุดููุงุช jsa. <br><br>  ูููุง ููู ุจููุงุช <b>ุฃุฏุงุฉ ุชุฌููุน ูุฌูุนู ุงูุจูุงูุงุช ุงูููููุฉ</b> ุงูุฃุตููุฉ: <br><br><pre style=";text-align:right;direction:rtl">  GC (ูุญููุธุฉ = 42137 ูููู ุจุงูุช ุ ููุชุฒูุฉ = 41801 ูููู ุจุงูุช)
     (malloc = 5705KB # 9460) 
     (ููู mmap: ูุญุฌูุฒ = 36432 ูููู ุจุงูุช ุ ููุชุฒู = 36096 ูููู ุจุงูุช) </pre><br>  ูููู Alexey Shipilev ูู ุงูุฏููู ุงููุฐููุฑ ุจุงููุนู ุญูู ุชุชุจุน ุงูุฐุงูุฑุฉ ุงูุฃุตููุฉ ุฃููู ูุดุบููู ุญูุงูู 4-5ูช ูู ุญุฌู ุงููููุฉ ุ ูููู ูู ุฅุนุฏุงุฏูุง ูููููุจ ุงูุตุบูุฑ (ูุตู ุฅูู ุนุฏุฉ ูุฆุงุช ูู ุงูููุบุงุจุงูุช) ุ ุจูุบุช ุงููููุงุช ุงูุนุงูุฉ 50ูช ูู ุญุฌู ุงููููุฉ. <br><br>  ูููู ุดุบู ูุณุงุญุฉ ูุจูุฑุฉ ุจูุงุณุทุฉ <b>ุฌุฏุงูู ุงูุฑููุฒ</b> : <br><br><pre style=";text-align:right;direction:rtl">  ุงูุฑูุฒ (ูุญุฌูุฒ = 16421 ูููู ุจุงูุช ุ ููุชุฒู = 16421 ูููู ุจุงูุช)
     (malloc = 15261KB # 203089) 
     (ุงูุณุงุญุฉ = 1159 ูููู ุจุงูุช # 1) </pre><br>  ูููููู ุจุชุฎุฒูู ุฃุณูุงุก ุงูุทุฑู ูุงูุชูููุนุงุช ุจุงูุฅุถุงูุฉ ุฅูู ุฑูุงุจุท ุฅูู ุณูุงุณู ูุชุฏุฑุฌุฉ.  ูุณูุก ุงูุญุธ ุ ูุจุฏู ูู ุงููููู ุชูุฏูุฑ ุญุฌู ุฌุฏูู ุงูุฑููุฒ ููุท ุจุนุฏ ุงูุญุงุฏุซุฉ ุจุงุณุชุฎุฏุงู ุชุชุจุน ุงูุฐุงูุฑุฉ ุงูุฃุตููุฉ. <br><br>  ูุง ุชุจููุ  ููููุง ูุชุชุจุน ุงูุฐุงูุฑุฉ ุงูุฃุตูู ุ ููุงู ุงููุซูุฑ ูู ุงูุฃุดูุงุก: <br><br><pre style=";text-align:right;direction:rtl">  ูุชุฑุฌู (ูุญุฌูุฒ = 509 ูููู ุจุงูุช ุ ููุชุฒู = 509 ูููู ุจุงูุช)
 ุฏุงุฎูู (ูุญุฌูุฒ = 1647 ูููู ุจุงูุช ุ ููุชุฒู = 1647 ูููู ุจุงูุช)
 ุฃุฎุฑู (ูุญููุธุฉ = 2110 ูููู ุจุงูุช ุ ููุชุฒูุฉ = 2110 ูููู ุจุงูุช)
 ูุทุนุฉ ุงูุณุงุญุฉ (ูุญููุธุฉ = 1712 ูููู ุจุงูุช ุ ููุชุฒูุฉ = 1712 ูููู ุจุงูุช)
 ุงูุชุณุฌูู (ูุญุฌูุฒ = 6 ูููู ุจุงูุช ุ ููุชุฒู = 6 ูููู ุจุงูุช)
 ุงููุณูุทุงุช (ูุญููุธุฉ = 19 ูููู ุจุงูุช ุ ุงุฑุชูุจุช = 19 ูููู ุจุงูุช)
 ุงููุญุฏุฉ ุงูููุทูุฉ (ูุญููุธุฉ = 227 ูููู ุจุงูุช ุ ุงุฑุชูุจุช = 227 ูููู ุจุงูุช)
 ุบูุฑ ูุนุฑูู (ูุญุฌูุฒ = 32 ูููู ุจุงูุช ุ ููุชุฒู = 32 ูููู ุจุงูุช) </pre><br>  ูููู ูู ูุฐุง ูุณุชุบุฑู ูุฏุฑุง ูุจูุฑุง ูู ุงููุถุงุก. <br><br>  ูุณูุก ุงูุญุธ ุ ูุง ูููู ุชูููุฏ ุฃู ุงูุชุญูู ูู ุงูุนุฏูุฏ ูู ููุงุทู ุงูุฐุงูุฑุฉ ุงููุฐููุฑุฉ ุ ูุฅุฐุง ูุงู ูููู ุฃู ูููู ุ ูุฅู ุงูุชูููู ุณูุชุญูู ุฅูู ุฌุญูู.  ุญุชู ูุฑุงูุจุฉ ุญุงูุชูุง ูููุฉ ุบูุฑ ุชุงููุฉ ุ ุญูุซ ุฃู ุชุถููู "ุชุนูุจ ุงูุฐุงูุฑุฉ ุงูุฃุตููุฉ" ูุณุชูุฒู ููููุงู ุฃุฏุงุก ุงูุชุทุจูู ูุชููููู ูู ุงูุฅูุชุงุฌ ูู ุฎุฏูุฉ ูุงูุฉ ููุณุช ููุฑุฉ ุฌูุฏุฉ. <br><br>  ููุน ุฐูู ุ ูู ุฃุฌู ุงูุงูุชูุงู ุ ุฏุนููุง ูุญุงูู ุฃู ูููุฑ ูู ุงูุฑุณู ุงูุจูุงูู ุจูู ูุง ูุดูุฑ ุฅููู ุชุชุจุน ุงูุฐุงูุฑุฉ ุงูุฃุตููุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/t_/5d/kn/t_5dkncjh0wrn9qmftrp3wgwg2w.png"></div><br><br>  ููุณ ุณูุฆุง!  ุงููุงุฑู ุงูุจุงูู ูู ุญูู ุนุงู ูุชุฌุฒุฆุฉ / ุชุฎุตูุต ุงูุฐุงูุฑุฉ (ุฅูู ุตุบูุฑ ุฌุฏูุง ุ ูุธุฑูุง ูุฃููุง ูุณุชุฎุฏู jemalloc) ุฃู ุงูุฐุงูุฑุฉ ุงูุชู ุฎุตุตุชูุง libs ุงูุฃุตููุฉ.  ูุญู ููุท ูุณุชุฎุฏู ูุงุญุฏุฉ ูู ูุฐู ุงูุชุฎุฒูู ุงููุนุงู ูุดุฌุฑุฉ ุงูุจุงุฏุฆุฉ. <br><br>  ูุฐูู ุ ูุชูุจูุฉ ุงุญุชูุงุฌุงุชูุง ุ ูููู ุชูููุฏ ูุง ูููููุง: ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุ Metaspace ุ ููุฏ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ุงูุฐุงูุฑุฉ ุงููุจุงุดุฑุฉ.  ุจุงููุณุจุฉ ููู ุดูุก ุขุฎุฑ ุ ูุชุฑู ุจุนุถ ุงูุฃุณุณ ุงููุนูููุฉ ุ ุงูุชู ุชุญุฏุฏูุง ูุชุงุฆุฌ ุงูููุงุณุงุช ุงูุนูููุฉ. <br><br>  ุจุนุฏ ุงูุชุนุงูู ูุน ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุงูุฐุงูุฑุฉ ุ ููุชูู ุฅูู ุงูููุฑุฏ ุงูุชุงูู ุงูุฐู ูููู ุฃู ุชุชูุงูุณ ุงูุชุทุจููุงุช ุนููู - ุนูู ุงูุฃูุฑุงุต. <br><br><a name="disks"></a><h4 style=";text-align:right;direction:rtl">  ุฌุงูุง ููุญุฑูุงุช ุงูุฃูุฑุงุต </h4><br>  ููุนูู ุ ูู ุดูุก ุณูุก ููุบุงูุฉ: ููู ุจุทูุฆุฉ ููููู ุฃู ุชุคุฏู ุฅูู ุจูุงุฏุฉ ููููุณุฉ ููุชุทุจูู.  ูุฐูู ุ ูููู ุจูู ุงุฑุชุจุงุท ุฌุงูุง ุนู ุงูุฃูุฑุงุต ูุฏุฑ ุงูุฅููุงู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุชุจ ุฌููุน ุณุฌูุงุช ุงูุชุทุจูู ุฅูู syslog ุงููุญูู ุนุจุฑ UDP.  ูุฐุง ูุชุฑู ุจุนุถ ุงููุฑุตุฉ ูููุฏุงู ุงูุณุฌูุงุช ุงููุงุฒูุฉ ูู ููุงู ูุง ุนูู ุทูู ุงูุทุฑูู ุ ูููู ููุง ุฃุธูุฑุช ุงูููุงุฑุณุฉ ุ ูุฅู ูุซู ูุฐู ุงูุญุงูุงุช ูุงุฏุฑุฉ ุฌุฏูุง. </li><li style=";text-align:right;direction:rtl">  ุณูู ููุชุจ ุณุฌูุงุช JVM ูู tmpfs ุ ููุฐุง ูุญู ููุท ุจุญุงุฌุฉ ุฅูู ุชุญููู ุนุงูู ูููุงุก ุฅูู ุงููููุน ุงููุทููุจ ูุน ุญุฌู <code>/dev/shm</code> . </li></ul><br><br>  ุฅุฐุง ูุชุจูุง ุณุฌูุงุช ูู syslog ุฃู ูู tmpfs ุ ูุงูุชุทุจูู ููุณู ูุง ููุชุจ ุฃู ุดูุก ุนูู ุงููุฑุต ุจุงุณุชุซูุงุก ููุงูุจ ุงููุฑู ุ ุซู ุงุชุถุญ ุฃู ุงููุตุฉ ุฐุงุช ุงูุฃูุฑุงุต ูููู ุงุนุชุจุงุฑูุง ูุบููุฉ ูู ูุฐุงุ <br><br>  ุจุงูุทุจุน ูุง. <br><br>  ููุงุญุธ ุงูุฑุณู ุงูุจูุงูู ุงูุฎุงุต ุจูุฏุฉ ุชููู ุงูุชููู ูุคูุชูุง ูู ุงูุนุงูู ุ ููุฑู ุตูุฑุฉ ุญุฒููุฉ - ุชููู ุงูุชููู ูุคูุชูุง ุนูู ุงููุถูููู ุจูุฆุงุช ุงููููู ุซุงููุฉ ุ ูุนูู ูุถูู ูุงุญุฏ ูููููู ุงููุตูู ุฅูู ุซุงููุฉ ูุงุญุฏุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tf/nd/pb/tfndpbg7mtpaylny7-cflvrukzg.png"></div><br><br>  ูุบูู ุนู ุงูููู ุฃู ูุฐุง ูุคุซุฑ ุณูุจุง ุนูู ุงูุชุทุจููุ  ููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฑุณู ุจูุงูู ูุนูุณ ููุช ุงุณุชุฌุงุจุฉ ุงูุฎุฏูุฉ ููููุง ููุนููุงุก: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/nc/d0/_n/ncd0_ndoybiyy42wzrh68ppj-_0.png"></div><br><br>  ูุฐู ุฎุฏูุฉ ุจุณูุทุฉ ููุบุงูุฉ ุ ุญูุซ ุชูุฏู ูู ูุนุธููุง ุฑุฏูุฏูุง ูุฎุจุฃุฉ ุ ูุฐูู ูู ุฃูู ุชุฃุชู ูุฐู ุงูููุงุนูุฏ ุงูุจุงูุธุฉ ุ ุจุฏุกูุง ูู ุงููุณุจุฉ ุงููุฆููุฉ 95ุ  ุงูุฎุฏูุงุช ุงูุฃุฎุฑู ููุง ุตูุฑุฉ ููุงุซูุฉ ุ ุนูุงูุฉ ุนูู ุฐูู ุ ุชูุทุฑ ุงููููุงุช ุจุซุจุงุช ูุญุณูุณ ุนูุฏ ููู ุงูุงุชุตุงู ูู ุชุฌูุน ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุนูุฏ ุชูููุฐ ุงูุทูุจุงุช ุ ูููู ุฌุฑุง. <br><br>  ูุง ุนูุงูุฉ ูุญุฑู ุงูุฃูุฑุงุต ุจูุ  - ุฃูุช ุชุณุฃู.  ุงุชุถุญ ุงููุซูุฑ ูุชูุนูู ุญูุงู ุฐูู. <br>  ุฃุธูุฑ ุชุญููู ููุตู ูููุดููุฉ ุฃู ูุชุฑุงุช ุชููู STW ุงูุทูููุฉ ุชูุดุฃ ุจุณุจุจ ุญูููุฉ ุฃู ุงูุฎููุท ุชูุชูู ุฅูู ููุทุฉ ุงูุฃูุงู ููุชุฑุฉ ุทูููุฉ.  ุจุนุฏ ูุฑุงุกุฉ ููุฏ JVM ุ ุฃุฏุฑููุง ุฃูู ุฎูุงู ุชุฒุงูู ุงูุฎููุท ุนูู ููุทุฉ ุงูุฃูุงู ุ ูููู ูู JVM ูุชุงุจุฉ ุงูููู <code>/tmp/hsperfdata*</code> ุฎูุงู ุฎุฑูุทุฉ ุงูุฐุงูุฑุฉ ุ ุงูุชู ุชุตุฏุฑ ุฅูููุง ุจุนุถ ุงูุฅุญุตุงุกุงุช.  ุชุณุชุฎุฏู ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ูุซู <code>jstat</code> ู <code>jps</code> <code>jstat</code> <code>jps</code> . <br><br>  <code>-XX:+PerfDisableSharedMem</code> ุนูู ููุณ ุงูุฌูุงุฒ ูุน ุงูุฎูุงุฑ <code>-XX:+PerfDisableSharedMem</code> ู ... <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/1r/aw/q7/1rawq7kjvmrjznko2781or7kzdm.png"></div><br><br>  ุฌูุชู treadpool ููุงููุณ ุงุณุชูุฑุงุฑ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qz/bs/pj/qzbspjvpdjfhjjtbwrn6et55wns.png"></div><br><br>         (,         ): <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ni/ig/ji/niigjizzguoke8dcfdz2ssqnqa8.png"></div><br><br>  ,         ,  ,        . <br><br><a name="monitor"></a><h4 style=";text-align:right;direction:rtl">    ? </h4><br>     Java-  , ,  ,    . <br><br>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Nuts and Bolts</a> ,          .              ,     .     ,      ,  JMX. <br><br>      ,          .          . <br><br>     statsd    JVM,    (heap,   non-heap   ): <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/n9/iw/vs/n9iwvsjan7hxeo-xsksaggthrqy.png"></div><br><br>  ,    ,       . <br><br>    โ       ,    ,  ,    ,    ?        .     ()  -,     ,   RPS   . <br><br>     :   ,              .         .        ammo-  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">.</a> .    . : <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qr/ry/wh/qrrywh-id3u5lbk7ldms8n-n_ck.png"></div><br><br>        . <br><br>               ,     .  ,      ,     - ,   ,   . <br><br><h4 style=";text-align:right;direction:rtl">  ูู ุงูุฎุชุงู </h4><br>   ,  Java  Docker โ    ,      .     . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar450954/">https://habr.com/ru/post/ar450954/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar450942/index.html">Sidecar ููุงููู ุชูุณูู</a></li>
<li><a href="../ar450946/index.html">ูุฑุต ุงููุงุชู ุงูุฎูููู ุนูู LPC810</a></li>
<li><a href="../ar450948/index.html">MU-MIMO: ูุงุญุฏุฉ ูู ุฎูุงุฑุฒููุงุช ุงูุชูููุฐ</a></li>
<li><a href="../ar450950/index.html">ุฏุงุฑุช ุชูุงุฑุงุช ุฃุณุงุณูุงุช</a></li>
<li><a href="../ar450952/index.html">ูุคุดุฑ ุงููุชูุณุทุฉ ู Antibank</a></li>
<li><a href="../ar450956/index.html">ููุงุฑูุฉ ุจูู ุงูุจููููููู ุงูุตูุงุนู: ISIM ููุงุจู. KICS</a></li>
<li><a href="../ar450958/index.html">AnyStub ุ ููุชุจุฉ ุฌุงูุง ุงุชุตุงู ูุนุจ</a></li>
<li><a href="../ar450962/index.html">ูุถุฎุงุช ุงูุฃูุณูููู ุ ุงูุฑูุงุฆู ุงูุฏูููุฉ ุงููุงุถุญุฉ ุ ูุฑุงุฏูู ูุญุฏุฏ ุจุงูุจุฑูุงูุฌ</a></li>
<li><a href="../ar450964/index.html">ููุชุจุฉ x86 SIMD ุงูุฌุฏูุฏุฉ - ุชุตุญูุญ ุฅููุชุฑูู</a></li>
<li><a href="../ar450966/index.html">ุชุณุฌูู ุงูููุฏูู ูู ุฌูุงุฒ ููุจููุชุฑ ูุฏูู - ุทุฑู ูู LGR</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>