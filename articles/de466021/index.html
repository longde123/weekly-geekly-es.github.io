<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👼🏾 💲 👼🏿 Wie ich Yandex.Alice beigebracht habe, über Sexspielzeug zu sprechen 👩‍❤️‍👩 🚎 🚝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir integrieren Yandex.Alisa und Sexshops über Spring Boot. 

 Das Thema Sprachassistenten gewinnt zunehmend an Bedeutung, und ich habe mich diesem Tr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie ich Yandex.Alice beigebracht habe, über Sexspielzeug zu sprechen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466021/">  Wir integrieren Yandex.Alisa und Sexshops über Spring Boot. <br><br>  Das Thema Sprachassistenten gewinnt zunehmend an Bedeutung, und ich habe mich diesem Trend angeschlossen und den größten Großhandelsanbieter für Intimwaren und Yandex.Alisa integriert. <br><a name="habracut"></a><br>  <b>Idee</b> : Der Lieferant hat persönliche Konten von Inhabern von Online-Shops, und es ist erforderlich, analytische Daten des Lieferanten über den Sprachkanal von Alice anzugeben. <br><br>  Die Integration bestand aus zwei Teilen: <br><br><ul><li>  Integration von Webservice und REST-API des Warenlieferanten. </li><li>  Integration von Yandex.Alice und einem Webdienst zur Bearbeitung von Benutzeranfragen. </li></ul><br><h2>  Integration von Web Service und REST API des Warenlieferanten </h2><br>  Der Dienst sollte verstehen, was genau der Benutzer angefordert hat, und diese Daten vom Server des Lieferanten anfordern.  Wir haben uns entschlossen, einen Service für Spring Boot zu schreiben. <br><br><h3>  Projekteinrichtung </h3><br>  Wir erstellen ein Repository in Git und stellen das Projekt mithilfe von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">spring initializr</a> beim Spring Boot bereit (wir geben das Web in Abhängigkeiten an). <br><br>  Die Anforderung an den Dienst erfolgt im JSON-Format.  Es hat eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gut dokumentierte Struktur</a> , so dass das Generieren von Klassen ganz einfach ist: <br><br><img src="https://imageshack.com/i/plcr0ysAp" alt="Bild"><br><br>  Praktischerweise werden Schlüsselwörter in der Anfrage hervorgehoben, z. B. eine erkannte Adresse.  Sie befinden sich im Block <code>“entities”</code> : <br><br><img src="https://imageshack.com/i/pm0Cso3Sp" alt="Bild"><br><br>  In unserem Fall war es jedoch bequemer, das <code>Command</code> verwenden.  Es enthält den vom Benutzer vorgegebenen Text.  Da der Integrationsdienst mit der Erkennung von Bedeutungen befasst ist, müssen Anforderungen analysiert werden.  Sie sind gut voneinander trennbar (Anfragen nach aufgegebenen Bestellungen, Anfragen nach Bestellungen in Bearbeitung), daher haben wir beschlossen, sie mit regulären Ausdrücken zu analysieren. <br><br>  Die Integration mit dem Anbieter wurde über die Apache httpclients-Bibliothek und die Deserialisierung der XML-Antwort über jaxb implementiert. <br><br>  Also haben wir die Anfrage aussortiert und Daten vom Lieferanten angefordert.  Aber Alice ist ein strenges Mädchen und wird unsere Antwort daher nicht später als drei Sekunden später akzeptieren.  Und der Benutzer möchte möglicherweise eine vergleichende Beschreibung seines Geschäfts in den letzten zwei Jahren erhalten, was mehr Zeit in Anspruch nehmen wird.  Um dieses Problem zu lösen, haben wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das</a> Caching über die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ehCache-</a> Bibliothek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aktiviert</a> und das Laden von Benutzerdaten konfiguriert.  Konfrontiert mit einer neuen Nuance: Alice gibt fast keine personalisierten Benutzerdaten an.  Das heißt, Sie sehen nicht einmal E-Mails in der eingehenden Anfrage.  Es gibt nur eine Benutzer-ID, die die eindeutige Kennung des Geräts anzeigt.  Es wurde zum Schlüssel zur Identifizierung von Benutzern gemacht. <br><br>  Der Schlüssel ist da, der Cache ist, es bleibt zu verstehen, wann Informationen in ihn geladen werden müssen.  Der Benutzer fordert nicht sofort Daten an, sondern startet zuerst die Fertigkeit (dies ist der Begriff, der in Alice verwendet wird, ich werde weiter unten mehr darüber sprechen).  Für den Server sieht dies wie eine Anforderung mit einem leeren Befehlstag aus.  Zu diesem Zeitpunkt können Sie mit dem Herunterladen von Kundendaten beginnen. Bis zum Senden der ersten Benutzeranfrage wurden alle Daten bereits in unseren Service hochgeladen. <br><br>  Für vollständige Tests und weitere Arbeiten im Produkt haben wir beschlossen, die Anwendung in der Cloud auf Heroku bereitzustellen.  Gehen Sie dazu auf die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heroku-</a> Website, registrieren Sie sich, laden Sie heroku cli herunter und installieren Sie es.  Öffnen Sie dann die Konsole und geben Sie den <code>heroku login</code> .  Gehen Sie mit der Projekt-CD ~ / myapp in das Verzeichnis und führen Sie <code>heroku create</code> . <br><br>  Wenn Sie die Anwendung erstellen, erstellt Git ein Remote-Repository namens heroku, das Ihrem lokalen Git-Repository zugeordnet ist.  Standardmäßig generiert Heroku auf dem Server einen zufälligen Namen für Ihr Projekt.  Sie können es ersetzen, indem Sie den Anwendungsnamen mit <code>heroku create myapp</code> . <br><br>  Führen Sie den Befehl aus, um den Start der Anwendung zu überprüfen. <br><br> <code>heroku ps:scale web=1</code> <br> <br>  Und wenn Sie den Pfad „/“ gehen müssen, führen wir <code>heroku open</code> . <br>  Der erste Integrationspunkt ist fertig. <br><br><h2>  Integration von Yandex.Alice und Anforderungsverarbeitungsservice </h2><br>  Wir implementieren die Integration durch die Schaffung der sogenannten Skill auf der Yandex-Plattform.  Registrieren Sie sich zuerst in Yandex und gehen Sie dann zur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entwicklerseite</a> .  Klicken Sie auf "Dialog erstellen" und wählen Sie den Dialogtyp aus: <br><br><img src="https://imageshack.com/i/pldC2gG5p" alt="Bild"><br><br>  Auf der Registerkarte "Einstellungen" müssen Sie die Felder ausfüllen: <br><br><img src="https://imageshack.com/i/poWuOxHUp" alt="Bild"><br><br><ul><li>  <b>Fähigkeitsname</b> - der Name, der in Alices Katalog angezeigt wird.  Damit kann der Benutzer die Fertigkeit aktivieren, z. B. "Starten Sie die Fertigkeit [Name der Fertigkeit]". </li><li>  <b>Aktivierungsname</b> - Hier können Sie verschiedene Optionen für den Zugriff auf die Fertigkeit angeben.  Standardmäßig ist eine Option für den Aktivierungsnamen der Name der Fertigkeit. </li><li>  <b>Ein Beispiel für eine Anfrage</b> ist eine Phrase, mit der Alice diese Fertigkeit aktiviert.  Anfragen werden nach der Veröffentlichung als Schaltflächen im Verzeichnis angezeigt. </li><li>  <b>Webhook-URL</b> - Sie müssen die URL unseres Webdienstes angeben, der Benutzeranfragen verarbeitet. </li><li>  Yandex.Cloud - Yandex kann seiner Cloud einen Zuschuss gewähren, aber wir werden den Dienst auf Heroku bereitstellen, damit wir ihn nicht ankreuzen. </li><li>  <b>Stimme</b> - hier können Sie die Stimme auswählen, die Ihre Fähigkeiten sprechen.  Es gibt verschiedene Variationen von Mann und Frau.  Es ist jedoch zu bedenken, dass der Benutzer höchstwahrscheinlich sagen wird: "Alice, starte die Fertigkeit". Wenn Alice mit dem männlichen Bariton antwortet, kann dies etwas verwirrend sein. </li><li>  <b>Einschränkungen der verwendeten Plattformen</b> - ob für die Arbeit mit einer Fertigkeit ein Bildschirm erforderlich ist.  In unserem Fall nein, setzen Sie also kein Häkchen. </li><li>  <b>Datenschutz</b> - Aktivieren Sie das Kontrollkästchen, wenn die Fertigkeit nicht im Katalog angezeigt werden soll. </li><li>  <b>Brand Verification Site</b> - Die Site-Adresse für die Fertigkeit.  Die Fähigkeit, für die Sie dieses Feld ausgefüllt haben, wird nur moderiert, wenn Sie die Rechte an der angegebenen Site in Yandex.Webmaster bestätigt haben. </li><li>  <b>Kategorie</b> - in unserem Fall ist es "Business and Finance". </li><li>  <b>Beschreibung</b> - warum brauchst du deine Fähigkeiten?  Die Skill-Beschreibung wird im Skills-Katalog angezeigt und steht den Benutzern zur Verfügung. </li><li>  <b>Notizen für den Moderator</b> - vielleicht das interessanteste Feld.  Um in den Katalog zu gelangen, muss die Fertigkeit moderiert werden. Dies bedeutet, dass bestimmte Regeln eingehalten werden müssen, die hier beschrieben werden.  In diesem Feld können Sie den Testprozess beschreiben.  Zum Beispiel, wie man die Autorisierung und ein typisches Benutzerszenario durchläuft. </li><li>  <b>Altersbeschränkungen</b> - Trotz des Fachgebiets übermitteln wir Daten, die für jede Altersgruppe geeignet sind.  Setzen Sie daher kein Häkchen. </li><li>  <b>Symbol</b> ist ein Muss :) </li></ul><br>  Speichern Sie den Dialog.  Alle Änderungen an der Skill-Einstellung werden erst wirksam, wenn Sie auf die Schaltfläche "Speichern" klicken. <br><br>  Wir haben die Integration konfiguriert, den Service geschrieben, jetzt können Sie ihn testen. <br><br>  Gehen Sie zur Registerkarte "Testen". <br><br><img src="https://imageshack.com/i/plnhhATFp" alt="Bild"><br><br>  Hier können Sie die Leistung der Fertigkeit überprüfen.  Der Einfachheit halber haben wir der Fertigkeit einen schnellen Zugriff auf Funktionstasten hinzugefügt. <br><br>  Es gibt Einschränkungen: Sie können die Fähigkeit nicht auf die Richtigkeit der Startphrase überprüfen und Sie können die Spracheingabe / -ausgabe nicht überprüfen.  Und sollte es keine Probleme mit der Phrase geben, wird die korrekte Aussprache der Antworten erst nach der Veröffentlichung der Fertigkeit überprüft. <br>  Nach allen Tests kann die Fertigkeit zur Moderation gesendet werden.  Gehen Sie dazu zur Registerkarte "Allgemeine Informationen" und klicken Sie auf "Moderation". <br><br><img src="https://imageshack.com/i/pmBBZRvtp" alt="Bild"><br><br>  Nach der Moderation wird anstelle dieser Schaltfläche die Schaltfläche Veröffentlichen angezeigt.  Nach der Veröffentlichung wird die Fertigkeit im offiziellen Yandex-Katalog angezeigt. <br><br><h2>  Funktionen und Einschränkungen </h2><br>  Im Moment sind die Fähigkeiten etwas von Alice selbst getrennt (ich muss sagen "starte die Fähigkeit"), was es schwierig macht, Alice als vollwertige Sprachassistentin wahrzunehmen.  Es wäre großartig, Ihren Kompetenzkontext zu gestalten und Alice direkt Fragen zu stellen.  Es gibt keine Möglichkeit, andere Benutzerinformationen als userId abzurufen, bei der es sich um die Gerätekennung handelt.  Daher muss jedes Gerät erneut autorisiert werden, was das Speichern einer einzelnen Benutzersitzung erschwert.  Außerdem kann die Fertigkeit keine Push-Nachrichten senden, sodass die Erinnerungsfertigkeit nicht funktioniert. <br><br>  Auf der anderen Seite können Fähigkeiten eine gute Plattform für die Implementierung der Sprachsteuerung sein, beispielsweise für Haushaltsgeräte.  Die Fähigkeit kann auch nützlich sein, um zu trainieren oder Experimente durchzuführen, um Informationen über Bestellungen, Preise usw. zu klären.  Im Allgemeinen, wenn Benutzer eine kurze genaue Frage stellen oder einen kurzen Befehl geben können. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466021/">https://habr.com/ru/post/de466021/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de465995/index.html">LDC - Ausflug</a></li>
<li><a href="../de466001/index.html">"Mobile" Feng Shui, oder wir schlafen richtig (Kaffee, Kakerlaken und Intoleranz bei Habré)</a></li>
<li><a href="../de466015/index.html">Ein bisschen mehr über Trigonometrie beim Rechnen</a></li>
<li><a href="../de466017/index.html">Livy - das fehlende Glied in der Hadoop Spark Airflow Python-Kette</a></li>
<li><a href="../de466019/index.html">ABBYY Mobile Web Capture: Hochwertige Fotos von Dokumenten direkt im Browser Ihres Smartphones</a></li>
<li><a href="../de466027/index.html">Das Buch "Der Weg von Python. Schwarzer Gürtel für Entwicklung, Skalierung, Test und Bereitstellung “</a></li>
<li><a href="../de466029/index.html">Wie man einen Quantencomputer in einen perfekten Zufallszahlengenerator verwandelt</a></li>
<li><a href="../de466031/index.html">DeepMinds epische Mission, das komplexeste wissenschaftliche Problem zu lösen</a></li>
<li><a href="../de466033/index.html">Wie man ein Team in die Suche nach Ideen einbezieht und viel mehr als nur Ideen bekommt</a></li>
<li><a href="../de466039/index.html">PHP-Bibliotheken für den E-Commerce: Arbeiten mit ATOL und Payture, Parsen von GS1-Codes und anderen Aufgaben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>