<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëºüèæ üí≤ üëºüèø Wie ich Yandex.Alice beigebracht habe, √ºber Sexspielzeug zu sprechen üë©‚Äç‚ù§Ô∏è‚Äçüë© üöé üöù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir integrieren Yandex.Alisa und Sexshops √ºber Spring Boot. 

 Das Thema Sprachassistenten gewinnt zunehmend an Bedeutung, und ich habe mich diesem Tr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie ich Yandex.Alice beigebracht habe, √ºber Sexspielzeug zu sprechen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466021/">  Wir integrieren Yandex.Alisa und Sexshops √ºber Spring Boot. <br><br>  Das Thema Sprachassistenten gewinnt zunehmend an Bedeutung, und ich habe mich diesem Trend angeschlossen und den gr√∂√üten Gro√ühandelsanbieter f√ºr Intimwaren und Yandex.Alisa integriert. <br><a name="habracut"></a><br>  <b>Idee</b> : Der Lieferant hat pers√∂nliche Konten von Inhabern von Online-Shops, und es ist erforderlich, analytische Daten des Lieferanten √ºber den Sprachkanal von Alice anzugeben. <br><br>  Die Integration bestand aus zwei Teilen: <br><br><ul><li>  Integration von Webservice und REST-API des Warenlieferanten. </li><li>  Integration von Yandex.Alice und einem Webdienst zur Bearbeitung von Benutzeranfragen. </li></ul><br><h2>  Integration von Web Service und REST API des Warenlieferanten </h2><br>  Der Dienst sollte verstehen, was genau der Benutzer angefordert hat, und diese Daten vom Server des Lieferanten anfordern.  Wir haben uns entschlossen, einen Service f√ºr Spring Boot zu schreiben. <br><br><h3>  Projekteinrichtung </h3><br>  Wir erstellen ein Repository in Git und stellen das Projekt mithilfe von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">spring initializr</a> beim Spring Boot bereit (wir geben das Web in Abh√§ngigkeiten an). <br><br>  Die Anforderung an den Dienst erfolgt im JSON-Format.  Es hat eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gut dokumentierte Struktur</a> , so dass das Generieren von Klassen ganz einfach ist: <br><br><img src="https://imageshack.com/i/plcr0ysAp" alt="Bild"><br><br>  Praktischerweise werden Schl√ºsselw√∂rter in der Anfrage hervorgehoben, z. B. eine erkannte Adresse.  Sie befinden sich im Block <code>‚Äúentities‚Äù</code> : <br><br><img src="https://imageshack.com/i/pm0Cso3Sp" alt="Bild"><br><br>  In unserem Fall war es jedoch bequemer, das <code>Command</code> verwenden.  Es enth√§lt den vom Benutzer vorgegebenen Text.  Da der Integrationsdienst mit der Erkennung von Bedeutungen befasst ist, m√ºssen Anforderungen analysiert werden.  Sie sind gut voneinander trennbar (Anfragen nach aufgegebenen Bestellungen, Anfragen nach Bestellungen in Bearbeitung), daher haben wir beschlossen, sie mit regul√§ren Ausdr√ºcken zu analysieren. <br><br>  Die Integration mit dem Anbieter wurde √ºber die Apache httpclients-Bibliothek und die Deserialisierung der XML-Antwort √ºber jaxb implementiert. <br><br>  Also haben wir die Anfrage aussortiert und Daten vom Lieferanten angefordert.  Aber Alice ist ein strenges M√§dchen und wird unsere Antwort daher nicht sp√§ter als drei Sekunden sp√§ter akzeptieren.  Und der Benutzer m√∂chte m√∂glicherweise eine vergleichende Beschreibung seines Gesch√§fts in den letzten zwei Jahren erhalten, was mehr Zeit in Anspruch nehmen wird.  Um dieses Problem zu l√∂sen, haben wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das</a> Caching √ºber die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ehCache-</a> Bibliothek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aktiviert</a> und das Laden von Benutzerdaten konfiguriert.  Konfrontiert mit einer neuen Nuance: Alice gibt fast keine personalisierten Benutzerdaten an.  Das hei√üt, Sie sehen nicht einmal E-Mails in der eingehenden Anfrage.  Es gibt nur eine Benutzer-ID, die die eindeutige Kennung des Ger√§ts anzeigt.  Es wurde zum Schl√ºssel zur Identifizierung von Benutzern gemacht. <br><br>  Der Schl√ºssel ist da, der Cache ist, es bleibt zu verstehen, wann Informationen in ihn geladen werden m√ºssen.  Der Benutzer fordert nicht sofort Daten an, sondern startet zuerst die Fertigkeit (dies ist der Begriff, der in Alice verwendet wird, ich werde weiter unten mehr dar√ºber sprechen).  F√ºr den Server sieht dies wie eine Anforderung mit einem leeren Befehlstag aus.  Zu diesem Zeitpunkt k√∂nnen Sie mit dem Herunterladen von Kundendaten beginnen. Bis zum Senden der ersten Benutzeranfrage wurden alle Daten bereits in unseren Service hochgeladen. <br><br>  F√ºr vollst√§ndige Tests und weitere Arbeiten im Produkt haben wir beschlossen, die Anwendung in der Cloud auf Heroku bereitzustellen.  Gehen Sie dazu auf die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heroku-</a> Website, registrieren Sie sich, laden Sie heroku cli herunter und installieren Sie es.  √ñffnen Sie dann die Konsole und geben Sie den <code>heroku login</code> .  Gehen Sie mit der Projekt-CD ~ / myapp in das Verzeichnis und f√ºhren Sie <code>heroku create</code> . <br><br>  Wenn Sie die Anwendung erstellen, erstellt Git ein Remote-Repository namens heroku, das Ihrem lokalen Git-Repository zugeordnet ist.  Standardm√§√üig generiert Heroku auf dem Server einen zuf√§lligen Namen f√ºr Ihr Projekt.  Sie k√∂nnen es ersetzen, indem Sie den Anwendungsnamen mit <code>heroku create myapp</code> . <br><br>  F√ºhren Sie den Befehl aus, um den Start der Anwendung zu √ºberpr√ºfen. <br><br> <code>heroku ps:scale web=1</code> <br> <br>  Und wenn Sie den Pfad ‚Äû/‚Äú gehen m√ºssen, f√ºhren wir <code>heroku open</code> . <br>  Der erste Integrationspunkt ist fertig. <br><br><h2>  Integration von Yandex.Alice und Anforderungsverarbeitungsservice </h2><br>  Wir implementieren die Integration durch die Schaffung der sogenannten Skill auf der Yandex-Plattform.  Registrieren Sie sich zuerst in Yandex und gehen Sie dann zur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entwicklerseite</a> .  Klicken Sie auf "Dialog erstellen" und w√§hlen Sie den Dialogtyp aus: <br><br><img src="https://imageshack.com/i/pldC2gG5p" alt="Bild"><br><br>  Auf der Registerkarte "Einstellungen" m√ºssen Sie die Felder ausf√ºllen: <br><br><img src="https://imageshack.com/i/poWuOxHUp" alt="Bild"><br><br><ul><li>  <b>F√§higkeitsname</b> - der Name, der in Alices Katalog angezeigt wird.  Damit kann der Benutzer die Fertigkeit aktivieren, z. B. "Starten Sie die Fertigkeit [Name der Fertigkeit]". </li><li>  <b>Aktivierungsname</b> - Hier k√∂nnen Sie verschiedene Optionen f√ºr den Zugriff auf die Fertigkeit angeben.  Standardm√§√üig ist eine Option f√ºr den Aktivierungsnamen der Name der Fertigkeit. </li><li>  <b>Ein Beispiel f√ºr eine Anfrage</b> ist eine Phrase, mit der Alice diese Fertigkeit aktiviert.  Anfragen werden nach der Ver√∂ffentlichung als Schaltfl√§chen im Verzeichnis angezeigt. </li><li>  <b>Webhook-URL</b> - Sie m√ºssen die URL unseres Webdienstes angeben, der Benutzeranfragen verarbeitet. </li><li>  Yandex.Cloud - Yandex kann seiner Cloud einen Zuschuss gew√§hren, aber wir werden den Dienst auf Heroku bereitstellen, damit wir ihn nicht ankreuzen. </li><li>  <b>Stimme</b> - hier k√∂nnen Sie die Stimme ausw√§hlen, die Ihre F√§higkeiten sprechen.  Es gibt verschiedene Variationen von Mann und Frau.  Es ist jedoch zu bedenken, dass der Benutzer h√∂chstwahrscheinlich sagen wird: "Alice, starte die Fertigkeit". Wenn Alice mit dem m√§nnlichen Bariton antwortet, kann dies etwas verwirrend sein. </li><li>  <b>Einschr√§nkungen der verwendeten Plattformen</b> - ob f√ºr die Arbeit mit einer Fertigkeit ein Bildschirm erforderlich ist.  In unserem Fall nein, setzen Sie also kein H√§kchen. </li><li>  <b>Datenschutz</b> - Aktivieren Sie das Kontrollk√§stchen, wenn die Fertigkeit nicht im Katalog angezeigt werden soll. </li><li>  <b>Brand Verification Site</b> - Die Site-Adresse f√ºr die Fertigkeit.  Die F√§higkeit, f√ºr die Sie dieses Feld ausgef√ºllt haben, wird nur moderiert, wenn Sie die Rechte an der angegebenen Site in Yandex.Webmaster best√§tigt haben. </li><li>  <b>Kategorie</b> - in unserem Fall ist es "Business and Finance". </li><li>  <b>Beschreibung</b> - warum brauchst du deine F√§higkeiten?  Die Skill-Beschreibung wird im Skills-Katalog angezeigt und steht den Benutzern zur Verf√ºgung. </li><li>  <b>Notizen f√ºr den Moderator</b> - vielleicht das interessanteste Feld.  Um in den Katalog zu gelangen, muss die Fertigkeit moderiert werden. Dies bedeutet, dass bestimmte Regeln eingehalten werden m√ºssen, die hier beschrieben werden.  In diesem Feld k√∂nnen Sie den Testprozess beschreiben.  Zum Beispiel, wie man die Autorisierung und ein typisches Benutzerszenario durchl√§uft. </li><li>  <b>Altersbeschr√§nkungen</b> - Trotz des Fachgebiets √ºbermitteln wir Daten, die f√ºr jede Altersgruppe geeignet sind.  Setzen Sie daher kein H√§kchen. </li><li>  <b>Symbol</b> ist ein Muss :) </li></ul><br>  Speichern Sie den Dialog.  Alle √Ñnderungen an der Skill-Einstellung werden erst wirksam, wenn Sie auf die Schaltfl√§che "Speichern" klicken. <br><br>  Wir haben die Integration konfiguriert, den Service geschrieben, jetzt k√∂nnen Sie ihn testen. <br><br>  Gehen Sie zur Registerkarte "Testen". <br><br><img src="https://imageshack.com/i/plnhhATFp" alt="Bild"><br><br>  Hier k√∂nnen Sie die Leistung der Fertigkeit √ºberpr√ºfen.  Der Einfachheit halber haben wir der Fertigkeit einen schnellen Zugriff auf Funktionstasten hinzugef√ºgt. <br><br>  Es gibt Einschr√§nkungen: Sie k√∂nnen die F√§higkeit nicht auf die Richtigkeit der Startphrase √ºberpr√ºfen und Sie k√∂nnen die Spracheingabe / -ausgabe nicht √ºberpr√ºfen.  Und sollte es keine Probleme mit der Phrase geben, wird die korrekte Aussprache der Antworten erst nach der Ver√∂ffentlichung der Fertigkeit √ºberpr√ºft. <br>  Nach allen Tests kann die Fertigkeit zur Moderation gesendet werden.  Gehen Sie dazu zur Registerkarte "Allgemeine Informationen" und klicken Sie auf "Moderation". <br><br><img src="https://imageshack.com/i/pmBBZRvtp" alt="Bild"><br><br>  Nach der Moderation wird anstelle dieser Schaltfl√§che die Schaltfl√§che Ver√∂ffentlichen angezeigt.  Nach der Ver√∂ffentlichung wird die Fertigkeit im offiziellen Yandex-Katalog angezeigt. <br><br><h2>  Funktionen und Einschr√§nkungen </h2><br>  Im Moment sind die F√§higkeiten etwas von Alice selbst getrennt (ich muss sagen "starte die F√§higkeit"), was es schwierig macht, Alice als vollwertige Sprachassistentin wahrzunehmen.  Es w√§re gro√üartig, Ihren Kompetenzkontext zu gestalten und Alice direkt Fragen zu stellen.  Es gibt keine M√∂glichkeit, andere Benutzerinformationen als userId abzurufen, bei der es sich um die Ger√§tekennung handelt.  Daher muss jedes Ger√§t erneut autorisiert werden, was das Speichern einer einzelnen Benutzersitzung erschwert.  Au√üerdem kann die Fertigkeit keine Push-Nachrichten senden, sodass die Erinnerungsfertigkeit nicht funktioniert. <br><br>  Auf der anderen Seite k√∂nnen F√§higkeiten eine gute Plattform f√ºr die Implementierung der Sprachsteuerung sein, beispielsweise f√ºr Haushaltsger√§te.  Die F√§higkeit kann auch n√ºtzlich sein, um zu trainieren oder Experimente durchzuf√ºhren, um Informationen √ºber Bestellungen, Preise usw. zu kl√§ren.  Im Allgemeinen, wenn Benutzer eine kurze genaue Frage stellen oder einen kurzen Befehl geben k√∂nnen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466021/">https://habr.com/ru/post/de466021/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de465995/index.html">LDC - Ausflug</a></li>
<li><a href="../de466001/index.html">"Mobile" Feng Shui, oder wir schlafen richtig (Kaffee, Kakerlaken und Intoleranz bei Habr√©)</a></li>
<li><a href="../de466015/index.html">Ein bisschen mehr √ºber Trigonometrie beim Rechnen</a></li>
<li><a href="../de466017/index.html">Livy - das fehlende Glied in der Hadoop Spark Airflow Python-Kette</a></li>
<li><a href="../de466019/index.html">ABBYY Mobile Web Capture: Hochwertige Fotos von Dokumenten direkt im Browser Ihres Smartphones</a></li>
<li><a href="../de466027/index.html">Das Buch "Der Weg von Python. Schwarzer G√ºrtel f√ºr Entwicklung, Skalierung, Test und Bereitstellung ‚Äú</a></li>
<li><a href="../de466029/index.html">Wie man einen Quantencomputer in einen perfekten Zufallszahlengenerator verwandelt</a></li>
<li><a href="../de466031/index.html">DeepMinds epische Mission, das komplexeste wissenschaftliche Problem zu l√∂sen</a></li>
<li><a href="../de466033/index.html">Wie man ein Team in die Suche nach Ideen einbezieht und viel mehr als nur Ideen bekommt</a></li>
<li><a href="../de466039/index.html">PHP-Bibliotheken f√ºr den E-Commerce: Arbeiten mit ATOL und Payture, Parsen von GS1-Codes und anderen Aufgaben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>