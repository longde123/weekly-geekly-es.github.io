<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñêüèª üë®‚Äçüè≠ ‚è≥ Eine benutzerdefinierte M√∂glichkeit, sich mit STM32 anzufreunden: Nicht Arduino oder Discovery üìï ‚≠êÔ∏è üë™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Allen, die Mikrocontroller von STMicroelectronics verwenden oder sich daf√ºr interessieren, m√∂chte ich mein kleines Hobbyprojekt vorstellen. 


 Sowohl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Eine benutzerdefinierte M√∂glichkeit, sich mit STM32 anzufreunden: Nicht Arduino oder Discovery</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/406313/"><p>  Allen, die Mikrocontroller von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">STMicroelectronics</a> verwenden oder sich daf√ºr interessieren, m√∂chte ich mein kleines Hobbyprojekt vorstellen. </p><br><p> Sowohl Habr√© als auch geektimes haben bereits viele Artikel √ºber Mikrocontroller der STM32F-Serie, zum Beispiel: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">G√ºnstiges STM32-Board + Arduino IDE</a> , Der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Versuch, sich mit STM32 anzufreunden,</a> und die Antwort darauf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie man sich mit STM32</a> und vielen anderen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">anfreundet</a> .  Insgesamt behandeln sie dieses Thema sehr gut, aber es gibt eine Sache, aber ... In all diesen Artikeln werden vorgefertigte Karten und ein bestimmter Controller, die sich auf dieser Karte befinden, ber√ºcksichtigt.  Und was ist mit denen, die mit verschiedenen Controllern und sogar auf dem Steckbrett spielen wollen?  Beispielsweise k√∂nnen viele Karten, die ich mit dem STM32F4-Controller kenne (dieselbe STM32F4-Discovery), nicht in das Steckbrett eingesetzt werden.  Aber ich pers√∂nlich m√∂chte so etwas (Achtung, alle Bilder sind anklickbar): </p><br><p></p><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/89a/05c/d87/89a05cd87f5245578465097c8201b084.jpg"></a> </div><br>  Gleichzeitig m√∂chte ich, wie ich bereits geschrieben habe, nicht mit einem bestimmten Controller verbunden sein, sondern ihn einfach ersetzen k√∂nnen.  Diejenigen, die daran interessiert sind, wie ich diese nicht ganz gew√∂hnliche Wunschliste realisiert habe, bitte ich um Katze. <p></p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Einf√ºhrung (inspiriert von Kommentaren zum Artikel, bitte √ºberspringen, bevor Sie sie lesen)</b> <div class="spoiler_text"><p>  Ob Breadboards mit Anschl√ºssen verwendet werden sollen oder nicht, ist ein strittiger Punkt.  Ab einer bestimmten Anzahl von Komponenten werden sie nat√ºrlich unangenehm.  Obwohl die Komponente nicht sehr gro√ü ist und die Anzahl der Experimente in der Anfangsphase des Prototyping noch gro√ü ist, sind Steckbretter meiner Meinung nach praktisch.  Und hier, wenn Sie STM32 verwenden m√∂chten, erwartet uns ein Hinterhalt - sie sind im Gegensatz zu Atmega einfach nicht in DIP-Paketen enthalten.  Sie k√∂nnen fertige Demo-Boards kaufen, aber auch hier gibt es einen Hinterhalt - die meisten dieser Boards mit √§lteren Controllern k√∂nnen wegen der Doppelk√§mme nicht im Steckbrett stecken bleiben.  Das hei√üt, mit vorgefertigten Demo-Boards m√ºssen wir mit den j√ºngeren Controllern der Serie arbeiten (siehe denselben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nucleo in der DIP-Version</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Blue Pill</a> ).  Der zweite Weg besteht darin, spezielle Adapter herzustellen.  Dieser Artikel beschreibt diesen zweiten Pfad. </p></div></div><br><p>  Zeigen Sie sofort das Endergebnis.  Dies sind kleine doppelseitige Schals f√ºr verschiedene F√§lle, deren Druck im Reich der Mitte bestellt werden kann (die Chinesen haben nichts gegen das Drucken doppelseitiger Platten mit einem Paneel-Design): </p><br><p> <a href=""><img src="https://habrastorage.org/web/5e6/56c/fd9/5e656cfd9d3644a2a203e5f39e90b88f.jpg"></a> </p><br><p>  Ein Satz (rechts) besteht einfach aus einfachen Adaptern f√ºr das Steckbrett f√ºr LQFP32 / 48/64-Geh√§use, der zweite Satz (links) besteht ebenfalls aus Adaptern, jedoch mit einem JTAG-Anschluss, Strom-, Niederfrequenz- und Hochfrequenzquarz und einer Reset-Taste.  Alle anderen Controller-Pins befinden sich am Kamm.  Im Allgemeinen das Minimum.  Leider ist der JTAG-Anschluss nicht Standard, daher ist auch die Adapterplatine von JTAG-20 zu demselben JTAG-10 enthalten. </p><br><p>  Diese Platinen k√∂nnen von einem Haartrockner zu Hause leicht genug gel√∂tet werden. Wenn Sie also mehrere Controller, mehrere Platinen und passive Komponenten der Gr√∂√üe 0805 haben, k√∂nnen Sie in angemessener Zeit so etwas erhalten: </p><br><p> <a href=""><img src="https://habrastorage.org/web/0a3/cd3/be4/0a3cd3be45774cc7909e4d5b088b6670.jpg"></a> </p><br><p>  Und das scheint mir eine gute Freiheit der Kreativit√§t zu geben.  Wenn jemand das Thema ersch√∂pft zu haben scheint, dann ist hier ein Link zum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Repository</a> . </p><br><p>  Aber ich m√∂chte Ihnen Schritt f√ºr Schritt weiter erkl√§ren, wie Sie zu einem solchen Leben gelangen.  Bild, um Aufmerksamkeit zu erregen (grafische Darstellung des Problems): </p><br><p> <a href=""><img src="https://habrastorage.org/web/b38/cc7/069/b38cc70693f748b68eb3a77680169cb7.jpg"></a> </p><br><p>  Es gibt eine Streuung von Controllern (Serie L0, F3, F4), Stromversorgung, USART-USB-Konverter und Steckbrett.  Ich m√∂chte die LEDs blinken lassen.  Dieser Schritt ist sehr einfach gemacht.  Wir nehmen jeden Controller, Adapterkarte aus dem ersten Satz, wir l√∂ten mit einem Haartrockner.  Als n√§chstes ben√∂tigen Sie eine Dokumentation zum Anschlie√üen der Stromversorgung, des Programmierger√§ts und des Quarzes.  Hier hat ST die komplette Bestellung, alles ist auf der Seite mit der Dokumentation des ausgew√§hlten Controllers.  F√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">STM32F303K8</a> ben√∂tigen wir beispielsweise nur ein Dokument: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AN4206: Erste Schritte mit der Hardwareentwicklung der STM32F3-Serie</a> , bei der es Stromversorgungsschaltungen, Oszillatoren und einen Programmierer gibt, auf deren Grundlage Sie ein solches Modell erstellen k√∂nnen: </p><br><p></p><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/c2b/718/5f8/c2b7185f8a8b453db589da3152f6116d.jpg"></a> </div><br>  Dieser Controller hat keinen externen Niederfrequenzquarz, daher habe ich nur Hochfrequenz mit 16 MHz angeschlossen.  F√ºr die Programmierung wird ein Standard-JTAG-20-Anschluss verwendet, der mit einem Standardprogrammierer von ST <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ST-LINK / V2 ausgestattet ist</a> . <p></p><br><div class="spoiler">  <b class="spoiler_title">Wenn Sie Linux verwenden</b> <div class="spoiler_text"><p>  Es gibt bereits Treiber im Kernel, aber Sie m√ºssen der Datei /etc/udev/rules.d manuell einige Regeln hinzuf√ºgen, siehe zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> </p></div></div><br><p>  Da der Artikel haupts√§chlich dem Hardwareteil gewidmet ist, werde ich den Softwareteil nur kurz erw√§hnen.  Betriebssystem: Fedora 25. Entwicklungsumgebung: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">System Workbench f√ºr STM32</a> ist ein v√∂llig kostenloses System, das auf Eclipse von OpenSTM32 Community basiert.  Das einzige Mal - zum Herunterladen m√ºssen Sie sich unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://www.openstm32.org</a> registrieren.  Es ist praktisch, das grafische Dienstprogramm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">STM32CubeMX</a> zum Modellieren, Dokumentieren und Generieren von Beispielen zu verwenden.  Die Controller-Konfiguration auf dem Foto oben sieht beispielsweise folgenderma√üen aus: </p><br><p> <a href=""><img src="https://habrastorage.org/web/a17/bf1/f91/a17bf1f9181842179826bee3c6b86282.png"></a> </p><br><p>  Dateien mit diesen Schemata befinden sich ebenfalls im Repository.  Zum Beispiel f√ºr STM32F303K8 siehe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> </p><br><p>  System Workbench f√ºr STM32 verf√ºgt √ºber einen integrierten, ziemlich erweiterten Projektassistenten, der die anf√§ngliche Projektstruktur generiert und optional in das Projekt aufnehmen kann: CMSIS (Low-Level-Controller-Treiber), HAL-Bibliothek (Hardware Abstraction Layer), FatFS, FreeRTOS.  Ich selbst benutze meine objektorientierte Treiberbibliothek, die auf der HAL l√§uft.  Wen k√ºmmert es, siehe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . </p><br><p>  Hier ist <a href="">ein Beispiel f√ºr einen Code</a> , der diese Bibliothek verwendet und die LEDs eines Timers (w√§hrend einer Unterbrechung) blinkt und (√ºber einen USART-USB-Konverter an die Workstation-Konsole) den Status des an die Echtzeituhr angeschlossenen Z√§hlers protokolliert.  All dies √§hnelt etwas der Ideologie von Arduino, aber ich programmiere solche Dinge einfach gerne selbst. </p><br><p>  Hier ist ein Beispiel f√ºr die Verwendung eines ziemlich leistungsstarken <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">STM32F410RB-</a> Controllers: </p><br><p></p><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/b23/964/9b1/b239649b112d4ac490b387d2efe96911.jpg"></a> </div><p></p><br><p>  In √§hnlicher Weise lautet das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hauptdokument AN4488: Erste Schritte mit der STU32F4xxxx-MCU-Hardwareentwicklung</a> , bei der alle erforderlichen Verbindungsschemata vorhanden sind.  Das zweite wichtige Dokument ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AN2867: Oszillator-Konstruktionshandbuch f√ºr STM8AF / AL / S- und STM32-Mikrocontroller</a> , in dem detailliert beschrieben wird, wie ein Hochfrequenzoszillator angeschlossen wird. </p><br><p>  Das st√§ndige Fechten solcher Schemata ist nat√ºrlich ziemlich zeitaufw√§ndig, deshalb habe ich beschlossen, die n√§chstm√∂glichen Universalschals herzustellen, die diese Schemata realisieren.  Vielseitigkeit wird durch die Tatsache erreicht, dass die Steuerungen verschiedener Serien, jedoch im selben Fall (z. B. STM32F303RB und STM32F410RB, beide im Fall LQFP64) dieselben Schlussfolgerungen ziehen (mit Ausnahme kleiner Unterschiede im Stromversorgungskreis).  Diese Unterschiede f√ºhren dazu: </p><br><p> <a href=""><img src="https://habrastorage.org/web/551/09d/fdf/55109dfdf9844d17a4f6bdd3da46185d.jpg"></a> </p><br><p>  Alle Elemente mit vorzeichenbehafteten Werten sind verschiedenen Steuerungen gemeinsam, aber Elemente wie P30, P31, P47, wobei die Nummer die Pin-Nummer bedeutet, m√ºssen je nach Modell ausgew√§hlt werden.  Infolgedessen sieht das Steckbrett folgenderma√üen aus: </p><br><p> <a href=""><img src="https://habrastorage.org/web/83e/378/30c/83e37830c360491b8014b164c0917b12.jpg"></a> </p><br><p>  Hier ist so eine kleine Verbesserung. </p><br><p>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Projekt auf Github</a> <br>  Lizenz: GNU General Public License, Version 3 </p><br><p>  Leiterplatte und Leiterplatten von Eagle Cad vorbereitet.  Das immens angesehene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">DiHalt</a> hat eine wunderbare Reihe von Artikeln <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√ºber dieses System</a> .  Die kostenlose Version von Eagle Cad f√ºr den Heimgebrauch kann von der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offiziellen Website heruntergeladen werden</a> . </p><br><p>  Ich lade alle ein, sich dem Projekt anzuschlie√üen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de406313/">https://habr.com/ru/post/de406313/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de406299/index.html">Vektoranzeige RIN-609</a></li>
<li><a href="../de406301/index.html">HDB Reliability Report Backblaze: Unternehmenslaufwerke fallen h√§ufiger aus als Verbrauchermodelle</a></li>
<li><a href="../de406303/index.html">Hackspace, Makerspace, FabLab und WTC: Wir verstehen die Namen √∂ffentlicher R√§ume</a></li>
<li><a href="../de406307/index.html">Galaxy Note 8: Was war das neue Flaggschiff Samsung</a></li>
<li><a href="../de406309/index.html">Das Jet Propulsion Laboratory der NASA entwickelt ein kurvenreiches Gel√§ndefahrzeug zur Untersuchung der Venus</a></li>
<li><a href="../de406317/index.html">Die breitesten M√∂glichkeiten und wesentlichen Einschr√§nkungen additiver Technologien am Beispiel des Zylinderkopfes eines Sportwagens</a></li>
<li><a href="../de406319/index.html">Die US-Steueraufsichtsbeh√∂rde verwendet Data Mining und Predictive Analytics</a></li>
<li><a href="../de406323/index.html">Neue Ausgabe: Zeit- und Motivationsmanagement-Tool</a></li>
<li><a href="../de406327/index.html">Dichtebildgebung oder was ist die Schlierenmethode?</a></li>
<li><a href="../de406329/index.html">Regen, R√ºstung und fl√ºssiges Metall: Wie Sound f√ºr einen Film gemacht wird</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>