<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüéì üìè üà≤ Estructuras de datos de estado de blockchain de Plasma Cash üà≥ üë®üèº‚Äçüéì üí°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola, queridos Habrausers! Este art√≠culo trata sobre la web 3.0, Internet con descentralizaci√≥n. La Web 3.0 introduce el concepto de descentralizaci√≥n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estructuras de datos de estado de blockchain de Plasma Cash</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456374/">  Hola, queridos Habrausers!  Este art√≠culo trata sobre la web 3.0, Internet con descentralizaci√≥n.  La Web 3.0 introduce el concepto de descentralizaci√≥n como la base de Internet moderna; muchos sistemas y redes de computadoras necesitan propiedades de seguridad y descentralizaci√≥n para sus necesidades.  La soluci√≥n de descentralizaci√≥n se llama tecnolog√≠a de registro distribuido o blockchain. <br><br><img src="https://habrastorage.org/webt/qd/nd/dv/qdnddvdk76wf5sy2ajwn38jp9w0.jpeg"><br><a name="habracut"></a><br>  Blockchain es un registro distribuido.  Se puede considerar como una gran base de datos que vive para siempre y no cambia en la historia, la cadena de bloques se usa como base para aplicaciones o servicios web descentralizados. <br><br>  En esencia, blockchain no es solo una base de datos, es una oportunidad para aumentar la confianza entre los participantes de la red con la capacidad de ejecutar la l√≥gica empresarial en la red. <br><br>  El consenso bizantino aumenta la confiabilidad de la red resuelve el problema de consistencia <br>  La escalabilidad que brinda DLT est√° cambiando las redes comerciales existentes. <br><br>  Blockchain ofrece nuevas ventajas muy importantes: <br><br><ol><li>  Prevenci√≥n de errores costosos. </li><li>  Transacciones transparentes. </li><li>  Digitalizaci√≥n de bienes reales. </li><li>  Contratos inteligentes. </li><li>  Rapidez y seguridad de los pagos. </li></ol><br>  Opporty PoE es un proyecto cuyo objetivo es estudiar protocolos criptogr√°ficos y mejorar las soluciones existentes de DLT y blockchain. <br><br>  La mayor√≠a de los sistemas de registro distribuidos p√∫blicos no tienen propiedades de escalabilidad; su rendimiento es bastante bajo.  Por ejemplo, ethereum procesa solo ~ 20 tx / s. <br>  Se crearon muchas soluciones para aumentar la propiedad de escalabilidad y no perder la descentralizaci√≥n (como saben, solo se pueden conocer 2 de 3: escalabilidad, seguridad, descentralizaci√≥n). <br><br>  Una de las m√°s efectivas es una soluci√≥n que usa cadenas laterales. <br><br><h2>  Concepto de plasma </h2><br>  El concepto es que la cadena ra√≠z procesa una peque√±a cantidad de confirmaciones de cadenas secundarias, de modo que la cadena ra√≠z act√∫a como la capa m√°s segura y final para almacenar todos los estados intermedios.  Cada cadena secundaria funciona como su propia cadena de bloques con su propio algoritmo de consenso, pero hay algunas advertencias importantes. <br><br><ul><li>  Los contratos inteligentes se crean en la cadena ra√≠z y act√∫an como un punto de control en la cadena secundaria en la cadena ra√≠z. </li><li>  Se crea una cadena secundaria que funciona como su propia cadena de bloques con su propio consenso.  Todos los estados en la cadena de procesos secundarios est√°n protegidos por pruebas de fraude, que aseguran que todas las transiciones entre estados sean v√°lidas y apliquen un protocolo de retiro. </li><li>  Los contratos inteligentes espec√≠ficos para dapp o child-chain (l√≥gica de aplicaci√≥n) se pueden implementar en la child chain. </li><li>  Las herramientas necesarias se pueden transferir de la cadena ra√≠z a la cadena secundaria. </li></ul><br>  Los validadores tienen incentivos econ√≥micos para actuar honestamente y enviar comentarios a la cadena ra√≠z, la capa de la liquidaci√≥n final de la transacci√≥n. <br><br>  Como resultado, los usuarios de dapp que trabajan en la cadena secundaria no deber√≠an interactuar en absoluto con la cadena ra√≠z.  Adem√°s, pueden retirar su dinero a la cadena ra√≠z cuando lo deseen, incluso si la cadena secundaria est√° pirateada.  Estas salidas de la cadena infantil permiten a los usuarios almacenar sus fondos de manera segura utilizando pruebas de Merkle, lo que confirma la propiedad de una cierta cantidad de fondos. <br><br>  Las principales ventajas de Plasma est√°n relacionadas con su capacidad para facilitar significativamente los c√°lculos que actualmente sobrecargan la cadena principal.  Adem√°s, la cadena de bloques Ethereum puede procesar conjuntos de datos m√°s extensos y m√°s paralelos.  El tiempo tomado de la cadena ra√≠z tambi√©n se transfiere a los nodos Ethereum, que reciben menores requisitos de procesamiento y almacenamiento. <br><br>  Plasma Cash es un dise√±o que proporciona a los tokens de red n√∫meros de serie √∫nicos que los convierten en tokens √∫nicos.  Las ventajas de esto incluyen la ausencia de la necesidad de confirmaciones, un soporte m√°s simple para todos los tipos de tokens (incluidos los tokens no fungibles) y la mitigaci√≥n contra las salidas masivas de la cadena secundaria. <br><br>  El problema del plasma est√° relacionado con el concepto de "salidas masivas" de la cadena infantil.  En este escenario, una salida simult√°nea coordinada de la cadena hija podr√≠a conducir a una falta de potencia inform√°tica para retirar todos los fondos.  Como resultado, los usuarios pueden perder dinero. <br><br><h2>  Opciones de implementaci√≥n de plasma </h2><br><img src="https://habrastorage.org/webt/vq/qg/hr/vqqghr_ucnoum3q8o1b215zgcic.png"><br><br>  El plasma base tiene muchas opciones de implementaci√≥n. <br><br>  Las principales diferencias son: <br><br><ul><li>  almacenar informaci√≥n sobre el m√©todo de almacenamiento y presentaci√≥n del estado, </li><li>  tipos de tokens (divisibles indivisibles), </li><li>  seguridad de transacci√≥n </li><li>  tipo de algoritmo de consenso, etc. </li></ul><br>  Las principales variaciones de plasma: <br><br><ul><li>  Basado en UTXO: cada transacci√≥n consta de entradas y salidas: una transacci√≥n puede realizarse y gastarse, la lista de transacciones no gastadas es un estado de la propia cadena secundaria. </li><li>  Basado en cuenta: simplemente contiene un reflejo de cada cuenta-cuenta y su saldo, este tipo se usa en ethereum ya que cada cuenta puede ser de dos tipos: una cuenta de usuario y una cuenta de contrato inteligente.  La ventaja de este tipo de almacenamiento de estado es su simplicidad, y la desventaja es que esta opci√≥n no es escalable (la propiedad especial nonce se usa para evitar que la transacci√≥n se ejecute dos veces). </li></ul><br>  El prop√≥sito de este art√≠culo es explicar las estructuras de datos que se usan en la cadena de bloques de Plasma Cash. <br><br>  Para comprender exactamente c√≥mo funciona el compromiso, debe aclarar el concepto del √°rbol de Merkle. <br><br><h2>  Merkle √°rboles su uso en plasma </h2><br>  Los √°rboles Merkle son una estructura de datos extremadamente importante en el mundo blockchain.  En esencia, los √°rboles Merkle nos dan la capacidad de capturar algunos conjuntos de datos de una manera que los oculta, pero permite a los usuarios probar que parte de la informaci√≥n estaba en el conjunto.  Por ejemplo, si tengo diez n√∫meros, puedo crear pruebas para estos n√∫meros y luego probar que un n√∫mero en particular estaba en este conjunto de n√∫meros.  Estas pruebas tienen un tama√±o constante peque√±o, lo que las hace baratas de publicar en Ethereum. <br><br>  Puede usar esto para un conjunto de transacciones.  Tambi√©n puede probar que una transacci√≥n en particular se encuentra en este conjunto de transacciones.  Esto es exactamente lo que hace el operador.  Cada bloque consta de un conjunto de transacciones que se convierten en un √°rbol Merkle.  La ra√≠z de este √°rbol es la prueba, que se publica en Ethereum junto con cada bloque de plasma. <br><br>  Los usuarios deber√≠an poder retirar sus fondos de la cadena de plasma. Cuando los usuarios desean salir de la cadena de plasma, env√≠an la transacci√≥n de "salida" a Ethereum. <br><br>  Plasma Cash usa el √°rbol Merkle especial que hace posible no validar todo el bloque sino validar solo aquellas ramas que corresponden al token del usuario. <br><br>  Es decir, para transferir un token, debe revisar el historial y escanear solo los tokens que un determinado usuario necesita, al transferir un token, el usuario simplemente pasa el historial completo a otro usuario y ya puede autenticar toda la historia, y lo m√°s importante, hacerlo muy r√°pidamente. <br><br><img src="https://habrastorage.org/webt/wx/is/3z/wxis3zgyhtyh-ruopuffedzcwsk.png"><br><br><h2>  Estructuras de datos de Plasma Cash para almacenar el estado y el historial </h2><br>  Sin embargo, es necesario usar solo algunos √°rboles de Merkle, porque es necesario obtener prueba de inclusi√≥n y tambi√©n prueba de no inclusi√≥n de la transacci√≥n en el bloque, por ejemplo <br><br><ul><li>  Escaso √°rbol de merkle </li><li>  Patricia trie </li></ul><br>  Opporty complet√≥ su implementaci√≥n de Sparse Merkle Tree y Patricia Trie <br><br>  Un √°rbol de Merkle escaso es similar a un √°rbol de Merkle est√°ndar, excepto que los datos que contiene est√°n indexados y cada punto de datos se coloca en una hoja que coincide con el √≠ndice de ese punto de datos. <br><br>  Digamos que tenemos un √°rbol Merkle con cuatro hojas.  Llenaremos este √°rbol con algunas letras (A, D) para demostraci√≥n.  La letra A es la primera letra del alfabeto, por lo que debemos ponerla en la primera hoja.  Del mismo modo, podemos poner D en la cuarta hoja. <br><br>  Entonces, ¬øqu√© sucede en la segunda y tercera hojas?  Solo los dejamos vac√≠os.  M√°s precisamente, se coloca un valor especial (por ejemplo, cero) en lugar de colocar la letra. <br><br>  El √°rbol finalmente se ve as√≠: <br><br><img src="https://habrastorage.org/webt/5g/9g/18/5g9g18uvkq5oizxi81z8pbeij48.png"><br><br>  La prueba de inclusi√≥n funciona igual que en un √°rbol Merkle normal. ¬øQu√© sucede si queremos demostrar que C no es parte de este √°rbol Merkle?  Es facil!  Sabemos que si C fuera parte de un √°rbol, estar√≠a en la tercera hoja.  Si C no es parte del √°rbol, entonces la tercera hoja debe ser cero. <br><br>  Todo lo que se necesita es la prueba est√°ndar de la inclusi√≥n de Merkle, que muestra que la tercera hoja es cero. <br><br>  ¬°La mejor parte de un √°rbol Merkle escaso es que realmente representan tiendas de valores clave dentro del √°rbol Merkle! <br><br>  Aqu√≠ hay parte del c√≥digo del protocolo PoE que implementa la construcci√≥n Sparse Merkle Tree. <br><br><pre><code class="plaintext hljs">class SparseTree { //... buildTree() { if (Object.keys(this.leaves).length &gt; 0) { this.levels = [] this.levels.unshift(this.leaves) for (let level = 0; level &lt; this.depth; level++) { let currentLevel = this.levels[0] let nextLevel = {} Object.keys(currentLevel).forEach((leafKey) =&gt; { let leafHash = currentLevel[leafKey] let isEvenLeaf = this.isEvenLeaf(leafKey) let parentLeafKey = leafKey.slice(0, -1) let neighborLeafKey = parentLeafKey + (isEvenLeaf ? '1' : '0') let neighborLeafHash = currentLevel[neighborLeafKey] if (!neighborLeafHash) { neighborLeafHash = this.defaultHashes[level] } if (!nextLevel[parentLeafKey]) { let parentLeafHash = isEvenLeaf ? ethUtil.sha3(Buffer.concat([leafHash, neighborLeafHash])) : ethUtil.sha3(Buffer.concat([neighborLeafHash, leafHash])) if (level == this.depth - 1) { nextLevel['merkleRoot'] = parentLeafHash } else { nextLevel[parentLeafKey] = parentLeafHash } } }) this.levels.unshift(nextLevel) } } } }</code> </pre> <br>  Este c√≥digo es bastante trivial.  Tenemos una tienda de valores clave con prueba de inclusi√≥n / no inclusi√≥n. <br><br>  En cada iteraci√≥n, se llena un nivel espec√≠fico del √°rbol final, comenzando con el √∫ltimo.  Dependiendo de qu√© clave de la hoja actual sea par o impar, tomamos dos hojas adyacentes y consideramos el hash del nivel actual.  Si llegamos al final, escribimos un MerkleRoot √∫nico, un hash com√∫n. <br><br>  ¬°Debe comprender que este √°rbol ya est√° lleno de valores inicialmente vac√≠os!  Y si almacenamos una gran cantidad de token IDS.  ¬°tenemos un gran tama√±o de √°rbol y se tarda mucho en generarlo! <br><br>  Hay muchas soluciones para esta falta de optimizaci√≥n, pero Opporty decidi√≥ cambiar este √°rbol a Patricia Trie. <br><br>  Patricia Trie es una mezcla de Radix Trie y Merkle Trie. <br><br>  ¬°La clave de datos Radix Trie almacenar√° la ruta de datos en s√≠ misma!  ¬°Esto le permite crear una estructura de datos optimizada para la memoria! <br><br><img src="https://habrastorage.org/webt/af/zc/ly/afzclyhgeydkylbnn5hrjj0gs-g.png"><br><br><h3>  Implementaci√≥n de la oportunidad </h3><br><pre> <code class="plaintext hljs">buildNode(childNodes, key = '', level = 0) { let node = {key} this.iterations++ if (childNodes.length == 1) { let nodeKey = level == 0 ? childNodes[0].key : childNodes[0].key.slice(level - 1) node.key = nodeKey let nodeHashes = Buffer.concat([Buffer.from(ethUtil.sha3(nodeKey)), childNodes[0].hash]) node.hash = ethUtil.sha3(nodeHashes) return node } let leftChilds = [] let rightChilds = [] childNodes.forEach((node) =&gt; { if (node.key[level] == '1') { rightChilds.push(node) } else { leftChilds.push(node) } }) if (leftChilds.length &amp;&amp; rightChilds.length) { node.leftChild = this.buildNode(leftChilds, '0', level + 1) node.rightChild = this.buildNode(rightChilds, '1', level + 1) let nodeHashes = Buffer.concat([Buffer.from(ethUtil.sha3(node.key)), node.leftChild.hash, node.rightChild.hash]) node.hash = ethUtil.sha3(nodeHashes) } else if (leftChilds.length &amp;&amp; !rightChilds.length) { node = this.buildNode(leftChilds, key + '0', level + 1) } else if (!leftChilds.length &amp;&amp; rightChilds.length) { node = this.buildNode(rightChilds, key + '1', level + 1) } else if (!leftChilds.length &amp;&amp; !rightChilds.length) { throw new Error('invalid tree') } return node }</code> </pre><br>  Es decir, pasamos recursivamente y construimos sub√°rboles secundarios izquierdo y derecho por separado.  Al mismo tiempo, ¬°construir la llave es como un camino en este √°rbol! <br><br>  ¬°Esta soluci√≥n es a√∫n m√°s trivial y funciona m√°s r√°pido mientras se optimiza bastante!  De hecho, el √°rbol de Patricia se puede optimizar a√∫n m√°s mediante la introducci√≥n de nuevos tipos de nodos: nodo de extensi√≥n, nodo de rama, etc., como se hace en el protocolo ethereum, pero esta implementaci√≥n satisface todas nuestras condiciones: obtuvimos una estructura de datos r√°pida y con optimizaci√≥n de memoria. <br><br>  Al implementar estas estructuras de datos, Opporty hizo posible escalar Plasma Cash ya que permite verificar el historial del token y la inclusi√≥n de no incluir el token en el √°rbol.  Esto le permite acelerar en gran medida la validaci√≥n de los bloques y la propia cadena de plasma del ni√±o. <br><br><h3>  Enlaces utiles: </h3><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Papel blanco plasma</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Git Hub</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Descripci√≥n de casos de uso y arquitectura</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Papel de red de rayos</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/456374/">https://habr.com/ru/post/456374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456362/index.html">Dise√±ador de nivel 6: c√≥mo motivamos y desarrollamos dise√±adores</a></li>
<li><a href="../456366/index.html">C√≥mo dise√±√© la caja LED HEART</a></li>
<li><a href="../456368/index.html">Realizaci√≥n de transacciones p√∫blicas y privadas en la cadena de bloques JPMorgan Quorum usando Web3</a></li>
<li><a href="../456370/index.html">Implemente QoS en Qsan Storage</a></li>
<li><a href="../456372/index.html">SimbirSoft invita a profesionales de TI al verano intensivo 2019</a></li>
<li><a href="../456376/index.html">Not One Spring Boot: una descripci√≥n general de alternativas</a></li>
<li><a href="../456380/index.html">Jornada de puertas abiertas de la Facultad de Programaci√≥n en Netolog√≠a</a></li>
<li><a href="../456382/index.html">Colaboraci√≥n y automatizaci√≥n en la interfaz. Lo que aprendimos de 13 escuelas</a></li>
<li><a href="../456384/index.html">PVS-Studio Gr√°fico de desarrollo de habilidades de diagn√≥stico</a></li>
<li><a href="../456386/index.html">Bibliotecas abiertas para la visualizaci√≥n de contenido de audio.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>