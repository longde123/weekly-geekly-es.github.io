<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßòüèª üö™ üë®üèΩ‚Äçüíº L'√©volution de l'architecture du syst√®me de n√©gociation et de compensation de la Bourse de Moscou. Partie 1 üï¥üèæ üëçüèº üëáüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! Je m'appelle Sergey Kostanbaev, √† la Bourse, je d√©veloppe le c≈ìur du syst√®me commercial. 

 Lorsque la Bourse de New York est pr√©sent√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'√©volution de l'architecture du syst√®me de n√©gociation et de compensation de la Bourse de Moscou. Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/moex/blog/444300/"><img src="https://habrastorage.org/webt/1l/tg/fk/1ltgfktpjwjmzxxty7fnwez8zh0.jpeg"><br><br>  Bonjour √† tous!  Je m'appelle Sergey Kostanbaev, √† la Bourse, je d√©veloppe le c≈ìur du syst√®me commercial. <br><br>  Lorsque la Bourse de New York est pr√©sent√©e dans des films hollywoodiens, cela ressemble toujours √† ceci: des foules de gens criant quelque chose, agitant du papier, il y a un chaos complet.  Nous n'avons jamais eu cela √† la Bourse de Moscou, car presque depuis le tout d√©but, le trading a √©t√© effectu√© par voie √©lectronique et est bas√© sur deux plates-formes principales - Spectra (march√© des d√©riv√©s) et ASTS (devise, bourse et march√©s mon√©taires).  Et aujourd'hui, je veux parler de l'√©volution de l'architecture du syst√®me de n√©gociation et de compensation ASTS, de diverses solutions et conclusions.  L'histoire sera longue, j'ai donc d√ª la diviser en deux parties. <br><a name="habracut"></a><br>  Nous sommes l'une des rares bourses au monde √† n√©gocier des actifs de toutes classes et √† fournir une gamme compl√®te de services de change.  Par exemple, l'an dernier, nous avons pris la deuxi√®me place au monde en termes de volume de transactions obligataires, la 25e place parmi toutes les bourses, la 13e place par capitalisation parmi les bourses publiques. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4cb/cfc/903/4cbcfc90328c075abc687564ad382bd5.png"><br><br>  Pour les soumissionnaires professionnels, des param√®tres tels que le temps de r√©ponse, la stabilit√© de la distribution du temps (gigue) et la fiabilit√© de l'ensemble du complexe sont essentiels.  Actuellement, nous traitons des dizaines de millions de transactions par jour.  Le traitement de chaque transaction par le c≈ìur du syst√®me prend des dizaines de microsecondes.  Bien s√ªr, avec les op√©rateurs mobiles du Nouvel An ou avec les moteurs de recherche, la charge elle-m√™me est plus √©lev√©e que la n√¥tre, mais en termes de charge, associ√©e aux caract√©ristiques ci-dessus, peu de gens peuvent nous comparer, comme il me semble.  Dans le m√™me temps, il est important pour nous que le syst√®me ne ralentisse pas pendant une seconde, fonctionne de mani√®re absolument stable et que tous les utilisateurs soient dans des conditions √©gales. <br><br><h2>  Un peu d'histoire </h2><br>  En 1994, le syst√®me australien ASTS a √©t√© lanc√© sur le Moscow Interbank Currency Exchange (MICEX), et √† partir de ce moment, vous pouvez compter l'histoire russe du commerce √©lectronique.  En 1998, l'architecture de la bourse a √©t√© modernis√©e pour l'introduction du commerce sur Internet.  Depuis lors, la vitesse d'introduction de nouvelles solutions et de changements architecturaux dans tous les syst√®mes et sous-syst√®mes ne fait que s'acc√©l√©rer. <br><br>  Au cours de ces ann√©es, le syst√®me d'√©change a fonctionn√© sur du mat√©riel haut de gamme - les serveurs HP Superdome 9000 tr√®s fiables (construits sur l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">architecture PA-RISC</a> ), dans lesquels absolument tout √©tait dupliqu√©: sous-syst√®mes d'entr√©e-sortie, r√©seau, RAM (en fait, il y avait une matrice RAID √† partir de RAM ), processeurs (√©change √† chaud pris en charge).  Il √©tait possible de changer n'importe quel composant du serveur sans arr√™ter la machine.  Nous comptions sur ces appareils, les consid√©rions comme pratiquement sans probl√®me.  Le syst√®me d'exploitation √©tait HP UX de type Unix. <br><br>  Mais depuis environ 2010, un ph√©nom√®ne tel que le trading √† haute fr√©quence (HFT) ou le trading √† haute fr√©quence, tout simplement, des robots d'√©change, est apparu.  En seulement 2,5 ans, la charge sur nos serveurs a augment√© de 140 fois. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/251/646/529/25164652921c8d56c1fa5fd9219b7131.png"><br><br>  Il √©tait impossible de supporter une telle charge avec l'ancienne architecture et l'√©quipement.  Il fallait s'adapter d'une mani√®re ou d'une autre. <br><br><h2>  Commencer </h2><br>  Les demandes au syst√®me d'√©change peuvent √™tre divis√©es en deux types: <br><br><ul><li>  Les transactions  Si vous souhaitez acheter des dollars, des actions ou autre chose, envoyez une transaction au syst√®me commercial et obtenez une r√©ponse sur le succ√®s. </li><li>  Demandes d'informations.  Si vous souhaitez conna√Ætre le prix actuel, consultez le carnet de commandes ou les index, puis envoyez des demandes d'informations. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/afa/3cb/080/afa3cb0800fc3fd2c4bc83348e00bca2.png"><br><br>  Sch√©matiquement, le c≈ìur du syst√®me peut √™tre divis√© en trois niveaux: <br><br><ul><li>  Le niveau client auquel les courtiers et les clients travaillent.  Tous interagissent avec les serveurs d'acc√®s. </li><li>  Les serveurs d'acc√®s (passerelles) sont des serveurs de mise en cache qui traitent localement toutes les demandes d'informations.  Vous voulez savoir √† quel prix les actions Sberbank sont d√©sormais n√©goci√©es?  La demande va au serveur d'acc√®s. </li><li>  Mais si vous souhaitez acheter des actions, la demande est d√©j√† sur le serveur central (Trade Engine).  Il existe un tel serveur pour chaque type de march√©, ils jouent un r√¥le crucial et c'est pour eux que nous avons cr√©√© ce syst√®me. </li></ul><br>  Le c≈ìur du syst√®me commercial est une base de donn√©es d√©licate en m√©moire dans laquelle toutes les transactions sont des transactions d'√©change.  La base a √©t√© √©crite en C, des d√©pendances externes il n'y avait que la biblioth√®que libc et il n'y avait aucune allocation dynamique de m√©moire.  Pour r√©duire le temps de traitement, le syst√®me commence par un ensemble statique de tableaux et par une relocalisation statique des donn√©es: tout d'abord, toutes les donn√©es de la journ√©e en cours sont charg√©es en m√©moire, puis aucun acc√®s au disque, tout le travail se fait uniquement en m√©moire.  Lorsque le syst√®me d√©marre, toutes les donn√©es de r√©f√©rence sont d√©j√† tri√©es, la recherche fonctionne donc tr√®s efficacement et prend peu de temps √† l'ex√©cution.  Toutes les tables sont constitu√©es de listes et d'arborescences intrusives pour les structures de donn√©es dynamiques afin qu'elles ne n√©cessitent pas d'allocation de m√©moire lors de l'ex√©cution. <br><br>  Passons bri√®vement en revue l'histoire du d√©veloppement de notre syst√®me de trading et de compensation. <br>  La premi√®re version de l'architecture du syst√®me de n√©gociation et de compensation a √©t√© construite sur la soi-disant interaction Unix: la m√©moire partag√©e, les s√©maphores et les files d'attente ont √©t√© utilis√©s, et chaque processus √©tait compos√© d'un thread.  Cette approche √©tait r√©pandue au d√©but des ann√©es 90. <br><br>  La premi√®re version du syst√®me contenait deux niveaux de passerelle et un serveur central du syst√®me commercial.  Le plan de travail √©tait le suivant: <br><br><ul><li>  Le client envoie une demande qui atteint la passerelle.  Il v√©rifie la validit√© du format (mais pas les donn√©es elles-m√™mes) et rejette la mauvaise transaction. </li><li>  Si une demande d'informations a √©t√© envoy√©e, elle est ex√©cut√©e localement;  s'il s'agit d'une transaction, elle est redirig√©e vers le serveur central. </li><li>  Ensuite, le moteur de n√©gociation traite la transaction, modifie la m√©moire locale et envoie une r√©ponse √† la transaction, et elle-m√™me - √† la r√©plication √† l'aide d'un m√©canisme de r√©plication distinct. </li><li>  La passerelle re√ßoit une r√©ponse du n≈ìud central et la redirige vers le client. </li><li>  Apr√®s un certain temps, la passerelle re√ßoit la transaction √† l'aide du m√©canisme de r√©plication, et cette fois, elle l'ex√©cute localement, modifiant ses structures de donn√©es afin que les demandes d'informations suivantes affichent les donn√©es r√©elles. </li></ul><br>  En fait, le mod√®le de r√©plication est d√©crit ici, dans lequel Gateway a compl√®tement r√©p√©t√© les actions effectu√©es dans le syst√®me commercial.  Un canal de r√©plication distinct a fourni le m√™me ordre d'ex√©cution des transactions sur plusieurs n≈ìuds d'acc√®s. <br><br>  √âtant donn√© que le code √©tait monothread, un sch√©ma classique avec des processus fourchus a √©t√© utilis√© pour servir de nombreux clients.  Cependant, la cr√©ation d'un fork pour la base de donn√©es enti√®re √©tait tr√®s co√ªteuse, par cons√©quent, des processus de service l√©gers ont √©t√© utilis√©s pour collecter les paquets des sessions TCP et les transf√©rer dans une file d'attente (SystemV Message Queue).  Gateway et Trade Engine ne fonctionnaient qu'avec cette file d'attente, prenant les transactions pour ex√©cution √† partir de l√†.  Il √©tait d√©j√† impossible d'y r√©pondre, car il n'est pas clair quel processus de service devrait le lire.  Nous avons donc eu recours √† une astuce: chaque processus bifurqu√© a cr√©√© une file d'attente de r√©ponses pour lui-m√™me et lorsqu'une demande est arriv√©e dans la file d'attente entrante, une balise pour la file d'attente de r√©ponses y a √©t√© imm√©diatement ajout√©e. <br><br>  La copie constante de la file d'attente vers la file d'attente de grandes quantit√©s de donn√©es a cr√©√© des probl√®mes, particuli√®rement caract√©ristiques des demandes d'informations.  Par cons√©quent, nous avons profit√© d'une autre astuce: en plus de la file d'attente de r√©ponses, chaque processus a √©galement cr√©√© de la m√©moire partag√©e (SystemV Shared Memory).  Les packages eux-m√™mes y ont √©t√© plac√©s et seule la balise a √©t√© enregistr√©e dans la file d'attente, vous permettant de trouver le package source.  Cela a aid√© √† stocker des donn√©es dans le cache du processeur. <br><br>  SystemV IPC comprend des utilitaires pour afficher l'√©tat des objets de file d'attente, de m√©moire et de s√©maphore.  Nous l'avons utilis√© activement afin de comprendre ce qui se passe dans le syst√®me √† un moment particulier, o√π les paquets s'accumulent, qui sont bloqu√©s, etc. <br><br><h2>  Premi√®re modernisation </h2><br>  Tout d'abord, nous nous sommes d√©barrass√©s de la passerelle √† processus unique.  Son inconv√©nient majeur √©tait qu'il pouvait traiter une transaction de r√©plication ou une demande d'informations d'un client.  Et avec une charge croissante, la passerelle traitera les demandes plus longtemps et ne pourra pas traiter le flux de r√©plication.  De plus, si le client a envoy√© une transaction, il vous suffit de v√©rifier sa validit√© et de la transmettre.  Par cons√©quent, nous avons remplac√© un processus de passerelle par de nombreux composants pouvant fonctionner en parall√®le: des informations multithread et des processus transactionnels qui fonctionnent ind√©pendamment les uns des autres avec une zone de m√©moire commune utilisant RW-lock.  Et en m√™me temps, nous avons introduit des processus de planification et de r√©plication. <br><br><h2>  L'impact du trading haute fr√©quence </h2><br>  La version ci-dessus de l'architecture a dur√© jusqu'en 2010.  Pendant ce temps, nous n'√©tions plus satisfaits des performances des serveurs HP Superdome.  De plus, l'architecture PA-RISC est en fait morte; le fournisseur n'a pas propos√© de mises √† jour importantes.  En cons√©quence, nous avons commenc√© √† passer de HP UX / PA RISC √† Linux / x86.  La transition a commenc√© avec l'adaptation des serveurs d'acc√®s. <br><br>  Pourquoi avons-nous d√ª changer l'architecture √† nouveau?  Le fait est que le trading √† haute fr√©quence a consid√©rablement modifi√© le profil de charge du c≈ìur du syst√®me. <br><br>  Supposons que nous ayons une petite transaction qui a provoqu√© un changement significatif de prix - quelqu'un a achet√© un demi-milliard de dollars.  Apr√®s quelques millisecondes, tous les acteurs du march√© le remarquent et commencent √† apporter une correction.  Naturellement, les demandes s'alignent dans une √©norme file d'attente, que le syst√®me va ratisser pendant longtemps. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d0b/00e/ac6/d0b00eac6f1d2833db744246d58ce66a.png"><br><br>  √Ä cet intervalle de 50 ms, la vitesse moyenne est d'environ 16 000 transactions par seconde.  Si vous r√©duisez la fen√™tre √† 20 ms, nous obtenons une vitesse moyenne de 90 000 transactions par seconde, et au pic il y aura 200 000 transactions.  En d'autres termes, la charge est instable, avec des √©clats brusques.  Et la file d'attente des demandes doit toujours √™tre trait√©e rapidement. <br><br>  Mais pourquoi y a-t-il une file d'attente?  Ainsi, dans notre exemple, de nombreux utilisateurs ont remarqu√© un changement de prix et envoient les transactions correspondantes.  Ceux-ci viennent √† Gateway, il les s√©rialise, d√©finit un certain ordre et les envoie au r√©seau.  Les routeurs m√©langent les paquets et les transf√®rent.  Dont le paquet est venu plus t√¥t, cette transaction a ¬´gagn√©¬ª.  En cons√©quence, les clients d'√©change ont commenc√© √† remarquer que si la m√™me transaction √©tait envoy√©e depuis plusieurs passerelles, les chances de son traitement rapide augmentaient.  Bient√¥t, des robots d'√©change ont commenc√© √† bombarder Gateway de demandes, et une avalanche de transactions est survenue. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/65b/1f9/429/65b1f9429f7806a1e5e8d5e2c67c3184.png"><br><br><h2>  Un nouveau cycle d'√©volution </h2><br>  Apr√®s des tests et des recherches approfondis, nous sommes pass√©s au noyau temps r√©el du syst√®me d'exploitation.  Pour ce faire, ils ont choisi RedHat Enterprise MRG Linux, o√π MRG signifie messagerie en temps r√©el.  L'avantage des correctifs en temps r√©el est qu'ils optimisent le syst√®me pour une ex√©cution la plus rapide possible: tous les processus sont organis√©s dans une file d'attente FIFO, vous pouvez isoler les noyaux, pas de pertes, toutes les transactions sont trait√©es dans un ordre strict. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5c1/607/6e8/5c16076e8ed1a40c5e1aea471f5f0f70.png"><br>  <i>Rouge - fonctionne avec une file d'attente dans un noyau r√©gulier, vert - fonctionne dans un noyau en temps r√©el.</i> <br><br>  Mais atteindre une faible latence sur les serveurs r√©guliers n'est pas si simple: <br><br><ul><li>  Le mode SMI, qui dans l'architecture x86 est au c≈ìur du travail avec des p√©riph√©riques importants, interf√®re consid√©rablement.  Le traitement de divers √©v√©nements mat√©riels et la gestion des composants et des p√©riph√©riques sont effectu√©s par le micrologiciel en mode SMI transparent, dans lequel le syst√®me d'exploitation ne voit pas du tout ce que fait le micrologiciel.  En r√®gle g√©n√©rale, tous les principaux fournisseurs proposent des extensions sp√©ciales pour les serveurs de micrologiciels, ce qui permet de r√©duire la quantit√© de traitement SMI. </li><li>  Il ne doit pas y avoir de contr√¥le dynamique de la fr√©quence du processeur, ce qui entra√Æne des temps d'arr√™t suppl√©mentaires. </li><li>  Lorsque le journal du syst√®me de fichiers est r√©initialis√©, certains processus se produisent dans le noyau et entra√Ænent des retards impr√©visibles. </li><li>  Vous devez faire attention √† des choses telles que l'affinit√© CPU, l'affinit√© d'interruption, NUMA. </li></ul><br>  Je dois dire que le sujet de la configuration du mat√©riel et du noyau Linux pour le traitement en temps r√©el m√©rite un article s√©par√©.  Nous avons pass√© beaucoup de temps sur des exp√©riences et des recherches avant d'obtenir un bon r√©sultat. <br><br>  Lors du passage des serveurs PA-RISC √† x86, nous n'avons pratiquement pas eu √† changer beaucoup le code syst√®me, nous l'avons seulement adapt√© et reconfigur√©.  En m√™me temps, plusieurs bugs ont √©t√© corrig√©s.  Par exemple, les cons√©quences sont rapidement apparues que PA RISC √©tait un syst√®me Big Endian et x86 un syst√®me Little Endian: par exemple, les donn√©es n'√©taient pas lues correctement.  Un bug plus d√©licat √©tait que PA RISC utilise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un</a> acc√®s m√©moire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©quentiellement coh√©rent</a> , tandis que x86 peut r√©organiser les op√©rations de lecture, de sorte que le code qui est absolument valide sur une plate-forme devient inop√©rant sur une autre. <br><br>  Apr√®s le passage √† x86, la productivit√© a presque tripl√©, le temps de traitement moyen des transactions a diminu√© √† 60 Œºs. <br><br>  Examinons maintenant de plus pr√®s quels changements cl√©s ont √©t√© apport√©s √† l'architecture du syst√®me. <br><br><h2>  Hot Standby Epic </h2><br>  En ce qui concerne les serveurs de base, nous savions qu'ils sont moins fiables.  Par cons√©quent, lors de la cr√©ation d'une nouvelle architecture, nous avons a priori suppos√© la possibilit√© de d√©faillance d'un ou plusieurs n≈ìuds.  Par cons√©quent, nous avions besoin d'un syst√®me de secours automatique capable de basculer tr√®s rapidement vers des machines de sauvegarde. <br><br>  De plus, il y avait d'autres exigences: <br><br><ul><li>  Vous ne devez en aucun cas perdre les transactions trait√©es. </li><li>  Le syst√®me doit √™tre absolument transparent pour notre infrastructure. </li><li>  Les clients ne devraient pas voir les coupures de connexion. </li><li>  La r√©servation ne doit pas introduire de retard important, car il s'agit d'un facteur critique pour l'√©change. </li></ul><br>  Lors de la cr√©ation d'un syst√®me de secours automatique, nous n'avons pas consid√©r√© de tels sc√©narios comme des doubles √©checs (par exemple, le r√©seau sur un serveur a cess√© de fonctionner et le serveur principal s'est bloqu√©);  n'a pas envisag√© la possibilit√© d'erreurs dans le logiciel, car elles sont d√©tect√©es lors des tests;  et n'a pas consid√©r√© le dysfonctionnement du fer. <br><br>  En cons√©quence, nous sommes arriv√©s au sch√©ma suivant: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad3/4a6/52f/ad34a652fbe11f9023f484e9d64dd19c.png"><br><br><ul><li>  Le serveur principal a interagi directement avec les serveurs de passerelle. </li><li>  Toutes les transactions re√ßues sur le serveur principal ont √©t√© instantan√©ment r√©pliqu√©es sur le serveur de sauvegarde via un canal s√©par√©.  L'arbitre (gouverneur) a coordonn√© le changement en cas de probl√®me. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/050/ca8/118/050ca81185b227e767e3de134d8b2f8e.png"></li><li>  Le serveur principal a trait√© chaque transaction et a attendu la confirmation du serveur de sauvegarde.  Pour minimiser le retard, nous avons refus√© d'attendre la fin de la transaction sur le serveur de sauvegarde.  La dur√©e de la transaction sur le r√©seau √©tant comparable √† la dur√©e de la transaction, aucun retard suppl√©mentaire n'a √©t√© ajout√©. </li><li>  Nous n'avons pu v√©rifier l'√©tat de traitement du serveur principal et du serveur de sauvegarde que pour la transaction pr√©c√©dente, et l'√©tat de traitement de la transaction en cours √©tait inconnu.  √âtant donn√© que les processus √† thread unique √©taient toujours utilis√©s ici, l'attente d'une r√©ponse de Backup ralentirait l'ensemble du flux de traitement, et nous avons donc fait un compromis raisonnable: nous avons v√©rifi√© le r√©sultat de la transaction pr√©c√©dente. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/e3d/34c/9f0/e3d34c9f079015074fa63cf39016d1cf.png"><br><br>  Le sch√©ma a fonctionn√© comme suit. <br><br>  Supposons que le serveur principal cesse de r√©pondre, mais que la passerelle continue de communiquer.  Sur le serveur de sauvegarde, un d√©lai d'attente est d√©clench√©, il se tourne vers Governor, et il lui attribue le r√¥le de serveur principal, et toutes les passerelles basculent vers le nouveau serveur principal. <br><br>  Si le serveur principal est de nouveau op√©rationnel, un d√©lai d'expiration interne est √©galement d√©clench√© sur celui-ci, car pendant un certain temps, il n'y a eu aucun appel au serveur √† partir de la passerelle.  Puis il se tourne √©galement vers le gouverneur, et il l'exclut du r√©gime.  En cons√©quence, l'√©change fonctionne avec un serveur jusqu'√† la fin de la p√©riode de n√©gociation.  √âtant donn√© que la probabilit√© de panne d'un serveur est plut√¥t faible, un tel sch√©ma a √©t√© consid√©r√© comme tout √† fait acceptable, il ne contenait pas de logique complexe et a √©t√© facilement test√©. <br><br>  <i><b>√Ä suivre.</b></i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr444300/">https://habr.com/ru/post/fr444300/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr444288/index.html">Nouvelle application mobile LampTest.ru</a></li>
<li><a href="../fr444290/index.html">Les bases de la programmation r√©active √† l'aide de RxJS. Partie 2. Op√©rateurs et tuyaux</a></li>
<li><a href="../fr444294/index.html">Fonctionnement de l'aviation d'affaires en Russie (centres FBO)</a></li>
<li><a href="../fr444296/index.html">6 ressources et services utiles pour les √©migrants potentiels aux √âtats-Unis, en Allemagne et au Canada</a></li>
<li><a href="../fr444298/index.html">Les scientifiques disent qu'ils peuvent remodeler les dinosaures vivants pendant 5 ans</a></li>
<li><a href="../fr444302/index.html">L'√©volution de l'architecture du syst√®me de n√©gociation et de compensation de la Bourse de Moscou. 2e partie</a></li>
<li><a href="../fr444304/index.html">Huawei et Nutanix annoncent un partenariat avec HCI</a></li>
<li><a href="../fr444306/index.html">Sexe, amour et relations √† travers le prisme de l'architecture de microservices</a></li>
<li><a href="../fr444308/index.html">Nouvelles de l'industrie du jeu (11-18 mars 2019)</a></li>
<li><a href="../fr444312/index.html">Installez ReactOS √† partir d'une cl√© USB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>