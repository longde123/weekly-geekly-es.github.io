<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔌 📗 📊 如何用自己的双手制作方便的合成器 🎯 🐅 🤮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="小时候，我有一架300公斤级的真实苏维埃钢琴，我喜欢弹奏钢琴，甚至从音乐学校毕业后还弹奏一些东西。 钢琴很酷，很正宗，但一点都不实用。 为了使灵魂绝对简单明了，您还需要架子鼓，五根高跟电吉他，单簧管，西塔琴和采样环... 



 当然，现在不再需要在公寓中建造一个车库工作室来存放六笔薪水，而在PC...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>如何用自己的双手制作方便的合成器</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/409123/"> 小时候，我有一架300公斤级的真实苏维埃钢琴，我喜欢弹奏钢琴，甚至从音乐学校毕业后还弹奏一些东西。 钢琴很酷，很正宗，但一点都不实用。 为了使灵魂绝对简单明了，您还需要架子鼓，五根高跟电吉他，单簧管，西塔琴和采样环... <br><br><img src="https://habrastorage.org/webt/ve/ox/gn/veoxgny2iuiv9jjfsuqyfhq9lzq.jpeg"><br><br> 当然，现在不再需要在公寓中建造一个车库工作室来存放六笔薪水，而在PC上安装一个免费的音乐编辑器就足够了。 但是，这一切都不舒服。 <br><br>  PC键盘根本不像键盘乐器，这里不是。 而且，这对于教孩子来说根本不合适。 似乎别无选择，只能购买合成器。 但是怀疑仍然使我失望。 <a name="habracut"></a><br><br> 什么是合成器？ 带有音乐键盘的大型设备，该设备应放在适当的位置。 内置声音功能，但我已经有了带扬声器的接收器。 内置了漂亮的PC，但是我有好的PC。 <br><br> 事实证明，除了键盘之外，我花了4万美元购买了质量最好的东西。 这只是一些最大的非理性支出。 <br><br> 为了寻找单独的键盘，我遇到了诸如USB MIDI键盘之类的设备。 <br> 在我看来，MIDI始终来自专业音乐活动领域。 <br> 但是现在所有音乐都可以在任何方便的地方在PC上制作，这意味着音乐家需要可轻松装入背包的移动音乐键盘。 <br><br> 在这里！ <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/RalqqcHf5qU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br> 一个计划立即在我脑海中浮现。 我们将MIDI键盘连接到基于Raspberry Pi 3的家庭媒体中心，软件合成器正在该Raspberry Pi 3上旋转，任何人都可以随时实现自己的下一个杰作。 通常，在这些MIDI键盘上，有一组旋钮和其他按钮，它们被编程用于各种效果或其他乐器。 看起来和听起来很酷！ <br><br> 设备越来越大，价格越来越贵，价格也略便宜。 我选择了大约5次通话的选项。 他有两个八度，一个普通大小的键，一个鼓手按钮，一个音调旋钮，这是新手电子音乐家梦can以求的。 <br><br> 我在PC上创作音乐并不特别，因此很难找到实现我的想法的方法。 信息必须一点一点地收集。 这个难题逐渐成形，结果是我提出了一个可行的解决方案，我将与您分享。 奇怪的是，在Raspbian / Debian的标准发行版中，有需要的一切，我什至不必连接外部存储库。 <br><br>  Fluidsynth用作音序器（播放MIDI文件的应用程序）。 <br>  MIDI键盘可通过ALSA立即检测到，并可用于连接音序器。 <br> 要播放各种乐器的声音，请使用SoundFont2格式打开的样本数据库。 首先，请全部安装。 <br><br><pre><code class="hljs powershell">sudo <span class="hljs-literal"><span class="hljs-literal">-s</span></span> apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> update apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> <span class="hljs-literal"><span class="hljs-literal">-y</span></span> install alsa<span class="hljs-literal"><span class="hljs-literal">-utils</span></span> fluid<span class="hljs-literal"><span class="hljs-literal">-soundfont</span></span><span class="hljs-literal"><span class="hljs-literal">-gm</span></span> fluidsynth</code> </pre> <br> 我们将MIDI键盘连接到Raspberry，并在服务器模式下启动音序器： <br><br><pre> <code class="hljs powershell">fluidsynth <span class="hljs-literal"><span class="hljs-literal">-i</span></span> <span class="hljs-literal"><span class="hljs-literal">-s</span></span> <span class="hljs-literal"><span class="hljs-literal">-a</span></span> alsa <span class="hljs-literal"><span class="hljs-literal">-g</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> /usr/share/sounds/sf2/FluidR3_GM.sf2</code> </pre> <br> 我们执行命令： <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">aconnect</span></span> -o</code> </pre> <br> 结果，我们将看到可用的MIDI客户端列表： <br><br><pre> <code class="hljs powershell">client <span class="hljs-number"><span class="hljs-number">14</span></span>: <span class="hljs-string"><span class="hljs-string">'Midi Through'</span></span> [<span class="hljs-type"><span class="hljs-type">type</span></span>=<span class="hljs-type"><span class="hljs-type">kernel</span></span>] <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">'Midi Through Port-0'</span></span> client <span class="hljs-number"><span class="hljs-number">20</span></span>: <span class="hljs-string"><span class="hljs-string">'VMini'</span></span> [<span class="hljs-type"><span class="hljs-type">type</span></span>=<span class="hljs-type"><span class="hljs-type">kernel</span></span>] <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">'VMini MIDI 1 '</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">'VMini MIDI 2 '</span></span> client <span class="hljs-number"><span class="hljs-number">128</span></span>: <span class="hljs-string"><span class="hljs-string">'FLUID Synth (1628)'</span></span> [<span class="hljs-type"><span class="hljs-type">type</span></span>=<span class="hljs-type"><span class="hljs-type">user</span></span>] <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">'Synth input port (1628:0)'</span></span></code> </pre><br> 在这里，重要的是要记住键盘和音序器客户端的编号，然后将它们与以下命令连接： <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">aconnect</span></span> 20<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span> 128<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span></code> </pre><br> 现在我们准备弹奏Yamaha钢琴（这是默认乐器）。 阅读<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">fluidsynth</a>手册，那里有许多有趣的命令，例如，将乐器更改为鼓声或风声，设置混响或合唱的数量。 <br><br> 让我们方便地使用我们的软件合成器。 为了不每次都将键盘手动连接到音序器，我们将编写一个简单的恶魔，它将在启动时自动执行此操作。 <br><br><pre> <code class="hljs vbscript">cat &gt; /etc/init.d/fluidsynth &lt;&lt; EOF #!/bin/bash ### BEGIN INIT INFO # Provides: fluidsynth # Required-Start: $all # Required-<span class="hljs-keyword"><span class="hljs-keyword">Stop</span></span>: # <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span>-Start: <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Stop</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> # Short-Description: Fluidsynth deamon <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> play via MIDI-keyboard ### <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> INIT INFO startDaemon() { sleep <span class="hljs-number"><span class="hljs-number">30</span></span>s &amp;&amp; fluidsynth -i -s -a alsa -g <span class="hljs-number"><span class="hljs-number">3</span></span> --load-config=/home/osmc/midi-router &gt;/var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/fluidsynth &amp; sleep <span class="hljs-number"><span class="hljs-number">60</span></span>s &amp;&amp; aconnect <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> &amp; } stopDaemon() { pkill <span class="hljs-number"><span class="hljs-number">-9</span></span> fluidsynth &amp;&gt; /dev/<span class="hljs-literal"><span class="hljs-literal">null</span></span> } restartDaemon() { stopDaemon startDaemon } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"$1"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> start) startDaemon ;; <span class="hljs-keyword"><span class="hljs-keyword">stop</span></span>) stopDaemon ;; restart) restartDaemon ;; status) ;; *) startDaemon esac <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> EOF</code> </pre><br> 注册守护程序以自动运行： <br><br><pre> <code class="hljs sql">chmod 755 /etc/init.d/fluidsynth <span class="hljs-keyword"><span class="hljs-keyword">update</span></span>-rc.d fluidsynth <span class="hljs-keyword"><span class="hljs-keyword">defaults</span></span></code> </pre><br> 请注意，现在在启动时，配置文件（/ home / osmc / midi-router）包含将键盘变成真正的合成器的命令，该文件已传输到音序器。 <br><br> 就是这个 键盘上的每个按键和旋转键都发送带有其自己编号的特定事件。 据我了解，没有特殊标准，因此每个制造商都可以做自己想要的事情。 例如，我想用方形键来敲鼓，其余的键来弹钢琴，用旋钮控制音量，混响和合唱。 <br><br> 因此，我需要将事件代码从键盘映射到不同的乐器，并将事件代码从句柄映射到音序器可以理解的代码。 在Fluidsynth中，这是使用路由器完成的。 这些命令包含在配置文件中。 <br><br> 这是我的配置文件的示例，其中包含有关其功能的注释。 <br><br><pre> <code class="hljs pgsql">cat &gt; /home/osmc/midi-router &lt;&lt; EOF #     ,  -    <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/sounds/sf2/FluidR3_GM.sf2 <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> /home/osmc/<span class="hljs-number"><span class="hljs-number">241</span></span>-Drums.SF2 #       <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> #       <span class="hljs-number"><span class="hljs-number">0</span></span> #          router_begin note router_chan <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> router_par1 <span class="hljs-number"><span class="hljs-number">36</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> router_end #          router_begin note router_chan <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> router_par1 <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">35</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> router_end router_begin note router_chan <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> router_par1 <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">255</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> router_end #      ,   , #         fluidsynth router_begin cc router_chan <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> router_par1 <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">98</span></span> router_end router_begin cc router_chan <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> router_par1 <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> router_end router_begin cc router_chan <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> router_par1 <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">91</span></span> router_end router_begin cc router_chan <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> router_par1 <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">93</span></span> router_end #     <span class="hljs-number"><span class="hljs-number">0</span></span>, #      #      cc <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> EOF</code> </pre><br> 要找出设备生成的代码，您需要使用以下实用程序： <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">aseqdump</span></span> -p <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br> 她通过控制台上的MIDI键盘收听并显示事件。 按下按钮或旋转旋钮，您将看到类型，通道和事件代码。 您可以按自己的方式对键盘进行编程，而不必采用开发特定合成器的工程师的方式进行编程。 为此，要感谢fluidsynth，alsa，SoundFont2，Raspberry和V-Mini的开发人员。 <br><br> 顺便说一下，有关DIY合成器的这一主题反映在多项发明中，我建议进行研究： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">一次</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">两次</a> 。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN409123/">https://habr.com/ru/post/zh-CN409123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN409111/index.html">Modbus RTU网络仿真软件</a></li>
<li><a href="../zh-CN409113/index.html">琐事，但很好：可调节饮料温度的杯子</a></li>
<li><a href="../zh-CN409115/index.html">邪教游戏的配乐：瘟疫，乌托邦和冰斧</a></li>
<li><a href="../zh-CN409119/index.html">英特尔®2017。年度业绩</a></li>
<li><a href="../zh-CN409121/index.html">这是什么：俄罗斯流媒体服务市场</a></li>
<li><a href="../zh-CN409125/index.html">飞往新谢泼德的第一人称航班</a></li>
<li><a href="../zh-CN409127/index.html">如何寻找其他尺寸的迹象</a></li>
<li><a href="../zh-CN409129/index.html">Chrome浏览器将屏蔽“不良”网站上的所有广告，而Yandex.Browser将剪切单个横幅</a></li>
<li><a href="../zh-CN409131/index.html">RadioAstron的技术方面</a></li>
<li><a href="../zh-CN409133/index.html">俄罗斯的华人：以Oppo和Vivo为例进入智能手机市场时的典型错误</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>