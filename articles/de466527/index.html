<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💇🏿 🦋 😨 Testen der Benutzerfunktionalität von Websites mit Capybara-Seitenobjekten ⛔️ 🥔 🧖🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seitenobjekte können als leistungsstarke Methode zur Abstraktion (Isolierung) Ihrer Tests von der technischen Implementierung verwendet werden. Es ist...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Testen der Benutzerfunktionalität von Websites mit Capybara-Seitenobjekten</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466527/"> <b>Seitenobjekte</b> können als leistungsstarke Methode zur Abstraktion (Isolierung) Ihrer Tests von der technischen Implementierung verwendet werden.  Es ist wichtig zu bedenken, dass sie (Seitenobjekte) verwendet werden können, um die Stabilität von Tests zu erhöhen und das Prinzip von <b>DRY</b> beizubehalten (wiederholen Sie sich nicht) - indem Sie die Funktionalität (Website) in einfachen Methoden einkapseln. <br><a name="habracut"></a><br><h3>  Mit anderen Worten </h3><br>  <b>Das Seitenobjekt</b> ist eine Instanz einer Klasse, die die Benutzeroberfläche von der Testumgebung abstrahiert (isoliert), Methoden für die Interaktion mit der Benutzeroberfläche vorstellt und die erforderlichen Informationen extrahiert. <br><br><h3>  Terminologie </h3><br>  Der Begriff <b>Seitenobjekt ist ein</b> zu allgemeines Konzept.  Nach meiner Erfahrung umfasst <b>Page Object</b> die folgenden 3 Typen: <br><br><ul><li>  <b>Komponentenobjekte</b> repräsentieren bestimmte Komponenten oder Widgets in der Benutzeroberfläche.  Zum Beispiel: Tabellen, Menüs, Artikel und andere Blöcke, die eine Gruppe von Komponenten enthalten. </li><li>  <b>Das Seitenobjekt</b> beschreibt einen bestimmten Bereich oder eine bestimmte Benutzeroberfläche in einer Webanwendung.  Es kann aus mehreren <b>Komponentenobjekten</b> bestehen und praktische Methoden für die Interaktion mit der in diesem Objekt enthaltenen Abstraktion enthalten. </li><li>  <b>Erfahrung wird</b> verwendet, um komplexe Funktionen zu gruppieren, deren Testen mehrere Schritte oder die Interaktion mit mehreren Seiten erfordert.  Aus eigener Erfahrung habe ich dieses Konzept verwendet, um komplexes Verhalten auf einer Seite zu abstrahieren (Testen von Lernseiten, Erstellen eines neuen Benutzers usw.) </li></ul><br><h3>  Beispiele </h3><br>  Betrachten Sie den einfachen <b>RSpec Capybara-</b> Test, der Blogs erstellt und keine <b>Seitenobjekte</b> verwendet: <br><br><pre><code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'feature_helper'</span></span> feature <span class="hljs-string"><span class="hljs-string">'Blog management'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">type:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:feature</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> scenario <span class="hljs-string"><span class="hljs-string">'Successfully creating a new blog'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> visit <span class="hljs-string"><span class="hljs-string">'/'</span></span> click_on <span class="hljs-string"><span class="hljs-string">'Form Examples'</span></span> expect(page).to have_content(<span class="hljs-string"><span class="hljs-string">'Create Blog'</span></span>) fill_in <span class="hljs-string"><span class="hljs-string">'blog_title'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">with:</span></span> <span class="hljs-string"><span class="hljs-string">'My Blog Title'</span></span> fill_in <span class="hljs-string"><span class="hljs-string">'blog_text'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">with:</span></span> <span class="hljs-string"><span class="hljs-string">'My new blog text'</span></span> click_on <span class="hljs-string"><span class="hljs-string">'Save Blog'</span></span> expect(page).to have_selector(<span class="hljs-string"><span class="hljs-string">'.blog--show'</span></span>) expect(page).to have_content(<span class="hljs-string"><span class="hljs-string">'My Blog Title'</span></span>) expect(page).to have_content(<span class="hljs-string"><span class="hljs-string">'My new blog text'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> scenario <span class="hljs-string"><span class="hljs-string">'Entering no data'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> visit <span class="hljs-string"><span class="hljs-string">'/'</span></span> click_on <span class="hljs-string"><span class="hljs-string">'Form Examples'</span></span> expect(page).to have_content(<span class="hljs-string"><span class="hljs-string">'Create Blog'</span></span>) click_on <span class="hljs-string"><span class="hljs-string">'Save Blog'</span></span> expect(page).to have_content(<span class="hljs-string"><span class="hljs-string">'4 errors stopped this form being submitted'</span></span>) expect(page).to have_content(<span class="hljs-string"><span class="hljs-string">"Title can't be blank"</span></span>) expect(page).to have_content(<span class="hljs-string"><span class="hljs-string">"Text can't be blank"</span></span>) expect(page).to have_content(<span class="hljs-string"><span class="hljs-string">'Title is too short'</span></span>) expect(page).to have_content(<span class="hljs-string"><span class="hljs-string">'Text is too short'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>  Schauen wir uns den Code genauer an, er hat mehrere Probleme.  Es gibt folgende Aktionen: Wechseln zur entsprechenden Seite, Interaktion mit der Seite und Überprüfen des Inhalts.  Ein Teil des Codes ist dupliziert, dies kann jedoch durch Einhaltung des <b>DRY-</b> Prinzips behoben werden. <br><br>  Es ist wichtig zu verstehen, dass dieser Code schwer zu pflegen ist, wenn sich Änderungen in der zu testenden Anwendung ergeben.  Beispielsweise können sich Elementklassen, Namen und Bezeichner ändern, was regelmäßige Aktualisierungen des Testcodes erfordert. <br><br>  Auch in diesem Code gibt es keinen 'semantischen Kontext', es ist schwer zu verstehen, welche Codezeilen logisch gruppiert sind. <br><br><h3>  Einführung in Seitenobjekte </h3><br>  Wie im Abschnitt zur Terminologie erläutert, können Seitenobjekte zur Darstellung von Abstraktionen auf Präsentationsebene verwendet werden. <br><br>  Wenn Sie das vorherige Beispiel verwenden und mit <b>Page Object</b> neue Blogs erstellen und Blogs anzeigen, können Sie den Code des vorherigen Beispiels löschen. <br><br>  Nachdem bestimmte Informationen zur technischen Implementierung entfernt wurden, sollte das Endergebnis (Code) lesbar sein und keine spezifischen Informationen zur Benutzeroberfläche (ID, CSS-Klassen usw.) enthalten. <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'feature_helper'</span></span> require_relative <span class="hljs-string"><span class="hljs-string">'../pages/new_blog'</span></span> require_relative <span class="hljs-string"><span class="hljs-string">'../pages/view_blog'</span></span> feature <span class="hljs-string"><span class="hljs-string">'Blog management'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">type:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:feature</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> let(<span class="hljs-symbol"><span class="hljs-symbol">:new_blog_page</span></span>) { <span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:Pages</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:NewBlog</span></span>.new } let(<span class="hljs-symbol"><span class="hljs-symbol">:view_blog_page</span></span>) { <span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:Pages</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:ViewBlog</span></span>.new } before <span class="hljs-symbol"><span class="hljs-symbol">:each</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> new_blog_page.visit_location <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> scenario <span class="hljs-string"><span class="hljs-string">'Successfully creating a new blog'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> new_blog_page.create <span class="hljs-symbol"><span class="hljs-symbol">title:</span></span> <span class="hljs-string"><span class="hljs-string">'My Blog Title'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">text:</span></span> <span class="hljs-string"><span class="hljs-string">'My new blog text'</span></span> expect(view_blog_page).to have_loaded expect(view_blog_page).to have_blog <span class="hljs-symbol"><span class="hljs-symbol">title:</span></span> <span class="hljs-string"><span class="hljs-string">'My Blog Title'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">text:</span></span> <span class="hljs-string"><span class="hljs-string">'My new blog text'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> scenario <span class="hljs-string"><span class="hljs-string">'Entering no data'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> new_blog_page.create <span class="hljs-symbol"><span class="hljs-symbol">title:</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">text:</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> expect(view_blog_page).to_not have_loaded expect(new_blog_page).to have_errors <span class="hljs-string"><span class="hljs-string">"Title can't be blank"</span></span>, <span class="hljs-string"><span class="hljs-string">"Text can't be blank"</span></span>, <span class="hljs-string"><span class="hljs-string">"Title is too short"</span></span>, <span class="hljs-string"><span class="hljs-string">"Text is too short"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>  <b>Seitenobjekte erstellen</b> <br><br>  Der erste Schritt beim Erstellen von <b>Seitenobjekten</b> besteht darin, eine <b>grundlegende</b> <b>Seitenklassenstruktur</b> zu erstellen: <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pages</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NewBlog</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">include</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RSpec::Matchers</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">include</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Capybara::DSL</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment"># ... end end</span></span></span></span></code> </pre> <br>  Verbinden (Aktivieren) von <b>Capybara :: DSL,</b> damit Instanzen von Seitenobjekten die in <b>Capybara</b> verfügbaren Methoden verwenden können <br><br><pre> <code class="ruby hljs">has_css? <span class="hljs-string"><span class="hljs-string">'.foo'</span></span> has_content? <span class="hljs-string"><span class="hljs-string">'hello world'</span></span> find(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).click</code> </pre> <br>  Außerdem habe ich verwendet <blockquote>  RSpec :: Matchers einschließen </blockquote>  In den obigen Beispielen wird die <b>Erwartungs-</b> RSpec-Bibliothek verwendet. <br><br>  Verstoßen Sie nicht gegen die Vereinbarung. <b>Seitenobjekte</b> sollten keine <b>Erwartungen (Erwartungen) enthalten</b> .  Gegebenenfalls bevorzuge ich diesen Ansatz jedoch, um mich auf die in <b>Capybara</b> integrierten Mechanismen für die Handhabung von Bedingungen zu stützen. <br><br>  Der folgende <b>Capybara-</b> Code <b>erwartet beispielsweise das</b> Vorhandensein von <b>'foo'</b> in <b>Seitenobjekten</b> (in diesem Fall <b>self</b> ): <br><br><pre> <code class="ruby hljs">expect(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>).to have_content <span class="hljs-string"><span class="hljs-string">'foo'</span></span></code> </pre> <br>  Im folgenden Code jedoch: <br><br><pre> <code class="ruby hljs">expect(page_object.content).to match <span class="hljs-string"><span class="hljs-string">'foo'</span></span></code> </pre> <br>  Unerwartete Fehler sind möglich (möglicherweise tritt ein schwebender Test auf), da <b>page_object.content</b> sofort auf Übereinstimmung mit der Bedingung überprüft wird und möglicherweise noch nicht deklariert wurde.  Für weitere Beispiele würde ich empfehlen, <b>die</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zuverlässigen asynchronen Integrationstests von</a> <b>Thoughtbot</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mit <b>Capybara zu</b></a> lesen. <br><br><h3>  Methodenerstellung </h3><br>  Wir können den Ort (die Region), von dem wir Daten erhalten möchten, im Rahmen einer Methode abstrahieren (beschreiben): <br><br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">visit_location</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">visit</span></span></span><span class="hljs-function"> '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">/</span></span></span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">blogs</span></span></span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">/</span></span></span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-function">' </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment"># It can be beneficial to assert something positive about the page # before progressing with your tests at this point # # This can be useful to ensures that the page has loaded successfully, and any # asynchronous JavaScript has been loaded and retrieved etc. # # This is required to avoid potential race conditions. expect(self).to have_loaded end def has_loaded? self.has_selector? 'h1', text: 'Create Blog' end</span></span></span></span></code> </pre> <br>  Es ist wichtig, die <b>semantisch korrekten</b> Namen für die Methoden für Ihre <b>Seitenobjekte</b> auszuwählen <br><br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-symbol"><span class="hljs-function"><span class="hljs-params"><span class="hljs-symbol">title:</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-symbol"><span class="hljs-function"><span class="hljs-params"><span class="hljs-symbol">text:</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-comment"><span class="hljs-comment"># ... end def has_errors?(*errors) # ... end def has_error?(error) # ... end</span></span></code> </pre> <br>  Im Allgemeinen ist es wichtig, das Prinzip der funktional integrierten Methoden zu befolgen und nach Möglichkeit das Prinzip der Einzelverantwortung (Prinzip der Einzelverantwortung) einzuhalten. <br><br><h3>  Komponentenobjekte </h3><br>  In unserem Beispiel verwenden wir die NewBlog-Klasse, es muss jedoch keine Implementierung erstellt werden. <br><br>  Da wir mit dem Formular interagieren, können wir zusätzlich eine Klasse einführen, um diese Komponente darzustellen: <br><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># ... def create(title:, text:) blog_form.new.create title: title, text: text end # ... private def blog_form ::Components::BlogForm end</span></span></code> </pre> <br>  Wo die Implementierung von Methoden für BlogForm ausgeblendet werden kann: <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Components</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlogForm</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">include</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RSpec::Matchers</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">include</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Capybara::DSL</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">create</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class">:, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class">:) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">within</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">blog_form</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fill_in</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">blog_title</span></span></span><span class="hljs-class">', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">with</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fill_in</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">blog_text</span></span></span><span class="hljs-class">', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">with</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">click_on</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Save</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Blog</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">private</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">blog_form</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">find</span></span></span><span class="hljs-class">('.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">blog</span></span></span><span class="hljs-class">--</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class">') </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><h3>  Alle zusammen </h3><br>  Mit den oben genannten Klassen können Sie jetzt die <b>Seitenobjekte</b> Ihrer Seite als Teil der Beschreibung des Objekts abfragen und instanziieren. <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'feature_helper'</span></span> require_relative <span class="hljs-string"><span class="hljs-string">'../pages/new_blog'</span></span> require_relative <span class="hljs-string"><span class="hljs-string">'../pages/view_blog'</span></span> feature <span class="hljs-string"><span class="hljs-string">'Blog management'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">type:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:feature</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> let(<span class="hljs-symbol"><span class="hljs-symbol">:new_blog_page</span></span>) { <span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:Pages</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:NewBlog</span></span>.new } let(<span class="hljs-symbol"><span class="hljs-symbol">:view_blog_page</span></span>) { <span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:Pages</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:ViewBlog</span></span>.new } <span class="hljs-comment"><span class="hljs-comment"># ... end</span></span></code> </pre> <br>  Hinweis: Ich habe absichtlich ein Seitenobjekt manuell oben in der Objektdatei erstellt.  In einigen RSpec-Tests kann es praktisch sein, alle Unterstützungsdateien automatisch herunterzuladen und in Objektdateien darauf zuzugreifen. Dies kann jedoch zu übermäßiger Arbeitsbelastung führen, wenn große Codeteile verwendet werden.  Dies führt insbesondere zu einem langsamen Start und möglichen unbeabsichtigten zyklischen Abhängigkeiten. <br><br><h3>  Seitenobjekte aufrufen </h3><br>  Jetzt haben wir in jedem Szenario Zugriff auf Instanzen von <b>new_blog_page</b> und <b>view_blog_page</b> : <br><br><pre> <code class="ruby hljs">scenario <span class="hljs-string"><span class="hljs-string">'Successfully creating a new blog'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> new_blog_page.create <span class="hljs-symbol"><span class="hljs-symbol">title:</span></span> <span class="hljs-string"><span class="hljs-string">'My Blog Title'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">text:</span></span> <span class="hljs-string"><span class="hljs-string">'My new blog text'</span></span> expect(view_blog_page).to have_loaded expect(view_blog_page).to have_blog <span class="hljs-symbol"><span class="hljs-symbol">title:</span></span> <span class="hljs-string"><span class="hljs-string">'My Blog Title'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">text:</span></span> <span class="hljs-string"><span class="hljs-string">'My new blog text'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><h3>  Namenskonventionen / Prädikatmethoden </h3><br>  Wie bei den meisten Dingen in Rails / Ruby gibt es Konventionen, die auf den ersten Blick unbedeutend (nicht bindend) erscheinen. <br><br>  In unseren Tests haben wir mit <b>have_loaded</b> und <b>have_blog</b> mit dem <b>Seitenobjekt</b> <b>interagiert</b> : <br><br><pre> <code class="ruby hljs">expect(view_blog_page).to have_loaded expect(view_blog_page).to have_blog <span class="hljs-symbol"><span class="hljs-symbol">title:</span></span> <span class="hljs-string"><span class="hljs-string">'My Blog Title'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">text:</span></span> <span class="hljs-string"><span class="hljs-string">'My new blog text'</span></span></code> </pre> <br>  Die Methodennamen unseres <b>Seitenobjekts wurden jedoch</b> tatsächlich <b>geladen.</b>  und <b>has_blog?</b>  :: <br><br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">has_loaded?</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment"># ... end def has_blog?(title:, text:) # ... end</span></span></span></span></code> </pre> <br>  Dies ist eine subtile Unterscheidung, die Aufmerksamkeit erfordert.  Für weitere Informationen zu dieser Konvention würde ich empfehlen, den folgenden Link zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Prädikat-Matchern zu</a> lesen. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Git, der in den Beispielen verwendete Quellcode</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Das Original</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466527/">https://habr.com/ru/post/de466527/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466515/index.html">Interview Was sollte ein Ingenieur von der Arbeit bei einem europäischen Startup erwarten, wie werden Interviews durchgeführt und ist es schwierig, sich anzupassen?</a></li>
<li><a href="../de466517/index.html">Lokalisierungstraining an der Universität von Washington</a></li>
<li><a href="../de466519/index.html">Detaillierte Analyse von AWS Lambda</a></li>
<li><a href="../de466521/index.html">C for Metal - Edelmetall für Computer auf Intel-Grafikkarten</a></li>
<li><a href="../de466525/index.html">Was ist ein PSD iPhone Layout und wie wird es verwendet?</a></li>
<li><a href="../de466529/index.html">Kompilierungstypen in der JVM: Aufdecken der Black Magic-Sitzung</a></li>
<li><a href="../de466535/index.html">DeepClone neu denken</a></li>
<li><a href="../de466537/index.html">Verwendung von JavaScript-Modulen in der Produktion: aktueller Stand der Dinge. Teil 1</a></li>
<li><a href="../de466539/index.html">Verwendung von JavaScript-Modulen in der Produktion: aktueller Stand der Dinge. Teil 2</a></li>
<li><a href="../de466541/index.html">Verwenden von DbTool zum Seeding von Datenbanken in .NET-Anwendungen (Core)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>