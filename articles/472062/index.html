<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äçüéì üë∞üèæ üêñ Monitoreo + prueba de estr√©s = pron√≥stico y sin fallas üë®üèª‚Äçüéì üöö üò∑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El departamento de TI de VTB tuvo que lidiar con situaciones de emergencia en los sistemas varias veces, cuando la carga sobre ellos aument√≥ muchas ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Monitoreo + prueba de estr√©s = pron√≥stico y sin fallas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/472062/">  El departamento de TI de VTB tuvo que lidiar con situaciones de emergencia en los sistemas varias veces, cuando la carga sobre ellos aument√≥ muchas veces.  Por lo tanto, se hizo necesario desarrollar y probar un modelo que predecir√≠a la carga m√°xima en sistemas cr√≠ticos.  Para esto, los especialistas de TI del banco configuraron el monitoreo, analizaron los datos y aprendieron c√≥mo automatizar los pron√≥sticos.  En un breve art√≠culo, explicaremos qu√© herramientas ayudaron a predecir la carga y si fue posible optimizar el trabajo con su ayuda. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b84/d49/7f4/b84d497f418f150e1cadeefa985dee7c.jpg"><br><a name="habracut"></a><br>  Los problemas con servicios altamente cargados surgen en casi todos los sectores, pero son cr√≠ticos para el sector financiero.  En la hora X, todas las unidades de combate deben estar listas y, por lo tanto, era necesario saber de antemano lo que podr√≠a suceder e incluso determinar el d√≠a en que la carga saltar√≠a y qu√© sistemas la encontrar√≠an.  Las fallas deben ser combatidas y prevenidas, por lo que la necesidad de implementar un sistema de an√°lisis predictivo ni siquiera se ha discutido.  Era necesario actualizar los sistemas basados ‚Äã‚Äãen datos de monitoreo. <br><br><h2>  Anal√≠tica en la rodilla </h2><br>  Un proyecto de n√≥mina es uno de los m√°s sensibles en caso de falla.  Es m√°s comprensible para el pron√≥stico, por lo que decidimos comenzar con √©l.  Debido a la alta conectividad en los momentos de cargas m√°ximas, otros subsistemas, incluidos los servicios de banca remota (RBS), podr√≠an experimentar problemas.  Por ejemplo, los clientes, encantados por SMS sobre la recepci√≥n de dinero, comenzaron a usarlos activamente.  La carga podr√≠a saltar m√°s de un orden de magnitud. <br><br>  El primer modelo de pron√≥stico se cre√≥ manualmente.  Tomamos la descarga para el √∫ltimo a√±o y calculamos en qu√© d√≠as se esperan picos m√°ximos: por ejemplo, el 1, 15 y 25, as√≠ como en los √∫ltimos d√≠as del mes.  Este modelo requiri√≥ un trabajo serio y no dio un pron√≥stico preciso.  Sin embargo, identific√≥ cuellos de botella en los que era necesario agregar hardware e hizo posible optimizar el proceso de transferencia de dinero al acordar con clientes ancla: para no dar salarios de un solo trago, las transacciones de diferentes regiones se extendieron a tiempo.  Ahora los procesamos en partes que la infraestructura de TI del banco es capaz de masticar sin falta. <br><br>  Despu√©s de recibir el primer resultado positivo, pasamos a la automatizaci√≥n de pron√≥sticos. Una docena de secciones cr√≠ticas m√°s esperaban nuestro turno. <br><br><h2>  Enfoque integrado </h2><br>  En VTB, presentaron el sistema de monitoreo MicroFocus.  A partir de ah√≠ tomamos la recopilaci√≥n de datos de pron√≥stico, un sistema de almacenamiento y un sistema de informes.  De hecho, ya hab√≠a monitoreo, solo quedaba agregar m√©tricas, un m√≥dulo de predicci√≥n y crear nuevos informes.  Esta decisi√≥n es respaldada por un contratista externo, Technoserv, por lo que el trabajo principal del proyecto fue realizado por sus especialistas, pero nosotros construimos el modelo por nuestra cuenta.  El sistema de pron√≥stico se hizo en base a Prophet; este producto de c√≥digo abierto se desarroll√≥ en Facebook.  Es f√°cil de usar y f√°cil de integrar con nuestras herramientas integrales de monitoreo y Vertica.  En t√©rminos generales, el sistema analiza el cronograma de carga y, bas√°ndose en la serie de Fourier, lo extrapola.  Tambi√©n es posible agregar ciertos coeficientes por d√≠as, tomados de nuestro modelo.  Las m√©tricas se toman sin intervenci√≥n humana, una vez a la semana el pron√≥stico se recalcula autom√°ticamente y se env√≠an nuevos informes a los destinatarios. <br><br>  Este enfoque revela los principales ciclos, por ejemplo, anual, mensual, trimestral y semanal.  Pagos de salarios y anticipos, per√≠odos de vacaciones, feriados y ventas: todo esto afecta la cantidad de llamadas a los sistemas.  Result√≥, por ejemplo, que algunos ciclos se superponen entre s√≠, y el Distrito Federal Central asigna la carga principal (75%) a los sistemas.  Las personas jur√≠dicas y los individuos se comportan de manera diferente.  Si la carga de trabajo de los "f√≠sicos" se distribuye de manera relativamente uniforme a lo largo de los d√≠as de la semana (se trata de muchas transacciones peque√±as), entonces las empresas tienen el 99.9% de su tiempo, mientras que las transacciones pueden ser cortas o pueden procesarse en minutos o incluso horas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/70e/6ef/010/70e6ef0108827fad2870f63aa380e575.jpg"><br><br>  En funci√≥n de los datos obtenidos, se determinan las tendencias a largo plazo.  El nuevo sistema ha revelado que las personas se est√°n yendo masivamente a la RB.  Esto lo sabemos todos, pero no esper√°bamos tal escala y al principio no cre√≠amos en ellos: la cantidad de llamadas a las oficinas del banco disminuye extremadamente r√°pido, y la cantidad de transacciones a distancia crece exactamente en la misma cantidad.  En consecuencia, la carga en el sistema tambi√©n est√° creciendo y seguir√° creciendo.  Ahora pronosticamos la carga hasta febrero de 2020.  Los d√≠as normales se pueden predecir con un error del 3% y los d√≠as pico con un error del 10%.  Este es un buen resultado. <br><br><h2>  Trampas </h2><br>  Como de costumbre, hubo algunas dificultades.  El mecanismo de extrapolaci√≥n que usa la serie de Fourier va mal a trav√©s de cero; sabemos que los fines de semana las entidades legales generan pocas transacciones, pero el m√≥dulo de predicci√≥n produce valores que est√°n lejos de cero.  Fue posible corregirlos por la fuerza, pero las muletas no son nuestro m√©todo.  Adem√°s, era necesario resolver el problema de la recopilaci√≥n de datos sin dolor de los sistemas fuente.  La recopilaci√≥n regular de informaci√≥n requiere recursos inform√°ticos serios, por lo que creamos cach√©s r√°pidos utilizando la replicaci√≥n, ya obtenemos datos comerciales de las r√©plicas.  La ausencia de carga adicional en los sistemas maestros en tales casos es un requisito de bloqueo. <br><br><h2>  Nuevos retos </h2><br>  La tarea de la predicci√≥n de picos en la frente se resolvi√≥: no hubo quiebras bancarias relacionadas con la sobrecarga desde mayo de este a√±o, y el nuevo sistema de pron√≥stico jug√≥ un papel importante en esto.  S√≠, no fue suficiente, y ahora el banco quiere entender cu√°n peligrosos son los picos para ello.  Necesitamos pron√≥sticos utilizando m√©tricas de las pruebas de carga, y para aproximadamente el 30% de los sistemas cr√≠ticos esto ya funciona, el resto est√° en el proceso de obtener pron√≥sticos.  En la siguiente etapa, vamos a predecir la carga en los sistemas no en las transacciones comerciales, sino en t√©rminos de infraestructura de TI, es decir, bajaremos una capa a continuaci√≥n.  Adem√°s, necesitamos automatizar completamente la recopilaci√≥n de m√©tricas y construir pron√≥sticos basados ‚Äã‚Äãen ellas, para no participar en la descarga.  No hay nada sobresaliente en esto: solo realizamos controles cruzados y pruebas de estr√©s de acuerdo con las mejores pr√°cticas mundiales. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/472062/">https://habr.com/ru/post/472062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../472044/index.html">Descripci√≥n general de ISPmanager: alojamiento y paneles de control del sitio</a></li>
<li><a href="../472046/index.html">Conferencias: el comienzo del camino</a></li>
<li><a href="../472052/index.html">Dise√±o orientado a datos (o por qu√©, usando OOP, probablemente te dispares en el pie)</a></li>
<li><a href="../472054/index.html">Organizadores y asistentes de ense√±anza sobre los programas en l√≠nea del CS Center.</a></li>
<li><a href="../472060/index.html">La polic√≠a alemana irrumpi√≥ en el b√∫nker militar, que albergaba el centro de datos recientemente declarado.</a></li>
<li><a href="../472064/index.html">Ansible + auto git pull en el cl√∫ster de m√°quinas virtuales en la nube</a></li>
<li><a href="../472068/index.html">Uso de SSD NVME como unidad de sistema en computadoras con BIOS antiguo y sistema operativo Linux</a></li>
<li><a href="../472072/index.html">PG12: una docena de parches de Postgres Professional</a></li>
<li><a href="../472076/index.html">El libro "Java para todos"</a></li>
<li><a href="../472078/index.html">Riesgos de banca abierta</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>