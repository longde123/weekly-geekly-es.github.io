<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ปโ๐คโ๐จ๐ผ ๐ ๐๐ฝ ุฅูุชู ุฅุฏูุณูู Intel IoT Analytics Cloud: ุฅุฑุณุงู SMS ู RESTful Client ุนูู ASP.NET ๐จ๐ฟโ๐ ๐ ๐จ๐ฝโ๐ญ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ุงูุนูู ูุน Intel IoT Analytics Cloud . ุฅุถุงูุฉ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช SMS ุจุงุณุชุฎุฏุงู ุจูุงุจุงุช HTTP ูุฅูุดุงุก ุนููู RESTful ุจุณูุท ุนูู ASP.NET. ุชูุฎูุต. 
 
 ุฅุฑุณ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฅูุชู ุฅุฏูุณูู Intel IoT Analytics Cloud: ุฅุฑุณุงู SMS ู RESTful Client ุนูู ASP.NET</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384929/"><img src="https://habrastorage.org/getpro/geektimes/post_images/bd9/939/ed9/bd9939ed9f98c235c4fcb8f033e8ceba.jpg" alt="ุชุญูููุงุช Intel IoT"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ุงูุนูู ูุน </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel IoT Analytics</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cloud </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅุถุงูุฉ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช SMS ุจุงุณุชุฎุฏุงู ุจูุงุจุงุช HTTP ูุฅูุดุงุก ุนููู RESTful ุจุณูุท ุนูู ASP.NET. </font><font style="vertical-align: inherit;">ุชูุฎูุต. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฑุณุงู ุฅุดุนุงุฑุงุช SMS ุจุงุณุชุฎุฏุงู ุจูุงุจุฉ HTTP</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูู ุนูู ุณุงุจู ุจูุงุณุทุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel Edison. </font><font style="vertical-align: inherit;">ุงูุนูู ูุน ุณุญุงุจุฉ Intel IoT Analytics: ุฅูุดุงุก ุงูููุงุนุฏ ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชู ุชุดููู ุงูููุงุนุฏ ุงูุชู ุชุณูุญ ูู ุจุฅุฑุณุงู: ุฅุดุนุงุฑ ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุฅุฏุงุฑุฉ ุทุงูุฉ ุงูุชุฑุญูู. </font><font style="vertical-align: inherit;">ุฅุฑุณุงู ุฑุณุงุฆู SMS ุ ุฅุถุงูุฉ ุฅูู ูุงุชูู ุงููุงุนุฏุชูู ุงูุชู ุชู ุฅูุดุงุคูุง. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุนุฏ:</font></font></strong><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higth_temp_PowerOnRelay_and_send_to_web@devdotnet.org</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Low_temp_PowerOffRelay_and_send_to_web@devdotnet.org</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูู ูุณุชุฎุฏู ุจูุงุจุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smsc.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SMS </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุชุงุญุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฅุฑุณุงู ุฑุณุงูุฉ SMS ุ ูููู ุฅูุดุงุก ูุฅุฑุณุงู ุทูุจ GET ูู ุงููููุฐุฌ: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smsc.ru/sys/send.phpุlogin=&amp;psw=&amp;phones=&amp;mes=</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุญูุซ: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณุฌูู ุงูุฏุฎูู - ุชุณุฌูู ุฏุฎูู ุงูุนููู </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- ูููุฉ ูุฑูุฑ ุงูุนููู ุฃู ุชุฌุฒุฆุฉ ูููุฉ ูุฑูุฑ MD5 ูู ุงูุญุงูุฉ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุงูุตุบูุฑุฉ</font></a><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููุงุชู - ุงูุฑูู ุจุงูุชูุณูู ุงูุฏููู ุจุฏูู ุนูุงูุฉ "+" </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- ูุต ุงูุฑุณุงูุฉ ุงููุฑุงุฏ ุฅุฑุณุงููุง. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุณุช ููุงู ุญุงุฌุฉ ูุฅุถุงูุฉ ุฑุคูุณ ุ ูู ุดูุก ุจุณูุท ููุบุงูุฉ. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุณูุดูู </font></a></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทูุจูู: </font></font></strong><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smsc.ru/sys/send.phpุlogin=tele</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> **** &amp; psw = d46d70eb6 ****** &amp; phones = 79232 ****** &amp; mes = Relay_power_ON </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smsc.ru/sys/send. phpุ login = tele</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> **** &amp; psw = d46d70eb6 ****** &amp; phones = 79232 ****** &amp; mes = Relay_power_OFF ุงูุชูู </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูู ูุณู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุนุฏ ุ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุญ ุงููุงุนุฏุฉ</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higth_temp_PowerOnRelay_and_send_to_web@devdotnet.org. </font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุถู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุงูุฅุฎุทุงุฑุงุช - ููุทุฉ ููุงูุฉ HTTP</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุฏุฎู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุงู URL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/b4c/5ef/f11/b4c5eff113c1821a8a37c0254724887b.png" alt="ุชุญูููุงุช Intel IoT"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุฌุนู ุฃูุถูุง </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Low_temp_PowerOffRelay_and_send_to_web@devdotnet.org</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุงุนุฏุฉ ุงูุซุงููุฉ </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููู SMS ุนูู ุงููุงุชู</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/05f/e2b/b7d/05fe2bb7db543854b31a6d9347efb1b8.png" alt="Intel IoT Analytics"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุงูุต ูุธููุฉ ุฅุฑุณุงู ุงูุฑุณุงุฆู ุงููุตูุฑุฉ ุ ูู ุงูุถุฑูุฑู ููุงุญุธุฉ ุนุฏู ุงููุฏุฑุฉ ุนูู ุฅุฑุณุงู ุงูุจูุงูุงุช ุงูุฏููุงููููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุง ููููู ุฅุฑุณุงู ูุฑุงุกุฉ ุงููุณุชุดุนุฑ ุงูุญุงููุฉ. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููู RESTful ุจุณูุท ุนูู ASP.NET Razor ุณูุดูู</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุตูุญุฉ ุชุนุฑุถ ูุฑุงุกุงุช ุงููุณุชุดุนุฑ ุงูุญุงููุฉ: ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุงูุถุบุท. </font><font style="vertical-align: inherit;">ุณูุถุน ุฌุฒุก ุงูุชุญูู ุนูู ุงูุตูุญุฉ: ุชุดุบูู ุงูุชุชุงุจุน ู LED. </font><font style="vertical-align: inherit;">Cloud API ูุชุงุญ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงูุชูููุฐ ุนูู ASP.NET Razor netf 4.5. </font><font style="vertical-align: inherit;">ููุนูู ูุน JSON ุ ูุชู ุงุณุชุฎุฏุงู ููุชุจุฉ Newtonsoft.Json. </font><font style="vertical-align: inherit;">ูุญุชูู ููู Web.config ุนูู ุชุณุฌูู ุงูุฏุฎูู ููููุฉ ุงููุฑูุฑ ูููุตูู ุฅูู ุงูุณุญุงุจุฉ. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุซุงู ููุณ ุญูุงู ูุงููุงู ุ ููููู ุนุฑุถ ุจุณูุท ูุงุณุชุฎุฏุงู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช. </font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูุนุงุฏุฉ ุ ูุญุตู ุนูู ุงูุฑูุฒ ุงููููุฒ ุ ูุณู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุถ ูููู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑูุฒ</font></font></b><div class="spoiler_text"><pre><code class="hljs pgsql">string GetNewToken()<font></font>
            {<font></font>
                // <span class="hljs-keyword">login</span>  pass<font></font>
                string strLogin, strPass;<font></font>
                strLogin = <span class="hljs-keyword">System</span>.<span class="hljs-keyword">Configuration</span>.ConfigurationManager.AppSettings["Login"];<font></font>
                strPass = <span class="hljs-keyword">System</span>.<span class="hljs-keyword">Configuration</span>.ConfigurationManager.AppSettings["Pass"];<font></font>
                //,  .<font></font>
                //https://github.com/enableiot/iotkit-api/wiki/<span class="hljs-keyword">Authorization</span>
                // <span class="hljs-type">JSON</span>
                var obj = <span class="hljs-built_in">new</span><font></font>
                {<font></font>
                    username = strLogin,<font></font>
                    <span class="hljs-keyword">password</span> = strPass<font></font>
                };<font></font>
                string postData = JsonConvert.SerializeObject(obj, Formatting.Indented);<font></font>
                //HttpWebRequest<font></font>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.<span class="hljs-keyword">Create</span>("https://dashboard.us.enableiot.com/v1/api/auth/token");<font></font>
                httpWebRequest.<span class="hljs-keyword">Method</span> = "POST";<font></font>
                httpWebRequest.ContentType = "application/json";<font></font>
                //<font></font>
                byte[] byte1 = <span class="hljs-keyword">System</span>.Text.<span class="hljs-keyword">Encoding</span>.UTF8.GetBytes(postData);<font></font>
                httpWebRequest.ContentLength = byte1.Length;<font></font>
                httpWebRequest.GetRequestStream().<span class="hljs-keyword">Write</span>(byte1, <span class="hljs-number">0</span>, byte1.Length);<font></font>
                httpWebRequest.GetRequestStream().<span class="hljs-keyword">Close</span>();<font></font>
                //<font></font>
                StreamReader reader = <span class="hljs-built_in">new</span> StreamReader(httpWebRequest.GetResponse().GetResponseStream());<font></font>
                JObject objResponse = JObject.Parse(reader.ReadToEnd());<font></font>
                <span class="hljs-keyword">return</span> (string)objResponse["token"];<font></font>
            }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุงุกุฉ ุงูุจูุงูุงุช ุ ูุณู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wiki Data-API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑูุฒ</font></font></b><div class="spoiler_text"><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GetStateSensors</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> strToken, Dictionary&lt;<span class="hljs-keyword">string</span>, <span class="hljs-keyword">string</span>&gt; dicSensors</span>)</span><font></font>
            {<font></font>
                <span class="hljs-comment">// </span>
                <span class="hljs-comment">//https://github.com/enableiot/iotkit-api/wiki/Data-API</span>
                <span class="hljs-comment">// JSON</span>
                <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span><font></font>
                {<font></font>
                    <span class="hljs-keyword">from</span> = <span class="hljs-number">-20</span>,<font></font>
                    targetFilter = <span class="hljs-keyword">new</span> { deviceList = <span class="hljs-keyword">new</span>[] { <span class="hljs-string">"9e-8d-22-0c-50-7b"</span> } },<font></font>
                    metrics = <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">new</span> {<font></font>
						id=<span class="hljs-string">"99fb5b73-a9e2-4ae0-8a0d-45e6a7cc0541"</span>,<font></font>
						op=<span class="hljs-string">"none"</span><font></font>
					},<font></font>
                    <span class="hljs-keyword">new</span> {<font></font>
						id=<span class="hljs-string">"b3731f8a-4f31-414d-a072-b364b1792b5b"</span>,<font></font>
						op=<span class="hljs-string">"none"</span><font></font>
					}<font></font>
				}<font></font>
                };<font></font>
                <span class="hljs-keyword">string</span> postData = JsonConvert.SerializeObject(obj, Formatting.Indented);
                <span class="hljs-comment">//HttpWebRequest</span>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(<span class="hljs-string">"https://dashboard.us.enableiot.com/v1/api/accounts/4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa/data/search"</span>);<font></font>
                httpWebRequest.Method = <span class="hljs-string">"POST"</span>;<font></font>
                httpWebRequest.ContentType = <span class="hljs-string">"application/json"</span>;
                <span class="hljs-comment">//Headers</span>
                httpWebRequest.Headers.Add(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + strToken);<font></font>
                httpWebRequest.Headers.Add(<span class="hljs-string">"accountId"</span>, <span class="hljs-string">"4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa"</span>);
                <span class="hljs-comment">//</span>
                <span class="hljs-keyword">byte</span>[] byte1 = System.Text.Encoding.UTF8.GetBytes(postData);<font></font>
                httpWebRequest.ContentLength = byte1.Length;<font></font>
                httpWebRequest.GetRequestStream().Write(byte1, <span class="hljs-number">0</span>, byte1.Length);<font></font>
                httpWebRequest.GetRequestStream().Close();<font></font>
                <span class="hljs-comment">//</span>
                StreamReader reader = <span class="hljs-keyword">new</span> StreamReader(httpWebRequest.GetResponse().GetResponseStream());<font></font>
                JObject objResponse = JObject.Parse(reader.ReadToEnd());<font></font>
                <span class="hljs-comment">//add Dic</span>
                <span class="hljs-keyword">string</span> strValueSensor = (<span class="hljs-keyword">string</span>)objResponse[<span class="hljs-string">"series"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"points"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>];<font></font>
                dicSensors.Add(<span class="hljs-string">"pressure"</span>, strValueSensor);<font></font>
                strValueSensor = (<span class="hljs-keyword">string</span>)objResponse[<span class="hljs-string">"series"</span>][<span class="hljs-number">1</span>][<span class="hljs-string">"points"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>];<font></font>
                strValueSensor = Math.Round(<span class="hljs-keyword">decimal</span>.Parse(strValueSensor, System.Globalization.CultureInfo.CreateSpecificCulture(<span class="hljs-string">"en"</span>)), <span class="hljs-number">2</span>).ToString();<font></font>
                dicSensors.Add(<span class="hljs-string">"temperature"</span>, strValueSensor);<font></font>
            }<font></font>
</code></pre><br>
</div></div><br>
<strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">ููุฎุต </font></strong><strong><font style="vertical-align: inherit;">ุงููุงุฌูุฉ</font></strong></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/d46/3f7/a36/d463f7a364e3cf24538e96a8f4f7b771.png" alt="ุชุญูููุงุช Intel IoT"><br>
<br>
<strong><font style="vertical-align: inherit;"></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุฑุฑู ุงูุณุญุงุจุฉ ูุฌูุน ุงูุจูุงูุงุช ูู ุจูุงุก ุจููุชู ุงูุฃุณุงุณูุฉ ุ ููุง ูููู ูู ุชูููุฉ ุดุฑุงุก ุงูุฃุฌูุฒุฉ ูุงูุจุฑุงูุฌ. ุชูููู ุงูุฃุฌูุฒุฉ ุ ูุฃุฌูุฒุฉ ุงูุงุณุชุดุนุงุฑ ุจุณูุทุฉ ููุบุงูุฉ. ูุง ุชุณูุญ ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงููุทูุฑุฉ ุจุชููู ุงูุจูุงูุงุช ูุฅุฏุงุฑุฉ ุงูุฌูุงุฒ ูุญุณุจ ุ ุจู ุฃูุถูุง ุจุฅูุดุงุก ููุญุฉ ุงูุฅุฏุงุฑุฉ ุงูุฎุงุตุฉ ุจูุง. ูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุฏูู ุชุฃุฎูุฑ ูุจูุฑ ุ ูุง ุชุถูุน ุงูุทูุจุงุช. ูุชููุฑ ุฏูุฑุงู: ุงููุณุคูู ูุงููุณุชุฎุฏู. ูุฅุถุงูุฉ ูุณุชุฎุฏู ุ ูุญุชุงุฌ ุงููุณุคูู ุฅูู ุชุญุฏูุฏ ุจุฑูุฏ ุฅููุชุฑููู ุฌุฏูุฏ ุ ูุณูุชู ุฅุฑุณุงู ุฑุณุงูุฉ ุฏุนูุฉ ุฅูู ูุฐุง ุงูุนููุงู. ูู ุนูููุฉ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ ุ ุณููุณุฃู ุงููุณุชุฎุฏู ุนู ูุจูู ุฏุนูุฉ ูููุตูู (ุฏุนูุฉ). ูุจุงูุชุงูู ุ ูุดุงุฑู ุงููุณุชุฎุฏู ูู ุฅุฏุงุฑุฉ ุญุณุงุจู ุ ุจูุง ูู ุฐูู ุชุบููุฑุงุช ูููุฉ ุงููุฑูุฑ. ูู ุงูุนููุจูู ุงููุณุชุญูู ุชุถููู ูุฑุงุกุงุช ุงููุณุชุดุนุฑ ูู ุฑุณุงูุฉ SMS ุ ููุท ูุงูุจ ูุนุฏ ูุณุจููุง. ุจุงููุณุจุฉ ููุจุฑูุฏ ุงูุฅููุชุฑููู ุ ูุง ุชูุฌุฏ ููุงูุจ ุ ููุท ุทุฑููุฉ ุนุฑุถ ููุงุณูุฉ ูุน ููุญุฉ ูุฑุงุกุฉ ูุณุชุดุนุฑ. ุชู ุงูุชุดุงู ููุฒุฉ ุฃุฎุฑู ุ ุชุชููู ูู ุชุณูุณู ููุงุนุฏ ุงููุนุงูุฌุฉ. ูู ุจุนุถ ุงูุฃุญูุงู ููุญุธุช ุญุงูุฉ ูุน ุฅููุงู ุชุดุบูู ุงูุชุชุงุจุน ูุจุงุดุฑุฉ ุจุนุฏ ุงูุชุดุบูู. ุนูุงูุฉ ุนูู ุฐูู ุ ููููุง ูููุทู ุงูุชุชุงุจุน ุ ูุงู ูู ุงูููุชุฑุถ ุฃู ูุชู ุฅููุงู ุงูุชุดุบูู ููุท ุจุนุฏ ุงูุฎูุงุถ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุฅูู ุฃูู ูู 28 ุฏุฑุฌุฉ ูุฆููุฉ. ููู ุชุชุถูู ุดุฑูุท ููุทู ุงูููุงุนุฏ ูุงูุฑูุฒ ุนูู ุงูุฌูุงุฒ ุฃุฎุทุงุก. ุชู ุญู ุงููููู ูู ุฎูุงู ุนุฑุถ ุณุฌู ุงูุชูุจููุงุช ุ ุชุชู ุฅุถุงูุฉ ุชูุจููุงุช ุฌุฏูุฏุฉ ุฅูู ููุงูุฉ ุงููุงุฆูุฉ.ูู ุจุนุถ ุงูุฃุญูุงู ููุญุธุช ุญุงูุฉ ูุน ุฅููุงู ุชุดุบูู ุงูุชุชุงุจุน ูุจุงุดุฑุฉ ุจุนุฏ ุงูุชุดุบูู. ุนูุงูุฉ ุนูู ุฐูู ุ ููููุง ูููุทู ุงูุชุชุงุจุน ุ ูุงู ูู ุงูููุชุฑุถ ุฃู ูุชู ุฅููุงู ุงูุชุดุบูู ููุท ุจุนุฏ ุงูุฎูุงุถ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุฅูู ุฃูู ูู 28 ุฏุฑุฌุฉ ูุฆููุฉ. ููู ุชุชุถูู ุดุฑูุท ููุทู ุงูููุงุนุฏ ูุงูุฑูุฒ ุนูู ุงูุฌูุงุฒ ุฃุฎุทุงุก. ุชู ุญู ุงููููู ูู ุฎูุงู ุนุฑุถ ุณุฌู ุงูุชูุจููุงุช ุ ุชุชู ุฅุถุงูุฉ ุชูุจููุงุช ุฌุฏูุฏุฉ ุฅูู ููุงูุฉ ุงููุงุฆูุฉ.ูู ุจุนุถ ุงูุฃุญูุงู ููุญุธุช ุญุงูุฉ ูุน ุฅููุงู ุชุดุบูู ุงูุชุชุงุจุน ูุจุงุดุฑุฉ ุจุนุฏ ุงูุชุดุบูู. ุนูุงูุฉ ุนูู ุฐูู ุ ููููุง ูููุทู ุงูุชุชุงุจุน ุ ูุงู ูู ุงูููุชุฑุถ ุฃู ูุชู ุฅููุงู ุงูุชุดุบูู ููุท ุจุนุฏ ุงูุฎูุงุถ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุฅูู ุฃูู ูู 28 ุฏุฑุฌุฉ ูุฆููุฉ. ููู ุชุชุถูู ุดุฑูุท ููุทู ุงูููุงุนุฏ ูุงูุฑูุฒ ุนูู ุงูุฌูุงุฒ ุฃุฎุทุงุก. ุชู ุญู ุงููููู ูู ุฎูุงู ุนุฑุถ ุณุฌู ุงูุชูุจููุงุช ุ ุชุชู ุฅุถุงูุฉ ุชูุจููุงุช ุฌุฏูุฏุฉ ุฅูู ููุงูุฉ ุงููุงุฆูุฉ.</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/getpro/geektimes/post_images/6dc/b9e/69e/6dcb9e69e68161149a1c8bafe72579c9.png" alt="ุชุญูููุงุช Intel IoT"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงู ุงูุญุฏุซ 39 ูู ุขุฎุฑ ุญุฏุซ ูุนูู ุ ุนูู ุงูุฑุบู ูู ุฃูู ุณุจู ุงูุญุฏุซ 38 ูู ุงูููุช ุงูููุงุณุจ. ุชู ุชุดุบูู ุงูุชุชุงุจุน ูุซุงููุฉ ุ ูุชู ุฅููุงู ุชุดุบููู ุ ุนูู ุงูุฑุบู ูู ุฒูุงุฏุฉ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ. </font><font style="vertical-align: inherit;">ุฑุจูุง ูุฑุฌุน ุฐูู ุฅูู ุนุฏู ุงูุชูุงู ุงูุฎุฏูุฉ ุจุนุฏ. </font><font style="vertical-align: inherit;">ุญุงูููุง ุ ุณุญุงุจุฉ Intel IoT Analytics ููุฏ ุงูุชุทููุฑ (ุญุงูุฉ BETA). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุทุจูู</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุงุฎุชุจุงุฑ ุฅุตุฏุงุฑ ุงูุนูู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web.devdotnet.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุดุฑูุน ูุชุงุญ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุตุฏุฑ</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web.config</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">appSettings</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"Login"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"***"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"Pass"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"***"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">appSettings</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">system.web</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">compilation</span> <span class="hljs-attr">debug</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">targetFramework</span>=<span class="hljs-string">"4.5"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">assemblies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">assembly</span>=<span class="hljs-string">"Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">assembly</span>=<span class="hljs-string">"System.Net.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">assemblies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">compilation</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">httpRuntime</span> <span class="hljs-attr">targetFramework</span>=<span class="hljs-string">"4.5"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">system.web</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">runtime</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">assemblyBinding</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:schemas-microsoft-com:asm.v1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">dependentAssembly</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">assemblyIdentity</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"System.Web.Helpers"</span> <span class="hljs-attr">publicKeyToken</span>=<span class="hljs-string">"31bf3856ad364e35"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">bindingRedirect</span> <span class="hljs-attr">oldVersion</span>=<span class="hljs-string">"1.0.0.0-3.0.0.0"</span> <span class="hljs-attr">newVersion</span>=<span class="hljs-string">"3.0.0.0"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">dependentAssembly</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">dependentAssembly</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">assemblyIdentity</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"System.Web.WebPages"</span> <span class="hljs-attr">publicKeyToken</span>=<span class="hljs-string">"31bf3856ad364e35"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">bindingRedirect</span> <span class="hljs-attr">oldVersion</span>=<span class="hljs-string">"1.0.0.0-3.0.0.0"</span> <span class="hljs-attr">newVersion</span>=<span class="hljs-string">"3.0.0.0"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">dependentAssembly</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">assemblyBinding</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">runtime</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.cshtml</font></font></b><div class="spoiler_text"><pre><code class="hljs cs">@using System.Net.Http<font></font>
@using Newtonsoft.Json<font></font>
@using Newtonsoft.Json.Linq<font></font>
<font></font>
@{<font></font>
    <span class="hljs-comment">//   Session</span>
    <span class="hljs-keyword">string</span> strToken;<font></font>
    strToken = (<span class="hljs-keyword">string</span>)Session[<span class="hljs-string">"Token"</span>];
    <span class="hljs-keyword">if</span> (strToken == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
        strToken = GetNewToken();<font></font>
        Session[<span class="hljs-string">"Token"</span>] = strToken;<font></font>
    }<font></font>
    <span class="hljs-comment">//Action</span>
    <span class="hljs-keyword">if</span> (Request[<span class="hljs-string">"command"</span>] != <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
        <span class="hljs-keyword">string</span> strCommand = (<span class="hljs-keyword">string</span>)Request[<span class="hljs-string">"command"</span>];<font></font>
        SetSateActuation(strToken,strCommand);<font></font>
    }<font></font>
    <span class="hljs-comment">//  Sensors</span>
    Dictionary&lt;<span class="hljs-keyword">string</span>, <span class="hljs-keyword">string</span>&gt; dicSensors = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">string</span>, <span class="hljs-keyword">string</span>&gt;();<font></font>
    GetStateSensors(strToken, dicSensors);<font></font>
    <span class="hljs-comment">//  Actuation</span>
    <span class="hljs-keyword">bool</span> boolValueLED, boolValueRelay;<font></font>
    GetStateActuations(strToken, <span class="hljs-keyword">out</span> boolValueLED, <span class="hljs-keyword">out</span> boolValueRelay);<font></font>
}<font></font>
        @functions {<font></font>
            <span class="hljs-comment">// Pass a user name to this method.</span>
            <span class="hljs-function"><span class="hljs-keyword">string</span> <span class="hljs-title">GetNewToken</span>(<span class="hljs-params"></span>)</span><font></font>
            {<font></font>
                <span class="hljs-comment">// login  pass</span>
                <span class="hljs-keyword">string</span> strLogin, strPass;<font></font>
                strLogin = System.Configuration.ConfigurationManager.AppSettings[<span class="hljs-string">"Login"</span>];<font></font>
                strPass = System.Configuration.ConfigurationManager.AppSettings[<span class="hljs-string">"Pass"</span>];
                <span class="hljs-comment">//,  .</span>
                <span class="hljs-comment">//https://github.com/enableiot/iotkit-api/wiki/Authorization</span>
                <span class="hljs-comment">// JSON</span>
                <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span><font></font>
                {<font></font>
                    username = strLogin,<font></font>
                    password = strPass<font></font>
                };<font></font>
                <span class="hljs-keyword">string</span> postData = JsonConvert.SerializeObject(obj, Formatting.Indented);
                <span class="hljs-comment">//HttpWebRequest</span>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(<span class="hljs-string">"https://dashboard.us.enableiot.com/v1/api/auth/token"</span>);<font></font>
                httpWebRequest.Method = <span class="hljs-string">"POST"</span>;<font></font>
                httpWebRequest.ContentType = <span class="hljs-string">"application/json"</span>;
                <span class="hljs-comment">//</span>
                <span class="hljs-keyword">byte</span>[] byte1 = System.Text.Encoding.UTF8.GetBytes(postData);<font></font>
                httpWebRequest.ContentLength = byte1.Length;<font></font>
                httpWebRequest.GetRequestStream().Write(byte1, <span class="hljs-number">0</span>, byte1.Length);<font></font>
                httpWebRequest.GetRequestStream().Close();<font></font>
                <span class="hljs-comment">//</span>
                StreamReader reader = <span class="hljs-keyword">new</span> StreamReader(httpWebRequest.GetResponse().GetResponseStream());<font></font>
                JObject objResponse = JObject.Parse(reader.ReadToEnd());<font></font>
                <span class="hljs-keyword">return</span> (<span class="hljs-keyword">string</span>)objResponse[<span class="hljs-string">"token"</span>];<font></font>
            }<font></font>
            <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GetStateSensors</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> strToken, Dictionary&lt;<span class="hljs-keyword">string</span>, <span class="hljs-keyword">string</span>&gt; dicSensors</span>)</span><font></font>
            {<font></font>
                <span class="hljs-comment">// </span>
                <span class="hljs-comment">//https://github.com/enableiot/iotkit-api/wiki/Data-API</span>
                <span class="hljs-comment">// JSON</span>
                <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span><font></font>
                {<font></font>
                    <span class="hljs-keyword">from</span> = <span class="hljs-number">-20</span>,<font></font>
                    targetFilter = <span class="hljs-keyword">new</span> { deviceList = <span class="hljs-keyword">new</span>[] { <span class="hljs-string">"9e-8d-22-0c-50-7b"</span> } },<font></font>
                    metrics = <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">new</span> {<font></font>
						id=<span class="hljs-string">"99fb5b73-a9e2-4ae0-8a0d-45e6a7cc0541"</span>,<font></font>
						op=<span class="hljs-string">"none"</span><font></font>
					},<font></font>
                    <span class="hljs-keyword">new</span> {<font></font>
						id=<span class="hljs-string">"b3731f8a-4f31-414d-a072-b364b1792b5b"</span>,<font></font>
						op=<span class="hljs-string">"none"</span><font></font>
					}<font></font>
				}<font></font>
                };<font></font>
                <span class="hljs-keyword">string</span> postData = JsonConvert.SerializeObject(obj, Formatting.Indented);
                <span class="hljs-comment">//HttpWebRequest</span>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(<span class="hljs-string">"https://dashboard.us.enableiot.com/v1/api/accounts/4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa/data/search"</span>);<font></font>
                httpWebRequest.Method = <span class="hljs-string">"POST"</span>;<font></font>
                httpWebRequest.ContentType = <span class="hljs-string">"application/json"</span>;
                <span class="hljs-comment">//Headers</span>
                httpWebRequest.Headers.Add(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + strToken);<font></font>
                httpWebRequest.Headers.Add(<span class="hljs-string">"accountId"</span>, <span class="hljs-string">"4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa"</span>);
                <span class="hljs-comment">//</span>
                <span class="hljs-keyword">byte</span>[] byte1 = System.Text.Encoding.UTF8.GetBytes(postData);<font></font>
                httpWebRequest.ContentLength = byte1.Length;<font></font>
                httpWebRequest.GetRequestStream().Write(byte1, <span class="hljs-number">0</span>, byte1.Length);<font></font>
                httpWebRequest.GetRequestStream().Close();<font></font>
                <span class="hljs-comment">//</span>
                StreamReader reader = <span class="hljs-keyword">new</span> StreamReader(httpWebRequest.GetResponse().GetResponseStream());<font></font>
                JObject objResponse = JObject.Parse(reader.ReadToEnd());<font></font>
                <span class="hljs-comment">//add Dic</span>
                <span class="hljs-keyword">string</span> strValueSensor = (<span class="hljs-keyword">string</span>)objResponse[<span class="hljs-string">"series"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"points"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>];<font></font>
                dicSensors.Add(<span class="hljs-string">"pressure"</span>, strValueSensor);<font></font>
                strValueSensor = (<span class="hljs-keyword">string</span>)objResponse[<span class="hljs-string">"series"</span>][<span class="hljs-number">1</span>][<span class="hljs-string">"points"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>];<font></font>
                strValueSensor = Math.Round(<span class="hljs-keyword">decimal</span>.Parse(strValueSensor, System.Globalization.CultureInfo.CreateSpecificCulture(<span class="hljs-string">"en"</span>)), <span class="hljs-number">2</span>).ToString();<font></font>
                dicSensors.Add(<span class="hljs-string">"temperature"</span>, strValueSensor);<font></font>
            }<font></font>
<font></font>
            <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GetStateActuations</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> strToken, <span class="hljs-keyword">out</span> <span class="hljs-keyword">bool</span> boolValueLED, <span class="hljs-keyword">out</span> <span class="hljs-keyword">bool</span> boolValueRelay</span>)</span><font></font>
            {<font></font>
                <span class="hljs-comment">//  Actuation</span>
                <span class="hljs-comment">//https://github.com/enableiot/iotkit-api/wiki/Control-Device-API</span>
                <span class="hljs-comment">//HttpWebRequest</span>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(<span class="hljs-string">"https://dashboard.us.enableiot.com/v1/api/accounts/4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa/control/devices/9e-8d-22-0c-50-7b?from=-60000"</span>);<font></font>
                httpWebRequest.Method = <span class="hljs-string">"GET"</span>;
                <span class="hljs-comment">//Headers</span>
                httpWebRequest.Headers.Add(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + strToken);<font></font>
                httpWebRequest.Headers.Add(<span class="hljs-string">"accountId"</span>, <span class="hljs-string">"4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa"</span>);
                <span class="hljs-comment">//</span>
                StreamReader reader = <span class="hljs-keyword">new</span> StreamReader(httpWebRequest.GetResponse().GetResponseStream());<font></font>
                JArray jArr = (JArray)JsonConvert.DeserializeObject(reader.ReadToEnd());<font></font>
                <span class="hljs-comment">//Parse data</span>
                Dictionary&lt;<span class="hljs-keyword">long</span>, <span class="hljs-keyword">string</span>&gt; dicSensorLED = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">long</span>, <span class="hljs-keyword">string</span>&gt;();<font></font>
                Dictionary&lt;<span class="hljs-keyword">long</span>, <span class="hljs-keyword">string</span>&gt; dicSensorRelay = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">long</span>, <span class="hljs-keyword">string</span>&gt;();
                <span class="hljs-keyword">long</span> longTicks;
                <span class="hljs-keyword">foreach</span> (JObject item <span class="hljs-keyword">in</span> jArr)<font></font>
                {<font></font>
                    longTicks = DateTime.Parse((<span class="hljs-keyword">string</span>)item[<span class="hljs-string">"created"</span>]).Ticks;
                    <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">string</span>)item[<span class="hljs-string">"command"</span>] == <span class="hljs-string">"LED.v1.0"</span>)<font></font>
                    {<font></font>
                        <span class="hljs-keyword">if</span> (!dicSensorLED.ContainsKey(longTicks)) dicSensorLED.Add(longTicks, (<span class="hljs-keyword">string</span>)item[<span class="hljs-string">"params"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>]);<font></font>
                    }<font></font>
                    <span class="hljs-keyword">else</span><font></font>
                    {<font></font>
                        <span class="hljs-keyword">if</span> (!dicSensorRelay.ContainsKey(longTicks)) dicSensorRelay.Add(longTicks, (<span class="hljs-keyword">string</span>)item[<span class="hljs-string">"params"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>]);<font></font>
                    }<font></font>
                }<font></font>
                <span class="hljs-comment">//find last value</span>
                <span class="hljs-keyword">string</span> strValueLED = dicSensorLED[dicSensorLED.Max(x =&gt; x.Key)];
                <span class="hljs-keyword">string</span> strValueRelay = dicSensorRelay[dicSensorRelay.Max(x =&gt; x.Key)];
                <span class="hljs-comment">//</span>
                <span class="hljs-keyword">if</span> (strValueLED == <span class="hljs-string">"0"</span>) boolValueLED = <span class="hljs-literal">false</span>; <span class="hljs-keyword">else</span> boolValueLED = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">if</span> (strValueRelay == <span class="hljs-string">"0"</span>) boolValueRelay = <span class="hljs-literal">false</span>; <span class="hljs-keyword">else</span> boolValueRelay = <span class="hljs-literal">true</span>;<font></font>
                }<font></font>
<font></font>
            <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SetSateActuation</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> strToken, <span class="hljs-keyword">string</span> strCommand</span>)</span><font></font>
            {<font></font>
                <span class="hljs-comment">//  Actuation</span>
                <span class="hljs-comment">//https://github.com/enableiot/iotkit-api/wiki/Control-Device-API</span>
                <span class="hljs-comment">// </span>
                <span class="hljs-keyword">string</span> strComponentId, strName, strValue, strComplexCommands;
                <span class="hljs-keyword">switch</span> (strCommand)<font></font>
                {<font></font>
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"led_on"</span>:<font></font>
                        {<font></font>
                            strComponentId=<span class="hljs-string">"64dbdbee-e181-403f-8b51-0872e11a289e"</span>;<font></font>
                            strName=<span class="hljs-string">"LED"</span>;<font></font>
                            strValue = <span class="hljs-string">"1"</span>;<font></font>
                            strComplexCommands = <span class="hljs-string">"led1_ON"</span>;
                            <span class="hljs-keyword">break</span>;<font></font>
                        }<font></font>
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"led_off"</span>:<font></font>
                        {<font></font>
                            strComponentId = <span class="hljs-string">"64dbdbee-e181-403f-8b51-0872e11a289e"</span>;<font></font>
                            strName = <span class="hljs-string">"LED"</span>;<font></font>
                            strValue = <span class="hljs-string">"0"</span>;<font></font>
                            strComplexCommands = <span class="hljs-string">"led1_OFF"</span>;
                            <span class="hljs-keyword">break</span>;<font></font>
                        }<font></font>
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"relay_on"</span>:<font></font>
                        {<font></font>
                            strComponentId = <span class="hljs-string">"5f72e39a-463a-4e57-bac7-9b32debfd865"</span>;<font></font>
                            strName = <span class="hljs-string">"RELAY"</span>;<font></font>
                            strValue = <span class="hljs-string">"1"</span>;<font></font>
                            strComplexCommands = <span class="hljs-string">"relay1_ON"</span>;
                            <span class="hljs-keyword">break</span>;<font></font>
                        }<font></font>
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"relay_off"</span>:<font></font>
                        {<font></font>
                            strComponentId = <span class="hljs-string">"5f72e39a-463a-4e57-bac7-9b32debfd865"</span>;<font></font>
                            strName = <span class="hljs-string">"RELAY"</span>;<font></font>
                            strValue = <span class="hljs-string">"0"</span>;<font></font>
                            strComplexCommands = <span class="hljs-string">"relay1_OFF"</span>;
                            <span class="hljs-keyword">break</span>;<font></font>
                        }<font></font>
                    <span class="hljs-keyword">default</span>:
                        <span class="hljs-comment">// You can use the default case.</span>
                        <span class="hljs-keyword">return</span>;<font></font>
                }<font></font>
                <span class="hljs-comment">// JSON</span>
                <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span><font></font>
                {<font></font>
                    commands = <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">new</span> {<font></font>
                    componentId = strComponentId,<font></font>
                    parameters= <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">new</span><font></font>
                                        {<font></font>
                                            name=strName,<font></font>
                                            <span class="hljs-keyword">value</span>=strValue<font></font>
                                        }<font></font>
                    },<font></font>
                    transport=<span class="hljs-string">"ws"</span><font></font>
                }<font></font>
                },<font></font>
                    complexCommands = <span class="hljs-keyword">new</span>[] { strComplexCommands }<font></font>
                };<font></font>
                <span class="hljs-keyword">string</span> postData = JsonConvert.SerializeObject(obj, Formatting.Indented);
                <span class="hljs-comment">//HttpWebRequest</span>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(<span class="hljs-string">"https://dashboard.us.enableiot.com/v1/api/accounts/4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa/control"</span>);<font></font>
                httpWebRequest.Method = <span class="hljs-string">"POST"</span>;<font></font>
                httpWebRequest.ContentType = <span class="hljs-string">"application/json"</span>;
                <span class="hljs-comment">//Headers</span>
                httpWebRequest.Headers.Add(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + strToken);<font></font>
                httpWebRequest.Headers.Add(<span class="hljs-string">"accountId"</span>, <span class="hljs-string">"4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa"</span>);
                <span class="hljs-comment">//</span>
                <span class="hljs-keyword">byte</span>[] byte1 = System.Text.Encoding.UTF8.GetBytes(postData);<font></font>
                httpWebRequest.ContentLength = byte1.Length;<font></font>
                httpWebRequest.GetRequestStream().Write(byte1, <span class="hljs-number">0</span>, byte1.Length);<font></font>
                httpWebRequest.GetRequestStream().Close();<font></font>
                <span class="hljs-comment">//</span><font></font>
                httpWebRequest.GetResponse();<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
<font></font>
        &lt;html&gt;<font></font>
        &lt;head&gt;<font></font>
            &lt;title&gt; RESTful   Intel IoT Analytics  ASP.NET Razor&lt;/title&gt;<font></font>
        &lt;/head&gt;<font></font>
        &lt;body&gt;<font></font>
            &lt;h1&gt; RESTful   Intel IoT Analytics  ASP.NET Razor&lt;/h1&gt;<font></font>
&lt;p&gt;: @DateTime.Now.ToString()&lt;/p&gt;<font></font>
    &lt;p&gt;   &lt;a href=<span class="hljs-string">"https://github.com/enableiot/iotkit-api/wiki/Api-Home"</span>&gt;api  intel iot analytics.&lt;/a&gt;&lt;/p&gt;<font></font>
    &lt;p&gt;  API :&lt;/p&gt;<font></font>
    &lt;ol&gt;<font></font>
        &lt;li&gt;,  &lt;/li&gt;<font></font>
        &lt;li&gt;   (sensor)&lt;/li&gt;<font></font>
        &lt;li&gt;   (Actuation)&lt;/li&gt;<font></font>
    &lt;/ol&gt;<font></font>
    &lt;h3&gt; &lt;/h3&gt;<font></font>
    &lt;p&gt;: @dicSensors[<span class="hljs-string">"temperature"</span>] *&lt;/p&gt;<font></font>
    &lt;p&gt;: @dicSensors[<span class="hljs-string">"pressure"</span>] &lt;/p&gt;<font></font>
     @if (boolValueLED==<span class="hljs-literal">false</span>)<font></font>
        {<font></font>
            &lt;p&gt;LED: OFF&lt;/p&gt;<font></font>
        }<font></font>
     <span class="hljs-keyword">else</span><font></font>
     {<font></font>
        &lt;p&gt;LED: ON&lt;/p&gt;<font></font>
     }<font></font>
<font></font>
    @if (boolValueRelay == <span class="hljs-literal">false</span>)<font></font>
    {<font></font>
        &lt;p&gt;: OFF&lt;/p&gt;<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
        &lt;p&gt;: ON&lt;/p&gt;<font></font>
    }<font></font>
    &lt;form name=<span class="hljs-string">"formaction"</span> action=<span class="hljs-string">"~/index.cshtml"</span> method=<span class="hljs-string">"get"</span>&gt;<font></font>
        &lt;h3&gt; Actuation&lt;/h3&gt;<font></font>
        &lt;p&gt; LED: <font></font>
            &lt;button name=<span class="hljs-string">"command"</span> type=<span class="hljs-string">"submit"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"led_on"</span>&gt; ON &lt;/button&gt;<font></font>
            &lt;button name=<span class="hljs-string">"command"</span> type=<span class="hljs-string">"submit"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"led_off"</span>&gt; OFF &lt;/button&gt;<font></font>
        &lt;/p&gt;<font></font>
        &lt;p&gt; : <font></font>
            &lt;button name=<span class="hljs-string">"command"</span> type=<span class="hljs-string">"submit"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"relay_on"</span>&gt; ON &lt;/button&gt;<font></font>
            &lt;button name=<span class="hljs-string">"command"</span> type=<span class="hljs-string">"submit"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"relay_off"</span>&gt; OFF &lt;/button&gt;<font></font>
        &lt;/p&gt;<font></font>
        &lt;p&gt;&lt;/p&gt;<font></font>
        &lt;p&gt;<font></font>
            &lt;button name=<span class="hljs-string">"update"</span> type=<span class="hljs-string">"submit"</span>&gt;   &lt;/button&gt;<font></font>
        &lt;/p&gt;<font></font>
    &lt;/form&gt;<font></font>
&lt;/body&gt;<font></font>
&lt;/html&gt;<font></font>
</code></pre><br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุฏูู ุงููุญุชููุงุช</font></font></b><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุชู ุฅุฏูุณูู </font><font style="vertical-align: inherit;">ุงูุจุฏุงูุฉ ุงูุฃููู</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุชู ุฅุฏูุณูู </font><font style="vertical-align: inherit;">ุงูุนูู ูุน Intel IoT Analytics Cloud: ุชุณุฌูู ุงูุจูุงูุงุช ูุฅุฑุณุงููุง</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุชู ุฅุฏูุณูู </font><font style="vertical-align: inherit;">ุงูุนูู ูุน Intel IoT Analytics Cloud: ุฅูุดุงุก ุงูููุงุนุฏ ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุชู ุฅุฏูุณูู </font><font style="vertical-align: inherit;">Intel IoT Analytics Cloud: ุฅุฑุณุงู SMS ู RESTful Client ุนูู ASP.NET</font></font></li>
</ol></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar384929/">https://habr.com/ru/post/ar384929/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar384915/index.html">ุงููุดุฑ ูุงููุชุงุจุฉ</a></li>
<li><a href="../ar384917/index.html">ูุญุงูู ููุจูุฉ ุชูุฑููุฌ ุนูู Raspberry Pi ู Arduino</a></li>
<li><a href="../ar384921/index.html">21 ุณุจุจูุง ููุณ Xiaomi ูุฌุฑุฏ ุตุงูุน ููููุงุชู ุงูุฐููุฉ</a></li>
<li><a href="../ar384923/index.html">ะะพะป ะััะผ: ะััะพะบะพัะตัะฝะพะปะพะณะธัะฝะพะต ะพะฑัะตััะฒะพ</a></li>
<li><a href="../ar384925/index.html">ุงุณุชููุธ ุจุดูู ูุฑูุญ - ูู ุจุนูู ููุจู ุฎููู ุงูุนู ุฐูู ุจููุณู</a></li>
<li><a href="../ar384933/index.html">ูุญุฏุงุช ุฑุงุฏูู ูุงุฑุฏูููู JDY-40</a></li>
<li><a href="../ar384937/index.html">ูุง ูู ุฎุทุฑ ุฅูุชุฑูุช ุงูุฃุดูุงุก ุ ููู ูุณุชุญู ุฎููู ุนูู ุงูุฅุทูุงูุ</a></li>
<li><a href="../ar384941/index.html">ุงู "ูุงูููู" ุนูู ุชุดุงุฑูู ุ ููู ููุฑ ุตูุงุนู ุจููุชู ุ ูู ูุณุฑ ูุดุฑุฉ ุนููุงูุฉ</a></li>
<li><a href="../ar384949/index.html">ุงูููุงุจุณ ุงูุฏุงุฎููุฉ ุงูุฐููุฉ: ูู ูููุงุฐุง ูุตูุน "ุฅููุชุฑูููุงุช" ูุงุจูุฉ ููุงุฑุชุฏุงุก</a></li>
<li><a href="../ar384951/index.html">"ุงูููู ุ ูุฑุญู ุ ุงูููู ..." ุฃู ูุง ูู ูุดุงูู ุงูููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>