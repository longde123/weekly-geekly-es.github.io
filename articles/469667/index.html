<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¥üèª üôÖüèº üëßüèª Derechos de Linux (chown, chmod, SUID, GUID, sticky bit, ACL, umask) ‚¨ÜÔ∏è üé¥ üõ¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos Esta es una traducci√≥n de un art√≠culo de RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200 y EX300. 

 Por mi parte: espero que el art√≠...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Derechos de Linux (chown, chmod, SUID, GUID, sticky bit, ACL, umask)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469667/">  Hola a todos  Esta es una traducci√≥n de un art√≠culo de RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200 y EX300. <br><br>  <b>Por mi parte:</b> espero que el art√≠culo sea √∫til no solo para principiantes, sino que tambi√©n ayudar√° a los administradores m√°s experimentados a organizar sus conocimientos. <br><br>  Entonces vamos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/95b/e9d/a00/95be9da00b36434d2b2445fe1379b5ae.png" alt="imagen"><br><a name="habracut"></a><br>  Para acceder a archivos en Linux, se utilizan permisos.  Estos permisos se asignan a tres objetos: un archivo, un grupo y otro objeto (es decir, todos los dem√°s).  En este art√≠culo, aprender√° c√≥mo aplicar permisos. <br><br>  El art√≠culo comienza con una revisi√≥n de los conceptos b√°sicos, luego de lo cual se discuten los permisos especiales y las listas de control de acceso (ACL).  Al final de este art√≠culo, aprender√° a configurar permisos predeterminados a trav√©s de umask, as√≠ como a administrar atributos de usuario avanzados. <br><br><h2>  Gesti√≥n de propiedad de archivos </h2><br>  Antes de analizar los permisos, debe tener en cuenta la funci√≥n del propietario del archivo y el directorio.  Poseer archivos y directorios es vital para trabajar con permisos.  En esta secci√≥n, primero aprender√° c√≥mo puede ver al propietario.  Luego aprender√° c√≥mo cambiar el propietario y el usuario del grupo para archivos y directorios. <br><br><h3>  Mostrar propietario de un archivo o directorio </h3><br>  En Linux, cada archivo y cada directorio tiene dos propietarios: un usuario y un grupo. <br><br>  Estos propietarios se establecen cuando se crea el archivo o directorio.  El usuario que crea el archivo se convierte en el propietario de este archivo, y el grupo principal, que incluye al mismo usuario, tambi√©n se convierte en el propietario de este archivo.  Para determinar si usted como usuario tiene derechos de acceso a un archivo o directorio, el shell verifica su propiedad. <br><br>  <b>Esto sucede en el siguiente orden:</b> <br><br><ol><li>  El shell verifica si posee el archivo al que desea acceder.  Si usted es este propietario, obtiene permisos y el shell deja de verificar. </li><li>  Si no es el propietario del archivo, el shell verificar√° si usted es miembro de un grupo que tiene permisos en este archivo.  Si es miembro de este grupo, obtiene acceso al archivo con los permisos establecidos para el grupo, y el shell dejar√° de comprobar. </li><li>  Si no eres el usuario ni el propietario del grupo, obtienes los derechos de otros usuarios (Otros). </li></ol><br>  Para ver las asignaciones de propietarios actuales, puede usar el <b>comando ls -l</b> .  Este comando muestra el grupo de usuarios y propietarios.  A continuaci√≥n puede ver la configuraci√≥n del propietario de los directorios en el directorio / home. <br><br><pre><code class="bash hljs">[root@server1 home]<span class="hljs-comment"><span class="hljs-comment"># ls -l total 8 drwx------. 3 bob bob 74 Feb 6 10:13 bob drwx------. 3 caroline caroline 74 Feb 6 10:13 caroline drwx------. 3 fozia fozia 74 Feb 6 10:13 fozia drwx------. 3 lara lara 74 Feb 6 10:13 lara drwx------. 5 lisa lisa 4096 Feb 6 10:12 lisa drwx------. 14 user user 4096 Feb 5 10:35 user</span></span></code> </pre> <br>  Con el <b>comando ls,</b> puede mostrar el propietario de los archivos en este directorio.  A veces puede ser √∫til obtener una lista de todos los archivos del sistema en los que el usuario o grupo se especifica como el propietario.  Puedes usar <b>find para esto</b> .  El <b>argumento find -user</b> puede usarse para este prop√≥sito.  Por ejemplo, el siguiente comando muestra todos los archivos que tienen el usuario linda especificado como propietario: <br><br><pre> <code class="bash hljs">find / -user linda</code> </pre> <br>  Tambi√©n puede usar <b>buscar</b> para buscar archivos en los que un grupo particular los posee. <br><br>  Por ejemplo, el siguiente comando busca todos los archivos que pertenecen al grupo de <i>usuarios</i> : <br><br><pre> <code class="bash hljs">find / -group users</code> </pre> <br><h3>  Cambio de titularidad </h3><br>  Para aplicar permisos, lo primero a considerar es la propiedad.  Hay un <b>comando chown</b> para esto.  La sintaxis de este comando es f√°cil de entender: <br><br><pre> <code class="bash hljs">chown  </code> </pre> <br>  Por ejemplo, el siguiente comando cambia el propietario del directorio / home / account al usuario linda: <br><br><pre> <code class="bash hljs">chown linda /home/account</code> </pre> <br>  El <b>comando chown</b> tiene varias opciones, una de las cuales es especialmente √∫til: <b>-R</b> .  Puedes adivinar lo que hace, porque esta opci√≥n tambi√©n est√° disponible para muchos otros equipos.  Esto le permite establecer el propietario de forma recursiva, lo que le permite establecer el propietario del directorio actual y todo lo que se muestra a continuaci√≥n.  El siguiente comando cambia el propietario del directorio / home y todo lo que est√° debajo a lisa: <br><br>  Ahora los propietarios se ven as√≠: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /home total 0 drwx------. 2 account account 62 Sep 25 21:41 account drwx------. 2 lisa lisa 62 Sep 25 21:42 lisa</span></span></code> </pre><br>  Ejecutar: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># chown -R lisa /home/account [root@localhost ~]#</span></span></code> </pre><br>  Ahora Lisa se ha convertido en la propietaria del directorio de la cuenta: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /home total 0 drwx------. 2 lisa account 62 Sep 25 21:41 account drwx------. 2 lisa lisa 62 Sep 25 21:42 lisa</span></span></code> </pre><br><h3>  Cambio de propietario del grupo </h3><br>  Hay dos formas de cambiar la propiedad del grupo.  Puede hacer esto usando <b>chown</b> , pero hay un comando especial llamado <b>chgrp</b> que hace el trabajo.  Si desea usar el <b>comando chown</b> , use <b>.</b>  o <b>:</b> antes del nombre del grupo. <br><br>  El siguiente comando cambia a cualquier propietario del grupo / home / account al grupo de cuentas: <br><br><pre> <code class="bash hljs">chown .account /home/account</code> </pre><br>  Puede usar <b>chown</b> para cambiar el propietario de un usuario y / o grupo de varias maneras.  Aqu√≠ hay algunos ejemplos: <br><br><ul><li>  <b>chown lisa myfile1</b> configura a lisa como propietaria de myfile1. </li><li>  <b>chown lisa.sales myfile</b> establece el usuario de lisa en el propietario del archivo myfile y tambi√©n establece el grupo de ventas en el propietario del mismo archivo. </li><li>  <b>chown lisa: sales myfile es</b> el mismo que el comando anterior. </li><li>  <b>chown .sales myfile</b> establece el grupo de ventas como el propietario del archivo myfile sin cambiar el propietario del usuario. </li><li>  <b>chown: sales myfile es</b> el mismo que el comando anterior. </li></ul><br>  Puede usar el comando <b>chgrp</b> para cambiar el propietario del grupo.  Considere el siguiente ejemplo, donde puede usar <b>chgrp para</b> establecer el grupo de ventas como el propietario del directorio de la cuenta: <br><br><pre> <code class="bash hljs">chgrp .sales /home/account</code> </pre> <br>  Al igual que con <b>chown</b> , puede usar la opci√≥n <b>-R</b> con <b>chgrp</b> y tambi√©n cambiar el propietario del grupo de forma recursiva. <br><br><h3>  Comprender al propietario predeterminado </h3><br>  Puede notar que cuando el usuario crea el archivo, se aplica la propiedad predeterminada. <br>  El usuario que crea el archivo se convierte autom√°ticamente en el propietario de este archivo, y el grupo principal de este usuario se convierte autom√°ticamente en el propietario de este archivo.  Este suele ser un grupo que se especifica en el archivo / etc / passwd como el grupo principal del usuario.  Sin embargo, si el usuario es miembro de varios grupos, puede cambiar el grupo central efectivo. <br><br>  Para mostrar el grupo primario efectivo actual, el usuario puede usar el comando <b>grupos</b> : <br><br><pre> <code class="bash hljs">[root@server1 ~]<span class="hljs-comment"><span class="hljs-comment"># groups lisa lisa : lisa account sales</span></span></code> </pre><br>  Si el usuario actual linda quiere cambiar el grupo primario efectivo, usar√° el comando <b>newgrp</b> seguido del nombre del grupo que desea establecer como el nuevo grupo primario efectivo.  Despu√©s de usar el comando <b>newgrp</b> , el grupo primario estar√° activo hasta que el usuario emita el <b>comando de salida</b> o cierre la sesi√≥n. <br><br>  A continuaci√≥n se muestra c√≥mo Lisa utiliza este comando para que el grupo de ventas se convierta en el grupo principal: <br><br><pre> <code class="bash hljs">lisa@server1 ~]$ groups lisa account sales [lisa@server1 ~]$ newgrp sales [lisa@server1 ~]$ groups sales lisa account [lisa@server1 ~]$ touch file1 [lisa@server1 ~]$ ls -l total 0 -rw-r--r--. 1 lisa sales 0 Feb 6 10:06 file1</code> </pre><br>  Despu√©s de cambiar el grupo principal actual, todos los archivos nuevos creados por el usuario recibir√°n este grupo como el grupo propietario. Para volver a la configuraci√≥n inicial del grupo primario, use <b>exit</b> . <br><br>  Para poder usar el comando <b>newgrp</b> , el usuario debe ser miembro del grupo que quiere usar como primario.  Adem√°s, la contrase√±a del grupo se puede usar para el grupo usando el comando <b>gpasswd</b> .  Si el usuario usa el comando <b>newgrp</b> pero no es miembro del grupo objetivo, el shell solicita la contrase√±a del grupo.  Despu√©s de ingresar la contrase√±a de grupo correcta, se establecer√° un nuevo grupo primario efectivo. <br><br><h2>  Gesti√≥n de derechos fundamentales </h2><br>  El sistema de permisos de Linux fue inventado en la d√©cada de 1970.  Como las necesidades inform√°ticas eran limitadas en esos a√±os, el sistema b√°sico de permisos era bastante limitado.  Este sistema de permisos utiliza tres permisos que se pueden aplicar a archivos y directorios.  En esta secci√≥n, aprender√° a usar y cambiar estos permisos. <br><br><h3>  Comprender los derechos de lectura, escritura y ejecuci√≥n </h3><br>  Tres permisos b√°sicos le permiten leer, escribir y ejecutar archivos.  El efecto de estos permisos difiere cuando se aplica a archivos o directorios.  Para un archivo, el permiso de lectura le da derecho a abrir el archivo para leerlo.  Por lo tanto, puede leer su contenido, pero eso significa que su computadora puede abrir el archivo para hacer algo con √©l. <br><br>  Un archivo de programa que necesita acceso a una biblioteca debe, por ejemplo, tener acceso de lectura a esa biblioteca.  Se deduce que el permiso de lectura es el permiso m√°s b√°sico que necesita para trabajar con archivos. <br><br>  Para un directorio, la lectura le permite mostrar el contenido de ese directorio.  Debe saber que este permiso no le permite leer archivos en un directorio.  Los permisos de Linux no conocen la herencia, y la √∫nica forma de leer un archivo es usar permisos de lectura para ese archivo. <br><br>  Como probablemente pueda adivinar, el permiso de escritura, si se aplica al archivo, le permite escribir en el archivo.  En otras palabras, le permite modificar el contenido de los archivos existentes.  Sin embargo, no permite crear o eliminar nuevos archivos o cambiar los permisos de los archivos.  Para hacer esto, debe otorgar permiso de escritura al directorio donde desea crear el archivo.  En los directorios, este permiso tambi√©n le permite crear y eliminar nuevos subdirectorios. <br><br>  El permiso de ejecuci√≥n es lo que necesita para ejecutar el archivo.  Nunca se instalar√° de manera predeterminada, lo que hace que Linux sea casi completamente inmune a los virus.  Solo alguien con permisos de escritura en el directorio puede solicitar permiso para ejecutar. <br><br>  <b>A continuaci√≥n se resume el uso de permisos b√°sicos:</b> <br><br><img src="https://habrastorage.org/webt/rr/-a/ty/rr-atyy5ru2por4kcyrmd-x87n8.jpeg"><br><br><h2>  Usando chmod </h2><br>  Para administrar los derechos, use el <b>comando chmod</b> .  Al usar <b>chmod,</b> puede establecer permisos para el usuario (usuario), grupo (grupo) y otros (otros).  Puede usar este comando en dos modos: modo relativo y modo absoluto.  En modo absoluto, se utilizan tres d√≠gitos para establecer los permisos b√°sicos. <br><br><img src="https://habrastorage.org/webt/3r/6l/va/3r6lvaw_mpvo7sxfsggtxik3ofs.jpeg"><br><br>  Al establecer permisos, calcule el valor que necesita.  Si desea establecer lectura, escritura y ejecuci√≥n para el usuario, lectura y ejecuci√≥n para el grupo, y lectura y ejecuci√≥n para otros en el archivo / somefile, utilice el siguiente <b>comando chmod</b> : <br><br><pre> <code class="bash hljs">chmod 755 /somefile</code> </pre> <br>  Cuando usa <b>chmod</b> de esta manera, todos los permisos actuales se reemplazan por los permisos que establece. <br><br>  Si desea cambiar los permisos en relaci√≥n con los permisos actuales, puede usar <b>chmod</b> en modo relativo.  Cuando usa <b>chmod</b> en modo relativo, est√° trabajando con tres indicadores para indicar lo que desea hacer: <br><br><ol><li>  Primero, indica para qui√©n desea cambiar los permisos.  Para hacer esto, puede elegir entre usuario ( <b>u</b> ), grupo ( <b>g</b> ) y otros ( <b>o</b> ). </li><li>  Luego, utiliza el operador para agregar o eliminar permisos del modo actual, o configurarlos por completo. </li><li>  Al final, usa <b>r</b> , <b>wyx</b> para indicar qu√© permisos desea establecer. </li></ol><br>  Al cambiar los permisos en modo relativo, puede omitir la parte "a" para agregar o eliminar permisos para todos los objetos.  Por ejemplo, este comando agrega permiso de ejecuci√≥n para todos los usuarios: <br><br><pre> <code class="bash hljs">chmod +x somefile</code> </pre> <br>  Cuando trabaje en modo relativo, tambi√©n puede usar comandos m√°s complejos.  Por ejemplo, este comando agrega permiso de escritura a un grupo y elimina las lecturas para otros: <br><br><pre> <code class="bash hljs">chmod g+w,or somefile</code> </pre> <br>  Cuando utiliza <b>chmod -R o + rx / data,</b> configura el permiso de ejecuci√≥n para todos los directorios, as√≠ como para los archivos en el directorio / data.  Para establecer el permiso para ejecutar solo para directorios, no para archivos, use <b>chmod -R o + rX / data</b> . <br><br>  La may√∫scula X garantiza que los archivos no obtengan permiso para ejecutarse si el archivo a√∫n no ha establecido el permiso de ejecuci√≥n para algunos objetos.  Esto hace que X sea una forma m√°s inteligente de trabajar con permisos de ejecuci√≥n;  esto evitar√° instalar este permiso en archivos donde no es necesario. <br><br><h2>  Derechos extendidos </h2><br>  Adem√°s de los permisos b√°sicos sobre los que acaba de leer, Linux tambi√©n tiene un conjunto de permisos avanzados.  Estos no son los permisos predeterminados que establece, pero a veces proporcionan una adici√≥n √∫til.  En esta secci√≥n, aprender√° qu√© son y c√≥mo configurarlos. <br><br><h3>  Comprender los permisos extendidos de SUID, GUID y bits fijos </h3><br>  Hay tres permisos avanzados.  El primero de ellos es el permiso para establecer un identificador de usuario (SUID).  En algunos casos especiales, puede aplicar este permiso a archivos ejecutables.  Por defecto, el usuario que ejecuta el ejecutable ejecuta el archivo con sus propios permisos. <br><br>  Para los usuarios comunes, esto generalmente significa que el uso del programa es limitado.  Sin embargo, en algunos casos, el usuario requiere permisos especiales solo para realizar una tarea espec√≠fica. <br><br>  Considere, por ejemplo, una situaci√≥n en la que el usuario necesita cambiar la contrase√±a.  Para hacer esto, el usuario debe escribir su nueva contrase√±a en el archivo / etc / shadow.  Sin embargo, este archivo no puede ser escrito por usuarios no root: <br><br><pre> <code class="bash hljs">root@hnl ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /etc/shadow ----------. 1 root root 1184 Apr 30 16:54 /etc/shadow</span></span></code> </pre><br>  Resoluci√≥n SUID ofrece una soluci√≥n a este problema.  En la utilidad / usr / bin / passwd, este permiso se usa de manera predeterminada.  Esto significa que cuando se cambia la contrase√±a, el usuario obtiene temporalmente privilegios de root, lo que le permite escribir en el archivo / etc / shadow.  Puede ver la resoluci√≥n SUID con <b>ls -l</b> como <b>s</b> en la posici√≥n donde generalmente espera ver <b>x</b> para los permisos de usuario: <br><br><pre> <code class="bash hljs">[root@hnl ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /usr/bin/passwd -rwsr-xr-x. 1 root root 32680 Jan 28 2010 /usr/bin/passwd</span></span></code> </pre><br>  Los permisos SUID pueden parecer √∫tiles (y en algunos casos lo son), pero al mismo tiempo son potencialmente peligrosos.  Si se usa incorrectamente, puede otorgar accidentalmente permisos de acceso a la ra√≠z.  Por lo tanto, recomiendo usarlo solo con extrema precauci√≥n. <br><br>  La mayor√≠a de los administradores nunca tendr√°n que usarlo;  solo lo ver√° en algunos archivos donde el sistema operativo deber√≠a configurarlo de manera predeterminada. <br><br>  El segundo permiso especial es el identificador de grupo (SGID).  Esta resoluci√≥n tiene dos efectos.  Cuando se aplica a un archivo ejecutable, otorga al usuario que est√° ejecutando el archivo los permisos del propietario del grupo de este archivo.  Por lo tanto, el SGID puede hacer m√°s o menos lo mismo que el SUID.  Sin embargo, SGID pr√°cticamente no se usa para este prop√≥sito. <br><br>  Al igual que con el permiso SUID, SGID se aplica a algunos archivos del sistema como la configuraci√≥n predeterminada. <br><br>  Cuando se aplica a un directorio, el SGID puede ser √∫til porque puede usarlo para establecer el propietario del grupo predeterminado para los archivos y subdirectorios creados en este directorio.  De manera predeterminada, cuando un usuario crea un archivo, su grupo primario efectivo se establece como el propietario del grupo para este archivo. <br><br>  Esto no siempre es muy √∫til, especialmente porque los usuarios de Red Hat / CentOS tienen un grupo con el mismo nombre que el usuario, y del cual el usuario es el √∫nico miembro.  Por lo tanto, de forma predeterminada, los archivos que crea el usuario se compartir√°n. <br><br>  Imagine una situaci√≥n en la que los usuarios de linda y lori trabajan en contabilidad y son miembros del grupo de <i>cuentas</i> .  Por defecto, estos usuarios son miembros del grupo privado del cual son el √∫nico miembro.  Sin embargo, ambos usuarios son miembros del grupo de cuentas, pero tambi√©n como un par√°metro del grupo secundario. <br><br>  La situaci√≥n predeterminada es que cuando cualquiera de estos usuarios crea un archivo, el grupo principal se convierte en el propietario.  Por lo tanto, por defecto, linda no puede acceder a los archivos creados por lori, y viceversa.  Sin embargo, si crea el directorio compartido de un grupo (digamos / grupos / cuenta) y se asegura de que el permiso SGID se aplica a este directorio y que la cuenta del grupo se establece como el propietario del grupo para este directorio, todos los archivos creados en este directorio y en todos sus subdirectorios , tambi√©n obtenga grupos de cuentas como el propietario de grupo predeterminado. <br><br>  Por esta raz√≥n, el permiso SGID es un permiso muy √∫til para instalar en directorios de grupos compartidos. <br><br>  El permiso SGID se muestra en la salida <b>ls -ld</b> como <b>s</b> en la posici√≥n donde generalmente encuentra permiso para ejecutar el grupo: <br><br><pre> <code class="bash hljs">[root@hnl data]<span class="hljs-comment"><span class="hljs-comment"># ls -ld account drwxr-sr-x. 2 root account 4096 Apr 30 21:28 account</span></span></code> </pre><br>  El tercero de los permisos especiales es un poco dif√≠cil.  Este permiso es √∫til para proteger los archivos de la eliminaci√≥n accidental en un entorno donde varios usuarios tienen permisos de escritura en el mismo directorio.  Si se utiliza un bit fijo, un usuario puede eliminar un archivo solo si es el propietario del archivo o directorio en el que se encuentra el archivo.  Por este motivo, se utiliza como el permiso predeterminado para el directorio / tmp y tambi√©n puede ser √∫til para los directorios de grupos compartidos. <br><br>  Sin un bit fijo, si un usuario puede crear archivos en un directorio, tambi√©n puede eliminar archivos de este directorio.  En un entorno de grupo p√∫blico, esto puede ser molesto.  Imagine a los usuarios linda y lori, quienes tienen permisos de escritura en el directorio / data / account y reciben estos permisos a trav√©s de la membres√≠a en el grupo de cuentas.  Por lo tanto, linda puede eliminar archivos creados por lori y viceversa. <br><br>  Cuando utiliza un bit fijo, el usuario puede eliminar archivos solo si se cumple una de las siguientes condiciones: <br><br><ul><li>  El usuario es el propietario del archivo; </li><li>  El usuario es el propietario del directorio en el que se encuentra el archivo. </li></ul><br>  Al usar <b>ls -ld</b> , puede ver un bit <b>fijo</b> como <b>t</b> en la posici√≥n en la que normalmente ve permiso de ejecuci√≥n para otros: <br><br><pre> <code class="bash hljs">[root@hnl data]<span class="hljs-comment"><span class="hljs-comment"># ls -ld account/ drwxr-sr-t. 2 root account 4096 Apr 30 21:28 account/</span></span></code> </pre><br><h3>  Derechos mejorados </h3><br>  Para aplicar SUID, SGID y sticky bit, tambi√©n puede usar <b>chmod</b> .  SUID tiene un valor num√©rico de 4, SGID tiene un valor num√©rico de 2 y el bit fijo tiene un valor num√©rico de 1. <br><br>  Si desea aplicar estos permisos, debe agregar un argumento de cuatro d√≠gitos a <b>chmod</b> , cuyo primer d√≠gito se refiere a permisos especiales.  La siguiente l√≠nea, por ejemplo, agregar√° el permiso SGID al directorio y establecer√° rwx para el usuario y rx para el grupo y otros: <br><br><pre> <code class="bash hljs">chmod 2755 /somedir</code> </pre> <br>  Esto es poco pr√°ctico si necesita mirar los permisos actuales que se establecen antes de trabajar con <b>chmod</b> en modo absoluto.  (Corre el riesgo de sobrescribir permisos si no lo hace). Por lo tanto, le recomiendo trabajar en modo relativo si necesita aplicar alguno de los permisos especiales: <br><br><ol><li>  Para SUID, use <b>chmod u + s</b> . </li><li>  Para SGID, use <b>chmod g + s</b> . </li><li>  Para bits fijos, use <b>chmod + t</b> y luego el nombre del archivo o directorio para el que desea establecer permisos. </li></ol><br>  La tabla resume todo lo que es importante saber sobre la administraci√≥n de permisos especiales. <br><br><img src="https://habrastorage.org/webt/ls/bk/1d/lsbk1dyrexjjgwx6g1__fws8ols.jpeg"><br><br><h3>  Ejemplo de trabajo con derechos especiales. </h3><br>  En este ejemplo, utiliza permisos especiales para facilitar que los miembros del equipo compartan archivos en un directorio de grupo compartido.  Usted asigna el bit ID del identificador de grupo establecido, as√≠ como el bit fijo, y ve que despu√©s de que se instalan, se agregan funciones que facilitan el trabajo conjunto de los miembros del grupo. <br><br><ol><li>  Abra el terminal donde es un usuario lindo.  Puede crear un usuario usando <b>useradd linda</b> , agregue la contrase√±a <b>passwd linda</b> . </li><li>  Cree un directorio / datos y un subdirectorio / datos / ventas en la ra√≠z con el comando <b>mkdir -p / data / sales</b> .  Ejecute <b>cd / data / sales</b> para ir al directorio de ventas.  Ejecute <b>touch linda1</b> y <b>toque linda2</b> para crear dos archivos vac√≠os propiedad de linda. </li><li>  Ejecute <b>su - lisa</b> para cambiar el usuario actual a lisa, que tambi√©n es miembro del grupo de ventas. </li><li>  Ejecute <b>cd / data / sales</b> y desde este directorio, ejecute <b>ls -l</b> .  Ver√° dos archivos creados por linda y que pertenecen al grupo linda.  Ejecute <b>rm -f linda *</b> .  Esto eliminar√° ambos archivos. </li><li>  Ejecute <b>touch lisa1</b> y <b>touch lisa2</b> para crear dos archivos que pertenecen al usuario lisa. </li><li>  Ejecute <b>su -</b> para elevar sus privilegios al nivel ra√≠z. </li><li>  Ejecute <b>chmod g + s, o + t / data / sales</b> para establecer el bit de identificador de grupo (GUID), as√≠ como el bit fijo en el directorio de grupo compartido. </li><li>  Ejecute <b>su - linda</b> .  Luego <b>toque linda3</b> y <b>toque linda4</b> .  Ahora deber√≠a ver que los dos archivos que cre√≥ pertenecen al grupo de ventas, que es el propietario del grupo de directorio / data / sales. </li><li>  Ejecute <b>rm -rf lisa *</b> .  Sticky bit evita que estos archivos se eliminen en nombre de linda, ya que no es el propietario de estos archivos.  Tenga en cuenta que si linda es la propietaria del directorio / data / sales, ¬°puede eliminar estos archivos de todos modos! </li></ol><br><h2>  Gesti√≥n de ACL (setfacl, getfacl) en Linux </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incluso si los derechos extendidos mencionados anteriormente agregan funcionalidades √∫tiles a c√≥mo Linux funciona con permisos, esto no le permite otorgar permisos a m√°s de un usuario o un grupo en un solo archivo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las listas de control de acceso ofrecen esta caracter√≠stica. </font><font style="vertical-align: inherit;">Adem√°s, permiten a los administradores establecer permisos predeterminados de una manera compleja, en la que los permisos establecidos pueden variar en diferentes directorios.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Comprender las ACL </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aunque el subsistema ACL agrega una gran funcionalidad a su servidor, tiene un inconveniente: no todas las utilidades lo admiten. Por lo tanto, puede perder la configuraci√≥n de ACL al copiar o mover archivos, y es posible que el software de respaldo no realice una copia de seguridad de la configuraci√≥n de ACL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La utilidad tar no admite ACL. Para asegurarse de que la configuraci√≥n de ACL no se pierda al realizar una copia de seguridad, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asterisco en</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lugar de alquitr√°n. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">star</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funciona con los mismos par√°metros que tar; solo agrega soporte para la configuraci√≥n de ACL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi√©n puede hacer una copia de seguridad de la ACL con </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que se puede restaurar con el comando setfacl. Para crear una copia de seguridad, use</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl -R / directorio&gt; archivo.acls</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Para restaurar la configuraci√≥n desde el archivo de respaldo, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl --restore = file.acl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La falta de soporte con algunas herramientas no deber√≠a ser un problema. </font><font style="vertical-align: inherit;">Las ACL a menudo se aplican a directorios como una medida estructural, en lugar de a archivos individuales. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por lo tanto, no habr√° muchos, sino solo unos pocos, aplicados en lugares inteligentes del sistema de archivos. </font><font style="vertical-align: inherit;">Por lo tanto, restaurar las ACL originales con las que trabaj√≥ es relativamente f√°cil, incluso si su software de respaldo no las admite.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Preparaci√≥n del sistema de archivos para una ACL </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de comenzar a trabajar con ACL, es posible que deba preparar un sistema de archivos para admitir ACL. </font><font style="vertical-align: inherit;">Debido a que los metadatos del sistema de archivos deben expandirse, no siempre hay soporte predeterminado para las ACL en el sistema de archivos. </font><font style="vertical-align: inherit;">Si recibe el mensaje "operaci√≥n no admitida" cuando configura ACL para el sistema de archivos, es posible que su sistema de archivos no sea compatible con ACL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para solucionar esto, debe agregar la opci√≥n de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">montaje acl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el archivo / etc / fstab para que el sistema de archivos se </font><b><font style="vertical-align: inherit;">monte</font></b><font style="vertical-align: inherit;"> con soporte ACL de forma predeterminada.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cambie y vea la configuraci√≥n de ACL con setfacl y getfacl </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para configurar la ACL, necesita el comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Para ver la configuraci√≥n actual de ACL, necesita </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . El </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando ls -l</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no muestra ninguna ACL existente; simplemente muestra + despu√©s de la lista de permisos, lo que indica que las ACL tambi√©n se aplican al archivo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de configurar ACL, siempre es √∫til mostrar la configuraci√≥n actual de ACL usando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A continuaci√≥n, con un ejemplo, puede ver los permisos actuales, como se muestra con </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ls -ld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , as√≠ como con </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si observa con suficiente cuidado, ver√° que la informaci√≥n que se muestra es exactamente la misma.</font></font><br><br><pre> <code class="bash hljs">[root@server1 /]<span class="hljs-comment"><span class="hljs-comment"># ls -ld /dir drwxr-xr-x. 2 root root 6 Feb 6 11:28 /dir [root@server1 /]# getfacl /dir getfacl: Removing leading '/' from absolute path names # file: dir # owner: root # group: root user::rwx group::rx other::rx</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado del comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puede ver a continuaci√≥n que los permisos se muestran para tres objetos diferentes: usuario, grupo y otros. Ahora agreguemos una ACL para otorgar permisos de lectura y ejecuci√≥n al grupo de ventas. El comando para esto es </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -mg: sales: rx / dir</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En este comando, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indica que se debe cambiar la configuraci√≥n actual de ACL. Despu√©s de eso, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g: sales: rx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le dice al equipo que configure la ACL para leer y ejecutar ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) para las </font><font style="vertical-align: inherit;">ventas del </font><font style="vertical-align: inherit;">grupo ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). A continuaci√≥n puede ver c√≥mo se ve el comando, as√≠ como la salida del comando getfacl despu√©s de cambiar la configuraci√≥n actual de ACL.</font></font><br><br><pre> <code class="bash hljs">[root@server1 /]<span class="hljs-comment"><span class="hljs-comment"># setfacl -mg:sales:rx /dir [root@server1 /]# getfacl /dir getfacl: Removing leading '/' from absolute path names # file: dir # owner: root # group: root user::rwx group::rx group:sales:rx mask::rx other::rx</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora que comprende c√≥mo configurar una ACL grupal, es f√°cil comprender la ACL para los usuarios y otros usuarios. </font><font style="vertical-align: inherit;">Por ejemplo, el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando setfacl -mu: linda: rwx / data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> otorga permisos al usuario linda en el directorio / data, sin convertirlo en el propietario y sin cambiar el destino del propietario actual. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tiene muchas caracter√≠sticas y opciones. </font><font style="vertical-align: inherit;">Una opci√≥n es especialmente importante, la opci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si se usa, esta opci√≥n configura la ACL para todos los archivos y subdirectorios que existen actualmente en el directorio donde instala la ACL. </font><font style="vertical-align: inherit;">Se recomienda que siempre use esta opci√≥n cuando modifique ACL para directorios existentes.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Trabajar con ACL predeterminadas </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una de las ventajas de usar ACL es que puede otorgar permisos a m√∫ltiples usuarios o grupos en un directorio. Otra ventaja es que puede habilitar la herencia trabajando con la ACL predeterminada. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al establecer la ACL predeterminada, usted define los permisos que se establecer√°n para todos los elementos nuevos creados en el directorio. Tenga en cuenta que la ACL predeterminada no cambia los permisos para los archivos y subdirectorios existentes. Para cambiarlos, debe agregar una ACL normal. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto es importante saberlo.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Si desea utilizar la ACL para configurar el acceso de m√∫ltiples usuarios o grupos al mismo directorio, debe configurar la ACL dos veces. Primero use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -R -m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cambiar la ACL para los archivos actuales. Luego usa</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -md:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cuidar todos los elementos nuevos que tambi√©n se crear√°n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para establecer la ACL predeterminada, solo necesita agregar la opci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> despu√©s de la opci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (¬°el orden importa!). Por lo tanto, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -md: g: sales: rx / data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> si desea que el grupo de ventas tenga acceso de lectura y ejecuci√≥n a todo lo que alguna vez se crear√° en el directorio / data. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando se usan ACL predeterminadas, tambi√©n puede ser √∫til establecer ACL para otros. Esto generalmente no tiene mucho sentido, porque tambi√©n puede cambiar los permisos para otros que usan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sin embargo, lo que no puedes hacer con </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, esto indica los derechos que se deben otorgar a otros usuarios para cada archivo nuevo que se crear√°. </font><font style="vertical-align: inherit;">Si desea que otros no obtengan ning√∫n permiso para nada creado en / data, por ejemplo, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -md: o :: - / data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las ACL y los permisos regulares no siempre est√°n bien integrados. </font><font style="vertical-align: inherit;">Pueden surgir problemas si aplica la ACL predeterminada a un directorio, despu√©s de lo cual se han agregado elementos a este directorio, y luego intenta cambiar los permisos normales. </font><font style="vertical-align: inherit;">Los cambios que se aplican a los permisos regulares no se reflejar√°n bien en la descripci√≥n general de ACL. </font><font style="vertical-align: inherit;">Para evitar problemas, primero configure los permisos normales, luego configure las ACL predeterminadas (y luego intente no cambiarlas nuevamente).</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ejemplo de gesti√≥n de derechos avanzada utilizando ACL </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En este ejemplo, continuar√° trabajando con los directorios / data / account y / data / sales que cre√≥ anteriormente. </font><font style="vertical-align: inherit;">En los ejemplos anteriores, garantiz√≥ que el grupo de ventas tiene permisos para / data / sales y que el grupo de cuentas tiene permisos para / data / account. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primero, aseg√∫rese de que el grupo de cuentas obtenga permisos de lectura en el directorio / data / account y que el grupo de ventas obtenga permisos de lectura en el directorio / data / account. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luego establezca las ACL predeterminadas para asegurarse de que todos los archivos nuevos tengan permisos establecidos correctamente para todos los elementos nuevos.</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Abre una terminal. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejecute </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -mg: cuenta: rx / data / sales</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -mg: sales: rx / data / account</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li>  <b>getfacl</b> ,  ,      ,   . </li><li>  <b>setfacl -md:g:account:rwx,g:sales:rx /data/sales</b> ,   ACL     sales. </li><li>  ACL     /data/account,  <b>setfacl -md:g:sales:rwx,g:account:rx /data/account</b> . </li><li> ,   ACL ,     /data/sales.  <b>touch /data/sales/newfile</b>   <b>getfacl /data/sales/newfile</b>    . </li></ol><br><h2>       umask </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arriba, aprendi√≥ a trabajar con ACL de forma predeterminada. Si no est√° utilizando una ACL, hay un par√°metro de shell que define los derechos predeterminados que recibir√°: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (m√°scara hacia atr√°s). En esta secci√≥n, aprender√° a cambiar los permisos predeterminados con </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probablemente haya notado que cuando crea un nuevo archivo, se establecen algunos permisos predeterminados. Estos permisos est√°n determinados por la configuraci√≥n de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Esta opci√≥n de shell se aplica a todos los usuarios al iniciar sesi√≥n. El par√°metro </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usa un valor num√©rico que se resta de los permisos m√°ximos que se pueden establecer autom√°ticamente para el archivo; la configuraci√≥n m√°xima para archivos es 666 y para directorios: 777.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, se aplican algunas excepciones a esta regla. Puede encontrar una descripci√≥n completa de la configuraci√≥n de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la tabla a continuaci√≥n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De los d√≠gitos utilizados en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , como en el caso de los argumentos num√©ricos para el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , el primer d√≠gito se refiere a los permisos del usuario, el segundo d√≠gito se refiere a los permisos del grupo y el √∫ltimo se refiere a los permisos predeterminados establecidos para otros. El </font><font style="vertical-align: inherit;">valor predeterminado de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><font style="vertical-align: inherit;">022 proporciona 644 para todos los archivos nuevos y 755 para todos los directorios nuevos creados en su servidor. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una descripci√≥n completa de todos los valores num√©ricos de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y sus resultados en la tabla a continuaci√≥n.</font></font><br><br><img src="https://habrastorage.org/webt/yi/l8/x0/yil8x0tn7hy6ecxndifimssztnk.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una manera f√°cil de ver c√≥mo funciona el par√°metro umask es la siguiente: comience con los permisos predeterminados para el archivo establecido en 666 y reste umask para obtener permisos v√°lidos. Haga lo mismo para el directorio y sus permisos predeterminados de 777. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hay dos formas de cambiar la configuraci√≥n de umask: para todos los usuarios y para usuarios individuales. Si desea instalar umask para todos los usuarios, debe asegurarse de que la opci√≥n umask se tenga en cuenta al ejecutar archivos de entorno de shell, como se especifica en / etc / profile. El enfoque correcto es crear un script de shell llamado umask.sh en el directorio /etc/profile.d y especificar el umask que desea usar en este script de shell. Si se cambia umask en este archivo, se aplica a todos los usuarios despu√©s de iniciar sesi√≥n en el servidor.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una alternativa a la configuraci√≥n de umask a trav√©s de / etc / profile y archivos relacionados, donde se aplica a todos los usuarios del sistema, es cambiar la configuraci√≥n de umask en un archivo llamado .profile, que se crea en el directorio de inicio de cada usuario. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La configuraci√≥n aplicada en este archivo se aplica solo a un usuario individual; </font><font style="vertical-align: inherit;">por lo tanto, este es un buen m√©todo si necesita m√°s detalles. </font><font style="vertical-align: inherit;">Personalmente, me gusta que esta caracter√≠stica cambie el valor predeterminado de umask para el usuario ra√≠z a 027, mientras que los usuarios normales trabajan con el umask predeterminado 022.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Trabajando con atributos de usuario avanzados </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta es la secci√≥n final sobre los derechos de Linux. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando se trabaja con permisos, siempre hay una relaci√≥n entre un usuario u objeto de grupo y los permisos que estos objetos de usuario o grupo tienen para el archivo o directorio. Un m√©todo alternativo para proteger archivos en un servidor Linux es trabajar con atributos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los atributos hacen su trabajo independientemente del usuario que accede al archivo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al igual que con las ACL, los atributos de archivo pueden necesitar incluir la opci√≥n de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">montaje</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta es la opci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user_xattr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si recibe un mensaje de "operaci√≥n no admitida" cuando trabaja con atributos de usuario avanzados, aseg√∫rese de establecer el par√°metro de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">montaje</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el archivo / etc / fstab.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Muchos atributos est√°n documentados. Algunos atributos est√°n disponibles pero a√∫n no est√°n implementados. No los uses; no te traer√°n nada. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los siguientes son los atributos m√°s √∫tiles que puede aplicar: </font></font></b> <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo garantiza que el tiempo de acceso al archivo no cambie. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por lo general, cada vez que se abre un archivo, el tiempo de acceso al archivo debe escribirse en los metadatos del archivo. Esto afecta negativamente el rendimiento; por lo tanto, para los archivos a los que se accede regularmente, el atributo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se puede usar para deshabilitar esta funci√≥n. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo le permite agregar, pero no eliminar, un archivo. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si utiliza un sistema de archivos que admite compresi√≥n de nivel de volumen, este atributo de archivo asegura que el archivo se comprimir√° la primera vez que se habilite el mecanismo de compresi√≥n. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo garantiza que los cambios en los archivos se escriban en el disco de inmediato, y no se almacenan en cach√© en primer lugar. Este es un atributo √∫til en los archivos importantes de la base de datos, asegur√°ndose de que no se pierdan entre la cach√© del archivo y el disco duro. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo asegura que el archivo no se guardar√° en las copias de seguridad donde se utiliza la utilidad de volcado. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este atributo habilita la indexaci√≥n para el directorio en el que est√° incluido. Esto proporciona un acceso m√°s r√°pido a los archivos para sistemas de archivos primitivos como Ext3, que no utilizan la base de datos del √°rbol B para un acceso r√°pido a los archivos. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo hace que el archivo no cambie. Por lo tanto, no puede realizar cambios en el archivo, lo cual es √∫til para los archivos que necesitan protecci√≥n adicional. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo asegura que en el sistema de archivos ext3, el archivo se escribe primero en el registro y luego en los bloques de datos del disco duro. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sobrescriba los bloques en los que se guard√≥ el archivo durante 0 s despu√©s de eliminar el archivo. Esto garantiza que la recuperaci√≥n de archivos no sea posible despu√©s de que se haya eliminado. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tu</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este atributo almacena informaci√≥n de eliminaci√≥n. Esto le permite desarrollar una utilidad que funciona con esta informaci√≥n para guardar archivos eliminados. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si desea aplicar atributos, puede usar el comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chattr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Por ejemplo, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chatf + s somefile</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para aplicar atributos a somefile. ¬øNecesita eliminar un atributo? Luego use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chattr -s somefile</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y se eliminar√°. Para obtener una descripci√≥n general de todos los atributos que se utilizan actualmente, use el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando lsattr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2>  Resumen </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En este art√≠culo, aprendiste a trabajar con permisos. Ley√≥ acerca de tres permisos b√°sicos, permisos avanzados y c√≥mo aplicar ACL al sistema de archivos. Tambi√©n aprendi√≥ a usar el par√°metro umask para aplicar permisos predeterminados. Al final de este art√≠culo, aprendi√≥ a usar atributos avanzados por el usuario para aplicar una capa adicional de seguridad del sistema de archivos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si le gust√≥ esta traducci√≥n, escr√≠bala en los comentarios. Habr√° m√°s motivaci√≥n para hacer traducciones √∫tiles.</font></font><br><br><blockquote>        .          . <br><br>  ¬´ -          .¬ª   ¬´ -          .¬ª,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">berez</a> . <br></blockquote><br><blockquote> : <br>      ,  ,     ,     . <br><br> : <br>      ,  ,     ,       .      ,       ,    ,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">CryptoPirate</a> <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/469667/">https://habr.com/ru/post/469667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../469651/index.html">WIBAttack. ¬øEs realmente terrible la nueva vulnerabilidad de la tarjeta SIM?</a></li>
<li><a href="../469655/index.html">¬øPor qu√© necesita un servicio de soporte que no es compatible?</a></li>
<li><a href="../469657/index.html">An√°lisis: qu√© activos de cambio generan el mayor retorno para los inversores rusos</a></li>
<li><a href="../469659/index.html">RC Cars: Introducci√≥n</a></li>
<li><a href="../469663/index.html">La historia de DashaMail: desde el lanzamiento de un clon de un inicio de correo electr√≥nico estadounidense hasta disputas con inversores y un nuevo comienzo</a></li>
<li><a href="../469669/index.html">Edward Snowden habla sobre por qu√© se convirti√≥ en informante</a></li>
<li><a href="../469671/index.html">¬øPor qu√© deber√≠as usar el lenguaje Ada para programar tu sistema?</a></li>
<li><a href="../469677/index.html">Tabaquismo, estilo de vida saludable, motivaci√≥n y velocidad de desarrollo de software.</a></li>
<li><a href="../469681/index.html">Lanzamiento final de TensorFlow 2.0 lanzado</a></li>
<li><a href="../469683/index.html">Seguridad nuclear y videovigilancia industrial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>