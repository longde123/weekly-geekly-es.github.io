<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äç‚úàÔ∏è üíê üë©üèæ‚Äçüîß ¬øArrastrar y soltar componentes para usuarios ciegos? Estas bromeando üå¨Ô∏è üé¶ üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øQu√© une a Trello, Gmail, Aviasales y Google Keep? Cada uno de ellos tiene componentes de arrastrar y soltar que se pueden arrastrar con el mouse. El ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øArrastrar y soltar componentes para usuarios ciegos? Estas bromeando</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/468541/">  ¬øQu√© une a Trello, Gmail, Aviasales y Google Keep?  Cada uno de ellos tiene componentes de arrastrar y soltar que se pueden arrastrar con el mouse.  El uso de estos componentes hace que los sitios web sean realmente convenientes, porque en la vida real a menudo usamos este patr√≥n.  Es natural para nosotros mover cosas, as√≠ que en la web queremos mover elementos alrededor de la pantalla de un lugar a otro, como pegatinas en una pizarra o imanes en un refrigerador.  Ordenar listas de tareas, organizar paneles, descargar archivos: simplemente no podemos imaginar todos estos eventos sin arrastrar y soltar elementos en la p√°gina. <br><br><img src="https://habrastorage.org/webt/xy/bl/3z/xybl3zvzibklnt3lr1w4gtn-hhw.jpeg"><br><br>  Pero hay un matiz.  Cuando desarrollamos dichos componentes, creemos que nuestros usuarios ven f√≠sicamente la pantalla y los elementos, pueden atraparlos con el mouse y arrastrarlos. A menudo lo es, pero nos olvidamos del segmento de usuarios con problemas de visi√≥n.  Creamos componentes que no pueden ser utilizados por un gran grupo de personas que simplemente no los ven.  ¬øC√≥mo hacer que los componentes de arrastrar y soltar tambi√©n sean accesibles para ellos? <br><br>  <b>Sergey Krieger</b> es desarrollador front-end en SinnerSchrader.  Adem√°s del desarrollo front-end, est√° activamente interesado en el tema de accesibilidad web y hablar√° sobre algunas formas de aumentarlo.  Debajo del corte, una historia sobre la creaci√≥n de componentes de arrastrar y soltar para aquellos que no ven la pantalla y usan otros dispositivos para interactuar con el navegador. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Control deslizante </h2><br>  Comencemos con una pantalla simple en la pantalla del sitio de Aviasales.  Ingrese el punto de partida, el punto de llegada y la lista de vuelos para la selecci√≥n aparece en la pantalla.  Puede haber muchos vuelos, se pueden filtrar por precio, tiempo y otros par√°metros.  Los controles deslizantes se utilizan para filtrar resultados en el sitio web de Aviasales.  Se ven geniales, son convenientes de usar. <br><br><img src="https://habrastorage.org/webt/ue/wx/7o/uewx7oalw17sy1dg05e1lkk4mvy.jpeg"><br><br>  Nuestra tarea es imaginar que somos los desarrolladores de este sitio.  Intentemos recrear estos controles deslizantes y ver c√≥mo funcionan en diferentes casos. <br><br><h3>  Control deslizante nativo </h3><br>  Lo primero que debe pensar es si los elementos nativos se pueden utilizar para nuestra funcionalidad.  Si existe esa oportunidad, vamos por este camino, porque los elementos nativos ahorrar√°n mucho tiempo. <br><br>  Hagamos un ejemplo simple: el control deslizante se mueve a lo largo de la pista y el valor del control deslizante cambia.  Mueva el control deslizante hacia la derecha: el color de la pantalla cambia de blanco a rosa brillante, si est√° atr√°s, nuevamente a blanco. <br><br><img src="https://habrastorage.org/webt/u0/qx/3j/u0qx3jhkrepn96nsdnf81-c0z1e.gif"><br><br>  El control deslizante funciona simplemente: el control deslizante se desliza a lo largo de la pista y el control deslizante devuelve alg√∫n valor. <br><br>  Nadie usar√° un control deslizante de este tipo en la producci√≥n.  Ning√∫n dise√±ador le permitir√° usar, porque se ve d√©bil.  Nosotros, como desarrolladores, podemos resolver este problema.  Hay una serie de propiedades CSS con prefijos para cada navegador, donde puede estilizar elementos individuales del control deslizante y refinarlo. <br><br><pre><code class="css hljs">: : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-webkit-slider-runnable-track</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-webkit-sHder-thumb</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-moz-range-track</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-moz-range-thumb</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ns-track</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:-ms-thumb</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ms-fill-lower</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ms-fill-upper</span></span></code> </pre> <br>  Puede usar las propiedades manualmente, pero esta no es una tarea trivial.  Las propiedades funcionan en diferentes navegadores, y las pruebas tomar√°n mucho tiempo. <br><br>  Pero hay una herramienta especial que resuelve el problema: el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio web de Daniel Stern</a> .  Puede aplicarle estilo manualmente al control deslizante, copiar el c√≥digo CSS y todo funciona.  El control deslizante nativo ahora es un elemento HTML de <code>input</code> con el <code>range</code> tipos, pero funciona como antes, moviendo el control deslizante. <br><br><h3>  Prueba deslizante </h3><br>  Para resolver el problema hasta el final, lo probamos.  Adem√°s, probaremos no solo el control deslizante, sino tambi√©n otros elementos en tres par√°metros. <br><br><ul><li>  <b>El raton</b> .  Probar el funcionamiento del componente con el mouse es exactamente lo que siempre hacemos. <br></li><li>  <b>Teclado</b>  Adem√°s del mouse, adaptamos el control deslizante para personas con problemas de visi√≥n.  Estos usuarios no ven la pantalla y usan el teclado para interactuar con la computadora y el navegador <br></li><li>  <b>Lector de pantalla</b> : un dispositivo especial que lee la informaci√≥n en la pantalla. <br></li></ul><br>  <i>Nota: en lo sucesivo, es m√°s conveniente combinar las pruebas de lectura y visualizaci√≥n en grabaciones de video; esto es m√°s obvio.</i>  <i>Un segmento de video con prueba del control deslizante comenzar√° en el momento correcto.</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>El raton</b> .  Nos aferramos al control deslizante, tiramos hacia la derecha y hacia la izquierda.  Si todo cambia, genial. <br><br>  <b>Teclado</b>  Use la tecla Tab para ir al control deslizante y use las flechas para moverlo a lo largo de la pista. <br><br>  <b>Lector de pantalla</b> .  Es m√°s complicado aqu√≠.  Imagine que no vemos la pantalla: apague la luz de la pantalla y encienda el lector de pantalla.  El dice: <br><br>  <i>- VoiceOver est√° activado en Chrome</i> . <br><br>  Usando la tecla Tab, vaya al control deslizante. <br><br>  <i>- Cero.</i>  <i>Aplicaci√≥n deslizante estilizada.</i> <br><br>  El lector de pantalla expresa informaci√≥n: valor, nombre del control deslizante y otra informaci√≥n relacionada, que tambi√©n puede ser √∫til.  Comenzamos a mover el control deslizante: <br><br>  <i>- Uno, dos, tres, cuatro, cinco.</i> <br><br>  Si escuchamos la cuenta regresiva, todo funciona.  Encienda la luz y verifique el resultado.  La prueba ha terminado. <br><br>  Parece que no hicimos nada, simplemente estilizamos el control deslizante.  ¬øCu√°l es nuestro trabajo sobre accesibilidad?  El hecho es que no hab√≠a trabajo: utilizamos el elemento nativo. <br><br><blockquote>  Si su aplicaci√≥n tiene la capacidad de usar elementos nativos: control deslizante, botones, casillas de verificaci√≥n, si√©ntase libre de usarlos y ahorre tiempo.  Estos elementos ya admiten el teclado y el lector de pantalla. </blockquote><br><h3>  Control deslizante personalizado </h3><br>  Supongamos que el control deslizante nativo no es nuestra opci√≥n.  Miremos el c√≥digo de Aviasales y veamos que aqu√≠ no est√°n los controles deslizantes que acabamos de probar. <br><br><img src="https://habrastorage.org/webt/yd/nj/lw/ydnjlwzcvn_rkij3l_z5sgvi5ti.jpeg"><br><br>  Esta no es una <code>input</code> con el <code>range</code> tipos, sino un conjunto de <code>div</code> estilo deseado por el dise√±ador.  Parece que no hay diferencia, todo funciona. <br><br>  Comprobaremos esto y complicaremos de manera similar la tarea creando manualmente un control deslizante.  La clave para mover el control deslizante a lo largo de la pista es el posicionamiento absoluto: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">position</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">absolute</span></span></code> </pre> <br>  Posicionamos absolutamente el control deslizante en relaci√≥n con la pista y, dependiendo de su posici√≥n, calculamos el valor del control deslizante. <br><br>  Para determinar el momento de captura de un elemento con el mouse, usamos el evento <code>mousedown</code> .  Para seguir el movimiento del evento, <code>mousemove</code> y <code>mouseup</code> nos dir√°n que lanzamos el control deslizante.  Para la pantalla t√°ctil, tambi√©n usaremos una serie de eventos: <code>touchstart</code> , <code>touchmove</code> y <code>touchend</code> . <br><br>  Parece que todo es simple.  El control deslizante se ver√° igual que en el ejemplo anterior, pero en el c√≥digo no es un control deslizante, sino un conjunto de <code>div</code> estilizadas, y JavaScript ser√° responsable de moverlo.  Al trabajar con un mouse, esto ser√° imperceptible, pero hay un matiz con el teclado.  Para que el teclado pueda atrapar ese control deslizante, le damos la propiedad de enfocarse con el atributo <code>tabindex</code> y usar JavaScript para rastrear el clic en las flechas. <br><br><h3>  Prueba del control deslizante personalizado </h3><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Con un lector de pantalla ser√° m√°s dif√≠cil.  Apague la luz, encienda el lector de pantalla e intente cambiar el valor.  El lector de pantalla expresa las acciones, y si dice algo extra√±o, por ejemplo, "grupos", pensamos. <br><br>  "Grupos" es lo que expresa el lector de pantalla cuando lee un elemento div u otro elemento que no tiene ning√∫n papel sem√°ntico.  Cualquier palabra que no se refiera al control deslizante dice que la accesibilidad a√∫n no se ha logrado.  Para que el control deslizante est√© disponible, utilizamos los atributos ARIA: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"thumb"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tabindex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"slider"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-lab</span></span></span><span class="hljs-tag"></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">l</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-valuenow</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-valuemin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-valuenax</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Necesitamos decirle al lector de pantalla que nuestro elemento de estilo habitual es un control deslizante.  Haremos esto usando el <code>role</code> con el <code>slider</code> valor.  Luego asigne el nombre al control deslizante utilizando el <code>aria-labl</code> .  Establecemos el valor actual del control deslizante, el valor m√≠nimo y m√°ximo del control deslizante.  Usando estos cinco atributos ARIA, animaremos el control deslizante y haremos que el lector de pantalla diga lo que necesitamos. <br><br>  Mediante elementos de marcado, JavaScript y ARIA, pusimos el control deslizante personalizado a disposici√≥n de todos los usuarios. <br><br><h2>  Clasificaci√≥n </h2><br>  Otro enfoque para implementar componentes de arrastrar y soltar es la ordenaci√≥n.  A menudo, los sitios tienen listas de elementos que son buenos para ordenar. <br><br><img src="https://habrastorage.org/webt/8h/vt/wm/8hvtwmxdsv-1vxevekfds05md04.jpeg"><br><br>  Arriba hay una captura de pantalla del sitio web de Google Keep: es un servicio que le permite crear listas de tareas, hojas de tareas.  Una hoja de tareas tiene un nombre, una lista de elementos, la capacidad de marcar cada elemento, eliminarlo y agregar uno nuevo.  Nuestra tarea es recrear esta funcionalidad. <br><br>  As√≠ es como se ve el widget de la lista de tareas. <br><br><img src="https://habrastorage.org/webt/wj/vg/rp/wjvgrpwrdzpgct2-bnwfp7z_q58.jpeg"><br><br>  Tiene: <br><br><ul><li>  nombre - lista de tareas; <br></li><li>  Elementos: caminar con el perro, hacer una cita con el m√©dico, que se puede anotar o eliminar; <br></li><li>  la capacidad de agregar nuevos elementos: agregar una tarea. <br></li></ul><br>  Cuando agregamos un elemento nuevo, como "preparar la cena", se coloca al final de la lista.  Este es un comportamiento l√≥gico: agregamos el elemento en √∫ltimo lugar.  Pero supongamos que estas listas tienen alg√∫n tipo de prioridad.  Por ejemplo, despu√©s de un d√≠a de trabajo, la cena es m√°s importante que caminar con un perro.  Nos gustar√≠a moverlo al principio: los elementos prioritarios deben estar en la parte superior de la lista.  ¬øC√≥mo resolver este problema? <br><br>  ¬øC√≥mo mover elementos, incluso sin pensar en la accesibilidad?  Ya conocemos una forma: utilizar el posicionamiento absoluto.  Otra forma es agregar el atributo <code>draggable</code> a los elementos.  Si agrega este atributo a <code>true</code> cualquier elemento, se vuelve arrastrable.  Puede agarrarlo con el mouse y arrastrarlo a otra ubicaci√≥n en la pantalla. <br><br><blockquote>  Pero no todos los elementos necesitan el atributo <code>draggable</code> .  Las im√°genes y los enlaces no son necesarios: se arrastran y sueltan de forma predeterminada. </blockquote><br>  Solo si queremos cancelar esta funcionalidad, configuraremos <code>draggable</code> con valor <code>false</code> . <br><br><h3>  Transferencia de datos </h3><br>  Hay dos elementos en la pantalla.  A la izquierda hay una imagen en la que el atributo <code>draggable</code> est√° impl√≠cito de forma predeterminada.  A la derecha hay un elemento con una l√≠nea discontinua.  Nuestra tarea es arrastrar la imagen dentro del cuadrado punteado, que llam√© "zona de ca√≠da". <br><br><img src="https://habrastorage.org/webt/2m/tj/-d/2mtj-di88v16scbsrxxr6toswsq.jpeg"><br><br>  Tome la imagen y arr√°strela hacia la zona de colocaci√≥n.  Esta funcionalidad familiar: podemos ingresar la imagen en la zona de arrastre, salir cuando se suelta: la imagen est√° adentro.  Queremos la misma funcionalidad en nuestra lista de tareas pendientes. <br><br><img src="https://habrastorage.org/webt/r_/u_/rf/r_u_rf1xnlxdk1hrgz6tvyt62tw.gif"><br><br>  Pero antes de ver c√≥mo funciona la lista de tareas con esta tecnolog√≠a, descubriremos qu√© sucede cuando arrastramos un elemento de un lugar a otro.  Una lista de eventos ocurre en cada uno de estos elementos. <br><br>  Hay tres eventos en un elemento arrastrado. <br><br>  <b>Dragstart</b> , que ocurre una vez cuando comenzamos el proceso de arrastrar un elemento.  Este es un evento importante, luego descubriremos por qu√©. <br><br>  <b>Un arrastre</b> que ocurre regularmente cada pocos cientos de milisegundos.  Dependiendo del navegador, el valor cambia, pero el evento es frecuente.  Con este atributo, puede rastrear la posici√≥n en la pantalla del elemento que estamos arrastrando. <br><br>  <b>Dragend</b> : se dispara cuando lanzamos un elemento con el mouse. <br><br>  En un elemento que acepta otros elementos, se disparan cuatro eventos. <br><br>  <b>Dragenter</b> : alerta cuando arrastramos un elemento dentro de otro elemento. <br><br>  <b>Dragover</b> - dice cuando comenzamos a moverlo adentro. <br><br>  <b>Arrastrar</b> : cuando <b>movemos</b> un elemento m√°s all√° de los l√≠mites de otro elemento, sin soltar el mouse. <br><br>  <b>La ca√≠da</b> es el evento m√°s importante que se dispara cuando liberamos el mouse dentro del elemento receptor. <br><br>  Todos estos 4 eventos son solo requisitos previos para el movimiento del elemento: ellos mismos no hacen nada.  Utiliz√°ndolos, puedes decidir el movimiento de un elemento.  Lo hacemos as√≠: <br><br><pre> <code class="javascript hljs">draggable.addEventListener(<span class="hljs-string"><span class="hljs-string">"dragstart"</span></span>, e =&gt; { e.dataTransfer.setData(<span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>, e.target.id); }); dropZone.addEventListener(<span class="hljs-string"><span class="hljs-string">"drop"</span></span>, e =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = e.dataTransfer.getData(<span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> el = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(id); });</code> </pre> <br>  Podemos agregar datos manualmente al evento que se dispara al principio en el elemento que estamos arrastrando.  Usando el m√©todo <code>dataTransfer.setData</code> , agregamos el selector del elemento que estamos arrastrando.  En nuestro caso, esto es <code>id</code> . <br><br>  Al final, cuando el evento Drop se desencadena en el elemento receptor, obtenemos estos datos utilizando el m√©todo <code>dataTransfer.getData</code> .  Resulta que tendremos la <code>id</code> elemento que queremos mover.  Luego, usando JavaScript ordinario, seleccione este elemento en la p√°gina y mu√©valo a cualquier lugar.  Nos movemos a mano.  Para hacerlo posible, utilizamos eventos en el elemento de arrastrar y soltar. <br><br>  Podemos arrastrar cualquier elemento sobre cualquier otro elemento.  Simplemente arrastre el elemento alrededor de la p√°gina y ap√∫ntelo a los dem√°s.  Mover no significa que un elemento deba aceptar otro si no se planific√≥.  Por lo tanto, los navegadores funcionan de esta manera: por defecto, ning√∫n elemento puede aceptar otros. <br><br>  Si queremos ense√±arle al elemento a aceptar a otros, debemos cancelar este valor utilizando el m√©todo <code>e.preventDefault()</code> en <code>dragenter</code> y <code>dragover</code> , que se <code>dropZone</code> en el elemento <code>dropZone</code> . <br><br><pre> <code class="javascript hljs">dropZone.addEventListener(<span class="hljs-string"><span class="hljs-string">"dragenter"</span></span>, e =&gt; { e.preventDefault(); }); dropZone.addEventListener(<span class="hljs-string"><span class="hljs-string">"dragover¬´, e =&gt; { e.preventDefault(); });</span></span></code> </pre> <br>  Prob√© esta combinaci√≥n en diferentes navegadores.  Por ejemplo, solo <code>dragenter</code> funciona en Chrome, as√≠ que use <code>dragenter</code> y <code>dragover</code> para una soluci√≥n de navegador cruzado. <br><br>  Veamos c√≥mo funciona esto en la lista de tareas pendientes. <br><br><img src="https://habrastorage.org/webt/w3/7m/dw/w37mdwtlrdvhviswwdbbpvj23zu.jpeg"><br><br>  Nuestra tarea es arrastrar el √∫ltimo elemento de la lista de tareas a la primera posici√≥n.  Despl√°cese sobre un elemento y un elemento con 6 puntos verticales aparece a la izquierda.  En el mundo UX, esto significa que puedes arrastrarlo. <br><br><img src="https://habrastorage.org/webt/wx/lb/ju/wxlbju_v8d-jwy2asx3vkp-wgma.gif"><br><br>  Pasamos el cursor sobre √©l y, si cambia, es una se√±al de que el elemento est√° listo para moverse.  Tire hacia arriba con el mouse y aparecer√° un indicador rosa, que indica d√≥nde puede mover el elemento.  El resto de la t√©cnica es colocar el objeto en la posici√≥n deseada. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b4a/48a/1e1/b4a48a1e11e23220d4fe08daddd96fee.gif"><br><br>  Ahora le ense√±aremos al teclado y luego al lector de pantalla a procesar correctamente lo que acabamos de hacer. <br><br><h3>  Teclado </h3><br>  Con el teclado, todo no es tan complicado.  Con el teclado, usamos el mismo patr√≥n que para el mouse: encontramos el elemento que queremos mover, seleccionar, mover y luego soltar, y se ajusta en su lugar. <br><br>  Presione Tab y aparecer√° un icono familiar de 6 puntos a la izquierda del primer elemento, que dice que puede arrastrar y soltar.  Por defecto, est√° oculto y su apariencia significa que se ha enfocado.  Esta es una se√±al de que puede interactuar con este elemento. <br><br>  Introducimos el primer elemento "cocinar la cena" en el "modo de selecci√≥n" presionando "Enter".  Este art√≠culo actualmente est√° recibiendo opciones adicionales.  Las flechas hacia arriba y hacia abajo pueden moverlo a otras posiciones.  Presione la flecha hacia abajo, el elemento se mueve una posici√≥n, una vez m√°s a otra.  Entonces, movemos manualmente el componente.  Este no es el valor predeterminado en el navegador: lo escribimos manualmente en JavaScript. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e62/d92/a1b/e62d92a1b2d10dc8fe1d71b780b23ced.gif"><br><br>  Cuando deseamos eliminar la selecci√≥n del elemento, presione "Esc" o cualquier otra tecla: el elemento pierde la selecci√≥n y permanece en el lugar correcto. <br><br><h3>  Lector de pantalla </h3><br>  Todo est√° claro con el teclado.  Casi solucionamos el problema.  Queda por ense√±ar al lector de pantalla a pronunciar acciones.  Todo lo que se necesita es agregar instrucciones para que el lector de pantalla sepa lo que est√° sucediendo: d√≥nde est√° y qu√© hacer. <br><br>  Para controlar lo que dice el lector de pantalla, utilizaremos la tecnolog√≠a Live region.  Este es un conjunto de atributos que se pueden agregar a los elementos.  Dependiendo de los atributos, el lector de pantalla pronuncia diferentes frases. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"live-region visually-hidden"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-live</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"polite"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"status"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> liveRegion = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">".live-region¬´); liveRegion.textContent = ' ';</span></span></code> </pre> <br>  Establec√≠ el atributo <code>aria-live</code> con un valor de <code>polite</code> <code>div</code> vac√≠o regular, y el <code>role</code> con un valor de <code>status</code> .  Para un lector de pantalla, esta es una se√±al para escuchar un elemento.  Cuando desee que el lector de pantalla diga algo, actualice el contenido usando JavaScript, y el lector de pantalla dir√° ese contenido. <br><br>  Veamos como funciona. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Nuestra tarea es mover el primer elemento a la √∫ltima posici√≥n.  Apague la luz en la pantalla, encienda el lector de pantalla. <br><br>  <i>- VoiceOver est√° activado en Chrome.</i> <br><br>  Comenzamos a mover el art√≠culo.  Primero, busque nuestro widget: avance por los encabezados.  Voces del lector de pantalla: <br><br>  <i>- Encabezado nivel dos.</i>  <i>Lista de tareas</i> <br><br>  Lo encontr√©  Continuamos haciendo clic en la tecla Tab. <br><br>  <i>- Lista de objetos 3. Presione la tecla ‚ÄúEnter‚Äù para seleccionar el elemento ‚ÄúCaminar con el perro‚Äù.</i>  <i>Grupos.</i> <br><br>  Primero, el lector de pantalla pronuncia el n√∫mero de elementos en la lista, para que los usuarios entiendan cu√°ntos elementos hay en la lista.  Luego pronuncia una instrucci√≥n: qu√© hacer para seleccionar un elemento: "Presione la tecla Intro y el nombre de este componente. Qued√≥ claro qu√© hacer: presione la tecla Intro. <br><br>  <i>- Se selecciona el elemento "Pasear con el perro".</i>  <i>Usa las teclas Arriba y Abajo para moverte.</i>  <i>Use la tecla Esc para anular la selecci√≥n.</i> <br><br>  Habl√© de estas instrucciones: cuando selecciona un elemento, el lector de pantalla da las instrucciones que se nos ocurrieron.  Actualizamos el lector de pantalla y pronuncia el texto que colocamos en el elemento Regi√≥n en vivo.  Con las instrucciones, queda claro qu√© hacer: use las teclas Arriba / Abajo y Esc para anular la selecci√≥n.  Moverse hacia abajo una posici√≥n. <br><br>  <i>- El elemento "Pasear con el perro" se mueve a la posici√≥n 2.</i> <br><br>  Una vez mas <br><br>  <i>- El elemento "Pasear con el perro" se mueve a la posici√≥n 3.</i> <br><br>  El art√≠culo est√° al final de la lista.  Encienda la luz y verifique si el elemento est√° realmente en la √∫ltima posici√≥n. <br><br>  Presione "Esc" para anular la selecci√≥n. <br><br>  <i>- El elemento "Dar un paseo con un perro" se ha deseleccionado.</i> <br><br><blockquote>  Con la ayuda de la imaginaci√≥n, el marcado, los atributos de JavaScript y ARIA, pusimos a disposici√≥n un widget que es dif√≠cil para los usuarios con problemas de visi√≥n. </blockquote><br><h2>  En movimiento </h2><br>  Echemos un vistazo a los elementos en movimiento alrededor de la p√°gina usando Trello como ejemplo.  Este es un rastreador de tareas con columnas que indican el estado de las tareas.  Arrastrar y soltar tareas de una columna a otra corresponde a un cambio en el estado de la tarea. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5bf/b85/c45/5bfb85c458996b5b47c627254d5f6fd9.jpg"><br><br>  Simule una versi√≥n simplificada de Trello para descubrir c√≥mo hacer que este componente est√© disponible.  En mi versi√≥n hay tres columnas: "Lo har√©", "Lo hago", "Hecho". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/70d/9d1/160/70d9d1160ad3845ed34dbdbe0110c160.gif"><br><br>  Las tareas se pueden arrastrar de un lugar a otro: agarre el componente con el mouse, arr√°strelo a la siguiente columna, su√©ltelo; permanece all√≠. <br><br><h3>  Teclado </h3><br>  Todo es simple con el mouse; estamos familiarizados con el atributo <code>draggable</code> con el valor <code>true</code> del ejemplo anterior.  Con el teclado era posible hacer la misma opci√≥n: mover la tarea de columna a columna con flechas.  Pero, si las columnas son 5 u 8, entonces pasar de la primera a la √∫ltima requerir√° 5 u 8 clics en la tecla Derecha 5 u 8 veces, lo cual es inconveniente y dificultar√° el trabajo con el componente. <br><br>  Haremos lo contrario.  Presione la tecla Tab, el foco se mueve al primer elemento.  Presione la tecla nuevamente y aparece un nuevo elemento que estaba oculto hasta que el foco se movi√≥ hacia √©l. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/130/949/8f9/1309498f9ad7190823280c901d1f0d4d.gif"><br><br>  Tres puntos verticales significan que el elemento tendr√° un men√∫.  El √≠cono puede ser diferente.  El comportamiento predeterminado del navegador cuando se trabaja con el elemento <code>select</code> es hacer clic en el "Espacio", despu√©s de lo cual aparece un men√∫. <br><br>  Resolveremos el problema usando JavaScript, pero daremos a los usuarios la oportunidad de elegir qu√© columna quieren mover esta o aquella tarea. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3dd/14a/1c5/3dd14a1c560be0797852e02380576b32.gif"><br><br>  Nos movemos a la √∫ltima columna, presionamos "Enter", y todo funcion√≥: el elemento se movi√≥ a donde quer√≠amos. <br><br><h3>  Lector de pantalla </h3><br>  Agregue instrucciones para el lector de pantalla.  El uso del elemento de <code>select</code> regular ofrece una gran ventaja porque est√° disponible de forma predeterminada.  Veamos que podemos hacer. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Apague la luz en la pantalla, encienda el lector de pantalla. <br><br>  <i>- VoiceOver est√° activado en Chrome.</i> <br><br>  Pasamos al primer elemento.  El lector de pantalla dice cu√°ntos objetos hay en la lista.  Usamos la <code></code> elementos sem√°nticos y el nombre del elemento.  Presione Tab. <br><br>  <i>- "Hacer": seleccione el bot√≥n emergente contra√≠do del bot√≥n "Play Soccer", grupos.</i> <br><br>  El lector de pantalla puede pronunciar palabras extra√±as.  √âl llama al nombre de la columna "Make", y "pop-up minimizado" para el lector de pantalla significa que usaremos el men√∫ - para el usuario del lector de pantalla esto estar√° claro. "Minimized", "pop-up" y "button" se pronunciar√°n de manera diferente en diferentes lectores de pantalla, pero no tenemos que preocuparnos mucho por eso, porque los usuarios de lectores de pantalla est√°n familiarizados con este comportamiento. <br><br>  Nuestra tarea es seleccionar la columna deseada de la lista. <br><br>  <i>- No es cero, hazlo.</i>  <i>Seleccione la columna desplegable desplegable, bot√≥n.</i>  <i>Su posici√≥n actual en la pantalla ... "Haciendo".</i>  <i>"Listo" ... El elemento "Jugar al f√∫tbol" se ha movido a la columna "Listo".</i> <br><br>  Este es el texto que agregamos manualmente para informar a los usuarios que lo hicimos.  As√≠ es como funciona nuestro tablero de tareas. <br><br><h2>  Subir archivos </h2><br>  La funcionalidad de carga de archivos tambi√©n se encuentra en los sitios, por ejemplo, para adjuntar archivos a un correo electr√≥nico.  Por lo tanto, en mi ejemplo, el correo electr√≥nico es Gmail. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c6c/162/9af/c6c1629aff5082ed186d55c096380d34.jpg"><br><br>  Hay un elemento con una l√≠nea discontinua en la pantalla.  Aqu√≠ es donde arrastraremos nuestros archivos. <br><br><img src="https://habrastorage.org/webt/3f/1u/7v/3f1u7vujslz3sxoiybyis4lxopy.gif"><br><br>  Para hacer esto, abra el explorador donde se encuentran los archivos y arrastre el archivo con el mouse a la zona punteada.  Despu√©s de arrastrar y soltar, el elemento cambia de estado, suelta el archivo y comienza la descarga.  Al final de la descarga, notificaremos al usuario que todo se ha descargado correctamente. <br><br><h3>  Teclado </h3><br>  Con el teclado, todo se resuelve de manera simple.  Hay un elemento de <code>input</code> sem√°ntico de tipo <code>file</code> .  Si lo usa, cuando haga clic en este elemento, el cuadro de di√°logo Explorador se abrir√° autom√°ticamente donde podr√° seleccionar archivos del sistema operativo.  Los estilos de ventana se pueden configurar absolutamente cualquiera, dependiendo de los deseos de su dise√±ador. <br><br><img src="https://habrastorage.org/webt/q7/13/ss/q713sspf4k5lmwca19b-9po0w5i.gif"><br><br>  Haga clic en el elemento, se abre un cuadro de di√°logo.  Como usamos el elemento de <code>input</code> nativo, tambi√©n puede moverse a este elemento con la tecla Tab, presionar la barra espaciadora y se abrir√° un cuadro de di√°logo.  Los elementos se seleccionan con la tecla Intro, y todo sucede de la misma manera. <br><br>  Todo funciona con el mouse y el teclado.  Para el lector de pantalla, puede hacer algo que, de manera predeterminada, no es proporcionado por elementos nativos. <br><br><h3>  Lector de pantalla </h3><br>  El elemento "select" funcionar√° y a√∫n podemos abrir un cuadro de di√°logo con el sistema operativo.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pero cuando comienza la carga, podemos hacer algo muy interesante para actualizar el lector de pantalla del usuario sobre el estado de la descarga. </font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enciende el lector de pantalla. </font><font style="vertical-align: inherit;">Con el teclado, vaya al elemento para seleccionar archivos del sistema operativo. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Seleccionar aplicaci√≥n de bot√≥n. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Presione el bot√≥n con el lector de pantalla. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Presione el bot√≥n de selecci√≥n. </font><font style="vertical-align: inherit;">El comienzo del di√°logo ... Image image.png. </font><font style="vertical-align: inherit;">31 de marzo ... 0% ... 16% descargado ... 73% descargado ... 100% cargado. </font><font style="vertical-align: inherit;">El archivo image.png se ha cargado correctamente. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que paso </font><font style="vertical-align: inherit;">Despu√©s de abrir el cuadro de di√°logo, seleccionamos el archivo. </font><font style="vertical-align: inherit;">No necesitamos hacer nada aqu√≠, porque el lector de pantalla est√° relacionado con el sistema operativo y no tiene nada que ver con el navegador. </font><font style="vertical-align: inherit;">El sistema de archivos, como todas las dem√°s aplicaciones, pueden manejarse bien.</font></font><br><br>       ,    screen reader    .          ‚Äî 10%, 20%...100%.    ,   ,  ,   . <br><br>      Live region,   .   screen reader,     ,     ARIA Live,   screen reader         .       . <br><br><h2>  Resumen </h2><br> <b> </b> .    ‚Äî  .   , ,       screen reader.     , ,           . <br><br> <b>HTML + JavaScript + ARIA</b> .   Drag-&amp;-Drop      , JavaScript   ARIA.    ,      . <br><br> <b>¬´ ¬ª</b> .     ,  ¬´ ¬ª:  , ,  ,    ,   . <br><br> <b> </b> .   :      , ,   . <br><br><h2>  </h2><br>   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">W3.org</a> ‚Äî     .              . <br><br>   ,     ,    <b> </b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">inclusive-components.design</a> .          . ,       ,       ,   ,   ,  . <br><br> <b></b> .       ,     ,    <b> </b> ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://www.google.com/url%3Fq%3D">  </a> ¬ª.      ‚Äî     .      . <br><br> <b> </b> .      ,       ‚Äî       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://www.google.com/url%3Fq%3D">Medium    </a> .       ,       .     ,    . ,        ,     .      .    ,     . <br><br><blockquote>       .        FrontendConf ++  .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">FrontendConf 2019</a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  Leonie Watson</a> ‚Äî ,    W3C     W3C  -.   Leonie      screen reader.  ,       ,        ,   ,         . <br><br>  FrontendConf   ,     .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>  ,       . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/468541/">https://habr.com/ru/post/468541/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../468529/index.html">Domar a Gorynych o descompilar eBPF en Ghidra</a></li>
<li><a href="../468531/index.html">El primer bot PHP para VKontakte</a></li>
<li><a href="../468533/index.html">Autostop en DevOps con Express 42</a></li>
<li><a href="../468535/index.html">¬øNo necesitas registros?</a></li>
<li><a href="../468537/index.html">Conceptos b√°sicos de DevOps. Ingreso al proyecto desde cero</a></li>
<li><a href="../468543/index.html">Entre semana Comit√© del Programa FrontendConf. Entrevista con Sergey Popov</a></li>
<li><a href="../468547/index.html">Habla ingl√©s, CSS, Grid y accesibilidad en FrontendConf</a></li>
<li><a href="../468549/index.html">GPU enlazado. C√≥mo transferir todo a la tarjeta de video y un poco m√°s. Animaciones</a></li>
<li><a href="../468553/index.html">Gesti√≥n de par√°metros en aplicaciones empresariales similares a un sistema de control de versiones.</a></li>
<li><a href="../468555/index.html">Introducci√≥n a los ensambles deterministas en C / C ++. Parte 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>