<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤽 ⛺️ 🥃 升级您的版本 😻 🌇 👂🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="亨利·福特曾经说过：“最好的汽车是一辆新车。” 因此，我们在Tinkoff公司集团中考虑软件发行版。 迟早交付功能和紧急修复过程中的惰性会给客户带来巨大的技术负担，并且通常最终会导致整个项目停滞不前。 


 确保高质量的上市时间并保持质量并非易事。 从我的角度来看，您无法立即构建导轨，就可以在启动...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>升级您的版本</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/472434/"><p><img src="https://habrastorage.org/webt/gk/69/t-/gk69t-xi2-9rxwwn8xmp_gz1lo0.png"></p><br><p> 亨利·福特曾经说过：“最好的汽车是一辆新车。” 因此，我们在Tinkoff公司集团中考虑软件发行版。 迟早交付功能和紧急修复过程中的惰性会给客户带来巨大的技术负担，并且通常最终会导致整个项目停滞不前。 </p><br><p> 确保高质量的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">上市时间</a>并保持质量并非易事。 从我的角度来看，您无法立即构建导轨，就可以在启动后的几个月内快速方便地进行更改。 一个项目的增长通常伴随着工作人数的增加，这意味着它会在您的发行版中造成潜在的混乱。 </p><br><p> 我们的经验几乎不值得作为成功的指导，但是许多想法似乎很有趣，我可以与您分享。 让我们开始吧。 </p><a name="habracut"></a><br><p> 从技术上讲，我们历史的起点如下。 该系统由多个服务组成，其代码库大约由30个人组成-几个团队按业务领域划分，例如，为个人和法人提供服务。 我将尝试忽略该项目的技术和体系结构细节，以便专注于发布过程本身。 </p><br><p> 我们正在研究<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Gitflow</a> ，因此对于那些选择这种特定交付方式的人来说，本文将是非常有趣的。 </p><br><h3 id="problemy"> 问题所在 </h3><br><p> 我们遇到的第一个问题与<strong>流程自动化不足</strong>有关。 我们团队中所有发布活动的实施都与发布经理（RM）的角色相关。 </p><br><p> 以下是其中一些： </p><br><ol><li> 离开发行分支并创建标签。 </li><li> 与主人合并并发展分支机构。 </li><li> 构建和部署发行版中包含的工件。 </li><li> 与过程中涉及的专家进行沟通-例如，与质量检查人员或管理员进行沟通。 </li></ol><br><p> 随着项目的扩展（在我们的情况下，服务数量的增加），这些例行任务需要越来越多的资源，因此第一步是使所有可以自动化的东西实现自动化。 我们与CI / CD工具集成在一起，以便分配和合并发行分支，启动测试构建并部署工件。 使用任务跟踪工具和公司Messenger来及时通知负责下一步的参与者-例如，更改任务的状态并配置挂钩以发送通知。 </p><br><div class="spoiler">  <b class="spoiler_title">Gitflow自动化工作</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/5j/d9/jj/5jd9jjsprv33w-m1my1mahamqam.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Messenger中的通知示例</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ui/cs/0v/uics0vc4rqqacwoi3ax1nq029oi.png"></p></div></div><br><p> 发布管理器仍将必须手动解决合并分支所引起的潜在冲突，但是快速而频繁的发布应将其数量减少为零。 </p><br><p> 下一个问题是<strong>测试</strong> 。 </p><br><p> 对我们来说，构建标准之一是测试的成功执行。 通常将测试至少分为两种类型：单元测试和集成测试。 </p><br><p>  <strong>单元测试</strong>使您可以检查程序源代码中各个模块的正确性，实际上，在大多数情况下，这归结为检查一种或多种具有明显逻辑连接的方法。 </p><br><p>  <strong>集成测试</strong>通常检查此类模块的整个级联的可操作性，即客户端整个功能的功能。 例如，如果在任务中实现了休息接口，那么我们将检查授权的可操作性，请求本身的反序列化，所传输字段的有效性，与其他服务和数据库的集成以及业务逻辑本身。 乍一看，这样的测试似乎非常自给自足，能够覆盖所有潜在的问题区域。 无需了解每个砖的工作方式，并且被调用的接口封装了所有逻辑，以便在输出上获得简单的答案：它是否起作用。 </p><br><p> 实际上，它们会产生许多延迟的问题，以下是其中的一些问题： </p><br><ol><li> 大量测试零件的参与会成比例地影响组装时间和此类测试的执行。 </li><li> 封装测试逻辑通常会导致难以保证测试结果正确性的事实。 通常，我们会根据结果自定义测试，并且由于随机的副作用，结果经常更符合预期。 </li><li> 测试数据的相关性丢失。 </li><li> 与第三方系统（尤其是在测试环境上）的集成通常会失败。 这消除了花费的运行时间，因为这并不总是显而易见的：这是由于我们的更改导致的暂时下降或崩溃。 </li></ol><br><p> 对于大多数问题，已经提出了解决方案。 但是，像往常一样，解决方案并非没有其他限制或新问题。 </p><br><p> 为您选择正确的测试并正确实施它们是一项非常艰巨的任务。 此外，重要的是要在覆盖质量和构建速度之间取得平衡，以优化发行版。 </p><br><p> 就我们而言，我们选择了混合动力车。 我们会继续提高所有必要组件的功能，以进行完整的功能测试，同时清洗所有可能的集成。 为了保存API合同，我们使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pact</a> ，并检查与数据库<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Testcontainers</a>的集成。 </p><br><p> 结果，这种编写测试的方法导致解决了第三个问题- <strong>长时间手动测试任务</strong> 。 混合测试的稳定性导致了在指定用于编译测试用例的任务阶段吸引QA工程师的想法-这将使他们在手动测试阶段被跳过。 与有用的产品（例如<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TestRail</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Allure）的</a>集成已经成为开发人员和测试人员之间的桥梁。 创建了一个合同，该合同的执行逐步反映在测试程序集生成的报告中。 </p><br><div class="spoiler">  <b class="spoiler_title">TestRail。</b>  <b class="spoiler_title">测试版本详细信息</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/nk/wv/kc/nkwvkcxtmk1j_sxutjmni2rganu.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">TestRail。</b>  <b class="spoiler_title">开发人员实施的测试用例</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ha/oh/5r/haoh5rijpl5xjg6arorfgwdnkzi.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">魅力</b>  <b class="spoiler_title">自动测试生成报告</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/1f/w2/cy/1fw2cyotmhbopjohdm47y7spkaq.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">魅力</b>  <b class="spoiler_title">每次运行测试的信息以及执行的详细步骤</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/g_/q-/os/g_q-osvljwhuecjhtkta1avthwk.png"></p></div></div><br><p> 仍然可以将报告连接到您的任务跟踪工具，以进行透明的任务跟踪。 一个清晰的故事也将减少为将来的相关任务编译和实施测试所需的时间。 </p><br><div class="spoiler">  <b class="spoiler_title">吉拉</b>  <b class="spoiler_title">自动连接到任务的测试用例</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fr/66/dv/fr66dvaumtfhdc56iw5tnezg4vk.png"></p></div></div><br><p> 这样，质量检查工程师可以节省足够的时间来专注于测试特殊情况并与其他系统集成。 </p><br><p> 最后一个问题与此有关。 对于手动测试，所有任务都从开发中的功能分支合并，然后启动部署到测试台。 </p><br><p> 首先，使用这种方法时，您不能谈论功能的纯测试，因为与此同时，其他开发人员的相关更改可能会落入开发过程。 </p><br><p> 其次，当释放release分支时，可能会发现QA没有时间测试某些任务。 可以选择：回滚受这些任务影响的更改，或者放慢发布速度，直到测试结束。 </p><br><p> 除非您<strong>隔离测试环境</strong> ，否则您<strong>将</strong>始终必须做出这样的选择。 重要的是，除了该任务所做的更改外，被测组件中没有其他更改。 在我们的案例中，我们需要能够选择分支已更改的一个或多个服务，并通过仅将我们需要的请求从QA发送到这些实例来管理集群内部的路由。 如果群集上已经使用了平衡机制，则该任务将变得很复杂，这也必须予以考虑。 </p><br><p> 意识到了这个机会，我们开始直接在单独的功能分支上进行手动测试：在测试过程中部署所需的服务，孤立地集成到整个环境中。 通过仅将现成的任务合并到dev分支中并摆脱了锁，我们自己开始确定哪些更改应包含在发行版中，哪些不应该包含在发行版中。 </p><br><p> 值得注意的是，对于那些几乎对相同文件进行更改的团队来说，这种解决方案不太可能成为灵丹妙药。 在这种情况下，特征的存储与合并期间发生的冲突数量成反比。 在实践中，由于发行版相当频繁，在拥有五十名开发人员的团队中很少发生这种情况。 </p><br><h3 id="vmesto-vyvoda"> 代替输出 </h3><br><p> 总而言之，我们可以确定有助于加速发布的主要方法： </p><br><ol><li> 日常操作的自动化。 </li><li> 所有参与者流程的透明度。 </li><li> 编写自动化测试时，必须在速度和质量之间取得平衡。 </li><li> 减少了手动测试的时间。 </li><li> 隔离测试环境。 </li></ol><br><p> 重要的是要理解，在选择各种方法，原则和策略时，始终值得从问题的背景出发。 有许多同样可靠和更复杂的方法可以加快将软件交付给客户端的速度。 试图应对新出现的困难已得出上述结论。 对于我们来说，这是迈向<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">大胆发布发行版的</a>第一步。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN472434/">https://habr.com/ru/post/zh-CN472434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN472422/index.html">Sber X RamblerFront和聚会</a></li>
<li><a href="../zh-CN472426/index.html">安全周刊43：物联网Hanipot的秘密生活</a></li>
<li><a href="../zh-CN472428/index.html">Tarantool Kubernetes运算符</a></li>
<li><a href="../zh-CN472430/index.html">我们如何选择智能家居的组件库：关于传感器和控制器</a></li>
<li><a href="../zh-CN472432/index.html">Python 3.8：新增功能和用法</a></li>
<li><a href="../zh-CN472438/index.html">代理如何在信息安全中使用：6个实际用例</a></li>
<li><a href="../zh-CN472440/index.html">小丑2019的一天</a></li>
<li><a href="../zh-CN472442/index.html">情况：每个人都在谈论被遗忘的音频格式的回归-为什么它们注定要保持利基</a></li>
<li><a href="../zh-CN472444/index.html">最好的产品始于实际的问题：有关即将完成的工作的对讲机。 第三部分最终</a></li>
<li><a href="../zh-CN472446/index.html">如何对“哈布雷”上的代码进行正确的着色以及为什么如此困难</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>