<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèñÔ∏è ü•â üí™üèø Komponenten der endg√ºltigen Reaktion üëµüèø üôé üëºüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Was ich am React-√ñkosystem mag, ist, dass IDEA hinter vielen Entscheidungen steckt. Verschiedene Autoren schreiben verschiedene Artikel zur Unterst√ºtz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Komponenten der endg√ºltigen Reaktion</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434830/"><p>  Was ich am React-√ñkosystem mag, ist, dass IDEA hinter vielen Entscheidungen steckt.  Verschiedene Autoren schreiben verschiedene Artikel zur Unterst√ºtzung der bestehenden Ordnung und erkl√§ren, warum alles ‚Äûrichtig‚Äú ist, damit jeder versteht, dass die Partei auf dem richtigen Weg ist. </p><br><p>  Nach einiger Zeit √§ndert sich die IDEE ein wenig und alles beginnt von vorne. </p><br><p>  Und der Anfang dieser Geschichte ist die Trennung von Komponenten in Container und Nicht-Container (im Volksmund dumme Komponenten genannt, entschuldigen Sie mein Franz√∂sisch). </p><br><p><img src="https://habrastorage.org/webt/p3/cl/nl/p3clnlwh5eus18t7l4xkoxgc09a.jpeg"></p><a name="habracut"></a><br><h3 id="problema">  Das Problem </h3><br><p>  Das Problem ist sehr einfach - Unit-Tests.  In letzter Zeit gab es einige Bewegungen in Richtung Integrationstests - nun, Sie wissen: <em>"Schreiben Sie Tests. Nicht zu viele. Meistens Integration."</em>  .  Dies ist keine schlechte Idee, und wenn die Zeit knapp ist (und Tests nicht besonders ben√∂tigt werden), m√ºssen Sie dies tun.  Nennen wir es einfach Rauchtests - um sicherzustellen, dass nichts <em>zu</em> explodieren <em>scheint</em> . </p><br><p> Wenn viel Zeit zur Verf√ºgung steht und Tests erforderlich sind, ist es besser, diesen Weg nicht zu gehen, da das Schreiben guter Integrationstests sehr, sehr lang ist.  Nur weil sie wachsen und wachsen und um die dritte Schaltfl√§che auf der rechten Seite zu testen, m√ºssen Sie zuerst auf 3 Schaltfl√§chen im Men√º klicken und nicht vergessen, sich anzumelden.  Im Allgemeinen - hier ist eine <u>kombinatorische Explosion</u> auf einem Silbertablett. </p><br><p>  Die L√∂sung hier ist ein (per Definition) einfacher Unit-Test.  Die M√∂glichkeit, Tests mit einem vorgefertigten Status eines Teils der Anwendung zu starten.  Genauer gesagt, um den Testbereich von der Anwendung oder dem <em>gro√üen Block</em> auf etwas Kleines zu verkleinern - eine Einheit, egal was es ist.  Es ist nicht notwendig, Enzym zu verwenden - Sie k√∂nnen Browsertests durchf√ºhren, wenn die Seele danach fragt.  Das Wichtigste dabei ist, etwas <em>isoliert</em> testen zu k√∂nnen.  Und ohne zu viel M√ºhe. </p><br><p>  Isolation ist einer der wichtigsten Punkte beim Unit-Test, und deshalb m√∂gen Unit-Tests das nicht.  Sie m√∂gen es aus verschiedenen Gr√ºnden nicht: </p><br><ul><li>  Beispielsweise wird Ihre ‚ÄûEinheit‚Äú aus der Anwendung herausgerissen und funktioniert in ihrer Zusammensetzung nicht, selbst wenn die eigenen Tests gr√ºn sind. </li><li>  oder zum Beispiel, weil die Isolation ein so kugelf√∂rmiges Pferd in einem Vakuum ist, das niemand gesehen hat.  Wie erreicht man es und wie misst man es? </li></ul><br><p>  Pers√∂nlich sehe ich hier keine Probleme.  Nach dem ersten Punkt k√∂nnen <em>nat√ºrlich</em> Integrationstests empfohlen werden, sie wurden daf√ºr erfunden - um zu √ºberpr√ºfen, wie die vorgetesteten Komponenten korrekt zusammengebaut wurden.  Sie vertrauen npm-Paketen, die nat√ºrlich nur sich selbst und nicht sich selbst als Teil Ihrer Anwendung testen.  Wie unterscheiden sich Ihre "Komponenten" von "nicht Ihren" Paketen? </p><br><p>  Mit dem zweiten Absatz ist alles etwas komplizierter.  Und in diesem Artikel geht es genau um diesen Punkt (und alles davor - eine Einf√ºhrung) - darum, wie man eine "Einheit" <em>-Einheit testbar macht</em> . </p><br><h3 id="razdelyay-i-vlastvuy">  Teilen und erobern </h3><br><p>  Die Idee, die React-Komponenten in "Container" und "Pr√§sentation" zu unterteilen, ist nicht neu, gut beschrieben und hat es bereits geschafft, ein wenig veraltet zu sein.  Wenn wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Artikel von Dan Abramov</a> als Grundlage nehmen (was 99% der Entwickler tun), dann ist die Pr√§sentationskomponente: </p><br><ul><li>  Sind besorgt dar√ºber, wie die Dinge aussehen </li><li> Kann sowohl Pr√§sentations- als auch Containerkomponenten enthalten <code>**</code> und normalerweise einige DOM-Markups und eigene Stile haben. </li><li>  Support-Slots (Erm√∂glichen h√§ufig die Eind√§mmung √ºber this.props.children) </li><li>  Anwendungsunabh√§ngig (Keine Abh√§ngigkeiten vom Rest der App, z. B. Flux-Aktionen oder -Speicher) </li><li>  Nicht von Daten abh√§ngig (Geben Sie nicht an, wie die Daten geladen oder mutiert werden). </li><li>  Die Schnittstelle basiert auf Requisiten (Daten und R√ºckrufe ausschlie√ülich √ºber Requisiten empfangen) </li><li>  Oft zustandslos (haben selten einen eigenen Status (wenn sie dies tun, ist es eher der UI-Status als Daten)) </li><li>  Oft SFC (werden als funktionale Komponenten geschrieben, es sei denn, sie ben√∂tigen Status-, Lebenszyklus-Hooks oder Leistungsoptimierungen) </li></ul><br><p>  Container sind die gesamte Logik, der gesamte Zugriff auf Daten und die gesamte Anwendung im Prinzip. </p><br><blockquote>  In einer idealen Welt sind Container der Kofferraum und Pr√§sentationskomponenten die Bl√§tter. </blockquote><p>  In Dans Definition gibt es zwei wichtige Punkte: <em>"Anwendungsunabh√§ngig"</em> , was fast eine akademische Definition von "Einheit" ist, und * "Kann sowohl andere Pr√§sentationskomponenten als auch Container enthalten <code>**</code> " *, wobei diese Sterne besonders interessant sind. </p><br><blockquote>  (freie √úbersetzung) ** In den fr√ºhen Versionen meines Artikels sagte ich (Dan), dass Pr√§sentationskomponenten nur andere Pr√§sentationskomponenten enthalten sollten.  Das glaube ich nicht mehr.  Der Komponententyp ist das Detail und kann sich im Laufe der Zeit √§ndern.  Teilen Sie es im Allgemeinen nicht und alles wird in Ordnung sein. </blockquote><p>  Erinnern wir uns, was danach passiert: </p><br><ul><li>  Im Bilderbuch f√§llt alles, weil eine Art Container im dritten Knopf links in die Seite kriecht, in deren Seite sich keiner befindet.  Besondere Gr√º√üe an graphql, React-Router und andere React-Intl. </li><li>  Die F√§higkeit, Mount in den Tests zu verwenden, geht verloren, da alles von A bis Z gerendert wird und irgendwo in den Tiefen des Renderbaums jemand etwas tut und die Tests fallen. </li><li>  Die F√§higkeit, den Status der Anwendung zu steuern, geht verloren, da (im √ºbertragenen Sinne) die F√§higkeit, Selektoren / Resolver (insbesondere mit Proxyquire) zu benetzen, verloren geht und das gesamte Gate nass sein muss.  Und das ist cool f√ºr Unit-Tests. </li></ul><br><blockquote>  Wenn es Ihnen so vorkommt, als w√§ren die Probleme ein wenig kompliziert - versuchen Sie, in einem Team zu arbeiten, wenn sich diese Container, die in Ihren Nicht-Containern verwendet werden, in anderen Abteilungen √§ndern. Infolgedessen sehen Sie und sie sich die Tests an und Sie k√∂nnen nicht verstehen, warum gestern alles es hat funktioniert und jetzt wieder. </blockquote><p>  Infolgedessen m√ºssen Sie flache verwenden, wodurch alle sch√§dlichen (und unerwarteten) Nebenwirkungen beseitigt werden.  Hier ist ein einfaches Beispiel aus dem Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûWarum ich immer flach benutze‚Äú</a> </p><br><p>  Stellen Sie sich vor, Tooltip rendert "?". Wenn Sie darauf klicken, wird der Typ selbst angezeigt. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Tooltip <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-cool-tooltip'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MyComponent = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { &lt;Tooltip&gt; hint: {veryImportantTextYouHaveToTest} &lt;<span class="hljs-regexp"><span class="hljs-regexp">/Tooltip&gt; }</span></span></code> </pre> <br><p>  Wie teste ich es?  Mounten + Klicken + √úberpr√ºfen, was sichtbar ist.  Dies ist ein Integrationstest, keine Einheit, und die Frage ist, wie Sie auf eine "fremde" Komponente klicken k√∂nnen.  Es gibt kein Problem mit Flach, da es kein <em>Gehirn</em> und die "Alien-Komponente" selbst gibt.  Aber hier gibt es K√∂pfe, da Tooltip ein Container ist, w√§hrend MyComponent <em>praktisch eine</em> Pr√§sentation ist. </p><br><pre> <code class="javascript hljs">jest.mock(<span class="hljs-string"><span class="hljs-string">'react-cool-tooltip'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">default</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{children}</span></span></span><span class="hljs-function">) =&gt;</span></span> childlren});</code> </pre> <br><p>  Wenn Sie jedoch auf einen Tooltip reagieren, gibt es keine Probleme beim Testen.  Die ‚ÄûKomponente‚Äú ist scharf viel d√ºmmer, viel k√ºrzer, viel <em>endlicher geworden</em> . </p><br><p>  <strong>Letzte Komponente</strong> </p><br><ul><li>  eine Komponente mit einer bekannten Gr√∂√üe, die andere, zuvor bekannte, endg√ºltige Komponenten enthalten kann oder diese √ºberhaupt nicht enth√§lt. </li><li>  enth√§lt keine anderen Beh√§lter, da sie einen unkontrollierten Zustand enthalten und die Gr√∂√üe "erh√∂hen", d.h.  Machen Sie die aktuelle Komponente <em>unendlich</em> . </li><li>  Andernfalls handelt es sich um eine regul√§re Pr√§sentationskomponente.  Genau wie in der <em>ersten</em> Version von Dans Artikel beschrieben. </li></ul><br><p>  Die letzte Komponente ist nur ein Zahnrad, das aus einem gro√üen Mechanismus herausgenommen wurde. </p><br><p>  Die ganze Frage ist, wie man es herausnimmt. </p><br><h3 id="reshenie-1---di">  L√∂sung 1 - DI </h3><br><p>  Mein Favorit ist Dependency Injection.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dan liebt ihn auch</a> .  Im Allgemeinen ist dies nicht DI, sondern "Slots".  Kurz gesagt - es ist nicht erforderlich, Container in Presentation zu verwenden - sie m√ºssen dort <em>injiziert</em> werden.  Und in Tests wird es m√∂glich sein, etwas anderes zu injizieren. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    mount     const PageChrome = ({children, aside}) =&gt; ( &lt;section&gt; &lt;aside&gt;{aside}&lt;/aside&gt; {children} &lt;/section&gt; ); //     shallow,       //     mount ? , ,   wiring? const PageChromeContainer = () =&gt; ( &lt;PageChrome aside={&lt;ASideContainer /&gt;}&gt; &lt;Page /&gt; &lt;/PageChrome&gt; );</span></span></code> </pre> <br><p>  Dies ist genau der Fall, wenn <em>"Container der Kofferraum sind und Pr√§sentationskomponenten Bl√§tter sind".</em> </p><br><h3 id="reshenie-2---granicy">  L√∂sung 2 - Grenzen </h3><br><p>  DI kann oft cool sein.  Wahrscheinlich denkt% username% jetzt dar√ºber nach, wie es auf die aktuelle Codebasis angewendet werden kann, und die L√∂sung ist nicht erfunden ... </p><br><p>  In solchen F√§llen werden Sie von <strong>Borders</strong> gerettet. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Boundary = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{children}</span></span></span><span class="hljs-function">) =&gt;</span></span> ( process.env.NODE_ENV === <span class="hljs-string"><span class="hljs-string">'test'</span></span> ? <span class="hljs-literal"><span class="hljs-literal">null</span></span> : children <span class="hljs-comment"><span class="hljs-comment">// //  jest.mock ); const PageChrome = () =&gt; ( &lt;section&gt; &lt;aside&gt;&lt;Boundary&gt;&lt;ASideContainer /&gt;&lt;/Boundary&gt;&lt;/aside&gt; &lt;Boundary&gt;&lt;Page /&gt;&lt;/Boundary&gt; &lt;/section&gt; );</span></span></code> </pre> <br><p>  Hier verwandeln sich anstelle von ‚ÄûSlots‚Äú alle ‚Äû√úbergangspunkte‚Äú einfach in Boundary, wodurch w√§hrend der Tests <em>alles</em> gerendert wird.  <em>Deklarativ</em> genug und genau das, was Sie brauchen, um "die Ausr√ºstung herauszunehmen". </p><br><h3 id="reshenie-3---tier">  L√∂sung 3 - Tier </h3><br><p>  Rahmen k√∂nnen etwas rau sein, und es ist m√∂glicherweise einfacher, sie etwas intelligenter zu gestalten, indem Sie ein wenig Wissen √ºber Ebenen hinzuf√ºgen. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> checkTier = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tier</span></span></span><span class="hljs-function"> =&gt;</span></span> tier === currentTier; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> withTier = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tier</span></span></span><span class="hljs-function"> =&gt;</span></span> WrapperComponent =&gt; <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">process.env.NODE_ENV !== </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'test'</span></span></span></span><span class="hljs-function"><span class="hljs-params"> || checkTier(tier</span></span></span><span class="hljs-function">)) &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">WrapperComponent</span></span></span><span class="hljs-function">{...</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">} /&gt; ); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PageChrome</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ASideContainer</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ASideContainer = withTier(<span class="hljs-string"><span class="hljs-string">'UI'</span></span>)(...) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Page = withTier(<span class="hljs-string"><span class="hljs-string">'Page'</span></span>)(...) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PageChromeContainer = withTier(<span class="hljs-string"><span class="hljs-string">'UI'</span></span>)(PageChrome);</code> </pre> <br><p>  Unter dem Namen Tier / Layer kann es verschiedene Dinge geben - Feature, Ente, Modul oder nur diese Layer / Tier.  Der Punkt ist nicht wichtig, die Hauptsache ist, dass Sie das Zahnrad ziehen k√∂nnen, vielleicht nicht eines, sondern die endg√ºltige Nummer, und <em>irgendwie</em> eine Linie zwischen dem ziehen, was Sie brauchen und dem, was Sie nicht brauchen (f√ºr verschiedene Tests ist dies eine andere Grenze). </p><br><p>  Und nichts hindert daran, diese Grenzen irgendwie anders zu markieren. </p><br><h3 id="reshenie-4separate-concerns">  L√∂sung 4 - Getrennte Bedenken </h3><br><p>  Wenn die L√∂sung (per Definition) in der Trennung von Entit√§ten liegt - was passiert, wenn wir sie nehmen und trennen? </p><br><p>  ‚ÄûContainer‚Äú, die wir so wenig m√∂gen, werden normalerweise als <em>Container bezeichnet</em> .  Und wenn nicht, hindert nichts daran, Komponenten jetzt klangvoller zu benennen.  Oder sie haben ein bestimmtes Muster in ihrem Namen - Connect (WrappedComonent) oder GraphQL / Query. </p><br><p>  Was ist, wenn zur Laufzeit eine Linie zwischen Entit√§ten anhand eines Namens gezogen wird? </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PageChrome = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ASideContainer</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); <span class="hljs-comment"><span class="hljs-comment">// remove all components matching react-redux pattern reactRemock.mock(/Connect\(\w\)/) // all any other container reactRemock.mock(/Container/)</span></span></code> </pre> <br><p>  Plus eine Zeile in den Tests und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React-Remock</a> entfernen alle Container, die die Tests st√∂ren k√∂nnten. </p><br><p>  Im Prinzip kann dieser Ansatz verwendet werden, um die Container selbst zu testen - Sie m√ºssen nur alles au√üer dem ersten Container <em>entfernen</em> . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {createElement, remock} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-remock'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  "" const ContainerCondition = React.createContext(true); reactRemock.mock(/Connect\(\w\)/, (type, props, children) =&gt; ( &lt;ContainerCondition.Consumer&gt; { opened =&gt; ( opened ? ( // ""     &lt;ContainerCondition.Provider value={false}&gt; {createElement(type, props, ...children)} &lt;ContainerCondition.Provider&gt; ) // "" : null )} &lt;/ContainerCondition.Consumer&gt; )</span></span></code> </pre> <br><p>  Wieder - ein paar Leinen und Zahnr√§der entfernt. </p><br><h2 id="itogo">  Insgesamt </h2><br><p>  Im letzten Jahr wurde das Testen von React-Komponenten komplizierter, insbesondere f√ºr das Mounten. Sie m√ºssen alle 10 Anbieter und Kontexte √ºberschreiben, und es wird immer schwieriger, die richtige Komponente im richtigen Stil zu testen. Es gibt zu viele Seile, um sie zu ziehen. <br>  Jemand spuckt und geht in die flache Welt.  Jemand winkte bei Unit-Tests mit den H√§nden und √ºbertrug alles auf Cypress (Gehen wie Gehen!). </p><br><p>  Jemand anderes dr√ºckt einen Finger auf die Reaktion und sagt, dass dies <em>algebraische Effekte sind</em> und Sie tun k√∂nnen, was Sie wollen.  Alle obigen Beispiele beziehen sich im Wesentlichen auf die Verwendung dieser <em>algebraischen Effekte</em> und Verspottungen.  F√ºr mich und DI sind das Moki. </p><br><blockquote>  PS: Dieser Beitrag wurde als Antwort <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf Kommentare in React / RFC √ºber die Tatsache geschrieben, dass das React-Team alles und alle Polymere dort kaputt gemacht hat</a> <br>  PPS: Dieser Beitrag ist eigentlich eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sehr kostenlose √úbersetzung eines anderen</a> <br>  PPPS: Um eine echte Isolation zu erreichen, sollten Sie sich im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Allgemeinen das Rewiremock ansehen</a> </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de434830/">https://habr.com/ru/post/de434830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de434818/index.html">Ein Unfall im CenturyLink Data Center verursachte 911 Service-Ausf√§lle</a></li>
<li><a href="../de434822/index.html">PRC-Programm "Autos mit neuen Energiequellen." Was 2019 zu erwarten ist</a></li>
<li><a href="../de434824/index.html">Polit-Elektrotechnik. Modellierung gesellschaftspolitischer Prozesse durch Stromkreise</a></li>
<li><a href="../de434826/index.html">Das Bettfeld p√ºnktlich oder 5 Anzeichen von versteckten Problemen im Team</a></li>
<li><a href="../de434828/index.html">Werde ein Profi. N√ºtzliche Gewohnheiten von UX-Designern</a></li>
<li><a href="../de434836/index.html">Wunderbare Versionsanmerkung in JPA</a></li>
<li><a href="../de434838/index.html">Erstellen eines Bots zur Teilnahme am CodeBall des russischen AI Cup 2018</a></li>
<li><a href="../de434840/index.html">Wie habe ich "Your Diary" gemacht - oder die Situation auf dem Markt f√ºr elektronische Tageb√ºcher</a></li>
<li><a href="../de434842/index.html">Stadtfarmen k√∂nnen extrem effektiv sein, aber momentan nicht</a></li>
<li><a href="../de434844/index.html">Wiederherstellung der kognitiven F√§higkeiten von 100 Patienten (√úbersetzung eines Artikels von Dale Bredesen)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>