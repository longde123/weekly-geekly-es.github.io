<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë° ‚ÑπÔ∏è ‚ûó Reemplazo de un presostato mec√°nico por uno digital (para propietarios de pozos) üìô üíÜüèø üßïüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cuando me enfrent√© a ajustar un interruptor de presi√≥n mec√°nico con resortes, me di cuenta de que necesitaba una llamada a un amigo, o m√°s bien a mi p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reemplazo de un presostato mec√°nico por uno digital (para propietarios de pozos)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408933/"> Cuando me enfrent√© a ajustar un interruptor de presi√≥n mec√°nico con resortes, me di cuenta de que necesitaba una llamada a un amigo, o m√°s bien a mi padre, ya que el mecanismo, aunque bien pensado y tolerante a fallas, est√° en un nivel alto, pero hay un inconveniente de incluso un ajuste √∫nico en la cara. . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/13e/24d/072/13e24d0724dea32524577289dea261f6.jpg" alt="imagen"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/953/7be/772/9537be77296c01b41348a4e722cef8bf.jpg" alt="imagen"></div><br>  Pido un corte, es m√°s interesante all√≠;) <br><a name="habracut"></a><br>  Lo resolv√≠ e incluso logr√© ajustarlo, pero dediqu√© tiempo y nervios a esto.  Luego me di cuenta de que un rel√© digital ser√≠a genial, solo presion√© los botones y configur√© el deseado.  Por supuesto, muchos pueden condenarme en varios aspectos: <br><br>  "Eres un tonto al no poder lidiar con el interruptor de presi√≥n m√°s simple y dos resortes". <br>  - La mec√°nica dirige, funcionar√° para siempre. <br>  - ¬øPor qu√© hay algo que regular ?: una vez que un plomero fij√≥ para XX * (tasa de pa√≠s) rublos <br><br>  Sin problemas, puede continuar la lista durante mucho tiempo, pero por la naturaleza de su ingenier√≠a, me gustar√≠a desarrollar y mejorar todo lo que me rodea, y no torcer los resortes y pensar cuando los contactos del rel√© mec√°nico se queman all√≠ y el rel√© de protecci√≥n de la bomba t√©rmica comienza a funcionar cuando todo est√° en el jab√≥n: D, e incluso mejor tu esposa :) <br><br>  Debemos rendir homenaje, rel√© mec√°nico que he estado trabajando durante el cuarto a√±o, y con √©l (uf uf uf) Grave todav√≠a no pas√≥ nada, s√≥lo ten√≠an que reconstruir, limpiar los contactos, y comenzar a despertar el "click!"  se esforzaron un poco en el garaje y ... asustaron a mi rat√≥n, por lo que tuvo que huir. <br><br><div class="spoiler">  <b class="spoiler_title">Escapar</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/-fVq93IuNN0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  Como soy aficionado a la automatizaci√≥n y he pasado de 1 cable a arduino a trav√©s de esp, puedo y hago varias manualidades en la casa, o m√°s bien dispositivos, para hacer la vida m√°s f√°cil.  El c√≠rculo de amigos conoce la lista de proyectos que intento completar e implementar, pero no hay absolutamente ning√∫n tiempo para eso.  Esa construcci√≥n del ba√±o aparecer√° durante todo el verano (750 horas), luego la nieve se acumular√° :), ¬°y aqu√≠ est√° el A√±o Nuevo en la nariz! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/d20/61c/46b/d2061c46b4400e77cb2c657f745003d9.jpg" alt="imagen"></div><br>  Muchas personas tambi√©n me ‚Äúaman‚Äù, especialmente desde la esfera de TI.  Pero esto es solo divertido, la vida es algo interesante y sin ella de ninguna manera.  Tambi√©n muchas gracias a todos los que me apoyan, sin sus amables palabras, la unidad no ser√≠a la misma.  Gracias a mi esposa por entender el amor de mis tablas) <br><br>  De la letra, saltamos a la realidad.  Me volv√≠ en busca de un rel√© digital y me di cuenta de que era muy dif√≠cil en esta direcci√≥n, ya sea en el extranjero por $ 100 y nada en absoluto como me gustar√≠a ... o un mec√°nico por $ 15.  Lo traigo en $, ya que desde hace tiempo se sabe que si cambiamos a $, incluso las abuelas no se ba√±ar√≠an, como con las monedas.  Pero soy un brib√≥n: la casa est√° conectada a Internet, pero no hay interruptor de presi√≥n, ¬°loco! <br><br>  Tema para trolls: comenc√© a trabajar con Arduino de origen chino, no los originales, pero los chinos, funcionan de la misma manera, donde hay errores menores, pero no me lastiman de tal manera que arrojan lava de negativo y sacuden esp8266, que muere de est√°tica m√°s r√°pido que lo conectar√° a su computadora, e incluso con una potencia de 3.3, que necesita ir a buscar), a menos que sea NodeMCU, lo que adoro. <br><br>  Me encanta esp8266 y Arduino y las personas, pero para poder sentarme r√°pidamente a armar un dispositivo de automatizaci√≥n que funcione y sea ESTABLE, arduino es una cosa indispensable + El lenguaje C de cableado ayuda mucho a darse cuenta r√°pidamente de lo que se requiere.  (Aqu√≠, nadie reproche de que usted ha escrito en el lenguaje de programaci√≥n Lua freno).  esp8266 (mi opini√≥n): bueno donde no es necesario medir el ADC y se necesita Internet.  Aunque su "combusti√≥n \ humedad" es muy decepcionante. <br><br>  Volvemos a nuestras ovejas, es decir, un relevo :) <br><br>  Como resultado, encontr√© un sensor en China por $ 5, con un ADC de 0-5 V y decid√≠ probarlo.  Aun as√≠, encend√≠ est√∫pidamente para aplicarlo y ensamblar el dispositivo.  Comenzaron fantas√≠as er√≥ticas inmediatas, c√≥mo parpadear√≠an los LED) y se presionar√≠an los botones para el ajuste, y los preciados d√≠gitos se encender√°n en la ic√≥nica pantalla azul china y todo esto funcionar√° con presi√≥n real en nuestro peine. <br><br>  Lo pens√©, lo deline√©, lo dibuj√©, lo plane√©, lo orden√© y comenc√© a escribir el c√≥digo hasta que la er√≥tica pas√≥ con pensamientos. <br><br>  Cuando lleg√≥ el sensor, me di cuenta de que el sensor est√° muy bien hecho. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/cac/9f7/0e4/cac9f70e428dc26b50ef47c3f69e21a3.jpg" alt="imagen"></div><br>  Adem√°s, me di cuenta de que comienza a mostrar datos no desde cero, sino de 0.5V a 4.5V.  de 0 a 12 bar.  Estaba muy contento, porque me complaci√≥ reconocer la singularidad de este dispositivo, puede rastrear cuando el sensor muere y no muestra el codiciado 0.5 en la salida. <br><br>  Inserci√≥n del sensor en el sistema actual, dejando la mec√°nica "por si acaso". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/953/ff1/9a8/953ff19a89efd97c7de0c335a0d841a0.jpg" alt="imagen"></div><br>  Una cosa es triste, no hab√≠a datos sobre el sensor, c√≥mo calcular sus lecturas, pero como hab√≠a una l√≠nea lineal en el gr√°fico, tuve que (avergonzado, lo admito) para abrir el libro de texto de √ÅLGEBRA y aprender de nuevo, recordar c√≥mo construyen una relaci√≥n lineal directa en ecuaci√≥n :) por dos puntos y sobre un milagro, r√°pidamente obtuve (puede avergonzarme) una f√≥rmula simple apreciada en la cual, despu√©s de convertir la se√±al de ADC a VOLTIOS, entend√≠ cu√°nta presi√≥n tengo en Bar.  Dado que el sensor mismo emiti√≥ de 0 a 1.2Mpa, no es dif√≠cil traducirlo a Bar, sabiendo que: <br><br>  1 Pa = 1.0E-5 bar <br>  es decir, 1200000Pa = 12Bar <br>  Como la presi√≥n de la bomba no supera los 4 bares, ¬°este sensor es suficiente para los ojos! <br><br>  Luego tom√© el Arduino Uno: estaba demasiado extendido, generalmente lo uso para un dise√±o r√°pido con bisagras, pruebas, y luego uso el Arduino Nano, ya que carece del kit de cuerpo izquierdo y su tama√±o es 3 veces m√°s peque√±o.  Y s√≠, los Arduinistas de origen chino me perdonar√°n, lament√© verla inactiva, ¬°debo dejarla entrar al dispositivo!  Pens√© y compr√© una peque√±a caja de pl√°stico IP55, ¬°hice un agujero debajo de la pantalla, que compr√© hace 4 a√±os!  Karl!  Y luego no me di cuenta de que este LCD 16 * 2 entrar√≠a en un negocio tan √∫til.  Tom√© 2 botones autom√°ticos en el mercado de autom√≥viles, solde los cables y ni siquiera dise√±√© la placa por separado, como lo hago para Nano, ya que Uno es est√∫pidamente grande y no es para nada para tales fines. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a6e/c78/d35/a6ec78d35d2e73c21da5ab9f53bfbd25.jpg" alt="imagen"><br><br>  El algoritmo es bastante simple y a√∫n est√° en pruebas de campo, el c√≥digo del proyecto para una mirada m√°s cercana se encuentra <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  No me da verg√ºenza publicarlo si hay cr√≠ticas constructivas, estoy listo para hacer cambios, ya que est√° abierto a cualquier discusi√≥n. <br><br>  Trat√© de incorporar los siguientes principios en el algoritmo: <br><br>  - Inicializaci√≥n de datos: al inicio, todas las variables para la operaci√≥n son verificadas e iniciadas <br>  - Sondeo inicial del sensor: se verifica si el sensor no ha fallado (en caso de falla, el rel√© de la bomba se corta por si acaso) los datos se calculan y se transfieren a la presi√≥n actual en el peine (peine de distribuci√≥n, al que est√°n conectados los vecinos + entrada de la bomba + acumulador hidr√°ulico) si todo est√° dentro de la presi√≥n establecida superior e inferior, entonces continuamos escuchando y calculando los datos <br>  - Los datos se muestran visualmente en la pantalla como: <br><br>  presi√≥n m√°s baja - presi√≥n actual - presi√≥n alta <br>  √≠ndice de ca√≠da de presi√≥n - [bloques, muestran la presi√≥n en el sistema] <br><br>  Esto le permite evaluar r√°pidamente situevina lo que est√° sucediendo. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a16/a6f/711/a16a6f7117f1602f238acc0115cba914.jpg" alt="imagen"><br><br>  - Si la presi√≥n actual es inferior a INFERIOR: un rel√© de estado s√≥lido se corta en 15 A (probado durante a√±os) y la bomba se enciende y entrega agua de forma silenciosa, r√°pida, sin chispas ni clics.  La presi√≥n SUPERIOR dispara el rel√©.  Bomba nunca se enciende, y aseg√∫rese de apagar si las lecturas de los sensores que van m√°s all√° de la raz√≥n.  Esto es seguridad. <br><br>  - Calculo el √≠ndice de ca√≠da de presi√≥n cuando la mitad de la presi√≥n permanece en el peine y las anteriores y las actuales se comprueban cada 10 segundos, si la diferencia es menor que el valor predeterminado de 0.05, entonces el √≠ndice actual cambia y la bomba se ENCIENDE, es decir, la l√≥gica es el consumo r√°pido de agua y eso Para predecir la inclusi√≥n de la bomba, uso esta l√≥gica.  La l√≥gica no funciona hasta ahora al 100%, ya que todav√≠a estoy probando este momento, hay fallas asociadas con el tiempo millis () de los arduins, me molesta un poco, pero encontrar√© una soluci√≥n para un c√°lculo claro.  La l√≥gica se activa al principio, y luego el √≠ndice cae a 0.01 y la l√≥gica ya no funciona, pero esto no afecta el encendido y apagado de la bomba.  Aqu√≠ puede holivit sobre el tema "la bomba debe encenderse un cierto n√∫mero de veces por hora y no m√°s", tiene derecho a esto), no discutir√©, este tema est√° siendo analizado. <br><br>  - hay botones laterales que le permiten establecer el umbral BAJO y ALTO para encender y apagar la bomba DIN√ÅMICAMENTE, sin reiniciar, simplemente est√∫pidamente sobre la marcha - mire la pantalla y presione los botones laterales ...  conveniente en!  los datos se escriben inmediatamente en EEPPROM y cuando se enciende la unidad, se carga desde all√≠ (esta es una memoria tan constante para escribir n√∫meros del tipo de 0 a 255 bytes, no es suficiente para peque√±os caprichos).  Hay un punto, sin embargo, que los n√∫meros de coma flotante son tan dif√≠ciles y hemorr√°gicos que simplemente se decidi√≥ de mi parte de esta manera: sabiendo que el n√∫mero x.x0 es una presi√≥n de tipo flotante, puede convertirse f√°cilmente en byte si multiplica por 10 y escribir en la memoria, es decir: ejemplo: 1.80 * 10 = 18 - despu√©s de la multiplicaci√≥n, el n√∫mero flotante descarta el √∫ltimo cero autom√°ticamente y obtenemos un n√∫mero que se ajusta al tipo de byte, cuando leemos, lo dividimos por 10.0 y obtenemos la forma opuesta para trabajar en nuestro sistema y tipo flotador. <br><br>  - Todo lo bueno estar√° disponible para "solo lectura" fuera del hogar, lo que nos permitir√° comprender la situaci√≥n con presi√≥n no solo en la presi√≥n arterial, sino tambi√©n en las tuber√≠as. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e04/3c9/963/e043c99632033b3dc2fe5bf4479c726f.jpg" alt="imagen"><br><br>  Bueno, eso es todo, est√° perdonado, quien se preocupe por los detalles del c√≥digo, los TIPOS est√∫pidos de datos y los detalles √≠ntimos de la carga de datos desde la memoria, omita esto, porque, sabiendo que hay personas de la esfera de TI, har√°n todo tipo de preguntas o viceversa, se reir√°n de mis algoritmos simples que no usan AI \ ML de moda y otros algoritmos de datos geniales y geniales.  Esperemos que los ingenieros tambi√©n comprendan otras partes relacionadas con la parte mec√°nica. <br><br>  En general, la conclusi√≥n es la siguiente: puedes hacer todo, puedes hacerlo f√°cilmente, hacerlo con inter√©s, y como dijo una vez mi comentarista favorito: puedes ser un adulto y "jugar con los juguetes de los ni√±os". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/b98/8d9/760/b988d9760525a615924a2c77c37bb68f.jpg" alt="imagen"></div><br><div class="spoiler">  <b class="spoiler_title">ensayos de campo</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/cn3C7iSAZ1k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  ¬°Tu gorra, automatizaci√≥n, chico capaz y que tengas un buen d√≠a! <br><br>  Malezas: <br><br>  - Contin√∫o probando el √≠ndice de ca√≠da de presi√≥n para inicio prematuro <br>  - Arduino uno (China) - problemas con el temporizador millis () han salido a la luz - Comprobar√© si hay arduino nano (nunca ocurri√≥ antes, supongo que un modelo curvo) (no lo obtuve, as√≠ que no lo hago) <br>  - El error se declara 1.5% - desde 1.2Bar - esto es 0.18Bar - de hecho - Tengo un 0.3 en relaci√≥n con mi medidor de presi√≥n, pero no s√© cu√°nto miente ... as√≠ que 2% permite el error max - puedes poner el algoritmo (como yo) y en cualquier momento sin m√°s o menos como la verdad.  No lance sat√©lites, lo har√°) <br><br>  <b>UPD:</b> una etiqueta de precio en la regi√≥n de $ 15-18 fue el resultado para el producto. <br><br>  Feliz a√±o nuevo  Deje que todos sus planes se hagan realidad, se construir√°n BA√ëOS, habr√° CALOR en la casa y toda su familia estar√° con usted.  Que solo haya buenas noticias en el nuevo a√±o. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es408933/">https://habr.com/ru/post/es408933/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es408923/index.html">"¬°Gracias por la ayuda, camarada!" Acelerando las PC de juegos AMD Ryzen</a></li>
<li><a href="../es408925/index.html">Steampunk Hi-Fi: un pasado alternativo para equipos de sonido</a></li>
<li><a href="../es408927/index.html">Steam dej√≥ de aceptar pagos en Bitcoin debido a la alta volatilidad de la criptomoneda</a></li>
<li><a href="../es408929/index.html">Los desarrolladores de algunos juegos m√≥viles extraen criptomonedas en los tel√©fonos inteligentes de los usuarios</a></li>
<li><a href="../es408931/index.html">Analisis del portatil ASUS N580VD</a></li>
<li><a href="../es408935/index.html">Antena inteligente para redes LTE</a></li>
<li><a href="../es408939/index.html">Informe final sobre el proyecto satelital Mayak</a></li>
<li><a href="../es408941/index.html">Conector de diagn√≥stico OBD-II como interfaz para IoT</a></li>
<li><a href="../es408943/index.html">Lo que el aburrimiento le hace a una persona: la ciencia de la conciencia errante</a></li>
<li><a href="../es408945/index.html">El millonario an√≥nimo de bitcoin entrega $ 86 millones a organizaciones ben√©ficas.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>