<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèΩ üìå üñáÔ∏è Fonctionnalit√©s de hi√©rarchisation automatique dans le stockage Qsan XCubeSAN üöæ üêøÔ∏è üöô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En continuant √† consid√©rer les technologies d'acc√©l√©ration des op√©rations d'E / S appliqu√©es aux syst√®mes de stockage, qui ont commenc√© dans l' articl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fonctionnalit√©s de hi√©rarchisation automatique dans le stockage Qsan XCubeSAN</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skilline/blog/447520/"><p> En continuant √† consid√©rer les technologies d'acc√©l√©ration des op√©rations d'E / S appliqu√©es aux syst√®mes de stockage, qui ont commenc√© dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article pr√©c√©dent</a> , on ne peut s'emp√™cher de s'attarder sur une option aussi populaire que la hi√©rarchisation automatique.  Bien que l'id√©ologie de cette fonction soit tr√®s proche de celle de divers fabricants de syst√®mes de stockage, nous consid√©rerons les caract√©ristiques de l'impl√©mentation de la d√©chirure en utilisant le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">syst√®me de stockage</a> Qsan comme exemple. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ku/_v/ya/ku_vyabwv-ny-wbrnh1cbrvuetg.png"></div><a name="habracut"></a><br><p>  Malgr√© la vari√©t√© des donn√©es stock√©es sur le stockage, ces m√™mes donn√©es peuvent √™tre divis√©es en plusieurs groupes en fonction de leur pertinence (fr√©quence d'utilisation).  Les donn√©es les plus populaires ("chaudes") sont extr√™mement importantes pour organiser l'acc√®s le plus rapide, tandis que le traitement des donn√©es moins populaires ("froides") peut √™tre effectu√© avec une priorit√© inf√©rieure. </p><br><p>  Pour organiser un tel sch√©ma, la fonction de d√©chirement est utilis√©e.  Dans ce cas, la matrice de donn√©es ne se compose pas du m√™me type de disques, mais de plusieurs groupes de lecteurs qui forment diff√©rents niveaux de stockage de niveau.  √Ä l'aide d'un algorithme sp√©cial, les donn√©es sont automatiquement d√©plac√©es entre les niveaux afin d'assurer des performances finales maximales. </p><br><img align="right" width="50%" src="https://habrastorage.org/webt/uj/yv/3w/ujyv3wfwhctis7zvo6jdhuzftz8.png"><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les syst√®mes de</a> stockage <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qsan</a> prennent en charge jusqu'√† trois niveaux de stockage: </p><br><ul><li>  Niveau 1: Performances maximales SSD </li><li>  Niveau 2: disque dur SAS 10K / 15K, hautes performances </li><li>  Niveau 3: HDD NL-SAS 7.2K, capacit√© maximale </li></ul><br><br><p>  Le pool de hi√©rarchisation automatique peut contenir les trois niveaux et seulement deux dans n'importe quelle combinaison.  √Ä l'int√©rieur de chaque niveau, les disques sont combin√©s en groupes RAID familiers.  Pour une flexibilit√© maximale, le niveau RAID de chaque niveau peut √™tre diff√©rent.  Autrement dit, rien ne vous emp√™che d'organiser une structure comme 4x SSD RAID10 + 6x HDD 10K RAID5 + 12 HDD 7.2K RAID6 </p><br><p>  Apr√®s avoir cr√©√© des volumes (disques virtuels) dans le pool de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hi√©rarchisation automatique</a> , la collecte en arri√®re-plan de statistiques sur toutes les op√©rations d'E / S commence.  Pour ce faire, l'espace est ¬´d√©coup√©¬ª en blocs de 1 Go (ce que l'on appelle le sous-LUN).  Chaque fois que vous acc√©dez √† un tel bloc, un coefficient lui est attribu√©. Puis, au fil du temps, ce coefficient diminue.  Apr√®s 24 heures, en l'absence de demandes d'entr√©e / sortie pour cet appareil, il sera d√©j√† √©gal √† 0,5 et continuera de baisser apr√®s chaque heure suivante. </p><br><p>  √Ä un certain moment (par d√©faut tous les jours √† minuit), les r√©sultats collect√©s sont class√©s par activit√© sous LUN en fonction de leurs coefficients.  Sur cette base, il est d√©cid√© quels blocs se d√©placer et dans quelle direction.  Apr√®s quoi, en fait, il y a une d√©localisation des donn√©es entre les niveaux. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/0z/gc/do/0zgcdoi7cuq1kgygu2fndtthe7e.png"></div><br><p>  Le syst√®me de stockage Qsan met parfaitement en ≈ìuvre le contr√¥le du processus de d√©chirement √† l'aide d'une vari√©t√© de param√®tres, ce qui vous permettra de configurer de mani√®re tr√®s flexible les performances finales de la matrice. </p><br><p>  Pour d√©terminer l'emplacement initial des donn√©es et la direction prioritaire de leur mouvement, des strat√©gies sont utilis√©es qui sont d√©finies s√©par√©ment pour chaque volume: </p><br><ul><li>  <b>Auto Tiering</b> - la politique par d√©faut, le placement initial et la direction des mouvements sont d√©termin√©s automatiquement, c.-√†-d.  Les donn√©es ¬´chaudes¬ª ont tendance √† atteindre le niveau le plus √©lev√© et les donn√©es ¬´froides¬ª diminuent.  Le placement initial est s√©lectionn√© en fonction de l'espace disponible √† chaque niveau.  Mais vous devez comprendre que le syst√®me cherche principalement √† maximiser l'utilisation des disques les plus rapides.  Par cons√©quent, s'il y a de l'espace libre, les donn√©es seront plac√©es aux niveaux sup√©rieurs.  Cette strat√©gie convient √† la plupart des sc√©narios lorsque la demande de donn√©es ne peut pas √™tre pr√©dite √† l'avance. </li><li>  <b>Commencez haut, puis Auto Tiering</b> - la diff√©rence par rapport √† la pr√©c√©dente se trouve uniquement dans l'emplacement de donn√©es d'origine (au niveau le plus rapide) </li><li>  <b>Le plus haut niveau</b> - les donn√©es s'efforcent toujours d'occuper le niveau le plus rapide.  Si dans le processus, ils sont d√©plac√©s vers le bas, alors d√®s que possible, ils sont recul√©s.  Cette politique convient aux donn√©es qui n√©cessitent l'acc√®s le plus rapide. </li><li>  <b>Niveau minimum</b> - les donn√©es s'efforcent toujours d'occuper le niveau le plus bas.  Cette politique est parfaite pour les donn√©es rarement utilis√©es (par exemple, les archives). </li><li>  <b>Aucun mouvement</b> - le syst√®me d√©termine automatiquement l'emplacement initial des donn√©es et ne les d√©place pas.  Cependant, des statistiques continuent d'√™tre collect√©es au cas o√π leur r√©installation serait ult√©rieurement n√©cessaire. </li></ul><br><p>  Il convient de noter qu'en d√©pit du fait que les politiques sont d√©finies lors de la cr√©ation de chaque volume, elles peuvent √™tre modifi√©es √† plusieurs reprises √† la vol√©e pendant le cycle de vie du syst√®me. </p><br><p>  En plus des strat√©gies pour le m√©canisme de d√©chirement, la fr√©quence et le rythme des mouvements de donn√©es entre les niveaux sont √©galement configur√©s.  Vous pouvez d√©finir une heure de mouvement sp√©cifique: quotidiennement ou certains jours de la semaine, ainsi que r√©duire l'intervalle de collecte des statistiques √† plusieurs heures (la fr√©quence minimale est de 2 heures).  S'il est n√©cessaire de limiter le temps d'ex√©cution de l'op√©ration de d√©placement de donn√©es, vous pouvez d√©finir le d√©lai (fen√™tre de d√©placement).  De plus, la vitesse de relocalisation est √©galement indiqu√©e - 3 modes: rapide, moyen, lent. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/3n/rc/ly/3nrcly0rrc6zp4g2emifvkhzy7o.png"></div><br><p>  En cas de besoin de relocalisation imm√©diate des donn√©es, il est possible de l'ex√©cuter en mode manuel √† tout moment sur commande de l'administrateur. </p><br><p>  Il est clair que plus les donn√©es seront d√©plac√©es entre les niveaux plus souvent et plus rapidement, plus le syst√®me de stockage s'adaptera aux conditions de fonctionnement actuelles.  Mais en m√™me temps, il convient de se rappeler que le d√©placement est une charge suppl√©mentaire (principalement sur les disques), donc absolument pas besoin de ¬´piloter¬ª les donn√©es sans besoin extr√™me.  Il est pr√©f√©rable de planifier le mouvement pour des moments de charge minimale.  Si le travail de stockage n√©cessite constamment de hautes performances 24h / 24 et 7j / 7, alors il vaut la peine de r√©duire le taux de relocalisation au minimum. </p><br><p>  L'abondance des param√®tres de d√©chirement plaira sans aucun doute aux utilisateurs avanc√©s.  Cependant, pour ceux qui sont confront√©s √† une telle technologie pour la premi√®re fois, il n'y a rien √† craindre.  Il est tout √† fait possible de faire confiance aux param√®tres par d√©faut (politique de hi√©rarchisation automatique, se d√©pla√ßant √† une vitesse maximale une fois par jour la nuit) et, √† mesure que les statistiques s'accumulent, d'ajuster certains param√®tres pour obtenir le r√©sultat souhait√©. </p><br><p>  En comparant le peering avec une technologie non moins populaire pour augmenter les performances comme la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mise en cache SSD</a> , il faut garder √† l'esprit les diff√©rents principes de leurs algorithmes. </p><br><table><tbody><tr><th></th><th>  Mise en cache SSD </th><th>  Nivellement automatique </th></tr><tr><td>  <b>Taux de d√©but d'effet</b> </td><td>  Presque instantan√©ment.  Mais un effet notable seulement apr√®s que le cache se "r√©chauffe" (minutes-heures) </td><td>  Apr√®s avoir collect√© des statistiques (√† partir de 2 heures, id√©alement une journ√©e), plus le temps de d√©placer les donn√©es </td></tr><tr><td>  <b>Dur√©e de l'effet</b> </td><td>  Jusqu'√† ce que les donn√©es soient remplac√©es par une nouvelle portion (minutes-heures) </td><td>  Bien que la demande de donn√©es soit pertinente (jour ou plus) </td></tr><tr><td>  <b>Indications d'utilisation</b> </td><td>  Augmentez instantan√©ment la productivit√© pendant une courte p√©riode (bases de donn√©es, environnements de virtualisation) </td><td>  Productivit√© accrue sur une longue p√©riode (fichiers, web, serveurs de messagerie) </td></tr></tbody></table><br><p>  En outre, l'une des caract√©ristiques de la d√©chirure est la possibilit√© de l'utiliser non seulement pour des sc√©narios comme ¬´SSD + HDD¬ª, mais aussi ¬´HDD rapide + HDD lent¬ª ou les trois niveaux en g√©n√©ral, ce qui est impossible en principe si la mise en cache SSD est utilis√©e. </p><br><h2>  Test </h2><br><p>  Pour tester le fonctionnement des algorithmes de d√©chirement, nous avons effectu√© un test simple.  Un pool de deux niveaux de SSD (RAID 1) + HDD 7.2K (RAID1) a √©t√© cr√©√©, sur lequel le volume avec la politique de "niveau minimum" a √©t√© plac√©.  C'est-√†-dire  les donn√©es doivent toujours se trouver sur des disques lents. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/wz/ao/sh/wzaosh2xtpg6udoo-oj-vthkifg.png"></div><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/rg/rh/sr/rgrhsrmqbcxh9owogzvjwpziygy.png"></div><br><p>  <i>L'interface de contr√¥le montre clairement le placement des donn√©es entre les niveaux</i> </p><br><p>  Apr√®s avoir rempli le volume de donn√©es, nous avons modifi√© la politique de placement en Auto Tiering et ex√©cut√© le test IOmeter. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ij/16/ae/ij16ae-y3lhjz-drv-layz8bx6o.png"></div><br><p>  Apr√®s plusieurs heures de test, lorsque le syst√®me a pu accumuler des statistiques, le processus de relocalisation a commenc√©. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/65/ei/vv/65eivv0c2j-6wztcum3b-ruw6ey.png"></div><br><p>  √Ä la fin du mouvement des donn√©es, notre volume de test a compl√®tement ramp√© jusqu'au niveau sup√©rieur (SSD). </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/6z/zn/uo/6zznuo9ksohljxxge7inru3fqz4.png"></div><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/06/lm/cc06lmfovo0wyeclc2uhzuwxt5g.png"></div><br><h3>  Le verdict </h3><br><blockquote>  La hi√©rarchisation automatique est une merveilleuse technologie qui vous permet d'augmenter la productivit√© du syst√®me de stockage avec un minimum de co√ªts de mat√©riel et de temps en raison de l'utilisation plus intensive des lecteurs haute vitesse.  En <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce qui</a> concerne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qsan, le</a> seul investissement est une licence, qui est acquise une fois pour toutes sans limitation de volume / nombre de disques / √©tag√®res / etc.  Cette fonctionnalit√© est √©quip√©e de param√®tres si riches qu'elle peut satisfaire presque toutes les t√¢ches professionnelles.  Et la visualisation des processus dans l'interface vous permettra de g√©rer efficacement l'appareil. <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447520/">https://habr.com/ru/post/fr447520/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447508/index.html">Sergey Zonov: ¬´J'ai fait le premier Spectrum parce que j'√©tais int√©ress√©¬ª</a></li>
<li><a href="../fr447510/index.html">GeekUniversity ouvre ses inscriptions au d√©partement Design</a></li>
<li><a href="../fr447512/index.html">Et qui a fait √ßa? Automatisez l'audit de la s√©curit√© des informations</a></li>
<li><a href="../fr447514/index.html">7 startups int√©ressantes dans l'IoT</a></li>
<li><a href="../fr447516/index.html">Comment nous avons overclock√© CAD COMPASS-3D ‚Üí Partie 2</a></li>
<li><a href="../fr447522/index.html">Quelles choses utiles peuvent √™tre extraites des journaux d'un poste de travail Windows</a></li>
<li><a href="../fr447526/index.html">Propre v√©lo pour synchroniser MariaDB et Sphinx</a></li>
<li><a href="../fr447528/index.html">Qui est responsable de la qualit√©?</a></li>
<li><a href="../fr447530/index.html">OceanLotus: mise √† jour Malvari pour macOS</a></li>
<li><a href="../fr447532/index.html">Splunk Universal Forwarder dans le Docker en tant que rassembleur de journaux syst√®me</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>