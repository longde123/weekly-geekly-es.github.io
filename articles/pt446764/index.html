<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå∞ ü§üüèº üçö WASI Standard: Iniciar o WebAssembly Al√©m da Web üë¶üèø ‚¨ÖÔ∏è üòπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em 27 de mar√ßo, anunciamos na Mozilla a padroniza√ß√£o da WASI, a interface do sistema WebAssembly (interface do sistema WebAssembly). 

 Motivo: os des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>WASI Standard: Iniciar o WebAssembly Al√©m da Web</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446764/">  Em 27 de mar√ßo, anunciamos na Mozilla a padroniza√ß√£o da WASI, a interface do sistema WebAssembly (interface do sistema WebAssembly). <br><br>  <b>Motivo: os</b> desenvolvedores come√ßaram a usar o WebAssembly fora do navegador, porque o WASM fornece uma maneira r√°pida, escal√°vel e segura de executar o mesmo c√≥digo em todas as m√°quinas.  Mas ainda n√£o temos uma base s√≥lida para esse desenvolvimento.  Fora do navegador, voc√™ precisa de alguma maneira de se comunicar com o sistema, ou seja, a interface do sistema.  Mas a plataforma WebAssembly ainda n√£o a possui. <br><br>  <b>O qu√™: O</b> WebAssembly √© um montador de uma m√°quina conceitual e n√£o f√≠sica.  Funciona em v√°rias arquiteturas; portanto, √© necess√°ria uma interface do sistema para que um SO conceitual funcione em diferentes sistemas operacionais. <br><br>  Aqui est√° o que o WASI √©: √© uma interface do sistema para a plataforma WebAssembly. <br><a name="habracut"></a><br>  N√≥s nos esfor√ßamos para criar uma interface do sistema que se tornar√° uma verdadeira companheira do WebAssembly com portabilidade e seguran√ßa m√°ximas. <br><br>  <b>Quem:</b> Como parte da equipe de desenvolvimento do WebAssembly, organizamos um subgrupo que padronizar√° o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WASI</a> .  J√° reunimos parceiros interessados ‚Äã‚Äãe estamos procurando novos. <br><br>  Aqui est√£o algumas raz√µes pelas quais n√≥s, nossos parceiros e apoiadores consideramos isso importante: <br><br>  <b>Sean White, diretor de P&amp;D da Mozilla:</b> <br><blockquote>  "O WebAssembly j√° est√° mudando a maneira como as pessoas entregam novos tipos de conte√∫do atraente. Ajuda os desenvolvedores e criadores de conte√∫do.  At√© o momento, tudo funcionou atrav√©s dos navegadores, mas com o WASI, mais usu√°rios e mais dispositivos em locais diferentes se beneficiar√£o do WebAssembly. ‚Äù </blockquote><br>  <b>Tyler McMullen, CTO Fastly:</b> <br><blockquote>  ‚ÄúVemos o WebAssembly como uma plataforma para a execu√ß√£o r√°pida e segura de c√≥digo em uma nuvem de borda.  Apesar dos diferentes ambientes (borda e navegadores), gra√ßas ao WASI, voc√™ n√£o precisa portar o c√≥digo para cada plataforma ". </blockquote><br>  <b>Miles Borins, CTO do Comit√™ Diretor do N√≥:</b> <br><blockquote>  ‚ÄúO WebAssembly pode resolver um dos maiores problemas do Node: como obter velocidade quase nativa e reutilizar c√≥digos escritos em outros idiomas, como C e C ++, mantendo a portabilidade e a seguran√ßa.  A padroniza√ß√£o WASI √© o primeiro passo para isso. ‚Äù </blockquote><br>  <b>Lori Voss, cofundadora da npm:</b> <br><blockquote>  ‚ÄúO Npm est√° extremamente empolgado com os recursos potenciais do WebAssembly do ecossistema npm, pois facilita muito a execu√ß√£o do c√≥digo nativo nos aplicativos JavaScript do servidor.  Estamos ansiosos pelos resultados desse processo. ‚Äù </blockquote><br>  Portanto, este √© um grande evento! <br><br>  Atualmente, existem tr√™s implementa√ß√µes WASI: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wasmtime</a> , tempo de execu√ß√£o do Mozilla WebAssembly <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lucet</a> , tempo de execu√ß√£o Fastly WebAssembly <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">navegador polyfill</a> </li></ul><br>  Demonstra√ß√£o WASI em a√ß√£o: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ggtEJC0Jv8A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Em seguida, falaremos sobre a proposta da Mozilla sobre como essa interface do sistema deve funcionar. <br><br><h1>  O que √© uma interface do sistema? </h1><br>  Muitos dizem que idiomas como C fornecem acesso direto aos recursos do sistema.  Mas isso n√£o √© inteiramente verdade.  Na maioria dos sistemas, esses idiomas n√£o t√™m acesso direto a coisas como abrir ou criar arquivos.  Porque n√£o <br><br>  Porque esses recursos do sistema - arquivos, mem√≥ria e conex√µes de rede - s√£o importantes demais para estabilidade e seguran√ßa. <br><br>  Se um programa acidentalmente arruinar os recursos de outro, poder√° causar uma falha.  Pior, se um programa (ou um usu√°rio) invadir especificamente os recursos de outras pessoas, poder√° roubar dados confidenciais. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5a5/18d/7df/5a518d7df32af2b475047a1fc7c73958.png"><br><br>  Portanto, voc√™ precisa de uma maneira de controlar quais programas e usu√°rios podem acessar recursos.  Por um longo tempo, os desenvolvedores de sistemas criaram uma maneira de fornecer esse controle: an√©is de prote√ß√£o. <br><br>  Com an√©is de prote√ß√£o, o sistema operacional essencialmente estabelece uma barreira protetora em torno dos recursos do sistema.  Esse √© o n√∫cleo.  Somente ele pode executar opera√ß√µes como criar um arquivo, abrir um arquivo ou abrir uma conex√£o de rede. <br><br>  Os programas do usu√°rio s√£o executados fora do kernel no que √© chamado de espa√ßo do usu√°rio.  Se o programa quiser abrir o arquivo, ele dever√° solicitar o kernel. <br><br> <a href=""><img src="https://habrastorage.org/webt/1x/6e/vi/1x6evigsjy_wlsk1dk5gei1r5ky.png"></a> <br><br>  √â aqui que surge o conceito de uma chamada do sistema.  Quando um programa precisa solicitar alguma opera√ß√£o ao kernel, ele envia uma chamada de sistema.  O kernel verifica o usu√°rio que est√° entrando em contato e v√™ se ele tem permiss√£o para acessar esse arquivo. <br><br>  Na maioria dos dispositivos, a √∫nica maneira de acessar os recursos do sistema √© atrav√©s de chamadas do sistema. <br><br> <a href=""><img src="https://habrastorage.org/webt/td/1s/e7/td1se7jsbqiagsgy6nid_csyick.png"></a> <br><br>  O sistema operacional fornece acesso √†s chamadas do sistema.  Mas se cada sistema operacional tiver suas pr√≥prias chamadas de sistema, eles n√£o precisam escrever vers√µes diferentes do c√≥digo?  Felizmente n√£o.  O problema √© resolvido usando abstra√ß√£o. <br><br>  A maioria dos idiomas possui uma biblioteca padr√£o.  Ao codificar, o programador n√£o precisa saber para qual sistema ele escreve.  Apenas usa a interface.  Em seguida, ao compilar, sua cadeia de ferramentas escolhe qual implementa√ß√£o de interface usar para qual sistema.  Essa implementa√ß√£o usa fun√ß√µes da API do sistema operacional, portanto √© espec√≠fica a ela. <br><br>  √â aqui que o conceito de uma interface do sistema aparece.  Por exemplo, se voc√™ compilar <code>printf</code> para uma m√°quina Windows, ela usar√° a API do Windows.  Se compilado para Mac ou Linux, ele usa POSIX. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/587/cdc/5c0/587cdc5c03ff566a88a9794dc314fa72.png"><br><br>  No entanto, isso representa um problema para o WebAssembly.  Aqui n√£o sabemos para qual SO otimizar o programa, mesmo durante a compila√ß√£o.  Portanto, voc√™ n√£o pode usar a interface do sistema de nenhum SO dentro da implementa√ß√£o da biblioteca padr√£o no WebAssembly. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/443/c36/730/443c3673072b36942ff28f1992ad2095.png"></a> <br><br>  Eu j√° disse que o WebAssembly √© um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">montador de uma m√°quina conceitual</a> , n√£o uma m√°quina real.  Da mesma forma, o WebAssembly precisa de uma interface do sistema para um sistema operacional conceitual, e n√£o real. <br><br>  Mas j√° existem tempos de execu√ß√£o que podem executar o WebAssembly fora do navegador, mesmo sem essa interface do sistema.  Como eles fazem isso?  Vamos ver <br><br><h1>  Como o WebAssembly agora funciona fora do navegador? </h1><br>  A primeira ferramenta para gerar o c√≥digo do WebAssembly foi o Emscripten.  Emula na web uma interface espec√≠fica do sistema OS - POSIX.  Isso significa que o programador pode usar as fun√ß√µes da biblioteca C padr√£o (libc). <br><br>  Para isso, o Emscripten usa sua pr√≥pria implementa√ß√£o libc.  Ele √© dividido em duas partes: a primeira √© compilada em um m√≥dulo WebAssembly e a outra √© implementada no c√≥digo de cola JS.  Essa cola JS envia chamadas para o navegador que est√° falando com o sistema operacional. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/971/a59/857/971a59857adc62742dde95b413cc613a.png"><br><br>  A maior parte do c√≥digo inicial do WebAssembly √© compilada com o Emscripten.  Portanto, quando as pessoas come√ßaram a querer executar o WebAssembly sem um navegador, come√ßaram a executar o c√≥digo Emscripten. <br><br>  Portanto, nesses tempos de execu√ß√£o, voc√™ deve criar suas pr√≥prias implementa√ß√µes para todas as fun√ß√µes que estavam no c√≥digo JS-cola. <br><br>  Mas h√° um problema.  A interface fornecida pelo c√≥digo de cola JS n√£o foi projetada como uma interface padr√£o ou p√∫blica.  Por exemplo, para chamar como <code>read</code> na API normal, o c√≥digo de cola JS usa a <code>_system3(which, varargs)</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/52e/2de/7a8/52e2de7a84456993baeb32b1852c8da5.png"><br><br>  O primeiro par√¢metro <code>which</code> √© um n√∫mero inteiro que sempre corresponde ao n√∫mero no nome (no nosso caso 3). <br><br>  O segundo par√¢metro, <code>varargs</code> lista os argumentos.  Isso se chama <code>varargs</code> porque podemos ter um n√∫mero diferente de argumentos.  Mas o WebAssembly n√£o permite passar um n√∫mero vari√°vel de argumentos para uma fun√ß√£o.  Portanto, eles s√£o transmitidos atrav√©s da mem√≥ria linear, que √© insegura e mais lenta do que atrav√©s dos registradores. <br><br>  Para o Emscripten no navegador, isso √© normal.  Mas agora os tempos de execu√ß√£o veem isso como um padr√£o de fato, implementando suas pr√≥prias vers√µes da cola JS.  Eles emulam os detalhes internos da camada de emula√ß√£o POSIX. <br><br>  Isso significa que eles reimplementam o c√≥digo (por exemplo, passam argumentos como valores de heap), que faziam sentido devido √†s restri√ß√µes de Emscripten, mas n√£o existem restri√ß√µes nesses ambientes de tempo de execu√ß√£o. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/e31/181/541/e31181541c0b666d54e43d5c10756088.png"></a> <br><br>  Se estivermos construindo o ecossistema do WebAssembly nas pr√≥ximas d√©cadas, ele precisar√° de uma base s√≥lida, n√£o de muletas.  Isso significa que nosso padr√£o atual n√£o pode ser emula√ß√£o de emula√ß√£o. <br><br>  Mas que princ√≠pios se aplicam neste caso? <br><br><h1>  Quais princ√≠pios a interface do sistema WebAssembly deve aderir? </h1><br>  Dois princ√≠pios fundamentais do WebAssembly: <br><br><ul><li>  portabilidade <br></li><li>  seguran√ßa </li></ul><br>  Vamos al√©m do navegador, mas mantemos esses princ√≠pios fundamentais. <br><br>  No entanto, a abordagem POSIX e o sistema de controle de acesso Unix n√£o nos d√£o o resultado desejado.  Vamos ver qual √© o problema. <br><br><h3>  Portabilidade </h3><br>  O POSIX fornece portabilidade do c√≥digo fonte.  Voc√™ pode compilar o mesmo c√≥digo fonte com vers√µes diferentes da libc para computadores diferentes. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/255/eb7/51f/255eb751f342075453a6a30ea9f5bd98.png"></a> <br><br>  Mas o WebAssembly deve ir al√©m disso.  Precisamos compilar uma vez para rodar em v√°rios sistemas diferentes.  Precisamos de bin√°rios port√°teis. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/07e/06d/94c/07e06d94c4aca3ab4f5599c0c9ac3e10.png"></a> <br><br>  Isso simplifica a distribui√ß√£o de c√≥digo. <br><br>  Por exemplo, se os m√≥dulos N√≥ nativos s√£o gravados no WebAssembly, os usu√°rios n√£o precisam executar o node-gyp ao instalar aplicativos com m√≥dulos nativos, e os desenvolvedores n√£o precisam configurar e distribuir dezenas de arquivos bin√°rios. <br><br><h3>  Seguran√ßa </h3><br>  Quando o c√≥digo solicita que o sistema operacional fa√ßa entrada ou sa√≠da, o sistema operacional deve avaliar a seguran√ßa dessa opera√ß√£o, geralmente usando um sistema de controle de acesso baseado na propriedade e nos grupos. <br><br>  Por exemplo, um programa pede para abrir um arquivo.  O usu√°rio possui um conjunto espec√≠fico de arquivos aos quais ele tem acesso. <br><br>  Quando um usu√°rio inicia um programa, o programa inicia em nome desse usu√°rio.  Se o usu√°rio tiver acesso ao arquivo - ele √© o propriet√°rio ou faz parte de um grupo que tem acesso ao arquivo -, o programa ter√° o mesmo acesso. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d93/8b9/b2a/d938b9b2af13c33b21ab11057331c413.png"></a> <br><br>  Isso protege os usu√°rios uns dos outros, o que fazia sentido nos velhos tempos, quando muitas pessoas trabalhavam em um computador e os administradores controlavam o software.  Em seguida, a principal amea√ßa foram outros usu√°rios que examinaram seus arquivos. <br><br>  Tudo mudou.  Atualmente, os sistemas geralmente s√£o de usu√°rio √∫nico, mas usam c√≥digo de terceiros de confiabilidade desconhecida.  Agora, a principal amea√ßa vem do c√≥digo que voc√™ mesmo executa. <br><br>  Por exemplo, para a biblioteca em seu aplicativo, um novo mantenedor foi iniciado (como costuma ser o caso em c√≥digo aberto).  Ele pode ser um ativista sincero ... ou um intruso.  E se ele tiver acesso ao seu sistema (por exemplo, a capacidade de abrir qualquer arquivo e envi√°-lo pela rede), esse c√≥digo poder√° causar grandes danos. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/948/478/dc2/948478dc22fbebc0db26d763782be7a0.png"></a> <br>  <i><font color="gray"><b>Aplicativo suspeito</b> : trabalho para o usu√°rio Bob.</font></i>  <i><font color="gray">Posso abrir a carteira do Bitcoin?</font></i> <i><font color="gray"><br></font></i>  <i><font color="gray"><b>N√∫cleo</b> : Para Bob?</font></i>  <i><font color="gray">Claro!</font></i> <i><font color="gray"><br></font></i>  <i><font color="gray"><b>Aplicativo suspeito</b> : √ìtimo!</font></i>  <i><font color="gray">E a conectividade de rede?</font></i> <br><br>  √â por isso que o uso de bibliotecas de terceiros √© perigoso.  O WebAssembly fornece seguran√ßa de uma maneira diferente - atrav√©s da sandbox.  Aqui, o c√≥digo n√£o pode falar diretamente com o sistema operacional.  Mas ent√£o como acessar os recursos do sistema?  As caixas de prote√ß√£o do host (o navegador ou o wasm runtime) funcionam que o c√≥digo pode usar. <br><br>  Isso significa que o host em uma base de software limita a funcionalidade do programa, n√£o permitindo que voc√™ simplesmente aja em nome do usu√°rio, causando chamadas ao sistema com todos os direitos. <br><br>  Ter uma caixa de prote√ß√£o por si s√≥ n√£o torna o sistema seguro - o host ainda pode transferir toda a funcionalidade para a caixa de prote√ß√£o; nesse caso, ele n√£o fornece nenhuma prote√ß√£o.  Mas o sandbox fornece pelo menos uma oportunidade te√≥rica para os hosts criarem um sistema mais seguro. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/68f/bdc/2d7/68fbdc2d7bf44565e5923226bc2a9004.png"></a> <br>  <i><font color="gray"><b>WA</b> : Por favor, aqui est√£o alguns brinquedos seguros para interagir com o sistema operacional (safe_write, safe_read).</font></i> <i><font color="gray"><br></font></i>  <i><font color="gray"><b>Aplicativo suspeito</b> : Oh, droga ... onde est√° o meu acesso √† rede?</font></i> <br><br>  Em qualquer interface do sistema, voc√™ deve aderir a esses dois princ√≠pios.  A portabilidade facilita o desenvolvimento e a distribui√ß√£o de software, e s√£o absolutamente necess√°rias ferramentas para proteger o host e os usu√°rios. <br><br><h1>  Como deve ser essa interface do sistema? </h1><br>  Dados esses dois princ√≠pios fundamentais, qual deve ser a interface do sistema WebAssembly? <br><br>  Isso descobriremos no processo de padroniza√ß√£o.  No entanto, temos uma sugest√£o para come√ßar: <br><br><ul><li>  Criando um conjunto modular de interfaces padr√£o <br></li><li>  Vamos come√ßar padronizando o m√≥dulo principal wasi-core. </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/2e1/597/a99/2e1597a9959ff7666a3e77db9d63f12d.png"><br><br>  O que haver√° no wasi-core?  Estes s√£o os princ√≠pios necess√°rios para todos os programas.  O m√≥dulo cobrir√° a maioria das funcionalidades do POSIX, incluindo arquivos, conex√µes de rede, rel√≥gios e n√∫meros aleat√≥rios. <br><br>  Grande parte da funcionalidade b√°sica exigir√° uma abordagem muito semelhante.  Por exemplo, uma abordagem orientada a arquivos POSIX √© fornecida com chamadas de sistema de abrir, fechar, ler e gravar, e todo o resto s√£o complementos de cima. <br><br>  Mas o wasi-core n√£o cobre toda a funcionalidade POSIX.  Por exemplo, o conceito de um processo n√£o se encaixa claramente no WebAssembly.  Al√©m disso, √© claro que todo mecanismo do WebAssembly deve suportar opera√ß√µes de processo, como <code>fork</code> .  Mas tamb√©m queremos tornar poss√≠vel a padroniza√ß√£o dos <code>fork</code> . <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9c9/771/11a/9c977111a2def0f6ae4d5b93b1592d91.png"></a> <br><br>  Idiomas como o Rust usar√£o o wasi-core diretamente em suas bibliotecas padr√£o.  Por exemplo, o <code>open</code> from Rust √© implementado ao compilar no WebAssembly chamando <code>__wasi_path_open</code> . <br><br>  Para C e C ++, criamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wasi-sysroot</a> , que implementa libc em termos de fun√ß√µes wasi-core. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/878/2a0/fa2/8782a0fa23e8d4890cb1964c896db84c.png"></a> <br><br>  Esperamos que compiladores como o Clang possam interagir com a API WASI, e cadeias completas de ferramentas como o compilador Rust e o Emscripten usar√£o o WASI como parte de suas implementa√ß√µes de sistema. <br><br>  Como o c√≥digo customizado chama essas fun√ß√µes WASI? <br><br>  O tempo de execu√ß√£o no qual o c√≥digo √© executado passa a fun√ß√£o wasi-core, colocando o objeto na sandbox. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/371/e44/995/371e44995aa3c88a2c1886ceb27fab19.png"></a> <br><br>  Isso fornece portabilidade, porque cada host pode ter sua pr√≥pria implementa√ß√£o wasi-core especificamente para sua plataforma: desde tempos de execu√ß√£o do WebAssembly como Mozilla Wasmtime e Fastly Lucet, at√© Node ou at√© um navegador. <br><br>  Ele tamb√©m fornece isolamento confi√°vel, porque o host seleciona, em uma base de software, quais fun√ß√µes principais do n√∫cleo s√£o transferidas para a sandbox, ou seja, quais chamadas do sistema devem permitir.  Isso √© seguran√ßa. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/e0a/3a6/28b/e0a3a628b861e321db36d64a647bdfd7.png"></a> <br><br>  O WASI aprimora e estende a seguran√ßa, introduzindo um conceito de seguran√ßa baseado em autoriza√ß√£o no sistema. <br><br>  Normalmente, se o c√≥digo precisar abrir o arquivo, ele <code>open</code> com o nome do caminho na linha.  Em seguida, o sistema operacional verifica se o c√≥digo tem direito a essa a√ß√£o (com base nos direitos do usu√°rio que iniciou o programa). <br><br>  No caso do WASI, ao chamar uma fun√ß√£o para acessar um arquivo, voc√™ deve passar um descritor de arquivo ao qual as permiss√µes est√£o anexadas para o pr√≥prio arquivo ou para o diret√≥rio que cont√©m o arquivo. <br><br>  Portanto, voc√™ n√£o pode ter um c√≥digo que solicite acidentalmente que voc√™ abra <code>/etc/passwd</code> .  Em vez disso, o c√≥digo pode funcionar apenas com seus pr√≥prios diret√≥rios. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/92f/b27/cb0/92fb27cb09092b74fd1ba46d661867c4.png"></a> <br><br>  Isso permite que v√°rias chamadas do sistema sejam resolvidas com seguran√ßa para o c√≥digo isolado, porque os recursos dessas chamadas do sistema s√£o limitados. <br><br>  E assim em cada m√≥dulo.  Por padr√£o, o m√≥dulo n√£o tem acesso aos descritores de arquivo.  Mas se o c√≥digo em um m√≥dulo tiver um descritor de arquivo, ele poder√° transmiti-lo para fun√ß√µes chamadas em outros m√≥dulos.  Ou crie vers√µes mais limitadas do descritor de arquivo para passar para outras fun√ß√µes. <br><br>  Portanto, o tempo de execu√ß√£o passa os descritores de arquivo que o aplicativo pode usar no c√≥digo de n√≠vel superior e, em seguida, os descritores de arquivo s√£o distribu√≠dos pelo resto do sistema, conforme necess√°rio. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d80/cb2/f63/d80cb2f63dd1cfa855fc096f36e96ba1.png"></a> <br><br>  Isso aproxima o WebAssembly do princ√≠pio do menor privil√©gio, onde o m√≥dulo obt√©m acesso apenas ao conjunto m√≠nimo de recursos necess√°rios para realizar seu trabalho. <br><br>  Esse conceito √© baseado na seguran√ßa baseada em privil√©gios, como no CloudABI e Capsicum.  Um dos problemas com esses sistemas √© a dif√≠cil portabilidade do c√≥digo.  Mas acreditamos que esse problema pode ser resolvido. <br><br>  Se o c√≥digo j√° usa <code>openat</code> com caminhos de arquivo relativos, a compila√ß√£o do c√≥digo funcionar√°. <br><br>  Se o c√≥digo usar a migra√ß√£o <code>open</code> e no estilo openat for muito dr√°stica, o WASI fornecer√° uma solu√ß√£o incremental.  Usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">libpreopen,</a> voc√™ cria uma lista de caminhos de arquivo aos quais o aplicativo tem acesso legal.  Em seguida, use <code>open</code> , mas apenas com esses caminhos. <br><br><h1>  O que vem a seguir? </h1><br>  Acreditamos que o wasi-core √© um bom come√ßo.  Ele mant√©m a portabilidade e a seguran√ßa do WebAssembly, fornecendo uma base s√≥lida para o ecossistema. <br><br>  Por√©m, ap√≥s a padroniza√ß√£o completa do wasi-core, outros problemas precisam ser resolvidos, incluindo: <br><br><ul><li>  entrada-sa√≠da ass√≠ncrona <br></li><li>  monitoramento de arquivos <br></li><li>  bloqueio de arquivo </li></ul><br>  Este √© apenas o come√ßo; portanto, se voc√™ tiver alguma id√©ia, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">participe</a> ! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt446764/">https://habr.com/ru/post/pt446764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt446752/index.html">Servi√ßos de rastreamento, OpenTracing e Jaeger</a></li>
<li><a href="../pt446754/index.html">Futuro da nuvem</a></li>
<li><a href="../pt446756/index.html">Armas para VR - [TUTORIAL RAILGUN]</a></li>
<li><a href="../pt446760/index.html">T√≥picos na 3D Expo 2019: Impress√£o em metal 3D, Anton Sotov, Samara University</a></li>
<li><a href="../pt446762/index.html">6. Introdu√ß√£o ao Ponto de Verifica√ß√£o R80.20. Introdu√ß√£o ao SmartConsole</a></li>
<li><a href="../pt446768/index.html">Digita√ß√£o nominal no TypeScript ou como proteger sua interface contra identificadores externos</a></li>
<li><a href="../pt446770/index.html">12 truques de JavaScript n√£o encontrados na maioria dos tutoriais</a></li>
<li><a href="../pt446772/index.html">N√£o abra portas para o mundo - elas quebrar√£o voc√™ (riscos)</a></li>
<li><a href="../pt446774/index.html">Design de personagens de baixo poli</a></li>
<li><a href="../pt446776/index.html">Prova de Trabalho Eficaz</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>