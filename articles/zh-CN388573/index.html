<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📃 ⛱️ 🧝🏿 Arduino RGB小夜灯 ✈️ 👌 ⬅️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="可能每个儿童时代都有一个梦想（而不是一个梦想）。您甚至可以回忆起在实现梦想时使孩子的灵魂不知所措的感觉，或者在他的眼睛中遥远的熟悉的光芒。
 
 现在我正在BSUIR的四年级学习，当我们得知电路设计课程项目不能在纸上完成，而可以在一块铁板上完成时，它扑朔迷离：我小时候希望的夜灯可以自己完成。不仅要制...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arduino RGB小夜灯</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/388573/"><img src="https://habrastorage.org/files/3a7/3d6/898/3a73d6898fbb4277bd36b794d135b9a1.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可能每个儿童时代都有一个梦想（而不是一个梦想）。您甚至可以回忆起在实现梦想时使孩子的灵魂不知所措的感觉，或者在他的眼睛中遥远的熟悉的光芒。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在我正在BSUIR的四年级学习，当我们得知电路设计课程项目不能在纸上完成，而可以在一块铁板上完成时，它扑朔迷离：我小时候希望的夜灯可以自己完成。不仅要制造可以在黑暗中照亮房间的物体，还可以制造一种可以轻松控制任何情绪的设备。为什么不呢我决定增加使用双手更改颜色的功能：将手靠近夜灯时，一种颜色（RGB）越亮。而且我还想使用遥控器控制夜灯。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">马上</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">承认我在</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">cxem.net</font></a><font style="vertical-align: inherit;">上</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">监视</font></a><font style="vertical-align: inherit;">了这个想法</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">简而言之，该示例使用了一个RGB矩阵，该矩阵通过移位寄存器和超声波距离传感器进行控制。</font><font style="vertical-align: inherit;">但是我认为矩阵只在一个方向发光，但是我希望夜灯在两侧都发光。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电路元件的证实</font></font></h2><br>
<img align="left" src="https://habrastorage.org/files/534/706/ffe/534706ffe7a8431689a9fb180beff188.png" width="249" height="231" alt="Arduino Uno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我将注意力转向了Arduino微控制器。 UNO非常适合我的想法，首先是因为它是最受欢迎的平台，并且针脚的数量不是太大（与Mega不同），其次，您可以将外部电源连接到它，在我的情况下，它是12V，而不是Nano。第三...好吧，我认为您可以专注于这两点。该平台由于编程语言的便利性和简单性以及其开放的体系结构和程序代码而在全世界非常受欢迎。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可以在Internet上轻松找到有关该板的更多信息，因此我不会在本文中超负荷。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，对于系统的基本要求。必填项：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-传感器将跟踪到障碍物的距离以控制系统；</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-用于读取遥控器信号的传感器；</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-LED，将提供必要的照明功能；</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-控制整个系统的控制单元。</font></font><br>
<br>
<img src="https://habrastorage.org/files/89b/2f2/852/89b2f2852ebe46c8b3c1a7b8c52f1110.PNG" alt="电路图"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该项目需要距离传感器作为距离传感器，每种传感器都将对应一种特定的颜色：红色，绿色，蓝色。距离传感器将监视手与夜灯之间的距离，并且将手靠近特​​定传感器的距离越远，对应于此测距仪的颜色将越燃烧。相反，手越远，对与传感器相对应的颜色施加的电压就越少。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目前最受欢迎的测距仪是Sharp GP2Y0A21YK和HC-SR04。夏普GP2Y0A21YK是红外测距仪。它配备了一个红外发射器和一个红外接收器：第一个用作光束的源，第二个反射的光束被反射。同时，在此强度下，人眼传感器的红外线不可见且无害。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与HC-SR04超声波传感器相比，该传感器既有优点也有缺点。优点包括中立和无害。缺点是范围更短并且依赖于外部噪声，包括某些类型的照明。</font></font><br>
<br>
<img align="left" src="https://habrastorage.org/files/ee1/5af/aa3/ee15afaa30b341238e9463ba7051147a.png" alt="HC-SR04"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超声波测距仪HC-SR04用作该项目的距离传感器。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HC-SR04的作用原理是基于回声定位的众所周知的现象。使用时，发射器会产生声音信号，该声音信号会从障碍物反射回传感器，并由接收器记录下来。知道超声波在空气中的传播速度（大约340 m / s）以及发射和接收信号之间的延迟时间，就很容易计算出到声屏障的距离。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TRIG输入连接到微控制器的任何引脚。该输出需要持续时间为10μs的脉冲数字信号。输入TRIG传感器上的信号会发送一组超声波脉冲。接收到反射信号后，传感器会在ECHO输出端生成脉冲信号，其持续时间与到障碍物的距离成正比。</font></font><br>
<br>
<img align="left" src="https://habrastorage.org/files/59a/d7a/858/59ad7a858a1243e597f0bd24cac6a36d.png" width="200" height="200" alt="红外传感器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">红外传感器。当然，将需要从该传感器读取和解码遥控所需的信号。 TSOP18的区别仅在于频率。该项目选择了传感器VS1838B TSOP1838。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该项目基于以任何颜色为房间照明的想法，这表明需要从中获得照明的三种原色：红色，绿色，蓝色。因此，选择了SMD 5050RGB LED型号，可以完美地完成任务。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据提供给每个LED的电压量，它们将改变这种照明的强度。 LED必须通过电阻器连接，否则我们不仅有可能损坏它，还可能损坏Arduino。为了将LED上的电流限制在可接受的值，需要一个电阻。事实是，LED的内部电阻非常低，如果不使用电阻，则电流会流过LED，这只会烧毁LED和控制器。</font></font><br>
<br>
<img align="left" src="https://habrastorage.org/files/6d2/25d/6d6/6d225d6d6a85444cb09974c93b41a010.png" width="240" height="180" alt="LED灯条"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目中使用的带有LED的灯条由12V供电。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于处于“关闭”状态的LED上的电压为6V，并且有必要调节超过5V的电源，因此必须在键控模式下将晶体管添加到电路中。我的选择落在BC547c上。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于那些已经忘记的人，请简要考虑一下npn晶体管的工作原理。如果您根本不施加电压，而只是简单地接上基极和发射极的结论，即使不是很短，也要通过几欧姆的电阻，那么结果证明基极-发射极的电压为零。因此，没有基极电流。晶体管关闭，集电极电流可忽略不计，只是初始电流相同。在这种情况下，可以说晶体管处于截止状态。相反的状态称为饱和：当晶体管完全打开时，无处可开。在这样的开度下，集电极-发射极部分的电阻是如此之小，以至于在没有集电极电路负载的情况下根本不可能导通晶体管，它会立即燃烧。在这种情况下，集电极上的残留电压只能为0.3 ... 0.5V。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当晶体管处于键模式（如正常继电器触点）时，将使用饱和和截止这两种状态。此模式的要点是，较小的基极电流控制较大的集电极电流，该电流是基极电流的几十倍。由于外部能源的缘故，可获得大的集电极电流，但正如他们所说，电流增益是显而易见的。在我们的例子中，工作电压为5V的微电路包括3条带，LED的工作电压为12V。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们计算键级联的操作模式。需要计算基本电路中的电阻值，以便LED满功率点亮。计算中的必要条件是电流增益大于或等于将最大可能的集电极电流除以最小可能的基极电流的商：</font></font><br>
<img src="https://habrastorage.org/files/516/e15/509/516e15509d4a4f66a94b35ea9eaee85c.PNG" alt="增益"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，条带可以具有220 V的工作电压，并且可以由5 V的微电路控制基极电路。如果晶体管设计为在集电极上具有这样的电压，则LED会毫无问题地点亮。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
假设基极电流为5mA，集电极电流为0.1A，则基极-发射极结的压降为0.77V。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基极电阻上的电压为：</font></font><br>
<img src="https://habrastorage.org/files/dbb/041/708/dbb04170859f48bdad15782ed93e3aa7.PNG"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据欧姆定律：</font></font><br>
<img src="https://habrastorage.org/files/eb2/221/23b/eb222123bf0349239484f07283dfb302.PNG"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从标准电阻系列中，我们选择一个8.2 kOhm的电阻器。现在计算已完成。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我想提请您注意我遇到的一个问题。使用IRremote库时，Arduino在调整蓝色时崩溃。在Internet上进行了长期彻底的搜索后，事实证明该库对该Arduino模型使用默认计时器2。定时器用于控制PWM输出。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定时器0（系统时间，PWM 5和6）; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定时器1（PWM 9和10）; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定时器2（PWM 3和11）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初，我使用PWM 11来调整蓝色。因此，在使用PWM，定时器和可以使用它们的第三方库时要小心。奇怪的是，在github的主页上没有对这种细微差别进行任何评论。如果愿意，可以取消注释</font><font style="vertical-align: inherit;">计时器1和注释2 </font><font style="vertical-align: inherit;">的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。试验</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
板上的连接元素如下所示：</font></font><br>
<br>
<img src="https://habrastorage.org/files/220/0cf/c02/2200cfc024f34ce7b17013d5cc38740e.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在试验板上进行测试之后，开始了“在板上放置元件”和“使用烙铁工作”阶段。在对成品板进行第一次测试之后，这种想法就渗入了我的脑海：出了点问题。然后开始熟悉的阶段“与测试人员一起辛苦工作”。但是，故障（几个相邻的触点被意外焊接）很快被修复，这就是人们期待已久的调皮的LED灯。</font></font><br>
<br>
<img src="https://habrastorage.org/files/cdf/92c/963/cdf92c9632944cc39b28c79c585220c2.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此外，只有这种情况。因此，用于传感器的带孔胶合板被切割了。后盖经过特别拆卸，因此您可以从内部欣赏风景，并且可以根据需要完成或重新制作某些东西。它还有2个用于重新编程电路板和电源的孔。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该主体被胶粘在两组分环氧粘合剂上。值得一提的是，对于以前从未使用过的胶水，它的特殊性。该伴侣在两个单独的容器中交付，当其中的内容物混合时，立即发生化学反应。混合后，您必须在3-4分钟内迅速采取行动。为了进一步使用，您需要混合新的部分。因此，如果您想重复一遍，我对您的建议是将零散的部分混合在一起，并迅速采取行动，这将没有太多时间思考。因此，值得提前考虑如何以及在何处粘贴外壳。一坐就是行不通的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了用LED固定灯条，将一根管子插入顶盖，所有电线都穿过该管。</font></font><br>
<br>
<img src="https://habrastorage.org/files/7b4/aa6/30d/7b4aa630d5674ca1944a644fb98f4347.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
带着灯罩出现问题时，我想起了我小时候是如何用简单的线，胶水和气球制作工艺品的，这些都是基础。</font><font style="vertical-align: inherit;">灯罩的原理是相同的，但是包裹多面体比球要难。</font><font style="vertical-align: inherit;">由于螺纹施加在结构上的压力，其开始逐渐变细并且螺纹开始下降。</font><font style="vertical-align: inherit;">紧急情况下，人们决定用手上胶，从上方加强结构。</font><font style="vertical-align: inherit;">然后CD出炉了。</font><font style="vertical-align: inherit;">结果，我们得到了这样的夜灯：</font></font><br>
<br>
<img src="https://habrastorage.org/files/2f9/66c/faf/2f966cfaf89b41f1b696626ab4a5d545.JPG"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果你想说什么</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我应该在项目中更改什么？为了向TRIG距离传感器发送信号，可以使用一个Arduino输出而不是三个。我还会为红外线传感器提供一个孔（我忘记了），可惜的是，它隐藏在无法从遥控器读取信号的情况下。但是，谁说您不能焊接和钻孔任何东西？</font></font><br>
<br>
<img src="https://habrastorage.org/files/70d/7f3/d84/70d7f3d840474fb78bf65786b57c29cc.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我想指出，这是一个有趣的学期，也是一次尝试做一些纸面上的事情的绝好机会，因此我可以在“童年梦想”项目旁边再打一个勾号。</font><font style="vertical-align: inherit;">而且，如果您觉得尝试新事物很困难，并且您不知道首先要做什么，请不要担心。</font><font style="vertical-align: inherit;">这种想法在许多人的脑海中飞过：从哪里开始以及如何做到这一点？</font><font style="vertical-align: inherit;">在生活中，您可能会困惑许多任务，但是，如果您尝试尝试，您会发现眨眼之间就可以翻山越岭，即使您需要为此付出一点努力。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
链接到源</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文章作者：Anastasia Kovsh</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN388573/">https://habr.com/ru/post/zh-CN388573/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN388563/index.html">Red Star是来自封闭国家/地区的封闭操作系统。一些细节+视频</a></li>
<li><a href="../zh-CN388565/index.html">Z-Wave.Me博客</a></li>
<li><a href="../zh-CN388567/index.html">莫斯科周末和节假日哪里去繁荣？</a></li>
<li><a href="../zh-CN388569/index.html">前5名最令人难以置信的无人机</a></li>
<li><a href="../zh-CN388571/index.html">11月和12月的移动。年度Google最新新闻</a></li>
<li><a href="../zh-CN388575/index.html">红外多功能工具或更简单-Multipult</a></li>
<li><a href="../zh-CN388577/index.html">自动浇水：自动执行常规任务</a></li>
<li><a href="../zh-CN388579/index.html">DEXP Ursus KX210i-带有英特尔®凌动™处理器的Windows 10平板电脑</a></li>
<li><a href="../zh-CN388581/index.html">如何通过Android智能手机通过蓝牙控制制作吹雪机3.0</a></li>
<li><a href="../zh-CN388583/index.html">废除联邦航天局的法令签署</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>