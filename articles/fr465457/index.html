<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòè ü§∑ üë©üèº‚Äçü§ù‚Äçüë®üèΩ √Ä propos de PBR sur les doigts ü§§ üåæ üëåüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans ce texte, je parlerai un peu de PBR, un concept de rendu bas√© sur des principes physiques. Le PBR est utilis√© dans les graphiques informatiques m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√Ä propos de PBR sur les doigts</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/465457/"><p><img src="https://habrastorage.org/webt/p7/wx/7w/p7wx7wdov7bj2wuvrn-tezyyani.png"></p><br><p>  Dans ce texte, je parlerai un peu de PBR, un concept de rendu bas√© sur des principes physiques.  Le PBR est utilis√© dans les graphiques informatiques modernes, et nous parlerons de ce que c'est et de la fa√ßon dont il est pr√©par√©, et des choses importantes qu'il vaut la peine de savoir pour ceux qui vont ou s'occupent d√©j√† de la pr√©paration des mat√©riaux.  L'accent est davantage mis sur les jeux et les moteurs de jeux, o√π ce concept est d√©sormais tr√®s largement utilis√©. </p><a name="habracut"></a><br><p>  Avant de passer aux d√©tails, quelques mots pour ¬´couvrir l'arri√®re¬ª. </p><br><p> Chaque moteur et rendu a son propre pipeline de d√©veloppement, qui est souvent unique, comme un flocon de neige, et ne se croise pas compl√®tement avec les autres.  Cela est d√ª, entre autres, au fait que le PBR est une m√©thodologie relativement jeune, et nous pouvons dire que nous voyons la premi√®re g√©n√©ration de tels moteurs, les normes commencent tout juste √† √©merger, il y a donc une diff√©rence et des nuances dans les diff√©rentes impl√©mentations.  Et aussi parce que PBR n'est pas un ensemble d'exigences strictes, mais plut√¥t une direction g√©n√©rale de d√©veloppement. </p><br><p>  Lors de la r√©daction de ce texte, je me suis appuy√© sur ma propre exp√©rience ainsi que sur la th√©orie concernant plusieurs packages: Unreal Engine 4, Marmoset Toolbag 3, Substance Painter.  Par cons√©quent, certaines choses dans d'autres packages seront diff√©rentes, mais en g√©n√©ral, la th√©orie est universelle. </p><br><p>  Plus en d√©tail, je d√©crirai les choses les plus importantes, et √† la fin, par le principe r√©siduel, je mentionnerai qu'en PBR il est utilis√©, mais pas si important ou d√©licat dans l'appareil. </p><br><p>  J'utilise intentionnellement les termes sous une forme non traduite, car les sources d'informations les plus r√©centes et compl√®tes sont toujours en anglais, et si quelqu'un s'assoit et attend une traduction, il entre automatiquement dans celles qui sont √† la tra√Æne et d√©pendent de lui.  √Ä mon avis, il est juste de se souvenir imm√©diatement des termes utilis√©s dans l'industrie.  Et google, bien s√ªr. </p><br><p>  <em>Le mat√©riel a √©t√© pr√©par√© avec la participation de la communaut√© Maya3D Telegram.</em> </p><br><h2>  √Ä propos des bases </h2><br><p>  Tout d'abord, approfondissons un peu l'histoire.  L'exp√©rience sugg√®re qu'il est pr√©f√©rable d'expliquer imm√©diatement la signification des termes et des concepts de base, mais si vous les connaissez d√©j√†, vous pouvez ignorer cette section en toute s√©curit√©. </p><br><blockquote>  De plus, vous remarquerez que PBR emprunte des termes de n'importe o√π, les modifiant un peu, et c'est tr√®s bien. </blockquote><p>  PBR est une abr√©viation pour <em>le rendu bas√© physiquement</em> , ce qui signifie √† peu pr√®s <em>une visualisation physiquement correcte</em> , et ces mots parlent d'eux-m√™mes.  Parfois, le terme PBS est utilis√© (ici pour <em>rendre les</em> modifications du <em>shader</em> ), √† certains endroits, il y a m√™me PBT (et ici la <em>texturation</em> appara√Æt).  Cependant, la diff√©rence est minime - c'est une question de tradition, et le terme PBR est traditionnellement utilis√© plus souvent. </p><br><p>  Ces derni√®res ann√©es ont √©t√© le courant dominant des syst√®mes de rendu modernes, du temps r√©el et des jeux aux rendus dits hors ligne.  Le nom implique une certaine adh√©sion aux lois de la physique, aux lois du monde r√©el, et cette clarification nous dit pour ainsi dire: avant il n'en √©tait pas ainsi.  Voyons comment c'√©tait et comment c'est devenu, et comment tout cela est venu √† nous. </p><br><p>  Dans les graphiques en trois dimensions, d√®s le tout d√©but de sa vie, diverses approches d'affichage √† l'√©cran ont √©t√© mises en ≈ìuvre, jusqu'√† ce qu'il devienne clair que la reproduction des m√©canismes de la r√©alit√© donne des r√©sultats plus r√©alistes, pour ainsi dire. </p><br><blockquote>  √Ä peu pr√®s la m√™me histoire s'est produite avec l'animation squelettique des personnages, qui a "enterr√©" le sommet. </blockquote><p>  Si nous mod√©lisons la r√©alit√©, alors utilisons ses lois et son architecture, automatisant les constantes et transf√©rant une partie du travail vers le logiciel.  Les rendus s'efforcent de plus en plus de fonctionner comme notre r√©alit√© fonctionne, chaque g√©n√©ration de fer introduisant de nouvelles approches qui vous permettent d'abandonner les contrefa√ßons. </p><br><blockquote>  Les rendus hors ligne sont des rendus qui ne fonctionnent pas en temps r√©el, par exemple, Vray ou Arnold. </blockquote><p>  Pour une raison quelconque, probablement, cela r√©tr√©cit le vol de la fantaisie et coupe les pousses de stylisation, mais c'est <em>probablement</em> quoi. </p><br><p>  D'un autre c√¥t√©, les trucs et les contrefa√ßons passent √† un nouveau niveau, qui est √©galement un progr√®s. </p><br><p>  Dans le monde r√©el qui nous entoure, le champ √©lectromagn√©tique est la base d'une interaction √† une √©chelle sup√©rieure √† l'atome et inf√©rieure √† la plan√®te.  Tout ce que nous voyons et pouvons toucher nous est accessible gr√¢ce √† lui.  L'homme est un √™tre imparfait, nous ne pouvons pas voir la plus grande partie du spectre √©lectromagn√©tique, mais avec lui il y a beaucoup de subtilit√©s que nous utilisons en vertu de la compr√©hension.  Tout ce que nous voyons autour de nous, c'est la lumi√®re et ses caprices.  Belle entr√©e, et surtout, √©vidente, non? </p><br><blockquote>  La grande majorit√© des gens sont des trichromates, mais il existe un petit pourcentage de mutants t√©trachromatiques qui distinguent plus de nuances et voient le monde plus diversifi√©.  Et le plus souvent, ce sont des femmes. </blockquote><p>  En PBR, la lumi√®re est devenue moins conventionnelle qu'auparavant.  BxDF d√©crit non seulement comment il atteint la surface, mais aussi comment il en est r√©fl√©chi, compte tenu des caract√©ristiques des mat√©riaux.  Cela vous permet de d√©crire plus pr√©cis√©ment la sc√®ne et de transmettre le r√©sultat, le plus pr√®s possible de la r√©alit√©. <br>  L'un des principaux changements apport√©s par PBR est la polyvalence des mat√©riaux dans n'importe quel √©clairage.  Les mat√©riaux correctement configur√©s seront toujours corrects dans n'importe quelle sc√®ne. </p><br><p>  Dans la g√©n√©ration pr√©c√©dente de rendus, la microsurface et la nature de l'√©vasement, les types de mat√©riaux conducteur / isolant n'√©taient pas pris en compte;  la r√©flexion diffuse portait une ombre partielle et m√™me des reflets peints;  il n'y avait pas de valeurs de r√©flexion du monde r√©el;  Les mat√©riaux n'√©taient universels pour aucune sc√®ne et aucun √©clairage. </p><br><h2>  √Ä propos de la substance </h2><br><p>  Il en existe deux types: </p><br><ul><li>  conducteurs ou m√©taux - <em>conducteurs</em> ; </li><li>  isolateurs ou di√©lectriques, c'est-√†-dire non m√©talliques - <em>isolants</em> . </li></ul><br><p>  La classification est tir√©e du monde r√©el (avec simplifications) et essaie de suivre le nom. <br>  Les conducteurs conduisent le courant √©lectrique, ont un r√©seau cristallin et d'autres "joies" du cours de physique de l'√©cole.  Ils n'ont pas de r√©flexion diffuse et de diffusion souterraine, leur surface ne diffuse pas la lumi√®re, elle lui est imperm√©able, mais en absorbe une partie, r√©fl√©chissant des ondes de longueurs sp√©cifiques - un √©clat de couleur. </p><br><blockquote>  Cependant, le courant n'est pas important pour PBR.  La peau est √©galement conductrice de courant, mais en PBR, elle n'est pas m√©tallique, ce qui signifie qu'elle n'est pas conductrice. </blockquote><p>  Les isolants diffusent la lumi√®re, elle p√©n√®tre leur surface;  ils ont une r√©flexion diffuse et une diffusion souterraine, des reflets de lumi√®re blanche. <br>  Les deux types de mat√©riaux ont un effet Fresnel. </p><br><h2>  √Ä propos des pipelines </h2><br><p>  Traditionnellement, nous avons deux pipelines pour les mat√©riaux et leur pr√©paration: <em>sp√©culaire</em> et <em>m√©tal</em> .  Habituellement, il est entendu que dans le <em>sp√©culaire,</em> il existe une carte d'image miroir correspondante, tandis que dans la <em>m√©tallit√©,</em> ce n'est pas le cas, mais il existe un masque de m√©tallicit√©, et cela peut √™tre fait. </p><br><p>  Bien s√ªr, tout n'est pas si simple ici. </p><br><p>  Le pipeline <em>sp√©culaire</em> a vraiment une carte <em>sp√©culaire</em> , qui contr√¥le l'intensit√© et la couleur du brillant sur <em>F0</em> , dont les valeurs sont enti√®rement entre les mains de l'artiste, et n'a pas de constantes int√©gr√©es dans le shader.  Fresnel est parfois contr√¥l√© s√©par√©ment, l' <em>alb√©do</em> ne contr√¥le que la couleur, le <em>brillant / la rugosit√©</em> contr√¥le la nature des reflets, tout est simple ici. </p><br><p>  <em>La m√©tallit√©</em> n'a pas de carte d'intensit√© de brillance distincte; ces valeurs sont cousues dans des shaders √† 2-5% pour les di√©lectriques et 70-100% pour les conducteurs.  La relation des cartes ici est l√©g√®rement plus √©lev√©e: l' <em>alb√©do</em> , la <em>m√©tallit√©</em> et la <em>rugosit√© des</em> cartes affectent la couleur, l'intensit√© et la nature de la r√©flexion sp√©culaire au total.  Il y a une carte de moins dans ce pipeline, et compte tenu de la possibilit√© de regrouper les cartes en niveaux de gris dans un RVB, ces mat√©riaux occupent moins de m√©moire syst√®me. </p><br><p>  Le choix des rendus modernes est presque enti√®rement tomb√© sur la <em>m√©talit√©</em> en raison de son efficacit√© et d'une plus grande automatisation, car de tels shaders se chargent des calculs de Fresnel corrects.  Bien que <em>sp√©culaire</em> donne plus de contr√¥le, ce contr√¥le est souvent redondant et prend plus de temps et d'efforts avec des r√©sultats similaires.  Par cons√©quent, nous parlerons sp√©cifiquement du pipeline <em>metalness</em> en g√©n√©ral. </p><br><p><img src="https://habrastorage.org/webt/4y/nx/vn/4ynxvnwcpw7607fqx4hb4zl0q1c.png"><br>  <em>Diff√©rences pipelines et cartes.</em>  <em>Wes McDermott et all√©gorithmique.</em> </p><br><h2>  √Ä propos de BRDF et GGX </h2><br><p>  La base de la diff√©rence entre PBR de la g√©n√©ration pr√©c√©dente dans le changement de BxDF.  BxDF est une <em>fonction de distribution X bidirectionnelle</em> , qui ressemble √† peu pr√®s √† une <em>fonction de capacit√© X √† deux faisceaux</em> .  Et cette famille de fonctions a plusieurs capacit√©s: c'est au moins la <em>r√©flectance</em> , la <em>transmission</em> et la <em>diffusion</em> - r√©flexion, transmission et dispersion, respectivement (dans la litt√©rature et les articles sp√©cialis√©s, l'artiste rencontre plus souvent la version BRDF). </p><br><p>  Ces fonctions d√©crivent le comportement du faisceau lorsqu'il interagit avec la surface: comment il se disperse (c'est-√†-dire qu'il p√©n√®tre dans la couche sup√©rieure et revient), il est mis en miroir ou traverse un mat√©riau transparent. </p><br><p>  Dans notre histoire, BxDF est √©troitement li√© √† la <em>th√©orie des microfacets</em> , qui a √©galement beaucoup d'impl√©mentations, souvent nomm√©es d'apr√®s les noms des auteurs: Cook-Torrance, Ashikhmin-Shirley, GGX et ainsi de suite.  GGX n'est qu'une des impl√©mentations de la <em>th√©orie</em> des <em>microfacets</em> - la th√©orie des microsurfaces, qui est utilis√©e presque partout.  Il pr√©sente un mod√®le simplifi√© de la microsurface, qui en conjonction avec BxDF imite la r√©action √† la lumi√®re pour tous les types d'interaction. </p><br><blockquote>  La facette peut √©galement √™tre traduite par un ¬´visage¬ª, ce qui est √©galement logique.  Dans une th√©orie simplifi√©e, une surface est un ensemble de petits visages. </blockquote><p>  GGX n'est pas d√©crypt√© du tout, l'ensemble des lettres est tir√© des variables utilis√©es dans les formules (ou le nom de famille de quelqu'un est encombr√© - l'histoire le cache).  Les artistes peuvent voir ce terme dans les r√©glages des param√®tres de <em>rugosit√© / brillance</em> . </p><br><blockquote>  Par exemple, l'un des G est la fonction d'occultation-masquage bidirectionnelle, une fonction d'auto-ombrage / masquage √† deux faisceaux. </blockquote><p><img src="https://habrastorage.org/webt/_f/fj/gc/_ffjgcfumvsq6sgwhssekpffawa.png"><br>  <em>Microsurface et son effet sur la r√©flexion sp√©culaire.</em>  <em>Wes McDermott et all√©gorithmique.</em> </p><br><h2>  √âconomies d'√©nergie </h2><br><p>  <em>La conservation de l'√©nergie</em> est √©galement l'une des constantes fondamentales du PBR et cela signifie que la surface ne peut pas renvoyer plus de lumi√®re qu'elle n'en re√ßoit.  En particulier, l' <em>alb√©do</em> et la <em>r√©flexion sp√©culaire</em> s'additionnent, et si le <em>sp√©culaire est</em> plus brillant, l' <em>alb√©do est</em> moins brillant, et vice versa.  En g√©n√©ral, c'est une chose automatis√©e dans les moteurs, il est parfois possible de l'activer et de la d√©sactiver, par exemple, dans le Marmoset Toolbag. </p><br><h2>  √Ä propos de Fresnel </h2><br><p>  Augustin-Jean Fresnel (Augustin-Jean Fresnel), un physicien fran√ßais du XIXe si√®cle, cr√©ateur de la th√©orie des ondes de la lumi√®re et des tas d'autres choses cool, a d√©crit l'effet du nom lui-m√™me, qui consiste dans le fait que le niveau de lumi√®re r√©fl√©chie par une surface d√©pend directement de l'angle de vue de cette surface.  √Ä angle droit, c'est-√†-dire <em>F0</em> , nous obtenons le niveau minimum de lumi√®re r√©fl√©chie sp√©culairement disponible pour le mat√©riau.  Et plus l'angle est grand, plus nous attraperons de lumi√®re, approchant 100%. </p><br><p>  Selon cet effet, tout mat√©riau a un √©clat, en principe, tout brille, il suffit de trouver le bon angle. </p><br><p>  Lorsque nous parlons de l'intensit√© du brillant en g√©n√©ral, nous entendons toujours le brillant sur <em>F0</em> - c'est ce qui est contr√¥l√© par l'artiste √† travers les param√®tres <em>alb√©do / rugosit√© / m√©tal</em> . <br><img src="https://habrastorage.org/webt/qb/mc/3d/qbmc3dtizu2o3dtyaeadoaknoh8.png"><br>  <em>Sch√©ma de l'effet Fresnel.</em>  <em>Wes McDermott et all√©gorithmique.</em> </p><br><h2>  √Ä propos de la r√©flexion diffuse </h2><br><h3>  Albedo.  Diffuse  Couleur de base. </h3><br><p><img src="https://habrastorage.org/webt/o_/1b/qd/o_1bqdvlsufu0sjpawl6jvswr_s.png"><br>  <em>Sch√©ma d'interaction en r√©flexion diffuse.</em>  <em>Wes McDermott et all√©gorithmique.</em> </p><br><p>  C'est la lumi√®re qui tombe sur la surface et qui est partiellement absorb√©e par elle, et partiellement r√©fl√©chie, se dispersant de mani√®re al√©atoire dans les couches sup√©rieures et renvoyant √† l'observateur la couleur de cette m√™me surface.  Parfois, dans ce cas, ils disent qu'elle est peinte dans la couleur de la surface, mais nous parlons de correction physique, donc cela vaut la peine de r√©p√©ter - la lumi√®re ne peint pas, la partie du spectre qui n'a pas √©t√© absorb√©e et non perdue nous revient.  La partie de la lumi√®re visible qui est absorb√©e par la surface dans le monde r√©el va dans l'√©nergie thermique, et en PBR cela peut √©galement √™tre pris en compte, mais cela d√©pend beaucoup du shader utilis√© et dans ce cas est secondaire. </p><br><p><img src="https://habrastorage.org/webt/8m/az/h6/8mazh6-uv3x5_ygatmtgar0tyta.png"><br>  <em>Absorption de la lumi√®re et retour √† l'observateur uniquement des ondes non absorb√©es.</em>  <em>Wes McDermott et all√©gorithmique.</em> </p><br><p>  Le comportement du mat√©riau lors d'une r√©flexion diffuse est d√©termin√© par la carte d' <em>alb√©do</em> , ou <em>couleur de base</em> , voire <em>diffus √†</em> certains endroits.  La diff√©rence dans ces noms provient de la tradition et des diff√©rents pipelines de d√©veloppement de moteurs, mais le comportement est le m√™me partout - en tout cas, il devrait l'√™tre.  La couleur doit √™tre captur√©e sur la carte de l'alb√©do, √† quoi elle ressemblerait √† angle droit par rapport √† la surface de la cam√©ra et √† un √©clairage 100% blanc.  Sans ombres, p√©nombre, √©blouissement et tout ce qui n'est pas coinc√© dans la d√©finition de "couleur pure".  C'est la principale diff√©rence entre la r√©flexion diffuse actuelle dans PBR et la g√©n√©ration pr√©c√©dente de moteurs de rendu, o√π le terme <em>diffus est</em> √©galement utilis√©, mais d'une mani√®re l√©g√®rement diff√©rente. </p><br><blockquote>  Une photographie d'un objet avec un filtre de polarisation sous un √©clairage direct capture son <em>alb√©do</em> , par exemple.  La polarisation supprime l'√©blouissement. </blockquote><p>  Il semblerait qu'il n'y ait plus rien √† dire sur la couleur, mais il y a encore des subtilit√©s. </p><br><p>  La carte de r√©flexion diffuse affecte le rendu des m√©taux purs dans le pipeline de m√©tallit√©, colorant le reflet dans la couleur correspondante.  De plus, la carte d' <em>alb√©do</em> affecte directement la <em>r√©flectance sp√©culaire</em> des m√©taux, vous permettant de la faire varier en combinaison avec une carte de <em>m√©tallit√©</em> .  C'est une conception assez d√©licate, mais en g√©n√©ral, cela ressemble √† ceci: lorsque nous fabriquons le mat√©riau de l'isolant, nous <em>dessinons un</em> masque de <em>m√©tal</em> noir et le shader attribue un brillant √† <em>F0</em> de 4%.  Lorsque nous effectuons des transitions dans la <em>m√©tallit√©</em> jusqu'au blanc, c'est-√†-dire le m√©tal pur, la luminosit√© de la carte de l' <em>alb√©do</em> affecte l'intensit√© de sa luminosit√©.  Plus la couleur de l' <em>alb√©do est</em> brillante, plus la brillance est intense, ce qui approche une valeur de 100%.  Nous n'avons aucun contr√¥le sur le niveau de brillance de l'isolant.  On suppose que la diff√©rence de 2 √† 4% n'est pas critique et est masqu√©e par la <em>rugosit√©</em> , ou bien ajust√©e par <em>r√©flexion sp√©culaire</em> , si n√©cessaire et possible. </p><br><blockquote>  Cet exemple est d√©crit en tenant compte des shaders UE4, du Marmoset Toolbag et des produits Substance.  Mais dans l'ensemble, cela fonctionne partout. </blockquote><p>  L'effet artistique de la couleur de surface ne doit pas √™tre sous-estim√©.  Souvent, cela √©chappe √† l'attention des artistes, et ils font du plastique noir noir pour le rendre ¬´comme dans la vie¬ª.  Mais il n'y a g√©n√©ralement pas de couleurs monolithiques dans la r√©alit√©, et les variations de couleur sont presque toujours pr√©sentes dans le mat√©riau, cela doit √™tre compris et utilis√©. </p><br><p>  La r√©flexion diffuse est d√©crite par une carte RVB, ou en termes de moteurs, par un tableau de Vector3, ce qui est logique, on parle de couleur. </p><br><h3>  Validation PBR </h3><br><p>  √âtant donn√© que PBR s'efforce d'obtenir des param√®tres et des caract√©ristiques r√©els, les valeurs de la luminosit√© de l' <em>alb√©do</em> doivent √™tre valid√©es et r√©duites √† des plages de valeurs r√©elles, mais elles ne peuvent pas descendre en dessous de 30 √† 50 sRGB et d√©passer 240 pour les di√©lectriques.  Dans le cas des m√©taux purs, la valeur de 240 peut augmenter √† 255, car ce n'est pas la valeur de la r√©flexion diffuse, mais la valeur de la <em>r√©flectance sp√©culaire</em> . </p><br><p>  Mais, bien s√ªr, il y a des subtilit√©s ici. </p><br><p>  Par exemple, l'une des substances les plus sombres du monde ordinaire est le charbon.  La valeur de luminosit√© de l' <em>alb√©do</em> , traduite en sRGB, est de 50, ce qui est proche de la limite du minimum que PBR peut se permettre pour les di√©lectriques.  Les valeurs ci-dessous sont trop sombres et peuvent ne pas sembler correctes dans diff√©rentes conditions d'√©clairage. </p><br><blockquote>  Il n'y a pas si longtemps, certaines personnes se sont tendues et ont cr√©√© un mat√©riau qui absorbe 99% de la lumi√®re et ressemble √† un trou noir dans l'espace. </blockquote><p>  Pourquoi est-ce important? </p><br><p>  Parce que les r√©flexions diffuses et sp√©culaires fonctionnent par paires.  Les valeurs d'alb√©do qui sont trop sombres affecteront la diff√©rence entre l' <em>alb√©do</em> lui-m√™me et la <em>r√©flectance sp√©culaire</em> , et les artistes devront ¬´tordre¬ª la lumi√®re pour normaliser l'√©blouissement sur <em>F0</em> et la r√©flexion diffuse, ce qui entra√Ænera une surexposition de toute la sc√®ne, et les mat√©riaux deviendront finalement universels et ne s'appliqueront qu'√† un sp√©cifique l'√©clairage. </p><br><p>  Pourquoi cela n'a-t-il pas d'importance? </p><br><p>  Parce que cela d√©pend de la composition.  Si la pr√©sentation d'un mod√®le s√©par√© est rendue, et qu'il n'y a pas d'√©clairage global et de r√©flexion de r√©flexion dans la sc√®ne, mais qu'il y a un √©clairage HDR, vous pouvez en g√©n√©ral faire des valeurs en dehors de 30-50 sRGB.  Et il y a aussi une b√™te ¬´artistique¬ª semi-mythique.  "Ce qui importe le plus, ce n'est pas l'exactitude physique", dit-il, "mais la perception."  Et ici, il est possible et parfois n√©cessaire de violer des lois difficiles √† √©tablir. </p><br><blockquote>  Il s'agit d'une question tr√®s controvers√©e concernant l'admissibilit√© de la violation des lois PBR et de la r√©alit√© correspondante.  Quelque part, il joue entre les mains de la perception, et quelque part, il est n√©cessaire de maintenir toutes les normes.  Les exemples et la discussion d√©passent le cadre de ce texte. </blockquote><p>  En g√©n√©ral, le maintien de la limite de luminosit√© de l' <em>alb√©do</em> reste dans la conscience de l'artiste ou de son chef d'art, et une grande partie du travail en PBR qui existe aujourd'hui ne passe pas cette validation √† la limite inf√©rieure, ce qui ne les emp√™che pas d'√™tre qualitatifs et corrects dans un look inexp√©riment√©.  La diff√©rence ne devient visible que si vous v√©rifiez les valeurs et tirez jusqu'√† la limite inf√©rieure, ou si un mod√®le ex√©cut√© s√©par√©ment est plac√© dans une sc√®ne avec le bon √©clairage. </p><br><p>  Mais m√™me si nous ne nous soucions pas de la validation, n'utilisez pas de couleur noire pure √† 0 sRGB pour les di√©lectriques. </p><br><p>  La validation PBR est fournie par divers outils dans les moteurs et les √©diteurs.  Par exemple, dans Substance Painter, il existe un filtre qui fonctionne au-dessus de la pile enti√®re de couches, v√©rifiant les valeurs. </p><br><p><img src="https://habrastorage.org/webt/vt/7l/sk/vt7lsk-qarr0_h1xcytgync8-yk.png"><br>  <em>Validation PBR dans Substance Painter.</em>  <em>Wes McDermott et all√©gorithmique.</em> </p><br><p><img src="https://habrastorage.org/webt/8_/c_/fc/8_c_fcnsy5-zl9aw4tedt-d0pgg.png"><br>  <em>Graphique des valeurs d'intensit√© pour certains mat√©riaux.</em>  <em>Donn√©es extraites de S√©bastien Lagarde et DONTDNOD.</em> </p><br><h2>  √Ä propos de la r√©flexion du miroir </h2><br><h3>  R√©flexion sp√©culaire </h3><br><blockquote>  Sp√©culaire est un mot latin qui se traduit par ¬´miroir¬ª. </blockquote><p><img src="https://habrastorage.org/webt/ts/ot/d6/tsotd6j2ix5xr3jp4btcb_v2b6c.png"><br>  <em>Sch√©ma de l'interaction de la lumi√®re dans la r√©flexion sp√©culaire.</em>  <em>Wes McDermott et all√©gorithmique.</em> </p><br><p>  Il s'agit de la partie du flux lumineux r√©fl√©chie par la surface selon la loi de l'angle d'incidence et renvoy√©e √† l'observateur dans son int√©gralit√©.  <em>La r√©flectance sp√©culaire</em> , ou r√©flexion sp√©culaire, est un √©blouissement, et elle est tr√®s √©troitement li√©e aux caract√©ristiques de la microsurface.  On le trouve dans les deux pipelines, mais il est directement contr√¥l√© dans le pipeline <em>sp√©culaire</em> et indirectement dans la <em>m√©tallit√©</em> . </p><br><p>  Le fait est que le contr√¥le direct de la luminosit√© est une chose tr√®s vile.  Nous nous souvenons des conducteurs et des isolateurs, mais peu d'artistes sans table devant leurs yeux se souviendront des valeurs d'intensit√© exactes, et il y a aussi des exceptions sous forme de pierres pr√©cieuses.  En ayant acc√®s √† ce param√®tre de shader, il est tr√®s facile de s'√©loigner des valeurs physiquement correctes quelque part dans le plan astral, de briser toute la gamme visuelle et m√™me de pr√©parer du mat√©riel sur nos √©paules et la m√©moire de la carte vid√©o est une autre carte. </p><br><p>  De plus, les mesures des valeurs du monde r√©el s'inscrivent dans un petit cadre qui peut √™tre automatis√©, ce qu'ils ont fait dans la <em>m√©tallicit√©</em> , apr√®s avoir s√©lectionn√© le contr√¥le direct et la n√©cessit√© d'y penser √©galement. </p><br><p>  Dans un pipeline <em>sp√©culaire</em> , le param√®tre <em>sp√©culaire</em> est contr√¥l√© par une carte en niveaux de gris dans les valeurs 0-255, une couleur lin√©aire ou un param√®tre scalaire. </p><br><blockquote>  Le param√®tre scalaire ici est la valeur d√©finie pour l'espace bidimensionnel projet√© sur le mod√®le.  En d'autres termes, lorsque vous d√©placez le curseur dans Marmoset pour sp√©culaire, il s'agit du param√®tre scalaire. </blockquote><p>  Dans un pipeline de <em>m√©tal</em> , il n'y a g√©n√©ralement pas de contr√¥le direct de l'intensit√© de la luminosit√© via le param√®tre sp√©culaire.          F0: 4-5%    80-100%   ,     .            ,         <em>roughness</em>  <em>albedo</em> . </p><br><h3> Cavity </h3><br><p>  <em>specular reflectance</em>     ,    ,      ,     ,     ,   .      ,       ,     .      <em>cavity</em> ;     ,     .  UE4, ,   specular  ,       ,   ,      <em>specular</em> ,   ,     <em>cavity</em>      0-4%.      Substance-   .         ,           .    . </p><br><p><img src="https://habrastorage.org/webt/if/aa/3l/ifaa3lo0zh7jbqeg9xh9kbjefyq.jpeg"></p><br><p><img src="https://habrastorage.org/webt/dc/yd/8n/dcyd8nfosw2l6ublorhoy1qptve.jpeg"><br> <em>  cavity  specular reflectance.              .        cavity         ,      .   Marmoset Toolbag 3</em> </p><br><h2>   </h2><br><h3> Metalness </h3><br><p>   PBR   ,      -    .         ,      ‚Äî       -  .    2-5%  ,  ‚Äî 70-100%,        . </p><br><p>  ,     ,             , ,       ,       -  <em>metalness</em> .      ,       .                 ,     UE4      Unity.    ( ¬´  ¬ª) ‚Äî       :   <em>texel density</em>      . </p><br><blockquote>   /    specular-,       ,   . </blockquote><p><img src="https://habrastorage.org/webt/yy/u5/_3/yyu5_3xbui07l_eya7jpeweb1tq.png"><br> <em>  /. Wes McDermott  Allegorithmic.</em> </p><br><p>   PBR,      .       ,    ,    -   ,  ,       .    <em>specular</em> -       RGB-   <em>specular</em> ,     ,   <em>metalness</em>      <em>albedo</em> . ,   <em>metalness</em> ,    ,     ,  ,  . . </p><br><p> ,     ‚Äî  ,    .     ,       ,   . </p><br><p>  ,       .           <em>albedo</em>  , ,  Substance Painter,   ,  .    ,   : <em>albedo</em>          . </p><br><p>   -  0-255          . </p><br><h2>   </h2><br><h3> Roughness. Glossiness. Smoothness. </h3><br><p>         ,     ,  ,     .   ,    ,     ,     .  PBR     <em>microfacet theory</em>    BRDF,            ,     <em>roughness</em> ,  <em>gloss</em> ,   <em>smoothness</em> -. </p><br><blockquote>   ‚Äî     roughness    .       . </blockquote><p>       ,   roughness   ‚Äî   ,            ,   ‚Äî ,       ,    ,   .   <em>gloss</em>   . </p><br><p>  specular    (    <em>metalness</em> ),      .          ,     ,           ,   ,      . <br> <em>Roughness</em>      ,     ,      ,      ‚Äî    , ,  . </p><br><p>   grayscale-  0-255,    . </p><br><p><img src="https://habrastorage.org/webt/mn/fw/0p/mnfw0pktzv7wrjsq340sbxzmb1o.png"><br> <em>Roughness-   . Wes McDermott  Allegorithmic.</em> </p><br><h2>   </h2><br><h3> Normal bump </h3><br><p>  ,    ,       .  ‚Äî  ,   ,        . </p><br><blockquote>       ,   . </blockquote><p>       : <em>vertex normal</em>  <em>face normal</em> , ,     .       ,     <em>hard edges</em> . </p><br><blockquote> , Zbrush      ,        .      ,     . <br><br>  <em>hard/soft edges</em>    ,    ,  <em>hard edges</em>       -   .      UV,    .  PBR   ,       -. </blockquote><p>         .  <em></em>      .        ¬´¬ª,      ‚Äî   ,      3+n .     <em>face</em>    . <em>Face normal</em>    ‚Äî  . </p><br><blockquote>   ,    3+n     . </blockquote><p>     ,   ,     .      ,     ¬´¬ª         .        ,     ,       .  ,      ,   ( <em>tangent space</em> ,  )   ( <em>object space</em> ,  ) ,       ,  . </p><br><p>    ( <em>bump</em> )  ,     ,        .        ,    ‚Äî <em>normal bump</em>     bump.      ‚Äî  .        ,   <em>bump</em> ,  , .           ,  ,     Mikk,       (  Y,     ). <br> <em>Normal bump</em>    PBR-,   ,        ‚Äî ,   .   ,        .             ,      .    ,    ¬´ ¬ª;  ,   ,               .      Rockstar   RAGE ‚Äî  GTAIV/V, RDR1/2,   Star Citizen   CryEngine/Lambeyard.   ,   , ,     ,              . </p><br><p> PBR     . </p><br><h2>    </h2><br><h3> Subsurface scattering, SSS. </h3><br><p>  ,    ,           : ,    .       ,    ,       ,    . </p><br><p>    , SSS,  ,    :   (      )       RGB-.      . </p><br><p><img src="https://habrastorage.org/webt/jc/ai/8f/jcai8frgs4rpzcqduwvnwedw988.png"><br> <em>  SSS.    .</em> </p><br><h2>   </h2><br><h3> Translucency </h3><br><p>  ,      SSS,        . <em>Translucency</em> ‚Äî   ,       . <em>Translucency</em>  -    . </p><br><p><img src="https://habrastorage.org/webt/8q/-d/ww/8q-dww9kndq-jhkolumjyqgjk5q.png"><br> <em>        :  ,    .    .</em> </p><br><h2>    </h2><br><h3> Ambient occlusion </h3><br><p>    <em>ambient occlusion</em> ‚Äî    ,        .       <em>  </em> ,      . AO ‚Äî             ,     .    <em>cavity</em>  PBR-,      .     PBR-    ,     .     AO,               .  ,  SSAO ( <em>screen space ambient occlusion</em> ), HBAO ( <em>horizon based ambient occlusion</em> )    ,     .    ,       ‚Äî    <em>deferred rendering</em> . </p><br><p>    , -   PBR     ,           ,  <em>roughness</em> ,       . </p><br><p><img src="https://habrastorage.org/webt/ad/lv/gw/adlvgwyydcpwgxm_8_uv9vcfsty.png"><br> <em>  ,     ,   . : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.gamingscan.com/what-is-ambient-occlusion/</a></em> </p><br><p> ,   RTX        GI      ,       . </p><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Que lire </font></font></h2><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √âtant donn√© que cet article n'est pas un guide ou un manuel d√©taill√©, mais plut√¥t un m√©mo, pour une √©tude d√©taill√©e du sujet, vous pouvez lire les documents sur les liens ci-dessous. </font></font></p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pr√©sentation GGX, un tas de th√©orie et de math√©matiques</a> </p><br><p>  Guides PBR all√©gorithmiques: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://academy.substance3d.com/courses/the-pbr-guide-part-1</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://academy.substance3d.com/courses/the-pbr-guide-part-2</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Th√©orie de Marmoset</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Th√©orie du moteur de filament</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Description et impl√©mentation de PBR dans 3dCoat</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Documentation UE4</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pr√©sentation de S√©bastien Lagarde</a> </p><br><p>  S'il n'est pas clair qui est Sebastian Lagarde, alors voici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une pr√©sentation d√©taill√©e sur Frostbite</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Documentation Unity</a> </p><br><p>  <em>Intro fixe, merci pour le conseil √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">zhovner</a> .</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr465457/">https://habr.com/ru/post/fr465457/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr465441/index.html">LuaVela: impl√©mentation de Lua 5.1 bas√©e sur LuaJIT 2.0</a></li>
<li><a href="../fr465445/index.html">Notes du fournisseur IoT. Impulse Exit Curse</a></li>
<li><a href="../fr465449/index.html">Comment les probl√®mes de Mail.ru et du FSB ont √©t√© forg√©s par la r√©putation de Pavel Durov et la foi en Telegram</a></li>
<li><a href="../fr465453/index.html">3 septembre - Journ√©e CTO √† Saint-P√©tersbourg</a></li>
<li><a href="../fr465455/index.html">Travailler avec les incidents, am√©liorer la r√©ponse aux incidents et la valeur de la dette technique. Mat√©riaux mitap United Backend 4: Okroshka</a></li>
<li><a href="../fr465459/index.html">Une br√®ve histoire de la visioconf√©rence: du d√©but √† une utilisation commerciale compl√®te</a></li>
<li><a href="../fr465461/index.html">Saisie statique dans une application React</a></li>
<li><a href="../fr465463/index.html">Le bien n'est jamais bon march√©. Mais c'est gratuit</a></li>
<li><a href="../fr465467/index.html">Toute la v√©rit√© sur RTOS. Article # 32. Migration de Nucleus SE: fonctionnalit√©s et compatibilit√© non r√©alis√©es</a></li>
<li><a href="../fr465471/index.html">Avez-vous essay√© d'enregistrer votre site en tant que publication r√©seau √† Roskomnadzor?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>