<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå¨Ô∏è üåù üôÖüèæ Nous nous promenons sagement dans la ville: comme j'ai fait le service pour construire des itin√©raires de randonn√©e int√©ressants üë≤üèº ‚õëÔ∏è ‚òùÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD: puisque le sujet s'est bien d√©roul√© et a montr√© qu'il existe une demande pour un tel service, je vais le d√©velopper davantage. J'ai commenc√© un p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous nous promenons sagement dans la ville: comme j'ai fait le service pour construire des itin√©raires de randonn√©e int√©ressants</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414433/">  <b>UPD:</b> puisque le sujet s'est bien d√©roul√© et a montr√© qu'il existe une demande pour un tel service, je vais le d√©velopper davantage.  J'ai commenc√© un public VKontakte pour recueillir des commentaires et publier des informations de mise √† jour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://vk.com/sightsafari</a> <br><br>  Un quartier inconnu de la ville, un peu de temps libre et le besoin (ou l'envie) de se rendre √† pied au m√©tro / h√¥tel / gare - probablement, tout le monde au moins une fois s'est retrouv√© dans cette situation.  En m√™me temps, d'une part, je veux voir des endroits beaux et int√©ressants, mais d'autre part, le temps limit√© ne me permet pas de trop d√©vier de la route directe. <br><br>  La situation est encore plus compliqu√©e s'il n'y a pas d'attractions majeures √† proximit√© que tout le monde conna√Æt et qui pourraient √™tre incluses dans votre itin√©raire apr√®s une courte recherche sur Internet.  Que faire si vous √™tes coinc√© dans un Kupchino, dont vous avez seulement entendu qu'il valait mieux ne pas rester coinc√© l√†-bas?  Nous devons aller sur le navigateur, en esp√©rant que sur le chemin il y aura quelque chose d'int√©ressant.  Cependant, les navigateurs populaires ne prennent en compte que la distance et le temps de trajet, mais ne tiennent pas compte de l'int√©r√™t de l'itin√©raire.  Je suis tomb√© sur plus de projets en essayant de prendre en compte la commodit√© d'un itin√©raire √† pied (en contournant les autoroutes bruyantes), mais je veux y aller non seulement confortablement, mais aussi voir de la beaut√©. <br><br><img src="https://habrastorage.org/webt/_b/-b/fl/_b-bflyvxlr6x2jswq-njjc8o9s.jpeg"><br><br>  En r√©fl√©chissant un peu, j'ai d√©cid√© de reprendre moi-m√™me cette t√¢che.  Comme toujours, l'id√©e g√©n√©rale de l'algorithme est assez simple, mais le diable est dans les d√©tails.  Et dans le cas de la navigation, les petites choses peuvent √™tre assez importantes et pr√©senter un risque pour la sant√©, car il est peu probable qu'un touriste soit heureux lorsque le navigateur le conduit dans la nature sauvage d'une zone industrielle √† moiti√© abandonn√©e pour un petit panneau comm√©moratif (travail, une fois que c'est arriv√©) . <br><br>  Description de l'algorithme et exemples de travaux sous la coupe, lien √† la fin. <br><a name="habracut"></a><br><h2>  Id√©e principale </h2><br>  Mon id√©e initiale √©tait la suivante: t√©l√©charger la carte Open Street Map, l'analyser, d√©chirer des informations sur tous les objets potentiellement int√©ressants pour les pi√©tons (nous devions encore d√©cider de leur liste), dessiner des zones tampons autour d'eux.  Nous recherchons des moyens avec un cadre standard, un peu du processus de construction d'un graphique de navigation, de sorte que dans ces zones, les poids des bords deviennent plus bas et organisent ainsi l'attraction des itin√©raires pi√©tonniers vers eux. <br><br>  Aussit√¥t dit, aussit√¥t fait.  Pour trouver le chemin, nous avons utilis√© la biblioth√®que GraphHopper, qui peut lire les cartes OSM de la bo√Æte, construire des itin√©raires pour diff√©rents types de transport (voiture, pi√©ton, v√©lo), a plusieurs algorithmes diff√©rents pour trouver le chemin (recherche simple, recherche d'itin√©raires alternatifs, toutes sortes d'options acc√©l√©r√©es et optimis√©es ) et peut pr√©traiter le graphique de navigation pour acc√©l√©rer la recherche (la recherche de base dans la ville fonctionne tr√®s rapidement, en quelques millisecondes).  Pour mon exemple de travail, mon Saint-P√©tersbourg natal a √©t√© choisi - ici, j'ai pu √©valuer moi-m√™me la qualit√© et l'int√©r√™t des itin√©raires construits. <br><br>  En cons√©quence, la version de base de l'algorithme a √©t√© coll√©e sur un genou pendant quelques soir√©es, puis un voyage passionnant a commenc√© le long du r√¢teau et de petites choses, dans lesquelles le diable est connu et ment, dont je parlerai plus tard. <br><br><h2>  Objets pour les touristes et probl√®mes avec OSM </h2><br>  Dans l'Open Street Map, chaque objet est une g√©om√©trie (Node, Way ou Relation) plus un certain nombre de paires de cha√Ænes cl√©-valeur. <br><br>  Voici le Palais d'hiver dans OSM: <br><br><img src="https://habrastorage.org/webt/tq/fn/u3/tqfnu3oazgejzzpy_isave3t-d8.png"><br><br>  Le probl√®me est que, comme OSM est une carte ouverte et modifiable par les participants, la standardisation est boiteuse sur les deux jambes.  Pour d√©signer le m√™me type d'objets, un ensemble diff√©rent de balises et une combinaison diff√©rente d'objets peuvent √™tre utilis√©s, certaines des balises sont consid√©r√©es comme ¬´canoniques¬ª et d√©crites sur le wiki, mais il existe toujours un tas d'options, √† la fois simplement alternatives et franchement erron√©es, mais n√©anmoins utilis√©es .  Par cons√©quent, tout code qui fonctionne avec OSM (en particulier les navigateurs et les moteurs de rendu) est oblig√© de prendre tout cela en compte et contient un tas de code pour g√©rer ces cas sp√©ciaux. <br><br>  Par exemple, le tag Highway = non sp√©cifi√© ne signifie pas ¬´une sorte de route d'un type inconnu¬ª, comme le pensent de nombreux cartographes, mais un type de route tr√®s sp√©cifique selon la classification europ√©enne, mais ils la fa√ßonnent n'importe o√π √† cause du nom.  De plus, ce type de route suppose la pr√©sence d'un trottoir ou d'un trottoir pour pi√©tons, donc le navigateur construit des itin√©raires pi√©tonniers le long de celui-ci, tandis que les pi√©tons ne se rendent pas sur une telle route √† Saint-P√©tersbourg (c'est la chauss√©e de la rue).  Ou un autre exemple: addr: nom de maison, nous utilisons parfois une balise pour le nom des b√¢timents, par exemple, pour une raison quelconque, l'aile ouest du b√¢timent de l'√©tat-major sur la place du Palais porte le nom de cette balise.  Alors que les guides OSM disent qu'il ne devrait √™tre utilis√© que dans les pays o√π les noms sont utilis√©s √† la place des num√©ros de maison (au Japon, cela semble √™tre le cas), et pour les noms de b√¢timents officiels, utilisez l'√©tiquette de nom, etc. <br><br>  Un autre moment qui me fait chier est le marquage des espaces verts.  Il existe deux balises diff√©rentes √† cet effet, loisirs = parc et utilisation du sol = herbe.  Sur la carte, ils ont √† peu pr√®s la m√™me apparence: juste une zone verte, de couleur l√©g√®rement diff√©rente.  En cons√©quence, ils sont m√©lang√©s comme ils le souhaitent.  Pour cette raison, souvent la pelouse de s√©paration entre les chauss√©es de la rue devient un "parc" et commence √† attirer des sentiers de randonn√©e. <br><br>  Toutes ces nuances ont d√ª √™tre d√©couvertes par nous-m√™mes lorsque nous avons construit et analys√© des itin√©raires. <br>  En tant qu'ensemble d'objets d'int√©r√™t pour les pi√©tons, la liste suivante a finalement √©t√© s√©lectionn√©e: <br><br><ul><li>  Attractions touristiques marqu√©es tourisme </li><li>  Espaces verts.  loisirs = parc, jardin.  Apr√®s quelques d√©lib√©rations, des cimeti√®res landuse = cemetry ont √©t√© ajout√©s.  D'une part, il y a une attraction moyenne, de l'autre, par exemple, sur l'√Æle Vasilievsky √† Saint-P√©tersbourg, la seule grande zone verte est le cimeti√®re, que les habitants utilisent √† la place du parc, mais il n'y a pas de vrais parcs l√†-bas. </li><li>  Eau: rivi√®res, lacs, √©tangs.  Il y a un m√©li-m√©lo d'eau, des balises de voie navigable et un tas de valeurs en double.  C'est tellement agr√©able de marcher le long de la promenade par une chaude journ√©e.  En tout cas, je le pensais jusqu'√† ce que j'essaie de traiter Smolensk - il s'est av√©r√© soudainement qu'au fond de la rivi√®re ce n'√©tait pas un beau remblai comme le n√¥tre √† Saint-P√©tersbourg, mais un terrain vague envahi et jonch√© duquel les pi√©tons pr√©f√©reraient rester √† l'√©cart.  Mais jusqu'√† pr√©sent, il n'a pas √©t√© possible de distinguer ces situations uniquement de la carte. </li><li>  B√¢timents et structures historiques, marqu√©s historiques.  Ils sont g√©n√©ralement tout simplement magnifiques </li><li>  Toutes autres petites choses en ville marqu√©es d'une √©tiquette d'agr√©ment.  Cela a beaucoup de sens, je n'en ai choisi que quelques-uns, par exemple, une horloge de rue (horloge) - elle est souvent magnifique, les √©difices religieux (place_of_worship), le street art tout le monde (graffiti) et quelques autres </li><li>  Rues et places pi√©tonnes autoroute = pi√©tonne </li></ul><br>  Au cours de l'√©tude, j'ai r√©alis√© qu'en plus des zones positives qui attirent les pi√©tons, il est n√©cessaire d'ajouter des zones n√©gatives qui les repoussent.  Cette liste comprend jusqu'√† pr√©sent: <br><br><ul><li>  Utilisation des terres des b√¢timents = construction.  Les pi√©tons ne sont pas tr√®s contents de marcher sous un √©chafaudage, dans la poussi√®re qui vole d'un chantier de construction </li><li>  Zones industrielles et garages landuse = industriels, garages.  √Ä ce moment-l√†, cette nuance avec l'institution d'un pi√©ton s'est produite (et nous, √† l'Institut de design et d'urbanisme de l'ITMO, l'avons test√©e sur des √©tudiants qui ont suivi des itin√©raires trac√©s et ont ensuite r√©dig√© des critiques dans le cadre d'une √©tude du confort de marche de la r√©gion de Petrograd) dans la jungle de la zone industrielle de Lenpolygraphmash.  Il s'est av√©r√© que l√†-bas, tout le quartier n'est pas marqu√© avec cette √©tiquette (comme c'est g√©n√©ralement le cas pour le marquage de grandes zones industrielles), mais chaque b√¢timent est s√©par√©. </li><li>  Id√©alement, je veux aussi √©loigner les pi√©tons des grandes autoroutes de la ville, o√π il y a de la poussi√®re, du bruit, beaucoup de voitures et g√©n√©ralement il n'y a rien √† regarder.  Mais jusqu'√† pr√©sent, il n'a pas √©t√© possible de les d√©tecter sans ambigu√Øt√©.  Dans OSM, il n'y a essentiellement que le nombre de voies de circulation, mais ce crit√®re n'est pas suffisant (de nombreuses rues touristiques importantes, comme Nevsky Prospect, sont √©galement √† plusieurs voies) </li></ul><br>  Le m√™me Lenpolygraphmash, contenant quelque part dans sa nature un monument √† l'imprimerie, et o√π mon algorithme a tra√Æn√© le pauvre √©tudiant <br><br><img src="https://habrastorage.org/webt/yy/di/ai/yydiaik86aloogncpomcsobrjum.png"><br><br><h2>  L'importance des attractions </h2><br>  De toute √©vidence, les vues sont diff√©rentes.  Il y a de grands objets de renomm√©e mondiale - comme la Tour Eiffel ou la cath√©drale Saint-Isaac √† Saint-P√©tersbourg, qui attirent un grand nombre de touristes, et pour visiter, les gens peuvent faire un crochet d√©cent.  Et il y a quelques petites d√©corations de petites villes - du street art, une petite sculpture dans la cour que les gens ne sont pr√™ts √† voir qu'en chemin et ne veulent pas les faire glisser de loin.  Pour la construction correcte d'itin√©raires int√©ressants et pratiques, il √©tait n√©cessaire d'apprendre √† s√©parer les diff√©rentes cat√©gories d'attractions, et tout ce que nous avons dans OSM est une certaine g√©om√©trie et un ensemble de balises.  J'ai d√ª trouver un ensemble de r√®gles empiriques pour attribuer l '¬´importance¬ª d'un point d'int√©r√™t qui d√©termine davantage les changements de poids dans le graphique. <br><br>  Initialement, l'importance est nulle et augmente si les conditions suivantes sont remplies: <br><br><ul><li>  +3 s'il y a une √©tiquette historique - seuls les b√¢timents historiques importants l'ont, et m√™me pas tous </li><li>  +3 pour la pr√©sence de balises wikipedia ou wikidata.  Seuls les objets importants ont g√©n√©ralement leurs propres pages wiki. </li><li>  +1 pour la pr√©sence d'un lien ou d'une URL - encore une fois, tout le monde n'a pas son propre site, mais souvent cette balise m√®ne √† une page d'un certain catalogue et de petits objets l'ont </li><li>  +1 pour chaque √©tiquette de nom.  Le nom peut √™tre d√©fini de diff√©rentes mani√®res, il peut y avoir toutes sortes d'anciens noms pour les noms historiques ou les noms traduits dans d'autres langues.  Encore une fois, la pr√©sence de nombreux noms indique l'importance suffisante de l'objet (puisque quelqu'un √©tait fatigu√© de les d√©poser tous) </li><li>  b√¢timent: architecture - style architectural, g√©n√©ralement rev√™tu de toutes sortes de beaux monuments architecturaux </li></ul><br>  Cette liste est d√©termin√©e empiriquement et vous permet √† tout le moins de s√©parer le Palais d'Hiver des graffitis sans nom √† la p√©riph√©rie.  En cons√©quence, une importance de 0 signifie un petit objet local sans nom (un brin de verdure, des graffitis), environ 3-4 sont d√©j√† quelque chose d'int√©ressant (une √©glise, une place o√π vous pouvez vous asseoir et vous d√©tendre), plus pr√®s de 10, les attractions au niveau de la ville commencent, le m√™me Palais d'Hiver. <br><br>  La liste n'est pas parfaite et s'appuie fortement sur les donn√©es OSM, qui sont souvent incompl√®tes.  Par exemple, la porte Narva n'avait initialement qu'une seule unit√© d'importance, car rien √† part le nom n'y √©tait appos√©.  J'ai d√ª aller moi-m√™me √† OSM et ajouter les noms, le style, les ann√©es de construction, la hauteur (pour d√©terminer correctement la visibilit√©, la suite), etc.  En g√©n√©ral, cela pr√©sente √©galement un int√©r√™t public - pour am√©liorer la qualit√© des itin√©raires, je vais de temps en temps sur OSM et y pose des balises manquantes, qui peuvent ensuite √™tre utilis√©es par d'autres navigateurs ou programmes. <br><br><h2>  Domaines d'influence </h2><br>  Les attractions sont de tailles diff√©rentes.  Une petite sculpture doit √™tre vue √† une distance ne d√©passant pas 5 √† 7 m√®tres.  Le Cavalier de bronze est bien visible de 20 √† 30.  La cath√©drale Saint-Isaac, l'un des plus hauts b√¢timents du centre-ville, est d√©cemment visible de 200 √† 300 (par cela, je comprends qu'il n'est pas n√©cessaire qu'un touriste se rapproche, mais il est assez confortable de profiter de la vue de cette distance, on peut le voir m√™me √† un kilom√®tre de l'autre rive de la Neva , mais sans d√©tails).  Comment d√©terminer √† quelle distance l'attraction devrait affecter les itin√©raires des pi√©tons? <br><br>  Le cavalier de bronze et le d√¥me de la cath√©drale Saint-Isaac au loin <br><br><img src="https://habrastorage.org/webt/qf/mt/ac/qfmtachakldz_hek0cft9da_vkc.jpeg"><br><br>  Tout d'abord, j'ai construit des rayons de visibilit√© empiriques.  Ils d√©pendent de toutes les informations disponibles sur l'attraction et la transforment en l'un des quatre rayons: petit 30 m√®tres, moyen 100, grand 250 et √©norme 350 m√®tres. <br><br>  Un peu √† part, la visibilit√© des rivi√®res et des parcs.  Pour eux, je mets 30 m√®tres, soit  correspond approximativement √† la largeur de la promenade ou de la rue autour du parc.  Puisque regarder le parc de loin est plut√¥t inutile, vous devez aller √† c√¥t√©. <br><br>  Le type de visibilit√© est d√©termin√© par les r√®gles: <br><br><ul><li>  Les objets ponctuels (c'est-√†-dire sp√©cifi√©s par le type Point OSM) sont de faible visibilit√©, ce sont g√©n√©ralement de petits monuments et du street art </li><li>  Mais le point et avec la balise historique est Medium, car  ce sont souvent de grands monuments sur de hauts socles, comme le m√™me cavalier de bronze </li><li>  Les zones de moins de 20 * 20 m√®tres (chemin ou relation) sont moyennes </li><li>  Plus - Large </li><li>  Si l'objet a une hauteur d'√©tiquette (hauteur en m√®tres) ou un b√¢timent: niveaux (nombre d'√©tages), alors √† une hauteur de plus de 50 m√®tres, il est consid√©r√© comme un √©norme - cela est juste sp√©cialement con√ßu pour Isaac et d'autres grandes cath√©drales et b√¢timents visibles de loin. </li></ul><br>  Mais un probl√®me s'est pos√©: dans les conditions d'un d√©veloppement dense du centre historique de Saint-P√©tersbourg, l'approche na√Øve avec des rayons n'a pas fonctionn√©, car la zone de visibilit√© r√©elle d'un temple situ√© dans la cour arri√®re √©tait beaucoup plus petite, en fait, elle n'√©tait visible que depuis la section de rue directement en face.  J'ai d√ª commencer √† construire des polygones de visibilit√© honn√™tes (enfin, presque). <br><br>  L'√©glise Sainte-Catherine se dresse au fond de la cour, entour√©e de maisons de tous c√¥t√©s: <br><br><img src="https://habrastorage.org/webt/i1/v9/7x/i1v97xyfbvptyyalot5aegbmjp0.png"><br><br>  Il fallait d'abord d√©terminer les obstacles.  Eh bien, tout est simple, j'ai pris et lu √† partir des donn√©es OSM tous les polygones avec la balise de construction.  Ce seront des polygones qui bloqueront notre visibilit√©.  Il a ensuite √©crit un algorithme na√Øf simple pour construire un polygone pour la visibilit√© d'un point en utilisant le lancer de rayons.  Je n'ai pas besoin d'une grande pr√©cision l√†-bas, une douzaine de rayons par point suffisaient.  Au d√©but, j'ai pris le centre de gravit√© de la g√©om√©trie du point de rep√®re sans plus tarder, mais cela n'a pas donn√© les meilleurs r√©sultats pour les b√¢timents longs (longs et √©troits).  Par cons√©quent, √† l'avenir, pour les grandes attractions, j'ai commenc√© √† prendre trois points - le centro√Øde et les deux points les plus √©loign√©s et l'un de l'autre √† la limite ext√©rieure.  Pourquoi n'ai-je pas cr√©√© une visibilit√© honn√™te?  Parce que si l'algorithme pour construire la r√©gion de visibilit√© d'un point est trivial (nous laissons les rayons sortir du point dans toutes les directions, voyons o√π ils ont travers√© les obstacles les plus proches, connectez ces points), alors il est beaucoup plus difficile de construire une visibilit√© honn√™te d'un bord (et, enfin, d'un polygone) (le premier vient √† d√©cision de la t√™te - pour renforcer la visibilit√© des deux extr√©mit√©s des c√¥tes et combiner - √©videmment faux). <br><br>  Le r√©sultat est une bonne approximation.  Il se construit imparfaitement, mais pour les besoins de la navigation pi√©tonne, une telle pr√©cision nous suffit.  Le seul probl√®me est qu'il ne prend pas en compte la hauteur des b√¢timents, c'est-√†-dire  tout petit stand bloquera notre vue sur le clocher √† cinq √©tages.  Mais il n'y a rien √† faire - les donn√©es OSM ne contiennent pas toujours un certain nombre d'√©tages, et il est beaucoup plus difficile de cr√©er des volumes de visibilit√© en 3D.  Bien que j'y revienne peut-√™tre. <br><br>  Construction de polygones de visibilit√© pour cette √©glise et les √©glises voisines <br><br><img src="https://habrastorage.org/webt/u3/nn/d1/u3nnd1avv5rxery--jfkrhtawpq.png"><br><br><h2>  La beaut√© de l'itin√©raire et comment l'augmenter </h2><br>  Ainsi, nous avons appris √† consid√©rer l'importance et la visibilit√© des attractions et semblons avoir commenc√© √† construire de bons itin√©raires.  En tout cas, il en √©tait ainsi, alors que je testais dans les r√©gions centrales de Saint-P√©tersbourg, qui ont une tr√®s forte densit√© de beaut√©s par kilom√®tre carr√©. <br><br>  Cependant, cela valait la peine de s'√©loigner un peu du centre, quand soudain l'algorithme a commenc√© √† reconna√Ætre son impuissance.  Et l'itin√©raire qu'il a construit a commenc√© √† co√Øncider avec le plus court.  √âtant donn√© que le chat a perdu beaucoup de vues dans ces domaines, ils sont situ√©s loin les uns des autres.Par cons√©quent, lors de la recherche d'un chemin utilisant la m√©trique combin√©e ¬´beaut√© + distance¬ª, la contribution du premier terme s'est av√©r√©e presque nulle, en cons√©quence, l'algorithme a simplement construit les itin√©raires les plus courts. <br><br>  Bien s√ªr, on pourrait toujours dire: ¬´Nous ne sommes pas comme √ßa, ce sont nos villes ennuyeuses¬ª, mais ce ne serait pas tr√®s correct.  Par cons√©quent, je me suis demand√© comment √©valuer l'itin√©raire construit et comment l'am√©liorer.  La solution la plus simple qui vient imm√©diatement √† l'esprit est d'√©tendre l'itin√©raire en y for√ßant un crochet √† n'importe quel point d'int√©r√™t qui a √©t√© omis. <br><br>  Maintenant, dans les cas o√π a) l'importance totale de toutes les attractions de l'itin√©raire est inf√©rieure d'un kilom√®tre √† une certaine valeur, ou b) l'utilisateur lui-m√™me a choisi de construire l'itin√©raire le plus int√©ressant, mon algorithme essaie de l'am√©liorer.  Pour ce faire, l'itin√©raire initial est construit, un tampon est pris autour de lui (son √©paisseur est d√©termin√©e par la longueur, plus l'itin√©raire est long - plus le crochet est autoris√© √† faire), plusieurs nouveaux sites (non encore inclus dans l'itin√©raire) avec un score&gt; 2 sont recherch√©s √† l'int√©rieur de ce tampon (nous ne voulons pas faire des hame√ßons par kilom√®tre aux jardins publics non-nom) et de nouveaux itin√©raires sont trac√©s du point de d√©part √† cette cible interm√©diaire, et de celui-ci au point de destination.  Dans le m√™me temps, la longueur est en outre contr√¥l√©e, en cons√©quence, nous devons obtenir un itin√©raire pas plus de deux fois plus long que le chemin le plus court entre les points de d√©part et d'arriv√©e. <br><br>  La premi√®re version de l'algorithme (√† gauche) √©tait impuissante √† trouver quelque chose d'int√©ressant et a construit l'itin√©raire le plus court.  Mais la version avec l'ajout d'une attraction interm√©diaire (√† droite) comprenait le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DOT KV-19</a> , il est dans le coin inf√©rieur droit de l'itin√©raire (√† ce niveau de zoom, il n'est pas visible, mais le service l'affichera dans la liste et vous permettra de le trouver sur la carte en cliquant sur le nom) . <br><br><img src="https://habrastorage.org/webt/-a/xs/v9/-axsv9ra4o2tcvhthknqhqumwws.jpeg"><br><br>  Le m√™me bunker.  En g√©n√©ral, √† Kupchino, il y a suffisamment de tels objets li√©s √† la d√©fense de Leningrad, car c'est l√† que les lignes d√©fensives de la ville sont pass√©es: <br><br><img src="https://habrastorage.org/webt/gh/vv/an/ghvvanixv70ulqi2m45sgcipbtm.jpeg"><br><br>  Bien s√ªr, loin de tout pi√©ton acceptera de faire un d√©tour pour le plaisir de certains insignifiants √† ses yeux.  C'est pourquoi le service affiche la longueur de l'itin√©raire par rapport au plus court et la liste des attractions sur celui-ci, et seul l'utilisateur peut d√©cider s'il est int√©ress√© par un tel itin√©raire.  De plus, il y a un curseur qui vous permet de r√©duire (ou vice versa d'augmenter) le crochet maximum autoris√©. <br><br>  En pratique, j'ai d√ª faire face √† d'autres probl√®mes et bizarreries. -        ¬´¬ª    .               .  ,        ,       .        ,            .   ¬´¬ª        (       ),           ,               . <br><br>          .    ,         ,    .     .           .      .       ,    ( ),        ,          .        ,         ‚Äî        .              .        .         ,    ,             . <br><br><h2>   </h2><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sightsafari.city</a> <br>      ( OSM-,     ),       ,     .     :     ,   ,     ,   ‚Äî          . <br><br>   .             ,       : <br><br><img src="https://habrastorage.org/webt/br/fh/9g/brfh9gm8tff7duh4f5pmngdmlmu.jpeg"><br><br>       .     ,   ,     ,          . <br><br><img src="https://habrastorage.org/webt/ij/s3/sg/ijs3sgj22wuqs5amlzwo1hange0.jpeg"><br><br>  .            ,       . <br><br><img src="https://habrastorage.org/webt/4h/1x/ll/4h1xlltxfkpj22i2-h0zrtwsxlw.jpeg"><br><br>   :     (   )    ¬´ ¬ª    .   ,   ,    ,      . <br><br><img src="https://habrastorage.org/webt/nn/qo/0e/nnqo0etvaljjcuoycvb9-rky83c.png"><br><br><h2>  Conclusion </h2><br>      -,    (      ).    ,        .   ,     (     ),   -    . <br><br>       ‚Äî , , ,   (   ,   , ),  -  .       -   OSM,     - ,          (   ,        ,     2-3  ,        ). <br><br> <b>UPD:</b>     , , ,  , , , --, , , , , , ,      .         ,        . <br><br> <b>UPD 2:</b>  OSM,    ,   (  ,     ),       ,    .   -     ,     (  )     - ,         (         ). <br><br> <b>UPD 3:</b>          ,            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://vk.com/public168028574</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414433/">https://habr.com/ru/post/fr414433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414423/index.html">Ce jour-l√†, nous nous sommes rapproch√©s le plus possible ... Une nouvelle version de SBM 11.4 est sortie</a></li>
<li><a href="../fr414425/index.html">Algorithme de reconnaissance de mod√®le d'apprentissage √† un coup</a></li>
<li><a href="../fr414427/index.html">Que peut faire une imprimante 3D? Rapport de l'exposition Maker Faire Bay Area 2018</a></li>
<li><a href="../fr414429/index.html">Comment apprendre une langue √©trang√®re sans professeur. Partie 1. ¬´Mon exp√©rience¬ª</a></li>
<li><a href="../fr414431/index.html">Mitap JavaJam. D√©bat Javista, rafting, exp√©riences et microservices</a></li>
<li><a href="../fr414437/index.html">Le blocage des t√©l√©grammes a d√©clench√© une augmentation du co√ªt des startups nationales</a></li>
<li><a href="../fr414441/index.html">Exp√©rience des migrations de bases de donn√©es 1440</a></li>
<li><a href="../fr414443/index.html">Caract√©ristiques des appels de fonction en C ++</a></li>
<li><a href="../fr414445/index.html">Am√©liorer Zimbra avec la suite Zextras</a></li>
<li><a href="../fr414447/index.html">Des tr√©sors de tous les temps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>