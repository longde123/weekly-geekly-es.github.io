<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëµüèæ üì≤ üòß Premiers pas avec Google Analytics: App + Web üåΩ üê∂ ‚¨úÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Google a r√©cemment publi√© en acc√®s public une nouvelle version de Google Analytics appel√©e App + Web . Simo Ahab a d√©j√† √©crit une excellente instructi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Premiers pas avec Google Analytics: App + Web</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463143/">  Google a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©cemment publi√© en acc√®s public une</a> nouvelle version de Google Analytics appel√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">App + Web</a> .  Simo Ahab a d√©j√† √©crit une excellente instruction √©tape par √©tape sur la fa√ßon de commencer √† travailler avec l'outil, j'ai donc d√©cid√© de le traduire en russe.  Pour ma part, j'ajouterai que le produit vient d'appara√Ætre en version b√™ta et, apparemment, il sera encore pratiquement termin√©.  Nous avons d√©j√† commenc√© √† tester la nouvelle structure de donn√©es et les capacit√©s de la fonction d'exportation de donn√©es int√©gr√©e dans Google BigQuery et esp√©rons bient√¥t vous en dire plus sur les avantages et les inconv√©nients.  En g√©n√©ral, les analystes √©valuent aujourd'hui positivement les innovations.  Par exemple, Vlad Flax de OWOX BI estime qu'avec cette mise √† jour, Google a simplifi√© le processus de collecte et de livraison de donn√©es de Google Analytics √† BigQuery pour les projets qui sont pr√™ts √† changer la structure de leurs donn√©es.  En outre, il ajoute de la valeur √† Google BigQuery en tant que DWH pour les donn√©es marketing. <a name="habracut"></a><br><br>  Vous trouverez ci-dessous une traduction de l'article de Simo avec ses notes et impressions sur son utilisation. <br><br>  Malgr√© le titre maladroit, c'est un tr√®s bon outil pour tous les buts et objectifs de Google Analytics V2 ou Firebase Analytics for Web.  Ici, nous ne parlons pas de la mani√®re charmante de cr√©er des rapports de synth√®se entre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Analytics pour Firebase</a> et Universal Analytics, ni de l'am√©lioration d'Universal Analytics. <br><br>  Non, nous parlons d'un nouveau mod√®le de mesure du trafic Web qui fonctionne bien avec Google Analytics pour Firebase. <br><br>  C'est toujours un produit l√©g√®rement non poli, et la documentation est encore un peu manquante, alors j'ai pens√© que je vous donnerais un avantage et montrer comment configurer la collecte de donn√©es √† l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Tag Manager</a> .  J'ai l'intention de publier un guide complet, appropri√© et complet d√®s que la fonctionnalit√© quittera les tests b√™ta.  N√©anmoins, cet article devrait aider ceux d'entre vous qui sont d√©j√† d√©sireux d'essayer toutes ses nouvelles fonctionnalit√©s et choses int√©ressantes en ce moment. <br><br>  Le nom Google Analytics: App + Web est quelque peu maladroit.  Il me semble que ce n'est qu'une question de temps, quand l'appellerons-nous Firebase pour le Web ou quelque chose comme √ßa, parce que c'est ce que c'est par essence.  Dans cet article, je l'appellerai GAv2 dans les endroits o√π je serai simplement r√©ticent √† taper le nom en entier (oui, je suis paresseux). <br><br><img src="https://habrastorage.org/webt/n2/8n/g4/n28ng4pnp0xw7zhsw9myfhx3a0o.jpeg"><br><br>  Avant de commencer, ouvrez le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">merveilleux blog de</a> Crista Seyden dans un nouvel onglet et portez une attention particuli√®re aux trois articles qu'elle a publi√©s sur les fonctionnalit√©s de cr√©ation de rapports de Google Analytics: App + Web. <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nouvelles propri√©t√©s App + Web dans Google Analytics</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cheminement dans Google Analytics</a> </li><li>  <a href="">Streamview dans Google Analytics</a> . </li></ol><br>  <i>MISE √Ä JOUR: Imm√©diatement apr√®s avoir publi√© cet article, Krista a publi√© un autre excellent guide, et la grande chose est qu'il compl√®te cela car il couvre de mani√®re beaucoup plus d√©taill√©e les √©tapes impliqu√©es dans la cr√©ation d'un projet Firebase.</i>  <i>En g√©n√©ral, consultez ceci: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Configuration √©tape par √©tape d'App + Web</a> .</i> <br><br>  Je vais commencer par quelques mots d'ouverture, donc si vous le souhaitez, ignorez-les et passez directement aux √©tapes de mise en ≈ìuvre. <br><br><h3>  Avertissements </h3><br>  Tout d'abord, Google Analytics: App + Web est en <b>phase de</b> test <b>b√™ta</b> .  Cela signifie qu'il n'est pas encore compl√®tement pr√™t.  S√©rieusement, ce n'est pas encore pr√™t.  La plupart des choses dont je me suis efforc√© maintenant tomberont sans aucun doute sur la plate-forme √† un moment donn√©, ainsi que les r√©ponses √† de nombreuses questions que vous aurez, seront tr√®s probablement donn√©es dans les versions futures. <br><br>  Voici quelques points que j'ai trouv√©s dans l'interface utilisateur de cr√©ation de rapports et dans les param√®tres de Google Tag Manager: <br><br><ul><li>  Aucun rapport sp√©cialis√©, tel que le rapport de recherche de site ou le commerce √©lectronique </li><li>  Il n'y a aucun moyen de distinguer les √©v√©nements collect√©s, recommand√©s et personnalis√©s automatiquement dans l'interface utilisateur de g√©n√©ration de rapports. </li><li>  Vous pouvez configurer la ressource utilisateur, voir ci-dessous comment le faire. </li><li>  Il n'est pas possible d'envoyer aux √©l√©ments un tableau (ou tout autre objet multidimensionnel) en tant que param√®tre d'√©v√©nement dans Google Analytics lors de l'utilisation de GTM. </li><li>  La d√©finition de valeurs constantes dans la balise de configuration dans GTM semble impossible. </li><li>  Vous pouvez mettre √† niveau les ressources Firebase Analytics existantes conform√©ment √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce document de support</a> .  Lorsque vous ouvrez une ressource dans Google Analytics (√† condition que vous ayez li√© cette ressource dans Google Analytics), vous verrez une banni√®re bleue en haut de l'√©cran vous invitant √† mettre √† jour. </li></ul><br>  Assurez-vous de suivre le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">blog officiel</a> , ainsi que le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">blog</a> de Krista, car ils deviendront vos baguettes magiques pour plus d'informations, y compris les probl√®mes consacr√©s aux probl√®mes r√©pertori√©s dans ce chapitre. <br><br><img src="https://habrastorage.org/webt/mp/g3/bu/mpg3bujaubzo9qnva_gpt1j2yao.jpeg"><br><br>  Et enfin, le point √©vident.  <b>Ce n'est pas Universal Analytics</b> .  La plupart des choses que vous avez l'habitude de voir dans Universal Analytics ne sont pas dans Firebase.  Personnellement, j'esp√®re que la parit√© des fonctionnalit√©s est imminente, car maintenant Google a la possibilit√© de cr√©er quelque chose de nouveau et de meilleur.  Mais, bien s√ªr, nous souhaitons tous que cette plate-forme remplace Universal Analytics √† un moment donn√©.Par cons√©quent, elle devrait √™tre utile dans au moins les m√™mes cas d'utilisation. <br><br>  Voici, √† mon avis, les principales diff√©rences entre Universal Analytics et la nouvelle plateforme. <br><br>  <b>Universal Analytics:</b> <br>  Tout est construit autour du concept d'une session <br>  D√©finitions personnalis√©es pour la port√©e des r√©sultats, des sessions et des utilisateurs. <br>  Rapports de surface en temps r√©el. <br>  Segments. <br>  Pas de structuration s√©mantique. <br>  Quotas et limites assez favorables (sauf pour l'√©chantillon). <br><br>  <b>Google Analytics V2:</b> <br>  Tout est construit autour des concepts ¬´utilisateur¬ª et ¬´√©v√©nement¬ª <br>  Propri√©t√©s personnalis√©es et param√®tres d'√©v√©nement personnalis√©s <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">StreamView et DebugView</a> fournissent des d√©tails plus approfondis. <br>  Le public. <br>  √âv√©nements collect√©s et recommand√©s automatiquement. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Quotas et restrictions</a> stricts (sans √©chantillonnage). <br><br>  Les limitations sont particuli√®rement douloureuses par rapport √† ce qu'a fait Universal Analytics. <br><br>  Dans tous les cas, je suis s√ªr que ces probl√®mes seront r√©solus avant que Google Analytics: App + Web sorte des tests b√™ta, mais une chose est s√ªre: <b>ce n'est pas Universal Analytics</b> .  Essayez de consid√©rer le nouveau mod√®le de mesure comme une opportunit√© d'aller au-del√† de ce qu'Universal Analytics pourrait jamais offrir, et pas seulement comme un moyen de peupler l'ancien mod√®le de donn√©es GA. <br><br>  En raison de ces avertissements, <b>je vous recommande fortement d'arr√™ter la collecte de donn√©es dans Universal Analytics et de collecter des donn√©es exclusivement dans Google Analytics: App + Web</b> .  Dans tous les cas, il est pr√©f√©rable d'ex√©cuter ce nouveau mod√®le de mesure en parall√®le avec n'importe quel param√®tre qui √©tait d√©j√† sur le site afin de pouvoir comparer la parit√© entre les deux ensembles de donn√©es. <br><br><h3>  Cr√©ation de nouveaux param√®tres d'analyse: App + Web </h3><br>  Pour cr√©er une nouvelle propri√©t√© Google Analytics: App + Web, vous devez proc√©der comme suit: <br><br>  <b>Faites attention!</b>  D'apr√®s la documentation publi√©e, il est probable que ces √©tapes seront consid√©rablement simplifi√©es √† l'avenir. <br><br><h3>  √âtape 1: cr√©er un nouveau projet Firebase </h3><br>  Acc√©dez √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la console Firebase</a> et cr√©ez un nouveau projet.  Ce sera le projet Firebase de base pour votre nouvelle configuration. <br><br><img src="https://habrastorage.org/webt/3b/3v/yn/3b3vynm7uvhajdryv-x5lbugtze.jpeg"><br><br>  Donnez au projet un nom et un ID (l'ID doit √™tre unique, il sera g√©n√©r√© en fonction du nom du projet). <br><br>  Lisez et acceptez les termes de Firebase, puis cliquez sur Continuer. <br><br><img src="https://habrastorage.org/webt/ef/hv/tz/efhvtzmljd3aumtxmioqduqtfpo.jpeg"><br><br>  √Ä l'√©tape suivante, assurez-vous que la case ¬´Configurer Google Analytics pour mon projet¬ª est coch√©e, puis cliquez sur Continuer. <br><br><img src="https://habrastorage.org/webt/wt/4j/ps/wt4jps7l5yylvdsqaesf0yv1gji.jpeg"><br><br>  Selon que vous avez d√©j√† des comptes Google ou non, vous pouvez maintenant choisir dans quel compte cr√©er la ressource ou cr√©er un nouveau compte dans son ensemble.  Si vous n'avez pas de compte Google Analytics associ√© √† votre connexion, vous devrez accepter les conditions d'utilisation de GA, apr√®s quoi un nouveau compte et une nouvelle ressource seront cr√©√©s pour vous. <br><br><img src="https://habrastorage.org/webt/d9/bz/f-/d9bzf-tavmmbmyjqpm03sob2nec.jpeg"><br><br>  Une fois que vous avez cliqu√© sur <b>Cr√©er un projet</b> et que le traitement est termin√©, vous pouvez acc√©der √† Google Analytics et trouver la nouvelle ressource Web App + dans le compte que vous avez choisi. <br><br><img src="https://habrastorage.org/webt/bp/js/y_/bpjsy_kg-eccdxlagnoqgpkgnny.jpeg"><br><br><h3>  √âtape 2. Cr√©ez un nouveau flux Web </h3><br>  Le nouveau mod√®le de mesure s'articule autour de <b>flux</b> pouvant provenir de vos applications (iOS et Android) ou d'Internet.  J'esp√®re qu'√† l'avenir, nous verrons de nouveaux flux, tels que le "Protocole de mesure", qui acceptera les requ√™tes HTTP de tout appareil connect√© √† Internet. <br><br>  Dans les deux cas, s√©lectionnez l'option <b>Flux de donn√©es</b> dans la colonne des ressources et s√©lectionnez <b>Web</b> . <br><br><img src="https://habrastorage.org/webt/ou/wv/1g/ouwv1guhselkp0mda09ag4dzxyq.jpeg"><br><br>  Pour configurer un flux, entrez l'URL de votre site et donnez au flux un nom descriptif.  Cliquez ensuite sur le petit engrenage pour configurer la mesure am√©lior√©e. <br><br><img src="https://habrastorage.org/webt/r6/tn/nl/r6tnnlyvn6s7tvdq4lo254hje7w.jpeg"><br><br>  La mesure am√©lior√©e ajoute essentiellement au site des fonctionnalit√©s de suivi automatique qui sont activ√©es lorsque la balise de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">configuration de base</a> est cr√©√©e. <br><br><img src="https://habrastorage.org/webt/gy/kv/lh/gykvlhuh7mitdzp-v_o3eyg0cy4.jpeg"><br><br>  La liste des choses qui peuvent √™tre suivies automatiquement est assez claire et bien expliqu√©e dans la configuration de mesure am√©lior√©e (voir capture d'√©cran ci-dessus). <br><br>  Une fois que vous √™tes pr√™t, cr√©ez un flux de donn√©es et vous verrez un tas d'instructions de marquage et d'autres points sur l'√©cran.  La chose la plus importante √† noter est l'ID de mesure.  Gardez cet onglet ouvert afin de pouvoir copier les ID de dimension dans les balises Google Tag Manager si n√©cessaire. <br><br><img src="https://habrastorage.org/webt/xw/mt/pg/xwmtpgjlosplxdl0mvikm14gg-y.jpeg"><br><br>  Vous avez termin√©?  Ok, passons maintenant au gestionnaire de balises Google. <br><br><h3>  Cr√©er une balise de configuration de base </h3><br>  Dans Google Tag Manager, lorsque vous cr√©ez une nouvelle balise, vous verrez deux nouveaux mod√®les de balises dans le s√©lecteur. <br><br><img src="https://habrastorage.org/webt/uw/fa/n-/uwfan-erdvibiojmzalem4bptsq.jpeg"><br><br>  Google Analytics: App + Web Configuration est similaire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√† la commande</a> <code>config</code> utilis√©e dans l'impl√©mentation <code>gtag.js</code>  Vous l'utilisez pour configurer le tracker, envoyer une premi√®re page vue et d√©finir des valeurs constantes pour tous vos √©v√©nements. <br><br>  Lorsque vous ouvrez le mod√®le, vous n'√™tes certainement pas accueilli par beaucoup d'options.  En fait, vous avez un champ pour d√©terminer l'ID de mesure, un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commutateur</a> pour choisir d'envoyer ou non la vue de page initiale et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des champs de configuration</a> que vous pouvez d√©finir dans la balise. <br><br><img src="https://habrastorage.org/webt/lb/7b/od/lb7bodf5qbqg4xwpbnslhqt61rs.jpeg"><br><br>  Pour configurer la balise de base, sp√©cifiez-la dans le champ ID de mesure du flux Web cr√©√© dans la partie pr√©c√©dente.  Vous pouvez d√©finir une valeur dans le champ <code>user_id</code> qui est associ√©e √† l'ID d'authentification de l'utilisateur au cas o√π vous voudriez ouvrir la voie √† la mesure entre les appareils et les applications. <br><br>  Selon la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> , vous devez pouvoir d√©finir tous les param√®tres d'√©v√©nement dans les champs √† d√©finir de la balise de configuration si vous souhaitez que ces param√®tres d'√©v√©nement soient envoy√©s √† chaque appel ult√©rieur utilisant le m√™me ID de dimension.  Malheureusement, au moment de la r√©daction, cela ne semble pas fonctionner. <br><br><h3>  D√©finir des propri√©t√©s personnalis√©es </h3><br>  Pour d√©finir les propri√©t√©s des utilisateurs, vous devez d'abord les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cr√©er</a> dans l'interface utilisateur de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cr√©ation</a> de rapports. <br><br><img src="https://habrastorage.org/webt/vf/_g/k3/vf_gk3ltoh6kpmfwcmlx9ydqyhi.jpeg"><br><br>  Ensuite, acc√©dez √† Champs √† d√©finir dans votre configuration et ajoutez un nouveau champ.  Le nom du champ doit √™tre <code>user_properties</code> . <br><br><img src="https://habrastorage.org/webt/vs/w7/8e/vsw78exc-nrgoxryhiecqkaf0vu.jpeg"><br><br>  Vous devez utiliser une variable JavaScript personnalis√©e (ou un mod√®le de variable personnalis√©) comme valeur de champ, qui renvoie un objet o√π chaque cl√© de l'objet correspond au nom de la propri√©t√© utilisateur que vous avez cr√©√©e dans l'interface utilisateur de cr√©ation de rapports, et la valeur est la m√™me que celle que vous souhaitez envoyer en tant que propri√©t√© personnalis√©e en question. <br><br>  Par exemple, pour d√©finir la propri√©t√© <code>user_type</code> (voir capture d'√©cran ci-dessus), je peux cr√©er une variable JavaScript personnalis√©e qui ressemble √† ceci: <br><br><pre> <code class="plaintext hljs">"function() { return { user_type: 'Premium user' }; }"</code> </pre><br>  Ensuite, vous devez ajouter cette variable comme valeur du champ <code>user_properties</code> dans la balise de configuration. <br><br>  Une autre m√©thode consiste √† utiliser un mod√®le de variable personnalis√© (voir mon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">guide</a> si vous ne vous souvenez pas des mod√®les utilisateur).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici le mod√®le que</a> j'ai cr√©√© pour renvoyer l'objet de propri√©t√©s utilisateur.  Vous pouvez l'utiliser pour cr√©er une variable dans laquelle vous d√©finissez des cl√©s individuelles et des valeurs de propri√©t√© utilisateur, puis d√©finissez cette variable comme valeur de la cl√© <code>user_properties</code> dans la balise de configuration. <br><br><img src="https://habrastorage.org/webt/rx/zl/1o/rxzl1oz2kciqbzjd2zxdad4pbo8.jpeg"><br><br>  Apr√®s avoir cr√©√© la balise de configuration, activez-la avec le commutateur Toutes les pages et entrez en mode d'aper√ßu.  Voyons comment ce nouveau mod√®le de mesure fonctionne sur un site Web! <br><br><h3>  Test! </h3><br>  Lorsque vous visitez le site et t√©l√©chargez le conteneur d'aper√ßu, ouvrez les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">outils de d√©veloppement de</a> votre navigateur et examinez les cookies utilis√©s par GAv2. <br><br><img src="https://habrastorage.org/webt/kl/ab/xo/klabxouaktnaphimbe0wwk5zvik.jpeg"><br><br>  Le <code>cookie _ga</code> presque identique √† Universal Analytics, avec une l√©g√®re diff√©rence.  Le cookie _ga code le nombre de parties du domaine dans la valeur du cookie comme le nombre apr√®s <code>GA1</code> .  Par exemple, si un cookie est √©crit sur simoahava.com, le domaine se compose de deux parties et le pr√©fixe du cookie est GA1.2. <br><br>  Cependant, avec GAv2, ce n'est pas comme utiliser la valeur par d√©faut <code>cookie_domain</code> (configuration automatique). <br>  Je pense que cela peut √™tre une omission, comme si vous d√©finissez manuellement le domaine, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.simoahava.com</a> , le cookie a le GA1.3 habituel.  pr√©fixe. <br><br>  Un autre <code>cookie, _ga_MEASUREMENT-ID **</code> , semble prendre en charge l'√©tat de la session.  Le premier num√©ro long est l'horodatage (en secondes) lorsque le cookie a √©t√© cr√©√©, et le deuxi√®me num√©ro le plus long est l'horodatage lorsque le dernier hit a √©t√© envoy√© √† GA. <br><br>  En d'autres termes, il semble que GAv2 garde au moins le suivi de l'activation de la session.  Il reste √† voir s'il utilisera davantage la persistance c√¥t√© client pour les informations de session et si ce cookie peut √™tre utilis√© pour d√©terminer l'√©tat de la session dans un navigateur Web. <br><br>  JavaScript est utilis√© pour les cookies, ils sont donc affect√©s par des mesures visant √† r√©duire les performances des cookies c√¥t√© client, telles que la pr√©vention du suivi intelligent de Safari. <br><br>  Ensuite, suivez les demandes Web envoy√©es par le navigateur ou utilisez l'extension de d√©bogueur Google Analytics pour voir comment la biblioth√®que envoie des hits √† Google Analytics. <br><br><img src="https://habrastorage.org/webt/vi/os/2q/vios2qqoxfidrj52xjdesfbcthq.jpeg"><br><br>  Tout d'abord, vous pouvez voir que la demande est envoy√©e au point de terminaison familier, <code>/collect</code> , sauf qu'elle se trouve √† la place sur le chemin / g /. <br><br>  Le type de demande est POST et le point de terminaison est toujours un pixel d'image.  En d'autres termes, le hit semble utiliser l'API Beacon par d√©faut, ce qui est une grande am√©lioration pour Universal Analytics, o√π vous deviez activer manuellement cette fonctionnalit√©. <br><br>  L'API Beacon prot√®ge les demandes asynchrones envoy√©es lorsque la page est d√©charg√©e, ce qui permet de les ex√©cuter m√™me si le navigateur est ferm√©.  Cela √©vite les tracas de sauter des appels (par exemple, les √©v√©nements associ√©s √† un clic sur un lien), car l'utilisateur a quitt√© la page avant la fin de la demande. <br><br><img src="https://habrastorage.org/webt/-9/au/c2/-9auc2solqzij8-nmq_pshjgvxk.jpeg"><br><br>  Si vous regardez les param√®tres r√©els envoy√©s √† GA, il y a beaucoup de choses famili√®res ici, si vous vous souvenez comment les requ√™tes de protocole de mesure sont construites. <br>  Le param√®tre <code>v</code> a une valeur de 2, tandis que dans Universal Analytics, il est de 1. Il s'agit de la version du protocole. <br>  Le param√®tre <code>tid</code> est d√©fini sur votre ID de dimension. <br>  Le param√®tre <code>gtm</code> hach√© √† partir de l'ID de votre conteneur GTM. <br>  Le param√®tre <code>cid</code> est l'identifiant client qui est stock√© dans le <code>cookie _ga</code> . <br><br>  Les autres options qui sont rest√©es pratiquement inchang√©es incluent des choses comme <code>uid</code> (ID utilisateur), dl / dr / dt (m√©tadonn√©es du document) et <code>sr</code> (r√©solution d'√©cran). <br><br>  Il n'y a plus de dimension de type de hit, mais le param√®tre en (nom d'√©v√©nement) est utilis√© pour distinguer les diff√©rents types de hits les uns des autres.  Il s'agit de la principale diff√©rence par rapport √† Universal Analytics, car dans GAv2, vous avez un seul flux d'√©v√©nements, o√π les param√®tres d'√©v√©nement que vous envoyez avec le nom de l'√©v√©nement d√©terminent la fa√ßon dont les donn√©es sont affich√©es dans les rapports. <br><br>  Les param√®tres d'√©v√©nement sont pr√©c√©d√©s de ep.  ou epn.  pour les param√®tres de texte et les param√®tres num√©riques, respectivement.  Dans la capture d'√©cran, j'ai cr√©√© un param√®tre d'√©v√©nement nomm√© country et je l'ai d√©fini sur US. <br><br>  Les propri√©t√©s utilisateur sont pr√©fix√©es par up.  ou upn.  pour les propri√©t√©s personnalis√©es au format texte ou num√©rique, respectivement.  La capture d'√©cran montre une propri√©t√© de texte de l'utilisateur nomm√© <code>user_type</code> , qui est d√©finie sur Utilisateur Premium. <br>  Enfin, le param√®tre sid semble contenir l'horodatage au d√©marrage de la session en cours (extrait du <code>cookie _ga_MEASUREMENT-ID</code> ). <br><br>  On ne sait toujours pas ce que font les autres options. <br><br>  Une chose que vous remarquerez peut-√™tre est le retard dans l'envoi du hit.  Lorsque vous chargez la page, vous pouvez voir comment le navigateur attendra quelques secondes avant d'envoyer le hit √† GA.  Cela est d√ª au fait que GAv2 regroupe automatiquement les demandes, ce qui, encore une fois, est une excellente mise √† jour des fonctionnalit√©s. <br><br>  En regroupant plusieurs hits en une seule demande, les ressources du navigateur sont enregistr√©es √† d'autres fins.  Le retard est d√ª au fait que le navigateur attend que d'autres hits soient envoy√©s avec la page vue. <br><br>  Avant de cr√©er votre premi√®re balise d'√©v√©nement, voyez comment fonctionne la mesure am√©lior√©e.  Tout d'abord, faites d√©filer jusqu'√† la fin de la page actuelle et regardez l'√©v√©nement envoy√© √† Google Analytics. <br><br><img src="https://habrastorage.org/webt/6g/cv/uy/6gcvuyafq8jicmqyvmiupnlcpoa.jpeg"><br><br>  Cliquez ensuite sur le lien qui m√®ne de votre site (utilisez CTRL / CMD + cliquez pour l'ouvrir dans un nouvel onglet).  Jetez un ≈ìil aux options. <br><br><img src="https://habrastorage.org/webt/gp/h1/_i/gph1_iunj1kbcqrp3ruvcx3fote.jpeg"><br><br>  Enfin, si YouTube est int√©gr√© √† votre site avec enablejsapi = 1, v√©rifiez le suivi vid√©o automatique! <br><br><img src="https://habrastorage.org/webt/it/9k/hd/it9khdbigieyah5sja-l1x7hy34.jpeg"><br><br>  Tout cela est incroyablement cool, mais j'esp√®re que nous aurons plus de contr√¥les pour peaufiner la mesure am√©lior√©e. <br><br>  Maintenant, cr√©ons notre propre tag d'√©v√©nement! <br><br><h3>  Cr√©er un tag d'√©v√©nement </h3><br>  fonctionnent de mani√®re similaire √† l'utilisation des √©v√©nements gtag.js et Firebase. <br><br>  En d'autres termes, il existe une combinaison d'√©v√©nements collect√©s automatiquement, d'√©v√©nements recommand√©s et d'√©v√©nements utilisateur. <br><br>  Lors de la cr√©ation de nouveaux √©v√©nements, assurez-vous d'abord que l'√©v√©nement n'a pas encore √©t√© collect√© automatiquement. <br><br>  V√©rifiez ensuite s'il existe une structure d'√©v√©nement recommand√©e que vous pouvez utiliser √† la place d'un √©v√©nement personnalis√©.  Si vous trouvez l'√©v√©nement recommand√© appropri√©, assurez-vous d'utiliser le nom et les param√®tres d'√©v√©nement sugg√©r√©s lors de la configuration de la balise d'√©v√©nement. <br><br>  Maintenant, si vous le souhaitez, vous pouvez toujours envoyer un nom d'√©v√©nement enti√®rement configur√© avec des param√®tres d'√©v√©nement compl√®tement arbitraires.  Gardez √† l'esprit que vous perdrez une certaine flexibilit√© dans l'interface utilisateur de g√©n√©ration de rapports, car il existe des restrictions strictes sur le nombre de propri√©t√©s personnalis√©es que vous pouvez d√©finir pour la g√©n√©ration de rapports dans l'interface utilisateur. <br><br>  Commen√ßons par un <b>simple √©v√©nement personnalis√©</b> . <br><br>  Cr√©ez un nouveau teg Google Analytics: App + Web Event et remplissez-le comme suit: <br><br><img src="https://habrastorage.org/webt/vo/sw/xg/voswxgm0yjxlmcu0j7bi7jhs9hq.jpeg"><br><br>  D√©finissez la balise de configuration sur la valeur cr√©√©e dans la section pr√©c√©dente.  Cela fonctionne de mani√®re similaire √† la variable des param√®tres de Google Analytics, car vous ne devez configurer les param√®tres du tracker qu'une seule fois, apr√®s quoi ils seront appliqu√©s √† toutes les balises qui utilisent la balise de configuration. <br><br>  Donnez √† l'√©v√©nement un nom arbitraire (c'est-√†-dire, pas l'un des √©v√©nements automatiquement collect√©s ou recommand√©s).  Dans ce cas, nous utilisons <code>data_loaded</code> comme nom de l'√©v√©nement. <br><br>  Ajoutez ensuite quelques param√®tres: <br><br><ul><li>  <code>all_data</code> est un param√®tre de texte personnalis√© qui est d√©fini sur true. </li><li>  <code>debug_mode</code> est un param√®tre qui, lorsqu'il est install√© dans une balise, affiche un hit dans le flux de rapports de l'interface utilisateur DebugView (plus d'informations √† ce sujet ci-dessous). </li></ul><br>  Cochez la case pour lancer le bouton radio Window Loaded, actualisez le mode d'aper√ßu et t√©l√©chargez le conteneur sur le site Web.  Regardez les demandes du r√©seau √† <code>/collect</code> . <br><br>  Apr√®s avoir charg√© la page, vous devriez voir une demande avec deux hits combin√©s en un (mode batch). <br><br><img src="https://habrastorage.org/webt/w7/hy/rh/w7hyrhclui132v52ceu_45zfs8c.jpeg"><br><br>  Comme vous pouvez le voir, dans la premi√®re ligne, il y a un hit <code>page_view</code> , et dans la deuxi√®me ligne l'√©v√©nement utilisateur <code>data_loaded</code> . <br><br>  Acc√©dez maintenant √† l'interface utilisateur de cr√©ation de rapports de Google Analytics et s√©lectionnez DebugView dans le navigateur de rapports. <br><br>  <i>Assurez-vous de lire l'excellent article de Krista sur la diffusion en continu pour comprendre comment interpr√©ter les donn√©es suivantes.</i>  <i>Vous pouvez √©galement lire la propre documentation de Firebase DebugView pour plus d'informations.</i> <i><br></i> <br>  Dans le s√©lecteur de p√©riph√©rique de d√©bogage en haut de l'√©cran, vous pouvez voir combien de p√©riph√©riques (par exemple, des instances de navigateur) envoient actuellement des hits de d√©bogage √† GA.  Utilisez le s√©lecteur pour faire d√©filer les p√©riph√©riques r√©pertori√©s jusqu'√† ce que vous trouviez le p√©riph√©rique qui a r√©cemment envoy√© l'√©v√©nement <code>data_loaded</code> . <br><br>  <i>Ce s√©lecteur de p√©riph√©riques de d√©bogage est actuellement inutilisable.</i>  <i>Esp√©rons que dans un proche avenir, il sera plus facile de trouver des p√©riph√©riques de d√©bogage.</i> <br><br>  Apr√®s avoir trouv√© l'√©v√©nement <code>data_loaded</code> , vous pouvez voir les autres hits inclus dans DebugView.  En effet, si le package contenait d'autres hits que le hit <code>data_loaded</code> , ils seront √©galement automatiquement r√©pertori√©s dans DebugView. <br><br><img src="https://habrastorage.org/webt/oy/-g/i-/oy-gi-5w_os53sp1o3byjbiwuv0.jpeg"><br><br>  Vous pouvez cliquer sur les param√®tres de l'√©v√©nement <code>data_loaded</code> pour voir quel type d'informations est envoy√© √† Google Analytics avec un hit. <br><br>  Avant de terminer, essayons √©galement d'envoyer un <b>√©v√©nement recommand√©</b> .  Nous enverrons un √©v√©nement de recherche pour simuler une recherche sur le site. <br><br>  Si vous lisez les instructions dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">liste des √©v√©nements recommand√©s</a> , vous verrez que le nom de l'√©v√©nement de recherche est recherche et qu'il prend un param√®tre: <code>search_term</code> .  Alors, cr√©ons un nouveau tag d'√©v√©nement et remplissons ces valeurs!  Voici √† quoi ressemblera la balise: <br><br><img src="https://habrastorage.org/webt/us/h_/wb/ush_wbm2mzugcdl-nnr3bt21ypy.jpeg"><br><br>  Comme vous pouvez le voir, je viens de coder en dur le mot de recherche dans les param√®tres de l'√©v√©nement.  J'ex√©cute une balise avec un <b>d√©clencheur d'√©v√©nement personnalis√©</b> d√©fini sur un √©v√©nement nomm√© <code>search</code> . <br><br>  Apr√®s avoir mis √† jour le mode d'aper√ßu et recharg√© mon site Web, je peux d√©clencher l'√©v√©nement √† l'aide d'un simple <code>window.dataLayer.push ({event: 'search'})</code> qui s'ex√©cute dans la console JavaScript de la page. <br><br>  Dans DebugView, je vois que l'√©v√©nement a √©t√© enregistr√©: <br><br><img src="https://habrastorage.org/webt/ks/mz/gi/ksmzgix7vgnvrgfo_ky3v3r4nb0.jpeg"><br><br>  Et ... c'est tout.  Rien ne distingue cet √©v√©nement des √©v√©nements utilisateur.  Aucun rapport ne correspond aux donn√©es de recherche de sites similaires √† Universal Analytics.  √Ä un moment donn√©, je suis s√ªr que certains √©v√©nements de recherche seront enregistr√©s dans leur propre rapport, o√π les donn√©es de recherche sont combin√©es avec l'√©v√©nement collect√© automatiquement <code>view_search_results</code> (vue de page enregistr√©e avec des param√®tres de requ√™te correspondant √† la recherche sur le site). <br><br><h3>  R√©sum√© </h3><br>  Dans cet article, je voulais vous montrer comment configurer une nouvelle ressource Google Analytics: App + Web lorsque vous utilisez Google Tag Manager comme outil de mise en ≈ìuvre choisi. <br><br>  J'esp√®re que j'ai clairement indiqu√© que cette fonctionnalit√© est toujours en <b>phase de</b> test <b>b√™ta</b> et qu'elle n'est donc pas intentionnellement termin√©e.  De nouvelles fonctionnalit√©s seront introduites au fil du temps, jusqu'√† ce que nous quittions √† l'avenir la version b√™ta avec une plateforme enti√®rement fonctionnelle. <br><br>  Cette plateforme est-elle destin√©e √† remplacer Universal Analytics?  C'est encore inconnu.  Mais il serait conceptuellement difficile de justifier les futures versions du service ou des fonctions d'Universal Analytics, quand il y a un nouveau mod√®le de mesure brillant que vous devez mettre en place. <br><br>  <i>Je suis heureux de pr√©senter</i> Firebase <i>avec prudence</i> sur Internet.  C'est ce que j'attendais depuis que j'ai commenc√© √† travailler avec Firebase (et Firebase Analytics) il y a tr√®s longtemps.  Je pense que le mod√®le de mesure des utilisateurs et des √©v√©nements est sup√©rieur au mod√®le hautement agr√©g√© et de session utilis√© par Google Analytics. <br><br>  Cependant, il reste √† voir dans quelle mesure le changement de contexte que nous devons effectuer mentalement afin de comprendre comment les cas d'utilisation pris en compte par Google Analytics: App + Web sont comparables aux cas d'utilisation d'Universal Analytics. <br><br>  Je vais certainement allouer plus de ressources pour √©crire du contenu pour Firebase, car cette nouvelle fa√ßon de combiner l'analyse entre les applications et les sites Web est trop int√©ressante pour √™tre ignor√©e. <br><br>  Discutons de Google Analytics: App + Web dans les commentaires, mais rappelez-vous que nous parlons d'un produit <b>b√™ta</b> .  Vous pouvez exprimer librement votre d√©ception concernant les d√©cisions de d√©veloppement et les fonctionnalit√©s manquantes, mais gardez √† l'esprit que fournir votre critique de mani√®re constructive peut conduire √† des changements visant √† √©liminer ces critiques dans le produit final, car le but de la version b√™ta est d'obtenir r√©troaction de la communaut√©. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr463143/">https://habr.com/ru/post/fr463143/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr463125/index.html">OOP en images</a></li>
<li><a href="../fr463127/index.html">Surveillance UPS. Deuxi√®me partie - Automatiser l'analyse</a></li>
<li><a href="../fr463135/index.html">Dans quels pays est-il rentable d'enregistrer des soci√©t√©s informatiques en 2019?</a></li>
<li><a href="../fr463137/index.html">M√™me si vous voulez √™tre un game designer, personne ne vous apprendra comment</a></li>
<li><a href="../fr463141/index.html">Habr Weekly # 13 / Sous la menace de 1,5 million d'utilisateurs d'un service de rencontres, enqu√™te Medusa, deanon des Russes</a></li>
<li><a href="../fr463147/index.html">Robot Trolley ROS - Partie 3. Acc√©l√©rez, changez la cam√©ra, corrigez la d√©marche</a></li>
<li><a href="../fr463149/index.html">Alan Kay recommande de lire des livres de programmation anciens et oubli√©s mais importants</a></li>
<li><a href="../fr463151/index.html">iOS 13 sous la loupe</a></li>
<li><a href="../fr463155/index.html">Le bruit blanc dessine un carr√© noir. Partie 2. Solution</a></li>
<li><a href="../fr463157/index.html">Serveur de diffusion vid√©o ESP32-CAM connectant des √©crans I2C et SPI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>