<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛋️ 🌰 🤜🏽 Pi-Sonos ou haut-parleurs portables DIY sur le Raspberry Pi 🏡 👩🏽‍🤝‍👨🏾 🤙🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quiconque a rencontré des produits Sonos conviendra certainement que Sonos est Apple du monde de l'acoustique portable (en tout cas, le HomePod n'a pa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pi-Sonos ou haut-parleurs portables DIY sur le Raspberry Pi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/406677/"><img src="https://habrastorage.org/web/ff6/20c/c31/ff620cc31ae74fd1985615b8d7d6dbcc.jpg"><br><br>  Quiconque a rencontré des produits Sonos conviendra certainement que Sonos est Apple du monde de l'acoustique portable (en tout cas, le HomePod n'a pas encore été officiellement publié).  Acoustics Sonos - une combinaison de minimalisme, de qualité et de commodité, qui ravit dès le premier contact.  Je ne suis pas l'heureux propriétaire de cette acoustique, mais ma connaissance de Sonos Play 1 m'a tellement impressionné que j'ai décidé de créer quelque chose de similaire - une acoustique domestique portable exécutant Raspberry Pi.  Sous la coupe, je vais vous dire comment je l'ai fait. <br><a name="habracut"></a><br>  Je rêvais d'essayer de faire quelque chose sur le Raspberry Pi depuis sa création, mais je ne pouvais pas penser à une utilisation appropriée de la «framboise» dans la vie quotidienne.  L'idée de créer une acoustique basée sur elle est née tout à fait par accident, lorsque lors d'un autre rassemblement chez nous, mon ami a noté à juste titre qu'il n'y avait pas assez de musique de fond dans le salon.  L'idée de créer mon propre Sonos m'a immédiatement captivée. <br><br>  Les exigences pour le futur système d'enceintes étaient évidentes: répéter ou imiter la commodité de Sonos Play 1 - «le coincer dans la prise et le contrôler depuis le smartphone».  À cet égard, Raspberry est presque parfait - il y a déjà Wi-Fi et Bluetooth sur la carte, et vous pouvez exécuter Kodi, qui mâche tout et a déjà des applications de contrôle à distance pour iOS et Android.  Cependant, afin d'obtenir le rendement souhaité, il était encore nécessaire de mettre en œuvre un certain nombre de solutions d'ingénierie, à savoir: <br><br><ol><li>  Ramasser des haut-parleurs </li><li>  Apportez Raspberry Sound aux haut-parleurs </li><li>  Nourrissez toutes les glandes </li><li>  Construisez une belle conception acoustique pour les enceintes </li><li>  Pour atteindre la simplicité et la facilité de gestion </li></ol><br><h3>  1. Choisissez des haut-parleurs </h3><br>  Il était nécessaire de choisir les bons haut-parleurs de manière à ce qu'ils soient d'une part assez grands (pour une gamme de fréquences plus large) et, d'autre part, petits, car les haut-parleurs devaient être portables.  Après un long tourment de choix, en lisant des critiques et en comparant les caractéristiques, je me suis installé sur les haut-parleurs coaxiaux 5 pouces JBL Club 5020. Avec les 40 W réclamés dans l'oreille, ces petites filles ont promis de produire un son dans la plage de 75 Hz à 20 kHz, ce qui me convenait parfaitement.  Mon expérience personnelle a aidé ici - mes haut-parleurs d'étagère dans mon bureau commencent déjà à jouer à partir de 50 Hz, donnant des basses notables, mais dans une situation habituelle, ma tête commence rapidement à lui faire mal, alors je retire soigneusement tout ce qui est inférieur à 70 Hz avec l'égaliseur.  En fait, c'est pourquoi je n'ai pas payé trop cher pour des enceintes qui promettent des fréquences plus basses.  De plus, JBL a un joli design, et j'ai immédiatement eu une idée de comment le battre. <br><br><h3>  2. Apportez le son de la framboise aux haut-parleurs </h3><br>  Dans le "Malinka" il y a 3 possibilités de sortie de son: mini-jack, HDMI et GPIO.  Seul paresseux ne jure pas sur la qualité du son provenant d'une mini-prise, et HDMI est difficile.  Mais pour le GPIO, il existe d'excellentes options.  Le premier est le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Suptronics X400</a> , qui est un DAC audiophile à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">384 kHz</a> (PCM5122) et un amplificateur stéréo de classe D de 20 W avec un canal (TPA3118D2), soudés sur une seule carte.  Le second est Hifiberry, qui propose des cartes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DAC +</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AMP +</a> séparées (DAC et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ampli,</a> respectivement).  Dans le même temps, la carte Suptronics semble préférable.  Outre le fait qu'il s'agit d'une carte au lieu de deux, elle est également moins chère et il est plus facile d'acheter / de livrer en Fédération de Russie. <br><br><h3>  3. Alimentez toutes les glandes </h3><br>  L'alimentation a été prise 12V, malgré le fait que la framboise soit alimentée en 5V via micro-USB.  Il s'agit de Saptronic cool - il alimente la "framboise" à travers le GPIO.  Il s'agit d'une solution logique et pratique, étant donné que l'amplificateur audio consomme beaucoup plus d'énergie que le "framboise".  Le X400 peut être alimenté par n'importe quelle alimentation avec une tension constante de 6 à 24 volts, mais c'est à partir de 12 volts que l'indication LED du fonctionnement du haut-parleur peut également être alimentée, qui a été utilisée comme tondeuse de ma bande Navigator 12V 4,8 W / m.  En fait, le bloc d'alimentation a été commandé auprès du vendeur de bandes LED sur Ali. <br><br><h3>  4. Construisez une belle conception acoustique pour les haut-parleurs </h3><br>  C'était peut-être le plus gros problème de l'ensemble du projet.  Le choix du matériau était entre mon contreplaqué de 15 mm et le MDF de 8 mm.  Pour l'acoustique, bien sûr, il était préférable de prendre du contreplaqué, mais le MDF était plus facile à traiter, et la résistance du MDF était assez suffisante pour une puissance et une taille données.  En outre, le boîtier était censé avoir un certain nombre de trous (pour le câble d'alimentation et les connecteurs HDMI, RJ-45 et USB, le contrôle du volume et l'inverseur de phase), ce qui a compliqué la tâche dans le cas du contreplaqué.  De plus, je n'ai pas assez d'expérience et d'outils pour fabriquer quelque chose de plus intéressant en contreplaqué qu'une simple boîte rectangulaire.  Et j'ai préféré le MDF malléable. <br><br>  Séparément, il convient de mentionner à propos de FI.  Faire une «boîte fermée» serait plus facile, mais après avoir lu un certain nombre de documents, j'ai réalisé que ce serait une erreur.  Avec le volume prévu (~ 4,5 litres), une résistance acoustique suffisamment forte sera créée à l'intérieur de la boîte fermée pour deux haut-parleurs de cinq pouces, ce qui conduira finalement à une augmentation de la fréquence inférieure de l'ensemble du système d'enceintes dans son ensemble.  Je ne voulais pas faire un "squeaker" de cinq litres, et la chaleur de l'électronique en constante réchauffement devait également être évacuée quelque part.  En conséquence, le bass reflex à fentes a été conçu pour une fréquence de 60 à 65 Hz, légèrement inférieure à la fréquence inférieure des haut-parleurs, avec la marge que le volume interne du boîtier diminuera légèrement en raison des glandes et du matériau insonorisé, et, par conséquent, la fréquence augmentera. <br><br><div class="spoiler">  <b class="spoiler_title">J'ai caché la description du processus avec des photos sous le spoiler</b> <div class="spoiler_text">  Tout d'abord, les panneaux avant ont été coupés dans lesquels les enceintes doivent être montées.  Ce n'était pas difficile - il y avait un modèle spécial directement sur la boîte des haut-parleurs.  Pour plus de solidité, j'ai collé 2 couches de MDF avec des clous liquides - pour plus de solidité, car chaque enceinte pèse un demi-kilo. <br><br><img src="https://habrastorage.org/web/bb0/777/8b5/bb07778b58eb47a987e7080ac7e64d61.jpg"><br><br><img src="https://habrastorage.org/web/819/cc1/3b0/819cc13b021e4e8e8e5fc7ceebef31a1.jpg"><br><br>  Ensuite, les parois inférieure et latérale sont sorties de sous la scie sauteuse. <br><br><img src="https://habrastorage.org/web/2d7/880/126/2d7880126e4a409a91e75d7c79c50d05.jpg"><br><br>  J'ai dû bricoler avec les murs supérieurs et arrière.  Dans le mur du fond, il fallait faire une conclusion pour les connecteurs et le bass reflex, et dans le haut il y avait une ouverture pour le contrôle du volume.  J'ai refait le mur arrière trois fois pour diverses raisons, dans la version finale, il a également ajouté un interrupteur à bascule d'alimentation et des conclusions pour les fils - alimentation et HDMI.  Heureusement avec le couvercle supérieur - le trou pour le contrôle du volume a pu s'ajuster la première fois.  Eh bien, il était généralement facile de faire un bass-reflex.  J'ai également dû déposer des conclusions supplémentaires de la carte Suptronics sous les «tulipes», afin de ne pas faire de trous supplémentaires sur le capot supérieur. <br><br>  Dans l'espace entre les haut-parleurs, il y avait un support avec des LED qui s'allument lorsque l'alimentation est allumée.  En plus de la beauté, cette barre était censée servir de raidisseur supplémentaire à toute la structure.  Comme prévu, les LED étaient censées briller en orange (la couleur des inserts dans les haut-parleurs), et pour cela j'ai dû peindre un morceau de plastique mat transparent avec de la peinture orange. <br><br><img src="https://habrastorage.org/web/54d/d59/806/54dd59806d414c5db30ad8cacac502a2.jpg"><br><br>  Toutes les pièces ont été collées avec du polyéthylène expansé (support stratifié).  Ce matériau a une isolation suffisante principalement contre les chocs et les vibrations.  Ensuite, tout a été assemblé à l'aide de vis autotaraudeuses et de clous liquides.  Les coutures et les crevasses étaient enduites de scellant, et pour isoler les angles droits, une isolation acoustique y était également collée. <br><br><img src="https://habrastorage.org/web/c09/9aa/790/c099aa7901624fab887db70dd38bcdf1.jpg"><br><br>  Ensuite - le corps a été puttied, poncé ... <br><br><img src="https://habrastorage.org/web/277/92a/3af/27792a3af22d4aa1b8988936a631a0b3.jpg"><br><br>  ... et peint d'émail en deux couches.  Les haut-parleurs étaient assis sur le boîtier avec des vis autotaraudeuses avec une rondelle, dont les têtes ont ensuite été également teintées dans la couleur du boîtier. <br></div></div><br>  Colonne de production: <br><br><img src="https://habrastorage.org/web/049/5e0/a90/0495e0a902e848bd9453cae118121a36.jpg"><br><br><img src="https://habrastorage.org/web/c4c/7c3/9f3/c4c7c39f3c4a4d2891beac560bcc963c.jpg"><br><br><h3>  5. Pour atteindre la simplicité et la facilité de gestion </h3><br>  L'assemblage est la moitié de la bataille.  La seconde moitié est un logiciel.  Ici, tout ne se passe pas bien non plus. <br>  Bien sûr, avant de sceller à jamais le Raspberry Pi dans les entrailles du boîtier, j'ai installé une image <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OSMC</a> dessus.  Qui ne sait pas - c'est le même Kodi, seulement intégré.  Il s'agit d'un lecteur multimédia qui remplace l'interface graphique du système d'exploitation et vous permet de configurer des réseaux et des services, etc.  Entre le bundle Raspbian + Kodi et OSMC, tous les avantages sont clairement du côté de ce dernier. <br><br>  Après avoir installé le système et configuré la carte son selon les instructions du site Web de Suptronics, il ne restait plus qu'à ajouter l'extension Radio à OSMC et à y insérer une douzaine de vos stations de radio préférées.  Ensuite, j'ai installé Kodi Remote sur mon smartphone, et il semblerait - tout peut être apprécié. <br><br>  Mais malheureusement, Kodi Remote a tué la principale chose que je voulais réaliser de l'acoustique - la simplicité et la facilité de contrôle.  Le fait est que vous ne pouvez activer et changer de station de radio qu'à partir du menu d'extension Radio, et pour y accéder, vous devez faire 5 bandes et 1 défilement.  Soyeux UX. <br><br><div class="spoiler">  <b class="spoiler_title">Preuve</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/ee8/551/486/ee85514864b249d898b95608a1ca15a3.png"><br></div></div><br>  J'ai dû plonger dans le merveilleux monde merveilleux de Kodi-API, après quoi j'ai écrit une version simple de la console sur React, avec un design minimaliste, conçu exclusivement pour la radio.  L'essence de son travail est simple - au démarrage, il demande le contenu de la section Mes stations du plug-in Radio, après quoi il invite l'utilisateur à sélectionner n'importe quelle station de radio dans cette liste.  Il y a une lecture start-stop, un contrôle du volume et affiche le nom de la piste en cours.  Comme il faut.  Les sources sont publiées sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/38a/8ff/4b3/38a8ff4b3ced4484b7d7ed413044e249.jpg"></div><br>  En conséquence, l'ensemble du remplissage en fer du projet consistait en: <br><br>  1. Raspberry Pi 3 modèle B <br>  2. Suptronics X400 <br>  3. Alimentation 12V 60W <br>  4. JBL Club 5020 <br>  5. MicroSDHC Transcend 16GB <br><br>  Des haut-parleurs et des clés USB ont été commandés dans la boutique en ligne la plus proche, tout le reste - sur Ali.  Au total, le fer coûtait environ 7 000 roubles.  De 1 000 à 1 500 roubles supplémentaires devraient être dépensés pour les matériaux du corps, les fils, la peinture, etc., si je ne les avais pas. <br><br>  J'aime le résultat, malgré le fait qu'il y ait un certain nombre de plaintes.  Ainsi, par exemple, il est impossible de modifier la liste des stations de radio préférées sans se connecter à une colonne de moniteur et à un clavier - restrictions Kodi / OSMC.  Il n'y a aucun moyen de régler le son avec un égaliseur, du moins je ne sais pas comment le faire.  Et je voudrais également ajouter la lecture automatique de la dernière station lorsqu'elle est allumée, mais jusqu'à présent, on ne sait pas comment.  Si quelqu'un sait - laissez une ligne dans les commentaires, je l'apprécierai grandement.  AirPlay fonctionne dès la sortie de l'emballage, mais Bluetooth A2DP ne peut pas non plus être configuré.  Mais tout cela n'a pas beaucoup d'importance, et dans 99 cas sur 100, il suffit de pousser une station sur un smartphone par genre ou par humeur. <br><br>  Séparément, il faut dire sur le son, car Sonos en termes de son est un avancé.  Suptronics X400 n'a pas déçu - 25 carrés du salon sont déjà remplis de son au volume 1/10.  En général, le son est détaillé, sans respiration sifflante ni cliquetis.  Basse - oh miracle!  - il est, par ailleurs, puissant et en même temps ne glissant pas dans un "marmonnement" - enlève le bass reflex.  A proximité, on peut clairement entendre les sons de charleston et les sons «c» et «c» des voix «diffusion».  Étonnamment, cet effet désagréable disparaît complètement si vous couvrez les tweeters avec vos doigts (qui sait pourquoi - écrivez dans les commentaires).  Bien sûr, la Hi-Fi n'a pas fonctionné, mais en termes de son, l'acoustique résultante peut être mise en toute sécurité sur un pied d'égalité avec des enceintes domestiques populaires telles que le Microlab Solo 6C ou le Sven SPS-7xx. <br><br>  Bien sûr, si j'avais quelqu'un pour choisir d'acheter un tel "Pi-Sonos" pour 8 000 ou Sonos pour 18, je choisirais certainement Sonos.  Mais l'objectif était différent - je voulais me plonger dans les nouvelles technologies.  Il s'agit de ma première expérience avec Raspberry Pi et SoC en général, la première tentative de création acoustique, le premier projet complètement indépendant sur React.  La création de l'acoustique a nécessité des compétences en conception, soudure, menuiserie, peinture, conception, agencement, programmation.  Et a donné ce sentiment inoubliable d'inspiration et de crainte qui accompagnent le processus de création, pour le plaisir de s'impliquer dans de telles aventures! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr406677/">https://habr.com/ru/post/fr406677/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr406665/index.html">Dell XPS 13 9365: un transformateur léger pour tous les jours</a></li>
<li><a href="../fr406667/index.html">Choisir un scanner 3D pour le contrôle métrologique</a></li>
<li><a href="../fr406669/index.html">Homo singularitatis</a></li>
<li><a href="../fr406671/index.html">Regardez les étoiles: les meilleurs observatoires ouverts du monde</a></li>
<li><a href="../fr406673/index.html">La culture de l'intelligence artificielle comme exemple d'un jeu simple</a></li>
<li><a href="../fr406679/index.html">Le Wi-Fi fonctionnera-t-il à une vitesse de 340 km / h?</a></li>
<li><a href="../fr406683/index.html">Carrefour. Chapitres 9 et 10</a></li>
<li><a href="../fr406689/index.html">Nous n'avons pas atteint les limites des réalisations sportives.</a></li>
<li><a href="../fr406691/index.html">My 286: de l'achat à aujourd'hui</a></li>
<li><a href="../fr406693/index.html">Station météo (Arduino pro mini, BME280, LCD1602)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>