<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò¨ üíé üìå Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 12: Seguran√ßa de Rede, Parte 1 ‚òÆÔ∏è üëºüèº üë©‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula n¬∫ 6.858. "Seguran√ßa de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 12: Seguran√ßa de Rede, Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/426325/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula n¬∫ 6.858.  "Seguran√ßa de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security √© um curso sobre o desenvolvimento e implementa√ß√£o de sistemas de computador seguros.  As palestras abrangem modelos de amea√ßas, ataques que comprometem a seguran√ßa e t√©cnicas de seguran√ßa baseadas em trabalhos cient√≠ficos recentes.  Os t√≥picos incluem seguran√ßa do sistema operacional (SO), recursos, gerenciamento de fluxo de informa√ß√µes, seguran√ßa de idiomas, protocolos de rede, seguran√ßa de hardware e seguran√ßa de aplicativos da web. <br><br>  Palestra 1: ‚ÄúIntrodu√ß√£o: modelos de amea√ßas‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: ‚ÄúControle de ataques de hackers‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: ‚ÄúEstouros de Buffer: Explora√ß√µes e Prote√ß√£o‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: ‚ÄúSepara√ß√£o de Privil√©gios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: ‚ÄúDe onde v√™m os sistemas de seguran√ßa?‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: ‚ÄúOportunidades‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: ‚ÄúSandbox do Cliente Nativo‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 8: ‚ÄúModelo de Seguran√ßa de Rede‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 9: ‚ÄúSeguran√ßa de aplicativos da Web‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 10: ‚ÄúExecu√ß√£o Simb√≥lica‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 11: ‚ÄúLinguagem de Programa√ß√£o Ur / Web‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 12: Seguran√ßa de rede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  Hoje falaremos sobre seguran√ßa de rede, em particular, discutiremos um artigo de Stephen Bellovin intitulado "Uma retrospectiva de" Problemas de seguran√ßa no conjunto de protocolos TCP / IP "".  Esse cara trabalhava na AT&amp;T e agora trabalha na Col√¥mbia.  O interessante neste trabalho √© que ele √© relativamente antigo - tem mais de 10 anos e, de fato, esses s√£o coment√°rios sobre um artigo publicado uma d√©cada antes em 1989. <br><br>  Muitos de voc√™s perguntam por que estudamos isso se muitos dos problemas descritos l√° foram resolvidos nas vers√µes atuais do protocolo TCP. <br><br><img src="https://habrastorage.org/webt/bh/t4/ys/bht4ys9zt413cyjbic0nv5qazbm.jpeg"><br><br>  √â verdade que alguns dos problemas descritos por Stephen foram resolvidos e alguns continuam sendo problemas.  Com isso em mente, vamos classific√°-los e ver o que acontece.  Voc√™ pode se perguntar por que as pessoas n√£o resolveram todos esses problemas ao projetar o TCP?  O que eles estavam pensando? <br><br>  E isso n√£o est√° claro.  O que voc√™ acha?  Por que o protocolo TCP n√£o possui a seguran√ßa necess√°ria, considerando todas essas considera√ß√µes?  Alguma sugest√£o? <br><br>  <b>Aluno:</b> Naquela √©poca, a Internet era um lugar muito mais ing√™nuo. <br><br>  <b>Professor:</b> sim, foi literalmente uma cita√ß√£o do artigo desse cara.  Sim, naquela √©poca em geral ... um conjunto de protocolos da Internet foi desenvolvido, penso, cerca de 40 anos atr√°s.  Os requisitos eram completamente diferentes.  Era apenas necess√°rio conectar um monte de sites relativamente ing√™nuos que se conheciam pelo nome a uma rede comum. <br><br>  Eu acho que isso geralmente acontece em qualquer sistema que tenha sucesso - ele precisa de mudan√ßas.  Costumava ser um protocolo para um pequeno n√∫mero de sites, agora este protocolo cobre o mundo inteiro.  E voc√™ n√£o sabe mais pelo nome de todas as pessoas conectadas √† Internet.  Voc√™ n√£o pode ligar para eles se eles fizerem algo ruim e assim por diante. <br><br>  Portanto, acho que essa hist√≥ria √© a mesma para muitos dos protocolos que estamos considerando.  E muitos de voc√™s est√£o fazendo uma pergunta como: ‚Äúque diabos esses caras estavam pensando?  Isso √© t√£o falho!  Mas, na realidade, eles projetaram um sistema completamente diferente, simplesmente o adaptaram √†s necessidades modernas. <br><br>  A mesma coisa, e a Internet, como vimos nas √∫ltimas duas semanas, foi projetada para uma finalidade completamente diferente.  Mas ele se expandiu e tivemos novas preocupa√ß√µes sobre como adaptar esse protocolo aos requisitos modernos. <br><br>  Outra coisa aconteceu de repente: as pessoas tiveram que superestimar a gravidade do problema de seguran√ßa.  Antes, voc√™ realmente n√£o entendia tudo o que deveria se preocupar, porque n√£o sabia o que o atacante era capaz de fazer com seu sistema. <br><br><img src="https://habrastorage.org/webt/03/-2/9h/03-29hpygp5xdgbhevallbavu8s.jpeg"><br><br>  Acho que, em parte, por esse motivo, ser√° interessante ver o que aconteceu com a seguran√ßa do TCP, o que deu errado, como podemos corrigi-lo e assim por diante.  Como resultado, precisamos descobrir que tipos de problemas devem ser evitados ao desenvolver nossos pr√≥prios protocolos, bem como o que constitui um pensamento adequado sobre ataques desse tipo.  Como voc√™ sabe o que um invasor √© capaz de fazer em seu pr√≥prio protocolo quando voc√™ o est√° desenvolvendo para evitar essas armadilhas? <br><br>  Ok, vamos deixar o pre√¢mbulo de lado e falar sobre este artigo. <br><br>  Ent√£o, como devemos pensar em seguran√ßa de rede?  Acho que poder√≠amos come√ßar com o primeiro princ√≠pio e tentar descobrir qual √© o nosso modelo de amea√ßa.  Ent√£o, o que um invasor pode fazer em nossa rede? <br><br>  Ele provavelmente tem a capacidade de interceptar pacotes e talvez seja capaz de modific√°-los.  Portanto, se voc√™ estiver enviando um pacote pela rede, √© aconselh√°vel supor que algum bandido ver√° seu pacote e poder√° alter√°-lo antes que ele chegue ao seu destino.  Ele tamb√©m pode descart√°-lo e usar a capacidade de inserir pacotes personalizados com conte√∫do arbitr√°rio que voc√™ nunca enviou. <br><br><img src="https://habrastorage.org/webt/rm/_a/in/rm_ainrpqlw6awzc2kugqnvtkn8.jpeg"><br><br>  Mas mais perigosa √© a possibilidade de bandidos interferirem nos seus protocolos descritos no artigo.  O atacante tem seu pr√≥prio computador, que ele controla completamente.  Mesmo que todos os computadores em que voc√™ confie estejam se comportando corretamente, o bandido que possui seu pr√≥prio computador pode interferir no seu protocolo ou sistema. <br><br>  Portanto, se voc√™ tem um protocolo de roteamento que envolve muitas pessoas conversando entre si, e algumas redu√ß√µes s√£o provavelmente impratic√°veis ‚Äã‚Äãpara manter os bandidos do lado de fora.  Se um protocolo de roteamento com 10 participantes estiver em execu√ß√£o, talvez voc√™ possa ligar para todos eles e dizer: "Bem, sim, pessoal, eu conhe√ßo todos voc√™s". <br><br>  Mas na escala da Internet hoje em dia √© imposs√≠vel descobrir diretamente quem os outros membros da rede est√£o usando esse protocolo.  Ent√£o, provavelmente, um bandido vai participar de seus protocolos ou sistemas distribu√≠dos.  Portanto, √© importante projetar sistemas distribu√≠dos que, no entanto, possam fazer algo razo√°vel com isso. <br><br>  OK, ent√£o quais s√£o as implica√ß√µes disso tudo?  Eu acho que vamos analisar a lista.  A intercepta√ß√£o de pacotes geralmente √© f√°cil de entender, voc√™ n√£o pode enviar dados importantes pela rede se espera que o bandido os intercepte ou pelo menos n√£o os envie em texto sem formata√ß√£o.  Talvez voc√™ deva criptografar seus dados. <br><br><img src="https://habrastorage.org/webt/2_/js/e1/2_jse1lo8kw6tsoaaowxxuh4qf4.jpeg"><br><br>  Parece relativamente f√°cil de entender, embora voc√™ ainda precise manter isso em mente ao desenvolver protocolos.  A introdu√ß√£o ou inje√ß√£o de pacotes leva a uma gama mais ampla de problemas interessantes, discutidos neste artigo.  Em particular, os invasores podem injetar pacotes que podem representar pacotes de qualquer outro remetente.  Como o caminho de transmiss√£o de dados √© baseado no uso de IP, o pr√≥prio pacote possui um cabe√ßalho que indica o IP de origem do pacote e o IP de destino.  No entanto, ningu√©m verifica se a fonte est√° necessariamente correta.  Atualmente, existe alguma filtragem, mas n√£o √© perfeita e √© dif√≠cil confiar nela. <br><br>  Portanto, em uma primeira aproxima√ß√£o, um invasor pode inserir qualquer endere√ßo IP como fonte e envi√°-lo para o destino correto.  √â interessante descobrir o que um invasor pode fazer com a capacidade de enviar pacotes arbitr√°rios. <br><br>  Nas semanas anteriores, analisamos os problemas de estouro de buffer em termos de seguran√ßa na web.  Examinamos como um invasor pode usar um erro de implementa√ß√£o, como estouros de buffer.  Curiosamente, o autor deste artigo n√£o estava realmente interessado em erros de implementa√ß√£o; ele est√° mais interessado em erros de protocolo. <br><br>  Ent√£o, o que h√° de t√£o especial nisso?  Por que ele n√£o prestou aten√ß√£o nos erros de implementa√ß√£o, apesar de termos passado v√°rias semanas para examin√°-los?  Por que isso importa? <br><br>  <b>Aluno:</b> porque devemos descartar esses erros ao escrever o protocolo. <br><br>  <b>Professor:</b> sim, isso √© realmente uma grande falha devido a um erro no design do protocolo, porque √© dif√≠cil mudar.  Portanto, se voc√™ tiver um erro de implementa√ß√£o e tiver uma mem√≥ria ou impress√£o que n√£o verificou o intervalo de mem√≥ria, n√£o ser√° poss√≠vel notar esse erro.  Mas se voc√™ tiver uma verifica√ß√£o de intervalo e ela ainda funcionar, os estouros de buffer poder√£o ser evitados, portanto, isso √© √≥timo. <br><br>  Mas se voc√™ tiver algum tipo de erro na especifica√ß√£o do protocolo, em como o protocolo deve funcionar, a corre√ß√£o de um erro exigir√° a corre√ß√£o de todo o protocolo, o que significa um impacto potencial em todos os sistemas que falam esse protocolo.  Portanto, se encontrarmos algum tipo de problema no protocolo TCP, potencialmente ser√° bastante destrutivo.  Como todas as m√°quinas que usam TCP precisar√£o fazer altera√ß√µes, pois √© potencialmente muito dif√≠cil tornar um protocolo modificado compat√≠vel com a m√°quina antiga. <br><br>  Os erros do protocolo TCP com os quais Stephen estava t√£o preocupado eram fundamentais, ent√£o ele decidiu falar sobre eles.  No primeiro exemplo, ele analisa como os n√∫meros do SN SN do TCP funcionam. <br><br>  <b>Aluno:</b> esse t√≥pico √© um pouco estranho, mas estou curioso.  Suponha que voc√™ encontre um erro no TCP.  Como voc√™ faz altera√ß√µes?  Como voc√™ diz a todos os computadores do mundo que isso precisa ser alterado? <br><br>  <b>Professor</b> : Sim, acho que esse √© um problema enorme.  O que fazer se voc√™ encontrar um erro no TCP?  Bem, n√£o est√° claro o que fazer.  Eu acho que o autor aqui est√° lutando com isso.  Se voc√™ pudesse reprojetar o TCP, muitos desses erros ser√£o relativamente f√°ceis de corrigir se voc√™ souber com anteced√™ncia o que procurar. <br><br>  Mas como o TCP √© bastante dif√≠cil de corrigir ou alterar, acontece o seguinte: os desenvolvedores tentam encontrar configura√ß√µes compat√≠veis com vers√µes anteriores que permitem que as implementa√ß√µes antigas sejam usadas em conjunto com a nova implementa√ß√£o ou adicionam algum campo adicional que torna a conex√£o um pouco mais segura. <br><br><img src="https://habrastorage.org/webt/e4/xr/si/e4xrsiti_bwr-40vt_fctjvkgxu.jpeg"><br><br>  Mas este √© um grande problema.  Se esse √© algum tipo de problema de seguran√ßa profundamente enraizado no TCP, ele se tornar√° um grande problema para todos, porque √© muito dif√≠cil at√© mesmo mudar para a vers√£o TCP, suponha que n mais 1. <br><br>  O IPv6 pode ser visto como um exemplo de que isso n√£o acontece e sabemos que esse problema ocorrer√° por mais 15 ou 20 anos.  O IPv6 existe h√° mais de 10 anos, mas √© dif√≠cil convencer as pessoas a se afastarem do IPv4.  O IPv4 √© suficiente para eles, parece funcionar, e eles acham que mudar para um novo protocolo da Internet ser√° muito caro.  Eles dizem: ‚Äúningu√©m mais fala IPv6, ent√£o por que devo come√ßar a falar sobre esse protocolo estranho com o qual n√£o h√° ningu√©m para conversar comigo?‚Äù  De qualquer forma, esse √© um tipo de avan√ßo, mas acho que levar√° muito tempo.  Realmente haver√° alguma motiva√ß√£o para a migra√ß√£o, e a compatibilidade com vers√µes anteriores, neste caso, ajuda muito. <br><br>  O IPv6 tem muitas op√ß√µes de compatibilidade com vers√µes anteriores, por exemplo, voc√™ pode conversar com um host IPv4 usando o IPv6.  Portanto, os desenvolvedores est√£o tentando projetar todo esse suporte, mas ainda √© dif√≠cil convencer as pessoas a atualizar. <br><br>  Portanto, considerando os n√∫meros de sequ√™ncia TCP, vamos considerar dois problemas relacionados √† maneira como o handshake TCP funciona.  Ent√£o, vamos passar algum tempo olhando como uma conex√£o TCP √© inicialmente estabelecida. <br><br>  Tr√™s pacotes s√£o enviados para estabelecer uma nova conex√£o TCP.  Nosso cliente gera um pacote para se conectar ao servidor, que diz que aqui est√° o endere√ßo IP do meu cliente, eu o envio ao servidor.  Ao mesmo tempo, existe uma estrutura de cabe√ßalho de pacote composta por √°reas diferentes, mas estaremos interessados ‚Äã‚Äãna √°rea do n√∫mero de s√©rie.  Aqui teremos o sinalizador SYN dizendo: "Quero sincronizar o estado e estabelecer uma nova conex√£o", e inclui o n√∫mero de s√©rie do cliente SNc. <br><br><img src="https://habrastorage.org/webt/wx/2j/cd/wx2jcdmpjnfrv0tmgwbzpttsiwg.jpeg"><br><br>  Ent√£o, quando o servidor recebe esse pacote, ele diz: "o cliente quer se conectar a mim, ent√£o enviarei o pacote para esse endere√ßo, independentemente de quem diga que est√° tentando entrar em contato comigo".  Assim, o servidor enviar√° o pacote ao cliente, onde inclui seu pr√≥prio n√∫mero de sequ√™ncia de sincroniza√ß√£o do servidor SNs e o n√∫mero de confirma√ß√£o do cliente ACK (SNc).  Finalmente, no terceiro pacote, o cliente responde ao servidor, confirmando a sincroniza√ß√£o e enviando o n√∫mero de confirma√ß√£o (SNs) do servidor ACK do servidor para o servidor.  Agora o cliente pode come√ßar a enviar dados. <br><br>  Assim, para enviar dados, no in√≠cio da conex√£o, o cliente deve incluir alguns dados no pacote e anexar o n√∫mero de s√©rie do cliente SNc para indicar que esses s√£o realmente dados leg√≠timos do cliente.  Ele ressalta, por exemplo, que n√£o s√£o alguns dados de mensagens posteriores que acabam de chegar agora, porque o servidor perdeu algumas das partes iniciais dos dados. <br><br><img src="https://habrastorage.org/webt/to/7d/hq/to7dhq2naolp3cxf_t9marythpe.jpeg"><br><br>  Assim, como regra, todos esses n√∫meros de s√©rie s√£o projetados para fornecer entrega de pacotes.  Se o cliente transmitir dois pacotes, aquele que possui o n√∫mero de sequ√™ncia inicial √© o primeiro dado, o pr√≥ximo n√∫mero de sequ√™ncia √© o pr√≥ximo dado.  Tamb√©m √© √∫til para fornecer alguns requisitos de seguran√ßa. <br><br>  Antes disso, dei um exemplo de que esses requisitos est√£o mudando.  Portanto, inicialmente ningu√©m pensou que o TCP deveria fornecer recursos de seguran√ßa.  Mas ent√£o o TCP come√ßou a usar aplicativos, e eles pareciam confiar nessas conex√µes TCP, acreditando que n√£o poderiam ser quebrados por nenhum invasor ou que o invasor n√£o foi capaz de injetar dados maliciosos na conex√£o TCP existente.  Como se de repente esse mecanismo, originalmente destinado apenas a pedidos de pacotes, come√ßasse a garantir alguma apar√™ncia de seguran√ßa para essas conex√µes. <br><br>  Portanto, neste caso, suponho que o problema esteja relacionado ao que o servidor poderia ter sugerido em rela√ß√£o a essa conex√£o TCP.  Normalmente, o servidor assume - implicitamente, como voc√™ pode imaginar - que essa conex√£o seja estabelecida com o cliente desejado nesse endere√ßo IP C, e √© natural que ele pense assim.  Mas existe alguma raz√£o para tal suposi√ß√£o?  Se o servidor receber uma mensagem com alguns dados sobre essa conex√£o cliente-servidor e tiver um n√∫mero de sequ√™ncia C, por que o servidor conclui que o cliente real enviou esses dados? <br><br>  <b>Aluno:</b> porque o n√∫mero de s√©rie √© dif√≠cil de adivinhar. <br>  <b>Professor:</b> certo, ent√£o isso √© um tipo de coisa impl√≠cita, o que implica que deve haver um n√∫mero de sequ√™ncia SNc correto.  E para que essa conex√£o seja estabelecida, o cliente deve ter um n√∫mero de s√©rie do servidor SNs confirmado e o n√∫mero de s√©rie do servidor √© enviado pelo servidor apenas para o endere√ßo IP do cliente. <br><br>  <b>Aluno:</b> quantos bits est√£o dispon√≠veis para o n√∫mero de sequ√™ncia? <br><br>  <b>Professor: O</b> n√∫mero de sequ√™ncia do TCP tem 32 bits e, embora n√£o seja um n√∫mero aleat√≥rio, n√£o √© f√°cil adivinhar, seria necess√°rio muita largura de banda. <br><br>  <b>Aluno: o</b> n√∫mero de s√©rie √© maior que o n√∫mero de s√©rie inicial? <br><br>  <b>Professor:</b> sim, em princ√≠pio, essas coisas est√£o aumentando.  Portanto, toda vez que voc√™ envia SYN, √© considerado 1 byte a mais que o seu n√∫mero de sequ√™ncia.  Ou seja, se na primeira linha tivemos o argumento (SNc), na quarta j√° haver√° (SNc + 1) e, em seguida, a numera√ß√£o continua daqui.  Portanto, se voc√™ transferir 5 bytes, o valor a seguir (SNc) +6 ser√° o seguinte.  Ele simplesmente conta os bytes enviados, com cada SYN contando 1 byte.  A especifica√ß√£o TCP recomenda escolher esses n√∫meros de s√©rie para que seu incremento ocorra a uma velocidade aproximadamente fixa.  Os documentos de trabalho iniciais do protocolo RFC sugeriam que voc√™ aumentasse essas coisas em aproximadamente 250.000 unidades mais 250.000 por segundo. <br><br><img src="https://habrastorage.org/webt/xk/yv/ve/xkyvvejv9v8b1kgj2p3lo51qb9s.jpeg"><br><br>  A raz√£o pela qual isso n√£o foi completamente aleat√≥rio √© porque esses n√∫meros de sequ√™ncia s√£o realmente usados ‚Äã‚Äãpara impedir que pacotes falhem em intervir ou para misturar pacotes de conex√µes anteriores com novas conex√µes.  Cada vez que voc√™ estabelece uma nova conex√£o, escolhe um n√∫mero de s√©rie completamente aleat√≥rio.  Ao mesmo tempo, h√° alguma chance de que, se voc√™ instalar uma s√©rie de conex√µes repetidas vezes, um pacote da conex√£o anterior ter√° um n√∫mero de sequ√™ncia bastante semelhante ao n√∫mero de sequ√™ncia da sua nova conex√£o e, portanto, ser√° aceito pelo servidor como parte v√°lida dos dados para a nova conex√£o. <br><br>  Portanto, √© com isso que os desenvolvedores de TCP estavam muito preocupados - esses pacotes n√£o ordenados ou pacotes atrasados.  Como resultado, eles realmente queriam que esses n√∫meros de sequ√™ncia fossem uma sequ√™ncia de tempo bastante mon√≥tona, mesmo entre os compostos. <br><br>  Se eu abrir uma conex√£o, ela poder√° ter a mesma origem e destino, n√∫meros de porta, endere√ßos IP e assim por diante.  Mas desde que eu estabeleci essa conex√£o agora, e n√£o antes, espero que os pacotes das mensagens enviadas anteriormente n√£o coincidam com os n√∫meros de sequ√™ncia que tenho para minha nova conex√£o.  Portanto, esse era um mecanismo para evitar confus√£o entre conex√µes repetitivas. <br><br>  <b>Aluno:</b> se voc√™ n√£o sabe exatamente qual ser√° a etapa da sequ√™ncia do pacote, como voc√™ sabe que o pacote que voc√™ recebe √© o pr√≥ximo pacote e n√£o faz parte do anterior que voc√™ ... <br><br>  <b>Professor:</b> Como regra geral, voc√™ se lembra do √∫ltimo pacote recebido.  E o pr√≥ximo n√∫mero de sequ√™ncia √© exatamente o pr√≥ximo pacote na sequ√™ncia.  Assim, por exemplo, o servidor sabe que vi exatamente uma parte dos dados da data (SNc +1); o pr√≥ximo ser√° o pacote SYN (SNc +1), porque o pacote anterior no in√≠cio da conex√£o era SYN (SNc). <br><br>  <b>Aluno:</b> ent√£o, voc√™ diz que quando define o n√∫mero de s√©rie, mesmo depois disso ... <br><br>  <b>Professor:</b> bem, √© claro, esses n√∫meros de s√©rie, inicialmente, quando voc√™ os instala, s√£o selecionados de acordo com algum plano.  Vamos falar sobre esse plano.  Voc√™ pode pensar que eles s√£o aleat√≥rios, mas com o tempo eles devem representar algum fluxo seq√ºencial de altera√ß√µes nos n√∫meros de sequ√™ncia iniciais da conex√£o. <br><br>  Mas em uma conex√£o, tudo termina assim que √© estabelecido - os n√∫meros de s√©rie s√£o fixos.  E eles apenas sinalizam essa conex√£o quando os dados s√£o enviados por ela. <br><br>  Havia planos que sugeriam o gerenciamento desses n√∫meros de s√©rie.           ,   .  ,    ,       ,         . <br><br> , -            ,       250000.   ,    ,     ,   64k  128k,    .      ,     ‚Äì         ,    SYN . <br><br>     ,      64  .  ,        . <br><br>    ,   . ,   ,     ,     ,      IP-. <br>     ,      ,  ,          ,       ,   .        ,         ,       . <br><br> ,   ?     ,   ,    ,    ‚Äî             SNc.  ,     ,   -  ,     ,     ,          . <br><br>   ,       .           ACK (SNs). <br><br>  -   . <br><br><img src="https://habrastorage.org/webt/gx/0y/mb/gx0ymbpnfgd2i3bkkifqb_m79fy.jpeg"><br><br>   SNs   ,     ,     ,        IP- C. <br><br>        ,   .    ,    :   ,       ,      ,      data (SNc +1). <br><br><img src="https://habrastorage.org/webt/gb/qz/n4/gbqzn4arqziwsvwrl7qd8tgrfa0.jpeg"><br><br>             (SNs).  ? <br><br> <b>:</b>   ,       ? <br><br> <b>:</b>   . ,    ,   ,    ,            . ,          ,                  ,   ,          . <br><br> <b>:</b>  ,    ,       ? <br><br> <b>:</b>          .   ,      ? <br><br>    ,    .      ,  ,      32    ,  ,               . <br><br>         ,       . <br><br> <b>:</b>     ,      ,   ,         .      ‚Ä¶ <br><br> <b>:</b> ,    TCP        . <br><br> <b>:</b>         ,        . <br><br> <b>:</b> ,  . <br><br> <b>:</b>    ,     ,       . <br><br> <b>:</b>  ,  ,         ,   .        , , 1000               ,          2  32 . <br><br>     ,  -        ,      ,        .       .      ,       . <br><br><img src="https://habrastorage.org/webt/6s/ad/wk/6sadwkqxxddn9pinshbckbt9ig8.jpeg"><br><br> <b>:</b>    -   , ? <br><br> <b>:</b> ,  .      ,    ,         IP-, ? <br><br> <b>:</b>        ? <br><br> <b>:</b>     ‚Äî    ?          ,     .     ? <br><br> <b>:</b>   ,     ,    , ,   -   . <br><br> <b>:</b> , ,  ,     ,    ,        .       IP-,    TCP     ,  ,      ,     . <br><br>  TCP ,     -  ,    ,    ,     C      RST (SN‚Ä¶), ,    . <br><br><img src="https://habrastorage.org/webt/nu/iw/rs/nuiwrs35wrv-fhi6xcvwf7vowp8.jpeg"><br><br> - ,      ,   C            ,    . <br><br> ,   C   ,        .  ,  S   ,  : ¬´, ,     ,    ¬ª. <br><br>    ,    , ,   ,        ,     C  . <br><br> ,   ¬´¬ª  C   ,        .      ,    ¬´¬ª C   ,       .   ,        TCP. <br><br> <b>:</b> ,      . ,      SYN   ,      . <br><br> <b>:</b>   ,     ,      . ,             , , ,     NAT,     .    , NAT    RST   ,      .  ,  ,     ,    , ,   Comcast            ,  RST   . <br><br> <b>:</b>             ? <br><br> <b>:</b> ,  ,     TCP.     ,     .      ,  ,   ,       .        /,              . <br><br>    ,        data (SNc +1). ,       IP-  , : ¬´    ¬ª,     ,         S. <br><br><img src="https://habrastorage.org/webt/3c/qc/ch/3cqcchz0agrq_msukm3bd2_jlyo.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E se este SYN (SNs) para esta conex√£o na √∫ltima linha e (SNs) na terceira linha estiverem conectados, isso ser√° realmente um problema. </font><font style="vertical-align: inherit;">Mas voc√™ diz - vamos desconect√°-los, porque esse √© um n√∫mero de um endere√ßo IP diferente, portanto, isso n√£o √© mais um problema. </font><font style="vertical-align: inherit;">Voc√™ n√£o pode imaginar que esse SNS ser√° baseado no SNS para outra conex√£o. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25:50 min</font></font><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "Seguran√ßa de sistemas de computadores".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Palestra 12: Seguran√ßa de Rede, Parte 2</font></font></a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BZTWXl9QNK8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A vers√£o completa do curso est√° dispon√≠vel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usu√°rios da Habr em um an√°logo exclusivo de servidores b√°sicos que inventamos para voc√™:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps da US $ 20 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10 GB DDR4 240 GB SSD de 1 Gbps at√© dezembro de gra√ßa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> quando pagar por um per√≠odo de seis meses, voc√™ pode fazer o pedido </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt426325/">https://habr.com/ru/post/pt426325/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt426313/index.html">Novo Microsoft Learn</a></li>
<li><a href="../pt426315/index.html">Como fazer amigos python com a Internet invis√≠vel? O b√°sico do desenvolvimento de aplicativos I2P em Python e ass√≠ncrono</a></li>
<li><a href="../pt426317/index.html">1155 vs 2011. Alguns idosos entram em batalha</a></li>
<li><a href="../pt426319/index.html">Servidor de teste para a equipe de desenvolvimento</a></li>
<li><a href="../pt426323/index.html">Uma tentativa de criar uma caixa de rob√¥ com um or√ßamento limitado. Esteira de vidro e cola Epoxy</a></li>
<li><a href="../pt426327/index.html">Novidades da atualiza√ß√£o do Windows 10 de outubro de 2018</a></li>
<li><a href="../pt426331/index.html">Vulnerabilidade no PlayStation 4 - o conjunto de caracteres na mensagem para o usu√°rio transforma remotamente o console em quase um "tijolo"</a></li>
<li><a href="../pt426333/index.html">A Microsoft lan√ßou o c√≥digo MS-DOS 1.25 e 2.0 sob a licen√ßa MIT</a></li>
<li><a href="../pt426335/index.html">"Tecnologia marciana": por que os data centers est√£o mudando para c√©lulas de combust√≠vel</a></li>
<li><a href="../pt426339/index.html">25 de outubro de 2018 - Reuni√£o do Grupo de Usu√°rios Atlassian em Raiffeisenbank</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>