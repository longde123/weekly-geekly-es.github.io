<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👶 📇 🆒 链复制：构建有效的KV存储库（第1/2部分） ↔️ 😺 👩🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在本文中，我们将考虑使用链式复制的简单有效的KV存储体系结构，该体系结构已得到积极研究并已成功应用于各种系统中。 

 这是链复制文章的前半部分。 第二部分在这里 。 首先，将有一些理论，然后是经过各种修改的一些使用示例。 



1. 目的是说明问题并与主要/备用协议进行比较。 
2. 链复制是一...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>链复制：构建有效的KV存储库（第1/2部分）</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430396/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ih/tl/pc/ihtlpc8zbpq3lsjsqarrkaitufm.png"></div><br> 在本文中，我们将考虑使用链式复制的简单有效的KV存储体系结构，该体系结构已得到积极研究并已成功应用于各种系统中。 <br><a name="habracut"></a><br> 这是链复制文章的前半部分。 第二部分在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里</a> 。 首先，将有一些理论，然后是经过各种修改的一些使用示例。 <br><br><ol><li> 目的是说明问题并与主要/备用协议进行比较。 </li><li> 链复制是一种基本方法。 </li><li> 链复制-分布式请求。 </li><li>  FAWN：Wimpy节点的快速数组。 </li></ol><br><h1>  1.简介 </h1><br><h3>  1.1目的 </h3><br> 假设我们要设计一个简单的键值存储。 该存储库将具有一个非常小的接口： <br><br><ol><li> 写（键，对象）：通过键保存/更新值。 </li><li> 读取（键）：通过键返回存储的值。 </li></ol><br> 我们还知道数据大小相对较小（所有内容都适合一台服务器，不需要分片），但是可能会有很多写/读请求。 <br><br>  <u>我们的目标是承受大量请求（ <b>高吞吐量，HT</b> ），具有高可用性（ <b>HA</b> ）和强一致性（ <b>SC</b> ）。</u> <br><br> 在许多系统中，牺牲SC来实现HA + HT，因为要满足所有这三个属性是一项艰巨的任务。  Amazon Dynamo是一个巨大的飞跃，它催生了许多Dynamo风格的数据库，例如Cassandra，Riak，Voldemort等。 <br><br><h3>  1.2主要/备份 </h3><br> 构建这种存储系统最常见，最简单的方法之一就是使用主/备份复制。 <br> 我们有1个主服务器，几个备份服务器，写入/读取操作仅通过主服务器进行。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/no/r4/ai/nor4aiw440squuwrlqwfrnn3l9c.png"></div><br> 这里的图片显示了一种可能的交互协议（主要是等待所有备份发送的ack，然后将ack发送给客户端），还有其他选项（不是互斥的），例如： <br><br><ul><li>  Primary严格组织写请求。 </li><li> 一旦其中一个备份响应ack，主服务器就会发送ack。 </li><li> 法定人数和暗示的移交。 </li><li> 等等 </li></ul><br> 还需要一个单独的过程来监视群集的状态（将配置分发给参与者），并且当主机服务器崩溃时，进行（启动）新的选举，并确定在脑裂的情况下该怎么做。 同样，根据需求，此逻辑的一部分可以作为复制算法的一部分执行，也可以作为第三方应用程序（例如，用于存储配置的Zookeeper）执行。 <br><br> 显然，迟早，主/备份复制的性能将受到两个瓶颈的限制： <br><br><ul><li> 主服务器性能。 </li><li> 备份服务器数。 </li></ul><br> 向集群提出的可靠性/一致性要求越多，此刻就会越快。 <br><br> 还有其他方法可以实现我们的目标吗？ <br><br><h3>  1.3链复制 </h3><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/4y/oc/fe/4yocfe_ajv79tln3txv8chnm0_w.png"></div><br> 通常，链复制由一系列服务器（链）组成，这些服务器具有特殊角色HEAD（与客户端通信的服务器）和TAIL（链的末端，SC保证）。 链至少具有以下属性： <br><br><ol><li> 承受下降到n-1台服务器。 </li><li> 写入速度与SC Primary / Backup的速度没有显着差异。 </li><li> 在发生HEAD崩溃的情况下，群集的重新配置发生的速度比主要服务器快得多，其余服务器的速度则相对于主要服务器/备份服务器而言要快得多。 </li></ol><br> 一个很小但很重要的一点- <b>服务器之间</b>需要<b>可靠的FIFO连接。</b> <br><br> 让我们进一步详细研究构建链复制的各种方法。 <br><br><h1>  2.基本方法 </h1><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/dg/fm/sz/dgfmszrolw1uxuayalgzhltuhyi.png"></div><br><h3>  2.1运算算法 </h3><br> 客户端将写请求发送到头节点，将读请求发送到尾节点。 答案总是来自尾巴。  Head收到更改请求后，计算必要的状态更改，将其应用，然后将其发送到下一个节点。 尾部处理后，ACK响应将沿着链向下发送回去。 显然，如果读取请求返回x的某个值，则它将存储在所有节点上。 <br><br><h3>  2.2复制协议 </h3><br> 我们从头到尾对服务器编号，然后在每个节点上 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x6211;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.928ex" height="2.298ex" viewBox="0 -780.1 830 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">我</text></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>我</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-1">我</script> 我们将另外存储： <br><br><ul><li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><msub><mi>g</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.545ex" height="2.419ex" viewBox="0 -780.1 4109.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="1218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-64" x="1818" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="2342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="2687" y="0"></use><g transform="translate(3288,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="675" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><msub><mi>g</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> Pending_i </script>  -节点尚未收到尾部处理的已接收请求的列表。 </li><li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.617ex" height="2.419ex" viewBox="0 -780.1 2418.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="1112" y="0"></use><g transform="translate(1712,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="511" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-3"> Sent_i </script>  -服务器发送到其后继服务器的请求的列表，这些请求尚未被tail处理。 </li><li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><msub><mi>y</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x5BC6;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x94A5;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.622ex" height="2.419ex" viewBox="0 -780.1 7156.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="1234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="1703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6F" x="2065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-72" x="2550" y="0"></use><g transform="translate(3002,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="693" y="-213"></use></g><g transform="translate(3836,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(4666,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">密</text></g><g transform="translate(5496,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">钥</text></g><g transform="translate(6326,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><msub><mi>y</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>密</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>钥</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-4"> History_i（密钥）</script>  -键值的更改历史记录（您既可以存储历史记录，也可以存储总值）。 注意： <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>H</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><msub><mi>y</mi><mi>j</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>k</mi><mi>e</mi><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><mi>b</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>e</mi><mi>q</mi><mi>H</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><msub><mi>y</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>k</mi><mi>e</mi><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>j</mi><mo>&amp;gt;</mo><mi>i</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="55.147ex" height="2.66ex" viewBox="0 -780.1 23744 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="1234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="1703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6F" x="2065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-72" x="2550" y="0"></use><g transform="translate(3002,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6A" x="693" y="-213"></use></g><g transform="translate(3884,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="4714" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="5235" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-79" x="5702" y="0"></use><g transform="translate(6199,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="7279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-75" x="7749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-62" x="8321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="8751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="9220" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="9687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="10048" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-71" x="10515" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-48" x="10975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="11864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="12209" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="12679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6F" x="13040" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-72" x="13526" y="0"></use><g transform="translate(13977,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="693" y="-213"></use></g><g transform="translate(14812,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="15642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="16163" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-79" x="16630" y="0"></use><g transform="translate(17127,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><g transform="translate(17957,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-66" x="19037" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6F" x="19588" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-72" x="20073" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-61" x="20525" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6C" x="21054" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6C" x="21353" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6A" x="21651" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-3E" x="22342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="23398" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>H</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><msub><mi>y</mi><mi>j</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>k</mi><mi>e</mi><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><mi>b</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>e</mi><mi>q</mi><mi>H</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><msub><mi>y</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>k</mi><mi>e</mi><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mtext>&nbsp;</mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>j</mi><mo>&gt;</mo><mi>i</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> History_j（key）\ subseteq History_i（key），\ forall j> i </script></p><br></li><li> 并且： <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><mi>b</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>e</mi><mi>q</mi><mi>P</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><msub><mi>g</mi><mi>i</mi></msub><mspace linebreak=&quot;newline&quot; /><mi>H</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><msub><mi>y</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>k</mi><mi>e</mi><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>=</mo><mi>H</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>k</mi><mi>e</mi><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>u</mi><mi>p</mi><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="72.771ex" height="5.672ex" viewBox="0 -780.1 31331.9 2442.1" role="img" focusable="false" style="vertical-align: -3.86ex; max-width: 604px;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(10428,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="1112" y="0"></use><g transform="translate(1712,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="511" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="2668" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-75" x="3137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-62" x="3710" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="4139" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="4609" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="5075" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="5437" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-71" x="5903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-50" x="6364" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="7115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="7582" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-64" x="8182" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="8706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="9051" y="0"></use><g transform="translate(9652,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="675" y="-213"></use></g></g><g transform="translate(5475,-1363)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="1234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="1703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6F" x="2065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-72" x="2550" y="0"></use><g transform="translate(3002,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="693" y="-213"></use></g><g transform="translate(3836,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="4666" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="5188" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-79" x="5654" y="0"></use><g transform="translate(6152,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-3D" x="7260" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-48" x="8316" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="9204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="9550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="10019" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6F" x="10381" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-72" x="10866" y="0"></use><g transform="translate(11318,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-79" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-31" x="1124" y="0"></use></g></g><g transform="translate(13057,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="13887" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="14409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-79" x="14875" y="0"></use><g transform="translate(15373,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-63" x="16452" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-75" x="16886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-70" x="17458" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-53" x="17962" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="18607" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="19074" y="0"></use><g transform="translate(19674,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="511" y="-213"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><mi>b</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>e</mi><mi>q</mi><mi>P</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><msub><mi>g</mi><mi>i</mi></msub><mspace linebreak="newline"></mspace><mi>H</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><msub><mi>y</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>k</mi><mi>e</mi><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mo>=</mo><mi>H</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>k</mi><mi>e</mi><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mtext>&nbsp;</mtext><mi>c</mi><mi>u</mi><mi>p</mi><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> Sent_i \ subseteq Pending_i \\ History_i（key）= History_ {i + 1}（key）\ cup Sent_i </script></p><br></li></ul><br><h3>  2.3服务器故障转移 </h3><br> 如简介中所述，我们需要某种主流程，该流程可以： <br><br><ul><li> 标识故障服务器。 </li><li> 通知其前任和后继电路更改。 </li><li> 如果服务器是头尾服务器，它将通知客户其更改。 </li></ul><br> 我们相信主进程是稳定的，绝不会崩溃。 这样的过程的选择超出了本文的范围。 <br><br> 第二个非常重要的假设是，我们假设服务器是故障停止： <br><br><ul><li> 如果发生任何（内部）故障，服务器将停止工作，并且不会给出错误的结果。 </li><li> 服务器故障始终由主进程确定。 </li></ul><br> 让我们看看如何添加新服务器： <br> 从理论上讲，可以将新服务器添加到链中的任何位置，添加到尾部似乎是最困难的-您只需要将当前尾部的状态复制到新服务器，将链中的更改通知向导并通知旧尾部，现在需要进一步发送请求。 <br><br> 最后，考虑三种可能的故障情况： <br><br>  <u>2.3.1头部跌落</u> <br> 只需从链中卸下服务器，然后分配下一个新磁头。 只有这些请求的丢失 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><msub><mi>g</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.42ex" height="2.419ex" viewBox="0 -780.1 5347.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="1218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-64" x="1818" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="2342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="2687" y="0"></use><g transform="translate(3288,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="576" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-61" x="1043" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-64" x="1572" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><msub><mi>g</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> Pending_ {head} </script> 没有进一步发送- <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><msub><mi>g</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>e</mi><mi>t</mi><mi>m</mi><mi>i</mi><mi>n</mi><mi>u</mi><mi>s</mi><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="31.164ex" height="2.419ex" viewBox="0 -780.1 13417.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="1218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-64" x="1818" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="2342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="2687" y="0"></use><g transform="translate(3288,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="576" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-61" x="1043" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-64" x="1572" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="5597" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="6067" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="6533" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6D" x="6895" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="7773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="8119" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-75" x="8719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-73" x="9292" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-53" x="9761" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="10407" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="10873" y="0"></use><g transform="translate(11474,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="576" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-61" x="1043" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-64" x="1572" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><msub><mi>g</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub><mtext>&nbsp;</mtext><mi>s</mi><mi>e</mi><mi>t</mi><mi>m</mi><mi>i</mi><mi>n</mi><mi>u</mi><mi>s</mi><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-8"> Pending_ {head} \ setminus Sent_ {head} </script><br><br>  <u>2.3.2落尾</u> <br> 我们从链中删除服务器，然后将之前的服务器分配给新的服务器 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mi>a</mi><mi>i</mi><mi>l</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.671ex" height="2.539ex" viewBox="0 -780.1 4163.8 1093.4" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="1112" y="0"></use><g transform="translate(1712,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-61" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="890" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6C" x="1236" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-2212" x="1535" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-31" x="2313" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mi>a</mi><mi>i</mi><mi>l</mi><mo>−</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-9"> Sent_ {tail-1} </script> 清除（所有这些操作都标记为已处理的尾巴） <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><msub><mi>g</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mi>a</mi><mi>i</mi><mi>l</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.599ex" height="2.539ex" viewBox="0 -780.1 5855.3 1093.4" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="1218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-64" x="1818" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="2342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="2687" y="0"></use><g transform="translate(3288,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-61" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="890" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6C" x="1236" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-2212" x="1535" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-31" x="2313" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><msub><mi>g</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mi>a</mi><mi>i</mi><mi>l</mi><mo>−</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-10"> Pending_ {tail-1} </script> 减少。 <br><br>  <u>2.3.3中间节点下降</u> <math> </math><u><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> k </script></u> <br> 向导通知节点 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.214ex" height="2.178ex" viewBox="0 -780.1 2244.9 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-2212" x="743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-31" x="1744" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-12"> k-1 </script> 和 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi><mo>+</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.214ex" height="2.178ex" viewBox="0 -780.1 2244.9 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-2B" x="743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-31" x="1744" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-13"> k + 1 </script> 关于链中的重新排序。 <br> 可能的损失 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x5DF2;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x53D1;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x9001;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.997ex" height="2.298ex" viewBox="0 -780.1 4734.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">已</text><g transform="translate(829,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">发</text></g><g transform="translate(1659,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">送</text></g><g transform="translate(2489,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-2212" x="743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-31" x="1744" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>已</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>发</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>送</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>−</mo><mn>1</mn></mrow></math></span></span><script type="math/tex" id="MathJax-Element-14">已发送{k-1} </script> 如果节点 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-15"> k </script> 我没有设法将它们进一步发送给我的继任者，因此，在删除节点之后 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-16"> k </script> 从链中再次发送第一件事 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x5DF2;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x53D1;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x9001;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.997ex" height="2.298ex" viewBox="0 -780.1 4734.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">已</text><g transform="translate(829,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">发</text></g><g transform="translate(1659,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">送</text></g><g transform="translate(2489,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-2212" x="743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-31" x="1744" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>已</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>发</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>送</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>−</mo><mn>1</mn></mrow></math></span></span><script type="math/tex" id="MathJax-Element-17">已发送{k-1} </script> 而且只有那一个结 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.214ex" height="2.178ex" viewBox="0 -780.1 2244.9 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-2212" x="743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-31" x="1744" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-18"> k-1 </script> 继续处理新请求。 <br><br><h3>  2.4与备份/主要协议的比较 </h3><br><ul><li> 在链式复制中，只有一台服务器（尾部）参与读取请求的执行，并立即给出答案，而在P / B主数据库中，它可以等待写入请求完成的确认。 </li><li> 在这两种方法中，写请求都在所有服务器上执行，由于并行执行，P / B的执行速度更快。 </li></ul><br> 故障链复制延迟： <br><br><ul><li> 头：读取请求的执行不会中断，写请求会延迟2条消息-从主服务器到新头的所有服务器，从主服务器到新头的所有客户端。 </li><li> 中间服务器：读取请求不会中断。 录制请求可能会在运行时延迟 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.617ex" height="2.419ex" viewBox="0 -780.1 2418.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-65" x="645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-6E" x="1112" y="0"></use><g transform="translate(1712,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMATHI-69" x="511" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-19"> Sent_i </script> 没有更新损失。 </li><li> 尾部：延迟对两个消息的读写请求-通知 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x5C3E;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x5DF4;</mo></mrow><mo>&amp;#x2212;</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.858ex" height="2.298ex" viewBox="0 -780.1 3383.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">尾</text><g transform="translate(829,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">巴</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-2212" x="1882" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhjCww6ecl-XQWH-I4sVB0mJ7ZBlmA#MJMAIN-31" x="2882" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>尾</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>巴</mo></mrow><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-20">尾巴-1 </script> 关于新尾巴的信息，并提醒客户有关新尾巴的信息。 </li></ul><br> 故障P / B延迟： <br><br><ul><li> 主要：5个消息延迟以选择新的主要和同步状态。 </li><li> 备份：如果没有写入请求，则没有读取延迟。 出现录制请求时，可能会延迟1条消息。 </li></ul><br> 如您所见，链复制最严重的尾部故障比P / B（主要）的最严重尾部故障更快。 <br><br> 这种方法的作者进行了负载测试，显示了与P / B协议相当的性能。 <br><br><h1>  3.分布式查询（带有分摊查询的链复制-CRAQ） </h1><br> 基本方法有一个明显的弱点-尾巴，它处理所有读取请求。 这可能导致两个问题： <br><br><ul><li> 尾巴成为热点，即 处理任何更多请求的服务器。 </li><li> 当在多个数据中心中放置一条链时，尾部可能距离很远，这会减慢写请求的速度。 </li></ul><br>  CRAQ的思想非常简单-让读取请求到达除tail之外的所有服务器，并且为了确保一致性，我们将存储对象版本的向量以用于写入请求，并且在出现歧义的情况下，节点将请求tail以获得最新的固定版本。 <br><br><h3>  3.1 CRAQ </h3><br> 我们对CRAQ架构进行形式化： <br> 除尾部外，每个节点都处理读请求并返回响应，而头则从写请求中返回响应（与基本方法比较）。 <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/gj/6t/41/gj6t41wctfj90oqeqwyzmxzmlum.png"></div><br> 在每个非尾节点上，可以存储同一对象的多个版本，并且这些版本形成严格单调递增的序列。 对于每个版本，将添加一个附加属性“ clean”或“ dirty”。 最初，所有版本都是干净的。 <br><br> 节点收到写入请求后，便立即将接收到的版本添加到版本列表中，然后： <br><br><ul><li> 如果该节点为tail，则将版本标记为干净，这时该版本被视为固定版本，并向链下发送确认。 </li><li> 否则，它将版本标记为脏，并将请求进一步发送到链下。 </li></ul><br> 节点一旦收到后继的确认，就会将该版本标记为“干净”并删除所有以前的版本。 <br><br> 节点收到读取请求后： <br><br><ul><li> 如果节点已知的对象的最新版本是干净的，则它将返回它。 </li><li> 否则，他会要求拖尾以获取该对象的最新固定版本，然后将其返回给客户端。  （通过构造，这样的版本将始终在节点上）。 </li></ul><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/ov/m9/ij/ovm9ijvqtmutvnc96zey0lti9os.png"></div><br> 对于具有大量读取请求的应用程序，CRAQ性能<b>随节点的增长呈线性增长</b> ，在具有大量写入请求的情况下，性能不会比基本方法差。 <br><br>  CRAQ可以位于一个或多个数据中心中。 这使客户可以选择最近的节点以提高读取请求的速度。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b4/mt/yv/b4mtyvanehrdfjdsp8iomlqz5x8.png"></div><br><br><h3>  3.2 CRAQ中的一致性 </h3><br>  CRAQ提供了很强的一致性，除了一种情况：当节点从tail接收到最新的提交版本时，tail可以在节点响应客户端之前提交新版本。 在这种情况下，CRAQ <b>在整个链上</b>提供<b>单调读取</b> （顺序读取请求已成过去，但可以返回旧数据）。 <br><br> 弱一致性也是可能的： <br><br><ul><li> 最终一致性：节点将不会从尾部请求最新的提交版本。 这将破坏整个链上的单调读数，但将<b>单调读数</b>保留<b>在同一节点上</b> 。 另外，它还可以承受<b>网络分区的容忍度</b> 。 </li><li> 有界的最终一致性：仅在特定点之前返回脏版本。 例如，脏版本和干净版本之间的差异不应超过N个修订版本。 或时间限制。 </li></ul><br><h3>  3.3服务器故障转移 </h3><br> 类似于基本方法。 <br><br><h3>  3.4可选 </h3><br>  CRAQ具有一项有趣的功能-您可以在录制操作期间使用多播。 假设head通过多播发送更改，并且仅向该链向下发送此事件的某些标识符。 如果更新本身尚未到达节点，那么当Tail发送更改确认消息时，它可以等待并从下一个节点接收更新。 同样，tail可以通过多播发送固定确认。 <br><br><h1>  4. FAWN：Wimpy节点的快速数组 </h1><br> 一项非常有趣的研究，与本文的主题没有直接关系，但可以作为使用链复制的示例。 <br><br> 高性能键值存储（Dynamo，memcached，Voldemort）具有共同的特征-它们需要I / O，最少的计算，对大量随机密钥的并行独立访问，以及高达1Kb的小键值。 <br><br> 具有HDD的服务器不适合此类群集，因为其查找操作时间长（访问时间随机），并且具有大量DRAM的服务器消耗的功率出乎意料的大-2GB DRAM相当于1Tb HDD。 <br><br> 最初研究的目标是构建功耗最小的有效（带宽）集群。 三年中50％的服务器成本是电费，现代节能模式不如它们宣传的那样有效-在20％负载的测试中，CPU消耗保持在50％，加上其他服务器组件根本没有节能模式（例如，DRAM至少已经可以工作了。 重要的是要注意，在这样的群集中，CPU和I / O之间的距离变大了-功能强大的CPU被迫等待I / O操作完成。 <br><br><h3>  4.1架构 </h3><br>  FAWN集群基于旧服务器构建，价格为250美元（2009年价格），带有集成的500MHz CPU，512Mb RAM和32Gb SSD。 如果您熟悉Amazon Dynamo架构或一致的哈希，那么您将熟悉FAWN架构： <br><br><ol><li> 每个物理服务器包含几个虚拟节点，每个虚拟节点都有自己的VID。 </li><li>  VID形成一个环，每个VID负责“自身后面”的范围（例如，A1负责范围R1中的密钥）。 </li><li> 为了提高可靠性，将数据顺时针复制到后续节点的R中。  （例如，在R = 2的情况下，A1上的密钥被复制到B1和C1），因此我们得到了链复制（基本方法）。 </li><li> 读取请求转到尾链，即 从A1读取密钥将转到C1。 </li><li> 写请求到达头链，一直到末尾。 </li></ol><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/2c/ha/ju/2chajuapsbnk62bkoezfjqbx_sg.png"></div><br> 服务器映射存储在前端服务器的群集中，每个前端服务器负责其特定的VID列表，并且可以将请求重定向到另一台前端服务器。 <br><br><h3>  4.2测试结果 </h3><br> 在负载测试中，FAWN在随机读取闪存驱动器上达到QPS的QPS的90％。 <br><br> 下表比较了各种配置的总拥有成本（TCO），其中传统的基础是一台1000美元的服务器，消耗200W功率（2009年价格）： <br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/vj/ki/kw/vjkikw3uwpxdhslspdiobfaosm0.png"></div><br> 因此，如果： <br><br><ul><li> 大数据，少量查询：FAWN + 2Tb 7200 RPM </li><li> 少量数据，大量请求：FAWN + 2GB DRAM </li><li> 平均值：一汽+ 32GB SSD </li></ul><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/dl/ge/om/dlgeom_ymwwtheb8vdugkpgv23a.png"></div><br><h1> 参考文献 </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">链复制可支持高吞吐量和可用性</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CRAQ上的对象存储：高吞吐量链复制，适用于大部分只读工作负载</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">FAWN：Wimpy节点的快速数组</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN430396/">https://habr.com/ru/post/zh-CN430396/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN430384/index.html">根据噪声特征创建地图</a></li>
<li><a href="../zh-CN430386/index.html">印度将建设固态存储电站</a></li>
<li><a href="../zh-CN430388/index.html">网络峰会非会议</a></li>
<li><a href="../zh-CN430392/index.html">如何使用PieceofScript“ bike”开发和测试API</a></li>
<li><a href="../zh-CN430394/index.html">使用RxJava在Android中实现即时搜索</a></li>
<li><a href="../zh-CN430398/index.html">如何理解不受欢迎的人或讨论将员工挤出公司的方法</a></li>
<li><a href="../zh-CN430400/index.html">编程中使用键盘和鼠标混合体的经验</a></li>
<li><a href="../zh-CN430402/index.html">关于RecyclerView，developer.android.com沉默了什么？</a></li>
<li><a href="../zh-CN430404/index.html">我们在网站上收集有关客户行为的数据</a></li>
<li><a href="../zh-CN430406/index.html">C ++ 20和模块，网络，协程，范围，图形。 圣地亚哥会议的结果</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>