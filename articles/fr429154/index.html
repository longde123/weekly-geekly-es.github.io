<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👰🏾 🤮 👂🏼 Facturation secondaire, place de marché et bacs à sable pour le Big Data: que peuvent faire les environnements de test dans le cloud? 🌙 🙆 🧔🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Toute entreprise de développement de logiciels a besoin d'environnements de test proches de l'environnement de production. Cela est particulièrement v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Facturation secondaire, place de marché et bacs à sable pour le Big Data: que peuvent faire les environnements de test dans le cloud?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/429154/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/9s/5h/y3/9s5hy3r8qtfcs7grnxisqaq2k0q.jpeg" width="600"></div><br>  Toute entreprise de développement de logiciels a besoin d'environnements de test proches de l'environnement de production.  Cela est particulièrement vrai pour les logiciels en boîte, qui ont un long cycle de sortie. <br>  De nombreux problèmes de création d'environnements de test sont résolus par leur placement dans le cloud.  Nous parlerons des options de test sur notre plate-forme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cloud.Mail.Ru Cloud Solutions</a> (MCS).  Mais une partie de ce que nous disons est vraie pour n'importe quel cloud. <br><a name="habracut"></a><br><h2>  Difficultés à mettre en place un environnement de test </h2><br>  Avant de parler des capacités des environnements de test dans le cloud, nous parlerons des difficultés rencontrées par les entreprises pour tester les logiciels. <br><br><h4>  Différentes branches Git - différents environnements </h4><br>  La plupart des entreprises impliquées dans le développement de logiciels utilisent des systèmes de contrôle de version.  Le plus courant est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Git</a> , qui est utilisé par 87% des développeurs (sondage RhodeCode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur Twitter</a> ). <br><br>  La meilleure pratique dans Git est ce que l'on appelle les branches de fonctionnalités, lorsqu'une branche distincte est allouée pour chaque nouvelle fonctionnalité dans le référentiel.  Cette approche permet aux développeurs de ne pas «pousser leurs coudes» et rend les changements plus indépendants, mais nécessite le déploiement de nombreux environnements dédiés pour tester des fonctionnalités individuelles. <br><br><h4>  Sous-utilisation des ressources informatiques </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">25% des serveurs physiques</a> sont des zombies qui consomment de l'électricité mais ne font rien d'utile.  Et de nombreux informaticiens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ne peuvent pas dire</a> ce que font 15 à 30% des serveurs installés dans leur entreprise. <br><br>  Alors voilà.  Le matériel sur site pour les environnements de test n'est pas différent des autres et, en règle générale, mal mis au rebut.  Et il ne peut en être autrement.  Lorsque vous achetez un parc d'équipements serveur, vous êtes réaffecté par les ressources en cas d'augmentation de la consommation et du nombre d'environnements de test.  Par conséquent, les environnements de test sont inactifs la nuit et le week-end «au cas où», et vous ne payez que pour l'électricité et le refroidissement consommés. <br>  La simple application de la virtualisation dans votre cloud privé ne résout pas le problème de l'évolutivité rigide et de la sous-utilisation des équipements. <br><br><h4>  Réglage de la difficulté </h4><br>  Les environnements de test et de développement ne sont pas seulement quelques machines virtuelles.  En règle générale, il comprend un serveur d'applications, un serveur de base de données, ainsi que des serveurs de file d'attente de messages et des serveurs de cache. <br><br>  Il est difficile pour les développeurs de développer et de configurer une telle infrastructure par eux-mêmes, s'ils n'ont pas l'expertise appropriée, cela peut prendre plusieurs jours.  Pour les administrateurs expérimentés, c'est facile, mais généralement pas intéressant.  De plus, la bureaucratie est imposée et le processus d'allocation des ressources pour créer un environnement de test peut prendre beaucoup de temps. <br><br>  Un autre problème est qu'un administrateur système à temps plein n'a souvent pas d'expertise dans le déploiement d'environnements de test spécifiques, et l'entreprise est obligée d'attirer des consultants coûteux de l'extérieur.  Un exemple est un bac à sable pour les mégadonnées basé sur Hadoop, Spark, HDFS ou Airflow.  Le déploiement d'un tel environnement prend au moins une semaine à un spécialiste qualifié dans le domaine BigData et au moins un mois à un administrateur système ordinaire.  Une histoire similaire avec les clusters Kubernetes: la construction d'un cluster de test proche de la configuration de production prend au moins plusieurs jours. <br><br>  En conséquence, l'entreprise est obligée de recourir à un tiers - pour attirer des consultants.  Cependant, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trouver des experts en big data est assez difficile</a> , et les administrateurs de tels systèmes peuvent être comptés presque sur les doigts.  Oui, un ingénieur DevOps peut gérer toutes les tâches de déploiement d'environnements de test, mais toutes les entreprises ne l'ont pas, et trouver un bon expert dans ce domaine n'est pas plus facile qu'un spécialiste BigData.  En effet, en 2016, le site de recherche d'emploi Indeed.com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">constaté</a> que les entreprises recherchaient un ingénieur DevOps plus longtemps que tout autre spécialiste. <br><br><h2>  Comment le cloud résout ces problèmes </h2><br><h4>  Deuxième facturation pour les ressources consommées et mise à l'échelle instantanée </h4><br>  Le plus évident des services cloud est la possibilité de louer une infrastructure cloud de n'importe quelle configuration (un serveur ou un cluster entier) pour n'importe quelle période.  Sur notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plateforme Mail.Ru Cloud Solutions</a> (MCS), la facturation est à la seconde - vous n'avez qu'à payer pour les ressources informatiques qui ont été réellement utilisées. <br><br>  Contrairement au bare metal, au cloud privé et à la plupart des fournisseurs de cloud russes, MCS ne facture pas de ressources pour les machines virtuelles arrêtées (RAM, CPU): vous n'avez qu'à payer pour l'espace disque utilisé.  Par exemple, la configuration de test de 20 CPU, 40 Go de RAM et 1 To de disque dur coûte 24 800 ₽ / mois et le coût de l'espace disque est de 7 000 ₽ / mois.  Par exemple, si vous utilisez des outils d'automatisation pour arrêter un tel environnement à 21h00 et déployer à 9h00, vous paierez 15 900 ₽ - une fois et demie moins qu'avec une location 24h / 24. <br><br>  D'après notre expérience, les économies totales réalisées grâce aux tests dans le cloud peuvent atteindre 60 à 70%, par rapport aux tests dans l'infrastructure sur site. <br><br>  La possibilité de faire évoluer instantanément les ressources du cloud vers le haut et vers le bas vous permet de déployer rapidement des environnements uniquement au bon moment et d'utiliser les capacités louées de près de 100%.  Le temps de déploiement de l'environnement de test est réduit de plusieurs jours, voire de plusieurs mois, par rapport à celui sur site. <br><br><h4>  Ressources allouées par les développeurs eux-mêmes </h4><br>  À l'aide de portails en libre-service, les développeurs peuvent configurer des environnements de test dans le cloud et leur allouer des ressources sans contacter les administrateurs.  Même cette simple action peut raccourcir le délai de mise sur le marché d'un produit de plusieurs semaines. <br><br><h4>  API pour créer et détruire automatiquement des environnements de test </h4><br>  Le cloud vous permet de créer des environnements de courte durée sur un modèle <u>juste à temps</u> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">À l'aide de l'API REST</a> et de la CLI, vous pouvez déployer des environnements de test en bloc, les arrêter, les mettre à jour et les supprimer.  De cette façon, vous pouvez configurer le cycle de vie complet des environnements de test et conserver des centaines d'environnements sains.  Grâce à la mise à l'échelle instantanée du cloud et à la facturation seconde par seconde, la flexibilité et les coûts d'exploitation réduits sont atteints. <br><br><div class="spoiler">  <b class="spoiler_title">Voici un exemple de notre expérience.</b> <div class="spoiler_text">  L'entreprise développe des logiciels pour 150 banques.  Chaque banque a sa propre succursale dans Git avec des fonctions supplémentaires intégrées à la solution en boîte.  L'entreprise est obligée de créer deux ou trois environnements de test de travail parallèles pour chaque client: test avec la version actuelle, test avec la nouvelle version, vérification des mises à jour de la version actuelle à la nouvelle.  Au total, pour 150 clients, il est nécessaire de déployer et de maintenir jusqu'à 450 environnements de test uniquement en même temps - cela ne prend pas en compte les environnements de développement. <br><br>  En mode cloud privé (ils utilisent la virtualisation dans leur propre centre de données), il est presque impossible de travailler avec une telle charge, car le matériel disponible n'est souvent pas suffisant pour un fonctionnement parallèle de tous les environnements.  En conséquence, les développeurs attendent leur tour pour tester et ne peuvent pas vérifier rapidement le fonctionnement de la nouvelle version de l'application. <br><br>  Le déploiement et la gestion automatisés des environnements de test dans le cloud public suppriment la limitation de la vitesse de test et réduisent finalement le délai de commercialisation.  De plus, la gestion des coûts lors de la location de ressources cloud est plus prévisible et les coûts eux-mêmes sont inférieurs à ceux de l'utilisation de votre propre équipement spécialisé pour les bancs d'essai. <br></div></div><br>  Un autre avantage des environnements de test cloud est l'intégration avec les outils CI / CD.  Ces solutions (par exemple, Jenkins) contiennent des plugins qui vous permettent de créer dynamiquement des environnements de test dans le cloud MCS pendant la génération.  Vous pouvez activer un environnement de test juste avant d'exécuter des tests fonctionnels ou de régression.  Si les tests réussissent, l'environnement s'effondrera automatiquement, si quelque chose ne va pas - l'environnement sera enregistré afin que les développeurs puissent se reconnecter et comprendre la raison de la régression. <br><br><h4>  Blocs de construction préfabriqués pour les environnements de test </h4><br>  Déployez rapidement l'environnement de test sur la plateforme Mail.Ru Cloud Solutions <br>  PaaS aide, par exemple, les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">conteneurs Kubernetes</a> et les bases de données dans le cloud.  Kubernetes développe un catalogue de services avec des centaines d'applications. <br><br>  À partir du catalogue, vous pouvez déployer ActiveMQ, RabbitMQ, les clusters Kafka, les systèmes de surveillance et d'analyse des journaux, divers CMS et bases de données en quelques minutes.  Contrairement au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Docker Hub</a> populaire, qui ne contient que des modèles d'application personnalisés, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">catalogue de services Kubernetes</a> possède des modèles de haut niveau qui simplifient l'intégration.  À partir des modèles, vous pouvez déployer des composants d'application préconfigurés (file d'attente de messages, découverte de services, bases de données, serveurs d'applications, outils CI / CD, serveurs de mise en cache, outils de chaîne de blocs et bien plus encore), sans avoir à configurer les machines virtuelles sur lesquelles ils sont déployés. <br><br><img src="https://habrastorage.org/webt/gj/kc/gb/gjkcgbque7j7a5qzoy6sn5-u2xk.gif"><br>  <i>Applications disponibles sur le marché Kubeapps.</i> <br><br><h4>  Sandboxes pour Big Data </h4><br>  Sur MCS, vous pouvez déployer des environnements de test pour les applications Big Data.  En utilisant le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">service PaaS Big Data,</a> vous pouvez créer des clusters de Hadoop, Spark, HBase et Airflow.  Le processus de déploiement est entièrement automatisé, ce qui permet d'économiser des semaines par rapport à l'auto-configuration. <br><br>  Un avantage supplémentaire ici est la facturation de seconde en seconde et la mise à l'échelle instantanée.  La possibilité de créer des environnements de test extensibles pendant de courtes périodes réduit les coûts de maintenance d'une infrastructure informatique analytique.  Les économies peuvent atteindre 80% par rapport à sur site. <br><br><h4>  Intégration avec Infrastructure-as-a-Code </h4><br>  Contrairement aux solutions propriétaires basées sur VMWare, la plateforme cloud MCS est construite sur la base du logiciel ouvert OpenStack, qui a une intégration complète avec divers outils: Terraform, Ansible, Puppet, Chef. <br><br>  Terraform est construit dans l'esprit d'Infrastructure-as-Code (IaC), lorsque le processus de configuration de l'infrastructure est organisé comme un codage et plus familier aux développeurs.  Terraform est difficile à utiliser dans un cloud privé car il manque une intégration complète avec VMware.  Dans le cloud MCS, les entreprises peuvent utiliser des exemples prêts à l'emploi de Terraform (ils se trouvent dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce référentiel GitHub</a> ). <br><br><img src="https://habrastorage.org/webt/be/gg/1c/begg1c5ptsbqxm20w97a_x57w54.gif"><br>  <i>Création d'un environnement de test à l'aide de Terraform.</i> <br><br><h2>  Souviens toi de moi </h2><br><ul><li>  Les tests dans le cloud deviennent une pratique naturelle dans l'industrie informatique et sont déjà appliqués par une grande variété d'organisations: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des universités d'État</a> aux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">grandes entreprises informatiques</a> . </li><li>  La création d'environnements de test dans le cloud permet d'économiser de l'argent grâce à la possibilité de mise à l'échelle et d'automatisation instantanées via des API, qui fournissent une utilisation à près de 100% de l'infrastructure louée. </li><li>  Les services supplémentaires sur la plate-forme cloud et les modèles sur les conteneurs Kuberntetes sont des blocs de construction prêts à l'emploi qui n'ont pas besoin d'être configurés. </li><li>  Les services difficiles à configurer, tels que les outils de traitement Big Data, sont plus faciles à louer dans le cloud en tant que modèles préconfigurés.  Vous économiserez des semaines en ne plongeant pas dans les paramètres. </li><li>  MCS est construit sur OpenStack et entièrement intégré à Terraform et à d'autres outils DevOps. </li></ul><br>  Tous ces outils peuvent être essayés gratuitement sur la plateforme Mail.Ru Cloud Solutions.  Jusqu'à fin novembre, en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utilisant ce lien</a> avec le code promo ILOVEHABR, vous pouvez ajouter 1000 roubles à votre compte et test-test-test. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr429154/">https://habr.com/ru/post/fr429154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr429144/index.html">Smartphones pliables et autres informations Android Dev Summit</a></li>
<li><a href="../fr429146/index.html">Alimentation à découpage pour téléscripteur des années 40 (avec des thyratrons au mercure lumineux!)</a></li>
<li><a href="../fr429148/index.html">Comment des «gestionnaires efficaces» ont noyé Flickr</a></li>
<li><a href="../fr429150/index.html">Gestion de vos modules pour CMS à l'aide de composer</a></li>
<li><a href="../fr429152/index.html">Composant de navigation Android. Des choses simples à faire soi-même</a></li>
<li><a href="../fr429156/index.html">Toute la vérité sur RTOS. Article # 19. Sémaphores: introduction et services de base</a></li>
<li><a href="../fr429158/index.html">Le syndrome de l'imposteur affecte autant les hommes que les femmes ... et d'autres résultats de 10 000 entretiens techniques</a></li>
<li><a href="../fr429160/index.html">GPU de la console Nintendo DS et fonctionnalités intéressantes</a></li>
<li><a href="../fr429162/index.html">«Pour apporter des changements, comprendre pourquoi les gens y résistent»: Jim Holmes sur le test de la culture</a></li>
<li><a href="../fr429166/index.html">Multicristal: de l'histoire à la spéculation sur l'avenir</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>