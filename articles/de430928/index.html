<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ò£Ô∏è üóØÔ∏è üë©üèΩ‚ÄçüöÄ Nur zum "Smart Home": Wie man eine "intelligente" Hintergrundbeleuchtung macht üë®üèæ‚Äçüé§ üëÇüèª üöª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Als ich nach Hause kam, war es immer unangenehm: Man √∂ffnete die T√ºr und dann war es dunkel, dann kam die Idee auf, die Hintergrundbeleuchtung im Korr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nur zum "Smart Home": Wie man eine "intelligente" Hintergrundbeleuchtung macht</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430928/">  Als ich nach Hause kam, war es immer unangenehm: Man √∂ffnete die T√ºr und dann war es dunkel, dann kam die Idee auf, die Hintergrundbeleuchtung im Korridor zu machen, aber nicht einfach, aber was konnte vom Telefon aus eingeschaltet werden, bevor man nach Hause kam.  Gut gesagt - es bedeutet, dass Sie anfangen m√ºssen. <br><div class="spoiler">  <b class="spoiler_title">Ein paar Gedanken des Autors vor dem Lesen dieses Artikels.</b> <div class="spoiler_text"> (Bevor ich den Artikel weiter lese, sollte ich hier nat√ºrlich einen Kommentar einf√ºgen, dass dieser Text zun√§chst als kleines Tutorial zur Arbeit mit gpio mit Java betrachtet werden sollte, das in einem solchen Beispiel gezeigt wird, aber keine Anweisung, die jeden Benutzer √ºberzeugt √ºber die Notwendigkeit, diesen Weg zu gehen) <br></div></div><br><br>  Da eine zuk√ºnftige Erweiterung dieses Systems geplant ist (oder nicht), wurde beschlossen, einen Einplatinencomputer als Basis zu verwenden.  Mit einer leichten Bewegung der Maus auf Ali, dem billigsten &lt; <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">orange pi zero 256mb</a> . <br><img src="https://habrastorage.org/webt/jx/wh/yq/jxwhyq_cjcmhsvlptfbdsoxlkuk.jpeg"><br><a name="habracut"></a><br><br><h3>  Verbindung </h3><br>  Dann ist der mechanische Teil nichts kompliziertes.  Wie bei der Arduino-Karte, nur in √úbereinstimmung mit den Ausg√§ngen auf orangefarbenem Pi. <br><br><img src="https://habrastorage.org/webt/8o/ns/x7/8onsx7mrwglfjj_grmejo2dpx1o.jpeg"><br><br>  Wir nehmen die √ºbliche Staffel f√ºr "hausgemacht".  Einerseits verbinden wir den Strom- und Steuerstift, andererseits schneiden wir das Stromkabel unserer Lampe ab und stecken es in das Relais (in meinem Fall war es ein Diodenband). <br><br><img src="https://habrastorage.org/webt/og/py/0n/ogpy0niwfzdxugl6hoj7qbiuvpy.jpeg"><br><br>  Schema: <br><br><img src="https://habrastorage.org/webt/bp/uu/hu/bpuuhugk5quejtarxesuakzeyac.jpeg"><br><br>  Das ist alles, du bist ein Genie. <br><br><h3>  Etwas Code </h3><br>  Mit dem technischen Teil ist dies erledigt.  Wir wenden uns der Software zu, hier ist auch alles einfach: <br><br><ol><li>  Wir installieren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Armbian</a> oder ein anderes Linux auf der SD-Karte, aber ich habe dieses gew√§hlt.  Ich empfehle, das Bild mit einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Radierer aufzunehmen.</a> </li><li>  Als n√§chstes installieren Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Java</a> √ºber apt-get in 3 Befehlen: <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#sudo add-apt-repository ppa:webupd8team/java #sudo apt-get update #sudo apt-get install oracle-java8-installer</span></span></code> </pre> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">F√ºgen Sie</a> mit Hilfe der Gita das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">WiringPi-</a> Set f√ºr unser Board hinzu (es enth√§lt verschiedene Bibliotheken f√ºr die Arbeit mit GPIO und alle Arten von Tools f√ºr dasselbe). <br>  Auch nicht schwer: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#git clone https://github.com/vladikoms/WiringOP-Zero.git #cd WiringOP-Zero #chmod +x ./build #sudo ./build</span></span></code> </pre> <br>  √úberpr√ºfen Sie: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#gpio -v #gpio readall</span></span></code> </pre> </li></ol><br>  In diesem Teil, wenn das Board fertig ist, gehen Sie zum Computer und zur Lieblingsidee. <br><br>  Wir werden den Server im Fr√ºhjahr bereitstellen. Gehen Sie also entweder zu ihrer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Website</a> oder erstellen Sie ein Fr√ºhlingsprojekt mit Hagel. <br><br><img src="https://habrastorage.org/webt/0z/2b/i9/0z2bi9goqonrdfaza1giw5oxmya.png"><br><br>  Um mit gpio arbeiten zu k√∂nnen, m√ºssen Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">pi4j-</a> Bibliothek installieren. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dazu</a> m√ºssen Sie das Repository und die Abh√§ngigkeit hinzuf√ºgen. <br><br>  Und dann sollte das endg√ºltige Skript ungef√§hr so ‚Äã‚Äãaussehen: <br><br><div class="spoiler">  <b class="spoiler_title">build.gradle</b> <div class="spoiler_text"><pre> <code class="java hljs">buildscript { ext { springBootVersion = <span class="hljs-string"><span class="hljs-string">'2.1.0.RELEASE'</span></span> } repositories { mavenCentral() } dependencies { classpath(<span class="hljs-string"><span class="hljs-string">"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}"</span></span>) } } apply plugin: <span class="hljs-string"><span class="hljs-string">'java'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'eclipse'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'org.springframework.boot'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'io.spring.dependency-management'</span></span> group = <span class="hljs-string"><span class="hljs-string">'com.lary.sh'</span></span> version = <span class="hljs-string"><span class="hljs-string">'0.0.1-SNAPSHOT'</span></span> sourceCompatibility = <span class="hljs-number"><span class="hljs-number">1.8</span></span> jar{ baseName = <span class="hljs-string"><span class="hljs-string">'SH'</span></span> version = <span class="hljs-string"><span class="hljs-string">'0.0.1-SNAPSHOT'</span></span> } repositories { mavenCentral() maven{ url <span class="hljs-string"><span class="hljs-string">"https://oss.sonatype.org/content/groups/public"</span></span> <span class="hljs-comment"><span class="hljs-comment">//  } } dependencies { implementation('org.springframework.boot:spring-boot-starter-data-rest') implementation('org.springframework.boot:spring-boot-starter-web') runtimeOnly('org.springframework.boot:spring-boot-devtools') testImplementation('org.springframework.boot:spring-boot-starter-test') compile 'com.pi4j:pi4j-core:1.2-SNAPSHOT' //   }</span></span></code> </pre><br></div></div><br>  Kommen wir zur GPIO-Steuerungsklasse: <br><br><div class="spoiler">  <b class="spoiler_title">Gpio.java</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyGpio</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GpioController gpio ; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GpioPinDigitalOutput myLed; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Gpio</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//          ( ) PlatformManager.setPlatform(Platform.ORANGEPI);//  ,    OrangePI } catch (PlatformAlreadyAssignedException e) { e.printStackTrace(); } gpio= GpioFactory.getInstance(); myLed = gpio.provisionDigitalOutputPin(OrangePiPin.GPIO_08); //  8    //       } public void light(){ //     if(myLed.isHigh()) myLed.low(); //             else myLed.high();//        (8) } public void blink(){ //       for (int i =0;i&lt;10;i++) { try { light(); Thread.sleep(500); } catch (Exception e){ e.printStackTrace(); } } } }</span></span></code> </pre> <br></div></div><br>  Der vorgestellte Code ist recht einfach und impliziert keine gute Kontrolle √ºber die Platinenstifte, √∂ffnet jedoch die T√ºr dazu. <br><br>  Nun, die letzte Phase ist die Erstellung des Controllers im Fr√ºhjahr <br><br><div class="spoiler">  <b class="spoiler_title">Gpiocontroller.java</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Controller</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GpioController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/blink"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">blink</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpServletResponse response, HttpServletRequest request )</span></span></span><span class="hljs-function"> </span></span>{ Gpio gpio =<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Gpio(); gpio.blink(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"blink"</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/light"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">light</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ Gpio gpio =<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Gpio(); gpio.light(); } }</code> </pre><br></div></div><br>  Nun ein paar neue Gesten in Form der Erstellung einer JAR-Datei mit Gradle.  √úbertragen Sie danach per SFTP auf die Karte (in vielen IDs k√∂nnen Sie die Bereitstellung direkt konfigurieren) und f√ºhren Sie das JAR auf dem Ger√§t aus.  Wechseln Sie als N√§chstes im Browser zu dem gesch√§tzten 192.168.0. ***: 8080 / light <br>  und genie√üen Sie es in der Hoffnung, dass dies dazu beitr√§gt, unsere Finger nachts zu halten oder das Licht einzuschalten, bis wir nach Hause kommen. <br><br>  Im n√§chsten Teil (falls ich jemals dazu komme) zeige ich Ihnen auf jeden Fall verschiedene Arten der Interaktion mit unserem ‚Äûintelligenten‚Äú Zuhause. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier ist die Quelle</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">und dann mit dem Kamm arbeiten (gpio)</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de430928/">https://habr.com/ru/post/de430928/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de430916/index.html">Kohlendioxiddetektor MT8057S. Nicht√ºberpr√ºfung unter Beteiligung eines Nichtemulators</a></li>
<li><a href="../de430918/index.html">√úber Flutter, kurz: Grundlagen</a></li>
<li><a href="../de430922/index.html">Berechnungsbeispiel f√ºr Schalttafel</a></li>
<li><a href="../de430924/index.html">Ada Programmierung</a></li>
<li><a href="../de430926/index.html">Die Zeit ist fragmentiert; ein bisschen √ºber die √Ñhnlichkeit verteilter Systeme und ein schwaches Speichermodell</a></li>
<li><a href="../de430930/index.html">√úber 3D-Grafiken in einfachen Worten</a></li>
<li><a href="../de430932/index.html">Hacker haben einer russischen Bank mehr als 21 Millionen Rubel gestohlen</a></li>
<li><a href="../de430934/index.html">Asterisk Dialplan-Erweiterungsmaskengenerator</a></li>
<li><a href="../de430936/index.html">DEFCON 21. DNS-Konferenzen k√∂nnen gesundheitssch√§dlich sein. Teil 2</a></li>
<li><a href="../de430938/index.html">So erhalten Sie die ersten Auftr√§ge im Design, wenn kein Portfolio und keine Erfahrung vorhanden sind</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>