<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💹 👍🏽 🌔 PVS-Studio: soporte para los estándares de codificación MISRA C y MISRA C ++ 💇🏽 💖 🔌</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A partir de la versión 6.27, el analizador de código estático PVS-Studio puede clasificar sus advertencias de acuerdo con los estándares MISRA C y MIS...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PVS-Studio: soporte para los estándares de codificación MISRA C y MISRA C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/432660/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d5/54d/9e6/7d554d9e67b20169e7b7b30a8e854ebd.png" alt="PVS-Studio, MISRA C, MISRA C ++"></div><br>  A partir de la versión 6.27, el analizador de código estático PVS-Studio puede clasificar sus advertencias de acuerdo con los estándares MISRA C y MISRA C ++.  Gracias al soporte de estos estándares, el analizador ha sido posible usarlo efectivamente para mejorar la seguridad, portabilidad y confiabilidad de los programas para sistemas integrados. <br><a name="habracut"></a><br>  Este año comenzamos a admitir estándares como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CWE</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SEI CERT</a> en el analizador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PVS-Studio</a> .  Básicamente, el soporte se redujo a la clasificación de los diagnósticos ya implementados en el analizador de acuerdo con estos estándares.  Además, se implementaron varios diagnósticos nuevos o se ampliaron varios diagnósticos antiguos para cumplir más plenamente con estos estándares. <br><br>  Tablas de cumplimiento de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">diagnósticos</a> de PVS-Studio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">a</a> varios estándares: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cumplimiento de CWE</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cumplimiento SEI CERT</a> </li></ul><br>  Ahora es el momento para los estándares MISRA C y MISRA C ++.  Estos son estándares de desarrollo de software C y C ++ creados por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MISRA</a> (Motor Industry Software Reliability Association).  El objetivo de los estándares es mejorar la seguridad, la portabilidad y la confiabilidad de los programas integrados.  Se paga el texto de los estándares. <br><br>  Consideramos la fortaleza de nuestro analizador para poder tomarlo y comenzar a usarlo en un proyecto grande existente.  Puede ejecutar PVS-Studio sobre una base de código, detectar errores antiguos y luego usar el analizador regularmente para encontrar nuevos defectos lo antes posible. <br><br>  Muchos analizadores toman un camino diferente e implementan diagnósticos relacionados con los estándares de codificación.  Sugieren cómo nombrar mejor las variables, recordarle que inserte comentarios al comienzo de un archivo, etc.  Es necesario y útil.  Sin embargo, en este caso, los analizadores son muy "ruidosos" y generan una gran cantidad de advertencias en las que las advertencias sobre errores se ahogan. <br><br>  Decidimos que PVS-Studio sería un analizador que busca errores.  Esta es su ventaja competitiva.  El programador puede ejecutarlo en una base de código grande y asegurarse de que no se verá abrumado con una increíble cantidad de mensajes sobre la ejecución del código y podrá centrarse en los errores. <br><br>  Por lo tanto, inicialmente fuimos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">críticos con</a> los estándares MISRA y durante mucho tiempo no planeamos implementarlos.  Los estándares MISRA están diseñados para simplificar y mejorar la calidad del código en su conjunto, lo que ayuda a prevenir errores.  Es decir, solo la mayoría de los diagnósticos se relacionan con el estilo de escritura de código.  Esto se explica mejor con un ejemplo. <br><br>  Hay una regla en el estándar MISRA según la cual los cuerpos de las <i>declaraciones if</i> deben encerrarse entre llaves.  En MISRA C, esta es la regla 15.6, y en MISRA C ++ es 6-4-1.  Ejemplo de código incorrecto: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == bestOffs) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>;</code> </pre> <br>  El código correcto es: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == bestOffs) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  Dichos diagnósticos no se pueden aplicar a proyectos existentes escritos para trabajar bajo el control del sistema operativo Winodws, Linux o macOS.  Por ejemplo, la regla de llaves que se acaba de describir proporciona <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">operaciones de</a> diagnóstico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2507 de</a> <b>1947</b> (MISRA C 15.6, MISRA C ++ 6-4-1) para el proyecto WinMerge.  ¡Pero WinMerge es un proyecto pequeño!  Solo alrededor de 250,000 líneas de código en C y C ++. <br><br>  Hasta 2018, el analizador PVS-Studio se centró en probar aplicaciones de escritorio que se ejecutan en Windows, Linux y macOS.  En consecuencia, el apoyo a MISRA tenía poco sentido práctico.  Nadie implementará este estándar en un gran proyecto de escritorio existente. <br><br>  Todo cambió cuando en 2018 comenzamos a admitir sistemas integrados.  Este año, el analizador apoyó: <br><br><ul><li>  Ventanas  IAR Embedded Workbench, compilador C / C ++ para ARM C, C ++ </li><li>  Windows / Linux  Keil µVision, DS-MDK, compilador ARM 5/6 C, C ++ </li><li>  Windows / Linux  Texas Instruments Code Composer Studio, Herramientas de generación de código ARM C, C ++ </li><li>  Windows / Linux / macOS.  GNU Arm Embedded Toolchain, compilador Arm Embedded GCC, C, C ++ </li></ul><br>  A diferencia de los proyectos de escritorio, muchos desarrolladores integrados ya escriben proyectos teniendo en cuenta las recomendaciones de MISRA, y su soporte en nuestro analizador será especialmente útil para los desarrolladores. <br><br>  Sin embargo, aún tememos que uno de los desarrolladores, sin entenderlo, pueda considerar que "arruinamos" el analizador al introducir "diagnósticos extraños" en él.  Por lo tanto, los diagnósticos MISRA están desactivados de forma predeterminada.  Consideramos que esta es una decisión muy correcta.  Estos diagnósticos solo se pueden incluir si sabe exactamente para qué sirven y cómo usarlos. <br><br>  Por ejemplo, para los programadores de aplicaciones puede que no esté claro por qué el analizador les prohíbe de repente usar memoria dinámica.  Es decir  por qué de repente no puedes asignar memoria usando la función <i>malloc</i> o el <i>nuevo</i> operador.  Pero tales limitaciones ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2511</a> ) son bien entendidas por los desarrolladores de dispositivos integrados.  En algunos dispositivos que operan continuamente, es realmente inaceptable usar programas para los cuales la memoria se puede agotar repentinamente. <br><br>  Entonces, ahora puede instalar o actualizar PVS-Studio y comenzar a usar diagnósticos que implementan las reglas de MISRA C y MISRA C ++.  El conjunto de reglas admitidas está incompleto, pero esto no debería ser un obstáculo para comenzar a usar PVS-Studio.  Por el momento, no hay un único analizador estático que implemente absolutamente todas las reglas de MISRA.  En el futuro, planeamos expandir el conjunto de reglas de diagnóstico implementadas en MISRA, y esperamos convertirnos en una herramienta líder en la integridad de su apoyo. <br><br>  Para habilitar los diagnósticos MISRA en Visual Studio o en la utilidad PVS-Studio Standalone, debe cambiar Disabled a Show All en la configuración. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6a3/bcd/d5f/6a3bcdd5fba435e143819e96d40bc2c6.png" alt="Habilitar misra"></div><br>  Dado que Desactivado significa que las advertencias no se generan en absoluto y no entran en el informe, será necesario reiniciar el análisis.  El modo deshabilitado se establece de manera predeterminada para reducir el tamaño del informe.  La inclusión de los diagnósticos MISRA puede conducir a una gran cantidad de operaciones y a un fuerte aumento de los archivos con el informe (archivos * .plog). <br><br>  Para el análisis de proyectos en sistemas operativos Linux y macOS, existe una utilidad pvs-studio-analyzer.  De forma predeterminada, solo se incluyen diagnósticos de propósito general (Análisis general, GA).  Se pueden habilitar reglas adicionales utilizando la opción -a: <br><br><pre> <code class="cpp hljs">-a [MODE], --analysis-mode [MODE] MODE defines the type of warnings: <span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">64</span></span>-bit errors; <span class="hljs-number"><span class="hljs-number">2</span></span> - reserved; <span class="hljs-number"><span class="hljs-number">4</span></span> - General Analysis; <span class="hljs-number"><span class="hljs-number">8</span></span> - Micro-optimizations; <span class="hljs-number"><span class="hljs-number">16</span></span> - Customers Specific Requests; <span class="hljs-number"><span class="hljs-number">32</span></span> - MISRA. Modes can be combined by adding the values Default: <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br>  Para habilitar las alertas GA y MISRA, debe ejecutar un análisis con los siguientes parámetros: <br><br><pre> <code class="cpp hljs">pvs-studio-analyzer analyze ... -a <span class="hljs-number"><span class="hljs-number">36</span></span> ... -o /path/to/report.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> ...</code> </pre> <br>  El valor 36 es un OR bit a bit para 4 (GA - Diagnóstico general) y 32 (MISRA). <br><br>  Además, se recomienda crear varios informes con diferentes tipos de alertas, por ejemplo, así: <br><br><pre> <code class="cpp hljs">plog-converter -a GA:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span> -t tasklist -o /path/to/ga_results.tasks /path/to/project.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> plog-converter -a MISRA:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span> -t tasklist -m misra -o /path/to/misra_results.tasks /path/to/project.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span></code> </pre> <br>  El primer informe ga_results.tasks contendrá advertencias generales de los niveles de confianza Alto y Medio. <br><br>  Y el segundo informe "misra_results.tasks" solo recibirá advertencias relacionadas con MISRA de todos los niveles.  El interruptor "-m misra" indica que, además de los números en el formato PVS-Studio, el informe incluirá números de diagnóstico de acuerdo con la clasificación MISRA. <br><br>  Todos los modos de inicio del analizador en Linux y macOS, así como los formatos de informes, se describen en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentación</a> . <br><br>  PD Queremos evaluar cuánto adivinamos eligiendo MISRA como una de las direcciones de desarrollo de PVS-Studio.  Si está interesado en este tema, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escríbanos</a> .  Incluso si aún no planea utilizar PVS-Studio, escriba.  Queremos hacerle algunas preguntas aclaratorias. <br><br>  Enlaces adicionales: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Descargar PVS-Studio</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cómo ejecutar PVS-Studio en Linux y macOS</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El analizador de código estático PVS-Studio 6.22 está adaptado para compiladores ARM (Keil, IAR)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PVS-Studio incluye soporte para GNU Arm Embedded Toolchain</a> </li></ol><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/ts/z9/km/tsz9kmyjtteajhd4x1au60rsrvq.png" align="left"></a> </p><br><br>  Si desea compartir este artículo con una audiencia de habla inglesa, utilice el enlace a la traducción: Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PVS-Studio: Soporte de los estándares de codificación MISRA C y MISRA C ++</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es432660/">https://habr.com/ru/post/es432660/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es432650/index.html">Colección de requisitos para un proyecto de software, sin cortes</a></li>
<li><a href="../es432652/index.html">¿Necesitas una SD-WAN?</a></li>
<li><a href="../es432654/index.html">Dónde almacenar datos: una excursión al centro de datos IXcellerate</a></li>
<li><a href="../es432656/index.html">Introducción a las anotaciones de tipo Python</a></li>
<li><a href="../es432658/index.html">Diputados de la Duma del Estado propusieron prohibir los sistemas de transferencia de dinero que operan sin registro del Banco Central</a></li>
<li><a href="../es432664/index.html">Implementamos componentes angulares en React, Vue e incluso jQuery si lo desea</a></li>
<li><a href="../es432666/index.html">Gestión de productos Meetup Grabación de video</a></li>
<li><a href="../es432668/index.html">Fácil gestión de puertos de red.</a></li>
<li><a href="../es432670/index.html">Hoja de ruta de disciplinas matemáticas para el aprendizaje automático, parte 1</a></li>
<li><a href="../es432672/index.html">¿Qué buscamos desarrolladores para desarrollar la plataforma 1C: Enterprise?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>