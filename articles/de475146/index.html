<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñáÔ∏è üß• üåë Die Qual oder die lange Geschichte eines Datenwiederherstellungsversuchs üë®‚Äçüç≥ ‚ÜòÔ∏è üëé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Auf dem Hof ‚Äã‚Äãwar das Jahr 2019. Das QUANTUM FIREBALL Plus KA-Laufwerk mit einer Kapazit√§t von 9,1 GB kam in unser Labor, was f√ºr unsere Zeit nicht ga...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die Qual oder die lange Geschichte eines Datenwiederherstellungsversuchs</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475146/">  Auf dem Hof ‚Äã‚Äãwar das Jahr 2019.  Das QUANTUM FIREBALL Plus KA-Laufwerk mit einer Kapazit√§t von 9,1 GB kam in unser Labor, was f√ºr unsere Zeit nicht ganz normal ist.  Laut Angaben des Eigent√ºmers des Laufwerks trat der Fehler bereits im Jahr 2004 auf, als ein ausgefallenes Netzteil eine Festplatte und andere PC-Komponenten beschlagnahmte.  Dann gab es Spazierg√§nge auf verschiedenen Diensten mit Versuchen, das Laufwerk zu reparieren und Daten wiederherzustellen, die nicht erfolgreich waren.  Irgendwo haben sie versprochen, dass es billig ist, aber sie haben das Problem immer noch nicht gel√∂st, irgendwo war es zu teuer und der Kunde wollte die Daten nicht wiederherstellen, aber am Ende ging die Fahrt durch viele Servicezentren.  Er ging mehrere Male verloren, doch da der Eigent√ºmer darauf geachtet hatte, Informationen von verschiedenen Aufklebern auf der Festplatte im Voraus aufzuzeichnen, gelang es ihm, sicherzustellen, dass seine Festplatte von einigen Service-Centern zur√ºckgegeben wurde.  Die Schaltkreise blieben nicht unbemerkt, auf der urspr√ºnglichen Controller-Platine waren mehrere L√∂tspuren vorhanden, und das Fehlen von SMD-Elementen war auch optisch zu sp√ºren (mit Blick auf die Zukunft werde ich sagen, dass dies das geringste der Probleme dieses Laufwerks ist). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ju/oa/mq/juoamqzpbrmmmvhxyc8-re0-j2m.png"></div><br>  <i>Abb.</i>  <i>1 Festplatte Quantum Fireball Plus KA 9,1 GB</i> <br><a name="habracut"></a><br>  Als erstes musste ich mit einem funktionierenden Controller Board im Spenderarchiv eines so uralten Zwillingsbruders dieses Laufwerks suchen.  Nach Abschluss dieser Suche konnten detaillierte diagnostische Ma√ünahmen durchgef√ºhrt werden.  Nachdem wir die Motorwicklungen auf Kurzschluss √ºberpr√ºft und sichergestellt haben, dass sie nicht vorhanden sind, installieren wir die Platine vom Antrieb - vom Spender zum Antrieb - vom Patienten.  Wir aktivieren und h√∂ren das normale Ger√§usch der sich drehenden Welle, bestehen den Kalibrierungstest mit dem Laden der Firmware und nach einigen Sekunden registriert der Frequenzumrichter seine Bereitschaft, auf Befehle von der Schnittstelle zu reagieren. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-h/57/vy/-h57vy6onwk8kkvcivdtq33ycie.png"></div><br>  <i>Abb.</i>  <i>2 DRD DSC-Anzeigen zeigen die Bereitschaft zum Annehmen von Befehlen an.</i> <br><br>  Wir behalten uns alle Kopien der Firmware-Module vor.  Wir √ºberpr√ºfen die Integrit√§t der Firmware-Module.  Es gibt keine Probleme beim Lesen der Module, aber die Analyse der Berichte zeigt, dass es einige Kuriosit√§ten gibt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/do/vc/c3/dovcc3pxy7yje_t9trkxk3twfd4.png"></div><br>  <i>Abb.</i>  <i>3. Zonentabelle.</i> <br><br>  Wir achten auf die Zonenverteilungstabelle und stellen fest, dass die Anzahl der Zylinder 13845 betr√§gt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jj/7a/bk/jj7abkkhaeb-43dxtov1u5ihdnw.png"></div><br>  <i>Abb.</i>  <i>4 P-Liste (Prim√§rliste - eine Liste der w√§hrend des Produktionszyklus eingef√ºhrten Fehler).</i> <br><br>  Wir achten auf zu wenige M√§ngel und deren Lokalisierung.  Wir sehen uns das Modul zum Verstecken von Fabrikationsfehlern an (60h) und stellen fest, dass es leer ist und keine Eintr√§ge enth√§lt.  Auf dieser Grundlage k√∂nnen wir davon ausgehen, dass in einigen der vorherigen Servicezentren m√∂glicherweise Manipulationen am Servicebereich des Laufwerks vorgenommen wurden und ein Fremdmodul versehentlich oder absichtlich aufgezeichnet oder die Fehlerliste im Original gel√∂scht wurde.  Um diese Annahme zu √ºberpr√ºfen, erstellen wir in Data Extractor eine Aufgabe mit den Optionen "Sektorweise Kopie erstellen" und "Virtuellen √úbersetzer erstellen". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3l/jd/hl/3ljdhluum6cv3dmilqwbsltk1lk.png"></div><br>  <i>Abb.</i>  <i>5 Aufgabenparameter.</i> <br><br>  Nach dem Erstellen der Aufgabe betrachten wir die Eintr√§ge in der Partitionstabelle im Sektor Null (LBA 0). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/jv/mt/gtjvmttab56tlxbz501caz8cpgk.png"></div><br>  <i>Abb.</i>  <i>6 Master Boot Record und Partitionstabelle.</i> <br><br>  Bei Offset 0x1BE gibt es einen einzelnen Datensatz (16 Bytes).  Der Typ des Dateisystems auf der Partition ist NTFS, der Versatz zum Anfang des Sektors 0x3F (63), die Gr√∂√üe der Partition betr√§gt 0x011309A3 (18.024.867) Sektoren. <br>  √ñffnen Sie im Sektoreditor LBA 63. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kw/yk/fq/kwykfq8od37sp8g22wtvijdpx1m.png"></div><br>  <i>Abb.</i>  <i>7 NTFS-Bootsektor</i> <br><br>  Gem√§√ü den Informationen im NTFS-Bootsektor kann Folgendes gesagt werden: Die im Volume angenommene Sektorgr√∂√üe betr√§gt 512 Bytes (das Wort 0x0200 (512) wird bei Offset 0x0B geschrieben), die Anzahl der Sektoren im Cluster betr√§gt 8 (Byte 0x08 wird bei Offset 0x0D geschrieben), die Clustergr√∂√üe betr√§gt 512x8 = 4096 Bytes, der erste MFT-Datensatz befindet sich mit einem Versatz von 6.291.519 Sektoren vom Plattenanfang entfernt (bei Versatz 0x30 ist das Vierfachwort 0x00 00 00 00 00C 00 00 (786 432) die Nummer des ersten MFT-Clusters. Die Sektornummer wird nach der Formel berechnet: Clusternummer * Die Anzahl der Sektoren im Cluster + wird vor dem Start der Partition verschoben (786 432 * 8 + 63 = 6.291.519). <br>  Wir kommen zum Sektor 6 291 519. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l7/yp/uy/l7ypuym-p2gflba2d5m49belsp8.png"></div><br>  <i>Abb.</i>  <i>8</i> <br><br>  Die in diesem Sektor enthaltenen Daten unterscheiden sich jedoch vollst√§ndig vom MFT-Datensatz.  Dies weist zwar auf eine m√∂gliche fehlerhafte √úbertragung aufgrund einer fehlerhaften Fehlerliste hin, beweist dies jedoch nicht.  Zur weiteren √úberpr√ºfung lesen wir die Platte in 10.000 Sektoren in beiden Richtungen relativ zu 6.291.519 Sektoren.  Und dann werden wir nach regul√§ren Ausdr√ºcken im read suchen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gx/sc/py/gxscpyil_-qwpvt8dtsjuoqkwda.png"></div><br>  <i>Abb.</i>  <i>9 Erster MFT-Datensatz</i> <br><br>  In Sektor 6.291.551 finden wir den ersten MFT-Datensatz.  Seine Position unterscheidet sich von der berechneten Position um 32 Sektoren, und es folgt fortlaufend eine Gruppe von 16 Datens√§tzen (von 0 bis 15).  Geben Sie die Position des Sektors 6 291 519 in die Verschiebungstabelle ein, um 32 Sektoren vorzur√ºcken. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jc/vy/hb/jcvyhbxvibt7si5xcibgz-ysrbg.png"></div><br>  <i>Abb.</i>  <i>10</i> <br><br>  Die Position von Datensatz Nr. 16 sollte einen Versatz von 12 551 431 haben, aber dort finden wir Nullen, anstatt MFT aufzuzeichnen.  Wir werden eine √§hnliche Suche in der N√§he durchf√ºhren. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jd/dn/ni/jddnniazvuj5p8foynm9m_zpzjy.png"></div><br>  <i>Abb.</i>  <i>11 MFT-Datensatz 0x00000011 (17)</i> <br><br>  Es wird ein gro√ües MFT-Fragment erkannt, beginnend mit Datensatznummer 17 mit einer L√§nge von 53.646 Datens√§tzen (mit einer Verschiebung von 17 Sektoren).  F√ºr Position 12 155 431 setzen wir eine Verschiebung von +17 Sektoren in die Verschiebungstabelle. <br>  Nachdem wir die Position von MFT-Fragmenten im Raum bestimmt haben, k√∂nnen wir schlie√üen, dass dies nicht wie ein zuf√§lliger Fehler aussieht und das Aufzeichnen von MFT-Fragmenten durch falsche Offsets.  Eine Version mit einem falschen √úbersetzer kann als best√§tigt angesehen werden. <br>  Zur weiteren Lokalisierung von Scherpunkten setzen wir die maximal m√∂gliche Verschiebung.  Dazu bestimmen wir, um wie viel die letzte NTFS-Partitionsmarke verschoben wird (Kopie des Bootsektors).  In Fig. 7 ist bei Versatz 0x28 das vierte Wort der Wert der Sektoren der Partitionsgr√∂√üe 0x00 00 00 00 00 01 13 09 A2 (18.024.866).  F√ºgen wir den Versatz der Partition selbst vom Anfang der Festplatte zu ihrer L√§nge hinzu, erhalten wir den Versatz des letzten NTFS-Markers 18.024.866 + 63 = 18.024.929. Wie erwartet wurde keine Kopie des Bootsektors ben√∂tigt.  Bei der Suche in der N√§he wurde dies mit einer zunehmenden Verschiebung von +12 Sektoren relativ zum letzten Fragment der MFT festgestellt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3f/lu/ha/3fluhair61nbqs6efqtncj0oily.png"></div><br>  <i>Abb.</i>  <i>12 Kopieren Sie den NTFS-Bootsektor</i> <br><br>  Wir ignorieren eine weitere Kopie des Bootsektors bei Offset 18 041 006, da dieser nicht mit unserer Sektion zusammenh√§ngt.  Basierend auf fr√ºheren Ereignissen wurde festgestellt, dass innerhalb des Abschnitts 61 Sektoren eingestreut sind, die in der Sendung "aufgetaucht" sind und die Daten aufteilen. <br>  Wir f√ºhren eine vollst√§ndige Laufwerkslesung durch, die zu 34 ungelesenen Sektoren f√ºhrt.  Leider ist es nicht m√∂glich, zuverl√§ssig zu garantieren, dass alle von der P-Liste gestrichenen Fehler vorliegen. Es ist jedoch ratsam, ihre Position bei der weiteren Analyse zu ber√ºcksichtigen, da es in einigen F√§llen m√∂glich ist, die Verschiebungspunkte auf den Sektor und nicht auf die Datei genau zu bestimmen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sx/k9/sl/sxk9sldygcuoslhlrbi1bzuu8po.png"></div><br>  <i>Abb.</i>  <i>13 Festplattenlesestatistik.</i> <br><br>  Unsere n√§chste Aufgabe wird es sein, die ungef√§hren Orte der Schichten zu bestimmen (genau auf die Akte, in der sie entstanden sind).  Zu diesem Zweck scannen wir alle MFT-Datens√§tze und erstellen die Dateispeicherortketten (Dateifragmente). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6n/-m/bi/6n-mbihfu_ej_y_ekagijttj7we.png"></div><br>  <i>Abb.</i>  <i>14 Die Ketten des Speicherorts von Dateien oder ihrer Fragmente.</i> <br><br>  Beim √úbergang von Datei zu Datei wird au√üerdem gesucht, an welchem ‚Äã‚ÄãPunkt anstelle des erwarteten Datei-Headers andere Daten vorhanden sind und der gew√ºnschte Header wird mit einer bestimmten positiven Verschiebung erkannt.  Und w√§hrend die Schaltpunkte verfeinert werden, f√ºllen wir die Tabelle aus.  Das Ergebnis seiner F√ºllung wird √ºber 99% der Dateien ohne Schaden sein. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/on/ep/01/onep01nw4zpvpu_n3mfwruibbl8.png"></div><br>  <i>Abb.</i>  <i>15 Liste der Benutzerdateien (Zustimmung des Kunden zur Ver√∂ffentlichung dieses Screenshots)</i> <br><br>  Um Punktverschiebungen in einzelnen Dateien zu ermitteln, k√∂nnen Sie zus√§tzliche Arbeiten ausf√ºhren und, wenn Sie die Dateistruktur kennen, eingestreute Daten finden, die nicht damit zusammenh√§ngen.  Aber bei dieser Aufgabe war es wirtschaftlich nicht machbar. <br><br>  PS Ich m√∂chte auch an Kollegen appellieren, in deren H√§nden diese Scheibe vorher war.  Seien Sie bitte vorsichtig, wenn Sie mit der Ger√§tefirmware arbeiten und Servicedaten reservieren, bevor Sie √Ñnderungen vornehmen, und lassen Sie nicht zu, dass sich das Problem absichtlich verschlimmert, wenn Sie sich nicht mit dem Kunden auf die Arbeit einigen k√∂nnen. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">N√§chster Beitrag: Selbstdiagnose von Festplatten und Datenwiederherstellung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zur√ºck nach: Speichern von √úbereinstimmungen oder Wiederherstellen von Daten von Seagate ST3000NC002-1DY166 Grating HDD</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de475146/">https://habr.com/ru/post/de475146/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de475136/index.html">Maschinelles Lernen f√ºr Ihre Wohnungssuche. Teil 3: Der letzte Schubs</a></li>
<li><a href="../de475138/index.html">5 M√∂glichkeiten, den Raspberry Pi vorteilhaft zu nutzen Teil zwei</a></li>
<li><a href="../de475140/index.html">Warum Top-Physiker schwache Quantenmessungen f√ºr eine Pseudowissenschaft halten</a></li>
<li><a href="../de475142/index.html">Schlaf, Entspannung und Musik: Wie Profisportler M√ºdigkeit √ºberwinden und was k√∂nnen wir dagegen tun?</a></li>
<li><a href="../de475144/index.html">Teilen Sie Laravel in Komponenten</a></li>
<li><a href="../de475154/index.html">Inhouse-Zeitraffer mit IPEYE-Cloud-√úberwachungsservice</a></li>
<li><a href="../de475158/index.html">Playme P570 Mono Review: Kurz und b√ºndig</a></li>
<li><a href="../de475162/index.html">Verwenden von X-Macro in modernem C ++ - Code</a></li>
<li><a href="../de475164/index.html">Diskussion: Das Internet ist auf Open Source angewiesen - welche Argumente haben Kritiker?</a></li>
<li><a href="../de475166/index.html">Elektronikentwicklung. Projektaudit in Beispielen. Wir sparen die warmen B√∂den mit allen habr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>