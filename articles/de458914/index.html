<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßìüèæ üö´ üîÑ Was (nicht) Sie wissen m√ºssen, um Spiele auf Unity zu erstellen ü§Ω üë©üèº‚Äçü§ù‚Äçüë©üèª üß°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unity ist eine Spiel-Engine mit einem Schwellenwert, der weit von Null entfernt ist (im Vergleich zu demselben Game Maker Studio). In diesem Artikel w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Was (nicht) Sie wissen m√ºssen, um Spiele auf Unity zu erstellen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458914/"><img width="100%" src="https://habrastorage.org/webt/tf/uv/8n/tfuv8nnybrkzyxholyzuoaasafo.png"><br><br>  Unity ist eine Spiel-Engine mit einem Schwellenwert, der weit von Null entfernt ist (im Vergleich zu demselben Game Maker Studio). In diesem Artikel werde ich Ihnen erl√§utern, auf welche Probleme ich beim Beginn des Studiums gesto√üen bin und welche L√∂sungen ich gefunden habe.  Ich werde solche Momente am Beispiel meines 2D-Puzzlespiels f√ºr Android beschreiben (das hoffentlich bald auf dem Play Market ver√∂ffentlicht wird). <a name="habracut"></a><br><br>  Ich gebe nicht vor, wahr zu sein, und ich fordere Sie nicht auf, nach sich selbst zu wiederholen. Wenn Sie den besten Weg kennen, zeige ich Ihnen nur, wie es geht, und vielleicht schafft jemand, der gerade erst anf√§ngt, Unity kennenzulernen, sein Indie-Gamedev-Meisterwerk mit weniger Arbeit. <br><br>  Ich bin Konstrukteur von Kraftwerken, habe mich aber schon immer f√ºr das Codieren interessiert und bin mit einigen Programmiersprachen vertraut.  Daher sind wir uns einig, dass zum Erstellen von Spielen auf Unity: <br><ul><li>  Sie m√ºssen ein wenig C # oder JavaScript kennen (zumindest die C-f√∂rmige Syntax). <br></li></ul><br>  Alles, was unten geschrieben wird, ist kein Unity-Tutorial, von dem genug ohne mich im Netzwerk gez√ºchtet wurden.  Im Folgenden werden die schwierigen Momente zusammengefasst, die beim Erstellen Ihres ersten Projekts in Unity auftreten k√∂nnen. <br><br>  Es lohnt sich zu warnen, dass die bereitgestellten Skripte den gr√∂√üten Teil der Spiellogik (die "Gesch√§ftsgeheimnisse" darstellt) weglassen, aber ihre Leistung als Beispiele wurde √ºberpr√ºft. <br><br><h3>  Problem Eins - Orientierung </h3><br><img align="left" width="40%" src="https://habrastorage.org/webt/-f/za/hw/-fzahwdptbht2vwe1qm4xswgqkm.png"><br>  <b>Orientierungssperre</b> <br>  Die erste Schwierigkeit, die bei mir auftrat, war, dass ich nicht darauf geachtet habe, die visuelle Oberfl√§che f√ºr die Bildschirmorientierung zu optimieren.  Die L√∂sung ist die einfachste - wenn Sie keine √Ñnderung der Bildschirmausrichtung f√ºr das Gameplay ben√∂tigen, ist es besser, sie zu blockieren.  Keine Notwendigkeit f√ºr √ºberm√§√üige Flexibilit√§t, Sie schreiben ein Indie-Spiel, kein Projekt auf der anderen Seite von einer Million Dollar.  Warum tonnenweise bedingte √úberg√§nge und Ankerwechsel, wenn das Spiel in Portrait (zum Beispiel) besser aussieht.  Hier k√∂nnen Sie die Bildschirmausrichtung sperren: <br>  <b>Bearbeiten&gt; Projekteinstellungen&gt; Player</b> <br clear="all"><br clear="all"><img align="right" width="40%" src="https://habrastorage.org/webt/jb/3u/ot/jb3uotkehyw_t2pa2e__yw0n2ng.png"><br>  <b>Unterschiedliche Berechtigungen</b> <br>  Es ist auch wichtig, die visuelle Oberfl√§che mit unterschiedlichen Aufl√∂sungen in der ausgew√§hlten Ausrichtung zu testen. Vergessen Sie beim Testen nicht, dass Ger√§te mit einem Verh√§ltnis von 4: 3 (gut oder 3: 4) vorhanden sind, damit Sie sicher 768 x 1024 (oder 1024 x 768) hinzuf√ºgen k√∂nnen. <br><br>  <b>Bessere Positionierung</b> <br>  Um die Position und den Ma√üstab von Spielobjekten anzupassen, ist es besser, die Rechtecktransformation zu verwenden. <img align="left" width="40%" src="https://habrastorage.org/webt/rm/gk/ao/rmgkao3ttyvdkj3dbs8zmtxrm2o.png"><br><br clear="all"><br clear="all"><h3>  Problem Zwei - KOMMUNIKATION </h3><br>  Ich hatte ein √§hnliches Problem aufgrund der Tatsache, dass ich den Spielentwickler zum ersten Mal √ºber Game Maker Studio kennengelernt habe, wo das Skript ein vollwertiger Teil des Spielobjekts ist und sofort vollen Zugriff auf alle Komponenten des Objekts hat.  Unity verf√ºgt √ºber gemeinsame Skripte, von denen nur Instanzen zum Objekt hinzugef√ºgt werden.  Vereinfacht gesagt wei√ü das Skript nicht direkt, auf welchem ‚Äã‚ÄãObjekt es gerade ausgef√ºhrt wird.  Daher m√ºssen Sie beim Schreiben von Skripten die Initialisierung der Schnittstellen f√ºr die Arbeit mit den Komponenten eines Objekts oder mit den Komponenten anderer Objekte ber√ºcksichtigen. <br><br>  <b>Wir trainieren an Katzen</b> <br>  In meinem Spiel gibt es ein GameField-Objekt, auf der B√ºhne gibt es nur eine Instanz davon, es gibt auch ein gleichnamiges Skript.  Das Objekt ist f√ºr die Anzeige der Spielpunktzahl und die Wiedergabe des gesamten Spieltons verantwortlich. Meiner Meinung nach ist es f√ºr den Speicher wirtschaftlicher (im Allgemeinen verf√ºgt das Spiel nur √ºber drei Audioquellen - eine Hintergrundmusik, zwei weitere Soundeffekte).  Das Skript l√∂st die Probleme beim Speichern eines Spielkontos, beim Ausw√§hlen von AudioClip zum Abspielen von Sound und f√ºr einige Spielelogiken. <br><br>  Lassen Sie uns n√§her auf den Klang eingehen, da dieses Beispiel die Interaktion des Skripts mit den Komponenten des Objekts leicht zeigt. <br><br><img width="40%" align="left" src="https://habrastorage.org/webt/2y/ll/ab/2yllabokihsyqwabiwnod3tiqyc.png">  Nat√ºrlich sollte das Objekt das GameField.cs-Skript selbst und die AudioSource-Komponente haben, in meinem Fall zwei ganze (sp√§ter wird klar, warum). <br clear="all"><br clear="all">  Wie bereits erw√§hnt, wei√ü das Skript nicht, dass das Objekt √ºber eine AudioSource-Komponente verf√ºgt. Daher deklarieren und initialisieren wir die Schnittstelle (wir gehen derzeit davon aus, dass es nur eine AudioSource gibt): <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioSource Sound; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ Sound = GetComponent&lt;AudioSource&gt; (); }</code> </pre> <br>  Die GetComponent-Methode &lt;Komponententyp&gt; () gibt die erste Komponente des angegebenen Typs vom Objekt zur√ºck. <br><br>  Zus√§tzlich zu AudioSource ben√∂tigen Sie mehrere AudioClip: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Header (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Audio clips"</span></span></span><span class="hljs-meta">)</span></span>] [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnStart; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnEfScore; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnHighScore; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnMainTimer; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnBubbMarker; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnScoreUp;</code> </pre><br>  Im Folgenden werden die Befehle in eckigen Klammern f√ºr Inspector`a ben√∂tigt. Weitere Details finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br><img width="40%" align="left" src="https://habrastorage.org/webt/wk/t-/k7/wkt-k7spezw5hanfme5xchxexzk.png"><br><br>  Jetzt hat das Skript in Inspector neue Felder, in die wir die erforderlichen Sounds ziehen. <br><br clear="all"><br clear="all">  Erstellen Sie als N√§chstes eine SoundPlay-Methode in dem Skript, das AudioClip enth√§lt: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaySound</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AudioClip Clip = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span>{ Sound.clip = Clip; Sound.Play (); }</code> </pre><br>  Um Sound im Spiel zu spielen, rufen wir diese Methode zum richtigen Zeitpunkt mit dem Clip auf. <br><br>  Es gibt ein signifikantes Minus dieses Ansatzes: Es kann immer nur ein Sound gleichzeitig abgespielt werden. W√§hrend des Spiels m√ºssen jedoch m√∂glicherweise zwei oder mehr Sounds abgespielt werden, mit Ausnahme der Hintergrundmusik, die st√§ndig abgespielt wird. <br><br>  Um Kakophonie zu vermeiden, empfehle ich, die M√∂glichkeit der gleichzeitigen Wiedergabe von mehr als 4-5 Sounds (vorzugsweise maximal 2-3) zu vermeiden. Ich meine, kurze Sounds erster Ordnung (Sprung, M√ºnze, Spielerschuss ...). F√ºr Hintergrundger√§usche ist es besser, eine eigene Quelle zu erstellen Ton auf dem Objekt, das dieses Rauschen verursacht (wenn Sie 2D-3D-Ton ben√∂tigen) oder einem Objekt, das f√ºr alle Hintergrundger√§usche verantwortlich ist (wenn "Lautst√§rke" nicht ben√∂tigt wird). <br><br>  In meinem Spiel m√ºssen nicht mehr als zwei AudioClips gleichzeitig abgespielt werden.  F√ºr die garantierte Wiedergabe beider hypothetischer Sounds habe ich dem GameField-Objekt zwei AudioSource hinzugef√ºgt.  Um die Komponenten im Skript zu bestimmen, verwenden wir die Methode <br><pre> <code class="cs hljs">GetComponents&lt;_&gt;()</code> </pre><br>  Dies gibt ein Array aller Komponenten des angegebenen Typs vom Objekt zur√ºck. <br><br>  Der Code sieht folgenderma√üen aus: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioSource[] Sound; <span class="hljs-comment"><span class="hljs-comment">//    void Start(){ Sound = GetComponents&lt;AudioSource&gt; (); //  GetComponents }</span></span></code> </pre><br>  Die meisten √Ñnderungen wirken sich auf die PlaySound-Methode aus.  Ich sehe zwei Versionen dieser Methode: "universal" (f√ºr eine beliebige Anzahl von AudioSource in einem Objekt) und "plump" (f√ºr 2-3 AudioSource nicht die eleganteste, aber weniger ressourcenintensive). <br><br>  Die "ungeschickte" Option f√ºr zwei AudioSource (ich habe es verwendet) <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaySound</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AudioClip Clip = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Sound [<span class="hljs-number"><span class="hljs-number">0</span></span>].isPlaying) { Sound [<span class="hljs-number"><span class="hljs-number">0</span></span>].clip = Clip; Sound [<span class="hljs-number"><span class="hljs-number">0</span></span>].Play (); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Sound [<span class="hljs-number"><span class="hljs-number">1</span></span>].clip = Clip; Sound [<span class="hljs-number"><span class="hljs-number">1</span></span>].Play (); } }</code> </pre><br>  Sie k√∂nnen auf drei oder mehr AudioSource strecken, aber die Anzahl der Bedingungen verschlingt alle Leistungseinsparungen. <br><br>  Option "Universal" <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaySound</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AudioClip Clip = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (AudioSource _Sound <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Sound) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_Sound.isPlaying) { _Sound.clip = Clip; _Sound.Play (); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } }</code> </pre><br><br>  <b>Zugriff auf eine fremde Komponente</b> <br>  Auf dem Spielfeld gibt es mehrere Instanzen des Fishka-Fertighauses, wie z. B. einen Spielchip.  Es ist so aufgebaut: <br><ul><li>  √úbergeordnetes Objekt mit seinem SpriteRenderer; <ul><li>  Untergeordnete Objekte mit ihrem SpriteRenderer. </li></ul></li></ul><br>  Untergeordnete Objekte sind daf√ºr verantwortlich, den K√∂rper des Chips, seine Farbe und zus√§tzliche ver√§nderbare Elemente zu zeichnen.  Der Elternteil zeichnet einen Markierungsrand um den Chip (der aktive Chip muss im Spiel hervorgehoben werden).  Das Skript befindet sich nur f√ºr das √ºbergeordnete Objekt.  Um untergeordnete Sprites zu verwalten, muss das √ºbergeordnete Skript diese Sprites angeben.  Ich habe es so organisiert - im Skript habe ich Schnittstellen f√ºr den Zugriff auf die SpriteRenderer-Kinder erstellt: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Header (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Graphic objects"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SpriteRenderer Marker; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteRenderer Base; [Space] [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteRenderer Center_Red; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteRenderer Center_Green; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteRenderer Center_Blue;</code> </pre><br>  Jetzt enth√§lt das Skript im Inspektor zus√§tzliche Felder: <br><img src="https://habrastorage.org/webt/mq/w9/kp/mqw9kpst-fen-bkdtgp_8jycpck.png"><br><br clear="all">  Durch Ziehen und Ablegen von Kindern in die entsprechenden Felder erhalten wir Zugriff auf sie im Skript. <br><br clear="all">  Anwendungsbeispiel: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMouseDown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//        Marker.enabled = !Marker.enabled; }</span></span></code> </pre><br><br clear="all">  <b>Das Skript eines anderen aufrufen</b> <br>  Sie k√∂nnen nicht nur fremde Komponenten bearbeiten, sondern auch auf das Skript eines Objekts eines Drittanbieters zugreifen und mit dessen √∂ffentlichen Variablen, Methoden und Unterklassen arbeiten. <br><br>  Ich werde ein Beispiel f√ºr das bereits bekannte GameField-Objekt geben. <br><br>  Das GameField-Skript verf√ºgt √ºber eine √∂ffentliche Methode FishkiMarkerDisabled (), die zum ‚ÄûEntfernen‚Äú eines Markers von allen Chips auf dem Feld ben√∂tigt wird und beim Setzen eines Markers beim Klicken auf einen Chip verwendet wird, da nur einer aktiv sein kann. <br><br>  Im Fishka.cs-Skript ist SpriteRenderer Marker √∂ffentlich, dh es kann von einem anderen Skript aus darauf zugegriffen werden.  F√ºgen Sie dazu die Deklaration und Initialisierung von Schnittstellen f√ºr alle Instanzen der Fishka-Klasse im GameField.cs-Skript hinzu (beim Erstellen eines Skripts wird die gleichnamige Klasse darin erstellt), √§hnlich wie bei mehreren AudioSource: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Fishka[] Fishki; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ Fishki = GameObject.FindObjectsOfType (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Fishka)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Fishka[]; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FishkiMarkerDisabled</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (Fishka _Fishka <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Fishki) { _Fishka .Marker.enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre><br>  F√ºgen Sie im Skript Fishka.cs die Deklaration und Initialisierung der Schnittstelle der GameField-Klasseninstanz hinzu. Wenn Sie auf das Objekt klicken, rufen Sie die FishkiMarkerDisabled () -Methode dieser Klasse auf: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameField gf; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ gf = GameObject.FindObjectOfType (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(GameField)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> GameField; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMouseDown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ gf.FishkiMarkerDisabled(); Marker.enabled = !Marker.enabled; }</code> </pre><br>  Auf diese Weise k√∂nnen Sie zwischen Skripten (oder vielmehr Klassen) verschiedener Objekte interagieren. <br><br clear="all"><br clear="all"><h3>  Problem drei - KEEPERS </h3><br>  <b>Kontof√ºhrer</b> <br>  Sobald so etwas wie ein Konto im Spiel erscheint, besteht das unmittelbare Problem darin, dass es sowohl w√§hrend als auch au√üerhalb des Spiels gespeichert wird. Ich m√∂chte auch Aufzeichnungen f√ºhren, um den Spieler zu ermutigen, es zu √ºbertreffen. <br><br>  Ich werde keine Optionen in Betracht ziehen, wenn das gesamte Spiel (Men√º, Spiel, Kontoabhebung) in einer Szene erstellt wird, da dies erstens nicht der beste Weg ist, um das erste Projekt zu erstellen, und zweitens sollte meiner Meinung nach die anf√§ngliche Ladeszene sein .  Daher sind wir uns einig, dass das Projekt vier Szenen enth√§lt: <br><ol><li>  Loader - Eine Szene, in der das Hintergrundmusikobjekt initialisiert wird (mehr wird sp√§ter angezeigt) und Einstellungen aus dem Speicher geladen werden. <br></li><li>  Men√º - eine Szene mit einem Men√º; <br></li><li>  Spiel - Spielszene; <br></li><li>  Partitur - die Szene der Partitur, Aufzeichnung, Rangliste. <br></li></ol><br><img width="40%" align="right" src="https://habrastorage.org/webt/dy/yl/4t/dyyl4tkmtx6a0ijbnjiy1jgkr9q.png"><br>  <i>Hinweis: Die Ladereihenfolge der Szene wird unter Datei&gt; Build-Einstellungen festgelegt.</i> <br clear="all"><br clear="all">  W√§hrend des Spiels gesammelte Punkte werden in der Score-Variablen der GameField-Klasse gespeichert.  Um Zugriff auf die Daten zu erhalten, wenn Sie zur Scores-Szene gehen, erstellen Sie eine √∂ffentliche statische Klasse ScoreHolder, in der wir eine Variable zum Speichern des Werts und eine Eigenschaft zum Abrufen und Festlegen des Werts dieser Variablen deklarieren (die Methode wurde von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Apocatastas</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ausspioniert</a> ): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ScoreHolder</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _Score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Score { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _Score; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>{ _Score = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } }</code> </pre><br>  Eine √∂ffentliche statische Klasse muss keinem Objekt hinzugef√ºgt werden, sie ist in jeder Szene in jedem Skript sofort verf√ºgbar. <br><br>  Beispiel f√ºr die Verwendung in der GameField-Klasse in der Szenen√ºbergangsmethode: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.SceneManagement; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameField</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     ,         Scores void GotoScores(){ ScoreHolder.Score = Score; //   ScoreHolder.Score   SceneManager.LoadScene (‚Äúscores‚Äù); } }</span></span></code> </pre><br>  Auf die gleiche Weise k√∂nnen Sie dem ScoreHolder w√§hrend des Spiels ein Rekordkonto hinzuf√ºgen, das jedoch beim Beenden nicht gespeichert wird. <br><br clear="all">  <b>Einstellungsbewahrer</b> <br>  Betrachten Sie das Beispiel zum Speichern des Werts der Booleschen Variablen SoundEffectsMute, je nachdem, in welchem ‚Äã‚ÄãZustand das Spiel Soundeffekte aufweist oder nicht. <br><br>  Die Variable selbst wird in der √∂ffentlichen statischen Klasse SettingsHolder gespeichert: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SettingsHolder</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _SoundEffectsMute = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> SoundEffectsMute{ <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _SoundEffectsMute; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>{ _SoundEffectsMute = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } }</code> </pre><br>  Die Klasse √§hnelt ScoreHolder, man k√∂nnte sie sogar zu einer kombinieren, aber meiner Meinung nach sind das schlechte Manieren. <br><br>  Wie Sie dem Skript entnehmen k√∂nnen, wird _SoundEffectsMute standardm√§√üig als false deklariert. Bei jedem Spielstart gibt SettingsHolder.SoundEffectsMute false zur√ºck, unabh√§ngig davon, ob der Benutzer es zuvor ge√§ndert hat oder nicht (es wird √ºber die Schaltfl√§che auf der Men√ºb√ºhne ge√§ndert). <br><br clear="all">  <b>Variablen speichern</b> <br>  F√ºr eine Android-Anwendung ist es am besten, die PlayerPrefs.SetInt-Methode zum Speichern zu verwenden (weitere Informationen finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offiziellen Dokumentation</a> ).  Es gibt zwei Optionen, um den Wert von SettingsHolder.SoundEffectsMute in PlayerPrefs beizubehalten. Nennen wir sie "einfach" und "elegant". <br><br clear="all">  Der "einfache" Weg (f√ºr mich so) ist die OnMouseDown () -Methode der Klasse der oben genannten Schaltfl√§che.  Der gespeicherte Wert wird in dieselbe Klasse geladen, jedoch in die Start () -Methode: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ButtonSoundMute</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    ,  PlayerPrefs    bool switch (PlayerPrefs.GetInt ("SoundEffectsMute")) { case 0: SettingsHolder.SoundEffectsMute = false; break; case 1: SettingsHolder.SoundEffectsMute = true; break; default: //    default SettingsHolder.SoundEffectsMute = true; break; } } void OnMouseDown(){ SettingsHolder.SoundEffectsMute = !SettingsHolder.SoundEffectsMute; //    ,  PlayerPrefs    bool if (SettingsHolder.SoundEffectsMute) PlayerPrefs.SetInt ("SoundEffectsMute", 1); else PlayerPrefs.SetInt ("SoundEffectsMute", 0); } }</span></span></code> </pre><br><br clear="all">  Die "elegante" Methode ist meiner Meinung nach nicht die richtigste, weil  erschweren die Wartung des Codes, aber es ist etwas drin, und ich kann nicht anders, als es zu teilen.  Ein Merkmal dieser Methode ist, dass der Setter der SettingsHolder.SoundEffectsMute-Eigenschaft zu einem Zeitpunkt aufgerufen wird, der keine hohe Leistung erfordert, und mit PlayerPrefs (Lesen - Schreiben in eine Datei) geladen werden kann (oh, Horror).  √Ñndern Sie die √∂ffentliche statische Klasse SettingsHolder: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SettingsHolder</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _SoundEffectsMute = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> SoundEffectsMute{ <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _SoundEffectsMute; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>{ _SoundEffectsMute = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_SoundEffectsMute) PlayerPrefs.SetInt (<span class="hljs-string"><span class="hljs-string">"SoundEffectsMute"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> PlayerPrefs.SetInt (<span class="hljs-string"><span class="hljs-string">"SoundEffectsMute"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); } } }</code> </pre><br>  Die OnMouseDown-Methode der ButtonSoundMute-Klasse vereinfacht Folgendes: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMouseDown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ SettingsHolder.SoundEffectsMute = !SettingsHolder.SoundEffectsMute; }</code> </pre><br><br clear="all">  Es lohnt sich nicht, den Getter mit Lesen aus einer Datei zu laden, da er an einem leistungskritischen Prozess beteiligt ist - in der PlaySound () -Methode der GameField-Klasse: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaySound</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AudioClip Clip = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!SettingsHolder.SoundEffectsMute) { <span class="hljs-comment"><span class="hljs-comment">//      ‚Äú‚Äù  (. ) if (!Sound [0].isPlaying) { Sound [0].clip = Clip; Sound [0].Play (); } else { Sound [1].clip = Clip; Sound [1].Play (); } } }</span></span></code> </pre><br><br clear="all">  Auf die oben beschriebene Weise k√∂nnen Sie die Speicherung beliebiger Variablen im Spiel organisieren. <br><br clear="all"><br clear="all"><h3>  F√ºnftes Problem - EINES F√úR ALLE </h3><br>  <b>Diese Musik wird ewig sein</b> <br>  Fr√ºher oder sp√§ter steht jeder vor einem solchen Problem, und ich war keine Ausnahme.  Wie geplant wird Hintergrundmusik auch in der Men√ºszene abgespielt. Wenn sie nicht ausgeschaltet ist, werden Men√º-, Spiel- und Partituren ohne Unterbrechung in den Szenen abgespielt.  Wenn das Objekt, das Hintergrundmusik "spielt", in der Men√ºszene installiert ist, wird es beim Aufrufen der Spielszene zerst√∂rt und der Ton verschwindet. Wenn Sie dasselbe Objekt in die Spielszene einf√ºgen, wird die Musik nach dem √úbergang zuerst abgespielt.  Es stellte sich heraus, dass die L√∂sung die DontDestroyOnLoad-Methode (Objektziel) verwendet, die in der Start () -Methode der Klasse platziert ist, deren Skriptinstanz das Musikobjekt hat.  Erstellen Sie dazu das Skript DontDestroyThis.cs: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">DontDestroyThis</span></span>: <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ DontDestroyOnLoad(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameObject); } }</code> </pre><br><img width="40%" align="left" src="https://habrastorage.org/webt/ee/cj/hn/eecjhn5uyzoclq7ywnqztl1untu.png">  Damit alles funktioniert, muss das ‚Äûmusikalische‚Äú Objekt root sein (auf derselben Hierarchieebene wie die Hauptkamera). <br clear="all"><br clear="all">  <b>Warum Hintergrundmusik im Lader</b> <br>  Der Screenshot zeigt, dass sich das ‚Äûmusikalische‚Äú Objekt nicht in der Men√ºszene, sondern in der Loader-Szene befindet.  Dies ist eine Ma√ünahme, die dadurch verursacht wird, dass die Men√ºszene mehr als einmal geladen werden kann (nach der Partiturszene, dem √úbergang zur Men√ºszene) und jedes Mal, wenn sie geladen wird, ein weiteres ‚Äûmusikalisches‚Äú Objekt erstellt wird und das alte nicht gel√∂scht wird.  Dies kann wie im Beispiel der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offiziellen Dokumentation erfolgen</a> , aber ich habe mich entschlossen, die Tatsache auszunutzen, dass die Loader-Szene garantiert nur einmal geladen wird. <br><br>  Die Hauptprobleme, auf die ich bei der Entwicklung meines ersten Spiels auf Unity vor dem Hochladen auf den Play Market gesto√üen bin (ich habe noch kein Entwicklerkonto registriert), wurden erfolgreich beendet. <br><br>  <b>PS</b> <br>  <i>Wenn die Informationen n√ºtzlich waren, k√∂nnen Sie den Autor unterst√ºtzen und er wird schlie√ülich ein Android-Entwicklerkonto registrieren.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de458914/">https://habr.com/ru/post/de458914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de458904/index.html">Visualisierung der Anzahl der Siege f√ºr NBA-Teams mithilfe animierter Balkendiagramme in R.</a></li>
<li><a href="../de458906/index.html">[Jekaterinburg, Ank√ºndigung] Flutteron - ein Workshop zur Entwicklung von Flutter</a></li>
<li><a href="../de458908/index.html">Scannen von Dokumenten √ºber das Netzwerk</a></li>
<li><a href="../de458910/index.html">Benchmarking von PostgreSQL mit gro√üen Linux-Seiten</a></li>
<li><a href="../de458912/index.html">Mit Imapsync nach Zimbra migrieren</a></li>
<li><a href="../de458916/index.html">Unter der Haube von React. Wir schreiben unsere Implementierung von Grund auf neu</a></li>
<li><a href="../de458918/index.html">Was Sie aus dem Design von Hyper-Casual-Spielen lernen k√∂nnen</a></li>
<li><a href="../de458920/index.html">Konferenz f√ºr DevOps-Fans</a></li>
<li><a href="../de458922/index.html">So wechseln Sie von ESXi zu KVM / LXD und verlieren nicht den Verstand</a></li>
<li><a href="../de458924/index.html">Unf√§lle helfen Ihnen beim Lernen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>