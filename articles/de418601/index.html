<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ üóûÔ∏è üõéÔ∏è Die ganze Wahrheit √ºber RTOS. Artikel 7. Nucleus SE: Einf√ºhrung üóÇÔ∏è üßôüèΩ ü•ã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im weiteren Verlauf der Reihe ‚ÄûDie ganze Wahrheit √ºber RTOS‚Äú werden wir detailliert untersuchen, wie das RTOS implementiert und bereitgestellt wird. D...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die ganze Wahrheit √ºber RTOS. Artikel 7. Nucleus SE: Einf√ºhrung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418601/"><img src="https://habrastorage.org/webt/s_/59/bp/s_59bpqram112a5-md1svupxnmo.jpeg"><br><br>  Im weiteren Verlauf der Reihe ‚ÄûDie ganze Wahrheit √ºber RTOS‚Äú werden wir detailliert untersuchen, wie das RTOS implementiert und bereitgestellt wird.  Dazu betrachten wir ein spezifisches RTOS: Nucleus SE.  Selbst wenn Sie diesen bestimmten Kern oder andere damit verbundene Kernel nicht verwenden, bietet das Verst√§ndnis der Funktionsweise eine gute Grundlage f√ºr die Arbeit mit RTOS. <br><a name="habracut"></a><br>  Um zu verstehen, warum Nucleus SE so konzipiert wurde, ist es wichtig, die Kernaufgaben und -ziele hervorzuheben, die ich zu Beginn dieses Projekts verfolgt habe. <br><br>  Fr√ºhere Artikel in der Reihe: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Andere RTOS-Dienste</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgabeninteraktion und Synchronisation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgaben, Kontextwechsel und Interrupts</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgaben und Planung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RTOS: Struktur und Echtzeitmodus</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RTOS: Einf√ºhrung.</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><br></a> <br><br>  <b>Einfachheit</b> <br><br>  Kernel-Code sollte einfach, unkompliziert, gut kommentiert und dokumentiert sein.  Nucleus SE ist in erster Linie f√ºr Bildungszwecke gedacht. <br><br>  <b>Gr√∂√üe</b> <br><br>  Dies sollte ein kleiner, gut skalierbarer Kernel sein (da der Speicher, insbesondere der Arbeitsspeicher (RAM), m√∂glicherweise knapp ist). <br><br>  <b>Funktionalit√§t</b> <br><br>  Der Kernel muss √ºber ein hohes Ma√ü an Funktionalit√§t verf√ºgen, das Standard-RTOS-Dienste unterst√ºtzt. <br><br>  <b>8/16 Bit Unterst√ºtzung</b> <br><br>  Es sollte 8- und 16-Bit-Architekturen unterst√ºtzen: Verwenden Sie nach M√∂glichkeit Daten in der Gr√∂√üe eines Bytes.  Datenstrukturen sollten keine exotischen Adressierungsmethoden erfordern.  Persistente Daten sollten nicht unn√∂tig in den Arbeitsspeicher kopiert werden. <br><br>  <b>Die Zukunft</b> <br><br>  Es muss einen Entwicklungspfad von Nucleus SE zu Nucleus RTOS geben.  Benutzer sollten in der Lage sein, Code problemlos zwischen Kernen zu √ºbertragen.  Noch wichtiger ist, dass ihr Wissen auch weitergegeben werden muss.  Die Nucleus SE-API implementiert effektiv eine Teilmenge der Nucleus RTOS-API. <br><br>  <b>Kosten</b> <br><br>  Das Gesch√§ftsmodell sollte f√ºr alle potenziellen Benutzer attraktiv sein: Entwickler von 8/16-Bit-Ger√§ten, diejenigen, die zuerst das RTOS verwenden, und diejenigen, die nur die Technologie selbst studieren.  Somit ist Nucleus SE frei verf√ºgbar und f√ºr kommerzielle und Bildungszwecke absolut kostenlos.  Der Code kann verwendet und ge√§ndert werden. <br><br>  <b>Zielgruppe Nucleus SE</b> <br><br>  Das Ergebnis dieses Ansatzes ist ein Kernel, der f√ºr drei Arten von Entwicklern n√ºtzlich sein kann: <br><br><ul><li>  8/16-Bit-Ger√§teprogrammierer, die einen einfachen Kernel oder Taskplaner ben√∂tigen.  Dies ist besonders attraktiv, wenn Entwickler daran interessiert sind, bestimmte F√§higkeiten f√ºr die Verwendung von RTOS zu erwerben, oder wenn sie ein System entwickeln, das andere 32-Bit-Ger√§te verwendet, bei denen Nucleus RTOS eine gute Wahl sein kann. </li><li>  Entwickler eingebetteter Anwendungen, die 32-Bit-Ger√§te verwenden, bei denen die Komplexit√§t der Software die Kosten eines herk√∂mmlichen kommerziellen RTOS nicht wert ist.  Die Verwendung von Nucleus SE kann n√ºtzlich sein und erm√∂glicht die Entwicklung (bis zu Nucleus RTOS), wenn die Komplexit√§t der Anwendung zunimmt. </li><li>  Sch√ºler im Lernprozess k√∂nnen Nucleus SE als Basis f√ºr das Erlernen von RTOS verwenden.  Erworbene F√§higkeiten werden sp√§ter n√ºtzlich sein, wenn sie anfangen zu arbeiten. </li></ul><br>  <b>Designentscheidungen und Kompromisse</b> <br><br>  Um die oben genannten Ziele zu erreichen, mussten mehrere sorgf√§ltig durchdachte Entwurfsentscheidungen getroffen werden.  Details werden sp√§ter beschrieben, wenn wir bestimmte Funktionen betrachten, aber hier ist eine kurze Zusammenfassung der wichtigsten Punkte. <br><br>  <b>Statische Konfiguration</b> <br><br>  Nucleus SE ist ein statisches RTOS, dh alle Konfigurationsentscheidungen werden zur Erstellungszeit und nicht dynamisch zur Laufzeit getroffen.  Dies hat viele Vorteile, einschlie√ülich der Vereinfachung der Datenstruktur und der Reduzierung der Codegr√∂√üe, sodass die API-Funktionen zum Erstellen und L√∂schen nicht aufgerufen werden m√ºssen.  F√ºr die meisten Anwendungen ist keine dynamische Objekterstellung erforderlich. <br><br>  <b>Anzahl der Objekte</b> <br><br>  Die Anzahl der Objekte jedes Typs ist in einer Nucleus SE-basierten Anwendung begrenzt.  Es k√∂nnen ein bis sechzehn Aufgaben und null bis sechzehn verschiedene Arten von Kernelobjekten sein.  Dies vereinfacht die Adressierung von Objekten (siehe unten).  Diese Einschr√§nkung ist f√ºr kleine Anwendungen, f√ºr die der Kernel vorgesehen ist, nicht schwierig. <br><br>  <b>Objekte adressieren</b> <br><br>  Objekte werden mit einem ‚ÄûIndex‚Äú adressiert, der zwischen null und f√ºnfzehn liegen kann.  Im Vergleich zur √ºblichen Verwendung von Zeigern kann dies auf kleineren Prozessoren effizienter sein und weniger Speicher zulassen: Der Index ben√∂tigt nur 4 Bit Speicher;  Die Adresse ist 16-32 Bit. <br><br>  <b>Planer</b> <br><br>  Der Scheduler geh√∂rte zu dem Bereich der Kernelarchitektur, der vereinfacht wurde.  Anstatt einen flexiblen Mechanismus mit unterschiedlichen Planungsrichtlinien bereitzustellen, stehen im Kernel vier separate Schedulertypen zur Verf√ºgung.  Der spezifische Scheduler f√ºr die Anwendung wird w√§hrend der Konfiguration ausgew√§hlt. <br><br>  <b>Eingeschr√§nkte Funktionalit√§t</b> <br><br>  Einige in Nucleus RTOS verf√ºgbare Funktionen sind in Nucleus SE nicht implementiert.  In einigen F√§llen wird dies der Einfachheit halber durchgef√ºhrt.  In anderen F√§llen erleichtert ein geringf√ºgiger Funktionsverlust in einem Bereich die Implementierung der anderen Funktionalit√§t.  Diese Inkompatibilit√§ten werden in den entsprechenden Artikeln der Reihe hervorgehoben. <br><br>  <b>Speichernutzung</b> <br><br>  Da Nucleus SE Anwendungen mit begrenztem Speicher unterst√ºtzen muss, wurde besonderes Augenmerk auf die Speichernutzung gelegt.  Es sollte das "klassische" ROM und RAM verwenden: ROM wurde f√ºr Code und persistente Daten verwendet;  RAM - zum Speichern von Variablen, eines Stapels usw. Obwohl ein bestimmtes Ziel ein anderes Schema haben kann, ist der Nucleus SE-Code sehr flexibel.  Definitionen (#defines) von ROM und RAM werden verwendet, um allen Strukturen von Variablen und Daten ein Pr√§fix zu geben und ihre Position anzugeben.  Dies kann mit Werkzeugen erreicht werden. <br><br>  Die Hauptanforderung bestand darin, unn√∂tiges Kopieren von Daten vom ROM in den RAM zu vermeiden, da der RAM m√∂glicherweise nicht ausreicht.  Der Mechanismus, mit dem dies erreicht wird, wird im Abschnitt Datenstrukturen des n√§chsten Artikels beschrieben. <br><br>  <b>API-Implementierung</b> <br><br>  Die API f√ºr Nucleus SE wird auf herk√∂mmliche Weise implementiert: Die C-Sprachfunktion implementiert jeden API-Aufruf.  Diese Aufrufe sind logisch gruppiert.  Obwohl die API-Aufrufe in Nucleus SE nicht ganz mit denen in Nucleus RTOS identisch sind, wird die Gesamtfunktionalit√§t simuliert und die Zuordnung zwischen den APIs ist einfach.  Details zur Nucleus RTOS-API werden enthalten sein. <br><br>  <b>Kritische Abschnitte</b> <br><br>  Der Code f√ºr viele API-Funktionsaufrufe enth√§lt Anweisungen, die Kerneldaten bearbeiten.  Im Allgemeinen k√∂nnen sich Daten w√§hrend der Ausf√ºhrung dieser Anweisungen in einem ung√ºltigen Zustand befinden. Daher muss darauf geachtet werden, dass keine Unterbrechungen auftreten.  Oder es ist m√∂glicherweise verboten, Code von einer anderen Task oder einem Interrupt-Handler auszuf√ºhren, wenn dieser auf diese (derzeit ung√ºltigen) Daten zugreifen kann.  Solche Befehlssequenzen werden als kritische Abschnitte bezeichnet. <br><br>  Es ist ein Makropaar mit den Namen NUSE_CS_Enter () und NUSE_CS_Exit () definiert.  Der gesamte Nucleus SE-API-Funktionscode verwendet sie, um den kritischen Abschnitt zu √ºberspannen. <br><br>  NUSE_CS_Enter (); <br>  &lt;nicht unterbrechbarer Code&gt; <br>  NUSE_CS_Exit (); <br><br>  In der Regel werden diese Makros zu Anweisungen zum Deaktivieren von Interruptbefehlen bzw. zu Anweisungen zum Aktivieren von Interrupts erweitert.  Dies muss √ºberpr√ºft werden, wenn Nucleus SE auf einer anderen Prozessorarchitektur implementiert ist.  Weitere Informationen zum Portieren von Nucleus SE werden im n√§chsten Artikel beschrieben. <br><br>  <b>Skalierbarkeit</b> <br><br>  Wie alle modernen RTOS ist Nucleus SE skalierbar.  Um sicherzustellen, dass nur verwendete RTOS-Komponenten enthalten sind, werden alle API-Funktionen in Form einer Bibliothek dargestellt.  W√§hrend der Verkn√ºpfung werden also Funktionen, auf die verwiesen wird, extrahiert und in das endg√ºltige Image der Anwendung aufgenommen.  Nucleus RTOS verwendet diesen Ansatz sowohl f√ºr den Kernel als auch f√ºr alle anderen Betriebssystemkomponenten.  Nucleus SE verwendet eine andere Technik. <br><br>  Anstatt sich auf die Bibliothek in der ausgew√§hlten Toolbox zu verlassen, enthalten alle Quelldateien in der Nucleus SE-Distribution Anweisungen zur bedingten Kompilierung.  Um Nucleus SE f√ºr das Programm zu konfigurieren, muss der Entwickler mehrere # define-Zeichen installieren (mehr dazu im n√§chsten Artikel).  Dies bestimmt, welche API-Funktionen kompiliert und daher im Programm enthalten sind. <br><br>  Nucleus SE erweitert diesen Ansatz, indem es ein Objekt anbietet, das ich "extreme Skalierbarkeit" nenne.  Verschiedene Aspekte der Kernelfunktionalit√§t k√∂nnen ein- und ausgeschaltet oder auf andere Weise mit √§hnlichen # define-Zeichen konfiguriert werden.  Somit hat der Entwickler eine Punktkontrolle √ºber die Verwendung des Speichers. <br><br>  <b>Welche API?</b> <br><br>  Nucleus SE verf√ºgt √ºber eine eigene API, die in zuk√ºnftigen Artikeln ausf√ºhrlich beschrieben wird.  F√ºr viele Benutzer ist es ausreichend, diese Aufrufe der API-Funktionen einfach in den Code aufzunehmen. <br><br>  Einige Benutzer bevorzugen m√∂glicherweise eine andere API: entweder eine Standard-API oder eine, mit der sie vertraut sind.  Die Nucleus SE-API ist sehr flexibel und erm√∂glicht es Ihnen, einen Wrapper zu erstellen, der eine Schnittstelle in eine andere API umwandelt. <br><br>  Eines der Hauptziele der Nucleus SE-Entwicklung ist ein hohes Ma√ü an Kompatibilit√§t auf Benutzerebene mit Nucleus RTOS.  Obwohl die APIs unterschiedlich sind, sind sie so konzipiert, dass sie leicht zu vergleichen sind.  Ein Wrapper wird verf√ºgbar sein, um die Verwendung der Nucleus RTOS-API auf Nucleus SE zu erleichtern. <br><br>  Im n√§chsten Artikel werden wir Nucleus SE weiter untersuchen und uns auf die interne Struktur und Bereitstellung von RTOS konzentrieren. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418601/">https://habr.com/ru/post/de418601/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418589/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 324 (23. - 29. Juli 2018)</a></li>
<li><a href="../de418591/index.html">Bug Bounty Kyivstar: Belohnung f√ºr Administratorzugriff auf Jira-, AWS-, Apple-, Google Developer- und Bitbucket-Dienste - 50 US-Dollar</a></li>
<li><a href="../de418593/index.html">Nicht alle drahtlosen Kopfh√∂rer sind gleicherma√üen n√ºtzlich oder ein paar Worte zum Codec-Problem</a></li>
<li><a href="../de418597/index.html">Funktionen zum Dokumentieren von PostgreSQL-Datenbanken. Teil drei</a></li>
<li><a href="../de418599/index.html">5 Datenquellen, die APM-Daten in Anwendungsleistungsanalysen umwandeln</a></li>
<li><a href="../de418603/index.html">Matrix PowerWatch Smartwatch, die niemals aufgeladen werden muss</a></li>
<li><a href="../de418605/index.html">Analysten: Die Microsoft-Kapitalisierung k√∂nnte 1 Billion US-Dollar erreichen</a></li>
<li><a href="../de418607/index.html">Auswahl eines Anbieters f√ºr Unternehmens-WLAN</a></li>
<li><a href="../de418609/index.html">120 kW Reserveenergie oder Wie man das Anwesen mit der Energie der Sonne versorgt</a></li>
<li><a href="../de418611/index.html">Pizzeria-Berechnung: Papa Jones, der sich nicht um Sicherheit k√ºmmert</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>