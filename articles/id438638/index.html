<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍓 💅 🦄 Kami menganalisis protokol pesan pager POCSAG, bagian 2 🛰️ 🈲 🔨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai Habr! 

 Pada bagian pertama , protokol pengiriman POCSAG dipertimbangkan. Pesan digital dipertimbangkan, sekarang kita akan meneruskan ke lebih b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami menganalisis protokol pesan pager POCSAG, bagian 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438638/">  Hai Habr! <br><br>  Pada bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pertama</a> , protokol pengiriman POCSAG dipertimbangkan.  Pesan digital dipertimbangkan, sekarang kita akan meneruskan ke lebih banyak "pesan lengkap" dalam format ASCII.  Selain itu, lebih menarik untuk memecahkan kode mereka, karena  hasilnya adalah teks yang bisa dibaca. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hu/ew/hr/huewhrcwg9oow3xpzglh8skuhqi.jpeg"></div><br>  Bagi yang tertarik dengan cara kerjanya, lanjutkan di bawah cut. <br><a name="habracut"></a><br><h2>  Penerimaan sinyal </h2><br>  Pertama, sinyal harus diterima, untuk itu kami menggunakan penerima rtl-sdr dan program HDSDR yang sama.  Kita sudah tahu dari bagian pertama bahwa pesan paging bisa digital (isinya hanya angka 0-9, huruf U adalah "jelek", spasi dan sepasang tanda kurung) dan alfanumerik, isinya penuh dengan karakter ASCII.  Secara alami, kami tidak tahu sebelumnya jenis pesan (masih tidak mungkin untuk memecahkan kode "oleh telinga"), jadi ketika merekam kami hanya memilih pesan yang lebih otentik. <br><br><img src="https://habrastorage.org/webt/lu/ue/sk/luuesk79iv_yalka_pchncpwzoi.jpeg"><br><br>  Program untuk mengonversi file wav ke bit stream telah dipertimbangkan, jadi segera tunjukkan hasilnya - pesan halaman secara keseluruhan terlihat seperti ini: <br><br><img src="https://habrastorage.org/webt/qb/wt/ud/qbwtud3zptfcwxw3xs0pam7pkr4.jpeg"><br><br>  Beberapa fitur segera terlihat dengan mata telanjang - misalnya, dapat dilihat bahwa urutan awal 01010101010101 diulang dua kali.  Yaitu  Pesan ini tidak hanya lebih lama, tetapi pada dasarnya terdiri dari dua "direkatkan" bersama-sama, namun standar tidak melarangnya. <br><br><h2>  Decoding </h2><br>  Untuk memulai, ingat konten singkat dari bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sebelumnya</a> .  Pesan halaman dimulai dengan header panjang 0101010101, diikuti oleh urutan "paket" yang ditunjukkan pada gambar sebagai Batch1..N: <br><br><img src="https://habrastorage.org/webt/3k/yt/dc/3kytdccgmehfmqstxxli1nt3fpa.png" alt="gambar"><br><br>  Setiap paket dimulai dengan urutan mulai Frame Sync Code (01111100 ...) diikuti oleh blok 32-bit.  Setiap blok dapat menyimpan alamat atau badan pesan. <br><br>  Terakhir kali kami melihat pesan digital saja, sekarang kami tertarik pada pesan ASCII.  Pertama-tama, Anda perlu belajar cara membedakannya.  Untuk melakukan ini, kita perlu bidang “Function Bits” - jika 2 bit ini adalah 00, maka pesannya digital, jika 11, maka teks. <br><br>  Seperti dapat dilihat dari gambar, 20 bit dialokasikan ke bidang pesan, yang hanya cocok dengan kode BCD 5-bit, jika pesannya digital.  Tetapi jika pesan tersebut adalah pesan teks, maka tidak ada banyak teks yang dapat ditampung dalam 20 bit, dan 20 tidak dapat dibagi oleh 7 atau 8. Dapat diasumsikan bahwa versi protokol yang pertama (dan sudah dibuat pada tahun 1982) hanya mendukung pesan digital ( <s>ya dan tidak mungkin bahwa pager pertama pada tahun-tahun itu pada nixie-tube dapat menampilkan lebih banyak</s> ), dan hanya pada saat itu, dalam versi berikutnya, dukungan untuk ASCII ditambahkan.  Tapi sejak itu  itu tidak mungkin lagi melanggar standar format, itu lebih mudah - bitstream hanya digabungkan sebagaimana adanya (20 bit diekstraksi dari setiap pesan dan ditambahkan ke ujung buffer), dan hanya pada saat itu, semua ini diterjemahkan ke dalam karakter. <br><br>  Pertimbangkan satu blok pesan yang diterima (spasi ditambahkan untuk kejelasan): <br><br><pre><code class="plaintext hljs">0 0001010011100010111111110010010 1 00010100000110110011 11100111001 1 01011010011001110100 01111011100 1 11010001110110100100 11011000100 1 11000001101000110100 10011110111 1 11100000010100011011 11101110000 1 00110010111011001101 10011011010 1 00011001011100010110 10011000010 1 10101100000010010101 10110000101 1 00010110111011001101 00000011011 1 10100101000000101000 11001010100 1 00111101010101101100 11011111010</code> </pre> <br>  Di baris pertama, "0" di bit pertama menunjukkan bahwa ini adalah bidang alamat, dan "11" dalam bit 20-21 menunjukkan bahwa pesan ini simbolis.  Selanjutnya, ambil hanya 20 bit dari setiap baris dan tambahkan bersama. <br><br>  Kami mendapatkan urutan bit berikut: <br><br><pre> <code class="plaintext hljs">00010100000110110011010110100110011101001101000111011010010011000001101000 11010011100000010100011011001100101110110011010001100101110001011010101100 000010010101000101101110110011011010010100000010100000111101010101101</code> </pre> <br>  Protokol POCSAG menggunakan ASCII 7-bit, jadi bagilah garis menjadi blok-blok 7 bit: <br><br><pre> <code class="plaintext hljs">0001010 0000110 1100110 1011010 0110011 1010011 ...</code> </pre> <br>  Kami mencoba mendekode kode karakter (tabel ASCII mudah di-Google-kan di Internet), dan ... kami mendapatkan sampah di output.  Sekali lagi, buka dokumentasi dan temukan frasa halus "karakter ASCII ditempatkan dari kiri ke kanan (MSB ke LSB).  LSB mentransmisikan terlebih dahulu. "  Yaitu  pertama, bit orde rendah ditransmisikan, dan kemudian bit orde tinggi - untuk decoding kode ASCII yang benar, string 7-bit harus dibalik. <br><br>  Untuk menghindari melakukan ini secara manual, kami menulis kode Python: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse_msg</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(block)</span></span></span><span class="hljs-function">:</span></span> msgs = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> cw <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">16</span></span>): cws = block[<span class="hljs-number"><span class="hljs-number">32</span></span> * cw:<span class="hljs-number"><span class="hljs-number">32</span></span> * (cw + <span class="hljs-number"><span class="hljs-number">1</span></span>)] <span class="hljs-comment"><span class="hljs-comment"># Skip the idle word if cws.startswith("0111101010"): continue if cws[0] == "0": addr, type = cws[1:19], cws[19:21] print(" Addr:" + addr, type) else: msg = cws[1:21] print(" Msg: " + msg) msgs += msg # Split long string to 7 chars blocks bits = [msgs[i:i+7] for i in range(0, len(msgs), 7)] # Get the message msg = "" for b in bits: b1 = b[::-1] # Revert string value = int(b1, 2) msg += chr(value) print("Msg:", msg) print()</span></span></code> </pre><br>  Hasilnya, kami mendapatkan urutan berikut (bit, kode karakter, dan karakter itu sendiri): <br><br><pre> <code class="plaintext hljs">0101000 40 ( 0110000 48 0 0110011 51 3 0101101 45 - 1100110 102 f 1100101 101 e 1100010 98 b 0101101 45 - 0110010 50 2 0110000 48 0 0110001 49 1 0111001 57 9 0100000 32 0110001 49 1 0110011 51 3 0111010 58 : 0110011 51 3 0110001 49 1 0111010 58 : 0110100 52 4 0110101 53 5 0100000 32 0101010 42 * 0110100 52 4 0110111 55 7 0110110 54 6 0101001 41 ) 0100000 32 1000001 65 A 1010111 87 W 1011010 90 Z</code> </pre><br>  Gabungkan karakter bersama-sama dan dapatkan garis: "(03-feb-2019 13:31:45 * 476) AWZ".  Seperti yang dijanjikan di awal artikel, teksnya cukup mudah dibaca. <br><br>  Omong-omong, poin menarik lainnya adalah, seperti yang Anda lihat, protokol menggunakan ASCII 7-bit.  Karakter Cyrillic tidak cocok dengan kisaran ini, jadi pertanyaan tentang bagaimana pager mem-flash bahasa Rusia tetap terbuka.  Jika ada yang tahu, tulis di komentar. <br><br><h2>  Kesimpulan </h2><br>  Tentu saja, protokolnya tidak sepenuhnya dipahami, tetapi bagian yang paling menarik telah dilakukan, dan kemudian rutinitas tetap, yang tidak begitu menarik lagi.  Minimal, tidak ada decoding dari alamat penerima (capcodes), dan dukungan untuk kode koreksi kesalahan (BCH Check Bits) tidak diterapkan - ini akan memungkinkan mengoreksi hingga 2 bit "rusak" selama transmisi.  Namun, tujuannya bukan untuk membuat decoder lengkap - sudah ada decoder seperti itu, dan satu lagi hampir tidak diperlukan. <br><br>  Mereka yang ingin mencoba mendekode pesan menggunakan rtl-sdr dapat melakukannya sendiri menggunakan program <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PDW</a> gratis.  Itu tidak memerlukan instalasi, setelah memulai perlu untuk mengarahkan kembali output HDSDR ke input PDW menggunakan program Kabel Audio Virtual dan memilih perangkat yang sesuai dalam pengaturan audio PDW. <br><br>  Hasil program terlihat seperti ini: <br><br><img src="https://habrastorage.org/webt/-7/g-/ka/-7g-kalvhmaqlv79qju-wmgpglg.jpeg"><br><br>  Pada topik ini, pesan halaman dapat dianggap tertutup.  Mereka yang ingin mempelajari topik lebih terinci dapat mempelajari kode sumber dari program <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">multimon-ng</a> , yang dapat men-decode banyak protokol, termasuk POCSAG dan FLEX. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id438638/">https://habr.com/ru/post/id438638/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id438628/index.html">SharedState Component Change Status Notification</a></li>
<li><a href="../id438630/index.html">Google+ Sic transit gloria mundi ...</a></li>
<li><a href="../id438632/index.html">Hardcore 2D RPG Gamedev Diaries, vol.0 - INTRO, atau "How I Got Here"</a></li>
<li><a href="../id438634/index.html">Di kantor, terlalu panas atau terlalu dingin: apakah ada cara yang lebih baik untuk menyesuaikan suhu?</a></li>
<li><a href="../id438636/index.html">Menanam fungsi yang cacat di Go</a></li>
<li><a href="../id438640/index.html">Mata uang elektronik terbuka berkecepatan tinggi</a></li>
<li><a href="../id438642/index.html">Dasar-dasar pemrograman reaktif menggunakan RxJS</a></li>
<li><a href="../id438644/index.html">Keamanan algoritma pembelajaran mesin. Melindungi dan Menguji Model Menggunakan Python</a></li>
<li><a href="../id438646/index.html">Tentang membuat gambar stereo anggaran dengan jari (stereogram, anaglyph, stereoscope)</a></li>
<li><a href="../id438648/index.html">Perbandingan sistem BI (Tableau, Power BI, Oracle, Qlik)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>