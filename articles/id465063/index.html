<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕢 🔹 🤘 10 kesalahan paling umum saat bekerja dengan platform Spring. Bagian 2 🔁 🌉 🆚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salute, Khabrovsk. Jadi terjemahan bagian kedua dari artikel yang disiapkan khusus untuk siswa kursus "Pengembang Kerangka Kerja Musim Semi" tiba pada...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>10 kesalahan paling umum saat bekerja dengan platform Spring. Bagian 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/465063/">  <i>Salute, Khabrovsk.</i>  <i>Jadi terjemahan bagian kedua dari artikel yang disiapkan khusus untuk siswa kursus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Pengembang Kerangka Kerja Musim Semi"</a> tiba pada waktunya.</i>  <i>Bagian pertama bisa dibaca di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .</i> <br><br><img src="https://habrastorage.org/webt/-i/va/66/-iva66o8uvrummnptqda3getv_i.png"><br><br><p>  <font color="gray">Spring mungkin merupakan salah satu platform pengembangan Java yang paling populer.</font>  <font color="gray">Ini adalah alat yang kuat, tetapi agak sulit dipelajari.</font>  <font color="gray">Konsep dasarnya cukup mudah dipahami dan dipelajari, tetapi perlu waktu dan upaya untuk menjadi pengembang Spring yang berpengalaman.</font> <font color="gray"><br><br></font>  <font color="gray">Pada artikel ini, kita akan melihat beberapa kesalahan paling umum yang dibuat ketika bekerja di Spring dan terkait, khususnya, untuk pengembangan aplikasi web dan penggunaan platform Spring Boot.</font>  <font color="gray">Sebagaimana dicatat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web Spring Boot</a> , Spring Boot mengambil pendekatan <i>standar</i> untuk membuat aplikasi yang siap digunakan, dan artikel ini akan mengikuti pendekatan ini.</font>  <font color="gray">Ini akan memberikan sejumlah rekomendasi yang dapat digunakan secara efektif dalam pengembangan aplikasi web standar berdasarkan Spring Boot.</font> <font color="gray"><br><br></font>  <font color="gray">Jika Anda tidak terlalu mengenal platform Spring Boot, tetapi ingin bereksperimen dengan contoh-contoh dalam artikel ini, saya membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori GitHub dengan bahan-bahan tambahan untuk artikel ini</a> .</font>  <font color="gray">Jika pada titik tertentu Anda sedikit bingung saat membaca artikel ini, saya akan menyarankan Anda untuk membuat klon dari repositori ini dan bereksperimen dengan kode di komputer Anda.</font> </p><a name="habracut"></a><br><hr><br><h2>  Kesalahan Umum # 6: Tidak menggunakan validasi data berbasis anotasi </h2><br>  Mari kita bayangkan bahwa layanan TopTalent kami dari contoh sebelumnya membutuhkan titik akhir untuk menambahkan data TopTalent baru.  Juga, mari kita asumsikan bahwa untuk beberapa alasan yang sangat penting, setiap nama yang Anda tambahkan harus panjangnya tepat 10 karakter.  Ini dapat diterapkan, misalnya, sebagai berikut: <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/put"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@RequestBody TopTalentData topTalentData)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> nameNonExistentOrHasInvalidLength = Optional.ofNullable(topTalentData) .map(TopTalentData::getName) .map(name -&gt; name.length() == <span class="hljs-number"><span class="hljs-number">10</span></span>) .orElse(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nameNonExistentOrInvalidLength) { <span class="hljs-comment"><span class="hljs-comment">//   } topTalentService.addTopTalent(topTalentData); }</span></span></code> </pre> <br>  Namun, kode di atas tidak hanya terstruktur dengan buruk, tetapi juga bukan solusi yang “bersih”.  Kami melakukan beberapa jenis validasi data (yaitu, kami memverifikasi bahwa objek <code>TopTalentData</code> bukan nol, bahwa nilai bidang TopTalentData.name bukan nol, dan bahwa panjang bidang <code>TopTalentData.name</code> adalah 10 karakter), dan juga memberikan pengecualian jika datanya salah. <br><br>  Semua ini dapat dilakukan dengan lebih akurat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">validator Hibernate</a> di Spring.  Pertama-tama mari kita menulis ulang metode <code>addTopTalent</code> , menambahkan dukungan untuk validasi data: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/put"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Valid @NotNull @RequestBody TopTalentData topTalentData)</span></span></span><span class="hljs-function"> </span></span>{ topTalentService.addTopTalent(topTalentData); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.BAD_REQUEST) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleInvalidTopTalentDataException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MethodArgumentNotValidException methodArgumentNotValidException)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code> </pre> <br>  Selain itu, kami perlu menunjukkan validasi properti apa yang ingin kami lakukan di kelas <code>TopTalentData</code> : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Length</span></span>(min = <span class="hljs-number"><span class="hljs-number">10</span></span>, max = <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-meta"><span class="hljs-meta">@NotNull</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; }</code> </pre> <br>  Spring sekarang akan memotong permintaan dan memverifikasinya sebelum memanggil metode, jadi tidak ada pemeriksaan manual tambahan yang diperlukan. <br><br>  Sasaran yang diinginkan juga dapat dicapai dengan membuat anotasi Anda sendiri.  Dalam kondisi nyata, biasanya masuk akal untuk menggunakan anotasi Anda sendiri hanya ketika kebutuhan Anda melebihi kemampuan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kumpulan Hibernate</a> <code>@Length</code> , tetapi untuk contoh ini, mari kita bayangkan bahwa anotasi <code>@Length</code> tidak ada.  Anda bisa membuat validator data yang memeriksa panjang string dengan membuat dua kelas tambahan: satu untuk validasi dan satu untuk anotasi properti: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Target</span></span>({ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER}) <span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RetentionPolicy.RUNTIME) <span class="hljs-meta"><span class="hljs-meta">@Documented</span></span> <span class="hljs-meta"><span class="hljs-meta">@Constraint</span></span>(validatedBy = { MyAnnotationValidator.class }) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> MyAnnotation { <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">message</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> "String length does not match expected"</span></span>; Class&lt;?&gt;[] groups() <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {}; Class&lt;? extends Payload&gt;[] payload() <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">value</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAnnotationValidator</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConstraintValidator</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAnnotation</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> expectedLength; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MyAnnotation myAnnotation)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expectedLength = myAnnotation.value(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String s, ConstraintValidatorContext constraintValidatorContext)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || s.length() == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expectedLength; } }</code> </pre> <br><br>  Harap perhatikan bahwa dalam kasus ini, penerapan prinsip pemisahan tanggung jawab yang benar mengharuskan penandaan properti sebagai valid jika nilainya nol <code>(s == null</code> dalam metode <code>isValid</code> ), dan kemudian gunakan anotasi <code>@NotNull</code> jika ini juga diperlukan untuk properti ini: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@MyAnnotation</span></span>(value = <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-meta"><span class="hljs-meta">@NotNull</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; }</code> </pre> <br><h2>  Kesalahan Umum # 7: Menggunakan Konfigurasi Berbasis Legacy XML </h2><br>  Menggunakan XML adalah suatu keharusan ketika bekerja dengan versi Spring sebelumnya, tetapi sekarang sebagian besar tugas konfigurasi dapat diimplementasikan menggunakan kode Java dan anotasi.  Konfigurasi XML sekarang bertindak sebagai kode templat tambahan dan opsional. <br><br>  Dalam artikel ini (dan juga dalam materi repositori GitHub yang menyertai), anotasi digunakan untuk mengonfigurasi Spring, dan Spring tahu komponen JavaBean mana yang harus diikat karena paket root dianotasi menggunakan anotasi komposit @SpringBootApplication - seperti ini: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(Application.class, args); } }</code> </pre> <br>  Anotasi komposit ini (lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi Spring untuk</a> lebih lanjut tentang ini) hanya memberi tahu platform Spring paket mana yang akan dipindai untuk mengekstrak komponen JavaBean.  Dalam kasus khusus kami, ini berarti bahwa sub-paket co.kukurin berikut akan digunakan untuk mengikat: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Komponen</a> (TopTalentConverter, MyAnnotationValidator) </li><li>  @RestController (TopTalentController) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Repositori</a> (TopTalentRepository) </li><li>  Kelas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Layanan</a> (TopTalentService) </li></ul><br>  Jika kita memiliki kelas tambahan yang memiliki anotasi <code>@Configuration</code> , mereka juga akan diperiksa untuk konfigurasi Java. <br><br><h2>  Kesalahan Umum # 8: Tidak Menggunakan Profil Konfigurasi </h2><br>  Ketika mengembangkan sistem server, masalah umum adalah beralih di antara konfigurasi yang berbeda (sebagai aturan, ini adalah konfigurasi untuk lingkungan operasional dan pengembangan).  Alih-alih mengubah berbagai parameter secara manual pada setiap transisi antara mode pengujian dan pengoperasian, lebih efisien menggunakan profil konfigurasi. <br><br>  Bayangkan kasusnya ketika di lingkungan pengembangan lokal Anda menggunakan database dalam RAM, dan di lingkungan operasi aktual aplikasi Anda, database MySQL digunakan.  Ini pada dasarnya berarti bahwa Anda akan menggunakan URL yang berbeda dan, mungkin, kredensial berbeda untuk mengakses masing-masing database ini.  Mari kita lihat bagaimana ini dapat diimplementasikan menggunakan dua file konfigurasi: <br><br>  <b>APLIKASI FILE.YAML</b> <br><br><pre> <code class="java hljs"># set <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> profile to <span class="hljs-string"><span class="hljs-string">'dev'</span></span> spring.profiles.active: dev # production database details spring.datasource.url: <span class="hljs-string"><span class="hljs-string">'jdbc:mysql://localhost:3306/toptal'</span></span> spring.datasource.username: root spring.datasource.password:</code> </pre> <br><br>  <b>APLIKASI FILE-DEV.YAML</b> <br><br><pre> <code class="java hljs">spring.datasource.url: <span class="hljs-string"><span class="hljs-string">'jdbc:h2:mem:'</span></span> spring.datasource.platform: h2</code> </pre> <br><br>  Harus diasumsikan bahwa ketika bekerja dengan kode, Anda tidak ingin melakukan beberapa tindakan acak dengan database yang ditujukan untuk lingkungan operasi, jadi masuk akal untuk memilih profil untuk lingkungan pengembangan (DEV) sebagai profil default.  Selanjutnya, Anda dapat secara manual mengganti profil konfigurasi di server dengan menentukan <code>-Dspring.profiles.active=prod</code> untuk JVM.  Selain itu, profil konfigurasi default dapat ditentukan dalam variabel lingkungan sistem operasi. <br><br><h2>  Nomor kesalahan umum 9. Kegagalan untuk menggunakan mekanisme injeksi ketergantungan </h2><br>  Penggunaan yang tepat dari mekanisme injeksi dependensi di Spring berarti Spring dapat mengikat semua objek Anda dengan memindai semua kelas konfigurasi yang diperlukan.  Ini berguna untuk melonggarkan saling ketergantungan dan sangat memudahkan pengujian.  Alih-alih menghubungkan kelas dengan ketat, sesuatu seperti ini: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentService topTalentService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.topTalentService = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TopTalentService(); } }</code> </pre> <br>  ... kami mengizinkan platform Spring mengikat: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentService topTalentService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TopTalentService topTalentService)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.topTalentService = topTalentService; } }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kuliah Mishko Hevery di saluran Google Tech Talks</a> menjelaskan secara terperinci mengapa injeksi ketergantungan harus digunakan, tetapi di sini kita akan melihat bagaimana mekanisme ini digunakan dalam praktik.  Di divisi tanggung jawab ("Kesalahan Umum # 3"), kami menciptakan kelas layanan dan pengontrol.  Misalkan kita ingin menguji controller, dengan asumsi bahwa kelas <code>TopTalentService</code> berfungsi dengan benar.  Kami dapat menyisipkan objek simulator alih-alih implementasi layanan saat ini dengan membuat kelas konfigurasi terpisah: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SampleUnitTestConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> TopTalentService </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">topTalentService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ TopTalentService topTalentService = Mockito.mock(TopTalentService.class); Mockito.when(topTalentService.getTopTalent()).thenReturn( Stream.of(<span class="hljs-string"><span class="hljs-string">"Mary"</span></span>, <span class="hljs-string"><span class="hljs-string">"Joel"</span></span>).map(TopTalentData::<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>).collect(Collectors.toList())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentService; } }</code> </pre> <br>  Setelah itu, kita bisa mengimplementasikan objek simulator dengan <code>SampleUnitTestConfig</code> platform Spring bahwa kita perlu menggunakan <code>SampleUnitTestConfig</code> sebagai sumber konfigurasi: <br> <code>@ContextConfiguration(classes = { SampleUnitTestConfig.class })</code> <br> <br>  Selanjutnya, ini akan memungkinkan kita untuk menggunakan konfigurasi kontekstual untuk menanamkan komponen JavaBean kustom dalam uji unit. <br><br><h2>  Nomor kesalahan umum 10. Kurang pengujian atau pengujian salah </h2><br>  Terlepas dari kenyataan bahwa ide pengujian unit tidak berarti baru, tampaknya banyak pengembang "lupa" tentang hal itu (terutama jika <i>tidak wajib</i> ) atau menghabiskannya terlambat.  Jelas, ini salah, karena tes tidak hanya memungkinkan Anda untuk memeriksa operasi kode yang benar, tetapi juga berfungsi sebagai dokumentasi yang menunjukkan bagaimana aplikasi harus berperilaku dalam berbagai situasi. <br>  Saat menguji layanan web, Anda jarang menjalankan tes unit "bersih" yang luar biasa, karena untuk koneksi HTTP, Anda biasanya perlu menggunakan servlet Spring <code>DispatcherServlet</code> dan melihat apa yang terjadi ketika Anda menerima permintaan <code>HttpServletRequest</code> nyata (yaitu, ternyata tes <i>integrasi</i> yang menggunakan validasi, serialisasi, dll.).  Solusi yang elegan dan terbukti adalah dengan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">REST Assured</a> , perpustakaan Java untuk menguji layanan REST dengan nyaman, dengan MockMVC.  Pertimbangkan fragmen kode berikut dengan injeksi dependensi: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringJUnit4ClassRunner.class) <span class="hljs-meta"><span class="hljs-meta">@ContextConfiguration</span></span>(classes = { Application.class, SampleUnitTestConfig.class }) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RestAssuredTestDemonstration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TopTalentController topTalentController; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldGetMaryAndJoel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// given MockMvcRequestSpecification givenRestAssuredSpecification = RestAssuredMockMvc.given() .standaloneSetup(topTalentController); // when MockMvcResponse response = givenRestAssuredSpecification.when().get("/toptal/get"); // then response.then().statusCode(200); response.then().body("name", hasItems("Mary", "Joel")); } }</span></span></code> </pre> <br>  <code>SampleUnitTestConfig</code> mengikat implementasi pengganti dari kelas <code>TopTalentService</code> ke <code>TopTalentController</code> , dan semua kelas lainnya terikat menggunakan konfigurasi standar yang diperoleh dengan memindai paket-paket berdasarkan paket kelas Aplikasi.  <code>RestAssuredMockMvc</code> hanya digunakan untuk mengatur lingkungan yang ringan dan mengirim permintaan <code>GET</code> ke <code>/toptal/get</code> . <br><br><h3>  Gunakan Spring secara Profesional </h3><br>  Spring adalah platform yang kuat yang mudah untuk memulai, tetapi butuh waktu dan upaya untuk menguasainya sepenuhnya.  Jika Anda meluangkan waktu untuk mengenal platform ini, pada akhirnya itu akan meningkatkan efisiensi pekerjaan Anda, membantu Anda membuat kode yang lebih bersih dan meningkatkan kualifikasi Anda sebagai pengembang. <br><br>  Saya sarankan Anda memperhatikan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Spring In Action</a> - ini adalah buku yang bagus, berorientasi pada aplikasi yang membahas banyak topik penting yang terkait dengan platform Spring. <br><br>  Pada titik ini, terjemahan artikel ini berakhir. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Baca bagian pertama</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id465063/">https://habr.com/ru/post/id465063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id465049/index.html">10 Buku tentang Manajemen Proyek Agile yang Layak Dibawa Bersama Anda pada tahun 2020</a></li>
<li><a href="../id465055/index.html">Enam keterampilan untuk membawa karier Ilmu Data Anda ke tingkat selanjutnya.</a></li>
<li><a href="../id465057/index.html">Wadah dan Windows. Dari Hello World ke Kubernetes. Bagian Satu, Pengantar</a></li>
<li><a href="../id465059/index.html">PoE pada jarak 200+ meter. Pemantauan dan restart otomatis klien PoE</a></li>
<li><a href="../id465061/index.html">Mengapa alih-alih seminggu kerja empat hari, lebih baik memikirkan hari kerja enam jam</a></li>
<li><a href="../id465069/index.html">Baru di Hadoop: Kenali Berbagai Format File di Hadoop</a></li>
<li><a href="../id465071/index.html">TechTrain 2019 IT festival: bagaimana JUG.ru, JUGNsk dan JUG.MSK berpartisipasi di dalamnya</a></li>
<li><a href="../id465073/index.html">Jangan muncul! Transisi Interruptable di iOS</a></li>
<li><a href="../id465075/index.html">Di taksi pengemudi kereta</a></li>
<li><a href="../id465077/index.html">Tidak Aman. AsSpan: Rentang <T> bagaimana cara mengganti pointer?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>