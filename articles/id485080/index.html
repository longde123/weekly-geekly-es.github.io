<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍🏭 🙌🏻 ✋🏼 Bebek NgRx | Fasad yang dinamis 👝 🙉 🛐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Meningkatkan pengalaman pengembangan 





 Berbicara dengan rekan kerja dari perusahaan yang berbeda, saya perhatikan bahwa begitu banyak tim menyuka...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bebek NgRx | Fasad yang dinamis</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485080/"><h2 id="usovershenstvovanie-opyta-razrabotki">  Meningkatkan pengalaman pengembangan </h2><br><p><img src="https://habrastorage.org/webt/ph/td/hc/phtdhcenn6zg36mh6etbljvnyai.jpeg"></p><br><p>  Berbicara dengan rekan kerja dari perusahaan yang berbeda, saya perhatikan bahwa begitu banyak tim menyukai NgRx.  Selama diskusi kami, pikiran itu tidak meninggalkan saya: </p><br><p>  <em>"Akan lebih baik jika mempertahankan lebih sedikit kode, dan ikuti panduan penulisan lebih banyak untuk memfasilitasi penskalaan berikutnya</em> . <em>"</em> </p><br><p>  Ini mendorong saya untuk mulai menjelajahi berbagai teknik refactoring Redux.  Saya menonton video, membaca artikel dan dokumen Redux.  Pada akhirnya, saya menulis sebuah plugin untuk NgRx yang disebut <a href="https://www.npmjs.com/package/%40co-it/ngrx-ducks">NgRx Ducks</a> </p><a name="habracut"></a><br><h3 id="celi">  Tujuan </h3><br><p>  Pada dasarnya, <strong>ngrx-bebek</strong> diciptakan untuk menyederhanakan bekerja dengan NgRx. </p><br><ol><li>  Penanganan tindakan yang disederhanakan menggunakan <strong>API Dekorator</strong> , yang mengurangi jumlah kode yang perlu ditulis untuk mengonfigurasi <strong>Peredam</strong> dan <strong>pembuat</strong> tindakan.  NgRx Ducks <em>menghasilkan pembuat aksi dan fitur peredam</em> secara otomatis. </li><li>  Kurang dukungan teknis, karena Anda tidak perlu menulis enum atau <strong>jenis gabungan</strong> . </li><li>  Logika aplikasi yang lebih jelas disediakan berkat API yang diketik secara intuitif yang dapat Anda gunakan sebagai <strong>Layanan injeksi</strong> , yang mengatur interaksi dengan Store untuk Anda. </li></ol><br><h3 id="kak-ono-rabotaet">  Bagaimana cara kerjanya? </h3><br><p>  Perpustakaan ini berfungsi sebagai lapisan tambahan pada NgRx.  Secara otomatis membuat pembuat aksi dan fitur peredam untuk Anda.  Selain itu, Anda mendapatkan layanan yang dapat Anda gunakan dalam komponen Anda.  Layanan ini menyediakan API yang diketik secara ketat yang memungkinkan tindakan pengiriman dan memilih data dari Storage. </p><br><p>  Perpustakaan NgRx Ducks tidak mengubah perilaku NgRx yang ada.  Ini hanya mengontrol Repositori yang Dapat Diamati dan metode <em>pengiriman</em> . </p><br><p><img src="https://habrastorage.org/webt/ir/1l/_b/ir1l_b0lenbapynhikr0s1jpkoc.png"></p><br><blockquote>  Karena Bebek NgRx hanya bergantung pada <em>pengiriman</em> dan fakta bahwa Repositori memberikan Observable, Bebek NgRx tetap kompatibel dengan NgRx, bahkan jika ada perubahan kritis dalam rilis. </blockquote><br><h3 id="ustanovka">  Instalasi </h3><br><p>  Bebek NgRx terintegrasi dengan mulus dengan proyek NgRx yang ada.  Cukup instal paket npm dan Anda siap berangkat. </p><br><pre><code class="bash hljs">npm install @co-it/ngrx-ducks <span class="hljs-comment"><span class="hljs-comment">#  yarn add @co-it/ngrx-ducks</span></span></code> </pre> <br><h3 id="decorator-api">  API dekorator </h3><br><p>  Gagasan utama NgRx Ducks adalah untuk menggabungkan jenis tindakan dan logika mutator ( <em>juga disebut reduksi</em> ).  Oleh karena itu, dekorator <strong>@Ducksify</strong> ditambahkan ke anotasi kelas reguler. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Ducksify } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@co-it/ngrx-ducks'</span></span>; @Ducksify&lt;number&gt;({ <span class="hljs-attr"><span class="hljs-attr">initialState</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Counter</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br><p>  Dekorator memungkinkan Anda untuk menentukan status <em>awal</em> negara Anda.  Melewati initialState memungkinkan NgRx Ducks untuk secara otomatis menghasilkan fungsi peredam nantinya. </p><br><p>  Sekarang Anda dapat menempatkan logika mutasi tepat di dalam kelas.  Tidak perlu lagi menulis <strong>ekspresi case-switch</strong> .  Sebagai gantinya, kami membuat pemetaan antara jenis tindakan dan logika mutasi menggunakan dekorator <strong><a href="https://habr.com/ru/users/action/" class="user_link">Aksi</a></strong> . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Action, Ducksify } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@co-it/ngrx-ducks'</span></span>; @Ducksify&lt;number&gt;({ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Counter</span></span></span><span class="hljs-class"> </span></span>{ @Action(<span class="hljs-string"><span class="hljs-string">'[Counter] Increase by passed value'</span></span>) increaseBy(state: number, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: number): number { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state + payload; } }</code> </pre> <br><p>  NgRx Ducks memetakan setiap Tindakan dengan logika mutasi yang sesuai.  Bebek berisi semua informasi yang diperlukan untuk menghasilkan fungsi peredam. </p><br><h3 id="funkciya-redyusera">  Fungsi peredam </h3><br><p>  Fungsi peredam secara otomatis dihasilkan menggunakan NgRx Ducks.  Pabrik <strong>reducerFrom</strong> membuat tabel pencarian untuk memetakan setiap jenis tindakan ke logika mutasi yang sesuai. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { reducerFrom, DucksifiedAction, ... } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@co-it/ngrx-ducks'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> state: number, action: DucksifiedAction</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">number</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reducerFrom(Counter)(state, action); }</code> </pre> <br><p>  Anda masih perlu membungkus <strong>reducerFrom</strong> di dalam fungsi yang diekspor untuk bekerja dengan benar dengan kompiler <a href="https://angular.io/guide/aot-compiler">AoT</a> . </p><br><p>  Peredam yang dihasilkan harus ditambahkan ke <strong>ActionReducerMap</strong> menggunakan NgRx ( <em>lihat contoh di bawah</em> ). </p><br><h3 id="utinaya-sila">  Kekuatan bebek! </h3><br><p>  Yang paling menarik belum datang!  Tujuan dari NgRx Ducks adalah untuk menyederhanakan interaksi dengan Gudang.  Dengan generasi otomatis fungsi peredam, semuanya baik-baik saja, jadi mari kita lihat <strong>fasad dinamis</strong> , yang juga dibuat di sini. </p><br><blockquote>  Dekorator <strong>@Ducksify</strong> juga menangani pendaftaran bebek Anda sebagai <strong>Layanan</strong> dalam wadah IoC Angular.  Ini berarti Anda dapat menanamkan bebek di komponen Anda! </blockquote><br><h4 id="dispatching-ekshenov-v-hranilische">  Pengiriman tindakan kubah </h4><br><p>  NgRx Ducks menambahkan beberapa perbaikan pada Duck yang memungkinkan Anda untuk menggunakan panggilan fungsi sederhana alih-alih mengirim tindakan secara manual.  Anda mendapatkan API yang diketik di dalam komponen Anda. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Duck } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@co-it/ngrx-ducks'</span></span>; @Component({ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CounterComponent</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(@Inject(Counter) private _counter: Duck&lt;Counter&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.counter.incrementBy(<span class="hljs-number"><span class="hljs-number">42</span></span>); } }</code> </pre> <br><p>  Anda menerapkan <em>Duck, bukan Counter itu sendiri.</em>  <em>Duck secara otomatis membuat pembuat tindakan untuk <strong>incrementBy</strong> yang mengirimkan tindakan dengan nilai yang diteruskan (payload).</em>  <em>Berkat jenis-jenis TypeScript yang dinamis, Anda segera mendapatkan pelengkapan otomatis dalam IDE.</em> <br></p><p><img src="https://habrastorage.org/webt/qr/xc/nm/qrxcnmafxyodeigdatgq0ea5too.gif"></p><br><p>  Singkatnya, Bebek NgRx mengotomatiskan seluruh proses pemrosesan Tindakan.  Anda mengkonfigurasi tindakan sekali di Bebek, dan setelah itu Anda cukup menggunakan fasad yang diketik, dinamis, dihasilkan dan diperbarui secara otomatis untuk Anda. </p><br><h4 id="vyborka-dannyh-iz-hranilischa">  Pengambilan Data dari Penyimpanan </h4><br><p>  Duck menggunakan penyeleksi NgRx untuk membaca data dari Storage.  Setiap bebek memiliki helper <em>pick</em> yang menerima pemilih. </p><br><p>  Mari kita bayangkan Counter kita terdaftar sebagai fungsi NgRx dengan kunci " <em>counter</em> ".  Ini akan memungkinkan kita pengaturan pemilih berikut. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createFeatureSelector, createSelector} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@ngrx/store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> visitCounter = createFeatureSelector&lt;number&gt;(<span class="hljs-string"><span class="hljs-string">'counter'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> count = createFeatureSelector&lt;number&gt;(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">count</span></span></span><span class="hljs-function"> =&gt;</span></span> count); @Component({ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CounterComponent</span></span></span><span class="hljs-class"> </span></span>{ count$: Observable&lt;number&gt;;<span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(@Inject(Counter) private _counter: Duck&lt;Counter&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.count$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.counter.pick(count); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.counter.incrementBy(<span class="hljs-number"><span class="hljs-number">42</span></span>); } }</code> </pre> <br><p>  Anda dapat menonton demo di <a href="https://stackblitz.com/edit/ngrx-ducks-simple%3Fembed%3D1%255E_%255Eamp%255E_%255Efile%3Dsrc/app/counter/counter.component.ts">stackblitz.io</a> . </p><br><p>  Bebek memungkinkan kedua memicu mutasi negara dan meminta data dari Repositori.  Anda hanya perlu satu Layanan "dimanfaatkan", yang menyiapkan API yang nyaman untuk berinteraksi dengan Penyimpanan. </p><br><h3 id="i-nakonec">  Dan akhirnya </h3><br><p>  NgRx Ducks juga terintegrasi dengan Efek!  TAPI kami akan menganalisis ini secara rinci hanya di artikel berikutnya. </p><br><p>  <em>Jika Anda ingin mengetahuinya sekarang, Anda dapat merujuk ke contoh kompleks, yang juga tersedia di <a href="https://stackblitz.com/edit/ngrx-ducks%3Fctl%3D1%255E_%255Eamp%255E_%255Eembed%3D1%255E_%255Eamp%255E_%255Efile%3Dsrc/app/counter/counter.component.html">stackblitz.io.</a></em> </p><br><h3 id="tldr">  TL; DR </h3><br><ul><li>  Bebek NgRx berfungsi sebagai lapisan tambahan di atas NgRx. </li><li>  Anda dapat dengan mudah mengintegrasikan Itik NgRx ke dalam proyek yang ada. </li><li>  Bebek <br>  ...  secara otomatis menghasilkan pembuat aksi dan fungsi peredam <br>  ... ... membuat enumerator tindakan dan jenis serikat tidak perlu <br>  ...  itu adalah fasad dinamis yang dapat tertanam dalam komponen <br>  ... ... menyediakan pengiriman otomatis yang diketik secara otomatis; tindakan maaf <br>  ...  memungkinkan untuk membaca data dari Storage menggunakan pick-API <br>  . ... dapat digunakan oleh Efek (lihat. <a href="https://stackblitz.com/edit/ngrx-ducks">Demo</a> ) </li></ul><br><h4 id="vot-i-vse-rebyata">  Itu semuanya! </h4><br><p>  Saya harap saya berhasil meyakinkan Anda untuk mencoba <a href="https://www.npmjs.com/package/%40co-it/ngrx-ducks">NgRx Ducks</a> .  Juga, saya ingin tahu apa pendapat Anda tentang perpustakaan ini.  Jika Anda punya ide, cukup tulis di <a href="https://github.com/co-it/co-it/issues">GitHub</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id485080/">https://habr.com/ru/post/id485080/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id485058/index.html">“Verify the clock”: apa yang diketahui tentang protokol sinkronisasi waktu server baru</a></li>
<li><a href="../id485068/index.html">Kode Bersih untuk TypeScript - Bagian 2</a></li>
<li><a href="../id485070/index.html">Andrew Eun "Gairah Belajar Mesin." Terjemahan bab 36-46</a></li>
<li><a href="../id485074/index.html">Bagaimana tidak mati di proyek atau 5 hacks kehidupan</a></li>
<li><a href="../id485078/index.html">Sulit, rentan, tidak terkonfigurasi: ancaman dunia maya 2020</a></li>
<li><a href="../id485084/index.html">Office Plankton - Evolusi</a></li>
<li><a href="../id485088/index.html">Menyapu retrospektif. Bagaimana solusi buatan sendiri ternyata lebih keren dari pada yang dibayarkan</a></li>
<li><a href="../id485090/index.html">Rahasia efisiensi adalah kode kualitas, bukan manajer yang efektif</a></li>
<li><a href="../id485092/index.html">Validasi data dalam aplikasi iOS</a></li>
<li><a href="../id485094/index.html">Layanan microser dengan Spring Boot. Bagian 3. Membuat microservice konversi mata uang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>