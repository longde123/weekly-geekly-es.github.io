<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🤝‍👨🏻 🤳🏾 👨🏾‍🤝‍👨🏼 Overclocking Magento Rest API con RoadRunner ⚜️ 🙆 👦🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PHP creado para morir. Y todo estaría bien, pero no se le ha dado la oportunidad de hacerlo recientemente. Hace un año, en el centro, tuvo lugar el an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Overclocking Magento Rest API con RoadRunner</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466105/"><p><img src="https://habrastorage.org/webt/p2/kb/o0/p2kbo06xbl1z7zx0m4qyu1-jofe.jpeg" alt="Acelera Magento con RoadRunner"><br>  PHP creado para morir.  Y todo estaría bien, pero no se le ha dado la oportunidad de hacerlo recientemente.  Hace un año, en el centro, tuvo lugar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">anuncio de la herramienta RoadRunner, lo que</a> obligó al proceso PHP a abandonar el círculo interminable de muerte y resurrección. </p><br><p>  El principio del trabajo de RoadRunner es mantener el proceso en ejecución y enviar las solicitudes entrantes, lo que permite, según los desarrolladores, aumentar el rendimiento de la aplicación (a veces incluso 40 veces). </p><br><p> Como he estado trabajando con Magento durante mucho tiempo, me pareció una gran idea probar la herramienta no en un marco mítico, sino en una aplicación real, para la cual Magento Open Source funcionó muy bien. </p><a name="habracut"></a><br><h2 id="stoimost-inicializacii-magento-prilozheniya">  Costo de inicialización de la aplicación Magento </h2><br><p>  La forma de acelerar la aplicación RoadRunner implica reducir el tiempo de respuesta (después de un inicio de calentamiento) al reducir la sobrecarga de inicializar la aplicación. </p><br><p><img src="https://habrastorage.org/webt/mi/bt/ea/mibteawafee1aavgi4o1gz89u5y.jpeg" alt="Captura de pantalla de la presentación de Anton Tsitou &quot;Diseño de aplicaciones híbridas Go / PHP utilizando RoadRunner&quot;"><br>  <em>Captura de pantalla de la presentación de Anton Tsitou "Diseño de aplicaciones híbridas Go / PHP utilizando RoadRunner"</em> </p><br><p>  En el caso de Magento, el tiempo principal dedicado al inicio recae en: </p><br><ul><li>  autocargador de compositores </li><li>  bootstrapping </li></ul><br><p>  La carga automática de Composer no llama la atención, ya que es estándar para una aplicación PHP. </p><br><p><img src="https://habrastorage.org/webt/4_/ca/d0/4_cad0h0askyfnxnn6hdzlsrfbk.png" alt="Perfiles de resultados relacionados con Composer."><br>  <em>Perfiles de resultados relacionados con Composer.</em> </p><br><p>  El arranque de la aplicación Magento incluye inicializar un controlador de errores, verificar el estado de la aplicación, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">etc.</a> </p><br><p>  La parte más difícil es la inicialización del contenedor IoC ("ObjectManager" en términos de Magento) y la creación recursiva de instancias de dependencia a través de él para obtener el objeto de la aplicación. </p><br><p><img src="https://habrastorage.org/webt/ww/88/ag/ww88ag1xoy2gv61wndt7mudf430.png" alt="Resultados de perfiles relacionados con bootstraping."><br>  <em>Resultados de perfiles relacionados con bootstraping.</em> </p><br><h2 id="vnedrenie-roadrunner">  Implementación de RoadRunner </h2><br><p>  Para iniciar RoadRunner, debe crear un trabajador que contendrá un ciclo para aceptar solicitudes entrantes y enviar respuestas.  Además, la herramienta funciona con solicitudes y respuestas implementando PSR-7.  De la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentación oficial,</a> se ve más o menos así: </p><br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ($req = $psr7-&gt;acceptRequest()) { $resp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \Zend\Diactoros\Response(); $resp-&gt;getBody()-&gt;write(<span class="hljs-string"><span class="hljs-string">"hello world"</span></span>); $psr7-&gt;respond($resp); }</code> </pre> <br><h2 id="magento-i-psr-7">  Magento y PSR-7 </h2><br><p>  Magento aún no ha implementado el PSR-7 y utiliza sus implementaciones de solicitud y respuesta, los enfoques en los que se basan principalmente en la versión anterior. </p><br><p>  Para implementar RoadRunner, debe encontrar un punto de entrada que acepte la solicitud de alguna forma y devuelva una respuesta ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://github.com/symfony/">ejemplo de Symfony</a> ). </p><br><p>  Existe un punto en <em>Magento</em> , <em>\ Magento \ Framework \ AppInterface</em> , solo hay un problema, esta interfaz no está diseñada para aceptar la solicitud.  Pero espera, ¿de dónde viene la aplicación?  Vale la pena volver al principio y al mantra: <em>PHP nace para morir</em> .  En consecuencia, la gran mayoría de las bibliotecas, paquetes y marcos, al diseñar y dividir en capas, simplemente no asumen que la solicitud resulta ser más de una global. </p><br><p>  La capa de transporte de Magento se basa en el mismo principio.  Aunque la documentación <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">describe las diferencias entre los objetos inyectables / renovables</a> , de hecho, tenemos el uso de la solicitud como un servicio global con estado que se inicializa a partir de variables globales ($ _GET, $ _POST).  Además de todo esto, la inyección de este servicio se puede ver en todos los niveles de la aplicación en el núcleo mismo, y mucho menos en la calidad de los módulos de terceros. </p><br><p>  Con base en lo anterior, se gastó la esperanza de implementar RoadRunner solo a través de la conversión de solicitudes de estilo PSR-7 a estilo Magento. </p><br><h2 id="vnedrenie-psr-7-adaptera">  Implementar el adaptador PSR-7 </h2><br><p>  Formulamos el problema, teniendo en cuenta la información recibida. <br>  Me gustaría tener una determinada interfaz de aplicación que acepte una solicitud PSR-7 y devuelva una respuesta PSR-7.  También es necesario crear una implementación de la interfaz creada que adapte este formato de interacción a la aplicación Magento. </p><br><p><img src="https://habrastorage.org/webt/ep/bg/ix/epbgix0lny5de_sx36up92v71fc.png" alt="Adaptador PSR-7"><br>  <em>Adaptador PSR-7</em> </p><br><p>  Como se mencionó anteriormente, la aplicación magento ya devuelve una respuesta, por lo que solo necesitamos convertirla al formato PSR-7. </p><br><p>  Para la solicitud, necesita una clase que represente todas las llamadas al objeto de solicitud actual, que colocamos en un registro especial (sí, los dioses de la arquitectura perdonarán esta perversión).  Además, se encontró que la clase de solicitud no se usa una, sino 3, por lo que requiere que se vuelvan a registrar a través de la configuración de IoC del contenedor. </p><br><p><img src="https://habrastorage.org/webt/5o/ep/nd/5oepndag_2d8xwlmw7q7rbysmpa.png" alt="El conjunto de clases que solía funcionar con consultas en Magento"><br>  <em>El conjunto de clases que solía funcionar con consultas en Magento</em> </p><br><h2 id="problemy-neumirayuschego-php-prilozheniya">  Problemas de una aplicación PHP inmortal </h2><br><p>  Una aplicación lanzada a través de RoadRunner tiene los mismos problemas que cualquier proceso php de larga duración, se describen en la documentación ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://roadrunner.dev/docs/usage-production</a> ) </p><br><p>  Los principales problemas del nivel de aplicación que el desarrollador debe monitorear son: </p><br><ul><li>  pérdidas de memoria ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://www.php.net/manual/ru/features.gc.php</a> ) </li><li>  las conexiones de la base de datos (de repente) pueden caerse en el tiempo de espera, como cualquier otra </li><li>  gestión estatal competente </li></ul><br><p>  Se debe prestar especial atención en el contexto de Magento a la gestión del estado, ya que tanto en el núcleo como en los módulos de terceros, el almacenamiento en caché del usuario / producto / categoría actual dentro del servicio es un enfoque muy común. </p><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCustomer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: ?</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomerInterface</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;customer) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;customerSession-&gt;isLoggedIn()) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;customer = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;customerRepository-&gt;getById(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;customerSession-&gt;getCustomerId()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;customer; }</code> </pre> <br><p>  <em>Un ejemplo de un método del núcleo que usa el estado de un objeto.</em> </p><br><h2 id="zapusk-magento-rest-api-servera-cherez-roadrunner">  Ejecución del servidor API Magento Rest a través de RoadRunner </h2><br><p>  Dados los posibles problemas con el estado global, basados ​​en la experiencia de desarrollar la parte frontal de Magento, se eligió la parte WebApi más adecuada e indolora para su lanzamiento. </p><br><p>  Lo primero que debe hacer es crear a nuestro trabajador, que correrá a través de RoadRunner y vivirá sin fin (casi).  Para hacer esto, tome un fragmento de código de las guías RoadRunner y agregue nuestra aplicación allí, envuelta en un adaptador PSR-7. </p><br><pre> <code class="php hljs">$relay = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamRelay(STDIN, STDOUT); $psr7 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PSR7Client(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Worker($relay)); $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, []); <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\Http $app */</span></span> $app = $bootstrap-&gt;createApplication(\Magento\Framework\App\Http::class); <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> ApplicationInterface $psr7Application */</span></span> $psr7Application = $bootstrap-&gt;getObjectManager()-&gt;create( \Isxam\M2RoadRunner\Application\MagentoAppWrapper::class, [ <span class="hljs-string"><span class="hljs-string">'magentoApp'</span></span> =&gt; $app ] ); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ($request = $psr7-&gt;acceptRequest()) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { $response = $psr7Application-&gt;handle($request); $psr7-&gt;respond($response); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (\Throwable $e) { $psr7-&gt;getWorker()-&gt;error((string)$e); } }</code> </pre> <br><p>  <em>El código antes del ciclo while se ejecutará al inicio del trabajador, todo lo que está dentro del ciclo, con cada nueva solicitud.</em> </p><br><p>  Cuando nuestro trabajador está listo, procedemos a configurar el servidor RoadRunner escrito en Go.  Aquí todo es bueno y rápido, solo el paquete del compositor que descarga el archivo ejecutable no necesita ser instalado, lo que no puede ser agradable.  Creamos la configuración de nuestro servidor; el más simple se parece a esto. </p><br><pre> <code class="plaintext hljs">http: address: 0.0.0.0:8086 workers: command: "php worker.php" pool: numWorkers: 1</code> </pre> <br><p>  <em>Configuración de RoadRunner.</em> </p><br><p>  La documentación contiene una gran cantidad de configuraciones que le permiten configurar de manera flexible el servidor para que el deseo de compilar su binario no se produzca exactamente. </p><br><pre> <code class="bash hljs">./rr serve -v -d</code> </pre> <br><p>  <em>Inicio del servidor</em> </p><br><h2 id="testirovanie-resheniya">  Prueba de solución </h2><br><h3 id="instrumenty">  Las herramientas </h3><br><p>  Para pruebas convenientes, tomamos algo simple, por ejemplo artillery.io. </p><br><p>  Probamos el rendimiento con la ayuda de un usuario que ejecuta consultas secuencialmente (RoadRunner también admite la ejecución de consultas en varios subprocesos, dejaremos esta pregunta a otros investigadores) </p><br><p>  En la entrada, tenemos el archivo de configuración de artillería con dos entornos: Apache y RoadRunner.  Ambos trabajan con la misma instancia de Magento, por lo que aquí están en igualdad de condiciones. </p><br><h3 id="testovye-scenarii">  Escenarios de prueba </h3><br><p>  Los siguientes escenarios se utilizaron para medir el rendimiento de las dos soluciones. </p><br><div class="spoiler">  <b class="spoiler_title">Escenario 1. Crear una categoría</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> - name: "S1. Create category" flow: - loop: - post: url: "/rest/V1/categories" json: category: name: "name-{{prefix}}-{{ $loopCount }}" parent_id: 2 is_active: true count: 100</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Escenario 2. Obtener una lista de países</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> - name: "S2. Countries list" flow: - loop: - get: url: "/rest/V1/directory/countries" count: 100</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Escenario 3: Listado de tipos de productos</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> - name: "S3. Product types list" flow: - loop: - get: url: "/rest/V1/products/types" count: 100</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Escenario 4. Obtener una lista de conjuntos de atributos</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> - name: "S4. Product attribute sets list" flow: - loop: - get: url: "/rest/V1/products/attribute-sets/sets/list?searchCriteria" count: 100</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Escenario 5. Obtener una categoría</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> - name: "S5. Category get" flow: - loop: - get: url: "/rest/V1/categories/2" count: 100</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Escenario 6. Creación de producto</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> - name: "S6. Create product" flow: - loop: - post: url: '/rest/V1/products' json: product: sku: "sku-{{prefix}}-{{ $loopCount }}" name: "name-{{prefix}}-{{ $loopCount }}" attribute_set_id: 4 price: 100 type_id: "simple" count: 100</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Escenario 7. Recuperación de una lista de productos</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> - name: "S7. Get product list" flow: - loop: - get: url: "/rest/V1/products?searchCriteria[pageSize]=20" count: 100</code> </pre> </div></div><br><h3 id="rezultat">  Resultado </h3><br><p>  Después de ejecutar todos los scripts alternativamente a través de RoadRunner y Apache, se obtuvieron medianas de la duración de la consulta.  Según las medianas, la velocidad de todos los escenarios difiere en aproximadamente el mismo valor de ~ 50 ms. </p><br><p><img src="https://habrastorage.org/webt/fa/fv/yh/fafvyh1ntgsdywljqiey9a7pqok.png" alt="Resultado de la prueba de rendimiento."><br>  <em>Resultado de la prueba de rendimiento.</em> </p><br><h2 id="itog">  Resumen </h2><br><p>  Un experimento práctico confirmó las suposiciones sobre la constancia de la ganancia de rendimiento de RoadRunner en una aplicación específica.  El uso de esta herramienta le permite acelerar el procesamiento de solicitudes de aplicaciones para una constante igual al tiempo de inicialización del entorno y las dependencias. </p><br><p>  En los controladores ligeros, esto le permite acelerar la aplicación a veces, en el caso pesado, casi no da un efecto tangible.  Si su código es lento, lo más probable es que el plátano no lo ayude. </p><br><p>  Si su aplicación está bien escrita, lo más probable es que no haya problemas con su funcionamiento a través de RoadRunner, pero si la aplicación requiere adaptación para su uso con RoadRunner, lo más probable es que hubiera requerido lo mismo sin RoadRunner para observar más claramente las capas de la arquitectura. y siguiendo los estándares de desarrollo en el campo. </p><br><p>  Magento Open Source es generalmente adecuado para el lanzamiento en el entorno dado, sin embargo, requiere mejoras en la capa de transporte y la corrección de la lógica empresarial para evitar un comportamiento incorrecto durante las solicitudes repetidas dentro del mismo proceso.  Además, el uso de RoadRunner impone ciertas restricciones a los enfoques de desarrollo, sin embargo, no contradicen las prácticas bien establecidas. </p><br><div class="spoiler">  <b class="spoiler_title">Finalmente una buena captura de pantalla.</b>  <b class="spoiler_title">¿Cuándo verás las solicitudes de Magento con este tiempo de respuesta?</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/0y/_y/bx/0y_ybxrixvx7ftceche2zd-u1ew.jpeg" alt="Choque"></p></div></div><br><h2 id="ssylki">  Referencias </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ejemplo del articulo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sitio web oficial de RoadRunner</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/466105/">https://habr.com/ru/post/466105/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../466089/index.html">Algoritmo de pensamiento y conciencia, parte 2</a></li>
<li><a href="../466093/index.html">¿Cómo funciona kubectl exec?</a></li>
<li><a href="../466097/index.html">Supervisión de aplicaciones .NET</a></li>
<li><a href="../466099/index.html">Características de probar una aplicación web para servicio de video</a></li>
<li><a href="../466103/index.html">Monitoreo de seguridad en la nube</a></li>
<li><a href="../466107/index.html">Sistema de hogar inteligente hágalo usted mismo</a></li>
<li><a href="../466109/index.html">Resolución de problemas con pwnable.kr 22 - brainfuck. Ataque Ret2libc</a></li>
<li><a href="../466111/index.html">Entrenamiento Cisco 200-125 CCNA v3.0. Día 32. Recuperación de contraseña, XMODEM / TFTPDNLD y activación de licencia de Cisco</a></li>
<li><a href="../466113/index.html">Definición de codificación de texto en PHP en lugar de mb_detect_encoding</a></li>
<li><a href="../466121/index.html">Generación de sonido en microcontroladores AVR por el método de tablas de ondas con soporte de polifonía.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>