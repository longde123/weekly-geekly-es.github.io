<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôéüèº üë©üèª‚Äçü§ù‚Äçüë®üèΩ üëàüèæ O mundo atrav√©s dos olhos de um roteador WiFi ‚úçÔ∏è üìí üíÖüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A hist√≥ria das tentativas de ver o mundo sob uma luz completamente diferente e como isso levou √† cria√ß√£o de um dispositivo que permite "ver" o WiFi. O...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O mundo atrav√©s dos olhos de um roteador WiFi</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/392555/"><img src="https://habrastorage.org/files/ca8/256/56c/ca825656c192477eadd9274c6dc04a2d.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A hist√≥ria das tentativas de ver o mundo sob uma luz completamente diferente e como isso levou √† cria√ß√£o de um dispositivo que permite "ver" o WiFi. </font><font style="vertical-align: inherit;">O processo usar√° o popular m√≥dulo ESP8266. </font><font style="vertical-align: inherit;">Infelizmente, o Arduino tamb√©m n√£o ficar√° sem o Arduino.</font></font><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° N anos, um grupo de jovens pesquisadores da Alemanha descreveu o conceito de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">termovisor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baseado apenas em um sensor. A ess√™ncia da opera√ß√£o do dispositivo foi a seguinte: usando um design de dois servos, o sensor de infravermelho foi sequencialmente direcionado vertical e horizontalmente para a √°rea desejada, digitalizando gradualmente a imagem. Uma solu√ß√£o t√£o interessante tornou poss√≠vel reduzir drasticamente o pre√ßo do dispositivo e obter imagens interessantes da distribui√ß√£o de temperatura, como estas: </font></font><br>
<img src="https://habrastorage.org/files/2b6/3ac/755/2b63ac75524e4faeaa71d6a03b153ffd.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema de varredura mec√¢nica da imagem - e √© isso que √© o design dos servos, acabou sendo uma coisa extremamente interessante. Imediatamente ap√≥s a constru√ß√£o desse dispositivo, surge a pergunta - por que n√£o substituir o sensor de infravermelho por qualquer outra coisa que permita usar o mesmo princ√≠pio para visualizar, por exemplo, ondas de r√°dio?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O olho humano, embora seja uma ferramenta bastante complexa, mas muito limitada. O alcance da luz que vemos √© uma parte muito pequena do espectro da radia√ß√£o eletromagn√©tica. </font></font><br>
<img src="https://habrastorage.org/files/69b/d24/fc9/69bd24fc9014471f8261476800c48393.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avalie a escala da trag√©dia - a maioria das informa√ß√µes sobre o mundo ao nosso redor √© simplesmente escondida de n√≥s. Obviamente, seria √≥timo expandir a estrutura natural e obter a capacidade de enxergar al√©m dos limites delineados pela natureza. Portanto, as seguintes experi√™ncias foram realizadas usando um sistema de varredura mec√¢nica. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para testar a tecnologia, criei uma c√¢mera simples de ‚Äúum pixel‚Äù que funciona na faixa j√° vis√≠vel que nos √© familiar. Usei uma bateria solar de um carro de brinquedo chin√™s como sensor:</font></font><br>
<img src="https://habrastorage.org/files/c00/308/440/c00308440ccc4a38a7a3d1d75242df45.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, a √°rea de uma c√©lula fotoel√©trica √© muito grande, o que significa que √© necess√°rio fornecer um campo de vis√£o estreito; portanto, adicionaremos uma lente da lanterna. Colocamos servos e nos conectamos ao Arduino. </font></font><br>
<img src="https://habrastorage.org/files/3c9/b1c/57c/3c9b1c57cdbb4179a68db3c34ea3e841.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A bateria solar gira para a √°rea desejada da imagem futura, ap√≥s o que o controlador l√™ um sinal proporcional √† quantidade de luz incidente na bateria. Obviamente, essa c√¢mera produzir√° uma imagem em preto e branco. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para processar os resultados da verifica√ß√£o, usando o QT, foi implementado um programa com uma interface simples. (Li√ß√µes sobre como implementar a comunica√ß√£o entre Arduino e Qt podem ser facilmente obtidas no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">youtube</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">O programa consiste em um par de bot√µes para controle manual de servos e no campo QGraphicsScene, onde pixels quadrados s√£o desenhados, cuja cor depende da magnitude do sinal em um determinado ponto. </font><font style="vertical-align: inherit;">O uso √© simples - primeiro, as unidades s√£o guiadas manualmente para o ponto superior esquerdo da imagem futura, ap√≥s o que √© realizada uma verifica√ß√£o autom√°tica da √°rea durante a qual a imagem √© constru√≠da. </font><font style="vertical-align: inherit;">Aqui est√° o que saiu de tudo isso: </font></font><br>
<img src="https://habrastorage.org/files/493/a25/5f3/493a255f374f439fbbd6f865d9a2ac02.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que √© representado nesta visualiza√ß√£o? </font><font style="vertical-align: inherit;">Obviamente, este √© o assunto mais √≥bvio para fotografar se sua c√¢mera for uma bateria solar - este √© o sol.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, o sinal da bateria √© muito fraco para receber imagens adequadas na ilumina√ß√£o da sala, porque foi substitu√≠do por um fotorresistor, e as lentes da lanterna deram lugar a metade dos bin√≥culos quebrados do teatro. </font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagrama de fia√ß√£o</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/a6b/680/417/a6b680417a6347d7a95ca8e3af23f370.jpg"><br>
</div></div><br>
<img src="https://habrastorage.org/files/62b/8c6/b07/62b8c6b073e64fd88417b2a0cc3b667a.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa cria√ß√£o acabou sendo mais bem-sucedida e j√° era poss√≠vel tirar fotografias mais ou menos reconhec√≠veis: </font><font style="vertical-align: inherit;">
m√°quina de </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lustre </font></font><br>
<img src="https://habrastorage.org/files/3ed/a70/796/3eda7079642044c08f4c4660df7a2d20.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na estrada </font></font><br>
<img src="https://habrastorage.org/files/58f/df4/483/58fdf44832be41a489363f0b980e84e6.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vista da janela </font></font><br>
<img src="https://habrastorage.org/files/d27/027/9ff/d270279ff97b44259b0675db5fc82521.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E at√© nuvens no c√©u </font></font><br>
<img src="https://habrastorage.org/files/7c0/c57/97f/7c0c5797fc80420299e53b22e8fa02eb.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tendo satisfeito com esse resultado, decidi que era hora de finalmente fazer um monitor de r√°dio completo, substituindo o fotorresistor por uma antena direcional. </font><font style="vertical-align: inherit;">O alcance mais adequado para isso √© o microondas, uma vez que uma antena direcional n√£o ocupa muito espa√ßo e, hoje em dia, existem muitos dispositivos que emitem cuidadosamente nesse alcance.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No come√ßo, eu decidi usar uma antena de buzina, que est√° nos detectores de radar de carros (eles geralmente funcionam na faixa de 10,525 GHz ou 24,15 GHz). Tentativas de isolar um sinal anal√≥gico proporcional ao valor da radia√ß√£o detectada do circuito de um detector desse tipo n√£o tiveram √™xito, possivelmente devido √† falta de meu conhecimento e possivelmente porque n√£o existe, pois funciona pelo princ√≠pio da compara√ß√£o. (Ol√° aos irm√£os chineses que reuniram esse milagre). √â claro que eu queria puxar a pr√≥pria antena e construir algo pr√≥prio, mas n√£o comecei a quebrar um bom dispositivo para isso.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda coisa que me veio √† mente foi construir um detector de campo de acordo com um dos esquemas encontrados em abund√¢ncia em portais de r√°dio amador e conectar uma antena direcional caseira a ele, por exemplo, o muito popular e bastante simples de produzir Harchenko biquadrat. Mas, como se viu, o elemento mais importante - o diodo detector de microondas √© muito dif√≠cil de encontrar, f√°cil de perder e geralmente custa muito, ent√£o eu tive que procurar a pe√ßa certa por um longo tempo e com dificuldade. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de algum tempo, consegui obter um diodo detector de germ√¢nio nos tempos sovi√©ticos e montar o seguinte circuito: </font></font><br>
<img src="https://habrastorage.org/files/938/cc7/d9c/938cc7d9c7f541738e97e24b7c82bd25.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O dispositivo resultante funcionou com confian√ßa, mas a uma dist√¢ncia muito curta, em algum lugar a 5 a 10 cm de um telefone celular que atua como fonte de radia√ß√£o. Obviamente, isso n√£o foi suficiente para a tarefa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de todas essas prova√ß√µes, finalmente recebi o m√≥dulo ESP8266, que pode exibir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSSI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (indicador do n√≠vel de sinal WiFi recebido) dos pontos de acesso encontrados. </font><font style="vertical-align: inherit;">Para fazer isso, use o comando AT + CWLAP no firmware padr√£o do m√≥dulo. </font><font style="vertical-align: inherit;">Decidi aplicar esse recurso, juntamente com a antena de biquadrat caseira, dirigida por WiFi, mencionada anteriormente. </font><font style="vertical-align: inherit;">Assim, esse milagre da tecnologia apareceu:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diagrama de fia√ß√£o</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/5e6/608/d66/5e6608d66dff4b60bb256fdbe9ed6ddb.jpg"></div></div><br>
<img src="https://habrastorage.org/files/193/2df/f2a/1932dff2a29247f682269bd2ddfa769b.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pr√≥prio ESP8266 √© montado na parte traseira da antena e est√° bem protegido com chapas de cobre. Os d√≠gitos luminosos mostram a tens√£o na sa√≠da do conversor DC-DC pulsado, que reduz 12V da fonte de alimenta√ß√£o para 3,3V, necess√°ria para o m√≥dulo funcionar (√© muito voraz, portanto, aliment√°-lo do Arduino √© uma opera√ß√£o inst√°vel). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Arduino ainda gerencia servo drives e tamb√©m envia comandos AT para o ESP8266 usando a biblioteca SoftwareSerial. Um dos pontos dif√≠ceis - em vez das bibliotecas padr√£o SoftwareSerial e Servo, tive que mudar para suas contrapartes, pois as originais conflitam quando usadas simultaneamente.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, voc√™ pode ouvir cr√≠ticas de que o Arduino √© um elemento extra aqui, j√° que o pr√≥prio ESP8266 pode lidar com essa funcionalidade. </font><font style="vertical-align: inherit;">Mas aconteceu historicamente que, durante a cria√ß√£o do dispositivo, eu inicialmente foquei no Arduino como o elo central do dispositivo final, e o ESP8266 desempenha o papel de um tipo de sensor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O programa QT, escrito para a "c√¢mera solar", sofreu um refinamento significativo.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vers√£o final do programa</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/193/444/1da/1934441da66842f8b728bb6d22fcf1cc.jpg"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante a varredura da √°rea, para cada ponto de acesso encontrado, √© criada uma matriz de valores de sinal, que permite ver como diferentes roteadores WiFi ‚Äúbrilham‚Äù no final da varredura e at√© tentar estimar sua localiza√ß√£o aproximada. Quanto mais forte o sinal em um ponto espec√≠fico, mais brilhante √© a cor azul do pixel correspondente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, finalmente, colocando o dispositivo em diferentes partes da minha casa, obtive as seguintes imagens. Felizmente, existem muitas redes wifi em minha casa e, com uma antena direcional semelhante, voc√™ pode capturar at√© mesmo redes muito remotas. </font></font><br>
<img src="https://habrastorage.org/files/8a5/445/7f7/8a54457f77c246b289f1376f8a4add41.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pe√ßa de sof√° e carpete. Se voc√™ prestar aten√ß√£o, √© obtida uma imagem de alta qualidade em compara√ß√£o com as outras no ponto ‚ÄúSkyNet‚Äù - este √© o meu roteador dom√©stico. Ele √© o mais pr√≥ximo do local da filmagem, que aparentemente desempenha um papel importante no processo.</font></font><br>
<img src="https://habrastorage.org/files/0da/39e/051/0da39e0513f54dbaa7e6c35c6508baec.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lustre novamente. </font><font style="vertical-align: inherit;">Os sinais de algumas redes n√£o s√£o refletidos no teto ou no lustre. </font><font style="vertical-align: inherit;">Provavelmente, com base nesses sinais, voc√™ pode tentar determinar a localiza√ß√£o f√≠sica do transmissor. </font></font><br>
<img src="https://habrastorage.org/files/6e6/adf/0f8/6e6adf0f85984c8097da5bbb18049ee3.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma banheira cheia de √°gua. </font><font style="vertical-align: inherit;">Como todos sabem, as ondas de r√°dio sob a √°gua s√£o pouco transmitidas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale ressaltar que as fotos na faixa vis√≠vel correspondem apenas aproximadamente √† √°rea digitalizada. </font><font style="vertical-align: inherit;">Tamb√©m √© necess√°rio levar em considera√ß√£o que durante a opera√ß√£o a antena descreve de alguma forma o hemisf√©rio, e isso tamb√©m afeta o resultado. </font><font style="vertical-align: inherit;">A resolu√ß√£o, em princ√≠pio, √© limitada apenas pelo curso da antena e pelo tempo necess√°rio para circular a √°rea inteira. </font><font style="vertical-align: inherit;">Al√©m disso, a obten√ß√£o de dados para cada pixel requer 4-5 segundos. </font><font style="vertical-align: inherit;">Gostaria de obter imagens menos desfocadas, mas isso requer uma antena com um padr√£o de radia√ß√£o mais estreito. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digos-fonte, incluindo um esbo√ßo para o Arduino</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt392555/">https://habr.com/ru/post/pt392555/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt392545/index.html">IBM Watson analisou os personagens de "Star Wars", descrevendo os personagens principais</a></li>
<li><a href="../pt392547/index.html">As br√¢nquias artificiais permitir√£o que o mergulho fique em casa?</a></li>
<li><a href="../pt392549/index.html">D√™ ao astronauta e her√≥i do astronauta e her√≥i</a></li>
<li><a href="../pt392551/index.html">An√°lise ao bb-mobile Techno W8.0 3G (Q800AY): tablet econ√¥mico de 8 polegadas no Windows 10 com um modem 3G</a></li>
<li><a href="../pt392553/index.html">Cientistas lan√ßam projeto para prever expectativa de vida</a></li>
<li><a href="../pt392559/index.html">Laborat√≥rio Digital NR05: Fazendo um bloqueio de c√≥digo</a></li>
<li><a href="../pt392561/index.html">HMI FLProg + Nextion. Li√ß√£o 1</a></li>
<li><a href="../pt392565/index.html">Possibilidades de usar a tecnologia de v√≠deo em 360 ¬∞ para eventos culturais</a></li>
<li><a href="../pt392573/index.html">O WhatsApp introduziu a criptografia completa de todos os dados para seus bilh√µes de usu√°rios</a></li>
<li><a href="../pt392575/index.html">32 varas de b√©tula ou sistemas de igni√ß√£o de motores de foguetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>