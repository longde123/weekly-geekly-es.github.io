<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙎🏼 👩🏻‍🤝‍👨🏽 👈🏾 O mundo através dos olhos de um roteador WiFi ✍️ 📒 💅🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A história das tentativas de ver o mundo sob uma luz completamente diferente e como isso levou à criação de um dispositivo que permite "ver" o WiFi. O...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O mundo através dos olhos de um roteador WiFi</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/392555/"><img src="https://habrastorage.org/files/ca8/256/56c/ca825656c192477eadd9274c6dc04a2d.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A história das tentativas de ver o mundo sob uma luz completamente diferente e como isso levou à criação de um dispositivo que permite "ver" o WiFi. </font><font style="vertical-align: inherit;">O processo usará o popular módulo ESP8266. </font><font style="vertical-align: inherit;">Infelizmente, o Arduino também não ficará sem o Arduino.</font></font><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Há N anos, um grupo de jovens pesquisadores da Alemanha descreveu o conceito de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">termovisor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baseado apenas em um sensor. A essência da operação do dispositivo foi a seguinte: usando um design de dois servos, o sensor de infravermelho foi sequencialmente direcionado vertical e horizontalmente para a área desejada, digitalizando gradualmente a imagem. Uma solução tão interessante tornou possível reduzir drasticamente o preço do dispositivo e obter imagens interessantes da distribuição de temperatura, como estas: </font></font><br>
<img src="https://habrastorage.org/files/2b6/3ac/755/2b63ac75524e4faeaa71d6a03b153ffd.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema de varredura mecânica da imagem - e é isso que é o design dos servos, acabou sendo uma coisa extremamente interessante. Imediatamente após a construção desse dispositivo, surge a pergunta - por que não substituir o sensor de infravermelho por qualquer outra coisa que permita usar o mesmo princípio para visualizar, por exemplo, ondas de rádio?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O olho humano, embora seja uma ferramenta bastante complexa, mas muito limitada. O alcance da luz que vemos é uma parte muito pequena do espectro da radiação eletromagnética. </font></font><br>
<img src="https://habrastorage.org/files/69b/d24/fc9/69bd24fc9014471f8261476800c48393.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avalie a escala da tragédia - a maioria das informações sobre o mundo ao nosso redor é simplesmente escondida de nós. Obviamente, seria ótimo expandir a estrutura natural e obter a capacidade de enxergar além dos limites delineados pela natureza. Portanto, as seguintes experiências foram realizadas usando um sistema de varredura mecânica. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para testar a tecnologia, criei uma câmera simples de “um pixel” que funciona na faixa já visível que nos é familiar. Usei uma bateria solar de um carro de brinquedo chinês como sensor:</font></font><br>
<img src="https://habrastorage.org/files/c00/308/440/c00308440ccc4a38a7a3d1d75242df45.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, a área de uma célula fotoelétrica é muito grande, o que significa que é necessário fornecer um campo de visão estreito; portanto, adicionaremos uma lente da lanterna. Colocamos servos e nos conectamos ao Arduino. </font></font><br>
<img src="https://habrastorage.org/files/3c9/b1c/57c/3c9b1c57cdbb4179a68db3c34ea3e841.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A bateria solar gira para a área desejada da imagem futura, após o que o controlador lê um sinal proporcional à quantidade de luz incidente na bateria. Obviamente, essa câmera produzirá uma imagem em preto e branco. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para processar os resultados da verificação, usando o QT, foi implementado um programa com uma interface simples. (Lições sobre como implementar a comunicação entre Arduino e Qt podem ser facilmente obtidas no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">youtube</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">O programa consiste em um par de botões para controle manual de servos e no campo QGraphicsScene, onde pixels quadrados são desenhados, cuja cor depende da magnitude do sinal em um determinado ponto. </font><font style="vertical-align: inherit;">O uso é simples - primeiro, as unidades são guiadas manualmente para o ponto superior esquerdo da imagem futura, após o que é realizada uma verificação automática da área durante a qual a imagem é construída. </font><font style="vertical-align: inherit;">Aqui está o que saiu de tudo isso: </font></font><br>
<img src="https://habrastorage.org/files/493/a25/5f3/493a255f374f439fbbd6f865d9a2ac02.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que é representado nesta visualização? </font><font style="vertical-align: inherit;">Obviamente, este é o assunto mais óbvio para fotografar se sua câmera for uma bateria solar - este é o sol.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, o sinal da bateria é muito fraco para receber imagens adequadas na iluminação da sala, porque foi substituído por um fotorresistor, e as lentes da lanterna deram lugar a metade dos binóculos quebrados do teatro. </font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagrama de fiação</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/a6b/680/417/a6b680417a6347d7a95ca8e3af23f370.jpg"><br>
</div></div><br>
<img src="https://habrastorage.org/files/62b/8c6/b07/62b8c6b073e64fd88417b2a0cc3b667a.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa criação acabou sendo mais bem-sucedida e já era possível tirar fotografias mais ou menos reconhecíveis: </font><font style="vertical-align: inherit;">
máquina de </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lustre </font></font><br>
<img src="https://habrastorage.org/files/3ed/a70/796/3eda7079642044c08f4c4660df7a2d20.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na estrada </font></font><br>
<img src="https://habrastorage.org/files/58f/df4/483/58fdf44832be41a489363f0b980e84e6.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vista da janela </font></font><br>
<img src="https://habrastorage.org/files/d27/027/9ff/d270279ff97b44259b0675db5fc82521.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E até nuvens no céu </font></font><br>
<img src="https://habrastorage.org/files/7c0/c57/97f/7c0c5797fc80420299e53b22e8fa02eb.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tendo satisfeito com esse resultado, decidi que era hora de finalmente fazer um monitor de rádio completo, substituindo o fotorresistor por uma antena direcional. </font><font style="vertical-align: inherit;">O alcance mais adequado para isso é o microondas, uma vez que uma antena direcional não ocupa muito espaço e, hoje em dia, existem muitos dispositivos que emitem cuidadosamente nesse alcance.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No começo, eu decidi usar uma antena de buzina, que está nos detectores de radar de carros (eles geralmente funcionam na faixa de 10,525 GHz ou 24,15 GHz). Tentativas de isolar um sinal analógico proporcional ao valor da radiação detectada do circuito de um detector desse tipo não tiveram êxito, possivelmente devido à falta de meu conhecimento e possivelmente porque não existe, pois funciona pelo princípio da comparação. (Olá aos irmãos chineses que reuniram esse milagre). É claro que eu queria puxar a própria antena e construir algo próprio, mas não comecei a quebrar um bom dispositivo para isso.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda coisa que me veio à mente foi construir um detector de campo de acordo com um dos esquemas encontrados em abundância em portais de rádio amador e conectar uma antena direcional caseira a ele, por exemplo, o muito popular e bastante simples de produzir Harchenko biquadrat. Mas, como se viu, o elemento mais importante - o diodo detector de microondas é muito difícil de encontrar, fácil de perder e geralmente custa muito, então eu tive que procurar a peça certa por um longo tempo e com dificuldade. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de algum tempo, consegui obter um diodo detector de germânio nos tempos soviéticos e montar o seguinte circuito: </font></font><br>
<img src="https://habrastorage.org/files/938/cc7/d9c/938cc7d9c7f541738e97e24b7c82bd25.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O dispositivo resultante funcionou com confiança, mas a uma distância muito curta, em algum lugar a 5 a 10 cm de um telefone celular que atua como fonte de radiação. Obviamente, isso não foi suficiente para a tarefa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de todas essas provações, finalmente recebi o módulo ESP8266, que pode exibir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSSI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (indicador do nível de sinal WiFi recebido) dos pontos de acesso encontrados. </font><font style="vertical-align: inherit;">Para fazer isso, use o comando AT + CWLAP no firmware padrão do módulo. </font><font style="vertical-align: inherit;">Decidi aplicar esse recurso, juntamente com a antena de biquadrat caseira, dirigida por WiFi, mencionada anteriormente. </font><font style="vertical-align: inherit;">Assim, esse milagre da tecnologia apareceu:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diagrama de fiação</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/5e6/608/d66/5e6608d66dff4b60bb256fdbe9ed6ddb.jpg"></div></div><br>
<img src="https://habrastorage.org/files/193/2df/f2a/1932dff2a29247f682269bd2ddfa769b.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O próprio ESP8266 é montado na parte traseira da antena e está bem protegido com chapas de cobre. Os dígitos luminosos mostram a tensão na saída do conversor DC-DC pulsado, que reduz 12V da fonte de alimentação para 3,3V, necessária para o módulo funcionar (é muito voraz, portanto, alimentá-lo do Arduino é uma operação instável). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Arduino ainda gerencia servo drives e também envia comandos AT para o ESP8266 usando a biblioteca SoftwareSerial. Um dos pontos difíceis - em vez das bibliotecas padrão SoftwareSerial e Servo, tive que mudar para suas contrapartes, pois as originais conflitam quando usadas simultaneamente.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, você pode ouvir críticas de que o Arduino é um elemento extra aqui, já que o próprio ESP8266 pode lidar com essa funcionalidade. </font><font style="vertical-align: inherit;">Mas aconteceu historicamente que, durante a criação do dispositivo, eu inicialmente foquei no Arduino como o elo central do dispositivo final, e o ESP8266 desempenha o papel de um tipo de sensor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O programa QT, escrito para a "câmera solar", sofreu um refinamento significativo.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">versão final do programa</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/193/444/1da/1934441da66842f8b728bb6d22fcf1cc.jpg"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante a varredura da área, para cada ponto de acesso encontrado, é criada uma matriz de valores de sinal, que permite ver como diferentes roteadores WiFi “brilham” no final da varredura e até tentar estimar sua localização aproximada. Quanto mais forte o sinal em um ponto específico, mais brilhante é a cor azul do pixel correspondente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, finalmente, colocando o dispositivo em diferentes partes da minha casa, obtive as seguintes imagens. Felizmente, existem muitas redes wifi em minha casa e, com uma antena direcional semelhante, você pode capturar até mesmo redes muito remotas. </font></font><br>
<img src="https://habrastorage.org/files/8a5/445/7f7/8a54457f77c246b289f1376f8a4add41.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peça de sofá e carpete. Se você prestar atenção, é obtida uma imagem de alta qualidade em comparação com as outras no ponto “SkyNet” - este é o meu roteador doméstico. Ele é o mais próximo do local da filmagem, que aparentemente desempenha um papel importante no processo.</font></font><br>
<img src="https://habrastorage.org/files/0da/39e/051/0da39e0513f54dbaa7e6c35c6508baec.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lustre novamente. </font><font style="vertical-align: inherit;">Os sinais de algumas redes não são refletidos no teto ou no lustre. </font><font style="vertical-align: inherit;">Provavelmente, com base nesses sinais, você pode tentar determinar a localização física do transmissor. </font></font><br>
<img src="https://habrastorage.org/files/6e6/adf/0f8/6e6adf0f85984c8097da5bbb18049ee3.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma banheira cheia de água. </font><font style="vertical-align: inherit;">Como todos sabem, as ondas de rádio sob a água são pouco transmitidas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale ressaltar que as fotos na faixa visível correspondem apenas aproximadamente à área digitalizada. </font><font style="vertical-align: inherit;">Também é necessário levar em consideração que durante a operação a antena descreve de alguma forma o hemisfério, e isso também afeta o resultado. </font><font style="vertical-align: inherit;">A resolução, em princípio, é limitada apenas pelo curso da antena e pelo tempo necessário para circular a área inteira. </font><font style="vertical-align: inherit;">Além disso, a obtenção de dados para cada pixel requer 4-5 segundos. </font><font style="vertical-align: inherit;">Gostaria de obter imagens menos desfocadas, mas isso requer uma antena com um padrão de radiação mais estreito. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Códigos-fonte, incluindo um esboço para o Arduino</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt392555/">https://habr.com/ru/post/pt392555/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt392545/index.html">IBM Watson analisou os personagens de "Star Wars", descrevendo os personagens principais</a></li>
<li><a href="../pt392547/index.html">As brânquias artificiais permitirão que o mergulho fique em casa?</a></li>
<li><a href="../pt392549/index.html">Dê ao astronauta e herói do astronauta e herói</a></li>
<li><a href="../pt392551/index.html">Análise ao bb-mobile Techno W8.0 3G (Q800AY): tablet econômico de 8 polegadas no Windows 10 com um modem 3G</a></li>
<li><a href="../pt392553/index.html">Cientistas lançam projeto para prever expectativa de vida</a></li>
<li><a href="../pt392559/index.html">Laboratório Digital NR05: Fazendo um bloqueio de código</a></li>
<li><a href="../pt392561/index.html">HMI FLProg + Nextion. Lição 1</a></li>
<li><a href="../pt392565/index.html">Possibilidades de usar a tecnologia de vídeo em 360 ° para eventos culturais</a></li>
<li><a href="../pt392573/index.html">O WhatsApp introduziu a criptografia completa de todos os dados para seus bilhões de usuários</a></li>
<li><a href="../pt392575/index.html">32 varas de bétula ou sistemas de ignição de motores de foguetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>