<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>◽️ 👨🏿 🤙 Arguments de fonction en tant que constantes de bits en PHP 😶 ↪️ 👉🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je vous présente la traduction d'un article de Liam Hammett : Bitmask Constant Arguments en PHP . 

 PHP contient de nombreuses fonctio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arguments de fonction en tant que constantes de bits en PHP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423257/"><blockquote>  <em>Bonjour, Habr!</em>  <em>Je vous présente la traduction d'un article de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Liam Hammett</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bitmask Constant Arguments en PHP</a> .</em> </blockquote><p>  PHP contient de nombreuses fonctions standard qui acceptent les arguments booléens sous la forme de constantes intégrées avec des nombres binaires. <br>  Ces valeurs sont combinées en un seul argument de la fonction afin de transférer plusieurs drapeaux booléens de manière compacte. </p><br><p>  Ils peuvent fonctionner un peu différemment de ce que beaucoup de gens imaginent et utilisent dans leur code, donc je suggère de considérer comment cela fonctionne vraiment. <a name="habracut"></a></p><br><hr><br><h1 id="kak-eto-ispolzuetsya-v-funkciyahphp">  Comment il est utilisé dans les fonctions PHP </h1><br><p> PHP 7.2, y compris les extensions, contient plus de 1800+ constantes prédéfinies, et certaines d'entre elles sont utilisées comme arguments pour les fonctions. <br>  Un exemple d'une telle application est une nouvelle option en PHP 7.3, qui vous permet de <code>json_encode</code> une exception de la fonction <code>json_encode</code> pour les erreurs de conversion. </p><br><pre> <code class="php hljs">json_encode($value, JSON_THROW_ON_ERROR);</code> </pre> <br><p>  Utilisation <code>|</code>  (ou) au niveau du bit, plusieurs arguments de fonction fonctionnent comme un seul.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Un exemple</a> tiré de la documentation PHP: </p><br><pre> <code class="php hljs">json_encode($value, JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_QUOT | JSON_HEX_AMP | JSON_UNESCAPED_UNICODE);</code> </pre> <br><p>  Rien du tout. </p><br><h1 id="no-vse-taki-kak-zhe-eto-rabotaet">  Mais comment ça marche? </h1><br><p>  L'application d'opérations au niveau du bit pour obtenir le même effet dans le monde des fonctions définies par l'utilisateur est en fait simple, mais elle nécessite au moins une connaissance de base de ce que sont les bits et de la façon dont les opérations au niveau du bit fonctionnent en PHP. </p><br><blockquote>  Les entiers peuvent être spécifiés dans un système de nombres décimal (base 10), hexadécimal (base 16), octal (base 8) ou binaire (base 2).  [...] <br>  Pour écrire en notation binaire, vous devez mettre avant le nombre 0b. <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">php.net</a> </blockquote><p>  Exemples de constantes avec un ensemble différent de nombres binaires: </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> A = <span class="hljs-number"><span class="hljs-number">0b0001</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 1 const B = 0b0010; // 2 const C = 0b0100; // 4 const D = 0b1000; // 8</span></span></code> </pre> <br><p>  Faites attention à l'exemple et à la séquence des nombres.  Chaque valeur binaire représente une valeur deux fois plus élevée pour chaque zéro à la fin.  Les zéros compris entre 0b et 1 sont facultatifs, mais peuvent aider à aligner le code source. </p><br><p>  Heureusement, nous devons comprendre comment ne fonctionnent que deux opérations au niveau du bit. </p><br><h1 id="pobitovoe-ilior">  OU au niveau du bit </h1><br><p>  Ne confondez pas l'opérateur <code>|</code>  ( <em>"OR" au niveau du bit</em> ) avec l'opérateur fréquemment utilisé <code>||</code>  ( <em>"OR" logique</em> ), qui se trouve généralement dans les <code>if else</code> . <br>  Le «OU» au niveau du bit est une opération binaire dont l'action équivaut à appliquer un <em>«OU» logique</em> à chaque paire de bits situés aux mêmes positions dans les représentations binaires des opérandes.  En d'autres termes, si les deux bits correspondants des opérandes sont 0, le bit binaire du résultat est 0;  si au moins un bit de la paire est 1, le bit binaire du résultat est 1. </p><br><p>  Exemple d'opération bit à bit "OU": </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> A = <span class="hljs-number"><span class="hljs-number">0b0001</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> B = <span class="hljs-number"><span class="hljs-number">0b0010</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> C = <span class="hljs-number"><span class="hljs-number">0b0100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> D = <span class="hljs-number"><span class="hljs-number">0b1000</span></span>; A | B === <span class="hljs-number"><span class="hljs-number">0b0011</span></span>; A | C | D === <span class="hljs-number"><span class="hljs-number">0b1101</span></span>;</code> </pre> <br><h1 id="pobitovoe-iand">  ET au niveau du bit (ET) </h1><br><p>  De même, l'opérateur <code>&amp;</code> ( <em>AND au niveau du bit</em> ) ne doit pas être confondu avec l'opérateur <code>&amp;&amp;</code> fréquemment utilisé ( <em>AND logique</em> ). <br>  Un ET au niveau du bit est une opération binaire dont l'action équivaut à appliquer un <em>ET logique</em> à chaque paire de bits situés aux mêmes positions dans les représentations binaires des opérandes.  En d'autres termes, si les deux bits correspondants des opérandes sont à 1, le bit binaire résultant est à 1;  si au moins un bit de la paire est 0, le bit binaire résultant est 0. </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> A = <span class="hljs-number"><span class="hljs-number">0b0001</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> B = <span class="hljs-number"><span class="hljs-number">0b0010</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> C = <span class="hljs-number"><span class="hljs-number">0b0100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> D = <span class="hljs-number"><span class="hljs-number">0b1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> VALUE = <span class="hljs-number"><span class="hljs-number">0b1010</span></span>; A &amp; B === <span class="hljs-number"><span class="hljs-number">0b0000</span></span>; <span class="hljs-comment"><span class="hljs-comment">//      A  B A &amp; C &amp; D === 0b0000; //      A, B  C A &amp; A === 0b0001; //      A  A &amp; VALUE === 0b0000; //      A  VALUE B &amp; VALUE === 0b0010; //  1    B,    VALUE</span></span></code> </pre> <br><h1 id="mozhet-li-chislo-imet-logicheskiy-tip-boolean">  Un nombre peut-il avoir un booléen? </h1><br><p>  Il est à noter qu'en PHP il y a le concept de " <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">manipulation de</a></em> type" ( <strong>jonglage de type</strong> ).  Dans le langage des non-experts, cela signifie qu'il (PHP) tentera automatiquement de convertir les données d'un type à un autre, si nécessaire. <br>  Si vous comprenez comment ces transformations se produisent, cela peut être un outil utile. <br>  Par exemple, nous savons que le nombre <code>0</code> agit comme <code>false</code> lors de la conversion en booléen, tandis que tous les autres nombres seront <code>true</code> .  Rappelez-vous que ces valeurs binaires avec lesquelles nous travaillons sont en fait des entiers? </p><br><h1 id="podvedem-itogi">  Pour résumer! </h1><br><p>  Maintenant, nous pouvons combiner ces connaissances pour créer une construction if, le code dans lequel sera exécuté uniquement si le résultat de l'opération au niveau du bit entre les nombres n'est pas <code>0b0000</code> (ou <code>0</code> , qui est converti en <code>false</code> ). </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> A = <span class="hljs-number"><span class="hljs-number">0b0001</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> B = <span class="hljs-number"><span class="hljs-number">0b0010</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arg = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($arg &amp; A) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'A'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($arg &amp; B) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'B'</span></span>; } } f(); <span class="hljs-comment"><span class="hljs-comment">// nothing f(A); // 'A' f(B); // 'B' f(A | B); // 'AB'</span></span></code> </pre> <br><p>  D'autres fonctions PHP intégrées (comme <code>json_encode</code> ) fonctionnent de la même manière. </p><br><h1 id="stoit-li-onotogo">  Est-ce que ça vaut le coup? </h1><br><p>  Vous souhaitez peut-être maintenant appliquer cette approche pour les fonctions avec un grand nombre d'arguments qui participent aux constructions conditionnelles, mais il existe un certain nombre d'inconvénients dans le traitement des indicateurs de fonction au niveau du bit: </p><br><ul><li>  Vous ne pouvez pas transmettre de valeurs non booléennes via un argument. </li><li>  Il n'existe aucun moyen standard de documenter les arguments à l'aide de docblocks. </li><li>  Vous perdez des conseils généraux et le support de la plupart des IDE. </li><li>  Au lieu de cela, vous pouvez passer un tableau associatif comme argument pour pouvoir définir des valeurs non nulles (ou même une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">classe</a> ). </li><li>  Il y a de bonnes raisons pour lesquelles vous devriez éviter d'utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des «indicateurs de fonction» logiques comme arguments</a> et utiliser à la place une autre fonction ou méthode pour une fonctionnalité modifiable. </li></ul><br><p>  Cependant, vous savez maintenant comment procéder. </p><br><hr><br><p>  La lecture d'une longue liste de définitions de constantes peut être verbeuse et difficile, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voici donc une fonction auxiliaire qui</a> simplifie leur définition. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr423257/">https://habr.com/ru/post/fr423257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr423243/index.html">Méthode de moyenne vectorielle pour mesurer la direction du vent</a></li>
<li><a href="../fr423247/index.html">Qu'est-ce que l'intelligence?</a></li>
<li><a href="../fr423249/index.html">Rust 1.29 Release</a></li>
<li><a href="../fr423251/index.html">Mon compte de Megafail</a></li>
<li><a href="../fr423253/index.html">Plateforme CAO domestique nanoCAD Plus 10: un complexe universel pour ceux qui conçoivent</a></li>
<li><a href="../fr423259/index.html">7. Check Point au maximum. Sandboxing. Conclusion</a></li>
<li><a href="../fr423261/index.html">Analogues dans la "Nomenclature". Une autre façon d'économiser judicieusement. 2e partie</a></li>
<li><a href="../fr423263/index.html">Conférence PROSTOR sur le stockage: d'une réunion de partenariat à un événement technologique international</a></li>
<li><a href="../fr423265/index.html">L'UE accepte la directive sur le droit d'auteur</a></li>
<li><a href="../fr423267/index.html">Propreté dans un atelier de geek. Partie 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>