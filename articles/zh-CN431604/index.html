<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ² ğŸ¥© ğŸ‘¨ğŸ¾â€âœˆï¸ ä½¿ç”¨åŸºæœ¬è½¯ä»¶åŒ…åœ¨Goä¸­è¿›è¡Œæœ¬åœ°åŒ– ğŸ‘ğŸ¾ ğŸ‘ŠğŸ¼ ğŸ’¹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åˆ›å»ºä¸€ä¸ªå¥½çš„åº”ç”¨ç¨‹åºå¹¶ä¸å®¹æ˜“ã€‚ æ— è®ºæ‚¨ç¼–å†™ä»€ä¹ˆç‹¬ç‰¹è€Œæœ‰ç”¨çš„åº”ç”¨ç¨‹åºï¼Œå¦‚æœç”¨æˆ·ä¸å–œæ¬¢å®ƒï¼Œé‚£ä¹ˆå°±åƒä»–ä»¬æ‰€è¯´çš„é‚£æ ·ï¼Œæ‚¨å°±ä¼šé‡åˆ°å¾ˆå¤§çš„é—®é¢˜ã€‚ å¤§å¤šæ•°äººä¸å–œæ¬¢å¹¶å“è·‘ä»–ä»¬ä¸äº†è§£çš„ä¸€åˆ‡ã€‚ é€šå¸¸ï¼Œç”¨æˆ·ç•Œé¢å’Œå­—æ¯æ˜¯åº”ç”¨ç¨‹åºçš„å†°å±±ä¸€è§’ï¼Œç”¨æˆ·å¯ä»¥æ®æ­¤å¯¹å…¶è¿›è¡Œè¯„ä¼°ã€‚ å› æ­¤ï¼Œç”¨æˆ·çœ‹åˆ°çš„æ‰€æœ‰å†…å®¹çš„æœ¬åœ°åŒ–éå¸¸é‡è¦ã€‚ 


 è®°å¾—...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨åŸºæœ¬è½¯ä»¶åŒ…åœ¨Goä¸­è¿›è¡Œæœ¬åœ°åŒ–</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431604/"><p> åˆ›å»ºä¸€ä¸ªå¥½çš„åº”ç”¨ç¨‹åºå¹¶ä¸å®¹æ˜“ã€‚ æ— è®ºæ‚¨ç¼–å†™ä»€ä¹ˆç‹¬ç‰¹è€Œæœ‰ç”¨çš„åº”ç”¨ç¨‹åºï¼Œå¦‚æœç”¨æˆ·ä¸å–œæ¬¢å®ƒï¼Œé‚£ä¹ˆå°±åƒä»–ä»¬æ‰€è¯´çš„é‚£æ ·ï¼Œæ‚¨å°±ä¼šé‡åˆ°å¾ˆå¤§çš„é—®é¢˜ã€‚ å¤§å¤šæ•°äººä¸å–œæ¬¢å¹¶å“è·‘ä»–ä»¬ä¸äº†è§£çš„ä¸€åˆ‡ã€‚ é€šå¸¸ï¼Œç”¨æˆ·ç•Œé¢å’Œå­—æ¯æ˜¯åº”ç”¨ç¨‹åºçš„å†°å±±ä¸€è§’ï¼Œç”¨æˆ·å¯ä»¥æ®æ­¤å¯¹å…¶è¿›è¡Œè¯„ä¼°ã€‚ å› æ­¤ï¼Œç”¨æˆ·çœ‹åˆ°çš„æ‰€æœ‰å†…å®¹çš„æœ¬åœ°åŒ–éå¸¸é‡è¦ã€‚ </p><br><p> è®°å¾—åå¹´å‰ï¼Œäº’è”ç½‘åˆšåˆšå¼€å§‹è¿›å…¥å¤§ä¼—ç”Ÿæ´»ï¼Œå¦‚ä»Šè®¸å¤šITå·¨å¤´æ­£å¤„äºèµ·æ­¥é˜¶æ®µï¼Œåªæœ‰å‡ ååå‘˜å·¥ï¼Œè¿™æ˜¯æŒ‰é¡ºåºå‘ç”¨æˆ·å‘é€è‹±æ–‡å­—æ¯çš„ã€‚ ç”¨æˆ·å¯¹æ­¤è¡¨ç¤ºåŒæƒ…ã€‚ å¦‚ä»Šï¼Œå½“Internetä¸Šçš„æ‰€æœ‰å†…å®¹éƒ½å­˜åœ¨å¹¶ä¸”æ‚¨çš„é¢å¤´ä¸å¿…è·¨è¶Šä¸ƒä¸ªèŒƒå›´ï¼Œæ¥å—é«˜ç­‰æ•™è‚²æˆ–ä¸æ‡‚è‹±è¯­æ—¶ï¼Œä¸æ”¯æŒæœ¬åœ°åŒ–åº”ç”¨ç¨‹åºè¢«è®¤ä¸ºæ˜¯ä¸å¥½çš„å½¢å¼ã€‚ é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œåœ¨æˆ‘ä»¬å…¬å¸ä¸­ï¼Œæ‰€æœ‰UIæ–‡æœ¬çš„æœ¬åœ°åŒ–å·²ç»ä»¥20ç§è¯­è¨€è¿›è¡Œï¼Œå¹¶ä¸”æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ä¹Ÿåœ¨ä¸æ–­å¢é•¿ã€‚ </p><br><p>åœ¨Goè¯­è¨€ä¸­ï¼Œå°±åƒä¸€ç§ç›¸å½“å¹´è½»çš„è¯­è¨€ä¸€æ ·ï¼Œæ‰€æœ‰ç°ä»£Webå¼€å‘è¶‹åŠ¿éƒ½æ˜¯åœ¨åŸºæœ¬è½¯ä»¶åŒ…çš„çº§åˆ«ä¸Šå®ç°çš„ï¼Œä¸éœ€è¦é¢å¤–çš„â€œæ‰‹é¼“è·³èˆâ€ã€‚  ï¼ˆæˆ‘å‡ å¹´å‰å¼€å§‹å­¦ä¹ Goï¼Œä½†æ˜¯æˆ‘ä»ç„¶è®°å¾—å­¦ä¹ è¿™ç§è¯­è¨€åçš„ç¬¬ä¸€å¤©å°±æ„Ÿå—åˆ°äº†â€œå‘ç°çš„è¶…çº§å¤§å›½â€çš„æ„Ÿè§‰ã€‚ç°åœ¨çœ‹æ¥ï¼Œæˆ‘åªè¦å†™å‡ è¡Œå°±å¯ä»¥å®ç°ä»»ä½•ä»»åŠ¡ã€‚ï¼‰ </p><br><p> å½“ç„¶ï¼Œä»–ä»¬ä¹Ÿæ²¡æœ‰ç»•è¿‡Goä¸­çš„æœ¬åœ°åŒ–ã€‚ ä½¿ç”¨ä»¥ä¸‹åŸºæœ¬è½¯ä»¶åŒ…å®é™…ä¸Šå¯ä»¥â€œå¼€ç®±å³ç”¨â€åœ°è¿›è¡Œæœ¬åœ°åŒ–ï¼š <b>golang.org/x/text/languageï¼Œgolang.org/x/text/message</b>å’Œ<b>golang.org/x/text/feature/plural</b> ã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä½¿ç”¨è¿™äº›åŒ…åœ¨åŠå°æ—¶å†…åœ¨Goä¸­æœ‰å¤šä¹ˆå®¹æ˜“ï¼Œæ‚¨å¯ä»¥å®ç°è¯¸å¦‚å°†å­—æ¯æœ¬åœ°åŒ–è¿™æ ·çš„ç®€å•ä»»åŠ¡ã€‚ </p><a name="habracut"></a><br><p> å±•æœ›æœªæ¥ï¼Œæˆ‘è¦è¯´çš„æ˜¯ï¼Œæœ¬æ–‡çš„ä¸»è¦ç›®çš„æ˜¯å±•ç¤ºGoçš„å¼ºå¤§åŠŸèƒ½å’Œç¾ä¸½ä¹‹å¤„ï¼Œå¹¶é‡ç‚¹ä»‹ç»ç”¨äºæœ¬åœ°åŒ–çš„æ¶ˆæ¯åŒ…çš„åŸºæœ¬åŠŸèƒ½ã€‚ å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ç”Ÿäº§åº”ç”¨ç¨‹åºçš„è§£å†³æ–¹æ¡ˆï¼Œåˆ™å¯èƒ½éœ€è¦ä¸€ä¸ªæ›´å¥½<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„ç°æˆåº“</a> ã€‚  <i>go-i18n</i>çš„ä¼˜ç‚¹æ˜¯githubä¸Šæœ‰å¾ˆå¤šæ˜æ˜Ÿï¼ˆå…¶ä¸­æœ‰æˆ‘çš„æ˜æ˜Ÿï¼‰å’Œå¾ˆå¤§çš„çµæ´»æ€§ã€‚ ä½†æ˜¯ï¼Œæœ‰åå¯¹ä½¿ç”¨å®ƒçš„è¯´æ³•ï¼šæ‚¨å¯èƒ½ä¸éœ€è¦æ‰€æœ‰çš„çµæ´»æ€§å’ŒåŠŸèƒ½ï¼› å½“ä¸€åˆ‡éƒ½å·²ç»ä»¥è¯­è¨€æœ¬èº«å®ç°æ—¶ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤–éƒ¨åº“ï¼› å¦‚æœæ‚¨å·²ç»æ‹¥æœ‰è‡ªå·±çš„å…·æœ‰è‡ªå·±æ ¼å¼çš„ç¿»è¯‘ç³»ç»Ÿï¼Œåˆ™è¯¥åº“â€œåŸæ ·â€å¾ˆå¯èƒ½æ— æ³•ä½¿ç”¨ï¼Œå¹¶ä¸”æ— è®ºå¦‚ä½•æ‚¨éƒ½å¿…é¡»å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼› æœ€åï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å¹¶ä¸åƒå¦‚ä½•è‡ªå·±åšä¸€æ ·æœ‰è¶£å’Œæœ‰ç›Šã€‚ </p><br><p> æˆ‘ä»¬ä¸ºæ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡åˆ¶å®šåŸºæœ¬è¦æ±‚ã€‚ æœ‰ï¼šaï¼‰yamlæ ¼å¼çš„æ ‡ç­¾ï¼š <i>â€œ label_nameï¼šç¿»è¯‘æ–‡æœ¬â€</i> ï¼› åœ¨æ–‡ä»¶åä¸­æŒ‡å®šç¿»è¯‘è¯­è¨€ï¼Œä¾‹å¦‚ru.ymlï¼›  bï¼‰htmlä¸­çš„ç”µå­é‚®ä»¶æ¨¡æ¿ã€‚ æ ¹æ®è¾“å…¥å‚æ•°ï¼šè¯­è¨€ç¯å¢ƒå’Œæ•°æ®æ•°ç»„ï¼Œæœ‰å¿…è¦ç”Ÿæˆæ¶ˆæ¯çš„æœ¬åœ°åŒ–æ–‡æœ¬ã€‚ </p><br><p> è®©æˆ‘ä»¬å¼€å§‹å§...ä½†æ˜¯ï¼Œé¦–å…ˆï¼Œå…³äºæ¶ˆæ¯åŒ…çš„æ›´å¤šä¿¡æ¯ï¼ˆgolang.org/x/text/messageï¼‰ã€‚ å®ƒæ—¨åœ¨æ ¼å¼åŒ–æœ¬åœ°åŒ–å­—ç¬¦ä¸²çš„è¾“å‡ºã€‚  Messageå®ç°äº†æ ‡å‡†fmtåŒ…çš„æ¥å£ï¼Œå¯ä»¥æ›¿æ¢å®ƒã€‚ ç”¨æ³•ç¤ºä¾‹ï¼š <br><br></p><pre><code class="go hljs">message.SetString(language.Russian, <span class="hljs-string"><span class="hljs-string">"toxic"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>) message.SetString(language.Japanese, <span class="hljs-string"><span class="hljs-string">"toxic"</span></span>, <span class="hljs-string"><span class="hljs-string">"æ¯’æ€§"</span></span>) message.NewPrinter(language.Russian).Println(â€œtoxicâ€) message.NewPrinter(language.Japanese).Println(â€œtoxicâ€) <span class="hljs-comment"><span class="hljs-comment">//: // //æ¯’æ€§</span></span></code> </pre> <br> ä¸ºäº†ä½¿åŒ…è£…â€œçœ‹åˆ°â€æ ‡ç­¾ï¼Œå¿…é¡»é¦–å…ˆå£°æ˜å®ƒã€‚ åœ¨ç¤ºä¾‹ä¸­ï¼ŒSetStringå‡½æ•°ç”¨äºæ­¤ç›®çš„ã€‚ æ¥ä¸‹æ¥ï¼Œå°†ä¸ºæ‰€é€‰è¯­è¨€åˆ›å»ºæ‰“å°æœºï¼Œå¹¶ç›´æ¥æ˜¾ç¤ºæœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²ã€‚ <br><p> ä¸ºäº†è§£å†³æˆ‘ä»¬çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆå¸¦æœ‰æ‰€æœ‰æ ‡ç­¾çš„go-fileï¼Œä½†è¿™ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæ·»åŠ æ–°æ ‡ç­¾æ—¶ï¼Œæ‚¨æ¯æ¬¡éƒ½å¿…é¡»é‡æ–°ç”Ÿæˆè¯¥æ–‡ä»¶å¹¶é‡æ–°æ„å»ºåº”ç”¨ç¨‹åºã€‚ å‘Šè¯‰æˆ‘ä»¬æœ‰å…³æ ‡ç­¾çš„æ¶ˆæ¯çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨è¯å…¸ã€‚ å­—å…¸æ˜¯ä¸€ç§å®ç°æ ‡ç­¾æœç´¢æ¥å£<i>Lookupï¼ˆé”®å­—ç¬¦ä¸²ï¼‰ï¼ˆæ•°æ®å­—ç¬¦ä¸²ï¼Œç¡®å®šçš„å¸ƒå°”å€¼ï¼‰çš„ç»“æ„</i> ã€‚ <br><br> å­—å…¸é€‰é¡¹é€‚åˆæˆ‘ä»¬ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰å­—å…¸çš„ç»“æ„å¹¶ä¸ºå…¶å®ç°Lookupæ¥å£ï¼š <br><br></p><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> dictionary <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Data <span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(d *dictionary)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Lookup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, ok </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> value, ok := d.Data[key]; ok { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"\x02"</span></span> + value, <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br><p> å°†yamlæ–‡ä»¶ä¸­çš„æ‰€æœ‰æ ‡ç­¾åˆ†æ•£åˆ°å­—å…¸çš„é›†åˆä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ª<i>åœ°å›¾[lang] *å­—å…¸åœ°å›¾</i> ï¼Œå…¶ä¸­<i>lang</i>æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">BCP47</a>æ ¼å¼çš„è¯­è¨€æ ‡ç­¾ã€‚ <br><br></p><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseYAMLDict</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">map</span></span></span></span><span class="hljs-function"><span class="hljs-params">[</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">]catalog.Dictionary, error)</span></span></span></span> { dir := <span class="hljs-string"><span class="hljs-string">"./translations"</span></span> files, err := ioutil.ReadDir(dir) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, err } translations := <span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]catalog.Dictionary{} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, f := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> files { yamlFile, err := ioutil.ReadFile(dir + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + f.Name()) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, err } data := <span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>{} err = yaml.Unmarshal(yamlFile, &amp;data) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, err } lang := strings.Split(f.Name(), <span class="hljs-string"><span class="hljs-string">"."</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] translations[lang] = &amp;dictionary{Data: data} } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> translations, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre><br> æˆ‘ä»¬å°†å­—å…¸é›†åˆå®‰è£…åœ¨initå‡½æ•°ä¸­ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶æ¶ˆæ¯åŒ…å¯ä»¥ä½¿ç”¨å­—å…¸ã€‚ <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { dict, err := parseYAMLDict() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">panic</span></span>(err) } cat, err := catalog.NewFromMap(dict) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">panic</span></span>(err) } message.DefaultCatalog = cat }</code> </pre><br><p> å› æ­¤ï¼Œç›®å‰ï¼Œæˆ‘ä»¬å·²ç»åœ¨ç¨‹åºä¸­ä»»ä½•ä½ç½®å®ç°äº†æ–‡ä»¶ä¸­æ ‡ç­¾æœ¬åœ°åŒ–çš„å¯ç”¨æ€§ï¼š <br><br></p><pre> <code class="go hljs">message.NewPrinter(language.Russian).Println(â€œlabel_nameâ€)</code> </pre> <br><p> ç°åœ¨è¯¥ç»§ç»­æ‰§è¡Œä»»åŠ¡çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œå¹¶åœ¨ç”µå­é‚®ä»¶æ¨¡æ¿ä¸­æ›¿æ¢æˆ‘ä»¬çš„æœ¬åœ°åŒ–æ ‡ç­¾ã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªç®€å•çš„æ¶ˆæ¯-æ³¨å†Œç”¨æˆ·æ—¶çš„æ¬¢è¿ä¿¡ï¼š <br>  <i>ä½ å¥½ï¼Œæ¯”å°”Â·å²å¯†æ–¯ï¼</i> </p><br><p> ä¸ºäº†è¿›è¡Œè§£æï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å¦ä¸€ä¸ªæ ‡å‡†åŒ…<b>html / template</b> ã€‚ åœ¨æ¨¡æ¿ä¸­è§£ææ¨¡æ¿æ—¶ï¼Œå¯ä»¥é€šè¿‡<i>.Funcsï¼ˆï¼‰</i>è®¾ç½®åŠŸèƒ½ï¼š <br></p><pre> <code class="go hljs">template.New(tplName).Funcs(fmap).ParseFiles(tplName)</code> </pre> <br><p> å‘æ¨¡æ¿æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ç¿»è¯‘æ ‡ç­¾å¹¶æ›¿æ¢å…¶ä¸­çš„å˜é‡ï¼Œå¹¶å°†å…¶ç§°ä¸º<i>ç¿»è¯‘</i> ã€‚ æ¨¡æ¿è§£æä»£ç ï¼š <br><br></p><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">//  lang:=language.Russian //  tplName:=â€./templates/hello.htmlâ€ //   data := &amp;struct { Name string LastName string }{Name: "Bill", LastName: "Smith"} fmap := template.FuncMap{ //   "translate": message.NewPrinter(lang).Sprintf, } t, err := template.New(tplName).Funcs(fmap).ParseFiles(tplName) if err != nil { panic(err) } buf := bytes.NewBuffer([]byte{}) if err := t.Execute(buf, data); err != nil { panic(err) } fmt.Println(buf.String())</span></span></code> </pre><br> ç”Ÿæˆçš„ä¿¡å‡½æ¨¡æ¿./templates/hello.htmlï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>{{translate "hello_subject"}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> {{translate "hello_msg" .Name .LastName}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> ç”±äºåœ¨<i>ç¿»è¯‘ä¸­</i>æˆ‘ä»¬ä½¿ç”¨<i>Sprintf</i>å‡½æ•°è¿›è¡Œæœ¬åœ°åŒ–ï¼Œå› æ­¤å°†ä½¿ç”¨è¯¥å‡½æ•°çš„è¯­æ³•æ¥ç¼åˆ¶æ ‡ç­¾æ–‡æœ¬ä¸­çš„å˜é‡ã€‚ ä¾‹å¦‚ï¼Œ <i>ï¼…s</i>æ˜¯å­—ç¬¦ä¸²ï¼Œ <i>ï¼…d</i>æ˜¯æ•´æ•°ã€‚ <br> æ ‡è®°æ–‡ä»¶ <br> è‹±æ–‡ <br><br><pre> <code class="plaintext hljs">hello_subject: Greeting mail hello_msg: Hello, %s %s!</code> </pre><br>  ru.yml <br><br><pre> <code class="plaintext hljs">hello_subject:   hello_msg: , %s %s!</code> </pre><br><p> å°±æ­¤è€Œè¨€ï¼ŒåŸåˆ™ä¸Šå°±æ˜¯è¿™æ ·ï¼Œå­—æ¯çš„æœ¬åœ°åŒ–å·²å‡†å¤‡å°±ç»ªï¼ ä»…ç¼–å†™äº†å‡ åè¡Œä»£ç ï¼Œæˆ‘ä»¬å°±è·å¾—äº†å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¯ä»¥å°†æ•°åç§è¯­è¨€çš„ä»»ä½•å¤æ‚å­—æ¯æœ¬åœ°åŒ–ã€‚ </p><br><p> å¦‚æœæ‚¨å–œæ¬¢æ­¤ç¤ºâ€‹â€‹ä¾‹ï¼Œåˆ™å¯ä»¥ç»§ç»­è‡ªå·±å®ç°å¤æ•°å½¢å¼ï¼Œä½¿ç”¨æ ‡ç­¾ä¸­å˜é‡çš„å˜é‡åç§°ä»£æ›¿<i>ï¼…sï¼Œ</i>å¹¶åœ¨æ ‡ç­¾ä¸­ä½¿ç”¨å‡½æ•°ã€‚ æˆ‘æ•…æ„æ²¡æœ‰è¿™æ ·åšæ˜¯ä¸ºäº†ç»™æ‚¨çš„æƒ³è±¡ç©ºé—´ã€‚ </p><br><p> ç¤ºä¾‹ä¸­çš„ä»£ç æ˜¯ä¸“é—¨ä¸ºæ¼”ç¤ºæ¶ˆæ¯åŒ…çš„åŠŸèƒ½è€Œç¼–å†™çš„ï¼Œå¹¶ä¸å£°ç§°æ˜¯ç†æƒ³çš„ï¼›å®Œæ•´çš„ä»£ç æ¸…å•å¯åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">githubä¸Šæ‰¾åˆ°</a> ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN431604/">https://habr.com/ru/post/zh-CN431604/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN431590/index.html">è‹±å›½è¿‡æ—¶é£ç”µåœºçš„ç°ä»£åŒ–æ”¹é€ å°†ä½¿èƒ½æºå‘ç”µå¢åŠ 171ï¼…</a></li>
<li><a href="../zh-CN431596/index.html">Veeamå¤‡ä»½å’Œå¤åˆ¶è´Ÿè½½æµ‹è¯•</a></li>
<li><a href="../zh-CN431598/index.html">æˆ‘ä»¬å°†æ²¡æœ‰ç½‘å¡çš„å…¬å…±QEMUè™šæ‹Ÿæœºå¸¦å…¥Internetï¼Œå¹¶å°è¯•æŒ–æ˜</a></li>
<li><a href="../zh-CN431600/index.html">é€šè¿‡ç½‘ç»œç•Œé¢æé«˜IDS / NMSï¼šMikrotikå’ŒSuricata</a></li>
<li><a href="../zh-CN431602/index.html">ä¿„ç½—æ–¯å¼€å‘å•†åœ¨ä¼¦æ•¦å±•ç¤ºäº†è™šæ‹Ÿåº·å¤ç³»ç»Ÿ</a></li>
<li><a href="../zh-CN431608/index.html">ç¾å›½å…¬å¸DriveSaversæ˜¯ä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªä¸ºä¸ªäººæ¨å‡ºiPhoneé»‘å®¢æœåŠ¡çš„å…¬å¸</a></li>
<li><a href="../zh-CN431610/index.html">é¡¹ç›®ç»ç†Lifehacks</a></li>
<li><a href="../zh-CN431612/index.html">FPGAæ¿ä¸Šçš„éŸ³ä¹ç›’å’Œæ—‹è½¬ç¼–ç å™¨</a></li>
<li><a href="../zh-CN431614/index.html">åœ¨Kerasä¸Šä½¿ç”¨DCGANåˆ›ä½œè‰ºæœ¯</a></li>
<li><a href="../zh-CN431616/index.html">è‡ªå®šä¹‰CSSå±æ€§ç®€ä»‹</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>