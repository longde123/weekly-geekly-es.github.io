<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•§ üíì üî™ Une approche avanc√©e pour d√©tecter les limites en utilisant les parois des vaisseaux comme exemple üõ†Ô∏è üîò üôéüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Information int√©ressante 
 La figure ci-dessous montre une reconstruction tridimensionnelle du c≈ìur, obtenue √† la suite du travail d'un tomographe mod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Une approche avanc√©e pour d√©tecter les limites en utilisant les parois des vaisseaux comme exemple</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/inobitec/blog/441204/"><h2>  Information int√©ressante </h2><br>  La figure ci-dessous montre une reconstruction tridimensionnelle du c≈ìur, obtenue √† la suite du travail d'un tomographe moderne: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uy/7v/fc/uy7vfcx7nzqfq_kqcnmu7xhzipq.png"></div><br>  Pour l'√©chelle, l'√©paisseur du bulbe aortique est de 3,2 cm, pensez-y!  Cependant, lorsque les gens ont des probl√®mes cardiaques dus aux vaisseaux sanguins, alors, en r√®gle g√©n√©rale, nous ne parlons pas de si gros probl√®mes.  L'image montre que le c≈ìur est entour√© de petits vaisseaux, et certains d'entre eux se ramifient directement √† partir des grandes art√®res.  Ce sont les art√®res coronaires dites qui alimentent le c≈ìur directement avec du sang.  Si un r√©tr√©cissement de la lumi√®re (st√©nose) se produit en eux, par exemple, en raison de la formation de calcium, le flux sanguin diminue.  Lorsque la st√©nose est prononc√©e, une n√©crose tissulaire se produit, c'est-√†-dire une crise cardiaque.  Ensuite, je parlerai de notre approche pour calculer les limites des vaisseaux sanguins, ce qui vous permet en cons√©quence de trouver automatiquement le r√©tr√©cissement et de leur donner une estimation. <br><a name="habracut"></a><br>  Pour comprendre le mat√©riel, vous devez avoir une compr√©hension superficielle du volume, des voxels et de leurs intensit√©s.  Vous pouvez le d√©couvrir en lisant le d√©but de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet article</a> . <br><br>  Pour √©valuer le r√©tr√©cissement d'un vaisseau, nous devons conna√Ætre la lumi√®re du vaisseau ou sa fronti√®re interne.  Pour ce faire, d√©tectez au moins tout le calcium.  On retrouve √©galement la limite ext√©rieure, car elle permet d'estimer l'√©paisseur de paroi, ce qui est √©galement utile.  Pour commencer, examinons le sch√©ma complet de d√©tection des limites, puis nous analyserons chaque √©tape en d√©tail: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bl/cw/va/blcwvavrk6rpr7dncjp0ydgtxfo.png"></div><br><h2>  Tracer la ligne m√©diane </h2><br>  L'√©tape la plus difficile en termes de mise en ≈ìuvre (au moins elle a pris le plus de temps).  La m√©thode est bas√©e sur l'utilisation d'une matrice de Hesse (segmentation multi-√©chelle de vaisseaux utilisant l'am√©lioration de la matrice de Hesse).  Plus de d√©tails dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> d√©j√† mentionn√©. <br><br><h2>  Tranchage </h2><br>  Nous n'avons qu'une ligne centrale et nous avons besoin d'intensit√©s spatialement d√©pendantes de voxels qui peuvent √™tre facilement travaill√©es.  Pour les obtenir, une ¬´pile¬ª de tranches est en cours.  Pour commencer, les points sont d√©finis sur des distances fixes sur la ligne centrale.  Ensuite, une perpendiculaire est construite √† partir de chaque point <img src="https://habrastorage.org/getpro/habr/post_images/629/d90/498/629d904983c27d11c1874e959481ac0e.svg">  .  Apr√®s est la deuxi√®me perpendiculaire <img src="https://habrastorage.org/getpro/habr/post_images/c49/6e6/18d/c496e618db88f915ed3d3fe3e8ffebf5.svg">  .  O Where <img src="https://habrastorage.org/getpro/habr/post_images/715/6f4/21f/7156f421f73f84d8f74072c47d8feb40.svg">  - la direction de la ligne m√©diane en un point.  Les deux perpendiculaires sont normalis√©es.  √Ä chaque point <img src="https://habrastorage.org/getpro/habr/post_images/d76/c4d/c2b/d76c4dc2b17f00a09c864bf2d24ab365.svg">  vecteur de ligne centrale <img src="https://habrastorage.org/getpro/habr/post_images/ccc/5f9/fa9/ccc5f9fa9ba4fd68b9d82f5f64c964a5.svg">  former un syst√®me de coordonn√©es 2D.  Ainsi, des tranches sont form√©es: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1i/u3/fy/1iu3fy_dalyttcp8pm_5tbmvblu.png"></div><br>  La position du voxel est d√©finie comme <img src="https://habrastorage.org/getpro/habr/post_images/61a/d30/8c1/61ad308c13008a755317c1e29b64d2c5.svg">  o√π <img src="https://habrastorage.org/getpro/habr/post_images/038/a72/de3/038a72de3b3aa84f6df45501491024e0.svg">  ici <img src="https://habrastorage.org/getpro/habr/post_images/c85/e97/693/c85e97693d356905ea98d6f6cbacc674.svg">  Sont les coordonn√©es r√©elles du voxel, k est le num√©ro de tranche.  Formule inverse pour les coordonn√©es r√©elles: <img src="https://habrastorage.org/getpro/habr/post_images/797/f2e/fae/797f2efaeb13453aa8d76293b288bd73.svg">  .  Lors du passage √† un nouveau syst√®me de coordonn√©es, l'espace form√© par les tranches est simplifi√©: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pj/c3/cq/pjc3cqpbmjzhvsb2ioyumlgilam.png"></div><br>  Ce dont nous avons besoin! <br><br><h2>  Construction de la fronti√®re ext√©rieure du navire </h2><br>  Jetons un coup d'≈ìil au diagramme: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gm/ii/i2/gmiii2tsk4iqtvaolp9y3fhvd9c.png"></div><br>  Nous d√©coupons notre pile de tranches obtenues √† l'√©tape pr√©c√©dente en huit plans (comme pour couper un g√¢teau) et nous effectuons tous les calculs dans l'espace des plans: <br><br><div class="spoiler">  <b class="spoiler_title">Couper</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ov/jd/db/ovjddbzkgm-vdtrv6gcwzzuao1o.png"></div><br></div></div><br>  Si vous affichez les valeurs normalis√©es des intensit√©s des voxels qui ont frapp√© le plan de coupe, nous obtenons l'image suivante: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/nf/km/uenfkmqzel_cvnooctxzi9cl-3m.png"></div><br>  Pour d√©tecter les limites du navire, l'approche classique (d√©tection de bord par gradient) est utilis√©e conjointement avec la recherche du chemin.  Sch√©ma: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kw/tu/ox/kwtuox6hip2d3cu0t65wj_z4fqc.png"></div><br>  1. Appliquer un lissage gaussien avec une petite valeur <img src="https://habrastorage.org/getpro/habr/post_images/77c/f13/7bb/77cf137bb0d151fa8fc5a4eb4a7f21e0.svg">  pour supprimer le bruit: <br>  Pour un point avec des coordonn√©es <img src="https://habrastorage.org/getpro/habr/post_images/733/058/d18/733058d18a17c8fcbb58bb5b1879082a.svg">  : <br><img src="https://habrastorage.org/getpro/habr/post_images/2a4/722/67f/2a472267fd4f70baed2798401c41edd6.svg">  o√π <img src="https://habrastorage.org/getpro/habr/post_images/7ec/a6c/c6a/7eca6cc6aeb64ba5e76063f0019d9542.svg">  renvoie la valeur de l'intensit√© en un point <img src="https://habrastorage.org/getpro/habr/post_images/65c/c1e/d7f/65cc1ed7f6ce98859b0f80176a24fc08.svg">  ;  r prend g√©n√©ralement la valeur <img src="https://habrastorage.org/getpro/habr/post_images/d02/f53/56b/d02f5356b7b9c5234d7c2975efd6a994.svg">  ( <img src="https://habrastorage.org/getpro/habr/post_images/1b6/903/f11/1b6903f1101a871ba3ba64fe1924f873.svg">  - arrondir); <img src="https://habrastorage.org/getpro/habr/post_images/77c/f13/7bb/77cf137bb0d151fa8fc5a4eb4a7f21e0.svg">  - coefficient de lissage. <br><br>  2. A chaque point on retrouve le gradient et sa valeur, les calculs sont effectu√©s avec des valeurs d'intensit√© liss√©es: <br><img src="https://habrastorage.org/getpro/habr/post_images/9d3/c90/939/9d3c9093937e8aff5520ded5071984ac.svg">  , <br>  o√π <img src="https://habrastorage.org/getpro/habr/post_images/698/280/401/6982804016ef30ecdc8ac8fddeb72c4e.svg">  - d√©riv√©s priv√©s.  Ils sont trouv√©s par la m√©thode des diff√©rences finies: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/791/209/8dc/7912098dc806f588c1458ad8b9faabdc.svg">  , <br>  o√π <img src="https://habrastorage.org/getpro/habr/post_images/b20/94b/690/b2094b69077bfe82f7dca9f140480d0b.svg">  - intensit√© en un point <img src="https://habrastorage.org/getpro/habr/post_images/65c/c1e/d7f/65cc1ed7f6ce98859b0f80176a24fc08.svg">  apr√®s lissage. <br>  Ensuite, nous avons besoin de la direction du gradient <img src="https://habrastorage.org/getpro/habr/post_images/341/0a9/910/3410a9910584413131b3320a186f314b.svg">  ( <img src="https://habrastorage.org/getpro/habr/post_images/64b/66b/58e/64b66b58e46e62b07ecb6e7b86851d21.svg">  Est la normalisation du vecteur) et la valeur du gradient <img src="https://habrastorage.org/getpro/habr/post_images/e64/fb2/3c8/e64fb23c8f2225d8f538813e1fe4cbb3.svg">  ( <img src="https://habrastorage.org/getpro/habr/post_images/06d/0ad/537/06d0ad537ee5254e1af0392adeb5008d.svg">  Est la longueur du vecteur) <br><br>  3. La direction du gradient est traduite en degr√©s ou radians: <br><img src="https://habrastorage.org/getpro/habr/post_images/89d/fd2/c8a/89dfd2c8ab531ad40fd223765fac9596.svg">  (atan2 () est la fonction de l'arc tangente en C ++, √† ne pas confondre avec atan ()), puis on arrondit l'angle pour qu'il puisse avoir 4 valeurs par incr√©ments de 45 degr√©s, soit  le haut et le bas sont consid√©r√©s dans la m√™me direction: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t3/tq/jx/t3tqjxxfdgjsdqubxdputqzbh8w.jpeg"></div><br>  4. Effectuez la suppression des valeurs non maximales.  Si la valeur du gradient <img src="https://habrastorage.org/getpro/habr/post_images/e64/fb2/3c8/e64fb23c8f2225d8f538813e1fe4cbb3.svg">  au moins dans l'un des deux points voisins (selon la direction du gradient) est sup√©rieur ou √©gal √† la valeur du gradient au point courant, alors un tel point ne peut pas appartenir √† la fronti√®re: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bf/0d/tf/bf0dtfvisx3vymgm2fjjpj7cbxe.png"></div><br>  5. Tous les voxels restants sont consid√©r√©s comme des limites.  En fonction de la valeur du gradient, du seuil de calcium (qui n'est pas imm√©diatement disponible) et de la proximit√© du centre ¬´vertical¬ª, chaque point se voit attribuer un certain co√ªt (plus le voxel est brillant, plus sa priorit√© lors de la recherche d'un chemin est √©lev√©e): <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ad/wn/ng/adwnng9jtvu5knuetwbngyhubq8.png"></div><br>  Sous cette forme, les limites du navire sont d√©finies de mani√®re presque unique. <br><br>  6, 7. Pour construire des fronti√®res, nous utilisons la recherche du chemin.  Les points extr√™mes les plus proches avec le moindre co√ªt sont consid√©r√©s comme les points initial et final.  Pour rechercher un chemin, utilisez une recherche simple en largeur, qui s√©lectionne les points limites les moins co√ªteux.  Des sauts sont √©galement disponibles, mais leur prix est √©lev√©.  Les limites sup√©rieure et inf√©rieure du navire sont recherch√©es s√©par√©ment, puis un lissage leur est appliqu√©: <br><br><div class="spoiler">  <b class="spoiler_title">R√©sultat</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/t_/67/_u/t_67_u6vbtpbn5nthgj1uzfglle.png"></div><br></div></div><br>  Cette proc√©dure est effectu√©e pour chaque plan, ce qui se traduit par des anneaux √† seize segments pour chaque tranche de la pile.  Ces anneaux forment les bords ext√©rieurs du vaisseau. <br><br>  Comme vous pouvez le voir sur l'image, il existe des zones dans lesquelles les bordures ne sont pas d√©tect√©es correctement.  Cela est d√ª √† la pr√©sence de calcium, ce qui entra√Æne la d√©tection de limites de calcium plut√¥t que de limites de vaisseaux.  Pour √©viter que cela ne se produise apr√®s la premi√®re d√©tection des limites, il est n√©cessaire de d√©terminer le seuil de calcium (plus √† ce sujet plus tard), puis d'effectuer la deuxi√®me d√©tection des limites, en ignorant les voxels li√©s au calcium.  On obtient alors: <br><br><div class="spoiler">  <b class="spoiler_title">Bon r√©sultat</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/7p/we/tz/7pwetz2lmrhzbikdhjpjmwsc7rw.png"></div><br><h2>  D√©tection de seuils de fronti√®res internes, externes et de seuil de calcium </h2><br>  Une fois la fronti√®re ext√©rieure connue, nous devons collecter des informations statistiques.  √Ä savoir, les intensit√©s de tous les voxels qui se trouvent √† l'int√©rieur du vaisseau. <br></div></div><br><h2>  D√©tection de seuil </h2><br>  Consid√©rons maintenant la maximisation des attentes de l'algorithme de clustering (ci-apr√®s d√©nomm√©e EM).  Commen√ßons par la fonction de distribution normale: elle est caract√©ris√©e par une attente math√©matique <img src="https://habrastorage.org/getpro/habr/post_images/849/a42/16c/849a4216c1bc55877bc86f4a97513f7a.svg">  et √©cart type <img src="https://habrastorage.org/getpro/habr/post_images/77c/f13/7bb/77cf137bb0d151fa8fc5a4eb4a7f21e0.svg">  .  Voici comment ils affectent le type de distribution: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1f/vg/gj/1fvggjfo2r_nz87bzdb3kngomri.gif"></div><br><br>  Supposons que nous ayons des donn√©es (points) provenant d'une source ¬´jaune¬ª et d'une source ¬´bleue¬ª: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rw/9q/er/rw9qern6glz7e696mx7k1sviuom.png"></div><br>  Ensuite, en utilisant des formules standard, nous trouvons facilement la moyenne et l'√©cart type pour chaque source.  Formules pour la source ¬´a¬ª: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c13/a5b/94d/c13a5b94d8d81bc4353b884bc8970aeb.svg"><br><img src="https://habrastorage.org/getpro/habr/post_images/154/906/8ae/1549068ae55c21dcb6e7efa2d3185f56.svg"><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/js/jx/4xjsjxajyvozdnueljew75whnyg.png"></div><br>  Mais que se passe-t-il si nous connaissons le nombre de sources, mais ne savons pas quels points appartiennent √† quelle source?  Et si nous avions une telle photo? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ei/cb/9a/eicb9atkan-akjv2zgp9rodyow0.png"></div><br>  Si quelqu'un venait nous dire les param√®tres de distribution, alors nous pourrions facilement calculer la probabilit√© que chaque point appartienne √† chacune des sources.  La probabilit√© que le point appartienne √† la source "a": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c24/2eb/8d9/c242eb8d94d7b7a7ad237c8509b54d65.svg">  o√π <br><br><img src="https://habrastorage.org/getpro/habr/post_images/75c/129/b81/75c129b8112508e711b04727e48b05d3.svg"><br><img src="https://habrastorage.org/getpro/habr/post_images/7b0/a47/b22/7b0a47b2227447f62daaf67a8fc519b0.svg"><br><br>  Et si nous avons besoin de calculer les param√®tres source, connaissant les probabilit√©s: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cb6/eee/7f9/cb6eee7f9578ca134c470c445f69bdd6.svg"><br><img src="https://habrastorage.org/getpro/habr/post_images/bf3/2e7/ed5/bf32e7ed508e6dcd536ee3fe6ab63f32.svg"><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ws/ok/gf/wsokgf4bevva43d9cxzhktmzzws.png"></div>  Ainsi, un cercle vicieux est obtenu: si nous connaissions les param√®tres des sources, nous calculerions quel point appartient √† quelle source, mais nous ne connaissons pas les param√®tres.  Et si nous savions quel point appartient √† quelle source, nous calculerions leurs param√®tres, mais nous ne savons pas quel point appartient √† quelle source.  L'√©quilibre entre ces faits est exactement ce que fait l'algorithme EM. <br><br>  Au d√©marrage, EM re√ßoit certains param√®tres pr√©d√©finis pour les sources, qui peuvent simplement √™tre s√©lectionn√©s au hasard.  √âvidemment, si les param√®tres sont connus, alors nous pouvons calculer la probabilit√© que chaque point appartienne √† chacune des sources.  Maintenant que les probabilit√©s sont connues, nous pouvons calculer de nouveaux param√®tres plus pr√©cis.  Ensuite, tout recommence, mais avec de nouveaux param√®tres.  Apr√®s chaque cycle, les param√®tres des sources deviennent plus pr√©cis. <br><br>  Comment utiliser ces connaissances en relation avec les navires?  Jetons un coup d'≈ìil √† la structure de l'un d'eux: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gq/il/st/gqilstduy1jpu4f_e7wiu0hns2g.png"></div>  Dans les diagrammes, ce point est g√©n√©ralement omis, mais des formations de graisse et de calcium peuvent √©galement √™tre pr√©sentes dans le vaisseau.  Ainsi, chaque voxel appartiendra √† l'un des tissus.  Apr√®s les exp√©riences, il s'est av√©r√© qu'il suffit de faire les divisions suivantes: <br><br>  - gras <br>  - mur # 1 <br>  - mur # 2 <br>  - moyen de contraste <br>  - calcium <br><br>  La distribution des intensit√©s de voxels dans chaque cas est normale.  C'est-√†-dire  nous avons tout ce dont nous avons besoin pour utiliser EM pour trouver les param√®tres de chaque source. <br><br><div class="spoiler">  <b class="spoiler_title">Les r√©sultats sont assez bons</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/f3/ht/_o/f3ht_obxm187_gnzmu8aue4sbbg.png"></div><br>  La ligne verte est un histogramme des intensit√©s, la ligne rouge est le mod√®le math√©matique r√©sultant. <br></div></div><br>  Maintenant que nous connaissons les param√®tres de chaque source, nous pouvons calculer les seuils - les valeurs des intensit√©s, √† l'intersection desquelles, l'appartenance au voxel change d'une source √† l'autre.  Nous sommes int√©ress√©s par: <br><br>  1. Le seuil de la limite ext√©rieure du navire.  Si l'intensit√© du voxel est inf√©rieure √† cette valeur, il est consid√©r√© qu'il n'appartient pas du tout au navire; <br><br>  2. Le seuil de la limite int√©rieure du navire.  Si l'intensit√© du voxel est sup√©rieure √† cette valeur, alors il <br>  fait r√©f√©rence √† la lumi√®re du vaisseau, c'est-√†-dire  √† un m√©lange de sang et de produit de contraste; <br><br>  3. Le seuil de calcium.  Si la valeur de l'intensit√© du voxel est sup√©rieure √† cette valeur, alors elle se r√©f√®re au calcium. <br><br><h2>  Construction de la bordure int√©rieure du navire </h2><br>  Comme toujours, commen√ßons par le diagramme; les calculs sont effectu√©s pour chaque tranche. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8a/-m/9v/8a-m9vgz6e1vywymf8xsnckgm4m.png"></div><br><br>  Si vous affichez visuellement les donn√©es en fonction des seuils obtenus √† l'√©tape pr√©c√©dente, nous obtenons l'image suivante: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gi/qr/uf/giqrufs9lrd7j1rup_-8ckjkpww.png"></div><br><br>  La couleur rouge est la paroi du navire.  Couleur verte - d√©gagement.  Le blanc est le calcium. <br><br>  La premi√®re chose qui attire votre attention est le calcium ¬´suspendu¬ª, qui ne jouxte aucun des murs.  Ceci est consid√©r√© comme normal et r√©sulte du lissage appliqu√© par le tomographe lui-m√™me. <br><br>  Vous devez d'abord obtenir les limites en fonction des seuils, et pour cela, l'algorithme des carr√©s de marche est utilis√©.  On peut dire, passe en deux √©tapes.  Premi√®rement, la zone est divis√©e par une grille discr√®te et les carr√©s dans lesquels les valeurs d'intensit√© sont sup√©rieures ou √©gales au seuil sont consid√©r√©s comme ¬´positifs¬ª, les autres sont consid√©r√©s comme ¬´n√©gatifs¬ª. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3q/4f/rq/3q4frqwpj7hnj5nu-mu2fintttq.png"></div>  Chaque fois, nous serons dans une sorte de n≈ìud, et nous devons dessiner un contour autour des carr√©s ¬´positifs¬ª.  Pour prendre une d√©cision, nous consid√©rerons les signes de quatre carr√©s voisins: en haut √† gauche, en bas √† gauche, en haut √† droite, en bas √† droite.  Hors sym√©trie, nous nous int√©ressons √† trois cas. <br><br>  1. Trois carr√©s d'un signe et d'un oppos√©, le mouvement du contour se produit en diagonale: <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/j7/si/y_/j7siy_5nyv_vu-zjkt6lrxwtgwi.png"><br></div></div><br>  2. Deux carr√©s de m√™me signe et deux oppos√©s, et les carr√©s de m√™me signe sont d'un c√¥t√©, le mouvement du contour est vertical ou horizontal: <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ky/4u/0c/ky4u0chgxifkj8cbmysyygdmcwg.png"><br></div></div><br>  3. Deux carr√©s du m√™me signe et deux oppos√©s, des carr√©s avec les m√™mes signes sont plac√©s sur les c√¥t√©s oppos√©s: <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ak/jc/fn/akjcfnqk3ekjhnynsk8gaqlpgu0.png"><br></div></div><br>  Il s'agit d'un cas exceptionnel, pour prendre une d√©cision, la valeur moyenne de l'intensit√© dans les quatre carr√©s est prise, et si elle est sup√©rieure ou √©gale au seuil, alors le centre est positif, dans d'autres cas, il est n√©gatif.  Il est √©galement important de savoir quel n≈ìud est actuellement actif: <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/8r/qd/5m/8rqd5mrjzqmdivmw_dpyxpqbkbu.png"><img src="https://habrastorage.org/webt/tp/uf/y9/tpufy92j4dfe3vtindh4blsi-su.png"><br></div></div><br>  L'algorithme des carr√©s de marche construit avec pr√©cision et sans ambigu√Øt√© un contour.  Dans l'exemple ci-dessous, j'ai d√©lib√©r√©ment d√©cal√© la ligne du centre du c√¥t√© pour que chaque pas soit clairement visible. <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gg/41/ld/gg41ldwyplhod11zpgqblopf7ho.png"></div>  Plus pr√©cis√©ment, les premier et deuxi√®me cas: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fa/wq/oy/fawqoy8amtn9paiodwj6jowzql8.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ra/1l/md/ra1lmdd4wobzgjt9tgyp7rzxznc.png"></div><br></div></div><br>  Pour chaque section du navire, nous trouvons deux contours principaux - c'est le contour de la fronti√®re ext√©rieure et le contour de la fronti√®re int√©rieure.  Nous ¬´d√©coupons¬ª imm√©diatement le contour ext√©rieur avec notre autre contour ext√©rieur, que nous avons trouv√© au d√©but de l'article en recherchant des chemins.  Ceci est fait pour ignorer les branches du navire.  Nous ignorons les contours du calcium qui sont trop √©loign√©s de la paroi int√©rieure, comme s'ils n'existaient pas du tout, nous trouvons le reste et les utilisons √† l'avenir.  Si le centre du vaisseau est √† l'int√©rieur du calcium, nous le d√©pla√ßons dans la direction la plus proche du circuit de calcium jusqu'√† ce que le centre se trouve dans la lumi√®re (dans la r√©gion verte).  Un tel centre mis √† jour, je vais appeler la position de d√©part. <br><br>  Selon le sch√©ma, il peut y avoir deux cas: simple et complexe. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ac/qq/1c/acqq1c5bc1mqei30gplmu2z2gok.png"></div><br>  Si la position de d√©part est √† l'int√©rieur d'une boucle de calcium ferm√©e (par exemple, si un stent est install√©), alors nous assimilons imm√©diatement la bordure int√©rieure √† cette boucle.  Les choses sont plus compliqu√©es lorsque le centre est en dehors du calcium.  Dans ce cas, nous devons √©largir le circuit de d√©marrage afin qu'il circule en douceur autour du calcium et de la fronti√®re int√©rieure: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mz/ds/5w/mzds5whlkw7e3tffnl5crfvd-vk.gif"></div><br>  Pour atteindre le r√©sultat souhait√©, un algorithme sp√©cial a √©t√© d√©velopp√© sur la base des id√©es utilis√©es dans les moteurs physiques 2D, en particulier la r√©solution des collisions de polygones et le th√©or√®me des axes s√©par√©s. <br><br>  Deux concepts de base qui ne peuvent pas √™tre √©vit√©s: pour les polygones convexes qui se croisent, le vecteur mtv (vecteur de translation minimum) est le plus petit d√©placement de l'un des polygones, apr√®s quoi l'intersection s'arr√™te. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ns/yh/_9/nsyh_9qufvxdkohpt_fsjejwdx8.png"></div>  Nous avons √©galement besoin des normales de polygone - en 2D, elles sont perpendiculaires aux faces et indiquent ¬´out¬ª: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y3/fc/fi/y3fcfiywkig3dbgrxkhw9twh1gk.png"></div>  Afin de ne pas allonger l'article, je vais omettre le reste des d√©tails concernant les moteurs physiques.  La seule chose que je note, c'est qu'√† chaque it√©ration, chaque point du contour accumule l'influence des forces sur lui-m√™me sous la forme d'un vecteur, et √† la fin de chaque it√©ration il se d√©place de la longueur de ce vecteur dans sa direction.  Consid√©rez les forces: <br><br>  1. Deux forces agissent sur chaque sommet du contour de d√©part dans la direction des sommets voisins, et les forces sont directement proportionnelles √† la distance √† ces sommets.  Cela fait r√©tr√©cir le contour et s'efforcer de maintenir une forme arrondie; <br><br>  2. Si le sommet du contour lat√©ral tombe √† l'int√©rieur du contour de d√©part, alors le d√©calage proportionnel au vecteur mtv du sommet du sommet est appliqu√© √† la face la plus proche du contour de d√©part; <br><br>  3. Si le haut du contour de d√©part se trouve √† l'int√©rieur du contour lat√©ral, un d√©calage proportionnel au vecteur de sommet mtv du sommet est appliqu√© au sommet du contour de d√©part.  Ceci, avec le paragraphe pr√©c√©dent, ne permet pas au circuit d'aller au-del√† des limites des autres circuits; <br><br>  4. Si les cas 2 et 3 ne fonctionnaient pas pour le sommet, une force lui est appliqu√©e dans la direction moyenne des deux normales des faces adjacentes.  Cela garantit la croissance du contour ¬´en largeur¬ª. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lz/by/zx/lzbyzx2rujiluinvtom2jj6tana.png"></div>  Important: vous ne pouvez pas d√©placer compl√®tement un sommet ou une face de la longueur du vecteur mtv - il est multipli√© par un certain coefficient compris entre 0,2 et 0,8.  Les coefficients de chaque force dans les autres cas sont s√©lectionn√©s exp√©rimentalement. <br><br>  Gr√¢ce √† cette approche, on retrouve la lumi√®re du vaisseau, en tenant compte du fait que le calcium ne jouxte pas pr√®s des parois.  Maintenant, combinez simplement les r√©sultats de toutes les sections et obtenez les bordures int√©rieure et ext√©rieure du navire: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gv/4z/z7/gv4zz7jnpkx4jdrb1ojm8xojcce.png"></div><br>  L'impr√©cision apparente de la fronti√®re apr√®s le stent est caus√©e par une bifurcation anormale: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ub/i-/cx/ubi-cxfe-hfuys8ufibs97o8xes.png"></div><br>  La zone de la bordure int√©rieure √† la coupe caract√©risera le jeu m√™me qui nous int√©resse finalement.  L'utilisation ult√©rieure de ces donn√©es, je consid√®re trivial et ne n√©cessitant pas d'examen.  Enfin, je vais laisser l'image de la bordure int√©rieure export√©e en 3D: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bl/cv/g4/blcvg4klqzx9imn2qcgw6cizyay.png"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441204/">https://habr.com/ru/post/fr441204/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441192/index.html">Utiliser la puissance de calcul de R pour tester l'hypoth√®se d'√©galit√© des moyens</a></li>
<li><a href="../fr441194/index.html">Livre "GraphQL: Query Language for Modern Web Applications"</a></li>
<li><a href="../fr441196/index.html">Sur qui et pour quels messagers "frapper"</a></li>
<li><a href="../fr441198/index.html">Dynamique en spirale de Scrum et Graves: comment ne pas se heurter aux r√©cifs</a></li>
<li><a href="../fr441202/index.html">Les soci√©t√©s de services r√™vent-elles de leurs produits? Conversation avec Maxilect</a></li>
<li><a href="../fr441206/index.html">Wolfensteiny 3D - reverse engineering 251 octets de JavaScript</a></li>
<li><a href="../fr441208/index.html">Comment nous avons r√©duit l'√©mission de pr√™ts √† 2 clics</a></li>
<li><a href="../fr441210/index.html">Pacemaker de stockage en cluster + DRBD (double primaire) + samba</a></li>
<li><a href="../fr441212/index.html">Travailler avec la protection des informations cryptographiques et les supports de cl√©s mat√©rielles sous Linux</a></li>
<li><a href="../fr441214/index.html">Guide de l'utilisateur Kibana. Visualisation. Partie 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>