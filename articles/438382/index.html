<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì¨ üë®‚Äçüë®‚Äçüë¶ üë∂üèæ Organizaci√≥n de una b√∫squeda en una p√°gina web en JavaScript (sin jQuery) üë©üèæ‚Äçü§ù‚Äçüë®üèª üèöÔ∏è üå†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hace un par de d√≠as recib√≠ una tarea de prueba de la compa√±√≠a para la vacante Front-end dev. Por supuesto, la tarea consisti√≥ en varios puntos. Pero a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Organizaci√≥n de una b√∫squeda en una p√°gina web en JavaScript (sin jQuery)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438382/">  Hace un par de d√≠as recib√≠ una tarea de prueba de la compa√±√≠a para la vacante Front-end dev.  Por supuesto, la tarea consisti√≥ en varios puntos.  Pero ahora nos centraremos solo en uno de ellos: la organizaci√≥n de la b√∫squeda en la p√°gina.  Es decir  b√∫squeda banal por el texto ingresado en el campo (an√°logo de Ctrl + F en el navegador).  La peculiaridad de la asignaci√≥n fue que el uso de cualquier framework o biblioteca JS est√° prohibido.  <strong>Todos escriben en JavaScript nativo nativo</strong> . <br><br>  <i>(Para mayor claridad, continuar√© acompa√±ando el art√≠culo completo con capturas de pantalla y c√≥digo, para que usted y yo entendamos de qu√© estamos hablando en un momento particular)</i> <br><a name="habracut"></a><br><h2>  Encontrar una soluci√≥n </h2><br>  Primer pensamiento: alguien ya ha escrito exactamente esto, necesita google y copiar y pegar.  Entonces lo hice.  En una hora, encontr√© dos buenos guiones que esencialmente funcionaban de la misma manera, pero que estaban escritos de manera diferente.  Eleg√≠ aquel cuyo c√≥digo entend√≠ mejor y lo insert√© en la p√°gina de mi viejo. <br><br>  <i>Si alguien est√° interesado, tom√© el c√≥digo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .</i> <br><br>  El gui√≥n funcion√≥ de inmediato.  Pens√© que el problema estaba resuelto, pero result√≥ que, sin ofender al autor del gui√≥n, hab√≠a una gran falla.  El script busc√≥ todo el contenido de la etiqueta <code>...</code> y, como probablemente ya haya adivinado, al buscar cualquier combinaci√≥n de caracteres que se asemeje a una etiqueta o sus atributos, se rompe toda la p√°gina HTML. <br><br><h2>  ¬øPor qu√© el script no funcion√≥ correctamente? </h2><br>  Todo es simple  El gui√≥n funciona de la siguiente manera.  Primero, escribimos todo el contenido de la etiqueta del <strong>cuerpo</strong> en una variable, luego buscamos coincidencias con la expresi√≥n regular (el usuario la establece al ingresar en el campo de texto) y luego reemplazamos todas las coincidencias con el siguiente c√≥digo: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"background-color: yellow;"</span></span></span><span class="hljs-tag">&gt;</span></span>... ...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Y luego reemplazamos la etiqueta del <strong>cuerpo</strong> actual con la nueva recibida.  El marcado se actualiza, los estilos cambian y todos los resultados encontrados se resaltan en amarillo en la pantalla. <br><br>  Probablemente ya haya entendido cu√°l es el problema, pero sin embargo lo explicar√© con m√°s detalle.  Imagine ingresar la palabra <strong>"div"</strong> en el cuadro de b√∫squeda.  Como comprender√°, dentro del <strong>cuerpo</strong> hay muchas otras etiquetas, incluida <strong>div</strong> .  Y si todos aplicamos los estilos mencionados anteriormente al <strong>"div"</strong> , entonces esto no ser√° un bloque, pero no est√° claro qu√©, ya que el dise√±o se rompe.  Como resultado, despu√©s de sobrescribir el marcado, obtenemos una p√°gina web completamente rota.  Se ve as√≠. <br><br>  Fue antes de la b√∫squeda: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="http://saveimg.ru/thumbnails/30-04-16/b43ea456d1d7d278464d613f7eec8630.png" alt="subir fotos a internet"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Completamente desvanecerse</a> <br>  Se convirti√≥ despu√©s de la b√∫squeda: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="http://saveimg.ru/thumbnails/30-04-16/4fcd7c7461510c748fc002a616883b14.png" alt="subir foto gratis"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Completamente desvanecerse</a> <br><br>  Como puede ver, la p√°gina se rompe por completo.  En resumen, el gui√≥n result√≥ no funcionar, y decid√≠ escribir el m√≠o desde cero, de eso trata este art√≠culo. <br><br><h1>  Entonces escribimos un gui√≥n desde cero </h1><br>  C√≥mo me parece todo. <br><br><img src="https://habrastorage.org/files/e63/fe9/3f0/e63fe93f07ad4fe59872d26a0fc93e2d.png"><br><br>  Ahora estamos interesados ‚Äã‚Äãen el formulario de b√∫squeda.  La rode√≥ con una l√≠nea roja. <br><br>  Miremos un poco.  Implement√© esto de la siguiente manera (hasta ahora HTML puro).  Un formulario con tres etiquetas. <br><br>  <strong>El primero</strong> es para ingresar texto; <br>  <strong>El segundo</strong> : para cancelar la b√∫squeda (deseleccionar); <br>  <strong>El tercero</strong> es para buscar (resaltar los resultados encontrados). <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Entonces, tenemos un campo de entrada y 2 botones.  Escribir√© JavaScript en el js.js.  Supongamos que ya lo ha creado y conectado. <br><br>  Lo primero que haremos: registrar las llamadas de funci√≥n cuando haga clic en el bot√≥n de b√∫squeda y el bot√≥n de cancelar.  Se ver√° as√≠: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"place_for_search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-to-find"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button_for_turn_back"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"javascript: FindOnPage('text-to-find',false); return false;"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button_for_search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"javascript: FindOnPage('text-to-find',true); return false;"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Vamos a explicar un poco lo que hay aqu√≠ y por qu√©. <br><br>  Le damos al campo de texto <strong>id = "text-to-find"</strong> ( <i>este id se referir√° al elemento de js</i> ). <br><br>  Le damos al <strong>bot√≥n</strong> cancelar <strong>los</strong> siguientes atributos: <strong>type = "button" onclick = "javascript: FindOnPage ('text-to-find', false);</strong>  <strong>devuelve falso ";</strong> <br><br>  - <i>Tipo: bot√≥n</i> <br>  - <i>Cuando se presiona, se llama a la funci√≥n FindOnPage ('text-to-find', falso);</i>  <i>y pasa la identificaci√≥n del campo con el texto <strong>falso</strong></i> <br><br>  Le damos al <strong>bot√≥n de</strong> b√∫squeda <strong>los</strong> siguientes atributos: <strong>type = "button" onclick = "javascript: FindOnPage ('text-to-find', true);</strong>  <strong>devuelve falso ";</strong> <br><br>  - <i>Tipo: enviar (no es un bot√≥n porque aqu√≠ puede usar Enter despu√©s de ingresar al campo, o tambi√©n puede usar el bot√≥n)</i> <br>  - <i>Cuando se presiona, se llama a la funci√≥n FindOnPage ('text-to-find', verdadero);</i>  <i>y pasa la identificaci√≥n del campo con el texto, <strong>verdadero</strong></i> <br><br>  Probablemente hayas notado un atributo m√°s: <strong><i>verdadero / falso</i></strong> .  Lo usaremos para determinar qu√© bot√≥n se presion√≥ (cancelar la b√∫squeda o comenzar la b√∫squeda).  Si hacemos clic en cancelar, pasa <strong>falso</strong> .  Si hacemos clic en la b√∫squeda, entonces pasa <strong>verdadero</strong> . <br><br><h4>  OK, sigue adelante.  Ir a JavaScript </h4><h4>  Suponemos que ya ha creado y conectado el archivo js al DOM. <br><br>  Antes de comenzar a escribir c√≥digo, tomemos un descanso y primero analicemos c√≥mo deber√≠a funcionar todo.  Es decir  en esencia, escribiremos un plan de acci√≥n.  Por lo tanto, necesitamos que al ingresar texto en el campo, se realice una b√∫squeda en la p√°gina, pero las etiquetas y los atributos no deber√≠an verse afectados.  Es decir  solo objetos de texto.  C√≥mo lograr esto: estoy seguro de que hay muchas maneras.  Pero ahora usaremos expresiones regulares. <br><br>  Entonces, la siguiente expresi√≥n regular solo buscar√° el rastro de texto.  escriba: "&gt; ... texto ... &lt;".  Es decir  solo se buscar√°n objetos de texto, mientras que las etiquetas y los atributos permanecer√°n intactos. <br><br><pre> <code class="javascript hljs">/&gt;(.*?)&lt;<span class="hljs-regexp"><span class="hljs-regexp">/g</span></span></code> </pre><br>  Por lo tanto, encontraremos las partes necesarias del c√≥digo que analizaremos y buscaremos coincidencias con el texto que ingres√≥ el usuario.  Luego agregaremos estilos a los objetos encontrados y luego reemplazaremos el c√≥digo html por uno nuevo. <br><br>  Empecemos  Primero, las variables que necesitamos. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; <span class="hljs-comment"><span class="hljs-comment">//input -  ,    //search -      //pr -     &lt;body&gt;&lt;/body&gt; //result -    pr (..    ) //result_arr -  pr,      //locale_HTML -  &lt;body&gt;&lt;/body&gt;    ,    </span></span></code> </pre><br>  E inmediatamente determine el valor <strong>locale_HTML</strong> , independientemente de si estamos buscando algo o no.  Esto es necesario para guardar inmediatamente la p√°gina original y tener la capacidad de restablecer los estilos. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; locale_HTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML; <span class="hljs-comment"><span class="hljs-comment">//     body ()</span></span></code> </pre><br>  Ok, ahora vale la pena crear una funci√≥n que se llame desde el <strong>DOM</strong> .  Inmediatamente calcule que dentro deber√≠amos tener 2 funciones, cada una de las cuales funciona dependiendo del bot√≥n presionado.  Despu√©s de todo, realizamos una b√∫squeda o la ponemos a cero.  Y esto lo controla el atributo <strong>verdadero / falso</strong> , como recordar√°.  Tambi√©n debe comprender que cuando vuelva a buscar, los estilos antiguos deben restablecerse.  As√≠ obtenemos lo siguiente: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; locale_HTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML; <span class="hljs-comment"><span class="hljs-comment">//     body () function FindOnPage(name, status) { if(status) { FindOnPageBack(); FindOnPageGo(); } //     if(!status) { FindOnPageBack(); } //  }</span></span></code> </pre><br>  Ok, parte de la l√≥gica est√° implementada, sigue adelante.  Es necesario verificar la palabra recibida para el n√∫mero de caracteres.  Despu√©s de todo, ¬øpor qu√© necesitamos buscar 1 letra / s√≠mbolo?  En general, decid√≠ limitar esto a m√°s de 3 caracteres. <br><br>  Entonces, primero tomamos el valor que ingres√≥ el usuario y, dependiendo de su longitud, realizamos la funci√≥n de b√∫squeda principal o la funci√≥n de advertencia y puesta a cero.  Se ver√° as√≠: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; locale_HTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML; <span class="hljs-comment"><span class="hljs-comment">//     body () function FindOnPage(name, status) { input = document.getElementById(name).value; //     html if(input.length&lt;3&amp;&amp;status==true) { alert('        '); function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //  } if(input.length&gt;=3) { //  } function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //  if(status) { FindOnPageBack(); FindOnPageGo(); } //     if(!status) { FindOnPageBack(); } //  }</span></span></code> </pre><br>  Ahora explicar√© esta secci√≥n del c√≥digo.  Lo √∫nico que no puede quedar claro es esta l√≠nea: <br><br>  <i>funci√≥n FindOnPageBack () {document.body.innerHTML = locale_HTML;</i>  <i>}</i> <br><br>  Aqu√≠ todo es simple: el m√©todo <strong>innerHTML</strong> devuelve el c√≥digo <strong>html</strong> del objeto.  En este caso, simplemente reemplazamos el <strong>cuerpo</strong> actual con el original que guardamos al cargar toda la p√°gina. <br><br>  Seguimos adelante.  Damos valores a las principales variables. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; locale_HTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML; <span class="hljs-comment"><span class="hljs-comment">//     body () function FindOnPage(name, status) { input = document.getElementById(name).value; //     html if(input.length&lt;3&amp;&amp;status==true) { alert('        '); function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //  } if(input.length&gt;=3) { function FindOnPageGo() { search = '/'+input+'/g'; //     pr = document.body.innerHTML; //     body result = pr.match(/&gt;(.*?)&lt;/g); //       result_arr = []; //       () } } function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //  if(status) { FindOnPageBack(); FindOnPageGo(); } //     if(!status) { FindOnPageBack(); } //  }</span></span></code> </pre><br>  Entonces, en esta etapa, ya tenemos las principales variables y valores.  Ahora necesitamos dar las partes necesarias de los estilos de c√≥digo con un fondo resaltado.  Es decir  verificar el texto seleccionado para una expresi√≥n regular (de hecho, el texto seleccionado por la expresi√≥n regular es analizado nuevamente por la expresi√≥n regular).  Para hacer esto, debe hacer una expresi√≥n regular a partir del texto ingresado (hecho), y luego ejecutar el m√©todo pasado como un tacto.  Aqu√≠ el m√©todo <strong>eval ()</strong> nos ayudar√°. <br><br>  En general, despu√©s de reemplazar el texto y obtener el resultado con estilos, debemos reemplazar el <strong>html</strong> actual con el recibido.  Lo hacemos <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; locale_HTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML; <span class="hljs-comment"><span class="hljs-comment">//     body () function FindOnPage(name, status) { input = document.getElementById(name).value; //     html if(input.length&lt;3&amp;&amp;status==true) { alert('        '); function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //  } if(input.length&gt;=3) { function FindOnPageGo() { search = '/'+input+'/g'; //     pr = document.body.innerHTML; //     body result = pr.match(/&gt;(.*?)&lt;/g); //       result_arr = []; //       () for(var i=0; i&lt;result.length;i++) { result_arr[i] = result[i].replace(eval(search), '&lt;span style="background-color:yellow;"&gt;'+input+'&lt;/span&gt;'); //  ,        } for(var i=0; i&lt;result.length;i++) { pr=pr.replace(result[i],result_arr[i]) //    html       } document.body.innerHTML = pr; // html  } } function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //  if(status) { FindOnPageBack(); FindOnPageGo(); } //     if(!status) { FindOnPageBack(); } //  }</span></span></code> </pre><br>  En esencia, todo est√° listo y el script ya est√° funcionando.  Pero agregue un par de detalles m√°s para la belleza. <br><br>  1) Recorte los espacios en el texto que ingresa el usuario.  Inserta este c√≥digo: <br><br><pre> <code class="javascript hljs"> input = numer.replace(<span class="hljs-regexp"><span class="hljs-regexp">/^\s+/g</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>); input = numer.replace(<span class="hljs-regexp"><span class="hljs-regexp">/[ ]{1,}/g</span></span>,<span class="hljs-string"><span class="hljs-string">' '</span></span>);</code> </pre><br>  Despu√©s de esta l√≠nea: <br><br><pre> <code class="javascript hljs"> input = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(name).value; <span class="hljs-comment"><span class="hljs-comment">//     html</span></span></code> </pre><br>  2) Comprobaremos las coincidencias (si no se encuentran coincidencias, informaremos al respecto).  Este c√≥digo se inserta en la funci√≥n FindOnPageGo () despu√©s de las variables. <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> warning = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;result.length;i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(result[i].match(<span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(search))!=<span class="hljs-literal"><span class="hljs-literal">null</span></span>) { warning = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(warning == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { alert(<span class="hljs-string"><span class="hljs-string">'    '</span></span>); }</code> </pre><br>  Puedes ver la fuente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br>  Puedes descargar la fuente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  Ahora todos.  Por supuesto, puede agregar un desplazamiento al primer resultado encontrado, una b√∫squeda en vivo de ajax, y de hecho puede mejorar infinitamente.  Ahora esta es una b√∫squeda bastante primitiva en el sitio.  El prop√≥sito del art√≠culo era ayudar a los principiantes si surge la misma pregunta que la m√≠a.  Despu√©s de todo, no encontr√© una soluci√≥n simple ya hecha. <br><br>  PD: para un funcionamiento correcto, es necesario eliminar la separaci√≥n sil√°bica del texto en el documento html en aquellos lugares donde hay texto sin formato entre las etiquetas. <br><br>  Por ejemplo, en lugar de <br><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Debe <br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Esto no es importante, puede deshacerse de estas transferencias autom√°ticamente en el servicio, pero puede decirme al mismo tiempo c√≥mo solucionarlo, si lo entiende antes que yo. <br><br>  Adem√°s, si alguien escribi√≥ esto, pero con una b√∫squeda en vivo, comparta la fuente, ser√° interesante analizarlo. <br><br>  Estar√© encantado de escuchar cr√≠ticas constructivas, opiniones, tal vez recomendaciones. <br><br>  Recientemente agregu√© un peque√±o c√≥digo, hice una b√∫squeda en vivo en la p√°gina.  Para que se aclare la pregunta.  <strong>El</strong> c√≥digo <strong>HTML</strong> no ha cambiado.  <strong>JS</strong> puede mirar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  La b√∫squeda se realiza utilizando etiquetas con la clase "place_for_live_search".  Entonces, para que el algoritmo analice el contenido deseado, agregue la clase y listo. </h4></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/438382/">https://habr.com/ru/post/438382/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../438370/index.html">El cibercrimen como servicio: servicios y precios</a></li>
<li><a href="../438372/index.html">La NASA contin√∫a sus intentos de contactar con la oportunidad</a></li>
<li><a href="../438374/index.html">¬øC√≥mo cargar OpenStreetMap en Hive?</a></li>
<li><a href="../438376/index.html">Ingenier√≠a inversa. La historia La mia</a></li>
<li><a href="../438380/index.html">Hombre, pausa en las excepciones detectadas</a></li>
<li><a href="../438384/index.html">Lecci√≥n de qu√≠mica: c√≥mo exponer el cristal de un microchip para fotograf√≠a</a></li>
<li><a href="../438386/index.html">En el camino hacia los principios f√≠sicos de la evoluci√≥n biol√≥gica.</a></li>
<li><a href="../438388/index.html">Servidor de mensajes push</a></li>
<li><a href="../438390/index.html">Por qu√© los desarrolladores son m√°s caros que el dinero, c√≥mo ahorrarlos y aumentarlos</a></li>
<li><a href="../438392/index.html">Una breve historia de una "cinta inteligente"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>