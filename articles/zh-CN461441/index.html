<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™‰ ğŸ¦„ ğŸ‘©ğŸ»â€ğŸ’» ä½¿ç”¨R.å¹¶è¡Œè®¡ç®—ï¼Œå›¾å½¢ï¼Œxlsxï¼Œç”µå­é‚®ä»¶å’Œæ‰€æœ‰è¿™äº›æŠ¥å‘Šå­˜å‚¨çŠ¶æ€ ğŸ¥¤ ğŸ‘µğŸ¼ â›”ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ–‡æä¾›äº†ç”¨äºä½¿ç”¨æ›¿ä»£æ–¹æ³•å’Œåˆ›å»ºå†å²è®°å½•ç”Ÿæˆæœ‰å…³EMC VNXå­˜å‚¨é©±åŠ¨å™¨çŠ¶æ€çš„å¸¸è§„æŠ¥å‘Šçš„ä»£ç ã€‚ 


 æˆ‘è¯•å›¾ç”¨æœ€è¯¦ç»†çš„æ³¨é‡Šå’Œä¸€ä¸ªæ–‡ä»¶ç¼–å†™ä»£ç ã€‚ ä»…æ›¿æ¢æ‚¨çš„å¯†ç ã€‚ è¿˜æŒ‡å‡ºäº†æºæ•°æ®çš„æ ¼å¼ï¼Œå› æ­¤å¦‚æœæœ‰äººå°è¯•åœ¨å®¶ä¸­åº”ç”¨å®ƒï¼Œæˆ‘å°†æ„Ÿåˆ°é«˜å…´ã€‚ 



 èƒŒæ™¯çŸ¥è¯† 


 å¦‚æœæ‚¨ä¸æ„Ÿå…´è¶£â€œè…¿é•¿â€çš„æ¥æºï¼Œåˆ™å¯ä»¥è·³è¿‡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨R.å¹¶è¡Œè®¡ç®—ï¼Œå›¾å½¢ï¼Œxlsxï¼Œç”µå­é‚®ä»¶å’Œæ‰€æœ‰è¿™äº›æŠ¥å‘Šå­˜å‚¨çŠ¶æ€</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461441/"><p> æœ¬æ–‡æä¾›äº†ç”¨äºä½¿ç”¨æ›¿ä»£æ–¹æ³•å’Œåˆ›å»ºå†å²è®°å½•ç”Ÿæˆæœ‰å…³<strong>EMC VNX</strong>å­˜å‚¨é©±åŠ¨å™¨çŠ¶æ€çš„å¸¸è§„æŠ¥å‘Šçš„ä»£ç ã€‚ </p><br><p> æˆ‘è¯•å›¾ç”¨æœ€è¯¦ç»†çš„æ³¨é‡Šå’Œä¸€ä¸ªæ–‡ä»¶ç¼–å†™ä»£ç ã€‚ ä»…æ›¿æ¢æ‚¨çš„å¯†ç ã€‚ è¿˜æŒ‡å‡ºäº†æºæ•°æ®çš„æ ¼å¼ï¼Œå› æ­¤å¦‚æœæœ‰äººå°è¯•åœ¨å®¶ä¸­åº”ç”¨å®ƒï¼Œæˆ‘å°†æ„Ÿåˆ°é«˜å…´ã€‚ </p><br><p><img src="https://habrastorage.org/webt/um/it/no/umitnoobcf6fiyywqho_5gsbvjk.png" alt="å›¾å½¢å¤–è§‚"></p><a name="habracut"></a><br><h2 id="predystoriya"> èƒŒæ™¯çŸ¥è¯† </h2><br><p> å¦‚æœæ‚¨ä¸æ„Ÿå…´è¶£â€œè…¿é•¿â€çš„æ¥æºï¼Œåˆ™å¯ä»¥è·³è¿‡ã€‚ <br> æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°æ®ä¸­å¿ƒã€‚ æ²¡æœ‰éå¸¸æ–°é²œçš„å­˜å‚¨ç³»ç»Ÿã€‚ å­˜å‚¨ç³»ç»Ÿå¾ˆå¤šï¼Œç£ç›˜ä¹Ÿä¼šå‘ç”Ÿæ•…éšœã€‚ ä¸€å‘¨å‡ æ¬¡ï¼Œäººä»¬å»æ•°æ®ä¸­å¿ƒå¹¶æ›´æ¢å­˜å‚¨ç³»ç»Ÿä¸­çš„é©±åŠ¨å™¨ã€‚ åœ¨â€œ <strong>æ¨èçš„ç£ç›˜æ›´æ¢</strong> â€ç³»ç»Ÿå‘å‡ºè­¦æŠ¥åï¼Œå†³å®šæ›´æ¢ç£ç›˜ã€‚ </p><br><p>  <em>æ²¡æœ‰ä»€ä¹ˆä¸å¯»å¸¸çš„ã€‚</em> </p><br><p><img src="https://habrastorage.org/webt/5l/ho/ne/5lhonedh_eha1d0gm2vnzrv2ry4.png" alt="æ²¡å…³ç³»"></p><br><p> ä½†æ˜¯æœ€è¿‘ï¼Œæ”¶é›†åœ¨è¿™äº›å­˜å‚¨ç³»ç»Ÿä¸Šå¹¶æä¾›ç»™è™šæ‹Ÿç¯å¢ƒçš„å•ä¸ªLUNå¼€å§‹ä¸¥é‡é€€åŒ–ã€‚ ä¸ä¾›åº”å•†çš„æŠ€æœ¯æ”¯æŒäººå‘˜è”ç³»åï¼Œå¾ˆæ˜æ˜¾ï¼Œä¸ä»…åœ¨å‡ºç°ä¸Šè¿°è­¦æŠ¥æ¶ˆæ¯æ—¶ï¼Œè€Œä¸”åœ¨å‡ºç°å¤§é‡å…¶ä»–æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿéƒ½æœªè€ƒè™‘ä¸¥é‡é”™è¯¯ï¼Œä¹Ÿåº”è¯¥å·²ç»æ›´æ¢äº†ç£ç›˜ã€‚ </p><br><p> ä¸æ”¯æŒé€šè¿‡è¿™äº›å­˜å‚¨ç³»ç»Ÿè¿›è¡ŒSNMPç›‘è§†ã€‚ æ‚¨éœ€è¦ä½¿ç”¨æ˜‚è´µçš„ä¸“æœ‰è½¯ä»¶ï¼ˆæˆ‘ä»¬æ²¡æœ‰ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨<strong>NaviSECCli</strong>æ§åˆ¶å°å®ç”¨ç¨‹åºï¼Œè¯¥å®ç”¨ç¨‹åºéœ€è¦è¿æ¥åˆ°æ¯ä¸ªå­˜å‚¨ç³»ç»Ÿçš„æ¯ä¸ªæ§åˆ¶å™¨ï¼ˆå…¶ä¸­æœ‰ä¸¤ä¸ªï¼‰ï¼Œä½†è¿™å¹¶ä¸æ˜¯å¾ˆç†æƒ³ã€‚ </p><br><p> å†³å®šè‡ªåŠ¨æ”¶é›†æ—¥å¿—å¹¶æœç´¢å…¶ä¸­çš„é”™è¯¯ã€‚ æ ¹æ®æŠ¥å‘Šçš„åˆ†æç»“æœï¼Œåº”ç”±è´Ÿè´£çš„å·¥ç¨‹å¸ˆå†³å®šæ›´æ¢ç£ç›˜ã€‚ </p><br><h2 id="pervye-shagi"> ç¬¬ä¸€æ­¥ </h2><br><p> æœ€åˆï¼Œæˆ‘çš„ä¸€ä½åŒäº‹ç¼–å†™äº†æ‰§è¡Œä»¥ä¸‹æ“ä½œçš„<strong>PowerShell</strong>ä»£ç ï¼š </p><br><ul><li> æ‹¿äº†ä¸€ä¸ªåŒ…å«å­˜å‚¨æ§åˆ¶å™¨IPåœ°å€çš„è¾“å…¥è¡¨ï¼› </li><li> å‘¨æœŸåˆ°è¾¾æ§åˆ¶å™¨<em>A</em>çš„IPåœ°å€ï¼Œç„¶ååˆ°è¾¾æ§åˆ¶å™¨<em>B</em>çš„IPåœ°å€; </li><li> åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œè¿˜é¢å¤–é‡‡è®¿äº†ä»–ä»¬ä»¥è·å–ç£ç›˜çš„åºåˆ—å·ï¼› </li><li> å¤„ç†äº†æ—¥å¿—çš„æ‰€æœ‰è¡Œï¼Œå¹¶è¿‡æ»¤äº†æ‰€æŸ¥æ‰¾æ¶ˆæ¯çš„å†…å®¹ï¼› </li><li> åˆ›å»ºä¸€ä¸ª<strong>PowerShell</strong>å¯¹è±¡ï¼Œå¹¶åœ¨å…¶å±æ€§ä¸­ä»ä¸Šé¢è·å¾—çš„è¡Œä¸­è§£æå¿…è¦çš„æ•°æ®ï¼› </li><li> å°†æ‰€æœ‰ç»“æœå¯¹è±¡åˆå¹¶åˆ°ä»¥csvå½¢å¼å‘å¸ƒçš„è¡¨ä¸­ã€‚ </li></ul><br><p> ä»£ç å¦‚ä¸‹ã€‚ ç«‹å³ä¿ç•™ä»–æ­£åœ¨å·¥ä½œçš„ä¿ç•™ï¼Œä½†æ˜¯æˆ‘ä»¬å¼•å…¥äº†æ›¿ä»£è§£å†³æ–¹æ¡ˆã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">PowerShellæº</b> <div class="spoiler_text"><pre><code class="perl hljs">cd <span class="hljs-string"><span class="hljs-string">'d:\Navisphere CLI\' $csv = "D:\VNX-IP.csv" $Filter1 = "name1" $Filter2 = "name2" $Filter3 = "name3" $Data = import-csv $csv -Delimiter '</span></span>;<span class="hljs-string"><span class="hljs-string">' | Where {$_.cl -EQ $Filter1 -Or $_.cl -EQ $Filter2 -Or $_.cl -EQ $Filter3} | Sort-Object -Property @{Expression={$_.cl}; Ascending=$true}, @{Expression={$_.Name} ;Ascending=$true} #$Filter1 = "nameOfcl" #$Data = import-csv $csv -Delimiter '</span></span>;<span class="hljs-string"><span class="hljs-string">' | Where {$_.Name -EQ $Filter1} $Data | select Name,IP,cl $yStart = (Get-Date).AddDays(-30).ToString('</span></span>yyyy<span class="hljs-string"><span class="hljs-string">') $yEnd = (Get-Date).ToString('</span></span>yyyy<span class="hljs-string"><span class="hljs-string">') $mStart = (Get-Date).AddDays(-30).ToString('</span></span>MM<span class="hljs-string"><span class="hljs-string">') $mEnd = (Get-Date).ToString('</span></span>MM<span class="hljs-string"><span class="hljs-string">') $dStart = (Get-Date).AddDays(-30).ToString('</span></span>dd<span class="hljs-string"><span class="hljs-string">') $dEnd = (Get-Date).ToString('</span></span>dd<span class="hljs-string"><span class="hljs-string">') #$start = (Get-Date).AddDays(-3).ToString('</span></span>MM\/dd\/yy<span class="hljs-string"><span class="hljs-string">') #$end = (Get-Date).ToString('</span></span>MM\/dd\/yy<span class="hljs-string"><span class="hljs-string">') $i = 1 $table = ForEach ($row in $Data) { Write-Host $row.Name -ForegroundColor "Yellow" Write-Host "SP A" Write-Host (Get-Date).ToString('</span></span>HH:mm:ss<span class="hljs-string"><span class="hljs-string">') $txt = .\NaviSECCli.exe -scope 0 -h $row.newA -user myusername -password mypassword getlog -date $mStart/$dStart/$yStart $mEnd/$dEnd/$yEnd | Select-String -Pattern "\(820\)","\(803\)","\(801\)","\(920\)","\(901\)" ForEach ($n in $txt) { $x = $n -Split('</span></span> <span class="hljs-string"><span class="hljs-string">') $disk = $x[3] + "_" + $x[5] + "_" + $x[7].Split("(")[0] $sn = (.\NaviSECCli.exe -scope 0 -h $row.newA -user myusername -password mypassword getdisk $disk -serial)[1] | %{$_ -replace "Serial Number: ",""} | %{$_ -replace "State: ",""} | %{$_ -replace " ",""} New-Object PSObject -Property @{ i = $i cl = $row.cl Storage = $row.Name SP = "A" Date = $x[0] Time = $x[1] Disk = $disk Error = (($n -Split('</span></span>\[<span class="hljs-string"><span class="hljs-string">'))[0] -Split('</span></span>\)<span class="hljs-string"><span class="hljs-string">'))[1].Trim() eCode = (($n -Split('</span></span>\(<span class="hljs-string"><span class="hljs-string">'))[1] -Split('</span></span>\)<span class="hljs-string"><span class="hljs-string">'))[0] SN = $sn } $i = $i + 1 } Write-Host "SP B" Write-Host (Get-Date).ToString('</span></span>HH:mm:ss<span class="hljs-string"><span class="hljs-string">') $txt = .\NaviSECCli.exe -scope 0 -h $row.newB -user myusername -password mypassword getlog -date $mStart/$dStart/$yStart $mEnd/$dEnd/$yEnd | Select-String -Pattern "\(820\)","\(803\)","\(801\)","\(920\)","\(901\)" ForEach ($n in $txt) { $x = $n -Split('</span></span> <span class="hljs-string"><span class="hljs-string">') $disk = $x[3] + "_" + $x[5] + "_" + $x[7].Split("(")[0] $sn = (.\NaviSECCli.exe -scope 0 -h $row.newA -user myusername -password mypassword getdisk $disk -serial)[1] | %{$_ -replace "Serial Number: ",""} | %{$_ -replace "State: ",""} | %{$_ -replace " ",""} New-Object PSObject -Property @{ i = $i cl = $row.cl Storage = $row.Name SP = "B" Date = $x[0] Time = $x[1] Disk = $disk Error = (($n -Split('</span></span>\[<span class="hljs-string"><span class="hljs-string">'))[0] -Split('</span></span>\)<span class="hljs-string"><span class="hljs-string">'))[1].Trim() eCode = (($n -Split('</span></span>\(<span class="hljs-string"><span class="hljs-string">'))[1] -Split('</span></span>\)<span class="hljs-string"><span class="hljs-string">'))[0] SN = $sn } $i = $i + 1 } Write-Host " " } $table | select i,cl,Storage,SP,Date,Time,Disk,Error,eCode,SN | Export-Csv -Path '</span></span>d:\VNX-Errors.csv<span class="hljs-string"><span class="hljs-string">' -NoTypeInformation -UseCulture -Encoding UTF8</span></span></code> </pre> </div></div><br><p> ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä»¥è‡ªåŠ¨å‘é€ç»™æ„Ÿå…´è¶£çš„åŒäº‹çš„ä¿¡çš„å½¢å¼æ·»åŠ â€œå…‰æ³½â€ï¼Œå¹¶ä»¥æœ€å°çš„æ ¼å¼ç”Ÿæˆcsvã€‚ ä½†æ˜¯ï¼ˆï¼ï¼‰æ‰€æœ‰è¿™äº›éº»çƒ¦è§£å†³äº†å¾ˆé•¿æ—¶é—´ã€‚ ä¾‹å¦‚ï¼Œæ”¶é›†ä¸€ä¸ªæœˆçš„æ•°æ®å¤§çº¦éœ€è¦<strong>45åˆ†é’Ÿ</strong> ï¼Œè¿™ä¸æ˜¯å¾ˆåˆé€‚ï¼Œå› ä¸ºé™¤äº†å®šæœŸæŠ¥å‘Šä¹‹å¤–ï¼Œæˆ‘è¿˜æƒ³å¯¹å½“å¹´è¿›è¡Œåˆ†æï¼Œè¿™å°†æ˜¯å¾ˆé•¿çš„æ—¶é—´ã€‚ ä½†æ˜¯â€œæ‹’ç»-æä¾›â€ã€‚ ä»–ä»¬å¼€å§‹æ€è€ƒã€‚ </p><br><p><img src="https://habrastorage.org/webt/jn/85/ts/jn85tsztuso-z7ulzxh2a1jk7yq.jpeg"></p><br><p> æ˜¾ç„¶ï¼Œæ‚¨éœ€è¦ä¼˜åŒ–ä»£ç å¹¶å¯ç”¨å¹¶è¡Œè®¡ç®—ã€‚ åœ¨<strong>PowerShellä¸­</strong> ï¼Œä½¿ç”¨<strong>å·¥ä½œæµ</strong>åœ¨5ä¸ªä»¥ä¸Šå¹¶å‘çº¿ç¨‹ä¸­æ²¡æœ‰æˆåŠŸï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰â€œæŠ½çƒŸâ€æ›¿ä»£æ–¹æ³•ã€‚ å› æ­¤ï¼Œå†³å®šå°è¯•å°†è„šæœ¬é€»è¾‘è½¬æ¢ä¸º<strong>Rã€‚</strong>  <strong>NaviSECCli</strong>å®ç”¨ç¨‹åºå¯ä»¥åœ¨<strong>R</strong>ä¸‹è¿è¡Œï¼Œå¯ä»¥åœ¨æºä»£ç ä¸­è¿›è¡Œå­˜å‚¨è°ƒæŸ¥ï¼Œå› æ­¤è¯¥è§£å†³æ–¹æ¡ˆéå¸¸åˆé€‚ã€‚ <br> æ®è¯´- <del> å‡ å¤© </del>  -å®Œæˆï¼ </p><br><p> æˆ‘ä»¬å†³å®šåœ¨è¾“å‡ºä¸­æˆ‘æƒ³æ”¶åˆ°ä¸€ä»½æ¯æ—¥æ–°é—»é€šè®¯ï¼Œå…¶ä¸­åŒ…å«ä¿¡ä»¶æ–‡æœ¬ä¸­çš„<strong>é”™è¯¯æ€»æ•°</strong> ï¼Œä¸€äº›äº‹æ•…æ•°é‡<strong>æ—¶é—´è¡¨</strong> ï¼ˆä»¥ä¾¿å‘ç®¡ç†äººå‘˜æ˜¾ç¤ºå†…å®¹ï¼‰ä»¥åŠä¸€ä¸ªxlsxè¡¨å½¢å¼<strong>çš„é™„ä»¶</strong> ã€‚ æˆ‘ä»¬ç¡®å®šåœ¨è¡¨ä¸­æˆ‘æƒ³è¦ä¸‰ä¸ªé€‰é¡¹å¡ï¼š </p><br><ul><li>  3å¤©æŒ‰ç£ç›˜å’Œäº‹æ•…ç±»å‹åˆ†ç±»çš„äº‹æ•…æ•°æ® </li><li> ç±»ä¼¼çš„æ ‡ç­¾ï¼Œä½†ä½¿ç”¨äº†30å¤© </li><li> åŸå§‹æ•°æ®ï¼ˆå¦‚æœæœ‰äººæƒ³è‡ªå·±åœ¨Excelä¸­è¿è¡Œå®ƒä»¬ï¼‰ </li></ul><br><h4 id="algoritm-skripta"> è„šæœ¬ç®—æ³• </h4><br><p>  <strong>1.</strong>ä»csvä¸‹è½½æ§åˆ¶å™¨ä¸Šçš„å¯ç”¨æ•°æ®ï¼› <br>  <strong>2.</strong>é€šè¿‡å¹¶è¡Œè®¡ç®—æ‰€æœ‰æ§åˆ¶å™¨çš„å‘¨æœŸï¼Œæœç´¢æ‰€éœ€è­¦æŠ¥æ¶ˆæ¯çš„è®°å½•ï¼› <br>  <strong>3.</strong>å°†ç»“æœåˆå¹¶åˆ°ä¸€ä¸ªæ•°æ®æ¡†ä¸­ï¼› <br>  <strong>4.</strong>åšæ•°æ®å¤„ç†å’Œè½¬æ¢ï¼› <br>  <strong>5.</strong>ç”Ÿæˆxlsxæ–‡ä»¶ï¼› <br>  <strong>6.</strong>å½¢æˆæˆ‘ä»¬ä¿å­˜åœ¨pngä¸­çš„æ—¶é—´è¡¨ï¼› <br>  <strong>7.</strong>å½¢æˆä¸€å°åŒ…å«æ‰€æ”¶é›†æ•°æ®çš„ä¿¡ä»¶ï¼› <br>  <strong>8.</strong>å¯„ä¸€å°ä¿¡ã€‚ </p><br><h2 id="proydyom-po-punktam-algoritma"> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç®—æ³•çš„è¦ç‚¹ </h2><br><h3 id="1-zagruzhaem-iz-csv-imeyuschiesya-dannye-po-kontrolleram">  1.ä»csvä¸‹è½½æ§åˆ¶å™¨ä¸Šçš„å¯ç”¨æ•°æ® </h3><br><div class="spoiler">  <b class="spoiler_title">å…·æœ‰VNXå‚æ•°çš„æºè¡¨æ ¼å¼</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># A tibble: 83 x 9 Name IP cl type newA newB oldA oldB cntIP &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; 1 XXX 10.***.**~ XclNam~ 5300-1 10.201.1~ 10.201.1~ 10.***.*~ 10.***.*~ 10.***.*~ 2 XXX 10.***.**~ XclNam~ 5300-1 10.201.1~ 10.201.1~ 10.***.*~ 10.***.*~ 10.***.*~ 3 XXX 10.***.**~ XclNam~ 5300-1 10.201.1~ 10.201.1~ 10.***.*~ 10.***.*~ 10.***.*~ 4 XXX 10.***.**~ XclNam~ 5300-1 10.201.1~ 10.201.1~ 10.***.*~ 10.***.*~ 10.***.*~ 5 XXX 10.***.**~ XclNam~ 5300-1 10.201.1~ 10.201.1~ 10.***.*~ 10.***.*~ 10.***.*~ 6 XXX 10.***.**~ XclNam~ 5300-1 10.201.1~ 10.201.1~ 10.***.*~ 10.***.*~ 10.***.*~ 7 XXX 10.***.**~ XclNam~ 5300-1 10.201.1~ 10.201.1~ 10.***.*~ 10.***.*~ 10.***.*~ 8 XXX 10.***.**~ XclNam~ 5300-1 10.201.1~ 10.201.1~ 10.***.*~ 10.***.*~ 10.***.*~ 9 XXX 10.***.**~ XclNam~ 5300-1 10.201.1~ 10.201.1~ 10.***.*~ 10.***.*~ 10.***.*~ 10 XXX 10.***.**~ XclNam~ 5300-1 10.201.1~ 10.201.1~ 10.***.*~ 10.***.*~ 10.***.*~ # ... with 73 more rows</span></span></code> </pre> </div></div><br><p> è¦æ”¶é›†ç´§æ€¥ä¿¡æ¯ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ä¸“ç”¨çš„<em>EMC</em>è½¯ä»¶<strong>-NaviCLIï¼ˆ</strong>å¸¦æœ‰æŸäº›é”®ï¼‰ä¸²è”åˆ°ä¸¤ä¸ªæ§åˆ¶å™¨ï¼ˆ <em>newA</em>å’Œ<em>newBåˆ—</em> ï¼‰ã€‚ <br> ä¸ºæ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬åœ¨åŠ è½½åé‡æ–°æ ¼å¼åŒ–ç»“æœè¡¨ï¼Œä»¥ä¾¿ä¸¤ä¸ªæ§åˆ¶å™¨çš„IPåœ°å€åœ¨åŒä¸€åˆ—ä¸­ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥åœ¨æ•´ä¸ªåˆ—è¡¨ä¸­è¿›è¡Œä¸€ä¸ªå¾ªç¯ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªè¿ç»­çš„å¾ªç¯ã€‚ æˆ‘ä»¬ä½¿ç”¨<strong>collect</strong>å‡½æ•°æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚  <strong>tidyverse</strong>åº“çš„å®˜æ–¹æ–‡æ¡£ä¸­å¾ˆå¥½åœ°æè¿°äº†ä½¿ç”¨â€œå‚ç›´â€æˆ–â€œæ°´å¹³â€æ•°æ®æ ¼å¼çš„<strong>é—®é¢˜</strong> ã€‚ æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">åœ¨è¿™é‡Œ</a>é˜…è¯»ã€‚ </p><br><p> æˆ‘ä»¬ä½¿ç”¨<strong>read_csv2</strong>å‡½æ•°è¯»å–æ•°æ®ï¼Œæˆ‘ä»¬è¿˜é€šè¿‡å…¶ä»–å‚æ•°<strong>col_types</strong>æ‰‹åŠ¨ç¡®å®šåˆ—çš„ç±»å‹ã€‚ è¿™æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œå› ä¸º å¤§å¤§åŠ å¿«äº†åŠ è½½é€Ÿåº¦ã€‚ å°±æˆ‘ä»¬è€Œè¨€ï¼Œè¿™å¹¶ä¸é‡è¦ï¼Œå› ä¸º åŸå§‹çš„csvåŒ…å«ä¸åˆ°100è¡Œï¼Œä½†æˆ‘ä»¬ä¹ æƒ¯äº†æ­£ç¡®ç¼–å†™ã€‚ </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   IP VNX. #         , #   ip        . VNX_ip &lt;- vnxIPfilePath %&gt;% read_csv2( col_types = cols( Name = col_character(), IP = col_character(), cl = col_character(), type = col_character(), newA = col_character(), newB = col_character(), oldA = col_character(), oldB = col_character() ) ) %&gt;% filter(cl %in% productCls) %&gt;% gather(key = "cntName", value = "cntIP", 5:6)</span></span></code> </pre> <br><p> åœ¨è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†è¿™æ ·ä¸€ä¸ªæ•°æ®å¸§ï¼ˆæ–°åˆ—æ˜¯<strong>cntName</strong>å’Œ<strong>cntIP</strong> ï¼‰ï¼š </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># A tibble: 30 x 8 Name IP cl type oldA oldB cntName cntIP &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; 1 XXX 10.***.***.*~ XclNameX 5300~ 10.***.***.~ 10.***.***.~ newA 10.***.***.~ 2 XXX 10.***.***.*~ XclNameX 5300~ 10.***.***.~ 10.***.***.~ newA 10.***.***.~ 3 XXX 10.***.***.*~ XclNameX 5300~ 10.***.***.~ 10.***.***.~ newA 10.***.***.~ 4 XXX 10.***.***.*~ XclNameX 5300~ 10.***.***.~ 10.***.***.~ newA 10.***.***.~ 5 XXX 10.***.***.*~ XclNameX 5300~ 10.***.***.~ 10.***.***.~ newA 10.***.***.~ 6 XXX 10.***.***.*~ XclNameX 5300~ 10.***.***.~ 10.***.***.~ newA 10.***.***.~ 7 XXX 10.***.***.*~ XclNameX 5300~ 10.***.***.~ 10.***.***.~ newA 10.***.***.~ 8 XXX 10.***.***.*~ XclNameX 5300~ 10.***.***.~ 10.***.***.~ newA 10.***.***.~ 9 XXX 10.***.***.*~ XclNameX 5300~ 10.***.***.~ 10.***.***.~ newA 10.***.***.~ 10 XXX 10.***.***.*~ XclNameX 5300~ 10.***.***.~ 10.***.***.~ newA 10.***.***.~ # ... with 20 more rows</span></span></code> </pre> <br><h3 id="2-3-zapuskaem-cherez-parallelnye-vychisleniya-cikl-po-vsem-kontrolleram-s-poiskom-zapisey-o-trebuemyh-avariynyh-soobscheniyah-rezultaty-obedinyaem-v-data-frame">  2-3ã€‚ æˆ‘ä»¬é€šè¿‡å¹¶è¡Œè®¡ç®—ä¸ºæ‰€æœ‰æ§åˆ¶å™¨è¿è¡Œä¸€ä¸ªå‘¨æœŸï¼Œå¹¶æœç´¢æ‰€éœ€è­¦æŠ¥æ¶ˆæ¯çš„è®°å½•ã€‚ å°†ç»“æœåˆå¹¶åˆ°æ•°æ®æ¡†ä¸­ </h3><br><p> æ¥ä¸‹æ¥æ˜¯æœ€æœ‰è¶£çš„ã€‚  <em>å¹¶è¡Œè®¡ç®—</em> ã€‚ </p><br><p> åœ¨<strong>Rä¸­ï¼Œæœ‰</strong>å‡ ä¸ªï¼ˆç”šè‡³å¾ˆå¤šï¼‰å¹¶è¡Œè®¡ç®—é€‰é¡¹ã€‚ æˆ‘æ›´å–œæ¬¢æ¥è‡ª<strong>foreach</strong>å’Œ<strong>doParallel</strong>åº“çš„é“¾æ¥ã€‚ æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">æ­¤å¤„</a>é˜…è¯»æœ‰å…³å®ƒä»¬ä»¥åŠ<strong>Rä¸­</strong>å…¶ä»–å¹¶è¡Œè®¡ç®—é€‰é¡¹çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ä¿¡æ¯</a> ã€‚ </p><br><p> ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬ä»…é‡‡å–<strong>3ä¸ªæ­¥éª¤</strong> ï¼š <br>  <strong>ç¬¬ä¸€æ­¥</strong> æ³¨å†Œå†…æ ¸ <del> çº¯ç¿¡ç¿  </del> é€šè¿‡<strong>registerDoParallel</strong>åœ¨å¹¶è¡Œè®¡ç®—ä¸­å·¥ä½œçš„CPUï¼ˆåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ£€æµ‹æ¡ˆä¾‹ä¸­çš„å†…æ ¸æ•°ï¼‰ </p><br><div class="spoiler">  <b class="spoiler_title">æ³¨å†ŒCPUå†…æ ¸</b> <div class="spoiler_text"><pre> <code class="python hljs">numCores &lt;- detectCores() registerDoParallel(numCores)</code> </pre> </div></div><br><p>  <strong>ç¬¬äºŒæ­¥</strong> æˆ‘ä»¬é€šè¿‡<strong>foreach</strong>å¼€å§‹å¾ªç¯ï¼ˆä¸è¦å¿˜è®°æŒ‡å®š<strong>ï¼…doparï¼…</strong>è¿ç®—ç¬¦ï¼Œä»¥ä¾¿å¾ªç¯å¹¶è¡Œè¿è¡Œï¼Œå¹¶é€šè¿‡<strong>.combine</strong>å‚æ•°æŒ‡ç¤ºæˆ‘ä»¬æ”¶é›†ç»“æœçš„æ–¹å¼ï¼‰ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œ <strong>.combine = rbind</strong> ï¼Œå› ä¸ºåœ¨æ¯ä¸ªå¾ªç¯çš„è¾“å‡ºå¤„ï¼Œæˆ‘ä»¬å°†æœ‰ä¸€ä¸ª<strong>æ•°æ®å¸§</strong> ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">é”™è¯¯è¡¨æ£€ç´¢ä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      VNX   ip   . #      ,      #   ,      dataframe #  %dopar%   . #    ,   system.time   , #    %dopar%  %do%.      4-5. # system.time({ errors_df &lt;- foreach(i = 1:nrow(VNX_ip), .combine = rbind, .packages = "tidyverse") %dopar% { errors_raw &lt;- system( paste( "NaviSECCli.exe -scope 0 -h", VNX_ip$cntIP[i], "-user myusername -password mypassword getlog -date", bigPeriodForm, currDateForm ), intern = TRUE ) %&gt;% str_subset(pattern = regex(paste0(errorNumbers, collapse = "|"))) #      ,       if (length(errors_raw) &gt; 0) { #     #       , #     , #       . errorsDescr &lt;- errors_raw %&gt;% gsub("(.*\\) )(.*)(\\s+\\[.*)", "\\2", x = .) %&gt;% trimws() %&gt;% gsub('([[:punct:]])|\\s+', '_', .) #           errors &lt;- errors_raw %&gt;% str_split(pattern = "\\s+", simplify = T) %&gt;% as_tibble() %&gt;% mutate(Disk = paste0(V4, "_", V6, "_", V8) %&gt;% gsub( pattern = "\\([0-9]{3}\\)", replacement = "", x = .) ) #  dataframe    data_frame(cl = VNX_ip$cl[i], Storage = VNX_ip$Name[i], Date = errors$V1 %&gt;% as.Date(format = "%m/%d/%Y"), Time = errors$V2, Disk = errors$Disk, Error = errorsDescr, eCode = errors$V8 %&gt;% str_extract(paste0(errorNumbers, collapse = "|")) %&gt;% str_extract("[0-9]+")) %&gt;% mutate(DateTime = as.POSIXct(paste(Date, Time), format = "%Y-%m-%d %H:%M:%S")) } } # })</span></span></code> </pre> </div></div><br><p>  <strong>ç¬¬ä¸‰æ­¥</strong> æˆ‘ä»¬é€šè¿‡<strong>stopImplicitClusterï¼ˆï¼‰</strong>æ¸…é™¤åˆ›å»ºçš„å¹¶è¡Œåº¦é›†ç¾¤ </p><br><h4 id="chut-podrobnee-po-poluchenii-chitaemoy-tablicy-iz-raw-teksta-oshibok"> æœ‰å…³ä»åŸå§‹é”™è¯¯æ–‡æœ¬è·å–å¯è¯»è¡¨çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ </h4><br><p> ä»¥æ–‡æœ¬å½¢å¼ï¼Œé”™è¯¯å¦‚ä¸‹ï¼š </p><br><pre> <code class="python hljs">head(errors_raw) [<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-string"><span class="hljs-string">"07/13/2019 00:01:46 Bus 0 Enclosure 3 Disk 9(801) Soft SCSI Bus Error [0x00] 841d1080 10006 "</span></span> [<span class="hljs-number"><span class="hljs-number">2</span></span>] <span class="hljs-string"><span class="hljs-string">"07/13/2019 00:01:46 Bus 0 Enclosure 3 Disk 9(801) Soft SCSI Bus Error [0x00] 841e1a00 10006 "</span></span> [<span class="hljs-number"><span class="hljs-number">3</span></span>] <span class="hljs-string"><span class="hljs-string">"07/13/2019 00:01:46 Bus 0 Enclosure 3 Disk 9(801) Soft SCSI Bus Error [0x00] 8420b600 10006 "</span></span> [<span class="hljs-number"><span class="hljs-number">4</span></span>] <span class="hljs-string"><span class="hljs-string">"07/13/2019 00:01:46 Bus 0 Enclosure 3 Disk 9(801) Soft SCSI Bus Error [0x00] 84206900 10006 "</span></span> [<span class="hljs-number"><span class="hljs-number">5</span></span>] <span class="hljs-string"><span class="hljs-string">"07/13/2019 00:01:46 Bus 0 Enclosure 3 Disk 9(801) Soft SCSI Bus Error [0x00] 841fc900 10006 "</span></span> [<span class="hljs-number"><span class="hljs-number">6</span></span>] <span class="hljs-string"><span class="hljs-string">"07/13/2019 00:01:46 Bus 0 Enclosure 3 Disk 9(801) Soft SCSI Bus Error [0x00] 841fc000 10006</span></span></code> </pre> <br><p> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨ç©ºæ ¼åˆ†éš”å€¼ï¼Œä¹ä¸€çœ‹ï¼Œå³ä½¿åœ¨<em>csvä¸­ä¹Ÿ</em>å¯ä»¥æ­£å¸¸æ’å…¥ã€‚ ä½†è¿™ä¸æ˜¯é‚£ä¹ˆç®€å•ã€‚ è§£æçš„å¤æ‚æ€§åœ¨äºï¼š </p><br><ul><li> æ—¥æœŸå’Œæ—¶é—´ä¹Ÿç”¨ç©ºæ ¼éš”å¼€ï¼ˆæœ€å°çš„é‚ªæ¶ï¼‰ï¼› </li><li> é”™è¯¯æ–‡æœ¬ç”±â€œå•è¯â€ç»„æˆï¼Œå³ ä¹Ÿç”¨ç©ºæ ¼éš”å¼€ï¼› </li><li> ç”±äºæŸç§åŸå› ï¼Œç£ç›˜å·å’Œé”™è¯¯ä»£ç ï¼ˆåœ¨æ–¹æ‹¬å·ä¸­ï¼‰ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ã€‚ <br> é€šå¸¸ï¼Œæ˜¯æ­£åˆ™è¡¨è¾¾å¼çˆ±å¥½è€…çš„å¤©å ‚:) </li></ul><br><p><img src="https://habrastorage.org/webt/yk/rf/2i/ykrf2irog7eq_o3j3d0-ijnild0.jpeg" alt="ç”Ÿç—…çš„æ··è›‹"></p><br><p> æˆ‘å°†ä¸è®¨è®ºè§£æï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æˆ‘è¦æ¾„æ¸…ä¸€ä¸‹é”™è¯¯æ–‡æœ¬å¿…é¡»æ’•å¼€ï¼Œå› ä¸ºå€¼ä½äºé”™è¯¯å·çš„å³æ‹¬å·å’Œå…¶ä»–å€¼çš„æ–¹æ‹¬å·ä¹‹é—´ã€‚ åœ¨å¾ªç¯ä¸­ï¼Œè¿™æ˜¯<strong>errors</strong>å˜é‡ã€‚ </p><br><p> æœ‰è¶£çš„ä¸€ç‚¹æ˜¯ï¼Œä¸ºäº†å½¢æˆæœ€ç»ˆæ•°æ®å¸§ï¼Œæˆ‘ä»¬å¸Œæœ›å¾ªç¯è®¿é—®æ§åˆ¶å™¨çš„ipåœ°å€ï¼Œè€Œä¸æ˜¯é€šè¿‡å¸¦æœ‰æ§åˆ¶å™¨ipåœ°å€çš„åˆ—ï¼ˆå³<strong>i = VNX_ip $ cntIP</strong> ï¼‰æ¥è®¾ç½®åºåˆ—ï¼Œè€Œæ˜¯é€šè¿‡è¡Œå·ï¼ˆå³<strong>eã€‚i = 1ï¼šnrowï¼ˆVNX_ipï¼‰</strong> ï¼‰ã€‚ å½“åˆ›å»ºå…·æœ‰å·²è§£æé”™è¯¯çš„æ•°æ®å¸§æ—¶<strong>ï¼Œ</strong>è¿™ä½¿æˆ‘ä»¬å¯ä»¥åˆ†åˆ«é€šè¿‡è°ƒç”¨<strong>VNX_ip $ cl [i]</strong>å’Œ<strong>VNX_ip $ Name [i]</strong>æ·»åŠ ç¾¤é›†å·å’Œå­˜å‚¨åç§°ã€‚ å¦‚æœæ²¡æœ‰è¿™ä¸ªï¼Œå°±å¿…é¡»è¿›è¡Œè”æ¥ï¼Œè¿™å°†ä½¿ä»£ç ä¸­çš„è¯»å–å˜å¾—æ›´æ…¢ï¼Œæ›´ç³Ÿã€‚ </p><br><p> æœ€åï¼Œæˆ‘ä»¬è·å¾—äº†ä¸€ä¸ªæ•°æ®æ¡†æ¶ï¼ˆè¯´å®è¯ï¼Œç„¶åæ˜¯<strong>tibble</strong> ï¼Œä½†åŒºåˆ«ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´ä¹‹å†…ï¼‰ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰æ•°æ®ã€‚ å³ åœ¨å“ªä¸ªå­˜å‚¨ç³»ç»Ÿä¸Šï¼Œåœ¨å“ªä¸ªç£ç›˜ä¸Šï¼Œä½•æ—¶å‘ç”Ÿä»€ä¹ˆé”™è¯¯ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">æœ€ç»ˆè§†å›¾æ•°æ®æ¡†</b> <div class="spoiler_text"><pre> <code class="python hljs">&gt; errors_df <span class="hljs-comment"><span class="hljs-comment"># A tibble: 2,705 x 8 cl Storage Date Time Disk Error eCode DateTime &lt;chr&gt; &lt;chr&gt; &lt;date&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dttm&gt; 1 XclNam~ XStorageN~ 2019-07-18 12:09:~ 0_1_3 Soft_SCSI_~ 801 2019-07-18 12:09:55 2 XclNam~ XStorageN~ 2019-07-18 15:09:~ 0_1_3 Soft_SCSI_~ 801 2019-07-18 15:09:56 3 XclNam~ XStorageN~ 2019-07-18 16:28:~ 0_1_3 Soft_SCSI_~ 801 2019-07-18 16:28:50 4 XclNam~ XStorageN~ 2019-07-19 06:36:~ 0_1_6 Soft_SCSI_~ 801 2019-07-19 06:36:39 5 XclNam~ XStorageN~ 2019-07-19 20:57:~ 0_1_6 Soft_Media~ 820 2019-07-19 20:57:35 6 XclNam~ XStorageN~ 2019-07-22 11:00:~ 0_2_~ Soft_SCSI_~ 801 2019-07-22 11:00:43 7 XclNam~ XStorageN~ 2019-07-22 11:00:~ 0_2_~ Soft_SCSI_~ 801 2019-07-22 11:00:44 8 XclNam~ XStorageN~ 2019-07-22 12:02:~ 0_2_~ Soft_SCSI_~ 801 2019-07-22 12:02:31 9 XclNam~ XStorageN~ 2019-07-23 23:29:~ 0_3_8 Soft_SCSI_~ 801 2019-07-23 23:29:49 10 XclNam~ XStorageN~ 2019-07-13 00:01:~ 0_3_9 Soft_SCSI_~ 801 2019-07-13 00:01:46 # ... with 2,695 more rows</span></span></code> </pre> </div></div><br><p> æœ€èªæ˜çš„æ˜¯ï¼Œæ‰€æœ‰å­˜å‚¨ç³»ç»Ÿçš„å¹¶è¡Œè½®è¯¢çš„æ•´ä¸ªå‘¨æœŸ<strong>ä¸æ˜¯30åˆ†é’Ÿï¼Œè€Œæ˜¯30ç§’</strong> ã€‚ </p><br><p>  <em>æ„Ÿè°¢ä¸Šå¸ï¼Œè¿™ä¸æ˜¯30ç§’è¿‡å¿«çš„æƒ…å†µã€‚</em> <br><img src="https://habrastorage.org/webt/pr/nf/u9/prnfu9eet3au2ktv5-uk1vauskk.jpeg" alt="å¼€ä¸ªç©ç¬‘"></p><br><p> å€¼å¾—æ¾„æ¸…çš„æ˜¯ï¼Œ <strong>PowerShell</strong>ä»£ç è¿˜å‘¨æœŸæ€§åœ°æ”¶é›†äº†æ‰€æœ‰å­˜å‚¨ç³»ç»Ÿçš„ç£ç›˜åºåˆ—å·ï¼Œå¹¶ä¸”åœ¨<strong>R</strong>ä¸Šé‡å†™ä»£ç æ—¶<strong>ï¼Œ</strong>æ­¤æ•°æ®æ˜¯å¤šä½™çš„ã€‚ å› æ­¤ï¼Œè¿è¡Œæ—¶æ¯”è¾ƒå¹¶ä¸å®Œå…¨æ˜¯è¯šå®çš„ï¼Œä½†ä»ç„¶ä»¤äººå°è±¡æ·±åˆ»ã€‚ </p><br><h3 id="4-5-obrabotka-i-preobrazovanie-dannyh-formirovanie-xlsx-dokumenta">  4-5ã€‚ å¤„ç†å’Œæ•°æ®è½¬æ¢ã€‚ ç”Ÿæˆä¸€ä¸ªxlsxæ–‡æ¡£ </h3><br><p>  xlsxæ–‡æ¡£çš„æ•°æ®è½¬æ¢å‡å°‘ä¸ºåœ¨æœ€è¿‘3å¤©ä»¥åŠæœ€åä¸€ä¸ªæœˆè¿‡æ»¤æºè¡¨ï¼Œå¹¶å°†å¸¦æœ‰é”™è¯¯åç§°çš„åˆ—è½¬æ¢ä¸ºâ€œæ°´å¹³â€æ ¼å¼ï¼Œä»¥ä¾¿æ¯ç§é”™è¯¯ç±»å‹éƒ½åœ¨å•ç‹¬çš„åˆ—ä¸­ã€‚ ä¸ºæ­¤ç¼–å†™äº†ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ï¼ˆä»¥å…é‡å¤ç›¸åŒçš„æ­¥éª¤2æ¬¡ï¼‰ </p><br><div class="spoiler">  <b class="spoiler_title">æºè¿‡æ»¤åŠŸèƒ½</b> <div class="spoiler_text"><pre> <code class="python hljs">myErrorStats &lt;- function(data, period, orderColname = quo(Soft_Media_Error)) { data %&gt;% filter(Date &gt; period) %&gt;% group_by(cl, Storage, Disk, Error) %&gt;% summarise(count = n()) %&gt;% spread(Error, count, fill = <span class="hljs-number"><span class="hljs-number">0</span></span>) %&gt;% arrange(desc(!!orderColname)) }</code> </pre> </div></div><br><p> ä¸ºäº†åœ¨å•ç‹¬çš„åˆ—ä¸­æ˜¾ç¤ºé”™è¯¯çš„ç±»å‹ï¼Œä½¿ç”¨é™„åŠ é”®<strong>fill = 0æ¥</strong>åº”ç”¨<strong>æ•£å¸ƒ</strong>å‡½æ•°ï¼Œå°†ç¼ºå¤±å€¼å¡«å……ä¸º<strong>0</strong> ã€‚ å¦‚æœæ²¡æœ‰æ­¤é”®ï¼Œåˆ™å¦‚æœæŸå¤©æ²¡æœ‰æŸç§é”™è¯¯ï¼Œåˆ™ç›¸åº”çš„åˆ—å°†å…·æœ‰<strong>NA</strong>å€¼ã€‚ </p><br><p> å¦å¤–ï¼Œåœ¨è¯¥å‡½æ•°ä¸­ï¼Œæˆ‘æƒ³ä¿ç•™ä¼ é€’åˆ—åä½œä¸ºå˜é‡è¿›è¡Œæ’åºçš„åŠŸèƒ½ï¼Œä½†åŒæ—¶å…·æœ‰è¯¥å˜é‡çš„é»˜è®¤å€¼ã€‚ ä¸ºæ­¤ï¼Œä½¿ç”¨äº†ç‰¹æ®Šçš„è¯­æ³•<strong>dplyr</strong> ï¼Œæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·<strong>å‚è§</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">æ­¤å¤„</a> ã€‚ </p><br><p> åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå½“å®šä¹‰ä¸€ä¸ªå‡½æ•°çš„å‚æ•°æ—¶ï¼Œæˆ‘ä»¬å°†å…¶ä¸­ä¸€ä¸ªè®¾ç½®ä¸ºé»˜è®¤å€¼å¹¶<em>å¼•ç”¨</em>å®ƒï¼ˆ <strong>orderColname = quoï¼ˆSoft_Media_Errorï¼‰</strong> ï¼‰ï¼Œç„¶ååœ¨è¢«è°ƒç”¨æ—¶å°†å­—ç¬¦æ”¾åœ¨å…¶å‰é¢<strong>ï¼</strong> è·å¾—<strong>å®‰æ’ï¼ˆdescï¼ˆ!! orderColnameï¼‰ï¼‰</strong> ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">æœˆä»½é”™è¯¯çš„è¡¨æ ¼å¤–è§‚</b> <div class="spoiler_text"><pre> <code class="python hljs">&gt; errorsBigPeriod <span class="hljs-comment"><span class="hljs-comment"># A tibble: 77 x 7 cl Storage Disk Hard_SCSI_Bus_E~ Recommend_Disk_~ Soft_Media_Error &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; 1 XclN~ XStora~ 1_1_~ 0 1 64 2 XclN~ XStora~ 0_2_5 0 0 29 3 XclN~ XStora~ 1_1_~ 0 1 29 4 XclN~ XStora~ 0_3_2 0 0 27 5 XclN~ XStora~ 0_3_~ 1 0 25 6 XclN~ XStora~ 1_3_5 0 1 23 7 XclN~ XStora~ 0_2_9 0 0 21 8 XclN~ XStora~ 0_3_4 0 0 14 9 XclN~ XStora~ 0_1_~ 0 0 14 10 XclN~ XStora~ 1_0_1 0 0 12 # ... with 67 more rows, and 1 more variable: Soft_SCSI_Bus_Error &lt;dbl&gt;</span></span></code> </pre> </div></div><br><p> æˆ‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æœ‰å…³VMçŠ¶æ€æŠ¥å‘Š</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡ç« ä¸­</a>åˆ†æäº†xlsxæ–‡æ¡£çš„å½¢æˆï¼Œå› æ­¤æˆ‘å°†ä¸ä½œè¯¦ç»†ä»‹ç»ã€‚ æ‰€æœ‰ä»£ç å‡åœ¨æ–‡ç« æœ«å°¾ç»™å‡ºã€‚ </p><br><p><img src="https://habrastorage.org/webt/td/7v/vx/td7vvxmj5guiwtxhjyxif4cany8.jpeg"></p><br><p> ä»¥ä¸‹æ˜¯å¯å¢å¼ºæŠ¥å‘Šå¯è¯»æ€§çš„é‡è¦åŠŸèƒ½ï¼š </p><br><ul><li> ç­¾åæ ‡ç­¾ï¼ˆé»˜è®¤æƒ…å†µä¸‹æœ€æœ‰è¶£çš„æ˜¯æ‰“å¼€ï¼‰ï¼› </li><li> çªå‡ºæ˜¾ç¤ºçš„åˆ—å </li><li> è‡ªåŠ¨æ ¼å¼åŒ–æ‰€æœ‰åˆ—ï¼Œä»¥ä¾¿æ— éœ€æ‰©å±•åˆ—å³å¯è¯»å–æ‰€æœ‰æ–‡æœ¬ã€‚ </li></ul><br><h3 id="6-formiruem-grafik-kotoryy-sohranyaem-v-png">  6.åˆ›å»ºä¸€ä¸ªä¿å­˜åœ¨pngä¸­çš„æ—¶é—´è¡¨ </h3><br><p> åœ¨å›¾ä¸Šï¼Œæˆ‘æƒ³æŒ‰ç±»å‹è·å–æ‰€æœ‰å­˜å‚¨ç³»ç»Ÿæ¯å¤©çš„é”™è¯¯æ€»æ•°ã€‚ ä½œä¸ºç»˜å›¾å·¥å…·ï¼Œå†³å®šä½¿ç”¨æ ‡å‡†çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ggplot2</a>åº“ã€‚ </p><br><p> è¯¥å›¾çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨ä¸€ä¸ªå›¾ä¸Šæ˜¾ç¤ºäº†æ‰€æœ‰é”™è¯¯ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><p><img src="https://habrastorage.org/webt/7t/jc/aj/7tjcajacotjzcoo3y0j9oc2od80.png"></p><br><p> åŒäº‹ä»¬è¯´ï¼Œç»“æœä»¤äººéš¾ä»¥ç†è§£ã€‚ <br><del> ä»–ä»¬ä¼šæ˜ç™½ä»€ä¹ˆï¼Ÿ </del><br> è€ƒè™‘äº†è¿™äº›æ³¨é‡Šï¼Œå¹¶å°†<strong>facet_grid</strong>å‡½æ•°æ·»åŠ åˆ°æ ‡å‡†åˆ—ï¼ˆ <strong>geom_bar</strong> ï¼‰ï¼Œä»¥æ ¹æ®é”™è¯¯ç±»å‹å°†ç»“æœåˆ’åˆ†ä¸ºå•ç‹¬çš„å›¾å½¢ã€‚ <br> æœ€ç»ˆç»“æœé€‚åˆæ‰€æœ‰äººã€‚ </p><br><p><img src="https://habrastorage.org/webt/l1/vc/v5/l1vcv5950ji9iymrlyrij0uds3w.png" alt="æ‘˜è¦æ—¶é—´è¡¨"></p><br><div class="spoiler">  <b class="spoiler_title">æ•°æ®å‡†å¤‡ï¼Œåˆ¶å›¾ï¼Œä¿å­˜åˆ°æ–‡ä»¶</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">####   #### #       errorsTotal &lt;- errors_df %&gt;% group_by(Date, Error) %&gt;% summarise(count = n()) %&gt;% # spread(Error, count, fill = 0) %&gt;% arrange(desc(Date)) #        . #       ,   . plot &lt;- errorsTotal %&gt;% ggplot(aes(x = Date, y = count, fill = Error)) + geom_bar(stat = "identity", width = 0.5, color = "grey") + theme_minimal() + # theme(legend.position="top") + scale_color_grey() + labs(title = "  EMC VNX", subtitle = "        ", fill = " ") + xlab("") + ylab("   ") + scale_fill_brewer(palette = "Spectral") + facet_grid(rows = vars(factor( Error, levels = c( "Soft_SCSI_Bus_Error", "Soft_Media_Error", "Hard_SCSI_Bus_Error", "Recommend_Disk_Replacement" ) ))) # #   # plot #   png,     plot_filePath &lt;- file.path("results", "plot.png") #    png     ggsave(filename = plot_filePath, plot = plot)</span></span></code> </pre> </div></div><br><p> ä»æœ‰è¶£çš„æ—¶é—´è¡¨ä¸­å½¢æˆã€‚ </p><br><p> æˆ‘å¸Œæœ›å›¾è¡¨æŒ‰ä¸€å®šé¡ºåºæ’åˆ—ã€‚ ä¸ºæ­¤ï¼Œå¿…é¡»å°†åœ¨<strong>facet_grid</strong>ä¸­å½¢æˆè¡Œçš„å‚æ•°ä½œä¸ºä¸€ä¸ªå› ç´ ç”šè‡³æ˜¯ä¸€ä¸ª<strong>æœ‰åºå› ç´ </strong>æ¥ä¼ é€’ã€‚ å› å­å°±æ˜¯Rä¸­ä¸€ç§å¦‚æ­¤ç‹¡çŒ¾çš„æ•°æ®æ ¼å¼ï¼Œå®ƒæ˜¯ä¸€ç»„å€¼ï¼ˆåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­æ˜¯å­—ç¬¦ä¸²ï¼Œå³<strong>å­—ç¬¦</strong> ï¼‰ï¼Œå¹¶ä¸”ä¸¥æ ¼å®šä¹‰äº†è¿™äº›å€¼çš„é›†ï¼ˆç§°ä¸ºå› å­çº§åˆ«ï¼‰ï¼Œç”šè‡³è¿™äº›çº§åˆ«ä¹Ÿå·²æ’åºã€‚ å¬èµ·æ¥å¾ˆå¤æ‚ï¼Œä½†æ˜¯å¦‚æœæ‚¨è¯´æœˆä»½çš„åç§°æ˜¯æœ‰åºå› ç´ çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œé‚£ä¹ˆä¸€åˆ‡éƒ½å°±ä½äº†ã€‚ å³ æˆ‘ä»¬çŸ¥é“å‡ ä¸ªæœˆå¯ä»¥æœ‰ä»€ä¹ˆåå­—ï¼Œæˆ‘ä»¬ä¹ŸçŸ¥é“ï¼ˆå¥½å§ï¼Œæˆ‘å¸Œæœ›ï¼‰é¦–å…ˆæ˜¯ä¸€æœˆï¼Œç„¶åæ˜¯äºŒæœˆï¼Œç„¶åæ˜¯ä¸‰æœˆï¼Œç­‰ç­‰ã€‚ æˆ‘ä»¬ä»¥åŒæ ·çš„åŸåˆ™åˆ›é€ ä¸€ä¸ªå› ç´ ã€‚ </p><br><h3 id="7-8-formiruem-pismo-soderzhaschee-sobrannye-dannye-otpravlyaem-pismo">  7-8ã€‚ æˆ‘ä»¬å½¢æˆä¸€å°åŒ…å«æ‰€æ”¶é›†æ•°æ®çš„ä¿¡ä»¶ã€‚ å‘ä¿¡ </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…³äºVMçŠ¶æ€æŠ¥å‘Š</a>çš„æ–‡ç« ä¸­ä¹Ÿè€ƒè™‘äº†å­—æ¯çš„å½¢æˆå’Œå‘é€ä»¥åŠ<strong>Windows scheduller</strong>ä¸­ä»»åŠ¡çš„å½¢æˆã€‚ æˆ‘ä»¬åªéœ€å°†ä¸€äº›å˜é‡æ”¾å…¥æ–‡æœ¬ä¸­ï¼Œæˆ–å¤šæˆ–å°‘åœ°å°†å…¶æ ¼å¼åŒ–ã€‚ ä¸è¦å¿˜è®°é™„ä»¶ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä¿¡ä»¶çš„æœ€ç»ˆå½¢å¼</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/w6/rg/fi/w6rgfilewjuf24olnavadpu6zhm.jpeg"></p></div></div><br><h2 id="vyvody"> ç»“è®º </h2><br><p>  <strong>R</strong>å†æ¬¡è¢«è¯æ˜æ˜¯æ‰§è¡Œæ—¥å¸¸ä»»åŠ¡å¹¶å¯è§†åŒ–å…¶ç»“æœçš„é€šç”¨å·¥å…·ã€‚ å¯ç”¨å¹¶è¡Œè®¡ç®—åï¼Œæ­¤å·¥å…·ä¹Ÿå°†å˜å¾—å¿«é€Ÿã€‚ <br> å®è·µè¿˜è¡¨æ˜ï¼Œ <strong>PowerShell</strong>åœ¨è§£ææ—¥å¿—å¹¶å°†å…¶è½¬æ¢ä¸ºå¯è¯»æ ¼å¼æ–¹é¢æå…¶ç¼“æ…¢ã€‚ <br> éå¸¸æ„Ÿè°¢å¤§å®¶è¯»äº†è¿™ä¹ˆå¤šç»“å°¾çš„ä¿¡ã€‚ </p><br><h4 id="polnostyu-kod-prilozheniya"> å®Œæ•´çš„åº”ç”¨ç¨‹åºä»£ç  </h4><br><div class="spoiler">  <b class="spoiler_title">å®Œæ•´çš„Råº”ç”¨ç¨‹åºä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#### ENV #### #         (    system32) setwd("C:\\Scripts\\VNX_disks_check/") #   library(tidyverse) library(lubridate) library(zoo) library(stringi) library(xlsx) library(mailR) library(foreach) library(doParallel) #### CONST #### #            vnxIPfilePath &lt;- file.path("data", "VNX-IP.csv") #     bigPeriod &lt;- Sys.Date() - 30 #     smallPeriod &lt;- Sys.Date() - 3 #    productCls &lt;- c("name1", "name2", "name3") #   IP VNX. #         , #   ip        . VNX_ip &lt;- vnxIPfilePath %&gt;% read_csv2( col_types = cols( Name = col_character(), IP = col_character(), cl = col_character(), type = col_character(), newA = col_character(), newB = col_character(), oldA = col_character(), oldB = col_character() ) ) %&gt;% filter(cl %in% productCls) %&gt;% gather(key = "cntName", value = "cntIP", 5:6) ####    VNX #### #         (      ) # NaviSECCli.exe -scope 0 -h 10.201.16.15 -user root -password Secrt4yo getlog -date 07/16/2019 07/17/2019 #   ,   . #      ,       errorNumbers &lt;- c("\\(820\\)", "\\(803\\)", "\\(801\\)", "\\(920\\)", "\\(901\\)") ##   ## #         numCores &lt;- detectCores() registerDoParallel(numCores) #    ,   NaviCLI #  1    ,     "" , # ..   ,      ,     . bigPeriodForm &lt;- bigPeriod %&gt;% format(format = "%m/%d/%Y") currDateForm &lt;- (Sys.Date() + 1) %&gt;% format(format = "%m/%d/%Y") #    . #      VNX   ip   . #      ,      #   ,      dataframe #  %dopar%   . #    ,   system.time   , #    %dopar%  %do%.      4-5. # system.time({ errors_df &lt;- foreach(i = 1:nrow(VNX_ip), .combine = rbind, .packages = "tidyverse") %dopar% { errors_raw &lt;- system( paste( "NaviSECCli.exe -scope 0 -h", VNX_ip$cntIP[i], "-user myusername -password mypassword getlog -date", bigPeriodForm, currDateForm ), intern = TRUE ) %&gt;% str_subset(pattern = regex(paste0(errorNumbers, collapse = "|"))) #      ,       if (length(errors_raw) &gt; 0) { #       , #     , #       . errorsDescr &lt;- errors_raw %&gt;% gsub("(.*\\) )(.*)(\\s+\\[.*)", "\\2", x = .) %&gt;% trimws() %&gt;% gsub('([[:punct:]])|\\s+', '_', .) #           errors &lt;- errors_raw %&gt;% str_split(pattern = "\\s+", simplify = T) %&gt;% as_tibble() %&gt;% mutate(Disk = paste0(V4, "_", V6, "_", V8) %&gt;% gsub( pattern = "\\([0-9]{3}\\)", replacement = "", x = .) ) #  dataframe    data_frame(cl = VNX_ip$cl[i], Storage = VNX_ip$Name[i], Date = errors$V1 %&gt;% as.Date(format = "%m/%d/%Y"), Time = errors$V2, Disk = errors$Disk, Error = errorsDescr, eCode = errors$V8 %&gt;% str_extract(paste0(errorNumbers, collapse = "|")) %&gt;% str_extract("[0-9]+")) %&gt;% mutate(DateTime = as.POSIXct(paste(Date, Time), format = "%Y-%m-%d %H:%M:%S")) } } # }) #     .      ,    . stopImplicitCluster() ####  #### #    .    ,     .  . # https://dplyr.tidyverse.org/articles/programming.html myErrorStats &lt;- function(data, period, orderColname = quo(Soft_Media_Error)) { data %&gt;% filter(Date &gt; period) %&gt;% group_by(cl, Storage, Disk, Error) %&gt;% summarise(count = n()) %&gt;% spread(Error, count, fill = 0) %&gt;% arrange(desc(!!orderColname)) } #           .  . errorsBigPeriod &lt;- errors_df %&gt;% myErrorStats(bigPeriod) #             errorsSmallPeriod &lt;- errors_df %&gt;% myErrorStats(smallPeriod) #   ,     errors_filePath &lt;- file.path("results", "VNX_Errors.xlsx") ####  xlsx  #### #    wb&lt;-createWorkbook(type="xlsx") #         TABLE_ROWNAMES_STYLE &lt;- CellStyle(wb) + Font(wb, isBold=TRUE) TABLE_COLNAMES_STYLE &lt;- CellStyle(wb) + Font(wb, isBold=TRUE) + Alignment(wrapText=TRUE, horizontal="ALIGN_CENTER") + Border(color="black", position=c("TOP", "BOTTOM"), pen=c("BORDER_THIN", "BORDER_THICK")) #  t s sheetSmall &lt;- createSheet(wb, sheetName = " 3 ") sheetBig &lt;- createSheet(wb, sheetName = " ") sheetRaw &lt;- createSheet(wb, sheetName = " ") ##   addDataFrame( errorsSmallPeriod %&gt;% as.data.frame(), sheetSmall, startRow = 1, startColumn = 1, row.names = FALSE, byrow = FALSE, colnamesStyle = TABLE_COLNAMES_STYLE, rownamesStyle = TABLE_ROWNAMES_STYLE ) addDataFrame( errorsBigPeriod %&gt;% as.data.frame(), sheetBig, startRow = 1, startColumn = 1, row.names = FALSE, byrow = FALSE, colnamesStyle = TABLE_COLNAMES_STYLE, rownamesStyle = TABLE_ROWNAMES_STYLE ) #          DateTime     addDataFrame( errors_df %&gt;% as.data.frame() %&gt;% arrange(desc(DateTime)), sheetRaw, startRow = 1, startColumn = 1, row.names = FALSE, byrow = FALSE, colnamesStyle = TABLE_COLNAMES_STYLE, rownamesStyle = TABLE_ROWNAMES_STYLE ) #  ,     autoSizeColumn(sheet = sheetSmall, colIndex=c(1:ncol(errorsSmallPeriod))) autoSizeColumn(sheet = sheetBig, colIndex=c(1:ncol(errorsBigPeriod))) autoSizeColumn(sheet = sheetRaw, colIndex=c(1:ncol(errors_df))) #     .   - . if (file.exists(errors_filePath)) {file.remove(errors_filePath)} #  xlsx  saveWorkbook(wb, errors_filePath) ####   #### #       errorsTotal &lt;- errors_df %&gt;% group_by(Date, Error) %&gt;% summarise(count = n()) %&gt;% # spread(Error, count, fill = 0) %&gt;% arrange(desc(Date)) #         plot &lt;- errorsTotal %&gt;% ggplot(aes(x = Date, y = count, fill = Error)) + geom_bar(stat = "identity", width = 0.5, color = "grey") + theme_minimal() + # theme(legend.position="top") + scale_color_grey() + labs(title = "  EMC VNX", subtitle = "        ", fill = " ") + xlab("") + ylab("   ") + scale_fill_brewer(palette = "Spectral") + facet_grid(rows = vars(factor( Error, levels = c( "Soft_SCSI_Bus_Error", "Soft_Media_Error", "Hard_SCSI_Bus_Error", "Recommend_Disk_Replacement" ) ))) # #   # plot #   png,     plot_filePath &lt;- file.path("results", "plot.png") #    png     ggsave(filename = plot_filePath, plot = plot) ####    #### #    emailRecepientsList &lt;- c("sendall-tech@domain.ru") #      emailParams &lt;- list( from = "login@domain.ru", to = emailRecepientsList, smtpParams = list( host.name = "10.10.10.1", port = 25, user.name = "login@domain.ru", passwd = "mypassword", ssl = FALSE ) ) #     (    ). #     ,          ,     . errorsTotal &lt;- errorsSmallPeriod[-c(1,2,3)] %&gt;% sum() #    emailBody &lt;- paste0( '&lt;html&gt; &lt;h3&gt; ,  .&lt;/h3&gt; &lt;p&gt;  3    &lt;strong&gt;', errorsTotal, '&lt;/strong&gt;    EMC VNX&lt;/p&gt; &lt;p&gt;       ,      .&lt;/p&gt; &lt;p&gt;  3 : &lt;ul&gt; &lt;li&gt;   3 .   &lt;strong&gt;Soft_Media_Error&lt;/strong&gt;.&lt;/li&gt; &lt;li&gt;  30 .   &lt;strong&gt;Soft_Media_Error&lt;/strong&gt;.&lt;/li&gt; &lt;li&gt; .   &lt;strong&gt;&lt;/strong&gt;.&lt;/li&gt; &lt;/ul&gt;          .   .&lt;/p&gt; &lt;p&gt;&lt;img src="', plot_filePath, '"&gt;&lt;/p&gt; &lt;/html&gt;' ) ####      #### send.mail(from = emailParams$from, to = emailParams$to, subject = "     EMC VNX", body = emailBody, encoding = "utf-8", html = TRUE, inline = TRUE, smtp = emailParams$smtpParams, authenticate = TRUE, send = TRUE, attach.files = c(errors_filePath), debug = FALSE)</span></span></code> </pre> </div></div><br><h2 id="parametry-okruzheniya-i-versii-ispolzuemogo-po">       </h2><br><ul><li> <strong> </strong> : EMC VNX 5300 </li><li> <strong>    </strong> : NaviCLI-Win-32-x86-en_US-7.31.25.1.29-1 </li><li> <strong>  ,    </strong> : 4*2 CPU, 8 Gb RAM </li></ul><br><div class="spoiler"> <b class="spoiler_title">  R</b> <div class="spoiler_text"><pre> <code class="python hljs">&gt; sessionInfo() R version <span class="hljs-number"><span class="hljs-number">3.5</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> (<span class="hljs-number"><span class="hljs-number">2019</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span>) Platform: x86_64-w64-mingw32/x64 (<span class="hljs-number"><span class="hljs-number">64</span></span>-bit) Running under: Windows Server <span class="hljs-number"><span class="hljs-number">2012</span></span> R2 x64 (build <span class="hljs-number"><span class="hljs-number">9600</span></span>) Matrix products: default locale: [<span class="hljs-number"><span class="hljs-number">1</span></span>] LC_COLLATE=Russian_Russia<span class="hljs-number"><span class="hljs-number">.1251</span></span> LC_CTYPE=Russian_Russia<span class="hljs-number"><span class="hljs-number">.1251</span></span> LC_MONETARY=Russian_Russia<span class="hljs-number"><span class="hljs-number">.1251</span></span> [<span class="hljs-number"><span class="hljs-number">4</span></span>] LC_NUMERIC=C LC_TIME=Russian_Russia<span class="hljs-number"><span class="hljs-number">.1251</span></span> attached base packages: [<span class="hljs-number"><span class="hljs-number">1</span></span>] parallel stats graphics grDevices utils datasets methods base other attached packages: [<span class="hljs-number"><span class="hljs-number">1</span></span>] taskscheduleR_1<span class="hljs-number"><span class="hljs-number">.4</span></span> pander_0<span class="hljs-number"><span class="hljs-number">.6</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> doParallel_1<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.14</span></span> iterators_1<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span> foreach_1<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> mailR_0<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>] xlsx_0<span class="hljs-number"><span class="hljs-number">.6</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> stringi_1<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> zoo_1<span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">-6</span></span> lubridate_1<span class="hljs-number"><span class="hljs-number">.7</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> wesanderson_0<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.6</span></span> forcats_0<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> [<span class="hljs-number"><span class="hljs-number">13</span></span>] stringr_1<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> dplyr_0<span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> purrr_0<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> readr_1<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> tidyr_0<span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> tibble_2<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> [<span class="hljs-number"><span class="hljs-number">19</span></span>] ggplot2_3<span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> tidyverse_1<span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> loaded via a namespace (<span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> attached): [<span class="hljs-number"><span class="hljs-number">1</span></span>] tidyselect_0<span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.5</span></span> reshape2_1<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> rJava_0<span class="hljs-number"><span class="hljs-number">.9</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span> haven_2<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> lattice_0<span class="hljs-number"><span class="hljs-number">.20</span></span><span class="hljs-number"><span class="hljs-number">-38</span></span> colorspace_1<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>] vctrs_0<span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> generics_0<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> utf8_1<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> rlang_0<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> R.oo_1<span class="hljs-number"><span class="hljs-number">.22</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> pillar_1<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> [<span class="hljs-number"><span class="hljs-number">13</span></span>] glue_1<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> withr_2<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> R.utils_2<span class="hljs-number"><span class="hljs-number">.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> RColorBrewer_1<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> modelr_0<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> readxl_1<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> [<span class="hljs-number"><span class="hljs-number">19</span></span>] plyr_1<span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> munsell_0<span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> gtable_0<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> cellranger_1<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> rvest_0<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> R.methodsS3_1<span class="hljs-number"><span class="hljs-number">.7</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> [<span class="hljs-number"><span class="hljs-number">25</span></span>] codetools_0<span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">-16</span></span> labeling_0<span class="hljs-number"><span class="hljs-number">.3</span></span> fansi_0<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> xlsxjars_0<span class="hljs-number"><span class="hljs-number">.6</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> broom_0<span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> Rcpp_1<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> [<span class="hljs-number"><span class="hljs-number">31</span></span>] scales_1<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> backports_1<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> jsonlite_1<span class="hljs-number"><span class="hljs-number">.6</span></span> digest_0<span class="hljs-number"><span class="hljs-number">.6</span></span><span class="hljs-number"><span class="hljs-number">.20</span></span> hms_0<span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> grid_3<span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> [<span class="hljs-number"><span class="hljs-number">37</span></span>] cli_1<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> tools_3<span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> magrittr_1<span class="hljs-number"><span class="hljs-number">.5</span></span> lazyeval_0<span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> crayon_1<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> pkgconfig_2<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> [<span class="hljs-number"><span class="hljs-number">43</span></span>] zeallot_0<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> data.table_1<span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> xml2_1<span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> assertthat_0<span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> httr_1<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> rstudioapi_0<span class="hljs-number"><span class="hljs-number">.10</span></span> [<span class="hljs-number"><span class="hljs-number">49</span></span>] R6_2<span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> nlme_3<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">-137</span></span> compiler_3<span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span></code> </pre> </div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN461441/">https://habr.com/ru/post/zh-CN461441/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN461431/index.html">â€œå–œæ¬¢å’Œä¸å–œæ¬¢â€ï¼šé€šè¿‡HTTPSè¿›è¡ŒDNS</a></li>
<li><a href="../zh-CN461433/index.html">åœ¨Net Core 3.0ä¸­ä½¿ç”¨Identity Server 4</a></li>
<li><a href="../zh-CN461435/index.html">ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œè¿›è¡Œæƒ…æ„Ÿè¯†åˆ«</a></li>
<li><a href="../zh-CN461437/index.html">370ä¸ªç¯æ³¡</a></li>
<li><a href="../zh-CN461439/index.html">å¯åŠ¨Reactå’ŒTypeScriptç»„ä»¶åº“</a></li>
<li><a href="../zh-CN461443/index.html">åˆ†æåï¼šæœ‰å…³SKS KeyserveråŠ å¯†å¯†é’¥æœåŠ¡å™¨ç½‘ç»œçš„æœ€æ–°æ”»å‡»çš„å·²çŸ¥ä¿¡æ¯</a></li>
<li><a href="../zh-CN461447/index.html">å…³äºç³»ç»Ÿç®¡ç†å‘˜æ˜¯æ¿’ä¸´ç­ç»çš„ç‰©ç§çš„å²è¯—</a></li>
<li><a href="../zh-CN461449/index.html">PhpStorm 2019.2ï¼šPHP 7.4é”®å…¥çš„å±æ€§ï¼Œé‡å¤çš„Finderï¼ŒEditorConfigï¼ŒShellè„šæœ¬ç­‰</a></li>
<li><a href="../zh-CN461451/index.html">æˆ‘ä¸Haikuçš„ç¬¬äºŒå¤©ï¼šå¾ˆé«˜å…´ï¼Œä½†è¿˜æ²¡å‡†å¤‡å¥½èµ°</a></li>
<li><a href="../zh-CN461453/index.html">æ‹œç§‘åŠªå°”å†é™©è®°ï¼šç«ç®­ï¼Œå®‡èˆªå‘˜ï¼Œè”ç›ŸMS-13çš„å‘å°„å’Œå¤ªç©ºäº’è”ç½‘</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>