<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÜ üïô üñåÔ∏è Enrutador inal√°mbrico de bricolaje üö• üçû üîù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Selecci√≥n de componentes 
2. Lanzar interfaces de red 
3. Configuraci√≥n de un punto de acceso 802.11ac (5 GHz) 
4. Configurando un SSID virtual usa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Enrutador inal√°mbrico de bricolaje</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437634/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/967/b65/9d2/967b659d291d3021a9a93f68b4b305b2.jpg"></div><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Selecci√≥n de componentes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lanzar interfaces de red</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Configuraci√≥n de un punto de acceso 802.11ac (5 GHz)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Configurando un SSID virtual usando hostapd</a> </li></ol><br>  Durante los √∫ltimos diez a√±os, compr√© equipos de red baratos e instal√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DD-WRT</a> para devolver las "funciones" por m√°s de $ 500 que se eliminaron del kernel de Linux en el que se basa el firmware est√°ndar. <br><br>  A pesar de las compilaciones inestables, los errores no corregidos y las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://web.archive.org/web/20160303173311/">disputas</a> , DD-WRT sigue siendo preferible al firmware en existencia.  Pero ahora los componentes dignos son m√°s baratos que nunca, y la comunidad de bricolaje se ha cambiado por completo a Linux (lo estoy mirando, Sr. Raspberry), entonces, ¬øpor qu√© no construir su propio enrutador inal√°mbrico de una vez por todas? <br><a name="habracut"></a><br><a name="1"></a><h1>  Selecci√≥n de componentes </h1><br>  En primer lugar, debe decidir sobre la plataforma: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">x86</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ARM</a> ?  No <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">discutir√© en detalle las diferencias clave</a> , pero brevemente: el primero tiene un mejor rendimiento, mientras que el segundo es m√°s barato y m√°s eficiente en energ√≠a.  Las placas Raspberry Pi (y equivalentes) son extremadamente baratas y probablemente m√°s potentes que la mayor√≠a de los enrutadores comerciales inal√°mbricos, pero las plataformas x86 est√°n muy extendidas y tienen la ventaja de factores de forma estandarizados y puertos de expansi√≥n. <br><br>  Por supuesto, el detalle m√°s importante es el chipset.  Hoy en d√≠a, los est√°ndares de facto son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">802.11n</a> (2.4 GHz) y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">802.11ac</a> (5 GHz), pero elegir controladores para Linux sigue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">siendo un desaf√≠o</a> , especialmente con la compatibilidad con el modo AP (punto de acceso).  En resumen, si no desea problemas, elija los conjuntos de chips <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Atheros</a> .  Los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">controladores ath9k</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ath10k son</a> compatibles, puede encontrarlos f√°cilmente con interfaces USB y / o mini-PCIe. <br><br>  Al menos un controlador de interfaz de red (NIC) es un m√≠nimo necesario, y elija RAM y almacenamiento a su gusto. <br><br><h2>  Lista de materiales </h2><br>  Sacrificando el precio y la potencia, opt√© por la plataforma x86 para una configuraci√≥n modular y relativamente potente disponible para la actualizaci√≥n. <br><br>  <i>Si no necesita un BRAZO, entonces no es necesario un ventilador.</i> <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener">Gigabyte GA-J1900N-D3V</a> (J1900 Quad-core 2 GHz Celeron, dos NIC) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener">Airetos AEX-QCA9880-NX</a> (Dual Band 802.11ac, MIMO) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener">4 GB de RAM</a> (DDR3-LP, 1333 MHz, 1.35 V) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener">Extensi√≥n mPCIe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener">Chasis MX500 mini-ITX</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener">Tres antenas de doble banda RP-SMA de 6dBi +</a> cable <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener">RP-SMA</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener">PicoPSU-90</a> </li><li>  HDD de repuesto 2.5 " </li></ul><br>  La carcasa es espaciosa, con dos orificios preparados para el enchufe de CA / CC.  La instalaci√≥n de la placa base, RAM y Pico-PSU se realiz√≥ sin problemas: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ad/455/84b/7ad45584b277d11fa3f1a7b119759ebc.jpg"><br>  <i><font color="gray">Porno de hierro</font></i> <br><br>  Lo m√°s dif√≠cil fue instalar WiFi mini-PCIe, porque la placa solo admite tarjetas de tama√±o medio: aqu√≠ el cable de extensi√≥n mPCIe vino al rescate.  Tom√© un cable FFC de 20 cm (incluido) para conectar ambos lados del adaptador y fij√© el mini-PCIe al chasis con cinta de doble cara. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/db1/c7a/8f7/db1c7a8f756c70176d86ce9441d5cf7a.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/5bb/b09/5c7/5bbb095c759ac5cd9be3cf316070ab22.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/3a4/e91/9b8/3a4e919b817344fdc03d98bb1e9d001f.jpg"><br>  <i><font color="gray">Mini-PCIe expansor</font></i> <br><br>  Afortunadamente, el chasis viene con tres orificios de antena precortados.  Aqu√≠ est√° el resultado final: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/967/b65/9d2/967b659d291d3021a9a93f68b4b305b2.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3d/82d/a98/c3d82da9842de641d8d3a4dec3cfe517.jpg"><br><br><a name="2"></a><h1>  Software </h1><br>  Est√° claro que ponemos Linux.  Dependiendo del hardware, podr√≠a ser una distribuci√≥n optimizada como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Raspbian</a> (para Raspberry Pi) o cualquier otra distribuci√≥n de Linux que desee.  Como he estado usando Ubuntu durante muchos a√±os, eleg√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ubuntu Server 18.04 LTS</a> , con el que estoy m√°s acostumbrado a trabajar y que tiene soporte a largo plazo. <br><br>  <i>El resto de este art√≠culo supone que est√° utilizando una distribuci√≥n basada en Debian.</i> <br><br>  Si la instalaci√≥n se realiz√≥ correctamente y fue a la consola, defina los nombres de las interfaces: <br><br><pre><code class="bash hljs">$ ip -br a | awk <span class="hljs-string"><span class="hljs-string">'{print $1}'</span></span> lo enp1s0 enp2s0 wlp5s0</code> </pre> <br>  Hay dos NIC integradas en la placa base: estas son <code>enp1s0</code> y <code>enp2s0</code> .  La tarjeta inal√°mbrica aparece como <code>wlp5s0</code> y admite el modo AP, seg√∫n lo previsto: <br><br><pre> <code class="bash hljs">$ iw list ... Supported interface modes: * managed * AP * AP/VLAN * monitor * mesh point</code> </pre> <br>  Ahora podemos describir lo que necesitamos: colocamos la primera NIC como puerto WAN y la segunda la conectamos a la interfaz inal√°mbrica: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e6/f00/dd4/5e6f00dd4994b5dc252d70dda1d325ec.png"><br><br><h2>  Red </h2><br>  Si tiene Ubuntu 18.04, desh√°gase de <code>netplan</code> inmediatamente para volver a admitir / etc / network / interfaces: <br><br><pre> <code class="bash hljs">$ sudo apt-get install ifupdown bridge-utils $ sudo systemctl stop networkd-dispatcher $ sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">disable</span></span> networkd-dispatcher $ sudo systemctl mask networkd-dispatcher $ sudo apt-get purge nplan netplan.io</code> </pre> <br>  Como servidor DHCP / DNS, seleccione <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dnsmasq</a> : <br><br><pre> <code class="bash hljs">$ sudo apt-get install dnsmasq</code> </pre> <br>  Como comenzaremos y configuraremos el proceso <code>dnsmasq</code> trav√©s del <code>dnsmasq</code> <code>post-up</code> , recuerde deshabilitar el demonio en el momento del arranque: <br><br><pre> <code class="bash hljs">$ sudo sed -i <span class="hljs-string"><span class="hljs-string">"s/^ENABLED=1$/ENABLED=0/g"</span></span> /etc/default/dnsmasq</code> </pre> <br>  Escribiremos la configuraci√≥n <b>preliminar</b> de las interfaces de red de acuerdo con el diagrama, incluida la configuraci√≥n m√≠nima de <code>dnsmasq</code> : <br><br><pre> <code class="bash hljs">$ cat /etc/network/interfaces <span class="hljs-comment"><span class="hljs-comment"># Loopback auto lo iface lo inet loopback # WAN interface auto enp1s0 iface enp1s0 inet dhcp # Bridge (LAN) auto br0 iface br0 inet static address 192.168.1.1 network 192.168.1.0 netmask 255.255.255.0 broadcast 192.168.1.255 bridge_ports enp2s0 post-up /usr/sbin/dnsmasq \ --pid-file=/var/run/dnsmasq.$IFACE.pid \ --dhcp-leasefile=/var/lib/misc/dnsmasq.$IFACE.leases \ --conf-file=/dev/null \ --interface=$IFACE --except-interface=lo \ --bind-interfaces \ --dhcp-range=192.168.1.10,192.168.1.150,24h pre-down cat /var/run/dnsmasq.$IFACE.pid | xargs kill</span></span></code> </pre> <br>  <i>La documentaci√≥n <code>/etc/network/interfaces</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a></i> <br><br>  Como puede ver en la secci√≥n <code>post-up</code> , dnsmasq comienza tan pronto como se levanta el puente.  Su configuraci√≥n se realiza solo mediante argumentos de l√≠nea de comando ( <code>--conf-file=/dev/null</code> ), y el proceso se detendr√° cuando la interfaz est√© apagada. <br><br>  La interfaz <code>bridge_ports</code> no se especifica espec√≠ficamente en el <code>wlp5s0</code> , porque <code>hostapd</code> agregar√° al puente autom√°ticamente (brctl puede negarse a hacer esto antes de que hostapd comience a cambiar el modo de interfaz). <br><br>  <i>Consulte la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n de</a> <code>dnsmasq</code> .</i> <br><br>  Ahora puede reiniciar la red (reinicio de red del <code>sudo service networking restart</code> ) o simplemente reiniciar para verificar que la configuraci√≥n de la red sea correcta. <br><br>  Tenga en cuenta: aunque actualmente podemos recibir DHCP de <code>enp2s0</code> , no tendremos <b>conexi√≥n inal√°mbrica</b> (m√°s sobre esto m√°s adelante) <b>ni acceso a Internet</b> (ver m√°s abajo). <br><br><h2>  Enrutamiento </h2><br>  En este punto, debe enrutar paquetes entre las <code>enp2s0</code> LAN ( <code>enp2s0</code> ) y WAN ( <code>enp1s0</code> ) y habilitar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la traducci√≥n de direcciones de red</a> . <br><br>  Habilitar el reenv√≠o de paquetes es f√°cil: <br><br><pre> <code class="bash hljs">$ sudo sysctl -w net.ipv4.ip_forward=1 $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"net.ipv4.ip_forward=1"</span></span> | sudo tee -a /etc/sysctl.conf</code> </pre> <br>  <i>El √∫ltimo comando asegura que la configuraci√≥n se guarde hasta el pr√≥ximo reinicio.</i> <br><br>  La traducci√≥n de direcciones de red es otro asunto, por lo general, debe lidiar con (o m√°s bien combatir) las <code>iptables</code> .  Afortunadamente, la Edad de Piedra termin√≥ hace mucho tiempo, y los muchachos de FireHol hicieron un gran esfuerzo para agregar el nivel necesario de abstracci√≥n: <br><br><pre> <code class="bash hljs">$ sudo apt-get install firehol</code> </pre> <br>  FireHOL es un lenguaje de firewall seguro de √∫ltima generaci√≥n, su configuraci√≥n es f√°cil de entender y accesible.  Ya no necesita escribir declaraciones de <code>iptables</code> : el archivo de configuraci√≥n en s√≠ se traduce en declaraciones de <code>iptables</code> y se aplica seg√∫n sea necesario.  No hay demonio en el fondo. <br><br>  La habilitaci√≥n de la traducci√≥n de direcciones de red para interfaces LAN con la adici√≥n de reglas m√≠nimas de firewall se realiza principalmente: <br><br><pre> <code class="bash hljs">$ cat /etc/firehol/firehol.conf version 6 <span class="hljs-comment"><span class="hljs-comment"># Accept all client traffic on WAN interface enp1s0 wan client all accept # Accept all traffic on LAN interface br0 lan server all accept client all accept # Route packets between LAN and WAN router lan2wan inface br0 outface enp1s0 masquerade route all accept</span></span></code> </pre> <br>  <i>FireHOL est√° escrito por personas para personas, la documentaci√≥n est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .</i> <br><br>  Puede verificar la configuraci√≥n iniciando manualmente <code>firehol</code> ( <code>sudo firehol start</code> ) y conectando la computadora port√°til al puerto LAN: <b>ahora puede conectarse en l√≠nea</b> si el puerto WAN est√° conectado. <br><br>  Antes de reiniciar, <b>aseg√∫rese de</b> editar <code>/etc/default/firehol</code> para permitir que FireHol se inicie en el arranque: <br><br><pre> <code class="bash hljs">$ sudo sed -i -E <span class="hljs-string"><span class="hljs-string">"s/^START_FIREHOL=.+$/START_FIREHOL=YES/g"</span></span> /etc/default/firehol</code> </pre> <br>  <i>No entrar√© en detalles de toda la sintaxis de <code>firehol</code> , el archivo de configuraci√≥n se explica por s√≠ mismo, recomiendo <code>firehol</code> la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> en caso de una configuraci√≥n m√°s compleja.</i>  <i>Si est√° realmente interesado en lo que <code>firehol</code> hizo con <code>iptables</code> , simplemente escriba <code>sudo firehol status</code> en la l√≠nea de comando.</i> <br><br><h2>  Punto de acceso inal√°mbrico </h2><br>  Obviamente, gestionaremos el punto de acceso usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hostapd</a> : <br><br><pre> <code class="bash hljs">$ sudo apt-get install hostapd</code> </pre> <br>  A continuaci√≥n encontrar√° un archivo de configuraci√≥n m√≠nimo y casi inexplicable 802.11 n / 2.4 Ghz / WPA2-AES: <br><br><pre> <code class="bash hljs">$ cat /etc/hostapd/hostapd-simple.conf <span class="hljs-comment"><span class="hljs-comment">#### Interface configuration #### interface=wlp5s0 bridge=br0 driver=nl80211 ##### IEEE 802.11 related configuration ##### ssid=iCanHearYouHavingSex hw_mode=g channel=1 auth_algs=1 wmm_enabled=1 ##### IEEE 802.11n related configuration ##### ieee80211n=1 ##### WPA/IEEE 802.11i configuration ##### wpa=2 wpa_key_mgmt=WPA-PSK rsn_pairwise=CCMP wpa_passphrase=YouCantGuess</span></span></code> </pre> <br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Consulte</a> <code>hostpad.conf</code> documentaci√≥n en <code>/usr/share/doc/hostapd/examples/hostapd.conf</code></i> . <br><br>  La configuraci√≥n descrita se puede probar manualmente: <br><br><pre> <code class="bash hljs">$ sudo hostapd /etc/hostapd/hostapd-simple.conf</code> </pre> <br>  Si todo va bien, <b>aparecer√°</b> una <b>conexi√≥n inal√°mbrica</b> .  Si est√° satisfecho con el resultado, <b>no olvide</b> cambiar la configuraci√≥n para iniciar <code>hostapd</code> tan pronto como la interfaz se eleve (como se muestra a continuaci√≥n). <br><br>  <b>Aqu√≠ est√° su final <code>/etc/network/interfaces:</code></b> <br><br><pre> <code class="bash hljs">$ cat /etc/network/interfaces <span class="hljs-comment"><span class="hljs-comment"># Loopback auto lo iface lo inet loopback # WAN interface auto enp1s0 iface enp1s0 inet dhcp # Bridge (LAN) auto br0 iface br0 inet static address 192.168.1.1 network 192.168.1.0 netmask 255.255.255.0 broadcast 192.168.1.255 bridge_ports enp2s0 post-up /usr/sbin/hostapd \ -P /var/run/hostapd.$IFACE.pid \ -B /etc/hostapd/hostapd-simple.conf post-up /usr/sbin/dnsmasq \ --pid-file=/var/run/dnsmasq.$IFACE.pid \ --dhcp-leasefile=/var/lib/misc/dnsmasq.$IFACE.leases \ --conf-file=/dev/null \ --interface=$IFACE --except-interface=lo \ --bind-interfaces \ --dhcp-range=192.168.1.10,192.168.1.150,24h pre-down cat /var/run/dnsmasq.$IFACE.pid | xargs kill pre-down cat /var/run/hostapd.$IFACE.pid | xargs kill</span></span></code> </pre> <br><a name="3"></a><h1>  Configuraci√≥n de un punto de acceso 802.11ac (5 GHz) </h1><br><h2>  Escaneo pasivo </h2><br>  De acuerdo con la documentaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Airetos AEX-QCA9880-NX</a> , el conjunto de chips admite 802.11ac, por lo que podemos dejar los canales llenos de 2,4 GHz en el para√≠so de 5 GHz. <br><br>  Veamos qu√© frecuencias son compatibles: <br><br><pre> <code class="plaintext hljs">$ iw list ... Frequencies: * 2412 MHz [1] (20.0 dBm) * 2417 MHz [2] (20.0 dBm) * 2422 MHz [3] (20.0 dBm) * 2427 MHz [4] (20.0 dBm) * 2432 MHz [5] (20.0 dBm) * 2437 MHz [6] (20.0 dBm) * 2442 MHz [7] (20.0 dBm) * 2447 MHz [8] (20.0 dBm) * 2452 MHz [9] (20.0 dBm) * 2457 MHz [10] (20.0 dBm) * 2462 MHz [11] (20.0 dBm) * 2467 MHz [12] (disabled) * 2472 MHz [13] (disabled) * 2484 MHz [14] (disabled) ... Frequencies: * 5180 MHz [36] (17.0 dBm) (no IR) * 5200 MHz [40] (17.0 dBm) (no IR) * 5220 MHz [44] (17.0 dBm) (no IR) * 5240 MHz [48] (17.0 dBm) (no IR) * 5260 MHz [52] (23.0 dBm) (no IR, radar detection) * 5280 MHz [56] (23.0 dBm) (no IR, radar detection) * 5300 MHz [60] (23.0 dBm) (no IR, radar detection) * 5320 MHz [64] (23.0 dBm) (no IR, radar detection) * 5500 MHz [100] (23.0 dBm) (no IR, radar detection) * 5520 MHz [104] (23.0 dBm) (no IR, radar detection) * 5540 MHz [108] (23.0 dBm) (no IR, radar detection) * 5560 MHz [112] (23.0 dBm) (no IR, radar detection) * 5580 MHz [116] (23.0 dBm) (no IR, radar detection) * 5600 MHz [120] (23.0 dBm) (no IR, radar detection) * 5620 MHz [124] (23.0 dBm) (no IR, radar detection) * 5640 MHz [128] (23.0 dBm) (no IR, radar detection) * 5660 MHz [132] (23.0 dBm) (no IR, radar detection) * 5680 MHz [136] (23.0 dBm) (no IR, radar detection) * 5700 MHz [140] (23.0 dBm) (no IR, radar detection) * 5720 MHz [144] (23.0 dBm) (no IR, radar detection) * 5745 MHz [149] (30.0 dBm) (no IR) * 5765 MHz [153] (30.0 dBm) (no IR) * 5785 MHz [157] (30.0 dBm) (no IR) * 5805 MHz [161] (30.0 dBm) (no IR) * 5825 MHz [165] (30.0 dBm) (no IR) ...</code> </pre> <br>  En la lista anterior, vemos que el chipset admite los canales 1-14 (2.4 GHz) y los canales 36-165 (5 GHz), pero ¬ønot√≥ el indicador de <code>no IR</code> ? <br><br>  La bandera <code>no IR</code> indica que <i>no hay radiaci√≥n iniciadora</i> (es decir, <i>exploraci√≥n pasiva</i> ).  Esto significa que este modo est√° prohibido en el caso de que el dispositivo sea el primero en iniciar la radiaci√≥n (incluidas las <b>balizas</b> ).  En otras palabras, <b>¬°no puede ejecutar el punto de acceso en estos canales</b> ! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/03f/743/e75/03f743e7505714ae9864dcce2b5b4964.gif"></div><br><br><h2>  Requisitos reglamentarios </h2><br>  La situaci√≥n anterior se explica por los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">requisitos reglamentarios de Linux</a> , que regulan el uso del espectro de radiofrecuencia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">seg√∫n el pa√≠s</a> . <br><br>  Pero oye! <br><br>  Vivo en los EE. UU., Y el enlace dice que tengo derecho a iniciar la radiaci√≥n en los canales 36-48, entonces, ¬øqu√© pasa?  Veamos qu√© dominio regulador est√° actualmente en uso: <br><br><pre> <code class="plaintext hljs">$ iw reg get country 00: DFS-UNSET (2402 - 2472 @ 40), (N/A, 20), (N/A) (2457 - 2482 @ 40), (N/A, 20), (N/A), NO-IR (2474 - 2494 @ 20), (N/A, 20), (N/A), NO-OFDM, NO-IR (5170 - 5250 @ 80), (N/A, 20), (N/A), NO-IR (5250 - 5330 @ 80), (N/A, 20), (0 ms), DFS, NO-IR (5490 - 5730 @ 160), (N/A, 20), (0 ms), DFS, NO-IR (5735 - 5835 @ 80), (N/A, 20), (N/A), NO-IR (57240 - 63720 @ 2160), (N/A, 0), (N/A)</code> </pre> <br>  El problema muestra que el dominio <i>mundial</i> est√° actualmente activo (o no instalado), es decir, los <b>valores m√≠nimos permitidos en cada pa√≠s</b> . <br><br>  Desafortunadamente, no puede instalar manualmente el dominio <code>sudo iw reg set</code> , porque el dominio est√° protegido en la EEPROM: <br><br><pre> <code class="plaintext hljs">$ dmesg | grep EEPROM [ 12.123068] ath: EEPROM regdomain: 0x6c</code> </pre> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5de/5a9/ae2/5de5a9ae216cf2c3f2f9416b4ffa54bc.gif"></div><br><h2>  Parche! </h2><br>  Afortunadamente, los requisitos reglamentarios se procesan en el nivel del controlador, por lo que se pueden cambiar f√°cilmente: encontramos el parche en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">c√≥digo fuente Open-WRT</a> . <br><br>  En primer lugar, no olvide conectar el repositorio de c√≥digo fuente desde <code>/etc/apt/sources.list</code> : <br><br><pre> <code class="bash hljs">$ cat /etc/apt/sources.list ... deb-src http://us.archive.ubuntu.com/ubuntu/ bionic main restricted ...</code> </pre> <br>  Luego prepare el entorno instalando las dependencias necesarias: <br><br><pre> <code class="bash hljs">$ sudo apt-get install build-essential fakeroot $ sudo apt-get build-dep linux</code> </pre> <br>  Descargue las fuentes de su n√∫cleo: <br><br><pre> <code class="bash hljs">$ apt-get <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> linux</code> </pre> <br>  Dado que el parche <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">original</a> Open-WRT no se puede aplicar "tal cual" al √°rbol del kernel de Ubuntu debido a diferencias sutiles en el sistema de compilaci√≥n, tuve que arreglarlo: <br><br><pre> <code class="bash hljs">$ VERSION=$(uname -r) $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> linux-<span class="hljs-variable"><span class="hljs-variable">${VERSION%%-*}</span></span> $ wget -O - https://gist.github.com/renaudcerrato/02de8b2e8dc013bc71326defd2ef062c/raw/a2db325e520e6442c8c12f7599d64ac1b7596a3e/402-ath_regd_optional.patch | patch -p1 -b</code> </pre> <br>  Todo est√° listo para el montaje: <br><br><pre> <code class="bash hljs">$ fakeroot debian/rules clean $ fakeroot debian/rules binary-generic</code> </pre> <br>  Si no hay problemas, ahora puede instalar el kernel fijo encima del anterior: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .. $ sudo dpkg -i linux*.deb</code> </pre> <br>  Reiniciar y listo: <br><br><pre> <code class="bash hljs">$ sudo iw reg <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> US $ iw list ... Frequencies: * 5180 MHz [36] (17.0 dBm) * 5200 MHz [40] (17.0 dBm) * 5220 MHz [44] (17.0 dBm) * 5240 MHz [48] (17.0 dBm) * 5260 MHz [52] (23.0 dBm) (radar detection) * 5280 MHz [56] (23.0 dBm) (radar detection) * 5300 MHz [60] (23.0 dBm) (radar detection) * 5320 MHz [64] (23.0 dBm) (radar detection) * 5500 MHz [100] (23.0 dBm) (radar detection) * 5520 MHz [104] (23.0 dBm) (radar detection) * 5540 MHz [108] (23.0 dBm) (radar detection) * 5560 MHz [112] (23.0 dBm) (radar detection) * 5580 MHz [116] (23.0 dBm) (radar detection) * 5600 MHz [120] (23.0 dBm) (radar detection) * 5620 MHz [124] (23.0 dBm) (radar detection) * 5640 MHz [128] (23.0 dBm) (radar detection) * 5660 MHz [132] (23.0 dBm) (radar detection) * 5680 MHz [136] (23.0 dBm) (radar detection) * 5700 MHz [140] (23.0 dBm) (radar detection) * 5720 MHz [144] (23.0 dBm) (radar detection) * 5745 MHz [149] (30.0 dBm) * 5765 MHz [153] (30.0 dBm) * 5785 MHz [157] (30.0 dBm) * 5805 MHz [161] (30.0 dBm) * 5825 MHz [165] (30.0 dBm) ...</code> </pre> <br>  <i>Para evitar actualizaciones autom√°ticas, es posible que deba <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">corregir la versi√≥n del kernel de Linux</a> .</i> <br><br><h2>  Configuracion </h2><br>  El nuevo <code>hostapd</code> configuraci√≥n de <code>hostapd</code> ser√° bastante simple: <code>hw_mode=a</code> incluye bandas de 5 GHz, y <code>ieee80211ac=1</code> incluye 802.11ac (VHT).  La opci√≥n <code>ieee80211d=1</code> con <code>country_code=US</code> especifica el dominio regulador en el que operamos. <br><br>  Para aprovechar al m√°ximo el ancho de banda, <code>ht_capab</code> y <code>vht_capab</code> deben reflejar las capacidades del equipo: <br><br><pre> <code class="bash hljs">$ iw list ... Band 1: Capabilities: 0x19e3 RX LDPC HT20/HT40 Static SM Power Save RX HT20 SGI RX HT40 SGI TX STBC RX STBC 1-stream Max AMSDU length: 7935 bytes DSSS/CCK HT40 ... Band 2: VHT Capabilities (0x338001b2): Max MPDU length: 11454 Supported Channel Width: neither 160 nor 80+80 RX LDPC short GI (80 MHz) TX STBC RX antenna pattern consistency TX antenna pattern consistency</code> </pre> <br>  Con esto en mente, <b>aqu√≠ est√° el</b> <code>hostapd.conf</code> <b>final</b> : <br><br><pre> <code class="bash hljs">$ cat /etc/hostapd/hostapd.conf <span class="hljs-comment"><span class="hljs-comment">#### Interface configuration #### interface=wlp5s0 bridge=br0 driver=nl80211 ##### IEEE 802.11 related configuration ##### ssid=iCanHearYouHavingSex hw_mode=a channel=0 auth_algs=1 wmm_enabled=1 country_code=US ieee80211d=1 ieee80211h=0 ##### IEEE 802.11n related configuration ##### ieee80211n=1 ht_capab=[HT40+][SHORT-GI-20][SHORT-GI-40][TX-STBC][RX-STBC1][DSSS_CK-40][LDPC][MAX-AMSDU-7935] ##### IEEE 802.11ac related configuration ##### ieee80211ac=1 vht_capab=[MAX-MPDU-11454][RXLDPC][SHORT-GI-80][TX-STBC-2BY1][RX-STBC-1][MAX-A-MPDU-LEN-EXP7][TX-ANTENNA-PATTERN][RX-ANTENNA-PATTERN] vht_oper_chwidth=1 ##### WPA/IEEE 802.11i configuration ##### wpa=2 wpa_key_mgmt=WPA-PSK rsn_pairwise=CCMP wpa_passphrase=YouCantGuess</span></span></code> </pre> <br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Consulte</a> <code>hostpad.conf</code> documentaci√≥n en <code>/usr/share/doc/hostapd/examples/hostapd.conf</code></i> . <br><br>  En este punto, el enrutador inal√°mbrico est√° en pleno funcionamiento, y si necesita una configuraci√≥n m√°s compleja, ahora puede sumergirse en los archivos de configuraci√≥n. <br><br><a name="4"></a><h1>  Configurando un SSID virtual usando hostapd </h1><br>  Independientemente de si desea configurar un punto de acceso de invitado o una red inal√°mbrica dedicada para su VPN, en alg√∫n momento deber√° configurar un SSID virtual. <br><br><h2>  Chart </h2><br>  Basado en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">configuraci√≥n actual</a> , aqu√≠ hay un diagrama actualizado de lo que queremos obtener.  Suponiendo que <code>wlp5s0</code> es la interfaz inal√°mbrica f√≠sica, el SSID virtual se ejecutar√° en la interfaz virtual <code>wlan0</code> usando su propia subred <code>192.168.2.0/24</code> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/096/450/32b/09645032b28e7310ad93b2109efb0860.png"><br><br><h2>  Preparaci√≥n </h2><br>  Primero, verifique que su dispositivo inal√°mbrico sea compatible con m√∫ltiples SSID: <br><br><pre> <code class="bash hljs">$ iw list ... valid interface combinations: * <span class="hljs-comment"><span class="hljs-comment">#{ AP, mesh point } &lt;= 8, total &lt;= 8, #channels &lt;= 1, STA/AP BI must match ...</span></span></code> </pre> <br>  Como puede ver, el conjunto de chips admite hasta ocho puntos de acceso en un canal.  Esto significa que puede configurar hasta siete SSID virtuales, y todos ellos funcionar√°n en el mismo canal. <br><br><h2>  Interfaz de red </h2><br>  De acuerdo con la documentaci√≥n en hostapd.conf, existe una conexi√≥n estricta entre la direcci√≥n MAC de la interfaz f√≠sica y el BSSID de las interfaces virtuales: <br><br><blockquote>  hostapd generar√° una m√°scara BSSID basada en los BSSID que est√°n configurados.  <b>hostapd verificar√° que dev_addr &amp; MASK == dev_addr</b> .  Si este no es el caso, la direcci√≥n MAC de la radio debe cambiarse antes de iniciar hostapd.  Si se configura un BSSID para cada BSS secundario, esta limitaci√≥n no se aplica en hostapd y se pueden usar otras m√°scaras si el controlador los admite (por ejemplo, intercambiar el bit administrado localmente) <br><br>  Los BSSID se asignan en orden a cada BSS, a menos que se especifique un BSSID expl√≠cito utilizando el par√°metro 'bssid'. <br><br>  Si se especifica un BSSID expl√≠cito, debe elegirse de modo que: <br>  - da como resultado una M√ÅSCARA v√°lida que lo cubre y dev_addr <br>  - no es lo mismo que la direcci√≥n MAC de la radio <br>  - no es lo mismo que cualquier otro BSSID especificado expl√≠citamente </blockquote><br>  Para cumplir con estos requisitos y permitir que <code>hostapd</code> asigne autom√°ticamente el BSSID de la (s) interfaz (es) virtual (es), actualizamos la direcci√≥n MAC de la interfaz inal√°mbrica f√≠sica <code>hostapd</code> cero los cuatro bits menos significativos.  Esto es suficiente para 15 BSSID virtuales, mucho m√°s de lo necesario. <br><br>  Primero, determine la direcci√≥n MAC actual: <br><br><pre> <code class="bash hljs">$ ip addr show wlp5s0 | grep link | awk <span class="hljs-string"><span class="hljs-string">'{print $2}'</span></span> 44:c3:06:00:03:eb</code> </pre> <br>  Si borra los √∫ltimos cuatro bits y establece el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bit U / L</a> , obtendr√° la direcci√≥n MAC <code>46:c3:06:00:03:e0</code> . <br><br>  Ahora actualizaremos la configuraci√≥n para establecer la direcci√≥n MAC correcta justo antes de cargar la interfaz, y tambi√©n declararemos una interfaz inal√°mbrica virtual de acuerdo con nuestro diagrama: <br><br><pre> <code class="bash hljs">$ cat /etc/network/interfaces ... <span class="hljs-comment"><span class="hljs-comment"># Physical Wireless auto wlp5s0 iface wlp5s0 inet manual pre-up ip link set dev wlp5s0 address 46:c3:06:00:03:e0 # Virtual Wireless allow-hotplug wlan0 iface wlan0 inet static address 192.168.2.1 network 192.168.2.0 netmask 255.255.255.0 broadcast 192.168.2.255 post-up /usr/sbin/dnsmasq \ --pid-file=/var/run/dnsmasq-wlan0.pid \ --conf-file=/dev/null \ --interface=wlan0 --except-interface=lo \ --bind-interfaces \ --dhcp-range=192.168.2.10,192.168.2.150,24h post-down cat /var/run/dnsmasq-wlan0.pid | xargs kill ...</span></span></code> </pre> <br>  Genial  Uso <code>dnsmasq</code> como servidor DHCP; si√©ntase libre de reemplazarlo con lo que quiera.  Tenga en cuenta que para que la interfaz virtual funcione correctamente, se requiere <code>allow-hotplug</code> . <br><br><h2>  Configuraci√≥n del punto de acceso </h2><br>  Ahora lo m√°s simple: agregue un SSID virtual a la configuraci√≥n actual de <code>hostapd</code> .  Simplemente agregue esto <b>al final del</b> archivo <code>hostapd.conf</code> existente: <br><br><pre> <code class="bash hljs">$ cat /etc/hostapd/hostapd.conf ... <span class="hljs-comment"><span class="hljs-comment">### Virtual SSID(s) ### bss=wlan0 ssid=MyVirtualSSID wpa=2 wpa_key_mgmt=WPA-PSK rsn_pairwise=CCMP wpa_passphrase=you_cant_guess</span></span></code> </pre> <br>  En el ejemplo, utilic√© el cifrado WPA2, pero la mayor√≠a de las opciones de interfaz de radio est√°n disponibles aqu√≠ (por ejemplo, <code>channel</code> ).  Puede agregar m√°s SSID virtuales simplemente agregando las l√≠neas en el archivo de configuraci√≥n de acuerdo con las interfaces virtuales declaradas y configuradas correctamente. <br><br>  Ahora reinicie y vea su nuevo SSID junto con la nueva interfaz inal√°mbrica (preste atenci√≥n a la direcci√≥n MAC): <br><br><pre> <code class="bash hljs">$ ip addr show wlan0 | grep link | awk <span class="hljs-string"><span class="hljs-string">'{print $2}'</span></span> 46:c3:06:00:03:e1</code> </pre> <br>  <b>Eso es todo chicos!</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/437634/">https://habr.com/ru/post/437634/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../437622/index.html">Introducci√≥n al servicio Azure Machine Learning</a></li>
<li><a href="../437624/index.html">OpenSceneGraph: Conceptos b√°sicos de textura</a></li>
<li><a href="../437626/index.html">Rendimiento de la plataforma de negociaci√≥n con un ejemplo simple</a></li>
<li><a href="../437630/index.html">Los principales anuncios de Microsoft de la conferencia BETT</a></li>
<li><a href="../437632/index.html">Mash, los fundamentos del lenguaje</a></li>
<li><a href="../437636/index.html">Publicaci√≥n de la aplicaci√≥n en Microsoft Store: algunos cambios para el a√±o</a></li>
<li><a href="../437638/index.html">"¬øCu√°l es el punto de respuesta?" REVISI√ìN DEL NEONIZADOR. Atmotubo y soldadura</a></li>
<li><a href="../437640/index.html">C√≥mo las marcas pueden romper la burbuja de los medios tecnol√≥gicos</a></li>
<li><a href="../437642/index.html">Si las ventanas se abren, entonces alguien lo necesita</a></li>
<li><a href="../437646/index.html">Cosas √∫tiles y no obvias para una impresora 3D: cosas peque√±as para una impresora 3D</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>