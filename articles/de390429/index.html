<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÉüèø ü§≤üèª üõ°Ô∏è Ein einfaches RC Aero Boot bauen üíó üë©üèø‚Äçü§ù‚Äçüë®üèΩ üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Manchmal sehe ich im Internet Fragen von Anf√§ngern, die einen Quadrocopter von Grund auf neu bauen und Firmware daf√ºr schreiben m√∂chten. Ich selbst bi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ein einfaches RC Aero Boot bauen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/390429/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manchmal sehe ich im Internet Fragen von Anf√§ngern, die einen Quadrocopter von Grund auf neu bauen und Firmware daf√ºr schreiben m√∂chten. </font><font style="vertical-align: inherit;">Ich selbst bin so und um das Erstellen von RC-Modellen zu √ºben, habe ich beschlossen, mit etwas Einfacherem zu beginnen. </font></font><br>
<br>
<img src="https://habrastorage.org/files/7dd/6f2/46e/7dd6f246e98e47b8b5f3eda1ccdd14b0.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dem Artikel im Detail f√ºr die Kleinsten beschrieb er den Algorithmus des Bootes, das Bedienfeld und die Auswahl der Komponenten.</font></font><br>
<a name="habracut"></a><br>
<h2> ?</h2><br>
<ol>
<li>;</li>
<li>;</li>
<li>     ;</li>
<li>     ,  -.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Fliegen von Fahrzeugen ist gro√üartig, aber schwierig. </font><font style="vertical-align: inherit;">In der Luft k√∂nnen Sie die Schrauben nicht einfach ausschalten, wenn etwas schief geht. </font><font style="vertical-align: inherit;">Ja, und ein spezifischer Schub ist sehr anst√§ndig, selbst f√ºr Flugzeuge, ganz zu schweigen von Multikoptern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plattform f√ºr diese Art </font></font><br>
<br>
<img src="https://habrastorage.org/files/2ea/857/305/2ea8573051be4afcbe6aaf40c94a753d.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gibt es eine ausf√ºhrliche Beschreibung). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den meisten F√§llen k√∂nnen sie sich nur auf einer k√ºnstlichen glatten Oberfl√§che bewegen, und ihre Kontrolle ist sehr unterschiedlich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber auf dem Wasser k√∂nnen wir √ºberall segeln, was uns in Zukunft die M√∂glichkeit geben kann, einen Autopiloten mit GPS zu bauen. </font><font style="vertical-align: inherit;">Das klassische Design mit einem Propeller wird f√ºr mich durch die Wellenausgangseinheit aus dem Geh√§use kompliziert - ich kann mir nicht vorstellen, wie ich es abdichten soll. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weitere Vorteile eines Luftantriebssystems:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es kann auf verschiedene Plattformen gestellt werden: ein Boot, einen Schlitten, ein St√ºck Schaum ...</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es f√§ngt sich nicht am Boden oder an Algen.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ger√§t muss sich drehen k√∂nnen. </font><font style="vertical-align: inherit;">Es gibt 3 M√∂glichkeiten:</font></font><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Schraube + Lenkrad f√ºr Kurven</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Schraube + das Drehsystem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwei feste Schrauben. </font><font style="vertical-align: inherit;">Das Drehen durch √Ñndern ihres Verlangens ist der einfachste Weg. </font><font style="vertical-align: inherit;">Er hat es benutzt.</font></font></li>
</ol><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fernbedienung</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funktionsprinzip</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 Joystick + mehrere Schalter. </font><font style="vertical-align: inherit;">Die Aufgabe der Fernbedienung besteht darin, Daten √ºber die Position des Joystick-Griffs zu senden und mehrmals pro Sekunde zu wechseln.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was tun?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst ben√∂tigen Sie einen Funksender. Die billigste Option ist NRF24L01 + und kostet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,85 USD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zweitens ben√∂tigen Sie einen Joystick. Noch </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 Dollar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mehrere Schalter - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,12 $</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, all dies ist f√ºr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,13 US-Dollar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf einem St√ºck Leiterplatte fixiert </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bereits $ 2.1 gez√§hlt, aber noch MK und Essen brauchen. Hier ist nicht alles so klar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit Blick auf die Zukunft werde ich sagen, dass ATmega8 oder STM8S103F3P6 v√∂llig ausreichend sind, aber da ich dieses Projekt lange Zeit gestartet habe und wenig Erfahrung gesammelt habe, habe ich es in das Arduino Pro Mini-Bedienfeld und in das Arduino Nano-Boot (ATmega32P √ºberall) geschlagen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Fernbedienung noch ben√∂tigt:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stromrichter 0,9 - 5 V -&gt; 5 V f√ºr die Stromversorgung von Arduino f√ºr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,35 USD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (USB-Anschluss kann zusammen mit einem Teil der Platine aus Gr√ºnden der Kompaktheit abgebrochen werden);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der 3,3-V-Stabilisator AMS1117-3.3 f√ºr die Stromversorgung des Funkmoduls kostet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,03 USD pro Einheit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Batteriefach f√ºr Ein-Finger-Batterie f√ºr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,15 USD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insgesamt plus 0,53 USD. </font><font style="vertical-align: inherit;">Abgesehen von der Steuerung, einem Paar Kondensatoren und Dr√§hten betragen die Kosten f√ºr die Komponenten der Konsole 2,63 USD.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RC-Modellf√ºllung</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komponenten</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles kommt von den Motoren. </font><font style="vertical-align: inherit;">Welche Motoren Sie kaufen, muss die Elektronik mit einer solchen Leistung installiert werden, und die Basis (Schiff, Schlitten) wird f√ºr die entsprechende Tragf√§higkeit ben√∂tigt. </font><font style="vertical-align: inherit;">Und ideologisch wird alles andere nur ben√∂tigt, um die Schrauben mit der richtigen Geschwindigkeit zu drehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich kaufte diese Motoren mit Propellern </font></font><br>
<br>
<img src="https://habrastorage.org/files/02a/811/047/02a8110476e840e68848408e6fcc4872.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
f√ºr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,88 Dollar pro Paar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich nahm den L293D als Motorfahrer - weitere </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,35 Dollar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und hier ein Haufen Probleme</font></font></b><div class="spoiler_text"> L293D         .                             ,   .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essen. </font><font style="vertical-align: inherit;">Wir ben√∂tigen bis zu drei Versorgungsspannungen:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 V f√ºr die gesamte Elektronik au√üer dem Funkmodul;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,3 V f√ºr das Funkmodul;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f√ºr Motoren so viel wie sie brauchen (meine 4,2 V).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 und 2 erhalten wir das gleiche wie im Bedienfeld, und f√ºr Motoren setzen wir MT3608 f√ºr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,86 $</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun zum lustigen Teil: dem Gyroskop. </font><font style="vertical-align: inherit;">Das MPU-6050-Modul </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kostet 1,53 US-Dollar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es bestand der Wunsch, auch den Beschleunigungsmesser zu verwenden, damit sich das Schiff an Ort und Stelle entfaltet, wenn sich der Joystick zur Seite bewegt. </font><font style="vertical-align: inherit;">Aber am Ende gab er diese Idee auf: eine leichte Neigung, und das System beginnt zu glauben, dass es vorw√§rts oder r√ºckw√§rts beschleunigt. </font><font style="vertical-align: inherit;">Es stellte sich heraus, dass es einfacher war, das Schiff in Position zu bringen, indem die Vorw√§rts- / R√ºckw√§rtsbewegung mit dem Joystick ausgeglichen wurde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie dazu 0,4 USD f√ºr das Batteriefach f√ºr 2 AA-Zellen hinzu und erhalten Sie 6,4 USD Komponenten ohne Controller und Kabel.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Programm</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und wieder gehen wir von den Motoren. </font><font style="vertical-align: inherit;">Jeder der beiden vom L293D angetriebenen Motoren </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann graben oder nicht</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vorw√§rts drehen;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dreh dich zur√ºck;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nicht verdrehen.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schreiben Sie, um das Lesen des Codes zu erleichtern </font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 Funktionen</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motLeftStop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS);<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motLeftForward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{    <font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS;<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motLeftBackward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS);<font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motRightStop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS);<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motRightForward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS;<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motRightBackward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS);<font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt wollen wir die Drehzahl der Schrauben steuern. </font><font style="vertical-align: inherit;">Nat√ºrlich werden wir dies mit PWM tun. </font><font style="vertical-align: inherit;">Ich wei√ü nicht, ob eine solche PWM in Hardware m√∂glich ist ... Ich habe sie programmgesteuert unterbrochen. </font><font style="vertical-align: inherit;">Deklarieren Sie ein Paar globaler Variablen</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int8_t</span></span> motLeft = <span class="hljs-number"><span class="hljs-number">0</span></span>, motRight = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// -127..+127</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie die Werte dieser Variablen &lt;0 bedeuten, dass Sie r√ºckw√§rts drehen m√ºssen, die Werte&gt; 0 - vorw√§rts, und wenn sie 0 sind, m√ºssen Sie nicht drehen.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir werden Timer-Interrupt-Handler schreiben</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">ISR(TIMER2_OVF_vect)<font></font>
{<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motLeft &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motLeftForward();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motLeft &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motLeftBackward();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motRight &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motRightForward();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motRight &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motRightBackward();<font></font>
}<font></font>
<font></font>
ISR(TIMER2_COMPA_vect)<font></font>
{<font></font>
  motLeftStop();<font></font>
}<font></font>
<font></font>
ISR(TIMER2_COMPB_vect)<font></font>
{<font></font>
  motRightStop();<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um nun die Drehzahl des Propellers zu √§ndern, m√ºssen wir zwei Aktionen ausf√ºhren:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schreiben Sie einen positiven, negativen oder Nullwert in motLeft / motRight (das Modul ist nicht wichtig);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notieren Sie die "Drehzahl" in OCR2A / OCR2B.</font></font></li>
</ol><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schreiben wir dazu noch ein paar Funktionen</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotLeft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// -127..+127</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motLeft = v;  <font></font>
  OCR2A = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) * <span class="hljs-number"><span class="hljs-number">2</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotRight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// -127..+127</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motRight = v;<font></font>
  OCR2B = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) * <span class="hljs-number"><span class="hljs-number">2</span></span>;<font></font>
}<font></font>
</code></pre><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;
</code></pre><br>
            OCR2x   5 (      ).<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt m√ºssen noch die MK-Pins und der Timer konfiguriert werden</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  DDRD |= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS);
  <span class="hljs-comment"><span class="hljs-comment">//TCCR2B |= (1 &lt;&lt; CS22)|(1 &lt;&lt; CS21)|(1 &lt;&lt; CS20); // set up timer with prescaler = 1024.   16 </span></span>
  <span class="hljs-comment"><span class="hljs-comment">//TCCR2B |= (1 &lt;&lt; CS22)|(0 &lt;&lt; CS21)|(0 &lt;&lt; CS20); // set up timer with prescaler = 64.   1 </span></span>
  TCCR2B |= (<span class="hljs-number"><span class="hljs-number">0</span></span> &lt;&lt; CS22)|(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; CS21)|(<span class="hljs-number"><span class="hljs-number">0</span></span> &lt;&lt; CS20); <span class="hljs-comment"><span class="hljs-comment">// set up timer with prescaler = 8.  128 </span></span>
  <span class="hljs-comment"><span class="hljs-comment">//TCCR2B |= (0 &lt;&lt; CS22)|(0 &lt;&lt; CS21)|(1 &lt;&lt; CS20); // set up timer with prescaler = 1.  16 </span></span>
  TIMSK2 |= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; TOIE2)|(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; OCIE2A)|(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; OCIE2B); <span class="hljs-comment"><span class="hljs-comment">// enable overflow interrupt</span></span>
  TCCR2A &amp;= ~(<span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// set WGM20 = 0, WGM21 = 0</span></span>
  TCCR2B &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// set WGM22 = 0</span></span>
  setMotLeft(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  setMotRight(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  sei();<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und Sie k√∂nnen die Motoren einfach steuern, indem Sie die Funktionen setMotLeft (int8_t v) und setMotRight (int8_t v) aufrufen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber wir wollen das Boot falsch steuern! </font><font style="vertical-align: inherit;">Wir wollen Befehle wie "vorw√§rts / r√ºckw√§rts" und "rechts / links" geben! </font><font style="vertical-align: inherit;">Und lassen Sie sie herausfinden, welche Propeller sie daf√ºr drehen muss. </font><font style="vertical-align: inherit;">Au√üerdem m√∂chte ich, dass das Boot selbst den Wendeeffekt von Wind, Str√∂mungen und ... krummen Propellern ausgleicht! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen wir jetzt von der anderen Seite. </font><font style="vertical-align: inherit;">Von der Fernbedienung. </font><font style="vertical-align: inherit;">Im einfachsten Fall ist der Algorithmus seiner Operation wie folgt:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Denken Sie beim Einschalten an die Ausgangsposition des Joysticks.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lesen Sie im Zyklus die Position des Joysticks ab, subtrahieren Sie die Nullposition davon und senden Sie Daten an das Boot.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Funkmodul unterst√ºtzt Pakete mit bis zu 32 Byte. </font><font style="vertical-align: inherit;">Um uns nicht an die Verschiebungen zu erinnern, werden wir die Aufzeichnung verwenden</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControlStatus</span></span></span><span class="hljs-class">{</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span> x,y;<font></font>
}  controlStatus;<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie folgt</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">    <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> packet[MAX_BUFF]; 
    <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(packet, <span class="hljs-number"><span class="hljs-number">0</span></span>, MAX_BUFF);    <font></font>
    controlStatus.x = (<span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span>)analogRead(<span class="hljs-number"><span class="hljs-number">1</span></span>) - x0;<font></font>
    controlStatus.y = (<span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span>)analogRead(<span class="hljs-number"><span class="hljs-number">0</span></span>) - y0;
    <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>(packet, &amp;controlStatus, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(controlStatus));<font></font>
    Mirf.send(packet);<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(Mirf.isSending()){;};
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der Empf√§ngerseite werden wir genau den gleichen Datensatz deklarieren und </font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir werden es f√ºllen</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">  <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Mirf.dataReady()) { 
    <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> data[MAX_BUFF];<font></font>
    Mirf.getData(data);<font></font>
    <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>(&amp;controlStatus, data, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(controlStatus));<font></font>
    setMotRot(-controlStatus.x);<font></font>
    setMotForward(controlStatus.y); <font></font>
  }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Funktionen setMotRot und setMotForward</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schreiben Sie die Werte in die globalen Variablen motRot und motForward</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotRot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v)&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motRot = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)v;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotForward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v)&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motForward = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)v;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und lassen Sie uns zu den interessantesten √ºbergehen. </font><font style="vertical-align: inherit;">Um zu konvertieren "Biegen Sie mit einer Geschwindigkeit von 5 Grad pro Sekunde nach links ab und bewegen Sie sich ein wenig vorw√§rts!" </font><font style="vertical-align: inherit;">zu "linker Motor 10% zur√ºck, rechter 20% vorw√§rts!". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wurde </font><font style="vertical-align: inherit;">viel dar√ºber geschrieben, </font><font style="vertical-align: inherit;">was </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PID-Regler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sind. </font><font style="vertical-align: inherit;">Ich habe nur zwei Komponenten f√ºr die Rotation verwendet:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proportional;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integral.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und zum Hin- und Herbewegen benutzte der Regler es nicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nehmen wir ein Beispiel:</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> iDeltaRot = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motTick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> rot = getRotAvg(); <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> deltaRot = rot - motRot * rotMaxSpeed / <span class="hljs-number"><span class="hljs-number">512</span></span>;<font></font>
  iDeltaRot += deltaRot;<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> motRight = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motForward * forwardMult - deltaRot * rotMult - iDeltaRot * iDeltaRotMult, <font></font>
          motLeft  = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motForward * forwardMult + deltaRot * rotMult + iDeltaRot * iDeltaRotMult;  <font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> motMax = max(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(motRight), <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(motLeft));
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motMax &gt; <span class="hljs-number"><span class="hljs-number">127</span></span>){<font></font>
    motRight = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motRight * <span class="hljs-number"><span class="hljs-number">127</span></span> / motMax;<font></font>
    motLeft  = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motLeft  * <span class="hljs-number"><span class="hljs-number">127</span></span> / motMax;<font></font>
  }<font></font>
  <font></font>
  setMotRight(motRight);<font></font>
  setMotLeft(motLeft);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Code wurde vereinfacht, um sich auf wichtige Teile zu konzentrieren. Das Archiv wird die Vollversion haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was machen wir hier?</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir berechnen die Differenz zwischen der tats√§chlichen Rotationsgeschwindigkeit des Bootes (rot) und der gew√ºnschten (motRot * rotMaxSpeed);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir berechnen die gew√ºnschten Drehzahlen der Schrauben motRight und motLeft.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn die gew√ºnschten Drehzahlen das maximal m√∂gliche √ºberschreiten, reduzieren wir sie unter Beibehaltung des Verh√§ltnisses zwischen ihnen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir nennen setMotRight / setMotLeft, das uns bereits bekannt ist.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist alles! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist der gesamte Bootssteuerungsalgorithmus! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ist es schwierig </font><font style="vertical-align: inherit;">Ich denke nicht. </font><font style="vertical-align: inherit;">Im Verlauf des Testens und Tunings traten jedoch eine ganze Reihe von Problemen auf, die zu zahlreichen Abst√ºrzen f√ºhren w√ºrden, wenn es sich um ein Flugzeug handeln w√ºrde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die beschriebene Funktion enth√§lt 4 Koeffizienten:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forwardMult - Empfindlichkeit f√ºr die Bewegung des Joysticks vorw√§rts / r√ºckw√§rts;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rotMaxSpeed ‚Äã‚Äã- die gew√ºnschte Drehzahl, wenn der Joystick ganz nach rechts / links gekippt wird;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rotMult - Koeffizient der proportionalen Komponente (wie stark beeinflusst die Abweichung der aktuellen Drehzahl von der gew√ºnschten die Drehung);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iDeltaRotMult - Koeffizient der Integralkomponente (wie stark sich die Abweichung des aktuellen Drehwinkels vom gew√ºnschten auf die Drehung auswirkt).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Koeffizienten werden experimentell eingestellt und die Reaktion des Bootes auf den Joystick und die √§u√üeren Entfaltungseinfl√ºsse h√§ngt von ihnen ab.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Statusanzeige</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Debuggen / Optimieren wird die Serie ‚ÄûWarum reagiert das Boot auf den Joystick nicht so, wie ich es m√∂chte?‚Äú Verwirrt sein. </font><font style="vertical-align: inherit;">Einige Punkte k√∂nnen durch Anzeigen von Debugging-Informationen auf einem PC debuggt werden. Es w√§re jedoch bequemer zu verstehen, was direkt vor Ort geschieht. </font><font style="vertical-align: inherit;">Zuerst habe ich zwei Optionen in Betracht gezogen:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laptop;</font></font></li>
<li><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LCD Nokia 5110</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/a23/fc5/65d/a23fc565d564418bad9c2ad6a1144f0c.jpg"><br>
</div></div></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Nachteile beider sind verst√§ndlich: Der Laptop ist gro√ü und unbequem mitzunehmen, und auf dem Nokia 5110-Display k√∂nnen Sie nicht gleichzeitig eine gro√üe Anzahl von Bootsstatusparametern anzeigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe eine Kreuzung zwischen ihnen gemacht: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nextion Enhanced NX4827K043 - Generisches 4,3-Zoll-HMI-Touch-Display</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dank des Touchscreens k√∂nnen Sie die Bootsparameter unterwegs schnell und bequem anpassen. </font><font style="vertical-align: inherit;">Dies ist eine Art Computer, bestehend aus:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikrocontroller GD32F103R8T6;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDRAM Winbond W9864G6KH-6 (8 MB);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Winbond W25Q256FVFG Flash-Speicher (32 MB, 100.000 Umschreibzyklen, was sehr gut ist);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPGA Altera MAX II EPM570T144C5N.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles in der Baugruppe sieht folgenderma√üen aus (anklickbar): </font><font style="vertical-align: inherit;">
Dieser Computer / dieses Display ist eine Black Box und auf die Interaktion mit einer Person ausgerichtet. Sogar das vorhandene GPIO wird zum Anschlie√üen von Tasten und Anzeigen gesch√§rft. Ihr </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Expansion Board</font></a><font style="vertical-align: inherit;"> best√§tigt dies. Die Verwendung der eingebauten Steuerung als Fernbedienung f√ºr das Boot (zum Lesen des Joysticks, zum Datenaustausch mit dem Funkmodul NRF24L01 +) schl√§gt daher fehl. Um mit dem Mikrocontroller zu interagieren, gibt es UART und ... das ist alles. </font><font style="vertical-align: inherit;">
Wie und was mit diesem Display gemacht werden kann, ist geschrieben. Es gibt eine Reihe von Videos auf Youtube. Siehe zum Beispiel </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">dies</font></a></font><br>
<br>
<a href=""><img src="https://habrastorage.org/files/b78/b67/ad2/b78b67ad2ffd4f00a0e82daae979dad8.JPG"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- dort ist alles deutlich zu sehen. </font><font style="vertical-align: inherit;">Da dieses Display jedoch teurer ist als alle anderen Komponenten des Bootes und der Konsole zusammen, werde ich meine Eindr√ºcke von der Arbeit damit detaillierter beschreiben. </font><font style="vertical-align: inherit;">Vielleicht hilft dies jemandem zu verstehen, ob diese Option f√ºr ihn geeignet ist oder ob der Nokia 5110 Laptop / Display vorzuziehen ist. </font><font style="vertical-align: inherit;">Vorteile von Nextion Enhanced NX4827K043:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sehr einfach zu bedienen. </font><font style="vertical-align: inherit;">Es gibt einfache Dokumentationen, Beispiele, Videos auf Youtube, ... In ein paar Stunden k√∂nnen Sie es von Grund auf neu herausfinden. </font><font style="vertical-align: inherit;">Fast alles, was Sie √ºber ihn wissen m√ºssen, befindet sich auf zwei Seiten: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiki-Seite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Befehlssatz</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sehr schnelle Entwicklung. </font><font style="vertical-align: inherit;">Ein visueller Editor wie Visual Studio (nur einfacher). </font><font style="vertical-align: inherit;">Ich warf Komponenten und alles funktioniert.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hochwertige Komponenten. </font><font style="vertical-align: inherit;">Der gleiche Flash-Speicher f√ºr 100.000 Umschreibungszyklen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Debugger, der eine Anzeige mit einem PC simulieren und √ºber einen COM-Port mit Ihrem MK kommunizieren kann. </font><font style="vertical-align: inherit;">Erm√∂glicht es Ihnen, das Ger√§t vollst√§ndig zu entwickeln, zu debuggen und ein Display zu kaufen, nur wenn alles funktioniert.</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obwohl es ein Problem mit ihm gibt</font></font></b><div class="spoiler_text">            .    . ,         ,         .<br>
</div></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Widerstandssensor </font><font style="vertical-align: inherit;">Sie k√∂nnen relativ kleine Steuerelemente erstellen und diese mit Ihrem Fingernagel oder einem beliebigen Stift stechen.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachteile:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preis </font><font style="vertical-align: inherit;">50 US-Dollar sind immer noch viel f√ºr ein 4,3-Zoll-Display.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt nur wenige vorhandene Komponenten, nur wenige Komponenteneinstellungen. Wie Sie eigene Komponenten erstellen, ist nicht klar. </font><font style="vertical-align: inherit;">Dies wird teilweise durch die Funktionen zum Zeichnen von Grundelementen (Linien, Rechtecke, Kreise, ...) ausgeglichen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Standard-Messger√§tekomponente flackert beim Upgrade.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nein (zumindest habe ich keine Transparenz gefunden).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leistungsbedarf: 4,75-7 V und durchschnittlicher Strom 250 mA. </font><font style="vertical-align: inherit;">Wenn die Spannung abf√§llt, beginnt die Anzeige zu blinken.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nur UART. </font><font style="vertical-align: inherit;">K√∂nnte mit ihm √ºber SPI und I¬≤C kommunizieren.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPIO-Ausgang nur f√ºr eine Schleife (kein Kamm 2,54 mm), kein ADC.</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen vermittelt das Display den Eindruck eines sehr hochwertigen Produkts, mit dem leicht und angenehm zu arbeiten ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Display kann zwei Aufgaben gleichzeitig ausf√ºhren:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Statusanzeige. </font><font style="vertical-align: inherit;">Ich interessiere mich haupts√§chlich f√ºr:</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Drehzahlen" der Schrauben;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Wert der Variablen iDeltaRot gibt an, um wie viel sich der gew√ºnschte Drehwinkel vom gew√ºnschten unterscheidet.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bootsdrehzahl;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drehwinkel des Bootes;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H√§ufigkeit des Empfangs von Paketen von der Fernbedienung;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die H√§ufigkeit der Aufrufe der motTick-Funktion.</font></font></li>
</ul><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einstellen von Parametern, n√§mlich der oben beschriebenen, forwardMult, rotMaxSpeed, rotMult, iDeltaRotMult.</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2 Seiten erstellt (zur Qualit√§tsbewertung anklickbar):</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indikationen:</font></font><br>
 <br>
<a href=""><img src="https://habrastorage.org/files/6f7/aaa/571/6f7aaa57152e48a5b92e6555d230d863.JPG"></a><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parametereinstellungen: </font><font style="vertical-align: inherit;">
Erste 4 Spalten von links nach rechts: forwardMult, rotMult, iDeltaRotMult, rotMaxSpeed.</font></font><br>
 <br>
<a href=""><img src="https://habrastorage.org/files/256/9f6/22d/2569f622dc234426b0dc8d4352a8488e.JPG"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
</li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Video Testboot auf dem Boden:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/kwHMI4QUjIs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Reaktion des Bootes auf einen externen Entfaltungseffekt bei verschiedenen iDeltaRotMult (Integralkoeffizienten):</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3numZhKZnic" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Demonstration des Einflusses von Parametern auf Wasser:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/QuOtIunGEME" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Video im offenen Wasser konnte nicht aufgenommen werden. </font><font style="vertical-align: inherit;">Sie k√∂nnen davon ausgehen, dass sein Handling gut ist und die H√∂chstgeschwindigkeit nicht sehr hoch ist.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigenschaften</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stab 9 g;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gewicht 115 g, davon wiegen Batterien 52 g;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die maximale Beschleunigung betr√§gt 0,77 m / s ^ 2. </font><font style="vertical-align: inherit;">F√ºr Menschen mit 5 km / h w√ºrde das Boot in 1,8 s beschleunigen, wenn es keinen Wasserwiderstand g√§be.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Kosten f√ºr Komponenten betragen ca. 15 USD, wenn Sie den Arduino Nano sowohl in der Fernbedienung als auch im Boot verwenden (ohne Display und Batterien).</font></font></li>
</ul><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr diejenigen, die etwas Funkgesteuertes sammeln m√∂chten, empfehle ich, mit einem Schiff mit zwei festen Propellern zu beginnen. </font><font style="vertical-align: inherit;">Meiner Meinung nach ist dies das Einfachste, was in diesem Bereich getan werden kann. </font></font><br>
<br>
<a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archiv mit Projekten</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Und zum Schluss, damit es etwas gibt, nach dem man streben kann, hier ein Video eines erstaunlichen Ger√§ts:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_iqqHAWJq_0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de390429/">https://habr.com/ru/post/de390429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de390419/index.html">Verbinden Sie die LED-Matrix mit dem Raspberry pi</a></li>
<li><a href="../de390421/index.html">$ 8 DVB-Stick-Radio - Erkundung von SDR mit GNURadio</a></li>
<li><a href="../de390423/index.html">Die Zombie-Apokalypse-Klausel von Amazon wurde zu den Richtlinien f√ºr Webdienste von Amazon hinzugef√ºgt</a></li>
<li><a href="../de390425/index.html">Roboter lernten, wie man Ramen kocht, ihre Farbe und Gr√∂√üe √§ndert</a></li>
<li><a href="../de390427/index.html">Arduino Code Debugging (AVR). Teil 1. Virtuelles Debuggen</a></li>
<li><a href="../de390431/index.html">Heimprojektoren Epson EH-TW5210, EH-TW5300 und EH-TW5350 - besser, schneller, heller</a></li>
<li><a href="../de390435/index.html">Mathematiker haben eine Karte der Verbindungen im Universum von Star Wars erstellt</a></li>
<li><a href="../de390437/index.html">Selbstgemachtes elektronisches H√∂henmesser-Variometer mit Ton- und Lichtwarnsignalen</a></li>
<li><a href="../de390439/index.html">Spiegel-Interband-Andreev-Reflexionen an den Van-der-Waals-Kontakten zwischen Graphen und Niobselenid</a></li>
<li><a href="../de390441/index.html">Eclipse #include <Arduino.h></a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>