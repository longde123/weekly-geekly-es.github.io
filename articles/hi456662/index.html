<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯН░ ЁЯзСЁЯП╛ ЁЯСПЁЯП╝ рдкрд░реАрдХреНрд╖рдг-рд╕рдВрдЪрд╛рд▓рд┐рдд рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдЪрд┐рдХрд┐рддреНрд╕рдХ рдкрд░ рдкреИрд╕реЗ рдХреИрд╕реЗ рдмрдЪрд╛рдПрдВ ЁЯСйЁЯП╝тАНтЪЦя╕П ЁЯСМ ЁЯТМ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдХреНрдпрд╛ рдЖрдкрдХреА рдХрднреА рдпрд╣ рд╣рд╛рд▓рдд рд╣реБрдИ рд╣реИ? 


 рдореИрдВ рдЖрдкрдХреЛ рджрд┐рдЦрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ TDD рдХреИрд╕реЗ рдХреЛрдб рдХреА рдЧреБрдгрд╡рддреНрддрд╛ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░ рд╕рдХрддрд╛ рд╣реИред 
 рдХреНрдпреЛрдВрдХ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдкрд░реАрдХреНрд╖рдг-рд╕рдВрдЪрд╛рд▓рд┐рдд рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдЪрд┐рдХрд┐рддреНрд╕рдХ рдкрд░ рдкреИрд╕реЗ рдХреИрд╕реЗ рдмрдЪрд╛рдПрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/leroy_merlin/blog/456662/">  рдХреНрдпрд╛ рдЖрдкрдХреА рдХрднреА рдпрд╣ рд╣рд╛рд▓рдд рд╣реБрдИ рд╣реИ? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bl/td/so/bltdsone5ewlnnqa_aamnii9rl8.jpeg" alt="рдЫрд╡рд┐"></div><br>  рдореИрдВ рдЖрдкрдХреЛ рджрд┐рдЦрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ TDD рдХреИрд╕реЗ рдХреЛрдб рдХреА рдЧреБрдгрд╡рддреНрддрд╛ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░ рд╕рдХрддрд╛ рд╣реИред <br>  рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕ рдореБрджреНрджреЗ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рддреЗ рд╕рдордп рдореБрдЭреЗ рдЬреЛ рдХреБрдЫ рднреА рдорд┐рд▓рд╛ рд╡рд╣ рдХрд╛рдлреА рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рдерд╛ред <br>  рдРрд╕рд╛ рд╣реБрдЖ рдХрд┐ рдореИрдВ рджреЛ рд▓рдЧрднрдЧ рд╕рдорд╛рди рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реБрдЖ: рдПрдХ рд╢рд╛рд╕реНрддреНрд░реАрдп рд╢реИрд▓реА рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛, рдХреНрдпреЛрдВрдХрд┐ рдореБрдЭреЗ рддрдм TDD рдХрд╛ рдкрддрд╛ рдирд╣реАрдВ рдерд╛, рдФрд░ рджреВрд╕рд░рд╛ - рд╕рд┐рд░реНрдл TDD рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗред <br><br>  рдиреАрдЪреЗ рдореИрдВ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рд╕рдмрд╕реЗ рдмрдбрд╝реЗ рдЕрдВрддрд░ рдХрд╣рд╛рдВ рдереЗред <br><br>  рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ, рдпрд╣ рдореЗрд░реЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рдерд╛, рдХреНрдпреЛрдВрдХрд┐ рд╣рд░ рдмрд╛рд░ рдЬрдм рдХрд┐рд╕реА рдиреЗ рдореЗрд░реЗ рдХреЛрдб рдореЗрдВ рдмрдЧ рдкрд╛рдпрд╛, рддреЛ рдореИрдВрдиреЗ рдЖрддреНрдо-рд╕рдореНрдорд╛рди рдХреЗ рд▓рд┐рдП рдПрдХ рднрд╛рд░реА рдорд╛рдЗрдирд╕ рдХреЛ рдкрдХрдбрд╝рд╛ред  рд╣рд╛рдВ, рдореИрдВ рд╕рдордЭ рдЧрдпрд╛ рдХрд┐ рдХреАрдбрд╝реЗ рд╕рд╛рдорд╛рдиреНрдп рд╣реИрдВ, рд╣рд░ рдХреЛрдИ рдЙрдиреНрд╣реЗрдВ рд▓рд┐рдЦрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣реАрдирддрд╛ рдХреА рднрд╛рд╡рдирд╛ рджреВрд░ рдирд╣реАрдВ рд╣реБрдИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕реЗрд╡рд╛ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдореБрдЭреЗ рдХрднреА-рдХрднреА рдПрд╣рд╕рд╛рд╕ рд╣реБрдЖ рдХрд┐ рдореИрдВрдиреЗ рдЦреБрдж рдПрдХ рдРрд╕рд╛ рд▓рд┐рдЦрд╛ рд╣реИ рдХрд┐ рдореЗрд░реЗ рд╣рд╛рдереЛрдВ рдХреЛ рдЦреБрдЬрд▓реА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдм рдХреБрдЫ рдлреЗрдВрдХ рджреЗрдирд╛ рдФрд░ рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдирд╛ред  рдФрд░ рдпрд╣ рдХреИрд╕реЗ рд╣реБрдЖ рдпрд╣ рд╕рдордЭ рд╕реЗ рдмрд╛рд╣рд░ рд╣реИред  рдХрд┐рд╕реА рддрд░рд╣ рд╕рдм рдХреБрдЫ рд╢реБрд░реБрдЖрдд рдореЗрдВ рдареАрдХ рдерд╛, рд▓реЗрдХрд┐рди рдХреБрдЫ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рдмрд╛рдж рдФрд░ рдереЛрдбрд╝реА рджреЗрд░ рдХреЗ рдмрд╛рдж рдЖрдк рдЖрдБрд╕реВ рдХреЗ рдмрд┐рдирд╛ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЛ рдирд╣реАрдВ рджреЗрдЦ рд╕рдХрддреЗред  рд╣рд╛рд▓рд╛рдБрдХрд┐ рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдмрджрд▓рд╛рд╡ рдХрд╛ рд╣рд░ рдХрджрдо рддрд░реНрдХрд╕рдВрдЧрдд рдерд╛ред  рдЬрд┐рд╕ рднрд╛рд╡рдирд╛ рдХреЛ рдореИрдВ рдЕрдкрдиреЗ рдХрд╛рдо рдХрд╛ рдЙрддреНрдкрд╛рдж рдкрд╕рдВрдж рдирд╣реАрдВ рдХрд░рддрд╛ рдерд╛, рд╡рд╣ рдЗрд╕ рднрд╛рд╡рдирд╛ рдореЗрдВ рд╕рд╣рдЬрддрд╛ рд╕реЗ рдкреНрд░рд╡рд╛рд╣рд┐рдд рд╣реЛ рдЬрд╛рддреА рдереА рдХрд┐ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдореБрдЭ рд╕реЗ рд╣реИ, рдореБрдЭреЗ рдмрд╣рд╛рдиреЗ рджреЗрдВ, рдЬреИрд╕реЗ рдХрд┐ рдЧрдВрджрдЧреА рд╕реЗ рдирд┐рдХрд▓реА рдЧреЛрд▓реАред <br><br>  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдореИрдВ рдЕрдХреЗрд▓рд╛ рдирд╣реАрдВ рд╣реВрдВ рдФрд░ рдореЗрд░реЗ рдХрдИ рд╕рд╣рдпреЛрдЧрд┐рдпреЛрдВ рдХреА рд╕рдВрд╡реЗрджрдирд╛рдПрдВ рд╕рдорд╛рди рд╣реИрдВред  рдФрд░ рдлрд┐рд░ рдореИрдВрдиреЗ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдХрд┐ рдпрд╛ рддреЛ рдореИрдВ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рд▓рд┐рдЦрдирд╛ рд╕реАрдЦреВрдВрдЧрд╛, рдпрд╛ рдпрд╣ рдореЗрд░рд╛ рдкреЗрд╢рд╛ рдмрджрд▓рдиреЗ рдХрд╛ рд╕рдордп рдерд╛ред  рдореИрдВрдиреЗ рдЕрдкрдиреЗ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдореЗрдВ рдХреБрдЫ рдмрджрд▓рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдореЗрдВ рдкрд░реАрдХреНрд╖рдг-рд╕рдВрдЪрд╛рд▓рд┐рдд рд╡рд┐рдХрд╛рд╕ рдХреА рдХреЛрд╢рд┐рд╢ рдХреАред <br><br>  рдЖрдЧреЗ рджреЗрдЦрддреЗ рд╣реБрдП, рдХрдИ рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдореИрдВ рдХрд╣ рд╕рдХрддрд╛ рд╣реВрдВ рдХрд┐ TDD рдПрдХ рдХреНрд▓реАрдирд░ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╡рд┐рдХрд╛рд╕ рдХреЛ рдзреАрдорд╛ рдХрд░ рджреЗрддрд╛ рд╣реИред  рдФрд░ рдпрд╣ рд╣рдореЗрд╢рд╛ рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИ рдФрд░ рд╕рднреА рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рд╣реИред <br><a name="habracut"></a><br><h1>  рдлрд┐рд░ рд╕реЗ рдЯреАрдбреАрдбреА рдХреНрдпрд╛ рд╣реИ </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f39/01c/4ed/f3901c4ed2fee96d90b1a40fc30e9270.jpg" alt="рдЫрд╡рд┐"></div><br><br>  рдЯреАрдбреАрдбреА - рдкрд░реАрдХреНрд╖рдг рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рдХрд╛рд╕ред  рд╡рд┐рдХреА рд▓реЗрдЦ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> ред <br>  рдХреНрд▓рд╛рд╕рд┐рдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдкрд╣рд▓реЗ рдПрдХ рдЖрд╡реЗрджрди рд▓рд┐рдЦрдирд╛ рд╣реИ, рдлрд┐рд░ рдЗрд╕реЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╡рд░ рдХрд░реЗрдВред <br><br>  рдЯреАрдбреАрдбреА рджреГрд╖реНрдЯрд┐рдХреЛрдг - рдкрд╣рд▓реЗ рд╣рдо рдХрдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рдлрд┐рд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрдиред  рд╣рдо рдЕрдореВрд░реНрдд рдХреЗ рд╕реНрддрд░реЛрдВ рд╕реЗ рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВ - рдЙрдЪреНрдЪрддрдо рд╕реЗ рд▓рд╛рдЧреВ рд╣реЛрдиреЗ рддрдХ, рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдкрд░рддреЛрдВ-рдХрдХреНрд╖рд╛рдУрдВ рдореЗрдВ рддреЛрдбрд╝рдХрд░ рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рд╣рдо рдЙрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ <b>рдЖрджреЗрд╢</b> рджреЗрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдХреА рд╣рдореЗрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реЗ рдореБрдХреНрдд рд╣реЛрдирд╛ред <br><br>  рдФрд░ рдЕрдЧрд░ рдореИрдВ рдЗрд╕реЗ рдкрд╣рд▓реА рдмрд╛рд░ рдкрдврд╝рддрд╛ рддреЛ рдореБрдЭреЗ рдХреБрдЫ рднреА рд╕рдордЭ рдореЗрдВ рдирд╣реАрдВ рдЖрддрд╛ред <br>  рдмрд╣реБрдд рд╕рд╛рд░ рд╢рдмреНрдж: рдЖрдЗрдП рдПрдХ рдЙрджрд╛рд╣рд░рдг рджреЗрдЦреЗрдВред <br>  рд╣рдо рдЬрд╛рд╡рд╛ рдореЗрдВ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡рд╕рдВрдд рдЖрд╡реЗрджрди рд▓рд┐рдЦреЗрдВрдЧреЗ, рд╣рдо рдЗрд╕реЗ рдЯреАрдбреАрдбреА рдореЗрдВ рд▓рд┐рдЦреЗрдВрдЧреЗ, рдФрд░ рдореИрдВ рд╡рд┐рдХрд╛рд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рджреМрд░рд╛рди рдФрд░ рдЕрдВрдд рдореЗрдВ рдирд┐рд╖реНрдХрд░реНрд╖ рдирд┐рдХрд╛рд▓рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдЯреАрдбреАрдбреА рдкрд░ рд╕рдордп рдмрд┐рддрд╛рдирд╛ рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред <br><br><h1>  рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдХрд╛рд░реНрдп </h1><br>  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдо рдЗрддрдиреЗ рднрд╛рдЧреНрдпрд╢рд╛рд▓реА рд╣реИрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ TOR рд╣реИред  рдЖрдорддреМрд░ рдкрд░, рд╡рд┐рд╢реНрд▓реЗрд╖рдХ рдЗрд╕рд╕реЗ рдкрд░реЗрд╢рд╛рди рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рдпрд╣ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br>  <i>рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рдПрдХ рдорд╛рдЗрдХреНрд░реЛрд╕реЗрд╡рд╛ рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП рдЬреЛ рдЧреНрд░рд╛рд╣рдХ рдХреЛ рдШрд░ рдкрд░ рдмрд╛рдж рдореЗрдВ рдбрд┐рд▓реАрд╡рд░реА рдХреЗ рд╕рд╛рде рд╕рд╛рдорд╛рди рдмреЗрдЪрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХреА рдЧрдгрдирд╛ рдХрд░реЗрдЧрд╛ред</i>  <i>рдЗрд╕ рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рддреГрддреАрдп-рдкрдХреНрд╖ рдбреЗрдЯрд╛ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рднреЗрдЬреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред</i> <br><br>  рд╡реНрдпрд╡рд╕рд╛рдп рддрд░реНрдХ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИ: рдпрджрд┐ рдХреЛрдИ рд╡рд╕реНрддреБ рдмрд┐рдХреНрд░реА рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рд╣реИ рддреЛ: <br><br><ul><li>  рдЙрддреНрдкрд╛рдж рд╕реНрдЯреЙрдХ рдореЗрдВ рд╣реИ </li><li>  рдареЗрдХреЗрджрд╛рд░ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрдВрдкрдиреА DostavchenKO) рдХреЗ рдкрд╛рд╕ рдЗрд╕реЗ рдЧреНрд░рд╛рд╣рдХ рддрдХ рд▓реЗ рдЬрд╛рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рд╣реИ </li><li>  рдЙрддреНрдкрд╛рдж рдХрд╛ рд░рдВрдЧ - рдиреАрд▓рд╛ рдирд╣реАрдВ (рд╣рдореЗрдВ рдиреАрд▓рд╛ рдкрд╕рдВрдж рдирд╣реАрдВ рд╣реИ) </li></ul><br>  рд╣рдорд╛рд░реЗ рдорд╛рдЗрдХреНрд░реЛрд╕реЙрд░реНрдлрд╝ рдХреЛ http-request рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдЯреЛрд░ рд╢реЗрд▓реНрдл рдкрд░ рдорд╛рд▓ рдХреА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдпрд╣ рд╕реВрдЪрдирд╛ рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреА рдЧрдгрдирд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдЯреНрд░рд┐рдЧрд░ рд╣реИред <br><br>  рдкреНрд▓рд╕, рддрд╛рдХрд┐ рдЬреАрд╡рди рд╢рд╣рдж рдирд╣реАрдВ рд▓рдЧрддрд╛ рд╣реИ: <br><br><ul><li>  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдХреБрдЫ рдЙрддреНрдкрд╛рджреЛрдВ рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  DATA рдХреЛ рд╕реНрдкреИрдо рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдЙрди рдЙрддреНрдкрд╛рджреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдзрддрд╛ рдбреЗрдЯрд╛ рднреЗрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ рдмрджрд▓ рдЧрдП рд╣реИрдВред </li></ul><br>  рд╣рдо рдЯреАрдХреЗ рдХреЗ рдХреБрдЫ рд╕рдордп рдкрдврд╝рддреЗ рд╣реИрдВ - рдФрд░ рдЬрд╛рддреЗ рд╣реИрдВред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/10/xa/vc/10xavc46--r-thnqp--lbfzw4co.png"></div><br><br><h1>  рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг </h1><br>  рдЯреАрдбреАрдбреА рдореЗрдВ, рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкреНрд░рд╢реНрдиреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдЬреЛ рдЖрдкрдХреЛ рд▓рд┐рдЦрдирд╛ рд╣реИ рд╡рд╣ рд╕рдм рдХреБрдЫ рд╣реИ: "рдореБрдЭреЗ рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП ...?" <br><br>  рдФрд░ рдкрд╣рд▓рд╛ рд╕рд╡рд╛рд▓ рдЬреЛ рд╣рдо рдкреВрдЫрддреЗ рд╣реИрдВ рд╡рд╣ рд╕рд┐рд░реНрдл рдкреВрд░реЗ рдЖрд╡реЗрджрди рдХреЗ рд▓рд┐рдП рд╣реИред <br>  рддреЛ рд╕рд╡рд╛рд▓ рдпрд╣ рд╣реИ: <br><br>  <i>рдореИрдВ рдЕрдкрдиреЗ рдорд╛рдЗрдХреНрд░реЛ рд╕рд░реНрд╡рд┐рд╕ рд╕реЗ рдХреНрдпрд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ?</i> <br><br>  рдЙрддреНрддрд░ рд╣реИ: <br><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдмрд╣реБрдд рд╕рд╛рд░реА рдЪреАрдЬреЗрдВред  рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдРрд╕реЗ рд╕рд░рд▓ рддрд░реНрдХ рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╡рд┐рдХрд▓реНрдк рджреЗрддреЗ рд╣реИрдВ, рдЬреЛ рд▓рд┐рдЦрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдЙрди рд╕рднреА рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдг рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рднреА рдЕрдзрд┐рдХ, рдПрдХ рдЕрд╕рдВрднрд╡ рдХрд╛рд░реНрдп рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдЖрд╡реЗрджрди рд╕реНрддрд░ рдкрд░ рдкреНрд░рд╢реНрди рдХрд╛ рдЙрддреНрддрд░ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдХреЗрд╡рд▓ рдореБрдЦреНрдп рдкрд░реАрдХреНрд╖рдг рдорд╛рдорд▓реЛрдВ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВрдЧреЗред <br><br>  рдпрд╣реА рд╣реИ, рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рд╕рднреА рдЗрдирдкреБрдЯ рдбреЗрдЯрд╛ рд╡реИрдз рдкреНрд░рд╛рд░реВрдк рд╣реИрдВ, рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рд╕рд┐рд╕реНрдЯрдо рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдкрд╣рд▓реЗ рдЙрддреНрдкрд╛рдж рдкрд░ рдХреЛрдИ рдЬрд╛рдирдХрд╛рд░реА рдирд╣реАрдВ рдереАред <br><br>  <i>рддреЛ, рдореИрдВ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ:</i> <br><br><ul><li>  рдПрдХ рдШрдЯрдирд╛ рд╕рд╛рдордиреЗ рдЖрдИ рд╣реИ рдХрд┐ рд╢реЗрд▓реНрдл рдкрд░ рдХреЛрдИ рдЙрддреНрдкрд╛рдж рдирд╣реАрдВ рд╣реИред  рд╕реВрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╡рд┐рддрд░рдг рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИред </li><li>  рдпрд╣ рдШрдЯрдирд╛ рдЖрдИ рдХрд┐ рдкреАрд▓рд╛ рдЙрддреНрдкрд╛рдж рд╕реНрдЯреЙрдХ рдореЗрдВ рд╣реИ, рджреЛрд╕реНрддреЛрд╡рдЪреЗрдиреЛ рдЗрд╕реЗ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИред  рдорд╛рд▓ рдХреА рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░реЗрдВред </li><li>  рджреЛ рд╕рдВрджреЗрд╢ рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдЖрдП - рджреЛрдиреЛрдВ рд╕реНрдЯреЛрд░ рдореЗрдВ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдорд╛рддреНрд░рд╛ рдореЗрдВ рд╕рд╛рдорд╛рди рдХреЗ рд╕рд╛рдеред  рдХреЗрд╡рд▓ рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрд╛ред </li><li>  рджреЛ рд╕рдВрджреЗрд╢ рдкрд╣реБрдВрдЪреЗ: рдкрд╣рд▓реЗ рдореЗрдВ рд╕реНрдЯреЛрд░ рдореЗрдВ рдПрдХ рдЙрддреНрдкрд╛рдж рд╣реИ, рджреВрд╕рд░реЗ рдореЗрдВ - рдпрд╣ рдЕрдм рдирд╣реАрдВ рд╣реИред  рд╣рдо рджреЛ рд╕рдВрджреЗрд╢ рднреЗрдЬрддреЗ рд╣реИрдВ: рдкрд╣рд▓рд╛ - рдЙрдкрд▓рдмреНрдз, рдлрд┐рд░ - рдирд╣реАрдВред </li><li>  рдореИрдВ рдЙрддреНрдкрд╛рдж рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдЕрдХреНрд╖рдо рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ, рдФрд░ рд╕реВрдЪрдирд╛рдПрдВ рдЕрдм рдирд╣реАрдВ рднреЗрдЬреА рдЬрд╛рддреА рд╣реИрдВред </li><li>  ... </li></ul><br>  рдпрд╣рд╛рдВ рдореБрдЦреНрдп рдЪреАрдЬ рд╕рдордп рдореЗрдВ рд░реБрдХрдирд╛ рд╣реИ: рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рд╣реА рд▓рд┐рдЦрд╛ рд╣реИ, рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ, рдФрд░ рдпрд╣ рдЙрди рд╕рднреА рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИ - рдХреЗрд╡рд▓ <b>рд╕рдмрд╕реЗ</b> рдмреБрдирд┐рдпрд╛рджреАред  рднрд╡рд┐рд╖реНрдп рдореЗрдВ, рдЬрдм рд╣рдо рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рддреЛ рдЙрдирдХреЗ рд╕рдВрдпреЛрдЬрди рдореЗрдВ рдЙрди рд╕рднреА рдЪреАрдЬреЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реЛрддреА рд╣реИ рдЬреЛ рд╣рдо рдпрд╣рд╛рдВ рд▓рд╛рддреЗ рд╣реИрдВред  рдпрд╣рд╛рдВ рдореБрдЦреНрдп рдкреНрд░реЗрд░рдгрд╛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рд╣реИ рдХрд┐ рдпрджрд┐ рдпреЗ рдкрд░реАрдХреНрд╖рдг рдкрд╛рд╕ рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрд╡реЗрджрди рд╣рдорд╛рд░реА рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред <br><br>  рдЗрди рд╕рднреА рд╡рд┐рд╢рд▓рд┐рд╕реНрдЯ рдХреЛ рд╣рдо рдЕрдм рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ рдбрд┐рд╕реНрдЯрд┐рд▓ рдХрд░реЗрдВрдЧреЗред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЪреВрдВрдХрд┐ рдпрд╣ рдЖрд╡реЗрджрди рдХреЗ рд╕реНрддрд░ рдкрд░ рд╡рд┐рд╢рд▓рд┐рд╕реНрдЯ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╡рд╕рдВрдд рд╕рдВрджрд░реНрдн рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд╕рд╛рде рдкрд░реАрдХреНрд╖рдг рд╣реЛрдВрдЧреЗ, рдЕрд░реНрдерд╛рддреН, рдХрд╛рдлреА рднрд╛рд░реАред <br>  рдФрд░ рдпрд╣ рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдХрдИ рдЯреАрдбреАрдбреА рдХреЗ рд▓рд┐рдП рд╕рдорд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдмрд╣реБрдд рдкреНрд░рдпрд╛рд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдЬреЛ рд▓реЛрдЧ рд╣рдореЗрд╢рд╛ рдЦрд░реНрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред  рдФрд░ рд╣рд╛рдВ, рдпрд╣ рд╕рдмрд╕реЗ рдХрдард┐рди рдХрджрдо рд╣реИ, рд▓реЗрдХрд┐рди, рдореЗрд░рд╛ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░реЛ, рдЬрдм рдЖрдк рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдХреЛрдб рд▓рдЧрднрдЧ рдЦреБрдж рд╣реА рд▓рд┐рдЦ рджреЗрдЧрд╛, рдФрд░ рдЖрдкрдХреЛ рдпрдХреАрди рд╣реЛрдЧрд╛ рдХрд┐ рдЖрдкрдХрд╛ рдЖрд╡реЗрджрди рдЖрдкрдХреЗ рдЗрдЪреНрдЫрд┐рдд рддрд░реАрдХреЗ рд╕реЗ рд╣реА рдХрд╛рдо рдХрд░реЗрдЧрд╛ред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/r2/hg/db/r2hgdbqezd8esoynflanwv-so8e.jpeg"></div><br>  рдкреНрд░рд╢реНрди рдХрд╛ рдЙрддреНрддрд░ рджреЗрдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЬрдирд░реЗрдЯ рдХрд┐рдП рдЧрдП рд╕реНрдкреНрд░рд┐рдВрдЧ рдЗрдирд┐рд╢рд┐рд░ рдХреНрд▓рд╛рд╕ рдореЗрдВ рдХреЛрдб рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдкрд░реАрдХреНрд╖рдг рдХреЗ рдирд╛рдо рд╕рд┐рд░реНрдл рд╣рдорд╛рд░реА рд╡рд┐рд╢рд▓рд┐рд╕реНрдЯ рд╣реИрдВред  рдЕрднреА рдХреЗ рд▓рд┐рдП, рдмрд╕ рдЦрд╛рд▓реА рддрд░реАрдХреЗ рдмрдирд╛рдПрдБ: <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductQuantityIsZero</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyAvailableYellowProductIfPositiveQuantityAndDostavchenkoApproved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyOnceOnSeveralEqualProductMessages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyFirstAvailableThenNotIfProductQuantityMovedFromPositiveToZero</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noNotificationOnDisabledProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{}</code> </pre> <br>  рддрд░реАрдХреЛрдВ рдХреЗ рдирд╛рдордХрд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ: рдореИрдВ рдЖрдкрдХреЛ рдЬреЛрд░рджрд╛рд░ рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдЙрдиреНрд╣реЗрдВ рдЯреЗрд╕реНрдЯ 1 (), рдЯреЗрд╕реНрдЯ 2 () рдХреЗ рдмрдЬрд╛рдп рд╕реВрдЪрдирд╛рддреНрдордХ рдмрдирд╛рдПрдВ, рдХреНрдпреЛрдВрдХрд┐ рдмрд╛рдж рдореЗрдВ, рдЬрдм рдЖрдк рднреВрд▓ рдЬрд╛рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдиреЗ рдХрд┐рд╕ рд╡рд░реНрдЧ рдХреЛ рд▓рд┐рдЦрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдЕрд╡рд╕рд░ рдорд┐рд▓реЗрдЧрд╛ рдХреЛрдб рдХреЛ рд╕реАрдзреЗ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ, рдмрд╕ рдкрд░реАрдХреНрд╖рдг рдЦреЛрд▓реЗрдВ рдФрд░ рдЕрдиреБрдмрдВрдз рд╡рд┐рдзрд┐ рдкрдврд╝реЗрдВ рдЬреЛ рдХрдХреНрд╖рд╛ рдХреЛ рд╕рдВрддреБрд╖реНрдЯ рдХрд░рддреА рд╣реИред <br><br><h2>  рдкрд░реАрдХреНрд╖рдг рднрд░рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВ </h2><br>  рдореБрдЦреНрдп рд╡рд┐рдЪрд╛рд░ рдпрд╣ рд╣реИ рдХрд┐ рдЕрдВрджрд░ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИ рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдм рдХреБрдЫ рдмрд╛рд╣рд░реА рдЕрдиреБрдХрд░рдг рдХрд░рдирд╛ рд╣реИред <br><br>  рд╣рдорд╛рд░реА рд╕реЗрд╡рд╛ рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ "рдмрд╛рд╣рд░реА" рд╡рд╣ рд╕рдм рд╣реИ рдЬреЛ рд╕реНрд╡рдпрдВ рдорд╛рдЗрдХреНрд░реЛрд╕реЗрд╡рд░ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╕реАрдзреЗ рдЗрд╕рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдХрд░рддрд╛ рд╣реИред <br><br>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдмрд╛рд╣рд░реА рд╣реИ: <br><br><ul><li>  рд╡рд╣ рдкреНрд░рдгрд╛рд▓реА рдЬреЛ рд╣рдорд╛рд░реА рд╕реЗрд╡рд╛ рдорд╛рд▓ рдХреА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░реЗрдЧреА </li><li>  рдЧреНрд░рд╛рд╣рдХ рдЬреЛ рд╕рд╛рдорд╛рди рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдХрд╛рдЯ рджреЗрдЧрд╛ </li><li>  рддреГрддреАрдп-рдкрдХреНрд╖ DostavchenKO рдкреНрд░рдгрд╛рд▓реА </li></ul><br>  рдкрд╣рд▓реЗ рджреЛ рдХреЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рд╕реНрдкреНрд░рд┐рдВрдЧрд┐рдВрдЧ MockMvc рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред <br>  DostavchenKO рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдо рд╡рд╛рдпрд░рдореЙрдХ рдпрд╛ MockRestServiceServer рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╣рдорд╛рд░рд╛ рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><div class="spoiler">  <b class="spoiler_title">рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringRunner.class) <span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@AutoConfigureMockMvc</span></span> <span class="hljs-meta"><span class="hljs-meta">@AutoConfigureWireMock</span></span>(port = <span class="hljs-number"><span class="hljs-number">8090</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TddExampleApplicationTests</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MockMvc mockMvc; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ WireMock.reset(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductQuantityIsZero</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ stubNotification( <span class="hljs-comment"><span class="hljs-comment">// language=JSON "{\n" + " \"productId\": 111,\n" + " \"available\": false\n" + "}"); performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 111,\n" + " \"color\" : \"red\", \n" + " \"productQuantity\": 0\n" + "}"); verify(1, postRequestedFor(urlEqualTo("/notify"))); } @Test public void notifyAvailableYellowProductIfPositiveQuantityAndDostavchenkoApproved() throws Exception { stubDostavchenko("112"); stubNotification( // language=JSON "{\n" + " \"productId\": 112,\n" + " \"available\": true\n" + "}"); performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 112,\n" + " \"color\" : \"Yellow\", \n" + " \"productQuantity\": 10\n" + "}"); verify(1, postRequestedFor(urlEqualTo("/notify"))); } @Test public void notifyOnceOnSeveralEqualProductMessages() throws Exception { stubDostavchenko("113"); stubNotification( // language=JSON "{\n" + " \"productId\": 113,\n" + " \"available\": true\n" + "}"); for (int i = 0; i &lt; 5; i++) { performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 113,\n" + " \"color\" : \"Yellow\", \n" + " \"productQuantity\": 10\n" + "}"); } verify(1, postRequestedFor(urlEqualTo("/notify"))); } @Test public void notifyFirstAvailableThenNotIfProductQuantityMovedFromPositiveToZero() throws Exception { stubDostavchenko("114"); stubNotification( // language=JSON "{\n" + " \"productId\": 114,\n" + " \"available\": true\n" + "}"); performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 114,\n" + " \"color\" : \"Yellow\",\n" + " \"productQuantity\": 10\n" + "}"); stubNotification( // language=JSON "{\n" + " \"productId\": 114,\n" + " \"available\": false\n" + "}"); performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 114,\n" + " \"color\" : \"Yellow\",\n" + " \"productQuantity\": 0\n" + "}"); verify(2, postRequestedFor(urlEqualTo("/notify"))); } @Test public void noNotificationOnDisabledProduct() throws Exception { stubNotification( // language=JSON "{\n" + " \"productId\": 115,\n" + " \"available\": false\n" + "}"); disableProduct(115); for (int i = 0; i &lt; 5; i++) { performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 115,\n" + " \"color\" : \"Yellow\",\n" + " \"productQuantity\": " + i + "\n" + "}"); } verify(1, postRequestedFor(urlEqualTo("/notify"))); } private void disableProduct(int productId) throws Exception { mockMvc.perform( post("/disableProduct?productId=" + productId) ).andDo( print() ).andExpect( status().isOk() ); } private void performQuantityUpdateRequest(String content) throws Exception { mockMvc.perform( post("/product-quantity-update") .contentType(MediaType.APPLICATION_JSON) .content(content) ).andDo( print() ).andExpect( status().isOk() ); } private void stubNotification(String content) { stubFor(WireMock.post(urlEqualTo("/notify")) .withHeader("Content-Type", equalTo(MediaType.APPLICATION_JSON_UTF8_VALUE)) .withRequestBody(equalToJson(content)) .willReturn(aResponse().withStatus(HttpStatus.OK_200))); } private void stubDostavchenko(final String productId) { stubFor(get(urlEqualTo("/isDeliveryAvailable?productId=" + productId)) .willReturn(aResponse().withStatus(HttpStatus.OK_200).withBody("true"))); } }</span></span></code> </pre> </div></div><br><h1>  рдмрд╕ рдХреНрдпрд╛ рд╣реБрдЖ? </h1><br>  рд╣рдордиреЗ рдПрдХ рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрд╛, рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рдорд╛рд░реНрдЧ рд╣рдореЗрдВ рдореБрдЦреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╣рд╛рдирд┐рдпреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рд┐рд╕реНрдЯрдо рдХреА рд╕рдВрдЪрд╛рд▓рди рдХреНрд╖рдорддрд╛ рдХреА рдЧрд╛рд░рдВрдЯреА рджреЗрддрд╛ рд╣реИред  рдФрд░ рд╣рдордиреЗ рдЗрд╕реЗ рдкрд╣рд▓реЗ рдХрд┐рдпрд╛ рдерд╛ рдЬрдм рд╣рдо рд╕реЗрд╡рд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рдлрд╛рдпрджреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдпрд╣ рд╣реИ рдХрд┐ рд▓реЗрдЦрди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рджреМрд░рд╛рди рдореБрдЭреЗ <b>рд╡рд╛рд╕реНрддрд╡рд┐рдХ</b> DostavchenKO рдкрд░ рдЬрд╛рдирд╛ рдерд╛ рдФрд░ рд╡рд╣рд╛рдВ рд╕реЗ рдПрдХ <b>рд╡рд╛рд╕реНрддрд╡рд┐рдХ</b> рдЙрддреНрддрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдерд╛ рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдЕрдкрдиреЗ рд╕реНрдЯрдм рдореЗрдВ рдмрдирд╛рдпрд╛ рдерд╛ред  рдпрд╣ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реИ рдХрд┐ рд╣рдордиреЗ рд╡рд┐рдХрд╛рд╕ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдЗрд╕ рдмрд╛рдд рдХрд╛ рдзреНрдпрд╛рди рд░рдЦрд╛, рди рдХрд┐ рд╕рднреА рдХреЛрдб рд▓рд┐рдЦреЗ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рджред  рдФрд░ рдпрд╣рд╛рдВ рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдкреНрд░рд╛рд░реВрдк рдЯреАрдУрдЖрд░ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рдпрд╛ рд╕реЗрд╡рд╛ рдЖрдо рддреМрд░ рдкрд░ рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИ, рдпрд╛ рдХреБрдЫ рдФрд░ рд╣реИред <br><br>  рдореИрдВ рдпрд╣ рднреА рдиреЛрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ рдХрд┐ рд╣рдордиреЗ рди рдХреЗрд╡рд▓ рдХреЛрдб рдХреА <b>рдПрдХ</b> рдкрдВрдХреНрддрд┐ рд▓рд┐рдЦреА <b>рд╣реИ,</b> рдЬреЛ рдмрд╛рдж рдореЗрдВ рдареЗрд╕ рдкрд░ рдЬрд╛рдПрдЧреА, рд▓реЗрдХрд┐рди рд╣рдордиреЗ рдпрд╣ рднреА рдирд╣реАрдВ рд╕реЛрдЪрд╛ рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдХреЛ рдЕрдВрджрд░ рдХреИрд╕реЗ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: рдХреНрдпрд╛ рдкрд░рддреЗрдВ рд╣реЛрдВрдЧреА, рдХреНрдпрд╛ рд╣рдо рдЖрдзрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдпрджрд┐ рд╣рд╛рдВ, рддреЛ рдХреМрди рд╕рд╛, рдЖрджрд┐ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рдордп, рд╣рдо рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реЗ рдЕрдореВрд░реНрдд рд╣реИрдВ, рдФрд░, рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдмрд╛рдж рдореЗрдВ рджреЗрдЦреЗрдВрдЧреЗ, рдпрд╣ рдХрдИ рд╡рд╛рд╕реНрддреБ рд▓рд╛рдн рджреЗ рд╕рдХрддрд╛ рд╣реИред <br><br>  рд╡рд┐рд╣рд┐рдд рдЯреАрдбреАрдбреА рдХреЗ рд╡рд┐рдкрд░реАрдд, рдЬрд╣рд╛рдВ рдкрд░реАрдХреНрд╖рдг рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рдмрд╣реБрдд рд▓рдВрдмрд╛ рд╕рдордп рдирд╣реАрдВ рд▓рдЧреЗрдЧрд╛ред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрд╣ рд╡рд┐рдХрд╛рд╕ рдХреЗ рдмрд╣реБрдд рдЕрдВрдд рддрдХ рд╣рд░рд╛ рдирд╣реАрдВ рд╣реЛрдЧрд╛, рдЬрдм рддрдХ рдХрд┐ рдлрд╝рд╛рдЗрд▓реЛрдВ рд╕рд╣рд┐рдд рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рдм рдХреБрдЫ рд▓рд┐рдЦрд╛ рди рдЬрд╛рдПред <br>  рд╣рдо рдФрд░ рдЖрдЧреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВред <br><br><h1>  рдирд┐рдпрдВрддреНрд░рдХ </h1><br>  рдЬрдм рд╣рдордиреЗ рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрд╛ рдФрд░ рдЕрдм рд╣рдореЗрдВ рд╡рд┐рд╢реНрд╡рд╛рд╕ рд╣реИ рдХрд┐ рдХрд╛рд░реНрдп рдХреЛ рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рд░рд╛рдд рдХреЛ рд╢рд╛рдВрддрд┐ рд╕реЗ рд╕реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдкрд░рддреЛрдВ рдХреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдЖ рдЧрдпрд╛ рд╣реИред  рдФрд░ рдкрд╣рд▓реА рдкрд░рдд рдЬрд┐рд╕реЗ рд╣рдо рд▓рд╛рдЧреВ рдХрд░реЗрдВрдЧреЗ, рд╡рд╣ рдирд┐рдпрдВрддреНрд░рдХ рд╣реИред  рдЖрдЦрд┐рд░ рд╡рд╣ рдХреНрдпреЛрдВ?  рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХрд╛ рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рд╣реИред  рд╣рдореЗрдВ рдКрдкрд░ рд╕реЗ рдиреАрдЪреЗ рддрдХ рдЬрд╛рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ, рдкрд╣рд▓реА рдкрд░рдд рд╕реЗ, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдВрдд рддрдХ, рдмрд╛рддрдЪреАрдд рдХрд░реЗрдЧрд╛ред <br>  рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред <br><br>  рдФрд░ рдлрд┐рд░, рдпрд╣ рд╕рдм рдПрдХ рд╣реА рд╕рд╡рд╛рд▓ рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ: <br><br>  <i>рдореБрдЭреЗ рдХрдВрдЯреНрд░реЛрд▓рд░ рд╕реЗ рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП?</i> <br><br>  рдЙрддреНрддрд░ рд╣реИ: <br><br>  рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдирд┐рдпрдВрддреНрд░рдХ рдЗрдирдкреБрдЯ рдбреЗрдЯрд╛ рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛, рд╕рддреНрдпрд╛рдкрди рдФрд░ рд░реВрдкрд╛рдВрддрд░рдг рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдореЗрдВ рд▓рдЧрд╛ рд╣реБрдЖ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдирд╣реАрдВ рд╣реИред  рддреЛ рдЗрд╕ рд╕рд╡рд╛рд▓ рдХрд╛ рдЬрд╡рд╛рдм рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ: <br><br>  <i>рдореИрдВ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ:</i> <br><br><ul><li>  рдЕрдорд╛рдиреНрдп рдЖрдИрдбреА рд╡рд╛рд▓реЗ рдЙрддреНрдкрд╛рдж рдХреЛ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╕рдордп BAD_REQUEST рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕ рд╡рд╛рдкрд╕ рдЖ рдЧрдпрд╛ </li><li>  BAD_REQUEST рдЕрдорд╛рдиреНрдп рдЖрдИрдбреА рд╡рд╛рд▓реЗ рдорд╛рд▓ рдХреЗ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╕рдордп </li><li>  рдирдХрд╛рд░рд╛рддреНрдордХ рдорд╛рддреНрд░рд╛ рд╕реВрдЪрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╕рдордп BAD_REQUEST </li><li>  рдЕрдЧрд░ DostavchenKO рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИ, рддреЛ INTERNAL_SERVER_ERROR </li><li>  DATA рдХреЛ рднреЗрдЬрдиреЗ рдореЗрдВ рдЕрд╕рдорд░реНрде рд╣реЛрдиреЗ рдкрд░, INTERNAL_SERVER_ERROR </li></ul><br>  рдЪреВрдВрдХрд┐ рд╣рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдЕрдиреБрдХреВрд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЙрдкрд░реЛрдХреНрдд рд╕рднреА рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд▓рд┐рдП, http рдХреЛрдб рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдкрдХреЛ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реБрдП рдПрдХ рдХрд╕реНрдЯрдо рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рддрд╛рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╣ рд╕рдордЭ рд╕рдХреЗ рдХрд┐ рд╕рдорд╕реНрдпрд╛ рдХреНрдпрд╛ рд╣реИред <br><br><ul><li>  200 рдЕрдЧрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рд╕рдлрд▓ рд░рд╣рд╛ </li><li>  рдЕрдиреНрдп рд╕рднреА рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдПрдХ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕рдВрджреЗрд╢ рдХреЗ рд╕рд╛рде INTERNAL_SERVER_ERROR, рддрд╛рдХрд┐ рд╕реНрдЯреИрдХреНрд░реЗрд╕ рдХреЛ рди рдЪрдордХрд╛рдпрд╛ рдЬрд╛рдП </li></ul><br>  рдЬрдм рддрдХ рдореИрдВрдиреЗ рдЯреАрдбреАрдбреА рдкрд░ рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд┐рдпрд╛, рддрдм рддрдХ рдореИрдВ рдЖрдЦрд┐рд░реА рдЪреАрдЬ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪ рд░рд╣рд╛ рдерд╛ рдХрд┐ рдореЗрд░рд╛ рд╕рд┐рд╕реНрдЯрдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╡рд┐рд╢реЗрд╖ рдФрд░ рдкрд╣рд▓реА рдирдЬрд╝рд░ рдореЗрдВ, рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдХреНрдпрд╛ рд▓рд╛рдПрдЧрд╛ред  рдореИрдВрдиреЗ рдПрдХ рд╕рд░рд▓ рдХрд╛рд░рдг рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рд╕реЛрдЪрд╛ рдерд╛ - рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд▓рд┐рдЦрдирд╛ рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рдмрд┐рд▓реНрдХреБрд▓ рдХрд┐рдирд╛рд░реЗ рдХреЗ рдорд╛рдорд▓реЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рдХрднреА-рдХрднреА рдорд╕реНрддрд┐рд╖реНрдХ рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд рд░реИрдо рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред  рдФрд░ рд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рдмрд╛рдж, рдХреБрдЫ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдирд╛ рдЬрд┐рд╕реЗ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╡рд┐рдЪрд╛рд░ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рдереЗ рдЕрднреА рднреА рдПрдХ рдЦреБрд╢реА рд╣реИ: рд╣рдо рд╕рднреА рд╕реЛрдЪрддреЗ рд╣реИрдВ рдХрд┐ рд╣рдо рдПрдХрджрдо рд╕рд╣реА рдХреЛрдб рд▓рд┐рдЦ рд░рд╣реЗ рд╣реИрдВ)ред  рд╣рд╛рд▓рд╛рдВрдХрд┐ рдХреЛрдИ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдирд╣реАрдВ рд╣реИ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪрдиреЗ рдХреА рдХреЛрдИ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдЗрд╕реЗ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рджрд░реНрдж рдирд╣реАрдВ рд╣реИ, рдпрджрд┐ рдРрд╕рд╛ рд╣реИред  рдкрд╣рд▓реЗ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦреЗ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рд╕рд┐рддрд╛рд░реЛрдВ рдХреЗ рдЕрднрд┐рд╕рд░рдг рд╣реЛрдиреЗ рддрдХ рдЗрдВрддрдЬрд╛рд░ рдирд╣реАрдВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдФрд░ рдареЗрд╕ рд╡рд╛рдкрд╕ рд▓реЗрдиреЗ рдХреЗ рдмрд╛рдж, рдХреБрдЫ рдирд┐рд╢реНрдЪрд┐рдд рд╕рд┐рд╕реНрдЯрдо рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рдПрдВрдЧреЗ, рдФрд░ рдЧреНрд░рд╛рд╣рдХ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреБрдЫ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдз рдХреЗ рд╕рд╛рде рдЖрдкрдХреЗ рдкрд╛рд╕ рдЖрдПрдЧрд╛ред  рдФрд░ рдпрд╣ рди рдХреЗрд╡рд▓ рдирд┐рдпрдВрддреНрд░рдХ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред <br><br><h2>  рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВ </h2><br>  рдкрд╣рд▓реЗ рддреАрди рдХреЗ рд╕рд╛рде рд╕рдм рдХреБрдЫ рд╕реНрдкрд╖реНрдЯ рд╣реИ: рд╣рдо рд╡рд╕рдВрдд рд╕рддреНрдпрд╛рдкрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдпрджрд┐ рдХреЛрдИ рдЕрд╡реИрдз рдЕрдиреБрд░реЛрдз рдЖрддрд╛ рд╣реИ, рддреЛ рдЖрд╡реЗрджрди рдПрдХ рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХ рджреЗрдЧрд╛, рдЬрд┐рд╕реЗ рд╣рдо рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд░ рдореЗрдВ рдкрдХрдбрд╝ рд▓реЗрдВрдЧреЗред  рдпрд╣рд╛рдВ, рдЬреИрд╕рд╛ рдХрд┐ рд╡реЗ рдХрд╣рддреЗ рд╣реИрдВ, рд╕рдм рдХреБрдЫ рдЕрдкрдиреЗ рдЖрдк рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдирд┐рдпрдВрддреНрд░рдХ рдХреЛ рдХреИрд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдХреБрдЫ рддреГрддреАрдп-рдкрдХреНрд╖ рдкреНрд░рдгрд╛рд▓реА рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИ? <br><br>  рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдирд┐рдпрдВрддреНрд░рдХ рдХреЛ рд╕реНрд╡рдпрдВ рддреГрддреАрдп-рдкрдХреНрд╖ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рднреА рдкрддрд╛ рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐  рдХрд┐рд╕ рдкреНрд░рдгрд╛рд▓реА рдХреЛ рдкреВрдЫрдирд╛ рд╣реИ рдФрд░ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдХреНрдпрд╛ рд╣реИ, рдЕрд░реНрдерд╛рддреН рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХрд╛ рдордзреНрдпрд╕реНрде рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрд╣ рдордзреНрдпрд╕реНрде рд╕реЗрд╡рд╛ рд╣реИред  рдФрд░ рд╣рдо рдЗрд╕ рд╕реЗрд╡рд╛ рдХреЗ рдореЙрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирд┐рдпрдВрддреНрд░рдХ рдкрд░ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦреЗрдВрдЧреЗ, рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдЗрд╕рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░реЗрдВрдЧреЗред  рдЗрд╕рд▓рд┐рдП, рд╕реЗрд╡рд╛ рдХреЛ рдХрд┐рд╕реА рддрд░рд╣ рдирд┐рдпрдВрддреНрд░рдХ рдХреЛ рд╕реВрдЪрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рд╕рд┐рд╕реНрдЯрдо рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИред  рдЖрдк рдЗрд╕реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЛрдВ рд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХрд╕реНрдЯрдо рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рдлреЗрдВрдХрдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ред  рд╣рдо рдЗрд╕ рдирд┐рдпрдВрддреНрд░рдХ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦреЗрдВрдЧреЗред <br><br><div class="spoiler">  <b class="spoiler_title">рддреГрддреАрдп-рдкрдХреНрд╖ рдбреЗрдЯрд╛ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рддреНрд░реБрдЯрд┐ рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдг</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringRunner.class) <span class="hljs-meta"><span class="hljs-meta">@WebMvcTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@AutoConfigureMockMvc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControllerTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@MockBean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UpdateProcessorService updateProcessorService; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returnServerErrorOnDataCommunicationError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ doThrow(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataCommunicationException()).when(updateProcessorService).processUpdate(any(Update.class)); performUpdate( <span class="hljs-comment"><span class="hljs-comment">//language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 10\n" + "}" ).andDo( print() ).andExpect( status().isInternalServerError() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"Can't communicate with Data system\"\n" + " }\n" + " ]\n" + "}") ); } }</span></span></code> </pre><br></div></div><br>  рдЗрд╕ рд╕реНрддрд░ рдкрд░, рдХрдИ рдЪреАрдЬреЗрдВ рдЕрдкрдиреЗ рдЖрдк рд╕рд╛рдордиреЗ рдЖрдИрдВ: <br><br><ul><li>  рдПрдХ рд╕реЗрд╡рд╛ рдЬрд┐рд╕реЗ рдирд┐рдпрдВрддреНрд░рдХ рдореЗрдВ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЬрд┐рд╕реЗ рдПрдХ рдирдИ рдорд╛рддреНрд░рд╛ рдХреЗ рд╕рд╛рдорд╛рди рдХреЗ рд▓рд┐рдП рдЖрдиреЗ рд╡рд╛рд▓реЗ рд╕рдВрджреЗрд╢ рдХреЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рд╕реМрдВрдкрд╛ рдЬрд╛рдПрдЧрд╛ред </li><li>  рдЗрд╕ рд╕реЗрд╡рд╛ рдХреА рд╡рд┐рдзрд┐, рдФрд░ рддрджрдиреБрд╕рд╛рд░ рдЗрд╕рдХреЗ рд╣рд╕реНрддрд╛рдХреНрд╖рд░, рдЬреЛ рдЗрд╕ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд░реЗрдВрдЧреЗред </li><li>  рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдЕрдиреБрдкрд▓рдмреНрдз рд╣реЛрдиреЗ рдкрд░ рд╡рд┐рдзрд┐ рдХреЛ рдХрд╕реНрдЯрдо рдирд┐рд╖реНрдкрд╛рджрди рдлреЗрдВрдХрдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  рдпрд╣ рдХрд╕реНрдЯрдо рдирд┐рд╖реНрдкрд╛рджрди рд╣реАред </li></ul><br>  рдХреНрдпреЛрдВ рдЦреБрдж рд╕реЗ?  рдХреНрдпреЛрдВрдХрд┐, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдпрд╛рдж рдХрд░рддреЗ рд╣реИрдВ, рд╣рдордиреЗ рдЕрднреА рддрдХ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдирд╣реАрдВ рд▓рд┐рдЦрд╛ рд╣реИред  рдФрд░ рдпреЗ рд╕рднреА рдЗрдХрд╛рдЗрдпрд╛рдБ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреАрдВ рдХрд┐ рд╣рдо рдкрд░реАрдХреНрд╖рдг рдХреИрд╕реЗ рдХрд░рддреЗ рд╣реИрдВред  рддрд╛рдХрд┐ рд╕рдВрдХрд▓рдХ рд╢рдкрде рди рд▓реЗ, рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХреЛрдб рдореЗрдВ, рд╣рдореЗрдВ рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рд╕рдм рдХреБрдЫ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ред  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рд▓рдЧрднрдЧ рдХреЛрдИ рднреА рдЖрдИрдбреАрдИ рд╣рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рд╕рдВрд╕реНрдерд╛рдУрдВ рдХреЛ рдмрдирд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛ред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдо рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрддреЗ рд╣реИрдВ - рдФрд░ рдЖрд╡реЗрджрди рдХрдХреНрд╖рд╛рдУрдВ рдФрд░ рд╡рд┐рдзрд┐рдпреЛрдВ рд╕реЗ рднрд░ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░, рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдг рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИрдВ: <br><br><div class="spoiler">  <b class="spoiler_title">рдкрд░реАрдХреНрд╖рдг</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringRunner.class) <span class="hljs-meta"><span class="hljs-meta">@WebMvcTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@AutoConfigureMockMvc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControllerTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@InjectMocks</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Controller controller; <span class="hljs-meta"><span class="hljs-meta">@MockBean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UpdateProcessorService updateProcessorService; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MockMvc mvc; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returnBadRequestOnDisableWithInvalidProductId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ mvc.perform( post(<span class="hljs-string"><span class="hljs-string">"/disableProduct?productId=-443"</span></span>) ).andDo( print() ).andExpect( status().isBadRequest() ).andExpect( content().json(getInvalidProductIdJsonContent()) ); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returnBadRequestOnNotifyWithInvalidProductId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ performUpdate( <span class="hljs-comment"><span class="hljs-comment">//language=JSON "{\n" + " \"productId\": -1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 0\n" + "}" ).andDo( print() ).andExpect( status().isBadRequest() ).andExpect( content().json(getInvalidProductIdJsonContent()) ); } @Test public void returnBadRequestOnNotifyWithNegativeProductQuantity() throws Exception { performUpdate( //language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": -10\n" + "}" ).andDo( print() ).andExpect( status().isBadRequest() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"productQuantity is invalid\"\n" + " }\n" + " ]\n" + "}") ); } @Test public void returnServerErrorOnDostavchenkoCommunicationError() throws Exception { doThrow(new DostavchenkoException()).when(updateProcessorService).processUpdate(any(Update.class)); performUpdate( //language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 10\n" + "}" ).andDo( print() ).andExpect( status().isInternalServerError() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"DostavchenKO communication exception\"\n" + " }\n" + " ]\n" + "}") ); } @Test public void returnServerErrorOnDataCommunicationError() throws Exception { doThrow(new DataCommunicationException()).when(updateProcessorService).processUpdate(any(Update.class)); performUpdate( //language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 10\n" + "}" ).andDo( print() ).andExpect( status().isInternalServerError() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"Can't communicate with Data system\"\n" + " }\n" + " ]\n" + "}") ); } @Test public void return200OnSuccess() throws Exception { performUpdate( //language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 10\n" + "}" ).andDo( print() ).andExpect( status().isOk() ); } @Test public void returnServerErrorOnUnexpectedException() throws Exception { doThrow(new RuntimeException()).when(updateProcessorService).processUpdate(any(Update.class)); performUpdate( //language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 10\n" + "}" ).andDo( print() ).andExpect( status().isInternalServerError() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"Internal Server Error\"\n" + " }\n" + " ]\n" + "}") ); } @Test public void returnTwoErrorMessagesOnInvalidProductIdAndNegativeQuantity() throws Exception { performUpdate( //language=JSON "{\n" + " \"productId\": -1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": -10\n" + "}" ).andDo( print() ).andExpect( status().isBadRequest() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " { \"message\": \"productQuantity is invalid\" },\n" + " { \"message\": \"productId is invalid\" }\n" + " ]\n" + "}") ); } private ResultActions performUpdate(String jsonContent) throws Exception { return mvc.perform( post("/product-quantity-update") .contentType(MediaType.APPLICATION_JSON_UTF8_VALUE) .content(jsonContent) ); } private String getInvalidProductIdJsonContent() { return //language=JSON "{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"productId is invalid\"\n" + " }\n" + " ]\n" + "}"; } }</span></span></code> </pre> </div></div><br>  рдЕрдм рд╣рдо рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╕рднреА рдкрд░реАрдХреНрд╖рдг рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкрд╛рд╕ рд╣реЛрдВ: <br><div class="spoiler">  <b class="spoiler_title">рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Validated</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> UpdateProcessorService updateProcessorService; <span class="hljs-meta"><span class="hljs-meta">@PostMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/product-quantity-update"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateQuantity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@RequestBody @Valid Update update)</span></span></span><span class="hljs-function"> </span></span>{ updateProcessorService.processUpdate(update); } <span class="hljs-meta"><span class="hljs-meta">@PostMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/disableProduct"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disableProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@RequestParam(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"productId"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Min</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Long productId) </span></span>{ updateProcessorService.disableProduct(Long.valueOf(productId)); } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд░</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ControllerAdvice</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationExceptionHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span>(ConstraintViolationException.class) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.BAD_REQUEST) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onConstraintViolationException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ConstraintViolationException exception)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"Constraint Violation"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse(exception.getConstraintViolations().stream() .map(constraintViolation -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse.Message( ((PathImpl) constraintViolation.getPropertyPath()).getLeafNode().toString() + <span class="hljs-string"><span class="hljs-string">" is invalid"</span></span>)) .collect(Collectors.toList())); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span>(value = MethodArgumentNotValidException.class) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(value = HttpStatus.BAD_REQUEST) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMethodArgumentNotValidException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MethodArgumentNotValidException exception)</span></span></span><span class="hljs-function"> </span></span>{ log.info(exception.getMessage()); List&lt;ErrorResponse.Message&gt; fieldErrors = exception.getBindingResult().getFieldErrors().stream() .map(fieldError -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse.Message(fieldError.getField() + <span class="hljs-string"><span class="hljs-string">" is invalid"</span></span>)) .collect(Collectors.toList()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse(fieldErrors); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span>(DostavchenkoException.class) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.INTERNAL_SERVER_ERROR) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDostavchenkoCommunicationException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DostavchenkoException exception)</span></span></span><span class="hljs-function"> </span></span>{ log.error(<span class="hljs-string"><span class="hljs-string">"DostavchenKO communication exception"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse(Collections.singletonList( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse.Message(<span class="hljs-string"><span class="hljs-string">"DostavchenKO communication exception"</span></span>))); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span>(DataCommunicationException.class) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.INTERNAL_SERVER_ERROR) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDataCommunicationException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DataCommunicationException exception)</span></span></span><span class="hljs-function"> </span></span>{ log.error(<span class="hljs-string"><span class="hljs-string">"DostavchenKO communication exception"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse(Collections.singletonList( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse.Message(<span class="hljs-string"><span class="hljs-string">"Can't communicate with Data system"</span></span>))); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span>(Exception.class) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.INTERNAL_SERVER_ERROR) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Exception exception)</span></span></span><span class="hljs-function"> </span></span>{ log.error(<span class="hljs-string"><span class="hljs-string">"Error while processing"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse(Collections.singletonList( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse.Message(HttpStatus.INTERNAL_SERVER_ERROR.getReasonPhrase()))); } }</code> </pre> <br></div></div><br><h1>  рдмрд╕ рдХреНрдпрд╛ рд╣реБрдЖ? </h1><br>  <b>TDD рдореЗрдВ, рдЖрдкрдХреЛ рд╕рднреА рдХреЛрдб рдЕрдкрдиреЗ рд╕рд┐рд░ рдореЗрдВ рдирд╣реАрдВ рд░рдЦрдиреЗ рд╣реЛрдВрдЧреЗред</b> <br><br>  рдЪрд▓реЛ рдлрд┐рд░ рд╕реЗ: рд░реИрдо рдореЗрдВ рдкреВрд░реЗ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЛ рди рд░рдЦреЗрдВред  рд╕рд┐рд░реНрдл рдПрдХ рдкрд░рдд рдХреЛ рджреЗрдЦреЛред  рд╡рд╣ рд╕рд░рд▓ рд╣реИред <br><br>  рд╕рд╛рдорд╛рдиреНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдорд╕реНрддрд┐рд╖реНрдХ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИрдВред  рдпрджрд┐ рдЖрдк рдПрдХ рдорд╣рд╛рдирд╛рдпрдХ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЗ рд╕рд┐рд░ рдореЗрдВ рдПрдХ рдмрдбрд╝реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рд╕рднреА рдмрд╛рд░реАрдХрд┐рдпреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЯреАрдбреАрдбреА рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИред  рдореБрдЭреЗ рдирд╣реАрдВ рдкрддрд╛ рдХрд┐ рдХреИрд╕реЗ  рдЬрд┐рддрдирд╛ рдмрдбрд╝рд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ, рдЙрддрдиреА рд╣реА рдмрдбрд╝реА рдЧрд▓рддреАред <br><br>  рдпрд╣ рдорд╣рд╕реВрд╕ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдХрд┐ рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ рдЕрдЧрд▓реА рдкрд░рдд рдХреА рдХреНрдпрд╛ рдЬрд░реВрд░рдд рд╣реИ, рдЬреАрд╡рди рдореЗрдВ рдЬреНрдЮрд╛рди рдЖрддрд╛ рд╣реИред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЖрдкрдХреЛ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдЪреАрдЬреЛрдВ рдХреЛ рдирд╣реАрдВ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдпрд╣рд╛рдБ рдЖрдк рдПрдХ рд▓рдбрд╝рдХреА рдХреЗ рд╕рд╛рде рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рд╡рд╣ рдХрд╛рдо рдкрд░ рдПрдХ рд╕рдорд╕реНрдпрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдХрд╣рддреА рд╣реИред  рдФрд░ рдЖрдкрдХреЛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЗрд╕реЗ рдХреИрд╕реЗ рд╣рд▓ рдХрд░рдирд╛ рд╣реИ, рдЖрдк рдЕрдкрдиреЗ рджрд┐рдорд╛рдЧ рдХреЛ рд░реИрдХ рдХрд░рддреЗ рд╣реИрдВред  рдФрд░ рдЙрд╕реЗ рдЗрд╕реЗ рд╣рд▓ рдХрд░рдиреЗ рдХреА рдЬрд░реВрд░рдд рдирд╣реАрдВ рд╣реИ, рдЙрд╕реЗ рд╕рд┐рд░реНрдл рдмрддрд╛рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред  рдФрд░ рд╡рд╣ рдпрд╣ рд╣реИред  рд╡рд╣ рд╕рд┐рд░реНрдл рдХреБрдЫ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддреА рдереАред  рд╕реБрдирдиреЗ рдХреЗ рдкрд╣рд▓реЗ рдЪрд░рдг рдореЗрдВ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реАрдЦрдирд╛ рдЕрдирдореЛрд▓ рд╣реИред  рдмрд╛рдХреА рд╕рдм рдХреЗ рд▓рд┐рдП ... рдЕрдЪреНрдЫрд╛, рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qx/bk/fb/qxbkfb93hkn7folrvbn1pjd8hxm.png"></div><br><h1>  рд╕реЗрд╡рд╛ </h1><br>  рдЕрдЧрд▓рд╛ рд╣рдо рд╕реЗрд╡рд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВред <br><br>  <i>рд╣рдо рд╕реЗрд╡рд╛ рд╕реЗ рдХреНрдпрд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?</i> <br><br>  рд╣рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рд╡рд╣ рд╡реНрдпрд╛рдкрд╛рд░рд┐рдХ рддрд░реНрдХ рд╕реЗ рдирд┐рдкрдЯреЗ, рдпрд╛рдиреА: <br><br><ol><li>  рд╡рд╣ рдЬрд╛рдирддрд╛ рдерд╛ рдХрд┐ рдорд╛рд▓ рдХреИрд╕реЗ рдХрд╛рдЯрдирд╛ рд╣реИ, <u>рдФрд░ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреА рд╕реВрдЪрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП</u> : </li><li>  рдЙрдкрд▓рдмреНрдзрддрд╛, рдпрджрд┐ рдЙрддреНрдкрд╛рдж рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╕реНрдЯреЙрдХ рдореЗрдВ рд╣реИ, рддреЛ рдЙрддреНрдкрд╛рдж рдХрд╛ рд░рдВрдЧ рдкреАрд▓рд╛ рд╣реИ, рдФрд░ DostavchenKO рдбрд┐рд▓реАрд╡рд░реА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИред </li><li>  рджреБрд░реНрдЧрдорддрд╛, рдЕрдЧрд░ рд╕рд╛рдорд╛рди рдХрд┐рд╕реА рдЪреАрдЬ рдХреА рдкрд░рд╡рд╛рд╣ рдХрд┐рдП рдмрд┐рдирд╛ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИред </li><li>  рдпрджрд┐ рдЙрддреНрдкрд╛рдж рдиреАрд▓рд╛ рд╣реИ, рддреЛ рджреБрд░реНрдЧрдорддрд╛ред </li><li>  рджреБрд░реНрдЧрдорддрд╛ рдЕрдЧрд░ DostavchenKO рдЗрд╕реЗ рд▓реЗ рдЬрд╛рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░рддреА рд╣реИред </li><li>  рдпрджрд┐ рдорд╛рд▓ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдХрд╛рдЯ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рджреБрд░реНрдЧрдорддрд╛ред </li><li>  рдЕрдЧрд▓рд╛, рд╣рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдпрджрд┐ рдХреЛрдИ рд╕рд┐рд╕реНрдЯрдо рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИ рддреЛ рд╕реЗрд╡рд╛ рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рдлреЗрдВрдХ рджреЗред </li><li>  рдФрд░ рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, DATA рдХреЛ рд╕реНрдкреИрдо рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЖрд▓рд╕реА рднреЗрдЬрдиреЗ рд╡рд╛рд▓реЗ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рддреН: </li><li>  рдпрджрд┐ рд╣рдо рдорд╛рд▓ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рдорд╛рд▓ рднреЗрдЬрддреЗ рдереЗ рдФрд░ рдЕрдм рд╣рдордиреЗ рдЧрдгрдирд╛ рдХреА рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдЙрдкрд▓рдмреНрдз рд╣реИ, рддреЛ рд╣рдо рдХреБрдЫ рднреА рдирд╣реАрдВ рднреЗрдЬрддреЗ рд╣реИрдВред </li><li>  рдФрд░ рдпрджрд┐ рдпрд╣ рдкрд╣рд▓реЗ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдм рдпрд╣ рдЙрдкрд▓рдмреНрдз рд╣реИ, рддреЛ рд╣рдо рдЗрд╕реЗ рднреЗрдЬрддреЗ рд╣реИрдВред </li><li>  рдФрд░ рдЖрдкрдХреЛ рдЗрд╕реЗ рдХрд╣реАрдВ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ ... </li></ol><br>  <b>рдмрдВрдж рдХрд░реЛ!</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/if/ek/y1/ifeky128w2kgpc2gw2jcxwvzkia.jpeg"></div><br>  рдХреНрдпрд╛ рдЖрдкрдХреЛ рдирд╣реАрдВ рд▓рдЧрддрд╛ рдХрд┐ рд╣рдорд╛рд░реА рд╕реЗрд╡рд╛ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдХрд░рдиреЗ рд▓рдЧреА рд╣реИ? <br><br>  рд╣рдорд╛рд░реА рд╡рд┐рд╢рд▓рд┐рд╕реНрдЯ рд╕реЗ рджреЗрдЦрддреЗ рд╣реБрдП, рд╡рд╣ рдЬрд╛рдирддрд╛ рд╣реИ рдХрд┐ рд╕рд╛рдорд╛рди рдХреЛ рдХреИрд╕реЗ рдмрдВрдж рдХрд░рдирд╛ рд╣реИ, рдФрд░ рдкрд╣реБрдВрдЪ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╡рд╣ рдкрд╣рд▓реЗ рднреЗрдЬреЗ рдЧрдП рд╕рдВрджреЗрд╢ рдирд╣реАрдВ рднреЗрдЬрддрд╛ рд╣реИред  рдпрд╣ рдЙрдЪреНрдЪ рд╕рд╛рдордВрдЬрд╕реНрдп рдирд╣реАрдВ рд╣реИред  рд╡рд┐рднрд┐рдиреНрди рд╡рд░реНрдЧреЛрдВ рдореЗрдВ рд╡рд┐рд╖рдо рдХрд╛рд░реНрдпрд╛рддреНрдордХрддрд╛рдУрдВ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рддреАрди рд╕реЗрд╡рд╛рдПрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП: рдПрдХ рд╕рд╛рдорд╛рди рдХреЗ рд╡рд┐рдпреЛрдЧ рд╕реЗ рдирд┐рдкрдЯреЗрдЧрд╛, рджреВрд╕рд░рд╛ рд╡рд┐рддрд░рдг рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХреА рдЧрдгрдирд╛ рдХрд░реЗрдЧрд╛ рдФрд░ рдЗрд╕реЗ рдПрдХ рд╕реЗрд╡рд╛ рдХреЛ рдкрд╛рд░рд┐рдд рдХрд░реЗрдЧрд╛ рдЬреЛ рдпрд╣ рддрдп рдХрд░реЗрдЧрд╛ рдХрд┐ рдЗрд╕реЗ рднреЗрдЬрдирд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред  рд╡реИрд╕реЗ, рдЗрд╕ рддрд░рд╣ рд╕реЗ, рд╡реНрдпрд╛рдкрд╛рд░ рддрд░реНрдХ рд╕реЗрд╡рд╛ рдХреЛ DATA рдкреНрд░рдгрд╛рд▓реА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рднреА рдирд╣реАрдВ рдкрддрд╛ рд╣реЛрдЧрд╛, рдЬреЛ рдХрд┐ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдкреНрд▓рд╕ рднреА рд╣реИред <br><br>  рдореЗрд░реЗ рдЕрдиреБрднрд╡ рдореЗрдВ, рдЕрдХреНрд╕рд░, рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ рд╕реБрд░реНрдЦрд┐рдпреЛрдВ рдореЗрдВ рдЖрдиреЗ рдХреЗ рдмрд╛рдж, рд╡рд╛рд╕реНрддреБрд╢рд┐рд▓реНрдк рдХреНрд╖рдгреЛрдВ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИред  рдпрджрд┐ рд╣рдордиреЗ рддреБрд░рдВрдд рд╕реЗрд╡рд╛ рд▓рд┐рдЦреА, рддреЛ рдпрд╣ рд╕реЛрдЪреЗ рдмрд┐рдирд╛ рдХрд┐ рдпрд╣ рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рдЗрд╕рд╕реЗ рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЗрд╕рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрд┐рдореНрдореЗрджрд╛рд░реА рдХреЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЗ рдЕрддрд┐рд╡реНрдпрд╛рдкреА рд╣реЛрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдмрдврд╝ рдЬрд╛рдПрдЧреАред  рдореИрдВ рдЕрдкрдиреА рдУрд░ рд╕реЗ рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ рдХрд┐ рдпрд╣ рд╡рд╣ рдЙрджрд╛рд╣рд░рдг рдерд╛ рдЬреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рдореЗрд░реЗ рд╕рд╛рде рд╣реБрдЖ рдФрд░ рдЯреАрдбреАрдбреА рдФрд░ рдЕрдиреБрдХреНрд░рдорд┐рдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рджреГрд╖реНрдЯрд┐рдХреЛрдгреЛрдВ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рдмреАрдЪ рдЧреБрдгрд╛рддреНрдордХ рдЕрдВрддрд░ рдЬрд┐рд╕рдиреЗ рдореБрдЭреЗ рдЗрд╕ рдкреЛрд╕реНрдЯ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рдХрд┐рдпрд╛ред <br><br><h1>  рд╡реНрдпрд╛рдкрд╛рд░ рддрд░реНрдХ </h1><br>  рдЙрдЪреНрдЪ рд╕рд╛рдордВрдЬрд╕реНрдп рдХреЗ рд╕рдорд╛рди рдХрд╛рд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рд╕реЗрд╡рд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪрддреЗ рд╣реБрдП, рд╣рдо рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рд╣рдореЗрдВ рдЗрд╕рдХреЗ рдФрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ DostavchenKO рдХреЗ рдмреАрдЪ рдЕрдореВрд░реНрддрддрд╛ рдХреЗ рдПрдХ рдФрд░ рд╕реНрддрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдФрд░, рдЪреВрдВрдХрд┐ рд╣рдо <b>рдкрд╣рд▓реЗ</b> рд╕реЗрд╡рд╛ рдХреЛ рдбрд┐рдЬрд╛рдЗрди рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╣рдо DostavchenKO рдЧреНрд░рд╛рд╣рдХ рд╕реЗ рдЗрд╕ рддрд░рд╣ рдХреЗ рдЖрдВрддрд░рд┐рдХ рдЕрдиреБрдмрдВрдз рдХреА рдорд╛рдВрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╣рдореЗрдВ рдЪрд╛рд╣рд┐рдПред  рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рд╣рдо рд╕рдордЭреЗрдВрдЧреЗ рдХрд┐ рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдХреЗ рдЧреНрд░рд╛рд╣рдХ рд╕реЗ рдХреНрдпрд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAvailableForTransportation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long productId)</span></span></span><span class="hljs-function"> </span></span>{...}</code> </pre><br>  рд╕реЗрд╡рд╛ рд╕реНрддрд░ рдкрд░, рдпрд╣ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдХреЛрдИ рдорд╛рдпрдиреЗ рдирд╣реАрдВ рд░рдЦрддрд╛ рд╣реИ рдХрд┐ рд╡рд╛рд╕реНрддрд╡рд┐рдХ DostavchenKO рдХреИрд╕реЗ рдЬрд╡рд╛рдм рджреЗрддрд╛ рд╣реИ: рднрд╡рд┐рд╖реНрдп рдореЗрдВ, рдЧреНрд░рд╛рд╣рдХ рдХреЗ рдХрд╛рд░реНрдп рдХреЛ рдХрд┐рд╕реА рддрд░рд╣ рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рдорд┐рд▓ рдЬрд╛рдПрдЧреАред  рдПрдХ рдмрд╛рд░ рдпрд╣ рд╕рд░рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХрднреА-рдХрднреА рдпрд╣ рдХрдИ рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдЧрд╛: рдлрд┐рд▓рд╣рд╛рд▓ рд╣рдо рдЗрд╕рд╕реЗ рдЕрд▓рдЧ рд╣реИрдВред <br><br>  рд╣рдо рдПрдХ рдРрд╕реА рд╕реЗрд╡рд╛ рд╕реЗ рдПрдХ рд╕рдорд╛рди рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЬреЛ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд┐рдП рдЧрдП рдорд╛рд▓ рд╕реЗ рдирд┐рдкрдЯреЗрдЧрд╛: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isProductEnabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long productId)</span></span></span><span class="hljs-function"> </span></span>{...}</code> </pre><br>  рдЗрд╕рд▓рд┐рдП, рдкреНрд░рд╢реНрди "рдореБрдЭреЗ рд╡реНрдпрд╛рдкрд╛рд░ рддрд░реНрдХ рд╕реЗрд╡рд╛ рд╕реЗ рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП?" <br><br><div class="spoiler">  <b class="spoiler_title">рд╕реЗрд╡рд╛ рдЯреЗрд╕реНрдЯ</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(MockitoJUnitRunner.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdateProcessorServiceTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@InjectMocks</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UpdateProcessorService updateProcessorService; <span class="hljs-meta"><span class="hljs-meta">@Mock</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ManualExclusionService manualExclusionService; <span class="hljs-meta"><span class="hljs-meta">@Mock</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> DostavchenkoClient dostavchenkoClient; <span class="hljs-meta"><span class="hljs-meta">@Mock</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AvailabilityNotifier availabilityNotifier; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyAvailableIfYellowProductIsEnabledAndReadyForTransportation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>, <span class="hljs-string"><span class="hljs-string">"Yellow"</span></span>); when(dostavchenkoClient.isAvailableForTransportation(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); when(manualExclusionService.isProductEnabled(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); updateProcessorService.processUpdate(testProduct); verify(availabilityNotifier, only()).notify(eq(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(testProduct.getProductId(), <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>))); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductIsAbsent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">0L</span></span>, <span class="hljs-string"><span class="hljs-string">"Yellow"</span></span>); updateProcessorService.processUpdate(testProduct); verify(availabilityNotifier, only()).notify(eq(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(testProduct.getProductId(), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>))); verifyNoMoreInteractions(manualExclusionService); verifyNoMoreInteractions(dostavchenkoClient); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductIsBlue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>, <span class="hljs-string"><span class="hljs-string">"Blue"</span></span>); updateProcessorService.processUpdate(testProduct); verify(availabilityNotifier, only()).notify(eq(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(testProduct.getProductId(), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>))); verifyNoMoreInteractions(manualExclusionService); verifyNoMoreInteractions(dostavchenkoClient); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductIsDisabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>, <span class="hljs-string"><span class="hljs-string">"Yellow"</span></span>); when(manualExclusionService.isProductEnabled(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); updateProcessorService.processUpdate(testProduct); verify(availabilityNotifier, only()).notify(eq(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(testProduct.getProductId(), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>))); verifyNoMoreInteractions(dostavchenkoClient); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductIsNotReadyForTransportation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>, <span class="hljs-string"><span class="hljs-string">"Yellow"</span></span>); when(dostavchenkoClient.isAvailableForTransportation(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); when(manualExclusionService.isProductEnabled(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); updateProcessorService.processUpdate(testProduct); verify(availabilityNotifier, only()).notify(eq(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(testProduct.getProductId(), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>))); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span>(expected = DostavchenkoException.class) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throwCustomExceptionIfDostavchenkoCommunicationFailed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>, <span class="hljs-string"><span class="hljs-string">"Yellow"</span></span>); when(dostavchenkoClient.isAvailableForTransportation(testProduct.getProductId())) .thenThrow(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RestClientException(<span class="hljs-string"><span class="hljs-string">"Something's wrong"</span></span>)); when(manualExclusionService.isProductEnabled(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); updateProcessorService.processUpdate(testProduct); } }</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЗрд╕ рд╕реНрддрд░ рдкрд░, рд╡реЗ рдЦреБрдж рд╕реЗ рдкреИрджрд╛ рд╣реБрдП рдереЗ: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DostavchenKO рдЧреНрд░рд╛рд╣рдХ рд╕реЗрд╡рд╛-рдЕрдиреБрдХреВрд▓ рд╕рд┐рдВрдЧреБрд░рд╛ рдХреЗ рд╕рд╛рде </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рд╕реЗрд╡рд╛ рдЬрд┐рд╕рдореЗрдВ рдЖрд▓рд╕реА рднреЗрдЬрдиреЗ рдХреЗ рддрд░реНрдХ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдЧрд╛, рдЬрд┐рд╕реЗ рдбрд┐рдЬрд╛рдЗрди рдХреА рдЧрдИ рд╕реЗрд╡рд╛ рдЕрдкрдиреЗ рдХрд╛рдо рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд░реЗрдЧреА </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╛рдЯреЗ рдЧрдП рдорд╛рд▓ рдФрд░ рдЙрд╕рдХреЗ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдХреА рд╕реЗрд╡рд╛ </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди: </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequiredArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdateProcessorService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> AvailabilityNotifier availabilityNotifier; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> DostavchenkoClient dostavchenkoClient; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ManualExclusionService manualExclusionService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processUpdate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Update update)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (update.getProductQuantity() &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { availabilityNotifier.notify(getNotAvailableProduct(update.getProductId())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"Blue"</span></span>.equals(update.getColor())) { availabilityNotifier.notify(getNotAvailableProduct(update.getProductId())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!manualExclusionService.isProductEnabled(update.getProductId())) { availabilityNotifier.notify(getNotAvailableProduct(update.getProductId())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> availableForTransportation = dostavchenkoClient.isAvailableForTransportation(update.getProductId()); availabilityNotifier.notify(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(update.getProductId(), availableForTransportation)); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception exception) { log.warn(<span class="hljs-string"><span class="hljs-string">"Problems communicating with DostavchenKO"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DostavchenkoException(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> ProductAvailability </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNotAvailableProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long productId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(productId, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } }</code> </pre><br></div></div><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрддреНрдкрд╛рджреЛрдВ рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░рдирд╛ </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрд░рд┐рд╣рд╛рд░реНрдп рдЯреАрдбреАрдбреА рдЪрд░рдгреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЗ рд▓рд┐рдП рд╕рдордп рдЖ рдЧрдпрд╛ рд╣реИ - рд░рд┐рдлреИрдХреНрдЯрд░рд┐рдВрдЧред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдкрдХреЛ рдпрд╛рдж рд╣реИ, рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рдмрд╛рдж, рд╕реЗрд╡рд╛ рдЕрдиреБрдмрдВрдз рдЗрд╕ рддрд░рд╣ рд╕реЗ рджреЗрдЦрд╛ рдЧрдпрд╛ рдерд╛:</font></font><br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disableProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> productId)</span></span></span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЕрдм рд╣рдордиреЗ рд╡рд┐рдпреЛрдЧ рддрд░реНрдХ рдХреЛ рдПрдХ рдЕрд▓рдЧ рд╕реЗрд╡рд╛ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рд╕реНрддрд░ рдкрд░ рдЗрд╕ рд╕реЗрд╡рд╛ рд╕реЗ рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЪрд╛рд╣рддреЗ рд╣реИрдВ:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдорд╛рд▓ рдХреЛ рдмрдВрдж рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ред </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдпрджрд┐ рд╡рд╣ рдкрд╣рд▓реЗ рдХрд╛рдЯ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рддреЛ рдорд╛рд▓ рд╡рд╛рдкрд╕ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рд╡рд╣ рд╡рд╛рдкрд╕ рд▓реМрдЯ рдЖрдП, рдЕрдЧрд░ рд╕рд╛рдорд╛рди рдкрд╣рд▓реЗ рд╕реЗ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рдерд╛ред </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡рд┐рд╢рд▓рд┐рд╕реНрдЯ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рдЬреЛ рд╡реНрдпрд╛рдкрд╛рд░ рддрд░реНрдХ рд╕реЗрд╡рд╛ рдФрд░ рдЕрдиреБрдорд╛рдирд┐рдд рдПрдХ рдХреЗ рдмреАрдЪ рдЕрдиреБрдмрдВрдз рдХрд╛ рдкреНрд░рддреНрдпрдХреНрд╖ рдкрд░рд┐рдгрд╛рдо рд╣реИ, рдореИрдВ рдЗрд╕реЗ рдиреЛрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдк рддреБрд░рдВрдд рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЖрд╡реЗрджрди рдореЗрдВ рд╕рдорд╕реНрдпрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ рдпрджрд┐ рдХреЛрдИ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд┐рдП рдЧрдП рдЙрддреНрдкрд╛рдж рдХреЛ рд╡рд╛рдкрд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдлрд┐рд▓рд╣рд╛рд▓ рдпрд╣ рд╕реЗрд╡рд╛ рдмрд╕ рдпрд╣ рдирд╣реАрдВ рдЬрд╛рдирддреА рд╣реИ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╢рд╛рдпрдж рдЗрд╕ рдореБрджреНрджреЗ рдкрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдХ рдХреЗ рд╕рд╛рде рдЪрд░реНрдЪрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ, рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдп рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдореИрдВ рд╕рдордЭрддрд╛ рд╣реВрдВ рдХрд┐ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдЯреАрдУрдЖрд░ рдХреЗ рдкрд╣рд▓реЗ рдкрдврд╝рдиреЗ рдХреЗ рдареАрдХ рдмрд╛рдж рдпрд╣ рд╕рд╡рд╛рд▓ рдЙрдардирд╛ рдЪрд╛рд╣рд┐рдП рдерд╛, рд▓реЗрдХрд┐рди рд╣рдо рдПрдХ рдХрд╛рдлреА рд╕рд░рд▓ рдкреНрд░рдгрд╛рд▓реА рддреИрдпрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдмрдбрд╝реА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рдпрд╣ рдЗрддрдирд╛ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдпрд╣ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рдереЗ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдЗрдХрд╛рдИ рд╣реЛрдЧреА рдЬреЛ рдХреЗрд╡рд▓ рд╕рд╛рдорд╛рдиреЛрдВ рдХреА рдХрдЯрд╛рдИ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ: рдореБрдЭреЗ рдпрд╛рдж рд╣реИ рдХрд┐ рд╣рдо рдХреЗрд╡рд▓ рд╡рд┐рдХрд╛рд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдкреИрджрд╛ рд╣реБрдП рдереЗред</font></font></li><li> -,       .           тАФ   ,         .  ,  , ,       ,      ,      , . . ProductAvailability.    ,      . . .,  ,   god object,    ,        ,      ,     TDD,          ,     .   ,  , ┬л┬╗ тАФ     : ┬л    ...┬╗     , ,  TDD,     . </li></ol><br>      : <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringRunner.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ManualExclusionServiceTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ManualExclusionService service; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ManualExclusionRepository manualExclusionRepository; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearDb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ manualExclusionRepository.deleteAll(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disableItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Long productId = <span class="hljs-number"><span class="hljs-number">100L</span></span>; service.disableProduct(productId); assertThat(service.isProductEnabled(productId), is(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returnEnabledIfProductWasNotDisabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertThat(service.isProductEnabled(<span class="hljs-number"><span class="hljs-number">100L</span></span>), is(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)); assertThat(service.isProductEnabled(<span class="hljs-number"><span class="hljs-number">200L</span></span>), is(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)); } }</code> </pre> <br></div></div><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ManualExclusionService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ManualExclusionRepository manualExclusionRepository; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isProductEnabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long productId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !manualExclusionRepository.exists(productId); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disableProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> productId)</span></span></span><span class="hljs-function"> </span></span>{ manualExclusionRepository.save(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ManualExclusion(productId)); } }</code> </pre><br></div></div><br><h1>    </h1><br> ,     ,     ,   DATA     . <br><br> ,         -, . .  ProductAvailability,     : productId  isAvailable. <br><br>        ,      : <br><br><ul><li>        . </li><li>  ,    . </li><li>   ,  . </li><li>       ,       ,  ,   . </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬрдм DATA рдХреА рдУрд░ рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╕реЗрд╡рд╛ рдХреЛ рдЕрдкрдиреЗ DataCommunicationException рдХреЛ рдлреЗрдВрдХрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рд╕рдм рдХреБрдЫ рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рд╕рд░рд▓ рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВ рдПрдХ рдмрд┐рдВрджреБ рдкрд░ рдзреНрдпрд╛рди рджреЗрдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдореЗрдВ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдЪрд╛рд╣рд┐рдП рдХрд┐ рд╣рдордиреЗ рдкрд╣рд▓реЗ рдХреНрдпрд╛ рднреЗрдЬрд╛ рдерд╛, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рднрдВрдбрд╛рд░ рд╣реЛрдЧрд╛ рдЬрд┐рд╕рдореЗрдВ рд╣рдо рд╕рд╛рдорд╛рди рдХреА рдЙрдкрд▓рдмреНрдзрддрд╛ рдкрд░ рдкрд┐рдЫрд▓реЗ рдЧрдгрдирд╛ рдХреЛ рдмрдЪрд╛рдПрдВрдЧреЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProductAvucation рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд╕рд╣реЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдХрдо рд╕реЗ рдХрдо рдХреЛрдИ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдХрд┐рд╕реА рдЕрдиреНрдп рдХреЛ рдмрдирд╛рдирд╛ рддрд░реНрдХрд╕рдВрдЧрдд рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ рдореБрдЦреНрдп рдмрд╛рдд рдпрд╣ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЗрд╕ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЛ @Document (рд╣рдо рдЖрдзрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ MongoDb рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ) рдФрд░ ProductAvucation рдореЗрдВ рдЕрдиреБрдХреНрд░рдорд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рде рдирд╣реАрдВ рдЬреЛрдбрд╝реЗрдВрдЧреЗред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдкрдХреЛ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ рд╕рднреА рдХреБрдЫ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЗ рд╕рд╛рде ProductAvucation рдСрдмреНрдЬреЗрдХреНрдЯ рдбрд┐рдЬрд╛рдЗрдирд┐рдВрдЧ рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рдЪрд░рдг рдореЗрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЬреЛ рдХрд┐ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд╣рдо рдбрд┐рдЬрд╛рдЗрди рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдХреЙрд▓ рдкрджрд╛рдиреБрдХреНрд░рдо рдореЗрдВ рдЕрдзрд┐рдХ рд╣реИрдВред рдЗрди рд╡рд░реНрдЧреЛрдВ рдХреЛ рдбреЗрдЯрд╛рдмреЗрд╕-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рднреА рдЬрд╛рдирдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдбрд┐рдЬрд╛рдЗрди рдХрд░рддреЗ рд╕рдордп рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рдереАред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдм рдмрд╛рдд рд╣реИред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджрд┐рд▓рдЪрд╕реНрдк рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА ProductAvucation рдХреЗ рд╕рд╛рде рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рд▓рд┐рдЦ тАЛтАЛрджрд┐рдпрд╛ рд╣реИ рдХрд┐ рд╣рдо рдЕрднреА рд╕реЗрд╡рд╛ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдирдП рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рдорддрд▓рдм рд╣реЛрдЧрд╛ рдХрд┐ рдЗрди рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рднрд░рдирд╛ рд╣реЛрдЧрд╛, рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдкреНрд░рдпрд╛рд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдмрд╣реБрдд рдХрдо рд▓реЛрдЧ рд╣реЛрдВрдЧреЗ рдЬреЛ рдкреНрд░реЛрдбрдХреНрдЯ рдПрд╡рд┐рдПрд╢рди рд╕реЗ рдмрд╛рд╣рд░ рдХрд┐рд╕реА рджреЗрд╡ рд╡рд╕реНрддреБ рдХреЛ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрджрд┐ рдЙрдиреНрд╣реЛрдВрдиреЗ рддреБрд░рдВрдд рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд▓рд┐рдЦрд╛: рддреЛ, рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рдПрдХ рдореМрдЬреВрджрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝реАрд▓реНрдб рдЬреЛрдбрд╝рдирд╛ рдПрдХ рдЕрдиреНрдп рд╡рд░реНрдЧ рдмрдирд╛рдиреЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЖрд╕рд╛рди рд╣реЛрдЧрд╛ред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░реАрдХреНрд╖рдг</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringRunner.class) <span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LazyAvailabilityNotifierTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> LazyAvailabilityNotifier lazyAvailabilityNotifier; <span class="hljs-meta"><span class="hljs-meta">@MockBean</span></span> <span class="hljs-meta"><span class="hljs-meta">@Qualifier</span></span>(<span class="hljs-string"><span class="hljs-string">"dataClient"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AvailabilityNotifier availabilityNotifier; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AvailabilityRepository availabilityRepository; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearDb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ availabilityRepository.deleteAll(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyIfFirstTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ sendNotificationAndVerifyDataBase(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyIfAvailabilityChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ProductAvailability oldProductAvailability = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); sendNotificationAndVerifyDataBase(oldProductAvailability); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ProductAvailability newProductAvailability = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); sendNotificationAndVerifyDataBase(newProductAvailability); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doNotNotifyIfAvailabilityDoesNotChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ProductAvailability productAvailability = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); sendNotificationAndVerifyDataBase(productAvailability); sendNotificationAndVerifyDataBase(productAvailability); sendNotificationAndVerifyDataBase(productAvailability); sendNotificationAndVerifyDataBase(productAvailability); verify(availabilityNotifier, only()).notify(eq(productAvailability)); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doNotSaveIfSentWithException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ doThrow(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException()).when(availabilityNotifier).notify(anyObject()); <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> exceptionThrown = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { availabilityNotifier.notify(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (RuntimeException exception) { exceptionThrown = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } assertTrue(<span class="hljs-string"><span class="hljs-string">"Exception was not thrown"</span></span>, exceptionThrown); assertThat(availabilityRepository.findAll(), hasSize(<span class="hljs-number"><span class="hljs-number">0</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span>(expected = DataCommunicationException.class) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wrapDataException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ doThrow(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RestClientException(<span class="hljs-string"><span class="hljs-string">"Something wrong"</span></span>)).when(availabilityNotifier).notify(anyObject()); lazyAvailabilityNotifier.notify(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendNotificationAndVerifyDataBase</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ProductAvailability productAvailability)</span></span></span><span class="hljs-function"> </span></span>{ lazyAvailabilityNotifier.notify(productAvailability); verify(availabilityNotifier).notify(eq(productAvailability)); assertThat(availabilityRepository.findAll(), hasSize(<span class="hljs-number"><span class="hljs-number">1</span></span>)); assertThat(availabilityRepository.findAll().get(<span class="hljs-number"><span class="hljs-number">0</span></span>), hasProperty(<span class="hljs-string"><span class="hljs-string">"productId"</span></span>, is(productAvailability.getProductId()))); assertThat(availabilityRepository.findAll().get(<span class="hljs-number"><span class="hljs-number">0</span></span>), hasProperty(<span class="hljs-string"><span class="hljs-string">"availability"</span></span>, is(productAvailability.isAvailable()))); } }</code> </pre> <br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LazyAvailabilityNotifier</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AvailabilityNotifier</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> AvailabilityRepository availabilityRepository; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> AvailabilityNotifier availabilityNotifier; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ProductAvailability productAvailability)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> AvailabilityPersistenceObject persistedProductAvailability = availabilityRepository .findByProductId(productAvailability.getProductId()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (persistedProductAvailability == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { notifyWith(productAvailability); availabilityRepository.save(createObjectFromProductAvailability(productAvailability)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (persistedProductAvailability.isAvailability() != productAvailability.isAvailable()) { notifyWith(productAvailability); persistedProductAvailability.setAvailability(productAvailability.isAvailable()); availabilityRepository.save(persistedProductAvailability); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyWith</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ProductAvailability productAvailability)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { availabilityNotifier.notify(productAvailability); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (RestClientException exception) { log.error(<span class="hljs-string"><span class="hljs-string">"Couldn't notify"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataCommunicationException(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> AvailabilityPersistenceObject </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createObjectFromProductAvailability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ProductAvailability productAvailability)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AvailabilityPersistenceObject(productAvailability.getProductId(), productAvailability.isAvailable()); } }</code> </pre> <br></div></div><br><h1>  рдирд┐рд╖реНрдХрд░реНрд╖ </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eq/cq/u-/eqcqu-xh6fu5mybs440rhhfob-g.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╕рдорд╛рди рдЖрд╡реЗрджрди рдХреЛ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рдирд╛ рдерд╛ред рдФрд░ рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдкрд╣рд▓реЗ рдпрд╣ рдЯреАрдбреАрдбреА рдХреЗ рдмрд┐рдирд╛ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛, рдлрд┐рд░ рд╡реНрдпрд╡рд╕рд╛рдп рдиреЗ рдХрд╣рд╛ рдХрд┐ рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рдерд╛, рдФрд░ рдЫрд╣ рдорд╣реАрдиреЗ рдХреЗ рдмрд╛рдж рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдореЗрдВ рдмрджрд▓рд╛рд╡ рдЖрдпрд╛, рдФрд░ рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ рдЦрд░реЛрдВрдЪ рд╕реЗ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ (рд▓рд╛рдн рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╕реНрдХ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рд╣реИ, рдФрд░ рдпрд╣ рдХреБрдЫ рдмрд╛рд╣рд░ рдлреЗрдВрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрддрдирд╛ рдбрд░рд╛рд╡рдирд╛ рдирд╣реАрдВ рдерд╛) ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рднрд┐рдиреНрди рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╣реА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓рд┐рдЦрдХрд░, рдореИрдВ рдЙрдирдХреЗ рдорддрднреЗрджреЛрдВ рдХреА рд╕рд░рд╛рд╣рдирд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВред рдЕрдкрдиреЗ рдЕрднреНрдпрд╛рд╕ рдореЗрдВ, рдореИрдВрдиреЗ рджреЗрдЦрд╛ рдХрд┐ рдЯреАрдбреАрдбреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЛ рдмрдирд╛рдиреЗ рдореЗрдВ рдХреИрд╕реЗ рдорджрдж рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ, рдЕрдзрд┐рдХ рд╕рд╣реА рдврдВрдЧ рд╕реЗред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореИрдВ рдпрд╣ рдорд╛рди рд╕рдХрддрд╛ рд╣реВрдВ рдХрд┐ рдЗрд╕рдХрд╛ рдХрд╛рд░рдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реЗ рдкрд╣рд▓реЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдХрд┐, рд╢реБрд░реБрдЖрдд рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдкрд╣рд▓реЗ рд╕реЛрдЪрддреЗ рд╣реИрдВ рдХрд┐ рдмрдирд╛рдпрд╛ рд╡рд░реНрдЧ рдХреНрдпрд╛ рдХрд░реЗрдЧрд╛ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬрдм рдХреЛрдИ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╣рдо рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ "рдСрдмреНрдЬреЗрдХреНрдЯ" рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рди рд╡рд╕реНрддреБрдУрдВ рдХреЛ рд╕рдЯреАрдХ рдХреЙрдиреНрдЯреНрд░реИрдХреНрдЯ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╡рд╕реНрддреБ рдЙрдиреНрд╣реЗрдВ рдЬрд░реВрд░рдд рд╣реЛрддреА рд╣реИ, рдмрд┐рдирд╛ рдХрд┐рд╕реА рдкреНрд░рд▓реЛрднрди рдХреЗ рдЬрд▓реНрджреА рд╕реЗ рдХрд╣реАрдВ рди рдХрд╣реАрдВ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рдПрдХ рдЗрдХрд╛рдИ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреА рд╣реИ рдЬреЛ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдХрдИ рдХрд╛рд░реНрдпреЛрдВ рд╕реЗ рдирд┐рдкрдЯреЗрдЧреАред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрдкрдиреЗ рд▓рд┐рдП рдЯреАрдбреАрдбреА рдХреЗ рдореБрдЦреНрдп рд▓рд╛рднреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ, рдореИрдВ рдЗрд╕ рдмрд╛рдд рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ рдХрд┐ рдореИрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЙрд╕ рдЙрддреНрдкрд╛рдж рдкрд░ рдЕрдзрд┐рдХ рдЖрд╢реНрд╡рд╕реНрдд рд╣реЛ рдЧрдпрд╛ рд╣реВрдВ рдЬреЛ рдореИрдВ рдЙрддреНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реВрдВред рдпрд╣ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ TDD рдкрд░ рд▓рд┐рдЦреЗ рдЧрдП рдФрд╕рдд рдХреЛрдб рдХреЛ рд╢рд╛рдпрдж рдкрд░реАрдХреНрд╖рдгреЛрдВ рджреНрд╡рд╛рд░рд╛ рдХрд╡рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдореИрдВрдиреЗ TDD рдкрд░ рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдХрд┐рдпрд╛ рдерд╛ рдХрд┐ рдореЗрд░реЗ рджрд┐рдП рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж рдХреЛрдб рдХреЗ рдореЗрд░реЗ рд╕рдВрдкрд╛рджрдиреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрдо рд╣реЛ рдЧрдИ рдереА рдЗрд╕рдХрд╛ рдкрд░реАрдХреНрд╖рдг рд▓рдЧрднрдЧ рд╢реВрдиреНрдп рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдПрдХ рднрд╛рд╡рдирд╛ рдереА рдХрд┐ рдПрдХ рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдореИрдВ рдмреЗрд╣рддрд░ рдмрди рдЧрдпрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрд╡реЗрджрди рдХреЛрдб </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╣реИ</font></a><font style="vertical-align: inherit;"> ред рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЬреЛ рдпрд╣ рд╕рдордЭрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЗрд╕реЗ рдЪрд░рдгреЛрдВ рдореЗрдВ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛, рдореИрдВ рдХрдорд┐рдЯреНрд╕ рдХреЗ рдЗрддрд┐рд╣рд╛рд╕ рдкрд░ рдзреНрдпрд╛рди рджреЗрдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ, рдЬрд┐рд╕рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ, рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ TDD рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдзрд┐рдХ рд╕рдордЭ рдореЗрдВ рдЖрдПрдЧреАред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ рдПрдХ рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реИ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╡реАрдбрд┐рдпреЛ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬреЛ рдореИрдВ рдЕрддреНрдпрдзрд┐рдХ рдХрд┐рд╕реА рдХреЛ рджреЗрдЦрдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдЬреЛ рдЯреАрдбреАрдбреА рдХреА рджреБрдирд┐рдпрд╛ рдореЗрдВ рдЙрддрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рдЬреНрд╕рди рдХреА рддрд░рд╣ рдПрдХ рд╕реНрд╡рд░реВрдкрд┐рдд рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХрд╛ рдкреБрди: рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рдЬрд╛рдВрдЪрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рдЖрд╡реЗрджрди POJO рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдкрд░ json рдХреЛ рдкрд╛рд░реНрд╕ рдХреИрд╕реЗ рдХрд░реЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк IDEA рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЬрд▓реНрджреА рдФрд░ рдмрд┐рдирд╛ рджрд░реНрдж рдХреЗ JSON рднрд╛рд╖рд╛ рдЗрдВрдЬреЗрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрд╡рд╢реНрдпрдХ рд╕реНрд╡рд░реВрдкрдг рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рдиреБрдХрд╕рд╛рди рдХреНрдпрд╛ рд╣реИрдВ? </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд▓рдВрдмрд╛ рд╕рдордп рд╣реИред рдорд╛рдирдХ рдкреНрд░рддрд┐рдорд╛рди рдореЗрдВ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХрд░рдирд╛, рдореЗрд░реЗ рд╕рд╣рдпреЛрдЧреА рдХреЛ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдХреЛрдВ рдХреЛ рдмрд┐рдирд╛ рдХрд┐рд╕реА рдкрд░реАрдХреНрд╖рдг рдХреЗ рд╕реЗрд╡рд╛ рджреЗрдиреЗ рдХрд╛ рдЦрд░реНрдЪ рд╡рд╣рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рд░рд╛рд╕реНрддреЗ рдореЗрдВ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдмрд╣реБрдд рддреЗрдЬ рдерд╛ред рдЯреАрдбреАрдбреА рдкрд░ рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╕рдордп рд╕реАрдорд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЗ рдкреНрд░рдмрдВрдзрдХ рдирд╛рдЦреБрд╢ рд╣реЛрдВрдЧреЗред рдпрд╣рд╛рдБ, рд╡реНрдпрд╛рдкрд╛рд░ рджреВрд░ рд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рдмреАрдЪ, рд▓реЗрдХрд┐рди рдПрдХ рд▓рдВрдмреЗ рд╕рдордп рдХреЗ рд▓рд┐рдП рдФрд░ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рддреЗрдЬреА рд╕реЗред рдореИрдВ рдЕрдкрдиреЗ рд▓рд┐рдП рдкрд╣рд▓рд╛ рдЪреБрдирддрд╛ рд╣реВрдВ, рдХреНрдпреЛрдВрдХрд┐ рджреВрд╕рд░рд╛ рдкрд░рд┐рдгрд╛рдо рд▓рдВрдмрд╛ рд╣реЛрддрд╛ рд╣реИред рдФрд░ рдмрдбрд╝реА рдирд╕реЛрдВ рдХреЗ рд╕рд╛рдеред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрд░реА рднрд╛рд╡рдирд╛рдУрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░, TDD рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИ рдпрджрд┐ рдЖрдкрдХреЛ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд░рд┐рдлреИрдХреНрдЯрд┐рдВрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: рдХреНрдпреЛрдВрдХрд┐ рд╕реНрдХреНрд░реИрдЪ рд╕реЗ рдмрдирд╛рдП рдЧрдП рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд╡рд┐рдкрд░реАрдд, рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдХрд┐рд╕ рддрд░реАрдХреЗ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░рдирд╛ рд╣реИ рдФрд░ рдкрд╣рд▓реЗ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реИред рдпрд╣ рдкрддрд╛ рд▓рдЧ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдХреНрд▓рд╛рд╕ рдЯреЗрд╕реНрдЯ рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдЗрд╕реЗ рд╣рдЯрд╛ рджреЗрдВред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреАрдбреАрдбреА рдЪрд╛рдВрджреА рдХреА рдЧреЛрд▓реА рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕реНрдкрд╖реНрдЯ, рдкрдардиреАрдп рдХреЛрдб рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдХрд╣рд╛рдиреА рд╣реИ рдЬреЛ рдкреНрд░рджрд░реНрд╢рди рдХреА рд╕рдорд╕реНрдпрд╛рдПрдВ рдкреИрджрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдкрдиреЗ рдПрди рдХрдХреНрд╖рд╛рдПрдВ рдмрдирд╛рдИрдВ, рдЬреЛ рдХрд┐ рдлрд╛рдЙрд▓рд░ рдХреА рддрд░рд╣ рд╣реИрдВ, рдкреНрд░рддреНрдпреЗрдХ рдЕрдкрдиреА-рдЕрдкрдиреА рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдФрд░ рдлрд┐рд░ рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдЕрдкрдирд╛ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрдиреНрд╣реЗрдВ рдЖрдзрд╛рд░ рдкрд░ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рднреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдПрди рдХреНрд╡реЗрд░реА рд╣реЛрдЧреАред </font><font style="vertical-align: inherit;">рдмрдирд╛рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, 1 рджреЗрд╡ рд╡рд╕реНрддреБ рдФрд░ 1 рдмрд╛рд░ рдЬрд╛рдирд╛ред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдорд┐рд▓реАрд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рд▓рдбрд╝рддреЗ рд╣реИрдВ, рддреЛ рдЯреАрдбреАрдбреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдкрдХреЛ рдЗрд╕реЗ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрдирд╛ рд╣реЛрдЧрд╛: рдкрдардиреАрдп рдХреЛрдб рд╣рдореЗрд╢рд╛ рд╕рдмрд╕реЗ рддреЗрдЬ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЕрдВрдд рдореЗрдВ, рдЗрд╕ рдкрджреНрдзрддрд┐ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИ - рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╕реЗ рд╕реЛрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд┐рдЦрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЬреНрдпрд╛рджрд╛рддрд░ рджрд░реНрдж рдкрд╣рд▓реЗ рдЪрд░рдг рдореЗрдВ рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдкрд╣рд▓рд╛ рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг рдореИрдВрдиреЗ 1.5 рджрд┐рди рд▓рд┐рдЦрд╛ рдерд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреИрд░, рдЖрдЦрд┐рд░реАред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк TDD рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЖрдкрдХрд╛ рдХреЛрдб </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрднреА рднреА рдмрд╣реБрдд рдирд╣реАрдВ рд╣реИ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рддреЛ рдорд╛рдорд▓рд╛ рдХрд╛рд░реНрдпрдкреНрд░рдгрд╛рд▓реА рдореЗрдВ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рдореБрдЭреЗ рдорджрдж рдорд┐рд▓реАред</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/je/ix/2n/jeix2nwpo0ui_ehjeisprshkrvk.jpeg"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi456662/">https://habr.com/ru/post/hi456662/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi456650/index.html">рдПрдХ рдмрдЬрдЯ рдкреЙрдХреЗрдЯ рдЖрд╕реНрдЯрд╕реАрд▓рд╕реНрдХрдк рдЪреБрдирдирд╛</a></li>
<li><a href="../hi456652/index.html">рд╕рдордп рдЗрдВрддрдЬрд╛рд░ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ: рд╡рд┐рдВрдбреЛрдЬ 10 рдЯрд╛рдЗрдорд▓рд╛рдЗрди рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдкрд░рд╛рдзреА рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ</a></li>
<li><a href="../hi456654/index.html">рдЪрд┐рддреНрд░рд┐рдд рдХреЗ рд░реВрдк рдореЗрдВ рдЗрддрдирд╛ рдбрд░рд╛рд╡рдирд╛ рдИрдЖрд░рдкреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдирд╣реАрдВ рд╣реИ</a></li>
<li><a href="../hi456656/index.html">рдПрд╕рдбреАрдПрд▓ 2 рдкрд░ рд╕рдмрдХ: рдкрд╛рда 4 - рдЯреВрдЯрддреА рдкреАрдПрдирдЬреА</a></li>
<li><a href="../hi456658/index.html">рд╡рд┐рдХрд╛рд╕: рд╣рдо рдПрдХ рдЯреАрдо рдореЗрдВ рдХреМрд╢рд▓ рдХрд╛ рдЖрдХрд▓рди рдХреИрд╕реЗ рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi456664/index.html">рдЬрдм рдХреЛрдИ рд░реЛрдмреЛрдЯ рдЖрдкрдХреЗ рдкреИрд╕реЗ рдЦреЛ рджреЗрддрд╛ рд╣реИ рддреЛ рдЙрд╕ рдкрд░ рдореБрдХрджрдорд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП</a></li>
<li><a href="../hi456666/index.html">WebTotem рдпрд╛ рд╣рдо рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЛ рдХреИрд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi456668/index.html">Microsoft ML рд╕реНрдкрд╛рд░реНрдХ: рдПрдХ рд╕реНрдкрд╛рд░реНрдХ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдЬреЛ рд╕реНрдкрд╛рд░реНрдХрд▓рдПрдо рдХреЛ рдЕрдзрд┐рдХ рдорд╛рдирд╡реАрдп рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рд▓рд╛рдЗрдЯ рдЬреАрдмреАрдПрдо рдПрдХ рдмреЛрдирд╕ рдХреЗ рд░реВрдк рдореЗрдВ</a></li>
<li><a href="../hi456670/index.html">рдмрд╣реБрдд рдЬрд╛рд╕реВрд╕реА рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдзрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
<li><a href="../hi456672/index.html">Nginx рд╡реНрдпрдВрдЬрдиреЛрдВ: PostgreSQL рд╕реЗ рд╡реЗрдмрд╕реНрдХреИрдЯ рдХреЗ рд▓рд┐рдП рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд╕реВрдЪрдирд╛рдПрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>