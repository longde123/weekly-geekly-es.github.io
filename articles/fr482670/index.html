<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•Ñ ü§üüèæ üå©Ô∏è Utilisation d'un disque dur hybride sur un MacBook et installation de Windows sur celui-ci ü§∑üèª üë®üèº‚Äçüé§ ‚≠êÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cette histoire raconte comment une simple r√©installation a pris plusieurs jours. 

 Et comment j'ai essay√© de me faire des amis EFI et Legacy sur le m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation d'un disque dur hybride sur un MacBook et installation de Windows sur celui-ci</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482670/">  Cette histoire raconte comment une simple r√©installation a pris plusieurs jours. <br><br>  Et comment j'ai essay√© de me faire des amis EFI et Legacy sur le m√™me SSD dans MacBook Pro <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2c2/001/a73/2c2001a730663fed3cf230ec667f7672.jpg" alt="image"><br><br><h4>  Contexte </h4><br>  En 2018, j'ai moi-m√™me achet√© pour un usage personnel le MacBook Pro 15 pouces, fin 2011.  Vous pouvez d√©j√† dire qu'il est vieux, mais seulement pour remplacer le pass√© de Lenovo, c'√©tait comme un r√©acteur atomique. <br><br>  J'ai eu beaucoup de succ√®s avec un √©quipement non standard, avec un √©cran 1680x1050 et des graphismes accrus.  Et il semble que tout va bien, vous pouvez l'utiliser et vous serez content, seul Mac OS seul ne suffira pas et au bout d'un moment j'ai commenc√© √† installer sur son Windows.  Et puis j'ai rencontr√© de gros probl√®mes. <br><a name="habracut"></a><br><h4>  D√©pannage </h4><br>  Il est recommand√© d'installer la plupart des informations sur Internet via le bootcamp, ce que j'ai d√©cid√© de faire comme conseill√©.  Ce n'est que maintenant que mon bootcamp n'a pas pu installer Windows.  √Ä partir de la proposition, il ne pouvait que t√©l√©charger le package de pilotes et cr√©er \ supprimer la partition pour le nouveau syst√®me d'exploitation.  Sur ce, sa fonctionnalit√© a pris fin.  La recherche sugg√®re de r√©√©crire quelques lignes de code - en vain. <br><br>  Mettant cette question de c√¥t√© pendant un court moment, j'ai commenc√© √† rechercher des informations sur l'ordinateur portable.  Il est courant de v√©rifier le num√©ro de s√©rie sur le site et de voir de quel type il s'agit.  Seul le site officiel ne dit rien d'utile.  Plus tard, j'ai commenc√© √† v√©rifier les versions d'EFI (BootRom) et SMC.  Et puis j'ai √©t√© tr√®s surpris! <br><br>  Si la version EFI est parfois mise √† jour avec l'arriv√©e de nouvelles mises √† jour depuis l'AppStore, le SMC n'est pas du tout mis √† jour.  Bien s√ªr, il y a une section sur le site officiel et vous pouvez t√©l√©charger la nouvelle version, ce qui semble assez logique.  Seul le probl√®me est que chaque ordinateur portable a sa propre version de SMC et c'est tout, il ne peut pas changer (seulement dans les cas les plus extr√™mes).  Sur Internet, je suis tomb√© sur un site o√π ils parlent d'un mod√®le dans lequel un ordinateur portable la "cette" version de SMC devrait √™tre prot√©g√©.  Il s'est av√©r√© que j'ai une version 13 pouces 1.69f4.  Au final, j'ai essay√© de r√©trograder la version SMC, mais il n'y a eu aucun r√©sultat.  Le syst√®me a indiqu√© qu'il avait √©t√© mis √† jour, mais aucun changement n'a √©t√© apport√©. <br><br>  Apr√®s toutes les recherches, j'ai perdu espoir et j'ai d√©cid√© de le mettre sur une cl√© USB.  Et puis d√©ception!  Le syst√®me voit ma carte son dans les p√©riph√©riques syst√®me et lorsque j'essaie d'installer des graphiques AMD, j'obtiens un code d'erreur 32. Et apr√®s l'installation d'Intel HD Graphichs, j'obtiens un √©cran noir.  J'ai essay√© diff√©rents montages, partout le m√™me r√©sultat.  En fin de compte, la solution a √©t√© trouv√©e assez ringard, √©tant venu chez mon p√®re, ayant pris son MacBook Pro mi-2012 et l'avoir mis dans mon SSD, j'ai install√© Windows et tout allait bien, j'avais un graphique AMD et un son de travail avec le reste des p√©riph√©riques.  Seulement, je savais que cela ne durait pas √©ternellement et il pouvait arriver qu'il n'y ait pas de second ordinateur portable mais qu'il fallait r√©installer.  Et puis je suis tomb√© √† nouveau sur cela. <br><br><h4>  Pilule pour toutes les maladies </h4><br>  Pr√®s de 95% des ressources n√©cessitent une installation via BootCamp, je n'ai pas aim√© cette id√©e, c'√©tait toujours bien de tout faire manuellement avec des poign√©es.  √Ä partir des travaux ant√©rieurs de Windows, j'ai d√©couvert qu'il fonctionne en mode h√©rit√©.  J'ai √©t√© tr√®s surpris et je n'ai pas compris comment cela pourrait √™tre, si tout fonctionne pour moi dans les syst√®mes EFI.  Par cons√©quent, sur Internet, je suis tomb√© sur des informations sur la conversion d'un disque ordinaire √† ¬´hybride¬ª.  Ainsi, je peux l'utiliser en tant que GPT et MBR en m√™me temps. <br><br>  Tout d'abord, je dois d√©couvrir la disposition de mon disque. <br><br>  J'obtiens la r√©ponse: <br><br><pre><code class="powershell hljs">sudo gpt <span class="hljs-literal"><span class="hljs-literal">-r</span></span> show /dev/disk0 gpt show: /dev/disk0: Suspicious MBR at sector <span class="hljs-number"><span class="hljs-number">0</span></span> start size index contents <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> MBR <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Pri GPT header <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> Pri GPT table <span class="hljs-number"><span class="hljs-number">34</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">40</span></span> <span class="hljs-number"><span class="hljs-number">409600</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> GPT part - C12A7328<span class="hljs-literal"><span class="hljs-literal">-F81F</span></span><span class="hljs-literal"><span class="hljs-literal">-11D2</span></span><span class="hljs-literal"><span class="hljs-literal">-BA4B</span></span><span class="hljs-literal"><span class="hljs-literal">-00A0C93EC93B</span></span> <span class="hljs-number"><span class="hljs-number">409640</span></span> <span class="hljs-number"><span class="hljs-number">204799960</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> GPT part - <span class="hljs-number"><span class="hljs-number">7</span></span>C3457EF<span class="hljs-literal"><span class="hljs-literal">-0000</span></span><span class="hljs-literal"><span class="hljs-literal">-11AA</span></span><span class="hljs-literal"><span class="hljs-literal">-AA11</span></span><span class="hljs-literal"><span class="hljs-literal">-00306543ECAC</span></span> <span class="hljs-number"><span class="hljs-number">205209600</span></span> <span class="hljs-number"><span class="hljs-number">294907904</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> GPT part - EBD0A0A2<span class="hljs-literal"><span class="hljs-literal">-B9E5</span></span><span class="hljs-literal"><span class="hljs-literal">-4433</span></span><span class="hljs-literal"><span class="hljs-literal">-87C0</span></span><span class="hljs-literal"><span class="hljs-literal">-68B6B72699C7</span></span> <span class="hljs-number"><span class="hljs-number">500117504</span></span> <span class="hljs-number"><span class="hljs-number">655</span></span> <span class="hljs-number"><span class="hljs-number">500118159</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> Sec GPT table <span class="hljs-number"><span class="hljs-number">500118191</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Sec GPT header</code> </pre> <pre> <code class="powershell hljs">sudo fdisk /dev/disk0 Disk: /dev/disk0 geometry: <span class="hljs-number"><span class="hljs-number">31130</span></span>/<span class="hljs-number"><span class="hljs-number">255</span></span>/<span class="hljs-number"><span class="hljs-number">63</span></span> [<span class="hljs-number"><span class="hljs-number">500118192</span></span> <span class="hljs-type"><span class="hljs-type">sectors</span></span>] Signature: <span class="hljs-number"><span class="hljs-number">0</span></span>xAA55 Starting Ending <span class="hljs-comment"><span class="hljs-comment">#: id cyl hd sec - cyl hd sec [ start - size] ------------------------------------------------------------------------ *1: EE 0 0 2 - 1023 254 63 [ 0 - 500118191] &lt;Unknown ID&gt; 2: 00 0 0 0 - 0 0 0 [ 0 - 0] unused 3: 00 0 0 0 - 0 0 0 [ 0 - 0] unused 4: 00 0 0 0 - 0 0 0 [ 0 - 0] unused mbp-mansi:~ mansi$</span></span></code> </pre>  Ensuite, je commence √† √©diter la structure en fonction des informations de la section: <pre> <code class="powershell hljs">sudo fdisk <span class="hljs-literal"><span class="hljs-literal">-e</span></span> /dev/disk0 fdisk: could not open MBR file /usr/standalone/i386/boot0: No such file or directory Enter <span class="hljs-string"><span class="hljs-string">'help'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> information fdisk: <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; edit <span class="hljs-number"><span class="hljs-number">1</span></span> Starting Ending <span class="hljs-comment"><span class="hljs-comment">#: id cyl hd sec - cyl hd sec [ start - size] ------------------------------------------------------------------------ 1: EE 0 0 2 - 1023 254 63 [ 1 - 409639] &lt;Unknown ID&gt; Partition id ('0' to disable) [0 - FF]: [EE] (? for help) EE Do you wish to edit in CHS mode? [n] N Partition offset [0 - 500118192]: [63] 1 Partition size [1 - 500118191]: [500118191] 409639 fdisk:*1&gt; edit 2 Starting Ending #: id cyl hd sec - cyl hd sec [ start - size] ------------------------------------------------------------------------ 2: AF 1023 254 63 - 1023 254 63 [ 409640 - 204799960] HFS+ Partition id ('0' to disable) [0 - FF]: [AF] (? for help) AF Do you wish to edit in CHS mode? [n] N Partition offset [0 - 500118192]: [409640] 409640 Partition size [1 - 499708552]: [499708552] 204799960 fdisk:*1&gt; edit 3 Starting Ending #: id cyl hd sec - cyl hd sec [ start - size] ------------------------------------------------------------------------ *3: 0C 1023 254 63 - 1023 254 63 [ 205209600 - 294907904] Win95 FAT32L Partition id ('0' to disable) [0 - FF]: [C] (? for help) 0C Do you wish to edit in CHS mode? [n] N Partition offset [0 - 500118192]: [205209600] 205209600 Partition size [1 - 294908592]: [294908592] 294907904 fdisk:*1&gt;</span></span></code> </pre><br>  Apr√®s cela, d√©finissez l'indicateur sur la troisi√®me section avec la commande <u>flag 3</u> et fermez l'utilitaire avec la commande exit ou q.  Et nous v√©rifions ce que nous avons obtenu. <br><br><pre> <code class="powershell hljs">sudo fdisk /dev/disk0 Disk: /dev/disk0 geometry: <span class="hljs-number"><span class="hljs-number">31130</span></span>/<span class="hljs-number"><span class="hljs-number">255</span></span>/<span class="hljs-number"><span class="hljs-number">63</span></span> [<span class="hljs-number"><span class="hljs-number">500118192</span></span> <span class="hljs-type"><span class="hljs-type">sectors</span></span>] Signature: <span class="hljs-number"><span class="hljs-number">0</span></span>xAA55 Starting Ending <span class="hljs-comment"><span class="hljs-comment">#: id cyl hd sec - cyl hd sec [ start - size] ------------------------------------------------------------------------ 1: EE 0 0 2 - 1023 254 63 [ 1 - 409639] &lt;Unknown ID&gt; 2: AF 1023 254 63 - 1023 254 63 [ 409640 - 204799960] HFS+ *3: 0C 1023 254 63 - 1023 254 63 [ 205209600 - 294907904] Win95 FAT32L 4: 00 0 0 0 - 0 0 0 [ 0 - 0] unused</span></span></code> </pre> <br>  Et pour vous assurer que tout a fonctionn√© √† 100%, vous pouvez t√©l√©charger le package gdisk suppl√©mentaire et l'ex√©cuter avec une telle commande <pre> <code class="powershell hljs">sudo gdisk /dev/disk0 GPT fdisk (gdisk) version <span class="hljs-number"><span class="hljs-number">1.0</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span> Warning: Devices opened with shared lock will not have their partition table automatically reloaded! Partition table scan: MBR: hybrid BSD: not present APM: not present GPT: present Found valid GPT with hybrid MBR; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> GPT. <span class="hljs-keyword"><span class="hljs-keyword">Command</span></span> (? for help):</code> </pre>  Et si tout √©tait bien fait, la section MBR est devenue hybride. <br><br><h4>  Mode h√©rit√© du shell EFI? </h4><br>  La chose la plus int√©ressante maintenant dans l'installation de Windows.  Cela ne fonctionnera pas avec nous comme d'habitude, le syst√®me ne vous laissera tout simplement pas installer.  C'est logique, car nous chargeons l'installation en mode EFI et n√©cessitons de travailler avec le balisage GPT, et le syst√®me ne place pas MBR dans ce mode. <br><br>  WinNTSetup a fait un excellent travail en installant le syst√®me d'exploitation.  Apr√®s avoir choisi la langue, nous appelons la console en appuyant sur Shift + F10 et allons dans le r√©pertoire avec le programme qui a √©t√© pr√©c√©demment copi√© sur la cl√© USB.  Et puis tout est simple, ex√©cutez-le, sp√©cifiez le fichier d'installation, o√π nous voulons l'installer et cliquez sur D√©marrer.  Apr√®s cela, les fichiers sont d√©compress√©s, le chargeur de d√©marrage est enregistr√©, et c'est tout, le syst√®me est presque install√©. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/28d/e47/79f/28de4779fb4b05e1f47b49f4ab990f06.jpg" alt="image"><br><br>  Apr√®s une installation r√©ussie, fermez le programme, quittez l'installation et red√©marrez l'ordinateur portable et s√©lectionnez une nouvelle partition Windows et attendez un miracle.  Le syst√®me peut red√©marrer plusieurs fois, ce qui est tout √† fait normal, et apr√®s quelques minutes d'attente, nous obtenons une version fonctionnelle de Windows avec un seul graphique et un bon son. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d9a/80d/b4e/d9a80db4e95617dc004e62778d07f082.png" alt="image"><br><br><h4>  Conclusion </h4><br>  Apr√®s de telles manipulations et informations sur Internet, le fonctionnement de l'application BootCamp devient plus compr√©hensible et compr√©hensible.  Elle fait ces op√©rations automatiquement, nous avons tout corrig√© manuellement.  Et maintenant, apr√®s de telles informations, il n'est plus effrayant de tout r√©installer et de remplacer ssd par plus avec l'installation de tous les syst√®mes d'exploitation prendra beaucoup moins de temps. <br><br>  <b>Liens utiles:</b> <br><br>  BootCamp - <a href="https://support.apple.com/en-us/HT201468" rel="nofollow">support.apple.com/en-us/HT201468</a> <br>  gdisk \ fdisk - <a href="https://www.rodsbooks.com/gdisk/" rel="nofollow">www.rodsbooks.com/gdisk</a> <br>  Convertir GPT en hybride - <a href="https://apple.stackexchange.com/questions/308824/how-to-convert-a-drive-from-the-gpt-format-to-the-hybrid-gpt-mbr-format-when-usi%3Frq%3D1" rel="nofollow">apple.stackexchange.com/questions/308824/how-to-convert-a-drive-from-the-gpt-format-to-the-hybrid-gpt-mbr-format-when-usi?rq = 1</a> <br>  WinNTSetup - <a href="http://wntsetup.ru/" rel="nofollow">wntsetup.ru</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr482670/">https://habr.com/ru/post/fr482670/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr482648/index.html">Arthur Khachuyan: ¬´Du vrai Big Data dans la publicit√©¬ª</a></li>
<li><a href="../fr482650/index.html">Connexion du syst√®me IP-DECT micro-cellulaire Yealink W80B √† 3CX</a></li>
<li><a href="../fr482652/index.html">Lettre √† un d√©butant pour √©tudier la science des donn√©es</a></li>
<li><a href="../fr482656/index.html">Jet wing Yves Rossi: d√©collage et atterrissage verticaux autonomes</a></li>
<li><a href="../fr482664/index.html">Un regard sur la technologie de la derni√®re d√©cennie</a></li>
<li><a href="../fr482672/index.html">Rapport annuel Habrapost - 2019</a></li>
<li><a href="../fr482674/index.html">¬´Imm√©diatement apr√®s les vacances¬ª: s√©minaires, master classes et concours technologiques √† l'Universit√© ITMO</a></li>
<li><a href="../fr482676/index.html">Tri efficace des donn√©es de type Struct</a></li>
<li><a href="../fr482678/index.html">Comment j'ai d√©cid√© de faire une qu√™te de texte pour iOS et ce qui en est r√©sult√©</a></li>
<li><a href="../fr482680/index.html">Crypter, XOR, piratage ZIP et PRSP non crypt√©s. R√©solution de probl√®mes avec r0ot-mi Crypto. 2e partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>