<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙍 📝 👈 Web-UART-Fernbedienung 🚽 🚔 👌🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beginnen wir mit Eisen 
 Ich habe einmal in derselben Fabrik gearbeitet, in der alle Arten von Elektronik modelliert wurden, die nicht sehr komplizier...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Web-UART-Fernbedienung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440466/"><h2>  Beginnen wir mit Eisen </h2><br><img src="https://www.dataweek.co.za/articles/Dataweek%20-%20Published%20by%20Technews/18EMPESG21.jpg" alt="Bild" align="left">  Ich habe einmal in derselben Fabrik gearbeitet, in der alle Arten von Elektronik modelliert wurden, die nicht sehr kompliziert waren und manchmal unter die Definition von „Internet der Dinge“ fielen.  Zum größten Teil alle Arten von Sensoren für Sicherheitssysteme: Rauch, Lärm, Eindringen, Feuer und mehr.  Das Sortiment war groß, manchmal waren es weniger als 500 Stück, und fast für jedes Produkt musste ich eine separate Testvorrichtung herstellen - tatsächlich wurde nur eine Blechdose, in der das Produkt getestet wurde, durch einen Deckel gepresst und von unten Kontaktnadeln an Kontaktpunkte gedrückt auf einer Leiterplatte so etwas: <br><a name="habracut"></a><br>  Somit war es möglich, physisch mit dem Gerät zu kommunizieren.  Das Kommunikationsprotokoll, das wir hatten, war in der Branche weit verbreitet - RS232 (COM-Port, eine Art UART).  Alle Arten von einfachen gesteuerten Geräten zum Testen des Endprodukts wurden ebenfalls in die Schachtel gelegt.  Alle diese Hilfsinstrumente wurden auf die gleiche Weise gesteuert.  Die gesamte Struktur war sehr schwach und alle möglichen Probleme gehörten zum Tagesablauf. <br><br>  Das Spektrum der Probleme war sehr groß - schlechte Kontakte, umgekehrte Polarität während der Installation, Probleme mit dem getesteten Produkt, mit Steuer- und Messgeräten, mit Kontaktnadeln, mit dem Testcode ... aber Sie wissen es nie!  Aber es war notwendig, ständig zu testen, und wenn irgendwo Tests einsetzten, musste einer der Ingenieure auf die Leitung stampfen und anfangen, alles manuell zu überprüfen. <br><br>  Zunächst wurde Docklight gestartet - ein gutes Dienstprogramm für die „Kommunikation“ über COM-Ports, das jedoch viele Einschränkungen aufwies.  Und hier nähern wir uns dem Wesen der Sache. <br><br><h2>  Warum passte Docklight nicht zu mir? </h2><br>  Nun, lass uns gehen. <br><br><ul><li>  Das erste Problem ist, dass Docklight <b>nur</b> unter Windows ausgeführt wird.  So könnte die Installation des "Nervenzentrums" in Form von RaspberryPi, das alle Geräte oder ähnliches verbinden würde, vergessen werden.  Ich musste NUC installieren - die billigste Lösung in dieser Situation.  Schwer, ziemlich groß und nicht der billigste.  Übrigens, als diese Testvorrichtungen von Ort zu Ort gezogen wurden, haben NUCs sehr, sehr viel gekämpft (obwohl ich zugebe, dass ihr Design ziemlich solide ist). <br></li><li>  Der zweite - der Fernzugriff konnte nur über die Desktop-Freigabe erfolgen - wurde sogar über das lokale Netzwerk verlangsamt und war sogar über das Internet völlig lahm. <br></li><li>  Drittens hatte jedes Gerät seinen eigenen Befehlssatz, und Docklight konnte eine Datei mit einer Liste von Befehlen laden.  Wenn Sie beispielsweise eine ähnliche Liste mit jemandem in der Abteilung teilen mussten, senden Sie entweder eine E-Mail mit der Datei oder ... senden Sie einen Link zu der Datei im freigegebenen Ordner!  Natürlich erforderte jede Docklight-Installation solche Dateien lokal, und all dies musste Dutzende (wenn nicht Hunderte Male) manuell durchgeführt werden - für jeden NUC zog jeder Ingenieur seine bevorzugten und praktischen Befehlslisten.  Und auf dem Hof ​​2019 möchte ich Sie daran erinnern ... <br></li><li>  Viertens können Sie mit Docklight einen COM-Anschluss nicht automatisch einem Gerätenamen zuordnen: Wenn Sie beispielsweise das Netzteil anschließen, kommuniziert Windows über COM12 mit dem Gerät.  Wenn Sie die Strings manuell ziehen möchten, müssen Sie in Docklight COM12 öffnen.  Wie können wir herausfinden, dass es nur um die Stromversorgung geht und nicht etwa um SwitchBoard?  Nun, Sie können jedes Mal in den Geräte-Manager schauen und versuchen, nicht zu vergessen, welches Gerät an welchen Port angeschlossen ist.  Gleichzeitig garantiert niemand, dass der vorherige Port bei diesem Gerät verbleibt, wenn Sie das Gerät einfach herausziehen und dann wieder anschließen.  Kurz gesagt, jedes Mal, wenn Sie es manuell tun müssen.  Und glauben Sie mir, am Ende des Tages drehte sich mein Kopf davon. <br></li><li>  Fünftens benötigte jeder Port eine separate Kopie des Programms, und natürlich mussten alle Vorgänge für jedes Gerät einzeln ausgeführt werden, und obwohl Docklight die Skripterstellung unterstützt, gibt es keine Interaktion zwischen den einzelnen Instanzen. <br><br>  Weiter.  Es wurde keine Integration mit einem anderen Produkt bereitgestellt.  Es scheint eine Kleinigkeit zu sein, aber hier ist eine Situation, in der es zu weißer Hitze kam: Der Test fiel, und wir müssen herausfinden, warum.  Zunächst müssen Sie eine Verbindung zu den Geräten herstellen und prüfen, ob sie überhaupt tot sind.  Wir gehen zum Geräte-Manager, schauen uns an, auf welchem ​​Port sich unser Gerät befindet, öffnen Docklight, initiieren die Kommunikation mit unserem Port ... Fehler.  Verdammt!  Ich habe vergessen, den auf dem NUC installierten Dienst zu beenden und alle Ports beizubehalten.  Exklusiv, wissen Sie.  Okay, wir verlangsamen den Dienst, öffnen den Port, laden die Datei mit den Befehlen des Geräts, senden die Befehle, wir erhalten (oder erhalten keine) Antworten, wir lösen das Problem.  Wir führen den Test erneut aus, er stürzt erneut ab ... Oh, verdammt, ich habe vergessen, Docklight zu schließen und den Dienst neu zu starten.  Alles scheint keine Fehler zu sein.  Aber das ist für die nächsten paar Stunden, bis wieder etwas schief geht.  Und glauben Sie mir, es war notwendig, solche Probleme öfter zu lösen, als wir möchten. <br></li></ul><br>  Nun, und natürlich über alle Erweiterungen, fügen Sie hinzu.  Es konnte keine Funktionen oder ähnliches geben - das Produkt ist geschlossen, lange geschrieben (es scheint, dass sie nicht mehr speziell entwickelt wurden), es gibt keine Anpassung. <br><br>  Nun, ich habe beschlossen, etwas von mir zu tun, aber die Situation mit den beschriebenen Problemen zu korrigieren (oder zu verbessern). <br>  Es stellte sich so etwas wie Zabbix heraus, aber mit Schärfen für eine bestimmte Situation. <br><br><h2>  Was ist der Unterschied? </h2><br>  Vielleicht ist es sinnvoll, mit einer allgemeinen Beschreibung der Architektur zu beginnen und dann auf Details einzugehen. <br><br>  Das Schema sieht folgendermaßen aus: <br><br><img src="https://habrastorage.org/webt/qi/hh/b-/qihhb-c1wgigm6yd1vb92vayzhm.png"><br><br>  Wir haben einen Agenten, der an der Station ausgeführt wird, mit der unsere Geräte physisch verbunden sind.  Der Agent wurde in Python geschrieben, sodass er unter Windows und Linux problemlos funktioniert. Sie können ihn sicher für die Verwendung auf RaspberryPi und ähnlichen Geräten beenden.  Das Programm ist äußerst ressourcenschonend und sehr stabil.  Der Agent ist über das Websocket ständig mit dem Server (Back-End) verbunden und empfängt von dort alle Porteinstellungen und deren Parameter, sowohl während der Initialisierung als auch während der Aktualisierungen.  Der Agent verfügt in diesem Fall über eine eigene Benutzeroberfläche für Einstellungen und Überwachung (möglicherweise wurde die Verbindung unterbrochen, möglicherweise ist die Lizenz abgelaufen). <br><br><img src="https://habrastorage.org/webt/j0/-s/dl/j0-sdl9tw0wqkfltjf_btcxsr_k.png"><br><br>  Weiter.  Der Server (auch bekannt als Back-End) steigt aus dem Docker (und läuft daher nicht nur in Amazon oder Google Cloud, sondern auch auf einem nicht so leistungsstarken Computer in einem LAN mit Linux an Bord).  Es wurde in Django in Verbindung mit Redis geschrieben (zur Unterstützung von Websockets).  Es speichert alle Einstellungen und ermöglicht die Kommunikation zwischen der Benutzer-GUI (nur eine in ReactJS geschriebene Seite) und über Agent - mit unseren Geräten.  Zweiwege-Kommunikation, vollständig asynchron.  Alle Einstellungen werden in Postgres und Mongo gespeichert. <br><br>  Nun, und vielleicht ist der wichtigste Teil des Systems der Client selbst (einfach eine Seite in einem Browser, die für mehr Dynamik für ReactJS geschrieben wurde). <br><br><img src="https://habrastorage.org/webt/ki/ck/lq/kicklqhbgajmtyevcyvh83myqxm.png"><br><br>  Ja, visuelles Design ist alles andere als perfekt, aber dies kann behoben werden. <br><br>  Nun, dies kann abgerundet werden, ich werde nur ein paar Worte über den Status des Projekts und die Demo hinzufügen. <br><br><ol><li>  Dies ist ein ziemlich frühes Alpha, um potenzielle Annehmlichkeiten zu demonstrieren und das Interesse zu überprüfen. <br></li><li>  Spielen Sie eine Demo - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> <br>  Um sich anzumelden <br>  Benutzername: operator_0 <br>  Passwort: 123456789 <br>  Wir wählen QA_Test und jede Station aus (dies ist nur ein Versuch, die Struktur des Unternehmens zu simulieren - die Ports sind mit den Stationen verbunden, sie sind in Abteilungen unterteilt und jedes Büro hat seine eigene Struktur). <br></li></ol><br>  Im Prinzip werde ich bei Interesse Unterstützung für https hinzufügen und die Assemblys des Agenten für verschiedene Plattformen erstellen sowie alle anderen Funktionen hinzufügen. <br><br>  Ich freue mich über Feedback und Anregungen.  Kritik ist willkommen! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de440466/">https://habr.com/ru/post/de440466/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de440454/index.html">Paul Graham: Was ich von Hacker News gelernt habe</a></li>
<li><a href="../de440458/index.html">Vorhersage des VoIP-Netzwerkstatus basierend auf Textprotokolldateien des SIP-Anwendungsservers</a></li>
<li><a href="../de440460/index.html">Wie die sieben Mount- und Blade-Modder ein Spielestudio geschaffen haben</a></li>
<li><a href="../de440462/index.html">Top 7 Content-Marketing-Strategien, die Sie 2019 nicht verpassen sollten</a></li>
<li><a href="../de440464/index.html">Arbeiten Sie mit dem Dienst Digital Ocean Managed Databases in .NET Core</a></li>
<li><a href="../de440468/index.html">2 mal mehr, 10 mal schneller, rund um die Uhr - alles zum Wohle der Menschen</a></li>
<li><a href="../de440470/index.html">Betten Sie einen Python-Interpreter mithilfe des Panama-Projekts in eine Java-Anwendung ein</a></li>
<li><a href="../de440472/index.html">Implementierung von seq2seq-Modellen in Tensorflow</a></li>
<li><a href="../de440474/index.html">SVG-Filtereffekte. Teil 4. Zweifarbige Bilder mit feComponentTransfer</a></li>
<li><a href="../de440476/index.html">"Beginnen Sie mit Mitaps" oder Benötigen Sie überhaupt Programmierkurse?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>