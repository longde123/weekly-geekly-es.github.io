<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôç üìù üëà Web-UART-Fernbedienung üöΩ üöî üëåüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beginnen wir mit Eisen 
 Ich habe einmal in derselben Fabrik gearbeitet, in der alle Arten von Elektronik modelliert wurden, die nicht sehr komplizier...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Web-UART-Fernbedienung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440466/"><h2>  Beginnen wir mit Eisen </h2><br><img src="https://www.dataweek.co.za/articles/Dataweek%20-%20Published%20by%20Technews/18EMPESG21.jpg" alt="Bild" align="left">  Ich habe einmal in derselben Fabrik gearbeitet, in der alle Arten von Elektronik modelliert wurden, die nicht sehr kompliziert waren und manchmal unter die Definition von ‚ÄûInternet der Dinge‚Äú fielen.  Zum gr√∂√üten Teil alle Arten von Sensoren f√ºr Sicherheitssysteme: Rauch, L√§rm, Eindringen, Feuer und mehr.  Das Sortiment war gro√ü, manchmal waren es weniger als 500 St√ºck, und fast f√ºr jedes Produkt musste ich eine separate Testvorrichtung herstellen - tats√§chlich wurde nur eine Blechdose, in der das Produkt getestet wurde, durch einen Deckel gepresst und von unten Kontaktnadeln an Kontaktpunkte gedr√ºckt auf einer Leiterplatte so etwas: <br><a name="habracut"></a><br>  Somit war es m√∂glich, physisch mit dem Ger√§t zu kommunizieren.  Das Kommunikationsprotokoll, das wir hatten, war in der Branche weit verbreitet - RS232 (COM-Port, eine Art UART).  Alle Arten von einfachen gesteuerten Ger√§ten zum Testen des Endprodukts wurden ebenfalls in die Schachtel gelegt.  Alle diese Hilfsinstrumente wurden auf die gleiche Weise gesteuert.  Die gesamte Struktur war sehr schwach und alle m√∂glichen Probleme geh√∂rten zum Tagesablauf. <br><br>  Das Spektrum der Probleme war sehr gro√ü - schlechte Kontakte, umgekehrte Polarit√§t w√§hrend der Installation, Probleme mit dem getesteten Produkt, mit Steuer- und Messger√§ten, mit Kontaktnadeln, mit dem Testcode ... aber Sie wissen es nie!  Aber es war notwendig, st√§ndig zu testen, und wenn irgendwo Tests einsetzten, musste einer der Ingenieure auf die Leitung stampfen und anfangen, alles manuell zu √ºberpr√ºfen. <br><br>  Zun√§chst wurde Docklight gestartet - ein gutes Dienstprogramm f√ºr die ‚ÄûKommunikation‚Äú √ºber COM-Ports, das jedoch viele Einschr√§nkungen aufwies.  Und hier n√§hern wir uns dem Wesen der Sache. <br><br><h2>  Warum passte Docklight nicht zu mir? </h2><br>  Nun, lass uns gehen. <br><br><ul><li>  Das erste Problem ist, dass Docklight <b>nur</b> unter Windows ausgef√ºhrt wird.  So k√∂nnte die Installation des "Nervenzentrums" in Form von RaspberryPi, das alle Ger√§te oder √§hnliches verbinden w√ºrde, vergessen werden.  Ich musste NUC installieren - die billigste L√∂sung in dieser Situation.  Schwer, ziemlich gro√ü und nicht der billigste.  √úbrigens, als diese Testvorrichtungen von Ort zu Ort gezogen wurden, haben NUCs sehr, sehr viel gek√§mpft (obwohl ich zugebe, dass ihr Design ziemlich solide ist). <br></li><li>  Der zweite - der Fernzugriff konnte nur √ºber die Desktop-Freigabe erfolgen - wurde sogar √ºber das lokale Netzwerk verlangsamt und war sogar √ºber das Internet v√∂llig lahm. <br></li><li>  Drittens hatte jedes Ger√§t seinen eigenen Befehlssatz, und Docklight konnte eine Datei mit einer Liste von Befehlen laden.  Wenn Sie beispielsweise eine √§hnliche Liste mit jemandem in der Abteilung teilen mussten, senden Sie entweder eine E-Mail mit der Datei oder ... senden Sie einen Link zu der Datei im freigegebenen Ordner!  Nat√ºrlich erforderte jede Docklight-Installation solche Dateien lokal, und all dies musste Dutzende (wenn nicht Hunderte Male) manuell durchgef√ºhrt werden - f√ºr jeden NUC zog jeder Ingenieur seine bevorzugten und praktischen Befehlslisten.  Und auf dem Hof ‚Äã‚Äã2019 m√∂chte ich Sie daran erinnern ... <br></li><li>  Viertens k√∂nnen Sie mit Docklight einen COM-Anschluss nicht automatisch einem Ger√§tenamen zuordnen: Wenn Sie beispielsweise das Netzteil anschlie√üen, kommuniziert Windows √ºber COM12 mit dem Ger√§t.  Wenn Sie die Strings manuell ziehen m√∂chten, m√ºssen Sie in Docklight COM12 √∂ffnen.  Wie k√∂nnen wir herausfinden, dass es nur um die Stromversorgung geht und nicht etwa um SwitchBoard?  Nun, Sie k√∂nnen jedes Mal in den Ger√§te-Manager schauen und versuchen, nicht zu vergessen, welches Ger√§t an welchen Port angeschlossen ist.  Gleichzeitig garantiert niemand, dass der vorherige Port bei diesem Ger√§t verbleibt, wenn Sie das Ger√§t einfach herausziehen und dann wieder anschlie√üen.  Kurz gesagt, jedes Mal, wenn Sie es manuell tun m√ºssen.  Und glauben Sie mir, am Ende des Tages drehte sich mein Kopf davon. <br></li><li>  F√ºnftens ben√∂tigte jeder Port eine separate Kopie des Programms, und nat√ºrlich mussten alle Vorg√§nge f√ºr jedes Ger√§t einzeln ausgef√ºhrt werden, und obwohl Docklight die Skripterstellung unterst√ºtzt, gibt es keine Interaktion zwischen den einzelnen Instanzen. <br><br>  Weiter.  Es wurde keine Integration mit einem anderen Produkt bereitgestellt.  Es scheint eine Kleinigkeit zu sein, aber hier ist eine Situation, in der es zu wei√üer Hitze kam: Der Test fiel, und wir m√ºssen herausfinden, warum.  Zun√§chst m√ºssen Sie eine Verbindung zu den Ger√§ten herstellen und pr√ºfen, ob sie √ºberhaupt tot sind.  Wir gehen zum Ger√§te-Manager, schauen uns an, auf welchem ‚Äã‚ÄãPort sich unser Ger√§t befindet, √∂ffnen Docklight, initiieren die Kommunikation mit unserem Port ... Fehler.  Verdammt!  Ich habe vergessen, den auf dem NUC installierten Dienst zu beenden und alle Ports beizubehalten.  Exklusiv, wissen Sie.  Okay, wir verlangsamen den Dienst, √∂ffnen den Port, laden die Datei mit den Befehlen des Ger√§ts, senden die Befehle, wir erhalten (oder erhalten keine) Antworten, wir l√∂sen das Problem.  Wir f√ºhren den Test erneut aus, er st√ºrzt erneut ab ... Oh, verdammt, ich habe vergessen, Docklight zu schlie√üen und den Dienst neu zu starten.  Alles scheint keine Fehler zu sein.  Aber das ist f√ºr die n√§chsten paar Stunden, bis wieder etwas schief geht.  Und glauben Sie mir, es war notwendig, solche Probleme √∂fter zu l√∂sen, als wir m√∂chten. <br></li></ul><br>  Nun, und nat√ºrlich √ºber alle Erweiterungen, f√ºgen Sie hinzu.  Es konnte keine Funktionen oder √§hnliches geben - das Produkt ist geschlossen, lange geschrieben (es scheint, dass sie nicht mehr speziell entwickelt wurden), es gibt keine Anpassung. <br><br>  Nun, ich habe beschlossen, etwas von mir zu tun, aber die Situation mit den beschriebenen Problemen zu korrigieren (oder zu verbessern). <br>  Es stellte sich so etwas wie Zabbix heraus, aber mit Sch√§rfen f√ºr eine bestimmte Situation. <br><br><h2>  Was ist der Unterschied? </h2><br>  Vielleicht ist es sinnvoll, mit einer allgemeinen Beschreibung der Architektur zu beginnen und dann auf Details einzugehen. <br><br>  Das Schema sieht folgenderma√üen aus: <br><br><img src="https://habrastorage.org/webt/qi/hh/b-/qihhb-c1wgigm6yd1vb92vayzhm.png"><br><br>  Wir haben einen Agenten, der an der Station ausgef√ºhrt wird, mit der unsere Ger√§te physisch verbunden sind.  Der Agent wurde in Python geschrieben, sodass er unter Windows und Linux problemlos funktioniert. Sie k√∂nnen ihn sicher f√ºr die Verwendung auf RaspberryPi und √§hnlichen Ger√§ten beenden.  Das Programm ist √§u√üerst ressourcenschonend und sehr stabil.  Der Agent ist √ºber das Websocket st√§ndig mit dem Server (Back-End) verbunden und empf√§ngt von dort alle Porteinstellungen und deren Parameter, sowohl w√§hrend der Initialisierung als auch w√§hrend der Aktualisierungen.  Der Agent verf√ºgt in diesem Fall √ºber eine eigene Benutzeroberfl√§che f√ºr Einstellungen und √úberwachung (m√∂glicherweise wurde die Verbindung unterbrochen, m√∂glicherweise ist die Lizenz abgelaufen). <br><br><img src="https://habrastorage.org/webt/j0/-s/dl/j0-sdl9tw0wqkfltjf_btcxsr_k.png"><br><br>  Weiter.  Der Server (auch bekannt als Back-End) steigt aus dem Docker (und l√§uft daher nicht nur in Amazon oder Google Cloud, sondern auch auf einem nicht so leistungsstarken Computer in einem LAN mit Linux an Bord).  Es wurde in Django in Verbindung mit Redis geschrieben (zur Unterst√ºtzung von Websockets).  Es speichert alle Einstellungen und erm√∂glicht die Kommunikation zwischen der Benutzer-GUI (nur eine in ReactJS geschriebene Seite) und √ºber Agent - mit unseren Ger√§ten.  Zweiwege-Kommunikation, vollst√§ndig asynchron.  Alle Einstellungen werden in Postgres und Mongo gespeichert. <br><br>  Nun, und vielleicht ist der wichtigste Teil des Systems der Client selbst (einfach eine Seite in einem Browser, die f√ºr mehr Dynamik f√ºr ReactJS geschrieben wurde). <br><br><img src="https://habrastorage.org/webt/ki/ck/lq/kicklqhbgajmtyevcyvh83myqxm.png"><br><br>  Ja, visuelles Design ist alles andere als perfekt, aber dies kann behoben werden. <br><br>  Nun, dies kann abgerundet werden, ich werde nur ein paar Worte √ºber den Status des Projekts und die Demo hinzuf√ºgen. <br><br><ol><li>  Dies ist ein ziemlich fr√ºhes Alpha, um potenzielle Annehmlichkeiten zu demonstrieren und das Interesse zu √ºberpr√ºfen. <br></li><li>  Spielen Sie eine Demo - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> <br>  Um sich anzumelden <br>  Benutzername: operator_0 <br>  Passwort: 123456789 <br>  Wir w√§hlen QA_Test und jede Station aus (dies ist nur ein Versuch, die Struktur des Unternehmens zu simulieren - die Ports sind mit den Stationen verbunden, sie sind in Abteilungen unterteilt und jedes B√ºro hat seine eigene Struktur). <br></li></ol><br>  Im Prinzip werde ich bei Interesse Unterst√ºtzung f√ºr https hinzuf√ºgen und die Assemblys des Agenten f√ºr verschiedene Plattformen erstellen sowie alle anderen Funktionen hinzuf√ºgen. <br><br>  Ich freue mich √ºber Feedback und Anregungen.  Kritik ist willkommen! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de440466/">https://habr.com/ru/post/de440466/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de440454/index.html">Paul Graham: Was ich von Hacker News gelernt habe</a></li>
<li><a href="../de440458/index.html">Vorhersage des VoIP-Netzwerkstatus basierend auf Textprotokolldateien des SIP-Anwendungsservers</a></li>
<li><a href="../de440460/index.html">Wie die sieben Mount- und Blade-Modder ein Spielestudio geschaffen haben</a></li>
<li><a href="../de440462/index.html">Top 7 Content-Marketing-Strategien, die Sie 2019 nicht verpassen sollten</a></li>
<li><a href="../de440464/index.html">Arbeiten Sie mit dem Dienst Digital Ocean Managed Databases in .NET Core</a></li>
<li><a href="../de440468/index.html">2 mal mehr, 10 mal schneller, rund um die Uhr - alles zum Wohle der Menschen</a></li>
<li><a href="../de440470/index.html">Betten Sie einen Python-Interpreter mithilfe des Panama-Projekts in eine Java-Anwendung ein</a></li>
<li><a href="../de440472/index.html">Implementierung von seq2seq-Modellen in Tensorflow</a></li>
<li><a href="../de440474/index.html">SVG-Filtereffekte. Teil 4. Zweifarbige Bilder mit feComponentTransfer</a></li>
<li><a href="../de440476/index.html">"Beginnen Sie mit Mitaps" oder Ben√∂tigen Sie √ºberhaupt Programmierkurse?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>