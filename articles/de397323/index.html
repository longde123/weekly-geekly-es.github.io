<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåô üò´ üç≠ H√∂r auf, die Diode zu setzen üé¥ üíÜ üç∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nein, dies ist kein weiteres "f√ºr immer"
 
 Nachdem ich den Artikel √ºber den Schutz elektrischer Schaltkreise vor falscher Polarit√§t mit einem Feldeff...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>H√∂r auf, die Diode zu setzen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/397323/"><img src="https://habrastorage.org/files/85e/850/9c7/85e8509c767744c4b1d27f6729a89d8e.jpg" width="100%"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nein, dies ist kein weiteres "f√ºr immer"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nachdem ich den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √ºber den Schutz elektrischer Schaltkreise vor falscher Polarit√§t mit einem Feldeffekttransistor </font><font style="vertical-align: inherit;">gelesen hatte </font><font style="vertical-align: inherit;">, fiel mir ein, dass ich lange Zeit ein ungel√∂stes Problem hatte, den Akku automatisch vom Ladeger√§t zu trennen, wenn dieser stromlos war. Und ich war gespannt, ob es m√∂glich w√§re, einen √§hnlichen Ansatz in einem anderen Fall anzuwenden, in dem seit jeher eine Diode auch als Absperrelement verwendet wurde.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Artikel ist eine typische Anleitung zum Radfahren, wie </font><font style="vertical-align: inherit;">spricht √ºber die Entwicklung einer Schaltung, deren Funktionalit√§t seit langem in Millionen fertiger Ger√§te implementiert ist. </font><font style="vertical-align: inherit;">Daher gilt die Anfrage nicht f√ºr dieses Material, sondern f√ºr etwas v√∂llig N√ºtzliches. </font><font style="vertical-align: inherit;">Es ist vielmehr nur eine Geschichte dar√ºber, wie ein elektronisches Ger√§t geboren wird: vom Bewusstsein f√ºr die Notwendigkeit bis zum funktionierenden Prototyp durch alle Hindernisse.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum das alles?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie eine Niederspannungs-Gleichstromquelle sichern, k√∂nnen Sie eine Blei-S√§ure-Batterie am einfachsten als Puffer parallel zur Netzwerkquelle einschalten, wie dies bei Autos vor komplexen Gehirnen der Fall war. </font><font style="vertical-align: inherit;">Der Akku funktioniert zwar nicht im optimalen Modus, ist jedoch immer aufgeladen und erfordert keine Stromumschaltung beim Trennen oder Einschalten der Netzspannung am Netzteileingang. </font><font style="vertical-align: inherit;">Weitere Einzelheiten zu einigen Problemen einer solchen Einbeziehung und Versuch, sie zu l√∂sen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hintergrund</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor etwa 20 Jahren stand eine solche Frage nicht auf der Tagesordnung. Der Grund daf√ºr war die Schaltung eines typischen Netzwerknetzteils (oder Ladeger√§ts), die verhinderte, dass sich die Batterie beim Ausschalten der Netzspannung in ihren Ausgangsstromkreis entlud. Schauen wir uns das einfachste Blockschema mit Halbwellengleichrichtung an:</font></font><br>
<br>
<img src="https://habrastorage.org/files/767/e02/81b/767e0281bfad4c189c50c699bbb0d166.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist offensichtlich, dass dieselbe Diode, die die Wechselspannung der Netzwicklung gleichrichtet, auch verhindert, dass sich die Batterie in die Sekund√§rwicklung des Transformators entl√§dt, wenn die Netzspannung getrennt wird. Die Halbwellenbr√ºckenschaltung des Gleichrichters hat trotz etwas weniger Offensichtlichkeit genau die gleichen Eigenschaften. Und selbst die Verwendung eines parametrischen Spannungsstabilisators mit einem Stromverst√§rker (wie dem weit verbreiteten 7812-Chip und seinen Analoga) √§ndert nichts an der Situation: </font></font><br>
<br>
<img src="https://habrastorage.org/files/506/3d8/a4c/5063d8a4cce84369a9aad480cb5ff5a5.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn man sich die vereinfachte Schaltung eines solchen Stabilisators ansieht, wird klar, dass der Emitter√ºbergang des Ausgangstransistors die Rolle desselben Gates spielt Diode, die schlie√üt, wenn die Spannung am Ausgang des Gleichrichters verschwindet, und die Batterieladung intakt h√§lt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den letzten Jahren hat sich jedoch alles ge√§ndert. </font><font style="vertical-align: inherit;">Die Transformatorstromversorgungen mit parametrischer Stabilisierung wurden durch kompaktere und billigere AC / DC-Schaltwandler ersetzt, die einen viel h√∂heren Wirkungsgrad und ein viel h√∂heres Leistungsgewicht aufweisen. </font><font style="vertical-align: inherit;">Diese Netzteile zeigten jedoch nur mit allen Vorteilen einen Nachteil: Ihre Ausgangsschaltungen weisen eine viel komplexere Schaltung auf, die normalerweise keinen Schutz gegen den R√ºckstromfluss aus dem Sekund√§rkreis bietet. </font><font style="vertical-align: inherit;">Wenn eine solche Quelle in einem System der Form ‚ÄûBP -&gt; Pufferbatterie -&gt; Last‚Äú verwendet wird und die Netzspannung getrennt wird, beginnt sich die Batterie daher intensiv in den Ausgangsstromkreis des Netzteils zu entladen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der einfachste Weg (Diode)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die einfachste L√∂sung besteht darin, eine Diode mit einer Schottky-Barriere zu verwenden, die in der L√ºcke des positiven Kabels zwischen Netzteil und Batterie enthalten ist. </font></font><br>
<br>
<img src="https://habrastorage.org/files/c9a/f25/c16/c9af25c1694d46e1bcf6d360bf5975ca.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptprobleme dieser L√∂sung wurden jedoch bereits im obigen Artikel angesprochen. </font><font style="vertical-align: inherit;">Dar√ºber hinaus kann dieser Ansatz nicht akzeptabel sein, da eine 12-Volt-Blei-S√§ure-Batterie eine Spannung von mindestens 13,6 Volt ben√∂tigt, um im Puffermodus zu arbeiten. </font><font style="vertical-align: inherit;">Und fast ein halbes Volt, das auf die Diode f√§llt, kann diese Spannung in Kombination mit einem vorhandenen Netzteil (nur in meinem Fall) unerreichbar machen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All dies l√§sst uns nach alternativen M√∂glichkeiten der automatischen Umschaltung suchen, die die folgenden Eigenschaften haben sollten:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kleiner Durchlassspannungsabfall im eingeschalteten Zustand.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die F√§higkeit, im eingeschalteten Zustand dem von der Stromversorgung durch die Last und die Pufferbatterie verbrauchten Gleichstrom ohne nennenswerte Erw√§rmung standzuhalten.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hoher Sperrspannungsabfall und geringer Eigenverbrauch im ausgeschalteten Zustand.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normalerweise ausgeschaltet, so dass beim Entladen eines geladenen Akkus an das anfangs stromlose System die Entladung nicht beginnt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automatischer √úbergang in den Ein-Zustand, wenn die Netzspannung angelegt wird, unabh√§ngig von Vorhandensein und Ladezustand der Batterie.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der schnellste automatische √úbergang in den Aus-Zustand, wenn die Netzspannung ausf√§llt.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn die Diode ein ideales Ger√§t w√§re, w√ºrde sie all diese Bedingungen problemlos erf√ºllen, aber die harte Realit√§t wirft Zweifel an den Punkten 1 und 2 auf.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Naive L√∂sung (DC-Relais)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Analyse der Anforderungen kommt jeder auf die Idee, zu diesem Zweck ein elektromagnetisches Relais zu verwenden, das die Kontakte mithilfe des durch den Steuerstrom in der Wicklung erzeugten Magnetfelds physikalisch schlie√üen kann. Und wahrscheinlich wirft er so etwas sogar auf eine Serviette:</font></font><br>
<br>
<img src="https://habrastorage.org/files/c40/3b5/f30/c403b5f3049f427f923f8f4f04dd45a8.jpg" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Stromkreis werden normalerweise offene Relaiskontakte nur geschlossen, wenn Strom durch die Wicklung flie√üt, die mit dem Ausgang der Stromversorgung verbunden ist. Wenn Sie jedoch die Liste der Anforderungen durchgehen, stellt sich heraus, dass dieser Stromkreis nicht Punkt 6 entspricht. Wenn die Relaiskontakte einmal geschlossen wurden, f√ºhrt der Stromausfall schlie√ülich nicht zu ihrer √ñffnung aufgrund der Wicklung (und damit des gesamten Ausgangskreises des Netzteils). bleibt √ºber die gleichen Kontakte mit der Batterie verbunden! Es gibt einen typischen Fall einer positiven R√ºckkopplung, wenn der Steuerkreis eine direkte Verbindung mit der Exekutive hat und das System dadurch die Eigenschaften eines bistabilen Triggers erh√§lt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein derart naiver Ansatz ist daher keine L√∂sung f√ºr das Problem. </font><font style="vertical-align: inherit;">Wenn wir die aktuelle Situation logisch analysieren, k√∂nnen wir au√üerdem leicht zu dem Schluss kommen, dass es in der L√ºcke ‚ÄûBP -&gt; Pufferbatterie‚Äú unter idealen Bedingungen einfach keine andere L√∂sung als ein Ventil geben kann, das Strom in eine Richtung leitet. </font><font style="vertical-align: inherit;">Wenn wir kein externes Steuersignal verwenden, macht jedes unserer Schaltelemente nach dem Einschalten den von der Batterie erzeugten Strom nicht von dem von der Stromversorgung erzeugten Strom zu unterscheiden, was auch immer wir an diesem Punkt im Stromkreis tun.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kreisverkehr (Wechselstromrelais)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem alle Probleme des vorherigen Absatzes erkannt wurden, kommt die ‚ÄûDrecksack‚Äú -Person normalerweise auf die neue Idee, das Netzteil selbst als Einweg-Leitventil zu verwenden. Warum nicht? Wenn das Netzteil kein reversibles Ger√§t ist und die an seinen Ausgang gelieferte Batteriespannung am Eingang einer Wechselspannung keine 220 Volt erzeugt (wie dies in 100% der F√§lle von realen Schaltkreisen der Fall ist), kann diese Differenz als Steuersignal f√ºr ein Schaltelement verwendet werden:</font></font><br>
<br>
<a href="" rel="nofollow"><img src="https://habrastorage.org/files/f55/02f/dee/f5502fdeea514274bd63bd0da492e422.png" width="100%"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bingo! Alle Punkte der Anforderungen sind erf√ºllt und das einzige, was daf√ºr ben√∂tigt wird, ist ein Relais, das die Kontakte schlie√üen kann, wenn die Netzspannung an sie angelegt wird. Es kann sich um ein spezielles Wechselstromrelais handeln, das f√ºr die Netzspannung ausgelegt ist. Oder ein gew√∂hnliches Relais mit einem eigenen Mini-Netzteil (hier reicht jede transformatorlose Abw√§rtsschaltung mit einem einfachen Gleichrichter aus). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es w√§re m√∂glich, den Sieg zu feiern, aber diese Entscheidung hat mir nicht gefallen. Erstens m√ºssen Sie etwas direkt mit dem Netzwerk verbinden, was in Bezug auf die Sicherheit kein Problem darstellt. Zweitens die Tatsache, dass dieses Relais durch signifikante Str√∂me, wahrscheinlich bis zu zehn Ampere, geschaltet werden sollte, und dies macht das gesamte Design nicht so trivial und kompakt, wie es zun√§chst schien. Und drittens, was ist mit einem so praktischen Feldeffekttransistor?</font></font><br>
<br>
<h3>  (  +   )</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Suche nach einer eleganteren L√∂sung f√ºr das Problem f√ºhrte mich zu der Tatsache, dass eine Batterie, die in einem Puffermodus mit einer Spannung von etwa 13,8 Volt ohne externes ‚ÄûAufladen‚Äú arbeitet, auch ohne Last schnell ihre urspr√ºngliche Spannung verliert. Wenn es beginnt, sich am Netzteil zu entladen, verliert es in der ersten Minute mindestens 0,1 Volt, was f√ºr eine zuverl√§ssige Fixierung durch einen einfachen Komparator mehr als ausreichend ist. Im Allgemeinen lautet die Idee: Der Komparator steuert das Gate des Schaltfeldeffekttransistors. Einer der Komparatoreing√§nge ist mit einer stabilen Spannungsquelle verbunden. Der zweite Eingang ist mit dem Spannungsteiler der Stromversorgung verbunden. Dar√ºber hinaus wird der Teilungskoeffizient so gew√§hlt, dass die Spannung am Ausgang des Teilers bei eingeschaltetem PS ungef√§hr 0,1 bis 0,2 Volt h√∂her ist als die Spannung der stabilisierten Quelle. Ergebend,Wenn das Netzteil eingeschaltet ist, herrscht immer die Spannung vom Teiler vor. Wenn das Netzwerk jedoch stromlos ist und die Batteriespannung abf√§llt, nimmt sie proportional zu diesem Abfall ab. Nach einiger Zeit ist die Spannung am Ausgang des Teilers geringer als die Spannung des Stabilisators und der Komparator unterbricht die Schaltung mit einem Feldeffekttransistor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein ungef√§hres Diagramm eines solchen Ger√§ts:</font></font><br>
<br>
<img src="https://habrastorage.org/files/2b2/99a/20a/2b299a20a8f246ffa44fff380e7e9db9.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen k√∂nnen, ist der direkte Eingang des Komparators mit der Quelle stabiler Spannung verbunden. Die Spannung dieser Quelle ist im Prinzip nicht wichtig, die Hauptsache ist, dass sie innerhalb der zul√§ssigen Eingangsspannungen des Komparators liegt, aber es ist praktisch, wenn sie ungef√§hr die H√§lfte der Batteriespannung betr√§gt, dh ungef√§hr 6 Volt. Der inverse Eingang des Komparators ist mit dem Spannungsteiler des Netzteils und der Ausgang mit dem Gate des Schalttransistors verbunden. Wenn die Spannung am inversen Eingang die am direkten √ºberschreitet, verbindet der Komparatorausgang das Gate des Feldeffekttransistors mit Masse, wodurch der Transistor den Stromkreis √∂ffnet und schlie√üt. Nachdem das Netz abgeschaltet ist, nimmt nach einer Weile die Batteriespannung ab, zusammen mit ihr f√§llt die Spannung am inversen Eingang des Komparators ab, und wenn sich herausstellt, dass sie unter dem Pegel am direkten Eingang liegt,Der Komparator "rei√üt" das Transistor-Gate vom Boden ab und unterbricht dadurch die Schaltung. Wenn die Stromversorgung in Zukunft wieder ‚Äûzum Leben erweckt‚Äú wird, steigt die Spannung am inversen Eingang sofort auf einen normalen Wert an und der Transistor √∂ffnet wieder.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr die praktische Implementierung dieser Schaltung wurde mein vorhandener LM393-Chip verwendet. Es ist sehr billig (weniger als zehn Cent im Einzelhandel), aber gleichzeitig ist ein Doppelkomparator wirtschaftlich und hat ziemlich gute Eigenschaften. Es erm√∂glicht eine Stromversorgung von bis zu 36 Volt, hat einen √úbertragungskoeffizienten von mindestens 50 V / mV und seine Eing√§nge zeichnen sich durch eine relativ hohe Impedanz aus. Der erste der im Handel erh√§ltlichen leistungsstarken P-Kanal-MOSFETs FDD6685 wurde als Schalttransistor verwendet. Nach mehreren Experimenten wurde das folgende praktische Diagramm des Schalters abgeleitet:</font></font><br>
<br>
<img src="https://habrastorage.org/files/68f/696/c06/68f696c06fe140a0a9526e4028d3cc2e.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darin wird die abstrakte Quelle f√ºr stabile Spannung durch einen sehr realen parametrischen Stabilisator aus dem Widerstand R2 und der Zenerdiode D1 ersetzt, und der Teiler basiert auf einem Trimmerwiderstand R1, mit dem Sie den Teilungskoeffizienten auf den gew√ºnschten Wert einstellen k√∂nnen. Da die Komparatoreing√§nge eine sehr signifikante Impedanz haben, kann der D√§mpfungswiderstand im Stabilisator mehr als 100 kOhm betragen, was den Leckstrom und damit den Gesamtverbrauch des Ger√§ts minimiert. Der Wert des Abstimmwiderstands ist √ºberhaupt nicht kritisch und kann ohne Konsequenzen f√ºr die Funktionsf√§higkeit der Schaltung im Bereich von zehn bis mehreren hundert kOhm gew√§hlt werden. Aufgrund der Tatsache, dass die Ausgangsschaltung des LM393-Komparators gem√§√ü einer offenen Kollektorschaltung aufgebaut ist, ist f√ºr ihre funktionale Vervollst√§ndigung auch ein Lastwiderstand R3 erforderlich.Widerstand von mehreren hundert kOhm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Einstellen des Ger√§ts l√§uft darauf hinaus, die Position des Schiebereglers f√ºr den Trimmerwiderstand so einzustellen, dass die Spannung an Zweig 2 des Mikrokreises die an Zweig 3 um etwa 0,1 bis 0,2 Volt √ºbersteigt. Zum Einstellen ist es besser, nicht mit einem Multimeter in die hochohmigen Stromkreise zu klettern, sondern einfach den Widerstandsmotor in der unteren Position (gem√§√ü Abbildung) zu installieren, das Netzteil anzuschlie√üen (die Batterie ist noch nicht angeschlossen) und den Widerstandskontakt nach oben zu messen, indem die Spannung an Pin 1 des Mikrokreises gemessen wird. Sobald die Spannung auf Null abf√§llt, kann die Voreinstellung als vollst√§ndig betrachtet werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuchen Sie nicht, das Ger√§t bei einer minimalen Spannungsdifferenz auszuschalten, da dies zwangsl√§ufig zu einem fehlerhaften Betrieb des Stromkreises f√ºhrt. Unter realen Bedingungen muss man dagegen die Empfindlichkeit gezielt untersch√§tzen. Tatsache ist, dass beim Einschalten der Last die Spannung am Eingang der Schaltung aufgrund der nicht idealen Stabilisierung der Stromversorgung und des Endwiderstands der Verbindungsdr√§hte unweigerlich nachl√§sst. Dies kann dazu f√ºhren, dass ein √ºberempfindliches Ger√§t einen solchen Nachteil wie das Ausschalten der Stromversorgung und das Unterbrechen des Stromkreises in Betracht zieht. Infolgedessen wird das Netzteil nur angeschlossen, wenn keine Last vorhanden ist, und der Rest der Zeit muss der Akku funktionieren. Wenn die Batterie jedoch leicht entladen ist, √∂ffnet sich die interne Diode des Feldeffekttransistors und der Strom vom Netzteil beginnt durch ihn in den Stromkreis zu flie√üen. Dies f√ºhrt jedoch zu einer √úberhitzung des Transistors und zudass der Akku in einem Modus mit langer Unterladung arbeitet. Im Allgemeinen muss die endg√ºltige Kalibrierung unter realer Last durchgef√ºhrt werden, wobei die Spannung an Pin 1 der Mikroschaltung gesteuert wird und daher ein kleiner Spielraum f√ºr die Zuverl√§ssigkeit bleibt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis praktischer Tests wurden solche Ergebnisse erhalten. Der Widerstand im offenen Zustand entspricht dem Durchgangswiderstand vom Datenblatt zum Transistor. Im geschlossenen Zustand konnte der parasit√§re Strom im Sekund√§rkreis des Netzteils aufgrund seiner Bedeutungslosigkeit nicht gemessen werden. Der Stromverbrauch im Batteriemodus betrug 1,1 mA und besteht zu fast 100% aus dem vom Chip verbrauchten Strom. Nach der Kalibrierung unter maximaler Last betrug die Reaktionszeit ohne Last fast 15 Minuten. Mein Akku brauchte so viel Zeit, um sich auf die Spannung zu entladen, die vom Netzteil zum Ger√§t unter Volllast kommt. Das Herunterfahren bei Volllast erfolgt zwar fast sofort (weniger als 10 Sekunden), diese Zeit h√§ngt jedoch von der Kapazit√§t, der Ladung und dem allgemeinen ‚ÄûZustand‚Äú des Akkus ab.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wesentliche Nachteile dieses Schemas sind die relative Komplexit√§t der Kalibrierung und die Notwendigkeit, potenzielle Batterieenergieverluste f√ºr einen ordnungsgem√§√üen Betrieb in Kauf zu nehmen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der letzte Nachteil gab keine Ruhe und veranlasste mich nach einiger √úberlegung, nicht die Batteriespannung zu messen, sondern direkt die Richtung des Stroms im Stromkreis.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die zweite L√∂sung (Feldeffekttransistor + Stromrichtungsmesser)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Richtung des Stroms zu messen, k√∂nnte man einen kniffligen Sensor verwenden. Zum Beispiel ein Hallsensor, der den Magnetfeldvektor um einen Leiter herum erfasst und es erm√∂glicht, nicht nur den Stromkreis zu unterbrechen, um die Richtung, sondern auch die Stromst√§rke zu bestimmen. Aufgrund des Fehlens eines solchen Sensors (und der Erfahrung mit √§hnlichen Ger√§ten) wurde jedoch beschlossen, das Vorzeichen des Spannungsabfalls √ºber dem Kanal des Feldeffekttransistors zu messen. Nat√ºrlich wird im offenen Zustand der Kanalwiderstand in Hundertstel Ohm gemessen (aus diesem Grund und der ganzen Idee), aber es ist trotzdem ziemlich endlich und Sie k√∂nnen versuchen, dies zu spielen. Ein weiteres Argument f√ºr eine solche L√∂sung ist das Fehlen einer Feinanpassung. Wir werden nur die Polarit√§t des Spannungsabfalls messen und nicht seinen absoluten Wert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach den pessimistischsten Berechnungen haben wir, wenn der offene Kanalwiderstand des FDD6685-Transistors etwa 14 mŒ© betr√§gt und die Differenzempfindlichkeit des LM393-Komparators von der "min" -Spalte 50 V / mV betr√§gt, eine volle Spannungsspanne von 12 Volt am Ausgang des Komparators bei einem Strom durch den Transistor von etwas mehr als 17 mA. Wie Sie sehen k√∂nnen, ist der Wert ziemlich real. In der Praxis sollte sie sogar um eine Gr√∂√üenordnung kleiner sein, da die typische Empfindlichkeit unseres Komparators 200 V / mV betr√§gt, der Widerstand des Transistorkanals unter realen Bedingungen unter Ber√ºcksichtigung der Installation wahrscheinlich nicht weniger als 25 mOhm betr√§gt und der Anstieg der Steuerspannung am Gate drei nicht √ºberschreiten kann Volt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine abstrakte Implementierung sieht ungef√§hr so ‚Äã‚Äãaus:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e8d/839/2a7/e8d8392a7e2d46869f8a78e746ec3f55.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier sind die Komparatoreing√§nge auf gegen√ºberliegenden Seiten des Feldeffekttransistors direkt mit dem positiven Bus verbunden. Wenn der Strom in verschiedene Richtungen flie√üt, unterscheiden sich die Spannungen an den Eing√§ngen des Komparators zwangsl√§ufig, und das Vorzeichen der Differenz entspricht der Richtung des Stroms und der Gr√∂√üe seiner St√§rke. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf den ersten Blick ist die Schaltung extrem einfach, aber hier gibt es ein Problem mit der Leistung des Komparators. Es besteht in der Tatsache, dass wir den Chip nicht direkt von denselben Schaltkreisen versorgen k√∂nnen, die er messen sollte. Laut Datenblatt sollte die maximale Spannung an den Eing√§ngen des LM393 nicht h√∂her sein als die Versorgungsspannung minus zwei Volt. Wenn dieser Schwellenwert √ºberschritten wird, bemerkt der Komparator die Spannungsdifferenz an den direkten und inversen Eing√§ngen nicht mehr.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei m√∂gliche L√∂sungen f√ºr das Problem. Das erste ist offensichtlich, die Versorgungsspannung des Komparators zu erh√∂hen. Das zweite, was Ihnen in den Sinn kommt, ist, wenn Sie ein wenig nachdenken, die Steuerspannungen mit Hilfe von zwei Teilern gleichm√§√üig zu senken. So k√∂nnte es aussehen:</font></font><br>
<br>
<img src="https://habrastorage.org/files/19d/834/275/19d834275a1047cf8993fae1daac6c2a.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Schema besticht durch seine Einfachheit und Pr√§gnanz, ist aber in der realen Welt leider nicht realisierbar. Tatsache ist, dass es sich um eine Spannungsdifferenz zwischen den Eing√§ngen des Komparators von nur wenigen Millivolt handelt. Gleichzeitig betr√§gt die Streuung der Widerst√§nde selbst der h√∂chsten Genauigkeitsklasse 0,1%. Bei einem akzeptablen Mindestteilungsverh√§ltnis von 2 bis 8 und einer angemessenen Gesamtimpedanz des Teilers von 10 kOhm erreicht der Messfehler 3 mV, was um ein Vielfaches gr√∂√üer ist als der Spannungsabfall √ºber dem Transistor bei einem Strom von 17 mA. Die Verwendung eines ‚ÄûTrimmers‚Äú in einem der Teiler verschwindet aus dem gleichen Grund, da es nicht m√∂glich ist, seinen Widerstand mit einer Genauigkeit von mehr als 0,01% auszuw√§hlen, selbst wenn ein Pr√§zisions-Mehrdrehungswiderstand verwendet wird (plus Zeit- und Temperaturdrift nicht vergessen). Dar√ºber hinaus, wie bereits oben erw√§hnt,Theoretisch sollte diese Schaltung wegen ihrer fast "digitalen" Natur √ºberhaupt nicht kalibriert werden m√ºssen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der Grundlage des Vorstehenden gibt es in der Praxis nur eine Option zum Erh√∂hen der Versorgungsspannung. Im Prinzip ist dies kein solches Problem, da es eine gro√üe Anzahl spezialisierter Mikroschaltungen gibt, die es erm√∂glichen, mit nur wenigen Teilen einen Aufw√§rtswandler f√ºr die gew√ºnschte Spannung zu bauen. Aber dann wird sich die Komplexit√§t des Ger√§ts und sein Verbrauch fast verdoppeln, was ich vermeiden m√∂chte.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt verschiedene M√∂glichkeiten, einen Aufw√§rtswandler mit geringem Stromverbrauch zu bauen. Beispielsweise verwenden die meisten integrierten Wandler die Selbstinduktionsspannung eines kleinen Induktors, der in Reihe mit einem direkt auf dem Chip befindlichen Leistungsschalter geschaltet ist. Dieser Ansatz ist mit einer relativ starken Umwandlung gerechtfertigt, um beispielsweise eine LED mit einem Strom von mehreren zehn Milliampere zu versorgen. In unserem Fall ist dies eindeutig redundant, da Sie nur einen Strom von etwa einem Milliampere liefern m√ºssen. Wir sind viel besser geeignet, um die Gleichspannung mit einem Steuerschl√ºssel, zwei Kondensatoren und zwei Dioden zu verdoppeln. Das Prinzip seiner Wirkung kann durch das Schema verstanden werden:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e1c/fcc/ed8/e1cfcced88fe4ee58d7e8a4ce34c5866.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im ersten Moment, wenn der Transistor geschlossen ist, passiert nichts Interessantes. Der Strom vom Leistungsbus durch die Dioden D1 und D2 flie√üt zum Ausgang, wodurch am Kondensator C2 sogar eine geringf√ºgig niedrigere Spannung eingestellt wird, als dem Eingang zugef√ºhrt wird. Wenn jedoch der Transistor √∂ffnet, werden der Kondensator C1 √ºber die Diode D1 und der Transistor fast auf die Versorgungsspannung aufgeladen (abz√ºglich des direkten Abfalls an D1 und dem Transistor). Wenn wir nun den Transistor wieder schlie√üen, stellt sich heraus, dass der geladene Kondensator C1 in Reihe mit dem Widerstand R1 und der Stromquelle geschaltet ist. Infolgedessen addiert sich seine Spannung zur Spannung der Stromquelle und l√§dt C2 nach einigen Verlusten im Widerstand R1 und in der Diode D2 auf fast das Doppelte von Uin auf. Danach kann der gesamte Zyklus erneut gestartet werden. Wenn der Transistor regelm√§√üig schaltet und die Energieextraktion aus C2 nicht zu gro√ü ist,Ab 12 Volt ergeben sich etwa 20 auf Kosten von nur f√ºnf Teilen (ohne Schl√ºssel), von denen es kein einziges Wicklungs- oder Ma√üelement gibt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um einen solchen Verdoppler zu implementieren, ben√∂tigen wir zus√§tzlich zu den bereits aufgef√ºhrten Elementen einen Oszillationsgenerator und den Schl√ºssel selbst. Es mag wie viele Details erscheinen, ist es aber nicht, denn fast alles, was wir brauchen, ist bereits vorhanden. Ich hoffe, Sie haben nicht vergessen, dass der LM393 zwei Komparatoren enth√§lt? Und was haben wir bisher nur f√ºr einen verwendet? Schlie√ülich ist der Komparator auch ein Verst√§rker. Wenn Sie ihn also mit einer positiven R√ºckkopplung auf Wechselstrom abdecken, wird er zu einem Generator. Gleichzeitig √∂ffnet und schlie√üt sich der Ausgangstransistor regelm√§√üig und spielt perfekt die Rolle eines Doppeltasters. Folgendes erhalten wir, wenn wir versuchen, unseren Plan umzusetzen:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e1b/754/479/e1b754479515490b8a8adc85ae6d548e.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Idee, den Generator mit Spannung zu versorgen, die er tats√§chlich w√§hrend des Betriebs erzeugt, mag zun√§chst ziemlich wild erscheinen. Wenn Sie genau hinschauen, k√∂nnen Sie jedoch feststellen, dass der Generator zun√§chst √ºber die Dioden D1 und D2 mit Strom versorgt wird, was f√ºr den Start ausreicht. Nach der Erzeugung beginnt der Verdoppler zu arbeiten, und die Versorgungsspannung steigt allm√§hlich auf etwa 20 Volt an. Dieser Vorgang dauert nicht l√§nger als eine Sekunde. Danach erh√§lt der Generator und damit der erste Komparator eine Leistung, die die Betriebsspannung der Schaltung deutlich √ºberschreitet. Dies gibt uns die M√∂glichkeit, die Spannungsdifferenz an Source und Drain des Feldeffekttransistors direkt zu messen und unser Ziel zu erreichen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist das endg√ºltige Diagramm unseres Schalters:</font></font><br>
<br>
<a href="" rel="nofollow"><img src="https://habrastorage.org/files/9ec/c4a/dea/9ecc4adeafc54bd09515fd0997f85cb0.png" width="100%"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt nichts zu erkl√§ren, alles ist oben beschrieben. Wie Sie sehen k√∂nnen, enth√§lt das Ger√§t kein Abstimmelement und beginnt bei ordnungsgem√§√üer Montage sofort mit der Arbeit. Zus√§tzlich zu den bereits bekannten aktiven Elementen wurden nur zwei Dioden hinzugef√ºgt, die mit allen Dioden mit geringer Leistung und einer maximalen Sperrspannung von mindestens 25 Volt und einem maximalen Durchlassstrom von 10 mA verwendet werden k√∂nnen (z. B. das weit verbreitete 1N4148, das von einem alten Motherboard entfernt werden kann). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Schaltung wurde auf einem Steckbrett getestet, wo sie sich als voll funktionsf√§hig erwies. Die erhaltenen Parameter stimmen voll und ganz mit den Erwartungen √ºberein: Sofortiges Umschalten in beide Richtungen, Fehlen einer unzureichenden Reaktion beim Anschlie√üen der Last, Stromaufnahme aus der Batterie nur 2,1 mA.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine der Layoutoptionen f√ºr die Leiterplatte ist ebenfalls enthalten. </font><font style="vertical-align: inherit;">300 dpi, Ansicht von der Seite der Teile (daher m√ºssen Sie spiegelbildlich drucken). </font><font style="vertical-align: inherit;">Der Feldeffekttransistor ist seitlich an den Leitern angebracht. </font><font style="vertical-align: inherit;">
Das zusammengebaute Ger√§t, vollst√§ndig einbaufertig: Ich habe </font><font style="vertical-align: inherit;">
es auf altmodische Weise gez√ºchtet, so dass es sich als etwas schief herausstellte. Trotzdem funktioniert das Ger√§t seit mehreren Tagen in einem Stromkreis mit einem Strom von bis zu 15 Ampere ohne Anzeichen von √úberhitzung einwandfrei. </font><a href="" rel="nofollow"><font style="vertical-align: inherit;">Archiv mit Schaltplan- und Verdrahtungsdateien f√ºr EAGLE</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Vielen Dank f√ºr Ihre Aufmerksamkeit.</font></font><br>
<br>
<a href="" rel="nofollow"><img src="https://habrastorage.org/files/7b2/bbe/b91/7b2bbeb91acd4fecb4d5b83266fa11dc.png"></a> <a href="" rel="nofollow"><img src="https://habrastorage.org/files/496/413/125/496413125f7149b7b8b324975ad16a4a.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="" rel="nofollow"><img src="https://habrastorage.org/files/e10/385/07d/e1038507d5004b4baa4a43575f3295a9.jpg"></a> <a href="" rel="nofollow"><img src="https://habrastorage.org/files/75c/cf6/1f3/75ccf61f30804dcf8bac01df97612821.jpg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de397323/">https://habr.com/ru/post/de397323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de397313/index.html">F√ºgen Sie einfach Wasser hinzu. Ein kleines Additiv H‚ÇÇO erh√∂ht die Leistung des Verbrennungsmotors und spart Kraftstoff</a></li>
<li><a href="../de397315/index.html">Automatische Treppenbeleuchtung</a></li>
<li><a href="../de397317/index.html">Werks√ºberholt: Wir kaufen Elektronik g√ºnstig und mit Garantie</a></li>
<li><a href="../de397319/index.html">Internet der Dinge: LoRa vs. UNB. Teil 2: Gesch√§ft</a></li>
<li><a href="../de397321/index.html">Sony Xperia XZ und Xperia X Compact offiziell vorgestellt</a></li>
<li><a href="../de397325/index.html">Ru-Board Computer Forum Besitzer get√∂tet</a></li>
<li><a href="../de397327/index.html">WaveNet: Computersynthetisierte menschen√§hnliche Sprache</a></li>
<li><a href="../de397329/index.html">Warum faltet sich die Haut im Wasser?</a></li>
<li><a href="../de397331/index.html">iBrain —É–∂–µ –∑–¥–µ—Å—å ‚Äì –∏ —É–∂–µ –≤ –≤–∞—à–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω–µ</a></li>
<li><a href="../de397333/index.html">Die F√ºnf-Sekunden-Regel funktioniert immer noch nicht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>