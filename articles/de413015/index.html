<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛌🏿 🌜 🕓 Wie wir in Kinos analysiert werden ... und nicht nur 🤰 🥨 🐩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Computer Vision wird zunehmend in unser Leben integriert. Gleichzeitig bemerken wir nicht einmal all diese Beobachtungen von uns. Heute sprechen wir ü...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie wir in Kinos analysiert werden ... und nicht nur</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/413015/">  Computer Vision wird zunehmend in unser Leben integriert.  Gleichzeitig bemerken wir nicht einmal all diese Beobachtungen von uns.  Heute sprechen wir über ein System, mit dem die Emotionen der Besucher auf Konferenzen, im Bildungsprozess, in Kinos und vielem mehr analysiert werden können.  Übrigens werden wir den Code zeigen und über praktische Fälle sprechen.  Schau unter die Katze! <br><br><img src="https://habrastorage.org/webt/cp/l5/__/cpl5__dlawmskon1umbrzryvuza.jpeg"><a name="habracut"></a><br><br>  <i>Ich gebe dem Autor das Wort.</i> <br><br>  Möchten Sie das Publikum in der Halle, im Klassenzimmer, im Büro immer persönlich kennenlernen und verwalten?  Die Frage ist überhaupt nicht untätig.  Es geht um ein Offline-Publikum.  Um die Geschäftsleistung zu verbessern, ist es von entscheidender Bedeutung, Informationen über das Verhalten Ihres Kunden, seine Reaktionen und Wünsche zu haben.  Wie sammle ich diese Statistiken? <br><br>  Mit einem Online-Publikum ist alles einfacher.  Wenn sich das Unternehmen im Internet befindet, wird das Marketing erheblich vereinfacht und das Sammeln von Daten im Profil Ihrer Kunden sowie das unbegrenzte „Aufholen“ von Daten für eine unbegrenzte Zeit ist ganz einfach.  Viele Werkzeuge - nehmen und verwenden, die Kosten steigen. <br><br>  Im Offline-Modus gelten dieselben Methoden wie vor 50 Jahren: Fragebögen, Fragebögen, externe Beobachter mit einem Notizbuch usw.  Die Qualität dieser Ansätze ist schlecht.  Zuverlässigkeit ist zweifelhaft.  Über Bequemlichkeit können Sie im Allgemeinen schweigen. <br><br>  In diesem Artikel möchten wir über die neue CVizi-Lösung sprechen, die interessante und einzigartige Statistiken sammelt und dabei hilft, Informationen über Ihre Kunden / Besucher mithilfe von Computer Vision zu analysieren. <br><br><h2>  Videoanalyse und Kinos </h2><br>  Ursprünglich wurde das Produkt als Tool zum Zählen von Kinobesuchern und zum Vergleichen ihrer Anzahl mit Tickets entwickelt, die zur disziplinarischen Kontrolle des Servicepersonals und zur Verhinderung von Verstößen gekauft wurden.  Aber wie sie sagen, kommt der Appetit mit dem Essen. <br><br>  Die entwickelte Technologie ermöglichte die Erweiterung der Funktionen der Lösung.  Es wurde möglich, die Alters- und Geschlechtsmerkmale der Kinobesucher sowie den emotionalen Hintergrund jeder Person während der Sitzung zu bestimmen. <br><br>  Die Informationen werden umgehend aktualisiert, und der Benutzer muss lediglich in Ihr persönliches Konto gehen und Statistiken zur interessierenden Sitzung oder einen Analysebericht über die Zielgruppe anzeigen. <br><br><img src="https://habrastorage.org/webt/eh/iy/il/ehiyiluyhatopbmgnufkwfk9saw.png"><br><br>  Zum Beispiel eröffnen wir eine Sitzung mit dem Film „Ice“ und sehen auf dem Realogramm der Halle die offensichtliche Dominanz weiblicher Zuschauer (im Prinzip vorhersehbar).  Und dann schauen wir uns die Emotionen an, die die Menschen erlebt haben (jeder kann sie sehen). <br><br><img src="https://habrastorage.org/webt/5t/yo/de/5tyodebh7pkehz3lc1mv2d1ofso.png"><br><br><img src="https://habrastorage.org/webt/8o/wp/fv/8owpfvt5z5dtbhupzvhv5_1je9g.png"><br><br>  Dies waren Daten für eine bestimmte Sitzung.  Schauen wir uns nun die gleichen Daten im Allgemeinen für die gesamte Leihdauer des Films (in einem Kino) an und erhalten Sie ein relevanteres Bild. <br><br><img src="https://habrastorage.org/webt/ou/ht/nw/ouhtnwjoxfousovpgyipn5b4ace.png"><br><br>  In Bezug auf die Besucherzahlen gibt es eine klare Dominanz der weiblichen Zuschauer im Alter von 25 bis 34 Jahren.  Männer sind 2,5-3 mal weniger.  Das heißt,  Werbung in einem neuen SUV in einem Anzeigenblock ist nicht so intelligent wie das Einsetzen einer neuen Wimperntusche.  Obwohl dies ein strittiger Punkt ist.  In jedem Fall können Sie dem Werbetreibenden nach nur wenigen Tagen Mietdauer die Zielgruppe sicher und sogar quantitativ garantieren. <br><br>  Aus Sicht des emotionalen Hintergrunds wird das Bild vor allem für Distributoren und Distributoren von Interesse sein.  Wem gefällt der Film und wen nervt er?  Soll ich eine Fortsetzung drehen?  Glauben Sie Bewertungen von Bots oder erhalten Sie zuverlässige Statistiken?  In diesem Fall (der Film "Ice") ist der Film ziemlich hell in Emotionen.  Die Summe der positiven und negativen Emotionen beträgt 18,5 von 100 Papageien. Der Rest ist neutral.  Dies ist ein ziemlich guter Indikator.  Zum Vergleich: Der emotionale Hintergrund in anderen Filmen ist möglicherweise nicht so rosig (im Durchschnitt in einem Krankenhaus für alle Altersgruppen und Geschlechter). <br><br><img src="https://habrastorage.org/webt/yd/80/bm/yd80bmjtbkwhzvemeeflo33h3aa.png"><br><br>  Zum Beispiel hat die Pazifikgrenze mit einer vergleichbaren Anzahl von Zuschauern im selben Zeitraum zweimal weniger positive Emotionen.  Und der Film „Hallo, Oksana Sokolova“ ist eine solche Entdeckung für Frauen „50+“. <br><br><img src="https://habrastorage.org/webt/jp/c7/mk/jpc7mksi2r_vkw8klj_irnnmuqc.png"><br><br>  All dies sind einige Beispiele für Analysen, die in Filmnetzwerken verwendet werden können.  Sie hatten diese Informationen einfach nicht, und nur wenige Menschen wissen, dass sie überhaupt erhältlich sind, und noch mehr für ihren eigenen Gebrauch. <br><br>  Für Filmnetzwerke eröffnen sich große Möglichkeiten für eine eingehendere Analyse des Geschehens in der Halle entsprechend der Zusammensetzung des Publikums und ihrer Reaktion auf Filme an verschiedenen Orten. <br><br>  <b>Sie können sofort Folgendes hervorheben</b> : <br><br><ol><li>  Die Möglichkeit, jede Marketinghypothese zu testen, besteht darin, Echtzeit-Feedback zu erhalten und Zielgruppenänderungen und die Auswirkungen von Marketingaktivitäten objektiv zu bewerten. </li><li>  Die Möglichkeit, Werbetreibenden genaue Informationen über die Zielgruppe bereitzustellen, die die Anzeige angesehen hat.  Darüber hinaus ist es dem Werbetreibenden möglich, die Anzeige von Anzeigen durch bestimmte Zielgruppen zu gewährleisten. </li><li>  Die Möglichkeit, auf dem Markt einzigartige Marketingangebote (Rabatte) für Besucher eines bestimmten Alters und Geschlechts zu erstellen, ohne das bestehende Arbeitsschema zu brechen und die aktuellen Finanzindikatoren nicht zu reduzieren. </li></ol><br>  Diese und viele andere Möglichkeiten, die sich aufgrund dieser Entscheidung ergeben haben, können den Markt für Kinonetzwerke verändern, den Umsatz steigern und die Effizienz sowohl einzelner Kinos als auch des gesamten Netzwerks verbessern. <br><br>  In Anbetracht der Tatsache, dass die Lösung „einfach“ ist (keine Server, kein Streaming ins Internet), die Microsoft Azure-Cloud aktiv nutzt und erschwingliche Preise für den Markt bietet (in Form von regelmäßigen Abonnements des Dienstes), implementieren Kinonetzwerke in Russland und im Ausland sie aktiv. <br><br>  Darüber hinaus spiegelt sich die geschaffene Technologie in anderen Lösungen in parallelen Bereichen wider. <br><br><h2>  Videoanalysen und Ereignisse </h2><br>  Veranstaltungen, Veranstaltungen, Foren, Gipfeltreffen, Konferenzen, Symposien ... Was wissen die Organisatoren über das neue Publikum?  X Personen haben sich registriert, Y ist gekommen, Z hat die Fragebögen ausgefüllt. Das ist fast alles. <br><br>  Fragen sind ein separater Schmerz: "Also, ich kenne diesen Kameraden gut, ich werde ihm 5 Punkte geben, obwohl der Bericht langweilig war."  Wir führen dazu, dass die Zuverlässigkeit der Fragebögen gering ist. <br>  Um die Effektivität der Konferenz zu verstehen, ist lediglich ein Feedback der Teilnehmer an den Veranstalter und die Sponsoren erforderlich. <br><br>  Der Service zur Analyse des Publikums in Kinos überträgt sich perfekt auf den Konferenzort.  CVizi testete diesen Fall auch, indem er zwei Experimente durchführte: in der Matrex-Halle in Skolkovo auf einer der Konferenzen und in der Digital October-Halle während des russischen Finales des studentischen Technologieprojektwettbewerbs Imagine Cup 2018. <br><br><h4>  Experiment 1. Matrex Hall in Skolkovo </h4><br>  In Matrex wurde die Kamera nicht wie in einem Kino über dem Bildschirm installiert, sondern auf einem Teleskopständer hinter den Lautsprechern.  Somit stellte sich heraus, dass die Lösung mobil war.  Es ist nur wenige Stunden vor dem Start erforderlich, eine Kamera zu installieren, ein Planogramm der Halle zu erstellen und einen Zeitplan für die Lautsprecher einzugeben.  Dann macht das System alles selbst. <br><br><img width="300" src="https://habrastorage.org/webt/hg/9e/xb/hg9exbr_lyhzqmtuhv42ava6sq8.png"><br><br><img src="https://habrastorage.org/webt/9r/tx/n9/9rtxn9br1inyzrwbbx5317dljv8.png"><br><br>  Jetzt kann der Veranstalter Daten zur Qualität der Berichte anhand der Anzahl der Teilnehmer in der Halle und ihrer Emotionen bei jeder Sitzung / jedem Bericht sammeln.  Und das nächste Mal können Sie eine Veranstaltung anhand objektiver Fakten planen.  Es gibt Berichte, nach denen die Teilnehmer einfach den Raum verlassen und der nächste Redner mit denen zusammenarbeitet, die geblieben sind oder keine Zeit hatten zu gehen.  Dies ist falsch, und eine solche Prognose könnte den Effekt einfach dramatisch ändern, indem die Berichte neu angeordnet werden. <br><br><h4>  Experiment 2. Russisches Finale Imagine Cup </h4><br>  Hier war das Ziel etwas anders, aber der Ansatz ist der gleiche.  Eine der Nominierungen des Wettbewerbs ist der Publikumspreis.  Es sind die Zuschauer, die in der Halle sitzen, nicht die Online-Zuschauer.  Zum ersten Mal beim Imagine Cup wurde der Publikumspreis an ein Team vergeben, das von künstlicher Intelligenz ausgewählt wurde.  Das Team gewann, auf dessen Leistung das Publikum am positivsten reagierte, während die Jungs auf der Bühne standen.  Hierzu wurden bereits zwei Kameras eingesetzt, von denen jede kontinuierlich ihren eigenen Bereich der Halle kontrollierte und die emotionalen Eigenschaften jedes Betrachters sammelte. <br><br>  In diesem Fall könnten die Kameras an einem Lichtmast über der Bühne aufgehängt werden, was ihre garantierte Stabilität und Unbeweglichkeit gewährleistet.  Und wir waren erneut davon überzeugt, dass 4G Internet ausreicht, damit der Dienst funktioniert.  Das System erwies sich als so autonom wie möglich.  Von den Veranstaltern wurden nur 220 V benötigt. Das ist wirklich wichtig, weil  Bei Veranstaltungen dieser Größenordnung sind Kommunikationskanäle immer ein Engpass, und die Qualität des Dienstes hängt direkt von der Stabilität des Internetkanals ab. <br><br>  Infolgedessen wurde der Preis des Publikums an das Team vergeben, das die maximale Anzahl positiver Emotionen für seine Leistung erzielt hat - Last Day Development von NNSU im.  Lobachevsky. <br><br><img src="https://habrastorage.org/webt/0j/on/o5/0jono53dh_99qoc6mbnajn2kor8.jpeg"><br><br><h2>  Videoanalyse und Lernen </h2><br>  Der Bildungsbereich in Bezug auf die Automatisierung seiner Prozesse liegt immer noch weit hinter den übrigen Branchen zurück.  Beispielsweise wird an vielen Universitäten immer noch die Anwesenheitskontrolle in Form eines externen Controllers mit einer Zeitschrift praktiziert: Eine Person kam herein, zählte Studenten bei Vorlesungen, gab eine Nummer in die Zeitschrift ein (welche Frage?) Und fuhr fort. <br><br>  Die Technologie der Analyse des Publikums mit Computer-Vision-Methoden passt perfekt zum Bildungsbereich und eröffnet ein großes Feld für Experimente und Analysen.  Mögliche zu lösende Aufgaben: <br><br><ol><li>  Überwachung der Klassenteilnahme </li><li>  Studentenausweis </li><li>  Bewertung der Unterrichtsqualität </li><li>  Identifizierung negativer Emotionen des Schülers und Annahme vorbeugender Maßnahmen. </li><li>  Bewertung der Beteiligung eines Schülers oder eines Schülers an der Schule. </li></ol><br>  Die richtige Planung des Bildungsprozesses, einschließlich des Stundenplans, der Auswahl der Dozenten - dies ist die Grundlage für den Erfolg der Ausbildung.  Wenn wir jedoch in den Wirtschaftsbereich wechseln, sind dies die Bildungskosten im Kontext jedes Schülers. <br><br><h2>  Videoanalyse in anderen Branchen </h2><br>  Die CVizi-Technologie ist nicht auf die vorgestellten Lösungen beschränkt, es gibt Lösungen für den Einzelhandel und die Produktion. <br><br>  Eine interessante Lösung besteht beispielsweise darin, Informationen über die externe und interne Konvertierung des Geschäfts zu erhalten.  Mit diesen beiden Indikatoren können Sie einen Offline-Verkaufstrichter erstellen: <br><br><ul><li>  Wie viele Leute gehen in die Nähe Ihres Geschäfts? </li><li>  Wie viele Leute haben es betreten; </li><li>  Wie viele Leute sind an die Kasse gekommen? </li></ul><br>  Hier ist ein Beispiel für eine externe Konvertierung für ein typisches Geschäft in einem Einkaufszentrum in Moskau: <br><br><img src="https://habrastorage.org/webt/1m/1m/ki/1m1mki5kknrymdyqcye2yh_nzpy.png"><br><br>  Mit diesen Indikatoren kann ein Unternehmen effektiver Geld für die Kundengewinnung, das Testen von Marketinghypothesen und die Servicequalität ausgeben. <br><br><h2>  Wie funktioniert es </h2><br>  Jetzt möchte ich ein wenig über Technologie sprechen.  Warum sagen wir, dass die Lösung „einfach“ ist?  Alles dreht sich um Architektur.  Es ist immer eine Belastung für jeden Kunden, eine teure Lösung und zusätzlich eine Flotte von Geräten in Form verschiedener Server, Registrare und anderer Dinge zu kaufen.  Und dann alles einzurichten, sich zu paaren und zu begleiten.  Wenn dem Kunden eine Box in Form eines Mikrocomputers von der Größe eines Mobiltelefons angeboten wird, kann jeder, der mit der Technik zumindest ein wenig vertraut ist, sie in seinem lokalen Netzwerk installieren und eine IP-Videokamera aufhängen.  Die Analogie zum WLAN-Router zu Hause bietet sich an - ich habe ihn an eine Steckdose angeschlossen, das Internet verbunden und die einfachsten Einstellungen vorgenommen.  Das ist alles.  Es wird kein Kundendienst benötigt.  Alles ist sehr einfach unabhängig zu erledigen. <br><br><img src="https://habrastorage.org/webt/4e/ag/ek/4eagekwank1r6sxuxyjdfrmyz5i.png"><br><br>  Im persönlichen Konto sieht der Benutzer dann das gesamte System und kann Daten sowohl in Form von Berichten als auch in Form von Statistikprotokollen empfangen und diese Daten mithilfe der API in sein Unternehmens-IT-System übernehmen. <br><br>  Somit muss der Benutzer nicht über die Infrastruktur nachdenken und sich darum kümmern.  Das Anschließen von S-Box-Computergeräten ist sehr einfach.  Es ist auch einfach, die Lösung auf andere Punkte zu replizieren: Hängen Sie die Kameras auf, schließen Sie die erforderliche Anzahl an S-Box an und sehen Sie das Objekt auf dem Portal sofort in Ihrem Konto. <br><br>  Unter dem Portal und dem persönlichen Konto befindet sich ein ganzes System von Analysen, Datenbankspeichern, Geräteüberwachung und Benachrichtigung, das in Azure-Clouds bereitgestellt wird.  Das System ist flexibel und alle erforderlichen Rechenressourcen werden dem Benutzer automatisch zugewiesen.  Daher werden dem Benutzer die gesamten Kopfschmerzen an der Ausrüstung und ihrer Unterstützung entzogen.  Er kauft nur einen Videoanalysedienst.  Sehr bequem. <br><br><h4>  Welche Kameras können für die Videoanalyse des Publikums verwendet werden? </h4><br>  Angesichts der Tatsache, dass Sie am Ende das Gesicht des Betrachters in akzeptabler Qualität erhalten müssen, sollte die Kamera zum einen über eine gute Optik und einen guten Zoom verfügen und zum anderen über PTZ gesteuert werden. <br>  Wir haben mehr als ein Dutzend Kameras verschiedener Marken getestet.  Wir werden keine bestimmten Kameramodelle nennen, aber die Eigenschaften können geäußert werden. <br><br>  Für Hallen mit bis zu 150-200 Personen reicht eine 20x Kamera mit einer 2MP Matrix.  Für Hallen mit mehr als 200 Personen ist es besser, Kameras ab 25x zu verwenden.  Sie sind sicherlich teurer, aber das ist der richtige Weg.  Natürlich können Sie auch mit der Größe der Matrix herumspielen, aber Sie müssen verstehen, dass die Matrix im IR-Spektrum Rauschen erzeugt und der optische Zoom immer dem digitalen vorzuziehen ist. <br><br><h4>  Erkennungsgenauigkeit </h4><br>  Je näher wir uns auf dem Gesicht positionieren, desto klarer wird es.  Alles scheint klar zu sein und das Kind versteht.  Wenn bei der Geschlechtserkennung jedoch alles in Ordnung ist, kann die Genauigkeit der Altersbestimmung unabhängig von der Nähe der Kamera leicht ± 5 Jahre oder sogar mehr betragen.  Dabei geht es nicht um die Qualität von Algorithmen und neuronalen Netzen, sondern darum, dass jeder Erwachsene versucht, so viel auszusehen, wie er in sein Aussehen investiert hat. <br><br>  Daher gibt die Kamera das Alter an, in dem eine Person schaut oder versucht zu schauen.  Das heißt,  biologisches Alter und Alter laut Foto - dies können zwei große Unterschiede sein.  Schließlich kann sich jeder von uns an Fälle erinnern, in denen er sich in der Alterseinstufung des Gesprächspartners geirrt hat.  Gleichzeitig ist das menschliche Gehirn ein sehr leistungsfähiges und gut trainiertes neuronales Netzwerk. <br><br><h4>  Azure und seine Dienste </h4><br>  Das Herzstück all dessen ist der kognitive Dienst der Microsoft Face API.  Dies ist ein sehr praktischer Dienst, auf den von nahezu jeder gängigen Entwicklungsumgebung aus auf die API zugegriffen werden kann.  Wir nutzen die meisten unserer Dienste mit Python - dies ist auf der Cloud-Seite. <br><br>  <b>Die allgemeine Reihenfolge sieht folgendermaßen aus:</b> <br><br>  1) S-Box überträgt Bilder in die Cloud <br><br>  2) Der Cloud-Dienst sammelt sie, sortiert sie und füttert sie in Cognitive Services zur Gesichtserkennung.  Verwenden Sie Python, um gesammelte Bilder in die Cloud hochzuladen: <br><br><pre><code class="python">def upload_file(file_path, upload_file_type):
    """ Uploading file """
    ...
    if authData == '' or authData == 'undefined':
        ...
        try:
            r = requests.post(param_web_service_url_auth, headers={'authentication': base64string})
            if r.status_code == 200:
                authData = json.loads(r.text)['token']
                result = upload_file(file_path, upload_file_type)
                return result
            logging.error("Upload_file(%s) - UNEXPECTED AUTH RESULT CODE %d", file_path, r.status_code)
        except Exception as e:
            logging.error('Upload_file(%s) error', file_path)
            logging.exception('Upload exception ' + str(e))
        return False
    try:
        base_name = os.path.basename(file_path)
        txt_part, file_extension = os.path.splitext(base_name)
        files = {'file': open(file_path, 'rb')}
        ...
        if upload_file_type == 1:  # for upload full view
            ...
            payload = {'camid': cam_id, 'dt': dt, 'mac': mac}
            z = requests.post(uploaddatalinkhall, headers={'authentication': authData}, files=files, data=payload)
            if z.status_code == 200:
                return True
            logging.debug('post result -&gt; %d', int(repr(z.status_code)))
        if upload_file_type == 0:
            ...
            payload = {'camid': cam_id, 'dt': dt, 'json_str': json_str, 'mac': mac}
            ...
            z = requests.post(param_web_service_url, headers={'authentication': authData}, files=files, data=payload)
            myfile.close()
            if z.status_code == 200:
                ...
                if len(debug_path) &gt; 0:
                    # move
                    fnn = debug_path + os.sep + json_file
                    shutil.move(upload_folder + os.sep + json_file, fnn)
                else:
                    # delete
                    os.remove(upload_folder + os.sep + json_file)
                return True
            result = "UNEXPECTED STATUS CODE " + repr(z.status_code)
            logging.error('upload_file(%s) - ERROR. Res=%s, text: %s',
                          json_file, result, z.text)
        ...
    except Exception, e:
        ...
        logging.exception('Upload exception: ' + str(e))
    return False</code></pre><br>
3)   Python<br>
<br>
 CF.face.detect    ,    ,  MS Face detection Cognitive Service API,   :<br>
<br>
<pre><code class="python">def faceapi_face_detect(url):
    …
    # API call
    image_url = url
    need_face_id = False
    need_landmarks = False
    attributes = 'age,gender,smile,facialHair,headPose,glasses,emotion,hair,makeup,accessory,occlusion,blur,exposure,noise'
    watcher = elapser_mod.Elapser()
    try:
        api_res = CF.face.detect(image_url, need_face_id, need_landmarks, attributes)
        # callback(url, need_face_id, need_landmarks, attributes, e.elapsed(), api_res)
        text = 'CF.face.detect image_url {}, need_face_id {}, need_landmarks {}, attributes {}, completed in {} s.'. \
            format(image_url, need_face_id, need_landmarks, attributes, watcher.elapsed())
        printlog(text)
        text2 = 'Detected {} faces.'.format(len(api_res))
        printlog(text2)
        text3 = '{}'.format(api_res)
        printlog(text3)
    except CF.CognitiveFaceException as exp:
        text = '[Error] CF.face.detect image_url {}, need_face_id {}, need_landmarks {}, attributes {}, failed in {} s.'. \
            format(image_url, need_face_id, need_landmarks, attributes, watcher.elapsed())
        printlog(text)
        text2 = 'Code: {}, Message: {}'.format(exp.code, exp.msg)
        printlog(text2)
        message = exp.msg
    …
    return api_res, message</code></pre><br>
   .   ()      .        .      ,   .        .  –    .<br>
<br>
      ? !    .       API.  –   ,   ,    . ,      ()        ..,  «» .     .      .<br>
<br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>.<br>
<br>
<h2> </h2><br>
<img src="https://habrastorage.org/webt/f5/pd/9e/f5pd9ee3cgdreresbvq3nrwcqmk.jpeg" align="left" width="120"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> —     CVizi. : 'aosipov @ cvizi.com'.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FB </a>           .</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de413015/">https://habr.com/ru/post/de413015/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de413005/index.html">Blockchain - ein Heilmittel gegen die Hauptkrankheiten der modernen Bildung</a></li>
<li><a href="../de413007/index.html">Seltsame Synthese bei der Arbeit mit FPGA</a></li>
<li><a href="../de413009/index.html">Python-Umgebungsverwaltung mit Pipenv</a></li>
<li><a href="../de413011/index.html">Keller des Todes</a></li>
<li><a href="../de413013/index.html">Der Wunsch nach Transparenz</a></li>
<li><a href="../de413017/index.html">Ein kleiner Hinweis zum Platzhalter Verschlüsseln wir Zertifikate</a></li>
<li><a href="../de413019/index.html">Leben ein Jahr nach der Einführung von Robotern: Gleichheit wird nicht verlangt</a></li>
<li><a href="../de413021/index.html">Nachtsichtgerät basierend auf dem Wärmebildmodul Flir Lepton 3</a></li>
<li><a href="../de413023/index.html">„Gut vergessenes Alt“: Elektrofahrräder - von den ersten Modellen bis zu den Möglichkeiten von heute</a></li>
<li><a href="../de413025/index.html">Auf Dornen und Sternen auf dem Weg zur Optimierung von Entwicklungsprozessen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>