<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📗 👩‍⚕️ 🏨 Schnellstart mit WebComponents 👨🏿‍💼 🚡 🤚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Webkomponenten sind eine Reihe von Standards, die Softwareschnittstellen zum Organisieren der Komponentenarchitektur definieren. Alle von ihnen sind i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schnellstart mit WebComponents</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460397/">  Webkomponenten sind eine Reihe von Standards, die Softwareschnittstellen zum Organisieren der Komponentenarchitektur definieren.  Alle von ihnen sind in modernen Versionen von Browsern implementiert, d.h.  Sie erfordern keine Verbindung von Bibliotheken oder Code-Transpilern. Wenn Sie jedoch Kompatibilität benötigen, z. B. mit Internet Explorer 11, müssen Sie wahrscheinlich weiterhin Bibliotheken und Transpiler verwenden. <br><br>  Dieser Artikel richtet sich an Anfänger und Entwickler, die Erfahrung mit dem einen oder anderen Front-End-Framework haben. Dank einiger Tricks ist er jedoch möglicherweise für erfahrene Experten interessant. <br><br>  Alle unten genannten Experimente wurden in Chrome getestet und Firefox ist möglicherweise nicht einmal die neueste Version. <br><a name="habracut"></a><br>  Also fangen wir an. <br><br>  Erstellen Sie zunächst ein Verzeichnis für das Projekt und wechseln Sie dorthin. <br><br><pre><code class="bash hljs">mkdir mywebcomp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> mywebcomp</code> </pre> <br>  Ausführen: <br><br><pre> <code class="bash hljs">npm init</code> </pre><br>  in diesem Verzeichnis, indem Sie standardmäßig alle Fragen beantworten. <br><br>  Erstellen Sie eine <b>index.html-</b> Datei mit dem einfachsten Inhalt im Verzeichnis. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Fügen Sie ein Tag für ein Element hinzu. Der Name muss einen Bindestrich enthalten. Dies ist ein Signal für das CusomElements-Subsystem, dieses Element so zu definieren, dass es auf den Standardelementen aufbaut. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Fügen Sie dem <b>Skript-</b> Tag eine Handler-Klasse hinzu. <br><br><pre> <code class="javascript hljs">&lt;script type=<span class="hljs-string"><span class="hljs-string">"module"</span></span>&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyWebComp</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ connectedCallback() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.insertAdjacentHTML(<span class="hljs-string"><span class="hljs-string">'beforeEnd'</span></span>, <span class="hljs-string"><span class="hljs-string">`&lt;div&gt;Hello&lt;/div&gt;`</span></span>) } } customElements.define(<span class="hljs-string"><span class="hljs-string">'my-webcomp'</span></span>, MyWebComp); <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Im modularen <b>Skript-</b> Tag haben wir eine neue Klasse definiert, die sie mithilfe der <b>customElements.define ()</b> -Methode hinter dem <b>my-webcomp-Tag definiert hat</b> .  Durch Hinzufügen des Codes zur Methode " <b>linkedCallback ()</b> " haben wir den Aufruf beim Hinzufügen der Komponentenimplementierung zum Baum bereitgestellt.  Das Ergebnis kann bereits im Browser angezeigt werden: <br><br><img src="https://habrastorage.org/webt/h8/pe/qv/h8peqvzesjscex546s9he2xndqc.png"><br><br>  Das Platzieren des HTML-Layouts direkt im Code ist jedoch im Allgemeinen nicht richtig, wenn dies für kleine Teile geeignet ist. Dies gilt insbesondere dann, wenn die Teile eine anständige Größe erreichen.  Zum Beispiel in einem Formular mit 20 Elementen, das auch auf Unterkomponenten zu schlagen ist, ist möglicherweise nicht immer bequem.  Aus diesem Grund legen wir zunächst das Layout in der Vorlage fest, die sich im selben HTML-Code befindet, obwohl uns nichts daran hindert, es bei Bedarf aus einer separaten Datei zu laden. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myWebCompTemplate"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>Hello<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">MyWebComp</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span></span><span class="javascript">{ connectedCallback() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> tplEl = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelector(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#myWebCompTemplate'</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> html = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.importNode(tplEl.content, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.appendChild(html); } } customElements.define(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'my-webcomp'</span></span></span><span class="javascript">, MyWebComp); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Im Komponentencode haben wir das Einfügen einer Zeichenfolge durch HTML ersetzt, indem wir ein Vorlagenelement mit der ID erhalten haben.  Importieren, d.h.  Erstellen einer Kopie dieses Elements und Verknüpfen mit dem Inhalt des aktuellen Elements. <br><br>  id wird seitdem in camelCase notation benannt  Alle Bezeichner von Elementen werden bei Verwendung von Bindestrichen oder anderen Sonderangeboten in den globalen Namespace geworfen.  Der Zugriff von Zeichen auf sie ist möglicherweise weniger elegant.  Das heißt,  wir könnten stattdessen: <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tplEl = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#myWebCompTemplate'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> html = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.importNode(tplEl.content, <span class="hljs-literal"><span class="hljs-literal">true</span></span>);</code> </pre><br>  schreibe in eine Zeile: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> html = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.importNode(myWebCompTemplate.content, <span class="hljs-literal"><span class="hljs-literal">true</span></span>);</code> </pre><br>  und dieser Code würde genauso funktionieren, wird aber als nicht sehr sicher angesehen.  Wenn wir unserem Element eine ID zuweisen, können wir von überall im Kontext als Instanz aus dem globalen Namespace darauf zugreifen, indem wir Methoden aufrufen und Eigenschaftswerte abrufen. <br>  Zum Beispiel so: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myWebComp"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">MyWebComp</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span></span><span class="javascript">{ connectedCallback() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> html = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.importNode(myWebCompTemplate.content, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.appendChild(html); } } customElements.define(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'my-webcomp'</span></span></span><span class="javascript">, MyWebComp); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"><span class="undefined"> myWebComp.showMessage(); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  In diesem Szenario wird die Warnung sofort beim Laden der Seite angezeigt. <br><br>  Jetzt hängen wir einen Mausklick-Handler für unsere Komponente auf, der eine Warnmeldung anzeigt. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myWebComp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"this.showMessage(event)"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">MyWebComp</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span></span><span class="javascript">{ connectedCallback() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> html = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.importNode(myWebCompTemplate.content, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.appendChild(html); } showMessage(event) { alert(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"This is the message"</span></span></span><span class="javascript">); </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(event); } } customElements.define(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'my-webcomp'</span></span></span><span class="javascript">, MyWebComp); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Wenn Sie jetzt auf eine Nachricht klicken, reagieren wir auf Benutzeraktionen. <br><br><img src="https://habrastorage.org/webt/ps/vc/pc/psvcpclb5o5nlzbhfqxvweozoda.png"><br><br>  Das Argument für die <b>showMessage ()</b> -Methode deklariert auch ein <b>Ereignisobjekt</b> , das Ereignisdaten speichert, z. B. die Koordinaten eines Klicks oder einen Link zum Element selbst. <br><br>  Oft muss jedes einzelne Element auf einzigartige Weise konfiguriert werden. Dies kann mithilfe von Attributen erfolgen. <br><br>  Fügen Sie eine zweite Instanz des Elements hinzu und definieren Sie für jede von ihnen verschiedene Eigenschaften für <b>Begrüßungsnamen,</b> deren Werte angezeigt werden, wenn auf das Element geklickt wird. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myWebComp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">greet-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"John"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"this.showMessage(event)"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myWebComp2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">greet-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Josh"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"this.showMessage(event)"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">MyWebComp</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span></span><span class="javascript">{ connectedCallback() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> html = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.importNode(myWebCompTemplate.content, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.appendChild(html); } showMessage(event) { alert(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"This is the message "</span></span></span><span class="javascript"> + </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.getAttribute(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'greet-name'</span></span></span><span class="javascript">)); </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(event); } } customElements.define(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'my-webcomp'</span></span></span><span class="javascript">, MyWebComp); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Wenn Sie nun auf die erste klicken, wird "Dies ist die Nachricht für John" und auf der zweiten "Dies ist die Nachricht für Josh" angezeigt. <br><br>  Es kann vorkommen, dass das Attribut nicht in der Ereignisverarbeitung verwendet, sondern direkt in die Vorlage gerendert werden muss. Dazu fügen wir dem Zielelement eine ID hinzu und ersetzen den Wert von api unmittelbar nach dem Rendern einer Kopie des Vorlagenobjekts. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myWebCompTemplate"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"helloLabel"</span></span></span><span class="hljs-tag">&gt;</span></span>Hello<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myWebComp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">greet-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"John"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"this.showMessage(event)"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myWebComp2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">greet-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Josh"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"this.showMessage(event)"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-webcomp</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">MyWebComp</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span></span><span class="javascript">{ connectedCallback() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> html = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.importNode(myWebCompTemplate.content, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.appendChild(html); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.querySelector(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#helloLabel'</span></span></span><span class="javascript">).textContent += </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">' '</span></span></span><span class="javascript"> + </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.getAttribute(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'greet-name'</span></span></span><span class="javascript">); } showMessage(event) { alert(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"This is the message "</span></span></span><span class="javascript"> + </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.getAttribute(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'greet-name'</span></span></span><span class="javascript">)); </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(event); } } customElements.define(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'my-webcomp'</span></span></span><span class="javascript">, MyWebComp); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Es stellt sich so heraus: <br><br><img src="https://habrastorage.org/webt/xs/gr/it/xsgrity3vcy4h9olcpuppvcupl0.png"><br><br>  Anstelle von <b>.textContent</b> kann <b>es</b> sich um <b>.innerHTML handeln,</b> oder Sie können dieselbe <b>.insertAdjacentHTML ()</b> -Methode für das Objekt aus dem Selektor aufrufen, den wir am Anfang verwendet haben. <br><br>  Die Verwendung von IDs galt lange Zeit als schlechte Form, da sie bei erheblichen Codemengen dupliziert werden konnten, was zu Kollisionen führte.  Mit dem Aufkommen der Schattenbaumtechnologie können Sie jedoch den internen Inhalt eines Elements mithilfe von Bezeichnern, Stilen und anderen Ressourcen ohne Angst isolieren.  Für Webkomponenten wird der Schattenbaum wie folgt aktiviert: <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.attachShadow({<span class="hljs-attr"><span class="hljs-attr">mode</span></span>: <span class="hljs-string"><span class="hljs-string">'open'</span></span>});</code> </pre><br>  Die Wahrheit ist nun, dass alle DOM-Aufrufe dazu durch <b>this.shadowRoot</b> ersetzt werden <b>müssen,</b> da es nicht so viele davon gibt. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">MyWebComp</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span></span><span class="javascript">{ connectedCallback() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> html = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.importNode(myWebCompTemplate.content, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.attachShadow({</span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">mode</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'open'</span></span></span><span class="javascript">}); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.shadowRoot.appendChild(html); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.shadowRoot.querySelector(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#helloLabel'</span></span></span><span class="javascript">).textContent += </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">' '</span></span></span><span class="javascript"> + </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.getAttribute(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'greet-name'</span></span></span><span class="javascript">); } showMessage(event) { alert(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"This is the message "</span></span></span><span class="javascript"> + </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.getAttribute(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'greet-name'</span></span></span><span class="javascript">)); </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(event); } } customElements.define(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'my-webcomp'</span></span></span><span class="javascript">, MyWebComp); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Visuell wird sich die Arbeit dieses Codes in keiner Weise erneut ändern, aber jetzt gibt es kein helloLabel im globalen Namespace, und die Seite enthält bereits 2 Elemente mit dieser Kennung.  Und Sie können zum Beispiel so darauf zugreifen: <br><br><pre> <code class="javascript hljs">myWebComp.shadowRoot.getElementById(<span class="hljs-string"><span class="hljs-string">'helloLabel'</span></span>);</code> </pre><br>  und dann, wenn Sie den Baum nicht schließen, indem Sie das entsprechende Attribut in der <b>.attachShadow ()</b> -Methode übergeben. <br><br>  Wir haben ziemlich viel Code und das direkte Platzieren in der HTML-Datei ist auch nicht sehr korrekt.  Daher erstellen wir die <b>Datei my-webcomp.js</b> und übertragen unsere Klasse mit der export-Anweisung <b>dorthin. Fügen</b> Sie den Import dieser Klasse in das Skript-Tag ein, um <b>Folgendes</b> zu erhalten: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { MyWebComp } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"./my-webcomp.js"</span></span></span><span class="javascript">; customElements.define(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'my-webcomp'</span></span></span><span class="javascript">, MyWebComp); myWebComp.shadowRoot.getElementById(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'helloLabel'</span></span></span><span class="javascript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Dies hat keine Auswirkungen auf die Leistung, aber jetzt ist unsere gesamte Geschäftslogik in .js getrennt, die Konfiguration erfolgt in HTML-Attributen und die modularen und Komponentenbrowsersysteme kümmern sich um die modulare asynchrone Initialisierung. <br><br>  Von nun an <b>schlägt das</b> Öffnen von <b>index.html</b> als lokal für die Entwicklung jedoch fehl, da  Der Browser blockiert den Download des Skripts aus dem Dateisystem.  Wenn Sie NodeJS haben, können Sie den einfachsten Webserver verwenden: <br><br><pre> <code class="bash hljs">npm i http-server -g</code> </pre><br>  Führen Sie es mit dem Befehl http-server im Projektverzeichnis aus. Beim Start werden der Host und der Port angegeben, von dem aus Sie die Seite öffnen können <br><br><pre> <code class="bash hljs">http://127.0.0.1:8080</code> </pre><br>  Welches wird nun die Adresse der Debug-Seite mit unserem Element sein. <br><br>  Das Schreiben von Tests ist auch für die Entwicklung wichtig, da sie dazu beitragen, dass der Code während der Entwicklung seiner Komponenten funktionsfähig bleibt.  Zum Testen von Webkomponenten können Sie Mokka im Startmodus über den Browser verwenden. <br><br>  Pakete hinzufügen. <br><br><pre> <code class="bash hljs">npm i mocha chai wct-mocha --save-dev</code> </pre><br>  Erstellen Sie dazu das <b>Testverzeichnis</b> und fügen Sie die <b>folgende</b> Datei <b>all.html hinzu</b> : <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"../node_modules/mocha/mocha.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"../node_modules/chai/chai.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"../node_modules/wct-mocha/wct-mocha.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> WCT.loadSuites([ </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'my-webcomp.tests.html'</span></span></span><span class="actionscript">, ]); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Kopieren Sie unsere <b>index.html</b> , <b>um</b> sie zu <b>testen /</b> mit dem Namen <b>my-webcomp.tests.html zu versehen,</b> und fügen Sie den gleichen <b>Kopfinhalt</b> wie in <b>all.html hinzu</b> . <br><br>  Jetzt müssen wir jedoch die üblichen Initialisierungen und Manipulationen durch die im Rahmen des Testlaufs durchgeführten ersetzen: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { MyWebComp } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"../my-webcomp.js"</span></span></span><span class="javascript">; customElements.define(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'my-webcomp'</span></span></span><span class="javascript">, MyWebComp); suite(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'MyWebComp'</span></span></span><span class="javascript">, () =&gt; { test(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'is MyWebComp'</span></span></span><span class="javascript">, () =&gt; { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> element = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.getElementById(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'myWebComp'</span></span></span><span class="javascript">); chai.assert.instanceOf(element, MyWebComp); }); }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Jetzt beim Betreten <br><br><pre> <code class="bash hljs">http://127.0.0.1:8080/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>/all.html</code> </pre><br>  Ein Testbericht wird angezeigt. <br><br><img src="https://habrastorage.org/webt/_7/ub/ok/_7ubokve7hcudxp_djz5yecpkf8.png"><br><br>  Möglicherweise müssen Sie die Tests jedoch automatisch ausführen und in verschiedenen Browsern ein spezielles Dienstprogramm installieren: <br><br><pre> <code class="bash hljs">sudo npm install --global web-component-tester --unsafe-perm</code> </pre><br>  und lauf so: <br><br><pre> <code class="bash hljs">wct --npm</code> </pre><br>  Diese Zeile kann zum <b>Testabschnitt</b> der Datei <b>package.json hinzugefügt</b> und wie <b>folgt</b> ausgeführt werden: <br><br><pre> <code class="bash hljs">npm <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre><br><img src="https://habrastorage.org/webt/la/_e/rp/la_erpwvp142hir0gnvg21fgchg.png"><br><br>  Es wird empfohlen, jede signifikante Klassenmethode als Teil eines separaten Tests zu testen.  Wenn Sie für jede eine gemeinsame Initialisierung vornehmen möchten, sollten Sie diese in der <b>suiteSetup ()</b> -Methode definieren: <br><br><pre> <code class="javascript hljs">suiteSetup(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { });</code> </pre><br>  in der Suite. <br><br>  Dies ist wahrscheinlich zum ersten Mal genug. Wir haben ein minimales Projekt, bei dem er sich nicht schämen würde, wenn er eine bestimmte Aufgabe lösen würde. <br><br><pre> <code class="bash hljs">npm publish</code> </pre><br>  oder zumindest <br><br><pre> <code class="bash hljs">git push</code> </pre><br>  Es gibt noch nicht so viele Bücher zu diesem Thema, aber die gesamte umfangreiche Dokumentation ist nach Webkomponenten, benutzerdefinierten Elementen, ShadowDOM, nativem Vorlagen-Tag und benutzerdefinierten Ereignissen leicht zu finden. <br><br>  Sie können Ihren Code im Repository überprüfen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://bitbucket.org/techminded/mywebcomp</a> <br><br>  Eine Fortsetzung des Themas, das die Interaktion zwischen Komponenten mithilfe von Ereignissen demonstriert, finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de460397/">https://habr.com/ru/post/de460397/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de460381/index.html">Was ist Durchsetzungsvermögen und warum wird es benötigt?</a></li>
<li><a href="../de460383/index.html">Bildschirmübergänge in Legend of Zelda verwenden die undokumentierten Funktionen von NES</a></li>
<li><a href="../de460387/index.html">SELinux Anfängerleitfaden</a></li>
<li><a href="../de460393/index.html">Hintergrund: Was erwartet Sie von Fedora Silverblue?</a></li>
<li><a href="../de460395/index.html">Analytics als Feature: Der Prozess der Arbeit mit Daten in Plesk</a></li>
<li><a href="../de460399/index.html">SVG-Ladeanzeige auf Vue.js.</a></li>
<li><a href="../de460403/index.html">Vor- und Nachteile von HugePages</a></li>
<li><a href="../de460405/index.html">Warum brauchst du versteckte Spielmechaniken?</a></li>
<li><a href="../de460409/index.html">Arduino und Keyboards (vollständige Anleitung)</a></li>
<li><a href="../de460411/index.html">Mad Converter GIF'ok zu animierten Aufklebern für Telegramm</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>