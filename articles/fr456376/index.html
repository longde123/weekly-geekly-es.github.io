<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öúÔ∏è üîä üèÆ Not One Spring Boot: un aper√ßu des alternatives üóæ üìê ü¶Ö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il n'y a actuellement pas de p√©nurie de frameworks pour cr√©er des microservices en Java et Kotlin. L'article traite des points suivants: 
 Le titre  L...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Not One Spring Boot: un aper√ßu des alternatives</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/456376/"><img src="https://habrastorage.org/webt/al/mw/1g/almw1ghoqrvuf2nbw_awcwqvqe4.png"><br><br>  Il n'y a actuellement pas de p√©nurie de frameworks pour cr√©er des microservices en Java et Kotlin.  L'article traite des points suivants: <br><div class="scrollable-table"><table><tbody><tr><th>  Le titre </th><th>  La version </th><th>  Ann√©e de premi√®re sortie </th><th>  D√©veloppeur </th></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Helidon se</a> </td><td>  1.1.1 </td><td>  2019 </td><td>  Oracle </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ktor</a> </td><td>  1.2.1 </td><td>  2018 </td><td>  Jetbrains </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Micronaut</a> </td><td>  1.1.3 </td><td>  2018 </td><td>  Calcul d'objets </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Botte de printemps</a> </td><td>  2.1.5 </td><td>  2014 </td><td>  Pivotal </td></tr></tbody></table></div><a name="habracut"></a><br>  Sur cette base, quatre services ont √©t√© cr√©√©s qui peuvent interagir les uns avec les autres via l'API HTTP en utilisant le mod√®le de d√©couverte de service impl√©ment√© √† l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Consul</a> .  Ainsi, ils forment une architecture de microservices h√©t√©rog√®ne (au niveau du framework) (ci-apr√®s d√©nomm√©e ISA): <br><br><img src="https://habrastorage.org/webt/tv/mv/kp/tvmvkpurtljgpl3yhxhtpmse4_g.png"><br><br>  D√©finissez un ensemble d'exigences pour chaque service: <br><br><ul><li>  pile technologique: <br><ul><li>  JDK 12; </li><li>  Kotlin </li><li>  Gradle (Kotlin DSL); </li><li>  JUnit√© 5. </li></ul><br></li><li>  fonctionnalit√© (API HTTP): <br><ul><li><code>GET /application-info{?request-to=some-service-name}</code> <br>  Renvoie des informations de base sur le microservice (nom, framework, ann√©e de sortie du framework);  lors de la sp√©cification dans le param√®tre <code>request-to</code> du nom d'un des quatre microservices √† son API HTTP, une requ√™te similaire est ex√©cut√©e qui renvoie des informations de base; </li><li> <code>GET /application-info/logo</code> <br>  Renvoie l'image. </li></ul><br></li><li>  mise en ≈ìuvre: <br><ul><li>  configuration √† l'aide du fichier de configuration; </li><li>  Utilisation de l'injection de d√©pendance </li><li>  des tests qui v√©rifient la fonctionnalit√© de l'API HTTP. </li></ul><br></li><li>  ISA: <br><ul><li>  en utilisant le mod√®le de d√©couverte de service (enregistrement aupr√®s de Consul, acc√®s √† l'API HTTP d'un autre microservice par son nom √† l'aide de l'√©quilibrage de charge du client); </li><li>  formation d'artefact uber-jar. </li></ul><br></li></ul><br>  Ensuite, nous consid√©rons l'impl√©mentation d'un microservice sur chacun des frameworks et comparons les param√®tres des applications re√ßues. <br><br><h1>  Service Helidon </h1><br>  Le cadre de d√©veloppement a √©t√© cr√©√© chez Oracle pour un usage interne, puis est devenu open-source.  Il existe deux mod√®les de d√©veloppement bas√©s sur ce cadre: Standard Edition (SE) et MicroProfile (MP).  Dans les deux cas, le service sera un programme Java SE standard.  En savoir plus sur les diff√©rences sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette</a> page. <br><br>  En bref, Helidon MP est l'une des impl√©mentations Eclipse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MicroProfile</a> , qui permet d'utiliser de nombreuses API, √† la fois connues des d√©veloppeurs Java EE (par exemple, JAX-RS, CDI), et des plus r√©centes (Health Check, Metrics, Fault Tolerance etc.).  Dans la variante Helidon SE, les d√©veloppeurs ont √©t√© guid√©s par le principe ¬´No magic¬ª, qui s'exprime notamment en moins ou pas d'annotations n√©cessaires √† la cr√©ation de l'application. <br><br>  Helidon SE a √©t√© s√©lectionn√© pour le d√©veloppement de microservices.  Entre autres choses, il manque d'outils pour impl√©menter l'injection de d√©pendances, donc <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Koin est</a> utilis√© pour impl√©menter les d√©pendances.  Ce qui suit est une classe contenant la m√©thode principale.  Pour impl√©menter l'injection de d√©pendances, la classe h√©rite de <i>KoinComponent</i> .  Koin d√©marre en premier, puis les d√©pendances requises sont initialis√©es et la m√©thode <code>startServer()</code> est appel√©e, o√π un objet de type <i>WebServer</i> est cr√©√©, vers lequel les param√®tres de configuration et de routage d'application sont pr√©c√©demment transf√©r√©s;  apr√®s le d√©marrage, la demande est enregistr√©e au Consul: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">object</span></span> HelidonServiceApplication : KoinComponent { <span class="hljs-meta"><span class="hljs-meta">@JvmStatic</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Array</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> startTime = System.currentTimeMillis() startKoin { modules(koinModule) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> applicationInfoService: ApplicationInfoService <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> inject() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> consulClient: Consul <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> inject() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> applicationInfoProperties: ApplicationInfoProperties <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> inject() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> serviceName = applicationInfoProperties.name startServer(applicationInfoService, consulClient, serviceName, startTime) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startServer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( applicationInfoService: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ApplicationInfoService</span></span></span></span><span class="hljs-function"><span class="hljs-params">, consulClient: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Consul</span></span></span></span><span class="hljs-function"><span class="hljs-params">, serviceName: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, startTime: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span></span>: WebServer { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> serverConfig = ServerConfiguration.create(Config.create().<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"webserver"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> server: WebServer = WebServer .builder(createRouting(applicationInfoService)) .config(serverConfig) .build() server.start().thenAccept { ws -&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> durationInMillis = System.currentTimeMillis() - startTime log.info(<span class="hljs-string"><span class="hljs-string">"Startup completed in </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$durationInMillis</span></span></span><span class="hljs-string"> ms. Service running at: http://localhost:"</span></span> + ws.port()) <span class="hljs-comment"><span class="hljs-comment">// register in Consul consulClient.agentClient().register(createConsulRegistration(serviceName, ws.port())) } return server }</span></span></code> </pre> <br>  Le routage est configur√© comme suit: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createRouting</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(applicationInfoService: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ApplicationInfoService</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Routing.builder() .register(JacksonSupport.create()) .<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"/application-info"</span></span>, Handler { req, res -&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> requestTo: String? = req.queryParams() .first(<span class="hljs-string"><span class="hljs-string">"request-to"</span></span>) .orElse(<span class="hljs-literal"><span class="hljs-literal">null</span></span>) res .status(Http.ResponseStatus.create(<span class="hljs-number"><span class="hljs-number">200</span></span>)) .send(applicationInfoService.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(requestTo)) }) .<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"/application-info/logo"</span></span>, Handler { req, res -&gt; res.headers().contentType(MediaType.create(<span class="hljs-string"><span class="hljs-string">"image"</span></span>, <span class="hljs-string"><span class="hljs-string">"png"</span></span>)) res .status(Http.ResponseStatus.create(<span class="hljs-number"><span class="hljs-number">200</span></span>)) .send(applicationInfoService.getLogo()) }) .error(Exception::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span></span>{ req, res, ex -&gt; log.error(<span class="hljs-string"><span class="hljs-string">"Exception:"</span></span>, ex) res.status(Http.Status.INTERNAL_SERVER_ERROR_500).send() } .build()</code> </pre> <br>  L'application utilise la configuration au format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><u>HOCON</u></a> : <br><br><pre> <code class="json hljs">webserver { port: <span class="hljs-number"><span class="hljs-number">8081</span></span> } application-info { name: <span class="hljs-string"><span class="hljs-string">"helidon-service"</span></span> framework { name: <span class="hljs-string"><span class="hljs-string">"Helidon SE"</span></span> release-year: <span class="hljs-number"><span class="hljs-number">2019</span></span> } }</code> </pre> <br>  Il est √©galement possible d'utiliser des fichiers aux formats JSON, YAML et propri√©t√©s pour la configuration (plus de d√©tails <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ). <br><br><h1>  Service Ktor </h1><br>  Le cadre est √©crit en Kotlin.  Un nouveau projet peut √™tre cr√©√© de plusieurs mani√®res: en utilisant le syst√®me de construction, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">start.ktor.io</a> ou le plug-in pour IntelliJ IDEA (plus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ). <br><br>  Comme Helidon SE, Ktor n'a pas de DI pr√™t √† l'emploi, donc les d√©pendances sont impl√©ment√©es en utilisant Koin avant de d√©marrer le serveur: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> koinModule = module { single { ApplicationInfoService(<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>()) } single { ApplicationInfoProperties() } single { ServiceClient(<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>()) } single { Consul.builder().withUrl(<span class="hljs-string"><span class="hljs-string">"http://localhost:8500"</span></span>).build() } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Array</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span> { startKoin { modules(koinModule) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> server = embeddedServer(Netty, commandLineEnvironment(args)) server.start(wait = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) }</code> </pre> <br>  Les modules requis par l'application sont sp√©cifi√©s dans le fichier de configuration (seul le format HOCON peut √™tre utilis√©; plus d'informations sur la configuration du serveur Ktor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ), dont le contenu est pr√©sent√© ci-dessous: <br><br><pre> <code class="kotlin hljs">ktor { deployment { host = localhost port = <span class="hljs-number"><span class="hljs-number">8082</span></span> watch = [io.heterogeneousmicroservices.ktorservice] } application { modules = [io.heterogeneousmicroservices.ktorservice.module.KtorServiceApplicationModuleKt.module] } } application-info { name: <span class="hljs-string"><span class="hljs-string">"ktor-service"</span></span> framework { name: <span class="hljs-string"><span class="hljs-string">"Ktor"</span></span> release-year: <span class="hljs-number"><span class="hljs-number">2018</span></span> }</code> </pre> <br>  Ktor et Koin utilisent le terme ¬´module¬ª, qui a des significations diff√©rentes.  Dans Koin, un module est un analogue du contexte d'application dans Spring Framework.  Le module Ktor est une fonction d√©finie par l'utilisateur qui accepte un objet de type <i>Application</i> et peut configurer un pipeline, d√©finir des fonctionnalit√©s, enregistrer des itin√©raires, traiter <br>  demandes, etc .: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> Application.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">module</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> applicationInfoService: ApplicationInfoService <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> inject() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isTest()) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> consulClient: Consul <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> inject() registerInConsul(applicationInfoService.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-literal"><span class="hljs-literal">null</span></span>).name, consulClient) } install(DefaultHeaders) install(Compression) install(CallLogging) install(ContentNegotiation) { jackson {} } routing { route(<span class="hljs-string"><span class="hljs-string">"application-info"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> requestTo: String? = call.parameters[<span class="hljs-string"><span class="hljs-string">"request-to"</span></span>] call.respond(applicationInfoService.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(requestTo)) } static { resource(<span class="hljs-string"><span class="hljs-string">"/logo"</span></span>, <span class="hljs-string"><span class="hljs-string">"logo.png"</span></span>) } } } }</code> </pre> <br>  Dans cet extrait de code, le routage des demandes est configur√©, en particulier, la ressource statique <code>logo.png</code> . <br><br>  Le service Ktor peut contenir des fonctionnalit√©s.  Une fonctionnalit√© est une fonctionnalit√© qui est int√©gr√©e dans un <i>pipeline de</i> demande-r√©ponse ( <i>DefaultHeaders, Compression</i> et autres dans l'exemple de code ci-dessus).  Il est possible d'impl√©menter vos propres fonctionnalit√©s, par exemple, le code ci-dessous impl√©mente le mod√®le de d√©couverte de service en combinaison avec l'√©quilibrage de charge client bas√© sur l'algorithme Round-robin: <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsulFeature</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> consulClient: Consul) { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Config</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> consulClient: Consul } <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> Feature : HttpClientFeature&lt;Config, ConsulFeature&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> serviceInstanceIndex: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> key = AttributeKey&lt;ConsulFeature&gt;(<span class="hljs-string"><span class="hljs-string">"ConsulFeature"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(block: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Config</span></span></span></span><span class="hljs-function"><span class="hljs-params">.()</span></span></span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>) = ConsulFeature(Config().apply(block).consulClient) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">install</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(feature: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ConsulFeature</span></span></span></span><span class="hljs-function"><span class="hljs-params">, scope: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HttpClient</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { scope.requestPipeline.intercept(HttpRequestPipeline.Render) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> serviceName = context.url.host <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> serviceInstances = feature.consulClient.healthClient().getHealthyServiceInstances(serviceName).response <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> selectedInstance = serviceInstances[serviceInstanceIndex] context.url.apply { host = selectedInstance.service.address port = selectedInstance.service.port } serviceInstanceIndex = (serviceInstanceIndex + <span class="hljs-number"><span class="hljs-number">1</span></span>) % serviceInstances.size } } } }</code> </pre> <br>  La logique principale r√©side dans la m√©thode d' <code>install</code> : pendant la phase de demande de <i>rendu</i> (qui s'ex√©cute avant la phase d' <i>envoi</i> ), le nom du service appel√© est d'abord d√©termin√©, puis une liste d'instances de ce service est demand√©e √† <code>consulClient</code> , apr√®s quoi l'instance est d√©termin√©e √† l'aide de l'algorithme Round-robin.  Ainsi, l'appel suivant devient possible: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getApplicationInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(serviceName: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ApplicationInfo = runBlocking { httpClient.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>&lt;ApplicationInfo&gt;(<span class="hljs-string"><span class="hljs-string">"http://</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$serviceName</span></span></span><span class="hljs-string">/application-info"</span></span>) }</code> </pre> <br><br><h1>  Service Micronaut </h1><br>  Micronaut est d√©velopp√© par les cr√©ateurs du framework <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Grails</a> et s'inspire de l'exp√©rience des services de construction utilisant Spring, Spring Boot et Grails.  Le cadre est un polyglotte prenant en charge Java, Kotlin et Groovy;  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">il y</a> aura peut-√™tre un soutien pour Scala.  L'injection de d√©pendances est effectu√©e au stade de la compilation, ce qui r√©duit la consommation de m√©moire et le d√©marrage de l'application plus rapidement que Spring Boot. <br><br>  La classe principale a la forme suivante: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">object</span></span> MicronautServiceApplication { <span class="hljs-meta"><span class="hljs-meta">@JvmStatic</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Array</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span> { Micronaut.build() .packages(<span class="hljs-string"><span class="hljs-string">"io.heterogeneousmicroservices.micronautservice"</span></span>) .mainClass(MicronautServiceApplication.javaClass) .start() } }</code> </pre> <br>  Certains composants d'une application bas√©e sur Micronaut sont similaires √† leurs homologues dans une application Spring Boot, par exemple, le code du contr√¥leur est le suivant: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Controller( value = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/application-info"</span></span></span><span class="hljs-meta">, consumes = [MediaType.APPLICATION_JSON], produces = [MediaType.APPLICATION_JSON] )</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationInfoController</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> applicationInfoService: ApplicationInfoService ) { <span class="hljs-meta"><span class="hljs-meta">@Get</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(requestTo: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: ApplicationInfo = applicationInfoService.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(requestTo) <span class="hljs-meta"><span class="hljs-meta">@Get(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/logo"</span></span></span><span class="hljs-meta">, produces = [MediaType.IMAGE_PNG])</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLogo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: ByteArray = applicationInfoService.getLogo() }</code> </pre> <br>  Le support de Kotlin dans Micronaut est bas√© sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plugin du</a> compilateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">kapt</a> (plus d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">informations</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ).  Le script d'assemblage est configur√© comme suit: <br><br><pre> <code class="kotlin hljs">plugins { ... kotlin(<span class="hljs-string"><span class="hljs-string">"kapt"</span></span>) ... } dependencies { kapt(<span class="hljs-string"><span class="hljs-string">"io.micronaut:micronaut-inject-java"</span></span>) ... kaptTest(<span class="hljs-string"><span class="hljs-string">"io.micronaut:micronaut-inject-java"</span></span>) ... }</code> </pre> <br>  Voici le contenu du fichier de configuration: <br><br><pre> <code class="json hljs">micronaut: application: name: micronaut-service server: port: <span class="hljs-number"><span class="hljs-number">8083</span></span> consul: client: registration: enabled: <span class="hljs-literal"><span class="hljs-literal">true</span></span> application-info: name: ${micronaut.application.name} framework: name: Micronaut release-year: <span class="hljs-number"><span class="hljs-number">2018</span></span></code> </pre> <br>  La configuration du microservice est √©galement possible avec JSON, les propri√©t√©s et les formats de fichier Groovy (plus de d√©tails <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ). <br><br><h1>  Service de d√©marrage de printemps </h1><br>  Le cadre a √©t√© cr√©√© pour simplifier le d√©veloppement d'applications √† l'aide de l'√©cosyst√®me Spring Framework.  Ceci est r√©alis√© gr√¢ce √† des m√©canismes d'autoconfiguration lors de la connexion des biblioth√®ques.  Voici le code du contr√¥leur: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-meta"><span class="hljs-meta">@RequestMapping(path = [</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"application-info"</span></span></span><span class="hljs-meta">], produces = [MediaType.APPLICATION_JSON_UTF8_VALUE])</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationInfoController</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> applicationInfoService: ApplicationInfoService ) { <span class="hljs-meta"><span class="hljs-meta">@GetMapping</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-meta"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">@RequestParam(</span></span></span><span class="hljs-meta-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta"><span class="hljs-meta-string">"request-to"</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">)</span></span></span></span><span class="hljs-function"><span class="hljs-params"> requestTo: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: ApplicationInfo = applicationInfoService.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(requestTo) <span class="hljs-meta"><span class="hljs-meta">@GetMapping(path = [</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/logo"</span></span></span><span class="hljs-meta">], produces = [MediaType.IMAGE_PNG_VALUE])</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLogo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: ByteArray = applicationInfoService.getLogo() }</code> </pre> <br>  Le microservice est configur√© avec un fichier YAML: <br><br><pre> <code class="json hljs">spring: application: name: spring-boot-service server: port: <span class="hljs-number"><span class="hljs-number">8084</span></span> application-info: name: ${spring.application.name} framework: name: Spring Boot release-year: <span class="hljs-number"><span class="hljs-number">2014</span></span></code> </pre> <br>  Il est √©galement possible d'utiliser des fichiers de format de propri√©t√©s pour la configuration (plus de d√©tails <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ). <br><br><h1>  Lancement </h1><br>  Le projet fonctionne sur JDK 12, bien qu'il soit probable sur la version 11 √©galement, il vous suffit de modifier le param√®tre <code>jvmTarget</code> dans les scripts d'assembly en <code>jvmTarget</code> : <br><br><pre> <code class="kotlin hljs">withType&lt;KotlinCompile&gt; { kotlinOptions { jvmTarget = <span class="hljs-string"><span class="hljs-string">"12"</span></span> ... } }</code> </pre> <br>  Avant de d√©marrer les microservices, vous devez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">installer</a> Consul et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©marrer l'</a> agent - par exemple, comme ceci: <code>consul agent -dev</code> . <br><br>  Le d√©marrage des microservices est possible √† partir de: <br><br><ul><li>  IDE <br>  Les utilisateurs d'IntelliJ IDEA peuvent voir quelque chose comme ceci: <br><img src="https://habrastorage.org/webt/n3/u_/hy/n3u_hy7_z5ut65ryaetvsw2znci.png"><br></li><li>  la console <br>  Pour ce faire, acc√©dez au dossier du projet et ex√©cutez s√©quentiellement: <br><br><pre> <code class="plaintext hljs">java -jar helidon-service/build/libs/helidon-service-all.jar java -jar ktor-service/build/libs/ktor-service-all.jar java -jar micronaut-service/build/libs/micronaut-service-all.jar java -jar spring-boot-service/build/libs/spring-boot-service.jar</code> </pre> <br></li></ul><br>  Apr√®s avoir d√©marr√© tous les microservices sur <code>http://localhost:8500/ui/dc1/services</code> vous verrez: <br><br><img src="https://habrastorage.org/webt/qi/lm/bv/qilmbv1op4a6xgy6b31tnsfjpmm.png"><br><br><h1>  Test d'API </h1><br>  Les r√©sultats des tests de l'API du service Helidon sont donn√©s √† titre d'exemple: <br><br><ol><li> <code>GET http://localhost:8081/application-info</code> <br> <br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"helidon-service"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"framework"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Helidon SE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"releaseYear"</span></span>: <span class="hljs-number"><span class="hljs-number">2019</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"requestedService"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }</code> </pre> </li><li> <code>GET http://localhost:8081/application-info?request-to=ktor-service</code> <br> <br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"helidon-service"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"framework"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Helidon SE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"releaseYear"</span></span>: <span class="hljs-number"><span class="hljs-number">2019</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"requestedService"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"ktor-service"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"framework"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Ktor"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"releaseYear"</span></span>: <span class="hljs-number"><span class="hljs-number">2018</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"requestedService"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> } }</code> </pre> </li><li> <code>GET http://localhost:8081/application-info/logo</code> <br> <br>  Renvoie l'image. </li></ol><br>  Vous pouvez tester une API de microservice arbitraire √† l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Postman</a> (une <a href="">collection de</a> demandes), du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.jetbrains.com/help/idea/">client HTTP</a> IntelliJ IDEA (une <a href="https://github.com/rkudryashov/heterogeneous-microservices/blob/master/_misc/api_testing/idea_http_client/http-request.">collection de</a> demandes), d'un navigateur ou d'un autre outil.  Si vous utilisez les deux premiers clients, vous devez sp√©cifier le port du microservice appel√© dans la variable correspondante (dans Postman, il se trouve dans le <i>menu de collecte -&gt; Modifier -&gt; Variables</i> , et dans HTTP Client, il se trouve dans la variable d'environnement sp√©cifi√©e dans <a href="https://github.com/rkudryashov/heterogeneous-microservices/blob/master/_misc/api_testing/idea_http_client/">ce</a> fichier), et lors du test de la m√©thode 2) L'API doit √©galement sp√©cifier le nom du microservice ¬´sous le capot¬ª demand√©.  Les r√©ponses seront similaires √† celles donn√©es ci-dessus. <br><br><h1>  Comparaison des param√®tres d'application </h1><br><br><h3>  Taille d'artefact </h3><br>  Afin de pr√©server la simplicit√© de configuration et d'ex√©cution des applications dans les scripts d'assemblage, aucune d√©pendance transitive n'a √©t√© exclue, de sorte que la taille du service uber-JAR sur Spring Boot d√©passe consid√©rablement la taille des analogues sur d'autres cadres (car lors de l'utilisation de d√©marreurs, non seulement les d√©pendances n√©cessaires sont import√©es; si vous le souhaitez, la taille peut √™tre consid√©rablement r√©duite): <br><div class="scrollable-table"><table><tbody><tr><th>  Microservice </th><th>  Taille de l'artefact, Mo </th></tr><tr><td>  Service Helidon </td><td align="right">  16,6 </td></tr><tr><td>  Service Ktor </td><td align="right">  20,9 </td></tr><tr><td>  Service Micronaut </td><td align="right">  16,5 </td></tr><tr><td>  Service de d√©marrage de printemps </td><td align="right">  42,7 </td></tr></tbody></table></div><br><br><h3>  Heure de lancement </h3><br>  L'heure de lancement de chaque application est incoh√©rente et tombe dans une ¬´fen√™tre¬ª;  le tableau ci-dessous montre l'heure de lancement de l'artefact sans sp√©cifier de param√®tres suppl√©mentaires: <br><div class="scrollable-table"><table><tbody><tr><th>  Microservice </th><th>  Heure de d√©but, secondes </th></tr><tr><td>  Service Helidon </td><td align="right">  2.2 </td></tr><tr><td>  Service Ktor </td><td align="right">  1.4 </td></tr><tr><td>  Service Micronaut </td><td align="right">  4,0 </td></tr><tr><td>  Service de d√©marrage de printemps </td><td align="right">  10.2 </td></tr></tbody></table></div><br>  Il convient de noter que si vous ¬´nettoyez¬ª l'application Spring Boot des d√©pendances inutiles et faites attention √† la configuration de l'application pour qu'elle d√©marre (par exemple, analysez uniquement les packages n√©cessaires et utilisez l'initialisation paresseuse), vous pouvez r√©duire consid√©rablement le temps de d√©marrage. <br><br><h3>  Test de charge </h3><br>  Pour les tests, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Gatling</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un script</a> Scala ont √©t√© utilis√©s.  Le g√©n√©rateur de charge et le service sous test ont √©t√© ex√©cut√©s sur la m√™me machine (Windows 10, processeur quatre c≈ìurs 3,2 GHz, 24 Go de RAM, SSD).  Le port de ce service est indiqu√© dans le script Scala. <br><br>  Pour chaque microservice est d√©termin√©: <br><br><ul><li>  m√©moire de <code>-Xmx</code> minimale ( <code>-Xmx</code> ) requise pour ex√©cuter un microservice fonctionnel (r√©pondant aux demandes) </li><li>  m√©moire de segment minimale requise pour r√©ussir le test de charge 50 utilisateurs * 1 000 requ√™tes </li><li>  m√©moire de segment minimale requise pour r√©ussir le test de charge 500 utilisateurs * 1 000 requ√™tes </li></ul><br>  La r√©ussite d'un test de charge signifie que le microservice a r√©pondu √† toutes les demandes √† tout moment. <br><div class="scrollable-table"><table><tbody><tr><th rowspan="2">  Microservice </th><th colspan="3">  La quantit√© minimale de m√©moire de tas, Mo </th></tr><tr><th>  Pour d√©marrer le service </th><th>  Pour charge 50 * 1000 </th><th>  Pour charge 500 * 1000 </th></tr><tr><td>  Service Helidon </td><td align="right">  9 </td><td align="right">  9 </td><td align="right">  11 </td></tr><tr><td>  Service Ktor </td><td align="right">  11 </td><td align="right">  11 </td><td align="right">  13 </td></tr><tr><td>  Service Micronaut </td><td align="right">  13 </td><td align="right">  13 </td><td align="right">  17 </td></tr><tr><td>  Service de d√©marrage de printemps </td><td align="right">  22 </td><td align="right">  23 </td><td align="right">  25 </td></tr></tbody></table></div><br>  Il convient de noter que tous les microservices utilisent le serveur HTTP Netty. <br><br><h1>  Conclusion </h1><br>  La t√¢che - la cr√©ation d'un service simple avec l'API HTTP et la possibilit√© de fonctionner dans l'ISA - a pu √™tre r√©alis√©e sur tous les frameworks en question.  Il est temps de faire le point et de consid√©rer leurs avantages et leurs inconv√©nients. <br><br>  <i><b>H√©lidon</b></i> <br><br>  <font color="#808080">√âdition standard</font> <br><ul><li>  avantages <br><ul><li>  param√®tres d'application <br>  A tous √©gards, a montr√© de bons r√©sultats; </li><li>  "Pas de magie" <br>  Le framework a justifi√© le principe √©nonc√© par les d√©veloppeurs: il n'a fallu qu'une seule annotation pour cr√©er l'application ( <code>@JvmStatic</code> - pour l' <code>@JvmStatic</code> Java-Kotlin). </li></ul></li><li>  contre <br><ul><li>  microframework <br>  Certains composants n√©cessaires au d√©veloppement industriel font d√©faut, par exemple, l'injection de d√©pendances et l'impl√©mentation de Service Discovery. </li></ul></li></ul><br>  <font color="#808080">Microprofile</font> <br>  Le microservice n'a pas √©t√© impl√©ment√© sur ce framework, donc je ne noterai que quelques points que je connais: <br><br><ul><li>  avantages <br><ul><li>  Impl√©mentation d'Eclipse MicroProfile <br>  Essentiellement, MicroProfile est optimis√© pour Java EE pour ISA.  Ainsi, d'une part, vous avez acc√®s √† toute la vari√©t√© des API Java EE, y compris celles con√ßues sp√©cifiquement pour l'ISA, et d'autre part, vous pouvez changer l'impl√©mentation de MicroProfile pour n'importe quelle autre (Open Liberty, WildFly Swarm, etc.) . </li></ul></li><li>  en plus <br><ul><li>  sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MicroProfile Starter,</a> vous pouvez cr√©er un projet √† partir de z√©ro avec les param√®tres n√©cessaires par analogie avec des outils similaires pour d'autres frameworks (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spring Initializr</a> ).  Au moment de la publication de l'article, Helidon impl√©mente MicroProfile 1.2, tandis que la derni√®re version de la sp√©cification est 3.0. </li></ul></li></ul><br><br>  <i><b>Ktor</b></i> <br><br><ul><li>  avantages <br><ul><li>  l√©g√®ret√© <br>  Vous permet de connecter uniquement les fonctions directement n√©cessaires pour terminer la t√¢che; </li><li>  param√®tres d'application <br>  De bons r√©sultats √† tous √©gards. </li></ul></li><li>  contre <br><ul><li>  ¬´Sharpened¬ª sous Kotlin, c'est-√†-dire qu'il est possible, mais pas n√©cessaire, de d√©velopper en Java; </li><li>  microframework (voir article similaire pour Helidon SE). </li></ul></li><li>  en plus <br>  D'une part, le concept de d√©veloppement de framework n'est pas inclus dans les deux mod√®les de d√©veloppement Java les plus populaires (Spring-like (Spring Boot / Micronaut) et Java EE / MicroProfile), ce qui peut conduire √†: <br><br><ul><li>  un probl√®me pour trouver des sp√©cialistes; </li><li>  temps plus long pour terminer les t√¢ches par rapport √† Spring Boot en raison de la n√©cessit√© de configurer explicitement les fonctionnalit√©s requises. </li></ul><br>  D'un autre c√¥t√©, la dissemblance avec le ¬´classique¬ª Spring et Java EE vous permet de regarder le processus de d√©veloppement sous un angle diff√©rent, peut-√™tre plus consciemment. </li></ul><br><br>  <i><b>Micronaut</b></i> <br><br><ul><li>  avantages <br><ul><li>  Aot <br>  Comme indiqu√© pr√©c√©demment, AOT vous permet de r√©duire l'heure de d√©marrage et la m√©moire consomm√©e par l'application par rapport √† son homologue sur Spring Boot; </li><li>  Mod√®le de d√©veloppement de type printanier <br>  Les programmeurs ayant une exp√©rience de d√©veloppement sur Spring ne prendront pas beaucoup de temps pour ma√Ætriser ce cadre; </li><li>  param√®tres d'application <br>  De bons r√©sultats √† tous √©gards; </li><li>  polyglotte <br>  Support citoyen de premi√®re classe pour Java, Kotlin, Groovy;  il y aura peut-√™tre un soutien pour Scala.  √Ä mon avis, cela peut avoir une incidence positive sur la croissance communautaire.  Soit dit en passant, en juin 2019, Groovy dans le classement de la popularit√© des langages de programmation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TIOBE</a> prend la 14e place, d√©collant de la 60e ann√©e plus t√¥t, se trouvant ainsi √† une honorable deuxi√®me place parmi les langages JVM; </li><li>  Le projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Micronaut for Spring</a> vous permet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©galement</a> de modifier le temps d'ex√©cution de votre application Spring Boot existante en Micronaut (avec restrictions). </li></ul></li></ul><br><br>  <i><b>Botte de printemps</b></i> <br><br><ul><li>  avantages <br><ul><li>  maturit√© et √©cosyst√®me de la plateforme <br>  Le cadre ¬´tous les jours¬ª.  Pour la plupart des t√¢ches quotidiennes, il existe d√©j√† une solution dans le paradigme de programmation Spring, c'est-√†-dire d'une mani√®re famili√®re √† de nombreux programmeurs.  Le d√©veloppement est simplifi√© par les concepts de d√©marreurs et de configurations automatiques; </li><li>  un grand nombre de sp√©cialistes du march√© du travail, ainsi qu'une base de connaissances importante (y compris la documentation et les r√©ponses √† Stack Overflow); </li><li>  perspective <br>  Je pense que beaucoup conviendront que dans un proche avenir, le printemps restera le principal cadre de d√©veloppement. </li></ul></li><li>  contre <br><ul><li>  param√®tres d'application <br>  L'application sur ce framework ne faisait pas partie des leaders, cependant, certains param√®tres, comme indiqu√© pr√©c√©demment, peuvent √™tre optimis√©s ind√©pendamment.  Il convient √©galement de rappeler la pr√©sence du projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spring Fu</a> , en cours de d√©veloppement actif, dont l'utilisation permet de r√©duire ces param√®tres. </li></ul></li></ul><br>  Vous pouvez √©galement mettre en √©vidence les probl√®mes g√©n√©raux associ√©s aux nouveaux cadres qui manquent √† Spring Boot: <br><br><ul><li>  √©cosyst√®me moins d√©velopp√©; </li><li>  un petit nombre de sp√©cialistes ayant une exp√©rience de ces technologies; </li><li>  plus de temps pour terminer les t√¢ches; </li><li>  perspectives obscures. </li></ul><br>  Les frameworks consid√©r√©s appartiennent √† diff√©rentes cat√©gories de poids: Helidon SE et Ktor sont des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">microframes</a> , Spring Boot est un framework full-stack, Micronaut est plus probable aussi full-stack;  une autre cat√©gorie est MicroProfile (par exemple Helidon MP).  Dans les microframes, la fonctionnalit√© est limit√©e, ce qui peut ralentir l'ex√©cution des t√¢ches;  Pour clarifier la possibilit√© d'impl√©menter telle ou telle fonctionnalit√© sur la base de tout framework de d√©veloppement, je vous recommande de vous familiariser avec sa documentation. <br><br>  Je n'ose pas juger si tel ou tel cadre va "tirer" dans un avenir proche, donc, √† mon avis, il est pr√©f√©rable de continuer √† surveiller le d√©veloppement des √©v√©nements en utilisant le cadre de d√©veloppement existant pour r√©soudre les t√¢ches de travail. <br><br>  Dans le m√™me temps, comme cela a √©t√© montr√© dans l'article, les nouveaux frameworks surpassent Spring Boot par les param√®tres consid√©r√©s des applications re√ßues.  Si l'un de ces param√®tres est critique pour l'un de vos microservices, vous devrez peut-√™tre faire attention aux cadres qui ont donn√© les meilleurs r√©sultats.  Cependant, n'oubliez pas que Spring Boot, d'une part, continue de s'am√©liorer, et d'autre part, il a un √©cosyst√®me √©norme et un nombre important de programmeurs Java le connaissent.  Il existe d'autres cadres qui ne sont pas trait√©s dans cet article: Javalin, Quarkus, etc. <br><br>  Vous pouvez afficher le code du projet sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> .  Merci de votre attention! <br><br>  PS: Merci √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">artglorin</a> pour sa contribution √† cet article. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456376/">https://habr.com/ru/post/fr456376/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456366/index.html">Comment j'ai con√ßu la LED HEART Box</a></li>
<li><a href="../fr456368/index.html">Effectuer des transactions publiques et priv√©es sur la blockchain JPMorgan Quorum √† l'aide de Web3</a></li>
<li><a href="../fr456370/index.html">Impl√©menter la QoS dans le stockage Qsan</a></li>
<li><a href="../fr456372/index.html">SimbirSoft invite les professionnels de l'informatique √† un √©t√© intensif 2019</a></li>
<li><a href="../fr456374/index.html">Structures de donn√©es d'√©tat de la cha√Æne de blocs Plasma Cash</a></li>
<li><a href="../fr456380/index.html">Journ√©e portes ouvertes de la Facult√© de Programmation en Netologie</a></li>
<li><a href="../fr456384/index.html">PVS-Studio Graphique de d√©veloppement des capacit√©s de diagnostic</a></li>
<li><a href="../fr456386/index.html">Biblioth√®ques ouvertes pour la visualisation du contenu audio</a></li>
<li><a href="../fr456388/index.html">Tableau de d√©veloppement de diagnostic dans PVS-Studio</a></li>
<li><a href="../fr456392/index.html">Parsim 25 To avec AWK et R</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>