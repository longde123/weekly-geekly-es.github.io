<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥈 🎥 👍🏾 برمجة PHP الموجهة 👨🏿‍🌾 😻 🚠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="مرحبا بالجميع! 

 أكملنا هذا الشهر المجموعة الأولى من دورة Backend PHP Developer ونقوم بتوظيفهم بقوة وأهم (قدر الإمكان خلال العطلات). تم تجديد الدورة ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>برمجة PHP الموجهة</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/415713/" style=";text-align:right;direction:rtl">  مرحبا بالجميع! <br><br>  أكملنا هذا الشهر المجموعة الأولى من <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">دورة Backend PHP Developer</a> ونقوم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">بتوظيفهم</a> بقوة وأهم (قدر الإمكان خلال العطلات).  تم تجديد الدورة مع مدرس آخر - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Evgeny Volosatov</a> ، والذي يعرفه الكثيرون على الأرجح.  حسنًا ، نحن نشارك الأشياء الشيقة بشكل تقليدي. <br><br>  دعنا نذهب. <br><br>  في أي تطبيق ، هناك أجزاء من الرمز "تعبر" عدة أجزاء من الهندسة المعمارية في نفس الوقت. <br><br>  هذه المشكلة ليست واضحة عند العمل مع إطار عمل كامل.  على الأرجح ستنتشر مشكلتك على نطاق واسع ، وستكون هناك فرصة بأن الإطار قد حلها بالفعل من خلال التضحية بتقسيم المسؤولية أو من خلال تقديم فكرة تجريدية أعلى الإطار.  تستخدم العديد من الأطر بنية موجهة نحو الحدث لحل مشاكل الأداء من البداية إلى النهاية.  ولكن تأتي دائمًا لحظة لا يستطيع فيها الإطار توفير المستوى المطلوب من التحكم في جزء معين من المنطق.  وينطبق ذلك بشكل خاص عند استخدام الإطارات الدقيقة أو التطوير مع مكتبات متخصصة.  كلما أخذ تطبيقك في الاعتبار مبادئ الفصل بين المسؤوليات ، كلما كان دور الوظيفة من البداية إلى النهاية في بنيتك أكبر. <br><br><img src="https://habrastorage.org/webt/hg/2m/2n/hg2m2nmlz9m4ztlew8ezhfaz30o.png"><a name="habracut"></a><br><br><h2 style=";text-align:right;direction:rtl">  برمجة PHP الموجهة </h2><br>  البرمجة الموجهة نحو الجانب (AOP) هي نموذج برمجي يركز على تنظيم وتنسيق الوظائف من طرف إلى طرف.  حالات التطبيق - قوائم ACL ، وتسجيل الدخول ، ومعالجة الأخطاء ، والتخزين المؤقت. <br><br>  الافتراضات (الداخلية) المضمنة في PHP (عندما تحدد وظيفة / ثابت / فئة ، تظل محددة إلى الأبد) تجعل من الصعب تنفيذ نموذج AOP. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Li3</a> كان أول من قام بحل مشكلة الوظيفة من طرف إلى طرف باستخدام آلية تصفية تسمح بترشيح منطق الطريقة من خلال عمليات الإغلاق.  لجعل الطريقة قابلة للفلترة ، يتطلب تنفيذ Li3 الإضافة اليدوية لرمز القالب.  مع هذه القيود ، تقتصر تقنيات AOP على تقنيات التصفية. <br><br>  تطبيقات AOP الأخرى المعروفة في PHP: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">AOP</a> (امتداد PECL) </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">انطلق!</a> </li></ul><br>  يعد امتداد PECL AOP مثيرًا للاهتمام ولكنه في الوقت نفسه نهج محفوف بالمخاطر ، لأن دعم ملحقات PECL ليس شائعًا.  خيار آخر هو Go! Libraries ، وهي عبارة عن تطبيق AOP يقوم بإصلاح كود PHP بسرعة ، مما يجعل من الممكن استخدام طرق AOP. <br><br>  هناك تطبيقات أخرى ، ولكن معظمها مبني على أساس الوكلاء (على حد علمي) ، وهذا النهج له العديد من القيود. <br><br><h2 style=";text-align:right;direction:rtl">  شخص جديد في المنطقة </h2><br>  تم إنشاء رمز تلقائي منذ فترة طويلة في PHP ويستخدم في العديد من المكتبات ، على سبيل المثال <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ProxyManager.</a>  وبفضل اعتماد الملحن ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">اذهب!</a>  يظهر أن تعديل التعليمات البرمجية على الطاير ممكن. <br><br>  إذا كان لا يزال من الممكن اعتبار إنشاء الشفرة بسيطًا ، فإن تصحيح الرمز أكثر تعقيدًا إلى حد ما.  أولاً ، في PHP لا يوجد محلل تعليمات برمجية مدمج ، وثانيًا ، هناك عدد قليل جدًا من المكتبات التي تحل مشاكل تحليل كود PHP.  الأكثر شهرة هي مكتبة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PHP-Parser</a> .  PHP-Parser هي أداة رائعة ، ولكنها حتى تتجاهل تنسيق المسافات في أشجار الجملة المجردة.  مما يجعل من الصعب إصلاح الرمز.  في الواقع ، الكود الذي يجب إصلاحه هو كود حقيقي قابل للتنفيذ.  لذلك ، إذا كنت تريد أن يكون التراجع دقيقًا مع وجود أخطاء ، فيجب مراعاة أرقام الأسطر في الملف الذي تم تصحيحه. <br><br>  لهذه المهمة ، نستخدم أداة تصحيح كود <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Kahlan</a> JIT.  Kahlan هو إطار عمل اختبار الوحدة الجديدة و BDD ، وذلك بفضل تقنيات تحرير JIT التي تسمح برمز تصحيح كعب وقرد مباشرة في Ruby أو JavaScript.  تحت الغطاء ، نجد أن هذه المكتبة تعتمد على محلل PHP البدائي.  ولكن ، مع ذلك ، فهي سريعة بما فيه الكفاية ومستقرة لتناسبنا. <br><br>  مكتبة التصفية متاحة على <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/crysalead/filter</a> ويمكن استخدامها على النحو التالي. <br><br>  أولاً ، يجب تهيئة أداة تصحيح رمز JIT في أقرب وقت ممكن (على سبيل المثال ، مباشرة بعد تشغيل الملحن التلقائي): <br><br><pre style=";text-align:right;direction:rtl"><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../vendor/autoload.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Lead</span></span>\<span class="hljs-title"><span class="hljs-title">Filter</span></span>\<span class="hljs-title"><span class="hljs-title">Filters</span></span>; Filters::patch(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>);</code> </pre> <br>  لاحظ أن تحرير الكود ممكن فقط للفصول التي تم تحميلها بواسطة الملحن التلقائي.  إذا تمت إضافة فئة باستخدام التعبيرات المطلوبة أو المتضمنة ، فسيتم تحميلها بالفعل قبل استدعاء Filters :: patch (true) ، وبالتالي لن يتم إصلاحها. <br><br>  بشكل افتراضي ، سيتم تخزين جميع التعليمات البرمجية التي تم تصحيحها في / tmp / jit ، ولكن يمكنك دائمًا تغييرها إلى رمزك الخاص: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">Filters::patch(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, [<span class="hljs-string"><span class="hljs-string">'cachePath'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'my/cache/path/jit'</span></span>]);</code> </pre> <br>  ستتم استعادة الملفات المخزنة مؤقتًا تلقائيًا في كل مرة تقوم فيها بتغيير ملف PHP. <br><br>  إنتباه!  <code>Filters::patch(true)</code> هي أسهل طريقة لتهيئة أداة <code>Filters::patch(true)</code> ، ضع في اعتبارك أنه سيتم إصلاح جميع التعليمات البرمجية الخاصة بك.  قد يستغرق الأمر وقتًا طويلاً لف جميع الطرق الموجودة في التعليمات البرمجية الأساسية في إغلاق عامل التصفية. <br><br>  لحسن الحظ ، إذا لعبت الوظيفة من البداية إلى النهاية دورًا حاسمًا في التعليمات البرمجية جيدة التصميم ، فستحتاج إلى طريقتين فقط في المشروع.  لذلك ، فإن الأسلوب المفضل هو إصلاح تلك الأساليب التي سيتم تصفيتها فقط: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">Filters::patch([ <span class="hljs-string"><span class="hljs-string">'A\ClassName'</span></span>, <span class="hljs-string"><span class="hljs-string">'An\Example\ClassName::foo'</span></span>, <span class="hljs-string"><span class="hljs-string">'A\Second\Example\ClassName'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'foo'</span></span>, <span class="hljs-string"><span class="hljs-string">'bar'</span></span>], ], [ <span class="hljs-string"><span class="hljs-string">'cachePath'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'my/cache/path/jit'</span></span>, ]);</code> </pre> <br>  وبالتالي ، يمكنك اختيار إصلاح جميع طرق فئة معينة ، أو طريقة واحدة فقط أو عدة طرق. <br><br><h2 style=";text-align:right;direction:rtl">  مرشح API </h2><br>  الآن بعد أن تم تمكين JIT patcher ، قم بإنشاء عامل تصفية السجل: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Chaos</span></span>\<span class="hljs-title"><span class="hljs-title">Filter</span></span>\<span class="hljs-title"><span class="hljs-title">Filters</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Chaos</span></span>\<span class="hljs-title"><span class="hljs-title">Database</span></span>\<span class="hljs-title"><span class="hljs-title">Database</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Monolog</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Monolog</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">StreamHandler</span></span>; $logger = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Logger(<span class="hljs-string"><span class="hljs-string">'database'</span></span>); $logger-&gt;pushHandler(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamHandler(<span class="hljs-string"><span class="hljs-string">'my/log/path/db.log'</span></span>, Logger::WARNING)); Filters::apply(Database::class, <span class="hljs-string"><span class="hljs-string">'query'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($next, $sql, $data, $options)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($logger)</span></span></span><span class="hljs-function"> </span></span>{ $logger-&gt;info(<span class="hljs-string"><span class="hljs-string">'Ran SQL query: '</span></span> . $sql); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $next($sql, $data, $options); });</code> </pre><br>  ينشئ المثال أعلاه عامل تصفية سجل استعلام SQL لمكتبة قاعدة بيانات Chaos.  يمكن العثور على مزيد من المعلومات حول مرشح API على <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/crysalead/filter</a> . <br><br><h2 style=";text-align:right;direction:rtl">  الخلاصة </h2><br>  AOP ، في رأيي ، هو الجواب الحقيقي للوظيفة من طرف إلى طرف.  جميع التجريدات الأخرى زائدة عن الحاجة ، وفي معظم الحالات تقتصر على إطار معين.  لا أفقد الأمل في أن توفر PHP يومًا ما واجهة برمجة تطبيقات مضمنة للبرمجة ذات المنحى الجانبي.  ولكن الآن ، أعتقد أن تصحيح رمز JIT هو الخيار الأفضل ، حيث تفوق المزايا بكثير حمل وحدة المعالجة المركزية ، والذي يمكن إهماله عمليًا عندما لا يتم تطبيق تصحيح رمز JIT على مستوى العالم. <br><br>  النهاية <br><br>  كما هو الحال دائمًا ، نتوقع ، إذا كان هناك أي شيء ، أسئلة ورغبة وندعوك إلى <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">درس مفتوح</a> حيث يمكنك الاستماع إلى محاضرة مثيرة للاهتمام والتعرف على <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المعلم</a> الجديد بشكل أفضل. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar415713/">https://habr.com/ru/post/ar415713/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar415699/index.html">ثلاث قصص تسجيل ويندوز قصيرة</a></li>
<li><a href="../ar415701/index.html">أعلى 10: أفضل أوراق جوكر 2017</a></li>
<li><a href="../ar415705/index.html">اخترق المخترقون مستودعات Gentoo Linux على GitHub</a></li>
<li><a href="../ar415707/index.html">ريتشارد هامينج: الفصل 18. النمذجة - أنا</a></li>
<li><a href="../ar415709/index.html">7 خطايا صاحب المنتج</a></li>
<li><a href="../ar415715/index.html">قصة الانهيار والإنقاذ المعجزة للقالب في KOMPAS-3D</a></li>
<li><a href="../ar415717/index.html">هل يمكنني صنع بندقية خفيفة لشاشة LCD؟ يقوم Kickstarter بجمع الأموال بالفعل</a></li>
<li><a href="../ar415721/index.html">لماذا يحتاج المعالج الرئيسي إلى ذاكرة عالية؟ اختبار مجموعة HyperX Fury DDR4-3466</a></li>
<li><a href="../ar415723/index.html">من المصممين إلى قسم ضمان الجودة ، أم أن هناك حياة بعد المصنع</a></li>
<li><a href="../ar415725/index.html">نظف العمارة السريعة كبديل لـ VIPER</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>