<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤦🏿 👨🏿 🐖 Schöne Komponentenstruktur in der Microsoft Azure Cloud 👨🏿‍🤝‍👨🏻 ⏩ 🖕🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Microsoft Azure ist eine der größten Cloud-Plattformen der Welt. Trotz meiner mangelnden Sympathie für das Unternehmen, das es geschaffen hat, muss ic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schöne Komponentenstruktur in der Microsoft Azure Cloud</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422211/"> Microsoft Azure ist eine der größten Cloud-Plattformen der Welt.  Trotz meiner mangelnden Sympathie für das Unternehmen, das es geschaffen hat, muss ich zugeben, dass die Plattform im Vergleich zu ihren Konkurrenten eine Reihe von Annehmlichkeiten bietet.  Aber es gibt kein Fass Honig ohne eine Fliege in der Salbe, und dieser Löffel in Microsoft Azure ist der Name der Systemkomponenten.  Wenn das Umbenennen einer Komponente in AWS nur mit zwei Klicks erfolgt, sind Namen in Azure eng an Komponenten gebunden, und es ist manchmal unmöglich, sie zu ändern, ohne mit einem Tamburin zu tanzen.  Daher ist es bei der Arbeit mit Azure sehr wichtig, zunächst die richtige Struktur zu erstellen. <br><br><img src="https://habrastorage.org/webt/z4/vq/s_/z4vqs_yvjajdgawbz1vlyu2wyyy.png" alt="Bild"><br><a name="habracut"></a><br>  Versuchen wir also in Microsoft Azure, eine virtuelle Maschine mit dem Nameserver-01 und den Standardeinstellungen zu erstellen.  Die folgende Abbildung zeigt deutlich das Durcheinander, das wir am Ende haben. <br><br><img src="https://habrastorage.org/webt/1o/ey/ne/1oeynexzzy9v_u33ghyjqd2gt0c.png" alt="Bild"><br><br>  Wenn Ihnen hier alles passt, können Sie nicht weiter lesen.  Wenn Sie wie ich die Gesamtreihenfolge in der Verwaltung mögen, riskiere ich, ein schönes Namensschema für Microsoft Azure-Komponenten vorzuschlagen, das ich seit einigen Jahren verwende. <br><br>  Mit diesem Schema können Sie das gesamte System in die folgende einheitliche Form bringen: <br>  <b>{Komponentengruppe} __ {Element}</b> <br>  <b>{Komponente} - {Nummer} __ {Element} - {Nummer}</b> <br><br>  Also, fangen wir an ... <br><br>  <b>Fügen Sie eine Ressourcengruppe hinzu</b> <br><br><pre><code class="hljs pgsql">Resource <span class="hljs-keyword"><span class="hljs-keyword">groups</span></span> &gt;&gt; +<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> Resource <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span>: servers</code> </pre> <br>  <b>Erstellen Sie ein virtuelles Netzwerk und ein Subnetz</b> <br><br>  Standardmäßig erweitert Microsoft Azure das Subnetz über das gesamte virtuelle Netzwerk.  Dies ist nicht sehr praktisch, da es bei Bedarf sehr schwierig sein wird, neue Subnetze hinzuzufügen (z. B. ein VPN-Subnetz).  Daher gebe ich normalerweise die letzten beiden Oktette (Maske 16) für das virtuelle Netzwerk und für das Subnetz - das letzte Oktett (Maske 24). <br><br><pre> <code class="hljs delphi"><span class="hljs-keyword"><span class="hljs-keyword">Virtual</span></span> networks &gt;&gt; +Add <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: servers__network Address space: <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> Subnet: <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Address range: <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> Network interfaces: +Add <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: server-<span class="hljs-number"><span class="hljs-number">01</span></span>__ip-<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>-<span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Virtual</span></span> network: servers__network Subnet: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Private</span></span> IP address: <span class="hljs-keyword"><span class="hljs-keyword">Static</span></span>/<span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.101</span></span></code> </pre> <br>  Die ersten Adressen des Subnetzes (10.0.0.01 ... 03) werden von Azure verwendet, um den Anforderungen zu entsprechen. Daher habe ich die Arbeitsadressen in einen Bereich über 100 verschoben. Daher entspricht die Servernummer der letzten Ziffer der IP-Adresse: server-01 = 10.0.0.101, Server-02 = 10.0.0.102, Server-43 = 10.0.0.143 usw. <br><br>  <b>Externe Adresse und Sicherheitsgruppe</b> <br><br>  Wenn geplant ist, dass die virtuelle Maschine nach außen schaut, erstellen Sie eine öffentliche Adresse und eine Sicherheitsgruppe. <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">Public</span></span> IP addresses: +<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__ip-<span class="hljs-built_in"><span class="hljs-built_in">public</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> IP address assignment: Static <span class="hljs-built_in"><span class="hljs-built_in">Public</span></span> IP addresses &gt;&gt;  <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__ip-<span class="hljs-built_in"><span class="hljs-built_in">public</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> &gt;&gt; Associate: Resource <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> &gt;&gt; Network interface: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__ip-private<span class="hljs-number"><span class="hljs-number">-01</span></span></code> </pre> <br>  In Azure kann eine Sicherheitsgruppe sowohl für einen einzelnen Computer als auch für das gesamte Subnetz erstellt werden.  Je nach Variante variieren die Namen. <br><br><pre> <code class="hljs pgsql">Network <span class="hljs-keyword"><span class="hljs-keyword">security</span></span> <span class="hljs-keyword"><span class="hljs-keyword">groups</span></span> &gt;&gt; +<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span></code> </pre> <br>  Sicherheitsgruppenoption für einen einzelnen Host: <br><br><pre> <code class="hljs powershell"> Name: server<span class="hljs-literal"><span class="hljs-literal">-01__security</span></span><span class="hljs-literal"><span class="hljs-literal">-group</span></span> Network interfaces &gt;&gt; +Associate: server<span class="hljs-literal"><span class="hljs-literal">-01__ip</span></span><span class="hljs-literal"><span class="hljs-literal">-private</span></span><span class="hljs-literal"><span class="hljs-literal">-01</span></span></code> </pre> <br>  Sicherheitsgruppe für Subnetz: <br><br><pre> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">Name</span></span>: servers__network-<span class="hljs-keyword"><span class="hljs-keyword">security</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> Subnets &gt;&gt; +Associate: Virtual network: servers__network Subnet: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span></code> </pre> <br>  <b>Fahren</b> <br><br>  Leider können Sie in Azure keine Festplatten mit beliebigen Namen erstellen. Daher müssen Sie hier eine Problemumgehung durch die Erstellung einer fiktiven virtuellen Maschine durchführen und diese dann als Leerzeichen verwenden, um eine funktionierende Maschine zu erstellen. <br><br>  <b>Erstellen Sie eine virtuelle Dummy-Maschine</b> <br><br><pre> <code class="hljs pgsql">Virtual machines &gt;&gt; +<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> Basics: <span class="hljs-type"><span class="hljs-type">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>-raw VM disk <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: Premium SSD Username: your-<span class="hljs-type"><span class="hljs-type">name</span></span> SSH <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> key: your-<span class="hljs-built_in"><span class="hljs-built_in">public</span></span>-key Settings: Availability <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> Network: servers__network Subnet: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Public</span></span> IP address: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> inbound ports: <span class="hljs-keyword"><span class="hljs-keyword">No</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> inbound ports Monitoring: Disabled</code> </pre> <br>  Nach dem Erstellen einer Dummy-Maschine können Sie alle Komponenten (einschließlich der Maschine selbst) entfernen, die mit dem Suffix raw gekennzeichnet sind, mit Ausnahme der Festplatte. <br><br>  <b>Wir entfernen einen Schnappschuss einer Festplatte</b> <br><br><pre> <code class="hljs powershell">Disks &gt;&gt;  disk server<span class="hljs-literal"><span class="hljs-literal">-01</span></span><span class="hljs-literal"><span class="hljs-literal">-raw_OsDisk_</span></span>... &gt;&gt; +Create snapshot Name: server<span class="hljs-literal"><span class="hljs-literal">-01</span></span><span class="hljs-literal"><span class="hljs-literal">-raw</span></span><span class="hljs-literal"><span class="hljs-literal">-snapshot</span></span></code> </pre> <br>  Erstellen Sie basierend auf dem Snapshot eine neue Arbeitsplatte: <br><br><pre> <code class="hljs pgsql">Disks &gt;&gt; +<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__disk<span class="hljs-number"><span class="hljs-number">-01</span></span> Source <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Snapshot</span></span> Source <span class="hljs-keyword"><span class="hljs-keyword">snapshot</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>-raw-<span class="hljs-keyword"><span class="hljs-keyword">snapshot</span></span></code> </pre> <br>  <b>Wir stellen die Arbeitsmaschine auf der Basis einer neuen Festplatte bereit</b> <br><br><pre> <code class="hljs pgsql">Disks &gt;&gt;  <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__disk<span class="hljs-number"><span class="hljs-number">-01</span></span> &gt;&gt; + <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> VM Basics: <span class="hljs-type"><span class="hljs-type">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> Settings: Availability <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> Network: servers__network Subnet: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Public</span></span> IP address: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> inbound ports: <span class="hljs-keyword"><span class="hljs-keyword">No</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> inbound ports Monitoring: Disabled</code> </pre> <br>  <b>Netzwerkschnittstellen</b> <br><br>  Eine weitere Auslassung von Microsoft: Wenn Sie eine virtuelle Maschine von einer Festplatte in der GUI erstellen, können Sie die zuvor erstellte Netzwerkschnittstelle nicht daran anhängen.  Daher stoppen wir den Computer, löschen die Netzwerkschnittstelle und hängen die oben erstellte an. <br><br><pre> <code class="hljs vbscript">Virtual machines &gt;&gt;  VM <span class="hljs-built_in"><span class="hljs-built_in">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> &gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">Stop</span></span> Virtual machines &gt;&gt;  VM <span class="hljs-built_in"><span class="hljs-built_in">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> &gt;&gt; Networking: Attach network interface &gt;&gt; <span class="hljs-built_in"><span class="hljs-built_in">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__ip-<span class="hljs-keyword"><span class="hljs-keyword">private</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> Detach network interface &gt;&gt; <span class="hljs-built_in"><span class="hljs-built_in">server</span></span><span class="hljs-number"><span class="hljs-number">-01982</span></span></code> </pre> <br>  <b>Müllentsorgung</b> <br><br>  Der letzte Schliff ist die Entfernung von Rückständen, die bei den von uns vorgenommenen Manipulationen zurückgeblieben sind. <br><br>  Löschen: <br><br>  Server-01982 Netzwerkschnittstelle, <br>  Sicherheitsgruppe Server-01-nsg, <br>  Laufwerk von einem Dummy-Computer: server-01-raw_OsDisk ... <br>  Snapshot Server-01-Raw-Snapshot <br><br>  Hier ist das Ergebnis: <br><br><img src="https://habrastorage.org/webt/qa/au/bk/qaaubkmvk11pebmibguxh6mgtea.png" alt="Bild"><br><br><h2>  CLI </h2><br>  Sie haben wahrscheinlich bereits bemerkt, dass es eine ziemlich mühsame Aufgabe ist, Azure Schönheit zu verleihen.  Wenn Sie jedoch die Befehlszeile (CLI) verwenden, wird alles erheblich vereinfacht.  Microsoft Azure stellt die CLI sowohl für die native PowerShell- als auch für die Linux-Konsole bereit.  Die letztere Option wird unten beschrieben. <br><br>  Login: <br><br><pre> <code class="bash hljs">az login -u AzureUserName</code> </pre> <br>  Holen Sie sich eine Liste der verfügbaren Standorte <br><br><pre> <code class="bash hljs">az account list-locations</code> </pre> <br>  Eine Liste der Größen virtueller Maschinen abrufen: <br><br><pre> <code class="bash hljs">az vm list-sizes --location locationName</code> </pre> <br>  Wir legen die Liste der Netzwerk- und Parameter der virtuellen Maschine fest (in allen nachfolgenden Befehlen werden diese Daten über Variablen übertragen): <br><br><pre> <code class="bash hljs">location=<span class="hljs-string"><span class="hljs-string">"westindia"</span></span> resource_group=<span class="hljs-string"><span class="hljs-string">"servers"</span></span> virt_network=<span class="hljs-string"><span class="hljs-string">"servers__network"</span></span> virt_network_range=<span class="hljs-string"><span class="hljs-string">"10.0.0.0/16"</span></span> subnet=<span class="hljs-string"><span class="hljs-string">"default"</span></span> subnet_range=<span class="hljs-string"><span class="hljs-string">"10.0.0.0/24"</span></span> user=<span class="hljs-string"><span class="hljs-string">"username"</span></span> ssh_key=<span class="hljs-string"><span class="hljs-string">"ssh-public-key"</span></span> name=<span class="hljs-string"><span class="hljs-string">"server-01"</span></span> image=<span class="hljs-string"><span class="hljs-string">"UbuntuLTS"</span></span> ip=<span class="hljs-string"><span class="hljs-string">"10.0.0.101"</span></span> interface_suffix=<span class="hljs-string"><span class="hljs-string">"__ip-private-01"</span></span> disk_suffix=<span class="hljs-string"><span class="hljs-string">"__disk-01"</span></span> size=<span class="hljs-string"><span class="hljs-string">"Standard_B1s"</span></span> <span class="hljs-comment"><span class="hljs-comment">### SSD = "Premium_LRS"; HDD = "Standard_LRS" storage_type="Premium_LRS"</span></span></code> </pre> <br>  Erstellen Sie eine Ressourcengruppe: <br><br><pre> <code class="bash hljs">az group create --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span></code> </pre> <br>  Erstellen Sie ein virtuelles Netzwerk und Subnetz: <br><br><pre> <code class="bash hljs">az network vnet create --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${virt_network}</span></span> --address-prefixes <span class="hljs-variable"><span class="hljs-variable">${virt_network_range}</span></span></code> </pre> <br><pre> <code class="bash hljs">az network vnet subnet create --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --vnet-name <span class="hljs-variable"><span class="hljs-variable">${virt_network}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${subnet}</span></span> --address-prefix <span class="hljs-variable"><span class="hljs-variable">${subnet_range}</span></span></code> </pre> <br>  Erstellen Sie eine Netzwerkschnittstelle: <br><br><pre> <code class="bash hljs">az network nic create --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span><span class="hljs-variable"><span class="hljs-variable">${interface_suffix}</span></span> --subnet <span class="hljs-variable"><span class="hljs-variable">${subnet}</span></span> --vnet-name <span class="hljs-variable"><span class="hljs-variable">${virt_network}</span></span> --private-ip-address <span class="hljs-variable"><span class="hljs-variable">${ip}</span></span></code> </pre> <br>  Erstellen Sie eine virtuelle Dummy-Maschine: <br><br><pre> <code class="bash hljs">az vm create --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span> --admin-username <span class="hljs-variable"><span class="hljs-variable">${user}</span></span> --ssh-key-value <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${ssh_key}</span></span></span><span class="hljs-string">"</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --image <span class="hljs-variable"><span class="hljs-variable">${image}</span></span> --size <span class="hljs-variable"><span class="hljs-variable">${size}</span></span> --nics <span class="hljs-variable"><span class="hljs-variable">${name}</span></span><span class="hljs-variable"><span class="hljs-variable">${interface_suffix}</span></span> --storage-sku <span class="hljs-variable"><span class="hljs-variable">${storage_type}</span></span></code> </pre> <br>  Normalisieren Sie die Festplatte: <br><br><pre> <code class="bash hljs">az vm stop --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> disk_old=$(az vm get-instance-view --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> | grep -o <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${name}</span></span></span><span class="hljs-string">_OsDisk[0-9a-z\_]\{1,\}"</span></span> | head -1) az disk create --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span><span class="hljs-variable"><span class="hljs-variable">${disk_suffix}</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">source</span></span> <span class="hljs-variable"><span class="hljs-variable">${disk_old}</span></span> --sku <span class="hljs-variable"><span class="hljs-variable">${storage_type}</span></span></code> </pre> <br>  Wir entfernen die Dummy-Maschine und stellen die funktionierende bereit: <br><br><pre> <code class="bash hljs">az vm delete --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --yes az vm create --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --size <span class="hljs-variable"><span class="hljs-variable">${size}</span></span> --nics <span class="hljs-variable"><span class="hljs-variable">${name}</span></span><span class="hljs-variable"><span class="hljs-variable">${interface_suffix}</span></span> --attach-os-disk <span class="hljs-variable"><span class="hljs-variable">${name}</span></span><span class="hljs-variable"><span class="hljs-variable">${disk_suffix}</span></span> --os-type Linux <span class="hljs-variable"><span class="hljs-variable">${availability_set_as_option}</span></span></code> </pre> <br>  Löschen Sie die Dummy-Festplatte: <br><br><pre> <code class="bash hljs">az disk delete --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${disk_old}</span></span> --yes</code> </pre> <br><h2>  Automatisierung </h2><br>  Um den Prozess der Bereitstellung virtueller Maschinen in der Microsoft Azure-Cloud zu automatisieren, habe ich alle oben genannten Befehle in einem Bash-Skript azure-create-vm.sh zusammengefasst, das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github</a> entnommen werden kann.  Öffnen Sie das Skript in einem beliebigen Texteditor, geben Sie Ihre Daten ein und stellen Sie virtuelle Maschinen mit schönen Namen bereit, indem Sie einige Tasten drücken. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de422211/">https://habr.com/ru/post/de422211/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de422201/index.html">China, lass mich abschreiben?</a></li>
<li><a href="../de422203/index.html">DIY Clicker</a></li>
<li><a href="../de422205/index.html">Richard Hamming: Kapitel 13. Informationstheorie</a></li>
<li><a href="../de422207/index.html">Monster nach den Ferien: AMD Threadripper 2990WX 32-Core und 2950X 16-Core (Teil 4)</a></li>
<li><a href="../de422209/index.html">Monster nach den Ferien: AMD Threadripper 2990WX 32-Core und 2950X 16-Core (Teil 5)</a></li>
<li><a href="../de422213/index.html">Eines Tages ohne JavaScript: Was könnte schief gehen?</a></li>
<li><a href="../de422217/index.html">Nicht wirklich ernst mit Hosting oder wie man die Angemessenheit des Hosts überprüft</a></li>
<li><a href="../de422219/index.html">Bei der Einstellung großer internationaler Unternehmen verweigern Diplome</a></li>
<li><a href="../de422221/index.html">Schwefel</a></li>
<li><a href="../de422223/index.html">Wählen Sie eine USV und lassen Sie sich nicht enttäuschen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>