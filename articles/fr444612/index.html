<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé¢ ü¶Å üë©üèª‚Äçüî¨ Dommages macro pour le code C ++ üàµ ‚ò¢Ô∏è üë®üèæ‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le langage C ++ offre de vastes possibilit√©s pour se passer de macros. Essayons donc d'utiliser le moins possible les macros! 

 Faites imm√©diatement ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dommages macro pour le code C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/444612/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ab/6o/dn/ab6odnv29jcjsh1_qrqsawoj5ii.png" alt="d√©finir"></div><br>  Le langage C ++ offre de vastes possibilit√©s pour se passer de macros.  Essayons donc d'utiliser le moins possible les macros! <br><br>  Faites imm√©diatement une r√©serve que je ne suis pas un fanatique et n'encouragez pas √† abandonner les macros pour des raisons id√©alistes.  Par exemple, lorsqu'il s'agit de g√©n√©rer manuellement le m√™me type de code, je peux reconna√Ætre les avantages des macros et les accepter.  Par exemple, je suis calme sur les macros dans les anciens programmes √©crits en utilisant MFC.  Cela n'a aucun sens de se battre avec quelque chose comme √ßa: <br><br><pre><code class="cpp hljs">BEGIN_MESSAGE_MAP(efcDialog, EFCDIALOG_PARENT ) <span class="hljs-comment"><span class="hljs-comment">//{{AFX_MSG_MAP(efcDialog) ON_WM_CREATE() ON_WM_DESTROY() //}}AFX_MSG_MAP END_MESSAGE_MAP()</span></span></code> </pre> <br>  Il y a de telles macros, et d'accord.  Ils ont vraiment √©t√© cr√©√©s pour simplifier la programmation. <br><br>  Je parle d'autres macros avec lesquelles ils essaient d'√©viter la mise en ≈ìuvre d'une fonction √† part enti√®re ou essaient de r√©duire la taille d'une fonction.  Consid√©rez plusieurs motifs pour √©viter de telles macros. <br><a name="habracut"></a><br>  <i>Remarque</i>  <i>Ce texte a √©t√© √©crit en tant qu'invit√© pour le blog Simplify C ++.</i>  <i>J'ai d√©cid√© de publier la version russe de l'article ici.</i>  <i>En fait, j'√©cris cette note afin d'√©viter une question de lecteurs inattentifs pourquoi l'article n'est pas marqu√© comme ¬´traduction¬ª :).</i>  <i>Et ici, en fait, un article invit√© en anglais: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>Macro Evil in C ++ Code</i></a> ".</i> <br><br><h2>  Premi√®rement: le code macro attire les bogues </h2><br>  Je ne sais pas comment expliquer les raisons de ce ph√©nom√®ne d'un point de vue philosophique, mais √ßa l'est.  De plus, les bogues li√©s aux macros sont souvent tr√®s difficiles √† rep√©rer lors d'une r√©vision de code. <br><br>  J'ai d√©crit √† plusieurs reprises de tels cas dans mes articles.  Par exemple, en <i>rempla√ßant la</i> fonction <i>isspace</i> par cette macro: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> isspace(c) ((c)==</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">' '</span></span></span><span class="hljs-meta"> || (c) == </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'\t'</span></span></span><span class="hljs-meta">)</span></span></code> </pre> <br>  Le programmeur qui a utilis√© <i>isspace</i> pensait qu'il utilisait une vraie fonction qui consid√®re non seulement les espaces et les tabulations comme des espaces, mais aussi LF, CR, etc.  Le r√©sultat est que l'une des conditions est toujours vraie et que le code ne fonctionne pas comme pr√©vu.  Cette erreur de Midnight Commander est d√©crite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Ou comment aimez-vous ce raccourci pour √©crire la fonction <i>std :: printf</i> ? <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> sprintf std::printf</span></span></code> </pre> <br>  Je pense que le lecteur devine que c'√©tait une macro tr√®s infructueuse.  Il a d'ailleurs √©t√© trouv√© dans le projet StarEngine.  En savoir plus √† ce sujet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  On pourrait dire que les programmeurs sont √† bl√¢mer pour ces erreurs, pas les macros.  C'est vrai.  Naturellement, les programmeurs sont toujours √† bl√¢mer pour les erreurs :). <br><br>  Il est important que les macros provoquent des erreurs.  Il s'av√®re que les macros doivent √™tre utilis√©es avec une pr√©cision accrue ou pas du tout. <br><br>  Je peux donner des exemples de d√©fauts associ√©s √† l'utilisation de macros depuis longtemps, et cette belle note se transformera en un document de plusieurs pages.  Bien s√ªr, je ne le ferai pas, mais je vais montrer quelques autres cas de persuasion. <br><br>  La biblioth√®que ATL <a href="">fournit des</a> macros telles que A2W, T2W, etc. pour convertir des cha√Ænes.  Cependant, peu de gens savent que ces macros sont tr√®s dangereuses √† utiliser √† l'int√©rieur des boucles.  √Ä l'int√©rieur de la macro, la fonction <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>alloca</i></a> est appel√©e, qui allouera de la m√©moire sur la pile √† chaque it√©ration de la boucle.  Un programme peut pr√©tendre fonctionner correctement.  D√®s que le programme commence √† traiter de longues lignes ou que le nombre d'it√©rations dans la boucle augmente, la pile peut prendre et se terminer au moment le plus inattendu.  Vous pouvez en savoir plus √† ce sujet dans ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mini-livre</a> (voir le chapitre ¬´N'appelez pas la fonction alloca () dans les boucles¬ª). <br><br>  Des macros comme A2W cachent le mal.  Ils ressemblent √† des fonctions, mais ont en fait des effets secondaires difficiles √† remarquer. <br><br>  Je n'arrive pas √† surmonter les tentatives similaires de r√©duction de code √† l'aide de macros: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize_sanitizer_builtins</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DEF_SANITIZER_BUILTIN(ENUM, NAME, TYPE, ATTRS) \ decl = add_builtin_function (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"__builtin_"</span></span></span><span class="hljs-meta"> NAME, TYPE, ENUM, \ BUILT_IN_NORMAL, NAME, NULL_TREE); \ set_call_expr_flags (decl, ATTRS); \ set_builtin_decl (ENUM, decl, true); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"sanitizer.def"</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ((flag_sanitize &amp; SANITIZE_OBJECT_SIZE) &amp;&amp; !builtin_decl_implicit_p (BUILT_IN_OBJECT_SIZE)) DEF_SANITIZER_BUILTIN (BUILT_IN_OBJECT_SIZE, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"object_size"</span></span></span><span class="hljs-meta">, BT_FN_SIZE_CONST_PTR_INT, ATTR_PURE_NOTHROW_LEAF_LIST) .... }</span></span></code> </pre> <br>  Seule la premi√®re ligne de la macro fait r√©f√©rence √† l' <i>instruction if</i> .  Les lignes restantes seront ex√©cut√©es quelle que soit la condition.  Nous pouvons dire que cette erreur vient du monde C, car elle a √©t√© trouv√©e par moi en utilisant les diagnostics <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V640</a> dans le compilateur GCC.  Le code GCC est √©crit principalement en C, et dans ce langage les macros sont difficiles √† faire.  Cependant, vous devez admettre que ce n'est pas le cas.  Ici, il √©tait tout √† fait possible de faire une vraie fonction. <br><br><h2>  Deuxi√®mement: la lecture de code devient plus compliqu√©e </h2><br>  Si vous tombez sur un projet plein de macros compos√©es d'autres macros, alors vous comprenez ce que c'est que de comprendre un tel projet.  Si vous ne l'avez pas rencontr√©, alors prenez un mot, c'est triste.  Comme exemple de code difficile √† lire, je peux citer le compilateur GCC mentionn√© pr√©c√©demment. <br><br>  Selon la l√©gende, Apple a investi dans le d√©veloppement du projet LLVM comme une alternative √† GCC en raison de la complexit√© du code GCC en raison de ces m√™mes macros.  L√† o√π je l'ai lu, je ne m'en souviens pas, donc il n'y aura pas de preuves. <br><br><h2>  Troisi√®mement: √©crire des macros est difficile </h2><br>  Il est facile d'√©crire une mauvaise macro.  Je les rencontre partout avec des cons√©quences correspondantes.  Mais √©crire une macro bonne et fiable est souvent plus difficile que d'√©crire une fonction similaire. <br><br>  √âcrire une bonne macro est difficile car, contrairement √† une fonction, elle ne peut pas √™tre consid√©r√©e comme une entit√© ind√©pendante.  Il est n√©cessaire de consid√©rer imm√©diatement la macro dans le contexte de toutes les options possibles pour son utilisation, sinon il est tr√®s facile de ratisser un probl√®me de forme: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MIN(X, Y) (((X) &lt; (Y)) ? (X) : (Y)) m = MIN(ArrayA[i++], ArrayB[j++]);</span></span></code> </pre> <br>  Bien s√ªr, pour de tels cas, les solutions de contournement ont longtemps √©t√© invent√©es et la macro peut √™tre impl√©ment√©e en toute s√©curit√©: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAX(a,b) \ ({ __typeof__ (a) _a = (a); \ __typeof__ (b) _b = (b); \ _a &gt; _b ? _a : _b; })</span></span></code> </pre> <br>  La seule question est, avons-nous besoin de tout cela en C ++?  Non, en C ++, il existe des mod√®les et d'autres fa√ßons de cr√©er du code efficace.  Alors, pourquoi dois-je continuer √† rencontrer des macros similaires dans les programmes C ++? <br><br><h2>  Quatri√®mement: le d√©bogage est compliqu√© </h2><br>  Il y a une opinion que le d√©bogage est pour les mauviettes :).  Ceci, bien s√ªr, est int√©ressant √† discuter, mais d'un point de vue pratique, le d√©bogage est utile et aide √† trouver des erreurs.  Les macros compliquent ce processus et ralentissent d√©finitivement la recherche d'erreurs. <br><br><h2>  Cinqui√®mement: les faux positifs des analyseurs statiques </h2><br>  De nombreuses macros, en raison des sp√©cificit√©s de leur appareil, g√©n√®rent plusieurs faux positifs √† partir d'analyseurs de code statiques.  Je peux dire en toute s√©curit√© que la plupart des faux positifs lors de la v√©rification du code C et C ++ sont associ√©s √† des macros. <br><br>  Le probl√®me avec les macros est que les analyseurs ne peuvent tout simplement pas distinguer le code d√©licat correct du code erron√©.  L' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> sur la v√©rification de Chromium d√©crit l'une de ces macros. <br><br><h2>  Que faire </h2><br>  N'utilisons pas de macros dans les programmes C ++ √† moins que cela ne soit absolument n√©cessaire! <br><br>  C ++ fournit des outils riches tels que les fonctions de mod√®le, l'inf√©rence de type automatique (auto, decltype), les fonctions constexpr. <br><br>  Presque toujours, au lieu d'une macro, vous pouvez √©crire une fonction ordinaire.  Souvent, cela n'est pas fait √† cause d'une paresse ordinaire.  Cette paresse est nuisible et nous devons la combattre.  Un petit temps suppl√©mentaire consacr√© √† la r√©daction d'une fonction √† part enti√®re sera payant avec int√©r√™t.  Le code sera plus facile √† lire et √† maintenir.  La probabilit√© de tirer sur votre propre jambe diminuera et les compilateurs et les analyseurs statiques produiront moins de faux positifs. <br><br>  Certains pourraient soutenir que le code avec une fonction est moins efficace.  C'est aussi juste une "excuse". <br><br>  Les compilateurs int√®grent d√©sormais parfaitement le code, m√™me si vous n'avez pas √©crit le <i>mot cl√© inline</i> . <br><br>  Si nous parlons de calculer des expressions au stade de la compilation, alors les macros ne sont pas n√©cessaires et m√™me nuisibles.  Dans le m√™me but, il est bien meilleur et plus s√ªr d'utiliser <i>constexpr</i> . <br><br>  Je vais vous expliquer avec un exemple.  Voici une erreur de macro classique que j'ai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">emprunt√©e</a> au code du noyau FreeBSD. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ICB2400_VPOPT_WRITE_SIZE 20 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ICB2400_VPINFO_PORT_OFF(chan) \ (ICB2400_VPINFO_OFF + \ sizeof (isp_icb_2400_vpinfo_t) + \ (chan * ICB2400_VPOPT_WRITE_SIZE)) </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// &lt;= static void isp_fibre_init_2400(ispsoftc_t *isp) { .... if (ISP_CAP_VP0(isp)) off += ICB2400_VPINFO_PORT_OFF(chan); else off += ICB2400_VPINFO_PORT_OFF(chan - 1); // &lt;= .... }</span></span></span></span></code> </pre> <br>  L'argument <i>chan</i> est utilis√© dans une macro sans encapsuler entre parenth√®ses.  Par cons√©quent, l'expression <i>ICB2400_VPOPT_WRITE_SIZE</i> ne multiplie pas l'expression <i>(chan - 1)</i> , mais une seule. <br><br>  L'erreur n'appara√Ætrait pas si une fonction ordinaire √©tait √©crite au lieu d'une macro. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ICB2400_VPINFO_PORT_OFF(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> chan) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ICB2400_VPINFO_OFF + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">isp_icb_2400_vpinfo_t</span></span>) + chan * ICB2400_VPOPT_WRITE_SIZE; }</code> </pre> <br>  Il est tr√®s probable que le compilateur C et C ++ moderne ex√©cute lui- <i>m√™me des</i> fonctions d' <i>inline</i> , et le code sera aussi efficace que dans le cas d'une macro. <br><br>  Dans le m√™me temps, le code est devenu plus lisible et exempt d'erreurs. <br><br>  S'il est connu que la valeur d'entr√©e est toujours une constante, vous pouvez ajouter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">constexpr</a> et √™tre s√ªr que tous les calculs auront lieu au stade de la compilation.  Imaginez que c'est C ++ et que <i>chan</i> est toujours une constante.  Ensuite, <i>il</i> est utile de d√©clarer la fonction <i>ICB2400_VPINFO_PORT_OFF</i> comme ceci: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ICB2400_VPINFO_PORT_OFF</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> chan)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ICB2400_VPINFO_OFF + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">isp_icb_2400_vpinfo_t</span></span>) + chan * ICB2400_VPOPT_WRITE_SIZE; }</code> </pre> <br>  Profit! <br><br>  J'esp√®re avoir r√©ussi √† vous convaincre.  Bonne chance et moins de macros dans le code! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr444612/">https://habr.com/ru/post/fr444612/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr444596/index.html">Iodide: Mozilla Interactive Science Editor</a></li>
<li><a href="../fr444598/index.html">Le CD a 40 ans et il est mort (n'est-ce pas?)</a></li>
<li><a href="../fr444600/index.html">√âvaluation de 14 cm sans t√™te 2019</a></li>
<li><a href="../fr444602/index.html">Encapsulation en C ++ et C</a></li>
<li><a href="../fr444610/index.html">Statistiques et suivi des scripts PHP en temps r√©el. ClickHouse et Grafana vont aider Pinba</a></li>
<li><a href="../fr444614/index.html">Toute l'histoire de Linux. Partie II: hauts et bas des entreprises</a></li>
<li><a href="../fr444616/index.html">Cr√©ation de votre propre enregistreur vocal Android √† l'aide de Kotlin</a></li>
<li><a href="../fr444620/index.html">Utilisation de fichiers de s√©quence de noyau Linux</a></li>
<li><a href="../fr444622/index.html">Le package tidyr et ses nouvelles fonctions pivot_longer et pivot_wider</a></li>
<li><a href="../fr444624/index.html">Voitures √©lectriques en feu et baignade</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>