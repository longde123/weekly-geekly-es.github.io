<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™ŒğŸ¼ ğŸ‘¨ğŸ¿â€ğŸ« ğŸŠ Finde N Unterschiede. Erfahrung mit Tinkoff.ru-Layouttests ğŸ‘¨ğŸ»â€ğŸŒ¾ ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ¼ ğŸ›ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Artikel wird im Auftrag von Alexander Kochetkov und Crasse Snejana verÃ¶ffentlicht. 

 Wie viele Unterschiede werden Sie in 10 Sekunden feststellen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Finde N Unterschiede. Erfahrung mit Tinkoff.ru-Layouttests</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/429054/">  <i>Der Artikel wird im Auftrag von Alexander Kochetkov und Crasse Snejana verÃ¶ffentlicht.</i> <br><br>  Wie viele Unterschiede werden Sie in 10 Sekunden feststellen? <br><br><img src="https://habrastorage.org/webt/yv/qh/_z/yvqh_zsiieango28fgf74stqf_k.jpeg"><br><br>  Unser Tester wird ALLE Unterschiede finden.  Und auch solche, die nicht sichtbar sind.  Im Folgenden werde ich darÃ¼ber sprechen, wie er es tun wird, aber zuerst werde ich Ihnen den Verlauf der Dinge vorstellen. <br><a name="habracut"></a><br>  Unser Unternehmen entwickelt verschiedene Webanwendungen.  Nehmen Sie zum Beispiel eine typische Client-Webanwendung mit einer umfangreichen BenutzeroberflÃ¤che, mehreren hundert Seiten, einem ansprechenden Layout und UnterstÃ¼tzung fÃ¼r alle gÃ¤ngigen Browser.  In diesem Szenario wird der Regressionstest der vorhandenen BenutzeroberflÃ¤che zu AD und nimmt viel Zeit in Anspruch.  Um nicht verrÃ¼ckt zu werden und sich nicht in diesem Sumpf zu suhlen, haben wir diesen Prozess automatisiert und ein neues Tool erstellt - <b>QVisual</b> . <br><br>  Wie testet eine Person das Layout (UI)?  Er nimmt die aktuelle Implementierung und vergleicht sie mit einem abstrakten Standard, der auf seiner eigenen Erfahrung, Bequemlichkeit und Tausenden von zuvor angezeigten Webseiten basiert.  Eine eigene KI zum Testen von Layouts zu schreiben, wÃ¤re natÃ¼rlich sehr cool.  Aber diese Idee sieht aus, als wÃ¼rde man mit einer Kanone auf Spatzen schieÃŸen.  Daher haben wir es einfacher gemacht: Als Referenz haben wir begonnen, dieselbe Seite zu akzeptieren, die zuvor von einer Person Ã¼berprÃ¼ft wurde (in den meisten FÃ¤llen handelt es sich um eine Seite aus einer frÃ¼heren erfolgreichen Version).  Die ganze Aufgabe bestand also darin, zwei Seiten zu vergleichen. <br><br>  NatÃ¼rlich wurden bereits viele LÃ¶sungen verÃ¶ffentlicht, mit denen Sie zwei Bilder Pixel fÃ¼r Pixel vergleichen kÃ¶nnen.  Warum haben wir "ein anderes Fahrrad" geschrieben?  Die Antwort ist einfach: Wir wollten uns nicht auf einen pixelweisen Vergleich beschrÃ¤nken, sondern einzelne BlÃ¶cke auf einer Seite vergleichen und einen aussagekrÃ¤ftigen Bericht Ã¼ber die Anzahl und Art der Unterschiede in diesen BlÃ¶cken erhalten.  Daher kann das von uns implementierte Tool bei Bedarf nicht nur die Bilder selbst, sondern auch einzelne Seitenelemente vergleichen.  Wir arbeiten also nicht mit Screenshots von zwei Seiten, sondern mit SchnappschÃ¼ssen dieser Seiten. <br><br><h4>  Vorteile des Ansatzes </h4><br>  Ein Schnappschuss ist ein Screenshot der gesamten Seite sowie Daten zu den Stilen und Eigenschaften einiger Webelemente auf dieser Seite.  Wir implementieren die Suche nach Unterschieden in Snapshots mit einer Serveranwendung mit einer offenen API. <br><br>  Ansatz: Durch den Vergleich von Elementen und nicht von Bildern kÃ¶nnen typische Fehler hervorgehoben werden, z. <br><br><ul><li>  <b>BILD</b> - Das Element auf der Seite entspricht visuell nicht dem Element auf dem Standard. </li><li>  <b>MOVED</b> - Offset-Elemente, das Element ist identisch mit der Referenz, jedoch mit unterschiedlichen Koordinaten. </li><li>  <b>RESIZED</b> - einem Offset sehr Ã¤hnlich, aber anstelle der Position des Elements ist seine GrÃ¶ÃŸe unterschiedlich. </li><li>  <b>TEXT</b> - Fehler im Text; </li><li>  <b>CSS</b> und <b>ATTRIBUTE</b> - Unterschiede in Stilen und Attributen sind nicht immer visuell erkennbar und nicht immer ein Fehler.  Ã„nderungen in ihnen zu kontrollieren ist jedoch sehr nÃ¼tzlich, da es in einigen FÃ¤llen hilfreich ist, mit ihnen verbundene Fehler zu finden. </li></ul><br>  Eine kleine Analyse von Beispielen mit einer Reihe hÃ¤ufiger Fehler: <br><br><img src="https://habrastorage.org/webt/2a/tm/-i/2atm-iq1tzielskk7jjhetmeu8i.gif" alt="Bild"><br><br><h4>  Wie funktioniert es </h4><br>  Sie kÃ¶nnen den Snapshot mit Ihren eigenen Tools von der Seite entfernen und einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Screenshot</a> und Daten zu den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Elementen</a> mit zwei normalen POST-Anforderungen auf den Server Ã¼bertragen. <br>  Wenn Ihre Tests in Java geschrieben sind, ist es einfacher, unsere Bibliothek fÃ¼r diese Zwecke zu verwenden, die sich selbst um die Erstellung eines Snapshots und die Ãœbertragung von Daten auf den Server kÃ¼mmert. <br>  Bevor Sie beginnen, mÃ¼ssen Sie mehrere Variablen angeben (Serveradresse, Browsertyp und -version usw.).  Im Test selbst mÃ¼ssen Sie die Adresse der Seite angeben, von der Sie einen Snapshot erstellen mÃ¶chten, sowie eine Liste der Locators im Xpath- oder CSS-Format, um nach den benÃ¶tigten Elementen zu suchen (optional).  Das ist alles! <br><br>  Innerhalb der Bibliothek verwenden wir die internen Befehle und JavaScript-Skripte von Selenium WebDriver, um einen Schnappschuss zu erstellen.  Mit den internen Befehlen von WebDriver kÃ¶nnen Sie schnell und genau Screenshots der Seite erstellen (ohne zu kleben und zu scrollen), und js - finden Sie die erforderlichen Elemente und fÃ¼gen Sie im Snapshot Daten dazu hinzu.  Nachdem wir den Snapshot entfernt haben, Ã¼bertragen wir ihn an unsere Serveranwendung, die Daten zu den Elementen in Mongo und die Screenshots selbst auf der Serverfestplatte speichert.  Jetzt kann dieser Schnappschuss mit dem Standard verglichen werden.  Elementdaten werden wie normale Objekte und Screenshots Pixel fÃ¼r Pixel mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OpenCV</a> verglichen. <br>  Jetzt kÃ¶nnen Sie einen Bericht Ã¼ber den Vergleich zweier SchnappschÃ¼sse erhalten.  Dazu mÃ¼ssen Sie eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GET-Anfrage</a> senden und als Antwort die Daten zum Vergleich in Form von JSON abrufen oder unsere Front-End-Anwendung verwenden, die einen detaillierten und vor allem lesbaren Bericht erstellt. <br><br><h4>  Und was ist mit dem Bericht? </h4><br>  Die Hauptseite des Berichts enthÃ¤lt Informationen zu erfolgreich bestandenen und fehlgeschlagenen Tests (rot hervorgehoben) und besteht aus drei Listen: <br><br><ul><li>  Liste der Tests (Story), in denen das Layout Ã¼berprÃ¼ft wurde.  Der Einfachheit halber entsprechen hier die Namen der Tests der URL der Seiten, von denen der Schnappschuss erstellt wurde. </li><li>  Liste der ZustÃ¤nde (Zustand) - Jede Geschichte kann mehrere ZustÃ¤nde enthalten, z. B. einen Screenshot vor und nach dem AusfÃ¼llen des Formulars.  Jeder Status kann mehrere Snapshots in unterschiedlichen BrowserauflÃ¶sungen und -versionen enthalten. </li><li>  Liste mit verschiedenen Browsern und Berechtigungen und kurzen Statistiken. </li></ul><br>  Im oberen Teil befinden sich Symbole, mit denen Sie die Ergebnisse je nach Art der Fehler und prozentualer Abweichung im pixelweisen Vergleich filtern kÃ¶nnen.  Diese Implementierung beschleunigt die FehlerÃ¼berprÃ¼fung. <br><br><img src="https://habrastorage.org/webt/66/fo/wn/66fownexe7yn5lcjo67pdyjrlxe.png" alt="Bild"><br><br>  Kurze Statistiken in den BlÃ¶cken der letzten Liste enthalten drei Parameter: <br><br><ul><li>  <b>Pixel</b> - die Differenz zwischen den beiden Bildern in Prozent relativ zur GrÃ¶ÃŸe der gesamten Seite; </li><li>  <b>Elemente</b> - die Anzahl der verschiedenen Elemente (von denen, die von den im Test bestandenen Locatoren gefunden wurden); </li><li>  <b>Fehler</b> - Interne Fehler, die beim Vergleichen von SchnappschÃ¼ssen aufgetreten sind (z. B. wurde eines der Bilder nicht zum Vergleich gefunden oder es sind keine Daten zu SchnappschÃ¼ssen vorhanden). </li></ul><br>  Der Bericht fÃ¼r jede Seite besteht aus zwei separaten Screenshots und Strichen der Elemente, in denen diff gefunden wurde.  Popup-Text beim Bewegen des Mauszeigers Ã¼ber verschiedene Elemente gibt die Art des Fehlers und den Locator an, anhand dessen das Element gefunden wurde.  Sie kÃ¶nnen auch die Filterung nach Fehlertyp festlegen, einen der Screenshots ausblenden und das Ergebnis des pixelweisen Vergleichs aktivieren / deaktivieren. <br><br><img src="https://habrastorage.org/webt/j4/1i/vd/j41ivdk8scudg4igkojzeu4u_hc.png"><br><br>  Wie oben erwÃ¤hnt, vergleichen wir auch Pixel fÃ¼r Pixel Screenshots, was fÃ¼r einige Aufgaben sehr effektiv ist.  FÃ¼r neue Seiten mit einem instabilen DOM ist es beispielsweise nicht sinnvoll, Zeit mit dem Schreiben und Verwalten von Locators zu verbringen. <br><br><img src="https://habrastorage.org/webt/wl/t7/nr/wlt7nr5-69dzhhby8jy8mgqg7tc.gif"><br><br>  AbschlieÃŸend mÃ¶chte ich zum tatsÃ¤chlichen Auspuff dieses Tools fÃ¼r das Unternehmen sagen: Jeden Tag hilft <b>QVisual</b> unseren Testern, sich Ã¼ber alle Ã„nderungen im Layout von Anwendungen auf dem Laufenden zu halten.  Wir sparen viel Zeit beim Vergleichen von Landungen, indem wir automatisch Screenshots erstellen (bis zu 1500 Landungen in 3 Browsern in 6 BildschirmauflÃ¶sungen). <br><br>  <b>PS</b> . Dies ist eine kurze Ãœbersicht Ã¼ber unser Tool.  Sie finden weitere Informationen zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> und kÃ¶nnen an der Entwicklung des Tools teilnehmen. <br><br>  <b>PPS</b> FÃ¼r diejenigen, die sich selbst testen mÃ¶chten - das sind alle Unterschiede im Bild vom Header: <br><br><img src="https://habrastorage.org/webt/ft/ny/oi/ftnyoiatmcuv5mhfvezdmcgrynm.jpeg"><br><br>  Support-Kanal fÃ¼r Telegramm-Tools: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">t.me/qvisual</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de429054/">https://habr.com/ru/post/de429054/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de429044/index.html">Die Apple-Aktie verzeichnete den schlimmsten RÃ¼ckgang seit 2014. GroÃŸinvestoren haben Milliarden verloren</a></li>
<li><a href="../de429046/index.html">Vier Jahre Entwicklung von SObjectizer-5.5. Wie hat sich SObjectizer in dieser Zeit verÃ¤ndert?</a></li>
<li><a href="../de429048/index.html">Tipps fÃ¼r einen AnfÃ¤nger</a></li>
<li><a href="../de429050/index.html">Gate.io-KryptowÃ¤hrungsaustauschangriff aufgezeichnet</a></li>
<li><a href="../de429052/index.html">Warum auf Touch-Laptops einige SPA keine Touch-Events mehr unterstÃ¼tzen</a></li>
<li><a href="../de429056/index.html">Die Physik, nicht die Biologie, macht das Altern unvermeidlich</a></li>
<li><a href="../de429058/index.html">Verwenden von Retrofit 2 in einer Android-App</a></li>
<li><a href="../de429060/index.html">Das Konzept eines idealen Geistes. Universelle KI</a></li>
<li><a href="../de429062/index.html">Multicast zÃ¤hmen</a></li>
<li><a href="../de429064/index.html">Kampf um Ressourcen, Teil 5: Von vorne anfangen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>