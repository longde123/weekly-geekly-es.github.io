<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🈸 🧤 😿 Entwicklung des Continent-AP VPN Plugins für Sailfish OS 👩🏻‍🚒 🏦 👩🏿‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einführung 
 Ich arbeite als Programmierer in der Entwicklungs- und Testabteilung von Sicherheitstools für mobile Plattformen des Unternehmens Securit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entwicklung des Continent-AP VPN Plugins für Sailfish OS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471306/"><h3>  Einführung </h3><br>  Ich arbeite als Programmierer in der Entwicklungs- und Testabteilung von Sicherheitstools für mobile Plattformen des Unternehmens Security Code.  Das mobile Entwicklungsteam wurde beauftragt, die plattformübergreifende Continent-AP-Bibliothek der Teilnehmerstation zu portieren, die bereits erfolgreich auf IOS und Android betrieben wurde.  Das Hauptproblem war, dass das Sailfish-Betriebssystem nicht so gut dokumentiert ist wie Android oder IOS, aber dank der Leute von Open Mobile Platforms, die die Dokumentation geteilt haben. <br><a name="habracut"></a><br><h3>  VPN-API-Architektur in Sailfish OS </h3><br>  Für alle Netzwerkverbindungen im Sailfish-Betriebssystem ist der ConnMan-Dienst verantwortlich, nämlich: <br><br><ul><li>  Scannen Sie Wi-Fi-Netzwerke und Mobilfunknetze und stellen Sie eine Verbindung zu ihnen her. </li><li>  Sharing-Verbindung (Wi-Fi-Hotspot); </li><li>  Übersetzung, Ausgangsverbindungen zum Flugmodus; </li><li>  VPN-Verbindungsverwaltung. </li></ul><br>  Ich werde ausführlicher auf den letzten Punkt eingehen.  ConnMan verfügt über verschiedene Arten vordefinierter VPN-Plugins.  QML-Widgets zum Erstellen und Konfigurieren von Verbindungen sind in die Firmware integriert. <br><br><img src="https://habrastorage.org/webt/v7/2d/es/v72desnzu4zeyymbx3wea1sddie.jpeg" alt="Bild"><br>  <i>Abb.</i>  <i>1 Sailfish OS-Systemmenü zum Konfigurieren und Verwalten von VPN-Verbindungen</i> <br><br>  Die Benutzeroberfläche unseres VPN-Clients ist ein RPM-Paket und wird während der Installation nicht in das VPN-Systemfenster im Abschnitt Einstellungen integriert, sondern sieht aus wie eine separate Anwendung.  Es wird wahrscheinlich einen separaten Artikel über die Entwicklung der Benutzeroberfläche geben, daher wird die folgende Geschichte über die Entwicklung des ConnMan-Plug-Ins in C / C ++ handeln. <br><br><img src="https://habrastorage.org/webt/-r/ln/rr/-rlnrrdy51kputzfnk6nj-r-bs0.jpeg" alt="Bild"><br>  <i>Abb.</i>  <i>2 Continent-AP GUI von Sailfish</i> <br><br>  VPN-api Sailfish OS besteht aus den folgenden Komponenten, die wir am Beispiel unseres VPN-Clients zeigen werden: <br><br><ol><li>  ConnMan ist der Prozess, der beim Starten des Sailfish-Betriebssystems gestartet wird. </li><li>  connman-vpnd ist ein von ConnMan gestarteter Daemon-Prozess, mit dem VPN-Verbindungen verschiedener Anbieter verwaltet, die Tun-Schnittstelle initialisiert und de-initialisiert und über DBus empfangene Netzwerkeinstellungen (IP-Adressen, Routen, DNS-Server) zugewiesen werden.  In unserem Fall ein Anbieter namens Kontinent. </li><li>  Das Kontinent-proto-plugin.so VPN-Plugin ist eine Bibliothek mit einer Makrodeklaration zum Laden in die Laufzeit und Funktionen, die beim Aufrufen der Schnittstellenmethoden net.connman.vpn.Connection aufgerufen werden. </li><li>  Die Hintergrundanwendung (Binärdatei / usr / sbin / kontinent) ist ein Konsolenclient zum Herstellen einer Verbindung mit der CD (Continent Access Server), von der Netzwerkeinstellungen empfangen werden, die an connman-vpnd übergeben werden. </li><li>  ConnMan Task ist ein Prozess zum Starten, Stoppen und Überwachen eines laufenden Konsolenclients. </li><li>  DBus-api - repräsentiert connman-vpnd, nämlich net.connman.vpn mit den Schnittstellen net.connman.vpn.Manager, net.connman.vpn.Connection. </li></ol><br><img src="https://habrastorage.org/webt/lk/lt/gg/lkltggz6cpyn9dor5rpcacd-_kq.jpeg" alt="Bild"><br>  <i>Abb.</i>  <i>3 Interaktion von Komponenten untereinander in "Continent-AP" Sailfish</i> <br><br><h3>  VPN-Plugin </h3><br>  Alle Plugins von Drittanbietern, die nicht Teil der ConnMan-Distribution sind, stellen die Bibliothek dar und sollten bei der Installation über den Paketmanager in / usr / lib / connman / plugins-vpn / abgelegt werden. <br><br>  Ein Plugin kann eine Konfigurationsdatei haben, in der wir angeben, von welchem ​​Benutzer die Binärdatei ausgeführt werden soll, und deren Rechte vorschreiben.  Die Datei sollte sich im System entlang des Pfads /etc/connman/vpn-plugin/continent.conf befinden, und ihr Name sollte dem Namen unseres Anbieters entsprechen, in unserem Fall kontinent.conf. <br><br>  Dateiinhalt zum Beispiel: <br><br><pre><code class="plaintext hljs">[VPN Binary] User = nemo Group = vpn SupplementaryGroups = inet,net_admin</code> </pre> <br>  Das Plugin kontinent-proto-plugin.so in ConnMan wird mit dem Makro CONNMAN_PLUGIN_DEFINE (Name, Beschreibung, Version, Init, Exit) registriert. In unserem Beispiel sieht der Makroaufruf folgendermaßen aus: <br><br><pre> <code class="cpp hljs">CONNMAN_PLUGIN_DEFINE(continent, <span class="hljs-string"><span class="hljs-string">"continent VPN plugin"</span></span>, CONNMAN_VERSION, CONNMAN_PLUGIN_PRIORITY_DEFAULT, continent_init, continent_exit);</code> </pre><br>  Das Argument name (Kontinent) muss ohne Anführungszeichen stehen.  Die Funktionen continent_init, kontinent_exit werden aufgerufen, wenn das Plugin geladen und entladen wird, z. B. wenn systemctl restart connman während der RPM-Installation aufgerufen wird.  Die Funktionontin_init ruft die Funktionen vpn_register und connman_dbus_get_connection auf. <br><br><pre> <code class="plaintext hljs">vpn_register(name, driver, binary_path)</code> </pre> <br>  name - der Name des registrierten Anbieters, in unserem Fall "Kontinent"; <br>  Treiber - Struktur vpn_driver Struktur, die Zeiger auf Rückruffunktionen enthält, z. B. beim Zugriff auf das Plugin über DBus; <br>  binary_path - Pfad zur Binärdatei, in unserem Fall "/ usr / sbin / kontinent". <br><br>  Mit der Funktion connman_dbus_get_connection können Sie die hergestellte DBus-Verbindung DBusConnection * herstellen. <br><br>  Die Funktion construct_exit ist erforderlich, um die Registrierung des Plugins in ConnMan aufzuheben und die DBus-Verbindung zu schließen. <br><br>  Eine VPN-Provider-Instanz wird erstellt, wenn DBus die Methode net.connman.vpn.Manager.Create aufruft. Eine entsprechende Einstellungsdatei wird automatisch im Verzeichnis /var/lib/connman/provider_${Hostasket_{VPN.Domain} erstellt.  Der Anbieter wird durch Aufrufen von net.connman.vpn.Manager.Remove gelöscht.  Wenn die Methode net.connman.vpn.Connection.Connect aufgerufen wird, werden die Einstellungen in den erstellten Anbieter struct vpn_provider * geladen. <br><br>  Ich möchte auch über einige Funktionen in struct vpn_driver sprechen, von denen einige für die Implementierung erforderlich sind. <br><br>  connect - Rückruf, der aufgerufen wird, wenn net.connman.vpn.Connection.Connect mit der entsprechenden Adresse des DBus-Objekts über DBus aufgerufen wird, hat die Signatur: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">continent_connect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( struct vpn_provider *provider, struct connman_task *task, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *if_name, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">vpn_provider_connect_cb_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cb, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *dbus_sender, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *user_data)</span></span></span></span></code> </pre><br>  Das zweite Argument für diesen Rückruf ist eine struct connman_task * -Task. Sie führt die Binärdatei aus, aber Sie müssen Argumente übergeben, bevor Sie beispielsweise den Serverhost und den Port starten: <br><br><pre> <code class="cpp hljs">connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--host"</span></span>, value); connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--port"</span></span>, value);</code> </pre> <br>  Wir speichern einige Parameter in der Konfigurationsdatei der Provider-Objektinstanz, die oben beschrieben wurde, und erhalten sie durch Aufrufen der Funktion vpn_provider_get_string, zum Beispiel: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> * value = vpn_provider_get_string(provider , “Host”)</code> </pre> <br>  Dabei ist Provider eine Instanz von struct vpn_provider. <br><br><pre> <code class="cpp hljs">connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--dev-name"</span></span>, if_name).</code> </pre> <br>  Die obige Zeile zeigt den Namen der virtuellen Schnittstelle, die ConnMan-vpnd initialisiert und zum Lesen und Schreiben von IP-Paketen von der TUN-Schnittstelleninstanz bereitstellt, die für die aktuelle Instanz des VPN-Anbieters ausgelöst wurde.  Im Hintergrund bleibt es uns überlassen, das Gerät zu öffnen und einen Dateideskriptor zum Lesen / Schreiben zu erhalten. <br><br>  Ein kurzer Hinweis: Während der Entwicklung des Plugins stellte sich heraus, dass die TUN-Schnittstelle als Standardroutenschnittstelle festgelegt wurde. <br><br><pre> <code class="cpp hljs">connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--dbus-busname"</span></span>, dbus_bus_get_unique_name(connection)); connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--dbus-interface"</span></span>, CONNMAN_TASK_INTERFACE); connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--dbus-path"</span></span>, connman_task_get_path(task));</code> </pre> <br>  Für eine Rückmeldung zwischen der Hintergrundanwendung und dem VPN-Plug-In übergeben wir die ConnManTask-DBus-Adresse und den Pfad an die aktuelle Instanz. Dazu mussten wir in der Initialisierungsfunktion connman_dbus_get_connection aufrufen. <br><br>  Wir starten den Hintergrundprozess: <br><br><pre> <code class="cpp hljs">err = connman_task_run(task, continent_died, data, &amp;data-&gt;stdin_fd, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>);</code> </pre> <br>  ontin_died - Rückruf, der aufgerufen wird, wenn der Hintergrundprozess beendet wird.  Darin finden wir den Fehlercode zum Beenden des Prozesses, Bereitstellen des Speichers und Löschen der hinzugefügten Routen. <br><br>  notify - Rückruf, der aufgerufen wird, wenn net.connman.Task.notify über DBus aufgerufen wird. Darin erhalten wir DBus-Nachrichten von einer laufenden Hintergrundanwendung.  Die Hauptsache ist die Übertragung von Netzwerkparametern: die Adresse der TUN-Schnittstelle, der DNS-Server im virtuellen Netzwerk usw.  Netzwerkparameter werden in DBusMessage in Form eines Wörterbuchs gepackt und an die ConnMan-Task übertragen, in der Dbus-Parameter beim Start der Hintergrundanwendung gesendet werden. <br><br>  Ein Beispiel für die Initialisierung der TUN-Schnittstelle in der Benachrichtigungsfunktion: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">connman_ipaddress</span></span></span><span class="hljs-class"> * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ipaddress</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">connman_ipaddress_alloc</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AF_INET</span></span></span><span class="hljs-class">);</span></span> connman_ipaddress_set_ipv4(ipaddress, address, netmask, remote_server_ip); connman_ipaddress_set_peer(ipaddress, peer); vpn_provider_set_ipaddress(provider, ipaddress); vpn_provider_set_nameservers(provider, “<span class="hljs-number"><span class="hljs-number">8.8</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span>”); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> VPN_STATE_CONNECT;</code> </pre> <br>  Wir übergeben auch Zwischenwerte, wenn wir beispielsweise die Benutzeroberfläche des Ereignisses benachrichtigen möchten, indem wir in die Eigenschaften der aktuellen Verbindung schreiben, die die Benutzeroberfläche von der Methode net.connman.vpn.Connection.GetProperties lernen kann. Beim Ändern von Eigenschaften sendet ConnMan ein DBus-Signal PropertyChanged, zum Beispiel: vpn_provider_set_string (Anbieter, Schlüssel, Wert). <br><br>  Disconnect - Rückruf, der aufgerufen wird, wenn net.connman.vpn.Connection.Disconnect über DBus aufgerufen wird <br>  Der Stoppvorgang erfolgt durch Senden eines SIGTERM-Signals. Wenn innerhalb von 3 Sekunden keine Trennung erfolgt, wird ein SIGKILL-Signal gesendet. <br><br><h3>  Entwickeln und Debuggen eines VPN-Plugins </h3><br>  Die Montage des Continent-AP VPN-Plug-Ins und seiner Komponenten erfolgt auf der virtuellen Maschine (Virtual Box) des Sailfish Build Engine-Betriebssystems, die Teil des Sailfish SDK ist.  Um das Plugin zu erstellen, benötigen Sie die Bibliotheken: connman-devel, dbus-1, glibs-2.0, die wir installieren, indem wir uns über ssh anmelden: <br><br><pre> <code class="plaintext hljs">ssh -p 2222 -i ~/SailfishOS/vmshare/ssh/private_keys/engine/mersdk mersdk@localhost</code> </pre> <br>  Wir verwenden das Dienstprogramm sb2 (Scratchbox 2) - Toolkit für die Cross-Kompilierung.  Wir installieren die notwendigen Pakete für die Plattformen i486 und armv7hl: <br><br><pre> <code class="plaintext hljs">sb2 -t SailfishOS-3.0.1.11-i486 -m sdk-install -R zypper -n in cmake patchelf chrpath connman-devel systemd-compat-libs systemd-devel</code> </pre> <br><pre> <code class="plaintext hljs">sb2 -t SailfishOS-3.0.1.11-armv7hl -m sdk-install -R zypper -n in cmake patchelf chrpath connman-devel systemd-compat-libs systemd-devel</code> </pre> <br>  Systemd-compatible-libs und systemd-devel werden für die Ausgabe in das Systemprotokoll mithilfe der Funktion sd_journal_print benötigt.  Wir installieren Cmake, da unser Projekt es verwendet, was die Montage für verschiedene Plattformen erheblich vereinfacht. <br><br>  Wir starten die Montage des VPN-Plugins und seiner Komponenten über sb2 sdk-build: <br><br><pre> <code class="plaintext hljs">sb2 -t SailfishOS-3.0.1.11-armv7hl -m sdk-build cmake . &amp;&amp; make sb2 -t SailfishOS-3.0.1.11-i486 -m sdk-build cmake . &amp;&amp; make</code> </pre> <br><br>  Als Nächstes fügen wir die gesammelten Binärdateien und Bibliotheken in unser UI-Projekt ein, das eine SPEC-Datei zum Generieren des RPM-Pakets für die Sailfish-Distribution von Continent-AP enthält. Dabei wird der Abschnitt zum Installieren unserer Dateien in den Systemordnern des Geräts in der SPEC-Datei leicht angepasst. Beispiel: <br><br><pre> <code class="plaintext hljs">%files %defattr(-,root,root,-) %{_sbindir}/continent %{_libdir}/connman/plugins-vpn/continent-proto-plugin.so</code> </pre> <br>  Das Plug-In wurde separat von der Benutzeroberfläche des Emulators entwickelt, der Teil des Sailfish SDK ist, und gdbus und journalctl mit der Option -f im Konstantprotokoll-Ausgabemodus haben als Debugging-Tools sehr geholfen. <br><br>  Beispiel: Erstellen einer Instanz eines Anbieters mit gdbus: <br><br><pre> <code class="plaintext hljs">gdbus call --system --dest=net.connman.vpn --object-path / --method net.connman.vpn.Manager.Create "{ 'Type': &lt;'continent'&gt;, … }"</code> </pre><br>  Die Testgeräte waren INOI R7 (Telefon), INOI T8 (Tablet) und ein auf VirtualBox basierender Emulator <br><br><h3>  Nützliche Links: </h3><br><ol><li>  Den für Sailfish angepassten ConnMan-Quellcode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">finden Sie hier</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Skelett - Plugin Projekt</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Segelfisch.org/wiki</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de471306/">https://habr.com/ru/post/de471306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de471296/index.html">Lean Manufacturing - Ein Werkzeug für Effizienz</a></li>
<li><a href="../de471298/index.html">Bieber und Bilan winken mit einem Stift. AI singt jetzt Lieder</a></li>
<li><a href="../de471300/index.html">Reagieren: Wenn Sie den Status erhöhen, wird Ihre App zerstört</a></li>
<li><a href="../de471302/index.html">Benutzerüberprüfung in China und Sozialkredit</a></li>
<li><a href="../de471304/index.html">Empire ERP. Unterhaltsame Buchhaltung: Hauptbuch, Konten, Saldo</a></li>
<li><a href="../de471310/index.html">Meine sehr subjektive Meinung über berufliche und nicht nur IT-Ausbildung</a></li>
<li><a href="../de471312/index.html">Vorbereitung auf die Spring Professional-Zertifizierung. Frühlingsstiefel</a></li>
<li><a href="../de471318/index.html">September Maschinelles Lernen und künstliche Intelligenz News Digest</a></li>
<li><a href="../de471320/index.html">Tools für Softwareentwickler: Open Framework- und Machine Learning-Bibliotheken</a></li>
<li><a href="../de471324/index.html">Träumen neuronale Netze von der Mona Lisa?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>