<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìí üßëüèø‚Äçü§ù‚Äçüßëüèª üßöüèø Maven-way para construir proyectos Go ‚úçüèø üïç üë©üèΩ‚Äçü§ù‚Äçüë®üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Primero, un poco de historia. A principios de la d√©cada de 2010, hice una peque√±a utilidad de conversi√≥n para archivos BIN del emulador BK-0010 a arch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Maven-way para construir proyectos Go</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465803/"><p>  Primero, un poco de historia.  A principios de la d√©cada de 2010, hice una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">peque√±a utilidad de conversi√≥n</a> para archivos BIN del emulador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BK-0010</a> a archivos WAV.  La utilidad fue escrita en Python con el objetivo de m√°xima portabilidad, funcion√≥ sin problemas y la olvid√© por un tiempo.  Pero en 2016, apareci√≥ el usuario, que no ten√≠a idea sobre Python y c√≥mo instalarlo.  Quer√≠a un monolito ejecutable simple que "simplemente funcionara".  Su solicitud me pareci√≥ l√≥gica, y decid√≠ reelaborar la utilidad como un conjunto de archivos binarios ejecutables para las plataformas principales. </p><br><p><img src="https://habrastorage.org/webt/dm/hq/kd/dmhqkdcz2pv6rlqs3af4f2_5jv4.png" alt="imagen"></p><br><p> Python y Java no dieron esa oportunidad (a menos, por supuesto, que hubiera un deseo de inflar la utilidad en muchas decenas de megabytes).  Potencialmente, la soluci√≥n podr√≠a hacerse en C / C ++, pero con una cobertura tan espec√≠fica de las plataformas, las dificultades con la compilaci√≥n cruzada ir√≠an m√°s all√° del tiempo asignado para la tarea (y tuve que soportar el ensamblaje cruzado para Windows, Linux y MacOS en 64 y 32 bits opciones).  As√≠ que llam√© la atenci√≥n sobre el lenguaje Go, que est√° ganando popularidad, que en ese momento ya hab√≠a madurado bastante y era el √∫nico que, <strong>sin "bailar con una pandereta", proporciona toda la compilaci√≥n cruzada requerida de inmediato (!)</strong> . </p><a name="habracut"></a><br><p>  Un inconveniente que me molest√≥ mucho sobre Go (especialmente como desarrollador de Java) fue la poca consideraci√≥n de organizar la estructura de los proyectos de Go y la necesidad de ajustar constantemente el entorno.  Tal vez los desarrolladores de Go inicialmente planearon un uso espec√≠fico o hubo un enfoque en los contenedores, pero me acostumbr√© al "sabroso" y como mi herramienta principal en Java es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Maven</a> , decid√≠ hacer un complemento que haga llamadas a las utilidades y comandos GoSDK con la generaci√≥n autom√°tica de los necesarios. Variables de entorno. </p><br><p> No fue interesante hacer un complemento simple que llamara a la utilidad go, y decid√≠ ir desde el paso: instalar GoSDK en la plataforma host.  Inmediatamente despu√©s del inicio, se verifica la presencia de GoSDK en su directorio de configuraci√≥n (eleg√≠ la ruta predeterminada <code>~/.mvnGoLang</code> ) y, en ausencia de la versi√≥n requerida, el archivo GoSDK se descarga y desempaqueta autom√°ticamente del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio oficial</a> .  Esto nos permiti√≥ hacer proyectos port√°tiles de Go sin preocuparnos de si la herramienta de la versi√≥n requerida est√° preinstalada y configurada.  Por supuesto, con muchas configuraciones, prev√≠ la posibilidad de usar una versi√≥n preinstalada y configuraciones adicionales para todos los pasos en el proceso, ya que para muchos de estos problemas son cr√≠ticos, como deshabilitar la verificaci√≥n del certificado SSL o generalmente hacer solicitudes HTTP fuera (como para el proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Keycloak</a> ). </p><br><p>  El siguiente paso, envolv√≠ en los objetivos de Maven (objetivos) todos los comandos de utilidad go provistos en ese momento.  Como exist√≠a la posibilidad de que apareciera otro nuevo comando con la nueva versi√≥n de GoSDK, se agreg√≥ una tarea <code>custom</code> permite al usuario determinar el comando deseado por su cuenta.  Por defecto, en el marco de las fases de maven (fases), las tareas se ejecutan en el siguiente orden: </p><br><ul><li>  <strong>limpiar</strong> como <code>default-clean</code> en fase <em>limpia</em> </li><li>  <strong>arreglar</strong> como <strong>arreglo</strong> <code>default-fix</code> en la fase de <em>validaci√≥n</em> </li><li>  <strong>obtener</strong> como <code>default-get</code> en la fase de <em>inicializaci√≥n</em> </li><li>  <strong>generar</strong> como <code>default-generate</code> en la fase de <em>generar fuentes</em> </li><li>  <strong>fmt</strong> como <code>default-fmt</code> en la fase de <em>fuentes de proceso</em> </li><li>  <strong>prueba</strong> como <strong>prueba</strong> <code>default-test</code> en la fase de <em>prueba</em> </li><li>  <strong>compilar</strong> como <strong>compilaci√≥n</strong> <code>default-build</code> en la fase de <em>paquete</em> </li><li>  como instalaci√≥n <code>default-install</code> tarea interna <strong>mvninstall</strong> se <strong>ejecuta</strong> en la fase de <em>instalaci√≥n</em> </li><li>  <strong>instalar</strong> como <code>default-deploy</code> en la fase de <em>despliegue</em> </li></ul><br><p>  Cualquiera de los pasos b√°sicos se puede deshabilitar traduciendo la tarea a una fase inexistente: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>default-fix<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>none<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  En la implementaci√≥n interna, las tareas se dividieron en "trabajar con dependencias" y "no requerir resoluci√≥n de dependencia", despu√©s de la aparici√≥n de soporte para el modo m√≥dulo, la mayor√≠a migr√≥ a "trabajar con dependencias". </p><br><p>  La estructura del proyecto Go-maven, trat√© de acercarme a la estructura de carpetas est√°ndar aceptada para Go (es decir, <code>/src</code> y <code>/bin</code> en la ra√≠z del proyecto).  Pero dado que Maven est√° encarcelado por Java, no fue directamente posible "romper" su enfoque para organizar la estructura del proyecto y hacer que este paso sea invisible para el usuario, por lo que la configuraci√≥n b√°sica del complemento parece un poco inusual incluso para muchos familiarizados con maven: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> ```${basedir}/src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span>${basedir}/bin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.igormaznitsa<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-golang-wrapper<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.3.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goVersion</span></span></span><span class="hljs-tag">&gt;</span></span>1.12.9<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><blockquote>  <strong>ADVERTENCIA</strong>  Por alguna raz√≥n, el HabR puede mostrar incorrectamente la <code>&lt;sourceDirectory&gt;${basedir}/src&lt;/sourceDirectory&gt;</code> al formatear XML </blockquote><p>  Como puede ver, debe determinar directamente la carpeta de origen <code>/src</code> y la carpeta con el resultado <code>/bin</code> .  Por un lado, esta es una desventaja, por otro lado, la posibilidad de cambiar su ubicaci√≥n. </p><br><p>  El pom.xml minimalista completo para un proyecto de un solo m√≥dulo, a la Hello world, es el siguiente: </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.igormaznitsa<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-golang-helloworld<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0-SNAPSHOT<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-golang<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> ```${basedir}/src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span>${basedir}/bin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.igormaznitsa<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-golang-wrapper<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.3.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goVersion</span></span></span><span class="hljs-tag">&gt;</span></span>1.12.9<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Tenga en cuenta que el paquete del proyecto se designa como <strong>mvn-golang</strong> .  Esta configuraci√≥n es suficiente para compilar el archivo ejecutable y colocarlo en la carpeta bin resultante sobre la base de los textos fuente en la carpeta src.  Go build cache tambi√©n se crear√° en la <code>/bin</code> (como <code>/bin/.goBuildCache</code> por defecto) y se borrar√° con clean con esta carpeta temporal. </p><br><p>  En la fase de <em>instalaci√≥n</em> , se <code>mvninstall</code> tarea interna <code>mvninstall</code> , que simplemente empaqueta todo el proyecto en un archivo zip y lo coloca en el repositorio maven como un artefacto generado.  Inicialmente, solo almacen√© estos artefactos, pero a partir de la versi√≥n 2.3.2 se agreg√≥ un mecanismo para admitirlos como dependencias est√°ndar de Maven y se hizo posible desarrollar proyectos con c√≥digo com√∫n "compartido" a trav√©s del repositorio de Maven.  Est√° claro que poner los resultados binarios generados en el repositorio como artefactos es una mala idea debido a los requisitos multiplataforma y, por lo tanto, el contenido de la carpeta <code>/bin</code> no est√° empaquetado en el artefacto. </p><br><p>  Conectar otro proyecto con el <em>empaquetado</em> <code>mvn-golang</code> como una dependencia de <code>mvn-golang</code> parece a esto: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.igormaznitsa<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-go-test-mix-terminal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0-SNAPSHOT<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-golang<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Con la versi√≥n 2.3.3, se agreg√≥ soporte para trabajar con el mecanismo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Go</a> de los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">m√≥dulos</a> , pero por defecto no est√° activado (por compatibilidad con versiones anteriores) y se habilita utilizando el par√°metro de configuraci√≥n: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">moduleMode</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">moduleMode</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Cuando el mecanismo de los m√≥dulos Go todav√≠a estaba en la etapa experimental, agregu√© soporte para trabajar con versiones de dependencia a trav√©s de llamadas directas a las utilidades CVS, se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hizo un ejemplo de prueba</a> .  Pero ahora creo que dicho mecanismo ya no es de gran inter√©s y es m√°s rentable utilizar dependencias est√°ndar a trav√©s de m√≥dulos.  Adem√°s, el complemento puede preprocesar los archivos <code>go.mod</code> en el momento de construir el proyecto, reemplazando las rutas a las carpetas locales si el trabajo contin√∫a en el marco de un proyecto de varios m√≥dulos. </p><br><p>  Como Maven ofrece la posibilidad de estandarizar el uso de arquetipos, hice dos arquetipos: </p><br><ul><li>  <em>com.igormaznitsa: mvn-golang-hello: 2.3.3</em> para un arquetipo simple de m√≥dulo √∫nico </li><li>  <em>com.igormaznitsa: mvn-golang-hello-multi: 2.3.3</em> para un proyecto de varios m√≥dulos con c√≥digo fuente compartido </li></ul><br><p>  Un ejemplo de c√≥mo trabajar con el arquetipo de un proyecto de un solo m√≥dulo se puede ver en la animaci√≥n a continuaci√≥n. <br><img src="https://habrastorage.org/webt/xj/l4/as/xjl4ashjm59in1djzr0hvsjqqkg.gif" alt="imagen">  . </p><br><p>  Tambi√©n puede simplemente clonar el proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Hello World"</a> y jugar: </p><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/raydac/mvn-golang-example.git</code> </pre> <br><p><img src="https://habrastorage.org/webt/x6/d8/3f/x6d83f1hbq0ul2ewmrzgkdpg0eq.gif" alt="imagen"></p><br><p>  A menudo surge una pregunta razonable: ¬øpor qu√© todo esto es necesario y qu√© bonificaciones otorga el uso de Maven en el proceso de construcci√≥n de un proyecto Go?  Intentar√© responderlo punto por punto: </p><br><ol><li>  Maven es un entorno de desarrollo de proyectos multiplataforma muy maduro, compatible con casi todas las plataformas de CI, por ejemplo Jenkins, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">con Go2XUnit</a> puede convertir los resultados de las pruebas al formato que se muestra mediante los complementos de informes. </li><li>  Maven es multiplataforma y es compatible con todos los sistemas operativos, y se incluye en todos los repositorios.  La presencia de perfiles activados de forma flexible facilita la personalizaci√≥n del proceso para varias plataformas. </li><li>  Maven tiene una <strong>ENORME cantidad de complementos</strong> , lo que facilita obtener un efecto sin√©rgico, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">combinando Go y GWT</a> , conectando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ANTLR</a> al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">proyecto</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">generando Go basado en descriptores de Protobuf</a> e incluso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">agregando preprocesamiento</a> .  Todo esto se puede organizar manualmente a trav√©s de archivos por lotes, pero si hay complementos compatibles oficiales, entonces es m√°s rentable usarlos. </li><li>  El proyecto se vuelve f√°cilmente port√°til entre m√°quinas y plataformas, y el cambio de la versi√≥n GoSDK se realiza cambiando una l√≠nea. </li><li>  Facilidad para organizar proyectos de m√≥dulos m√∫ltiples, con la separaci√≥n del c√≥digo fuente a trav√©s del repositorio de Maven. </li><li>  La herramienta es familiar y familiar para los desarrolladores de Java, lo que facilita su adaptaci√≥n al cambiar al desarrollo en Golang o al desarrollar soluciones multiling√ºes de Go + Java. </li><li>  Existe la posibilidad de un pseudodesarrollo en Go en entornos compatibles con Maven, incluso si no tienen ning√∫n soporte para esta plataforma, por ejemplo, en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NetBeans IDE</a> . </li></ol><br><p>  El mayor inconveniente de la soluci√≥n, en mi opini√≥n, es uno aqu√≠: un n√∫mero limitado de desarrolladores familiarizados con Maven entre la comunidad de Golang.  Para aquellos que se cambiaron a Golang con C / C ++, est√° claro que es dif√≠cil encontrar algo m√°s cercano y m√°s caro, y nadie ha cancelado los sistemas "nativos" de Go-build.  Not√© que, por alguna raz√≥n, a muchos desarrolladores no les gusta mezclar plataformas. </p><br><p>  Entonces, mostr√© brevemente una de las formas de usar Maven al desarrollar proyectos Go usando el complemento mvn-golang-wrapper.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El proyecto de complemento est√° dise√±ado como un proyecto OSS y publicado en GitHub</a> .  Si alguien est√° interesado y lo usar√° en sus proyectos, no dude en hacer preguntas y "informar errores".  Intent√© hacer un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conjunto de ejemplos para diferentes ocasiones</a> (en las que se prueba el complemento), pero no puedo cubrir todo. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los casos de prueba</a> en el proyecto de complemento usan la versi√≥n de desarrollo, por lo que si desea construirlos localmente despu√©s de clonar el proyecto, primero debe construir la versi√≥n de desarrollo del complemento utilizando el comando en el directorio ra√≠z del proyecto: </p><br><pre> <code class="bash hljs">mvn install</code> </pre> <br><p>  despu√©s de lo cual, puede <code>mvn-golang-examples</code> cualquier <code>mvn-golang-examples</code> y construirlo con </p><br><pre> <code class="bash hljs">mvn clean install</code> </pre> <br><p>  Tambi√©n puede comenzar a construir todos los ejemplos desde la ra√≠z del proyecto, utilizando </p><br><pre> <code class="bash hljs">mvn clean install -Pexamples</code> </pre> <br><p>  El complemento admite el ensamblaje de proyectos de subprocesos m√∫ltiples y puede acelerarse utilizando el argumento correspondiente, dividi√©ndose, por ejemplo, en 6 hilos </p><br><pre> <code class="bash hljs">mvn clean install -Pexamples -T6</code> </pre> <br><p>  Durante el desarrollo, el proyecto ha acumulado una cantidad decente de "campanas y silbatos", que decid√≠ no cubrir en este breve art√≠culo.  Puede encontrar informaci√≥n sobre los par√°metros con peque√±os ejemplos de configuraci√≥n en el mapa mental de este complemento (el archivo fuente en formato <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SciaReto</a> est√° <a href="">aqu√≠</a> ): </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ro/yo/qr/royoqrdlvvlrwvjyiey5yigtnec.jpeg" alt="imagen"></a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465803/">https://habr.com/ru/post/465803/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465791/index.html">Vulnerabilidades de los minoristas: tres casos en los que se pudo obtener OTP en la solicitud</a></li>
<li><a href="../465793/index.html">Frontend Weekly Digest (26 de agosto - 1 de septiembre de 2019)</a></li>
<li><a href="../465795/index.html">El resumen de materiales frescos del mundo del front-end para la √∫ltima semana No. 378 (26 de agosto - 1 de septiembre de 2019)</a></li>
<li><a href="../465797/index.html">Algoritmos gen√©ticos (o el cliente siempre es el rey, y a menudo un tonto)</a></li>
<li><a href="../465801/index.html">Food Design Digest, agosto de 2019</a></li>
<li><a href="../465805/index.html">Gigatron: una microcomputadora casera sin procesador</a></li>
<li><a href="../465807/index.html">La historia de c√≥mo la popular biblioteca de JavaScript comenz√≥ a mostrar anuncios en el terminal</a></li>
<li><a href="../465809/index.html">No caigas en la trampa de la optimizaci√≥n prematura</a></li>
<li><a href="../465811/index.html">14 consejos para escribir c√≥digo de React limpio. Parte 1</a></li>
<li><a href="../465813/index.html">14 consejos para escribir c√≥digo de React limpio. Parte 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>