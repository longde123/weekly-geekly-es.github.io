<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêÜ üë©üèº‚Äçüîß üåã Tiempo para el primer byte: qu√© es y por qu√© es importante üàÅ üôÄ üßëüèæ‚Äçü§ù‚Äçüßëüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ahora estoy trabajando en un proyecto para un cliente. Este es un sitio de comercio electr√≥nico, por lo que estoy muy interesado en algunos aspectos d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tiempo para el primer byte: qu√© es y por qu√© es importante</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/470868/">  Ahora estoy trabajando en un proyecto para un cliente.  Este es un sitio de comercio electr√≥nico, por lo que estoy muy interesado en algunos aspectos del rendimiento.  Para empezar, estos son varios indicadores que caracterizan el tiempo de carga de un sitio.  A continuaci√≥n, este es el momento de inicio de la presentaci√≥n de la p√°gina, lo cual es importante para aquellos visitantes que, despu√©s de ingresar al sitio, desean ver su contenido lo m√°s r√°pido posible (naturalmente, todos los visitantes del sitio entran en esta categor√≠a).  Entre los indicadores de rendimiento que me interesan est√°n aquellos que reflejan los detalles de las actividades de mi cliente.  Por ejemplo: "¬øQu√© tan r√°pido se carga la imagen principal del producto?"  Un an√°lisis de todos estos indicadores puede proporcionar informaci√≥n valiosa sobre el estado del proyecto. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/tq/4b/8i/tq4b8ifmpqelzhiw5uzboghocp8.jpeg"></a> <br><br>  Sin embargo, hay un indicador que, como parece, los desarrolladores front-end a menudo no prestan suficiente atenci√≥n.  Ya es hora del primer byte (Tiempo hasta el primer byte, TTFB).  Puede comprender esto, puede perdonar a los desarrolladores, y al menos parcialmente, esta actitud hacia TTFB, especialmente teniendo en cuenta el hecho de que ven este indicador como algo que depende solo del back-end de los proyectos.  Pero si tratamos de expresar literalmente brevemente el problema con respecto a este indicador, entonces podemos decir lo siguiente: "Aunque un buen valor TTFB no necesariamente significa que el sitio web que demuestra que se puede considerar r√°pido, un indicador TTFB pobre casi seguro indica problemas con el rendimiento del proyecto". <br><a name="habracut"></a><br>  Incluso si tenemos en cuenta el hecho de que el desarrollador front-end puede estar en una posici√≥n en la que no puede influir de forma independiente en el backend y TTFB, es importante tener en cuenta el hecho de que los valores altos de TTFB pueden afectar significativamente el rendimiento del sitio.  Como resultado, los esfuerzos de un desarrollador front-end que lucha por la velocidad del sitio web se parecer√°n a un juego de recuperaci√≥n.  Esto se aplica, por ejemplo, a la optimizaci√≥n de im√°genes y a minimizar el volumen de materiales que conforman las secciones m√°s importantes del proyecto, y a la descarga asincr√≥nica de fuentes web.  Esto no quiere decir que, sabiendo esto, puede renunciar y abandonar las optimizaciones de front-end.  Pero si el TTFB es demasiado alto, entonces todas esas optimizaciones recuerdan tratar de solucionar un problema en condiciones en las que ya ha hecho da√±o y cuando es demasiado tarde para solucionarlo.  De hecho, es por eso que es muy importante para aquellos que est√°n desarrollando el front-end monitorear de cerca el indicador TTFB, y es muy importante, cuando sus valores son demasiado altos, tomar medidas para mejorarlo. <br><br><h2>  <font color="#3AC1EF">¬øQu√© es el TTFB?</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/620/d0b/fe1/620d0bfe1034ff0d0c565f459ad2aa79.png"></div><br>  <i><font color="#999999">TTFB no parece muy informativo ( <a href="">imagen a tama√±o completo</a> )</font></i> <br><br>  TTFB es un indicador que se ve, por decirlo suavemente, opaco.  Tanto est√° influenciado por √©l que tengo la sensaci√≥n de que estamos todo el tiempo simplemente ignorando su an√°lisis serio.  Muchos especulan que TTFB es solo el tiempo que le toma al servidor preparar una respuesta, pero de hecho, es solo una peque√±a parte de lo que afecta a TTFB. <br><br>  Lo primero que me gustar√≠a llamar su atenci√≥n es que al aprender lo que la gente suele sorprender.  Estamos hablando del hecho de que TTFB incluye el tiempo que la solicitud del cliente pasa por la red al servidor y el tiempo que tarda la ruta de respuesta del servidor al cliente.  Este es el llamado "tiempo de ida y vuelta" (Tiempo de ida y vuelta, RTT).  TTFB no es solo un tiempo que el servidor dedica a preparar una respuesta.  Tambi√©n es el tiempo que se dedica a la forma en que los datos van de cliente a servidor y de servidor a cliente (estos datos, por supuesto, contienen el "primer byte" que nos interesa). <br><br>  Ahora, armados con este conocimiento, podemos entender f√°cilmente la raz√≥n por la cual cuando se visualizan sitios desde dispositivos m√≥viles, el indicador TTFB a menudo es simplemente indecentemente grande.  Es muy posible que antes, en tales situaciones, hubiera preguntado algo como esto: "Estoy seguro de que el servidor no sabe que estoy viendo el sitio desde un dispositivo m√≥vil.  ¬øC√≥mo entonces aumenta TTFB?  La raz√≥n de esto es que, por regla general, las conexiones de red m√≥vil son conexiones de alta latencia.  Si el indicador RTT, que refleja el tiempo requerido para que los datos viajen desde el tel√©fono al servidor y viceversa, es, por ejemplo, 250 ms, entonces TTFB aumentar√° en el valor correspondiente. <br><br>  Si quisiera que los lectores de este material sacaran solo una idea importante de √©l, entonces formular√≠a esta idea de la siguiente manera: "Los retrasos en la red afectan a TTFB". <br><br>  ¬øQu√© m√°s afecta a TTFB?  De hecho, mucho de todo.  Aqu√≠ hay una lista lejos de ser completa de lo que contribuye a la formaci√≥n de este indicador.  Los elementos de esta lista est√°n en orden aleatorio. <br><br><ul><li>  <b>Retrasos en la red.</b>  Como ya se mencion√≥, TTFB incluye el tiempo que lleva entregar una solicitud al servidor y devolver una respuesta del servidor.  Tome, por ejemplo, el tiempo requerido para una sesi√≥n de intercambio de datos entre un dispositivo ubicado en Londres y un servidor ubicado en Nueva York.  Idealmente, cuando se usa una conexi√≥n de fibra √≥ptica, esto es 28 ms.  Pero esto se basa en muchos supuestos muy optimistas.  En realidad, debe esperar algo as√≠ como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">75 ms</a> .  Por eso es tan importante usar CDN.  Incluso ahora, en la era de Internet, la proximidad geogr√°fica de un determinado negocio y sus clientes es una ventaja. </li><li>  <b>Enrutamiento</b>  Si usa CDN (¬°y deber√≠a ser as√≠!), Entonces la solicitud de su cliente, por ejemplo, de Leeds, puede ser redirigida al centro de datos MAN solo para que resulte que el recurso que el cliente necesita no est√° en la cach√© de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PoP</a> correspondiente .  Luego, la solicitud ser√° redirigida al servidor real con sus materiales para transmitir al cliente lo que necesita.  Si este servidor est√° ubicado, por ejemplo, en Virginia, entonces todo lo anterior conducir√° a un aumento serio en TTFB sin raz√≥n aparente. </li><li>  <b>Trabaja con archivos.</b>  Incluso si el servidor simplemente lee datos est√°ticos de su sistema de archivos, como im√°genes o archivos de estilo, lleva alg√∫n tiempo completar esta operaci√≥n.  Esta vez tambi√©n es parte de TTFB. </li><li>  <b>Priorizaci√≥n</b>  El protocolo HTTP / 2 tiene mecanismos para priorizar el procesamiento de solicitudes.  Como resultado, puede resultar que las solicitudes de baja prioridad se retrasen en el servidor, dando lugar a solicitudes de alta prioridad.  Incluso si no tiene en cuenta los mecanismos de priorizaci√≥n de HTTP / 2 y asume que todo funciona sin problemas, estos retrasos esperados pueden contribuir a TTFB. </li><li>  <b>Ejecutando aplicaciones.</b>  Esto, de hecho, es bastante obvio, pero me gustar√≠a se√±alar que el tiempo requerido para ejecutar las aplicaciones del servidor afecta seriamente a TTFB. </li><li>  <b>Consultas de bases de datos.</b>  Si necesita solicitar algo de la base de datos para formar la p√°gina, el tiempo para completar dicha operaci√≥n tambi√©n se incluir√° en TTFB. </li><li>  <b>Llamadas a la API</b>  Si se necesitan datos de ciertas API (internas o externas) para preparar la p√°gina, las llamadas a estas API afectar√°n a TTFB. </li><li>  <b>Representaci√≥n del servidor</b>  Es bastante obvio que la representaci√≥n del lado del servidor lleva tiempo, esta vez es f√°cil de evaluar, pero esto no niega la contribuci√≥n de esta operaci√≥n a TTFB. </li><li>  <b>Alojamiento barato</b>  Si usa un alojamiento barato, tratando de ahorrar tanto como sea posible y sacrificando el rendimiento, esto generalmente significa que varios otros proyectos usan el servidor en el que se encuentra su proyecto.  Quiz√°s una cantidad considerable.  Como resultado, alguien que utiliza un alojamiento barato puede esperar una ca√≠da en el rendimiento del servidor, lo que puede afectar la capacidad del proyecto para procesar solicitudes.  De hecho, estamos hablando del hecho de que la potencia del hardware del servidor no es suficiente para satisfacer las necesidades de la aplicaci√≥n. </li><li>  <b>Ataques DDoS, alta carga en el proyecto.</b>  Aqu√≠ continuamos el tema discutido en el p√°rrafo anterior de esta lista.  Es decir, si la carga en el servidor crece y el proyecto no proporciona un escalado flexible de las capacidades del servidor, esto lleva al hecho de que el equipo comienza a funcionar al l√≠mite.  Y, como resultado, el rendimiento de la aplicaci√≥n cae. </li><li>  <b>WAF, equilibradores de carga.</b>  Los servicios, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">WAF</a> o equilibradores de carga ubicados frente a la aplicaci√≥n del servidor, aumentan el TTFB. </li><li>  <b>Algunas caracter√≠sticas de CDN.</b>  El uso de CDN es un factor que ciertamente tiene un efecto beneficioso en TTFB, pero algunas caracter√≠sticas de CDN pueden empeorarlo.  Por ejemplo, esto es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">plegado de solicitud</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ESI</a> , etc. </li><li>  <b>Retrasos en la "√∫ltima milla".</b>  Cuando hablamos de una computadora de Londres que accede a un servidor ubicado en Nueva York, generalmente simplificamos demasiado la situaci√≥n, casi reduci√©ndola al hecho de que la computadora y el servidor est√°n directamente conectados entre s√≠.  Pero en realidad, todo es mucho m√°s complicado.  La se√±al entre la computadora y el servidor pasa por muchos intermediarios.  Nuestro enrutador lo env√≠a al proveedor;  desde una red inal√°mbrica, se mete en un cable tendido en el fondo del oc√©ano ... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los retrasos en la "√∫ltima milla"</a> incluyen todas las dificultades que se interponen en el camino de la transferencia de datos entre dispositivos finales. </li></ul><br>  Un TTFB de 0 ms es un sue√±o imposible.  Por lo tanto, es importante tener en cuenta que no hay nada en la lista que siempre afecte negativamente a TTFB o que empeore este indicador.  Esta lista se entiende mejor como una descripci√≥n de la estructura TTFB de un proyecto.  Mi objetivo no es criticar ciertas tecnolog√≠as, sino mostrar c√≥mo ciertas tecnolog√≠as pueden influir en TTFB.  Y, para ser sincero, dada la cantidad de cosas que suceden antes de que el cliente reciba el primer byte de la respuesta del servidor, ya es sorprendente que los sitios se est√©n cargando en general. <br><br><h2>  <font color="#3AC1EF">Descubriendo el misterio con TTFB</font> </h2><br>  Ahora, con suerte, TTFB ya no se ve tan misterioso.  Y si dedica un poco de tiempo a la implementaci√≥n de API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Server Timing</a> , puede comenzar a medir los indicadores de tiempo del servidor y enviarlos a los sistemas del cliente.  Esto permitir√° a los desarrolladores web detectar y eliminar posibles cuellos de botella en el rendimiento que antes estaban ocultos a sus ojos. <br><br>  La API de sincronizaci√≥n del servidor permite a los desarrolladores ampliar las respuestas de las consultas con el encabezado HTTP de <code>Server-Timing</code> opcional.  Contiene informaci√≥n de tiempo medida por la propia aplicaci√≥n. <br><br>  Fue este mecanismo el que utilizamos el a√±o pasado cuando trabajamos en el iPlayer de la BBC. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/573/4b1/63e/5734b163e8c49e7bd6729537f37a2866.png"></div><br>  <i><font color="#999999">Se puede agregar un nuevo encabezado de temporizaci√≥n del servidor a cualquier respuesta ( <a href="">imagen a tama√±o completo</a></font></i> ) <br><br>  Tenga en cuenta que la sincronizaci√≥n del servidor tambi√©n ejerce presi√≥n sobre el sistema.  En el curso de su trabajo, debe medir los indicadores relevantes y completar el encabezado <code>Server-Timing</code> .  El navegador solo permite que el desarrollador front-end vea estos datos utilizando las herramientas apropiadas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/503/a38/b0c/503a38b0cb82096726135107e593fb25.png"></div><br>  <i><font color="#999999">Ahora, directamente en el navegador, puede ver la estructura TTFB ( <a href="">imagen a tama√±o completo</a> )</font></i> <br><br>  Si desea implementar la API de sincronizaci√≥n del servidor, eche un vistazo a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este material</a> . <br><br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  Es muy importante que los desarrolladores web comprendan en qu√© medida TTFB afecta lo que llaman "rendimiento del sitio".  El tiempo para el primer byte es un cierto borde, despu√©s de cruzar, podemos hablar sobre la optimizaci√≥n del sitio web.  Cuanto m√°s bajo sea este indicador, mejor. <br><br>  <b>Estimados lectores!</b>  ¬øOptimizas tus proyectos web con TTFB? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/470868/">https://habr.com/ru/post/470868/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../470844/index.html">El nuevo proyecto de los hermanos Durov: Telegram Open Network</a></li>
<li><a href="../470852/index.html">Procesando 40 TB de c√≥digo de 10 millones de proyectos en un servidor dedicado con Go por $ 100</a></li>
<li><a href="../470856/index.html">Telegram GRAM Wallet: t√©rminos de servicio</a></li>
<li><a href="../470858/index.html">Antig√ºedades: punto de referencia del 386 ¬∞ procesador y de los elegantes noventa</a></li>
<li><a href="../470864/index.html">Sobre las delicias de cambiar al panel y no solo</a></li>
<li><a href="../470870/index.html">Precarga de fuentes</a></li>
<li><a href="../470872/index.html">M√©tricas de rendimiento para investigar aplicaciones web incre√≠blemente r√°pidas</a></li>
<li><a href="../470874/index.html">Optimizando la carga de JavaScript en Wikipedia</a></li>
<li><a href="../470876/index.html">Cree construcciones de sintaxis JavaScript personalizadas con Babel. Parte 1</a></li>
<li><a href="../470878/index.html">Cree construcciones de sintaxis JavaScript personalizadas con Babel. Parte 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>