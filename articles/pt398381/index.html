<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧘🏿 🚧 ☝️ Protótipo do robô de lapso de tempo do Arduino 🙆🏾 💘 ☘️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo descreve a criação de uma plataforma móvel programável com protótipo com vários graus de liberdade para tirar fotos com uma câmera SLR - p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Protótipo do robô de lapso de tempo do Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/398381/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este artigo descreve a criação de uma plataforma móvel programável com protótipo com vários graus de liberdade para tirar fotos com uma câmera SLR - para a instalação subsequente de vídeo com lapso de tempo. </font><font style="vertical-align: inherit;">Recomenda-se que eles não entendam nada em eletrônicos e microcontroladores, "desenvolvedores profissionais" de soluções no Arduino e seus vendedores, não há nada útil aqui.</font></font><br>
<br>
<img src="http://kharin.com/4dof/index.files/0.jpg" alt="imagem"><br>
 <a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumidamente, por que eu precisava disso</font></font></b><div class="spoiler_text">    .      ,           —        .<br>
<br>
         .            .   ,        PCMCIA-,      -? ,   ,      WiFi ,   -?   .  ,  .<br>
      ,         .     —  -,         .           .                —   -. ,   ,            //,    ,       .      .<br>
,     ,     .  -   .   .          ---  (360°  24  ;) ).        —          .     ,    .     .     .         GoPro.       -    — ,  .   —    ,              . ,   !   , .  ,      timelapse dolly     .<br>
     .<br>
<br>
     , , ,           . ,  ,     ,     —         .      ,              .       .     ,   .    ,      ,      ,  -   .<br>
<br>
      .      ?</div></div><br>
<img src="http://kharin.com/4dof/index.files/image002.jpg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez nem todos imaginem as capacidades dos microcontroladores mais simples. Especialmente mal possuído por pessoas de "profissões criativas". Designers, fotógrafos, cinegrafistas - eles frequentemente aprendem o “processo” e mantêm opiniões conservadoras sobre o assunto de sua profissão, não querendo mudar nada. Especialmente quando o movimento para o lado (não necessariamente esse movimento para a frente) está associado a esforços notáveis ​​para estudar algo novo, que não é necessariamente útil na atividade principal. Diga, bem, por que eu preciso disso? É melhor ir tirar outra garota nua. Obviamente, esse negócio raramente incomoda ninguém. E mesmo que as pessoas pensem em se mover de lado, geralmente podem pagar apenas. Por que construir um pedaço de ferro se você pode comprar um pedaço de ferro?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas se não há nada para comprar um pedaço de ferro, além disso, ele nunca será recompensado e você só quer brincar com a ideia? Se considerarmos os microcontroladores como um substituto para o Tanchiki, capaz de emitir algo interessante IRL? Então, apenas se motive e dê um passo. De repente, verifica-se que, mesmo para um fotógrafo (doravante referido como usuário de robô, ele é chamado de fotógrafo, embora faça vídeos com ele. A vida é uma coisa estranha), tudo não parece tão assustador e complicado. Especialmente se você permanecer nesse nível muito alto de joelhos de brinquedo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para mim, a motivação para aprofundar foi o desejo de construir uma plataforma móvel para minha DSLR. O vídeo com lapso de tempo pode ser significativamente animado e tornado mais interessante pelo movimento do ponto de disparo. Como movimento sequencial simples, como movimento panorâmico e combinação desses e de outros movimentos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consequentemente, para mim, a tarefa foi formulada da seguinte maneira - fornecer vários graus de liberdade para uma câmera SLR pesada - com a precisão e a estabilidade do movimento necessárias para o lapso de tempo. E, claro, filmagem totalmente automatizada. E tudo com pouco sangue, isto é, uma pequena quantidade de rublos e um gasto de tempo tolerável. Ou seja, o mais rápido possível. E assim nasceu o meu projeto 4DOF Timelapse Robot. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apenas dê um passo. E então, para aqueles que nunca se envolveram na programação e montagem de dispositivos eletrônicos, um mundo maravilhoso e atencioso se abre. Onde pisou torna-se o mestre de perspectivas ilimitadas. Você pode fazer isso? Você pode. E então? Você pode. E eu quero - posso? Sim, é possível, veja como é feito ... O </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
texto deste texto de</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comentários sobre o jogo no programador do microcontrolador</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (sim, você leu certo - eles até jogam!):</font></font><br>
<br>
<blockquote>     avr  35      :  (      ) ,  ,    ,  8- ,     16- ,  ,      ( , , /,    wdt),     -,     8 ,       ,    ( ,    —      ,    !),   ,    ,        — , ,    0  1,  -,       ,       .    —   .<br>
<br>
     ,   !        ,   , ,  ,     .    .    —  //-    .<br>
<br>
    ,    — :<br>
<br>
      ,     ,      .             —           .     ,         ,        ,      .<br>
<br>
            ,     ,   (  -   5  ),     .   :    ,    (     ),    ,  , ,    .       .         —         ,    .<br>
<br>
      ,       .    ,   ,  , ,    —    :    35            , ,   ,   -   .<br>
<br>
   avr'   , ,    10 ,    stm'    arm',           ,      —  arm'       .<br>
<br>
  —    !        .<br>
<br>
  —      ,     ,   -  ,   ,        .        ,    ,    ,  ,        ,       ...</blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para os neófitos, o universo mais anunciado do Arduino parece ser o mais atraente e facilmente acessível. Isso pode ser tratado de maneiras diferentes, mas não se pode deixar de admitir - é a disponibilidade e a prevalência de soluções baseadas em todos os tipos de variações do atmega328 que permitem que um neófito alcance facilmente resultados toleráveis, sem entender muitos detalhes do microcontrolador e sua comunicação com os periféricos. Noob não vai entender nada de como funciona por dentro, mas a nave funcionará e se moverá de acordo com seus desejos, e é o mesmo que os chineses fizeram por mais tempo por mais tempo e imprimiram um milhão de cópias. Sim, mesmo que seja uma repetição do caminho percorrido por milhares de outras pessoas - ainda é um prazer a implementação independente da tarefa. Por que coletar Lego de acordo com as instruções - afinal, outros já coletaram? Prazer.Por que fotografar galáxias com uma técnica extremamente simples se houver um Hubble? Prazer. Por que montar um carrinho sobre rodas com controle remoto, se a loja possui centenas deles em lindas caixas? Prazer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É assim que devemos abordar o Arduino - vamos nos divertir e o fato de comerciantes chineses, italianos e locais empreendedores ganharem dinheiro conosco ao mesmo tempo - bem, você tem que pagar pelo prazer! Bem, e os profissionais da eletrônica podem cuspir corretamente na direção do artesanato do Arduino e ainda mais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, neste artigo, desfrutamos do prazer sem precedentes - nossa DSLR dirige por si só e grava quadros em uma determinada frequência, enquanto nós, satisfeitos, tomamos café e lemos os geeks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que queremos do artesanato: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Controle da câmera - realizando na câmera a exposição que definimos e mantendo a pausa desejada entre os quadros; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Movendo-se para uma distância arbitrária - sem os requisitos de uma longa instalação ou preparação da base;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Rotação da câmera esquerda-direita com passo arbitrário; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Gire a câmera para cima e para baixo com uma etapa arbitrária; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- A rotação do anel de zoom ou o foco da lente - é claro, o mesmo com a intensidade que escolhemos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse conjunto de recursos implica grande liberdade criativa ao gravar vídeos com lapso de tempo. Você pode resolver quase qualquer problema - combinando o movimento da câmera em diferentes proporções e controlando a pausa na velocidade do obturador. Somente o controle arbitrário da exposição, dependendo da iluminação, permanece indisponível - aqui você pode confiar apenas no programa do medidor de exposição da câmera ou limitar-se a um pequeno espaço. Todo mundo que fotografa o tempo passa de manhã e à noite entende perfeitamente a rapidez com que as condições de iluminação mudam.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, até agora, a rotação da câmera para cima e para baixo também não foi implementada - bem, em relação ao chassi. Ainda não consigo imaginar de que maneira conseguir isso nas dimensões do meu protótipo. Até agora, você tem a ver com o ângulo de elevação da câmera definido inicialmente ao montá-la - e a diferença da posição horizontal torna impossível controlar o foco do zoom.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O primeiro problema é a questão - em que mover a câmera? O espelho é uma coisa pesada. Começa a busca por um compromisso - você não deseja carregar a gravidade como um carro elétrico infantil e que a câmera seja estável e não supere o peso devido ao alto centro de gravidade. Fotógrafos com brinquedos GoPro podem muito bem estar satisfeitos com carros de quatro rodas. Para minha DSLR, eu gostaria de algo mais estável. Tendo estudado o problema e as soluções existentes, decidi pela plataforma rastreada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plataformas rastreadas especializadas e prontas custam uma quantia incômoda. Era mais sensato usar um brinquedo para nosso propósito. Como a família já tem um tanque controlado por rádio (Leopard 1:20), a primeira coisa que eu olhei em sua direção. Mas tornou-se uma pena - deixe-o continuar andando e cuspindo bolas para a alegria das crianças. O que mais você pode comprar e desmontar de forma rápida e barata? Bisbilhotando Avito descobriu que os tanques são muito pequenos ou caros. Mas há crianças pouco exigidas e, portanto, não são tão caras, mas não são de forma alguma inferiores aos meus propósitos escavadeiras. Mas, por sorte, na minha cidade não havia nada adequado à venda. Encomendar por correio? Talvez então ver os chineses? Então eu vim para o site do "negociante de robôs" Ning, também </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">conhecido</font></a><font style="vertical-align: inherit;"> como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SINONING</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Você quer um chassi "tanque" de alumínio por US $ 138 - não há problema! </font><font style="vertical-align: inherit;">Você quer o mesmo tamanho, mas todo o chassi de "escavadeira" de plástico por trinta anos? </font><font style="vertical-align: inherit;">Por favor! </font><font style="vertical-align: inherit;">Absolutamente ganancioso? </font><font style="vertical-align: inherit;">Aqui você tem um chassi de tanque por US $ 14 e até com um motor. </font><font style="vertical-align: inherit;">Você também pode comprar arduinki lá, mas eu tenho muitas dessas coisas na cidade, então um chassi de plástico barato SN1000 foi para mim dos chineses. </font></font><br>
<br>
<img src="https://www.sinoning.com/pub/media/catalog/product/cache/1/image/700x560/e9c3970ab036de70892d86c6d221abfe/l/o/logo1303_2.jpg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o arduino, aproveitei as ofertas da Make Robots ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://vk.com/makerobot66</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), onde foi comprado o seguinte lixo usado neste projeto:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DCcduino UNO (com cabo USB) ... 480 x 1 = 480</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Módulo GY-273 HMC5883L ... 170 x 1 = 170</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kit Inicial Arduino ... 480 x 1 = 480</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Módulo de relé de 1 canal 5V ... 180 x 1 = 180</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LCD 2004 I2C azul ... 610 x 1 = 610</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blindagem de acionamento do motor L293D ... 360 x 1 = 360</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Módulo de joystick KY-023 ... 170 x 1 = 170</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Correia dentada GT2 6mm ... 120 x 1 = 120</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Polia de sincronização GT2 16t 6mm ... 140 x 1 = 140</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10pcs fios de salto de 30cm 1f1f ... 55 x 1 = 55</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10pcs fios de salto de 30cm 1m1f ... 55 x 1 = 55</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28BYJ-48 Motor de passo + driver ULN2003 ... 260 x 1 = 260</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suporte da bateria 18650 x2 ... 60 x 1 = 60</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total 3140 esfregar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além disso, era necessário:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">duas baterias 18650</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compensado laminado fino de fibra de madeira.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um monte de parafusos e porcas M4</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seis parafusos 3,5x51 tipo de como.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 buchas M5 e 2 M8 - assim como espaçadores.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alguns detalhes do construtor "mecânico".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interruptor de solda</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soquete de jack de solda de 3,5 mm</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tomada 2.1x5.5</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e clipe de papel</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do lado do equipamento fotográfico, eles foram úteis: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- um DSLR </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- um controle remoto "sem fio" chinês - como um doador do cabo para conectar ao conector do controle remoto da câmera </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- a montagem mais simples da câmera a partir de um parafuso de tripé com espaçadores. Uma cabeça de tripé normal seria muito melhor, mas o menos seria um centro de gravidade mais alto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não houve muito barulho por parte da mecânica. O SN1000 resultante possui dois motores DC de "tamanho 130" para acionar as esteiras, e outro motor DC é instalado na caixa de engrenagens para girar a plataforma neste chassi de esteira. Tudo é coletado. Então, está tudo pronto. Resta apenas consertar a câmera e os eletrônicos na plataforma. A solução tradicional que vi foi colocar lixo eletrônico no chassi sob o avião no qual a carga útil ou os controles são colocados. O plano é separado do chassi por espaçadores da altura desejada. Alguns conseguem construir vários andares. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, eu serrei o compensado, perfurei os furos nele, comprei buchas e parafusos - está tudo pronto. Não há nada complicado nisso, mesmo para um fotógrafo. O chassi da “escavadeira” fornece rigidez suficiente da plataforma e dos pontos de fixação.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com a eletrônica, o aborrecimento é mais, mas é notavelmente mais divertido. Não, realmente, isso é muito divertido. Mas não é difícil. Apesar de uma educação muito especializada, eu não entendo eletrônica, a lei de Ohm não ricocheteia, programei C pela última vez há doze anos e tarefas puramente educacionais, sem vendas e realmente não sei como trabalhar com as mãos. Mas não tão assustador. Mesmo um programador tão ruim quanto eu, completamente familiarizado com os componentes eletrônicos usados, foi capaz de lançar algo de forma rápida e fácil. Além disso, a maneira de piscar um LED para resolver tarefas é muito rápida e fácil - graças aos inúmeros recursos da web do arduino, onde tudo é mastigado até códigos e fotos comentados com facilidade com troca. Também existem bons livros (às vezes até em língua russa),onde os recursos mais populares da plataforma Arduino são consistentes e razoavelmente acessíveis. Assim, depois de engolir vários livros e salvar uma dúzia de marcadores nos navegadores em busca de soluções interessantes, rapidamente escrevi e depurei o programa (esboço) do projeto para o Arduino em apenas alguns dias. Também não há muito barulho com o ferro de soldar e tudo isso se limita a soldar puramente a fiação ao cachecol ou ao interruptor. Acabou feio, é claro, mas funciona muito bem no joelho. Para um fotógrafo, o perfeccionismo da solda ou de um programa é significativo apenas quando a falta deles interfere na realização de seus objetivos.em apenas alguns dias, ele escreveu e depurou o programa (esboço) do projeto para o Arduino. Também não há muito barulho com o ferro de soldar e tudo isso se limita a soldar puramente a fiação ao cachecol ou ao interruptor. Acabou feio, é claro, mas funciona muito bem no joelho. Para um fotógrafo, o perfeccionismo da solda ou de um programa é significativo apenas quando a falta deles interfere na realização de seus objetivos.em apenas alguns dias, ele escreveu e depurou o programa (esboço) do projeto para o Arduino. Também não há muito barulho com o ferro de soldar e tudo isso se limita a soldar puramente a fiação ao cachecol ou ao interruptor. Acabou feio, é claro, mas funciona muito bem no joelho. Para um fotógrafo, o perfeccionismo da solda ou de um programa é significativo apenas quando a falta deles interfere na realização de seus objetivos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos voltar mais uma vez à lista de componentes - comentarei o propósito e a interação entre eles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O cérebro do protótipo é o DCcduino UNO. Este é um clássico Arduino UNO R3 na implementação chinesa. Noto, de forma alguma inferior ao original. Existe o mesmo Atmega328P com sua ligação, exceto que o driver da porta serial virtual para USB requer um diferente, mas facilmente encontrado (chip CH340), e no Win8 parece estar completo. Esse arduinka costuma ser o primeiro e o mais simples que escolhe noobs e eu não fui exceção. E, você sabe, foi o suficiente para mim. I.e. surgiram tensões com recursos, mas, no entanto, meu microcontrolador de 8 bits simples era mais do que capaz de cumprir minhas tarefas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O cérebro controla os motores através de outro xale, o chamado “Blindagem” - de uma placa inserida nos conectores do arduino em que uma carga útil é aplicada e soldada. Isso deve ser diferenciado de apenas um "módulo". “Módulos” - uma solução pronta com toda a fiação e componentes soldados - são conectados ao arduino por meio de fios inseridos nos conectores do arduino, às vezes com um intermediário na forma de uma tábua de pão sem solda. E a “blindagem” é um “módulo” instalado no topo do arduino, já que este possui tamanho e posição padronizados dos conectores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No meu caso, achei necessário comprar o Motor Drive Shield L293D - este é um módulo para controlar quatro motores de corrente contínua (ou dois motores de passo) com correntes de até 600mA para cada motor de corrente contínua. Simplificando, para carros pequenos serve. Para os motores do meu chassi, os chineses prescreviam corrente de estol de 800mA - o consumo máximo do motor, então sugeri que eu tivesse o suficiente. Um pouco errado. Agora, prefiro escolher o Adafruit Motor Shield V2 - esse cachecol é muito mais adequado à tarefa e libera muitos recursos que minha primeira versão seleciona. Não há falta de corrente - com a primeira placa, isso também é resolvido com a instalação de outro gêmeo em cima de cada chip L293D ou, em geral, substituindo-os por um chip de fiação semelhante SN754410. Também chamo a atenção para o fato de que os motores devem ser classificados para 6V ou mais. Os chineses dizemque eu tenho motores de 6V e tenho preguiça de subir para verificar. Porque os motores de 3V também funcionarão, mas não por muito tempo. De qualquer forma, eles são de tamanho padrão e são fáceis de alterar. A propósito, você diz a si mesmo que, antes do início da confusão com o projeto, eu não tinha ideia do que foi escrito acima, mas tudo isso é facilmente encontrado, dominado e aplicado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O "escudo" está conectado à energia de todo o sistema. A partir dele são alimentados e motores e arduinka e outras cintas. A energia deste projeto são duas baterias Li-Ion 18650, produzindo cerca de 7,4V com uma corrente de até 3A (talvez mais, mas não irei verificar melhor). Como fonte de alimentação de backup, a saída para uma fonte de alimentação externa através do conector 2.1x5.5mm também é soldada no comutador. Obviamente, não se esqueça de remover as baterias antes de conectar uma fonte externa, pois nada de bom será de uso paralelo. Definitivamente. No entanto, é necessário fornecer energia externa, porque no frio do Li-Ion as baterias acabam muito, muito, muito rapidamente e podem até ficar permanentemente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O arduinka se comunica com a câmera através do módulo de relé. É claro que tudo o que ela pode fazer com isso é fechar o "botão" do controle remoto. E aí depende da câmera que tipo de exposição funciona (mais precisamente, que tipo de exposição o fotógrafo define). Obviamente, se a câmera estiver no modo Bulb, controlaremos a exposição durante a duração do rolo de "botão". Para filmagens noturnas, não há nada a ver sem isso; portanto, no programa, definimos não apenas o lançamento do rolo, mas também a capacidade de reter o rolo incluído no tempo que o fotógrafo precisar. Eu tenho a Nikon, então foi necessário um conector de controle remoto específico, que eu peguei emprestado do console de tiro em lapso de tempo chinês. Os apoiadores felizes da Canon fazem com simples tomadas, eu os invejo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o fotógrafo se comunicar com o programa, são projetados órgãos diretos e de feedback - LCD 2004 I2C azul e Joystick Module KY-023. O primeiro é um display LCD com luz de fundo azul com uma matriz de 20 caracteres em 4 linhas e um alfabeto latino no gerador de caracteres. O seu adaptador I2C aumentou notavelmente o preço - isso é uma dobradiça, permitindo que você se comunique com o arduinka em apenas dois fios. Mais precisamente, mesmo um de cada vez, mas a fiação é tudo um dois e, é claro, mais dois para aterramento (+ e -, sim). Como a maioria das portas do arduino foi consumida pelo escudo - “escudo” para controle do motor (que é a vantagem do escudo V2 - ele também se comunica via I2C, deixando as portas livres), não temos outra opção. Mais três portas (duas entradas analógicas e uma digital) têm um joystick esgotado. Esse é um dispositivo bastante simples no qual, ao girar o joystick ao longo de dois eixos, alteramos sua resistência,e o arduinka nele pode dizer com precisão ao programa onde e quanto o rejeitamos e, mesmo pressionando o joystick, fazemos com que o contato do botão seja fechado. No total, temos pelo menos cinco possibilidades de dizer algo ao programa usando apenas três portas (mas há cinco cabos, energia-terra, sim). O joystick em si, no entanto, não causa emoções agradáveis. Muito sensível, inconveniente de instalar, mas ... funciona, ok.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, um motor de passo (stepper) 28BYJ-48 está envolvido na lente da câmera deste protótipo. Ele também precisa de um driver - um chip que direciona uma grande corrente para ele com um comando de baixa corrente do arduinka. Aqui está um módulo com ULN2003. Como o movimento dos anéis da lente deve ser muito preciso e repetível - um motor DC convencional não é aplicável. O motor de passo permite que você gire a lente um pouco com precisão perfeita e da próxima vez um pouco mais - com muita precisão e sem solavancos que estragam qualquer lapso de tempo. Obviamente, ele não está integrado à lente, e aqui o problema começa. Ele torce através de uma correia dentada do tamanho GT2 de 6 mm de largura. Como se pode supor, a confiabilidade da torção depende da tensão da correia e de sua adesão à superfície emborrachada dos anéis da lente. Mas eu não imaginava e acreditava que não haveria problemas. Será.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como neste protótipo a etapa está localizada à esquerda da câmera, um cinto bem tensionado faz com que a câmera desmorone do parafuso do tripé assim que não é apertada. Se ele estivesse à direita, pelo contrário, estaria atrasando, mas a tristeza está aqui ... E a embreagem é de alguma forma instável. Você pode aumentá-lo colando no anel algum tipo de revestimento com melhor aderência. Ou reorganize o motor do outro lado. Até eu decidir o que é melhor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vou falar sobre a lógica de tudo isso. Na lógica, tudo é muito primitivo - se você não tentar se aprofundar em como tudo funciona. Portanto, nosso microprocessador "despretensioso" (atmega328) possui um kilobyte de memória somente leitura regravável (refiro-me à EEPROM), que armazena os valores dos parâmetros de disparo em intervalos de tempo. Há 32KB de memória flash não volátil para armazenamento de programas e bootloader-rewriter. Há 2 KB de RAM que nosso programa usa para armazenar variáveis ​​durante a operação. Obviamente, ainda existem muitos registros, temporizadores e até um termômetro, mas não há necessidade de saber agora.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando a energia é aplicada, o carregador de inicialização em flash lança nosso programa escrito por ele. Primeiro, ele coloca na RAM todas as variáveis ​​e constantes escritas nele, lê os parâmetros de disparo da EEPROM e exibe no LCD as alternativas para outras ações oferecidas ao fotógrafo. Após a conclusão, ele gira em um ciclo de espera por qualquer reação do fotógrafo - até que as baterias estejam completamente descarregadas. As seguintes ações estão disponíveis: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - controle direto dos acionamentos do robô - para verificar a operacionalidade das conexões, avaliar a calibração de trabalho dos motores e colocar o chassi na posição inicial. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - programar o lapso de tempo da fotografia - alterar os mesmos parâmetros de fotografia definidos pelo fotógrafo.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - teste de desempenho de disparo - execução passo a passo de um disparo programado que não inclui exposição e pausa entre os passos ("quadros"). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - inicie a fotografia com lapso de tempo - execução passo a passo do programa de disparo de acordo com os parâmetros inseridos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ciclo de execução do programa de filmagem consiste em repetir os quadros de etapas - seu número é igual ao número de quadros no vídeo definido pelo fotógrafo. É </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
executado </font><font style="vertical-align: inherit;">na seguinte ordem: </font><font style="vertical-align: inherit;">0) exibição no LCD dos parâmetros de disparo atuais e seu progresso. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1) exposição. Alterne o relé e aguarde o tempo especificado nos parâmetros. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 2) movimento para frente e para trás. Ligamos os motores e nos movemos para a distância especificada nos parâmetros.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 3) rotação da câmera esquerda-direita. Giramos a câmera para a esquerda ou direita nos graus especificados nos parâmetros. A rotação pode ocorrer não em todos os quadros, mas talvez a cada segundo, terceiro, quinto, décimo - depende da realização do fotógrafo por suas fantasias. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 4) rotação do anel da lente pelo ângulo especificado pelos parâmetros. Mais precisamente, os parâmetros especificam o número de etapas para a etapa e quantas etapas levam ao ângulo de rotação desejado do anel que o fotógrafo calcula previamente - no modo de controle direto da etapa. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 5) aguardando uma pausa entre os quadros. Se o quadro foi definido para se mover, faz sentido pausar pelo menos dois segundos, pois a plataforma precisa se acalmar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E então, se o usuário não interrompeu a execução, vamos para o início do próximo passo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, nenhuma matemática ou algoritmo brutal é incompreensível para um simples fotógrafo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que eu chamo isso de protótipo e não corro para estabelecer produção industrial, patentes, certificação e vendas internacionais? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em primeiro lugar, ainda é um brinquedo. Me entreguei, satisfazi minha curiosidade estudando o microcontrolador e seu chicote de fios, tive mais algumas idéias em mente sobre a implementação de alguns eletrodomésticos, mas, infelizmente, não aprendi como ganhar dinheiro. Mas o custo foi muito bom - a um preço de até cem dólares, é um dispositivo bastante decente que aciona uma DSLR. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em segundo lugar, há problemas suficientes e há algo a terminar. Vou listar brevemente: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - sobre o cinto shagovik e as lentes já foram escritas acima.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - ligar o motor a partir de um canal L293D é suficiente para o robô rodar alegremente em uma superfície plana, até inclinado em um ângulo perceptível para cima, mas categoricamente não é o suficiente em estradas intransitáveis ​​- conduzir um robô pela grama e areia ... não é bom. Em parte, eu decidi isso adicionando mecanismos a outro canal do segundo L293D. Ele decide decisivamente substituir os motores no sistema de tração por outros mais potentes e usá-los com um motorista que produza boa corrente.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - com a rotação da plataforma também não é gelo. É difícil completar menos de um grau. Precisa de um motor de passo. A caixa de câmbio, novamente, tem um brinquedo completamente de brinquedo - não esqueça a origem e o objetivo do chassi! Como a rotação durante o disparo em lapso de tempo é executada em uma direção - a jogada é selecionada rapidamente e ainda não é tão crítica, mas se houver movimento para frente e para trás, movimentos involuntários da plataforma são possíveis - dentro da jogada. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Não pensei em como perceber girar a câmera para cima e para baixo. Assim, embora o projeto se chame 4DoF, na verdade, temos apenas três graus de liberdade.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - os motores e seus acionamentos nas pistas têm características diferentes. Não é exatamente idêntico. Portanto, com um movimento formalmente retilíneo do robô, levará um pouco para o lado. De acordo com minhas estimativas - cerca de 10cm por cinco metros. Eu assumi isso e pretendi introduzir uma correção de curso aplicando feedback baseado no módulo GY-273 HMC5883L mencionado na lista de magnetômetros.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assumiu-se que, após memorizar o valor do campo na direção do movimento antes de iniciar o movimento no quadro, o robô, após a conclusão do movimento prescrito, trabalhará com uma faixa para corrigir o percurso com a semelhança dos valores medidos durante a correção do campo e armazenados. Não está claro antecipadamente se a precisão do magnetômetro é suficiente para isso ou, em vez de feedback, basta inserir a correção empiricamente calculada para este protótipo durante o tempo de operação de um motor. Só porque o módulo adquirido acabou não sendo totalmente operacional - em vez de valores do sensor, há um ruído, mas ainda não recebi um substituto para ele. E também neste sensor, eu queria prender a detecção de sobreposição ao mover - para parar de fotografar. Embora seja útil para isso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - A interface é muito monótona. Joystick inconveniente, inércia do controle do robô (mais sobre isso mais tarde), falta de belos gráficos, botões, cachos, gadgets e alarde - alguns caracteres obscuros e em latim. Em geral, um produto sem fins lucrativos, com certeza ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 é um horror geral do joelho do produto. Muitos fios, um lenço enfiado de alguma forma, fixo e saindo aqui e ali. Claramente, isso não é como um lindo brinquedo branco para uma loja.</font></font><br>
<br>
<img src="http://kharin.com/4dof/index.files/image004.jpg" alt="macarrão"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em terceiro lugar, ainda há mais para desenvolver o projeto! Além de resolver esses problemas e criar uma aparência comercial. Realmente! Por exemplo, a inércia da interface mencionada acima foi extraída do desejo de implementar o controle remoto e receber telemetria de um robô. Sim sim O microcontrolador, mesmo algo realmente poderoso, funciona ineficientemente nas minhas mãos. Tudo pode escapar, mas as deficiências da programação e o uso de bibliotecas padrão levam ao fato de que, controlando o joystick, é preciso esperar um pouco para que o robô responda à ação. Ao longo do caminho, o robô está pronto para controlá-lo de outros dispositivos. Verdade, verdade. Já no estágio de tal protótipo, é bem possível controlá-lo a partir de um smartphone ou computador. Dirija, ajuste os parâmetros de disparo, acompanhe o desempenho - tudo isso agora pode ser feito de qualquer lugar.Surpreendentemente, para isso eu nem precisei ser um guru em microcontroladores - de alguma forma, mas já funciona. Embora seja melhor não me perguntar exatamente como. Glória ao Arduino, o que.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que vem a seguir? Eu atiro. Aprecie o tiro ou a motivação para a alteração do remake. Para isso, foi feito, não? Não estou acostumado a usar ferramentas que não são tão fáceis de usar. E aqui não há ninguém para reclamar, exceto você. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero ter ficado impressionado com os leitores que não é tão complicado e até interessante tentar no seu tempo livre aquela pequena ideia que antes se escondia no canto do cérebro do leitor. No entanto, é apenas "isso é o tipo de perversão que acontece!" será o suficiente para mim. Obrigado pela leitura e pelo seu tempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se alguém não estiver com preguiça de gastar ainda mais tempo, você poderá se familiarizar com o código escrito. Não há nada de interessante ou bom, mas funciona. Eu aviso desde já que existem 800 linhas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
» </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Robô 4DOF Timelapse V1.2</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim </font><font style="vertical-align: inherit;">E compre uma casa de verão para mim, finalmente! </font><font style="vertical-align: inherit;">Estou aterrorizado com o cansaço de esperar pelo comprador! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em conclusão, é assim que o robô parece "ao vivo":</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/s8tbitXdM8s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt398381/">https://habr.com/ru/post/pt398381/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt398371/index.html">Texas Instruments, ou como vender um dispositivo de computação com um processador de 40 anos por 20 anos</a></li>
<li><a href="../pt398373/index.html">Obrigado pela memória: como a memória barata muda a computação</a></li>
<li><a href="../pt398375/index.html">Treinamos a rede neural sem esforço</a></li>
<li><a href="../pt398377/index.html">O que é informação em termos de física?</a></li>
<li><a href="../pt398379/index.html">Seu táxi não tripulado chega</a></li>
<li><a href="../pt398385/index.html">Ilusões do cérebro. A primeira alucinação universal do mundo</a></li>
<li><a href="../pt398387/index.html">Ataque de carro: batalha feroz</a></li>
<li><a href="../pt398389/index.html">Gato piada KiQ ou como fizemos um brinquedo falante para adultos</a></li>
<li><a href="../pt398391/index.html">"Cinza, golpe, legal ...", ou a lógica do controle do clima em uma casa inteligente</a></li>
<li><a href="../pt398393/index.html">A Nikon D5500a refrigerada tira fotos espantosas do espaço</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>