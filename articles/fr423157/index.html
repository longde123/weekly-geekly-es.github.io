<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöÇ ‚è≥ üóΩ Utilisation de la fonction connect () de react-redux üéûÔ∏è üë®üèº‚Äçüè≠ üë∞üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'article que nous traduisons aujourd'hui expliquera comment cr√©er des composants de conteneur dans des applications React li√©es √† l'√©tat de Redux. Ce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation de la fonction connect () de react-redux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/423157/">  L'article que nous traduisons aujourd'hui expliquera comment cr√©er des composants de conteneur dans des applications React li√©es √† l'√©tat de Redux.  Ce mat√©riel est bas√© sur la description du m√©canisme de gestion d'√©tat dans React √† l'aide du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">package react-redux</a> .  Il est suppos√© que vous avez d√©j√† une compr√©hension de base de l'architecture et de l'API des biblioth√®ques dont nous parlerons.  Si ce n'est pas le cas, consultez la documentation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">React</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Redux</a> . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/35f/0eb/fea/35f0ebfea2178696cb95ede9f78407c9.jpg" alt="image"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">√Ä propos de la gestion des √©tats dans les applications JavaScript</font> </h2><br>  React fournit au d√©veloppeur deux m√©canismes principaux pour transf√©rer des donn√©es vers des composants.  Ce sont les propri√©t√©s (accessoires) et l'√©tat.  Les propri√©t√©s sont en lecture seule et permettent aux composants parents de transmettre des attributs aux composants enfants.  Un √©tat est une entit√© locale encapsul√©e dans un composant qui peut changer √† tout moment du cycle de vie du composant. <br><br>  √âtant donn√© que l'√©tat est un m√©canisme extr√™mement utile utilis√© pour cr√©er de puissantes applications React dynamiques, il est n√©cessaire de le g√©rer correctement.  Il existe actuellement plusieurs biblioth√®ques qui fournissent une architecture bien structur√©e pour g√©rer l'int√©grit√© des applications.  Parmi eux, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flux</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Redux</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MobX</a> . <br><br>  Redux est une biblioth√®que con√ßue pour cr√©er des conteneurs utilis√©s pour stocker l'√©tat de l'application.  Il offre au d√©veloppeur des outils de gestion d'√©tat compr√©hensibles qui se comportent de mani√®re pr√©visible.  Cette biblioth√®que convient aux applications √©crites en JavaScript pur, ainsi qu'aux projets dans le d√©veloppement desquels certains frameworks ont √©t√© utilis√©s.  Redux est de petite taille, mais il vous permet d'√©crire des applications fiables qui fonctionnent dans diff√©rents environnements. <br><br>  Voici comment cr√©er des r√©f√©rentiels Redux: <br><br><pre><code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createStore } from <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = {    auth: { loggedIn: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = createStore((state = initialState, action) =&gt; {    switch (action.type) {        case <span class="hljs-string"><span class="hljs-string">"LOG_IN"</span></span>:            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, auth: { loggedIn: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } };            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;        case <span class="hljs-string"><span class="hljs-string">"LOG_OUT"</span></span>:            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, auth: { loggedIn: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } };            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>:            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state;            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;    }    })</code> </pre> <br><h2>  <font color="#3AC1EF">Package React-redux</font> </h2><br>  Le package react-redux fournit des liaisons React pour le conteneur d'√©tat Redux, ce qui rend extr√™mement facile la connexion de l'application React au r√©f√©rentiel Redux.  Cela vous permet de s√©parer les composants d'une application React en fonction de leur relation avec le r√©f√©rentiel.  √Ä savoir, nous parlons des types de composants suivants: <br><br><ol><li>  Composants de pr√©sentation.  Ils ne sont responsables que de l'apparence de l'application et ne sont pas au courant de l'√©tat de Redux.  Ils re√ßoivent des donn√©es via des propri√©t√©s et peuvent appeler des rappels, qui leur sont √©galement transmis via des propri√©t√©s. </li><li>  Composants de conteneur.  Ils sont responsables du fonctionnement des m√©canismes internes de l'application et interagissent avec l'√©tat de Redux.  Ils sont souvent cr√©√©s en utilisant react-redux, ils peuvent envoyer des actions Redux.  De plus, ils souscrivent aux changements d'√©tat. </li></ol><br>  Des d√©tails sur cette approche de la r√©partition des responsabilit√©s des composants sont disponibles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Dans cet article, nous parlerons principalement des composants de conteneur connect√©s √† l'√©tat Redux √† l'aide de react-redux. <br><br>  Le paquet react-redux a une interface tr√®s simple.  En particulier, la chose la plus int√©ressante √† propos de cette interface se r√©sume √† ce qui suit: <br><br><ol><li>  <code>&lt;Provider store&gt;</code> - vous permet de cr√©er un wrapper pour une application React et de rendre l'√©tat Redux disponible pour tous les composants de conteneur dans sa hi√©rarchie. </li><li>  <code>connect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])</code> - vous permet de cr√©er des composants d'ordre sup√©rieur.  Cela est n√©cessaire pour cr√©er des composants de conteneur bas√©s sur les composants de base de React. </li></ol><br>  Installez react-redux afin d'utiliser ce package dans le projet comme suit: <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> react-redux <span class="hljs-comment"><span class="hljs-comment">--save</span></span></code> </pre> <br>  En supposant que vous avez d√©j√† configur√© le r√©f√©rentiel Redux pour votre application React, voici un exemple de connexion de l'application au r√©f√©rentiel Redux: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> createStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./createReduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = createStore(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rootElement = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'root'</span></span>); ReactDOM.render(( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppRootComponent</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ), rootElement);</code> </pre> <br>  Vous pouvez maintenant cr√©er des composants de conteneur connect√©s au r√©f√©rentiel Redux.  Cela se fait dans la hi√©rarchie de <code>AppRootComponent</code> √† l'aide de l'API <code>connect()</code> . <br><br><h2>  <font color="#3AC1EF">Quand utiliser connect ()?</font> </h2><br><h3>  <font color="#3AC1EF">‚ñçCr√©ation de composants de conteneurs</font> </h3><br>  Comme d√©j√† mentionn√©, l'API react-redux <code>connect()</code> est utilis√©e pour cr√©er des composants de conteneur qui sont connect√©s au r√©f√©rentiel Redux.  Le stockage auquel vous vous connectez est obtenu √† partir de l'anc√™tre le plus √©lev√© du composant √† l'aide du m√©canisme de contexte React.  La fonction <code>connect()</code> n'est pas n√©cessaire si vous cr√©ez uniquement des composants de pr√©sentation. <br><br>  Si vous, dans le composant React, avez besoin de recevoir des donn√©es du stockage, ou si vous devez envoyer des actions, ou si vous devez faire les deux, vous pouvez convertir un composant normal en composant conteneur en l'enveloppant dans un composant d'ordre sup√©rieur renvoy√© par <code>connect()</code> partir de r√©agir-redux.  Voici √† quoi √ßa ressemble: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Profile <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./components/Profile'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> ProfileContainer(props) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   props.loggedIn     ? &lt;Profile profile={props.profile} /&gt;     : &lt;div&gt;Please <span class="hljs-keyword"><span class="hljs-keyword">login</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> profile.&lt;/div&gt; ) } const mapStateToProps = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(state) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   profile: state.<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>.profile,   loggedIn: state.auth.loggedIn } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(mapStateToProps)(ProfileContainer);</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç √âlimination de la n√©cessit√© de s'abonner manuellement au stockage Redux</font> </h3><br>  Vous pouvez cr√©er le composant conteneur vous-m√™me et signer manuellement le composant sur le r√©f√©rentiel Redux √† l'aide de la commande <code>store.subscribe()</code> .  Cependant, l'utilisation de la fonction <code>connect()</code> signifie l'application de certaines am√©liorations et optimisations de performances que vous ne pourrez peut-√™tre pas utiliser lors de l'utilisation d'autres m√©canismes. <br><br>  Dans l'exemple suivant, nous essayons de cr√©er manuellement un composant conteneur et de le connecter au r√©f√©rentiel Redux en vous y abonnant.  Ici, nous nous effor√ßons d'impl√©menter la m√™me fonctionnalit√© que celle illustr√©e dans l'exemple pr√©c√©dent. <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } from <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store from <span class="hljs-string"><span class="hljs-string">'./reduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Profile from <span class="hljs-string"><span class="hljs-string">'./components/Profile'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProfileContainer</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getCurrentStateFromStore() getCurrentStateFromStore() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {     profile: store.getState().user.profile,     loggedIn: store.getState().auth.loggedIn   } } updateStateFromStore = () =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> currentState = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getCurrentStateFromStore();     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state !== currentState) {     <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(currentState);   } } componentDidMount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.unsubscribeStore = store.subscribe(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.updateStateFromStore); } componentWillUnmount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.unsubscribeStore(); } render() {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { loggedIn, profile } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state;     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     loggedIn       ? &lt;Profile profile={profile} /&gt;       : &lt;div&gt;Please login to view profile.&lt;/div&gt;   ) } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> ProfileContainer;</code> </pre> <br>  La fonction <code>connect()</code> , en outre, offre au d√©veloppeur une flexibilit√© suppl√©mentaire, vous permettant de configurer les composants de conteneur pour recevoir des propri√©t√©s dynamiques en fonction des propri√©t√©s qui leur ont √©t√© transmises √† l'origine.  Cela s'av√®re tr√®s utile pour obtenir des s√©lections √† partir d'un √©tat bas√© sur des propri√©t√©s, ou pour lier des g√©n√©rateurs d'actions √† une variable sp√©cifique √† partir de propri√©t√©s. <br><br>  Si votre application React utilise plusieurs r√©f√©rentiels Redux, <code>connect()</code> facilite la sp√©cification du r√©f√©rentiel sp√©cifique auquel le composant conteneur doit √™tre connect√©. <br><br><h2>  <font color="#3AC1EF">Anatomy connect ()</font> </h2><br>  La fonction <code>connect()</code> fournie par le package react-redux peut prendre jusqu'√† quatre arguments, chacun √©tant facultatif.  Apr√®s avoir appel√© la fonction <code>connect()</code> , un composant d'ordre sup√©rieur est renvoy√© qui peut √™tre utilis√© pour encapsuler n'importe quel composant React. <br><br>  √âtant donn√© que la fonction renvoie un composant d'ordre sup√©rieur, elle doit √™tre appel√©e √† nouveau, en passant le composant React de base afin de le convertir en composant conteneur: <br><br><pre> <code class="hljs lisp">const ContainerComponent = connect()(<span class="hljs-name"><span class="hljs-name">BaseComponent</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br>  Voici la signature de la fonction <code>connect()</code> : <br><br><pre> <code class="hljs powershell">connect([<span class="hljs-type"><span class="hljs-type">mapStateToProps</span></span>], [<span class="hljs-type"><span class="hljs-type">mapDispatchToProps</span></span>], [<span class="hljs-type"><span class="hljs-type">mergeProps</span></span>], [<span class="hljs-type"><span class="hljs-type">options</span></span>])</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Argument mapStateToProps</font> </h3><br>  L'argument <code>mapStateToProps</code> est une fonction qui renvoie un objet normal ou une autre fonction.  La transmission de cet argument <code>connect()</code> souscrit le composant conteneur aux mises √† jour du r√©f√©rentiel Redux.  Cela signifie que la fonction <code>mapStateToProps</code> sera appel√©e chaque fois que l'√©tat du r√©f√©rentiel change.  Si vous n'√™tes pas int√©ress√© par la surveillance des mises √† jour d'√©tat, transmettez <code>connect()</code> comme valeur de cet argument √† <code>undefined</code> ou <code>null</code> . <br><br>  La fonction <code>mapStateToProps</code> d√©clar√©e avec deux param√®tres, dont le second est facultatif.  Le premier param√®tre est l'√©tat actuel du r√©f√©rentiel Redux.  Le deuxi√®me param√®tre, s'il est transmis, est un objet des propri√©t√©s transmises au composant: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   <span class="hljs-attr"><span class="hljs-attr">profile</span></span>: state.user.profile,   <span class="hljs-attr"><span class="hljs-attr">loggedIn</span></span>: state.auth.loggedIn } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> connect(mapStateToProps)(ProfileComponent);</code> </pre> <br>  Si un objet normal est renvoy√© par <code>mapStateToProps</code> , alors l'objet <code>stateProps</code> renvoy√© <code>stateProps</code> combin√© avec les propri√©t√©s du composant.  Vous pouvez acc√©der √† ces propri√©t√©s dans le composant comme suit: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProfileComponent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   props.loggedIn     ? <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Profile</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">profile</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{props.profile}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">     : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Please login to view profile.</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre> <br>  Si <code>mapStateToProps</code> renvoie une fonction, cette fonction est utilis√©e comme <code>mapStateToProps</code> pour chaque instance du composant.  Cela peut √™tre utile pour am√©liorer les performances de rendu et pour la m√©morisation. <br><br><h3>  <font color="#3AC1EF">Argument Argument mapDispatchToProps</font> </h3><br>  L'argument <code>mapDispatchToProps</code> peut √™tre soit un objet soit une fonction qui renvoie soit un objet normal soit une autre fonction.  Afin de mieux illustrer <code>mapDispatchToProps</code> , nous avons besoin de g√©n√©rateurs d'actions.  Supposons que nous ayons les g√©n√©rateurs suivants: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> writeComment = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">comment</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ comment, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'WRITE_COMMENT'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> updateComment = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, comment</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ id, comment, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'UPDATE_COMMENT'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> deleteComment = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ id, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'DELETE_COMMENT'</span></span> });</code> </pre> <br>  Consid√©rez maintenant les diverses utilisations de <code>mapDispatchToProps</code> . <br><br><h4>  Impl√©mentation par d√©faut par d√©faut </h4><br>  Si vous n'utilisez pas votre propre impl√©mentation <code>mapDispatchToProps</code> , repr√©sent√©e par un objet ou une fonction, une impl√©mentation standard sera utilis√©e, qui impl√©mentera la m√©thode du r√©f√©rentiel <code>dispatch()</code> tant que propri√©t√© du composant.  Vous pouvez utiliser cette propri√©t√© dans un composant comme celui-ci: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { updateComment, deleteComment } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>(props) { const { id, content } = props.<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; //    props.dispatch() const editComment = () =&gt; props.dispatch(updateComment(id, content)); const removeComment = () =&gt; props.dispatch(deleteComment(id)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;div&gt;     &lt;p&gt;{ content }&lt;/p&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={editComment}&gt;Edit <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={removeComment}&gt;Remove <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;   &lt;/div&gt; ) } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>()(<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>);</code> </pre> <br><h4>  Transfert d'objets </h4><br>  Si un objet est utilis√© comme argument pour <code>mapDispatchToProps</code> , chaque fonction de l'objet sera consid√©r√©e comme un g√©n√©rateur d'actions Redux et encapsul√©e dans un appel de m√©thode de r√©f√©rentiel <code>dispatch()</code> , ce qui lui permettra d'√™tre appel√© directement.  L'objet r√©sultant avec des g√©n√©rateurs d'actions, <code>dispatchProps</code> , sera combin√© avec les propri√©t√©s du composant. <br><br>  L'exemple suivant montre un exemple de construction de l'argument <code>mapDispatchToProps</code> , qui est un objet avec des g√©n√©rateurs d'actions, ainsi que la fa√ßon dont les g√©n√©rateurs peuvent √™tre utilis√©s comme propri√©t√©s du composant React: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { updateComment, deleteComment } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>(props) { const { id, content } = props.<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; // ,   ,   const editComment = () =&gt; props.updatePostComment(id, content); const removeComment = () =&gt; props.deletePostComment(id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;div&gt;     &lt;p&gt;{ content }&lt;/p&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={editComment}&gt;Edit <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={removeComment}&gt;Remove <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;   &lt;/div&gt; ) } //     const mapDispatchToProps = { updatePostComment: updateComment, deletePostComment: deleteComment } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, mapDispatchToProps)(<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>);</code> </pre> <br><h4>  Transfert de fonction </h4><br>  Lors de l'utilisation de la fonction <code>mapDispatchToProps</code> comme argument <code>mapDispatchToProps</code> le programmeur doit veiller √† renvoyer l'objet <code>dispatchProps</code> , qui lie les g√©n√©rateurs d'actions √† l'aide de la m√©thode de stockage <code>dispatch()</code> .  Cette fonction accepte, comme premier param√®tre, la m√©thode du r√©f√©rentiel <code>dispatch()</code> .  Comme avec <code>mapStateToProps</code> , la fonction peut √©galement accepter le deuxi√®me param√®tre facultatif <code>ownProps</code> , qui d√©crit le mappage avec les propri√©t√©s d'origine transmises au composant. <br><br>  Si cette fonction renvoie une autre fonction, la fonction renvoy√©e est utilis√©e comme <code>mapDispatchToProps</code> , ce qui peut √™tre utile pour am√©liorer les performances de rendu et la m√©morisation. <br><br>  La fonction d'assistance <code>bindActionCreators()</code> de Redux peut √™tre utilis√©e √† l'int√©rieur de cette fonction pour lier des g√©n√©rateurs d'actions √† la m√©thode du r√©f√©rentiel <code>dispatch()</code> . <br><br>  L'exemple suivant montre l'utilisation, dans le r√¥le de <code>mapDispatchToProps</code> , d'une fonction.  Il montre √©galement le travail avec la fonction auxiliaire <code>bindActionCreators()</code> , qui est utilis√©e pour lier les g√©n√©rateurs d'actions pour travailler avec des commentaires sur les <code>props.actions</code> du composant React: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { bindActionCreators } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> commentActions <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>(props) { const { id, content } = props.<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; const { updateComment, deleteComment } = props.actions; //    props.actions const editComment = () =&gt; updateComment(id, content); const removeComment = () =&gt; deleteComment(id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;div&gt;     &lt;p&gt;{ content }&lt;/p&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={editComment}&gt;Edit <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={removeComment}&gt;Remove <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;   &lt;/div&gt; ) } const mapDispatchToProps = (dispatch) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   actions: bindActionCreators(commentActions, dispatch) } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, mapDispatchToProps)(<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>);</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçArgument mergeProps</font> </h3><br>  Si l'argument <code>mergeProps</code> est pass√© √† <code>connect()</code> , alors c'est une fonction qui prend les trois param√®tres suivants: <br><br><ul><li>  <code>stateProps</code> est l'objet de propri√©t√© renvoy√© par l'appel <code>mapStateToProps()</code> . </li><li>  <code>dispatchProps</code> - un objet de propri√©t√© avec des g√©n√©rateurs d' <code>mapDispatchToProps()</code> de <code>mapDispatchToProps()</code> . </li><li>  <code>ownProps</code> - Les propri√©t√©s d'origine obtenues par le composant. </li></ul><br>  Cette fonction renvoie un objet simple avec des propri√©t√©s qui seront transmises au composant encapsul√©.  Ceci est utile pour mapper conditionnellement une partie de l'√©tat d'un r√©f√©rentiel Redux ou de g√©n√©rateurs d'actions bas√©s sur des propri√©t√©s. <br><br>  Si <code>connect()</code> ne transmet pas cette fonction, son impl√©mentation standard est utilis√©e: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mergeProps = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stateProps, dispatchProps, ownProps</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign({}, ownProps, stateProps, dispatchProps) }</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçArgument repr√©sentant un objet avec des param√®tres</font> </h3><br>  Un objet facultatif, transmis √† la fonction <code>connect()</code> comme quatri√®me argument, contient des param√®tres con√ßus pour changer le comportement de cette fonction.  Ainsi, <code>connect()</code> est une impl√©mentation sp√©ciale de la fonction <code>connectAdvanced()</code> , il accepte la plupart des param√®tres disponibles pour <code>connectAdvanced()</code> , ainsi que certains param√®tres suppl√©mentaires. <br><br>  <a href="">Voici la</a> page de documentation, apr√®s avoir lu, vous pouvez d√©couvrir quels param√®tres peuvent √™tre utilis√©s avec <code>connect()</code> , et comment ils modifient le comportement de cette fonction. <br><br><h2>  <font color="#3AC1EF">Utilisation de la fonction connect ()</font> </h2><br><h3>  <font color="#3AC1EF">‚ñçCr√©er un stockage</font> </h3><br>  Avant de convertir un composant React normal en composant conteneur √† l'aide de <code>connect()</code> , vous devez cr√©er un r√©f√©rentiel Redux auquel ce composant sera connect√©. <br><br>  Supposons que nous ayons un composant conteneur <code>NewComment</code> , qui est utilis√© pour ajouter de nouveaux commentaires √† la publication et, en outre, affiche un bouton pour envoyer des commentaires.  Le code d√©crivant ce composant peut ressembler √† ceci: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">React</span></span> from <span class="hljs-symbol"><span class="hljs-symbol">'reac</span></span>t'; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } from <span class="hljs-symbol"><span class="hljs-symbol">'react</span></span>-redux'; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NewComment</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ input = <span class="hljs-literal"><span class="hljs-literal">null</span></span> writeComment = evt =&gt; {   evt.preventDefault();   const comment = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input.value;     comment &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.dispatch({ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-symbol"><span class="hljs-symbol">'WRITE_COMMEN</span></span>T', comment }); } render() {   const { id, content } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.comment;     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;div&gt;       &lt;input <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"text"</span></span> ref={e =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input = e} placeholder=<span class="hljs-string"><span class="hljs-string">"Write a comment"</span></span> /&gt;       &lt;button <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"button"</span></span> onClick={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.writeComment}&gt;<span class="hljs-type"><span class="hljs-type">Submit</span></span> <span class="hljs-type"><span class="hljs-type">Comment</span></span>&lt;/button&gt;     &lt;/div&gt;   ) } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> connect()(<span class="hljs-type"><span class="hljs-type">NewComment</span></span>);</code> </pre> <br>  Pour que ce composant soit utilis√© dans l'application, il sera n√©cessaire de d√©crire le r√©f√©rentiel Redux auquel ce composant doit √™tre connect√©.  Sinon, une erreur se produira.  Cela peut se faire de deux mani√®res, que nous allons maintenant examiner. <br><br><h4>  D√©finition de la propri√©t√© de magasin dans un composant conteneur </h4><br>  La premi√®re fa√ßon d'√©quiper un composant d'un r√©f√©rentiel Redux est de passer un lien vers un tel r√©f√©rentiel comme valeur de la propri√©t√© <code>store</code> du composant: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./reduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NewComment <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./components/NewComment'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CommentsApp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">NewComment</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> }</span></span></code> </pre> <br><h4>  D√©finition de la propri√©t√© store dans le composant &lt;Provider&gt; </h4><br>  Si vous souhaitez d√©finir le r√©f√©rentiel Redux pour l'application une seule fois, vous serez int√©ress√© par la m√©thode que nous allons maintenant examiner.  Il convient g√©n√©ralement aux applications qui n'utilisent qu'un seul r√©f√©rentiel Redux. <br><br>  Le package react-redux fournit au d√©veloppeur le composant <code>&lt;Provider&gt;</code> , qui peut √™tre utilis√© pour encapsuler le composant racine de l'application.  Il accepte la propri√©t√© du <code>store</code> .  Il est suppos√© qu'il s'agit d'un lien vers le r√©f√©rentiel Redux, qui devrait √™tre utilis√© dans l'application.  La propri√©t√© <code>store</code> est transmise, conform√©ment √† la hi√©rarchie d'application, aux composants du conteneur, √† l'aide du m√©canisme de contexte React: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./reduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NewComment <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./components/NewComment'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CommentsApp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">NewComment</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> } ReactDOM.render(( </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CommentsApp</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ), document.getElementById('root'))</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">AccessOpenProps Access Organization</font> </h3><br>  Comme d√©j√† mentionn√©, les fonctions <code>mapStateToProps</code> et <code>mapDispatchToProps</code> <code>mapStateToProps</code> √† <code>connect()</code> peuvent √™tre d√©clar√©es avec le deuxi√®me param√®tre <code>ownProps</code> , qui est les propri√©t√©s du composant. <br>  Cependant, il y a un probl√®me.  Si le nombre de param√®tres requis de la fonction d√©clar√©e est inf√©rieur √† 2, alors <code>ownProps</code> ne sera pas transmis.  Mais si une fonction est d√©clar√©e sans param√®tres obligatoires ou avec au moins 2 param√®tres, <code>ownProps</code> sera transmis. <br><br>  Consid√©rez plusieurs options pour travailler avec <code>ownProps</code> . <br><br><h4>  D√©claration de fonction sans param√®tres </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// state console.log(arguments[1]); // ownProps };</span></span></code> </pre> <br>  Dans cette situation, <code>ownProps</code> transmis, car la fonction est d√©clar√©e sans les param√®tres requis.  Par cons√©quent, le code suivant √©crit √† l'aide de la nouvelle syntaxe pour les param√®tres ES6 restants fonctionnera: <br><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-rest_arg"><span class="hljs-function"><span class="hljs-params"><span class="hljs-rest_arg">...args</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ console.log(args[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// state console.log(args[1]); // ownProps };</span></span></code> </pre> <br><h4>  D√©claration de fonction avec un param√®tre </h4><br>  Prenons l'exemple suivant: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(state); <span class="hljs-comment"><span class="hljs-comment">// state console.log(arguments[1]); // undefined };</span></span></code> </pre> <br>  Il n'y a qu'un seul param√®tre, l' <code>state</code> .  Par cons√©quent, <code>arguments[1]</code> prend la valeur <code>undefined</code> raison du fait que <code>ownProps</code> pas transmis. <br><br><h4>  D√©claration de fonction avec param√®tre par d√©faut </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, ownProps = {}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(state); <span class="hljs-comment"><span class="hljs-comment">// state console.log(ownProps); // {} };</span></span></code> </pre> <br>  Il n'y a qu'un seul param√®tre obligatoire, <code>state</code> , car le deuxi√®me param√®tre, <code>ownProps</code> , est facultatif car il a une valeur par d√©faut.  Par cons√©quent, comme il n'y a qu'un seul param√®tre requis, <code>ownProps</code> pas transmis et le mappage est effectu√© avec la valeur par d√©faut qui lui a √©t√© affect√©e, c'est-√†-dire avec un objet vide. <br><br><h4>  D√©clarer une fonction avec deux param√®tres </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, ownProps</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(state); <span class="hljs-comment"><span class="hljs-comment">// state console.log(ownProps); // ownProps };</span></span></code> </pre> <br>  Tout est arrang√© tr√®s simplement.  A savoir, dans une telle situation, le transfert de <code>ownProps</code> du fait que la fonction est d√©clar√©e avec deux param√®tres requis. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  Apr√®s avoir ma√Ætris√© ce mat√©riel, vous avez appris quand et comment utiliser l'API <code>connect()</code> fournie par le package react-redux et con√ßue pour cr√©er des composants de conteneur connect√©s √† l'√©tat Redux.  Ici, nous avons parl√© en d√©tail de la structure de la fonction <code>connect()</code> et de la fa√ßon de l'utiliser, cependant, si vous souhaitez en savoir plus sur ce m√©canisme, en particulier, vous familiariser avec ses cas d'utilisation, consultez <a href="">cette</a> section de la documentation react-redux. <br><br>  <b>Chers lecteurs!</b>  Utilisez-vous react-redux dans vos projets? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr423157/">https://habr.com/ru/post/fr423157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr423147/index.html">√Ä propos de la strat√©gie et du format de stockage √† l'√®re Hadoop</a></li>
<li><a href="../fr423149/index.html">Comparaison directe des m√©thodes de correction de la myopie au laser ou de ce que vous payez lorsque vous choisissez ReLEx SMILE</a></li>
<li><a href="../fr423151/index.html">Objets globaux en PHP</a></li>
<li><a href="../fr423153/index.html">Guide Node.js, partie 2: JavaScript, V8, quelques astuces de d√©veloppement</a></li>
<li><a href="../fr423155/index.html">Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 8: Mod√®le de s√©curit√© r√©seau, partie 2</a></li>
<li><a href="../fr423159/index.html">Bonne f√™te du programmeur! Aimez vos d√©veloppeurs</a></li>
<li><a href="../fr423161/index.html">Les entreprises veulent des donn√©es personnelles</a></li>
<li><a href="../fr423163/index.html">Connexion de CryptoPro √† Mono</a></li>
<li><a href="../fr423165/index.html">Dessin de maillage dynamique dans Unreal Engine 4</a></li>
<li><a href="../fr423167/index.html">Ce que Mark Zuckerberg parle des probl√®mes de Facebook. L'essentiel de l'article du New Yorker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>