<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯФ╣ ЁЯд│ ЁЯСйЁЯП╜тАНЁЯдЭтАНЁЯСйЁЯП╗ OpenSceneGraph: рджреГрд╢реНрдп рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреА рдореВрд▓ рдмрд╛рддреЗрдВ ЁЯдШЁЯП╗ ЁЯзЬЁЯП╝ ЁЯТЗЁЯП╗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд░рд┐рдЪрдп 
 OpenGL, рдЬреЛ OpenSceneGraph рдХрд╛ рдмреИрдХрдПрдВрдб рд╣реИ, рддреАрди-рдЖрдпрд╛рдореА рджреБрдирд┐рдпрд╛ рдореЗрдВ рд╕рднреА рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдЬреНрдпрд╛рдорд┐рддреАрдп рдкреНрд░рд╛рдЗрдореЗрдЯрд┐рдХреНрд╕ (рдЬреИрд╕реЗ рдЕрдВрдХ, рд░реЗрдЦрд╛рдПрдВ, рддреНрд░рд┐рдХреЛрдг рдФ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OpenSceneGraph: рджреГрд╢реНрдп рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреА рдореВрд▓ рдмрд╛рддреЗрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430212/"><img src="https://habrastorage.org/webt/py/ks/3w/pyks3wlvjf_zfef-sqocutbnimk.jpeg" alt="рдЫрд╡рд┐"><br><br><h1>  рдкрд░рд┐рдЪрдп </h1><br>  OpenGL, рдЬреЛ OpenSceneGraph рдХрд╛ рдмреИрдХрдПрдВрдб рд╣реИ, рддреАрди-рдЖрдпрд╛рдореА рджреБрдирд┐рдпрд╛ рдореЗрдВ рд╕рднреА рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдЬреНрдпрд╛рдорд┐рддреАрдп рдкреНрд░рд╛рдЗрдореЗрдЯрд┐рдХреНрд╕ (рдЬреИрд╕реЗ рдЕрдВрдХ, рд░реЗрдЦрд╛рдПрдВ, рддреНрд░рд┐рдХреЛрдг рдФрд░ рдмрд╣реБрднреБрдЬ рдЪреЗрд╣рд░реЗ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред <br><br>  рдЗрди рдкреНрд░рд╛рдЗрдорд┐рдЯрд┐рд╡реНрд╕ рдХреЛ рдЙрдирдХреЗ рдХреЛрдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ рджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдХреЛрдиреЗ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ, рд╕рд╛рдорд╛рдиреНрдп рдШрдЯрдХ, рд░рдВрдЧ рдбреЗрдЯрд╛ рдФрд░ рдмрдирд╛рд╡рдЯ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдпрд╣ рдбреЗрдЯрд╛ рд╡рд┐рд╢реЗрд╖ рд╕рд░рдгрд┐рдпреЛрдВ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдкреНрд░рд┐рдорд┐рдЯрд┐рд╡ рдХрд╛ рдЧрдарди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдХреЗ рдЙрдиреНрд╣реЗрдВ рд╡рд░реНрдЯреЗрдХреНрд╕ рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреА рд╕реВрдЪреА рдмрддрд╛рдПрдВред  рдЗрд╕ рд╡рд┐рдзрд┐ рдХреЛ рд╡рд░реНрдЯреЗрдХреНрд╕ рдРрд░реЗ рд╡рд┐рдзрд┐ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╣ рдореЗрдореЛрд░реА рдореЗрдВ рдЕрдирд╛рд╡рд╢реНрдпрдХ рд░реВрдк рд╕реЗ рд▓рдВрдмрд┐рдд рднрдВрдбрд╛рд░рдг рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдЕрдЪреНрдЫрд╛ рд╣реЛрддрд╛ рд╣реИред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдУрдкрдирдЬреАрдПрд▓ рддрдерд╛рдХрдерд┐рдд <i>рдкреНрд░рджрд░реНрд╢рди рд╕реВрдЪрд┐рдпреЛрдВ</i> рдХреЗ рддрдВрддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЬрдм рд╡реАрдбрд┐рдпреЛ рдореЗрдореЛрд░реА рдореЗрдВ рдПрдХ рдмрд╛рд░ рддреИрдпрд╛рд░ рдХрд┐рдП рдЧрдП рдкреНрд░рд╛рдЗрдорд┐рдЯрд┐рд╡реНрд╕ рдХрд╛ рдкреБрди: рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рд╕реНрдерд┐рд░ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдХрд╛рдлреА рддреЗрдЬ рдХрд░рддрд╛ рд╣реИред <br><br>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдУрдПрд╕рдЬреА рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд░реНрдЯреЗрдХреНрд╕ рдРрд░реЗ рд╡рд┐рдзрд┐ рдФрд░ рдбрд┐рд╕реНрдкреНрд▓реЗ рд▓рд┐рд╕реНрдЯ рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЬреНрдпрд╛рдорд┐рддрд┐ рдбреЗрдЯрд╛ рдХреИрд╕реЗ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд░реЗрдВрдбрд░рд┐рдВрдЧ рд░рдгрдиреАрддрд┐ рдХреЛ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рд╣рдо рдУрдПрд╕рдЬреА рдореЗрдВ рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмреБрдирд┐рдпрд╛рджреА рддрдХрдиреАрдХреЛрдВ рдХреЛ рдХрд╡рд░ рдХрд░реЗрдВрдЧреЗред <br><a name="habracut"></a><br><h1>  1. рдХрдХреНрд╖рд╛рдПрдВ рдЬрд┐рдпреЛрдб рдФрд░ рдбреНрд░реЙрдПрдмрд▓ </h1><br>  рдСрд╕рдЧ :: рдЬрд┐рдУрдб рдХреНрд▓рд╛рд╕ рдПрдХ рдЯрд░реНрдорд┐рдирд▓ рд╣реИ, рдЬреЛ рджреГрд╢реНрдп рдкреЗрдбрд╝ рдХрд╛ рддрдерд╛рдХрдерд┐рдд "рдкрддреНрддрд╛" рдиреЛрдб рд╣реИред  рдЗрд╕рдореЗрдВ рдмрд╛рд▓ рдиреЛрдб рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЗ рдкреНрд░рддрд┐рдкрд╛рджрди рдХреЗ рд▓рд┐рдП рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдЬрд╛рдирдХрд╛рд░реА рд╕рдорд╛рд╣рд┐рдд рд╣реИред  рдЗрд╕рдХрд╛ рдирд╛рдо, рдЬрд┐рдпреЛрдб, рдЬреНрдпрд╛рдорд┐рддрд┐ рдиреЛрдб рдХреЗ рд▓рд┐рдП рдЫреЛрдЯрд╛ рд╣реИред <br><br>  рдЗрдВрдЬрди рджреНрд╡рд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЬреНрдпрд╛рдорд┐рддреАрдп рдбреЗрдЯрд╛ рдХреЛ рдУрдПрд╕рдЬреА :: рдбреНрд░реЙрдПрдмрд▓ рдХреНрд▓рд╛рд╕, рдУрдПрд╕рдЬреА рджреНрд╡рд╛рд░рд╛ рдкреНрд░рдмрдВрдзрд┐рдд рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд╕реЗрдЯ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ :: рдЬрд┐рдУрдб рдХреНрд▓рд╛рд╕ред  рдСрдЧ :: рдбреНрд░реЙрдмрд▓ рдХреНрд▓рд╛рд╕ рдПрдХ рд╡рд┐рд╢реБрджреНрдз рд░реВрдк рд╕реЗ рд╡рд░реНрдЪреБрдЕрд▓ рдХреНрд▓рд╛рд╕ рд╣реИред  рдХрдИ рдЙрдкрд╡рд░реНрдЧреЛрдВ рдХреЛ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╣реИ, рдЬреЛ рддреАрди рдЖрдпрд╛рдореА рдореЙрдбрд▓, рдЪрд┐рддреНрд░ рдФрд░ рдкрд╛рда рд╣реИрдВ рдЬреЛ рдУрдкрдирдЧреЗрд▓ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рджреНрд╡рд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рд╣реИрдВред  OSG, рдбреНрд░рд┐рдмрд▓ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╕рднреА рддрддреНрд╡ рдЬреЛ рдЗрдВрдЬрди рджреНрд╡рд╛рд░рд╛ рдЦреАрдВрдЪреЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдУрдПрд╕рдЬреА :: рдЬрд┐рдпреЛрдб рдХреНрд▓рд╛рд╕ рдбреНрд░реЙрдЗрдВрдЧ рдЕрдЯреИрдЪ рдФрд░ рдбрд┐рдЯреИрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рддрд░реАрдХреЗ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ: <br><br><ul><li>  рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╡рд┐рдзрд┐ addDrawable () - рдУрд╕ рдХреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдПрдХ рдбреНрд░реЙрдмрд▓ рддрддреНрд╡ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреЙрдЗрдВрдЯрд░ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ :: рдЬрд┐рдУрдб рдХреНрд▓рд╛рд╕ред  рдпреЗ рд╕рднреА рддрддреНрд╡ osg :: ref_ptr &lt;&gt; рд╕реНрдорд╛рд░реНрдЯ рдкреЙрдЗрдВрдЯрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рд╣реЛрддреЗ рд╣реИрдВред <br></li><li>  рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╡рд┐рдзрд┐ рд╣рдЯрд╛рдиреЗ рдпреЛрдЧреНрдп () рдФрд░ рд╣рдЯрд╛рдиреЗ рдпреЛрдЧреНрдп () osg :: Geode рд╕реЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдирд┐рдХрд╛рд▓рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рд╕рдВрджрд░реНрдн рдЧрдгрдирд╛ рдХреЛ рдШрдЯрд╛рддрд╛ рд╣реИред  рд╣рдЯрд╛рдиреЗ рдпреЛрдЧреНрдп () рд╡рд┐рдзрд┐ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ рдмреНрдпрд╛рдЬ рдХреЗ рддрддреНрд╡ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдХреЗрддрдХ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЗрддреА рд╣реИ, рдФрд░ рд╣рдЯрд╛рдП рдЬрд╛рдиреЗ рдпреЛрдЧреНрдп () рд╡рд┐рдзрд┐ рдореЗрдВ рджреЛ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реЛрддреЗ рд╣реИрдВ: рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реВрдЪрдХрд╛рдВрдХ рдФрд░ рддрддреНрд╡реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдСрдЧ рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдирд╛ :: рдЬрд┐рдУрдб рдСрдмреНрдЬреЗрдХреНрдЯ рд╕рд░рдгреАред <br></li><li>  GetDrawable () рд╡рд┐рдзрд┐ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд░рд┐рдд рд╕реВрдЪрдХрд╛рдВрдХ рдкрд░ рдПрдХ рддрддреНрд╡ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдХреЗрддрдХ рд▓реМрдЯрд╛рддреА рд╣реИред <br></li><li>  GetNumDrawables () рд╡рд┐рдзрд┐ osg :: Geode рд╕реЗ рдЬреБрдбрд╝реЗ рддрддреНрд╡реЛрдВ рдХреА рдХреБрд▓ рд╕рдВрдЦреНрдпрд╛ рд▓реМрдЯрд╛рддреА рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдУрд╕реНрдЧ :: рдЬрд┐рдпреЛрдб рд╕реЗ рд╕рднреА рддрддреНрд╡реЛрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдРрд╕реЗ рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <br></li></ul><br><pre><code class="cpp hljs">geode-&gt;removeDrawables(<span class="hljs-number"><span class="hljs-number">0</span></span>, geode-&gt;getNumDrawables());</code> </pre> <br><h1>  2. рд╕рд░рд▓ рдЖрдХреГрддрд┐рдпрд╛рдБ рдмрдирд╛рдирд╛ </h1><br>  OSG рдУрдПрд╕рдЬреА :: рд╢реЗрдкрдбреНрд░рд╛рд╡реЗрдмрд▓ рдХреНрд▓рд╛рд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдСрд╕рдЧ рдХрд╛ рд╡рдВрд╢рдЬ рд╣реИ: рдбреНрд░реЙрдПрдмрд▓ рдХреНрд▓рд╛рд╕ рдФрд░ рд╕рд░рд▓ рддреНрд░рд┐-рдЖрдпрд╛рдореА рдкреНрд░рд╛рдЗрдореЗрдЯрд┐рд╡ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕ рд╡рд░реНрдЧ рдореЗрдВ рдПрдХ рдСрдЧ :: рдЖрдХреГрддрд┐ рд╡рд╕реНрддреБ рд╢рд╛рдорд┐рд▓ рд╣реИ рдЬреЛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЬреНрдпрд╛рдорд┐рддрд┐ рдФрд░ рдЕрдиреНрдп рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреА рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕реЗрдЯрд╢реИрдк () рдкрджреНрдзрддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд┐рдорд┐рдЯрд┐рд╡ рдЙрддреНрдкрдиреНрди рд╣реЛрддреЗ рд╣реИрдВ <br><br><pre> <code class="cpp hljs">shapeDrawable-&gt;setShape(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Box(osg::Vec3(<span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), <span class="hljs-number"><span class="hljs-number">10.0f</span></span>, <span class="hljs-number"><span class="hljs-number">10.0f</span></span>, <span class="hljs-number"><span class="hljs-number">5.0f</span></span>));</code> </pre><br>  рдПрдХ рдЬреНрдпрд╛рдорд┐рддреАрдп рдХреЗрдВрджреНрд░ рдХреЗ рд╕рд╛рде рдмрд┐рдВрджреБ (1.0, 0.0, 0.0) рдХреА рдЪреМрдбрд╝рд╛рдИ рдФрд░ 10 рдХреА рдКрдВрдЪрд╛рдИ рдФрд░ 5 рдЗрдХрд╛рдЗрдпреЛрдВ рдХреА рдЧрд╣рд░рд╛рдИ рдХреЗ рд╕рд╛рде рдПрдХ рдЖрдпрддрд╛рдХрд╛рд░ рдмреЙрдХреНрд╕ рдмрдирд╛рддрд╛ рд╣реИред  Osg :: Vec3 рд╡рд░реНрдЧ рддреНрд░рд┐-рдЖрдпрд╛рдореА рдЕрдВрддрд░рд┐рдХреНрд╖ рдореЗрдВ рдПрдХ рд╡реЗрдХреНрдЯрд░ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ (рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, osg :: Vec2 рдФрд░ osg :: Vec4 рдЗрд╕реА рдЖрдпрд╛рдо рдХреЗ рд╡реИрдХреНрдЯрд░ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╡рд░реНрдЧ рднреА рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдП рдЧрдП рд╣реИрдВ)ред <br><br>  OSG :: Box, osg :: Capsule, osg :: Cone, osg :: Cylinder and osg :: рдХреНрд╖реЗрддреНрд░ред <br><br>  рдЗрд╕ рддрдВрддреНрд░ рдХреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдХреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред <br><br>  <strong>main.h</strong> <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg/ShapeDrawable&gt; #include &lt;osg/Geode&gt; #include &lt;osgViewer/Viewer&gt; #endif // MAIN_H</span></span></span></span></code> </pre><br>  <strong>main.cpp</strong> <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> int main(int argc, char *argv[]) { (void) argc; (void) argv; osg::ref_ptr</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg::ShapeDrawable&gt; shape1 = new osg::ShapeDrawable; shape1-&gt;setShape(new osg::Box(osg::Vec3(-3.0f, 0.0f, 0.0f), 2.0f, 2.0f, 1.0f)); osg::ref_ptr&lt;osg::ShapeDrawable&gt; shape2 = new osg::ShapeDrawable; shape2-&gt;setShape(new osg::Cone(osg::Vec3(0.0f, 0.0f, 0.0f), 1.0f, 1.0f)); shape2-&gt;setColor(osg::Vec4(0.0f, 1.0f, 0.0f, 1.0f)); osg::ref_ptr&lt;osg::ShapeDrawable&gt; shape3 = new osg::ShapeDrawable; shape3-&gt;setShape(new osg::Sphere(osg::Vec3(3.0f, 0.0f, 0.0f), 1.0f)); shape3-&gt;setColor(osg::Vec4(0.0f, 0.0f, 1.0f, 1.0f)); osg::ref_ptr&lt;osg::Geode&gt; root = new osg::Geode; root-&gt;addDrawable(shape1.get()); root-&gt;addDrawable(shape2.get()); root-&gt;addDrawable(shape3.get()); osgViewer::Viewer viewer; viewer.setSceneData(root.get()); return viewer.run(); }</span></span></span></span></code> </pre><br>  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдХреЛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ: рдХрд╛рд░реНрдпрдХреНрд░рдо рдореЗрдВ рддреАрди рд╕рд░рд▓ рдЖрдХрд╛рд░ рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ, рд╕рдВрдХрд▓рди рдФрд░ рд▓реЙрдиреНрдЪ рдХреЗ рдмрд╛рдж рд╣рдо рдЗрд╕ рддрд░рд╣ рдХреЗ рдкрд░рд┐рдгрд╛рдо рджреЗрдЦреЗрдВрдЧреЗ <br><br><img src="https://habrastorage.org/webt/mu/kl/cq/muklcqrapar1quikfyshzkang-4.png"><br><br>  рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рддрдВрддреНрд░ рд╕рд░рд▓ рдФрд░ рд╕реАрдзрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЬреНрдпрд╛рдорд┐рддрд┐ рдмрдирд╛рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдкреНрд░рднрд╛рд╡реА рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдУрдПрд╕рдЬреА :: рдЬреНрдпрд╛рдорд┐рддрд┐ рд╡рд░реНрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЙрдЪреНрдЪ-рдкреНрд░рджрд░реНрд╢рди рдУрдПрд╕рдЬреА-рдЖрдзрд╛рд░рд┐рдд рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдореЗрдВ рдЬреНрдпрд╛рдорд┐рддрд┐ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><h1>  3. рдЬреНрдпреЛрдореЗрдЯреНрд░реА рдбреЗрдЯрд╛ рдХрд╛ рд╕рдВрдЧреНрд░рд╣рдг: рдСрд░реНрдЧреНрд╕ :: рдПрд░реЗ рдФрд░ рдСрд╕рдЧ :: рдЬреНрдпреЛрдореЗрдЯреНрд░реА </h1><br>  Osg :: рд╕рд░рдгреА рд╡рд░реНрдЧ рдПрдХ рдореВрд▓ рд╕рд╛рд░ рд╡рд░реНрдЧ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рдХрдИ рд╡рдВрд╢рдЬреЛрдВ рдХреЛ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╣реИ, рдЬреЛ OpenGL рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкрд╛рд░рд┐рдд рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕ рд╡рд░реНрдЧ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рд╕реАрдбреА рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╕реЗ std :: рд╡реЗрдХреНрдЯрд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд╕рдорд╛рди рд╣реИред  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдкреБрд╢_рдмреИрдХ () рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╕рджрд┐рд╢ рдХреЛ рдПрдХ рд╕рджрд┐рд╢ рд╕рд░рдгреА рдореЗрдВ рдЬреЛрдбрд╝рдирд╛ рджрд┐рдЦрд╛рддрд╛ рд╣реИ <br><br><pre> <code class="cpp hljs">vertices-&gt;push_back(osg::Vec3(<span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>));</code> </pre><br>  OSG рд╕рд░рдгрд┐рдпреЛрдВ рдХреЛ рдвреЗрд░ рдкрд░ рдЖрд╡рдВрдЯрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╕реНрдорд╛рд░реНрдЯ рдкреЙрдЗрдВрдЯрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рд╕рд░рдгреА рддрддреНрд╡реЛрдВ рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдУрдПрд╕рдЬреА :: рд╡реАрдИрд╕реА 3 рдпрд╛ рдУрдПрд╕рдЬреА :: рд╡реАрдИрд╕реА 2, рдЬреЛ рд╕реНрдЯреИрдХ рдкрд░ рднреА рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдУрдПрд╕рдЬреА :: рдЬреНрдпрд╛рдорд┐рддрд┐ рд╡рд░реНрдЧ рдУрдкрдирдкреНрд▓реЗ рдХрд╛рд░реНрдпреЛрдВ рдкрд░ рдПрдХ рдЖрд╡рд░рдг рд╣реИ рдЬреЛ рд╢реАрд░реНрд╖ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдпрд╣ osg :: Drawable class рд╕реЗ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ osg :: Geode рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реВрдЪреА рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рд╡рд░реНрдЧ рдЗрдирдкреБрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рд╕рд░рдгрд┐рдпреЛрдВ рдХреЛ рд▓реЗрддрд╛ рд╣реИ рдФрд░ рдУрдкрдирдЬреАрдПрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЬреНрдпрд╛рдорд┐рддрд┐ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред <br><br><h1>  4. рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рдФрд░ рдЙрдирдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ </h1><br>  рдПрдХ рд╢реАрд░реНрд╖ рд░реЗрдЦрд╛ рдЬреНрдпрд╛рдорд┐рддрд┐ рдЖрджрд┐рдореЛрдВ рдХреА рдПрдХ рдкрд░рдорд╛рдгреБ рдЗрдХрд╛рдИ рд╣реИред  рдЗрд╕рдореЗрдВ рдХрдИ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ рдЬреЛ рджреЛ рдпрд╛ рддреАрди рдЖрдпрд╛рдореА рд╕реНрдерд╛рди рдореЗрдВ рдПрдХ рдмрд┐рдВрджреБ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреА рд╣реИрдВред  рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ: рд╕реНрдерд┐рддрд┐, рд░рдВрдЧ, рд╕рд╛рдорд╛рдиреНрдп рд╡реЗрдХреНрдЯрд░, рдмрдирд╛рд╡рдЯ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ, рдХреЛрд╣рд░реЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ, рдФрд░ рдЗрд╕реА рддрд░рд╣ред  рд╢реАрд░реНрд╖ рдореЗрдВ рд╣рдореЗрд╢рд╛ рд╕реНрдерд╛рди рдХреА рд╕реНрдерд┐рддрд┐ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП, рдЕрдиреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП, рд╡реЗ рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ рдореМрдЬреВрдж рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  OpenGL 16 рдореВрд▓ рд╢реАрд░реНрд╖ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рд╕рд░рдгрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рд╕рднреА рд╡рд┐рд╢реЗрд╖рддрд╛ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЛ рдСрдЧ :: рдЬреНрдпреЛрдореЗрдЯреНрд░реА рдХреНрд▓рд╛рд╕ рджреНрд╡рд╛рд░рд╛ рд╕рдорд░реНрдерд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╕реЗрдЯ рдХреЗ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ * рдПрд░реЗ ()ред <br><br>  <b>OpenSceneGraph рдореЗрдВ рд╡рд░реНрдЯреЗрдХреНрд╕ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ</b> <br><table><tbody><tr><th>  рдЧреБрдг </th><th>  рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ </th><th>  Osg :: рдЬреНрдпрд╛рдорд┐рддрд┐ рд╡рд┐рдзрд┐ </th><th>  рд╕рдорддреБрд▓реНрдп OpenGL рдХреЙрд▓ </th></tr><tr><td>  рд╕реНрдерд┐рддрд┐ </td><td>  3-рд╡реЗрдХреНрдЯрд░ </td><td>  setVertexArray () </td><td>  glVertexPointer () </td></tr><tr><td>  рд╕рд╛рдзрд╛рд░рдг </td><td>  3-рд╡реЗрдХреНрдЯрд░ </td><td>  setNormalArray () </td><td>  glNormalPointer () </td></tr><tr><td>  рд░рдВрдЧ </td><td>  4-рд╡реЗрдХреНрдЯрд░ </td><td>  setColorArray () </td><td>  glColorPointer () </td></tr><tr><td>  рджреНрд╡рд┐рддреАрдпрдХ рд░рдВрдЧ </td><td>  4-рд╡реЗрдХреНрдЯрд░ </td><td>  рд╕реЗрдЯрд╕реЙрдиреНрдбреНрд░реАрдХрд╛рд░реЗрд▓рдЕрд░реЗ () </td><td>  glSecondaryColorPointerEXT () </td></tr><tr><td>  рдХреЛрд╣рд░рд╛ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ </td><td>  рдирд╛рд╡ </td><td>  setFogCoordArray () </td><td>  glFogCoordPointerEXT () </td></tr><tr><td>  рдмрдирд╛рд╡рдЯ рд╕рдордиреНрд╡рдп рдХрд░рддреА рд╣реИ </td><td>  2- рдпрд╛ 3-рд╡реЗрдХреНрдЯрд░ </td><td>  рд╕реЗрдЯрдЯреЗрдХреНрд╕реЛрдХрд╛рд░реНрдбрдЕрд░реЗ () </td><td>  glTexCoordPointer () </td></tr><tr><td>  рдЕрдиреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ </td><td>  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд </td><td>  setVertexArribArray () </td><td>  glVertexAttribPointerARB () </td></tr></tbody></table><br>  рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдкреНрд░рддреНрдпреЗрдХ рдХреЛрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рд╕реЗрдЯ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдЬреЛ рдПрдХ рд╣реА рдЖрдХрд╛рд░ рдХреЗ рдХрдИ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рдЧрдарди рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИ - рдЕрдиреНрдпрдерд╛ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рдЖрдХрд╛рд░ рдореЗрдВ рдПрдХ рдмреЗрдореЗрд▓ рдЗрдВрдЬрди рдХреЗ рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдЬрдиреНрдо рджреЗ рд╕рдХрддрд╛ рд╣реИред  рдУрдПрд╕рдЬреА рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╡рд░реНрдЯреЗрдХреНрд╕ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рддрд░реАрдХреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ <br><br><pre> <code class="cpp hljs">geom-&gt;setColorBinding(osg::Geometry::BIND_PER_VERTEX);</code> </pre><br>  рдЗрд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рд╢реАрд░реНрд╖ рдФрд░ рд╢реАрд░реНрд╖ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд░рдВрдЧ рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рд╕рд╣рд╕рдВрдмрдВрдзрд┐рдд рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдЧрд░ рдЖрдк рдРрд╕реЗ рдХреЛрдб рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ <br><br><pre> <code class="cpp hljs">geom-&gt;setColorBinding(osg::Geometry::BIND_OVERALL);</code> </pre><br>  рдлрд┐рд░ рд╡рд╣ рдкреВрд░реЗ рдЬреНрдпрд╛рдорд┐рддрд┐ рдкрд░ рдПрдХ рд░рдВрдЧ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕реА рдкреНрд░рдХрд╛рд░, рдЕрдиреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдмрдВрдзреЛрдВ рдХреЛ рд╕реЗрдЯрдиреЙрд░реНрдорд▓ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ (), рд╕реЗрдЯрд╕реЙрдиреНрдбрд░реАрдХреЛрд▓рд░рдмрд╛рдЗрдВрдбрд┐рдВрдЧ (), рд╕реЗрдЯрдлреЛрдЧреЛрдХреЛрд░реНрдбрдмрд╛рдЗрдВрдбрд┐рдВрдЧ (), рдФрд░ рд╕реЗрдЯ рд╡реАрд░рдЯреЗрдХреНрд╕реНрдЯрдПрдЯреНрд░рд┐рдмрд╛рдЗрдВрдбрд┐рдВрдЧ () рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br><h1>  5. рдЬреНрдпрд╛рдорд┐рддрд┐ рдЖрджрд┐рдореЛрдВ рдХреЗ рд╕рдореВрд╣ </h1><br>  рд╡рд░реНрдЯреЗрдХреНрд╕ рд╡рд┐рд╢реЗрд╖рддрд╛ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдЕрдЧрд▓рд╛ рдЪрд░рдг рдпрд╣ рд╡рд░реНрдгрди рдХрд░рдирд╛ рд╣реИ рдХрд┐ рд╢реАрд░реНрд╖ рдбреЗрдЯрд╛ рдХреИрд╕реЗ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рд╡рд░реНрдЪреБрдЕрд▓ рдСрд╕реНрдЧ :: рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрдЯрд╕реЗрдЯ рдХреНрд▓рд╛рд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рд░реЗрдВрдбрд░рд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдЬреЗрдирд░реЗрдЯ рдХрд┐рдП рдЧрдП рдЬреНрдпрд╛рдорд┐рддреАрдп рдкреНрд░рд╛рдЗрдореЗрдЯрд┐рдХреНрд╕ рдХреЛ рд╡рд░реНрдЯрд┐рдХрд▓ рдХреЗ рд╕реЗрдЯ рд╕реЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдУрдПрд╕рдЬреА :: рдЬреНрдпрд╛рдорд┐рддрд┐ рд╡рд░реНрдЧ рдЬреНрдпрд╛рдорд┐рддрд┐ рдЖрджрд┐рдо рдХреЗ рд╕реЗрдЯ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рддрд░реАрдХреЗ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ: <br><br><ul><li>  addPrimitiveSet () - рдПрдХ рдСрдЧреНрдореЗрдВрдЯ рдореЗрдВ рд╕реЗрдЯрд┐рдорд┐рдЯреА рдХреЗ рдПрдХ рд╕реЗрдЯ рдореЗрдВ рдПрдХ рдкреЙрдЗрдВрдЯрд░ рдХреЛ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ :: рдЬреНрдпрд╛рдорд┐рддрд┐ рдСрдмреНрдЬреЗрдХреНрдЯред <br></li><li>  removePrimitiveSet () - рдЖрджрд┐рдо рдХрд╛ рдПрдХ рд╕реЗрдЯ рдирд┐рдХрд╛рд▓реЗрдВред  рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ, рдпрд╣ рд╕реЗрдЯ рдХреЗ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реВрдЪрдХрд╛рдВрдХ рдФрд░ рд╣рдЯрд╛рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕реЗрдЯ рдХреА рд╕рдВрдЦреНрдпрд╛ рд▓реЗрддрд╛ рд╣реИред <br></li><li>  getPrimitiveSet () - рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд░рд┐рдд рдЗрдВрдбреЗрдХреНрд╕ рдкрд░ рдкреНрд░рд╛рдЗрдореЗрдЯ рдХрд╛ рдПрдХ рд╕реЗрдЯ рджреЗрддрд╛ рд╣реИред <br></li><li>  getNumPrimitiveSets () - рдЗрд╕ рдЬреНрдпрд╛рдорд┐рддрд┐ рд╕реЗ рдЬреБрдбрд╝реЗ рдЖрджрд┐рдо рдХреЗ рд╕реЗрдЯ рдХреА рдХреБрд▓ рд╕рдВрдЦреНрдпрд╛ рд▓реМрдЯрд╛рддрд╛ рд╣реИред <br></li></ul><br>  Osg :: PrimitiveSet рд╡рд░реНрдЧ рд╕рд╛рд░ рд╣реИ рдФрд░ рдЗрд╕реЗ рддрддреНрдХрд╛рд▓ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХрдИ рд╡реНрдпреБрддреНрдкрдиреНрди рд╡рд░реНрдЧ рдЬреЛ рдХрд┐ OpenGL рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реЛрдиреЗ рд╡рд╛рд▓реА рдЖрджрд┐рдорддрд╛ рдХреЗ рд╕реЗрдЯ рдХреЛ рдЗрдирдХреИрдкреНрд╕реБрд▓реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ osg :: DrawArrays рдФрд░ osg :: DrawElementsUInt, рдЗрд╕рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рддреЗ рд╣реИрдВред <br><br>  Osg :: DrawArrays рд╡рд░реНрдЧ рдПрдХ рдЬреНрдпрд╛рдорд┐рддреАрдп рдЖрджрд┐рдо рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд░реНрдЯреЗрдХреНрд╕ рд╕рд░рдгреА рдХреЗ рдХрдИ рд▓рдЧрд╛рддрд╛рд░ рддрддреНрд╡реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕реЗ рдПрдХ рд╡рд┐рдзрд┐ рдХрд╣рдХрд░ рдЬреНрдпрд╛рдорд┐рддрд┐ рд╕реЗ рдирд┐рд░реНрдорд┐рдд рдФрд░ рд╕рдВрд▓рдЧреНрди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br><pre> <code class="cpp hljs">geom-&gt;addPrimitiveSet(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::DrawArrays(mode, first, count));</code> </pre><br>  рдкрд╣рд▓рд╛ рдкреИрд░рд╛рдореАрдЯрд░ рдореЛрдб рдЖрджрд┐рдо рдкреНрд░рдХрд╛рд░ рдХреЛ рд╕рдВрдмрдВрдзрд┐рдд OpenGL рдХреЗ рдЖрджрд┐рдо рдкреНрд░рдХрд╛рд░реЛрдВ рдкрд░ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ: GL_POINTS, GL_LINE_STRIP, GL_LINE_LOOP, GL_LINES, GL_TRIANGLE_STRIP, GL_TRIANGLE_FAN, GL_TRIANGLES, GL_QUAD_STRIP, GL_QUADS рдФрд░ GLAADADSред <br><br>  рдкрд╣рд▓реЗ рдФрд░ рджреВрд╕рд░реЗ рдкреИрд░рд╛рдореАрдЯрд░ рдореЗрдВ рд╡рд░реНрдЯреЗрдХреНрд╕ рдРрд░реЗ рдореЗрдВ рдкрд╣рд▓рд╛ рдЗрдВрдбреЗрдХреНрд╕ рдФрд░ рдЙрди рд╡рд░реНрдЯрд┐рдХрд▓ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рдирд╕реЗ рдЬреНрдпрд╛рдорд┐рддрд┐ рдЙрддреНрдкрдиреНрди рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред  <strong>рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдУрдПрд╕рдЬреА рдпрд╣ рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдореЛрдб рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЬреНрдпрд╛рдорд┐рддрд┐ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╕рдВрдЦреНрдпрд╛рдУрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреНрд░реИрд╢ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ!</strong> <br><br><h1>  6. рдЙрджрд╛рд╣рд░рдг - рдПрдХ рдЪрд┐рддреНрд░рд┐рдд рд╡рд░реНрдЧ рдЦреАрдВрдЪрдирд╛ </h1><br>  рд╣рдо рдЙрдкрд░реЛрдХреНрдд рд╕рднреА рдХреЛ рдПрдХ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ <br><br><div class="spoiler">  <b class="spoiler_title">рдХреНрд╡рд╛рдб рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдг рд╕реНрд░реЛрдд рдХреЛрдб</b> <div class="spoiler_text">  <strong>main.h</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg/Geometry&gt; #include &lt;osg/Geode&gt; #include &lt;osgViewer/Viewer&gt; #endif // MAIN_H</span></span></span></span></code> </pre><br>  <strong>main.cpp</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> int main(int argc, char *argv[]) { osg::ref_ptr</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg::Vec3Array&gt; vertices = new osg::Vec3Array; vertices-&gt;push_back(osg::Vec3(0.0f, 0.0f, 0.0f)); vertices-&gt;push_back(osg::Vec3(1.0f, 0.0f, 0.0f)); vertices-&gt;push_back(osg::Vec3(1.0f, 0.0f, 1.0f)); vertices-&gt;push_back(osg::Vec3(0.0f, 0.0f, 1.0f)); osg::ref_ptr&lt;osg::Vec3Array&gt; normals = new osg::Vec3Array; normals-&gt;push_back(osg::Vec3(0.0f, -1.0f, 0.0f)); osg::ref_ptr&lt;osg::Vec4Array&gt; colors = new osg::Vec4Array; colors-&gt;push_back(osg::Vec4(1.0f, 0.0f, 0.0f, 1.0f)); colors-&gt;push_back(osg::Vec4(0.0f, 1.0f, 0.0f, 1.0f)); colors-&gt;push_back(osg::Vec4(0.0f, 0.0f, 1.0f, 1.0f)); colors-&gt;push_back(osg::Vec4(1.0f, 1.0f, 1.0f, 1.0f)); osg::ref_ptr&lt;osg::Geometry&gt; quad = new osg::Geometry; quad-&gt;setVertexArray(vertices.get()); quad-&gt;setNormalArray(normals.get()); quad-&gt;setNormalBinding(osg::Geometry::BIND_OVERALL); quad-&gt;setColorArray(colors.get()); quad-&gt;setColorBinding(osg::Geometry::BIND_PER_VERTEX); quad-&gt;addPrimitiveSet(new osg::DrawArrays(GL_QUADS, 0, 4)); osg::ref_ptr&lt;osg::Geode&gt; root = new osg::Geode; root-&gt;addDrawable(quad.get()); osgViewer::Viewer viewer; viewer.setSceneData(root.get()); return viewer.run(); }</span></span></span></span></code> </pre><br></div></div><br>  рд╕рдВрдХрд▓рди рдФрд░ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рдЗрд╕рдХреЗ рд╕рдорд╛рди рдкрд░рд┐рдгрд╛рдо рдорд┐рд▓рддрд╛ рд╣реИ <br><br><img src="https://habrastorage.org/webt/pz/1p/e4/pz1pe4inopylxd1vikvi4kzm8m0.png"><br><br>  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдХреЛ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рддреЛ, рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рд╡рд░реНрдЧ рдХреЗ рдХреЛрдиреЗ рдХреА рдПрдХ рд╕рд░рдгреА рдмрдирд╛рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдЙрдирдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддреЗ рд╣реИрдВ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::Vec3Array&gt; vertices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Vec3Array; vertices-&gt;push_back(osg::Vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>)); vertices-&gt;push_back(osg::Vec3(<span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>)); vertices-&gt;push_back(osg::Vec3(<span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>)); vertices-&gt;push_back(osg::Vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>));</code> </pre><br>  рдЕрдЧрд▓рд╛ рд╣рдо рдорд╛рдирджрдВрдб рдХреА рд╕рд░рдгреА рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВред  рд╣рдорд╛рд░реЗ рд╕рд░рд▓ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рд╢реАрд░реНрд╖ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рдмрд╕ рд╡рд░реНрдЧ рдХреЗ рд╡рд┐рдорд╛рди рдХреЗ рд▓рдВрдмрд╡рдд рдирд┐рд░реНрджреЗрд╢рд┐рдд рдПрдХ рдЗрдХрд╛рдИ рд╡реЗрдХреНрдЯрд░ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::Vec3Array&gt; normals = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Vec3Array; normals-&gt;push_back(osg::Vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>));</code> </pre><br>  рдкреНрд░рддреНрдпреЗрдХ рд╢реАрд░реНрд╖ рдХреЗ рд▓рд┐рдП рдПрдХ рд░рдВрдЧ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::Vec4Array&gt; colors = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Vec4Array; colors-&gt;push_back(osg::Vec4(<span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>)); colors-&gt;push_back(osg::Vec4(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>)); colors-&gt;push_back(osg::Vec4(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>)); colors-&gt;push_back(osg::Vec4(<span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>));</code> </pre><br>  рдЕрдм рдПрдХ рдЬреНрдпрд╛рдорд┐рддрд┐ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ рдЬрд╣рд╛рдВ рд╣рдорд╛рд░реЗ рд╡рд░реНрдЧ рдХрд╛ рд╡рд┐рд╡рд░рдг рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕реЗ рд░реЗрдВрдбрд░ рджреНрд╡рд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рд╣рдо рдЗрд╕ рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЛ рд▓рдВрдмрд╡рдд рд╕рд░рдгреА рджреЗрддреЗ рд╣реИрдВ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::Geometry&gt; quad = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Geometry; quad-&gt;setVertexArray(vertices.get());</code> </pre><br>  рдорд╛рдирджрдВрдбреЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдХреЛ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рдЗрдВрдЬрди рдХреЛ рд╕реВрдЪрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╕рднреА рдПрдХрд▓ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдорд╛рдирджрдВрдбреЛрдВ рдХреЗ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рд╡рд┐рдзрд┐ ("рдмрд╛рдЗрдВрдбрд┐рдВрдЧ") рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдХреЗ BIND_OVAERALL <br><br><pre> <code class="cpp hljs">quad-&gt;setNormalArray(normals.get()); quad-&gt;setNormalBinding(osg::Geometry::BIND_OVERALL);</code> </pre><br>  рд╢реАрд░реНрд╖реЛрдВ рдХреЗ рд░рдВрдЧреЛрдВ рдХреЛ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реБрдП, рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рд╣рдо рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рд╢реАрд░реНрд╖ рдХрд╛ рдЕрдкрдирд╛ рд░рдВрдЧ рд╣реЛрдЧрд╛ <br><br><pre> <code class="cpp hljs">quad-&gt;setColorArray(colors.get()); quad-&gt;setColorBinding(osg::Geometry::BIND_PER_VERTEX);</code> </pre><br>  рдЕрдм рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЗ рд▓рд┐рдП рдЖрджрд┐рдо рдХрд╛ рдПрдХ рд╕реЗрдЯ рдмрдирд╛рдПрдВред  рд╣рдо рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╡рд░реНрдЧрд╛рдХрд╛рд░ (GL_QUADS) рдЪреЗрд╣рд░реЛрдВ рдХреЛ рд╡рд░реНрдЯреЗрдХреНрд╕ рдРрд░реЗ рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдкрд╣рд▓реЗ рд╡рд░реНрдЯреЗрдХреНрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдЗрдВрдбреЗрдХреНрд╕ 0 рдХреЗ рд╕рд╛рде рд╡рд░реНрдЯреЗрдХреНрд╕ рд▓реЗрдирд╛ рдФрд░ рд╡рд░реНрдЯрд┐рдХрд▓ рдХреА рдХреБрд▓ рд╕рдВрдЦреНрдпрд╛ 4 рд╣реЛрдЧреА <br><br><pre> <code class="cpp hljs">quad-&gt;addPrimitiveSet(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::DrawArrays(GL_QUADS, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>));</code> </pre><br>  рдЦреИрд░, рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЗ рд╣рд╕реНрддрд╛рдВрддрд░рдг рдФрд░ рд░реЗрдВрдбрд░ рдХреЗ рд▓реЙрдиреНрдЪ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдиреЗ рд▓рд╛рдпрдХ рдирд╣реАрдВ рд╣реИ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::Geode&gt; root = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Geode; root-&gt;addDrawable(quad.get()); osgViewer::Viewer viewer; viewer.setSceneData(root.get()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> viewer.run();</code> </pre><br>  рдЙрдкрд░реЛрдХреНрдд рдХреЛрдб рд╢реБрджреНрдз OpenGL рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдбрд┐рдЬрд╝рд╛рдЗрди рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GLfloat vertices[][<span class="hljs-number"><span class="hljs-number">3</span></span>] = { тАж }; glEnableClientState( GL_VERTEX_ARRAY ); glVertexPointer( <span class="hljs-number"><span class="hljs-number">4</span></span>, GL_FLOAT, <span class="hljs-number"><span class="hljs-number">0</span></span>, vertices ); glDrawArrays( GL_QUADS, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span> );</code> </pre><br><h1>  7. рдЖрджрд┐рдо рдореЗрдВ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рдЕрдиреБрдХреНрд░рдордг </h1><br>  рдУрдПрд╕рдЬреА :: рдбреНрд░реЙрдЕрд░реНрд╕ рдХреНрд▓рд╛рд╕ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдЬрдм рдЕрдВрддрд░рд╛рд▓ рд╕реЗ рд╕реАрдзреЗ рдРрд░реЗрдЯреЗрдХреНрд╕ рдбреЗрдЯрд╛ рдкрдврд╝рддреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдпрд╣ рдЗрддрдирд╛ рдкреНрд░рднрд╛рд╡реА рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдПрдХ рд╣реА рд╢реАрд░реНрд╖ рд╡рд╕реНрддреБ рдХреЗ рдХрдИ рдЪреЗрд╣рд░реЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реЛред  рдЖрдЗрдП рдПрдХ рдЙрджрд╛рд╣рд░рдг рджреЗрдЦреЗрдВред <br><br><img src="https://habrastorage.org/webt/yp/is/wm/ypiswmcxzm2uokv9xdreonovmf4.png"><br><br>  рдХреНрдпреВрдм рдХреЗ рдЖрда рдХреЛрдиреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдВрдХрдбрд╝реЗ рд╕реЗ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рд╣рдо рд╡рд┐рдорд╛рди рдкрд░ рдХреНрдпреВрдм рдХреЗ рд╕рд╛рдордиреЗ рдХреА рдУрд░ рджреЗрдЦрддреЗ рд╣реИрдВ) рдХреБрдЫ рдХреЛрдиреЗ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдЪреЗрд╣рд░реЗ рдХреЗ рд╣реИрдВред  рдпрджрд┐ рдЖрдк 12 рддреНрд░рд┐рдХреЛрдгреАрдп рдЪреЗрд╣рд░реЛрдВ рдХрд╛ рдПрдХ рдШрди рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдпреЗ рдХреЛрдиреЗ рджреЛрд╣рд░рд╛рдП рдЬрд╛рдПрдВрдЧреЗ, рдФрд░ 8 рдХреЛрдиреЗ рдХреА рдПрдХ рд╕рд░рдгреА рдХреЗ рдмрдЬрд╛рдп, рд╣рдореЗрдВ 36 рдХреЛрдиреЗ рдХреА рдПрдХ рд╕рд░рдгреА рдорд┐рд▓рддреА рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдПрдХ рд╣реА рд╢реАрд░реНрд╖ рд╣реИрдВ! <br><br>  OSG рдХрдХреНрд╖рд╛рдПрдВ osg :: DrawElementsUInt, osg :: DrawElementsUByte рдФрд░ osg :: DrawElementsUShort, рдЬреЛ рдбреЗрдЯрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд░реНрдЯреЗрдХреНрд╕ рдЗрдВрдбреЗрдХреНрд╕ рд╕рд░рдгрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рд╡рд░реНрдгрд┐рдд рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдП рдЧрдП рд╣реИрдВред  рдЕрдиреБрдХреНрд░рдорд┐рдд рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛рдПрдБ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛рдПрдБ рдЕрдиреБрджреИрд░реНрдзреНрдп рдХреЗ рд╡рд░реНрдЯрд┐рдХрд▓ рдХрд╛ рдЕрдиреБрдХреНрд░рдордг рдХрд░рддреА рд╣реИрдВ рдЬреЛ рдЪреЗрд╣рд░реЗ рдФрд░ рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЗ рдЕрдиреНрдп рддрддреНрд╡реЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВред  рдХреНрдпреВрдм рдХреЗ рд▓рд┐рдП рдЗрди рдХрдХреНрд╖рд╛рдУрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╕рдордп, рдпрд╣ рдЖрда рдЦрд╛рдВрдЪреЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ рдЬреЛ рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреЗ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЪреЗрд╣рд░реЗ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВред <br><br>  рдкреНрд░рдХрд╛рд░ рдСрдЧ рдХреА рдХрдХреНрд╖рд╛рдПрдВ :: рдбреНрд░реЙрдЗрд▓рд┐рд╢ * рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдЙрд╕реА рддрд░рд╣ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреИрд╕реЗ рдорд╛рдирдХ рд╡рд░реНрдЧ рдПрд╕рдЯреАрдбреА :: рд╡реЗрдХреНрдЯрд░ред  рдЗрд╕ рддрд░рд╣ рдХреЗ рдХреЛрдб рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::DrawElementsUInt&gt; de = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::DrawElementsUInt(GL_TRIANGLES); de-&gt;push_back(<span class="hljs-number"><span class="hljs-number">0</span></span>); de-&gt;push_back(<span class="hljs-number"><span class="hljs-number">1</span></span>); de-&gt;push_back(<span class="hljs-number"><span class="hljs-number">2</span></span>); de-&gt;push_back(<span class="hljs-number"><span class="hljs-number">3</span></span>); de-&gt;push_back(<span class="hljs-number"><span class="hljs-number">0</span></span>); de-&gt;push_back(<span class="hljs-number"><span class="hljs-number">2</span></span>);</code> </pre><br>  рдпрд╣ рдХреЛрдб рдЖрдХреГрддрд┐ рдореЗрдВ рджрд┐рдЦрд╛рдП рдЧрдП рдХреНрдпреВрдм рдХреЗ рд╕рд╛рдордиреЗ рдХреЗ рднрд╛рдЧ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рдЖрдЗрдП рдПрдХ рдФрд░ рдЙрджрд╛рд╣рд░рдгрд╛рддреНрдордХ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ - рдПрдХ рдСрдХреНрдЯрд╛рд╣реЗрдбреНрд░реЙрди <br><br><img src="https://habrastorage.org/webt/is/cg/3r/iscg3rdq59wftnoy7h1iulgoczk.png"><br><br>  рдпрд╣ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ рдХреЗрд╡рд▓ рдЫрд╣ рдХреЛрдиреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдкреНрд░рддреНрдпреЗрдХ рд╢реАрд░реНрд╖ рдЪрд╛рд░ рддреНрд░рд┐рдХреЛрдгреАрдп рдЪреЗрд╣рд░реЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддрд╛ рд╣реИ!  рд╣рдо osg :: DrawArrays рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рднреА рдЖрда рдЪреЗрд╣рд░реЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП 24 рдХреЛрдиреЗ рдХреА рдПрдХ рд╕рд░рдгреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╣рдо рдЕрдиреНрдпрдерд╛ рдХрд░реЗрдВрдЧреЗ - рд╣рдо рдЫрд╣ рддрддреНрд╡реЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдореЗрдВ рдХреЛрдиреЗ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░реЗрдВрдЧреЗ, рдФрд░ рд╣рдо рдСрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЪреЗрд╣рд░реЗ рдЙрддреНрдкрдиреНрди рдХрд░рддреЗ рд╣реИрдВ :: DrawElementsUInt рд╡рд░реНрдЧред <br><br><div class="spoiler">  <b class="spoiler_title">рдСрдХреНрдЯрд╛рд╣реЗрдбреНрд░реЛрди рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдг рд╕реНрд░реЛрдд</b> <div class="spoiler_text">  <strong>main.h</strong> <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg/Geometry&gt; #include &lt;osg/Geode&gt; #include &lt;osgUtil/SmoothingVisitor&gt; #include &lt;osgViewer/Viewer&gt; #endif</span></span></span></span></code> </pre><br>  <strong>main.cpp</strong> <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> int main(int argc, char *argv[]) { osg::ref_ptr</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg::Vec3Array&gt; vertices = new osg::Vec3Array(6); (*vertices)[0].set( 0.0f, 0.0f, 1.0f); (*vertices)[1].set(-0.5f, -0.5f, 0.0f); (*vertices)[2].set( 0.5f, -0.5f, 0.0f); (*vertices)[3].set( 0.5f, 0.5f, 0.0f); (*vertices)[4].set(-0.5f, 0.5f, 0.0f); (*vertices)[5].set( 0.0f, 0.0f, -1.0f); osg::ref_ptr&lt;osg::DrawElementsUInt&gt; indices = new osg::DrawElementsUInt(GL_TRIANGLES, 24); (*indices)[ 0] = 0; (*indices)[ 1] = 1; (*indices)[ 2] = 2; (*indices)[ 3] = 0; (*indices)[ 4] = 4; (*indices)[ 5] = 1; (*indices)[ 6] = 4; (*indices)[ 7] = 5; (*indices)[ 8] = 1; (*indices)[ 9] = 4; (*indices)[10] = 3; (*indices)[11] = 5; (*indices)[12] = 3; (*indices)[13] = 2; (*indices)[14] = 5; (*indices)[15] = 1; (*indices)[16] = 5; (*indices)[17] = 2; (*indices)[18] = 3; (*indices)[19] = 0; (*indices)[20] = 2; (*indices)[21] = 0; (*indices)[22] = 3; (*indices)[23] = 4; osg::ref_ptr&lt;osg::Geometry&gt; geom = new osg::Geometry; geom-&gt;setVertexArray(vertices.get()); geom-&gt;addPrimitiveSet(indices.get()); osgUtil::SmoothingVisitor::smooth(*geom); osg::ref_ptr&lt;osg::Geode&gt; root = new osg::Geode; root-&gt;addDrawable(geom.get()); osgViewer::Viewer viewer; viewer.setSceneData(root.get()); return viewer.run(); }</span></span></span></span></code> </pre><br></div></div><br>  рдЖрдЗрдП рдЗрд╕ рдХреЛрдб рдХрд╛ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВред  рдмреЗрд╢рдХ, рд╣рдо рдЬреЛ рдкрд╣рд▓реА рдЪреАрдЬрд╝ рдХрд░рддреЗ рд╣реИрдВ, рд╡рд╣ рдЫрд╣ рд╕рд┐рд░реЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдмрдирд╛рддрд╛ рд╣реИ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::Vec3Array&gt; vertices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Vec3Array(<span class="hljs-number"><span class="hljs-number">6</span></span>); (*vertices)[<span class="hljs-number"><span class="hljs-number">0</span></span>].<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>( <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>); (*vertices)[<span class="hljs-number"><span class="hljs-number">1</span></span>].<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>(<span class="hljs-number"><span class="hljs-number">-0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">-0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>); (*vertices)[<span class="hljs-number"><span class="hljs-number">2</span></span>].<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>( <span class="hljs-number"><span class="hljs-number">0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">-0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>); (*vertices)[<span class="hljs-number"><span class="hljs-number">3</span></span>].<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>( <span class="hljs-number"><span class="hljs-number">0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>); (*vertices)[<span class="hljs-number"><span class="hljs-number">4</span></span>].<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>(<span class="hljs-number"><span class="hljs-number">-0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>); (*vertices)[<span class="hljs-number"><span class="hljs-number">5</span></span>].<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>( <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>);</code> </pre><br>  рд╣рдо рдкреЙрдЗрдВрдЯрд░ рдФрд░ рдСрдкрд░реЗрдЯрд░ [] рдСрдкрд░реЗрдЯрд░ (рд╣рдо рдпрд╛рдж рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ osg :: Array рдЕрдкрдиреЗ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ std :: рд╡реЗрдХреНрдЯрд░ рдХреЗ рд╕рдорд╛рди рд╣реИ) рдХреЗ dereferencing рдСрдкрд░реЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реАрдзреЗ рдЕрдкрдиреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рд╡реЗрдХреНрдЯрд░ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рддреНрдпреЗрдХ рд╢реАрд░реНрд╖ рдХреЛ рдЖрд░рдВрдн рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдЕрдм рд╡рд░реНрдЯреЗрдХреНрд╕ рдЗрдВрдбреЗрдХреНрд╕ рдХреА рд╕реВрдЪреА рдХреЗ рд░реВрдк рдореЗрдВ рдЪреЗрд╣рд░реЗ рдмрдирд╛рдПрдВ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::DrawElementsUInt&gt; indices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::DrawElementsUInt(GL_TRIANGLES, <span class="hljs-number"><span class="hljs-number">24</span></span>); (*indices)[ <span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>; (*indices)[ <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; (*indices)[ <span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  0 (*indices)[ 3] = 0; (*indices)[ 4] = 4; (*indices)[ 5] = 1; //  1 (*indices)[ 6] = 4; (*indices)[ 7] = 5; (*indices)[ 8] = 1; //  2 (*indices)[ 9] = 4; (*indices)[10] = 3; (*indices)[11] = 5; //  3 (*indices)[12] = 3; (*indices)[13] = 2; (*indices)[14] = 5; //  4 (*indices)[15] = 1; (*indices)[16] = 5; (*indices)[17] = 2; //  5 (*indices)[18] = 3; (*indices)[19] = 0; (*indices)[20] = 2; //  6 (*indices)[21] = 0; (*indices)[22] = 3; (*indices)[23] = 4; //  7</span></span></code> </pre><br>  рдЪреЗрд╣рд░реЗ рддреНрд░рд┐рдХреЛрдгреАрдп рд╣реЛрдВрдЧреЗ, 8 рд╣реЛрдВрдЧреЗ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреА рд╕реВрдЪреА рдореЗрдВ 24 рддрддреНрд╡ рд╢рд╛рдорд┐рд▓ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред  рдЗрд╕ рд╕рд░рдгреА рдореЗрдВ рдЪреЗрд╣рд░реЗ рдХреЗ рд╕реВрдЪрдХрд╛рдВрдХ рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рдЪрд▓рддреЗ рд╣реИрдВ: рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЪреЗрд╣рд░реЗ 0 рдХрд╛ рдЧрдарди рд╡рд░реНрдЯрд┐рдХрд▓ 0, 1, рдФрд░ 2 рд╕реЗ рд╣реЛрддрд╛ рд╣реИ;  рдЪреЗрд╣рд░рд╛ 1 - рдХреЛрдиреЗ 0, 4 рдФрд░ 1;  рдЪреЗрд╣рд░рд╛ 2 - рдХреЛрдиреЗ 4, 5 рдФрд░ 1 рдФрд░ рдЗрддрдиреЗ рдкрд░ред  рдпрджрд┐ рдЖрдк рдЪреЗрд╣рд░реЗ рдХреЗ рдореБрдЦ рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ (рддреЛ рдКрдкрд░ рджреА рдЧрдИ рдЖрдХреГрддрд┐ рджреЗрдЦреЗрдВ) рд╡рд░реНрдЯрд┐рдХрд▓ рдХреЛ рд╡рд╛рдорд╛рд╡рд░реНрдд рдХреНрд░рдо рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br>  рдкрд┐рдЫрд▓реЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ рд╣рдордиреЗ рдЬреЛ рдЬреНрдпрд╛рдорд┐рддрд┐ рдмрдирд╛рдИ рд╣реИ, рдЙрд╕реЗ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рдХрджрдоред  рдХреЗрд╡рд▓ рдПрдХ рдЪреАрдЬ рдЬреЛ рд╣рдордиреЗ рдирд╣реАрдВ рдХреА рд╡рд╣ рдереА рд╕реНрдореВрде (рдПрд╡рд░реЗрдЬреЗрдб) рдиреЙрд░реНрдореНрд╕ рдХреА рдСрдЯреЛрдореИрдЯрд┐рдХ рдЬрдирд░реЗрд╢рди, рдЬрд┐рд╕реЗ рд╣рдо рдХреЙрд▓ рдХрд░рдХреЗ рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдХрд░рддреЗ рд╣реИрдВ <br><br><pre> <code class="cpp hljs">osgUtil::SmoothingVisitor::smooth(*geom);</code> </pre><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрджрд┐ рдХрд┐рд╕реА рдЪреЗрд╣рд░реЗ рдХреЗ рдХреЛрдиреЗ рджрд┐рдП рдЧрдП рд╣реИрдВ, рддреЛ рдЙрд╕рдХреЗ рд▓рд┐рдП рд╕рд╛рдорд╛рдиреНрдп рдЧрдгрдирд╛ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИред  рдЬрд┐рди рдХреЛрдгреЛрдВ рдкрд░ рдХрдИ рдЪреЗрд╣рд░реЗ рдЕрднрд┐рд╕рд┐рдВрдЪрд┐рдд рд╣реЛрддреЗ рд╣реИрдВ, рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдФрд╕рдд рд╕рд╛рдорд╛рдиреНрдп рдХреА рдЧрдгрдирд╛ рдХреА рдЬрд╛рддреА рд╣реИ - рдЕрднрд┐рд╕рд╛рд░реА рдЪреЗрд╣рд░реЛрдВ рдХреЗ рдорд╛рдирджрдВрдб рдЬреЛрдбрд╝реЗ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рдкрд░рд┐рдгрд╛рдореА рд░рд╛рд╢рд┐ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╕рд╛рдорд╛рдиреНрдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпреЗ рдСрдкрд░реЗрд╢рди (рдФрд░ рд╕рд╛рде рд╣реА рдмрд╣реБрдд рдЕрдзрд┐рдХ!) рдЗрдВрдЬрди рджреНрд╡рд╛рд░рд╛ рд╣реА рдСрд╕реНрдЧреБрд▓реЗрдЯ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╕реЗ рдХрдХреНрд╖рд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд╣рдорд╛рд░реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд╣рдо рдЕрдкрдиреЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ * .pro рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЗрд╕ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рд╕рд╛рде рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд┐рдВрдХрд░ рдореЗрдВ рдПрдХ рдирд┐рд░реНрджреЗрд╢ рдЬреЛрдбрд╝реЗрдВрдЧреЗ <br><br>  <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">octahedron.pro</a></strong> <br><br><pre> <code class="cmake hljs">CONFIG(debug, debug|release) { <span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span> = $$join(<span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span>,,,_d) . . . LIBS += -L$$OSG_LIB_DIRECTORY -losgUtild } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { . . . LIBS += -L$$OSG_LIB_DIRECTORY -losgUtil }</code> </pre><br>  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╣рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрд░рд┐рдгрд╛рдо рдорд┐рд▓рддреЗ рд╣реИрдВ <br><br><img src="https://habrastorage.org/webt/sf/ia/yg/sfiayg-o7wqijwskwuw6276xx0y.png"><br><br>  рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдУрдкрдирдЬреАрдПрд▓ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ <br><br><img src="https://habrastorage.org/webt/7w/f0/mq/7wf0mqmabsa1ltwbzsgt189jsmy.png"><br><br>  рд╡рд░реНрдЯреЗрдХреНрд╕ рдРрд░реЗ рдореИрдХреЗрдирд┐рдЬрд╝реНрдо рдУрдкрдирдЬреАрдПрд▓ рдХреЙрд▓ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдореЛрд░реА рдореЗрдВ рд╡рд░реНрдЯреЗрдХреНрд╕ рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рдкрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕рд░реНрд╡рд░ рд╕рд╛рдЗрдб рдкрд░ OpenGL рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЛ рд╡рд┐рднрд┐рдиреНрди рд╢реАрд░реНрд╖ рд╕рд░рдгрд┐рдпреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдорд┐рд▓рддреА рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ рдЖрд░реЗрдЦ рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдУрдПрдирдЬреАрд╕реАрдПрд▓ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рдкрд░ рд╡рд░реНрдЯреЗрдХреНрд╕ рдмрдлрд░ рд╕реЗ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдФрд░, рдПрдХ рдХреНрд░рдордмрджреНрдз рддрд░реАрдХреЗ рд╕реЗ, рдкреНрд░рд╛рдЗрдореЗрдЯрд░реАрдЬ рдХреА рдЕрд╕реЗрдВрдмрд▓реА рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдХреИрд╕реЗ рдбреЗрдЯрд╛ рд╕реЗрдЯ * Array () рдХреЗ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ osg :: рдЬреНрдпрд╛рдорд┐рддрд┐ рд╡рд░реНрдЧред  Osg :: DrawArrays рд╡рд░реНрдЧ рдЗрди рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реАрдзреЗ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рдУрд╕реНрдЧ :: рдбреНрд░реЙрдЗрд▓рд┐рд╢ * рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рд╡рд░реНрдЯреЗрдХреНрд╕ рд╕рд░рдгрд┐рдпреЛрдВ рдХрд╛ рдЖрдпрд╛рдо рдХрдо рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЛ рд╣рд╕реНрддрд╛рдВрддрд░рд┐рдд рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдХреЛрдиреЗ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрдо рд╣реЛ рдЬрд╛рддреА рд╣реИред  рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдЖрдкрдХреЛ рд╕рд░реНрд╡рд░ рд╕рд╛рдЗрдб рдкрд░ рдПрдХ рд╢реАрд░реНрд╖ рдХреИрд╢ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред  OpenGL рдХреИрд╢ рдХреЛ рд╡рд░реНрдЯреЗрдХреНрд╕ рдбреЗрдЯрд╛ рдХреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рдкрд░ рд╡рд░реНрдЯреЗрдХреНрд╕ рдмрдлрд░ рд╕реЗ рдкрдврд╝рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдкрдврд╝рддрд╛ рд╣реИред  рдпрд╣ рд╕рдордЧреНрд░ рдкреНрд░рддрд┐рдкрд╛рджрди рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмрдврд╝рд╛рддрд╛ рд╣реИред <br><br><h1>  8. рдмрд╣реБрднреБрдЬ рдЬрд╛рд▓ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рддрдХрдиреАрдХ </h1><br>  OpenSceneGraph рджреГрд╢реНрдп рдЬреНрдпрд╛рдорд┐рддрд┐ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдмрд╣реБрднреБрдЬ рдЬрд╛рд▓ рдХреЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рддрдХрдиреАрдХреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред  рдЗрди рдкреНрд░реАрдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рд╡рд┐рдзрд┐рдпреЛрдВ, рдЬреИрд╕реЗ рдмрд╣реБрднреБрдЬ рдореЗрдВ рдХрдореА рдФрд░ рдЯреЗрд╕реЗрд▓реЗрд╢рди, рдЕрдХреНрд╕рд░ рдмрд╣реБрднреБрдЬ рдореЙрдбрд▓ рдмрдирд╛рдиреЗ рдФрд░ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдЙрдирдХреЗ рдкрд╛рд╕ рдПрдХ рд╕рд░рд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╡реЗ рдмрд╣реБрдд рдЬрдЯрд┐рд▓ рдЧрдгрдирд╛ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдСрди-рдж-рдлреНрд▓рд╛рдИ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИрдВред <br><br>  рд╡рд░реНрдгрд┐рдд рддрдХрдиреАрдХреЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ: <br><br><ol><li>  рдСрд╕рдЧреБрддрд┐рд▓ :: рд╕рд░рд▓реАрдХреГрдд - рдЬреНрдпрд╛рдорд┐рддрд┐ рдореЗрдВ рддреНрд░рд┐рдХреЛрдгреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдХрдо рдХрд░рдирд╛ред  рдореЙрдбрд▓ рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд░рд▓ () рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br></li><li>  osgUtil :: SmootingVisitor - рдорд╛рдирджрдВрдбреЛрдВ рдХреА рдЧрдгрдирд╛ред  рдЪрд┐рдХрдиреА () рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдореЙрдбрд▓ рдХреЗ рд▓рд┐рдП рдЪрд┐рдХрдиреА рдорд╛рдирджрдВрдбреЛрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдмрдЬрд╛рдп рдЙрдиреНрд╣реЗрдВ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рдЧрдгрдирд╛ рдХрд░рдиреЗ рдФрд░ рдорд╛рдирджрдВрдбреЛрдВ рдХреЗ рдПрдХ рд╕рд░рдгреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред <br></li><li>  osgUtil :: TangentSpaceGenerator - рдореЙрдбрд▓ рдХреЛрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдкрд░реНрд╢рд░реЗрдЦрд╛ рдЖрдзрд╛рд░ рд╡реИрдХреНрдЯрд░ рдХреА рдкреАрдврд╝реАред  рдпрд╣ рдЬрдирд░реЗрдЯ () рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ getTangentArray (), getNormalArray (), рдФрд░ getBinormalArray () рд╡рд┐рдзрд┐рдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдП рдЧрдП рдкрд░рд┐рдгрд╛рдо рдХреЛ рд╕рд╣реЗрдЬрддрд╛ рд╣реИред  GLSL рдореЗрдВ рд╢реЗрдбреНрд╕ рд▓рд┐рдЦрддреЗ рд╕рдордп рдЗрди рдкрд░рд┐рдгрд╛рдореЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рднрд┐рдиреНрди рд╢реАрд░реНрд╖ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br></li><li>  osgUtil :: Tesselator - рдПрдХ рдмрд╣реБрднреБрдЬ рдЬрд╛рд▓ рдХреЗ tessellation рдХрд░рддрд╛ рд╣реИ - рд╕рд░рд▓ (retesselatePolygons () рд╡рд┐рдзрд┐) рдХреЗ рдЕрдиреБрдХреНрд░рдо рдореЗрдВ рдЬрдЯрд┐рд▓ рдкреНрд░рд╛рдЗрдореЗрдЯрд┐рд╕ рдХреЛ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рддрд╛ рд╣реИ <br></li><li>  osgUtil :: TriStripVisitor - рдПрдХ рдЬреНрдпрд╛рдорд┐рддреАрдп рд╕рддрд╣ рдХреЛ рддреНрд░рд┐рдХреЛрдгреАрдп рдЪреЗрд╣рд░реЛрдВ рдХреЗ рд╕реНрдЯреНрд░рд┐рдкреНрд╕ рдХреЗ рдПрдХ рд╕реЗрдЯ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдХреБрд╢рд▓ рдореЗрдореЛрд░реА рдЦрдкрдд рдХреЗ рд╕рд╛рде рдкреНрд░рддрд┐рдкрд╛рджрди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рд╕реНрдЯреНрд░рд┐рдкрд┐рдлрд╛рдИ () рд╡рд┐рдзрд┐ GL_TRIANGLE_STRIP рд╕реЗрдЯ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдореЙрдбрд▓ рдкреНрд░рд╛рдЗрдореЗрдЯрд░реАрдЬ рдХреЗ рдПрдХ рд╕реЗрдЯ рдХреЛ рдЬреНрдпрд╛рдорд┐рддрд┐ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИред <br></li></ol><br>  рд╕рднреА рд╡рд┐рдзрд┐рдпрд╛рдБ рд╡рд╕реНрддреБ рдХреЗ рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЛ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рд▓реЗрддреА рд╣реИрдВ, рдЬреИрд╕реЗ рдСрдЧреНрдореЗрдВрдЯ рджреНрд╡рд╛рд░рд╛ рдкрд╛рд░рд┐рдд: рдЬреНрдпрд╛рдорд┐рддрд┐ рдФрд░ рд▓рд┐рдВрдХ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП <br><br><pre> <code class="cpp hljs">osgUtil::TriStripVisitor tsv; tsv.stripify(*geom);</code> </pre><br>  рдЬрд╣рд╛рдВ рдЬрд┐рдпреЛрдо рдПрдХ рд╕реНрдорд╛рд░реНрдЯ рдкреЙрдЗрдВрдЯрд░ рджреНрд╡рд╛рд░рд╛ рд╡рд░реНрдгрд┐рдд рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреА рдПрдХ рдЖрд╡реГрддреНрддрд┐ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рдХрдХреНрд╖рд╛рдПрдВ osg :: рд╕рд░рд▓реАрдХреГрдд, osg :: SmoothingVisitor рдФрд░ osg :: TriStripVisitor рд╕реАрдзреЗ рджреГрд╢реНрдп рдЧреНрд░рд╛рдл рдореЗрдВ рдиреЛрдбреНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП <br><br><pre> <code class="cpp hljs">osgUtil::TriStripVisitor tsv; node-&gt;accept(tsv);</code> </pre><br>  рд╕реНрд╡реАрдХрд╛рд░ () рд╡рд┐рдзрд┐ рд╕рднреА рдмрдЪреНрдЪреЗ рдХреЗ рдиреЛрдбреНрд╕ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреА рд╣реИ рдЬрдм рддрдХ рдХрд┐ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдСрдкрд░реЗрд╢рди рдСрд╕рдЧ рдХреЗ рдиреЛрдбреНрд╕ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рджреГрд╢реНрдп рдкреЗрдбрд╝ рдХреЗ рдЗрд╕ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд╕рднреА рдЯрд░реНрдорд┐рдирд▓ рдиреЛрдбреНрд╕ рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ: Geode рдкреНрд░рдХрд╛рд░ред <br><br>  рдЖрдЗрдП рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рдЯреЗрд╕реЗрд▓реЗрд╢рди рддрдХрдиреАрдХ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред <br><br><div class="spoiler">  <b class="spoiler_title">рдкреВрд░реНрдг рдЯрд╕реЗрд▓реЗрдЯрд░ рдЙрджрд╛рд╣рд░рдг рдХреЛрдб</b> <div class="spoiler_text">  <strong>main.h</strong> <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg/Geometry&gt; #include &lt;osg/Geode&gt; #include &lt;osgUtil/Tessellator&gt; #include &lt;osgViewer/Viewer&gt; #endif</span></span></span></span></code> </pre><br>  <strong>main.cpp</strong> <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> int main(int argc, char *argv[]) { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/*    ----- | _| | |_ | | ----- */</span></span></span><span class="hljs-meta"> osg::ref_ptr</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg::Vec3Array&gt; vertices = new osg::Vec3Array; vertices-&gt;push_back( osg::Vec3(0.0f, 0.0f, 0.0f) ); // 0 vertices-&gt;push_back( osg::Vec3(2.0f, 0.0f, 0.0f) ); // 1 vertices-&gt;push_back( osg::Vec3(2.0f, 0.0f, 1.0f) ); // 2 vertices-&gt;push_back( osg::Vec3(1.0f, 0.0f, 1.0f) ); // 3 vertices-&gt;push_back( osg::Vec3(1.0f, 0.0f, 2.0f) ); // 4 vertices-&gt;push_back( osg::Vec3(2.0f, 0.0f, 2.0f) ); // 5 vertices-&gt;push_back( osg::Vec3(2.0f, 0.0f, 3.0f) ); // 6 vertices-&gt;push_back( osg::Vec3(0.0f, 0.0f, 3.0f) ); // 7 osg::ref_ptr&lt;osg::Vec3Array&gt; normals = new osg::Vec3Array; normals-&gt;push_back( osg::Vec3(0.0f, -1.0f, 0.0f) ); osg::ref_ptr&lt;osg::Geometry&gt; geom = new osg::Geometry; geom-&gt;setVertexArray(vertices.get()); geom-&gt;setNormalArray(normals.get()); geom-&gt;setNormalBinding(osg::Geometry::BIND_OVERALL); geom-&gt;addPrimitiveSet(new osg::DrawArrays(GL_POLYGON, 0, 8)); osg::ref_ptr&lt;osg::Geode&gt; root = new osg::Geode; root-&gt;addDrawable(geom.get()); osgViewer::Viewer viewer; viewer.setSceneData(root.get()); return viewer.run(); }</span></span></span></span></code> </pre><br></div></div><br>  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдХреЛрдиреЗ рдХреА рд╕реНрдерд╛рдирд┐рдХ рд╕реНрдерд┐рддрд┐ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рд╣рдо GL_POLYGON рдкреНрд░рдХрд╛рд░ рдХреЗ рдПрдХ рдЪреЗрд╣рд░реЗ рдХреА рдкреАрдврд╝реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рдЖрда рдХреЛрдиреЗ рдХреЗ рдПрдХ рдЧреИрд░-рдЙрддреНрддрд▓ рдмрд╣реБрднреБрдЬ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╕рдВрдпреЛрдЬрди рдФрд░ рдирд┐рд╖реНрдкрд╛рджрди рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдЬрд┐рд╕ рдкрд░рд┐рдгрд╛рдо рдХреА рд╣рдо рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░рддреЗ рд╣реИрдВ рд╡рд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ - рдЙрджрд╛рд╣рд░рдг рдЧрд▓рдд рддрд░реАрдХреЗ рд╕реЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ <br><br><img src="https://habrastorage.org/webt/yb/d3/0f/ybd30fn9fa9duvxedfyb6igt3ui.png"><br><br>  рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рд░реНрдорд┐рдд рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЛ рджрд░реНрд╢рдХ рдХреЗ рдкрд╛рд╕ рдЬрд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЙрд╕реЗ рдмрдВрдж рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП <br><br><pre> <code class="cpp hljs">osgUtil::Tessellator ts; ts.retessellatePolygons(*geom);</code> </pre><br>  рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд╣рдореЗрдВ рд╕рд╣реА рдкрд░рд┐рдгрд╛рдо рдорд┐рд▓рддрд╛ рд╣реИ <br><br><img src="https://habrastorage.org/webt/p7/wj/fa/p7wjfanogrvkbdxksemk5li_vdi.png"><br><br>  рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ?  рдПрдХ рдЧреИрд░-рдЙрддреНрддрд▓ рдмрд╣реБрднреБрдЬ, рд╕рд╣реА рдЯреЗрд╕реЗрд▓реЗрд╢рди рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЗ рдмрд┐рдирд╛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдЙрдореНрдореАрдж рдХрд░рддреЗ рд╣реИрдВ, рдЪреВрдВрдХрд┐ рдУрдкрдирдЬреАрдПрд▓, рдкреНрд░рджрд░реНрд╢рди рдХрд╛ рдЕрдиреБрдХреВрд▓рди рдХрд░рдиреЗ рдХреА рдорд╛рдВрдЧ рдХрд░ рд░рд╣рд╛ рд╣реИ, рдЗрд╕реЗ рдПрдХ рд╕рд░рд▓, рдЙрддреНрддрд▓ рдмрд╣реБрднреБрдЬ рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдирд╛ рдЬрд╛рдПрдЧрд╛ рдпрд╛ рдмрд╕ рдЗрд╕реЗ рдЕрдирджреЗрдЦрд╛ рдХрд░ рджреЗрдЧрд╛, рдЬреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рдкрд░рд┐рдгрд╛рдо рджреЗ рд╕рдХрддрд╛ рд╣реИред <br><br>  OsgUtil :: Tessellator рд╡рд░реНрдЧ рдПрдХ рдЙрддреНрддрд▓ рдмрд╣реБрднреБрдЬ рдХреЛ рдЧреИрд░-рдЙрддреНрддрд▓ рдХреА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ - рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЛ GL_TRIANGLE_STRIP рдореЗрдВ рдмрджрд▓ рджреЗрддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/05/ho/do/05hodotfc4iltbsnlyevejuhvfw.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рд╡рд░реНрдЧ рдЫреЗрдж рдмрд╣реБрднреБрдЬ рдФрд░ рд╕реНрд╡-рдкреНрд░рддрд┐рдЪреНрдЫреЗрджрди рдмрд╣реБрднреБрдЬ рдХреЛ рд╕рдВрднрд╛рд▓ рд╕рдХрддрд╛ рд╣реИред рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ setWindsType () рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдореЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ GLU_TESS_WINDING_ODD рдпрд╛ GLU_TESS_WINDING_NONZERO, рдЬреЛ рдПрдХ рдЬрдЯрд┐рд▓ рдПрдВрдЯреЛрдирд┐рдпреЛ рдХреЗ рдЖрдВрддрд░рд┐рдХ рдФрд░ рдмрд╛рд╣рд░реА рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВред</font></font><br><br><h1>  рдирд┐рд╖реНрдХрд░реНрд╖ </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рд╣рдореЗрдВ рдПрдХ рдмреБрдирд┐рдпрд╛рджреА рд╕рдордЭ рдорд┐рд▓реА рдХрд┐ рдУрдПрд╕рдЬреА рдЗрдВрдЬрди рдореЗрдВ рддреАрди-рдЖрдпрд╛рдореА рд╡рд╕реНрддреБрдУрдВ рдХреА рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреИрд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рдФрд░ рд╕рдВрд╕рд╛рдзрд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред </font><font style="vertical-align: inherit;">рдРрд╕рд╛ рдордд рд╕реЛрдЪреЛ рдХрд┐ рдЙрди рд╕рд░рд▓ рдФрд░ рдмрд╣реБрдд рдкреНрд░рднрд╛рд╡рд╢рд╛рд▓реА рдЙрджрд╛рд╣рд░рдг рдирд╣реАрдВ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рд▓реЗрдЦ рдореЗрдВ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрдВрдЬрди рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХреА рд╕реАрдорд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдмрд╕ рдпреЗ рдЙрджрд╛рд╣рд░рдг рдбреЗрд╡рд▓рдкрд░ рдХреЛ OpenSceneGraph рдХреЗ рдпрд╛рдВрддреНрд░рд┐рдХреА рдХреЛ рд╕рдордЭрдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕ рд╕рдордЭ рдХреЗ рдмрд┐рдирд╛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдЪреАрдЬреЛрдВ рдХреЗ рдХрд╛рдо рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рд▓реЗрдЦ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSceneGraph 3.0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреА рдкреБрд╕реНрддрдХ рдХреЗ рд╕рдВрдмрдВрдзрд┐рдд рдЕрдзреНрдпрд╛рдпреЛрдВ рдХреЗ рдкрд╛рда рдХреЗ рдЕрдиреБрд╡рд╛рдж рдФрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">ред </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╢реБрд░реБрдЖрддреА рдЧрд╛рдЗрдб</font></a><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рд╕рднреА рдЙрджрд╛рд╣рд░рдг рдореЗрд░реЗ рджреНрд╡рд╛рд░рд╛ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рдЬрд╛рдВрдЪреЗ рдЬрд╛рддреЗ рд╣реИрдВ, рдФрд░ рдЙрдирдХрд╛ рд╕реНрд░реЛрдд рдХреЛрдб </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рдЙрдкрд▓рдмреНрдз рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП ...</font></font></a></i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi430212/">https://habr.com/ru/post/hi430212/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi430202/index.html">DirectX 11 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ C ++ рдореЗрдВ рдХрдгреЛрдВ рдХреЗ рдкрд░рд╕реНрдкрд░ рдХреНрд░рд┐рдпрд╛ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХрдгреЛрдВ рдХреА рдкреНрд░рдгрд╛рд▓реА рд▓рд┐рдЦрдирд╛</a></li>
<li><a href="../hi430204/index.html">рдПрдордЖрдИрдЯреА рдкрд╛рдареНрдпрдХреНрд░рдо "рдХрдВрдкреНрдпреВрдЯрд░ рд╕рд┐рд╕реНрдЯрдо рд╕реБрд░рдХреНрд╖рд╛"ред рд╡реНрдпрд╛рдЦреНрдпрд╛рди 18: "рдирд┐рдЬреА рдЗрдВрдЯрд░рдиреЗрдЯ рдмреНрд░рд╛рдЙрдЬрд┐рдВрдЧ," рднрд╛рдЧ 1</a></li>
<li><a href="../hi430206/index.html">рдПрдордЖрдИрдЯреА рдкрд╛рдареНрдпрдХреНрд░рдо "рдХрдВрдкреНрдпреВрдЯрд░ рд╕рд┐рд╕реНрдЯрдо рд╕реБрд░рдХреНрд╖рд╛"ред рд╡реНрдпрд╛рдЦреНрдпрд╛рди 18: рдирд┐рдЬреА рдмреНрд░рд╛рдЙрдЬрд╝рд┐рдВрдЧ рдЗрдВрдЯрд░рдиреЗрдЯ, рднрд╛рдЧ 2</a></li>
<li><a href="../hi430208/index.html">рдПрдордЖрдИрдЯреА рдкрд╛рдареНрдпрдХреНрд░рдо "рдХрдВрдкреНрдпреВрдЯрд░ рд╕рд┐рд╕реНрдЯрдо рд╕реБрд░рдХреНрд╖рд╛"ред рд╡реНрдпрд╛рдЦреНрдпрд╛рди 18: "рдирд┐рдЬреА рдЗрдВрдЯрд░рдиреЗрдЯ рдмреНрд░рд╛рдЙрдЬрд┐рдВрдЧ", рднрд╛рдЧ 3</a></li>
<li><a href="../hi430210/index.html">рдЪреЗрдХ рдкреНрд╡рд╛рдЗрдВрдЯ рд╕рд┐рдХреНрдпреЛрд░рд┐рдЯреА рдЕрдХрд╛рджрдореА рджреНрд╡рд╛рд░рд╛ рдореЗрд░рд╛ рдзреИрд░реНрдп рдкрд░реАрдХреНрд╖рдг</a></li>
<li><a href="../hi430216/index.html">рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВ рдЗрд╕реЗ рд╕рдордЭрддрд╛ рд╣реВрдВ, рдореИрдВ рдЖрд╡реЗрджрди рдореЗрдВ рдЪреЗрдХ рджреНрд╡рд╛рд░рд╛ рдмрд╣реБрдд рд╕рд╛рд░реА рдорд┐рдард╛рдИ, рдпрд╛ рдорд╛рд▓ рдХрд╛ рд╡рд░реНрдЧреАрдХрд░рдг рдХрд░рддрд╛ рд╣реВрдВ</a></li>
<li><a href="../hi430218/index.html">рдКрд░реНрдЬрд╛ рдЕрдиреБрдХреВрд▓рди STM32: рдПрдХ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЧрд╛рдЗрдб</a></li>
<li><a href="../hi430220/index.html">рдХреИрд╕реЗ "рд╢рддрд╛рдмреНрджреА" USB рд╣рдм рдХреЛ рд╕реНрдорд╛рд░реНрдЯ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдФрд░ $ 300 рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП</a></li>
<li><a href="../hi430222/index.html">рдХрд╛рдо рдХреА рддрд▓рд╛рд╢ рдореЗрдВ рд╡рд░рд┐рд╖реНрда рдЕрднрд┐рдпрдВрддрд╛ред рдореИрдВ рдПрдЪрдЖрд░ рдХреЗ рд╕рд╛рде 20 рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░реЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреИрд╕реЗ рдЧрдпрд╛ рдФрд░ рдореИрдВ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рд╕реЛрдЪрддрд╛ рд╣реВрдВ</a></li>
<li><a href="../hi430224/index.html">Schizotypal рд╡рд┐рдХрд╛рд░: рдПрдХ рдЕрдВрджрд░ рджреЗрдЦреЛ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>