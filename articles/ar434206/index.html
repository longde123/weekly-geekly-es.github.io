<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๏ธ ๐คฒ๐ฝ ๐บ ุทุงุฆุฑุฉ ุงูููุฒุน ok.ru/music ๐ฉ๐ปโ๐จ ๐คน๐ฟ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฃุนูู ูู ูุฑูู ูู ููุตุฉ Odnoklassniki ุ ูุงูููู ุณุฃุชุญุฏุซ ุนู ุงูุชุตููู ุงููุนูุงุฑู ูุชูุงุตูู ุงูุชูููุฐ ูุงูุชูููุฐ ูุฎุฏูุฉ ุชูุฒูุน ุงูููุณููู. 

 ุงูููุงู ุนุจุงุฑุฉ ุนู ูุณุฎุฉ ูู ุงูุชูุฑ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุทุงุฆุฑุฉ ุงูููุฒุน ok.ru/music</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/odnoklassniki/blog/434206/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/m8/yb/sn/m8ybsnu0c1bqakexungs-hkisui.png"><br><br>  ุฃุนูู ูู ูุฑูู ูู ููุตุฉ Odnoklassniki ุ ูุงูููู ุณุฃุชุญุฏุซ ุนู ุงูุชุตููู ุงููุนูุงุฑู ูุชูุงุตูู ุงูุชูููุฐ ูุงูุชูููุฐ ูุฎุฏูุฉ ุชูุฒูุน ุงูููุณููู. <br><a name="habracut"></a><br><blockquote style=";text-align:right;direction:rtl">  ุงูููุงู ุนุจุงุฑุฉ ุนู ูุณุฎุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชูุฑูุฑ</a> ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Joker 2018</a> . </blockquote><br><h1 style=";text-align:right;direction:rtl">  ุจุนุถ ุงูุฅุญุตุงุกุงุช </h1><br>  ุฃููุง ุ ุจุถุน ูููุงุช ุนู ููุงูู.  ูุฐู ุฎุฏูุฉ ุนููุงูุฉ ูุณุชุฎุฏููุง ุฃูุซุฑ ูู 70 ููููู ูุณุชุฎุฏู.  ูุฎุฏููู 7 ุขูุงู ุณูุงุฑุฉ ูู 4 ูุฑุงูุฒ ุจูุงูุงุช.  ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ุงุฎุชุฑููุง ุนูุงูุฉ ุงููุฑูุฑ ุนูุฏ 2 ุชูุฑุงุจุงูุช / ุซุงููุฉ ุฏูู ูุฑุงุนุงุฉ ุงูุนุฏูุฏ ูู ููุงูุน CDN.  ุฅููุง ูููู ุจุถุบุท ุฃูุตู ุนุฏุฏ ูููู ูู ุฃุฌูุฒุชูุง ุ ุญูุซ ุชูุฏู ุงูุฎุฏูุงุช ุงูุฃูุซุฑ ุชุญููููุง ูุง ูุตู ุฅูู 100000 ุทูุจ ูู ุงูุซุงููุฉ ูู ุนูุฏุฉ ุฑุจุงุนูุฉ ุงูููู.  ุนูุงูุฉ ุนูู ุฐูู ุ ุชุชู ูุชุงุจุฉ ุฌููุน ุงูุฎุฏูุงุช ุชูุฑูุจูุง ุจูุบุฉ Java. <br><br>  ููุงู ุงูุนุฏูุฏ ูู ุงูููุงุทุน ูู OK ุ ูุงุญุฏุฉ ูู ุฃูุซุฑูุง ุดุนุจูุฉ ูู "ุงูููุณููู".  ูู ุฐูู ุ ูููู ูููุณุชุฎุฏููู ุชุญููู ููุทูุนุงุชูู ูุดุฑุงุก ูุชูุฒูู ุงูููุณููู ุจุฌูุฏุฉ ูุฎุชููุฉ.  ูุญุชูู ุงููุณู ุนูู ูุชุงููุฌ ุฑุงุฆุน ููุธุงู ุชูุตูุฉ ูุฑุงุฏูู ูุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ.  ููู ุงูุบุฑุถ ุงูุฑุฆูุณู ูู ุงูุฎุฏูุฉ ุ ุจุงูุทุจุน ุ ูู ุชุดุบูู ุงูููุณููู. <br><br>  ููุฒุน ุงูููุณููู ูุณุคูู ุนู ููู ุงูุจูุงูุงุช ุฅูู ูุดุบูุงุช ุงููุณุชุฎุฏููู ูุชุทุจููุงุช ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ.  ููููู ุงูุชูุงุทูุง ูู ููุชุด ุงูููุจ ุฅุฐุง ูุธุฑุช ูู ุงูุทูุจุงุช ุฅูู ูุฌุงู musicd.mycdn.me.  ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุงูููุฒุน ุจุณูุทุฉ ููุบุงูุฉ.  ูุณุชุฌูุจ ูุทูุจุงุช <code>GET</code> HTTP ููุตุฏุฑ ูุทุงู ุงููุณุงุฑ ุงููุทููุจ. <br><br><img src="https://habrastorage.org/webt/j9/va/ze/j9vazesvr2fuqtpvhec0uj7gbmq.png"><br><br>  ูู ุงูุฐุฑูุฉ ุ ูุตู ุงูุญูู ุฅูู 100 ุฌูุฌุงุจุช / ุซุงููุฉ ูู ุฎูุงู ูุตู ููููู ุงุชุตุงู.  ูู ุงููุงูุน ุ ูุนุฏ ููุฒุน ุงูููุณููู ูุงุฌูุฉ ุชุฎุฒูู ูุคูุช ุฃูุงู ูุณุชูุฏุน ุงููุณุงุฑ ุงูุฏุงุฎูู ุงูุฎุงุต ุจูุง ุ ูุงูุฐู ูุนุชูุฏ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">One Blob Storage</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">One Cold Storage</a> ููุญุชูู ุนูู ุจุงูุช ูู ุงูุจูุงูุงุช. <br><br>  ููุฐ ุฃู ุชุญุฏุซุช ุนู ุงูุชุฎุฒูู ุงููุคูุช ุ ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุฅุญุตุงุฆูุงุช ุงูุชุดุบูู.  ูุฑู ุฃุนูู ูุถูุญุง. <br><br><img src="https://habrastorage.org/webt/q6/jv/pc/q6jvpcopw2t0xt29sl84lwp1gkg.png"><br><br>  ุชุบุทู ุญูุงูู 140 ูุณุงุฑูุง 10ูช ูู ุฌููุน ุงููุณุฑุญูุงุช ูููููุง.  ุฅุฐุง ููุง ูุฑูุฏ ุฃู ูุญุตู ุฎุงุฏู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุนูู ูุณุจุฉ ุชุตู ุฅูู 90ูช ุนูู ุงูุฃูู ุ ููุญู ูุญุชุงุฌ ุฅูู ูุตู ููููู ูุณุงุฑ ูุชูุงุณุจูุง.  95 ูช - ูุง ููุฑุจ ูู ููููู ุงููุณุงุฑุงุช. <br><br><h1 style=";text-align:right;direction:rtl">  ูุชุทูุจุงุช ุงูููุฒุน </h1><br>  ูุง ูู ุงูุฃูุฏุงู ุงูุชู ูุถุนูุงูุง ูุฃููุณูุง ุนูุฏ ุชุทููุฑ ุงูุฅุตุฏุงุฑ ุงูุชุงูู ูู ุงูููุฒุนุ <br><br>  ุฃุฑุฏูุง ุนูุฏุฉ ูุงุญุฏุฉ ูุชููู ูุงุฏุฑุฉ ุนูู ุนูุฏ 100000 ุงูุงุชุตุงูุงุช.  ููุฐู ูู ุงุชุตุงูุงุช ุงูุนููู ุงูุจุทูุฆุฉ: ูุฌููุนุฉ ูู ุงููุชุตูุญุงุช ูุชุทุจููุงุช ุงููุงุชู ุงููุญููู ุนุจุฑ ุงูุดุจูุงุช ุจุณุฑุนุงุช ูุชูุงูุชุฉ.  ูู ุงูููุช ููุณู ุ ูุฌุจ ุฃู ุชููู ุงูุฎุฏูุฉ ุ ุดุฃููุง ุดุฃู ุฌููุน ุฃูุธูุชูุง ุ ูุงุจูุฉ ููุชุทููุฑ ููุชุณุงูุญุฉ ูุน ุงูุฃุฎุทุงุก. <br><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญุชุงุฌ ุฅูู ุชูุณูุน ูุทุงู ุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู ูููุฌููุนุฉ ูู ุฃุฌู ููุงูุจุฉ ุงูุดุนุจูุฉ ุงููุชุฒุงูุฏุฉ ููุฎุฏูุฉ ูุฃู ูููู ูุงุฏุฑูู ุนูู ุชูููุฑ ุงููุฒูุฏ ูุงููุฒูุฏ ูู ุงูุญุฑูุฉ.  ูู ุงูุถุฑูุฑู ุฃูุถูุง ุฃู ุชููู ูุงุฏุฑูุง ุนูู ููุงุณ ุงูุณุนุฉ ุงูุฅุฌูุงููุฉ ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุธุงู ุงููุฌููุนุฉ ุ ูุฃู ุนุฏุฏ ูุฑุงุช ุงููุตูู ุฅูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุงููุณุจุฉ ุงููุฆููุฉ ููุทูุจุงุช ุงูุชู ุณุชูุฏุฑุฌ ูู ุชุฎุฒูู ุงููุณุงุฑุงุช ุชุนุชูุฏ ุนููู ูุจุงุดุฑุฉู. <br><br>  ูู ุงูุถุฑูุฑู ุงูููู ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุชูุณูุน ูุทุงู ุฃู ูุธุงู ููุฒุน ุฃูููุงู ุ ุฃู ุฅุถุงูุฉ ุฃุฌูุฒุฉ ููุฑุงูุฒ ุจูุงูุงุช.  ููููุง ุฃุฑุฏูุง ุฃูุถูุง ุชูููุฐ ุงูุชุฏุฑุฌ ุงูุฑุฃุณู.  ูุญุชูู ุฎุงุฏููุง ุงูุญุฏูุซ ุงููููุฐุฌู ุนูู 56 ูุฑูุฒูุง ู 0.5-1 ุชูุฑุงุจุงูุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ููุงุฌูุฉ ุดุจูุฉ ุจุณุฑุนุฉ 10 ุฃู 40 ุฌูุฌุง ุจุงูุช ูุนุดุฑุงุช ูู ุฃูุฑุงุต SSD. <br><br>  ุนูุฏ ุงูุญุฏูุซ ุนู ูุงุจููุฉ ุงูุชูุณุน ุงูุฃููู ุ ููุดุฃ ุชุฃุซูุฑ ูุซูุฑ ููุงูุชูุงู: ุนูุฏูุง ูููู ูุฏูู ุงูุขูุงู ูู ุงูุฎูุงุฏู ูุนุดุฑุงุช ุงูุขูุงู ูู ุงูุฃูุฑุงุต ุ ูุญุฏุซ ุดูุก ุจุงุณุชูุฑุงุฑ.  ูุดู ุงููุฑุต ูู ุฑูุชูู ุ ููุญู ุชุบููุฑูุง ูู 20-30 ูุทุนุฉ ูู ุงูุฃุณุจูุน.  ููุดู ุงูุฎุงุฏู ูุง ููุงุฌุฆ ุฃู ุฃุญุฏ ุ ูุชู ุงุณุชุจุฏุงู 2-3 ุณูุงุฑุงุช ูููููุง.  ูุงู ุนููู ุฃูุถูุง ุงูุชุนุงูู ูุน ุฅุฎูุงูุงุช ูุฑุงูุฒ ุงูุจูุงูุงุช ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุนุงู 2018 ุ ูุงูุช ููุงู ุซูุงุซ ุญุงูุงุช ูุดู ุ ูุฑุจูุง ูู ุชูู ูุฐู ูู ุงููุฑุฉ ุงูุฃุฎูุฑุฉ. <br><br>  ููุงุฐุง ุฃูุง ูู ูุฐุงุ  ุนูุฏูุง ูุตูู ุฃู ุฃูุธูุฉ ุ ูุฅููุง ูุนุฑู ุฃููุง ุณุชููุงุฑ ุนุงุฌูุงู ุฃู ุขุฌูุงู.  ูุฐูู ุ ูุญู ุฏุงุฆููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฏุฑุณ ุจุนูุงูุฉ</a> ุณููุงุฑูููุงุช ุงููุดู ูุฌููุน ููููุงุช ุงููุธุงู.  ุชุชูุซู ุงูุทุฑููุฉ ุงูุฑุฆูุณูุฉ ููุชุนุงูู ูุน ุญุงูุงุช ุงููุดู ูู ุชูุฑุงุฑ ุงูุจูุงูุงุช: ูุชู ุชุฎุฒูู ุนุฏุฉ ูุณุฎ ูู ุงูุจูุงูุงุช ุนูู ุนูุฏ ูุฎุชููุฉ. <br><br>  ูุญู ูุญุชูุธ ุฃูุถุง ุงููุทุงู ุงูุชุฑุฏุฏู ููุดุจูุฉ.  ูุนุฏ ูุฐุง ุงูุฃูุฑ ููููุง ูุฃูู ูู ุญุงูุฉ ูุดู ุฃุญุฏ ููููุงุช ุงููุธุงู ุ ูุง ูููู ุงูุณูุงุญ ุจุงูููุงุฑ ุงูุญูู ุนูู ุงูููููุงุช ุงููุชุจููุฉ. <br><br><h1 style=";text-align:right;direction:rtl">  ููุงุฒูุฉ </h1><br>  ุชุญุชุงุฌ ุฃููุงู ุฅูู ูุนุฑูุฉ ููููุฉ ููุงุฒูุฉ ุงุณุชุนูุงูุงุช ุงููุณุชุฎุฏู ุจูู ูุฑุงูุฒ ุงูุจูุงูุงุช ุ ูุงูููุงู ุจุฐูู ุชููุงุฆููุง.  ูุฐุง ูู ุญุงู ููุช ุจุญุงุฌุฉ ุฅูู ุฅุฌุฑุงุก ุฃุนูุงู ุงูุดุจูุฉ ุ ุฃู ุฅุฐุง ูุดู ูุฑูุฒ ุงูุจูุงูุงุช.  ููู ุงูููุงุฒูุฉ ุถุฑูุฑูุฉ ุฃูุถูุง ุฏุงุฎู ูุฑุงูุฒ ุงูุจูุงูุงุช.  ููุฑูุฏ ุชูุฒูุน ุงูุทูุจุงุช ุจูู ุงูุนูุฏุชูู ููุณ ุจุดูู ุนุดูุงุฆู ุ ูููู ูุน ุงูุฃูุฒุงู.  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ูููู ุจุชุญููู ุฅุตุฏุงุฑ ุฌุฏูุฏ ูู ุงูุฎุฏูุฉ ููุฑูุฏ ุฅุฏุฎุงู ุนูุฏุฉ ุฌุฏูุฏุฉ ุจุณูุงุณุฉ ูู ุงูุชูุงูุจ.  ุชุณุงุนุฏ ุงูุฃูุฒุงู ุฃูุถูุง ูุซูุฑูุง ุฃุซูุงุก ุงุฎุชุจุงุฑ ุงูุฅุฌูุงุฏ: ููุญู ูุฒูุฏ ุงููุฒู ููุถุน ุนุจุก ุฃุซูู ูุซูุฑูุง ุนูู ุงูุนูุฏุฉ ูู ุฃุฌู ููู ุญุฏูุฏ ูุฏุฑุงุชูุง.  ูุนูุฏูุง ุชุชุนุทู ุงูุนูุฏุฉ ุชุญุช ุงูุญูู ุ ูุฅููุง ูููุฏ ุงููุฒู ุจุณุฑุนุฉ ููุฎุฑุฌู ูู ุงูุฏูุฑุงู ุจุงุณุชุฎุฏุงู ุขููุงุช ุงูููุงุฒูุฉ. <br><br>  ููู ูุจุฏู ูุณุงุฑ ุงูุทูุจ ูู ุงููุณุชุฎุฏู ุฅูู ุงูุนูุฏุฉ ุ ูุงูุฐู ุณูุนูุฏ ุงูุจูุงูุงุช ูุน ูุฑุงุนุงุฉ ุงูููุงุฒูุฉุ <br><br><img src="https://habrastorage.org/webt/uu/tz/uf/uutzuf3bnfpetnns91ca-rcf5mc.png"><br><br>  ูููู ุงููุณุชุฎุฏู ุจุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ ูููุน ุงูููุจ ุฃู ุชุทุจูู ุงููุงุชู ุงููุญููู ููุชููู ุนููุงู URL ุงูุฎุงุต ุจุงููุณุงุฑ: <br><br> <code>musicd.mycdn.me/v0/stream?id=...</code> <br> <br>  ููุญุตูู ุนูู ุนููุงู IP ูู ุงุณู ุงููุถูู ูู URL ุ ูููู ุงูุนููู ุจุงูุงุชุตุงู ุจู GSLB DNS ุงูุฎุงุต ุจูุง ุ ูุงูุฐู ูุนุฑู ุนู ุฌููุน ูุฑุงูุฒ ุงูุจูุงูุงุช ูููุงูุน CDN ุงูุฎุงุตุฉ ุจูุง.  ูููุฑ GSLB DNS ููุนููู ุนููุงู IP ูููุงุฒู ุฃุญุฏ ูุฑุงูุฒ ุงูุจูุงูุงุช ุ ููููู ุงูุนููู ุจุชุฃุณูุณ ุงุชุตุงู ูุนู.  ูุนุฑู ุงูููุงุฒู ุฌููุน ุงูุนูุฏ ุฏุงุฎู ูุฑุงูุฒ ุงูุจูุงูุงุช ููุฒููุง.  ูููู ุ ููุงุจุฉ ุนู ุงููุณุชุฎุฏู ุ ุจุฅูุดุงุก ุงุชุตุงู ูุน ุฅุญุฏู ุงูุนูุฏ.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุชุฎุฏู ููุงุฒูุงุช N4Ware ุงููุณุชูุฏุฉ ุฅูู L4</a> .  ููุฏุง ูุนุทู ุจูุงูุงุช ุงููุณุชุฎุฏู ูุจุงุดุฑุฉ ุ ูุชุฌุงูุฒ ุงูููุงุฒู.  ูู ุฎุฏูุงุช ูุซู ุงูููุฒุน ุ ุชููู ุญุฑูุฉ ุงููุฑูุฑ ุงูุตุงุฏุฑุฉ ุฃุนูู ุจูุซูุฑ ูู ุงููุงุฑุฏุฉ. <br><br>  ูู ุญุงูุฉ ุชุนุทู ุฃุญุฏ ูุฑุงูุฒ ุงูุจูุงูุงุช ุ ููุชุดู GSLB DNS ุฐูู ููุฒููู ุจุณุฑุนุฉ ูู ุงูุฏูุฑุงู: ุฅูู ูุชููู ุนู ููุญ ุงููุณุชุฎุฏููู ุนููุงู IP ุงูุฎุงุต ุจููุงุฒู ูุฑูุฒ ุงูุจูุงูุงุช ูุฐุง.  ูู ุญุงูุฉ ูุดู ุนูุฏุฉ ูู ูุฑูุฒ ุงูุจูุงูุงุช ุ ุชุชู ุฅุนุงุฏุฉ ุชุนููู ูุฒููุง ุ ููุชููู ุงูููุงุฒู ุงูููุฌูุฏ ุฏุงุฎู ูุฑูุฒ ุงูุจูุงูุงุช ุนู ุฅุฑุณุงู ุงูุทูุจุงุช ุฅููู. <br><br>  ุงูุขู ููุฑ ูู ููุงุฒูุฉ ุงููุณุงุฑุงุช ูู ุฎูุงู ุงูุนูุฏ ุฏุงุฎู ูุฑูุฒ ุงูุจูุงูุงุช.  ุณููุธุฑ ูู ูุฑุงูุฒ ุงูุจูุงูุงุช ููุญุฏุงุช ูุณุชููุฉ ูุณุชููุฉ ุ ูู ูููุง ุณูุนูุด ููุนูู ุ ุญุชู ูู ูุงุช ุงูุขุฎุฑูู.  ูุฌุจ ุฃู ุชููู ุงููุณุงุฑุงุช ูุชูุงุฒูุฉ ุนุจุฑ ุงูุฃุฌูุฒุฉ ุจุงูุชุณุงูู ุญุชู ูุง ูููู ููุงู ุชุดููุงุช ูู ุงูุชุญููู ุ ูุชูุฑุงุฑูุง ุฅูู ุนูุฏ ูุฎุชููุฉ.  ูู ุญุงูุฉ ูุดู ุนูุฏุฉ ูุงุญุฏุฉ ุ ูุฌุจ ุฃู ูุชู ุชูุฒูุน ุงูุญูู ุจุงูุชุณุงูู ุจูู ูุง ุชุจูู ูููุง. <br><br>  ูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญู</a> ูุฐู ุงููุดููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุทุฑู ูุฎุชููุฉ</a> .  ุงุณุชูุฑูุง ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุฌุฒุฆุฉ ุซุงุจุช</a> .  ูููู ุจูู ุงููุฌููุนุฉ ุงููุงููุฉ ุงูููููุฉ ูู ุชุฌุฒุฆุฉ ูุนุฑูุงุช ุงููุณุงุฑ ูู ุญููุฉ ุ ุซู ูุชู ุนุฑุถ ูู ูุณุงุฑ ุนูุฏ ููุทุฉ ุนูู ูุฐู ุงูุญููุฉ.  ุจุนุฏ ุฐูู ูููู ุจุชูุฒูุน ูุทุงูุงุช ุงูุฑููู ุจุงูุชุณุงูู ุจูู ุงูุนูุฏ ูู ุงููุฌููุนุฉ.  ูุชู ุชุญุฏูุฏ ุงูุนูุฏ ุงูุชู ุณุชููู ุจุชุฎุฒูู ุงููุณุงุฑ ุนู ุทุฑูู ุชุฌุฒุฆุฉ ุงููุณุงุฑุงุช ุฅูู ููุทุฉ ุนูู ุงูุญููุฉ ูุชุชุญุฑู ูู ุงุชุฌุงู ุนูุงุฑุจ ุงูุณุงุนุฉ. <br><br><img src="https://habrastorage.org/webt/qr/ty/xf/qrtyxfbchjhlp5taqfs0fbicnk0.jpeg"><br><br>  ููู ูุซู ูุฐุง ุงููุฎุทุท ูู ุนูุจ: ูู ุญุงูุฉ ูุดู ุงูุนูุฏุฉ N2 ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุน ุญููู ุจุงููุงูู ุนูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุงูุชุงููุฉ ูู ุงูุญููุฉ - N3.  ูุฅุฐุง ูู ููู ูู ูุงูุด ูุฒุฏูุฌ ูู ุงูุฃุฏุงุก - ููุฐุง ููุณ ูู ูุง ูุจุฑุฑู ุงูุชุตุงุฏููุง - ุฅุฐู ุ ุนูู ุงูุฃุฑุฌุญ ุ ุณูููู ููุนูุฏุฉ ุงูุซุงููุฉ ุฃูุถูุง ููุช ุณูุก.  ุณูุชุทูุฑ N3 ุจุฏุฑุฌุฉ ุนุงููุฉ ูู ุงูุงุญุชูุงู ุ ูุณูุฐูุจ ุงูุญูู ุฅูู N4 ุ ูููุฐุง - ุณูููู ููุงู ูุดู ูุชุชุงูู ุนูู ุทูู ุงูุญููุฉ ุจุฃููููุง. <br><br>  ูููู ุญู ูุฐู ุงููุดููุฉ ุนู ุทุฑูู ุฒูุงุฏุฉ ุนุฏุฏ ุงููุณุฎ ุงููุชูุงุซูุฉ ุ ูููู ุจุนุฏ ุฐูู ุชูู ุงูุณุนุฉ ุงูุฅุฌูุงููุฉ ุงููููุฏุฉ ูููุชูุฉ ูู ุงูุญููุฉ.  ูุฐูู ุ ูุญู ููุนู ุฎูุงู ุฐูู.  ูุน ููุณ ุนุฏุฏ ุงูุนูุฏ ุ ูุชู ุชูุณูู ุงูุญููุฉ ุฅูู ุนุฏุฏ ุฃูุจุฑ ุจูุซูุฑ ูู ุงููุทุงูุงุช ุงูููุชุดุฑุฉ ุนุดูุงุฆููุง ุญูู ุงูุญููุฉ.  ูุชู ุชุญุฏูุฏ ุงููุณุฎ ุงููุชูุงุซูุฉ ูููุณุงุฑ ููููุง ููุฎูุงุฑุฒููุฉ ุฃุนูุงู. <br><br><img src="https://habrastorage.org/webt/kc/uf/5-/kcuf5-1mmekp60d5emkp5ckkgps.png"><br><br>  ูู ุงููุซุงู ุฃุนูุงู ุ ูู ุนูุฏุฉ ูุณุคููุฉ ุนู ูุทุงููู.  ุฅุฐุง ูุดู ุฃุญุฏ ุงูุนูุฏ ุ ููู ููุน ุญููู ุจุงููุงูู ุนูู ุงูุนูุฏุฉ ุงูุชุงููุฉ ูู ุงูุญููุฉ ุ ูููู ุณูุชู ุชูุฒูุนู ุจูู ุงูุนูุฏุชูู ุงูุฃุฎุฑููู ูู ุงููุชูุฉ. <br><br>  ูุชู ุญุณุงุจ ุงูุฎุงุชู ุงุณุชูุงุฏูุง ุฅูู ูุฌููุนุฉ ุตุบูุฑุฉ ูู ุงููุนููุงุช ุญุณุงุจููุง ููุชู ุชุญุฏูุฏูุง ุนูู ูู ุนูุฏุฉ.  ููุฐุง ูู ุ ูุญู ูุง ูุฎุฒููุง ูู ููุน ูู ุงูุชูููู.  ูุฏููุง ุฃูุซุฑ ูู ูุงุฆุฉ ุฃูู ูู ูุฐู ุงููุทุงูุงุช ูู ุงูุฅูุชุงุฌ ุ ููู ุญุงูุฉ ูุดู ุฃู ูู ุงูุนูุฏ ุ ูุชู ุชูุฒูุน ุงูุญูู ุจุดูู ูุชุณุงูู ุชูุงููุง ุจูู ุฌููุน ุงูุนูุฏ ุงูุญูุฉ ุงูุฃุฎุฑู. <br><br>  ููู ูุจุฏู ูุณุงุฑ ุงูุนูุฏุฉ ูููุณุชุฎุฏู ูู ูุซู ูุฐุง ุงููุธุงู ูุน ุงูุชุฌุฒุฆุฉ ูุชุณูุฉุ <br><br>  ูุญุตู ุงููุณุชุฎุฏู ูู ุฎูุงู L4-balancer ุนูู ุนูุฏุฉ ุนุดูุงุฆูุฉ.  ุงุฎุชูุงุฑ ุงูุนูุฏุฉ ุนุดูุงุฆู ุ ูุฃู ุงูููุงุฒู ูุง ูุนุฑู ุดูุฆูุง ุนู ุงููููู.  ูููู ุจุนุฏ ุฐูู ุชุนุฑู ูู ูุณุฎุฉ ูุชูุงุซูุฉ ูู ุงููุชูุฉ ุนู ุฐูู.  ุชุญุฏุฏ ุงูุนูุฏุฉ ุงูุชู ุชููุช ุงูุทูุจ ูุง ุฅุฐุง ูุงูุช ูุณุฎุฉ ูุชูุงุซูุฉ ูููุณุงุฑ ุงููุทููุจ.  ุฅุฐุง ูู ููู ูุฐูู ุ ูุฅูู ููุชูู ุฅูู ูุถุน ุงููููู ุจุงุณุชุฎุฏุงู ุฃุญุฏ ุงููุณุฎ ุงููุชูุงุซูุฉ ุ ููููู ุจุชุฃุณูุณ ุงุชุตุงู ุจู ุ ููุจุญุซ ุนู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู ุงูุณุนุฉ ุงูุชุฎุฒูููุฉ ุงููุญููุฉ ุงูุฎุงุตุฉ ุจู.  ุฅุฐุง ูู ููู ุงููุณุงุฑ ููุฌูุฏูุง ุ ูุฅู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุชุณุญุจู ูู ูุฎุฒู ุงููุณุงุฑ ุ ูุชุญูุธู ูู ุงููุชุฌุฑ ุงููุญูู ูุชุนุทู ุงููููู ุงูุฐู ูุนูุฏ ุชูุฌูู ุงูุจูุงูุงุช ุฅูู ุงููุณุชุฎุฏู. <br><br><img src="https://habrastorage.org/webt/c5/pu/wl/c5puwlig-lfxy20leny4y4utqig.png"><br><br>  ุฅุฐุง ูุดู ูุญุฑู ุงูุฃูุฑุงุต ูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุ ูุณูุชู ููู ุงูุจูุงูุงุช ูู ูุญุฏุฉ ุงูุชุฎุฒูู ูุจุงุดุฑุฉ ุฅูู ุงููุณุชุฎุฏู.  ููู ุญุงูุฉ ูุดู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุ ูุนุฑู ุงููููู ุนู ุฌููุน ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูุฃุฎุฑู ููุฐุง ุงููุณุงุฑ ุ ูุณูููู ุจุฅูุดุงุก ุงุชุตุงู ูุน ูุณุฎุฉ ูุชูุงุซูุฉ ุญูุฉ ุฃุฎุฑู ูุงุณุชูุจุงู ุงูุจูุงูุงุช ููู.  ูุฐูู ูุญู ูุถูู ุฃูู ุฅุฐุง ุทูุจ ุงููุณุชุฎุฏู ูุณุงุฑูุง ููุงู ููุงู ูุณุฎุฉ ูุชูุงุซูุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู ุ ูุณูุชููู ุฑุฏูุง. <br><br><h1 style=";text-align:right;direction:rtl">  ููู ุชุนูู ุงูุนูุฏุฉุ </h1><br><img src="https://habrastorage.org/webt/2m/up/ob/2mupob-rqyqsbic50lc-qn2xwqe.png"><br><br>  ุงูุนูุฏุฉ ุนุจุงุฑุฉ ุนู ุฎุท ุฃูุงุจูุจ ูู ูุฌููุนุฉ ูู ุงููุฑุงุญู ููุฑ ุฎูุงููุง ุทูุจ ุงููุณุชุฎุฏู.  ุฃููุงู ุ ูุฐูุจ ุงูุทูุจ ุฅูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุฎุงุฑุฌูุฉ (ูุฑุณู ูู ุดูุก ุนุจุฑ HTTPS).  ุซู ูุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุทูุจ - ูุชู ุงูุชุญูู ูู ุงูุชูููุนุงุช.  ุซู ูุชู ุฅูุดุงุก ุนูุงูุงุช IDv3 ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุดุฑุงุก ููุทูุนุฉ.  ููุชูู ุงูุทูุจ ุฅูู ูุฑุญูุฉ ุงูุชูุฌูู ุ ุญูุซ ูุชู ุชุญุฏูุฏ ููููุฉ ุฅุฑุฌุงุน ุงูุจูุงูุงุช ุนูู ุฃุณุงุณ ุทุจูููุฌูุง ุงููุชูุฉ: ุฅูุง ุฃู ุงูุนูุฏุฉ ุงูุญุงููุฉ ูู ูุณุฎุฉ ุทุจู ุงูุฃุตู ููุฐุง ุงููุณุงุฑ ุ ุฃู ุณูููู ุจุงูููุงูุฉ ูู ุนูุฏุฉ ุฃุฎุฑู.  ูู ุงูุญุงูุฉ ุงูุซุงููุฉ ุ ุชูุดุฆ ุงูุนูุฏุฉ ูู ุฎูุงู ุนููู ุงููููู ุงุชุตุงูุงู ุจุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุนุจุฑ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช HTTP ุงูุฏุงุฎููุฉ ุฏูู ุงูุชุญูู ูู ุงูุชูููุนุงุช.  ุชุจุญุซ ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุนู ุงูุจูุงูุงุช ูู ุงูุชุฎุฒูู ุงููุญูู ุ ุฅุฐุง ุนุซุฑุช ุนูู ูุณุงุฑ ุ ุซู ุชุนุทูู ูู ุงููุฑุต ุงูุฎุงุต ุจู ุ  ูุฅุฐุง ูู ูุญุฏุซ ุฐูู ุ ูุฅูู ูุณุญุจ ุงููุณุงุฑุงุช ูู ุงูุชุฎุฒูู ูุชุฎุฒูููุง ูุคูุชูุง ููุนุทููุง. <br><br><h1 style=";text-align:right;direction:rtl">  ุชุญููู ุงูุนูุฏุฉ </h1><br>  ุฏุนููุง ููุฏุฑ ูุง ูุฌุจ ุชุญููู ุนูุฏู ูุงุญุฏุฉ ูู ูุฐุง ุงูุชูููู.  ุฏุนูุง ููุชูู ุซูุงุซุฉ ูุฑุงูุฒ ุจูุงูุงุช ุชุถู ุฃุฑุจุน ููุงุท ููู ูููุง. <br><br><img src="https://habrastorage.org/webt/in/-z/nz/in-znz1gekgg217y9oxdlm5pv-g.png"><br><br>  ูุฌุจ ุฃู ุชุฎุฏู ุงูุฎุฏูุฉ ุจุงููุงูู 120 ุฌูุฌุงุจุช / ุซุงููุฉ ุ ุฃู 40 ุฌูุฌุงุจุช / ุซุงููุฉ ููู ูุฑูุฒ ุจูุงูุงุช.  ูููุชุฑุถ ุฃู ุงููุณูููู ุงูุดุจูููู ูุงููุง ุจููุงูุฑุงุช ุฃู ููุน ุญุงุฏุซ ุ ููุงู ููุงู ูุฑูุฒุงู ููุจูุงูุงุช DC1 ู DC3.  ุงูุขู ูุฌุจ ุฃู ูุนุทู ูู ูููู 60 ุฌูุฌุงุจุช / ุซุงููุฉ.  ูููู ูุงู ุงูุฃูุฑ ูุชุฑูููุง ูููุทูุฑูู ูุทุฑุญ ุจุนุถ ุงูุชุญุฏูุซุงุช ุ ูู ูู ูุฑูุฒ ุจูุงูุงุช ุ ูู ูุชุจู ุณูู 3 ููุงุท ุญูุฉ ููุฌุจ ุฃู ูุนุทู ูู ูููู 20 ุฌูุฌุงุจุช / ุซุงููุฉ. <br><br><img src="https://habrastorage.org/webt/6q/tc/sz/6qtcszoeoi4w1zjxvh_o1u35vni.png"><br><br>  ูููู ูู ุงูุจุฏุงูุฉ ูู ูู ูุฑูุฒ ุจูุงูุงุช ูุงู ููุงู 4 ููุงุท.  ูุฅุฐุง ูููุง ุจุชุฎุฒูู ูุณุฎุชูู ูุชูุงุซูุชูู ูู ูุฑูุฒ ุงูุจูุงูุงุช ุ ุซู ูุน ุงุญุชูุงู ุจูุณุจุฉ 50 ูช ุ ูุฅู ุงูุนูุฏุฉ ุงูุชู ุชููุช ุงูุทูุจ ูู ุชููู ูุณุฎุฉ ุทุจู ุงูุฃุตู ูู ุงููุณุงุฑ ุงููุทููุจ ูุณุชููู ุจุงูููุงูุฉ ุจุงูุจูุงูุงุช.  ุจูุนูู ุฃู ูุตู ุญุฑูุฉ ุงููุฑูุฑ ุฏุงุฎู ูุฑูุฒ ุงูุจูุงูุงุช ูุชู ุชูููููุง. <br><br><img src="https://habrastorage.org/webt/yi/aj/tc/yiajtck3angspynaidxuar_t5gm.png"><br><br>  ูุฐูู ุ ูุฌุจ ุฃู ุชุนุทู ุนูุฏุฉ ูุงุญุฏุฉ ูููุณุชุฎุฏููู 20 ุฌูุฌุงุจุช / ุซุงููุฉ.  ูู ูุฐู ุ 10 ุบูุบุงุจุงูุช / ุซุงููุฉ ุฃููุง ุชุณุญุจ ูู ุฌูุฑุงููุง ูู ูุฑูุฒ ุงูุจูุงูุงุช.  ููู ุงููุฎุทุท ูุชูุงุซู: ุงูุนูุฏุฉ ุชุนุทู ููุณ 10 ุฌูุฌุงุจุช / ุซุงููุฉ ููุฌูุฑุงู ูู ูุฑูุฒ ุงูุจูุงูุงุช.  ุงุชุถุญ ุฃู 30 ุฌูุฌุงุจุช / ุซุงููุฉ ุชุฎุฑุฌ ูู ุงูุนูุฏุฉ ุ ูููุง 20 ุฌูุฌุงุจุช / ุซุงููุฉ ูุฌุจ ุฎุฏูุชูุง ุจููุณูุง ุ ูุฃููุง ูุณุฎุฉ ุทุจู ุงูุฃุตู ูู ุงูุจูุงูุงุช ุงููุทููุจุฉ.  ุนูุงูุฉ ุนูู ุฐูู ุ ุณูู ูุชู ููู ุงูุจูุงูุงุช ุฅูุง ูู ุงูุฃูุฑุงุต ุฃู ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ูุงูุชู ุชุญุชูู ุนูู ุญูุงูู 50 ุฃูู ูุณุงุฑ "ุณุงุฎู".  ุจูุงุกู ุนูู ุฅุญุตุงุฆูุงุช ุงูุชุดุบูู ุงูุฎุงุตุฉ ุจูุง ุ ูุชูุญ ูู ุฐูู ุฅุฒุงูุฉ 60-70ูช ูู ุงูุชุญููู ูู ุงูุฃูุฑุงุต ุ ูุณูุธู ุญูุงูู 8 ุฌูุฌุงุจุช ูู ุงูุซุงููุฉ.  ูุฐุง ุงูุฎูุท ูุงุฏุฑ ุชูุงููุง ุนูู ุชูุฏูู ุนุดุฑุงุช ูุญุฑูุงุช ุฃูุฑุงุต ุงูุญุงูุฉ ุงูุตูุจุฉ. <br><br><h1 style=";text-align:right;direction:rtl">  ุชุฎุฒูู ุงูุจูุงูุงุช ุนูู ุนูุฏุฉ </h1><br>  ุฅุฐุง ูุถุนุช ูู ูุณุงุฑ ูู ููู ูููุตู ุ ูุณุชููู ุงููููุงุช ุงูุนุงูุฉ ูุฅุฏุงุฑุฉ ูุฐู ุงููููุงุช ุถุฎูุฉ.  ุญุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุนูุฏ ููุณุญ ุงูุจูุงูุงุช ุนูู ุงูุฃูุฑุงุต ุณูู ูุณุชุบุฑู ุฏูุงุฆู ุ ุฅู ูู ููู ุนุดุฑุงุช ุฏูุงุฆู. <br><br>  ููุงู ูููุฏ ุฃูู ูุถูุญุง ููุฐุง ุงููุฎุทุท.  ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุชุญููู ุงููุณุงุฑุงุช ููุท ูู ุงูุจุฏุงูุฉ.  ูุฅุฐุง ุทูุจ ุงููุณุชุฎุฏู ุงูุชุดุบูู ูู ุงููุณุท ูููุฏุช ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ููู ูุชููู ูู ุฅุฑุณุงู ุจุงูุช ูุงุญุฏ ุญุชู ูุชู ุชุญููู ุงูุจูุงูุงุช ุฅูู ุงููููุน ุงููุทููุจ ูู ูุณุชูุฏุน ุงููุณุงุฑ.  ุนูุงูุฉ ุนูู ุฐูู ุ ูููููุง ุชุฎุฒูู ุงูููุทูุนุงุช ููู ููุท ุ ุญุชู ูู ูุงู ูุชุงุจูุง ูุณููุนูุง ุนููุงููุง ุงุณุชูุงู ูู ุงูุงุณุชูุงุน ุฅููู ูู ุงูุฏูููุฉ ุงูุซุงูุซุฉ.  ุณูู ุชุณุชูุฑ ูู ูุถุน ุงููุฒู ุงูููุช ุนูู ุงููุฑุต ุ ูุฅูุฏุงุฑ ูุณุงุญุฉ ุจุงูุธุฉ ุงูุซูู ูุชูููู ุนุฏุฏ ูุฑุงุช ุงููุตูู ุฅูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุฐู ุงูุนูุฏุฉ. <br><br>  ูุฐูู ุ ูููู ุจุฐูู ุจุทุฑููุฉ ูุฎุชููุฉ ุชูุงููุง: ููุณู ุงููุณุงุฑุงุช ุฅูู ูุชู 256 ูููู ุจุงูุช ุ ูุฃู ูุฐุง ูุฑุชุจุท ุจุญุฌู ุงููุชูุฉ ูู SSD ุ ููุญู ูุนูู ุจุงููุนู ูุน ูุฐู ุงููุชู.  ูุฑุต 1 ุชูุฑุงุจุงูุช ูุญุชูู ุนูู 4 ููุงููู ูุทุนุฉ.  ูู ูุฑุต ูู ุนูุฏุฉ ูู ุชุฎุฒูู ูุณุชูู ุ ููุชู ุชูุฒูุน ุฌููุน ุงููุชู ูู ูู ูุณุงุฑ ุนุจุฑ ุฌููุน ุงูุฃูุฑุงุต. <br><br>  ูู ูุตู ุนูู ุงูููุฑ ุฅูู ูุซู ูุฐุง ุงููุฎุทุท ุ ูู ุงูุจุฏุงูุฉ ูุงูุช ุฌููุน ุงููุชู ุฐุงุช ุงููุณุงุฑ ุงููุงุญุฏ ุชูุน ุนูู ูุฑุต ูุงุญุฏ.  ูููู ูุฐุง ุฃุฏู ุฅูู ุชุดููู ููู ููุญูู ุจูู ุงูุฃูุฑุงุต ุ ูุฃูู ุฅุฐุง ุถุฑุจ ุฃุญุฏ ุงููุณุงุฑุงุช ุงูุดููุฑุฉ ุฃุญุฏ ุงูุฃูุฑุงุต ุ ูุณุชุฐูุจ ุฌููุน ุทูุจุงุช ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุฅูู ูุฑุต ูุงุญุฏ.  ูููุน ูุฐุง ุ ูููุง ุจุชูุฒูุน ูุชู ูู ูุณุงุฑ ุนุจุฑ ูุงูุฉ ุงูุฃูุฑุงุต ุ ูุน ููุงุฒูุฉ ุงูุชุญููู. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ููุณู ุฃู ูุฏููุง ูุฌููุนุฉ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ููููุง ูุฑุฑูุง ุนุฏู ุนูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุฏูุงููุฉ ุ ูุฃู ูุฏููุง ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ููุตูุญุฉ ุฑุงุฆุนุฉ ูู Linux. <br><br>  ููููุฉ ุชุฎุฒูู ูุชู ุนูู ุงูุฃูุฑุงุตุ <br><br>  ุฃููุงู ุ ูุฑุฑูุง ุงูุญุตูู ุนูู ููู XFS ุนููุงู ูุงุญุฏ ุจุญุฌู ุงููุฑุต ููุถุน ุฌููุน ุงููุชู ููู.  ุซู ุฌุงุกุช ุงูููุฑุฉ ููุนูู ูุน ุฌูุงุฒ ูุชูุฉ ูุจุงุดุฑุฉ.  ููุฏ ุทุจููุง ููุง ุงูุฎูุงุฑูู ุ ููููุง ุจููุงุฑูุชููุง ูุงุชุถุญ ุฃูู ุนูุฏ ุงูุนูู ูุจุงุดุฑุฉ ูุน ุฌูุงุฒ ูุชูุฉ ุ ูููู ุงูุชุณุฌูู ุฃุณุฑุน ุจูุนุฏู 1.5 ูุฑุฉ ุ ููุช ุงูุงุณุชุฌุงุจุฉ ุฃูู 2-3 ูุฑุงุช ุ ููุจูุบ ุฅุฌูุงูู ุญูู ุงููุธุงู ุฃูู ูุฑุชูู. <br><br><h1 style=";text-align:right;direction:rtl">  ุงูููุฑุณ </h1><br>  ูููู ูุง ูููู ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุชุฎุฒูู ุงูููุงุทุน ุงูุตูุชูุฉ ุ ุจู ูุฌุจ ุงูุงุญุชูุงุธ ุจููุฑุณ ูู ููุงุทุน ุงูููุทูุนุงุช ุงูููุณูููุฉ ุฅูู ุงูููุงุทุน ุนูู ุงููุฑุต. <br><br><img src="https://habrastorage.org/webt/me/4y/0b/me4y0bk_xbwco9r_5y6smyhmxmc.png"><br><br>  ุงุชุถุญ ุฃูู ูุถุบูุท ุชูุงููุง ุ ุญูุซ ูุณุชุบุฑู ุฅุฏุฎุงู ููุฑุณ ูุงุญุฏ 29 ุจุงูุชูุง ููุท.  ูุชุฎุฒูู 10 ุชูุฑุงุจุงูุช ุ ุงูููุฑุณ ูุฒูุฏ ููููุงู ุนู 1 ุบูุบุงุจุงูุช. <br><br>  ููุงู ููุทุฉ ูุซูุฑุฉ ููุงูุชูุงู ููุง.  ูู ูู ุณุฌู ูู ูุฐู ุงูุณุฌูุงุช ุ ูุชุนูู ุนููู ุชุฎุฒูู ุงูุญุฌู ุงูููู ูููุณุงุฑ ุจุฃูููู.  ูุฐุง ูุซุงู ููุงุณููู ุนูู ุนุฏู ุงูุชุทุจูุน.  ูุงูุณุจุจ ูู ุฃูู ููููุง ููููุงุตูุงุช ูู ุงุณุชุฌุงุจุฉ ูุทุงู HTTP ุ ูุฌุจ ุฃู ูุฑุฌุน ุงูุญุฌู ุงูุฅุฌูุงูู ููููุฑุฏ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุชุดููู ุฑุฃุณ ุจุทูู ุงููุญุชูู.  ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูุณูุตุจุญ ูู ุดูุก ุฃูุซุฑ ุฅุญูุงูุง. <br><br>  ูููุง ุจุตูุงุบุฉ ุนุฏุฏ ูู ูุชุทูุจุงุช ุงูููุฑุณ: ููุนูู ุจุณุฑุนุฉ (ูููุถู ุฃู ูุชู ุชุฎุฒูููุง ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู) ุ ูุชููู ูุถุบูุทุฉ ููุง ุชุดุบู ูุณุงุญุฉ ุนูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุตูุญุฉ.  ูุฌุจ ุฃู ูููู ููุฑุณ ุขุฎุฑ ุซุงุจุช.  ุฅุฐุง ููุฏูุงูุง ุ ูุณูููุฏ ุงููุนูููุงุช ุงููุชุนููุฉ ุจุงูููุงู ุงูุฐู ุชู ุชุฎุฒูู ุงููุณุงุฑ ููู ุนูู ุงููุฑุต ุ ููุฐุง ุจูุซุงุจุฉ ุชูุธูู ุงูุฃูุฑุงุต.  ูุจุดูู ุนุงู ุ ุฃูุฏ ุฃู ูุชู ุงุณุชุจุฏุงู ุงููุชู ุงููุฏููุฉ ุ ุงูุชู ูู ูุชู ุงููุตูู ุฅูููุง ููุฐ ูุชุฑุฉ ุทูููุฉ ุ ุจุทุฑููุฉ ูุง ุ ููุง ูุชูุญ ูุฌุงููุง ูููุณุงุฑุงุช ุงูุฃูุซุฑ ุดุนุจูุฉ.  ููุฏ ุงุฎุชุฑูุง ุณูุงุณุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">LRU ููุชุฌุฑูุฏ: ูุชู ุฅุฒุงุญุฉ</a> ุงููุชู ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุฏูููุฉ ุ ููุชู ุงูุงุญุชูุงุธ ุจูุณุจุฉ 1ูช ูู ุงููุชู ูุฌุงููุง.  ุจุงูุทุจุน ุ ูุฌุจ ุฃู ูููู ูููู ุงูููุฑุณ ุขูููุง ุ ูุฃู ูุฏููุง 100 ุฃูู ุงุชุตุงู ููู ุนูุฏุฉ.  ูุชู ุงุณุชููุงุก ุฌููุน ูุฐู ุงูุดุฑูุท ุจุดูู ูุซุงูู ุจูุงุณุทุฉ <code>SharedMemoryFixedMap</code> ูู ููุชุจุฉ ุงููุตุงุฏุฑ ุงูููุชูุญุฉ ุฐุงุช ุงููุตุฏุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุงุญุฏ</a> . <br><br>  ูุถุน ุงููุคุดุฑ ุนูู <code>tmpfs</code> ุ ููู ูุนูู ุจุณุฑุนุฉ ุ ูููู ููุงู ูุงุฑู ุจุณูุท.  ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฌูุงุฒ ุ ูุชู ููุฏ ูู ุดูุก ูุงู <code>tmpfs</code> ุนูู <code>tmpfs</code> ุ ุจูุง ูู ุฐูู ุงูููุฑุณ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฅุฐุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code> sun.misc.Unsafe</code></a> ุนูููุชูุง ุ ููู ุบูุฑ ุงููุงุถุญ ูู ุฃู ุญุงูุฉ ุธู ุงููุคุดุฑ.  ูุฐูู ุ ูุฏููุง ุงูุทุจุงุน ุนูู ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุณุงุนุฉ.  ูููู ูุฐุง ูุง ูููู: ุจูุง ุฃููุง ูุณุชุฎุฏู ูุฐู ุงููุชู ุ ูุชุนูู ุนูููุง ุฏุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">WAL</a> ุ ุญูุซ ููุชุจ ูุนูููุงุช ุญูู ุงููุชู ุงููุจุซููุฉ.  ูุฌุจ ุชุตููู ููุงูุงุช ุญูู ุงููุชู ูู ููุงูุจ WALs ุจุทุฑููุฉ ูุง ุฃุซูุงุก ุงูุงุณุชุฑุฏุงุฏ.  ููููุงู ุจุฐูู ุ ูุณุชุฎุฏู ูุชูุฉ ุงูุฌูู.  ุฅูู ููุนุจ ุฏูุฑ ุนุฏุงุฏ ุงููุนุงููุงุช ุงูุนุงููู ููุชุฒุงูุฏ ูู ูุฑุฉ ูุชุบูุฑ ูููุง ุงููุคุดุฑ.  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุซุงู ูููููุฉ ุนูู ูุฐุง. <br><br>  ุฎุฐ ูุคุดุฑูุง ุจู ุซูุงุซุฉ ูุฏุงุฎู: ูุชูุชุงู ูู ุงููุณุงุฑ ุฑูู 1 ููุชูุฉ ูุงุญุฏุฉ ูู ุงููุณุงุฑ ุฑูู 2. <br><br><img src="https://habrastorage.org/webt/l6/ux/51/l6ux512_lbpedki0bb3g0ouggau.png"><br><br>  ูุชู ุฅููุงุธ ุณูุณูุฉ ุฅูุดุงุก ุงูููุงูุจ ูุชูุฑุงุฑูุง ุจูุงุณุทุฉ ูุฐุง ุงูููุฑุณ: ููุน ุงูุฃูู ูุงูุซุงูู ูู ุงูุทุจูุฉ ุงููุฏูู ุจูุง.  ุซู ูุชุญูู ุชุฏูู ุงูุงุฒุฏุญุงู ุฅูู ุงููุคุดุฑ ุ ููุฏุฑู ุฃู ุงููุชูุฉ ุงูุณุงุจุนุฉ ูู ูุชู ุงููุตูู ุฅูููุง ููุชุฑุฉ ุทูููุฉ ุ ูููุฑุฑ ุงุณุชุฎุฏุงููุง ูุดูุก ุขุฎุฑ.  ููุฑุถ ุงูุนูููุฉ ูุชูุฉ ุงูุฎุฑูุฌ ููุชุงุจุฉ ุณุฌู ุฅูู WAL.  ูุญุตู ุนูู ูุชูุฉ 9 ุ ููุฑู ุฃูู ูู ูุชู ุงูุงุชุตุงู ุจู ููุชุฑุฉ ุทูููุฉ ุ ููููุฒู ุฃูุถูุง ุจุฃูู ูุฒุฏุญู.  ูููู ุงููุณุชุฎุฏู ููุง ุจุงููุตูู ุฅูู ุงููุธุงู ูุชุญุฏุซ ูุดููุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช - ูุชู ุทูุจ ูุณุงุฑ ูุง ูุชููุฑ ูุฏููุง.  ูุญูุธ ูุชูุฉ ูุฐุง ุงููุณุงุฑ ูู ูุณุชูุฏุนูุง ุ ุงููุชุงุจุฉ ููู ูุชูุฉ 9.  ูู ููุณ ุงูููุช ุ ูุชู ุฒูุงุฏุฉ ุงูุฌูู ููุตุจุญ ูุณุงููุงู ูู 22. ุจุนุฏ ุฐูู ุ ูุชู ุชูุดูุท ุนูููุฉ ุฅูุดุงุก ุงููุงูุจ ุ ูุงูุชู ูู ุชููู ุนูููุง ุ ูุชุตู ุฅูู ุงูุณุฌู ุงูุฃุฎูุฑ ูุชูุชุจู ุฅูู ุงููุงูุจ.  ูุชูุฌุฉ ูุฐูู ุ ูุฏููุง ุณุฌูุงู ูุจุงุดุฑุงู ูู ุงูููุฑุณ ุ ูุฑูู ุงูููุซููู ู WAL. <br><br><img src="https://habrastorage.org/webt/sy/vj/0_/syvj0_-kknmn4i5pulf_p8bclc4.png"><br><br>  ุนูุฏ ุณููุท ุงูุนูุฏุฉ ุงูุญุงููุฉ ุ ุณุชููู ุจุงุณุชุนุงุฏุฉ ุงูุญุงูุฉ ุงูุฃูููุฉ ููููุฑุณ ููุง ููู.  ุฃููุงู ุ ูู ุจูุณุญ WAL ูุงุจู ุฎุฑูุทุฉ ูุชูุฉ ูุชุณุฎุฉ.  ุชุฎุฒู ุงูุจุทุงูุฉ ุงูุชุนููู ูู ุฑูู ุงููุชูุฉ ุฅูู ุงูุฌูู ุนูุฏ ุงุณุชุจุฏุงู ูุฐู ุงููุชูุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/9p/g5/gn/9pg5gn-8atbixm4swmytkscxwpm.png" width="300"></div><br><br>  ุจุนุฏ ุฐูู ุ ูุจุฏุฃ ูู ุงูุชูุฑุงุฑ ุนูู ุงููุงูุจ ุจุงุณุชุฎุฏุงู ุงูุฎุฑูุทุฉ ููุฑุดุญ.  ูุญู ููุธุฑ ุฅูู ุงูุณุฌู ุงูุฃูู ูู ุงููุฏูู ุจูุง ุ ูุชุนูู ุงูุฃูุฑ ุจููู ุฑูู 3.  ูู ูุฑุฏ ุฐูุฑู ุจูู ุงููุฐุฑ ุ ููุง ูุนูู ุฃูู ุนูู ููุฏ ุงูุญูุงุฉ ููุฏุฎู ูู ุงูููุฑุณ.  ูุตููุง ุฅูู ุงููุชูุฉ ุฑูู 7 ูุน ุงูุฌูู ุงูุซุงูู ุนุดุฑ ุ ููู ุฎุฑูุทุฉ ุงููุชูุฉ ุงููุฐุฑุฉ ุชุฎุจุฑูุง ุฃูู ูู ุงูุฌูู ุงูุซุงูู ุนุดุฑ ููุท ูุงูุช ุงููุชูุฉ ูุฒุฏุญูุฉ.  ูุฐูู ุ ูุง ููุน ูู ุงูููุฑุณ.  ูุตู ุฅูู ุงูุณุฌู ุงูุฃุฎูุฑ ุ ุงูุฐู ูุตู ูุญุชููุงุช ุงููุชูุฉ 9 ูุน 22 ุฌูููุง.  ุชู ุฐูุฑ ูุฐู ุงููุชูุฉ ูู ุฎุฑูุทุฉ ุงููุชูุฉ ุงููุฐุฑุฉ ุ ูููู ุชู ุงุณุชุจุฏุงููุง ูุณุจููุง.  ูุฐูู ุ ูุชู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงููุง ููุจูุงูุงุช ุงูุฌุฏูุฏุฉ ููุฏุฎู ูู ุงูููุฑุณ.  ูุชู ุชุญููู ุงููุฏู. <br><br><h1 style=";text-align:right;direction:rtl">  ุงูุชุญุณููุงุช </h1><br>  ูููู ูุฐุง ููุณ ูู ุดูุก ุ ูุญู ูุฐูุจ ุฃุนูู. <br><br>  ููุจุฏุฃ ูุน ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุตูุญุฉ.  ููุฏ ุงุนุชูุฏูุง ุนูููุง ูู ุงูุจุฏุงูุฉ ุ ูููู ุนูุฏูุง ุจุฏุฃูุง ูู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุชุญููู ุงูุฅุตุฏุงุฑ ุงูุฃูู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุจูู</a> ุฃู ูุณุจุฉ ุงููุตูู ุฅูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุตูุญุฉ ูู ุชุตู ุฅูู 20ูช.  ููุฏ ุงูุชุฑุญูุง ุฃู ูุชู ูุฑุงุกุฉ ุงููุดููุฉ ูุณุจููุง: ูุง ูููู ุจุชุฎุฒูู ุงููููุงุช ุ ูููููุง ูููู ุจุญุธุฑูุง ุ ุจูููุง ูููุฑ ูุฌููุนุฉ ูู ุงูุงุชุตุงูุงุช ุ ููู ูุฐุง ุงูุชูููู ุ ูููู ุงูุนูู ูุน ุงููุฑุต ูุนุงููุง ุจุดูู ุนุดูุงุฆู.  ูุญู ุชูุฑูุจุง ูุง ููุฑุฃ ุฃู ุดูุก ุจุงูุชุชุงุจุน.  ูุญุณู ุงูุญุธ ุ ููุฌุฏ ูู Linux ููุงููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>posix_fadvise</code></a> ุชุชูุญ ูู ุฅุฎุจุงุฑ kernel ุจููููุฉ ุชุนุงูููุง ูุน ูุงุตู ุงูููู - ุนูู ูุฌู ุงูุฎุตูุต ุ ูููููุง ุงูููู ุฃููุง ูุณูุง ุจุญุงุฌุฉ ุฅูู ุงููุฑุงุกุฉ ูุณุจููุง ุจุชูุฑูุฑ ุนูุงูุฉ <code>POSIX_FADV_RANDOM</code> .  ููุงููุฉ ุงููุธุงู ูุฐู ูุชุงุญุฉ ูู ุฎูุงู ูุงุชู <a href="">ูุงุญุฏ</a> .  ูู ุงูุนูููุฉ ุ ูุฏููุง ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุชุตู ุฅูู 70-80 ูช.  ุงูุฎูุถ ุนุฏุฏ ุงููุฑุงุกุงุช ุงููุงุฏูุฉ ูู ุงูุฃูุฑุงุต ุจุฃูุซุฑ ูู ูุฑุชูู ุ ูุงูุฎูุถ ุงูุชุฃุฎูุฑ ูู ุงุณุชุฌุงุจุฉ HTTP ุจูุณุจุฉ 20ูช. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูุฐูุจ ุฃุจุนุฏ ูู ุฐูู. </font><font style="vertical-align: inherit;">ุงูุฎุฏูุฉ ูุฏููุง ุญุฌู ูููุฉ ูุจูุฑุฉ ุฅูู ุญุฏ ูุง. </font><font style="vertical-align: inherit;">ูุฌุนู ุงูุญูุงุฉ ุฃุณูู ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช TLB ูููุนุงูุฌ ุ ูุฑุฑูุง ุชุถููู ุตูุญุงุช ุถุฎูุฉ ูุนูููุฉ Java ุงูุฎุงุตุฉ ุจูุง. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุญุตููุง ุนูู ุฃุฑุจุงุญ ููุญูุธุฉ ูููุช ุฌูุน ุงูููุงูุฉ (ูุงู ููุช GC / Safepoint Total Time ุฃูู ุจูุณุจุฉ 20-30 ูช) ุ ูุฃุตุจุญ ุชุญููู kernel ุฃูุซุฑ ุงูุชุธุงููุง ุ ููู ูู ููุงุญุธ ุฃู ุชุฃุซูุฑ ุนูู ุงูุฑุณูู ุงูุจูุงููุฉ ูุจุฑูุชูููู HTTP.</font></font><br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุงุฏุซ </font></font></h1><br>       ( ) . <br><br>             .  ,     ,           ,    ,      .        ,   - .   ,    .  ,        ,    .   ,     Daft Punk    โ2  sdc,            sdd. <br><br><img src="https://habrastorage.org/webt/9q/pu/9g/9qpu9gxbc-uph2jp7tsjkup4b5a.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุชุถุญ ุฃูู ุจุนุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฌูุงุฒ ุ ุชุบูุฑุช ุฃุณูุงุก ูุญุฑูุงุช ุงูุฃูุฑุงุต ุงูุฃูุงูู ูุน ุฌููุน ุงูุนูุงูุจ ุงููุชุฑุชุจุฉ ุนูู ุฐูู. </font><font style="vertical-align: inherit;">ูุฐู ุงููุดููุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑููุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุธุงู Linux </font><font style="vertical-align: inherit;">: ุฅุฐุง ูุงู ููุงู ุงูุนุฏูุฏ ูู ูุญุฏุงุช ุงูุชุญูู ูู ุงููุฑุต ูู ุงูุฎุงุฏู ุ ููู ูููู ุชุฑุชูุจ ุชุณููุฉ ุงูุฃูุฑุงุต ูุถููููุง. </font></font><br><br><img src="https://habrastorage.org/webt/3s/y-/vm/3sy-vmtyncu3miiwjhzyu0j9xi4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุตูุงุญ ุชุจูู ุฃู ุชููู ุจุณูุทุฉ. </font><font style="vertical-align: inherit;">ููุงู ุนุฏุฉ ุฃููุงุน ูุฎุชููุฉ ูู ุงููุนุฑูุงุช ุงููุณุชูุฑุฉ ููุฃูุฑุงุต. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WWN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชูุงุฏูุง ุฅูู ุงูุฃุฑูุงู ุงูุชุณูุณููุฉ ููุฃูุฑุงุต ููุณุชุฎุฏููุง ูุชุญุฏูุฏ ุงููุคุดุฑุงุช ูุงูููุทุงุช ู WALs. </font><font style="vertical-align: inherit;">ูุง ูุณุชุซูู ูุฐุง ุนูููุฉ ุฎูุท ุงูุฃูุฑุงุต ููุณูุง ุ ูููู ุจุบุถ ุงููุธุฑ ุนู ููููุฉ ุฎูุทูุง ุ ูู ูุชู ุงูุชูุงู ุชุนููู ุงูููุฑุณ ุงูููุฌูุฏ ุนูู ุงููุฑุต ูุณููุฏู ุฏุงุฆููุง ุงูุจูุงูุงุช ุงูุตุญูุญุฉ.</font></font><br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญููู ุงูุญุงุฏุซ </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏ ุชุญููู ุงููุดููุงุช ูู ูุฐู ุงูุฃูุธูุฉ ุงูููุฒุนุฉ ุฃูุฑูุง ุตุนุจูุง ูุฃู ุทูุจ ุงููุณุชุฎุฏู ููุฑ ุจุนุฏุฉ ูุฑุงุญู ููุชุฎุทู ุญุฏูุฏ ุงูุนูุฏ. ูู ุญุงูุฉ CDN ุ ูุตุจุญ ูู ุดูุก ุฃูุซุฑ ุชุนููุฏูุง ุ ูุฃู CDN ุ ูููู upstream ูู ูุฑูุฒ ุงูุจูุงูุงุช ุงูููุฒูู. ูููู ุฃู ูููู ููุงู ุงููุซูุฑ ูู ูุฐู ุงูุขูุงู. ุนูุงูุฉ ุนูู ุฐูู ุ ูุฎุฏู ุงููุธุงู ูุฆุงุช ุงูุขูุงู ูู ุงุชุตุงูุงุช ุงููุณุชุฎุฏู. ูู ุงูุตุนุจ ููุบุงูุฉ ููู ุงููุฑุญูุฉ ุงูุชู ุชูุฌุฏ ูููุง ูุดููุฉ ูู ูุนุงูุฌุฉ ุทูุจ ูู ูุณุชุฎุฏู ูุนูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุชุจุณูุท ุญูุงุชูุง ูุซู ูุฐุง. ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ุ ูุญุชูู ุจุฌููุน ุงูุทูุจุงุช ุจุงุณุชุฎุฏุงู ุนูุงูุฉ ูุดุงุจูุฉ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open Tracing</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zipkin</font></font></a> .      ,    .          ,    ,       HTTP-    .      ,   ,  ,   ,     ,   ,        . <br><br><h1 style=";text-align:right;direction:rtl">   </h1><br>         . ,  :  ,     ,    . <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">ByteBuffer buffer = ByteBuffer.allocate(size); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = fileChannel.read(buffer, position); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// ... } buffer.flip(); socketChannel.write(buffer);</span></span></code> </pre> <br>        ,       : <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">       <code>FileChannel.read()</code>    kernel space  user space; </li><li style=";text-align:right;direction:rtl">            <code>SocketChannel.write()</code> ,    user space  kernel space. </li></ul><br>  ,  Linux   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>sendfile()</code></a> ,              ,    user space.  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">one-nio</a> .                ,      <code>sendfile()</code> โ    10 /   <code>sendfile()</code>    0. <br><br>     user-space SSL-     <code>sendfile()</code>      ,        .       .     <code>SocketChannel</code>  <code>FileChannel</code> ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Async Profiler</a>         ,         <code>sun.nio.ch.IOUtil</code> ,      <code>read()</code>  <code>write()</code>   .    . <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">ByteBuffer bb = Util.getTemporaryDirectBuffer(dst.remaining()); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n = readIntoNativeBuffer(fd, bb, position, nd); bb.flip(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) dst.put(bb); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n; } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { Util.offerFirstTemporaryDirectBuffer(bb); }</code> </pre> <br>    .       heap <code>ByteBuffer</code> ,         ,    ,     heap <code>ByteBuffer</code> ,       .        . <br><br>  .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">one-nio</a> .   <code>MallocMT</code> โ  ,   .    SSL       ,     Java heap,    <code>ByteBuffer</code> ,      <code>FileChannel</code>       .      . <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Allocator allocator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MallocMT(size, concurrency); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Socket socket)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (socket.getSslContext() != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> address = allocator.malloc(size); ByteBuffer buf = DirectMemory.wrap(address, size); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> available = channel.read(buf, offset); socket.writeRaw(address, available, flags);</code> </pre><br><h1 style=";text-align:right;direction:rtl"> 100 000    </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุฌุงุญ ุงููุธุงู ุบูุฑ ูุถููู ูู ุฎูุงู ุงูุชูููุฐ ุงููุนููู ูู ุงููุณุชููุงุช ุงูุฃุฏูู. ููุงู ูุดููุฉ ุฃุฎุฑู ููุง. ูุฎุฏู ุงููุงูู ุนูู ูู ุนูุฏุฉ ูุง ูุตู ุฅูู 100 ุฃูู ุงุชุตุงู ูู ููุช ูุงุญุฏ. ููููุฉ ุชูุธูู ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ูู ูุซู ูุฐุง ุงููุธุงูุ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูู ูุง ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ูู ุฅูุดุงุก ูุคุดุฑ ุชุฑุงุจุท ุงูุชูููุฐ ููู ุนููู ุฃู ุงุชุตุงู ุ ูููู ูููู ุจุชูููุฐ ูุฑุงุญู ุงููุฑุญูุฉ ุงููุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู. ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูุชูุฉ ุ ุซู ุงููุถู ูุฏูุง. ูููู ูุน ูุซู ูุฐุง ุงููุฎุทุท ุ ุณุชููู ุชูุงููู ุชุจุฏูู ุงูุณูุงู ูุฃููุงู ุงูุชุฏููุงุช ุจุงูุธุฉ ุ ูุฃููุง ูุชุญุฏุซ ุนู ููุฒุน ูุงููุซูุฑ ูู ุงูุชุฏููุงุช. ูุฐูู ุ ุฐูุจูุง ูู ุงูุงุชุฌุงู ุงูุขุฎุฑ.</font></font><br><br><img src="https://habrastorage.org/webt/mt/vg/eo/mtvgeoszcpcv6zpc-qi_rbqeyhy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅูุดุงุก ุฎุท ุฃูุงุจูุจ ููุทูู ููู ุงุชุตุงู ุ ูุงูุฐู ูุชููู ูู ูุฑุงุญู ุงูุชูุงุนู ูุน ุจุนุถูุง ุงูุจุนุถ ุจุดูู ุบูุฑ ูุชุฒุงูู. ูู ูุฑุญูุฉ ููุง ุฏูุฑ ูุฎุฒู ุงูุทูุจุงุช ุงููุงุฑุฏุฉ. ูุชูููุฐ ุงููุฑุงุญู ุ ูุชู ุงุณุชุฎุฏุงู ุชุฌูุนุงุช ูุคุดุฑ ุชุฑุงุจุท ูุดุชุฑู ุตุบูุฑ. ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ูุนุงูุฌุฉ ุฑุณุงูุฉ ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุทูุจ ุ ููุญู ูุฃุฎุฐ ุฏูููุง ูู ุงูุชุฌูุน ุ ููุนุงูุฌ ุงูุฑุณุงูุฉ ููุนูุฏ ุงูุฏูู ุฅูู ุงูุชุฌูุน. ูุน ูุฐุง ุงููุฎุทุท ุ ูุชู ุฏูุน ุงูุจูุงูุงุช ูู ุงูุชุฎุฒูู ุฅูู ุงูุนููู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุซู ูุฐุง ุงููุฎุทุท ูุง ูุฎูู ูู ุงูุนููุจ. ุงูุฎูููุฉ ูู ุฃุณุฑุน ุจูุซูุฑ ูู ุงุชุตุงูุงุช ุงููุณุชุฎุฏู. ุนูุฏูุง ุชูุฑ ุงูุจูุงูุงุช ุนุจุฑ ุฎุท ุงูุฃูุงุจูุจ ุ ุชุชุฑุงูู ูู ุฃุจุทุฃ ูุฑุงุญููุง ุ ุฃู ูู ูุฑุญูุฉ ูุชุงุจุฉ ุงููุทุน ุฅูู ููุจุณ ุงุชุตุงู ุงูุนููู. ุนุงุฌูุงู ุฃู ุขุฌูุงู ุ ุณูุคุฏู ูุฐุง ุฅูู ุงูููุงุฑ ุงููุธุงู. ุฅุฐุง ุญุงููุช ุชูููุฏ ููุงุฆู ุงูุงูุชุธุงุฑ ูู ูุฐู ุงููุฑุงุญู ุ ูุณูุชู ุฅููุงู ูู ุดูุก ุนูู ุงูููุฑ ุ ูุฃู ุฎุทูุท ุงูุฃูุงุจูุจ ูู ุงูุณูุณูุฉ ุฅูู ููุจุณ ุงููุณุชุฎุฏู ุณูุชู ุญุธุฑูุง. ููุฃููู ูุณุชุฎุฏููู ุชุฌูุนุงุช ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุงููุดุชุฑูุฉ ุ ูุฅููู ุณูุญุธุฑูู ุฌููุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูููุง. ุชุญุชุงุฌ ุฅูู ุงูุถุบุท ุงูุฎููู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุงุณุชุฎุฏููุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุงุฑุงุช ุฌุช</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุฌููุฑ ุงูููุฌ ูู ุฃู ุงููุดุชุฑู ูุชุญูู ูู ุณุฑุนุฉ ุงูุจูุงูุงุช ุงููุงุฑุฏุฉ ูู ุงููุงุดุฑ ุจุงุณุชุฎุฏุงู ุงูุทูุจ. ุงูุทูุจ ูุนูู ูููุฉ ุงูุจูุงูุงุช ุงูุชู ูููู ุงููุดุชุฑู ูุณุชุนุฏูุง ููุนุงูุฌุชูุง ุฅูู ุฌุงูุจ ุงูุทูุจ ุงูุณุงุจู ุงูุฐู ุฃุดุงุฑ ุฅููู ุจุงููุนู. ุงููุงุดุฑ ูุฏูู ุงูุญู ูู ุฅุฑุณุงู ุงูุจูุงูุงุช ุ ูููู ูุง ูุชุฌุงูุฒ ุฅุฌูุงูู ุงูุทูุจ ุงููุชุฑุงูู ูู ุงูููุช ุงูุญุงูู ุ ูุงูุต ุงูุจูุงูุงุช ุงููุฑุณูุฉ ุจุงููุนู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ููุชูู ุงููุธุงู ุฏููุงูููููุง ุจูู ุฃูุถุงุน ุงูุฏูุน ูุงูุณุญุจ. </font><font style="vertical-align: inherit;">ูู ูุถุน ุงูุฏูุน ุ ูููู ุงููุดุชุฑู ุฃุณุฑุน ูู ุงููุงุดุฑ ุ ููุง ูุนูู ุฃู ุงููุงุดุฑ ูุฏูู ุฏุงุฆููุง ุทูุจ ุบูุฑ ูุฑุถ ูู ุงููุดุชุฑู ุ ููู ูุง ุชูุฌุฏ ุจูุงูุงุช. </font><font style="vertical-align: inherit;">ุจูุฌุฑุฏ ุธููุฑ ุงูุจูุงูุงุช ุ ูุฑุณููุง ุนูู ุงูููุฑ ุฅูู ุงููุดุชุฑู. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุถุน ุงูุณุญุจ ุนูุฏูุง ูููู ุงููุงุดุฑ ุฃุณุฑุน ูู ุงููุดุชุฑู. </font><font style="vertical-align: inherit;">ููุฐุง ูุนูู ุฃู ุงููุงุดุฑ ุณูููู ุณุนูุฏูุง ุจุฅุฑุณุงู ุงูุจูุงูุงุช ุ ูุงูุทูุจ ููุท ูู ุตูุฑ. </font><font style="vertical-align: inherit;">ุจูุฌุฑุฏ ุฃู ูููู ุงููุดุชุฑู ุฅูู ูุณุชุนุฏ ูููุนุงูุฌุฉ ุฃูุซุฑ ูู ุฐูู ุจูููู ุ ูุฑุณู ุงููุงุดุฑ ููุฑูุง ูุทุนุฉ ูู ุงูุจูุงูุงุช ูุฌุฒุก ูู ุงูุทูุจ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญูู ูุงูููุง ุฅูู ุชูุงุฑ ููุงุซ. </font><font style="vertical-align: inherit;">ุชุชุญูู ูู ูุฑุญูุฉ ุฅูู ูุงุดุฑ ูููุฑุญูุฉ ุงูุณุงุจูุฉ ููุดุชุฑู ูููุฑุญูุฉ ุงูุชุงููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฌูุฉ ุงูุฌุฏุงูู ุงูููุงุซุฉ ุชุจุฏู ุจุณูุทุฉ ููุบุงูุฉ. </font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุญ ุงูุชูููุน</font></font><code>Subscriber</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฌุจ ุนููู ููุท ุชูููุฐ ุฃุฑุจุนุฉ ูุนุงูุฌุงุช: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Publisher</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Subscriber&lt;? </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">super</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&gt; s)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscriber</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSubscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Subscription s)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscription</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">request</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cancel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre> <br> <code>Subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณูุญ ูู ุจุงูุฅุดุงุฑุฉ ุฅูู ุงูุทูุจ ูุฅูุบุงุก ุงูุงุดุชุฑุงู. </font></font> ูุง ููุฌุฏ ููุงู ุฃุณูู. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูุตุฑ ูู ุงูุจูุงูุงุช ุ ูุญู ูุง ููุฑ ุตูููุงุช ุงูุจุงูุช ุ ูููู ูุฐุง ุงูุชุฌุฑูุฏ ูุซู ูุทุนุฉ. </font><font style="vertical-align: inherit;">ูููู ุจุฐูู ูู ุฃุฌู ุนุฏู ุณุญุจ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู ุงููููุฉ ุ ุฅุฐุง ูุงู ุฐูู ูููููุง. </font><font style="vertical-align: inherit;">Chunk ุนุจุงุฑุฉ ุนู ุฑุงุจุท ุจูุงูุงุช ุจูุงุฌูุฉ ูุญุฏูุฏุฉ ููุบุงูุฉ ุชุชูุญ ูู ูุฑุงุกุฉ ุงูุจูุงูุงุช ููุท </font></font><code>ByteBuffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ุงููุชุงุจุฉ ุฅูู ููุจุณ ุฃู ุฅูู ููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Chunk</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ByteBuffer dst)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Socket socket)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FileChannel channel, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> offset)</span></span></span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงู ุงูุนุฏูุฏ ูู ุชุทุจููุงุช ุงููุทุน: </font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุซุฑ ุดุนุจูุฉ ุ ูุงูุฐู ูุชู ุงุณุชุฎุฏุงูู ูู ุญุงูุฉ ุงูููุฑ ุนูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุนูุฏ ุฅุฑุณุงู ุงูุจูุงูุงุช ูู ุงููุฑุต ุ ูู ุงูุชุทุจูู ุนูู ุงูููุฉ </font></font><code>RandomAccessFile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญุชูู ุงูููุทุน ููุท ุนูู ุฑุงุจุท ููููู ูุงูุฅุฒุงุญุฉ ูู ูุฐุง ุงูููู ูุญุฌู ุงูุจูุงูุงุช. </font><font style="vertical-align: inherit;">ููุฑ ุนุจุฑ ุฎุท ุงูุฃูุงุจูุจ ุจุฃูููู ุ ููุตู ุฅูู ููุจุณ ุงุชุตุงู ุงููุณุชุฎุฏู ุ ูููุงู ูุชุญูู ุฅูู ููุงููุฉ </font></font><code>sendfile()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุฐุง ูู ุ ูุง ูุชู ุงุณุชููุงู ุงูุฐุงูุฑุฉ ุนูู ุงูุฅุทูุงู.</font></font></li><li style=";text-align:right;direction:rtl">   cache miss   :             .     , โ  ,     , โ      . </li><li style=";text-align:right;direction:rtl"> ,    -      heap.        <code>ByteBuffer</code> . </li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุจุณุงุทุฉ ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุฐู ุ ุฅูุง ุฃููุง ูุฌุจ ุฃู ุชููู ุขููุฉ ููุคุดุฑ ุงูุชุฑุงุจุท ูู ุฎูุงู ุงูููุงุตูุงุช ุ ููุฌุจ ุฃู ุชููู ูุนุธู ุงูุทุฑู ุบูุฑ ูุญุธูุฑุฉ. </font><font style="vertical-align: inherit;">ููุฏ ุงุฎุชุฑูุง ุงููุณุงุฑ ุจุฑูุญ ูููุฐุฌ ุงูููุซู ุงููุทุจูุน ุ ูุณุชูุญู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุซูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชูุฏุน </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฏูู ุงูููุงุซ </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุงูุฑุณูู</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฅุฌุฑุงุก ููุงููุงุช ุบูุฑ ูุงุจูุฉ ููุญุธุฑ ุ ุนูุฏูุง ูุณูููุง ุงูุทุฑููุฉ ุ ูุฃุฎุฐ ุฌููุน ุงููุนููุงุช ุ ูููููุง ูู ุฑุณุงูุฉ ุ ููุถุนูุง ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ููุชูููุฐ ุ ููุชุญูู ูู ุงูุฅุฑุฌุงุน. </font><font style="vertical-align: inherit;">ุชุชู ูุนุงูุฌุฉ ุงูุฑุณุงุฆู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจุงูุชุณูุณู ุจุฏูุฉ.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุงูุชุฒุงูู ุ ุฑูุฒ ุจุณูุท ููุจุงุดุฑ.</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     .   publisher  subscriber   ,    ,   executor,       . <code>AtomicBoolean</code>  happens before   . <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Incoming messages final Queue&lt;M&gt; mailbox; // Message processing works here final Executor executor; // To ensure HB relationship between runs final AtomicBoolean on = new AtomicBoolean();</span></span></code> </pre> <br>    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">request</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ enqueue(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Request(n)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enqueue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> M message)</span></span></span><span class="hljs-function"> </span></span>{ mailbox.offer(message); tryScheduleToExecute(); }</code> </pre> <br>  <code>tryScheduleToExecute()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (on.compareAndSet(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { executor.execute(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { ... } }</code> </pre> <br>  <code>run()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (on.get()) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { dequeueAndProcess(); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { on.set(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!messages.isEmpty()) { tryScheduleToExecute(); } } }</code> </pre> <br>  <code>dequeueAndProcess()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">M message; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((message = mailbox.poll()) != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// Pattern match if (message instanceof Request) { doRequest(((Request) message).n); } else { โฆ } }</span></span></code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุญุตููุง ุนูู ุชุทุจูู ุบูุฑ ูุงุจู ููุญุธุฑ ุชูุงููุง. </font><font style="vertical-align: inherit;">ููุฏ ุจุณูุทุฉ ููุชุณูุฉุ ุฏูู </font></font><code>volatile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>Atomic*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุฎูุงูุ ูุบูุฑูุง. </font><font style="vertical-align: inherit;">ูู ูุธุงููุง ุจุงููุงูู ุ ููุฌุฏ 200 ูุคุดุฑ ุชุฑุงุจุท ูุฎุฏูุฉ 100000 ุงุชุตุงู.</font></font><br><br><h1 style=";text-align:right;direction:rtl">  ูู ุงูููุงูุฉ </h1><br>  production   12 ,          .        10 /    .     .    Java  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">one-nio</a> . <br><br><img src="https://habrastorage.org/webt/oa/pz/cq/oapzcqjf6y9ccxrnk1wzrpaigdy.jpeg"><br><br>     ,     . 99-  20 .   โ    HTTPS-.   โ         <code>sendfile()</code>  HTTP. <br><br>    cache hit  production 97%,    latency   ,         ,   ,   . <br><br><img src="https://habrastorage.org/webt/xp/fd/eq/xpfdequddx6cnglrzrgdxtbspuc.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุธุฑุช ุฅูู ุงููุณุจุฉ ุงููุฆููุฉ 75 ุนูุฏ ุงูุฑุฌูุน ูู ุงูุฃูุฑุงุต ุ ูุฅู ุงูุจุงูุช ุงูุฃูู ููุชูู ุฅูู ุงููุณุชุฎุฏู ุจุนุฏ 1 ูููู ุซุงููุฉ. </font><font style="vertical-align: inherit;">ุชุชูุงุตู ุงููุณุฎ ุงููุชูุงุซูุฉ ุฏุงุฎู ุงููุฌููุนุฉ ุจุณุฑุนุงุช ุฃูุจุฑ - ููู ูุณุคููุฉ ุนู 300 ูููุฑูู.</font></font> ุฃู<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.7 ูููู ูู ุชูููุฉ ุงูุจุฑููุณู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงูููุงูุฉ ุ ุฃุฑุฏูุง ุฃู ููุถุญ ููู ูุจูู ุฃูุธูุฉ ูุงุจูุฉ ููุชุญุฌูู ุนุงููุฉ ุงูุชุญููู ูุฐุงุช ุณุฑุนุฉ ุนุงููุฉ ูุชุญูู ููุชุงุฒ ููุฃุฎุทุงุก. </font><font style="vertical-align: inherit;">ูุฃูู ุฃู ููุฌุญ.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar434206/">https://habr.com/ru/post/ar434206/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar434194/index.html">ุชูููุฉ ุงูููุงุฑุงุช ูุฃููุณ. ุชุฌุฑุจุฉ ูุน ูุงุฌูุงุช ุงูุตูุช ุ ูุตุงุฆุญ ูููุจุชุฏุฆูู</a></li>
<li><a href="../ar434196/index.html">3CX v16 Alpha 2 ูุฎุทุท ููุนุงู ุงูุฌุฏูุฏ</a></li>
<li><a href="../ar434198/index.html">ุงุฎุชูุงุฑ ูุถุน ุชุดุบูู ุฎุงุฏู ุงูููุจ ุจูุงุกู ุนูู ุงูุชุฌุฑุจุฉ ุงูุดุฎุตูุฉ</a></li>
<li><a href="../ar434200/index.html">ูู ุงูุตุฏุฃ ุงูุฑููุจ ููุบุงูุฉ ููุง ูู ุฑุณููุง</a></li>
<li><a href="../ar434202/index.html">4 ุฃุณุฑุงุฑ ุญูู ููููุฉ ุนุฏู ููุฏุงู ูุธููุชู ูู ุนูู ุงูุจูุงูุงุช</a></li>
<li><a href="../ar434208/index.html">ููู ุชุฐูุจ ุงููุญููุธุฉ ูุฏููุง ุงูุฌูุนุฉ ุงูุณูุฏุงุก</a></li>
<li><a href="../ar434210/index.html">ุชุญููู ูุณุงุจูุฉ ูุณุงุจูุฉ Android ูู ููุตุฉ HeadHunter ูู Mobius 2018 Moscow</a></li>
<li><a href="../ar434212/index.html">ุจุฑุฌ ุชุณูุง. ูุงุฐุง ูุญุฏุซ ูู ูุงุทุญุฉ ุณุญุงุจ ูุจุงููุฑุจ ูููุง ุนูุฏ ุงูุตูุงุนูุ</a></li>
<li><a href="../ar434214/index.html">ูููู Java ุงูุฏููุงูููู: ูุง ูู ูููููุฉ ุงุณุชุฎุฏุงููุ</a></li>
<li><a href="../ar434216/index.html">ูุฌูุงุช ุงูููุฉ ุงูุบุงุดูุฉ ุจุงุณุชุฎุฏุงู Kali Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>