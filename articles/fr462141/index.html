<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçó ‚ò¢Ô∏è üêõ Panier pour un centre de donn√©es ü§ûüèæ üßöüèø üê±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comment d√©ployer le bot Python Telegram √† l'aide de Webhooks sur Google Cloud Platform 
 Au lieu de l'avant-propos 



 - √âcrivez un bot de t√©l√©gramme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Panier pour un centre de donn√©es</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ods/blog/462141/"><p>  <i>Comment d√©ployer le bot Python Telegram √† l'aide de Webhooks sur Google Cloud Platform</i> </p><br><h2>  Au lieu de l'avant-propos </h2><br><img src="https://habrastorage.org/webt/oi/jo/yy/oijoyytwumhn8skry24krjfi8ke.jpeg" width="45%" height="45%" alt="image" align="left"><br><p>  <i>- √âcrivez un bot de t√©l√©gramme.</i>  <i>Maintenant, m√™me les √©coliers √©crivent ¬ª, a-t-elle d√©clar√©.</i> <i><br></i>  <i>¬´Et pourquoi pas¬ª, ai-je alors pens√© (¬´Eh bien, eh bien¬ª, je dirais maintenant).</i> </p><br><p>  Nous nous sommes assis dans Bean et autour d'une tasse de caf√©, nous avons discut√© des possibilit√©s de tester des id√©es avec des mod√®les d'intelligence artificielle sur un cercle d'amis proche et peu fr√©quent.  Lena, mon ancienne coll√®gue, et √† tous √©gards pas une blonde qui venait de terminer ses √©tudes de magistrature, a raisonn√© comme suit.  En cr√©ant un bot, vous pouvez √©conomiser du temps et de l'√©nergie sur l'interface en vous concentrant sur le c≈ìur avec l'apprentissage automatique.  Il faut avouer qu'il √©tait impossible de r√©sister √† une telle logique de ¬´sportive, membre du Komsomol et simplement belle¬ª en ce beau dimanche matin.  C'est r√©solu.  Bot t√©l√©gramme signifie bot t√©l√©gramme. </p><br><p>  Tout d'abord, j'ai ramp√© sur Google et trouv√© un grand nombre de liens "comment faire un bot en 30 minutes".  Cela m'a tellement inspir√© que je ne suis pas all√© au-del√† des noms et j'ai commenc√© √† cr√©er un noyau.  Dans la toute premi√®re approximation, j'ai d√ª √©crire un syst√®me de traitement des requ√™tes de recherche utilisant le NLP (traitement du langage naturel).  L'√©criture du noyau a pris un temps assez raisonnable (n√©anmoins, l'exp√©rience de Coca-Cola ne peut pas √™tre bue).  Et quelques jours plus tard, j'√©tais pr√™t √† emballer la premi√®re version de test du noyau dans quelques autres commandes d'envoi-r√©ception en quelques heures, ex√©cutant tout cela dans Telegram pour le b√©n√©fice de mes amis.  Mais √ßa y √©tait. </p><br><p>  Soudain, tout un tas de probl√®mes ont surgi.  Apr√®s avoir pass√© quelques jours √† chercher sur Internet et √† parler avec des coll√®gues de la boutique, j'ai r√©alis√© que l'√©vidence n'est pas √©vidente, et une autre "instruction" ne fera pas de mal.  Cet article est donc apparu. </p><a name="habracut"></a><br><h2>  Au lieu d'entr√©e.  Biblioth√®ques </h2><br><p>  Il existe plusieurs biblioth√®ques Python pour les robots de t√©l√©grammes.  Le t√©l√©gramme lui-m√™me fait r√©f√©rence √† trois d'entre eux: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">python-telegram-bot</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pyTelegramBotAPI</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AIOGram</a> .  Des liens vers ces biblioth√®ques et des exemples dans d'autres langues sont disponibles sur le site Web de Telegram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Bien s√ªr, il y a toujours <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'API Telegram elle-m√™me</a> .  Au cours de mes exp√©riences, j'ai essay√© deux variantes de l'API Telegram et de pyTelegramBotAPI.  Et alors arr√™t√© √† la seconde. </p><br><p>  En g√©n√©ral, les impressions des biblioth√®ques sont les suivantes.  Tous sont tr√®s similaires, ce qui n'est pas surprenant.  Python-telegram-bot, il me semble, poss√®de la meilleure documentation de tous, bien que le travail sur celui-ci soit arr√™t√© (j'esp√®re que je me trompe).  On peut voir que le travail continue sur pyTelegramBotAPI, une nouvelle fonctionnalit√© appara√Æt.  AIOGram semble plus jeune et plus vert.  Dans ce dernier, je n'aimais pas cela. Au lieu de la documentation sur les webhooks, il y avait un lien vers le site Web de Telegram.  Mais tout coule, tout change.  Et le choix final reste √† faire. </p><br><p>  Nous ne reviendrons pas sur la question des biblioth√®ques dans cet article. </p><br><p>  Quant au code du bot lui-m√™me, comme je l'ai d√©j√† not√©, il existe de nombreux manuels sur Internet consacr√©s √† la cr√©ation de programmes simples et plus complexes.  Aux fins du pr√©sent article, cela n'est pas sans principes.  Prenons par exemple deux exemples tir√©s du github officiel de pyTelegramBotAPI: </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bot t√©l√©gramme utilisant le sondage</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/eternnoir/pyTelegramBotAPI/blob/master/examples/webhook_examples/webhook_aio">Bot t√©l√©gramme utilisant webhook</a> . </li></ol><br><p>  Les sujets les plus controvers√©s avec les robots t√©l√©grammes sont les certificats SSL, les webhooks et la diploing.  Autour de cela et concentrer notre attention.  Ci-dessous, je vous donnerai des instructions √©tape par √©tape qui vous permettront de placer votre bot de t√©l√©gramme sur l'un des meilleurs services cloud du monde de la mani√®re la plus simple et la plus fiable dans les plus brefs d√©lais (au moins la premi√®re ann√©e).  La cr√©ation de certificats SSL, leur enregistrement dans le t√©l√©gramme et d'autres questions connexes seront √©galement mises en √©vidence.  Si n√©cessaire, je vous expliquerai pourquoi nous utilisons telle ou telle option, telle ou telle √©quipe. <br></p><br><h2>  Sondage vs Webhook </h2><br><img src="https://habrastorage.org/webt/tp/2b/ve/tp2bveonfyk-z9uqucefpqkg90k.jpeg" width="45%" height="45%" alt="image" align="left"><br><p>  S'il n'y avait pas eu la confrontation entre sondage et webhook et quelques difficult√©s (partiellement artificielles) avec webhook, cet article n'aurait pas √©t√© n√©cessaire.  √âtant donn√© que cela est d'une importance fondamentale, regardons plus en d√©tail. </p><br><p>  Qu'est-ce qu'un bot et comment communique-t-il avec Telegram?  De toute √©vidence, un bot est un programme qui s'ex√©cute sur votre ordinateur ou serveur.  Et la communication avec le t√©l√©gramme se fait par l'envoi et la r√©ception de messages.  Et si tout est clair avec l'envoi de messages, une option est d'envoyer (l'adresse ¬´o√π¬ª nous le savons).  Il existe deux options pour recevoir des messages de bot de Telegram. </p><br><p>  Le premier est un sondage (traduction litt√©rale du mot polling) du serveur Telegram pour les messages pour le bot.  Le second est une ¬´bo√Æte aux lettres¬ª avec une adresse IP (le webhook peut √™tre traduit comme un pi√®ge Web), vers lequel arrivent les messages du serveur Telegram. </p><br><p>  L'analogie la plus simple avec le vrai courrier.  Laissez mail (bureau de poste) est le serveur Telegram, et vous √™tes votre bot.  Ensuite, dans le premier cas (scrutin), vous devez vous rendre √† la poste pour la correspondance.  Et si vous voulez recevoir des messages sans d√©lai, vous n'aurez pas √† y aller, mais vous ferez litt√©ralement des va-et-vient sans r√©pit.  Comme nous le comprenons, vivre dans le courrier en attendant des messages est interdit!  Dans le deuxi√®me cas, vous indiquez votre adresse √† la poste et attendez calmement la correspondance √† la maison, en buvant du th√© ou en fumant du bambou. </p><br><p>  Bien s√ªr, pour une personne, la premi√®re option semble la plus grave.  Mais, en parlant entre nous, si nous courons apr√®s les messages, nous envoyons un morceau de fer avec un code, alors nous ne devrions pas nous en soucier.  Et il en serait ainsi, sinon pour un probl√®me.  De temps en temps, le courrier (le serveur Telegram) ferme parfois pour le d√©jeuner, puis se d√©place.  Et dans votre premi√®re option (sondage), une trag√©die se produit, qui dans le monde r√©el des bots se termine par leur vol stationnaire et leur √©chec. </p><br><p>  Dans le second cas, la ¬´bo√Æte aux lettres¬ª avec l'adresse (webhook) ne se produit pas.  Parce que ni vous, ni votre robot, n'allez nulle part, mais attendez simplement.  Et peu importe o√π le bureau de poste a d√©m√©nag√©, car le facteur vous apporte du courrier. </p><br><p>  Ainsi, en termes de quantit√© de code (voir lien ci-dessus), la premi√®re option semble plus simple.  Et le second est plus logique, mais plus difficile.  Pour sa mise en ≈ìuvre, vous devez obtenir une adresse, confirmer son authenticit√© et √©lever le serveur Web, auquel les messages du t√©l√©gramme parviendront. </p><br><p>  Bien s√ªr, pour la premi√®re option, il est possible d'ajouter la gestion des exceptions au code.  Par exemple, si le courrier est ferm√©, attendez et attendez.  Mais Internet pr√©tend que tous les m√™mes robots avec sondage sont juste pour jouer. </p><br><p>  Au d√©but, je ne pensais pas que le probl√®me √©tait si grave.  Et il a fait une option avec sondage, sugg√©rant qu'un jour je le r√©√©crirai sur les webhooks.  Mais cela n'a pas fonctionn√©.  Sur mon ordinateur personnel avec macOS, le bot a fonctionn√© sans probl√®me pendant une heure et deux (bien s√ªr, avec un VPN) et n'a pas plant√©.  Mais d√®s que je l'ai transf√©r√© sur le serveur cloud sous Linux, cela ne pouvait pas fonctionner pendant 20 minutes.  J'ai essay√© de r√©soudre ce probl√®me de diff√©rentes mani√®res et param√®tres, mais je n'ai re√ßu qu'un code d'erreur diff√©rent.  Selawy, voici Telegram.  Ayant perdu une journ√©e, j'ai d√ª reprendre des webhooks sans tarder.  Au final, je voulais lancer le bot sur le serveur maintenant, et non dans un an. <br></p><br><h2>  R√©√©criture de code sur le webhook </h2><br><p>  <i>Le webhook n'est pas aussi effrayant qu'il est peint.</i> </p><br><p>  Si vous avez d√©j√† un code bot avec interrogation, il ne sera pas difficile de le copier sur le webhook.  Comparez les codes des exemples de la biblioth√®que pyTelegramBotAPI.  Vous trouverez l'intersection de code.  Les lignes 13 √† 25 du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">premier exemple sont les</a> m√™mes que les lignes 56 √† 67 du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/eternnoir/pyTelegramBotAPI/blob/master/examples/webhook_examples/webhook_aio">deuxi√®me exemple</a> .  Il s'agit d'une unit√© logique responsable du traitement des commandes, des messages et des r√©ponses.  Dans ce cas, l'exemple est trop simple, mais il refl√®te l'essentiel. </p><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># Handle '/start' and '/help' @bot.message_handler(commands=['help', 'start']) def send_welcome(message): bot.reply_to(message, """\ Hi there, I am EchoBot. I am here to echo your kind words back to you. Just say anything nice and I'll say the exact same thing to you!\ """) # Handle all other messages with content_type 'text' (content_types defaults to ['text']) @bot.message_handler(func=lambda message: True) def echo_message(message): bot.reply_to(message, message.text)</span></span></code> </pre> <br><p>  Ainsi, le bloc logique du bot doit rester inchang√© et le reste doit √™tre modifi√© en utilisant le code banal copier-coller en dehors du bloc logique du deuxi√®me exemple (c'est-√†-dire copier les lignes 1-55 et 70-87).  Si vous regardez le code que vous copiez, vous pouvez facilement d√©couvrir qu'en utilisant la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://aio">aiohttp,</a> votre bot installe un serveur http et commence √† √©couter sur le port allou√© pour ce port, tandis que le module <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ssl</a> Python est responsable du cryptage et des certificats.  Outre aiohttp, il existe d'autres biblioth√®ques similaires, dont vous trouverez des exemples <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </p><br><p>  Alors.  Nous avons un bot avec webhook.  Il reste √† le t√©l√©charger sur le serveur et √† l'ex√©cuter, recevant simultan√©ment des donn√©es pour remplir les valeurs vides dans le code API_TOKEN, WEBHOOK_HOST, WEBHOOK_PORT, WEBHOOK_SSL_CERT, WEBHOOK_SSL_PRIV.  Derri√®re chacune de ces valeurs se trouve une certaine proc√©dure √† signification secr√®te. <br></p><br><h2>  Enregistrer un bot dans Telegram </h2><br><p>  Commen√ßons par le jeton de bot.  Pour l'obtenir, acc√©dez au messager Telegram et connectez-vous au bot @BotFather.  Entrez la commande ¬´/ newbot¬ª.  En r√©ponse, BotFather nous invite √† entrer le nom et le nom d'utilisateur de notre bot et envoie un jeton convoit√© du formulaire ¬´712308912: DLGSteczdUnPdnNYLzNikaGOhome7l9q3vova¬ª (bien s√ªr, vous en aurez un autre).  Nous sauvegardons le jeton, ne le montrez √† personne.  Dans le code, nous l'affectons √† la variable API_TOKEN. <br></p><br><h2>  O√π poster?  Google Cloud Platform vs Heroku </h2><br><p>  Quelques mots sur les tourments du choix d'un service cloud.  Il existe de nombreux exemples sur Internet o√π des robots t√©l√©grammes sont h√©berg√©s sur Heroku.  Heroku est une plateforme PaaS (plateforme en tant que service).  Vous t√©l√©chargez le code sur GitHub, et de l√† sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Heroku</a> .  Et votre robot commence √† fonctionner imm√©diatement.  Pas besoin d'installer le serveur, Python et les biblioth√®ques, tout a d√©j√† √©t√© fait pour vous.  Du moins, id√©alement.  Cette solution m'a √©galement √©t√© recommand√©e par un de mes amis.  Mais je l'ai refus√©. </p><br><p>  Si je comprends bien, le principal message pour les recommandations Heroku dans de nombreux manuels de ¬´robots de 30 minutes¬ª est la disponibilit√© d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plan tarifaire gratuit</a> sur Heroku.  Mais, si vous regardez attentivement, il s'av√®re que ce plan est tr√®s limit√© et ne vous permettra pas de d√©ployer un bot gratuit qui fonctionnerait jour et nuit. </p><br><p>  Contrairement √† Heroku, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plateforme Google Cloud Platform</a> (GCP) offre une ann√©e compl√®te de travail gratuit sur tous les services √† moins de 300 $.  Pour ce montant pour l'ann√©e, beaucoup de choses que vous pouvez essayer.  √Ä mon avis, c'est un cadeau magnifique, surtout pour ceux qui sont engag√©s dans la science des donn√©es.  Et, bien s√ªr, GCP est aussi PaaS, une liste compl√®te des services est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Il existe des solutions sans serveur, comme sur Heroku.  J'ai choisi une voie plus conservatrice pour plus de contr√¥le √† l'avenir, √† savoir la solution serveur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Compute Engine</a> sur GCP. <br></p><br><h2>  Plateforme cloud Google </h2><br><p>  <i>Projet, instance, IP statique, port</i> </p><br><h4>  Cr√©er un projet et un serveur </h4><br><p>  Nous allons √† GCP, s√©lectionnez ¬´Commencez gratuitement¬ª et suivez les instructions.  Si nous faisons tout correctement, nous aurons un compte d'un montant de 300 $ et m√™me le premier projet cr√©√©.  Nous s√©lectionnons ce projet ou en cr√©ons un autre dans le menu du haut, ce qui n'est pas difficile.  Et puis allez dans l'onglet ¬´Compute Engine / VM Instance¬ª dans le menu lat√©ral qui s'ouvre. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hw/mu/dn/hwmudnnoog3fhutxopij3vmdaeo.png" width="60%" height="60%" alt="image"></div><br><p>  Cliquez sur ¬´CR√âER UNE INSTANCE¬ª et s√©lectionnez la configuration du serveur, par exemple, comme indiqu√© dans la capture d'√©cran ci-dessous.  Vous pouvez choisir une micro configuration et cela ne vous co√ªtera que 4 $ par mois.  Vous pouvez √©galement m√©langer, les fonds seront d√©bit√©s d'un cadeau de Google √† 300 $. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ah/u9/h9/ahu9h9oqvk0xvbltw08odqqkium.png" alt="image"></div><br><p>  En cons√©quence, nous obtenons. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/s_/cv/x_/s_cvx_fytblpl3hbpwx48gdmrj8.png" alt="image"></div><br><p></p><br><h4>  Rendre l'adresse IP statique </h4><br><p>  Dans la colonne "IP externe", nous voyons l'adresse que nous conduisons dans la variable WEBHOOK_HOST dans notre bot (dans cet exemple, il s'agit de 35.224.231.90).  Nous recevrons un certificat SSL √† cette adresse ult√©rieurement.  Si vous avez l'intention d'utiliser le bot pendant une longue p√©riode (m√™me si vous changez le serveur dans GCP), alors je recommande de rendre cette adresse IP statique afin de la sauvegarder lors du passage d'une instance √† une autre.  Cela se fait dans la section ¬´VPC / adresses IP externes¬ª. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ws/08/f7/ws08f71j4vink6sredri7sn5k7w.png" width="60%" height="60%" alt="image"></div><br><p>  Nous changeons le champ "Type" de "√âph√©m√®re" en "Statique", en donnant le nom √† l'adresse statique afin que vous ne vous trompiez pas plus tard si vous avez une douzaine d'adresses IP plus tard. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vd/sy/ug/vdsyugaqmpgjrcnn_v9lniyrp2y.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pu/fh/i0/pufhi0ermqi0jckodbpyx_qyjdu.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yg/ly/ln/yglylnfmm7oclpudssp7sycu8a4.png" width="60%" height="60%" alt="image"></div><br><p></p><br><h4>  Port ouvert </h4><br><p>  Pour que le webhook fonctionne correctement, nous devons ouvrir le port sur lequel Telegram va frapper.  Actuellement (juillet 2019), Telegram prend en charge les ports suivants: 443, 80, 88, 8443. Plus de d√©tails, vous pouvez voir le guide complet de Telegram sur les webhooks <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Nous allons ouvrir le port 8443. Dans notre bot, cette valeur est d√©j√† affect√©e √† la variable WEBHOOK_PORT.  Il reste √† configurer la r√®gle de pare-feu dans GCP pour notre instance de webhook-bot.  Comment faire  Allez dans l'onglet ¬´R√®gles VPC / Firewall¬ª et cliquez sur ¬´CR√âER UNE R√àGLE DE PARE-FEU¬ª. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gr/4i/f5/gr4if5xforj5psjgljivxmru8y4.png" width="60%" height="60%" alt="image"></div><br><p>  Et cr√©ez une r√®gle, comme indiqu√© dans la capture d'√©cran ci-dessous. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ne/gt/jl/negtjln_cf8mbb0sledqn5wvvkg.png" alt="image"></div><br><p></p><br><h4>  Nous nous connectons au serveur, installons des biblioth√®ques </h4><br><p>  Ceci termine la configuration de base du serveur sur Google Cloud Platform.  Nous avons obtenu un compte sur GCP, cr√©√© un projet, cr√©√© un serveur (instance) bas√© sur Ubuntu 19.04 dans le cadre du projet, r√©serv√© une adresse IP, ouvert le port 8443. </p><br><p>  Il en reste peu.  J'esp√®re que nous pourrons nous passer d'une description d√©taill√©e de la partie d'installation de Python et des biblioth√®ques.  Par cons√©quent, bri√®vement. </p><br><p>  Allez dans l'onglet GCP "Compute Engine / VM Instance" et dans le champ "Connect" cliquez sur "SSH". </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/s_/cv/x_/s_cvx_fytblpl3hbpwx48gdmrj8.png" alt="image"></div><br><p>  Un terminal devrait s'ouvrir sur votre ordinateur local avec acc√®s √† l'instance sur GCP.  Il s'agit d'un environnement Ubuntu normal.  Installez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">conda</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">virtualenv</a> , cr√©ez un environnement virtuel et installez Python 3 avec les biblioth√®ques principales.  De plus, nous installons les biblioth√®ques n√©cessaires au fonctionnement de notre bot: <br>  pip installer pyTelegramBotAPI <br>  pip install aiohttp </p><br><p>  Apr√®s l'installation, ne fermez pas le terminal, nous en aurons besoin. <br></p><br><h2>  Obtention d'un certificat SSL auto-sign√© pour IP </h2><br><p>  Je dois dire que sur Internet autour du sujet des certificats SSL pour Telegram est une horreur solide.  Comme l'a dit Mikhail Lermontov √† cet √©gard: </p><br><p>  <i>"Les chevaux m√©lang√©s en tas, les gens,</i> <i><br></i>  <i>Et des vol√©es de mille fusils</i> <i><br></i>  <i>Fusionn√© en un long hurlement ... "</i> </p><br><p>  Si vous lisez ce qu'ils √©crivent sur Internet, il s'av√®re que si le bot ne fonctionne pas sur les webhooks, alors les certificats mal re√ßus sont √† bl√¢mer.  Et pourtant, ils ne peuvent pas √™tre enregistr√©s sur ip.  En g√©n√©ral, Telegram n'accepte pas les certificats auto-sign√©s.  Et m√™me s'il accepte le certificat, cela ne signifie pas que votre bot fonctionnera, et Telegram n'enverra m√™me pas d'erreur. </p><br><p>  Ce sont des histoires d'horreur.  Pourquoi est-ce que j'√©cris √ßa?  Outre le fait que ces histoires d'horreur m'ont co√ªt√© une autre journ√©e perdue, j'ai m√™me d√ª sauter de regarder "The Hobbit".  Mon bot a d'abord refus√© de travailler sur des webhooks.  Cela s'est produit en raison de mes erreurs lors de son placement sur le serveur (alors je ne le savais pas).  Mais √† cause des histoires d'horreur ci-dessus, je cherchais le probl√®me pas l√†, en me concentrant sur la r√©solution des probl√®mes avec les certificats SSL qui n'√©taient pas l√†.  Mais j'ai acquis une exp√©rience inestimable.  J'ai enregistr√© des certificats pour les ann√©es √† venir √† la fois sur les noms de domaine et sur ip, auto-sign√©s et pay√©s, √† la fois sous la forme de deux fichiers et sous la forme de quatre.  J'ai d√©couvert quels certificats entrent et comment en faire des cha√Ænes.  J'esp√®re que cela vous sera utile. </p><br><p>  Une chose est bonne, vous n'avez pas besoin de monter sur ce r√¢teau, je l'ai d√©j√† fait pour vous.  J'admets pleinement que comme il n'y a pas de ¬´fum√©e sans feu¬ª, il y avait une raison pour de telles histoires d'horreur.  Mais pour la journ√©e actuelle, la situation semble s'√™tre stabilis√©e. </p><br><p>  √Ä l'heure actuelle, nous recevrons un certificat SSL de la mani√®re la plus pratique pour nous, √† savoir sur ip (et non sur un nom de domaine), auto-sign√© (c'est-√†-dire gratuitement) et ne co√ªtant qu'une seule ligne sans aucun site. </p><br><p>  Dans le terminal (que nous n'avons pas encore ferm√©), pr√©parez un r√©pertoire s√©par√© dans lequel nous enregistrerons le fichier de certificat et la cl√© priv√©e.  Allez dans ce r√©pertoire et appelez-y la commande suivante. </p><br><pre> <code class="bash hljs">$ openssl req -newkey rsa:2048 -sha256 -nodes -keyout url_private.key -x509 -days 3560 -out url_cert.pem</code> </pre> <br><p>  En r√©ponse, vous recevrez des demandes pour remplir un certain nombre de champs simples.  Remplissez-les dans l'exemple ci-dessous.  Mais, bien s√ªr, indiquez correctement le code de votre pays, r√©gion, ville, nom de l'entreprise (le cas √©ch√©ant), remplacez votre adresse IP et votre e-mail. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wi/q3/fi/wiq3fixoya8owjmt_-hafyn3urw.png" alt="image"></div><br><p>  Par cons√©quent, vous obtiendrez deux fichiers dans le r√©pertoire √† partir duquel vous avez ex√©cut√© cette commande.  Un fichier url_cert.pem est votre certificat et la deuxi√®me cl√© priv√©e est url_private.key.  Dans le code bot, les variables WEBHOOK_SSL_CERT et WEBHOOK_SSL_PRIV leur sont respectivement attribu√©es.  N'oubliez pas de saisir les chemins d'acc√®s √† ces fichiers avec les noms.  T√©l√©chargez des copies et conservez-les pour r√©f√©rence future. </p><br><p>  Ne fermez pas le terminal. <br></p><br><h2>  Enregistrer le webhook dans Telegram </h2><br><h4>  Enregistrement d'un webhook avec un certificat auto-sign√© </h4><br><p>  C'est peut-√™tre la partie la plus excitante de ¬´Que dira Telegram?¬ª.  Sans aucun pr√©ambule, entrez simplement la commande suivante dans votre terminal.  Remplacez l'adresse IP par la v√¥tre; ne touchez pas le port 8443.  Ins√©rez le jeton re√ßu de BotFather entre "/ bot" et "/ setWebhook") au lieu de YOUR-TOKEN.  Ex√©cutez la commande √† partir du r√©pertoire dans lequel les certificats sont stock√©s. </p><br><pre> <code class="bash hljs">$ curl -F <span class="hljs-string"><span class="hljs-string">"url=https://35.224.231.90:8443"</span></span> -F <span class="hljs-string"><span class="hljs-string">"certificate=@url_cert.pem"</span></span> https://api.telegram.org/botYOUR-TOKEN/setWebhook</code> </pre> <br><p>  Si tout est correct, vous recevrez dans le terminal un message concis du t√©l√©gramme indiquant que le webhook est install√©. </p><br><h4>  Enregistrement d'un webhook avec le certificat ¬´correct¬ª </h4><br><p>  Si vous n'avez pas de certificat auto-sign√©, vous pouvez installer webhook avec la commande suivante directement depuis le navigateur. </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">https://</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">api.telegram.org</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">botYOUR</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TOKEN</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setWebhook</span></span></span><span class="hljs-function">?</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">url</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">https</span></span></span><span class="hljs-function">://</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">YOUR.DOMAIN</span></span></span><span class="hljs-function">:8443/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">YOUR</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TOKEN</span></span></span><span class="hljs-function">/</span></span></code> </pre> <br><p>  Veuillez noter que votre jeton est indiqu√© deux fois.  De plus, il est important que YOUR.DOMAIN soit sp√©cifi√© comme indiqu√© dans le certificat.  Par exemple.  J'ai enregistr√© le domaine mydreem.com, le bureau d'enregistrement m'a d√©livr√© un certificat SSL pour le domaine www.mydreem.com.  Au lieu de YOUR.DOMAIN, vous devez sp√©cifier le dernier www.mydreem.com. </p><br><h4>  Comment v√©rifier si le webhook est install√©? </h4><br><p>  Vous pouvez v√©rifier si le webhook est install√© √† partir du navigateur avec la commande suivante: </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">https://</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">api.telegram.org</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">botYOUR</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TOKEN</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWebhookInfo</span></span></span></span></code> </pre> <br><p>  Cela fonctionne pour tous les cas.  En r√©ponse, vous devriez obtenir quelque chose comme √ßa au cas o√π le webhook est install√© et le bot est en cours d'ex√©cution: </p><br><pre> <code class="dos hljs">{"ok":true,"result":{"url":"https://<span class="hljs-number"><span class="hljs-number">35</span></span>.<span class="hljs-number"><span class="hljs-number">224</span></span>.<span class="hljs-number"><span class="hljs-number">231</span></span>.<span class="hljs-number"><span class="hljs-number">90</span></span>:<span class="hljs-number"><span class="hljs-number">8443</span></span>/<span class="hljs-number"><span class="hljs-number">712308912</span></span>:DLGSteczdUnPdnNYLzNikaGOhome7l9q3vova/","has_custom_certificate":true,"pending_update_count":<span class="hljs-number"><span class="hljs-number">0</span></span>,"max_connections":<span class="hljs-number"><span class="hljs-number">40</span></span>}}</code> </pre> <br><p>  Ou comme ceci, lorsque le webhook est install√©, mais que le bot ne fonctionne pas (ne fonctionne pas): </p><br><pre> <code class="dos hljs">{"ok":true,"result":{"url":"https://<span class="hljs-number"><span class="hljs-number">35</span></span>.<span class="hljs-number"><span class="hljs-number">224</span></span>.<span class="hljs-number"><span class="hljs-number">231</span></span>.<span class="hljs-number"><span class="hljs-number">90</span></span>:<span class="hljs-number"><span class="hljs-number">8443</span></span>/<span class="hljs-number"><span class="hljs-number">712308912</span></span>:DLGSteczdUnPdnNYLzNikaGOhome7l9q3vova/","has_custom_certificate":true,"pending_update_count":<span class="hljs-number"><span class="hljs-number">2</span></span>,"last_error_date":<span class="hljs-number"><span class="hljs-number">1564506964</span></span>,"last_error_message":"Connection refused","max_connections":<span class="hljs-number"><span class="hljs-number">40</span></span>}}</code> </pre> <br><h4>  Comment r√©initialiser le webhook? </h4><br><p>  Parfois, vous devrez peut-√™tre modifier le certificat du bot, par exemple, en cas de d√©placement vers un autre serveur (domaine).  Ensuite, le jeton reste et le certificat change (le webhook est r√©install√©).  Ou il devient n√©cessaire d'ex√©cuter le bot non pas sur le webhook, mais sur l'interrogation (si le webhook est install√©, l'interrogation ne fonctionnera pas).  Dans les deux cas, une commande qui ¬´r√©initialise¬ª le webhook est utile: </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">https://</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">api.telegram.org</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">botYOUR</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TOKEN</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setWebhook</span></span></span></span></code> </pre> <br><p>  Maintenant, tout est pr√™t pour t√©l√©charger le code sur le serveur et lancer le bot.  Si vous √™tes un ma√Ætre du jeu sur la ligne de commande avec dix doigts, cela ne vous sera pas difficile.  Et dans une minute, votre bot fonctionnera.  Sinon, la section suivante aidera √† faciliter quelque peu la t√¢che de t√©l√©chargement / t√©l√©chargement de fichiers sur votre serveur et leur gestion. <br></p><br><h2>  Cloud Shell ou ¬´Drop Dead Beautiful¬ª </h2><br><p>  C‚Äôest difficile pour moi, en tant que personne loin de l‚Äôadministration syst√®me, de comprendre pourquoi, √† l‚Äô√®re du triomphe de l‚Äôintelligence artificielle, nous communiquons toujours avec les serveurs de ligne de commande comme jadis sur l‚Äôordinateur EU / SM.  Supposons qu'il existe des raisons inconnues des simples mortels.  Ensuite, un ph√©nom√®ne comme Cloud Shell dans GCP doit √™tre accept√© avec une grande joie.  Cet outil permet, certes avec des b√©quilles, mais de faciliter quelque peu le travail des non initi√©s.  Bien que cela puisse faire du mal si vous ne connaissez pas certaines des nuances. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cloud Shell</a> permet d'acc√©der aux ressources cloud √† partir de la ligne de commande directement depuis le navigateur.  Vous pouvez <del>  facile </del>  g√©rez vos projets et ressources sans installer le SDK Google Cloud ou d'autres outils dans votre syst√®me (les deux derni√®res phrases sont extraites de leur page, c'est "facilement" barr√© par moi).  Vous trouverez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> comment g√©rer vos projets √† partir de la ligne de commande.  Mais l'essentiel pour nous n'est pas √ßa.  Lancez Cloud Shell (voir le gif ci-dessous, extrait de google). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/si/7p/yh/si7pyhijurtp0i4ta3brjsee8yk.gif" alt="image"></div><br><p>  Vous √™tes connect√© √† Cloud Shell.  Maintenant, si vous cliquez sur le bouton sous forme de crayon, ¬´l'√©diteur de texte en version b√™ta¬ª s'ouvrira. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jy/op/rt/jyoprt3zetf5mgzyoykqqwzfojs.png" width="45%" height="45%" alt="image"></div><br><p>  Dans le menu "Aide / √Ä propos", vous pouvez d√©couvrir qu'il s'agit de "theia-editor-for-cloudshell-preview 0.0.1".  √Ä la fin de l'article, je ne vais pas me plonger dans les fonctionnalit√©s de travailler avec cet √©diteur.  Je ne soulignerai que les points cl√©s.  Ce n'est pas seulement un √©diteur pour plusieurs langues (v√©rifi√© uniquement avec Python), mais aussi un gestionnaire de fichiers.  Vous pouvez facilement organiser le partage de fichiers entre Cloud Shell et votre ordinateur local.  Vous pouvez transf√©rer des fichiers et des r√©pertoires dans l'espace Cloud Shell avec votre souris. </p><br><p>  Veuillez noter que je n'ai √©crit nulle part au-dessus du fait qu'en utilisant l'√©diteur, vous pouvez modifier et g√©rer des fichiers sur votre serveur (instance).  Mais m√™me cela suffit pour nous faciliter la vie.  Et plus √† ce sujet ci-dessous.  Et maintenant, je vais vous dire quelque chose d'important √† propos de Cloud Shell.  Cela doit √™tre compris pour ne pas entrer dans le p√©trin, comme cela m'est arriv√©. </p><br><p>  Cloud Shell est un serveur bas√© sur Debian avec 5 Go d'espace disque et 1,7 Go de RAM.  Certains logiciels y sont d√©j√† pr√©install√©s (dont Python).  Cloud Shell peut facilement √™tre confondu avec votre instance, installez conda dessus, cr√©ez env et ex√©cutez le bot.  Et, si le bot interroge, cela fonctionnera.  Si sur le webhook, cela ne fonctionnera pas, car tous les ports sur Cloud Shell sont ferm√©s!  Et combien n'ouvrent pas de ports sur l'instance, ils n'appara√Ætront pas sur Cloud Shell. </p><br><p>  En raison de mon inexp√©rience juv√©nile et de ma n√©gligence, je suis tomb√© dans ce pi√®ge et j'ai essay√© pendant longtemps de comprendre pourquoi Telegram ne voyait pas mon bot avec un webhook.  Ensuite, j'√©tais tr√®s contrari√©.  Mais la femme s'est r√©chauff√©e et les fils ont rassur√©, et cet article est apparu. </p><br><p>  Soit dit en passant, Cloud Shell existe en dehors de l'espace et du temps (une blague proche de la v√©rit√©).  Si vous supprimez toutes les instances et tous les projets de votre domicile, votre Cloud Shell continuera d'exister pendant 120 jours suppl√©mentaires avec tout ce que vous y aurez t√©l√©charg√©.  Ne confondez pas cela avec la sauvegarde de vos serveurs. </p><br><p>  Alors.  Averti, puis arm√©.  Et maintenant, nous pouvons parler de commodit√©s et apprendre quelques commandes utiles. </p><br><p>  Par exemple, si vous souhaitez utiliser Cloud Shell comme terminal pour acc√©der √† votre serveur (par exemple, webhook-bot), vous devez activer votre instance sur la ligne de commande: </p><br><pre> <code class="bash hljs">$ gcloud compute ssh webhook-bot --zone us-central1<span class="hljs-_"><span class="hljs-_">-a</span></span></code> </pre> <br><p>  Apr√®s cela, vous vous retrouvez sur la ligne de commande de votre serveur.  Vous pouvez revenir √† Cloud Shell avec la commande ¬´exit¬ª.  Supposons que vous souhaitiez copier certains fichiers de Cloud Shell vers une instance.  Pour ce faire, √† l'invite de commandes Cloud Shell (pas une instance), tapez la commande suivante: </p><br><pre> <code class="bash hljs">$ gcloud compute scp --recurse ~/telebot/my_favorite_robot.py webhook-bot:~/telebot --zone us-central1<span class="hljs-_"><span class="hljs-_">-a</span></span></code> </pre> <br><p>  Si vous modifiez la source avec la destination, la copie de l'instance vers Cloud Shell aura lieu.  Dans l'exemple ci-dessous, nous copions le fichier ¬´ex1.py¬ª du r√©pertoire ¬´/ examples¬ª du serveur ¬´webhook-bot¬ª dans le r√©pertoire ¬´/ telebot2¬ª du Cloud Shell: </p><br><pre> <code class="bash hljs">$ gcloud compute scp --recurse webhook-bot:~/examples/ex1.py --zone us-central1<span class="hljs-_"><span class="hljs-_">-a</span></span> ~/telebot2</code> </pre> <br><p>  Ces commandes et d'autres commandes de partage de fichiers peuvent √™tre trouv√©es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Vous pouvez √©changer non seulement des fichiers, mais aussi des r√©pertoires entiers.  En cons√©quence, nous obtenons le sch√©ma suivant qui nous facilite la vie.  √Ä partir de l'ordinateur local, nous copions les fichiers en cliquant sur quelques boutons de la souris dans Cloud Shell via l'√©diteur de gestionnaire de fichiers "theia-editor-for-cloudshell-preview 0.0.1".  Et puis nous redirigeons cela vers notre serveur (instance) avec la ligne de commande.  Si nous devons modifier rapidement quelque chose, nous pouvons le faire dans le m√™me √©diteur dans Cloud Shell et t√©l√©charger des fichiers avec la m√™me commande sur le serveur.  Cela se r√©v√®le assez rapidement. </p><br><p>  Je crois qu'il existe des moyens plus √©l√©gants et pratiques d'√©changer et de g√©rer des fichiers pour un serveur cloud sur GCP √† tous √©gards (sans installer de programmes suppl√©mentaires sur l'ordinateur local).  Peut-√™tre via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cloud Storage</a> .  Franchement, je n'ai pass√© que quelques heures √† chercher et √† exp√©rimenter sur cette question.  Par cons√©quent, je vous serais reconnaissant de partager vos id√©es ou vos solutions de travail dans les commentaires. </p><br><p>  Alors.  Nous avons t√©l√©charg√© les fichiers sur le serveur (instance).  Et, si vous n'avez pas encore lanc√© le bot, il est temps de le faire en allant sur le terminal du serveur, en activant l'environnement virtuel n√©cessaire et en tapant une commande comme "python my_webhook_bot.py".  Tout devrait fonctionner.  Pour que le bot continue de fonctionner lorsque le terminal est ferm√©, il doit √™tre lanc√© en arri√®re-plan.  Par exemple, ¬´nohup python my_webhook_bot.py &amp;¬ª.  La qu√™te pour faire sortir le processus de l'arri√®re-plan et le terminer, je vous laisse, √† moins, bien s√ªr, que vous le sachiez d√©j√†. <br></p><br><h2>  Conclusion </h2><br><p>  J'esp√®re que cet article vous a √©t√© utile, il a permis de gagner du temps et d'√©viter les erreurs que j'ai faites lors de l'√©criture d'un bot de t√©l√©gramme avec des webhooks et de le placer sur le serveur.  Tout ce qui √©tait d√©crit dans l'article, je suis pass√© par moi-m√™me, et au moment de la r√©daction, juillet-ao√ªt 2019, √ßa fonctionnait comme √ßa.  Je tiens √† exprimer une gratitude particuli√®re √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mikhail Krutikov</a> pour avoir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">navigu√©</a> conjointement sur les √©tendues des services GCP et pour avoir aid√© √† r√©aliser un certain nombre de v√©rit√©s importantes.  Je suis ouvert aux questions, aux discussions et je serai reconnaissant pour les conseils dans les commentaires de cet article.  Ou n'h√©sitez pas √† m'√©crire dans Telegram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@Eduard_Lanchev</a> . </p><br><p>  Jusqu'au dernier moment, la question √©tait ouverte pour moi de savoir s'il fallait donner un lien vers mon bot de t√©l√©gramme.  Des amis m'ont convaincu que √ßa valait le coup.  Vous pouvez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">discuter</a> avec mon bot sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@AelitaSoccerBot</a> .  Le bot est au tout d√©but du voyage et beaucoup de travail reste √† faire.  Par cons√©quent, √©crivez, si quelque chose ne va pas, √©crivez si vous voulez partager votre exp√©rience ou donner des conseils.  Ma gratitude n'aura pas de limites dans des limites raisonnables.  <em>Remarque</em>  <em>Fin 2019, le bot √©tait d√©sactiv√© en raison du manque de temps pour son support et son d√©veloppement.</em> </p><br><p>  Et au final, je souhaite plein succ√®s √† tous les botovods et √† mes coll√®gues, datacientists! <br></p><br><h4>  Liens utiles </h4><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">API Telegram Bot</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exemples de code de bot</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">python-telegram-bot</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pyTelegramBotAPI</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AIOGram</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ssl - wrapper TLS / SSL pour les objets socket</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Heroku</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Plateforme cloud Google</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Moteur de calcul Google</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Marvin's Marvelous Guide to All Things Webhook</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conda</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Virtualenv</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Coquille de nuage</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'outil de ligne de commande gcloud compute</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Transfert de fichiers √† l'aide de l'outil de ligne de commande gcloud</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Stockage cloud Google</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462141/">https://habr.com/ru/post/fr462141/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462125/index.html">10 √©tapes pour yaml zen</a></li>
<li><a href="../fr462127/index.html">S√©minaire ¬´Pour lui-m√™me auditeur: audit d'un projet de centre de donn√©es et tests d'acceptation¬ª, 15 ao√ªt, Moscou</a></li>
<li><a href="../fr462131/index.html">Des √©pines √† un jeu de r√™ve</a></li>
<li><a href="../fr462133/index.html">Encore une fois sur Chypre, les nuances de la vie</a></li>
<li><a href="../fr462135/index.html">Partenariat strat√©gique: pourquoi ServiceNow fait √©quipe avec un grand fournisseur de cloud</a></li>
<li><a href="../fr462145/index.html">Pourquoi faut-il plusieurs jours pour se d√©sinscrire?</a></li>
<li><a href="../fr462147/index.html">Utilisation de la navigation lors de la refactorisation d'un h√©ritage de projet dans React Native</a></li>
<li><a href="../fr462149/index.html">Mode de restriction d'acc√®s pour les accessoires sur les appareils iOS et comment le contourner</a></li>
<li><a href="../fr462151/index.html">5 principales distributions Kubernetes</a></li>
<li><a href="../fr462153/index.html">Shaders de carte interactive Unity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>