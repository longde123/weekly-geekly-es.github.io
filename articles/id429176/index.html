<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛸 🔢 👊 Analitik aliran: mulai cepat dengan SAS ESP 👩🏻‍✈️ 🗂️ 🖤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Penggunaan algoritma analitik pada aliran data sekarang menjadi salah satu tugas paling mendesak di bidang membangun sistem analitik. Banyak model pre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Analitik aliran: mulai cepat dengan SAS ESP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sas/blog/429176/">  Penggunaan algoritma analitik pada aliran data sekarang menjadi salah satu tugas paling mendesak di bidang membangun sistem analitik.  Banyak model prediksi presisi tinggi, misalnya, dikembangkan berdasarkan pembacaan dari sensor pabrik industri, siap untuk mencegah kecelakaan industri yang serius, tetapi untuk ini mereka perlu dilakukan pada perangkat akhir ("perangkat tepi"), di mana pembacaan dari sensor datang secara real time.  Produk Pemrosesan Streaming Acara SAS dipanggil untuk menyelesaikan masalah ini dan mentransfer analitik ke "online".  Dalam publikasi ini, saya ingin berbagi pengalaman konfigurasinya menggunakan contoh masalah yang diterapkan - analisis gambar dari kamera video. <br><br><img src="https://habrastorage.org/webt/q3/v9/2k/q3v92kdx036qyngrxp-ndx7w7km.png"><br><a name="habracut"></a><br><h3>  Teknologi </h3><br>  SAS telah hadir di lini produk SAS selama bertahun-tahun dan sedang mengembangkan solusi pemrosesan alirannya sendiri, SAS Event Stream Processing (selanjutnya disebut ESP).  Tugas utama para pengembang adalah untuk mencapai kinerja tinggi, pesanan lebih besar dari solusi yang ada di pasar.  Untuk melakukan ini, selama pengembangan ESP, mereka sepenuhnya meninggalkan penyimpanan perhitungan menengah dan indeks pada disk.  Semua konversi aliran dilakukan dalam RAM, dan penghitungan ulang peristiwa khusus dipertahankan. <br><br><img src="https://habrastorage.org/webt/_f/ry/6r/_fry6rq07g-c2mwytu_n0thqpp0.png"><br>  <i>Bekerja dengan memori dalam SAS ESP.</i>  <i>Repositori acara di RAM menyimpan hasil antara dan tidak diblokir jika akses paralel dari proses internal atau eksternal karena indeks tambahan.</i> <br><br>  Mesin dapat menangani aliran data besar - pada beberapa juta peristiwa per detik.  Pada saat yang sama, sambil mempertahankan latensi rendah, karena itu ia dengan cepat mengambil tempatnya dalam solusi untuk pemasaran online dan memerangi penipuan bank.  Di sana, ini adalah filter cerdas operasi pelanggan dan secara instan mendeteksi aktivitas non-standar pada akun, mengisolasi operasi penipuan dari aliran data. <br><br>  Tapi tetap ini adalah fitur sekunder ESP.  Mesin dirancang sebagai mekanisme untuk terus menggunakan model analitis (SAS, C, Python dan lain-lain) pada aliran data. <br><br><img src="https://habrastorage.org/webt/2m/qg/st/2mqgstvtjf69ku-dd-9elmuooii.png"><br>  <i>Prinsip pemrosesan acara streaming.</i> <br><br>  Sebagai contoh ilustratif, untuk forum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SAS Viya Business Breakfast</a> , kami di SAS memutuskan untuk membuat demo stand, dengan mengambil sebagai dasar tugas analisis gambar.  Dan ini adalah bagaimana kami mengaturnya dan apa yang kami temui dalam proses. <br><br><h3>  Alirkan analisis video </h3><br>  Kami memiliki model analitik yang dibangun oleh rekan-rekan dari departemen analitik mendalam pada platform SAS Viya.  Esensinya adalah bahwa, menerima gambar input dari pengemudi di interior mobil, suatu algoritma (dalam hal ini, jaringan saraf convolutional terlatih) mengklasifikasikan perilaku pengemudi sesuai dengan kelas: "mengemudi normal", "terganggu oleh percakapan dengan penumpang", "berbicara tentang telepon "," tulis SMS ", dll. <br><img src="https://habrastorage.org/webt/q3/v9/2k/q3v92kdx036qyngrxp-ndx7w7km.png" align="left">  <i>Contoh dari model: gambar input diklasifikasikan sebagai "menulis SMS", berdasarkan pada bagian gambar di mana tangan dengan telepon menekan.</i> <br><br>  Muncul pertanyaan tentang bagaimana menjalankan algoritma ini secara real time untuk dapat menanggapi perilaku yang tidak diinginkan.  Menurut skenario, gambar dari kamera dalam mode online sudah jatuh dalam bentuk file ke direktori jaringan pada disk. <br><br>  Yang tersisa hanyalah menyambungkan ke data, mengonversi gambar ke format yang diinginkan, menerapkan model, dan, dalam semua kemungkinan milik kelas perilaku, menampilkan peringatan waktu nyata di dasbor online.  Dan ternyata semua ini dapat dikonfigurasi dalam GUI SAS ESP, tanpa satu baris kode program (!). <br><br><h3>  Pemrosesan Aliran Acara SAS </h3><br><img src="https://habrastorage.org/webt/t4/3w/ca/t43wcat2jtk84v43qaztpzw6yfg.png" width="300" align="left">  <i>Proyek deteksi bahaya dalam antarmuka grafis SAS ESP Studio.</i> <br clear="left">  Di editor grafis ESP, kami telah menambahkan transformasi aliran data berikut: <br><br><ol><li> Sebagai input, kami memiliki dua simpul tipe sumber: model_source dan input_image.  Dalam model_source kami menerbitkan model klasifikasi kami.  Untuk melakukan ini, konfigurasikan konektor file, yang membaca perintah dari file teks yang berisi tiga parameter: nama operasi, jenis format model, dan jalur fisik ke file biner.  ESP tertinggal di belakang masing-masing sumber data kemampuan untuk menjadi statis dan streaming, sehingga, kapan saja, kami dapat menerbitkan perintah baru untuk mengunduh model ke simpul ini, yang nyaman dalam operasi industri - kami tidak perlu menghentikan proyek untuk memperbarui versi algoritma. <br><br><img src="https://habrastorage.org/webt/hk/lj/ys/hkljystucnei9_ctlsegjhp9o5o.png"><br>  <i>Menyiapkan perintah penerbitan ke model_source</i> <br><br>  Isi file model input: <br><br> <code>I,N,1,action,load <br> I,N,2,type,astore <br> I,N,3,reference,/opt/sas/demo/image_processing/d.astore</code> </li> <li>  Sumber kedua, input_image, adalah gambar dari kamera.  Untuk mempublikasikan data, kami menggunakan adaptor standar - program yang menerbitkan data dari sumber di ESP.  Dalam hal ini, kami menggunakan adaptor file, tetapi Anda juga dapat terhubung ke kamera secara langsung, misalnya, melalui adaptor UVC yang disertakan dengan solusi. <br><br><img src="https://habrastorage.org/webt/ay/ql/hp/ayqlhpbfglnxdttpuv1ckoqdo9k.png"><br>  <i>Mengkonfigurasi konektor UVC untuk jenis camcorder yang umum.</i> </li><li>  Gambar mungkin datang dalam format yang berbeda dari yang di mana model dilatih, dan ini dapat mempengaruhi kualitas klasifikasi.  Oleh karena itu, setelah input_image, kami segera menambahkan simpul resize_image dan meresepkan format yang diinginkan dalam pengaturannya.  Dalam hal ini, tekan hingga kuadrat 100/100 piksel. <br><br><img src="https://habrastorage.org/webt/jl/bp/th/jlbpthn46z31lehm1ulcb5oe6fy.png" align="left" width="250">  <i>Pengaturan Pemrosesan Gambar</i> <br clear="left"></li><li>  Eksekusi model dikonfigurasikan dalam CNN_score_code.  Antarmuka akan secara otomatis mengekstrak atribut keluaran dari meta-description model - P__label_c0, P__label_c1, P__label_c2 dan P__label_c9 - probabilitas setiap kelas perilaku.  Selanjutnya, dalam simpul max_class, kita akan mendefinisikan bidang terhitung baru yang akan memilih kelas dengan probabilitas maksimum. </li><li>  Sekarang, dengan meluncurkan proyek, kita akan dapat memperoleh klasifikasi waktu nyata untuk setiap gambar input.  Dalam sejarah kami, pengemudi yang tidak bertanggung jawab secara berkala terganggu dari jalan.  Tapi penting untuk memisahkan kasus-kasus itu ketika dia terganggu sejenak dari kasus mengemudi berbahaya yang berkepanjangan.  Untuk melakukan ini, kami menambahkan 3 node: menyimpan acara di menit terakhir (copy_1_min), agregasi berdasarkan kelas perilaku (aggr_for_alert) dan filter fakta “mengemudi berbahaya” (filter_alert). <br><br><img src="https://habrastorage.org/webt/zi/kk/tn/zikktnzlze0q_w1zvir7awy5gum.png" width="300" align="left">  <i>Mengonfigurasi pengaturan penyimpanan acara - dalam 1 menit terakhir.</i> <br clear="left"><img src="https://habrastorage.org/webt/65/bx/n7/65bxn7cssoq6r2g8tmv20uu-wbs.png" width="300" align="left"><br>  <i>Menyiapkan penghitungan acara untuk setiap kelas perilaku.</i> <br clear="left"><img src="https://habrastorage.org/webt/8t/bt/sc/8tbtscxuouv-v3ab5xpykssttvk.png"><br>  <i>Menetapkan aturan penyaringan.</i> <br></li></ol><br><h3>  Indeks </h3><br>  Penting untuk dicatat bahwa setiap transformasi dalam ESP memiliki pengaturan - "Negara".  Ini mencirikan apakah transformasi data mengalir, mis.  saat memproses suatu peristiwa input, hasilnya segera dikirim lebih jauh di sepanjang diagram dan dihapus dari memori node ini.  Atau kita dapat menyimpan hasil pemrosesan setiap peristiwa dan membuat indeks di atasnya untuk memungkinkan akses ke sana kapan saja.  Misalnya, jendela agregasi selalu menyimpan status, dan terus-menerus dihitung ulang berdasarkan aliran input. <br><br><h3>  Luncurkan </h3><br>  Kembali ke proyek.  Kami hanya harus menjalankannya <img src="https://habrastorage.org/webt/uv/dy/le/uvdyleayvtubt4nmqhcd2jlcqjo.png" width="50">  . <br>  Untuk memudahkan melihat aliran data, perancang laporan online, SAS ESP Stream Viewer, disediakan dengan ESP.  Dalam mode pengaturan, kami melihat semua proyek yang berjalan di server, dan kami dapat terhubung dengan mereka dan memilih visualisasi yang nyaman. <br><br><img src="https://habrastorage.org/webt/hc/jm/7f/hcjm7fhuisbkt_unw2m3poekrhc.gif"><br>  <i>Dasbor online di SAS ESP Stream Viewer</i> <br><br>  Itu saja.  Kami mendapat kesempatan untuk mengotomatisasi reaksi secara real time ke sinyal video.  Dalam hal ini, kami membuat pemantauan online, tetapi menggunakan adaptor / konektor yang sama, kami dapat mengirim pesan untuk setiap kasus pelanggaran yang terdeteksi, atau membentuk aksi kontrol ke sistem eksternal. <br><br><h3>  Atau Python? </h3><br>  Secara teknis, kasus ini selesai, tetapi untuk tujuan menunjukkan di forum, sepertinya tidak cukup interaktif.  Itu merepotkan, dan sangat tidak aman (!) Untuk ditampilkan dalam waktu nyata, jadi foto diambil di muka dan mobil ada di tempat parkir. <br><br>  SAS ESP mendukung eksekusi streaming model yang dibuat dengan Python.  Untuk konfirmasi, kami mengatur analisis gambar, yaitu mencari objek dalam gambar, menggunakan pustaka OpenCV. <br><br><img src="https://habrastorage.org/webt/62/nr/gh/62nrghkxa8unlmf2m3fjy82knz0.png" width="300" align="left">  <i>Model ESP untuk menemukan topi sulit pada aliran input gambar</i> <br clear="left">  Dalam diagram ESP, kami memiliki 2 sumber data: bingkai dari kamera online laptop dan foto objek yang kami cari.  Dalam hal ini, kami menentukan apakah calon pekerja di lokasi konstruksi telah melupakan peraturan keselamatan: apakah ada helm di situ.  Di simpul proc_detection, kami menjalankan kode Python berikut: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compute_total</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Image,image_template)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"Output: score_point"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> base64 <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> imageio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> imread MIN_MATCH_COUNT = <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-comment"><span class="hljs-comment">#       DIST_COEFF = 0.55 img_big = imread(io.BytesIO(base64.b64decode(image_template))) sift = cv2.xfeatures2d.SIFT_create() # Initiate SIFT detector matcher = cv2.BFMatcher() # BFMatcher with default params kp_big, des_big = sift.detectAndCompute(img_big,None) img_tpl = imread(io.BytesIO(base64.b64decode(Image))) kp_tpl, des_tpl = sift.detectAndCompute(img_tpl,None) matches = matcher.knnMatch(des_tpl,des_big,k=2) good = [] for m,n in matches: if m.distance &lt; n.distance * DIST_COEFF: good.append(m) score_point = len(good) return score_point</span></span></code> </pre><br><img src="https://habrastorage.org/webt/xb/ql/56/xbql56g_rpt7jzmxp6bdzjwab-a.gif" width="500"><br>  <i>Identifikasi keberadaan helm dalam gambar dari webcam di forum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SAS Viya Business Breakfast</a> (kolega, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">maxxts sedang</a> menguji dudukan)</i> <br><br><h3>  Pembelajaran mesin </h3><br>  Jika kita berbicara tentang pengembangan lebih lanjut dari pemrosesan aliran, maka penekanannya mungkin akan bergeser ke pelatihan model analitik pada aliran.  Yaitu  tidak seperti contoh sebelumnya, model tidak hanya akan mengeksekusi, tetapi juga melatih di dalam SAS ESP.  Ini akan membutuhkan aliran data tambahan untuk menjalankan operasi kereta dari algoritma yang dipilih oleh acara (misalnya, untuk pemula, pengelompokan k-means sederhana).  Kemudian mobil dengan ESP on board akan memiliki kesempatan untuk menganalisis situasi menggunakan sensor baru yang baru saja terhubung.  Ini akan memungkinkan untuk menyalakan dan mengotomatisasi perangkat baru dengan cepat dalam konsep Industry 4.0. <br><br>  Silakan tulis di komentar tugas apa yang dihadapi dalam analitik streaming, dan tentu saja, saya akan dengan senang hati menjawab pertanyaan tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SAS Stream Event Processing</a> . <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id429176/">https://habr.com/ru/post/id429176/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id429162/index.html">"Untuk Membuat Perubahan, Memahami Mengapa Orang Menentangnya": Jim Holmes tentang Budaya Pengujian</a></li>
<li><a href="../id429166/index.html">Multicrystal: dari sejarah hingga spekulasi tentang masa depan</a></li>
<li><a href="../id429168/index.html">Melalui api dan air: sejarah sastra sains populer Rusia</a></li>
<li><a href="../id429172/index.html">1C pada Proxmox. Catatan umum</a></li>
<li><a href="../id429174/index.html">BlueStacks 4: pengujian pada perangkat keras yang lemah + komentar pengembang</a></li>
<li><a href="../id429178/index.html">Microsoft memesan model kampus baru di Minecraft</a></li>
<li><a href="../id429180/index.html">Pergi ke goto</a></li>
<li><a href="../id429182/index.html">Kecerdasan buatan menemui hambatan pemahaman</a></li>
<li><a href="../id429184/index.html">Media online diduga memutus rantai atas ulama Oumuamua dan Harvard</a></li>
<li><a href="../id429186/index.html">@Pythonetc Oktober 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>