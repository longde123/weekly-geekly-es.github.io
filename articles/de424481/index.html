<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÄ üï¥Ô∏è ü§≥ Die ganze Wahrheit √ºber RTOS. Artikel 11. Aufgaben: Konfiguration und Einf√ºhrung in die API üßõüèø üï∫üèæ üî®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Konzept eines Problems wurde in fr√ºheren Artikeln vorgestellt. Tats√§chlich ist eine Aufgabe einfach eine Reihe von Werten, die in Prozessorregiste...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die ganze Wahrheit √ºber RTOS. Artikel 11. Aufgaben: Konfiguration und Einf√ºhrung in die API</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424481/"><img src="https://habrastorage.org/webt/0c/3i/wg/0c3iwgjkuq1yriusgd5f_doplxs.jpeg"><br><br>  Das Konzept eines Problems wurde in fr√ºheren Artikeln vorgestellt.  Tats√§chlich ist eine Aufgabe einfach eine Reihe von Werten, die in Prozessorregister geladen werden k√∂nnen (damit die Aufgabe ausgef√ºhrt werden kann) oder in einem Zustand gespeichert werden k√∂nnen, der f√ºr die zuk√ºnftige kontextbezogene Umschaltung auf die Aufgabe bereit ist.  Meistens hat eine Aufgabe einen eigenen Stapel. <br><a name="habracut"></a><br>  Bei Verwendung des RTC-Schedulers (Run to Completion) wird die Kontextumschaltung nat√ºrlich nicht verwendet, und die Aufgabe kann nur als Wert des Programmz√§hlers (Code-Einstiegspunkt) betrachtet werden. <br><br>  Die Definition der Aufgabe enth√§lt nicht den Code selbst.  Die Task sollte den Code ausf√ºhren, geh√∂rt aber nicht dazu.  Aufgaben k√∂nnen gemeinsame Funktionen haben.  Dar√ºber hinaus kann der gesamte Code f√ºr mehrere Aufgaben gemeinsam genutzt werden.  Allgemeiner Code sollte fast immer gem√§√ü den Wiedereintrittsanforderungen geschrieben werden.  Die meisten Compiler k√∂nnen mit diesem Code problemlos umgehen, m√ºssen jedoch bei Bibliotheksfunktionen vorsichtig sein, da sie m√∂glicherweise nicht f√ºr Multitasking-Anwendungen geeignet sind. <br><br>  Eine solche Definition schreibt bestimmte Regeln vor, die beim Entwickeln der in diesem Artikel beschriebenen Datenstrukturen von Aufgaben und API-Funktionen befolgt werden sollten.  Ich werde die Konfiguration von Aufgaben in Nucleus SE √ºberpr√ºfen und einen detaillierten √úberblick √ºber Serviceaufrufe (API-Aufrufe) erhalten, die f√ºr Aufgaben in Nucleus SE und Nucleus RTOS gelten. <br><br>  Fr√ºhere Artikel in der Reihe: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 10.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scheduler: Erweiterte Funktionen und Kontexterhaltung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 9.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scheduler: Implementierung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 8.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nucleus SE: Internes Design und Bereitstellung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 7.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nucleus SE: Einf√ºhrung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Andere RTOS-Dienste</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgabeninteraktion und Synchronisation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgaben, Kontextwechsel und Interrupts</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgaben und Planung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RTOS: Struktur und Echtzeitmodus</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RTOS: Einf√ºhrung.</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><br></a> <br><h2>  Aufgabenkonfiguration </h2><br><h3>  Anzahl der Aufgaben </h3><br>  In Nucleus SE wird die Aufgabenkonfiguration haupts√§chlich von den Direktiven <b>#define</b> in <b>nuse_config.h gesteuert</b> .  Der Schl√ºsselparameter <b>NUSE_TASK_NUMBER</b> bestimmt die Anzahl der Aufgaben, die in der Anwendung konfiguriert werden k√∂nnen.  Der Standardwert ist 1 (d. H. Eine Aufgabe w√§hrend der Ausf√ºhrung) und der Maximalwert des Parameters ist 16. Ein falscher Wert f√ºhrt zu einem Kompilierungsfehler, der durch Einchecken von <b>nuse_config_chech.h</b> generiert wird (dies ist in <b>nuse_config.c enthalten</b> , was bedeutet kompiliert mit diesem Modul), wird die <b># Fehler-</b> Direktive <b>ausgel√∂st</b> .  Dieser Parameter wird verwendet, um Datenstrukturen zu bestimmen, deren Gr√∂√üe von ihrem Wert abh√§ngt. <br><br>  In Nucleus SE ist es au√üer bei Verwendung des RTC-Schedulers wichtig, dass immer mindestens eine Aufgabe zur Ausf√ºhrung bereit ist.  Wenn Sie den Priorit√§tsplaner verwenden, m√ºssen Sie sicherstellen, dass die Aufgabe mit der niedrigsten Priorit√§t niemals angehalten wird. Eine solche Aufgabe sollte als "Hintergrundaufgabe" betrachtet werden. <br><br>  Im Gegensatz zu einigen anderen Echtzeitkernen verwendet Nucleus SE keine "Systemaufgaben". Dies bedeutet, dass alle 16 Aufgaben f√ºr den Benutzeranwendungscode oder die Middleware verf√ºgbar sind. <br><br><h3>  API-Parameter </h3><br>  Jede API-Funktion (Dienstprogrammaufruf) in Nucleus SE wird durch die Direktive <b>#define</b> in <b>nuse_config.h</b> aktiviert.  F√ºr Aufgaben sind diese Parameter: <br><br><ul><li>  <b>NUSE_TASK_SUSPEND</b> </li><li>  <b>NUSE_TASK_RESUME</b> </li><li>  <b>NUSE_TASK_SLEEP</b> </li><li>  <b>NUSE_TASK_RELINQUISH</b> </li><li>  <b>NUSE_TASK_CURRENT</b> </li><li>  <b>NUSE_TASK_CHECK_STACK</b> </li><li>  <b>NUSE_TASK_RESET</b> </li><li>  <b>NUSE_TASK_INFORMATION</b> </li><li>  <b>NUSE_TASK_COUNT</b> </li></ul><br>  Standardm√§√üig sind alle oben genannten Parameter auf <b>FALSE gesetzt</b> , wodurch jeder Serviceabruf deaktiviert und die Aufnahme von Code verhindert wird, der sie implementiert.  Um Aufgaben f√ºr die Anwendung zu konfigurieren, m√ºssen Sie die erforderlichen API-Aufrufe ausw√§hlen und die entsprechenden Zeichen auf <b>TRUE setzen</b> . <br><br>  Das Folgende ist ein <b>Ausschnitt</b> aus der Standarddatei <b>nuse_config.h</b> . <br><br><img src="https://habrastorage.org/webt/6d/oe/s_/6does_k3iu5pvaa2r49h9lxw1tq.png"><br><br>  Wenn Ihr Code einen API-Aufruf verwendet, der nicht aktiviert wurde, wird beim Verkn√ºpfen ein Fehler angezeigt, da der Implementierungscode nicht in der Anwendung enthalten war. <br><br><h3>  Funktionsparameter </h3><br>  Nucleus SE kann einige Aufgabenfunktionen hinzuf√ºgen.  Die erforderlichen Parameter befinden sich wiederum in der Datei <b>nuse_config.h</b> : <br><br>  <b>Mit NUSE_SUSPEND_ENABLE</b> k√∂nnen <b>Sie</b> Aufgaben <b>anhalten</b> .  Wenn diese Option nicht ausgew√§hlt ist, warten alle Aufgaben st√§ndig auf die Planung.  Die Aktivierung dieses Parameters ist erforderlich, wenn der Priorit√§tsplaner verwendet wird. <br><br>  <b>Mit NUSE_BLOCKING_ENABLE</b> k√∂nnen <b>Sie</b> Aufgaben f√ºr mehrere Funktions-API-Aufrufe <b>anhalten</b> .  Wenn diese Option aktiviert ist, muss auch <b>NUSE_SUSPEND_ENABLE</b> aktiviert sein. <br><br>  <b>Mit NUSE_INITIAL_TASK_STATE_SUPPORT</b> k√∂nnen <b>Sie</b> den Anfangszustand der Aufgabe festlegen.  Wenn diese Option nicht ausgew√§hlt ist, werden alle Aufgaben unmittelbar nach der Erstellung zum Scheduler hinzugef√ºgt. <br><br><h2>  Utility-Task-Aufrufe </h2><br>  Nucleus RTOS unterst√ºtzt 16 Service Calls (APIs) f√ºr die Arbeit mit Aufgaben, die die folgenden Funktionen bieten: <br><br><table><tbody><tr><th>  <b>Funktionsbeschreibung</b> </th><th>  <b>Nucleus RTOS</b> </th><th>  <b>Nucleus SE</b> </th></tr><tr><td>  Unterbrechen Sie eine Aufgabe </td><td>  <b>NU_Suspend_Task ()</b> </td><td>  <b>NUSE_Task_Suspend ()</b> </td></tr><tr><td>  Aufgabe fortsetzen </td><td>  <b>NU_Resume_Task ()</b> </td><td>  <b>NUSE_Task_Resume ()</b> </td></tr><tr><td>  Unterbrechen Sie eine Aufgabe f√ºr eine bestimmte <br>  die Periode </td><td>  <b>NU_Sleep ()</b> </td><td>  <b>NUSE_Task_Sleep ()</b> </td></tr><tr><td>  CPU-Steuerungsfreigabe </td><td>  <b>NU_Relinquish ()</b> </td><td>  <b>NUSE_Task_Relinquish ()</b> </td></tr><tr><td>  Abrufen der ID der aktuellen Aufgabe </td><td>  <b>NU_Current_Task_Pointer ()</b> </td><td>  <b>NUSE_Task_Current ()</b> </td></tr><tr><td>  √úberpr√ºfen der verf√ºgbaren Stapelgr√∂√üe </td><td>  <b>NU_Check_Stack ()</b> </td><td>  <b>NUSE_Task_Check_Stack ()</b> </td></tr><tr><td>  Aufgabe auf unbenutzt zur√ºcksetzen <br>  Zustand (zur√ºcksetzen) </td><td>  <b>NU_Reset_Task ()</b> </td><td>  <b>NUSE_Task_Reset ()</b> </td></tr><tr><td>  Bereitstellung von Informationen zu einer bestimmten Aufgabe </td><td>  <b>NU_Task_Information ()</b> </td><td>  <b>NUSE_Task_Information ()</b> </td></tr><tr><td>  Konfigurierter Z√§hler <br>  Aufgaben (im Moment) in der Anwendung </td><td>  <b>NU_Established_Tasks ()</b> </td><td>  <b>NUSE_Task_Count ()</b> </td></tr><tr><td>  Hinzuf√ºgen einer neuen Aufgabe zur Anwendung (Erstellung) </td><td>  <b>NU_Create_Task ()</b> </td><td>  Nicht implementiert. </td></tr><tr><td>  Entfernen einer Aufgabe aus der Anwendung </td><td>  <b>NU_Delete_Task ()</b> </td><td>  Nicht implementiert. </td></tr><tr><td>  Zeiger auf alle Aufgaben zur√ºckgeben <br>  im Anhang </td><td>  <b>NU_Task_Pointers ()</b> </td><td>  Nicht implementiert. </td></tr><tr><td>  Extrusionsalgorithmus √§ndern </td><td>  <b>NU_Change_Preemption ()</b> </td><td>  Nicht implementiert. </td></tr><tr><td>  √Ñndern Sie die Aufgabenpriorit√§t </td><td>  <b>NU_Change_Priority ()</b> </td><td>  Nicht implementiert. </td></tr><tr><td>  √Ñndern Sie das Zeitquantum einer Aufgabe </td><td>  <b>NU_Change_Time_Slice ()</b> </td><td>  Nicht implementiert. </td></tr><tr><td>  Aufgabenerf√ºllung </td><td>  <b>NU_Terminate_Task ()</b> </td><td>  Nicht implementiert. </td></tr></tbody></table><br>  Die Implementierung jedes der oben genannten Serviceaufrufe wird nachstehend sowie in den folgenden Artikeln zu RTOS ausf√ºhrlich erl√§utert. <br><br><h2>  Aufgabenverwaltungsdienste </h2><br>  Grundlegende Vorg√§nge mit Aufgaben: Halten Sie eine Aufgabe auf unbestimmte Zeit an, setzen Sie sie fort, halten Sie eine Aufgabe f√ºr eine bestimmte Zeit an, geben Sie den Prozessor frei.  Nucleus RTOS und Nucleus SE bieten vier grundlegende API-Aufrufe, um diese Operationen auszuf√ºhren, die ich unten beschreiben werde. <br><br><h3>  Unterbrechen Sie eine Aufgabe </h3><br>  Nucleus PLUS bietet einen einfachen API-Aufruf, mit dem Sie eine bestimmte Aufgabe auf unbestimmte Zeit anhalten k√∂nnen.  Nucleus SE hat einen B√ºroanruf mit √§hnlicher Funktionalit√§t. <br><br>  <i><b>Unterbrechen Sie eine Aufgabe in Nucleus RTOS</b></i> <br>  Prototyp eines Serviceabrufs: <br>  <b>STATUS NU_Suspend_Task (NU_TASK * -Aufgabe);</b> <br><br>  Parameter: <br>  <b>task</b> - Ein Zeiger auf die Steuereinheit der angehaltenen Task (die m√∂glicherweise aktuell ist und deren ID mit <b>NU_Current_Task_Pointer ()</b> abgerufen werden <b>kann</b> , mehr im n√§chsten Artikel). <br><br>  R√ºckgabewert: <br>  <b>NU_SUCCESS</b> - Der Anruf wurde erfolgreich abgeschlossen. <br>  <b>NU_INVALID_TASK</b> - ung√ºltiger Zeiger auf die Aufgabe; <br>  <b>NU_INVALID_SUSPEND</b> - Die angegebene Aufgabe hat den Status <b>NU_FINISHED</b> oder <b>NU_TERMINATED</b> . <br><br>  <i><b>Pause der Herausforderungsaufgabe in Nucleus SE</b></i> <br>  Dieser API-Aufruf unterst√ºtzt die Kernfunktionalit√§t der Nucleus PLUS-API. <br><br>  Prototyp eines Serviceabrufs: <br>  <b>STATUS NUSE_Task_Suspend (NUSE_TASK-Task);</b> <br><br>  Parameter: <br>  <b>task</b> - Der Index (ID) der angehaltenen Task (der aktuell sein kann und dessen ID mit <b>NUSE_Task_Current ()</b> abgerufen werden <b>kann</b> - mehr im n√§chsten Artikel). <br><br>  R√ºckgabewert: <br>  <b>NUSE_SUCCESS</b> - Der Anruf wurde erfolgreich abgeschlossen. <br>  <b>NUSE_INVALID_TASK</b> - ung√ºltiger Aufgabenindex. <br><br>  <i><b>Implementieren Sie die Unterbrechung einer Aufgabe in Nucleus SE</b></i> <br>  Die Hauptfunktionalit√§t der API-Funktion ist recht einfach: <br><br><img src="https://habrastorage.org/webt/4v/ju/z5/4vjuz5oyjviowrrgcd2gzok4ypg.png"><br><br>  Tats√§chlich wird in dieser Implementierung die Scheduler-Funktion <b>NUSE_Suspend_Task ()</b> mit dem Parameter "Unbedingter Stopp" ( <b>NUSE_PURE_SUSPEND</b> ) <b>aufgerufen</b> .  Diese Funktion ruft den Scheduler auf, wenn die angehaltene Aufgabe ausgef√ºhrt wird. <br><br><h3>  Aufgabe fortsetzen </h3><br>  Nucleus RTOS bietet einen einfachen API-Aufruf, mit dem Sie eine Aufgabe fortsetzen k√∂nnen, die zuvor auf unbestimmte Zeit angehalten wurde.  Nucleus SE hat einen B√ºroanruf mit √§hnlicher Funktionalit√§t. <br><br>  <i><b>Herausforderung Wiederaufnahme Aufgabe in Nucleus RTOS</b></i> <br>  Prototyp eines Serviceabrufs: <br>  <b>STATUS NU_Resume_Task (NU_TASK * Aufgabe);</b> <br><br>  Parameter: <br>  <b>task</b> - ein Zeiger auf die Steuereinheit der erneuerten Task. <br><br>  R√ºckgabewert: <br>  <b>NUSE_SUCCESS</b> - Der Anruf wurde erfolgreich abgeschlossen. <br>  <b>NUSE_INVALID_TASK</b> - ung√ºltiger Zeiger auf die Aufgabe; <br>  <b>NUSE_INVALID_RESUME</b> - Die Aufgabe wurde nicht unbedingt angehalten. <br><br>  <i><b>Fordern Sie die Aufgaben in Nucleus SE wieder auf</b></i> <br>  Dieser API-Aufruf unterst√ºtzt die Kernfunktionalit√§t der Nucleus RTOS-API. <br><br>  Prototyp eines Serviceabrufs: <br>  <b>STATUS NUSE_Task_Resume (NUSE_TASK-Task);</b> <br><br>  Parameter: <br>  <b>Task</b> - Index (ID) der erneuerten Task. <br><br>  R√ºckgabewert: <br>  <b>NUSE_SUCCESS</b> - Der Anruf wurde erfolgreich abgeschlossen. <br>  <b>NUSE_INVALID_TASK</b> - ung√ºltiger Aufgabenindex; <br>  <b>NUSE_INVALID_RESUME</b> - Die Aufgabe wurde nicht unbedingt angehalten. <br><br>  <i><b>Implementieren von Lebenslaufaufgaben in Nucleus SE</b></i> <br>  Die Hauptfunktionalit√§t der API-Funktion ist recht einfach: <br><br><img src="https://habrastorage.org/webt/8f/ih/al/8fihalzojhb_mn8d26pzyxcvfna.png"><br><br>  Tats√§chlich wird in dieser Implementierung die Scheduler-Funktion <b>NUSE_Wake_Task ()</b> aufgerufen.  Diese Funktion ruft den Scheduler auf, wenn der Priorit√§tsplaner verwendet wird und die erneuerte Aufgabe eine h√∂here Priorit√§t als die aktuelle Aufgabe hat. <br><br><h3>  Anhalten einer Aufgabe f√ºr einen bestimmten Zeitraum </h3><br>  Nucleus RTOS bietet einen einfachen API-Aufruf, um die aktuelle Aufgabe f√ºr einen bestimmten Zeitraum anzuhalten.  Nucleus SE hat einen B√ºroanruf mit √§hnlicher Funktionalit√§t. <br><br>  <i><b>Rufen Sie Suspend-Tasks f√ºr einen bestimmten Zeitraum auf. Nucleus RTOS</b></i> <br>  Prototyp eines Serviceabrufs: <br>  <b>VOID NU_Sleep (UNSIGNED Ticks);</b> <br><br>  Parameter: <br>  <b>Ticks</b> - Zeitraum, f√ºr den die Aufgabe angehalten werden soll (in Echtzeit- <b>Ticks</b> ). <br><br>  R√ºckgabewert: <br>  Nein. <br><br>  <i><b>Fordern Sie eine Aufgabenpause f√ºr einen bestimmten Zeitraum heraus. Nucleus SE</b></i> <br>  Dieser API-Aufruf unterst√ºtzt die Kernfunktionalit√§t der Nucleus RTOS-API. <br><br>  Prototyp eines Serviceabrufs: <br>  <b>void NUSE_Task_Sleep (U16-Ticks);</b> <br><br>  Parameter: <br>  <b>Ticks</b> - Zeitraum, f√ºr den die Aufgabe angehalten werden soll (in Echtzeit- <b>Ticks</b> ). <br><br>  R√ºckgabewert: <br>  Nein. <br><br>  <i><b>Implementieren einer Unterbrechung einer Aufgabe f√ºr einen bestimmten Zeitraum in Nucleus SE</b></i> <br>  Die Hauptfunktionalit√§t der API-Funktion ist recht einfach: <br><br><img src="https://habrastorage.org/webt/xz/_y/fe/xz_yfebb4wdhr7wzxhepfu6j1yy.png"><br><br>  Dieser Code l√§dt den Verz√∂gerungswert in den aktuellen <b>Taskparameter</b> in <b>NUSE_Task_Timeout_Counter []</b> .  Danach wird die Aufgabe mit <b>NUSE_Suspend_Task ()</b> mit dem Suspendierungszeitraum ( <b>NUSE_SLEEP_SUSPEND</b> ) <b>angehalten</b> . <br><br>  Der Timeout-Wert wird vom Echtzeit-Clock-Interrupt-Handler verwendet.  Der Code wird unten gezeigt und in einem zuk√ºnftigen Artikel ausf√ºhrlicher behandelt. <br><br><img src="https://habrastorage.org/webt/_r/cu/mw/_rcumw5d8xxuzvdti8qu4qamc-o.png"><br><br><h3>  CPU-Freigabe </h3><br>  Nucleus PLUS bietet einen einfachen API-Aufruf, mit dem die Prozessorsteuerung auf alle ausf√ºhrbaren Aufgaben mit derselben Priorit√§t basierend auf dem Round Robin-Algorithmus √ºbertragen werden kann.  Nucleus SE hat einen B√ºroanruf mit sehr √§hnlichen Funktionen.  Es kann jedoch nicht mit dem Priorit√§tsplaner verwendet werden, da mehrere Aufgaben mit derselben Priorit√§t nicht unterst√ºtzt werden.  Der Versuch, diesen API-Aufruf mit dem Priorit√§tsplaner zu verwenden, f√ºhrt zu einem Fehler.  Ein Dienstprogrammaufruf funktioniert mit den Schedulern Round Robin und Time Slice. Mit dem Scheduler Run To Completion ist dieser API-Aufruf ineffizient. <br><br>  <i><b>Aufruf zur Freigabe des Nucleus RTOS-Prozessors</b></i> <br>  Dieser API-Aufruf unterst√ºtzt die Kernfunktionalit√§t der Nucleus PLUS-API. <br><br>  Prototyp eines Serviceabrufs: <br>  <b>VOID NU_Relinquish (VOID);</b> <br><br>  Parameter: <br>  Sind abwesend. <br><br>  R√ºckgabewert: <br>  Nein. <br><br>  <i><b>Aufruf zur Freigabe des Nucleus SE-Prozessors</b></i> <br>  Dieser API-Aufruf unterst√ºtzt die Kernfunktionalit√§t der Nucleus PLUS-API. <br><br>  Prototyp eines Serviceabrufs: <br>  <b>void NUSE_Task_Relinquish (void);</b> <br><br>  Parameter: <br>  Sind abwesend. <br><br>  R√ºckgabewert: <br>  Nein. <br><br>  <i><b>Implementierung der Nucleus SE-Prozessorfreigabe</b></i> <br>  Die Hauptfunktionalit√§t der API-Funktion: <br><br><img src="https://habrastorage.org/webt/fd/a_/nk/fda_nkanqupe9wqqkdazlsauuoq.png"><br><br>  Im Wesentlichen ruft diese Implementierung die Scheduler-Funktion <b>NUSE_Reschedule () auf</b> .  Diese Funktion weist den Scheduler einfach an, die n√§chste Aufgabe abzuschlie√üen. <br><br>  In den n√§chsten beiden Artikeln werden weiterhin aufgabenbezogene RTOS-Dienstprogrammaufrufe anhand der Beispiele f√ºr Nucleus RTOS und Nucleus SE behandelt. <br><br>  <b>√úber den Autor:</b> Colin Walls ist seit √ºber drei√üig Jahren in der Elektronikindustrie t√§tig und widmet sich die meiste Zeit der Firmware.  Heute ist er Firmware-Ingenieur bei Mentor Embedded (einer Abteilung von Mentor Graphics).  Colin Walls spricht h√§ufig auf Konferenzen und Seminaren, Autor zahlreicher technischer Artikel und zweier B√ºcher √ºber Firmware.  Lebt in Gro√übritannien.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Colins</a> professioneller <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Blog</a> , E-Mail: colin_walls@mentor.com. <br><br>  <b>√úber die √úbersetzung:</b> Diese Artikelserie schien insofern interessant zu sein, als der Autor trotz der an einigen Stellen veralteten beschriebenen Ans√§tze den schlecht ausgebildeten Leser in die Funktionen des Echtzeit-Betriebssystems einf√ºhrt.  Ich selbst geh√∂re zu dem Team von Entwicklern des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">russischen RTOS</a> , das wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kostenlos machen wollen</a> , und ich hoffe, dass der Zyklus f√ºr unerfahrene Entwickler n√ºtzlich sein wird. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424481/">https://habr.com/ru/post/de424481/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424465/index.html">Pfannkuchen mit ICO auf Python oder wie man Menschen und ICO-Projekte misst</a></li>
<li><a href="../de424467/index.html">Spr√ºhantenne: Miniatur, flexibel und leistungsstark</a></li>
<li><a href="../de424471/index.html">Finanzielle Unabh√§ngigkeit auf meine Weise</a></li>
<li><a href="../de424475/index.html">Bericht des Informationssicherheits-√úberwachungszentrums f√ºr das erste Halbjahr 2018</a></li>
<li><a href="../de424477/index.html">Die Verf√ºgbarkeit von Spielen auf Pygame</a></li>
<li><a href="../de424483/index.html">38-Milliarden-Dollar-Deal und seine Auswirkungen: Wie Comcast und Disney Amazon und Netflix mit Investitionen bek√§mpfen</a></li>
<li><a href="../de424485/index.html">SSL-Pinning-Bypass in der iOS-App</a></li>
<li><a href="../de424491/index.html">Unity Hexagon Maps: Rauheiten, Fl√ºsse und Stra√üen</a></li>
<li><a href="../de424495/index.html">Google Chrome bietet die M√∂glichkeit, die automatische Profilsynchronisierung bei der Anmeldung bei den Diensten des Unternehmens abzulehnen. *</a></li>
<li><a href="../de424497/index.html">H√∂ren Sie auf, die Entwickler von Betrug zu verd√§chtigen. Lerne besser zu interviewen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>