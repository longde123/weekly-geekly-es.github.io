<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👍🏾 🚅 ☝️ Erstellen einer einfachen C # AI in Unity 🤚🏾 🎂 🏩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fast jedes Spiel erfordert künstliche Intelligenz (KI), die mit dem Benutzer interagiert, meist in Form einer dem Spieler feindlichen Kraft. In einige...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen einer einfachen C # AI in Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419641/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f53/d1b/432/f53d1b43283124f71239cc56289eabfb.jpg" alt="Bild"></div><br>  Fast jedes Spiel erfordert künstliche Intelligenz (KI), die mit dem Benutzer interagiert, meist in Form einer dem Spieler feindlichen Kraft.  In einigen Fällen sollte die KI dem Spieler helfen, in anderen sollte sie dagegen ankämpfen, aber alle vom Computer kontrollierten Charaktere haben einige Ähnlichkeiten.  Abhängig von den Anforderungen des Projekts kann die KI einfache oder komplexe Verhaltensweisen verwenden.  Solche Anforderungen können Diplomatie mit einem anderen Spieler oder ein einfaches Hin- und Herwandern auf der Plattform sein.  Wie dem auch sei, es muss sichergestellt werden, dass die KI ihre Arbeit effizient erledigt. <br><br>  In diesem Projekt werde ich eine sehr einfache künstliche Intelligenz demonstrieren.  Angenommen, wir erstellen ein Spiel, in dem sich ein Spieler in die Nähe des feindlichen Hauptquartiers schleichen muss.  Wenn ein Spieler von einer Überwachungskamera bemerkt wird, entstehen in der Nähe Feinde, die den Spieler für kurze Zeit verfolgen.  Das setzen wir auf einfachster Ebene im Projekt um.  Nach Abschluss des Projekts erhalten Sie ein Objekt eines kontrollierten Spielers, einen Kreis, der als Kamera eines Feindes verwendet wird, und ein Objekt eines Feindes, das den Spieler verfolgt, wenn das Objekt der Kamera über seine Anwesenheit informiert. <br><a name="habracut"></a><br><h2>  Vorbereitung </h2><br>  Zuerst müssen wir ein 3D-Projekt erstellen.  Klicken Sie nach dem Starten von Unity oben im Fenster oben auf die Schaltfläche <em>Neu</em> (siehe Abbildung 1). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c16/bbf/df1/c16bbfdf150bec53113bc7955f901e64.jpg"></div><br>  <i>Abbildung 1: Erstellen eines neuen Projekts</i> <br><br>  Nennen Sie Ihr <em>KI-</em> Projekt und stellen Sie sicher, dass es sich um ein 3D-Projekt handelt.  Nachdem Sie einen Ort auf dem Computer zum Speichern des Projekts ausgewählt haben, klicken <em>Sie</em> unten auf die Schaltfläche <em>Projekt erstellen</em> (siehe Abbildung 2). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3b/f46/c21/a3bf46c21915b44510b6052688e4f3c0.jpg"></div><br>  <i>Abbildung 2: Projekt-Setup-Bildschirm</i> <br><br>  Nach dem Erstellen des Projekts müssen wir zunächst die Ordner im Fenster " <em>Assets"</em> einrichten, um unsere Arbeit zu organisieren.  Klicken Sie mit der rechten Maustaste auf das Fenster <em>Assets</em> und wählen Sie <em>Erstellen → Ordner</em> , um einen neuen Ordner zu erstellen.  Nennen Sie diesen Ordner <em>Materialien</em> .  Erstellen Sie dann einen zweiten Ordner und nennen Sie ihn <em>Skripte</em> .  Abbildung 3 zeigt, wie es aussehen soll. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/db9/68a/709/db968a709778fc5f679ea8dcfd525222.jpg"></div><br>  <i>Abbildung 3: Erstellen eines neuen Ordners</i> <br><br>  Nach all dem sollte das <em>Assets-</em> Fenster wie in Abbildung 4 dargestellt aussehen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed8/a95/6f8/ed8a956f80044386ef356d0877931184.jpg"></div><br>  <i>Abbildung 4: Fenster " <em>Assets"</em> .</i> <br><br>  Erstellen Sie als Nächstes einen Boden, auf dem alle Objekte stehen.  Wählen <em>Sie</em> im <em>Hierarchiefenster</em> <em>Erstellen → 3D-Objekt → Ebene</em> , um ein <em>Ebenenobjekt</em> zu erstellen, das als Boden verwendet wird. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e95/770/adc/e95770adc4bcf7c49f6398634cfb7dcc.jpg"></div><br>  <i>Abbildung 5: Erstellen eines Ebenenobjekts</i> <br><br>  Benennen Sie dieses <em>Bodenobjekt</em> und ändern Sie seinen <em>X-Skalierungswert</em> auf 7 und den <em>Z-Skalierungswert</em> auf 3. Danach sollte das <em>Inspektorfenster</em> mit dem ausgewählten <em>Bodenobjekt</em> wie in Abbildung 6 dargestellt aussehen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/428/36f/88a/42836f88a4e028e07aa3d8d63e8c90c6.jpg"></div><br>  <i>Abbildung 6: Festlegen der Eigenschaften des <em>Floor-</em> Objekts</i> <br><br>  Jetzt müssen wir ein neues Material für <em>Floor</em> erstellen, um es von den übrigen Objekten zu unterscheiden, die in der Szene platziert werden.  Erstellen Sie im Ordner " <em>Materialien</em> " des Fensters " <em>Assets"</em> ein neues Material, indem Sie mit der rechten Maustaste auf das Fenster " <em>Assets"</em> klicken und " <em>Erstellen" → "Material"</em> wählen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/790/e22/47c/790e2247cd0c57040bc20f46d2df93d0.jpg"></div><br>  <i>Abbildung 7: Neues Material erstellen</i> <br><br>  Wenn Sie fertig sind, benennen Sie das Material <em>Boden</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb7/3fc/092/bb73fc09241585429e335997e0cc0ac4.jpg"></div><br>  <i>Abbildung 8: <em>Bodenmaterial</em> .</i> <br><br>  Wählen Sie oben im <em>Inspektorfenster</em> mit ausgewähltem <em>Boden</em> einen Farbwähler aus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a98/e7e/211/a98e7e21145de32f77d8ba0346f36587.jpg"></div><br>  Abbildung 9: Auswahl eines Farbwählers <br><br>  Natürlich können Sie eine beliebige Farbe für den Boden auswählen, aber in diesem Beispiel habe ich Rotbraun gewählt, wie in Abbildung 10 dargestellt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/bed/360/3ecbed3607552e16d2dc9973c35cdceb.jpg"></div><br>  Abbildung 10: Farbwähler. <br><br>  Wählen Sie das <em>Floor-</em> Objekt im <em>Hierarchiefenster</em> aus und wählen Sie in der <em>Mesh Renderer-</em> Komponente den kleinen Pfeil neben <em>Materialien aus</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/061/3f6/545/0613f6545880f95c917b481336c2589a.jpg"></div><br>  <i>Abbildung 11: Vorbereitung auf einen Materialwechsel</i> <br><br>  Ziehen Sie <em>Bodenmaterial</em> aus dem Fenster " <em>Assets"</em> in das Feld " <em>Element 0"</em> der <em>Mesh Renderer-</em> Komponente im <em>Inspektorfenster</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7d/3fe/247/e7d3fe24725c026b1d95f823ecd6832c.jpg"></div><br>  <i>Abbildung 12: Definieren des <em>Bodenmaterials</em> als Material des <em>Bodenobjekts</em> .</i> <br><br>  Nachdem wir mit dem <em>Bodenobjekt</em> fertig sind, müssen wir um den Wandbereich herum erstellen, damit der Spieler nicht von der Kante fallen kann.  Gehen Sie zurück zu <em>Erstellen → 3D-Objekt → Ebene</em> , um eine neue Ebene zu erstellen.  Wir nennen diese Wandebene und stellen sie auf die gleichen Abmessungen wie <em>Boden ein</em> , <em>dh</em> <em>X-Skalierung</em> mit einem Wert von 7 und <em>Z-Skalierung</em> mit einem Wert von 3. Erstellen Sie dann drei weitere Wände, wählen Sie ein Objekt aus und drücken Sie dreimal Strg + D. Danach platzieren Sie die Wände herum Geschlecht gemäß den Angaben in der Tabelle. <br><br><table><tbody><tr><td>  <strong>Titel</strong> <br></td><td>  <strong>Position X.</strong> <br></td><td>  <strong>Position Y.</strong> <br></td><td>  <strong>Position z</strong> <br></td><td>  <strong>Drehung x</strong> <br></td><td>  <strong>Drehung z</strong> <br></td></tr><tr><td>  Wand <br></td><td>  -35 <br></td><td>  21 <br></td><td>  0 <br></td><td>  0 <br></td><td>  -90 <br></td></tr><tr><td>  Wand (1) </td><td>  -1 <br></td><td>  11 <br></td><td>  -15 <br></td><td>  90 <br></td><td>  0 <br></td></tr><tr><td>  Wand (2) <br></td><td>  -1 <br></td><td>  11 <br></td><td>  13.5 <br></td><td>  -90 <br></td><td>  0 <br></td></tr><tr><td>  Wand (3) <br></td><td>  34 <br></td><td>  21 <br></td><td>  0 <br></td><td>  0 <br></td><td>  90 </td></tr></tbody></table><br>  Tabelle 1: Positionen und Rotationen aller Wandobjekte. <br><br>  Nachdem Sie dies alles abgeschlossen haben, müssen Sie die Position der Kamera so ändern, dass sie von oben auf den Boden schaut.  Wählen Sie das <em>Hauptkameraobjekt aus</em> und setzen Sie die <em>Y-Position</em> auf 30, die <em>Z-Position</em> auf 0 und die <em>X-Drehung</em> auf 80. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e3b/794/765/e3b794765d6fcb079014a487f435bf24.jpg"></div><br>  <i>Abbildung 13: Einrichten des Kameraobjekts</i> <br><br>  Die Szene ist vorbereitet, es ist also Zeit, den Charakter des Spielers zu erstellen.  Klicken <em>Sie</em> im <em>Hierarchiefenster</em> auf <em>Erstellen → 3D-Objekt → Kugel</em> , um ein <em>Kugelobjekt</em> zu erstellen.  Nennen Sie dieses Objekt <em>Player</em> und klicken Sie dann unten im <em>Inspektorfenster</em> auf die Schaltfläche <em>Komponente</em> hinzufügen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/247/713/079/24771307910b2c0aaf9f19d2c74b6d9a.jpg"></div><br>  <i>Abbildung 14: Hinzufügen einer neuen Komponente</i> <br><br>  Finde jetzt den <em>starren Körper</em> .  <em>Wählen</em> Sie anschließend die <em>Rigidbody-</em> Komponente aus der Liste aus und fügen Sie den <em>Rigidbody</em> zum <em>Player-</em> Objekt hinzu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f3f/01e/f41/f3f01ef412da352b4131c02be07535df.jpg"></div><br>  <i>Abbildung 15: Hinzufügen einer <em>Rigidbody-</em> Komponente</i> <br><br>  Als nächstes müssen Sie dem Player ein Tag zuweisen, das uns später im Code nützlich sein wird.  Klicken Sie auf das Dropdown-Menü <em>Tag</em> in der oberen linken Ecke des <em>Inspektorfensters</em> und wählen Sie das <em>Player-</em> Tag aus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c35/764/224/c35764224a4bb55b3e725c29aa597e19.jpg"></div><br>  <i>Abbildung 16: Definieren eines neuen Tags</i> <br><br>  Wir müssen die Position des Spielers so einstellen, dass er sich nicht unter dem <em>Bodenobjekt befindet</em> .  Im Beispiel habe ich den Spieler in der oberen linken Ecke mit einer <em>X-Position</em> von 26, einer <em>Y-Position</em> von 1 und einer <em>Z-Position</em> von -9 platziert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b0/a09/4bf/2b0a094bf170d2d2fb3bb11fd54a5ab1.jpg"></div><br>  <i>Abbildung 17: Spielerplatzierung</i> <br><br>  Damit unser zukünftiger Code ordnungsgemäß funktioniert, müssen wir ihn natürlich an das Objekt anhängen.  Gehen Sie zurück zum <em>Hierarchiefenster</em> und wählen <em>Sie</em> dieses Mal <em>Erstellen → 3D-Objekt → Würfel</em> .  Rufen Sie diesen <em>Guard-</em> Cube auf und fügen Sie die <em>Rigidbody-</em> Komponente und die <em>NavMesh Agent-</em> Komponente über die <em>Schaltfläche</em> Komponente hinzufügen im <em>Inspektorfenster hinzu</em> .  Als nächstes platzieren Sie es irgendwo in der oberen linken Ecke der Szene.  Danach sieht das <em>Inspektorfenster</em> des <em>Guard-</em> Objekts folgendermaßen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/698/d9e/79d/698d9e79d24de65f2586482ed3ffa03b.jpg"></div><br>  <i>Abbildung 18: Schutzobjekt im <em>Inspektorfenster</em></i> <br><br>  Und dieses Objekt sollte so lokalisiert sein: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/873/202/f6c/873202f6c470ad2b5b2233dd2fbe7a7f.jpg"></div><br>  <i>Abbildung 19: Platzierung des <em>Guard-</em> Objekts.</i> <br><br>  Schließlich benötigen wir ein Objekt, das als „Auge“ des <em>Guard-</em> Objekts verwendet wird und das den <em>Guard</em> benachrichtigt, dass der Spieler es berührt.  Gehen Sie zum letzten Mal zum <em>Hierarchiefenster</em> und wählen Sie <em>Erstellen → 3D-Objekt → Kugel</em> , um ein weiteres <em>Kugelobjekt</em> zu erstellen.  Nennen Sie dieses Objekt <em>Looker</em> .  Dieses Mal müssen wir keine weiteren Komponenten hinzufügen.  Wir werden jedoch die Größe des Objekts ändern.  Ändern Sie nach Auswahl von <em>Looker</em> die folgenden Variablen der <em>Transformationskomponente</em> im <em>Inspektorfenster</em> . <br><br><ul><li>  <em>Skaliere X</em> bei 9. </li><li>  <em>Skala Y</em> bei 0,5. </li><li>  <em>Skala Z</em> bei 9. </li></ul><br>  Positionieren Sie den <em>Looker danach</em> so, dass er sich im mittleren oberen Teil des Bodens befindet (siehe Abbildung 20). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/021/427/aea/021427aea8c433f0d4beb49dcacf75ac.jpg"></div><br>  <i>Abbildung 20: Position des Lookers.</i> <br><br>  Es ist der richtige Zeitpunkt, <em>Looker ein</em> einzigartiges Material zu geben, damit Sie sehen können, dass es sich lohnt, es zu vermeiden.  Klicken Sie im Ordner " <em>Materialien</em> " des Fensters " <em>Assets"</em> mit der rechten Maustaste und erstellen Sie ein neues Material.  Nennen Sie es <em>Looker</em> und geben Sie ihm eine leuchtend rote Farbe.  Legen Sie danach dieses Material als Material des <em>Looker-</em> Objekts fest, um seine Farbe zu ändern.  Danach sollte die Szene folgendermaßen aussehen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd4/252/185/fd42521851c8f10540156ddd8678ce21.jpg"></div><br>  <i>Abbildung 21: <em>Looker-</em> Objekt mit neuem Material.</i> <br><br>  Wir müssen nur noch ein Navigationsnetz für die <em>Wache</em> erstellen, auf dem sie sich bewegen kann.  Oben im Unity-Editor befindet sich ein <em>Fenstermenü</em> .  Wählen Sie <em>Fenster → Navigation</em> , um das in Abbildung 22 gezeigte <em>Navigationsfenster</em> zu öffnen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc8/f06/7b1/dc8f067b1f605af22531520c1de2f28f.jpg"></div><br>  <i>Abbildung 22: <em>Navigationsfenster</em></i> <br><br>  Wählen Sie das <em>Bodenobjekt</em> in der <em>Hierarchie aus</em> und <em>aktivieren Sie</em> dann im <em>Navigationsfenster</em> das Kontrollkästchen <em>Navigationsstatik</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f67/62e/b41/f6762eb4161c64a5388901e73909f1fc.jpg"></div><br>  <i>Abbildung 23: <em>Navigationsstatik</em></i> <br><br>  Wählen Sie als Nächstes oben im Fenster die Option Backen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/025/7d0/dce/0257d0dce38af90396512cb4bd205316.jpg"></div><br>  <i>Abbildung 24: Wechseln Sie zum Menü <em>Backen</em> .</i> <br><br>  Das Menü <em>Backen wird</em> geöffnet, in dem Sie die Eigenschaften des Navigationsnetzes ändern können, das wir erstellen möchten.  In unserem Beispiel muss nichts geändert werden.  Klicken Sie einfach unten rechts auf die Schaltfläche <em>Backen</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddd/ec7/6b8/dddec76b89364a5f66168b3cbd0c6fbb.jpg"></div><br>  <i>Abbildung 25: Erstellen eines neuen Navigationsnetzes</i> <br><br>  An dieser Stelle werden Sie von Unity aufgefordert, die Szene zu speichern.  Speichern Sie es, woraufhin ein Navigationsnetz erstellt wird.  Jetzt sieht die Szene folgendermaßen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f53/d1b/432/f53d1b43283124f71239cc56289eabfb.jpg"></div><br>  <i>Abbildung 26: Die aktuelle Szene mit dem hinzugefügten Navigationsnetz.</i> <br><br>  Jetzt ist alles in Unity konfiguriert, sodass es Zeit ist, die Skripte zu erstellen, die für das Funktionieren des Projekts erforderlich sind.  Klicken <em>Sie</em> im Fenster <em>Assets</em> mit der rechten Maustaste und wählen Sie <em>Erstellen → C # -Skript</em> .  Nennen Sie dieses Skript <em>Player</em> .  Wiederholen Sie diesen Vorgang noch zweimal und erstellen Sie Skripte mit den Namen <em>Guard</em> und <em>Looker</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/12e/fb2/26b/12efb226b1de229b7c9b13eb69f0f483.jpg"></div><br>  <i>Abbildung 27: Erstellen eines neuen Skripts</i> <br><br>  Danach sieht der Ordner " <em>Skripte</em> " im Fenster " <em>Assets</em> " folgendermaßen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7d/a2f/2a5/e7da2f2a5c94ee8683aed4179721e9bb.jpg"></div><br>  <i>Abbildung 28: <em>Skriptordner</em></i> <br><br>  Zuerst schreiben wir den <em>Player-</em> Skriptcode.  Doppelklicken Sie im Fenster " <em>Assets"</em> auf das <em>Player-</em> Skript, um Visual Studio zu öffnen und den Code zu erstellen. <br><br><h2>  Code </h2><br>  Das <em>Player-</em> Skript ist recht einfach. Der Benutzer kann lediglich das Ballobjekt bewegen.  Unter der Klassendeklaration benötigen wir einen Link zu der <em>Rigidbody-</em> Komponente, die wir zuvor im Projekt erstellt haben. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rigidbody rb;</code> </pre> <br>  Unmittelbar danach befehlen wir in der <strong>Startfunktion</strong> Unity, die aktuelle <em>Rigidbody-</em> Komponente des <em>Player-</em> Objekts auf <em>rb zu setzen</em> . <br><br><pre> <code class="cs hljs">rb = GetComponent&lt;Rigidbody&gt;();</code> </pre> <br>  Danach sieht das <em>Player-</em> Skript folgendermaßen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/017/686/297/017686297368cffbd3ea3980b6036181.jpg"></div><br>  <i>Abbildung 29: <em>Player-</em> Skript im Moment.</i> <br><br>  Nachdem der <em>rb-</em> Wert zugewiesen wurde, müssen wir das <em>Player-</em> Objekt bewegen lassen, wenn wir die Pfeiltasten drücken.  Um das Objekt zu bewegen, verwenden wir Physik und üben Kraft auf das Objekt aus, wenn der Benutzer die Pfeiltasten drückt.  Fügen Sie dazu einfach den folgenden Code zur <em>Update-</em> Funktion hinzu: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.UpArrow)) rb.AddForce(Vector3.forward * <span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.DownArrow)) rb.AddForce(Vector3.back * <span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.LeftArrow)) rb.AddForce(Vector3.left * <span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.RightArrow)) rb.AddForce(Vector3.right * <span class="hljs-number"><span class="hljs-number">20</span></span>);</code> </pre> <br>  Damit haben wir das <em>Player-</em> Skript fertiggestellt.  Das fertige Skript sieht folgendermaßen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3cf/82e/fc6/3cf82efc6aaef7dc0e7c8c6f21b503ff.jpg"></div><br>  <i>Abbildung 30: Das fertige <em>Player-</em> Skript.</i> <br><br>  Speichern Sie Ihre Arbeit und kehren Sie zu Unity zurück.  Wählen Sie dieses Mal das <em>Guard-</em> Skript im Fenster " <em>Assets"</em> aus.  Damit der <em>Guard-</em> Code funktioniert, müssen Sie das using-Konstrukt oben im Skript hinzufügen. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.AI;</code> </pre> <br>  Deklarieren Sie als Nächstes die folgenden Variablen unmittelbar nach der Klassendeklaration. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject player; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> NavMeshAgent navmesh;</code> </pre> <br>  Das <strong>Player-</strong> Objekt wird als Wert der <strong>Player-</strong> Variablen des <em>Guard-</em> Objekts verwendet.  Es wird später nützlich sein, wenn wir dem <em>Guard-</em> Objekt befehlen, den Spieler zu jagen.  Anschließend wird die Variable <strong>navmesh deklariert</strong> , um die <em>NavMeshAgent-</em> Komponente des Objekts zu empfangen.  Wir werden es später verwenden, wenn der <em>Wächter</em> beginnt, den Spieler zu jagen, nachdem er erfahren hat, dass der Spieler das <em>Looker-</em> Objekt berührt.  In der <strong>Startfunktion</strong> müssen wir den Wert der Variablen <em>navmesh auf die</em> Komponente <em>NavMesh Agent des</em> Objekts setzen: <br><br><pre> <code class="cs hljs">navmesh = GetComponent&lt;NavMeshAgent&gt;();</code> </pre> <br>  Dann fügen wir in der <em>Update-</em> Funktion eine einzelne Codezeile hinzu: <br><br><pre> <code class="cs hljs">navmesh.destination = player.transform.position;</code> </pre> <br>  Diese Zeile legt das Ziel für das <em>Guard-</em> Objekt fest.  In unserem Fall nimmt es die aktuelle Position des <em>Player-</em> Objekts ein und bewegt sich zu diesem Punkt.  Nach der Operation verfolgt das Objekt den Spieler ständig.  Die Frage ist, wie der Antwortprozess durchgeführt wird.  Es wird nicht im <em>Guard-</em> Skript, sondern im <em>Looker-</em> Skript codiert.  Bevor Sie mit dem Looker-Skript fortfahren, sehen Sie sich Abbildung 31 an, um Ihren <em>Guard-</em> Skriptcode zu überprüfen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfb/412/a11/dfb412a11448f070d31932d6c9e4c6c1.jpg"></div><br>  <i>Abbildung 31: Das fertige <em>Guard-</em> Skript.</i> <br><br>  In <em>Looker müssen</em> wir erneut die folgenden Variablen deklarieren: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject guard; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> reset = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> movingDown;</code> </pre> <br>  Danach kommentieren wir die <em>Startfunktion</em> , die wir in diesem Skript nicht benötigen.  Fahren wir mit der <em>Update-</em> Funktion fort und fügen den folgenden Code hinzu: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (movingDown == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) transform.position -= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.1f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> transform.position += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.1f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (transform.position.z &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>) movingDown = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (transform.position.z &lt; <span class="hljs-number"><span class="hljs-number">-10</span></span>) movingDown = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; reset -= Time.deltaTime; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reset &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { guard.GetComponent&lt;Guard&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; GetComponent&lt;SphereCollider&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  Hier finden die Hauptaktionen des Projekts statt. Analysieren wir also den Code.  Erstens wird das Objekt, an das dieses Skript angehängt ist, abhängig vom Wert der booleschen Variablen <strong>moveDown</strong> nach oben oder unten verschoben.  Sobald er einen bestimmten Punkt erreicht, ändert er die Richtung.  Als nächstes <em>senkt Looker</em> den Rücksetzwert basierend auf der Echtzeit.  Sobald der Timer kleiner als Null wird, nimmt er das <em>Guard-</em> Skript aus dem <em>Guard-</em> Objekt und deaktiviert es. Danach bewegt sich das <em>Guard-</em> Objekt bis zu diesem Moment an die letzte bekannte Position des Spielers und stoppt dann.  <em>Looker</em> schaltet auch seinen Collider wieder ein, damit der gesamte Prozess von vorne beginnen kann.  Jetzt sieht unser Skript so aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac9/dfc/7ec/ac9dfc7ec347c3422151e55b43682c3e.jpg"></div><br>  <i>Abbildung 32: <em>Looker-</em> Skript</i> <br><br>  Apropos Collider: Es ist Zeit, einen Konfliktcode zu erstellen, der den <em>Looker-</em> Timer zurücksetzt und das <em>Guard-</em> Skript enthält.  Erstellen Sie in der <em>Update-</em> Funktion den folgenden Code: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCollisionEnter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collision collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (collision.gameObject.tag == <span class="hljs-string"><span class="hljs-string">"Player"</span></span>) { guard.GetComponent&lt;Guard&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; reset = <span class="hljs-number"><span class="hljs-number">5</span></span>; GetComponent&lt;SphereCollider&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre> <br>  <em>OnCollisionEnter</em> Unity erkennt es automatisch als Kollisionscode und führt es daher aus, wenn eine Kollision mit einem anderen Objekt auftritt.  In unserem Fall wird zunächst geprüft, ob das kollidierende Objekt ein <em>Player-</em> Tag hat.  Wenn nicht, wird der Rest des Codes ignoriert.  Andernfalls wird das <em>Guard-</em> Skript aktiviert, der <em>Rücksetz-</em> Timer auf 5 (d. H. Fünf Sekunden) gesetzt und der Collider deaktiviert, sodass sich der Player weiterhin durch das Objekt bewegen kann und nicht versehentlich im <em>Looker-</em> Objekt stecken bleibt.  Die Funktion ist in Abbildung 33 dargestellt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ad/11c/5ce/5ad11c5cee401f612207f76322f6afc1.jpg"></div><br>  <i>Abbildung 33: Kollisionscode für</i> Looker <br><br>  Das ist alles, was der Projektcode fertig ist!  Sie können noch ein paar Dinge tun, bevor Sie das Projekt beenden.  Speichern Sie die gesamte Arbeit und kehren Sie zu Unity zurück. <br><br><h2>  Projektabschluss </h2><br>  Um das Projekt abzuschließen, müssen wir nur Skripte an die entsprechenden Objekte anhängen und mehrere Variablen festlegen.  Wechseln Sie zunächst vom <em>Navigationsfenster</em> zum <em>Inspektorfenster</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b1/4a4/a83/5b14a4a8305887f6ce685516c0490724.jpg"></div><br>  <i>Abbildung 34: Übergang zum</i> Inspektorfenster <br><br>  Beginnen wir danach mit dem <em>Player-</em> Objekt.  Wählen Sie es im <em>Hierarchiefenster</em> aus, klicken Sie unten im <em>Inspektorfenster</em> auf die Schaltfläche <em>Komponente</em> hinzufügen und fügen Sie das <em>Player-</em> Skript hinzu.  Damit ist das <em>Player-</em> Objekt abgeschlossen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d03/fb6/745/d03fb67452e138ccd4a2b3a838e53615.jpg"></div><br>  <i>Abbildung 35:</i> Player- <i>Skriptkomponente</i> <br><br>  Wählen Sie als Nächstes das <em>Guard-</em> Objekt aus.  Hängen Sie wie zuvor das <em>Guard-</em> Skript an das Objekt an.  Dieses Mal müssen wir der <em>Wache</em> sagen, wer der Spieler ist.  Ziehen Sie dazu das <em>Player-</em> Objekt aus der <em>Hierarchie</em> in das <em>Player-</em> Feld der <em>Guard-</em> Skriptkomponente (siehe Abbildung 36). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fae/14a/6f7/fae14a6f76221641adcdeca2d5993f84.jpg"></div><br>  <i>Abbildung 36: Das <em>Player-</em> Objekt zum Wert des <em>Player-</em> Felds machen.</i> <br><br>  Wir müssen auch das <em>Guard-</em> Skript deaktivieren.  In unserem Projekt wird <em>Guard</em> den Spieler verfolgen, nachdem er sein Skript eingeschaltet hat.  Dieses <em>Guard-</em> Skript sollte erst enthalten sein, nachdem der Player das <em>Looker-</em> Objekt berührt hat.  Alles, was Sie tun müssen, ist das Kontrollkästchen neben dem <em>Guard-</em> Text <em>(Skript)</em> in der Komponente zu deaktivieren: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed2/ee4/093/ed2ee40931919ee69fa013f005e4a8b5.jpg"></div><br>  <i>Abbildung 37: Deaktivieren des <em>Guard-</em> Skripts</i> <br><br>  Lassen Sie uns abschließend zum <em>Looker-</em> Objekt <em>übergehen</em> und das <em>Looker-</em> Skript daran anhängen.  Dieses Mal benötigt das <em>Looker-</em> Objekt ein <em>Guard-</em> Objekt als Wert seiner <em>Guard-</em> Variablen.  So wie wir das <em>Player-</em> Objekt der <em>Player-</em> Variablen des <em>Guard-</em> Skripts zugewiesen haben, werden wir dasselbe mit dem <em>Guard-</em> Objekt und dem <em>Looker-</em> Skript tun.  Ziehen Sie den <em>Guard</em> aus der <em>Hierarchie</em> in das <em>Guard-</em> Feld des <em>Looker-</em> Skripts.  Und das Projekt ist abgeschlossen!  Klicken Sie oben im Unity-Editor auf die Schaltfläche Wiedergabe, um Ihr Projekt zu testen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5b/272/4ed/d5b2724edf53e1bc2e2c06951ef38cdc.jpg"></div><br>  <i>Abbildung 38: Testen eines Projekts</i> <br><br>  Versuchen Sie, das <em>Player-</em> Objekt in das <em>Looker-</em> Objekt zu verschieben (denken Sie daran, dass das Verschieben mit Pfeilen erfolgt!).  Beachten Sie, dass das <em>Guard-</em> Objekt danach beginnt, den Spieler zu verfolgen.  Er wird die Verfolgung für ungefähr 5 Sekunden fortsetzen, danach wird er aufgeben. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf2/4ba/729/bf24ba729b9457d0c038c4c50c5464a1.jpg"></div><br>  <i>Abbildung 39: Ein vollständig abgeschlossenes Projekt in Aktion.</i> <br><br><h2>  Fazit </h2><br>  Diese KI ist sehr einfach, kann aber leicht erweitert werden.  Angenommen, wenn wir uns vorstellen, dass das <em>Looker-</em> Objekt eine Kamera ist und der Wächter durch sie schaut, um Sie zu finden, ist es logisch, dem <em>Guard-</em> Objekt ein eigenes Augenpaar zu geben.  Der Spieler kann sich den Kameras nähern, muss jedoch die Augen des Wächters berücksichtigen.  Sie können dieses Projekt auch mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Konzept</a> kombinieren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, den Pfad zu finden</a> : Geben Sie dem Wächter den Pfad, dem er folgen wird, und schaffen Sie so eine interessantere Umgebung für den Spieler. <br><br>  Eine solch einfache KI kann auf viele verschiedene Arten entwickelt werden.  Möglicherweise möchten Sie nichts von alledem tun und sich dazu entschließen, etwas Eigenes zu tun.  Ich rate Ihnen zu experimentieren, vielleicht haben Sie die Idee eines interessanten Projekts, das es wert ist, zum Ende gebracht zu werden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419641/">https://habr.com/ru/post/de419641/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419625/index.html">Übersicht meiner Lieblingsfunktionen von PHP7</a></li>
<li><a href="../de419627/index.html">Wir suchen Referenten bei Moscow Data Science Major</a></li>
<li><a href="../de419633/index.html">Jetzt werden alle wichtigen Stammzertifikatlisten von Let's Encrypt als vertrauenswürdig eingestuft</a></li>
<li><a href="../de419635/index.html">Veröffentlichung der stabilen Version von Dart 2.0 und Dart Web Platform</a></li>
<li><a href="../de419637/index.html">[Übersetzung] Funktionsweise von Graal - Java JVM JVM Compiler</a></li>
<li><a href="../de419643/index.html">Minsk EPAM Software Engineering Konferenz: Machen Sie es real</a></li>
<li><a href="../de419647/index.html">Seminar „Schwarzer Freitag im E-Commerce. Geheimnisse des Überlebens, 16. August, Moskau</a></li>
<li><a href="../de419649/index.html">Ein bisschen über Katzen oder welchen CAT wir für die Synchronisierung von Podcasts ausgewählt haben</a></li>
<li><a href="../de419651/index.html">Weder GA noch YM. Wie wir unseren eigenen Clickstream gemacht haben</a></li>
<li><a href="../de419653/index.html">So führen Sie Benutzersuchen auf GitHub ohne React + RxJS 6 + Recompose durch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>