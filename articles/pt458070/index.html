<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì¢ üíáüèø üìî PVS-Studio para Visual Studio üö± ‚Ü©Ô∏è üë©üèΩ‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Muitos de nossos artigos s√£o dedicados a qualquer coisa, mas n√£o √† pr√≥pria ferramenta PVS-Studio. Mas fazemos muito para tornar conveniente que os des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PVS-Studio para Visual Studio</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/458070/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b55/042/8ad/b550428adfba0288bfdfce8d5f15e6fa.png"></div><br>  Muitos de nossos artigos s√£o dedicados a qualquer coisa, mas n√£o √† pr√≥pria ferramenta PVS-Studio.  Mas fazemos muito para tornar conveniente que os desenvolvedores usem nossa ferramenta.  Mas √© exatamente isso que costuma acontecer nos bastidores.  Decidi corrigir essa situa√ß√£o e falar sobre o plug-in PVS-Studio para Visual Studio.  Se voc√™ estiver usando o Visual Studio, este artigo √© para voc√™. <br><a name="habracut"></a><br><h2>  O que √© an√°lise de c√≥digo est√°tico e por que √© necess√°rio </h2><br>  A an√°lise do c√≥digo est√°tico √© o processo de identifica√ß√£o de erros e defici√™ncias no c√≥digo fonte dos programas.  A an√°lise est√°tica pode ser considerada como um processo automatizado de revis√£o de c√≥digo.  Uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">revis√£o de c√≥digo</a> colaborativa √© uma √≥tima metodologia.  Mas tamb√©m tem uma desvantagem significativa - alto custo.  √â necess√°rio reunir regularmente v√°rios programadores para revisar o novo c√≥digo ou revis√°-lo novamente depois de fazer recomenda√ß√µes. <br><br>  Por um lado, quero revisar regularmente o c√≥digo.  Por outro lado, √© muito caro.  O tradeoff s√£o ferramentas de an√°lise de c√≥digo est√°tico.  Eles processam incansavelmente o c√≥digo fonte dos programas e d√£o recomenda√ß√µes ao programador para prestar maior aten√ß√£o a determinadas se√ß√µes do c√≥digo.  Obviamente, o programa n√£o substitui uma revis√£o completa do c√≥digo executado por uma equipe de programadores.  No entanto, a rela√ß√£o benef√≠cio / pre√ßo torna o uso da an√°lise est√°tica uma pr√°tica muito √∫til para muitas empresas.  Se o leitor estiver interessado em n√∫meros espec√≠ficos, proponho que me familiarize com o artigo " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PVS-Studio ROI</a> ". <br><br>  H√° um grande n√∫mero de analisadores de c√≥digo est√°tico comerciais e gratuitos.  Uma grande lista de analisadores est√°ticos est√° dispon√≠vel na Wikipedia: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lista de ferramentas para an√°lise de c√≥digo est√°tico</a> .  A lista de linguagens para as quais existem analisadores de c√≥digo est√°tico tamb√©m √© bastante grande (C, C ++, C #, Java, Ada, Fortran, Perl, Ruby, ...).  Naturalmente, falaremos sobre o analisador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PVS-Studio</a> . <br><br>  A principal vantagem da an√°lise est√°tica √© a possibilidade de uma redu√ß√£o significativa no custo de elimina√ß√£o de defeitos no programa.  Quanto mais cedo o erro for identificado, menor ser√° o custo de corrigi-lo.  Portanto, de acordo com os dados fornecidos no livro de McConnell "Perfect Code", corrigir um erro no est√°gio de teste custar√° dez vezes mais do que no est√°gio de constru√ß√£o (grava√ß√£o): <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/72f/052/97a/72f05297a5d450c312e31c5a2ee9fab3.png" alt="Figura 1. O custo m√©dio de corre√ß√£o de defeitos, dependendo do tempo de sua introdu√ß√£o e detec√ß√£o (os dados para a tabela s√£o retirados do livro por S. McConnell &quot;Perfect Code&quot;)."></div><br>  <font color="#999999"><i>Figura 1. O custo m√©dio da corre√ß√£o de defeitos, dependendo do tempo de sua introdu√ß√£o e detec√ß√£o (os dados para a tabela s√£o retirados do livro por S. McConnell "Perfect Code").</i></font> <br><br>  As ferramentas de an√°lise est√°tica permitem identificar um grande n√∫mero de erros na fase de design, o que reduz significativamente o custo de desenvolvimento de todo o projeto.  Por exemplo, o analisador de c√≥digo est√°tico do PVS-Studio pode iniciar em segundo plano imediatamente ap√≥s a compila√ß√£o e, se um erro em potencial for encontrado, ele notificar√° o programador.  Mais sobre este modo ser√° descrito abaixo. <br><br><h2>  Analisador de c√≥digo est√°tico PVS-Studio </h2><br>  O PVS-Studio √© um analisador est√°tico que detecta erros e poss√≠veis vulnerabilidades no c√≥digo fonte dos aplicativos em C, C ++ (extens√µes tamb√©m s√£o suportadas: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C ++ / CLI</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C ++ / CX</a> ), C # e Java nas plataformas Windows, Linux e macOS.  O analisador se integra perfeitamente ao Visual Studio 2010 - 2019 e ao IntelliJ IDEA.  Neste artigo, examinaremos mais de perto o trabalho do PVS-Studio para verificar o c√≥digo em C, C ++ e C #.  Voc√™ pode ler sobre como usar o PVS-Studio para testar o c√≥digo Java no IntelliJ IDEA <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Ap√≥s instalar o PVS-Studio e integrar-se ao Visual Studio, os usu√°rios recebem um item adicional ‚ÄúPVS-Studio‚Äù no menu principal e uma janela para trabalhar com mensagens de diagn√≥stico (consulte a Figura 2). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/943/589/d81/943589d818ec8e95fe078ed08585fe5c.png" alt="Figura 2. Os principais elementos adicionados pelo analisador PVS-Studio durante a integra√ß√£o no Visual Studio."></div><br>  <font color="#999999"><i>Figura 2. Os principais elementos adicionados pelo analisador PVS-Studio durante a integra√ß√£o no Visual Studio.</i></font> <br><br><h3>  Configura√ß√µes iniciais </h3><br>  O analisador est√° pronto para opera√ß√£o imediatamente ap√≥s a instala√ß√£o.  Na maioria dos casos, voc√™ n√£o precisa configurar nada para concluir a primeira execu√ß√£o.  A √∫nica configura√ß√£o que voc√™ pode precisar no in√≠cio √© a exclus√£o de bibliotecas de terceiros.  Afinal, voc√™ ainda n√£o editar√° nada nos arquivos de origem, por exemplo, na biblioteca jpeg, portanto, n√£o h√° necessidade de verificar isso.  Al√©m disso, a exclus√£o de pastas extras reduzir√° o tempo de an√°lise do projeto.  Os diret√≥rios exclu√≠dos da an√°lise s√£o definidos aqui: PVS-Studio&gt; Op√ß√µes ...&gt; N√£o verificar arquivos&gt; PathMasks (consulte a Figura 3). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/c57/d08/ee5c57d087ce5294b2de1cc455fbd662.png" alt="Figura 3. Editando uma lista de diret√≥rios que o analisador n√£o verificar√°."></div><br>  <font color="#999999"><i>Figura 3. Editando uma lista de diret√≥rios que o analisador n√£o verificar√°.</i></font> <br><br>  Se um dos nomes especificados estiver no caminho completo do arquivo, a an√°lise n√£o ser√° executada.  Por padr√£o, os nomes de alguns diret√≥rios j√° est√£o inclu√≠dos na lista.  No entanto, no seu projeto, a pasta com a biblioteca ZLib n√£o pode ser chamada de "zlib", mas, por exemplo, "zip_lib".  Portanto, voc√™ deve editar esta lista.  Para come√ßar a editar, clique no bot√£o com tr√™s pontos. <br><br>  Exemplos de m√°scaras v√°lidas para a lista PathMasks: <br><br><ul><li>  c: \ Libs \ - todos os arquivos de projeto localizados nesta pasta e suas subpastas ser√£o exclu√≠dos. </li><li>  \ Libs \ ou * \ Libs \ * - todos os arquivos localizados em diret√≥rios cujo caminho para o qual cont√©m uma subpasta "Libs" ser√° exclu√≠do.  Se os caracteres "*" n√£o forem especificados, eles ainda ser√£o adicionados automaticamente, portanto, as duas op√ß√µes de grava√ß√£o s√£o as mesmas. </li><li>  Libs ou * Libs * - todos os arquivos ser√£o exclu√≠dos, o caminho para o qual cont√©m uma subpasta que possui 'Libs' como um nome ou um fragmento de um nome.  Tamb√©m nesse caso, os arquivos que cont√™m Libs no nome ser√£o exclu√≠dos, por exemplo, c: \ project \ mylibs.cpp.  Para evitar confus√£o, recomendamos que voc√™ sempre use barras. </li></ul><br>  Al√©m de excluir pastas inteiras, voc√™ pode especificar m√°scaras para excluir arquivos individuais.  Para isso, h√° uma configura√ß√£o FileNameMasks.  Para obter mais detalhes sobre como trabalhar com listas de exclus√£o, consulte a documenta√ß√£o: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Configura√ß√µes: N√£o verifique arquivos</a> . <br><br><h3>  Verifica√ß√£o do Projeto </h3><br>  Ap√≥s a conclus√£o das configura√ß√µes iniciais, voc√™ pode come√ßar a verificar o projeto.  O PVS-Studio para Visual Studio oferece suporte √† verifica√ß√£o de projetos em C ++ (.vcxproj) e C # (.csproj).  Voc√™ tamb√©m pode tentar verificar imediatamente uma solu√ß√£o que cont√©m projetos desses tipos em sua totalidade.  Para fazer isso, selecione o item de menu Extens√µes&gt; PVS-Studio&gt; Verificar&gt; Solu√ß√£o (veja a Figura 4). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/ee3/2d8/716ee32d88dcc6bac832be8356dfaca6.png" alt="Figura 4. Verifica√ß√£o da solu√ß√£o usando o analisador PVS-Studio."></div><br>  <font color="#999999"><i>Figura 4. Verifica√ß√£o da solu√ß√£o usando o analisador PVS-Studio.</i></font> <br><br>  Se houver alguma dificuldade com a verifica√ß√£o, recomendamos que voc√™ consulte a se√ß√£o " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">N√£o √© poss√≠vel verificar?</a> " Em nosso site.  Estes n√£o s√£o tomadas ‚Äúsem no√ß√£o‚Äù, verifique se o plugue est√° conectado na tomada.  A se√ß√£o descreve situa√ß√µes t√≠picas com as quais os usu√°rios nos contataram e sugeriu op√ß√µes de a√ß√£o. <br><br><h3>  Trabalhando com uma lista de mensagens de diagn√≥stico </h3><br>  Ap√≥s a verifica√ß√£o, todas as mensagens de diagn√≥stico ser√£o exibidas em uma janela especial.  Uma janela tem muitos controles.  Todos eles servem para mostrar exatamente as mensagens de diagn√≥stico que s√£o do interesse do usu√°rio.  No entanto, a princ√≠pio, a janela pode parecer complicada.  Vamos dar uma olhada em todos os controles (veja a Figura 5). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b28/700/7c4/b287007c4520a416cd531e31962c01ca.png" alt="Figura 5. Uma janela com mensagens de diagn√≥stico."></div><br>  <font color="#999999"><i>Figura 5. Uma janela com mensagens de diagn√≥stico.</i></font> <br><br><ol><li>  Na verdade, a janela PVS-Studio. </li><li>  Menu adicional.  Permite acessar op√ß√µes como: marcar um aviso como falso, ocultar mensagens, adicionar arquivos a exce√ß√µes (mais sobre isso abaixo). </li><li>  O bot√£o inclui a mensagem "algo deu errado".  Por exemplo, voc√™ n√£o pode pr√©-processar um dos arquivos. </li><li>  V√° para a mensagem anterior / seguinte.  Isso abre o arquivo correspondente e o cursor √© colocado na linha com um erro em potencial.  Voc√™ tamb√©m pode sempre selecionar diagn√≥sticos da lista clicando duas vezes.  Voc√™ pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">atribuir teclas</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">atalho</a> para pular para a mensagem anterior / seguinte.  Por padr√£o, esses s√£o Alt + '[' e Alt + ']'. </li><li>  Bot√µes que incluem alertas em diferentes n√≠veis.  Agora, os dois primeiros n√≠veis de diagn√≥stico est√£o inclu√≠dos.  Ao mesmo tempo, 90 avisos do primeiro n√≠vel e 6700 avisos do segundo n√≠vel s√£o exibidos na janela.  O n√≠vel da mensagem √© mostrado no lado esquerdo da janela, na forma de uma barra correspondente √† cor da barra no bot√£o do n√≠vel correspondente.  Por que existem tantos pontos positivos?  De onde s√£o os 6700 avisos?  Para demonstrar os recursos da interface, est√° inclu√≠do um conjunto de regras <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MISRA</a> , que √© contra-indicado para aplicativos comuns :). </li><li>  Conjuntos ativos de regras de diagn√≥stico.  Geral - diagn√≥stico de uso geral, Otimiza√ß√£o - microoptimiza√ß√£o, diagn√≥stico de 64 bits - 64 bits, diagn√≥stico padr√£o MISRA - MISRA C e MISRA C ++.  Agora a janela exibe todos os tipos de alertas. </li><li>  Mostra o n√∫mero de mensagens marcadas como alarmes falsos.  Voc√™ pode ativar / desativar a exibi√ß√£o de mensagens marcadas nas configura√ß√µes, PVS-Studio&gt; Op√ß√µes ...&gt; Configura√ß√µes espec√≠ficas do analisador&gt; Exibir alarmes falsos. </li><li>  Filtros r√°pidos.  Por exemplo, voc√™ pode deixar na lista apenas mensagens com o c√≥digo V501 e que estejam no projeto XYZ. </li><li>  Alguns diagn√≥sticos sugerem prestar aten√ß√£o n√£o a uma, mas a v√°rias linhas.  Nesse caso, s√£o exibidas retic√™ncias pr√≥ximas ao n√∫mero da linha.  Ao clicar com o mouse, voc√™ pode ver uma lista de linhas e selecionar uma delas. </li></ol><br>  A tabela com mensagens de diagn√≥stico √© dividida nas seguintes colunas: <br><br><ul><li>  <b>N√≠vel.</b>  N√≠vel de confiabilidade em que o erro foi encontrado.  1¬∫ n√≠vel (vermelho) - os lugares mais suspeitos.  3¬∫ n√≠vel (amarelo) - provavelmente uma pequena imprecis√£o no c√≥digo. </li><li>  <b>Asterisk</b>  Ela n√£o tem um prop√≥sito espec√≠fico.  O usu√°rio pode interpret√°-lo a seu crit√©rio.  Por exemplo, ele pode apontar os avisos mais interessantes para uma an√°lise mais cuidadosa.  Uma analogia √© marcar letras com um asterisco em um programa de email como o Thunderbird ou o Outlook. </li><li>  <b>ID</b>  N√∫mero de mensagem exclusivo.  Pode ser √∫til ao trabalhar com uma lista grande.  Por exemplo, voc√™ pode acessar a mensagem com um n√∫mero espec√≠fico (consulte o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">item</a> "Navegar para ID ..." no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">menu de contexto</a> ). </li><li>  <b>C√≥digo</b>  C√≥digo da mensagem  Se voc√™ clicar com o mouse, uma p√°gina com uma descri√ß√£o do aviso ser√° aberta. </li><li>  <b>CWE.</b>  Identifica um aviso usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo CWE</a> (Common Weakness Enumeration).  Ao clicar no link, voc√™ pode ver uma descri√ß√£o desse CWE na rede. </li><li>  <b>Misra.</b>  O mesmo que acima, mas apenas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">para o padr√£o MISRA</a> . </li><li>  <b>Mensagem</b>  O texto da mensagem de diagn√≥stico. </li><li>  <b>Projeto</b>  Nome do projeto (voc√™ pode desativar esta coluna usando o menu de contexto). </li><li>  <b>Ficheiro</b>  Nome do arquivo </li><li>  <b>Linha</b>  N√∫mero da linha  <b>Importante!</b>  Observe que, depois de algumas linhas, h√° retic√™ncias.  Exemplo: "123 (...)".  Ao clicar neste n√∫mero, voc√™ obter√° uma lista de todas as linhas de c√≥digo relacionadas a esta mensagem.  Nesse caso, √© poss√≠vel ir para cada uma das linhas da lista. </li></ul><br>  Sim, ler tudo isso foi cansativo.  No entanto, garanto que, come√ßando a us√°-lo, voc√™ rapidamente se sente confort√°vel com a ferramenta.  E voc√™ raramente pressiona algo para configurar. <br><br><h3>  Menu de contexto </h3><br>  Portanto, clicando duas vezes na mensagem, voc√™ acessa o fragmento de c√≥digo desejado.  Pressionando o bot√£o direito do mouse, um menu de contexto √© aberto. <br><br>  O menu √© bastante simples e voc√™ n√£o deve sobrecarregar o artigo com uma descri√ß√£o de cada um dos itens.  Se algo n√£o estiver claro, voc√™ pode espiar na documenta√ß√£o. <br><br>  No entanto, quero me debru√ßar sobre um recurso muito √∫til.  Lembre-se de que nas configura√ß√µes voc√™ pode adicionar pastas / arquivos para exclus√£o (veja a Figura 2).  Ent√£o, adicionar algo √© muito mais f√°cil do que parece! <br><br>  Preste aten√ß√£o ao item "N√£o verifique arquivos e oculte todas as mensagens de ...".  Quando voc√™ clica nele, pode ser adicionada uma lista de caminhos que podem ser adicionados √† exce√ß√£o (consulte a Figura 6). <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ce3/581/300/ce35813002196bdbd53fcb666a33f58b.png" alt="Figura 6. Excluindo arquivos da verifica√ß√£o."></p><br>  <font color="#999999"><i>Figura 6. Excluindo arquivos da verifica√ß√£o.</i></font> <br><br>  Voc√™ pode selecionar um √∫nico arquivo ou um dos diret√≥rios.  A figura mostra que a pasta "SDL2-2.0.9 \ src \ haptic \ windows" est√° selecionada.  Isso significa que todos os arquivos nesta pasta e todas as subpastas ser√£o exclu√≠dos da an√°lise.  Al√©m disso, todas as mensagens relacionadas a esses arquivos desaparecer√£o imediatamente da lista.  Muito confort√°vel  Voc√™ n√£o precisa reiniciar a an√°lise para remover todas as mensagens relacionadas ao teste. <br><br><h2>  Modo de an√°lise incremental </h2><br>  A introdu√ß√£o ao PVS-Studio ficar√° incompleta se voc√™ n√£o falar sobre um dos recursos mais importantes - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a an√°lise incremental de</a> c√≥digo. <br><br>  Quanto mais cedo o erro for encontrado, mais barato ser√° corrigi-lo.  √â ideal enfatizar imediatamente os erros no texto editado do programa.  No entanto, √© tecnicamente dif√≠cil e consome muitos recursos.  Portanto, o PVS-Studio inicia em segundo plano no momento em que o c√≥digo corrigido foi compilado com √™xito.  Assim, os erros s√£o pesquisados ‚Äã‚Äãno c√≥digo rec√©m-modificado.  O fato de a an√°lise estar ocorrendo pode ser julgado pelo √≠cone na √°rea de notifica√ß√£o do sistema. <br><br>  Quando um erro √© encontrado, uma janela pop-up aparece avisando sobre o perigo (veja a Figura 7). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61b/394/8bd/61b3948bd26a9ed4c410446e46b5eb3b.png" alt="Figura 7. Uma mensagem pop-up de que locais suspeitos foram encontrados nos arquivos editados."></div><br>  <font color="#999999"><i>Figura 7. Uma mensagem pop-up de que locais suspeitos foram encontrados nos arquivos editados.</i></font> <br><br>  Se voc√™ clicar no √≠cone, o IDE ser√° aberto com o resultado da verifica√ß√£o do projeto (consulte a Figura 2) e ser√° poss√≠vel examinar os fragmentos de c√≥digo suspeitos. <br><br>  De fato, do que descrever esse modo, √© mais f√°cil tentar trabalhar com ele.  Voc√™ escreve o c√≥digo como antes.  E, se necess√°rio, o analisador ir√° incomod√°-lo.  Experimente! <br><br>  N√≥s mesmos constantemente usamos esse modo.  Sim, √†s vezes tamb√©m cometemos erros de codifica√ß√£o.  E a capacidade de corrigi-los imediatamente reduz significativamente o tempo para detectar um defeito e uma tentativa de entender por que o programa n√£o se comporta conforme o planejado.  √â uma pena gastar 15 a 20 minutos depurando e depois encontrar um erro de digita√ß√£o no √≠ndice.  Aqui est√° um dos casos em que o PVS-Studio encontrou um erro no PVS-Studio logo ap√≥s aparecer no c√≥digo: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (in[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">'\\'</span></span> &amp;&amp; in[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'.'</span></span> &amp;&amp; in[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'\\'</span></span>) { in += <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  Mas estas, √© claro, s√£o flores.  O analisador PVS-Studio √†s vezes pode ser muito mais √∫til.  Aqui est√° uma das opini√µes sobre o nosso analisador: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um exemplo de uso de um analisador est√°tico</a> ".  O texto faz voc√™ pensar. <br><br>  Eu resumo.  A an√°lise incremental √© algo que voc√™ definitivamente deveria tentar.  Voc√™ o amar√° assim que encontrar alguns erros no c√≥digo novo. <br><br><h2>  Recursos do PVS-Studio </h2><br>  Vamos ser breves.  √â imposs√≠vel descrever de forma concisa todos os diagn√≥sticos dispon√≠veis no PVS-Studio.  Uma lista completa de diagn√≥sticos e suas descri√ß√µes detalhadas podem ser encontradas na documenta√ß√£o: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Descri√ß√£o dos erros diagnosticados</a> .  N√≥s nos restringimos a uma tabela na qual os diagn√≥sticos s√£o agrupados por tipo.  Alguns diagn√≥sticos est√£o inclu√≠dos em mais de um grupo.  O fato √© que a divis√£o √© muito arbitr√°ria.  Por exemplo, um erro de digita√ß√£o pode levar ao uso de mem√≥ria n√£o inicializada.  Pelo contr√°rio, alguns erros n√£o encontraram um lugar na tabela, pois s√£o muito espec√≠ficos.  No entanto, a tabela como um todo d√° uma id√©ia da funcionalidade de um analisador de c√≥digo est√°tico (veja a Figura 8). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/a44/f24/ee5a44f24dff71c09d5491dc9294b4f2.png" alt="Figura 8. Recursos do PVS-Studio."></div><br>  <font color="#999999"><i>Figura 8. Recursos do PVS-Studio.</i></font> <br><br>  Como voc√™ pode ver, o analisador se manifesta o m√°ximo poss√≠vel em √°reas como a busca por erros que ocorreram devido a erros de digita√ß√£o, copiar e colar.  Ele diagnostica problemas relacionados √† seguran√ßa do c√≥digo. <br><br>  Voc√™ pode descobrir como tudo isso funciona na pr√°tica, observando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o banco de dados de erros</a> .  Coletamos nesse banco de dados todos os erros que encontramos ao verificar v√°rios projetos de c√≥digo aberto. <br><br><h2>  SAST </h2><br>  O PVS-Studio √© uma ferramenta para testes de seguran√ßa de aplicativos est√°ticos (Static Application Security Testing, SAST) - o analisador pode identificar poss√≠veis vulnerabilidades no c√≥digo do projeto e mostrar o identificador de erro correspondente em uma determinada classifica√ß√£o. <br><br>  O PVS-Studio suporta as seguintes classifica√ß√µes de erro: <br><br><ol><li>  CWE </li><li>  SEI CERT </li><li>  Misra </li></ol><br>  Voc√™ pode ativar a exibi√ß√£o de c√≥digos CWE usando o menu de contexto na janela do analisador em Mostrar colunas&gt; CWE <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/919/85b/e34/91985be349bf7385fa7f3878ef57dcde.png" alt="Figura 9. Menu de contexto e um exemplo da sa√≠da dos c√≥digos CWE."></div><br>  <font color="#999999"><i>Figura 9. Menu de contexto e um exemplo da sa√≠da dos c√≥digos CWE.</i></font> <br><br>  Ou no menu acima (Extens√µes&gt; PVS-Studio&gt; Exibir c√≥digos CWE na janela Sa√≠da) <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b6/582/d8c/0b6582d8c2626066567dfd111439cbc6.png" alt="Figura 10. O menu de extens√£o."></div><br>  <font color="#999999"><i>Figura 10. O menu de extens√£o.</i></font> <br><br>  Os diagn√≥sticos MISRA est√£o inclu√≠dos separadamente nas configura√ß√µes: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b89/898/709/b89898709db7045f949fb564c6c80059.png" alt="Figura 11. Lista de erros detectados."></div><br>  <font color="#999999"><i>Figura 11. Lista de erros detectados.</i></font> <br><br>  Leia mais sobre essas classifica√ß√µes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h2>  Verificando Projetos na Linha de Comandos </h2><br>  PVS-Studio_Cmd.exe √© um utilit√°rio para verificar projetos C ++ / C # Visual Studio (.vcxproj / .csproj) e .sln na linha de comando.  Pode ser √∫til para automatizar a an√°lise.  O programa est√° localizado no diret√≥rio em que a instala√ß√£o foi feita - por padr√£o, √© 'C: \ Arquivos de Programas (x86) \ PVS-Studio'. <br><br>  O programa tem muitos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">par√¢metros</a> , mas primeiro precisamos de apenas tr√™s deles: <br><br><ul><li>  --target: o arquivo do projeto ou solu√ß√£o a ser verificado. </li><li>  --output: o arquivo de plug-in em que voc√™ deseja escrever o relat√≥rio. </li><li>  --progress: mostra o progresso da verifica√ß√£o. </li></ul><br>  √â assim que o lan√ßamento ser√°: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ce/ee2/aa1/3ceee2aa11c0bf9f887ad8959d7cdd65.png" alt="Figura 12. A sa√≠da do programa PVS-Studio_Cmd.exe"></div><br>  <font color="#999999"><i>Figura 12. A sa√≠da do programa PVS-Studio_Cmd.exe</i></font> <br><br>  Ap√≥s a execu√ß√£o, obteremos um arquivo plog com o relat√≥rio, o caminho especificado nas op√ß√µes de inicializa√ß√£o.  Este relat√≥rio pode ser convertido para outros formatos usando o utilit√°rio PlogConverter.exe e, para visualizar o relat√≥rio no IDE, clique duas vezes no arquivo plog no Explorer. <br><br>  Voc√™ tamb√©m pode abrir o arquivo de relat√≥rio no menu de extens√£o em Extens√µes&gt; PVS-Studio&gt; Abrir / Salvar&gt; Abrir relat√≥rio de an√°lise ... <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/490/7ac/cc5/4907accc516b05ccfedf52acc9c85d9f.png" alt="Quadro 4"></div><br><br>  Informa√ß√µes detalhadas sobre o utilit√°rio e seus par√¢metros podem ser encontradas na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . <br><br><h2>  Supress√£o de falsos avisos </h2><br>  Algumas mensagens emitidas pelo analisador ser√£o inevitavelmente falsas.  Nada pode ser feito sobre isso.  Um analisador est√°tico √© apenas um programa que n√£o possui intelig√™ncia artificial e n√£o pode determinar exatamente se encontrou um erro real ou n√£o. <br><br>  Para combater os falsos positivos, o analisador fornece um conjunto de mecanismos diferentes.  Eles s√£o descritos em detalhes nas seguintes se√ß√µes da documenta√ß√£o: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ajuste fino</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um m√©todo aproximado</a> que permite trabalhar apenas com avisos relacionados a c√≥digo novo ou alterado. </li></ul><br><h2>  Conclus√£o </h2><br>  Obviamente, aqui n√£o falamos tudo sobre o instrumento.  Se voc√™ contar tudo, o artigo se transformar√° em documenta√ß√£o.  O objetivo era mostrar como √© f√°cil trabalhar com a ferramenta no ambiente do Visual Studio.  Voc√™ pode ler sobre outros ambientes e modos de opera√ß√£o na documenta√ß√£o e outros artigos localizados em nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site</a> .  A prop√≥sito, existem muitas coisas interessantes para programadores.  Venha passear. <br><br>  Note-se que o PVS-Studio n√£o funciona apenas no ambiente da Microsoft.  Tamb√©m suportamos a linguagem Java, podemos trabalhar no Linux e macOS, integrar no CMake e muito mais.  Para mais informa√ß√µes, consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . <br><br>  Desejo-lhe um c√≥digo sem c√≥digo e espero que voc√™ goste do PVS-Studio.  Se voc√™ tiver alguma d√∫vida, sempre ajudaremos e informaremos.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Escreva para n√≥s</a> . <br><br><h2>  Recursos adicionais: </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Revis√£o de c√≥digo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">An√°lise de c√≥digo est√°tico</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ferramentas de an√°lise de c√≥digo est√°tico</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SAST</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tecnologias usadas no analisador PVS-Studio</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Baixe o PVS-Studio</a> e experimente. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Suporte para o Visual Studio 2019</a> . </li><li>  Discuta o pre√ßo do analisador PVS-Studio para sua equipe e como compr√°-lo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">compre o PVS-Studio</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um exemplo de uso de um analisador est√°tico</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Respostas</a> a perguntas freq√ºentes em confer√™ncias. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como iniciar o PVS-Studio Java</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como executar o PVS-Studio no Linux e macOS</a> </li></ol><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br>  Se voc√™ deseja compartilhar este artigo com um p√∫blico que fala ingl√™s, use o link para a tradu√ß√£o: Sergey Larin.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PVS-Studio para Visual Studio</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt458070/">https://habr.com/ru/post/pt458070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt458056/index.html">A grande entrevista com Martin Kleppmann: ‚ÄúDescobrindo o futuro dos sistemas de dados distribu√≠dos‚Äù</a></li>
<li><a href="../pt458060/index.html">Criando um shader de grama no mecanismo Unity</a></li>
<li><a href="../pt458062/index.html">Vis√£o geral da plataforma UserGate</a></li>
<li><a href="../pt458064/index.html">PVS-Studio nas nuvens - Executando a an√°lise no Travis CI</a></li>
<li><a href="../pt458068/index.html">PVS-Studio para Visual Studio</a></li>
<li><a href="../pt458072/index.html">PVS-Studio vai para as nuvens - an√°lise de lan√ßamento no Travis CI</a></li>
<li><a href="../pt458074/index.html">Ir idioma: sele√ß√£o ORM</a></li>
<li><a href="../pt458076/index.html">Marketing com tomada de decis√£o de ML</a></li>
<li><a href="../pt458080/index.html">25 de julho de Moscou - QIWI iOS Meetup</a></li>
<li><a href="../pt458084/index.html">50 materiais selecionados sobre os ganhos de m√∫sicos, som em jogos e filmes, instrumentos incomuns e os velhos esquecidos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>