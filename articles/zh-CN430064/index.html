<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ŒğŸ¿ ğŸ‘¨ğŸ½â€ğŸŒ¾ ğŸ‘¨â€â¤ï¸â€ğŸ‘¨ C ++ï¼šè‡ªå‘æ€§è€ƒå¤ï¼Œä¸ºä»€ä¹ˆä¸åº”è¯¥ä½¿ç”¨Cé£æ ¼çš„å˜é‡å‡½æ•° ğŸ“ ğŸ”… ğŸ·ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä¸å¾€å¸¸ä¸€æ ·ï¼Œè¿™ä¸€åˆ‡éƒ½å§‹äºé”™è¯¯ã€‚ è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨Java Native Interfaceï¼Œå¹¶ä¸”åœ¨C ++éƒ¨åˆ†ä¸­ï¼Œæˆ‘åŒ…è£…äº†ä¸€ä¸ªåˆ›å»ºJavaå¯¹è±¡çš„å‡½æ•°ã€‚ è¯¥å‡½æ•°CallVoidMethodæ˜¯å¯å˜çš„ï¼Œå³ é™¤äº†æŒ‡å‘JNIç¯å¢ƒçš„æŒ‡é’ˆï¼ŒæŒ‡å‘è¦åˆ›å»ºçš„å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆä»¥åŠè¢«è°ƒç”¨æ–¹æ³•çš„æ ‡è¯†ç¬¦ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºæ„é€ å‡½æ•°ï¼‰ä¹‹å¤–...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C ++ï¼šè‡ªå‘æ€§è€ƒå¤ï¼Œä¸ºä»€ä¹ˆä¸åº”è¯¥ä½¿ç”¨Cé£æ ¼çš„å˜é‡å‡½æ•°</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430064/">ä¸å¾€å¸¸ä¸€æ ·ï¼Œè¿™ä¸€åˆ‡éƒ½å§‹äºé”™è¯¯ã€‚ è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Java Native Interfaceï¼Œ</a>å¹¶ä¸”åœ¨C ++éƒ¨åˆ†ä¸­ï¼Œæˆ‘åŒ…è£…äº†ä¸€ä¸ªåˆ›å»ºJavaå¯¹è±¡çš„å‡½æ•°ã€‚ è¯¥å‡½æ•°<code>CallVoidMethod</code>æ˜¯å¯å˜çš„ï¼Œå³ é™¤äº†æŒ‡å‘<abbr title="Javaæœ¬æœºæ¥å£">JNI</abbr>ç¯å¢ƒçš„æŒ‡é’ˆï¼ŒæŒ‡å‘è¦åˆ›å»ºçš„å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆä»¥åŠè¢«è°ƒç”¨æ–¹æ³•çš„æ ‡è¯†ç¬¦ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºæ„é€ å‡½æ•°ï¼‰ä¹‹å¤–ï¼Œå®ƒè¿˜æ¥å—ä»»æ„æ•°é‡çš„å…¶ä»–å‚æ•°ã€‚ è¿™æ˜¯åˆä¹é€»è¾‘çš„ï¼Œå› ä¸º è¿™äº›å…¶ä»–å‚æ•°ä¼ é€’ç»™Javaç«¯çš„è¢«è°ƒç”¨æ–¹æ³•ï¼Œå¹¶ä¸”è¿™äº›æ–¹æ³•å¯ä»¥ä¸åŒï¼Œå…·æœ‰ä»»ä½•ç±»å‹çš„ä¸åŒæ•°é‡çš„å‚æ•°ã€‚ <br><br> å› æ­¤ï¼Œæˆ‘è¿˜ä½¿åŒ…è£…å™¨å˜é‡ã€‚ ä¸ºäº†å°†ä»»æ„æ•°é‡çš„å‚æ•°ä¼ é€’ç»™<code>CallVoidMethod</code>ä½¿ç”¨äº†<code>va_list</code> ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹å®ƒæ˜¯ä¸åŒçš„ã€‚ æ˜¯çš„ï¼Œè¿™å°±æ˜¯<code>va_list</code>å‘é€åˆ°<code>CallVoidMethod</code> ã€‚ å¹¶ä¸¢å¼ƒäº†JVMå¸¸è§„åˆ†æ®µé”™è¯¯ã€‚ <br><br> åœ¨ä¸¤ä¸ªå°æ—¶å†…ï¼Œæˆ‘è®¾æ³•å°è¯•äº†ä»ç¬¬å…«ç‰ˆåˆ°ç¬¬åä¸€ç‰ˆçš„JVMçš„å¤šä¸ªç‰ˆæœ¬ï¼Œå› ä¸ºï¼šé¦–å…ˆï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="Javaè™šæ‹Ÿæœº">JVM</a> ï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸Šï¼Œæˆ‘å¯¹StackOverflowçš„ä¿¡ä»»ç¨‹åº¦è¶…è¿‡äº†æˆ‘ï¼Œå…¶æ¬¡ï¼Œæœ‰äººç„¶ååœ¨StackOverflowä¸Šï¼Œæˆ‘å»ºè®®åœ¨è¿™ç§æƒ…å†µä¸‹ä¸è¦ä½¿ç”¨OpenJDKï¼Œè€Œæ˜¯ä½¿ç”¨OracleJDKï¼Œè€Œä¸æ˜¯8ï¼Œè€Œæ˜¯10ã€‚åªæœ‰åˆ°é‚£æ—¶ï¼Œæˆ‘æ‰æœ€ç»ˆæ³¨æ„åˆ°ï¼Œé™¤äº†å˜é‡<code>CallVoidMethod</code>ä¹‹å¤–ï¼Œè¿˜æœ‰<code>CallVoidMethodV</code> ï¼Œå®ƒé€šè¿‡<code>va_list</code>æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ã€‚ <br><br> æˆ‘æœ€ä¸å–œæ¬¢è¿™ä¸ªæ•…äº‹çš„åœ°æ–¹æ˜¯ï¼Œæˆ‘æ²¡æœ‰ç«‹å³æ³¨æ„åˆ°çœç•¥å·ï¼ˆçœç•¥å·ï¼‰å’Œ<code>va_list</code>ä¹‹é—´çš„åŒºåˆ«ã€‚ åœ¨æ³¨æ„åˆ°ä¹‹åï¼Œæˆ‘æ— æ³•å‘è‡ªå·±è§£é‡Šæ ¹æœ¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆã€‚ å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†çœç•¥å·ï¼Œ <code>va_list</code>ä»¥åŠå˜é‡æ¨¡æ¿ï¼ˆå› ä¸ºæˆ‘ä»¬ä»åœ¨è®¨è®ºC ++ï¼‰ã€‚ <br><a name="habracut"></a><br><h3> æ ‡å‡†ä¸­è¯´äº†çœç•¥å·å’Œva_listå‘¢ï¼Ÿ </h3><br>  C ++æ ‡å‡†ä»…æè¿°äº†å…¶è¦æ±‚ä¸æ ‡å‡†Cçš„è¦æ±‚ä¹‹é—´çš„å·®å¼‚ã€‚ç¨åå°†è®¨è®ºè¿™äº›å·®å¼‚æœ¬èº«ï¼Œä½†æ˜¯ç°åœ¨ï¼Œæˆ‘å°†ç®€è¦è§£é‡Šä¸€ä¸‹æ ‡å‡†Cæ‰€è¯´çš„å†…å®¹ï¼ˆä»C89å¼€å§‹ï¼‰ã€‚ <br><br><ul><li> æ‚¨å¯ä»¥å£°æ˜ä¸€ä¸ªå¸¦æœ‰ä»»æ„æ•°é‡å‚æ•°çš„å‡½æ•°ã€‚ å³ ä¸€ä¸ªå‡½æ•°å¯ä»¥æœ‰æ¯”å‚æ•°æ›´å¤šçš„å‚æ•°ã€‚ ä¸ºæ­¤ï¼Œå…¶å‚æ•°åˆ—è¡¨å¿…é¡»ä»¥çœç•¥å·ç»“å°¾ï¼Œä½†æ˜¯è¿˜å¿…é¡»è‡³å°‘å­˜åœ¨ä¸€ä¸ªå›ºå®šå‚æ•°<i>[C11 6.9.1 / 8]</i> ï¼š <br><br><pre> <code class="plaintext hljs">void foo(int parm1, int parm2, ...);</code> </pre> </li><li> æœ‰å…³ä¸çœç•¥å·ç›¸å¯¹åº”çš„å‚æ•°çš„æ•°é‡å’Œç±»å‹çš„ä¿¡æ¯ä¸ä¼šä¼ é€’ç»™å‡½æ•°æœ¬èº«ã€‚ å³ åœ¨æœ€åä¸€ä¸ªå‘½åå‚æ•°ï¼ˆåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ä¸º<code>parm2</code> ï¼‰ä¹‹å<i>[C11 6.7.6.3/9]</i> ã€‚ <br></li><li> è¦è®¿é—®è¿™äº›å‚æ•°ï¼Œå¿…é¡»ä½¿ç”¨åœ¨<code>&lt;stdarg.h&gt;</code>æ ‡å¤´ä¸­å£°æ˜çš„<code>va_list</code>ç±»å‹å’Œ4ä¸ªï¼ˆåœ¨C11æ ‡å‡†ä¹‹å‰ä¸º3ï¼‰å®ï¼š <code>va_start</code> ï¼Œ <code>va_arg</code> ï¼Œ <code>va_end</code>å’Œ<code>va_copy</code> ï¼ˆä»C11å¼€å§‹ï¼‰ <i>[C11 7.16]</i> ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä¸¾ä¸ªä¾‹å­</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">int add(int count, ...) { int result = 0; va_list args; va_start(args, count); for (int i = 0; i &lt; count; ++i) { result += va_arg(args, int); } va_end(args); return result; }</code> </pre> <br> æ˜¯çš„ï¼Œè¯¥å‡½æ•°ä¸çŸ¥é“å®ƒæœ‰å¤šå°‘ä¸ªå‚æ•°ã€‚ å¥¹éœ€è¦ä»¥æŸç§æ–¹å¼ä¼ é€’è¿™ä¸ªæ•°å­—ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šè¿‡å•ä¸ªå‘½åå‚æ•°ï¼ˆå¦ä¸€ä¸ªå¸¸è§çš„é€‰æ‹©æ˜¯å°†<code>NULL</code>ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ä¼ é€’ï¼Œå¦‚<code>execl</code>æˆ–0ï¼‰ã€‚ </div></div></li><li> æœ€åä¸€ä¸ªå‘½åå‚æ•°ä¸èƒ½å…·æœ‰<code>register</code>å­˜å‚¨ç±»ï¼›å®ƒä¸èƒ½æ˜¯å‡½æ•°æˆ–æ•°ç»„ã€‚ å¦åˆ™ï¼Œæœªå®šä¹‰çš„è¡Œä¸º<i>[C11 7.16.1.4/4]</i> ã€‚ </li><li> è€Œä¸”ï¼Œå¯¹äºæœ€åä¸€ä¸ªå‘½åçš„è‡ªå˜é‡å’Œæ‰€æœ‰æ— åçš„è‡ªå˜é‡ï¼Œéƒ½åº”ç”¨äº†â€œ <i>é»˜è®¤è‡ªå˜é‡æå‡</i> â€ï¼ˆ <i>é»˜è®¤è‡ªå˜é‡æå‡</i> ï¼›å¦‚æœå°†æ­¤æ¦‚å¿µå¾ˆå¥½åœ°ç¿»è¯‘æˆä¿„è¯­ï¼Œæˆ‘å¾ˆä¹æ„ä½¿ç”¨å®ƒï¼‰ã€‚ è¿™æ„å‘³ç€ï¼Œå¦‚æœå‚æ•°çš„ç±»å‹ä¸º<code>char</code> ï¼Œ <code>short</code> ï¼ˆå¸¦æˆ–ä¸å¸¦ç¬¦å·ï¼‰æˆ–<code>float</code> ï¼Œåˆ™å¿…é¡»ä»¥<code>int</code> ï¼Œ <code>int</code> ï¼ˆå¸¦æˆ–ä¸å¸¦ç¬¦å·ï¼‰æˆ–<code>double</code>å½¢å¼è®¿é—®ç›¸åº”çš„å‚æ•°ã€‚ å¦åˆ™ï¼Œæœªå®šä¹‰è¡Œä¸º<i>[C11 7.16.1.1/2]</i> ã€‚ </li><li> å…³äº<code>va_list</code>ç±»å‹ï¼Œåªè¯´å®ƒæ˜¯åœ¨<code>&lt;stdarg.h&gt;</code>ä¸­<code>&lt;stdarg.h&gt;</code>å¹¶ä¸”æ˜¯å®Œæ•´çš„ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå·²çŸ¥è¿™ç§ç±»å‹çš„å¯¹è±¡çš„å¤§å°ï¼‰ <i>[C11 7.16 / 3]</i> ã€‚ </li></ul><br><h3> æ€ä¹ˆäº† ä½†æ˜¯å› ä¸ºï¼ </h3><br>  Cä¸­æ²¡æœ‰å¾ˆå¤šç±»å‹ã€‚ ä¸ºä»€ä¹ˆåœ¨æ ‡å‡†ä¸­å£°æ˜<code>va_list</code> ï¼Œä½†å¯¹å…¶å†…éƒ¨ç»“æ„å´ä»€ä¹ˆä¹Ÿæ²¡è¯´ï¼Ÿ <br><br> å¦‚æœå¯ä»¥é€šè¿‡<code>va_list</code>ä¼ é€’å‡½æ•°çš„ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œä¸ºä»€ä¹ˆéœ€è¦çœç•¥å·ï¼Ÿ ç°åœ¨å¯ä»¥è¯´ï¼šâ€œä½œä¸ºè¯­æ³•ç³–â€ï¼Œä½†æ˜¯40å¹´å‰ï¼Œæˆ‘æ•¢è‚¯å®šï¼Œæ²¡æœ‰æ—¶é—´ä½¿ç”¨ç³–ã€‚ <br><br>  Philip James Plauger <i>Phillip James Plauger</i>åœ¨<i>ã€Šæ ‡å‡†Cåº“ã€‹</i> ï¼ˆ1992å¹´ï¼‰ä¸€ä¹¦ä¸­è¯´ï¼Œæœ€åˆCæ˜¯ä¸“é—¨ä¸ºPDP-11è®¡ç®—æœºåˆ›å»ºçš„ã€‚ å¹¶ä¸”å¯ä»¥ä½¿ç”¨ç®€å•çš„æŒ‡é’ˆç®—æ³•å¯¹å‡½æ•°çš„æ‰€æœ‰å‚æ•°è¿›è¡Œæ’åºã€‚ é—®é¢˜éšç€Cçš„æ™®åŠä»¥åŠå°†ç¼–è¯‘å™¨è½¬ç§»åˆ°å…¶ä»–ä½“ç³»ç»“æ„è€Œå‡ºç°ã€‚  <i>Brian Kernighan</i>å’ŒDennis Ritchieäº1978å¹´å‡ºç‰ˆçš„ç¬¬ä¸€ç‰ˆ<i>Cç¼–ç¨‹è¯­è¨€</i>æ˜ç¡®æŒ‡å‡ºï¼š <blockquote> é¡ºä¾¿è¯´ä¸€å¥ï¼Œæ²¡æœ‰ä¸€ç§å¯æ¥å—çš„æ–¹å¼æ¥ç¼–å†™ä»»æ„æ•°é‡çš„å‚æ•°çš„å¯ç§»æ¤å‡½æ•°ï¼Œå› ä¸º å¯¹äºè¢«è°ƒç”¨å‡½æ•°ï¼Œæ²¡æœ‰å¯ç§»æ¤çš„æ–¹æ³•æ¥æŸ¥æ‰¾è¢«è°ƒç”¨æ—¶ä¼ é€’ç»™å®ƒçš„å‚æ•°æ•°é‡ã€‚  ... <code>printf</code>æ˜¯ä»»æ„æ•°é‡å‚æ•°çš„æœ€å…¸å‹çš„Cè¯­è¨€å‡½æ•°ï¼Œ...æ˜¯ä¸å¯ç§»æ¤çš„ï¼Œå¿…é¡»ä¸ºæ¯ä¸ªç³»ç»Ÿå®ç°ã€‚ </blockquote> è¿™æœ¬ä¹¦ä»‹ç»äº†<code>printf</code> ï¼Œä½†è¿˜æ²¡æœ‰<code>vprintf</code> ï¼Œä¹Ÿæ²¡æœ‰æåˆ°ç±»å‹å’Œå®<code>va_*</code> ã€‚ å®ƒä»¬å‡ºç°åœ¨ç¬¬äºŒç‰ˆçš„Cç¼–ç¨‹è¯­è¨€ï¼ˆ1988ï¼‰ä¸­ï¼Œè¿™æ˜¯å¼€å‘ç¬¬ä¸€ä¸ªCæ ‡å‡†ï¼ˆC89ï¼ŒåˆåANSI Cï¼‰çš„å§”å‘˜ä¼šçš„ä¼˜ç‚¹ã€‚ è¯¥å§”å‘˜ä¼šåœ¨æ ‡å‡†ä¸­æ·»åŠ äº†<code>&lt;stdarg.h&gt;</code>æ ‡é¢˜ï¼Œä»¥Andrew Koenigä¸ºå¢åŠ UNIX OSçš„å¯ç§»æ¤æ€§è€Œåˆ›å»ºçš„<code>&lt;varargs.h&gt;</code>ä¸ºåŸºç¡€ã€‚ å†³å®šå°†<code>va_*</code>å®ä¿ç•™ä¸ºå®ï¼Œä»¥ä¾¿ç°æœ‰ç¼–è¯‘å™¨æ›´å®¹æ˜“æ”¯æŒæ–°æ ‡å‡†ã€‚ <br><br> ç°åœ¨ï¼Œéšç€C89å’Œ<code>va_*</code>ç³»åˆ—çš„å‡ºç°ï¼Œåˆ›å»ºå¯ç§»æ¤å˜é‡å‡½æ•°æˆä¸ºå¯èƒ½ã€‚ å°½ç®¡è¿™ä¸ªå®¶åº­çš„å†…éƒ¨ç»“æ„ä»ç„¶æ²¡æœ‰ä»»ä½•æè¿°ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•è¦æ±‚ï¼Œä½†æ˜¯å¾ˆæ¸…æ¥šä¸ºä»€ä¹ˆã€‚ <br><br> å‡ºäºå¥½å¥‡ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°<code>&lt;stdarg.h&gt;</code>çš„å®ç°ç¤ºä¾‹ã€‚ ä¾‹å¦‚ï¼Œç›¸åŒçš„â€œ Cæ ‡å‡†åº“â€æä¾›äº†<b>Borland Turbo C ++</b>çš„ç¤ºä¾‹ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">æ¥è‡ªBorland Turbo C ++çš„&lt;stdarg.h&gt;</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#ifndef _STADARG #define _STADARG #define _AUPBND 1 #define _ADNBND 1 typedef char* va_list #define va_arg(ap, T) \ (*(T*)(((ap) += _Bnd(T, _AUPBND)) - _Bnd(T, _ADNBND))) #define va_end(ap) \ (void)0 #define va_start(ap, A) \ (void)((ap) = (char*)&amp;(A) + _Bnd(A, _AUPBND)) #define _Bnd(X, bnd) \ (sizeof(X) + (bnd) &amp; ~(bnd)) #endif</code> </pre> <br></div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é€‚ç”¨äºAMD64çš„</a>æ›´æ–°å¾—å¤šçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SystemV ABI</a>å°†æ­¤ç±»å‹ç”¨äº<code>va_list</code> ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">va_list SystemV ABI AMD64</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">typedef struct { unsigned int gp_offset; unsigned int fp_offset; void *overflow_arg_area; void *reg_save_area; } va_list[1];</code> </pre> <br></div></div><br> é€šå¸¸ï¼Œå¯ä»¥è¯´ç±»å‹å’Œå®<code>va_*</code>ä¸ºéå†å˜é‡å‡½æ•°çš„å‚æ•°æä¾›äº†æ ‡å‡†æ¥å£ï¼Œå¹¶ä¸”å‡ºäºå†å²åŸå› ï¼Œå®ƒä»¬çš„å®ç°å–å†³äºç¼–è¯‘å™¨ï¼Œç›®æ ‡å¹³å°å’Œä½“ç³»ç»“æ„ã€‚ æ­¤å¤–ï¼Œçœç•¥å·ï¼ˆå³é€šå¸¸ä¸ºå¯å˜å‡½æ•°ï¼‰æ—©äº<code>va_list</code> ï¼ˆå³æ ‡å¤´<code>&lt;stdarg.h&gt;</code> ï¼‰å‡ºç°åœ¨Cä¸­ã€‚ å¹¶ä¸æ˜¯åˆ›å»º<code>va_list</code>æ¥ä»£æ›¿çœç•¥å·ï¼Œè€Œæ˜¯ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿç¼–å†™å…¶å¯ç§»æ¤å˜é‡å‡½æ•°ã€‚ <br><br>  C ++å¾ˆå¤§ç¨‹åº¦ä¸Šä¿æŒäº†ä¸Cçš„å‘åå…¼å®¹æ€§ï¼Œå› æ­¤ä¸Šè¿°æ‰€æœ‰å†…å®¹å‡é€‚ç”¨äºCã€‚ ä½†æ˜¯ä¹Ÿæœ‰åŠŸèƒ½ã€‚ <br><br><h3>  C ++ä¸­çš„å˜é‡å‡½æ•° </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WG21</a>å·¥ä½œç»„å‚ä¸äº†C ++æ ‡å‡†çš„å¼€å‘ã€‚  1989å¹´ï¼Œä»¥æ–°åˆ›å»ºçš„C89æ ‡å‡†ä¸ºåŸºç¡€ï¼Œå¹¶é€æ¸æ›´æ”¹ä»¥æè¿°C ++æœ¬èº«ã€‚  1995å¹´ï¼Œä»<i>çº¦ç¿°Â·</i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç±³ç§‘ï¼ˆ</a> <i>John Micco</i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼‰æ”¶åˆ°äº†</a>ææ¡ˆ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">N0695</a> ï¼Œå…¶ä¸­ä½œè€…å»ºè®®æ›´æ”¹å¯¹å®<code>va_*</code>çš„é™åˆ¶ï¼š <br><br><ul><li> å› ä¸º ä¸Cä¸åŒï¼ŒC ++å…è®¸æ‚¨è·å–å˜é‡çš„<code>register</code>åœ°å€ï¼Œç„¶åå˜é‡å‡½æ•°çš„æœ€åä¸€ä¸ªå‘½åå‚æ•°å¯ä»¥å…·æœ‰æ­¤å­˜å‚¨ç±»ã€‚ <br></li><li> å› ä¸º  C ++ä¸­å‡ºç°çš„é“¾æ¥è¿åäº†Cå˜é‡å‡½æ•°çš„ä¸æˆæ–‡è§„åˆ™-å‚æ•°çš„å¤§å°å¿…é¡»åŒ¹é…å…¶å£°æ˜çš„ç±»å‹çš„å¤§å°-ç„¶åæœ€åä¸€ä¸ªå‘½åå‚æ•°ä¸èƒ½æ˜¯é“¾æ¥ã€‚ å¦åˆ™ï¼Œè¡Œä¸ºå«ç³Šã€‚ <br></li><li> å› ä¸º åœ¨C ++ä¸­ï¼Œæ²¡æœ‰â€œ <i>é»˜è®¤æƒ…å†µä¸‹æé«˜å‚æ•°ç±»å‹</i> â€çš„æ¦‚å¿µï¼Œç„¶åæ˜¯ <br><blockquote> å¦‚æœå‚æ•°<code>parmN</code>å£°æ˜ä¸º...ä¸åœ¨åº”ç”¨é»˜è®¤å‚æ•°æå‡åäº§ç”Ÿçš„ç±»å‹ä¸å…¼å®¹çš„ç±»å‹ï¼Œåˆ™è¯¥è¡Œä¸ºæœªå®šä¹‰ </blockquote> å¿…é¡»æ›¿æ¢ä¸º <blockquote> å¦‚æœå‚æ•°<code>parmN</code>å£°æ˜ä¸º...ä¸åœ¨ä¼ é€’æ²¡æœ‰å‚æ•°çš„å‚æ•°æ—¶å¯¼è‡´çš„ç±»å‹ä¸å…¼å®¹çš„ç±»å‹ï¼Œåˆ™è¡Œä¸ºæœªå®šä¹‰ </blockquote></li></ul> ä¸ºäº†åˆ†äº«æˆ‘çš„ç—›è‹¦ï¼Œæˆ‘ä»€è‡³æ²¡æœ‰ç¿»è¯‘æœ€åä¸€ç‚¹ã€‚ é¦–å…ˆï¼ŒC ++ Standardä¸­çš„â€œ <i>é»˜è®¤å‚æ•°ç±»å‹å‡çº§</i> â€ä»ä¸º<i>[C ++ 17 8.2.2 / 9]</i> ã€‚ å…¶æ¬¡ï¼Œä¸æ ‡å‡†Cç›¸æ¯”ï¼Œæˆ‘å¾ˆå›°æƒ‘è¿™ä¸ªçŸ­è¯­çš„å«ä¹‰ã€‚ åªæœ‰é˜…è¯»äº†N0695ï¼Œæˆ‘æ‰ç»ˆäºæ˜ç™½ï¼šæˆ‘çš„æ„æ€æ˜¯ç›¸åŒçš„ã€‚ <br><br> ä½†æ˜¯ï¼Œå…¨éƒ¨é‡‡ç”¨äº†3ä¸ªæ›´æ”¹<i>[C ++ 98 18.7 / 3]</i> ã€‚ æ—©åœ¨C ++ä¸­ï¼Œå¯¹å˜é‡å‡½æ•°è‡³å°‘è¦å…·æœ‰ä¸€ä¸ªå‘½åå‚æ•°çš„è¦æ±‚ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†æ— æ³•è®¿é—®å…¶ä»–å‘½åå‚æ•°ï¼Œä½†ç¨åå†è¿›è¡Œä»‹ç»ï¼‰å·²ç»æ¶ˆå¤±äº†ï¼Œå¹¶ä¸”æœªå‘½åå‚æ•°çš„æœ‰æ•ˆç±»å‹åˆ—è¡¨å·²æ·»åŠ äº†æŒ‡å‘ç±»æˆå‘˜å’Œ<abbr title="æ™®é€šçš„æ—§æ•°æ®">POD</abbr>ç±»å‹çš„æŒ‡é’ˆã€‚ <br><br>  C ++ 03æ ‡å‡†æœªå¯¹å˜å‡½æ•°è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚  C ++ 11å¼€å§‹å°†ç±»å‹ä¸º<code>std::nullptr_t</code>çš„æœªå‘½åå‚æ•°è½¬æ¢ä¸º<code>void*</code>å¹¶å…è®¸ç¼–è¯‘å™¨è‡ªè¡Œå†³å®šä½¿ç”¨éå¹³å‡¡çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ¥æ”¯æŒç±»å‹<i>[C ++ 11 5.2.2 / 7]</i> ã€‚  C ++ 14å…è®¸ä½¿ç”¨å‡½æ•°å’Œæ•°ç»„ä½œä¸ºæœ€åä¸€ä¸ªå‘½åå‚æ•°<i>[C ++ 14 18.10 / 3]</i> ï¼ŒC ++ 17ç¦æ­¢ä½¿ç”¨ç”±lambdaæ•è·çš„<i>æ‰©å±•åŒ…</i>å’Œå˜é‡<i>[C ++ 17 21.10.1 / 1]</i> ã€‚ <br><br> ç»“æœï¼ŒC ++åœ¨å…¶é™·é˜±ä¸­å¢åŠ äº†å¯å˜å‡½æ•°ã€‚ åªæœ‰éå¹³å‡¡çš„æ„é€ å‡½æ•°/ææ„å‡½æ•°çš„æœªæŒ‡å®šç±»å‹æ”¯æŒæ‰å€¼å¾—ã€‚ ä¸‹é¢ï¼Œæˆ‘å°†å°è¯•å°†å˜é‡å‡½æ•°çš„æ‰€æœ‰éæ˜¾è€Œæ˜“è§çš„ç‰¹æ€§ç®€åŒ–ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶é€šè¿‡å…·ä½“ç¤ºä¾‹å¯¹å…¶è¿›è¡Œè¡¥å……ã€‚ <br><br><h3> å¦‚ä½•è½»æ¾ï¼Œé”™è¯¯åœ°ä½¿ç”¨å˜é‡å‡½æ•° </h3><br><ol><li> ç”¨æå‡çš„ç±»å‹å£°æ˜æœ€åä¸€ä¸ªå‘½åçš„å‚æ•°æ˜¯ä¸æ­£ç¡®çš„ï¼Œå³  <code>char</code> ï¼Œæœ‰<code>signed char</code> ï¼Œ <code>unsigned char</code> ï¼Œ <code>singed short</code> ï¼Œ <code>unsigned short</code>æˆ–<code>float</code> ã€‚ æ ¹æ®æ ‡å‡†çš„ç»“æœå°†æ˜¯ä¸ç¡®å®šçš„è¡Œä¸ºã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ— æ•ˆçš„ä»£ç </b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(float n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); }</code> </pre> <br></div></div><br> åœ¨æˆ‘æ‰‹å¤´çš„æ‰€æœ‰ç¼–è¯‘å™¨ï¼ˆgccï¼Œclangï¼ŒMSVCï¼‰ä¸­ï¼Œåªæœ‰<b>clang</b>å‘å‡ºè­¦å‘Šã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">langè­¦å‘Š</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:7:18: warning: passing an object that undergoes default argument promotion to 'va_start' has undefined behavior [-Wvarargs] va_start(va, n); ^</code> </pre> </div></div><br> å¹¶ä¸”å°½ç®¡åœ¨æ‰€æœ‰æƒ…å†µä¸‹ç¼–è¯‘åçš„ä»£ç éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œä½†æ‚¨ä¸åº”æŒ‡æœ›å®ƒã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ²¡é”™</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(double n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); }</code> </pre> </div></div><br></li><li> å°†æœ€åä¸€ä¸ªå‘½åçš„å‚æ•°å£°æ˜ä¸ºå¼•ç”¨æ˜¯ä¸æ­£ç¡®çš„ã€‚ ä»»ä½•é“¾æ¥ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥æ ‡å‡†è¿˜ä¿è¯äº†æœªå®šä¹‰çš„è¡Œä¸ºã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ— æ•ˆçš„ä»£ç </b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(int&amp; n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); }</code> </pre> </div></div><br>  <b>gcc 7.3.0</b>ç¼–è¯‘äº†æ­¤ä»£ç ï¼Œæ²¡æœ‰ä»»ä½•æ³¨é‡Šã€‚  <b>lang 6.0.0</b>å‘å‡ºäº†è­¦å‘Šï¼Œä½†ä»è¿›è¡Œäº†ç¼–è¯‘ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">langè­¦å‘Š</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:7:18: warning: passing an object of reference type to 'va_start' has undefined behavior [-Wvarargs] va_start(va, n); ^</code> </pre> </div></div><br> åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œè¯¥ç¨‹åºéƒ½èƒ½æ­£å¸¸è¿è¡Œï¼ˆå¹¸è¿çš„æ˜¯ï¼Œæ‚¨ä¸èƒ½ä¾èµ–å®ƒï¼‰ã€‚ ä½†æ˜¯<b>MSVC 19.15.26730</b>è¡¨ç°å‡ºè‰²-æ‹’ç»ç¼–è¯‘ä»£ç ï¼Œå› ä¸º  <code>va_start</code>å‚æ•°ä¸èƒ½ä¸ºå¼•ç”¨ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ¥è‡ªMSVCçš„é”™è¯¯</b> <div class="spoiler_text"><pre> <code class="diff hljs">c:\program files (x86)\microsoft visual studio\2017\community\vc\tools\msvc\14.15.26726\include\vadefs.h(151): error C2338: va_start argument must not have reference type and must not be parenthesized</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">å¥½å§ï¼Œæ­£ç¡®çš„é€‰é¡¹çœ‹èµ·æ¥åƒè¿™æ ·</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(int* n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); }</code> </pre> </div></div><br></li><li> è¯·æ±‚<code>va_arg</code>å¼•å‘<code>char</code>ç±»å‹<code>char</code> ï¼Œ <code>short</code>æˆ–<code>float</code>æ˜¯é”™è¯¯çš„ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ— æ•ˆçš„ä»£ç </b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;cstdarg&gt; #include &lt;iostream&gt; void foo(int n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; std::cout &lt;&lt; va_arg(va, float) &lt;&lt; std::endl; std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); } int main() { foo(0, 1, 2.0f, 3); return 0; }</code> </pre> </div></div><br> è¿™é‡Œæ›´æœ‰è¶£ã€‚  <b>ç¼–è¯‘</b>æ—¶çš„<b>gcc</b>å‘å‡ºè­¦å‘Šï¼Œæœ‰å¿…è¦ä½¿ç”¨<code>double</code>è€Œä¸æ˜¯<code>float</code> ï¼Œå¹¶ä¸”å¦‚æœä»ç„¶æ‰§è¡Œæ­¤ä»£ç ï¼Œåˆ™ç¨‹åºå°†ä»¥é”™è¯¯ç»“å°¾ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æµ·æ¹¾åˆä½œå§”å‘˜ä¼šè­¦å‘Š</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:9:15: warning: 'float' is promoted to 'double' when passed through '...' std::cout &lt;&lt; va_arg(va, float) &lt;&lt; std::endl; ^~~~~~ ./test.cpp:9:15: note: (so you should pass 'double' not 'float' to 'va_arg') ./test.cpp:9:15: note: if this code is reached, the program will abort</code> </pre> </div></div><br> å®é™…ä¸Šï¼Œè¯¥ç¨‹åºå› æŠ±æ€¨æ— æ•ˆæŒ‡ä»¤è€Œå´©æºƒã€‚ <br> è½¬å‚¨åˆ†æè¡¨æ˜è¯¥ç¨‹åºæ”¶åˆ°äº†SIGILLä¿¡å·ã€‚ å¹¶ä¸”è¿˜æ˜¾ç¤ºäº†<code>va_list</code>çš„ç»“æ„ã€‚ å¯¹äº32ä½ï¼Œè¿™æ˜¯ <br><br><pre> <code class="diff hljs">va = 0xfffc6918 ""</code> </pre> <br> å³  <code>va_list</code>åªæ˜¯<code>char*</code> ã€‚ å¯¹äº64ä½ï¼š <br><br><pre> <code class="diff hljs">va = {{gp_offset = 16, fp_offset = 48, overflow_arg_area = 0x7ffef147e7e0, reg_save_area = 0x7ffef147e720}}</code> </pre> <br> å³ å®Œå…¨ä¸SystemV ABI AMD64ä¸­æè¿°çš„ç›¸åŒã€‚ <br><br> ç¼–è¯‘æ—¶å‘å‡ºçš„<b>clang</b>è­¦å‘Šæœªå®šä¹‰çš„è¡Œä¸ºï¼Œè¿˜å»ºè®®ç”¨<code>double</code>ä»£æ›¿<code>float</code> ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">langè­¦å‘Š</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:9:26: warning: second argument to 'va_arg' is of promotable type 'float'; this va_arg has undefined behavior because arguments will be promoted to 'double' [-Wvarargs] std::cout &lt;&lt; va_arg(va, float) &lt;&lt; std::endl; ^~~~~</code> </pre> </div></div><br> ä½†æ˜¯ç¨‹åºä¸å†å´©æºƒï¼Œ32ä½ç‰ˆæœ¬äº§ç”Ÿï¼š <br><br><pre> <code class="diff hljs">1 0 1073741824</code> </pre> <br>  64ä½ï¼š <br><br><pre> <code class="diff hljs">1 0 3</code> </pre> <br>  <b>MSVC</b>ä¼šäº§ç”Ÿå®Œå…¨ç›¸åŒçš„ç»“æœï¼Œå³ä½¿ä½¿ç”¨<code>/Wall</code>ä¹Ÿä¸ä¼šå‘å‡ºè­¦å‘Šã€‚ <br><br> è¿™é‡Œå¯ä»¥å‡å®š32ä½å’Œ64ä½ä¹‹é—´çš„å·®å¼‚æ˜¯ç”±äºä»¥ä¸‹äº‹å®ï¼šåœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼ŒABIå°†æ‰€æœ‰å‚æ•°é€šè¿‡å †æ ˆä¼ é€’ç»™è°ƒç”¨çš„å‡½æ•°ï¼Œè€Œåœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œå‰å››ä¸ªï¼ˆWindowsï¼‰æˆ–å…­ä¸ªï¼ˆLinuxï¼‰å‚æ•°é€šè¿‡å¤„ç†å™¨å¯„å­˜å™¨ä¼ é€’ï¼Œå…¶ä½™çš„åˆ™é€šè¿‡å †æ ˆ[ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wiki</a> ]ã€‚ ä½†æ˜¯ä¸ï¼Œå¦‚æœæ‚¨ä¸ä½¿ç”¨4è€Œæ˜¯ä½¿ç”¨19æ¥è°ƒç”¨<code>foo</code> ï¼Œå¹¶ä»¥ç›¸åŒçš„æ–¹å¼è¾“å‡ºå®ƒä»¬ï¼Œç»“æœå°†æ˜¯ç›¸åŒçš„ï¼š32ä½ç‰ˆæœ¬å®Œå…¨æ··ä¹±ï¼Œè€Œ64ä½ä¸€ä¸ª<code>float</code>ä¸ºé›¶ã€‚ å³ é‡ç‚¹å½“ç„¶æ˜¯åœ¨ABIä¸­ï¼Œè€Œä¸æ˜¯åœ¨ä½¿ç”¨å¯„å­˜å™¨ä¼ é€’å‚æ•°æ—¶ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å¥½å§ï¼Œå½“ç„¶ï¼Œè¿™æ ·åšæ˜¯å¯¹çš„</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(int n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; std::cout &lt;&lt; va_arg(va, double) &lt;&lt; std::endl; std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); }</code> </pre> </div></div><br></li><li> ä¼ é€’å¸¦æœ‰éå¹³å‡¡çš„æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ä½œä¸ºæœªå‘½åå‚æ•°çš„ç±»çš„å®ä¾‹æ˜¯ä¸æ­£ç¡®çš„ã€‚ å½“ç„¶ï¼Œé™¤éè¯¥ä»£ç çš„å‘½è¿ä½¿æ‚¨è‡³å°‘æ¯”â€œç°åœ¨å°±ç¼–è¯‘å¹¶è¿è¡Œâ€æ›´èƒ½æ¿€å‘æ‚¨ä¸€ç‚¹ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ— æ•ˆçš„ä»£ç </b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;cstdarg&gt; #include &lt;iostream&gt; struct Bar { Bar() { std::cout &lt;&lt; "Bar default ctor" &lt;&lt; std::endl; } Bar(const Bar&amp;) { std::cout &lt;&lt; "Bar copy ctor" &lt;&lt; std::endl; } ~Bar() { std::cout &lt;&lt; "Bar dtor" &lt;&lt; std::endl; } }; struct Cafe { Cafe() { std::cout &lt;&lt; "Cafe default ctor" &lt;&lt; std::endl; } Cafe(const Cafe&amp;) { std::cout &lt;&lt; "Cafe copy ctor" &lt;&lt; std::endl; } ~Cafe() { std::cout &lt;&lt; "Cafe dtor" &lt;&lt; std::endl; } }; void foo(int n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; "Before va_arg" &lt;&lt; std::endl; const auto b = va_arg(va, Bar); va_end(va); } int main() { Bar b; Cafe c; foo(1, b, c); return 0; }</code> </pre> </div></div><br> å®å®å½“å½“å†æ¬¡å˜å¾—æ›´åŠ ä¸¥æ ¼ã€‚ ä»–åªæ˜¯æ‹’ç»ç¼–è¯‘æ­¤ä»£ç ï¼Œå› ä¸ºç¬¬äºŒä¸ªå‚æ•°<code>va_arg</code>ä¸æ˜¯PODç±»å‹ï¼Œå¹¶è­¦å‘Šè¯¥ç¨‹åºå°†åœ¨å¯åŠ¨æ—¶<code>va_arg</code> ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">langè­¦å‘Š</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:23:31: error: second argument to 'va_arg' is of non-POD type 'Bar' [-Wnon-pod-varargs] const auto b = va_arg(va, Bar); ^~~ ./test.cpp:31:12: error: cannot pass object of non-trivial type 'Bar' through variadic function; call will abort at runtime [-Wnon-pod-varargs] foo(1, b, c); ^</code> </pre> </div></div><br> å¦‚æœä»ç„¶ä½¿ç”¨<code>-Wno-non-pod-varargs</code>æ ‡å¿—è¿›è¡Œç¼–è¯‘ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯è¿™æ ·ã€‚ <br><br>  <b>MSVC</b>è­¦å‘Šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ç±»å‹ä¸éå¹³å‡¡çš„æ„é€ å‡½æ•°ä¸€èµ·ä½¿ç”¨æ˜¯ä¸å¯ç§»æ¤çš„ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ¥è‡ªMSVCçš„è­¦å‘Š</b> <div class="spoiler_text"><pre> <code class="diff hljs">d:\my documents\visual studio 2017\projects\test\test\main.cpp(31): warning C4840:    "Bar"         </code> </pre> </div></div><br> ä½†æ˜¯ä»£ç å¯ä»¥ç¼–è¯‘å¹¶æ­£ç¡®è¿è¡Œã€‚ åœ¨æ§åˆ¶å°ä¸­è·å¾—ä»¥ä¸‹å†…å®¹ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">å¯åŠ¨ç»“æœ</b> <div class="spoiler_text"><pre> <code class="diff hljs">Bar default ctor Cafe default ctor Before va_arg Bar copy ctor Bar dtor Cafe dtor Bar dtor</code> </pre> </div></div><br> å³ ä»…åœ¨è°ƒç”¨<code>va_arg</code>æ—¶åˆ›å»ºä¸€ä¸ªå‰¯æœ¬ï¼Œäº‹å®è¯æ˜è¯¥å‚æ•°æ˜¯é€šè¿‡å¼•ç”¨ä¼ é€’çš„ã€‚ è™½ç„¶ä¸æ˜æ˜¾ï¼Œä½†æ ‡å‡†å…è®¸ã€‚ <br><br>  <b>gcc 6.3.0</b>ç¼–è¯‘æ—¶æ²¡æœ‰ä»»ä½•æ³¨é‡Šã€‚ è¾“å‡ºæ˜¯ç›¸åŒçš„ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">å¯åŠ¨ç»“æœ</b> <div class="spoiler_text"><pre> <code class="diff hljs">Bar default ctor Cafe default ctor Before va_arg Bar copy ctor Bar dtor Cafe dtor Bar dtor</code> </pre> </div></div><br>  <b>gcc 7.3.0</b>ä¹Ÿä¸è­¦å‘Šä»»ä½•ä¸œè¥¿ï¼Œä½†æ˜¯è¡Œä¸ºæ­£åœ¨æ”¹å˜ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">å¯åŠ¨ç»“æœ</b> <div class="spoiler_text"><pre> <code class="diff hljs">Bar default ctor Cafe default ctor Cafe copy ctor Bar copy ctor Before va_arg Bar copy ctor Bar dtor Bar dtor Cafe dtor Cafe dtor Bar dtor</code> </pre> </div></div><br> å³ æ­¤ç‰ˆæœ¬çš„ç¼–è¯‘å™¨æŒ‰å€¼ä¼ é€’å‚æ•°ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨æ—¶ï¼Œ <code>va_arg</code>ä¼šåˆ›å»ºå¦ä¸€ä¸ªå‰¯æœ¬ã€‚ å¦‚æœä»æ„é€ å‡½æ•°/ææ„å‡½æ•°æœ‰å‰¯ä½œç”¨ï¼Œåˆ™åœ¨ä»gccçš„ç¬¬6ç‰ˆåˆ‡æ¢åˆ°ç¬¬7ç‰ˆæ—¶å¯»æ‰¾è¿™ç§å·®å¼‚ä¼šå¾ˆæœ‰è¶£ã€‚ <br><br> é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœæ‚¨æ˜¾å¼ä¼ é€’å¹¶è¯·æ±‚å¯¹è¯¥ç±»çš„å¼•ç”¨ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">å¦ä¸€ä¸ªé”™è¯¯çš„ä»£ç </b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(int n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; "Before va_arg" &lt;&lt; std::endl; const auto&amp; b = va_arg(va, Bar&amp;); va_end(va); } int main() { Bar b; Cafe c; foo(1, std::ref(b), c); return 0; }</code> </pre> </div></div><br> é‚£ä¹ˆæ‰€æœ‰ç¼–è¯‘å™¨éƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚ æŒ‰æ ‡å‡†è¦æ±‚ã€‚ <br><br> é€šå¸¸ï¼Œå¦‚æœæ‚¨ç¡®å®æ„¿æ„ï¼Œæœ€å¥½é€šè¿‡æŒ‡é’ˆä¼ é€’å‚æ•°ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">åƒè¿™æ ·</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(int n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; "Before va_arg" &lt;&lt; std::endl; const auto* b = va_arg(va, Bar*); va_end(va); } int main() { Bar b; Cafe c; foo(1, &amp;b, &amp;c); return 0; }</code> </pre> </div></div><br></li></ol><br><h3> é‡è½½åˆ†è¾¨ç‡å’Œå˜é‡å‡½æ•° </h3><br> ä¸€æ–¹é¢ï¼Œä¸€åˆ‡éƒ½å¾ˆç®€å•ï¼šå³ä½¿åœ¨æ ‡å‡†æˆ–ç”¨æˆ·å®šä¹‰çš„ç±»å‹è½¬æ¢çš„æƒ…å†µä¸‹ï¼Œä¸çœç•¥å·çš„åŒ¹é…ä¹Ÿæ¯”ä¸å¸¸è§„å‘½åå‚æ•°çš„åŒ¹é…å·®ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">è¿‡è½½ç¤ºä¾‹</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;iostream&gt; void foo(...) { std::cout &lt;&lt; "C variadic function" &lt;&lt; std::endl; } void foo(int) { std::cout &lt;&lt; "Ordinary function" &lt;&lt; std::endl; } int main() { foo(1); foo(1ul); foo(); return 0; }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">å¯åŠ¨ç»“æœ</b> <div class="spoiler_text"><pre> <code class="diff hljs">$ ./test Ordinary function Ordinary function C variadic function</code> </pre> </div></div><br> ä½†è¿™ä»…åœ¨éœ€è¦å•ç‹¬è€ƒè™‘å¯¹ä¸å¸¦å‚æ•°çš„<code>foo</code>çš„è°ƒç”¨ä¹‹å‰æœ‰æ•ˆã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä¸å¸¦å‚æ•°è°ƒç”¨foo</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;iostream&gt; void foo(...) { std::cout &lt;&lt; "C variadic function" &lt;&lt; std::endl; } void foo() { std::cout &lt;&lt; "Ordinary function without arguments" &lt;&lt; std::endl; } int main() { foo(1); foo(); return 0; }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">ç¼–è¯‘å™¨è¾“å‡º</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:16:9: error: call of overloaded 'foo()' is ambiguous foo(); ^ ./test.cpp:3:6: note: candidate: void foo(...) void foo(...) ^~~ ./test.cpp:8:6: note: candidate: void foo() void foo() ^~~</code> </pre> </div></div><br> ä¸€åˆ‡éƒ½æ˜¯æŒ‰ç…§æ ‡å‡†è¿›è¡Œçš„ï¼šæ²¡æœ‰å‚æ•°-æ— æ³•ä¸çœç•¥å·è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶ä¸”å½“é‡è½½å¾—åˆ°è§£å†³æ—¶ï¼Œå˜é‡å‡½æ•°ä¸ä¼šæ¯”å¹³æ—¶çš„å‡½æ•°å·®ã€‚ <br><br><h3> ä½†æ˜¯ä»€ä¹ˆæ—¶å€™å€¼å¾—ä½¿ç”¨å˜é‡å‡½æ•° </h3><br> å¥½å§ï¼Œå˜å¼‚å‡½æ•°æœ‰æ—¶è¡¨ç°å¾—ä¸å¤ªæ˜æ˜¾ï¼Œåœ¨C ++çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå®ƒä»¬å¾ˆå®¹æ˜“ç§»æ¤ã€‚  Internetä¸Šæœ‰è®¸å¤šæŠ€å·§ï¼Œä¾‹å¦‚â€œè¯·å‹¿åˆ›å»ºæˆ–ä½¿ç”¨å¯å˜Cå‡½æ•°â€ï¼Œä½†æ˜¯å®ƒä»¬ä¸ä¼šä»C ++æ ‡å‡†ä¸­åˆ é™¤å…¶æ”¯æŒã€‚ é‚£ä¹ˆè¿™äº›åŠŸèƒ½æœ‰ä¸€äº›å¥½å¤„å—ï¼Ÿ å¥½å§ <br><br><ul><li> æœ€å¸¸è§å’Œæœ€æ˜æ˜¾çš„æƒ…å†µæ˜¯å‘åå…¼å®¹ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘å°†åŒæ—¶åŒ…æ‹¬ä½¿ç”¨ç¬¬ä¸‰æ–¹Cåº“ï¼ˆæˆ‘åœ¨JNIä¸­çš„æƒ…å†µï¼‰å’Œä¸ºC ++å®ç°æä¾›C APIã€‚ <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="æ›¿æ¢å¤±è´¥ä¸æ˜¯é”™è¯¯">SFINAE</a> ã€‚ åœ¨è¿™é‡Œéå¸¸æœ‰ç”¨çš„æ˜¯ï¼Œåœ¨C ++ä¸­ï¼Œå˜é‡å‡½æ•°ä¸éœ€è¦å…·æœ‰å‘½åå‚æ•°ï¼Œå¹¶ä¸”åœ¨è§£æé‡è½½å‡½æ•°æ—¶ï¼Œå˜é‡å‡½æ•°è¢«è®¤ä¸ºæ˜¯æœ€åä¸€ä¸ªï¼ˆå¦‚æœå­˜åœ¨è‡³å°‘ä¸€ä¸ªå‚æ•°ï¼‰ã€‚ ä¸å…¶ä»–å‡½æ•°ä¸€æ ·ï¼Œå˜é‡å‡½æ•°åªèƒ½å£°æ˜ï¼Œè€Œä¸èƒ½è°ƒç”¨ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä¾‹å­</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class T&gt; struct HasFoo { private: template &lt;class U, class = decltype(std::declval&lt;U&gt;().foo())&gt; static void detect(const U&amp;); static int detect(...); public: static constexpr bool value = std::is_same&lt;void, decltype(detect(std::declval&lt;T&gt;()))&gt;::value; };</code> </pre> </div></div><br> å°½ç®¡åœ¨C ++ 14ä¸­ï¼Œæ‚¨å¯ä»¥åšä¸€äº›ä¸åŒçš„äº‹æƒ…ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å¦ä¸€ä¸ªä¾‹å­</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class T&gt; struct HasFoo { private: template &lt;class U, class = decltype(std::declval&lt;U&gt;().foo())&gt; static constexpr bool detect(const U*) { return true; } template &lt;class U&gt; static constexpr bool detect(...) { return false; } public: static constexpr bool value = detect&lt;T&gt;(nullptr); };</code> </pre> </div></div><br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå·²ç»æœ‰å¿…è¦æ³¨æ„è§‚å¯Ÿå“ªäº›å‚æ•°å¯ä»¥è°ƒç”¨<code>detect(...)</code> ã€‚ æˆ‘å®æ„¿æ›´æ”¹å‡ è¡Œä»£ç ï¼Œå¹¶ä½¿ç”¨ç°ä»£æ–¹æ³•æ›¿ä»£å˜é‡å‡½æ•°ï¼Œä½†è¦é¿å…æ‰€æœ‰ç¼ºç‚¹ã€‚ <br></li></ul><br><h3> å˜ä½“æ¨¡æ¿æˆ–ç°ä»£C ++ä¸­å¦‚ä½•ä»ä»»æ„æ•°é‡çš„å‚æ•°åˆ›å»ºå‡½æ•° </h3><br>  Douglas Gregorï¼ŒJaakkoJÃ¤rviå’ŒGary Powellåœ¨2004å¹´æå‡ºäº†å˜é‡æ¨¡æ¿çš„æƒ³æ³•ï¼Œå³ åœ¨é‡‡ç”¨C ++ 11æ ‡å‡†ä¹‹å‰7å¹´ï¼Œæ­£å¼æ”¯æŒè¿™äº›å˜é‡æ¨¡æ¿ã€‚<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯¥æ ‡å‡†åŒ…æ‹¬å…¶ææ¡ˆçš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬ä¸‰ç‰ˆN2080</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»ä¸€å¼€å§‹å°±åˆ›å»ºäº†å˜é‡æ¨¡æ¿ï¼Œä»¥ä¾¿ç¨‹åºå‘˜æœ‰æœºä¼šä»ä»»æ„æ•°é‡çš„å‚æ•°ä¸­åˆ›å»ºç±»å‹å®‰å…¨ï¼ˆå¯ç§»æ¤ï¼ï¼‰çš„å‡½æ•°ã€‚</font><font style="vertical-align: inherit;">å¦ä¸€ä¸ªç›®æ ‡æ˜¯ç®€åŒ–å¯¹å…·æœ‰å¯å˜æ•°é‡å‚æ•°çš„ç±»æ¨¡æ¿çš„æ”¯æŒï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬åªåœ¨è°ˆè®ºå¯å˜å‡½æ•°ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡æ¨¡æ¿ä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ [C ++ 17 17.5.3]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸¦æ¥äº†ä¸‰ä¸ªæ–°æ¦‚å¿µ</font><font style="vertical-align: inherit;">ï¼š</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡æ¿å‚æ•°åŒ…ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡æ¿å‚æ•°åŒ…</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ -æ˜¯ä¸€ä¸ªå‚æ•°æ¨¡æ¿ï¼Œè€Œä¸æ˜¯å®ƒæ˜¯å¯ä»¥ä¼ é€çš„ä»»ä½•ï¼ˆåŒ…æ‹¬0ï¼‰æ¨¡æ¿å‚æ•°çš„æ•°é‡;</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€åŒ…å‡½æ•°å‚æ•°ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">function parameter pack</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰-å› æ­¤ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥æ¥å—ä»»ä½•æ•°é‡ï¼ˆåŒ…æ‹¬0ï¼‰æ•°é‡çš„å‡½æ•°å‚æ•°çš„å‡½æ•°å‚æ•°ï¼›</font></font><br></li><li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒ…çš„æ‰©å±•</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ</font><i><font style="vertical-align: inherit;">åŒ…æ‰©å±•</font></i><font style="vertical-align: inherit;">ï¼‰æ˜¯å”¯ä¸€å¯ä»¥ä½¿ç”¨å‚æ•°åŒ…å®Œæˆçš„æ“ä½œã€‚</font></font><br></li></ul><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾‹å­</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void foo(const std::string&amp; format, Args ... args) { printf(format.c_str(), args...); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™</font></font><code>class ... Args</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯æ¨¡æ¿å‚æ•°</font></font><code>Args ... args</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„åŒ…</font><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">æ˜¯åŠŸèƒ½å‚æ•°çš„åŒ…ï¼Œå¹¶ä¸”</font></font><code>args...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯åŠŸèƒ½å‚æ•°çš„åŒ…çš„æ‰©å±•ã€‚</font></font></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨æ ‡å‡†æœ¬èº«</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[C ++ 17 17.5.3 / 4]ä¸­</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»™å‡ºäº†åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•æ‰©å±•å‚æ•°åŒ…çš„å®Œæ•´åˆ—è¡¨</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åœ¨è®¨è®ºå˜é‡å‡½æ•°æ—¶ï¼Œå¯ä»¥è¿™æ ·è¯´ï¼š</font></font><br><br><ul><li><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡½æ•°å‚æ•°åŒ…å¯ä»¥æ‰©å±•ä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°åˆ—è¡¨</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void bar(const std::string&amp; format, Args ... args) { foo&lt;Args...&gt;(format.c_str(), args...); }</code> </pre> </div></div><br></li><li><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–åˆ°åˆå§‹åŒ–åˆ—è¡¨</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void foo(const std::string&amp; format, Args ... args) { const auto list = {args...}; }</code> </pre> </div></div><br></li><li><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–åˆ°lambdaæ•è·åˆ—è¡¨</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void foo(const std::string&amp; format, Args ... args) { auto lambda = [&amp;format, args...] () { printf(format.c_str(), args...); }; lambda(); }</code> </pre> </div></div><br></li><li><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥åœ¨å·ç§¯è¡¨è¾¾å¼ä¸­æ‰©å±•å¦ä¸€ä¸ªå‡½æ•°å‚æ•°åŒ…</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; int foo(Args ... args) { return (0 + ... + args); }</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å·ç§¯å‡ºç°åœ¨C ++ 14ä¸­ï¼Œå¯ä»¥æ˜¯ä¸€å…ƒå’ŒäºŒè¿›åˆ¶ï¼Œä¹Ÿå¯ä»¥æ˜¯å·¦å³ã€‚</font><font style="vertical-align: inherit;">ä¸å¾€å¸¸ä¸€æ ·ï¼Œæœ€å®Œæ•´çš„æè¿°åœ¨Standard </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[C ++ 17 8.1.6]ä¸­</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br></li><li><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸¤ç§ç±»å‹çš„å‚æ•°åŒ…éƒ½å¯ä»¥æ‰©å±•ä¸ºsizeof ...è¿ç®—ç¬¦</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void foo(Args ... args) { const auto size1 = sizeof...(Args); const auto size2 = sizeof...(args); }</code> </pre> </div></div><br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨å…¬å¼€çš„æ˜ç¡®çœç•¥å·åŒ…éœ€è¦æ”¯æŒå„ç§æ¨¡æ¿ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›¾æ¡ˆ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰å…¬å¼€å¹¶é¿å…è¿™ç§ä¸ç¡®å®šæ€§ã€‚</font></font><br><br><div class="spoiler">  <b class="spoiler_title">ä¸¾ä¸ªä¾‹å­</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void foo() { using OneTuple = std::tuple&lt;std::tuple&lt;Args&gt;...&gt;; using NestTuple = std::tuple&lt;std::tuple&lt;Args...&gt;&gt;; }</code> </pre> <br> <code>OneTuple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-å¾—å‡ºä¸€ä¸ªå•ä¾‹å…ƒç»„ï¼ˆ</font></font><code>std:tuple&lt;std::tuple&lt;int&gt;&gt;, std::tuple&lt;double&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><code>NestTuple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å…ƒç»„</font><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">-ä¸€ä¸ªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„å…ƒç»„-å¦ä¸€ä¸ªå…ƒç»„ï¼ˆ</font></font><code>std::tuple&lt;std::tuple&lt;int, double&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font></div></div><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä½¿ç”¨å˜é‡æ¨¡æ¿çš„printfçš„ç¤ºä¾‹å®ç° </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­£å¦‚æˆ‘å·²ç»æåˆ°çš„ï¼Œè¿˜åˆ›å»ºäº†å˜é‡æ¨¡æ¿ï¼Œä»¥ç›´æ¥æ›¿ä»£Cçš„å˜é‡å‡½æ•°ã€‚è¿™äº›æ¨¡æ¿çš„ä½œè€…è‡ªå·±æå‡ºäº†éå¸¸ç®€å•ä½†ç±»å‹å®‰å…¨çš„ç‰ˆæœ¬-C </font></font><code>printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸­æœ€æ—©çš„å˜é‡å‡½æ•°ä¹‹ä¸€ã€‚</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡æ¿ä¸Šçš„printf</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void printf(const char* s) { while (*s) { if (*s == '%' &amp;&amp; *++s != '%') throw std::runtime_error("invalid format string: missing arguments"); std::cout &lt;&lt; *s++; } } template &lt;typename T, typename ... Args&gt; void printf(const char* s, T value, Args ... args) { while (*s) { if (*s == '%' &amp;&amp; *++s != '%') { std::cout &lt;&lt; value; return printf(++s, args...); } std::cout &lt;&lt; *s++; } throw std::runtime_error("extra arguments provided to printf"); }</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘æ€€ç–‘ï¼Œç„¶åé€šè¿‡é€’å½’è°ƒç”¨é‡è½½å‡½æ•°ï¼Œå‡ºç°äº†è¿™ç§å¯å˜å‚æ•°æšä¸¾çš„æ¨¡å¼ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯æˆ‘ä»ç„¶æ›´å–œæ¬¢æ²¡æœ‰é€’å½’çš„é€‰é¡¹ã€‚</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡æ¿ä¸Šçš„printfï¼Œæ²¡æœ‰é€’å½’</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;typename ... Args&gt; void printf(const std::string&amp; fmt, const Args&amp; ... args) { size_t fmtIndex = 0; size_t placeHolders = 0; auto printFmt = [&amp;fmt, &amp;fmtIndex, &amp;placeHolders]() { for (; fmtIndex &lt; fmt.size(); ++fmtIndex) { if (fmt[fmtIndex] != '%') std::cout &lt;&lt; fmt[fmtIndex]; else if (++fmtIndex &lt; fmt.size()) { if (fmt[fmtIndex] == '%') std::cout &lt;&lt; '%'; else { ++fmtIndex; ++placeHolders; break; } } } }; ((printFmt(), std::cout &lt;&lt; args), ..., (printFmt())); if (placeHolders &lt; sizeof...(args)) throw std::runtime_error("extra arguments provided to printf"); if (placeHolders &gt; sizeof...(args)) throw std::runtime_error("invalid format string: missing arguments"); }</code> </pre> </div></div><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é‡è½½åˆ†è¾¨ç‡å’Œå¯å˜æ¨¡æ¿åŠŸèƒ½ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è§£ææ—¶ï¼Œè¿™äº›å¯å˜å‡½æ•°åœ¨å…¶ä»–æ–¹é¢è¢«è®¤ä¸ºæ˜¯æ ‡å‡†çš„å’Œæœ€ä¸ä¸“é—¨çš„ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œæ²¡æœ‰å‚æ•°çš„è°ƒç”¨æ²¡æœ‰é—®é¢˜ã€‚</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿‡è½½ç¤ºä¾‹</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;iostream&gt; void foo(int) { std::cout &lt;&lt; "Ordinary function" &lt;&lt; std::endl; } void foo() { std::cout &lt;&lt; "Ordinary function without arguments" &lt;&lt; std::endl; } template &lt;class T&gt; void foo(T) { std::cout &lt;&lt; "Template function" &lt;&lt; std::endl; } template &lt;class ... Args&gt; void foo(Args ...) { std::cout &lt;&lt; "Template variadic function" &lt;&lt; std::endl; } int main() { foo(1); foo(); foo(2.0); foo(1, 2); return 0; }</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯åŠ¨ç»“æœ</font></font></b> <div class="spoiler_text"><pre> <code class="diff hljs">$ ./test Ordinary function Ordinary function without arguments Template function Template variadic function</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è§£å†³é‡è½½åï¼Œå˜é‡æ¨¡æ¿å‡½æ•°åªèƒ½ç»•è¿‡å˜é‡Cå‡½æ•°ï¼ˆå°½ç®¡ä¸ºä»€ä¹ˆè¦æ··åˆå®ƒä»¬ï¼Ÿï¼‰ã€‚</font><font style="vertical-align: inherit;">é™¤äº†-å½“ç„¶ï¼</font><font style="vertical-align: inherit;">-ä¸å¸¦å‚æ•°çš„é€šè¯ã€‚</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸å¸¦å‚æ•°çš„é€šè¯</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;iostream&gt; void foo(...) { std::cout &lt;&lt; "C variadic function" &lt;&lt; std::endl; } template &lt;class ... Args&gt; void foo(Args ...) { std::cout &lt;&lt; "Template variadic function" &lt;&lt; std::endl; } int main() { foo(1); foo(); return 0; }</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯åŠ¨ç»“æœ</font></font></b> <div class="spoiler_text"><pre> <code class="diff hljs">$ ./test Template variadic function C variadic function</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä¸çœç•¥å·è¿›è¡Œæ¯”è¾ƒ-ç›¸åº”çš„åŠŸèƒ½ä¸¢å¤±ï¼Œä¸çœç•¥å·è¿›è¡Œæ¯”è¾ƒ-æ¨¡æ¿åŠŸèƒ½ä½äºéæ¨¡æ¿åŠŸèƒ½ã€‚ </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å¿«é€Ÿäº†è§£å¯å˜æ¨¡æ¿åŠŸèƒ½çš„é€Ÿåº¦ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2008å¹´ï¼Œå¢ç“¦å…‹ä¹”åˆ©ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¢ç“¦å…‹ä¹”åˆ©</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰æäº¤ç»™æ ‡å‡†åŒ–å§”å‘˜ä¼šC ++çš„ææ¡ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N2772</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¿™åœ¨å®è·µä¸­å·²ç»è¡¨æ˜ï¼Œæ¨¡æ¿å‡½æ•°çš„å˜åŒ–è¾ƒæ…¢ç±»ä¼¼çš„åŠŸèƒ½ï¼Œè¿™æ˜¯åˆå§‹åŒ–åˆ—è¡¨çš„å‚æ•°ï¼ˆ</font></font><code>std::initializer_list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚</font><font style="vertical-align: inherit;">å°½ç®¡è¿™ä¸ä½œè€…æœ¬äººçš„ç†è®ºä¾æ®ç›¸æŠµè§¦ï¼Œä½†Joliæå‡ºå®æ–½å®ƒ</font></font><code>std::min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>std::max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä¸”</font></font><code>std::minmax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯å€ŸåŠ©äºåˆå§‹åŒ–åˆ—è¡¨è€Œä¸æ˜¯å˜é‡æ¨¡æ¿ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½†åœ¨2009å¹´ï¼Œå·²ç»å‡ºç°äº†åé©³ã€‚</font><font style="vertical-align: inherit;">åœ¨Joliçš„æµ‹è¯•ä¸­ï¼Œå‘ç°äº†ä¸€ä¸ªâ€œä¸¥é‡é”™è¯¯â€ï¼ˆç”šè‡³å¯¹ä»–æœ¬äººè€Œè¨€ï¼‰ã€‚</font><font style="vertical-align: inherit;">æ–°æµ‹è¯•ï¼ˆè¯·å‚è§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤å¤„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤å¤„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰è¡¨æ˜å˜é‡æ¨¡æ¿åŠŸèƒ½ä»ç„¶æ›´å¿«ï¼Œæœ‰æ—¶ç”šè‡³æ›´å¿«ã€‚</font><font style="vertical-align: inherit;">è¿™å¹¶ä¸å¥‡æ€ªï¼Œå› ä¸º </font><font style="vertical-align: inherit;">åˆå§‹åŒ–åˆ—è¡¨ä¼šå¤åˆ¶å…¶å…ƒç´ ï¼Œå¯¹äºå˜é‡æ¨¡æ¿ï¼Œæ‚¨å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œå¤§é‡æ“ä½œã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç„¶è€Œï¼Œåœ¨C ++ 11å’Œéšåçš„æ ‡å‡†</font></font><code>std::min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>std::max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥åŠ</font></font><code>std::minmax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-è¿™æ˜¯é€šå¸¸çš„æ¨¡æ¿åŠŸèƒ½ï¼Œå³é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨å‘é€çš„å‚æ•°çš„ä»»æ„æ•°é‡ã€‚</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç®€è¦æ€»ç»“å’Œç»“è®º </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å› æ­¤ï¼ŒCæ ·å¼å˜é‡å‡½æ•°ï¼š </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»–ä»¬ä¸çŸ¥é“ä»–ä»¬çš„è®ºæ®æ•°ç›®æˆ–ç±»å‹ã€‚</font><font style="vertical-align: inherit;">å¼€å‘äººå‘˜å¿…é¡»ä½¿ç”¨è¯¥å‡½æ•°çš„éƒ¨åˆ†å‚æ•°ï¼Œæ‰èƒ½ä¼ é€’æœ‰å…³å…¶ä½™å‚æ•°çš„ä¿¡æ¯ã€‚</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éšå¼æé«˜æœªå‘½åå‚æ•°ï¼ˆå’Œå§“æ°ï¼‰çš„ç±»å‹ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨å¿˜è®°äº†å®ƒï¼Œåˆ™ä¼šå¾—åˆ°æ¨¡ç³Šçš„è¡Œä¸ºã€‚</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å®ƒä»¬ä¿æŒä¸çº¯Cçš„å‘åå…¼å®¹æ€§ï¼Œå› æ­¤ä¸æ”¯æŒé€šè¿‡å¼•ç”¨ä¼ é€’å‚æ•°ã€‚ </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨C ++ 11ä¹‹å‰ï¼Œä¸æ”¯æŒ</font><font style="vertical-align: inherit;">é</font></font><abbr title="æ™®é€šçš„æ—§æ•°æ®"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»å‹çš„</font><font style="vertical-align: inherit;">å‚æ•°</font><font style="vertical-align: inherit;">ï¼Œå¹¶ä¸”ç”±äºC ++ 11å¯¹éå¹³å‡¡ç±»å‹çš„æ”¯æŒç”±ç¼–è¯‘å™¨è‡ªè¡Œå†³å®šã€‚</font></font>å³<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä»£ç çš„è¡Œä¸ºå–å†³äºç¼–è¯‘å™¨åŠå…¶ç‰ˆæœ¬ã€‚ </font></font><br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡å‡½æ•°çš„å”¯ä¸€å…è®¸ç”¨é€”æ˜¯ä¸C ++ä»£ç ä¸­çš„C APIäº¤äº’ã€‚</font><font style="vertical-align: inherit;">å¯¹äºå…¶ä»–æ‰€æœ‰ä¸œè¥¿ï¼ŒåŒ…æ‹¬</font></font><abbr title="æ›¿æ¢å¤±è´¥ä¸æ˜¯é”™è¯¯"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SFINAE</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œéƒ½æœ‰å¯å˜çš„æ¨¡æ¿å‡½æ•°ï¼Œå®ƒä»¬å¯ä»¥ï¼š</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> äº†è§£ä»–ä»¬æ‰€æœ‰å‚æ•°çš„æ•°é‡å’Œç±»å‹ã€‚ </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¾“å…¥safeï¼Œè¯·å‹¿æ›´æ”¹å…¶å‚æ•°çš„ç±»å‹ã€‚ </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å®ƒä»¬æ”¯æŒä»¥ä»»ä½•å½¢å¼ä¼ é€’å‚æ•°-æŒ‰å€¼ï¼ŒæŒ‰æŒ‡é’ˆï¼ŒæŒ‰å¼•ç”¨ï¼Œé€šè¿‡é€šç”¨é“¾æ¥ã€‚ </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åƒä»»ä½•å…¶ä»–C ++å‡½æ•°ä¸€æ ·ï¼Œå¯¹å‚æ•°ç±»å‹æ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚ </font></font><br></li><li>        (   C ),   . <br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸Cæ ·å¼å¯¹åº”å‡½æ•°ç›¸æ¯”ï¼Œå¯å˜æ¨¡æ¿å‡½æ•°å¯èƒ½æ›´å†—é•¿ï¼Œæœ‰æ—¶ç”šè‡³éœ€è¦ä½¿ç”¨è‡ªå·±çš„é‡è½½éæ¨¡æ¿ç‰ˆæœ¬ï¼ˆé€’å½’å‚æ•°éå†ï¼‰ã€‚</font><font style="vertical-align: inherit;">ä»–ä»¬å¾ˆéš¾é˜…è¯»å’Œå†™ä½œã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œç”±äºæ²¡æœ‰åˆ—å‡ºçš„ç¼ºç‚¹å’Œå­˜åœ¨çš„ä¼˜ç‚¹ï¼Œæ‰€æœ‰è¿™äº›è´¹ç”¨éƒ½å¯ä»¥å¾—åˆ°è¡¥å¿ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¥½äº†ï¼Œç»“è®ºå¾ˆç®€å•ï¼šä»…ç”±äºå‘åå…¼å®¹ï¼ŒCé£æ ¼çš„å˜é‡å‡½æ•°ä»ä¿ç•™åœ¨C ++ä¸­ï¼Œå¹¶ä¸”å®ƒä»¬æä¾›äº†å¹¿æ³›çš„é€‰æ‹©ã€‚</font><font style="vertical-align: inherit;">åœ¨ç°ä»£C ++ä¸­ï¼Œå¼ºçƒˆå»ºè®®ä¸è¦ç¼–å†™æ–°çš„ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œä¸è¦ä½¿ç”¨ç°æœ‰çš„å¯å˜Cå‡½æ•°ã€‚</font><font style="vertical-align: inherit;">å¯å˜æ¨¡æ¿å‡½æ•°å±äºç°ä»£C ++é¢†åŸŸï¼Œå¹¶ä¸”æ›´åŠ å®‰å…¨ã€‚</font><font style="vertical-align: inherit;">ä½¿ç”¨å®ƒä»¬ã€‚</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ–‡çŒ®èµ„æ–™ </font></font></h3><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PJ Plaugerï¼Œæ ‡å‡†Cåº“</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brian W. Kernighanå’ŒDennis M. Ritchieï¼ŒCç¼–ç¨‹è¯­è¨€ï¼Œç¬¬ä¸€ç‰ˆ</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brian W. Kernighanå’ŒDennis M. Ritchieï¼Œã€Š Cç¼–ç¨‹è¯­è¨€ã€‹ç¬¬äºŒç‰ˆ</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ‡å‡†C11ï¼Œè‰æ¡ˆN1570</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ 98æ ‡å‡†</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ 03æ ‡å‡†</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ 11æ ‡å‡†ï¼Œè‰æ¡ˆN3337</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ‡å‡†C ++ 14ï¼Œè‰æ¡ˆN4296</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ 17æ ‡å‡†ï¼Œè‰æ¡ˆN4659</font></font></a> <br></li></ul><br><h3> èšè‹¯ä¹™çƒ¯ </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¾ˆå®¹æ˜“æ‰¾åˆ°å’Œä¸‹è½½ç½‘ä¸Šæåˆ°çš„ä¹¦ç±çš„ç”µå­ç‰ˆæœ¬ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯æˆ‘ä¸ç¡®å®šè¿™æ˜¯å¦åˆæ³•ï¼Œå› æ­¤æˆ‘ä¸æä¾›é“¾æ¥ã€‚</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN430064/">https://habr.com/ru/post/zh-CN430064/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN430052/index.html">ä¸ºä»€ä¹ˆå¯¹ç¡¬ä»¶å¼€å‘äººå‘˜è¿›è¡Œè´¨é‡ç›‘ç®¡å¾ˆé‡è¦</a></li>
<li><a href="../zh-CN430054/index.html">è«æ–¯ç§‘HolyJS 2018ï¼šå…è´¹åœ¨çº¿å¹¿æ’­ï¼Œæ´¾å¯¹å’Œç§‘æŠ€è¯´å”±</a></li>
<li><a href="../zh-CN430058/index.html">æ¶²å‹ç®¡è·¯ä¸­çš„æ³¢åŠ¨è¿‡ç¨‹ã€‚ åŸºç¡€çŸ¥è¯†</a></li>
<li><a href="../zh-CN430060/index.html">Hackspaceï¼ŒDenis Perevalovï¼ŒAnastasia Krokhaleva-ç¼–ç¨‹çš„é­”åŠ›</a></li>
<li><a href="../zh-CN430062/index.html">å¾®æœåŠ¡ã€‚ Javaç¤ºä¾‹çš„å¼€å‘å’Œé‡æ„æ¨¡å¼</a></li>
<li><a href="../zh-CN430068/index.html">çš„é¡ºåº</a></li>
<li><a href="../zh-CN430070/index.html">å †æ ˆå’Œé˜Ÿåˆ—æ˜¯ä¸¤ä¸ªé”™è¯¯çš„èŒƒä¾‹ï¼Œå¯¹æ­¤å¯ä»¥åšä»€ä¹ˆ</a></li>
<li><a href="../zh-CN430072/index.html">æœåŠ¡å™¨ç«¯Swiftè¢«ä½ä¼°ï¼šPaul Hudsonè®¿è°ˆ</a></li>
<li><a href="../zh-CN430074/index.html">æˆ‘å¦‚ä½•å·®ç‚¹æ„ŸæŸ“è¯•å›¾å‡ºå”®é´å­çš„ç—…æ¯’</a></li>
<li><a href="../zh-CN430076/index.html">å…è´¹è½¬æ’­DotNext 2018è«æ–¯ç§‘</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>