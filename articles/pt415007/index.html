<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¥üèΩ üë®üèæ‚Äçü§ù‚Äçüë®üèª ü•® Como configurar o Bluetooth no Linux de uma maneira complicada üßõüèª üöù üñïüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em prepara√ß√£o para o f√≥rum anual de TI, surgiu a id√©ia de criar um manipulador simples controlado por um gamepad sem fio para demonstrar os recursos d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como configurar o Bluetooth no Linux de uma maneira complicada</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415007/"><p><img src="https://habrastorage.org/webt/wq/9u/sv/wq9usvb7w6-8_c5p_dhrrkom_qa.jpeg"></p><br><p> Em prepara√ß√£o para o f√≥rum anual de TI, surgiu a id√©ia de criar um manipulador simples controlado por um gamepad sem fio para demonstrar os recursos de microcontroladores e computadores de placa √∫nica.  Estava √† m√£o um controlador TRIC, v√°rios servomotores, um construtor de ferro e um m√™s antes do in√≠cio do f√≥rum. </p><br><p>  "Tudo est√° indo conforme o planejado", mas n√£o neste caso. </p><a name="habracut"></a><br><h1 id="etap-1-podgotovka">  Etapa 1. Prepara√ß√£o </h1><br><p>  O TRIC a bordo do Linux foi um fracasso para um manipulador desse tipo, mas ‚Äúa coisa √© usabilidade e manuten√ß√£o banais‚Äù (cita√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">ClusterM</a> sobre o Linux em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">interfone inteligente</a> ). </p><br><p>  Depois de ler a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">especifica√ß√£o</a> , descobriu-se que ele possui Bluetooth.  Se voc√™ trabalhou com este controlador, sabe que a transfer√™ncia de programas √© via Wi-Fi e n√£o h√° outras maneiras convenientes de se comunicar com ele.  N√£o h√° men√ß√£o de Bluetooth no menu.  Mas como assim? </p><br><p>  Armado com SSH, uma chave de fenda e curiosidade, comecei a procurar por Bluetooth.  O sistema inclu√≠a hcitool, hciconfig e o daemon bluetoothd.  Todos eles disseram que ele n√£o estava l√°. </p><br><pre><code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hcitool dev Devices:</span></span></code> </pre> <br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hciconfig hci0 Can't get device info: No such device</span></span></code> </pre> <br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># bluetoothd -n &amp; [1] 5449 root@trik-7dda93:~# bluetoothd[5449]: Bluetooth daemon 4.101 bluetoothd[5449]: Starting SDP server bluetoothd[5449]: Bluetooth Management interface initialized</span></span></code> </pre> <br><p>  Ligando para amigos em busca de um m√≥dulo USB externo, continuei pesquisando. </p><br><p>  Depois de desmontar o controlador, o m√≥dulo Jorjin WG7311-0A foi encontrado.  A <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">especifica√ß√£o</a> afirma que realmente h√° Wi-Fi, Bluetooth e at√© um r√°dio FM.  A interface para comunica√ß√£o com Bluetooth √© UART e √© ativada via BT_EN. </p><br><p><img src="https://habrastorage.org/webt/de/5d/qh/de5dqhz_nocaef_cwt0fh_d5umc.jpeg"></p><br><p>  Depois de ler como o m√≥dulo Bluetooth √© conectado via UART via hcitool, tentei a sorte e nada.  Duas das tr√™s portas UART gratuitas estavam silenciosas. </p><br><p>  Mas temos o contato BT_EN!  √â poss√≠vel que o m√≥dulo esteja simplesmente desligado e n√£o responda √†s solicita√ß√µes.  Ap√≥s examinar o dispositivo do kernel do Linux para dispositivos ARM, foi encontrado um arquivo em que todos os contatos usados ‚Äã‚Äãpelo SoC s√£o registrados.  Ao abrir <code>arch/arm/mach-davinci/board-da850-trik.c</code> no c√≥digo-fonte do kernel, um contato GPIO para Bluetooth foi realmente encontrado.  Vit√≥ria!  Eu pensei. </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> da850_trik_bluetooth_pins[] __initconst = { DA850_GPIO6_11, <span class="hljs-comment"><span class="hljs-comment">/*BT_EN_33 */</span></span> DA850_GPIO6_10, <span class="hljs-comment"><span class="hljs-comment">/*BT_WU_33*/</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> };</code> </pre> <br><h1 id="etap-2-nastuplenie">  Etapa 2. Ofensivo </h1><br><p>  Para habilitar um contato atrav√©s do GPIO, voc√™ precisa encontrar o n√∫mero de s√©rie de ponta a ponta.  Encontramos a seguinte linha no c√≥digo do kernel com uma solicita√ß√£o para inicializar o contato BT_EN_33 em <code>arch/arm/mach-davinci/board-da850-trik.c</code> : </p><br><pre> <code class="hljs lisp">ret = gpio_request_one(<span class="hljs-name"><span class="hljs-name">GPIO_TO_PIN</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>), GPIOF_OUT_INIT_LOW, <span class="hljs-string"><span class="hljs-string">"BT_EN_33"</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br><p>  Ele usa a macro GPIO_TO_PIN.  Veja a descri√ß√£o da macro em <code>arch/arm/mach-davinci/include/mach/gpio-davinci.h</code> : </p><br><pre> <code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">/* Convert GPIO signal to GPIO pin number */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> GPIO_TO_PIN(bank, gpio) (16 * (bank) + (gpio))</span></span></code> </pre> <br><p>  Usando-o, voc√™ pode encontrar o n√∫mero de contato completo.  N√≥s entendemos que 16 * 6 + 11 = 107. Agora nos voltamos para a inclus√£o do contato. </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1 &gt;&gt; /sys/devices/virtual/gpio/gpio107/value</code> </pre> <br><p>  0 ou 1 no comando echo √© o estado do contato. </p><br><p>  Execute o comando para conectar e ... </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hciattach /dev/ttyS0 texas Found a Texas Instruments' chip! Firmware file : /lib/firmware/TIInit_7.6.15.bts can't open firmware file: No such file or directory Warning: cannot find BTS file: /lib/firmware/TIInit_7.6.15.bts Device setup complete</span></span></code> </pre> <br><p>  incompreens√≠vel para n√≥s (no momento) mensagens de erro.  Tentamos configurar o dispositivo atrav√©s do hcitool: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hcitool dev Devices:</span></span></code> </pre> <br><p>  N√£o h√° dispositivos, embora a inicializa√ß√£o supostamente tenha sido aprovada.  Tentamos conectar uma segunda vez, mas com um tipo diferente de adaptador: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hciattach /dev/ttyS0 texasalt Texas module LMP version : 0x06 Texas module LMP sub-version : 0x1f0f internal version freeze: 15 software version: 6 chip: wl1271 (7) Opening firmware file: /etc/firmware/wl1271.bin Could not open firmware file /etc/firmware/wl1271.bin: No such file or directory (2). Device setup complete</span></span></code> </pre> <br><p>  E novamente, nada.  Vamos voltar ao primeiro erro e aplicar o conhecimento de ingl√™s: </p><br><pre> <code class="bash hljs">Warning: cannot find BTS file: /lib/firmware/TIInit_7.6.15.bts</code> </pre> <br><p>  Abrimos a pasta / lib / firmware com firmware e n√£o encontramos o arquivo que precisamos.  Ap√≥s uma longa pesquisa na Internet, encontramos o arquivo desejado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio da TI</a> e o fazemos o download.  Outras vers√µes do mesmo arquivo se recusaram a funcionar. </p><br><pre> <code class="bash hljs">curl -k https://git.ti.com/wilink8-bt/ti-bt-firmware/blobs/raw/45897a170bc30afb841b1491642e774f0c89b584/TIInit_7.6.15.bts &gt; TIInit_7.6.15.bts cp TIInit_7.6.15.bts /lib/firmware/TIInit_7.6.15.bts</code> </pre> <br><p>  Reinicializamos o controlador e reconectamos: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># echo 1 &gt;&gt; /sys/devices/virtual/gpio/gpio107/value root@trik-7dda93:~# hciattach /dev/ttyS0 texas Found a Texas Instruments' chip! Firmware file : /lib/firmware/TIInit_7.6.15.bts Loaded BTS script version 1 Device setup complete</span></span></code> </pre> <br><p>  Viva!  O firmware foi inicializado.  Verificando hciconfig: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hciconfig hci0: Type: BR/EDR Bus: UART BD Address: 78:**:**:**:**:B3 ACL MTU: 1021:4 SCO MTU: 180:4 DOWN RX bytes:509 acl:0 sco:0 events:21 errors:0 TX bytes:388 acl:0 sco:0 commands:21 errors:0</span></span></code> </pre> <br><p>  Iniciamos o servi√ßo bluetoothd, procuramos dispositivos e detectamos nosso m√≥dulo: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># bluetoothd -n &amp; [1] 4689 bluetoothd[4689]: Bluetooth daemon 4.101 bluetoothd[4689]: Starting SDP server bluetoothd[4689]: Bluetooth Management interface initialized bluetoothd[4689]: Parsing /etc/bluetooth/serial.conf failed: No such file or directory bluetoothd[4689]: Could not get the contents of DMI chassis type bluetoothd[4689]: Adapter /org/bluez/4689/hci0 has been enabled root@trik-7dda93:~# hciconfig hci0 piscan</span></span></code> </pre> <br><p>  Uma pesquisa por computador encontra um dispositivo: </p><br><p><img src="https://habrastorage.org/webt/vs/bz/mb/vsbzmb32vz8tbechhhpuroku9qs.png"></p><br><p>  Para ativar o Bluetooth, voc√™ pode criar um script: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash case "$1" in start) echo 1 &gt;&gt; /sys/devices/virtual/gpio/gpio107/value bluetoothd -n &amp; hciattach /dev/ttyS0 texas hciconfig hci0 piscan ;; stop) ;; restart) ;; status) ;; *) ;;</span></span></code> </pre> <br><p>  E adicione-o √† execu√ß√£o autom√°tica: </p><br><pre> <code class="bash hljs">cp init-bluetooth /etc/init.d/init-bluetooth update-rc.d init-bluetooth <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> 99</code> </pre> <br><p>  A reinicializa√ß√£o e o desligamento do m√≥dulo se comportam de maneira imprevis√≠vel, portanto, as op√ß√µes de parada e reinicializa√ß√£o n√£o possuem comandos. </p><br><h1 id="etap-3-proverka-svyazi">  Etapa 3. Verifica√ß√£o da comunica√ß√£o </h1><br><p>  A maneira mais f√°cil de verificar a comunica√ß√£o nas duas dire√ß√µes √© o servi√ßo da porta COM.  Com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">alguns comandos,</a> ative-o: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># sdptool add --channel=3 SP Serial Port service registered root@trik-7dda93:~# mknod -m 666 /dev/rfcomm0 c 216 0 root@trik-7dda93:~# rfcomm watch /dev/rfcomm0 3 /sbin/getty rfcomm0 115200 linux Waiting for connection on channel 3</span></span></code> </pre> <br><p>  N√≥s nos conectamos a partir do telefone e vemos um convite para entrar no sistema: </p><br><p><img src="https://habrastorage.org/webt/0i/lw/p9/0ilwp9kassasp_xfmvc3xhcwvl8.png"></p><br><p>  Nenhum dos terminais testados permitiu inserir uma senha de usu√°rio vazia, ent√£o tive que enviar informa√ß√µes de login usando o redirecionamento de thread em uma sess√£o SSH. </p><br><h1 id="etap-4-configure--make">  Etapa 4. ./configure &amp;&amp; make </h1><br><p>  Seguindo as instru√ß√µes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">para conectar um gamepad ao Linux,</a> encontramos os seguintes problemas: </p><br><ul><li>  O BlueZ na distribui√ß√£o est√° desatualizado e n√£o entende os comandos do sixad daemon, que estabelece uma conex√£o com o gamepad </li><li>  Nova vers√£o BlueZ da fonte se recusa a compilar devido a muitas depend√™ncias </li><li>  O BlueZ do Debian fresco requer udev e systemd, que est√£o ausentes na distribui√ß√£o atual </li></ul><br><p>  A √∫nica depend√™ncia que foi capaz de satisfazer foi o m√≥dulo do kernel uinput. </p><br><p>  Para fazer isso: </p><br><ul><li>  obtenha a configura√ß√£o do kernel atual no dispositivo </li></ul><br><pre> <code class="bash hljs">cp /proc/config.gz config.gz gunzip config.gz</code> </pre> <br><ul><li>  baixar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo do kernel</a> </li><li>  baixar e instalar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">toolchain</a> </li><li>  copie a configura√ß√£o do kernel para a pasta com o c√≥digo do kernel </li><li>  adicione o m√≥dulo uinput √† configura√ß√£o </li></ul><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"CONFIG_INPUT_UINPUT=m"</span></span> &gt;&gt; config</code> </pre> <br><ul><li>  inicie a montagem ativando primeiro a cadeia de ferramentas </li></ul><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">source</span></span> /opt/trik-sdk/environment-setup-arm926ejste-oe-linux-gnueabi make</code> </pre> <br><ul><li>  copie os m√≥dulos do kernel para o cart√£o de mem√≥ria </li></ul><br><pre> <code class="bash hljs">make INSTALL_MOD_PATH=/mnt/trik-sd modules_install</code> </pre> <br><ul><li>  construa a imagem do uBoot e copie-a para / boot </li></ul><br><pre> <code class="bash hljs">make uImage cp arch/arm/boot/uImage /mnt/trik-sd/boot/uImage-3.6.7</code> </pre> <br><p>  Agora, o programa n√£o jura pela falta de um m√≥dulo do kernel, mas n√£o podemos fazer nada.  Instru√ß√µes para o gamepad ser√£o √∫teis mais tarde. </p><br><h1 id="etap-5-varim-kashu-iz-topora">  Etapa 5. Cozinhe o mingau no machado </h1><br><p>  Chegando ao plano "tyap-blooper".  Como n√£o h√° uma maneira conveniente de colocar os programas necess√°rios na distribui√ß√£o original, colocaremos algo popular.  O processador possui uma arquitetura ARMv5TE, o que significa que existem distribui√ß√µes para ele. </p><br><p>  Tentamos descompactar e executar o Arch Linux universal para ARM e, ao carregar no console, vemos que o systemd requer uma vers√£o mais recente do kernel, que n√£o possu√≠mos.  Tentativas de transfer√™ncia do kernel 4.16 n√£o tiveram √™xito e levaram muito tempo. </p><br><p>  Passamos para outra op√ß√£o - Debian.  Existe uma imagem de disco com um sistema instalado para ARM, mas √© melhor colocar um sistema limpo com os pacotes e configura√ß√µes necess√°rios para n√≥s. </p><br><h2 id="ustanovka-v-qemu">  Instala√ß√£o no QEMU </h2><br><p>  Fa√ßa o download da imagem de instala√ß√£o (link para <a href="">.iso</a> ) e instale o QEMU. <br>  Tamb√©m precisamos da imagem do kernel e do initrd para inicializar a instala√ß√£o, que pode ser baixada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Crie uma imagem de um cart√£o de mem√≥ria com o tamanho de um cart√£o de mem√≥ria real (neste caso, 4 GB): </p><br><pre> <code class="bash hljs">qemu-img create -f raw debian.img 4G</code> </pre> <br><p>  Iniciamos a instala√ß√£o: </p><br><pre> <code class="bash hljs">qemu-system-arm -M versatilepb -kernel vmlinuz-3.2.0-4-versatile -initrd initrd.gz -hda debian.img -cdrom debian-7.11.0-armel-CD-1.iso</code> </pre> <br><p>  Se voc√™ deseja criar um layout de disco com uma distribui√ß√£o original relativa n√£o padr√£o, deixe a parti√ß√£o raiz primeiro; caso contr√°rio, voc√™ precisar√° alterar os par√¢metros de inicializa√ß√£o do kernel no uBoot.  H√° o n√∫mero da parti√ß√£o na qual o sistema de arquivos raiz est√° localizado. </p><br><p>  A marca√ß√£o padr√£o cont√©m: </p><br><ol><li>  Parti√ß√£o EXT4 para sistema de arquivos raiz de 1.3 GB </li><li>  Parti√ß√£o FAT32 para armazenar dados do usu√°rio ‚âà 500 MB de tamanho </li></ol><br><p>  A sa√≠da do fdisk para a imagem da distribui√ß√£o original: </p><br><pre> <code class="hljs powershell">Disk: trik<span class="hljs-literal"><span class="hljs-literal">-distro</span></span>.img geometry: <span class="hljs-number"><span class="hljs-number">893</span></span>/<span class="hljs-number"><span class="hljs-number">64</span></span>/<span class="hljs-number"><span class="hljs-number">63</span></span> [<span class="hljs-number"><span class="hljs-number">3604478</span></span> <span class="hljs-type"><span class="hljs-type">sectors</span></span>] Signature: <span class="hljs-number"><span class="hljs-number">0</span></span>xAA55 Starting Ending <span class="hljs-comment"><span class="hljs-comment">#: id cyl hd sec - cyl hd sec [ start - size] ------------------------------------------------------------------------ 1: 83 1023 3 32 - 1023 3 32 [ 1040382 - 2564096] Linux files* 2: 0C 64 0 1 - 1023 3 32 [ 8192 - 1032190] Win95 FAT32L 3: 00 0 0 0 - 0 0 0 [ 0 - 0] unused 4: 00 0 0 0 - 0 0 0 [ 0 - 0] unused</span></span></code> </pre><br><p>  Depois de definir os par√¢metros, deixamos de beber algumas x√≠caras de ch√°, porque  o emulador n√£o √© muito mais r√°pido que um processador ARM real. </p><br><p>  Para iniciar o sistema instalado, voc√™ precisa de outra imagem initrd, que pode ser obtida <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Iniciamos o sistema: </p><br><pre> <code class="bash hljs">qemu-system-arm -M versatilepb -kernel vmlinuz-3.2.0-4-versatile -initrd initrd.img-3.2.0-4-versatile -hda debian.img -append <span class="hljs-string"><span class="hljs-string">"root=/dev/sda1"</span></span></code> </pre> <br><h2 id="nastroyka-sistemy">  Configura√ß√£o do sistema </h2><br><p>  Ap√≥s o in√≠cio, entramos no superusu√°rio, checamos a conex√£o com a Internet, atualizamos os reposit√≥rios e o sistema, colocamos o conjunto m√≠nimo de programas: </p><br><pre> <code class="bash hljs">apt-get update apt-get upgrade apt-get install curl git mc htop joystick</code> </pre> <br><h3 id="terminaly">  Terminais </h3><br><p>  <code>/etc/inittab</code> , removemos terminais desnecess√°rios, ligamos o UART de que precisamos e adicionamos entrada autom√°tica para o usu√°rio certo (use o root somente ao depurar).  A entrada autom√°tica √© √∫til se voc√™ planeja executar o shell para controle no controlador. </p><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">2345</span></span><span class="hljs-symbol"><span class="hljs-symbol">:respawn</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/sbin/getty</span></span> <span class="hljs-number"><span class="hljs-number">38400</span></span> tty1 --autologin root <span class="hljs-comment"><span class="hljs-comment">#2:23:respawn:/sbin/getty 38400 tty2 #3:23:respawn:/sbin/getty 38400 tty3 #4:23:respawn:/sbin/getty 38400 tty4 #5:23:respawn:/sbin/getty 38400 tty5 #6:23:respawn:/sbin/getty 38400 tty6 uart:12345:respawn:/sbin/getty -L 115200 ttyS1</span></span></code> </pre> <br><h3 id="bluetooth-i-wi-fi">  Bluetooth e wifi </h3><br><p>  Instale o bluez-utils e o wpasupplicant para acessar o Wi-Fi e o Bluetooth. </p><br><pre> <code class="bash hljs">apt-get install bluez-utils wpasupplicant</code> </pre> <br><p>  Desabilitamos a interface eth0 e configuramos a interface wlan1 em <code>/etc/network/interfaces</code> : </p><br><pre> <code class="hljs kotlin"># /etc/network/interfaces -- configuration file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ifup(<span class="hljs-number"><span class="hljs-number">8</span></span>), ifdown(<span class="hljs-number"><span class="hljs-number">8</span></span>) # The loopback <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lo</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lo</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inet</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">loopback</span></span></span><span class="hljs-class"> # </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wireless</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interfaces</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wlan1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wlan1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inet</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dhcp</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wireless_mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">managed</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wireless_essid</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">any</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wpa</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">driver</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wext</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wpa</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">conf</span></span></span><span class="hljs-class"> /</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">etc</span></span></span><span class="hljs-class">/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wpa_supplicant</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">conf</span></span></span></span></code> </pre> <br><p>  Adicione a rede com anteced√™ncia ao <code>/etc/wpa_supplicant.conf</code> , porque  fazer isso no pr√≥prio controlador n√£o √© t√£o conveniente: </p><br><pre> <code class="bash hljs">wpa_passphrase ssid password &gt;&gt; /etc/wpa_supplicant.conf</code> </pre> <br><p>  Se voc√™ n√£o possui acesso Wi-Fi, pode usar o UART para outras configura√ß√µes, mas lembre-se de que, por padr√£o, o kernel exibe todos os erros neste terminal.  Portanto, durante a opera√ß√£o, uma mensagem repentina do kernel ou servi√ßo pode interromp√™-lo. </p><br><p>  Adicione um script para ativar o Bluetooth.  Desta vez, modifique <code>/etc/init.d/bluetooth</code> : </p><br><pre> <code class="bash hljs"> 139: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-variable"><span class="hljs-variable">$1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> start) <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1 &gt;&gt; /sys/devices/virtual/gpio/gpio107/value  168: hciattach /dev/ttyS0 texas log_end_msg 0 ;;</code> </pre><br><p>  Assim, todos os servi√ßos que requerem o servi√ßo Bluetooth executam os comandos necess√°rios para inicializar. </p><br><h3 id="vzmah-vlevo-vzmah-vpravo">  Deslize para a esquerda, deslize para a direita </h3><br><p>  Removemos programas e servi√ßos desnecess√°rios que podem ser visualizados usando o htop, porque eles ocupam um lugar precioso na RAM: </p><br><p><img src="https://habrastorage.org/webt/4e/rg/av/4ergavw2trhiiyvvlnmdtc1luhk.png"></p><br><p>  Nesse caso, o servi√ßo ConsoleKit possui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">muitos processos</a> .  Mova o arquivo deste servi√ßo para a pasta raiz em caso de recupera√ß√£o: </p><br><pre> <code class="bash hljs">mv /usr/share/dbus-1/system-services/org.freedesktop.ConsoleKit.service /root/</code> </pre> <br><p>  Antes de desligar o servi√ßo, o consumo de RAM era de 19 MB e depois - de 16 MB. </p><br><h3 id="razdely-sistemy">  Se√ß√µes do sistema </h3><br><p>  Embora o uBoot transfira para o kernel o dispositivo no qual a parti√ß√£o raiz est√° localizada, vale a pena escrev√™-lo em <code>/etc/fstab</code> para <code>/etc/fstab</code> a confiabilidade.  Mudamos a primeira linha respons√°vel pela se√ß√£o raiz: </p><br><pre> <code class="hljs mel">/dev/mmcblk0p1 / auto defaults <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> /<span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> defaults <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> devpts /dev/pts devpts mode=<span class="hljs-number"><span class="hljs-number">0620</span></span>,gid=<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> usbdevfs /<span class="hljs-keyword"><span class="hljs-keyword">proc</span></span>/bus/usb usbdevfs noauto <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> tmpfs /run tmpfs mode=<span class="hljs-number"><span class="hljs-number">0755</span></span>,nodev,nosuid,strictatime <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> tmpfs /var/volatile tmpfs defaults <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  Se voc√™ n√£o criou a parti√ß√£o raiz a primeira, n√£o se esque√ßa de especificar o n√∫mero da parti√ß√£o desejada. </p><br><p>  Se voc√™ deixou a segunda parti√ß√£o FAT para obter dados do usu√°rio, precisa criar uma pasta para montar a parti√ß√£o nela </p><br><pre> <code class="bash hljs">mkdir /usr/share/trik</code> </pre> <br><p>  e escreva a se√ß√£o em <code>/etc/fstab</code> : </p><br><pre> <code class="bash hljs">/dev/mmcblk0p2 /usr/share/trik vfat defaults 0 0</code> </pre> <br><h1 id="etap-6-probuem-nashu-kashu">  Etapa 6. Tentamos nosso mingau </h1><br><p>  Ap√≥s configurar a imagem do sistema, voc√™ deve mont√°-la para instalar os m√≥dulos do kernel e o pr√≥prio kernel: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ,     (start) fdisk -l debian.img mount -o loop,offset=NNNN debian.img /mnt/debian</span></span></code> </pre> <br><p>  onde, NNNN = tamanho do setor * in√≠cio da se√ß√£o.  O tamanho padr√£o do setor √© 512 bytes. </p><br><p>  Tamb√©m montamos a distribui√ß√£o original: </p><br><pre> <code class="bash hljs">fdisk -l trik-distro.img mount -o loop,offset=NNNN trik-distro.img /mnt/trik-clean</code> </pre> <br><p>  N√≥s removemos o kernel do QEMU e seus m√≥dulos, como  eles n√£o s√£o destinados √† nossa plataforma.  Copiamos o novo kernel e m√≥dulos, assim como na distribui√ß√£o original. </p><br><pre> <code class="hljs powershell">rm <span class="hljs-literal"><span class="hljs-literal">-rf</span></span> /mnt/debian/boot/ rm <span class="hljs-literal"><span class="hljs-literal">-rf</span></span> /mnt/debian/lib/modules/<span class="hljs-number"><span class="hljs-number">3.2</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-literal"><span class="hljs-literal">-4</span></span><span class="hljs-literal"><span class="hljs-literal">-versatile</span></span> rm <span class="hljs-literal"><span class="hljs-literal">-rf</span></span> /mnt/debian/lib/modules/<span class="hljs-number"><span class="hljs-number">3.2</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span><span class="hljs-literal"><span class="hljs-literal">-versatile</span></span> mkdir /mnt/debian/boot/ cp arch/arm/boot/uImage /mnt/debian/boot/ make INSTALL_MOD_PATH=/mnt/debian modules_install</code> </pre> <br><p>  Necessitaremos de firmware para o m√≥dulo Wi-Fi, que est√° na distribui√ß√£o original na pasta / lib / firmware e no firmware Bluetooth que encontramos anteriormente. </p><br><pre> <code class="hljs ruby">cp /mnt/trik-clean/lib/firmware/* <span class="hljs-regexp"><span class="hljs-regexp">/mnt/debian</span></span><span class="hljs-regexp"><span class="hljs-regexp">/lib/firmware</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ cp TIInit_7.6.15.bts /mnt</span></span><span class="hljs-regexp"><span class="hljs-regexp">/debian/lib</span></span><span class="hljs-regexp"><span class="hljs-regexp">/firmware/</span></span></code> </pre> <br><p>  Desconecte as imagens de disco: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">umount</span></span> /mnt/trik-clean umount /mnt/debian</code> </pre> <br><p>  E comece a copiar a imagem para o cart√£o de mem√≥ria usando dd: </p><br><pre> <code class="hljs cs"><span class="hljs-meta"><span class="hljs-meta">#    ( ) lsblk dd </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">=debian.img of=/dev/sdX bs=4M</span></span></code> </pre> <br><h1 id="etap-7-finishnaya-pryamaya">  Etapa 7. A linha de chegada </h1><br><p>  N√≥s compilamos os programas para conectar o gamepad no novo sistema e instalamos o daemon sixad. </p><br><p>  Conectamos o gamepad via USB ao controlador e executamos o programa para criar um par: </p><br><pre> <code class="bash hljs">root@trik:~/bt<span class="hljs-comment"><span class="hljs-comment"># ./sixpair Current Bluetooth master: 78:**:**:**:**:b9 Setting master bd_addr to 78:**:**:**:**:b9</span></span></code> </pre> <br><p>  Quando o gamepad est√° conectado, nada acontece e o servi√ßo sixad √© silencioso: </p><br><pre> <code class="bash hljs">sixad-bin[2675]: started sixad-bin[2675]: sixad started, press the PS button now sixad-bin[2675]: unable to connect to sdp session</code> </pre> <br><p>  Mas a comunidade Raspberry Pi j√° fez uma "muleta" para consertar a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conex√£o</a> . </p><br><p>  N√≥s reconstru√≠mos o programa e nos alegramos. </p><br><pre> <code class="hljs powershell">sixad<span class="hljs-literal"><span class="hljs-literal">-bin</span></span>[<span class="hljs-number"><span class="hljs-number">2833</span></span>]: started sixad<span class="hljs-literal"><span class="hljs-literal">-bin</span></span>[<span class="hljs-number"><span class="hljs-number">2833</span></span>]: sixad started, press the PS button now sixad<span class="hljs-literal"><span class="hljs-literal">-bin</span></span>[<span class="hljs-number"><span class="hljs-number">2833</span></span>]: unable to connect to sdp session sixad<span class="hljs-literal"><span class="hljs-literal">-sixaxis</span></span>[<span class="hljs-number"><span class="hljs-number">2836</span></span>]: started sixad<span class="hljs-literal"><span class="hljs-literal">-sixaxis</span></span>[<span class="hljs-number"><span class="hljs-number">2836</span></span>]: Connected <span class="hljs-string"><span class="hljs-string">'PLAYSTATION(R)3 Controller (00:**:**:**:**:09)'</span></span> [<span class="hljs-type"><span class="hljs-type">Battery</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span>]</code> </pre> <br><p>  Agora o gamepad est√° dispon√≠vel para o sistema como um dispositivo de entrada e o programa jstest mostrar√° o status de todos os bot√µes e sensores anal√≥gicos: </p><br><pre> <code class="hljs apache"><span class="hljs-attribute"><span class="hljs-attribute">root</span></span>@trik:~# ls /dev/input/ by-path event0 event1 event2 event3 js0 js1 js2 mice root@trik:~# jstest --normal /dev/input/jsX Driver version is 2.1.0. Joystick (PLAYSTATION(R)3 Controller (00:**:**:**:**:09)) has 29 axes (X, Y, Z, Rx, Ry, Rz, Throttle, Rudder, Wheel, Gas, Brake, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, (null), (null), (null), (null), (null), (null), (null), (null)) and 17 buttons (Trigger, ThumbBtn, ThumbBtn2, TopBtn, TopBtn2, PinkieBtn, BaseBtn, BaseBtn2, BaseBtn3, BaseBtn4, BaseBtn5, BaseBtn6, BtnDead, BtnA, BtnB, BtnC, BtnX). Testing ... (interrupt to exit) Axes: 0: 0 1: 0 2: 0 3: 0 4: -7150 5: -7746 6:-32767 7: 0 8: 0 9: 0 10: 0 11: 0 12: 0 13: 0 14: 0 15: 0 16: 0 17: 0 18: 0 19: 0 20: 0 21: 0 22: 0 23: 0 24: 0 25: 0 26: 0 27: 0 28: 0 Buttons: 0:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 1:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 2:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 3:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 4:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 5:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 6:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 7:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 8:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 9:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 10:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 11:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 12:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 13:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 14:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 15:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 16:<span class="hljs-literal"><span class="hljs-literal">off</span></span></code> </pre> <br><p>  onde X √© o n√∫mero do dispositivo no sistema, por padr√£o - 2. Os n√∫meros de bot√µes e eixos podem ser vistos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><h1 id="ispolzuem-na-praktike">  Use na pr√°tica </h1><br><p>  V√≠deo mostrando o gamepad no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">YouTube</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Fotos da distribui√ß√£o</b> <div class="spoiler_text"><p>  Carregamento do kernel: <br><img src="https://habrastorage.org/webt/aj/mx/xt/ajmxxtarcapbe4hwfefj5-v83ws.jpeg"><br>  Terminal rodando no X11: <br><img src="https://habrastorage.org/webt/bi/gn/vk/bignvkyajckcuobz8rzgyf5priw.jpeg"></p><br><p><img src="https://habrastorage.org/webt/cp/6k/pu/cp6kpumd7uxcxnlyc3jg7mpmn2m.jpeg"><br>  E de acordo com a tradi√ß√£o: <br><img src="https://habrastorage.org/webt/9f/et/xk/9fetxkfu74mdacfatuwnaodrmj8.jpeg"></p><br><p><img src="https://habrastorage.org/webt/qw/mi/1h/qwmi1hncq77acchz8dfjfpzs334.jpeg"></p></div></div><br><h3 id="poleznye-ssylki">  Links √∫teis </h3><br><p>  Programas para conectar o gamepad Dualshock 3 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sixpair</a> e <a href="">sixad</a> . </p><br><p>  Para gamepads e outros dispositivos de entrada, existe uma biblioteca C leve - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">libenjoy</a> . </p><br><p>  O c√≥digo fonte do programa para controlar servomotores e motores √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o reposit√≥rio GitHub</a> . </p><br><p>  Todos os arquivos de configura√ß√£o do artigo para um kit de distribui√ß√£o improvisado s√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o reposit√≥rio GitHub</a> . </p><br><p>  A fonte do kernel √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o reposit√≥rio do GitHub</a> . </p><br><h1 id="interesnye-fakty-o-kontrollere">  Fatos interessantes sobre o controlador </h1><br><ul><li>  A especifica√ß√£o afirma que a RAM √© de 256 MB.  Mas se voc√™ executar o htop, ver√° que apenas 128 MB est√£o dispon√≠veis.  Isso √© limitado pelas op√ß√µes do kernel que podem ser exibidas no console do uBoot: </li></ul><br><pre> <code class="bash hljs">mem=128M console=ttyS1,115200n8 rw noinitrd rootwait root=/dev/mmcblk0p1 vt.global_cursor_default=0 consoleblank=0</code> </pre> <br><p>  O chip de mem√≥ria est√° marcado com 3PC22 D9MTD, fabricado pela Micron.  N√£o foi poss√≠vel encontrar informa√ß√µes sobre o volume atual. </p><br><ul><li>  O uBoot √© armazenado na mem√≥ria flash SPI na qual o kernel tamb√©m est√° conectado e n√£o √© usado.  Voc√™ pode tentar usar este local para suas tarefas ou copiar um novo kernel e reconfigurar o uBoot para us√°-lo. </li></ul><br><p>  Endere√ßos das imagens do dmesg: </p><br><pre> <code class="bash hljs">[ 11.598170] 0x000000000000-0x000000040000 : <span class="hljs-string"><span class="hljs-string">"uboot"</span></span> [ 11.642985] 0x000000040000-0x000000080000 : <span class="hljs-string"><span class="hljs-string">"uboot-env1"</span></span> [ 11.706256] 0x000000080000-0x0000000c0000 : <span class="hljs-string"><span class="hljs-string">"uboot-env2"</span></span> [ 11.761827] 0x0000000c0000-0x000000100000 : <span class="hljs-string"><span class="hljs-string">"config-periph"</span></span> [ 11.805129] 0x000000100000-0x000000400000 : <span class="hljs-string"><span class="hljs-string">"kernel"</span></span> [ 11.861864] 0x000000400000-0x000001000000 : <span class="hljs-string"><span class="hljs-string">"RootFS"</span></span></code> </pre> <br><ul><li>  A tela do controlador, embora pequena, na verdade possui um sensor resistivo.  Se o pr√≥prio sensor est√° conectado √© desconhecido. </li><li>  O Dualshock 3 possui LEDs no conector USB que mostram o n√∫mero do gamepad / joystick.  H√° um gamepad no v√≠deo, mas seu n√∫mero √© 3. Isso n√£o √© um erro, porque  existem mais dois "joysticks" no sistema: um aceler√¥metro e um girosc√≥pio. </li></ul><br><h1 id="problemy-voznikshie-pri-ispolzovanii">  Problemas encontrados ao usar </h1><br><ul><li>  √Äs vezes, o rob√¥ fica firme, sem desligar os servomotores, o que lhes permite mudar de posi√ß√£o com rela√ß√£o ao ru√≠do na linha de dados.  Isso foi visto mesmo em uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">distribui√ß√£o padr√£o</a> . </li><li>  A inclus√£o de controladores PWM √© diferente do que est√° escrito na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> .  Pelo menos em C puro, isso n√£o funcionou. </li><li>  √Äs vezes, o USB para de funcionar no Debian. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt415007/">https://habr.com/ru/post/pt415007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt414997/index.html">ML-Blitz: An√°lise das tarefas da primeira pr√©-eliminat√≥ria</a></li>
<li><a href="../pt414999/index.html">Watchman 3D e testador de termistor</a></li>
<li><a href="../pt415001/index.html">O operador do carro rob√≥tico do Uber, que abateu um ciclista, assistiu ao programa Voice no momento da colis√£o</a></li>
<li><a href="../pt415003/index.html">Upload irrestrito de arquivos em Apple.com</a></li>
<li><a href="../pt415005/index.html">Pain√©is solares, comandos de voz e corridas off-road: o presente e o futuro das bicicletas el√©tricas</a></li>
<li><a href="../pt415009/index.html">Quem √© o recrutador na Am√©rica do Norte - Parte 1</a></li>
<li><a href="../pt415011/index.html">Relat√≥rio do Club of Rome de 2018, cap√≠tulo 3.10: ‚ÄúImposto sobre batidas‚Äù</a></li>
<li><a href="../pt415015/index.html">Avalia√ß√£o de empregadores de TI em Nizhny Novgorod: um estudo das prefer√™ncias de estudantes de especialidades t√©cnicas</a></li>
<li><a href="../pt415017/index.html">Produto .NET que salva vidas</a></li>
<li><a href="../pt415019/index.html">Marketing. Quase complicado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>