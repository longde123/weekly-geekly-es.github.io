<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç∑ üëºüèΩ üßëüèº‚Äçü§ù‚Äçüßëüèº Para a quest√£o da TI üö¥üèΩ üìü üññüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúAgora eu vou te mostrar um retrato ... Hmm ... eu aviso que isso √© um retrato ... Enfim, por favor, trate-o como um retrato ... 

 Neste post, falare...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Para a quest√£o da TI</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451918/"> <b>‚ÄúAgora eu vou te mostrar um retrato ... Hmm ... eu aviso que isso √© um retrato ... Enfim, por favor, trate-o como um retrato ...</b> <br><br>  Neste post, falaremos sobre o desenvolvimento e a depura√ß√£o de programas para o CC1350 MK no ambiente de desenvolvimento do CCS recomendado pelo fabricante.  Os m√©ritos (e s√£o) e as desvantagens (e como sem elas) dos produtos acima ser√£o afetados.  N√£o haver√° capturas de tela no texto para mostrar (circulado) o local do √≠cone de compila√ß√£o no ambiente de programa√ß√£o integrado ou selecionar um arquivo em um diret√≥rio.  Reconhecendo a possibilidade fundamental de artigos em um estilo semelhante, tentarei focar em quest√µes conceituais, na esperan√ßa de que meu leitor seja capaz de descobrir os detalhes. <br><br>  O objetivo dessa obra, al√©m de compartilhar a experi√™ncia adquirida, √© uma tentativa de despertar inveja saud√°vel entre os fabricantes dom√©sticos de MK, que s√£o concorrentes diretos da TI ("no pa√≠s onde prosperamos") - a tarefa √© francamente ingrata, mas eles dizem que uma pedra desgasta uma gota. <br><a name="habracut"></a><br>  Enfatizarei imediatamente que ser√° apenas sobre o Windows (al√©m disso, apenas) vers√£o 7, embora o site da TI tenha uma op√ß√£o para Mac e Linux, eu ainda n√£o os testei, estou pronto para acreditar que tudo n√£o √© t√£o legal por l√°, mas por que pensar sobre o mal (ou vice-versa, tudo √© √≥timo l√°, mas ent√£o por que inveja). <br><br>  Ent√£o, o que o site da TI nos ensina - para come√ßar a trabalhar com os m√≥dulos de avalia√ß√£o, voc√™ precisa executar tr√™s etapas necess√°rias: <br><br><ol><li>  Compre m√≥dulos de avalia√ß√£o - conclu√≠dos. <br><br>  Nota sobre as margens (PNP): Voc√™ tamb√©m precisar√° fazer isso, porque no ambiente de programa√ß√£o em quest√£o eu pessoalmente (infelizmente) n√£o consegui encontrar a capacidade de emular hardware para depura√ß√£o, pelo menos para onde eu estava procurando. </li><li>  Instale o ambiente de desenvolvimento - fa√ßa o download, execute o instalador, tudo deu certo.  Conectamos o m√≥dulo de avalia√ß√£o ao USB - a lenha aumenta por si s√≥ e tudo deu certo novamente - feito.  Ao tentar programar o dispositivo, recebemos uma mensagem sobre a necessidade de atualizar o firmware, concordamos e novamente tudo acabou.  Em geral, n√£o h√° nada sobre o que escrever se sempre e em toda parte ... </li><li>  V√° e estude o curso TI SimpleLink Academy 3.10.01 para o SimpleLink CC13x0 SDK 3.10 - uma sugest√£o estranha, parece que me ensina - apenas para estragar, mas que assim seja, eu abro o link correspondente e estou atordoado - quanto est√° empacotado l√°. </li></ol><br>  Aqui vemos materiais de treinamento sobre como trabalhar com drivers de hardware SYS / BIOS e com o sistema operacional TI-RTOS e sobre como usar a pilha de rede NDK, incluindo USB, sobre protocolos sem fio e muitos outros aspectos do trabalho com representantes de v√°rias fam√≠lias MK produzidas pela empresa.  E toda essa riqueza √© acompanhada de exemplos prontos para uso, e se levarmos em conta a presen√ßa de manuais do usu√°rio e descri√ß√µes de m√≥dulos, talvez n√£o haja mais o que desejar.  Mas tamb√©m existem utilit√°rios que facilitam o trabalho de prepara√ß√£o e configura√ß√£o do c√≥digo do programa, piscando e depurando de v√°rias maneiras, e essa riqueza tamb√©m √© bastante documentada. <br><br>  Pnp: se algu√©m estiver inclinado a considerar esse material como publicidade em rela√ß√£o √† empresa, seus produtos e sistema de programa√ß√£o, provavelmente estar√° certo e estou realmente muito impressionado com o volume de software detectado.  Sua qualidade ser√° discutida mais detalhadamente e, espero, minhas suspeitas de vi√©s ser√£o dissipadas, n√£o fiquei completamente cego pelo sentimento e continuo vendo perfeitamente as falhas do objeto de descri√ß√£o, ent√£o esse n√£o √© o amor da juventude, mas um sentimento s√©rio de um especialista adulto.  Estou com medo de imaginar a quantidade de custos de material necess√°rios para criar e manter esse volume de software e documenta√ß√£o para isso, mas obviamente isso n√£o foi feito em um m√™s e a empresa provavelmente entende o que est√° fazendo. <br><br>  Tudo bem, at√© adiarmos o estudo dos materiais para mais tarde, compreenderemos tudo "ao longo do caminho com a pepita" e abriremos o CCS com ousadia.  Ele implementa o conceito de √°reas de trabalho, recebidas do pai - Eclipse.  Pessoalmente, o conceito de projeto est√° mais pr√≥ximo de mim, mas ningu√©m nos incomoda para manter exatamente um projeto no espa√ßo, ent√£o vamos seguir em frente. <br><br>  Mas ent√£o as coisas ficam um pouco piores - abrimos o espa√ßo de trabalho (RP) para nossa placa de depura√ß√£o e vemos muitos projetos (como regra, em duas vers√µes) no RTOS e no "ferro a descoberto").  Como eu disse anteriormente, isso n√£o √© crime, mas o fato de muitos projetos conterem os mesmos arquivos com m√≥dulos de software id√™nticos n√£o √© nada bom.  O c√≥digo √© duplicado v√°rias vezes e as altera√ß√µes de suporte tornam-se uma tarefa n√£o trivial.  Sim, com essa solu√ß√£o, √© muito mais f√°cil transferir o projeto simplesmente copiando o diret√≥rio, mas, para isso, existe a exporta√ß√£o do projeto, e ele √© muito bem implementado.  Os links para arquivos na √°rvore do projeto s√£o adequadamente suportados, portanto, a decis√£o de incluir os arquivos nos exemplos fornecidos n√£o pode ser considerada satisfat√≥ria. <br><br>  Continuamos nossa pesquisa - come√ßaremos a trabalhar com um projeto conclu√≠do, mas sem piscar um LED, embora haja dois deles na placa de depura√ß√£o, mas trabalhando com uma porta serial, um exemplo de uartecho pronto.  Criamos um novo PR, inclu√≠mos o projeto de seu interesse e ... nada resulta disso, fica claro na mensagem que √© necess√°rio incluir um projeto relacionado no PR.  N√£o est√° muito claro por que isso √© feito, mas n√£o √© dif√≠cil atender aos requisitos do ambiente, ap√≥s o qual o projeto come√ßa a ser montado. <br><br>  Pnp: na m√°quina dom√©stica, usei o comando Importar projeto e todas as inclus√µes necess√°rias aconteceram por conta pr√≥pria.  Onde s√£o indicados exatamente projetos relacionados, n√£o sei, deixemos a an√°lise desse aspecto para o futuro. <br><br>  N√≥s compilamos, exibimos flash e iniciamos a depura√ß√£o.  Encontramos um fen√¥meno interessante - a execu√ß√£o passo a passo n√£o √© exibida adequadamente quando se considera a biblioteca de trabalho com uma porta serial - custos de otimiza√ß√£o.  Desativamos a otimiza√ß√£o nas configura√ß√µes do compilador (quais configura√ß√µes n√£o existem, existem realmente pessoas que as conhecem e, al√©m disso, as utilizam), montamos o projeto novamente - e nada muda.  Acontece que apenas esses arquivos s√£o inclu√≠dos na √°rvore do projeto, pelo menos na forma de links.  Adicionamos links √†s fontes da biblioteca e, ap√≥s a reconstru√ß√£o, tudo √© depurado corretamente (desde que tenhamos a op√ß√£o de gerar as informa√ß√µes de depura√ß√£o ativadas). <br><br>  Pnp: mas encontrei op√ß√µes para habilitar a verifica√ß√£o de conformidade com o MISRA-C. <br><br>  Pnp: outra maneira √© usar o comando "Limpar ..." na montagem subsequente, por algum motivo, o comando "Criar tudo" n√£o afeta o projeto associado. <br><br>  Ent√£o descobrimos que nem tudo √© sempre depurado normalmente, √†s vezes nos encontramos em √°reas de c√≥digo de m√°quina para as quais o compilador n√£o encontra a fonte.  Como o ambiente de programa√ß√£o nos fornece todos os arquivos necess√°rios para o trabalho - o resultado do pr√©-processador, o c√≥digo do montador e a placa do vinculador (voc√™ s√≥ precisa se lembrar de ativar as op√ß√µes correspondentes), passamos para o √∫ltimo.  Encontramos duas √°reas do c√≥digo do programa - come√ßando em 0x0000.  e a partir de 0x1000.  (Arquiteturas de 32 bits s√£o boas para todos, mas a escrita de endere√ßos n√£o √© o ponto forte).  Voltamos √† documenta√ß√£o do microcircuito e descobrimos que h√° uma √°rea de ROM mapeada especificamente para 0x1000. E ela cont√©m a parte interna das bibliotecas.  Argumenta-se que o uso de rotinas melhora o desempenho e reduz o consumo em compara√ß√£o com o espa√ßo de endere√ßo 0x000.  Enquanto dominamos o MK, n√£o estamos t√£o interessados ‚Äã‚Äãnos √∫ltimos par√¢metros, mas a conveni√™ncia da depura√ß√£o √© crucial.  Voc√™ pode desativar o uso da ROM (mas para nossos prop√≥sitos) configurando a op√ß√£o NO_ROM para o compilador, o que fazemos e remontamos o projeto. <br><br>  Pnp: alternar para uma sub-rotina na ROM parece muito engra√ßado - n√£o h√° longa transi√ß√£o no sistema de comando, portanto a transi√ß√£o √© realizada primeiro com um retorno ao ponto intermedi√°rio na √°rea de endere√ßo baixo (0x0000), e j√° existe o comando de inicializa√ß√£o do PC, cujos par√¢metros n√£o s√£o reconhecidos pelo desmontador.  Algo em que n√£o consigo acreditar, como se com esses custos indiretos voc√™ pudesse ganhar em velocidade, embora por rotinas longas - por que n√£o. <br><br>  A prop√≥sito, uma pergunta interessante √© como √© geralmente garantido que o conte√∫do da ROM corresponda aos c√≥digos-fonte gentilmente fornecidos pela empresa.  Eu posso sugerir imediatamente um mecanismo para incorporar fun√ß√µes adicionais (√© claro, depura√ß√£o e servi√ßo) na ROM, que para o usu√°rio - o programador MK ser√° completamente invis√≠vel.  E, pessoalmente, n√£o tenho d√∫vidas de que os desenvolvedores do chip tamb√©m conhecem muitos outros mecanismos que implementam essa funcionalidade, mas encerraremos o ataque de paran√≥ia. <br><br>  Por outro lado, s√≥ posso dar boas-vindas √† apar√™ncia de um an√°logo do BIOS, porque, a longo prazo, isso tornar√° o sonho dos desenvolvedores uma portabilidade real de c√≥digo entre diferentes fam√≠lias MK, com um n√∫cleo em realidade.  Tamb√©m observamos a peculiaridade da implementa√ß√£o da intera√ß√£o com m√≥dulos de software "incorporados".  Se nas primeiras tentativas de criar um mecanismo semelhante implementado nos modelos TivaC, havia um supervisor de chamada que foi acessado com o n√∫mero do grupo e o n√∫mero do ponto de entrada no subprograma, o que causou uma sobrecarga significativa, ent√£o aqui a resolu√ß√£o das comunica√ß√µes est√° no n√≠vel do vinculador devido a nomes duplos de fun√ß√µes e S√£o inseridos saltos longos diretos para sub-rotinas na ROM.  Isso √© muito mais r√°pido na execu√ß√£o, mas requer uma recompila√ß√£o do projeto ao alterar o modelo de uso. <br><br>  Agora que estamos totalmente preparados para a depura√ß√£o conveniente, retornamos ao nosso projeto e come√ßamos a depurar silenciosamente o programa com acesso aos c√≥digos-fonte dos m√≥dulos (bem, foi o que eu pensei ...), o que nos permitir√° formar uma opini√£o sobre a qualidade desses textos.  O projeto em estudo implementa um espelho do canal de comunica√ß√£o serial e √© extremamente conveniente para fins de treinamento.  Obviamente, escolhemos a op√ß√£o usando o RTOS, n√£o vejo o menor motivo para n√£o us√°-lo em nossa configura√ß√£o (muita mem√≥ria e mem√≥ria de programa). <br><br>  Imediatamente, observamos que os c√≥digos-fonte s√£o apresentados em C, geralmente n√£o √© muito conveniente, muitas constru√ß√µes de linguagem parecem pesadas em compara√ß√£o com seus an√°logos nas vantagens, mas os criadores estavam mais preocupados com a compatibilidade de c√≥digo do que com o a√ß√∫car sint√°tico.  Embora seja poss√≠vel criar uma vers√£o C ++ das bibliotecas, a compila√ß√£o condicional √© conhecida h√° muito tempo e √© usada em todos os lugares, mas isso implica custos adicionais de material.  Certamente, a ger√™ncia da empresa sabe o que est√° fazendo, e meus coment√°rios s√£o uma esp√©cie de "an√°lise astuta", mas parece-me que eu tamb√©m tenho o direito de opinar. <br><br>  Eu tamb√©m conhe√ßo a abordagem oposta, quando a biblioteca √© projetada usando as ferramentas C ++ mais recentes, e quando perguntado o que fazer para os desenvolvedores que usam compiladores que n√£o atendem √†s especifica√ß√µes mais recentes, a resposta perfeita √© atualizar para novas vers√µes ou n√£o nesta biblioteca (eu recomendo fortemente a segunda op√ß√£o nesses casos).  Minha opini√£o pessoal √© que, se realmente queremos que nosso produto seja usado (e a TI o deseja claramente, e n√£o faz da biblioteca o princ√≠pio de "me deixar aqui, aqui est√° um novo tambor para voc√™"), sua abordagem √© certamente verdadeira. <br><br>  O c√≥digo fonte do programa parece cl√°ssico - inicializando o ambiente de hardware e software, criando tarefas e iniciando um sheduler no m√≥dulo principal, o texto da tarefa em um m√≥dulo de compila√ß√£o separado.  No exemplo em considera√ß√£o, a tarefa √© exatamente uma - mainThread, o objetivo n√£o √© totalmente claro a partir do nome e tamb√©m, o que me confunde um pouco - o nome do arquivo que cont√©m o texto de origem n√£o coincide com o nome da fun√ß√£o (uartecho.c - embora o nome esteja falando aqui), bem, sim A pesquisa no ambiente de programa√ß√£o √© implementada de maneira padr√£o (menu de contexto ou F3 no nome da entidade) e n√£o h√° problema com isso. <br><br>  O processo de configura√ß√£o dos par√¢metros da tarefa antes do in√≠cio √© bastante esperado: <br><br><ol><li>  criar uma estrutura de par√¢metros (local, √© claro), </li><li>  d√™ a ele valores padr√£o, </li><li>  definir par√¢metros diferentes do padr√£o e </li><li>  use a estrutura ao criar a tarefa. </li></ol><br>  Apesar do tipo de naturalidade dessas opera√ß√µes, n√£o √© √≥bvio para todos os autores de bibliotecas, e vi v√°rias implementa√ß√µes nas quais, por exemplo, n√£o havia o est√°gio 2, que levou a um comportamento de programa engra√ßado (para um observador externo, n√£o para um programador).  Nesse caso, est√° tudo bem, a √∫nica quest√£o que surgiu √© por que os valores padr√£o n√£o s√£o constantes, provavelmente esse √© um legado do passado danado. <br><br>  PNP: no conhecido FREE-RTOS, uma abordagem ligeiramente diferente √© adotada com os par√¢metros da tarefa indicados diretamente no corpo da chamada da API da fun√ß√£o de cria√ß√£o de tarefas.  Os pr√≥s e contras dessas abordagens s√£o os seguintes: <br><br><ol><li>  + permite que voc√™ n√£o especifique explicitamente par√¢metros que correspondam aos valores padr√£o, + n√£o requer que se lembre da ordem dos par√¢metros, -mais detalhados, -mais custos de mem√≥ria, -Voc√™ precisa conhecer os par√¢metros padr√£o, -cria um objeto intermedi√°rio nomeado </li><li>  - requer a especifica√ß√£o de todos os par√¢metros,-exige lembrar a ordem dos par√¢metros, + √© mais compacto, + requer menos mem√≥ria, + n√£o requer objetos intermedi√°rios nomeados. <br><br>  Existe um terceiro m√©todo, defendido pelo autor deste post (no estilo do TURBO), que tem seu pr√≥prio conjunto </li><li>  + permite que voc√™ n√£o especifique explicitamente par√¢metros que correspondam ao padr√£o, + n√£o requer que se lembre da ordem dos par√¢metros, -m√∫ltiplos verbais, custos de mem√≥ria maiores, -Voc√™ precisa conhecer os par√¢metros padr√£o, + trabalha no estilo lambda, + dificulta a implementa√ß√£o de erros padr√£o +, parece um pouco estranho por causa dos muitos colchetes certos. </li></ol><br>  Bem, h√° outra quarta op√ß√£o, sem quaisquer desvantagens, mas exigindo C ++ n√£o inferior a 14 - lambemos os l√°bios e passamos. <br><br>  Iniciamos a depura√ß√£o, executamos o programa e abrimos uma das duas portas seriais fornecidas pela placa de depura√ß√£o na janela do terminal fornecida pelo ambiente de programa√ß√£o.  Qual das duas portas (uma est√° depurando, provavelmente a segunda √© o usu√°rio, voc√™ pode ver seus n√∫meros no sistema) √© dif√≠cil dizer com anteced√™ncia, √†s vezes a mais nova, √†s vezes a mais antiga, pelo menos n√£o muda quando voc√™ reconecta a placa, para que possa escrev√™-la no quadro.  Bem, mais um inconveniente: os terminais abertos n√£o s√£o salvos com o projeto e n√£o s√£o restaurados quando voc√™ abre uma sess√£o de depura√ß√£o, apesar de n√£o fecharem quando voc√™ sai.  Verificamos a opera√ß√£o do programa e descobrimos imediatamente mais uma desvantagem - o terminal n√£o pode ser configurado, por exemplo, ele basicamente funciona no estilo Unix com um fechamento / r, perdi o contato com esse minimalismo, embora ningu√©m nos incomode com o uso de um programa de terminal externo. <br><br>  Pnp: Observamos mais um recurso da depura√ß√£o, bem, isso √© verdade para qualquer ambiente de desenvolvimento - quando alternamos tarefas com um sheduler, perdemos o foco do foco, os pontos de interrup√ß√£o nos ajudar√£o a resolver esse problema. <br><br>  Para come√ßar, considere o processo de cria√ß√£o de uma inst√¢ncia de uma porta serial - tudo parece padr√£o aqui, uma estrutura √© usada, cujos campos s√£o atribu√≠dos aos par√¢metros necess√°rios do objeto.  Observe que, nos profissionais, temos a oportunidade, completamente ausente em C, de ocultar completamente toda a inicializa√ß√£o "por baixo do cap√¥", mas eu j√° expressei poss√≠veis argumentos a favor da segunda solu√ß√£o.  Existe uma fun√ß√£o para inicializar a estrutura de ajuste, e isso √© bom (por mais paradoxal que pare√ßa, essa fun√ß√£o n√£o parece obrigat√≥ria para os autores de algumas bibliotecas).  Nesse ponto da hist√≥ria, a lua de mel termina e a vida comum <strike>(conjugal)</strike> come√ßa. <br><br>  Um estudo cuidadoso das fontes mostra que nem tudo √© t√£o bom.  Qual √© o problema - a fun√ß√£o de inicializa√ß√£o copia os valores padr√£o do objeto que est√° na regi√£o constante em nossa estrutura de controle, e isso √© maravilhoso, mas por algum motivo: <br><br><ol><li>  o objeto √© global, embora seja usado pela √∫nica fun√ß√£o para inicializar os par√¢metros (uma vez uma pr√°tica semelhante custa √† Toyota uma quantia decente) - bem, √© f√°cil adicionar a diretiva est√°tica; </li><li>  o objeto de controle √© nomeado; em C, n√£o h√° uma solu√ß√£o bonita para esse problema, ou melhor, existe uma solu√ß√£o com uma c√≥pia an√¥nima e eu a forneci em um longo per√≠odo de tempo, mas muitos colchetes corretos n√£o permitem chamar essa op√ß√£o de realmente bonita; al√©m disso, existe uma solu√ß√£o de beleza incr√≠vel, mas o que sonhar com um sonho; </li><li>  todos os campos do objeto s√£o claramente redundantes em profundidade de bits, mesmo os campos de bits (enumera√ß√µes de dois valores poss√≠veis) s√£o armazenados em palavras de 32 bits; </li><li>  constantes de modo enumeradas s√£o definidas na forma de define, o que torna imposs√≠vel verificar no est√°gio de compila√ß√£o e necess√°rio em tempo de execu√ß√£o; </li><li>  repetindo uma se√ß√£o de um loop infinito em diferentes locais de poss√≠veis falhas, seria muito mais correto fazer um manipulador (nesse caso vazio); </li><li>  Bem, todas as opera√ß√µes para configurar e iniciar uma tarefa podem (e devem) estar ocultas em uma fun√ß√£o ou at√© em uma macro. </li></ol><br>  Mas a inicializa√ß√£o do buffer de recebimento √© bem feita - usamos mem√≥ria pr√©-reservada, nenhuma manipula√ß√£o do heap, a cadeia de chamadas √© um pouco complicada, mas tudo √© leg√≠vel. <br><br>  Pnp: na janela de depura√ß√£o, diante de nossos olhos, a pilha de chamadas, tudo √© feito como deveria e profundamente - respeito e respeito.  A √∫nica coisa surpreendente √© uma tentativa de ocultar essa janela leva ao fim da sess√£o de depura√ß√£o. <br><br>  Bem, e mais uma decis√£o inesperada - definir o n√∫mero poss√≠vel de objetos na enumera√ß√£o, para portas seriais e para esta placa de depura√ß√£o igual a 1, no estilo <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> CC1310_LAUNCHXL_UARTName { CC1310_LAUNCHXL_UART0 = <span class="hljs-number"><span class="hljs-number">0</span></span>, CC1310_LAUNCHXL_UARTCOUNT } CC1310_LAUNCHXL_UARTName;</code> </pre> <br>  Essas solu√ß√µes s√£o padr√£o para transfer√™ncias reais, mas para a descri√ß√£o de objetos de hardware - e eu n√£o sabia que isso √© poss√≠vel, embora funcione para mim.  Terminamos a inicializa√ß√£o do ferro, vamos seguir em frente. <br><br>  Em uma tarefa em execu√ß√£o, observamos um loop infinito cl√°ssico no qual os dados de uma porta serial s√£o lidos pela fun√ß√£o <pre> <code class="cpp hljs">UART_read(uart, &amp;input, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre>  e imediatamente enviado de volta por fun√ß√£o <pre> <code class="cpp hljs">UART_write(uart, &amp;input, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre>  .  Vamos para o primeiro e ver uma tentativa de ler caracteres do buffer de recebimento <pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (handle-&gt;fxnTablePtr-&gt;readPollingFxn(handle, buffer, size))</code> </pre>  (como eu odeio essas coisas, mas em C √© simplesmente imposs√≠vel de outra maneira), nos aprofundamos e nos encontramos em UARTCC26XX_read e, a partir disso, entramos na implementa√ß√£o do buffer de anel - uma fun√ß√£o <pre> <code class="cpp hljs">RingBuf_get(&amp;object-&gt;ringBuffer, &amp;readIn)</code> </pre>  .  Aqui, a vida comum entra em uma fase aguda. <br><br>  Eu n√£o queria dizer que n√£o gostei desse m√≥dulo em particular (o arquivo ringbuf.c), ele foi escrito de maneira horr√≠vel e pessoalmente eu teria expulsado o lugar de uma empresa t√£o respeitada de autores desta parte com vergonha (voc√™ ainda pode me tomar no lugar deles, mas eu tenho medo que o n√≠vel salarial de nossos colegas indianos n√£o combina comigo), mas eu provavelmente n√£o sei o qu√™.  Assista suas m√£os: <br><br>  1) o re-roll de ponteiros de leitura / grava√ß√£o √© implementado pelo restante da divis√£o <br><br><pre> <code class="cpp hljs">object-&gt;tail = (object-&gt;tail + <span class="hljs-number"><span class="hljs-number">1</span></span>) % object-&gt;length;</code> </pre> <br>  e n√£o h√° otimiza√ß√µes do compilador ao executar essa opera√ß√£o, como sobrepor uma m√°scara de bit, j√° que o comprimento do buffer n√£o √© constante.  Sim, este MK tem uma opera√ß√£o de divis√£o de hardware e √© bem r√°pido (escrevi sobre isso), mas ainda assim nunca leva 2 ciclos de clock, como na implementa√ß√£o correta com relan√ßamento honesto (e escrevi sobre isso tamb√©m), <br><br>  Pnp: vi recentemente uma descri√ß√£o da nova arquitetura M7 na implementa√ß√£o e n√£o me lembro de ningu√©m; portanto, por algum motivo, a divis√£o de 32 por 32 come√ßou a ser executada em 2-12 ciclos em vez de 2-7.  Ou isso √© um erro de tradu√ß√£o ou ... nem sei o que pensar. <br><br>  2) al√©m disso, esse fragmento de c√≥digo √© repetido em mais de um local - macros e linhas para wimps, regra ctrl + C e ctrl + V, o princ√≠pio DRY atravessa a floresta, <br><br>  3) foi implementado um contador completamente redundante de locais de reserva preenchidos, o que implica a seguinte desvantagem, <br><br>  4) se√ß√µes cr√≠ticas em leitura e escrita.  Bem, ainda posso acreditar que os autores deste m√≥dulo n√£o leem minhas postagens no Habr√© (embora esse comportamento seja inaceit√°vel para profissionais da √°rea de firmware), mas eles devem estar familiarizados com o Livro do Mustang, pois esse problema √© examinado em detalhes, <br><br>  5) como uma cereja no bolo, foi introduzido um indicador do tamanho m√°ximo do buffer, al√©m disso, com um nome muito distorcido e uma descri√ß√£o completamente ausente (o √∫ltimo se aplica geralmente a todo o m√≥dulo).  N√£o excluo que essa op√ß√£o pode ser √∫til para depura√ß√£o, mas por que arrast√°-la para a vers√£o - temos algum ciclo de processador com a RAM? <br><br>  6) ao mesmo tempo, o processamento de buffer overflow est√° completamente ausente (h√° um sinal de retorno -1 sobre essa situa√ß√£o) - mesmo no Arduino, deixaremos de lado a qualidade desse processamento, mas sua aus√™ncia √© ainda pior.  Ou os autores foram inspirados pelo fato conhecido de que quaisquer suposi√ß√µes s√£o verdadeiras em rela√ß√£o a um conjunto relativamente vazio, incluindo o fato de que ele n√£o est√° vazio? <br><br>  Em geral, meus coment√°rios s√£o totalmente consistentes com a primeira linha do desmotivador sobre o t√≥pico de revis√£o de c√≥digo "10 linhas de c√≥digo - 10 coment√°rios". <br><br>  A prop√≥sito, o pen√∫ltimo das defici√™ncias observadas nos faz pensar em coisas mais globais - mas como implementamos a classe base para poder realizar sua profunda modifica√ß√£o?  Proteger todos os campos √© uma id√©ia duvidosa (embora provavelmente seja a √∫nica correta), inserir uma chamada de fun√ß√µes amig√°veis ‚Äã‚Äãnos herdeiros √© muito parecido com muletas.  Se, neste caso em particular, houver uma resposta simples para a quest√£o de introduzir um indicador de plenitude do buffer - uma classe gerada com escrita e leitura sobrepostas e um contador adicional, implemente a leitura sem avan√ßar o buffer (como neste caso) ou substituindo o √∫ltimo caractere colocado (eu vi esse implementa√ß√£o do buffer de anel) voc√™ n√£o pode prescindir do acesso aos dados internos da classe pai. <br><br>  Ao mesmo tempo, n√£o h√° queixas sobre a implementa√ß√£o de realmente ler da interface serial - a entrada est√° bloqueando, na aus√™ncia de um n√∫mero suficiente de caracteres no buffer de recebimento, um sem√°foro √© engatilhado e o controle √© transferido para o sheduler - tudo √© implementado com precis√£o e corretamente.  Pessoalmente, n√£o gosto muito de controlar o equipamento em um procedimento de uso geral, mas isso reduz o aninhamento de procedimentos e o √≠ndice de complexidade ciclom√°tica, independentemente do significado. <br><br>  Vamos agora prestar aten√ß√£o √† transmiss√£o dos dados recebidos para o canal serial, pois ao criar o objeto, ele foi fornecido com apenas um buffer de anel - o receptor.  De fato, o buffer interno do hardware √© usado para transmitir caracteres e, quando √© preenchido, a espera pela prontid√£o √© inserida (pelo menos no modo de opera√ß√£o de bloqueio).  Eu n√£o posso me ajudar, para n√£o criticar o estilo das fun√ß√µes correspondentes: 1) por algum motivo, o objeto tem um ponteiro generalizado, que dentro da fun√ß√£o constantemente se transforma em um ponteiro para caracteres <pre> <code class="cpp hljs">*(<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)object-&gt;writeBuf);</code> </pre>  2) a l√≥gica do trabalho √© completamente opaca e um pouco confusa.  Mas tudo isso n√£o √© t√£o importante, porque permanece oculto ao usu√°rio e "n√£o afeta a velocidade m√°xima". <br><br>  No processo de pesquisa, encontramos mais um recurso - n√£o vemos o c√≥digo fonte de algumas fun√ß√µes internas no modo de depura√ß√£o - isso ocorre devido a uma altera√ß√£o de nomes para diferentes op√ß√µes de compila√ß√£o (ROM / NO_ROM).  Substitua o arquivo de origem necess√°rio (C: \ Jenkins \ jobs \ FWGroup-DriverLib \ espa√ßo de trabalho \ modules \ output \ cc13xx_cha_2_0_ext_ driver_ib \ bin \ ccs /./../../../ driverlib / uart.c--) Eu falhei (mas realmente n√£o tentei), embora tenha encontrado a fonte (√© claro, no arquivo uart.c, obrigado, capit√£o), felizmente, esse fragmento √© simples e √© f√°cil identificar o c√≥digo do assembler com o c√≥digo-fonte em C (especialmente se voc√™ conhece os recursos da equipe do ITxxx).  N√£o sei como resolver esse problema para bibliotecas com fun√ß√µes complexas, pensaremos quando surgir a necessidade. <br><br>  E, finalmente, uma pequena observa√ß√£o - estou pronto para acreditar que o hardware da implementa√ß√£o do canal serial para os modelos MK CC13x0 √© o mesmo do CC26x0, e a duplica√ß√£o do conte√∫do de um arquivo chamado UARTCC26XX.c --- n√£o pode ser chamada de solu√ß√£o certa, mas a cria√ß√£o de um arquivo de defini√ß√£o intermedi√°ria com inclus√£o Eu gostaria do arquivo de origem, substituindo as fun√ß√µes e o coment√°rio correspondente, pois isso tornaria o programa mais compreens√≠vel, e isso sempre deve ser bem-vindo, vout. <br><br>  Portanto, o caso de teste funciona, aprendemos muito sobre a estrutura interna das bibliotecas padr√£o, notamos seus pontos fortes e n√£o aspectos t√£o bons. Na conclus√£o da revis√£o, tentaremos encontrar a resposta para a pergunta que o programador geralmente se preocupa no dilema ‚ÄúSO ou n√£o SO‚Äù - tempo de mudan√ßa de contexto.  Duas maneiras s√£o poss√≠veis aqui: 1) a considera√ß√£o do c√≥digo fonte √© bastante te√≥rica, requer um n√≠vel de imers√£o no assunto que n√£o estou pronto para demonstrar e 2) um experimento pr√°tico.  Obviamente, o segundo m√©todo, diferentemente do primeiro, n√£o fornece resultados absolutamente corretos, mas ‚Äúa verdade √© sempre concreta‚Äù e os dados obtidos podem ser considerados adequados se as medi√ß√µes forem organizadas corretamente. <br><br>  Para come√ßar, para estimar o tempo de comuta√ß√£o, precisamos aprender como avaliar o tempo geral de execu√ß√£o de v√°rios fragmentos de programa.  Nesta arquitetura, existe um m√≥dulo de depura√ß√£o, parte do qual √© um contador do sistema.  As informa√ß√µes sobre este m√≥dulo s√£o bastante acess√≠veis, mas o diabo, como sempre, est√° oculto nos detalhes.  Primeiro, vamos tentar configurar o modo necess√°rio com as al√ßas diretamente atrav√©s do acesso aos registradores.  N√≥s encontramos rapidamente o bloco de registro CPU_DWT e nele encontramos o contador CYCCNT em si e o registro de controle CTRL com o bit CYCCNTENA.  Naturalmente, ou, como dizem, √© claro, nada aconteceu e o site da ARM tem uma resposta para a pergunta por que - √© necess√°rio ativar o m√≥dulo de depura√ß√£o com o bit TRCENA no registro do DEMCR.  Mas o √∫ltimo registro n√£o √© t√£o simples - no bloco DWT n√£o existe, em outros blocos √© pregui√ßoso pesquisar - eles s√£o bastante longos, mas n√£o encontrei nenhuma pesquisa por nome na janela do registro (mas seria bom t√™-lo).  Entramos na janela de mem√≥ria, inserimos o endere√ßo do registro (√© conhecido por n√≥s a partir da data) (a prop√≥sito, por algum motivo, o formato hexadecimal do endere√ßo n√£o √© o padr√£o, voc√™ precisa adicionar o prefixo 0x com canetas) e, de repente, vemos uma c√©lula de mem√≥ria nomeada com o nome CPU_CSC_DEMCR.  √â engra√ßado, para dizer o m√≠nimo, por que a empresa renomeou os registros em compara√ß√£o com os nomes propostos pelo licenciante da arquitetura, provavelmente era necess√°rio.  E exatamente, no bloco de registros CPU_CSC, encontramos nosso registro, configuramos o bit desejado nele, retornamos ao contador, ativamos e tudo funcionou. <br><br>  Pnp: ainda existe uma pesquisa por nome, √© chamada (naturalmente) pela combina√ß√£o Ctrl-F, existe apenas no menu de contexto, mas no habitual √© cancelada, pe√ßo desculpas aos desenvolvedores. <br><br>  Imediatamente, noto outra desvantagem da janela de mem√≥ria - a impress√£o do conte√∫do √© interrompida indicando as c√©lulas nomeadas, o que torna a sa√≠da rasgada e n√£o segmentada em 16 (8,32, 64, substitui as necess√°rias) palavras.  Al√©m disso, o formato de sa√≠da muda quando a janela √© redimensionada.  Talvez tudo isso possa ser configurado conforme as necessidades do usu√°rio, mas, com base em minha pr√≥pria experi√™ncia (e de que outra forma devo proceder), declaro que a configura√ß√£o do formato de sa√≠da da janela de exibi√ß√£o de mem√≥ria n√£o se aplica a solu√ß√µes intuitivamente √≥bvias.  Sou totalmente a favor de ativar um recurso t√£o conveniente como exibir √°reas de mem√≥ria nomeadas na janela de visualiza√ß√£o; caso contr√°rio, muitos usu√°rios nunca saberiam sobre isso, mas tamb√©m √© preciso ter cuidado com aqueles que desejam desativ√°-lo conscientemente. <br><br>  A prop√≥sito, eu n√£o abandonaria completamente a possibilidade de criar macros (ou scripts) para trabalhar com o ambiente, porque tinha que fazer essa configura√ß√£o de registro (para permitir a medi√ß√£o do tempo) todas as vezes ap√≥s a redefini√ß√£o do MK, porque considero a corre√ß√£o de c√≥digo inserindo manipula√ß√µes de registro para fins de depura√ß√£o n√£o muito correto.  Por√©m, embora eu nunca tenha encontrado macros, o trabalho com registros pode ser bastante simplificado devido ao fato de que registros individuais (necess√°rios) podem ser inclu√≠dos na janela de express√£o, facilitando e agilizando significativamente o trabalho com eles. <br><br>  Para enfatizar que o sentimento do engenheiro pela fam√≠lia MK n√£o se acalmou (caso contr√°rio, discuto aspectos diferentes do ambiente de desenvolvimento), observei que o contador funciona bem - n√£o consegui encontrar ciclos extras em nenhum dos modos de depura√ß√£o, mas antes disso acontecer pelo menos na s√©rie MK, desenvolvida pela LuminaryMicro. <br><br>  Assim, esbo√ßamos o plano do experimento para determinar o tempo de altern√¢ncia de contexto - crie uma segunda tarefa que aumentar√° um determinado contador interno (em um loop infinito), inicie o MC por um certo tempo, encontre a rela√ß√£o entre o contador do sistema e o contador de tarefas.  Em seguida, inicie o MK por um tempo semelhante (n√£o necessariamente exatamente o mesmo) e insira 10 caracteres em um ritmo aproximadamente uma vez por segundo.  Pode-se esperar que isso resulte em 10 alternando para a tarefa de eco e 10 voltando para a tarefa de contador.  Sim, essas altern√¢ncias de contexto ser√£o executadas n√£o de acordo com o cron√¥metro do sheduler, mas de acordo com o evento, mas isso n√£o deve afetar o tempo total de execu√ß√£o da fun√ß√£o investigada; portanto, come√ßamos a implementar o plano, criar a contra-tarefa e inici√°-la. <br><br>  Aqui encontramos um recurso do RTOS, pelo menos na configura√ß√£o padr√£o - ele n√£o √© "real": se a tarefa priorit√°ria est√° constantemente pronta para execu√ß√£o (e a contra-tarefa √© essa) e n√£o d√° controle ao sheduler (n√£o espera sinais, n√£o adormece, n√£o bloqueado por sinalizadores, etc.); em seguida, nenhuma tarefa de menor prioridade ser√° executada a partir da palavra.  Este n√£o √© o Linux, no qual v√°rios m√©todos s√£o usados ‚Äã‚Äãpara garantir que todos recebam quantum, "para que ningu√©m se ofenda".  Esse comportamento √© esperado, muitos RTOS leves se comportam assim, mas o problema √© mais profundo, pois o gerenciamento n√£o recebe tarefas de igual prioridade com as constantemente preparadas.  √â por isso que, neste exemplo, coloquei a tarefa de eco, que est√° em espera, a prioridade √© maior que a tarefa de contador constantemente pronta, caso contr√°rio, a √∫ltima capturar√° todos os recursos do processador a tempo. <br><br>  Come√ßamos o experimento, a primeira parte (apenas aguardando o tempo de execu√ß√£o) forneceu os dados sobre a propor√ß√£o dos contadores 406181 / 58015 = 7 - √© bastante esperado.  A segunda parte (com 10 caracteres consecutivos por ~ 10 segundos) fornece os resultados 351234k-50167k * 7 = 63k / 20 = 3160 ciclos, o √∫ltimo d√≠gito √© o tempo associado ao procedimento de altern√¢ncia de contexto nos ciclos MK.  Pessoalmente, esse valor me parece um pouco maior que o esperado, continuamos pesquisando, parece que ainda existem a√ß√µes que estragam as estat√≠sticas. <br><br>  PNP: um erro comum de um experimentador √© n√£o avaliar os resultados esperados anteriormente e acreditar no lixo recebido (oi para 737 desenvolvedores). <br><br>  √â √≥bvio (‚Äúsim, bastante √≥bvio‚Äù) que o resultado, al√©m da troca de contexto real, tamb√©m cont√©m o tempo necess√°rio para executar as opera√ß√µes de leitura de um caractere do buffer e envi√°-lo para a porta serial.  Menos √≥bvio √© que ele tamb√©m tem o tempo necess√°rio para processar uma interrup√ß√£o quando √© recebida e colocar o caractere no buffer de recebimento).  Como podemos separar um gato da carne - por isso temos um truque complicado - paramos o programa, inserimos 10 caracteres e o iniciamos.  Podemos esperar (devemos olhar para a fonte) que uma interrup√ß√£o na recep√ß√£o ocorrer√° apenas uma vez e imediatamente todos os caracteres ser√£o enviados do buffer de recebimento para o anel, o que significa que veremos menos sobrecarga.  Tamb√©m √© f√°cil determinar o tempo de entrega na porta serial - produziremos cada segundo caractere e resolveremos as 2 equa√ß√µes lineares resultantes com 2 desconhecidas.  E √© poss√≠vel e ainda mais simples - n√£o deduzir nada, o que eu fiz. <br><br>  E aqui est√£o os resultados de manipula√ß√µes t√£o complicadas: tornamos a entrada do pacote e as medidas ausentes diminuem - 2282, desligamos a sa√≠da e os custos caem para 1222 - isso √© melhor, embora eu estivesse esperando 300 ciclos. <br><br>  Mas com o tempo de leitura, nada disso pode ser apresentado; ele √© dimensionado ao mesmo tempo que o tempo de troca de contexto desejado.  A √∫nica coisa que posso oferecer √© desligar o timer interno no in√≠cio da inser√ß√£o do caractere recebido e lig√°-lo novamente antes de entrar no modo de espera pelo pr√≥ximo.  Em seguida, dois contadores funcionar√£o de forma s√≠ncrona (com exce√ß√£o da altern√¢ncia) e podem ser facilmente determinados.  Mas essa abordagem requer uma profunda implementa√ß√£o de programas do sistema nos textos, e ainda o componente de manipula√ß√£o de interrup√ß√µes permanecer√°.  Portanto, proponho limitar-me aos dados j√° obtidos, o que nos permite afirmar firmemente que o tempo de troca de tarefas no TI-RTOS em quest√£o n√£o excede 1222 ciclos de rel√≥gio, que para uma determinada frequ√™ncia de rel√≥gio √© de 30 microssegundos. <br><br>  PNP: ainda muito - contei ciclos de 100: 30 para salvar o contexto, 40 para determinar a tarefa finalizada e 30 para restaurar o contexto, mas temos uma ordem de magnitude maior.  Embora a otimiza√ß√£o tenha sido desativada agora, ligue ‚Äìo2 e veja o resultado: n√£o mudou muito - tornou-se 2894 em vez de 3160. <br><br>  H√° outra id√©ia: se o sistema operacional suportasse alternar tarefas ponto a ponto, voc√™ poderia executar duas tarefas com contadores, obter magicamente dados sobre o n√∫mero de comutadores em um tempo e calcular a perda do contador do sistema, mas devido √†s peculiaridades do sheduler, sobre o qual eu Como j√° foi dito, essa abordagem n√£o levar√° ao sucesso.  Embora seja poss√≠vel outra op√ß√£o - executar pingue-pongue entre duas tarefas ponto a ponto (ou mesmo ponto a ponto) por meio de um sem√°foro, √© f√°cil calcular o n√∫mero de altern√¢ncias de contexto aqui - voc√™ precisar√° experiment√°-lo, mas ser√° amanh√£. <br><br>  A pesquisa tradicional no final do post, desta vez, ser√° dedicada n√£o ao n√≠vel da apresenta√ß√£o (√© claro para qualquer leitor imparcial que ele esteja al√©m de qualquer elogio e supere qualquer expectativa), mas ao t√≥pico do pr√≥ximo post. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt451918/">https://habr.com/ru/post/pt451918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt451904/index.html">√Äs vezes, mais √© menos. Quando uma diminui√ß√£o na carga leva a um aumento no atraso</a></li>
<li><a href="../pt451906/index.html">Vulnerabilidade do Exchange: Como detectar eleva√ß√£o de privil√©gio para um administrador de dom√≠nio</a></li>
<li><a href="../pt451908/index.html">A hist√≥ria dos computadores: uma noite no Museu Yandex</a></li>
<li><a href="../pt451912/index.html">Rede neural profunda do MuseNet grava m√∫sica</a></li>
<li><a href="../pt451916/index.html">PHP ass√≠ncrono e a hist√≥ria de uma bicicleta</a></li>
<li><a href="../pt451920/index.html">Otimize o armazenamento de mensagens no Zimbra Collaboration Suite</a></li>
<li><a href="../pt451922/index.html">Aritm√©tica de ponto fixo em C ++</a></li>
<li><a href="../pt451926/index.html">Sobre o c√≥digo ao vivo ap√≥s 130 transmiss√µes</a></li>
<li><a href="../pt451928/index.html">Como configurar a an√°lise da web nas p√°ginas AMP</a></li>
<li><a href="../pt451930/index.html">Automa√ß√£o da ilumina√ß√£o de escadas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>