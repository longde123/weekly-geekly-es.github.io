<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐คฝ๐ฟ ๐ถ๏ธ ๐ท ุจุงูุช ุขูุฉ ุงูุญุตู (ูููุณ ููุท) ูู ุฃูุฑููุง ุงูุฃุตููุฉ (ุฌุฒุก 3) ๐คต๐ผ โ๐ฟ ๐๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏ ุญุงู ุนุงู 2019. ููุฏ ุงูุชุฑุจุช ุนุทูุฉ ุฑุฃุณ ุงูุณูุฉ ุงูุฌุฏูุฏุฉ. ุญุงู ุงูููุช ูุจุฏุก ุชุฐูุฑ ุงูุจุงูุช ูุงูุฃูุงูุฑ ูุงููุชุบูุฑุงุช ูุงูุญููุงุช ... 

 ุดูุก ูุฏ ูุณูุช ุจุงููุนู ูุน ูุฐู ุงูุฃุนูุงุฏ....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุจุงูุช ุขูุฉ ุงูุญุตู (ูููุณ ููุท) ูู ุฃูุฑููุง ุงูุฃุตููุฉ (ุฌุฒุก 3)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435236/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dbb/a59/e93/dbba59e932ecdb4b0c28896a7e6fc3e3.jpg" alt="ุงูุตูุฑุฉ"><br><br>  ููุฏ ุญุงู ุนุงู 2019. ููุฏ ุงูุชุฑุจุช ุนุทูุฉ ุฑุฃุณ ุงูุณูุฉ ุงูุฌุฏูุฏุฉ.  ุญุงู ุงูููุช ูุจุฏุก ุชุฐูุฑ ุงูุจุงูุช ูุงูุฃูุงูุฑ ูุงููุชุบูุฑุงุช ูุงูุญููุงุช ... <br><br>  ุดูุก ูุฏ ูุณูุช ุจุงููุนู ูุน ูุฐู ุงูุฃุนูุงุฏ.  ูุฌุจ ุฃู ูุชุฐูุฑ ูุนุง! <br><br>  ุงูููู ุณูููู ุจุนูู ูุชุฑุฌู ูุขูุฉ ุงูุจุงูุช ุงูุฎุงุตุฉ ุจูุง.  ูุฐู ูู ุงูููุงูุฉ ุงูุซุงูุซุฉ ุ ุงูุฃุฌุฒุงุก ุงูุฃููู ููุง: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุฒุก 1</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุฒุก 2</a> . <br><br>  ุณูุฉ ุฌุฏูุฏุฉ ุณุนูุฏุฉ ููุฌููุน ุ ููุฑุญุจุง ุจูู ูู ุฎูุถ! <br><a name="habracut"></a><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุณุฃุฌูุจ ุนูู ุฃุณุฆูุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">fpauk</a> .  ูุฐู ุงูุฃุณุฆูุฉ ุตุญูุญุฉ ุชูุงูุง.  ุงูุขู ุจููุฉ ูุฐุง ุงูุฌูุงุฒ ุงูุจุงูุช ูู ุฃููุง ูุนูู ูุน ุนูุงููู ุงููุนุงูุฌ ุงููุจุงุดุฑ.  ููู ูู ุงูููุฏ ุงูุซุงูู ูุฐู ุงูุนูุงููู ููุณุช ูุฐูู ุ ููู ุชุชุดูู ุจุนุฏ ุจุฏุก ุงููุธุงู.  ุจุนุฏ ุจุฏุก ุชุดุบูู ุงููุธุงู ุ ูููููุง ุฅูุดุงุก ุฃู ูุคุดุฑุงุช ุ ูุณูู ูุนูู ูุฐุง ุงูุฑูุฒ ุจุดูู ุตุญูุญ ุนูู ุฃู ูุธุงู ุฃุณุงุณู.  ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุงูุญุตูู ุนูู ุนููุงู ูุชุบูุฑ ุฃู ุตููู ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ var0.  ุณูุนูู ูุฐุง ุงูุฃูุฑ ุนูู ุฃู ูุธุงู ุฃุณุงุณู ูุณููุฑุฌุน ุงูุนููุงู ุงูุตุญูุญ ุงูุฎุงุต ุจูุฐุง ุงููุธุงู ุงูุฃุณุงุณู.  ุซู ููููู ุงูุนูู ูุน ูุฐุง ุงูุนููุงู ููุง ุชุฑูุฏ. <br><br>  ูููู ูุง ูุฒุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">fpauk ูู</a> ุงูุตุญูุญ.  ูุง ูููู ุชุฎุฒูู ุงูุนููุงู ูู ุงูุฑูุฒ ุงูุจุฑูุฏู.  ุงุชุถุญ ุฃูู ุจุฅููุงููุง ูุชุงุจุฉ ุฑูุฒ ูุณุชูู ุนู ุงููุธุงู ุงูุฃุณุงุณู ุ ูููู ููุฐุง ูุญุชุงุฌ ุฅูู ุจุฐู ุจุนุถ ุงูุฌููุฏ.  ุนูู ูุฌู ุงูุฎุตูุต ุ ุชุฃูุฏ ูู ุฃู ุงูุนูุงููู ููุณุช ูู ุงูุฑูุฒ ุงูุจุฑูุฏู.  ููููููู ุงูุฏุฎูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุช ุจุญูุธ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุชุฑุฌูุฉ ุฅูู ููู.  ุณูู ุชุญุชูู ุนูู ุจูุงูุงุช ุ ููููู ุฃู ุชููู ุนูุงููู.  ุนูู ุณุจูู ุงููุซุงู ุ ููู ุงููุชุบูุฑุงุช ููุง ูุงูุณูุงู ูุบูุฑูุง. <br><br>  ููุชุฎูุต ูู ูุฐู ุงููุดููุฉ ุ ุชุญุชุงุฌ ุฅูู ุฌุนู ุงูุนูุงููู ุงูุชุฑุงุถูุฉ.  ุนูููุฉ ูุนุงูุฌ x86 ูููุฉ ููุบุงูุฉ ุ ููู ูุนุธู ุงูุญุงูุงุช ูู ูุถูู ุฃูุงูุฑ ุฅุถุงููุฉ.  ููู ูุน ุฐูู ุ ุณุฃุณุชูุฑ ูู ุงูุจููุฉ ุงูุญุงููุฉ ุ ุจุนูุงููู ูุทููุฉ.  ูุจุนุฏ ุฐูู ุ ุนูุฏูุง ูุตู ุฅูู ุงูุงุฎุชุจุงุฑุงุช ุ ุณูููู ูู ุงููููู ุฅุนุงุฏุฉ ุชุดููู ุงูุนูุงููู ุฅูู ุนูุงููู ุงูุชุฑุงุถูุฉ ุ ููุนุฑูุฉ ููู ุณูุคุซุฑ ุฐูู ุนูู ุงูุฃุฏุงุก.  ูุฐุง ูุซูุฑ ููุงูุชูุงู. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุงุญูุงุก </h4><br>  ูุงูุขู ุชุฌุฑูุจ ููููุง.  ููุฌุนู ุฌุฒุกูุง ุขุฎุฑ ูู ุฃูุงูุฑ ุงูุจุงูุช ุงูุตุบูุฑุฉ ูููู ุงููููุฏุฉ.  ุณุชููู ูุฐู ูู ุงูุฃูุงูุฑ nip ู emit ู 1+ ู +! ู -! ุ ุนุฏุฏ ุงููููุงุช ุงูุนูู ูุน ูููุฉ ุงูุฅุฑุฌุงุน r&gt; ุ&gt; r ุ r @ ุ ุณูุณูุฉ ุญุฑููุฉ (") ุ ูุงููููุงุช ุงูุซุงุจุชุฉ 1 ุ 2 ุ 3 ุ 4 ุ 8. ูุง ุชูุณู ุชุถููููุง ูู ุฌุฏูู ุงูุฃูุงูุฑ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุง ูู ุฑูุฒ ููุฐู ุงูุฃูุงูุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"><code class="cpp hljs">b_nip = <span class="hljs-number"><span class="hljs-number">0x39</span></span> bcmd_nip: pop rax mov [rsp], rax jmp _next b_emit = <span class="hljs-number"><span class="hljs-number">0x81</span></span> bcmd_emit: pop rax mov rsi, offset emit_buf #   mov [rsi], al mov rax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> - sys_write mov rdi, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov rdx, <span class="hljs-number"><span class="hljs-number">1</span></span> #   push r8 syscall #   pop r8 jmp _next b_wp = <span class="hljs-number"><span class="hljs-number">0x18</span></span> bcmd_wp: incq [rsp] jmp _next b_setp = <span class="hljs-number"><span class="hljs-number">0x48</span></span> bcmd_setp: pop rcx pop rax add [rcx], rax jmp _next b_setm = <span class="hljs-number"><span class="hljs-number">0x49</span></span> bcmd_setm: pop rcx pop rax sub [rcx], rax jmp _next b_2r = <span class="hljs-number"><span class="hljs-number">0x60</span></span> bcmd_2r: pop rax sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> mov [rbp], rax jmp _next b_r2 = <span class="hljs-number"><span class="hljs-number">0x61</span></span> bcmd_r2: push [rbp] add rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> jmp _next b_rget = <span class="hljs-number"><span class="hljs-number">0x62</span></span> bcmd_rget: push [rbp] jmp _next b_str = <span class="hljs-number"><span class="hljs-number">0x82</span></span> bcmd_str: movzx rax, byte ptr [r8] lea r8, [r8 + rax + <span class="hljs-number"><span class="hljs-number">1</span></span>] jmp _next b_count = <span class="hljs-number"><span class="hljs-number">0x84</span></span> bcmd_count: pop rcx movzx rax, byte ptr [rcx] inc rcx push rcx push rax jmp _next b_num1 = <span class="hljs-number"><span class="hljs-number">0x03</span></span> bcmd_num1: push <span class="hljs-number"><span class="hljs-number">1</span></span> jmp _next b_num2 = <span class="hljs-number"><span class="hljs-number">0x04</span></span> bcmd_num2: push <span class="hljs-number"><span class="hljs-number">2</span></span> jmp _next b_num3 = <span class="hljs-number"><span class="hljs-number">0x05</span></span> bcmd_num3: push <span class="hljs-number"><span class="hljs-number">3</span></span> jmp _next b_num4 = <span class="hljs-number"><span class="hljs-number">0x06</span></span> bcmd_num4: push <span class="hljs-number"><span class="hljs-number">4</span></span> jmp _next b_num8 = <span class="hljs-number"><span class="hljs-number">0x07</span></span> bcmd_num8: push <span class="hljs-number"><span class="hljs-number">8</span></span> jmp _next</code> </pre> <br></div></div><br>  ูุฒูู ุงูุฃูุฑ nip ุงููููุฉ ุงูููุฌูุฏุฉ ุฃุณูู ุงูุฌุฒุก ุงูุนููู ูู ุงูููุฏุณ.  ููู ูุง ูุนุงุฏู ุฃูุงูุฑ ุฅุณูุงุท ุงููุจุงุฏูุฉ.  ูุฐุง ูููู ุฃู ูููู ูู ุจุนุถ ุงูุฃุญูุงู ูููุฏุฉ. <br><br>  ูุฏูุน ุงูุฃูุฑ emit ุญุฑููุง ูุงุญุฏูุง ูู ุงูููุฏุณ.  ูุณุชุฎุฏู ููุณ ุฑูู ุงุณุชุฏุนุงุก ุงููุธุงู 1 ุ ูุถุน ุงูุญุฑู ูู ูุฎุฒู ูุคูุช ุจุทูู 1. <br><br>  ุฃูุฑ ุงูุนุฏ ุจุณูุท ููุบุงูุฉ - ูุฃุฎุฐ ุนููุงู ุงูุณุทุฑ ูุน ุงูุนุฏุงุฏ ูู ุงูููุฏุณ ููุญููู ุฅูู ูููุชูู - ุนููุงู ุงูุณุทุฑ ุจุฏูู ุงูุนุฏุงุฏ ูุงูุทูู. <br><br>  ุงูุฃูุงูุฑ b_2r ุ b_r2 ุ b_rget ูู ุงููููุงุช ุงูุญุตููุฉ r&gt; ุ&gt; r ุ r @.  ุงูุฃูู ูุฃุฎุฐ ุงููููุฉ ูู ููุฏุณ ุงูุฅุฑุฌุงุน ููุถุนูุง ุนูู ุงูููุฏุณ ุงูุญุณุงุจู.  ุงูุซุงูู ูููุฐ ุงูุนูููุฉ ุงููุนุงูุณุฉ.  ุงูุซุงูุซ ููุณุฎ ุงููููุฉ ูู ููุฏุณ ุงูุฅุฑุฌุงุน ุ ูุถุนูุง ูู ุงูุญุณุงุจ ุ ูุง ูุชุบูุฑ ููุฏุณ ุงูุฅุฑุฌุงุน. <br><br>  ุงูุฃูุงูุฑ b_setp ู b_setm ูู ุงููููุงุช +!  ู -! .. ูุฃุฎุฐูู ุงููููุฉ ูุงูุนููุงู ูู ุงูููุฏุณ ุ ููููููู ุจุชุนุฏูู ุงููููุฉ ูู ุงูุนููุงู ุงููุญุฏุฏ ุ ุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ุงููููุฉ ูู ุงูููุฏุณ. <br><br>  ูุญุชูู ุงูุฃูุฑ b_str ุนูู ูุนููุฉ ุงูุทูู ุงูุชุนุณูู - ุฎุท ูุน ุนุฏุงุฏ.  ููุน ูุฐุง ุงูุฎุท ูู ุงูุฑูุฒ ุงููุฑุนู ุจุนุฏ ุจุงูุช ุงูุฃูุฑ ุ ููุฏูุน ุงูุฃูุฑ ุจุจุณุงุทุฉ ุนููุงู ูุฐุง ุงูุฎุท ุฅูู ุงูููุฏุณ.  ูู ุงููุงูุน ุ ูุฐู ุณูุณูุฉ ุญุฑููุฉ. <br><br>  ุฃุนุชูุฏ ุฃู ุจููุฉ ุงููุฑูู ูุง ูุญุชุงุฌ ุฅูู ุชุนูููุงุช. <br><br>  ุณูููู ุฃูุถูุง ุจุฃูุฑ ูุทุจุงุนุฉ ุณูุณูุฉ ุซุงุจุชุฉ (. "). ูุณูุทุจููุง ูููุทุฉ ุฅุฏุฎุงู ูููุชุงุจุฉ ุ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_strp = <span class="hljs-number"><span class="hljs-number">0x83</span></span> bcmd_strp: movsx rax, byte ptr [r8] inc r8 push rax push r8 add r8, rax b_type = <span class="hljs-number"><span class="hljs-number">0x80</span></span> bcmd_type: mov rax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> - sys_write mov rdi, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> pop rdx #   pop rsi #   push r8 syscall #   pop r8 jmp _next</code> </pre><br>  ูุฐุง ุงูุฃูุฑ ููุธู ุจุทุฑููุฉ ููุงุซูุฉ ูู b_str.  ุงููุง ููุท ูุง ุชุถุน ุฃู ุดูุก ุนูู ุงูููุฏุณ.  ูุชู ุนุฑุถ ุงูุณุทุฑ ุงูููุฌูุฏ ุฎูู ูุฐุง ุงูุฃูุฑ ููุนููุฉ ุจุจุณุงุทุฉ ูููุณุชุฎุฏู. <br><br>  ุงูุชูู ุงูุงุญูุงุก ุ ููุฏ ุญุงู ุงูููุช ูุดูุก ุฃูุซุฑ ุฎุทูุฑุฉ.  ุฏุนููุง ูุชุนุงูู ูุน ูููุฏุงุช ุงููููุงุช ูุงูุฃูุงูุฑ ุงูุฃุฎุฑู. <br><br><h4 style=";text-align:right;direction:rtl">  ูููุงุช ุงููููุฏุงุช </h4><br>  ุฃุฐูุฑ ุงููุชุบูุฑุงุช.  ูุญู ูุนุฑู ููู ูุชู ุชุฑุชูุจูุง ุนูู ูุณุชูู bytecode (var0 command).  ูุฅูุดุงุก ูุชุบูุฑ ุฌุฏูุฏ ุ ูุณุชุฎุฏู ุงูุญุตู ุงูุฅูุดุงุก ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">variable &lt; &gt;</code> </pre><br>  ุจุนุฏ ุชูููุฐ ูุฐุง ุงูุชุณูุณู ุ ูุชู ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ &lt;ุงุณู ูุชุบูุฑ&gt;.  ุชูููุฐ ูุฐู ุงููููุฉ ุงูุฌุฏูุฏุฉ ูุฏูุน ุงูุนููุงู ุนูู ุงูููุฏุณ ูุชุฎุฒูู ูููุฉ ุงููุชุบูุฑ.  ููุงู ุฃูุถุง ุซูุงุจุช ูู ุงูุญุตู ุ ูุชู ุฅูุดุงุคูุง ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">&lt;&gt; constant &lt; &gt;</code> </pre><br>  ุจุนุฏ ุฅูุดุงุก ุงูุซุงุจุช ุ ูุชู ุชูููุฐ ูููุฉ &lt;ุงุณู ุซุงุจุช&gt; ุนูู ุงูููุฏุณ &lt;ุงููููุฉ&gt;. <br><br>  ูุฐูู ุ ูู ูู ูุชุบูุฑ ุงููููุฉ ููููุฉ ุซุงุจุช ูููุงุช ูููุฏ.  ููู ูุตููุฉ ูุฎูู ูููุงุช ุฌุฏูุฏุฉ.  ูู ุงูุญุตู ุ ูุชู ูุตู ูุซู ูุฐู ุงููููุงุช ุจุงุณุชุฎุฏุงู ุงูุฅูุดุงุก ... ูุง&gt; ุงูุฅูุดุงุก. <br><br>  ูููู ุชุนุฑูู ุงููุชุบูุฑุงุช ูุงูุซูุงุจุช ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: variable create <span class="hljs-number"><span class="hljs-number">0</span></span> , does&gt; ; : constant create , does&gt; @ ;</code> </pre><br>  ูุงุฐุง ูุนูู ูู ูุฐุงุ <br><br>  ุนูุฏ ุฅูุดุงุก ูููุฉ ุ ุชููุดุฆ ุงููููุฉ ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ ุจุงูุงุณู ุงูุฐู ุณุชุชุฎุฐู ุนูุฏ ุชูููุฐูุง ูู ุฏูู ุงูุฅุฏุฎุงู.  ุจุนุฏ ุงูุฎูู ุ ูุชู ุชูููุฐ ุณูุณูุฉ ูู ุงููููุงุช ูุจู ุงููููุฉ&gt;.  ูููู ูู ูุญุธุฉ ุชูููุฐ ูุฐู ุงููููุฉ ุ ูุชู ุชูููุฐ ูุง ููุชุจ ุจุนุฏ.  ูู ุงูููุช ููุณู ุ ุณูููู ุนููุงู ุงูุจูุงูุงุช ุจุงููุนู ูู ุงููุฌููุนุฉ (ููุง ูููููู ูู ุงูุญุตู ุ "ุญููู ุงูุจูุงูุงุช"). <br><br>  ูุจุงูุชุงูู ุ ุนูุฏ ุฅูุดุงุก ูุชุบูุฑ ุ ูุชู ุชูููุฐ ุงูุชุณูุณู "0" ุ ููุฐุง ูู ุญุฌุฒ ูููุฉ ุขูุฉ ุจุฏูู ููุก.  ูุนูุฏูุง ูุชู ุชูููุฐ ุงููููุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุ ูุง ูุชู ุนูู ุดูุก (ุจุนุฏ ุฐูู&gt; ูุง ููุฌุฏ ุดูุก).  ูุจูู ุนููุงู ุงูุฐุงูุฑุฉ ุญูุซ ูุชู ุชุฎุฒูู ุงููููุฉ ุจุจุณุงุทุฉ ุนูู ุงูููุฏุณ. <br><br>  ูู ุชุนุฑูู ุงูุซุงุจุช ุ ูุชู ุญุฌุฒ ูููุฉ ุฐุงุช ูููุฉ ุชุนุจุฆุฉ ุนูู ุงูููุฏุณ.  ุนูุฏ ุชูููุฐ ุงููููุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุ ูุชู ุชูููุฐ "@" ุ ูุงูุชู ุชุณุชุฑุฏ ุงููููุฉ ูู ุงูุนููุงู ุงููุญุฏุฏ. <br><br>  ุงูุขู ุฏุนููุง ูููุฑ ูู ููููุฉ ุชุฑุชูุจ ุงููููุฉ ุงูุชู ููุดุฆูุง.  ุฅูู ูุฏูุน ุนููุงู ุงูุจูุงูุงุช ุฅูู ุงูููุฏุณ (ูุซู var0) ุ ุซู ูููู ุงูุชุญูู ุฅูู ุนููุงู ูุญุฏุฏ ุ ุฑูุฒ ุซุงููู.  ูุนูุฏ ุงูุฃูุฑ var0 ุนูู ุงูููุฑ.  ููู ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุชุงุฌ ุฅูู ุนุฏู ุงูุนูุฏุฉ ุ ูููู ูู ุงููุงูุน ุ ุงูุงูุชูุงู. <br><br>  ูุฑุฉ ุฃุฎุฑู ุณุฃููู ุจุตูุงุบุฉ ูุง ูุฌุจ ุงูููุงู ุจู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุถุน ุนููุงู ุงูุจูุงูุงุช ุนูู ุงูููุฏุณ </li><li style=";text-align:right;direction:rtl">  ุงูููุฒ ุฅูู ูุทุนุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุนุฏ ูู&gt; </li></ul><br>  ููุฏ ุงูุชูู ุงูุฃูุฑ ุ ูุฃูุช ุชุญุชุงุฌ ููุท ุฅูู ููู ุงูุชุญูู ุฅูู ุนููุงู ุจุงูุช ุขุฎุฑ ุ ูููู ุฃููุงู ุถุน ุนููุงู ุงูุจุงูุชุฉ ุงูุชุงููุฉ (R8) ุนูู ุงูุญุฒูุฉ. <br><br>  ุฅูู ุฃูุฑ ูุฑุนู ุชูุฑูุจูุง!  ููู ููุง ููุณุช ูุญุฏูุง.  ูุฏูู ุจุงููุนู branch8 ู branch16.  ุณูููู ุจุชุณููุฉ ุงูุฃูุฑูู var8 ู var16 ุงูุฌุฏูุฏูู ุ ููุณูุญ ูููุง ุจุฃู ููููุง ูุฌุฑุฏ ููุงุท ุฏุฎูู ููุฃูุงูุฑ ุงููุฑุนูุฉ.  ูุญู ูููุฐ ุนูููุฉ ุงูุงูุชูุงู ุฅูู ูุฑูู ุงูููู :) ูุฐูู ุ ุณูููู ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_var8 = <span class="hljs-number"><span class="hljs-number">0x29</span></span> bcmd_var8: push r8 b_branch8 = <span class="hljs-number"><span class="hljs-number">0x10</span></span> bcmd_branch8: movsx rax, byte ptr [r8] add r8, rax jmp _next b_var16 = <span class="hljs-number"><span class="hljs-number">0x30</span></span> bcmd_var16: push r8 b_branch16 = <span class="hljs-number"><span class="hljs-number">0x11</span></span> bcmd_branch16: movsx rax, word ptr [r8] add r8, rax jmp _next</code> </pre><br>  ุจุทุฑููุฉ ุฌูุฏุฉ ุ ุณูุธู ุงูุฃูุฑ var32 ูุนูู ุ ู var64 ุฃูุถูุง.  ููุณ ูุฏููุง ูุซู ูุฐู ุงูุชุญููุงุช ุงูุทูููุฉ ุ ูุฃู ุงูุชุญููุงุช ุงูุนุงุฏูุฉ ููุณุช ุทูููุฉ.  ูููู ุจุงููุณุจุฉ ุฅูู ุงูุฃูุฑ var ุ ููุฐู ุญุงูุฉ ูุงูุนูุฉ ููุบุงูุฉ.  ููู ูู ุงูููุช ุงูุญุงูู ุ ูู ููุนู ูุฐู ุงูุฃูุงูุฑ.  ุณููุนู ูุงุญูุง ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ. <br><br>  ูุน ุงููููุงุช ุงููููุฏุงุช ูุฑุฒูุง.  ูุงู ุฏูุฑ ููุจุช ูู ุงููุงููุณ. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูููุฑุฏุงุช </h4><br>  ุนุงุฏุฉ ุ ุนูุฏูุง ูุชุญุฏุซูู ุจุทุฑููุฉ ูุจุณุทุฉ ุนู ูุงููุณ ุงูุญุตู ุ ูุชู ุชูุฏููู ูู ุดูู ูุงุฆูุฉ ุฃุญุงุฏูุฉ ุงูุงุชุฌุงู ูุฅุฏุฎุงูุงุช ุงููุงููุณ.  ูู ุงููุงูุน ุ ูู ุดูุก ุฃูุซุฑ ุชุนููุฏูุง ููููุงู ุ ูุฃู ุงูุญุตู ูุฏุนู ุงูุนุฏูุฏ ูู ุงูููุงููุณ.  ูู ุงููุงูุน ุ ููู ุดุฌุฑุฉ.  ูุจุฏุฃ ุงูุจุญุซ ุนู ูููุฉ ูู ูุฐู ุงูุดุฌุฑุฉ ุจู "ูุฑูุฉ" - ูุฐู ูู ุงููููุฉ ุงูุฃุฎูุฑุฉ ูู ุงููุงููุณ ุงูุญุงูู.  ูุชู ุชุนุฑูู ุงููุงููุณ ุงูุญุงูู ุจูุงุณุทุฉ ูุชุบูุฑ ุงูุณูุงู ุ ูุนููุงู ุงููููุฉ ุงูุฃุฎูุฑุฉ ูู ูููุฉ ุงููุงููุณ.  ูุชู ุงุณุชุฎุฏุงู ูุชุบูุฑ ุขุฎุฑ ูุฅุฏุงุฑุฉ ุงูููุงููุณ - ููู ูุญุฏุฏ ูุงููุณูุง ุญูุซ ุณูุชู ุฅุถุงูุฉ ูููุงุช ุฌุฏูุฏุฉ.  ูุจุงูุชุงูู ุ ูููู ุชุซุจูุช ูุงููุณ ูุงุญุฏ ููุจุญุซ ุ ูุขุฎุฑ ูุชุถููู ูููุงุช ุฌุฏูุฏุฉ. <br><br>  ุจุงููุณุจุฉ ูุญุงูุชูุง ุงูุจุณูุทุฉ ุ ุณูููู ูู ุงููููู ุนุฏู ุฏุนู ุงูุนุฏูุฏ ูู ุงูููุงููุณ ุ ููููู ูุฑุฑุช ุนุฏู ุชุจุณูุท ุฃู ุดูุก.  ูู ุงููุงูุน ุ ูู ุฃุฌู ููู ุฑูุฒ ุงูุจุงูุช ุ ุขูุฉ ุงูุจุงูุช ุ ููุณ ูู ุงูุถุฑูุฑู ูุนุฑูุฉ ูุง ูู ููุตูู ูู ูุฐุง ุงููุณู.  ูุฐูู ุ ูู ุบูุฑ ุงูููุชููู ุ ููููู ุจุจุณุงุทุฉ ุชุฎุทู ูุฐุง ุงููุณู.  ุญุณููุง ุ ูู ูุฑูุฏ ูุนุฑูุฉ ุงูุชูุงุตูู - ุชุงุจุน! <br><br>  ูู ุงูุจุฏุงูุฉ ุ ููุงู ูุงููุณ ุฃุณุงุณู ุงุณูู.  ูุฐุง ูุนูู ุฃู ููุงู ูุซู ูุฐู ุงููููุฉ.  ูุชุณูู ูุฐู ุงููููุฉ ุฃูุถุง "ุงููุงููุณ" ุ ูููุงู ุจุนุถ ุงูุงูุชุจุงุณ.  ูุฐูู ุ ุนูุฏูุง ูุชุนูู ุงูุฃูุฑ ุจูููุฉ ุ ุณุฃุทูู ุนูููุง ูููุฉ ุงููุงููุณ. <br><br>  ูุชู ุฅูุดุงุก ููุงููุณ ุฌุฏูุฏุฉ ุจุงุณุชุฎุฏุงู ูุฐุง ุงูุจูุงุก: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">vocabulary &lt;  &gt;</code> </pre><br>  ูุคุฏู ูุฐุง ุฅูู ุฅูุดุงุก ูููุฉ ุจุงุณู &lt;ุงุณู ุงููุงููุณ ุงูุฐู ุชู ุฅูุดุงุคู&gt;.  ุนูุฏ ุชูููุฐูุง ุ ุณุชููู ูุฐู ุงููููุฉ ุจุชุนููู ุงููุงููุณ ุงูุฐู ุชู ุฅูุดุงุคู ุนูู ุฃูู ูุงููุณ ุงูุจุฏุก ููุจุญุซ. <br><br>  ูู ุงููุงูุน ุ ูู ูููุฉ ุงููุงููุณ ููุงู ุฑุงุจุท ููููุงู ุงูุฃุฎูุฑ ูู ูุฐุง ุงููุงููุณ ุ ูุงูุฐู ูุจุฏุฃ ุงูุจุญุซ.  ููู ููุช ุงูุชูููุฐ ุ ุชูุชุจ ูููุฉ ุงููุงููุณ ูุฐู ุฑุงุจุทูุง ุฅูู ุญูู ุงูุจูุงูุงุช ุงูุฎุงุต ุจูุง ูู ูุชุบูุฑ ุงูุณูุงู. <br><br>  ูู ููุช ูุงุญู ุณูููู ูู ุงููููู ุฌุนู ูููุฉ ุงูููุฑุฏุงุช ุ ูุงูุชู ูู ุงูุญุตู ุ ูู ุงูุชูููุฐ ุงูุญุงูู ุ ููุตููุฉ ุจูู ุจุณุงุทุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: vocabulary create context @ , does&gt; context ! ;</code> </pre><br>  ูุฐูู ุ ูู ุจุฅูุดุงุก ุงููููุฉ.  ุณูู ูุณุชุฎุฏู ุงูุฃูุฑ var8.  Bytecode "ุงูุณูุงู!"  ุถุน ูุจุงุดุฑุฉ ุจุนุฏ ุญูู ุงูุจูุงูุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">forth: .byte b_var8 .byte does_voc - . - <span class="hljs-number"><span class="hljs-number">1</span></span> .quad <span class="hljs-number"><span class="hljs-number">0</span></span> # &lt;--      .      ,    -    . does_voc: .byte b_call8 .byte context - . - <span class="hljs-number"><span class="hljs-number">1</span></span> .byte b_set .byte b_exit</code> </pre><br>  ุนุงุฏ ุงูุขู ุฅูู ุฅูุดุงุก ุงููุงููุณ ููุณู. <br><br>  ุจุดูู ุนุงู ุ ูู ุงูุญุตู ุ ููุณูู ูุตู ูููุฉ ูู ุงูุฐุงูุฑุฉ "ุฅุฏุฎุงู ุงููุงููุณ".  ุจุนุจุงุฑุงุช ุนุงุฏูุฉ ุ ุฃูุฏ ุฃู ุฃููู ุฃู ููุงู ุนููุงู ุงูููุงู ูุฑูุฒู.  ููู ูู ุดูุก ููุณ ูุนุชุงุฏูุง ูู ุงูุญุตู ุ ุญูุซ ูุทูู ุนููู "ุญูู ุงูุงุณู" ู "ุญูู ุงูุงุชุตุงู" ู "ุญูู ุงูุฑูุฒ" ู "ุญูู ุงูุจูุงูุงุช".  ุณุฃุญุงูู ุฅุฎุจุงุฑู ูุงุฐุง ูุนูู ูู ูุฐุง ูู ุงููุงุญูุฉ ุงูุชูููุฏูุฉ. <br><br>  ุญูู ุงูุงุณู ูู ุงุณู ุงููููุฉ ุ "ุชูุดูุง ูุน ุนุฏุงุฏ."  ูุจุฏู ููุง ูู ูุงู ูู ุจุงุณูุงู ุงููุฏูู - ุจุงูุช ุทูู ุงูุณูุณูุฉ ุ ุซู ุงูุณูุณูุฉ.  ุญูู ุงูุงุฑุชุจุงุท ูู ุฑุงุจุท ููููุงู ุงูุณุงุจู.  ูู ุงูุณุงุจู ุ ูุงู ููุงู ูุฌุฑุฏ ุนููุงู ุ ูููู ุณูููู ูุฏููุง ุฑูุฒ ูุณุชูู ุนู ุงููุธุงู ุงูุฃุณุงุณู ุ ูุณูููู ูุฐุง ุฅุฒุงุญุฉ.  ูุนุฏ ุญูู ุงูุฑูุฒ ุ ููู ุชูููุฏููุง ูู ุงูุญุตู ุ ุฑูุฒูุง ููุฌูุงุฒ (ุนูุฏูุง ูููู ุงูุชูููุฐ ุนูู ุฎุท ูุจุงุดุฑ) ุ ูุจุงููุณุจุฉ ูููููุงุช ุงูููุฌูุฏุฉ ุฎุงุฑุฌ ุงูููุงุฉ ุ ูุงู ููุงู ุงุณุชุฏุนุงุก _call.  ุณูููู ูุฏููุง ูุฌุฑุฏ ุฑูุฒ ุซุงููู.  ููุฌุงู ุงูุจูุงูุงุช ูุฎุตุต ูููููุงุช ุงูุชู ุชุญุชูู ุนูู ุจูุงูุงุช - ุนูู ุณุจูู ุงููุซุงู ุ ูููุชุบูุฑุงุช ุฃู ุงูุซูุงุจุช.  ุจุงูููุงุณุจุฉ ุ ูุดูุฑ ูุงููุณ ุงููููุงุช ุฃูุถูุง ุฅูู ุฐูู. <br><br>  ูููุชุฑุฌู ุ ูุง ุฒููุง ุจุญุงุฌุฉ ุฅูู ุฃุนูุงู.  ุนุงุฏุฉ ูุง ูุญุชุงุฌ ุงูุญุตู ุฅูู ุนูู ูุงุญุฏ - ููุฑู ุ ููุชู ูุถุนู ูู ุจุงูุช ุทููู (ุฃุญูุงููุง ูููู ููุงู ุขุฎุฑ - ูุฎูู).  ูููู ูุฐุง ูุฎุตุต ูุฑูุฒ ูุฎูุท ูุจุงุดุฑ ุ ุญูุซ ูุชู ููู ุชุญูู ุงููุนุงูุฌ ุนูุฏ ุงุณุชุฏุนุงุฆู ุฅูู ุญูู ุงูุฑูุฒ.  ููุฏููุง ูููุงุช ูุฎุชููุฉ - ููุฏ ุงูุดูุฑุฉ ูุฑูุฒ ุงูุฌูุงุฒ ุ ูููุงู ุญุงุฌุฉ ุฅูู ุงุซููู ุฃู ุซูุงุซุฉ ุนูู ุงูุฃูู ูู ุงูุฃุนูุงู. <br><br>  ูู ูู ูุทููุจ ูุญูู ุงูุงุชุตุงูุงุชุ  ูู ุงูุจุฏุงูุฉ ุ ุฃุฑุฏุช ุงุณุชุฎุฏุงู 16 ุจุช.  ูุฐุง ุฑุงุจุท ูููููุฉ ุงูุณุงุจูุฉ ุ ูุงููููุฉ ุจุงูุชุฃููุฏ ุฃูู ูู 64 ูููู ุจุงูุช.  ูููู ุจุนุฏ ุฐูู ุชุฐูุฑุช ุฃู ุงููููุฉ ูููู ุฃู ุชุญุชูู ุนูู ุจูุงูุงุช ูู ุฃู ุญุฌู ุชูุฑูุจูุง.  ูุฅูู ุฌุงูุจ ุฐูู ุ ูู ูุฌูุฏ ุงูุนุฏูุฏ ูู ุงูููุงููุณ ุ ูููู ุฃู ููุฑ ุงูุฑุงุจุท ุจุงูุนุฏูุฏ ูู ุงููููุงุช.  ุงุชุถุญ ุฃูู ูู ูุนุธู ุงูุญุงูุงุช ุ 8 ุจุชุงุช ูุงููุฉ ุ ูููู ูููู ุฃู ูููู ููุงู 16 ู 32. ูุญุชู 64 ุจุช ุ ุฅุฐุง ูุงู ููุงู ุจูุงูุงุช ุฃูุซุฑ ูู 4 ุฌูุฌุงุจุงูุช.  ุญุณููุง ุ ุฏุนูุง ูุฏุนู ุฌููุน ุงูุฎูุงุฑุงุช.  ุงูุฎูุงุฑ ุงูุฐู ูุณุชุฎุฏู - ูุถุนุช ูู ุงูุฃุนูุงู.  ููุฏ ุธูุฑ ูุง ูุง ููู ุนู 4 ุฃุนูุงู: ุงูุณูุฉ ุงูุนุงุฌูุฉ ุ ุงูุณูุฉ word ุงูุฃุณุงุณูุฉ ุ ู 2 ุจุช ููู ูุชุบูุฑ ูู ุญูู ุงูุงุชุตุงู ุงููุณุชุฎุฏู.  ูู ุงูุถุฑูุฑู ุงุณุชุฎุฏุงู ุจุงูุช ูููุตู ููุฃุนูุงู ุ ูููุณ ุจุฃู ุทุฑููุฉ ุฃุฎุฑู. <br><br>  ูุญุฏุฏ ุงูุฃุนูุงู ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">f_code = <span class="hljs-number"><span class="hljs-number">0x80</span></span> f_immediate = <span class="hljs-number"><span class="hljs-number">0x60</span></span></code> </pre><br>  ุณุชููู ุนูุงูุฉ f_code ูููููุงุช kernel ุงูููุชูุจุฉ ูู ุงููุฌููุน ุ ูุณุชููู ุนูุงูุฉ f_immediate ูููุฏุฉ ูููุชุฑุฌู ุ ุญูู ูุฐุง ุงูููุถูุน ูู ุงูููุงูุฉ ุงูุชุงููุฉ.  ูุณูุญุฏุฏ ุงูุจุชุงู ุงูุฃูู ุฃูููุฉ ุทูู ุญูู ุงูุงุชุตุงู (1 ุฃู 2 ุฃู 4 ุฃู 8 ุจุงูุช). <br><br>  ูุฐูู ุ ุณูููู ุนููุงู ุงูููุงู ูุซู ูุฐุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃุนูุงู (1 ุจุงูุช) </li><li style=";text-align:right;direction:rtl">  ูุฌุงู ุงูุงุชุตุงู (1-8 ุจุงูุช) </li><li style=";text-align:right;direction:rtl">  ุงุณู ุทูู ุจุงูุช </li><li style=";text-align:right;direction:rtl">  ุงูุงุณู (1-255 ุจุงูุช) </li></ul><br>  ุญุชู ูุฐู ุงูููุทุฉ ุ ูู ุฃุณุชุฎุฏู ุฅููุงููุงุช ุงููุฌููุน "ุงูููู".  ูุงูุขู ูุญู ูู ุญุงุฌุฉ ุฅูููุง.  ููุฐุง ุญุตูุช ุนูู ูุงูุฑู ูุน ุนูุตุฑ ุงูุงุณู ูุชุดููู ุนููุงู ุงููููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.macro item name, flags = <span class="hljs-number"><span class="hljs-number">0</span></span> link = . - p_item <span class="hljs-number"><span class="hljs-number">9</span></span>: .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> link &gt;= <span class="hljs-number"><span class="hljs-number">-256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; link &lt; <span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> .byte \flags .byte link .elseif link &gt;= <span class="hljs-number"><span class="hljs-number">-256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; link &lt; <span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> .byte \flags | <span class="hljs-number"><span class="hljs-number">1</span></span> .word . - p_item .elseif link &gt;= <span class="hljs-number"><span class="hljs-number">-256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; link &lt; <span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> .byte \flags | <span class="hljs-number"><span class="hljs-number">2</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> . - p_item .elseif link &gt;= <span class="hljs-number"><span class="hljs-number">-256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; link &lt; <span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> .byte \flags | <span class="hljs-number"><span class="hljs-number">3</span></span> .quad . - p_item .endif p_item = <span class="hljs-number"><span class="hljs-number">9b</span></span> .byte <span class="hljs-number"><span class="hljs-number">9f</span></span> - . - <span class="hljs-number"><span class="hljs-number">1</span></span> .ascii <span class="hljs-string"><span class="hljs-string">"\name"</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>: .endm</code> </pre><br>  ูุณุชุฎุฏู ูุฐุง ุงููุงูุฑู ูููุฉ p_item - ูุฐุง ูู ุนููุงู ุฅุฏุฎุงู ุงููุงููุณ ุงูุณุงุจู.  ูุชู ุชุญุฏูุซ ูุฐู ุงููููุฉ ูู ุงูููุงูุฉ ููุงุณุชุฎุฏุงู ูู ุงููุณุชูุจู: p_item = 9b.  ููุง 9b ุนุจุงุฑุฉ ุนู ุชุตููู ุ ูููุณ ุฑูููุง ุ ูุง ุชุฎูุท ุจููู :) ูุญุชูู ุงููุงูุฑู ุนูู ูุนููุชูู - ุงุณู ุงููููุฉ ูุงูุฃุนูุงู (ุงุฎุชูุงุฑู).  ูู ุจุฏุงูุฉ ุงููุงูุฑู ุ ูุชู ุญุณุงุจ ุงูุฅุฒุงุญุฉ ูููููุฉ ุงูุณุงุจูุฉ.  ุซู ุ ุจูุงุกู ุนูู ุญุฌู ุงูุฅุฒุงุญุฉ ุ ูุชู ุชุฌููุน ุงูุฃุนูุงู ูุญูู ุงูุงุชุตุงู ุจุงูุญุฌู ุงููุทููุจ.  ุซู ุจุงูุช ุทูู ุงูุงุณู ูุงูุงุณู ููุณู. <br><br>  ุญุฏุฏ ูุจู ุงููููุฉ ุงูุฃููู p_item ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">p_item = .</code> </pre><br>  ุงูููุทุฉ ูู ุนููุงู ุงูุชุฑุฌูุฉ ุงูุญุงูู ูู ุงููุฌูุน.  ูุชูุฌุฉ ููุฐุง ุงูุชุนุฑูู ุ ุณุชุดูุฑ ุงููููุฉ ุงูุฃููู ุฅูู ููุณูุง (ุณูููู ุญูู ุงูุงุชุตุงู 0).  ูุฐู ุนูุงูุฉ ุนูู ููุงูุฉ ุงูููุงููุณ. <br><br>  ุจุงูููุงุณุจุฉ ุ ูุงุฐุง ุณูููู ูู ุญูู ุงูููุฏ ููููุงุช ุงูููุงุฉุ  ูุญุฏ ุฃุฏูู ุ ูุฌุจ ุนููู ุญูุธ ุฑูุฒ ุงูุฃูุฑ ูู ููุงู ูุง.  ูุฑุฑุช ุฃู ุฃุณูุฑ ูู ุฃุจุณุท ุทุฑูู.  ุจุงููุณุจุฉ ููููุงุช kernel ุ ุณูููู ููุงู ุฃูุถูุง ุฑูุฒ ุซุงููู.  ุจุงููุณุจุฉ ููุนุธู ุงููุฑู ุ ุณูููู ูุฐุง ูุฌุฑุฏ ุฃูุฑ ุจุงูุช ุ ูููู b_exit.  ูุจุงูุชุงูู ุ ุจุงููุณุจุฉ ูููุชุฑุฌู ุงูุดููู ุ ูุง ููุฒู ุชุญููู ุนูุงูุฉ f_code ุ ููู ุชุฎุชูู ุงูุฃูุงูุฑ ุงูุฎุงุตุฉ ุจูุง ุจุฃู ุทุฑููุฉ.  ุชุญุชุงุฌ ููุท ุฅูู ุงุณุชุฏุนุงุก ุงูุฑูุฒ ุงูุจุฑูุฏู ููุฌููุน. <br><br>  ููุงู ููุฒุฉ ุฃุฎุฑู ููุฐุง ุงูุฎูุงุฑ.  ุจุงููุณุจุฉ ููุฃูุงูุฑ ุฐุงุช ุงููุนููุงุช ุ ููููู ุชุญุฏูุฏ ูุนููุงุช ุขููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุช ุจุงุณุชุฏุนุงุก ุงูุฃูุฑ lit ูู ุชุทุจููุงุช Fort ุจุงุณุชุฎุฏุงู ุฑูุฒ ูุฎูุท ูุจุงุดุฑ ุ ูุณูุชุนุทู ุงููุธุงู.  ูููุง ุณูุชู ูุชุงุจุชูุง ููุงู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุถุงุกุฉ 0 ุ ููุฐุง ุงูุชุณูุณู ุจุจุณุงุทุฉ ูุถุน 0 ุนูู ุงูููุฏุณ.  ุญุชู ูููุฑุน ูููู ุงูููุงู ุจู ุจุฃูุงู! <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> .byte branch8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_exit</code> </pre><br>  ูุน ูุฌูุฏ ูุซู ูุฐู ุงูููุงููุฉ ุ ุณูููู ููุงู ุจุนุถ ุงููููุงุช ุงูุนุงูุฉ ุ ููู ุจุงููุณุจุฉ ูููุชุฑุฌู ุงูููุฑู ูู ุชููู ุฐุงุช ุฃูููุฉ.  ุณูููู ุงููุชุฑุฌู ุจุชุญููู ุงูุฃุนูุงู ูุชุฌููุน ุงูููุฏ ุงูุตุญูุญ ูุงูุณุฑูุน. <br><br>  ุณุชููู ุงููููุฉ ุงูุฃููู ุ ุจุงูุทุจุน ุ ุงููููุฉ "ุฐูุงุจูุง ูุฅูุงุจูุง" - ุงูููุฑุฏุงุช ุงูุฃุณุงุณูุฉ ุงูุชู ูุฎูููุง.  ููุง ุ ูุง ุนููู ุณูู ุงุณุชุฎุฏุงู ุฃูุฑ var ูููุฏ ูุน ูุฌูุฏ ุฑุงุจุท ุฅูู ุงูููุฏ ุจุนุฏ&gt;.  ุณุจู ุฃู ุฃุดุฑุช ุฅูู ูุฐุง ุงูุฑูุฒ ูู ุงููุณู ุงูุณุงุจู ุ ููููู ุณุฃูุฑุฑู ูุฑุฉ ุฃุฎุฑู ุ ูุน ุงูุนููุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">p_item = . item forth .byte b_var8 .byte does_voc - . - <span class="hljs-number"><span class="hljs-number">1</span></span> .quad <span class="hljs-number"><span class="hljs-number">0</span></span> does_voc: .byte b_call8 .byte context - . - <span class="hljs-number"><span class="hljs-number">1</span></span> .byte b_set .byte b_exit</code> </pre><br>  ูุณูููู ุนูู ุงูููุฑ ุจุนูู ูุชุบูุฑุงุช ุงูุณูุงู ุ ููุญู ุจุญุงุฌุฉ ุฅูููุง ููุจุญุซ ุนู ุงููููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item .byte b_var0 .quad <span class="hljs-number"><span class="hljs-number">0</span></span> item context context: .byte b_var0 .quad <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br>  ูุงูุขู ุ ุนููู ุงูุชุญูู ุจุงูุตุจุฑ ููุชุงุจุฉ ุนููุงู ููู ูููุฉ ูุชุจูุงูุง ูู ูุฌูุน ูุน ุนูุงูุฉ f_code: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item <span class="hljs-number"><span class="hljs-number">0</span></span>, f_code .byte b_num0 .byte b_exit item <span class="hljs-number"><span class="hljs-number">1</span></span>, f_code .byte b_num1 .byte b_exit ... item <span class="hljs-number"><span class="hljs-number">1</span></span>-, f_code .byte b_wm .byte b_exit item <span class="hljs-number"><span class="hljs-number">1</span></span>+, f_code .byte b_wp .byte b_exit item +, f_code .byte b_add .byte b_exit item -, f_code .byte b_sub .byte b_exit item *, f_code .byte b_mul .byte b_exit</code> </pre><br>  ูููู ุฌุฑุง ... <br><br>  ูุน ูุฑู ููุชูุจุฉ ูู bytecode ูู ุฃุณูู.  ูููู ุฅุถุงูุฉ ุนููุงู ููุท ูุจู ุงูุฑูุฒ ุงููุฑุนู ุ ุชูุงููุง ูุซู ุงููููุฉ ุ ุนูู ุณุจูู ุงููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item hold hold: .byte b_call8 .byte holdpoint - . - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-meta"><span class="hljs-meta"># holdpoint ...</span></span></code> </pre><br>  ุจุงููุณุจุฉ ููุฃูุงูุฑ ุฐุงุช ุงููุนููุงุช ุ ุณูุฌุนู ุงููุนููุงุช ุขููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฏุน ุฃูุงูุฑ lite ุชูุฑุฌุน ุงูุฑูู Pi ุ ุฅุฐุง ุงุชุตู ุจูู ุดุฎุต ูุง ุจุดูู ุชูุงุนูู ุ ูุณูููู ููุงู ูุซู ูุฐุง ุงููุตุญ :) <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item lit8, f_code .byte b_lit8 .byte <span class="hljs-number"><span class="hljs-number">31</span></span> .byte b_exit item lit16, f_code .byte b_lit16 .word <span class="hljs-number"><span class="hljs-number">31415</span></span> .byte b_exit item lit32, f_code .byte b_lit32 .<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">31415926</span></span> .byte b_exit item lit64, f_code .byte b_lit64 .quad <span class="hljs-number"><span class="hljs-number">31415926535</span></span> .byte b_exit</code> </pre><br>  ุณุชุฌุนู ุงููููุฉ ุงูุฃุฎูุฑุฉ ูู ุงููุงุฆูุฉ ุงููููุฉ ูุฏุงุนูุง.  ููู ูุง ุฒููุง ุจุญุงุฌุฉ ุฅูู ุชููุฆุฉ ุนููุงู ูุฐู ุงููููุฉ ูู ุญูู ุงูุจูุงูุงุช.  ููุญุตูู ุนูู ุนููุงู ูุฐู ุงููููุฉ ุ ุงุณุชุฎุฏู ุงูุฃูุฑ var0: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">last_item: .byte b_var0 item bye, f_code .byte b_bye</code> </pre><br>  ูู ูุฐุง ุงูุชุตููู ุ ุฅุฐุง ุงุชุตููุง ุจุงูุนููุงู last_item ูู ุงูุฑูุฒ ุงูุจุฑูุฏู ุ ูุณูุญุตู ุนูู ุนููุงู ูููุฉ bye.  ููุชุงุจุชูุง ูู ุญููู ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจุงููููุฉ ุฅูุงุจุง ุ ูู ุจุชูููุฐูุง ุ ูุณูููู ุงูุนููุงู ุงููุทููุจ ูู ุงูุณูุงู.  ูุจุงูุชุงูู ุ ุณูููู ุฑูุฒ ุชููุฆุฉ ุงููุธุงู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">forth last_item context @ !</code> </pre><br>  ูุงูุขู ุฏุนูุง ููุชูู ูุจุงุดุฑุฉ ุฅูู ุงููุชุฑุฌู ุงูููุฑู.  ุฃููุงู ุ ูุญุชุงุฌ ุฅูู ุงูุนูู ูุน ุงููุฎุฒู ุงููุคูุช ูููุฏุฎูุงุช ูุงุณุชุฎุฑุงุฌ ุงููููุงุช ููู.  ุฏุนูู ุฃุฐูุฑู ุฃู ุงููุชุฑุฌู ุงูููุฑู ูู ุงูุญุตู ุจุณูุท ููุบุงูุฉ.  ูุณุชุฎูุต ุงููููุงุช ูู ูุฎุฒู ุงูุฅุฏุฎุงู ุงููุคูุช ุจุงูุชุณูุณู ุ ููุญุงูู ุงูุนุซูุฑ ุนูููุง.  ุฅุฐุง ุชู ุงูุนุซูุฑ ุนูู ุงููููุฉ ุ ูููู ุงููุชุฑุฌู ุจุฅุทูุงููุง ููุชูููุฐ. <br><br><h4 style=";text-align:right;direction:rtl">  ุฅุฏุฎุงู ุงูุนุงุฒูุฉ ูุงุณุชุฎุฑุงุฌ ุงููููุฉ </h4><br>  ุฃู ูููู ุตุงุฏููู ุ ุฃูุง ูุง ุฃุฑูุฏ ุฃู ุฃูุถู ุงููุซูุฑ ูู ุงูููุช ูู ุฏุฑุงุณุฉ ูุนุงููุฑ ุงูุญุตู.  ูููู ูุง ุฒูุช ุณุฃุญุงูู ุฌุนูู ุฃูุฑุจ ูุง ูููู ููู ุ ููุง ุณููุง ูู ุงูุฐุงูุฑุฉ.  ุฅุฐุง ูุงู ุฎุจุฑุงุก ุงูุญุตู ุณูุฑูู ุชุจุงูููุง ููููุง ููุง - ุงูุชุจ ุ ุณูู ุฃููู ุจุฅุตูุงุญู. <br><br>  ูุญุชูู ุงูุญุตู ุนูู ุซูุงุซุฉ ูุชุบูุฑุงุช ููุนูู ูุน ุงููุฎุฒู ุงููุคูุช: tib ู #tib ู&gt; in.  ุงููุชุบูุฑ tib ูุฏูุน ุนููุงู ุงููุฎุฒู ุงููุคูุช ุงูุฅุฏุฎุงู ุนูู ุงูููุฏุณ.  ูุชุบูุฑ #tib ูุฏูุน ุนุฏุฏ ุงูุฃุญุฑู ุงูููุฌูุฏุฉ ูู ุงููุฎุฒู ุงููุคูุช ุฅูู ุงูููุฏุณ.  ูุญุชูู ุงููุชุบูุฑ&gt; ุนูู ุงูุฅุฒุงุญุฉ ูู ูุฎุฒู ุงูุฅุฏุฎุงู ุงููุคูุช ุ ูุงูุฐู ููุน ุจุนุฏู ุงููุต ุงูุฎุงู.  ุชุญุฏูุฏ ูุฐู ุงููุชุบูุฑุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item tib .byte b_var0 v_tib: .quad <span class="hljs-number"><span class="hljs-number">0</span></span> item <span class="hljs-meta"><span class="hljs-meta">#tib .byte b_var0 v_ntib: .quad 0 item &gt;in .byte b_var0 v_in: .quad 0</span></span></code> </pre><br>  ุงูุชุงูู ูุฌุนู ูููุฉ ุงูููู.  ูุฐู ุงููููุฉ ุ ุจุงุณุชุฎุฏุงู ุงููุชุบูุฑุงุช ุงููุญุฏุฏุฉ ุ ุชุญุตู ุนูู ุงููููุฉ ุงูุชุงููุฉ ูู ุฏูู ุงูุฅุฏุฎุงู.  ูุชู ุงุณุชุฎุฏุงู ูุณุงุญุฉ ููุญุฏุฏุงุช ููุงูุฉ ุงูุฃุญุฑู ูุน ุฑูุฒ ุฃูู ูู ูุณุงุญุฉ.  ูุฐู ุงููููุฉ ุณุชููู ูู ุงููุฌูุน.  ุจุนุฏ ุชุตุญูุญ ุงูุฃุฎุทุงุก ุ ุงุชุถุญ ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_blword = <span class="hljs-number"><span class="hljs-number">0xF0</span></span> bcmd_blword: mov rsi, v_tib #    mov rdx, rsi #   RDX       mov rax, v_in #     mov rcx, v_ntib #    add rsi, rax #  RSI -      sub rcx, rax #     jz <span class="hljs-number"><span class="hljs-number">3f</span></span> word2: lodsb #   AL  RSI   cmp al, <span class="hljs-string"><span class="hljs-string">' '</span></span> ja <span class="hljs-number"><span class="hljs-number">1f</span></span> #    (    ) dec rcx jnz word2 #    <span class="hljs-number"><span class="hljs-number">3</span></span>: sub rsi, rdx mov v_in, rsi push rcx jmp _next <span class="hljs-number"><span class="hljs-number">1</span></span>: lea rdi, [rsi - <span class="hljs-number"><span class="hljs-number">1</span></span>] # RDI = RSI - <span class="hljs-number"><span class="hljs-number">1</span></span> ( ) dec rcx word3: lodsb cmp al, <span class="hljs-string"><span class="hljs-string">' '</span></span> jbe <span class="hljs-number"><span class="hljs-number">2f</span></span> dec rcx jnz word3 <span class="hljs-number"><span class="hljs-number">2</span></span>: mov rax, rsi sub rsi, rdx #        (   ) mov v_in, rsi sub rax, rdi dec rax jz word1 push rdi #   word1: push rax #   jmp _next</code> </pre><br>  ุชุดุจู ูุฐู ุงููููุฉ ุงููููุฉ ุงูููุงุณูุฉ ุ ูููู ุนูู ุนูุณูุง ุ ุชุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฌููุน ุงููุญุฏุฏุงุช ููุง ุชูุณุฎ ุงููููุฉ ุฅูู ุงููุฎุฒู ุงููุคูุช.  ุชููู ุจุฅุฑุฌุงุน ูููุชูู ููุท ุนูู ุงูููุฏุณ - ุงูุนููุงู ูุงูุทูู.  ุฅุฐุง ูุงูุช ุงููููุฉ ูุง ูููู ุงุณุชุฑุฌุงุนูุง ุ ูุชูุฑุฌุน 0. ููุฏ ุญุงู ุงูููุช ูุจุฏุก ูุชุงุจุฉ ุงููุชุฑุฌู ุงูููุฑู. <br><br><h4 style=";text-align:right;direction:rtl">  ูููุฉ ุงูุจุญุซ ูุงููุชุฑุฌู ุงูููุฑู </h4><br>  ููุจุฏุก ุ ุฏุนููุง ูุฌุนู ุงููููุฉ ุชูุณุฑ.  ุชุญุฏุฏ ูุฐู ุงููููุฉ ูููุฉ ุฌุฏูุฏุฉ ูู ุงููุฎุฒู ุงููุคูุช ุจุงุณุชุฎุฏุงู blworld ุ ูุชุจุญุซ ุนููุง ูู ุงููุงููุณ ุ ูุชููู ุจุชูููุฐูุง.  ูููุฐุง ูุชูุฑุฑ ุญุชู ูุชู ุงุณุชููุงุฏ ุงููุฎุฒู ุงููุคูุช.  ูุง ุฒููุง ูุง ูููู ุงููุฏุฑุฉ ุนูู ุงูุจุญุซ ุนู ูููุฉ ุ ูุฐูู ุณููุชุจ ูุนุจ ุงุฎุชุจุงุฑ ูุทุจุน ุจุจุณุงุทุฉ ุงููููุฉ ูู ุงููุฎุฒู ุงููุคูุช ุจุงุณุชุฎุฏุงู ุงูููุน.  ูุฐุง ุณูุชูุญ ููุง ุงููุฑุตุฉ ููุชุญูู ูุชุตุญูุญ blworld: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"># : interpret begin blword dup <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> type repeat drop ; item interpret <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_blword .byte b_dup .byte b_qnbranch8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . .byte b_type .byte b_branch8 .byte <span class="hljs-number"><span class="hljs-number">1b</span></span> - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_drop .byte b_exit</code> </pre><br>  ุงูุขู ุฌุนู ุงููููุฉ ุงุณุชูุงู.  ุนุงุฏุฉ ูุง ูููููู ุจุฐูู ุนูุฏ ุชุทุจูู ุฃูุธูุฉ ุงูุญุตูู: ูุณุชุฎุฏููู ุงููููุฉ ุฅููุงุก ุฃู ุฅุญุจุงุท ููุฏุฎูู ูู ูุถุน ุงููุชุฑุฌู.  ุงููููุฉ ุฅููุงุก ูุณุญ ุงููุฏุงุฎู ููุจุฏุฃ ุญููุฉ ูุง ููุงูุฉ ููุง ูู ุงููุฏุฎูุงุช ุงููุฎุฒู ุงููุคูุช ูุงูุชูุณูุฑ.  ูุนูุง ุณูููู ูุฌุฑุฏ ุฏุนูุฉ ููุชูุณูุฑ.  ูุชููู ุฑูุฒ ูุฐู ุงููููุฉ ูู ุฌุฒุฃูู.  ุงูุฌุฒุก ุงูุฃูู ุณูููู ูู ุงููุฌูุน ุ ุงูุฌุฒุก ุงูุซุงูู ุณูููู ูู ุงูุฑูุฒ ุงูุจุฑูุฏู.  ุงูุฌุฒุก ุงูุฃูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_quit = <span class="hljs-number"><span class="hljs-number">0xF1</span></span> bcmd_quit: lea r8, quit mov sp, init_stack mov bp, init_rstack jmp _next</code> </pre><br>  ุงูุฌุฒุก ุงูุซุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">quit: .byte b_call16 .word interpret - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_bye</code> </pre><br>  ูุงูุนุงุฏุฉ ุ ููุฌุฏ ุฑูุฒ ุงููุฌููุน ูู ูุณู ุงููุต. ุฑูุฒ ุงูุจุงูุช ููุฌูุฏ ูู ูุณู ุงูุจูุงูุงุช. <br><br>  ูุฃุฎูุฑูุง ุ ูู ุจุชุบููุฑ ููุฏ ุจุฏุก ุงูุชุดุบูู.  ูู ูููู ููุงู ุณูู ุชููุฆุฉ ูููุงููุณ ุ ููุถุน ูุฎุฒู ูุคูุช ุนูู ุฎุท ุงูุจุฏุงูุฉ ุ ูุฅููุงุก ุงูุงุชุตุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta"># forth last_item context @ ! start_code tib ! </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;  &gt; #tib ! quit start: .byte b_call16 .word forth - . - 2 .byte b_call16 .word last_item - . - 2 .byte b_call16 .word context - . - 2 .byte b_get .byte b_set .byte b_call8 .byte start_code - . - 1 .byte b_call16 .word tib - . - 2 .byte b_set .byte b_lit16 .world 1f - 0f .byte b_call16 .word ntib - . - 2 .byte b_set .byte b_quit start_code: .byte b_var0 0: .ascii "word1 word2 word3" 1:</span></span></span></span></code> </pre><br>  ุชุฑุฌูุฉ ุ ูุตูุฉ ุ ุชุดุบูู! <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ as forth.s -o forth.o -g -ahlsm &gt;list.txt $ ld forth.o -o forth $ ./forth word1word2wordBye!</code> </pre><br>  ูุดุจู ุงูุนุตูุฏุฉ ุจุนุถ ุงูุดูุก ุ ูููู ูุฐุง ูู ุจุงูุถุจุท ูุง ูุฌุจ ุฃู ุชููู ุนููู ุงููุชูุฌุฉ.  ูุฎุฑุฌ ุจุฏูู ูุญุฏุฏุงุช.  ุจุงูููุงุณุจุฉ ุ ุถุน ุฎุท ุงูุชุบุฐูุฉ ูุจู ุงูุดุฑุงุก ูููุณุชูุจู ุ ูุฐุง ูู ูุถุฑ. <br><br>  ุจุงูุทุจุน ุ ูุงู ุนูู ุฃู ุงูุนุจุซ ุชุตุญูุญ ุงูุฃุฎุทุงุก.  ุจุงูุฅุถุงูุฉ ุฅูู "ุฎุทุฃ ุงูุชูุณูู (ุงูุฐู ุชู ุฅููุงุคู)" ุ ุชู ุงูุญุตูู ุนูู ูุชุงุฆุฌ ูุซูุฑุฉ ููุงูุชูุงู ูู ุจุนุถ ุงูุฃุญูุงู.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth word1word2word3forth)%60Acurrent(context(%600lit8lit16zlit32v%5E%DF%80lit64v%5E%DF%80call8call16call32branch8branch16qbranch8qbranch16exit1-+!-%22*#/$mod%25/mod&amp;abs'dup0drop1swap2rot3-rot4over5pick6roll7depth8@@!Ac@Bc!Cw@Dw!Ei@Fi!G0=P0%3CQ0%3ER=S%3CT%3EU%3C=V%3E=Wvar8)var160base(holdbuf(Qholdpoint(hold@0U110ACp@&amp;20T0!?!%3CgF!A0@RF!5%220'%DE%A61Q-%DD%80:tib(%7F%60(%3Ein(%20%20%20%20%20%20%20interpret01('byeSegmentation%20fault%20(core%20dumped)</code> </pre><br>  ูุจุฏู ุฃู ูุฐุง ูู ูุงููุณูุง ุงูุซูุงุฆู ุจุงููุงูู ูุน ูุต ููุณู ุฅูู ูุญุฏุฏุงุช :) ููุฏ ุญุฏุซ ุฐูู ุนูุฏูุง ูุณูุช "dec rcx" ูุจู word3 ูู ุงูุฃูุฑ b_blword. <br><br>  ูุญู ูุงุฏุฑูู ุนูู ุงุฎุชูุงุฑ ุงููููุงุช ูู ุชูุงุฑ ุงูุฅุฏุฎุงู ุ ููุงู ูุงููุณ.  ุงูุขู ุชุญุชุงุฌ ุฅูู ุชูููุฐ ุจุญุซ ุงููุงููุณ ูุฅุทูุงู ูููุงุช ููุชูููุฐ.  ูุฐุง ุณูุชุทูุจ ุงููููุงุช findุ cfa ู execute. <br><br>  ุชุฃุฎุฐ ุงููููุฉ find ุนููุงู ุงููููุฉ ูุทูููุง ูู ุงูููุฏุณ.  ุณูุชู ุฅุฑุฌุงุน ูุฐู ุงููููุฉ ุจูุงุณุทุฉ ุนููุงู ุฅุฏุฎุงู ุงููุงููุณ ุฃู 0 ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูููุง. <br><br>  ุงููููุฉ cfa ูู ุนููุงู ุงูููุงูุฉ ุณุชุญุณุจ ุนููุงู ุงูููุฏ ุงููุงุจู ููุชูููุฐ. <br><br>  ูุงููููุฉ ุชูููุฐ ุณูู ุชููุฐ bytecode. <br><br>  ููุจุฏุฃ ุจุงูุจุญุซ.  ูู ูุนุงููุฑ ุงูุญุตู ุ ูุฅูู ูุฃุฎุฐ ุนููุงููุง ูุงุญุฏูุง - ุณุทุฑ ูุน ุนุฏุงุฏ.  ููููู ูุง ุฃุฑูุฏ ูุณุฎ ุงูุณูุณูุฉ ูุฑุฉ ุฃุฎุฑู ุฅูู ุงููุฎุฒู ุงููุคูุช ุ ูุฐูู ุณุฃูุญูุฏ ููููุงู ุนู ุงููุนุงููุฑ.  ุณุชุฃุฎุฐ ุงููููุฉ find ูุนููุชูู ุนูู ุงูุญุฒูุฉ - ุนููุงู ูุทูู ุงูุณูุณูุฉ (ูู ุงููุงูุน ุ ุชูุฑุฌุน ุงููููุฉ blword).  ุจุนุฏ ุชุตุญูุญ ุงูุฃุฎุทุงุก ุ ุฃุฎุฐุช ูุฐู ุงููููุฉ ุงููููุฐุฌ ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_find = <span class="hljs-number"><span class="hljs-number">0xF2</span></span> bcmd_find: pop rbx #   pop r9 #   mov rdx, v_context mov rdx, [rdx] #        #   find0: mov al, [rdx] #  <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">3</span></span> #   -     ,     ,    <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> al, al jz find_l8 cmp al, <span class="hljs-number"><span class="hljs-number">1</span></span> jz find_l16 cmp al, <span class="hljs-number"><span class="hljs-number">2</span></span> jz find_l32 mov r10, [rdx + <span class="hljs-number"><span class="hljs-number">1</span></span>] #  <span class="hljs-number"><span class="hljs-number">64</span></span>  lea rsi, [rdx + <span class="hljs-number"><span class="hljs-number">9</span></span>] #   jmp find1 find_l32: movsx r10, dword ptr [rdx + <span class="hljs-number"><span class="hljs-number">1</span></span>] #  <span class="hljs-number"><span class="hljs-number">32</span></span>  lea rsi, [rdx + <span class="hljs-number"><span class="hljs-number">5</span></span>] #   jmp find1 find_l16: movsx r10, word ptr [rdx + <span class="hljs-number"><span class="hljs-number">1</span></span>] #  <span class="hljs-number"><span class="hljs-number">16</span></span>  lea rsi, [rdx + <span class="hljs-number"><span class="hljs-number">3</span></span>] #   jmp find1 find_l8: movsx r10, byte ptr [rdx + <span class="hljs-number"><span class="hljs-number">1</span></span>] #  <span class="hljs-number"><span class="hljs-number">8</span></span>  lea rsi, [rdx + <span class="hljs-number"><span class="hljs-number">2</span></span>] #   find1: movzx rax, byte ptr [rsi] #       cmp rax, rbx jz find2 #      find3: <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> r10, r10 jz find_notfound #  ,    add rdx, r10 #     jmp find0 #  ,   find2: inc rsi mov rdi, r9 mov rcx, rax repz cmpsb jnz find3 #   push rdx jmp _next find_notfound: push r10 jmp _next</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุจูุง ูุฐู ูู ุงููููุฉ ุงูุฃูุซุฑ ุตุนูุจุฉ ููุฐุง ุงูููู. </font><font style="vertical-align: inherit;">ุงูุขู ูููู ุจุชุนุฏูู ูููุฉ ุงูุชูุณูุฑ ุ ูุน ุงุณุชุจุฏุงู ุงููุชุงุจุฉ ุจู "find".:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"># : interpret begin blword dup <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> find . repeat drop ; item interpret interpret: .byte b_blword .byte b_dup .byte b_qnbranch8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . .byte b_find .byte b_call16 .word dot - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_branch8 .byte interpret - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_drop .byte b_exit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุณุทุฑ ุงูุงุฎุชุจุงุฑ ุ ุชุญุชุงุฌ ุฅูู ูุถุน ุงููููุงุช ุงูููุฌูุฏุฉ ูู ุงููุงููุณ ุ ุนูู ุณุจูู ุงููุซุงู ุ "0 1- dup +.". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุดูุก ุฌุงูุฒ ููุฅุทูุงู!</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ld forth.o -o forth $ ./forth 6297733 6297898 6298375 Bye!</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุธูู ุ ุงูุจุญุซ ูุนูู. </font><font style="vertical-align: inherit;">ูุฐู ูู ุนูุงููู ุงููููุงุช (ูู ุงูุนุดุฑูุฉ). </font><font style="vertical-align: inherit;">ุงูุขู ูููุฉ cfa. </font><font style="vertical-align: inherit;">ููููู ุฃูุถูุง ูู ูุฌูุน ุ ุฅูู ุฃูุฑ ุจุณูุท ุฌุฏูุง ุ ุงูุนูู ูุน ุงูุฃุนูุงู ูุดุจู ุงูุนุซูุฑ ุนูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_cfa = <span class="hljs-number"><span class="hljs-number">0xF3</span></span> bcmd_cfa: pop rdx #    mov al, [rdx] #  <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">3</span></span> #   -     ,     ,    <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> al, al jz cfa_l8 cmp al, <span class="hljs-number"><span class="hljs-number">1</span></span> jz cfa_l16 cmp al, <span class="hljs-number"><span class="hljs-number">2</span></span> jz cfa_l32 lea rsi, [rdx + <span class="hljs-number"><span class="hljs-number">9</span></span>] #   (<span class="hljs-number"><span class="hljs-number">64</span></span>  ) jmp cfa1 find_l32: lea rsi, [rdx + <span class="hljs-number"><span class="hljs-number">5</span></span>] #   (<span class="hljs-number"><span class="hljs-number">32</span></span>  ) jmp cfa1 find_l16: lea rsi, [rdx + <span class="hljs-number"><span class="hljs-number">3</span></span>] #   (<span class="hljs-number"><span class="hljs-number">16</span></span>  ) jmp cfa1 find_l8: lea rsi, [rdx + <span class="hljs-number"><span class="hljs-number">2</span></span>] #   (<span class="hljs-number"><span class="hljs-number">8</span></span>  ) xor rax, rax lodsb add rsi, rax push rsi jmp _next</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุฎูุฑุงู ุ ูุชู ุชูููุฐ ุงููููุฉ ุ ุฅููุง ุฃุจุณุท: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_execute = <span class="hljs-number"><span class="hljs-number">0xF4</span></span> bcmd_execute: sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> mov [rbp], r8 #       pop r8 #  - jmp _next</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุตุญูุญ ูููุฉ ุชูุณูุฑ ูุชุดุบูู! </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"># : interpret begin blword dup <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> find cfa execute repeat drop ; item interpret interpret: .byte b_blword .byte b_dup .byte b_qnbranch8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . .byte b_find .byte b_cfa .byte b_execute .byte b_branch8 .byte interpret - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_drop .byte b_exit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุทูุงู: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ as forth.s -o forth.o -g -ahlsm &gt;list.txt $ ld forth.o -o forth $ ./forth -2 Bye!</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุฑุฑุง ุ ุญุตู! </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(C) Cat Matroskin ูู</font></font></s> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุงูุน ุ ุฅุฐุง ููุช ุจุทุฑุญ 1 ูู 0 </font><s><font style="vertical-align: inherit;">ูุฃุถูุช</font></s><font style="vertical-align: inherit;"> ุงููุชูุฌุฉ ูููุณู ุ ูุณุชููู -2: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ุดูุก ุฑุงุฆุน ุ ููููู ูุง ุฒูุช ุฃุฑูุฏ ูุชุงุจุฉ ุงูุฃูุงูุฑ ูู ููุญุฉ ุงูููุงุชูุญ. ูููุงู ูุดููุฉ ุฃุฎุฑู - ุญูุซ ูููู ุงููุชุฑุฌู ูุฏููุง ุงูุฃุฑูุงู 0 ู 1 ู 2 ู 3 ู 4 ู 8 ููุท (ูุงูุชู ูุชู ุชุนุฑูููุง ุนูู ุฃููุง ุซูุงุจุช). ูุง ุงูุฐู ูุชุนููู ูููู ุฃู ุฃุฑูุงู ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ูููุฉ "ุฑูู"ุ ุจููุณ ุงูุทุฑููุฉ ุจุงููุณุจุฉ ูููููุฉ find ุ ูู ุฃุณุชุฎุฏู ุงููุฎุฒู ุงููุคูุช. ูููุฉ "ุฑูู"ุ ุณูู ูุณุชุบุฑู ูุนููุชูู ุนูู ุงูููุฏุณ - ุนููุงู ุงูุณูุณูุฉ ูุงูุทูู. ุฅุฐุง ูุฌุญุช ุ ูุณูู ุชูุฑุฌุน ุงูุฑูู ุงููุณุชูู ูุนูุงูุฉ 1. ุฅุฐุง ูู ููุฌุญ ุงูุชุญููู ุ ูุณูููู ููุงู ุฑูู ูุงุญุฏ ูู ุงููุฌููุนุฉ: 0. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุชู ุชุดุบูู ุงูุฑูุฒ ููููู ุทููููุง ุ ููููู ุจุณูุท ูุจุณูุท:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_number = <span class="hljs-number"><span class="hljs-number">0xF5</span></span> bcmd_number: pop rcx #   pop rsi #  xor rax, rax #   xor rbx, rbx #     mov r9, v_base #  xor r10, r10 #   <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> rcx, rcx jz num_false mov bl, [rsi] cmp bl, <span class="hljs-string"><span class="hljs-string">'+'</span></span> jnz <span class="hljs-number"><span class="hljs-number">1f</span></span> inc rsi dec rcx jz num_false jmp num0 <span class="hljs-number"><span class="hljs-number">1</span></span>: cmp bl, <span class="hljs-string"><span class="hljs-string">'-'</span></span> jnz num0 mov r10, <span class="hljs-number"><span class="hljs-number">1</span></span> inc rsi dec rcx jz num_false num0: mov bl, [rsi] cmp bl, <span class="hljs-string"><span class="hljs-string">'0'</span></span> ja num_false cmp bl, <span class="hljs-string"><span class="hljs-string">'9'</span></span> jae num_09 cmp bl, <span class="hljs-string"><span class="hljs-string">'A'</span></span> ja num_false cmp bl, <span class="hljs-string"><span class="hljs-string">'Z'</span></span> jae num_AZ cmp bl, <span class="hljs-string"><span class="hljs-string">'a'</span></span> ja num_false sub bl, <span class="hljs-string"><span class="hljs-string">'a'</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span> jmp num_check num_AZ: sub bl, <span class="hljs-string"><span class="hljs-string">'A'</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span> jmp num_check num_09: sub bl, <span class="hljs-string"><span class="hljs-string">'0'</span></span> num_check: cmp rbx, r9 jge num_false add rax, rbx mul r9 inc rsi dec rcx jnz num0 <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> r10, r10 push rax push <span class="hljs-number"><span class="hljs-number">1</span></span> jmp _next num_false: xor rcx, rcx push rcx jmp _next</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุฏูู ุงูุชูุณูุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ุชูู ุงููููุฉ ูู ุงููุงููุณ ุ ูุณูู ูุญุงูู ุชูุณูุฑูุง ูุฑูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"># : interpret <span class="hljs-meta"><span class="hljs-meta"># begin # blword dup # while # over over find dup # </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> -rot drop drop cfa execute </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> number? drop then # repeat # drop ; item interpret interpret: .byte b_blword .byte b_dup .byte b_qnbranch8 .byte 0f - . .byte b_over .byte b_over .byte b_find .byte b_dup .byte b_qnbranch8 .byte 1f - . .byte b_mrot .byte b_drop .byte b_drop .byte b_cfa .byte b_execute .byte b_branch8 .byte 2f - . 1: .byte b_numberq .byte b_drop 2: .byte b_branch8 .byte interpret - . 0: .byte b_drop .byte b_exit last_item: .byte b_var0 item bye, f_code .byte b_bye</span></span></code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ุญุตูุช! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุตุญูุญ ูุซู ูุฐุง ุงูุฑูุฒ ูู ุงููุฌูุน ุ ุฏูู ููุงุท ุงูุชููู ูู ุงูุฑูุฒ ุงูุจุฑูุฏู ุ ุฏูู ุงููุฏุฑุฉ ุนูู "ุฎุทูุฉ" ุนูู ุทูู ุงูุฑูุฒ ุงููุฑุนู ... ุนูุงูุฉ ุนูู ุฐูู ุ ูุน ุนุฏู ูุฌูุฏ ุฃุณูู ุงูุญุฑูุงุช ุนูู ุงูููุฏุณ ุ ูุฏูู ุงููุฏุฑุฉ ุงูุจุณูุทุฉ ุนูู ุนุฑุถ ูุญุชููุงุช ุงูููุฏุณ ... ูุนูู GDB ุ ุญูุซ ููุท ุณุทุฑ ุงูุฃูุงูุฑ ... ุณุฃุฎุจุฑู - ุฅูู ูุฌุฑุฏ ุงููุฌุงุฑ ูู ุงูุฏูุงุบ! </font><font style="vertical-align: inherit;">ููุณ ุฃุณูุฃ. </font><font style="vertical-align: inherit;">ูุฐุง ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฌุงุฑ ุงูุฏูุงุบ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ... ูุญู ูููุฏ ุ ุณูุฌุฏ ุฏุงุฆููุง </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญููููุง </font><font style="vertical-align: inherit;">:) </font><font style="vertical-align: inherit;">ุจุดูู ุนุงู ุ ูุฌุฏุช ูุฐุง ุงูุญู: ููุช ุจุชูููุฐ ุฃูุฑ ูุนุฑุถ ูุญุชููุงุช ุงูููุฏุณ - "s.". </font><font style="vertical-align: inherit;">ุงูุฃูุฑ ููุณ ุฃุณูู ุ ูููู ูุง ูุฒุงู ูู ุงูุฃุณูู ุชูุณูุฑู. </font><font style="vertical-align: inherit;">ูููุง ุงุชุถุญ ูููุง ุจุนุฏุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ochchchen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุฏุฉ. </font><font style="vertical-align: inherit;">ููู ููุง:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"># : .s depth dup . c<span class="hljs-string"><span class="hljs-string">": emit do dup while dup pick . 1- again drop ; item .s # 11 22 33 prstack: .byte b_depth # 11 22 33 3 .byte b_dup # 11 22 33 3 3 .byte b_lit8 .byte '(' .byte b_emit .byte b_call16 # 11 22 33 3 .word dot - . - 2 .byte b_strp # 11 22 33 3 .byte 3 .ascii "</span></span>): <span class="hljs-string"><span class="hljs-string">" 1: .byte b_dup # 11 22 33 3 3 .byte b_qnbranch8 # 11 22 33 3 .byte 2f - . .byte b_dup # 11 22 33 3 3 .byte b_pick # 11 22 33 3 11 .byte b_call16 # 11 22 33 3 .word dot - . - 2 .byte b_wm # 11 22 33 2 .byte b_branch8 .byte 1b - . 2: .byte b_drop # 11 22 33 .byte b_exit</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงููููู ุ ุฃุนุทูุช ูุซุงูุง ุนูู ูุญุชููุงุช ุงูููุฏุณ ุ ุจุนุฏ ุชูููุฐ ูู ุฃูุฑ. </font><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ููุงู ุฏูุฑุฉ ุ ููุฐู ููุณุช ุณูู ุงูููุฑ ุงูุฃูู. </font><font style="vertical-align: inherit;">ููู ุงูุจุงูู ูุชุดุงุจูุฉ ููุบุงูุฉ ุ ููุท ุงููููุฉ ูู ุงูุฌุฒุก ุงูุนููู ูู ุงูููุฏุณ ุชุชุบูุฑ. </font><font style="vertical-align: inherit;">ุจุนุฏ ูุฐุง "ุงูุชุชุจุน" ุญูู ุงููุฑูู ุนูู ุงูููุฑ! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฃุฌู ุชุตุญูุญ ุงูุฃุฎุทุงุก ุ ููุช ุจุฅูุดุงุก ูุญุฏุงุช ุงููุงูุฑู ุงูุชุงููุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.macro prs new_line = <span class="hljs-number"><span class="hljs-number">1</span></span> .byte b_call16 .word prstack - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> \new_line &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> .byte b_lit8, <span class="hljs-string"><span class="hljs-string">'\n'</span></span> .byte b_emit .endif .endm</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุณุชุฎุฏู ุนู ุทุฑูู ุฅุฏุฎุงู ูู ุงูุฃูุงูู ุงูุตุญูุญุฉ ุจูุฐู ุงูุทุฑููุฉ: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item interpret interpret: .byte b_blword prs .byte b_dup prs .byte b_qnbranch8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . .byte b_over .byte b_over ......</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชูุฌุฉ ูุฐูู ุ ุฃูุชุฌ ุงูุฅุทูุงู ุงูุฃูู ุงูุฅุฎุฑุงุฌ ุงูุชุงูู: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth (2 ): 6297664 1 (3 ): 6297664 1 1 (3 ): 2 6297666 1 (4 ): 2 6297666 1 1 (4 ): 2 3 6297668 1 (5 ): 2 3 6297668 1 1 (3 ): 6 6297670 2 (4 ): 6 6297670 2 2 (4 ): 6 6297670 6297673 1 (5 ): 6 6297670 6297673 1 1 6297670 (2 ): 6 0 (3 ): 6 0 0 Bye!</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฑุคูุฉ ูู ุญุฑูุฉ ุนูู ุงูููุฏุณ ุจูุถูุญ. </font><font style="vertical-align: inherit;">ูุงู ูู ุงูุถุฑูุฑู ุงูููุงู ุจุฐูู ูู ููุช ุณุงุจู :) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฐูุจุช ุฃุจุนุฏ ูู ุฐูู ุนู ุทุฑูู ุฅุฌุฑุงุก ูุงูุฑู ุชุตุญูุญ ุขุฎุฑ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.macro pr <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> .byte b_strp .byte <span class="hljs-number"><span class="hljs-number">9f</span></span> - <span class="hljs-number"><span class="hljs-number">8f</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>: .ascii <span class="hljs-string"><span class="hljs-string">"\n\string"</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>: .endm</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชูุฌุฉ ูุฐูู ุ ุฃุตุจุญ ูู ุงููููู ุงูููุงู ุจุฐูู: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item interpret interpret: .byte b_blword pr blworld prs .byte b_dup .byte b_qnbranch8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . .byte b_over .byte b_over prs .byte b_find pr find prs .byte b_dup .byte b_qnbranch8 .byte <span class="hljs-number"><span class="hljs-number">1f</span></span> - . .byte b_mrot .byte b_drop .byte b_drop .byte b_cfa pr execute prs .byte b_execute .byte b_branch8 .byte <span class="hljs-number"><span class="hljs-number">2f</span></span> - . <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_numberq pr numberq prs .byte b_drop <span class="hljs-number"><span class="hljs-number">2</span></span>: .byte b_branch8 .byte interpret - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_drop .byte b_exit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุญุตู ุนูู ูุฐุง: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth blworld(2 ): 6297664 2 (4 ): 6297664 2 6297664 2 find(3 ): 6297664 2 0 numberq(2 ): 6297664 0 blworld(3 ): 6297664 6297667 2 (5 ): 6297664 6297667 2 6297667 2 find(4 ): 6297664 6297667 2 0 numberq(3 ): 6297664 6297667 0 blworld(4 ): 6297664 6297667 6297670 1 (6 ): 6297664 6297667 6297670 1 6297670 1 find(5 ): 6297664 6297667 6297670 1 6297958 execute(3 ): 6297664 6297667 6297962 blworld(3 ): 39660590749888 6297672 1 (5 ): 39660590749888 6297672 1 6297672 1 find(4 ): 39660590749888 6297672 1 6298496 execute(2 ): 39660590749888 6298500 39660590749888 blworld(1 ): 0 Bye!</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุช ูุญุงููุฉ ูุชูุณูุฑ ุงูุณูุณูุฉ "20 30 *.". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููู ุนุฑุถ ุฃุฑูุงู ุงูุฃุณุทุฑ ุงููุตุฏุฑ ... ุญุณููุง ุ ุฑุจูุง ุจุนุฏ ุฐูู ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ูุฐู ุชูููุฉ ุชุณุฌูู ููุงุณูููุฉ ูุชุตุญูุญ ุงูุฃุฎุทุงุก ุ ูููู ููุงู ุดูุก ูู ุฃุชุฐูุฑู ุนูู ุงูููุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุดูู ุนุงู ุ ููุชูุฌุฉ ููุชุตุญูุญ ุ ูุฌุฏุช ููุฏุณูุง ูุชุฌู ููุฎุงุฑุฌ. ูุฐุง ูู ุนูุณ ุงููุงุฆุถ ุนูุฏูุง ูุญุงูููู ุงุชุฎุงุฐ ุฃูุซุฑ ููุง ูุถุนูุง. ุฃุถุงูุช ุณูุทุฑุชูุง ุฅูู ".s". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุณุงุนุฏุฉ ูุญุฏุงุช ูุงูุฑู ุฌุฏูุฏุฉ ุ ูุงู ุชุตุญูุญ ุงูุฃุฎุทุงุก ุณุฑูุนูุง. ุจุงูููุงุณุจุฉ ุ ูุจู ุฐูู ูุดุฑุช ุฑูุฒูุง ูุงุญุฏูุง ููู ุณุทุฑ. ููู ุงููุฌููุน ูุณูุญ ูู ุจูุถุน ุนุฏุฉ ุจุงูุช ูู ุณูุณูุฉ ุ ููุงุฐุง ูุง ุชุณุชุฎุฏููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูุฎุชุชู ุชุฑุฌูุฉ ุงููููุฉ ุนู ุทุฑูู ุฅุถุงูุฉ ูุญุตูู: ุฃู ุงููููุฉ ูู ูุชู ุชุญููููุง ุฅูู ุฑูู ูุงูุฎุฑูุฌ ูู ุงูููุฏุณ ูู ุงูุฎุงุฑุฌ. ูุชูุฌุฉ ูุฐูู ุ ุงูุชูุณูุฑ ูุงูุชุงูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item interpret interpret: .byte b_blword .byte b_dup .byte b_qnbranch8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . .byte b_over .byte b_over .byte b_find .byte b_dup .byte b_qnbranch8 .byte <span class="hljs-number"><span class="hljs-number">1f</span></span> - . .byte b_mrot .byte b_drop .byte b_drop .byte b_cfa .byte b_execute .byte b_branch8 .byte <span class="hljs-number"><span class="hljs-number">2f</span></span> - . <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_drop .byte b_over, b_over .byte b_numberq # ,    .byte b_qbranch8, <span class="hljs-number"><span class="hljs-number">3f</span></span> - . #     <span class="hljs-number"><span class="hljs-number">0</span></span>, ,      <span class="hljs-number"><span class="hljs-number">3</span></span> .byte b_type #    .byte b_strp #   .byte <span class="hljs-number"><span class="hljs-number">19</span></span> #     .ascii <span class="hljs-string"><span class="hljs-string">" : word not found!\n"</span></span> .byte b_quit #    <span class="hljs-number"><span class="hljs-number">3</span></span>: .byte b_nip, b_nip #  ,     ( b_over, b_over) <span class="hljs-number"><span class="hljs-number">2</span></span>: #       .byte b_depth #    .byte b_zlt # ,   <span class="hljs-number"><span class="hljs-number">0</span></span> ( <span class="hljs-number"><span class="hljs-number">0</span></span>&lt;) .byte b_qnbranch8, interpret_ok - . #   ,    ,   .byte b_strp #    .byte <span class="hljs-number"><span class="hljs-number">14</span></span> .ascii <span class="hljs-string"><span class="hljs-string">"\nstack fault!\n"</span></span> .byte b_quit #    interpret_ok: .byte b_branch8 .byte interpret - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_drop .byte b_exit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูููุงุณุจุฉ ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุฃูุฑ ุงูุฅููุงุน ุนู ุงูุชุฏุฎูู ูููู ุงูุขู ุจุทุฑุฏ ุงูุฃููุงู ููุจุฏุฃ ุงูุชูุณูุฑ ูุฑุฉ ุฃุฎุฑู ุฏูู ุชุบููุฑ ุญุงูุฉ ุงููุฎุฒู ุงููุคูุช. </font><font style="vertical-align: inherit;">ูููุฐุง ุ ูุณุชูุฑ ุงูุชูุณูุฑ ุ ูููู ูุน ูุฏุงุฎู "ุฌุฏูุฏุฉ". </font><font style="vertical-align: inherit;">ุณูููู ุจุฅุตูุงุญ ูุฐุง ูู ููุช ูุงุญู ููููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุดูุก ุงููุญูุฏ ุงููุชุจูู ูู ุชูุธูู ุฅุฏุฎุงู ููุญุฉ ุงูููุงุชูุญ.</font></font><br><br><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฏุฎุงู ููุญุฉ ุงูููุงุชูุญ </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฏุฎุงู ููุญุฉ ุงูููุงุชูุญ ูู ุงูุญุตู ุจุณูุท. </font><font style="vertical-align: inherit;">ููุงู ูููุฉ ุชุชููุน ุ ููุณุชุบุฑู ูุนููุชูู - ุนููุงู ุงููุฎุฒู ุงููุคูุช ูุญุฌูู. </font><font style="vertical-align: inherit;">ูุฐู ุงููููุฉ ูุคุฏู ุฅุฏุฎุงู ููุญุฉ ุงูููุงุชูุญ. </font><font style="vertical-align: inherit;">ูุชู ูุถุน ุงูุนุฏุฏ ุงููุนูู ููุญุฑูู ุงูุชู ุชู ุฅุฏุฎุงููุง ูู ุงููุชุบูุฑ span. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฌุนู ูุฐู ุงููููุงุช. </font><font style="vertical-align: inherit;">ุณูู ูุฏุฎู ูู ุงููุฏุฎูุงุช ุงูููุงุณูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.data item span span: .byte b_var0 v_span: .quad <span class="hljs-number"><span class="hljs-number">0</span></span> .text b_expect = <span class="hljs-number"><span class="hljs-number">0x88</span></span> bcmd_expect: mov rax, <span class="hljs-number"><span class="hljs-number">0</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> - sys_read mov rdi, <span class="hljs-number"><span class="hljs-number">0</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> pop rdx #   pop rsi #   push r8 syscall #   pop r8 mov rbx, rax <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> rax, rax jge <span class="hljs-number"><span class="hljs-number">1f</span></span> xor rbx, rbx <span class="hljs-number"><span class="hljs-number">1</span></span>: mov v_span, rbx jmp _next</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุฅูุดุงุก ูุฎุฒู ูุคูุช ุฅุฏุฎุงู ููุญุฉ ุงูููุงุชูุญ. </font><font style="vertical-align: inherit;">ููููู ุทูููุง 256 ุญุฑููุง. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฌุนููุง ููุงู ุฎุท ุงูุงุฎุชุจุงุฑ ุงูุณุงุจู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">inbuf_size = <span class="hljs-number"><span class="hljs-number">256</span></span> inbuf: .byte b_var0 .space inbuf_size</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญู ุชุนุฏูู ุงูุฅููุงุน ุนู ุงูุชุฏุฎูู ุ ูุถูุง ุนู ุจุฏุงูุฉ ุงูุฑูุฒ. </font><font style="vertical-align: inherit;">ุนููู ูุชุบูุฑ tib ุฅูู ูุฎุฒู ุงูุฅุฏุฎุงู ุงููุคูุช inbuf ุ ุชููุน ุงูููุงููุฉ ุ ุซู ุงูุณุฎ ุงููููุฉ ูู span ุฅูู #tib. </font><font style="vertical-align: inherit;">&gt; ูู ุงููุชุบูุฑ ููุบู ุ ูุญู ูุณูู ุงูุชูุณูุฑ. </font><font style="vertical-align: inherit;">ูููุฐุง ููุฑุฑ ูู ุฏูุฑุฉ. </font><font style="vertical-align: inherit;">ููุงู ูุฌููุนุงุช - ูุฅุถุงูุฉ ููุฌู ุฅุฏุฎุงู ูุณูููู ูู ุงูุฌูุฏ ุนุฑุถ ุญุงูุฉ ุงูููุฏุณ (ููุฏููุง ุจุงููุนู ุฃูุฑ ุฌุงูุฒ ููุฐุง!). </font><font style="vertical-align: inherit;">ุจุนุฏ ุนุฏุฉ ุชูุฑุงุฑุงุช ุ ุญุตููุง ุนูู ุงูููุฏ ุงูุชุงูู (start and quit command):</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta"># forth last_item context @ ! quit start: .byte b_call16 .word forth - . - 2 .byte b_call16 .word last_item - . - 2 .byte b_call16 .word context - . - 2 .byte b_get .byte b_set .byte b_quit inbuf: .byte b_var0 .space inbuf_size # begin inbuf dup tib ! inbuf_size expect span @ #tib ! 0 &gt;in ! interpret again quit: .byte b_strp, 1 .ascii </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n"</span></span></span><span class="hljs-meta"> .byte b_call16 .word prstack - . - 2 .byte b_strp .byte 2 .ascii </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&gt; "</span></span></span><span class="hljs-meta"> .byte b_call16 .word inbuf - . - 2 .byte b_dup .byte b_call16 .word tib - . - 2 .byte b_set .byte b_lit16 .word inbuf_size .byte b_expect .byte b_call16 .word span - . - 2 .byte b_get .byte b_call16 .word ntib - . - 2 .byte b_set .byte b_num0 .byte b_call16 .word bin - . - 2 .byte b_set .byte b_call16 .word interpret - . - 2 .byte b_branch8, quit - .</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุง ุงููุชูุฌุฉ: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth ( 0 ): &gt; 60 ( 1 ): 60 &gt; 60 24 ( 3 ): 60 60 24 &gt; rot ( 3 ): 60 24 60 &gt; -rot ( 3 ): 60 60 24 &gt; swap ( 3 ): 60 24 60 &gt; * * . 86400 ( 0 ): &gt; 200 30 /mod ( 2 ): 20 6 &gt; bye Bye! $</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุดูุก ุจุนุฏ ุฑูุฒ "&gt;" ูู ุฅุฏุฎุงู ููุญุฉ ุงูููุงุชูุญ. </font><font style="vertical-align: inherit;">ุงูุจุงูู ูู ุฅุฌุงุจุฉ ุงููุธุงู. </font><font style="vertical-align: inherit;">ููุฏ ูุนุจุช ููููุง ูุน ุงูุฃูุงูุฑ ุ ูุงููุชุงุจุฉ ูู ููุญุฉ ุงูููุงุชูุญ. </font><font style="vertical-align: inherit;">ุฃุฌุฑู ุนุฏุฉ ุนูููุงุช ุงูููุฏุณ ุ ูุญุณุงุจ ุนุฏุฏ ุงูุซูุงูู ูู ุฃูุงู.</font></font><br><br><h4 style=";text-align:right;direction:rtl">  ููุฎุต </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชุฑุฌู ุงููุงูู ููุนูู. </font><font style="vertical-align: inherit;">ููููู ุจุฃุฏุจ ูุฏุงุนุง - ูู "ูุฏุงุนุง" ู "ูุฏุงุนุง" :) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏุนูุฉ - โโูุญุชููุงุช ุงูููุฏุณ ุงูุญุณุงุจู. </font><font style="vertical-align: inherit;">ุงูุฑูู ุงูุฃูู ุจูู ููุณูู ูู ุญุฌู ุงูููุฏุณ ุ ุซู ุงููุญุชููุงุช ุ ูุงููุทุงูุจุฉ ุจุฅุฏุฎุงู "&gt;". </font><font style="vertical-align: inherit;">ููููู ุฅุฏุฎุงู ุฃู ุฃูุงูุฑ ูููุฐุฉ (ุญุณุจุช 76 ุฃูุฑูุง). </font><font style="vertical-align: inherit;">ุตุญูุญ ุ ูุซูุฑ ูู ุงูููุทูู ููุท ูููุชุฑุฌู - ุนูู ุณุจูู ุงููุซุงู ุ ุงูุญุฑูู ุ ูุงูุงูุชูุงูุงุช ุ ูุฃูุงูุฑ ุงูุงุญุชุฌุงุฌ.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตุฏุฑ ูุงูู (ุญูุงูู 1300 ุฎุท)</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.intel_syntax noprefix stack_size = <span class="hljs-number"><span class="hljs-number">1024</span></span> f_code = <span class="hljs-number"><span class="hljs-number">0x80</span></span> f_immediate = <span class="hljs-number"><span class="hljs-number">0x60</span></span> .macro item name, flags = <span class="hljs-number"><span class="hljs-number">0</span></span> link = p_item - . <span class="hljs-number"><span class="hljs-number">9</span></span>: .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> link &gt;= <span class="hljs-number"><span class="hljs-number">-256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; link &lt; <span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> .byte \flags .byte link .elseif link &gt;= <span class="hljs-number"><span class="hljs-number">-256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; link &lt; <span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> .byte \flags | <span class="hljs-number"><span class="hljs-number">1</span></span> .word link .elseif link &gt;= <span class="hljs-number"><span class="hljs-number">-256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; link &lt; <span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> .byte \flags | <span class="hljs-number"><span class="hljs-number">2</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> link .elseif link &gt;= <span class="hljs-number"><span class="hljs-number">-256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; link &lt; <span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> .byte \flags | <span class="hljs-number"><span class="hljs-number">3</span></span> .quad link .endif p_item = <span class="hljs-number"><span class="hljs-number">9b</span></span> .byte <span class="hljs-number"><span class="hljs-number">9f</span></span> - . - <span class="hljs-number"><span class="hljs-number">1</span></span> .ascii <span class="hljs-string"><span class="hljs-string">"\name"</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>: .endm .section .data init_stack: .quad <span class="hljs-number"><span class="hljs-number">0</span></span> init_rstack: .quad <span class="hljs-number"><span class="hljs-number">0</span></span> emit_buf: .byte <span class="hljs-number"><span class="hljs-number">0</span></span> inbuf_size = <span class="hljs-number"><span class="hljs-number">256</span></span> msg_bad_byte: .ascii <span class="hljs-string"><span class="hljs-string">"Bad byte code!\n"</span></span> msg_bad_byte_len = . - msg_bad_byte #  len    msg_bye: .ascii <span class="hljs-string"><span class="hljs-string">"\nBye!\n"</span></span> msg_bye_len = . - msg_bye bcmd: .quad bcmd_bad, bcmd_bye, bcmd_num0, bcmd_num1, bcmd_num2, bcmd_num3, bcmd_num4, bcmd_num8 # <span class="hljs-number"><span class="hljs-number">0x00</span></span> .quad bcmd_lit8, bcmd_lit16, bcmd_lit32, bcmd_lit64, bcmd_call8, bcmd_call16, bcmd_call32, bcmd_bad .quad bcmd_branch8, bcmd_branch16, bcmd_qbranch8, bcmd_qbranch16, bcmd_qnbranch8, bcmd_qnbranch16,bcmd_bad, bcmd_exit # <span class="hljs-number"><span class="hljs-number">0x10</span></span> .quad bcmd_wp, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_wm, bcmd_add, bcmd_sub, bcmd_mul, bcmd_div, bcmd_mod, bcmd_divmod, bcmd_abs # <span class="hljs-number"><span class="hljs-number">0x20</span></span> .quad bcmd_var0, bcmd_var8, bcmd_var16, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_dup, bcmd_drop, bcmd_swap, bcmd_rot, bcmd_mrot, bcmd_over, bcmd_pick, bcmd_roll # <span class="hljs-number"><span class="hljs-number">0x30</span></span> .quad bcmd_depth, bcmd_nip, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_get, bcmd_set, bcmd_get8, bcmd_set8, bcmd_get16, bcmd_set16, bcmd_get32, bcmd_set32 # <span class="hljs-number"><span class="hljs-number">0x40</span></span> .quad bcmd_setp, bcmd_setm, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_zeq, bcmd_zlt, bcmd_zgt, bcmd_eq, bcmd_lt, bcmd_gt, bcmd_lteq, bcmd_gteq # <span class="hljs-number"><span class="hljs-number">0x50</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_2r, bcmd_r2, bcmd_rget, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x60</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_type, bcmd_emit, bcmd_str, bcmd_strp, bcmd_count, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x80</span></span> .quad bcmd_expect, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x90</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_blword, bcmd_quit, bcmd_find, bcmd_cfa, bcmd_execute, bcmd_numberq, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0xF0</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # forth last_item context @ ! quit start: .byte b_call16 .word forth - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_call16 .word last_item - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_call16 .word context - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_get .byte b_set .byte b_quit inbuf: .byte b_var0 .space inbuf_size # begin inbuf dup tib ! inbuf_size expect span @ #tib ! <span class="hljs-number"><span class="hljs-number">0</span></span> &gt;in ! interpret again quit: .byte b_strp, <span class="hljs-number"><span class="hljs-number">1</span></span> .ascii <span class="hljs-string"><span class="hljs-string">"\n"</span></span> .byte b_call16 .word prstack - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_strp .byte <span class="hljs-number"><span class="hljs-number">2</span></span> .ascii <span class="hljs-string"><span class="hljs-string">"&gt; "</span></span> .byte b_call16 .word inbuf - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_dup .byte b_call16 .word tib - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_set .byte b_lit16 .word inbuf_size .byte b_expect .byte b_call16 .word span - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_get .byte b_call16 .word ntib - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_set .byte b_num0 .byte b_call16 .word bin - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_set .byte b_call16 .word interpret - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_branch8, quit - . p_item = . item forth forth: .byte b_var8 .byte does_voc - . .quad <span class="hljs-number"><span class="hljs-number">0</span></span> does_voc: .byte b_call8 .byte context - . - <span class="hljs-number"><span class="hljs-number">1</span></span> .byte b_set .byte b_exit item current .byte b_var0 .quad <span class="hljs-number"><span class="hljs-number">0</span></span> item context context: .byte b_var0 v_context: .quad <span class="hljs-number"><span class="hljs-number">0</span></span> item <span class="hljs-number"><span class="hljs-number">0</span></span>, f_code .byte b_num0 .byte b_exit item <span class="hljs-number"><span class="hljs-number">1</span></span>, f_code .byte b_num1 .byte b_exit item <span class="hljs-number"><span class="hljs-number">2</span></span>, f_code .byte b_num2 .byte b_exit item <span class="hljs-number"><span class="hljs-number">3</span></span>, f_code .byte b_num3 .byte b_exit item <span class="hljs-number"><span class="hljs-number">4</span></span>, f_code .byte b_num4 .byte b_exit item <span class="hljs-number"><span class="hljs-number">8</span></span>, f_code .byte b_num8 .byte b_exit item lit8, f_code .byte b_lit8 .byte <span class="hljs-number"><span class="hljs-number">31</span></span> .byte b_exit item lit16, f_code .byte b_lit16 .word <span class="hljs-number"><span class="hljs-number">31415</span></span> .byte b_exit item lit32, f_code .byte b_lit32 .<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">31415926</span></span> .byte b_exit item lit64, f_code .byte b_lit64 .quad <span class="hljs-number"><span class="hljs-number">31415926</span></span> .byte b_exit item call8, f_code .byte b_call8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_exit item call16, f_code .byte b_call16 .word <span class="hljs-number"><span class="hljs-number">0f</span></span> - . - <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_exit item call32, f_code .byte b_call32 .<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0f</span></span> - . - <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_exit item branch8, f_code .byte b_branch8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_exit item branch16, f_code .byte b_branch16 .word <span class="hljs-number"><span class="hljs-number">0f</span></span> - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_exit item qbranch8, f_code .byte b_qbranch8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_exit item qbranch16, f_code .byte b_qbranch16 .word <span class="hljs-number"><span class="hljs-number">0f</span></span> - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_exit item <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>, f_code .byte b_exit item <span class="hljs-number"><span class="hljs-number">1</span></span>-, f_code .byte b_wm .byte b_exit item <span class="hljs-number"><span class="hljs-number">1</span></span>+, f_code .byte b_wp .byte b_exit item +, f_code .byte b_add .byte b_exit item -, f_code .byte b_sub .byte b_exit item *, f_code .byte b_mul .byte b_exit item /, f_code .byte b_div .byte b_exit item mod, f_code .byte b_mod .byte b_exit item /mod, f_code .byte b_divmod .byte b_exit item <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>, f_code .byte b_abs .byte b_exit item dup, f_code .byte b_dup .byte b_exit item drop, f_code .byte b_drop .byte b_exit item swap, f_code .byte b_swap .byte b_exit item rot, f_code .byte b_rot .byte b_exit item -rot, f_code .byte b_mrot .byte b_exit item over, f_code .byte b_over .byte b_exit item pick, f_code .byte b_pick .byte b_exit item roll, f_code .byte b_roll .byte b_exit item depth, f_code .byte b_depth .byte b_exit item @, f_code .byte b_get .byte b_exit item !, f_code .byte b_set .byte b_exit item c@, f_code .byte b_get8 .byte b_exit item c!, f_code .byte b_set8 .byte b_exit item w@, f_code .byte b_get16 .byte b_exit item w!, f_code .byte b_set16 .byte b_exit item i@, f_code .byte b_get32 .byte b_exit item i!, f_code .byte b_set32 .byte b_exit item +!, f_code .byte b_setp .byte b_exit item -!, f_code .byte b_setm .byte b_exit item &gt;r, f_code .byte b_2r .byte b_exit item r&gt;, f_code .byte b_r2 .byte b_exit item r@, f_code .byte b_rget .byte b_exit item <span class="hljs-string"><span class="hljs-string">"0="</span></span>, f_code .byte b_zeq .byte b_exit item <span class="hljs-number"><span class="hljs-number">0</span></span>&lt;, f_code .byte b_zlt .byte b_exit item <span class="hljs-number"><span class="hljs-number">0</span></span>&gt;, f_code .byte b_zgt .byte b_exit item <span class="hljs-string"><span class="hljs-string">"="</span></span>, f_code .byte b_eq .byte b_exit item &lt;, f_code .byte b_lt .byte b_exit item &gt;, f_code .byte b_gt .byte b_exit item <span class="hljs-string"><span class="hljs-string">"&lt;="</span></span>, f_code .byte b_lteq .byte b_exit item <span class="hljs-string"><span class="hljs-string">"&gt;="</span></span>, f_code .byte b_gteq .byte b_exit item type, f_code .byte b_type .byte b_exit item expect, f_code .byte b_expect .byte b_exit item emit, f_code .byte b_emit .byte b_exit item count, f_code .byte b_count .byte b_exit item <span class="hljs-string"><span class="hljs-string">"(\")"</span></span>, f_code .byte b_str .byte b_exit item <span class="hljs-string"><span class="hljs-string">"(.\")"</span></span>, f_code .byte b_strp .byte b_exit item var8, f_code .byte b_var8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_exit item var16, f_code .byte b_var16 .word <span class="hljs-number"><span class="hljs-number">0f</span></span> - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_exit item base base: .byte b_var0 v_base: .quad <span class="hljs-number"><span class="hljs-number">10</span></span> holdbuf_len = <span class="hljs-number"><span class="hljs-number">70</span></span> item holdbuf holdbuf: .byte b_var0 .space holdbuf_len item holdpoint holdpoint: .byte b_var0 .quad <span class="hljs-number"><span class="hljs-number">0</span></span> item span span: .byte b_var0 v_span: .quad <span class="hljs-number"><span class="hljs-number">0</span></span> # : hold holdpoint @ <span class="hljs-number"><span class="hljs-number">1</span></span>- dup holdbuf &gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> drop drop <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dup holdpoint ! c! then ; item hold hold: .byte b_call8 .byte holdpoint - . - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-meta"><span class="hljs-meta"># holdpoint .byte b_get # @ .byte b_wm # 1- .byte b_dup # dup .byte b_call8 .byte holdbuf - . - 1 # holdbuf .byte b_gt # &gt; .byte b_qbranch8 # </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> .byte 0f - . .byte b_drop # drop .byte b_drop # drop .byte b_branch8 #     ( then) .byte 1f - . 0: .byte b_dup # dup .byte b_call8 .byte holdpoint - . - 1 # holdpoint .byte b_set # ! .byte b_set8 # c! 1: .byte b_exit # ; # : # base /mod swap dup 10 </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt; if c" 0 + else 10 - c" A + then hold ; item # conv: .byte b_call16 .word base - . - 2 # base .byte b_get # @ .byte b_divmod # /mod .byte b_swap # swap .byte b_dup # dup .byte b_lit8 .byte 10 # 10 .byte b_lt # &lt; .byte b_qnbranch8 # if .byte 0f - . .byte b_lit8 .byte '0' # c" 0 .byte b_add # + .byte b_branch8 # else .byte 1f - . 0: .byte b_lit8 .byte '?' # c" A .byte b_add # + 1: .byte b_call16 .word hold - . - 2 # hold .byte b_exit # ; # : &lt;# holdbuf 70 + holdpoint ! ; item &lt;# conv_start: .byte b_call16 .word holdbuf - . - 2 .byte b_lit8 .byte holdbuf_len .byte b_add .byte b_call16 .word holdpoint - . - 2 .byte b_set .byte b_exit # : #s do # dup 0=until ; item #s conv_s: .byte b_call8 .byte conv - . - 1 .byte b_dup .byte b_qbranch8 .byte conv_s - . .byte b_exit # : #&gt; holdpoint @ holdbuf 70 + over - ; item #&gt; conv_end: .byte b_call16 .word holdpoint - . - 2 .byte b_get .byte b_call16 .word holdbuf - . - 2 .byte b_lit8 .byte holdbuf_len .byte b_add .byte b_over .byte b_sub .byte b_exit item . dot: .byte b_dup .byte b_abs .byte b_call8 .byte conv_start - . - 1 .byte b_lit8 .byte ' ' .byte b_call16 .word hold - . - 2 .byte b_call8 .byte conv_s - . - 1 .byte b_drop .byte b_zlt .byte b_qnbranch8 .byte 1f - . .byte b_lit8 .byte '-' .byte b_call16 .word hold - . - 2 1: .byte b_call8 .byte conv_end - . - 1 .byte b_type .byte b_exit item tib tib: .byte b_var0 v_tib: .quad 0 item #tib ntib: .byte b_var0 v_ntib: .quad 0 item &gt;in bin: .byte b_var0 v_in: .quad 0 # : .s depth dup . c": emit do dup while dup pick . 1- again drop ; item .s # 11 22 33 prstack: .byte b_depth # 11 22 33 3 .byte b_dup # 11 22 33 3 3 .byte b_strp .byte 2 .ascii "( " .byte b_call16 # 11 22 33 3 .word dot - . - 2 .byte b_strp # 11 22 33 3 .byte 3 .ascii "): " .byte b_dup, b_zlt .byte b_qnbranch8, 1f - . .byte b_strp .byte 14 .ascii "\nStack fault!\n" .byte b_quit 1: .byte b_dup # 11 22 33 3 3 .byte b_qnbranch8 # 11 22 33 3 .byte 2f - . .byte b_dup # 11 22 33 3 3 .byte b_pick # 11 22 33 3 11 .byte b_call16 # 11 22 33 3 .word dot - . - 2 .byte b_wm # 11 22 33 2 .byte b_branch8 .byte 1b - . 2: .byte b_drop # 11 22 33 .byte b_exit .macro prs new_line = 1 .byte b_call16 .word prstack - . - 2 .if \new_line &gt; 0 .byte b_lit8, '\n' .byte b_emit .endif .endm .macro pr string .byte b_strp .byte 9f - 8f 8: .ascii "\n\string" 9: .endm item interpret interpret: .byte b_blword .byte b_dup .byte b_qnbranch8 .byte 0f - . .byte b_over .byte b_over .byte b_find .byte b_dup .byte b_qnbranch8 .byte 1f - . .byte b_mrot .byte b_drop .byte b_drop .byte b_cfa .byte b_execute .byte b_branch8 .byte 2f - . 1: .byte b_drop .byte b_over, b_over .byte b_numberq # ,    .byte b_qbranch8, 3f - . #     0, ,      3 .byte b_type #    .byte b_strp #   .byte 19 #     .ascii " : word not found!\n" .byte b_quit #    3: .byte b_nip, b_nip #  ,     ( b_over, b_over) 2: #       .byte b_depth #    .byte b_zlt # ,   0 ( 0&lt;) .byte b_qnbranch8, interpret_ok - . #   ,    ,   .byte b_strp #    .byte 14 .ascii "\nstack fault!\n" .byte b_quit #    interpret_ok: .byte b_branch8 .byte interpret - . 0: .byte b_drop .byte b_exit last_item: .byte b_var0 item bye, f_code .byte b_bye .section .text .global _start #     _start: mov rbp, rsp sub rbp, stack_size lea r8, start mov init_stack, rsp mov init_rstack, rbp jmp _next b_var0 = 0x28 bcmd_var0: push r8 b_exit = 0x17 bcmd_exit: mov r8, [rbp] add rbp, 8 _next: movzx rcx, byte ptr [r8] inc r8 jmp [bcmd + rcx*8] b_num0 = 0x02 bcmd_num0: push 0 jmp _next b_num1 = 0x03 bcmd_num1: push 1 jmp _next b_num2 = 0x04 bcmd_num2: push 2 jmp _next b_num3 = 0x05 bcmd_num3: push 3 jmp _next b_num4 = 0x06 bcmd_num4: push 4 jmp _next b_num8 = 0x07 bcmd_num8: push 8 jmp _next b_lit8 = 0x08 bcmd_lit8: movsx rax, byte ptr [r8] inc r8 push rax jmp _next b_lit16 = 0x09 bcmd_lit16: movsx rax, word ptr [r8] add r8, 2 push rax jmp _next b_call8 = 0x0C bcmd_call8: movsx rax, byte ptr [r8] sub rbp, 8 inc r8 mov [rbp], r8 add r8, rax jmp _next b_call16 = 0x0D bcmd_call16: movsx rax, word ptr [r8] sub rbp, 8 add r8, 2 mov [rbp], r8 add r8, rax jmp _next b_call32 = 0x0E bcmd_call32: movsx rax, dword ptr [r8] sub rbp, 8 add r8, 4 mov [rbp], r8 add r8, rax jmp _next b_lit32 = 0x0A bcmd_lit32: movsx rax, dword ptr [r8] add r8, 4 push rax jmp _next b_lit64 = 0x0B bcmd_lit64: mov rax, [r8] add r8, 8 push rax jmp _next b_dup = 0x30 bcmd_dup: push [rsp] jmp _next b_wm = 0x20 bcmd_wm: decq [rsp] jmp _next b_wp = 0x18 bcmd_wp: incq [rsp] jmp _next b_add = 0x21 bcmd_add: pop rax add [rsp], rax jmp _next b_sub = 0x22 bcmd_sub: pop rax sub [rsp], rax jmp _next b_mul = 0x23 bcmd_mul: pop rax pop rbx imul rbx push rax jmp _next b_div = 0x24 bcmd_div: pop rbx pop rax cqo idiv rbx push rax jmp _next b_mod = 0x25 bcmd_mod: pop rbx pop rax cqo idiv rbx push rdx jmp _next b_divmod = 0x26 bcmd_divmod: pop rbx pop rax cqo idiv rbx push rdx push rax jmp _next b_abs = 0x27 bcmd_abs: mov rax, [rsp] or rax, rax jge _next neg rax mov [rsp], rax jmp _next b_drop = 0x31 bcmd_drop: add rsp, 8 jmp _next b_swap = 0x32 bcmd_swap: pop rax pop rbx push rax push rbx jmp _next b_rot = 0x33 bcmd_rot: pop rax pop rbx pop rcx push rbx push rax push rcx jmp _next b_mrot = 0x34 bcmd_mrot: pop rcx pop rbx pop rax push rcx push rax push rbx jmp _next b_over = 0x35 bcmd_over: push [rsp + 8] jmp _next b_pick = 0x36 bcmd_pick: pop rcx push [rsp + 8*rcx] jmp _next b_roll = 0x37 bcmd_roll: pop rcx mov rbx, [rsp + 8*rcx] roll1: mov rax, [rsp + 8*rcx - 8] mov [rsp + 8*rcx], rax dec rcx jnz roll1 push rbx jmp _next b_depth = 0x38 bcmd_depth: mov rax, init_stack sub rax, rsp sar rax, 3 push rax jmp _next b_nip = 0x39 bcmd_nip: pop rax mov [rsp], rax jmp _next b_get = 0x40 bcmd_get: pop rcx push [rcx] jmp _next b_set = 0x41 bcmd_set: pop rcx pop rax mov [rcx], rax jmp _next b_get8 = 0x42 bcmd_get8: pop rcx movsx rax, byte ptr [rcx] push rax jmp _next b_set8 = 0x43 bcmd_set8: pop rcx pop rax mov [rcx], al jmp _next b_get16 = 0x44 bcmd_get16: pop rcx movsx rax, word ptr [rcx] push rax jmp _next b_set16 = 0x45 bcmd_set16: pop rcx pop rax mov [rcx], ax jmp _next b_get32 = 0x46 bcmd_get32: pop rcx movsx rax, dword ptr [rcx] push rax jmp _next b_set32 = 0x47 bcmd_set32: pop rcx pop rax mov [rcx], eax jmp _next b_setp = 0x48 bcmd_setp: pop rcx pop rax add [rcx], rax jmp _next b_setm = 0x49 bcmd_setm: pop rcx pop rax sub [rcx], rax jmp _next b_2r = 0x60 bcmd_2r: pop rax sub rbp, 8 mov [rbp], rax jmp _next b_r2 = 0x61 bcmd_r2: push [rbp] add rbp, 8 jmp _next b_rget = 0x62 bcmd_rget: push [rbp] jmp _next # 0= b_zeq = 0x50 bcmd_zeq: pop rax or rax, rax jnz rfalse rtrue: push -1 jmp _next rfalse: push 0 jmp _next # 0&lt; b_zlt = 0x51 bcmd_zlt: pop rax or rax, rax jl rtrue push 0 jmp _next # 0&gt; b_zgt = 0x52 bcmd_zgt: pop rax or rax, rax jg rtrue push 0 jmp _next # = b_eq = 0x53 bcmd_eq: pop rbx pop rax cmp rax, rbx jz rtrue push 0 jmp _next # &lt; b_lt = 0x54 bcmd_lt: pop rbx pop rax cmp rax, rbx jl rtrue push 0 jmp _next # &gt; b_gt = 0x55 bcmd_gt: pop rbx pop rax cmp rax, rbx jg rtrue push 0 jmp _next # &lt;= b_lteq = 0x56 bcmd_lteq: pop rbx pop rax cmp rax, rbx jle rtrue push 0 jmp _next # &gt;= b_gteq = 0x57 bcmd_gteq: pop rbx pop rax cmp rax, rbx jge rtrue push 0 jmp _next b_var8 = 0x29 bcmd_var8: push r8 b_branch8 = 0x10 bcmd_branch8: movsx rax, byte ptr [r8] add r8, rax jmp _next b_var16 = 0x30 bcmd_var16: push r8 b_branch16 = 0x11 bcmd_branch16: movsx rax, word ptr [r8] add r8, rax jmp _next b_qbranch8 = 0x12 bcmd_qbranch8: pop rax or rax, rax jnz bcmd_branch8 inc r8 jmp _next b_qbranch16 = 0x13 bcmd_qbranch16: pop rax or rax, rax jnz bcmd_branch16 add r8, 2 jmp _next b_qnbranch8 = 0x14 bcmd_qnbranch8: pop rax or rax, rax jz bcmd_branch8 inc r8 jmp _next b_qnbranch16 = 0x15 bcmd_qnbranch16:pop rax or rax, rax jz bcmd_branch16 add r8, 2 jmp _next b_bad = 0x00 bcmd_bad: mov rax, 1 #    1 - sys_write mov rdi, 1 #   1  stdout mov rsi, offset msg_bad_byte #     mov rdx, msg_bad_byte_len #   syscall #   mov rax, 60 #    1 - sys_exit mov rbx, 1 #    1 syscall #   b_bye = 0x01 bcmd_bye: mov rax, 1 #    1 - sys_write mov rdi, 1 #   1  stdout mov rsi, offset msg_bye #     mov rdx, msg_bye_len #   syscall #   mov rax, 60 #    60 - sys_exit mov rdi, 0 #    0 syscall #   b_strp = 0x83 bcmd_strp: movsx rax, byte ptr [r8] inc r8 push r8 add r8, rax push rax b_type = 0x80 bcmd_type: mov rax, 1 #    1 - sys_write mov rdi, 1 #   1 - stdout pop rdx #   pop rsi #   push r8 syscall #   pop r8 jmp _next b_expect = 0x88 bcmd_expect: mov rax, 0 #    1 - sys_read mov rdi, 0 #   1 - stdout pop rdx #   pop rsi #   push r8 syscall #   pop r8 mov rbx, rax or rax, rax jge 1f xor rbx, rbx 1: mov v_span, rbx jmp _next b_str = 0x82 bcmd_str: movzx rax, byte ptr [r8] lea r8, [r8 + rax + 1] jmp _next b_count = 0x84 bcmd_count: pop rcx movzx rax, byte ptr [rcx] inc rcx push rcx push rax jmp _next b_emit = 0x81 bcmd_emit: pop rax mov rsi, offset emit_buf #   mov [rsi], al mov rax, 1 #    1 - sys_write mov rdi, 1 #   1 - stdout mov rdx, 1 #   push r8 syscall #   pop r8 jmp _next b_blword = 0xF0 bcmd_blword: mov rsi, v_tib #    mov rdx, rsi #   RDX       mov rax, v_in #     mov rcx, v_ntib #    mov rbx, rcx add rsi, rax #  RSI -      sub rcx, rax #     jz 3f word2: lodsb #   AL  RSI   cmp al, ' ' ja 1f #    (    ) dec rcx jnz word2 #    3: sub rsi, rdx mov v_in, rsi push rcx jmp _next 1: lea rdi, [rsi - 1] # RDI = RSI - 1 ( ) dec rcx jz word9 word3: lodsb cmp al, ' ' jbe 2f dec rcx jnz word3 word9: inc rsi 2: mov rax, rsi sub rsi, rdx #        (   ) cmp rsi, rbx jle 4f mov rsi, rbx 4: mov v_in, rsi sub rax, rdi dec rax jz word1 push rdi #   word1: push rax #   jmp _next b_quit = 0xF1 bcmd_quit: lea r8, quit mov rsp, init_stack mov rbp, init_rstack jmp _next b_find = 0xF2 bcmd_find: pop rbx #   pop r9 #   mov rdx, v_context mov rdx, [rdx] #        #   find0: mov al, [rdx] #  and al, 3 #   -     ,     ,    or al, al jz find_l8 cmp al, 1 jz find_l16 cmp al, 2 jz find_l32 mov r10, [rdx + 1] #  64  lea rsi, [rdx + 9] #   jmp find1 find_l32: movsx r10, dword ptr [rdx + 1] #  32  lea rsi, [rdx + 5] #   jmp find1 find_l16: movsx r10, word ptr [rdx + 1] #  16  lea rsi, [rdx + 3] #   jmp find1 find_l8: movsx r10, byte ptr [rdx + 1] #  8  lea rsi, [rdx + 2] #   find1: movzx rax, byte ptr [rsi] #       cmp rax, rbx jz find2 #      find3: or r10, r10 jz find_notfound #  ,    add rdx, r10 #     jmp find0 #  ,   find2: inc rsi mov rdi, r9 mov rcx, rax repz cmpsb jnz find3 #   push rdx jmp _next find_notfound: push r10 jmp _next b_cfa = 0xF3 bcmd_cfa: pop rdx #    mov al, [rdx] #  and al, 3 #   -     ,     ,    or al, al jz cfa_l8 cmp al, 1 jz cfa_l16 cmp al, 2 jz cfa_l32 lea rsi, [rdx + 9] #   (64  ) jmp cfa1 cfa_l32: lea rsi, [rdx + 5] #   (32  ) jmp cfa1 cfa_l16: lea rsi, [rdx + 3] #   (16  ) jmp cfa1 cfa_l8: lea rsi, [rdx + 2] #   (8  ) cfa1: xor rax, rax lodsb add rsi, rax push rsi jmp _next b_execute = 0xF4 bcmd_execute: sub rbp, 8 mov [rbp], r8 #       pop r8 #  - jmp _next b_numberq = 0xF5 bcmd_numberq: pop rcx #   pop rsi #  xor rax, rax #   xor rbx, rbx #     mov r9, v_base #  xor r10, r10 #   or rcx, rcx jz num_false mov bl, [rsi] cmp bl, '+' jnz 1f inc rsi dec rcx jz num_false jmp num0 1: cmp bl, '-' jnz num0 mov r10, 1 inc rsi dec rcx jz num_false num0: mov bl, [rsi] cmp bl, '0' jb num_false cmp bl, '9' jbe num_09 cmp bl, 'A' jb num_false cmp bl, 'Z' jbe num_AZ cmp bl, 'a' jb num_false cmp bl, 'z' ja num_false sub bl, 'a' - 10 jmp num_check num_AZ: sub bl, 'A' - 10 jmp num_check num_09: sub bl, '0' num_check: cmp rbx, r9 jge num_false mul r9 add rax, rbx inc rsi dec rcx jnz num0 or r10, r10 push rax push 1 jmp _next num_false: xor rcx, rcx push rcx jmp _next</span></span></span></span></code> </pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุฒ ุงููุตุฏุฑ ูุฒุฏุงุฏ ุ ูุฐูู ุฃุญุถุฑู ููุง ูููุฑุฉ ุงูุฃุฎูุฑุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ููุงู ุฅูุงูุชู ุงูุขู ุนูู ูููุน github: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/hal9000cc/forth64</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ููุณ ุงูููุงู ุ ููููู ุงูุนุซูุฑ ุนูู ุงูุฅุตุฏุงุฑ ุงูุฐู ุชู ุชุฌููุนู ุจุงููุนู ููุธุงู ุงูุชุดุบูู Linux x64 ูู ูุฌูุฏ bin. ูู ูุฏูู ูุธุงู Linux ุ ููููู ุงูุชูุฒูู ูุงูุชุดุบูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุฏูู Windows - ููููู ุชุซุจูุช WSL (ูุธุงู Windows ุงููุฑุนู ููุธุงู ุงูุชุดุบูู Linux). ููุช ุฃุบุงุฏุฑ ููุถุงุก ุงูุนุทูุงุช ููุนูุช ุฐูู. ุงุชุถุญ ุฃู ุงูุฃูุฑ ุจุณูุท ููุบุงูุฉ ุ ุงุณุชุบุฑู ุญูุงูู 5 ุฏูุงุฆู ุ ููู ููู ููุงู ุณูู ูุญุธุฉ ูุงุญุฏุฉ ุ ูู ุชุจุฏุฃ ุนูู ุงูููุฑ ุ ููุงู ูุฌุจ "ุชุดุบูู" ุงููุธุงู ุงููุฑุนู ูู ุฎูุงู ุฃูุฑ PowerShell. ุงุชุจุน ุงูุฑุงุจุท ูู ุฑุณุงูุฉ ุงูุฎุทุฃ ุ ูููุฐ ุงูุฃูุฑ ุ ูุนููุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ููุงู ุฃูุถูุง ุทุฑููุฉ ุชููู ุงููููุฏ ุงูุญูููููู ูู ุชุดุบูู ูู ุดูุก ุชุญุช ูุธุงู Windows: ููุณ ูู ุงูุตุนุจ ุงูููุงู ุจุฐูู ุ ููุท ุฃุนุฏ ุจุถุน ูููุงุช ุชุชูุงุนู ูุน ุงููุธุงู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ูู ุดุฆ! </font><font style="vertical-align: inherit;">ูู ุงููุฑุฉ ุงููุงุฏูุฉ ุ ุณูููู ุจุชุดุบูู ุงููุชุฑุฌู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชููู ููุงู ูุฑุตุฉ ูุชุฌููุน ูููุงุช ุฌุฏูุฏุฉ ุ ุณุชููู ููุงู ุดุฑูุท ุ ุฏูุฑุงุช. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุณูููู ูู ุงููููู ุงููุชุงุจุฉ ุนูู ุญุตู ููุงุณู ุฃู ุฃูุซุฑ ูุชุฌููุนู ูู ููุฏ ุงูุจุงูุช ูุชูููุฐู. </font><font style="vertical-align: inherit;">ุญุณูุง ุ ุณูููู ูู ุงููููู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ุฃูุซุฑ ุฌุฏูุฉ ุ ูุงูุชุญูู ูู ุฃุฏุงุก ุงูุฌูุงุฒ ุงูุจุงูุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุฑุงุฑ: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขูุฉ ุจุงูุช ููุญุตู (ูููุณ ููุท) ูู ุฃูุฑููุง ุงูุฃุตููุฉ (ุงูุฌุฒุก 4)</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar435236/">https://habr.com/ru/post/ar435236/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar435220/index.html">Kotlin Native: ุชุชุจุน ุงููููุงุช</a></li>
<li><a href="../ar435224/index.html">ููููุฉ ุงูุชูุงุตู ูู ููุชุจ ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ: 14 ุชุนุจูุฑุงุช ูููุฏุฉ</a></li>
<li><a href="../ar435226/index.html">ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ูู ููุทุฉ ุงูุตูุฑ</a></li>
<li><a href="../ar435228/index.html">ูุฌููุนุฉ Kubernetes ููุงุจู 20 ุฏููุงุฑูุง ุดูุฑููุง</a></li>
<li><a href="../ar435234/index.html">ุฃูุซุฑ ุฐูุงุกู ูุฃูุซุฑ ุฏูุฉ: ููู ุชุบูุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุฑุญูุงุช ุงูุฌููุฉ ุฅูู ุงููุถุงุก</a></li>
<li><a href="../ar435240/index.html">ุบูุฑ ูุงูุนู Engine4 - ุชุฃุซูุฑ ุงููุณุญ PostProcess</a></li>
<li><a href="../ar435242/index.html">ููุงุฐุง ุฃุฎุดู ุฃู ุฃุตุจุญ "ุฑุฌูุงู ุถุฎูุงู"</a></li>
<li><a href="../ar435244/index.html">ูุดุฑูุน ITER ูู ุนุงู 2018</a></li>
<li><a href="../ar435246/index.html">ูุชุญุช Tesla ุงูุทูุจุงุช ุงููุณุจูุฉ ูููููุฐุฌ 3 ูู ุฃูุฑูุจุง ูุงูุตูู</a></li>
<li><a href="../ar435248/index.html">ุงูุชููู ุฏุงุฎู ุชุทุจูู Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>