<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéé üë®üèΩ‚Äçüîß üë®üèº‚Äçüé® Adaptateur Ethereum blockchain pour plate-forme de donn√©es InterSystems IRIS üîµ üîπ üè¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Blockchain 
 Maintenant, quand j'√©cris cet article, le taux de change du Bitcoin a chut√© de plus de 5 fois par rapport √† la valeur maximale et quan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Adaptateur Ethereum blockchain pour plate-forme de donn√©es InterSystems IRIS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intersystems/blog/439560/"><h4>  1. Blockchain </h4><br>  Maintenant, quand j'√©cris cet article, le taux de change du Bitcoin a chut√© de plus de 5 fois par rapport √† la valeur maximale et quand j'ai dit que je faisais quelque chose en rapport avec la blockchain, la premi√®re chose que j'entends est le scepticisme ouvert - "qui a besoin de tout cela votre blockchain maintenant" . <br><br>  Oui, en effet, le battage m√©diatique autour de la blockchain est pass√©.  Mais les technologies sous-jacentes sont rest√©es, elles se d√©veloppent et continueront de se d√©velopper et d'√™tre utilis√©es dans certaines niches. <a name="habracut"></a>  Sur Internet et en particulier sur Habr√©, il existe de nombreux documents d√©crivant les deux domaines g√©n√©raux d'application de la technologie (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">habr.com/company/bitfury/blog/353350</a> et des exemples plus sp√©cifiques de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">habr.com/company/raiffeisenbank/blog/332756</a> ). <br><br>  Comme vous le savez, la blockchain est un registre distribu√©, c'est-√†-dire  une base de donn√©es r√©partie entre plusieurs n≈ìuds tandis que chaque n≈ìud stocke une copie compl√®te du registre.  La particularit√© de la blockchain est que les enregistrements (transactions) sont regroup√©s en blocs, et les blocs sont combin√©s en une cha√Æne de blocs.  Cependant, seules les op√©rations d'ajout de donn√©es sont disponibles.  Tout cela conduit au fait qu'il est presque impossible d'apporter des modifications aux transactions d√©j√† enregistr√©es dans la blockchain. <br><br>  Il existe de nombreux documents sur le fonctionnement de la blockchain (si vous n'avez jamais entendu parler de la blockchain auparavant, vous pouvez commencer par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette simple vid√©o</a> ). <br><br>  Au moment de l'augmentation maximale de l'int√©r√™t pour la technologie de la blockchain, il y avait de nombreux appels √† utiliser la blockchain absolument partout.  Cependant, il existe certains signes de projets / t√¢ches, dont la mise en ≈ìuvre peut n√©cessiter une blockchain. <br><br>  Tout d'abord, la participation d'un grand nombre d'acteurs (utilisateurs) qui enregistrent des donn√©es, alors qu'il est n√©cessaire de pr√©venir les incoh√©rences et d'accro√Ætre la confiance. <br><br>  Deuxi√®mement, l'absence d'un tiers auquel tout le monde fait confiance. <br><br>  Troisi√®mement, la n√©cessit√© d'un m√©canisme de v√©rification des donn√©es publiques. <br>  Si toutes les conditions ci-dessus sont remplies, vous devez penser √† utiliser une blockchain. <br><br>  De telles t√¢ches peuvent survenir dans n'importe quelle industrie.  Le projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.101blockchains.com</a> recueille des informations sur les projets potentiels et mis en ≈ìuvre, ainsi que sur les caract√©ristiques de l'utilisation de la blockchain dans diff√©rents domaines. <br><br>  Par exemple, dans le secteur de la sant√©, la blockchain peut √™tre utilis√©e: <br><br><ul><li>  pour une gestion s√ªre des donn√©es des patients; </li><li>  lutter contre les m√©dicaments contrefaits gr√¢ce √† des transactions invariables tout au long de la cha√Æne d'approvisionnement; </li><li>  am√©liorer la surveillance et l'efficacit√© des essais cliniques en √©liminant la fraude et la manipulation des donn√©es. </li></ul><br>  Lors de l'utilisation de la blockchain dans le segment d'entreprise, ils utilisent g√©n√©ralement une blockchain priv√©e avec diff√©rents niveaux d'autorisation (Blockchain autoris√© et priv√©).  Ces r√©seaux ont un ensemble sp√©cial de n≈ìuds pour confirmer les transactions. <br><br>  Cependant, lors du d√©veloppement du premier adaptateur InterSystems IRIS pour travailler avec la blockchain, nous avons choisi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ethereum</a> , qui appartient √† la cat√©gorie de la blockchain sans autorisation - une plate-forme ouverte sans organe directeur.  Ce choix est associ√© √† la popularit√© d'Ethereum et d'une infrastructure assez d√©velopp√©e: la pr√©sence de divers outils et biblioth√®ques.  Vous pouvez √©galement remarquer qu'en utilisant le logiciel Ethereum, vous pouvez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cr√©er une blockchain priv√©e</a> . <br><br><h4>  2. L'adaptateur </h4><br>  Il est maintenant temps de passer √† l'adaptateur lui-m√™me. <br><br>  Un adaptateur dans InterSystems IRIS (ainsi que dans Ensemble) est une classe ou un package de classes InterSystems IRIS qui permettent de travailler avec un syst√®me externe.  Les adaptateurs InterSystems IRIS sont divis√©s en entrants (pour recevoir des donn√©es d'un syst√®me externe lorsque le syst√®me externe est l'initiateur de l'interaction) et sortants (pour travailler avec un syst√®me externe lorsque l'initiateur de l'interaction est InterSystems IRIS). <br><br>  L'adaptateur IRIS Ethereum est un adaptateur sortant et est l√©g√®rement diff√©rent de la plupart des autres adaptateurs IRIS InterSystems, car une partie de cet adaptateur est un ensemble de classes IRIS InterSystems, mais l'adaptateur comprend √©galement un petit module NodeJS.  L'architecture est illustr√©e √† la figure 1. <br><br><img src="https://habrastorage.org/webt/mo/kz/3c/mokz3cufv-4t24zab_oeouy5ef8.png"><br>  <i>Figure 1</i> <br><br>  Le module adaptateur NodeJS utilise les biblioth√®ques NodeJS existantes pour fonctionner avec Ethereum. <br><br>  L'adaptateur offre les fonctionnalit√©s suivantes: <br><br><ul><li>  Placez un contrat intelligent dans Ethereum (nous pr√©voyons de pr√©parer un autre article dans lequel nous parlerons davantage des contrats intelligents, des outils de d√©veloppement et discuterons d'un exemple). </li><li>  Appelez les m√©thodes de contrat intelligent: √† la fois des m√©thodes qui ne modifient pas l'√©tat de la blockchain et des m√©thodes qui modifient l'√©tat de la blockchain </li><li>  Sauvegarder une transaction (transf√©rer des fonds d'un portefeuille √† un autre) </li><li>  Appel de m√©thodes d'assistance pour obtenir l'√©tat de la cha√Æne de blocs </li><li>  Consigner toutes les requ√™tes (ex√©cute le module NodeJS, utile pour le d√©bogage) </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'adaptateur est disponible avec le code source <b>OpenExchange</b></a> . <br><br><h4>  3. Un exemple simple </h4><br>  Un exemple ¬´Hello world¬ª est install√© avec l'adaptateur. <br><br>  Pour commencer √† travailler avec Ethereum (y compris pour ex√©cuter cet exemple), vous devez: <br><br><ul><li>  Choisissez le r√©seau avec lequel vous travaillerez.  Pour le d√©veloppement, des r√©seaux de test tels que Ropsten sont g√©n√©ralement utilis√©s. </li><li>  Cr√©ez un portefeuille sur ce r√©seau et r√©approvisionnez-le </li><li>  Installez un client Ethereum local (par exemple, Geth) ou obtenez une cl√© pour travailler avec un fournisseur de cloud (par exemple, Infura) </li></ul><br>  Lors de la configuration d'une transaction commerciale, vous devez sp√©cifier (figure 2): <br><br><ol><li>  Serveur et port sur lesquels le module NodeJS est ex√©cut√© (le port par d√©faut est 3000) </li><li>  Param√®tres du fournisseur (dans ce cas, acc√®s √† Infura) </li><li>  D√©tails d'acc√®s (dans les d√©tails d'acc√®s, vous devez indiquer votre portefeuille comme nom d'utilisateur, la cl√© priv√©e du portefeuille comme mot de passe. Dans InterSystems IRIS, les d√©tails d'acc√®s sont stock√©s dans une base de donn√©es distincte, pour laquelle le cryptage doit √™tre activ√©) </li></ol><br><img src="https://habrastorage.org/webt/ei/kr/bv/eikrbvchchjm5xwkbrfv9qm4olk.png"><br>  <i>Figure 2</i> <br><br>  Pour travailler avec des contrats intelligents, vous devrez cr√©er (pour chaque contrat intelligent que vous contacterez) un dossier dans le syst√®me de fichiers et y placer 2 fichiers: <br>  * abi.txt <br>  * bytecode.txt <br><br>  Ces fichiers doivent avoir un contrat intelligent ABI et un Bytecode.  Smart contract ABI - une description formelle de l'interface de contrat intelligent au format json.  ABI et Bytecode sont cr√©√©s au moment de la compilation du contrat intelligent. <br><br>  Le bytecode n'est n√©cessaire que pour d√©ployer un contrat. <br><br>  √Ä l'aide du service de test, vous pouvez v√©rifier le fonctionnement d'une transaction commerciale. <br><br>  Dans la figure 3, √† l'aide du service de test, le contrat intelligent est d√©ploy√©.  Le r√©sultat de l'appel de cette op√©ration commerciale est un message contenant un hachage de transaction. <br><br><img src="https://habrastorage.org/webt/it/qm/wk/itqmwkzesdspagy8vxdwh0klpn4.png"><br>  <i>Figure 3</i> <br><br>  En utilisant le navigateur ropsten.etherscan.io (https://etherscan.io/), vous pouvez trouver cette transaction et obtenir l'adresse du contrat intelligent pass√©. <br><br>  Pour ex√©cuter des m√©thodes de contrat intelligent √† l'aide de l'adaptateur, vous devez sp√©cifier les param√®tres dans la configuration du produit: ContractFolder et ContractAddress. <br><br>  Le code pour appeler la m√©thode du contrat intelligent est assez simple: <br><br><pre><code class="go hljs">set ..ContractABI = [].%FromJSON(..ContractFolder_<span class="hljs-string"><span class="hljs-string">"abi.txt"</span></span>) set contract = ..Adapter.GetContract( ##class(Ethereum.Address).%New(..ContractAddress), ..ContractABI) set result = contract.hello() set pResponse = ##class(Ens.StringContainer).%New(result.args)</code> </pre> <br>  √Ä l'aide de la m√©thode de l'adaptateur GetContract, √† laquelle l'adresse du contrat intelligent et ABI est transmise, un objet de contrat intelligent est cr√©√©, qui est ensuite utilis√© pour appeler les m√©thodes.  Dans ce cas, la m√©thode hello () doit √™tre d√©finie dans le contrat intelligent, qui renvoie une cha√Æne. <br><br>  Dans cet exemple, la m√©thode hello () ne change pas l'√©tat de la blockchain, elle peut donc √™tre appel√©e de mani√®re synchrone.  Cependant, les m√©thodes qui modifient l'√©tat de la blockchain peuvent prendre beaucoup de temps (en attente de confirmation de transaction). <br><br>  Pour appeler de telles m√©thodes, vous pouvez utiliser le m√©canisme de r√©ponse diff√©r√©e dans InterSystems IRIS.  L'adaptateur doit transmettre le jeton diff√©r√©, puis, lorsque la transaction NodeJS est confirm√©e, le module transmet le r√©sultat de son ex√©cution √† InterSystems IRIS.  Pour ce faire, vous devez configurer l'application Web et ajouter une transaction commerciale au produit qui traitera la r√©ponse re√ßue. <br><br>  Code pour appeler une m√©thode qui change l'√©tat de la blockchain: <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// getting EthereumAccount(wallet) and privateKey do ##class(Ens.Config.Credentials).GetCredentialsObj(.cred, "Ethereum.Demo.EthereumOperation", "Ens.Config.Credentials", ..Credentials) set account = ##class(Ethereum.Address).%New(cred.Username) set privateKey = cred.Password //reading contract ABI set ..ContractABI = [].%FromJSON(..ContractFolder_"abi.txt") // get contract object set contract = ..Adapter.GetContract( ##class(Ethereum.Address).%New(..ContractAddress), ..ContractABI) $$$ThrowOnError(..DeferResponse(.deferred)) // estimate gas do contract.SetOptions(account) set gasJSON = contract.EstimateGas("setName",pRequest.Name) $$$TRACE(gasJSON.gas) do contract.SetOptions(account, privateKey, ##class(Ethereum.Wei).%New(1000000000), ##class(Ethereum.Wei).%New(100*gasJSON.gas),,deferred) set result = contract.setName(pRequest.Name)</span></span></code> </pre> <br>  Dans ce cas, avant d'appeler la m√©thode de contrat intelligent setName (), vous devez sp√©cifier un certain nombre de param√®tres, y compris un jeton de r√©ponse diff√©r√©e. <br><br>  Dans notre prochain article, nous parlerons davantage des contrats intelligents et donnerons un exemple de r√©solution d'une application √† l'aide de l'adaptateur InterSystems IRIS Ethereum. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr439560/">https://habr.com/ru/post/fr439560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr439546/index.html">Les andro√Ødes r√™vent-ils de punk √©lectrique? Comment j'ai appris √† un r√©seau de neurones √† √©crire de la musique</a></li>
<li><a href="../fr439550/index.html">Hackquest 2018. R√©sultats et √©critures. Jour 1-3</a></li>
<li><a href="../fr439552/index.html">Extensions Chrome malveillantes</a></li>
<li><a href="../fr439556/index.html">TDMS Fairway. M√©thodologies PMBOK et organisations de conception russes</a></li>
<li><a href="../fr439558/index.html">Nouveau vieux t√©l√©phone. R√©inventez le t√©l√©phone PSTN</a></li>
<li><a href="../fr439562/index.html">Configurez le cluster Kubernetes HA sur du m√©tal nu avec kubeadm. Partie 1/3</a></li>
<li><a href="../fr439564/index.html">Application pratique de la transformation d'arbre AST en utilisant le putout comme exemple</a></li>
<li><a href="../fr439566/index.html">Pourquoi la documentation SRE est importante. 3e partie</a></li>
<li><a href="../fr439568/index.html">SSD bas√©s sur QLC - un tueur de disque dur? Pas vraiment</a></li>
<li><a href="../fr439570/index.html">Magie IPython pour modifier les balises de cellules Jupyter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>