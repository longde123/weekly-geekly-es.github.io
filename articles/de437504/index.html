<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ğŸ‘ğŸ¾ ğŸ¤šğŸ» Winzige Komponenten: Was kÃ¶nnte schief gehen? Wir verwenden das Prinzip der alleinigen Verantwortung ğŸ‘‡ğŸ¼ ğŸ¹ ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘©ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir prÃ¤sentieren Ihnen eine Ãœbersetzung eines Artikels von Scott Domes, der auf blog.bitsrc.io verÃ¶ffentlicht wurde. Finden Sie unter kat heraus, waru...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Winzige Komponenten: Was kÃ¶nnte schief gehen? Wir verwenden das Prinzip der alleinigen Verantwortung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plarium/blog/437504/">  Wir prÃ¤sentieren Ihnen eine Ãœbersetzung eines Artikels von Scott Domes, der auf blog.bitsrc.io verÃ¶ffentlicht wurde.  Finden Sie unter kat heraus, warum Komponenten so klein wie mÃ¶glich sein sollten und wie sich das Prinzip der alleinigen Verantwortung auf die QualitÃ¤t der Anwendungen auswirkt. <br><br><img src="https://habrastorage.org/webt/7g/4i/hq/7g4ihq-nbp6tluzphrqnzch6vd4.jpeg"><br>  Foto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Austin</a> Kirk mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unsplash</a> <br><a name="habracut"></a><br>  Der Vorteil des React-Komponentensystems (und Ã¤hnlicher Bibliotheken) besteht darin, dass Ihre BenutzeroberflÃ¤che in kleine Teile unterteilt ist, die einfach zu lesen und wiederverwendbar sind. <br><br>  Diese Komponenten sind kompakt (100-200 Zeilen), sodass andere Entwickler sie leicht verstehen und Ã¤ndern kÃ¶nnen. <br><br>  Obwohl Komponenten in der Regel versuchen, kÃ¼rzer zu sein, gibt es keine klare, strenge BeschrÃ¤nkung ihrer LÃ¤nge.  Reagieren macht es nichts aus, wenn Sie sich entscheiden, Ihre Anwendung in eine erschreckend groÃŸe Komponente zu integrieren, die aus 3.000 Zeilen besteht. <br><br>  ... aber es lohnt sich nicht.  Die meisten Ihrer Komponenten sind hÃ¶chstwahrscheinlich bereits zu umfangreich - oder sie fÃ¼hren zu viele Funktionen aus. <br><br>  In diesem Artikel werde ich beweisen, dass die meisten Komponenten (auch bei der Ã¼blichen LÃ¤nge von 200 Zeilen) enger ausgerichtet sein sollten.  Sie sollten nur eine Funktion ausfÃ¼hren und diese gut ausfÃ¼hren.  Das sagt Eddie Osmani <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> groÃŸartig. <br><br>  <b>Tipp</b> : Wenn Sie in JS arbeiten, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verwenden Sie Bit</a> , um Komponenten als Legoteile zu organisieren, zusammenzusetzen und wiederzuverwenden.  Bit ist ein Ã¤uÃŸerst effektives Werkzeug fÃ¼r dieses Unternehmen. Es hilft Ihnen und Ihrem Team, Zeit zu sparen und die Montage zu beschleunigen.  Probieren Sie es einfach aus. <br><br>  Lassen Sie uns zeigen, wie beim Erstellen von Komponenten <b>etwas schief gehen kann</b> . <br><br><h3>  Unsere App </h3><br>  Stellen Sie sich vor, wir haben eine Standardanwendung fÃ¼r Blogger.  Und hier ist was auf dem Hauptbildschirm: <br><br><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">header</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> // Header JSX </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">header</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"header"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> // Sidebar JSX </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"post-container"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {this.state.posts.map(post =&gt; { return ( </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> // Post JSX </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); })} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre> <br>  <i>(Dieses Beispiel sollte, wie viele nachfolgende, als Pseudocode betrachtet werden.)</i> <br><br>  Es zeigt das obere Bedienfeld, die Seitenleiste und die Liste der BeitrÃ¤ge an.  Alles ist einfach. <br><br>  Da wir auch BeitrÃ¤ge herunterladen mÃ¼ssen, kÃ¶nnen wir dies tun, wÃ¤hrend die Komponente gemountet wird: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: [] }; componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loadPosts(); } loadPosts() { <span class="hljs-comment"><span class="hljs-comment">// Load posts and save to state } render() { // Render code } }</span></span></code> </pre> <br>  Wir haben auch eine Logik, nach der die Seitenleiste aufgerufen wird.  Wenn der Benutzer auf die SchaltflÃ¤che im oberen Bereich klickt, wird die Seite beendet.  Sie kÃ¶nnen es sowohl von oben als auch von der Seitenwand selbst schlieÃŸen. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">isSidebarOpen</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }; componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loadPosts(); } loadPosts() { <span class="hljs-comment"><span class="hljs-comment">// Load posts and save to state } handleOpenSidebar() { // Open sidebar by changing state } handleCloseSidebar() { // Close sidebar by changing state } render() { // Render code } }</span></span></code> </pre> <br>  Unsere Komponente ist etwas komplizierter geworden, aber dennoch leicht zu lesen. <br><br>  Es kann argumentiert werden, dass alle seine Teile einem Zweck dienen: der Anzeige der Hauptseite der Anwendung.  Wir folgen also dem Prinzip der alleinigen Verantwortung. <br><br>  Das Prinzip der alleinigen Verantwortung besagt, dass eine Komponente nur eine Funktion erfÃ¼llen soll.  Wenn wir die Definition aus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wikipedia.org</a> neu formulieren, stellt sich heraus, dass jede Komponente nur fÃ¼r einen Teil der FunktionalitÃ¤t [Anwendung] verantwortlich sein sollte. <br><br>  Unsere Hauptkomponente erfÃ¼llt diese Anforderung.  Was ist das Problem? <br><br>  Hier ist eine andere Formulierung des Prinzips: <i>Jede [Komponente] sollte nur einen Grund fÃ¼r eine Ã„nderung haben</i> . <br><br>  Diese Definition stammt aus Robert Martins <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Buch Rapid Software Development.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Prinzipien, Beispiele, Praxis â€œ,</a> und das ist von groÃŸer Bedeutung. <br><br>  Indem wir uns auf <i>einen Grund fÃ¼r die Ã„nderung</i> unserer Komponenten konzentrieren, kÃ¶nnen wir bessere Anwendungen erstellen, die auÃŸerdem einfach zu konfigurieren sind. <br><br>  Lassen Sie uns aus GrÃ¼nden der Klarheit unsere Komponente komplizieren. <br><br><h3>  Komplikation </h3><br>  Angenommen, ein Monat nach der Implementierung der Hauptkomponente wurde dem Entwickler aus unserem Team eine neue Funktion zugewiesen.  Jetzt kann der Benutzer einen Beitrag ausblenden (z. B. wenn er unangemessenen Inhalt enthÃ¤lt). <br><br>  Das ist nicht schwer zu tun! <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">isSidebarOpen</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">postsToHide</span></span>: [] }; <span class="hljs-comment"><span class="hljs-comment">// older methods get filteredPosts() { // Return posts in state, without the postsToHide } render() { return ( &lt;div&gt; &lt;header&gt; // Header JSX &lt;/header&gt; &lt;aside id="header"&gt; // Sidebar JSX &lt;/aside&gt; &lt;div id="post-container"&gt; {this.filteredPosts.map(post =&gt; { return ( &lt;div className="post"&gt; // Post JSX &lt;/div&gt; ); })} &lt;/div&gt; &lt;/div&gt; ); } }</span></span></code> </pre> <br>  Unser Kollege hat sich leicht darum gekÃ¼mmert.  Sie fÃ¼gte nur eine neue Methode und eine neue Eigenschaft hinzu.  Keiner derjenigen, die die kurze Liste der Ã„nderungen durchgesehen hatten, hatte EinwÃ¤nde. <br><br>  Ein paar Wochen spÃ¤ter wird eine weitere Funktion angekÃ¼ndigt - eine verbesserte Seitenleiste fÃ¼r die mobile Version.  Anstatt mit CSS herumzuspielen, beschlieÃŸt der Entwickler, mehrere JSX-Komponenten zu erstellen, die nur auf MobilgerÃ¤ten ausgefÃ¼hrt werden. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">isSidebarOpen</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">postsToHide</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">isMobileSidebarOpen</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }; <span class="hljs-comment"><span class="hljs-comment">// older methods handleOpenSidebar() { if (this.isMobile()) { this.openMobileSidebar(); } else { this.openSidebar(); } } openSidebar() { // Open regular sidebar } openMobileSidebar() { // Open mobile sidebar } isMobile() { // Check if mobile device } render() { // Render method } }</span></span></code> </pre><br>  Eine weitere kleine Ã„nderung.  Ein paar neue, gut benannte Methoden und eine neue Eigenschaft. <br><br>  Und hier haben wir ein Problem.  <code>Main</code> fÃ¼hrt immer noch nur eine Funktion aus (Rendern des Hauptbildschirms), aber Sie sehen sich all diese Methoden an, mit denen wir uns jetzt befassen: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">isSidebarOpen</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">postsToHide</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">isMobileSidebarOpen</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }; componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loadPosts(); } loadPosts() { <span class="hljs-comment"><span class="hljs-comment">// Load posts and save to state } handleOpenSidebar() { // Check if mobile then open relevant sidebar } handleCloseSidebar() { // Close both sidebars } openSidebar() { // Open regular sidebar } openMobileSidebar() { // Open mobile sidebar } isMobile() { // Check if mobile device } get filteredPosts() { // Return posts in state, without the postsToHide } render() { // Render method } }</span></span></code> </pre> <br>  Unsere Komponente wird groÃŸ und sperrig, es ist schwer zu verstehen.  Und mit der Erweiterung der FunktionalitÃ¤t wird sich die Situation nur noch verschlechtern. <br><br>  Was ist schief gelaufen? <br><br><h3>  Einziger Grund </h3><br>  Kehren wir zur Definition des Prinzips der alleinigen Verantwortung zurÃ¼ck: <i>Jede Komponente sollte nur einen Grund fÃ¼r Ã„nderungen haben</i> . <br><br>  Zuvor haben wir die Art und Weise geÃ¤ndert, in der BeitrÃ¤ge angezeigt werden, sodass wir unsere Hauptkomponente Ã¤ndern mussten.  Als nÃ¤chstes haben wir die Art und Weise geÃ¤ndert, wie die Seitenleiste geÃ¶ffnet wird - und erneut haben wir die Hauptkomponente geÃ¤ndert. <br><br>  Diese Komponente hat viele unabhÃ¤ngige GrÃ¼nde fÃ¼r Ã„nderungen.  <i>Dies bedeutet, dass zu viele Funktionen ausgefÃ¼hrt werden</i> . <br><br>  Mit anderen Worten, wenn Sie einen Teil Ihrer Komponente erheblich Ã¤ndern kÃ¶nnen und dies nicht zu Ã„nderungen in einem anderen Teil fÃ¼hrt, hat Ihre Komponente zu viel Verantwortung. <br><br><h3>  Effizientere Trennung </h3><br>  Die LÃ¶sung ist einfach: Sie mÃ¼ssen die Hauptkomponente in mehrere Teile aufteilen.  Wie kann man das machen? <br><br>  Fangen wir von vorne an.  Das Rendern des Hauptbildschirms bleibt in der Verantwortung der Hauptkomponente, wir reduzieren es jedoch nur, um die zugehÃ¶rigen Komponenten anzuzeigen: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">PostList</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre> <br>  GroÃŸartig <br><br>  Wenn wir plÃ¶tzlich das Layout des Hauptbildschirms Ã¤ndern (z. B. zusÃ¤tzliche Abschnitte hinzufÃ¼gen), Ã¤ndert sich auch Main.  In anderen FÃ¤llen haben wir keinen Grund, ihn zu berÃ¼hren.  GroÃŸartig. <br><br>  Fahren wir mit <code>Layout</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Layout</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;SidebarDisplay&gt; {(isSidebarOpen, toggleSidebar</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Header</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">openSidebar</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{toggleSidebar}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Sidebar</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">isOpen</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{isSidebarOpen}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">close</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{toggleSidebar}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> )} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">SidebarDisplay</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); } }</span></span></code> </pre> <br>  Das ist etwas komplizierter.  <code>Layout</code> ist fÃ¼r das Rendern der Layoutkomponenten (Seiten- / Oberteil) verantwortlich.  Wir werden jedoch nicht der Versuchung erliegen und dem <code>Layout</code> Verantwortung Ã¼bertragen, zu bestimmen, ob die Seitenleiste geÃ¶ffnet ist oder nicht. <br><br>  Wir weisen diese Funktion der <code>SidebarDisplay</code> Komponente zu, die die erforderlichen Methoden oder den erforderlichen Status an die <code>Header</code> und <code>Sidebar</code> Komponenten Ã¼bergibt. <br><br>  <i>(Das obige Beispiel ist ein Beispiel fÃ¼r das Muster " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Requisiten Ã¼ber untergeordnete Elemente rendern"</a> in "Reagieren". Wenn Sie nicht damit vertraut sind, machen Sie sich keine Sorgen. Das Vorhandensein einer separaten Komponente, die den offenen / geschlossenen Zustand der Seitenleiste steuert, ist hier wichtig.)</i> <br><br>  Und dann kann die <code>Sidebar</code> selbst recht einfach sein, wenn sie nur fÃ¼r das Rendern der rechten Seitenleiste verantwortlich ist. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sidebar</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ isMobile() { <span class="hljs-comment"><span class="hljs-comment">// Check if mobile } render() { if (this.isMobile()) { return &lt;MobileSidebar /&gt;; } else { return &lt;DesktopSidebar /&gt;; } } }</span></span></code> </pre> <br>  Auch hier widerstehen wir der Versuchung, JSX fÃ¼r Computer / mobile GerÃ¤te direkt in diese Komponente einzufÃ¼gen, da es in diesem Fall zwei GrÃ¼nde fÃ¼r die Ã„nderung gibt. <br><br>  Schauen wir uns eine andere Komponente an: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostList</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">postsToHide</span></span>: [] } filterPosts(posts) { <span class="hljs-comment"><span class="hljs-comment">// Show posts, minus hidden ones } hidePost(post) { // Save hidden post to state } render() { return ( &lt;PostLoader&gt; { posts =&gt; this.filterPosts(posts).map(post =&gt; &lt;Post /&gt;) } &lt;/PostLoader&gt; ) } }</span></span></code> </pre> <br>  <code>PostList</code> Ã¤ndert sich nur, wenn wir die Art und Weise Ã¤ndern, wie die Liste der BeitrÃ¤ge <code>PostList</code> .  Scheint offensichtlich, oder?  Genau das brauchen wir. <br><br>  <code>PostLoader</code> Ã¤ndert sich nur, wenn wir die Art und Weise Ã¤ndern, wie Posts geladen werden.  Und schlieÃŸlich Ã¤ndert sich <code>Post</code> nur, wenn wir die Art und Weise Ã¤ndern, wie der Post gerendert wird. <br><br><h3>  Fazit </h3><br>  Alle diese Komponenten sind winzig und erfÃ¼llen eine kleine Funktion.  Die GrÃ¼nde fÃ¼r die Ã„nderungen sind leicht zu identifizieren und die Komponenten selbst werden getestet und korrigiert. <br><br>  Jetzt ist unsere Anwendung viel einfacher zu Ã¤ndern - ordnen Sie Komponenten neu an, fÃ¼gen Sie neue hinzu und erweitern Sie vorhandene Funktionen.  Sie mÃ¼ssen sich nur eine Komponentendatei ansehen, um festzustellen, <b>wofÃ¼r</b> sie <b>gedacht</b> ist. <br><br>  Wir wissen, dass sich unsere Komponenten im Laufe der Zeit Ã¤ndern und wachsen werden. Die Anwendung dieser universellen Regel hilft Ihnen jedoch, technische Schulden zu vermeiden und die Geschwindigkeit des Teams zu erhÃ¶hen.  Wie Sie Komponenten verteilen, liegt bei Ihnen. Denken Sie jedoch daran, dass <b>es nur einen Grund fÃ¼r das Ã„ndern einer Komponente geben muss</b> . <br><br>  Vielen Dank fÃ¼r Ihre Aufmerksamkeit und freuen uns auf Ihre Kommentare! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de437504/">https://habr.com/ru/post/de437504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de437492/index.html">Lua in Moskau 2019 Konferenz</a></li>
<li><a href="../de437494/index.html">Lua in Moskau 2019 Konferenz</a></li>
<li><a href="../de437496/index.html">Ãœber Variablen in der Programmierung</a></li>
<li><a href="../de437500/index.html">Ãœber wichtige â€unsichtbareâ€œ Dinge - Vertrauen, Kultur und Werte</a></li>
<li><a href="../de437502/index.html">Ich werde aufhÃ¶ren, das Gute in den MÃ¼ll zu werfen</a></li>
<li><a href="../de437508/index.html">CVE-2019-6111 und andere SCP-Schwachstellen</a></li>
<li><a href="../de437510/index.html">Was passiert, wenn Sie SMS senden?</a></li>
<li><a href="../de437512/index.html">Was sind reine Funktionen in JavaScript?</a></li>
<li><a href="../de437514/index.html">Suchen nach Fehlern im Amazon Web Services SDK-Quellcode fÃ¼r .NET</a></li>
<li><a href="../de437516/index.html">Suchen nach Fehlern im Amazon Web Services SDK fÃ¼r .NET-Quellcode</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>