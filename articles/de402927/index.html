<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüîß ‚úîÔ∏è üôÄ Finalisierung des chinesischen ST-Link v2: F√ºgen Sie die Schnittstelle zur Ausgabe der Debugging-Informationen SWO und Leg Reset hinzu ü¶á üë©üèΩ‚Äçüíº üëâüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Geektimes! 

 Heute m√∂chte ich √ºber die Fertigstellung des chinesischen ST-Link v2 mit einem L√∂tkolben sprechen. Sie k√∂nnen eine SWO-Ausgabe zum...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Finalisierung des chinesischen ST-Link v2: F√ºgen Sie die Schnittstelle zur Ausgabe der Debugging-Informationen SWO und Leg Reset hinzu</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402927/"><img src="https://habrastorage.org/files/787/620/d54/787620d546cf4b1d8feec8b40b689ce4.jpg" alt="Bild" align="left" width="300">  Hallo Geektimes! <br><br>  Heute m√∂chte ich √ºber die Fertigstellung des chinesischen ST-Link v2 mit einem L√∂tkolben sprechen.  Sie k√∂nnen eine SWO-Ausgabe zum Empfangen von Debugging-Informationen und den Reset-Steuerfu√ü f√ºr STM32-Mikrocontroller hinzuf√ºgen (der gleiche Reset-Zweig, der bereits f√ºr STM8 verf√ºgbar ist).  Vielleicht ist dies f√ºr viele keine Entdeckung, aber lassen Sie es Informationen f√ºr Anf√§nger geben.  Wen k√ºmmert es bitte unter der Katze. <br><a name="habracut"></a><br>  <b>Warum wird es ben√∂tigt?</b> <br><br>  Die zum Debuggen von STM32-Mikrocontrollern verwendete SWD-Schnittstelle unterst√ºtzt die √úbertragung von Debug-Informationen √ºber die SWO-Ausgabe in Echtzeit, was sehr praktisch ist.  Nun, der Reset-Fu√ü wird ben√∂tigt, damit es bequemer ist, den Controller zu blinken, wenn die SWD-Schnittstelle deaktiviert ist.  Der Grund ist sicherlich weit hergeholt, denn f√ºr Firmware k√∂nnen Sie immer die Reset-Taste mit den Griffen dr√ºcken, aber lassen Sie es sein.  Zum Beispiel erhielt ich zu Beginn meiner Bekanntschaft mit STM32 ein Debugboard aus China mit einem Demo-Programm, das mit blinkender LED und deaktiviertem SWD blinkt. Ich verstand nicht sofort, wie ich mich damit verbinden sollte. <br><br>  <b>Revision selbst</b> <br><br><img src="https://habrastorage.org/files/899/51c/4ed/89951c4eda6b4cb587b53f23659d4cee.jpg" align="right" width="300">  Wir brauchen ein Skalpell, einen L√∂tkolben und ein paar Zentimeter eines sehr d√ºnnen Drahtes, ich habe es MGTF * einige * da.  Bei diesen Programmierern ist der Anschluss in zwei Teile unterteilt: den linken - f√ºr STM8 und den rechten - f√ºr STM32, sodass der dort vorhandene Reset nicht f√ºr STM32 geeignet ist. Wir werden unseren eigenen machen. <br><br>  Schneiden Sie zuerst die Spuren ab, die zu den unn√∂tigen Stiften f√ºhren.  Bei meinem ersten modifizierten Programmierer habe ich die Beine von Reset und SWIM abgeschnitten, da ich nicht vorhatte, mit STM8 zu arbeiten, aber jetzt werde ich die zus√§tzlichen 3,3- und 5-V-Pins verwenden (sie sind am Anschluss dupliziert), um die Funktionalit√§t des Programmierers nicht zu beeintr√§chtigen. <br><br>  Die Dr√§hte m√ºssen mit den 18 (Reset) und 31 (SWO) Fu√ü des Mikrocontrollers verl√∂tet werden.  Das ist eine weitere Lektion, aber mit etwas Geschick kannst du es schaffen.  Meine Dr√§hte gingen gut in die L√∂cher auf der Platine, was eine zus√§tzliche Fixierung erm√∂glichte.  Im Allgemeinen m√ºssen Sie sie auf gute Weise sofort mit Klebstoff auf dem Mikrocontroller befestigen.  L√∂ten Sie die freien Enden durch kleine Widerst√§nde (22 Ohm) an die neu geschnittenen Stifte. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2ad/30d/69c/2ad30d69cc6a4d2095fcb92875a77e5c.JPG" width="650"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c7a/e5e/003/c7ae5e003f0d41d9be9b32b3b872b867.JPG" width="650"></div><br>  Sie k√∂nnen den Fall schlie√üen und neue Schlussfolgerungen unterzeichnen, damit Sie nicht vergessen, wo welche. <br><br>  <b>SWO-Pr√ºfung</b> <br><br><img src="https://habrastorage.org/files/01b/a52/4e5/01ba524e54204665b9d94dc88cba5133.JPG" height="300"><img src="https://habrastorage.org/files/0c7/dac/f7e/0c7dacf7ee2342169416f2fbc9e09a5a.jpg" height="300"><br><br>  Um <b>SWO</b> verwenden zu <b>k√∂nnen</b> , m√ºssen Sie: <br><br>  - <b>SWD</b> aktivieren; <br>  - den entsprechenden Ausgang (f√ºr Mikrocontroller STM32F103C ist es PB3) auf <b>TRACESWO aktivieren</b> ; <br>  - <b>Stellen Sie</b> sicher, dass <b>SWO</b> in der Programmierumgebung enthalten ist und nicht <b>Semihosting</b> . <br>  - Verbinden Sie im Header des Programms die Bibliothek <b>#include "stdio.h"</b> ; <br>  - benutze <b>printf</b> im Programmcode <b>("Hallo STM32 Welt! \ R \ n")</b> ; <br><br>  Sie k√∂nnen diese Nachrichten √ºber das Terminal im STM32 ST-LINK-Dienstprogramm oder direkt w√§hrend des Debuggens in meiner Umgebung anzeigen (ich verwende IAR). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c6e/3ef/eb1/c6e3efeb106649cba150fab72019fe28.jpg"></div><br>  <b>Check zur√ºcksetzen</b> <br><br>  Angenommen, aus irgendeinem Grund ist das SWD auf dem Mikrocontroller deaktiviert: Entweder haben Sie vergessen, es w√§hrend der Initialisierung einzuschalten, oder eine neue Karte wurde mit einem kabelgebundenen Demoprogramm geliefert.  Nat√ºrlich k√∂nnen Sie durch Zur√ºckziehen des Reset-Beins auf den Boden blinken (normalerweise befindet sich eine Schaltfl√§che auf den Debug-Boards), aber dies ist nicht immer praktisch.  Sie k√∂nnen den Kontakt einfach vom Programmierer aus anschlie√üen und automatisch n√§hen. <br><br>  W√§hlen Sie im selben STM32 ST-LINK-Hilfsprogramm ‚ÄûVerbinden unter Zur√ºcksetzen‚Äú und stellen Sie eine Verbindung her, um zu blinken oder den Speicher des Mikrocontrollers zu l√∂schen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d29/db8/bbd/d29db8bbde2e4ed39c2467d539f670d7.jpg"></div><br>  Oder w√§hlen Sie in Ihrer IDE das entsprechende Element aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c7b/b32/019/c7bb32019c2242cb85e20d53da2f5eba.jpg"></div><br>  Auf diese Weise k√∂nnen Sie flashen und in den Debug-Modus wechseln. Sobald Sie jedoch die Initialisierung der Peripherieger√§te erreicht haben, wird die SWD-Verbindung getrennt und die Verbindung zum Controller wird unterbrochen. <br><br>  Vielen Dank f√ºr Ihre Aufmerksamkeit, ich hoffe, jemand kommt n√ºtzlich. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de402927/">https://habr.com/ru/post/de402927/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de402915/index.html">Wir testen den 3D START-Moduldrucker - Teil 3. Programmeinstellungen f√ºr die Anzeige</a></li>
<li><a href="../de402919/index.html">Frequenzgangdiagramme von Bluedio und Kopfh√∂rern anderer Marken: verstehen, belichten, w√§hlen</a></li>
<li><a href="../de402921/index.html">Fang uns, wenn du kannst</a></li>
<li><a href="../de402923/index.html">Staatsb√ºrgerschaft durch DNA oder kaufen Juden Gentests</a></li>
<li><a href="../de402925/index.html">Israelische Experten finden 40 Zero-Day-Schwachstellen im Samsung Tizen OS</a></li>
<li><a href="../de402929/index.html">MPTSU-2-48</a></li>
<li><a href="../de402931/index.html">Was ist vor dem Urknall passiert? [Fraser Cain]</a></li>
<li><a href="../de402937/index.html">Die Praxis der Sprecherauswahl: ein Interview mit einem Experten von Pult.ru</a></li>
<li><a href="../de402939/index.html">Die Hollywood Scriptwriters Guild kann aufgrund von Streaming-Diensten in den Streik treten</a></li>
<li><a href="../de402941/index.html">Pebble Smartwatch l√∂st Cloud-Synchronisierung aus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>