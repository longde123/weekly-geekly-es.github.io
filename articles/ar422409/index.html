<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๐พโ๐ซ ๐ค๐พ ๐ Python: ุงูุจุฑูุฌุฉ ุงูุชุฎุทูุทูุฉ ูู ุงูุฅูุชุงุฌ. ุงูุฌุฒุก ุงูุฃูู ๐ฉ๐ฟโ๐ซ ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุนุชูุฏ ุงููุซูุฑ ูู ุงููุงุณ ุฃู ุงูุจุฑูุฌุฉ ุงูุชุฎุทูุทูุฉ ูู Python ุชุนูุฏ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุดูู ุบูุฑ ุถุฑูุฑู ุ ูููู ุฅุฐุง ููุช ุชุณุชุฎุฏููุง ุจุดูู ุตุญูุญ ุ ููููู ุชูููุฐ ุฃููุงุท ุงูุชุต...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python: ุงูุจุฑูุฌุฉ ุงูุชุฎุทูุทูุฉ ูู ุงูุฅูุชุงุฌ. ุงูุฌุฒุก ุงูุฃูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/binarydistrict/blog/422409/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ูุนุชูุฏ ุงููุซูุฑ ูู ุงููุงุณ ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุจุฑูุฌุฉ ุงูุชุฎุทูุทูุฉ</a> ูู Python ุชุนูุฏ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุดูู ุบูุฑ ุถุฑูุฑู ุ ูููู ุฅุฐุง ููุช ุชุณุชุฎุฏููุง ุจุดูู ุตุญูุญ ุ ููููู ุชูููุฐ ุฃููุงุท ุงูุชุตููู ุงููุนูุฏุฉ ุจุดูู ุณุฑูุน ูุฃููู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุณุชุฎุฏู ุฃุทุฑ ุนูู Python ุงููุนุฑููุฉ ูุซู Django ู DRF ู SQLAlchemy metaclasses ูุชูููุฑ ุณูููุฉ ุงูุชูุณุนุฉ ูุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุณูููุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ls/ty/gh/lstyghddpotgif7f6jg8cl6kcbi.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูููุงูุฉ ุณุฃุฎุจุฑู ููุงุฐุง ูุง ูุฌุจ ุฃู ุชุฎุงู ูู ุงุณุชุฎุฏุงู ุงูุจุฑูุฌุฉ ุงูุชุฎุทูุทูุฉ ูู ูุดุงุฑูุนู ูุฅุธูุงุฑ ุงูููุงู ุงูุฃูุซุฑ ููุงุกูุฉ ูู.  ููููู ูุนุฑูุฉ ุงููุฒูุฏ ุญูู ุฎูุงุฑุงุช ุงูุจุฑูุฌุฉ ุงูุชุฎุทูุทูุฉ ูู ุฏูุฑุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Advanced Python</a> . </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ููุจุฏุก ุ ุฏุนูุง ูุชุฐูุฑ ุฃุณุงุณูุงุช ุงูุจุฑูุฌุฉ ุงูุชุฎุทูุทูุฉ ูู Python.  ูู ูููู ูู ุบูุฑ ุงูุถุฑูุฑู ุฃู ูุถูู ุฃู ูู ูุง ูู ููุชูุจ ุฃุฏูุงู ููุทุจู ุนูู Python ุงูุฅุตุฏุงุฑ 3.5 ูุงูุฅุตุฏุงุฑุงุช ุงูุฃุญุฏุซ. </p><br><h2 id="kratkiy-ekskurs-v-model-dannyh-python" style=";text-align:right;direction:rtl">  ุฌููุฉ ุณุฑูุนุฉ ูู ูููุฐุฌ ุจูุงูุงุช Python </h2><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูุนูู ุฌููุนูุง ุฃู ูู ุดูุก ูู Python ูู ูุงุฆู ุ ูููุณ ุณุฑุงู ุฃูู ููู ูุงุฆู ููุงู ูุฆุฉ ูุนููุฉ ุชู ุฅูุดุงุคูุง ูู ุฎูุงููุง ุ ุนูู ุณุจูู ุงููุซุงู: </p><br><pre style=";text-align:right;direction:rtl"><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> &gt;&gt;&gt; type(f) &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">function</span></span></span><span class="hljs-class">'&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุชุญุฏูุฏ ููุน ุงููุงุฆู ุฃู ุงููุฆุฉ ุงูุชู ุชู ุฅูุดุงุก ุงููุงุฆู ูู ุฎูุงููุง ุจุงุณุชุฎุฏุงู ูุธููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุน</a> ุงููุถููุฉ ุ ูุงูุชู ููุง ุชูููุน ููุงููุฉ ูุซูุฑ ููุงูุชูุงู ุฅูู ุญุฏ ูุง (ุณูุชุญุฏุซ ุนููุง ูุงุญููุง ููููุงู).  ูููู ุชุญููู ููุณ ุงูุชุฃุซูุฑ ูู ุฎูุงู ุงุดุชูุงู ุงูุณูุฉ <code>__class__</code> ุนูู ุฃู ูุงุฆู. </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูุฅูุดุงุก ูุธุงุฆู ุ <code>function</code> ูุฆุฉ ูุนููุฉ ูุถููุฉ.  ุฏุนููุง ูุฑู ูุง ูููููุง ุงูููุงู ุจู.  ููููุงู ุจุฐูู ุ ุฎุฐ ุงููุฑุงุบ ูู ูุญุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃููุงุน</a> ุงููุฏูุฌุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> types <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FunctionType &gt;&gt;&gt; FunctionType &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">function</span></span></span><span class="hljs-class">'&gt; &gt;&gt;&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">help</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(FunctionType)</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">function</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class"> | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">function</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(code, globals[, name[, argdefs[, closure]]])</span></span></span><span class="hljs-class"> | | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Create</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">function</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">from</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">code</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">and</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dictionary</span></span></span><span class="hljs-class">. | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">The</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">optional</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">string</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">overrides</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">the</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">from</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">the</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">code</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">object</span></span></span><span class="hljs-class">. | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">The</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">optional</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">argdefs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tuple</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">specifies</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">the</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">default</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">argument</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">values</span></span></span><span class="hljs-class">. | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">The</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">optional</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">closure</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tuple</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">supplies</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">the</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bindings</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">free</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">variables</span></span></span><span class="hljs-class">.</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ูุฑู ุ ุฃู ูุธููุฉ ูู Python ูู ูุซุงู ูููุฆุฉ ุงูููุตููุฉ ุฃุนูุงู.  ุฏุนูุง ุงูุขู ูุญุงูู ุฅูุดุงุก ูุธููุฉ ุฌุฏูุฏุฉ ุฏูู ุงููุฌูุก ุฅูู ุฅุนูุงููุง ูู ุฎูุงู <code>def</code> .  ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ููููุฉ ุฅูุดุงุก ูุงุฆูุงุช ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุงุณุชุฎุฏุงู ูุธููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุฑุฌูุฉ</a> ุงููุถููุฉ ูู ุงููุชุฑุฌู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,    "Hello, world!" &gt;&gt;&gt; code = compile('print("Hello, world!")', '&lt;repl&gt;', 'eval') &gt;&gt;&gt; code &lt;code object &lt;module&gt; at 0xdeadbeef, file "&lt;repl&gt;", line 1&gt; #  ,     , #      &gt;&gt;&gt; func = FunctionType(code, globals(), 'greetings') &gt;&gt;&gt; func &lt;function &lt;module&gt; at 0xcafefeed&gt; &gt;&gt;&gt; func.__name__ 'greetings' &gt;&gt;&gt; func() Hello, world!</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนุธูู!  ุจูุณุงุนุฏุฉ ุงูุฃุฏูุงุช ุงูููููุฉ ุ ุชุนูููุง ููููุฉ ุฅูุดุงุก ูุธุงุฆู ุนูู ุงูุทุงูุฑ ุ ูููู ูู ุงููุงูุน ูุงุฏุฑูุง ูุง ูุชู ุงุณุชุฎุฏุงู ูุฐู ุงููุนุฑูุฉ.  ุงูุขู ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ููููุฉ ุฅูุดุงุก ูุงุฆูุงุช ุงููุฆุฉ ููุงุฆูุงุช ูุซูู ูุฐู ุงููุฆุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> &gt;&gt;&gt; user = User() &gt;&gt;&gt; type(user) &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__main__</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class">'&gt; &gt;&gt;&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(User)</span></span></span><span class="hljs-class"> &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">'&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุงุถุญ ุชูุงููุง ุฃู ูุฆุฉ ุงููุณุชุฎุฏู ุชูุณุชุฎุฏู ูุฅูุดุงุก ูุซูู <code>user</code> ุ ููู ุงููุซูุฑ ููุงูุชูุงู ูุซูุฑูุง ุฃู ููุธุฑ ุฅูู ูุฆุฉ <code>type</code> ุ ูุงูุชู ุชูุณุชุฎุฏู ูุฅูุดุงุก ูุฆุฉ <code>User</code> ููุณูุง.  ููุง ุณูู ููุชูู ุฅูู ุงูุฎูุงุฑ ุงูุซุงูู ูุงุณุชุฏุนุงุก ูุธููุฉ <code>type</code> ุงููุถููุฉ ุ ูุงูุชู ุชููู ูู ูุฌูููุง ุทุจูุฉ metaclass ูุฃู ูุฆุฉ ูู Python.  ุทุจูุฉ metaclass ุ ุจุญูู ุชุนุฑูููุง ุ ูู ูุฆุฉ ูุซูููุง ูุฆุฉ ุฃุฎุฑู.  ุชุชูุญ ููุง Metaclasses ุชุฎุตูุต ุนูููุฉ ุฅูุดุงุก ูุฆุฉ ูุงูุชุญูู ุฌุฒุฆููุง ูู ุนูููุฉ ุฅูุดุงุก ูุซูู ููุฆุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููููุง ููุชูุซูู ุ ูุฅู <code>type(name, bases, attrs)</code> ุงูุชูููุน ุงูุซุงูู <code>type(name, bases, attrs)</code> - ููุฑุฌุน ููุน ุจูุงูุงุช ุฌุฏูุฏ ุฃู ุ ุฅุฐุง ูุงู ุจุทุฑููุฉ ุจุณูุทุฉ - ูุฆุฉ ุฌุฏูุฏุฉ ุ ูุชุตุจุญ ุณูุฉ <code>name</code> ุณูุฉ <code>__name__</code> ูููุฆุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง ุ <code>bases</code> - ุณุชุชููุฑ ูุงุฆูุฉ ูุฆุงุช ุงูุฃุตู ุนูู ุฃููุง <code>__bases__</code> ุ ุญุณููุง ุ <code>attrs</code> - ูุงุฆู ูุดุจู <code>__dict__</code> ูุญุชูู ุนูู ุฌููุน ุณูุงุช ูุฃุณุงููุจ ุงููุตู ุ ุณูู ูุฏุฎู ูู <code>__dict__</code> .  ูููู ูุตู ูุจุฏุฃ ุงููุธููุฉ ุนูู ุฃููุง ููุฏ ุฒุงุฆู ุจุณูุท ูู Python: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">type(name, bases, attrs) ~ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(bases)</span></span></span><span class="hljs-class">:</span></span> attrs</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูุฑู ููู ููููู ุ ุจุงุณุชุฎุฏุงู <code>type</code> ุงูุงุชุตุงู ููุท ุ ุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ ุชูุงููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>User = type(<span class="hljs-string"><span class="hljs-string">'User'</span></span>, (), {}) &gt;&gt;&gt; User &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__main__</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class">'&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑู ุ ูุญู ูุณูุง ุจุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู ุงููููุฉ ุงูุฃุณุงุณูุฉ <code>class</code> ูุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ ุ ูุธููุฉ <code>type</code> ุจุฏูููุง ุ ุฏุนูุง ุงูุขู ููุธุฑ ุฅูู ูุซุงู ุฃูุซุฑ ุชุนููุฏูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, name)</span></span></span><span class="hljs-function">:</span></span> self.name = name <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SuperUser</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(User)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-string"><span class="hljs-string">"""Encapsulate domain logic to work with super users"""</span></span> group_name = <span class="hljs-string"><span class="hljs-string">'admin'</span></span> @property <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">f'</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{self.group_name}</span></span></span><span class="hljs-string">/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{self.name}</span></span></span><span class="hljs-string">'</span></span>.lower() <span class="hljs-comment"><span class="hljs-comment">#     SuperUser "" CustomSuperUser = type( #   'SuperUser', #  ,      (User, ), #         { '__doc__': 'Encapsulate domain logic to work with super users', 'group_name': 'admin', 'login': property(lambda self: f'{self.group_name}/{self.name}'.lower()), } ) assert SuperUser.__doc__ == CustomSuperUser.__doc__ assert SuperUser('Vladimir').login == CustomSuperUser('Vladimir').login</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ูู ุงูุฃูุซูุฉ ุฃุนูุงู ุ ูุฅู ูุตู ุงููุฆุงุช ูุงููุธุงุฆู ุจุงุณุชุฎุฏุงู <code>class</code> ุงููููุงุช ุงูุฑุฆูุณูุฉ ู <code>def</code> ูู ุนุจุงุฑุฉ ุนู ุณูุฑ ูุญูู ููููู ุฅูุดุงุก ุฃู ุฃููุงุน ูู ุงููุงุฆูุงุช ุนู ุทุฑูู ุงูููุงููุงุช ุงูุนุงุฏูุฉ ูููุธุงุฆู ุงููุถููุฉ.  ูุงูุขู ุ ุฃุฎูุฑูุง ุ ุฏุนูุง ูุชุญุฏุซ ุนู ููููุฉ ุงุณุชุฎุฏุงู ุงูุฅูุดุงุก ุงูุฏููุงูููู ูููุตูู ูู ูุดุงุฑูุน ุญููููุฉ. </p><br><h2 id="dinamicheskoe-sozdanie-form-i-validatorov" style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุงูููุงุฐุฌ ูุงููุฏูููู ุฏููุงูููููุง </h2><br><p style=";text-align:right;direction:rtl">  ูุญุชุงุฌ ูู ุจุนุถ ุงูุฃุญูุงู ุฅูู ุงูุชุญูู ูู ุตุญุฉ ุงููุนูููุงุช ูู ุงููุณุชุฎุฏู ุฃู ูู ูุตุงุฏุฑ ุฎุงุฑุฌูุฉ ุฃุฎุฑู ููููุง ููุธุงู ุจูุงูุงุช ูุนุฑูู ูุณุจููุง.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฑูุฏ ุชุบููุฑ ูููุฐุฌ ุชุณุฌูู ุฏุฎูู ุงููุณุชุฎุฏู ูู ููุญุฉ ุงููุดุฑู - ุญุฐู ุงูุญููู ูุฅุถุงูุชูุง ุ ูุชุบููุฑ ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุญูู ุ ููุง ุฅูู ุฐูู. </p><br><p style=";text-align:right;direction:rtl">  ููุชูุถูุญ ุ ุฏุนูุง ูุญุงูู ุฅูุดุงุก ูููุฐุฌ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Django</a> ุฏููุงูููููุง ุ ูุชู ูุตู ูุตู ุงููุฎุทุท ุงูุฐู ุชู ุชุฎุฒููู ุจุชูุณูู <code>json</code> ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"fist_name"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"str"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_length"</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"last_name"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"str"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_length"</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"age"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"int"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"min_value"</span></span>: <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_value"</span></span>: <span class="hljs-number"><span class="hljs-number">99</span></span> } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ุจูุงุกู ุนูู ุงููุตู ุฃุนูุงู ุ ูู ุจุฅูุดุงุก ูุฌููุนุฉ ูู ุงูุญููู ููููุฐุฌ ุฌุฏูุฏ ุจุงุณุชุฎุฏุงู ุฏุงูุฉ <code>type</code> ุงูุชู ูุนุฑููุง ุจุงููุนู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> forms fields_type_map = { <span class="hljs-string"><span class="hljs-string">'str'</span></span>: forms.CharField, <span class="hljs-string"><span class="hljs-string">'int'</span></span>: forms.IntegerField, } <span class="hljs-comment"><span class="hljs-comment"># form_description โ  json    deserialized_form_description: dict = json.loads(form_description) form_attrs = {} #            for field_name, field_description in deserialized_form_description.items(): field_class = fields_type_map[field_description.pop('type')] form_attrs[field_name] = field_class(**field_description) user_form_class = type('DynamicForm', (forms.Form, ), form_attrs) &gt;&gt;&gt; form = user_form_class({'age': 101}) &gt;&gt;&gt; form &lt;DynamicForm bound=True, valid=Unknown, fields=(fist_name;last_name;age)&gt; &gt;&gt;&gt; form.is_valid() False &gt;&gt;&gt; form.errors {'fist_name': ['This field is required.'], 'last_name': ['This field is required.'], 'age': ['Ensure this value is less than or equal to 99.']}</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนุธูู!  ููููู ุงูุขู ููู ุงููููุฐุฌ ุงูุฐู ุชู ุฅูุดุงุคู ุฅูู ุงููููุฐุฌ ูุชูุฏููู ูููุณุชุฎุฏู.  ูููู ุงุณุชุฎุฏุงู ููุณ ุงูููุฌ ูุน ุฃุทุฑ ุนูู ุฃุฎุฑู ููุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุนุฑุถูุง ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DRF Serializers</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฎุทูู</a> ูุบูุฑูุง). </p><br><h2 id="konfiguriruem-sozdanie-novogo-klassa-cherez-metaklass" style=";text-align:right;direction:rtl">  ุชูููู ุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ ูู ุฎูุงู metaclass </h2><br><p style=";text-align:right;direction:rtl">  ุฃุนูุงู ุ ูุธุฑูุง ูู <code>type</code> metaclass ุจุงููุนู "ุงูุชูู" ุ ูููู ูู ูุนุธู ุงูุฃุญูุงู ูู ุงูููุฏ ุณุชููู ุจุฅูุดุงุก metaclasses ุงูุฎุงุตุฉ ุจู ูุงุณุชุฎุฏุงููุง ูุชูููู ุฅูุดุงุก ูุฆุงุช ุฌุฏูุฏุฉ ูุญุงูุงุชูุง.  ูู ุงูุญุงูุฉ ุงูุนุงูุฉ ุ ูุจุฏู "ุงููุฑุงุบ" ูู metaclass ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MetaClass</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(type)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-string"><span class="hljs-string">"""   : mcs โ  ,  &lt;__main__.MetaClass&gt; name โ ,  ,     ,  "User" bases โ   -,  (SomeMixin, AbstractUser) attrs โ dict-like ,         cls โ  ,  &lt;__main__.User&gt; extra_kwargs โ  keyword-     args  kwargs โ          """</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__new__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mcs, name, bases, attrs, **extra_kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super().__new__(mcs, name, bases, attrs) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, name, bases, attrs, **extra_kwargs)</span></span></span><span class="hljs-function">:</span></span> super().__init__(cls) @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__prepare__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mcs, cls, bases, **extra_kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super().__prepare__(mcs, cls, bases, **kwargs) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__call__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super().__call__(*args, **kwargs)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุณุชุฎุฏุงู ูุฐู ุงูุทุจูุฉ ุงูุฃูููุฉ ูุชูููู ูุฆุฉ <code>User</code> ุ ูุชู ุงุณุชุฎุฏุงู ุจูุงุก ุงูุฌููุฉ ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(metaclass=MetaClass)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__new__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, name)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super().__new__(cls) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, name)</span></span></span><span class="hljs-function">:</span></span> self.name = name</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุดูุก ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ุงูุชุฑุชูุจ ุงูุฐู ูุณูู ููู ูุชุฑุฌู Python ุทุฑููุฉ metaclass metamethod ูู ุงูููุช ุงูุฐู ูุชู ููู ุฅูุดุงุก ุงููุตู ููุณู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุญุฏุฏ ุงููุชุฑุฌู ููุฌุฏ ุงููุฆุงุช ุงูุฃุตู ูููุฆุฉ ุงูุญุงููุฉ (ุฅู ูุฌุฏุช). </li><li style=";text-align:right;direction:rtl">  ูุญุฏุฏ ุงููุชุฑุฌู metaclass ( <code>MetaClass</code> ูู ุญุงูุชูุง). </li><li style=";text-align:right;direction:rtl">  ูุชู <code>MetaClass.__prepare__</code> ุทุฑููุฉ <code>MetaClass.__prepare__</code> - ูุฌุจ ุฃู ุชููู ุจุฅุฑุฌุงุน ูุงุฆู ูุดุจู <code>MetaClass.__prepare__</code> ุญูุซ ุณูุชู ูุชุงุจุฉ ุณูุงุช ูุฃุณุงููุจ ุงููุฆุฉ.  ุจุนุฏ ุฐูู ุ ุณูุชู ุชูุฑูุฑ ุงููุงุฆู ุฅูู <code>MetaClass.__new__</code> ุฎูุงู ูุณูุทุฉ <code>attrs</code> .  ุณูุชุญุฏุซ ุนู ุงูุงุณุชุฎุฏุงู ุงูุนููู ููุฐู ุงูุทุฑููุฉ ุจุนุฏ ูููู ูู ุงูุฃูุซูุฉ. </li><li style=";text-align:right;direction:rtl">  ููุฑุฃ ุงููุชุฑุฌู ูุต ูุฆุฉ <code>User</code> ููููุฏ ูุนููุงุช <code>MetaClass</code> ุฅูู <code>MetaClass</code> metaclass. </li><li style=";text-align:right;direction:rtl">  ุทุฑููุฉ <code>MetaClass.__new__</code> - ุทุฑููุฉ <code>MetaClass.__new__</code> ุ ุชููู ุจุฅุฑุฌุงุน ูุงุฆู ุงููุฆุฉ ุงูุฐู ุชู ุฅูุดุงุคู.  ููุฏ ุงูุชูููุง ุจุงููุนู <code>name</code> ุงููุณูุทุงุช <code>bases</code> <code>attrs</code> ุนูุฏ ุชูุฑูุฑูุง ุฅูู ุฏุงูุฉ <code>type</code> ุ ูุณูุชุญุฏุซ ุนู ุงููุนููุฉ <code>**extra_kwargs</code> ุจุนุฏ ุฐูู ุจูููู.  ุฅุฐุง ุชู ุชุบููุฑ ููุน ูุณูุทุฉ <code>attrs</code> ุจุงุณุชุฎุฏุงู <code>__prepare__</code> ุ ููุฌุจ ุชุญููููุง ุฅูู <code>dict</code> ูุจู ุชูุฑูุฑูุง ุฅูู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ <code>super()</code> . </li><li style=";text-align:right;direction:rtl">  <code>MetaClass.__init__</code> ุทุฑููุฉ <code>MetaClass.__init__</code> - ุทุฑููุฉ ุงูุชููุฆุฉ ุงูุชู ููููู ูู ุฎูุงููุง ุฅุถุงูุฉ ุณูุงุช ูุฃุณุงููุจ ุฅุถุงููุฉ ุฅูู ูุงุฆู ุงููุฆุฉ ูู ุงููุฆุฉ.  ูู ุงููุงุญูุฉ ุงูุนูููุฉ ุ ูุชู ุงุณุชุฎุฏุงูู ูู ุงูุญุงูุงุช ุงูุชู ูุชู ูููุง ุชูุฑูุซ metaclasses ูู metaclasses ุงูุฃุฎุฑู ุ ูุฅูุง ูุฅู ูู ูุง ูููู ุงูููุงู ุจู ูู <code>__init__</code> ูุชู ุจุดูู ุฃูุถู ูู <code>__new__</code> .  ุนูู ุณุจูู ุงููุซุงู ุ <strong>ูุง</strong> ูููู ุชุนููู ุงููุนููุฉ <code>__slots__</code> <strong>ุฅูุง</strong> ูู ุทุฑููุฉ <code>__new__</code> ุนู ุทุฑูู ูุชุงุจุชูุง ุฅูู ูุงุฆู <code>attrs</code> . </li><li style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุฎุทูุฉ ุ ูุนุชุจุฑ ุงููุตู ุชู ุฅูุดุงุคู. </li></ol><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู ุจุฅูุดุงุก ูุซูู ูู ูุฆุฉ <code>User</code> ุจูุง ูุฅููุงุก ูุธุฑุฉ ุนูู ุณูุณูุฉ ุงูุงุชุตุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">user = User(name=<span class="hljs-string"><span class="hljs-string">'Alyosha'</span></span>)</code> </pre> <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ููุช ุงุณุชุฏุนุงุก <code>User(...)</code> ุงููุชุฑุฌู ุจุงุณุชุฏุนุงุก ุทุฑููุฉ <code>MetaClass.__call__(name='Alyosha')</code> ุ ุญูุซ ููุฑ ูุงุฆู ุงููุฆุฉ <code>MetaClass.__call__(name='Alyosha')</code> ุงูุชู ุชู ุชูุฑูุฑูุง. </li><li style=";text-align:right;direction:rtl">  <code>MetaClass.__call__</code> ูุณุชุฏุนู <code>User.__new__(name='Alyosha')</code> - ุทุฑููุฉ ูููุดุฆ ุชููุดุฆ ูุชูุฑุฌุน <code>MetaClass.__call__</code> ููุฆุฉ <code>User</code> </li><li style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ <code>MetaClass.__call__</code> ูุชุตู <code>User.__init__(name='Alyosha')</code> - ุทุฑููุฉ ุชููุฆุฉ ุชุถูู ุณูุงุช ุฌุฏูุฏุฉ ุฅูู ุงููุซูู ุงูุฐู ุชู ุฅูุดุงุคู. </li><li style=";text-align:right;direction:rtl">  <code>MetaClass.__call__</code> ุชูุฑุฌุน <code>MetaClass.__call__</code> ููุฆุฉ <code>User</code> . </li><li style=";text-align:right;direction:rtl">  ุนูุฏ ูุฐู ุงูููุทุฉ ุ ูุชู ุฅูุดุงุก ูุซูู ูููุฆุฉ. </li></ol><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุงููุตู ุ ุจุงูุทุจุน ุ ูุง ูุบุทู ุฌููุน ุงููุฑูู ุงูุฏูููุฉ ูู ุงุณุชุฎุฏุงู metaclasses ุ ููููู ูููู ูุจุฏุก ุงุณุชุฎุฏุงู metaprogramming ูุชูููุฐ ุจุนุถ ุงูุฃููุงุท ุงููุนูุงุฑูุฉ.  ุฅูู ุงูุฃูุงู ุฅูู ุงูุฃูุซูุฉ! </p><br><h2 id="abstraktnye-klassy" style=";text-align:right;direction:rtl">  ุฏุฑูุณ ูุฌุฑุฏุฉ </h2><br><p style=";text-align:right;direction:rtl">  ููููู ุงูุนุซูุฑ ุนูู ุงููุซุงู ุงูุฃูู ูู ุงูููุชุจุฉ ุงูููุงุณูุฉ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ABCMeta</a> - ูุฆุฉ metaclass ุชุณูุญ ูู ุจุชุนุฑูู ุฃู ูู ุฎูุงุตุงุช ุงููุตู ูุฅุฌุจุงุฑ ุฌููุน ูุณููุง ุนูู ุชุทุจูู ุทุฑู ูุฎุตุงุฆุต ูุณูุงุช ูุญุฏุฏุฉ ูุณุจููุง ุ ูุฐุง ุงูุธุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> abc <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ABCMeta, abstractmethod <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BasePlugin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(metaclass=ABCMeta)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-string"><span class="hljs-string">"""   supported_formats   run        """</span></span> @property @abstractmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">supported_formats</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function"> -&gt; list:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> @abstractmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, input_data: dict)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ูุชู ุชูููุฐ ุฌููุน ุงูุฃุณุงููุจ ูุงูุตูุงุช ุงููุฌุฑุฏุฉ ูู ุงููุฑูุซ ุ ูุนูุฏูุง ูุญุงูู ุฅูุดุงุก ูุซูู ููุฆุฉ ุงููุฑูุซ ุ ูุญุตู ุนูู <code>TypeError</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VideoPlugin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(BasePlugin)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">'Processing video...'</span></span>) plugin = VideoPlugin() <span class="hljs-comment"><span class="hljs-comment"># TypeError: Can't instantiate abstract class VideoPlugin # with abstract methods supported_formats</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุณุงุนุฏ ุงุณุชุฎุฏุงู ุงููุฆุงุช ุงููุฌุฑุฏุฉ ุนูู ุฅุตูุงุญ ูุงุฌูุฉ ุงููุฆุฉ ุงูุฃุณุงุณูุฉ ุนูู ุงูููุฑ ูุชุฌูุจ ุฃุฎุทุงุก ุงูููุฑุงุซ ุงููุณุชูุจููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุงูุฃุฎุทุงุก ุงููุทุจุนูุฉ ูู ุงุณู ุทุฑููุฉ ุชู ุชุฌุงูุฒูุง. </p><br><h2 id="sistema-plaginov-s-avtomaticheskoy-registraciey" style=";text-align:right;direction:rtl">  ูุธุงู ูุณุงุนุฏ ุงูุชุณุฌูู ุงูุชููุงุฆู </h2><br><p style=";text-align:right;direction:rtl">  ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ูุชู ุงุณุชุฎุฏุงู metaprogramming ูุชูููุฐ ุฃููุงุท ุชุตููู ูุฎุชููุฉ.  ุชูุฑูุจุง ุฃู ุฅุทุงุฑ ุนูู ูุนุฑูู ูุณุชุฎุฏู metaclasses ูุฅูุดุงุก ูุงุฆูุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุณุฌูู</a> .  ุชููู ูุฐู ุงููุงุฆูุงุช ุจุชุฎุฒูู ุงูุงุฑุชุจุงุทุงุช ุจุงููุงุฆูุงุช ุงูุฃุฎุฑู ูุชุณูุญ ุจุชููููุง ุจุณุฑุนุฉ ูู ุฃู ููุงู ูู ุงูุจุฑูุงูุฌ.  ููุฑ ูู ูุซุงู ุจุณูุท ููุชุณุฌูู ุงูุชููุงุฆู ููููููุงุช ุงูุฅุถุงููุฉ ูุชุดุบูู ูููุงุช ุงููุณุงุฆุท ุจุชูุณููุงุช ูุฎุชููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุชูููุฐ Metaclass: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RegistryMeta</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(ABCMeta)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-string"><span class="hljs-string">""" ,      .     " " -&gt; " " """</span></span> _registry_formats = {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__new__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mcs, name, bases, attrs)</span></span></span><span class="hljs-function">:</span></span> cls: <span class="hljs-string"><span class="hljs-string">'BasePlugin'</span></span> = super().__new__(mcs, name, bases, attrs) <span class="hljs-comment"><span class="hljs-comment">#     (BasePlugin) if inspect.isabstract(cls): return cls for media_format in cls.supported_formats: if media_format in mcs._registry_formats: raise ValueError(f'Format {media_format} is already registered') #       mcs._registry_formats[media_format] = cls return cls @classmethod def get_plugin(mcs, media_format: str): try: return mcs._registry_formats[media_format] except KeyError: raise RuntimeError(f'Plugin is not defined for {media_format}') @classmethod def show_registry(mcs): from pprint import pprint pprint(mcs._registry_formats)</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฅููู ุงูุฅุถุงูุงุช ููุณูุง ุ ุณูุฃุฎุฐ ุชุทุจูู <code>BasePlugin</code> ูู ุงููุซุงู ุงูุณุงุจู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BasePlugin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(metaclass=RegistryMeta)</span></span></span><span class="hljs-class">:</span></span> ... <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VideoPlugin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(BasePlugin)</span></span></span><span class="hljs-class">:</span></span> supported_formats = [<span class="hljs-string"><span class="hljs-string">'mpg'</span></span>, <span class="hljs-string"><span class="hljs-string">'mov'</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> ... <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AudioPlugin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(BasePlugin)</span></span></span><span class="hljs-class">:</span></span> supported_formats = [<span class="hljs-string"><span class="hljs-string">'mp3'</span></span>, <span class="hljs-string"><span class="hljs-string">'flac'</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> ...</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชูููุฐ ูุฐุง ุงูุฑูุฒ ุ ุณูููู ุงููุชุฑุฌู ุจุชุณุฌูู 4 ุชูุณููุงุช ูููููููู ุฅุถุงูููู ูู ุงูุชุณุฌูู ูุฏููุง ูููููู ูุนุงูุฌุฉ ูุฐู ุงูุชูุณููุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>RegistryMeta.show_registry() {<span class="hljs-string"><span class="hljs-string">'flac'</span></span>: &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__main__</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AudioPlugin</span></span></span><span class="hljs-class">'&gt;, '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mov</span></span></span><span class="hljs-class">':</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__main__</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VideoPlugin</span></span></span><span class="hljs-class">'&gt;, '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mp3</span></span></span><span class="hljs-class">':</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__main__</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AudioPlugin</span></span></span><span class="hljs-class">'&gt;, '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mpg</span></span></span><span class="hljs-class">':</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__main__</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VideoPlugin</span></span></span><span class="hljs-class">'&gt;} &gt;&gt;&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">plugin_class</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RegistryMeta</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">get_plugin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-class"><span class="hljs-params"><span class="hljs-string">'mov'</span></span></span></span><span class="hljs-class"><span class="hljs-params">)</span></span></span><span class="hljs-class"> &gt;&gt;&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">plugin_class</span></span></span><span class="hljs-class"> &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__main__</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VideoPlugin</span></span></span><span class="hljs-class">'&gt; &gt;&gt;&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">plugin_class</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">()</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">()</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Processing</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">video</span></span></span><span class="hljs-class">...</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูุฌุฏูุฑ ุจุงูุฐูุฑ ูุงุฑู ูุงุญุฏ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ููุนูู ูุน metaclasses ุ ูุฐูู ุจูุถู ุชุฑุชูุจ ุญู ุงูุทุฑููุฉ ุบูุฑ ุงููุงุถุญ ุ ูููููุง ุงุณุชุฏุนุงุก ุทุฑููุฉ <code>show_registry</code> ููุณ ููุท ูู ูุฆุฉ <code>RegistyMeta</code> ุ ูููู ูู ุฃู ูุฆุฉ ุฃุฎุฑู ูููู ูููุง metaclass: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>AudioPlugin.get_plugin(<span class="hljs-string"><span class="hljs-string">'avi'</span></span>) <span class="hljs-comment"><span class="hljs-comment"># RuntimeError: Plugin is not found for avi</span></span></code> </pre> <br><h2 id="ispolzovanie-imen-atributov-v-kachestve-metadannyh" style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ุฃุณูุงุก ุงูุณูุงุช ูุจูุงูุงุช ูุตููุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู metaclasses ุ ููููู ุงุณุชุฎุฏุงู ุฃุณูุงุก ุณูุงุช ุงููุฆุฉ ูุจูุงูุงุช ุชุนุฑูู ูููุงุฆูุงุช ุงูุฃุฎุฑู.  ูุง ุดูุก ูุงุถุญุ  ูููู ูุชุฃูุฏ ูู ุฃูู ูุฏ ุฑุฃูุช ูุฐุง ุงูููุฌ ุจุงููุนู ุนุฏุฉ ูุฑุงุช ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุชุตุฑูุญ ุงูุชุนุฑููู ูุญููู ุงููููุฐุฌ ูู Django: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Book</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(models.Model)</span></span></span><span class="hljs-class">:</span></span> title = models.Charfield(max_length=<span class="hljs-number"><span class="hljs-number">250</span></span>)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุซุงู ุฃุนูุงู ุ <code>title</code> ูู ุงุณู ูุนุฑู Python ุ ููุณุชุฎุฏู ุฃูุถูุง ูุชุณููุฉ ุงูุนููุฏ ูู ุฌุฏูู <code>book</code> ุ ุนูู ุงูุฑุบู ูู ุฃููุง ูู ููุถุญ ุฐูู ุตุฑุงุญุฉู ูู ุฃู ููุงู.  ูุนู ุ ูููู ุชุญููู ูุฐุง "ุงูุณุญุฑ" ุจูุณุงุนุฏุฉ ุงูุจุฑูุฌุฉ ุงูุชุฎุทูุทูุฉ.  ุฏุนูุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูููุฐ ูุธุงููุง ูุฅุฑุณุงู ุฃุฎุทุงุก ุงูุชุทุจูู ุฅูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุ ุจุญูุซ ุชุญุชูู ูู ุฑุณุงูุฉ ุนูู ุฑูุฒ ูุงุจู ูููุฑุงุกุฉ ูููู ุงุณุชุฎุฏุงูู ูุชุฑุฌูุฉ ุงูุฑุณุงูุฉ ุฅูู ูุบุฉ ุฃุฎุฑู.  ูุฐูู ุ ูุฏููุง ูุงุฆู ุฑุณุงูุฉ ูููู ุชุญูููู ุฅูู <code>json</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Message</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, text, code=None)</span></span></span><span class="hljs-function">:</span></span> self.text = text self.code = code <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to_json</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> json.dumps({<span class="hljs-string"><span class="hljs-string">'text'</span></span>: self.text, <span class="hljs-string"><span class="hljs-string">'code'</span></span>: self.code})</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุชู ุชุฎุฒูู ุฌููุน ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุฎุงุตุฉ ุจูุง ูู "ูุณุงุญุฉ ุงุณู" ูููุตูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Messages</span></span></span><span class="hljs-class">:</span></span> not_found = Message(<span class="hljs-string"><span class="hljs-string">'Resource not found'</span></span>) bad_request = Message(<span class="hljs-string"><span class="hljs-string">'Request body is invalid'</span></span>) ... &gt;&gt;&gt; Messages.not_found.to_json() {<span class="hljs-string"><span class="hljs-string">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"Resource not found"</span></span>, <span class="hljs-string"><span class="hljs-string">"code"</span></span>: null}</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฑูุฏ ุงูุขู <code>code</code> ูุง ูุตุจุญ <code>code</code> <code>null</code> ุ ูููู <code>not_found</code> ุ ูููุฐุง ููุชุจ ุงูุทุจูุฉ ุงูููููุฉ ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MetaMessage</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(type)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__new__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mcs, name, bases, attrs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> attr, value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> attrs.items(): <span class="hljs-comment"><span class="hljs-comment">#          Message #    code    # ( code   ) if isinstance(value, Message) and value.code is None: value.code = attr return super().__new__(mcs, name, bases, attrs) class Messages(metaclass=MetaMessage): ...</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูุฑู ููู ุชุจุฏู ูุดุงุฑูุงุชูุง ุงูุขู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>Messages.not_found.to_json() {<span class="hljs-string"><span class="hljs-string">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"Resource not found"</span></span>, <span class="hljs-string"><span class="hljs-string">"code"</span></span>: <span class="hljs-string"><span class="hljs-string">"not_found"</span></span>} &gt;&gt;&gt; Messages.bad_request.to_json() {<span class="hljs-string"><span class="hljs-string">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"Request body is invalid"</span></span>, <span class="hljs-string"><span class="hljs-string">"code"</span></span>: <span class="hljs-string"><span class="hljs-string">"bad_request"</span></span>}</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ุชุญุชุงุฌู!  ุงูุขู ุฃูุช ุชุนุฑู ูุง ูุฌุจ ูุนูู ุจุญูุซ ููููู ุจุณูููุฉ ูู ุฎูุงู ุชูุณูู ุงูุจูุงูุงุช ุงูุนุซูุฑ ุนูู ุงูุฑูุฒ ุงูุฐู ูุนุงูุฌูุง. </p><br><h2 id="keshirovanie-metadannyh-o-klasse-i-ego-naslednikah" style=";text-align:right;direction:rtl">  ุชุฎุฒูู ุงูุจูุงูุงุช ุงููุตููุฉ ููุชุฎุฒูู ุงููุคูุช ุนู ุงููุตู ุงูุฏุฑุงุณู ููุณูู </h2><br><p style=";text-align:right;direction:rtl">  ููุงู ุญุงูุฉ ุดุงุฆุนุฉ ุฃุฎุฑู ูู ุชุฎุฒูู ุฃู ุจูุงูุงุช ุซุงุจุชุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู ูุฑุญูุฉ ุฅูุดุงุก ุงูุตู ุ ุญุชู ูุง ุชุถูุน ุงูููุช ูู ุญุณุงุจูุง ุฃุซูุงุก ุชุดุบูู ุงูุชุทุจูู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูููู ุชุญุฏูุซ ุจุนุถ ุงูุจูุงูุงุช ุนูุฏ ุฅูุดุงุก ูุซููุงุช ุฌุฏูุฏุฉ ูู ุงููุฆุงุช ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนุฏุงุฏ ุนุฏุฏ ุงููุงุฆูุงุช ุงูุชู ุชู ุฅูุดุงุคูุง. </p><br><p style=";text-align:right;direction:rtl">  ููู ูููู ุงุณุชุฎุฏุงู ูุฐุงุ  ุงูุชุฑุถ ุฃูู ุชููู ุจุชุทููุฑ ุฅุทุงุฑ ุนูู ูุจูุงุก ุงูุชูุงุฑูุฑ ูุงูุฌุฏุงูู ููุฏูู ูุซู ูุฐุง ุงููุงุฆู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Row</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(metaclass=MetaRow)</span></span></span><span class="hljs-class">:</span></span> name: str age: int ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, **kwargs)</span></span></span><span class="hljs-function">:</span></span> self.counter = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> attr, value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> kwargs.items(): setattr(self, attr, value) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__str__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> out = [self.counter] <span class="hljs-comment"><span class="hljs-comment">#  __header__      for name in self.__header__[1:]: out.append(getattr(self, name, 'N/A')) return ' | '.join(map(str, out))</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฑูุฏ ุญูุธ ุงูุนุฏุงุฏ ูุฒูุงุฏุฉู ุนูุฏ ุฅูุดุงุก ุตู ุฌุฏูุฏ ุ ููุฑูุฏ ุฃูุถูุง ุฅูุดุงุก ุฑุฃุณ ุงูุฌุฏูู ุงููุงุชุฌ ูุณุจููุง.  ููุชุงููุงุณ ูุงููุงุฐ! </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MetaRow</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(type)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#      row_count = 0 def __new__(mcs, name, bases, attrs): cls = super().__new__(mcs, name, bases, attrs) #          cls.__header__ = ['โ'] + sorted(attrs['__annotations__'].keys()) return cls def __call__(cls, *args, **kwargs): #      row: 'Row' = super().__call__(*args, **kwargs) #    cls.row_count += 1 #     row.counter = cls.row_count return row</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุชูุถูุญ ุดูุฆูู ููุง: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุง ุชุญุชูู ูุฆุฉ ุงูุตู ุนูู ุณูุงุช ูุฆุฉ ูุน <code>name</code> <code>age</code> - ููุฐู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ</a> ุ ูุฐุง ููู ููุณุช ูู ููุงุชูุญ ูุงููุณ <code>attrs</code> ุ <code>__annotations__</code> ุนูู ูุงุฆูุฉ ุงูุญููู ุ ูุณุชุฎุฏู <code>__annotations__</code> ูููุฆุฉ. </li><li style=";text-align:right;direction:rtl">  ูุงู ูู ุงูููุชุฑุถ ุฃู <code>cls.row_count += 1</code> ุงูุนูููุฉ <code>cls.row_count += 1</code> : ููู ุฐููุ  ุจุนุฏ ูู ุดูุก ุ <code>cls</code> ูู ูุฆุฉ <code>Row</code> ุ ูุง ุชุญุชูู ุนูู ุณูุฉ <code>row_count</code> .  ูู ุดูุก ุตุญูุญ ุ ูููู ููุง ุฃูุถุญุช ุฃุนูุงู - ุฅุฐุง ูู ููู ูููุฆุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุณูุฉ ุฃู ุทุฑููุฉ ูุญุงูููู ุงูุงุชุตุงู ุจูุง ุ ูุฅู ุงููุชุฑุฌู ูุฐูุจ ุฅูู ุฃุจุนุฏ ูู ุฐูู ูู ุณูุณูุฉ ุงููุฆุงุช ุงูุฃุณุงุณูุฉ - ุฅุฐุง ูู ููู ููุงู ุฃู ูููุง ุ ูุชู ุงูุจุญุซ ูู ุงูุทุจูุฉ ุงูููููุฉ.  ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ุญุชู ูุง ุชุฑุจู ุฃู ุดุฎุต ุ ูู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุณุฌู ุขุฎุฑ: <code>MetaRow.row_count += 1</code> . </li></ul><br><p style=";text-align:right;direction:rtl">  ุดุงูุฏ ููู ููููู ุงูุขู ุนุฑุถ ุงูุฌุฏูู ุจุฃูููู ุจุฃูุงูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">rows = [ Row(name=<span class="hljs-string"><span class="hljs-string">'Valentin'</span></span>, age=<span class="hljs-number"><span class="hljs-number">25</span></span>), Row(name=<span class="hljs-string"><span class="hljs-string">'Sergey'</span></span>, age=<span class="hljs-number"><span class="hljs-number">33</span></span>), Row(name=<span class="hljs-string"><span class="hljs-string">'Gosha'</span></span>), ] print(<span class="hljs-string"><span class="hljs-string">' | '</span></span>.join(Row.__header__)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> row <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rows: print(row)</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">โ <span class="hljs-params"><span class="hljs-params">| age |</span></span> name <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-params"><span class="hljs-params">| 25 |</span></span> Valentin <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-params"><span class="hljs-params">| 33 |</span></span> Sergey <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-params"><span class="hljs-params">| N/A |</span></span> Gosha</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูููุงุณุจุฉ ุ ูููู ุชุบููู ุงูุนุฑุถ ูุงูุนูู ูุน ุฌุฏูู ูู ูุฆุฉ <code>Sheet</code> ูููุตูุฉ. </p><br><h2 id="prodolzhenie-sleduet" style=";text-align:right;direction:rtl">  ูุชุจุน ... </h2><br><p style=";text-align:right;direction:rtl">  ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุฒุก ุงูุชุงูู ูู</a> ูุฐู ุงูููุงูุฉ ุ ุณุฃุตู ููููุฉ ุงุณุชุฎุฏุงู metaclasses ูุชุตุญูุญ ุฑูุฒ ุงูุชุทุจูู ุงูุฎุงุต ุจู ุ ูููููุฉ ุชุญุฏูุฏ ูุนููุงุช ุฅูุดุงุก metaclass ุ ูุฅุธูุงุฑ ุฃูุซูุฉ ุฃุณุงุณูุฉ ูุงุณุชุฎุฏุงู ุทุฑููุฉ <code>__prepare__</code> .  ุชุฑูุจูุง! </p><br><p style=";text-align:right;direction:rtl">  ุจูุฒูุฏ ูู ุงูุชูุงุตูู ุญูู metaclasses ูุงููุตู ูู Python ุ ุณุฃุฎุจุฑ ูู ุฅุทุงุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Python ุงููุชูุฏู</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar422409/">https://habr.com/ru/post/ar422409/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar422397/index.html">"ุงูุดูุก ุงูุฑุฆูุณู ูู ุฃููู ูุฑุฑุช": ูุงุฐุง ูููู ูุชู ุชุฏุฑูุณ ูุชุฎุตุตู ุชูููููุฌูุง ุงููุนูููุงุช ูู ุงููุณุชูุจู ูู ุจุฑููู</a></li>
<li><a href="../ar422399/index.html">ุนูููุฉ ูุฑุงุฌุนุฉ ุงูููุฏ ูู hh.ru</a></li>
<li><a href="../ar422401/index.html">ุฅุทุงุฑ ุนูู ุฅุถุงูู ูู C ++</a></li>
<li><a href="../ar422403/index.html">20 ุณุจุชูุจุฑ ุ ููุณูู - ููุงุก ูููุญูููู</a></li>
<li><a href="../ar422407/index.html">ุงูุจุญุซ ุนู ุงููุตูุต ุฐุงุช ุงูุตูุฉ ููุฑุฒูุง</a></li>
<li><a href="../ar422411/index.html">ุฃุฏูุงุฑ ุฌุฏูุฏุฉ ูู ุงูุดุฑูุงุช ูู ุนุตุฑ ุงูุฎุฏูุฉ</a></li>
<li><a href="../ar422413/index.html">ุชุทุจูู Arm Mbed OS. ุถุจุท ุฏููู</a></li>
<li><a href="../ar422415/index.html">Python: ุงูุจุฑูุฌุฉ ุงูุชุฎุทูุทูุฉ ูู ุงูุฅูุชุงุฌ. ุงูุฌุฒุก ุงูุซุงูู</a></li>
<li><a href="../ar422417/index.html">Slavik ู GMT + 3 ุฃู ูุงุฆุฏุฉ ูููุงุณ</a></li>
<li><a href="../ar422419/index.html">ููุณ ุจุฏูู ุฐุนุฑ ูู Go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>