<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯПЙ ЁЯТд ЁЯМжя╕П рд▓рд┐рдирдХреНрд╕ рдХреЗ рд▓рд┐рдП рдмреИрдХрдЕрдк рдкрддреНрд░ рдирд╣реАрдВ рд▓рд┐рдЦрддрд╛ рд╣реИ ЁЯФ╜ ЁЯЧТя╕П ЁЯСЧ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╕рднреА рдХреЛ рдирдорд╕реНрдХрд╛рд░! 

 рдЖрдЬ рдореИрдВ рдЖрдкрдХреЛ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓рд┐рдирдХреНрд╕ рдХреЗ рд▓рд┐рдП рд╡реАрдо рдПрдЬреЗрдВрдЯ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдПрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рдХреБрд╢рд▓ рд╣рд╛рдереЛрдВ рдореЗ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд▓рд┐рдирдХреНрд╕ рдХреЗ рд▓рд┐рдП рдмреИрдХрдЕрдк рдкрддреНрд░ рдирд╣реАрдВ рд▓рд┐рдЦрддрд╛ рд╣реИ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/432404/">  рд╕рднреА рдХреЛ рдирдорд╕реНрдХрд╛рд░! <br><br>  рдЖрдЬ рдореИрдВ рдЖрдкрдХреЛ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <b>рд▓рд┐рдирдХреНрд╕ рдХреЗ рд▓рд┐рдП рд╡реАрдо рдПрдЬреЗрдВрдЯ</b> рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдПрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рдХреБрд╢рд▓ рд╣рд╛рдереЛрдВ рдореЗрдВ рдЦреБрд▓рдиреЗ рд╡рд╛рд▓реА рд╕рдВрднрд╛рд╡рдирд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред <br><br>  рдореБрдЭреЗ рдкрд┐рдЫрд▓реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реЗрдЦ</a> рдкрд░ рдПрдХ рдЯрд┐рдкреНрдкрдгреА рджреНрд╡рд╛рд░рд╛ рдПрдХ рд▓реЗрдЦ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЖрд╢реНрдЪрд░реНрдпрдЪрдХрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП: "рдареАрдХ рд╣реИ, рдХреИрд╕реЗ?  рд╕рд░реНрд╡рд░ рдпрд╣ рдмрддрд╛рддреЗ рд╣реБрдП рдкрддреНрд░ рдирд╣реАрдВ рд▓рд┐рдЦрддрд╛ рд╣реИ рдХрд┐ рдЗрд╕реЗ рдмрдЪрд╛ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ! "  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╡рд┐рд╢реНрд▓реЗрд╖рдХреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рд╡рд╣ рдХреЗрд╡рд▓ рдПрдХ рд╣реА рдирд╣реАрдВ рд╣реИ, рдЕрдиреНрдпрдерд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдзрд╛рдЧрд╛</a> рдордВрдЪ рдкрд░ рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджреЗрддрд╛ рдерд╛ред  рдФрд░ рдЬрдм рд╕реЗ рд▓реЛрдЧ рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдХрд┐рд╕реА рдХреЛ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ! <br><br>  рд▓реЗрдЦ рдореЗрдВ рдореИрдВ рдмрддрд╛рдКрдВрдЧрд╛ рдХрд┐ рдпрд╣ рд╡рд┐рд╢реЗрд╖рддрд╛ рдЙрддреНрдкрд╛рдж рдореЗрдВ рдХреНрдпреЛрдВ рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди рд╣рдо рд╡рд╣рд╛рдВ рдирд╣реАрдВ рд░реБрдХреЗрдВрдЧреЗ, рд╣рдо рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЬреЛрдбрд╝ рджреЗрдВрдЧреЗ!  рд╣рдо рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдПрдХ рдкрддреНрд░ рд▓рд┐рдЦреЗрдВрдЧреЗ рдФрд░ рдПрдХ html рдкреГрд╖реНрда рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд░рд┐рдкреЛрд░реНрдЯ рддреИрдпрд╛рд░ рдХрд░реЗрдВрдЧреЗред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8d/yu/df/8dyudfduto6pqilljl-ay1qc2jk.png"></div><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореИрдВ рд╕рдмрд╕реЗ рдЙрдкрдпреЛрдЧреА рджрд┐рдЦрд╛рдКрдВрдЧрд╛, рдореЗрд░реА рд░рд╛рдп рдореЗрдВ, рдЖрджреЗрд╢ рдЬреЛ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреЗ рдХрд╛рдо рдХреЛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рддреИрдпрд╛рд░ рд╣реЛ рдЬрд╛рдУ: рдмрд╣реБрдд рд╕рд╛рд░реЗ рдХреЛрдб, рдХреЛрдИ рдЪрд┐рддреНрд░ рдирд╣реАрдВред <br><a name="habracut"></a><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдЗрдП рдЗрд╕ рдкреНрд░рд╢реНрди рдХрд╛ рдЙрддреНрддрд░ рджреЗрдВ: "рд▓рд┐рдирдХреНрд╕ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╡реАрдо рдПрдЬреЗрдВрдЯ рдХреНрдпреЛрдВ рдирд╣реАрдВ рд╣реИ?" <br><br>  рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдЬрд╡рд╛рдм рдкрд╕рдВрдж рди рдХрд░реЗрдВ, рдореБрдЭреЗ рджреЛрд╖ рди рджреЗрдВред  рд▓реЗрдХрд┐рди рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдЕрдзрд┐рдХ рдпрд╛ рдХрдо рдмрдбрд╝реЗ рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬрд╝ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдпрд╣рд╛рдБ рдХреНрдпреЛрдВ рд╣реИ: <br><br><ul><li> рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдореЗрд▓ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдпрд╛ рддреЛ рд╕реНрдерд╛рдиреАрдп рдорд╢реАрди рдкрд░ smpt рд╕рд░реНрд╡рд░ рд░рдЦрдирд╛ рд╣реЛрдЧрд╛, рдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдХрд┐рд╕реА рдПрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рд╕рдмрд╕реЗ рд╕рд░рд▓ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди ( <code>mail</code> рдХрдорд╛рдВрдб) рдХреЗ рд╕рд╛рде, рдЖрдкрдХреЛ <i>рдореЗрд▓рдЯреБрдЗрд▓реНрд╕</i> рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдФрд░ рдХрдИ рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рд╢рд╛рд╕рдХ рдЕрдкрдиреЗ рдЙрддреНрдкрд╛рджрди рд╕рд░реНрд╡рд░ рдкрд░ рдПрдХ рд╕реЗрд╡рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╕рдВрднрд╛рд╡рд┐рдд рднреЗрджреНрдпрддрд╛ рдкреИрджрд╛ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ рдЬреЛ рдХрд╣реАрдВ рднреА рдкрддреНрд░ рднреЗрдЬ рд╕рдХреЗрдВред  рд╣рд╛рдБ, рдФрд░ рд╕рдВрднрд╛рд╡рдирд╛ рдмрдВрдж рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ, рд╕рдмрдиреЗрдЯ рдХреА рд╕реНрд╡рддрдВрддреНрд░рддрд╛, рдФрд░ рдЕрдзрд┐рдХ рдХреЗ рдХрд╛рд░рдг рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИ ... </li><li>  рджреВрд╕рд░реЗ, рдЪреВрдВрдХрд┐ <i>рдореЗрд▓реНрдпреВрдЯрд┐рд▓реНрд╕</i> рдкреИрдХреЗрдЬ рдмрд╣реБрдд рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ (рдкрд╣рд▓реЗ рдХрд╛рд░рдг рдХреЗ рд▓рд┐рдП), рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИред  рдЕрдиреНрдпрдерд╛, рд╣рдо рдПрдХ рдРрд╕рд╛ рдлрд╝рдВрдХреНрд╢рди рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╡рд╣рд╛рдВ рд▓рдЧрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди "рдмреЙрдХреНрд╕ рд╕реЗ рдмрд╛рд╣рд░" рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдордВрдЪ рдкрд░ рдПрдХ рд╡рд┐рд╖рдп рдкрд░ рдПрдХ рдзрд╛рдЧрд╛ рд╣реЛрдЧрд╛ рдЬреИрд╕реЗ: "рд╕рд░реНрд╡рд░ рдХреЛ рдХреИрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдИрдореЗрд▓ рднреЗрдЬреЗ рдЬрд╛рдПрдВред" </li><li>  рдФрд░ рддреАрд╕рд░рд╛, рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдХреЛрдИ рдЕрддрд┐рд░рд┐рдХреНрдд рдЕрдзрд┐рд╕реВрдЪрдирд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдХрдо рдпрд╛ рдЬреНрдпрд╛рджрд╛ рдмрдбрд╝реЗ рдЙрджреНрдпрдо рдЧреНрд░рд╛рд╣рдХ <b>рд╡реАрдо рдмреИрдХрдЕрдк рдФрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХрд╛</b> рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕рдХрд╛ рдХрдВрд╕реЛрд▓ рдЙрди рд╕рднреА рдмреИрдХрдЕрдкреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдПрдХрддреНрд░ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЬрд╛рдиреЗ-рдорд╛рдиреЗ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдХрд┐рдП рдЧрдП рдереЗред  рдЕрдкрдиреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВред <br></li></ul><br>  <b>Veeam Backup &amp; Replication 9.5 Update 4</b> рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ, рдЗрд╕ рдЙрддреНрдкрд╛рдж рдХреЛ рдореБрдлреНрдд рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рд▓реЗрдХрд┐рди рд╕реЗрд╡рд┐рдд рдЖрднрд╛рд╕реА / рднреМрддрд┐рдХ рдорд╢реАрдиреЛрдВ рдкрд░ рдкреНрд░рддрд┐рдмрдВрдз рдХреЗ рд╕рд╛рдеред <br>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ 3 (рд╕рдорд╛рд╡реЗрд╢реА) рднреМрддрд┐рдХ рд╕рд░реНрд╡рд░ рддрдХ рд╣реИрдВ - рддреЛ рдореБрдлреНрдд рд╡реАрдмреАрдЖрд░ рдлрд╝рдВрдХреНрд╢рди рдЖрдкрдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╕реЗ рдЕрдзрд┐рдХ рд╣реЛрдВрдЧреЗред <br><br>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ 3 рд╕реЗ рдЕрдзрд┐рдХ рдорд╢реАрдиреЗрдВ рд╣реИрдВ, рддреЛ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдк рдЕрднреА рднреА рдЕрдкрдиреЗ рд╕рд░реНрд╡рд░реЛрдВ рдХреЛ рдХреЗрдВрджреНрд░реАрдп рд░реВрдк рд╕реЗ рдореЙрдирд┐рдЯрд░ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдореЗрд░рд╛ рд╕реБрдЭрд╛рд╡ рд╣реИ рдХрд┐ рдЖрдк рд╕реНрд╡рдпрдВ рдХреБрдЫ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдореБрдЭреЗ рд╕реА / рд╕реА ++ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдЕрдЬрдЧрд░ рдореЗрдВ рдЦреБрдж рдХреЛ рдЦреБрд╢ рдХрд░рдирд╛ рдкрд╕рдВрдж рд╣реИред <br><br>  <code>veeamconfig</code> рд╣рдо <code>veeamconfig</code> рдХрдорд╛рдВрдб <code>veeamconfig</code> ред  <code>veeamconfig</code> рдЯреАрдо рдЙрддреНрдкрд╛рдж рдХреА рд╕рднреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред  рдирд┐рд╕реНрд╕рдВрджреЗрд╣, <i>ncurses рдкреБрд╕реНрддрдХрд╛рд▓рдп</i> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдЫрджреНрдо рднреМрдЧреЛрд▓рд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдЖрдВрдЦ рдХреЛ рдЕрдзрд┐рдХ рднрд╛рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдЧрд░ рдЖрдкрдХреЛ рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЛ рдХреБрдЫ рдирдП рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рд╕реАрдПрд▓рдЖрдИ рд╣рдорд╛рд░рд╛ рд╕рдм рдХреБрдЫ рд╣реИред <br><br>  <b>рд▓рд┐рдирдХреНрд╕</b> рдХрдорд╛рдВрдб рдХреЗ <b>рд▓рд┐рдП рд╡реАрдо рдПрдЬреЗрдВрдЯ</b> рдХрд╛ рд╡рд░реНрдгрди рд╕рдВрд╕реНрдХрд░рдг 3.0 рдХреЗ рд▓рд┐рдП рдорд╛рдиреНрдп рд╣реИред  рдореИрдВрдиреЗ рдкрд┐рдЫрд▓реЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдкрд░ рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХреА, рдЗрд╕рд▓рд┐рдП рдорддрднреЗрдж рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  <b>рд▓рд┐рдирдХреНрд╕ рдХреЗ рд▓рд┐рдП рд╡реАрдо рдПрдЬреЗрдВрдЯ</b> рдореЗрдВ рд╕реАрдПрд▓рдЖрдИ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛рдлреА рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдФрд░ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдкреНрд░рд▓реЗрдЦрд┐рдд рд╣реИред  рдмрд╕ <code>veeamconfig --help</code> рджрд░реНрдЬ рдХрд░реЗрдВ рдФрд░ рдЖрдкрдХреЛ рдЙрдкрд▓рдмреНрдз рдЖрджреЗрд╢реЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдорд┐рд▓реЗрдЧреА: <br><br><pre> <code class="plaintext hljs">$sudo veeamconfig --help Veeam Agent for Linux (c) Veeam Software AG Usage: veeamconfig [command] Commands: repository - Backup repositories management vbrserver - Veeam Backup and Replication servers management job - Backup jobs management backup - Backups management point - Restore points management license - License management agreement - End User License Agreement management config - Import/export configuration schedule - Jobs schedule configuration cloud - Cloud provider management mode - Operation mode session - Sessions management ui - User interface aap - Application-aware processing version, --version, -v - Product version help, --help, -h - Short help</code> </pre><br>  рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдХрдорд╛рдВрдб рдЖрдкрдХреЛ рдХреНрдпрд╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдмрд╕ <code>veeamconfig config --help</code> рдХреЙрд▓ рдХрд░реЗрдВред  рд╣рдореЗрдВ рдорд┐рд▓рддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">Veeam Agent for Linux (c) Veeam Software AG Usage: veeamconfig config [command] Commands: import - Import repositories and jobs into database export - Export repositories and jobs from database grabLogs - Collect support logs bundle patchiso - Create custom Veeam Recovery Media adding all hardware drivers from this system help, --help, -h - Short help</code> </pre><br>  рдпрд╣рд╛рдБ, рд╡реИрд╕реЗ, рд╣рдо <code>grabLogs</code> рд▓реЙрдЧ рдХрд▓реЗрдХреНрд╢рди <code>grabLogs</code> рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдЖрдкрдХреЛ рд╕рдорд░реНрдерди рдХреЗ рд▓рд┐рдП рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рд▓реЙрдЧ рдХреЛ рдЬрд▓реНрджреА рд╕реЗ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдХреБрдЫ рдЧрд▓рдд рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдЯреАрдо рднреА рд╣реИ рдЬреЛ рд╕рдВрд╕реНрдХрд░рдг 3.0 рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреА: <br><br><pre> <code class="plaintext hljs">$ sudo veeamconfig agreement --help Veeam Agent for Linux (c) Veeam Software AG Usage: veeamconfig agreement [command] Commands: acceptEula - Accept Veeam End User License Agreements acceptThirdPartyLicenses - Accept Veeam 3rd party License Agreement show - Show End User License Agreements acceptance status help, --help, -h - Short help</code> </pre><br>  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рд╕рдВрд╕реНрдХрд░рдг 3.0 рд╕реЗ рд╢реБрд░реВ рд╣реЛрдХрд░, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд▓рд╛рдЗрд╕реЗрдВрд╕ рд╕рдордЭреМрддреЛрдВ рд╕реЗ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕рд╣рдордд рд╣реЛрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рдпрд╣ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">$ sudo veeamconfig job list I accept Veeam Software End User License Agreement: /usr/share/doc/veeam/EULA (yes/no | y/n): yes I accept the terms of the following 3rd party software components license agreements: /usr/share/doc/veeam/3rd_party (yes/no | y/n):</code> </pre><br>  рддрджрдиреБрд╕рд╛рд░, рдЖрдкрдХреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рдмрд╛рдзрд┐рдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдорд╢реАрди рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЖрджреЗрд╢ рджрд┐рдП рдЧрдП рдереЗ: <br><br><pre> <code class="plaintext hljs">veeamconfig agreement acceptEula veeamconfig agreement acceptThirdPartyLicenses</code> </pre><br>  рд╡реЗ рдЖрдкрдХреЛ рдЖрдЧреЗ рдХреЗ рд╕рд╡рд╛рд▓реЛрдВ рдХреЗ рдмрд┐рдирд╛ рд▓рд╛рдЗрд╕реЗрдВрд╕ рд╕рдордЭреМрддреЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред <br><br>  рд▓реЗрдХрд┐рди рд╣рдо рдПрдХ рдкрддреНрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд╡рд┐рд╖рдп рд╕реЗ рднрдЯрдХ рдЧрдПред <br><br>  рд╕рд░реНрд╡рд░ рд╕реНрдерд┐рддрд┐ рдирд┐рдЧрд░рд╛рдиреА рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ <code>veeamconfig session list</code> рдХрдорд╛рдВрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрд╣ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">Job name Type ID State Started at Finished at bj-home Backup {dbe48e88-3df7-4712-a472-09af8fed4e80} Success 2018-12-05 15:43 2018-12-05 15:44 bj-home Backup {c178a799-2935-4bd6-883b-b11278000076} Success 2018-12-05 16:26 2018-12-05 16:26 bj-home Backup {3405dad3-0016-4a00-933e-60ef66b30324} Success 2018-12-06 06:00 2018-12-06 06:00</code> </pre><br>  рдЦреИрд░, рдпрд╣рд╛рдВ рдЬрд╛рдирдХрд╛рд░реА рд╣реИ рдХрд┐ рдХрдм рд╕рд░реНрд╡рд░ рдХрд╛ рдмреИрдХрдЕрдк рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдФрд░ рдХреНрдпрд╛ рд╕рдлрд▓рддрд╛ рдорд┐рд▓реАред  рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, "рдПрдЧреНрдЬрд╝реЙрд╕реНрдЯ" рдХреЛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЗрдХрдЯреНрдард╛ рдХрд░рдирд╛ рдФрд░ рдкрддреНрд░ рджреНрд╡рд╛рд░рд╛ рднреЗрдЬрдирд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдВрднрд╡ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рд╕рд╛рд▓ рдореЗрдВ рдкрддреНрд░ рд▓рдЧрднрдЧ 365 рд▓рд╛рдЗрдиреЛрдВ рд╕реЗ рдмрдврд╝ рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рддреНрд░реБрдЯрд┐рдпреЛрдВ рд╡рд╛рд▓реЗ <i>рд░рд╛рдЬреНрдп рдХреА</i> рддрд▓рд╛рд╢ рдердХрд╛рдК рд▓рдЧ рд╕рдХрддреА рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд╣рдо рдЗрд╕ "рдирд┐рдХрд╛рд╕" рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВрдЧреЗ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХреБрдЫ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдкреВрд░рд╛ рдХреЛрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рджреЗрдЦреЗрдВ <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CSession</span></span></span><span class="hljs-class">:</span></span> @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">List</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> subproccall( [<span class="hljs-string"><span class="hljs-string">"veeamconfig"</span></span>, <span class="hljs-string"><span class="hljs-string">"session"</span></span>, <span class="hljs-string"><span class="hljs-string">"list"</span></span>] ) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CSessionInfoList</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, list)</span></span></span><span class="hljs-function">:</span></span> self.list = list <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">List</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.list @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> text = CSession.List() lines = text.split(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>) list = [] <span class="hljs-comment"><span class="hljs-comment"># session info list for line in lines: if len(line) == 0: continue words = line.split() if len(words) == 0: continue if words[0] == "Job": continue if words[0] == "Total": continue try: jobName = words[0] type = words[1] id = words[2] state = words[3] startTime = words[4] + " " + words[5] finishTime = words[6] + " " + words[7] list.append(CSessionInfo(id, type, jobName, state, startTime, finishTime)) except: print "Failed to parse [", line, "]" return CSessionInfoList(list)</span></span></code> </pre><br>  рдареАрдХ рд╣реИ, рдЕрдм рдЪрд▓реЛ рдПрдХ рдкрддреНрд░ рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдЦреБрдж рдХреЛ рднреЗрдЬрддреЗ рд╣реИрдВред <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SendMailsessions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"---"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Sending statistic to administrator:"</span></span> sessions = veeamlpb.session.CSessionInfoList.Get() recipient = <span class="hljs-string"><span class="hljs-string">"dear.admin@company.com"</span></span> subject = <span class="hljs-string"><span class="hljs-string">"VAL status notification"</span></span> text = <span class="hljs-string"><span class="hljs-string">"Statistic:\n"</span></span> inx = <span class="hljs-number"><span class="hljs-number">0</span></span>; successCount = <span class="hljs-number"><span class="hljs-number">0</span></span> warningCount = <span class="hljs-number"><span class="hljs-number">0</span></span> errorCount = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> sessionInfo <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> sessions.List(): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sessionInfo.State() == <span class="hljs-string"><span class="hljs-string">"Success"</span></span>): successCount += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> (sessionInfo.State() == <span class="hljs-string"><span class="hljs-string">"Warning"</span></span>): warningCount += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: errorCount += <span class="hljs-number"><span class="hljs-number">1</span></span> text += str(successCount)+<span class="hljs-string"><span class="hljs-string">"/"</span></span>+str(warningCount)+<span class="hljs-string"><span class="hljs-string">"/"</span></span>+str(errorCount)+<span class="hljs-string"><span class="hljs-string">" Success/Warning/Error\n"</span></span> text += <span class="hljs-string"><span class="hljs-string">"Last 10 session:\n"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> sessionInfo <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> reversed(sessions.List()): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> inx == <span class="hljs-number"><span class="hljs-number">10</span></span>: text += <span class="hljs-string"><span class="hljs-string">"...\n"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; text += str(inx)+<span class="hljs-string"><span class="hljs-string">" | "</span></span>+sessionInfo.State()+<span class="hljs-string"><span class="hljs-string">" | "</span></span>+sessionInfo.JobName()+<span class="hljs-string"><span class="hljs-string">" | "</span></span>+sessionInfo.StartTime()+<span class="hljs-string"><span class="hljs-string">" / "</span></span>+sessionInfo.FinishTime() + <span class="hljs-string"><span class="hljs-string">"\n"</span></span> <span class="hljs-comment"><span class="hljs-comment">#text += inx += 1 text += "\n" text += "--------------------------------------------------------------------------------\n" text += " Yours sincerely, Veeam Agent for Linux Monitor\n" print text os.system("echo '"+text+"' | mail -s '"+subject+"' "+recipient)</span></span></code> </pre><br>  рдирддреАрдЬрддрди, <i>mailutils</i> рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж <i>,</i> рд╣рдо рдПрдХ рдкрддреНрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="plaintext hljs">Statistic: 3/0/0 Success/Warning/Error Last 10 session: 0 | Success | bj-home | 2018-12-06 06:00 / 2018-12-06 06:00 1 | Success | bj-home | 2018-12-05 16:26 / 2018-12-05 16:26 2 | Success | bj-home | 2018-12-05 15:43 / 2018-12-05 15:44 -------------------------------------------------------------------------------- Yours sincerely, Veeam Agent for Linux Monitor</code> </pre><br>  рдкрддреНрд░ рдХреЗрд╡рд▓ рдкрд┐рдЫрд▓реЗ 10 рд╕рддреНрд░реЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЙрд╕реА рд╕рдордп, рдкрддреНрд░ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╕рдлрд▓ рдФрд░ рдмрд╣реБрдд рд╕рддреНрд░реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рдХреА рдЬрд╛рддреА рд╣реИред  рдХрд╛рд░реНрдп рджрд┐рд╡рд╕ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдкрддреНрд░ рдореЗрдВ рд╕рдВрдЦреНрдпрд╛рдУрдВ рдХреЛ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рдореЗрд▓ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ рдФрд░ рдПрдХ рдХреЙрдлреА рдирд┐рд░реНрдорд╛рддрд╛ рдХреЛ рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд░рд╛рдд рдХреЗ рдмреИрдХрдЕрдк рд╕рдлрд▓ рдереЗред <br><br>  рдпрджрд┐ рдЖрдкрдХреЛ рдХреБрдЫ рдФрд░ рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдЖрдк xml-format рдореЗрдВ рд╕рддреНрд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдЕрдкрдиреЗ рд╕рд░реНрд╡рд░ рдкрд░ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╡рд╣рд╛рдВ, рдкреНрд░рд╛рдкреНрдд рдбреЗрдЯрд╛ рдХреЛ рдПрдХ рдПрдХрд▓ рд╕рд╛рд░рд╛рдВрд╢ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдорд┐рд▓рд╛рдПрдВ рдЬреЛ рдЖрдкрдХреЗ рд▓рд┐рдП рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдпрд╛ рд╡реНрдпрд╡рд╣рд╛рд░реНрдп рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред <br>  рд╣рдореЗрдВ рдПрдХреНрд╕рдПрдордПрд▓-рджреЛ рд▓рд╛рдЗрдиреЗрдВ рдорд┐рд▓реЗрдВрдЧреА: <br><br><pre> <code class="python hljs">sessionList = veeamlpb.session.CSessionList() text = sessionList.ToXml()</code> </pre><br>  рдкрд░рд┐рдгрд╛рдореА рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рд╣реЗрдЬреЗрдВ <br><br><pre> <code class="python hljs">sessionListFileName = <span class="hljs-string"><span class="hljs-string">"session_list.xml"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Store XML to file: "</span></span>,sessionListFileName sessionListXmlFile = open(sessionListFileName, <span class="hljs-string"><span class="hljs-string">"w"</span></span>) sessionListXmlFile.write(text) sessionListXmlFile.close()</code> </pre><br>  рдлрд┐рд░ рд╣рдо рдкреНрд░рд╛рдкреНрдд XML рдХреЛ рд╕рд░реНрд╡рд░ рдкрд░ рднреЗрдЬрддреЗ рд╣реИрдВред  рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╡рд┐рдХрд▓реНрдк рднреА рд╕рдВрднрд╡ рд╣реИ - рд╕рд░реНрд╡рд░ рдПрдХреНрд╕рдПрдордПрд▓ рдХреЛ рдЙрди рдорд╢реАрдиреЛрдВ рд╕реЗ рдЗрдХрдЯреНрдард╛ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдмреИрдХрдЕрдк рд╣реИрдВред  рд╕рд░реНрдЬрдХ рдХреМрди рд╣реИ рдпрд╣ рдЕрднреА рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИред  рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рд╕рднреА рдорд╢реАрдиреЛрдВ рд╕реЗ рд╕рддреНрд░реЛрдВ рдХреА рд╕реВрдЪреА рдХреЗ рд╕рд╛рде рдПрдХреНрд╕рдПрдордПрд▓ рдлрд╛рдЗрд▓реЗрдВ рд╕рд░реНрд╡рд░ рдкрд░ рдПрдХрддреНрд░ рдХреА рдЬрд╛рддреА рд╣реИрдВред  рдореИрдВрдиреЗ рдкрд╣рд▓рд╛ рд╡рд┐рдХрд▓реНрдк рдЪреБрдирд╛: <br><br><pre> <code class="python hljs">hostname = os.uname()[<span class="hljs-number"><span class="hljs-number">1</span></span>] target = <span class="hljs-string"><span class="hljs-string">"user@admin-desktop:/home/user"</span></span> os.system(<span class="hljs-string"><span class="hljs-string">"scp ./"</span></span>+sessionListFileName+<span class="hljs-string"><span class="hljs-string">" "</span></span>+target+<span class="hljs-string"><span class="hljs-string">"/backups/"</span></span>+hostname+<span class="hljs-string"><span class="hljs-string">"/session_list.xml"</span></span>)</code> </pre><br>  рдЕрдм, рд╕рд░реНрд╡рд░ рдХреА рдУрд░, рдпрд╣ рдкреНрд░рд╛рдкреНрдд рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдФрд░ рдПрдХ рд╕реБрдВрджрд░ HTML рдкреГрд╖реНрда рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛ рд╣реБрдЖ рд╣реИред <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> veeamlpb <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> xml.etree.ElementTree <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> xml <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> hosts = [] backupsDirectory = <span class="hljs-string"><span class="hljs-string">"/home/user/backups"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> os.listdir(backupsDirectory): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-string"><span class="hljs-string">".."</span></span>]: <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> os.path.isdir(os.path.join(backupsDirectory,item)): hosts.append(item) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"item: "</span></span>,item <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(hosts) == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> backupSessionMap = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> host <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> hosts: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"found host: "</span></span>, host sessionInfoFile = os.path.join(os.path.join(backupsDirectory,host), <span class="hljs-string"><span class="hljs-string">"session_list.xml"</span></span>) sessionList = veeamlpb.session.CSessionInfoList.FromXmlFile(sessionInfoFile) backupSessionMap[host] = sessionList <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> sessionInfo <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> sessionList.List(): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Session:"</span></span>,sessionInfo.ToString() html = xml.Element(<span class="hljs-string"><span class="hljs-string">"html"</span></span>) body = xml.SubElement(html, <span class="hljs-string"><span class="hljs-string">"body"</span></span>, {<span class="hljs-string"><span class="hljs-string">"style"</span></span>:<span class="hljs-string"><span class="hljs-string">"background-color: #00b336;"</span></span>}) xml.SubElement(body,<span class="hljs-string"><span class="hljs-string">"h1"</span></span>).text = <span class="hljs-string"><span class="hljs-string">"Report at "</span></span>+datetime.datetime.now().strftime(<span class="hljs-string"><span class="hljs-string">"%Y-%m-%d %H:%M:%S"</span></span>) xml.SubElement(body,<span class="hljs-string"><span class="hljs-string">"h2"</span></span>).text = <span class="hljs-string"><span class="hljs-string">"Statistic:"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> host <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> hosts: sessionList = backupSessionMap[host] success=<span class="hljs-number"><span class="hljs-number">0</span></span> warning=<span class="hljs-number"><span class="hljs-number">0</span></span> error=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(sessionList.List()) == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> sessionInfo <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> sessionList.List(): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> sessionInfo.State() == <span class="hljs-string"><span class="hljs-string">"Success"</span></span>: success +=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> sessionInfo.State() == <span class="hljs-string"><span class="hljs-string">"Warning"</span></span>: warning +=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: error +=<span class="hljs-number"><span class="hljs-number">1</span></span> latestSessionInfo = sessionList.List()[<span class="hljs-number"><span class="hljs-number">-1</span></span>] attr = {} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> latestSessionInfo.State() == <span class="hljs-string"><span class="hljs-string">"Success"</span></span>: <span class="hljs-comment"><span class="hljs-comment">#attr["style"] = "background-color: #00b336;" attr["style"] = "background-color: #005f4b; color: white;" elif latestSessionInfo.State() == "Warning": attr["style"] = "background-color: #93ea20;" else: attr["style"] = "background-color: #ba0200; color: white;" xml.SubElement(xml.SubElement(body,"p"),"span", attr).text = \ host + " - "+str(success)+"/"+str(warning)+"/"+str(error)+" Success/Warning/Error" for host in hosts: sessionList = backupSessionMap[host] xml.SubElement(body,"h2").text = host+":" tableStyle =xml.SubElement(body,"style") tableStyle.attrib["type"] = "text/css" tableStyle.text = "TABLE {border: 1px solid green;} TD{ border: 1px solid green; padding: 4px;}" table = xml.SubElement(body,"table") thead = xml.SubElement(table, "thead") xml.SubElement(thead, "th").text = "Number" xml.SubElement(thead, "th").text = "State" xml.SubElement(thead, "th").text = "Job name" xml.SubElement(thead, "th").text = "Start at" xml.SubElement(thead, "th").text = "Complete at" tbody = xml.SubElement(table, "tbody") inx = 0 for sessionInfo in reversed(sessionList.List()): if inx == 10: break; tr = xml.SubElement(tbody,"tr") xml.SubElement(tr, "td").text = str(inx) attr ={} if sessionInfo.State() == "Success": pass elif sessionInfo.State() == "Warning": attr["style"] ="background-color: #93ea20;" else: attr["style"] ="background-color: #ba0200; color: white;" xml.SubElement(tr, "td", attr).text = sessionInfo.State() xml.SubElement(tr, "td").text = sessionInfo.JobName() xml.SubElement(tr, "td").text = sessionInfo.StartTime() xml.SubElement(tr, "td").text = sessionInfo.FinishTime() inx += 1 xml.ElementTree(html).write("summary.html", encoding='utf-8', method='html') return 0 exit(main())</span></span></code> </pre><br>  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд░рд┐рдкреЛрд░реНрдЯ рддреИрдпрд╛рд░ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/sk/yd/-x/skyd-xbv3cxvadto3fpw9vc3y6s.png"><br><br>  рдореБрдЭреЗ рд╕реБрдВрджрд░ рдЙрддреНрдкрд╛рдж рдмрдирд╛рдиреЗ рдХрд╛ рдХреЛрдИ рдХрд╛рдо рдирд╣реАрдВ рдерд╛ред  рдХрд╛рд░реНрдп рдпрд╣ рджрд┐рдЦрд╛рдирд╛ рдерд╛ рдХрд┐ рдЖрдБрдХрдбрд╝реЛрдВ рдХреЛ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреЗ рдкреНрд░рд╢реНрди рдХреЛ рдПрдХ рд╕реЗ рджреЛ рджрд┐рдиреЛрдВ рдореЗрдВ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рд╣рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдпрджрд┐ рдЖрдк рдпрд╣рд╛рдВ рдкреНрд░рд╕реНрддреБрдд рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк "рд▓рд┐рдирдХреНрд╕ рдХреЗ рд▓рд┐рдП рд╡реАрдо рдПрдЬреЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдУрдкрди рдмреИрдХрдЕрдк рдореЙрдирд┐рдЯрд░" рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдореЗрд░реА рд░рд╛рдп рдореЗрдВ, рдкрд╛рдпрдерди рдореЗрдВ рдХреЛрд░реНрд╕рд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрдЪреНрдЫрд╛ рд╡рд┐рд╖рдп, рдпрд╛ рд╢рд╛рдпрдж рдбрд┐рдкреНрд▓реЛрдорд╛ рдХреЗ рд▓рд┐рдП рднреА, рдпрд╛ рд╕рд┐рд░реНрдл рдПрдХ рдУрдкрди рд╕реЛрд░реНрд╕ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░рдиреЗ рдХрд╛ рдмрд╣рд╛рдирд╛ред  рд╕рд╣рдордд рд╣реИрдВ, 80 рд╡реЗрдВ рд╕реНрддрд░ рдХреЗ рдпреЛрдЧ рдмрдирдиреЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред <br><br>  рд╕рднреА рдХреЛрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://www.github.com/CodeImp/veeampy/</a> рдкрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреЗрдЦреЗ</a> рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдбрд╛рдЙрдирд▓реЛрдб, рдЙрдкрдпреЛрдЧ, рдкреВрд░рдХ рдФрд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдкрд░ рдХрд╛рдВрдЯрд╛ред <br><br>  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреЛрдб GPL-2 рд▓рд╛рдЗрд╕реЗрдВрд╕ рдХреЗ рддрд╣рдд рд╡рд┐рддрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рдореЗрдВ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдФрд░ рдмрд╣реБрдд рдХреБрдЫ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдУрдкрдирд╕реЛрд░реНрд╕ рдХреА рджреБрдирд┐рдпрд╛ рдореЗрдВ рд╕рдм рдХреБрдЫ рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣ рд╣реИред  рдЗрд╕рд▓рд┐рдП рдЙрддреНрдкрд╛рджрди рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ - рдЯреЗрд╕реНрдЯ рд▓реИрдм рдореЗрдВ рдбреНрд░рд╛рдЗрд╡ рдХрд░рдирд╛ рди рднреВрд▓реЗрдВред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi432404/">https://habr.com/ru/post/hi432404/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434972/index.html">Comment ├йcrire des tests unitaires si vous n'en avez pas envie du tout</a></li>
<li><a href="../fr434974/index.html">Travailler avec un format de configurations 1C: Enterprise</a></li>
<li><a href="../fr434976/index.html">ITAB University Fablab: DIY-coworking pour les cr├йatifs - montrer ce qu'il y a ├а l'int├йrieur</a></li>
<li><a href="../fr434978/index.html">Pr├йsentation de HealthKit</a></li>
<li><a href="../hi432402/index.html">рдЕрд░реЗ рдПрдЪрдЖрд░, рдореЗрд░реА рд╕реНрдорд╛рд░рд┐рдХрд╛ рдХрд╣рд╛рдБ рд╣реИ?</a></li>
<li><a href="../hi432408/index.html">рдлрд┐рдирдЯреЗрдХ рдбрд╛рдЗрдЬреЗрд╕реНрдЯ: рд╡реАрдЬрд╝рд╛ рдФрд░ рдорд╛рд╕реНрдЯрд░рдХрд╛рд░реНрдб, рдПрдХ рдкреЗрдВрд╢рди рдХреИрд▓рдХреБрд▓реЗрдЯрд░ рдФрд░ рди рдХреЗрд╡рд▓ рд╕реЗ рдЫреЛрдЯреЗ рдмреИрдВрдХреЛрдВ рдХреЛ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рддреИрдпрд╛рд░реА</a></li>
<li><a href="../hi432410/index.html">рдбреАрдбреАрдбреА рд╢реИрд▓реА рдПрдВрдЯрд┐рдЯреА рдлреНрд░реЗрдорд╡рд░реНрдХ рдХреЛрд░ рдХреЗ рд╕рд╛рде рд╕рдВрд╕реНрдерд╛рдУрдВ</a></li>
<li><a href="../hi432412/index.html">Highload ++: рдИрдЖрд░рдкреА рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб 500,000 рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХреИрд╕реЗ рдХрд░реЗрдВ</a></li>
<li><a href="../hi432414/index.html">рддреНрд╡рд░рд┐рдд рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдкреБрд░рд╛рдирд╛ рд░рд╣рд╕реНрдп: рдПрдирд┐рдореЗрдЯреЗрдб рд╕реЛрд░реНрд╕ рдХреЛрдб</a></li>
<li><a href="../hi432416/index.html">рдирд┐рд░реНрднрд░ рдкреНрд░рдХрд╛рд░ - рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛рдУрдВ рдХрд╛ рднрд╡рд┐рд╖реНрдп</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>