<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤲🏿 😠 🙉 Playrix CI / CD: كيف نبني ألعابنا ونختبرها 👩🏻‍🔧 🌜 🍟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="يجب أن يركز الفريق على إنشاء ألعاب جميلة وناجحة ، لأن كل شيء آخر هو CI. 

 أين نطبق CI؟ ما هي النهج والمفاهيم التي نستخدمها؟ لماذا بناء واختبار يبني؟ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Playrix CI / CD: كيف نبني ألعابنا ونختبرها</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/playrix/blog/479966/" style=";text-align:right;direction:rtl">  يجب أن يركز الفريق على إنشاء ألعاب جميلة وناجحة ، لأن كل شيء آخر هو CI. <br><br>  أين نطبق CI؟  ما هي النهج والمفاهيم التي نستخدمها؟  لماذا بناء واختبار يبني؟  القصة التفصيلية حول CI وكيف يتم تنظيمها في Playrix سوف ترسم دورة من المحاضرات.  تحت خفض - الضغط وجيزة وعدد قليل من لهجات. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b4e/54d/ab2/b4e54dab26c1357b27e3e31b88c9378d.png"></div><a name="habracut"></a><br>  مرحبا. <br><br>  أولا ، الاحماء قليلا: ما هو التكامل المستمر؟  إذا كان الفريق يستخدم المستودع ويجمع تصميمات ليلية - فهل هذا CI بالفعل؟  ما هو الفرق بين النشر المستمر والتسليم؟  إنه غير مهم تقريبًا.  تفاصيل - لدائرة ضيقة من المتخصصين.  إذا كنت ترغب في إشراك الشركة بأكملها في عملية ما ، فابحث عن اسم بسيط وجيد لها.  في Playrix ، ندعو جميع هذه الأساليب CI.  هذه علامة تجارية محلية وشعار رائع: <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ebe/d97/d8e/ebed97d8e7a2fff88508b8e73c6b0e97.png" width="500"></div><br><h2 style=";text-align:right;direction:rtl">  فكرة </h2><br>  CI ليس هدفا ، بل هو أداة.  يجب أن يكون هناك هدف تريد تحقيقه من خلال التكامل المستمر ، وهي مشكلة تحتاج إلى حل.  يحدث أن عمليات التطوير والإطلاق في فريق مبنية على مبدأ "الصلاة والإنتاج".  في بعض الأحيان يكون له ما يبرره ، ولكن بشكل غير منتظم. <br><br>  قمنا بصياغة هدفنا على النحو التالي: تقليل احتمالية حدوث مشاكل تكامل إلى الحد الأدنى ، وتقليل الموارد اللازمة لتصحيح الأخطاء الموجودة ، وتقليل وقت فرق تطوير المشاريع لدعم ودعم عمليات CI. <br>  CI هي أتمتة عمليات الإنشاء ، واختبار الكود وتقديمه إلى بيئات مختلفة ، وأتمتة عمليات التطوير الروتينية ، والتكامل المتبادل للخدمات التي نستخدمها جميعًا. <br><br>  تكمن الفكرة في نظام يقوم تلقائيًا بجمع كل شيء تلقائيًا ، ويقوم بذلك في كثير من الأحيان ، ويقوم باختبار بناء وتقديمه ، كما يستهدف أيضًا الإبلاغ عن تقرير مناسب إذا حدث خطأ ما. <br><br><h2 style=";text-align:right;direction:rtl">  أين نطبق CI؟ </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  المحرك والمرافق ، </li><li style=";text-align:right;direction:rtl">  ألعابنا لجميع المنصات ، </li><li style=";text-align:right;direction:rtl">  كود الخادم </li><li style=";text-align:right;direction:rtl">  التحليلات ، خدمات التسويق ، الأتمتة المختلفة ، خدمات CI ، </li><li style=";text-align:right;direction:rtl">  البنية التحتية. </li></ul><br>  هذا هو في كل مكان أو في كل مكان تقريبا. <br><br>  قم بتجميع الحاويات واختبارها وعمليات النشر التلقائية في تحديثات الاختبار والتدريج وبرود والمتداول والكناري - كل هذا لدينا وأكثر قابلية للتطبيق على الخدمات وتطبيقات الويب.  اليوم سوف نركز على CI للألعاب: بناء البنى واختبارها وتسليمها. <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e87/bab/b31/e87babb31e40c7d90e3994f45be77792.png" width="500"></div><br><h2 style=";text-align:right;direction:rtl">  نماذج </h2><br>  لتحقيق الأهداف المذكورة أعلاه ، تحتاج إلى حل العديد من المشاكل.  في ما يلي خطة نتبعها عندما نقوم بأتمتة بعض العمليات في التطوير ، على سبيل المثال ، تجميع عميل لعبة محمولة.  من المريح للغاية الحصول على قائمة من الأسئلة والإجابة عليها ، والتي يمكنك حل أي مشكلة تقع في فريق CI. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><h3 style=";text-align:right;direction:rtl">  توثيق </h3></li></ul><br>  بناء تعليمات التجميع هي الوثائق ، وصفا للعملية الآلية لدينا.  غالبًا ما تكون هذه الوثائق في رأس المبرمجين.  إذا كان لدى الفريق أخصائي فائق في بناء المباني وبدون ذلك ، فلن يتمكن أحد من بناء مبنى سريع وخالي من الأخطاء - لقد حان الوقت لتغيير شيء ما ، فلن يكون هناك إرسال. <br><br>  حسنًا ، إذا تم تأطير مثل هذه الوثائق في شكل برنامج نصي: لقد أدخلت سطر أوامر ومجموعة من المعلمات على جهاز به بيئة معدة - حصلت على بنية. <br><br>  أفضل وثائق العملية هي كود <s>القط</s> .  حتى لو كنت بحاجة لسبب ما لتكرار العملية يدويًا ، يمكنك دائمًا القيام بذلك من خلال النظر فيها. <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bc1/b35/41c/bc1b3541c1eaf585466131dfc966a466.png" width="500"></div><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><h3 style=";text-align:right;direction:rtl">  اليومية </h3></li></ul><br>  يسمح لك سجل البنية دائمًا بالتأكد بالتأكيد من: من ، ومتى ، ومن الذي ارتكب ، ومع أي نتيجة تم جمع هذا البناء أو ذاك.  بالأمس ، كانت البنية على وشك ، ولكن اليوم لم تكن كذلك.  ننظر في السجل ، ونجد أول بنية مرنة ، ونرى قائمة الالتزامات التي حصلت هناك - الربح. <br><br>  المجلة أكثر فائدة عندما يتعلق الأمر ، على سبيل المثال ، برمز الخادم.  إذا لم تكن هناك معلومات حول من قام بتحديث prod ومتى ، فعندئذٍ في الحالة العامة ، لا يُعرف الرمز الذي يعمل حاليًا هناك.  وأحيانًا يكون ذلك مهمًا جدًا. <br><br>  يمكنك الاحتفاظ بهذه المجلة في دفتر الأستاذ ، ويفضل أن يكون ذلك في جدول أو ويكي.  قائمة البنيات في نظام CI لا تقدر بثمن. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4dc/a88/26c/4dca8826cad8ae341be5df436c3fcab4.png"></div><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><h3 style=";text-align:right;direction:rtl">  سلامة </h3></li></ul><br>  عندما يتعلق الأمر ببناء مبنى ونشره على نوع من البيئة ، فإن السؤال الذي يطرح نفسه دائمًا هو: أين يمكنك تخزين كلمات مرور تسجيل الدخول / الوصول؟  عادة ما يحتاجون إلى الكثير: إلى المستودع لتنزيل البيانات المصدر ، إلى تخزين الملفات لملء موارد اللعبة ، إلى HockeyApp لإرسال الأحرف ، إلى الخادم لتحديث الرمز ، إلخ. <br><br>  يحدث أن يتم تخزين كافة عمليات الوصول الضرورية في المستودع.  هناك فرضية أن هذه ليست جيدة جدا.  غالبًا ما يمكنك رؤية حقل "إدخال كلمة المرور" ، على سبيل المثال ، في جنكينز ، حيث يدخل مؤلف البناء إلى الأحرف المخفية. <br><br>  تذكر كل كلمات المرور عن ظهر قلب هو مهارة جيدة.  يتلقى خادم CI الخاص بنا نفسه عمليات الوصول الضرورية وفقًا للتجميع.  عادةً ما تكون هذه الرموز المميزة قصيرة العمر التي يتم إنشاؤها في بداية الإنشاء وتعطي الحد الأدنى من الحقوق بالضبط حيث ننشر شيئًا ما أو حيث نقرأ شيئًا منه. <br><br>  تتيح لك الإدارة المركزية للتجميع والنشر حل مشكلة التمييز بين حقوق الوصول للبنية التحتية.  لماذا منح شخص ما حق الوصول إلى الخادم إذا كان يمكنك فقط منح حق الوصول إلى تجميع البنية المقابلة التي تقوم بالعملية الضرورية على هذا الخادم؟  وبما أن هناك بناءًا ، فنحن لدينا وثائق وتوثيق ، حسناً ، أنت تفهم ذلك. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><h3 style=";text-align:right;direction:rtl">  التتبع </h3></li></ul><br>  غالبًا ما يتبقى الكثير من الآثار أثناء وقت البناء.  لا ، ليس هكذا: أثناء الإنشاء ، من الضروري ترك أكبر عدد ممكن من الآثار.  في المستودع ، في تعقب المهام ، في نظام توزيع البناء.  في كل مكان ، أينما كنت تقابل بناءً ، يجب أن تكون هناك آثار تقودك إلى إكمال المعلومات المتعلقة به. <br><br>  لا يجب إزالة هذه الآثار ، بل على العكس ، يجب تركها بعناية وحفظها بعناية.  علاوة على ذلك ، سوف أخبركم المزيد حول هذا الموضوع ، لكن أولاً نحتاج إلى جمع بياناتنا.  دعنا نذهب. <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/75c/436/e91/75c436e91724a70d5442af7c6432516d.png" width="500"></div><h2 style=";text-align:right;direction:rtl">  قبل الالتزام السنانير </h2><br>  مرة أخرى ، الفكرة هي نظام يجمع ويختبر ويبلغ عن كل شيء.  ولكن لماذا بناء بناء إذا كنت لا تستطيع بناء عليه؟ <br><br>  جميع مطوري ألعابنا لديهم تثبيتات مسبقة للتثبيت ، أي  مجموعة من الاختبارات التي يتم تنفيذها عند محاولة ارتكاب شيء ما.  يتم تشغيل الاختبارات فقط للملفات التي تم تعديلها ، لكننا قمنا بتطبيق نظام بحث التبعية التبادلية للغاية للتحقق من جميع المحتويات ذات الصلة أيضًا.  أي  إذا أضاف الفنان مادة ، فسوف يتحقق السنانير من أنهم لم ينسوا تسجيلها حيثما دعت الحاجة ، ولم يختموها. <br><br>  اتضح أن السنانير تلتقط جزءًا كبيرًا من الأخطاء الصغيرة.  إنها توفر موارد نظام الإنشاء وتساعد المطور على حل المشكلة بسرعة: يرى رسالة توضح بالتفصيل ما حدث من خطأ.  وهو لا يحتاج إلى التبديل بين المهام: لقد قام حرفيًا بإجراء تغييرات وهو في السياق الصحيح.  خطأ تصحيح الوقت هو الحد الأدنى. <br><br>  لقد أحببنا ذلك كثيرًا لدرجة أننا صنعنا حتى نظامًا يتحقق مما إذا كانت الخطافات قد صنعت لالتزام دخل في المستودع.  إذا لم يكن الأمر كذلك ، سيتلقى مؤلف هذا الالتزام تلقائيًا مهمة يطلب منهم تكوينها وتعليمات مفصلة حول كيفية القيام بذلك. <br><br>  السنانير موحدة لجميع المشاريع.  عدد الاختبارات المخصصة هو الحد الأدنى.  هناك تخصيص مناسب ، بما في ذلك اعتمادًا على المستخدم الذي يعمل: هذا مناسب جدًا لاختبارات الاختبار. <br><br><h2 style=";text-align:right;direction:rtl">  بناء </h2><br>  لمعرفة المشكلة في الإنشاء في أقرب وقت ممكن ، تحتاج إلى جمع هذه الإنشاءات واختبارها قدر الإمكان.  يجتمع عملاء ألعابنا لجميع المنصات ، لكل التزام ، لجميع المشاريع.  ربما هناك بعض الاستثناءات ، ولكن ليس الكثير. <br><br>  عادةً ما يكون لدى العميل ، وخاصة العميل المتنقل ، العديد من الإصدارات المختلفة: مع أو بدون خداع ، توقيع مختلف ، إلخ.  لكل التزام ، نقوم بتجميع تصميمات "منتظمة" ، والتي يستخدمها المطورين والمختبرين باستمرار. <br><br>  هناك تصميمات تُستخدم نادرًا جدًا ، على سبيل المثال ، متجر ios build - مرة واحدة فقط في التقديم ، أي  حوالي مرة واحدة في الشهر.  ومع ذلك ، نعتقد أن جميع البنيات ينبغي جمعها بانتظام.  في حالة حدوث مشكلة في هذا النوع من التجميع ، على الجانب المتعلق بالتطوير أو البنية التحتية ، سيعرف فريق المشروع عن ذلك ليس في يوم تسليم الإنشاء ، ولكن في وقت أبكر بكثير ، وسيكون قادرًا على الاستجابة للمشكلة وحلها مقدمًا. <br><br>  نتيجة لذلك ، لدينا قاعدة بسيطة: يتم إطلاق أي بنية مرة واحدة على الأقل يوميًا.  يكتشف فريق تطوير المشروع وجود أي مشاكل على أي منصة في أسوأ الحالات في صباح اليوم التالي بعد ظهور هذه المشكلة في المستودع. <br><br>  يتطلب مثل هذا التردد من التجميعات والاختبارات اتباع نهج خاص لتحسين وقت التنفيذ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  جميع يبني العملاء العادية هي تدريجية. </li><li style=";text-align:right;direction:rtl">  أطالس التعبئة وإعداد الموارد هي أيضا تدريجي. </li><li style=";text-align:right;direction:rtl">  التجميعات محببة: بعض الخطوات في تكوينات بناء منفصلة - وهذا يسمح لك بتنفيذها بشكل متواز ، وكذلك إعادة استخدام النتائج الوسيطة. </li></ul><br>  هذه لقطة كاملة تقريبًا لسلسلة التصميمات والاختبارات الخاصة بـ WildScapes.  لا يمكن القيام بالكامل: فهو أكبر من ضعف الحجم. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/672/415/771/67241577111cb4d6b5d1df70a54337e5.png"></div><br><h2 style=";text-align:right;direction:rtl">  اختبارات ثابتة </h2><br>  بعد التجميع ، يتم إجراء اختبار ثابت: نأخذ المجلد بالبناء ونجري مجموعة من الاختبارات لكل المحتوى الموجود.  الرمز هو أيضًا محتوى ، لذلك التحليل الثابت (cppcheck + PVS-Studio) موجود أيضًا هنا. <br><br>  على habr <a href="https://habr.com/ru/company/playrix/blog/452926/">كان</a> هناك <a href="https://habr.com/ru/company/playrix/blog/452926/">مادة مفصلة</a> حول كيفية تنفيذ اختبارات ثابتة ، أوصي به.  أؤكد فقط أن الاختبارات الثابتة بعد الإنشاء وفي خطافات الالتزام المسبق يتم تنفيذها بنفس الكود.  هذا يبسط إلى حد كبير دعم النظام. <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/69f/195/0dd/69f1950dd3434591d233507574609672.png" width="500"></div><br><h2 style=";text-align:right;direction:rtl">  اختبارات وقت التشغيل </h2><br>  إذا نجحت الاختبارات الثابتة ، يمكنك المضي قدمًا ومحاولة تشغيل الإنشاء المجمع.  نحن نختبر الإنشاءات على جميع الأنظمة الأساسية باستثناء UWP ، أي  Windows ، MacOs ، iOS ، Android.  UWP - سيكون أيضا ، ولكن في وقت لاحق قليلا. <br><br>  لماذا اختبار بنيات سطح المكتب إذا كانت تبدو ضرورية فقط في التطوير؟  الجواب على السؤال هو: من السيء أن يحصل فنان أو مصمم بمستوى على تصميم يتعطل عند بدء التشغيل لسبب مثير للسخرية.  لذلك ، يتم إجراء اختبار Smoke-Test ، وهو الحد الأدنى لمجموعة من اختبارات القابلية للتشغيل واللعب الأساسي ، على كافة الأنظمة الأساسية. <br><br>  كل ما تمت كتابته أعلاه عن عمليات الإنشاء ينطبق أيضًا على الاختبارات على الأجهزة - مرة واحدة على الأقل يوميًا.  مع بعض الاستثناءات القليلة: هناك اختبارات طويلة للغاية لا يوجد لديها وقت لإكمالها في يوم واحد. <br><br>  يتم تنفيذ اختبارات الدخان لكل التزام.  يعد إكمال الاختبارات الأساسية بنجاح شرطًا أساسيًا للدخول في نظام التوزيع.  عادة ما يكون من غير المنطقي منح شخص ما حق الوصول إلى بنية لا تعمل بشكل واضح.  هنا يمكنك الاعتراض والتوصل إلى استثناءات.  تحتوي المشاريع على حل بديل لإتاحة الوصول إلى بنية غير عاملة ، لكنها بالكاد تستخدمها. <br><br>  ما هي الاختبارات الأخرى هناك: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  المعيار: نتحقق من الأداء على FPS والذاكرة في المواقف المختلفة وعلى جميع الأجهزة. </li><li style=";text-align:right;direction:rtl">  اختبارات وحدة المطابقة 3: يتم اختبار كل عنصر وكل ميكانيكي على حدة وفي جميع مجموعات التفاعل. </li><li style=";text-align:right;direction:rtl">  مرور اللعبة بأكملها من البداية إلى النهاية. </li><li style=";text-align:right;direction:rtl">  اختبارات الانحدار المختلفة ، على سبيل المثال ، اختبارات التعريب ، أو فتح جميع نوافذ واجهة المستخدم بشكل صحيح ، أو تشغيل مشاهد fishdom في Fishdom دون أخطاء. </li><li style=";text-align:right;direction:rtl">  كل نفس ، ولكن مع <a href="https://en.wikipedia.org/wiki/AddressSanitizer">AddressSanitizer</a> . </li><li style=";text-align:right;direction:rtl">  اختبارات التوافق لإصدارات الألعاب: خذ المستخدم بحفظ الملف من الإصدارات السابقة ، وافتحه في الإصدار الجديد وتأكد من أن كل شيء على ما يرام. </li><li style=";text-align:right;direction:rtl">  اختبارات مخصصة مختلفة تتعلق ميكانيكي مشروع معين. </li></ul><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c7a/24e/992/c7a24e992e95338aa4e884f367168b9e.png" width="500"></div><br>  لتشغيل الاختبارات ، نستخدم منصة الاختبار الخاصة بنا التي تعمل بنظام ios وأجهزة Android.  هذا يتيح لنا تشغيل التطبيقات التي نحتاجها بمرونة على الأجهزة ، والتفاعل مع الجهاز من خلال الكود.  لدينا سيطرة كاملة ، ومستوى موثوق من الموثوقية ، ونعرف ما هي المشاكل التي قد نواجهها والوقت الذي سوف يستغرقه حلها.  لا تقدم أي من الخدمات السحابية التي توفر أجهزة الاختبار هذه الراحة. <br><br><h2 style=";text-align:right;direction:rtl">  CATS </h2><br>  يتم تنفيذ الاختبارات المذكورة أعلاه داخل رمز المشروع.  يسمح هذا نظريًا بإجراء أي اختبار لأي تعقيد ، ولكنه يتطلب جهدًا وموارد من تطوير المشروع لتنفيذ هذه الاختبارات ودعمها.  غالبًا ما تكون هذه الموارد غير متوفرة ، ويعد اختبار الانحدار المتعدد يدويًا صعبًا وغير ضروري.  أردت حقًا أن يقوم المختبرون أنفسهم بأتمتة الاختبار.  وقد توصلنا إلى إطار عمل خاص بهم - نظام اختبار أتمتة مستمر ، أو CATS. <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9f1/40d/aab/9f140daab4981b2700a9e40358ceb51e.png" width="500"></div><br>  ما هي الفكرة: لتمكين مؤلفي البرامج النصية للاختبار من التفاعل مع تطبيق الألعاب ، ولا يهتمون مطلقًا بكيفية عمل كل شيء.  نكتب البرامج النصية في بيثون البدائية ، ونحن الوصول إلى التطبيق من خلال مجموعة من التجريدات.  على سبيل المثال: "Homescapes ، افتح لي نافذة تسوق واشتري مثل هذا المنتج وكذا".  تحقق النتيجة ، البنغو. <br><br>  يتم إخفاء تنفيذ أوامر البرنامج النصي بالكامل وراء مجموعة من التجريدات.  تتيح لك واجهة برمجة التطبيقات التي تنفذ التفاعل مع التطبيق القيام بأي إجراء بعدة طرق: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  إرسال طلب http إلى الخادم ، والذي تم تضمينه في محرك اللعبة ، مع وجود نوع من الأوامر.  تتم معالجة هذا الأمر بواسطة رمز اللعبة.  عادة ما يكون هذا نوعًا من الغش ، فقد يكون بسيطًا أو معقدًا بشكل تعسفي.  على سبيل المثال ، "أعطني إحداثيات مركز الزر مع المعرف المحدد."  أو "اجتياز اللعبة من هنا إلى المستوى مع الرقم المشار إليه." </li><li style=";text-align:right;direction:rtl">  يمكننا فتح نافذة من خلال الغش أو معرفة إحداثيات الزر الذي تفتح من خلاله هذه النافذة ، يمكننا محاكاة النقر على هذا الزر ، يمكننا إجراء نقرة افتراضية عليه. </li><li style=";text-align:right;direction:rtl">  أخيرًا ، يمكننا إجراء نقرة "حقيقية" على الإحداثيات المحددة كما لو كانت قد تمت بإصبع على الشاشة. </li></ul><br>  الطريقة الأخيرة تفتح المجال لخيال المختبرين الذين يرغبون غالبًا في اختبار بنيات "قتالية" ، حيث لا توجد غش.  الحفاظ على مثل هذه السيناريوهات أكثر صعوبة ، ولكن "الإنشاء القتالي" هو بناء "قتالي". <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e25/0de/9ce/e250de9ce8a6e45d5ecfc8495eec7cb2.png"></div><br>  اتضح أنه مناسب جدًا للعمل مع إحداثيات مركز الزر: تتغير الإحداثيات أحيانًا ، لكن معرفات الأزرار نادرة.  أدى ذلك إلى خاصية مهمة أخرى للنظام: القدرة على كتابة نص اختبار واحد لجميع المنصات وجميع دقة الشاشة. <br><br><h2 style=";text-align:right;direction:rtl">  التسليم والتقارير والآثار </h2><br>  مع التسليم ، تبين أن كل شيء بسيط للغاية: نستخدم تخزينًا مشتركًا واحدًا لتصنيع القطع الأثرية والتخزين في نظام التوزيع.  يأتي "التحميل" الخاص بالبناء لاستدعاء زوج من الطلبات إلى واجهة برمجة التطبيقات لتوزيع البناء ، ويتم تسجيله بشكل أساسي.  وبهذه الطريقة ، وفرنا القليل من الوقت في ضخ بنيات والمال لتخزينها. <br><br>  تذكر ، هل تحدثت عن تقليل الموارد اللازمة لإصلاح الأخطاء الموجودة في البنيات؟  التقارير والمسارات - فقط عن هذا: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  الإبلاغ عن مشكلة موجودة هي مهمة في Asana.  من السهل التحكم فيه ، وتخصيصه للمطور المناسب ، ونقله إلى فريق CI إذا حدث خطأ ما في البنية التحتية. </li><li style=";text-align:right;direction:rtl">  نجمع يبني لكل التزام.  نحن نعرف مؤلف هذا الالتزام ، لذلك فقط هو سيرى هذه المهمة.  لذا فنحن نوفر الوقت للمطورين الآخرين: لا يحتاجون إلى أن يصرف انتباههم المشكلات التي لا علاقة لهم بها ويساعدون في حلها ، على الأرجح ، لن يكونوا قادرين على ذلك. </li><li style=";text-align:right;direction:rtl">  إذا كنت تبني بنية من الالتزام التالي ، فمن المرجح أنها لا تزال مقطوعة.  سيكون هناك تعليق في المهمة: "البنية لا تزال مقطوعة" ، ولن يرى مؤلف الالتزام الجديد المهمة ولن يضيع الوقت في مشكلة شخص آخر. </li><li style=";text-align:right;direction:rtl">  نرسل التقارير إلى سلاك.  بالضرورة - شخصيًا للشخص الذي "كسر" البنية ، وإذا كان المشروع يريد ذلك - لقناة خاصة أو لأي موظف في Playrix.  كل شيء مرن قدر الإمكان. </li></ul><br>  هناك حاجة إلى تتبعات حتى تتوفر في كل مكان معلومات كاملة عن البنية والتغييرات التي تم جمعها منها.  من أجل عدم البحث عن أي شيء ، بحيث كان كل شيء في متناول اليد وليس هناك حاجة لقضاء بعض الوقت في البحث عن التفاصيل التي غالبا ما تكون ضرورية عند البحث عن مشكلة. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يحتوي التقرير على ارتباط إلى الإنشاء ، وسجل الإنشاء ، ونص خطأ التحويل البرمجي الموجود ، وأسماء الاختبارات المقلوبة.  غالبًا ما يمكن للمبرمج ، بعد تلقي مهمة تقرير ، تصحيح الخطأ على الفور: اسم الملف والخط ونص الخطأ موجودان في التقرير. </li><li style=";text-align:right;direction:rtl">  تحتوي الرسالة الموجودة في Slack على رابط + للمهمة في Asana. </li><li style=";text-align:right;direction:rtl">  في Teamcity ، رابط للمهمة.  بناء المهندس يمكن أن تذهب على الفور في المهمة ، في نقرة واحدة ، لا تحتاج للبحث عن أي شيء. </li><li style=";text-align:right;direction:rtl">  في github - الحالة مع رابط للبناء ، في التعليق على الالتزام - رابط للمهمة التي تم إنشاء هذا البناء لها.  في المهمة - تعليق مع وصلة إلى الالتزام. </li><li style=";text-align:right;direction:rtl">  في خدمة توزيع البناء: رابط البناء ، رابط الالتزام. </li></ul><br>  لا يوجد شيء يمكن تذكره ، لكنك فهمت الفكرة: روابط إلى كل شيء ، في كل مكان.  هذا يسرع إلى حد كبير دراسة أي موقف غير مفهوم. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/94d/4dc/1a0/94d4dc1a015d9f068e9c5dce0461b17a.png"></div><h2 style=";text-align:right;direction:rtl">  FARM </h2><br>  نقوم بجمع واختبار البنيات لجميع المنصات.  لهذا نحن بحاجة إلى الكثير من العوامل المختلفة.  تتبعها وصيانتها يدويًا طويل وصعب.  يتم تحضير جميع الوكلاء تلقائيًا.  نستخدم باكر و Ansible. <br><br>  جميع سجلات جميع الوكلاء ، Teamcity ، جميع الخدمات الموجودة ، نوفر (في حالتنا - في ELK).  تضيف جميع الخدمات ، التي تقوم بمعالجة بناء ، عدد هذه البنية إلى كل سطر من السجلات.  يمكننا أن نرى في طلب واحد دورة حياة المبنى بأكملها من مظهرها في قائمة الانتظار إلى نهاية إرسال جميع التقارير. <br><br>  قمنا بتطبيق آلية تحسين قائمة الانتظار الخاصة بنا.  واحد في Teamcity لا يعمل بشكل جيد للغاية على أعدادنا.  الحديث عن الأرقام: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  نحن نجمع حوالي 5000 يبني كل يوم.  هذا حوالي 500 ساعة من العمل. </li><li style=";text-align:right;direction:rtl">  وكان بناء ثلاثة ملايين قبل شهر. </li><li style=";text-align:right;direction:rtl">  لدينا 50+ خوادم بناء في 10 مواقع مختلفة. </li><li style=";text-align:right;direction:rtl">  40+ الأجهزة المحمولة على مقاعد البدلاء اختبار. </li><li style=";text-align:right;direction:rtl">  بالضبط 1 خادم Teamcity. </li></ul><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5e8/4eb/797/5e84eb79776709b09b73921f78cbb41a.png" width="500"></div><br><h2 style=";text-align:right;direction:rtl">  CI كخدمة </h2><br>  Playrix CI هي خدمة.  هناك العديد من المشاريع ، العديد من الأفكار أيضا. <br><br>  نعمل على تحسين الوقت من إدخال الإنشاء في قائمة الانتظار حتى نهاية تنفيذه ، لأن هذا هو بالضبط "وقت البناء" الذي يعتبره مستخدم الخدمة ، المطور.  يسمح لنا ذلك بالبحث والعثور على توازن بين وقت البناء والوقت الذي يقضيه في قائمة الانتظار.  يبدو من المنطقي أنه مع نمو الشركة وعدد المشاريع ، ستنمو مزرعة البناء التي تجمع هذه المشاريع.  ولكن بفضل التحسينات ، فإن معدل نمو المزرعة هو أبعد بكثير عن معدل نمو الشركة. <br><br>  يبدأ أي تحسين بمراقبة ، مع مجموعة منهجية من الإحصاءات.  نحن نجمع الكثير من الإحصاءات ونعرف تمامًا كل شيء عن تصميماتنا.  ولكن إلى جانب حجم مزرعة الإنشاءات ، هناك أيضًا فريق يدعم نظام CI ويجعله لا يحتاج أي شخص إلى التفكير في مصدره. <br><br>  يعد تحسين العملية في هذا الفريق أيضًا عملية مثيرة ومسلية.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">على سبيل المثال ، نكتب اختبارات لتعيين تكوينات للبنيات ، لأن هناك العديد من هذه التكوينات ، وبدون اختبارات مماثلة ، ليس من السهل العثور على جميع الأماكن التي تحتاج إلى تحرير. </font><font style="vertical-align: inherit;">بالنسبة لأي تغييرات تقريبًا ، نكتب أولاً اختبارًا ، ثم نجريها ، أي في الواقع ، لدينا TDD. </font><font style="vertical-align: inherit;">هناك العديد من العمليات المتعلقة بالواجب ، وإدارة الحوادث ، وجدولة تدفق المهام القادمة. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يجب أن يركز المطورون على إنشاء ألعاب رائعة وناجحة دون الحاجة إلى القلق بشأن مصدرها. </font><font style="vertical-align: inherit;">لهذا ، Playrix لديه CI. </font><font style="vertical-align: inherit;">يجب أن يكون هناك هدف تريد تحقيقه من خلال التكامل المستمر ، وهي مشكلة تحتاج إلى حل. </font><font style="vertical-align: inherit;">من المهم عدم الخروج بمشكلة ، أي العثور عليها. </font><font style="vertical-align: inherit;">وعندما تجدها ، تذكر تجربتنا وقم بعمل أفضل. </font><font style="vertical-align: inherit;">وتذكر: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CI لا تنام أبدا </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">أراك!</font></font><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/796/1f2/f01/7961f2f01ed13cee81c7ea0e604e7ace.png" width="500"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar479966/">https://habr.com/ru/post/ar479966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar479950/index.html">تاريخ معالجات الفيديو ، الجزء 4: ظهور GPU للأغراض العامة</a></li>
<li><a href="../ar479952/index.html">ما بداخل الشاورما: الخدمات الدقيقة والأنظمة الموزعة وكافكا. مشاركة المواد من Backend United # 5</a></li>
<li><a href="../ar479954/index.html">ربيع التمهيد البرنامج التعليمي الادارية</a></li>
<li><a href="../ar479958/index.html">البرامج الثابتة ومعالج نقاط الضعف</a></li>
<li><a href="../ar479960/index.html">نموذج أداء الإعلان الإعلامي للمتاجر عبر الإنترنت</a></li>
<li><a href="../ar479968/index.html">يتم البحث عن مكتب Nginx بسبب دعوى Rambler Group. وأكدت الخدمة الصحفية المقدمة من صاحب الشكوى الدعوى</a></li>
<li><a href="../ar479970/index.html">ألف وواحد أخطاء واجهة المستخدم ، أو كيفية مساعدة مطور تجنب الأخطاء الشائعة واجهة المستخدم</a></li>
<li><a href="../ar479974/index.html">هجمات النقر الصفري: عندما يكون أمانك غير متروك لك</a></li>
<li><a href="../ar479978/index.html">كما هو الحال بدون ألم ، وبدون كلمة التحقق مجانًا ، يمكنك إحضار مقتطفات من صندوق ملكية الدولة الفيدرالية التابع لسجل الدولة الموحد لحقوق الإنسان إلى نموذج قابل للقراءة من قبل الإنسان (*)</a></li>
<li><a href="../ar479982/index.html">Vidos والحشرات</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>