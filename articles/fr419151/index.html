<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶î üéè üè• Maison intelligente: une nouvelle dimension de confort et la recherche de l'excellence. Deuxi√®me partie ‚õÖÔ∏è üë©üèæ‚Äçüéì üö®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la premi√®re partie, j'ai parl√© de la transition de simples syst√®mes de surveillance √† une maison intelligente elle-m√™me. √Ä ce stade, une compr√©he...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Maison intelligente: une nouvelle dimension de confort et la recherche de l'excellence. Deuxi√®me partie</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/419151/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dans la premi√®re partie,</a> j'ai parl√© de la transition de simples syst√®mes de surveillance √† une maison intelligente elle-m√™me.  √Ä ce stade, une compr√©hension de l'√©norme potentiel d'am√©lioration du confort est venue et les capacit√©s de la technologie s√©lectionn√©e ont enthousiasm√© le d√©veloppement et l'int√©gration de nouveaux composants. <br><br><img src="https://habrastorage.org/webt/hy/yv/pf/hyyvpfrqg1tx-jp1b5zpbtyzag8.jpeg"><br><a name="habracut"></a><br>  Consid√©rez plus en d√©tail l'aspect de "l'excitation".  Apr√®s les √©tapes franchies, la maison intelligente est devenue difficile √† arr√™ter dans le d√©veloppement.  Apr√®s les appareils WiFi USR IOT, le tour du microcontr√¥leur ESP8266, ador√© par DIY-chic, est arriv√©.  J'ai utilis√© les versions ESP8266-12 avec les ports LoLin v3 NodeMCU et Wemos D1 mini USB.  Commencez par mettre en surbrillance l'image qui a d√©j√† √©t√© mentionn√©e ci-dessus.  Les esquisses pour ESP8266 sont d√©velopp√©es de mani√®re pratique dans l'IDE Arduino apr√®s avoir connect√© le plug-in appropri√©.  Vous y trouverez de nombreux exemples qui rendent le d√©veloppement tr√®s simple m√™me sans pr√©paration.  Par cons√©quent, au fait, lister les spreads n'a pas beaucoup de sens. <br><br>  <i>Sur la photo, LoLin v3 NodeMCU avec ESP8266-12.</i>  <i>Connecteur - micro USB.</i> <br><img src="https://habrastorage.org/webt/6d/gy/9y/6dgy9y-oaxk8jdbqef4jch2z6iq.jpeg" align="left">  Il est seulement important de convenir d'un protocole pour interagir avec openHAB.  Je n'ai pas utilis√© MQTT, mais j'ai fait l'int√©gration directement, car cela est plus coh√©rent avec le mod√®le de gestion centralis√©e s√©lectionn√©. <img src="https://habrastorage.org/webt/sd/xl/bu/sdxlbuwmwlsnbmvfmwg8ycvjy8e.jpeg" align="right">  Sur le contr√¥leur avec ESP8266, le serveur le plus simple se l√®ve, qui re√ßoit la demande, l‚Äôanalyse et ex√©cute la commande extraite.  La demande est envoy√©e √† openHAB ("manuellement" ou en cons√©quence de la r√®gle) √† l'aide de l'utilitaire curl.  Le contr√¥leur envoie la confirmation de la r√©ception de la commande, la valeur des param√®tres mesur√©s, l'√©tat des appareils ex√©cutifs connect√©s via le r√©seau local √† openHAB via son API REST.  Au total, au moment de la r√©daction, selon des sch√©mas similaires dans une maison intelligente, 4 contr√¥leurs bas√©s sur ESP8266 et un sur Arduino avec un module Ethernet connect√© sont int√©gr√©s.  Permettez-moi de vous rappeler que tout cela est fait non seulement pour pouvoir allumer ou √©teindre quelque chose √† partir de votre smartphone, mais, tout d'abord, pour que les appareils s'allument automatiquement lorsque les conditions le permettent. <br><br>  <i>Sur la photo, un interrupteur Legrand conventionnel, automatis√© avec le Wemos D1 Mini.</i>  <i>Tous les composants tiennent dans une bo√Æte standard pour une installation ext√©rieure.</i>  <i>En m√™me temps, il mesure la temp√©rature / humidit√© (capteur ci-dessous) et l'√©clairage (pour l'avenir).</i> <br><br>  Par exemple, l'√©clairage d'une image n'est activ√© qu'une fois par jour lorsque la maison est d√©sarm√©e et lorsque le niveau d'√©clairage est inf√©rieur √† un certain niveau et lorsque l'heure est proche de l'heure du coucher du soleil.  De plus, certains appareils, par exemple les r√©verb√®res, n'ont pas du tout d'interrupteurs physiques et sont principalement utilis√©s en mode automatique. <br><br>  Tous ceux qui sont all√©s √† l'Ob ou √† Leroy Merlin doivent avoir vu des ensembles de prises t√©l√©command√©es ou m√™me des ensembles de d√©marrage avec le grand nom de ¬´maison intelligente¬ª.  La plupart combinent une communication 433 MHz et cette communication est √† sens unique.  C'est-√†-dire  en envoyant une commande, il est impossible de savoir si elle est re√ßue par l'actionneur ou non.  Compense cet inconv√©nient √† faible co√ªt.  Par exemple, vous pouvez acheter des prises contr√¥l√©es et un coupe-batterie plat pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">1300</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">1400</a> roubles. <img src="https://habrastorage.org/webt/mi/dk/oh/midkohmwgow3r67kg5ixjkrvk6a.jpeg" align="left">  De tels sch√©mas sont pratiques √† utiliser pour l'√©clairage avec un fil s√©par√©, pour se d√©placer ou appara√Ætre au fur et √† mesure que l'id√©e de conception se d√©veloppe.  Mes appliques sont devenues de tels √©l√©ments, refaites d'un chandelier antique et d'un petit lampadaire.  Les deux dans la chambre.  Et l'interrupteur est id√©alement situ√© sur la table de chevet.  Pourquoi une si longue introduction?  Cela n'a aucun sens d'abandonner les appareils qui rendent la vie plus confortable et plus compl√®te, simplement parce qu'ils ne sont pas pris en charge par le syst√®me de maison intelligente install√©.  Il est facile de se lancer dans cette situation en misant sur un seul fournisseur ou une seule technologie. <br><br>  <i>Sur la photo, un ensemble de prises contr√¥l√©es et un interrupteur Brenin.</i>  <i>433 MHz.</i> <br><br>  Mais nous avons une maison intelligente ind√©pendante de la technologie!  Par cons√©quent, nous recherchons audacieusement un dispositif concentrateur pour tous les composants 433 MHz.  Ces hubs sont, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Broadlink</a> .  Cependant, leur inconv√©nient majeur est le contr√¥le indirect, le hub doit √™tre connect√© au cloud.  Comme vous vous en souvenez de l'article pr√©c√©dent, je pense que cette approche est fausse, bien que simple et pratique.  En cons√©quence, la recherche se termine par la d√©cision de cr√©er un hub simplifi√© sur l'Arduino.  En tant que p√©riph√©rique, nous connectons un r√©cepteur et un √©metteur √† 433 MHz √† l'Arduino.  Ensuite, √† l'aide d'un croquis sp√©cial, nous √©coutons le code envoy√© par l'√©metteur dans le commutateur Brenin et apprenons √† le transmettre nous-m√™mes.  Tous les croquis sont enti√®rement bas√©s sur des exemples de biblioth√®ques et ne posent pas de probl√®mes.  De plus, le code du signal de commande peut √™tre repr√©sent√© comme une constante dans openHAB et, si vous le souhaitez, augmenter le nombre d'actionneurs. <br><br><img src="https://habrastorage.org/webt/ca/sn/vz/casnvzcfsiibttvtqa1mbji55py.jpeg" align="right">  <i>Hub maison pour appareils 433MHz.</i>  <i>Au fil du temps, la d√©tection de mouvement et le contr√¥le de la lumi√®re dans la chaufferie y ont √©t√© ajout√©s.</i>  <i>Et le contr√¥le de la climatisation (LED IR sur le couvercle).</i>  <i>De plus, pour augmenter la stabilit√©, l'√©change de donn√©es avec openHAB a √©t√© transf√©r√© du nRF24L01 + vers une carte Ethernet ENC82J60, un fil LAN est visible.</i> <br><br>  Que s'est-il pass√©?  Il s'est av√©r√© que l'√©clairage contr√¥l√© par le kit sans fil dans la pi√®ce.  De plus, il est devenu possible de contr√¥ler cet √©clairage depuis une maison intelligente.  Comme vous vous en souvenez, le probl√®me avec de tels syst√®mes est le manque de r√©troaction.  Il est partiellement r√©solu dans ce cas en raison du fait que les commandes transmises au disjoncteur 433 MHz peuvent √™tre intercept√©es par le concentrateur d√©velopp√© et envoy√©es √† l'openHAB dans lequel la r√®gle fonctionne et modifie l'√©tat du disjoncteur dans l'interface.  C'est-√†-dire  Le r√©sultat a √©t√© un syst√®me de pseudo-r√©troaction.  C'est mieux que rien.  Et bien s√ªr, il est clair que cette approche ne convient pas √† la gestion des appareils critiques.  Ce n'est pas fiable et dangereux en termes d'interception. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f8/mu/av/f8muavvft8ct9flkw4ttr8ytzao.png"></div><br>  <i>Un √©l√©ment de design qui est apparu au fil du temps, une applique.</i>  <i>Contr√¥l√© par une prise et un interrupteur Brenin</i> <br><br>  Encore plus.  Je voulais faire de beaux interrupteurs au deuxi√®me √©tage.  Et bien s√ªr, contr√¥l√© √† distance.  Le choix s'est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">port√©</a> sur les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">interrupteurs</a> tactiles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Livolo</a> .  Ils sont √©galement √† 433 MHz et, surtout, peuvent se connecter ¬´sans z√©ro¬ª.  Cela est vrai si le z√©ro et la phase ne sont pas connect√©s √† la prise et que l'interrupteur est en circuit ouvert de l'alimentation du lustre.  Bien que ce ne soit pas mon cas, de telles conditions d'entr√©e m√©ritent d'√™tre prises en consid√©ration.  En cons√©quence, de beaux commutateurs sont apparus dans la maison, connect√©s √† la maison intelligente √† l'aide d'un concentrateur d√©velopp√© pr√©c√©demment. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sw/nx/jr/swnxjroitfoeq5a5bhdatpje-nw.jpeg"></div><br>  <i>Ensemble de deux interrupteurs tactiles et une t√©l√©commande Livolo.</i> <br><br>  Cependant, il existe deux ¬´mais¬ª.  Le premier.  Les disjoncteurs Livolo sont vraiment d√©pourvus de r√©troaction, ils ne transmettent rien.  C'est-√†-dire  si vous les allumez √† l'ancienne avec votre doigt, la maison intelligente ne verra pas le changement d'√©tat.  Bien s√ªr, cela n'est pas un obstacle pour le bricoleur, mais j'ai d√©cid√© de ne pas cl√¥turer le jardin de capteurs d'inclusion suppl√©mentaires et de ne pas int√©grer d'autres appareils Livolo similaires.  Le deuxi√®me.  Il n'a pas √©t√© possible de d√©chiffrer les signaux de commande de la t√©l√©commande Livolo, achet√©e compl√®te avec interrupteurs, avec une biblioth√®que standard; j'ai d√ª chercher des biblioth√®ques d√©velopp√©es par des passionn√©s sp√©cifiquement pour les interrupteurs Livolo. <br><br>  Je veux terminer la conversation sur l'int√©gration de nouveaux composants exactement l√† o√π nous avons commenc√© dans l'article pr√©c√©dent: avec Z-Wave. <img src="https://habrastorage.org/webt/3d/qb/z0/3dqbz0fpnvaekdsen_fp30t_wgo.jpeg" align="left">  Peu importe le prix des appareils Z-Wave, leur gamme s'√©largit progressivement et il existe des actionneurs qui n'ont pas de sens par eux-m√™mes ou qui, pour une raison quelconque, n'ont pas de technologies concurrentes.  L'exemple le plus frappant est les t√™tes thermostatiques contr√¥l√©es pour les radiateurs de chauffage.  Sans fil  Un autre exemple est les relais et gradateurs compacts dans les bo√Ætiers de prises pour transformer les interrupteurs existants en interrupteurs intelligents sans changer la conception.  De plus, avec un retour d'information  avec un contr√¥le m√©canique pr√©serv√©, la maison intelligente pourra voir l'√©tat des interrupteurs. <br>  <i>Sur la photo, la t√™te thermostatique Z-Wave Grundfos sur le radiateur dans le couloir.</i> <br><br>  Comment fonctionne l'int√©gration?  OpenHAB a une liaison correspondante pour connecter une cl√© USB Z-Wave.  De plus, openHAB est livr√© avec une application HABmin sp√©ciale pour configurer le r√©seau des appareils Z-Wave.  Alors, connectez la cl√© USB <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Z-Wave.Me</a> , d√©finissez la liaison Z-Wave, ex√©cutez HABmin, ajoutez des p√©riph√©riques au r√©seau.  Ensuite, nous configurons les √©l√©ments correspondants selon la documentation pour la liaison, √©crivons les r√®gles pour les commutateurs, les t√™tes thermiques, les multi-capteurs et le tour est jou√©.  Il semble que tout soit simple.  Cependant, cela ne s'est produit que partiellement.  Le probl√®me est que HABmin ne fonctionne qu'avec des p√©riph√©riques enregistr√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans une base de donn√©es ouverte</a> .  Si vous avez achet√© un nouvel appareil ou une modification d'un ancien qui ne figure pas dans la base de donn√©es, vous ne pourrez pas configurer un tel appareil. <img src="https://habrastorage.org/webt/zm/vf/qq/zmvfqqmdnohuze6w20enx-ajbws.jpeg" align="right">  Vous pouvez faire une demande d'extraction dans cette base de donn√©es, cependant, j'ai consid√©r√© que cette approche √©tait fondamentalement erron√©e, car les appareils Z-Wave ont une fonction d'auto-d√©couverte.  C'est l'une des raisons de la haute compatibilit√© des appareils et contr√¥leurs de diff√©rents fabricants de Z-Wave.  En cons√©quence, j'ai d√ª acheter une licence pour le contr√¥leur logiciel Z-Wave, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">serveur Z-Way</a> , que j'ai install√© sur le m√™me serveur / nettop que openHAB.  Il est utilis√© uniquement lorsque vous devez ajouter / supprimer un appareil au r√©seau Z-Wave et / ou le configurer.  Le reste du temps, le contr√¥leur logiciel est √©teint. <br><br>  <i>Sur la photo - interrupteurs Legrand ordinaires.</i>  <i>Automatis√© √† l'aide de micromodules Z-Wave dans les rosettes.</i>  <i>Celui du bas est devenu un gradateur.</i> <br><br>  En cons√©quence, j'ai obtenu des t√™tes thermiques sur des radiateurs, un gradateur et des interrupteurs dans la prise, des prises contr√¥l√©es qui mesurent la tension et la puissance, et m√™me un multi-capteur (mouvement, temp√©rature, √©clairage).  Il est √† noter que je n'ai pas mis en place d'associations au niveau Z-Wave, car j'ai toujours un mod√®le de contr√¥le centralis√©.  Autrement dit, malgr√© la possibilit√© de contr√¥le direct de p√©riph√©rique-p√©riph√©rique, tous sont contr√¥l√©s de mani√®re centralis√©e depuis openHAB √† l'aide de r√®gles.  Eh bien, ou en plus m√©caniquement, comme c'est le cas avec les interrupteurs dans la prise. <br><br>  <b>Que s'est-il pass√© en termes de maison intelligente:</b> <br><br><ol><li>  Contr√¥le automatis√© de la lumi√®re. </li><li>  Contr√¥l√© par les escaliers du deuxi√®me √©tage.  Selon l'√©tat de protection, soit un ensemble de r√®gles alarmantes est d√©clench√©, soit la lumi√®re du rez-de-chauss√©e est allum√©e pour faciliter la descente des escaliers la nuit.  Puisqu'un multi-capteur est utilis√©, la temp√©rature de l'air est √©galement mesur√©e. </li><li>  Contr√¥le automatis√© de plusieurs radiateurs de chauffage.  Lors de l'armement, ils passent √† la basse temp√©rature d√©finie dans les param√®tres pour √©conomiser l'√©nergie en raison d'une distribution plus rationnelle de la chaleur.  De plus, le contr√¥le de la temp√©rature nocturne dans la chambre a √©t√© fait - il diminue automatiquement de 1 degr√© pour un sommeil confortable.  Et bien s√ªr, la temp√©rature peut √™tre r√©gl√©e √† partir d'une maison intelligente. </li><li>  Contr√¥le automatis√© du s√®che-serviettes.  D√©sormais, il n'est plus n√©cessaire de l'activer / le d√©sactiver manuellement.  De plus, il peut √™tre activ√© √† distance, avant l'arriv√©e. </li></ol><br>  Il y a encore une chose.  Jusqu'√† pr√©sent, nous avons parl√© de l'int√©gration de composants physiques avec une maison intelligente.  Cependant, openHAB permet l'int√©gration avec les syst√®mes logiciels.  Par exemple, avec des DVR logiciels ou des cam√©ras IP.  Il ne s'agit pas seulement d'afficher des images dans l'interface openHAB, ce qui a bien s√ªr √©t√© fait, mais aussi de r√©agir aux √©v√©nements.  Par exemple, si l'enregistreur ou la cam√©ra est configur√© pour d√©tecter un mouvement, cet √©v√©nement peut √™tre envoy√© √† openHAB et utilis√© dans la gestion.  Dans la r√®gle ci-dessus d'allumer la lumi√®re la nuit lors de la descente des escaliers, la cam√©ra utilise la d√©tection de mouvement au premier √©tage (afin de ne pas s'allumer lorsque je monte les escaliers).  Autre exemple: en mode s√©curit√©, vous pouvez prendre des photos de l'intrus et envoyer la photo par courrier, et la violation peut √™tre d√©tect√©e avec un capteur de mouvement PIR conventionnel, ce qui est beaucoup plus efficace que la d√©tection de mouvement avec un appareil photo ou un DVR.  De plus, le capteur PIR peut √™tre connect√© √† une maison intelligente en utilisant une technologie arbitraire. <br><br><div class="spoiler">  <b class="spoiler_title">Un exemple d'un e-mail inqui√©tant avec une photo d'un intrus dans une maison d'h√¥tes.</b> <div class="spoiler_text">  Heureusement, l'intrus a quarante ans.  D√©tect√© par un capteur PIR. <br><br><img src="https://habrastorage.org/webt/yk/nn/je/yknnjecws_dpjgvmfds_unmd5mi.jpeg"><br></div></div><br>  L'int√©gration avec le centre multim√©dia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kodi</a> a √©galement √©t√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">effectu√©e</a> , pour cela il existe une liaison sp√©ciale.  Lorsque vous d√©marrez la vid√©o, la lumi√®re s'√©teint dans le salon, lorsqu'elle s'arr√™te, elle s'allume.  √âgalement fait, au cas o√π, le contr√¥le d'une maison intelligente par Kodi lui-m√™me.  Son utilisation est moins pratique que la t√©l√©commande Kore classique, mais il est possible de lancer Kodi √† partir de l'interface de la maison intelligente, ce que Kore ne sait pas comment faire. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2e/xe/zz/2exezzpreyb2y_wxtnjzzmlisoi.jpeg"></div><br>  <i>Page d'interface avec commande Kodi et bouton de d√©marrage.</i>  <i>Ci-dessus montre l'√©tat du lecteur, le nom de la chanson, le temps restant et la dur√©e.</i> <br><br><img src="https://habrastorage.org/webt/8a/1m/jg/8a1mjgdhurjmitlmcpda60jg7q4.jpeg" align="left">  Anticipant les questions sur l'utilisation du protocole MQTT, je rappelle qu'avec un mod√®le de gestion centralis√©e, des liens interm√©diaires entre le serveur et les p√©riph√©riques sont possibles, mais, bien s√ªr, r√©duisent la fiabilit√©.  Par cons√©quent, jusqu'√† pr√©sent, tous les liens d'int√©gration ont √©t√© directs, sans interm√©diaires.  Cependant, si nous parlons d'une √©ventuelle transition future ou transition partielle vers une gestion d√©centralis√©e, potentiellement plus extensible et plus tol√©rante aux pannes, le choix de MQTT est standard.  Il s'agit d'un transport courant pour les pairs d'un r√©seau local. <br><br>  <i>Contr√¥leur multifonctionnel bas√© sur le Raspberry Pi 3B.</i>  <i>Un capteur de temp√©rature et d'humidit√©, un capteur de mouvement, une cam√©ra, une prise contr√¥l√©e, un interrupteur devenu capteur sont visibles.</i> <br><br>  OpenHAB, bien s√ªr, a une liaison pour MQTT.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mosquitto</a> lui-m√™me est choisi comme serveur MQTT lui-m√™me.  Mais sur quoi l'installer est une question.  Si vous poursuivez explicitement ou explicitement l'objectif de d√©centralisation de la gestion, alors mettre Mosquitto sur un nettop, qui est d√©j√† devenu un point de d√©faillance unique, est faux.  Et ici, la logique suivante a fonctionn√©.  La seule salle non automatis√©e est un garage.  Il y a quelque chose √† faire: d√©tecter les mouvements, allumer la lumi√®re √† l'int√©rieur et √† l'ext√©rieur de la maison, ouvrir et surveiller l'√©tat des portes de garage, effectuer une vid√©osurveillance, contr√¥ler la prise pour l'√©quipement de jardin.  Et m√™me quelque chose d'autre qui ne peut √™tre fait que sur un syst√®me d'exploitation √† part enti√®re et qui concerne la s√©curit√© des informations.  En cons√©quence, le choix revient au Raspberry Pi.  Il a des broches pour connecter des p√©riph√©riques DIY standard et Linux √† part enti√®re avec un grand nombre d'applications port√©es.  Et le cam√©scope peut y √™tre connect√© et diffuser le flux sur le r√©seau.  Et, plus important encore, les ressources du syst√®me, contrairement √† Arduino, vous permettent de cr√©er une logique m√©tier de presque toute complexit√© raisonnable, en vous d√©barrassant de openHAB.  Et tout cela peut √™tre programm√© dans des langages de programmation familiers. <br><br>  En cons√©quence, toutes les t√¢ches ci-dessus ont √©t√© r√©solues, plus un serveur MQTT est apparu sur le r√©seau, √† travers lequel l'interaction avec openHAB est organis√©e et qui sera utilis√©e √† l'avenir lorsque de nouveaux appareils √† commande d√©centralis√©e appara√Ætront. <br><br><div class="spoiler">  <b class="spoiler_title">D√©tail int√©ressant</b> <div class="spoiler_text">  Au cours du processus de d√©veloppement, il est devenu n√©cessaire de mesurer des signaux analogiques (capteur de lumi√®re, capteur de courant, capteur de qualit√© de l'air).  De plus, une partie des p√©riph√©riques a refus√© de fonctionner sur le Raspberry Pi 3.3V standard, ils ont besoin de 5V.  Ces probl√®mes ont √©t√© r√©solus simplement et √† moindre co√ªt.  Les deux t√¢ches ont √©t√© g√©r√©es par l'Arduino Nano en option, connect√© aux fils du Raspberry Pi en utilisant le protocole I2C.  C'est-√†-dire  Arduino n'a toujours aucune logique, sauf la mesure des param√®tres physiques et l'ex√©cution des commandes.  Toute logique m√©tier sur Raspberry Pi et openHAB. <br></div></div><br>  Que s'est-il finalement pass√©, si vous d√©crivez en termes de mod√®le les caract√©ristiques de l'ensemble du syst√®me au moment de la r√©daction? <br><br>  <b>R√©sum√©:</b> <br><br><ul><li>  Nombre de capteurs de temp√©rature: 25. </li><li>  Nombre de points de contr√¥le de la lumi√®re: 37, y compris les commutateurs tandem, le gradateur et les points sans commutateurs m√©caniques. </li><li>  En plus de la lumi√®re, une pompe de puits, une pompe de recirculation d'eau chaude sanitaire, des robinets sur les branches de chauffage, une chaudi√®re, une chaudi√®re, des portes automatiques, des radiateurs de chauffage, etc. sont contr√¥l√©s.  Humidit√© mesur√©e, tension, courant, √©clairage, qualit√© de l'air, etc. </li></ul><br>  <b>Technologies utilis√©es:</b> <br><br><ul><li>  Logiciel central: openHAB avec liaisons, Xeoma, serveur Z-Way, TTS, serveur Mosquitto, Kodi, applications C / C ++ s√©par√©es.  OS - Ubuntu. </li><li>  Contr√¥leurs locaux: Arduino + nRF24L01 +, Arduino + ENC82J60, ESP8266-12, Raspberry Pi 3 B, logiciel √©crit en C ++. </li><li>  Appareils pr√™ts √† l'emploi: appareils WiFi USR IOT, Z-Wave (relais, prises, gradateur, capteur, t√™tes thermiques) de diff√©rents fabricants, 433 MHz (commutateurs avec t√©l√©commande Livolo, prises et commutateur Brenin), passerelle TCP-Modbus Schneider Electric, capteurs de mouvement, ouverture et autres </li></ul><br><div class="spoiler">  <b class="spoiler_title">Et ensuite?</b> <div class="spoiler_text">  L'√©tape suivante consiste √† √©teindre les radiateurs de chauffage lors de l'ouverture des fen√™tres au-dessus d'eux, √† contr√¥ler la qualit√© de l'air dans le salon avec une chemin√©e, une d√©tection de mouvement plus s√ªre dans le salon, etc.  Il y a des t√¢ches plus banales: lorsque la serre appara√Æt, automatisez l'arrosage en fonction de la temp√©rature et de l'humidit√© du sol. <br></div></div><br>  Au lieu d'une conclusion.  Nous n'avons pas encore pris en compte de nombreux aspects, par exemple la commande vocale, la synth√®se vocale, la commande infrarouge de la climatisation, etc.  Tout cela est fait et fonctionne.  Le but de cet article √©tait de montrer le cheminement de la pens√©e, de partager l'exp√©rience dans le choix des solutions, de montrer les avantages des normes et technologies ouvertes √† travers une description de la facilit√© d'int√©gration.  Tout ce qui a √©t√© fait pourrait √™tre fait diff√©remment, mieux ou moins bien, plus cher ou moins cher, plus fonctionnel ou plus fiable.  Vous vous habituez rapidement aux bonnes choses et apr√®s un certain temps, posez des questions aux membres de la famille comme: ¬´Tu ne peux pas faire √ßa depuis ton smartphone?¬ª  ou "pourquoi ce parterre de fleurs doit-il √™tre arros√© manuellement?"  forc√© d'avancer, √† la perfection inaccessible. <br><br>  Et je crois aussi aux possibilit√©s illimit√©es de l'Internet des objets.  Tout ce qui a √©t√© fait entre dans cette cat√©gorie, mais ce n'est qu'une petite partie.  Si, apr√®s avoir lu cet article, le nombre d'amateurs d'IoT augmente un peu, je consid√©rerai que ma t√¢che est enti√®rement termin√©e. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419151/">https://habr.com/ru/post/fr419151/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419141/index.html">Le phishing sexuel gagne du terrain aux √âtats-Unis</a></li>
<li><a href="../fr419143/index.html">Cr√©ation d'une machine d'arcade d'√©mulation. Partie 4</a></li>
<li><a href="../fr419145/index.html">Fintech Digest: la capitalisation d'Apple a d√©pass√© le billion de dollars, l'IA a aid√© eBay √† augmenter ses revenus de plusieurs milliards</a></li>
<li><a href="../fr419147/index.html">Cube √† 1000 dimensions: est-il possible de cr√©er un mod√®le informatique de la m√©moire humaine aujourd'hui?</a></li>
<li><a href="../fr419149/index.html">Guide de Mikrotik RoMON</a></li>
<li><a href="../fr419153/index.html">M√©morandum sur les droits de Cyborg</a></li>
<li><a href="../fr419155/index.html">Portage de JS vers Elbrus</a></li>
<li><a href="../fr419159/index.html">Code JS, chiffres romains, devinettes g√©om√©triques: comment chiffrer notre √¢ge</a></li>
<li><a href="../fr419161/index.html">Mod√©lisation de la surface de l'eau √† l'aide de FFT et du processeur NeuroMatrix DSP</a></li>
<li><a href="../fr419165/index.html">Nous envoyons des SMS "anonymes" de la console au num√©ro souhait√© en utilisant le service bytehand et C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>