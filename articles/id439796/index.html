<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐪 🤜 ⏪ Spring Boot 2: apa yang tidak mereka tulis dalam catatan rilis 🛌🏿 🍧 👨🏽‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ketika proyek berskala besar mengalami pembaruan berskala besar, semuanya tidak pernah sederhana: mau tidak mau ada nuansa yang tidak jelas (dengan ka...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Spring Boot 2: apa yang tidak mereka tulis dalam catatan rilis</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/439796/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/a4/e3/fc/a4e3fcwl22r0y3nlx8z-6pkhtny.jpeg"></div><br><br>  Ketika proyek berskala besar mengalami pembaruan berskala besar, semuanya tidak pernah sederhana: mau tidak mau ada nuansa yang tidak jelas (dengan kata lain, rake).  Dan kemudian, tidak peduli sebagus apa pun dokumentasi itu, hanya pengalaman - pengalaman Anda sendiri atau orang lain - yang akan membantu. <br><br>  Pada konferensi Joker 2018, saya berbicara tentang masalah apa yang saya temui ketika beralih ke Spring Boot 2 dan bagaimana mereka dipecahkan.  Dan sekarang khusus untuk Habr - versi teks dari laporan ini.  Untuk kenyamanan, pos memiliki rekaman video dan daftar isi: Anda tidak dapat membaca semuanya, tetapi langsung menuju ke masalah yang membuat Anda khawatir. <br><a name="habracut"></a><br><h2>  Daftar isi </h2><br><ul><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rekaman video</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Entri</a></b> </li><li>  <b>Menyapu waktu kompilasi</b> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Contoh masalah</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana menjadi</a> </li><li>  <b>Jenis-Konten.</b>  <b>Menentukan jenis respons HTTP</b> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Masalah</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana menjadi</a> </li><li>  <b>Penjadwalan.</b>  <b>Peluncuran terjadwal</b> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Masalah</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana menjadi</a> </li><li>  <b>Awan musim semi &amp; Co</b>  <b>Kompatibilitas perpustakaan</b> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Masalah</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bonus: penambahan case</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana menjadi</a> </li><li>  <b>Santai Mengikat.</b>  <b>Mengikat parameter fuzzy</b> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Masalah</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana menjadi</a> </li><li>  <b>Pengujian Unit.</b>  <b>Menjalankan tes di Mockito 2</b> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Masalah</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana menjadi</a> </li><li>  <b>Plugin Gradle.</b>  <b>Bangun proyek Spring Boot</b> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Masalah</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana menjadi</a> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lainnya</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kesimpulan</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ringkasan dan kesimpulan</a></b> </li></ul><br><br><a name="video"></a><iframe width="560" height="315" src="https://www.youtube.com/embed/8jNXZXdb3no" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="intro"></a>  Hari baik!  Saya ingin memberi tahu Anda tentang beberapa fitur (sebut saja garu) yang mungkin Anda temui saat memperbarui kerangka Boot Spring ke versi kedua dan operasi selanjutnya. <br><br>  Nama saya Vladimir Plizgá ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> ), saya bekerja untuk CFT, salah satu pengembang perangkat lunak terbesar dan tertua di Rusia.  Selama beberapa tahun terakhir, saya telah melakukan pengembangan backend di sana, bertanggung jawab atas pengembangan teknis bank kartu prabayar online.  Di proyek inilah saya menjadi penggagas dan pelaksana transisi dari arsitektur monolitik ke arsitektur layanan mikro (yang masih berlangsung).  Ya, karena sebagian besar pengetahuan yang saya putuskan untuk dibagikan kepada Anda telah terakumulasi pada contoh proyek khusus ini, saya akan memberi tahu Anda sedikit lebih banyak tentangnya. <br><br><h2>  Secara singkat tentang produk eksperimental </h2><br>  Ini adalah bank Internet yang melayani sendiri lebih dari dua lusin perusahaan mitra di seluruh Rusia: bank ini memberikan kemampuan kepada pelanggan akhir untuk mengelola uang mereka melalui layanan perbankan jarak jauh (aplikasi mobile, situs).  Salah satu mitra adalah Beeline dan kartu pembayarannya.  Ternyata Internet banking yang baik, dilihat dari peringkat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Markswebb Mobile Banking Rank</a> , di mana produk kami mengambil posisi yang baik untuk pemula. <br><br>  "Nyali" masih dalam masa transisi, jadi kami memiliki satu monolit, yang disebut inti, di mana sekitar 23 layanan mikro dibangun.  Di dalamnya, microservices Spring Cloud Netflix, Spring Integration, dan banyak lagi.  Dan pada Spring Boot 2, semua ini telah terbang sejak sekitar bulan Juli.  Dan tepat di tempat ini kita tinggal lebih detail.  Menerjemahkan proyek ini ke versi kedua, saya menemukan beberapa fitur yang ingin saya ceritakan. <br><br><h2>  Garis besar laporan </h2><br><img src="https://habrastorage.org/webt/rl/jd/zq/rljdzqye-_lbzjguklndonlyc-4.jpeg"><br><br>  Ada banyak area di mana fitur Spring Boot 2 muncul, kami akan mencoba untuk membahas semuanya.  Untuk melakukan ini dengan cepat, kita membutuhkan detektif atau penyelidik berpengalaman - seseorang yang akan menggali semua ini seolah-olah untuk kita.  Karena Holmes dan Watson sudah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">melakukan presentasi</a> di Joker, kami akan dibantu oleh spesialis lain, Letnan Colombo.  Silakan! <br><br><h2>  Boot musim semi / 2 </h2><br>  Pertama, beberapa kata tentang Spring Boot secara umum dan versi kedua pada khususnya.  Pertama, versi ini dirilis, dengan kata lain, bukan kemarin: pada 1 Maret 2018, sudah dalam Ketersediaan Umum.  Salah satu tujuan utama yang dikejar pengembang adalah untuk sepenuhnya mendukung Java 8 di tingkat sumber.  Yaitu, itu tidak dapat dikompilasi pada versi yang lebih kecil, meskipun runtime kompatibel.  Kerangka Spring dari versi kelima, yang dirilis sedikit lebih awal dari Spring Boot 2, diambil sebagai dasarnya, dan ini bukan satu-satunya ketergantungan.  Dia juga memiliki konsep seperti <a href="">BOM</a> (Bill Of Material) - ini adalah XML besar, yang mencantumkan semua (transitif untuk kita) semua dependensi pada semua jenis perpustakaan pihak ketiga, kerangka kerja tambahan, alat, dan banyak lagi. <br><br>  Dengan demikian, tidak semua efek khusus yang dibawa oleh Spring Boot kedua berasal dari dirinya sendiri atau dari ekosistem Spring.  Dua dokumen bagus telah ditulis untuk seluruh peternakan ini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Catatan Rilis</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Panduan Migrasi</a> .  Dokumen itu keren, Musim semi dalam pengertian ini umumnya dilakukan dengan baik.  Tetapi, untuk alasan yang jelas, adalah jauh dari mungkin untuk mencakup semuanya di sana: ada beberapa hal khusus, penyimpangan, dll. Yang tidak dapat atau tidak boleh dimasukkan di sana.  Kami akan berbicara tentang fitur tersebut. <br><br><a name="compile"></a><h2>  Waktu kompilasi.  API mengubah contoh </h2><br>  Mari kita mulai dengan menyapu lebih atau kurang sederhana dan jelas: ini adalah yang muncul dalam waktu kompilasi.  Artinya, sesuatu yang bahkan tidak akan memungkinkan Anda untuk mengkompilasi proyek jika Anda hanya mengubah angka 1 di skrip Boot menjadi 2. <br><br>  Sumber utama perubahan, yang menjadi dasar untuk pengeditan tersebut di Spring Boot, tentu saja adalah transisi Spring ke Java 8. Selain itu, tumpukan web Spring 5 dan Spring Boot 2 terpecah, secara relatif, menjadi dua.  Sekarang servlet, tradisional untuk kita, dan reaktif.  Selain itu, perlu untuk mempertimbangkan sejumlah kekurangan dari versi sebelumnya.  Perpustakaan pihak ketiga dimulai (dari luar Spring).  Jika Anda melihat Catatan Rilis, Anda tidak akan melihat jebakan dengan cepat dan, terus terang, ketika saya pertama kali membaca Catatan Rilis, saya merasa bahwa semuanya baik-baik saja di sana.  Dan bagi saya itu terlihat seperti ini: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/uJ2P16LXA94" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Tapi, seperti yang Anda duga, semuanya tidak begitu baik. <br><br>  <b>Kompilasi akan pecah (contoh 1):</b> <br><br><ul><li> <b>Mengapa</b> : kelas <code>WebMvcConfigurerAdapter</code> sudah tidak ada lagi; </li><li>  <b>Mengapa</b> : untuk mendukung chip Java 8 (metode default di antarmuka); </li><li>  <b>Apa yang harus dilakukan</b> : gunakan antarmuka <code>WebMvcConfigurer</code> . </li></ul><br>  Sebuah proyek mungkin tidak dapat mengkompilasi setidaknya karena fakta bahwa beberapa kelas tidak lagi ada.  Mengapa  Ya, karena di Jawa 8 tidak diperlukan.  Jika ini adalah adapter dengan implementasi metode primitif, maka tidak ada yang istimewa untuk dijelaskan, metode default menyelesaikan semua ini dengan sempurna.  Berikut ini adalah contoh dari kelas ini, jelas bahwa itu sudah cukup untuk menggunakan antarmuka itu sendiri, dan tidak ada adaptor yang diperlukan. <br><br>  <b>Kompilasi apa yang akan rusak (contoh 2):</b> <br><br><ul><li>  <b>Mengapa</b> : metode <code>PropertySourceLoader#load</code> mulai mengembalikan daftar sumber alih-alih satu; </li><li>  <b>Mengapa</b> : untuk mendukung sumber daya multi-dokumen, misalnya, YAML; </li><li>  <b>Apa yang harus dilakukan</b> : bungkus jawaban dalam <code>singletonList()</code> (saat diganti). </li></ul><br>  Contoh dari area yang sama sekali berbeda.  Beberapa metode bahkan telah mengubah tanda tangan.  Jika Anda pernah menggunakan metode load PropertySourceLoader, maka sekarang akan mengembalikan koleksi.  Dengan demikian, ini memungkinkan dukungan sumber daya multi-dokumen.  Misalnya, dalam YAML, melalui tiga tanda hubung, Anda dapat menentukan banyak dokumen dalam satu file.  Jika sekarang Anda perlu bekerja dengannya dari Jawa, perlu diingat bahwa ini harus dilakukan melalui koleksi. <br><br>  <b>Kompilasi apa yang akan rusak (contoh 3):</b> <br><br><ul><li>  <b>Mengapa</b> : beberapa kelas dari paket <code>org.springframework.boot.autoconfigure.web</code> telah <code>org.springframework.boot.autoconfigure.web</code> dari paket <code>.servlet</code> - <code>.servlet</code> dan <code>.reactive</code> ; </li><li>  <b>Why</b> : untuk mendukung jet stack setara dengan tradisional; </li><li>  <b>Apa yang harus dilakukan</b> : perbarui impor. </li></ul><br>  Bahkan lebih banyak perubahan telah diperkenalkan sehingga menumpuk.  Misalnya, apa yang dulunya ada dalam paket web yang sama kini telah dipecah menjadi dua paket dengan banyak kelas.  Ini adalah <code>.servlet</code> dan <code>.reactive</code> .  Mengapa ini dilakukan?  Karena jet stack tidak seharusnya menjadi penopang besar di atas servlet.  Itu perlu untuk melakukan ini sehingga mereka dapat mempertahankan siklus hidup mereka sendiri, berkembang ke arah mereka sendiri dan tidak saling mengganggu.  Apa yang harus dilakukan?  Cukup untuk mengubah impor: sebagian besar kelas ini tetap kompatibel di tingkat API.  Sebagian besar, tetapi tidak semua. <br><br>  <b>Kompilasi apa yang akan rusak (contoh 4):</b> <br><br><ul><li>  <b>Mengapa</b> : tanda tangan metode dari kelas <code>ErrorAttributes</code> telah <code>ErrorAttributes</code> : alih-alih <code>RequestAttributes</code> , <code>WebRequest(servlet)</code> dan <code>ServerRequest(reactive)</code> mulai digunakan; </li><li>  <b>Why</b> : untuk mendukung jet stack setara dengan tradisional; </li><li>  <b>Apa yang harus dilakukan</b> : ganti nama kelas dalam tanda tangan. </li></ul><br>  Misalnya, di kelas ErrorAttributes, sekarang, alih-alih RequestAttributes, dua kelas lain mulai digunakan dalam metode: ini adalah WebRequest dan ServerRequest.  Alasannya sama.  Dan apa yang harus dilakukan?  Jika Anda beralih dari Boot Musim Semi yang pertama ke yang kedua, maka Anda perlu mengubah RequestAttributes ke WebRequest.  Nah, jika Anda sudah menggunakan yang kedua, maka gunakan ServerRequest.  Tentunya, bukan? <br><br><a name="compile_solution"></a><h3>  Bagaimana menjadi </h3><br>  Ada beberapa contoh seperti itu, kami tidak akan memilah semuanya.  Apa yang harus dilakukan?  Pertama-tama, perlu dicermati Panduan Migrasi Spring Boot 2.0 untuk mengetahui perubahan yang terjadi pada Anda.  Misalnya, ia menyebutkan penggantian nama kelas yang sama sekali tidak jelas.  Namun, jika sesuatu telah berpisah dan rusak, perlu dipertimbangkan bahwa konsep "web" dibagi menjadi 2: "servlet" dan "reaktif".  Dengan orientasi di semua kelas dan paket, ini dapat membantu.  Selain itu, harus diingat bahwa tidak hanya kelas dan paket itu sendiri yang diganti namanya, tetapi juga seluruh dependensi dan artefak.  Karena ini, misalnya, terjadi dengan Spring Cloud. <br><br><hr><br><a name="contenttype"></a><h2>  Jenis-Konten.  Menentukan jenis respons HTTP </h2><br>  Cukup tentang hal-hal sederhana dari waktu kompilasi, semuanya jelas dan sederhana di sana.  Mari kita bicara tentang apa yang bisa terjadi pada saat runtime dan, karenanya, dapat menembak, bahkan jika Spring Boot 2 telah bekerja untuk Anda untuk waktu yang lama.  Mari kita bicara tentang definisi tipe konten. <br><br><img src="https://habrastorage.org/webt/03/a2/db/03a2dbs5_suz7osfukciaumo0-y.jpeg"><br><br>  Bukan rahasia lagi bahwa Spring dapat menulis aplikasi web, baik API laman dan REST, dan mereka dapat membuat konten dengan berbagai jenis, baik itu XML, JSON, atau yang lainnya.  Dan salah satu pesona yang sangat disukai Spring adalah Anda tidak perlu repot dengan definisi tipe yang diberikan dalam kode Anda.  Anda bisa berharap untuk sihir.  Sihir ini bekerja, secara relatif, dalam tiga cara yang berbeda: bergantung pada header Terima yang berasal dari klien, atau pada ekstensi file yang diminta, atau pada parameter khusus dalam URL, yang, tentu saja, juga dapat diarahkan. <br><br>  Pertimbangkan contoh sederhana ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kode sumber lengkap</a> ).  Selanjutnya saya akan menggunakan notasi dari Gradle, tetapi bahkan jika Anda adalah penggemar Maven, tidak akan sulit bagi Anda untuk memahami apa yang tertulis di sini: kami membangun aplikasi kecil pada Boot Musim Semi pertama dan hanya menggunakan satu web starter. <br><br>  Contoh (v1.x): <br><br><pre> <code class="java hljs">dependencies { ext { springBootVersion = <span class="hljs-string"><span class="hljs-string">'1.5.14.RELEASE'</span></span> } compile(<span class="hljs-string"><span class="hljs-string">"org.springframework.boot:spring-boot-starter-web:$springBootVersion"</span></span>) }</code> </pre><br>  Sebagai kode yang dapat dieksekusi, kami memiliki satu kelas tunggal di mana metode pengontrol dideklarasikan dengan segera. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@GetMapping</span></span>(value = <span class="hljs-string"><span class="hljs-string">"/download/{fileName: .+}"</span></span>, produces = {TEXT_HTML_VALUE, APPLICATION_JSON_VALUE, TEXT_PLAIN_VALUE}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ResponseEntity&lt;Resource&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">download</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@PathVariable String fileName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   ,  Content-Type }</span></span></code> </pre><br>  Dibutuhkan nama file tertentu sebagai input, yang seharusnya akan dibentuk dan diberikan.  Itu benar-benar membentuk isinya dalam salah satu dari tiga jenis yang ditunjukkan (menentukan ini dengan nama file), tetapi tidak menentukan jenis konten dengan cara apa pun - kami memiliki Spring, ia akan melakukan semuanya sendiri. <br><br><img src="https://habrastorage.org/webt/wa/nd/77/wand77z2iocxhhqbcr-bn6lvzxm.jpeg"><br><br>  Secara umum, Anda bahkan dapat mencoba melakukannya.  Memang, jika kami meminta dokumen yang sama dengan ekstensi yang berbeda, itu akan dikembalikan dengan tipe konten yang benar tergantung pada apa yang kami kembalikan: jika Anda ingin - json, jika Anda ingin - txt, jika Anda ingin - html.  Ini bekerja seperti dongeng. <br><br><h3>  Memperbarui ke v2.x </h3><br><pre> <code class="java hljs">dependencies { ext { springBootVersion = <span class="hljs-string"><span class="hljs-string">'2.0.4.RELEASE'</span></span> } compile(<span class="hljs-string"><span class="hljs-string">"org.springframework.boot:spring-boot-starter-web:$springBootVersion"</span></span>) }</code> </pre><br>  Saatnya untuk meningkatkan ke Boot Musim Semi kedua.  Kami hanya mengubah angka 1 menjadi 2. <br><br><img src="https://habrastorage.org/webt/rk/ki/dg/rkkidgg5r97wfxcfq_3djkria_u.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Spring MVC Path Matching Mengubah Perilaku Default</a> <br><br>  Tapi kami adalah insinyur, kami akan melihat Panduan Migrasi, dan tiba-tiba sesuatu dikatakan tentang itu.  Tapi itu menyebutkan semacam "pencocokan jalur suffix".  Ini tentang cara memetakan metode di Java dengan URL dengan benar.  Tapi ini bukan kasus kami, meski agak mirip. <br><br><img src="https://habrastorage.org/webt/cy/re/_f/cyre_fno26kbqiepmtpr0tewmrw.jpeg"><br><br>  Karena itu, kami mencetak skor, memeriksa, dan menggedor!  - tiba-tiba tidak berfungsi.  Untuk beberapa alasan, hanya teks / html mulai diberikan di mana-mana, dan jika Anda menggalinya, itu bukan hanya teks / html, tetapi hanya jenis pertama yang Anda tentukan dalam atribut menghasilkan pada penjelasan @GetMapping.  Kenapa begitu  Tampaknya, secara halus, tidak bisa dipahami. <br><br><img src="https://habrastorage.org/webt/xt/mj/50/xtmj50wpv1ossdx_6nqeakchwxc.jpeg"><br><br>  Dan di sini, tidak ada Catatan Rilis yang akan membantu, Anda harus membaca sumbernya. <br><br><h3>  ContentNegotiationManagerFactoryBean </h3><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ContentNegotiationManagerFactoryBean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ List&lt;ContentNegotiationStrategy&gt; strategies = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.strategies != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { strategies.addAll(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.strategies); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favorPathExtension) { PathExtensionContentNegotiationStrategy strategy; <span class="hljs-comment"><span class="hljs-comment">// …</span></span></code> </pre><br>  Di sana Anda dapat menemukan klasik dengan nama pendek singkat yang sangat dimengerti, yang menyebutkan bendera tertentu yang disebut "pertimbangkan ekstensi di jalan" (favorPathExtension).  Nilai dari flag ini "true" berhubungan dengan penerapan strategi tertentu dengan nama ringkas pendek yang dapat dimengerti, dari mana jelas bahwa itu hanya bertanggung jawab untuk menentukan tipe konten dengan ekstensi file.  Seperti yang Anda lihat, jika flag salah, maka strategi tidak akan berlaku. <br><br><img src="https://habrastorage.org/webt/qy/g3/ms/qyg3mscyw2mnlyqewltjefecwri.jpeg"><br><br>  Ya, mungkin, banyak yang memperhatikan bahwa di Spring, ternyata, ada semacam pedoman, sehingga namanya harus baik, setidaknya dua puluh karakter. <br><br><img src="https://habrastorage.org/webt/ef/j8/il/efj8ilxfvvc1_dtss-7-becc_m0.jpeg"><br><br>  Jika Anda menggali sedikit lebih dalam, Anda dapat menggali hanya fragmen seperti itu.  Dalam kerangka Spring itu sendiri, dan bukan dalam versi kelima, seperti yang mungkin diharapkan, tetapi sejak dahulu kala, flag ini secara default telah diatur ke "true".  Sementara di Spring Boot dan di versi kedua itu diblokir oleh yang lain, yang sekarang tersedia untuk kontrol dari pengaturan.  Yaitu, sekarang kita bisa menjauhkan mereka dari pengelolaan lingkungan, dan ini hanya dalam versi kedua.  Apakah anda merasa  Di sana dia sudah mengasumsikan arti "salah."  Artinya, mereka ingin, semacam, untuk melakukan yang terbaik, meletakkan bendera ini di pengaturan (dan ini hebat), tetapi nilai defaultnya beralih ke yang lain (ini tidak terlalu). <br><br>  Pengembang kerangka kerja adalah orang-orang juga, mereka juga cenderung melakukan kesalahan.  Apa yang harus dilakukan?  Jelas bahwa Anda perlu mengganti parameter dalam proyek Anda, dan semuanya akan baik-baik saja. <br><br>  Satu-satunya hal yang layak dilakukan berjaga-jaga, untuk membersihkan hati nurani Anda, adalah melihat ke dalam dokumentasi Boot Musim Semi hanya untuk menyebutkan bendera ini.  Dan di sana dia benar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">-</a> benar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">disebutkan</a> , tetapi hanya dalam konteks yang aneh: <br><blockquote>  Jika Anda <b>memahami peringatan</b> dan masih ingin aplikasi Anda menggunakan pencocokan pola sufiks, konfigurasi berikut diperlukan: <br>  spring.mvc.contentnegotiation.favor-path-extension = true <br>  ... <br></blockquote>  Ada tertulis, kata mereka, jika Anda memahami semua trik dan masih ingin menggunakan pencocokan jalur suffix, maka centang kotak ini.  Rasakan perbedaannya?  Sepertinya kita berbicara tentang definisi tipe konten dalam konteks bendera ini, tetapi di sini kita berbicara tentang pencocokan metode dan URL Java.  Sepertinya tidak bisa dimengerti. <br><br>  Kita harus menggali lebih jauh.  Ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">permintaan tarik</a> di GitHub: <br><br><img src="https://habrastorage.org/webt/qa/ra/e8/qarae8b3dxgmf-mwhx1-bf9tev0.jpeg"><br><br>  Dalam kerangka permintaan tarikan ini, perubahan ini dibuat - mengalihkan nilai default - dan ada salah satu penulis kerangka mengatakan bahwa masalah ini memiliki dua aspek: satu hanya pencocokan jalur, dan yang kedua adalah definisi tipe konten .  Artinya, dengan kata lain, bendera berlaku untuk keduanya, dan keduanya terkait erat. <br><br>  Anda bisa, tentu saja, menemukannya langsung di GitHub jika Anda hanya tahu di mana mencarinya. <br><br><img src="https://habrastorage.org/webt/nb/pr/sq/nbprsqxl5nlwzs5qtnv3vohv26y.jpeg"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pertandingan sufiks</a> <br><br>  Selain itu, dokumentasi untuk Kerangka Spring itu sendiri juga menyatakan bahwa penggunaan ekstensi file diperlukan sebelumnya, tetapi sekarang tidak lagi dianggap suatu keharusan.  Selain itu, terbukti bermasalah dalam sejumlah kasus. <br><br><h3>  Ringkaslah </h3><br>  Mengubah nilai flag default sama sekali bukan bug, tetapi fitur.  Ini terkait erat dengan definisi pencocokan jalur dan dirancang untuk melakukan <b>tiga hal</b> : <br><br><ul><li>  mengurangi risiko keamanan (mana yang akan saya perjelas); </li><li>  menyelaraskan perilaku WebFlux dan WebMvc, mereka berbeda dalam aspek ini; </li><li>  sejajarkan pernyataan dalam dokumentasi dengan kode kerangka kerja. </li></ul><br><a name="contenttype_solution"></a><h3>  Bagaimana menjadi </h3><br>  Pertama, jika memungkinkan, Anda tidak harus bergantung pada definisi tipe konten dengan ekstensi.  Contoh yang saya tunjukkan adalah contoh tandingan, tidak perlu melakukan ini!  Serta tidak perlu bergantung pada kenyataan bahwa permintaan dari bentuk "GET something.json", misalnya, hanya akan "GET sesuatu".  Ini adalah kasus di Spring Framework 4 dan di Spring Boot 1. Ini tidak berfungsi lagi.  Jika Anda perlu memetakan ke file dengan ekstensi, Anda harus melakukan ini secara eksplisit.  Alih-alih, lebih baik mengandalkan tajuk Terima atau pada parameter URL, yang namanya dapat Anda kendalikan.  Nah, jika Anda tidak dapat melakukannya dengan cara apa pun, katakanlah Anda memiliki beberapa klien seluler lama yang berhenti memperbarui pada abad terakhir, Anda harus mengembalikan tanda ini, mengaturnya menjadi "benar", dan semuanya akan berfungsi seperti sebelumnya. <br><br>  Selain itu, untuk pemahaman umum, Anda dapat membaca bab "Pencocokan sufiks" dalam dokumentasi untuk Kerangka Kerja Musim Semi, hal ini dianggap oleh para pengembang sebagai semacam kumpulan praktik terbaik di bidang ini, dan membiasakan diri Anda dengan apa yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">serangan Unduhan File Download</a> , hanya diimplementasikan menggunakan manipulasi dengan ekstensi file. <br><br><a name="scheduling"></a><h2>  Penjadwalan.  Tugas terjadwal atau berkala </h2><br>  Mari kita sedikit mengubah ruang lingkup dan berbicara tentang menyelesaikan tugas sesuai jadwal atau secara berkala. <br><br><h3>  Contoh tugas.  Log pesan setiap 3 detik </h3><br>  Apa yang dikatakan, saya pikir, bisa dimengerti.  Kami memiliki beberapa kebutuhan bisnis, untuk melakukan sesuatu dengan semacam pengulangan, jadi kami akan segera melanjutkan ke contoh.  Misalkan kita memiliki tugas mega-kompleks: untuk mengeluarkan beberapa kotoran ke log setiap 3 detik. <br><br><img src="https://habrastorage.org/webt/rf/ay/mh/rfaymhimyivf7htbkhf7fw3nia0.jpeg"><br><br>  Ini dapat dilakukan, tentu saja, dalam berbagai cara, bagi mereka dengan cara apa pun sudah ada sesuatu di Spring.  Dan menemukannya - banyak cara. <br><br><h3>  Opsi 1: cari contoh di proyek Anda </h3><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** *A very helpful service */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReallyBusinessService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// … a bunch of methods … @Scheduled(fixedDelay = 3000L) public void runRepeatedlyWithFixedDelay() { assert Runtime.getRuntime().availableProcessors() &gt;= 4; } // … another bunch of methods … }</span></span></code> </pre><br>  Kita dapat melihat dalam proyek kita sendiri dan kita mungkin akan menemukan sesuatu seperti ini.  Satu anotasi akan bergantung pada metode publik, dan akan menjadi jelas darinya bahwa begitu Anda menggantungnya, semuanya berfungsi seperti dalam dongeng. <br><br><h3>  Opsi 2: cari anotasi yang diinginkan </h3><br><img src="https://habrastorage.org/webt/nr/ax/sv/nraxsvpmgs9u7z2yjavxhceqrli.jpeg"><br><br>  Anda dapat mencari anotasi secara langsung berdasarkan nama, dan itu juga akan menjadi jelas dari dokumentasi bahwa Anda menggantungnya - dan semuanya berfungsi. <br><br><h3>  Opsi 3: Googling </h3><br>  Jika Anda tidak memiliki kepercayaan pada diri sendiri, maka Anda dapat google itu, dan dari apa yang Anda <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">temukan,</a> juga akan jelas bahwa semuanya akan dimulai dengan satu anotasi. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EventCreator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger LOG = LoggerFactory.getLogger(EventCreator.class); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> EventRepository eventRepository; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EventCreator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> EventRepository eventRepository)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.eventRepository = eventRepository; } <span class="hljs-meta"><span class="hljs-meta">@Scheduled</span></span>(fixedRate = <span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> LocalDateTime start = LocalDateTime.now(); eventRepository.save( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventKey(<span class="hljs-string"><span class="hljs-string">"An event type"</span></span>, start, UUID.randomUUID()), Math.random() * <span class="hljs-number"><span class="hljs-number">1000</span></span>)); LOG.debug(<span class="hljs-string"><span class="hljs-string">"Event created!"</span></span>); } }</code> </pre><br>  Siapa yang melihat hasil tangkapan ini?  Bagaimanapun, kita adalah insinyur, mari kita periksa bagaimana ini bekerja dalam kenyataan. <br><br><h3>  Tunjukkan kodenya! </h3><br>  Pertimbangkan tugas tertentu (tugas itu sendiri dan kode berada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di repositori saya</a> ). <br><br>  Siapa yang tidak ingin membaca, Anda dapat menonton fragmen video ini dengan demonstrasi (hingga menit ke-22): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/8jNXZXdb3no" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Sebagai ketergantungan, kami akan menggunakan Spring Boot pertama dengan dua permulaan.  Yang pertama adalah untuk web, sepertinya kami sedang mengembangkan server web, dan yang kedua adalah aktuator musim semi, sehingga kami memiliki fitur yang siap produksi, sehingga kami setidaknya sedikit seperti sesuatu yang nyata. <br><br><pre> <code class="java hljs">dependencies { ext { springBootVersion = <span class="hljs-string"><span class="hljs-string">'1.5.14.RELEASE'</span></span> <span class="hljs-comment"><span class="hljs-comment">// springBootVersion = '2.0.4.RELEASE' } compile("org.springframework.boot:spring-boot-starter-web:$springBootVersion") compile("org.springframework.boot:spring-boot-starter-actuator:$springBootVersion") // +100500      }</span></span></code> </pre> <br>  Dan kode yang dapat dieksekusi kami akan lebih sederhana. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> tech.toparvion.sample.joker18.schedule; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.LoggerFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.autoconfigure.SpringBootApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.scheduling.annotation.Scheduled; <span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EnableSchedulingDemoApplication</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = LoggerFactory.getLogger(EnableSchedulingDemoApplication.class); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(EnableSchedulingDemoApplication.class, args); } <span class="hljs-meta"><span class="hljs-meta">@Scheduled</span></span>(fixedRate = <span class="hljs-number"><span class="hljs-number">3000L</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doOnSchedule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ log.info(“ <span class="hljs-number"><span class="hljs-number">3</span></span>     …”); } }</code> </pre><br>  Secara umum, hampir tidak ada yang luar biasa, kecuali satu-satunya metode di mana kita menggantungkan anotasi.  Kami menyalinnya di suatu tempat dan berharap itu berfungsi. <br><br>  Mari kita periksa, kita adalah insinyur.  Kita mulai.  Kami berasumsi bahwa setiap tiga detik pesan seperti itu akan dicatat.  Semuanya harus bekerja di luar kotak, kami memastikan bahwa semuanya diluncurkan pada Boot Musim Semi pertama, dan kami mengharapkan output dari baris yang diinginkan.  Tiga detik berlalu - garis adalah output, enam lewat - garis ditampilkan.  Optimis menang, semuanya berfungsi. <br><br><img src="https://habrastorage.org/webt/ed/em/ir/edemirx8zopb5wbf193tlbbh6fi.png"><br><br>  Hanya saatnya tiba untuk meningkatkan ke Spring Boot kedua.  Kami tidak akan repot, hanya beralih dari satu ke yang lain: <br><br><pre> <code class="java hljs">dependencies { ext { <span class="hljs-comment"><span class="hljs-comment">// springBootVersion = '1.5.14.RELEASE' springBootVersion = '2.0.4.RELEASE' }</span></span></code> </pre><br>  Secara teori, Panduan Migrasi tidak memperingatkan kami tentang apa pun, dan kami berharap semuanya akan berjalan tanpa penyimpangan.  Dari sudut pandang kode yang dapat dieksekusi, kami tidak memiliki rake lain yang saya sebutkan sebelumnya (ketidakcocokan di tingkat API atau sesuatu yang lain), karena aplikasi ini sesederhana mungkin. <br><br>  Kita mulai.  Pertama-tama, kami yakin bahwa kami sedang mengerjakan Boot Musim Semi kedua, jika tidak, sepertinya tidak ada penyimpangan. <br><br><img src="https://habrastorage.org/webt/e4/rq/cy/e4rqcy4gms2t-cog16ru4cr8qcu.png"><br><br>  Namun, 3 detik berlalu, 6, 9, tetapi masih belum ada Herman - tidak ada kesimpulan, tidak ada yang berhasil. <br>  Seperti yang sering terjadi, harapan bertentangan dengan kenyataan.  Mereka sering menulis kepada kami dalam dokumentasi bahwa, pada kenyataannya, semuanya berjalan di luar kotak di Spring Boot, yang secara umum kita dapat memulai dengan masalah minimal, dan tidak diperlukan konfigurasi.  Tapi begitu kenyataan, sering kali kita harus membaca dokumentasi.  Secara khusus, jika Anda menggali lebih dalam, Anda dapat menemukan di sini garis-garis ini: <br><blockquote>  7.3.1.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aktifkan Penjadwalan Penjelasan</a> <br>  Untuk mengaktifkan dukungan untuk penjelasan @Scheduled dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Async</a> , Anda dapat menambahkan @EnableScheduling dan @EnableAsync ke salah satu kelas @Configuration Anda. </blockquote>  Agar anotasi terjadwal berfungsi, Anda perlu menggantung anotasi lain di kelas dengan anotasi lain.  Nah, seperti biasa di Spring.  Tapi mengapa itu berhasil sebelumnya?  Kami tidak melakukan hal seperti itu.  Jelas, anotasi ini di suatu tempat digantung sebelumnya di Spring Boot pertama, tetapi sekarang untuk beberapa alasan itu tidak di yang kedua. <br><br><img src="https://habrastorage.org/webt/zz/7_/ar/zz7_ardj3w6--f-wefbyenp7_p0.jpeg"><br><br>  Kita mulai mencari-cari kode sumber dari Spring Boot pertama.  Kami menemukan bahwa ada beberapa kelas yang seharusnya hang.  Kami melihat lebih dekat, ini disebut "MetricExportAutoConfiguration" dan, tampaknya, bertanggung jawab untuk memberikan metrik kinerja ini di luar, ke beberapa agregator terpusat, dan ini benar-benar memiliki anotasi ini. <br><br><img src="https://habrastorage.org/webt/mf/ya/pb/mfyapbujxbyzbumuxy2cghrs2qk.jpeg"><br><br>  Selain itu, ia bekerja sedemikian rupa sehingga mencakup perilakunya pada seluruh aplikasi sekaligus, tidak perlu digantung pada kelas yang terpisah.  Kelas inilah yang menjadi pemasok perilaku ini, dan kemudian karena suatu alasan tidak.  Mengapa <br><br><img src="https://habrastorage.org/webt/vd/p_/fj/vdp_fjs2gqgaicooirzzwu-tjg8.jpeg"><br><br>  Semua GitHub yang sama mendorong kita ke penggalian arkeologis seperti itu: sebagai bagian dari transisi ke versi kedua dari Boot Musim Semi, kelas ini dipangkas bersama dengan anotasi.  Mengapa  Ya, karena mesin pengiriman metrik juga telah berubah: mereka tidak lagi menggunakan skrip mereka sendiri, tetapi beralih ke Mikrometer - solusi yang sangat berarti.  Itu hanya sesuatu yang berlebihan yang tertinggal dengannya.  Mungkin ini bahkan benar. <br><br>  Siapa yang tidak ingin membaca, lihat demo singkat selama 30 detik: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/8jNXZXdb3no" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Oleh karena itu, jika kita sekarang mengambil dan secara manual menggantung anotasi yang hilang di kelas asli kita, maka, secara teori, perilaku harus menjadi benar. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> tech.toparvion.sample.joker18.schedule; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.LoggerFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.autoconfigure.SpringBootApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.scheduling.annotation.EnableScheduling; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.scheduling.annotation.Scheduled; <span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableScheduling</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EnableSchedulingDemoApplication</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = LoggerFactory.getLogger(EnableSchedulingDemoApplication.class); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(EnableSchedulingDemoApplication.class, args); } <span class="hljs-meta"><span class="hljs-meta">@Scheduled</span></span>(fixedRate = <span class="hljs-number"><span class="hljs-number">3000L</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doOnSchedule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ log.info(“ <span class="hljs-number"><span class="hljs-number">3</span></span>     …”); } }</code> </pre><br>  Apakah Anda pikir itu akan berhasil?  Mari kita periksa.  Kita mulai. <br><br><img src="https://habrastorage.org/webt/6f/pg/ld/6fpgldlhinmkrdq6git1-dovdrg.png"><br><br>  Dapat dilihat bahwa setelah 3 detik, setelah 6 dan setelah 9, pesan yang kami harapkan masih ditampilkan di log. <br><br><a name="scheduling_solution"></a><h3>  Bagaimana menjadi </h3><br>  Apa yang harus dilakukan dengan ini dalam kasus khusus dan lebih umum ini?  Tidak peduli seberapa moralistik hal ini kedengarannya, pertama, ada baiknya membaca tidak hanya menyalin fragmen dokumentasi, tetapi juga sedikit lebih luas, hanya untuk mencakup aspek-aspek tersebut. <br><br>  Kedua, ingat bahwa di Spring Boot meskipun banyak fitur di luar kotak (penjadwalan, async, caching, ...), mereka tidak selalu termasuk, mereka harus diaktifkan secara eksplisit. <br><br>  Ketiga, itu tidak repot-repot aman: tambahkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Aktifkan</a> * anotasi (dan seluruh keluarga mereka) ke kode Anda, tidak mengharapkan kerangka kerja.  Tetapi kemudian muncul pertanyaan: apa yang akan terjadi jika kebetulan saya dan rekan-rekan saya menambahkan beberapa penjelasan, bagaimana mereka akan bersikap?   ,        .    :  .   ,       . <br><br> , @EnableAsync  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Enable</a> Caching  , ,  ,  ,        ,    . ,             .     ?      javadoc    ,      .  ,        .    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Enable</a> *,       ,    .     ?            . <br><br><a name="proxy"></a><h2> Spring Cloud &amp; Co.   </h2><br><img src="https://habrastorage.org/webt/0a/sa/qj/0asaqj87-tg2xetyig_ytjreb34.jpeg"><br><br>       Spring Boot 2   ,    Spring Cloud —      Service Discovery (   ).      JavaMelody.     -  .  , ,    JDBC,    H2. <br><br><img src="https://habrastorage.org/webt/as/fd/lb/asfdlb0f-iqfgaquxgr7bjitwpq.jpeg"><br><br>    ,      ,  JavaMelody —   ,           ,   .   dev-,  test,          -  ,  Prometheus. <br><br>      Gradle   : <br><br><pre> <code class="java hljs">dependencies { ext { springBootVersion = <span class="hljs-string"><span class="hljs-string">'2.0.4.RELEASE'</span></span> springCloudVersion = <span class="hljs-string"><span class="hljs-string">'2.0.1.RELEASE'</span></span> } compile(<span class="hljs-string"><span class="hljs-string">"org.springframework.boot:spring-boot-starter-web:$springBootVersion"</span></span>) runtime(<span class="hljs-string"><span class="hljs-string">"org.springframework.boot:spring-boot-starter-jdbc:$springBootVersion"</span></span>) runtime group: <span class="hljs-string"><span class="hljs-string">"org.springframework.cloud"</span></span>, name: <span class="hljs-string"><span class="hljs-string">"spring-clooud-starter-netflix-eureka-client"</span></span>, version: <span class="hljs-function"><span class="hljs-function">springCloudVersion </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runtime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"net.bull.javamelody:javamelody-spring-boot-starter:1.72.0"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//… }</span></span></span></span></code> </pre><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">(  )</a> <br><br>      Spring Boot —  web  jdbc,  Spring Cloud     eureka (,    ,    Service Discovery),   JavaMelody.        . <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HikariJavamelodyDemoApplication</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(HikariJavamelodyDemoApplication.class, args); } }</code> </pre><br>  Kita mulai. <br><br><img src="https://habrastorage.org/webt/uj/os/hr/ujoshrw-kj_cn72s23h5e7fjgka.jpeg"><br><br>      .      ,        ,      -  com.sun.proxy  Hikari, HikariDataSource.    ,  Hikari —      ,    Tomcat, C3P0  . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hv/la/u9/hvlau913-05gppcoqmjfsbuzip0.jpeg" width="50%"></div><br>   ?       . <br><br><h2>   </h2><br><h3> Spring Cloud  dataSource   </h3><br>  ,  Spring Cloud   ,    dataSource (   ),  .     ,    AutoRefresh  RefreshScope —                .          .      CGLIB. <br><br>  , ,   Spring Boot     Spring    :     JDK  (    ,   )     CGLIB (   ).     BeanPostProcessor'    BeanDefinition      ,        . <br><br><h3> JavaMelody  dataSource   </h3><br>   —  JavaMelody.    DataSource  ,      ,         . JavaMelody   JDK-,      ,   .       —   BeanPostProcessor. <br><br>        ,   ,     DataSource     JDK-,    CGLIB-.    : <br><br><img src="https://habrastorage.org/webt/j8/la/aj/j8laaj9tuxuewycjnpqzuxcaxpw.png"><br><br>     .      ,         . <br><br><h3> Spring Boot  dataSource.unwrap() </h3><br>     Spring Boot,     DataSource#unwrap(),        JMX.    JDK-       (     ),  CGLIB-,   Spring Cloud,     Spring Context. ,   ,      JDK-,    CGLIB API    . <br><br>       ,     : <br><br><img src="https://habrastorage.org/webt/a4/tb/aw/a4tbawwbqhd72cn7zw-ain4zm4c.jpeg"><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://jira.spring.io/browse/SPR-17381</a> <br><br>       ,   ,     ,         .     ,     , , , -   . <br><br><img src="https://habrastorage.org/webt/ke/bn/ns/kebnnswvcy8kwtnqezvikitcdvw.jpeg"><br><br>     .       Hikari? <br><br>  ,     Hikari  -    ,   Spring Cloud    .   : Hikari       Spring Boot 2. ? -    - .   ,  Spring Cloud?   ,    -  ,       ?   .  ,       . <br><br><h3>    … </h3><br><pre> <code class="java hljs">org.springframework.cloud.autoconfigure.RefreshAutoConfiguration .RefreshScopeBeanDefinitionEnhancer: <span class="hljs-comment"><span class="hljs-comment">/** * Class names for beans to post process into refresh scope. Useful when you * don't control the bean definition (eg it came from auto-configuration). */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Set&lt;String&gt; refreshables = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;&gt;( Arrays.asList(<span class="hljs-string"><span class="hljs-string">"com.zaxxer.hikari.HikariDataSource"</span></span>));</code> </pre><br>      Spring Cloud    autoconfiguration,       Enhancer BeanDefinition',       ,      Hikari.    Spring Cloud        .       . <br><br>      ?    Spring Cloud   ,        CGLIB-.   , ,  ,  ,    -      .        (jira.spring.io/browse/SPR-17381).       BeanPostProcessor,     .      BeanDefinition       ,    BeanPostProcessor'.   Stack Overflow    ,      -  ,    , proxyTargetClass   true  false  ,   .    ,        .      . <br><br>            ,      -   ,     . <br><br>    : <br><br><ul><li>      (, Tomcat JDBC Pool) <br> spring.datasource.type=org.apache.tomcat.jdbc.pool.DataSource <br>     <br> runtime 'org.apache.tomcat:tomcat-jdbc:8.5.29' <br> Hikari ,  , ,   ,      ,      Tomcat,     Spring Boot. </li><li>   JavaMelody,   JDBC-,    . <br> javamelody.excluded-datasources=scopedTarget.dataSource </li><li>      Spring Cloud. <br> spring.cloud.refresh.enabled=false <br> ,  ,     ,    Service Discovery,       . </li></ul><br><br>      .              ,          . <br><br><a name="bonus"></a><h3>  ( *) </h3><br> *  Spring Cloud (   JavaMelody) <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-meta"><span class="hljs-meta">@ManagedResource</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableAsync</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyJmxResource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@ManagedOperation</span></span> <span class="hljs-meta"><span class="hljs-meta">@Async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">launchLongLastingJob</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// -   } }</span></span></code> </pre><br>   : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/toparvion/joker-2018-samples/tree/master/jmx-resource</a> . <br><br>   .    ,      Spring Cloud.   JavaMelody ,    Spring-,   .       ,  ,     ,    JMX   .      -  ,      Async,    JMX-  .      JMX,      @ManagedOperation,     ,     (    Spring —    ,     OK). <br><br>      ,     ,      , , ,  myJMXResource     JMX,     .     ,          —     , CGLIB  JDK. <br><br><img src="https://habrastorage.org/webt/de/c2/bo/dec2bo6sbaa1zipyhg55jigk960.jpeg"><br><br>  JDK  CGLIB-.    ,  -   BeanPostProcessor. <br><br>  ,    BeanPostProcessor': <br> AsyncAnnotationBeanPostProcessor <br><br><ul><li> :      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Async</a> </li><li> : org.springframework.scheduling </li><li>  :  @EnableAsync ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Import</a> ) </li></ul><br> 2. DefaultAdvisorAutoProxyCreator <br><ul><li> :     AOP-,        </li><li> : org.springframework.aop.framework.autoproxy </li><li>  : @Configuration- PointcutAdvisorConfig (  ) </li></ul><br> DefaultAdvisorAutoProxyCreator   @Configuration-.   ,      ,   JavaMelody,             configuration-.  ,    PointcutAdvisorConfig,        . <br><br><img src="https://habrastorage.org/webt/ta/bq/lh/tabqlh0jqjk71cnajqj5trjwp10.jpeg"><br><br>   ,    .   PointcutAdvisorConfig,   AdvisorConfig,     ,  configuration-,   ,  ,  ,    ,          . <br><br>  ,     ,   ,   ,    -. <br><br><img src="https://habrastorage.org/webt/nx/hw/vk/nxhwvkroqzaw8eziviybh7ct2sk.jpeg"><br><br>       BeanPostProcessor'.        ,       ,   ,    BeanPostProcessor         .    ,         Advised (  BeanPostProcessor'),   , ,   ,     , ,   JDK-,         .      . <br><br>        .     ,     : <br><br><img src="https://habrastorage.org/webt/kz/_r/te/kz_rtesazmfb1jdrd-2cbt7_kfo.png"><br><br>       JMX     .        BeanPostProcessor.       BeanPostProcessor',        , ,   ,   ,            JAR,    ,   . <br><br><a name="proxy_solution"></a><h3>  Bagaimana menjadi </h3><br> -,       ,   Spring AOP,  , .  « »?        ,  -       Advice  Advisor,      ,       . <br><br> -,    best practices. ,          JMX-  ,       .  - ,       , ,     .      ,   autowire' ()     .     .  ,    ,    - .           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Order</a> ,     .  ,   ,     , ..     proxyTargetClass,   . <br><br> :     ,   . -, «Keep calm and YAGNI».   ,                .  « »,      - , -   ,    ,       ,   .     ,  ,       :    -,   ,       —  ,    .          . , Spring    ,      ,    .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">tolkkv</a> ,   ,      436- ,   .      ,      . <br><br><a name="relax"></a><h2> Relax Binding.    ()  </h2><br>   ,    . <br><br><img src="https://habrastorage.org/webt/ry/xw/mv/ryxwmvrfnmzbmona2o3vys4yqim.jpeg"><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-external-config-relaxed-binding</a> <br><br>    ,  Relax Binding  Spring Boot.       -         . ,      -   firstName   ,       acme.my-project.person,  Spring Boot      .        :  camel case,  ,     ,  -  —       firstName.      Relax Binding. <br><br>      Spring Boot'    ,   ,          —        . ,  ,   ,     : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide#relaxed-binding</a> ( 1 ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-external-config-relaxed-binding</a> ( 3 ) </li><li> <a href="">github.com/spring-projects/spring-boot/wiki/Relaxed-Binding-2.0</a> ( 4 ) </li></ul><br>   ,  ,  .  - . ,      . <br><br>  Sebagai contoh: <br><br><pre> <code class="java hljs">dependencies { ext { springBootVersion = <span class="hljs-string"><span class="hljs-string">'1.5.4.RELEASE'</span></span> } compile(<span class="hljs-string"><span class="hljs-string">"org.springframework.boot:spring-boot-starter:$springBootVersion"</span></span>) }</code> </pre><br> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  </a> ) <br><br>       - ,   web,   Spring Boot,         -  . <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RelaxBindingApplication</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationRunner</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = LoggerFactory.getLogger(RelaxBindingDemoApplication.class); <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SecurityProperties securityProperties; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(RelaxBindingDemoApplication.class, args); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> main </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ApplicationArguments args)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"KEYSTORE TYPE IS: {}"</span></span>, securityProperties.getKeyStoreType()); } }</code> </pre><br>  ,    POJO- ( )        ,    KEYSTORE TYPE.  POJO          ,      applications.properties  application.yaml,  . <br><br>      keystoreType,     private String keystoreType,      applications.properties: security.keystoreType=jks. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-meta"><span class="hljs-meta">@ConfigurationProperties</span></span>(prefix = <span class="hljs-string"><span class="hljs-string">"security"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SecurityProperties</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String keystorePath; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String keystoreType; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getKeystorePath</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> keystorePath; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setKeystorePath</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String keystorePath)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.keystorePath = keystorePath; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getKeyStoreType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> keystoreType; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setKeystoreType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String keystoreType)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.keystoreType = keystoreType; } }</code> </pre><br>     Spring Boot     . <br><br><img src="https://habrastorage.org/webt/ya/fn/kg/yafnkgxoaoudil70xnvdw1q_hhc.jpeg"><br><br>  ,  ,  ,  .      ,      . <br><br><img src="https://habrastorage.org/webt/qz/1b/s6/qz1bs6ydorm1cfaej8lcfzvxc84.jpeg"><br><br>      ,   .   ,   ,  ,    -   ,       , - key-store-type.        ,    ,        ,     . <br><br>       .    ,      . <br><br><img src="https://habrastorage.org/webt/kf/8j/8e/kf8j8eytzsayh7xarx_dx_kaedy.jpeg"><br><br>     .      2  ,   ,   .           Java   properties —  ,    .    , , ,     ,    ,      .   —      Java bean       .   ,    ,  .       ,   «keystore»  ,    : «Key»  «Store». … <br><br><img src="https://habrastorage.org/webt/9-/ak/rw/9-akrwm5gftlarfdvte2s1hqkas.jpeg"><br><br>  ,    ,    ? . <br><br> ,    ,    Relax Binding    (   getStoreType()).   ,     . ,         .    ,  keyStoreType,   . ,       Relax Binding,    ,        ,    . <br><br>  ,   -  ,  -   ,     .      ,     .         : <br><br><img src="https://habrastorage.org/webt/ll/s_/c2/lls_c2hpqhq6ea7eooc_bf65c_u.jpeg"><br><br>        ,  -    ,    ,   , ,     -,         .        . <br><br><a name="relax_solution"></a><h3>  Bagaimana menjadi </h3><br>        :       - . -,   ,     dev-   , ,  YAML  properties,    —      ,    ,    . -,     <a href="">c   </a> ,       Relax Binding,    .  , , ,     Spring Boot   . <br><br><a name="unit"></a><h2> Unit Testing.    Mockito 2 </h2><br>    ,    -     ,        Mockito. <br><br> Mockito    ,        Spring Boot Starter,      Spring,        Mockito. <br><br><pre> <code class="plaintext hljs">$gradle -q dependencyInsight --configuration testCompile --dependency mockito org.mockito:mockito-core:2.15.0 variant "runtime" /--- org.springframework.boot:spring-boot-starter-test:2.0.2.RELEASE /---testCompile</code> </pre><br>     ?      .    Spring Boot  Mockito   ,    1.5.2 Spring Boot     Mockito 2,      .     -  .         Mockito 2. <br><br>  Mockito   ,    2016-   Mockito 2.0  Mockito.2.1—      :  Java 8    ,     Hamcrest     - .   ,     ,     . <br><br>     ,           ,     (  ) . <br><br><img src="https://habrastorage.org/webt/5a/yt/fo/5aytfoqxgbx4crbjwmngut1dh1i.jpeg"><br><br> ,       ,     JButton  Swing,    null,   ,     -  .   , string'   null,   , null   instanceof  string.  ,  Mockito 1     ,  Mockito 2          ,  anyString  null   ,        ,       .      :      null,     .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a> ,  ,         ,     Mockito 1. <br><br>  ,   , . <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setTarget</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object target)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//… } } &lt;hr/&gt; @Test public void testAnyStringMatcher() { MyService myServiceMock = mock(MyService.class); myServiceMock.setTarget(new JButton()); verify(myServiceMock).setTarget(anyString()); }</span></span></code> </pre><br> ,        ,   .                 JButton.       anyString.  ,   :   ,     —    .   ,       .    -       10-    ,        .  Mockito 1   ,     : <br><br><img src="https://habrastorage.org/webt/ts/_s/cd/ts_scdhl4ikfptceteyv-plex0o.png"><br><br> Mockito 2    , ,   , anyString     : <br><br><img src="https://habrastorage.org/webt/db/tw/ec/dbtwecp6onmr9f_r4k-ufverzb8.jpeg"><br><br>     .   ,    . ,        ,      ,         ,         SocketTimeoutException,       -   .          ,  SocketTimeoutException ,  .         Mockito 1. <br><br><img src="https://habrastorage.org/webt/2b/nc/9d/2bnc9dqcfgkh7htm6-tiih1mf38.png"><br><br>   Mockito 2        ,        : <br><br><img src="https://habrastorage.org/webt/41/ya/uh/41yauhpileynqw_fqvdisk26h_k.jpeg"><br><br>   ,  Mockito 1    ,     ,        .      new SocketTimeoutException   new,  constructor,  Mockito 1   . <br><br>  Apa yang harus dilakukan?    , ,  RuntimeException,       ,    Mockito     . <br><br>    .    ,       .       compile-time. -     ,     Hamcrest.  Spring Boot,  Mockito 1     @MockBean  @SpyBean.        ,    Spring Integration,         review. <br> (: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://docs.spring.io/spring-integration/docs/5.0.0.RELEASE/reference/htmlsingle/#testing</a> ) <br><br><h3>  Bagaimana menjadi </h3><br>     ,   ,      Mockito 1,      Mockito 2 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dzone.com/refcardz/mockito</a> ). <br><br> -,      ,     ,    Spring Boot 1.5.2  Mockito 2. <br><br> -, ,    ,    Mockito 2,          : <a href=""></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> . <br><br><a name="gradle"></a><h2> Gradle Plugin.  Spring Boot  </h2><br> ,     , —  Spring Boot-  Gradle. <br><br>   Migration Guide ,  Spring Boot   Gradle   .  ,  .  :    Gradle 4  (,    settings.gradle   ).       dependency management plugin,    .    bootRepackage,  ,   :  bootWar  bootJar.     bootJar     . <br><br>  bootJar: <br><br><ul><li>  ,    org.springframework.boot  java; </li><li>   jar; </li><li>   mainClassName (    )   (  ,  -  ). </li></ul><br>  ,    ,      —   ,   ,   Gradle,     Spring Boot. <br><br>     ?   -    Spring Boot 2, , ,  Gradle 4      Spring Boot-.     ,     ,  :      ,  ,     (    ,     ). <br><br><img src="https://habrastorage.org/webt/kb/uh/y4/kbuhy4rtm7yyl_zjp2ij62wavoq.jpeg"><br><br>   ,   .    app1 ,    app2, app3  . .  app1    lib. <br><br><h3> «Show me the code!» </h3><br>   <br><br><pre> <code class="java hljs">subprojects { repositories { mavenCentral() } apply plugin: <span class="hljs-string"><span class="hljs-string">'java'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'org.springframework.boot'</span></span> }</code> </pre><br>         —   : java   Spring Boot   . <br><br> ,   ,       ,   .      ,        ,     ,     .       . <br><br> app1:   <br><br><pre> <code class="java hljs">dependencies { ext { springBootVersion = <span class="hljs-string"><span class="hljs-string">'2.0.4.RELEASE'</span></span> } compile(<span class="hljs-string"><span class="hljs-string">"org.springframework.boot:spring-boot-starter:$springBootVersion"</span></span>) <span class="hljs-function"><span class="hljs-function">compile </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">':lib'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> }</span></span></code> </pre><br>          lib  ,   Spring Boot-. <br><br> app1:   <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GradlePluginDemoApplication</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationRunner</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//… @Override public void run(ApplicationArguments args) { String appVersion = Util.getAppVersion(getClass()); log.info("Current application version: {}", appVersion); } }</span></span></code> </pre><br>         Util,     . <br><br> lib:   <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Util</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAppVersion</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Class&lt;?&gt; appClass)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> appClass.getPackage().getImplementationVersion(); } }</code> </pre><br>   Util   getAppVersion    ,    ,  ImplementationVersion   .        . <br><br><img src="https://habrastorage.org/webt/jc/ax/ur/jcaxur0f1_-yhxot9uvkfsf3fos.jpeg"><br><br>      IDE,   ,    ,     .    gradle build  IDE ,   .         Util.  ,  ,    ,      ,       . <br><br><a name="gradle_solution"></a><h3>   </h3><br> : <br><br><ul><li> bootJar   jar; </li><li> Gradle        jar. </li></ul><br> : <ul><li>       ; </li><li>   ,    jar (  ImplementationVersion), . </li></ul><br>    ?   :        . <br><br><img src="https://habrastorage.org/webt/dz/lr/p8/dzlrp85l4z8wsgc12ttn7cwsqec.jpeg"><br><br>       Spring Boot-   , ,   lib    .     . <br><br>  2:  SB Gradle Plugin   Spring Boot- <br><br><pre> <code class="java hljs">bootJar { enabled = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> }</code> </pre><br>    ,      -   ,    , ,    , ,      bootJar   . ,    jar  ,       . <br><br><a name="other"></a><h2>  Lainnya </h2><br>  , ,      ,      Spring Boot.       . <br><br><img src="https://habrastorage.org/webt/xm/8w/kx/xm8wkxoaoc2ujoy0kicwn5v2n9w.jpeg"><br><br>  Spring Boot        :       web-,       ,    .    - ,       ,  Spring Boot properties migrator,      ,  ,        .      ,     ,     -,        . <br><br>      Actuator.  ,       ()  ,      Spring Security.       . <br><br><img src="https://habrastorage.org/webt/hv/sl/d4/hvsld4a0hcak8jvs3rbwsbugi00.jpeg"><br><br>  Spring Cloud   .   ,        .   ,  Netflix  Feign. <br><br><img src="https://habrastorage.org/webt/lu/a5/6l/lua56loq0hsapwtgkstpf0_7ik0.jpeg"><br><br>  Spring Integration,     ,   Spring Framework,   .     —  ,    Java DSL      , ,        .   ,       ,   ,      ,        handle    handleWithAdapter. <br><br><a name="summary"></a><h2> .    </h2><br> ,    ,     : <br><br><img src="https://habrastorage.org/webt/ww/ob/aq/wwobaqaf8ncw8fsfowcbdvipbvu.jpeg"><br><br>   ,   , , Web,       . <br><br>  (Properties Binding),   ,       ,    Relax Binding. <br><br>  — ,     :   , AOP  ,        ,   Spring Boot 2     . <br><br> , , ,  —   ,     Mockito 1  Mockito 2.    -  ,     ? <br><br><ul><li>  « » (YAGNI) </li><li>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">;</a> </li><li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Migration Guide</a> ; </li><li>   : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> </li></ul><br> -,   ,         ,     ,    YAGNI.   ,    -  ,     .  ,  ,     . <br><br> -,   - - ,     ,   ,     .     ,      ,  , ,       .           Migration Guide.  ,         ,   ,       ,  ,          . <br><br>     ,             Spring Boot. ,                 Spring Boot,     ,       …    . <br><blockquote>    ,  : <b>5-6   </b>  <b>JPoint</b> ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a>  Spring Boot:      Spring Boot-  Java 8  Java 11.    — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id439796/">https://habr.com/ru/post/id439796/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id439786/index.html">Ulasan IP-phone Snom D712 (dan sedikit D710)</a></li>
<li><a href="../id439788/index.html">Keanehan lain dalam algoritma GOST Grasshopper dan Stribog</a></li>
<li><a href="../id439790/index.html">Menguji JaCarta WebClient atau menyimpan token di brankas</a></li>
<li><a href="../id439792/index.html">NASA sedang mencari mitra di industri Amerika untuk menciptakan pendaratan berawak sebagian yang dapat digunakan kembali</a></li>
<li><a href="../id439794/index.html">Nyeri punggung - pemahaman dari perspektif kedokteran modern</a></li>
<li><a href="../id439804/index.html">Zen dari Unit Testing</a></li>
<li><a href="../id439806/index.html">Nama Domain SSL Valid untuk Wadah Docker Lokal</a></li>
<li><a href="../id439808/index.html">Teleskop terbesar. Dari notebook dan mata ke kamera 340 megapiksel dan pusat data. Bagian 1</a></li>
<li><a href="../id439810/index.html">Mengenal kerangka kerja perangkat Moleculer</a></li>
<li><a href="../id439812/index.html">Pendekatan kaggle untuk CV dalam produk: Anda tidak dapat menerapkan untuk memotong</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>