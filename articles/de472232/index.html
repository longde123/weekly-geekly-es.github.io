<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍂 🕣 🛌🏾 Vom „Color Extender für ZX-Spectrum“ bis zum ZX-Poly 👦🏽 🥗 👧🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Color Extender for ZX-Spectrum" - das ist der Titel des Artikels, der am 3. August 1997 im echo fido7.zx.spectrum veröffentlicht wurde. Der Artikel b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vom „Color Extender für ZX-Spectrum“ bis zum ZX-Poly</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472232/"><p>  "Color Extender for ZX-Spectrum" - das ist der <em>Titel des</em> Artikels, der am 3. August 1997 im echo <em>fido7.zx.spectrum veröffentlicht</em> wurde.  Der Artikel beschrieb die Idee, eines der Hauptprobleme der ZX-Spectrum-Plattform zu lösen - den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Attribut-Konflikt</a> .  Die Veröffentlichung erregte damals ein gewisses Interesse, und ich möchte über technische Details und die Geschichte des Problems berichten. </p><br><p><img src="https://habrastorage.org/webt/ft/at/_v/ftat_vfl5fato4m_aobobohxfhm.png" alt="ZX-Poly Logo"></p><br><p>  Ich werde nicht tief in die technischen Details gehen und nur die Idee und Lösung strukturell beschreiben. </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Nicht-technischer Teil der Geschichte können Sie überspringen</b> <div class="spoiler_text"><p>  Die Entwicklungsgeschichte begann im Frühjahr 1994, als das Land noch "Änderungen im Entwurf" erlebte, die zur massiven Schließung von Stundungen und zur Attraktivität von Schülern von Berufsschulen und technischen Schulen führten.  Ich hatte Glück - ich war in meinem letzten Jahr am Leningrader Radiotechnischen Kolleg und so stimmte der Staat zu, eine kurzfristige Verzögerung für den beschleunigten Erhalt eines Diploms zu gewähren, indem das Diplomdesign durch eine Prüfung in allen Fächern ersetzt wurde.  Er verließ die Armee am 1. März 1994 als zertifizierter Funktechniker. </p><br><p>  In den Streitkräften gab es zu dieser Zeit einen beispiellosen Zustrom der gleichen Spezialisten der mittleren technischen Ebene, obwohl dies das Wehrpflichtsystem im Herbst-Frühling in den Köpfen der „Großväter“, die bereits eine deutliche Abstufung der Namen hatten, leicht ruinierte, nannten sie diesen nicht standardmäßigen Ruf „Kobold“.  Unter den "boomenden" gab es genug Leute, die ZX-Spectrum mochten und Alexander Gumin war in meiner Einheit (er schrieb Spiele auf dem ZX-Spectrum unter dem ANCCAN-Label mit Denis Markelov und wurde 1997 für seine Adaption von Mortal Kombat für diese Plattform bekannt). wen man über Programmierung und Hardware spricht. </p><br><p>  Kurz vor Mitte April 1994, am Ende des "Kurses für junge Kämpfer", wurden Alexander und ich in das Baubataillon in Strelna, einem Vorort von St. Petersburg, versetzt.  Dort mussten wir einige Monate lang die schwierige Spezialität des Kabelspleißers beherrschen.  Das Leben in diesem Teil verlief gemächlich und das Lernen wechselte sich mit Outfits ab, die meistens die Hände belasteten, dem Gehirn aber Zeit zum Nachdenken gaben.  In einem der Outfits in der Küche, auf meinem Boden und beim Nachdenken über das ZX-Spectrum und seine Fähigkeiten kam mir die Idee, wie man den "Konflikt der Attribute" überwinden kann. </p><br><p>  Ich dachte bis zum Ende des Gottesdienstes über diese Idee nach und war immer mehr davon überzeugt, dass "es funktionieren könnte".  Leider besuchte mich die Idee der Realisierbarkeit der Plattform selbst, auf die ich diese Idee anwenden wollte, weniger oft.  In Russland blitzte das ZX-Spektrum jedoch von etwa 1991 bis 1996 am lebhaftesten am Himmel auf.  Einige russische Produzenten ihrer Klone sind so stark gestiegen, dass sie Programme im Fernsehen gesponsert haben (zum Beispiel hat das Unternehmen BiM die Sendung „The Jungle's Name“ seit einiger Zeit gesponsert).  Aber während des Dienstes gab es andere Probleme, so dass ich mich entschied, alle Fragen im Zusammenhang mit dem Handel zu verschieben, bis ich in die Reserve geschickt wurde.  In regelmäßigen Abständen und ohne Einzelheiten preiszugeben, interessierte ich mich für verschiedene Experten zum Thema technische Machbarkeit und Gültigkeit des Ansatzes.  Er hielt die Idee geheim und teilte sie nicht einmal mit Alexander Gumin, was ihm nur vage anzeigte, dass er eine sehr einfache Lösung gefunden hatte, um die Anzahl der Farben zu erhöhen und gleichzeitig die Abwärtskompatibilität aufrechtzuerhalten. </p><br><p>  Nachdem ich 1997 in den „Bürger“ eingetreten war und eine Stelle als Softwareentwickler der zweiten Kategorie bei der St. Petersburger Firma „Information Technologies and Models“ bekommen hatte, begann ich mich ein wenig für die Frage der Kommerzialisierung der Lösung zu interessieren.  Aus irgendeinem Grund war ich mir sicher, dass, wenn ich nur auf die Lösung hinwies, die ich gefunden hatte, jeder anfangen würde, mit den Händen zu reißen, und das Geld fließen würde.  Ich fing an, die damals im Bereich "Spectrum-Building" bekannten Hersteller und Händler wie Sergey Zonov, Vyacheslav Skutin (Nemo) und andere anzurufen.  Sergey Zonov sagte mir einfach, dass „der Zug bereits abgefahren ist“ und dass dieses Unternehmen keinen kommerziellen Sinn mehr hat.  Vyacheslav Skutin, ein orthodoxer Spektrumist, war feindselig gegenüber jeder Idee, bei der er versuchte, etwas auf der Plattform zu ändern, und dies war auch eine völlig tote Version.  Ich entschied, dass wenig geredet wurde und zumindest etwas getan werden musste, und es war am besten, mit einem Emulator zu beginnen, um Werbematerial und experimentelle Daten zu erhalten. </p><br><p>  1998 habe ich auf der Grundlage eines der damals in Pascal geschriebenen Open-Source-ZX-Spectrum-Emulatoren einen primitiven Emulator aus vier parallel arbeitenden Computern erstellt.  Ich habe das Spiel After The War 2 teilweise dafür angepasst und einige seiner Sprites eingefärbt.  Das System funktionierte und ich hatte nicht nur Spaß an der Arbeitsidee, sondern auch Screenshots, die die Idee bestätigten, vorhandene Spiele zu färben. </p><br><p>  1998 besuchte ich die Firma Peters, die zu dieser Zeit ihre neue Sprinter-Plattform entwickelte.  Er machte einen Versuch, ihren Regisseur Nikolai Noskov zu interessieren.  Sie investierten viel in die neue Entwicklung und nach dem Gesetz der Gemeinheit konnte die superflexible Sprinter-Architektur, die fast jede Einzelprozessorplattform auf dem Z80 emulieren kann, vier Prozessoren nicht erweitern.  Ein Besuch in diesem Unternehmen war jedoch sehr nützlich, da er sich mit dem Autor der Sprinter-Plattform Ivan Makarchenko traf und sich über neue Möglichkeiten im Bereich der FPGA-Entwicklung informierte. </p><br><p>  Bald „schwand“ die 1998er Krise und es bestand die naive Hoffnung, dass sich das Interesse am ZX-Spectrum wieder beleben könnte.  Anfang 1999 hatten wir (mit meinem damaligen Partner Andrei Savichev) sogar Pläne, den „National Spectrum Fund“ zu gründen, und ein Treffen zu diesem Thema fand im neuen Büro des gleichen Peters-Unternehmens statt.  Aber sie betreten nicht zweimal denselben Fluss und natürlich ist nichts daraus geworden.  Bereits 1999 wurden alle Ideen zum Thema Hardware-Implementierung der Plattform verworfen (wir haben mit Sergey Egorov an dieser Entwicklung gearbeitet, sind aber nicht weiter gegangen als die Pläne).  Bis 2007 habe ich mich praktisch nicht mit der Plattform befasst, aber es war Zeit und ich habe beschlossen, den Emulator neu zu schreiben und die Details der Plattform zu erarbeiten, die Ansätze zu überprüfen und sie "virtuell" zu lassen. </p></div></div><br><p>  Der Standard-Videomodus ZX-Spectrum zeigt 256 x 192 Pixel an.  Im Monochrom-Modus sind hierfür nur 6144 Byte erforderlich, was ungefähr 10% des gesamten Speicherfelds entspricht (gegenüber 50% beim BK-0010).  Farbinformationen werden in zusätzlichen 768 Bytes gespeichert, die sich unmittelbar nach den Pixeldaten befinden.  Die Palette besteht aus acht Farben und zwei Schattierungen.  Die Farbe der beleuchteten und verworfenen Pixel wird sofort für den 8 × 8-Pixelblock bestimmt, und der Farbton wird sofort für die Farbe der beleuchteten und verworfenen Pixel bestimmt. </p><br><p>  Es sieht farbenfroh aus und eine relativ kleine Datenmenge wird sehr schnell gesendet, erfordert jedoch einen unglaublichen Aufwand und Kunst von Künstlern und Programmierern bei der Entwicklung von Farbspielen und Bildschirmschonern.  Die geringste Inkonsistenz im Diagramm führt zu einem Attributkonflikt.  Die meisten Entwickler haben ihre Arbeit vor dem Hintergrund des BK-0010 gut gemacht. Mit seinen nur vier Farben (aber für jeden Punkt!) Sah Spectrum quasi-color sehr vorteilhaft und frisch aus. </p><br><p><img src="https://habrastorage.org/webt/rb/wz/qv/rbwzqvjgroepwudiddfwnl9vhsi.png" alt="Beispiel für ein ZX-Spectrum-Attribut"></p><br><p>  Mit der Entwicklung der Plattform zu ZX-Spectrum 128 wurde die Möglichkeit hinzugefügt, Hardware zwischen zwei Seiten Videospeicher zu wechseln.  Programmierer fanden schnell einen Weg, mehrfarbig zu werden, indem sie die angezeigten Videoseiten sehr schnell änderten und die Farbattribute dynamisch änderten. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_aeNtFCaYt8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Aufgrund dessen war es sogar möglich, die Bildschirmauflösung programmgesteuert zu erhöhen (was beispielsweise in der Demo "Dead Morose" perfekt gezeigt wird, in der gleichzeitig Text mit einer Auflösung von 256, 512 und 768 horizontalen Punkten ausgeführt wird). </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/WHj4gBB612U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Alle Softwarelösungen, die eine Erhöhung des Videoinformationsflusses erfordern, führten jedoch zu einer Erhöhung des Prozessorverbrauchs, was bei dynamischen Spielen sehr kritisch ist.  Es gab keine ungenutzte Quelle für Rechenleistungsreserven im System.  Alles hängt am Prozessor im ZX-Spectrum und gibt ihm eine kleine Entlastung, außer vielleicht dem Musikprozessor im Bereich der Soundeffekte. </p><br><p>  Meine Idee war, dass Sie drei weitere Prozessoren hinzufügen könnten, die die Verarbeitung ihrer Farbkomponente auf jeden von ihnen übertragen.  Die empfangenen Daten aus dem eigenen Videospeicher jedes Prozessors sollten integriert werden und einen YRGB-Wert <strong>für jedes Pixel bilden</strong> .  Standardfarbattribute werden ignoriert.  Die parallele Verarbeitung von Informationen sollte sicherstellen, dass keine Leistungseinbußen auftreten. </p><br><p><img src="https://habrastorage.org/webt/fs/g3/yc/fsg3ycbdz2wwt7ysrtsfpeyms1a.png" alt="Farbschema in ZX-Poly 256x192"></p><br><p>  Ich kann nicht sagen, dass die Idee originell war, da sie von der Lektüre des Übersetzungsbuchs "The Computer Gains Mind" (Mir Publishing House, 1990) inspiriert wurde, in dem eine bestimmte in Lucasfilm entwickelte Pixar-Grafikplattform beschrieben wurde.  Und laut <abbr title="Die Theorie der erfinderischen Problemlösung (TRIZ) ist eine Reihe von Methoden zur Lösung technischer Probleme und zur Verbesserung technischer Systeme">TRIZ ist</abbr> es nur ein Übergang von einem Monosystem zu einem Polysystem. </p><br><p><img src="https://habrastorage.org/webt/lg/7d/1k/lg7d1ktwhzyxrnzzwt2yljv8qaw.png" alt="Abschnitt der Seite aus dem Buch &quot;The Computer Gains Mind&quot;"></p><br><p>  Eine sehr schmerzhafte Frage für jede Entwicklung - und wer wird das Programm schreiben?  (Insbesondere die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sprinter-</a> Plattform stieß auf diese "Falle").  In meinem Fall wurde das Problem mit der Software automatisch dadurch behoben, dass sehr selten vorhandene Programme überprüften, welche Art von Daten sie im Videospeicher aufzeichneten, und einfach mit ihnen „wie ein Postbote mit einem versiegelten Brief“ arbeiteten.  Nach meinen Berechnungen stellte sich heraus, dass die meisten vorhandenen Spieleprogramme die Anpassung ihrer Videodaten ohne Änderungen im ausführbaren Code problemlos überstehen konnten.  Natürlich wurden Spiele mit einem Paket von Grafiken oder internen Optimierungen in der Ausgabe auf dem Bildschirm abgeschnitten.  Die Anpassung solcher Programme würde die Erforschung und Änderung des ausführbaren Codes erfordern.  Die Entwicklung spezialisierter ROMs war überhaupt nicht erforderlich. </p><br><p>  Ich denke, dass dieses Konzept auf jede alte Haushaltsplattform (z. B. AGAT, Radio86RK, BK-0010 usw.) anwendbar ist, bei der es keinen dedizierten Videobeschleuniger gibt und der Prozessor direkt mit dem Videospeicher arbeitet, um ein Bild zu erstellen. </p><br><p>  In der ersten Version des Emulators habe ich gerade vier ZX-Spectrum 48s synchron arbeiten lassen. Was auf dem Emulator jedoch einfach zu simulieren ist, lässt sich auf echter Hardware nur sehr schwer wiederholen.  Es ist ziemlich schwierig, das Laden von Daten in vier Computermodule sicherzustellen und einen synchronen Start von derselben Adresse aus durchzuführen.  Eine ähnliche Lösung, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spec256</a> , wird für diese spezialisierte virtuelle 64-Bit- <abbr title="Einzelbefehl, mehrere Daten - Einzelbefehlsstrom, Mehrfachdatenstrom">SIMD</abbr> Z80 eingeführt, die es in der Natur nicht gibt.  Als Teil einer realistischeren (und komplexeren) Lösung für dieses Problem wurde die ZX-Poly-Plattform gebildet. </p><br><h1 id="ot-cvetorasshiritelya-k-zx-poly">  Vom „Color Extender“ zum ZX-Poly </h1><br><h2 id="processornye-moduli">  Prozessormodule </h2><br><p>  ZX-Poly ist eine Computerplattform, die auf dem ZX-Spectrum 128 basiert und vier Prozessormodule enthält.  Jedes Modul verfügt über eigene extern sichtbare adressierbare System-E / A-Ports.  Obwohl die Prozessormodule die Systemsteuersignale (RESET, NMI, CLK und INT) gemeinsam nutzen, arbeiten sie unabhängig voneinander. </p><br><p><img src="https://habrastorage.org/webt/9r/na/nt/9rnantil7npmty1cnmtip6hdxvg.png" alt="Blockdiagramm"></p><br><p>  Abhängig vom Index des Moduls gibt es eine bestimmte Rangfolge - je kleiner der Index, desto höher der Rang, "Modul 0" ist Master im System.  Der Schreibzugriff auf die Systemports des Moduls ist nur für Module mit demselben oder einem höheren Rang zulässig. Es gibt keine Leseeinschränkungen.  Dies geschah, weil über die Entwicklung eines speziellen Betriebssystems nachgedacht wurde. </p><br><p><img src="https://habrastorage.org/webt/hz/wg/l9/hzwgl9ajm1vcyx_cycpsmh8c3uk.png" alt="Rangfolge der Module"></p><br><p>  Ein sehr wichtiges Detail ist, dass alle verwendeten Prozessorgeräte vom selben Hersteller sein müssen (und es wäre schön, eine Produktionsserie zu haben), da der geringste Unterschied in ihrer internen Organisation oder Optimierung die Konsistenz des Systems verletzen kann. </p><br><p>  Unmittelbar nach dem Start des Systems wird nur das Master-Modul (CPU0) gestartet, die restlichen Module befinden sich im WAIT-Modus, sodass für den Benutzer alles unbemerkt bleibt. </p><br><p>  Im E / A-Bereich fügt ZX-Poly die folgenden Ports zum Schreiben und Lesen hinzu: </p><br><ul><li>  Hauptkonfigurationsport $ 3D00 </li><li>  Modul 0 - $ 00FF, $ 10FF, $ 20FF, $ 30FF </li><li>  Modul 1 - $ 01FF, $ 11FF, $ 21FF, $ 31FF </li><li>  Modul 2 - $ 02FF, $ 12FF, $ 22FF, $ 32FF </li><li>  Modul 3 - $ 03FF, $ 13FF, $ 23FF, $ 33FF </li></ul><br><p>  Der Hauptkonfigurationsport für ZX-Poly ist $ 3D00.  Nur das Master-Modul kann darauf schreiben, es steht jedoch allen Modulen zum Lesen zur Verfügung, und jede seiner eigenen speziellen Informationen wird zurückgegeben.  Insbesondere kann ein Modul seinen Index herausfinden, ob sein Speicher den E / A-Ports des Hauptmoduls zugeordnet ist, den Versatz seines Speichers im Heap usw.  Auch der Konfigurationsport der Basisplattform $ 7FFD wurde geringfügig geändert, wobei im Original nicht verwendete Bits verwendet werden. </p><br><h2 id="pamyat">  Die Erinnerung </h2><br><p>  Wie in der ursprünglichen Architektur des ZX-Spectrum 128 gibt es ROM und RAM.  Wenn sich die Organisation und die Arbeit mit dem ROM praktisch nicht geändert haben, hat sich der RAM in einen gemeinsamen „Heap“ von 512 KB verwandelt, in dem jeder Prozessor mit einem dedizierten 128-KB-Fenster arbeitet (dies sind 8 Seiten mit 16 KB im ZX-Spectrum 128).  Der Fensterversatz kann in Schritten von 64 KB geändert werden, und alle Prozessormodule können so projiziert werden, dass sie mit einem vollständig oder teilweise überlappenden Speicherelement im Heap arbeiten.  Das ROM kann deaktiviert werden und die RAM0-RAM-Seite wird an ihrer Stelle verbunden (dies ermöglicht es Ihnen, eine "Vollfarben" -Version des Basisbetriebssystems zu erstellen, z. B. einen Basisinterpreter).  Nach einem Hardware-RESET erhalten alle Module automatische Offsets, um Speicherfenster im Heap zu trennen. </p><br><p>  Der Prozessormodul-Master (CPU0) kann die Adressräume anderer Module (CPU1-3) auf den Bereich seiner E / A-Ports abbilden.  Das heißt,  Er kann auf den Port schreiben, den Status der Speicherzelle eines bestimmten Moduls ändern und gleichzeitig ein NMI-Signal auf einem zugeordneten Modul erzeugen.  Beim Lesen aus Speicherzellen eines zugeordneten Moduls ist eine INT-Generierung möglich.  Dies wurde durchgeführt, um virtuelle Geräte mit den Modulen 1-3 zu emulieren. </p><br><h2 id="video-kontroller">  Videocontroller </h2><br><p>  Die Hauptkirsche ist natürlich ein Videocontroller, alles wurde dafür gestartet.  Insgesamt unterstützt die Plattform fünf Videomodi. </p><br><h3 id="video-rezhimy-zx-spectrum-128-mode-0123">  ZX-Spectrum 128-Videomodi (Modus 0,1,2,3) </h3><br><p>  Diese Videomodi sind unauffällig und unterscheiden sich überhaupt nicht vom Standard-Videomodus ZX-Spectrum 128. Die aktuelle Videoseite des ausgewählten Prozessormoduls mit Attributfarbe wird angezeigt.  Unmittelbar nach dem Start des Systems wird der Modus 0 aktiviert, d.h.  Die Videoseite des Master-Moduls (CPU0) wird angezeigt. </p><br><p><img src="https://habrastorage.org/webt/1f/lk/vn/1flkvncwify4gom7fmw2zp-i77c.png" alt="ATW2 im Standard-ZX-Modus"></p><br><h3 id="zx-poly-256x192-mode-4">  ZX-Poly 256x192 (Modus 4) </h3><br><p>  Dieser Videomodus verwendet überhaupt keine Daten aus dem Attributbereich.  Das Pixelbit jedes Moduls wird mit Pixeldaten von anderen Modulen kombiniert und die erzeugten vier Bits werden verwendet, um ein YRGB-Signal mit Farbhelligkeit zu erzeugen. </p><br><p>  Jedes Modul ist für seine Komponente verantwortlich: </p><br><ul><li>  Modul 0 (Master) für Grün (grün). </li><li>  Modul 1 für Rot (rot) </li><li>  Modul 2 für Blau (blau) </li><li>  Modul 3 für Helligkeit </li></ul><br><p><img src="https://habrastorage.org/webt/gy/kw/jx/gykwjxvnd5r_4967oxnlgo2z8gs.gif" alt="kolorierte Version"></p><br><p>  Wenn Sie in diesem Modus ein nicht angepasstes Spiel starten, ist es einfach schwarzweiß. <br><img src="https://habrastorage.org/webt/jt/_i/s4/jt_is4xsowghhld2aimz0dnpplc.png" alt="nicht angepasstes Spiel"></p><br><h3 id="zx-poly-256x192-s-maskirovaniem-po-inkpaper-mode-6">  ZX-Poly 256x192 mit Maskierung durch INK + PAPER (Modus 6) </h3><br><p>  Wie beim vorherigen bietet es 16 Farben für jeden Punkt, aber es gibt einen „Trick“.  In einigen ZX-Spectrum-Programmen werden grafische Elemente mit den identischen INK- und PAPER-Werten in den Attributen ausgeblendet, insbesondere in Scroller-Spielen.  Wenn Sie diese Möglichkeit entfernen, sammeln sich die grafischen Elemente auf dem Bildschirm an und brechen das Bild.  Daher wird der Status von INK und PAPER anhand des Attributs des aus dem Videospeicher (CPU0) gelesenen Mastermoduls analysiert. Wenn sie identisch sind, werden alle Punkte mit der Farbe aus INK / PAPER hervorgehoben (natürlich unter Berücksichtigung der Helligkeit). </p><br><p><img src="https://habrastorage.org/webt/ol/sy/26/olsy265bag3_dg_bnxl-grzsjlq.gif"></p><br><h3 id="zx-poly-256x192-s-maskirovaniem-po-flashinkpaper-mode-7">  ZX-Poly 256x192 mit Maskierung durch FLASH + INK + PAPER (Modus 7) </h3><br><p>  Modus ist eine Kombination aus Modus 4 und Modus 6. Für die lesbaren Attribute des Master-Moduls (CPU0) wird das FLASH-Bit analysiert und wenn es gesetzt ist (was bei dynamischen Spielen auf dem Spielfeld selten ist), wird im Modus 6-Modus ein 8 x 8-Pixel-Block ausgegeben ( mit Maskierung mit identischer TINTE und PAPIER).  Wenn FLASH zurückgesetzt wird, wird der Block wie bei einem normalen ZX-Spectrum angezeigt.  Das FLASH-Bit wird nicht in seiner direkten Rolle geübt und es wird nicht geblinkt. <br>  Dieser Modus ist sehr praktisch, um zu vermeiden, dass Spielinformationsfelder und einige Effekte im Spiel neu gestrichen werden (z. B. wenn Spieleentwickler durch Attribute auf dem Spielfeld blinken). </p><br><p><img src="https://habrastorage.org/webt/cs/fr/cv/csfrcvh0rtury8g_9g20t1xoecm.gif" alt="Animierter angepasster fliegender Hai"></p><br><h3 id="zx-poly-512x384-s-atributami-mode-5">  ZX-Poly 512x384 mit Attributen (Modus 5) </h3><br><p>  Attribute werden fast wie auf der ursprünglichen Plattform verwendet, ohne Änderungen (sogar das FLASH-Bit).  Die Videopixeldaten jedes Moduls werden mit einem Attribut aus dem Videospeicher dieses Moduls eingefärbt und nach Durchlaufen der Färbung in einem Schachbrettmuster angezeigt, wodurch ein Vertrautheitsblock 16 mal 16 Punkte beträgt. </p><br><p><img src="https://habrastorage.org/webt/5i/gv/cl/5igvcljru-gbuybss377ujcbbr0.png" alt="Schachbildung"></p><br><p>  In diesem Modus können Sie die Auflösung von Anwendungen verdoppeln, ohne den ausführbaren Code zu ändern.  Experimente mit demselben Spiel „Pinocchio“ haben zwar gezeigt, dass bei hellen Spielen mit großen Details der Effekt kaum spürbar ist.  Da es sich um virtuelle Pixel handelt, wissen die Spiele nichts darüber und die minimal mögliche Bewegung von Spielelementen liegt auf der Ebene von zwei virtuellen Pixeln.  Ich denke, dass dieser Modus gut für Spiele mit kleinen Spielobjekten an einem vertrauten Ort ist. </p><br><p><img src="https://habrastorage.org/webt/o4/25/hk/o425hkbmpkl00uju8aaon-_siui.png" alt="Beispiel des Spiels &quot;Pinocchio&quot;"></p><br><p>  Ein viel besserer Effekt in diesem Videomodus wurde bei Textanwendungen erzielt, beispielsweise im ZX-Word-Texteditor, bei dem die Schriftart ohne Änderungen im ausführbaren Code verarbeitet wurde. </p><br><p><img src="https://habrastorage.org/webt/xd/ol/li/xdollinm5mle6snma7prgemgyyw.gif" alt="angepasstes ZX-Word"></p><br><h2 id="mnogozadachnost">  Multitasking </h2><br><p>  Trotz der Tatsache, dass die Prozessoren im System dieselbe Quelle von Steuersignalen verwenden, arbeiten sie unabhängig voneinander.  Das System kann nicht als vollwertige <abbr title="Single Instruction, Multiple Data -   ,   ">SIMD bezeichnet werden</abbr> , da jeder Prozessor Befehle aus seinem eigenen Speicherblock verarbeitet und einfach die Möglichkeit nutzt, dieselben Befehle "abzustreifen".         ,  "  "        —  . </p><br><p><img src="https://habrastorage.org/webt/gp/yg/5k/gpyg5khuq7hn9jvvbgny5hddqrs.png" alt=" "></p><br><p>          ,     ,         "".  ,     . </p><br><h2 id="mehanizmy-sinhronizacii">   </h2><br><h3 id="lokalnyy-reset">  RESET </h3><br><p>       RESET    ,            .     JP ADDR          . </p><br><h3 id="stop-adres"> - </h3><br><p>       master- (CPU0).       ,      (   M1),      <strong></strong>  WAIT,                RESET.       ,   ,   16     . </p><br><h1 id="emulyator-sistemy">   </h1><br><p>  2007  JavaSE     .        Z80 (      -)  FDD  181893.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JDK 1.8+</a> . </p><br><p><img src="https://habrastorage.org/webt/0m/qa/rp/0mqarpebzf0p9ewtwkojknscb_u.png" alt=" "></p><br><p>            ZX-Spectrum        ,  80%   ,    .         ZX-Spectrum 128,      <strong>Options-&gt;ZX 128 Mode</strong> ,    ZX-Poly      . </p><br><p>       -,    ZX-Spectrum —   .      ,    <strong>File-&gt;Options</strong> </p><br><p><img src="https://habrastorage.org/webt/re/3a/er/re3aerw3r_zksnkvghxn35u3n2w.gif" alt="ZX-Poly test ROM"></p><br><p>     -  ,     .           ,         . </p><br><p>   ,           .    TAP  TR-DOS   . </p><br><p><img src="https://habrastorage.org/webt/_o/py/bv/_opybvhjgijkprgwb2lyaipdpy4.gif" alt="  "></p><br><p>       (   Java)    . </p><br><p><img src="https://habrastorage.org/webt/3b/dg/fa/3bdgfacgkovaenmlf1ewkcoiriw.png" alt="ZX-Poly  "></p><br><p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GNU GPLv3</a> . </p><br><p> <a href=""><img src="https://habrastorage.org/webt/xr/1n/zx/xr1nzxg1xx9xmbv0hzgdas_dmu4.png"></a> <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472232/">https://habr.com/ru/post/de472232/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472222/index.html">"Lesen, wenn Sie gerne zuhören": Bücher für diejenigen, denen Musik nicht gleichgültig ist - von Klassik bis Hip-Hop</a></li>
<li><a href="../de472224/index.html">Mit dem neuen NVMe SSD als Boot - Laufwerk auf älteren Systemen mit Legacy - BIOS (für jedes OS)</a></li>
<li><a href="../de472226/index.html">Verbessern der Formularsteuerung in Microsoft Edge und Chromium</a></li>
<li><a href="../de472228/index.html">9 Tricks zum Arbeiten mit Visual Studio-Code</a></li>
<li><a href="../de472230/index.html">Chips für ML - sprechen Sie über neue Produkte</a></li>
<li><a href="../de472234/index.html">Kryptowährung: Ist es immer noch ein Freeloader oder ein Partner?</a></li>
<li><a href="../de472240/index.html">Über Gamification. Was ist das, warum und wie geht das? Entwickler-Look</a></li>
<li><a href="../de472242/index.html">Wir haben den Tokio-Scheduler zehnmal beschleunigt</a></li>
<li><a href="../de472246/index.html">Reagieren + IndexDb + Auto-Update = fast AsyncRedux</a></li>
<li><a href="../de472248/index.html">Wie wir das Programmier-IT-Planet-Finale zusammengeführt haben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>