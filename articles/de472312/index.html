<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç∏ üìå üï∂Ô∏è Erfahrung in der √úbertragung eines Maven-Projekts auf Multi-Release Jar: bereits m√∂glich, aber immer noch schwierig ü§õüèΩ üîº ‚úãüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich habe eine kleine StreamEx- Bibliothek, die die Java 8 Stream-API erweitert. Ich sammle die Bibliothek traditionell √ºber Maven und bin gr√∂√ütenteils...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erfahrung in der √úbertragung eines Maven-Projekts auf Multi-Release Jar: bereits m√∂glich, aber immer noch schwierig</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472312/"><p>  Ich habe eine kleine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">StreamEx-</a> Bibliothek, die die Java 8 Stream-API erweitert.  Ich sammle die Bibliothek traditionell √ºber Maven und bin gr√∂√ütenteils mit allem zufrieden.  Ich wollte jedoch experimentieren. </p><br><p> Einige Dinge in der Bibliothek sollten in verschiedenen Java-Versionen unterschiedlich funktionieren.  Das auff√§lligste Beispiel sind die neuen Stream-API-Methoden wie <code>takeWhile</code> , die nur in Java 9 <code>takeWhile</code> waren. Meine Bibliothek bietet eine Implementierung dieser Methoden auch in Java 8, aber wenn Sie die Stream-API selbst erweitern, <code>takeWhile</code> Sie einigen Einschr√§nkungen, die ich hier nicht erw√§hne.  Ich w√ºnschte, Java 9+ Benutzer h√§tten Zugriff auf eine Standardimplementierung. </p><a name="habracut"></a><br><p>  Damit das Projekt mit Java 8 weiter kompiliert werden kann, erfolgt dies normalerweise mithilfe von Reflection-Tools: Wir finden heraus, ob die Standardbibliothek eine entsprechende Methode enth√§lt, und rufen sie in diesem Fall auf. Andernfalls verwenden wir unsere Implementierung.  Ich habe mich jedoch f√ºr die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MethodHandle-API entschieden</a> , da sie weniger <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufrufaufwand</a> deklariert.  Sie k√∂nnen <code>MethodHandle</code> im Voraus <code>MethodHandle</code> und in einem statischen Feld speichern: </p><br><pre> <code class="java hljs">MethodHandles.Lookup lookup = MethodHandles.publicLookup(); MethodType type = MethodType.methodType(Stream.class, Predicate.class); MethodHandle method = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { method = lookup.findVirtual(Stream.class, <span class="hljs-string"><span class="hljs-string">"takeWhile"</span></span>, type); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (NoSuchMethodException | IllegalAccessException e) { <span class="hljs-comment"><span class="hljs-comment">// ignore }</span></span></code> </pre> <br><p>  Und dann benutze es: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (method != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (Stream&lt;T&gt;)method.invokeExact(stream, predicate); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Java 8 polyfill }</span></span></code> </pre> <br><p>  Das ist alles gut, aber es sieht h√§sslich aus.  Und am wichtigsten ist, dass Sie an jedem Punkt, an dem eine Variation der Implementierungen m√∂glich ist, solche Bedingungen schreiben m√ºssen.  Ein etwas alternativer Ansatz besteht darin, die Strategien von Java 8 und Java 9 als Implementierung derselben Schnittstelle zu trennen.  Um die Gr√∂√üe der Bibliothek zu speichern, implementieren Sie einfach alles f√ºr Java 8 in einer separaten, nicht endg√ºltigen Klasse und ersetzen Sie Java 9 durch einen Erben.  Es wurde ungef√§hr so ‚Äã‚Äãgemacht: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    Internals static final VersionSpecific VER_SPEC = System.getProperty("java.version", "").compareTo("1.9") &gt; 0 ? new Java9Specific() : new VersionSpecific();</span></span></code> </pre> <br><p>  Dann k√∂nnen Sie an Verwendungspunkten einfach <code>return Internals.VER_SPEC.takeWhile(stream, predicate)</code> schreiben.  Die ganze Magie mit Methodenhandles ist jetzt nur in der <code>Java9Specific</code> Klasse.  Dieser Ansatz speicherte √ºbrigens die Bibliothek f√ºr Android-Benutzer, die sich zuvor dar√ºber beschwert hatten, dass dies im Prinzip nicht funktioniert.  Die virtuelle Android-Maschine ist kein Java, sie implementiert nicht einmal die Java 7-Spezifikation. Insbesondere gibt es keine Methoden mit einer polymorphen Signatur wie <code>invokeExact</code> , und das Vorhandensein dieses Aufrufs im Bytecode bricht alles.  Jetzt werden diese Aufrufe in eine Klasse gestellt, die niemals initialisiert wird. </p><br><p>  All dies ist jedoch immer noch h√§sslich.  Eine sch√∂ne L√∂sung (zumindest theoretisch) ist die Verwendung des Multi Release Jar, das mit Java 9 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JEP-238</a> ) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">geliefert wurde</a> .  Dazu muss ein Teil der Klassen unter Java 9 kompiliert und die Klassendateien in <code>META-INF/versions/9</code> in der Jar-Datei abgelegt werden.  Au√üerdem m√ºssen Sie dem Manifest die Zeile <code>Multi-Release: true</code> hinzuf√ºgen.  Dann ignoriert Java 8 dies alles erfolgreich und Java 9 und neuere laden neue Klassen anstelle von Klassen mit denselben Namen, die sich an der √ºblichen Stelle befinden. </p><br><p>  Das erste Mal habe ich dies vor mehr als zwei Jahren versucht, kurz vor der Ver√∂ffentlichung von Java 9. Es war sehr schwierig und ich habe aufgeh√∂rt.  Es war schon schwierig, das Projekt mit dem Java 9-Compiler zu kompilieren: Viele Maven-Plugins brachen einfach aufgrund ge√§nderter interner APIs, ge√§nderter <code>java.version</code> Zeichenfolgenformate oder etwas anderem. </p><br><p>  Ein neuer Versuch in diesem Jahr war erfolgreicher.  Plugins wurden gr√∂√ütenteils aktualisiert und funktionieren im neuen Java recht gut.  Im ersten Schritt habe ich die gesamte Assembly in Java 11 √ºbersetzt. Dazu musste ich neben der Aktualisierung der Plugin-Versionen Folgendes tun: </p><br><ul><li>  √Ñndern Sie in JavaDoc <code>package-info.java</code> Links des Formulars <code>&lt;a name="..."&gt;</code> zu <code>&lt;a id="..."&gt;</code> .  Andernfalls beschwert sich JavaDoc. </li><li>  Geben Sie im maven-javadoc-plugin <code>additionalOptions = --no-module-directories</code> an.  Ohne dies gab es seltsame Fehler bei den JavaDoc-Suchfunktionen: Verzeichnisse mit Modulen wurden ohnehin nicht erstellt, aber beim Wechsel zum Suchergebnis wurde <code>/undefined/</code> zum Pfad hinzugef√ºgt (Hallo, JavaScript).  Diese Funktion in Java 8 war √ºberhaupt nicht verf√ºgbar, daher hat meine Aktivit√§t bereits ein sch√∂nes Ergebnis gebracht: JavaDoc ist zu einer Suche geworden. </li><li>  Korrigieren Sie das Plugin zum Ver√∂ffentlichen von Testergebnissen in Overalls ( <code>coveralls-maven-plugin</code> ).  Aus irgendeinem Grund wird es aufgegeben, was seltsam ist, da Coveralls alleine lebt und kommerzielle Dienstleistungen anbietet.  Die vom Plugin verwendete jaxb-api ist aus Java 11 verschwunden.  Gl√ºcklicherweise ist es nicht schwierig, das Problem mit Maven-Tools zu beheben: Es reicht aus, die Abh√§ngigkeit vom Plugin explizit zu registrieren: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.eluder.coveralls<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>coveralls-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>4.3.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>javax.xml.bind<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jaxb-api<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.2.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li></ul><br><p>  Der n√§chste Schritt war die Anpassung der Tests.  Da das Bibliotheksverhalten in Java 8 und Java 9 offensichtlich unterschiedlich ist, w√§re es logisch, Tests f√ºr beide Versionen auszuf√ºhren.  Jetzt f√ºhren wir alles unter Java 11 aus, sodass Java 8-spezifischer Code nicht getestet wird.  Dies ist ein ziemlich gro√üer und nicht trivialer Code.  Um dies zu beheben, habe ich einen k√ºnstlichen Stift hergestellt: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> VersionSpecific VER_SPEC = System.getProperty(<span class="hljs-string"><span class="hljs-string">"java.version"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>).compareTo(<span class="hljs-string"><span class="hljs-string">"1.9"</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; !Boolean.getBoolean(<span class="hljs-string"><span class="hljs-string">"one.util.streamex.emulateJava8"</span></span>) ? <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Java9Specific() : <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VersionSpecific();</code> </pre> <br><p>  <code>-Done.util.streamex.emulateJava8=true</code> jetzt einfach <code>-Done.util.streamex.emulateJava8=true</code> wenn Sie die Tests <code>-Done.util.streamex.emulateJava8=true</code> <br>  <code>maven-surefire-plugin</code> zu testen, was normalerweise in Java 8 <code>maven-surefire-plugin</code> <code>argLine = -Done.util.streamex.emulateJava8=true</code> Konfiguration des <code>maven-surefire-plugin</code> mit <code>argLine = -Done.util.streamex.emulateJava8=true</code> einen neuen <code>&lt;execution&gt;</code> -Block <code>argLine = -Done.util.streamex.emulateJava8=true</code> , und die Tests bestehen zweimal. </p><br><p>  Ich m√∂chte jedoch die Gesamtabdeckungstests ber√ºcksichtigen.  Ich benutze JaCoCo, und wenn Sie ihm nichts sagen, √ºberschreibt der zweite Lauf einfach die Ergebnisse des ersten.  Wie funktioniert JaCoCo?  Zuerst wird das Prepare <code>prepare-agent</code> Ziel ausgef√ºhrt, das die argLine Maven-Eigenschaft <code>-javaagent:blah-blah/.m2/org/jacoco/org.jacoco.agent/0.8.4/org.jacoco.agent-0.8.4-runtime.jar=destfile=blah-blah/myproject/target/jacoco.exec</code> etwas wie <code>-javaagent:blah-blah/.m2/org/jacoco/org.jacoco.agent/0.8.4/org.jacoco.agent-0.8.4-runtime.jar=destfile=blah-blah/myproject/target/jacoco.exec</code> .  Ich m√∂chte, dass zwei verschiedene Exec-Dateien gebildet werden.  Sie k√∂nnen es auf diese Weise hacken.  F√ºgen Sie <code>destFile=${project.build.directory}</code> Konfiguration <code>destFile=${project.build.directory}</code> <code>prepare-agent</code> .  Rau aber effektiv.  Jetzt <code>argLine</code> mit <code>argLine</code> <code>blah-blah/myproject/target</code> .  Ja, dies ist √ºberhaupt keine Datei, sondern ein Verzeichnis.  Wir k√∂nnen den Dateinamen jedoch bereits zu Beginn der Tests ersetzen.  Wir kehren zum <code>maven-surefire-plugin</code> und setzen <code>argLine = @{argLine}/jacoco_java8.exec -Done.util.streamex.emulateJava8=true</code> f√ºr den Java 8-Lauf und <code>argLine = @{argLine}/jacoco_java11.exec</code> f√ºr den Java 11-Lauf.  Dann ist es einfach, diese beiden Dateien mithilfe des <code>merge</code> zu kombinieren, das auch das JaCoCo-Plugin bereitstellt, und wir erhalten die Gesamtabdeckung. </p><br><p>  <strong>Update:</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">godin</a> in den Kommentaren sagte, dass es unn√∂tig war, Sie k√∂nnen in eine Datei schreiben, und es wird automatisch das Ergebnis mit der vorherigen kleben.  Jetzt bin ich mir nicht sicher, warum dieses Szenario anfangs bei mir nicht funktioniert hat. </p><br><p>  Nun, wir sind gut vorbereitet, auf das Multi-Release-Glas umzusteigen.  Ich habe eine Reihe von Empfehlungen dazu gefunden.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Das erste</a> schlug die Verwendung eines multimodularen Maven-Projekts vor.  Ich habe keine Lust dazu: Dies ist eine gro√üe Komplikation der Projektstruktur: Es gibt zum Beispiel f√ºnf pom.xml.  F√ºr ein paar Dateien herumzuspielen, die in Java 9 kompiliert werden m√ºssen, scheint √ºbertrieben.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ein anderer</a> schlug vor, die Kompilierung √ºber das <code>maven-antrun-plugin</code> .  Hier habe ich beschlossen, nur als letzten Ausweg zu suchen.  Es ist klar, dass jedes Problem in Maven mit Ant gel√∂st werden kann, aber das ist irgendwie ziemlich ungeschickt.  Schlie√ülich sah ich eine Empfehlung zur Verwendung eines <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Multi-Release-Jar-Maven-Plugin-Plugins</a> eines Drittanbieters.  Es klang schon lecker und richtig. </p><br><p>  Das Plugin empfiehlt, Quellcodes, die f√ºr neue Java-Versionen spezifisch sind, in Verzeichnissen wie <code>src/main/java-mr/9</code> , was ich auch getan habe.  Ich habe mich immer noch entschlossen, Kollisionen in den Klassennamen maximal zu vermeiden. Daher habe ich als einzige Klasse (sogar die Schnittstelle), die sowohl in Java 8 als auch in Java 9 vorhanden ist, Folgendes: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Java 8 package one.util.streamex; /* package */ interface VerSpec { VersionSpecific VER_SPEC = new VersionSpecific(); } // Java 9 package one.util.streamex; /* package */ interface VerSpec { VersionSpecific VER_SPEC = new Java9Specific(); }</span></span></code> </pre> <br><p>  Die alte Konstante zog an einen neuen Ort, aber nichts anderes √§nderte sich wirklich.  Erst jetzt ist die <code>Java9Specific</code> Klasse viel einfacher geworden: Alle Squats mit MethodHandle wurden erfolgreich durch direkte Methodenaufrufe ersetzt. </p><br><p>  Das Plugin verspricht Folgendes: </p><br><ul><li>  Ersetzen Sie das Standard- <code>maven-compiler-plugin</code> und kompilieren Sie in zwei Schritten mit einer anderen Zielversion. </li><li>  Ersetzen Sie das Standard <code>maven-jar-plugin</code> das <code>maven-jar-plugin</code> und <code>maven-jar-plugin</code> Kompilierungsergebnis mit den richtigen Pfaden. </li><li>  F√ºgen Sie die Zeile <code>Multi-Release: true</code> zu <code>MANIFEST.MF</code> . </li></ul><br><p>  Damit es funktioniert, waren einige Schritte erforderlich. </p><br><ol><li><p>  √Ñndern Sie die Verpackung von <code>jar</code> zu <code>multi-release-jar</code> . </p><br></li><li><p>  Build-Erweiterung hinzuf√ºgen: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>pw.krejci<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>multi-release-jar-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>0.1.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li><p>  Kopieren Sie die Konfiguration vom <code>maven-compiler-plugin</code> .  Ich hatte nur die Standardversion im Sinne von <code>&lt;source&gt;1.8&lt;/source&gt;</code> und <code>&lt;arg&gt;-Xlint:all&lt;/arg&gt;</code> </p><br></li><li><p>  Ich dachte, dass das <code>maven-compiler-plugin</code> jetzt entfernt werden kann, aber es stellte sich heraus, dass das neue Plugin die Kompilierung von Tests nicht ersetzt. <code>-Xlint:all</code> die Java-Version auf den Standardwert (1.5!) <code>-Xlint:all</code> Und das Argument <code>-Xlint:all</code> verschwand.  Also musste ich gehen. </p><br></li><li><p>  Um die Quelle und das Ziel f√ºr die beiden Plugins nicht zu duplizieren, habe ich herausgefunden, dass beide die Eigenschaften von <code>maven.compiler.source</code> und <code>maven.compiler.target</code> .  Ich habe sie installiert und die Versionen aus den Plugin-Einstellungen entfernt.  Es stellte sich jedoch pl√∂tzlich heraus, dass das <code>maven-javadoc-plugin</code> die <code>source</code> aus den Einstellungen des <code>maven-compiler-plugin</code> verwendet, um die URL des Standard-JavaDoc herauszufinden, die verkn√ºpft werden muss, wenn auf Standardmethoden verwiesen wird.  Und jetzt respektiert er <code>maven.compiler.source</code> .  Daher musste ich <code>&lt;source&gt;${maven.compiler.source}&lt;/source&gt;</code> an die Einstellungen des <code>maven-compiler-plugin</code> .  Gl√ºcklicherweise waren keine weiteren √Ñnderungen erforderlich, um JavaDoc zu generieren.  Es kann sehr gut aus Java 8-Quellen generiert werden, da das gesamte Karussell mit Versionen die Bibliotheks-API nicht beeinflusst. </p><br></li><li><p>  Das <code>maven-bundle-plugin</code> , was meine Bibliothek in ein OSGi-Artefakt verwandelt hat.  Er weigerte sich einfach, mit <code>packaging = multi-release-jar</code> .  Im Prinzip mochte ich ihn nie.  Er schreibt eine Reihe zus√§tzlicher Zeilen in das Manifest, verdirbt gleichzeitig die Sortierreihenfolge und f√ºgt mehr M√ºll hinzu.  Gl√ºcklicherweise stellte sich heraus, dass es nicht schwierig ist, alles loszuwerden, indem Sie alles, was Sie brauchen, von Hand schreiben.  Nur nat√ºrlich nicht im <code>maven-jar-plugin</code> , sondern im neuen.  Die gesamte Konfiguration des <code>multi-release-jar</code> Plugins wurde schlie√ülich so (ich habe einige Eigenschaften wie <code>project.package</code> selbst definiert): </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>pw.krejci<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>multi-release-jar-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>0.1.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">compilerArgs</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span>-Xlint:all<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">compilerArgs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifestEntries</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Automatic-Module-Name</span></span></span><span class="hljs-tag">&gt;</span></span>${project.package}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Automatic-Module-Name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-Name</span></span></span><span class="hljs-tag">&gt;</span></span>${project.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-Name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-Description</span></span></span><span class="hljs-tag">&gt;</span></span>${project.description}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-License</span></span></span><span class="hljs-tag">&gt;</span></span>${license.url}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-License</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-ManifestVersion</span></span></span><span class="hljs-tag">&gt;</span></span>2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-ManifestVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-SymbolicName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.package}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-SymbolicName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-Version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bundle-Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Export-Package</span></span></span><span class="hljs-tag">&gt;</span></span>${project.package};version="${project.version}"<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Export-Package</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifestEntries</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li><p>  Tests.  Wir haben nicht mehr <code>one.util.streamex.emulateJava8</code> , aber Sie k√∂nnen den gleichen Effekt erzielen, indem Sie die Klassenpfadtests <code>one.util.streamex.emulateJava8</code> .  Jetzt ist das Gegenteil der Fall: Standardm√§√üig arbeitet die Bibliothek im Java 8-Modus, und f√ºr Java 9 m√ºssen Sie Folgendes schreiben: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classesDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${basedir}/target/classes-9<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classesDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">additionalClasspathElements</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.outputDirectory}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">additionalClasspathElements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argLine</span></span></span><span class="hljs-tag">&gt;</span></span>@{argLine}/jacoco_java9.exec<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argLine</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Ein wichtiger Punkt: <code>classes-9</code> sollten gew√∂hnlichen Klassendateien vorausgehen, daher mussten wir die √ºblichen in <code>additionalClasspathElements</code> Klassenpfad-Elemente √ºbertragen, die anschlie√üend hinzugef√ºgt werden. </p><br></li><li><p>  Quellen.  Ich werde Source-JAR haben, und es w√§re sch√∂n, Java 9-Quellen darin zu packen, damit beispielsweise der Debugger in der IDE sie korrekt anzeigen kann.  Ich <code>VerSpec</code> mir keine gro√üen Sorgen um doppelte <code>VerSpec</code> , da es eine Zeile gibt, die nur w√§hrend der Initialisierung ausgef√ºhrt wird.  Es ist in <code>Java9Specific.java</code> , nur die Version von Java 8 zu <code>Java9Specific.java</code> . Es w√§re jedoch sch√∂n, <code>Java9Specific.java</code> als <code>Java9Specific.java</code> anzuh√§ngen.  Dies kann durch manuelles Hinzuf√ºgen eines zus√§tzlichen Quellverzeichnisses erfolgen: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.codehaus.mojo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>build-helper-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>3.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>add-source<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sou‚Äãrces</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sou‚Äãrce</span></span></span><span class="hljs-tag">&gt;</span></span>src/main/java-mr/9<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sou‚Äãrce</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sou‚Äãrces</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Nachdem ich das Artefakt gesammelt hatte, verband ich es mit einem Testprojekt und √ºberpr√ºfte es im IntelliJ IDEA-Debugger.  Alles funktioniert wunderbar: Abh√§ngig von der Version der virtuellen Maschine, mit der das Testprojekt ausgef√ºhrt wird, landen wir beim Debuggen in einer anderen Quelle. </p><br><p>  Es w√§re cool, dies mit dem Multi-Release-Jar-Plugin selbst erledigen zu lassen, also habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen</a> solchen Vorschlag gemacht. </p><br></li><li><p>  JaCoCo.  Es stellte sich heraus, dass es f√ºr ihn am schwierigsten war, und ich konnte nicht ohne fremde Hilfe auskommen.  Tatsache ist, dass das Plug-in perfekt generierte Exec-Dateien f√ºr Java-8 und Java-9 normalerweise in eine Datei geklebt hat. Beim Generieren von Berichten in XML und HTML haben sie die Quellen aus Java-9 jedoch hartn√§ckig ignoriert.  Beim St√∂bern <a href="">in der Quelle habe</a> ich festgestellt, dass nur ein Bericht f√ºr die in <code>project.getBuild().getOutputDirectory()</code> gefundenen <code>project.getBuild().getOutputDirectory()</code> .  Dieses Verzeichnis kann nat√ºrlich ersetzt werden, aber tats√§chlich habe ich zwei davon: <code>classes</code> und <code>classes-9</code> .  Theoretisch k√∂nnen Sie alle Klassen in ein Verzeichnis kopieren, das outputDirectory √§ndern und JaCoCo starten und dann das <code>outputDirectory</code> zur√ºck √§ndern, um die JAR-Assembly nicht zu besch√§digen.  Das klingt aber v√∂llig h√§sslich.  Im Allgemeinen habe ich beschlossen, die L√∂sung f√ºr dieses Problem in meinem Projekt vorerst zu verschieben, aber ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habe den</a> Jungs von JaCoCo geschrieben, dass es sch√∂n w√§re, mehrere Verzeichnisse mit Klassendateien angeben zu k√∂nnen. </p><br><p>  Zu meiner √úberraschung kam nur wenige Stunden sp√§ter einer der Entwickler von JaCoCo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">godin</a> zu meinem Projekt und brachte eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pull-Anfrage</a> , die das Problem l√∂st.  Wie entscheidet es?  Nat√ºrlich mit Ant!  Es stellte sich heraus, dass das Ant-Plugin f√ºr JaCoCo weiter fortgeschritten ist und einen zusammenfassenden Bericht f√ºr mehrere Quellverzeichnisse und Klassendateien erstellen kann.  Er brauchte nicht einmal einen separaten <code>merge</code> , da er mehrere Exec-Dateien gleichzeitig f√ºttern konnte.  Im Allgemeinen konnte Ant nicht vermieden werden, so sei es.  Die Hauptsache, die funktionierte, und pom.xml wuchs nur um sechs Zeilen. </p><br><p><img src="https://habrastorage.org/webt/-y/qd/q9/-yqdq9suyxlqtaw2d9dkjoc0rg8.png"></p><br><p>  Ich habe sogar in Herzen getwittert: </p><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1185422598810800129"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br></li></ol><br><p>  Also habe ich ein sehr funktionierendes Projekt bekommen, das ein wundersch√∂nes Multi-Release-Glas baut.  Gleichzeitig stieg der Prozentsatz der Abdeckung sogar an, da ich alle Arten von <code>catch (NoSuchMethodException | IllegalAccessException e)</code> , die in Java 9 nicht erreichbar waren. Leider wird diese Projektstruktur von IntelliJ IDEA nicht unterst√ºtzt, sodass ich den POM-Import abbrechen und das Projekt in der IDE manuell konfigurieren musste .  Ich hoffe, dass es auch in Zukunft eine Standardl√∂sung geben wird, die automatisch von allen Plugins und Tools unterst√ºtzt wird. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472312/">https://habr.com/ru/post/de472312/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472298/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 385 (14. - 20. Oktober 2019)</a></li>
<li><a href="../de472300/index.html">Stochastischer Gradientenabstieg (SGD) f√ºr die logarithmische Verlustfunktion (LogLoss) in einem bin√§ren Klassifizierungsproblem</a></li>
<li><a href="../de472304/index.html">Die NASA stellt Ingenieure ein, um humanoide Roboter der n√§chsten Generation zu entwickeln</a></li>
<li><a href="../de472306/index.html">PHP Digest Nr. 166 (7.-21. Oktober 2019)</a></li>
<li><a href="../de472310/index.html">Kundenidentifikation auf Websites ohne Passw√∂rter und Cookies: Anwendung f√ºr Standard</a></li>
<li><a href="../de472314/index.html">Ich mag Pappleute</a></li>
<li><a href="../de472318/index.html">Verteilte R√ºckverfolgung in Istio</a></li>
<li><a href="../de472320/index.html">Interview mit Zabbix: 12 offene Antworten</a></li>
<li><a href="../de472326/index.html">Unsere Raumfahrtindustrie ... Und wenn Sie die Probleme der Branche aus der Perspektive eines Geeks betrachten?</a></li>
<li><a href="../de472334/index.html">Leben durch Gutscheine oder wie wir die Arbeit der sozialen Dienste optimieren</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>