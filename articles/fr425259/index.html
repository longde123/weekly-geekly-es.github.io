<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🔬 👦🏾 👋🏾 Sauvegarder votre site en utilisant git et Makefile 🔛 🚼 😖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La traduction d'un site en un ensemble de pages Web statiques vous permet de réduire la charge sur le serveur ou même de profiter du stockage gratuit,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sauvegarder votre site en utilisant git et Makefile</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425259/"><p>  La traduction d'un site en un ensemble de pages Web statiques vous permet de réduire la charge sur le serveur ou même de profiter du stockage gratuit, ainsi que d'augmenter la fiabilité, la vitesse et la sécurité du site.  Dans cet article, je vais vous expliquer comment procéder avec les outils familiers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">git</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Makefile</a> .  Un avantage de cette approche est la possibilité de contrôler les versions du contenu des pages Web. </p><br><p>  L'article décrit comment créer des versions statiques de pages Web pour l'émission de serveur et comment les placer dans un référentiel pour le contrôle de version et la sauvegarde.  Dans le même temps, les fichiers statiques et multimédias peuvent être stockés séparément et archivés par d'autres moyens (les fichiers statiques sont généralement placés dans le référentiel du code de programme du site).  La méthode fonctionne également pour les pages avec des noms Unicode (par exemple, pour les domaines cyrilliques).  À la fin se trouve un Makefile fonctionnel. </p><br><p>  L'auteur utilise la pile django / uwsgi / nginx, un serveur dédié virtuel exécutant GNU / Linux, mais le contenu de l'article est presque indépendant de technologies spécifiques. </p><a name="habracut"></a><br><h3 id="zagruzhaem-stranicy">  Chargement des pages </h3><br><p>  Nous enregistrerons les pages du site à l'aide du programme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">wget</a> standard.  Nous enregistrerons chaque site dans un annuaire distinct (qui peut ne pas être associé au nom de domaine du site). </p><br><p>  Dans chaque répertoire, les pages seront enregistrées de manière récursive à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'</a> aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la touche wget</a> <em>-r</em> (on suppose que toutes les pages sont accessibles via des liens depuis la page principale).  Par défaut, la copie récursive monte au niveau 5, mais cela peut être modifié à l'aide du commutateur <em>-l</em> . </p><br><p>  Si nous stockons les fichiers multimédias et statiques séparément des pages de texte, les répertoires correspondants sont ignorés avec le commutateur <em>-X</em> . </p><br><p>  La commande complète ressemble à ceci: </p><br><pre><code class="bash hljs">mkdir primer <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> primer wget -r -nH -X ,static --restrict-file-names=nocontrol .</code> </pre> <br><p>  <em>-nH</em> signifie <em>--no</em> <em>-host-directory</em> .  Par défaut, <em>wget -r example.com</em> mettra tout dans le répertoire <em>example.com/</em> , et cette option annule la création du répertoire avec le nom d'hôte. </p><br><p>  L'option <em>--restrict-file-names</em> indique l'échappement de caractères dans l'URL lors de la création de fichiers locaux.  Une valeur de <em>nocontrol</em> signifie la désactivation de l'échappement et est très importante pour enregistrer des pages avec des liens cyrilliques.  Sans cela, les pages sont enregistrées dans des fichiers avec des noms légèrement modifiés, et il n'est pas tout à fait clair comment les envoyer au serveur.  Malheureusement pour les utilisateurs de Windows, <em>--restrict-file-names = nocontrol</em> ne fonctionnera pas pour eux, il s'agit d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">problème</a> connu. </p><br><h3 id="dobavlyaem-v-git">  Ajouter à git </h3><br><p>  Un nouveau référentiel est créé à l'aide de la commande <em>git init</em> .  Par défaut, il est créé dans le répertoire courant du dossier .git, mais nous voulons que le serveur n'ait accès qu'aux fichiers qui correspondent aux noms des pages ouvertes du site.  Par conséquent, la commande complète qui crée un référentiel propre (nu) dans le dossier ../.git-primer ressemble à ceci: </p><br><pre> <code class="bash hljs">git init --bare ../.git-primer</code> </pre> <br><p>  Pour continuer à utiliser ce référentiel non standard, vous devez passer à git les options <em>git-dir</em> et <em>work-tree</em> : </p><br><pre> <code class="bash hljs">git --git-dir=../.git-primer --work-tree=. add .</code> </pre> <br><h3 id="pishem-makefile">  Écrire un Makefile </h3><br><p>  Commençons par l'annonce de nos projets: </p><br><pre> <code class="hljs mel">SITES := example primer all : $(SITES) .PHONY : $(SITES)</code> </pre> <br><p>  La variable <em>SITES</em> contient les noms de nos projets.  L'objectif par défaut est le premier objectif, <em>tous</em> , c'est-à-dire pour terminer toutes les étapes, il suffit de taper une <em>commande make</em> .  Tous les objectifs dans <em>SITES</em> sont fictifs ( <em>PHONY</em> ): la recette de chacun d'eux sera exécutée indépendamment de l'existence du répertoire et de l'heure à laquelle il a été modifié. <br>  L'introduction de base à faire peut être lue, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , et le guide de base est <em>info make</em> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">original</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">traduction</a> ). </p><br><p>  La règle pour chacun des projets ressemble à ceci: </p><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span>(SITES) : <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ -<span class="hljs-type"><span class="hljs-type">d</span></span> <span class="hljs-type"><span class="hljs-type">.git</span></span>-<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span> ]]; \ then \ <span class="hljs-variable"><span class="hljs-variable">$</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">get-data</span></span>); \ <span class="hljs-variable"><span class="hljs-variable">$</span></span>(mgit) add . &amp;&amp; \ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ -<span class="hljs-type"><span class="hljs-type">n</span></span> <span class="hljs-string"><span class="hljs-string">"`$(mgit) status --porcelain`" ]]; then \ </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$</span></span></span><span class="hljs-string">(mgit) commit -m "</span></span><span class="hljs-type"><span class="hljs-type">Update</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span><span class="hljs-type"><span class="hljs-type">.</span></span><span class="hljs-string"><span class="hljs-string">"; \ fi \ else \ </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$</span></span></span><span class="hljs-string">(init-git); \ fi</span></span></code> </pre> <br><p>  Cette règle est essentiellement une commande shell unique. <br>  $ @ Est une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">variable automatique</a> qui contient le nom de la cible actuelle (par exemple, amorce). <br>  Nous vérifions d'abord si le répertoire .git-primer existe.  Si oui, allez dans le répertoire du projet, téléchargez les pages, ajoutez-les à git. <br>  Si le contenu des pages n'a pas changé, alors git <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">n'ajoutera</a> rien, mais dans ce cas, <em>commit</em> provoquera une erreur et l'exécution du Makefile s'arrêtera.  Par conséquent, nous appelons d'abord <em>git status</em> avec l'option <em>- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">porcelain</a></em> , qui est destinée à être utilisée dans les scripts.  Si la longueur de la ligne de sortie de <em>git status --porcelain n'est</em> pas nulle, alors nous pouvons faire un commit (à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir d'ici</a> ). </p><br><p>  get-data, mgit et init-git sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des</a> recettes en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">conserve</a> dans le Makefile.  Par exemple, <em>mgit</em> est un appel <em>git</em> spécifiant un répertoire avec un référentiel et des fichiers de répertoire de travail: </p><br><pre> <code class="hljs powershell">define mgit = git -<span class="hljs-literal"><span class="hljs-literal">-git</span></span><span class="hljs-literal"><span class="hljs-literal">-dir</span></span>=../.git-<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span> -<span class="hljs-literal"><span class="hljs-literal">-work</span></span><span class="hljs-literal"><span class="hljs-literal">-tree</span></span>=. endef</code> </pre> <br><p>  Les recettes en conserve sont créées lorsqu'une séquence de commandes peut être utilisée dans plusieurs recettes.  Ils peuvent être constitués de plusieurs lignes, chacune étant automatiquement mise en évidence avec un onglet dans les recettes (plus précisément, avec le symbole <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">.RECIPEPREFIX</a> ).  Dans notre exemple, l'indentation est faite uniquement pour la lisibilité du Makefile. <br>  Lors de l'exécution des recettes, chaque ligne des séquences préparées est interprétée comme une ligne distincte de la recette, c'est-à-dire qu'elles peuvent notamment utiliser des variables automatiques à cet <em>effet</em> . </p><br><p>  Le Makefile complet ressemble à ceci: </p><br><pre> <code class="hljs mel">SITES := primer example SERVERHOST := example # .  punicode SERVERHOSTNAME := xn--e1afmkfd.xn--p1ai SERVERPATH := ~/archive all : $(SITES) .PHONY : $(SITES) # target-specific variables primer : DOMAIN := . primer : EXCLUDEDIRS := ,static example : DOMAIN := example.com ifeq ($(SERVERHOSTNAME),$(shell hostname)) # Server define mgit = git --git-dir=../.git-$@ --work-tree=. endef define init-git = mkdir -p $@ &amp;&amp; \ $(get-data) &amp;&amp; \ git init --bare ../.git-$@ &amp;&amp; \ $(mgit) add . &amp;&amp; \ $(mgit) commit -m <span class="hljs-string"><span class="hljs-string">"Initial commit of $@."</span></span> endef define get-data = cd $@ &amp;&amp; \ wget -r -nH -X $(EXCLUDEDIRS) --restrict-<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>-names=nocontrol $(DOMAIN) endef <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> # Workstation define init-git = git clone $(SERVERHOST):$(SERVERPATH)/.git-$@ $@ endef endif $(SITES) : ifeq ($(SERVERHOSTNAME),$(shell hostname)) # Server <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ -d .git-$@ ]]; \ then \ $(get-data); \ $(mgit) add . &amp;&amp; \ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ -n <span class="hljs-string"><span class="hljs-string">"`$(mgit) status --porcelain`"</span></span> ]]; then \ $(mgit) commit -m <span class="hljs-string"><span class="hljs-string">"Update $@."</span></span>; \ fi \ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> \ $(init-git); \ fi <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> # Workstation <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ -d $@/.git ]]; \ then \ cd $@ &amp;&amp; git pull; \ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> \ $(init-git); \ fi endif</code> </pre> <br><p>  Dans le quatrième paragraphe, il y a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des</a> variables <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">spécifiques</a> à la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cible</a> : pour chaque objectif, vous pouvez définir votre propre valeur pour cette variable.  Ces valeurs sont également transmises en fonction des <em>prérequis de</em> chacun des objectifs et des recettes préparées utilisées, c'est-à-dire que nous pouvons être sûrs que la recette de chaque site sera exécutée avec le nom de site correct et son répertoire. <br>  Pour chaque projet, nous pouvons transférer nos répertoires non archivés via la variable <em>EXCLUDEDIRS</em> ou la laisser vide.  De même, vous pouvez modifier le nom du serveur pour l'archivage à partir d'un ordinateur de travail ( <em>SERVERHOST</em> ) et le chemin d'accès sur le serveur vers le répertoire contenant l'archive du site ( <em>SERVERPATH</em> ).  Par souci de simplicité, dans cet exemple, tous les sites sont sur le même serveur et archivés dans le même répertoire. <br>  Étant donné que chaque ligne de la recette (y compris celle préparée) est exécutée dans un <em>shell</em> séparé, de sorte que la transition vers le répertoire reste valide pour les commandes suivantes, nous utilisons l'opérateur "et" <em>&amp;&amp;</em> et échappons à la fin de la ligne \. </p><br><p>  Vient ensuite la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">construction conditionnelle du</a> Makefile: à l'aide de la commande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">shell</a> <em>hostname</em> , nous vérifions si make s'exécute sur le serveur ou sur l'ordinateur local.  Les lignes qui ne satisfont pas la branche actuelle de la directive conditionnelle sont complètement ignorées par le Makefile. </p><br><div class="spoiler">  <b class="spoiler_title">La différence entre les référentiels locaux et serveurs</b> <div class="spoiler_text"><p>  L'ordinateur local est principalement utilisé pour stocker des données, nous ne copions donc que les données du serveur ( <em>git pull</em> ), et pour la commodité du travail local avec git (affichage des journaux ou des versions de fichiers), nous utilisons la structure de référentiel par défaut (le référentiel habituel dans le dossier .git ) <br>  Dans les deux cas, une seule commande <em>make</em> suffit.  Pour la copie automatique, vous pouvez utiliser le planificateur <em>cron</em> .  Afin de ne pas saisir à chaque fois le mot de passe d'accès au serveur, des clés ssh sont générées. </p><br><p>  Pour faciliter le travail sur le serveur, vous pouvez créer un <em>alias</em> git à partir du répertoire du site actuel avec la configuration spécifiée: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> mgit=<span class="hljs-string"><span class="hljs-string">"git --work-tree=. --git-dir=../.git-</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${PWD##*/}</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br><p>  La variable $ {PWD ## * /} contient le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nom du répertoire courant sans chemin d'accès</a> et fait partie de la norme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">POSIX</a> , c'est-à-dire qu'il peut être utilisé dans tous les shells compatibles POSIX. </p></div></div><br><p>  Une directive conditionnelle peut également être utilisée dans les recettes, la seule limitation étant que son début et sa fin ne peuvent pas être dans des fichiers différents. </p><br><div class="spoiler">  <b class="spoiler_title">Serveur</b> <div class="spoiler_text"><p>  Après avoir exécuté make, le répertoire d'archives ressemble à ceci: </p><br><pre> <code class="bash hljs">$ ls -a . .. .git-example .git-primer Makefile example primer $ ls -a primer . .. index.html - - $ <span class="hljs-comment"><span class="hljs-comment"># ,     .    ./-  ./-</span></span></code> </pre> <br><p>  Le fichier de configuration nginx pour example.rf pourrait ressembler à ceci: </p><br><pre> <code class="nginx hljs"><span class="hljs-section"><span class="hljs-section">server</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">server_name</span></span> xn--e1afmkfd.xn--p1ai; <span class="hljs-attribute"><span class="hljs-attribute">charset</span></span> utf-<span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> = / { <span class="hljs-attribute"><span class="hljs-attribute">root</span></span> /home/user/archive/primer; <span class="hljs-attribute"><span class="hljs-attribute">try_files</span></span> /index.html =<span class="hljs-number"><span class="hljs-number">404</span></span>; } <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> / { <span class="hljs-attribute"><span class="hljs-attribute">root</span></span> /home/user/archive/primer; <span class="hljs-attribute"><span class="hljs-attribute">default_type</span></span> <span class="hljs-string"><span class="hljs-string">"text/html"</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">try_files</span></span> <span class="hljs-variable"><span class="hljs-variable">$uri</span></span> =<span class="hljs-number"><span class="hljs-number">404</span></span>; } <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> = /index.html { <span class="hljs-attribute"><span class="hljs-attribute">return</span></span> <span class="hljs-number"><span class="hljs-number">404</span></span>; } }</code> </pre> <br><p>  Le premier <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://nginx.org/en/docs/http/ngx_">emplacement</a></em> correspond à la page principale du site, example.rf.  Il est enregistré par <em>wget en</em> tant que fichier index.html.  Si ce n'est pas le cas, une erreur 404 est émise. </p><br><p>  Pour tous les autres URI, les fichiers du répertoire d'amorce portant le nom URI sont vérifiés.  S'ils ne sont pas trouvés, 404 est retourné. </p><br><p>  En fin de compte, afin d'éviter la duplication de contenu, nous refusons explicitement l'accès au lien example.rf / index.html (404).  Un peu plus de détails sur cette configuration est écrit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </p></div></div><br><h3 id="zaklyuchenie">  Conclusion </h3><br><p>  La sauvegarde de sites peut être effectuée à l'aide des outils standard <em>wget</em> , <em>git</em> , <em>make</em> .  Vous pouvez copier toutes les pages d'un site ou exclure des médias et un certain nombre d'autres fichiers aussi précisément que le permet <em>wget</em> .  De même, avec <em>.gitignore</em> , vous pouvez contrôler quelles pages statiques seront ajoutées au référentiel pour la sauvegarde et lesquelles ne le seront pas.  <em>Makefile</em> vous permet de gérer de manière flexible diverses configurations pour différents projets.  Un exemple complet de Makefile pour le client et pour le serveur ci-dessus ne contient qu'environ 60 lignes. </p><br><p>  Il est supposé que le changement et l'ajout de contenu de site se font par le biais de mécanismes standard, c'est-à-dire que CMS ou CMF est lancé pour cela.  Si cela se produit rarement, après le travail, ils peuvent être désactivés, libérant ainsi des ressources système et affichant des pages statiques enregistrées.  Un exemple d'automatisation plus complète peut mériter un article séparé. </p><br><p>  La méthode proposée convient principalement aux petits projets qui sont rarement mis à jour, de sorte que les problèmes de performances et de sécurité ont été à peine examinés ici.  Comme nous avons demandé à <em>wget de</em> ne pas échapper les caractères de l'URI, au cas où des utilisateurs arbitraires pourraient ajouter des fichiers au site, l'échappement ou l'interdiction de leur ajout devrait se produire immédiatement. </p><br><p>  L'enregistrement des versions du contenu du site peut également être effectué via la base de données lors du changement de ses pages.  Mais cela nécessite la prise en charge des versions par les modèles CMF, ainsi qu'un meilleur contrôle sur le vidage de la base de données (copiez-le entièrement après toute modification de page).  Dans la méthode proposée, en cas de petite modification du contenu, seule cette modification sera ajoutée au référentiel, et l'utilisation d'une copie complète de la base de données n'est pas requise.  De plus, les pages statiques générées peuvent être directement utilisées par le serveur ou affichées dans un navigateur (la modification de la conception ou d'un autre code de site sera également copiée). </p><br><p>  D'autres programmes de sauvegarde sont répertoriés <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Pour stocker et synchroniser des fichiers multimédias, vous devez faire attention à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">git-annex</a> .  La séparation du référentiel .git de l'arborescence de travail a également été utilisée avec succès pour gérer les fichiers de configuration utilisateur (fichiers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dot</a> ).  Aujourd'hui, il existe des serveurs qui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prennent</a> directement en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">charge le</a> travail avec les référentiels git. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425259/">https://habr.com/ru/post/fr425259/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425247/index.html">Crowdsourcing dans les tests</a></li>
<li><a href="../fr425249/index.html">Comment est la connaissance du LLP à l'Université ITMO: le cours "Programmation de bas niveau"</a></li>
<li><a href="../fr425251/index.html">LoJax: le premier rootkit UEFI connu utilisé dans une campagne malveillante</a></li>
<li><a href="../fr425253/index.html">Nous faisons un projet d'apprentissage automatique en Python. Partie 1</a></li>
<li><a href="../fr425255/index.html">Algorithme de compression sans perte Broo et codage delta, comparaison avec Xdelta3. Développement de projets à domicile</a></li>
<li><a href="../fr425261/index.html">Les certificats EV sont morts</a></li>
<li><a href="../fr425263/index.html">Le festival iFEST se tiendra à Nijni Novgorod</a></li>
<li><a href="../fr425265/index.html">Règles de développement chez Yandex.Health</a></li>
<li><a href="../fr425267/index.html">Lieu de travail du développeur .NET ou difficultés à choisir la configuration idéale version 2.0</a></li>
<li><a href="../fr425269/index.html">Hackathon GAZ - comment toucher le géant de l'automobile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>