<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòæ üê∏ üèÇüèª Cara mengotomatisasi dengan bangunan Jenkins dan menggulirkan artefak model artadak metadata untuk tabel dalam repositori üë©üèΩ‚Äç‚úàÔ∏è üõ´ üëÇüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Semuanya dimulai dengan fakta bahwa kita dihadapkan dengan kebutuhan untuk dengan cepat dan benar membentuk struktur EDWEX, JSON, DDL dan kemudian men...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara mengotomatisasi dengan bangunan Jenkins dan menggulirkan artefak model artadak metadata untuk tabel dalam repositori</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rostelecom/blog/428101/">  Semuanya dimulai dengan fakta bahwa kita dihadapkan dengan kebutuhan untuk dengan cepat dan benar membentuk struktur EDWEX, JSON, DDL dan kemudian menggulungnya pada kontur yang berbeda dari basis data relasional.  Dengan kontur, maksud saya singkatan yang semua orang tahu - DEV, TST, UAT, PRD. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/169/a9a/387/169a9a387c429ecc2c76fa39abb3527f.jpg"><br><br>  Pada saat itu, kami melakukan hampir semuanya secara manual: kami menghasilkan DDL, dan mengumpulkan edwex dan json berdasarkan metadata dari database Oracle.  Ada banyak parameter input.  Jika Anda melewatkan satu, Anda akan salah membentuk entitas.  Dan karena seluruh proses pembentukan konsisten dan berkelanjutan, kesalahan hanya akan terdeteksi di bagian paling akhir.  Tentang bagaimana kita semua otomatis dan mengatasi kesalahan, baca di bawah potongan. <br><a name="habracut"></a><br><h2>  Sedikit tentang infrastruktur </h2><br>  Sebelum kita mengisi data dalam tabel database relasional, kita perlu menerimanya dari sumber - dalam format apa pun, misalnya, di Excel.  Data dari sumber menggunakan mekanisme in-house diangkut ke Hadoop (Data Lake).  Hive telah menginstal add-on Hive - dengan bantuannya kita dapat melihat konten file menggunakan sintaks seperti SQL. <br><br>  Untuk mentransfer data di Danau Data dalam bentuk tabel, kita perlu json, yang dibentuk berdasarkan metadata.  Untuk mem-parsing data dalam format Excel, kita perlu membuat file EDWEX.  File EDWEX (EDW_EXTRACTOR) adalah seperangkat artefak yang berisi set tabel dengan nama, serta set bidang untuk masing-masing tabel ini, yang dibentuk berdasarkan metadata.  Bergantung pada versi model dan ID sumber, set bidang bervariasi.  Pembentukan DDL diperlukan untuk membuat tabel sendiri dalam database Hive di tingkat data operasional dan dalam database Greenplum di tingkat data terperinci dan agregat.  Artinya, data terutama ditransfer ke Hive, jika perlu, disaring dan ditransfer ke Greenplum untuk manipulasi data selanjutnya dan membuat etalase toko berdasarkan itu. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh artefak Edwex</b> <div class="spoiler_text">  pak - berisi seperangkat tabel <br>  data - berisi sekumpulan bidang <br><br>  pack.edwex: <br><br><pre><code class="sql hljs">1 Table_1 User Table_1 bid between to_char($fromdt,'yyyymm') and to_char($actualdt,'yyyymm') 2 Table_2 User Table_2 curbid between to_char($fromdt,'yyyymm') and to_char($actualdt,'yyyymm') 3 Table_3 User Table_3 bid between to_char($fromdt,'yyyymm') and to_char($actualdt,'yyyymm')</code> </pre> <br><br>  data.edwex: <br><br><pre> <code class="sql hljs">1 1 CHARGE_ID NUMBER 38 0 1 2 SVC_ID NUMBER 38 0 1 3 VND_ID NUMBER 38 0 1 4 PRICE NUMBER 38 5 1 5 QUANTITY NUMBER 38 5 1 6 BASE NUMBER 38 5 1 7 TAX NUMBER 38 5 1 8 TOTAL NUMBER 38 5 1 9 TAX_RATE NUMBER 38 5 1 10 TAX_IN VARCHAR 1 1 11 CHARGE_KIND VARCHAR 3 1 12 PRIVILEGE_ID NUMBER 38 0 1 13 CHARGE_REF_ID NUMBER 38 0 1 14 EBID NUMBER 38 0 1 15 INVOICE_ID NUMBER 38 0 1 16 ZERO_STATE_ID NUMBER 38 0 1 17 USER_ID NUMBER 38 0 1 18 BID NUMBER 38 0 1 19 QUANTITY_REAL NUMBER 38 5 2 1 CURBID NUMBER 38 0 2 2 USER_ID NUMBER 38 0 2 3 VND_ID NUMBER 38 0 2 4 APPBID NUMBER 38 0 2 5 SVC_ID NUMBER 38 0 2 6 DEBT NUMBER 38 5 2 7 INSTDEBT NUMBER 38 5 3 1 INVOICE_ID NUMBER 38 0 3 2 INVOICE_DATE DATE 3 3 INVOICE_NUM VARCHAR 64 3 4 INVOICE_NUM_N NUMBER 38 5 3 5 BASE NUMBER 38 5 3 6 TAX NUMBER 38 5 3 7 TOTAL NUMBER 38 5 3 8 PREPAID VARCHAR 1 3 9 EXPLICIT VARCHAR 1 3 10 VND_ID NUMBER 38 0 3 11 ADV_PAYMENT_ID NUMBER 38 0 3 12 MDBID NUMBER 38 0 3 13 BID NUMBER 38 0 3 14 USER_ID NUMBER 38 0 3 15 ZERO_STATE_ID NUMBER 38 0 3 16 ACTIVE_SUM NUMBER 38 5 3 17 SPLIT_VND NUMBER 38 5 3 18 PRECREATED VARCHAR 1</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Contoh artefak Json</b> <div class="spoiler_text"><pre> <code class="java hljs">Table.json: { <span class="hljs-string"><span class="hljs-string">"metadata"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"charge_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"true"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"2"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"svc_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"3"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"vnd_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"4"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"price"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"5"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"quantity"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"6"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"base"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"7"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"tax"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"8"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"total"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"9"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"tax_rate"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"10"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"tax_in"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"STRING"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"11"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"charge_kind"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"STRING"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"12"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"privilege_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"13"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"charge_ref_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"14"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"ebid"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"15"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"invoice_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"16"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"zero_state_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"17"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"user_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"18"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"bid"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"19"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"quantity_real"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> } ], <span class="hljs-string"><span class="hljs-string">"ctlPath"</span></span>:<span class="hljs-string"><span class="hljs-string">"  ctl"</span></span>, <span class="hljs-string"><span class="hljs-string">"errPath"</span></span>:<span class="hljs-string"><span class="hljs-string">"    "</span></span>, <span class="hljs-string"><span class="hljs-string">"inPath"</span></span>:<span class="hljs-string"><span class="hljs-string">"    hdfs"</span></span>, <span class="hljs-string"><span class="hljs-string">"outSchema"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"outTable"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"isPartitioned"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"sourceId"</span></span>:<span class="hljs-string"><span class="hljs-string">"id  "</span></span> }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Contoh Artefak DDL</b> <div class="spoiler_text">  ubah skema tabel.GP_000001_TABLE ganti nama menjadi Z_GP_000001_TABLE_20180807; <br>  buat skema tabel.GP_000001_TABLE <br>  ( <br><br>  `charge_id` DECIMAL (38.0), <br>  `svc_id` DECIMAL (38.0), <br>  `vnd_id` DECIMAL (38.0), <br>  `price` DECIMAL (38.5), <br>  `Kuantitas` DECIMAL (38.5), <br>  `base` DECIMAL (38.5), <br>  `pajak` DECIMAL (38.5), <br>  `total` DECIMAL (38.5), <br>  `tax_rate` DECIMAL (38.5), <br>  `tax_in` STRING, <br>  `charge_kind` STRING, <br>  `privilege_id` DECIMAL (38.0), <br>  `charge_ref_id` DECIMAL (38.0), <br>  `ebid` DECIMAL (38.0), <br>  `invoice_id` DECIMAL (38.0), <br>  `zero_state_id` DECIMAL (38,0), <br>  `user_id` DECIMAL (38.0), <br>  `bid` DECIMAL (38.0), <br>  `quantity_real` DECIMAL (38.5), <br>  `load_dttm` TIMESTAMP, <br>  `src_id` SMALLINT, <br>  `package_id` BIGINT, <br>  `wf_run_id` BIGINT, <br>  `md5` STRING <br>  ) <br>  BENTUK FORMAT BIDANG YANG DITETAPKAN DIAKHIRI OLEH '\ t' <br>  DIIMPOR SEBAGAI INPUTFORMAT 'org.apache.hadoop.mapred.TextInputFormat' OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' <br>  LOKASI 'cara untuk membentuk dalam HDFS' <br>  TBLPROPERTIES ('auto.purge' = 'true', 'transient_lastDlastDdlTime' = '1489060201'); <br>  masukkan ke dalam skema.GP_000001_TABLE (`charge_id`, <br>  `svc_id`, <br>  `vnd_id`, <br>  `harga`, <br>  `kuantitas`, <br>  `base`, <br>  `pajak`, <br>  `total`, <br>  `tax_rate`, <br>  `tax_in`, <br>  `charge_kind`, <br>  `privilege_id`, <br>  `charge_ref_id`, <br>  `ebid`, <br>  `invoice_id`, <br>  `zero_state_id`, <br>  `user_id`, <br>  menawar <br>  `quantity_real`, <br>  `load_dttm`, <br>  `src_id`, <br>  package_id <br>  `wf_run_id`, <br>  `md5`) <br><br>  pilih `charge_id`, <br>  `svc_id`, <br>  `vnd_id`, <br>  `harga`, <br>  `kuantitas`, <br>  `base`, <br>  `pajak`, <br>  `total`, <br>  `tax_rate`, <br>  `tax_in`, <br>  `charge_kind`, <br>  `privilege_id`, <br>  `charge_ref_id`, <br>  `ebid`, <br>  `invoice_id`, <br>  `zero_state_id`, <br>  `user_id`, <br>  menawar <br>  `quantity_real`, <br>  load_dttm, <br>  src_id <br>  package_id, <br>  wf_run_id, <br>  md5 dari scheme.Z_GP_000001_TABLE_20180807; <br><br>  ubah skema tabel.GP_000001_TABLE ganti nama menjadi Z_GP_000001_TABLE_20180807; <br>  buat skema tabel.GP_000001_TABLE <br>  ( <br><br>  `charge_id` DECIMAL (38.0), <br>  `svc_id` DECIMAL (38.0), <br>  `vnd_id` DECIMAL (38.0), <br>  `price` DECIMAL (38.5), <br>  `Kuantitas` DECIMAL (38.5), <br>  `base` DECIMAL (38.5), <br>  `pajak` DECIMAL (38.5), <br>  `total` DECIMAL (38.5), <br>  `tax_rate` DECIMAL (38.5), <br>  `tax_in` STRING, <br>  `charge_kind` STRING, <br>  `privilege_id` DECIMAL (38.0), <br>  `charge_ref_id` DECIMAL (38.0), <br>  `ebid` DECIMAL (38.0), <br>  `invoice_id` DECIMAL (38.0), <br>  `zero_state_id` DECIMAL (38,0), <br>  `user_id` DECIMAL (38.0), <br>  `bid` DECIMAL (38.0), <br>  `quantity_real` DECIMAL (38.5), <br>  `load_dttm` TIMESTAMP, <br>  `src_id` SMALLINT, <br>  `package_id` BIGINT, <br>  `wf_run_id` BIGINT, <br>  `md5` STRING <br>  ) <br>  BENTUK FORMAT BIDANG YANG DITETAPKAN DIAKHIR OLEH '\ t' <br>  DIIMPOR SEBAGAI INPUTFORMAT 'org.apache.hadoop.mapred.TextInputFormat' OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' <br>  LOKASI 'cara untuk membentuk dalam HDFS' <br>  TBLPROPERTIES ('auto.purge' = 'true', 'transient_lastDlastDdlTime' = '1489060201'); <br>  masukkan ke dalam skema.GP_000001_CPA_CHARGE (`charge_id`, <br>  `svc_id`, <br>  `vnd_id`, <br>  `harga`, <br>  `kuantitas`, <br>  `base`, <br>  `pajak`, <br>  `total`, <br>  `tax_rate`, <br>  `tax_in`, <br>  `charge_kind`, <br>  `privilege_id`, <br>  `charge_ref_id`, <br>  `ebid`, <br>  `invoice_id`, <br>  `zero_state_id`, <br>  `user_id`, <br>  menawar <br>  `quantity_real`, <br>  `load_dttm`, <br>  `src_id`, <br>  package_id <br>  `wf_run_id`, <br>  `md5`) <br><br>  pilih `charge_id`, <br>  `svc_id`, <br>  `vnd_id`, <br>  `harga`, <br>  `kuantitas`, <br>  `base`, <br>  `pajak`, <br>  `total`, <br>  `tax_rate`, <br>  `tax_in`, <br>  `charge_kind`, <br>  `privilege_id`, <br>  `charge_ref_id`, <br>  `ebid`, <br>  `invoice_id`, <br>  `zero_state_id`, <br>  `user_id`, <br>  menawar <br>  `quantity_real`, <br>  load_dttm, <br>  src_id <br>  package_id, <br>  wf_run_id, <br>  md5 dari scheme.Z_GP_000001_TABLE_20180807; <br></div></div><br><h2>  Cara mengotomatisasi </h2><br>  Untuk mengatasi masalah, kami menggunakan: <br><br><ul><li>  Jenkins - sebagai orkestra dan alat untuk mengimplementasikan proses CI. <br></li><li>  Python - ini mengimplementasikan fungsi dan unit test. <br></li><li>  SQL - untuk mengakses database metadata. <br></li><li>  Script Shell - untuk menyalin artefak antara direktori dan membuat skrip dalam proyek multijob yang berjalan di server Jenkins. <br></li></ul><br>  Untuk memulainya, kami awalnya bekerja dengan sejumlah besar sumber, oleh karena itu, menggunakan skrip Shell sebagai parameter awal, kami meneruskan ID sumber untuk fungsi SQL untuk mengidentifikasi mereka.  Fungsi SQL yang dihasilkan selanjutnya akan secara otomatis dieksekusi di database metadata.  Berdasarkan metadata yang tersedia, fungsi-fungsi ini membentuk file dengan daftar fungsi SQL baru untuk masing-masing tabel sumber sehingga kita selanjutnya dapat memanggil mereka dalam program yang dapat dieksekusi.  Hasil dari eksekusi fungsi-fungsi yang dihasilkan adalah transfer nilai-nilai DDL, JSON atau EDWEX ke parameter output. <br><br>  Di sinilah Python terhubung, dengan semua fungsi yang dapat dieksekusi dan tes unit ditulis.  Sebelum memulai salah satu modul untuk menggulung artefak menggunakan unit test, transfer parameter yang benar diperiksa untuk menjalankan skrip python.  Pengujian tidak hanya memeriksa kebenaran parameter input, tetapi juga keberadaannya dalam modul metadata, ukuran file yang dibuat, dan tanggal pembuatannya.  Tes juga memantau jumlah artefak baru yang dibuat dan jumlah artefak yang ada.  Jadi kami mengoptimalkan penggunaan sumber daya server, karena kami hanya mengambil file baru untuk bergulir dan tidak menginstal ulang model yang ada lagi. <br><br>  Dan hanya setelah berhasil melewati semua pemeriksaan adalah program python dieksekusi yang menciptakan artefak yang diperlukan dan menguraikan hasilnya ke dalam folder proyek yang diperlukan di server.  Python tidak hanya mengarahkan file json yang dihasilkan ke direktori, tetapi juga membentuk struktur ke dalam Data Lake sehingga data dimuat dengan benar.  Ketika menghasilkan artefak DDL, mereka tidak hanya disimpan untuk analisis dan penggunaan kembali nanti, tetapi juga dapat segera diinstal dalam database menggunakan model dan struktur baru yang ditentukan dalam modul metadata.  Ini memungkinkan Anda membuat ratusan tabel dalam waktu singkat tanpa melibatkan tenaga kerja manual. <br><br><h2>  Dan di mana Jenkins di sini? </h2><br>  Jenkins masuk ketika perlu untuk mengelola semua proses ini secara visual menggunakan antarmuka. <br><br>  Alat ini dipilih karena: <br><br><ul><li>  sepenuhnya mencakup kebutuhan untuk otomatisasi perakitan dan pemasangan <br></li><li>  memungkinkan Anda merancang mekanisme untuk merakit artefak dengan penerapan proses pengujian mandiri <br></li><li>  memungkinkan Anda mengelola peluncuran pekerjaan dan memantau eksekusi dengan mudah ke orang yang jauh dari pemrograman <br></li><li>  memungkinkan Anda untuk mengonfigurasi mekanisme pencatatan sedemikian rupa sehingga hasil eksekusi akan dapat dipahami oleh siapa pun di tim.  Masalah dalam majelis akan diindikasikan secara eksplisit atau proses akan selesai dengan sukses. <br></li></ul><br>  Untuk menyelesaikan tugas, kami telah membuat beberapa proyek multijob.  Jenis proyek ini telah digunakan, karena dapat bekerja secara paralel dengan pekerjaan lain dalam satu permulaan.  Setiap pekerjaan bertanggung jawab atas implementasi blok fungsionalitasnya.  Jadi kami mengganti proses berurutan untuk mendapatkan artefak dengan yang paralel otonom.  Semuanya dimulai secara terpisah: pembentukan EDWEX, JSON, DDL, pembentukan struktur dalam HIVE, pemasangan struktur tabel dalam database.  Kami menganalisis hasilnya pada berbagai tahap pembentukan artefak dan melanjutkan untuk meluncurkan tindakan selanjutnya jika berhasil. <br><br>  Bagian Jenkins diimplementasikan tanpa banyak trik.  Parameter <b>String</b> atau <b>Run</b> dikirim ke input untuk memulai kode python.  Parameter <b>String</b> adalah jendela untuk memasukkan nilai tipe str sebelum memulai.  Parameter <b>run</b> dapat ditransfer dengan cepat ke pekerjaan lain untuk dieksekusi, untuk ini cukup hanya untuk menunjukkan dari proyek mana perlu untuk mengambil variabel yang diterima.  Juga, sebuah node dilewatkan sebagai parameter terpisah untuk eksekusi.  Di sini, partisi menjadi runtime pada DEV, TST, UAT, PRD baru saja diimplementasikan.  Pekerjaan terpisah digunakan untuk mentransfer file EDWEX yang diterima ke SVN dengan nomor revisi agar dapat melacak versi struktur yang diubah. <br><br>  Contoh antarmuka dalam Jenkins: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/00f/250/8c5/00f2508c5c04082a8b753041e471fe14.png"><br><br>  Hasil dari pelaksanaan pekerjaan adalah pembuatan dan pemasangan artefak yang diperlukan, transfernya ke SVN dan pembentukan laporan HTML yang menampilkan keberhasilan lulus uji unit dan hasil perakitan dan pemasangan artefak.  Pekerjaan dapat dijalankan secara individual dengan tangan Anda, atau dalam mode otomatis, setelah sebelumnya membangun rantai eksekusi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/324/549/50f/32454950f7eb0476ca4cc753715c4472.png"><br>  <i>Arsitektur mekanisme pemasangan dan pemasangan</i> <br><br><h3>  Untuk meringkas </h3><br>  Banyak pekerjaan telah dilakukan untuk mengotomatisasi pembentukan artefak.  Sebelumnya, Anda harus memanjat ke server secara manual, menjalankan skrip shell, lalu mempelajari dan mengedit data untuk waktu yang lama dengan tangan Anda.  Sekarang cukup klik pada tombol start, tentukan ID sistem sumber, nomor model dan loop eksekusi.  Dengan bantuan Jenkins, adalah mungkin untuk menyusun dan memecah seluruh perakitan dan mekanisme pemasangan artefak menjadi tahap-tahap independen.  Pemeriksaan yang diperlukan ditambahkan sebelum memulai pembentukan artefak dan integrasi mereka.  Artefak yang diterima secara otomatis ditransfer ke SVN, yang menyederhanakan pekerjaan dengan tim analis sistem dan pemodel data yang terkait.  Cek diterapkan untuk menghindari peluncuran formasi artefak yang menganggur dan mengkonfirmasi kebenarannya. <br><br>  Hasilnya, kami mengurangi proses perakitan dan pemasangan artefak model yang memakan waktu dari beberapa jam menjadi beberapa menit.  Dan yang paling penting, mereka menghilangkan terjadinya kesalahan karena faktor manusia, yang pasti muncul dalam proses rutin yang kompleks. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id428101/">https://habr.com/ru/post/id428101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id428089/index.html">"Kalender Tester" untuk Oktober. Umpan balik: bagaimana itu terjadi</a></li>
<li><a href="../id428091/index.html">Bagaimana siswa magang menciptakan video game paling populer di dunia, atau sejarah game Windows</a></li>
<li><a href="../id428095/index.html">Riset pasar untuk studio web dan agensi digital</a></li>
<li><a href="../id428097/index.html">Routing rekursif dalam MikroTik melalui gateway yang ditetapkan oleh DHCP</a></li>
<li><a href="../id428099/index.html">Apa kesamaan dari gaun biasa dan era 5G yang akan datang?</a></li>
<li><a href="../id428103/index.html">Mitap di St. Petersburg: Teknik Data dan banyak lagi</a></li>
<li><a href="../id428105/index.html">Blogger merekomendasikan: memengaruhi pemasaran</a></li>
<li><a href="../id428107/index.html">Kontainerisasi aplikasi Angular 6 SPA Template ASP .NET Core 2.1</a></li>
<li><a href="../id428109/index.html">Tembok perusahaan</a></li>
<li><a href="../id428111/index.html">Aritmatika presisi sewenang-wenang di Erlang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>