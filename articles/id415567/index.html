<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎟️ 🤘🏼 ⏏️ Siarkan video h264 tanpa transkoding dari kamera Logitech C920 🌠 💇🏾 👩🏽‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Penundaannya tidak lebih dari 0,3 detik, mengingat fakta bahwa kamera terhubung ke BeagleBone Blue yang lemah dengan beban prosesor tidak lebih dari 3...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Siarkan video h264 tanpa transkoding dari kamera Logitech C920</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415567/"><img src="https://habrastorage.org/webt/dc/by/xs/dcbyxsicqllz2-jksmikcesodlu.jpeg"><br><br>  Penundaannya tidak lebih dari 0,3 detik, mengingat fakta bahwa kamera terhubung ke BeagleBone Blue yang lemah dengan beban prosesor tidak lebih dari 30% dan aliran video ditransmisikan melalui router wifi ke laptop. <br><a name="habracut"></a><br>  Awalnya, tugasnya adalah menyiarkan video dari robot ke komputer besar tanpa memuat prosesor pada robot dan tanpa penundaan.  Dalam proses googling kamera dan program untuk tugas ini, ditemukan bahwa ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kamera dengan pengkodean video berbasis perangkat keras pada kamera itu sendiri</a> , setelah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">itu kamera</a> Logitech C920 dibeli.  Dan tes dan percobaan dimulai, di mana dua opsi terjemahan ditemukan tanpa transcoding. <br><br>  Semua tindakan lebih lanjut diperiksa pada Ubuntu 16.04, opsi kedua mungkin bekerja pada Windows <br><br><h3>  Perangkat keras siaran menyandikan video dari kamera Logitech C920 melalui cvlc dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">v4l2</a> </h3><br>  clvc - server menyiarkan video melalui vlc dari baris perintah. <br><br><h4>  Perangkat keras menyandikan aliran video </h4><br>  Atur kamera format pixel ke H264 <br><br><pre><code class="bash hljs">v4l2-ctl --device=/dev/video1 --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>-fmt-video=width=800,height=600,pixelformat=1</code> </pre> <br>  Uji H264 dengan vlc, sehingga tidak akan mengatur ulang pengaturan: <br><br><pre> <code class="bash hljs">cvlc v4l2:///dev/video1 --demux h264</code> </pre> <br>  Jika Anda mencoba ini, vlc akan mengatur ulang pengaturan sebelum bermain: <br><br><pre> <code class="bash hljs">cvlc v4l2:///dev/video1:chroma=h264</code> </pre> <br>  Pemutaran bekerja.  Kami mendapatkan aliran H264 dari kamera.  Sekarang mari kita melewati jaringan melalui HTTP: <br><br><pre> <code class="bash hljs">cvlc v4l2:///dev/video1:chroma=h264:width=800:height=600 --sout <span class="hljs-string"><span class="hljs-string">'#standard{access=http,mux=ts,dst=localhost:8080,name=stream,mime=video/ts}'</span></span> -vvv</code> </pre> <br>  (pada jaringan, Anda perlu menggunakan alamat IP perangkat lokal Anda dan bukan localhost) <br><br>  Peluncuran Penerima: <br><br><pre> <code class="bash hljs">mplayer http://localhost:8080/</code> </pre> <br>  Ternyata MPEG-TS memungkinkan mplayer untuk terhubung ke streaming kapan saja dengan sedikit penundaan (mungkin menunggu frame kunci atau sth). <br><br>  Jika Anda menggunakan mux = avi, mime = video / avi, Anda harus menjalankan mplayer saat Anda memulai vlc, jika tidak mplayer tidak akan mulai bermain. <br><br><h4>  Kesalahan ffmpeg </h4><br><ul><li>  Jika Anda mencoba ffmpeg alih-alih vlc untuk bermain, Anda mungkin akan mengalami masalah ini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ffmpeg.org/trac/ffmpeg/ticket/1387</a> </li><li>  Segera setelah Anda menjalankan ffmpeg, itu akan beralih ke "Video: rawvideo (YUY2 / 0x32595559)" </li><li>  Saat menerima MJPEG, itu tidak akan bekerja dengan H.264 </li><li>  Hal yang sama terjadi ketika menggunakan qv4l2: mulai menangkap dalam mode H264 sebenarnya memberi Anda jendela video YUY2 </li></ul><br><h4>  Putar video yang diterjemahkan ke perangkat keras </h4><br>  Mplayer dapat memainkan framebuffer, pastikan X tidak berfungsi dan masukkan: <br><br><pre> <code class="bash hljs">mplayer http://192.168.1.100:8080/ -fs -framedrop -vo fbdev</code> </pre> <br>  Anda juga dapat bermain di jendela X jika ingin: jalankan X dari baris perintah: <br><br><pre> <code class="bash hljs">Xorg -retro &amp;&gt; /dev/zero</code> </pre> <br>  Ada banyak pesan kesalahan fbdev yang diam-diam kita masukkan / dev / nol <br><br>  Putar aliran video dari sumber LAN vlc (lihat bagian di atas): <br><br><pre> <code class="bash hljs">DISPLAY=<span class="hljs-string"><span class="hljs-string">":0"</span></span> mplayer http://192.168.1.100:8080/ -fs -framedrop</code> </pre> <br><ul><li>  Jika kami melakukan ini, kami akan melihat bahwa kami belum menggunakan Xvideo atau akselerasi perangkat keras apa pun </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">linux-sunxi.org/CedarX</a> tampaknya memberi kita perpustakaan VPU, yang sayangnya merupakan hal yang tidak aman bagi Allwinner </li><li>  Tetapi ada VLC yang diretas yang dapat menggunakannya: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">linux-sunxi.org/VLC</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Berhasil dikompilasi</a> </li></ul><br><h4>  Raspberry pi </h4><br>  Jika Anda mengalami artefak dalam gambar, dan stream dari Raspberry Pi gunakan: <br><br><pre> <code class="bash hljs">cvlc v4l2:///dev/video0:chroma=h264 ...</code> </pre> <br>  Anda mungkin perlu memperbarui firmware: <br><br><pre> <code class="bash hljs">apt-get install rpi-update raspi-config rpi-update reboot</code> </pre> <br><h4>  Ringkasan siaran via cvlc dan v4l2 </h4><br>  Pengujian menunjukkan bahwa beban prosesor pada Beaglebone Blue tidak lebih dari 30%, yang sangat baik untuk prosesor yang lemah, tetapi tidak jelas bagaimana cara mendorong video ini ke ROS. <br><br>  Jika bandwidth wifi tidak cukup maka penundaan video meningkat pesat, secara teori ini dapat diatasi dengan beralih dari tcp ke udp, dokumentasi cvlc menyebutkan kemungkinan penyiaran melalui udp. <br><br><h3>  Perangkat keras siaran yang disandikan video dari kamera Logitech C920 via Gstreamer </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Artikel pengembang asli yang mendukung metode ini di Gstreamer.</a> <br>  Instal gstreamer di Ubuntu 16.04 <br><br><pre> <code class="bash hljs">sudo apt-get install libgstreamer1.0-0 gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-plugins-bad gstreamer1.0-plugins-ugly gstreamer1.0-libav gstreamer1.0-doc gstreamer1.0-tools sudo apt-get install libgstreamer-plugins-base1.0-dev</code> </pre> <br><h4>  Sumber uvch264src memungkinkan Anda untuk: </h4><br><ul><li>  Secara bersamaan menangkap aliran video yang disandikan perangkat keras h264 dan aliran video perayap. </li><li>  Konfigurasikan pengodean video perangkat keras (bitrate, bingkai kunci, dan lainnya) </li></ul><br>  Sumber jendela bidik sekunder adalah konsep yang menarik.  Selain aliran H.264 utama, Anda mendapatkan aliran sekunder resolusi rendah dalam format MJPG atau YUV.  Saya tidak yakin apakah ini fitur kamera gstreamer, driver, atau blok sumber, tetapi saya berharap ini akan berguna untuk kamera Beaglebone kami, asalkan fungsinya tidak menggunakan prosesor yang terlalu besar untuk mengkonversi antara mentah dan jpg. <br><br>  Berikut ini adalah contoh pipa yang menampilkan aliran H.264 resolusi tinggi dan aliran jendela bidik: <br><br><pre> <code class="bash hljs">gst-launch-1.0 -v -e uvch264src device=/dev/video0 name=src auto-start=<span class="hljs-literal"><span class="hljs-literal">true</span></span> src.vfsrc ! queue ! video/x-raw,format=YUY2,width=320,height=240,framerate=10/1 ! xvimagesink sync=<span class="hljs-literal"><span class="hljs-literal">false</span></span> src.vidsrc ! queue ! video/x-h264,width=1280,height=720,framerate=30/1 ! h264parse ! avdec_h264 ! xvimagesink sync=<span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br>  Aliran utama H.264 diterjemahkan dengan menggunakan blok avdec_h264, dapat diakses melalui paket gst-libav, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lihat catatan pada wiki oz9aec</a> .  Panel jendela bidik dapat dihubungkan ke fakelink jika tidak diperlukan, tetapi saya tidak berpikir itu dapat dinonaktifkan (Anda masih dapat menonaktifkannya).  Setidaknya ini adalah kesan bahwa saya membaca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">posting blog KaKaRoTo</a> asli. <br><br>  Anda mungkin akan kelebihan beban ketika Anda melihat sejumlah besar parameter yang dapat dikonfigurasi untuk blok sumber ini: <br><br><pre> <code class="bash hljs">gst-inspect-1.0 uvch264src</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Daftar parameter Uvch264src</b> <div class="spoiler_text">  Rincian Pabrik: <br>  Peringkat tidak ada (0) <br>  Nama panjang Sumber UVC H264 <br>  Sumber / video klass <br>  Deskripsi UVC H264 Pengkodean sumber kamera <br>  Penulis Youness Alaoui &lt;youness.alaoui@collabora.co.uk&gt; <br><br>  Rincian Plugin: <br>  Beri nama uvch264 <br>  Deskripsi UVC compliant H264 encoding plugins kamera <br>  Namafile / usr/lib/x86_64-linux-gnu/gstreamer-1.0/libgstuvch264.so <br>  Versi 1.8.3 <br>  Lisensi LGPL <br>  Modul sumber gst-plugins-bad <br>  Tanggal rilis sumber 2016-08-19 <br>  Paket biner GStreamer Bad Plugins (Ubuntu) <br>  URL Asal <a href="">launchpad.net/distros/ubuntu/+source/gst-plugins-bad1.0</a> <br><br>  GObject <br>  + ---- Secara resmi tidak dimiliki <br>  + ---- GstObject <br>  + ---- GstElement <br>  + ---- GstBin <br>  + ---- GstBaseCameraSrc <br>  + ---- GstUvcH264Src <br><br>  Antarmuka yang Diimplementasikan: <br>  Gstchildproxy <br><br>  Templat Pad: <br>  Template SRC: 'vidsrc' <br>  Ketersediaan: Selalu <br>  Kemampuan: <br>  video / x-raw <br>  format: {I420, YV12, YUY2, UYVY, AYUV, RGBx, BGRx, xRGB, xBGR, RGBA, BGRA, ARGB, ABGR, RGB, BGR, Y41B, Y42B, YVYU, Y444, v210, v216, NV12, NV21, NV21 , NV61, NV24, GRAY8, GRAY16_BE, GRAY16_LE, v308, RGB16, BGR16, RGB15, BGR15, UYVP, A420, RGB8P, YUV9, YVU9, IYU1, ARGB64, AYUV64, r210, I420_104104_1010 , GBR, GBR_10LE, GBR_10BE, NV12_64Z32, A420_10LE, A420_10BE, A422_10LE, A422_10BE, A444_10LE, A444_10BE} <br>  lebar: [1, 2147483647] <br>  tinggi: [1, 2147483647] <br>  framerate: [0/1, 2147483647/1] <br>  gambar / jpeg <br>  lebar: [1, 2147483647] <br>  tinggi: [1, 2147483647] <br>  framerate: [0/1, 2147483647/1] <br>  video / x-h264 <br>  lebar: [1, 2147483647] <br>  tinggi: [1, 2147483647] <br>  framerate: [0/1, 2147483647/1] <br>  stream-format: {byte-stream, avc} <br>  perataan: au <br>  profil: {tinggi, utama, garis dasar, garis dasar terbatas} <br><br>  Template SRC: 'imgsrc' <br>  Ketersediaan: Selalu <br>  Kemampuan: <br>  KOSONG <br><br>  Template SRC: 'vfsrc' <br>  Ketersediaan: Selalu <br>  Kemampuan: <br>  video / x-raw <br>  format: {I420, YV12, YUY2, UYVY, AYUV, RGBx, BGRx, xRGB, xBGR, RGBA, BGRA, ARGB, ABGR, RGB, BGR, Y41B, Y42B, YVYU, Y444, v210, v216, NV12, NV21, NV21 , NV61, NV24, GRAY8, GRAY16_BE, GRAY16_LE, v308, RGB16, BGR16, RGB15, BGR15, UYVP, A420, RGB8P, YUV9, YVU9, IYU1, ARGB64, AYUV64, r210, I420_104104_1010 , GBR, GBR_10LE, GBR_10BE, NV12_64Z32, A420_10LE, A420_10BE, A422_10LE, A422_10BE, A444_10LE, A444_10BE} <br>  lebar: [1, 2147483647] <br>  tinggi: [1, 2147483647] <br>  framerate: [0/1, 2147483647/1] <br>  gambar / jpeg <br>  lebar: [1, 2147483647] <br>  tinggi: [1, 2147483647] <br>  framerate: [0/1, 2147483647/1] <br><br>  Bendera Elemen: <br>  tidak ada bendera yang ditetapkan <br><br>  Bendera nampan: <br>  tidak ada bendera yang ditetapkan <br><br>  Implementasi Elemen: <br>  Memiliki fungsi change_state (): 0x7ff438f22ba0 <br><br>  Elemen tidak memiliki kemampuan pencatatan jam kerja. <br>  Elemen tidak memiliki kemampuan penanganan URI. <br><br>  Bantalan: <br>  Src: 'vfsrc' <br>  Src: 'imgsrc' <br>  SRC: 'vidsrc' <br><br>  Properti elemen: <br>  nama: Nama objek <br>  bendera: baca, tulis <br>  Tali  Default: "uvch264src0" <br>  induk: induk dari objek <br>  bendera: baca, tulis <br>  Objek tipe "GstObject" <br>  penanganan async: Nampan akan menangani perubahan status Asinkron <br>  bendera: baca, tulis <br>  Boolean.  Default: false <br>  penerusan pesan: Meneruskan semua pesan anak-anak <br>  bendera: baca, tulis <br>  Boolean.  Default: false <br>  mode: Mode pengambilan (pengambilan foto diam atau perekaman video) <br>  bendera: baca, tulis <br>  Enum "GstCameraBin2Mode" Default: 2, "mode-video" <br>  (1): mode-gambar - Pengambilan foto diam (default) <br>  (2): mode-video - Perekaman video <br>  zoom: Faktor pembesaran digital (mis. 1,5 berarti 1,5x) <br>  bendera: baca, tulis <br>  Mengapung.  Kisaran: 1 - 3.402823e + 38 Default: 1 <br>  max-zoom: Faktor pembesaran digital (mis. 1,5 berarti 1,5x) <br>  bendera: dapat dibaca <br>  Mengapung.  Kisaran: 1 - 3.402823e + 38 Default: 10 <br>  ready-for-capture: Menginformasikan elemen ini siap memulai tangkapan lain <br>  bendera: dapat dibaca <br>  Boolean.  Default: benar <br>  post-preview: Jika menangkap gambar pratinjau harus diposting ke bus <br>  bendera: baca, tulis <br>  Boolean.  Default: benar <br>  caps-preview: Tutup dari gambar preview yang akan diposting (NULL berarti APA SAJA) <br>  bendera: baca, tulis <br>  APA SAJA <br><br>  preview-filter: Filter pratinjau khusus untuk memproses pratinjau data gambar <br>  bendera: baca, tulis <br>  Objek tipe "GstElement" <br>  mulai otomatis: Secara otomatis mulai menangkap ketika pergi ke status PAUSED <br>  bendera: baca, tulis <br>  Boolean.  Default: false <br>  colorspace-name: Nama elemen colorspace <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Tali  Default: "videoconvert" <br>  jpeg-decoder-name: Nama elemen decoder jpeg <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Tali  Default: "jpegdec" <br>  num-clock-samples: Jumlah sampel jam untuk dikumpulkan untuk sinkronisasi PTS (-1 = tidak terbatas) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer  Kisaran: 0 - 2147483647 Default: 0 <br>  num-buffer: Jumlah buffer ke output sebelum mengirim EOS (-1 = tidak terbatas) <br>  bendera: baca, tulis <br>  Integer  Kisaran: -1 - 2147483647 Default: -1 <br>  perangkat: Lokasi perangkat <br>  bendera: baca, tulis <br>  Tali  Default: "/ dev / video0" <br>  device-name: Nama perangkat <br>  bendera: dapat dibaca <br>  Tali  Default: "" <br>  initial-bitrate: Bitrate awal dalam bits / detik (kontrol statis) <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Integer yang Tidak Ditandatangani.  Kisaran: 0 - 4294967295 Default: 3.000.000 <br>  slice-units: Unit slice (kontrol statis) <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Integer yang Tidak Ditandatangani.  Kisaran: 0 - 65535 Default: 4 <br>  slice-mode: Menentukan unit properti slice-unit (kontrol statis) <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Enum "UvcH264SliceMode" Default: 3, "slice / frame" <br>  (0): diabaikan - Diabaikan <br>  (1): bits / slice - Bits per slice <br>  (2): MBs / slice - MBs per Slice <br>  (3): slice / frame - Slice Per Frame <br>  iframe-period: Waktu antara frame IDR dalam milidetik (kontrol statis) <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Integer yang Tidak Ditandatangani.  Kisaran: 0 - 65535 Default: 10000 <br>  tipe penggunaan: Jenis penggunaan (kontrol statis) <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Enum "UvcH264UsageType" Default: 1, "realtime" <br>  (1): realtime - Realtime (konferensi video) <br>  (2): disiarkan - Siaran <br>  (3): penyimpanan - Penyimpanan <br>  (4): ucconfig0 - UCConfig 0 <br>  (5): ucconfig1 - UCConfig 1 <br>  (6): ucconfig2q - UCConfig 2Q <br>  (7): ucconfig2s - UCConfig 2S <br>  (8): ucconfig3 - UCConfig 3 <br>  entropi: Entropy (kontrol statis) <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Enum "UvcH264Entropy" Default: 0, "cavlc" <br>  (0): cavlc - CAVLC <br>  (1): cabac - CABAC <br>  enable-sei: Mengaktifkan pewaktuan gambar SEI (kontrol statis) <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Boolean.  Default: false <br>  num-menyusun ulang-frame: Jumlah frame B antara frame referensi (kontrol statis) <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Integer yang Tidak Ditandatangani.  Kisaran: 0 - 255 Default: 0 <br>  pratinjau-membalik: gambar membalik horisontal untuk aliran non H.264 (kontrol statis) <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Boolean.  Default: false <br>  leaky-bucket-size: Ukuran ukuran bucket bocor dalam milidetik (kontrol statis) <br>  bendera: baca, tulis, hanya bisa NULL atau SIAP <br>  Integer yang Tidak Ditandatangani.  Kisaran: 0 - 65535 Default: 1000 <br>  kontrol tingkat: mode kontrol tingkat (kontrol statis &amp; dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Enum "UvcH264RateControl" Default: 1, "cbr" <br>  (1): cbr - laju bit konstan <br>  (2): vbr - Laju bit variabel <br>  (3): qp - QP Konstan <br>  fixed-framerate: Fixed framerate (kontrol statis &amp; dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Boolean.  Default: false <br>  max-mbps: Jumlah makroblok per detik untuk kecepatan pemrosesan maksimum <br>  bendera: dapat dibaca <br>  Integer yang Tidak Ditandatangani.  Kisaran: 0 - 4294967295 Default: 0 <br>  level-idc: Level IDC (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer yang Tidak Ditandatangani.  Kisaran: 0 - 255 Default: 40 <br>  peak-bitrate: Bitrate puncak dalam bit / detik (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer yang Tidak Ditandatangani.  Kisaran: 0 - 4294967295 Default: 3.000.000 <br>  bitrate rata-rata: Bitrate rata-rata dalam bit / detik (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer yang Tidak Ditandatangani.  Kisaran: 0 - 4294967295 Default: 3.000.000 <br>  min-iframe-qp: Ukuran langkah Kuantisasi minimum untuk frame I (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer  Kisaran: -127 - 127 Default: 10 <br>  max-iframe-qp: Ukuran langkah Kuantisasi minimum untuk frame I (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer  Kisaran: -127 - 127 Default: 46 <br>  min-pframe-qp: Ukuran langkah Kuantisasi minimum untuk bingkai P (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer  Kisaran: -127 - 127 Default: 10 <br>  max-pframe-qp: Ukuran langkah Kuantisasi minimum untuk bingkai P (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer  Kisaran: -127 - 127 Default: 46 <br>  min-bframe-qp: Ukuran langkah Kuantisasi minimum untuk bingkai B (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer  Kisaran: -127 - 127 Default: 10 <br>  max-bframe-qp: Ukuran langkah Kuantisasi minimum untuk bingkai B (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer  Kisaran: -127 - 127 Default: 46 <br>  ltr-buffer-size: Jumlah total frame Referensi Jangka Panjang (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer  Kisaran: 0 - 255 Default: 0 <br>  ltr-encoder-control: Jumlah bingkai LTR yang dapat dikendalikan perangkat (kontrol dinamis) <br>  bendera: baca, tulis, bisa NULL, SIAP, DITINGGALKAN atau MAINKAN <br>  Integer  Kisaran: 0 - 255 Default: 0 <br><br>  Tindakan Elemen: <br>  "Get-enum-setting": gboolean user_function (objek GstElement *, <br>  gchararray arg0, <br>  gpointer arg1, <br>  gpointer arg2); <br>  "Get-boolean-setting": gboolean user_function (objek GstElement *, <br>  gchararray arg0, <br>  gpointer arg1, <br>  gpointer arg2); <br>  "Get-int-setting": gboolean user_function (objek GstElement *, <br>  gchararray arg0, <br>  gpointer arg1, <br>  gpointer arg2, <br>  gpointer arg3); <br>  "Mulai-tangkap": void user_function (objek GstElement *); <br>  "Stop-capture": void user_function (objek GstElement *); <br></div></div><br>  Banyak dari parameter ini dapat digunakan untuk mengkonfigurasi parameter dalam kompresi H.264.  Saya menemukan ini agak mengejutkan mengingat kompresi dilakukan oleh chip di dalam kamera.  Contoh berikut meningkatkan kecepatan data default dari 3 menjadi 5 Mbps dan mengurangi interval keyframe default dari 10 menjadi 3 detik: <br><br><pre> <code class="bash hljs">gst-launch-1.0 -v -e uvch264src initial-bitrate=5000000 average-bitrate=5000000 iframe-period=3000 device=/dev/video0 name=src auto-start=<span class="hljs-literal"><span class="hljs-literal">true</span></span> src.vfsrc ! queue ! video/x-raw,format=YUY2,width=320,height=240,framerate=10/1 ! xvimagesink sync=<span class="hljs-literal"><span class="hljs-literal">false</span></span> src.vidsrc ! queue ! video/x-h264,width=1280,height=720,framerate=30/1 ! h264parse ! avdec_h264 ! xvimagesink sync=<span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br>  Di sisi lain, tidak ada parameter untuk menyesuaikan parameter webcam yang biasa, seperti kontras, kecerahan, fokus, dll. Jadi, untuk mengkonfigurasinya, kita masih memerlukan alat eksternal, seperti v4l2.ctl, atau opsi yang disebutkan dalam bagian selanjutnya. <br><br><h4>  v4l2src </h4><br>  Sepertinya kita juga bisa menggunakan v4l2src lama yang bagus untuk menangkap stream yang dikodekan H.264 dari Logitech C920: <br><br><pre> <code class="bash hljs">gst-launch-1.0 -v -e v4l2src device=/dev/video1 ! queue ! video/x-h264,width=1280,height=720,framerate=30/1 ! h264parse ! avdec_h264 ! xvimagesink sync=<span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br>  Ini kemungkinan disebabkan oleh evolusi gstreamer dan V4L2.  Opsi ini terlihat lebih sederhana jika Anda tidak perlu mengubah pengaturan kompresi H.264, dan ini memberi kami akses ke pengaturan kamera seperti kecerahan dan kontras.  Ini juga memiliki keuntungan berada dalam paket plugin yang baik yang mungkin lebih baik disimpan di masa depan. <br><br><h4>  Webcasting via Gstreamer </h4><br>  Di komputer penerima, mulai penerima: <br><br><pre> <code class="bash hljs">gst-launch-1.0 -v udpsrc port=6666 ! application/x-rtp, encoding-name=H264 ! rtph264depay ! h264parse ! avdec_h264 ! videoconvert ! autovideosink</code> </pre> <br>  Pada perangkat dengan kamera, kami memulai transmisi video yang disandikan dengan perangkat keras: <br><br><pre> <code class="bash hljs">gst-launch-1.0 uvch264src name=src auto-start=<span class="hljs-literal"><span class="hljs-literal">true</span></span> src.vidsrc ! video/x-h264,width=160,height=120,framerate=30/1 ! h264parse ! rtph264pay ! udpsink host=192.168.1.196 port=6666</code> </pre> <br>  Terima kasih khusus kepada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Amomum</a> karena membantu saya menulis kode ini. <br><br><h4>  Ringkasan Penundaan Siaran Video melalui Gstreamer </h4><br>  Bahkan dengan resolusi 1920 * 1080, beban prosesor pada Beaglebone Blue tidak melebihi 30%, dan penundaan video tidak lebih dari 0,3 detik.  Ya, karena video dalam versi ini disiarkan melalui udp, ketika paket-paket hilang, gambar berantakan ke bingkai kunci berikutnya, tetapi kita dapat mengonfigurasinya sehingga bingkai kunci dikirim lebih sering. <br><br><h3>  Tugas ROS </h3><br>  Tetap sekarang hanya untuk mendorong video yang diterima ke ROS, jika ada yang bisa membantu dengan ini, tulis secara pribadi. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id415567/">https://habr.com/ru/post/id415567/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id415557/index.html">Codec 2 + jaringan saraf = seluruh podcast pada satu disket</a></li>
<li><a href="../id415559/index.html">Sejarah pengembangan pusat panggilan, atau bagaimana teknologi telah mengubah pekerjaan operator dengan pelanggan</a></li>
<li><a href="../id415561/index.html">Cara mendorong acara dari Veeam Backup & Replication ke dalam instant messenger</a></li>
<li><a href="../id415563/index.html">Perawatan Scrum "mekanis". Bagian 2. Tim</a></li>
<li><a href="../id415565/index.html">Mengapa (hari ini) kembali 444 tidak selalu berguna</a></li>
<li><a href="../id415569/index.html">HOWTO setup ubuntu 18.04 sendmail + DKIM + SPF + DMARC atau bagaimana saya berhasil masuk ke dalam benteng Gmail</a></li>
<li><a href="../id415571/index.html">kaggle: Identifikasi Model Kamera IEEE</a></li>
<li><a href="../id415573/index.html">Optimalisasi model untuk pencetakan 3D menggunakan perangkat lunak Blender sebagai contoh</a></li>
<li><a href="../id415575/index.html">Fungsi untuk mendokumentasikan database PostgreSQL. Bagian satu</a></li>
<li><a href="../id415577/index.html">Slide kursus "Teknologi dan Pengembangan DBMS"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>