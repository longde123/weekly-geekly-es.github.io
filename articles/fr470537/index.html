<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÜñÔ∏è üìü üë©üèø‚Äçüè´ Nouveau package de validation pour React sur Mobx @ quantumart / mobx-form-validation-kit üìº üå§Ô∏è üë´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bon apr√®s-midi 
 Aujourd'hui, je veux parler d'un nouveau package pour les validations asynchrones dans les projets bas√©s sur React , Mobx et √©crits e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nouveau package de validation pour React sur Mobx @ quantumart / mobx-form-validation-kit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470537/">  Bon apr√®s-midi <br>  Aujourd'hui, je veux parler d'un nouveau package pour les validations asynchrones dans les projets bas√©s sur <i>React</i> , <i>Mobx</i> et √©crits en <i>Typescript</i> . <br>  Le d√©veloppement de Frontend moderne implique une grande quantit√© de logique lors du remplissage des pages avec des documents, des questionnaires et des documents pour un pr√™t, des ordres de paiement, des pages d'inscription sur le site.  La principale charge logique incombe aux contr√¥les de validation.  <i>Les</i> d√©veloppeurs <i>angulaires</i> ont r√©fl√©chi √† ce point et proposent aux d√©veloppeurs d'utiliser le m√©canisme <b>FormControl int√©gr√©</b> √† ces fins, qui, bien qu'il pr√©sente un certain nombre d'inconv√©nients, est toujours meilleur que l'absence totale d'une telle solution sur <i>React</i> .  La situation est compliqu√©e par le fait que la tendance actuelle du d√©veloppement de <i>React</i> implique l'utilisation de mobx pour organiser la logique m√©tier. <br>  Face √† ces probl√®mes, nous les avons tous r√©solus en √©crivant un package: <i><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@ quantumart / mobx-form-validation-kit</a></b></i> <br><br>  Avantages du package: <br><ul><li> Enti√®rement sur <i>TypeScript</i> </li><li>  Compatible avec Mobx (version 4, qui prend en charge, le favori de tous, IE10) </li><li>  Con√ßu pour fonctionner dans <i>React</i> (peut √™tre utilis√© dans des projets sans r√©agir) </li><li>  Con√ßu pour la validation asynchrone </li><li>  Facile √† int√©grer dans un projet existant. </li></ul><br>  Instructions pour travailler avec le paquet sous la coupe. <br><a name="habracut"></a><br><br>  Au d√©but, nous d√©crirons les fonctionnalit√©s du <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">package @ quantumart / mobx-form-validation-kit</a></i> , √† la fin de l'article, nous √©crirons une page enti√®rement fonctionnelle avec un exemple du formulaire d'inscription sur le site. <br><br><h2>  Formcontrol </h2><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@ quantumart / mobx-form-validation-kit</a></i> vous permet de cr√©er une couche entre les donn√©es source et le formulaire √† afficher.  Ce qui, √† son tour, vous permet de les valider et, si n√©cessaire, de modifier les donn√©es avant qu'elles n'atteignent l'objet d'origine. <br><img src="https://habrastorage.org/webt/ng/tj/qw/ngtjqwnwm_yh1bkjtiwn6o41pwk.png"><br>  La <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®que @ quantumart / mobx-form-validation-kit</a></i> contient trois classes principales (composants de validation) pour g√©rer le formulaire: <br><ul><li>  <b>FormGroup</b> - vous permet de combiner des composants de validation ensemble.  La classe est typ√©e et vous permet de refaire l'interface avec la liste des champs en param√®tre g√©n√©rique.  Any est enregistr√© par d√©faut, il est fortement recommand√© de ne pas l'utiliser sans taper, mais il y a une possibilit√©. </li><li>  <b>FormControl</b> - utilis√© pour valider un champ sp√©cifique, la classe la plus couramment utilis√©e.  La classe est typ√©e et prend comme param√®tre g√©n√©rique le type de la variable qu'elle doit stocker.  Par d√©faut, la cha√Æne est enregistr√©e, car  la valeur par d√©faut est string, comme option la plus priv√©e pour les formulaires. </li><li>  <b>FormArray</b> - vous permet de cr√©er et de g√©rer un tableau de composants de validation. </li></ul><br>  De plus, il existe des classes abstraites de base <br><ul><li>  <b>AbstractControl</b> - la classe de base pour toutes les classes de validation r√©pertori√©es, non typ√©e. </li><li>  <b>FormAbstractControl</b> - classe de base pour <b>FormGroup</b> et <b>FormArray</b> , non typ√©e. </li><li>  <b>FormAbstractGroup</b> - pas une classe de base typ√©e pour FormControl, contient un lien vers l'√©l√©ment html qui est rendu. </li></ul><br>  La meilleure pratique pour cr√©er un formulaire de validation serait l'id√©e suivante. <br>  Un objet de type un <b>FormGroup</b> est cr√©√© sur le formulaire et les champs y sont d√©j√† r√©pertori√©s <br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormGroup&lt;IUserInfo&gt;({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.name, [], v =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.name = v) ), <span class="hljs-attr"><span class="hljs-attr">surname</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.surname, [], v =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.surname = v) ) <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶ });</span></span></code> </pre> <br>  <b>FormGroup</b> prend en charge l'imbrication, c'est-√†-dire <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormGroup&lt;IUserInfo&gt;({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.name, [], v =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.name = v) ), <span class="hljs-attr"><span class="hljs-attr">surname</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.surname, [], v =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.surname = v) ) passport: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormGroup&lt;IPassport &gt;({ <span class="hljs-attr"><span class="hljs-attr">number</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.passport.number, [], v =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.passport.number = v) ), <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶ }) // ‚Ä¶ });</span></span></code> </pre><br>  Vous pouvez ajouter <b>FormArray</b> , qui √† son tour peut √™tre pass√© le type <b>FormControl</b> et ou l'ensemble <b>FormGroup</b> cr√©ant des objets de toute complexit√© et structure. <br><ul><li>  FormArray &lt;FormControl&gt; <br>  FormArray &lt;FormGroup&gt; <br><br>  <b>FormControl</b> lui-m√™me prend l'ensemble de param√®tres suivant dans le constructeur <br><ul><li>  <b>valeur</b> : TEntity est la valeur initiale typ√©e. </li><li>  <b>validateurs</b> : ValidatorFunctionFormControlHandler [] - un ensemble de validateurs. </li><li>  <b>callbackValidValue</b> : UpdateValidValueHandler |  null - fonction de rappel √† laquelle la derni√®re valeur valide est transmise.  Elle est appel√©e chaque fois qu'une valeur de FormControl change et cette valeur passe les validations d√©crites. </li><li>  <b>activer</b> : (() =&gt; bool√©en) |  null - la fonction activera / d√©sactivera les validations par condition (toujours activ√©e par d√©faut).  Par exemple, la validit√© de la date de fin du service n'a pas besoin d'√™tre v√©rifi√©e si la case "Illimit√©" n'est pas coch√©e.  Par cons√©quent, en entrant simplement une fonction ici qui v√©rifie l'√©tat du champ <i>observable</i> responsable de la case √† cocher "Illimit√©", vous pouvez d√©sactiver automatiquement toutes les validations associ√©es au champ pour v√©rifier la date, plut√¥t que d'enregistrer cette logique dans chacune des validations du champ de date. </li><li>  <b>additionalData</b> : TAdditionalData |  null - un bloc contenant des informations suppl√©mentaires vous permet d'ajouter des informations suppl√©mentaires √† un <b>FormControl</b> sp√©cifique et de les utiliser ult√©rieurement, par exemple, pour la visualisation.  Cela est pratique s'il existe des g√©n√©rateurs pour <b>FormControl</b> dans lesquels vous devez analyser certaines informations et ne pas transmettre ces informations via un ensemble de donn√©es complexes aux contr√¥les pour la visualisation.  Bien que je ne puisse pas donner un sc√©nario d'application exact et ind√©niable, il vaut mieux avoir une telle opportunit√© que d'en souffrir. </li></ul><br>  Il y a aussi une limitation <i>qu'Angular FormControl</i> a: il n'est pas n√©cessaire de r√©utiliser des objets sur des formulaires diff√©rents.  C'est-√†-dire  Vous pouvez cr√©er un <b>g√©n√©rateur</b> FormGroup et cr√©er votre propre objet sur chaque page.  Mais utiliser un objet par paquet de pages est une mauvaise pratique. <br>  De plus, <b>FormControl est</b> initialis√© avec une seule valeur, et si cette valeur est modifi√©e, la nouvelle valeur n'entrera pas dans <b>FormControl</b> .  Cela a √©t√© fait expr√®s, car, comme la pratique l'a montr√©, pour une raison quelconque, tout le monde essaie obstin√©ment de modifier initialement l'objet d'origine en contournant les validations, et non la valeur dans <b>FormControl</b> .  Attribuez simplement une nouvelle valeur au champ de <b>valeur</b> du <b>FormControl</b> pour modifier l'objet d'origine. <br>  <b>FormGroup</b> accepte l'ensemble de param√®tres suivant dans le constructeur: <br><ul><li>  <b>contr√¥les</b> : TControls - un objet h√©rit√© de <b>AbstractControls</b> .  En fait, il suffit de cr√©er une <i>interface</i> h√©rit√©e de <b>AbstractControls</b> dans laquelle vous <b>√©num√©rez</b> des champs de type <b>FormGroup</b> , <b>FormControl</b> , <b>FormArray</b> .  Vous pouvez bien s√ªr d√©finir le type sur <i>any</i> , mais tous les avantages de <i>TypeScript</i> seront perdus. </li><li>  <b>validateurs</b> : ValidatorFunctionFormGroupHandler [] - un ensemble de validateurs pour les valeurs de groupe.  Par exemple, vous pouvez cr√©er un <b>FormGroup</b> contenant deux valeurs - la date minimale et maximale, pour le contr√¥le de s√©lection de p√©riode.  C'est dans ces validateurs que vous devrez passer la fonction / les fonctions de v√©rification de la plage de dates.  Par exemple, que la date de d√©but n'est pas sup√©rieure √† la date de fin </li><li>  <b>activer</b> : (() =&gt; bool√©en) |  null - la fonction activera / d√©sactivera les validations par condition (toujours activ√©e par d√©faut).  Il faut comprendre que l'application de la fonction de validation √† un groupe d√©sactive la validation au niveau de l'ensemble du groupe.  Par exemple, nous avons une bo√Æte de s√©lection pour un document d'identit√©.  Vous pouvez cr√©er plusieurs <b>FormGroups</b> avec un ensemble diff√©rent de champs pour les documents: passeport, permis de conduire, passeport de marin, etc. ... Dans cette fonction, v√©rifiez les valeurs d√©roulantes, et si la valeur s√©lectionn√©e ne correspond pas √† ce groupe, toutes les v√©rifications de validation sont d√©sactiv√©es.  Plus pr√©cis√©ment, le groupe sera consid√©r√© comme valide, quelles que soient les valeurs qu'il contient. </li></ul><br>  Parlons des champs <b>FormControl</b> , y compris la pr√©sence de <b>FormGroup</b> et <b>FormArray</b> . <br><ul><li>  <b>ControlTypes</b> - type de contr√¥le (Control | Group | Array) </li><li>  <b>traitement</b> : bool√©en - en cours d'analyse.  Parce que  Les validations asynchrones sont prises en charge, par exemple celles qui n√©cessitent une demande de serveur.  L'√©tat actuel de l'analyse se trouve dans ce champ. <br>  En outre, <b>FormGroup</b> et <b>FormArray</b> prennent en charge la m√©thode d' <b>attente</b> , qui vous permet d'attendre la fin de la v√©rification.  Par exemple, lorsque vous cliquez sur le bouton "envoyer des donn√©es", vous devez enregistrer le mod√®le suivant. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form.wait(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form.invalid) { ‚Ä¶</code> </pre> <br></li><li>  <b>d√©sactiv√©</b> : bool√©en - la v√©rification des erreurs est d√©sactiv√©e (le contr√¥le est toujours valide) </li><li>  <b>actif</b> : bool√©en - la v√©rification des erreurs est activ√©e.  D√©pend du r√©sultat de la fonction d'activation.  Cette valeur est tr√®s pratique √† utiliser pour masquer un groupe de champs sur un formulaire et non pour √©crire des fonctions suppl√©mentaires et en double de la logique m√©tier. </li><li>  <b>invalide</b> : bool√©en;  - pour <b>FormControl</b> - signifie que le champ contient des erreurs de validation.  Pour <b>FormGroup</b> et <b>FormArray, cela</b> signifie que le contr√¥le de groupe lui-m√™me contient des erreurs, ou l'un des champs imbriqu√©s (√† l'un des niveaux d'imbrication) contient des erreurs de validation.  C'est-√†-dire  pour v√©rifier la validit√© de l'ensemble du formulaire, il suffit d'effectuer une v√©rification invalide ou valide du FormGroup sup√©rieur. </li><li>  <b>valide</b> : bool√©en - pour <b>FormControl</b> - signifie que le champ ne contient pas d'erreurs de validation.  Pour FormGroup et FormArray, cela signifie que le contr√¥le de groupe lui-m√™me ne contient pas d'erreurs et qu'aucun des champs imbriqu√©s (√† aucun niveau d'imbrication) ne contient d'erreurs de validation. </li><li>  <b>pristine</b> : boolean - la valeur dans le champ, apr√®s l'initialisation avec la valeur par d√©faut, n'a pas chang√©. </li><li>  <b>dirty</b> : boolean - la valeur dans le champ, apr√®s l'initialisation avec la valeur par d√©faut, a chang√©. </li><li>  <b>intacte</b> : bool√©en - pour <b>FormControl</b> - signifie que le champ (par exemple, entr√©e) n'√©tait pas au point.  For FormGroup et FormArray signifie qu'aucun des FormControls imbriqu√©s n'√©tait au point.  Une valeur false dans ce champ signifie que le focus a √©t√© non seulement d√©fini, mais √©galement supprim√© du champ. </li><li>  <b>touched</b> : boolean - Pour <b>FormControl</b> - signifie que le champ (par exemple, entr√©e) √©tait au point.  Pour <b>FormGroup</b> et <b>FormArray</b> , cela signifie que l'un des <b>FormControls</b> imbriqu√©s √©tait au point.  Une valeur true dans ce champ signifie que le focus a √©t√© non seulement d√©fini, mais √©galement supprim√© du champ. </li><li>  <b>focus</b> : bool√©en - pour <b>FormControl</b> - signifie que le champ (par exemple, entr√©e) est maintenant au point.  Pour <b>FormGroup</b> et <b>FormArray</b> , cela signifie que l'un des <b>FormControls</b> imbriqu√©s <b>est</b> maintenant au point. </li><li>  <b>erreurs</b> : ValidationEvent [] - le champ contient des erreurs de validation.  Contrairement aux champs r√©pertori√©s, ce tableau contient exactement les erreurs de <b>FormControl</b> , <b>FormGroup</b> ou <b>FormArray</b> , c'est-√†-dire  erreurs de ce contr√¥le, et pas toutes imbriqu√©es.  Affecte un champ valide / invalide </li><li>  <b>warnings</b> : ValidationEvent [] - le champ contient des messages d'avertissement.  Contrairement aux champs r√©pertori√©s, ce tableau contient exactement les erreurs de FormControl, FormGroup ou FormArray, c'est-√†-dire  messages de ce contr√¥le, mais pas tous attach√©s.  N'affecte pas le champ valide / invalide </li><li>  <b>informationMessages</b> : ValidationEvent [] - le champ contient des messages d'information.  Contrairement aux champs r√©pertori√©s, ce tableau contient exactement les erreurs de FormControl, FormGroup ou FormArray, c'est-√†-dire  messages de ce contr√¥le, mais pas tous attach√©s.  N'affecte pas le champ valide / invalide </li><li>  <b>succ√®s</b> : ValidationEvent - le champ contient des messages de validit√© suppl√©mentaires.  Contrairement aux champs r√©pertori√©s, ce tableau contient exactement les erreurs de FormControl, FormGroup ou FormArray, c'est-√†-dire  messages de ce contr√¥le, mais pas tous attach√©s.  N'affecte pas le champ valide / invalide </li><li>  <b>maxEventLevel ()</b> - le niveau maximum de messages de validation actuellement dans le champ. </li><li>  La m√©thode renverra l'une des valeurs d'√©num√©ration, dans la priorit√© suivante. <br><ol><li>  ValidationEventTypes.Error; </li><li>  ValidationEventTypes.Warning; </li><li>  ValidationEventTypes.Info; </li><li>  ValidationEventTypes.Success; </li></ol><br></li><li>  <b>serverErrors</b> : string [] - apr√®s avoir envoy√© un message au serveur, il est bon de v√©rifier √©galement la validit√© du formulaire sur le serveur.  Par cons√©quent, le serveur peut renvoyer des erreurs de la v√©rification de forme finale et le tableau <b>serverErrors</b> est destin√© √† ces erreurs.  Une caract√©ristique cl√© de <b>serverErrors</b> est le nettoyage automatique des messages de validation lorsque le focus est perdu du champ auquel les erreurs de serveur ont √©t√© affect√©es, et les erreurs de serveur sont √©galement effac√©es si le champ a √©t√© modifi√©. </li><li>  onChange: D√©l√©gu√© - en plus du m√©canisme <i>mobx</i> standard - <i>r√©action,</i> vous pouvez utiliser d√©l√©gu√© et lui ajouter une fonction de rappel, qui est appel√©e lorsque les donn√©es changent. </li><li>  <b>setDirty</b> (dirty: boolean): void - la m√©thode vous permettra de modifier la valeur des champs <b>vierges</b> / <b>sales</b> </li><li>  <b>setTouched</b> (touched: boolean): void;  - la m√©thode vous permettra de changer la valeur des champs <b>non</b> <b>touch√©s</b> / <b>touch√©s</b> </li><li>  <b>dispose</b> (): vide;  - requis pour appeler le contr√¥le responsable de la page dans componentWillUnmount. </li></ul><br><br>  Ces champs √©taient communs √† tous les contr√¥les, mais chaque contr√¥le poss√®de √©galement des champs uniques √† son type. <br>  <b>Formcontrol</b> <br><ul><li>  <b>valeur</b> - contient la valeur actuelle du champ.  Vous pouvez √©galement attribuer une nouvelle valeur √† ce champ. </li></ul><br><br>  <b>FormGroup</b> et <b>FormArray</b> contiennent <br><ul><li>  <b>wait</b> - la m√©thode vous permet de vous attendre √† la fin des contr√¥les de tous (validations) y compris imbriqu√©s </li><li>  <i>allControls ()</i> - cette m√©thode vous permet d'obtenir un ensemble complet de tous les FormControl, y compris imbriqu√©s √† diff√©rents niveaux.  C'est-√†-dire  en fait, il d√©veloppe un objet FormGroup √† plusieurs niveaux, qui peut √©galement contenir FormGroup, en une seule grande liste compos√©e uniquement de FormControl.  Cette fonctionnalit√© est requise si nous voulons trouver le premier √©l√©ment invalide et y mettre l'accent. <br>  le code, dans ce cas, ressemblerait √† ceci: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form.wait(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form.invalid) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form.setTouched(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> firstError = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form.allControls().find(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c.invalid &amp;&amp; !!c.element); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!firstError) { firstError.element.focus(); } } ...</code> </pre> <br></li></ul><br><br><h2>  Validations </h2><br>  Bien s√ªr, en plus des contr√¥les qui vous permettent de travailler avec des donn√©es, nous avons besoin de validations elles-m√™mes.  Le <i><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">package @ quantumart / mobx-form-validation-kit</a></b></i> contient naturellement un certain nombre de validations pr√©d√©finies et prend √©galement en charge la cr√©ation de validations personnalis√©es personnalis√©es. <br>  Un exemple de d√©finition de validations pour <b>FormControl</b> pour un champ d'√¢ge. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl&lt;number&gt;( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.age, [required(), minValue(<span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-string"><span class="hljs-string">"    18 ."</span></span>, ValidationEventTypes.Warning)], v =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.age = v) )</code> </pre> <br>  Chaque validation avec les derniers param√®tres prend: <br><ul><li>  Message - Un message de validation. </li><li>  eventType - niveau du message.  4 niveaux de messages sont pris en charge. <br><ol><li>  Erreur - erreurs </li><li>  Avertissement - avertissements </li><li>  Info - Messages d'information </li><li>  Succ√®s - messages sur la validit√©.  Par exemple, vous pouvez v√©rifier que le mot de passe est vraiment complexe. </li></ol><br></li></ul><br>  Le package contient l'ensemble de validations suivant: <br><ul><li>  <b>obligatoire</b> (... - champ obligatoire </li><li>  <b>notEmptyOrSpaces</b> (... - le champ n'est pas vide et ne contient pas que des espaces. En fait, obligatoire, compte tenu de l'interdiction des espaces. </li><li>  <b>pattern</b> (regExp: RegExp, ... - le premier param√®tre est l'expression r√©guli√®re √† laquelle le champ doit correspondre. Une erreur est g√©n√©r√©e s'il n'y a pas de correspondance de mod√®le. </li><li>  <b>invertPattern</b> (regExp: RegExp, ... - le premier param√®tre est l'expression r√©guli√®re √† laquelle le champ ne doit pas correspondre. Une erreur est g√©n√©r√©e s'il existe une correspondance de mod√®le. </li><li>  <b>minLength</b> (minlength: nombre, .... - le premier param√®tre est la longueur minimale du texte inclus. Une erreur est g√©n√©r√©e si la longueur est inf√©rieure √† celle transmise. </li><li>  <b>maxLength</b> (maxlength: nombre, .... - le premier param√®tre est la longueur maximale du texte inclus. Une erreur est √©mise si la longueur est plus longue que celle transmise. </li><li>  <b>absoluteLength</b> (longueur: nombre, .... - le premier param√®tre est la longueur exacte du texte. Une erreur est √©mise si la longueur ne correspond pas √† celle sp√©cifi√©e. </li><li>  <b>minValue</b> (min: TEntity | (() =&gt; TEntity), ... - cette validation est destin√©e uniquement aux nombres et aux dates. Une erreur est d√©finie si la valeur est inf√©rieure √† la valeur sp√©cifi√©e. La particularit√© de la validation est la capacit√© d'accepter non seulement une valeur sp√©cifique, mais aussi , ce qui signifie que si vous lisez la valeur de cette fonction dans le champ @observable de l'objet, la validation elle-m√™me sera red√©marr√©e non seulement lorsque le champ auquel la validation est suspendue est modifi√©, mais √©galement lorsque le ¬´champ li√©¬ª est modifi√©.  premier hors champ de l'√©tiquette qui est lue comme la valeur @observable. </li><li>  <b>maxValue</b> (max: TEntity | (() =&gt; TEntity), ... - cette validation est destin√©e uniquement aux nombres et aux dates. Une erreur est d√©finie si la valeur est sup√©rieure √† celle sp√©cifi√©e. La fonction de validation est la capacit√© d'accepter non seulement une valeur sp√©cifique, mais aussi , ce qui signifie que si vous lisez la valeur de cette fonction dans le champ @observable de l'objet, la validation elle-m√™me sera red√©marr√©e non seulement lorsque le champ auquel la validation est suspendue est modifi√©, mais √©galement lorsque le ¬´champ li√©¬ª est modifi√©.  premier hors champ de l'√©tiquette qui est lue comme la valeur @observable </li><li>  <b>notContainSpaces</b> (... - contrairement √† notEmptyOrSpaces, une erreur sera √©mise si la valeur contient m√™me au moins un espace. </li><li>  <b>compare</b> (expression: (valeur: TEntity) =&gt; bool√©en (... - l'√©criture de votre propre fonction de validation g√©n√®re beaucoup de code copier-coller, ce wrapper a √©t√© d√©velopp√© pour se d√©barrasser de ce probl√®me. Cette fonction de validation accepte une fonction comme premier param√®tre, qui √† son tour transmet la valeur actuelle , ce qui vous permet d'effectuer une v√©rification complexe, par exemple, de calculer le hachage pour le num√©ro TIN ou le num√©ro de passeport, puis de renvoyer true / false. Une erreur s'affiche si la v√©rification renvoie false. </li><li>  <b>isEqual</b> (valeur: cha√Æne ... - une simple v√©rification de correspondance de cha√Æne. </li></ul><br>  Ce qui suit d√©crit les fonctions d'encapsuleur qui contr√¥lent le flux des d√©clencheurs de validation. <br>  Il convient de noter que l'ensemble des validations pass√©es √† <b>FormControl</b> , <b>FormGroup</b> , <b>FormArray est</b> lanc√© dans un seul tableau et n'a en fait aucune s√©quence d'ex√©cution.  √Ä la suite du travail, nous aurons dans les champs des <i>erreurs</i> , des <i>avertissements</i> , des <i>messages d'</i> <i>information</i> , des tableaux de <i>succ√®s</i> compos√©s d'erreurs, d'avertissements, combin√©s en un seul tableau, etc. <br>  Souvent, le client ne souhaite voir qu'une seule erreur, et pas toutes √† la fois.  De plus, le TOR peut √™tre con√ßu de telle sorte qu'un contr√¥le ne soit effectu√© qu'apr√®s le pr√©c√©dent. <br>  Pour r√©soudre ce probl√®me, <b>wrapperSequentialCheck</b> est utilis√©.  Son appel et son application ne diff√®rent pas du validateur de fonction habituel, mais √† l'entr√©e, il re√ßoit un tableau de validateurs qui seront lanc√©s s√©quentiellement, c'est-√†-dire  La validation suivante ne d√©marre qu'apr√®s que la pr√©c√©dente s'est pass√©e sans erreur. <br>  La deuxi√®me fonction wrapper est la fonction de contr√¥le de flux des validations.  <b>wrapperActivateValidation comme</b> premier param√®tre prend une fonction dans laquelle les conditions d'activation de la validation doivent √™tre √©crites.  Contrairement √† la fonction d'activation transmise √† FormControl, cette v√©rification est con√ßue pour une logique plus complexe.  Supposons que nous ayons un g√©n√©rateur commun pour l'ensemble des formes de paiement <b>FormGroup</b> , et de plus, il n'y a qu'une seule m√©thode sur le serveur qui accepte un ensemble commun de champs.  Mais le hic, c'est que m√™me si le formulaire en est un, en fonction du "type de paiement", nous montrons un ensemble de champs diff√©rent √† l'utilisateur.  Ainsi, <b>wrapperActivateValidation vous</b> permet d'√©crire une logique dans laquelle diff√©rents contr√¥les seront effectu√©s en fonction du type de paiement. <br>  L'utilisation de wrappers ressemblera √† des fonctions ordinaires. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.megapole, [wrapperActivateValidation(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.info.A === <span class="hljs-number"><span class="hljs-number">10</span></span>, [ required(), pattern(<span class="hljs-regexp"><span class="hljs-regexp">/\^d{10}$/</span></span>) ]), wrapperActivateValidation(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.info.A === <span class="hljs-number"><span class="hljs-number">20</span></span>, [ wrapperSequentialCheck([ notContainSpaces(), pattern(<span class="hljs-regexp"><span class="hljs-regexp">/\^d{20}$/</span></span>) ]) ])], v =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.megapole = v) )</code> </pre><br>  Cet exemple montre que les <i>v√©rifications</i> <i>requises (), de mod√®le (/ \ ^ d {10} $ /)</i> seront effectu√©es uniquement avec <i>this.info.A === 10</i> , et si <i>this.info.A === 20</i> , alors les <i>validations notContainSpaces (), pattern (/ \ ^ d {20} $ /)</i> fonctionneront, de plus, ces validations fonctionneront s√©quentiellement, contrairement au premier cas. <br><br>  Naturellement, le moment viendra o√π l'ensemble de validations standard ne sera plus suffisant. <br>  Ensuite, vous devez √©crire vos propres fonctions asynchrones.  Heureusement, cela se fait sans difficult√©s particuli√®res. <br>  <b>FormControl a</b> √©t√© initialement affin√© par des fonctions de validation asynchrones, qui pourraient vouloir aller sur le serveur pour les donn√©es, et cette r√©ponse doit attendre.  Et par cons√©quent, toutes les validations sont asynchrones. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkValueOnServer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">control: FormControl</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Promise</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ValidationEvent</span></span></span><span class="hljs-function">[]&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (control.value == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> sendToServer(control.value); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result.errorMessage) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ { <span class="hljs-attr"><span class="hljs-attr">message</span></span>: result.errorMessage, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: ValidationEventTypes.Error, }, ]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; }</code> </pre> <br>  Ici, vous devez faire attention √† deux objets. <br>  D'abord, nous nous occupons toujours du tableau.  C'est-√†-dire  en fait, vous pouvez renvoyer plusieurs messages d'erreur √† la fois, si vous le souhaitez. <br>  Le deuxi√®me point est l'objet renvoy√©; il poss√®de l'ensemble de champs suivant. <br><ul><li>  <b>key</b> ?: string - un champ facultatif, vous permet de sp√©cifier une "cl√©" pour une validation sp√©cifique.  Pour toutes les cl√©s de base, la cl√© est unique et correspond √† leur nom.  Vous voudrez peut-√™tre utiliser la cl√© pour rendre la liste en r√©action, mais comme la pratique l'a montr√©, c'est une mauvaise id√©e.  √Ä l'avenir, dans l'exemple, je montrerai qu'il est pr√©f√©rable d'utiliser le message et de ne pas toucher du tout √† la touche.  En tout cas, elle l'est, comme √† Angunar, mais son besoin a √©t√© r√©duit, en fait, √† 0. </li><li>  <b>message</b> : string - un message de validation.  Champ obligatoire. </li><li>  <b>type</b> : ValidationEventTypes - type de message. <br><ol><li>  Erreur - erreurs </li><li>  Avertissement - avertissements </li><li>  Info - Messages d'information </li><li>  Succ√®s - messages sur la validit√©.  Par exemple, vous pouvez v√©rifier que le mot de passe est vraiment complexe. </li></ol><br></li><li>  <b>additionalData</b> ?: any - informations suppl√©mentaires qui peuvent √™tre transmises avec validation, si n√©cessaire.  Il peut s'agir d'un balisage HTML suppl√©mentaire ou d'un style sp√©cifique.  En g√©n√©ral, vous pouvez tout mettre en tout. </li></ul><br><br><h2>  Extensions </h2><br>  Toute magie est bas√©e sur des choses triviales.  Et dans ce cas, pour que le param√®tre de focus fonctionne, obtenir des modifications dans les champs n√©cessite de lier <b>FormControl</b> dans un champ de saisie sp√©cifique. <br>  Parce que  <b>FormControl</b> ne limite pas le d√©veloppeur dans le type de donn√©es valid√©es, en raison de sa polyvalence, il fallait sacrifier un peu d'applicabilit√© aux √©l√©ments r√©actifs. <br>  Dans le m√™me temps, pour la saisie et la zone de texte, il √©tait possible de cr√©er des fonctions simples de liaison de donn√©es sur un √©l√©ment, pour d'autres composants, le processeur devra encore faire des efforts minimes pour remplacer les donn√©es. <br><br>  Pour l'entr√©e, la liaison de l'√©l√©ment √† <b>FormControl</b> (nom) ressemblera √† ceci. <br>  <b>&lt;input type = "text" {... InputFormControl.bindActions (controls.name)} /&gt;</b> <br>  Pour la zone de texte, la reliure sera comme ceci <br>  <b>&lt;textarea {... TextAreaFormControl.bindActions (controls.name)} /&gt;</b> <br><br>  <b>InputFormControl.bindActions</b> et <b>TextAreaFormControl.bindActions</b> acceptent deux param√®tres: <br><ul><li>  <b>formControl</b> : FormControl - en fait FormControl qui sera utilis√© pour la liaison.  Requis. </li><li>  <b>√©v√©nements</b> ?  - Un param√®tre facultatif contenant une liste de fonctions qui peuvent √™tre appel√©es si vous avez besoin de les personnaliser.   ,  <b>bindActions</b>  -   Element,   ,     element     <b>FormControl</b> -,   .    .         event.     . <br><ul><li> ref </li><li> onChange </li><li> onBlur </li><li> onFocus </li></ul><br></li></ul><br>      ,      <b>FormControl</b> -   . <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormGroup&lt;IUserInfo&gt;({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.name, [], v =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.name = v) ) });</code> </pre> <br>       <i>this.userInfo.name</i> ,    <b>FormControl</b>    .                 <b>FormControl.for</b> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormGroup&lt;IUserInfo&gt;({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: FormControl.for(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo, <span class="hljs-string"><span class="hljs-string">'name'</span></span>, []) });</code> </pre> <br>   ,        name <i>name</i>  . ,     TypeScript,  <i>name</i> ,    .         <i>userInfo</i> ‚Äî    . <br><br>     ‚Äî   .  :) <br><br><h2>  </h2><br>     React   TypeScript   mobx. <br>       . <br> <i>npm install @quantumart/mobx-form-validation-kit</i> <br><br><div class="spoiler"> <b class="spoiler_title">  ,      </b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> : <br><br>   ,     <br> <i>npm init ‚Äìy <br> npm install --save-dev webpack webpack-cli <br> npm install --save react react-dom <br> npm install --save-dev @types/react @types/react-dom <br> npm install --save-dev typescript ts-loader source-map-loader</i> <br><br>  <i>tsconfig.json</i> <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"compilerOptions"</span></span>: { <span class="hljs-string"><span class="hljs-string">"outDir"</span></span>: <span class="hljs-string"><span class="hljs-string">"./dist/"</span></span>, <span class="hljs-string"><span class="hljs-string">"sourceMap"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"noImplicitAny"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"module"</span></span>: <span class="hljs-string"><span class="hljs-string">"commonjs"</span></span>, <span class="hljs-string"><span class="hljs-string">"target"</span></span>: <span class="hljs-string"><span class="hljs-string">"es6"</span></span>, <span class="hljs-string"><span class="hljs-string">"jsx"</span></span>: <span class="hljs-string"><span class="hljs-string">"react"</span></span>, <span class="hljs-string"><span class="hljs-string">"experimentalDecorators"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"emitDecoratorMetadata"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre><br>     <br><ul><li> src\components\Hello.tsx </li><li> src\index.tsx </li><li> index.html </li><li> src\assets\global.scss </li></ul><br><br> src\components\ <i>Hello.tsx</i> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hello</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Hello from TypeScript and React! </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre><br> src\ <i>index.tsx</i> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Hello } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./components/Hello"</span></span>; ReactDOM.render( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Hello</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">, document.getElementById("example") );</span></span></code> </pre> <br> <i>index.html</i> <br><pre> <code class="javascript hljs">&lt;!DOCTYPE html&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Hello React!</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"example"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!-- Dependencies --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"./node_modules/react/umd/react.development.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"./node_modules/react-dom/umd/react-dom.development.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!-- Main --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"./dist/main.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> src\assets\global.scss .row { display: inline; }</span></span></code> </pre> <br><br>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> <br>   webpack-dev-server <br> <i>npm install --save-dev webpack-dev-server <br> npm install --save-dev awesome-typescript-loader <br> npm install --save-dev html-webpack-plugin <br></i> <br>   <i>webpack.config.js</i> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> HtmlWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'html-webpack-plugin'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: <span class="hljs-string"><span class="hljs-string">'./src/index.tsx'</span></span>, <span class="hljs-attr"><span class="hljs-attr">resolve</span></span>: { <span class="hljs-attr"><span class="hljs-attr">extensions</span></span>: [<span class="hljs-string"><span class="hljs-string">'.ts'</span></span>, <span class="hljs-string"><span class="hljs-string">'.tsx'</span></span>, <span class="hljs-string"><span class="hljs-string">'.js'</span></span>] }, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.join(__dirname, <span class="hljs-string"><span class="hljs-string">'/dist'</span></span>), <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'bundle.min.js'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.tsx?$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'awesome-typescript-loader'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.(scss|css)?$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'style-loader'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'css-loader'</span></span>, <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">importLoaders</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, }, }, { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'sass-loader'</span></span>, <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">sourceMap</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }, ], }, ] }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackPlugin({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'./index.html'</span></span> }) ] }</code> </pre><br>   ,  mobx  React. <br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"mobx"</span></span>: <span class="hljs-string"><span class="hljs-string">"4"</span></span>, <span class="hljs-string"><span class="hljs-string">"mobx-react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.1.1"</span></span>,</code> </pre><br> C IE10   mobx,  4  ,        package.json. <br>    <br><pre> <code class="javascript hljs"> <span class="hljs-string"><span class="hljs-string">"style-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.23.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"css-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"node-sass"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.12.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"sass-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.1.0"</span></span></code> </pre><br>    <br> <i>npm install</i> <br><br>     ,     . <br> <i>npm install @quantumart/mobx-form-validation-kit</i> <br>      <br><img src="https://habrastorage.org/webt/et/ta/rp/ettarpotjc8felvv-fwwc9wyjiy.png"><br><br>  <i>package.json</i>   <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"ttt"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"index.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack-dev-server --mode development --open"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span> }, <span class="hljs-string"><span class="hljs-string">"keywords"</span></span>: [], <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-string"><span class="hljs-string">"devDependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"@types/react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.9.5"</span></span>, <span class="hljs-string"><span class="hljs-string">"@types/react-dom"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.9.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"awesome-typescript-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"html-webpack-plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"source-map-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.2.4"</span></span>, <span class="hljs-string"><span class="hljs-string">"ts-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"typescript"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.6.3"</span></span>, <span class="hljs-string"><span class="hljs-string">"webpack"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.41.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"webpack-cli"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.3.9"</span></span> }, <span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"@quantumart/mobx-form-validation-kit"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.0.8"</span></span>, <span class="hljs-string"><span class="hljs-string">"mobx"</span></span>: <span class="hljs-string"><span class="hljs-string">"4"</span></span>, <span class="hljs-string"><span class="hljs-string">"mobx-react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.1.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.10.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.10.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"webpack-dev-server"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.8.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"style-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.23.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"css-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"node-sass"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.12.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"sass-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.1.0"</span></span> } }</code> </pre> <br>   <br> <i>npm run start</i> <br><br>        <br> <i>Hello from TypeScript and React!</i> <br></div></div><br><br>   <i>Hello</i>   .     <i>RegistrationStore</i>    <i>RegistrationStore.ts</i> <br> src\RegistrationStore.ts <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { observable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"mobx"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RegistrationStore</span></span></span><span class="hljs-class"> </span></span>{ @observable public userInfo = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> registrationStore = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RegistrationStore();</code> </pre><br>    Hello.ts,  . <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { observer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"mobx-react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { registrationStore } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../RegistrationStore"</span></span>; @observer <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hello</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ private changeName = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event: React.ChangeEvent&lt;HTMLInputElement&gt;</span></span></span><span class="hljs-function">) =&gt;</span></span> { registrationStore.userInfo.name = event.target.value; }; render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;React.Fragment&gt; &lt;h1&gt;, {registrationStore.userInfo.name}&lt;/h1&gt; &lt;div className="row"&gt; &lt;span&gt;:&lt;/span&gt; &lt;input type="text" value={registrationStore.userInfo.name} onChange={this.changeName} /&gt; &lt;/div&gt; &lt;/React.Fragment&gt; ); } }</code> </pre><br>      ,  Store   Mobx.                 input. <br>     ,  .      ,       .     ¬´¬ª            .          ,       . <br>        <br> <i><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@quantumart/mobx-form-validation-kit</a></b></i> <br><br>     -   . <br> stc/ErrorWraper.tsx <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { observer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"mobx-react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { FormControl } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@quantumart/mobx-form-validation-kit"</span></span>; interface Props { <span class="hljs-attr"><span class="hljs-attr">formControl</span></span>: FormControl; } @observer <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ErrorWraper</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Props</span></span></span><span class="hljs-class">&gt; </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {this.props.children} {this.props.formControl.errors.map(error =&gt; ( </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{error.message}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"error"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {error.message} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ))} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre> <br>     ,     -,   . <br><br>  Hello.tsx    . <br> - ‚Äî    changeName.      <i>{...InputFormControl.bindActions(controls.name)}</i> .            . <br> - ‚Äì     input,       input ,  ,  ,     . <br> - ‚Äì       <i>form</i>  <i>store</i> , ,  ,  componentWillUnmount  <i>registrationStore.form.dispose()</i> .     mobx    <b>FromControl</b>         . <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { observer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"mobx-react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { registrationStore } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../RegistrationStore"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ErrorWraper } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../ErrorWraper"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { InputFormControl } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@quantumart/mobx-form-validation-kit"</span></span>; @observer <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hello</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props: any) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); registrationStore.initForm(); } componentWillUnmount() { registrationStore.form.dispose(); } render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> controls = registrationStore.form.controls; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;React.Fragment&gt; &lt;h1&gt;, {registrationStore.userInfo.name}&lt;/h1&gt; &lt;div className="row"&gt; &lt;span&gt;:&lt;/span&gt; &lt;ErrorWraper formControl={controls.name}&gt; &lt;input type="text" {...InputFormControl.bindActions(controls.name)} /&gt; &lt;/ErrorWraper&gt; &lt;/div&gt; &lt;/React.Fragment&gt; ); } }</code> </pre><br>      RegistrationStore.ts. <br>    . <br>   ( )      userInfo,        form.         -    userInfo. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { observable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"mobx"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { FormControl, FormGroup, AbstractControls } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@quantumart/mobx-form-validation-kit"</span></span>; interface IUserInfo extends AbstractControls { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: FormControl; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RegistrationStore</span></span></span><span class="hljs-class"> </span></span>{ @observable public userInfo = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }; @observable public form: FormGroup&lt;IUserInfo&gt;; public initForm(): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormGroup&lt;IUserInfo&gt;({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.name, [], v =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userInfo.name = v) ) }); } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> registrationStore = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RegistrationStore();</code> </pre></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470537/">https://habr.com/ru/post/fr470537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470519/index.html">Exp√©rience dans la cr√©ation d'assemblages Linux pour les mises √† jour sur une seule carte avec prise en charge</a></li>
<li><a href="../fr470521/index.html">Publication de la mise √† jour 3CX V16 3 et de la nouvelle application mobile 3CX pour Android</a></li>
<li><a href="../fr470525/index.html">Windows dans un navigateur sans inscription et SMS - vue d'ensemble des clients HTML5 RDP</a></li>
<li><a href="../fr470531/index.html">Le neurophysiologue discute du projet Neuralink et parle du travail du cerveau ¬´sur les doigts¬ª</a></li>
<li><a href="../fr470535/index.html">Fa√ßons de cr√©er des graphiques √† barres √† l'aide de Python</a></li>
<li><a href="../fr470541/index.html">Principes de base de l'utilisation de Neo4j dans un navigateur</a></li>
<li><a href="../fr470543/index.html">Comment nous avons mis la gestion des infrastructures sur Terraform - et commenc√© √† vivre</a></li>
<li><a href="../fr470547/index.html">Celery taskcls: nouveau d√©corateur, nouvelles fonctionnalit√©s</a></li>
<li><a href="../fr470549/index.html">TSMC esp√®re suivre la loi de Moore pour les d√©cennies √† venir</a></li>
<li><a href="../fr470553/index.html">Int√©grale d'Euler-Poisson. D√©tails sur les m√©thodes de calcul</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>