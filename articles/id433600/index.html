<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🤝‍👨🏿 🚵🏾 🍂 Pixel 3 mempelajari cara menentukan kedalaman di foto 🔐 🚮 🛰️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mode potret pada ponsel Pixel memungkinkan Anda mengambil foto yang terlihat profesional yang menarik perhatian subjek dengan mengaburkan latar belaka...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pixel 3 mempelajari cara menentukan kedalaman di foto</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433600/"> Mode potret pada ponsel Pixel memungkinkan Anda mengambil foto yang terlihat profesional yang menarik perhatian subjek dengan mengaburkan latar belakang.  Tahun lalu, kami menggambarkan bagaimana kami menghitung kedalaman menggunakan kamera tunggal dan autofokus pendeteksi fase (Phase-Detection Autofocus, PDAF), yang juga dikenal sebagai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">autofokus dua piksel</a> .  Proses ini menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">algoritma stereo tradisional</a> tanpa pelatihan.  Tahun ini di Pixel 3, kami mengadopsi pembelajaran mesin untuk meningkatkan penilaian kedalaman dan menghasilkan hasil yang lebih baik dalam mode potret. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/505/531/899/505531899e63adc78fbd74d94f1c3a3a.gif"><br>  <i>Kiri: Gambar asli ditangkap dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">HDR +</a> .</i>  <i>Di sebelah kanan adalah perbandingan hasil pemotretan dalam mode potret menggunakan kedalaman dari stereo tradisional dan pembelajaran mesin.</i>  <i>Hasil belajar menghasilkan lebih sedikit kesalahan.</i>  <i>Dalam hasil stereo tradisional, kedalaman banyak garis horizontal di belakang pria itu diperkirakan secara salah sama dengan kedalaman pria itu sendiri, akibatnya mereka tetap tajam.</i> <br><a name="habracut"></a><br><h2>  Tamasya singkat ke materi sebelumnya </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tahun lalu,</a> kami menggambarkan bahwa mode potret menggunakan jaringan saraf untuk memisahkan piksel milik gambar orang dan gambar latar belakang, dan melengkapi topeng dua tingkat ini dengan informasi mendalam yang berasal dari piksel PDAF.  Semua ini dilakukan untuk mendapatkan blur, tergantung pada kedalamannya, dekat dengan apa yang dapat diberikan oleh kamera profesional. <br><br>  Agar berhasil, PDAF mengambil dua bidikan yang sedikit berbeda dari tempat kejadian.  Beralih di antara gambar, Anda dapat melihat bahwa orang tersebut tidak bergerak, dan latar belakang bergerak secara horizontal - efek ini disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">paralaks</a> .  Karena paralaks adalah fungsi jarak titik dari kamera dan jarak antara dua titik pandang, kita dapat menentukan kedalaman dengan membandingkan setiap titik dalam satu gambar dengan titik yang sesuai di titik lain. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e15/41c/044/e1541c044baa5454ddee71ef45c9a96c.gif"><br>  <i>Gambar PDAF di sebelah kiri dan di tengah terlihat serupa, tetapi paralaks dapat dilihat pada bagian yang diperbesar di sebelah kanan.</i>  <i>Paling mudah diperhatikan dengan struktur bundar di pusat perbesaran.</i> <br><br>  Namun, menemukan korespondensi tersebut dalam gambar PDAF (metode ini disebut stereo depth) adalah tugas yang sangat sulit, karena titik di antara foto bergerak sangat lemah.  Selain itu, semua teknologi stereo menderita masalah bukaan.  Jika Anda melihat pemandangan melalui celah kecil, tidak mungkin menemukan korespondensi titik untuk garis yang sejajar dengan garis dasar stereo, yaitu garis yang menghubungkan kedua kamera.  Dengan kata lain, ketika mempelajari garis-garis horizontal pada foto yang disajikan (atau garis-garis vertikal dalam gambar dengan orientasi potret), semua pergeseran dalam satu gambar relatif ke gambar lain terlihat kurang lebih sama.  Dalam mode potret tahun lalu, semua faktor ini dapat menyebabkan kesalahan dalam menentukan kedalaman dan penampilan artefak yang tidak menyenangkan. <br><br><h2>  Meningkatkan Penilaian Kedalaman </h2><br>  Dengan mode potret Pixel 3, kami memperbaiki kesalahan ini menggunakan fakta bahwa paralaks dari foto stereo hanyalah salah satu dari banyak petunjuk dalam gambar.  Misalnya, titik yang jauh dari bidang fokus tampak kurang tajam, dan ini akan menjadi petunjuk dari kedalaman yang tidak fokus.  Selain itu, bahkan ketika melihat gambar pada layar datar, kami dapat dengan mudah memperkirakan jarak ke objek, karena kami tahu perkiraan ukuran objek sehari-hari (yaitu, Anda dapat menggunakan jumlah piksel yang menggambarkan wajah seseorang untuk menilai sejauh mana ia berada).  Ini akan menjadi petunjuk semantik. <br><br>  Mengembangkan algoritme secara manual yang menggabungkan tip-tip ini sangat sulit, tetapi menggunakan MO, kita dapat melakukan ini sambil meningkatkan kinerja tip paralaks PDAF.  Secara khusus, kami melatih <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jaringan saraf convolutional yang</a> ditulis dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">TensorFlow</a> , yang menerima piksel dari PDAF sebagai input, dan belajar untuk memprediksi kedalaman.  Metode baru dan lebih baik ini untuk memperkirakan kedalaman berdasarkan MO digunakan dalam mode potret Pixel 3. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7db/0ff/5e3/7db0ff5e3063425f703aaf2b3f30fd77.png"><br>  <i>Jaringan saraf convolutional kami menerima gambar PDAF dan menyediakan peta kedalaman.</i>  <i>Jaringan menggunakan arsitektur gaya encoder-decoder dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">koneksi lewati</a> tambahan dan blok sisa.</i> <br><br><h2>  Pelatihan jaringan saraf </h2><br>  Untuk melatih jaringan, kita membutuhkan banyak gambar PDAF dan peta kedalaman berkualitas tinggi yang sesuai.  Dan karena kita membutuhkan prediksi mendalam untuk berguna dalam mode potret, kita membutuhkan data pelatihan agar serupa dengan foto yang diambil pengguna dengan smartphone. <br><br>  Untuk melakukan ini, kami merancang perangkat Frankenfon khusus, di mana kami menggabungkan lima telepon Pixel 3 dan membuat koneksi WiFi di antara mereka, yang memungkinkan kami untuk secara bersamaan mengambil foto dari semua telepon (dengan perbedaan tidak lebih dari 2 ms).  Dengan perangkat ini, kami menghitung peta kedalaman berkualitas tinggi berdasarkan foto, menggunakan gerakan dan stereo dari berbagai sudut. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/995/827/05b/99582705b2c447fa6faf95c5c114d20f.gif"><br>  <i>Kiri: Perangkat untuk mengumpulkan data pelatihan.</i>  <i>Di tengah: contoh beralih antara lima foto.</i>  <i>Sinkronisasi kamera memastikan kemampuan untuk menghitung kedalaman dalam adegan dinamis.</i>  <i>Kanan: Kedalaman total.</i>  <i>Poin dengan kepercayaan diri rendah, di mana perbandingan piksel dalam foto yang berbeda tidak pasti karena kelemahan tekstur, dicat hitam, dan tidak digunakan dalam pelatihan.</i> <br><br>  Data yang diperoleh dengan menggunakan perangkat ini sangat ideal untuk melatih jaringan karena alasan berikut: <br><br><ul><li>  Lima sudut pandang menjamin keberadaan paralaks di beberapa arah, yang menyelamatkan kita dari masalah aperture. </li><li>  Lokasi kamera memastikan bahwa setiap titik dalam gambar diulang setidaknya dalam dua foto, yang mengurangi jumlah titik yang tidak dapat ditandingi. </li><li>  Garis dasar, yaitu jarak antara kamera, lebih besar dari pada PDAF, yang menjamin perkiraan kedalaman yang lebih akurat. </li><li>  Sinkronisasi kamera memastikan kemampuan untuk menghitung kedalaman dalam adegan dinamis. </li><li>  Portabilitas perangkat menjamin kemungkinan mengambil foto di alam, mensimulasikan foto yang diambil pengguna menggunakan smartphone. </li></ul><br>  Namun, terlepas dari idealitas data yang diperoleh dengan menggunakan perangkat ini, masih sangat sulit untuk memprediksi kedalaman absolut objek pemandangan - pasangan PDAF yang diberikan dapat sesuai dengan berbagai peta kedalaman (semuanya tergantung pada karakteristik lensa, panjang fokus, dll.).  Untuk memperhitungkan semua ini, kami memperkirakan kedalaman relatif objek pemandangan, yang cukup untuk mendapatkan hasil yang memuaskan dalam mode potret. <br><br><h2>  Kami menggabungkan semua ini </h2><br>  Memperkirakan kedalaman menggunakan MO pada Pixel 3 harus bekerja cepat sehingga pengguna tidak perlu menunggu terlalu lama untuk hasil potret.  Namun, untuk mendapatkan perkiraan kedalaman yang baik menggunakan defocus kecil dan paralaks, Anda harus memberi makan jaringan saraf foto dalam resolusi penuh.  Untuk memastikan hasil yang cepat, kami menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">TensorFlow Lite</a> , solusi lintas-platform untuk meluncurkan model MO pada perangkat seluler dan tertanam, serta GPU Pixel 3 yang kuat, yang memungkinkan Anda untuk menghitung kedalaman dengan cepat pada data input besar yang tidak biasanya.  Kemudian kami menggabungkan perkiraan kedalaman yang diperoleh dengan topeng dari jaringan saraf kami, yang membedakan orang, untuk mendapatkan hasil pemotretan paling indah dalam mode potret. <br><br><h2>  Coba sendiri </h2><br>  Di Google Camera App versi 6.1 dan lebih tinggi, peta kedalaman kami tertanam dalam gambar mode potret.  Ini berarti bahwa kita dapat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Editor Kedalaman Foto Google</a> untuk mengubah tingkat kekaburan dan titik fokus setelah mengambil gambar.  Anda juga dapat menggunakan program <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pihak ketiga</a> untuk mengekstrak peta mendalam dari jpeg, dan mempelajarinya sendiri.  Anda juga dapat mengambil album <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dari tautan</a> , menampilkan peta kedalaman relatif dan gambar yang sesuai dalam mode potret, untuk membandingkan pendekatan stereo dan MO tradisional. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id433600/">https://habr.com/ru/post/id433600/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id433586/index.html">Bagaimana kami tidak memenangkan hackathon</a></li>
<li><a href="../id433588/index.html">Kinerja luar biasa dari algoritma C ++ 17 paralel. Mitos atau Realitas?</a></li>
<li><a href="../id433592/index.html">Informasi: Yandex.Phone</a></li>
<li><a href="../id433596/index.html">Kesalahan Magellan: Buffer overrun atau ekspedisi keliling dunia menggunakan SQLite FTS</a></li>
<li><a href="../id433598/index.html">Bagaimana LLVM mengoptimalkan fungsi</a></li>
<li><a href="../id433602/index.html">Kesederhanaan matematis mungkin mendasari kecepatan evolusi.</a></li>
<li><a href="../id433604/index.html">Kerja nyaman dengan Android Studio</a></li>
<li><a href="../id433606/index.html">Kedalaman SIEM: korelasi out-of-box. Bagian 3.2. Metodologi Normalisasi Peristiwa</a></li>
<li><a href="../id433608/index.html">Mobil masa depan. Layar bukan kaca otomatis?</a></li>
<li><a href="../id433610/index.html">Catatan seorang phytochemist. Kesemek</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>