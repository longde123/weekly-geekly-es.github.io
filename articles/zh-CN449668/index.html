<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🚒 👨🏻‍⚖️ 🔝 物联网提供商的说明。 公用事业计量表调查的陷阱 👩🏾‍🌾 👩‍👩‍👧‍👧 👩🏾‍🤝‍👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="您好亲爱的物联网爱好者。 在本文中，我将再次谈谈住房和公共服务以及计量设备调查。 

 定期，另一位主要的电信运营商讲述了他将在多久后进入这个市场并压倒所有人。 每次有这样的故事，我都会想：“伙计，祝你好运！” 
 您不知道要在哪里爬。 

 为了让您了解问题的严重性，我将简要介绍我们在开发智能城市...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>物联网提供商的说明。 公用事业计量表调查的陷阱</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449668/"> 您好亲爱的物联网爱好者。 在本文中，我将再次谈谈住房和公共服务以及计量设备调查。 <br><br> 定期，另一位主要的电信运营商讲述了他将在多久后进入这个市场并压倒所有人。 每次有这样的故事，我都会想：“伙计，祝你好运！” <br> 您不知道要在哪里爬。 <br><br> 为了让您了解问题的严重性，我将简要介绍我们在开发智能城市平台方面的一小部分经验。 它负责调度的部分。 <br><br><img src="https://habrastorage.org/webt/xu/49/vl/xu49vludx9l7aqn72w0jfxfhndo.jpeg"><br><br><a name="habracut"></a><h3> 总体思路和首要困难 </h3><br> 如果我们不是在谈论单个计量设备，而是在地下室，锅炉房和企业中的计量设备，那么现在大多数都配备了遥测输出。 脉冲频率较低，而频率较高-RS-485 / 232或以太网。 通常，最“面包”式计量设备是那些考虑热量的设备。 首先，正是他们准备为派遣付款。 <br> 我已经在有关RS-485功能的文章中详细介绍了。 简而言之，它只是一个数据传输接口。 本质上-电脉冲和通讯线路的要求。 软件包的描述符合数据传输标准，该标准在RS-485上运行。 什么样的标准将在那里-由制造商决定。 通常为Modbus，但不是必需的。 即使使用Modbus，也可能会对其稍加修改。 <br><br> 实际上，对于每个仪表，您都需要自己的测量脚本，该脚本知道如何与之“交谈”和询问。 这意味着调度系统是每个单独计数器的一组脚本。 存储所有这些的数据库。 还有一个特定的用户界面，他可以在其中生成所需的报告。 <br><br><img src="https://habrastorage.org/webt/_o/5_/r8/_o5_r8yi41f7wlnhbwxbu0bajny.png"><br><br> 看起来很简单。 一如既往，魔鬼在细节中。 <br><br> 让我们从第一部分开始。 <br><br><h3> 剧本 </h3><br> 怎么写？ 好吧，很明显，买表，接表，学习如何与它通讯并将其集成到一个通用平台中。 <br><br> 不幸的是，该解决方案仅能满足我们的部分需求。 通常，流行的计数器具有多个世代，并且每个世代的脚本可能会有所不同。 有时会一点点，有时会很明显。 买东西，您就会得到最新一代的产品。 订户很可能是更古老的东西。 它不再在商店出售。 订户将不会更改计量节点。 <br><br> 因此，第一个问题。 编写这样的脚本是“地面”上的一堆艰苦的软件开发人员和工程师。 我们购买了上一代产品，编写了一些初始模板，然后在实际设备上对其进行了修改。 仅在与实时订户合作的过程中，在实验室中这样做是不现实的。 <br><br> 创建这样的捆绑包花了我们很多时间。 现在算出算法。 最初的模板会不断调整和补充，具体取决于我们在实践中遇到的问题。 当然，如果突然他的柜台有点“不是那样”，则警告订户。 当出现这样的设备时，它会按照标准方案进行连接，并且轮询脚本也会随之修改。 集成时，订户是免费的。 通知他他仍然生活在测试模式下。 集成过程本身是一件不可预测的事情。 碰巧您需要进行最少的更正。 实地考察是一个复杂的过程，需要铲除文学作品并不断克服耙子。 <br><br> 任务并不简单，但是可以解决。 结果是一个有效的脚本。 脚本库越大，使用起来就越容易。 <br><br> 第二个问题。 <br><br><h3> 连接技术卡 </h3><br> 为了让您意识到这项工作的复杂性，我将举一个例子。 以非常受欢迎的VKT-7热量表为例。 <br><br> 名称本身对我们没有任何意义。  VKT-7有几种熨斗解决方案。 里面是什么样的接口？ <br><br><img src="https://habrastorage.org/webt/6a/vj/2v/6avj2vxzeg84mfssvgarpqkyb-4.jpeg"><br><br> 有不同的选择。 标准DB-9块（这是RS-232）中可能有一个输出。 它可能只是带有RS-485触点的接线盒。 甚至连带有RJ-45的网卡（在这种情况下，ModBus都包装在以太网中）。 <br><br> 也许根本没有。 仅一米。 您可以在其中安装接口输出，该接口输出由制造商单独出售，并且要花钱。 主要的麻烦-要安装它，您需要打开计数器并破坏密封。 即，该过程中包括资源供应组织。 通知她封条将被破坏，任命了一天，我们的工程师在资源代表在场的情况下进行了必要的改进，然后再次密封了仪表。 <br><br> 根据安装的接口，执行进一步的优化。 例如，我们决定为电线连接一个仪表。 这是最简单的选择，如果我们的交换机在可访问范围内100米之内，那么使用LoRa明智的做法就是多余的。 在隔离的VLAN中，更轻松地连接到我们的网络。 <br><br>  RS-485 / 232需要一个以太网转换器。 许多人会立即召回MOX，但价格昂贵。 对于我们的解决方案，我们选择了一种更便宜的中文解决方案。 <br><br> 如果输出立即为以太网，则不需要转换器。 <br><br> 问题 假设我们自己设置接口输出。 可以使他的生活更轻松并立即在各处安装以太网吗？ <br><br> 这并不总是可能的。 我们必须看一看案件的表现。 他可能没有合适的孔来使接口站立起来。 我记得柜台在我们的地下室。 或在锅炉房。 湿度高，不能破坏密封性。 用文件完成文件不是一个好主意。 最好放一些不需要大改动的东西。 通常-RS-485是唯一的出路。 <br><br> 再远一点 仪表是否已连接到保证的电源？ 如果不是，则依靠电池供电。 在此模式下，它设计为每月进行一次手动轮询，持续三分钟。 对VKT-7的持续吸引力将使其电池电量下降。 因此，您需要拉保证功率并安装电压转换器。 <br><br> 对于每个仪表制造商，电源模块都不同。 它可以是DIN导轨上的外部单元，也可以是集成转换器。 <br><br> 事实证明，每个电表的一组不同接口和电源模块应始终存储在我们的仓库中。 那里的术语令人印象深刻。 <br><br> 当然，所有这些最终将由订户支付。 但是他不会等一个月才找到所需的设备。 而且他需要一个估算，用于此时此地的连接。 因此，技术库存落在我们的肩上。 <br><br> 我所描述的一切都变成了清晰的技术联系图，以使现场工程师不会想到在下一个地下室遇到的哪种动物以及他们的工作需要什么。 <br><br> 任务列表与通用连接规则相邻。 毕竟，仅在我们的网络中包含计数器是不够的，您仍然需要在交换机端口上扔相同的VLAN，您需要执行诊断，进行测试轮询。 我们努力使整个过程尽可能自动化，以免发生错误并且不吸引工程师的额外力量。 <br><br> 好吧，他们写了技术地图，法规，自动化。 建立物流。 <br><br><h3> 隐患还潜伏在何处？ </h3><br> 读取数据并将其倒入数据库中。 <br><br> 这些数字的订户既不热也不冷。 他需要一份报告。 优选以他被使用的形式。 更好的是，如果立即以他能理解的报告的形式打印并签名，然后签字即可将其打印出来。 这意味着您需要一个简单直观的界面，以在仪表上显示信息并可以自动生成报告。 <br><br> 在这里，我们的动物园在继续。 事实是，有几种报告表格。 它们的核心反映的是同一件事（消耗的热量），但方式不同。 <br><br> 一些用户以绝对值报告（即，将值写在热量消耗图表中，从仪表的安装开始），而一些用户则以增量报告（这是当我们在一段时间内编写消耗量而不参考初始值时）。 实际上，它们不使用通用标准，而是已建立的惯例。 在某些情况下，订户会看到他们所需的所有值（所消耗的热量，所供应和流出的冷却剂的数量，温度差），但报告中的列顺序不同。 <br> 因此，下一步-报告应可自定义。 也就是说，订户本人可以选择顺序是什么，文档中是什么资源。 <br><br> 这是一个有趣的观点。 如果我们的仪表安装正确，一切都很好。 但是，碰巧安装机构在安装ITP时搞砸了，并错误地设置了电表的时间。 我们在2010年的院子里遇到了会思考的设备。 在我们的系统中，如果您选择2010，则当前日期和实际消耗的读数将均为零。 三角洲在这里非常有帮助。 也就是说，我们说在过去的一天里已经发生了很多事情。 <br><br> 看来，为什么会有这样的困难？ 这么难忘了时间吗？ <br><br> 正是使用VKT-7，这将导致计数器的完全重置并从中删除存档。 <br> 订户将被迫向资源人员证明他设置ITP的时间不是昨天，而是大约五年前。 <br><br> 最后是蛋糕上的樱桃。 <br><br><h3> 资质认证 </h3><br> 我们有一个计量装置，我们有一个报告。 它们之间是我们的系统，该系统会生成此报告。 你相信她吗 <br><br> 我是 但是，如何证明我们内部没有任何变化，我们没有扭曲含义。 这是一个认证问题。 调查系统必须具有确认其公正性的证书。 所有大型系统，例如LERS，I Energetik和其他系统，都具有类似的证书。 我们得到了它，尽管它既昂贵又费时。 <br><br> 当然，您可以随时准备购买一些东西。 但是为此，您必须付钱给开发商。 开发人员不仅可以索取入场费，还可以索取月费。 也就是说，我们将被迫与他分享我们的部分派。 <br><br><h3> 为什么都这样？ </h3><br> 这不是主要问题。 开发自己的系统也非常昂贵，而且难度更大。 但是，它具有重要的优势。 我们很清楚这是如何工作的。 我们可以轻松地对其进行缩放，如果突然需要，我们可以对其进行修改。 订户将获得更完整的服务，而我们则是对该过程的100％控制。 <br><br> 这就是为什么我们选择第二条路径。 我们在开发人员和现场工程师的生命中投入了一年的时间。 但是现在我们清楚地了解了整个链条的工作。 <br><br> 回顾过去，我了解到，如果不了解这些知识，我将无法正确解释一个或另一个计数器的异常行为。 <br><br> 此外，还可以在调度系统的基础上构建更多功能。 过量消费警报，事故报告。 我们即将准备启动移动应用程序。 <br><br> 我们走得更远，并添加到平台上（否则您将无法再称呼它）增加了接收居民电话的能力，管理我们的“智能对讲机”的能力，立即控制街道照明的能力以及我尚未写过的其他一些项目。 <br><br><img src="https://habrastorage.org/webt/_v/zl/bw/_vzlbw1q-ue01p8udfadwdu3nuq.png"><br><br> 所有这些都是复杂的，令人费解的，漫长的。 但是结果值得。 订户收到完整的成品。 <br><br> 每个计划进行住房和公共服务的经营者都一定会走这条路。 会通过吗？ <br> 有一个问题。 甚至都没有钱。 正如我上面所写，这里我们需要在领域和开发中进行大量工作。 并非所有主要参与者都习惯了这一点。 如果您的开发人员在莫斯科，并且在新西伯利亚建立了联系，那么成品的时间将大大延长。 <br><br> 时间会告诉谁将留在这个市场上，谁会说-好​​吧，让他下地狱！ 但是我肯定知道的一件事-仅仅用金钱来占领市场份额是行不通的。 这个过程需要非常规的方法，优秀的工程师，深入研究监管机构，与资源和订户进行沟通，不断地确定和克服这一缺陷。 <br><br>  <b>附</b>言：在本文中，我故意关注热量，而没有提及电或水。 我还介绍了电缆连接。 如果我们有脉冲输出，则有些细微差别，例如安装后的强制性对帐。 可能是电线未到达，因此使用了LoRaWAN。 在一篇文章中描述我们的整个平台及其开发阶段是不现实的。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN449668/">https://habr.com/ru/post/zh-CN449668/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN449656/index.html">如何使用VK API娱乐自己</a></li>
<li><a href="../zh-CN449658/index.html">Google的新复活节彩蛋-Thanos和Infinity手套vs. Google搜索结果</a></li>
<li><a href="../zh-CN449662/index.html">欢迎在PyCon Russia 2019上发表演讲</a></li>
<li><a href="../zh-CN449664/index.html">配置GitLab CI以在Maven Central中加载Java项目</a></li>
<li><a href="../zh-CN449666/index.html">DevOpsForum2019。部署DevOps迫不及待</a></li>
<li><a href="../zh-CN449670/index.html">支持缪斯女神：如何安排对彩带的捐赠</a></li>
<li><a href="../zh-CN449672/index.html">Noerden Life2-具有“手势”控制和“触摸”玻璃的模拟时钟</a></li>
<li><a href="../zh-CN449674/index.html">更新了Visual Studio Code中的Razor支持，现在具有Blazor支持</a></li>
<li><a href="../zh-CN449676/index.html">胜任的管理-神话还是现实？ 回应Kolesa集团，Evil Martians和Wrike</a></li>
<li><a href="../zh-CN449678/index.html">为什么软件任务总是花费比您想象的更多的时间</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>