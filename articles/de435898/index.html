<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ô•Ô∏è üöÅ üç´ Woran Sie bei einem NALSD-Interview denken sollten üë®üèª‚Äç‚úàÔ∏è ‚ô†Ô∏è üç¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich habe vorhin ein typisches Coding-Interview beschrieben . Neben der Codierung gibt es fast immer eine Frage zum Systemdesign. (Gro√ües) Systemdesign...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Woran Sie bei einem NALSD-Interview denken sollten</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/google/blog/435898/">  Ich habe vorhin ein typisches <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Coding-Interview beschrieben</a> .  Neben der Codierung gibt es fast immer eine Frage zum Systemdesign.  (Gro√ües) Systemdesign.  Bei Interviews auf SRE ist dies ein (f√ºr mich) noch interessanteres Tier - NALSD.  Nicht abstraktes gro√ües Systemdesign.  Der Hauptunterschied zwischen SWE und SRE liegt genau in diesen Buchstaben ‚ÄûNA‚Äú. <br><br><img src="https://habrastorage.org/webt/zr/dx/lz/zrdxlzdyc1xmixaibmzonhnkup0.jpeg" align="right" width="400" title="Bibliothek bei google z√ºrich">  Was ist der Unterschied und wie kann man sich darauf vorbereiten?  Schauen wir uns ein Beispiel an.  Als Beispiel nehmen wir etwas sehr Materielles, etwas, das niemand jemals um ein echtes Interview bitten wird (in Google) :) <br><br>  Zum Beispiel - lassen Sie uns eine Bibliothek entwerfen.  F√ºr Papierb√ºcher das √ºbliche.  Der gesamte folgende Text wurde in einer Sitzung in ungef√§hr einer Stunde geschrieben, um grob zu zeigen, was Sie tun k√∂nnen und was wichtig ist.  Also vergib mir die Verwirrung, aber ich denke schon (und existiere deshalb). <br><a name="habracut"></a><blockquote><h4>  NALSD-Frage: Entwerfen Sie eine √∂ffentliche Bibliothek. </h4><br>  Erstens interessieren uns die Eigenschaften der Last, oder wir gehen selbst von einer vern√ºnftigen Annahme aus.  Da es sich um ein skalierbares System handelt, handelt es sich um eine Stadt mit mindestens einer Million Einwohnern.  Es lohnt sich, Optionen in Betracht zu ziehen - ein gro√ües Geb√§ude oder Bezirksbibliotheken plus Speicher.  Letzteres scheint mir vern√ºnftiger zu sein.  Besonders wenn nicht eine Stadt, sondern eine Stadt. <br><br>  Daher werden wir uns im Moment auf das System einer Stadt konzentrieren (mit einigen Vorbehalten k√∂nnen wir einen √§hnlichen Mechanismus auf einer h√∂heren Ebene f√ºr die Skalierung auf viele St√§dte anwenden).  Die Stadt hat also eine Million Einwohner.  Wir runden die Zahlen ab, um Sch√§tzungen zu vereinfachen - es sollen 1 Million wahrscheinliche Leser sein.  Die Leser werden jederzeit unabh√§ngig voneinander lesen.  Wir k√∂nnen es also als einfachen Poisson-Prozess herausfinden.  Normalerweise ist das Z√§hlen auf der Flucht jedoch schwierig. Machen Sie also einen weiteren Vereinfachungsschritt und gehen Sie davon aus, dass 1% der Leser t√§glich ein Buch nehmen m√∂chten.  Insgesamt nehmen wir f√ºr weitere Berechnungen 10.000 B√ºcher pro Tag. <br><br>  Unsere Aufgabe ist es, die M√∂glichkeit zu bieten, 10.000 B√ºcher pro Tag (und √ºbrigens die gleichen 10.000 an jedem anderen Tag in der Zukunft) in der Stadt von mehr als einer Million herauszugeben.  In diesem Moment f√§llt die Frage nach der Monobibliothek oder dem Distrikt bereits weg (damit die ganze Million potenzielle Leser sein kann, m√ºssen sie in angemessener Zeit in die Bibliothek gelangen k√∂nnen, da sonst der Wunsch, das Buch zu nehmen, mit der Zeit definitiv nachl√§sst).  Wir m√ºssen also die Kapazit√§t jeder lokalen Bibliothek bewerten.  Es ist richtig, dies unter Ber√ºcksichtigung der Bev√∂lkerungsdichte und der Erreichbarkeit zu tun. Da dies jedoch das System selbst nicht wesentlich beeinflusst, stellen wir uns zur Vereinfachung der Berechnungen vor, dass wir sie gleichm√§√üig platzieren.  Dies bedeutet jedoch immer noch nicht, wie wir sie teilen k√∂nnen.  Es macht nat√ºrlich keinen Sinn, 10.000 Bibliotheken mit einem Buch gleichm√§√üig in der Stadt zu platzieren. Sie m√ºssen also verstehen, was Sinn macht.  Wir gehen zum unteren Level. <br><br>  Also eine Bibliothek.  Damit es Sinn macht, m√ºssen die meisten, die kommen, das Buch finden, das sie brauchen.  Dies bedeutet, dass wir die beliebtesten Anfragen aufzeichnen und prognostizieren und diese B√ºcher bereithalten m√ºssen.  Dann m√ºssen wir das Sortiment grunds√§tzlich behalten.  Auf Anhieb w√ºrde ich sagen, dass eine lokale Bibliothek mindestens 1000 Objekte haben sollte, die ganz oben in einer Vielzahl von Kopien stehen, mehr Top-Objekte, weniger Tail-Objekte.  Das durchschnittliche Buch in unserer Bibliothek wird von 3 Tagen bis 2 Wochen gelesen (tats√§chlich h√§ngt das Merkmal vom Buch ab, hier ist eine separate Analyse erforderlich). Wir nehmen es gleich der durchschnittlichen Woche und fahren fort.  Das hei√üt, das genommene Buch fehlt ungef√§hr eine Woche lang, daher m√ºssen die Top-B√ºcher eine Woche lang auf Lager sein (dann erholen sie sich von den R√ºckgaben). <br><br>  Nehmen wir einen durchschnittlichen Inflationsfaktor von 6. Die Speicherkapazit√§t beginnt also bei 6.000 B√ºchern.  Weniger bedeutet, dass dies nur ein kleines Oberteil ist, was in einigen F√§llen noch hilfreich sein kann (z. B. eine Insel mit ‚ÄûD√§mmerung‚Äú in einem Supermarkt in der N√§he des Kinderspielzimmers), aber wir werden es vorerst drau√üen lassen. <br><br>  Im Gleichgewichtszustand kehren sie zur√ºck und dauern ungef√§hr gleich einen Tag plus oder minus der Streuung. Wir m√ºssen jedoch weiterhin in der Lage sein, eine erh√∂hte Anzahl von Spitzenr√ºckgaben zu akzeptieren (z. B. aufgrund externer Synchronisation wie Feiertage oder eines Modewechsels).  Das ist richtig - zu simulieren.  Aber hier und jetzt nehmen wir ein Drittel als Puffer.  Insgesamt unterst√ºtzen wir 6.000 B√ºcher, die zur Ausgabe verf√ºgbar sind, sowie einen Platz f√ºr weitere 2.000 in Reserve. <br><br>  Wir brauchen also eine Einheit, die 8000 B√ºcher speichern kann.  Das t√§gliche Nachf√ºllen ist sehr teuer, was bedeutet, dass es ein oder zwei Wochen dauert.  Zwei Wochen, 6.000 B√ºcher, mit einer Tendenz zur Rendite, das sind ungef√§hr 300 pro Tag.  Zum Zeitpunkt der Er√∂ffnung k√∂nnen wir alle 8000 B√ºcher bewerten, um die ersten 2000 im Umlauf befindlichen B√ºcher vor der ersten R√ºckkehr zu erstellen.  2000 f√ºr 3 Tage = ungef√§hr 600 B√ºcher pro Tag plus Puffer = 800 B√ºcher pro Tag. <br><br>  Lassen Sie uns die Bandbreiten- und Speichergrenzen sch√§tzen.  Ein Buch ben√∂tigt durchschnittlich 2 Zentimeter linearen Raum, 8000 B√ºcher - 160 Meter.  4 mal vertikal drehen, 40 Meter.  Wir brechen in gleichm√§√üige 5-Meter-Racks auf, wir bekommen 8 Racks mit 4 Regalen, die 5 Meter lang sind.  Ein Bibliothekar (oder ein Robo-Bibliothekar) kann mit zwei Racks arbeiten. Das Herausziehen eines Buches dauert bis zu 5 Sekunden, um es zu erreichen, 5 Sekunden, um das Buch herauszuholen oder zu legen, 5 Sekunden in umgekehrter Reihenfolge, insgesamt 15 Sekunden.  4 Bibliothekare stellen uns maximal ungef√§hr 15 B√ºcher pro Minute zur Verf√ºgung, d. H. 900 B√ºcher pro Stunde ab Lager. <br><br>  Wir addieren Zeit f√ºr die Bearbeitung der Anfrage (10s), Suche (5s), Eingabe in das Empfangs- und Ausgabesystem (2s) =&gt; 400 B√ºcher pro Stunde.  So kann der Speicher auf seinem H√∂hepunkt 400 B√ºcher pro Stunde ausgeben, sodass 800 B√ºcher pro Tag in 2 Arbeitsstunden erreichbar sind. <br><br>  Jetzt betrachten wir andere Merkmale: Um 400 B√ºcher pro Stunde von 4 Personen zu verteilen, m√ºssen 100 Personen im Wartezimmer in einer Warteschlange vor dem Verarbeitungsfenster untergebracht werden, damit diese Personen am Ein- und Ausgang keine Menschenmassen erzeugen.  Das hei√üt, die Eingangsgruppe muss 400 Personen pro Stunde in beide Richtungen passieren.  Es stellt sich heraus, dass der Hauptbegrenzer nicht einmal die Lagerung sein wird, sondern die Kapazit√§t der Halle und der Eingangsgruppe. <br><br>  Dies bedeutet, dass mit genaueren Berechnungen das optimale Verh√§ltnis von Lager und Halle ermittelt werden kann. <br><br>  Nachdem die Einheit aussortiert ist, kehren wir zum obigen Level zur√ºck.  Wir haben die Gesamtbelastung der Bibliothek auf etwa 10.000 B√ºcher pro Tag gesch√§tzt, wir haben eine Einheit mit 800 B√ºchern pro Tag gez√§hlt, dh wir ben√∂tigen 12,5 Einheiten.  Mit der Geoverteilung in der Stadt sind ein oder zwei alternative Einheiten (an den Stadtgrenzen) oder sogar 3-4 (innerhalb) f√ºr jeden Leser erreichbar, wodurch Sie Verkehrsspitzen und / oder eine erh√∂hte Nachfrage nach bestimmten Positionen leicht ausgleichen k√∂nnen. <br><br>  Wir wissen auch, dass jede Bibliothek jederzeit geschlossen werden kann (Feuer, Hygienekontrolle, Streichen der Griffe von K√ºhlschr√§nken oder etwas anderem), wobei die Anzahl der Bibliotheken zunimmt und die Wahrscheinlichkeit, dass zwei aus dem Leben fallen, zusammenf√§llt. Daher ben√∂tigen wir ein Ersatzger√§t f√ºr alle 5-6 Einheiten.  Insgesamt m√ºssen 15 Einheiten die erforderliche Leistung sicherstellen, sofern sie den gesch√§tzten Bestand in ihren Lagern halten. <br><br>  Um den gesch√§tzten Bestand aufrechtzuerhalten, m√ºssen wir ein oder zwei Mal pro Woche (wir dachten √ºber zwei) etwa die H√§lfte des Sortiments aktualisieren, um Trends zu folgen und so weiter.  Dies bedeutet, dass jede Einheit alle zwei Wochen 4.000 B√ºcher transportieren und exportieren muss.  Bei jedem Import und Export m√ºssen dieselben 4.000 B√ºcher aus dem Repository entfernt und andere dort abgelegt werden.  Bei 400 B√ºchern pro Stunde dauert die Aktualisierung des Sortiments bei maximaler Auslastung 10 Stunden.  Was, wie es scheint, immer noch nicht so schlimm ist, mit der Massenbeladung werden viele Dinge schneller gehen, aber die Aufrechterhaltung des Sortiments dauert f√ºnfmal l√§nger als die Arbeit mit der Bev√∂lkerung. <br><br>  Das durchschnittliche Buch (2 cm √ó 20 cm √ó 30 cm) betr√§gt ungef√§hr 1,5 l, d. H. 4000 B√ºcher = 6 Kubikmeter.  Es passt leicht in eine Gazelle.  Das Gewicht eines Kubikmeters Papier betr√§gt 600 kg, das sind 6 Kubikmeter 3,6 Tonnen.  Die Tragf√§higkeit der Gazelle betr√§gt eineinhalb Tonnen, daher werden drei Gazellen ben√∂tigt.  Plus ein Backup.  Wir haben 15 Einheiten, die alle 2 Wochen aktualisiert werden. Bei einer gleichm√§√üigen Verteilung sind wir am Limit. Wir m√ºssen eine weitere Gazelle hinzuf√ºgen. <br><br>  <i>Und wir hatten keine Zeit dar√ºber nachzudenken, woher und wo diese Gazellen transportiert wurden, sodass die Lager der Lieferanten und die Punkte des Entladens von B√ºchern, die an Relevanz verloren haben, auf dem Diagramm erscheinen ...</i> <br></blockquote><br>  Die Zeit ist also abgelaufen.  Was ist in der NALSD-Frage so abnormal?  Skalierbarkeit muss in jedem gro√üen Systemdesign vorhanden sein.  Die Hauptsache ist die <b>Konkretheit</b> . <br><br>  Ich habe oben viele Annahmen getroffen, aber alle nachfolgenden Sch√§tzungen basierten auf fr√ºheren.  Bei Zahlen habe ich auch versucht zu geben, wie man richtig bewertet. Es ist jedoch sehr leicht, das zu vergessen. Man wird m√ºde und vergisst es.  Es ist immer noch sehr einfach, sich ohne Erkl√§rung an eine Zahl aus dem Speicher zu halten ... Da das Design jedoch konkret ist und eine der Annahmen sich als falsch herausstellt, kann sie behoben und erst sp√§ter wiedergegeben werden. <br><br>  <i>Wie ich mich jetzt erinnere, habe ich in meinem Interview mit den Sch√§tzungen einen IOPS von einer Festplatte von 600 genommen, einfach weil ich ihn k√ºrzlich optimiert und mit einem Array gearbeitet habe, wobei _array_ 600 IOPS ausgegeben hat ... Der Befragte hat mich dann ein wenig √ºberrascht gefragt - 600 IOPS auf Festplatte?</i>  <i>: D.</i> <br><br>  W√§hrend des Interviews kann der Interviewer jede Ihrer Annahmen korrigieren.  Oder f√ºgen Sie eine Art Einschr√§nkung hinzu (von der Sie nichts wussten, nicht nachdachten, nicht fragten oder nur die √ºbliche √Ñnderung von TK im laufenden Betrieb).  Da Sie ausschlie√ülich mit bestimmten Nummern arbeiten, ist dies nur eine triviale Aktualisierung der Nummern. <br><br>  Wenn die Anpassung der Annahme zu einer Neugestaltung des Systems f√ºhrt, handelt es sich entweder um einen Konstruktionsfehler oder um eine falsche Anpassung oder um eine √úberschreitung der Anwendbarkeit des Systems, was auch im wirklichen Leben keine seltene Situation ist.  Es ist wichtig, solche Momente nicht zu verpassen und die erhaltenen Zahlen sowohl w√§hrend der Entwurfsphase als auch bei Anpassungen auf ihre Realit√§t hin zu bewerten. <br><br>  Als SRE sind wir verpflichtet, in Bezug auf die Skalierung realer Systeme unter den realen Einschr√§nkungen realer Hardware zu denken.  M√∂glicherweise gibt es einen hervorragenden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Algorithmus</a> , der enorme Zeitkosten gegen eine kleine Menge Speicher austauscht. Trotzdem k√∂nnen Sie unter realen Bedingungen kein Petabyte RAM auf einen Prozessorkern legen.  Wenn wir also ein Petabyte RAM haben, haben wir mindestens zehntausend Prozessoren.  Oder zwanzig.  Oder drei√üig.  Und wir m√ºssen nach dem Optimum suchen, nicht global, sondern hier und jetzt unter den gegebenen Bedingungen. <br><br>  Sie m√ºssen sich nicht die genauen Zahlen merken, aber Sie m√ºssen eine Vorstellung von der Reihenfolge haben: das gleiche IOPS, das die Festplatte ungef√§hr hundert und die SSD Hunderttausende hat.  Diese Hunderttausende gehen jedoch mit dem Verh√§ltnis der Kosten f√ºr ein Terabyte Festplatte zu den Kosten f√ºr ein Terabyte SSD als eins zu drei zu vier einher.  Und das z√§hlt nicht das Geschirr - ein Platz im Rack, Klingen f√ºr sie, Anschl√ºsse an Schaltern und andere Dinge, die keinen Cent mehr sind, wenn die Rechnung in Petabyte geht. <br><br>  Lehnen Sie sich jetzt ein wenig in Ihrem Stuhl zur√ºck, entspannen Sie sich und versuchen Sie, ein System f√ºr die Lieferung von frischen H√ºhnereiern im Abonnement zu entwickeln. <br><br>  Wenn Sie mit englischsprachigen Kollegen teilen m√∂chten, gibt es eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Option auf Englisch</a> (sowie auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Englisch</a> ). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de435898/">https://habr.com/ru/post/de435898/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de435886/index.html">SpaceX zeigte den Prototyp Starship und wird 10% des Personals reduzieren</a></li>
<li><a href="../de435890/index.html">Die dunklen Seiten einer aktiven Person</a></li>
<li><a href="../de435892/index.html">Die Zusammenfassung interessanter Materialien f√ºr den mobilen Entwickler # 281 (vom 7. bis 13. Januar)</a></li>
<li><a href="../de435894/index.html">Privatunterricht. Versteckt in PHP</a></li>
<li><a href="../de435896/index.html">Verwenden von DiagnosticSource in .NET Core: Theorie</a></li>
<li><a href="../de435900/index.html">Verkapseln Sie es</a></li>
<li><a href="../de435902/index.html">Sie k√∂nnen SELECT nicht einfach nehmen und schreiben, wenn der Anbieter dies nicht zul√§sst ... aber wir werden schreiben</a></li>
<li><a href="../de435904/index.html">KI √ºbersetzte Gehirnaktivit√§t in Sprache</a></li>
<li><a href="../de435906/index.html">Schrittmacher-Cluster-Speicher + DRBD (Dual Primary) + ctdb</a></li>
<li><a href="../de435908/index.html">Asketisches Netz: Prototyp-Flohm√§rkte f√ºr unterwegs und js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>