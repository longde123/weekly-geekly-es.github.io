<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤½ â˜€ï¸ ğŸ‡ğŸ½ è¯†åˆ«Linuxç£ç›˜æ´»åŠ¨ ğŸ¤¾ ğŸ‘©ğŸ½â€ğŸš’ ğŸ¤®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR ï¼šæœ¬æ–‡è®¨è®ºäº†ä¸€ç§æ–¹ä¾¿ï¼Œå¿«é€Ÿå’Œå¯é çš„æ–¹æ³•ï¼Œç”¨äºè¯†åˆ«å°†æ•°æ®å†™å…¥ç£ç›˜çš„åŸºäºLinuxçš„ç¨‹åºï¼Œè¿™æœ‰åŠ©äºè¯†åˆ«ç£ç›˜å­ç³»ç»Ÿä¸Šçš„å¤§é‡è´Ÿè½½æˆ–å¼‚å¸¸é¢‘ç¹çš„è´Ÿè½½ï¼Œè¿˜å¯ä»¥ä½¿æ‚¨ä¼°è®¡æ–‡ä»¶ç³»ç»Ÿçš„å¼€é”€ã€‚ å¯¹äºPCï¼ŒEMMCå’Œå•æ¿è®¡ç®—æœºä¸Šçš„é—ªå­˜çš„SSDå°¤å…¶å¦‚æ­¤ã€‚ 
 åœ¨æ’°å†™æœ¬æ–‡æœŸé—´ï¼Œå‘ç°å°†æ•°KBçš„æ•°æ®å†™å…¥BTRFSæ–‡ä»¶ç³»...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>è¯†åˆ«Linuxç£ç›˜æ´»åŠ¨</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476414/">  <b>TL; DR</b> ï¼šæœ¬æ–‡è®¨è®ºäº†ä¸€ç§æ–¹ä¾¿ï¼Œå¿«é€Ÿå’Œå¯é çš„æ–¹æ³•ï¼Œç”¨äºè¯†åˆ«å°†æ•°æ®å†™å…¥ç£ç›˜çš„åŸºäºLinuxçš„ç¨‹åºï¼Œè¿™æœ‰åŠ©äºè¯†åˆ«ç£ç›˜å­ç³»ç»Ÿä¸Šçš„å¤§é‡è´Ÿè½½æˆ–å¼‚å¸¸é¢‘ç¹çš„è´Ÿè½½ï¼Œè¿˜å¯ä»¥ä½¿æ‚¨ä¼°è®¡æ–‡ä»¶ç³»ç»Ÿçš„å¼€é”€ã€‚ å¯¹äºPCï¼ŒEMMCå’Œå•æ¿è®¡ç®—æœºä¸Šçš„é—ªå­˜çš„SSDå°¤å…¶å¦‚æ­¤ã€‚ <br> åœ¨æ’°å†™æœ¬æ–‡æœŸé—´ï¼Œå‘ç°å°†æ•°KBçš„æ•°æ®å†™å…¥BTRFSæ–‡ä»¶ç³»ç»Ÿä¼šå¯¼è‡´å°†3 MBçš„å®é™…æ•°æ®å†™å…¥ç£ç›˜ã€‚ <br><br><h3> å¼•è¨€ </h3>  â€œå“¦ï¼ŒåºŸè¯ï¼Œç°ä»£å›ºæ€ç¡¬ç›˜ä¸Šçš„å­˜å‚¨å•å…ƒå°†åœ¨æ­£å¸¸ä½¿ç”¨æ•°åå¹´åå°±æ— æ³•ä½¿ç”¨ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œæ›´ä¸ç”¨è¯´å°†äº¤æ¢ï¼Œè™šæ‹Ÿæœºå’Œæµè§ˆå™¨é…ç½®æ–‡ä»¶æ–‡ä»¶å¤¹è½¬ç§»åˆ°ç¡¬ç›˜ä¸Šäº†â€ â€“è¿™æ˜¯å…³äºå›ºæ€ç¡¬ç›˜å¯é æ€§é—®é¢˜çš„å…¸å‹ç­”æ¡ˆä¿è¯â‰ˆ150TBWã€‚ å¦‚æœæ‚¨ä¼°è®¡æœ‰å¤šå°‘å…¸å‹è½¯ä»¶å¯ä»¥å†™å…¥æ•°æ®ï¼Œé‚£ä¹ˆä¼¼ä¹æ¯å¤©10-20 GBå·²ç»æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—ï¼Œé‚£ä¹ˆæœ€å¤šå¯ä»¥æœ‰40 GBï¼Œç”šè‡³æ›´å¤šã€‚ æœ‰äº†è¿™æ ·çš„æ•°å­—ï¼Œç­”æ¡ˆæ˜¯éå¸¸åˆç†çš„-æ¯å¤©è¦è·å¾—40 GBçš„è®°å½•æ•°æ®ï¼Œæ‰èƒ½è¾¾åˆ°10å¹´çš„è¦†ç›–å•å…ƒæ•°<i>ä¿è¯</i>å€¼ã€‚ <br> ä½†æ˜¯ï¼Œå…­å¹´æ¥ï¼Œæˆ‘ä¸€ç›´åœ¨ä½¿ç”¨ç¬¬ä¸‰ä¸ªSSDï¼šç¬¬ä¸€ä¸ªSSDçš„æ§åˆ¶å™¨æ•…éšœï¼Œç¬¬äºŒä¸ªSSDæ¯å¤©å¼€å§‹åœ¨å•å…ƒä¹‹é—´ç§»åŠ¨æ•°æ®å‡ æ¬¡ï¼Œå¯¼è‡´è®°å½•ç»´æŠ¤å»¶è¿Ÿ30ç§’ã€‚ <br><br> ä½¿ç”¨æ–°çš„SSDä¸ƒä¸ªæœˆåï¼Œæˆ‘å†³å®šæ£€æŸ¥è®°å½•çš„æ•°æ®é‡ï¼Œå› ä¸ºç£ç›˜æœ¬èº«æ˜¯é€šè¿‡SMARTæŠ¥å‘Šçš„ã€‚ <br>  <b>19.7 TBã€‚</b> <br> åœ¨çŸ­çŸ­7ä¸ªæœˆå†…ï¼Œæˆ‘ä½¿ç”¨äº†ä¿è¯çš„è®°å½•æ•°æ®é‡çš„13ï¼…ï¼Œå°½ç®¡äº‹å®ä¸Šå®ƒæ˜¯æ ¹æ®å¯¹é½åˆ†åŒºå’Œè®¾ç½®FSçš„å»ºè®®é…ç½®çš„ï¼Œä½†æˆ‘å‡ ä¹ä¸ä½¿ç”¨äº¤æ¢åŠŸèƒ½ï¼Œè™šæ‹Ÿæœºç£ç›˜ä½äºHDDä¸Šï¼ <a name="habracut"></a><br> è¿™æ˜¯ä¸€ä¸ªå¼‚å¸¸é«˜çš„æ•°å­—ï¼›æŒ‰ç…§è¿™ç§é€Ÿåº¦ï¼Œåœ¨è¾¾åˆ°5å¹´é©±åŠ¨å™¨ä¿ä¿®æœŸä¹‹å‰ï¼Œå°†è¶…è¿‡TBWä¿ä¿®ã€‚ è€Œä¸”æˆ‘çš„è®¡ç®—æœºæ¯å¤©æ— æ³•å†™å…¥93 GBï¼ æ‚¨éœ€è¦æ£€æŸ¥10åˆ†é’Ÿå†…å°†å¤šå°‘æ•°æ®å†™å…¥ç£ç›˜... <blockquote><code>Total: <br> Writes Queued: 24,712, 2,237MiB <br> <b>Writes Completed: 25,507, 2,237MiB</b> <br> Write Merges: 58, 5,472KiB</code> </blockquote>  2.2 GiBï¼Œå“‡ï¼ <br><br><h3> ç¡®å®šå†™å…¥ç£ç›˜è®¾å¤‡çš„æ•°æ®é‡ </h3> å¦‚æœæ‚¨çš„è®¾å¤‡æ”¯æŒ<abbr title="æ¥è‡ªè‹±è¯­è‡ªæˆ‘ç›‘æµ‹ï¼Œåˆ†æå’ŒæŠ¥å‘ŠæŠ€æœ¯">SMART</abbr> ï¼ˆSSDï¼ŒEMMCï¼ŒæŸäº›å·¥ä¸šMicroSDï¼‰ï¼Œåˆ™è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯<code>smartctl</code> ï¼Œ <code>skdump</code>æˆ–<code>mmc</code> ï¼ˆæ¥è‡ªmmc-utilsï¼‰ä»é©±åŠ¨å™¨è¯·æ±‚æ•°æ®ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">Smartctlæ ·æœ¬è¾“å‡º</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">$ sudo smartctl -a /dev/sdb smartctl 7.0 2019-03-31 r4903 [x86_64-linux-5.3.11-200.fc30.x86_64] (local build) Copyright (C) 2002-18, Bruce Allen, Christian Franke, www.smartmontools.org === START OF INFORMATION SECTION === Model Family: Samsung based SSDs Device Model: Samsung SSD 860 EVO mSATA 250GB Serial Number: S41MNC0KA13477K LU WWN Device Id: 5 002538 e700fa64b Firmware Version: RVT41B6Q User Capacity: 250 059 350 016 bytes [250 GB] Sector Size: 512 bytes logical/physical Rotation Rate: Solid State Device Form Factor: mSATA Device is: In smartctl database [for details use: -P show] ATA Version is: ACS-4 T13/BSR INCITS 529 revision 5 SATA Version is: SATA 3.1, 6.0 Gb/s (current: 3.0 Gb/s) Local Time is: Tue Nov 19 01:48:50 2019 MSK SMART support is: Available - device has SMART capability. SMART support is: Enabled === START OF READ SMART DATA SECTION === SMART overall-health self-assessment test result: PASSED General SMART Values: Offline data collection status: (0x00) Offline data collection activity was never started. Auto Offline Data Collection: Disabled. Self-test execution status: ( 0) The previous self-test routine completed without error or no self-test has ever been run. Total time to complete Offline data collection: ( 0) seconds. Offline data collection capabilities: (0x53) SMART execute Offline immediate. Auto Offline data collection on/off support. Suspend Offline collection upon new command. No Offline surface scan supported. Self-test supported. No Conveyance Self-test supported. Selective Self-test supported. SMART capabilities: (0x0003) Saves SMART data before entering power-saving mode. Supports SMART auto save timer. Error logging capability: (0x01) Error logging supported. General Purpose Logging supported. Short self-test routine recommended polling time: ( 2) minutes. Extended self-test routine recommended polling time: ( 85) minutes. SCT capabilities: (0x003d) SCT Status supported. SCT Error Recovery Control supported. SCT Feature Control supported. SCT Data Table supported. SMART Attributes Data Structure revision number: 1 Vendor Specific SMART Attributes with Thresholds: ID# ATTRIBUTE_NAME FLAG VALUE WORST THRESH TYPE UPDATED WHEN_FAILED RAW_VALUE 5 Reallocated_Sector_Ct 0x0033 100 100 010 Pre-fail Always - 0 9 Power_On_Hours 0x0032 098 098 000 Old_age Always - 5171 12 Power_Cycle_Count 0x0032 099 099 000 Old_age Always - 459 177 Wear_Leveling_Count 0x0013 096 096 000 Pre-fail Always - 62 179 Used_Rsvd_Blk_Cnt_Tot 0x0013 100 100 010 Pre-fail Always - 0 181 Program_Fail_Cnt_Total 0x0032 100 100 010 Old_age Always - 0 182 Erase_Fail_Count_Total 0x0032 100 100 010 Old_age Always - 0 183 Runtime_Bad_Block 0x0013 100 100 010 Pre-fail Always - 0 187 Uncorrectable_Error_Cnt 0x0032 100 100 000 Old_age Always - 0 190 Airflow_Temperature_Cel 0x0032 058 039 000 Old_age Always - 42 195 ECC_Error_Rate 0x001a 200 200 000 Old_age Always - 0 199 CRC_Error_Count 0x003e 100 100 000 Old_age Always - 0 235 POR_Recovery_Count 0x0012 099 099 000 Old_age Always - 29 241 Total_LBAs_Written 0x0032 099 099 000 Old_age Always - 38615215765 SMART Error Log Version: 1 No Errors Logged SMART Self-test log structure revision number 1 No self-tests have been logged. [To run self-tests, use: smartctl -t] SMART Selective self-test log data structure revision number 1 SPAN MIN_LBA MAX_LBA CURRENT_TEST_STATUS 1 0 0 Not_testing 2 0 0 Not_testing 3 0 0 Not_testing 4 0 0 Not_testing 5 0 0 Not_testing Selective self-test flags (0x0): After scanning selected spans, do NOT read-scan remainder of disk. If Selective self-test is pending on power-up, resume after 0 minute delay.</code> </pre> </div></div><br> æˆ‘çš„SSDå°†ä»¥é€»è¾‘å•ä½ï¼ˆLBAï¼‰è€Œä¸æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½å­˜å‚¨å†™å…¥å‚æ•°241 Total_LBAs_Writtenä¸­çš„æ•°æ®é‡ã€‚ åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œé€»è¾‘å—çš„å¤§å°ä¸º512å­—èŠ‚ï¼ˆå¯ä»¥åœ¨smartctlçš„è¾“å‡ºä¸­çš„â€œæ‰‡åŒºå¤§å°â€ä¸­çœ‹åˆ°ï¼‰ã€‚ è¦è·å–å­—èŠ‚ï¼Œæ‚¨éœ€è¦å°†å‚æ•°å€¼ä¹˜ä»¥512ã€‚ <br><pre> <code class="plaintext hljs">38615215765 Ã— 512 Ã· 1000 Ã· 1000 Ã· 1000 Ã· 1000 = 19,770  38615215765 Ã— 512 Ã· 1024 Ã· 1024 Ã· 1024 Ã· 1024 = 17,981 </code> </pre> <br><br>  SSDä¸Šçš„<code>skdump</code>ç¨‹åºè¯•å›¾ä»¥è‡ªå·±çš„æ–¹å¼è§£é‡ŠTotal_LBAs_Writçš„å€¼ï¼Œå› æ­¤å®ƒè¾“å‡º<code>1296217.695 TB</code> ï¼Œè¿™æ˜¾ç„¶æ˜¯é”™è¯¯çš„ã€‚ <br><br> ä¸ºäº†æ‰¾å‡ºè®¾å¤‡çº§åˆ«çš„å·²è®°å½•ä¿¡æ¯é‡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code>blktrace</code>è½¯ä»¶åŒ…ä¸­çš„<code>btrace</code>ç¨‹åºã€‚ å®ƒæ—¢æ˜¾ç¤ºäº†æ•´ä¸ªç¨‹åºæŒç»­æ—¶é—´çš„ä¸€èˆ¬ç»Ÿè®¡ä¿¡æ¯ï¼Œä¹Ÿæ˜¾ç¤ºäº†æ‰§è¡Œè®°å½•çš„å„ä¸ªè¿›ç¨‹å’Œçº¿ç¨‹ï¼ˆåŒ…æ‹¬å†…æ ¸ï¼‰ã€‚ <br><br> è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥åœ¨10åˆ†é’Ÿå†…æ”¶é›†ä¿¡æ¯ï¼Œå…¶ä¸­/ dev / sdbæ˜¯æ‚¨çš„ç£ç›˜ï¼š <br><pre> <code class="plaintext hljs"># btrace -w 600 -a write /dev/sdb</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">å…¸å‹å‘½ä»¤è¾“å‡º</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">â€¦ 8,16 0 3253 50.085433192 0 C WS 125424240 + 64 [0] 8,16 0 3254 50.085550024 0 C WS 193577744 + 64 [0] 8,16 0 3255 50.085685165 0 C WS 197246976 + 64 [0] 8,16 0 3256 50.085936852 0 C WS 125736264 + 128 [0] 8,16 0 3257 50.086060780 0 C WS 96261752 + 64 [0] 8,16 0 3258 50.086195031 0 C WS 94948640 + 64 [0] 8,16 0 3259 50.086327355 0 C WS 124656144 + 64 [0] 8,16 0 3260 50.086843733 15368 C WSM 310218496 + 32 [0] 8,16 0 3261 50.086975238 753 A WSM 310218368 + 32 &lt;- (8,20) 291339904 8,16 0 3262 50.086975560 753 Q WSM 310218368 + 32 [dmcrypt_write/2] 8,16 0 3263 50.086977345 753 G WSM 310218368 + 32 [dmcrypt_write/2] 8,16 0 3264 50.086978072 753 I WSM 310218368 + 32 [dmcrypt_write/2] 8,16 0 3265 50.086979159 753 D WSM 310218368 + 32 [dmcrypt_write/2] 8,16 0 3266 50.087055685 0 C WSM 310218368 + 32 [0] 8,16 0 3267 50.087060168 753 A WSM 310218592 + 160 &lt;- (8,20) 291340128 8,16 0 3268 50.087060367 753 Q WSM 310218592 + 160 [dmcrypt_write/2] 8,16 0 3269 50.087061242 753 G WSM 310218592 + 160 [dmcrypt_write/2] 8,16 0 3270 50.087061698 753 I WSM 310218592 + 160 [dmcrypt_write/2] 8,16 0 3271 50.087062361 753 D WSM 310218592 + 160 [dmcrypt_write/2] 8,16 0 3272 50.087386179 0 C WSM 310218592 + 160 [0] 8,16 0 3273 50.087436417 15368 A FWS 0 + 0 &lt;- (253,1) 0 8,16 0 3274 50.087437471 15368 Q FWS [LS Thread] 8,16 0 3275 50.087440862 15368 G FWS [LS Thread] 8,16 0 3276 50.088300047 0 C WS 0 [0] 8,16 0 3277 50.088470917 753 A WFSM 18882688 + 8 &lt;- (8,20) 4224 8,16 0 3278 50.088471091 753 Q WFSM 18882688 + 8 [dmcrypt_write/2] 8,16 0 3279 50.088471688 753 G WFSM 18882688 + 8 [dmcrypt_write/2] 8,16 0 3280 50.088474334 32254 D WSM 18882688 + 8 [kworker/0:2H] 8,16 0 3281 50.088515572 0 C WSM 18882688 + 8 [0] 8,16 0 3282 50.089229069 0 C WSM 18882688 [0] CPU0 (8,16): Reads Queued: 0, 0KiB Writes Queued: 345, 25,932KiB Read Dispatches: 0, 0KiB Write Dispatches: 331, 25,788KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 1,597, 117,112KiB Read Merges: 0, 0KiB Write Merges: 1, 16KiB Read depth: 0 Write depth: 177 IO unplugs: 0 Timer unplugs: 0 CPU1 (8,16): Reads Queued: 0, 0KiB Writes Queued: 502, 39,948KiB Read Dispatches: 0, 0KiB Write Dispatches: 495, 40,076KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 0, 0KiB Read Merges: 0, 0KiB Write Merges: 0, 0KiB Read depth: 0 Write depth: 177 IO unplugs: 0 Timer unplugs: 0 CPU2 (8,16): Reads Queued: 0, 0KiB Writes Queued: 297, 26,800KiB Read Dispatches: 0, 0KiB Write Dispatches: 287, 26,800KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 0, 0KiB Read Merges: 0, 0KiB Write Merges: 0, 0KiB Read depth: 0 Write depth: 177 IO unplugs: 0 Timer unplugs: 0 CPU3 (8,16): Reads Queued: 0, 0KiB Writes Queued: 418, 24,432KiB Read Dispatches: 0, 0KiB Write Dispatches: 408, 24,448KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 0, 0KiB Read Merges: 0, 0KiB Write Merges: 2, 272KiB Read depth: 0 Write depth: 177 IO unplugs: 0 Timer unplugs: 0 Total (8,16): Reads Queued: 0, 0KiB Writes Queued: 1,562, 117,112KiB Read Dispatches: 0, 0KiB Write Dispatches: 1,521, 117,112KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 1,597, 117,112KiB Read Merges: 0, 0KiB Write Merges: 3, 288KiB IO unplugs: 0 Timer unplugs: 0 Throughput (R/W): 0KiB/s / 2,338KiB/s Events (8,16): 9,287 entries Skips: 0 forward (0 - 0.0%)</code> </pre> </div></div><br>  <code>btrace</code>ä½¿<code>btrace</code>å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°å®é™…è®°å½•çš„æ•°æ®é‡ï¼Œä½†æ˜¯å¾ˆéš¾ç†è§£æ­£åœ¨è®°å½•çš„ç¨‹åºã€‚ <br><br><h3> å®šä¹‰è®°å½•åˆ°é©±åŠ¨å™¨çš„ç¨‹åº </h3>  <code>iotop</code>å°†æ˜¾ç¤ºå†™å…¥ç£ç›˜çš„è¿‡ç¨‹ä»¥åŠæ‰€è®°å½•æ•°æ®çš„å¤§å°ã€‚ <br> ä»¥ä¸‹å‚æ•°æä¾›äº†æœ€æ–¹ä¾¿çš„è¾“å‡ºï¼š <br><pre> <code class="plaintext hljs"># iotop -obPat</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">ç¨‹åºè¾“å‡ºç¤ºä¾‹</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">02:55:47 Total DISK READ : 0.00 B/s | Total DISK WRITE : 30.65 K/s 02:55:47 Actual DISK READ: 0.00 B/s | Actual DISK WRITE: 0.00 B/s TIME PID PRIO USER DISK READ DISK WRITE SWAPIN IO COMMAND b'02:55:47 753 be/4 root 0.00 B 0.00 B 0.00 % 0.04 % [dmcrypt_write/2]' b'02:55:47 788 be/4 root 72.00 K 18.27 M 0.00 % 0.02 % [btrfs-transacti]' b'02:55:47 15057 be/4 valdikss 216.00 K 283.05 M 0.00 % 0.01 % firefox' b'02:55:47 1588 ?dif root 0.00 B 0.00 B 0.00 % 0.00 % Xorg -nolisten tcp -auth /var/run/sddm/{398f030f-9667-4dff-b371-81eaae48dfdf} -background none -noreset -displayfd 18 -seat seat0 vt1' b'02:55:47 15692 be/4 valdikss 988.00 K 9.41 M 0.00 % 0.00 % python3 /usr/bin/gajim' b'02:55:47 15730 ?dif valdikss 9.07 M 0.00 B 0.00 % 0.00 % telegram-desktop --' b'02:55:47 2174 ?dif valdikss 1840.00 K 2.47 M 0.00 % 0.00 % yakuake' b'02:55:47 19827 be/4 root 16.00 K 896.00 K 0.00 % 0.00 % [kworker/u16:7-events_unbound]' b'02:55:47 19074 be/4 root 16.00 K 480.00 K 0.00 % 0.00 % [kworker/u16:4-btrfs-endio-write]' b'02:55:47 19006 be/4 root 16.00 K 1872.00 K 0.00 % 0.00 % [kworker/u16:1-events_unbound]' b'02:55:47 1429 be/4 root 484.00 K 0.00 B 0.00 % 0.00 % accounts-daemon' b'02:55:47 15820 be/4 valdikss 312.00 K 0.00 B 0.00 % 0.00 % firefox -contentproc -childID 6 -isForBrowser -prefsLen 7894 -prefMapSize 223880 -parentBuildID 20191022164834 -greomni /usr/lib64/firefox/omni.ja -appomni /usr/lib64/firefox/browser/omni.ja -appdir /usr/lib64/firefox/browser 15057 tab' b'02:55:47 2125 ?dif valdikss 0.00 B 92.00 K 0.00 % 0.00 % plasmashell' b'02:55:47 1268 be/3 root 0.00 B 4.00 K 0.00 % 0.00 % auditd' b'02:55:47 1414 be/4 root 0.00 B 4.00 K 0.00 % 0.00 % sssd_nss --uid 0 --gid 0 --logger=files' b'02:55:47 15238 be/4 valdikss 0.00 B 4.00 K 0.00 % 0.00 % thunderbird' b'02:55:47 18605 be/4 root 0.00 B 3.19 M 0.00 % 0.00 % [kworker/u16:0-btrfs-endio-write]' b'02:55:47 18867 be/4 root 0.00 B 96.00 K 0.00 % 0.00 % [kworker/u16:5-btrfs-endio-meta]' b'02:55:47 19070 be/4 root 0.00 B 160.00 K 0.00 % 0.00 % [kworker/u16:2-btrfs-freespace-write]' b'02:55:47 19645 be/4 root 0.00 B 2.17 M 0.00 % 0.00 % [kworker/u16:3-events_unbound]' b'02:55:47 19982 be/4 root 0.00 B 496.00 K 0.00 % 0.00 % [kworker/u16:6-btrfs-endio-write]'</code> </pre> </div></div><br><br>  Firefoxå¼•èµ·äº†æ‚¨çš„æ³¨æ„ï¼Œå®ƒåœ¨iotopçš„å‡ åˆ†é’Ÿå†…å°±è®°å½•äº†283 MBã€‚ <br><br><h3> å®šä¹‰è¦è®°å½•çš„æ–‡ä»¶ </h3> å…³äºå¼ºå¥¸å…‰ç›˜çš„è¿‡ç¨‹çš„ä¿¡æ¯å¾ˆå¥½ï¼Œå¹¶ä¸”è®°å½•æ–¹å¼ç”šè‡³æ›´å¥½ã€‚ <br><br> æˆ‘ä»¬ä½¿ç”¨<code>fatrace</code>ç¨‹åºï¼Œè¯¥ç¨‹åºè·Ÿè¸ªå¯¹æ–‡ä»¶ç³»ç»Ÿçš„æ›´æ”¹ã€‚ <br><pre> <code class="plaintext hljs"># fatrace -f W</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">ç¨‹åºè¾“å‡ºç¤ºä¾‹</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">firefox(15057): CW /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite-wal firefox(15057): CW /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite-journal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite-journal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite-journal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite-journal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite-journal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite-journal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite-journal firefox(15057): CW /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/usage-journal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/usage firefox(15057): CW /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/usage firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite-journal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/webappsstore.sqlite-wal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/webappsstore.sqlite-wal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/webappsstore.sqlite-wal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/webappsstore.sqlite-wal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/webappsstore.sqlite-wal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/webappsstore.sqlite-wal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/webappsstore.sqlite-wal firefox(15057): CW /home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/https+++habr.com/ls/data.sqlite-journal firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/webappsstore.sqlite firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/webappsstore.sqlite firefox(15057): W /home/valdikss/.mozilla/firefox/xyf4vqh2.default/webappsstore.sqlite</code> </pre> </div></div><br><br> ç”±äºä½¿ç”¨äº†ä¸€ä¸ªéå¸¸ç®€å•çš„è·Ÿè¸ªé€šè¿‡inotifyè®¿é—®æ–‡ä»¶çš„äº‹å®ï¼Œå› æ­¤Fatraceæ— æ³•æ˜¾ç¤ºè®°å½•çš„æ•°æ®é‡ã€‚ <br><br> ä»è¾“å‡ºä¸­å¯ä»¥çœ‹å‡ºï¼ŒHabråœ¨æ’°å†™æ–‡ç« æ—¶æ˜¯å¦‚ä½•å°†æˆ‘çš„æ–‡ç« ä¿å­˜åœ¨æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨ä¸­ï¼Œä»¥åŠä½¿ç”¨Speedraceå‘ç°çš„Group Speed Dialæ‰©å±•ååˆ™æ¯30ç§’è¯»å–ä¸€æ¬¡å…¶æ•°æ®ã€‚ å®ƒè¯»å–è€Œä¸æ˜¯å†™å…¥ï¼šæ–‡ä»¶å‰é¢çš„<b>CW</b>è¡¨ç¤ºå·²æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œå¦‚æœç¼ºå°‘åˆ™åœ¨åˆ›å»ºæ–‡ä»¶æ—¶æ‰“å¼€ï¼ˆä½¿ç”¨O_RDWR | O_CREATæ ‡å¿—è°ƒç”¨openatï¼‰ï¼Œä½†æœªè¯´æ˜å®é™…å†™å…¥çš„æ–‡ä»¶ä»»ä½•ä¿¡æ¯ã€‚ <br><br> ä»¥é˜²ä¸‡ä¸€ï¼Œä¸ºç¡®ä¿è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨straceï¼Œå¹¶ä¸ºæ–‡ä»¶ç³»ç»Ÿè°ƒç”¨æä¾›è¿‡æ»¤å™¨ï¼š <br><pre> <code class="plaintext hljs">strace -yy -e trace=open,openat,close,write -f -p 15057 2&gt;&amp;1 | grep extension</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">å›¢é˜Ÿäº§å‡º</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">[pid 20352] openat(AT_FDCWD, "/home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite", O_RDWR|O_CREAT|O_CLOEXEC, 0644) = 153&lt;/home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite&gt; [pid 20352] read(153&lt;/home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite&gt;, "SQLite format 3\0\20\0\2\2\0@ \0\0\0d\0\0\0\23"..., 100) = 100 [pid 20352] read(153&lt;/home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite&gt;, "SQLite format 3\0\20\0\2\2\0@ \0\0\0d\0\0\0\23"..., 4096) = 4096 [pid 20352] openat(AT_FDCWD, "/home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite-wal", O_RDWR|O_CREAT|O_CLOEXEC, 0644) = 166&lt;/home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite-wal&gt; â€¦ [pid 20352] read(54&lt;/home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite&gt;, "\0\0\0\r\4\30\4\36\4\35\4\35\4\36\4-\0 \4\20\4!\4'\4\1\4\"\0250 &amp;"..., 4096) = 4096 [pid 20352] read(54&lt;/home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite&gt;, "\0\0\0\0\1\36P\t\226\250\4\0O\245\320\16:\"\16.\27\0r\245\306&gt;\246\1\t\1q\370"..., 4096) = 4096 [pid 20352] close(77&lt;/home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite-wal&gt;) = 0 [pid 20352] close(54&lt;/home/valdikss/.mozilla/firefox/xyf4vqh2.default/storage/default/moz-extension+++e5c304fb-af40-498a-9ba8-47eb0416e933^userContextId=4294967295/idb/3647222921wleabcEoxlt-eengsairo.sqlite&gt;) = 0</code> </pre> </div></div><br> æ²¡æœ‰å¯¹<code>write()</code>è°ƒç”¨ï¼Œè¿™è¡¨æ˜æ²¡æœ‰å†™å…¥æ–‡ä»¶ã€‚ <br><br><h3> ç¡®å®šæ–‡ä»¶ç³»ç»Ÿå¼€é”€ </h3>  <code>iotop</code>å’Œ<code>btrace</code>çš„å·¨å¤§å·®å¼‚ä¿ƒä½¿è¯¥æƒ³æ³•é€šè¿‡æ‰‹åŠ¨å°†æ•°æ®å†™å…¥æ–‡ä»¶å¹¶è·Ÿè¸ªbtraceè¯»æ•°æ¥æµ‹è¯•æ–‡ä»¶ç³»ç»Ÿã€‚ <br><br> å¦‚æœé€šè¿‡åŠ è½½åˆ°systemdç´§æ€¥æ¨¡å¼å¹¶æ‰‹åŠ¨å°†<b>å‡ ä¸ªå­—èŠ‚çš„</b>æ•°æ®å†™å…¥ç°æœ‰æ–‡ä»¶æ¥å®Œå…¨æ’é™¤å†™å…¥ç£ç›˜ï¼Œåˆ™å…·æœ‰<b>btrfs</b>çš„SSDä¸Šçš„btraceæŠ¥å‘Šå·²å†™å…¥<b>3å…†å­—èŠ‚çš„</b>å®é™…æ•°æ®ã€‚ æ–°åˆ›å»ºçš„8 GBé—ªå­˜é©±åŠ¨å™¨çš„æ–‡ä»¶ç³»ç»Ÿåœ¨è®°å½•ä¸€ä¸ªå­—èŠ‚æ—¶è‡³å°‘å†™å…¥264 KiBã€‚ <br> ä¸ºäº†è¿›è¡Œæ¯”è¾ƒï¼Œå‘ext4ä¸Šçš„æ–‡ä»¶å†™å…¥ä¸€å¯¹å­—èŠ‚ä»¥å‘ç£ç›˜å†™å…¥24 KBæ•°æ®ç»“æŸã€‚ <br><br>  2017å¹´ï¼ŒJayashree Mohanï¼ŒRohan Kadekodiå’ŒVijay Chidambaram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯¹ä¸åŒæ–‡ä»¶ç³»ç»Ÿçš„å†™å…¥æ”¾å¤§è¿›è¡Œäº†ç ”ç©¶ï¼Œ</a>å½“å†™å…¥4 KBæ—¶btrfså’Œext4çš„ç»“æœä¸æˆ‘çš„ç›¸ä¼¼ã€‚ <br><br><img src="https://habrastorage.org/webt/s2/o1/pa/s2o1parvcsurvjl5rkpiijc1fgo.png"><br><br><h3> ç»“è®ºä¸ç»“è®º </h3> é€šè¿‡æè¿°çš„æ“ä½œï¼Œå‘ç°äº†ï¼š <br><ol><li>  CUPSæ‰“å°å®ˆæŠ¤ç¨‹åºæ¯åˆ†é’Ÿç»å¸¸åœ¨/ var / <u>cache</u> / cupsä¸­è®°å½•æ‰“å°æœºçš„ä½œä¸šçŠ¶æ€ é€šè¿‡æ¸…æ´/ var / <u>spool</u> / cupsè§£å†³äº†è¯¥é—®é¢˜ï¼ˆå°½ç®¡æ²¡æœ‰æ‰“å°ä½œä¸šï¼‰ï¼› </li><li>  Firefoxçš„æ‰©å±•ç»„å¿«é€Ÿæ‹¨å·æ¯30ç§’è¯»å–ä¸€æ¬¡æ•°æ®åº“çš„äº‹å®ï¼› </li><li>  Fedoraä¸­å„ç§æ€§èƒ½è·Ÿè¸ªæœåŠ¡çš„å®šæœŸæ—¥å¿—è®°å½•ï¼Œå¯¼è‡´åœ¨btrfsä¸Šè®°å½•äº†å‡ å…†å­—èŠ‚çš„æ•°æ®ï¼špmcd.serviceï¼Œpmie.serviceï¼Œpmlogger.serviceï¼› </li><li> ä½¿ç”¨btrfsè®°å½•å°‘é‡æ•°æ®æ—¶ä¼šäº§ç”Ÿå·¨å¤§çš„æ”¾å¤§ã€‚ </li></ol><br> ç»“è®ºï¼šå¦‚æœç¨‹åºç»å¸¸å†™å…¥å°‘é‡æ•°æ®ï¼ˆå‡ åƒå­—èŠ‚ï¼‰ï¼Œåˆ™ä¸åº”ä½¿ç”¨btrfsï¼Œå¦åˆ™å®ƒå°†å˜æˆå…†å­—èŠ‚çš„è®°å½•æ•°æ®ã€‚ å¯¹äºå¸¦æœ‰MicroSDæ“ä½œç³»ç»Ÿçš„å•æ¿è®¡ç®—æœºå°¤å…¶å¦‚æ­¤ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN476414/">https://habr.com/ru/post/zh-CN476414/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN476398/index.html">Reduxå°±åƒSwiftUIä¸­çš„çŠ¶æ€å®¹å™¨ã€‚ åŸºç¡€çŸ¥è¯†</a></li>
<li><a href="../zh-CN476404/index.html">å®‰å…¨å‘¨åˆŠ47ï¼šéåŒå¯»å¸¸çš„æ¼æ´</a></li>
<li><a href="../zh-CN476406/index.html">çº¦ä¼šä¸­çš„ç¥ç»ç½‘ç»œ</a></li>
<li><a href="../zh-CN476408/index.html">ææ¬¾</a></li>
<li><a href="../zh-CN476412/index.html">Hannes Lindemannè¯‰Alain Bombardï¼šæ­ç©¿ç¥è¯ï¼Ÿ</a></li>
<li><a href="../zh-CN476416/index.html">ä»Windowsç®¡ç†ä¸­å¿ƒç®¡ç†Windows Server</a></li>
<li><a href="../zh-CN476418/index.html">åˆåˆ›ä¼ä¸šï¼šæ–¯å¦ç¦å¤§å­¦20å ‚è¯¾ä¸­çš„10å ‚è¯¾</a></li>
<li><a href="../zh-CN476420/index.html">ä»ä¸€å¼€å§‹å°±åœ¨dartå’ŒFlutterä¸­å¼€å§‹ä½¿ç”¨ReactiveX</a></li>
<li><a href="../zh-CN476424/index.html">æ¡†æ¶-å¼Šå¤§äºåˆ©</a></li>
<li><a href="../zh-CN476430/index.html">å¦‚ä½•åˆ›å»ºå®Œç¾çš„æŠ€æœ¯ç»„åˆ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>