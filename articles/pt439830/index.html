<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•á üëäüèª üñäÔ∏è Inside Quake: sempre considere alternativas ü§∏ üîé ü§ï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O programador Michael Abrash, convidado por John Carmack para trabalhar no motor do primeiro terremoto em meados dos anos 90, escreveu uma s√©rie de ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Inside Quake: sempre considere alternativas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439830/"><div style="text-align:center;"><img src="https://steemitimages.com/p/USgKopgPmA7SYpFB96Gheb9tK3fTW7Ck3gsGQ8tb7V8UbQnEKC6SXDMMhx5idgb5LV6sCECsXeG3Sjto2AXKzN" alt="imagem"></div><br>  <i>O programador Michael Abrash, convidado por John Carmack para trabalhar no motor do primeiro terremoto em meados dos anos 90, escreveu uma s√©rie de artigos durante o processo de desenvolvimento.</i>  <i>Esta √© a segunda coluna desta s√©rie.</i>  <i>A tradu√ß√£o do primeiro est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .</i> <br><br>  Devo admitir: cansei do rock cl√°ssico.  A √∫ltima vez que fiquei feliz em ouvir algo de Cars ou Boston por um longo tempo, cerca de 20 anos atr√°s.  Al√©m disso, nunca fui particularmente atra√≠do por Bob Seager e Queen, sem mencionar Elvis, t√£o pouco mudou.  Mas percebi que algo mudou quando eu queria mudar o r√°dio quando ouvi Allman Brothers, Steely Dan, Pink Floyd ou, Deus, me perdoe, os Beatles (mas apenas em coisas como "Ol√°, adeus" e "Vou Em vez disso, chore, n√£o ingresso para passeio ou Um dia na vida; ainda n√£o cheguei <u>t√£o</u> longe).  N√£o demorou muito tempo para encontrar as raz√µes para isso;  Ouvi as mesmas m√∫sicas por um quarto de s√©culo e me cansei delas. <br><br>  Conto tudo dessa maneira porque, quando minha filha e eu sa√≠mos do caf√© uma noite, a esta√ß√£o de r√°dio ‚ÄúN√£o h√° alternativa‚Äù foi ligada pela primeira vez no carro. <br><br>  Estamos falando de uma menina de dez anos que cresceu com uma dieta constante de sucessos antigos.  Ela gosta de melodias, m√∫sicas cativantes e bons cantores.  Voc√™ n√£o encontrar√° nada disso ao ouvir uma esta√ß√£o de rock alternativa.  Portanto, n√£o √© de surpreender que, quando liguei o r√°dio, ela primeiro disse: "Fu!" <br><br>  Mas eis o que me surpreendeu: depois de ouvir um pouco, ela disse: "Sabe pai, mas isso √© realmente interessante". <br><br>  Isso n√£o apenas sugeriu para mim sobre que tipo de m√∫sica ressoaria por toda a casa quando ela se tornasse adolescente.  Sua r√°pida ado√ß√£o do rock alternativo (em compara√ß√£o com o meu fasc√≠nio pela m√∫sica de minha pr√≥pria juventude com dura√ß√£o de dez anos) me lembrou algo que √© facilmente esquecido quando voc√™ envelhece e o estilo de vida se estabelece.  Isso me lembrou que era necess√°rio manter a mente aberta e estar preparado - al√©m disso, esfor√ßar-se - para tentar coisas novas. <a name="habracut"></a>  Os programadores tendem a se apegar a abordagens familiares e tendem a us√°-las se lidarem adequadamente com as tarefas.  Mas sempre existem alternativas √† programa√ß√£o, e acho que elas valem a pena ser exploradas com frequ√™ncia. <br><br>  Mas, dada a natureza sempre mut√°vel do <u>Quake</u> , eu realmente n√£o deveria precisar de um lembrete assim. <br><br><h2>  Fluxo do criativo </h2><br>  Em janeiro, descrevi um fluxo criativo que levou John Carmack a decidir usar pol√≠gonos pr√©-computados de conjunto potencialmente vis√≠vel (PVS) para todos os pontos de vista poss√≠veis no <u>Quake</u> (um jogo que estamos desenvolvendo em conjunto na id Software).  O c√°lculo preliminar do PVS significa que, em vez de gastar muito tempo pesquisando no banco de dados de pol√≠gonos vis√≠veis do ponto de vista atual no banco de dados mundial, podemos simplesmente desenhar todos os pol√≠gonos no PVS de volta para frente (pegando a ordem da √°rvore BSP do mundo; discuss√£o sobre BSP- veja √°rvores em nossas colunas em maio, julho e novembro de 1995) e obtenha a cena renderizada corretamente completamente sem pesquisar, permitindo que a renderiza√ß√£o reversa complete a √∫ltima etapa da remo√ß√£o da superf√≠cie oculta (HSR).  Foi uma ideia incr√≠vel, mas para a arquitetura do Quake o caminho ainda n√£o foi conclu√≠do. <br><br><h2>  Desenhando objetos em movimento </h2><br>  Por exemplo, ainda h√° uma pergunta sobre como classificar e desenhar corretamente objetos em movimento;  de fato, essa pergunta ap√≥s a coluna de janeiro foi feita acima de tudo, portanto, darei tempo a ela.  O principal problema √© que um modelo em movimento pode cair em v√°rias folhas do BSP e, quando o modelo se move, essas folhas mudam;  juntamente com a possibilidade de encontrar v√°rios modelos em uma folha, isso significa que n√£o h√° uma maneira f√°cil de usar a ordem BSP para desenhar modelos em uma ordem classificada corretamente.  Quando escrevi a coluna de janeiro, desenhamos sprites (como explos√µes), modelos m√≥veis de BSP (como portas) e modelos poligonais (como monstros), truncando cada um deles com as folhas que tocavam e desenhando as partes correspondentes quando cada folha de BSP atingia sua vez de dar a volta de tr√°s para frente.  No entanto, isso n√£o resolveu o problema de classificar v√°rios modelos m√≥veis em uma folha em rela√ß√£o uma √† outra e tamb√©m deixou problemas desagrad√°veis ‚Äã‚Äãcom modelos poligonais complexos. <br><br>  John resolveu o problema de classifica√ß√£o de modelos de sprites e pol√≠gonos de uma maneira surpreendentemente baixa em tecnologia: agora os escrevemos no buffer z.  (Ou seja, antes de desenhar cada pixel, comparamos a dist√¢ncia a ele, ou z, com o valor z do pixel que j√° est√° na tela. Um novo pixel √© desenhado apenas se estiver mais pr√≥ximo do que o existente.) Primeiro, desenhamos o mundo principal - paredes, tetos e assim por diante. assim.  Nesse est√°gio, nenhum <u>teste do</u> z-buffer √© usado (como veremos em breve, a defini√ß√£o das superf√≠cies vis√≠veis do mundo √© realizada de outra maneira);  no entanto, <u>preenchemos o</u> buffer z <u>com</u> valores z (na verdade, valores 1 / z, conforme descrito abaixo) para todos os pixels do mundo.  Preencher um buffer Z √© um processo muito mais r√°pido do que o buffer z seria o mundo inteiro, porque n√£o h√° leitura, compara√ß√£o ou apenas valor z.  Depois de concluir o desenho e preencher o buffer z do mundo, podemos simplesmente desenhar sprites e modelos poligonais usando o buffer z e obter a classifica√ß√£o perfeita. <br><br>  Ao usar o buffer z, surgem inevitavelmente perguntas: como isso afeta a mem√≥ria e o desempenho ocupados?  Com uma resolu√ß√£o de 320x200, requer 128 KB de mem√≥ria, o que n√£o √© trivial, mas n√£o tanto para um jogo que requer 8 MB para funcionar.  Impacto no desempenho: cerca de 10% ao preencher o buffer z do mundo e cerca de 20% (os indicadores variam bastante) ao renderizar sprites e modelos poligonais.  Em troca, temos um mundo perfeitamente classificado, bem como a capacidade de criar efeitos adicionais, por exemplo, explos√µes e fuma√ßa de part√≠culas, porque o buffer z permite que voc√™ classifique esses efeitos facilmente no mundo.  Em geral, o uso do z-buffer aumentou significativamente a qualidade visual e a flexibilidade do mecanismo Quake, al√©m de simplificar significativamente o c√≥digo, ao custo de custos e desempenho razo√°veis ‚Äã‚Äãda mem√≥ria. <br><br><h2>  Nivelamento e aumento da produtividade </h2><br>  Como eu disse acima, a arquitetura do <u>Quake</u> primeiro desenha o mundo em si, sem ler ou comparar o buffer z, apenas preenchendo o buffer z com os valores dos pol√≠gonos do mundo em z.  Depois disso, objetos em movimento s√£o desenhados no topo do mundo usando o z-buffer completo.  At√© agora, s√≥ falei sobre como desenhar objetos em movimento.  No restante da coluna, falarei sobre outra parte da equa√ß√£o de renderiza√ß√£o - desenhar o pr√≥prio mundo, quando o mundo inteiro √© armazenado como uma √°rvore BSP e nunca se move. <br><br>  Como voc√™ pode se lembrar da coluna de janeiro, est√°vamos preocupados com o desempenho bruto e sua m√©dia.  Ou seja, quer√≠amos que o c√≥digo de renderiza√ß√£o fosse executado o mais r√°pido poss√≠vel, mas ao mesmo tempo, para que a diferen√ßa entre a velocidade de renderiza√ß√£o da cena intermedi√°ria e a mais lenta na renderiza√ß√£o da cena fosse a menor poss√≠vel.  N√£o h√° nada de bom na m√©dia de 30 quadros por segundo, se 10% das cenas forem desenhadas a 5 qps, porque o movimento dessas cenas ser√° extremamente percept√≠vel em compara√ß√£o com a cena m√©dia.  √â melhor calcular a frequ√™ncia com 15 quadros por segundo em 100% dos casos, mesmo que a velocidade m√©dia de renderiza√ß√£o seja metade da mesma. <br><br>  PVSs pr√©-calculados foram um passo importante em dire√ß√£o a um desempenho mais alto e mais equilibrado, porque eliminaram a necessidade de determinar pol√≠gonos vis√≠veis - um est√°gio bastante lento que se manifestou pior nas cenas mais complexas.  No entanto, em alguns locais com n√≠veis reais de jogo, os PVS pr√©-computados cont√™m cinco vezes mais pol√≠gonos do que realmente √© visto;  em conjunto com a remo√ß√£o da superf√≠cie oculta para tr√°s (HSR), isso criou ‚Äúzonas quentes‚Äù nas quais a taxa de quadros foi notavelmente reduzida.  Centenas de pol√≠gonos foram atra√≠dos de volta para a frente e a maioria deles foi imediatamente redesenhada por pol√≠gonos mais pr√≥ximos.  O desempenho bruto como um todo tamb√©m diminuiu em m√©dia 50% do redesenho causado pela renderiza√ß√£o de tudo no PVS.  Portanto, embora a renderiza√ß√£o de conjuntos PVS reversos funcionasse como o √∫ltimo est√°gio do HSR e fosse uma melhoria em rela√ß√£o √† arquitetura anterior, n√£o era o ideal.  John achou que provavelmente havia uma maneira melhor de usar o PVS do que desenhar da frente para tr√°s. <br><br>  E ele realmente foi encontrado. <br><br><h2>  Intervalos classificados </h2><br>  O √∫ltimo est√°gio ideal do HSR para o Quake foi descartar todos os pol√≠gonos no PVS que realmente eram invis√≠veis e desenhar apenas os pixels vis√≠veis dos pol√≠gonos restantes sem redesenhar.  Ou seja, cada pixel seria desenhado exatamente uma vez e sem perda de desempenho, √© claro.  Uma solu√ß√£o (exigindo, no entanto, custos) √© desenhar da frente para tr√°s, salvar a √°rea que descreve as partes atualmente sobrepostas da tela e truncar cada pol√≠gono com as bordas dessa √°rea antes da renderiza√ß√£o.  Parece promissor, mas na verdade √© uma reminisc√™ncia da solu√ß√£o de √°rvore de pacotes configur√°veis ‚Äã‚Äãque descrevi na coluna de janeiro.  Como descobrimos, essa abordagem requer um desperd√≠cio de recursos extras e tem s√©rios problemas com o balanceamento de carga. <br><br>  Voc√™ pode fazer muito melhor se mover a √∫ltima etapa do HSR do n√≠vel do pol√≠gono para o n√≠vel do intervalo e usar a solu√ß√£o com intervalos classificados.  Em ess√™ncia, essa abordagem consiste em transformar cada pol√≠gono em um conjunto de intervalos, como mostrado na Figura 1, seguido por classificar e truncar os intervalos entre si at√© que apenas partes vis√≠veis dos intervalos vis√≠veis permane√ßam para renderiza√ß√£o, como mostra a Figura 2. Isso pode parecer muito semelhante ao z-buffer (que, como eu disse acima, √© muito lento para ser usado na renderiza√ß√£o do mundo, embora seja adequado para objetos em movimento menores), mas existem diferen√ßas importantes.  Ao contr√°rio do buffer z, apenas as partes vis√≠veis dos intervalos vis√≠veis s√£o digitalizadas pixel por pixel (embora todas as arestas dos pol√≠gonos ainda precisem ser rasterizadas).  Melhor ainda, a classifica√ß√£o realizada pelo buffer z para cada pixel se torna uma opera√ß√£o de intervalo com intervalos classificados e, como uma propriedade integral da lista de intervalos √© conectividade, cada borda √© classificada apenas em rela√ß√£o a alguns intervalos na mesma linha e √© truncada apenas por alguns intervalos quando sobreposi√ß√£o horizontal.  Embora cenas complexas ainda demorem mais para serem processadas do que cenas simples, os piores casos n√£o eram t√£o ruins quanto ao usar √°rvores com vigas ou ao classificar de tr√°s para frente, porque n√£o h√° redesenho e varredura de pixels ocultos, a complexidade √© limitada pela resolu√ß√£o de pixels e a conectividade por intervalo limita a classifica√ß√£o dos piores casos em qualquer √°rea da tela.  Como b√¥nus, a sa√≠da dos intervalos classificados est√° exatamente na forma que um rasterizador de baixo n√≠vel precisa: no formato de um conjunto de descritores de intervalo, cada um dos quais consiste em uma coordenada do in√≠cio e do comprimento. <br><br><img src="https://www.bluesnews.com/abrash/images/66_fig1.gif"><br><br>  <i>Gera√ß√£o de intervalo</i> <br><br>  Em suma, a solu√ß√£o com intervalos ordenados est√° muito pr√≥xima dos nossos crit√©rios originais;  embora n√£o economize custos, eles ainda n√£o s√£o totalmente terr√≠veis.  Elimina completamente o redesenho e a digitaliza√ß√£o de pixels das partes sobrepostas dos pol√≠gonos e √© propenso a igualar o desempenho nos piores casos.  N√£o confiar√≠amos apenas em intervalos classificados como um mecanismo para eliminar superf√≠cies ocultas, mas o PVS pr√©-calculado reduz o n√∫mero de pol√≠gonos a um n√≠vel que os intervalos classificados lidam bem o suficiente. <br><br>  Ent√£o, encontramos a abordagem de que precisamos;  resta apenas escrever o c√≥digo e isso acabou, certo?  Sim e n√£o  A abordagem conceitual com intervalos ordenados √© simples, mas surpreendentemente dif√≠cil de implementar: voc√™ precisa tomar algumas decis√µes importantes no projeto, √© preciso um pouco de matem√°tica e existem armadilhas astutas.  Vamos examinar primeiro as solu√ß√µes de design. <br><br><h2>  Costelas vs. Intervalos </h2><br>  A primeira decis√£o √© escolher o que classificar: intervalos ou arestas (ambos os conceitos pertencem √† categoria geral de "intervalos classificados").  Embora os resultados em ambos os casos sejam os mesmos (uma lista de intervalos que precisam ser desenhados sem redesenhar), as implementa√ß√µes e implica√ß√µes de desempenho s√£o muito diferentes, pois a classifica√ß√£o e o truncamento s√£o executados por estruturas de dados muito diferentes. <br><br>  Ao classificar intervalos, esses intervalos s√£o armazenados em segmentos de mem√≥ria classificados por x listas vinculadas, geralmente um segmento por linha raster.  Cada pol√≠gono, por sua vez, √© rasterizado em intervalos, conforme mostrado na Figura 1. Cada intervalo √© classificado e truncado no segmento de mem√≥ria da linha raster na qual o intervalo est√° localizado, conforme mostrado na Figura 2, para que, a qualquer momento, cada segmento contenha os intervalos mais pr√≥ximos encontrados. , sempre sem sobreposi√ß√µes.  Com essa abordagem, √© necess√°rio gerar todos os intervalos para cada pol√≠gono por vez, e cada intervalo √© imediatamente classificado, truncado e adicionado ao segmento de mem√≥ria correspondente. <br><br><img src="https://www.bluesnews.com/abrash/images/66_fig2.gif"><br><br>  <i>Figura 2: os intervalos do pol√≠gono A da Figura 1 s√£o classificados e truncados em intervalos do pol√≠gono B, enquanto o pol√≠gono A est√° a uma dist√¢ncia constante de 100 ao longo do eixo Z, e o pol√≠gono B est√° a uma dist√¢ncia constante de 50 ao longo do eixo Z (o pol√≠gono B est√° mais pr√≥ximo da c√¢mera )</i> <br><br>  Ao classificar arestas, essas arestas s√£o armazenadas em segmentos de mem√≥ria classificados por x listas vinculadas de acordo com sua linha de varredura inicial.  Cada pol√≠gono, por sua vez, √© dividido em arestas, criando juntos uma lista de todas as arestas da cena.  Quando todas as arestas de todos os pol√≠gonos na pir√¢mide de visibilidade s√£o adicionadas √† lista de arestas, a lista inteira √© digitalizada em uma passagem de cima para baixo, da esquerda para a direita.  Uma lista da lista de arestas ativas (AEL) √© salva.  Em cada etapa de uma nova linha raster, as arestas que aparecem nessa linha raster s√£o removidas da AEL, as arestas ativas v√£o para suas novas coordenadas x, as arestas iniciadas na nova linha raster s√£o adicionadas √† AEL e as arestas s√£o classificadas pela coordenada x atual. <br><br>  Para cada linha de varredura, uma lista de pol√≠gonos ativos (APL) classificada por z √© armazenada.  Ele vai na ordem classificada por x AEL.  Ao reunir-se com cada nova aresta (ou seja, quando cada pol√≠gono inicia ou termina ao mover da esquerda para a direita), o pol√≠gono associado a ele √© ativado e classificado na APL (no caso de uma aresta inicial), como mostra a Figura 3, ou desativado e exclu√≠do da APL ( no caso de uma aresta √† direita), como mostrado na Figura 4. Se o pol√≠gono mais pr√≥ximo mudou (ou seja, o mais pr√≥ximo √© um novo pol√≠gono ou o pol√≠gono mais pr√≥ximo terminou), para o pol√≠gono que deixou de ser o mais pr√≥ximo, √© criado um intervalo a partir do ponto em que o pol√≠gono n√£o est√°  vym porque √© o mais pr√≥ximo e terminando coordenada x das bordas atuais e os atuais coordenada x √© gravado no aterro, que agora √© o mais pr√≥ximo.  Essa coordenada armazenada √© usada mais tarde como o in√≠cio do intervalo criado quando o novo pol√≠gono mais pr√≥ximo deixa de estar na frente. <br><br><img src="https://www.bluesnews.com/abrash/images/66_fig3.gif"><br><br>  <i>Figura 3: ativa√ß√£o do pol√≠gono quando uma aresta inicial √© detectada no AEL.</i> <br><br><img src="https://www.bluesnews.com/abrash/images/66_fig4.gif"><br><br>  <i>Figura 4: desativa√ß√£o de pol√≠gono quando uma borda posterior √© detectada no AEL.</i> <br><br>  N√£o se preocupe se voc√™ n√£o entender completamente o que foi dito acima;  Esta √© apenas uma r√°pida vis√£o geral das arestas de classifica√ß√£o, para que o restante da coluna fique mais claro.  Uma explica√ß√£o detalhada estar√° na pr√≥xima coluna. <br><br>  Os intervalos gerados pela classifica√ß√£o das arestas parecem ser exatamente os mesmos que resultariam da classifica√ß√£o dos intervalos;  a diferen√ßa est√° nas estruturas de dados intermedi√°rias usadas para classificar os intervalos na cena.  Ao classificar arestas, os intervalos s√£o armazenados dentro das arestas at√© que o conjunto final de intervalos vis√≠veis seja gerado; portanto, os intervalos de classifica√ß√£o, corte e cria√ß√£o s√£o executados quando cada aresta adiciona ou remove um pol√≠gono, com base no estado do intervalo definido pela aresta e no conjunto de pol√≠gonos ativos.  Ao classificar os intervalos, os intervalos instantaneamente se tornam aparentes quando cada pol√≠gono √© rasterizado, e esses intervalos intermedi√°rios s√£o classificados e truncados em rela√ß√£o aos intervalos na linha raster para criar os intervalos finais;  portanto, os estados dos intervalos s√£o constantemente definidos explicitamente e todo o trabalho √© executado diretamente em intervalos. <br><br>  A classifica√ß√£o por intervalos e a classifica√ß√£o por arestas funcionam bem; elas foram usadas com sucesso em projetos comerciais.  Para o Quake, escolhemos a classifica√ß√£o de arestas, em parte porque parece ser mais eficiente e possui excelente conectividade horizontal que fornece o tempo m√≠nimo de classifica√ß√£o, em contraste com a classifica√ß√£o potencialmente cara em listas vinculadas, que pode ser necess√°ria ao classificar intervalos.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No entanto, um motivo mais importante foi que, ao classificar as arestas, podemos dividir as arestas entre pol√≠gonos adjacentes, o que reduz a classifica√ß√£o, o corte e a rasteriza√ß√£o de arestas pela metade, al√©m de reduzir significativamente o banco de dados mundial devido ao fato de as arestas se tornarem comuns. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E a √∫ltima vantagem da classifica√ß√£o de arestas √© que ela n√£o distingue entre pol√≠gonos convexos e c√¥ncavos. Para a maioria dos mecanismos gr√°ficos, esse n√£o √© um aspecto muito importante, mas no Quake, aparar, transformar, projetar e classificar arestas se tornou o principal gargalo, por isso estamos fazendo todo o poss√≠vel para reduzir o n√∫mero de pol√≠gonos e arestas, e os pol√≠gonos c√¥ncavos s√£o muito √∫teis nesse sentido. Embora pol√≠gonos c√¥ncavos tamb√©m possam ser processados ‚Äã‚Äãpor intervalos de classifica√ß√£o, isso implica uma diminui√ß√£o significativa no desempenho.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No entanto, n√£o h√° resposta definitiva sobre a melhor abordagem. </font><font style="vertical-align: inherit;">No final, os intervalos de classifica√ß√£o e as arestas de classifica√ß√£o desempenham uma fun√ß√£o, e escolher entre eles √© uma quest√£o de usabilidade. </font><font style="vertical-align: inherit;">Na pr√≥xima coluna, falarei mais sobre a classifica√ß√£o de arestas com sua implementa√ß√£o completa. </font><font style="vertical-align: inherit;">No restante desta coluna, estabelecerei as bases para a pr√≥xima, falando sobre as chaves de classifica√ß√£o e o c√°lculo de 1 / z. </font><font style="vertical-align: inherit;">No processo, farei v√°rias refer√™ncias aos aspectos das arestas de classifica√ß√£o, que ainda n√£o foram discutidas em detalhes; </font><font style="vertical-align: inherit;">Pe√ßo desculpas, mas isso √© inevit√°vel, e tudo ficar√° claro apenas no final da pr√≥xima coluna.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teclas de classifica√ß√£o de nervuras </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora que sabemos que vamos selecionar a classifica√ß√£o das arestas e us√°-la para criar os intervalos dos pol√≠gonos mais pr√≥ximos do espectador, surge a pergunta: como voc√™ sabe se esses pol√≠gonos s√£o os mais pr√≥ximos? Idealmente, simplesmente armazenar√≠amos a chave de classifica√ß√£o de cada pol√≠gono e, quando uma nova aresta aparecer, comparar√≠amos a chave de sua superf√≠cie com as chaves de outros pol√≠gonos ativos atuais, a fim de determinar facilmente qual dos pol√≠gonos est√° mais pr√≥ximo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parece bom demais, mas √© poss√≠vel. Se, por exemplo, seu banco de dados mundial estiver armazenado como uma √°rvore do BSP e todos os pol√≠gonos forem truncados nas folhas do BSP, a ordem de passagem do BSP ser√° a ordem de renderiza√ß√£o correta. Portanto, por exemplo, se voc√™ percorre o BSP da frente para tr√°s, atribuindo a cada pol√≠gono um valor de chave incrementalmente maior quando o atinge, os pol√≠gonos com valores de chave mais altos garantem que est√£o na frente dos pol√≠gonos com chaves menores. Essa abordagem foi usada no Quake h√° algum tempo, mas agora uma solu√ß√£o diferente est√° sendo aplicada por raz√µes que explicarei em breve.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ n√£o possui um BSP ou uma estrutura de dados semelhante, ou se possui muitos pol√≠gonos m√≥veis (o BSP n√£o processa pol√≠gonos m√≥veis com muita efici√™ncia), outra maneira de alcan√ßar objetivos √© classificar todos os pol√≠gonos entre si antes de renderizar a cena e atribuir as chaves correspondentes de acordo com seu espa√ßo. relacionamentos na janela de visualiza√ß√£o. Infelizmente, no caso geral, essa √© uma tarefa extremamente lenta, porque cada pol√≠gono precisa ser comparado. Existem t√©cnicas para melhorar o desempenho dos pol√≠gonos de classifica√ß√£o, mas n√£o conhe√ßo ningu√©m que fa√ßa a classifica√ß√£o geral de pol√≠gonos em um PC em tempo real.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma alternativa √© classificar pela dist√¢ncia z do visualizador no espa√ßo da tela; Essa solu√ß√£o se encaixa bem com a conectividade espacial superior das arestas de classifica√ß√£o. Ao encontrar cada nova aresta na linha de varredura, √© poss√≠vel calcular a dist√¢ncia z do pol√≠gono correspondente e comparar com as dist√¢ncias de outros pol√≠gonos, ap√≥s as quais o pol√≠gono pode ser salvo na APL.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No entanto, obter dist√¢ncias ao longo de z pode ser uma tarefa dif√≠cil. N√£o se esque√ßa de que precisamos calcular z em qualquer ponto arbitr√°rio do pol√≠gono, pois pode ocorrer uma aresta e fazer com que o pol√≠gono seja classificado na APL em qualquer lugar da tela. Podemos calcular z diretamente das coordenadas da tela x e y e das equa√ß√µes do plano do pol√≠gono, mas, infelizmente, isso n√£o pode ser feito muito rapidamente, porque z para o plano n√£o muda linearmente no espa√ßo da tela; no entanto, 1 / z </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">varia</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> linearmente, por isso usamos esse valor. (Para uma discuss√£o sobre linearidade no espa√ßo da tela e gradientes para 1 / z, consulte a s√©rie de Chris Hecker sobre mapeamento de texturas na revista </font><u><font style="vertical-align: inherit;">Game Developer</font></u><font style="vertical-align: inherit;"> no ano passado</font></font><u><font style="vertical-align: inherit;"></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.) Outra vantagem do uso de 1 / z √© que a resolu√ß√£o aumenta com a dist√¢ncia decrescente, ou seja, com 1 / z sempre teremos a melhor resolu√ß√£o de profundidade para objetos pr√≥ximos mais importantes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma maneira √≥bvia de obter o valor de 1 / z em qualquer ponto arbitr√°rio do pol√≠gono √© calcular 1 / z nos v√©rtices, interpolar-los sobre as duas arestas do pol√≠gono e interpolar-se entre as arestas para obter o valor no ponto desejado. Infelizmente, isso exige muito trabalho a ser feito ao longo de cada costela; pior, isso requer divis√£o para calcular a etapa de 1 / z por pixel em cada intervalo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seria melhor calcular 1 / z diretamente da equa√ß√£o do plano e da tela x e y do pixel de seu interesse. A equa√ß√£o tem a seguinte forma:</font></font><br><br><p><math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mn>1</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>z</mi><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi><mo stretchy=&quot;false&quot;>)</mo><msup><mi>x</mi><mo>&amp;#x2032;</mo></msup><mo>&amp;#x2212;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>b</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi><mo stretchy=&quot;false&quot;>)</mo><msup><mi>y</mi><mo>&amp;#x2032;</mo></msup><mo>+</mo><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="30.04ex" height="2.78ex" viewBox="0 -883.9 12933.7 1197.1" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2F" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-7A" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-3D" x="1747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-28" x="2803" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-61" x="3193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2F" x="3722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-64" x="4223" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-29" x="4746" y="0"></use><g transform="translate(5136,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2032" x="809" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2212" x="6225" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-28" x="7226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-62" x="7615" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2F" x="8045" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-64" x="8545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-29" x="9069" y="0"></use><g transform="translate(9458,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2032" x="706" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2B" x="10475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-63" x="11476" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2F" x="11909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-64" x="12410" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>z</mi><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi><mo stretchy="false">)</mo><msup><mi>x</mi><mo>‚Ä≤</mo></msup><mo>‚àí</mo><mo stretchy="false">(</mo><mi>b</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi><mo stretchy="false">)</mo><msup><mi>y</mi><mo>‚Ä≤</mo></msup><mo>+</mo><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-1">1/z = (a/d)x' - (b/d)y' + c/d</script> </math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onde z √© a coordenada no espa√ßo z do ponto no plano que √© projetado nas coordenadas da tela (x ', y') (a origem das coordenadas para esses c√°lculos √© o centro da proje√ß√£o, o ponto na tela bem em frente ao ponto de vista), [abc] √© normal ao plano na viewport ed √© a dist√¢ncia da origem da viewport ao plano ao longo da normal. </font><font style="vertical-align: inherit;">A divis√£o √© realizada apenas uma vez para cada plano, porque a, b, c e d s√£o constantes para os planos.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um c√°lculo 1 / z completo requer duas multiplica√ß√µes e duas adi√ß√µes, e cada opera√ß√£o deve ser executada com um ponto flutuante para evitar erros de intervalo. </font><font style="vertical-align: inherit;">Esse volume de c√°lculos de ponto flutuante parece caro, mas na verdade n√£o √©, especialmente nos processadores Pentium, onde o valor do plano 1 / z em qualquer ponto pode ser calculado na linguagem assembly em apenas seis ciclos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ estiver interessado, aqui est√° uma deriva√ß√£o r√°pida da equa√ß√£o 1 / z. </font><font style="vertical-align: inherit;">A equa√ß√£o do plano para o plano tem a seguinte forma:</font></font><br><br><p><math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mi>y</mi><mo>+</mo><mi>c</mi><mi>z</mi><mo>&amp;#x2212;</mo><mi>d</mi><mo>=</mo><mn>0</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.805ex" height="2.419ex" viewBox="0 -780.1 8957.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-78" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2B" x="1324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-62" x="2324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-79" x="2754" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2B" x="3474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-63" x="4474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-7A" x="4908" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2212" x="5599" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-64" x="6599" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-3D" x="7401" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-30" x="8457" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mi>y</mi><mo>+</mo><mi>c</mi><mi>z</mi><mo>‚àí</mo><mi>d</mi><mo>=</mo><mn>0</mn></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-2">ax + by + cz - d = 0</script> </math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onde x e y s√£o as coordenadas do espa√ßo da vista, a, b, c, d e z s√£o definidos acima. </font><font style="vertical-align: inherit;">Se fizermos a substitui√ß√£o</font></font><math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mo>=</mo><msup><mi>x</mi><mo>&amp;#x2032;</mo></msup><mi>z</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.531ex" height="2.178ex" viewBox="0 -832 3242.4 937.7" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-3D" x="850" y="0"></use><g transform="translate(1906,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2032" x="809" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-7A" x="2773" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo>=</mo><msup><mi>x</mi><mo>‚Ä≤</mo></msup><mi>z</mi></math></span></span><script type="math/tex" id="MathJax-Element-3">x=x'z</script> </math>  e <math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>y</mi><mo>=</mo><mo>&amp;#x2212;</mo><msup><mi>y</mi><mo>&amp;#x2032;</mo></msup><mi>z</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.995ex" height="2.539ex" viewBox="0 -832 3873 1093.4" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-79" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-3D" x="775" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2212" x="1831" y="0"></use><g transform="translate(2610,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2032" x="706" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-7A" x="3404" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>y</mi><mo>=</mo><mo>‚àí</mo><msup><mi>y</mi><mo>‚Ä≤</mo></msup><mi>z</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">y=-y'z</script> </math><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(a partir da defini√ß√£o de proje√ß√£o em perspectiva; y muda de sinal porque aumenta na janela de exibi√ß√£o, mas no espa√ßo da tela). </font><font style="vertical-align: inherit;">Realizando uma permuta√ß√£o, obtemos:</font></font><br><br><p><math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>z</mi><mo>=</mo><mi>d</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><msup><mi>x</mi><mo>&amp;#x2032;</mo></msup><mo>&amp;#x2212;</mo><mi>b</mi><msup><mi>y</mi><mo>&amp;#x2032;</mo></msup><mo>+</mo><mi>c</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.149ex" height="2.78ex" viewBox="0 -883.9 9105.7 1197.1" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-7A" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-3D" x="746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-64" x="1802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2F" x="2326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-28" x="2826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-61" x="3216" y="0"></use><g transform="translate(3745,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2032" x="809" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2212" x="4835" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-62" x="5835" y="0"></use><g transform="translate(6265,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2032" x="706" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2B" x="7281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-63" x="8282" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-29" x="8716" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>z</mi><mo>=</mo><mi>d</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mo stretchy="false">(</mo><mi>a</mi><msup><mi>x</mi><mo>‚Ä≤</mo></msup><mo>‚àí</mo><mi>b</mi><msup><mi>y</mi><mo>‚Ä≤</mo></msup><mo>+</mo><mi>c</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-5">z = d / (ax' - by' + c)</script> </math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Invertendo e expandindo a equa√ß√£o, obtemos: </font></font><br><br><p><math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mn>1</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>z</mi><mo>=</mo><mi>a</mi><msup><mi>x</mi><mo>&amp;#x2032;</mo></msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi><mo>&amp;#x2212;</mo><mi>b</mi><msup><mi>y</mi><mo>&amp;#x2032;</mo></msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi><mo>+</mo><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="26.421ex" height="2.78ex" viewBox="0 -883.9 11375.7 1197.1" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2F" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-7A" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-3D" x="1747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-61" x="2803" y="0"></use><g transform="translate(3333,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2032" x="809" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2F" x="4200" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-64" x="4700" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2212" x="5446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-62" x="6447" y="0"></use><g transform="translate(6876,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2032" x="706" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2F" x="7671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-64" x="8171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2B" x="8917" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-63" x="9918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMAIN-2F" x="10351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhjuwetNBMsUM60h0aNkWa3HwxP-0g#MJMATHI-64" x="10852" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>z</mi><mo>=</mo><mi>a</mi><msup><mi>x</mi><mo>‚Ä≤</mo></msup><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi><mo>‚àí</mo><mi>b</mi><msup><mi>y</mi><mo>‚Ä≤</mo></msup><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi><mo>+</mo><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-6">1/z = ax'/d - by'/d + c/d</script> </math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mais tarde mostrarei a classifica√ß√£o 1 / z em a√ß√£o. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quake e classificar por z </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mencionei acima que o Quake n√£o usa mais a ordem BSP como uma chave de classifica√ß√£o; de fato, 1 / z agora √© aplicado como a chave. Apesar da eleg√¢ncia dos gradientes, calcular 1 / z deles √© obviamente mais lento do que apenas comparar com a chave de ordem do BSP, ent√£o por que passamos a usar 1 / z no Quake?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O principal motivo √© a diminui√ß√£o do n√∫mero de pol√≠gonos. Para renderizar em ordem BSP, √© necess√°rio seguir certas regras, incluindo pol√≠gonos quando a interse√ß√£o com planos BSP deve ser dividida. Essa separa√ß√£o aumenta significativamente o n√∫mero de pol√≠gonos e arestas. Gra√ßas √† classifica√ß√£o por 1 / z, podemos deixar os pol√≠gonos n√£o divididos, mas ainda assim obter a ordem de desenho correta, portanto, precisamos processar muito menos arestas; enquanto a renderiza√ß√£o geralmente √© acelerada, apesar do custo adicional da classifica√ß√£o em 1 / z.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outra vantagem da classifica√ß√£o 1 / z √© que ela resolve os problemas de classifica√ß√£o mencionados no in√≠cio deste artigo: modelos em movimento, que s√£o √°rvores de BSP pequenas. A classifica√ß√£o na ordem mundial do BSP n√£o funcionar√° aqui, porque esses modelos s√£o BSPs separados e n√£o h√° maneiras f√°ceis de incorpor√°-los na ordem seq√ºencial do mundo do BSP. N√£o queremos usar o buffer z para esses modelos, porque geralmente s√£o objetos grandes (por exemplo, portas) e n√£o queremos perder os benef√≠cios de reduzir o redesenho que as portas fechadas fornecem ao renderizar na lista de arestas. Ao usar intervalos classificados, as arestas dos modelos de BSP em movimento s√£o simplesmente colocadas na lista de arestas (primeiro truncando os pol√≠gonos para que n√£o se cruzem com superf√≠cies s√≥lidas do mundo para evitar complexidade,relacionados √† penetra√ß√£o m√∫tua) em vez de todas as extremidades do mundo, e o restante √© classificado por 1 / z.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Seguindo em frente </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O artigo, sem d√∫vida, apresenta uma enorme quantidade de informa√ß√µes e muita coisa ainda n√£o foi colocada na sua cabe√ßa. </font><font style="vertical-align: inherit;">O c√≥digo e a explica√ß√£o do pr√≥ximo artigo ajudar√£o; </font><font style="vertical-align: inherit;">se voc√™ quiser dar uma olhada com anteced√™ncia, quando ler este artigo, o c√≥digo dever√° estar dispon√≠vel em ftp.idsoftware.com/mikeab/ddjsort.zip. </font><font style="vertical-align: inherit;">Tamb√©m vale a pena dar uma olhada em </font><font style="vertical-align: inherit;">Foley e Van Dam, da </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Computer Graphics</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ou em </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elementos processuais para</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rogers, da </font><u><font style="vertical-align: inherit;">Computer Graphics</font></u><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o est√° claro no momento como o resultado do </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quake</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deve classificar as arestas - na ordem BSP ou 1 / z. </font><font style="vertical-align: inherit;">De fato, n√£o h√° garantia de que intervalos classificados de qualquer forma sejam a solu√ß√£o final. </font><font style="vertical-align: inherit;">√Äs vezes parece que mudamos os mecanismos gr√°ficos com a mesma frequ√™ncia que colocam Elvis nas esta√ß√µes de r√°dio dedicadas aos hits dos anos 50 (mas, esperan√ßosamente, com resultados muito mais esteticamente agrad√°veis!), E sem d√∫vida consideraremos alternativas at√© a data de lan√ßamento os jogos.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt439830/">https://habr.com/ru/post/pt439830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt439812/index.html">Abordagens Kaggle para CV em prod: voc√™ n√£o pode implementar para cortar</a></li>
<li><a href="../pt439818/index.html">Caracter√≠sticas das abordagens de design no setor de fabrica√ß√£o real</a></li>
<li><a href="../pt439822/index.html">Criando uma tela alternativa para o sintetizador / amostrador Ensoniq EPS16 + e ASR10</a></li>
<li><a href="../pt439824/index.html">Quando as estruturas JavaScript desaparecer√£o?</a></li>
<li><a href="../pt439826/index.html">Desativando o anal√≥gico. O que acontecer√° com a televis√£o?</a></li>
<li><a href="../pt439834/index.html">Vis√£o geral da tecnologia IPMI</a></li>
<li><a href="../pt439838/index.html">Aritm√©tica do mel: adi√ß√£o e subtra√ß√£o pelas abelhas</a></li>
<li><a href="../pt439840/index.html">Confer√™ncia DUMP-2019: convidamos voc√™ a falar nas se√ß√µes Design, Gerenciamento e Teste</a></li>
<li><a href="../pt439844/index.html">Por que os desenvolvedores do Dodo Pizza 250?</a></li>
<li><a href="../pt439848/index.html">Nem uma √∫nica VPN. Folha de dicas sobre como se proteger e seus dados</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>