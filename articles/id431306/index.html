<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕠 ✊🏾 ⏸️ Cara membangun piramida di trunk atau aplikasi Development-Driven Development di Spring Boot 👉🏻 👨🏼‍🚀 🛏️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kerangka Pegas sering dikutip sebagai contoh kerangka kerja Cloud Native , yang dirancang untuk bekerja di cloud, mengembangkan aplikasi Dua Belas-Fak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara membangun piramida di trunk atau aplikasi Development-Driven Development di Spring Boot</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431306/"><p> <em>Kerangka Pegas</em> sering dikutip sebagai contoh kerangka kerja <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cloud Native</a> , yang dirancang untuk bekerja di cloud, mengembangkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">aplikasi Dua Belas-Faktor</a> , layanan mikro, dan salah satu yang paling stabil, tetapi pada saat yang sama produk-produk inovatif.  Tetapi dalam artikel ini saya ingin membahas satu sisi yang lebih kuat dari Spring: itu adalah dukungan <em>pengembangannya melalui pengujian</em> (kemampuan-TDD?).  Terlepas dari konektivitas TDD, saya sering memperhatikan bahwa proyek Spring mengabaikan beberapa praktik terbaik untuk pengujian, menciptakan sepeda motor mereka sendiri, atau tidak menulis tes sama sekali karena mereka "lambat" atau "tidak dapat diandalkan."  Dan saya akan memberi tahu Anda cara menulis tes <strong>cepat</strong> dan <strong>andal</strong> untuk aplikasi pada Kerangka Kerja Musim Semi dan melakukan pengembangan melalui pengujian.  Jadi, jika Anda menggunakan Spring (atau ingin memulai), pahami tes apa yang secara umum (atau ingin dipahami), atau berpikir bahwa <code>contextLoads</code> adalah level yang diperlukan dan tingkat pengujian integrasi yang cukup - itu akan menarik! </p><a name="habracut"></a><br><p>  Kemampuan "TDD" sangat ambigu, dan tidak dapat diukur, tetapi bagaimanapun, Spring memiliki banyak hal yang oleh desain membantu untuk menulis integrasi dan pengujian unit dengan upaya minimal.  Sebagai contoh: </p><br><ul><li>  Pengujian integrasi - Anda dapat dengan mudah meluncurkan aplikasi, mengunci komponen, mendefinisikan kembali parameter, dll. </li><li>  Pengujian integrasi fokus - hanya akses ke data, hanya web, dll. </li><li>  Dukungan di luar kotak - dalam-memori memori, antrian pesan, otentikasi dan otorisasi dalam pengujian </li><li>  Menguji melalui kontrak (Kontrak Spring Cloud) </li><li>  Dukungan Pengujian Web UI Menggunakan HtmlUnit </li><li>  Fleksibilitas konfigurasi aplikasi - profil, konfigurasi pengujian, komponen, dll. </li><li>  Dan masih banyak lagi </li></ul><br><p>  Untuk mulai dengan, pengantar kecil tapi perlu tentang TDD dan pengujian secara umum. </p><br><h1 id="test-driven-development">  Pengembangan yang digerakkan oleh tes </h1><br><p>  TDD didasarkan pada ide yang sangat sederhana - kami menulis tes <strong>sebelum</strong> kami menulis kode.  Secara teori, ini terdengar menakutkan, tetapi setelah beberapa waktu pemahaman tentang praktik dan teknik muncul, dan pilihan untuk menulis tes <em>sesudahnya</em> menyebabkan ketidaknyamanan yang nyata.  Salah satu praktik utama adalah <em>iterasi</em> , mis.  membuat semuanya menjadi iterasi yang kecil dan terfokus, yang masing-masing dideskripsikan sebagai <strong>Red-Green-Refactor</strong> . </p><br><p>  Pada fase <strong>merah</strong> , kami menulis tes jatuh, dan sangat penting bahwa jatuh dengan alasan dan deskripsi yang jelas, dapat dimengerti, dan bahwa tes itu sendiri selesai dan lulus ketika kode ditulis.  Tes harus memeriksa <em>perilaku</em> , bukan <em>implementasinya</em> , mis.  ikuti pendekatan black box, maka saya akan menjelaskan alasannya. </p><br><p>  Pada fase <strong>hijau</strong> , kami menulis <em>kode minimum yang diperlukan</em> untuk lulus tes.  Kadang-kadang menarik untuk berlatih dan membuatnya se-gila mungkin (walaupun lebih baik tidak terbawa) dan ketika suatu fungsi mengembalikan boolean tergantung pada kondisi sistem, "operan" pertama mungkin hanya <code>return true</code> . </p><br><p>  Pada fase <strong>refactoring</strong> , yang <em>hanya</em> dapat dimulai <em>ketika semua tes berwarna hijau</em> , kami akan melakukan refactor kode dan membawanya ke kondisi yang tepat.  Itu bahkan tidak perlu untuk sepotong kode yang kami tulis, karena itu penting untuk memulai refactoring pada sistem yang stabil.  Pendekatan "kotak hitam" hanya akan membantu refactoring, mengubah implementasi, tetapi tidak menyentuh perilaku. </p><br><p>  Saya akan berbicara tentang berbagai aspek TDD di masa depan, setelah semua, ini adalah ide dari serangkaian artikel, jadi sekarang saya tidak akan terlalu memikirkan detailnya.  Tetapi sebelum menanggapi kritik TDD standar, saya akan menyebutkan beberapa mitos yang sering saya dengar. </p><br><ul><li>  <em>"TDD adalah sekitar 100% cakupan kode, tetapi tidak memberikan jaminan"</em> - pengembangan melalui pengujian tidak ada hubungannya dengan cakupan 100% sama sekali.  Di banyak tim tempat saya bekerja, metrik ini bahkan tidak diukur, dan diklasifikasikan sebagai metrik kesombongan.  Dan ya, cakupan tes 100% tidak ada artinya. </li><li>  <em>"TDD hanya berfungsi untuk fungsi-fungsi sederhana, aplikasi nyata dengan database dan keadaan sulit tidak dapat dibuat dengan itu"</em> adalah alasan yang sangat populer, biasanya dilengkapi dengan "Kami memiliki aplikasi yang rumit sehingga kami tidak menulis tes sama sekali, Anda tidak dapat melakukannya sama sekali."  Saya melihat pendekatan TDD yang berfungsi pada aplikasi yang sepenuhnya berbeda - web (dengan dan tanpa SPA), seluler, API, layanan mikro, monolit, sistem perbankan kompleks, platform cloud, kerangka kerja, platform ritel yang ditulis dalam berbagai bahasa dan teknologi.  Jadi mitos populer "Kami unik, semuanya berbeda" adalah alasan yang paling sering untuk tidak menginvestasikan usaha dan uang dalam pengujian, tetapi bukan alasan nyata (meskipun mungkin juga ada alasan nyata). </li><li>  <em>"Masih akan ada bug dengan TDD"</em> - tentu saja, seperti pada perangkat lunak lain.  TDD bukan tentang bug atau ketidakhadiran mereka sama sekali, ini adalah alat pengembangan.  Suka debugging.  Seperti IDE.  Suka dokumentasinya.  Tidak satu pun dari alat ini yang menjamin tidak adanya bug, mereka hanya membantu mengatasi meningkatnya kompleksitas sistem. </li></ul><br><blockquote>  Tujuan utama TDD dan umumnya pengujian adalah untuk memberikan <strong>kepercayaan</strong> tim bahwa sistem bekerja dengan stabil.  Oleh karena itu, tidak ada praktik pengujian yang menentukan berapa banyak dan tes mana yang harus ditulis.  Tulis seberapa banyak yang Anda pikir perlu, seberapa banyak Anda perlu memastikan bahwa saat ini kode <em>dapat dimasukkan ke dalam produksi dan akan berfungsi</em> .  Ada orang yang menganggap tes integrasi cepat sebagai kotak hitam ultimatif yang diperlukan dan memadai, dan tes unit opsional.  Seseorang mengatakan bahwa tes e2e dengan kemungkinan rollback cepat ke versi sebelumnya dan keberadaan rilis kenari tidak begitu penting.  Berapa banyak tim - begitu banyak pendekatan, penting untuk menemukan Anda sendiri. </blockquote><p>  Salah satu tujuan saya adalah untuk beralih dari format <em>"pengembangan melalui pengujian fungsi yang menambah dua angka"</em> dalam cerita TDD dan melihat aplikasi nyata, semacam praktik pengujian yang telah diuapkan ke aplikasi minimum, dikumpulkan pada proyek nyata.  Sebagai contoh semi-nyata, saya akan menggunakan aplikasi web kecil yang saya buat sendiri untuk abstrak <del>  pabrik </del>  Bakery - <strong>Pabrik Kue</strong> .  Saya berencana untuk menulis artikel kecil, setiap kali memfokuskan pada bagian fungsionalitas aplikasi yang terpisah dan menunjukkan melalui TDD Anda dapat merancang API, struktur internal aplikasi dan mempertahankan refactoring yang konstan. </p><br><p>  Contoh rencana untuk serangkaian artikel, seperti yang saya lihat saat ini, adalah: </p><br><ol><li>  Walking skeleton - framework aplikasi tempat Anda dapat menjalankan siklus Red-Green-Refactor </li><li>  Desain UI Pengujian dan Perilaku Didorong </li><li>  Pengujian Akses Data (Data Musim Semi) </li><li>  Otorisasi dan pengujian otentikasi (Spring Security) </li><li>  Jet Stack (WebFlux + Project Reactor) </li><li>  Interoperabilitas layanan (mikro) dan kontrak (Spring Cloud) </li><li>  Menguji Antrian Pesan (Awan Musim Semi) </li></ol><br><p>  Artikel pengantar ini akan membahas poin 1 dan 2 - Saya akan membuat kerangka kerja aplikasi dan tes UI dasar menggunakan BDD - atau pendekatan <strong>pengembangan yang didorong oleh perilaku</strong> .  Setiap artikel akan dimulai dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cerita pengguna</a> , tetapi saya tidak akan berbicara tentang bagian "produk" untuk menghemat waktu.  Cerita pengguna akan ditulis dalam bahasa Inggris, itu akan segera menjadi jelas mengapa.  Semua contoh kode dapat ditemukan di GitHub, jadi saya tidak akan melewatkan semua kode, hanya bagian-bagian penting. </p><br><blockquote>  Cerita pengguna adalah deskripsi fitur aplikasi bahasa alami yang biasanya ditulis atas nama pengguna sistem. </blockquote><br><h1 id="user-story-1-polzovatel-vidit-stranicu-privetstviya">  Kisah pengguna 1: Pengguna melihat halaman sambutan </h1><br><blockquote>  <strong>Sebagai</strong> Alice, pengguna baru <br>  <strong>Saya ingin</strong> melihat halaman selamat datang ketika mengunjungi situs web Pabrik Kue <br>  <strong>Sehingga</strong> saya tahu kapan Cake Factory akan diluncurkan <br><br>  Kriteria penerimaan: <br>  Skenario: pengguna mengunjungi kunjungan situs web sebelum tanggal peluncuran <br>  Mengingat saya pengguna baru <br>  Ketika saya mengunjungi situs web Pabrik Kue <br>  Lalu saya melihat pesan 'Terima kasih atas minat Anda' <br>  Dan saya melihat pesan 'Situs web akan segera hadir ...' </blockquote><p>  Dibutuhkan pengetahuan: apa itu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengembangan Perilaku Bergerak</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mentimun</a> , dasar-dasar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengujian Boot Musim Semi</a> . </p><br><p>  Kisah pengguna pertama cukup mendasar, tetapi tujuannya belum dalam kompleksitas, tetapi dalam menciptakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kerangka berjalan</a> - aplikasi minimal untuk memulai <strong>siklus TDD</strong> . </p><br><p>  Setelah membuat proyek baru pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Spring Initializr</a> dengan modul Web dan Moustache, untuk permulaan saya akan memerlukan beberapa perubahan lagi untuk <code>build.gradle</code> : </p><br><ul><li>  tambahkan HtmlUnit <code>testImplementation('net.sourceforge.htmlunit:htmlunit')</code> .  Anda tidak perlu menentukan versi, plugin manajemen ketergantungan Boot Musim Semi untuk Gradle akan secara otomatis memilih versi yang diperlukan dan kompatibel </li><li>  bermigrasi proyek dari JUnit 4 ke JUnit 5 (karena 2018 ada di halaman) </li><li>  tambahkan dependensi ke Mentimun - perpustakaan yang akan saya gunakan untuk menulis spesifikasi BDD </li><li>  hapus dibuat oleh <code>CakeFactoryApplicationTests</code> default dengan <code>contextLoads</code> tak <code>contextLoads</code> </li></ul><br><p>  Pada umumnya, ini adalah "kerangka" dasar aplikasi, Anda sudah dapat menulis tes pertama. </p><br><p>  Untuk mempermudah navigasi dalam kode, saya akan berbicara singkat tentang teknologi yang digunakan. </p><br><h2 id="cucumber">  Mentimun </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mentimun</a> adalah kerangka kerja <strong>Pembangunan Berbasis Perilaku</strong> yang membantu menciptakan "spesifikasi yang dapat dieksekusi", mis.  jalankan tes (spesifikasi) yang ditulis dalam bahasa alami.  Plugin Cucumber mem-parsing kode sumber di Jawa (dan banyak bahasa lainnya) dan menggunakan <em>definisi langkah</em> untuk menjalankan kode nyata.  Definisi langkah adalah metode kelas yang dianotasi oleh <code>@Given</code> , <code>@When</code> , <code>@Then</code> dan anotasi lainnya. </p><br><h2 id="htmlunit">  Htmlunit </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Halaman beranda</a> proyek menyebut HtmlUnit "browser tanpa GUI untuk aplikasi Java."  Tidak seperti Selenium, HtmlUnit tidak meluncurkan browser nyata dan, yang paling penting, tidak membuat halaman sama sekali, bekerja langsung dengan DOM.  JavaScript didukung melalui mesin Mozilla Rhino.  HtmlUnit sangat cocok untuk aplikasi klasik, tetapi tidak terlalu bersahabat dengan Aplikasi Halaman Tunggal.  Untuk memulainya, itu sudah cukup, dan kemudian saya akan mencoba menunjukkan bahwa bahkan hal-hal seperti kerangka kerja pengujian dapat dijadikan bagian dari implementasi, dan bukan fondasi aplikasi. </p><br><h1 id="pervyy-test">  Tes pertama </h1><br><p>  Sekarang cerita pengguna yang ditulis dalam bahasa Inggris akan berguna bagi saya.  Pemicu terbaik untuk memulai iterasi TDD berikutnya adalah kriteria penerimaan yang ditulis sedemikian rupa sehingga dapat diubah menjadi spesifikasi yang dapat dieksekusi dengan minimum isyarat. </p><br><blockquote>  Idealnya, cerita pengguna harus ditulis sehingga hanya dapat disalin ke spesifikasi BDD dan dijalankan.  Ini jauh dari selalu sederhana dan tidak selalu mungkin, tetapi ini harus menjadi tujuan pemilik produk dan seluruh tim, meskipun tidak selalu dapat dicapai. </blockquote><p>  Jadi, fitur pertama saya. </p><br><pre> <code class="plaintext hljs">Feature: Welcome page Scenario: a user visiting the web-site visit before the launch date Given a new user, Alice When she visits Cake Factory web-site Then she sees a message 'Thank you for your interest' And she sees a message 'The web-site is coming in December!'</code> </pre> <br><p>  Jika Anda membuat uraian langkah ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">plugin Intellij IDEA</a> membantu mendukung banyak hal Gherkin) dan menjalankan tes, maka, tentu saja, akan berwarna hijau - belum menguji apa pun.  Dan inilah fase penting untuk mengerjakan tes - <em>Anda perlu menulis tes, seolah-olah kode utama ditulis</em> . </p><br><p>  Seringkali, bagi mereka yang mulai mengusir TDD, sebuah keadaan pingsan di sini - sulit untuk menempatkan di kepala algoritma dan logika dari sesuatu yang belum ada.  Dan oleh karena itu, sangat penting untuk memiliki <em>iterasi sekecil dan fokus</em> mungkin, mulai dari kisah pengguna dan turun ke tingkat integrasi dan unit.  Penting untuk fokus <strong>pada satu tes pada satu waktu</strong> dan mencoba untuk menjadi basah dan mengabaikan dependensi yang belum penting.  Saya kadang-kadang memperhatikan bagaimana orang dengan mudah pergi ke samping - membuat antarmuka atau kelas untuk ketergantungan, segera menghasilkan kelas tes kosong untuk itu, satu lagi ketergantungan ditambahkan di sana, antarmuka lain dibuat dan sebagainya. </p><br><blockquote>  Jika ceritanya "perlu menyegarkan status saat menyimpan", maka sangat sulit untuk mengotomatisasi dan memformalkan.  Dalam contoh saya, setiap langkah dapat ditata dengan jelas dalam urutan langkah-langkah yang dapat dijelaskan oleh kode.  Jelas bahwa ini adalah contoh paling sederhana dan tidak menunjukkan banyak, tapi saya berharap lebih jauh, dengan meningkatnya kompleksitas, ini akan menjadi lebih menarik. </blockquote><br><h2 id="red">  Merah </h2><br><p>  Jadi, untuk fitur pertama saya, saya membuat deskripsi langkah berikut: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span>(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WelcomePage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> WebClient webClient; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> HtmlPage page; <span class="hljs-meta"><span class="hljs-meta">@LocalServerPort</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> port; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String baseUrl; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ webClient = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebClient(); baseUrl = <span class="hljs-string"><span class="hljs-string">"http://localhost:"</span></span> + port; } <span class="hljs-meta"><span class="hljs-meta">@Given</span></span>(<span class="hljs-string"><span class="hljs-string">"a new user, Alice"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">aNewUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// nothing here, every user is new by default } @When("she visits Cake Factory web-site") public void sheVisitsCakeFactoryWebSite() throws IOException { page = webClient.getPage(baseUrl); } @Then("she sees a message {string}") public void sheSeesAMessageThanksForYourInterest(String expectedMessage) { assertThat(page.getBody().asText()).contains(expectedMessage); } }</span></span></code> </pre> <br><p>  Beberapa hal yang perlu diperhatikan: </p><br><ul><li>  fitur diluncurkan oleh file lain, <code>Features.java</code> menggunakan <code>RunWith</code> annotation from JUnit 4, Cucumber tidak mendukung versi 5, sayangnya </li><li>  <code>@SpringBootTest</code> anotasi ditambahkan ke deskripsi langkah-langkah, <code>cucumber-spring</code> mengambilnya dari sana dan mengkonfigurasi konteks pengujian (mis., Meluncurkan aplikasi) </li><li>  Aplikasi <code>webEnvironment = RANDOM_PORT</code> untuk pengujian dimulai dengan <code>webEnvironment = RANDOM_PORT</code> dan port acak ini diteruskan ke tes menggunakan <code>@LocalServerPort</code> , Spring akan menemukan anotasi ini dan mengatur nilai bidang ke port server </li></ul><br><p>  Dan tes, seperti yang diharapkan, lumpuh dengan kesalahan <code>404 for http://localhost:51517</code> . </p><br><blockquote>  Kesalahan yang menyebabkan crash tes sangat penting, terutama ketika datang ke unit atau tes integrasi, dan kesalahan ini adalah bagian dari API.  Jika pengujian lumpuh dengan <code>NullPointerException</code> ini tidak terlalu baik, tetapi <code>BaseUrl configuration property is not set</code> - jauh lebih baik. </blockquote><br><h2 id="green">  Hijau </h2><br><p>  Untuk membuat tes hijau, saya menambahkan pengendali dasar dan tampilan dengan HTML minimal: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Controller</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IndexController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@GetMapping</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"index"</span></span>; } }</code> </pre> <br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Cake Factory<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Thank you for your interest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>The web-site is coming in December!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Tesnya hijau, aplikasinya berfungsi, meskipun dibuat dalam tradisi desain teknik yang parah. </p><br><blockquote>  Pada proyek nyata dan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tim yang seimbang</a> , tentu saja, saya akan duduk bersama desainer dan kami akan mengubah HTML telanjang menjadi sesuatu yang jauh lebih indah.  Namun dalam kerangka artikel itu, keajaiban tidak akan terjadi, sang putri akan tetap menjadi katak. </blockquote><p>  Pertanyaan "apa bagian dari TDD adalah desain" tidak begitu sederhana.  Salah satu praktik yang menurut saya berguna adalah pada awalnya bahkan tidak melihat UI sama sekali (bahkan tidak menjalankan aplikasi untuk menyelamatkan saraf Anda), menulis tes, membuatnya hijau - dan kemudian, memiliki fondasi yang stabil, bekerja di ujung depan, terus memulai kembali tes . </p><br><h2 id="refactor">  Refactor </h2><br><p>  Dalam iterasi pertama, tidak ada refactoring tertentu, tetapi meskipun saya menghabiskan 10 menit terakhir memilih template untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bulma</a> , yang dapat dihitung sebagai refactoring! </p><br><h1 id="v-zaklyuchenie">  Kesimpulannya </h1><br><p>  Sementara aplikasi tidak memiliki pekerjaan keamanan, atau database, atau API, maka tes dan TDD terlihat cukup sederhana.  Dan secara umum, dari piramida pengujian, saya hanya menyentuh bagian paling atas, tes UI.  Tetapi dalam hal ini, sebagian, rahasia dari pendekatan lean adalah melakukan segalanya dalam iterasi kecil, satu komponen pada satu waktu.  Ini membantu untuk fokus pada tes, membuatnya sederhana, dan mengontrol kualitas kode.  Saya harap di artikel-artikel berikut ini akan lebih menarik. </p><br><h1 id="ssylki">  Referensi </h1><br><ul><li>  Proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Concourse ci</a> </li></ul><br><p>  <em>PS Judul artikelnya tidak segila kelihatannya di awal, saya pikir banyak yang sudah menebak.</em>  <em>"Cara membuat piramida di boot Anda" adalah referensi ke piramida pengujian (saya akan memberi tahu Anda lebih banyak tentangnya nanti) dan Spring Boot, di mana boot dalam bahasa Inggris Inggris juga berarti "trunk".</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id431306/">https://habr.com/ru/post/id431306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id431296/index.html">Peran emosional dalam permainan. Narasi yang kompeten dan keterlibatan dalam arus</a></li>
<li><a href="../id431298/index.html">Validasi keunikan sejati</a></li>
<li><a href="../id431300/index.html">Tiga tahun sertifikasi tanpa pemimpin - penerbangan normal</a></li>
<li><a href="../id431302/index.html">Membuat antena sonar sederhana dari tempat sampah</a></li>
<li><a href="../id431304/index.html">Mencari bayangan yang menjanjikan untuk roguelike</a></li>
<li><a href="../id431308/index.html">Innotrans 2018: transportasi kereta seperti apa yang akan besok?</a></li>
<li><a href="../id431310/index.html">Konfigurasikan Firefox / Chrome untuk internet yang sangat lambat dan terbatas</a></li>
<li><a href="../id431312/index.html">DeezLoader + PlexMediaServer. Membuat portal musik rumah</a></li>
<li><a href="../id431316/index.html">Voting pada beta kedua dari Revisi 7 Laporan Skema Bahasa Algoritmik (Bahasa Besar)</a></li>
<li><a href="../id431318/index.html">Rantai python transpiler → 11l → C ++ [untuk mempercepat kode Python dan banyak lagi]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>