<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçüé® üë®üèº‚Äçüî¨ üê≥ Plugin isom√©trico para Unity3D üôåüèΩ üé∂ ü§∂üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es una historia sobre c√≥mo escribir un complemento para Unity Asset Store , resolver los problemas isom√©tricos conocidos en los juegos y ganar un poco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plugin isom√©trico para Unity3D</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436372/"><img src="https://habrastorage.org/files/032/000/6f4/0320006f472344e782f536c293e3099d.png"><br><p>  Es una historia sobre c√≥mo escribir un complemento para <strong>Unity Asset Store</strong> , resolver los problemas isom√©tricos conocidos en los juegos y ganar un poco de dinero con eso, y tambi√©n para comprender cu√°n expansible es el editor de Unity.  Im√°genes, c√≥digo, gr√°ficos y pensamientos en el interior. </p><a name="habracut"></a><br><h2 id="prologue">  Prologo </h2><br><p> Entonces, fue una noche cuando descubr√≠ que no ten√≠a pr√°cticamente nada que hacer.  El a√±o entrante no fue realmente prometedor en mi vida profesional (a diferencia del personal, sin embargo, esa es una historia completamente diferente).  De todos modos, tuve la idea de escribir algo divertido por el bien de los viejos tiempos, que ser√≠a bastante personal, algo por mi cuenta, pero que todav√≠a ten√≠a una peque√±a ventaja comercial (me gusta esa sensaci√≥n c√°lida cuando su proyecto es interesante para otra persona, excepto para su empleador).  Y todo esto va de la mano con el hecho de que he esperado mucho tiempo para ver las posibilidades de la extensi√≥n del editor de Unity y ver si hay algo bueno en su plataforma para vender las extensiones propias del motor. </p><br><p>  Dediqu√© un d√≠a a estudiar la tienda de activos: modelos, scripts, integraciones con varios servicios.  Y primero parec√≠a que todo ya estaba escrito e integrado, con incluso una serie de opciones de diferentes niveles de calidad y detalle, tanto como los precios y el soporte.  As√≠ que de inmediato lo he reducido a: </p><br><ul><li>  solo c√≥digo (despu√©s de todo, soy programador) </li><li>  Solo 2D (ya que me encanta 2D y acaban de ofrecer un soporte inmediato decente para eso en Unity) </li></ul><br><p>  Y luego record√© cu√°ntos cactus he comido y cu√°ntos ratones han muerto cuando est√°bamos haciendo un juego isom√©trico antes.  No creer√° cu√°nto tiempo hemos matado buscando soluciones viables y cu√°ntas copias hemos roto en los intentos de resolver esta isometr√≠a y dibujarla.  Entonces, luchando por mantener mis manos quietas, busqu√© por diferentes palabras clave y no tanto y no pude encontrar nada m√°s que una gran pila de arte isom√©trico, hasta que finalmente decid√≠ hacer un complemento isom√©trico desde cero. </p><br><h2 id="setting-the-goals">  Establecer los objetivos </h2><br><p>  Lo primero que necesitaba era describir brevemente qu√© problemas deb√≠a resolver este complemento y qu√© uso har√≠a el desarrollador de juegos isom√©tricos.  Entonces, los problemas de isometr√≠a son los siguientes: </p><br><ul><li>  ordenar objetos por lejan√≠a para dibujarlos correctamente </li><li>  extensi√≥n para creaci√≥n, posicionamiento y desplazamiento de objetos isom√©tricos en el editor </li></ul><br><p>  Por lo tanto, con los objetivos principales para la primera versi√≥n formulada, me puse un plazo de 2-3 d√≠as para la primera versi√≥n borrador.  Por lo tanto, no se puede diferir, ya ves, ya que el entusiasmo es algo fr√°gil y si no tienes algo listo en los primeros d√≠as, hay una gran posibilidad de que lo arruines.  Y las vacaciones de A√±o Nuevo no son tan largas como parece, incluso en Rusia, y quer√≠a lanzar la primera versi√≥n dentro de unos diez d√≠as. </p><br><h2 id="sorting">  Clasificaci√≥n </h2><br><p>  Para abreviar, la isometr√≠a es un intento realizado por sprites 2D para parecerse a modelos 3D.  Eso, por supuesto, resulta en docenas de problemas.  El principal es que los sprites deben clasificarse en el orden en que se dibujar√°n para evitar problemas de superposici√≥n mutua. </p><br><img src="https://habrastorage.org/files/60f/22b/db9/60f22bdb9ed3434888232416258f4b37.png"><br><blockquote>  <em>En la captura de pantalla puedes ver c√≥mo se dibuja primero el sprite verde (2,1) y luego el azul (1,1)</em> </blockquote><br><img src="https://habrastorage.org/files/9ba/a39/c6c/9baa39c6cd3b4584a57bbf1be169c050.png"><br><blockquote>  <em>La captura de pantalla muestra la clasificaci√≥n incorrecta cuando el sprite azul se dibuja primero</em> </blockquote><p>  En este caso simple, la ordenaci√≥n no ser√° un problema, y ‚Äã‚Äãhabr√° opciones, por ejemplo: </p><br><ul><li>  ordenando por posici√≥n de Y en la pantalla, que es * <em>(isoX + isoY)</em> 0.5 + isoZ ** </li><li>  dibujo de la celda de cuadr√≠cula isom√©trica m√°s remota de izquierda a derecha, de arriba a abajo <strong>[(3,3), (2,3), (3,2), (1,3), (2,2), (3, 1), ...]</strong> </li><li>  y un mont√≥n de otras formas interesantes y no realmente interesantes </li></ul><br><p>  Todos son bastante buenos, r√°pidos y funcionan, pero solo en el caso de tales objetos unicelulares o columnas extendidas en direcci√≥n isoZ :) Despu√©s de todo, estaba interesado en una soluci√≥n m√°s com√∫n que funcione para los objetos extendidos en la direcci√≥n de una coordenada, o incluso las "cercas" que no tienen absolutamente ning√∫n ancho, pero se extienden en la misma direcci√≥n que la altura necesaria. </p><br><img src="https://habrastorage.org/files/396/376/23d/39637623d1c147478ef0223501a0d240.png"><br><blockquote>  <em>La captura de pantalla muestra la forma correcta de clasificar objetos extendidos <strong>3x1</strong> y <strong>1x3</strong> con "cercas" que miden <strong>3x0</strong> y <strong>0x3</strong></em> </blockquote><p>  Y ah√≠ es donde comienzan nuestros problemas y nos ponen en el lugar donde tenemos que decidir el camino a seguir: </p><br><ul><li><p>  dividir objetos "multicelulares" en objetos "unicelulares", es decir, cortarlos verticalmente y luego clasificar las franjas emergidas </p><br></li><li><p>  pensar en el nuevo m√©todo de clasificaci√≥n, m√°s complicado e interesante </p><br></li></ul><br><p>  Eleg√≠ la segunda opci√≥n, ya que no ten√≠a ning√∫n deseo particular de entrar en el procesamiento complicado de cada objeto, en el corte (incluso autom√°tico) y el enfoque especial de la l√≥gica.  Para el registro, utilizaron la primera forma en algunos juegos famosos como <strong>Fallout 1</strong> y <strong>Fallout 2</strong> .  De hecho, puedes ver esas tiras si ingresas a los datos de los juegos. </p><br><p>  Entonces, la segunda opci√≥n no implica ning√∫n criterio de clasificaci√≥n.  Significa que no hay un valor precalculado por el que pueda ordenar los objetos.  Si no me cree (y supongo que muchas personas que nunca trabajaron con isometr√≠a no lo hacen), tome un pedazo de papel y dibuje objetos peque√±os que midan como <strong>2x8</strong> y, por ejemplo, <strong>2x2</strong> .  Si de alguna manera logra calcular un valor para calcular su profundidad y clasificaci√≥n, simplemente agregue un objeto <strong>8x2</strong> e intente ordenarlos en diferentes posiciones entre s√≠. </p><br><p>  Entonces, no existe tal valor, pero a√∫n podemos usar dependencias entre ellos (m√°s o menos, cu√°l se superpone) para la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clasificaci√≥n topol√≥gica</a> .  Podemos calcular las dependencias de los objetos mediante el uso de proyecciones de coordenadas isom√©tricas en el eje isom√©trico. </p><br><img src="https://habrastorage.org/files/db0/1cd/835/db01cd8359494b35aaee399e197c972e.png"><br><blockquote>  <em>La captura de pantalla muestra que el cubo azul depende del rojo</em> </blockquote><br><img src="https://habrastorage.org/files/eb3/af1/0d0/eb3af10d0cf04c6ba48a481a0b039f3c.png"><br><blockquote>  <em>La captura de pantalla muestra que el cubo verde depende del azul</em> </blockquote><p>  Un pseudoc√≥digo para la determinaci√≥n de dependencia para dos ejes (lo mismo funciona con el eje Z): </p><br><pre><code class="plaintext hljs">bool IsIsoObjectsDepends(IsoObject obj_a, IsoObject obj_b) { var obj_a_max_size = obj_a.position + obj_a.size; return obj_b.position.x &lt; obj_a_max_size.x &amp;&amp; obj_b.position.y &lt; obj_a_max_size.y; }</code> </pre> <br><p>  Con este enfoque construimos dependencias entre todos los objetos, pas√°ndolos recursivamente y marcando la coordenada Z de la pantalla.  El m√©todo es bastante universal y, lo m√°s importante, funciona.  Puede leer una descripci√≥n detallada de este algoritmo, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  Tambi√©n usan este tipo de enfoque en la popular biblioteca isom√©trica flash ( <a href="">as3isolib</a> ). </p><br><p>  Y todo fue genial, excepto que la complejidad temporal de este enfoque es <strong>O (N ^ 2)</strong> ya que tenemos que comparar cada objeto con cada uno para crear las dependencias.  Dej√© la optimizaci√≥n para versiones posteriores, agregando solo una reordenaci√≥n perezosa para que nada se clasifique hasta que algo se mueva.  Entonces, hablaremos sobre la optimizaci√≥n un poco m√°s tarde. </p><br><h2 id="editor-extension">  Extensi√≥n del editor </h2><br><p>  De ahora en adelante, ten√≠a los siguientes objetivos: </p><br><ul><li>  la clasificaci√≥n de objetos ten√≠a que funcionar en el editor (no solo en un juego) </li><li>  ten√≠a que haber otro tipo de Gizmos-Arrow (flechas para mover objetos) </li><li>  opcionalmente, habr√≠a una alineaci√≥n con los mosaicos cuando el objeto se mueve </li><li>  los tama√±os de los mosaicos se aplicar√≠an y establecer√≠an en el inspector mundial isom√©trico autom√°ticamente </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los</a> objetos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AABB</a> se dibujan de acuerdo con sus tama√±os isom√©tricos. </li><li>  salida de coordenadas isom√©tricas en el inspector de objetos, cambiando cu√°l cambiar√≠amos la posici√≥n del objeto en el mundo del juego </li></ul><br><p>  Y todos estos objetivos se han logrado.  Unity realmente permite expandir significativamente su editor.  Puede agregar nuevas pesta√±as, ventanas, botones, nuevos campos en el inspector de objetos.  Si lo desea, incluso puede crear un inspector personalizado para un componente del tipo exacto que necesita.  Tambi√©n puede generar informaci√≥n adicional en la ventana del editor (en mi caso, en los objetos AABB) y reemplazar los gizmos de movimiento est√°ndar de los objetos.  El problema de ordenar dentro del editor se resolvi√≥ mediante esta etiqueta m√°gica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ExecuteInEditMode</a> , que permite ejecutar componentes del objeto en modo editor, es decir, hacerlo de la misma manera que en un juego. </p><br><p>  Todo esto se hizo, por supuesto, no sin dificultades y trucos de todo tipo, pero no hubo un solo problema en el que haya pasado m√°s de un par de horas (Google, foros y comunidades seguramente me ayudaron a resolver todos los problemas surgido que no fueron mencionados en la documentaci√≥n). </p><br><img src="https://habrastorage.org/files/df6/ae0/2ae/df6ae02aec294ca28d9a6ffcf1b81382.png"><br><blockquote>  <em>La captura de pantalla muestra mis artilugios para objetos de movimiento dentro del mundo isom√©trico</em> </blockquote><br><h2 id="release">  Lanzamiento </h2><br><p>  Entonces, prepar√© la primera versi√≥n, tom√© la captura de pantalla.  Incluso dibuj√© un icono y escrib√≠ una descripci√≥n.  Es hora  Entonces, establezco un precio nominal de $ 5, subo el complemento en la tienda y espero a que Unity lo apruebe.  No pens√© mucho en el precio, ya que realmente no quer√≠a ganar mucho dinero todav√≠a.  Mi prop√≥sito era averiguar si existe una demanda general y si fuera as√≠, me gustar√≠a estimarla.  Tambi√©n quer√≠a ayudar a los desarrolladores de juegos isom√©tricos que de alguna manera terminaron privados de oportunidades y adiciones. </p><br><p>  En 5 d√≠as bastante dolorosos (pas√© casi el mismo tiempo escribiendo la primera versi√≥n, pero sab√≠a lo que estaba haciendo, sin preguntarme ni pensar demasiado, eso me dio la mayor velocidad en comparaci√≥n con las personas que acababan de comenzar a trabajar con isometr√≠a) Recib√≠ una respuesta de Unity que dec√≠a que el complemento estaba aprobado y que ya pod√≠a verlo en la tienda, as√≠ como sus cero ventas (hasta ahora).  Se registr√≥ en el foro local, incorpor√≥ Google Analytics en la p√°gina del complemento en la tienda y me prepar√© para esperar a que crezca la hierba. </p><br><p>  No pas√≥ mucho tiempo antes de las primeras ventas, justo cuando surgieron los comentarios en el foro y en la tienda.  Para los d√≠as restantes del 12 de enero se vendieron copias de mi complemento, lo que consider√© como un signo del inter√©s p√∫blico y decid√≠ continuar. </p><br><h2 id="optimization">  Optimizaci√≥n </h2><br><p>  Entonces, no estaba contento con dos cosas: </p><br><ul><li>  Complejidad temporal de la clasificaci√≥n - O (N ^ 2) </li><li>  Problemas con la recolecci√≥n de basura y el rendimiento general </li></ul><br><h3 id="algorithm">  Algoritmo </h3><br><p>  Teniendo 100 objetos y O (N ^ 2), tuve que hacer 10,000 iteraciones solo para encontrar dependencias, y tambi√©n tuve que pasarlos todos y marcar la pantalla Z para ordenar.  Deber√≠a haber alguna soluci√≥n para eso.  Entonces, prob√© una gran cantidad de opciones, no pude dormir pensando en este problema.  De todos modos, no voy a contarte sobre todos los m√©todos que he probado, pero describir√© el que he encontrado el mejor hasta ahora. </p><br><p>  Lo primero es lo primero, por supuesto, clasificamos solo los objetos visibles.  Lo que significa es que constantemente necesitamos saber qu√© hay en nuestro tiro.  Si hay alg√∫n objeto nuevo, debemos agregarlo en el proceso de clasificaci√≥n, y si uno de los viejos se ha ido, ign√≥relo.  Ahora, Unity no permite determinar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cuadro delimitador</a> del objeto junto con sus hijos en el √°rbol de la escena.  Pasar por alto a los ni√±os (cada vez, por cierto, ya que se pueden agregar y quitar) no funcionar√≠a, demasiado lento.  Tampoco podemos usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OnBecameVisible</a> y otros eventos porque funcionan solo para objetos primarios.  Pero podemos obtener todos los componentes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Renderer</a> del objeto necesario y sus hijos.  Por supuesto, no parece nuestra mejor opci√≥n, pero no pude encontrar otra forma, la misma universal y aceptable por rendimiento. </p><br><pre> <code class="plaintext hljs">List&lt;Renderer&gt; _tmpRenderers = new List&lt;Renderer&gt;(); bool IsIsoObjectVisible(IsoObject iso_object) { iso_object.GetComponentsInChildren&lt;Renderer&gt;(_tmpRenderers); for ( var i = 0; i &lt; _tmpRenderers.Count; ++i ) { if ( _tmpRenderers[i].isVisible ) { return true; } } return false; }</code> </pre> <br><p>  <em>Hay un peque√±o truco de usar la funci√≥n <strong>GetComponentsInChildren</strong> que permite obtener componentes sin asignaciones en el b√∫fer necesario, a diferencia de otro que devuelve una nueva matriz de componentes</em> </p><br><p>  En segundo lugar, todav√≠a ten√≠a que hacer algo con respecto a <strong>O (N ^ 2)</strong> .  He probado varias t√©cnicas de divisi√≥n del espacio antes de detenerme en una cuadr√≠cula bidimensional simple en el espacio de visualizaci√≥n donde proyecto mis objetos isom√©tricos.  Cada uno de estos sectores contiene una lista de objetos isom√©tricos que lo cruzan.  Entonces, la idea es simple: si las proyecciones de los objetos no se cruzan, entonces no tiene sentido construir dependencias entre los objetos.  Luego pasamos por alto todos los objetos visibles y construimos dependencias solo en los sectores donde es necesario, reduciendo as√≠ la complejidad temporal del algoritmo y aumentando el rendimiento.  Calculamos el tama√±o de cada sector como un promedio entre los tama√±os de todos los objetos.  Encontr√© el resultado m√°s que satisfactorio. </p><br><h3 id="general-performance">  Rendimiento general </h3><br><p>  Por supuesto, podr√≠a escribir un art√≠culo separado sobre esto ... Bien, tratemos de hacer esto corto.  Primero, estamos cobrando los componentes (usamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GetComponent</a> para encontrarlos, lo que no es r√°pido).  Recomiendo a todos que est√©n atentos cuando trabajen con cualquier cosa que tenga que ver con la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Actualizaci√≥n</a> .  Siempre debe tener en cuenta que sucede para cada cuadro, por lo que debe tener mucho cuidado. Adem√°s, recuerde todas las caracter√≠sticas interesantes, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el operador personalizado ==</a> .  Hay muchas cosas a tener en cuenta, pero al final puedes conocer cada una de ellas en el generador de perfiles incorporado.  Hace que sea mucho m√°s f√°cil memorizarlos y usarlos :) </p><br><p>  Tambi√©n puedes entender realmente el dolor del recolector de basura.  ¬øNecesita un mayor rendimiento?  Luego, olv√≠date de cualquier cosa que pueda asignar memoria, que en <strong>C #</strong> (especialmente en el antiguo compilador <strong>Mono</strong> ) puede hacerse por cualquier cosa, desde <strong>foreach</strong> (!) Hasta lambdas emergentes, y mucho menos <strong>LINQ,</strong> que ahora est√° prohibido para ti, incluso en los casos m√°s simples.  Al final, en lugar de <strong>C #</strong> con su az√∫car sint√°ctico, obtienes una apariencia de <strong>C</strong> con capacidades rid√≠culas. </p><br><p>  Aqu√≠ voy a dar algunos enlaces sobre el tema que pueden serle √∫tiles: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte3</a> . </p><br><h3 id="results">  Resultados </h3><br><p>  Nunca antes hab√≠a conocido a nadie que usara esta t√©cnica de optimizaci√≥n, as√≠ que me alegr√© especialmente de ver los resultados.  Y si en las primeras versiones se necesitaron literalmente 50 objetos en movimiento para que el juego se convirtiera en una presentaci√≥n de diapositivas, ahora funciona bastante bien incluso cuando hay 800 objetos en un marco: todo gira a la m√°xima velocidad y se reorganiza solo por 3-6 ms, que es muy bueno para este n√∫mero de objetos en isometr√≠a.  Adem√°s, despu√©s de la inicializaci√≥n, casi no ha asignado memoria para un marco :) </p><br><h2 id="further-opportunities">  Oportunidades adicionales </h2><br><p>  Despu√©s de leer comentarios y sugerencias, hubo algunas caracter√≠sticas que agregu√© en las versiones anteriores. </p><br><h3 id="2d3d-mixture">  Mezcla 2D / 3D </h3><br><p>  Mezclar 2D y 3D en juegos isom√©tricos es una oportunidad interesante que permite minimizar el dibujo de diferentes opciones de movimiento y rotaci√≥n (por ejemplo, modelos 3D de personajes animados).  No es realmente dif√≠cil de hacer, pero requiere integraci√≥n dentro del sistema de clasificaci√≥n.  Todo lo que necesita es obtener un <strong>cuadro delimitador</strong> del modelo con todos sus elementos secundarios y luego mover el modelo a lo largo de la pantalla Z por el ancho del cuadro. </p><br><pre> <code class="plaintext hljs">Bounds IsoObject3DBounds(IsoObject iso_object) { var bounds = new Bounds(); iso_object.GetComponentsInChildren&lt;Renderer&gt;(_tmpRenderers); if ( _tmpRenderers.Count &gt; 0 ) { bounds = _tmpRenderers[0].bounds; for ( var i = 1; i &lt; _tmpRenderers.Count; ++i ) { bounds.Encapsulate(_tmpRenderers[i].bounds); } } return bounds; }</code> </pre> <br><p>  <em>ese es un ejemplo de c√≥mo puedes obtener <strong>Bounding Box</strong> del modelo con todos sus elementos secundarios</em> </p><br><img src="https://habrastorage.org/files/837/b52/c02/837b52c025b6485c95ede6c77a5b4ed3.gif"><br><blockquote>  <em>y as√≠ es como se ve cuando est√° hecho</em> </blockquote><br><h3 id="custom-isometric-settings">  Configuraciones isom√©tricas personalizadas </h3><br><p>  Eso es relativamente simple.  Me pidieron que hiciera posible establecer el √°ngulo isom√©trico, la relaci√≥n de aspecto y la altura del mosaico.  Despu√©s de sufrir algo de dolor relacionado con las matem√°ticas, obtienes algo como esto: </p><br><img src="https://habrastorage.org/files/02b/f56/35e/02bf5635e5df46778915d43caf2bd846.gif"><br><br><h3 id="physics">  F√≠sica </h3><br><p>  Y aqu√≠ se pone m√°s interesante.  Dado que la isometr√≠a simula el mundo 3D, se supone que la f√≠sica tambi√©n es tridimensional, con altura y todo.  Se me ocurri√≥ este truco fascinante.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Replico</a> todos los componentes de la f√≠sica, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Rigidbody</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Collider</a> , etc., para el mundo isom√©trico.  De acuerdo con estas descripciones y configuraciones, hago la copia del mundo tridimensional f√≠sico invisible usando el motor y el <strong>PhysX</strong> incorporado.  Despu√©s de eso, tomo los datos de simulaci√≥n calculados y obtengo esos bacl en componentes duplicados para el mundo isom√©trico.  Luego hago lo mismo para simular eventos de choque y activaci√≥n. </p><br><img src="https://habrastorage.org/files/56c/c0b/199/56cc0b19987043bbb94baa257879b224.gif"><br><blockquote>  <em>El conjunto de herramientas de demostraci√≥n f√≠sica GIF</em> </blockquote><br><h2 id="epilogue-and-conclusions">  Ep√≠logo y conclusiones </h2><br><p>  Despu√©s de implementar todas las sugerencias del foro, decid√≠ aumentar el precio hasta 40 d√≥lares, por lo que no se ver√≠a como otro plugin barato con cinco l√≠neas de c√≥digo :) Estar√© encantado de responder preguntas y Escucha tus consejos.  Como es la primera vez que escribo algo sobre Habr, agradezco todo tipo de cr√≠ticas, ¬°gracias!  Y ahora, algo que estaba ahorrando para el final, las estad√≠sticas de ventas del mes: </p><br><table border="1" width="200"><tbody><tr><th>  Mes </th><th>  5 $ </th><th>  40 $ </th></tr><tr><td>  Enero </td><td>  12 </td><td>  0 0 </td></tr><tr><td>  Febrero </td><td>  22 </td><td>  0 0 </td></tr><tr><td>  Marzo </td><td>  17 </td><td>  0 0 </td></tr><tr><td>  Abril </td><td>  9 9 </td><td>  0 0 </td></tr><tr><td>  Mayo </td><td>  9 9 </td><td>  0 0 </td></tr><tr><td>  Junio </td><td>  9 9 </td><td>  0 0 </td></tr><tr><td>  Julio </td><td>  7 7 </td><td>  4 4 </td></tr><tr><td>  Agosto </td><td>  0 0 </td><td>  4 4 </td></tr><tr><td>  Septiembre </td><td>  0 0 </td><td>  5 5 </td></tr></tbody></table><br><p>  Enlace de la p√°gina de Unity Asset Store: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Isometric 2.5D Toolset</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es436372/">https://habr.com/ru/post/es436372/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es436356/index.html">[Interesante desde detr√°s de la colina] ¬øC√≥mo detenemos la dependencia tecnol√≥gica?</a></li>
<li><a href="../es436358/index.html">¬øPor qu√© los desarrolladores senior ense√±an a los estudiantes?</a></li>
<li><a href="../es436360/index.html">Gotta Go Fast: Building for Speed ‚Äã‚Äãen iOS. Parte 1</a></li>
<li><a href="../es436364/index.html">Liveprof mostrar√° cu√°ndo y por qu√© ha cambiado el rendimiento de su aplicaci√≥n PHP</a></li>
<li><a href="../es436370/index.html">Infraestructura de clave p√∫blica Cadena de certificados ra√≠z X509 v.3</a></li>
<li><a href="../es436374/index.html">Tendencias de dise√±o de UI y UX 2019</a></li>
<li><a href="../es436376/index.html">Descripci√≥n general del robot todo terreno EZ-Robot Roli Rover</a></li>
<li><a href="../es436378/index.html">bobaos.pub - KNX TP / UART, Raspberry Pi y Redis</a></li>
<li><a href="../es436380/index.html">Inicio r√°pido en la impresi√≥n 3D: impresoras econ√≥micas para principiantes o tecnolog√≠a para las masas</a></li>
<li><a href="../es436382/index.html">Antig√ºedades: diez a√±os de evoluci√≥n del port√°til con el ThinkPad X301</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>