<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚û°Ô∏è üë®‚Äçüë¶ ‚ùáÔ∏è Aprende OpenGL. Lecci√≥n 6.3 - Iluminaci√≥n basada en im√°genes. Irradiaci√≥n difusa üí¨ ü¶ê üë©üèø‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La iluminaci√≥n basada en la imagen o IBL ( Image Based Lighting ) es una categor√≠a de m√©todos de iluminaci√≥n que no se basa en la contabilidad de fuen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aprende OpenGL. Lecci√≥n 6.3 - Iluminaci√≥n basada en im√°genes. Irradiaci√≥n difusa</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426987/"><img src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="OGL3" align="left" width="300">  La iluminaci√≥n basada en la imagen o <i>IBL</i> ( <i>Image Based Lighting</i> ) es una categor√≠a de m√©todos de iluminaci√≥n que no se basa en la contabilidad de fuentes de luz anal√≠ticas (discutidas en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lecci√≥n anterior</a> ), sino que considera el entorno completo de los objetos iluminados como una fuente de luz continua.  En el caso general, la base t√©cnica de tales m√©todos radica en el procesamiento de un mapa c√∫bico del entorno (preparado en el mundo real o creado sobre la base de una escena tridimensional) para que los datos almacenados en el mapa se puedan usar directamente en los c√°lculos de iluminaci√≥n: de hecho, cada texto del mapa c√∫bico se considera como una fuente de luz .  En general, esto le permite capturar el efecto de la iluminaci√≥n global en la escena, que es un componente importante que transmite el "tono" general de la escena actual y ayuda a que los objetos iluminados se "incrusten" mejor en ella. <br><br>  Dado que los algoritmos IBL tienen en cuenta la iluminaci√≥n de un determinado entorno "global", su resultado se considera una simulaci√≥n m√°s precisa de la iluminaci√≥n de fondo o incluso una aproximaci√≥n muy aproximada de la iluminaci√≥n global.  Este aspecto hace que los m√©todos IBL sean interesantes en t√©rminos de incorporaci√≥n al modelo PBR, ya que el uso de luz ambiental en el modelo de iluminaci√≥n permite que los objetos se vean mucho m√°s f√≠sicamente correctos. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Contenido</b> <div class="spoiler_text">  Parte 1. Comenzando <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Creaci√≥n de ventanas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hola ventana</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hola triangulo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sombreadores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Texturas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Transformaciones</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sistemas de coordenadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√°mara</a> </li></ol><br>  Parte 2. Iluminaci√≥n b√°sica <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Colores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conceptos b√°sicos de iluminaci√≥n</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Materiales</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapas de textura</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuentes de luz</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M√∫ltiples fuentes de iluminaci√≥n</a> </li></ol><br>  Parte 3. Descargar modelos 3D <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Biblioteca Assimp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clase de pol√≠gono de malla</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clase de modelo 3D</a> </li></ol><br>  Parte 4. Caracter√≠sticas avanzadas de OpenGL <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Prueba de profundidad</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Prueba de plantilla</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mezcla de colores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Caras de recorte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Buffer de trama</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tarjetas c√∫bicas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Manejo avanzado de datos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GLSL avanzado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sombreador geom√©trico</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Instancia</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Suavizado</a> </li></ol><br>  Parte 5. Iluminaci√≥n avanzada <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Iluminaci√≥n avanzada.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Modelo Blinn-Fong.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Correcci√≥n gamma</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cartas de sombra</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapas de sombras omnidireccionales</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapeo normal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapeo de paralaje</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bloom</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Renderizado diferido</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SSAO</a> </li></ol><br>  Parte 6. PBR <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Teor√≠a</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuentes de luz analiticas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Radiaci√≥n difusa.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Exposici√≥n al espejo.</a> </li></ol><br></div></div><br>  Para incorporar la influencia de IBL en el sistema PBR ya descrito, volvemos a la ecuaci√≥n de reflectancia familiar: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1"><span class="MJXp-msubsup" id="MJXp-Span-2"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-3" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-4" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-5" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">p</span><span class="MJXp-mo" id="MJXp-Span-7" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-8">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">g</span><span class="MJXp-msubsup" id="MJXp-Span-13"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-15" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-16" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-18">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">t</span><span class="MJXp-mtext" id="MJXp-Span-22">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">t</span><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-31">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">a</span></span></span><span class="MJXp-mo" id="MJXp-Span-37" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-40" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-mtext" id="MJXp-Span-41">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">c</span><span class="MJXp-mrow" id="MJXp-Span-46"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">c</span></span><span class="MJXp-mrow" id="MJXp-Span-48"><span class="MJXp-mtext" id="MJXp-Span-49">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">i</span></span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-53"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-55" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mtext" id="MJXp-Span-56">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">c</span><span class="MJXp-mrow" id="MJXp-Span-61"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">G</span></span><span class="MJXp-mrow" id="MJXp-Span-65"><span class="MJXp-mn" id="MJXp-Span-66">4</span><span class="MJXp-mo" id="MJXp-Span-67" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-68">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">g</span><span class="MJXp-msubsup" id="MJXp-Span-73"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-75" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-76">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">n</span><span class="MJXp-mo" id="MJXp-Span-82" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-83" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-84">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">g</span><span class="MJXp-msubsup" id="MJXp-Span-89"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-91" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-92">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">n</span><span class="MJXp-mo" id="MJXp-Span-98" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mo" id="MJXp-Span-99" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-100"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-102" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-103" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">p</span><span class="MJXp-mo" id="MJXp-Span-105" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-106">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">g</span><span class="MJXp-msubsup" id="MJXp-Span-111"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-113" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-114" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">n</span><span class="MJXp-mtext" id="MJXp-Span-116">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">t</span><span class="MJXp-mtext" id="MJXp-Span-121">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">g</span><span class="MJXp-msubsup" id="MJXp-Span-126"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-128" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">d</span><span class="MJXp-mtext" id="MJXp-Span-130">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">g</span><span class="MJXp-msubsup" id="MJXp-Span-135"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-137" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="133.846ex" height="2.78ex" viewBox="0 -832 57628 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="2942" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="14781" y="0"></use><g transform="translate(15171,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-66" x="16413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-72" x="16963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="17415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="17944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="18378" y="0"></use><g transform="translate(18811,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="753" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2B" x="20132" y="0"></use><g transform="translate(21133,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-73" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-66" x="22337" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-72" x="22887" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="23339" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="23868" y="0"></use><g transform="translate(24302,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(26666,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="13946" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="41002" y="0"></use><g transform="translate(41392,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="42417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="42807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2C" x="43310" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="44006" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="44491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="45370" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="45836" y="0"></use><g transform="translate(46317,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="47190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="47580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="48430" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="48864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="49387" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="49873" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="50484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="50970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="51848" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="52315" y="0"></use><g transform="translate(52795,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="53669" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="54443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="54928" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="55807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="56273" y="0"></use><g transform="translate(56754,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} (k_d \ frac {c} {\ pi} + k_s \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n )}) L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i </script></p><br>  Como se describi√≥ anteriormente, el objetivo principal es calcular la integral para todas las direcciones de radiaci√≥n entrantes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-138"><span class="MJXp-msubsup" id="MJXp-Span-139"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-141" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="1013" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> w_i </script>  hemisferio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-142"><span class="MJXp-mtext" id="MJXp-Span-143">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="2839" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> \ Omega </script>  .  En la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">√∫ltima lecci√≥n, el</a> c√°lculo de la integral no fue oneroso, ya que sab√≠amos de antemano el n√∫mero de fuentes de luz y, por lo tanto, todas esas varias direcciones de incidencia de luz que les corresponden.  Al mismo tiempo, la integral no se puede resolver con un chasquido: <u>cualquier</u> vector descendente <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-149"><span class="MJXp-msubsup" id="MJXp-Span-150"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-152" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="1013" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> w_i </script>  desde el medio ambiente puede llevar brillo de energ√≠a no cero.  Como resultado, para la aplicabilidad pr√°ctica del m√©todo es necesario cumplir los siguientes requisitos: <br><ul><li>  Debe encontrar una forma de obtener el brillo de energ√≠a de la escena para un vector de direcci√≥n arbitrario <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-153"><span class="MJXp-msubsup" id="MJXp-Span-154"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-156" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="1013" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> w_i </script>  ; </li><li>  Es necesario que la soluci√≥n de la integral pueda ocurrir en tiempo real. </li></ul><br>  Bueno, el primer punto se resuelve por s√≠ solo.  Una pista de una soluci√≥n ya se ha deslizado aqu√≠: uno de los m√©todos para representar la irradiaci√≥n de una escena o entorno es un mapa c√∫bico que ha sufrido un procesamiento especial.  Cada texel en dicho mapa puede considerarse como una fuente emisora ‚Äã‚Äãseparada.  Al tomar muestras de dicho mapa de acuerdo con un vector arbitrario <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-157"><span class="MJXp-msubsup" id="MJXp-Span-158"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-160" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="1013" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> w_i </script>  f√°cilmente obtenemos el brillo energ√©tico de la escena en esta direcci√≥n. <br><br>  Entonces, obtenemos el brillo de energ√≠a de la escena para un vector arbitrario <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-161"><span class="MJXp-msubsup" id="MJXp-Span-162"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-164" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="1013" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> w_i </script>  : <br><br><pre><code class="plaintext hljs">vec3 radiance = texture(_cubemapEnvironment, w_i).rgb;</code> </pre> <br>  Sin embargo, notablemente, resolver la integral requiere que seleccionemos del mapa del entorno no desde una direcci√≥n, sino de todas las posibles en el hemisferio.  Y as√≠, para cada fragmento sombreado.  Obviamente, para tareas en tiempo real esto es pr√°cticamente impracticable.  Un m√©todo m√°s efectivo ser√≠a calcular parte de las operaciones integradas por adelantado, incluso fuera de nuestra aplicaci√≥n.  Pero para esto tendr√°s que arremangarte y sumergirte m√°s profundamente en la esencia de la expresi√≥n de la reflectividad: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-165"><span class="MJXp-msubsup" id="MJXp-Span-166"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-168" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-169" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">p</span><span class="MJXp-mo" id="MJXp-Span-171" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-172">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">g</span><span class="MJXp-msubsup" id="MJXp-Span-177"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-179" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-180" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-181" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-182">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">t</span><span class="MJXp-mtext" id="MJXp-Span-186">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">t</span><span class="MJXp-msubsup" id="MJXp-Span-192"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-194" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-195">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">a</span></span></span><span class="MJXp-mo" id="MJXp-Span-201" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-202"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-204" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-mtext" id="MJXp-Span-205">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">c</span><span class="MJXp-mrow" id="MJXp-Span-210"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">c</span></span><span class="MJXp-mrow" id="MJXp-Span-212"><span class="MJXp-mtext" id="MJXp-Span-213">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">i</span></span><span class="MJXp-mo" id="MJXp-Span-216" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-217"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-219" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mtext" id="MJXp-Span-220">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">c</span><span class="MJXp-mrow" id="MJXp-Span-225"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">G</span></span><span class="MJXp-mrow" id="MJXp-Span-229"><span class="MJXp-mn" id="MJXp-Span-230">4</span><span class="MJXp-mo" id="MJXp-Span-231" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-232">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">g</span><span class="MJXp-msubsup" id="MJXp-Span-237"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-239" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-240">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">n</span><span class="MJXp-mo" id="MJXp-Span-246" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-247" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-248">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">g</span><span class="MJXp-msubsup" id="MJXp-Span-253"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-255" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-256">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261">n</span><span class="MJXp-mo" id="MJXp-Span-262" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mo" id="MJXp-Span-263" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-264"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-266" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-267" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">p</span><span class="MJXp-mo" id="MJXp-Span-269" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-270">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">g</span><span class="MJXp-msubsup" id="MJXp-Span-275"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-277" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-278" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">n</span><span class="MJXp-mtext" id="MJXp-Span-280">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">t</span><span class="MJXp-mtext" id="MJXp-Span-285">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">g</span><span class="MJXp-msubsup" id="MJXp-Span-290"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-292" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">d</span><span class="MJXp-mtext" id="MJXp-Span-294">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298">g</span><span class="MJXp-msubsup" id="MJXp-Span-299"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-301" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="133.846ex" height="2.78ex" viewBox="0 -832 57628 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="2942" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="14781" y="0"></use><g transform="translate(15171,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-66" x="16413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-72" x="16963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="17415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="17944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="18378" y="0"></use><g transform="translate(18811,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="753" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2B" x="20132" y="0"></use><g transform="translate(21133,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-73" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-66" x="22337" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-72" x="22887" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="23339" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="23868" y="0"></use><g transform="translate(24302,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(26666,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="13946" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="41002" y="0"></use><g transform="translate(41392,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="42417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="42807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2C" x="43310" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="44006" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="44491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="45370" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="45836" y="0"></use><g transform="translate(46317,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="47190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="47580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="48430" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="48864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="49387" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="49873" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="50484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="50970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="51848" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="52315" y="0"></use><g transform="translate(52795,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="53669" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="54443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="54928" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="55807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="56273" y="0"></use><g transform="translate(56754,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} (k_d \ frac {c} {\ pi} + k_s \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n )}) L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i </script></p><br><br>  Se puede ver que las partes de la expresi√≥n relacionadas con lo difuso <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-302"><span class="MJXp-msubsup" id="MJXp-Span-303"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-305" style="vertical-align: -0.4em;">d</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.303ex" height="2.419ex" viewBox="0 -780.1 991.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="737" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> k_d </script>  y espejo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-306"><span class="MJXp-msubsup" id="MJXp-Span-307"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-309" style="vertical-align: -0.4em;">s</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.215ex" height="2.419ex" viewBox="0 -780.1 953.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-73" x="737" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> k_s </script>  Los componentes BRDF son independientes.  Puede dividir la integral en dos partes: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-310"><span class="MJXp-msubsup" id="MJXp-Span-311"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-313" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-314" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">p</span><span class="MJXp-mo" id="MJXp-Span-316" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-317">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-321">g</span><span class="MJXp-msubsup" id="MJXp-Span-322"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-324" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-325" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-326" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-327">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">t</span><span class="MJXp-mtext" id="MJXp-Span-331">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-333">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">t</span><span class="MJXp-msubsup" id="MJXp-Span-337"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-339" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-340">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-344">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-345">a</span></span></span><span class="MJXp-mo" id="MJXp-Span-346" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-347"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-349" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-mtext" id="MJXp-Span-350">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-352">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-354">c</span><span class="MJXp-mrow" id="MJXp-Span-355"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">c</span></span><span class="MJXp-mrow" id="MJXp-Span-357"><span class="MJXp-mtext" id="MJXp-Span-358">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-360">i</span></span><span class="MJXp-mo" id="MJXp-Span-361" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-362"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-363" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-364" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-365" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-366">p</span><span class="MJXp-mo" id="MJXp-Span-367" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-368">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-369">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-371">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">g</span><span class="MJXp-msubsup" id="MJXp-Span-373"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-374" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-375" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-376" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377">n</span><span class="MJXp-mtext" id="MJXp-Span-378">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-380">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">t</span><span class="MJXp-mtext" id="MJXp-Span-383">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">g</span><span class="MJXp-msubsup" id="MJXp-Span-388"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-390" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">d</span><span class="MJXp-mtext" id="MJXp-Span-392">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">g</span><span class="MJXp-msubsup" id="MJXp-Span-397"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-399" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-400" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-401">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">t</span><span class="MJXp-mtext" id="MJXp-Span-405">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-408">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">t</span><span class="MJXp-msubsup" id="MJXp-Span-411"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-413" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-414">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-415">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-416">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-417">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">a</span></span></span><span class="MJXp-mo" id="MJXp-Span-420" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-421"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-422" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-423" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mtext" id="MJXp-Span-424">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-427">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428">c</span><span class="MJXp-mrow" id="MJXp-Span-429"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-430">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432">G</span></span><span class="MJXp-mrow" id="MJXp-Span-433"><span class="MJXp-mn" id="MJXp-Span-434">4</span><span class="MJXp-mo" id="MJXp-Span-435" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-436">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440">g</span><span class="MJXp-msubsup" id="MJXp-Span-441"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-443" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-444">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">n</span><span class="MJXp-mo" id="MJXp-Span-450" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-451" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-452">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-454">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-456">g</span><span class="MJXp-msubsup" id="MJXp-Span-457"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-459" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-460">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-461">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-462">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-464">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465">n</span><span class="MJXp-mo" id="MJXp-Span-466" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mo" id="MJXp-Span-467" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-468"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-469" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-470" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-471" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">p</span><span class="MJXp-mo" id="MJXp-Span-473" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-474">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-477">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-478">g</span><span class="MJXp-msubsup" id="MJXp-Span-479"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-480" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-481" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-482" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">n</span><span class="MJXp-mtext" id="MJXp-Span-484">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-485">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-486">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-487">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488">t</span><span class="MJXp-mtext" id="MJXp-Span-489">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-490">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-491">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">g</span><span class="MJXp-msubsup" id="MJXp-Span-494"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-495" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-496" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-497">d</span><span class="MJXp-mtext" id="MJXp-Span-498">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-499">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-500">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-501">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-502">g</span><span class="MJXp-msubsup" id="MJXp-Span-503"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-504" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-505" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="189.766ex" height="2.78ex" viewBox="0 -832 81704.5 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="2942" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="14781" y="0"></use><g transform="translate(15171,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-66" x="16413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-72" x="16963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="17415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="17944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="18378" y="0"></use><g transform="translate(18811,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="753" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="19910" y="0"></use><g transform="translate(20300,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="21325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="21715" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2C" x="22218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="22914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="23399" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="24278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="24744" y="0"></use><g transform="translate(25225,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="26098" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="26488" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="27338" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="27772" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="28295" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="28781" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="29392" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="29878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="30756" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="31223" y="0"></use><g transform="translate(31703,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="32577" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="33351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="33836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="34715" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="35181" y="0"></use><g transform="translate(35662,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2B" x="36758" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="38008" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="38354" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="38954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6C" x="39566" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="39864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="40210" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="41088" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="41434" y="0"></use><g transform="translate(41795,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="2942" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="44820" y="0"></use><g transform="translate(45210,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-73" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-66" x="46413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-72" x="46964" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="47415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="47945" y="0"></use><g transform="translate(48378,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(50743,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="13946" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="65079" y="0"></use><g transform="translate(65468,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="66494" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="66883" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2C" x="67387" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="68082" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="68568" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="69446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="69913" y="0"></use><g transform="translate(70393,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="71267" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="71656" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="72507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="72940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="73464" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="73949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="74561" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="75046" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="75925" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="76391" y="0"></use><g transform="translate(76872,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="77746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="78519" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="79005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="79883" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="80350" y="0"></use><g transform="translate(80830,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} (k_d \ frac {c} {\ pi}) L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i + \ int \ limits_ { \ Omega} (k_s \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n)}) L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i </script></p><br><br>  Tal divisi√≥n en partes nos permitir√° tratar con cada uno de ellos individualmente, y en esta lecci√≥n trataremos con la parte responsable de la iluminaci√≥n difusa. <br><br>  Habiendo analizado la forma de la integral sobre el componente difuso, podemos concluir que el componente difuso de Lambert es esencialmente una constante (color <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-506"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-507">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.09ex" height="1.455ex" viewBox="0 -520.7 469.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-73" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> s </script>  √≠ndice de refracci√≥n <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-508"><span class="MJXp-msubsup" id="MJXp-Span-509"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-510" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-511" style="vertical-align: -0.4em;">d</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.303ex" height="2.419ex" viewBox="0 -780.1 991.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="737" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> k_d </script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-512"><span class="MJXp-mtext" id="MJXp-Span-513">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-514">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.553ex" height="2.298ex" viewBox="0 -728.2 1099 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="753" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> \ pi </script>  son constantes bajo las condiciones de integrando) y no depende de otras variables.  Dado este hecho, podemos poner las constantes m√°s all√° del signo de la integral: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-516"><span class="MJXp-msubsup" id="MJXp-Span-517"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-519" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-520" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521">p</span><span class="MJXp-mo" id="MJXp-Span-522" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-523">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-525">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-526">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">g</span><span class="MJXp-msubsup" id="MJXp-Span-528"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-530" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-531" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-532" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-533"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-534" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-535" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-mtext" id="MJXp-Span-536">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-538">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-539">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-540">c</span><span class="MJXp-mrow" id="MJXp-Span-541"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-542">c</span></span><span class="MJXp-mrow" id="MJXp-Span-543"><span class="MJXp-mtext" id="MJXp-Span-544">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-545">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-546">i</span></span><span class="MJXp-mtext" id="MJXp-Span-547">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-548">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-549">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550">t</span><span class="MJXp-mtext" id="MJXp-Span-551">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-552">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-554">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-555">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-556">t</span><span class="MJXp-msubsup" id="MJXp-Span-557"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-559" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-560">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-561">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-563">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-564">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565">a</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-566"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-567" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-568" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-569" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570">p</span><span class="MJXp-mo" id="MJXp-Span-571" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-572">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-573">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-574">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-575">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-576">g</span><span class="MJXp-msubsup" id="MJXp-Span-577"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-578" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-579" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-580" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-581">n</span><span class="MJXp-mtext" id="MJXp-Span-582">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-584">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586">t</span><span class="MJXp-mtext" id="MJXp-Span-587">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-588">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-589">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-590">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-591">g</span><span class="MJXp-msubsup" id="MJXp-Span-592"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-593" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-594" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-595">d</span><span class="MJXp-mtext" id="MJXp-Span-596">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-597">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-598">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-599">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">g</span><span class="MJXp-msubsup" id="MJXp-Span-601"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-602" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-603" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="83.049ex" height="2.78ex" viewBox="0 -832 35757 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-3D" x="6664" y="0"></use><g transform="translate(7720,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-66" x="8961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-72" x="9512" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="9963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="10493" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="10926" y="0"></use><g transform="translate(11360,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="753" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="12709" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="13054" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="13655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6C" x="14266" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="14565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="14910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="15789" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="16134" y="0"></use><g transform="translate(16496,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="2942" y="0"></use></g></g><g transform="translate(19521,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-28" x="20546" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="20936" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-2C" x="21439" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="22135" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="22620" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="23499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="23965" y="0"></use><g transform="translate(24446,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMAIN-29" x="25319" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6E" x="25709" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-63" x="26559" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="26993" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="27516" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-74" x="28002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="28613" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="29099" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="29977" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="30444" y="0"></use><g transform="translate(30924,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-64" x="31798" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="32572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6D" x="33057" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-65" x="33936" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-67" x="34402" y="0"></use><g transform="translate(34883,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-15"> L_o (p, \ omega_o) = k_d \ frac {c} {\ pi} \ int \ limits _ {\ Omega} L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i </script></p><br><br>  Entonces obtenemos una integral dependiendo solo de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-604"><span class="MJXp-msubsup" id="MJXp-Span-605"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-606" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-607" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="1013" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> w_i </script>  (se supone que <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-608"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-609">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-70" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-17"> p </script>  corresponde al centro del mapa c√∫bico del entorno).  Seg√∫n esta f√≥rmula, puede calcular o, mejor a√∫n, precalcular un nuevo mapa c√∫bico que almacena el resultado del c√°lculo de la integral del componente difuso para cada direcci√≥n de la muestra (o mapa de texel) <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-610"><span class="MJXp-msubsup" id="MJXp-Span-611"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-612" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-613" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.694ex" height="1.817ex" viewBox="0 -520.7 1159.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="1013" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-18"> w_o </script>  utilizando la operaci√≥n de convoluci√≥n. <br><br>  La convoluci√≥n es la operaci√≥n de aplicar algunos c√°lculos a cada elemento de un conjunto de datos, teniendo en cuenta los datos de todos los dem√°s elementos del conjunto.  En este caso, dichos datos son el brillo energ√©tico de la escena o el mapa del entorno.  Por lo tanto, para calcular un valor en cada direcci√≥n de la muestra en el mapa c√∫bico, tendremos que tener en cuenta los valores tomados de todas las dem√°s direcciones posibles de la muestra en el hemisferio que se encuentran alrededor del punto de muestra. <br><br>  Para convolucionar el mapa del entorno, debe resolver la integral para cada direcci√≥n resultante de la muestra <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-614"><span class="MJXp-msubsup" id="MJXp-Span-615"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-617" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.694ex" height="1.817ex" viewBox="0 -520.7 1159.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-6F" x="1013" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-19"> w_o </script>  realizando m√∫ltiples muestras discretas a lo largo de las instrucciones <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-618"><span class="MJXp-msubsup" id="MJXp-Span-619"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-620" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-621" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426987/&amp;usg=ALkJrhi46CSRa3PHU7VpwEvCRsgzvm8Grg#MJMATHI-69" x="1013" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-20"> w_i </script>  perteneciente al hemisferio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-622"><span class="MJXp-mtext" id="MJXp-Span-623">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-624">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-625">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-626">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-628">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> \ Omega </script>  , y promediando el brillo de energ√≠a total.  El hemisferio, en base al cual se toman las direcciones de muestreo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-629"><span class="MJXp-msubsup" id="MJXp-Span-630"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-631" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-632" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> w_i </script>  orientado a lo largo del vector <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-633"><span class="MJXp-msubsup" id="MJXp-Span-634"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-635" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-636" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> w_o </script>  representando la direcci√≥n de destino para la cual se calcula la convoluci√≥n actual.  Mire la imagen para una mejor comprensi√≥n: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pr/yl/ql/prylqltlmqjlvfhpaswbes8bmg8.png"></div><br><br>  Tal mapa c√∫bico precalculado que almacena el resultado de integraci√≥n para cada direcci√≥n de la muestra <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-637"><span class="MJXp-msubsup" id="MJXp-Span-638"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-639" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-640" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> w_o </script>  tambi√©n se puede considerar como el almacenamiento del resultado de resumir toda la iluminaci√≥n indirecta difusa en la escena, incidente en una determinada superficie orientada a lo largo de la direcci√≥n <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-641"><span class="MJXp-msubsup" id="MJXp-Span-642"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-643" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-644" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> w_o </script>  .  En otras palabras, estos mapas c√∫bicos se denominan mapas de irradiancia, porque el mapa del entorno c√∫bico preconvolucional le permite muestrear directamente la magnitud de la irradiaci√≥n de la escena, proveniente de una direcci√≥n arbitraria <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-645"><span class="MJXp-msubsup" id="MJXp-Span-646"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-647" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-648" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> w_o </script>  , sin c√°lculos adicionales. <br><blockquote>  La expresi√≥n que determina el brillo de la energ√≠a tambi√©n depende de la posici√≥n del punto de muestreo. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-649"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-650">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> p </script>  que tomamos justo en el centro del mapa de irradiaci√≥n.  Esta suposici√≥n impone una limitaci√≥n en el sentido de que la fuente de toda la iluminaci√≥n indirecta difusa tambi√©n ser√° un √∫nico mapa ambiental.  En escenas que son heterog√©neas en iluminaci√≥n, esto puede destruir la ilusi√≥n de la realidad (especialmente en escenas interiores).  Los motores de renderizado modernos resuelven este problema colocando objetos auxiliares especiales en la escena: <i>sondas de reflexi√≥n</i> .  Cada uno de estos objetos se dedica a una tarea: forma su propio mapa de irradiaci√≥n para su entorno inmediato.  Con esta t√©cnica, la irradiaci√≥n (y el brillo de la energ√≠a) en un punto arbitrario <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-651"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-652">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> p </script>  se determinar√° por simple interpolaci√≥n entre las muestras de reflexi√≥n m√°s cercanas.  Pero para las tareas actuales, estamos de acuerdo en que el mapa del entorno se muestrea desde su centro y analizaremos muestras de reflexi√≥n en lecciones adicionales. </blockquote>  A continuaci√≥n se muestra un ejemplo de un mapa c√∫bico del entorno y un mapa de irradiaci√≥n (basado en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">motor de onda</a> ) derivado del mismo, que promedia el brillo de la energ√≠a del entorno para cada direcci√≥n de salida <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-653"><span class="MJXp-msubsup" id="MJXp-Span-654"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-655" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-656" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> w_o </script>  . <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8c/qz/yg/8cqzygcmwfdkdcadui_iqrtj4rw.png"></div><br>  Entonces, esta tarjeta almacena el resultado de convoluci√≥n en cada texel (correspondiente a la direcci√≥n <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-657"><span class="MJXp-msubsup" id="MJXp-Span-658"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-659" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-660" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> w_o </script>  ), y externamente, dicho mapa parece almacenar el color promedio del mapa del entorno.  Una muestra en cualquier direcci√≥n de dicho mapa devolver√° el valor de la irradiaci√≥n que emana de esta direcci√≥n. <br><br><h2>  PBR y HDR </h2><br>  En la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lecci√≥n anterior</a> , ya se se√±al√≥ brevemente que para el correcto funcionamiento del modelo de iluminaci√≥n PBR es extremadamente importante tener en cuenta el rango de brillo HDR de las fuentes de luz presentes.  Dado que el modelo PBR en la entrada toma par√°metros de una forma u otra en funci√≥n de cantidades y caracter√≠sticas f√≠sicas muy espec√≠ficas, es l√≥gico exigir que el brillo de energ√≠a de las fuentes de luz coincida con sus prototipos reales.  No importa c√≥mo justifiquemos el valor espec√≠fico del flujo de radiaci√≥n para cada fuente: hacemos una estimaci√≥n de ingenier√≠a aproximada o recurrimos a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cantidades f√≠sicas</a> ; la diferencia en las caracter√≠sticas entre una l√°mpara de habitaci√≥n y el sol ser√° enorme en cualquier caso.  Sin el uso del rango <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HDR</a> , simplemente ser√° imposible determinar con precisi√≥n el brillo relativo de una variedad de fuentes de luz. <br><br>  Entonces, PBR y HDR son amigos para siempre, esto es comprensible, pero ¬øc√≥mo se relaciona este hecho con los m√©todos de iluminaci√≥n basados ‚Äã‚Äãen im√°genes?  En la √∫ltima lecci√≥n, se demostr√≥ que convertir PBR al rango de renderizado HDR es f√°cil.  Queda un "pero": dado que la iluminaci√≥n indirecta del entorno se basa en un mapa c√∫bico del entorno, se necesita una forma de preservar las caracter√≠sticas HDR de esta iluminaci√≥n de fondo en el mapa del entorno. <br><br>  Hasta ahora, hemos utilizado mapas de entorno creados en formato LDR (como los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">skyboxes</a> ).  Usamos la muestra de color de ellos en la representaci√≥n tal cual y esto es bastante aceptable para el sombreado directo de los objetos.  Y es completamente inadecuado cuando se usan mapas del entorno como fuentes de mediciones f√≠sicamente confiables. <br><br><h4>  RGBE: formato de imagen HDR </h4><br>  Familiar√≠cese con el formato de archivo de imagen RGBE.  Los archivos con la extensi√≥n " <i>.hdr</i> " se utilizan para almacenar im√°genes con un amplio rango din√°mico, asignando un byte para cada elemento de la tr√≠ada de color y un byte m√°s para el exponente com√∫n.  El formato tambi√©n le permite almacenar mapas de entornos c√∫bicos con un rango de intensidad de color m√°s all√° del rango LDR [0., 1.].  Esto significa que las fuentes de luz pueden mantener su intensidad real, estando representadas por dicho mapa del entorno. <br><br>  La red tiene muchos mapas de entorno gratuitos en formato RGBE, filmados en varias condiciones reales.  Aqu√≠ hay un ejemplo del sitio de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">archivo sIBL</a> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fa/ua/aq/fauaaqkw63r9dnghjofu83o-h2i.png"></div><br>  Es posible que se sorprenda de lo que vio: despu√©s de todo, esta imagen distorsionada no se parece en nada a un mapa c√∫bico normal con su desglose pronunciado en 6 caras.  La explicaci√≥n es simple: este mapa del entorno se proyect√≥ desde una esfera a un plano; <i>se</i> aplic√≥ <i>una exploraci√≥n de igual rect√°ngulo</i> .  Esto se hace para poder almacenar en un formato que no admite el modo de almacenamiento de tarjetas c√∫bicas tal como est√°.  Por supuesto, este m√©todo de proyecci√≥n tiene sus inconvenientes: la resoluci√≥n horizontal es mucho m√°s alta que la vertical.  En la mayor√≠a de los casos de aplicaci√≥n en renderizado, esta es una relaci√≥n aceptable, ya que generalmente los detalles interesantes del entorno y la iluminaci√≥n se encuentran exactamente en el plano horizontal, y no en el vertical.  Bueno, adem√°s de todo, necesitamos que el c√≥digo de conversi√≥n regrese al mapa c√∫bico. <br><br><h4>  Soporte para formato RGBE en stb_image.h </h4><br>  La descarga de este formato de imagen por su cuenta requiere el conocimiento de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la especificaci√≥n del formato</a> , que no es dif√≠cil, pero sigue siendo laborioso.  Afortunadamente para <a href="">nosotros</a> , la biblioteca de carga de im√°genes <a href="">stb_image.h</a> , implementada en un solo archivo de encabezado, admite la carga de archivos RGBE, devolviendo una matriz de n√∫meros de punto flotante: ¬°lo que necesitamos para nuestros prop√≥sitos!  Agregar una biblioteca a su proyecto, cargar datos de imagen es extremadamente simple: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"stb_image.h"</span></span></span><span class="hljs-meta"> [...] stbi_set_flip_vertically_on_load(true); int width, height, nrComponents; float *data = stbi_loadf(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"newport_loft.hdr"</span></span></span><span class="hljs-meta">, &amp;width, &amp;height, &amp;nrComponents, 0); unsigned int hdrTexture; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (data) { glGenTextures(1, &amp;hdrTexture); glBindTexture(GL_TEXTURE_2D, hdrTexture); glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB16F, width, height, 0, GL_RGB, GL_FLOAT, data); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); stbi_image_free(data); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { std::cout &lt;&lt; </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Failed to load HDR image."</span></span></span><span class="hljs-meta"> &lt;&lt; std::endl; }</span></span></code> </pre> <br>  La biblioteca convierte autom√°ticamente los valores del formato HDR interno a n√∫meros reales reales de 32 bits, con tres canales de color por defecto.  Es suficiente guardar los datos de la imagen HDR original en una textura de punto flotante 2D normal. <br><br><h4>  Convierta un escaneo de √°ngulo igual en un mapa c√∫bico </h4><br>  Se puede usar un escaneo igualmente rectangular para seleccionar directamente muestras del mapa del entorno, sin embargo, esto requerir√≠a costosas operaciones matem√°ticas, mientras que la obtenci√≥n de un mapa c√∫bico normal ser√≠a pr√°cticamente libre de rendimiento.  Es a partir de estas consideraciones que en esta lecci√≥n trataremos la conversi√≥n de una imagen equil√°tera en un mapa c√∫bico, que se utilizar√° m√°s adelante.  Sin embargo, el m√©todo de muestreo directo de un mapa igualmente rectangular que usa un vector tridimensional tambi√©n se mostrar√° aqu√≠, para que pueda elegir el m√©todo de trabajo que m√°s le convenga. <br><br>  Para convertir, debe dibujar un cubo del tama√±o de una unidad, observ√°ndolo desde el interior, proyectar un mapa rectangular igual en sus caras y luego extraer seis im√°genes de las caras como caras del mapa c√∫bico.  El sombreador de v√©rtices de esta etapa es bastante simple: simplemente procesa los v√©rtices del cubo tal como est√° y tambi√©n pasa sus posiciones sin reformar al sombreador de fragmentos para usarlo como un vector de muestra tridimensional: <br><br><pre> <code class="plaintext hljs">#version 330 core layout (location = 0) in vec3 aPos; out vec3 localPos; uniform mat4 projection; uniform mat4 view; void main() { localPos = aPos; gl_Position = projection * view * vec4(localPos, 1.0); }</code> </pre> <br>  En el sombreador de fragmentos, sombreamos cada cara del cubo como si estuvi√©ramos tratando de envolver suavemente el cubo con una hoja con un mapa igualmente rectangular.  Para hacer esto, se toma la direcci√≥n de la muestra transferida al sombreador de fragmentos, se procesa mediante magia trigonom√©trica especial y, en √∫ltima instancia, la selecci√≥n se realiza a partir de un mapa rectangular igual como si realmente fuera un mapa c√∫bico.  El resultado de la selecci√≥n se guarda directamente como el color del fragmento de la cara del cubo: <br><br><pre> <code class="plaintext hljs">#version 330 core out vec4 FragColor; in vec3 localPos; uniform sampler2D equirectangularMap; const vec2 invAtan = vec2(0.1591, 0.3183); vec2 SampleSphericalMap(vec3 v) { vec2 uv = vec2(atan(vz, vx), asin(vy)); uv *= invAtan; uv += 0.5; return uv; } void main() { // localPos   vec2 uv = SampleSphericalMap(normalize(localPos)); vec3 color = texture(equirectangularMap, uv).rgb; FragColor = vec4(color, 1.0); }</code> </pre> <br>  Si realmente dibuja un cubo con este sombreador y un mapa de entorno HDR asociado, obtendr√° algo como esto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wi/xl/u2/wixlu2m9jwpr9d6oakhw7_nqcqa.png"></div><br>  Es decir  Se puede ver que, de hecho, proyectamos una textura rectangular en un cubo.  Genial, pero ¬øc√≥mo nos ayudar√° esto a crear un mapa c√∫bico real?  Para finalizar esta tarea, es necesario renderizar el mismo cubo 6 veces con una c√°mara mirando cada una de las caras, mientras escribe la salida en un objeto de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">b√∫fer de cuadro</a> separado: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> captureFBO, captureRBO; glGenFramebuffers(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;captureFBO); glGenRenderbuffers(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;captureRBO); glBindFramebuffer(GL_FRAMEBUFFER, captureFBO); glBindRenderbuffer(GL_RENDERBUFFER, captureRBO); glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT24, <span class="hljs-number"><span class="hljs-number">512</span></span>, <span class="hljs-number"><span class="hljs-number">512</span></span>); glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, captureRBO);</code> </pre> <br>  Por supuesto, no olvidaremos organizar la memoria para almacenar cada una de las seis caras del futuro mapa c√∫bico: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> envCubemap; glGenTextures(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;envCubemap); glBindTexture(GL_TEXTURE_CUBE_MAP, envCubemap); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">6</span></span>; ++i) { <span class="hljs-comment"><span class="hljs-comment">//  ,     // 16     glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, GL_RGB16F, 512, 512, 0, GL_RGB, GL_FLOAT, nullptr); } glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span></code> </pre><br>  Despu√©s de esta preparaci√≥n, solo queda llevar a cabo la transferencia de partes de un mapa rectangular igual directamente al mapa c√∫bico. <br><br>  No entraremos en demasiados detalles, especialmente porque el c√≥digo se repite mucho visto en las lecciones sobre el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">b√∫fer de cuadros</a> y las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sombras omnidireccionales</a> .  En principio, todo se reduce a preparar seis matrices de vista separadas que orientan la c√°mara estrictamente a cada una de las caras del cubo, as√≠ como una matriz de proyecci√≥n especial con un √°ngulo de visi√≥n de 90 ¬∞ para capturar toda la cara del cubo.  Luego, solo seis veces, se realiza el renderizado y el resultado se guarda en un framebuffer de punto flotante: <br><br><pre> <code class="cpp hljs">glm::mat4 captureProjection = glm::perspective(glm::radians(<span class="hljs-number"><span class="hljs-number">90.0f</span></span>), <span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.1f</span></span>, <span class="hljs-number"><span class="hljs-number">10.0f</span></span>); glm::mat4 captureViews[] = { glm::lookAt(glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), glm::vec3( <span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>)), glm::lookAt(glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), glm::vec3(<span class="hljs-number"><span class="hljs-number">-1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>)), glm::lookAt(glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), glm::vec3( <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>)), glm::lookAt(glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), glm::vec3( <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>)), glm::lookAt(glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), glm::vec3( <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>), glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>)), glm::lookAt(glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>), glm::vec3( <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>), glm::vec3(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>)) }; <span class="hljs-comment"><span class="hljs-comment">//  HDR        equirectangularToCubemapShader.use(); equirectangularToCubemapShader.setInt("equirectangularMap", 0); equirectangularToCubemapShader.setMat4("projection", captureProjection); glActiveTexture(GL_TEXTURE0); glBindTexture(GL_TEXTURE_2D, hdrTexture); //         glViewport(0, 0, 512, 512); glBindFramebuffer(GL_FRAMEBUFFER, captureFBO); for (unsigned int i = 0; i &lt; 6; ++i) { equirectangularToCubemapShader.setMat4("view", captureViews[i]); glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, envCubemap, 0); glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); renderCube(); //    } glBindFramebuffer(GL_FRAMEBUFFER, 0);</span></span></code> </pre><br>  Aqu√≠ usamos el archivo adjunto del color del b√∫fer de marco y cambiamos alternativamente la cara conectada del mapa c√∫bico, lo que conduce a la salida directa del renderizado a una de las caras del mapa del entorno.  Este c√≥digo debe ejecutarse solo una vez, despu√©s de lo cual <i>a√∫n tendremos un</i> mapa de entorno <i>envCubemap</i> completo que contiene el resultado de convertir la versi√≥n original de <i>formato</i> rectangular igual del mapa de entorno HDR. <br><br>  Probamos el mapa c√∫bico resultante al dibujar el sombreador de skybox m√°s simple: <br><br><pre> <code class="plaintext hljs">#version 330 core layout (location = 0) in vec3 aPos; uniform mat4 projection; uniform mat4 view; out vec3 localPos; void main() { localPos = aPos; //         mat4 rotView = mat4(mat3(view)); vec4 clipPos = projection * rotView * vec4(localPos, 1.0); gl_Position = clipPos.xyww; }</code> </pre><br>  Preste atenci√≥n al truco con los componentes del vector <i>clipPos</i> : usamos la t√©trada <i>xyww</i> cuando registramos la coordenada transformada del v√©rtice para asegurar que todos los fragmentos del skybox tengan una profundidad m√°xima de 1.0 (el enfoque ya se us√≥ en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lecci√≥n correspondiente</a> ).  No olvide cambiar la funci√≥n de comparaci√≥n a <i>GL_LEQUAL</i> : <br><br><pre> <code class="cpp hljs">glDepthFunc(GL_LEQUAL);</code> </pre> <br>  El sombreador de fragmentos simplemente selecciona de un mapa c√∫bico: <br><br><pre> <code class="plaintext hljs">#version 330 core out vec4 FragColor; in vec3 localPos; uniform samplerCube environmentMap; void main() { vec3 envColor = texture(environmentMap, localPos).rgb; envColor = envColor / (envColor + vec3(1.0)); envColor = pow(envColor, vec3(1.0/2.2)); FragColor = vec4(envColor, 1.0); }</code> </pre> <br>  La selecci√≥n del mapa se basa en las coordenadas locales interpoladas de los v√©rtices del cubo, que es la direcci√≥n correcta de la selecci√≥n en este caso (nuevamente, discutido en la lecci√≥n sobre skyboxes, <i>aprox. Por.</i> ).  Dado que los componentes de transporte en la matriz de vista fueron ignorados, el renderizado del skybox no depender√° de la posici√≥n del observador, creando la ilusi√≥n de un fondo infinitamente distante.  Dado que aqu√≠ enviamos datos directamente desde la tarjeta HDR al framebuffer predeterminado, que es el receptor LDR, es necesario recuperar la compresi√≥n tonal.  Y finalmente, casi todas las tarjetas HDR se almacenan en un espacio lineal, lo que significa que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la correcci√≥n gamma</a> debe aplicarse como el acorde de procesamiento final. <br><br>  Entonces, al generar el skybox obtenido, junto con la ya familiar matriz de esferas, se obtiene algo similar: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/s8/-3/vx/s8-3vxu5dhzhrwm1adtb5uwffga.png"></div><br>  Bueno, se gast√≥ mucho esfuerzo, pero al final nos acostumbramos con √©xito a leer el mapa del entorno HDR, convertirlo de un mapa equil√°tero a un mapa c√∫bico y generar el mapa c√∫bico HDR como un cuadro de cielo en la escena.  Adem√°s, el c√≥digo para convertir a un mapa c√∫bico mediante la representaci√≥n en seis caras de un mapa c√∫bico es √∫til para nosotros m√°s adelante en la tarea de <i>convoluci√≥n de un mapa de entorno</i> .  El c√≥digo para todo el proceso de conversi√≥n est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br><h2>  Convoluci√≥n de una carta c√∫bica </h2><br>  Como se dijo al comienzo de la lecci√≥n, nuestro objetivo principal es resolver la integral para todas las direcciones posibles de iluminaci√≥n difusa indirecta, teniendo en cuenta la irradiaci√≥n dada de la escena en forma de un mapa c√∫bico del entorno.  Se sabe que podemos obtener el valor del brillo energ√©tico de la escena. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-661"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-662">L</span><span class="MJXp-mo" id="MJXp-Span-663" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-664">p</span><span class="MJXp-mo" id="MJXp-Span-665" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-666"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-667" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-668" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-669" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> L (p, w_i) </script>  para direcci√≥n arbitraria <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-670"><span class="MJXp-msubsup" id="MJXp-Span-671"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-672" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-673" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> w_i </script>  al tomar muestras del HDR de un mapa c√∫bico del entorno en esa direcci√≥n.  Para resolver la integral, ser√° necesario tomar muestras del brillo energ√©tico de la escena desde todas las direcciones posibles en el hemisferio. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-674"><span class="MJXp-mtext" id="MJXp-Span-675">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-676">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-677">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-678">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-680">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> \ Omega </script>  cada fragmento revisado <br>  Obviamente, la tarea de muestrear la iluminaci√≥n del ambiente desde todas las direcciones posibles en el hemisferio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-681"><span class="MJXp-mtext" id="MJXp-Span-682">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-683">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-684">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-685">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-686">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-687">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34"> \ Omega </script>  es computacionalmente imposible: hay un n√∫mero infinito de tales direcciones.  Sin embargo, es posible aplicar la aproximaci√≥n tomando un n√∫mero finito de direcciones elegidas al azar o ubicadas uniformemente dentro del hemisferio.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto nos permitir√° obtener una aproximaci√≥n bastante buena a la irradiaci√≥n verdadera, esencialmente resolviendo la integral que nos interesa en forma de suma finita. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero para las tareas en tiempo real, incluso este enfoque sigue siendo incre√≠blemente impuesto, porque las muestras se toman para cada fragmento y el n√∫mero de muestras debe ser lo suficientemente alto para obtener un resultado aceptable. </font><font style="vertical-align: inherit;">Por lo tanto, ser√≠a bueno </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preparar de antemano los</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> datos para este paso, fuera del proceso de representaci√≥n. </font><font style="vertical-align: inherit;">Dado que la orientaci√≥n del hemisferio determina desde qu√© regi√≥n del espacio capturamos la irradiaci√≥n, es posible calcular de antemano la irradiaci√≥n para cada posible orientaci√≥n del hemisferio en funci√≥n de todas las direcciones salientes posibles</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-688"><span class="MJXp-msubsup" id="MJXp-Span-689"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-691" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35">w_o</script><font style="vertical-align: inherit;"></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-692"><span class="MJXp-msubsup" id="MJXp-Span-693"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-695" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-696" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-697"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-698" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-699"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-700" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-701" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-702" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mo" id="MJXp-Span-703" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-704"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-705" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-706" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span></span><span class="MJXp-mfrac" id="MJXp-Span-707" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-708"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-709"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œÄ</font></font></span></span></span></span></span></span><span class="MJXp-munderover" id="MJXp-Span-710"><span class=""><span class="MJXp-mo" id="MJXp-Span-711" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚à´</font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-712" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-713"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ©</font></font></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-714"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-715" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-716" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-717" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-718"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-mo" id="MJXp-Span-719" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-720"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-721" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-722" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-723" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-724"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-725" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-726"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-727" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-728" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-729"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-730"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-732" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-36">L_o(p,\omega_o) = k_d\frac{c}{\pi} \int\limits_{\Omega} L_i(p,\omega_i) n \cdot \omega_i d\omega_i</script></p><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como resultado, para un vector arbitrario dado </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-733"><span class="MJXp-msubsup" id="MJXp-Span-734"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-735" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-736" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , podemos tomar muestras del mapa de irradiancia calculado para obtener la irradiancia difusa en esta direcci√≥n. </font><font style="vertical-align: inherit;">Para determinar la magnitud de la radiaci√≥n difusa indirecta en el punto del fragmento actual, tomamos la irradiaci√≥n total desde un hemisferio orientado a lo largo de la superficie normal al fragmento. </font><font style="vertical-align: inherit;">En otras palabras, obtener la irradiaci√≥n de una escena se reduce a una simple selecci√≥n:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37">w_i</script><font style="vertical-align: inherit;"></font><br><br><pre> <code class="plaintext hljs"> vec3 irradiance = texture(irradianceMap, N);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adem√°s, para crear un mapa de irradiaci√≥n, es necesario convolver el mapa del entorno, convertido en un mapa c√∫bico. </font><font style="vertical-align: inherit;">Sabemos que para cada fragmento su hemisferio se considera orientado a lo largo de lo normal a la superficie</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-737"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-738"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38"> N </script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En este caso, la convoluci√≥n del mapa c√∫bico se reduce al c√°lculo de la cantidad promedio de brillo de energ√≠a desde todas las direcciones. </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-739"><span class="MJXp-msubsup" id="MJXp-Span-740"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-741" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-742" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dentro del hemisferio</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39">w_i</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-743"><span class="MJXp-mi" id="MJXp-Span-744"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ©</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> orientado a lo largo de lo normal</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40">\Omega</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-745"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-746"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41"> N </script><font style="vertical-align: inherit;"></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yc/ip/a2/ycipa25cnkcvhxdqcvrfbqqozvg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Afortunadamente, el trabajo preliminar que llev√≥ mucho tiempo que hicimos al comienzo de la lecci√≥n ahora har√° que sea bastante f√°cil convertir el mapa del entorno en un mapa c√∫bico en un sombreador de fragmentos especial, cuya salida se utilizar√° para formar un nuevo mapa c√∫bico. </font><font style="vertical-align: inherit;">Para esto, es √∫til el mismo fragmento de c√≥digo que se us√≥ para traducir un mapa de entorno rectangular igual en un mapa c√∫bico. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solo queda tomar otro sombreador de procesamiento:</font></font><br><br><pre> <code class="plaintext hljs">#version 330 core out vec4 FragColor; in vec3 localPos; uniform samplerCube environmentMap; const float PI = 3.14159265359; void main() { //       vec3 normal = normalize(localPos); vec3 irradiance = vec3(0.0); [...] //   FragColor = vec4(irradiance, 1.0); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠, el sampler </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">environmentMap</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un mapa c√∫bico HDR del entorno previamente derivado de un equil√°tero. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hay muchas formas de convolucionar el mapa del entorno. En este caso, para cada texel del mapa c√∫bico, generaremos varios vectores de muestra del hemisferio</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-747"><span class="MJXp-mi" id="MJXp-Span-748"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ©</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , orientado a lo largo de la direcci√≥n de la muestra, y promediar los resultados. </font><font style="vertical-align: inherit;">El n√∫mero de vectores de muestra ser√° fijo, y los propios vectores se distribuir√°n uniformemente dentro del hemisferio. </font><font style="vertical-align: inherit;">Observo que el integrando es una funci√≥n continua, y una estimaci√≥n discreta de esta funci√≥n ser√° solo una aproximaci√≥n. </font><font style="vertical-align: inherit;">Y cuantos m√°s vectores de muestreo tomemos, m√°s cerca estaremos de la soluci√≥n anal√≠tica de la integral. </font><font style="vertical-align: inherit;">El integrando de la expresi√≥n para reflectividad depende del √°ngulo s√≥lido</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42">\Omega</script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-749"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-750"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-751"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : valores con los que no es muy conveniente trabajar. </font><font style="vertical-align: inherit;">En lugar de integrarse sobre un √°ngulo s√≥lido</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-43">dw</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-752"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-753"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-754"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cambiamos la expresi√≥n, lo que lleva a la integraci√≥n sobre coordenadas esf√©ricas</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44">dw</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-755"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-756"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45">\theta</script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-757"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-758"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œï</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-46">\phi</script><font style="vertical-align: inherit;"></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vx/8c/_r/vx8c_rphv4hhjo4xwhbduqhoslu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El √°ngulo Phi representar√° el acimut en el plano de la base del hemisferio, variando de 0 a </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-759"><span class="MJXp-mn" id="MJXp-Span-760"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-761"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œÄ</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-47">2\pi</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √Ångulo </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-762"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-763"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> representar√° el √°ngulo de elevaci√≥n, que var√≠a de 0 a</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-48">\theta</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-764"><span class="MJXp-mfrac" id="MJXp-Span-765" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mn" id="MJXp-Span-766"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-mn" id="MJXp-Span-767"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-768"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œÄ</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-49">\frac{1}{2}\pi</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La expresi√≥n modificada para la reflectividad en tales t√©rminos es la siguiente: </font></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-769"><span class="MJXp-msubsup" id="MJXp-Span-770"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-771" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-772" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-773" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-774"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-775" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-776"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-777" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œï </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-778" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-779" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-780"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-781" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-782" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-783" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mo" id="MJXp-Span-784" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-785"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-786" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-787" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span></span><span class="MJXp-mfrac" id="MJXp-Span-788" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-789"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-790"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œÄ</font></font></span></span></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-791"><span class="MJXp-mo" id="MJXp-Span-792" style="margin-left: 0em; margin-right: 0.05em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚à´</font></font></span></span><span class="MJXp-script-box" style="height: 2.1em; vertical-align: -0.7em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-797"><span class="MJXp-mn" id="MJXp-Span-798"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2 </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-799"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œÄ </font></font></span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-793"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-794"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œï </font></font></span><span class="MJXp-mo" id="MJXp-Span-795"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-796"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-800"><span class="MJXp-mo" id="MJXp-Span-801" style="margin-left: 0em; margin-right: 0.05em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚à´</font></font></span></span><span class="MJXp-script-box" style="height: 2.66em; vertical-align: -0.7em;"><span class=" MJXp-script"><span><span style="margin-bottom: -1.05em;"><span class="MJXp-mrow" id="MJXp-Span-806"><span class="MJXp-mfrac" id="MJXp-Span-807" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mn" id="MJXp-Span-808"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-mn" id="MJXp-Span-809"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-810"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> œÄ</font></font></span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -1.55em;"><span class="MJXp-mrow" id="MJXp-Span-802"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-803"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏</font></font></span><span class="MJXp-mo" id="MJXp-Span-804"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><span class="MJXp-mn" id="MJXp-Span-805"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-811"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-812" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-813" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-814" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-815"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-mo" id="MJXp-Span-816" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-817"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-818" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œï</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-819" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-820" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-821"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-822" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-823" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-824" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi" id="MJXp-Span-825"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cos</font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mo" id="MJXp-Span-827" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">(</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-828"><font style="vertical-align: inherit;">Œ∏</font></span><span class="MJXp-mo" id="MJXp-Span-829" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">)</font></span><span class="MJXp-mi" id="MJXp-Span-830"><font style="vertical-align: inherit;">sin</font></span><span class="MJXp-mo" id="MJXp-Span-832" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">(</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-833"><font style="vertical-align: inherit;">Œ∏</font></span><span class="MJXp-mo" id="MJXp-Span-834" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">)</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-835"><font style="vertical-align: inherit;">d</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-836"><font style="vertical-align: inherit;">œï</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-837"><font style="vertical-align: inherit;">d</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-838"><font style="vertical-align: inherit;">Œ∏</font></span></font><span class="MJXp-mo" id="MJXp-Span-826" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-827" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-828"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-829" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi" id="MJXp-Span-830"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-831" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-832" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-833"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-834" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-835"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-836"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-837"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-838"><font style="vertical-align: inherit;"></font></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-50">L_o(p,\phi_o, \theta_o) = k_d\frac{c}{\pi} \int_{\phi = 0}^{2\pi} \int_{\theta = 0}^{\frac{1}{2}\pi} L_i(p,\phi_i, \theta_i) \cos(\theta) \sin(\theta) d\phi d\theta</script></p><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La soluci√≥n de tal integral requerir√° tomar un n√∫mero finito de muestras en el hemisferio </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-839"><span class="MJXp-mi" id="MJXp-Span-840"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ©</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y promediando los resultados. </font><font style="vertical-align: inherit;">Saber la cantidad de muestras</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51">\Omega</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-841"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-842"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mn" id="MJXp-Span-843"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52">n1</script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-844"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-845"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mn" id="MJXp-Span-846"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cada una de las coordenadas esf√©ricas, podemos traducir la integral a la</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">suma riemanniana</font></a><font style="vertical-align: inherit;">:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53">n2</script><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-847"><span class="MJXp-msubsup" id="MJXp-Span-848"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-849" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-850" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-851" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-852"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-853" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-854"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-855" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œï </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-856" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-857" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-858"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-859" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-860" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-861" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mo" id="MJXp-Span-862" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-863"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-864" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-865" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span></span><span class="MJXp-mfrac" id="MJXp-Span-866" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-867"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-868"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œÄ</font></font></span></span></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-869" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-870"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-871"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mn" id="MJXp-Span-872"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-873"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mn" id="MJXp-Span-874"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span></span></span></span></span></span><span class="MJXp-munderover" id="MJXp-Span-875"><span><span class="MJXp-over"><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-881" style="margin-right: 0px; margin-left: 0px;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-882"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mn" id="MJXp-Span-883"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span></span></span><span class=""><span class="MJXp-mo" id="MJXp-Span-876" style="margin-left: 0.111em; margin-right: 0.167em;"><span class="MJXp-largeop"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚àë</font></font></span></span></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-877" style="margin-left: 0px;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-878"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> œï</font></font></span><span class="MJXp-mo" id="MJXp-Span-879"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><span class="MJXp-mn" id="MJXp-Span-880"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><span class="MJXp-munderover" id="MJXp-Span-884"><span><span class="MJXp-over"><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-890" style="margin-right: 0px; margin-left: 0px;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-891"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n </font></font></span><span class="MJXp-mn" id="MJXp-Span-892"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span></span></span><span class=""><span class="MJXp-mo" id="MJXp-Span-885" style="margin-left: 0.111em; margin-right: 0.167em;"><span class="MJXp-largeop"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚àë</font></font></span></span></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-886" style="margin-left: 0px;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-887"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Œ∏</font></font></span><span class="MJXp-mo" id="MJXp-Span-888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><span class="MJXp-mn" id="MJXp-Span-889"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-893"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-894" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-895" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-896" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-897"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-mo" id="MJXp-Span-898" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-899"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-900" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œï</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-901" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-902" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-903"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-904" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-905" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-906" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi" id="MJXp-Span-907"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cos</font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mo" id="MJXp-Span-909" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">(</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-910"><font style="vertical-align: inherit;">Œ∏</font></span><span class="MJXp-mo" id="MJXp-Span-911" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">)</font></span><span class="MJXp-mi" id="MJXp-Span-912"><font style="vertical-align: inherit;">sin</font></span><span class="MJXp-mo" id="MJXp-Span-914" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">(</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-915"><font style="vertical-align: inherit;">Œ∏</font></span><span class="MJXp-mo" id="MJXp-Span-916" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">)</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-917"><font style="vertical-align: inherit;">d</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-918"><font style="vertical-align: inherit;">œï</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-919"><font style="vertical-align: inherit;">d</font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-920"><font style="vertical-align: inherit;">Œ∏</font></span></font><span class="MJXp-mo" id="MJXp-Span-908" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-909" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-910"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-911" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi" id="MJXp-Span-912"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-913" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-914" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-915"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-916" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-917"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-918"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-919"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-920"><font style="vertical-align: inherit;"></font></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-54">L_o(p,\phi_o, \theta_o) = k_d\frac{c}{\pi} \frac{1}{n1 n2} \sum_{\phi = 0}^{n1} \sum_{\theta = 0}^{n2} L_i(p,\phi_i, \theta_i) \cos(\theta) \sin(\theta) d\phi d\theta</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dado que ambas coordenadas esf√©ricas var√≠an discretamente, en cada momento, el muestreo se realiza con un √°rea promedio determinada en el hemisferio, como se puede ver en la figura anterior. </font><font style="vertical-align: inherit;">Debido a la naturaleza de la superficie esf√©rica, el tama√±o del √°rea de muestreo discreto disminuye inevitablemente al aumentar el √°ngulo de elevaci√≥n</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-921"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-922"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y acerc√°ndose al cenit. </font><font style="vertical-align: inherit;">Para compensar este efecto de reducir el √°rea, agregamos un coeficiente de peso a la expresi√≥n</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55">\theta</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-923"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-924"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-925"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-926"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-927"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56">sin\theta</script>  . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como resultado, la implementaci√≥n del muestreo discreto en el hemisferio basado en coordenadas esf√©ricas para cada fragmento en forma de c√≥digo es la siguiente: </font></font><br><br><pre> <code class="plaintext hljs">vec3 irradiance = vec3(0.0); vec3 up = vec3(0.0, 1.0, 0.0); vec3 right = cross(up, normal); up = cross(normal, right); float sampleDelta = 0.025; float nrSamples = 0.0; for(float phi = 0.0; phi &lt; 2.0 * PI; phi += sampleDelta) { for(float theta = 0.0; theta &lt; 0.5 * PI; theta += sampleDelta) { //   .   (  -) vec3 tangentSample = vec3(sin(theta) * cos(phi), sin(theta) * sin(phi), cos(theta)); //      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * N; irradiance += texture(environmentMap, sampleVec).rgb * cos(theta) * sin(theta); nrSamples++; } } irradiance = PI * irradiance * (1.0 / float(nrSamples));</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La variable </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sampleDelta</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> determina el tama√±o del paso discreto a lo largo de la superficie del hemisferio. Al cambiar este valor, puede aumentar o disminuir la precisi√≥n del resultado. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dentro de ambos ciclos, se forma un vector de muestra tridimensional regular a partir de coordenadas esf√©ricas, se transfiere de la tangente al espacio mundial y luego se usa para muestrear un mapa de entorno c√∫bico desde el HDR. El resultado de las muestras se acumula en la variable de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">irradiancia</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que al final del procesamiento se dividir√° por el n√∫mero de muestras realizadas para obtener un valor promedio de irradiaci√≥n. Tenga en cuenta que el resultado del muestreo de la textura se modula en dos cantidades: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cos (theta)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : para tener en cuenta la atenuaci√≥n de la luz en √°ngulos grandes y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sin (theta)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- para compensar la reducci√≥n en el √°rea de muestra al acercarse al cenit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solo queda tratar con el c√≥digo que representa y captura los resultados de la convoluci√≥n del </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mapa del</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entorno </font><i><font style="vertical-align: inherit;">envCubemap</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Primero, cree un mapa c√∫bico para almacenar la irradiaci√≥n (deber√° hacerlo una vez, antes de ingresar al ciclo de renderizado principal):</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> irradianceMap; glGenTextures(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;irradianceMap); glBindTexture(GL_TEXTURE_CUBE_MAP, irradianceMap); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">6</span></span>; ++i) { glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, <span class="hljs-number"><span class="hljs-number">0</span></span>, GL_RGB16F, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, GL_RGB, GL_FLOAT, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>); } glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dado que el mapa de irradiaci√≥n se obtiene promediando muestras distribuidas uniformemente del brillo de la energ√≠a del mapa ambiental, pr√°cticamente no contiene partes y elementos de alta frecuencia; una textura de resoluci√≥n bastante baja (32x32 aqu√≠) y un filtrado lineal habilitado ser√°n suficientes para almacenarlo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A continuaci√≥n, configure el framebuffer de captura a esta resoluci√≥n:</font></font><br><br><pre> <code class="cpp hljs">glBindFramebuffer(GL_FRAMEBUFFER, captureFBO); glBindRenderbuffer(GL_RENDERBUFFER, captureRBO); glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT24, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El c√≥digo para capturar los resultados de convoluci√≥n es similar al c√≥digo para transferir un mapa de entorno de uno equil√°tero a uno c√∫bico, solo se usa un sombreador de convoluci√≥n: </font></font><br><br><pre> <code class="cpp hljs">irradianceShader.use(); irradianceShader.setInt(<span class="hljs-string"><span class="hljs-string">"environmentMap"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); irradianceShader.setMat4(<span class="hljs-string"><span class="hljs-string">"projection"</span></span>, captureProjection); glActiveTexture(GL_TEXTURE0); glBindTexture(GL_TEXTURE_CUBE_MAP, envCubemap); <span class="hljs-comment"><span class="hljs-comment">//        glViewport(0, 0, 32, 32); glBindFramebuffer(GL_FRAMEBUFFER, captureFBO); for (unsigned int i = 0; i &lt; 6; ++i) { irradianceShader.setMat4("view", captureViews[i]); glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, irradianceMap, 0); glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); renderCube(); } glBindFramebuffer(GL_FRAMEBUFFER, 0);</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despu√©s de completar esta etapa, tendremos un mapa de irradiaci√≥n precalculado en nuestras manos que se puede usar directamente para calcular la iluminaci√≥n difusa indirecta. </font><font style="vertical-align: inherit;">Para verificar c√≥mo fue la convoluci√≥n, intentaremos reemplazar la textura del skybox del mapa del entorno con el mapa de irradiaci√≥n:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mt/gc/cs/mtgccsxl0h80cdo1gg8wgl3tp9m.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Si, como resultado, viste algo que parec√≠a un mapa muy borroso del entorno, entonces, muy probablemente, la convoluci√≥n fue exitosa. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PBR e iluminaci√≥n indirecta </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El mapa de irradiaci√≥n resultante se usa en la parte difusa de la expresi√≥n dividida de reflectividad y representa la contribuci√≥n acumulada de todas las direcciones posibles de iluminaci√≥n indirecta. </font><font style="vertical-align: inherit;">Dado que en este caso la luz no proviene de fuentes espec√≠ficas, sino del entorno en su conjunto, consideramos la iluminaci√≥n indirecta difusa y espejo como fondo ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ambiente</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), reemplazando el valor constante utilizado anteriormente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para empezar, no olvide agregar una nueva muestra con un mapa de irradiaci√≥n:</font></font><br><br><pre> <code class="plaintext hljs">uniform samplerCube irradianceMap;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tener un mapa de irradiaci√≥n que almacena toda la informaci√≥n sobre la radiaci√≥n difusa indirecta desde la escena y la normal a la superficie, obtener datos sobre la irradiaci√≥n de un fragmento en particular es tan simple como hacer una muestra de la textura: </font></font><br><br><pre> <code class="plaintext hljs">// vec3 ambient = vec3(0.03); vec3 ambient = texture(irradianceMap, N).rgb;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, dado que la radiaci√≥n indirecta contiene datos para los componentes difusos y espejo (como vimos en la versi√≥n componente de la expresi√≥n de reflectividad), necesitamos modular el componente difuso de una manera especial. </font><font style="vertical-align: inherit;">Como en la lecci√≥n anterior, usamos la expresi√≥n de Fresnel para determinar el grado de reflexi√≥n de la luz para una superficie dada, de donde obtenemos el grado de refracci√≥n de la luz o el coeficiente difuso:</font></font><br><br><pre> <code class="plaintext hljs">vec3 kS = fresnelSchlick(max(dot(N, V), 0.0), F0); vec3 kD = 1.0 - kS; vec3 irradiance = texture(irradianceMap, N).rgb; vec3 diffuse = irradiance * albedo; vec3 ambient = (kD * diffuse) * ao;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A medida que la iluminaci√≥n de fondo cae desde todas las direcciones en el hemisferio en funci√≥n de la superficie normal </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-928"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-929"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es imposible determinar la √∫nica mediana (a</font><i><font style="vertical-align: inherit;">mitad de camino</font></i></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> N </script><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) vector para calcular el coeficiente de Fresnel. Para simular el efecto Fresnel en tales condiciones, es necesario calcular el coeficiente basado en el √°ngulo entre el vector normal y el vector de observaci√≥n. Sin embargo, anteriormente, como par√°metro para calcular el coeficiente de Fresnel, utilizamos el vector mediano obtenido en base al modelo de micro superficies y dependiendo de la rugosidad de la superficie. Como en este caso, la rugosidad no se incluye en los par√°metros de c√°lculo, el grado de reflexi√≥n de la luz por la superficie siempre se sobreestimar√°. La iluminaci√≥n indirecta en su conjunto debe comportarse igual que la iluminaci√≥n directa, es decir. de superficies rugosas esperamos un menor grado de reflexi√≥n en los bordes. Pero como la aspereza no se tiene en cuenta,entonces el grado de reflexi√≥n especular seg√∫n Fresnel para la iluminaci√≥n indirecta parece poco realista en superficies rugosas no met√°licas (en la imagen a continuaci√≥n, el efecto descrito se exagera para una mayor claridad):</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q2/oc/ly/q2oclypt9x6lcg5yyaqr4d8hu9i.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede evitar esta molestia introduciendo aspereza en la expresi√≥n de Fremlin-Schlick, un proceso descrito por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√©bastien Lagarde</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre> <code class="plaintext hljs">vec3 fresnelSchlickRoughness(float cosTheta, vec3 F0, float roughness) { return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - cosTheta, 5.0); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dada la rugosidad de la superficie al calcular el conjunto de Fresnel, el c√≥digo para calcular el componente de fondo toma la siguiente forma: </font></font><br><br><pre> <code class="plaintext hljs">vec3 kS = fresnelSchlickRoughness(max(dot(N, V), 0.0), F0, roughness); vec3 kD = 1.0 - kS; vec3 irradiance = texture(irradianceMap, N).rgb; vec3 diffuse = irradiance * albedo; vec3 ambient = (kD * diffuse) * ao;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al final result√≥ que, el uso de iluminaci√≥n basada en im√°genes se reduce inherentemente a una muestra de un mapa c√∫bico. </font><font style="vertical-align: inherit;">Todas las dificultades se asocian principalmente con la preparaci√≥n preliminar y la transferencia del mapa ambiental al mapa de irradiaci√≥n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tomando una escena familiar de una lecci√≥n sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fuentes de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> luz </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">anal√≠ticas que</font></a><font style="vertical-align: inherit;"> contienen una variedad de esferas con diferente metalicidad y aspereza, y agregando iluminaci√≥n de fondo difusa del ambiente, obtienes algo como esto:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vd/b1/y1/vdb1y1xddczspcyl-7exei76lxw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todav√≠a parece extra√±o, ya que los materiales con un alto grado de metalicidad a√∫n </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requieren</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> reflexi√≥n para verse realmente, hmm, metal (los metales no reflejan una iluminaci√≥n difusa, despu√©s de todo). </font><font style="vertical-align: inherit;">Y en este caso, las √∫nicas reflexiones obtenidas de fuentes de luz anal√≠ticas puntuales. </font><font style="vertical-align: inherit;">Y, sin embargo, ya podemos decir que las esferas se ven m√°s inmersas en el entorno (especialmente notable al cambiar los mapas del entorno), ya que las superficies ahora responden correctamente a la iluminaci√≥n de fondo del entorno de la escena. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El c√≥digo fuente completo de la lecci√≥n est√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En la pr√≥xima lecci√≥n, finalmente abordaremos la segunda mitad de la expresi√≥n de reflectividad, que es responsable de la iluminaci√≥n especular indirecta. </font><font style="vertical-align: inherit;">Despu√©s de este paso, realmente sentir√° el poder del enfoque PBR en la iluminaci√≥n.</font></font><br><br><h2>  Materiales adicionales </h2><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laboratorios de codificaci√≥n: representaci√≥n basada en la f√≠sica</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : una introducci√≥n al modelo PBR junto con una explicaci√≥n de c√≥mo se construye el mapa de irradiaci√≥n y por qu√©.</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Mathematics of Shading</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Una breve descripci√≥n de ScratchAPixel sobre algunas de las t√©cnicas matem√°ticas utilizadas en esta lecci√≥n, en particular sobre coordenadas polares e integrales.</font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Tenemos un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">telegrama conf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para la coordinaci√≥n de transferencias. </font><font style="vertical-align: inherit;">Si tiene un serio deseo de ayudar con la traducci√≥n, ¬°de nada!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es426987/">https://habr.com/ru/post/es426987/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es426977/index.html">LibreOffice: la pesadilla del contador</a></li>
<li><a href="../es426979/index.html">C√≥mo aprender ingl√©s gratis: 3 herramientas comunes e instrucciones detalladas para cada</a></li>
<li><a href="../es426981/index.html">10 trucos para tablero avanzado en Splunk. Parte 1</a></li>
<li><a href="../es426983/index.html">Nuevo en SObjectizer-5.5.23: ¬øCumplimiento de los deseos o la caja de Pandora?</a></li>
<li><a href="../es426985/index.html">Kubebox y otros cascos de consola para Kubernetes</a></li>
<li><a href="../es426991/index.html">Startup Digest: 10 pr√≥ximos eventos de TI en Mosc√∫</a></li>
<li><a href="../es426993/index.html">¬øNecesito aprender C para entender c√≥mo funciona una computadora?</a></li>
<li><a href="../es426995/index.html">El reciclaje perjudica tanto a los productos como a los empleados.</a></li>
<li><a href="../es426997/index.html">C√≥mo crear formas personalizadas con MaterialShapeDrawable</a></li>
<li><a href="../es426999/index.html">Seguir las tendencias o avanzar hacia RxJava y LiveData</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>