<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title> 锔  Ingenier铆a inversa Yandex. Protocolo de activaci贸n de estaci贸n 达  </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Yandex.Station es un altavoz inteligente con asistente de voz Alice. Para activarlo, debe traer el tel茅fono y reproducir el sonido de la aplicaci贸n Ya...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ingenier铆a inversa Yandex. Protocolo de activaci贸n de estaci贸n</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469435/"><img src="https://habrastorage.org/webt/_r/1r/de/_r1rdewpmo6uagc5cghgihry6jg.png"><br><br>  Yandex.Station es un altavoz inteligente con asistente de voz Alice.  Para activarlo, debe traer el tel茅fono y reproducir el sonido de la aplicaci贸n Yandex.  Debajo del corte, le dir茅 c贸mo funciona esta se帽al, sobre la <b>contrase帽a para WiFi en forma abierta</b> e intentar茅 desarrollar la idea de transmitir datos a trav茅s del sonido. <br><a name="habracut"></a><br><h2>  Pre谩mbulo </h2><br>  Me gradu茅 de la facultad de ingenier铆a de radio de MIPT, estudi茅 y desarroll茅 sistemas de comunicaci贸n desde protocolos de capa f铆sica hasta redes federales.  Por lo tanto, cuando mis amigos presentaron Yandex.Station, inmediatamente me pregunt茅 c贸mo se organiz贸 la transferencia de datos para la activaci贸n a trav茅s del token de audio. <br><br><h2>  Proceso de activaci贸n </h2><br>  Cuando activa una nueva columna, de alguna manera necesita transferirle informaci贸n para conectarse a una red WiFi y autorizaci贸n en los servicios de Yandex.  En la estaci贸n, esto se hace a trav茅s del sonido y se ve como el video a continuaci贸n (7:34). <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/OaHzvcz8ncM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  "... la informaci贸n se transmite, bueno, no por sonido, por supuesto ..." - dice Valentin.  隆Habr铆a sabido que en ese momento su contrase帽a de WiFi entr贸 en el video en forma casi abierta!  Pero m谩s sobre eso m谩s tarde. <br><br>  Mientras tanto, considere lo que est谩 sucediendo.  El tel茅fono toma datos en la red WiFi (ssid del sistema, el usuario ingresa la contrase帽a) y datos para autorizaci贸n en Yandex.  De alguna manera est谩n codificados, modulados y emitidos por el altavoz del tel茅fono.  La estaci贸n demodula la se帽al de los micr贸fonos, decodifica los datos y los utiliza para conectarse a la red y autorizar. <br><br>  En este proceso, estamos interesados en c贸mo se <b>codifican</b> y <b>modulan los datos</b> . <br><br><h2>  Demodulaci贸n visual </h2><br>  Para obtener una muestra de se帽al, no se necesita la propia estaci贸n.  Solo es necesario que el tel茅fono est茅 conectado a WiFi con internet.  Decid铆 crear puntos de acceso con diferentes ssid y contrase帽as para ver c贸mo cambia la se帽al.  Por conveniencia, comenc茅 a grabar sonido en archivos y a trabajar con ellos. <br><br>  Primero, cre茅 un punto de acceso con una contrase帽a aleatoria "012345678" y le conect茅 un tel茅fono.  Hice clic en "Reproducir sonido" y grab茅 la se帽al resultante.  Veamos su espectro a lo largo del tiempo (cascada).  Aqu铆, el eje vertical representa la frecuencia, el eje horizontal representa el tiempo y el color est谩 determinado por la amplitud. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/1NQuD4N3mh4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Por lo tanto, se puede ver que se utiliza la modulaci贸n de frecuencia y los datos se transmiten en caracteres de 40 ms.  Tambi茅n puede resaltar la subsecuencia creciente: <br><br><img src="https://habrastorage.org/webt/vn/co/ig/vncoigs1qjmln8xfnbbkapmr86e.png"><br><br>  Basta!  Parece que ten铆amos una contrase帽a cada vez mayor.  "012345678".  驴C贸mo se ven estos n煤meros en codificaciones ascii o utf-8?  " <b>30 31 32 33 34 35 36 37 38.</b> "  Wow!  隆Ni siquiera tuve que cambiar la contrase帽a!  Aqu铆 esta: <br><br><img src="https://habrastorage.org/webt/6d/h-/og/6dh-ogsq6pwhul8wkkfpvzbhqny.png"><br><br>  Trat茅 de cambiar la contrase帽a y me asegur茅 de determinar correctamente su posici贸n en la se帽al. <br><br>  Resulta que los datos est谩n codificados en caracteres de 4 bits.  De hecho, se codifica una cadena hexadecimal, donde cada valor 0 - F tiene su propia frecuencia de 1 kHz a 4.6 kHz en pasos de 240 Hz.  Al mismo tiempo, al principio y al final de la transmisi贸n hay radiaci贸n a frecuencias superiores a 5 kHz: las marcas de inicio y fin est谩n separadas de la parte principal a nivel f铆sico. <br><br><h2>  Decodificaci贸n </h2><br>  Para no reescribir s铆mbolos en una hoja de papel cada vez que miro el espectro, dibuj茅 un simple receptor de Python que convierte el archivo de audio de manera suficientemente estable en la cadena hexadecimal original.  Comenc茅 a cambiar el ssid del punto de acceso y analizar qu茅 bytes afecta esto.  Como resultado, result贸 que la informaci贸n sobre ssid se almacena en dos bytes antes de la contrase帽a.  La longitud de este bloque no depende de la longitud de ssid.  驴C贸mo es eso? <br><br>  Probablemente solo se transmite un hash ssid a la estaci贸n.  En este caso, lo m谩s probable es que la estaci贸n despu茅s de encender calcula los hash de los nombres de todas las redes disponibles.  Luego selecciona la red, comparando los valores recibidos con los aceptados.  Lo m谩s probable es que esto se haya hecho para reducir la longitud del paquete.  (驴Pero c贸mo es la conexi贸n a redes ocultas?) <br><br>  Tambi茅n se ve que con alg煤n per铆odo hay inserciones de 4 caracteres.  En el espectro se pueden ver dos veces dentro de la contrase帽a.  Probablemente se trate de alg煤n tipo de codificaci贸n resistente al ruido o s铆mbolos de sincronizaci贸n. <br><br><img src="https://habrastorage.org/webt/jv/37/rf/jv37rfgtdsawelajxol3tjw57za.png"><br><br>  No pude asignar datos para autorizaci贸n en Yandex.  Sin embargo, la longitud del paquete es bastante peque帽a, por lo que podemos decir con certeza que no hay token OAuth en el paquete.  Supongo que la aplicaci贸n Yandex recibe un enlace temporal, parte del cual se transmite a la estaci贸n.  Y ella, a su vez, recibe informaci贸n completa de autenticaci贸n a trav茅s de este enlace.  Creo que esto tambi茅n se hizo para reducir la longitud del paquete. <br><br><h2>  Publicado en Yandex? </h2><br>  S铆, 8 de mayo de 2019. Recib铆 una respuesta autom谩tica: <br><br><img src="https://habrastorage.org/webt/wc/hs/xt/wchsxtohqkqdg-qnjxngxsxleni.png"><br><br>  Pasaron 4 meses y no se contact贸.  De acuerdo con las reglas de Yandex, ahora puede revelar informaci贸n, lo que, de hecho, hago. <br><br><h2>  驴Es esto un problema en absoluto? </h2><br>  Quiz谩s los empleados de Yandex no lo consideren un problema.  De hecho, dif铆cilmente se le puede llamar vulnerabilidad, porque la activaci贸n de la estaci贸n rara vez ocurre m谩s de 1 vez.  Adem谩s, a menudo se encuentra en una habitaci贸n "confiable".  En casa o en la oficina, puede pronunciar la contrase帽a de WiFi en voz alta, que es casi lo mismo.  Expertos en seguridad de la informaci贸n, 驴qu茅 opinas? <br><br>  Adem谩s, el algoritmo de activaci贸n ya se ha conectado a las estaciones fabricadas, por lo que es poco probable que pueda deshacerse de esta vulnerabilidad en la versi贸n actual. <br><br>  Sin embargo, creo que esta no es una raz贸n para ignorar los mensajes en bugbounty.  Por lo menos, no es educado prometer responder y no hacerlo.  Bien, supongamos que mi apelaci贸n se ha perdido en alguna parte.  En todo caso, n煤mero de boleto: 19050804473488035. <br><br>  Personalmente, creo que hay alg煤n tipo de vulnerabilidad.  Por lo tanto, a pesar de que tengo un receptor estable de esta se帽al, no puedo d谩rselo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_g/dj/bc/_gdjbcc129fhzjtbi_dowolwewi.png"></div><br>  Y tambi茅n, quiero recordarle a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wylsacom</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Rozetked</a> y otros bloggers sobre la necesidad de cambios regulares de contrase帽a.  Al menos s茅 lo que ten铆as en el momento de la revisi贸n de Yandex. <br><br><h2>  Cual es el resultado? </h2><br>  Los desarrolladores de Yandex hicieron algo genial.  Decoraron el proceso de activaci贸n de la estaci贸n, lo hicieron inusual.  El 煤nico problema, en mi opini贸n, es una contrase帽a abierta. <br><br>  Pero el mismo proceso podr铆a hacerse m谩s seguro usando Bluetooth.  Esto me hizo pensar que en este caso, la seguridad o la velocidad no son tan importantes.  Espect谩culo importante  La activaci贸n a trav茅s de sonidos que recuerdan a R2-D2 de Star Wars es impresionante y parece inusual. <br><br>  Esta posici贸n me inspir贸 a desarrollar la idea de los desarrolladores de Yandex y crear un protocolo orientado a la impresi贸n.  驴Qu茅 sucede si se usan frecuencias de nota para modular los caracteres hexadecimales?  驴Por qu茅 no transferir los datos en do mayor?  Result贸 muy interesante, pero m谩s sobre eso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el pr贸ximo art铆culo</a> . <br><br>  隆Gracias por leer, 茅xito! <br><br><div class="spoiler">  <b class="spoiler_title">UPD: Respuesta de Yandex</b> <div class="spoiler_text">  Desde el servicio de seguridad de la informaci贸n, respondieron en los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">comentarios</a> y tambi茅n enviaron una carta: <br><img src="https://habrastorage.org/webt/rt/jr/2u/rtjr2uwdvs_rd6k-cdtty7oqt_e.png"><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/469435/">https://habr.com/ru/post/469435/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../469423/index.html">Holivar Historia de Runet. Parte 2. Contracultura: pAdonki, marihuana y el Kremlin</a></li>
<li><a href="../469425/index.html">Dmitry Matskevich, Dbrain (parte 2): sobre neurobiolog铆a, libertad interna, "dopamina barata" e intuici贸n</a></li>
<li><a href="../469427/index.html">Juguetes de madera, cuarta parte - 1990</a></li>
<li><a href="../469429/index.html">Revisi贸n del deseo de revisiones habra</a></li>
<li><a href="../469433/index.html">Primera vez La historia de c贸mo presentamos Scratch como un lenguaje de programaci贸n de robots</a></li>
<li><a href="../469439/index.html">ARIES PLC110 [M02] -MS4, HMI, OPC y SCADA, o cu谩nto necesita una persona el t茅 de manzanilla. Parte 2</a></li>
<li><a href="../469441/index.html">Complejidad de la simplicidad.</a></li>
<li><a href="../469443/index.html">Material que sobrevivi贸: primero se obtuvo la estructura "imposible" que resiste las condiciones terrestres</a></li>
<li><a href="../469445/index.html">Descripci贸n general de AngularConnect 2019. Parte 2</a></li>
<li><a href="../469447/index.html">El camino de la inteligencia artificial de una idea fant谩stica a la industria cient铆fica.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>