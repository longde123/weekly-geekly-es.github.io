<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê¥ üçã üëàüèª D√©ploiements canaries automatiques avec Flagger et Istio üôãüèª üÖøÔ∏è ü•®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le CD est reconnu comme une pratique de d√©veloppement de logiciels d'entreprise, il est le r√©sultat d'une √©volution naturelle des principes CI √©tablis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©ploiements canaries automatiques avec Flagger et Istio</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/444808/"><p><img src="https://habrastorage.org/webt/ol/eo/lt/oleoltogrvhcuhjuil5zmvmbpxi.png"></p><br><p>  Le CD est reconnu comme une pratique de d√©veloppement de logiciels d'entreprise, il est le r√©sultat d'une √©volution naturelle des principes CI √©tablis.  Cependant, les CD sont encore assez rares, probablement en raison de la complexit√© de la gestion et de la peur des d√©ploiements infructueux qui affectent la disponibilit√© du syst√®me. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flagger</a> est un op√©rateur Kubernetes open source qui vise √† √©liminer les relations confuses.  Il automatise la promotion des d√©ploiements canaries √† l'aide des compensations de trafic Istio et des m√©triques Prometheus pour analyser le comportement des applications lors du d√©ploiement g√©r√©. </p><br><p>  Vous trouverez ci-dessous un guide √©tape par √©tape sur la fa√ßon de configurer et d'utiliser Flagger dans Google Kubernetes Engine (GKE). </p><a name="habracut"></a><br><h3 id="nastroyka-klastera-kubernetes">  Configurer le cluster Kubernetes </h3><br><p>  Vous commencez par cr√©er un cluster GKE avec un compl√©ment Istio (si vous n'avez pas de compte GCP, vous pouvez vous inscrire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> pour recevoir des cr√©dits gratuits). </p><br><p> Connectez-vous √† Google Cloud, cr√©ez un projet et activez sa facturation.  Installez l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utilitaire de</a> ligne de commande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gcloud</a> et personnalisez votre projet avec <code>gcloud init</code> . </p><br><p>  D√©finissez le projet, la zone de calcul et la zone par d√©faut (remplacez <code>PROJECT_ID</code> par votre projet): </p><br><pre> <code class="plaintext hljs">gcloud config set project PROJECT_ID gcloud config set compute/region us-central1 gcloud config set compute/zone us-central1-a</code> </pre> <br><p>  Activez le service GKE et cr√©ez un cluster avec les modules compl√©mentaires HPA et Istio: </p><br><pre> <code class="plaintext hljs">gcloud services enable container.googleapis.com K8S_VERSION=$(gcloud beta container get-server-config --format=json | jq -r '.validMasterVersions[0]') gcloud beta container clusters create istio \ --cluster-version=${K8S_VERSION} \ --zone=us-central1-a \ --num-nodes=2 \ --machine-type=n1-standard-2 \ --disk-size=30 \ --enable-autorepair \ --no-enable-cloud-logging \ --no-enable-cloud-monitoring \ --addons=HorizontalPodAutoscaling,Istio \ --istio-config=auth=MTLS_PERMISSIVE</code> </pre> <br><p>  La commande ci-dessus cr√©era un pool de n≈ìuds par d√©faut qui comprend deux machines virtuelles <code>n1-standard-2</code> (vCPU: 2, RAM 7,5 Go, disque: 30 Go).  Id√©alement, il vaut la peine d'isoler les composants Istio de leurs charges de travail, mais il n'y a pas de moyen facile d'ex√©cuter des pods Istio dans un pool de n≈ìuds d√©di√©.  Les manifestes Istio sont consid√©r√©s comme en lecture seule, et GKE annulera toutes les modifications, telles que la liaison √† un n≈ìud ou la d√©connexion d'un foyer. </p><br><p>  Configurez les informations d'identification pour <code>kubectl</code> : </p><br><pre> <code class="plaintext hljs">gcloud container clusters get-credentials istio</code> </pre> <br><p>  Cr√©ez la liaison de r√¥le d'administrateur de cluster: </p><br><pre> <code class="plaintext hljs">kubectl create clusterrolebinding "cluster-admin-$(whoami)" \ --clusterrole=cluster-admin \ --user="$(gcloud config get-value core/account)"</code> </pre> <br><p>  Installez l'outil de ligne de commande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Helm</a> : </p><br><pre> <code class="plaintext hljs">brew install kubernetes-helm</code> </pre> <br><p>  Homebrew 2.0 est d√©sormais √©galement disponible pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Linux</a> . </p><br><p>  Cr√©ez un compte de service et une liaison de r√¥le de cluster pour Tiller: </p><br><pre> <code class="plaintext hljs">kubectl -n kube-system create sa tiller &amp;&amp; \ kubectl create clusterrolebinding tiller-cluster-rule \ --clusterrole=cluster-admin \ --serviceaccount=kube-system:tiller</code> </pre> <br><p>  D√©veloppez Tiller dans l' <code>kube-system</code> : </p><br><pre> <code class="plaintext hljs">helm init --service-account tiller</code> </pre> <br><p>  Vous devriez envisager d'utiliser SSL entre Helm et Tiller.  Pour plus d'informations sur la s√©curisation d'une installation Helm, voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">docs.helm.sh</a> </p><br><p>  Confirmer les param√®tres: </p><br><pre> <code class="plaintext hljs">kubectl -n istio-system get svc</code> </pre> <br><p>  Apr√®s quelques secondes, GCP devrait attribuer une adresse IP externe pour le service <code>istio-ingressgateway</code> . </p><br><h3 id="nastroyka-vhodnogo-shlyuza-istio">  Configuration de la passerelle d'entr√©e Istio </h3><br><p>  Cr√©ez une adresse IP statique appel√©e <code>istio-gateway</code> utilisant l'adresse IP de la passerelle Istio: </p><br><pre> <code class="plaintext hljs">export GATEWAY_IP=$(kubectl -n istio-system get svc/istio-ingressgateway -ojson | jq -r .status.loadBalancer.ingress[0].ip) gcloud compute addresses create istio-gateway --addresses ${GATEWAY_IP} --region us-central1</code> </pre> <br><p>  Vous avez maintenant besoin d'un domaine Internet et d'un acc√®s √† votre registraire DNS.  Ajoutez deux entr√©es A (remplacez <code>example.com</code> par votre domaine): </p><br><pre> <code class="plaintext hljs">istio.example.com A ${GATEWAY_IP} *.istio.example.com A ${GATEWAY_IP}</code> </pre> <br><p>  V√©rifiez que le caract√®re g√©n√©rique DNS fonctionne: </p><br><pre> <code class="plaintext hljs">watch host test.istio.example.com</code> </pre> <br><p>  Cr√©ez une passerelle commune Istio pour fournir des services en dehors du maillage de service sur HTTP: </p><br><pre> <code class="plaintext hljs">apiVersion: networking.istio.io/v1alpha3 kind: Gateway metadata: name: public-gateway namespace: istio-system spec: selector: istio: ingressgateway servers: - port: number: 80 name: http protocol: HTTP hosts: - "*"</code> </pre> <br><p>  Enregistrez la ressource ci-dessus sous public-gateway.yaml, puis appliquez-la: </p><br><pre> <code class="plaintext hljs">kubectl apply -f ./public-gateway.yaml</code> </pre> <br><p>  Aucun syst√®me de production ne devrait fournir de services sur Internet sans SSL.  Pour prot√©ger la passerelle Istio avec cert-manager, CloudDNS et Let's Encrypt, veuillez lire la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation de</a> Flagger GKE. </p><br><h3 id="ustanovka-flagger">  Installation de Flagger </h3><br><p>  Le compl√©ment GKE Istio n'inclut pas l'instance Prometheus, qui nettoie le service de t√©l√©m√©trie Istio.  √âtant donn√© que Flagger utilise les m√©triques HTTP Istio pour effectuer une analyse canari, vous devez d√©ployer la configuration Prometheus suivante similaire √† celle fournie avec le sch√©ma officiel Istio Helm. </p><br><pre> <code class="plaintext hljs">REPO=https://raw.githubusercontent.com/stefanprodan/flagger/master kubectl apply -f ${REPO}/artifacts/gke/istio-prometheus.yaml</code> </pre> <br><p>  Ajoutez le r√©f√©rentiel Flagger Helm: </p><br><pre> <code class="plaintext hljs">helm repo add flagger https://flagger.app</code> </pre> <br><p>  D√©veloppez Flagger dans l' <code>istio-system</code> istio <code>istio-system</code> activant les notifications Slack: </p><br><pre> <code class="plaintext hljs">helm upgrade -i flagger flagger/flagger \ --namespace=istio-system \ --set metricsServer=http://prometheus.istio-system:9090 \ --set slack.url=https://hooks.slack.com/services/YOUR-WEBHOOK-ID \ --set slack.channel=general \ --set slack.user=flagger</code> </pre> <br><p>  Vous pouvez installer Flagger dans n'importe quel espace de noms s'il peut communiquer avec le service Istio Prometheus via le port 9090. </p><br><p>  Flagger dispose d'un tableau de bord Grafana pour l'analyse des canaris.  Installez Grafana dans l' <code>istio-system</code> : </p><br><pre> <code class="plaintext hljs">helm upgrade -i flagger-grafana flagger/grafana \ --namespace=istio-system \ --set url=http://prometheus.istio-system:9090 \ --set user=admin \ --set password=change-me</code> </pre> <br><p>  D√©veloppez Grafana via une passerelle ouverte en cr√©ant un service virtuel (remplacez <code>example.com</code> par votre domaine): </p><br><pre> <code class="plaintext hljs">apiVersion: networking.istio.io/v1alpha3 kind: VirtualService metadata: name: grafana namespace: istio-system spec: hosts: - "grafana.istio.example.com" gateways: - public-gateway.istio-system.svc.cluster.local http: - route: - destination: host: flagger-grafana</code> </pre> <br><p>  Enregistrez la ressource ci-dessus sous grafana-virtual-service.yaml puis appliquez-la: </p><br><pre> <code class="plaintext hljs">kubectl apply -f ./grafana-virtual-service.yaml</code> </pre> <br><p>  Lorsque vous acc√©dez √† <code>http://grafana.istio.example.com</code> dans un navigateur, vous devez √™tre redirig√© vers la page de connexion Grafana. </p><br><h3 id="deploy-veb-prilozheniy-s-flagger">  D√©ploiement d'applications Web avec Flagger </h3><br><p>  Flagger d√©ploie Kubernetes et, si n√©cessaire, la mise √† l'√©chelle automatique horizontale (HPA), puis cr√©e une s√©rie d'objets (d√©ploiements Kubernetes, services ClusterIP et services virtuels Istio).  Ces objets ouvrent l'application dans le maillage du service et g√®rent l'analyse et la promotion des canaris. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/la/cg/h5/lacgh59saaxevwtpgoiby77xe7u.png"></a> </p><br><p>  Cr√©ez un espace de noms de test avec l'impl√©mentation d'Istio Sidecar activ√©e: </p><br><pre> <code class="plaintext hljs">REPO=https://raw.githubusercontent.com/stefanprodan/flagger/master kubectl apply -f ${REPO}/artifacts/namespaces/test.yaml</code> </pre> <br><p>  Cr√©ez un outil de mise √† l'√©chelle horizontale automatique de d√©ploiement et de foyer: </p><br><pre> <code class="plaintext hljs">kubectl apply -f ${REPO}/artifacts/canaries/deployment.yaml kubectl apply -f ${REPO}/artifacts/canaries/hpa.yaml</code> </pre> <br><p>  D√©ployez un service de test de charge pour g√©n√©rer du trafic lors de l'analyse canari: </p><br><pre> <code class="plaintext hljs">helm upgrade -i flagger-loadtester flagger/loadtester \ --namepace=test</code> </pre> <br><p>  Cr√©ez une ressource canari personnalis√©e (remplacez <code>example.com</code> par votre domaine): </p><br><pre> <code class="plaintext hljs">apiVersion: flagger.app/v1alpha3 kind: Canary metadata: name: podinfo namespace: test spec: targetRef: apiVersion: apps/v1 kind: Deployment name: podinfo progressDeadlineSeconds: 60 autoscalerRef: apiVersion: autoscaling/v2beta1 kind: HorizontalPodAutoscaler name: podinfo service: port: 9898 gateways: - public-gateway.istio-system.svc.cluster.local hosts: - app.istio.example.com canaryAnalysis: interval: 30s threshold: 10 maxWeight: 50 stepWeight: 5 metrics: - name: istio_requests_total threshold: 99 interval: 30s - name: istio_request_duration_seconds_bucket threshold: 500 interval: 30s webhooks: - name: load-test url: http://flagger-loadtester.test/ timeout: 5s metadata: cmd: "hey -z 1m -q 10 -c 2 http://podinfo.test:9898/"</code> </pre> <br><p>  Enregistrez la ressource ci-dessus sous podinfo-canary.yaml puis appliquez-la: </p><br><pre> <code class="plaintext hljs">kubectl apply -f ./podinfo-canary.yaml</code> </pre> <br><p>  En cas de succ√®s, l'analyse ci-dessus sera effectu√©e dans les cinq minutes, avec des m√©triques HTTP v√©rifi√©es toutes les demi-minutes.  Vous pouvez d√©terminer le temps minimum requis pour v√©rifier et promouvoir un d√©ploiement canari √† l'aide de la formule suivante: <code>interval * (maxWeight / stepWeight)</code> .  Les champs CRD des Canaries sont document√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </p><br><p>  En quelques secondes, Flagger cr√©era des objets canaris: </p><br><pre> <code class="plaintext hljs"># applied deployment.apps/podinfo horizontalpodautoscaler.autoscaling/podinfo canary.flagger.app/podinfo # generated deployment.apps/podinfo-primary horizontalpodautoscaler.autoscaling/podinfo-primary service/podinfo service/podinfo-canary service/podinfo-primary virtualservice.networking.istio.io/podinfo</code> </pre> <br><p>  Ouvrez un navigateur et acc√©dez √† <code>app.istio.example.com</code> , vous devriez voir le num√©ro de version de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">application de d√©monstration</a> . </p><br><h3 id="avtomaticheskiy-canary-analiz-i-prodvizhenie">  Analyse et promotion automatique des canaris </h3><br><p>  Flagger impl√©mente une boucle de contr√¥le qui d√©place progressivement le trafic vers les canaris, tout en mesurant les principaux indicateurs de performance, par exemple, le taux de r√©ussite des requ√™tes HTTP, la dur√©e moyenne des requ√™tes et les performances du foyer.  Sur la base de l'analyse, le canari KPI progresse ou est interrompu, et les r√©sultats de l'analyse sont publi√©s dans Slack. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/bw/85/ua/bw85uavib13od3yhfyv7yaqbdmo.png"></a> </p><br><p>  Le d√©ploiement Canary d√©marre lorsque l'un des objets suivants change: </p><br><ul><li>  D√©ployer PodSpec (image de conteneur, commande, ports, env, etc.) </li><li>  Les ConfigMaps sont mont√©s en tant que volumes ou convertis en variables d'environnement </li><li>  Les secrets sont mont√©s en tant que volumes ou convertis en variables d'environnement </li></ul><br><p>  Lancement d'un d√©ploiement canari lors de la mise √† jour d'une image de conteneur: </p><br><pre> <code class="plaintext hljs">kubectl -n test set image deployment/podinfo \ podinfod=quay.io/stefanprodan/podinfo:1.4.1</code> </pre> <br><p>  Flagger d√©couvre que la version de d√©ploiement a chang√© et commence √† l'analyser: </p><br><pre> <code class="plaintext hljs">kubectl -n test describe canary/podinfo Events: New revision detected podinfo.test Scaling up podinfo.test Waiting for podinfo.test rollout to finish: 0 of 1 updated replicas are available Advance podinfo.test canary weight 5 Advance podinfo.test canary weight 10 Advance podinfo.test canary weight 15 Advance podinfo.test canary weight 20 Advance podinfo.test canary weight 25 Advance podinfo.test canary weight 30 Advance podinfo.test canary weight 35 Advance podinfo.test canary weight 40 Advance podinfo.test canary weight 45 Advance podinfo.test canary weight 50 Copying podinfo.test template spec to podinfo-primary.test Waiting for podinfo-primary.test rollout to finish: 1 of 2 updated replicas are available Promotion completed! Scaling down podinfo.test</code> </pre> <br><p>  Pendant l'analyse, les r√©sultats des canaris peuvent √™tre suivis √† l'aide de Grafana: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/so/xr/cr/soxrcrt3wvsgtnbwpukfwbzityy.png"></a> </p><br><p>  Remarque: si de nouvelles modifications sont appliqu√©es au d√©ploiement pendant l'analyse canari, Flagger red√©marrera la phase d'analyse. </p><br><p>  Faites une liste de tous les "canaris" de votre cluster: </p><br><pre> <code class="plaintext hljs">watch kubectl get canaries --all-namespaces NAMESPACE NAME STATUS WEIGHT LASTTRANSITIONTIME test podinfo Progressing 15 2019-01-16T14:05:07Z prod frontend Succeeded 0 2019-01-15T16:15:07Z prod backend Failed 0 2019-01-14T17:05:07Z</code> </pre> <br><p>  Si vous avez activ√© les notifications Slack, vous recevrez les messages suivants: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/xx/0v/cn/xx0vcnpcarb8nb3xivkmfz_6pfw.png"></a> </p><br><h3 id="avtomaticheskiy-otkat">  Restauration automatique </h3><br><p>  Pendant l'analyse canari, vous pouvez g√©n√©rer des erreurs HTTP 500 synth√©tiques et un d√©lai de r√©ponse √©lev√© pour v√©rifier si Flagger arr√™tera le d√©ploiement. </p><br><p>  Cr√©ez un sous-test et proc√©dez comme suit: </p><br><pre> <code class="plaintext hljs">kubectl -n test run tester \ --image=quay.io/stefanprodan/podinfo:1.2.1 \ -- ./podinfo --port=9898 kubectl -n test exec -it tester-xx-xx sh</code> </pre> <br><p>  G√©n√©ration d'erreur HTTP 500: </p><br><pre> <code class="plaintext hljs">watch curl http://podinfo-canary:9898/status/500</code> </pre> <br><p>  G√©n√©ration de retard: </p><br><pre> <code class="plaintext hljs">watch curl http://podinfo-canary:9898/delay/1</code> </pre> <br><p>  Lorsque le nombre de v√©rifications infructueuses atteint la valeur seuil, le trafic est redirig√© vers le canal principal, canary est mis √† l'√©chelle √† z√©ro et le d√©ploiement est marqu√© comme infructueux. </p><br><p>  Les erreurs canariennes et les pics de retard sont enregistr√©s en tant qu'√©v√©nements Kubernetes et enregistr√©s par Flagger au format JSON: </p><br><pre> <code class="plaintext hljs">kubectl -n istio-system logs deployment/flagger -f | jq .msg Starting canary deployment for podinfo.test Advance podinfo.test canary weight 5 Advance podinfo.test canary weight 10 Advance podinfo.test canary weight 15 Halt podinfo.test advancement success rate 69.17% &lt; 99% Halt podinfo.test advancement success rate 61.39% &lt; 99% Halt podinfo.test advancement success rate 55.06% &lt; 99% Halt podinfo.test advancement success rate 47.00% &lt; 99% Halt podinfo.test advancement success rate 37.00% &lt; 99% Halt podinfo.test advancement request duration 1.515s &gt; 500ms Halt podinfo.test advancement request duration 1.600s &gt; 500ms Halt podinfo.test advancement request duration 1.915s &gt; 500ms Halt podinfo.test advancement request duration 2.050s &gt; 500ms Halt podinfo.test advancement request duration 2.515s &gt; 500ms Rolling back podinfo.test failed checks threshold reached 10 Canary failed! Scaling down podinfo.test</code> </pre> <br><p>  Si vous avez activ√© les notifications Slack, vous recevrez un message lorsque la date limite est atteinte ou lorsque le nombre maximal d'√©checs de v√©rification pendant l'analyse est atteint: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/wo/te/dq/wotedqdhoxxyhjug_lcuy57wno0.png"></a> </p><br><h3 id="v-zaklyuchenie">  En conclusion </h3><br><p>  Le lancement d'un maillage de services, comme Istio, en plus de Kubernetes fournira des m√©triques, des journaux et des protocoles automatiques, mais le d√©ploiement des charges de travail d√©pend toujours d'outils externes.  Flagger cherche √† changer cela en ajoutant les capacit√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">livraison progressive</a> d'Istio. </p><br><p>  Flagger est compatible avec n'importe quelle solution Kubernetes CI / CD, et l'analyse des canaris peut √™tre facilement √©tendue √† l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">webhooks</a> pour effectuer des tests d'int√©gration / d'acceptation du syst√®me, des tests de stress ou tout autre test utilisateur.  Parce que Flagger est d√©claratif et r√©actif aux √©v√©nements Kubernetes, il peut √™tre utilis√© sur les pipelines GitOps avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Weave Flux</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JenkinsX</a> .  Si vous utilisez JenkinsX, vous pouvez installer Flagger avec des modules compl√©mentaires jx. </p><br><p>  Flagger est pris en charge par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Weaveworks</a> et fournit des d√©ploiements <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">canaries</a> vers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Weave Cloud</a> .  Le projet est test√© sur GKE, EX et m√©tal nu avec kubeadm. </p><br><p>  Si vous avez des suggestions pour am√©liorer Flagger, veuillez envoyer une question ou un RP √† GitHub √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">stefanprodan / flagger</a> .  Les contributions sont plus que bienvenues! </p><br><p>  Merci <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ray Tsang</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr444808/">https://habr.com/ru/post/fr444808/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr444796/index.html">R√©tro-ing√©nierie des tracteurs: comment acc√©l√©rer de moiti√© le processus de mesure</a></li>
<li><a href="../fr444798/index.html">Vue d'ensemble de la section Frontend √† la conf√©rence DUMP: d√©veloppement frontend dans son int√©gralit√©</a></li>
<li><a href="../fr444800/index.html">L'open source ne fait pas d'argent, car il n'a pas √©t√© cr√©√© pour cela</a></li>
<li><a href="../fr444804/index.html">L'op√©rateur de la bourse BTC-e demande √† √™tre extrad√© vers la Russie</a></li>
<li><a href="../fr444806/index.html">Moira participe au Google Summer of Code 2019</a></li>
<li><a href="../fr444810/index.html">Processeurs et marketing en informatique</a></li>
<li><a href="../fr444814/index.html">Cryptographie en Java. Chiffrement de classe</a></li>
<li><a href="../fr444816/index.html">Menuiserie DIY: attentes et r√©alit√©</a></li>
<li><a href="../fr444818/index.html">Citymobil - un guide pour les startups pour augmenter la stabilit√© en pleine croissance. Partie 1</a></li>
<li><a href="../fr444820/index.html">Mockdown: le moyen le plus rapide pour cr√©er des wireframes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>