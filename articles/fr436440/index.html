<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÇüèø üçì üë®üèΩ‚Äç‚öïÔ∏è Je dois aller vite: construire pour la vitesse dans iOS. 2e partie üåø üõåüèø ü§úüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Parfois, vous pouvez vous retrouver dans une situation o√π votre application ne fonctionne pas bien. Voici donc quelques instruments que vous pouvez ut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Je dois aller vite: construire pour la vitesse dans iOS. 2e partie</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/e-Legion/blog/436440/"><img src="https://habrastorage.org/webt/tz/wv/z9/tzwvz9iexzkjdiqq7-3qrb6226w.png"><br><br>  Parfois, vous pouvez vous retrouver dans une situation o√π votre application ne fonctionne pas bien.  Voici donc quelques instruments que vous pouvez utiliser et les meilleures pratiques que vous pouvez mettre en ≈ìuvre pour am√©liorer les choses. <a name="habracut"></a><br><br>  Il s'agit de la deuxi√®me partie de l'article bas√©e sur le discours-programme prononc√© par Luke Parham, ing√©nieur iOS chez Fyusion et auteur de tutoriels pour le d√©veloppement iOS sur RayWenderlich.com, √† l'International Mobile Developers Conference <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MBLT DEV</a> en 2017. <br><br><h2>  Instrument d'animation de base </h2><br>  Si vous avez fait beaucoup de profilage et que vous avez trouv√© tous vos goulots d'√©tranglement, il y a parfois des probl√®mes de performances.  C'est √† cause de la fa√ßon dont les choses de l'interface utilisateur fonctionnent dans iOS.  Chaque fois que vous d√©finissez des cadres ou cr√©ez des UIViews, ce qui se passe r√©ellement sous le capot, c'est que vous effectuez une CATransaction ou que le syst√®me le fait pour vous.  Et ceux-ci sont exp√©di√©s vers une chose appel√©e ¬´le serveur de rendu¬ª.  Le serveur de rendu est charg√© de faire des animations.  Si vous faites un UIView animateWith: peu importe, tout cela se produira sur le serveur de rendu qui est un autre thread et il g√®re toutes les animations de l'application. <br><br><img src="https://habrastorage.org/webt/pl/st/mf/plstmfhgbvefqbeoxgair-w4yh0.jpeg"><br><br>  Voici un Time Profiler qui a une jauge de fr√©quence d'images en haut.  Et en bas se trouvent les options de d√©bogage les plus importantes.  Nous allons parler des deux choses les plus importantes et les plus faciles √† corriger. <br><br><img src="https://habrastorage.org/webt/wv/qv/q_/wvqvq_97keqipatnlv6fettbkmk.jpeg"><br><br>  Le premier est les couches de couleurs m√©lang√©es.  C'est vraiment tr√®s facile √† corriger.  Et cela nous am√®ne √† la premi√®re section de la police de performance.  Fondamentalement, beaucoup d'applications ont des probl√®mes: m√™me iMessage, l'application Apple bien-aim√©e, fait beaucoup de choses pas vraiment g√©niales.  Ici, nous voyons qu'il y a beaucoup de rouge: <br><br><img src="https://habrastorage.org/webt/ym/n6/ei/ymn6eidnyg-8hgprlklb8fezsey.jpeg"><br><br>  Le rouge signifie que vous avez des √©tiquettes sur fond blanc.  Et puis ils sont au-dessus d'un autre fond blanc et pour une raison quelconque, ils ne sont pas d√©finis pour √™tre opaques.  Le m√©langeur m√©lange donc ces couleurs, le blanc et le blanc et obtient ainsi une couleur blanche.  Pour chaque pixel qui a du rouge, il effectue des calculs suppl√©mentaires sans aucun avantage, vous obtenez toujours du blanc en arri√®re-plan. <br><br>  Pour √©viter cela, vous pouvez rendre les calques opaques dans la mesure du possible s'ils sont de la m√™me couleur sur la m√™me couleur.  Si la sous-vue a la m√™me couleur d'arri√®re-plan, le m√©lange n'est pas n√©cessaire.  Tout ce que vous avez √† faire est de d√©finir l'opacit√© de vos calques sur 1, puis de vous assurer que la couleur d'arri√®re-plan est d√©finie.  Si votre couleur d'arri√®re-plan est claire, elle ne sera pas toujours opaque. <br><br><img src="https://habrastorage.org/webt/dk/of/us/dkofush4_wsglsxcge8m2tygf5q.jpeg"><br><br><h3>  Rendu hors √©cran </h3><br>  Les √©l√©ments rendus hors √©cran seront affich√©s en jaune si vous activez cette option.  La bonne chose √† propos de l'instrument Core Animation est que vous pouvez voir d'autres applications.  Vous pouvez activer ces options, puis acc√©der √† n'importe quelle application de votre syst√®me et voir ce qu'elles font de mal.  Dans ce cas, Instagram a ces petites bulles en haut qui vous montrent les histoires des gens. <br><br><img src="https://habrastorage.org/webt/tq/vw/vr/tqvwvrzd2lo4se8-1s9iojgbqri.jpeg"><br><br>  Comme vous pouvez le voir, ils sont tous jaunes.  Sur iPhone 5, ils sont extr√™mement lents.  Et c'est parce que le rendu hors √©cran est bien pire que le m√©lange alpha.  Il bloque le GPU.  Il finit par devoir faire des calculs suppl√©mentaires dans les deux sens entre le GPU et le CPU, de sorte que vous obtenez des d√©crochages suppl√©mentaires qui sont inutiles la plupart du temps. <br><br><h3>  Chemin de B√©zier au lieu de voir les virages </h3><br>  La r√®gle suivante: n'utilisez pas la propri√©t√© de rayon de coin.  Si vous avez une vue et que vous d√©finissez view.layer.cornerRadius, cela introduit toujours le rendu hors √©cran.  Au lieu de cela, vous pouvez utiliser un chemin bezier et le m√™me type de contenu CGBitmap que pr√©c√©demment.  Dans ce cas, un contexte UIGraphics.  Cette fonction fonctionne avec UIImage, elle prend une taille, fait des coins arrondis en fonction de cette taille et utilise un chemin bezier pour couper.  Ensuite, nous d√©coupons l'image et la renvoyons du contexte UIImage.  Ainsi, cela renverra une image pr√©-arrondie au lieu d'arrondir la vue dans laquelle l'image se trouve √† l'int√©rieur. <br><br><img src="https://habrastorage.org/webt/fy/6k/_8/fy6k_8ymknn7sd52mzccdrjj-ny.jpeg"><br><br>  Le dernier exemple.  Voici Twitter et voici une vue en temps r√©el de cette animation en cours d'ex√©cution.  Il est cens√© s'ouvrir et vous montrer les informations, mais tout ce texte et tout cela a √©t√© rendu hors √©cran, ce qui a ralenti l'animation √† une exploration.  C'est la chose la moins performante que j'ai jamais trouv√©e dans une application sur l'App Store. <br><br><img src="https://habrastorage.org/webt/5a/kw/uk/5akwuksf-c6laq1eyzdd_njtpqm.gif"><br><br>  Alors, comment est-ce arriv√©?  Une chose qui fait que cela se produit est la propri√©t√© shouldRasterize d'un CALayer.  C'est une option sur un calque qui vous permet de mettre en cache les textures qui ont √©t√© rendues.  Il y a beaucoup de r√®gles √©tranges.  Comme s'il n'avait pas √©t√© utilis√© pendant un certain nombre de millisecondes, il quittera le cache.  Et puis, s'il quitte le cache, il sera rendu hors √©cran sur chaque image.  Cela ne vaut pas vraiment les avantages possibles.  Et il est difficile de v√©rifier si cela vous profite r√©ellement. <br><br><h3>  R√©sum√© </h3><br>  √âvitez le rendu hors √©cran et le m√©lange alpha si vous le pouvez.  Le m√©lange alpha est parfois n√©cessaire.  C'est mieux que le rendu hors √©cran.  Le rendu hors √©cran se produit pour plusieurs raisons.  Cela peut arriver √† partir des ombres;  cela peut arriver √† partir d'un arrondi de coin;  cela peut arriver par masquage. <br><br>  Rendez les vues opaques lorsque cela est possible.  N'utilisez pas autant que possible la propri√©t√© de rayon d'angle. Utilisez les chemins de B√©zier.  N'utilisez pas non plus les propri√©t√©s d'ombre du calque si vous effectuez des ombres de texte.  Vous pouvez utiliser NSShadow √† la place. <br><br><h2>  Trace d'activit√© </h2><br>  La trace d'activit√© est une sorte de version de bas niveau de quelque chose que le profileur de temps ferait.  Il vous donne une vue de tous vos fils et comment ils interagissent.  Et c'est assez compliqu√©.  Mais il a de tr√®s belles fonctionnalit√©s que vous pouvez configurer. <br><br><h3>  Trace syst√®me </h3><br>  Utilisez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trace du syst√®me</a> pour suivre les heures d'√©v√©nements sp√©cifiques.  Vous pouvez d√©finir des moyens de suivre des √©v√©nements et des sections de code sp√©cifiques et voir combien de temps ils prennent dans une application r√©elle.  Il vous permet d'obtenir des informations pr√©cises sur ce qui se passe dans votre syst√®me. <br><br><ul><li>  Utilisez ¬´Signer les messages¬ª pour signaler quand quelque chose d'important se produit. </li><li>  Les points sont des √©v√©nements uniques lorsque / si vous voulez voir comme une animation s'est produite ou quelque chose comme √ßa. </li><li>  Les r√©gions ont un d√©but et une fin.  Pour le d√©codage d'images, vous pouvez voir quand il commence et quand il se termine afin que vous puissiez estimer combien de temps cela a pris en g√©n√©ral. </li></ul><br><br><img src="https://habrastorage.org/webt/7r/dr/kg/7rdrkgwhhgvrcbhuizxs02jxkeq.jpeg"><br><br>  Voici comment configurer un mod√®le de trace syst√®me.  Vous faites cette liste des √©v√©nements qui peuvent se produire.  Donc, le num√©ro un est un t√©l√©chargement d'image.  Deux est un d√©codage d'image, et trois est cette animation d'inclinaison que j'ai ajout√©e.  Fondamentalement, vous configurez des options suppl√©mentaires pour voir quelles couleurs vont √™tre.  Fondamentalement, vous lui envoyez un num√©ro comme 1 ou 2, il sera rouge ou vert en fonction de ce que vous y envoyez. <br><br><img src="https://habrastorage.org/webt/ub/lx/qx/ublxqxc19dzgw-gonkynp2xrcfq.jpeg"><br><br>  Si vous √™tes dans Objective-C, vous devez importer cet en-t√™te kdebug_signpost.  Dans Swift, il est juste disponible pour vous. <br><br><img src="https://habrastorage.org/webt/xf/k1/zd/xfk1zdzomfbd_wvseum7t215drs.jpeg"><br><br>  Et puis vous devez appeler cette fonction, soit kdebug_signpost ou kdebug_signpost_start et kdebug_ signpost_end.  Et ils fonctionnent √† partir du code que vous avez transmis.  Nous avons donc mis en place ces trois √©v√©nements avec ces chiffres.  Ensuite, vous passez ce num√©ro ici.  Vous lui passez un objet qui est fondamentalement la cl√© de cet √©v√©nement.  Et puis, le dernier nombre est la couleur.  Donc 2, c'est comme si vous connaissiez le rouge ou quelque chose. <br><br>  J'ai un exemple de projet Swift sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> .  J'ai en quelque sorte simplifi√© les choses.  Il y a un d√©but et une fin qui sont un peu plus faciles √† g√©rer. <br><br>  Voici √† quoi cela ressemblera une fois que vous aurez ex√©cut√© une trace.  Il ne vous montrera rien au d√©but.  Ensuite, lorsque vous tuez l'application, elle fera des calculs et vous montrera des choses ici. <br><br><img src="https://habrastorage.org/webt/y_/fo/aa/y_foaaegix7nld0j5y8y8drigvs.jpeg"><br><br>  Ici, nous pouvons voir nos t√©l√©chargements d'images qui ont pris environ 200 millisecondes.  Et puis, il y a le d√©codage d'image qui a pris environ 40 millisecondes.  C'est vraiment cool si vous avez un tas de trucs fous dans votre application.  Vous pouvez configurer tous ces √©v√©nements, puis voir simplement la dur√©e de chaque prise et la fa√ßon dont ils interagissent les uns avec les autres.  C'est tout pour la trace du syst√®me. <br><br><h2>  Bonus </h2><br>  Jetez un ≈ìil √† l'exemple d'un ralentissement de la cam√©ra o√π nous pouvons voir ce qui se passe s'il y a des choses AR dans l'application: <br><br><img src="https://habrastorage.org/webt/gv/ir/ht/gvirht8m60rtskuhbx3pld8w9ci.jpeg"><br><br>  Nous avons appliqu√© un effet et cela prenait 26,4% de tous les calculs sur chaque image juste pour calculer un effet.  Et cela ralentissait l'appareil photo √† quelque chose de fou comme 10 images par seconde. <br><br>  Quand j'ai creus√© ici et regard√© ce gros goulot d'√©tranglement, j'ai vu que la principale chose qui faisait la plupart du travail √©tait l'utilisation de NSDispatchData intense. <br><br><img src="https://habrastorage.org/webt/ks/6w/av/ks6wavxsrckbxvp1vacruzjuigm.jpeg"><br><br>  Il s'agit d'une sous-classe de NSData.  Et tout cela, c'est obtenir des octets avec la fonction de plage.  Et c'est une fonction simple.  Tout ce qu'il fait, c'est qu'il prend quelques octets d'une donn√©e et le place ailleurs.  Ce n'est pas trop fou, mais apparemment, tout ce qu'il faisait en interne absorbait 18% de ces 26%. <br><br>  <b>R√®gle n ¬∞ 1</b> <br><br>  C'est un NSData et il obtient des octets.  C'est une chose Objective-C simple, mais si vous rencontrez cela et qu'il s'agit d'un goulot d'√©tranglement, il est temps de passer √† l'utilisation de C √† la place.  √âtant donn√© que le goulot d'√©tranglement √©tait autour d'un appel pour r√©cup√©rer les valeurs flottantes, vous pouvez simplement utiliser memcpy ().  Avec memcpy (), vous pouvez d√©placer un bloc de donn√©es ailleurs.  R√©duit beaucoup de frais g√©n√©raux. <br><br>  Si vous regardez comme NSData, ces classes sont comme des milliers de lignes.  Il se passe donc beaucoup de choses l√†-dedans.  Dans ce cas, nous avons l'original en rouge. <br><br><img src="https://habrastorage.org/webt/0-/g5/bf/0-g5bfby8b-tindkrc-kng4vqsk.jpeg"><br><br>  Ici, vous obtenez une plage, prenez quelques octets et copiez-les dans le tampon.  La version memcpy () est presque exactement la m√™me chose.  √áa n'a pas l'air plus compliqu√© et √ßa fait agressivement moins de choses. <br><br><img src="https://habrastorage.org/webt/0_/io/la/0_iolawo_uvibvyrwifn8oioocc.jpeg"><br><br>  Lorsque nous changeons cela et que nous l'ex√©cutons √† nouveau, les choses sont pass√©es de 26% √† 0,6% en changeant cette ligne en memcpy ().  Et puis, la fr√©quence d'images a consid√©rablement augment√©. <br><br>  <b>R√®gle n ¬∞ 2</b> <br><br>  √âvitez de trop tirer si vous faites une sorte d'application de rendu ou m√™me si vous faites quelque chose comme une barre de chargement.  Souvent, les √©v√©nements se produisent plus de 60 images par seconde.  Dans ce cas, vous pouvez limiter cette mise √† jour de l'interface utilisateur √† l'aide d'un CADisplayLink.  Il poss√®de une propri√©t√© appel√©e PreferredFramesPerSecond.  C'est uniquement pour iOS 10 ou sup√©rieur.  Pour les plus anciens, vous devez le faire manuellement mais c'est toujours utile. <br><br><img src="https://habrastorage.org/webt/or/zx/bw/orzxbwk4shxzoc_vtsft1pgnhcy.jpeg"><br><br>  Vous pouvez d√©finir la fr√©quence d'images souhait√©e.  Souvent, pour des barres de chargement similaires, je le d√©finirai autour de 15 images par seconde, car cela n'a pas vraiment d'importance.  Il n'a pas besoin de mettre √† jour 60 images par seconde.  Cela peut vous faire √©conomiser beaucoup de travail que vous effectuez r√©ellement si les choses se ressemblent de toute fa√ßon. <br><br>  <b>R√®gle n ¬∞ 3</b> <br><br>  Utilisez la mise en cache IMP.  Ceci n'est utile que pour Objective-C.  InObjective-C, lorsque vous appelez une m√©thode sous le capot, vous appelez en fait la fonction d'envoi de message Objective-C (objc_msgSend ()).  Si vous voyez ces appels dans des traces prendre beaucoup de temps, c'est quelque chose dont vous pouvez vous d√©barrasser facilement.  Il s'agit essentiellement de la table de cache o√π vous recherchez des pointeurs de fonction en lui donnant le nom d'une m√©thode.  Au lieu de faire cette recherche √† chaque fois, vous pouvez mettre en cache le pointeur de fonction et l'appeler directement.  Il est g√©n√©ralement au moins deux fois plus rapide. <br><br><img src="https://habrastorage.org/webt/j-/ns/cg/j-nscgmdv5ex1an1s2d2mhn9yxg.jpeg"><br><br>  Si vous n'avez pas de pointeur mis en cache, vous pouvez le r√©cup√©rer en appelant methodForSelector:.  Ensuite, nous appelons simplement cette m√©thode comme un appel de fonction normal.  Vous passez l'objet le s√©lecteur, puis tous les arguments viennent apr√®s. <br><br>  <b>R√®gle n ¬∞ 4</b> <br><br>  N'utilisez pas ARC.  ARC est quelque chose qui ajoute un tas de frais g√©n√©raux.  Dans votre code, vous avez tout ce qui se passe et il arrose tout de retenues et de versions.  Il en fait autant qu'il le doit, et il en fait beaucoup plus.  Donc, si vous voulez vraiment optimiser, si vous voyez que vous avez un tas d'appels de conservation et de lib√©ration dans votre trace et qu'ils prennent beaucoup de temps, vous pouvez simplement passer √† ne pas utiliser ARC, ce qui repr√©sente beaucoup plus de travail. <br><br>  Il est √©galement difficile d'amener vos co√©quipiers √† accepter de le faire et √† ne pas en √™tre fou. <br><br>  N'utilisez pas Swift s'il est particuli√®rement sensible aux performances.  Swift est une belle langue.  Il a des fonctionnalit√©s vraiment soign√©es.  Mais il utilise √©galement plus de passe-partout √† l'int√©rieur pour obtenir un haut niveau de fonctionnalit√©.  Si vous voulez √™tre rapide, vous devez vous rapprocher le plus possible de l'assemblage le plus bas possible.  Et ce sera plus rapide car c'est moins de code automatiquement. <br><br>  Si vous regardez dans les trucs si vous pensiez que c'√©tait int√©ressant, il y a un tr√®s bon livre intitul√© "iOS et MacOS: Performance Tuning" par Marcel Weiher.  Cela va vraiment en profondeur dans beaucoup de ces choses et bien plus encore.  J'ai aussi une s√©rie vid√©o.  Je fais des vid√©os pour RayWenderlich.  Il y a une s√©rie d'instruments pratiques que j'ai faite qui va plus en profondeur et qui explique ces choses un peu plus et a quelques exemples.  Donc, si vous voulez en savoir plus sur les instruments en particulier, vous pouvez regarder cette s√©rie vid√©o.  Et puis, les vid√©os de la WWDC - il y en a des tonnes qui expliquent diff√©rentes performances comme celle-ci. <br><br><h2>  Vid√©o </h2><br>  Vous trouverez ici la premi√®re partie d'un article bas√© sur le discours de Luke.  Regardez le discours complet ici: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/tZIQjrPdFcI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436440/">https://habr.com/ru/post/fr436440/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436430/index.html">Confession d'un graphomane</a></li>
<li><a href="../fr436432/index.html">SAP: De quoi avez-vous besoin pour commencer √† apprendre SAPUI5?</a></li>
<li><a href="../fr436434/index.html">PVS-Studio pour Java</a></li>
<li><a href="../fr436436/index.html">Le CERN pr√©voit de construire un nouvel acc√©l√©rateur d'une longueur de tunnel de 100 km</a></li>
<li><a href="../fr436438/index.html">Roscosmos a appel√© les raisons possibles de la perte de communication avec l'observatoire orbital Spektr-R</a></li>
<li><a href="../fr436442/index.html">Une t√™te est bonne, et deux est meilleure, ou la programmation par paires en action</a></li>
<li><a href="../fr436444/index.html">D√©ploiement invisible d'une application monolithique en production sur AWS. Exp√©rience personnelle</a></li>
<li><a href="../fr436448/index.html">Moniteur IPS 27 pouces Acer HA270bid: pour l'auto-am√©lioration</a></li>
<li><a href="../fr436450/index.html">T√©l√©commande et contr√¥le, libert√© et gouvernement. Conversation avec Staply</a></li>
<li><a href="../fr436452/index.html">7 domaines de d√©veloppement Linux en 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>