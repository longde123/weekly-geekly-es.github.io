<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë© üöî üë©üèø‚Äçüéì Vorteile der Analyse von Level 7-Anwendungen in Firewalls. Teil 2. Sicherheit üìÑ üõí ü§í</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die neue Generation von Firewalls ist dank der neuen Engine-Architektur und der neuen Ideologie der Verwaltung von Netzwerkfl√ºssen bequemer und sicher...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vorteile der Analyse von Level 7-Anwendungen in Firewalls. Teil 2. Sicherheit</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436836/"><img src="https://habrastorage.org/getpro/habr/post_images/786/9e4/d4e/7869e4d4eac6b07b8bfa763cb3985347.png"><br><br>  Die neue Generation von Firewalls ist dank der neuen Engine-Architektur und der neuen Ideologie der Verwaltung von Netzwerkfl√ºssen bequemer und sicherer. <br><br><h3>  Warum ist dieser Artikel erschienen? </h3><br><blockquote>  Immer wieder kamen andere Sicherheitsmitarbeiter, die eine neue Generation von Firewalls verwenden, und stellten fest, dass sie weiterhin Regeln f√ºr Portnummern schreiben.  Auf meinen Vorschlag, unter dem Namen der Bewerbungen weiter zu schreiben, h√∂rte ich "Was ist, wenn es so nicht funktioniert?".  Wenn Sie auch "Angst" haben oder nicht klar ist, warum Sie die Regeln f√ºr Anwendungen schreiben sollen, ist dieser Artikel f√ºr Sie. </blockquote><a name="habracut"></a>  Beginn des Artikels durch Bezugnahme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1. Grundlagen der Firewall</a> <br><br><a name="Start"></a><h1>  Teil 2. Sicherheitsauswirkungen von L7 FIREWALL </h1><br><h3>  Inhalt </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">L7-Firewall pr√ºft den Inhalt des Datenfeldes, L4-Firewall-Nr</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anwendungen haben sich ge√§ndert - hat sich Ihre Firewall ge√§ndert?</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">So funktioniert die Verkehrserkennung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">L7 Firewall ist bequemer</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">L7 Firewall ist sicherer</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Welche neuen Probleme schaffen einen neuen Ansatz zum Schreiben von Regeln f√ºr L7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einschr√§nkungen der Analysetechnologie der Stufe 7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fazit</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Abstimmung</a> <br><br><a name="Data"></a><h2>  L7-Firewall pr√ºft den Inhalt des Datenfeldes, L4-Firewall-Nr </h2><br><blockquote>  <b>Das Hauptproblem, mit dem wir zu k√§mpfen haben, ist, dass die Programme jetzt sofort so geschrieben werden, dass sie den L4-Firewall-Schutz umgehen.</b> </blockquote>  Wenn eine Person Skype verwendet, m√∂chte sie den Systemadministrator nicht anrufen und darum bitten, den von ihr ben√∂tigten Port f√ºr die Firewall zu √∂ffnen. Sie m√∂chte, dass Skype sofort "gr√ºn" leuchtet.  Programmierer wissen, dass h√§ufig ein HTTP-Proxy im Netzwerk vorhanden ist oder Port 80 f√ºr HTTP ge√∂ffnet ist, Port 53 f√ºr DNS, Port 123 f√ºr NTP und manchmal f√ºr Mitarbeiter von innen nach au√üen zum Internet, alles offen ist und Sie diese zul√§ssigen Verbindungen entsprechend verwenden k√∂nnen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6de/735/726/6de735726e071aab7f3a122cb9e7fd34.png"><br><br>  Die Entwickler haben den Begriff User Experience - nach der Installation hat der Client in gr√ºnem Skype Feuer gefangen = der Client ist zufrieden.  Und die Tatsache, dass Skype den Perimeter des Unternehmens illegal √ºber eine Verbindung passiert hat, die nur an TCP / 80- und 443-Ports f√ºr den Browser ge√∂ffnet war - die L4-Firewall ignoriert dies, da es nicht seine Aufgabe ist, den Inhalt der Pakete zu √ºberpr√ºfen -, sind ihm nur die Header wichtig. <br><br><h3>  L4-Firewall-Problem: Port-Hopping (Tunneling) </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/e3e/aa8/502/e3eaa85023c8a83afe2fd9410e866965.png" align="left">  Das Tunneln nicht autorisierter Anwendungen innerhalb zul√§ssiger Verbindungen ist in modernen Netzwerken ein Standardbild.  Nat√ºrlich verwenden Hacker denselben Trick: Sie erstellen Tunnel in zul√§ssigen Verbindungen.  Und die Sicherheitskr√§fte wissen es nicht einmal. <br><br><h3>  Beispiel f√ºr einen TCP-Over-DNS-Tunnel </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/30d/c7e/f30/30dc7ef30cfc1ca8c880c9d54ac9f3b7.png"><br><br>  Aus den gesammelten Verkehrspaketen im Bild geht hervor, dass am 53. TCP-Port Verbindungen bestehen, was normalerweise als Betrieb des DNS-Protokolls angesehen wird.  Wenn Sie genau hinschauen, k√∂nnen Sie jedoch feststellen, dass im Feld Text des DNS-Protokolls eine Art verschl√ºsselter Text vorhanden ist.  Dies ist eine Implementierung des TCP-Over-DNS-Tunnels, den ich h√§ufig in Unternehmensnetzwerken sehe.  Auf der linken Seite finden Sie eine Liste anderer Tunnel, die Ihre Benutzer oder Hacker verwenden k√∂nnen.  Gibt die L4-Firewall solche Informationen?  Nein.  Wenn Sie das Unternehmen daher vor nicht autorisierten Tunneln sch√ºtzen m√ºssen, m√ºssen Sie den Inhalt der √ºbertragenen Daten analysieren und damit analysieren, welche Anwendung derzeit diese TCP-Verbindung verwendet. <br><br><a name="App"></a><h2>  Anwendungen haben sich ge√§ndert - hat sich Ihre Firewall ge√§ndert? </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/f4d/ee2/573/f4dee257312a6c98e9607812d9976731.png"><br><br>  Die Welt hat sich ver√§ndert und heute reicht es nicht mehr aus, die Anwendung anhand der Portnummer zu bestimmen.  Ja, vor 20 Jahren waren wir uns einig, dass wenn 80 in das Feld Port geschrieben wird, dies HTTP ist, wenn 53, dann ist dies DNS, aber jetzt ist es nicht so! <br><br>  Es ist notwendig, den Inhalt der √ºbertragenen Daten zu analysieren und zu analysieren, welche Anwendung derzeit diese TCP-Verbindung verwendet. <br><br>  Gehen Sie zur Anwendungsdatenbank <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">applipedia.paloaltonetworks.com</a> .  Sehen Sie, wie viele Anwendungen die Ports 80 und 443 verwenden. <br><blockquote>  <b>Ein Beispiel.</b> <br><br>  Anwendungen mit Port 80 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/522/b2d/510/522b2d51051df42c0ead70785e0c7e71.png"><br></blockquote><blockquote><h3>  Das Problem bei vielen Sicherheitsfunktionen besteht darin, Anwendungen an nicht standardm√§√üigen Ports zu ignorieren. </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/8a9/ece/07d/8a9ece07d27298757b7a0819107f88c8.png" align="left"><br>  Durch das Verschieben einer Standardanwendung auf einen nicht standardm√§√üigen Port kann ein Angreifer auch au√üer Kontrolle geraten.  Dieses Steuerelement stellt nur das Ger√§t wieder her, das den Inhalt des gesamten Datenverkehrs analysiert, und nicht nur die Header. </blockquote><br><a name="Visual"></a><h2>  So funktioniert die Verkehrserkennung </h2><br>  Eine der Aufgaben der Anwendungsanalyse besteht darin, den Datenverkehr von Anwendungen zu erkennen, die speziell erstellt wurden, damit ihre Verbindungen nicht sichtbar sind.  Nehmen Sie zum Beispiel Skype.  Menschen, die gelernt haben, Skype-verschl√ºsselte UDP-Pakete von anderen verschl√ºsselten UDP-Paketen zu unterscheiden, sind sehr gute Kollegen. <br><br>  Es gibt auch eine Klasse von Ger√§ten, die dies tun k√∂nnen: Deep Packet Inspection (im Folgenden: DPI).  Solche Ger√§te sind jetzt bei gro√üen Anbietern erh√§ltlich und erm√∂glichen es Ihnen, den Anwendungsverkehr zu manipulieren: QoS anwenden oder in die richtige Richtung umleiten.  Manchmal werden NGFW und DPI verglichen.  Unterschied: DPI dient zur Kontrolle der Verkehrsqualit√§t und der NGFW-Sicherheit, obwohl NGFW auch √ºber QoS-Funktionen verf√ºgt. <br><br>  Die Methoden zum Erkennen von Anwendungen im Datenverkehr sind unterschiedlich. <br><br><ul><li>  Wenn Sie eine <b>Anwendung</b> suchen m√ºssen, die <b>sich nicht</b> im Datenverkehr <b>versteckt</b> , z. B. HTTP, reicht es aus, die √ºblichen Suchvorg√§nge nach den entsprechenden Mustern oder Signaturen durchzuf√ºhren.  Und das wird von den Herstellern aktiv genutzt.  Das ist am einfachsten. <br></li><li>  Wenn Sie eine <b>Anwendung</b> suchen m√ºssen, die sich <b>absichtlich versteckt</b> , z. B. TOR, ben√∂tigen Sie eine Reihe von Methoden zur Analyse der Paketstatistik und des Paketverhaltens.  Dies ist schwierig, es erfordert ein Forschungslabor, das auch √Ñnderungen im Protokoll rechtzeitig verfolgen und neue Suchalgorithmen implementieren muss.  Meine Versuche, mindestens einen Entwickler dazu zu bringen, zu erkl√§ren, wie diese Algorithmen funktionieren, sto√üen auf die Antwort, dass dies alles geistiges Eigentum ist. <br></li></ul><br>  Es kommt vor, dass die Anwendung den Betriebsalgorithmus bereits ge√§ndert hat und die DPI- oder NGFW-Engine noch keine √Ñnderung vorgenommen hat.  Beispielsweise √§ndert sich das Telegramm manchmal, weil es gejagt wird.  Es treten falsch positive Ergebnisse auf.  Dies ist wichtig zu √ºberpr√ºfen.  Dementsprechend unterscheiden sich Ger√§te sowie NGFW und DPI haupts√§chlich in der Anzahl und Qualit√§t der Anwendungserkennung.  Hier ist die einzige Methode: Setzen Sie NGFW auf Ihren Datenverkehr und sehen Sie.  Wenn wir √ºber den Perimeter sprechen, dann enthielt der komplexeste Verkehr, den ich sah, 715 verschiedene Anwendungen pro Monat.  Im Durchschnitt durchlaufen 200-300 Anwendungen verschiedener Art den Umfang.  In dieser Visualisierung des Anwendungsverkehrs sehen Sie Folgendes: Maus √ºber jeden Kreis: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://researchcenter.paloaltonetworks.com/app-usage-risk-report-visualization/</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><br><img src="https://habrastorage.org/getpro/habr/post_images/945/099/048/94509904864c2cfeba02858aabf7127e.png"></a> <br><br>  Die Anwendungsdatenbank enth√§lt Tausende von Anwendungen. Die Analyse der Formate und Algorithmen jeder Anwendung ist daher eine lange und sorgf√§ltige Arbeit der Analysten.  Sobald wir verstehen, wie die Anwendung funktioniert, beginnen Programmierer zu arbeiten, die die Anwendungserkennung durch Datenverkehr implementieren.  Und diese wenigen tausend Anwendungen √§ndern sich st√§ndig.  Dementsprechend muss das Produkt st√§ndig unterst√ºtzt werden, neue Anwendungen erlernen, √Ñnderungen an alten √ºberwachen und der Datenbank modifizierte Detektoren hinzuf√ºgen.  Die Datenbank aller m√∂glichen Anwendungen, die Datenverkehr generieren, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">finden Sie hier</a> . <br><br>  Manchmal versuchen L7-Firewall-Anbieter, die Anzahl der Anwendungen in der Datenbank zu messen, aber dies ist eher eine Obsz√∂nit√§t.  Wenn Sie kritisches Denken aktivieren, verstehen Sie, dass Sie in der Realit√§t nur Anwendungen im Umkreis (durchschnittlich im Bereich von 300 verschiedenen Anwendungen), im Rechenzentrum (10-15 Teile), in ICS / SCADA-Netzwerken (2-3 Anwendungen) zwischen internen Anwendungen erkennen m√ºssen Segmente (vielleicht sind es nur ein paar Dutzend).  Und wenn Ihnen angeboten wird, Tausende von Anwendungen zu erkennen, ist dies nur Marketing und die Erkennung einiger unbekannter Anwendungen, die niemand verwendet. <br><br>  <b>Beispielanwendungen im Netzwerk eines Unternehmens:</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/240/186/ad2/240186ad2ca0654136be608ba2238460.png" alt="Bild"><br><br>  Die interne Segmentierung innerhalb des Unternehmens ist eine st√§ndige Anforderung an Informationssicherheitsstandards, die fast niemand erf√ºllt.  Zwischen den Segmenten, in denen Programmierer, Finanziers, Personal und Buchhaltung t√§tig sind, werden auch Anwendungen ausgef√ºhrt.  Zumindest m√ºssen Sie das Windows-Netzwerk (SMB-Protokoll) steuern. Dies wurde besonders deutlich nach der WannaCry-Cryptoclocker-Epidemie, die √ºber SMB verbreitet wurde.  Das hei√üt, interne Netzwerke m√ºssen auch Level 7-Anwendungen und verwandte Methoden analysieren, um in der Sandbox und im IPS nach b√∂sartigem Code zu suchen und zumindest die √ºbertragenen Dateitypen zu steuern. <br><blockquote>  Das h√§ufigste Problem, das in Netzwerken auftritt: Die Firewall ist angeblich Level 7, erkennt jedoch in Wirklichkeit Anwendungen nach Port.  Wie √ºberpr√ºfe ich das? <br><br><ol><li>  H√§ngen Sie f√ºr den Test den FTP-Server an Port 25 auf.  Wenn sich das Ger√§t irrt und angibt, dass es sich um das SMTP-Protokoll handelt, handelt es sich definitiv nicht um die L7-Firewall. </li><li>  Oder schreiben Sie einfach Regeln f√ºr zwei verschiedene Anwendungen, die denselben Port verwenden.  Machen Sie unterschiedliche Regeln f√ºr sie: In einem Block erlauben exe-Dateien, in dem anderen, sie.  Wenn sich herausstellt, dass dies erledigt ist, bedeutet dies, dass die Wahrheit darin besteht, zuerst die Anwendung (nicht die Portnummer) zu analysieren und dann mit ihrem Inhalt zu arbeiten: Dateien blockieren, Virensignaturen √ºberpr√ºfen, IPS-Signaturen √ºberpr√ºfen und so weiter. </li><li>  Ein weiterer interessanter Test f√ºr NGFW ist, wenn Sie zwei benutzerdefinierte L7-Anwendungen mit unterschiedlichen Eigenschaften auf derselben IP-Adresse erstellen m√ºssen.  Dies kann keine L4-Firewall, sondern eine L7-Firewall.  Vollst√§ndige Beschreibung und Test selbst hier: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://basic.ngfw-test.com/</a> </li></ol></blockquote>  In Russland ist es immer noch wichtig, dass Firewalls den Datenverkehr russischer Anwendungen kennen: 1C, Odnoklassniki, Yandex.Disk, mail.ru, wie Kaspersky Anti-Virus-Updates aussehen und so weiter.  Dies ist auch eine wichtige Anwendungserkennungskomponente, die Sie ben√∂tigen, um diese Anwendungen Ihren Mitarbeitern sicher zu erm√∂glichen. <br><br><a name="Comfort"></a><h2>  L7 Firewall ist bequemer </h2><br>  Wenn Sie sich den Prozess der Ausbildung von Netzwerktechnikern ansehen, nehmen die meisten Teilnehmer an Kursen eines bekannten Herstellers von Netzwerkger√§ten teil, was ein gutes Wissen √ºber Netzwerktechnologien vermittelt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e73/5bc/284/e735bc2844f2258e4d11fe3e702d2fd2.jpg"><br><br>  Der Autor dieser Zeilen hat 2003 eine anst√§ndige Anzahl von Cisco-Kursen abgeschlossen und stellt daher die Merkmale der Schulung f√ºr Netzwerktechniker vor: In der Regel werden nach dem Studium des siebenstufigen OSI-ISO-Modells nur die ersten vier Stufen im Detail untersucht.  Das hei√üt, alle Feinheiten der Netzwerktechniker f√ºr Informationssicherheit kennen nur die Ebene von TCP / UDP / ICMP.  Auf Anwendungsebene werden nur einige grundlegende Aspekte ber√ºcksichtigt: HTTP, DNS, SSH, Telnet, NTP, FTP.  Was ist das Ergebnis?  Und der Netzwerkadministrator ist der Ansicht, dass die Verwaltung der Anwendungsschicht √ºber die Transportschicht einfach ist! <br><br>  Ein frisch gebackener Netzwerkspezialist mag den Eindruck haben, dass alles mit Regeln auf Transportebene erledigt werden kann, bei denen Sie nur das erforderliche Protokoll und den erforderlichen Port zulassen m√ºssen.  M√ºssen Sie einen Browser im Internet zulassen?  Wir √∂ffnen TCP / 80.  M√ºssen Sie DNS √∂ffnen?  √ñffnen Sie TCP / 53 oder UDP / 53.  M√ºssen Sie RDP √∂ffnen?  √ñffnen Sie TCP / 3389.  Das Schreiben von Regeln f√ºr die L4-Firewall wird zum Standard im Unternehmen. <br><br>  Ich muss sagen, dass viele IT-Spezialisten das Konzept der Statefull Inspection kennen.  Gleichzeitig ist es f√ºr viele eine Offenbarung, dass verschiedene Firewalls die Satefull-Inspektion f√ºr verschiedene Anwendungen unterst√ºtzen.  Ich habe bestimmte Statistiken, weil ich als Lehrer f√ºr Firewall-Kurse im Schulungszentrum der Firma Informzashita gearbeitet habe.  Was sehe ich  Jemand glaubt, dass es bei einer vollst√§ndigen √úberpr√ºfung nur um die Erlaubnis geht, TCP / UDP / ICMP-Protokollantworten zur√ºckzunehmen.  Aber was ist mit komplexeren Anwendungen?  Wie k√∂nnen beispielsweise zwei TCP-Verbindungen verfolgt werden, die das FTP-Protokoll an den Ports 21 und 20 herstellt? Sind sie voneinander abh√§ngig?  Dort m√ºssen Sie nicht nur die Antwort akzeptieren, sondern auch die zweite Verbindung, abh√§ngig vom PORT-Befehl, innerhalb der Steuerverbindung an Port 21 zulassen.  Und wie viele weitere Anwendungen zum √ñffnen neuer Verbindungen in sich geben Anwendungen?  Zusammenfassend verwenden die Netzwerke jetzt die √ºbliche Zugriffsliste, die den PORT-Befehl im FTP-Protokoll nicht versteht, und es gibt die L4-Firewall, die den PORT-Befehl zerlegt und den gew√ºnschten Port automatisch √∂ffnet. Es gibt jemanden, der weiter gegangen ist und sich die komplexeren MS RPC- oder ICS-Protokollbefehle ansieht / SCADA-Protokolle.  Alle m√∂glichen Anwendungen der L4-Firewall sehen jedoch nicht so aus, und diese Firewalls unterscheiden sich im Allgemeinen auch in der Anzahl der Anwendungen, die im Application Layer Gateway (ALG) implementiert sind. <br><br>  Worauf komme ich hinaus?  Die √úberzeugung, dass nur das Erinnern an die wichtigsten TCP / UDP-Ports nicht funktioniert. <br>  Es gibt bereits mehrere tausend Anwendungen auf der Welt, die alle Computernetzwerke verwenden.  Und kein Netzwerktechniker kann sich an all diese Ports erinnern. <br><br>  Die Offenbarung f√ºr Netzwerktechniker ist die Aufgabe, Ports f√ºr eine komplexere Anwendung, beispielsweise VNC, zu √∂ffnen.  Niemand merkt sich, welche Ports dort sind und muss Google verwenden. <br><blockquote>  Bei der Ver√∂ffentlichung des ersten Teils habe ich eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Umfrage durchgef√ºhrt</a> und festgestellt, dass die Benutzer immer noch bereit sind, sich an die Portnummern zu erinnern. Die Meinungen wurden durch 50 bis 50 geteilt: Jemand antwortete, er sei bereit, sich an alle vier Ports der VNC-Anwendung zu erinnern. <br><br>  Vielleicht ist Lync (auch bekannt als Skype for Business) der Champion in Bezug auf die Anzahl der Ports.  √úber 40 Ports.  Ist es realistisch, sich an sie zu erinnern? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/795/133/dad/795133dad8b8ad8e24d78cfba7d8056c.png"></blockquote>  Wenn Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sich</a> Microsoft TechNet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ansehen</a> , das beschreibt, welche Ports Sie √∂ffnen m√ºssen, dann m√∂chte ich eine Erlaubnis f√ºr jede Regel schreiben, da es ungef√§hr 40 Ports gibt und einige von ihnen dynamisch ge√∂ffnet werden m√ºssen.  Und es ist katastrophal unpraktisch, sich in der L4-Firewall zu registrieren. <br><br>  Es stellt sich heraus, dass es f√ºr einen Netzwerktechniker bequemer ist, die Regeln der L7-Anwendung zu schreiben, und dass die Firewall selbst die erforderlichen Ports automatisch √∂ffnet. <br><br>  M√ºssen Sie VNC √∂ffnen?  Sie schreiben das Wort VNC in die Regel und die Firewall versteht bereits, welche zugrunde liegenden Protokolle Sie √∂ffnen m√ºssen.  Das ist praktisch. <br><br>  <b>Ein Beispiel.</b>  <b>NGFW-Bericht zu ausgew√§hlten Verkehrskategorien.</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d38/cf1/44f/d38cf144fe1b72801cb6665551f246f7.png"><br><br>  Im Durchschnitt verwenden 200 bis 300 Anwendungen den Internetzugang eines Unternehmensnetzwerks.  Die Firewall auf Anwendungsebene zeigt an, um welche Anwendungen es sich handelt, und kann diese Anwendungen f√ºr alle oder f√ºr bestimmte Benutzer filtern und Dateien nach Typen oder Inhalten filtern, die f√ºr alle Benutzer im Unternehmensnetzwerk zu zul√§ssigen Anwendungen geh√∂ren.  Vergessen Sie auch nicht, dass in NGFW die Sicherheitsfunktionen parallel arbeiten: IPS, Antivirus, Anti-Spyware, URL-Filter, DNS-Filter, Threat Intelligence usw.  Das hei√üt, wir erlauben nicht nur Anwendungen, sondern tun dies sicher. <br><br><a name="Security"></a><h2>  L7 Firewall ist sicherer </h2><br>  Ich habe die Palo Alto Networks NGFW zur Hand.  Ich habe drei verschiedene Regeln darauf geschrieben.  Mal sehen, wie sie sich unterscheiden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/934/f87/9d9/934f879d9fc26ca130016ebcf12d3986.png"><br><br>  Wenn Sie jemals eine Firewall konfiguriert haben, sehen Sie, dass ich SSL f√ºr verschiedene Benutzergruppen: VIP, Marketing und Programmierer auf drei verschiedene Arten aktiviert habe. <br><br><ol><li>  <b>VIP-</b> Benutzer k√∂nnen <b>auf Port 443 zugreifen und darin SSL verwenden</b> , da dies der Standardport f√ºr SSL ist.  Wenn sie versuchen, auf Port 443 zuzugreifen, z. B. regul√§res Telnet, ist dies nicht erfolgreich. Die Firewall √ºberpr√ºft, ob es sich nicht um SSL handelt, und blockiert es.  Und das brauchen Sie! </li><li>  <b>Marketing</b> kann <b>mit SSL an jeden Port</b> gehen, da im Feld Service, in dem die Ports angegeben sind, jeder Port zul√§ssig ist.  Die Frage ist, ob das Marketing SSL auf nicht standardm√§√üigen Ports verwenden soll.  Nein.  Dies ist ein h√§ufiger Konfigurationsfehler.  Die Angabe eines Ports als beliebiger Port ist logisch, wenn die Regel unzul√§ssig ist, dh wenn SSL an einem beliebigen Port verboten werden soll. </li><li>  <b>Programmierer</b> k√∂nnen <b>mit jeder Anwendung auf Port 443</b> gehen, was eigentlich eine L√ºcke ist, da ich urspr√ºnglich nur SSL √∂ffnen wollte.  Und genau so funktioniert die L4-Firewall - sie √∂ffnet den Port und dann ist es ihm egal, was da ist und welche Anwendungen diesen Port verwenden.  Jeder Programmierer in der Programmierergruppe kann einen beliebigen Tunnel verwenden. </li></ol><br>  Das Festlegen der <b>Anwendungsstandards ist</b> sehr wichtig und erm√∂glicht es Ihnen, die Anzahl der Regeln zu reduzieren: Sie k√∂nnen die erforderlichen Anwendungen in der Spalte "Anwendung" in einer Regel angeben, und die Firewall selbst √∂ffnet die erforderlichen Ports f√ºr die erforderlichen Anwendungen, und nur die Anwendungen, die dorthin gehen sollen, passieren diese Ports.  Dementsprechend ben√∂tigen Sie eine Regel, um mehrere Anwendungen zu √∂ffnen. <br><br>  F√ºr die folgende Regel, bei der alle Mitarbeiter standardm√§√üig nur auf das Internet zugreifen d√ºrfen, √ºberpr√ºft NGFW beispielsweise st√§ndig, ob nur der DNS-Client am 53. Port und nicht TCP-over-DNS vorhanden sein soll.  Dies erh√∂ht nat√ºrlich die Sicherheit, da Sie nicht nur Anwendungen zulassen, sondern auch steuern, dass nur Anwendungen, die Sie zulassen, offene Kan√§le durchlaufen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/268/a16/3c8/268a163c8dc1bb195b9c34e02e18da65.png"><br><br><a name="Issues"></a><h2>  Welche neuen Probleme schaffen einen neuen Ansatz zum Schreiben von Regeln f√ºr L7 </h2><br>  Sie m√ºssen verstehen, dass das Bestimmen der Anwendung anhand des Paketinhalts f√ºr den L7-Firewall-Prozessor sehr stressig ist.  Wenn die √ºbliche L4-Firewall nur einige Bytes des TCP-Paket-Headers √ºberpr√ºft und dann die verbleibenden Megabyte des Flash-Clips ohne √úberpr√ºfung √ºbergeben hat, sollte die L7-Firewall alles lesen, was im TCP / IP-Datenfeld gespeichert ist, und st√§ndig √ºberpr√ºfen, welcher Inhalt sich in der TCP / IP-Verbindung befindet, pl√∂tzlich ge√§ndert oder eine Bedrohung f√ºr das Unternehmen darstellt.  Als eine Funktion wie die Inhaltsanalyse auftauchte, wurden alle Ger√§te langsamer.  Daher erfordert die Inhaltsanalyse leistungsf√§higere Ger√§te. <br><br><a name="Limitations"></a><h2>  Einschr√§nkungen der Analysetechnologie der Stufe 7 </h2><br>  Die L7-Firewall ben√∂tigt mehr Speicher, um den Status einer Verbindung zu speichern. Daher ist der Parameter "Anzahl gleichzeitiger Verbindungen" der L7-Firewall immer niedriger als der der L4-Firewall mit der gleichen RAM-Gr√∂√üe auf beiden Ger√§ten und deutlich alle 10 Mal. Dies wurde bereits oben im Abschnitt "Statefull" erl√§utert Inspektion  Und das ist der Preis f√ºr die Sicherheit Ihrer Anwendungen.  Wenn Sie also die L4- und L7-Inspektion vergleichen, fragen Sie den Hersteller, wie er den Parameter ‚ÄûAnzahl gleichzeitiger Sitzungen‚Äú gemessen hat: mit aktivierter Sicherheit auf Stufe 7 oder mit deaktivierter Sicherheit. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Gleiche gilt f√ºr die Leistung: Der L4-Firewall-Prozessor √ºberpr√ºft nur einige Bytes des Paket-Headers und √ºbertr√§gt dann die Daten selbst mit Routing-Geschwindigkeit ohne √úberpr√ºfung. Die L7-Firewall √ºberpr√ºft sowohl den Header als auch alle Megabyte an Daten, die in nachfolgenden Verbindungspaketen enthalten sind. Und das ist ein ganz anderer Job. Daher m√ºssen solche Arbeiten auf speziellen Hardwareplattformen durchgef√ºhrt werden, auf denen die Anwendungsanalyse beschleunigt, das Streaming von Antivirenprogrammen beschleunigt, IPS und andere Sicherheitsfunktionen beschleunigt werden. Das Beste ist, dass es Cavium gelungen ist, Chips zur Beschleunigung der Sicherheit zu entwickeln, deren Chips beispielsweise von Palo Alto Networks verwendet werden.Durch die Verwendung spezialisierter FPGA-Chips (FPGAs) k√∂nnen Sie au√üerdem die Antiviren- und IPS-Signaturen in den Chip selbst flashen, und die Signatur√ºberpr√ºfung wird mit der Hardwaregeschwindigkeit des FPGA-Chips durchgef√ºhrt. Jetzt k√∂nnen sogar PCs die Grafikfunktionen auf dedizierten GPUs beschleunigen. Die Verwendung von Chips zur Beschleunigung der Sicherheit ist daher eine logische Weiterentwicklung der Technologie.</font></font><br><br><a name="end"></a><h2>  Fazit </h2><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstens</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist die Verwaltung der Sicherheit in der L7-Firewall einfacher. Zuvor haben Sie die Dokumentation des Anwendungsherstellers lange gelesen und die dort aufgef√ºhrten Ports ge√∂ffnet. Jetzt ist es ganz einfach: Geben Sie den Namen der Anwendung in der NGFW-Regel an. Die erforderlichen Ports werden abh√§ngig vom Verbindungsstatus dieser Anwendung automatisch aufgel√∂st. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zweitens</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> k√∂nnen Sie das Tunneln erkennen und blockieren, da die L7-Firewall nur eine explizit angegebene Anwendung sicher zul√§sst. Wenn jemand versucht, eine andere Anwendung √ºber einen offenen Port zu tunneln, wird sie sofort erkannt und blockiert. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drittens</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen die gew√ºnschte Anwendung an jedem gew√ºnschten Port zulassen, und nur die gew√ºnschte Anwendung wird an diesem Port und nicht alle gleichzeitig ausgef√ºhrt. </font><font style="vertical-align: inherit;">Beispielsweise verwendet nur ein Webbrowser Port 80. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil 3. SSL-Entschl√ºsselung in NGFW. </font><font style="vertical-align: inherit;">(Fortsetzung folgt) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alles Gute! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Denis Batrankov </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">denis@batrankov.ru</font></font><a name="vote"></a></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de436836/">https://habr.com/ru/post/de436836/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de436794/index.html">DEFCON-Konferenz 19. Anonym und wir. Teil 2</a></li>
<li><a href="../de436798/index.html">Professionelle Deformation des Administrators</a></li>
<li><a href="../de436822/index.html">Android Robotics bis 2019: Die wahre Geschichte; in 5 Teilen; Teil 3</a></li>
<li><a href="../de436828/index.html">Der √úbergang zu Boost-1.65.1 und aufgetretene Fehler</a></li>
<li><a href="../de436830/index.html">Android Robotics bis 2019: Die wahre Geschichte; in 5 Teilen; Teil 5</a></li>
<li><a href="../de436838/index.html">Faltungsneurale Netze durch Visualisierungen in PyTorch verstehen</a></li>
<li><a href="../de436840/index.html">Der Weg vom Glanz zur Neurowissenschaft: Ein thematischer Podcast √ºber Karrieren im Medien- und Content-Marketing</a></li>
<li><a href="../de436842/index.html">Veeam-L√∂sung zur Sicherung und Wiederherstellung virtueller Maschinen auf der Nutanix AHV-Plattform. Teil 2</a></li>
<li><a href="../de436846/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 348 (14. - 20. Januar 2019)</a></li>
<li><a href="../de436848/index.html">Die NSA k√ºndigt die Ver√∂ffentlichung eines internen Tools f√ºr das Reverse Engineering an</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>