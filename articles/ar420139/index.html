<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧔🏿 🚵🏽 😠 كتاب "هندسة موثوقية الموقع. الموثوقية والموثوقية كما في Google » 🎰 🥐 🚿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="منذ ما يقرب من 20 عامًا ، تقدم Google أنظمة معقدة وواسعة النطاق بشكل لا يمكن تخيله وحساسة لطلبات المستخدمين. يعثر محرك بحث Google على الإجابة عن أي أس...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>كتاب "هندسة موثوقية الموقع. الموثوقية والموثوقية كما في Google »</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/420139/" style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/dx/hl/8t/dxhl8tgecl0xwqtx3pnxztosrom.jpeg" align="left" alt="الصورة"></a>  منذ ما يقرب من 20 عامًا ، تقدم Google أنظمة معقدة وواسعة النطاق بشكل لا يمكن تخيله وحساسة لطلبات المستخدمين.  يعثر محرك بحث Google على الإجابة عن أي أسئلة في جزء من الثانية ، وتعكس خرائط Google بأعلى دقة المشهد الأرضي ، ويتوفر بريد Google في وضع 365/24/7 ، وبصورة أساسية ، أصبح التخزين السحابي العام الأول.  هل هذه الأنظمة لا تشوبها شائبة؟  لا ، إنهم يفشلون أيضًا ، ويتعطلون ويصبحون عفا عليها الزمن ، مثل أي معدات.  نحن فقط لا نلاحظ ذلك.  الشيء هو أنه منذ أكثر من عشر سنوات ، تعمل Google على تطوير تقنية هندسة موثوقية الموقع الفريدة ، والتي تضمن التشغيل المتواصل والتطوير التدريجي لأنظمة البرامج بأي تعقيد.  هذا الكتاب عبارة عن مخزن خبرة تراكمته Google على مدار سنوات عديدة ، وهو عمل جماعي للعديد من المتخصصين البارزين ومورد لا غنى عنه لأي مهندس يريد تطوير وصيانة أي منتجات بأعلى جودة وأكثر كفاءة. <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  SRE جوجل من حيث SRE </h3><br>  تختلف مراكز بيانات Google (مراكز البيانات) اختلافًا كبيرًا عن مراكز البيانات التقليدية و "مزارع" الخوادم الصغيرة.  تقدم هذه الاختلافات مشاكل إضافية وفرصًا إضافية.  يناقش هذا الفصل التحديات والفرص الخاصة بمراكز بيانات Google ويقدم المصطلحات التي سيتم استخدامها خلال الكتاب. <br><br>  <b>المعدات</b> <br><br>  تقع معظم موارد الحوسبة في Google في مراكز البيانات التي صممتها الشركة ، والتي لديها نظام إمداد الطاقة الخاص بها ونظام التبريد والشبكة الداخلية ومعدات الحوسبة [Barroso et al.، 2013].  على عكس مراكز البيانات النموذجية التي يوفرها مقدمو الخدمة لعملائهم ، فإن جميع مراكز بيانات Google مجهزة بنفس الأجهزة 1.  لتجنب الخلط بين أجهزة الخادم وبرامج الخادم ، نستخدم في هذا الكتاب المصطلحات التالية: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <i>آلة (كمبيوتر)</i> - وحدة من المعدات (أو ربما آلة افتراضية) ؛ </li><li style=";text-align:right;direction:rtl">  <i>الخادم</i> - وحدة برمجية تنفذ خدمة. </li></ul><br>  يمكن تشغيل أي خادم على الأجهزة ، لذلك لا نخصص أجهزة كمبيوتر معينة لبرامج خادم معينة.  على سبيل المثال ، ليس لدينا جهاز معين يعمل عليه خادم البريد.  بدلاً من ذلك ، يتم تخصيص الموارد من خلال نظام إدارة مجموعة Borg. <br><br>  نحن نتفهم أن مثل هذا الاستخدام لمصطلح "الخادم" غير قياسي.  من المعتاد أكثر تحديد مفهومين في وقت واحد: برنامج يخدم اتصالات الشبكة ، وفي نفس الوقت جهاز يقوم بتشغيل مثل هذه البرامج ، ولكن عندما نتحدث عن قوة الحوسبة في Google ، يكون الفرق بينهما كبيرًا.  بمجرد التعود على تفسيرنا لكلمة "خادم" ، سيصبح من الواضح لك سبب أهمية استخدام مثل هذه المصطلحات المتخصصة ليس فقط في Google مباشرة ، ولكن في جميع أنحاء هذا الكتاب. <br><br>  في الشكل.  2.1 أظهر تكوين مركز بيانات Google. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يتم وضع عشرات السيارات على الرفوف. </li><li style=";text-align:right;direction:rtl">  رفوف تقف في صفوف. </li><li style=";text-align:right;direction:rtl">  يتكون صف واحد أو أكثر من مجموعة. </li><li style=";text-align:right;direction:rtl">  عادة في بناء مركز البيانات (DPC) ، أو مركز البيانات ، توجد عدة مجموعات. </li><li style=";text-align:right;direction:rtl">  تشكل العديد من مباني مراكز البيانات القريبة من بعضها البعض الحرم الجامعي. </li></ul><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/-3/no/2i/-3no2ios8vkdcddiea5ynqaaz1s.png" alt="الصورة"></div><br>  داخل كل مركز بيانات ، يجب أن تكون جميع الأجهزة قادرة على الاتصال بفاعلية مع بعضها البعض ، لذلك أنشأنا مفتاحًا افتراضيًا سريعًا (مفتاح) بعشرات الآلاف من المنافذ.  كان ذلك ممكنًا من خلال ربط مئات المفاتيح التي طورتها Google في "مصنع" قائم على هيكل شبكة Clos [Clos، 1953] ، والمُسمى Jupiter [Singh et al.، 2015].  في أقصى تكوين لها ، يدعم المشتري إنتاجية 1.3 Pb / s بين الخوادم. <br><br>  ترتبط مراكز البيانات ببعضها البعض باستخدام شبكة العمود الفقري العالمية B4 [Jain et al.، 2013].  يحتوي B4 على بنية شبكة قابلة للتكوين من البرامج ويستخدم بروتوكول الاتصال المفتوح OpenFlow.  يوفر B4 عرض نطاق ترددي عريض لعدد محدود من الأنظمة ويستخدم التحكم المرن في عرض القناة لزيادة متوسط ​​قيمته إلى أقصى حد [كومار وآخرون ، 2015]. <br><br><h3 style=";text-align:right;direction:rtl">  برمجيات النظام التي "تنظم" المعدات </h3><br>  يجب أن تكون البرامج التي توفر إدارة وتنظيم معداتنا قادرة على التعامل مع أنظمة ضخمة.  أعطال الأجهزة هي واحدة من المشاكل الرئيسية التي تم حلها بمساعدة البرنامج.  نظرًا للعدد الكبير من مكونات الأجهزة في الكتلة ، تحدث في كثير من الأحيان.  في كل عنقود ، عادة ما تفشل آلاف الأجهزة في السنة وتفشل الآلاف من محركات الأقراص الثابتة.  إذا قمت بضرب هذا الرقم في عدد المجموعات العاملة حول العالم ، فإن النتيجة مذهلة.  لذلك ، نريد عزل المستخدمين عن مثل هذه المشاكل ، ولا تريد الفرق المشاركة في خدماتنا أن تشتت انتباههم بسبب مشكلات الأجهزة.  يحتوي كل حرم مركز بيانات على فرق مسؤولة عن دعم المعدات والبنية التحتية لمركز البيانات. <br><br><h3 style=";text-align:right;direction:rtl">  إدارة الجهاز </h3><br>  Borg (الشكل 2.2) هو نظام إدارة عنقودية موزع [Verma et al.، 2015] ، يشبه Apache Mesos.  يدير Borg وظائف على مستوى الكتلة. <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tu/bv/iu/tubviu0qs-kyfob6r1kgodbttye.png" alt="الصورة"></div>  بورغ مسؤول عن إطلاق وظائف المستخدم.  يمكن أن تكون هذه المهام قيد التشغيل المستمر للخدمات أو العمليات المجمعة مثل MapReduce [Dean and Ghemawat، 2004].  يمكن أن تتكون من عدة (أحيانًا الآلاف) من المهام (المهام) المتطابقة - لأسباب تتعلق بالموثوقية ، ولأن عملية واحدة ، كقاعدة عامة ، غير قادرة على معالجة كل حركة مرور الكتلة.  عندما يبدأ بورغ المهمة ، يجد الأجهزة لأداء مهامه ويأمرها ببدء برنامج الخادم.  ثم يراقب بورغ حالة هذه المهام.  إذا لم تعمل المهمة بشكل صحيح ، يتم إتلافها وإعادة تشغيلها ، ربما على جهاز آخر. <br><br>  نظرًا لتوزيع المهام بحرية بين الأجهزة ، فلا يمكننا استخدام عناوين IP وأرقام المنافذ للوصول إليها.  يتم حل هذه المشكلة عن طريق مستوى إضافي من التجريد: عند بدء مهمة ، يخصص Borg اسمًا للمهمة ورقمًا (فهرس) لكل مهمة باستخدام خدمة تسمية Borg (BNS).  بدلاً من استخدام عنوان IP ورقم المنفذ ، ترتبط العمليات الأخرى بمهام Borg باسم BNS ، والتي تحول بعد ذلك BNS إلى عنوان IP ورقم المنفذ.  على سبيل المثال ، يمكن أن يكون مسار BNS عبارة عن سلسلة مثل / bns / &lt;cluster&gt; / &lt;user&gt; / &lt;task_name&gt; / &lt;task_number&gt; ، والتي يتم ترجمتها بعد ذلك (من المعتاد قول "مسموح به" على الشبكات) بالتنسيق &lt;عنوان IP&gt;: &lt;port&gt; . <br><br>  بورغ مسؤول أيضا عن تخصيص الموارد للمهام.  يجب أن تشير كل مهمة إلى الموارد المطلوبة لإكمالها (على سبيل المثال ، ثلاثة نوى للمعالج و 2 غيغابايت من ذاكرة الوصول العشوائي).  باستخدام قائمة المتطلبات لجميع المهام ، يمكن لـ Borg توزيع المهام بين الأجهزة على النحو الأمثل ، مع الأخذ في الاعتبار اعتبارات تحمل الخطأ أيضًا (على سبيل المثال ، لن يبدأ Borg جميع مهام مهمة واحدة على نفس الحامل ، لأن تبديل هذا الحامل سيكون نقطة حرجة في حالة الفشل) المهام). <br><br>  إذا حاولت مهمة الحصول على موارد أكثر مما هو مطلوب ، فإن بورغ يدمرها ثم يعيد تشغيلها (نظرًا لأنه يفضل عادةً أن تكون هناك مهمة تتعطل في بعض الأحيان وتعيد تشغيلها لا تتم إعادة تشغيلها على الإطلاق). <br><br><h3 style=";text-align:right;direction:rtl">  التخزين </h3><br>  للوصول السريع إلى البيانات ، يمكن للمهام استخدام القرص المحلي من الأجهزة ، ولكن لدينا العديد من الخيارات لتنظيم التخزين المستمر في المجموعة (وحتى البيانات المخزنة محليًا سيتم نقلها في النهاية إلى تخزين الكتلة).  يمكن مقارنتها مع Luster ونظام الملفات الموزعة Hadoop (HDFS) - أنظمة الملفات المجمعة مع تطبيق مفتوح المصدر. <br><br>  يوفر التخزين للمستخدمين القدرة على الوصول بسهولة وموثوقية إلى البيانات المتاحة للمجموعة.  كما هو مبين في الشكل.  2.3 ، يحتوي المستودع على عدة طبقات. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/at/yf/7c/atyf7cemd0e2gczkjfgdnltw7zy.png" alt="الصورة"></div><br>  1. تسمى الطبقة الدنيا D (من القرص ، على الرغم من أن المستوى D يستخدم كلاً من محركات الأقراص الثابتة التقليدية ومحركات الأقراص المحمولة).  D هو خادم ملفات يعمل فعليًا على كافة أجهزة المجموعة.  ومع ذلك ، فإن المستخدمين الذين يرغبون في الوصول إلى بياناتهم لا يريدون تذكر الجهاز الذي يتم تخزينهم عليه ، لذا فإن الطبقة التالية متصلة هنا. <br><br>  2. فوق الطبقة D هي طبقة Colossus ، التي تنشئ نظام ملفات في المجموعة يوفر الدلالات المعتادة لنظام الملفات ، بالإضافة إلى النسخ والتشفير.  Colossus هو خليفة GFS ، نظام ملفات Google (Ghemawat et al. ، 2003). <br><br>  3. بعد ذلك ، هناك العديد من الخدمات الشبيهة بقاعدة البيانات التي تم إنشاؤها فوق مستوى العملاق. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Bigtable [Chang et al.، 2006] هو نظام قاعدة بيانات غير علائقي (NoSQL) قادر على العمل مع قواعد بيانات بحجم بيتابايت.  Bigtable عبارة عن قاعدة بيانات متفرقة وموزعة على الأخطاء ومتعددة الأبعاد ومرتبة يتم فهرستها حسب الصفوف والأعمدة ومفاتيح الطابع الزمني ؛  كل قيمة قاعدة بيانات هي مجموعة عشوائية من البايت غير مترجم.  كما يدعم Bigtable النسخ المتماثل بين مراكز البيانات. </li><li style=";text-align:right;direction:rtl">  يقدم Spanner [Corbett وآخرون ، 2012] واجهة تشبه SQL للمستخدمين الذين يحتاجون إلى تكامل البيانات واتساقها عند الوصول من أي مكان في العالم. </li><li style=";text-align:right;direction:rtl">  تتوفر العديد من أنظمة قواعد البيانات الأخرى ، مثل Blobstore.  لديهم كل نقاط القوة والضعف الخاصة بهم (انظر الفصل 26). </li></ul><br><h3 style=";text-align:right;direction:rtl">  شبكة </h3><br>  تتم إدارة شبكات Google بعدة طرق.  كما ذكرنا سابقًا ، فإننا نستخدم شبكة قابلة للتكوين بالبرنامج استنادًا إلى OpenFlow.  بدلاً من أجهزة التوجيه الذكية ، لا نستخدم مفاتيح سخيفة ليست باهظة الثمن مع وحدة تحكم مركزية (مكررة) ، والتي تحسب مسبقًا أفضل مسار على الشبكة.  هذا يسمح لك باستخدام معدات تحويل أبسط ، وتحريره من البحث عن المسار الذي يستغرق وقتًا طويلاً. <br><br>  يجب تخصيص عرض النطاق الترددي للشبكة بشكل صحيح.  نظرًا لأن Borg يحد من موارد الحوسبة التي يمكن أن تستخدمها المهمة ، فإن إدارة Bandwidth Enforcer (BwE) تدير النطاق الترددي المتاح لزيادة متوسط ​​الإنتاجية.  لا يرتبط تحسين عرض النطاق الترددي بالتكلفة فحسب: تحل إدارة حركة المرور المركزية عددًا من المشكلات التي يصعب حلها للغاية من خلال الجمع بين التوجيه الموزع وإدارة حركة المرور التقليدية (كومار ، 2015). <br><br>  بعض الخدمات لديها وظائف تعمل على عدة مجموعات تقع في أجزاء مختلفة من العالم.  من أجل تقليل وقت التأخير للأنظمة الموزعة عالميًا ، نود توجيه المستخدمين إلى أقرب مركز بيانات لديه السعة المناسبة لذلك.  يقوم موازن تحميل البرامج العالمي (GSLB) بإجراء موازنة التحميل على ثلاثة مستويات: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  موازنة الحمل الجغرافي لاستعلامات DNS (على سبيل المثال ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.google.com</a> ) ، تم وصفه في الفصل 19 ؛ </li><li style=";text-align:right;direction:rtl">  موازنة التحميل على مستوى خدمات المستخدم (على سبيل المثال ، YouTube أو خرائط Google) ؛ </li><li style=";text-align:right;direction:rtl">  موازنة الحمل على مستوى استدعاء الإجراء البعيد (RPC) ، الموصوف في الفصل 20. </li></ul><br>  يحدد مالكو الخدمة أسماء رمزية لهم ، وقائمة بعناوين BNS للخادم والأداء المتوفر في كل موقع (يتم قياسه عادةً في استعلامات في الثانية - استعلامات في الثانية ، QPS).  وبالتالي ، يقوم GSLB بتوجيه حركة المرور إلى عناوين BNS المحددة. <br><br><h3 style=";text-align:right;direction:rtl">  برامج النظام الأخرى </h3><br><br>  هناك مكونات أخرى مهمة لبرنامج مركز البيانات. <br><br>  <b>خدمة القفل</b> <br><br>  توفر خدمة Chubby Lock [Burrows، 2006] واجهة برمجة تطبيقات مشابهة لنظام الملفات لخدمة الأقفال.  يعالج السمين الأقفال في جميع مراكز البيانات.  ويستخدم بروتوكول Paxos للوصول بشكل غير متزامن إلى الإجماع (انظر الفصل 23). <br><br>  يلعب السمين أيضًا دورًا مهمًا في اختيار المعالج.  إذا تم توفير خمس نسخ طبق الأصل لمهمة لبعض الخدمات بغرض زيادة الموثوقية ، ولكن في لحظة معينة يقوم واحد منهم فقط بالعمل الحقيقي ، ثم يتم استخدام Chubby لتحديد هذه النسخة المتماثلة. <br>  Chubby رائع للبيانات التي تتطلب موثوقية التخزين.  لهذا السبب ، يستخدم BNS Chubby لتخزين نسبة مسارات BNS إلى عنوان IP: أزواج المنافذ. <br><br>  <b>المراقبة والإنذار</b> <br><br>  نريد أن نتأكد من أن جميع الخدمات تعمل بشكل صحيح.  لذلك ، فإننا نطلق العديد من الأمثلة على برنامج مراقبة Borgmon (انظر الفصل 10).  يتلقى Borgmon بانتظام قيمًا قياسية من الخدمات المراقبة.  يمكن استخدام هذه البيانات على الفور للإخطار أو تخزينها للمعالجة والتحليل اللاحقين ، على سبيل المثال ، لإنشاء الرسوم البيانية.  يمكن استخدام هذا الرصد لأغراض مثل: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  إنشاء تنبيهات للمشاكل العاجلة ؛ </li><li style=";text-align:right;direction:rtl">  مقارنة السلوك: هل أدى تحديث البرنامج إلى تسريع الخادم ؛ </li><li style=";text-align:right;direction:rtl">  تقييم طبيعة التغيرات في استهلاك الموارد بمرور الوقت ، وهو أمر ضروري لتخطيط القدرات. </li></ul><br><br><h3 style=";text-align:right;direction:rtl">  البنية التحتية لبرامجنا </h3><br>  تم تصميم بنية برنامجنا بحيث يمكن استخدام موارد أجهزة النظام بكفاءة أكبر.  كودنا بأكمله متعدد الخيوط ، لذلك يمكن لمهمة واحدة استخدام العديد من النوى بسهولة.  من أجل دعم لوحات المعلومات والمراقبة والتصحيح ، يتضمن كل خادم تطبيق خادم HTTP كواجهة يتم من خلالها توفير معلومات وإحصاءات تشخيصية لمهمة معينة. <br><br>  "تتواصل" جميع خدمات Google باستخدام البنية التحتية لاستدعاء الإجراء البعيد (RPC) المسماة Stubby.  هناك نسخة مفتوحة المصدر منه ، تسمى gRPC (انظر <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">grpc.io</a> ).  في كثير من الأحيان ، يتم إجراء استدعاء RPC حتى للروتين في البرنامج المحلي.  هذا يسمح لك بإعادة توجيه البرنامج إلى مكالمات خادم آخر لتحقيق قدر أكبر من الوحدات النمطية أو مع نمو رمز الخادم الأصلي.  يمكن لـ GSLB تنفيذ موازنة تحميل RPC بنفس الطريقة التي تتم بها واجهات الخدمة الخارجية. <br><br>  يتلقى الخادم طلبات RPC من الواجهة الأمامية ويرسل RPC إلى الواجهة الخلفية.  باستخدام المصطلحات التقليدية ، تسمى الواجهة الأمامية العميل ، وتسمى الواجهة الخلفية الخادم. <br>  يتم نقل البيانات من وإلى RPC باستخدام بروتوكول التسلسل - ما يسمى مخازن البروتوكول المؤقت ، أو باختصار ، protobufs.  هذا البروتوكول مشابه لـ Apache's Thrift ولديه العديد من المزايا على XML عندما يتعلق الأمر بتسلسل البيانات المنظمة: فهو أبسط ، وثلاث إلى عشر مرات أكثر ضغطًا ، و 20 إلى 100 مرة أسرع وأكثر تميزًا. <br><br><h3 style=";text-align:right;direction:rtl">  بيئتنا التنموية </h3><br>  تعد سرعة تطوير المنتج مهمة جدًا بالنسبة إلى Google ، لذلك أنشأنا بيئة خاصة تحقق أقصى استفادة من بنيتنا التحتية [Morgenthaler et al.، 2012]. <br><br>  باستثناء بعض المجموعات التي تكون منتجاتها مفتوحة المصدر ، وبالتالي تستخدم مستودعاتها المستقلة الخاصة بها (على سبيل المثال ، Android و Chrome) ، يعمل مهندسو برامج Google في مستودع واحد مشترك [Potvin، Levenberg، 2016].  هذا النهج له العديد من التطبيقات العملية التي تعتبر مهمة لعملية الإنتاج لدينا. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  إذا واجه المهندس مشكلة في مكون خارج مشروعه ، يمكنه إصلاح المشكلة ، وإرسال التغييرات المقترحة ("قائمة التغيير" - قائمة التغيير ، CL) إلى المالك للنظر فيها ، ثم تنفيذ التغييرات التي تم إجراؤها في الفرع الرئيسي للبرنامج. </li><li style=";text-align:right;direction:rtl">  تتطلب التغييرات التي تطرأ على شفرة المصدر في المشروع الخاص بالمهندس النظر - إجراء مراجعة (مراجعة).  جميع البرامج تمر بهذه المرحلة قبل اعتمادها. </li></ul><br>  عندما يتم تجميع البرنامج ، يتم إرسال طلب التجميع إلى خوادم مركز البيانات المتخصصة.  حتى بناء المشاريع الكبيرة سريع لأنه يمكنك استخدام خوادم متعددة للترجمة المتوازية.  كما تستخدم هذه البنية التحتية للاختبار المستمر.  في كل مرة تظهر قائمة تغيير جديدة (CL) ، يتم تشغيل الاختبارات لجميع البرامج التي يمكن أن تتأثر بشكل مباشر أو غير مباشر بهذه التغييرات.  إذا اكتشف الإطار أن التغييرات تعطل تشغيل أجزاء أخرى من النظام ، فإنه يخطر مالك هذه التغييرات.  تستخدم بعض المشاريع نظام الضغط الأخضر ("الإرسال بنجاح") ، والذي بموجبه يتم إرسال الإصدار الجديد تلقائيًا إلى التشغيل التجاري بعد اجتياز الاختبارات. <br><br><h3 style=";text-align:right;direction:rtl">  شكسبير: مثال الخدمة </h3><br>  لتوضيح كيفية قيام Google بتطوير خدمة في بيئة صناعية ، ضع في اعتبارك مثالاً على خدمة افتراضية تتفاعل مع تقنيات Google.  لنفترض أننا نريد تقديم خدمة تسمح لك بتحديد أي أعمال شكسبير تحدث الكلمة التي ذكرتها. <br><br>  يمكننا تقسيم النظام إلى قسمين. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  مكون معالجة مجموعة يقرأ جميع نصوص شكسبير ، ينشئ فهرسًا ويكتبه إلى Bigtable.  يتم تنفيذ هذه المهمة (بشكل أدق ، المهمة) مرة واحدة ، وربما في بعض الأحيان (بعد كل شيء ، قد يظهر بعض نص شكسبير الجديد!). </li><li style=";text-align:right;direction:rtl">  تطبيق أمامي يقوم بمعالجة طلبات المستخدم النهائي.  يتم تشغيل هذه المهمة دائمًا ، لأنه في أي وقت ، قد يرغب مستخدم من أي منطقة زمنية في البحث من خلال كتب شكسبير. </li></ul><br>  سيكون مكون معالجة الدفعة هو خدمة MapReduce ، التي ينقسم عملها إلى ثلاث مراحل. <br><br>  1. في مرحلة رسم الخرائط ، تتم قراءة نصوص شكسبير وتقسيمها إلى كلمات منفصلة.  سيتم إكمال هذا الجزء من العمل بشكل أسرع إذا تم إطلاق العديد من عمليات العمل (المهام) بالتوازي. <br><br>  2. في مرحلة الترتيب العشوائي ، يتم فرز الإدخالات حسب الكلمة. <br><br>  3. في مرحلة التخفيض ، يتم إنشاء مجموعات من النموذج (كلمة ، قائمة_منتجات). <br><br>  كل مجموعة مكتوبة كسلسلة في Bigtable ، المفتاح هو الكلمة. <br><br><h3 style=";text-align:right;direction:rtl">  طلب دورة الحياة </h3><br>  في الشكل.  2.4 يوضح كيفية تقديم طلب المستخدم.  أولاً ، ينقر المستخدم على رابط shakespeare.google.com في المتصفح.  للحصول على عنوان IP المناسب ، يترجم جهاز المستخدم ("يحل") العنوان باستخدام خادم DNS (1).  ينتهي استعلام DNS في نهاية المطاف على خادم Google DNS ، الذي يتفاعل مع GSLB.  لتتبع تحميل حركة المرور لجميع خوادم الواجهة الأمامية حسب المنطقة ، تختار GSLB عنوان IP للخادم الذي سيتم إرجاعه إلى المستخدم. <br><br>  يتصل المتصفح بخادم HTTP على العنوان المحدد.  هذا الخادم (يطلق عليه Google Frontend أو GFE) هو خادم وكيل "عكسي" يقع على الطرف الآخر من اتصال TCP للعميل (2).  تبحث GFE عن الخدمة المطلوبة (على سبيل المثال ، يمكن أن تكون خدمة بحث أو خرائط أو - في حالتنا ، خدمة شكسبير).  الوصول إلى GSLB بشكل متكرر ، يجد الخادم خادم شكسبير الأمامي المتوفر ويتصل به من خلال استدعاء إجراء بعيد (RPC) ، يحيل طلب HTTP المستلم من المستخدم (3). <br><br>  يقوم خادم شكسبير بتحليل طلب HTTP وإنشاء "مخزن مؤقت للبروتوكول" (protobuf) يحتوي على الكلمات التي سيتم العثور عليها.  الآن ، يجب على خادم الواجهة الأمامية لشكسبير الاتصال بخادم شكسبير الخلفي: يتصل الأول بـ GSLB للحصول على عنوان BNS لمثيل مناسب وغير محمل من المثال الثاني (4).  بعد ذلك ، يتصل خادم الواجهة الخلفية لشكسبير بخادم Bigtable لتلقي البيانات المطلوبة (5). <br><br>  يتم كتابة النتيجة على استجابة protobuf وإعادتها إلى خادم شكسبير الخلفي.  تقوم الواجهة الخلفية بتمرير protobuf بنتيجة الخدمة إلى خادم شكسبير الأمامي ، الذي ينشئ مستند HTML ويعيده كرد على المستخدم. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/6b/nd/yo/6bndyo9cfcxu5k5sx4lieg5bfw8.png" alt="الصورة"></div><br>  هذه السلسلة الكاملة من الأحداث تجري في غمضة عين - في بضع مئات من المللي ثانية فقط!  نظرًا لوجود العديد من المكونات ، فهناك العديد من الأماكن التي قد يحدث فيها خطأ محتمل ؛  على وجه الخصوص ، يمكن أن يؤدي الفشل في GSLB إلى تفكيك كل العمل ويؤدي إلى الانهيار.   Google,   ,                 (   ),     ,    .   ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.google.com</a>  ,     . <br><br><h3 style=";text-align:right;direction:rtl">     </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">أظهر اختبار الحمل أن خادم الواجهة الخلفية لدينا يمكنه معالجة حوالي 100 طلب في الثانية (QPS). </font><font style="vertical-align: inherit;">أظهرت التجارب الميدانية مع عدد محدود من المستخدمين أن ذروة الحمل يمكن أن تصل إلى 3470 QPS تقريبًا ، لذلك نحتاج إلى إنشاء 35 مهمة على الأقل. </font><font style="vertical-align: inherit;">ومع ذلك ، فإن الاعتبارات التالية تقول أننا بحاجة إلى 37 مهمة على الأقل ، أو N + 2.</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> أثناء التحديث ، ستكون إحدى المهام غير متاحة مؤقتًا ، لذلك ستظل 36 مهمة نشطة. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> أثناء الترقية ، قد يحدث فشل في الأجهزة ، مما ينتج عنه 35 مهمة متبقية فقط - تمامًا مثل العدد المطلوب لخدمة ذروة الحمل. </font></font></li></ul><br>          : 1430 QPS    , 290 —   , 1400 —    350 —    .      -   ,     :  ,  ,   .   N + 2   ,  17   , 16 —     —  .   , ,      ( ),    —  N + 2  N + 1.                  :  GSLB    -       ,    20 % ,      .            2–3 . <br><br>  -      Bigtable,       .  -     Bigtable,   ,      ,    Bigtable   .        ,   Bigtable  ,        .   Bigtable           ,     ,         . <br><br> ,          .       ,         ,    . <br><br>  »يمكن العثور على مزيد من المعلومات حول الكتاب على <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">موقع الناشر على الويب</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المحتويات</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مقتطفات</a> <br><br>    20%   — <b>Site Reliability Engineering</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar420139/">https://habr.com/ru/post/ar420139/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar420125/index.html">الأتمتة في التمويل: يمكن ترك موظفي البنوك بدون عمل بسبب الروبوتات</a></li>
<li><a href="../ar420129/index.html">أنماط Asyncio coroutine: خارج انتظار</a></li>
<li><a href="../ar420131/index.html">طريقة التعدين الاحتمالي للبيتكوين</a></li>
<li><a href="../ar420133/index.html">نمذجة الأنظمة الديناميكية: كيف يتحرك القمر؟</a></li>
<li><a href="../ar420135/index.html">هذا أيضًا Toshiba: منتجات غير متوقعة للشركة اليابانية</a></li>
<li><a href="../ar420141/index.html">من MPP DBMS المحمل - بحيرة بيانات مفعم بالحيوية مع أدوات تحليلية: شارك تفاصيل الإنشاء</a></li>
<li><a href="../ar420143/index.html">أداء Kotlin على Android</a></li>
<li><a href="../ar420145/index.html">كيف هو يوم عمل أعضاء PC AppsConf</a></li>
<li><a href="../ar420147/index.html">مفتوحة المصدر على كلوجور</a></li>
<li><a href="../ar420151/index.html">أسهل مما يبدو. الفصل 12</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>