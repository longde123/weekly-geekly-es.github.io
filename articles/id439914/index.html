<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛐 🦒 ☄️ Organisasi peredam - melangkah lebih jauh 🛠️ ▶️ 🌑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apa yang akan kita bahas di sini? 


 Kita akan meninjau evolusi reduksi di aplikasi Redux / NGRX saya yang terjadi selama dua tahun terakhir. Mulai d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Organisasi peredam - melangkah lebih jauh</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439914/"><p><img src="https://habrastorage.org/webt/ud/sm/oe/udsmoenal1bazibn-vxzwkytz_8.jpeg"></p><br><h2 id="what-are-we-gonna-cover-here">  Apa yang akan kita bahas di sini? </h2><br><p> Kita akan meninjau evolusi reduksi di aplikasi Redux / NGRX saya yang terjadi selama dua tahun terakhir.  Mulai dari vanilla <code>switch-case</code> , pergi ke memilih peredam dari objek dengan kunci, akhirnya diselesaikan dengan reduksi berbasis kelas.  Kami tidak hanya akan berbicara tentang bagaimana, tetapi juga tentang mengapa. </p><a name="habracut"></a><br><blockquote>  Jika Anda tertarik untuk bekerja di sekitar terlalu banyak boilerplate di Redux / NGRX Anda mungkin ingin memeriksa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel ini</a> . <br><br>  Jika Anda sudah terbiasa memilih peredam dari teknik peta, pertimbangkan untuk langsung beralih ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">peredam berbasis kelas</a> . </blockquote><br><h2 id="vanilla-switch-case">  Kasing sakelar vanila </h2><br><p>  Jadi mari kita lihat tugas sehari-hari untuk membuat entitas di server secara tidak sinkron.  Kali ini saya sarankan kita menjelaskan bagaimana kita bisa membuat jedi baru. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateInit = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-init'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateSuccess = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-success'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateError = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-error'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJediInitialState = { <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-comment"><span class="hljs-comment">// List of our jedi data: [], error: undefined, } const reducerJedi = (state = reducerJediInitialState, action) =&gt; { switch (action.type) { case actionTypeJediCreateInit: return { ...state, loading: true, } case actionTypeJediCreateSuccess: return { loading: false, data: [...state.data, action.payload], error: undefined, } case actionTypeJediCreateError: return { ...state, loading: false, error: action.payload, } default: return state } }</span></span></code> </pre> <br><p>  Biarkan saya jujur, saya tidak pernah menggunakan reduksi semacam ini dalam produksi.  Alasan saya ada tiga: </p><br><ul><li>  <code>switch-case</code> memperkenalkan beberapa titik ketegangan, pipa bocor, yang kita mungkin lupa untuk menambal waktu di beberapa titik.  Kita selalu bisa lupa untuk <code>break</code> jika tidak segera <code>return</code> , kita selalu bisa lupa untuk menambahkan <code>default</code> , yang harus kita tambahkan ke setiap peredam. </li><li>  <code>switch-case</code> memiliki beberapa kode boilerplate sendiri yang tidak menambahkan konteks apa pun. </li><li>  <code>switch-case</code> adalah O (n), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">semacam</a> .  Ini bukan argumen yang kuat dengan sendirinya karena Redux tidak terlalu performant, tapi itu membuat perfeksionis batin saya marah. </li></ul><br><p>  Langkah logis berikutnya yang disarankan oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi resmi Redux</a> adalah mengambil peredam dari suatu objek dengan kunci. </p><br><h2 id="selecting-a-reducer-from-an-object-by-key">  Memilih peredam dari objek dengan kunci </h2><br><p>  Idenya sederhana.  Setiap transformasi keadaan adalah fungsi dari keadaan dan tindakan dan memiliki jenis tindakan yang sesuai.  Mempertimbangkan bahwa setiap jenis tindakan adalah string, kita dapat membuat objek, di mana setiap kunci adalah jenis tindakan dan setiap nilai adalah fungsi yang mengubah keadaan (reducer).  Lalu kita bisa memilih peredam yang diperlukan dari objek itu dengan kunci, yaitu O (1), ketika kita menerima tindakan baru. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateInit = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-init'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateSuccess = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-success'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateError = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-error'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJediInitialState = { <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJediMap = { [actionTypeJediCreateInit]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ ...state, <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }), [actionTypeJediCreateSuccess]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [...state.data, action.payload], <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, }), [actionTypeJediCreateError]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ ...state, <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: action.payload, }), } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJedi = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state = reducerJediInitialState, action</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Pick a reducer by action type const reducer = reducerJediMap[action.type] if (!reducer) { // Return state unchanged if we did not find a suitable reducer return state } // Run suitable reducer if found one return reducer(state, action) }</span></span></code> </pre> <br><p>  Yang keren di sini adalah bahwa logika di dalam <code>reducerJedi</code> tetap sama untuk peredam apa pun, yang berarti kita dapat menggunakannya kembali.  Bahkan ada perpustakaan kecil, yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">redux-create-reducer</a> , yang melakukan hal itu.  Itu membuat kode terlihat seperti ini: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createReducer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux-create-reducer'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateInit = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-init'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateSuccess = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-success'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateError = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-error'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJediInitialState = { <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJedi = createReducer(reducerJediInitialState, { [actionTypeJediCreateInit]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ ...state, <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }), [actionTypeJediCreateSuccess]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [...state.data, action.payload], <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, }), [actionTypeJediCreateError]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ ...state, <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: action.payload, }), })</code> </pre> <br><p>  Bagus dan cantik, ya?  Meskipun cantik ini masih memiliki beberapa peringatan: </p><br><ul><li>  Dalam hal reduksi kompleks kita harus meninggalkan banyak komentar yang menjelaskan apa yang dilakukan peredam ini dan mengapa. </li><li>  Peta peredam besar sulit dibaca. </li><li>  Setiap peredam hanya memiliki satu jenis tindakan yang sesuai.  Bagaimana jika saya ingin menjalankan peredam yang sama untuk beberapa tindakan? </li></ul><br><p>  Peredam berbasis kelas menjadi gudang cahaya saya di kerajaan malam itu. </p><br><h2 id="class-based-reducers">  Reduksi berbasis kelas </h2><br><p>  Kali ini saya akan mulai dengan mengapa pendekatan ini: </p><br><ul><li>  Metode kelas akan menjadi reduksi kami dan metode memiliki nama, yang merupakan informasi meta yang berguna, dan kami dapat meninggalkan komentar dalam 90% kasus. </li><li>  Metode-metode kelas dapat didekorasi yang merupakan cara deklaratif yang mudah dibaca untuk mencocokkan aksi dan reduksi. </li><li>  Kita masih bisa menggunakan peta tindakan di bawah tenda untuk memiliki kompleksitas O (1). </li></ul><br><p>  Jika itu terdengar seperti daftar alasan yang masuk akal untuk Anda, mari gali! </p><br><p>  Pertama-tama, saya ingin mendefinisikan apa yang ingin kita dapatkan sebagai hasilnya. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateInit = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-init'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateSuccess = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-success'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateError = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-error'</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReducerJedi</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Take a look at "Class field delcaratrions" proposal, which is now at Stage 3. // https://github.com/tc39/proposal-class-fields initialState = { loading: false, data: [], error: undefined, } @Action(actionTypeJediCreateInit) startLoading(state) { return { ...state, loading: true, } } @Action(actionTypeJediCreateSuccess) addNewJedi(state, action) { return { loading: false, data: [...state.data, action.payload], error: undefined, } } @Action(actionTypeJediCreateError) error(state, action) { return { ...state, loading: false, error: action.payload, } } }</span></span></code> </pre> <br><p>  Sekarang seperti yang kita lihat di mana kita ingin mendapatkan kita bisa melakukannya langkah demi langkah. </p><br><h3 id="step-1-action-decorator">  Langkah 1. Dekorator <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">aksi</a> . </h3><br><p>  Apa yang ingin kita lakukan di sini adalah menerima sejumlah jenis tindakan dan menyimpannya sebagai meta-informasi untuk metode kelas yang akan digunakan nanti.  Untuk melakukan itu kita bisa menggunakan polyfill <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">reflect-metadata</a> , yang membawa fungsionalitas meta-data ke objek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Reflect</a> .  Setelah itu dekorator ini hanya akan melampirkan argumennya (jenis tindakan) ke metode sebagai meta-data. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> METADATA_KEY_ACTION = <span class="hljs-string"><span class="hljs-string">'reducer-class-action-metadata'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Action = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...actionTypes</span></span></span><span class="hljs-function">) =&gt;</span></span> (target, propertyKey, descriptor) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">Reflect</span></span>.defineMetadata(METADATA_KEY_ACTION, actionTypes, target, propertyKey) }</code> </pre> <br><h3 id="step-2-creating-a-reducer-function-out-of-a-reducer-class">  Langkah 2. Membuat fungsi peredam dari kelas peredam </h3><br><p>  Seperti yang kita ketahui, setiap peredam adalah fungsi murni yang menerima status dan aksi serta mengembalikan status baru.  Nah, kelas adalah fungsi juga, tetapi kelas ES6 tidak dapat dipanggil tanpa yang <code>new</code> dan kita harus membuat peredam aktual dari kelas dengan beberapa metode.  Jadi kita perlu mengubahnya. </p><br><p>  Kita membutuhkan fungsi yang akan mengambil kelas kita, berjalan melalui setiap metode, mengumpulkan metadata dengan jenis tindakan, membangun peta peredam dan membuat peredam akhir dari peta peredam itu. </p><br><p>  Inilah cara kami memeriksa setiap metode dalam suatu kelas. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getReducerClassMethodsWthActionTypes = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">instance</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Get method names from class' prototype const proto = Object.getPrototypeOf(instance) const methodNames = Object.getOwnPropertyNames(proto).filter( (name) =&gt; name !== 'constructor', ) // We want to get back a collection with action types and corresponding reducers const res = [] methodNames.forEach((methodName) =&gt; { const actionTypes = Reflect.getMetadata( METADATA_KEY_ACTION, instance, methodName, ) // We want to bind each method to class' instance not to lose `this` context const method = instance[methodName].bind(instance) // We might have many action types associated with a reducer actionTypes.forEach((actionType) =&gt; res.push({ actionType, method, }), ) }) return res }</span></span></code> </pre> <br><p>  Sekarang kami ingin memproses koleksi yang diterima menjadi peta peredam. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getReducerMap = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">methodsWithActionTypes</span></span></span><span class="hljs-function">) =&gt;</span></span> methodsWithActionTypes.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reducerMap, { method, actionType }</span></span></span><span class="hljs-function">) =&gt;</span></span> { reducerMap[actionType] = method <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reducerMap }, {})</code> </pre> <br><p>  Jadi fungsi akhirnya bisa terlihat seperti ini. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createReducer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux-create-reducer'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> createClassReducer = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ReducerClass</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerClass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReducerClass() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> methodsWithActionTypes = getReducerClassMethodsWthActionTypes( reducerClass, ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerMap = getReducerMap(methodsWithActionTypes) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = reducerClass.initialState <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducer = createReducer(initialState, reducerMap) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reducer }</code> </pre> <br><p>  Dan kita bisa menerapkannya ke kelas <code>ReducerJedi</code> kita seperti ini. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJedi = createClassReducer(ReducerJedi)</code> </pre> <br><h3 id="step-3-merging-it-all-together">  Langkah 3. Menggabungkan semuanya. </h3><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// We move that generic code to a dedicated module import { Action, createClassReducer } from 'utils/reducer-class' const actionTypeJediCreateInit = 'jedi-app/jedi-create-init' const actionTypeJediCreateSuccess = 'jedi-app/jedi-create-success' const actionTypeJediCreateError = 'jedi-app/jedi-create-error' class ReducerJedi { // Take a look at "Class field delcaratrions" proposal, which is now at Stage 3. // https://github.com/tc39/proposal-class-fields initialState = { loading: false, data: [], error: undefined, } @Action(actionTypeJediCreateInit) startLoading(state) { return { ...state, loading: true, } } @Action(actionTypeJediCreateSuccess) addNewJedi(state, action) { return { loading: false, data: [...state.data, action.payload], error: undefined, } } @Action(actionTypeJediCreateError) error(state, action) { return { ...state, loading: false, error: action.payload, } } } export const reducerJedi = createClassReducer(ReducerJedi)</span></span></code> </pre> <br><h2 id="next-steps">  Langkah selanjutnya </h2><br><p>  Inilah yang kami lewatkan: </p><br><ul><li>  Bagaimana jika tindakan yang sama sesuai dengan beberapa metode?  Logika saat ini tidak menangani ini. </li><li>  Bisakah kita menambahkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">immer</a> ? </li><li>  Bagaimana jika saya menggunakan tindakan berbasis kelas?  Bagaimana saya bisa melewati pembuat tindakan, bukan jenis tindakan? </li></ul><br><p>  Semua itu dengan contoh kode tambahan dan contoh ditutupi dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kelas peredam</a> . </p><br><p>  Saya harus mengatakan bahwa menggunakan kelas untuk reduksi bukanlah pemikiran asli.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@amcdnl</a> muncul dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">aksi ngrx yang</a> mengagumkan beberapa waktu yang lalu, tapi sepertinya dia sekarang fokus pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NGXS</a> , belum lagi saya ingin mengetik dan decoupling yang lebih ketat dari logika khusus angular.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Berikut adalah daftar perbedaan utama antara tindakan peredam dan tindakan ngrx.</a> </p><br><blockquote>  Jika Anda menyukai gagasan untuk menggunakan kelas untuk reduksi Anda, Anda mungkin ingin melakukan hal yang sama untuk pembuat tindakan Anda.  Lihatlah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kelas aksi-fluks</a> . </blockquote><p>  Semoga Anda menemukan sesuatu yang berguna untuk proyek Anda.  Silakan sampaikan umpan balik Anda kepada saya!  Saya sangat menghargai kritik dan pertanyaan apa pun. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id439914/">https://habr.com/ru/post/id439914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id439902/index.html">Penjelasan sifat fisik dari fenomena "Lift Force of the Wing" tanpa menggunakan persamaan Bernoulli. Bagian 2</a></li>
<li><a href="../id439906/index.html">Kerentanan Penting dalam Produk Antivirus Zemana dan Banyak Lagi</a></li>
<li><a href="../id439908/index.html">Kohl, persetan ... Koaksial</a></li>
<li><a href="../id439910/index.html">Digital Rights Center mengundang ke Hari Privasi 2019</a></li>
<li><a href="../id439912/index.html">Misteri penglihatan yang belum terpecahkan</a></li>
<li><a href="../id439916/index.html">Membuka kemasan: Dridex bootloader</a></li>
<li><a href="../id439918/index.html">Di atas gunung berdiri Spring Boot ...</a></li>
<li><a href="../id439920/index.html">Penyebaran otomatis fungsi tanpa server dari Git</a></li>
<li><a href="../id439922/index.html">Perpajakan IP di Kazakhstan: bagaimana menjadi freelancer?</a></li>
<li><a href="../id439924/index.html">Volume paket dari toko online asing meningkat 25%</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>