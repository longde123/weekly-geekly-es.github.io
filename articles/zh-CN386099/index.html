<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧤 💅🏾 👩‍👦‍👦 笔记本电脑移动电源的开发。从布局到成品。第一部分 👩🏽‍⚖️ 💡 🚳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="3-4年前，我想为自己制作一个外接笔记本电池，以便在公园里工作。尽管我没有实现在高尔基公园或Bitsevsky森林中绘制图表和跟踪板的梦想（目前），但我确实制作了一个外部电池（我们称之为现代电池-PowerBank）。关于此设备如何从面包板模型过渡到最终产品，以及为什么要用猫做市场上已经存在的事情。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>笔记本电脑移动电源的开发。从布局到成品。第一部分</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/386099/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3-4年前，我想为自己制作一个外接笔记本电池，以便在公园里工作。</font><font style="vertical-align: inherit;">尽管我没有实现在高尔基公园或Bitsevsky森林中绘制图表和跟踪板的梦想（目前），但我确实制作了一个外部电池（我们称之为现代电池-PowerBank）。</font><font style="vertical-align: inherit;">关于此设备如何从面包板模型过渡到最终产品，以及为什么要用猫做市场上已经存在的事情。</font></font><br>
<br>
<img src="https://habrastorage.org/files/420/e68/56d/420e6856df5a40de8a10c07a32d91245.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初，我想写一篇有关PowerBank开发的简短文章，但是当我开始时，我意识到其中一部分是必不可少的。</font><font style="vertical-align: inherit;">因此，我将其分为四个部分，现在我将第一部分引起您的注意：布局（电路）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
显然，任何电子设备的开发都始于技术规范（TOR），因此我为自己概述了PowerBank应该提供的许多参数：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19V输入电压（用于从标准笔记本电脑内存充电的可能性）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19V输出电压（与标准内存一样）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大输出电流3.5A（与标准内存一样）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电池容量至少60W * h（+1个内置电池）</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除了基本要求之外，我还添加了其他一些内容：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换器和存储器的效率不低于94％-在没有散热器的情况下可以做到。</font></font></li>
<li>    300 —     .</li>
<li>USB       PowerBank    , ,   , ,       ..</li>
<li>  (Windows)      PowerBank.</li>
<li>   ,     5   USB .</li>
<li>      PowerBank.</li>
<li>()   PowerBank    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了开始开发，我绘制了未来设备</font></font><br>
<br>
<img src="https://habrastorage.org/files/252/309/39a/25230939af09479795e5d74a3f2fbf7e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
的框图</font><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">评论该框图，我可以说可以从USB接任总经理，但是我担心开发USB软件的困难（后来我意识到这是徒劳的），所以我安装了USART-USB转换器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于该设备最初是为自己开发的，因此决定主要从我拥有的和我已经使用过的部件中进行布局（以避免陷阱）。</font><font style="vertical-align: inherit;">但是，现阶段还没有进行价格优化。</font><font style="vertical-align: inherit;">因此，我为PowerBank选择了以下组件：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK-带瞄准器的STM32F051K4U6被STM32F042K4U6取代。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USART &lt;-&gt; USB至CP2102转换器。</font><font style="vertical-align: inherit;">它并不昂贵，它可以正常工作，只占用很小的空间，是一种临时解决方案。</font></font></li>
<li>   — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">LTC3780IG</a>.    / ,  -,  400,   ,  .     LM5175  TI     .</li>
<li>  — LP2951ACD-3.3.    ,   .     120     MCP1703T-3302E/CB      5.</li>
<li>     0805. </li>
<li>   SMD.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另外，我们还涉及充电器（充电器）和锂离子电池控制和管理系统（锂离子电池管理系统或BMS）的选择。几年前，我在修理笔记本电脑时，经常看到电池中来自Texas Instruments的BMS。因此，首先，我开始从该制造商那里为我的设备寻找解决方案。值得注意的是，总的来说，别无选择，因为只有很少的办公室生产这样的微电路（TI，Maxim，一些LT，ST被废弃，Intersil对我们来说很奇特，也许还有更多，但我不知道）。因此，在ti.com的广阔空间中徘徊时，我遇到了一个非常有趣的芯片</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60RHBR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它们是内存和BMS集成在一个芯片中。</font><font style="vertical-align: inherit;">我真的很喜欢它，因为它取代了2个微电路。</font><font style="vertical-align: inherit;">这种解决方案显然比分别处理内存和BMS便宜，并且占用的空间更少。</font><font style="vertical-align: inherit;">BQ40Z60芯片的主要性能特点：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">充电电流：高达4A</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电池数量：最多4倍</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换频率：1MHz</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入电压：最高25V</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电池容量：高达65A * h</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平衡功能</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可配置的LED指示（充电，容量）</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该芯片是非常新的（2014年底发布），因此它上的信息很少，因此我有点担心，因为他知道TI的BI很难编程，而且这也是一个组合（内存+ BMS）。我也担心晶体中可能存在的堵塞，但是知道我只会使用基本功能，所以希望不会有任何问题。但是，展望未来，我会说这确实发生了。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一句，我几乎没有说过关于电池和电池配置的任何事情，只是到了现在该进行选择的时候了。最佳电池配置选择有以下几个标准：</font></font><br>
<br>
<ol>
<li>          .      4    (  4s1p  4-serial 1-parallel) ,  4   (1s4p) . .<br>
<br>
<img src="https://habrastorage.org/files/557/071/877/557071877b66477184a284235e89034e.png"><br>
<br>
</li>
<li>   ,   ,    ( )      .      4s1p.</li>
<li>          .       MP2307DN.<br>
<br>
<img src="https://habrastorage.org/files/32c/de4/fd7/32cde4fd79374c4eb930e56e24b98b1a.png"></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同样，鉴于19V器件的输出电压，4s1p配置是最有利的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，我们将在60W * h容量，4s1p配置（电压14.8V）的条件下计算电池的一些参数：</font></font><br>
<br>
<img src="https://habrastorage.org/files/188/9aa/6ee/1889aa6ee65f4ecd91016d25ce126159.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我发现这个数字太小（很好，或者食欲不佳），我决定在LP 5558115 3500mAh电池上切换到4s2p配置，有现货。我们的总拥有量：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
电池容量：7A *小时（103W *小时）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
电压：14.8V </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这个结果</font><font style="vertical-align: inherit;">非常适合</font><font style="vertical-align: inherit;">我-它超过了笔记本电脑的两节内置电池（华硕S451L，46W *小时）。布局的开发开始了…… </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在布局阶段，我想添加一些其他功能：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接了BQ40Z60 LED。</font><font style="vertical-align: inherit;">它们具有可调节阈值的充电水平以及充电过程的功能指示。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了调整转换器的频率/工作模式（不连续或不可分离的电流）的能力（使用PWM MK + RC滤波器）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我从BQ40Z60EVM-578调试板绘制了BQ40Z60绑定电路，从其文档中绘制了LTC3780IG绑定，其余的我自己做。</font><font style="vertical-align: inherit;">结果是以下</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方案</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该方案分为3个块：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电压转换器块</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储单元+ BMS</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK控制单元</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对方案的评论：转换器单元和充电器+ BMS是根据文献</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2]的方案制造的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而控制单元是为了实现睡眠模式而实现的，以便在关闭模式下实现最小的电流消耗。展望未来，我会说我很快就做到了，但是借助刀和烙铁，我能够按需进行布局。最终的电路板如下所示：该</font></font><br>
<br>
<img src="https://habrastorage.org/files/9b5/082/691/9b5082691a0b4f1d82fbfd9c4925c2bc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
电路板包含4个18μm的层，总厚度为1 mm，可在seeedstudio.com上订购。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在是时候谈谈铁质量的主要指标了-这就是整个系统的整体效率。更准确地说，我们有2个效率：给电池充电和放电。严格来说，应该优化充电过程中的效率，以仅减少设备的发热（假设我们有大量充电能量），而放电过程中的效率损失实际上会降低PowerBank的实际容量。让我们列出一些直接影响充电效率的因素：</font></font><br>
<br>
<img src="https://habrastorage.org/files/eb5/be0/cf4/eb5be0cf43cd481a914999684e06cd5c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACFET-一种晶体管，当从电池中使用PowerBank时，可防止在外部电源连接器上出现电压。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HighSideFET-充电器降压转换器的上部晶体管。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LowSideFET-存储器降压转换器的下部晶体管。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BuckInductor-存储器降压转换器的油门。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGRCS-存储器电流传感器的电阻。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET-电池充电晶体管。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSGFET-放电晶体管电池。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS是电池电流传感器电阻器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
晶体管ACFET，CHGFET和DSGFET在工作期间仅具有静态损耗，因为它们一直处于开路状态，并且它们的电阻等于Rds_on晶体管的开路电阻，因此这些晶体管应具有最低的Rds_on。与我最喜欢的pqfn5x6相比，我选择了pqfn3.3x3.3晶体管外壳作为电源，并且尺寸更小。 IRFHM830D（Rds_on = 5mOhm +肖特基二极管）是具有易于访问的最小通道电阻的电阻。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HighSideFET和LowSideFET晶体管以脉冲模式工作，它们的选择很复杂，稍后将进行讨论。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们尝试评估输入电压19V，电池充电电流4A，配置4s1p时的损耗：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS-通过它的电流等于充电电流，电阻为5mOhm，损耗：</font></font><br>
<br>
<img src="https://habrastorage.org/files/c8c/b36/4c2/c8cb364c241647aa8b8e747fe265488c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGRCS-通过它的电流等于充电电流，电阻为10mOhm，损耗：</font></font><br>
<br>
<img src="https://habrastorage.org/files/341/b1d/cf1/341b1dcf1f4149aeb20446bcfbe9d474.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET和DSGFET-通过的电流其中等于充电电流，电阻为5mOhm，总损耗：</font></font><br>
<br>
<img src="https://habrastorage.org/files/533/bc7/90f/533bc790f0934780a5d7ba2d1df02b71.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACFET-通过它的电流等于输入电流（以最大可能的输入电流3.5A为常规笔记本电脑内存所能提供的最大值），电阻为5mOhm，损耗：</font></font><br>
<br>
<img src="https://habrastorage.org/files/384/bc9/449/384bc944932f4e46aa631cb6db1f5ea6.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里您可以增加损耗电池板上电线的电阻，t </font><font style="vertical-align: inherit;">还可以跟踪董事会本身。</font><font style="vertical-align: inherit;">我通过测量4A电池电路中电流下的电压降来计算它们，该电压降为36mV，对应于功率：</font></font><br>
<br>
<img src="https://habrastorage.org/files/2ba/ae1/023/2baae1023b854ac19c4a3eb4b897cb4a.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BuckInductor-油门中的损耗可分为2个部分：</font></font><br>
<br>
<ul>
<li>     (DCR — dc winding resistance).    IHLP2525CZER2R2M01   DCR = 18,     4  :<br>
<br>
<img src="https://habrastorage.org/files/be2/820/516/be282051603b42c8b0c0f2272b740891.png"><br>
<br>
</li>
<li>          ,    Vishay     ,          20%,      .</li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
静态组件上的总总电荷损耗为：</font></font><br>
<br>
<img src="https://habrastorage.org/files/2a2/602/245/2a2602245bac45a69f665dba1b35badf.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了获得总电荷损耗，有必要估算HighSideFET和LowSideFET晶体管上的损耗。</font><font style="vertical-align: inherit;">Fairchildsemi公司</font><font style="vertical-align: inherit;">生产的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN-6005</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">细线帮助了我</font><font style="vertical-align: inherit;">。简而言之，在ControllerDriver选项卡上，将我们的控制器添加到数据库中，然后在表中输入所需的参数：</font></font><br>
<br>
<img src="https://habrastorage.org/files/6fe/c39/ed7/6fec39ed7e97465094baf63964ced647.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们从</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的文档中获取</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">数据</font></a><font style="vertical-align: inherit;">。接下来，在MOSFETDatabase选项卡上用HighSideFET和LowSideFET晶体管的参数填写表：</font></font><br>
<br>
<img src="https://habrastorage.org/files/3cd/e7f/32e/3cde7f32ed8e49b6bbd0974d215dc922.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们还从晶体管的文档中获取数据。我尝试了许多晶体管（从基极看），因为1 MHz的转换频率非常高。在我可以很快获得最佳的所有晶体管中，TI的CSD17308证明是最佳的。但是，这些只是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60EVM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鲸鱼推荐的晶体管</font><font style="vertical-align: inherit;">。最好的计算方法是使用EPC（高效功率转换）生产的eGaN晶体管，但价格为500r，一个月的等待时间和一个特定的情况不利于它。 MOSFET的“数据库”选项卡上还有其他一些注释：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
右列-Fig.Merit（品质因数-质量得分）是Rds_on与Qgsw快门电荷的乘积。通常，Fig.Merit越低，晶体管的性能越好，但是您需要了解这是一个相当经验的指标。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在“效率摘要”选项卡上，选择控制器，使用的晶体管及其编号，设置源参数，然后单击“运行”按钮。</font></font><br>
<br>
<img src="https://habrastorage.org/files/4f5/03e/8cf/4f503e8cf0344b908a9764aa13d7c8af.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于4A的充电电流和19V的输入电压，损耗将为1.17W。总损耗：</font></font><br>
<br>
<img src="https://habrastorage.org/files/47b/799/26e/47b79926ef324c1ba614710ff41f49f5.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
组装好布局后，我用与估算计算相同的参数测量了充电电路：</font></font><br>
<br>
<img src="https://habrastorage.org/files/89e/245/9fb/89e2459fbd234dcd830dfd6f64488ed0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
电路</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">效率为97.1％，而在计算得出的2.07W时，功率损耗为1.908W。好吧，结果非常接近估计损失。图中显示了工作装置的热分析图。</font></font><br>
<br>
<img src="https://habrastorage.org/files/c99/15a/3b3/c9915a3b3b3940aea987f4f5d3a6248b.BMP"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
环境温度23度，板无外壳。箔片为18μm，最热点为58度（过热为58-23 = 35度），这是一个非常好的指示器。油门同时加热到40-很可能是晶体管加热的。控制器本身预热到52度。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在我们来估计放电期间系统的效率。从一开始，我们将评估转换器本身的损耗。为此，我们编制了一系列直接影响效率的元件：</font></font><br>
<br>
<img src="https://habrastorage.org/files/443/647/555/44364755599542c6bde459eeb3048433.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A是LTC3780转换器下臂的上晶体管。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
B-下晶体管下降臂。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C是逐渐增大的肩膀的下部晶体管。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D是逐渐增大的肩的上晶体管。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L-油门。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RS是电流传感器的电阻。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然还有LTC3780控制器本身的消耗。我不会详细介绍微电路的工作，只能说它实际上代表的是一个具有通用电感的升压转换器之后的降压转换器。取决于输入和输出电压，一个或第二个或两者都起作用（输入和输出电压大致相等）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了计算转换器的效率，我们将使用以下参数：</font></font><br>
 <br>
<img src="https://habrastorage.org/files/997/573/2a6/9975732a646145419d17e7b7cc104c80.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们同意一台笔记本电脑总是消耗最大的电量。实际上，这很接近事实，因为当连接外部电源时，除了能量之外，它还消耗能量来为内部电池充电，并且通常，如果有外部电源，它不会拒绝消耗。电压对应于电池的额定电压-3.7V和低-3.3V。重要的是要注意，当前设备中的转换器始终以升压模式工作（输入电压永远不会超过输出电压），但这并不意味着晶体管A和B不会开关。要给自举电容器充电，请短暂关闭晶体管A并打开B（当以较低模式操作C和D时，会发生同样的情况）。对于LTC3780，这发生在40kHz的频率上。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了估算损失，我们使用</font><font style="vertical-align: inherit;">LTpowerCAD2软件包中</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LTC3780</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">xls文件</font></a><font style="vertical-align: inherit;">。操作原理与BQ40Z60的xls先前的工作类似。我们输入输出电压和电流，输入电压，所需的转换频率，关键晶体管的参数的所有值（我决定在内存中使用CSD17308）。选择的电感器为IHLP5050EZER3R3M01，其典型DCR = 7.7mOhm。对于3.5A，电感很小，这是因为当我购买组件时，我指望的是4.5A的输出电流。对于当前配置，理想的选择是DCR = 12.8mOhm的IHLP5050EZER4R7M01。电流传感器-尺寸为2512的电阻，电阻为5mOhm。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在MOSFET功率损耗击穿和估计效率字段中输入所有数据后，将显示指定输入/输出电压和负载电流的组件损耗分布和效率估计的饼图。</font></font><br>
<br>
<img src="https://habrastorage.org/files/92d/a9b/83a/92da9b83afb74badb50bb7bccb0c5d3c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
效率估计非常乐观-输入电压为14.8V时为98.79％，在13.2V时为98.51％（数字不包括电感器铁芯的损耗）。发生损耗的主要因素是电感器/电流传感器（23％），晶体管A（25％）和D（占总损耗的38％）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在是衡量实际效率的时候了。</font></font><br>
<br>
<img src="https://habrastorage.org/files/c46/54c/cce/c4654ccce20b4c438e3f4a5a76484386.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在14.8V的输入电压下测得的效率为96.93％，在13.2V的情况下测得为96.35％。让我们分析获得的数据。为此，我们将功率损耗的效率百分比转换为：</font></font><br>
<br>
<img src="https://habrastorage.org/files/874/10a/190/87410a19014047c9b39518c9cd32d78f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，与存储器转换器中的损耗估计相比，差异更为明显，总计为1.48W。但是，如果考虑到电感器铁心的损耗（如果选择的电感不是最优，则不能忽略），那么情况就不会那么令人沮丧。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们估算放电时的平均（13.2V）PowerBank效率。它由转换器本身的效率的，以及：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS -通过它的电流等于转换器的输入电流，电阻是5mOhm，损失：</font></font><br>
<br>
<img src="https://habrastorage.org/files/c87/4a7/de6/c874a7de6a9c4122ad2d1b1205728e7c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET和DSGFET -通过它们的电流等于转换器的输入电流，电阻是5mOhm，总损失：</font></font><br>
<br>
<img src="https://habrastorage.org/files/44d/03f/42e/44d03f42ef754e1e8a22e6ba8d0695cf.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
放电期间然后PowerBank的效率：</font></font><br>
<br>
<img src="https://habrastorage.org/files/c52/0d0/86c/c520d086ced0477c82879639830d5631.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
热像输入电压为14.4 V，输出电流为3.5 A的转换器如下所示：</font></font><br>
<br>
<img src="https://habrastorage.org/files/e77/cfa/f9a/e77cfaf9a7ce45ae966e0c327896893f.BMP"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
晶体管C原来是最热的点，但是在工作30分钟后，它的加热（在21度的环境下）仅为41.1度。显然，在这种情况下，这些数字会更高，但过热储备很大。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在本文的第一部分结束时，我想说的是工作量很大，在本文的第二部分中，我们将了解开始布局，为STM32F0配置BQ40Z60和软件时的硬件和软件耙。我希望这很有趣。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS：包含草稿板和源代码的存档将发布在本文的以下部分中。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PPS注意到它几乎忘记了本文的这一部分最重要的内容-布局照片。正确</font></font><br>
<img src="https://habrastorage.org/files/729/50a/878/72950a8786ee4aa59dc105e8449bd800.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在板上，您可以看到校正痕迹以及背包中穿着时的痕迹（连接电池的区域有烧焦痕迹）。</font><font style="vertical-align: inherit;">布局当然不是最优雅的，但是即使以这种形式也可以使用。</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN386099/">https://habr.com/ru/post/zh-CN386099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN386083/index.html">欧盟委员会将允许柴油汽车超过排放限制一半</a></li>
<li><a href="../zh-CN386085/index.html">如果我想选择哪种直升机？Dronk.Ru的常见问题解答</a></li>
<li><a href="../zh-CN386087/index.html">Windows 10 Insiders的新版本发布</a></li>
<li><a href="../zh-CN386093/index.html">RF-Capture技术可让您“看穿”墙壁</a></li>
<li><a href="../zh-CN386095/index.html">Google и Amazon предлагают свое деление воздушного пространства на зоны для полётов беспилотников</a></li>
<li><a href="../zh-CN386101/index.html">机器人打败一个人，然后一个人驾驶机器人：视频。ADF：机器人坠毁站立</a></li>
<li><a href="../zh-CN386103/index.html">微软降低了对OneDrive的限制，而俄罗斯则提高了软件和订阅的价格</a></li>
<li><a href="../zh-CN386105/index.html">Следом за мобильным билдом вышла сборка для PC — Windows 10 Insider Preview 10576</a></li>
<li><a href="../zh-CN386107/index.html">关于Beeline如何与其服务安全性相关的故事</a></li>
<li><a href="../zh-CN386109/index.html">地中海沿岸的水下“ Stonehenge”正在再次重写人类的历史</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>