<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✊🏼 🍶 💄 Bagaimana tidak menembak diri sendiri di kaki dengan mesin negara 🧢 🆒 🏇🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mesin negara jarang digunakan oleh pengembang seluler. Meskipun mayoritas tahu prinsip kerja dan mudah mengimplementasikannya secara mandiri. Dalam ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana tidak menembak diri sendiri di kaki dengan mesin negara</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/423293/"> Mesin negara jarang digunakan oleh pengembang seluler.  Meskipun mayoritas tahu prinsip kerja dan mudah mengimplementasikannya secara mandiri.  Dalam artikel ini, kami akan mencari tahu tugas apa yang diselesaikan oleh mesin negara menggunakan contoh aplikasi iOS.  Kisah ini diterapkan di alam dan dikhususkan untuk aspek praktis dari pekerjaan. <br><br>  Di bawah potongan Anda akan menemukan transkrip pidato Alexander Sychev ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Brain89</a> ) yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diperluas</a> di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AppsConf</a> , di mana ia membagikan opsi untuk menggunakan mesin negara dalam mengembangkan aplikasi non-game. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/GKMrJe3mfwU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Tentang pembicara:</b> Alexander Sychev telah terlibat dalam pengembangan iOS selama delapan tahun, selama itu ia berpartisipasi dalam pembuatan aplikasi sederhana dan klien kompleks untuk jejaring sosial dan sektor keuangan.  Saat ini, ada petunjuk teknis di Sberbank. <br><a name="habracut"></a><br>  Mereka datang ke pemrograman dari banyak bidang, memiliki latar belakang dan pengalaman yang berbeda, jadi pertama-tama kita mengingat teori dasar. <br><br><h2>  Pernyataan masalah <br></h2><br><img src="https://habrastorage.org/webt/ow/wa/vd/owwavd51w_12g14nwehehu4yfu4.jpeg"><br><br>  Mesin negara adalah abstraksi matematis yang terdiri dari tiga elemen utama: <br><br><ul><li>  banyak keadaan internal </li><li>  set sinyal input yang menentukan transisi dari kondisi saat ini ke yang berikutnya, </li><li>  set status akhir, saat transisi yang otomat menyelesaikan tugasnya ("masukkan kata input x"). </li></ul><br><h3>  Ketentuan <br></h3><br>  Maksud kami adalah variabel atau sekelompok variabel yang menentukan perilaku objek.  Misalnya, dalam aplikasi iOS standar "Pengaturan <strong>"</strong> ada item "Tebal" ("Dasar → Akses universal").  Nilai dari item ini memungkinkan Anda untuk beralih di antara dua opsi untuk menampilkan teks pada tampilan perangkat. <br><br><img src="https://habrastorage.org/webt/mx/if/68/mxif68m4rgadt4kgjqovnzswvny.jpeg"><br><br>  Dengan mengirimkan sinyal yang sama "Ubah nilai toggle switch <strong>"</strong> , kami mendapatkan reaksi yang berbeda dari sistem: baik gaya font biasa atau tebal - semuanya sederhana.  Berada dalam keadaan berbeda dan menerima sinyal yang sama, suatu objek bereaksi berbeda terhadap perubahan keadaan. <br><br><h2>  Tugas tradisional <br></h2><br>  Dalam prakteknya, programmer sering menemukan mesin negara yang terbatas. <br><br><h3>  Aplikasi game <br></h3><br>  Ini adalah hal pertama yang terlintas dalam pikiran - sebagai bagian dari gameplay, hampir semuanya ditentukan oleh kondisi permainan saat ini.  Jadi, Apple mengasumsikan penggunaan mesin negara terutama dalam aplikasi game (kami akan membahas ini secara rinci nanti). <br><br>  Perilaku sistem saat memproses sinyal yang sama tetapi dengan keadaan internal yang berbeda dapat diilustrasikan dengan contoh-contoh berikut.  Sebagai contoh: <br><br>  ● karakter gim dapat memiliki kekuatan yang berbeda: satu di baju zirah mekanik dan dengan senjata laser, dan yang lainnya dipompa dengan lemah.  Tergantung pada kondisi ini, perilaku musuh ditentukan: mereka menyerang atau melarikan diri. <br><br><img src="https://habrastorage.org/webt/-9/ur/ci/-9urcijninqy6zo8as2i8adn46o.jpeg"><br><br>  ● permainan dijeda - tidak perlu menggambar bingkai saat ini;  pemain dalam mode menu atau dalam proses game - rendering sangat berbeda. <br><br><h3>  Analisis Teks <br></h3><br>  Salah satu tugas analisis teks paling populer yang terkait dengan penggunaan mesin negara adalah filter spam.  Biarkan ada satu set kata berhenti dan urutan input.  Anda harus memfilter urutan ini atau tidak menampilkannya sama sekali. <br><br><img src="https://habrastorage.org/webt/vo/ka/c2/vokac2-lpmhmsapxqmtked5buo4.jpeg"><br><br>  Secara formal, ini adalah tugas mencari substring dalam string.  Untuk mengatasinya, algoritma Knut-Morris-Pratt digunakan, implementasi perangkat lunak yang merupakan mesin negara terbatas.  Status adalah offset dari urutan input dan jumlah karakter yang ditemukan dalam pola - stop word. <br><br>  Juga, <strong>ketika menganalisis ekspresi reguler</strong> , mesin negara hingga sering digunakan. <br><br><h3>  Pemrosesan query paralel <br></h3><br>  Mesin negara adalah salah satu opsi untuk menerapkan pemrosesan permintaan dan melaksanakan serangkaian instruksi yang ketat. <br><br><img src="https://habrastorage.org/webt/i_/ll/n9/i_lln9kr6-tfmnr0ejx7mjn3ytk.jpeg"><br><br>  Misalnya, di server web nginx, permintaan input dari berbagai protokol diproses menggunakan mesin negara.  Tergantung pada protokol spesifik, implementasi spesifik dari mesin negara dipilih, dan karenanya, serangkaian instruksi terkenal dieksekusi. <br><br>  Secara umum, dua kelas masalah diperoleh: <br><br><ul><li>  mengelola logika objek yang kompleks dengan keadaan internal yang kompleks, </li><li>  pembentukan kontrol dan aliran data (deskripsi algoritma). </li></ul><br>  Jelas, tugas-tugas umum seperti itu dihadapi dalam praktik setiap programmer.  Oleh karena itu, penggunaan mesin negara dimungkinkan, termasuk dalam aplikasi konten non-game, yang terlibat dalam sebagian besar pengembang seluler. <br><br>  Selanjutnya, kita akan menganalisis di mana dan kapan mesin negara dapat digunakan untuk membuat aplikasi iOS yang khas. <br><br>  Sebagian besar aplikasi seluler memiliki arsitektur berlapis.  Ada tiga lapisan dasar. <br><br><ul><li>  Lapisan presentasi. </li><li>  Lapisan logika bisnis. </li><li>  Seperangkat pembantu, klien jaringan dan sebagainya (Lapisan inti). </li></ul><br>  Seperti yang ditunjukkan di atas, mesin negara mengontrol objek dengan perilaku kompleks, mis.  dengan kondisi kompleks.  Objek seperti itu pasti ada di lapisan presentasi, karena membuat keputusan dengan memproses input atau pesan pengguna dari sistem operasi.  Mari kita lihat berbagai pendekatan untuk pelaksanaannya. <br><br><img src="https://habrastorage.org/webt/ic/iq/pw/iciqpwtfuuokmoik0j5abflppg4.jpeg"><br><br>  Dalam metafora arsitektur klasik Model-View-Controller, negara akan berada di controller: ia memutuskan apa yang ditampilkan dalam View dan bagaimana menanggapi sinyal input: menekan tombol, mengubah slider, dan sebagainya.  Adalah logis bahwa salah satu implementasi dari pengontrol adalah mesin negara. <br><br><img src="https://habrastorage.org/webt/xt/sv/cr/xtsvcrd3ehffxfreo8ivtwx7jy8.jpeg"><br><br>  Dalam VIPER, negara berada di presenter: dialah yang menentukan transisi navigasi spesifik dari layar saat ini dan tampilan data di View. <br><br><img src="https://habrastorage.org/webt/_p/ob/xb/_pobxbwjjwduuken8qiucqg5o30.jpeg"><br><br>  Di Model-View-ViewModel, negara bagian di dalam ViewModel.  Terlepas dari apakah kita memiliki pengikat reaktif atau tidak, perilaku modul yang didefinisikan dalam metafora MVVM akan direkam dalam ViewModel.  Jelas, penerapannya melalui mesin negara adalah pilihan yang dapat diterima. <br><br><img src="https://habrastorage.org/webt/x0/8e/kf/x08ekfoc9zyg1s9_9jiirethpgm.jpeg"><br><br>  Objek kompleks dengan seperangkat keadaan non-sepele juga ditemui pada lapisan logika bisnis aplikasi.  Misalnya, klien jaringan, yang tergantung pada apakah atau tidak koneksi ke server dibuat, mengirim atau memblokir permintaan.  Atau objek untuk bekerja dengan database yang perlu menerjemahkan fungsi bahasa ke dalam query SQL, menjalankannya, mendapatkan respons, menerjemahkannya ke dalam objek, dll. <br><br><img src="https://habrastorage.org/webt/pb/bq/yt/pbbqytlwgtmbcutdlliqv5xkwjs.jpeg"><br><br>  Dalam tugas yang lebih spesifik, seperti modul pembayaran, di mana rangkaian status yang lebih luas, logika kompleks, penggunaan mesin status juga benar. <br><br>  Sebagai hasilnya, kami menemukan bahwa dalam aplikasi seluler ada banyak objek yang keadaan dan logikanya perilakunya digambarkan lebih rumit daripada dengan satu kalimat.  Mereka harus mampu mengelola. <br><br>  Pertimbangkan <strong>contoh nyata</strong> dan pahami pada titik apa mesin keadaan terbatas benar-benar dibutuhkan, dan di mana penerapannya tidak dibenarkan. <br><br><img src="https://habrastorage.org/webt/96/hk/lw/96hklw8ditorh2imz2zcx36wmga.jpeg"><br><br>  Pertimbangkan ViewController dari aplikasi Championship iOS, sumber daya olahraga yang populer.  Pengontrol ini menampilkan serangkaian komentar dalam bentuk tabel.  Pengguna memasukkan deskripsi pertandingan, melihat foto, membaca berita dan meninggalkan komentar mereka.  Layarnya cukup sederhana: lapisan di bawahnya memberikan data, diproses dan ditampilkan di layar. <br><img src="https://habrastorage.org/webt/m7/m1/yz/m7m1yz9--h4qttlcuxjrozagl48.jpeg"><br><br>  Data nyata atau kesalahan dapat dikirim ke layar.  Jadi operator kondisional pertama muncul, cabang pertama, yang menentukan perilaku aplikasi selanjutnya. <br><br>  Pertanyaan selanjutnya adalah apa yang harus dilakukan jika tidak ada data.  Apakah kondisi ini salah?  Kemungkinan besar tidak: tidak setiap berita memiliki komentar pengguna.  Misalnya, hoki di Mesir kurang menarik bagi siapa pun, dalam artikel seperti itu biasanya tidak ada komentar.  Ini adalah perilaku normal dan keadaan normal layar yang harus Anda tampilkan.  Jadi operator kondisional kedua muncul. <br><br>  Adalah logis untuk berasumsi bahwa ada juga keadaan awal di mana pengguna mengharapkan data (misalnya, ketika layar komentar hanya muncul di layar).  Dalam hal ini, tampilkan indikator memuat dengan benar.  Ini adalah pernyataan kondisional ketiga. <br><br>  Jadi kita sudah memiliki empat negara pada satu layar sederhana, logika tampilan yang dijelaskan melalui konstruksi if-else-if-else. <br><br><img src="https://habrastorage.org/webt/ys/yg/mq/ysygmq4fbj3mog3p6mjb0t5av9o.jpeg"><br><br>  Tetapi bagaimana jika ada lebih banyak negara seperti itu?  Pengembangan berulang layar mengarah ke kusut rumit konstruksi kondisional, banyak bendera, atau beberapa switch-case rumit.  Kode ini menakutkan.  Bayangkan bahwa pengembang yang akan mendukungnya tahu di mana Anda tinggal dan ia memiliki gergaji yang selalu ia bawa bersamanya.  Dan Anda benar-benar ingin hidup sesuai dengan pensiun Anda yang kecil namun layak. <br><br>  Saya pikir dalam hal ini perlu mempertimbangkan apakah layak meninggalkan implementasi seperti itu dalam aplikasi. <br><br><h3>  Kekurangan <br></h3><br>  Mari kita pahami apa yang tidak kita sukai dari kode ini. <br><br><img src="https://habrastorage.org/webt/2u/a-/67/2ua-67iwmlvw9zki5oxmjf4mfqe.jpeg"><br><br>  Pertama-tama, <strong>sulit dibaca</strong> . <br><br>  Karena kode ini kurang dibaca, itu berarti akan sulit bagi pengembang baru untuk mencari tahu apa yang sebenarnya diterapkan di tempat tertentu dalam proyek.  Oleh karena itu, akan menghabiskan banyak waktu menganalisis logika perilaku aplikasi - <strong>biaya dukungan dan pengembangan akan meningkat</strong> . <br><br>  Kode ini tidak <strong>fleksibel</strong> .  Jika Anda perlu menambahkan negara baru yang tidak mengikuti dari tangga saat ini, itu mungkin tidak berhasil sama sekali!  Jika Anda membutuhkan jalan lintas - tiba-tiba berhenti melewati cek di tangga ini - bagaimana melakukannya?  Hampir tidak ada. <br><br>  Juga, dengan pendekatan ini, <strong>tidak ada perlindungan dari negara-negara fiktif</strong> .  Ketika transisi dijelaskan melalui sakelar, kemungkinan besar perilaku default diterapkan.  Keadaan ini logis dalam hal perilaku program, tetapi hampir tidak logis dalam hal logika manusia atau bisnis aplikasi. <br><br>  Apa yang bisa menjadi solusi untuk kekurangan yang ditunjukkan?  Tentu saja, ini adalah konstruksi dari logika setiap modul / pengontrol / objek kompleks, bukan berdasarkan intuisi, tetapi menggunakan pendekatan formal yang baik.  Misalnya, mesin keadaan terbatas. <br><br><h2>  Gameplaykit <br></h2><br>  Sebagai <strong>contoh,</strong> kami mengambil apa yang ditawarkan Apple.  Dalam kerangka kerja kerangka GameplayKit, ada dua kelas yang membantu kita bekerja dengan mesin negara. <br><br><ul><li>  GKState. </li><li>  GKStateMachine. </li></ul><br>  Nama kerangka kerja memperjelas bahwa Apple ingin digunakan dalam game.  Namun <strong>dalam aplikasi non-game,</strong> itu akan bermanfaat. <br><br><img src="https://habrastorage.org/webt/pz/ez/de/pzezdem8jc81mab3alsm3e8pqwo.png"><br><br>  Kelas <strong>GKState</strong> mendefinisikan status.  Untuk menggambarkannya, Anda perlu melakukan langkah-langkah sederhana.  Kami mewarisi dari kelas ini, mengatur nama negara, dan mendefinisikan tiga metode. <br><br><ul><li>  isValidNextState - apakah keadaan saat ini valid berdasarkan yang sebelumnya. </li><li>  didEnterFrom - tindakan pada transisi ke kondisi ini. </li><li>  willExitTo - tindakan saat keluar dari status ini. </li></ul><br><br><img src="https://habrastorage.org/webt/z2/q2/gj/z2q2gj0bg2-vsoejvz0crdbhmb4.png"><br><br>  <strong>GKStateMachine adalah</strong> kelas mesin negara.  Itu bahkan lebih mudah.  Cukup dengan melakukan dua tindakan. <br><br><ul><li>  Kami melewati set status input ke array yang diketik melalui initializer. </li><li>  Kami membuat transisi tergantung pada sinyal input menggunakan metode enter.  Melalui itu, keadaan awal juga diatur. </li></ul><br>  Mungkin membingungkan bahwa setiap kelas dilewatkan sebagai argumen ke metode <strong>enter</strong> .  Tetapi harus dicatat bahwa objek dari kelas apa pun tidak dapat didefinisikan dalam array status <strong>-</strong> ini melarang pengetikan yang ketat.  Dengan demikian, jika Anda menetapkan kelas arbitrer sebagai kelas negara berikutnya, tidak ada yang akan terjadi, dan metode enter akan kembali salah. <br><br><h3>  Menyatakan dan transisi di antara mereka <br></h3><br>  Setelah berkenalan dengan kerangka kerja dari Apple, mari kita kembali ke contoh.  Penting untuk menggambarkan keadaan dan transisi di antara mereka.  Anda perlu melakukan ini dengan cara yang paling bisa dimengerti.  Ada dua opsi umum: tabel atau sebagai grafik transisi.  Grafik transisi, menurut pendapat saya, adalah pilihan yang lebih dimengerti.  Itu dalam UML dengan cara standar.  Oleh karena itu, kami memilihnya. <br><br>  Dalam grafik transisi ada negara yang dijelaskan oleh nama, dan panah yang menghubungkan negara-negara ini untuk menjelaskan transisi.  Dalam contoh, ada kondisi awal <strong>-</strong> kami mengharapkan data <strong>-</strong> dan ada tiga status yang dapat dicapai dari yang awal: data yang diterima, tidak ada data, dan kesalahan. <br><br><img src="https://habrastorage.org/webt/cg/dn/gs/cgdngsj7omvfgbfvkpdgtazpeva.jpeg"><br><br>  Dalam implementasinya, kami mendapat empat kelas kecil. <br><br><img src="https://habrastorage.org/webt/qo/tc/rq/qotcrq6wbihios-sonhj8ajfhey.png"><br><br>  Mari kita menganalisis keadaan "Data Pending".  Di pintu masuk, ada baiknya menampilkan indikator unduhan.  Dan ketika Anda keluar dari kondisi ini <strong>,</strong> sembunyikan.  Untuk melakukan ini, Anda harus memiliki tautan yang lemah ke ViewController, yang dikendalikan oleh mesin status yang dibuat. <br><br><img src="https://habrastorage.org/webt/p8/41/aa/p841aapjpxsvcqirsklkcy9o4us.png"><br><br><h3>  Parameter mesin <br></h3><br>  Langkah kedua yang perlu dilakukan <strong>adalah</strong> mengatur parameter mesin negara.  Untuk melakukan ini, buat status dan transfer ke objek otomat. <br><br><img src="https://habrastorage.org/webt/zd/ww/pm/zdwwpm8i_i6lxoxjkzh_a2deqzi.jpeg"><br><br>  Pastikan juga untuk mengatur kondisi awal <br><br><img src="https://habrastorage.org/webt/mx/sg/ka/mxsgkacbkni4fjczcvsagtec8lm.png"><br><br>  Pada prinsipnya, semuanya, mesin siap.  Sekarang perlu untuk memproses reaksi terhadap peristiwa eksternal, mengubah keadaan otomat. <br><br><img src="https://habrastorage.org/webt/_c/jt/hf/_cjthf0r7-5d5u0fdxucgksdz2w.png"><br><br>  Ingat kembali pernyataan masalahnya.  Kami mendapat tangga dari if-else, atas dasar itu diputuskan tindakan apa yang harus dilakukan.  Sebagai kontrol untuk robot sederhana, opsi implementasi seperti itu mungkin (pada kenyataannya, saklar sederhana <strong>-</strong> ini adalah implementasi primitif dari mesin keadaan terbatas), tapi kami praktis tidak menyingkirkan kelemahan yang disebutkan sebelumnya. <br><br>  Ada pendekatan lain yang akan memungkinkan Anda untuk menjauh dari tangga ini.  Diusulkan oleh klasik pemrograman <strong>- yang</strong> disebut "geng empat." <br><br><img src="https://habrastorage.org/webt/qv/if/sf/qvifsfqe0iqs3rsroauy4bptayg.jpeg"><br><br>  Ada pola desain khusus, yang disebut "Status". <br><br><img src="https://habrastorage.org/webt/nd/eh/wp/ndehwptccwh7lh90dmsixkzybo0.jpeg"><br><br>  Ini adalah pola perilaku yang mirip dengan strategi yang menggambarkan abstraksi mesin negara.  Ini memungkinkan objek untuk mengubah perilakunya tergantung pada negara.  Tujuan utama aplikasi <strong>adalah untuk</strong> merangkum perilaku dan data yang terkait dengan keadaan tertentu di kelas yang terpisah.  Dengan demikian, mesin negara, yang awalnya membuat keputusan yang menyebabkan negara, sekarang akan mengirimkan sinyal, menerjemahkannya ke dalam keadaan, dan negara akan membuat keputusan.  Jadi turunkan sebagian tangga, dan kodenya akan menjadi lebih menyenangkan untuk digunakan. <br><br>  Kerangka kerja standar tidak tahu caranya.  Dia menyarankan bahwa <strong>GKStateMachine</strong> akan membuat keputusan.  Oleh karena itu, kami memperluas mesin keadaan terbatas dengan metode baru, di mana sebagai konfigurasi, kami meneruskan deskripsi semua variabel kondisional yang secara unik menentukan status berikutnya.  Di dalam metode ini, Anda dapat mendelegasikan pemilihan negara bagian berikutnya ke yang sekarang. <br><br><img src="https://habrastorage.org/webt/gu/sw/nr/guswnro2dw8m3fsctqqjx8_7js8.png"><br><br>  Ini adalah praktik yang baik untuk menggambarkan keadaan dengan satu objek dan selalu meneruskannya, daripada menulis banyak, banyak parameter input.  Selanjutnya, kami mendelegasikan pilihan negara bagian berikutnya ke yang sekarang.  Itu seluruh upgrade. <br><br><img src="https://habrastorage.org/webt/te/9t/5a/te9t5acirqz1o5awpxzy1tsbyia.png"><br><br>  <strong>Keuntungan dari GameplayKit.</strong> <br><br><ul><li>  Perpustakaan standar.  Tidak perlu mengunduh apa pun, gunakan cocoapods atau carthage. </li><li>  Perpustakaannya cukup mudah dipelajari. </li><li>  Ada dua implementasi sekaligus: pada Objective-C dan on Swift. </li></ul><br>  <strong>Kekurangan:</strong> <br><br><ul><li>  Realisasi keadaan dan transisi terkait erat. <br>  Prinsip tanggung jawab tunggal dilanggar: negara tahu ke mana ia pergi dan bagaimana. </li><li>  Status rangkap tidak dikontrol dengan cara apa pun. <br>  Array dilewatkan ke mesin negara, bukan banyak negara.  Jika Anda mentransfer beberapa status yang identik, yang terakhir dari daftar akan digunakan. </li></ul><br>  Apa lagi implementasi mesin negara terbatas?  Lihatlah GitHub. <br><br><h2>  Implementasi Objective-C <br></h2><br><img src="https://habrastorage.org/webt/vo/zt/zy/voztzyatty-amllrmtl8ny4ke3c.png"><br><br><h3>  TransitionKit <br></h3><br>  Ini adalah pustaka Objective-C yang paling populer untuk waktu yang lama, tanpa kekurangan yang diidentifikasi di GamePlayKit.  Ini memungkinkan kita untuk mengimplementasikan mesin negara dan semua tindakan yang terkait dengannya di blok. <br><br>  <strong>Negara terpisah dari transisi</strong> . <br><br>  Dalam TransitionKit ada 2 kelas. <br><br><ol><li>  TKState - untuk mengatur status dan input, tindakan keluaran. </li><li>  TKEvent adalah kelas untuk menggambarkan transisi. <br>  TKEvent mengikat beberapa negara bagian ke negara lain.  Peristiwa itu sendiri didefinisikan hanya dengan string. </li></ol><br>  Selain itu, ada manfaat tambahan. <br><br>  <strong>Anda dapat mentransfer data yang berguna selama masa transisi</strong> .  Ini berfungsi sama seperti ketika menggunakan NSNotificationCenter.  Semua muatan berguna datang dalam bentuk kamus userInfo, dan pengguna mem-parsing informasi. <br><br>  <strong>Transisi yang salah memiliki deskripsi</strong> .  Ketika kami mencoba membuat transisi yang tidak ada - tidak mungkin - kami mendapatkan tidak hanya nilai NO saat kembali dari metode transisi, tetapi juga deskripsi terperinci dari kesalahan, yang berguna saat men-debug mesin negara. <br><br><img src="https://habrastorage.org/webt/hi/x9/bx/hix9bx5ctgjldoay4btqajopgb0.jpeg"><br><br>  TransitionKit digunakan dalam pemanen jaringan RestKit yang populer.  Ini adalah contoh yang cukup bagus tentang bagaimana mesin negara dapat digunakan dalam kernel aplikasi ketika mengimplementasikan operasi jaringan. <br><br><img src="https://habrastorage.org/webt/ls/os/d3/lsosd3z1zbg5knnmbrggmpq2zro.jpeg"><br><br>  RestKit memiliki kelas khusus - RKOperationStateMachine - untuk mengelola operasi bersamaan.  Pada input, ia menerima operasi yang sedang diproses dan antrian untuk pelaksanaannya. <br><br><img src="https://habrastorage.org/webt/r2/pn/mc/r2pnmcfsl_6uzdzhsin_mrq_vkg.jpeg"><br><br>  Secara internal, mesin negara sangat sederhana: tiga negara (siap, dieksekusi, selesai) dan dua transisi: memulai dan mengakhiri eksekusi.  Setelah memulai pemrosesan (dan pada transisi apa pun), mesin negara mulai mengontrol blok kode pengguna yang telah ditentukan dalam antrian yang ditentukan saat membuat antrian. <br><br>  Operasi yang terkait dengan automatonnya mentransfer peristiwa eksternal ke automaton, dan melakukan transisi antara status dan semua tindakan terkait.  Mesin negara merawat <br><br><ul><li>  eksekusi kode asinkron, </li><li>  eksekusi kode atom selama transisi, </li><li>  kontrol transisi </li><li>  Pembatalan operasi </li><li>  kebenaran dari perubahan variabel status operasi: isReady, isExecuting, isFinished. </li></ul><br><h3>  Bergeser <br></h3><br>  Selain TransitionKit, ada baiknya menyebutkan <strong>Shift</strong> secara terpisah - perpustakaan kecil yang diimplementasikan sebagai kategori di atas NSObject.  Pendekatan ini memungkinkan Anda untuk mengubah objek apa pun menjadi mesin keadaan, menjelaskan kondisinya dalam bentuk konstanta string dan tindakan dalam blok selama transisi.  Tentu saja, ini lebih merupakan proyek pelatihan, tetapi cukup menarik dan memungkinkan Anda untuk mencoba apa mesin negara dengan biaya minimal. <br><br><h2>  Implementasi Swift <br></h2><br><img src="https://habrastorage.org/webt/_t/dx/kd/_tdxkdwt0sqzgy78o-q-_z0c_nq.png"><br><br>  Ada banyak implementasi mesin negara terbatas pada Swift.  Saya akan memilih satu ( <strong>komentar</strong> : sayangnya, proyek belum berkembang dua tahun terakhir setelah laporan, tetapi ide-ide yang terkandung di dalamnya layak diceritakan dalam artikel). <br><br><h3>  SwiftyStateMachine <br></h3><br>  Di SwiftyStateMachine, mesin status diwakili oleh struktur yang tidak stabil, melalui metode didSet dari properti, Anda dapat dengan mudah menangkap perubahan status. <br><br>  Di perpustakaan ini, mesin negara didefinisikan melalui tabel korespondensi negara dan transisi di antara mereka.  Skema ini dijelaskan secara terpisah dari objek yang akan dikendalikan mesin.  Ini diimplementasikan melalui switch-case bersarang. <br><br><img src="https://habrastorage.org/webt/y5/cz/dl/y5czdlkikmxb4kyylgwgxfsdxuy.png"><br><br>  ,    . <br><br><ul><li>       . <br>       ,        . </li><li>    . <br>    state machine ,         state machine. </li><li>    ,   ,      . </li><li> ,     DOT. <br>        state- — DOT.    ,  ,     . </li></ul><br><img src="https://habrastorage.org/webt/wb/zg/du/wbzgduy9duy-shpt0pcjjjt0ru8.jpeg"><br><br><h2>  Kesimpulan <br></h2><br>          . <br><br><ul><li> <strong>.</strong> <br>           ,     .    ,         . ,   . <br></li><li> <strong>  .</strong> <br>     ( ). <br></li><li> <strong> .</strong> <br>       ,    ,        . </li><li> <strong>       .</strong> , SwiftyStateMachine     ,    ,     .     . </li><li> <strong> .</strong> <br>   ,    . , ,      .       . <br></li></ul><br>        . <br><br><img src="https://habrastorage.org/webt/wb/ek/ww/wbekwwlr0a_w8wzt6z0bo12jdmm.jpeg"><br><br>       .      ,    .    , ,    switch case:  ,  ,  —     . <br><br><img src="https://habrastorage.org/webt/hq/ay/db/hqaydbygw58xgcalwyvph1haeho.jpeg"><br><br>  .    .    ,  .  ,    ,  ,     .    . <br><br><img src="https://habrastorage.org/webt/b9/mb/ze/b9mbze-xdkufz2mbs7p61obsjqo.jpeg"><br><br>      ,      ,      .     . <br><br><img src="https://habrastorage.org/webt/bc/qp/hr/bcqphramltmjhaakirn_uo00e4i.png"><br><br>    —  <strong> </strong> .       :      , —    . <br><br><img src="https://habrastorage.org/webt/iw/qz/we/iwqzwefnjh4xnqexwoovxccugqo.jpeg"><br><br><img src="https://habrastorage.org/webt/i4/80/vk/i480vkfuwmhwpdd31totlvl5298.jpeg"><br><br>   «-»     <strong> </strong> . <br><br><img src="https://habrastorage.org/webt/s-/kf/ox/s-kfoxsckujhbrzsslebpzuqwei.jpeg"><br><br> ,    .         . <br><br><img src="https://habrastorage.org/webt/le/oo/ju/leoojuz3yycfncczpfbgftsa1tq.jpeg"><br><br>        <strong>app coordinators</strong> —   ,     ,    : ,     .       ,       . <br><br>  , app coordinator ,  state machine.            . ,    app coordinators  state machine,         , ,  , <strong>  </strong> .      , ,   ,         .    . <br><br><img src="https://habrastorage.org/webt/mx/yu/1q/mxyu1qczcjazzunuhe7jfoolv2e.png"><br><br> , state machine  ,    ,         . <br><br>     state machine  ,     if-else.   ,         . <br><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tahun ini di Apps Conf 2018, yang akan diadakan pada tanggal 8 dan 9 Oktober, Alexander </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berencana untuk membahas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lima prinsip dasar pemrograman berorientasi objek dan batas penerapannya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk laporan pengembangan seluler lainnya, lihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saluran YouTube</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dan jika Anda ingin menerima informasi tentang transkrip baru dan laporan menarik, berlangganan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buletin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id423293/">https://habr.com/ru/post/id423293/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id423279/index.html">Bagaimana saya mengembangkan tablet Rusia</a></li>
<li><a href="../id423281/index.html">Umpan balik dalam tim, 360 dan 14 Februari</a></li>
<li><a href="../id423283/index.html">Pemodelan efek Sagnac menggunakan optik geometris</a></li>
<li><a href="../id423285/index.html">Rekayasa Sosial: Musuh yang Sulit Dihadapi di Dunia Keamanan Siber</a></li>
<li><a href="../id423291/index.html">Rusia membuat rekor: 110 film bajakan per orang</a></li>
<li><a href="../id423295/index.html">Konferensi Pengembangan Seluler Paling Berguna</a></li>
<li><a href="../id423297/index.html">Dari Pengembang Android ke DevOps</a></li>
<li><a href="../id423299/index.html">Koordinator Aplikasi di aplikasi iOS</a></li>
<li><a href="../id423303/index.html">AI, tentu saja praktis. Transformasi Musik Berbasis Emosi</a></li>
<li><a href="../id423305/index.html">Merusak kinerja</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>