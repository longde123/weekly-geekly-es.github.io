<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÖüèº üî∂ üëàüèª Testen von LoRa / LoRaWAN RN2483-Funkmodems. Teil 2, LoRaWAN üìí üõê üë®üèº‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im vorherigen Teil wurde beschrieben, wie RN2483-Modems im LoRa-Modus angeschlossen werden. Fahren wir nun mit dem n√§chsten, komplexeren Teil fort - d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Testen von LoRa / LoRaWAN RN2483-Funkmodems. Teil 2, LoRaWAN</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/398247/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im vorherigen Teil wurde</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beschrieben, wie RN2483-Modems im LoRa-Modus angeschlossen werden. </font><font style="vertical-align: inherit;">Fahren wir nun mit dem n√§chsten, komplexeren Teil fort - der Verbindung zum LoRaWAN-Netzwerk.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist LoRaWAN?</font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/fbc/821/466/fbc8214665cb4bfb94e1c75021ec502b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LoRaWAN ist ein "bedingt globales" Netzwerk, das aus Endger√§ten (Knoten) besteht, die Daten an Hubs (Gateway) senden. </font><font style="vertical-align: inherit;">Jeder Hub hat Zugriff auf das Internet und sendet die empfangenen Daten an einen Server, der sie wiederum an signierte Kunden sendet. </font><font style="vertical-align: inherit;">Das Netzwerk ist einerseits ‚Äûglobal‚Äú, weil </font><font style="vertical-align: inherit;">Daten k√∂nnen von jedem nahe gelegenen Gateway empfangen werden, andererseits sind sie "bedingt global", weil </font><font style="vertical-align: inherit;">Ohne Internet / Intranet funktioniert es nicht (obwohl sich niemand die M√ºhe macht, ein eigenes Gateway und einen eigenen Server in der Organisation zu haben). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das RN2483-Modem wird als "Knoten" verwendet, ein kostenloser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dienst</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wird zum Herstellen einer Verbindung verwendet </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Fortsetzung unter dem Schnitt.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Netzwerk der Dinge</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Dienst </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.thethingsnetwork.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine offene Community, deren Benutzer Ger√§te und Hubs erstellen, registrieren, experimentieren k√∂nnen, wie alles funktioniert usw. </font><font style="vertical-align: inherit;">Wie gesagt, kostenlos und ohne SMS. </font><font style="vertical-align: inherit;">Wir werden es zum Testen verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeder kann sowohl einen Knoten als auch ein Gateway im Netzwerk registrieren. </font><font style="vertical-align: inherit;">Das Things Network ist v√∂llig kostenlos, viele Enthusiasten kaufen Ger√§te auf eigene Kosten. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Abdeckungskarte zum Zeitpunkt des Schreibens </font></font><br>
<br>
<img src="https://habrastorage.org/files/18f/37b/249/18f37b249adb417193d8a3c679287cf0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sieht </font><font style="vertical-align: inherit;">wie folgt aus: </font><font style="vertical-align: inherit;">Wie Sie sehen k√∂nnen, l√§sst das russischsprachige Abdeckungssegment zu w√ºnschen √ºbrig, ist es aber immer noch. </font><font style="vertical-align: inherit;">Dies hat eine positive Seite - in London oder Amsterdam werden Sie niemanden mit einem neuen Konzentrator √ºberraschen, aber in Russland besteht die Chance, der Erste zu sein.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbinden Sie RN2483 mit LoRaWAN</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zu einer einfachen P2P-Verbindung ist in LoRaWAN alles viel komplizierter - Ger√§te werden im Netzwerk registriert, der Datenverkehr wird mit verschiedenen Schl√ºsseln verschl√ºsselt usw. Weil Das Netzwerk ist √∂ffentlich und √∂ffentlich, Datenschutzfragen sind hier sehr relevant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei Arten der Authentifizierung im LoRaWAN-Netzwerk: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Authentifizierung ‚Äû√ºber </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funk</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äú ( </font><b><font style="vertical-align: inherit;">OTAA</font></b><font style="vertical-align: inherit;"> , Over-the-Air-Aktivierung). Ger√§te registrieren sich im Netzwerk und erhalten den f√ºr den Betrieb erforderlichen Schl√ºssel. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Aktivierung von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ABP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Aktivierung durch Personalisierung). Die Einstellungen sind im Ger√§t vorregistriert, eine zus√§tzliche Authentifizierung ist nicht erforderlich. Dieser Modus ist einfacher, aber es gibt ein Minus - die Daten werden einfach in die Luft gesendet, es gibt keine Garantie daf√ºr, dass sie vom Hub empfangen wurden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ist wichtig</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Viele billige Einkanal-Hubs unterst√ºtzen nur den ABP-Modus, sodass die erste Methode m√∂glicherweise nicht funktioniert. </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Ger√§teregistrierung - OTAA</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der erste Schritt besteht darin, auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">staging.thethingsnetwork.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eine ‚ÄûAnwendung‚Äú zu registrieren. </font><font style="vertical-align: inherit;">Ich nannte es Raspberry Pi Home. </font><font style="vertical-align: inherit;">Bei der Registrierung der Anwendung erh√§lt der Benutzer den ersten Schl√ºssel, der in Zukunft n√ºtzlich sein wird. </font></font><br>
<br>
<img src="https://habrastorage.org/files/b33/8a7/790/b338a779084444d193521ef6ce945d04.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes sehen wir die Registerkarte Ger√§te, auf der Sie unser Modem hinzuf√ºgen k√∂nnen (es k√∂nnen mehrere vorhanden sein). </font><font style="vertical-align: inherit;">Klicken Sie auf "Ger√§t registrieren" und w√§hlen Sie den OTAA-Modus. </font><font style="vertical-align: inherit;">Ein Fenster wird angezeigt, in dem Sie die Kennung des Ger√§ts eingeben m√ºssen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/f23/d56/979/f23d5697934245b7abffe51bb831a4e1.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Kennung erhalten Sie, indem Sie den Befehl sys get hweui an das Modem senden. </font><font style="vertical-align: inherit;">Diese Registrierung wird wie versprochen kostenlos und ohne SMS durchgef√ºhrt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch √ñffnen der Ger√§teparameter k√∂nnen Sie alle Tasten sehen, die im Programm registriert sein m√ºssen. </font></font><br>
<br>
<img src="https://habrastorage.org/files/9f0/8c4/8ff/9f08c48ff5a54bb7a8bc13086b1815ef.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den Code zu vereinfachen, habe ich die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python-Loranode-Bibliothek verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Der Quellcode zum Senden von Daten ist unten angegeben. </font><font style="vertical-align: inherit;">Wie Sie sehen k√∂nnen, enth√§lt der Code 3 Zeilen appkey, appeui und deveui, die zur Authentifizierung verwendet werden.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quellcode</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> loranode <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RN2483Controller
<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> commands <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> *
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment"># LoRaController OTAA based join and message test</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>:<font></font>
    set_debug_level(Level.DEBUG)<font></font>
    <font></font>
    port = <span class="hljs-string"><span class="hljs-string">"COM3"</span></span>
    appkey = <span class="hljs-string"><span class="hljs-string">"58FF3007CAED02xxxxxxxxxxxxxxxxxxxx"</span></span>
    appeui = <span class="hljs-string"><span class="hljs-string">"70B3D57Exxxxxxxxxxxxxx"</span></span>
    deveui = <span class="hljs-string"><span class="hljs-string">"0004A30xxxxxxxxxxx"</span></span><font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment"># Test controller</span></span><font></font>
    lc = RN2483Controller(port)<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.test():<font></font>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Connected to LoRa RN2483 device"</span></span>, Level.INFO)<font></font>
        lc.serial_sr(CMD_GET_VERSION)<font></font>
        lc.serial_sr(CMD_GET_HWEUI)<font></font>
        lc.get_freq()<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
        printd(clr(Color.YELLOW, <span class="hljs-string"><span class="hljs-string">"[-] Failed to get version from LoRa device"</span></span>), Level.WARNING)<font></font>
<font></font>
    lc.set_pwr(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
    lc.set_adr(<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>)<font></font>
    lc.serial_sr(CMD_SET_SF, <span class="hljs-string"><span class="hljs-string">"sf7"</span></span>) <span class="hljs-comment"><span class="hljs-comment"># sf12, sf7</span></span><font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment"># Join and send a message</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.join_otaa(appkey, appeui, deveui):<font></font>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Connected to gateway"</span></span>, Level.INFO)<font></font>
        <font></font>
        <span class="hljs-comment"><span class="hljs-comment"># Data-1</span></span>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Sending packet #1"</span></span>, Level.INFO)<font></font>
        timeStr = time.strftime(<span class="hljs-string"><span class="hljs-string">"%H%M"</span></span>, time.gmtime())
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.send(timeStr, ack=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>):<font></font>
            printd(clr(Color.GREEN, <span class="hljs-string"><span class="hljs-string">"[+] Send-1 succeeded"</span></span>), Level.CRITICAL)
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
            printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[+] Send-1 failed"</span></span>), Level.CRITICAL)<font></font>
        time.sleep(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
<font></font>
        <span class="hljs-comment"><span class="hljs-comment"># Data-2</span></span>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Sending packet #2"</span></span>, Level.INFO)<font></font>
        timeStr = time.strftime(<span class="hljs-string"><span class="hljs-string">"%H%M"</span></span>, time.gmtime())
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.send(timeStr, ack=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>):<font></font>
          printd(clr(Color.GREEN, <span class="hljs-string"><span class="hljs-string">"[+] Send-2 succeeded"</span></span>), Level.CRITICAL)
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
          printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[+] Send-2 failed"</span></span>), Level.CRITICAL)<font></font>
        time.sleep(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> lc<font></font>
        exit()<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> lc<font></font>
    printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[-] Test failed"</span></span>), Level.CRITICAL)
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Beispiel werden Pakete mit der aktuellen Zeit (hhmm) an den Server gesendet. </font><font style="vertical-align: inherit;">Dies ist praktisch, um zu steuern, welches Paket empfangen wurde.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Ger√§teregistrierung - ABP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist alles einfacher - wir registrieren das Ger√§t als ABP und erhalten mehrere Schl√ºssel, die im Programm registriert werden m√ºssen. </font></font><br>
<br>
<img src="https://habrastorage.org/files/751/7d9/eb7/7517d9eb74f44a0a8ab6c608c7adc63f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Modem sendet Daten "wie sie sind", es gibt keine Garantie daf√ºr, dass die Authentifizierung erfolgreich war, nein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Daten zu senden, m√ºssen Sie die Schl√ºssel nwkskey, appskey, devaddr in den Code einf√ºgen. </font><font style="vertical-align: inherit;">Der Quellcode ist unten angegeben.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quellcode</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> loranode <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RN2483Controller
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> platform
<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> commands <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> *
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment"># LoRaController ABP based join and ACK test</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>:<font></font>
    set_debug_level(Level.DEBUG)<font></font>
<font></font>
    port = <span class="hljs-string"><span class="hljs-string">"COM3"</span></span>
    nwkskey = <span class="hljs-string"><span class="hljs-string">"58AA52E96035Axxxxxxxxxxxxxxxxxxxx"</span></span>
    appskey = <span class="hljs-string"><span class="hljs-string">"381B1C9206E9BE9xxxxxxxxxxxxxxxxxxx"</span></span>
    devaddr = <span class="hljs-string"><span class="hljs-string">"B639xxxx"</span></span><font></font>
    <font></font>
    lc = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span><font></font>
    <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>:
      <span class="hljs-comment"><span class="hljs-comment"># Test controller</span></span><font></font>
      lc = RN2483Controller(port)<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.test():<font></font>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Connected to LoRa RN2483 device"</span></span>, Level.INFO)<font></font>
<font></font>
        lc.serial_sr(CMD_GET_VERSION)<font></font>
        lc.serial_sr(CMD_GET_HWEUI)<font></font>
        lc.get_freq()<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
        printd(clr(Color.YELLOW, <span class="hljs-string"><span class="hljs-string">"[-] Failed to get version from LoRa device"</span></span>), Level.WARNING)<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception, e:
      <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Error: "</span></span> + str(e)<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>:<font></font>
      printd(Color.YELLOW, <span class="hljs-string"><span class="hljs-string">"Error: cannot connect to device"</span></span>)<font></font>
      exit()<font></font>
<font></font>
    lc.set_adr(<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>)<font></font>
    lc.set_pwr(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
    lc.serial_sr(CMD_MAC_PAUSE)<font></font>
    lc.serial_sr(CMD_SET_SF, <span class="hljs-string"><span class="hljs-string">"sf12"</span></span>) <span class="hljs-comment"><span class="hljs-comment"># sf12, sf7</span></span><font></font>
    lc.serial_sr(CMD_MAC_RESUME)<font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment"># Join and send a message</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.join_abp(nwkskey, appskey, devaddr):<font></font>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Connected to gateway"</span></span>, Level.INFO)<font></font>
        <font></font>
        <span class="hljs-comment"><span class="hljs-comment"># Data-1</span></span>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Sending packet #1"</span></span>, Level.INFO)<font></font>
        timeStr = time.strftime(<span class="hljs-string"><span class="hljs-string">"%H%M"</span></span>, time.gmtime())
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.send(timeStr, ack=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>):<font></font>
          printd(clr(Color.GREEN, <span class="hljs-string"><span class="hljs-string">"[+] Send-1 succeeded"</span></span>), Level.CRITICAL)
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
          printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[+] Send-1 failed"</span></span>), Level.CRITICAL)<font></font>
        time.sleep(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
<font></font>
        <span class="hljs-comment"><span class="hljs-comment"># Data-2</span></span>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Sending packet #2"</span></span>, Level.INFO)<font></font>
        timeStr = time.strftime(<span class="hljs-string"><span class="hljs-string">"%H%M"</span></span>, time.gmtime())
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.send(timeStr, ack=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>):<font></font>
          printd(clr(Color.GREEN, <span class="hljs-string"><span class="hljs-string">"[+] Send-2 succeeded"</span></span>), Level.CRITICAL)
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
          printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[+] Send-2 failed"</span></span>), Level.CRITICAL)<font></font>
        time.sleep(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> lc<font></font>
        exit()<font></font>
<font></font>
    printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[-] Test failed"</span></span>), Level.CRITICAL)
    <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> lc
</code></pre><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im letzten Schritt bleibt eine Sache - einen Laptop (oder Arduino oder Raspberry Pi) mit einem Modem mitzunehmen und zu dem Ort zu gehen (gehen, fliegen), an dem sich der Versorgungsbereich des n√§chsten Gateways befindet. </font><font style="vertical-align: inherit;">Ich bin mit der Stra√üenbahn etwa eine halbe Stunde lang zum n√§chstgelegenen Versorgungsgebiet gekommen, daher ist der Vorgang nicht so lang und teuer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei erfolgreichem Datenempfang werden Pakete auf dem Server angezeigt. </font></font><br>
<br>
<img src="https://habrastorage.org/files/359/4fe/106/3594fe1069394a35a4f06ca59775b5e2.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Server selbst macht nichts mit den Daten. Sie k√∂nnen Ihren eigenen Code auf dem Server konfigurieren, um die empfangenen Daten zu verarbeiten. </font><font style="vertical-align: inherit;">Dieses Beispiel ist nur ein Test, es wird nichts mit den Daten gemacht, in einer realen Anwendung k√∂nnen sie der Datenbank hinzugef√ºgt werden, Benachrichtigungen senden usw., alles h√§ngt von der Aufgabe ab.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum ist das notwendig?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Idealfall bietet das LoRaWAN-Netzwerk dem Benutzer einen sofort einsatzbereiten Daten√ºbertragungsdienst. Sie m√ºssen lediglich das Ger√§t anschlie√üen, und die Daten werden vom n√§chsten Hub gesendet und verarbeitet (nat√ºrlich, wenn sich der Benutzer im Bereich der Netzwerkabdeckung befindet). </font><font style="vertical-align: inherit;">Der Anwendungsbereich ist sehr umfangreich, von Sensoren zum √ñffnen der T√ºr, der Temperatur oder des Wasserstandes im Land bis hin zu einem GPS-Leuchtfeuer an einem Tier oder Modell eines Flugzeugs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mehrere Videos (auf Englisch). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LoRa Alliance Einf√ºhrung:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/2Y0bMX3TVi0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Things Network Einf√ºhrung:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VEvopr1FLtw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir jedoch √ºber The Things Network sprechen, handelt es sich um einen "Amateur" -Dienst, der nat√ºrlich keine dauerhafte Verbindung garantiert. </font><font style="vertical-align: inherit;">Ob es kommerzielle Anbieter LoRaWAN gibt, wei√ü ich noch nicht.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist, wenn keine Abdeckung besteht?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es kann sich eine vern√ºnftige Frage stellen: Was tun, wenn ein paar Tage mit dem Zug oder ein paar Stunden mit dem Flugzeug zum n√§chsten Gateway fahren? </font><font style="vertical-align: inherit;">Dies hat sein eigenes Plus - Sie k√∂nnen der Erste sein. </font><font style="vertical-align: inherit;">Sie k√∂nnen Ihr eigenes Gateway erstellen und es auf dem The Things Network-Server registrieren. Der Preis des Problems h√§ngt von der Funktionalit√§t ab - von&gt; 1000 EUR f√ºr ‚Äûpropriet√§re‚Äú Mehrkanal-Hubs bis zu 15 US-Dollar f√ºr hausgemachte Ger√§te auf Basis von SX1276 und Raspberry Pi. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gibt eine Vergleichstabelle mit verschiedenen Routern. Wer dies w√ºnscht, kann sie genauer untersuchen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die letzte Option wird im n√§chsten Teil behandelt.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de398247/">https://habr.com/ru/post/de398247/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de398235/index.html">Fragen Sie Ethan Nr. 97: K√∂nnen Monde Monde haben?</a></li>
<li><a href="../de398239/index.html">HyperX auf Igromir: Antworten auf Fragen</a></li>
<li><a href="../de398241/index.html">Asgardia: die erste Nation, die im Weltraum lebt</a></li>
<li><a href="../de398243/index.html">Wie und warum Musikdienste Wiedergabelisten bilden</a></li>
<li><a href="../de398245/index.html">Eine Phono-B√ºhne w√§hlen - f√ºr jeden seine eigene</a></li>
<li><a href="../de398251/index.html">Das L√∂sen von R√§tseln hilft nur beim L√∂sen von R√§tseln</a></li>
<li><a href="../de398253/index.html">Markt√ºberblick √ºber Game Cloud Services</a></li>
<li><a href="../de398255/index.html">Xiaomi Redmi Note 4: erschwingliches Smartpad</a></li>
<li><a href="../de398257/index.html">Kick NOW! –¢—Ä–µ–Ω–¥—ã –∫—Ä–∞—É–¥—Ñ–∞–Ω–¥–∏–Ω–≥–∞, —á.1</a></li>
<li><a href="../de398259/index.html">"Fallout 1.5: Resurrection": Post-Apokalypse-Spiele, wie es sein sollte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>