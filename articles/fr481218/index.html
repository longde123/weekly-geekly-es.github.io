<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì≠ ü§πüèΩ üë®üèº‚Äçüîß G√©n√©ration proc√©durale de donjons 3D √† plusieurs √©tages üï∫üèº üê° üïñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R√©cemment, j'ai jou√© √† plusieurs roguelike, j'ai donc d√©cid√© d'essayer d'√©crire mon propre g√©n√©rateur de donjon proc√©dural. Il existe de nombreuses fa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>G√©n√©ration proc√©durale de donjons 3D √† plusieurs √©tages</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481218/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/370/ffd/f4c/370ffdf4c0bb0afd67714ca3e78409e3.png" alt="image"></div><br>  R√©cemment, j'ai jou√© √† plusieurs roguelike, j'ai donc d√©cid√© d'essayer d'√©crire mon propre g√©n√©rateur de donjon proc√©dural.  Il existe de nombreuses fa√ßons de r√©soudre ce probl√®me, et j'ai choisi l'algorithme de l'auteur TinyKeep <a href="https://www.reddit.com/r/gamedev/comments/1dlwc4/procedural_dungeon_generation_algorithm_explained/">d√©crit ici</a> .  J'ai d√©velopp√© cet algorithme pour qu'il fonctionne en 3D et puisse cr√©er des donjons √† plusieurs √©tages. <br><br>  Exemple de code publi√© dans <a href="https://github.com/vazgriz/DungeonGenerator">le r√©f√©rentiel Github</a> .  Pour la d√©monstration, j'utilise Unity3D, mais ces concepts, bien s√ªr, s'appliquent √† tout autre moteur. <br><br><h2>  Deux dimensions </h2><br>  J'ai d'abord besoin d'√©crire un algorithme √† deux dimensions.  En g√©n√©ral, il fonctionne de la m√™me mani√®re que l'algorithme TinyKeep, mais pr√©sente des diff√©rences pour cr√©er des niveaux plus int√©ressants. <br><br>  La sc√®ne de cet exemple s'appelle Dungeon2D.  Le code correspondant se trouve dans le dossier Scripts2D. <br><br><h3>  Algorithme </h3><br>  Le monde est divis√© en une grille rectangulaire.  Je suppose qu'une unit√© suffira pour indiquer le couloir.  Dans une partie compl√®te, 1 unit√© d'Unit√© peut correspondre, par exemple, √† 5 m√®tres.  Pour la grille, j'ai choisi une taille de 30 √ó 30. <a name="habracut"></a><br><br>  1. Nous organisons les chambres de mani√®re arbitraire, mais afin qu'elles ne se chevauchent pas.  L'emplacement n'a pas d'importance, donc dans cet exemple, je leur donne juste un emplacement et une taille al√©atoires.  De plus, de chaque c√¥t√©, j'ai ajout√© un tampon de 1 unit√© de large (pour que les pi√®ces ne se touchent pas), mais ce n'est pas n√©cessaire pour que l'algorithme fonctionne. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c2/0c5/478/1c20c5478c951a20f64bb8cc2b25f136.png"></div><br>  <i>Les rectangles rouges sont des pi√®ces</i> <br><br>  2. Cr√©ez un graphique de triangulation Delaunay pour les pi√®ces.  J'ai utilis√© l'algorithme Bower-Watson pour cela.  Il existe de nombreuses impl√©mentations de cet algorithme dans de nombreux langages, j'en ai choisi une qui sera facile √† porter en C #. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b5/d50/aec/3b5d50aec6fe0aa1ba294ae42172754d.png"></div><br>  <i>Triangulation de Delaunay</i> <br><br>  3. Cr√©ez un arbre couvrant minimum (MST) √† partir de la triangulation.  J'ai utilis√© l'algorithme Prim pour cela. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/15b/d81/7a1/15bd817a1d1c65b6d3105b7f6a928561.png"></div><br>  <i>Couloirs MST</i> <br><br>  4. Nous cr√©ons une liste de couloirs, en commen√ßant par chaque bord de l'arbre de l'√©tape 3. L'arbre contient toutes les pi√®ces, donc le chemin vers chaque pi√®ce est garanti d'exister.  Ajoutez au hasard les bords de la triangulation √† la liste.  Nous allons donc cr√©er plusieurs boucles dans les couloirs.  Dans mon code, j'ai utilis√© la probabilit√© d'ajouter chaque bord √† 12,5%. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1d3/f85/c44/1d3f85c44e598d4e8279d3d24fc1c779.png"></div><br>  <i>Couloirs apr√®s l'ajout de plusieurs ar√™tes au MST.</i>  <i>Notez que des boucles sont apparues.</i> <br><br>  5. Pour chaque couloir de la liste, utilisez l'algorithme A * pour trouver les chemins depuis le d√©but du couloir jusqu'√† la fin.  Apr√®s avoir trouv√© un chemin, il change l'√©tat du monde afin que les futurs couloirs puissent toujours contourner les couloirs existants. <br><br>  La fonction de co√ªt que j'ai utilis√©e rend moins co√ªteux de se d√©placer le long d'un couloir coup√© dans une it√©ration diff√©rente que de cr√©er un nouveau couloir.  Cela stimule un algorithme de recherche de chemin pour combiner des couloirs traversant un espace.  Se d√©placer dans la pi√®ce est possible mais co√ªteux.  Par cons√©quent, dans la plupart des cas, l'algorithme de recherche de chemin pr√©f√®re √©viter les salles. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b6/6ad/f7b/5b66adf7be654383a7278ca88110bf41.gif"></div><br>  <i>Les rectangles bleus sont des couloirs</i> <br><br>  Voici quelques exemples d'un algorithme qui utilise de vraies ressources graphiques (les ressources et le code pour leur placement ne sont pas dans le r√©f√©rentiel): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/982/7e8/ccd/9827e8ccd5f16de0ee3594aaf90b57af.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ef/6a7/ebd/1ef6a7ebd8887f1b0d9abb6859608859.png"></div><br><iframe width="560" height="315" src="https://www.youtube.com/embed/c1kVUsBeQhQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Trois dimensions </h2><br>  Apr√®s avoir cr√©√© un g√©n√©rateur de donjon 2D fonctionnel, j'ai commenc√© √† le transf√©rer en 3D.  Tous les algorithmes utilis√©s ont des versions 3D, donc √ßa devrait √™tre simple, non? <br><br><h3>  Algorithme </h3><br>  La grille a maintenant une taille de 30x5x30. <br><br>  1. Le premier changement a √©t√© la g√©n√©ration de pi√®ces en 3D.  Ce changement est insignifiant. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c34/992/103/c3499210320b193c8430cf343c67c1fb.png"></div><br>  <i>Veuillez noter que les chambres peuvent avoir plusieurs √©tages.</i> <br><br>  2. On retrouve alors la triangulation 3D de Delaunay de ces pi√®ces, ou plut√¥t la t√©tra√©drique Delaunay.  Apr√®s avoir recherch√© des informations sur les requ√™tes ¬´triangulation Delaunay 3D¬ª ou ¬´t√©tra√©drique Delaunay¬ª, j'ai trouv√© de nombreux articles de recherche, mais pas un seul exemple de code. <br><br>  Le plus proche de ce dont j'avais besoin √©tait l'impl√©mentation de la triangulation CGAL 3D, mais elle posait deux probl√®mes.  Tout d'abord, ce module n'√©tait disponible que sous licence GPL.  La seconde - le code √©tait tellement mod√®le et obscur que je ne pouvais pas comprendre o√π l'algorithme √©tait impl√©ment√©. <br><br>  Au final, j'ai d√ª √©tudier moi-m√™me le principe de l'algorithme de Bower-Watson pour le changer moi-m√™me.  Je ne comprends toujours pas vraiment pourquoi les cercles circonscrits sont si importants, mais au moins j'ai pu r√©√©crire l'algorithme avec les sph√®res d√©crites en utilisant <a href="http://mathworld.wolfram.com/Circumsphere.html">cette page</a> avec Wolfram MathWorld.  Comme il s'agit principalement d'op√©rations avec des matrices 4x4, j'ai affect√© tout le travail complexe au type Matrix4x4 d'Unity3D. <br><br>  Cette nouvelle version est situ√©e dans <code>Scripts3D/Delaunay3D.cs</code> , au cas o√π quelqu'un aurait besoin d'un code facile √† comprendre avec une licence MIT. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/115/812/2d6/1158122d620ef6c6922822e90e573b05.gif"></div><br>  C'est difficile √† remarquer, mais au lieu d'un triangle √† trois sommets, l'algorithme cr√©e maintenant un t√©tra√®dre √† 4 sommets.  Au moins un de ces pics sera situ√© √† un autre √©tage, sinon le t√©tra√®dre sera d√©g√©n√©r√©.  Cela donne √† l'√©tape de recherche de nombreuses possibilit√©s de se d√©placer entre les √©tages. <br><br>  3 et 4. Les bords de l'√©tape 2 avec des changements compl√®tement triviaux peuvent √™tre pass√©s √† l'algorithme Prim. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bd6/1fc/71d/bd61fc71dfa50de71b944a7380c8216b.png"></div><br>  <i>Couloirs 3D-MST</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/421/590/5df/4215905dfda539437b1fa208d767ea1e.png"></div><br>  <i>Couloirs avec plusieurs nervures ajout√©s √† nouveau</i> <br><br>  5. Les difficult√©s commencent lorsqu'elles sont impl√©ment√©es dans l'algorithme 3D A *.  La version 2D est terriblement simple, c'est une impl√©mentation standard de A *.  Pour le transf√©rer en 3D, j'ai besoin d'ajouter la possibilit√© √† l'algorithme de recherche de chemin pour monter et descendre et connecter des pi√®ces √† diff√©rents √©tages.  J'ai d√©cid√© de relier les √©tages non pas √† des escaliers verticaux, mais √† des vol√©es d'escaliers. <br><br>  Voil√† le probl√®me.  Un escalier est plus compliqu√© que de simplement monter.  Pour se d√©placer verticalement, les escaliers doivent se d√©placer horizontalement.  Autrement dit, elle a une <em>ascension</em> et une <em>envergure</em> .  Jetez un ≈ìil √† l'image ci-dessous.  La cellule actuelle est un carr√© bleu uni.  Les voisins possibles sont des cases vides.  L'algorithme de recherche de chemin ne peut pas se d√©placer vers une cellule directement au-dessus de la cellule actuelle.  Au lieu de cela, il devra se d√©placer √† la fois horizontalement et verticalement. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d4/94e/21f/5d494e21f06ce3d4705dcec3bff95e32.png"></div><br>  <i>Vue lat√©rale.</i>  <i>Vous pouvez cr√©er des n≈ìuds sur les c√¥t√©s, mais pas un n≈ìud sur le dessus.</i> <br><br>  Pour cr√©er un algorithme de recherche de chemin pour un escalier, je devais s√©lectionner sa forme.  Un rapport hauteur / longueur de 1: 1 serait trop raide, j'ai donc choisi un rapport de 1: 2.  Pour chaque unit√© de mesure verticale, l'√©chelle d√©place deux unit√©s horizontales.  De plus, pour que le personnage soit plac√©, il doit y avoir un espace au-dessus de l'escalier, c'est-√†-dire que deux cellules au-dessus de l'escalier doivent √©galement √™tre ouvertes.  En g√©n√©ral, un escalier occupe quatre cellules: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2fe/446/9db/2fe4469db95bea1a85f76b268d00dc34.png"></div><br>  <i>Escalier et espace libre au-dessus</i> <br><br>  Il devrait √©galement y avoir un couloir en haut et en bas des escaliers.  L'algorithme de recherche de chemin ne doit pas pouvoir arriver aux escaliers par le c√¥t√© ou par la direction oppos√©e.  Il sera peu pratique et √©trange si l'escalier s'√©crase dans le couloir, comme illustr√© ci-dessous. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d8/b06/7f1/6d8b067f17257102708aba1b5acf25c0.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/65b/8d1/138/65b8d1138a69c731670d2e2ee775ed45.png"></div><br>  Autrement dit, le format de l'escalier devrait ressembler √† l'image ci-dessous.  L'algorithme de recherche de chemin doit garantir l'existence de couloirs dans deux carr√©s bleus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b5f/5d7/032/b5f5d70327157e8327772d6830a863ba.png"></div><br>  <i>L'escalier commence par un carr√© bleu uni et monte d'un √©tage.</i> <br><br>  L'algorithme de recherche de chemin doit se d√©placer du d√©but au point final en une seule √©tape.  Cela signifie qu'il doit √™tre d√©cal√© de 3 unit√©s horizontalement et 1 unit√© vers le haut ou vers le bas.  L'algorithme A * est con√ßu pour passer √† chaque √©tape d'un n≈ìud √† l'autre.  Pour cr√©er l'escalier, je dois "sauter" quatre cellules de l'escalier. <br><br>  La difficult√© est qu'en quelque sorte j'ai besoin d'obtenir l'algorithme pour contourner les escaliers qu'il cr√©e.  Je ne peux pas les ajouter √† l' <em>ensemble ferm√©</em> A *, car alors √† travers ces cellules, un autre chemin d'une autre direction ne pourra pas aller.  Mais je ne peux pas les laisser non plus, car l'algorithme de recherche de chemin pourra alors se d√©placer le long de l'√©chelle nouvellement cr√©√©e, cr√©ant les situations ind√©sirables illustr√©es ci-dessus. <br><br>  La solution √©tait que chaque n≈ìud devrait garder une trace de tous les n≈ìuds pr√©c√©dents sur son chemin.  Ensuite, lors de l'examen d'un n≈ìud voisin, il sera rejet√© s'il fait r√©f√©rence au chemin du n≈ìud actuel.  Le couloir √† la fin de l'escalier contiendra toutes les cellules occup√©es par l'escalier, le n≈ìud au d√©but de l'escalier et tous les n≈ìuds sur son chemin, et ainsi de suite jusqu'au tout d√©but.  L'algorithme de recherche de chemin peut cr√©er un autre chemin passant par les escaliers, car le deuxi√®me chemin ne conna√Ætra pas les escaliers. <br><br>  Le comportement d√©crit ci-dessus n'est n√©cessaire que pour quelques chemins potentiels dans le m√™me appel de fonction de chemin.  Pour g√©n√©rer tous les couloirs, il reste encore de nombreux d√©fis √† relever pour trouver le chemin.  Les it√©rations suivantes contourneront simplement les escaliers existants comme auparavant. <br><br>  √Ä ce stade, l'algorithme n'est plus compl√®tement A *.  Il y a trop de cas particuliers pour la comptabilit√© des escaliers.  La n√©cessit√© de v√©rifier l'int√©gralit√© du chemin pr√©c√©dent √† chaque √©tape est un processus co√ªteux.  Une impl√©mentation na√Øve a suivi tous les n≈ìuds avant le d√©but, les lisant comme une liste cha√Æn√©e.  Il faudrait ensuite O (N) pour v√©rifier le chemin de chaque n≈ìud voisin. <br><br>  J'ai choisi cette impl√©mentation: stocker une table de hachage dans chaque n≈ìud, dont les cl√©s sont les n≈ìuds pr√©c√©dents.  Gr√¢ce √† cela, la v√©rification du chemin est effectu√©e dans O (1), cependant, lors de l'ajout d'un n≈ìud au chemin, la table de hachage doit √™tre copi√©e, et c'est O (N).  J'ai choisi cette m√©thode car j'ai r√©alis√© que l'algorithme lira les chemins plus souvent que de les changer. <br><br>  Quoi qu'il en soit, la complexit√© globale sera d'environ O (N ^ 2), bien que je ne sache pas comment l'analyser correctement.  Cette modification est le principal ¬´goulot d'√©tranglement¬ª de l'algorithme de g√©n√©ration de donjon. <br><br>  Apr√®s avoir effectu√© toutes ces modifications, le r√©sultat √©tait le suivant: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/de6/053/58f/de605358fc85660ec79297af49bebd45.gif"></div><br>  <i>Les rectangles verts sont des escaliers</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/770/54c/014/77054c014d736249197ecd91582dad3f.png"></div><br>  <i>Les chemins des g√©n√©rateurs peuvent √™tre simples ...</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/619/e2c/d5e/619e2cd5ed556630ba1d195143d887cc.png"></div><br>  <i>... ou compliqu√©</i> <br><br>  Voici √† quoi ressemble un donjon 3D avec de vraies ressources graphiques: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/370/ffd/f4c/370ffdf4c0bb0afd67714ca3e78409e3.png"></div><br>  <i>Donjon √† plusieurs √©tages</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/AeHsxajTPEo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  L'algorithme de g√©n√©ration de donjon est capable de cr√©er des comportements √©mergents int√©ressants. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6c3/aaf/de9/6c3aafde90d497d83aed875753cc943a.png"></div><br>  <i>Deux escaliers forment un escalier √† double largeur</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/246/712/37c/24671237ce0f08be741cf2fa487d64ec.png"></div><br>  <i>√âchelle triple largeur difficile √† expliquer</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/04b/76a/3f7/04b76a3f757465ff563774e4a213cb72.png"></div><br>  <i>Un chemin descendant sur deux √©tages peut cr√©er deux escaliers avec une plate-forme au milieu</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5c2/940/4ed/5c29404ed4ca83d27c38b49bf65cefb2.png"></div><br>  <i>Lorsque plusieurs chemins passent c√¥te √† c√¥te, les couloirs peuvent √™tre assez grands</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/377/12f/b66/37712fb662a14826078b67062bfcf56c.png"></div><br>  <i>Deux escaliers descendent √† un √©tage</i> <br><br><h2>  Conclusion </h2><br>  La partie la plus difficile du projet a √©t√© la cr√©ation des algorithmes n√©cessaires √† la version 3D.  Je n'ai pas pu trouver une seule impl√©mentation de la triangulation 3D de Delaunay, donc j'ai d√ª le faire moi-m√™me.  Les exigences de l'algorithme de recherche de chemin √©taient tr√®s sp√©cifiques, donc je l'ai fait moi-m√™me aussi. <br><br>  Mais le travail en valait la peine.  Les donjons cr√©√©s par cet algorithme sont int√©ressants et peuvent devenir la base d'un bon jeu. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr481218/">https://habr.com/ru/post/fr481218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr481208/index.html">V√©lo √©lectrique bricolage puissant et peu co√ªteux</a></li>
<li><a href="../fr481210/index.html">Que veulent les candidats pour les entrevues de r√©daction de code?</a></li>
<li><a href="../fr481212/index.html">Parlez de votre salaire</a></li>
<li><a href="../fr481214/index.html">Des pirates informatiques ont attaqu√© Norsk Hydro: comment c'√©tait</a></li>
<li><a href="../fr481216/index.html">5 mecs dans votre entreprise sans lesquels CRM ne d√©collera pas</a></li>
<li><a href="../fr481220/index.html">Annonce des cours vid√©o et des didacticiels C #, .NET et ASP.NET gratuits pour les d√©butants</a></li>
<li><a href="../fr481224/index.html">Hyper-V pour les d√©veloppeurs sur Windows 10</a></li>
<li><a href="../fr481226/index.html">Les codes QR sont d√©j√† l√† ou comment la Chine est devenue 101% num√©rique</a></li>
<li><a href="../fr481228/index.html">L'histoire du traitement du langage naturel, du XIIIe si√®cle √† nos jours</a></li>
<li><a href="../fr481234/index.html">Native vs multiplateforme: effets m√©tier dans les protocoles de vid√©osurveillance</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>