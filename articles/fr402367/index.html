<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∞üèø ü§≠ üßîüèª Comment arr√™ter de payer pour l'itin√©rance, ou avec un seul num√©ro partout dans le monde üöú üë¥üèΩ üôåüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'id√©e de ce mat√©riel m'est venue l'ann√©e derni√®re, quand, apr√®s avoir fait un grand cercle sur notre immense, √† la fin du mois j'ai re√ßu des factures...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment arr√™ter de payer pour l'itin√©rance, ou avec un seul num√©ro partout dans le monde</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402367/"> L'id√©e de ce mat√©riel m'est venue l'ann√©e derni√®re, quand, apr√®s avoir fait un grand cercle sur notre immense, √† la fin du mois j'ai re√ßu des factures d'itin√©rance.  Malgr√© les assurances des entreprises de t√©l√©phonie mobile concernant l'itin√©rance gratuite dans le pays, le trafic SMS ou Internet peut √™tre factur√© s√©par√©ment.  Et les minutes incluses dans le tarif ne sont valables que dans la ¬´r√©gion d'origine¬ª.  Eh bien, puisque cette ann√©e, les plans incluent de voyager non seulement dans mon pays natal, j'ai commenc√© √† r√©aliser mon id√©e - mon propre central t√©l√©phonique fixe √† la maison, qui pourra me contacter partout dans le monde. <br>  En cours de route, j'ai r√©solu le probl√®me des communications t√©l√©phoniques entre les appartements et les maisons des proches, car le temps des n√©gociations internes √©tait calcul√© non seulement par heures, mais par dizaines d'heures. <br>  <i>Petit spoiler: du coup, j'ai r√©ussi √† installer Asterisk sur le NAS et le routeur</i> <i><br></i> <br><img src="https://habrastorage.org/files/ab7/4f8/753/ab74f8753aea4d2980f0242ce39fb3b1.jpg"><br><a name="habracut"></a><br>  J'ai donc conclu que j'avais besoin de ma propre t√©l√©phonie.  On pourrait choisir n'importe lequel des services de t√©l√©phonie SIP qui sont pr√©sents en grand nombre sur le march√©.  Mais j'avais une liste d'exigences qu'aucun des op√©rateurs ne remplissait: <br><br><ul><li>  Choix ind√©pendant des num√©ros internes </li><li>  Acc√®s aux lignes de communication externes avec possibilit√© d'appels vers des num√©ros fixes et cellulaires </li><li>  Possibilit√© de choisir un op√©rateur fournissant la t√©l√©phonie IP </li><li>  La possibilit√© d'utiliser la carte SIM de l'op√©rateur s√©lectionn√© avec le tarif "t√©l√©phone" habituel </li><li>  Existence du menu vocal pour le renvoi d'un appel entrant vers l'abonn√© n√©cessaire </li><li>  Co√ªt de maintenance minimal ou nul \ maintien de la communication interne </li></ul><br>  De nombreux op√©rateurs proposent un central t√©l√©phonique virtuel et m√™me un menu vocal.  Mais ce service est d√©j√† pay√©.  Certains op√©rateurs autorisent les appels gratuits sur leur r√©seau, mais il y a un probl√®me avec la composition de num√©ros longs.  Et certainement personne ne vous permet d'utiliser la carte SIM de l'op√©rateur s√©lectionn√© avec le co√ªt minimum des appels ou des minutes pr√©pay√©es.  J'ai donc d√©cid√© de devenir moi-m√™me mon propre op√©rateur t√©l√©com. <br><br>  <b>Premi√®re √©tape.</b>  <b>Choix de plate-forme: virtualisation</b> <br><br>  Comme je m'occupais d√©j√† de la t√©l√©phonie IP, il a √©t√© d√©cid√© d'augmenter mon PBX bas√© sur Asterisk - c'est gratuit, il y a beaucoup de forums, de manuels et ... pourquoi pas?  J'ai obtenu quelques combin√©s avec le support SIP et j'ai commenc√© √† penser √† la plate-forme pour travailler Asterisk.  Pour le mettre dans les nuages ‚Äã‚Äãou sur un serveur virtuel, cela signifierait que t√¥t ou tard vous devrez payer, mais alors l'id√©e de faire de la t√©l√©phonie gratuitement s'effondre.  J'ai donc d√©cid√© d'utiliser la fonction de virtualisation sur mon NAS QNAP TS-451.  J'ai d√©j√† √©crit sur cette puce de lecteur r√©seau, vous pouvez donc en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">savoir plus</a> .  Les performances du syst√®me √©taient suffisantes non seulement pour le travail d'Asterisk lui-m√™me, mais aussi pour l'interface Web, j'ai donc d√©cid√© d'utiliser la distribution Elastix.  Je dois dire que la derni√®re distribution disponible sur le site officiel d'Elastix.org au num√©ro 5 est d√©j√† un shareware, donc je recommande de rechercher la version 4 de torrents sur les torrents - elle √©tait gratuite et distribu√©e librement, mais maintenant elle n'est plus disponible sur le site. <br><br>  La cr√©ation d'utilisateurs dans Elastix est d√©crite plusieurs fois, mais le reste n'est pas trait√© en d√©tail sur le r√©seau.  Je d√©crirai donc la connexion du fournisseur Multifon SIP de Megafon et la cr√©ation d'un menu vocal avec renvoi d'appel. <br><br>  Cr√©ez un coffre avec les param√®tres de votre compte dans Multifon.  Vous pouvez connecter cette option √† n'importe quel num√©ro d'op√©rateur Megafon.  Le pr√©l√®vement ne d√©pend pas du plan tarifaire s√©lectionn√© et est effectu√© pour chaque minute d'un appel sortant.  La bo√Æte de r√©ception est gratuite.  Deux lignes de conversation sont prises en charge √† la fois.  De plus, vous pouvez configurer que les appels entrants soient uniquement dirig√©s vers le t√©l√©phone, t√©l√©phone + multiphone, uniquement vers le multiphone. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/498/22b/df1/49822bdf122d4f94a926dd7ef33477b3.JPG"></div><br>  Param√®tres de texte pour ceux qui souhaitent ajouter un tronc Multifon √† eux-m√™mes: <br><br><div class="spoiler">  <b class="spoiler_title">Trunk Multifon</b> <div class="spoiler_text">  D√©tails des pairs: <br><br>  username = phone_number <br>  type = pair <br>  secret = mot de passe <br>  port = 5060 <br>  nat = oui <br>  non s√©curis√© = port, inviter <br>  host = sbc.megafon.ru <br>  fromuser = phone_number <br>  fromdomain = multifon.ru <br>  dtmfmode = inband <br>  context = from-trunk <br><br>  Enregistrer la cha√Æne: <br>  phone_number: password@multifon.ru/ phone_number <br></div></div><br>  Nous sommes donc connect√©s au fournisseur SIP et nous pouvons d√©sormais transf√©rer l'appel entrant vers n'importe quel num√©ro de poste.  Mais que faire si vous voulez que l'appelant choisisse le num√©ro de poste √† composer?  Vous pouvez cr√©er un menu vocal avec un choix de destinataire.  Je vais faire une description √©tape par √©tape. <br><br>  <b>Cr√©er un menu vocal dans Elastix</b> <br><br>  Acc√©dez aux enregistrements syst√®me.  Ici, les param√®tres de l'enregistrement vocal √† effectuer sont d√©j√† √©crits: PCM, 16 bits, 8000 Hz.  Cela peut √™tre fait √† la fois dans l'utilitaire d'enregistrement standard et dans des programmes tiers comme SoundForge. <br><br><img src="https://habrastorage.org/files/e61/11f/8e0/e6111f8e025b4aa9997a71f15c8ad4fd.JPG"><br><br>  Une fois le message d'accueil vocal cr√©√© et t√©l√©charg√© sur le serveur, acc√©dez √† l'√©l√©ment de menu IVR.  Nous cr√©ons un nouveau menu vocal et s√©lectionnons le fichier de bienvenue, ainsi que la r√©action √† l'appui sur les boutons.  Dans mon cas, j'ai choisi qu'en appuyant sur le chiffre ¬´3¬ª le num√©ro ¬´101¬ª soit appel√© et ainsi de suite.  Si le mauvais bouton est s√©lectionn√© ou si l'appelant n'appuie pas sur un seul bouton, l'appel est renvoy√© vers le poste 304. <br><br><img src="https://habrastorage.org/files/609/623/97b/60962397b5814ebdb0009de89a0d2299.JPG"><br><br>  Maintenant, nous devons faire en sorte que l'appel entrant arrive dans notre menu vocal.  Nous allons √† l'√©l√©ment Routes entrantes et cr√©ons une nouvelle r√®gle.  Dans le dernier paragraphe de ¬´D√©finir la destination¬ª, s√©lectionnez IVR et la file d'attente pr√©c√©demment cr√©√©e, que j'ai appel√©e ¬´dozvon¬ª. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/58e/a1b/ece/58ea1bece48e4befaa16526285636b0e.JPG"></div><br>  Nous √©conomisons et utilisons.  Tout cela a fonctionn√© pendant environ un mois sans √©checs, mais cela ne me semblait pas suffisant.  Apr√®s tout, toutes les maisons n'ont pas de NAS avec une machine virtuelle ou un serveur sur lequel vous pouvez √©lever l'ast√©risque, mais presque toutes les maisons ont un routeur! <br><br>  <b>Probl√®mes possibles et leur solution avec un serveur virtuel</b> <br><br>  Dans le processus de cr√©ation du serveur et de la redirection de port, il s'est av√©r√© que le fonctionnement de deux machines virtuelles et d'un serveur physique sur le m√™me port r√©seau n'est pas tr√®s efficace.  La solution la plus simple consistait √† tirer parti du syst√®me de virtualisation et √† s√©lectionner une interface r√©seau distincte pour une machine virtuelle.  Il s'est av√©r√© tr√®s simple de le faire avec les outils QNAP int√©gr√©s.  Apr√®s cela, la machine virtuelle NAS + 1 elle-m√™me est rest√©e sur la premi√®re interface r√©seau et la deuxi√®me machine virtuelle sur la deuxi√®me interface r√©seau. <br><br><img src="https://habrastorage.org/files/e13/dc4/37a/e13dc437ad504802b5b0c61ecb17718f.JPG"><br><br>  <b>Deuxi√®me √©tape: soulever l'ast√©risque sur le routeur</b> <br><br>  Il se trouve que j'utilise le fournisseur Yota, mais je n'utilise pas leurs routeurs d'origine.  Pendant longtemps, j'ai install√© un excellent routeur de Zyxel - Keenetic LTE.  Il y a quelques ann√©es, je l'ai d√©j√† test√© dans les conditions les plus difficiles de l'outback et j'√©tais compl√®tement satisfait - il y a un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mat√©riel s√©par√©</a> √† ce sujet sur Habr√©. <br><br>  Dans le dernier firmware NDMS, ou plus pr√©cis√©ment, √† partir du firmware 2.08.B, la prise en charge des packages OPKG est incluse pour la famille de routeurs Zyxel Keenetic.  Cela signifie que vous pouvez mettre les logiciels les plus divers.  (Il existe de nombreux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">logiciels</a> adapt√©s aux routeurs Zyxel) Alors pourquoi ne pas y mettre Asterisk?  <i>Il est important que le routeur dispose d'au moins 128 Mo de RAM.</i>  Aussit√¥t dit, aussit√¥t fait! <br>  C'est d'autant plus agr√©able que les sp√©cialistes Zyxel ont m√™me pr√©par√© un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">manuel</a> de d√©ploiement d'Asterisk pour leurs routeurs.  En principe, pour d√©ployer la t√©l√©phonie sur un routeur, il suffit de suivre les instructions pas √† pas.  Et je vais vous dire comment j'ai am√©lior√© et apport√© le fonctionnement de ce syst√®me √† celui qui tournait sur un serveur virtuel s√©par√©. <br><br>  La premi√®re chose que j'ai rencontr√©e √©tait un probl√®me peu clair avec le d√©marrage du routeur apr√®s un red√©marrage du logiciel.  Il s'est av√©r√© que ma cl√© USB, connect√©e au port USB du routeur, consomme du courant jusqu'√† 0,16A.  Cela s'est av√©r√© suffisant pour que le modem LTE du routeur Zyxel Keenetic LTE ne puisse pas d√©marrer p√©riodiquement.  Tout a √©t√© gu√©ri en connectant un lecteur flash via un concentrateur USB externe avec une alimentation suppl√©mentaire.  Pris le temps test√© par de nombreuses personnes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D-Link DUB-H7</a> .  Cela a mis fin aux probl√®mes.  Je crois que les routeurs avec une paire de ports USB fonctionneront sans de telles b√©quilles. <br><br>  Passons maintenant aux param√®tres de l'ast√©risque.  Ici, vous devez d√©j√† modifier tous les stylos.  Il y a deux fa√ßons: aller sur SSH et y √©diter (MC est pr√©sent) ou faire le tour de la balle vers l'adresse IP du routeur et √©diter les fichiers √† l'aide de Notepad ++.  Les deux options me convenaient et je me mis au travail.  Ajout de mes utilisateurs, enregistrement du multi-tronc dans le fichier sip.conf.  Il ne reste plus qu'√† faire une file d'attente vocale.  J'ai plac√© le fichier d'accueil vocal dans <i>\\ 192.168.1.1 \ Asterisk-blue \ var \ lib \ asterisk \ sons \ ru</i> et j'ai apport√© les modifications suivantes au fichier extensions.conf. <br><br><div class="spoiler">  <b class="spoiler_title">Cr√©er un menu vocal dans Asterisk</b> <div class="spoiler_text">  [externe-sortant] <br>  ; ------------------ Multifon - exten =&gt; _8 .........., 1, NoOp () <br>  exten =&gt; _8 .........., n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _8 .........., n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _8 .........., n, Answer () <br>  exten =&gt; _8 .........., n, Wait (2) <br>  exten =&gt; _8 .........., n, Lecture (/ opt / var / lib / asterisk / sons / itsp_names / multifon) <br>  exten =&gt; _8 .........., n, Dial (SIP / Multifon / 7 $ {EXTEN: 1} ,, T) <br>  exten =&gt; _8 .........., n, raccrocher () <br><br>  [multifon-entrant]; ===== Appel entrant de Multifon ===== <br>  exten =&gt; _........, 1, NoOp () <br>  exten =&gt; _........, n, Wait (4) <br>  exten =&gt; _........, n, Answer () <br>  exten =&gt; _........, n (lecture), NoOp () <br>  exten =&gt; _........, n, Wait (1) <br>  exten =&gt; _........, n, lecture (bonjour) <br>  exten =&gt; _........, n, Wait (0,5) <br>  exten =&gt; _........, n, Lecture (priv) <br>  exten =&gt; _........, n, Set (TIMEOUT (digit) = 1) <br>  exten =&gt; _........, n, NoOp () <br>  exten =&gt; _........, n, WaitExten (7) <br><br>  exten =&gt; _1,1, NoOp () <br>  exten =&gt; _1, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _1, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _1, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _1, n (dial_ext), composer (SIP / 101.60, mt) <br><br>  exten =&gt; _2,1, NoOp () <br>  exten =&gt; _2, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _2, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _2, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _2, n (dial_ext), composer (SIP / 302.60, mt) <br><br>  exten =&gt; _3,1, NoOp () <br>  exten =&gt; _3, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _3, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _3, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _3, n (dial_ext), composer (SIP / 304.60, mt) <br></div></div><br>  Donc √ßa a march√©.  Les appels sortants passent par Multifon, les appels internes entre abonn√©s sont gratuits et les appels entrants via Multifon peuvent √™tre adress√©s √† l'un des trois abonn√©s.  Mais cela ne me semblait pas suffisant.  Et il est dommage que seul le m√©gaphone donne une connexion SIP alternative √† une ligne cellulaire.  Et si vous souhaitez utiliser un autre op√©rateur de t√©l√©phonie mobile?  Il y a une solution au probl√®me! <br><br>  <b>Troisi√®me √©tape: nous attachons tout op√©rateur mobile √† notre Asterisk</b> <br><br>  La derni√®re √©tape a √©t√© de connecter tout op√©rateur mobile √† notre serveur de t√©l√©phonie.  La solution la plus logique serait de connecter une passerelle GSM-SIP, ce qui donne un tronc SIP √† la sortie.  Mais le co√ªt de ces appareils par 1 carte SIM commence √† partir de 9 mille roubles, il a donc √©t√© d√©cid√© d'aller dans l'autre sens.  Nous trouvons un modem avec support vocal.  Dans notre cas, il s'agit du Huawei E3131.  Comment le d√©verrouiller et activer les fonctionnalit√©s vocales a √©t√© d√©crit √† plusieurs reprises sur le r√©seau, donc je ne serai pas distrait par cela.  Nous ins√©rons la carte SIM dont nous avons besoin dans le port du concentrateur USB et tout d'abord, d√©sactivons son fonctionnement en tant que modem 3G dans le menu. <br><br><img src="https://habrastorage.org/files/4ee/4f9/c3a/4ee4f9c3a5ee482fb880c7409cf94156.JPG"><br><br>  Ensuite, nous commen√ßons √† configurer les fichiers de l'Asterisk.  Tout d'abord, installez le package Dongle avec la commande dans la <i>console opkg install asterisk11-chan-dongle</i> .  Apr√®s l'installation, ouvrez le fichier dongle.conf et modifiez-le pour obtenir les √©l√©ments suivants: <br><br><div class="spoiler">  <b class="spoiler_title">Fichier de travail dongle.conf</b> <div class="spoiler_text">  [dongle] <br>  intervalle = 15 <br><br>  [par d√©faut] <br>  contexte = dongle-entrant <br>  rxgain = 0 <br>  txgain = 0 <br>  usecallingpres = oui <br>  appel en attente = non <br>  dtmf = intrabande <br>  mindtmfgap = 45;  intervalle minimal entre la fin des aper√ßus DTMF et le d√©but du suivant en ms <br>  mindtmfduration = 80;  dur√©e minimale de tonalit√© DTMF en ms <br>  mindtmfinterval = 200;  intervalle minimal entre les extr√©mit√©s du DTMF de m√™mes chiffres en ms <br><br>  [GSM1] <br>  audio = / dev / ttyUSB1 <br>  data = / dev / ttyUSB2 <br>  imei = *****************;  E3131 - Entrez le modem IMEI <br></div></div><br>  Enregistrez le fichier et acc√©dez au fichier extensions.conf.  Le multifon peut √™tre mis en commentaire et ajout√© pour fonctionner avec le modem. <br><br><div class="spoiler">  <b class="spoiler_title">Nous nous inscrivons pour le fonctionnement des appels via le modem USB dans le fichier extensions.conf</b> <div class="spoiler_text">  [dongle sortant];  pour les appels sortants: <br>  ; ------------------ GSM1 Donle - exten =&gt; _8 .........., 1, NoOp () <br>  exten =&gt; _8 .........., n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _8 .........., n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _8 .........., n, Answer () <br>  exten =&gt; _8 .........., n, Wait (2) <br>  exten =&gt; _8 .........., n, lecture (/ opt / var / lib / asterisk / sons / itsp_names / beeline-gsm) <br>  exten =&gt; _8 .........., n, composer (DONGLE / GSM1 / 8 $ {EXTEN: 1} ,, T) <br>  exten =&gt; _8 .........., n, raccrocher () <br><br>  [dongle entrant];  pour les appels entrants: <br>  exten =&gt; s, 1, NoOp () <br>  exten =&gt; s, n, Wait (4) <br>  exten =&gt; s, n, Answer () <br>  exten =&gt; s, n (lecture), NoOp () <br>  exten =&gt; s, n, Wait (1) <br>  exten =&gt; s, n, lecture (bonjour) <br>  exten =&gt; s, n, Wait (0,5) <br>  exten =&gt; s, n, Lecture (priv) <br>  exten =&gt; s, n, Set (TIMEOUT (digit) = 1) <br>  exten =&gt; s, n, NoOp () <br>  exten =&gt; s, n, WaitExten (7) <br><br>  exten =&gt; _1,1, NoOp () <br>  exten =&gt; _1, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _1, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _1, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _1, n (dial_ext), composer (SIP / 101.60, mt) <br><br>  exten =&gt; _2,1, NoOp () <br>  exten =&gt; _2, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _2, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _2, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _2, n (dial_ext), composer (SIP / 302.60, mt) <br><br>  exten =&gt; _3,1, NoOp () <br>  exten =&gt; _3, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _3, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _3, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _3, n (dial_ext), composer (SIP / 304.60, mt) <br></div></div><br>  Maintenant, tout a commenc√© et a fonctionn√© comme il se doit.  L'ast√©risque accepte les appels entrants vers un num√©ro et l'utilisateur choisit o√π l'appeler en s√©lectionnant un num√©ro.  Un appel sortant passe par n'importe quel op√©rateur mobile, o√π que vous soyez.  Autrement dit, vous pouvez ins√©rer votre carte SIM dans un modem USB et vous rendre n'importe o√π dans le monde.  L√†, il suffit d'avoir acc√®s au r√©seau, et sur le smartphone / ordinateur portable d'avoir un client SIP qui se connectera √† votre serveur Asterisk.  La solution est ex√©cut√©e et fonctionne.  Les probl√®mes r√©sultants ont √©t√© trait√©s en ajoutant un concentrateur USB avec une alimentation externe et en rempla√ßant le lecteur flash, car certains lecteurs fonctionnaient mal.  Tout le travail de mise en service de la t√©l√©phonie prendra une soir√©e. <br><br>  Pour √©viter que ce travail ne disparaisse, vous pouvez cr√©er une sauvegarde de l'ensemble de l'ast√©risque sur un lecteur flash avec une seule commande: <br><br><div class="spoiler">  <b class="spoiler_title">Faire une sauvegarde de l'ast√©risque sur un lecteur flash</b> <div class="spoiler_text">  tar cvzf / opt / backup-`date "+% Y-% m-% d_% H-% M" .tar.gz -C / opt / bin etc home lib lost + found root sbin share tmp usr var <br></div></div><br>  <b>Bonus pour les propri√©taires de Zyxel Keenetic LTE</b> <br><br>  Il convient de noter que ce routeur est √©galement √©quip√© de deux clients SIP avec des ports FXS physiques, auxquels vous pouvez connecter n'importe quel t√©l√©phone analogique.  Et ce client se connecte facilement au serveur Asterisk, qui tourne dessus. <br><br>  <b>Bonus pour les propri√©taires de Zyxel Keenetic *</b> <br><br>  Si vous ne voulez pas d√©penser d‚Äôargent pour acheter des t√©l√©phones SIP, la gamme de routeurs Keenetic prend en charge l‚Äôadaptateur DECT Zyxel, qui ajoute la fonctionnalit√© de t√©l√©phonie SIP avec la possibilit√© de connecter n‚Äôimporte quel combin√© sans fil DECT. <br><br>  <b>Conclusion</b> <br><br>  Le probl√®me de la libre communication entre divers abonn√©s avec des conversations fr√©quentes et longues est r√©solu.  La t√¢che de ¬´pr√©sence¬ª de l'abonn√© dans la ville et de libre communication avec le propri√©taire du num√©ro, o√π qu'il se trouve, est √©galement r√©solue.  La solution NAS QNAP TS-451 avec virtualisation b√©n√©ficie de la possibilit√© de configurer Asterisk via une interface Web.  Mais la solution avec un routeur ne n√©cessite presque aucun co√ªt.  Ast√©risque - c'est facile!  Pourquoi payer pour l'itin√©rance alors que la connexion peut √™tre gratuite? <br><br>  Je tiens √† remercier s√©par√©ment l'√©quipe Zyxel pour sa r√©activit√©, son aide √† l'exp√©rimentation et l'augmentation des fonctionnalit√©s de ses appareils. <br><br>  PS Comme correctement comment√© ci-dessous, presque tous les op√©rateurs mobiles interdisent l'utilisation d'une carte SIM pour cr√©er une porte GSM.  En fait, personne ne vous bloquera jusqu'√† ce que vous commenciez l'exploitation commerciale de votre portail.  L'auteur n'est pas responsable de vos actions. <br>  Cependant, je connais des cas o√π des entreprises ont utilis√© des dizaines de cartes SIM dans des passerelles GSM pour des appels √† bas prix vers des num√©ros de cellulaire. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr402367/">https://habr.com/ru/post/fr402367/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr402355/index.html">√âchecs quantiques</a></li>
<li><a href="../fr402357/index.html">Puis-je remplacer Adobe Premiere et Sony Vegas par des √©diteurs vid√©o gratuits?</a></li>
<li><a href="../fr402359/index.html">Poisson rouge nageant plus vite que les requins</a></li>
<li><a href="../fr402361/index.html">Agence spatiale europ√©enne: la surface d'Encelade se r√©chauffe √† l'int√©rieur</a></li>
<li><a href="../fr402363/index.html">Un professeur d'√©cole am√©ricain d√©chiffre un cryptogramme l√©ger du dernier √©tage du bureau Adobe</a></li>
<li><a href="../fr402369/index.html">Comment mesurer la vitesse d'une imprimante 3D - son extr√©mit√© chaude. Et pas seulement la vitesse</a></li>
<li><a href="../fr402373/index.html">Ce qui donne la "G√©n√©tique du Microbiote"</a></li>
<li><a href="../fr402375/index.html">Commutateur ca √† 4 canaux de 8 kilowatts avec mesure de la consommation. Partie 1</a></li>
<li><a href="../fr402377/index.html">Que pensent vos smartphones de la charge USB de la voiture</a></li>
<li><a href="../fr402379/index.html">Ce que les chercheurs en IA pensent des risques possibles associ√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>