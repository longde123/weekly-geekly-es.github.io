<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§üüèæ üíÉüèª üë£ Melhores pr√°ticas do Redis, parte 1 üë©üèæ üíÉüèª üîó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em uma s√©rie de v√°rios artigos, apresentarei minha tradu√ß√£o adaptada da se√ß√£o Redis Best Practices no site oficial do Redis Labs. 
 Os Redis podem ser...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Melhores pr√°ticas do Redis, parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485672/">  Em uma s√©rie de v√°rios artigos, apresentarei minha tradu√ß√£o adaptada da se√ß√£o <a href="https://redislabs.com/redis-best-practices/" rel="nofollow">Redis Best Practices</a> no site oficial do Redis Labs. <div style="text-align:center;"><img src="https://habrastorage.org/webt/hr/6y/f5/hr6yf5w1hp0fh-i5vfa0p1pxeuy.png"></div><a name="habracut"></a><br>  Os Redis podem ser usados ‚Äã‚Äãde in√∫meras maneiras; no entanto, existem v√°rios padr√µes que podem ser usados ‚Äã‚Äãpara resolver problemas comuns.  Compilamos uma cole√ß√£o de padr√µes comuns que consideramos <i>melhores pr√°ticas</i> para resolver esses problemas.  Essa cole√ß√£o n√£o √© exaustiva e n√£o parece ser um conjunto das √∫nicas maneiras de usar o Redis, mas esperamos que sirva como ponto de partida para resolver problemas usando o Redis. <br><br>  Dividimos este guia de pr√°ticas recomendadas em cap√≠tulos e subcap√≠tulos, conforme necess√°rio (Nota do tradutor: alguns subcap√≠tulos s√£o curtos, portanto os combinarei em um): <br><br><ul><li>  no cap√≠tulo ‚ÄúPadr√µes de indexa√ß√£o‚Äù, procuraremos maneiras de ir al√©m do acesso usual de valores-chave com o Redis.  Inclui maneiras de usar padr√µes de chave de maneira inteligente, usando v√°rios tipos de dados Redis para ajudar n√£o apenas a encontrar dados, mas tamb√©m a reduzir a complexidade do acesso; </li><li>  O cap√≠tulo Padr√µes de intera√ß√£o enfoca os padr√µes Redis que movem dados pela infraestrutura.  Nesse caso, o Redis n√£o atua como um reposit√≥rio, mas como um guia para dados; </li><li>  o cap√≠tulo ‚ÄúPadr√µes de armazenamento de dados‚Äù descreve m√©todos para salvar representa√ß√µes complexas de dados no Redis.  Calcularemos scripts complexos de documentos que podem ser generalizados de maneiras simples e complexas; </li><li>  padr√µes relacionados a dados armazenados temporariamente s√£o descritos no cap√≠tulo ‚ÄúPadr√µes de s√©ries temporais‚Äù; </li><li>  O limite de velocidade √© frequentemente usado no Redis.  No cap√≠tulo "Padr√µes b√°sicos de limita√ß√£o de velocidade", passaremos ao b√°sico de seus casos de uso; </li><li>  O filtro Bloom √© visto h√° muito tempo em Redis e, no cap√≠tulo ‚ÄúPadr√µes com filtro Bloom‚Äù, examinamos as estruturas de dados probabil√≠sticas e como elas diferem de seus an√°logos incr√≠veis; </li><li>  o balc√£o √© uma recep√ß√£o surpreendentemente profunda.  Em um cap√≠tulo separado, exploramos como calcular a atividade e elementos √∫nicos de maneiras computacionais eficientes; </li><li>  por fim, falaremos sobre como alavancar Lua para que os Redis fa√ßam mais com menos. </li></ul><br>  Este guia √© inconsistente, portanto voc√™ pode inici√°-lo em qualquer cap√≠tulo.  Voc√™ tamb√©m pode usar a navega√ß√£o no in√≠cio de cada postagem para encontrar algo adequado. <br><br><h2>  Padr√µes de indexa√ß√£o </h2><br>  Conceitualmente, o Redis √© um banco de dados baseado no paradigma de chave / valor, quando cada dado est√° associado a uma determinada chave.  Se voc√™ deseja obter dados para algo que n√£o seja uma chave, ser√° necess√°rio implementar um √≠ndice que use um dos muitos tipos de dados dispon√≠veis no Redis. <br><br>  A indexa√ß√£o no Redis √© bem diferente da apresentada em outros bancos de dados, portanto, seus pr√≥prios cen√°rios e dados de uso determinar√£o a melhor estrat√©gia de indexa√ß√£o.  Neste cap√≠tulo, examinaremos algumas estrat√©gias gerais de recupera√ß√£o de dados, al√©m da simples recupera√ß√£o de chave / valor: <br><br><ul><li>  conjuntos classificados como √≠ndices; </li><li>  √≠ndices lexicogr√°ficos; </li><li>  √≠ndices geoespaciais; </li><li>  Geolocaliza√ß√£o IP </li><li>  pesquisa de texto completo; </li><li>  √≠ndices particionados. </li></ul><br><h3>  Conjuntos classificados como √≠ndices </h3><br>  Conjuntos classificados (ZSETs) s√£o um tipo de dados padr√£o no Redis que representa muitos objetos exclusivos (as repeti√ß√µes n√£o s√£o salvas), onde cada objeto √© atribu√≠do a um n√∫mero (chamado de "contagem"), que atua como um mecanismo de classifica√ß√£o natural.  E embora os objetos n√£o possam ser repetidos, poucos objetos podem ter a mesma contagem.  Com uma complexidade de tempo relativamente baixa para adicionar, excluir e obter um intervalo de valores (por classifica√ß√£o ou contagem), os conjuntos classificados s√£o bastante adequados para serem √≠ndices.  Como exemplo, considere os pa√≠ses do mundo, classificados por popula√ß√£o: <br><br><pre><code class="plaintext hljs">&gt; ZADD countries-by-pop 1409517397 china &gt; ZADD countries-by-pop 146573899 russia &gt; ZADD countries-by-pop 81456724 germany &gt; ZADD countries-by-pop 333016381 usa &gt; ZADD countries-by-pop 1 mars &gt; ZADD countries-by-pop 37290812 afghanistan &gt; ZADD countries-by-pop 1388350202 india</code> </pre> <br>  Obter os 5 principais pa√≠ses ser√° simples: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGE countries-by-pop 0 4 1) "mars" 2) "afghanistan" 3) "germany" 4) "russia" 5) "india"</code> </pre> <br>  E obtendo pa√≠ses com popula√ß√µes entre 10.000.000 e 1.000.000.000: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYSCORE countries-by-pop 10000000 1000000000 1) "afghanistan" 2) "germany" 3) "russia"</code> </pre> <br>  Voc√™ pode criar v√°rios √≠ndices para demonstrar maneiras diferentes de classificar dados.  Em nosso exemplo, poder√≠amos usar os mesmos objetos, mas, em vez do n√∫mero de pessoas, considerar a densidade populacional, o tamanho geogr√°fico, o n√∫mero de usu√°rios da Internet etc.  Isso criar√° √≠ndices de alto desempenho para v√°rios aspectos.  Al√©m disso, dividindo o nome de um objeto com dados armazenados em Redis (no Hash, por exemplo) ou em outro reposit√≥rio de dados, o processo secund√°rio pode obter informa√ß√µes adicionais sobre cada elemento, conforme necess√°rio. <br><br><h3>  √çndices lexicogr√°ficos </h3><br>  Os conjuntos classificados (ZSETs) com classifica√ß√£o por contagem t√™m uma propriedade interessante que pode ser usada para criar um mecanismo para classifica√ß√£o alfab√©tica aproximada.  A propriedade √© que objetos com a mesma pontua√ß√£o podem ser retornados em ordem lexicogr√°fica e por valores de limite.  Pegue os seguintes dados: <br><br><pre> <code class="plaintext hljs">&gt; ZADD animal-list 0 bison 0 boa 0 dog 0 emu 0 falcon 0 alligator 0 chipmunk</code> </pre> <br>  Este comando adicionar√° v√°rios animais √† chave da lista de animais.  Cada objeto tem uma pontua√ß√£o igual a 0. Depois de executar o comando ZRANGE com os argumentos 0 e -1, vemos uma ordem curiosa: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGE animal-list 0 -1 1) "alligator" 2) "bison" 3) "boa" 4) "chipmunk" 5) "dog" 6) "emu" 7) "falcon"</code> </pre> <br>  Embora os elementos n√£o tenham sido adicionados em ordem alfab√©tica, eles foram retornados em ordem alfab√©tica.  Essa ordem √© o resultado da compara√ß√£o de cadeias bin√°rias, byte por bit.  Isso significa que os caracteres ASCII ser√£o retornados em ordem alfab√©tica.  Isso sugere o seguinte: <br><br><ul><li>  caracteres em mai√∫sculas e min√∫sculas n√£o ser√£o reconhecidos como os mesmos; </li><li>  caracteres multibyte n√£o ser√£o classificados conforme o esperado. </li></ul><br>  O Redis tamb√©m fornece alguns recursos avan√ßados para restringir ainda mais as pesquisas lexicogr√°ficas.  Por exemplo, queremos retornar animais come√ßando com <i>be</i> terminando com <i>e</i> .  Podemos usar o seguinte comando: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [b (f 1) "bison" 2) "boa" 3) "chipmunk" 4) "dog" 5) "emu"</code> </pre> <br>  O argumento <i>(f</i> pode ser um pouco confuso. Esse √© um ponto importante, porque Redis n√£o tem id√©ia do entendimento literal das letras do alfabeto. Isso significa que devemos levar em conta que tudo que come√ßa com <i>e</i> sempre fica antes de tudo que come√ßa com <i>f</i> , independentemente das letras subsequentes Outra observa√ß√£o √© que o colchete indica pesquisa com inclus√£o e o colchete indica pesquisa sem inclus√£o.No nosso caso, se consultarmos com <i>b</i> , isso ser√° inclu√≠do na lista, enquanto <i>f</i> n√£o aparecer√° na sele√ß√£o. todos os elementos at√© o fim, use  codificado o √∫ltimo s√≠mbolo (255 ou 0xFF): <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [c "[\xff" 1) "chipmunk" 2) "dog" 3) "emu" 4) "falcon"</code> </pre> <br>  Este comando tamb√©m pode ser limitado, garantindo a pagina√ß√£o: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [b (f LIMIT 0 2 1) "bison" 2) "boa" &gt; ZRANGEBYLEX animal-list [b (f LIMIT 2 2 1) "chipmunk" 2) "dog"</code> </pre> <br>  A √∫nica armadilha √© que a complexidade do tempo aumentar√° √† medida que o recuo aumentar (primeiro argumento ap√≥s LIMIT).  Portanto, se voc√™ possui 1 milh√£o de objetos e est√° tentando obter os dois √∫ltimos, isso exigir√° um rastreamento de apenas um milh√£o. <br><br><h3>  √çndices geoespaciais </h3><br>  O Redis possui v√°rias equipes de indexa√ß√£o geoespacial (equipes GEO), mas, diferentemente de outras equipes, essas equipes n√£o t√™m seus pr√≥prios tipos de dados.  Esses comandos realmente complementam o tipo de conjunto classificado.  Isso √© conseguido codificando a latitude e longitude na pontua√ß√£o do conjunto classificado usando o algoritmo geohash. <br>  √â f√°cil adicionar elementos a um √≠ndice geogr√°fico.  Suponha que voc√™ esteja rastreando um grupo de carros que dirigem ao longo de uma estrada.  Chamamos esse conjunto de carros simplesmente de "carros".  Digamos que sua m√°quina espec√≠fica possa ser identificada como um objeto "meu carro" (usamos o termo "objeto" porque o √≠ndice geogr√°fico √© simplesmente uma forma do conjunto).  Para adicionar uma m√°quina ao conjunto, podemos executar o comando: <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.17087 36.12306 my-car</code> </pre> <br>  O primeiro argumento √© o conjunto ao qual adicionamos, o segundo √© latitude, o terceiro √© longitude e o quarto √© o nome do objeto. <br><br>  Para atualizar a localiza√ß√£o da m√°quina, basta executar o comando novamente com as novas coordenadas.  Isso funciona porque um √≠ndice geogr√°fico √© simplesmente um conjunto em que elementos duplicados n√£o s√£o permitidos. <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.17172 36.12196 my-car</code> </pre> <br>  Adicione um segundo carro a "carros".  Desta vez, Volodya a leva: <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.171971 36.120609 volodias-car</code> </pre> <br>  Olhando as coordenadas, voc√™ pode dizer que esses carros s√£o muito pr√≥ximos um do outro, mas quanto?  Voc√™ pode definir isso com o comando GEODIST: <br><br><pre> <code class="plaintext hljs">&gt; GEODIST cars my-car volodias-car "151.9653"</code> </pre> <br>  Isso significa que dois ve√≠culos est√£o a aproximadamente 151 metros de dist√¢ncia.  Voc√™ tamb√©m pode calcular em outras unidades: <br><br><pre> <code class="plaintext hljs">&gt; GEODIST cars my-car robins-car ft "498.5737"</code> </pre> <br>  Isso retornou a mesma dist√¢ncia em etapas.  Voc√™ tamb√©m pode usar milhas (ml) ou quil√¥metros (km). <br><br>  Agora vamos ver quem est√° no raio de um certo ponto: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUS cars -115.17258 36.11996 100 m 1) "volodias-car"</code> </pre> <br>  Isso retornou todos dentro de um raio de 100 metros ao redor do ponto especificado.  Voc√™ tamb√©m pode solicitar a todos no raio de qualquer objeto do conjunto: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m 1) "volodias-car" 2) "my-car"</code> </pre> <br>  Tamb√©m podemos ativar a dist√¢ncia adicionando o argumento WITHDIST opcional (isso funciona para GEORADIUS ou GEORADIUSBYMEMBER): <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m WITHDIST 1) 1) "volodias-car" 2) "0.0000" 2) 1) "my-car" 2) "151.9653"</code> </pre> <br>  Outro argumento opcional para GEORADIUS e GEORADIUSBYMEMBER √© WITHCOORD, que retorna as coordenadas de cada objeto.  WITHDIST e WITHCOORD podem ser usados ‚Äã‚Äãjuntos ou separadamente: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m WITHDIST WITHCOORD 1) 1) "volodias-car" 2) "0.0000" 3) 1) "-115.17197102308273315" 2) "36.12060917648089031" 2) 1) "my-car" 2) "151.9653" 3) 1) "-115.17171889543533325" 2) "36.12196018285882104"</code> </pre> <br>  Como os √≠ndices geoespaciais s√£o apenas uma alternativa aos conjuntos classificados, alguns operadores desses √∫ltimos podem ser usados.  Se quisermos remover ‚Äúmy-car‚Äù do conjunto de ‚Äúcars‚Äù, podemos usar o comando do conjunto classificado de ZREM: <br><br><pre> <code class="plaintext hljs">&gt; ZREM cars my-car</code> </pre> <br>  O Redis fornece um rico conjunto de ferramentas para trabalhar com geoespacial, e nesta se√ß√£o examinamos apenas as b√°sicas. <br><br><h3>  Geolocaliza√ß√£o IP </h3><br>  Encontrar a localiza√ß√£o real do servi√ßo conectado pode ser muito √∫til.  As tabelas de geolocaliza√ß√£o de IP geralmente s√£o muito grandes e dif√≠ceis de gerenciar de forma eficaz.  Podemos usar conjuntos classificados para implementar servi√ßos de geolocaliza√ß√£o IP r√°pidos e eficientes. <br><br>  O IPv4 √© frequentemente referenciado em nota√ß√£o decimal (74.125.43.99, por exemplo).  No entanto, os servi√ßos de rede veem esse mesmo endere√ßo como um n√∫mero de 32 bits, com cada byte representando um dos quatro n√∫meros na forma decimal.  O exemplo acima seria 0x4A7D2B63 em hexadecimal ou 1249717091 em decimal. <br><br>  Os conjuntos de dados de localiza√ß√£o geogr√°fica de IP est√£o amplamente dispon√≠veis e geralmente assumem a forma de uma tabela simples com tr√™s colunas (in√≠cio, fim, localiza√ß√£o).  O come√ßo e o fim s√£o a representa√ß√£o decimal do IPv4.  No Redis, podemos adaptar conjuntos classificados para esse formato, porque n√£o h√° "buracos" nos intervalos de IP; portanto, podemos assumir com seguran√ßa que o final de um intervalo √© o in√≠cio de outro. <br><br>  Para um exemplo simples, adicione alguns intervalos aos conjuntos classificados: <br><br><pre> <code class="plaintext hljs">&gt; ZADD ip-loc 1249716479 us:1 &gt; ZADD ip-loc 1249716735 taiwan:1 &gt; ZADD ip-loc 1249717759 us:2 &gt; ZADD ip-loc 1249718015 finland:1</code> </pre> <br>  O primeiro argumento √© a chave do nosso conjunto, o segundo √© a representa√ß√£o decimal do final do intervalo de IPs e o √∫ltimo √© o pr√≥prio objeto.  Observe que o objeto definido possui um n√∫mero ap√≥s os dois pontos.  Isso √© apenas para facilitar um exemplo.  As tabelas IP reais t√™m identificadores exclusivos para cada intervalo (e mais informa√ß√µes adicionais do que apenas o nome do pa√≠s). <br><br>  Para consultar a tabela para um determinado endere√ßo IP, podemos usar o comando ZRANGEBYSCORE com alguns argumentos adicionais.  Pegue o endere√ßo IP e converta-o em decimal.  Isso pode ser feito usando sua linguagem de programa√ß√£o.  Primeiro, use o endere√ßo do exemplo original 74.125.43.99 (1249717091).  Se tomarmos esse n√∫mero como um ponto de refer√™ncia e n√£o especificarmos um m√°ximo, e depois limitarmos o resultado apenas ao primeiro objeto, encontraremos sua localiza√ß√£o: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYSCORE ip-loc 1249717091 +inf LIMIT 0 1 1) "us:2"</code> </pre> <br>  O primeiro argumento √© a chave do nosso conjunto classificado, o segundo √© a representa√ß√£o decimal do endere√ßo IP, o terceiro (+ inf) diz ao Redis para solicitar sem um limite superior, e os tr√™s √∫ltimos argumentos simplesmente indicam que queremos obter apenas o primeiro resultado. <br><br><h3>  Pesquisa de texto completo </h3><br>  Antes do advento dos m√≥dulos, a pesquisa de texto completo era implementada usando comandos nativos do Redis.  O m√≥dulo RedisSearch √© muito mais produtivo que esse padr√£o, no entanto, em alguns ambientes, ele n√£o est√° dispon√≠vel.  Al√©m disso, esse padr√£o √© muito interessante e pode ser generalizado para outras cargas de trabalho nas quais o RedisSearch n√£o ser√° o ideal. <br>  Suponha que tenhamos v√°rios documentos de texto que precisam ser pesquisados.  Esse pode n√£o ser o caso de uso √≥bvio para o Redis, pois fornece acesso chave, mas, por outro lado, o Redis pode ser usado como um mecanismo de pesquisa de texto completo completamente novo. <br><br>  Primeiro, vamos dar alguns exemplos de textos nos documentos: <br><br>  <i>"Redis √© muito r√°pido"</i> <br>  <i>‚ÄúChitas s√£o r√°pidas‚Äù</i> <br>  <i>"Chitas t√™m manchas"</i> <br><br>  N√≥s os dividimos em conjuntos de palavras, separados por um espa√ßo para simplificar: <br><br><pre> <code class="plaintext hljs">&gt; SADD ex1 redis is very fast &gt; SADD ex2 cheetahs are very fast &gt; SADD ex3 cheetahs have spots</code> </pre> <br>  Observe que colocamos cada linha em seu pr√≥prio conjunto.  Pode parecer que estamos apenas adicionando a linha inteira - SADD √© vari√°vel e aceita v√°rios elementos ao mesmo tempo como argumentos.  Tamb√©m convertemos todas as palavras para min√∫sculas. <br>  Ent√£o, precisamos inverter esse √≠ndice e mostrar qual palavra est√° contida em qual documento.  Para fazer isso, criaremos um conjunto para cada palavra e colocaremos o nome do documento como um objeto: <br><br><pre> <code class="plaintext hljs">&gt; SADD redis ex1 &gt; SADD is ex1 &gt; SADD very ex1 ex2 &gt; SADD fast ex1 ex2 &gt; SADD cheetahs ex2 ex3 &gt; SADD have ex3 &gt; SADD spots ex3</code> </pre> <br>  Para maior clareza, dividimos isso em diferentes comandos, mas todos os comandos geralmente s√£o executados atomicamente no bloco MULTI / EXEC. <br><br>  Para consultar nosso pequeno √≠ndice de texto completo, usamos o comando SINTER (interse√ß√£o de conjuntos).  Encontre documentos com "muito" e "r√°pido": <br><br><pre> <code class="plaintext hljs">&gt; SINTER very fast 1) "ex2" 2) "ex1"</code> </pre> <br>  No caso em que n√£o h√° documentos correspondentes √† solicita√ß√£o, obtemos um resultado vazio: <br><br><pre> <code class="plaintext hljs">&gt; SINTER cheetahs redis (empty list or set)</code> </pre> <br>  Para maior consist√™ncia, √© melhor usar SUNION em vez de SINTER: <br><br><pre> <code class="plaintext hljs">&gt; SUNION cheetahs redis 1) "ex2" 2) "ex1" 3) "ex3"</code> </pre> <br>  Remover um objeto do √≠ndice √© um pouco mais complicado.  Primeiro, obtenha palavras indexadas do documento e exclua o identificador do documento de cada palavra: <br><br><pre> <code class="plaintext hljs">&gt; SMEMBERS ex3 1) "spots" 2) "have" 3) "cheetahs" &gt; SREM have ex3 &gt; SREM cheetahs ex3 &gt; SREM spots ex3</code> </pre> <br>  O Redis n√£o possui um operador separado para executar todas essas etapas com um √∫nico comando; portanto, primeiro √© necess√°rio consultar o comando SMEMBERS e excluir cada objeto seq√ºencialmente usando o SREM. <br><br>  Obviamente, esta √© uma pesquisa de texto completo muito simplificada.  Voc√™ pode fazer mais avan√ßado usando conjuntos classificados em vez dos habituais.  Nesse caso, se uma palavra aparecer mais de uma vez em um documento, voc√™ poder√° classific√°-la mais alta que o documento em que ocorre uma vez.  Os padr√µes descritos acima s√£o mais ou menos os mesmos, com exce√ß√£o dos tipos de conjuntos usados. <br><br><h3>  √çndices Particionados </h3><br>  Uma √∫nica inst√¢ncia (ou shard) do Redis √© muito vi√°vel, mas h√° circunst√¢ncias em que voc√™ pode precisar de um √≠ndice distribu√≠do por v√°rias inst√¢ncias.  Por exemplo, para aumentar a taxa de transfer√™ncia paralelizando √≠ndices maiores que o espa√ßo livre de uma inst√¢ncia.  Digamos que voc√™ queira executar uma opera√ß√£o em v√°rias teclas.  Uma maneira eficaz de separar (parti√ß√£o) essas chaves √© garantir a distribui√ß√£o uniforme das chaves em cada parti√ß√£o, executar quaisquer opera√ß√µes em cada parti√ß√£o em paralelo e depois combinar os resultados no final. <br><br>  Para obter uma distribui√ß√£o uniforme de chaves, usaremos um algoritmo de hash n√£o criptogr√°fico.  Qualquer fun√ß√£o de hash r√°pido serve, mas usamos o famoso CRC-32 como exemplo.  Na maioria dos casos, esses algoritmos retornam o resultado em hexadecimal (para "meu documento legal", o CRC-32 retornar√° F9FDB2C9).  A representa√ß√£o hexadecimal √© mais simples para a m√°quina, mas √© apenas outra representa√ß√£o de n√∫meros decimais, o que significa que voc√™ pode executar c√°lculos com esses valores. <br>  Em seguida, voc√™ precisa determinar o n√∫mero de parti√ß√µes - isso deve ser pelo menos x2 do n√∫mero de c√≥pias.  Isso contribui ainda mais para o dimensionamento. <br><br>  Digamos que temos 3 c√≥pias e 6 parti√ß√µes.  A parti√ß√£o para a qual o documento √© enviado pode ser calculada pela seguinte opera√ß√£o: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><msub><mtext>&amp;#xA0;</mtext><mi>f</mi></msub><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>f</mi><mi>i</mi><mi>c</mi><mi>a</mi><mi>d</mi><mi>o</mi><mi>r</mi><msub><mtext>&amp;#xA0;</mtext><mi>d</mi></msub><mi>o</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy=&quot;false&quot;>)</mo><mtext>&amp;#xA0;</mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><msub><mtext>&amp;#xA0;</mtext><mi>p</mi></msub><mi>a</mi><mi>r</mi><mi>t</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="64.438ex" height="2.78ex" viewBox="0 -832 27744 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-61" x="576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-73" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-68" x="1575" y="0"></use><g transform="translate(2152,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-66" x="353" y="-219"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-75" x="2891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6E" x="3463" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-63" x="4064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-74" x="4497" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-69" x="4859" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6F" x="5204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6E" x="5690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMAIN-28" x="6290" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-69" x="6680" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-64" x="7025" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-65" x="7549" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6E" x="8015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-74" x="8616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-69" x="8977" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-66" x="9323" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-69" x="9873" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-63" x="10219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-61" x="10652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-64" x="11182" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6F" x="11705" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-72" x="12191" y="0"></use><g transform="translate(12642,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-64" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6F" x="13362" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-63" x="13848" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-75" x="14281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6D" x="14854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-65" x="15732" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6E" x="16199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-74" x="16799" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMAIN-29" x="17161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6D" x="17800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6F" x="18679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-64" x="19164" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6E" x="19688" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-75" x="20288" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6D" x="20861" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-62" x="21739" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-65" x="22169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-72" x="22635" y="0"></use><g transform="translate(23087,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-70" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-61" x="23793" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-72" x="24322" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-74" x="24774" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-69" x="25135" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-74" x="25481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-69" x="25842" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6F" x="26188" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-6E" x="26673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700301&amp;usg=ALkJrhjAd6Z6CjI5VGg5zJCWy3exPsIhpg#MJMATHI-73" x="27274" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><msub><mtext>&nbsp;</mtext><mi>f</mi></msub><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>i</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>f</mi><mi>i</mi><mi>c</mi><mi>a</mi><mi>d</mi><mi>o</mi><mi>r</mi><msub><mtext>&nbsp;</mtext><mi>d</mi></msub><mi>o</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo><mtext>&nbsp;</mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><msub><mtext>&nbsp;</mtext><mi>p</mi></msub><mi>a</mi><mi>r</mi><mi>t</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> hash \ _function (identificador \ _document) \ mod number \ _partitions </script></p><br><br><pre> <code class="plaintext hljs">CRC32(‚Äúmy-cool-document‚Äù) = F9FDB2C9 (16)  4194153161 (10) 4194153161 mod 6 = 5</code> </pre> <br>  No Redis Enterprise, voc√™ pode controlar a qual parti√ß√£o a chave pertence, usando express√µes regulares predefinidas ou quebrando parte da chave com chaves.  Portanto, para o nosso exemplo, podemos definir a chave do documento da seguinte maneira: <br><br>  <i>idx: meu-documento-legal {5}</i> <br><br>  Depois, temos outro documento que emite uma parti√ß√£o com o n√∫mero 3; portanto, a chave ficar√° assim: <br><br>  <i>idx: meu-outro-documento {3}</i> <br><br>  Se voc√™ tiver chaves auxiliares adicionais com as quais precisar√° trabalhar e associadas a este documento, precisar√° estar na mesma parti√ß√£o para poder executar opera√ß√µes com as duas chaves ao mesmo tempo, sem encontrar muitos erros.  Para fazer isso, voc√™ precisa adicionar o mesmo n√∫mero de parti√ß√£o √† chave do documento. <br><br>  Observando seus dados remotamente, voc√™ ver√° que seu √≠ndice est√° distribu√≠do de maneira bastante uniforme entre as parti√ß√µes.  Voc√™ pode paralelizar a tarefa que precisa ser executada para cada parti√ß√£o.  Quando voc√™ tem uma tarefa que precisa ser executada por todo o √≠ndice, seu aplicativo precisar√° executar a mesma l√≥gica para cada parti√ß√£o, retornar o resultado e combinar conforme necess√°rio no aplicativo. <br><br>  Sobre isso, o primeiro artigo chega ao fim.  A seguir, ser√° apresentada uma tradu√ß√£o dos subt√≠tulos "Padr√µes de intera√ß√£o" e "Padr√µes de armazenamento de dados". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt485672/">https://habr.com/ru/post/pt485672/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt485650/index.html">T√©cnicas de redu√ß√£o de imagem do Docker</a></li>
<li><a href="../pt485652/index.html">Estat√≠sticas de coment√°rios em linha do Confluence</a></li>
<li><a href="../pt485654/index.html">Uma ideia tirada da f√≠sica ajuda a IA a trabalhar em dimens√µes mais altas.</a></li>
<li><a href="../pt485660/index.html">A pr√≥pria empresa de prote√ß√£o contra DDoS lan√ßou ataques DDoS, admitiu seu fundador</a></li>
<li><a href="../pt485664/index.html">Criando par√¢metros din√¢micos em um trabalho Jenkins ou como tornar sua tarefa f√°cil de usar</a></li>
<li><a href="../pt485682/index.html">A administra√ß√£o do tempo n√£o ajudar√°: a procrastina√ß√£o √© o problema de regular emo√ß√µes, n√£o o tempo</a></li>
<li><a href="../pt485688/index.html">Myapp estende f√©rias</a></li>
<li><a href="../pt485692/index.html">Conselho do especialista em TI para o cliente ou como automatizar a bagun√ßa</a></li>
<li><a href="../pt485694/index.html">Embox no processador Elbrus. Ou nunca esque√ßa o que voc√™ obteve em intelig√™ncia</a></li>
<li><a href="../pt485702/index.html">FunCorp iOS meetup # 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>