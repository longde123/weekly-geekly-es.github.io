<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔴 👦🏽 👩🏾‍🔬 Utiliser Babel et Webpack pour configurer un projet React à partir de zéro 🐗 👨🏾‍🤝‍👨🏻 🕋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De nombreux outils sont disponibles pour préparer l'environnement au développement de React. Par exemple, notre didacticiel React utilise l'outil crea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utiliser Babel et Webpack pour configurer un projet React à partir de zéro</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/436886/">  De nombreux outils sont disponibles pour préparer l'environnement au développement de React.  Par exemple, notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">didacticiel React</a> utilise l'outil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">create-react-app</a> pour créer un projet de modèle contenant tout ce dont vous avez besoin pour développer des applications React.  L'auteur de l'article, dont nous publions la traduction aujourd'hui, souhaite expliquer comment configurer indépendamment l'environnement pour développer des projets React à l'aide de Babel et Webpack.  Ces outils sont également utilisés dans les projets créés à l'aide des outils create-react-app, et nous pensons que toute personne qui étudie le développement de React sera intéressée à les connaître et à la méthodologie pour créer des projets React à un niveau plus profond.  À savoir, nous parlerons de la configuration de Webpack pour que cet outil utilise Babel pour compiler du code JSX en code JavaScript et de la configuration du serveur utilisé pour développer des projets React. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/nu/zw/y9/nuzwy97oaqp-qan8ooxn_ryt2b0.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Webpack</font> </h2><br>  Webpack est utilisé pour compiler des modules JavaScript.  Cet outil est souvent appelé «bundler» (du bundler) ou «module builder».  Après l'avoir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">installé</a> , vous pouvez l'utiliser avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'interface de ligne de commande</a> ou son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">API</a> .  Si vous n'êtes pas familier avec Webpack, il est recommandé de lire les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">principes de base de</a> son fonctionnement et de voir sa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">comparaison</a> avec d'autres constructeurs de modules.  Voici à quoi ressemble à un niveau élevé Webpack. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc0/e21/470/dc0e21470d18e7abc53a1c7a087b2807.png"></div><br>  <i><font color="#999999">Travail de Webpack</font></i> <br><br>  Webpack prend tout ce dont le projet dépend et le convertit en ressources statiques qui peuvent être transférées au client.  L'empaquetage des applications est très important, car la plupart des navigateurs limitent la possibilité de télécharger des ressources simultanément.  De plus, il vous permet d'économiser du trafic en n'envoyant au client que ce dont il a besoin.  En particulier, Webpack utilise un cache interne, grâce auquel les modules ne sont téléchargés qu'une seule fois sur le client, ce qui conduit finalement à un chargement plus rapide des sites. <br><br><h2>  <font color="#3AC1EF">Babel</font> </h2><br>  Babel est un transpilateur, qui est principalement utilisé pour convertir les constructions adoptées dans les versions récentes de la norme ECMAScript en un format compréhensible à la fois pour les navigateurs modernes et non pour les derniers navigateurs et autres environnements dans lesquels JavaScript peut s'exécuter.  Babel, en plus, peut convertir en code JavaScript et JSX en utilisant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@ babel / preset-react</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/385/f39/809/385f398094efe878d5b031f9177e1084.jpg"></div><br>  <i><font color="#999999">Babel</font></i> <br><br>  Grâce à Babel, nous pouvons, lors du développement d'applications React, utiliser JSX.  Par exemple, voici le code qui utilise JSX: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">App</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">b</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Hello world!</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">b</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ) } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App;</code> </pre> <br>  Un tel code semble soigné, il est clair, il est facile à lire et à modifier.  En le regardant, vous pouvez immédiatement comprendre qu'il décrit un composant qui renvoie un élément <code>&lt;div&gt;</code> qui contient le texte <code>Hello world!</code>  en gras.  Et voici un exemple de code faisant la même chose dans laquelle JSX n'est pas utilisé: <br><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">"use strict"</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(exports, <span class="hljs-string"><span class="hljs-string">"__esModule"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _react = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"react"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _react2 = _interopRequireDefault(_react); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_interopRequireDefault</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">obj</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj &amp;&amp; obj.__esModule ? obj : { <span class="hljs-attr"><span class="hljs-attr">default</span></span>: obj }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">App</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _react2.default.createElement(   <span class="hljs-string"><span class="hljs-string">"div"</span></span>,   <span class="hljs-literal"><span class="hljs-literal">null</span></span>,   _react2.default.createElement(     <span class="hljs-string"><span class="hljs-string">"b"</span></span>,     <span class="hljs-literal"><span class="hljs-literal">null</span></span>,     <span class="hljs-string"><span class="hljs-string">"Hello world!"</span></span>   ) ); } exports.default = App;</code> </pre> <br>  Les avantages du premier exemple par rapport au second sont évidents. <br><br><h2>  <font color="#3AC1EF">Prérequis</font> </h2><br>  Afin de mettre en place un projet d'application React, nous aurons besoin des modules npm suivants. <br><br><ul><li>  react - Bibliothèque React. </li><li>  react-dom est une bibliothèque qui nous aidera à utiliser les capacités de React dans le navigateur. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">babel</a> / core - transpilation JSX en JS. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">babel</a> / preset-env - crée un code adapté aux navigateurs plus anciens. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">babel</a> / preset-react - configure le transpilateur pour qu'il fonctionne avec le code React. </li><li>  babel-loader - configure Webpack pour fonctionner avec Babel. </li><li>  css-loader - configuration de Webpack pour travailler avec CSS. </li><li>  webpack - assemblage de modules. </li><li>  webpack-cli - travaillez avec Webpack depuis la ligne de commande. </li><li>  style-loader - chargement de tout le code CSS utilisé dans l'en-tête du fichier HTML. </li><li>  webpack-dev-server - configuration d'un serveur de développement. </li></ul><br>  Créez maintenant, dans le dossier <code>react-scratch</code> , un nouveau projet en utilisant npm ( <code>npm init</code> ) et installez certains des packages ci-dessus avec la commande suivante: <br><br><pre> <code class="javascript hljs">npm install --save-dev @babel/core @babel/preset-env @babel/preset-react babel-loader css-loader webpack webpack-cli style-loader webpack-dev-server</code> </pre> <br>  Le point d'entrée du programme sera le fichier <code>index.js</code> , qui est contenu dans le dossier <code>src</code> situé dans le répertoire racine du projet.  La structure de ce projet est présentée ci-dessous.  Certains fichiers et dossiers sont créés automatiquement, vous devrez en créer vous-même. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad9/a00/04e/ad9a0004e52411f8c211dd7df3287997.png"></div><br>  <i><font color="#999999">Structure du projet</font></i> <br><br>  Le projet terminé, que nous traiterons ici, se trouve dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> référentiel. <br><br>  Le dossier des <code>component</code> contiendra les composants du projet (dans notre cas, il n'y a qu'un seul composant ici).  Dans le dossier <code>dist</code> , dans le fichier <code>main.js</code> , le code compilé sera localisé, et <code>index.html</code> est, comme déjà mentionné, le fichier HTML principal de notre application. <br><br><h2>  <font color="#3AC1EF">Configuration du Webpack</font> </h2><br>  Webpack peut être configuré de plusieurs façons.  En particulier, les paramètres de cet outil peuvent prendre la forme d'arguments de ligne de commande ou être présents dans le projet sous forme de fichier de configuration avec le nom <code>webpack.config.js</code> .  Dans ce document, vous devez décrire et exporter l'objet contenant les paramètres.  Nous allons commencer à configurer ce fichier avec une description de l'objet qui ressemble à ceci (nous le considérerons en partie, et ci-dessous nous donnerons son code complet): <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: <span class="hljs-string"><span class="hljs-string">"./src/index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">mode</span></span>: <span class="hljs-string"><span class="hljs-string">"development"</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">"./main.js"</span></span> }, }</code> </pre> <br>  La propriété d' <code>entry</code> définit le fichier principal avec le code source du projet.  La valeur de la propriété <code>mode</code> indique le type d'environnement à compiler (dans notre cas, c'est l'environnement de <code>development</code> ) et où placer le fichier compilé. <br><br><h2>  <font color="#3AC1EF">Travail de projet</font> </h2><br>  Placez le code suivant dans le fichier <code>index.html</code> de notre projet, situé dans le dossier <code>dist</code> : <br><br><pre> <code class="javascript hljs">&lt;!DOCTYPE html&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dir</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"ltr"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">React From Scratch</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"root"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"main.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"><span class="xml"><span class="undefined"> </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Faites attention à la balise de <code>script</code> présente dans ce fichier.  Il pointe vers le fichier <code>main.js</code> , qui sera obtenu lors de la compilation du projet.  Nous utiliserons l'élément <code>&lt;div&gt;</code> avec l'identifiant <code>root</code> pour afficher l'application React. <br><br>  Installez maintenant les packages react et react-dom: <br><br><pre> <code class="javascript hljs">npm install react react-dom</code> </pre> <br>  Ajoutez le code suivant à <code>index.js</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./component/app.component"</span></span>; ReactDOM.render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">, document.querySelector("#root"));</span></span></code> </pre> <br>  Il s'agit du code standard pour ces fichiers d'application React.  Ici, nous connectons les bibliothèques, connectons le fichier de composant et affichons l'application dans la <code>&lt;div&gt;</code> avec l'identifiant <code>root</code> . <br><br>  Voici le code du fichier <code>app.component.js</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> s <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./app.component.css"</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{s.intro}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Hello World</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> MyComponent;</code> </pre> <br>  Voici le code du fichier <code>app.component.css</code> : <br><br><pre> <code class="javascript hljs">.intro { background-color: yellow; }</code> </pre> <br><h2>  <font color="#3AC1EF">Configurer Babel</font> </h2><br>  Babel est un transporteur à fort potentiel.  Il peut notamment convertir MOINS en CSS, JSX en JS, TypeScript en JS.  Nous n'utiliserons que deux configurations avec elle - react et env (elles sont aussi appelées "presets").  Babel peut être configuré de différentes manières, en particulier, nous parlons d'outils de ligne de commande, d'un fichier de paramètres spéciaux et du fichier <code>package.json</code> standard.  Nous sommes satisfaits de la dernière option.  Ajoutez la section suivante à <code>package.json</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"babel"</span></span>: {   <span class="hljs-string"><span class="hljs-string">"presets"</span></span>: [     <span class="hljs-string"><span class="hljs-string">"@babel/env"</span></span>,     <span class="hljs-string"><span class="hljs-string">"@babel/react"</span></span>   ] }</code> </pre> <br>  Grâce à ces paramètres, Babel saura quels préréglages il doit utiliser.  Configurez maintenant Webpack pour utiliser Babel. <br><br><h2>  <font color="#3AC1EF">Configurer Webpack pour fonctionner avec Babel</font> </h2><br>  Ici, nous utiliserons la bibliothèque babel-loader, qui vous permet d'utiliser Babel avec Webpack.  En fait, le fait est que Babel pourra intercepter et traiter des fichiers avant qu'ils ne soient traités par Webpack. <br><br><h3>  <font color="#3AC1EF">Fichiers JS</font> </h3><br>  Voici les règles concernant l'utilisation des fichiers JS (ce code ira dans le fichier <code>webpack.config.js</code> ), elles représentent l'une des propriétés de l'objet paramètres exporté par ce fichier: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [     {       <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.m?js$/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/(node_modules|bower_components)/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">use</span></span>: {         <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">"babel-loader"</span></span>       }     },   ] }</code> </pre> <br>  Un tableau de règles est stocké dans la propriété rules de l'objet représenté ici, selon lequel le fichier spécifié par l'expression régulière décrite dans la propriété <code>test</code> doit être traité.  Dans ce cas, la règle sera appliquée à tous les fichiers avec les extensions <code>.m</code> et <code>.js</code> , alors que nous ne voulons pas <code>node_modules</code> fichiers du dossier <code>node_modules</code> et <code>bower_components</code> .  De plus, ici, nous indiquons que nous voulons utiliser babel-loader.  Après cela, nos fichiers JS seront d'abord traités par Babel, puis emballés à l'aide de Webpack. <br><br><h3>  <font color="#3AC1EF">Fichiers filesCSS</font> </h3><br>  Ajoutez les paramètres de traitement des fichiers CSS au tableau de <code>rules</code> de l'objet <code>module</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [     {       <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.m?js$/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/(node_modules|bower_components)/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">use</span></span>: {         <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">"babel-loader"</span></span>       }     },     {       <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [         <span class="hljs-string"><span class="hljs-string">"style-loader"</span></span>,         {           <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">"css-loader"</span></span>,           <span class="hljs-attr"><span class="hljs-attr">options</span></span>: {             <span class="hljs-attr"><span class="hljs-attr">modules</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>           }         }       ]     },  ] }</code> </pre> <br>  Nous allons résoudre la tâche de traitement des fichiers CSS à l'aide de style-loader et css-loader.  La propriété <code>use</code> peut accepter un tableau d'objets ou de chaînes.  Les chargeurs sont appelés, à partir du dernier, donc nos fichiers seront traités en premier avec css-loader.  Nous avons configuré cet outil en écrivant <code>true</code> dans la propriété <code>modules</code> de l'objet <code>options</code> .  Grâce à cela, les styles CSS ne seront appliqués qu'aux composants dans lesquels ils sont importés.  Css-loader autorisera les commandes d'importation dans les fichiers CSS, après quoi le style-loader ajoutera ce qu'il se présente sous la forme d'une balise de <code>style</code> dans la section <code>&lt;head&gt;</code> de la page: <br><br><pre> <code class="javascript hljs">&lt;style&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">--</span></span></span></span><span class="xml"><span class="hljs-tag">  </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">css</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">--</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><h3>  <font color="#3AC1EF">▍Ressources statiques</font> </h3><br>  Nous continuerons à travailler sur l'objet de paramètres du <code>module</code> , décrivant les règles de traitement des ressources statiques qu'il contient: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [     {       <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.m?js$/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/(node_modules|bower_components)/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">use</span></span>: {         <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">"babel-loader"</span></span>       }     },     {       <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [         <span class="hljs-string"><span class="hljs-string">"style-loader"</span></span>,         {           <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">"css-loader"</span></span>,           <span class="hljs-attr"><span class="hljs-attr">options</span></span>: {             <span class="hljs-attr"><span class="hljs-attr">modules</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>           }         }       ]     },     {       <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.(png|svg|jpg|gif)$/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [<span class="hljs-string"><span class="hljs-string">"file-loader"</span></span>]     }   ] }</code> </pre> <br>  Si le système rencontre un fichier avec l'extension PNG, SVG, JPG ou GIF, le chargeur de fichiers sera utilisé pour traiter un tel fichier.  Le traitement de ces fichiers est important pour la bonne préparation et l'optimisation du projet. <br><br><h2>  <font color="#3AC1EF">Configuration d'un serveur de développement</font> </h2><br>  Maintenant, dans le fichier <code>webpack.config.js</code> , configurez le serveur de développement: <br><br><pre> <code class="javascript hljs">devServer: {   <span class="hljs-attr"><span class="hljs-attr">contentBase</span></span>: path.join(__dirname, <span class="hljs-string"><span class="hljs-string">"dist"</span></span>),   <span class="hljs-attr"><span class="hljs-attr">compress</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,   <span class="hljs-attr"><span class="hljs-attr">port</span></span>: <span class="hljs-number"><span class="hljs-number">9000</span></span>,   <span class="hljs-attr"><span class="hljs-attr">watchContentBase</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,   <span class="hljs-attr"><span class="hljs-attr">progress</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> },</code> </pre> <br>  La propriété <code>contentBase</code> <code>devServer</code> paramètres <code>contentBase</code> pointe vers le dossier dans lequel se trouvent nos ressources et le fichier <code>index.html</code> .  La propriété <code>port</code> vous permet de spécifier le port sur lequel le serveur écoutera.  La propriété <code>watchContentBase</code> permet de surveiller les modifications des fichiers dans le dossier spécifié par la propriété <code>contentBase</code> . <br><br>  Voici le code complet du fichier <code>webpack.config.js</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"path"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: <span class="hljs-string"><span class="hljs-string">"./src/index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">mode</span></span>: <span class="hljs-string"><span class="hljs-string">"development"</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">"./main.js"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">devServer</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">contentBase</span></span>: path.join(__dirname, <span class="hljs-string"><span class="hljs-string">"dist"</span></span>),   <span class="hljs-attr"><span class="hljs-attr">compress</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,   <span class="hljs-attr"><span class="hljs-attr">port</span></span>: <span class="hljs-number"><span class="hljs-number">9000</span></span>,   <span class="hljs-attr"><span class="hljs-attr">watchContentBase</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,   <span class="hljs-attr"><span class="hljs-attr">progress</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [     {       <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.m?js$/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/(node_modules|bower_components)/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">use</span></span>: {         <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">"babel-loader"</span></span>       }     },     {       <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [         <span class="hljs-string"><span class="hljs-string">"style-loader"</span></span>,         {           <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">"css-loader"</span></span>,           <span class="hljs-attr"><span class="hljs-attr">options</span></span>: {             <span class="hljs-attr"><span class="hljs-attr">modules</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>           }         }       ]     },     {       <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.(png|svg|jpg|gif)$/</span></span>,       <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [<span class="hljs-string"><span class="hljs-string">"file-loader"</span></span>]     }   ] } };</code> </pre> <br>  Nous allons maintenant ajouter au <code>package.json</code> , dans la section <code>scripts</code> , la commande pour démarrer le serveur de développement et la commande pour commencer à construire le projet: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: {   <span class="hljs-string"><span class="hljs-string">"dev"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack-dev-server"</span></span>,   <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack"</span></span> },</code> </pre> <br>  Maintenant, tout est prêt pour démarrer le serveur de développement avec la commande suivante: <br><br><pre> <code class="javascript hljs">npm run dev</code> </pre> <br>  Si vous allez maintenant à l'adresse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http: // localhost: 9000</a> , vous pouvez voir la page de notre projet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/08e/085/c32/08e085c32bbba9c6874ec2359f8e0d93.png"></div><br>  <i><font color="#999999">Page de projet dans le navigateur</font></i> <br><br>  Afin de construire un projet, utilisez la commande suivante: <br><br><pre> <code class="javascript hljs">npm run start</code> </pre> <br>  Après cela, vous pouvez ouvrir le fichier <code>index.html</code> dans un navigateur et voir la même chose que vous pouvez voir en démarrant le serveur de développement et en allant à l'adresse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http: // localhost: 9000</a> . <br><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>  Cet article fournit une vue d'ensemble de la configuration de Webpack et Babel pour une utilisation dans les projets React.  En fait, des configurations beaucoup plus complexes peuvent être créées sur la base que nous avons démontée aujourd'hui.  Par exemple, au lieu de CSS, vous pouvez utiliser MOINS, au lieu de JS normal, écrire en TypeScript.  Si nécessaire, vous pouvez, par exemple, configurer la minification des fichiers et bien plus encore.  Bien sûr, si aujourd'hui votre première connaissance du processus d'auto-réglage des projets React a eu lieu, vous pouvez penser que tout cela est très difficile et beaucoup plus facile à utiliser le modèle prêt à l'emploi.  Cependant, après avoir compris un peu, vous vous rendrez compte qu'une légère augmentation de la complexité des paramètres vous donne plus de liberté, vous permettant de personnaliser vos projets exactement comme vous en avez besoin, sans dépendre complètement de certaines solutions «standard» et réduire votre dépendance à eux. <br><br>  <b>Chers lecteurs!</b>  Quelle approche utilisez-vous le plus souvent lors de la préparation de votre environnement de travail pour les projets React? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436886/">https://habr.com/ru/post/fr436886/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436874/index.html">Danses du Nouvel An autour de l'adaptateur FC ou un conte sur la distance entre les causes du problème et les symptômes</a></li>
<li><a href="../fr436876/index.html">[SAP] SAPUI5 for dummies part 1: Un exercice complet étape par étape</a></li>
<li><a href="../fr436878/index.html">BERT est un modèle de langage de pointe pour 104 langues. Tutoriel pour lancer BERT localement et sur Google Colab</a></li>
<li><a href="../fr436880/index.html">Notions de base sur les modèles C ++: modèles de fonctions</a></li>
<li><a href="../fr436884/index.html">Nous maîtrisons async / wait sur un exemple réel</a></li>
<li><a href="../fr436888/index.html">Histoire sur la conception d'une API</a></li>
<li><a href="../fr436890/index.html">Tutoriel React Partie 10: Atelier sur l'utilisation des propriétés et du style des composants</a></li>
<li><a href="../fr436892/index.html">Tutoriel React, partie 11: Formation de balisage dynamique et méthode du tableau de cartes</a></li>
<li><a href="../fr436894/index.html">Apocalypse informatique rampante. De nouveaux services cloud laisseront certains ingénieurs sans emploi</a></li>
<li><a href="../fr436896/index.html">docker-pretty-ps - enfin un ps docker lisible</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>