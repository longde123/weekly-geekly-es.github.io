<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤œğŸ¼ ğŸ‘©ğŸ¼â€âš–ï¸ ğŸ‘©ğŸ¼â€ğŸš’ Anatomi dan kloning adaptor USB untuk kartu SD ğŸ…ğŸ¼ ğŸ¥“ ğŸ¤³</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="... atau bagaimana memasok proyek DIY Anda dengan MIPS atau ARM ringan dengan kartu micro-SD cepat. 
 Hari baik untuk semua komunitas yang dihormati. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Anatomi dan kloning adaptor USB untuk kartu SD</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/403199/"><div style="text-align:center;"><img src="https://habrastorage.org/files/f54/e21/451/f54e21451bfa4ed38bb087e1641cdf12.jpg"></div><br>  ... atau bagaimana memasok proyek DIY Anda dengan MIPS atau ARM ringan dengan kartu micro-SD cepat. <br>  Hari baik untuk semua komunitas yang dihormati.  Saya ingin melanjutkan kisah saya tentang perangkat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kotak</a> , yaitu, tentang bagaimana dia berhasil menghubungkan kartu micro-SD ke port USB 2. <br><a name="habracut"></a><br>  Akar dari seluruh masalah adalah bahwa USB 2, dan bukan hanya satu, memiliki modul prosesornya, tetapi sayangnya, tidak ada QSPI (QuadSPI) atau antarmuka kartu.  Bagaimana fakta menyedihkan ini terkait dengan kartu SD?  Sangat sederhana, setiap kartu SD dalam basis fisik koneksinya memiliki antarmuka SPI (SerialPeripheral).  SPI klasik menggunakan satu garis fisik untuk mengirim dan menerima data serial.  Sederhana dan ekonomis, baik dari segi uang maupun miliamp.  Namun, kerugiannya, seperti yang Anda tahu, adalah kelanjutan dari keuntungan, dan untuk SPI, mereka terutama menjadi nilai tukar data yang relatif rendah.  Untuk mengatasi masalah ini, mode pertukaran data empat-bit dengan kartu SD diciptakan, yang merupakan kerabat dekat dari protokol QSPI.  Saat menggunakan mode ini, pengendali host dan kartu pertama-tama menyetujui parameter pertukaran dalam mode bit-tunggal, dan kemudian beralih ke mode empat-bit ketika mereka menggunakan tidak satu baris untuk menerima dan mentransmisikan, tetapi empat untuk semuanya (ditambah satu lagi untuk menunjukkan perintah). <br><br>  Apa yang harus dilakukan jika peralatan tidak secara langsung mendukung protokol empat-bit, tetapi masih perlu pertukaran cepat?  Jawaban yang jelas adalah untuk menyediakan jembatan dengan "antarmuka cepat" proyek - "kartu SD empat-bit". <br><br>  Untuk mengatasi masalah ini, sepasang adaptor USB-SD dibeli dan mengalami persiapan (pembedahan tidak digunakan - kami bukan monster).  Sebelum melakukan pemanasan pada setrika solder dan pengering rambut, pemeriksaan yang sangat penting dilakukan untuk melihat apakah modul prosesor Debian melihat peluit adaptor ditawarkan kepadanya.  Tes itu sukses besar, selamat datang di ruang operasi.  Peluit yang dibeli terlihat seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/899/740/5e7/8997405e7cdc4981aac38d2aad8b1c35.jpg"></div><br>  Dan seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a70/962/4bf/a709624bf49a44a1ac3ab97c63049c1c.jpg"></div><br>  Setelah kasing dibongkar, menjadi mungkin untuk melihat papan sirkuit tercetak (dari kedua sisinya). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/140/a2f/164/140a2f16457b41a6be2902e9dca08a5d.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2d9/48f/33d/2d948f33d59f4afc8fff7b97ebcb5a7e.png"></div><br>  Rangkaiannya sederhana, dasarnya adalah IC GL823F - mikrokontroler dengan sistem perintah 8051 dan dengan memori topeng, dilengkapi dengan unit antarmuka perangkat keras USB 2, tampaknya tidak berkualitas sangat tinggi (mengapa saya mengatakan ini - saya tidak melihat resistor bias yang tepat dari bagian analog dan osilator kristal) , yang berarti mengembalikan frekuensi dari sinyal yang diterima berdasarkan generator kalibrasi internal).  Akan bekerja, tetapi tidak HiFi, tidak.  Yang lainnya adalah body kit minimal: memblokir kapasitor, resistor pull-up dan pembatasan arus, LED dan konektor, itu saja rekayasa. <br><br>  Kami meniup komponen dengan pengering rambut dan memeriksa papan sirkuit tercetak.  Dalam banyak hal, papan ini dua sisi dengan lubang pelapisan.  Setelah pemeriksaan singkat papan di mikroskop, sketsa diagram koneksi dan perbandingan dengan lembar data pada IC terkait GL, kami mengembalikan diagram sirkuit. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d96/74e/a6e/d9674ea6ed584e8aa5566554642f4f18.jpg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/454/79e/797/45479e797ffd47a5966944d5a3e4b88d.jpg"></div><br>  Dan di sini kita sekarang mulai melihat satu kerumitan kecil.  Apa tepatnya?  Kotak kami ditenagai oleh tegangan 3,3V, dan sirkuit pada GL823 membutuhkan 5 volt.  Yah, seperti yang dipersyaratkan - dia sudah terbiasa, karena USB sangat banyak memberikannya.  Micro SD sendiri ditenagai oleh 3.3V, sehingga stabilizer LDO bawaan ditambahkan ke GL823.  Oleh karena itu pertanyaannya - dan jika rangkaian ini ditenagai dari 3.3V, apakah bisa bekerja?  Jika LDO mengatur untuk tidak menjatuhkan tegangan terlalu banyak, itu bisa, tetapi tidak semua LDO sama-sama bermanfaat.  Datasheet memberikan sedikit petunjuk - output yang memberi makan kartu SD disebut PMOS.  Singkatan ini tidak bisa lain kecuali bersukacita - dapat diasumsikan bahwa skema PMOS HighSide digunakan, di mana penurunan tegangan melintasi elemen kontrol bisa sangat kecil.  Namun, semua ini adalah alasan, dan satu-satunya argumen yang menentukan adalah pengalaman, ia adalah putra dari kesalahan yang sulit. <br><br>  Jadi, pengalaman seperti apa yang akan kami berikan?  Mari kita coba menyalakan IC dengan dua voltase switch - dari 5 V USB atau dari 3,3 V, yang diperoleh oleh stabilizer terpisah.  Sekarang kita memiliki pengetahuan yang cukup untuk menggambar diagram skematik. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fb7/4bc/a0b/fb74bca0b27545c192d85f552f89d9f9.gif"></div><br>  Penomoran komponen pada sirkuit agak aneh karena alasan multi-order dengan beberapa sirkuit uji dipesan pada pabrikan papan sirkuit cetak, dan semuanya memiliki penomoran komponen yang dilaluinya.  Sambil menyiapkan artikel, saya membawa diagram sirkuit sesuai dengan foto itu, dan ternyata apa yang terjadi. <br><br>  Apa yang kita lihat dalam diagram?  Jelas, intinya adalah GL823F.  Konektor micro-SD jelas terhubung ke sana.  Satu-satunya hal yang harus dicatat - pin 9 pada konektor adalah kontak geser kartu di slot, ketika kartu berada di tempat, itu disingkat menjadi ground.  C7-C10 - memblokir kapasitor pada sirkuit daya.  Jika Anda ingin sedikit meningkatkan kekebalan noise, maka pin 2 dan 16 DD1 dapat dihubungkan melalui choke ferit.  R4 membatasi arus melalui HL1, R5 menarik garis GPIO ke satu karena tidak adanya kartu di slot.  DA2, C11 dan C12 membentuk regulator tegangan linier 3.3V. <br><br>  Karena pada saat sirkuit ditarik, di satu sisi, tidak jelas berapa banyak yang akan dikonsumsi, dan di sisi lain ada pengalaman yang tidak menyenangkan dalam menggunakan beberapa flash drive USB (tidak menunjuk dengan jari) yang mengonsumsi 400mA saat merekam, diputuskan untuk menambahkan R6.  Secara umum, ini adalah teknik standar - dengan konsumsi nyata LDO linier di sirkuit (kata kunci di sini adalah LowDropout), letakkan resistor resistansi rendah dengan daya yang meningkat pada input dan hilangkan bagian panas di atasnya, dan bukan pada stabilizer.  Pengalaman, bagaimanapun, telah menunjukkan bahwa tidak perlu untuk R6, dan Anda masih akan melihatnya di foto papan. <br><br>  XS4 hanya dirancang untuk melakukan percobaan - mengalihkan daya DD1 antara 5 dan 3,3 Volt.  XS2 adalah konektor USBB standar sehingga Anda dapat meletakkannya di depan Anda, dan tidak memanjat untuk membebaskan port USB di bawah meja ke PC. <br><br>  Inilah yang terjadi setelah pelacakan, pembuatan perangkat lunak dan instalasi: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f54/e21/451/f54e21451bfa4ed38bb087e1641cdf12.jpg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d3d/efa/490/d3defa4908c8471181c4c5a177f66a5a.jpg"></div><br>  Seperti yang Anda lihat, sisi bawah papan benar-benar mudah, dan sisi atas tidak jauh lebih rumit. <br><br>  Saya tidak akan menunda akhir plot, saya akan segera mengatakan bahwa pengalaman telah menunjukkan bahwa dimungkinkan untuk menyalakan GL823F dari sumber 3,3 V, beralih XS4 tidak mempengaruhi apa pun kecuali konsumsi daya (bukan saat ini). <br><br>  Untuk memastikan bahwa papan yang dibuat berfungsi dengan baik, kami mengukur kecepatan perekaman dan arus yang dikonsumsi pada saat yang sama untuk tiga kartu micro-SD yang berbeda.  Kontestan foto - di studio! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5d0/b44/93f/5d0b4493fa7b4383bf2209d97733a56f.jpg"></div><br>  Penilaian konsumsi saat ini (mengukur apa yang telah dilakukan, lidah saya tidak dapat dipanggil) dilakukan dengan menggunakan pengukur arus baterai bertegangan gabungan.  Terus terang, ternyata mengejutkan bahwa ia juga mentransmisikan data USB. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ccb/1ec/e7f/ccb1ece7f12d4f14b50c78a014df4dfc.jpg"></div><br>  Hanya konsumsi saat ini digunakan, harga pembagian ini, sehingga untuk berbicara, perangkat 0,01A, ditambah setidaknya kesalahan pengambilan sampel 1 unit bit paling signifikan masih 0,01A.  Oleh karena itu, tabel hanya menunjukkan rentang indikasi, di mana angka arus yang dikonsumsi melonjak.  Saya berharap, bagaimanapun, bahwa bagi mereka yang tertarik untuk menerapkan GL823 dalam keputusan mereka, masih mungkin untuk mengevaluasi bar konsumsi atas. <br><br>  Selain menguji papan yang dibuat, untuk meningkatkan objektivitas, beberapa pengukuran kontrol dilakukan menggunakan pembaca kartu SD lain.  Ini satu: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/bb6/65a/79d/bb665a79dcfa41269e29baf219bb7977.jpg"></div><br>  Sampel ini tidak siap, saya meminjamnya dari putri saya selama 5 menit, dan jika saya memusnahkannya, mereka akan segera memusnahkan saya.  Satu hal yang pasti - chip di dalamnya bukan milik keluarga GL823, yang anggotanya mampu bekerja lebih banyak dengan standar SD, multi-standar terlalu sulit bagi mereka. <br><br>  Kecepatan baca dan tulis diukur dengan cara paling sederhana: file yang sama dengan ukuran 1.058.268 kB ditulis dan dibaca dari kartu tes.  Eksperimen kontrol (pada pembaca lain) dilakukan hanya untuk mengecualikan kesalahan sistem dengan satu atau urutan desimal lainnya, data di atasnya tidak diproses, saya hanya menjadi yakin bahwa kira-kira waktu dan arus konsumsi mengalahkan yang diperoleh pada tahap sebelumnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3c9/44d/ea0/3c944dea089342df93633cb585f542fa.png"></div><br>  Jika Anda ingin menerapkan rangkaian yang dijelaskan dalam proyek Anda, maka ketika memperkirakan konsumsi, buat koreksi untuk fakta bahwa arus pasokan berasal dari tegangan USB 5 Volts, tetapi GL823 ditenagai oleh tegangan 3,3 V, dan selisihnya 5-3,3 = 1,7 (dan ini adalah 50 % dari 3.3) baru saja hilang pada DA2.  Ketika diberdayakan dari sumber 3.3 Volt yang terpusat (dan, saya harap, berdenyut), kami mendapatkan penghematan yang layak. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id403199/">https://habr.com/ru/post/id403199/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id403185/index.html">Bagaimana Uber memanipulasi orang</a></li>
<li><a href="../id403189/index.html">Cara memperlakukan orang gila. 1.1 - Farmakoterapi: dasar-dasar dan skizofrenia</a></li>
<li><a href="../id403191/index.html">Masuk dalam program ROS</a></li>
<li><a href="../id403193/index.html">Bagaimana kami melakukan pertunjukan audio dan showroom kami</a></li>
<li><a href="../id403197/index.html">Mengapa fisikawan begitu khawatir dengan paradoks hilangnya informasi dalam lubang hitam</a></li>
<li><a href="../id403201/index.html">Koloni. Bab 9: Serangan Tidak Terduga</a></li>
<li><a href="../id403203/index.html">VacuumTechExpo 2017</a></li>
<li><a href="../id403209/index.html">Cara membuka bank Anda di Eropa: pilih negara untuk tempat tinggal Polybius</a></li>
<li><a href="../id403213/index.html">Hobi + bisnis atau bagaimana menempatkan diri Anda pada posisi klien</a></li>
<li><a href="../id403215/index.html">Anda tidak dapat meminjam pada Uber lagi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>