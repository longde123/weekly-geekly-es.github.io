<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘†ğŸ¼ ğŸ“ˆ ğŸ•´ğŸ¼ Recherchez des incidents et des rÃ©clamations similaires. Mesures et optimisation ğŸ§™ğŸ½ ğŸ•´ğŸ½ ğŸ‘©â€ğŸš€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans un article prÃ©cÃ©dent, j'ai parlÃ© de notre moteur de recherche pour des applications similaires . AprÃ¨s son lancement, nous avons commencÃ© Ã  recev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Recherchez des incidents et des rÃ©clamations similaires. Mesures et optimisation</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472772/"><p>  Dans un article prÃ©cÃ©dent, j'ai parlÃ© de notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">moteur de recherche pour des applications similaires</a> .  AprÃ¨s son lancement, nous avons commencÃ© Ã  recevoir les premiers avis.  Les analystes ont aimÃ© et recommandÃ© certaines recommandations, d'autres non. </p><br><p>  Pour avancer et trouver de meilleurs modÃ¨les, il a d'abord fallu Ã©valuer les performances du modÃ¨le actuel.  Il Ã©tait Ã©galement nÃ©cessaire de sÃ©lectionner des critÃ¨res permettant de comparer les deux modÃ¨les. </p><br><p>  Sous la coupe, je vais parler de: </p><br><ul><li>  recueillir des commentaires sur les recommandations </li><li>  Ã©laboration de paramÃ¨tres pour Ã©valuer la qualitÃ© des recommandations </li><li>  construire un cycle d'optimisation de modÃ¨le </li><li>  reÃ§u des idÃ©es et un nouveau modÃ¨le </li></ul><a name="habracut"></a><br><h2 id="sbor-otzyvov">  Collecte de commentaires </h2><br><p>  Il serait idÃ©al de recueillir des commentaires explicites des analystes: quelle est la pertinence de la recommandation de chacun des incidents proposÃ©s.  Cela nous permettra de comprendre la situation actuelle et de continuer Ã  amÃ©liorer le systÃ¨me sur la base d'indicateurs quantitatifs. </p><br><p>  Il a Ã©tÃ© dÃ©cidÃ© de collecter les avis dans un format extrÃªmement simple: </p><br><ul><li>  nombre d'incidents que nous analysons </li><li>  numÃ©ro d'incident recommandÃ© </li><li>  examen des recommandations: bon / mauvais </li></ul><br><p>  Le "vote" (un petit projet qui a acceptÃ© les demandes GET avec des paramÃ¨tres et a mis les informations dans un fichier) a Ã©tÃ© placÃ© directement dans le bloc de recommandations afin que les analystes puissent laisser leurs commentaires immÃ©diatement en cliquant simplement sur l'un des liens: "bon" ou "mauvais". </p><br><p>  De plus, pour un examen rÃ©trospectif de la recommandation, une solution trÃ¨s simple a Ã©tÃ© faite: </p><br><ul><li>  pour une grande partie des donnÃ©es historiques, un modÃ¨le a Ã©tÃ© lancÃ©; </li><li>  Les recommandations recueillies ont Ã©tÃ© prÃ©sentÃ©es sous la forme de plusieurs fichiers HTML autonomes, dans lesquels le mÃªme Â«voteÂ» a Ã©tÃ© utilisÃ©; </li><li>  des dossiers prÃ©parÃ©s ont Ã©tÃ© remis aux analystes afin de visualiser les rÃ©sultats de 50 Ã  100 incidents. </li></ul><br><p>  Il a donc Ã©tÃ© possible de collecter des donnÃ©es sur environ 4000+ paires de recommandations d'incidents. </p><br><h2 id="pervichnyy-analiz-otzyvov">  Analyse de l'examen initial </h2><br><p>  Les mesures initiales Ã©taient Â«moyennesÂ» - la part des Â«bonnesÂ» recommandations, selon les collÃ¨gues, n'Ã©tait que d'environ 25%. </p><br><p>  Les principaux problÃ¨mes du premier modÃ¨le: </p><br><ol><li>  les incidents concernant de Â«nouveauxÂ» problÃ¨mes ont reÃ§u des recommandations non pertinentes du systÃ¨me;  Il s'est avÃ©rÃ© qu'en l'absence de coÃ¯ncidences dans le contenu de l'appel, le systÃ¨me a sÃ©lectionnÃ© des incidents proches du service de l'employÃ© contactant. </li><li>  des recommandations pour un incident sur un systÃ¨me frappent des incidents d'autres systÃ¨mes.  Les mots utilisÃ©s dans l'appel Ã©taient similaires, mais dÃ©crivaient les problÃ¨mes des autres systÃ¨mes et Ã©taient diffÃ©rents. </li></ol><br><p>  Les moyens possibles d'amÃ©liorer la qualitÃ© des recommandations ont Ã©tÃ© sÃ©lectionnÃ©s: </p><br><ul><li>  ajustement de la composition et du poids des attributs de traitement inclus dans le vecteur final </li><li> sÃ©lection des paramÃ¨tres de vectorisation <code>TfidfVectorizer</code> </li><li>  sÃ©lection de la distance de coupure des recommandations </li></ul><br><h2 id="vyrabotka-kriteriev-kachestva-i-metodiki-ocenki">  Ã‰laboration de critÃ¨res de qualitÃ© et de mÃ©thodes d'Ã©valuation </h2><br><p>  Pour rechercher une version amÃ©liorÃ©e du modÃ¨le, il est nÃ©cessaire de dÃ©terminer le principe de l'Ã©valuation de la qualitÃ© des rÃ©sultats du modÃ¨le.  Cela vous permettra de comparer quantitativement les deux modÃ¨les et de choisir le meilleur. </p><br><h3 id="chto-mozhno-poluchit-iz-sobrannyh-otzyvov">  Que peut-on obtenir des avis recueillis </h3><br><p>  Nous avons plusieurs <strong>m</strong> tuples de la forme: "Incident", "Incident recommandÃ©", "Evaluation de la recommandation". </p><br><ul><li>  "Note de recommandation" ( <strong>v</strong> ) - est dÃ©fini en binaire: "Bon" |  Pauvre (1 / -1); </li><li>  "Incident" et "Incident recommandÃ©" sont simplement des numÃ©ros d'incident.  Sur eux, vous pouvez trouver l'incident dans la base de donnÃ©es. </li></ul><br><p>  Ayant de telles donnÃ©es, vous pouvez calculer: </p><br><ul><li>  <code>n_inc_total</code> - Le nombre total d'incidents pour lesquels il existe des recommandations </li><li>  <code>n_inc_good</code> - Le nombre d'incidents pour lesquels il existe de Â«bonnesÂ» recommandations </li><li>  <code>avg_inc_good</code> - Le nombre moyen de Â«bonnesÂ» recommandations pour les incidents </li><li>  <code>n_rec_total</code> - Nombre total de recommandations </li><li>  <code>n_rec_good</code> - Le nombre total de Â«bonnesÂ» recommandations </li><li>  <code>pct_inc_good</code> - part des incidents pour lesquels il existe de "bonnes" recommandations <br> <code>pct_inc_good = n_inc_good / n_inc_total</code> </li> <li>  <code>pct_rec_good</code> - part totale des "bonnes" recommandations <br> <code>pct_rec_good = n_rec_good / n_rec_total</code> </li> </ul><br><p>  Ces indicateurs, calculÃ©s sur la base des estimations des utilisateurs, peuvent Ãªtre considÃ©rÃ©s comme des Â«indicateurs de baseÂ» du modÃ¨le d'origine.  Avec lui, nous comparerons des indicateurs similaires de nouvelles versions du modÃ¨le. </p><br><p>  Prenez tous les Â«incidentsÂ» uniques de <strong>m</strong> et faites-les passer par le nouveau modÃ¨le. </p><br><p>  En consÃ©quence, nous obtenons de nombreux <strong>m *</strong> tuples: "Incident", "Incident recommandÃ©", "Distance". <br>  Ici, "distance" est la mÃ©trique dÃ©finie dans NearestNeighbors.  Dans notre modÃ¨le, c'est la distance cosinus.  La valeur "0" correspond Ã  la coÃ¯ncidence complÃ¨te des vecteurs. </p><br><h3 id="podbor-rasstoyaniya-otsechki">  SÃ©lection de la "distance de coupure" </h3><br><p>  En complÃ©tant l'ensemble de recommandations <strong>m * avec des</strong> informations sur l'estimation vraie de <strong>v Ã </strong> partir de l'ensemble initial d'estimations de <strong>m</strong> , nous obtenons la correspondance entre la distance <strong>d</strong> et l'estimation vraie de <strong>v</strong> pour ce modÃ¨le. </p><br><p>  Ayant l'ensemble ( <strong>d</strong> , <strong>v</strong> ), il est possible de choisir le niveau de coupure optimal <strong>t</strong> , qui pour d &lt;= t la recommandation sera "bonne", et pour d&gt; t - "mauvaise".  La sÃ©lection de t peut Ãªtre effectuÃ©e en optimisant le classificateur binaire le plus simple <code>v = -1 if d&gt;t else 1</code> rapport Ã  l'hyperparamÃ¨tre t, et en utilisant, par exemple, AUC ROC comme mÃ©trique. </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#     class BinarizerClassifier(Binarizer): def transform(self, x): return np.array([-1 if _x &gt; self.threshold else 1 for _x in np.array(x, dtype=float)]).reshape(-1, 1) def predict_proba(self, x): z = self.transform(x) return np.array([[0 if _x &gt; 0 else 1, 1 if _x &gt; 0 else 0] for _x in z.ravel()]) def predict(self, x): return self.transform(x) # #   : # -  , # -    m* # -   (d,v)  z_data_for_t # #   t b = BinarizerClassifier() z_x = z_data_for_t[['distance']] z_y = z_data_for_t['TYPE'] cv = GridSearchCV(b, param_grid={'threshold': np.arange(0.1, 0.7, 0.01)}, scoring='roc_auc', cv=5, iid=False, n_jobs=-1) cv.fit(z_x, z_y) score = cv.best_score_ t = cv.best_params_['threshold'] best_b = cv.best_estimator_</span></span></code> </pre> <br><p>  La valeur <strong>t</strong> obtenue peut Ãªtre utilisÃ©e pour filtrer les recommandations. </p><br><p>  Bien sÃ»r, cette approche peut encore ignorer les Â«mauvaisesÂ» recommandations et couper les Â«bonnesÂ».  Par consÃ©quent, Ã  ce stade, nous affichons toujours les recommandations du "Top 5", mais nous marquons spÃ©cialement celles qui sont considÃ©rÃ©es comme "bonnes", en tenant compte du <strong>t</strong> trouvÃ©. <br>  Alternative: si au moins une Â«bonneÂ» recommandation est trouvÃ©e, ne montrer que Â«bonneÂ».  Sinon, affichez tous les disponibles (Ã©galement - "Top N"). </p><br><h3 id="predpolozhenie-dlya-sravneniya-modeley">  HypothÃ¨se de comparaison des modÃ¨les </h3><br><p>  Pour les modÃ¨les de formation, le mÃªme cas d'incident est utilisÃ©. <br>  Supposons que si une Â«bonneÂ» recommandation a dÃ©jÃ  Ã©tÃ© trouvÃ©e, le nouveau modÃ¨le devrait Ã©galement trouver une Â«bonneÂ» recommandation pour le mÃªme incident.  En particulier, le nouveau modÃ¨le peut trouver les mÃªmes Â«bonnesÂ» recommandations que l'ancien.  Cependant, avec le nouveau modÃ¨le, nous nous attendons Ã  ce que le nombre de Â«mauvaisesÂ» recommandations diminue. </p><br><p>  Ensuite, en considÃ©rant les mÃªmes indicateurs pour les recommandations <strong>m * du</strong> nouveau modÃ¨le, ils peuvent Ãªtre comparÃ©s aux indicateurs correspondants pour <strong>m</strong> .  Sur la base de la comparaison, vous pouvez choisir le meilleur modÃ¨le. </p><br><p>  Il existe deux maniÃ¨res de prendre en compte les Â«bonnesÂ» recommandations pour l'ensemble <strong>m *</strong> : </p><br><ol><li>  sur la base du <strong>t</strong> trouvÃ©: considÃ©rer que toutes les recommandations de <strong>m *</strong> avec <strong>d</strong> &lt; <strong>t</strong> sont Â«bonnesÂ» et les prendre en compte pour le calcul des mÃ©triques </li><li>  sur la base des estimations vraies correspondantes de l'ensemble <strong>m</strong> : dans les recommandations <strong>m *,</strong> sÃ©lectionnez uniquement celles pour lesquelles il existe une estimation vraie en <strong>m</strong> et jetez le reste. </li></ol><br><p>  Dans le premier cas, les indicateurs "absolus" ( <code>n_inc_good</code> , <code>n_rec_good</code> ) du nouveau modÃ¨le doivent Ãªtre supÃ©rieurs Ã  ceux du modÃ¨le de base.  Dans le second cas, les indicateurs doivent s'approcher des indicateurs du modÃ¨le de base. <br>  Le problÃ¨me de la seconde mÃ©thode: si le nouveau modÃ¨le est meilleur que l'original, et qu'il trouve quelque chose de prÃ©cÃ©demment inconnu, une telle recommandation ne sera pas prise en compte dans le calcul. </p><br><h3 id="vybor-parametrov-sravneniya-modeley">  SÃ©lectionnez les options de comparaison de modÃ¨les </h3><br><p>  Lors du choix d'un nouveau modÃ¨le, je souhaite que les indicateurs s'amÃ©liorent par rapport au modÃ¨le existant: </p><br><ul><li>  nombre moyen de Â«bonnesÂ» recommandations par incident ( <code>avg_inc_good</code> ) </li><li>  nombre d'incidents pour lesquels il existe de Â«bonnesÂ» recommandations ( <code>n_inc_good</code> ). </li></ul><br><p>  Pour la comparaison avec le modÃ¨le d'origine, nous utiliserons les relations de ces paramÃ¨tres du nouveau modÃ¨le et de l'original.  Ainsi, si le rapport du paramÃ¨tre du nouveau modÃ¨le Ã  l'ancien est supÃ©rieur Ã  1, le nouveau modÃ¨le est meilleur. </p><br><pre> <code class="plaintext hljs">benchmark_agv_inc_good = avg_inc_good* / avg_inc_good benchmark_n_inc_good = n_inc_good* / n_inc_good</code> </pre> <br><p>  Pour simplifier la sÃ©lection, il est prÃ©fÃ©rable d'utiliser un seul paramÃ¨tre.  Nous prenons la moyenne harmonique des indicateurs relatifs individuels et nous l'utilisons comme seul critÃ¨re de qualitÃ© composite pour le nouveau modÃ¨le. </p><br><pre> <code class="plaintext hljs">composite = 2 / ( 1/benchmark_agv_inc_good + 1/benchmark_n_inc_good)</code> </pre> <br><h2 id="novaya-model-i-ee-optimizaciya">  Nouveau modÃ¨le et son optimisation </h2><br><p>  Pour le nouveau modÃ¨le, dans le vecteur final reprÃ©sentant l'incident, nous ajoutons les composants responsables de la "zone d'incident" (l'un des nombreux systÃ¨mes desservis par notre Ã©quipe). <br>  Les informations sur l'unitÃ© et l'emplacement de l'employÃ© qui a crÃ©Ã© l'incident sont Ã©galement placÃ©es dans un composant vectoriel distinct.  Tous les composants ont leur poids dans le vecteur final. </p><br><pre> <code class="python hljs">p = Pipeline( steps=[ (<span class="hljs-string"><span class="hljs-string">'grp'</span></span>, ColumnTransformer( transformers=[ (<span class="hljs-string"><span class="hljs-string">'text'</span></span>, Pipeline(steps=[ (<span class="hljs-string"><span class="hljs-string">'pp'</span></span>, CommentsTextTransformer(n_jobs=<span class="hljs-number"><span class="hljs-number">-1</span></span>)), (<span class="hljs-string"><span class="hljs-string">"tfidf"</span></span>, TfidfVectorizer(stop_words=get_stop_words(), ngram_range=(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), max_features=<span class="hljs-number"><span class="hljs-number">10000</span></span>, min_df=<span class="hljs-number"><span class="hljs-number">0</span></span>)) ]), [<span class="hljs-string"><span class="hljs-string">'short_description'</span></span>, <span class="hljs-string"><span class="hljs-string">'comments'</span></span>] ), (<span class="hljs-string"><span class="hljs-string">'area'</span></span>, OneHotEncoder(handle_unknown=<span class="hljs-string"><span class="hljs-string">'ignore'</span></span>), [<span class="hljs-string"><span class="hljs-string">'area'</span></span>] ), (<span class="hljs-string"><span class="hljs-string">'dept'</span></span>, OneHotEncoder(handle_unknown=<span class="hljs-string"><span class="hljs-string">'ignore'</span></span>), [<span class="hljs-string"><span class="hljs-string">'u_impacted_department'</span></span>] ), (<span class="hljs-string"><span class="hljs-string">'loc'</span></span>, OneHotEncoder(handle_unknown=<span class="hljs-string"><span class="hljs-string">'ignore'</span></span>), [<span class="hljs-string"><span class="hljs-string">'u_impacted_location'</span></span>] ) ], transformer_weights={<span class="hljs-string"><span class="hljs-string">'text'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'area'</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-string"><span class="hljs-string">'dept'</span></span>: <span class="hljs-number"><span class="hljs-number">0.1</span></span>, <span class="hljs-string"><span class="hljs-string">'loc'</span></span>: <span class="hljs-number"><span class="hljs-number">0.1</span></span>}, n_jobs=<span class="hljs-number"><span class="hljs-number">-1</span></span> )), (<span class="hljs-string"><span class="hljs-string">'norm'</span></span>, Normalizer()), (<span class="hljs-string"><span class="hljs-string">"nn"</span></span>, NearestNeighborsTransformer(n_neighbors=<span class="hljs-number"><span class="hljs-number">10</span></span>, metric=<span class="hljs-string"><span class="hljs-string">'cosine'</span></span>)) ], memory=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>)</code> </pre> <br><p>  Les hyperparamÃ¨tres du modÃ¨le devraient affecter les cibles du modÃ¨le.  Dans l'architecture du modÃ¨le sÃ©lectionnÃ©, nous considÃ©rerons comme hyperparamÃ¨tres: </p><br><ul><li>  ParamÃ¨tres de vectorisation TF-IDF - n-grammes utilisÃ©s (ngram_range), taille du dictionnaire (max_features), durÃ©e minimale de conduite (min_df) </li><li>  contribution des composantes au vecteur final - transformer_weights. </li></ul><br><p>  Les valeurs initiales des hyperparamÃ¨tres de vectorisation de texte sont tirÃ©es du modÃ¨le prÃ©cÃ©dent.  Les poids initiaux des composants sont sÃ©lectionnÃ©s sur la base d'un jugement d'expert. </p><br><h3 id="cikl-podbora-parametrov">  Cycle de sÃ©lection des paramÃ¨tres </h3><br><p>  Comment comparer, sÃ©lectionner le niveau de ratÃ© et comparer les modÃ¨les entre eux ont dÃ©jÃ  Ã©tÃ© dÃ©terminÃ©s.  Nous pouvons maintenant procÃ©der Ã  l'optimisation par la sÃ©lection d'hyperparamÃ¨tres. </p><br><p><img src="https://habrastorage.org/webt/zy/zy/kb/zyzykbygrls9ca0bjscn3usfqby.png" alt="Cycle d'optimisation"></p><br><pre> <code class="python hljs">param_grid = { <span class="hljs-string"><span class="hljs-string">'grp__text__tfidf__ngram_range'</span></span>: [(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)], <span class="hljs-string"><span class="hljs-string">'grp__text__tfidf__max_features'</span></span>: [<span class="hljs-number"><span class="hljs-number">5000</span></span>, <span class="hljs-number"><span class="hljs-number">10000</span></span>, <span class="hljs-number"><span class="hljs-number">20000</span></span>], <span class="hljs-string"><span class="hljs-string">'grp__text__tfidf__min_df'</span></span>: [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0001</span></span>, <span class="hljs-number"><span class="hljs-number">0.0005</span></span>, <span class="hljs-number"><span class="hljs-number">0.001</span></span>], <span class="hljs-string"><span class="hljs-string">'grp__transformer_weights'</span></span>: [{<span class="hljs-string"><span class="hljs-string">'text'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'area'</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-string"><span class="hljs-string">'dept'</span></span>: <span class="hljs-number"><span class="hljs-number">0.1</span></span>, <span class="hljs-string"><span class="hljs-string">'loc'</span></span>: <span class="hljs-number"><span class="hljs-number">0.1</span></span>}, {<span class="hljs-string"><span class="hljs-string">'text'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'area'</span></span>: <span class="hljs-number"><span class="hljs-number">0.75</span></span>, <span class="hljs-string"><span class="hljs-string">'dept'</span></span>: <span class="hljs-number"><span class="hljs-number">0.1</span></span>, <span class="hljs-string"><span class="hljs-string">'loc'</span></span>: <span class="hljs-number"><span class="hljs-number">0.1</span></span>}, {<span class="hljs-string"><span class="hljs-string">'text'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'area'</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-string"><span class="hljs-string">'dept'</span></span>: <span class="hljs-number"><span class="hljs-number">0.3</span></span>, <span class="hljs-string"><span class="hljs-string">'loc'</span></span>: <span class="hljs-number"><span class="hljs-number">0.3</span></span>}, {<span class="hljs-string"><span class="hljs-string">'text'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'area'</span></span>: <span class="hljs-number"><span class="hljs-number">0.75</span></span>, <span class="hljs-string"><span class="hljs-string">'dept'</span></span>: <span class="hljs-number"><span class="hljs-number">0.3</span></span>, <span class="hljs-string"><span class="hljs-string">'loc'</span></span>: <span class="hljs-number"><span class="hljs-number">0.3</span></span>}, {<span class="hljs-string"><span class="hljs-string">'text'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'area'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'dept'</span></span>: <span class="hljs-number"><span class="hljs-number">0.1</span></span>, <span class="hljs-string"><span class="hljs-string">'loc'</span></span>: <span class="hljs-number"><span class="hljs-number">0.1</span></span>}, {<span class="hljs-string"><span class="hljs-string">'text'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'area'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'dept'</span></span>: <span class="hljs-number"><span class="hljs-number">0.3</span></span>, <span class="hljs-string"><span class="hljs-string">'loc'</span></span>: <span class="hljs-number"><span class="hljs-number">0.3</span></span>}, {<span class="hljs-string"><span class="hljs-string">'text'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'area'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'dept'</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-string"><span class="hljs-string">'loc'</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>}], } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> param <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ParameterGrid(param_grid=param_grid): p.set_params(**param) p.fit(x) ...</code> </pre> <br><h3 id="rezultaty-optimizacii">  RÃ©sultats d'optimisation </h3><br><p>  Le tableau montre les rÃ©sultats d'expÃ©riences dans lesquelles des rÃ©sultats intÃ©ressants ont Ã©tÃ© obtenus - les 5 meilleures et les pires valeurs pour les indicateurs contrÃ´lÃ©s. </p><br><p><img src="https://habrastorage.org/webt/bi/l2/tj/bil2tj8dbqexqtezwmxealh3imq.png"></p><br><p>  Les cellules avec des indicateurs dans le tableau sont marquÃ©es comme suit: </p><br><ul><li>  le vert foncÃ© est le meilleur indicateur parmi toutes les expÃ©riences </li><li>  vert pÃ¢le - la valeur de l'indicateur est dans le top-5 </li><li>  rouge foncÃ© - le pire indicateur de toutes les expÃ©riences </li><li>  rouge pÃ¢le - l'indicateur est dans le pire-5 </li></ul><br><p>  Le meilleur indicateur composite a Ã©tÃ© obtenu pour un modÃ¨le avec paramÃ¨tres: </p><br><pre> <code class="plaintext hljs">ngram_range = (1,2) min_df = 0.0001 max_features = 20000 transformer_weights = {'text': 1, 'area': 1, 'dept': 0.1, 'loc': 0.1}</code> </pre> <br><p>  Un modÃ¨le avec ces paramÃ¨tres a montrÃ© une amÃ©lioration de l'indicateur composite par rapport au modÃ¨le d'origine 24% </p><br><h2 id="nekotorye-nablyudeniya-i-vyvody">  Quelques observations et conclusions </h2><br><p>  Selon les rÃ©sultats d'optimisation: </p><br><ol><li><p>  L'utilisation de trigrammes ( <code>ngram_range = (1,3)</code> ) ne semble pas justifiÃ©e.  Ils gonflent le dictionnaire et augmentent lÃ©gÃ¨rement la prÃ©cision par rapport aux bigrammes. </p><br></li><li><p>  Un comportement intÃ©ressant lors de la construction d'un dictionnaire utilisant uniquement des bigrammes ( <code>ngram_range = (2,2)</code> ): la "prÃ©cision" des recommandations augmente et le nombre de recommandations trouvÃ©es diminue.  Tout comme un Ã©quilibre prÃ©cision / rappel dans les classificateurs.  Un comportement similaire est observÃ© dans la sÃ©lection du niveau de coupure <strong>t</strong> - pour les bigrammes, un Â«cÃ´neÂ» de coupure plus Ã©troit et une meilleure sÃ©paration des Â«bonnesÂ» et des Â«mauvaisesÂ» recommandations sont caractÃ©ristiques. </p><br></li><li><p>  Le paramÃ¨tre non nul min_df, avec les bigrammes, augmente la prÃ©cision des recommandations.  Ils commencent Ã  Ãªtre basÃ©s sur des termes qui se produisent au moins plusieurs fois.  Ã€ mesure que le paramÃ¨tre augmente, le dictionnaire commence Ã  rÃ©trÃ©cir rapidement.  Pour les petits Ã©chantillons, comme dans notre cas, il sera probablement plus comprÃ©hensible d'opÃ©rer avec le nombre de documents (valeur entiÃ¨re min_df) que la fraction de documents (valeur fractionnaire min_df) contenant le terme. </p><br></li><li><p>  De bons rÃ©sultats sont obtenus lorsque l'attribut incident responsable de la "rÃ©gion" est inclus dans le vecteur final avec une pondÃ©ration Ã©gale ou proche de la composante texte.  Des valeurs faibles entraÃ®nent une augmentation de la proportion de Â«mauvaisesÂ» recommandations en raison de la dÃ©couverte de mots similaires dans des documents provenant d'autres domaines.  Mais les signes de l'emplacement du client n'affectent pas si bien les rÃ©sultats des recommandations dans notre cas. </p><br></li></ol><br><p>  De nouvelles idÃ©es ont Ã©mergÃ©: </p><br><ul><li>  ajouter une composante Â«tempsÂ» afin que les incidents rÃ©cents aient prioritÃ© sur les incidents similaires. </li><li>  voyez comment l'introduction du paramÃ¨tre max_df influencera - bien qu'avec tf-idf des mots trop gÃ©nÃ©raux pour le corpus ne devraient pas avoir un poids significatif, par dÃ©finition. </li><li>  essayer enfin d'autres faÃ§ons de vectoriser le contenu, par exemple, en se basant sur le mot Ã  vecteur, ou en se basant sur la convolution de vues tf-idf Ã  l'aide de rÃ©seaux. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr472772/">https://habr.com/ru/post/fr472772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr472760/index.html">RÃ©duisez le temps de calcul de quelques annÃ©es Ã  quelques minutes. Comprendre l'apprentissage automatique quantique</a></li>
<li><a href="../fr472762/index.html">Analyse technique de l'exploit checkm8</a></li>
<li><a href="../fr472766/index.html">ParamÃ©trage Ã  partir d'un fichier dans py.test</a></li>
<li><a href="../fr472768/index.html">Comment recruter, licencier et revenir de la gestion au dÃ©veloppement: vidÃ©o du Badoo Techleads Meetup # 5</a></li>
<li><a href="../fr472770/index.html">Organisation de l'interface dans Unity avec UI Canvas</a></li>
<li><a href="../fr472776/index.html">Sauvegarde, partie 7: Conclusions</a></li>
<li><a href="../fr472778/index.html">5 faÃ§ons d'utiliser le Raspberry Pi</a></li>
<li><a href="../fr472780/index.html">Pourquoi Ã©viter les amis ou comment j'ai perdu tous mes avantages</a></li>
<li><a href="../fr472782/index.html">Pourquoi 3D Headache / Part 8 Defocus et l'avenir de la 3D</a></li>
<li><a href="../fr472790/index.html">AntiquitÃ©s: i-Mate Jasjar, un communicateur pour les entreprises</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>