<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👧 🌽 🚥 Nota do arquiteto de front-end nº 1. Você não pode simplesmente obter e usar o Redux. 🔬 🔦 🙍🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Isenção de responsabilidade 
 Caro leitor! Se você não tem idéia do que são React e Redux, ler mais não faz sentido, mais bobagens técnicas. Sério, pa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nota do arquiteto de front-end nº 1. Você não pode simplesmente obter e usar o Redux.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445966/"><h4>  Isenção de responsabilidade </h4><br>  Caro leitor!  Se você não tem idéia do que são React e Redux, ler mais não faz sentido, mais bobagens técnicas.  Sério, para que serve esta nota, é necessário trabalhar com essas bibliotecas - apesar de tentar escrever com clareza, este artigo não é de nível básico.  E isso é experiência pessoal e opinião com base na prática. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a1/1ef/58a/4a11ef58abb70667a79ec9f1dc266d81.jpg" alt="imagem"></div><br><h4>  O que há de errado em usar o Redux? </h4><br>  Decidi escrever, mas o que há de errado em usar o redux no meu projeto e em milhares de outros?  Escrevo aplicativos de reação / redux desde abril de 2016 (três anos).  Já é hora de descobrir algumas coisas interessantes ... E havia palestras e relatórios, especialmente voltados para iniciantes, mas não havia nenhum adulto olhando para trás e nenhuma retrospectiva.  Enquanto isso, alguém coloca asteriscos em pacotes que verificam "você não tem 13 horas por hora", quebrarei o muro dos estereótipos predominantes. <br><a name="habracut"></a><br><h4>  Mas redux não é necessário! </h4><br>  Você diz, e de certa forma você estará certo.  Ele não pode ser usado desde 2018 - há uma tonelada de artigos sobre esse tópico na Internet, mas até agora com o “não uso” de uma fazenda coletiva é obtida, ficará claro abaixo o porquê.  E o número de alternativas está fora de escala e mais ainda. <br><br>  Usamos o Redux, por ser um padrão aceito (pelo menos para reagir), a previsibilidade e a confiabilidade do Redux são importantes para nós.  Mas sentimos muito a falta, na verdade, neste <br><br><h4>  Reivindicar </h4><br>  Provavelmente, para deixar claro qual é a afirmação sobre os pontos, primeiro você precisa voltar ao passado, às raízes, como quiser, ou seja, abrir a documentação do glorioso redux e ler os postulados.  Vou considerar apenas o primeiro deles.  Se for interessante para você - compartilhe nos comentários, analisarei muitos outros pontos. <br><br><h4>  A única fonte da verdade ... </h4><br>  Aqui nós temos uma emboscada.  Obviamente, diz que pode haver uma história, o redux declara sua diferença da arquitetura de fluxo dessa maneira.  Mas se você olhar mais amplamente: a regra é observada em um projeto real?  Você dirá: bastante.  Declaro (declaro) 1 lado, transfiro-o para o provedor e depois ... <br><br>  Tecnicamente, o processo está descrito corretamente.  Mas posso dizer que as pessoas estão sujeitas a distorções de percepção, lógica e como os programadores ainda são pessoas ... Bem, você entende o que estou levando (se você não entendeu: os programadores são propensos a distorções de percepção, lógica etc.) <br>  A principal distorção aqui é que eu, como muitos de meus colegas, estamos acostumados ao fato de que, se não usarmos o termo “loja” em relação a algo que não seja redux, não haverá outros. <br><br><h4>  E aí vem a reação </h4><br>  Um recurso técnico chamado estado interno queria cuspir neste postulado.  Ele simplesmente cria um armazenamento do tipo estado interno em qualquer local conveniente.  Existe um componente - existe um estado que possui um mecanismo para atualizar e influenciar o componente.  A diferença de uso (estado da loja, atualização e alterações de transmissão) é quase invisível.  Você pode objetar: não está totalmente claro por que você não gosta do estado do componente.  Ele não é como editores, como eles podem ser comparados!  É interno, bem, o que sinaliza para armazenar lá. <br><br>  Entenda que a essência não muda do fato de você renomear o item.  Há uma marreta na segunda-feira, isso não acontece no dia da semana.  Sim, ambas as segundas-feiras são difíceis, outros dias e marretas são mais fáceis.  Mas, pelo nome, a marreta não deixa de ser um instrumento de percussão. <br><br>  A escala do componente de reação de redux e estado é diferente, mas a essência, quando usada hoje, é uma. <br><br>  Vou explicar da seguinte maneira: na maioria dos casos, os dados do estado interno do componente vão para a criança por meio de adereços, mas, por mais óbvio que seja, os dados de redux, quando integrados ao react, também entram nos componentes por meio de adereços.  Do ponto de vista do componente que aceita adereços, não importa o que está fora.  Ou seja, para o usuário final - esse armazenamento redux, esse estado interno - é o mesmo. <br><br>  Além disso, esse estado interno pode não depender dos props do componente em que é declarado.  Em seguida, obtemos um isolamento que torna esse estado interno uma loja ainda maior do que você imagina. <br><br>  Para que seja verdadeiramente interno, deve afetar apenas o componente onde é declarado, sem causar vazamentos nos componentes filhos.  Isso é difícil?  Bastante, porque seu significado está quase completamente perdido.  Este é outro sinal de que o estado interno é uma loja.  Afinal, simplesmente removemos um ponto do objetivo de “armazenar o estado, atualizar e transmitir mudanças” - transmitir as mudanças.  Tudo, o estado está perdido. <br><br>  Ou seja, o principal problema de ter um estado interno é que ele concorre com o redux por dados, perde a longo prazo e porcaria.  Temos todo tipo de técnicas, como o estado de elevação (é quando o irmão do elemento host é necessário, portanto a parte do estado e toda a lógica de trabalhar com ele são levadas ao pai, gastando muito tempo reescrevendo e testando a lógica de trabalho) etc. Aparecem erros e despesas gerais em melhorias e muita alegria.  Esse é todo o barulho que estraga nosso software na fase de desenvolvimento.  Não alcançamos vendas, mas o software já é assim. <br><br>  Ou seja, para todos os sinais e problemas, temos mais de uma história e muitos problemas associados a isso.  A última coisa, provavelmente, será a seguinte: <br><br>  Eu também amo redux pelo tipo de ferramentas que ele possui.  Quando comecei, usamos um logger que simplesmente consolidou todas as ações, sem fornecer, no entanto, uma imagem completa do que estava acontecendo.  Agora - este é o assistente principal e amigo.  No React, eles também são representados.  Em geral, o devtools é a razão pela qual qualquer pubsub está longe do Redux.  Como uma formiga a uma baleia azul. <br><br>  <b>Problemas</b> (não haverá provas de DNA): <br><br><ol><li>  alterar o estado interno por meio de react devtools às vezes não leva a uma atualização ou ao resultado desejado - peço a integração com o redux. </li><li>  estado interno quebra horários em redux devtools.  O super recurso com viagens no tempo disponível na arquitetura redux não funciona graças à reação da arquitetura interna do estado.  O estado interno simplesmente não se importava com uma mudança no redux, ele tem seu próprio estado.  Timetravel simplesmente não funciona.  Alguns elementos simplesmente não são atualizados, parcialmente atualizados etc. Tudo isso épico com sincronização de código assíncrona no ralo. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/991/8fd/5c2/9918fd5c23836212a6d11fc1b75351be.jpg" alt="imagem"></div><br><h4>  Um exemplo, é claro, sugado da prática </h4><br>  Você está trabalhando em um novo projeto para você, ou seu colega escreveu algumas funcionalidades há um ano e agora você precisa expandi-las.  Em geral, há a tarefa de finalizar o código de outra pessoa.  Você começa a investigar e entende que não há dados nos editores.  Não há ações, redutores no código que armazenam os dados necessários.  E você começa a jornada através da árvore de componentes em busca dos tesouros e os encontra (!!!) até algumas peças.  Você pergunta aos colegas, mas a resposta é padrão: não me lembro de escrever para o estado mais rapidamente, não tínhamos tempo e assim por diante.  Você acessa a fonte e entende que seu estado atual não envolve revisão.  Você está reescrevendo o código testado e funcionando para fazer alterações e adicionar novas funcionalidades. <br><br>  <i>A presença de uma alternativa perniciosa na forma de um estado interno faz sua ação suja.</i>  <i>Afinal, agora é barato e não importa o que acontece em um ano.</i> <br><br><h4>  Poucas metáforas </h4><br>  Parece comida ruim - parece saborosa e barata, mas depois de um ano ou três - o trato gastrointestinal deixa de obedecer e vive sua própria vida.  Você gasta muito tempo e dinheiro em recuperar sua saúde anterior e nem sempre consegue isso. <br><br>  <b>Redux e React Internal State são concorrentes</b> , como grandes e pequenas empresas em um nicho.  O principal produto são dados e influência.  O software é o consumidor de seus produtos.  Existem muitas analogias, mas a essência permanece a mesma - quando desenvolvemos software - não precisamos de concorrência. <br><br>  <i><b>Somos os "ditadores" do código do programa e qualquer concorrência deve ser reprimida, o livre mercado deve ser proibido e a economia planejada e o monopólio estatal devem dominar o consumidor.</b></i> <br><br>  Ahem, algo me aborreceu.  Tudo deve ir conforme o planejado, em geral.  Temos sprints, lançamentos e muito mais, e o software tem um custo finito e uma vida útil / entrada no mercado.  Isso é muito importante, e não podemos permitir o tumulto no navio, a revolta das bibliotecas. <br><br><h4>  A conclusão é simples. </h4><br>  Não use outros repositórios com redux.  Exceções podem criar apenas casos muito isolados.  Por exemplo, componentes que, em princípio, não são controlados pelo redux sem a camada correspondente e não o afetam. <br><br><h4>  Exemplo </h4><br>  Desenvolvi o módulo independente em uma ramificação e refatorando a loja em outra - em geral, minha abordagem para gerenciar a loja e o estado é um tópico separado para publicação.  Comecei a refatorar para o módulo, mas no início e no final da gravação do módulo, a refatoração para o teste e o assistente não desapareceu.  A refatoração é grande e requer recursos ponderados que precisam ser planejados - em geral, você não pode apenas tomar e refatorar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a39/bb2/c5f/a39bb2c5f0b89a7d9085521f74967e38.jpg" alt="imagem"></div><br>  Portanto, sabendo das próximas mudanças na loja, não a usei para desenvolver um novo recurso.  Isso aumentaria os custos de atualização de refatoração e testes abandonados às vezes. <br>  O que fiz: me inscrevi para um mínimo de dados.  Os dados e sua estrutura não sofreram refatoração, o código que os gerou sofreu, salvou etc. Não escrevi um byte para os editores.  Verifico se o usuário está logado e mais alguns campos. <br><br>  Para minhas necessidades, lavei o PubSub com canais e uma API simples.  Sim, sim, pubsab.  Falta de dor dolorosa normal.  Viagem no tempo - dor.  Em geral, pretendo escrever uma extensão para chrome na forma de devtools e é possível publicar a reimplementação como concorrente para reduxar no github.  Tenho muitas reclamações sobre redux, que não levantarei neste artigo, mas o PubSub praticamente não as possui.  Além do fato de eu me lembrar do redux logger ... <br><br>  E assim o módulo tem seu próprio armazenamento, sua própria conexão com o servidor. <br><br>  Ou seja, o redux não afeta o módulo, praticamente não pode afetar esse armazenamento (existem apenas três campos na assinatura), mas o módulo e o PubSub não afetam o redux de forma alguma.  Essa separação exclui a concorrência. <br><br>  A pergunta "onde armazenar os dados?"  ao desenvolver o módulo, nunca o encontrei.  Mas quando se trata de redux vs estado interno - para muitos, essa pergunta surge quase constantemente.  Decidi responder a essa pergunta de uma vez por todas. <br><br>  <b>Minha opinião arquitetônica é:</b> <b><br><br></b>  <b>Armazene dados apenas no redux (todos, inclusive "internos"), se estiverem conectados ao seu projeto de reação como o repositório principal, não use repositórios que irão competir com ele.</b>  Isso aumentará a confiabilidade e o impacto desta biblioteca e de suas ferramentas (o rastreamento de tempo e o rastreamento de todos os dados em etapas agilizam o desenvolvimento e a busca de possíveis problemas - as alterações síncronas são mais íngremes e fáceis de serem assíncronas). <br><br>  <i>Talvez valha a pena adicionar uma biblioteca que exclua completamente o estado interno do desenvolvimento?</i>  <i>Ou substitui o estado interno por uma seleção do redux, por exemplo?</i>  Comecei a escrever um ano atrás, terminei 90% e até conduzi 1 relatório.  O que você diz  Precisa disso? <br><br>  Espero que tenham gostado desta nota :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt445966/">https://habr.com/ru/post/pt445966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt445952/index.html">Um trilhão de pequenos singles</a></li>
<li><a href="../pt445954/index.html">Acelerador de IA da HSE, MTS e Rostelecom</a></li>
<li><a href="../pt445958/index.html">SPDS GraphiCS - sistema de fachada e cobertura</a></li>
<li><a href="../pt445962/index.html">Estágio em TI: visão do gerente</a></li>
<li><a href="../pt445964/index.html">O MEPhI sediará uma olimpíada de segurança da informação do aluno: como participar e o que isso oferece</a></li>
<li><a href="../pt445970/index.html">Como a LANIT equipou os sistemas de engenharia e TI com um centro de negociação no Sberbank</a></li>
<li><a href="../pt445972/index.html">Bigdata de campo arado em medicamentos e produtos farmacêuticos</a></li>
<li><a href="../pt445974/index.html">Como promover um novato e não quebrar nada</a></li>
<li><a href="../pt445976/index.html">PhpStorm 2019.1: depuração de modelos Twig e Blade, pesquisa de código morto, conclusão automática aprimorada e muito mais</a></li>
<li><a href="../pt445978/index.html">Cruzando um ouriço com um ouriço: OpenJDK-11 + GraalVM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>