<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëµüèæ ü§∂ üêù PDA (Pocket Travel Computer): Enregistreur de circuits GPS üë©üèª‚Äçü§ù‚Äçüë®üèº ‚õé ü•ó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mon projet de loisir est un enregistreur GPS . Les commentaires ont m√™me sugg√©r√© de l‚Äôappeler ¬´ordinateur de bord¬ª, comme La journalisation n'est qu'u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PDA (Pocket Travel Computer): Enregistreur de circuits GPS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454434/">  Mon projet de loisir est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">enregistreur GPS</a> .  Les commentaires ont m√™me sugg√©r√© de l‚Äôappeler ¬´ordinateur de bord¬ª, comme  La journalisation n'est qu'une petite partie de toutes les capacit√©s de l'appareil.  Beaucoup a d√©j√† √©t√© mis en ≈ìuvre, mais la plupart restent √† faire. <br><br>  Dans des articles pr√©c√©dents, j'ai d√©crit la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">transition de l'arduino √† STM32</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">STMCube / HAL</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">parl√© un peu du syst√®me de construction</a> , du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chargeur de d√©marrage</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">construit un p√©riph√©rique USB composite</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">augment√© sa vitesse</a> .  Tout cela a √©t√© fait sur une planche √† pain bas√©e sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la carte Blue Pill STM32F103CB</a> et un h√©risson de fils.  Il est temps que l'appareil prenne forme, √† la fois √©lectronique (circuit) et physique (corps). <br><br><img src="https://habrastorage.org/webt/0g/et/tj/0gettjt59u77r2mjpz73hyfn7sc.jpeg"><br><br>  Les probl√®mes que j'ai d√ª r√©soudre √† ce stade sont √©troitement li√©s.  Lorsque vous choisissez des composants pour un projet, vous devez imaginer approximativement dans quel logement ils peuvent √™tre ins√©r√©s.  Et vice versa, le bo√Ætier doit √™tre fait pour les composants disponibles et les cartes, qui, encore une fois, doivent √™tre faites avec un ≈ìil sur le bo√Ætier.  En g√©n√©ral, un enchev√™trement de probl√®mes interconnect√©s.  Vous pouvez bien s√ªr prendre une bo√Æte plus grande et y pousser n'importe quoi, mais vous vouliez quelque chose de compact et l√©ger. <br><br>  Avant de commencer tout de suite, je tiens √† noter que ce n'est pas la version finale de l'appareil.  Tr√®s probablement, il y aura des erreurs dans le sch√©ma, quelque chose ne fonctionnera pas comme pr√©vu, dans les commentaires ils indiqueront des solutions plus correctes, certaines approches seront repens√©es.  Je pense que la deuxi√®me ou m√™me la troisi√®me version de l'appareil ne peut pas √™tre √©vit√©e.  Par cons√©quent, je serai heureux de vos commentaires constructifs. <br><br>  Sous la coupe, il est multi-perles, mais ce sera l'ing√©nierie. <br><a name="habracut"></a><br><h2>  Quoi et pourquoi </h2><br>  L'enregistreur GPS Holux M241 est mon fid√®le compagnon pour tous les voyages.  Il est avec moi depuis des milliers de kilom√®tres.  La piste que l'enregistreur √©crit est principalement utilis√©e pour g√©olocaliser les photos, mais l'itin√©raire lui-m√™me est √©galement int√©ressant.  C'est amusant de savoir √† quelle vitesse vous √™tes all√© skier, quel itin√©raire votre avion a parcouru, quelle vue vient de clignoter devant la fen√™tre de l'autobus.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici,</a> j'ai fait un petit examen de cet appareil. <br><br>  Malheureusement, les capacit√©s de cet appareil ont depuis longtemps cess√© de me convenir: je suis fatigu√© de jouer avec des batteries qui s'asseyent toujours au moment le plus inopportun.  Il y a aussi une tr√®s faible vitesse USB, une petite quantit√© de flash interne, un m√©canisme peu pratique pour fusionner des pistes, peu d'informations disponibles sur l'√©cran, une faible pr√©cision, un odom√®tre tr√®s primitif, aucune information sur les satellites, et bien plus encore. <br><br>  Oui, on pourrait chercher ce que les trackers modernes offrent - c'est s√ªr qu'il existe d√©j√† un appareil en vente qui r√©pond √† mes exigences.  Mais c'est un hobby, je veux essayer de faire quelque chose de complexe, int√©ressant, utile et n√©cessaire moi-m√™me.  Qu'il en soit ainsi, m√™me si seulement je vais l'utiliser. <br><br>  L'objectif du projet dans son ensemble est de cr√©er un appareil similaire en quelque chose, uniquement rempli de ma liste de souhaits.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dans le premier article</a> de la s√©rie, j'ai d√©taill√© mes exigences pour l'appareil.  En bref, je voudrais faire ce qui suit: <br><br><ul><li>  Recyclez le syst√®me d'alimentation, transf√©rez-le sur une batterie au lithium </li><li>  mettre un affichage plus informatif </li><li>  GPS plus pr√©cis </li><li>  √©tendre le flash avec la carte SD </li><li>  ajouter une boussole et un acc√©l√©rom√®tre </li><li>  Je veux √©galement repenser le syst√®me d'enregistrement pour cracher des pistes dans le format dont j'ai besoin. </li></ul><br>  En plus des exigences techniques et de la liste de souhaits, il existe √©galement des exigences non techniques (non fonctionnelles).  Je voudrais donc pomper dans la cr√©ation d'appareils complexes √† partir de z√©ro, pour comprendre comment fonctionnent les diff√©rents composants √©lectroniques, comment les programmer, comment cr√©er une carte et concevoir un bo√Ætier. <br><br>  Pourquoi avez-vous besoin d'un appareil s√©par√© si tous les t√©l√©phones modernes ont un GPS, un grand √©cran et beaucoup de m√©moire?  Eh bien, tout d'abord, je ne suis pas s√ªr qu'un t√©l√©phone avec GPS allum√© en mode d'enregistrement de piste puisse supporter toute la journ√©e.  Je ne voudrais pas vraiment rester dans un pays inconnu sans t√©l√©phone.  Aussi, j'utilise personnellement un appareil s√©par√©, c'est tout simplement plus confortable. <br><br>  Peut-√™tre qu'avec le temps, le concept de l'appareil changera.  Ainsi, par exemple, il devient de plus en plus logique d'abandonner l'√©cran et de se connecter au t√©l√©phone via Bluetooth, et de faire toutes les astuces logiques sur le t√©l√©phone.  Cette id√©e est tr√®s robuste et tentante.  Mais √† ce stade, j'aimerais toujours avoir une exposition - j'ai toujours le temps de l'abandonner. <br><br>  Pendant la premi√®re ann√©e et demie, j'ai d√©velopp√© l'appareil sur diff√©rents types de cartes de d√©bogage (d'abord arduino nano, puis pilule bleue STM32F103, puis STM32F407VE).  J'ai d√ª connecter des p√©riph√©riques sur le c√¢blage et les modules achet√©s.  En cons√©quence, un h√©risson fait de fils s'est av√©r√© sur la table, ce qui n'a pas fonctionn√© pour tester la r√©ception GPS dans la rue - parfois, vous ne pouviez m√™me pas d√©placer les fils sans rompre la connexion quelque part.  Et puis d√©bogage heureux. <br><br>  Chaque fois, assis pour √©crire des fonctionnalit√©s utiles, je me suis heurt√© au fait qu'une autre partie du syst√®me a cess√© de fonctionner normalement et a d√ª passer des heures √† d√©boguer quelque chose de compl√®tement ind√©pendant.  Ainsi, par exemple, le composant le plus important du syst√®me - le r√©cepteur GPS - s'est finalement av√©r√© √™tre le moins d√©velopp√©, car  J'ai d√ª me lancer dans le d√©bogage USB, les cartes SD, la configuration des biblioth√®ques, etc. <br><br>  Enfin, je m'en suis lass√© et j'ai d√©cid√© de faire ma planche de d√©bogage - ce sera le sujet de l'article d'aujourd'hui.  Les objectifs que je me suis fix√©s dans cette partie du projet √©taient les suivants: <br><br><ul><li>  Cr√©er une carte de d√©bogage qui n'aura pas de probl√®mes avec les composants sans contact </li><li>  D√©cider des principales solutions techniques et sch√©matiques </li><li>  D√©cidez grossi√®rement des composants que j'utiliserai ensuite </li><li>  D√©cidez grossi√®rement de la disposition et du corps </li><li>  Le circuit doit √™tre suffisamment g√©n√©ral pour pouvoir exp√©rimenter diff√©rents composants et leurs modes </li></ul><br>  Et bien que le but ultime soit un appareil √† batterie compact, aujourd'hui je ne ferai pas des choses comme <br><br><ul><li>  modes de puissance de r√©glage fin </li><li>  r√©glage de la consommation </li><li>  modes de sommeil </li></ul><br><br>  Je traiterai du param√®tre de consommation lorsque la carte et le code principal seront pr√™ts.  Soit dit en passant, le code d'aujourd'hui ne le sera pas non plus, mais je reviendrai certainement sur cette question car il y aura suffisamment de mat√©riel int√©ressant. <br><br><h2>  Composants </h2><br>  Commen√ßons par les composants et les p√©riph√©riques.  En cours de route, nous allons estimer le nombre de pattes du microcontr√¥leur qui seront n√©cessaires pour connecter ce zoo, ainsi que les param√®tres de puissance.  Parce que  c'est un projet de loisir que j'ai choisi des composants de ce que je peux vraiment acheter dans les magasins / ebay / ali, et aussi de ce qui peut √™tre soud√© √† la maison (enfin, aussi de ce qui √©tait d√©j√† dans mon stock personnel).  Certains microcircuits sp√©cifiques pourraient peut-√™tre mieux r√©soudre le probl√®me, mais la question de l'abordabilit√© et du prix est importante pour moi. <br><br><ul><li>  Le composant principal d'un enregistreur GPS, bien s√ªr, sera un <b>r√©cepteur GPS</b> .  Dans mon cas, c'est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Beitian BN-880</a> assez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tromp√©</a> bas√© sur la puce UBlox M8N.  La boussole de la puce HMC5883L est √©galement int√©gr√©e au module. <br><br>  Connexion: 2 broches UART pour GPS et 2 broches I2C pour boussole <br>  Alimentation: √† partir de 2,7 V <br>  Consommation: 50mA <br><br><ul><li>  √âgalement command√© un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">module Beitial BN-220</a> .  Il n'a pas de boussole, mais l'antenne est plus compacte (20x20mm contre 30x30).  La v√©rit√© n'est pas encore claire sur la fa√ßon dont cela affectera la qualit√© de la r√©ception.  Besoin de tester.  Mais, √† en juger par la fiche technique, ce module peut fonctionner √† partir de 1,4 V, ce qui devrait avoir un effet positif sur la dur√©e de fonctionnement de l'appareil. </li><li>  Ici, en fait, tout est en quelque sorte boueux.  Il semble que le BN-880 est bas√© sur l'UBlox M8N, tandis que le BN-220 est bas√© sur l'U-blox M8030-KT.  Mais dans certaines sources, il glisse que cela semble √™tre la m√™me chose.  Plus pr√©cis√©ment, le M8N est un module et le M8030-KT est un chipset √† l'int√©rieur.  Je suis pr√©occup√© par le probl√®me d'alimentation dans cette confusion - le M8N est annonc√© √† partir de 2,7 V, tandis que le M8030-KT est √† partir de 1,4 V. </li><li>  Comme alternative, j'ai √©galement le module <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.aliexpress.com/item/1PC-SIM868-GSM-GPRS-Bluetooth-GNSS-SMS-GSM-Module-Instead-of-SIM808-SIM908/32821272639.html%3Fspm%3Da2g0s.9042311.0.0.27424c4dTkhPkq)%2520(%25D0%25BE%25D1%2582%25D0%25BB%25D0%25B0%25D0%25B4%25D0%25BE%25D1%2587%25D0%25BD%25D0%25B0%25D1%258F%2520%25D0%25BF%25D0%25BB%25D0%25B0%25D1%2582%25D0%25B0%2520">SIM868 qui tra√Æne</a> .  dans lequel en plus du GPS il y a aussi un module GSM / GPRS et Bluetooth.  Alors qu'il fait peur avec sa ruse et sa complexit√© de connexion.  Vous devrez d'abord jouer avec le tableau de d√©bogage. </li></ul></li><li>  La principale diff√©rence entre l'appareil et ¬´juste une bo√Æte noire¬ª est la pr√©sence d'un <b>√©cran</b> .  Dans les premiers prototypes, j'ai connect√© l'√©cran via I2C, mais la charge du bus √©tait d'environ 25%.  Mais le point n'est m√™me pas dans le rapport en pourcentage, mais dans le fait que le transfert du tampon d'√©cran prend environ 25 ms, pendant lesquels il est impossible de communiquer avec d'autres appareils sur le bus.  Cela peut √™tre un probl√®me, vous devez donc placer l'√©cran sur un bus I2C s√©par√© ou envisager de vous connecter via SPI <br><br>  Connexion: 2 fils I2C ou 3 fils SPI (affichage en √©criture seule, donc la ligne MISO n'est pas utilis√©e, mais un signal de donn√©es / commande distinct est utilis√©) <br>  Alimentation: 3V <br>  Consommation: 25mA <br></li><li>  Pour contr√¥ler l'appareil, j'utiliserai <b>2 boutons</b> qui occupent respectivement 2 pieds du processeur <br></li><li>  Dans l'appareil d'origine (Holux M241, √† partir duquel j'ai initialement copi√© la fonctionnalit√©), il √©tait impossible de regarder la piste √† un moment arbitraire.  Il √©tait n√©cessaire de connecter l'appareil √† l'ordinateur et de fusionner les donn√©es avec un programme sp√©cial.  Il me semble que la possibilit√© de regarder une piste sur un t√©l√©phone mobile ou une tablette √† tout moment sera tr√®s populaire.  Pour cela, j'ai achet√© un module <b>Bluetooth</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HM-13</a> .  Ce module est s√©lectionn√© car il a SPP en plus de BLE. <br><br>  Connexion: 2 fils UART, 1 fil d'√©tat (connect√© / non connect√©) <br>  Alimentation: 2,5 V - 3,9 V <br>  Consommation: 50mA (bien que le chiffre 13mA soit juste √† c√¥t√© de la fiche technique. C'est peut-√™tre la valeur maximale et moyenne) <br></li><li>  Comme on m'a dit, cela n'a aucun sens de garder le r√©cepteur allum√© si vous vous asseyez pour vous reposer ou si vous √™tes all√© d√Æner dans un caf√©.  Par cons√©quent, j'ai d√©cid√© d'ajouter l' <b>acc√©l√©rom√®tre</b> MMA8452 et de l'utiliser pour d√©terminer si l'appareil est au repos ou si nous nous d√©pla√ßons quelque part. <br><br>  Connexion: 2 fils I2C, 1 fil pour interruption <br>  Alimentation de 2V √† 3,6V avec une consommation microscopique <br></li><li>  La trace GPS sera enregistr√©e sur la <b>carte SD</b> .  J'ai d√©j√† essay√© d'utiliser la carte en mode SPI et c'est, pour le dire doucement, lent.  Surtout sur le disque.  Mode correct pour carte SD - SDIO <br><br>  Connexion: 6 fils <br>  Alimentation: √† partir de 1,8 V <br>  La consommation est inconnue, mais je pense que pas plus de 20mA <br></li><li>  Pour √©conomiser de l'√©nergie, il est logique de couper l'alimentation des appareils qui ne sont pas actuellement utilis√©s.  Donc, pr√®s de chaque consommateur, je vais mettre un <b>transistor</b> , que je contr√¥lerai un signal s√©par√© du microcontr√¥leur <br><br>  Connexion: 5 signaux, un pied par consommateur (GPS, Bluetooth, acc√©l√©rom√®tre, carte SD, √©cran) <br><br>  UPD bas√© sur les commentaires.  La d√©sactivation de l'acc√©l√©rom√®tre n'a pas de sens - elle a d√©j√† une consommation d'un centime.  Certains appareils fonctionneront probablement toujours (par exemple, une carte SD) - √† l'avenir, je pourrai supprimer ces transistors.  Certains appareils (comme le GPS) sont capables de se d√©connecter sur commande de l'interface.  Si, selon les r√©sultats du test, cette partie fonctionne bien - je refuserai √©galement un transistor externe.  En attendant, je fais le prix total maximum possible, que ces transistors soient tous.  De plus, je n'ai pas encore d√©cid√© de la p√©riph√©rie. </li><li>  <b>Une LED bicolore</b> pour l'affichage de l'√©tat (que diriez-vous sans LED clignotante?).  Il serait possible de mettre une tricolore, mais pour l'instant je ne vois pas la n√©cessit√©. <br><br>  Connexion: 2 broches <br>  Consommation: 10mA <br></li><li>  En plus de Bluetooth, un m√©canisme plus classique de fusion des pistes sera impl√©ment√© - via <b>USB</b> .  Pour cela, 4 lignes seront impliqu√©es - une paire diff√©rentielle pour les donn√©es, 1 broche pour d√©tecter que l'appareil est branch√© sur USB, et une autre broche pour la connexion logique (pourquoi j'ai besoin de ces 2 broches, je d√©crirai ci-dessous) <br></li><li>  L'app√©tit vient en mangeant.  Depuis que j'ai commenc√© √† tout pousser dans l'appareil de mes r√™ves, pourquoi ne pas ajouter un <b>tweeter</b> ?  Eh bien, ou un <b>moteur √† vibration</b> .  Je n'ai pas encore trouv√© de cas d'utilisation. <br><br>  Connexion: 1 fil <br></li><li>  L'appareil devra toujours √™tre mis sous tension.  Alors que la puce PT1502 me regarde comme un chargeur de batterie au lithium et <b>un contr√¥leur de puissance</b> .  Pour communiquer avec le microcircuit, vous devrez utiliser 2 fils: l'un pour la gestion de l'alimentation, l'autre pour un signal de batterie d√©charg√©e.  Par souci d'int√©r√™t, il sera possible de mesurer la tension de la batterie en utilisant une autre ligne. <br></li><li>  Bien s√ªr, la charge d'une batterie au lithium est incorrecte pour mesurer sur la base de la tension.  Par cons√©quent, j'ai ajout√© une <b>puce</b> sp√©ciale de <b>wattm√®tre INA219</b> <br><br>  Tension d'alimentation: 3-5V, recommande 3,3V <br>  Connexion: 2 fils I2C <br><br>  Comme on le verra ci-dessous, une tension d'alimentation de 3 V cr√©e un certain inconfort dans la connexion.  Je pr√©f√©rerais que la contre-puce soit aliment√©e √† partir de 2,7 V ou moins.  Mais apr√®s √™tre pass√© par plusieurs options bas√©es sur le prix / bo√Ætier / disponibilit√©, je n'ai toujours rien trouv√© √† 2,7V.  Je serai reconnaissant de l'aide. <br></li><li>  Il ne reste plus qu'√† fournir une interface de d√©bogage <b>SWD</b> (3 fils) et un <b>UART de d√©bogage</b> (2 fils de plus) <br></li></ul><br>  J'ai toujours √©t√© int√©ress√© par la question de savoir pourquoi des contr√¥leurs avec un grand nombre de ports √©taient n√©cessaires, et j'ai facilement compt√© 39 pattes n√©cessaires pour ma fonctionnalit√©.  Et cela sans compter le quartz, la r√©initialisation et la puissance.  Et il y a des id√©es sur ce qu'il faut faire avec une douzaine d'autres (par exemple, l'√©cran pourrait √™tre connect√© via une interface parall√®le Intel 8080 ou Motorola 6800). <br><br>  Vous pouvez, bien s√ªr, visser les ports externes I2C pour r√©duire le nombre de jambes utilis√©es.  Mais d'une part, ce sont des composants suppl√©mentaires sur la carte, d'autre part, la partie logicielle devient beaucoup plus compliqu√©e, et troisi√®mement, les petits microcontr√¥leurs ont encore peu de m√©moire, et l√† o√π il y a assez de m√©moire, il y a aussi assez de ports.  Je ne vois donc aucune raison de tout compliquer - qu'il y ait 39 lignes. <br><br><h2>  La nutrition </h2><br>  Avec l'alimentation, tout n'est pas si clair.  Vous pouvez probablement alimenter tous les appareils √† partir de 3,3 V et vous calmer.  Mais nous allons n√©anmoins fabriquer un appareil mobile, ce qui signifie que nous devons penser √† √©conomiser de l'√©nergie.  Vous devez donc essayer de choisir une tension d'alimentation plus petite.  Ci-dessous, je vais estimer quel type d'√©conomies vous pouvez essayer de r√©aliser. <br><br>  Voici les donn√©es de tous les appareils de la plaque - sous cette forme, il est plus pratique de choisir le domaine d'alimentation auquel connecter tel ou tel appareil. <br><br><div class="scrollable-table"><table><tbody><tr><td>  <b>P√©riph√©rique</b> </td><td>  <b>Gamme de puissance</b> </td><td>  <b>Domaine de puissance</b> </td><td>  <b>la communication</b> </td></tr><tr><td>  CPU </td><td>  2 - 3,6 V </td><td>  2V </td></tr><tr><td>  Acc√©l√©rom√®tre </td><td>  2 - 3,6 V </td><td>  2V </td><td>  I2C </td></tr><tr><td>  Carte SD </td><td>  1,8 V ou 3,6 V </td><td>  2V </td><td>  SDIO </td></tr><tr><td>  Affichage </td><td>  1,65 - 3,3 V <br>  ou 3 - 5V </td><td>  2V </td><td>  I2C ou SPI </td></tr><tr><td>  GPS </td><td>  2,7 - 5,5 V <br>  ou √† partir de 1,4 V </td><td>  2,7 V </td><td>  UART </td></tr><tr><td>  Bluetooth </td><td>  2,5 - 3,9 V </td><td>  2,7 V </td><td>  UART </td></tr><tr><td>  Compteur de puissance (INA219) </td><td>  3 - 5,5 V </td><td>  3v </td><td>  I2C </td></tr><tr><td>  Buzzer </td><td>  3V - 5V </td><td>  Vbat </td></tr></tbody></table></div><br>  De la plaque, il est facile de voir que certains appareils peuvent fonctionner √† des tensions suffisamment faibles (√† partir de 1,8 V).  D'autres peuvent fonctionner confortablement √† partir de 2,7 V.  Enfin, les appareils restants en dessous de 3V ne peuvent pas fonctionner.  Le squeaker, pour de bon, a g√©n√©ralement besoin de 5V, mais pour moi, il sera aliment√© par la tension la plus √©lev√©e - de la batterie, peu importe combien elle est. <br><br>  Avec la puissance de l'affichage n'est pas encore pleinement compris.  Dans la description des modules d'affichage avec ali, la plage est de 3 √† 5 V, tandis que dans la fiche technique du contr√¥leur matriciel SSD1309, la plage est de 1,65 √† 3,3 V.  Je suppose que 3V est n√©cessaire pour faire pivoter le convertisseur boost sur la carte du module d'affichage, tandis que 1,65V est suffisant pour la logique.  Comme on le verra lors des discussions sur la disposition, il est logique d'abandonner le module d'affichage et de connecter directement l'√©cran, ce qui alimentera l'affichage √† partir du domaine 2B. <br><br>  J'ai √† peu pr√®s le m√™me raisonnement sur le GPS - diff√©rentes sources indiquent des tensions d'alimentation diff√©rentes.  Jusqu'√† pr√©sent, je ne sais pas quel module j'utiliserai √† la fin, alors laissez le r√©cepteur tra√Æner dans le domaine 2.7V. <br><br>  Avec une carte SD, ce n'est pas clair du tout.  La sp√©cification dit obscur√©ment qu'en g√©n√©ral, la carte doit √™tre aliment√©e √† 3,3 V, mais les cartes modernes sont suffisamment intelligentes et peuvent comprendre qu'elles sont coinc√©es dans un appareil basse tension et peuvent passer √† une alimentation de 1,8 V.  Mais le m√©canisme de choix des aliments n'est pas tr√®s clair.  Je vais alimenter la carte √† partir de 2B et voir ce qui se passe.  Cela ne fonctionnera pas - cela fonctionnera √† partir de 3V. <br><br>  Ainsi, 4 bus √©lectriques se dessinent - 2V, 2,7V, 3V et une batterie.  Je voudrais mettre tous les consommateurs qui mangent et travaillent constamment (et c'est le contr√¥leur et le GPS) sur le bus √† tension la plus basse, mais pour le moment je n'ai pas encore d√©cid√© du module GPS (et donc de son alimentation - 2 ou 2,7V), ce qui veut dire qu'il sera n√©cessaire une sorte de solution universelle.  J'essaierai de s√©parer la carte pour qu'il soit facile d'appliquer l'une ou l'autre tension. <br><br>  D'o√π vous vient autant de stress diff√©rents?  M√™me au d√©but du projet, j'ai regard√© le microcircuit PT1502 et j'ai m√™me <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©ussi √† l'essayer dans un autre projet</a> .  En plus du chargeur pour la batterie au lithium, ce microcircuit poss√®de jusqu'√† 3 sources d'alimentation - une impulsion et 2 interrupteurs lin√©aires.  Ici, cependant, la tension n'est pas r√©gul√©e sur l'un d'eux et est de 3V - je vais essayer d'alimenter l'INA219 √† partir de celui-ci.  Les 2 sources d'alimentation restantes ne sont pas un probl√®me, car  l√†, vous pouvez choisir la tension. <br><br>  L'estimation de la consommation n'est pas tr√®s r√©ussie.  La consommation de pointe est indiqu√©e dans les fiches techniques - c'est suffisant pour calculer la puissance des transistors cl√©s, mais pas assez pour estimer la capacit√© de batterie requise.  Donc pour l'instant, je vais s√©lectionner la batterie en fonction de l'espace disponible dans le bo√Ætier, et l√† je vais d√©j√† mesurer la consommation r√©elle. <br><br>  La question peut se poser, mais comment faire correspondre les appareils avec diff√©rentes tensions de fonctionnement?  Faisons les choses correctement. <br><br><ul><li>  Toutes les jambes de communication des microcontr√¥leurs sont marqu√©es comme tol√©rantes √† cinq volts (√† l'exception de UART2 sur les jambes de PA2 / PA3), ce qui signifie que s'il appara√Æt √† 3,3 V du dispositif √† tension la plus √©lev√©e, rien de mauvais ne se produira. </li><li>  L'acc√©l√©rom√®tre, bien qu'aliment√© en 2V, peut potentiellement √™tre connect√© en parall√®le avec des dispositifs haute tension sur le bus.  Ce probl√®me est facilement r√©solu - avec le microcircuit MMA8452Q, vous pouvez alimenter s√©par√©ment les c√¢bles de communication √† partir d'une autre alimentation (via le dispositif ¬´haute tension¬ª sur le bus lui-m√™me) </li><li>  J'essaierai d'alimenter la carte SD √† partir de la m√™me tension que le microcontr√¥leur, ce qui signifie que je n'ai besoin de rien coordonner. </li><li>  Le GPS et le Bluetooth devraient consommer la ¬´basse¬ª tension du microcontr√¥leur sans aucun probl√®me.  Il en va de m√™me pour les autres appareils ¬´haute tension¬ª </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfin, quelques mots sur les raisons pour lesquelles je me bats pour abaisser la tension d'alimentation. </font><font style="vertical-align: inherit;">Une puce dans un convertisseur DC-DC puls√©, qui peut √©changer des volts contre des amp√®res (si vous ne tenez pas compte des pertes du convertisseur lui-m√™me, bien s√ªr). </font><font style="vertical-align: inherit;">Pour √™tre plus pr√©cis, √©changez une tension plus √©lev√©e avec un courant plus faible contre une tension plus basse et un courant plus √©lev√©. </font><font style="vertical-align: inherit;">Dans ce cas, nous sommes plus int√©ress√©s par le raisonnement inverse - si vous alimentez une charge basse tension via DC-DC, la consommation de courant de toute cette structure avec le convertisseur sera inf√©rieure √† la consommation de courant de la charge elle-m√™me. </font><font style="vertical-align: inherit;">Eh bien, puisque la capacit√© de la batterie est mesur√©e en mAh, la r√©duction de la consommation de courant augmentera la dur√©e de vie de la batterie.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comte?</font></font></b> <div class="spoiler_text">   ,        90%,        DC-DC        .  .      ,      DC-DC   . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a> .   900    4.1  3.5 (      ).  DC-DC    90% (   ).    100.            . <br><br> ,      900  100  9 .          ‚Äî 9.3     3.3, 11.4   2.7,   15    2. ,    ,    ,        . <br></div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Microcontr√¥leur </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai abord√© la question du choix d'un microcontr√¥leur de mani√®re r√©fl√©chie - j'ai longtemps jou√© avec le configurateur, en pesant les avantages et les inconv√©nients de chacune des options. J'ai vraiment aim√© les microcontr√¥leurs STM32, donc je ne vois pas l'int√©r√™t de regarder dans la direction d'autres contr√¥leurs sans besoin particulier. De plus, dans la gamme STM32, il existe des contr√¥leurs pour tous les go√ªts et pour toutes les p√©riph√©ries. L'exp√©rience acquise dans les √©tapes pr√©c√©dentes de mon projet nous permet d'affiner le choix du contr√¥leur en fonction de la liste des p√©riph√©riques, des liaisons logicielles d√©j√† √©crites, ainsi que des fonctionnalit√©s que j'aimerais impl√©menter √† l'avenir.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Donc, il est assez √©vident que 20 Ko de m√©moire de mon STM32F103CB est vraiment petit - il n'y a pas assez de tampons de taille d√©cente pour communiquer avec une carte SD et USB. </font><font style="vertical-align: inherit;">Je n'ai m√™me pas commenc√© √† mettre en ≈ìuvre la plupart des fonctionnalit√©s pr√©vues, mais cela a d√©j√† pris plus de 19 Ko. </font><font style="vertical-align: inherit;">Mais avec le pouvoir de traitement, il s'est av√©r√© que ce n'est pas particuli√®rement n√©cessaire. </font><font style="vertical-align: inherit;">Si toutes les communications avec les p√©riph√©riques sont transf√©r√©es dans DMA, il ne reste que quelques pour cent sur la part du processeur central. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ayant estim√© la liste de ce dont j'ai besoin √† partir du contr√¥leur, j'ai calcul√© ce qui suit:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; = 128 ko flash (actuellement environ 50 ko est utilis√©) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; = 40 ko de m√©moire (maintenant 19 ko sont pris) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; = 40 pieds GPIO (voir le raisonnement ci-dessus) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; = 40MHz (vous n'avez pas besoin de beaucoup, l'essentiel est d'avoir moins de consommation) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DMA (j'ai vraiment aim√©) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; = 2x I2C,&gt; = 3x UART,&gt; = 1 SPI </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SDIO (lecteur flash via SPI est tr√®s lent) </font></font></li><li>  USB Full Speed,  High Speed </li><li>  (      ) </li><li>       LCD  (         FSMC) </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les microcontr√¥leurs STMicroelectornics sont √† peine un centime - pour tous les go√ªts, toutes les couleurs et tous les portefeuilles. Au d√©but, j'ai essay√© de choisir un contr√¥leur pour partir de la s√©rie. Les r√®gles L0 et F0 sont trop faibles et pas assez de m√©moire, S7 et H7, au contraire, sont trop riches en fonctionnalit√©s, il n'y a pas de SDIO en L4 (UPD: SDIO est, ils ne l'ont tout simplement pas mentionn√© sur la page de titre de la s√©rie). Parmi le reste de la s√©rie, vous pouvez choisir quelque chose en fonction de mes besoins, car je n'ai pas d'exigences particuli√®res. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La s√©rie STM32WB impressionne par la pr√©sence de Bluetooth, mais le bo√Ætier VFQFPN68 refroidit quelque peu le d√©sir de l'utiliser dans des projets de loisirs. Et je n'ai pas trouv√© de tels contr√¥leurs dans le commerce de d√©tail.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je visais le bo√Ætier LQFP64 - suffisant en nombre de pattes, mais pas tr√®s grand en m√™me temps et pouvant √™tre soud√© √† la maison. C'est bien qu'il y ait un configurateur CubeMX o√π vous pouvez s√©lectionner ce dont vous avez besoin avec des filtres. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai opt√© pour le contr√¥leur STM32F103RB pour trois raisons. Tout d‚Äôabord, j‚Äôai d√©j√† bien √©tudi√© la s√©rie F103 avec la carte Blue Pill. En g√©n√©ral, le contr√¥leur STM32F103CB me convenait parfaitement, seule la m√©moire n'√©tait pas suffisante. Deuxi√®mement, j'ai d√©j√† un chargeur de d√©marrage et un code de bas niveau pour ce contr√¥leur, tandis que d'autres devront √™tre refaits. Et troisi√®mement, il y a environ un an, j'√©tais d√©j√† ravi d'acheter 3 pi√®ces STM32F103RB. Ensuite, je n'ai pas fait d'√©tude d√©taill√©e des contr√¥leurs disponibles, mais j'ai simplement choisi un contr√¥leur plus √©pais de la gamme F103. Ne le jetez pas maintenant :)</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme je l'ai d√©j√† not√©, je n'ai pas d'exigences p√©riph√©riques ou de performances particuli√®res. </font><font style="vertical-align: inherit;">Mais si je rencontre quelque chose, alors j'ai √† l'esprit que j'ai d√©j√† des contr√¥leurs de la ligne F4 (si quelque chose de plus puissant est n√©cessaire), ou L152RD, si vous devez d√©cider quelque chose avec la consommation (UPD: j'ai aussi regard√© L433RC). </font><font style="vertical-align: inherit;">Ce qui pla√Æt, avec STM32, presque tous les contr√¥leurs broche √† broche sont compatibles, et F4 et L1 / L4 peuvent √™tre soud√©s presque sans alt√©rer la carte. </font><font style="vertical-align: inherit;">Vous pouvez m√™me collecter et comparer la consommation avec diff√©rents MK.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quelques mots sur le corps et la disposition </font></font></h2><br>  Nous avons d√©cid√© des d√©tails.  Il est temps de dessiner un diagramme, puis de tracer le tableau, puis d'essayer de l'adapter au bo√Ætier.  Ou pas?  Pour l'admettre, je suis d'abord all√© dans cette direction, mais je suis ensuite arriv√© √† la conclusion que tout doit √™tre fait dans l'ordre inverse.  Eh bien, ou du moins en m√™me temps. <br><br>  J'aimerais obtenir un appareil compact.  Et pour cela, vous devez comprendre avec pr√©cision la taille de l'espace disponible, √† son tour, pour comprendre o√π placer la carte et sa taille, quelle taille de batterie peut s'adapter, o√π placer les boutons, l'√©cran, le connecteur USB et d'autres composants externes, ainsi que de savoir comment r√©parer les composants et vous pouvez s'il est commode de poser des fils entre eux.  Il est tout simplement inutile de commencer √† √©lever un tableau sans comprendre toutes ces choses.  Il s'av√®re donc que vous devez d'abord traiter le corps et la disposition, puis passer au circuit. <br><br>  De plus, dans le processus de dessin du bo√Ætier, j'ai d√ª r√©viser plusieurs fois la s√©lection des composants.  Donc, au d√©part, je pensais utiliser un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©cran bon march√© 128x64 0,96 ‚Äù</a> (zone de travail 21,7 x 11,2 mm), mais cet √©cran avait l'air compl√®tement microscopique sur le fond d'un bo√Ætier beaucoup plus grand.  Ensuite, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un √©cran de 1,3 "a</a> √©t√© command√© (zone de travail 29,4 x 14,7 mm), mais cela ne s'est pas beaucoup am√©lior√©.  Ensuite, j'ai eu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un √©cran de 1,54 ‚Äù</a> (35 x 17,5 mm) - il semble plus ou moins normal avec lui.  C'est actuellement la principale option de travail. <br><br>  Selon les estimations, un √©cran de 1,8 "-2" aurait √©t√© mieux, mais ceux-ci sont d√©j√† disponibles en couleur et en r√©solution plus √©lev√©e, et en cons√©quence le tampon d'√©cran sera suffisamment grand pour mon contr√¥leur (35 Ko au lieu de 1 Ko).  Eh bien, pousser de grands √©crans dans le bo√Ætier peut √©galement √™tre un probl√®me, car  les supports d'atterrissage pour ces modules sont nettement plus grands que la zone active de l'√©cran. <br><br>  Pendant que j'√©crivais cet article sur ali, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des √©crans monochromes de 2,42 pouces</a> sont apparus avec la m√™me r√©solution (128x64) et exactement la m√™me reliure que 1,54 pouces.  J'en ai command√© un pour mon test - il y a une chance de le coller dans mon √©tui sans augmentation significative de l'appareil. <br><br>  Un autre point important au stade des travaux sur le bo√Ætier √©tait la compr√©hension que le module d'affichage achet√© prend trop de place et r√©duit consid√©rablement l'espace pour la carte principale.  Par cons√©quent, j'ai d√©cid√© d'abandonner le module d'affichage termin√© et de placer √† la place l'affichage et sa liaison sur ma carte.  Le nombre de pi√®ces dans le circuit a l√©g√®rement augment√©, mais la conception dans son ensemble a √©t√© consid√©rablement simplifi√©e et est devenue plus compacte. <br><br>  J'ai des r√©flexions similaires sur le sujet du module GPS.  Ce n'est pas si grand, mais peu importe comment il le met ou il interf√®re, ou l'antenne est ferm√©e par une batterie.  Il peut √™tre judicieux de placer le rembourrage du module sur votre carte et de placer l'antenne ailleurs. <br><br>  Les travaux sur le bo√Ætier ont √©galement permis de d√©terminer la taille et la capacit√© de la batterie.  Dans le volume disponible, une batterie 900mAh vient d'√™tre trouv√©e - nous allons nous concentrer sur elle.  J'aimerais que mon appareil fonctionne sur une batterie de 15 √† 20 heures, ce qui signifie que la consommation devrait √™tre au niveau de 45 √† 60 mA. <br><br>  Pour le moment, je ne peux pas dire que le travail sur la coque est termin√©.  Premi√®rement, la question du choix de certains composants (√©cran, GPS) reste ouverte.  Deuxi√®mement, il n'est pas clair si mon circuit d√©marrera en principe ou s'il faudra changer radicalement quoi que ce soit.  Et troisi√®mement, la carte s'av√®re trop compacte - je ne suis pas s√ªr de pouvoir la dissoudre, la souder et la d√©boguer.  Par cons√©quent, dans cet article, je me concentrerai toujours sur les probl√®mes de circuits, je passerai √† des √©tapes plus simples et plus compr√©hensibles, et je parlerai du cas la prochaine fois.  Ici, vous avez quelques rendus et photos pour la graine. <br><br><img src="https://habrastorage.org/webt/4j/ff/l-/4jffl-arvuselp1d93s5muqazqy.png"><br><br><img src="https://habrastorage.org/webt/o2/a9/ve/o2a9vejujirpcxe634dzikwqc0e.png"><br><br><img src="https://habrastorage.org/webt/a9/hu/ka/a9huka9xfxi-g0wegdzhb8ezonm.jpeg"><br><br><img src="https://habrastorage.org/webt/az/nl/b2/aznlb21azpqtsfgoaim0occrvgc.jpeg"><br><br><h2>  Sch√©ma </h2><br>  Vous pouvez maintenant faire de l'√©lectronique.  Je d√©crirai les solutions de circuits avec suffisamment de d√©tails.  Tout d'abord, pour les m√™mes nouveaux venus en √©lectronique que moi, ainsi qu'un synopsis pour moi.  Les ing√©nieurs √©lectroniques exp√©riment√©s peuvent parcourir les circuits et revenir √† la section suivante. <br><br>  Commen√ßons par la nutrition. <br><br>  L'appareil sera aliment√© par une batterie au lithium, ce qui signifie que vous avez besoin d'un contr√¥leur de charge.  En outre, certains composants ont une limite de tension sup√©rieure d'environ 3,6 V, tandis qu'une batterie peut facilement se retrouver avec plus de 4 V.  Vous avez donc besoin d'une source d'alimentation abaisseur.  Comme nous l'avons d√©j√† d√©couvert, nous aurons besoin de plusieurs contraintes diff√©rentes. <br><br>  J'ai d√©j√† mentionn√© que j'utiliserai la puce PT1502.  √áa va bien, car  met en ≈ìuvre un contr√¥leur de charge, 3 sources d'alimentation, ainsi qu'un circuit de dispositif de commutation de bouton.  Le microcircuit contient plusieurs blocs fonctionnels, que j'ai divis√©s dans le diagramme pour plus de clart√©.  Le circuit lui-m√™me est un circuit de fiche technique l√©g√®rement r√©vis√©.  Voici le contr√¥leur de charge de la batterie au lithium <br><br><img src="https://habrastorage.org/webt/7y/p7/sk/7yp7skuez7vcdpdzr33f6rhtfk4.png"><br><br>  La r√©sistance R3 r√®gle le courant de charge.  Par d√©faut, cela correspond √† 470mA.  Selon les r√©sultats du test, je r√©duirai peut-√™tre la valeur de cette r√©sistance √† 510 Ohms, ce qui donnera un courant de charge d'environ 900mA (1C). <br><br>  Le contr√¥leur peut signaler le mode de charge actuel avec le pied CHG_STAT.  De plus, il sait comment donner des signaux jusqu'√† 3 - il est en charge, il ne se charge pas et il a d√©j√† √©t√© charg√©, mais il est toujours connect√© √† la prise.  Dans la premi√®re version, le transistor interne presse le pied vers le sol et cela peut √™tre facilement reconnu par le contr√¥leur.  Dans le deuxi√®me mode de r√©alisation, le transistor est compl√®tement ferm√© et la jambe passe dans un √©tat de haute imp√©dance.  En utilisant une mise sous tension, un tel signal est √©galement facile √† lire par le contr√¥leur. <br><br>  Mais avec le troisi√®me √©tat n'est pas si simple.  L√†, le transistor est entrouvert et un courant de 20 ŒºA le traverse.  Afin d'envisager une telle condition, j'ai √©t√© invit√© √† choisir un ascenseur afin que la moiti√© environ de la nutrition soit sur ma jambe.  Il sera alors possible de d√©tecter facilement un tel √©tat √† l'aide de l'ADC.  En utilisant la loi d'Ohm, nous obtenons R5 = 1V / 20mkA = 50k. <br><br>  Comme je l'ai dit, la puce PT1502 n'est pas seulement un chargeur, mais aussi un contr√¥leur d√©licat pour toute la puissance.  Le microcircuit surveille les tensions dans le circuit et, en utilisant le signal RESET, peut contr√¥ler le processeur principal (ils disent que vous devez toujours d√©marrer t√¥t, la puissance n'est pas encore stabilis√©e). <br><br><img src="https://habrastorage.org/webt/21/z3/f1/21z3f1tkkpvqsph462qukz0_anu.png"><br><br>  En outre, le microcircuit peut d√©marrer l'appareil au toucher d'un bouton (BTN1) et √©galement, sur un signal du microcontr√¥leur (PWR_HOLD), terminer l'op√©ration et couper l'alimentation.  Eh bien, pour signaler au processeur que la batterie est √† court de signal BAT_LOW. <br><br>  Et c'est la principale source d'alimentation. <br><br><img src="https://habrastorage.org/webt/nb/5x/tc/nb5xtc2txxl98wz1pfwgmzsr49u.png"><br><br>  La tension de sortie est d√©finie par la tension √† la borne BUCKFB et est r√©gl√©e sur 2 V avec la batterie.  Mais avec une alimentation √† deux volts, un probl√®me a √©t√© d√©couvert - l'USB ne fonctionnera pas.  C'est-√†-dire  la batterie sera charg√©e, mais elle ne pourra pas transmettre de donn√©es - le microcontr√¥leur ne peut tout simplement pas fournir de signaux √† un bus USB d'amplitude suffisante.  Datashit recommande une tension d'au moins 2,7 V, meilleure que 3,3 V. <br><br>  Afin de ne pas bloquer une autre source d'alimentation et de savoir comment basculer entre elles, j'ai d√©cid√© de simplement ajuster le rapport du diviseur R1 / R4 + R7.  Avec cette inclusion, l'impulsion fonctionne en continu.  D√®s que l'appareil est branch√© sur USB, le transistor s'ouvre et shunte R7.  Le rapport des r√©sistances d'attaque change et nous obtenons 3,16 V en sortie (nous pouvons toujours jouer avec les valeurs nominales et le maintenir jusqu'√† 3,3 V). <br><br>  Le PT1502 dispose √©galement de 2 commandes lin√©aires. <br><br><img src="https://habrastorage.org/webt/1c/s0/tj/1cs0tjf8eerkuske4_dyqithygm.png"><br><br>  Des composants √† faible consommation (INA219) ou de courte dur√©e (bluetooth) seront connect√©s √† ces contr√¥leurs, de sorte que l'efficacit√© de ces sources ne sera pas un probl√®me.  La tension d'alimentation LDO2 peut √™tre r√©gl√©e √† l'aide des signaux LDO2_SETx. <br><br>  Comme j'ai encore des questions ouvertes concernant la tension d'alimentation, j'ai d√©cid√© de s√©parer les cavaliers pour s√©lectionner le mode LDO2_SETx.  De plus, afin de pouvoir mesurer la consommation r√©elle sur le bus correspondant, je connecterai √©galement le cavalier JP1 / JP2 / JP3 au peigne. <br><br>  Pour terminer le sujet des alimentations, nous devons mentionner la puissance de l'√©cran.  J'ai √©crit un peu plus haut que, au nom de la compacit√©, j'ai d√ª abandonner le module d'affichage achet√© et ramasser l'√©cran avec le cerclage sur ma planche.  Cet affichage n√©cessite un convertisseur boost 7-16V sp√©cial.  Id√©alement, cette source peut √™tre activ√©e et d√©sactiv√©e √† l'aide du signal EN.  Le circuit lui-m√™me est copi√© √† partir de la fiche technique du booster, exactement le m√™me est utilis√© dans les modules d'affichage avec ali. <br><br><img src="https://habrastorage.org/webt/oi/bd/zm/oibdzmvkie49fxcjamxcvszh9gw.png"><br><br><div class="spoiler">  <b class="spoiler_title">PT1505</b> <div class="spoiler_text">  Surfer sur Internet √† la recherche d'alternatives √† la puce PT1502, je suis tomb√© sur sa s≈ìur a√Æn√©e - la puce PT1505.  Il s'agit presque du m√™me contr√¥leur de puissance, mais avec une mise √† niveau suppl√©mentaire.  Avec un tel contr√¥leur, il serait possible de r√©duire le nombre d'√©l√©ments sur la carte.  Malheureusement, je n'ai pas trouv√© de puces PT1505 en vente. <br><br>  Au fait, je vous serais reconnaissant si vous connaissez des contr√¥leurs de puissance similaires d'autres fabricants. <br></div></div><br>  Maintenant, parlons un peu de la puissance du microcontr√¥leur.  Le microcircuit est grand et dispose de 6 lignes √©lectriques - 4 pour la partie num√©rique, 1 alimentation analogique et une pour l'horloge.  Selon la fiche technique du STM32F103, sur toutes les lignes √©lectriques (peut-√™tre, √† l'exception de l'horloge), il devrait y avoir un condensateur de 100 nF le long du condensateur, et un plus commun √† 4,7 uF. <br><br>  Mais dans la fiche technique du STM32F4, il est dit que bien que les microcontr√¥leurs soient pratiquement compatibles en termes de sorties, ils ont toujours des sch√©mas d'alimentation quelque peu diff√©rents.  Ainsi, sur les deux bornes, il devrait y avoir des condensateurs de 2,2 mkF entre la borne et la masse (et non pas entre la masse et l'alimentation, comme en F1).  Par cons√©quent, j'ai d√ª consid√©rer les deux options et qu'un microcontr√¥leur sp√©cifique ne soude qu'une partie des condensateurs. <br><br><img src="https://habrastorage.org/webt/vv/ai/a4/vvaia45dk-cjpdj9jrypfecczug.png"><br><br>  Poursuivant le sujet de la nutrition, vous devez trouver un moyen de la mesurer.  Vous pouvez compter sur le signal BAT_LOW et demander √† l'utilisateur de se recroqueviller rapidement si la batterie est faible.  Mais c'est exactement ce que je n'ai pas aim√© dans le Holux M-241 d'origine, car  ce signal est apparu trop tard et √©tait facile √† manquer.  J'ai besoin d'une sorte d'indicateur plus informatif de la puissance de la batterie. <br><br><img src="https://habrastorage.org/webt/2r/6l/0g/2r6l0gd1bdyewq--m8zij_nugxs.png"><br><br>  Au cas o√π, je mets le diviseur le plus ordinaire pour mesurer la tension de la batterie.  Mais dans le cas des batteries au lithium, ce n'est qu'un indicateur informatif et ne doit pas √™tre invoqu√©.  Pour des lectures de batterie plus honn√™tes sur Internet, ils sugg√®rent d'utiliser un ¬´pendentif¬ª. <br><br><img src="https://habrastorage.org/webt/an/3u/nc/an3uncm2tjzd-pu3n6ns8vqnhz0.png"><br><br>  Cette petite micropuce compte la quantit√© d'√©nergie qui l'a travers√©e vers ou depuis la batterie.  Les mesures sont effectu√©es sur le shunt R10.  Les lectures du microcircuit peuvent √™tre lues via I2C.  Le microcircuit est capable de mesurer la tension sur la batterie, le courant traversant la r√©sistance, et √©galement de se multiplier l'un par l'autre.  Malheureusement, elle ne sait pas accumuler la valeur des heures qui se sont √©coul√©es en Watt *, elle devra donc faire un relev√© constant. <br><br>  Passons √† la partie num√©rique.  Le c≈ìur de l'ensemble du syst√®me est le microcontr√¥leur STM32F103RB. <br><br><img src="https://habrastorage.org/webt/hm/ws/ma/hmwsma-hii28gwjrskmvmfsytl4.png"><br><br>  Le cerclage sous forme de deux quartz provient d'autres sch√©mas trouv√©s sur Internet (rev√©rifi√© dans la fiche technique).  Je n'ai pas besoin de d√©marrer √† partir de la RAM, mais parce que le signal BOOT1 a tir√© vers le sol.  BOOT0 peut √™tre s√©lectionn√© avec un cavalier pour d√©marrer √† partir de la m√©moire flash principale ou du chargeur de d√©marrage UART int√©gr√© (par exemple, pour le micrologiciel principal de l'appareil) <br><br>  Vient ensuite la LED. <br><br><img src="https://habrastorage.org/webt/ja/bg/ah/jabgahdeoppmxzipfiqu5mpd9dq.png"><br><br>  √âtant donn√© que la tension d'alimentation principale variera de 2 √† 3,3 V, les LED ne doivent pas y √™tre connect√©es - la luminosit√© et la consommation de courant varieront consid√©rablement.  Par cons√©quent, les LED I seront connect√©es au bus 2,7V, les r√©sistances de limitation de courant sont calcul√©es en cons√©quence.  √âtant donn√© que le microcontr√¥leur ne pourra pas donner plus de 2 V sur son pied lorsqu'il est aliment√© par une batterie, le mode push-pull GPIO ne peut pas √™tre utilis√©.  Drain ouvert uniquement. <br><br>  Il n'y a rien de sp√©cial √† dire sur le bouton de r√©initialisation. <br><br><img src="https://habrastorage.org/webt/6x/eq/is/6xeqise0ghoatscub44uzcykfoq.png"><br><br>  Puisqu'un appareil √† trois volts (INA219) sera assis sur le bus I2C, vous devez √©galement faire des accolades √† trois volts <br><br><img src="https://habrastorage.org/webt/xj/yi/n7/xjyin76yz6g_sg7vo9t2s4eqrms.png"><br><br>  Un connecteur SWD est √©galement standard.  Une diode est n√©cessaire pour commuter l'alimentation entre la batterie et l'alimentation externe du programmateur. <br><br><img src="https://habrastorage.org/webt/vl/s7/pw/vls7pw9grlfznf3gfo1_yglclqw.png"><br><br>  Anticiper les exclamations qu'ils ne font pas cela et qu'une telle connexion ne d√©connecte pas vraiment la batterie.  Oui, il ne s'√©teint pas, mais la diode n'est pas pour √ßa.  Cette chose est n√©cessaire pour pouvoir alimenter l'appareil √† partir du programmateur si la batterie n'est pas connect√©e.  Et s'il est connect√©, laissez-le fonctionner √† partir de lui.  Eh bien, si la batterie est connect√©e, vous devez prot√©ger le programmateur lui-m√™me de 4,2 V sur la batterie. <br><br>  Mais les boutons devraient rester plus en d√©tail. <br><br><img src="https://habrastorage.org/webt/gg/du/gi/ggdugivqqx7iqjimaqwkbsiehru.png"><br><br>  Le fait est que le premier bouton sera non seulement un bouton, mais fonctionnera √©galement comme un commutateur d'appareil - le signal BTN1 est connect√© √† la puce du contr√¥leur d'alimentation PT1502.  Lorsque l'appareil est √©teint, le microcontr√¥leur et les autres consommateurs ne sont pas aliment√©s.  C'est pourquoi le bouton n'est pas connect√© √† l'alimentation (VCC) mais √† la batterie (BAT).  En appuyant sur ce bouton, le PT1502 allumera toutes les sources d'alimentation et d√©marrera le microcontr√¥leur.  Apr√®s cela, le bouton peut fonctionner comme un bouton normal.  Afin de ne pas br√ªler le microcontr√¥leur avec une tension √©lev√©e de la batterie, j'ai construit un petit diviseur de tension qui pilote le signal BTN1 dans les trames n√©cessaires (cependant, c'est possible sans cela - le microcontr√¥leur a des entr√©es tol√©rantes √† 5V) <br><br>  Le deuxi√®me bouton est sans particularit√©.  √Ä l'int√©rieur du processeur, une traction vers le sol sera incluse, et le bouton alimentera une unit√© √† la ligne ... <br><br>  Passez en toute transparence √† la p√©riph√©rie lourde.  USB <br><br><img src="https://habrastorage.org/webt/hj/vn/tg/hjvntgq_-3sjzwjv03t0dqd--gg.png"><br><br>  Le connecteur USB d√©passera de l'appareil et l'√©lectricit√© statique peut y marcher.  Il s'av√®re qu'il existe des microcircuits sp√©ciaux (tels que STF202-22) qui prot√®gent les microcontr√¥leurs des influences externes. <br><br>  Mais quelque chose d'autre est int√©ressant ici.  Une r√©sistance de 1,5 k est cach√©e √† l'int√©rieur de la puce STF202, qui est connect√©e entre la jambe VBUS et la ligne D +.  Cette r√©sistance est n√©cessaire selon la sp√©cification USB - elle indique √† l'h√¥te qu'elle est coinc√©e dans quelque chose.  Dans de nombreux circuits, cette r√©sistance est toujours connect√©e entre l'alimentation et la ligne D +.  D√®s que l'h√¥te voit une telle r√©sistance sur la ligne D +, il commence imm√©diatement √† communiquer avec le p√©riph√©rique.  Ce n'est pas toujours appropri√©, car  Certains appareils peuvent ne pas √™tre imm√©diatement pr√™ts pour la communication. <br><br>  C'est juste mon cas.  Il y a une astuce simple pour cela (espionn√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ).  Vous pouvez activer et d√©sactiver cette r√©sistance √† l'aide d'un transistor: nous voulons la communication - nous activons la r√©sistance, nous voulons simplement √™tre aliment√©s par USB - d√©sactivez-la.  Lorsque vous collez votre t√©l√©phone portable en USB, il demande g√©n√©ralement ¬´que ferons-nous?  Fusion de donn√©es ou simplement facturer? "  - en termes d'√©lectronique, il s'agit simplement de connecter une r√©sistance de pull-up. <br><br>  Mais comment savoir si un appareil est bloqu√© en USB?  Pour ce faire, j'ai fourni le signal USB_PLUGGED, qui est supprim√© du diviseur le plus simple. <br><br><img src="https://habrastorage.org/webt/hx/lr/u5/hxlru5qf7wv13uxeseybbyhhpdi.png"><br><br>  Le 5V de l'USB pourrait √©galement √™tre aliment√© directement au pied du microcontr√¥leur - ils sont toujours tol√©rants au 5V.  Mais que ce soit d√©j√† √† travers le diviseur. <br><br>  Acc√©l√©rom√®tre maintenant <br><br><img src="https://habrastorage.org/webt/-g/t1/5j/-gt15jf_cub3nubnrpsbr5hiusa.png"><br><br>  Le sch√©ma est tir√© d'une fiche technique.  Le module est connect√© via I2C, mais pour signaler au microcontr√¥leur qu'il y a des nouvelles, une ligne d'interruption est √©galement utilis√©e.  De plus, comme l'INA219 √† trois volts est toujours suspendu au m√™me bus I2C, les jambes de communication de l'acc√©l√©rom√®tre sont √©galement aliment√©es par le bus 3B pour coordonner les niveaux. <br><br>  J'ai d√©j√† mentionn√© que j'aimerais √©conomiser de l'√©nergie et √©teindre les appareils inutilis√©s.  Ainsi, la puissance de l'acc√©l√©rom√®tre est activ√©e par le transistor. <br><br>  Au fait, j'ai vraiment aim√© le soi-disant  transistors num√©riques - un transistor complet avec deux r√©sistances.  Cela √©conomise un peu d'espace sur la carte.  Dommage qu‚Äôavec une alimentation √† deux volts, je ne puisse pas prendre un transistor num√©rique avec au moins un courant d√©cent - 20-30 mA maximum.  Des consommateurs plus voraces devaient donc √™tre connect√©s aux MOSFET. <br><br>  Allez-y GPS <br><br><img src="https://habrastorage.org/webt/vr/l-/hm/vrl-hm0a27os6lit3ont256xd1g.png"><br><br>  Le GPS est situ√© sur une carte distincte et est connect√© via un bouclage.  Comme je n'ai pas encore d√©cid√© du module GPS, j'ai fourni 2 alimentations diff√©rentes.  En plus du transistor de puissance c√¥t√© carte processeur, rien de plus int√©ressant. <br><br>  Je vais juste dire quelques mots sur les UART.  Au d√©part, j'avais pr√©vu d'utiliser les 3 - un pour t√©l√©charger le firmware et le d√©bogage, le second pour le GPS et le troisi√®me pour le Bluetooth.  Mais il s'est av√©r√© que UART3 est sur les m√™mes broches que I2C n ¬∞ 2, que j'avais initialement pr√©vu d'utiliser pour l'affichage.  Je devais choisir.  En cons√©quence, je suis arriv√© √† la conclusion que je peux t√©l√©charger le firmware et d√©boguer via le m√™me UART qui est r√©serv√© au GPS (bien s√ªr, le GPS devra √™tre d√©sactiv√©).  Eh bien, si vous devez lancer le GPS lui-m√™me, c'est-√†-dire USB CDC (dans lequel vous pouvez t√©l√©charger des journaux) et SWD.  Un peu plus tard, j'ai abandonn√© l'id√©e d'utiliser I2C n ¬∞ 2, donc UART3 est devenu gratuit, mais au nom de l'√©conomie de batterie, j'ai d√©cid√© de me concentrer sur deux UART. <br><br>  Bluetooth <br><br><img src="https://habrastorage.org/webt/r2/m6/zt/r2m6ztztpabt1_2yprjrdava5nq.png"><br><br>  Bluetooth est connect√© selon le sch√©ma de la fiche technique.  La broche PIO1 peut fonctionner en deux modes.  Dans le premier, une LED y est connect√©e et le module clignote avec cette LED.  Diff√©rents clins d'≈ìil signifient un statut diff√©rent.  Dans un autre mode, cette broche fonctionne comme une broche num√©rique - une lorsque la communication est √©tablie et 0 sinon.  Les modes sont commut√©s par les commandes AT lors de l'initialisation du module. <br><br>  Carte SD <br><br>  Bien que le sch√©ma de connexion de la carte SD soit standard, pour une raison quelconque, cela a √©t√© tr√®s difficile pour moi.  Il existe trop d'options de connexion diff√©rentes sur Internet et il n'est pas si facile de d√©terminer laquelle a raison. <br><br><img src="https://habrastorage.org/webt/9g/mi/xh/9gmixhnhcfhlo0s98wcmfz1dubk.png"><br><br>  Pour la plupart, j'avais des questions dans les bagues.  Parfois, il existe des sch√©mas o√π ils mettent des r√©sistances en 1k.  Certains circuits mettent des r√©sistances de 22 Ohms, apparemment comme protection contre l'√©lectricit√© statique.  N√©anmoins, la majorit√© des circuits n'offrent pas de r√©sistances pass-through, et j'irai probablement dans le m√™me sens.  Je n'aurai pas non plus de statique depuis  Le lecteur flash vivra √† l'int√©rieur du bo√Ætier. <br><br>  Le transistor de puissance, il me semble, ne sera pas non plus demand√©, je pense que la carte fonctionnera toujours - c'est un enregistreur.  Mais puisqu'il s'agit d'un tableau de test, que ce soit.  La m√™me chose √† propos de la bobine - apparemment, cette inclusion dans l'original a √©t√© rendue parano√Øaque, ou la carte a √©t√© utilis√©e dans un environnement avec une faible puissance ou des interf√©rences.  Je pense y souder une r√©sistance nulle et essayer sans bobine. <br><br>  Affichage <br><br>  J'ai eu l'occasion de connecter l'un des modules d'affichage avec ali via SPI et de comparer avec la connexion via I2C.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il n'y a pas eu de difficult√©s particuli√®res et le code n'a d√ª √™tre que l√©g√®rement gaspill√©. Dans le m√™me temps, la vitesse de SPI est d'un ordre de grandeur sup√©rieur √† celle de I2C. Apr√®s avoir ajout√© les donn√©es de la fiche technique sur la consommation (4 mA pour SPI contre 10 mA pour I2C), le besoin de r√©sistances de pull-up pour I2C, j'ai d√©cid√© de connecter l'√©cran via SPI. </font></font><br><br><img src="https://habrastorage.org/webt/zn/zx/yh/znzxyhs4tcmv4fyyhb-hfxzihns.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Malheureusement, le signal BS0 n'est pas √©mis vers la boucle d'affichage, et donc vous ne pouvez pas s√©lectionner le mode SPI 3 fils, vous pouvez uniquement SPI 4 fils. La diff√©rence dans la ligne D / C suppl√©mentaire (donn√©es / commande), qui dans le cas du mode 3 fils est transmise par le neuvi√®me bit des donn√©es SPI. Cependant, le mode 4 fils est peut-√™tre pour le mieux, car SPI dans STM32 ne peut transmettre que 8 bits. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le reste du sch√©ma correspond √† la fiche technique. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et enfin, le couineur. Rien de sp√©cial - allumez simplement le transistor.</font></font><br><br><img src="https://habrastorage.org/webt/b9/nk/9u/b9nk9uzbod6oeswokssk4nhfvsq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le cas o√π il y aurait un vibromoteur au lieu d'un tweeter, j'ai fourni une diode de protection. </font><font style="vertical-align: inherit;">Cependant, j'ai entendu l'opinion qu'une diode de protection ne nuit pas non plus au tweeter.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En fer </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ci-dessus, j'ai d√©crit mes r√©flexions sur le sujet du corps. En fait, j'ai m√™me essay√© de cr√©er une planche pour ce cas. Malheureusement, la planche √©tait trop exigu√´. J'ai d√ª utiliser une installation bilat√©rale, passer des composants 1206 √† 0805, mais tout de m√™me, les composants de la carte √©taient tr√®s serr√©s. De plus, chaque changement dans le sch√©ma a √©t√© p√©nible, car J'ai d√ª reproduire pr√®s de la moiti√© de la planche. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai donc tripot√© avec elle pendant plusieurs semaines, mais le conseil d'administration m'a battu et j'ai abandonn√© le projet pendant pr√®s d'un an. Coup de </font><font style="vertical-align: inherit;">pied deviennent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici cet article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mais vraiment, ce n'est qu'un prototype, et le premier de plusieurs. Pourquoi vous emb√™ter avec une carte super compacte, o√π vous ne pouvez pas ramper avec un fer √† souder ou un oscilloscope, si vous pouvez tout d√©boguer sur une grande carte?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eh bien, vous n'avez pas √† fabriquer une carte aussi √©norme comme un iPhone, mais il est tout √† fait possible d'entrer dans les couches promotionnelles 100x100mm 2 de JLCPCB. </font><font style="vertical-align: inherit;">Vous pouvez pratiquement vous limiter. </font><font style="vertical-align: inherit;">Ainsi, sur la carte se trouve un √©norme √©cran de 2,42 pouces, des cavaliers pour mesurer la consommation sur toutes les lignes √©lectriques, des condensateurs d'alimentation l√† o√π vous en avez besoin ou non, et en g√©n√©ral un tas de pi√®ces qui n'ont pas pu √™tre install√©es. </font><font style="vertical-align: inherit;">Il reste encore une place.</font></font><br><br><img src="https://habrastorage.org/webt/nm/ig/vr/nmigvrrichuyvfy4vddfogpnquu.png"><br><br><img src="https://habrastorage.org/webt/sr/cy/ed/srcyeditmbixylghywsn15j-qas.png"><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est en vue photo</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/d-/co/ru/d-coru_uwsrkpvz44tirfmisedg.png"><br><br><img src="https://habrastorage.org/webt/5w/pq/xk/5wpqxktdsgqt1auvgeh4wnhbaz4.png"><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il n'y a rien √† dire sur le c√¢blage. J'ai s√©par√© la plupart des lignes de signal et de champ le long de la couche sup√©rieure, tandis que celle du bas √©tait presque compl√®tement enterr√©e sous terre. Malheureusement, la disposition s'est r√©v√©l√©e assez dense et certaines lignes de signal ont d√ª √™tre tra√Æn√©es le long de la couche inf√©rieure √† travers la moiti√© de la carte. Pour cette raison, la terre est "d√©chir√©e" par endroits en plusieurs √Æles peu reli√©es. J'esp√®re que ce n'est pas un probl√®me. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je n'ai pas fait la terre sous l'antenne Bluetooth, mais j'ai quand m√™me d√ª faire glisser une des lignes de signal √† travers cette zone. Cependant, il s'agit de la ligne BT_ON, le long de laquelle les signaux ne passent souvent pas (elle y est activ√©e ou d√©sactiv√©e), ce qui signifie qu'elle ne devrait pas affecter particuli√®rement le signal.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'√©t√© arrivait et je pr√©voyais de prendre le loyer avec moi en vacances. Pour que les femmes de chambre dans les h√¥tels n'aient pas peur d'une carte de d√©bogage nue avec un ventilateur de fils, ce serait bien de la cacher dans l'√©tui. Je ne pouvais pas me priver du plaisir et j'ai d√©velopp√© le bo√Ætier et la carte en m√™me temps. Il y avait donc des cartes de montage dans le bo√Ætier, le montage du support d'√©cran. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le module GPS est un sandwich de plusieurs cartes et d'une antenne de 12 mm d'√©paisseur. J'ai d√©cid√© de ne pas l'accrocher sur le dessus de la planche, mais de la placer au m√™me niveau. Cela a r√©duit l'√©paisseur du bo√Ætier, mais a mordu un coin de la planche. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelques photos de la carte et de l'appareil final (√† ce stade du projet). </font></font><br><br><img src="https://habrastorage.org/webt/sr/yk/-g/sryk-gs6dpsw3cjk4mx7fhj4khw.jpeg"><br><br><img src="https://habrastorage.org/webt/i7/hm/im/i7hmimruqywcfpkw9q5qudxkyog.jpeg"><br><br><img src="https://habrastorage.org/webt/r_/wo/bj/r_wobjeewfmg8fohrp_nmehi1c4.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La batterie tient bien sous l'√©cran, mais j'ai d√ª faire une petite bo√Æte afin de rapprocher l'√©cran du capot sup√©rieur.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelques mots sur le tableau de montage. J'ai tout soud√© en environ 3 soirs, et environ une semaine en soir√©e, il m'a fallu tranquillement d√©boguer et v√©rifier du c√¥t√© logiciel. √Ä ma grande surprise, la mise en place de la carte n'a rencontr√© aucune difficult√© fondamentale et presque tout a d√©marr√© comme il se doit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il s'est av√©r√© que le soudage 0805 n'√©tait pas beaucoup plus difficile √† souder que le 1206, il est tout √† fait comestible √† la maison avec une loupe. Vous pouvez m√™me swinguer au 0603. Mais avec la soudure du microcontr√¥leur et du connecteur d'affichage (ils ont un pas de 0,5 mm), j'ai d√ª bricoler. Sur YouTube, cela ressemble en quelque sorte aux gens - je viens de le d√©penser avec un fer √† souder et c'est tout, mais toutes mes conclusions sont rest√©es instantan√©ment.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pas sans probl√®mes mineurs. Dans certains endroits, il n'y avait pas d'alcool, quelque part il y avait une ¬´morve¬ª. L'empreinte pour le connecteur USB s'est r√©v√©l√©e fausse - il avait une √©tape de conclusions √©tait moins que n√©cessaire (alors faites confiance apr√®s ces empreintes d'Internet!). J'ai d√ª plier un peu les conclusions pour qu'elles deviennent sur la bonne voie. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le connecteur d'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©cran </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">FPC</font></a><font style="vertical-align: inherit;"> achet√© sur Ali s'est av√©r√© √™tre avec les contacts ci-dessous, alors que j'avais besoin des contacts en haut (je n'avais pas soup√ßonn√© une telle diff√©rence auparavant). J'ai d√ª "souffler" le connecteur de la carte d'affichage standard. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s avoir fourr√© la carte dans le bo√Ætier, il s'est av√©r√© qu'il n'√©tait pas possible de d√©connecter la batterie en retirant simplement le connecteur, mais je ne voulais pas laisser la carte d√©bogu√©e sous tension. J'ai d√ª pousser un interrupteur.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors de la configuration de la carte, il s'est av√©r√© qu'il n'y a aucun contact avec le sol o√π que vous puissiez attacher la sonde √† l'oscilloscope. J'ai d√ª m'accrocher au connecteur USB avec un crocodile. Il sera n√©cessaire de fournir des sites de test dans la prochaine version de la carte. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les circuits ont √©galement r√©v√©l√© des probl√®mes. C'√©tait donc un fait compl√®tement inattendu que la puce PT1502 sur la broche RESET g√©n√®re une tension de 3V (j'√©tais compl√®tement s√ªr qu'il y avait quelque chose comme un collecteur ouvert). En cons√©quence, ces 3V ont fui sur la ligne √©lectrique, m√™me si je pr√©voyais d'y avoir seulement 2V. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici un sch√©ma simplifi√© de ce qui s'est pass√© </font></font><br><img src="https://habrastorage.org/webt/ag/rw/tg/agrwtgjika-hvgzl_die2gokf4c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gr√¢ce au grand esprit et aux gars d'easyelectronics.ru, ce joint a √©t√© d√©cid√© en ajoutant une diode. Apr√®s un peu de chirurgie, cette partie a fonctionn√© comme il se doit.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De plus, le module Bluetooth (aliment√© par 2,5 V) s'est accidentellement connect√© √† l'alimentation principale (2 V), au lieu du 3 V fixe. Maintenant, le bluetooth ne peut fonctionner pour moi que lorsque l'USB est connect√©, lorsque la tension de l'alimentation principale monte √† 3,3 V. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En principe, il serait possible d'agiter le scalpel et de souder le bluetooth √† la bonne puissance, mais l'UART2 auquel le bluetooth est connect√© n'est pas tol√©rant √† 5V (il l'a lu lui-m√™me dans la fiche technique au stade de l'analyse, il l'a lui-m√™me not√© dans le texte ci-dessus, et a finalement oubli√© lors du c√¢blage de la carte ) Par cons√©quent, la connexion du bluetooth √† l'alimentation est plus √©lev√©e que la puissance du microcontr√¥leur est lourde ... Dans la prochaine version de la carte, je connecte simplement le bluetooth √† un autre UART.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le convertisseur DC-DC √† tension variable a √©galement fonctionn√© comme pr√©vu - lorsqu'il est aliment√© par une batterie, il donne 2V, et lorsque vous connectez l'USB monte √† 3,16V (vous devez jouer avec les valeurs nominales et atteindre 3,3V). Mais ici, un autre d√©faut du circuit est sorti: vous devez √©galement pouvoir augmenter la tension lorsqu'il est aliment√© par le programmeur. Je pense que cela est trait√© en ajoutant une autre diode. Je vais essayer de jouer un peu plus tard.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfin, pendant le travail sur la carte, je n'ai toujours pas compris comment alimenter correctement la carte SD contre les sous-tensions. Une courte recherche sur Google n'a men√© √† rien. Apparemment, vous devez vous immerger dans la lecture des sp√©cifications de pages serr√©es (qui, en outre, sont partiellement ferm√©es). En attendant, j'ai court-circuit√© le R7 et la carte est maintenant aliment√©e par un 3.16V (3.3V) fixe. Je vais en rester ainsi pour les prochains mois, pendant que je travaillerai sur la partie logicielle. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En parlant de logiciel. √âtonnamment (bien que pr√©vu), mais en g√©n√©ral, tout a commenc√© sans probl√®me. Comme j'ai bascul√© entre les microcontr√¥leurs de la m√™me s√©rie (du F103CB au F103RC), je n'ai pas eu besoin de modifier la partie logicielle. Seulement corrig√© le nombre de broches, mais ajout√© l'inclusion de transistors. N√©anmoins, il y a eu 2 moments non triviaux avec lesquels j'ai d√ª bricoler.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le premier est l'alimentation par batterie. </font><font style="vertical-align: inherit;">J'ai d√©bogu√© la carte en utilisant une alimentation USB et tout fonctionnait bien en g√©n√©ral. </font><font style="vertical-align: inherit;">Mais la carte n'a toujours pas voulu allumer la batterie.</font></font> C'est-√†-dire<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela peut fonctionner (si vous l'allumez lorsque l'USB est connect√©, puis retirez le cordon), mais cela ne fonctionne pas pour d√©marrer sur un c√¢ble froid. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selon la conception de la puce PT1502, la carte devrait commencer comme √ßa. </font><font style="vertical-align: inherit;">L'utilisateur appuie sur le bouton BTN1 et apr√®s un tiers de seconde, la puce allume toutes les sources d'alimentation. </font><font style="vertical-align: inherit;">Lorsque tout va bien avec l'alimentation, le PT1502 ¬´lib√®re¬ª le signal RESET, d√©marrant ainsi le microcontr√¥leur. </font><font style="vertical-align: inherit;">Le processeur, √† son tour, d√©finit le signal PWR_HOLD sur un, signalant qu'il a d√©marr√©. </font><font style="vertical-align: inherit;">Apr√®s cela, le PT1502 fournit r√©guli√®rement de l'√©lectricit√© au circuit jusqu'√† ce que le microcontr√¥leur abaisse le signal PWR_HOLD √† z√©ro.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais c'est en th√©orie. En fait, d√®s que le processeur a d√©fini le signal PWR_HOLD, la carte s'est √©teinte instantan√©ment. J'ai pellet√© l'ensemble du circuit d'alimentation, regard√© les formes d'onde des signaux principaux, m√©lang√© le code dans le chargeur de d√©marrage d'avant en arri√®re, mais je ne pouvais pas comprendre le probl√®me. J'ai √©galement p√©ch√© sur l'absence d'une r√©sistance de rappel sur la ligne PWR_HOLD, que j'ai oubli√© d'installer, mais elle est recommand√©e par une fiche technique (et tr√®s probablement elle est toujours n√©cessaire). Mais l'ajouter avec une verri√®re n'a pas r√©solu le probl√®me. Et ce n'est que lorsque j'ai pr√™t√© un oscilloscope √† quatre canaux que tout est devenu clair.</font></font><br><br><img src="https://habrastorage.org/webt/ix/ie/xf/ixiexf-lau1vggfbwu9ta4ys_hq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque l'utilisateur appuie sur le bouton (ligne orange), la puce PT1502 se met sous tension (ligne violette). Tout cela se produit longtemps (300 ms) avant les √©v√©nements sur cette forme d'onde. Et puis quelque chose d'int√©ressant se produit. PT1502 lib√®re RESET (ligne bleue), le processeur d√©marre et, pour une raison quelconque, abaisse la ligne de bouton √† z√©ro. M√™me si le microcontr√¥leur essaie toujours d'augmenter la ligne POWER_HOLD (ligne verte) - il est trop tard, le PT1502 a d√©j√† √©teint toutes les sources d'alimentation. Ensuite, il y a encore quelques convulsions, mais le circuit meurt toujours tranquillement. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La question est, d'o√π vient le z√©ro sur le bouton? L'ensemble du point est une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erreur discr√®te dans le chargeur de d√©marrage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en raison de laquelle la jambe BTN1 a √©t√© r√©gl√©e sur le mode de sortie (peut-√™tre que des miracles se sont √©galement produits sur d'autres jambes √† ce moment) et un signal faible y est apparu.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quoi d'autre a d√ª lutter avec la carte SD. Il n'y avait tout simplement pas de module SDIO dans l'ancien microcontr√¥leur, j'ai donc d√ª √©tudier cette pi√®ce √† partir de z√©ro. J'ai pass√© presque toute la journ√©e √† essayer d'obtenir une carte, √† copier des morceaux de code √† partir d'exemples sur Internet et ce que CubeMX a g√©n√©r√©. Bien que la carte soit parfaitement lisible sur un ordinateur, elle n'a toujours pas voulu d√©marrer dans mon circuit. J'ai p√©ch√© pour une mauvaise soudure, des r√©sistances de tirage incorrectement s√©lectionn√©es, des circuits maladroits et une fiche technique mal interpr√©t√©e. Mais √† ma grande surprise, une autre carte avec le m√™me code et sur la m√™me carte a d√©marr√© sans probl√®me. Il sera n√©cessaire d'√©tudier cette question plus en d√©tail.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a eu un autre probl√®me avec la carte. En fouillant dans diff√©rentes lignes avec un oscilloscope, je n'ai vu d'activit√© que sur la ligne D0, tandis que sur D1-D3 il y avait du silence - la carte fonctionnait en mode mono-bit. Dans HAL, la fonction HAL_SD_ConfigWideBusOperation () a m√™me √©t√© d√©couverte, ce qui peut activer le mode de transfert 4 bits. Malheureusement, lorsque la carte est pass√©e en mode 4 bits, les p√©riph√©riques SDIO sont entr√©s dans le d√©passement RX FIFO profond et ont cess√© de fonctionner.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le probl√®me s'est av√©r√© tr√®s int√©ressant. </font><font style="vertical-align: inherit;">Il s'est av√©r√© qu'√† l'int√©rieur de la fonction HAL_SD_ReadBlocks () il y a une certaine boucle qui interroge les drapeaux SDIO. </font><font style="vertical-align: inherit;">Lorsque de nouvelles donn√©es arrivent de la carte, ce code transf√®re les octets du tampon FIFO interne vers la m√©moire utilisateur. </font><font style="vertical-align: inherit;">La carte a donc transmis des octets si rapidement que le code dans HAL_SD_ReadBlocks () n'a tout simplement pas eu le temps de transf√©rer les donn√©es. </font><font style="vertical-align: inherit;">J'ai d√ª temporairement baisser la fr√©quence d'horloge de la carte. </font><font style="vertical-align: inherit;">Eh bien, √† l'avenir, j'utiliserai le DMA et un tel probl√®me ne devrait pas se poser en principe.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Conclusion et prochaines √©tapes </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ceux qui dans cet endroit s'attendaient √† voir l'appareil fini, je dois le d√©cevoir - seule la planche de test est termin√©e, et m√™me cela, seulement le morceau de fer. Vous devez maintenant lui donner vie, faire la programmation, affiner les modes et la consommation. Eh bien, √©crivez en fait un code de journalisation - c'est pourquoi tout le projet a √©t√© d√©marr√©. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√©anmoins, pour moi personnellement, cette √©tape est une r√©alisation tr√®s grande et importante. L'√©lectronique n'est pas ma sp√©cialit√© et je suis tr√®s heureux que l'appareil ait m√™me d√©marr√©. J'ai r√©ussi √† pomper suffisamment pour concevoir des circuits, faire correspondre plusieurs appareils, c√¢bler la carte, choisir des composants et bien plus encore.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je parlerai de la partie logiciel une autre fois. </font><font style="vertical-align: inherit;">Ainsi que sur les nuances des param√®tres. </font><font style="vertical-align: inherit;">Le fait est que tout ce remplissage doit d'abord √™tre relanc√© et test√©. </font><font style="vertical-align: inherit;">Pour le moment, nous avons r√©ussi √† d√©marrer tous les appareils sur la carte (enfin, √† l'exception du tweeter), mais seulement dans la mesure o√π ¬´cela a commenc√© et r√©pond d'une mani√®re ou d'une autre¬ª. </font><font style="vertical-align: inherit;">Aucune logique de traitement n'a encore √©t√© √©crite. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plans pour le proche avenir:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pilotez l'√©lectronique dans diff√©rents modes, v√©rifiez que le circuit fonctionne toujours. </font><font style="vertical-align: inherit;">Fixer les jambages dans la deuxi√®me version de la planche</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mesurez la consommation de toute la p√©riph√©rie et trouvez des moyens d'optimiser la consommation. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Assemblez plusieurs options de carte sur diff√©rents microcontr√¥leurs (par exemple L152 ou L433) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lisez attentivement les sp√©cifications SD et d√©couvrez comment connecter correctement la carte en mode de signalisation basse tension (1,8 V) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Essayez diff√©rents modules GPS et d√©cidez enfin lequel j'irai ensuite </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Commandez une puce de boussole distincte (par exemple, HMC5883L ou HSCDTD008A) et essayez de les utiliser d'une mani√®re ou d'une autre </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Effectuer une refactorisation de code interne, mettre √† niveau toutes les biblioth√®ques principales, en commen√ßant par HAL </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfin, commencez √† √©crire des fonctionnalit√©s. </font><font style="vertical-align: inherit;">Mettre en ≈ìuvre r√©ellement ce √† quoi l'appareil √©tait destin√©</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur ce, permettez-moi de prendre cong√©. </font><font style="vertical-align: inherit;">Je vous serais reconnaissant de vos commentaires, id√©es et conseils constructifs sur la conception des circuits et la disposition des circuits imprim√©s. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sources: </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code de </font></font></a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code bootloader </font></font></a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plata </font></font></a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logement</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr454434/">https://habr.com/ru/post/fr454434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr454424/index.html">5 erreurs courantes lors de l'utilisation de composants architecturaux Android</a></li>
<li><a href="../fr454426/index.html">ARTificial: √† l'aube de l'intelligence artificielle</a></li>
<li><a href="../fr454428/index.html">Ce qu'Apple a pr√©sent√© √† la WWDC et ce qu'en pensent les d√©veloppeurs iOS</a></li>
<li><a href="../fr454430/index.html">Vie de particules 3D</a></li>
<li><a href="../fr454432/index.html">Arch√©ologie divertissante: le guide de style R sous la loupe</a></li>
<li><a href="../fr454436/index.html">Petty Petty Joy # 1: loguru</a></li>
<li><a href="../fr454440/index.html">Petty Little Fun # 2: Starlette</a></li>
<li><a href="../fr454442/index.html">Comment choisir un r√©seau proxy pour votre entreprise: 3 conseils pratiques</a></li>
<li><a href="../fr454444/index.html">Nous profilons le chargement de Habr ou comment 189 requ√™tes sur la page rendent l'influence</a></li>
<li><a href="../fr454446/index.html">Quoi de neuf en C # 8?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>