<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎙️ 👆🏽 ⤵️ Database bukan hanya gudang data 👨🏾‍🤝‍👨🏼 👆🏼 👆🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Menggunakan basis data hanya untuk penyimpanan data sama dengan memanggil Unix antarmuka untuk bekerja dengan file. Oleh karena itu, saya ingin mengin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Database bukan hanya gudang data</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422989/"><p><img src="https://habrastorage.org/webt/o1/t_/g4/o1t_g4i4iyk2wbbfyv61pq45mfa.png" align="left" height="35%" width="35%">  Menggunakan basis data hanya untuk penyimpanan data sama dengan memanggil Unix antarmuka untuk bekerja dengan file.  Oleh karena itu, saya ingin mengingatkan Anda tentang fungsi basis data yang terkenal dan tidak terlalu ingin saya lihat lebih sering di aplikasi tempur berbasis web. </p><a name="habracut"></a><br><h2 id="tldr">  tl; dr </h2><br><p>  Di bawah ini adalah tentang otentikasi, pengguna, hak akses, integritas data, PLRT Asing, pencatatan dan statistik.  Tidak ada yang baru. </p><br><h2 id="primechaniya">  Catatan </h2><br><ul><li>  Maksud saya Ruby on Rails dan Postgres, tetapi sebagian besar referensi dapat ditoleransi dengan baik dalam bahasa dan DBMS lainnya. </li><li> Saya tidak akan mengatakan sesuatu yang baru, semua ini telah lama dijelaskan dalam dokumentasi dan artikel.  Saya hanya ingin mengingatkan sekali lagi tentang alat dan di mana mereka dapat diterapkan untuk membuat hidup sedikit lebih baik. </li></ul><br><h2 id="peerident-autentifikaciya">  Otentikasi rekan / identifikasi </h2><br><p> Hal yang benar-benar sehat, yang hampir tidak ada yang menggunakan.  Ini memetakan pengguna Unix ke pengguna basis data.  Dalam kasus pertama, pengguna lokal dipetakan, dan yang kedua, pengguna jarak jauh.  Keuntungannya adalah Anda dapat membuang host, nama pengguna dan kata sandi dari konfigurasi (dan nama database juga dapat dibuang), tetapi semuanya akan berfungsi seperti sebelumnya.  Plus, akan lebih mudah untuk masuk ke konsol untuk debugging langsung (hanya psql dari terminal bukan semua <code>-h -U -W -d</code> dan sebagainya). </p><br><p>  Dokumentasi PG tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">rekan</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">identitas</a> . </p><br><p>  Nuansa: cocok jika Anda tidak hanya melakukan root dan superuser di server;  dan dalam kasus ident, Anda mengontrol jaringan, perangkat keras dan yakin bahwa tidak ada penyusup dan penyabot. </p><br><h3 id="primery-ispolzovaniya">  Contoh Penggunaan </h3><br><p>  Keamanan  Anda tidak dapat menghapus kata sandi dari basis data dan menghubungkannya dari lingkungan lokal atau dari tempat lain.  Tidak ada kata sandi dan tidak ada yang perlu diseret. </p><br><p>  Kontrol akses.  Jika ada beberapa peran akses ke produksi atau server lain dan mereka sudah dibagi di tingkat unix, maka akan lebih mudah untuk mengikat pengguna database kepada mereka.  Dalam hal ini, basis kode yang sama akan terhubung di bawah pengguna basis data yang berbeda.  Sebagai contoh, dukungan teknis dan pengembang naik ke konsol rel yang sama, tetapi untuk beberapa itu dibaca saja, dan untuk yang kedua penuh. </p><br><h2 id="prava-dostupa">  Hak akses </h2><br><p>  Di Unix, semua orang berpikir tentang mereka dan mereka terlihat sangat condong untuk bekerja dari root atau di <code>'chmod 777'</code> .  Namun dalam database semuanya berbeda.  Pengguna super dan pergi.  Meskipun semuanya ada tidak kurang (dan mungkin bahkan lebih) keren. </p><br><p>  Ada hierarki peran peran (agak mirip grup di Unix), ada akses dari berbagai tingkatan: ke objek tertentu (seperti izin file), ke operator tertentu (seperti aturan dalam <code>sudoers</code> ), bahkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ke baris tertentu</a> .  Singkatnya, semuanya ada di sana.  Gunakan itu. </p><br><h3 id="oblasti-prilozheniya">  Area Aplikasi </h3><br><p>  Dalam versi minimum, bersama dengan rekan / identitas di atas, Anda dapat memisahkan pengguna untuk migrasi / penyebaran dan pengguna untuk operasi harian aplikasi.  Ini, setidaknya, akan melindungi terhadap panggilan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DDL saat</a> runtime.  Tentu saja, ada banyak kasus memodifikasi struktur basis data "saat panas".  Ini adalah penerapan nol-downtime, dan berbagai perbaikan terbaru, dan pembangunan kembali indeks dengan persetujuan (dan kadang-kadang tanpa).  Tetapi, secara umum, aplikasi DDL seharusnya tidak. </p><br><p>  Pilihan lain: jika Anda memiliki "microservices", tetapi karena alasan tertentu, mereka menggunakan database yang sama, maka dengan jelas berbagi akses ke objek database adalah ide yang sangat bagus.  Memang, antarmuka interaksi harus dilokalkan mungkin, dan akses anarkis ke semua data berkontribusi pada erosi logika dan tanggung jawab. </p><br><h2 id="ogranichenie-celostnosti">  Kendala integritas </h2><br><p>  Di Rails 5, setidaknya entah bagaimana, pekerjaan dimulai dengan referensi dan integritas data.  Tetapi, dalam kasus umum, banyak pengembang percaya bahwa validasi dalam model atau lingkungannya sudah cukup untuk menjaga status data yang konsisten.  Sayangnya, ini sama sekali tidak benar. </p><br><p>  Validasi dapat dilewati, Anda dapat langsung ke database dan menjalankan sql, Anda dapat membersihkan selama migrasi.  Secara umum, banyak yang bisa dilakukan.  Karena itu, segala sesuatu yang bergantung pada logika bisnis harus dipaku oleh database.  Ini adalah satu-satunya cara untuk menjaga integritas data dan tidak mendapatkan "kejutan" pada penyebaran berikutnya. </p><br><h2 id="foreign-data-wrapper">  Pembungkus data asing </h2><br><p>  Ini adalah tentang menghubungkan satu database ke database lain untuk mengakses tabel remote sebagai milik mereka.  Keuntungan utama adalah bahwa aplikasi web tidak berpartisipasi dengan cara apa pun, tetapi ada banyak optimisasi ketika dua database identik bekerja (secara umum, pushdown adalah untuk adapter yang berbeda, tetapi semuanya rumit di sana, sehingga lebih mudah untuk mengasumsikan bahwa bundel PG-PG bekerja dengan baik, dan yang lainnya - bagaimana kelanjutannya). </p><br><h3 id="ispolzovanie-fdw">  Menggunakan FDW </h3><br><p>  Alih-alih mengkonfigurasi dengan koordinat beberapa database dalam aplikasi web, jauh lebih mudah untuk meninggalkan satu koneksi ke database dan mengelola semuanya di level database.  Di sana, dengan sendirinya, masalah hak akses dan pilihan objek yang memerlukan akses akan diselesaikan. </p><br><p>  Plus, di masa depan, Anda dapat mengganti tabel eksternal dengan tampilan yang terwujud atau hanya sebuah tabel, tetapi jangan ubah apa pun di aplikasi web. </p><br><p>  Namun, Anda dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">terhubung ke</a> tipe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">eksotis</a> MS Access dan masalah dengan pembatasan penggunaan relasi dalam model menghilang.  Lagi pula, jika Anda memiliki 2+ koneksi, maka Anda tidak akan melakukan penggabungan dua pangkalan di tingkat aplikasi web, meskipun ORM (khususnya, ActiveRecord) akan dengan jujur ​​mencoba melakukan ini ... dan akan jatuh.  Dan pada tingkat basis data, ini dapat dilakukan, dalam beberapa kasus, hampir tanpa overhead. </p><br><h2 id="logirovanie">  Penebangan </h2><br><p>  Hampir semua orang tahu tentang dia dan menggunakan segalanya.  Tapi untuk jaga-jaga, izinkan saya mengingatkan Anda: jangan ragu untuk mencatat permintaan panjang.  Di luar kotak, di PG, tidak aktif.  Perlu menyodok <code>log_min_duration_statement</code> .  Mengenai artinya, ada banyak holivar dan, mungkin, mereka gagap, tetapi untuk awalnya, luangkan beberapa detik.  Karena jika Anda memiliki aplikasi besar, Anda tidak akan membacanya dan Anda sendiri tahu apa yang harus dilakukan, tetapi jika kecil, maka Anda tidak punya waktu untuk menangani rem kecil dan hanya hal-hal fatal yang mengganggu Anda. </p><br><p>  Ingat juga tentang N +1.  Basis data tidak akan mengatakan apa-apa tentang itu.  Gunakan alat pihak ketiga.  Misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">peluru</a> dan akal sehat. </p><br><h2 id="statistika">  Statistik </h2><br><p>  Harus diingat bahwa itu dan itu bisa bau.  Pada awalnya, semuanya baik-baik saja.  Namun seiring waktu, biasanya, hasil berikut: laju perubahan data kira-kira sama, dan ukuran tabel lebih besar.  Akibatnya, tabel vakum / analisis mulai terjadi lebih jarang dan pada beberapa titik penjadwal mulai ketinggalan.  Dalam kasus terbaik, permintaan masuk ke pencatatan di atas, dalam kondisi terburuk - Anda hanya menderita dan tidak mengerti mengapa.  Secara umum, lihat <code>pg_stat_user_tables</code> dan <code>pg_stat_user_tables</code> tanggal vakum / analisis dengan beban pada tabel. </p><br><p>  Dan terkadang Anda dapat menggunakan statistik untuk perkiraan perkiraan.  Ini sangat berguna, tetapi cukup tepat, karena PG bukan Oracle dan <code>count</code> seluruh tabel tidak dilakukan di O (1), meskipun saya benar-benar ingin. </p><br><h2 id="konec">  Akhirnya </h2><br><p>  Terima kasih sudah membaca.  Jika tidak sulit, jawab pertanyaan di bawah ini.  Mengingat artikel baru-baru ini tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GQL, bukannya SQL,</a> itu mulai banyak mengganggu saya. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id422989/">https://habr.com/ru/post/id422989/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id422977/index.html">Mikhail Bessmeltsev dan rekannya mengembangkan algoritma baru untuk vektorisasi gambar</a></li>
<li><a href="../id422979/index.html">Analog Amerika GDPR: apa yang perlu Anda ketahui tentang CCPA</a></li>
<li><a href="../id422981/index.html">Implementasi Sistem Komponen Entitas Sederhana</a></li>
<li><a href="../id422985/index.html">Mulai cepat proyek web (BE - Java Spring, FE - React Redux, interaksi - Istirahat, WebSocket)</a></li>
<li><a href="../id422987/index.html">Dan lagi, hari ke-256 tahun ini</a></li>
<li><a href="../id422993/index.html">Membakar TV OLED dalam tes nyata</a></li>
<li><a href="../id422995/index.html">QA mitap di Redmadrobot</a></li>
<li><a href="../id422997/index.html">Buku "PHP Modern"</a></li>
<li><a href="../id422999/index.html">Buat dataset alien Anda sendiri</a></li>
<li><a href="../id423005/index.html">Bagaimana Yandex.Zen, Plugin Caching WordPress dan Hosting Meningkatkan Tekanan Saya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>