<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍🚒 🤹🏼 🔌 我们通过Node-RED上的运动和照明传感器对照明控制进行编程 💻 ✋🏽 💪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在俄语语言的Internet上，关于诸如Node-RED这样的编程环境的文章很少。本文将揭示有关该产品的窗帘的秘密，并通过为运动传感器创建照明控制算法的示例来展示，使用Node-RED以完全图形化的形式实现智能家居自动化的各种场景和规则有多么简单，而无需编写任何代码。
 
 
 
 什么是Node-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我们通过Node-RED上的运动和照明传感器对照明控制进行编程</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/396985/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在俄语语言的Internet上，关于诸如</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node-RED</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样的编程环境的文章很少</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">本文将揭示有关该产品的窗帘的秘密，并通过为运动传感器创建照明控制算法的示例来展示，使用Node-RED以完全图形化的形式实现智能家居自动化的各种场景和规则有多么简单，而无需编写任何代码。</font></font><br>
<br>
<img src="https://habrastorage.org/files/639/1c2/c9f/6391c2c9f6134818a598bc2e703815ce.png"><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">什么是Node-RED？</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与其他大公司一样，IBM也在试图在不断发展的物联网中找到自己的市场。</font><font style="vertical-align: inherit;">这通常与开源应用程序和产品的发布相关联，以普及其付费平台。</font><font style="vertical-align: inherit;">例如，在IBM，付费平台是Bluemix。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node-RED是IBM的一个开放源代码的创举，就像在站点上简单写的那样，它是一种工具，用于以新颖有趣的方式连接硬件，API和服务。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这些方法基于图形通信线路的使用，通过该图形通信线路在节点之间发送消息。</font><font style="vertical-align: inherit;">因此，您可以使用鼠标简单地连接各个块，而无需使用编程。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node-RED中的开发是通过普通的浏览器进行的，内核本身可以在各种平台上运行-PC，RPi，云等。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 适用于智能家居的Node-RED</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我决定尝试使用Node-RED编写用于智能家居的脚本和规则。也就是说，用于自动化。 OpenHAB与各种执行器，Web服务和传感器紧密相连。为什么我决定不在那里进行自动化？原因有几个：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -在OpenHAB中，脚本和规则是用自己的语言编写的。我不想仅仅为了一个应用程序而研究它。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -调试规则本身实际上是不可能的-如果规则不起作用，很难找出原因</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -我希望规则独立于硬件，通信通道，平台以及与设备进行通信的软件本身。这样我就可以轻松切换到另一个UD平台，例如Domoticz，MajorDomo，FHEM，并随身携带我的规则，而不必在新的UD平台下重写它们。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 通过运动和光线传感器进行照明控制</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，让我们开始吧。</font><font style="vertical-align: inherit;">实际上，最初的任务是简单而琐碎的：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我控制了走廊上的照明用LED点。</font><font style="vertical-align: inherit;">我希望灯光在运动时亮起，并在10秒后自动关闭。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们把任务复杂化一点：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -灯光仅在外面昏暗时才打开</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -灯光强度应取决于时间-直到晚上9点时，灯光应以全强度打开，此后仅以10％作为背光。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传感器，表演者等铁</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与传感器和执行器的协议和通讯选项在此不再赘述。可以这么说，在我的智能家居中，所有这些协议都简化为一个协议-MQTT，并且已经通过它与Node-RED进行通信。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
那么我有哪些传感器和执行器？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.运动传感器。当它检测到运动时，将OPEN消息发布到主题/ myhome / state / Hall_motion，如果2秒钟内没有运动，则将其发布。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.光传感器。它可以测量0-1000 Lux范围内的街道照明亮度。它每分钟一次在主题/ myhome / state / Lumin_Hall中以当前光照级别发布一条消息。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.调光器控制LED灯。</font><font style="vertical-align: inherit;">它已订阅主题/ myhome / command / Light_Hall / state。</font><font style="vertical-align: inherit;">如果您在此处写0-指示灯将熄灭。</font><font style="vertical-align: inherit;">100-以最大亮度打开。</font><font style="vertical-align: inherit;">1-99-将更改光强度。</font><font style="vertical-align: inherit;">对于夜间照明，强度足够1。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node-RED中流的描述</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
假定您已经安装了Node-RED。</font><font style="vertical-align: inherit;">如果不是，请按照上面的链接安装任何适合您的选件-在计算机，Raspberry，clowd等上。</font><font style="vertical-align: inherit;">就我而言，Node-RED安装在RPi2上（我认为它甚至是Raspbian附带的，因此根本不需要安装任何东西）。</font><font style="vertical-align: inherit;">此流程不需要安装任何其他库。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入和输出</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，我们为算法创建必要的输入和输出。这些将是订阅相关主题的MQTT客户。我们将它们从左侧的库中拖动并进行自定义。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意：显示的块名称可以在其设置中更改。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于光传感器，从MQTT输入创建霍尔光传感器节点：</font></font><br>
<br>
<img src="https://habrastorage.org/files/498/4bf/290/4984bf2904f44c0b97aad3d2ea8bb116.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在其配置中，足以注册MQTT代理地址和主题。</font></font><br>
<br>
<img src="https://habrastorage.org/files/883/3ca/27f/8833ca27f19e4f789a545265e877b4fc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我的经纪人正在同一个平台上旋转，所以就离开本地主机。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们为运动传感器创建“霍尔运动传感器”节点：</font></font><br>
<br>
<img src="https://habrastorage.org/files/b07/e06/172/b07e0617262c43f8af32d02b10ecc6cd.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一切都相同，只需设置另一个主题/ myhome / state / Hall_motion。</font></font><br>
<br>
<img src="https://habrastorage.org/files/58e/186/5e9/58e1865e981a444395d03419537ab8b9.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可以看到代理的地址和参数，该节点已经接管了上一个节点，因此您无需在新节点中输入它们。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仍然需要添加MQTT Output来为LED调光器提供输出。拖放MQTT输出，并将其命名为Hall Light Dimmer。</font></font><br>
<br>
<img src="https://habrastorage.org/files/4c5/779/1de/4c57791de90247ad9a1b6208d5199c0d.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同样，在参数中，您只需要指定所需的主题，即可将用于控制调光器的消息发送至该主题-/ myhome / command / Light_Hall / state </font></font><br>
<br>
<img src="https://habrastorage.org/files/7b6/8fb/545/7b68fb5452b142a7bfb1c4c293d902fe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，我们为Flow获得了三个节点。</font></font><br>
<br>
<img src="https://habrastorage.org/files/6ae/70c/cf9/6ae70ccf981d46318f6c487435dbeb81.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
测试它们的功能不会有什么坏处。很简单</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将Debug输出连接到Input模块。</font></font><br>
<br>
<img src="https://habrastorage.org/files/9e6/5fa/e1b/9e65fae1b1c2464a9c5d553f5be90411.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
并将Inject输入连接到输出块。</font></font><br>
<br>
<img src="https://habrastorage.org/files/11e/d81/8c6/11ed818c639f4331a317232357d88b57.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此节点的设置中，您需要将有效负载更改为所需的灯泡亮度。例如，在这种情况下为100。</font></font><br>
<br>
<img src="https://habrastorage.org/files/77b/dd8/1d6/77bdd81d6fb046ec94b0c5a6907f0956.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们可以通过复制粘贴创建几个相同的Inject块，更改亮度，然后将其连接到输出，如下所示：</font></font><br>
<br>
<img src="https://habrastorage.org/files/a2c/63b/706/a2c63b70698841d7a610d89de62aca37.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
那也可以。</font><font style="vertical-align: inherit;">现在该检查了。</font><font style="vertical-align: inherit;">我们单击Deploy按钮：</font></font><br>
<br>
<img src="https://habrastorage.org/files/c93/3e5/16f/c933e516faa0478485d82513326f96dd.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在MQTT节点下，您应该看到一条小消息：</font></font><br>
<br>
<img src="https://habrastorage.org/files/132/d32/701/132d32701d154b038b17b7d6a5e0055d.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这意味着它们已连接到MQTT代理。</font><font style="vertical-align: inherit;">如果一切都按计划进行，则在右侧的调试选项卡中，您应该会看到来自传感器的消息，并且如果单击“注入”节点左侧的矩形，则连接到调光器的灯的光强度应会发生变化。</font><font style="vertical-align: inherit;">如果一切正常，您可以走得更远。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运动传感器照明控制电路</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为简单起见，我将各个相互连接的块称为链。首先，让我们尝试建立一个简单的电路，该电路可以通过运动传感器打开灯，并在一段时间后将其关闭。为此，根据Node-RED概念，我们需要来自运动传感器的消息才能通过某些块到达调光器并具有一定的文本。首先，我们将处理光的包含。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，我们从来自运动传感器的所有消息中选择一条带有文本OPEN的消息-这意味着运动已经出现。为此，请使用开关块。将其连接到我们已经创建的霍尔运动传感器模块的输出。</font></font><br>
<br>
<img src="https://habrastorage.org/files/ad2/92d/eb3/ad292deb31634ef7853c1cb9bcc45cef.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将对其进行配置，以便该块仅输出文本为OPEN的消息。</font></font><br>
<br>
<img src="https://habrastorage.org/files/79c/989/4f7/79c9894f70154190835afd1969fa8f2a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从图片中可以看到，该块将比较负载和文本OPEN，如果文本匹配，则将消息发送到输出。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们的调光器要求输入具有所需亮度0 ... 100的消息。他将无法理解OPEN文本。因此，我们使用Change块来更改消息的文本。</font></font><br>
<br>
<img src="https://habrastorage.org/files/a25/202/c7d/a25202c7dc5b40e5ab5e4ac2aa9503db.png"><br>
<img src="https://habrastorage.org/files/e8e/7a6/102/e8e7a6102c54450a9ae86a7b5eeed678.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此块的设置中，记下所需的更改-消息有效负载，我们更改为100-所需的照明强度。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后，我们将其全部连接到调光器的输入：</font></font><br>
<br>
<img src="https://habrastorage.org/files/4e5/cb7/810/4e5cb78102d24e208f4d770a6b7c71a7.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果启动此电路，则可以确保它起作用-灯会在运动中点亮。仍然要确保它也关闭。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为此，请使用触发单元并将其连接到运动传感器的输出。</font></font><br>
<br>
<img src="https://habrastorage.org/files/a9b/e70/538/a9be70538741423fb180dd6453c9d5eb.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
触发块使您可以生成延迟的消息，也可以通过特定消息进行重置。我们将以这种方式进行</font></font><br>
<br>
<img src="https://habrastorage.org/files/cb2/a37/a90/cb2a37a90a81451a935ffb92db9fcc00.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配置</font><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">此设置意味着，当第一条消息到达时，触发器将不发送任何内容，但会启动8秒钟的延时，此后它将发送带有文本0的消息。如果触发器接收到带有OPEN文本的输入，则触发器也会被重置。对我们而言，这意味着什么？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
假设运动传感器显示“打开”消息。该消息将使触发器返回到其原始状态，而没有任何反应。然后，一段时间后，运动传感器将发出“关闭”消息。此消息将开始时间延迟，此后8秒钟触发器将显示消息0。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果在此延迟时间内OPEN消息再次到达，则触发器将再次返回其原始状态，并等待下一条消息（逻辑上将被关闭）。在这种情况下，触发器将不会显示任何消息。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
也就是说，通过这种方式，我们创建了一个计时器，该计时器将用于在给定曝光后自动关闭灯光。如果我们回想一下运动传感器的描述，就会很清楚为什么在此处设置8秒，而不是由于运动传感器本身的快门速度而增加10-2秒。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仍然可以将触发输出连接到调光器，您可以启动电路进行验证。</font></font><br>
<br>
<img src="https://habrastorage.org/files/df4/c60/62f/df4c6062f86d48feab6b08ac3050b6fa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我注意到，为简单起见，我发布了已调试链的屏幕截图。您可以使用Debug链挂起块以了解其工作原理，并且链看起来像这样：</font></font><br>
<br>
<img src="https://habrastorage.org/files/e63/3c7/10e/e633c710e67f47d1931e0c33b92a69b7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不用担心。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可以这样操作：</font></font><br>
<br>
<img src="https://habrastorage.org/files/cff/c68/6ca/cffc686cab3f49059033979c52ac0ae5.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，通过单击“注入”块左侧的矩形，您可以在没有铁的情况下调试电路-在地铁或平板电脑上的笔记本电脑上进行调试。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据路灯的亮度开/关电路 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，如果街道太亮，我们需要确保不打开灯。为此，我们需要添加另一个链并略微更改主链以考虑此因素。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，拿起我们已经知道的开关块并将其连接到光传感器的输出。</font></font><br>
<br>
<img src="https://habrastorage.org/files/5fc/b76/7f8/5fcb767f8f4c470eb4d99f8464da301b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将配置此单元，以使其根据当前照明从光传感器向输出之一发送消息。</font></font><br>
<br>
<img src="https://habrastorage.org/files/bd6/b5c/f07/bd6b5cf07f2c4d3395bed17d0c2e4e9e.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上面的条件意味着，如果照度小于10 lux，则消息将发送到输出1。否则，消息将发送到输出2。请不要忘记选择</font></font><br>
<br>
<img src="https://habrastorage.org/files/c17/91f/640/c1791f6403f4420885d4187f9ef88e7c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
选项，以便仅将消息定向到其中一个输出。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据操作原理，从逻辑上讲，如果消息出现在第一个（上部）输出上，则需要启用运动检测，如果在第二个输出上出现，则将其关闭。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，这里有1000种方法和1种方法是可能的，其中最简单的方法是简单地阻止该消息以打开来自运动传感器的光（如果它是外面的光）。我们意识到了。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
需要说明的是，在Node-RED中，执行引擎是基于消息实现的。即没有消息-没有事件，没有反应。如果不同的消息异步到达，即在不同的时间点，则这强加了某些细节。例如，在这种情况下，来自光传感器的消息与来自运动传感器的消息是异步的。因此，为了考虑光传感器的影响，我们需要记住他的消息中包含的信息，然后在下次消息从运动传感器发出时应用它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，可以使用上下文-一个可以在流程执行期间存储信息的字段。上下文相对于整个环境是全局的，或者是特定流的局部上下文，或者通常仅是特定块的局部上下文。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在我们的情况下，我们将使用此流本地的上下文。即变量将对该流程中的所有块可见。让我们创建一个更改块并将其连接到“光阈值检测器”的第一个输出</font></font><br>
<br>
<img src="https://habrastorage.org/files/0fc/c00/305/0fcc00305f154d0f91ff49bef62a28dc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。考虑更改块的配置，</font></font><br>
<br>
<img src="https://habrastorage.org/files/96b/881/dcf/96b881dcfdc9420b96d4d358cd67a63b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，我们使用Set规则将flow.Light_enabled变量设置为Yes。因此，我们为全局变量分配了一个值，该值可以在其他块中使用。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以相同的方式，创建第二个更改块并将其连接到第二个输出。</font></font><br>
<br>
<img src="https://habrastorage.org/files/c31/f0a/67b/c31f0a67bbf34ddc86ded46ddf74c9fa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其配置如下：</font></font><br>
<br>
<img src="https://habrastorage.org/files/8a8/a88/553/8a8a885534e44d3b871c127119451efd.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了找出这种检测器是否正常工作，我们可以创建一个带有Inject和Debug块的简单电路。</font></font><br>
<br>
<img src="https://habrastorage.org/files/f7b/963/1c8/f7b9631c800c48e2a6c32985b901f47b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在设置注入阻止我们注意到，它应该发出的变量的每一个第二值flow.Light_enabled </font></font><br>
<br>
<img src="https://habrastorage.org/files/517/cde/9ba/517cde9ba14d43dab8e56c10abc3bedf.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后，光传感器的结果可以在的调试选项卡可以容易地看出</font></font><br>
<br>
<img src="https://habrastorage.org/files/698/faf/415/698faf41515040aa953448b86b3ed101.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上/总链关闭传感器上的照明光将看起来像这样</font></font><br>
<br>
<img src="https://habrastorage.org/files/368/721/3b4/3687213b4253469494c227c0fdc4df39.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，利用这一效果帐户对于运动传感器的控制电路而言，将开关块插入路径的电路中以打开灯就足够了。</font></font><br>
<br>
<img src="https://habrastorage.org/files/1d9/610/d37/1d9610d375064d959272c7b0e471b733.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
并将其设置为仅在我们的全局变量flow.Light_enabled设置为Yes时才跳过来自运动传感器的消息。外面很黑。</font></font><br>
<br>
<img src="https://habrastorage.org/files/30e/8b7/29e/30e8b729e5f54ad895b171d4d06a5ce9.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
做完了！现在我们的流程如下所示：</font></font><br>
<br>
<img src="https://habrastorage.org/files/b16/886/c1b/b16886c1bae2485cbe959c9008603c90.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据时间改变灯的亮度 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
剩下的很少了。</font><font style="vertical-align: inherit;">我们想改变LED灯的强度。</font><font style="vertical-align: inherit;">即 </font><font style="vertical-align: inherit;">如果天黑了，但时间是晚上9点之前，则灯应全功率打开。</font><font style="vertical-align: inherit;">但是九点以后-仅在低功率时，如夜间照明。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为此，创建一个Inject块：</font></font><br>
<br>
<img src="https://habrastorage.org/files/f09/eb9/610/f09eb96103554139bf45f3cc6d74e7c9.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可以对其进行配置，使其在特定时间显示一条消息。</font><font style="vertical-align: inherit;">每天将其设置为21:00。</font></font><br>
<br>
<img src="https://habrastorage.org/files/fa2/eaa/acf/fa2eaaacf5ea4ba294253e875831936b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同时，我们注意到它将发出一条值为1的消息。这将是我们在夜间模式下所需的背光强度。</font><font style="vertical-align: inherit;">为了在照明控制电路中使用该值，我们对全局变量使用相同的技巧。</font><font style="vertical-align: inherit;">创建一个change：块</font></font><br>
<br>
<img src="https://habrastorage.org/files/c39/9ae/134/c399ae13425e47a9a4d3f2d0c3800790.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
并对其进行配置，以便为变量flow.Light_Brightness分配消息中的值。</font></font><br>
<img src="https://habrastorage.org/files/5ab/906/2bd/5ab9062bdaa04d88bec7bc0485c7f46b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要在早上返回初始亮度，请创建第二个注入块，该注入块将在早上6点执行，并给出100的亮度值。在此处连接它。</font></font><br>
<br>
<img src="https://habrastorage.org/files/d2f/342/e3c/d2f342e3c2094eeb9e2055fe3df454af.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，变量flow.Light_brightness将在每天晚上9点分配给值1，每天早上6点分配给值100。</font><font style="vertical-align: inherit;">剩下的只是将其应用在主电路中。</font><font style="vertical-align: inherit;">为此，我们已经有一个Light Brightness Adjustment模块：</font></font><br>
<br>
<img src="https://habrastorage.org/files/cd8/130/7c7/cd81307c79d445c2b3ecf08ed709e92b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为此，我们只需要更改设置，使其不分配常量，而是分配flow.Light_brightness变量的值即可。</font></font><br>
<br>
<img src="https://habrastorage.org/files/f01/e09/da0/f01e09da09cb417586297f0efbfeab77.png"><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最终结果</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
清除了调试块的最终流程看起来很整洁。</font><font style="vertical-align: inherit;">在创建时，我们仅使用Node-RED安装中的构建块。</font><font style="vertical-align: inherit;">但是，</font><font style="vertical-align: inherit;">在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flows.nodered.org上</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，有超过800个其他的块和库，可让您添加许多不同的内容。</font></font><br>
<br>
<img src="https://habrastorage.org/files/e4b/3c3/20b/e4b3c320b15745ffbbd91e343715a156.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于那些对重复使用此算法感兴趣的人，我发布了用于调试的流程：</font></font><br>
<br>
<img src="https://habrastorage.org/files/cc2/27a/61c/cc227a61c0f5434bad8a469623439e23.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以及它的json代码，可以将其轻松导入任何版本的Node-RED中并进行测试。</font></font><br>
<pre><code class="hljs json">[{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"5afd41b4.d61318"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"switch"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Movement detected?"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">"payload"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"propertyType"</span></span>:<span class="hljs-string"><span class="hljs-string">"msg"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"eq"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"v"</span></span>:<span class="hljs-string"><span class="hljs-string">"OPEN"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"vt"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"checkall"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"outputs"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">562</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">285</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"381b0d6d.a0bd7a"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"35bac8e.57dd5b8"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"trigger"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"op1"</span></span>:<span class="hljs-string"><span class="hljs-string">"5"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"op2"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"op1type"</span></span>:<span class="hljs-string"><span class="hljs-string">"nul"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"op2type"</span></span>:<span class="hljs-string"><span class="hljs-string">"val"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>:<span class="hljs-string"><span class="hljs-string">"8"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"extend"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"units"</span></span>:<span class="hljs-string"><span class="hljs-string">"s"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"reset"</span></span>:<span class="hljs-string"><span class="hljs-string">"OPEN"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Switch off delay"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">750</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">373</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"e995e130.1e2118"</span></span>,<span class="hljs-string"><span class="hljs-string">"af1f191f.498098"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"d85623d1.29b058"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"change"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light Brightness Adjustment"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"set"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"p"</span></span>:<span class="hljs-string"><span class="hljs-string">"payload"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"pt"</span></span>:<span class="hljs-string"><span class="hljs-string">"msg"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_brightness"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"tot"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"action"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"from"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"reg"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">1013.9999389648438</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">284.63330078125</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"e995e130.1e2118"</span></span>,<span class="hljs-string"><span class="hljs-string">"af1f191f.498098"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"934ff922.ca34f"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"OPEN"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">258.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">408</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"5afd41b4.d61318"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"ea0e2e99.52a6f8"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"CLOSED"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">269</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">459</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"35bac8e.57dd5b8"</span></span>,<span class="hljs-string"><span class="hljs-string">"5afd41b4.d61318"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"4187db59.93c2dc"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"mqtt in"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Hall Light Sensor"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">"/myhome/state/Lumin_Hall"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"qos"</span></span>:<span class="hljs-string"><span class="hljs-string">"2"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"broker"</span></span>:<span class="hljs-string"><span class="hljs-string">"bfc8eee2.a46c9"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">243</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">146</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"c94e7c4.849f48"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"c94e7c4.849f48"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"switch"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light Threshold Selector"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">"payload"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"propertyType"</span></span>:<span class="hljs-string"><span class="hljs-string">"msg"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"lt"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"v"</span></span>:<span class="hljs-string"><span class="hljs-string">"10"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"vt"</span></span>:<span class="hljs-string"><span class="hljs-string">"num"</span></span>},{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"else"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"checkall"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"outputs"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">517.3333129882812</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">145.7166748046875</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"48e6a07a.962798"</span></span>],[<span class="hljs-string"><span class="hljs-string">"ca8b6623.f11c7"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"381b0d6d.a0bd7a"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"switch"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light Enabled?"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_enabled"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"propertyType"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"eq"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"v"</span></span>:<span class="hljs-string"><span class="hljs-string">"Yes"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"vt"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"checkall"</span></span>:<span class="hljs-string"><span class="hljs-string">"true"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"outputs"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">775.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">285</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"d85623d1.29b058"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"48e6a07a.962798"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"change"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Enable Light"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"set"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"p"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_enabled"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"pt"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">"Yes"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"tot"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"action"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"from"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"reg"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">822</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">109</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"ca8b6623.f11c7"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"change"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Disable Light"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"set"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"p"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_enabled"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"pt"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">"No"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"tot"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"action"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"from"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"reg"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">824.6666259765625</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">177.51666259765625</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"b6ea27c1.c33cd"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_enabled"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">"1"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">330.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">678</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"db66aec8.b3abc"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"db66aec8.b3abc"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"debug"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_enabled"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"active"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"console"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"complete"</span></span>:<span class="hljs-string"><span class="hljs-string">"payload"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">670.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">679</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"fa4b50b8.e6e0f"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"5"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"num"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">233.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">212</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"c94e7c4.849f48"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"e7b1a39.f9e596"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"100"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"num"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">235</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">266</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"c94e7c4.849f48"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"4b2f3c6f.de9aac"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"mqtt in"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Hall Motion Sensor"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">"/myhome/state/Hall_motion"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"qos"</span></span>:<span class="hljs-string"><span class="hljs-string">"2"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"broker"</span></span>:<span class="hljs-string"><span class="hljs-string">"87b370d1.dd497"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">247</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">334</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"5afd41b4.d61318"</span></span>,<span class="hljs-string"><span class="hljs-string">"35bac8e.57dd5b8"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"e995e130.1e2118"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"mqtt out"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Hall Light Dimmer "</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">"/myhome/command/Light_Hall/state"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"qos"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"retain"</span></span>:<span class="hljs-string"><span class="hljs-string">"true"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"broker"</span></span>:<span class="hljs-string"><span class="hljs-string">"87b370d1.dd497"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">1310</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">315</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"781e72a7.3c0abc"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Reduce Brightness at 21:00"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">"Night Brightness"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"1"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">"00 21 * * *"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">339</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">517</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"adbf1e2e.3f5ae"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"aa444315.a48ad8"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Normal Brightness at 6:00"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">"Night Brightness"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"50"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"num"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">"00 6 * * *"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">349.6666259765625</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">604.683349609375</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"adbf1e2e.3f5ae"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"adbf1e2e.3f5ae"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"change"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light Brightness Adjustment"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"set"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"p"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_brightness"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"pt"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">"payload"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"tot"</span></span>:<span class="hljs-string"><span class="hljs-string">"msg"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"action"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"from"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"reg"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">692</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">554</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"af1f191f.498098"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"debug"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"active"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"console"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"complete"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">1303.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">429</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"bfc8eee2.a46c9"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"mqtt-broker"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"broker"</span></span>:<span class="hljs-string"><span class="hljs-string">"localhost"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"port"</span></span>:<span class="hljs-string"><span class="hljs-string">"1883"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"clientid"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"usetls"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"verifyservercert"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"compatmode"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"keepalive"</span></span>:<span class="hljs-string"><span class="hljs-string">"60"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"cleansession"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willTopic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willQos"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willRetain"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willPayload"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthTopic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthQos"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthRetain"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthPayload"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"87b370d1.dd497"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"mqtt-broker"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"broker"</span></span>:<span class="hljs-string"><span class="hljs-string">"localhost"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"port"</span></span>:<span class="hljs-string"><span class="hljs-string">"1883"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"clientid"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"usetls"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"verifyservercert"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"compatmode"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"keepalive"</span></span>:<span class="hljs-string"><span class="hljs-string">"60"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"cleansession"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willTopic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willQos"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willRetain"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willPayload"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthTopic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthQos"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthRetain"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthPayload"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>}]
</code></pre><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总结</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在本文中，我试图演示并说明在Node-RED环境中实现日常家庭自动化算法有多么容易。我还试图展示这种编程环境的主要优点，例如：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -连接和功能的逻辑图形表示</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -易于编程和调试用户脚本的便捷性</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -所生成算法的硬件和平台独立性-该脚本与OpenHAB，ioBroker和与其他任何支持MQTT协议的智能家居平台。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -通过复制粘贴JSON代码以及在线平台的存在，用户可以方便地在用户之间交换现成的算法，从而可以交换成功的解决方案。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node-RED可以做更多的事情，例如，从Internet接收天气，向Twitter发送通知或使用Nest恒温器。</font><font style="vertical-align: inherit;">在此基础上，您可以创建许多其他有趣且有用的自动化算法。</font><font style="vertical-align: inherit;">但是这些是以下文章的主题。</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN396985/">https://habr.com/ru/post/zh-CN396985/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN396975/index.html">车载电脑，2016年</a></li>
<li><a href="../zh-CN396977/index.html">人工智能存在语言问题</a></li>
<li><a href="../zh-CN396979/index.html">关键角色：D＆D新视角</a></li>
<li><a href="../zh-CN396981/index.html">世界上第一台由过氧化氢驱动的软独立机器人</a></li>
<li><a href="../zh-CN396983/index.html">我如何成为无线电爱好者并注册了我的第一个RES</a></li>
<li><a href="../zh-CN396987/index.html">智能纳米机器人可根据大脑状况注射物质</a></li>
<li><a href="../zh-CN396989/index.html">基于空调通道室内机的送风系统</a></li>
<li><a href="../zh-CN396993/index.html">Wikiverse项目：Wikipedia信息世界的可视化</a></li>
<li><a href="../zh-CN396995/index.html">嘿，我在那边吗？</a></li>
<li><a href="../zh-CN396997/index.html">如何使用密码打开计算机？Windows上的密码绕过</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>