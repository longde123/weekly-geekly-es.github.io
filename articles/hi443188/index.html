<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯзШЁЯП╜ ЁЯСйЁЯП╛тАНЁЯдЭтАНЁЯСйЁЯП╜ ЁЯзЮ рддреАрди рдЖрдБрдЦреЗрдВ рдПрдХ рдЦрдВрднреЗ рдкрд░ рд▓рдЯрдХреА рд╣реБрдИ рд╣реИрдВ, рдпрд╛ рдХрд╣рд╛рдиреА рд╣реИ рдХрд┐ рдПрдЯреАрдЯреАрдиреА 13 рдХреЗ рдкрд╛рдВрдЪ рдкреИрд░ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИрдВ ЁЯдб ЁЯШв ЁЯЧ╛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="KDPV "рдУрд╣, рдпрд╣ рдмрд╛рдд рд╣реИред" 


 рдЗрд╕ рдмрд╛рдд рдХреА рдмрд╣реБрдд рдХрдо рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рдпрд╣ рд▓рд╛рд▓рд╕рд╛ рдмреБрджреНрдзрд┐рдЬреАрд╡рд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЬреНрдЮрд╛рди рдХрд╛ рд╕реНрд░реЛрдд рдмрди рдЬрд╛рдПрдЧреА, рдЬреЛ рдХрд╛рд░реНрдиреЛрдЯ рдХрд╛рд░реНрдб рдкрд░ рдЕрдЯрдХрд▓ рдХреЗ рд░рд╣рд╕реНрдпреЛрдВ рдо...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рддреАрди рдЖрдБрдЦреЗрдВ рдПрдХ рдЦрдВрднреЗ рдкрд░ рд▓рдЯрдХреА рд╣реБрдИ рд╣реИрдВ, рдпрд╛ рдХрд╣рд╛рдиреА рд╣реИ рдХрд┐ рдПрдЯреАрдЯреАрдиреА 13 рдХреЗ рдкрд╛рдВрдЪ рдкреИрд░ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443188/"><p><img src="https://habrastorage.org/webt/51/tw/-p/51tw-pewtw_nf5txookeohz5qga.jpeg"><br>  <em>KDPV "рдУрд╣, рдпрд╣ рдмрд╛рдд рд╣реИред"</em> </p><br><p>  рдЗрд╕ рдмрд╛рдд рдХреА рдмрд╣реБрдд рдХрдо рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рдпрд╣ рд▓рд╛рд▓рд╕рд╛ рдмреБрджреНрдзрд┐рдЬреАрд╡рд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЬреНрдЮрд╛рди рдХрд╛ рд╕реНрд░реЛрдд рдмрди рдЬрд╛рдПрдЧреА, рдЬреЛ рдХрд╛рд░реНрдиреЛрдЯ рдХрд╛рд░реНрдб рдкрд░ рдЕрдЯрдХрд▓ рдХреЗ рд░рд╣рд╕реНрдпреЛрдВ рдореЗрдВ рдкрд░рд┐рд╖реНрдХреГрдд рд╣реЛрдЧреА рдФрд░ рддреАрд╕рд░реЗ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рдХреЗ рдЧреБрдкреНрдд рдЕрд░реНрде рдХреЛ рдЬрд╛рди рд╕рдХреЗрдЧреАред  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рдЖрдк рдЕрдкрдиреЗ рд╣рд╛рдереЛрдВ рд╕реЗ рдЕрдкрдиреЗ рдЖрд░реНрдбрд┐рдиреЛ рдХреЛ рдЫреВрддреЗ рд╣реИрдВ, рддреЛ рдПрдХ рдЯрд╛рдВрдХрд╛ рд▓рдЧрд╛рдиреЗ рд╡рд╛рд▓рд╛ рд▓реЛрд╣рд╛ рдкреЗрдВрдЯреНрд░реА рдореЗрдВ рдзреВрд▓ рдЗрдХрдЯреНрдард╛ рдХрд░ рд░рд╣рд╛ рд╣реИ, рдЖрдк рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рдмреИрдЯрд░реА рдореЗрдВ рдПрдХ рдкреНрд▓рд╕ рдХреНрдпреЛрдВ рд╣реИ, рдФрд░ рд╕реА ++ рдореЗрдВ рджреЛ рд╣реИрдВ, рддреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЬрд╛рджреБрдИ рдФрд░ рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рдЪрдорддреНрдХрд╛рд░ рдЖрдкрдХреЛ рдЙрджрд╛рд╕реАрди рдирд╣реАрдВ рдЫреЛрдбрд╝реЗрдВрдЧреЗред  рдЗрд╕рд▓рд┐рдП, рдореБрдЭреЗ рдЖрдкрдХреЛ рдЖрдЬ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рдиреЗ рдХреА рдЦреБрд╢реА рд╣реИ, рдЬреЛ рдХрд┐ рд╕рд░реНрдХрд╕ <abbr title="рдпреЗ рдХрд▓рд╛рдХрд╛рд░реЛрдВ, рдПрдбреЛрдм - рд╢рд╛рдЦрд╛рдУрдВ, рдорд┐рдЯреНрдЯреА рдФрд░ рдЕрдиреНрдп рдЪреАрдЬреЛрдВ рд╕реЗ рдмрдиреЗ рдИрдВрдЯреЛрдВ рдХреЗ рдирд╛рдо рдирд╣реАрдВ рд╣реИрдВ, рдмрд▓реНрдХрд┐ рдмреЙрдХреНрд╕рд╡реБрдб - рдХреАрдорддреА рдкреЗрдбрд╝ рдХреА рдПрдХ рдкреНрд░рдЬрд╛рддрд┐ред">"рдмреЙрдХреНрд╕рд╡реБрдб рдХреЗ рд╕рд╛рде рд╕рдорди" рд╣реИ</abbr> : </p><br><ul><li>  ATtiny13 рдореЗрдВ RAM рдФрд░ ROM рдХреЛ рдЬреЛрдбрд╝рдирд╛! </li><li>  рдПрдХ рдорд╛рдЗрдХреНрд░реЛрдкреНрд░реЛрд╕реЗрд╕рд░ рдореЗрдВ рдХреГрддреНрд░рд┐рдо рдмреБрджреНрдзрд┐рдорддреНрддрд╛ - рдкреНрд░реЛ рдФрд░ рдЧрд░реНрднрдирд┐рд░реЛрдзрдХ, рдпрд╛ рдПрдХ рдиреАрдВрдж рд╕реМрдВрджрд░реНрдп - рдареАрдХ рд╣реИ, рдХреНрдпрд╛ рд╡рд╣ рдореВрд░реНрдЦ рдирд╣реАрдВ рд╣реИ? </li><li>  рдпрд╛ рдпрд╣ рдЕрднреА рднреА рдбреНрдпреВрд░рд╛ рд▓реЗрдХреНрд╕ рд╕реЗрдб рд▓реЗрдХреНрд╕ рд╣реИ? </li><li>  ATtiny13 рдореЗрдВ рдкреИрд░ рдХреИрд╕реЗ рдЬреЛрдбрд╝реЗрдВ? </li><li>  рдкрд╛рдВрдЪрд╡реЗрдВ рдЖрдпрд╛рдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рд╢рдмреНрдж: рдЕрд╕рд╣рдиреАрдп рдХреЛ рд░рдЯрдирд╛ рдХреИрд╕реЗ? </li><li>  рдЖрдзрд╛ рдЧреИрд░-рдХреБрдВрд╡рд╛рд░реА рдореЗрдВ рд╕реЗрд╡рд┐рдВрдЧ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдорд┐рд▓рд╛рддреЗ рд╣реБрдП (рд╡рд╕реВрд▓реА рдХреА рдЧрд╛рд░рдВрдЯреА рдХреЗ рд╕рд╛рде)ред </li><li>  "рдЦрд┐рд▓рд╛ рдЦрд┐рд▓рд╛ рд╣реБрдЖ" (рджреЗрдЦреЗрдВ рдкрд╛рдВрдЪ рд╣рдЬрд╛рд░ рд▓реЛрдЧреЛрдВ рдХреЗ рдкрд╣рд▓реЗ рдХреЗ рдорд╛рдорд▓реЗ рдХреЛ рдкрд╛рдВрдЪ рдЬреМ рдХреА рд░реЛрдЯрд┐рдпреЛрдВ рдФрд░ рджреЛ рдордЫрд▓рд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрддреГрдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ)ред </li></ul><br><p>  рдпрджрд┐ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдПрдХ рдЪрд╛рд▓ рд╣рд░ рдмреАрд╕рд╡реАрдВ рдкрд╛рдардХ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдЖрддреА рд╣реИ, рддреЛ рдореИрдВ рд╕рдВрддреБрд╖реНрдЯ рд╣реЛ рдЬрд╛рдКрдВрдЧрд╛, рд▓реЗрдЦ рд╡реНрдпрд░реНрде рдирд╣реАрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛ред </p><a name="habracut"></a><br><h2 id="svetofor-pervyy-ili-kaa-prinimaet-boy">  рдкрд╣рд▓реЗ рдЯреНрд░реИрдлрд┐рдХ рд▓рд╛рдЗрдЯ рдпрд╛ рдХрд╛рдпрд╛ рд▓рдбрд╝рд╛рдИ рдореЗрдВ рд▓реЗ рдЬрд╛рддреА рд╣реИред </h2><br><p>  рдХрд╣рд╛рдиреА рдХреА рд╢реБрд░реБрдЖрдд рдПрдХ рдХреНрд▓рд╛рд╕рд┐рдХ рдХреНрд░рд┐рд╕рдорд╕ рдкреВрд░реНрд╡-рдХреНрд░рд┐рд╕рдорд╕ рд╡реАрдбрд┐рдпреЛ рдХреЗ рд░реВрдк рдореЗрдВ рд╣реБрдИ, рдЬрдм рдХреИрдорд░рд╛ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рдЖрд░рд╛рдорджрд╛рдпрдХ рдХрдорд░реЗ рдореЗрдВ рдПрдХ рдкрд╛рд▓реЗ рд╕реЗрдУрдврд╝ рд▓рд┐рдпрд╛ рдЦрд┐рдбрд╝рдХреА рд╕реЗ рджрд┐рдЦрддрд╛ рд╣реИ: рдЯрд┐рдирд╕реЗрд▓, рдХрдкрд╛рд╕ рдКрди рдФрд░ рдЦрд┐рд▓реМрдиреЛрдВ рдореЗрдВ рдПрдХ рдХреНрд░рд┐рд╕рдорд╕ рдХрд╛ рдкреЗрдбрд╝, рдХреАрдиреВ рдФрд░ рдореБрд▓реНрддрд╛рдиреА рд╢рд░рд╛рдм рдХреА рдЧрдВрдз, рдореЛрдордмрддреНрддреА рдХреА рд░реЛрд╢рдиреА рд╕реЗ рдЫрд╛рдпрд╛ рдХрд╛ рдЧрд░реНрдо рдХрдВрдкрдХрдВрдкреАред  рдмрдбрд╝реЗ рд╕реЛрдлреЗ рдкрд░, рд╡рд╣ рдкреНрд▓реЗрдб рдХреЛ рд╕реАрдзрд╛ рдХрд░рддреА рд╣реИ рдФрд░ рдзреАрд░реЗ рд╕реЗ рдЙрд╕рдХреЗ рдЧрд╛рд▓ рдХреЛ рдЕрдкрдиреЗ рдХрдВрдзреЗ рд╕реЗ рджрдмрд╛рддреА рд╣реИ, рдЕрдиреБрдкрд╕реНрдерд┐рдд рд░реВрдк рд╕реЗ рдЙрддреНрд╕рд╛рд╣ рд╕реЗ рд╕реБрдирдиреЗ рд╡рд╛рд▓реА рдкрд░реА рдЬреИрд╕реА рджрд┐рдЦрдиреЗ рд╡рд╛рд▓реА рдЫреЛрдЯреА рд▓рдбрд╝рдХреА ... </p><br><p>  рдорд╛рддрд╛-рдкрд┐рддрд╛ рдХреЗ рдЕрдиреБрднрд╡ рд╡рд╛рд▓реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдРрд╕реЗ рдХреНрд╖рдг рдореЗрдВ рдЖрдк рдХреНрдпрд╛ рд╕реБрди рд╕рдХрддреЗ рд╣реИрдВред  рдореИрдВ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЛ рд╕рдордЭрд╛рдКрдВрдЧрд╛ рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ рдЕрднреА рддрдХ рдЗрд╕ рддрд░рд╣ рдХреЗ рдХреМрд╢рд▓ рдХрд╛ рдЕрдзрд┐рдЧреНрд░рд╣рдг рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ - рдЙрдЪреНрдЪ рд╕реНрддрд░ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХреЗ рд╕рд╛рде, рдорд╛рддрд╛-рдкрд┐рддрд╛ рдЕрдм рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЧреВрдВрдЧреЗ рд╣реИрдВ: "рдкрд┐рддрд╛рдЬреА!  рд╣рдореЗрдВ рдХрд▓!  рдмрд╛рд▓рд╡рд╛рдбрд╝реА рдХреЛ!  рдореБрдЭреЗ рдХрд░рдирд╛ рд╣реИ!  рдХреНрд░рд┐рд╕рдорд╕ рдкреЗрдбрд╝ рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛ рдХреЗ рд▓рд┐рдП рд╢рд┐рд▓реНрдк рд▓рд╛рдУ!  рдФрд░ рдореБрдЭреЗ рдкрд╣рд▓реА рдЬрдЧрд╣ рдЪрд╛рд╣рд┐рдП! тАЭ </p><br><p>  рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рдХрд▓ред  рд╣рдорд╛рд░реЗ рд▓рд┐рдПред  рд╢рд┐рд▓реНрдкред  рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ред </p><br><p>  рдЧреНрд░рд╛рд╣рдХ рдХреЗ рд╕рд╛рде рд╢рд╛рдорд┐рд▓ рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░ рдХрд╛рд░реНрдп рдХреЗ рд╡рд┐рд╡рд░рдг рдХреЗ рд░реВрдк рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ: рд╣рдореЗрдВ рдЯреНрд░реИрдлрд┐рдХ рд▓рд╛рдЗрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдФрд░ рдПрдХ рдЕрд╕рд▓реА рдХреА рддрд░рд╣ рд╕реБрдВрджрд░ рдФрд░ рдЪрдордХ рд╣реЛрдирд╛ред  рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕ рд╕реНрддрд░ рдкрд░, ISU рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдЙрдореНрдореАрджрд╡рд╛рд░реЛрдВ рдХреЗ рд░реИрдВрдХ рдирд╛рдЯрдХреАрдп рд░реВрдк рд╕реЗ рдкрддрд▓реЗ рд╣реЛ рд░рд╣реЗ рд╣реИрдВ: рдкрд┐рддрд╛рдЬреА рдЗрд╕ рд╡рд┐рдЪрд╛рд░ рдХреЛ рдкреБрд╖реНрдЯ рдХрд░рдиреЗ рдореЗрдВ рдЕрд╕рдорд░реНрде рд╣реИрдВ рдХрд┐ рдкреИрдЪрд╡рд░реНрдХ рдпрд╛ рдмреБрдирд╛ рд╣реБрдЖ рдпрд╛ рдХреНрд░реЛрдХреЗрдЯреЗрдб рдЯреНрд░реИрдлрд┐рдХ рд▓рд╛рдЗрдЯ рд╕реЗ рдПрдХ рд╕реБрдВрджрд░, рдореБрд▓рд╛рдпрдо, рд╕рд┐рд▓рдирд╛ рдЯреНрд░реИрдлрд╝рд┐рдХ рд▓рд╛рдЗрдЯ рдЧреНрд░рд╛рд╣рдХ рдХреЗ рд╕рдкрдиреЛрдВ рдХрд╛ рдПрдХ рдореВрд░реНрдд рд░реВрдк рд╣реИ: рдЯреНрд░реИрдлрд╝рд┐рдХ рд▓рд╛рдЗрдЯ рдЪрд╛рд▓реВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП - рдХреНрдпрд╛ рдЕрд╕реНрдкрд╖реНрдЯ рд╣реИ? </p><br><p>  рд░рд╛рдд рдкреВрд░реЗ рджреЗрд╢ рдореЗрдВ рдШреВрдорддреА рд░рд╣реА рдФрд░ рд╣рдорд╛рд░реЗ рджреЗрд╢ рдореЗрдВ рдХрд╛рдо рдореЗрдВ рдЙрдмрд╛рд▓ рдЖрдиреЗ рд▓рдЧрд╛ред </p><br><p>  рдЯреНрд░реИрдлрд┐рдХ рд▓рд╛рдЗрдЯ рдХреА рдмреЙрдбреА рдордЯреЗрд░рд┐рдпрд▓ рдПрдХ рдЯреЙрдпрд▓реЗрдЯ рдкреЗрдкрд░ рд╕реНрд▓реАрд╡ рд╣реИ, рдЬрд┐рд╕реЗ рдПрдХ рдмреЙрдХреНрд╕ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рджрд╕ рд░реВрдмрд▓ рдХреЗ рд╕рд┐рдХреНрдХреЗ рдХреЛ рдПрдХ рдкреЗрдВрд╕рд┐рд▓ рдХреЗ рд╕рд╛рде рдШреЗрд░ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рдлрд┐рд░ рдкреНрд░рдХрд╛рд╢ рдЕрд▓рд╛рд░реНрдо рдХреА рд░реЛрд╢рдиреА рдХреЗ рддрд╣рдд рд▓рд┐рдкрд┐рдХ рдЪрд╛рдХреВ рд╕реЗ рдЫреЗрдж рдХрд╛рдЯ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ (рджрд░реНрджрдирд╛рдХ рдХрд╛рдо рдмрдЪреНрдЪреЛрдВ рдкрд░ рднрд░реЛрд╕рд╛ рдирд╣реАрдВ рд╣реИ)ред </p><br><p><img src="https://habrastorage.org/webt/op/0f/az/op0fazb4pjg1z5mtam3hvudxve4.jpeg"></p><br><p>  рдЯреНрд░реИрдлрд╝рд┐рдХ рд▓рд╛рдЗрдЯ рдХреЗ рдКрдкрд░ рдФрд░ рдиреАрдЪреЗ рдХреЗ рдХрд╡рд░ рдЬрдЧрд╣-рдЬрдЧрд╣ рдХрд╛рд░реНрдбрдмреЛрд░реНрдб рд╕реЗ рдХрдЯреЗ рд╣реБрдП рд╣реИрдВред  рдмрдирд╛рдП рдЧрдП рдкреИрдЯрд░реНрди рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд▓реИрдВрдк рдХреЗ рдКрдкрд░ рдХреА рдЪреЛрдЯрд┐рдпрд╛рдБ 80 рдЧреНрд░рд╛рдо рдХреЗ рд╕рд╛рдзрд╛рд░рдг рдХрд╛рдЧрдЬ рдкрд░ рдкрд░рд┐рдХреНрд░рдорд╛ рдХреА рдЬрд╛рддреА рд╣реИрдВ рдФрд░ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдХрд╛рдЯ рджреА рдЬрд╛рддреА рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/webt/rm/ga/5u/rmga5uloolpi1di2umlqxn9lzmw.jpeg"></p><br><p>  рддрдм рд╡реЗ рдкреАрд╡реАрдП рд╕реЗ рдЪрд┐рдкрдХреЗ рд╣реБрдП рдереЗред </p><br><p><img src="https://habrastorage.org/webt/9x/ql/ff/9xqlfftsq_fphcorsj7nimjlqo8.jpeg"></p><br><p>  рдЗрдХрдЯреНрдареЗ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рдЖрдВрдЧрди рдореЗрдВ рдЦреАрдВрдЪ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдФрд░ рдРрдХреНрд░реЗрд▓рд┐рдХ рд╕реНрдкреНрд░реЗ рдкреЗрдВрдЯ рдХреЗ рд╕рд╛рде рдЪрд┐рддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛: рдЙрджрд╛рд░рддрд╛ рд╕реЗ рдЪрд╛рдВрджреА, рдлрд┐рд░ рд╢реАрд░реНрд╖ рдкрд░ рдереЛрдбрд╝рд╛ рдХрд╛рд▓рд╛ред </p><br><p><img src="https://habrastorage.org/webt/hh/bm/ha/hhbmhaz7bod1ntgplrtyfeu3bgq.jpeg"></p><br><p>  рдХрд┐рд╕реА рднреА рд╕реНрддрд░ рдкрд░ рдХреНрд╖рддрд┐ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рддреАрди рдкреНрд░рддрд┐рдпрд╛рдВ рдПрдХ рд╣реА рдмрд╛рд░ рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рдереАрдВред  рд░рдВрдЧреАрди рдкреЗрдкрд░ рдХреЗ рддреАрди рд╕реНрдЯреНрд░рд┐рдкреНрд╕ - рд▓рд╛рд▓, рдкреАрд▓реЗ рдФрд░ рд╣рд░реЗ - рдХреЛ рд╕рдмрд╕реЗ рд╕рдлрд▓ рдХреЗ рдЕрдВрджрд░ рд╣рд▓реНрдХреЗ рдлрд┐рд▓реНрдЯрд░ рдХреЗ рд╕рд╛рде рдЪрд┐рдкрдХрд╛рдпрд╛ рдЧрдпрд╛ред </p><br><p>  рдорд╛рддреГрднреВрдорд┐ (SHZZ) рдХреЗ рдЙрджрд╛рд░ рдбрд┐рдмреНрдмреЗ рд╕реЗ рд╕реБрдкрд░-рдЪрдордХрджрд╛рд░ рд╕рдлреЗрдж рдПрд▓ рдИ рдбреА рдХреА рдПрдХ рдЬреЛрдбрд╝реА рджреНрд╡рд╛рд░рд╛ рдЕрдВрджрд░ рд╕реЗ рд╣рд╛рдЗрд▓рд╛рдЗрдЯрд┐рдВрдЧ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  Kaptershchitskaya рдЯреЙрдб рдиреЗ рд╕рдкрд╛рдЯ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдХреЗ рдкрд┐рддрд╛ рдХреЛ рднреА рддреАрди рдЯреИрдмрд▓реЗрдЯ рд▓рд┐рдерд┐рдпрдо рдмреИрдЯрд░реА рджреЗрдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛, рдФрд░ рдПрд▓ рдИ рдбреА рдПрдХ рд╕реЗ рдЪрдордХрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╣рдордд рдирд╣реАрдВ рдереЗ, рдпрд╣ рдХрд╣рддреЗ рд╣реБрдП рдХрд┐ рд╡реЗ рд╕рдлреЗрдж рдФрд░ рдЙрдЬреНрдЬреНрд╡рд▓ рдереЗ, рдФрд░ рдЙрдирдХреЗ рд▓рд┐рдП рд╡реЛрд▓реНрдЯреЗрдЬ рдбреНрд░реЙрдк 2.8 рд╕реЗ 3.9 рд╡реЛрд▓реНрдЯ рдерд╛ред  рдЯреЙрдб рдХреЗ рд╕рд╛рде рд╕реМрджрд╛ рдХрд░рдиреЗ рдореЗрдВ рдЬреЛ рдЕрдзрд┐рдХрддрдо рд╣рдо рдПрдХ рдПрдП рдмреИрдЯрд░реА рдХреЗ рд▓рд┐рдП рдереЗ, рд╡рд╣ рдЬрд▓реЗ рд╣реБрдП рдорджрд░рдмреЛрд░реНрдб рдХреЗ рдереНрд░реЙрдЯрд▓ рд╕реЗ рдПрдХ рдлреЗрд░рд╛рдЗрдЯ рд░рд┐рдВрдЧ рдФрд░ KT315 рдЯреНрд░рд╛рдВрдЬрд┐рд╕реНрдЯрд░ рдерд╛ред  рдпрд╣ рд╕реЛрдЪрдХрд░ рдФрд░ рдЧреБрдЧрд▓реА рдХрд░рддреЗ рд╣реБрдП, рдкрд┐рддрд╛рдЬреА рдХреЛ рдкреНрд░рд╕реНрддрд╛рд╡ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред  рдФрд░ рдмрд╛рд▓рд╡рд╛рдбрд╝реА рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд╕рдореВрд╣ рдореЗрдВ рдЪрдВрдЪрд▓ рдкреЗрди рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рд▓рд┐рдерд┐рдпрдо рдмреИрдЯрд░реА рд╡рд╛рд▓реЗ рд╡рд┐рдЪрд╛рд░ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЖрдХрд░реНрд╖рдХ рдирд╣реАрдВ рджрд┐рдЦрддреЗ рдереЗред </p><br><p>  рдмреИрдЯрд░реА рдкрд░ рдЯреНрд░реИрдлрд┐рдХ рд▓рд╛рдЗрдЯ рдХреЗ рдкрддрд╡рд╛рд░реЛрдВ рдиреЗ рдкреЗрдВрдЯ рдХреА рдХрдареЛрд░ рдЧрдВрдз рдХреЗ рд╕рд╛рде рд╕реБрдЗрдпреЛрдВ рдФрд░ рдЯреЗрдВрдЬреЗрд░реАрди рдХреА рд╕реБрдЧрдВрдз рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛, рдореЗрд░реЗ рдкрд┐рддрд╛ рдиреЗ рд╕реЛрдЪ рд╕рдордЭрдХрд░ рд░реЛрд╕рд┐рди рдкрд░ рдЯрд╛рдВрдХрд╛ рд▓рдЧрд╛рдиреЗ рд╡рд╛рд▓рд╛ рд▓реЛрд╣рд╛ рдбрд╛рд▓рд╛, рдмрдЪреНрдЪреЛрдВ рдХреЛ рдЬрдирд░реЗрдЯрд░ (рдкреНрд░рддрд┐рдпреЛрдВ рдХреЗ рджреЛрд╣рд░рд╛рд╡) рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдЬрдЦреНрдореА рдЯреНрд░рд╛рдВрд╕рдлрд╛рд░реНрдорд░, рд╕рдм рдХреБрдЫ рдпреЛрдЬрдирд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЪрд▓рд╛ рдЧрдпрд╛ ... </p><br><p>  рдФрд░ рдирд╣реАрдВ, "рдЕрдЪрд╛рдирдХ" рдЙрд╕ рд░рд╛рдд рдРрд╕рд╛ рдирд╣реАрдВ рд╣реБрдЖ: рдПрдХ рдЯреНрд░рд╛рдВрд╕рдлреЙрд░реНрдорд░ рдХреЛ рдШреБрдорд╛рд╡рджрд╛рд░ рдХрд░рддреЗ рд╕рдордп рд╕рднреА рдЪрд╛рд▓реЗрдВ рддреБрд░рдВрдд рдПрдХ рдбрдмрд▓ рддрд╛рд░ рдХреЗ рд╕рд╛рде рдЕрдзрд┐рдХрддрдо рд╕рдВрднрд╡ рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдШреБрдорд╛рд╡реЛрдВ рдХреЛ рд╣рд╡рд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛрддреА рд╣реИрдВред  рдПрд▓рдИрдбреА рдХреЗ рдПрдиреЛрдб рдФрд░ рдХреИрдереЛрдб рдФрд░ KT315 рдЯреНрд░рд╛рдВрдЬрд┐рд╕реНрдЯрд░ рдХреЗ рдЯрд░реНрдорд┐рдирд▓реЛрдВ рдХреЛ рднреНрд░рдорд┐рдд рди рдХрд░реЗрдВ рдФрд░ рд╕рд░реНрдХрд┐рдЯ рдЖрд░реЗрдЦ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╡рд┐рдВрдбрд┐рдВрдЧ рдХреЗ рд╕рд┐рд░реЛрдВ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ (рдпрд╛ рдпрджрд┐ рдирд╣реАрдВ рдЬрд▓рд╛рдпрд╛ рддреЛ рдЙрдиреНрд╣реЗрдВ рд╕реНрд╡реИрдк рдХрд░реЗрдВ)ред  J1 - рдПрдХ рдХрдВрдкреНрдпреВрдЯрд░ рдЬрдореНрдкрд░ рд╕реЗ рдкрд╛рд╡рд░ рд╕реНрд╡рд┐рдЪ, рдмрд╛рдж рдореЗрдВ рдПрдХ рдЯреНрд░реИрдлрд┐рдХ рд▓рд╛рдЗрдЯ рдХреА "рдЫрдд рдкрд░" рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ред </p><br><p>  1.5 рд╡реА рдЬреА 1 рдмреИрдЯрд░реА рд╕реЗ 3-7 рд╡реА рдХреА рдЪреЛрдЯрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрд╕реА рд╡реЛрд▓реНрдЯреЗрдЬ рдХреЗ рдЙрддреНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдПрдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рд░рд▓ рд╕рд░реНрдХрд┐рдЯ рд▓рдВрдмреЗ рд╕рдордп рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡реНрдпрд╛рдкрдХ рд░реВрдк рд╕реЗ рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ</a> ред </p><br><p><img src="https://habrastorage.org/webt/fx/on/h5/fxonh57exbpayjclrpo3k05sazg.png"></p><br><p>  рд╢рд╛рд░реАрд░рд┐рдХ рд░реВрдк рд╕реЗ, рд╕рд░реНрдХрд┐рдЯ рдЖрд░реЗрдЦ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╕рдиреНрдирд┐рд╣рд┐рдд рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/tt/aq/4u/ttaq4unttq55rdeg-f0tr0ti3zq.png"></p><br><p>  рд▓рд╛рд▓ рдЯреЗрдк рдореЗрдВ AA рдХреНрд╖рд╛рд░реАрдп рдмреИрдЯрд░реА рд╣реЛрддреА рд╣реИред </p><br><p>  рдФрд░ рдЯреНрд░реИрдлрд┐рдХ рд▓рд╛рдЗрдЯ рдЕрдкрдиреЗ рдЖрдк рдореЗрдВ рдРрд╕реА рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/2s/5w/dd/2s5wddfdxjkcl34w1mgj_neduyg.jpeg"></p><br><p>  рд╕реБрдмрд╣ рдореЗрдВ, рдЧрд░реНрд╡рд┐рдд рдмрдЪреНрдЪреЗ рдиреЗ рдЙрддреНрдкрд╛рдж рдХреЛ рдмрд╛рд▓рд╡рд╛рдбрд╝реА рдореЗрдВ рдЦреАрдВрдЪ рд▓рд┐рдпрд╛, рдЬрд╣рд╛рдВ рдЦрд┐рд▓реМрдиреЗ рдиреЗ рдПрдХ рдЫрдк рдмрдирд╛рдпрд╛ рдФрд░ рдХреНрд░рд┐рд╕рдорд╕ рдХреЗ рдкреЗрдбрд╝ рдкрд░ рдХреЗрдВрджреНрд░ рдЪрд░рдг рд▓рд┐рдпрд╛ред </p><br><p><img src="https://habrastorage.org/webt/zz/fy/yc/zzfyyckk-i-jdncvaangd1cee8u.jpeg"></p><br><p>  рд╕рдЪ рд╣реИ, рдпрд╣ рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реНрдерд╛рди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рдерд╛ - рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпреЛрдВ рдХреЛ рдЬрдорд╛ рдХрд░рдиреЗ рдХреА рд╕рдордп рд╕реАрдорд╛ рдереА, рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рдирд┐рдХрд▓рд╛, рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХреБрдЫ рджрд┐рди рдкрд╣рд▓реЗред </p><br><p>  рдШрд░ рдкрд░, "рдореЗрд░реЗ рд▓рд┐рдП рдПрдХ рдЕрд╕рд▓реА рдЯреНрд░реИрдлрд┐рдХ рд▓рд╛рдЗрдЯ рдХреА рддрд░рд╣" рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд╕рдорд╛рдзрд╛рди рдХреЗ рд╕рд╛рде рдЦрд┐рдбрд╝рдХреА рдФрд░ рдореЗрд░реЗ рдкрд┐рддрд╛ рдХреА рдЦреБрдЬрд▓реА рдЕрд╕рдВрддреЛрд╖ рдкрд░ рджреЛ рдЗрдорд╛рд░рддреЗрдВ рдереАрдВред  рдФрд░ рдпрд╣ рд╡рд┐рдЪрд╛рд░ <abbr title="рдорд╛рддреГрднреВрдорд┐ рдХреЗ рдЙрджрд╛рд░ рдбрд┐рдмреНрдмреЗ, рдпрд╛, рдЕрдкрдиреА рдкрддреНрдиреА рдХреЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рдкреНрд▓рд╛рдпрд╕реНрдХрд┐рди рднрдВрдбрд╛рд░ред">рдШреВрдо</abbr> рд░рд╣рд╛ рдерд╛ рдХрд┐ "рдХреНрдпрд╛ рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдПрдХ рдкреВрд░реНрдг рд╕рдорд╛рдзрд╛рди рдлрд┐рдЯ рдХрд┐рдпрд╛ рдЬрд╛рдП, 13 рд╡реАрдВ рдмрд╛рдд рдореЗрдВ рдХрд╣реЗрдВ, рдХрд┐ рдЯреЙрдб рд▓рдВрдмреЗ рд╕рдордп <abbr title="рдорд╛рддреГрднреВрдорд┐ рдХреЗ рдЙрджрд╛рд░ рдбрд┐рдмреНрдмреЗ, рдпрд╛, рдЕрдкрдиреА рдкрддреНрдиреА рдХреЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рдкреНрд▓рд╛рдпрд╕реНрдХрд┐рди рднрдВрдбрд╛рд░ред">рд╕реЗ ShchZR</abbr> рдореЗрдВ рдкрдбрд╝рд╛ рд╣реБрдЖ <abbr title="рдорд╛рддреГрднреВрдорд┐ рдХреЗ рдЙрджрд╛рд░ рдбрд┐рдмреНрдмреЗ, рдпрд╛, рдЕрдкрдиреА рдкрддреНрдиреА рдХреЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рдкреНрд▓рд╛рдпрд╕реНрдХрд┐рди рднрдВрдбрд╛рд░ред">рд╣реИ</abbr> ? рдХреНрдпрд╛ рдкрд░реНрдпрд╛рдкреНрдд рдкрд╛рдВрдЪ рдкреИрд░ рд╣реЛрдВрдЧреЗ, рдХреЛрдб рдХреЗ рд▓рд┐рдП рдПрдХ рдХрд┐рд▓реЛрдмрд╛рдЗрдЯ рдФрд░ RAM рдХреЗ 64 рдмрд╛рдЗрдЯреНрд╕ рдФрд░, рдЬреИрд╕рд╛ рдХрд┐, рдПрдХ рдЕрд╕рд▓реА рдХреА рддрд░рд╣?" </p><br><p>  рддреЛ рдпрд╣ рд╕рдм рд╕рд┐рд░реНрдл рдПрдХ рдХрд╣рд╛рд╡рдд рдереА, рдЖрдЧреЗ рдЯреНрд░реИрдлрд┐рдХ рд▓рд╛рдЗрдЯ рдореБрджреНрджреЗ рдХреЗ рдЕрдВрддрд┐рдо рд╕рдорд╛рдзрд╛рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдкрд░реА рдХрдерд╛ред </p><br><h2 id="svetofor-vtoroy-kak-nastoyaschiy">  рдПрдХ рдЕрд╕рд▓реА рдХреА рддрд░рд╣ рджреВрд╕рд░рд╛ рдЯреНрд░реИрдлрд┐рдХ рд▓рд╛рдЗрдЯ </h2><br><h3 id="ispolzuemyy-instrumentariy-materialy-i-dokumentaciya">  рдкреНрд░рдпреБрдХреНрдд рдЙрдкрдХрд░рдг, рд╕рд╛рдордЧреНрд░реА рдФрд░ рдкреНрд░рд▓реЗрдЦрди </h3><br><p>  <em>рднрд╛рд╖рд╛ / рд░реВрдкрд░реЗрдЦрд╛</em> : C / Arduino 1.6 / 1.8ред <br>  <em>рдЖрдИрдбреАрдИ</em> : рдПрдордПрд╕ рд╡рд┐рдЬрд╝реБрдЕрд▓ рд╕реНрдЯреВрдбрд┐рдпреЛ 2012 + рд╡рд┐рдЬрд╝реБрдЕрд▓ рдорд╛рдЗрдХреНрд░реЛ рдкреНрд▓рдЧрдЗрди + рдЧрд┐рдЯред <br>  <em>CAD</em> : рдбрд┐рдкрдЯреНрд░реЗрд╕ред <br>  <em>HW</em> : ATtiny13 MK, ATmega328 рдкрд░ Arduino рдиреИрдиреЛ рдХреНрд▓реЛрди, FT232R рдкрд░ USB-UART, рдЪрд╛рдЗрдирд╛-рдиреЙрди USBISP рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ред <br>  <em><abbr title="рд╕рд░реНрдХрд┐рдЯ рдмреЛрд░реНрдбред">рдкреАрдкреА</abbr> рддрдХрдиреАрдХ</em> : <abbr title="рд▓реЗрдЬрд░ рдФрд░ рдЖрдпрд░рди рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреАред">LUT</abbr> ред <br>  <em>рдЙрдкрдХрд░рдг</em> : рдЯрд╛рдВрдХрд╛ рд▓рдЧрд╛рдиреЗ рд╡рд╛рд▓рд╛ рд▓реЛрд╣рд╛, рдЧреЛрдВрдж рдмрдВрджреВрдХ, рд░рд╕реЛрдИ рдУрд╡рди, рдЪрд╛рдХреВ, рдХреИрдВрдЪреА, рддрд╛рд░ рдХрдЯрд░ред <br>  <em>рд╕рд╛рдордЧреНрд░реА</em> : <abbr title="рдХрдард┐рди рдирд┐рдпрддрд┐ рд╡рд╛рд▓реЗ рдЗрд▓реЗрдХреНрдЯреНрд░реЙрдирд┐рдХ рдШрдЯрдХреЛрдВ рдХрд╛ рднрдВрдбрд╛рд░ - рдЕрд▓рд╕реАрдкреЗрдХреНрд╕, рдЖрджрд┐ рдкрд░ рдПрдХ рдмрд╛рд░ рдЦрд░реАрджрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛, рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рд╣реБрдЖред">ShchZR рд╕реЗ</abbr> - 4 рд▓рд╛рд▓, рдкреАрд▓реЗ, рд╣рд░реЗ рд░рдВрдЧ рдХреЗ рдЖрдЙрдЯрдкреБрдЯ <abbr title="рдХрдард┐рди рдирд┐рдпрддрд┐ рд╡рд╛рд▓реЗ рдЗрд▓реЗрдХреНрдЯреНрд░реЙрдирд┐рдХ рдШрдЯрдХреЛрдВ рдХрд╛ рднрдВрдбрд╛рд░ - рдЕрд▓рд╕реАрдкреЗрдХреНрд╕, рдЖрджрд┐ рдкрд░ рдПрдХ рдмрд╛рд░ рдЦрд░реАрджрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛, рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рд╣реБрдЖред">рдиреЙрди</abbr> рдмреНрд░рд╛рдВрдб рдХреЗ рдПрд▓ рдИ рдбреА, рдПрд╕рдПрдордбреА рдЯреИрдВрдЯрд▓рдо рдХреИрдкреЗрд╕рд┐рдЯрд░ рдФрд░ рдкреНрд░рддрд┐рд░реЛрдзреЛрдВ рдХреА рдПрдХ рдЬреЛрдбрд╝реА 0805 рдкреНрд░рддреНрдпреЗрдХ 10k, рдЖрдзрд╛ рджрд░реНрдЬрди рдЖрдЙрдЯрдкреБрдЯ 0.25W рд╡рд░реНрддрдорд╛рди-рд╕реАрдорд┐рдд рдкреНрд░рддрд┐рд░реЛрдз MF-25, рдЪреАрдиреА рд╕реНрдЯреЗрдк-рдЕрдк DC-5V рдХрдирд╡рд░реНрдЯрд░, рдПрдпрд░реЛрд╕реЛрд▓ рдХреИрди рдмрд┐рдХреНрд░реА рд╕реЗ рдЪрд╛рдВрджреА рдФрд░ рдХрд╛рд▓реЗ рд░рдВрдЧ, рдП 4 рдкреЗрдкрд░, рдмрд╣реБрд▓рдХ рдорд┐рдЯреНрдЯреА рдХреЗ рд╕рд╛рдеред </p><br><p>  <em>рд╕реНрд░реЛрдд рдФрд░ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдПрдордЖрдИрдЯреА рд▓рд╛рдЗрд╕реЗрдВрд╕ рдХреЗ рддрд╣рдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬреАрдердм</a> рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИрдВ, рд╕реНрд░реЛрдд рдХреЛрдб рдиреАрдЪреЗ рд╡рд░реНрдгрд┐рдд рдлрд╝рд░реНрдорд╡реЗрдпрд░ рдХреЗ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдХреЗ рд╕рд╛рде рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ, рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рд╕рднреА рдлрд╝рд╛рдЗрд▓ рдкрде рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреА рдЬрдбрд╝ рдХреЗ рд╕рд╛рдкреЗрдХреНрд╖ рд╣реИрдВред</em> </p><br><p>  <em>рдкреНрд░рд▓реЗрдЦрди</em> : <br>  ./docs/ATtiny13A datasheet.pdf [MK Atmel рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯрддрд╛ ATtiny13A] <br>  ./docs/ATmega328 datasheet.pdf [Atmel ATmega328 MK рд╡рд┐рд╢рд┐рд╖реНрдЯрддрд╛] <br>  ./docs/AVR4027 - рдЕрдкрдиреЗ C Code.pdf рдХреЛ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЯрд┐рдкреНрд╕ рдФрд░ рдЯреНрд░рд┐рдХреНрд╕ [Atmel AVR4027: 8-рдмрд┐рдЯ AVR рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рд▓рд┐рдП рдЖрдкрдХрд╛ C рдХреЛрдб рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЯрд┐рдкреНрд╕ рдФрд░ рдЯреНрд░рд┐рдХреНрд╕] <br>  ./docs/AVR4013 - рдкрд┐рдХреЛрд╡рд░ рдореВрд▓ рдмрд╛рддреЗрдВред рдкреАрдбреАрдПрдл [рдкрд╛рд╡рд░ рд╕реЗрд╡рд┐рдВрдЧ рдореЛрдбреНрд╕ рдкрд░ рдиреЛрдЯреНрд╕] </p><br><p>  рдХреНрд▓рд╛рдЙрдб рд╕реЗ рдХрдВрдмрд▓ рдХреА рддрд░рд╣ Arduino <abbr title="рдЕрднрд┐рдпрд╛рдВрддреНрд░рд┐рдХреАред рдПрдХреАрдХреГрдд рд╡рд┐рдХрд╛рд╕ рдкрд░реНрдпрд╛рд╡рд░рдг">IDE</abbr> рд╕реЗред  рдЙрдирдХрд╛ рд╡рд┐рдЬ рд╣рд░ рдЪреАрдЬ рдХрд╛ рдЬреЗрд╕реБрдЗрдЯ рд╕реВрдХреНрд╖реНрдо рдордЬрд╛рдХ рд╣реИ рдЬреЛ рдПрдореНрдмреЗрдб-рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рдмреАрдЪ рдкрд╡рд┐рддреНрд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди Arduino, рдПрдХ рдкрд╛рд░рд┐рд╕реНрдерд┐рддрд┐рдХреА рддрдВрддреНрд░ рдХреЗ рд░реВрдк рдореЗрдВ, рдЬрд┐рдпреЛ, рдЬрд┐рдпреЛ рдФрд░ рдЬреАрдиреЗ рджреЛ, рдФрд░ рд╡рд┐рднрд┐рдиреНрди OS рдХреЗ рддрд╣рдд рдХрдВрдкреНрдпреВрдЯрд░реЛрдВ рдкрд░ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рд╕рд╛рджрдЧреА рдХреЗ рдХрд╛рд░рдг, рдФрд░ рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдкрд╣рд▓реА рдмрд╛рд░ рд╕рдХреНрд╖рдо рдереЗ, рдмрд┐рдирд╛ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдбрд┐рдмрдЧрд░ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдЦрд░реНрдЪ рдХрд┐рдП, рдПрдХ рдкреИрд╕рд╛ UART рдФрд░ рдПрдХ рдорд╛рд▓рд┐рдХрд╛рдирд╛ рдмреВрдЯрд▓реЛрдбрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рдПрдХ рдХрд╛рдлреА рдЧрдВрднреАрд░ рднрд░рд╛рдИ рдПрдордХреЗ рдореЗрдВ рд╡рд┐рдХрд╛рд╕ред  рдФрд░ рдпрд╣рд╛рдВ рдЕрдВрдХрд▓ рд▓рд┐рдпрд╛рдУ, рдПрдХ рдореВрд▓ рдХреА рдХреАрдордд рдкрд░ рдореБрдЯреНрдареА рднрд░ рдХреНрд▓реЛрди рдмреЗрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рд╡рд░рд┐рд╖реНрда atmegs рдореЗрдВ рдЖрдк рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рддрд░реНрдХ рдФрд░ рд╕рдВрдЪрд╛рд▓рди рдХреЛ рдбреАрдмрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдЙрд╕реА рддрд┐рдирдХрд╛ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреНрдпреВрдирддрдо рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рд╕рд╛рде - рдпрд╣ рднреА рдПрдХ рддрд░реНрдХ рд╣реИред </p><br><p>  рдореЗрд░реЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">MS VisualStudio</a> рдореЗрдВ рдХрд╛рдо рдХрд░рдирд╛ рд╕рд╛рдорд╛рдиреНрдп рдФрд░ рдЖрд░рд╛рдорджрд╛рдпрдХ рд╣реИ, рдореЗрд░реЗ рдкрд╛рд╕ AtmelStudio рдпрд╛ WinAVR рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕реНрдерд╛рди рдирд╣реАрдВ рд╣реИ рдФрд░ рдореИрдВ рдЗрд╕реЗ рдирд╣реАрдВ рдвреВрдВрдврдирд╛ рдЪрд╛рд╣рддрд╛, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдбрд┐рдмрдЧрд░ рдХреЗ</a> рдмрд┐рдирд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">,</a> рдЙрдирдХреЗ рдкрд╛рд╕ рдЕрдВрддрд┐рдо рд╕реБрд╡рд┐рдзрд╛рдПрдВ рдирд╣реАрдВ рд╣реИрдВред  VisualMicro рдкреНрд▓рдЧрдЗрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ, рдЬреЛ MS VisualStudio рдХреЛ Arduino рд╕рдорд░реНрдерди рдЬреЛрдбрд╝рддрд╛ рд╣реИ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">, рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА</a> рдкрд░реНрдпрд╛рдкреНрдд рд╡рд┐рд╕реНрддрд╛рд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЗ</a> рд▓рд┐рдЦрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧрдпрд╛</a> рд╣реИ рдФрд░ рд╕рдордЭрджрд╛рд░реА рд╕реЗ рд╣реИрдмрд░ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИред <br>  рд╣рдм рдкрд░ "Arduino on ATtiny13" рдХрд╛ рдзреНрдпрд╛рди рднреА рдмрд╣реБрдд рдкрд╣рд▓реЗ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмрд╛рд░-рдмрд╛рд░</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдорд╛рдирд╛ рдЬрд╛рддрд╛</a> рдерд╛ред </p><br><p>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, Arduino рдкрд░реНрдпрд╛рд╡рд░рдг рдХреА рд╕реНрдерд╛рдкрд┐рдд рд╕реНрдерд╛рдкрдирд╛ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдорд╛рдЗрдХреНрд░реЛрдХреЛрд░</a> рдореЙрдбреНрдпреВрд▓ рдЬреЛрдбрд╝реЗрдВ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд▓рдХреНрд╖реНрдп рдХрд╛рд░реНрдб рдореЗрдВ ATtiny13 MK рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/9f/rm/fe/9frmfek8wvpfsphvtyhedqiiuoy.png"></p><br><p>  Git - рдХрд┐рд╕реА рднреА рд╡рд┐рдХрд▓реНрдк рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд╡рд┐рдХрд▓реНрдк рдирд╣реАрдВ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕рдмрд╕реЗ рдШрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВред  рдпрд╣ рдЖрджрдд рд╕рд░рд▓ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд╣реА рд╣реИ: рдХрд┐рд╕реА рднреА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдкрд░ рдХрд╛рдо рд╢реБрд░реВ рдХрд░рддреЗ рд╕рдордп, рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдкрд░ рдбрд╛рдпрд░реЗрдХреНрдЯреНрд░реА рдореЗрдВ "git init" рдЯрд╛рдЗрдк рдХрд░реЗрдВред  рдПрдордПрд╕ рд╡рд┐рдЬрд╝реБрдЕрд▓ рд╕реНрдЯреВрдбрд┐рдпреЛ рдХреЗ рд╕реНрдерд╛рдиреАрдп рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдХрдорд┐рдЯ рдХреЗ рд▓рд┐рдП рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╕рдорд░реНрдерди рд╕рдордп рдФрд░ рд╕рдордп рдХреЛ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рдмрдЪрд╛рдПрдЧрд╛ред </p><br><p>  рдбреАрдкреАрдЯреНрд░реЗрд╕, рдЬреИрд╕реЗ рд╕рд░реНрдХрд┐рдЯрд░реА рдФрд░ рдПрдХ рдореБрджреНрд░рд┐рдд рд╕рд░реНрдХрд┐рдЯ рдмреЛрд░реНрдб рдХреЗ рд▓рд┐рдП рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рдШрд░реЗрд▓реВ, рд╕рд░реНрдХрд┐рдЯрд░реА рдФрд░ рд╡рд╛рдпрд░рд┐рдВрдЧ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдЕрдиреБрдХреВрд▓ рд╣реИ, рдХрд╕реНрдЯрдо рдШрдЯрдХреЛрдВ (рдпреВрдЬреАрдУ, рд╕рдВрдкрд░реНрдХ) рдХреЛ рдЬреЛрдбрд╝рдирд╛ рдЖрд╕рд╛рди рд╣реИ, рдпрджрд┐ рд╡рд╛рдВрдЫрд┐рдд рд╣реИ, рддреЛ рдШрдЯрдХреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдореБрджреНрд░рд┐рдд рд╕рд░реНрдХрд┐рдЯ рдмреЛрд░реНрдб рдХреЛ 3 рдбреА рдореЗрдВ рдШреБрдорд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрдЪреНрдЪ рдЧреБрдгрд╡рддреНрддрд╛ рд╡рд╛рд▓реА рд╕рд╣рд╛рдпрддрд╛ рдФрд░ рдкреНрд░рд╢рд┐рдХреНрд╖рдг рд╕рдмрдХ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореИрдВ рдЙрдирдХреА рд▓рд╛рдЗрд╕реЗрдВрд╕рд┐рдВрдЧ рдиреАрддрд┐ рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рд╣реВрдВ: рдЧреИрд░-рд▓рд╛рднрдХрд╛рд░реА рдорд╛рдирдХ рд▓рд╛рдЗрд╕реЗрдВрд╕ (1000 рдкрд┐рди, 4 рд╕рд┐рдЧреНрдирд▓ рд▓реЗрдпрд░) рдХреА рд╕реАрдорд╛рдПрдВ, рд░реВрд╕, рдпреВрдХреНрд░реЗрди рдФрд░ рдмреЗрд▓рд╛рд░реВрд╕ рдЧрдгрд░рд╛рдЬреНрдп рдХреЗ рд▓рд┐рдП 99% рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдШрд░ рдХреЗ рд╢рд┐рд▓реНрдк рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИрдВред </p><br><p>  рдореИрдВ рдЕрд░реБрджрд┐рдиреЛ рдиреИрдиреЛ рдХреЛ рдареАрдХ рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рдмрдВрдзрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрд╛, рдПрдХ рдЯрд┐рдВрдХреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рд░реВрдк рдореЗрдВ, рд▓реЗрдХрд┐рди рдПрдХ рдпреВрдПрд╕рдмреА рдЖрдИрдПрд╕рдкреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рд╕рд╛рде, рд╕рдорд╕реНрдпрд╛ рдЖрд╕рд╛рдиреА рд╕реЗ рд╣рд▓ рд╣реЛ рдЧрдИ рд╣реИред  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рд╕рдВрдХрд▓рди / рдлрд░реНрдорд╡реЗрдпрд░ - ./gcc рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рддреНрд╡рд░рд┐рдд рд░реВрдк рд╕реЗ рд╕реНрдХреЗрдЪ рдХреА рдЧрдИ рдмреИрдЪ рдлрд╝рд╛рдЗрд▓реЗрдВред </p><br><p>  .Ino рдлрд╝рд╛рдЗрд▓ (рд▓реЗрдХрд┐рди рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╕реА / рд╕реА ++ рд╣реИ) рд╕реНрдЯреВрдбрд┐рдпреЛ рдореЗрдВ "рдПрдЯреАрдЯреАрдЗрди 13 рдХреЗ рддрд╣рдд рдЖрд░реНрдбрд┐рдиреЛ рдХреЗ рддрд╣рдд" рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣ рдмрд╕ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдкрд░ рдЗрд╕ рдмреИрдЪ рдлрд╝рд╛рдЗрд▓ рдХреЗ рдкреИрд░рд╛рдореАрдЯрд░ рджреНрд╡рд╛рд░рд╛ рдкрд░реЛрд╕рд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><pre><code class="plaintext">&gt;"./gcc/0_MAKE &amp; upload.cmd" MyArduinoFile.ino</code></pre><br>
<p>     ISP ,     ,      .</p><br>
<pre><code class="plaintext">&gt;"./gcc/0_MAKE &amp; asm.cmd" MyArduinoFile.ino</code></pre><br>
<p>   , ,     тАФ   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  AVR</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> . <strong></strong>: <em>         ,  </em>.</p><br>
<h3 id="dusha-svetofora"> </h3><br>
<h4 id="upgrade-romram-pod-arduino-dlya-attiny13">Upgrade ROM&amp;RAM  Arduino  ATtiny13</h4><br>
<p> Arduino  ( setup(){...}; loop(){...};)       ""   - int main(){setup(); loop();}, <em></em>        by Arduino. </p><br>
<pre><code class="cpp">uint8_t cnt;
void setup() {
    cnt=0;
}
void loop() {
  cnt++;
}
//Program size: 164 bytes (used 16% of a 1 024 byte maximum) (0,57 secs)
//Minimum Memory Usage: 5 bytes (8% of a 64 byte maximum)</code></pre><br>
<p>    ,       :</p><br>
<pre><code class="cpp">uint8_t cnt;
int main(){
    cnt=0;      // &lt; setup()
    while(1){
        cnt++;  // &lt; loop()
    }
}
//Program size: 60 bytes (used 6% of a 1 024 byte maximum) (1,23 secs)
//Minimum Memory Usage: 1 bytes (2% of a 64 byte maximum)</code></pre><br>
<p>   16%  6%   ,  ,  6%     .                   ,   тАФ      64  . </p><br>
<h4 id="intellekt-spyaschey-krasavicy">  </h4><br>
<p>  , ,  :       .         ,     ,   ,    ,     .   , ,   ,     .         ,       :  <abbr title="   = -  +      +   + ">CPU</abbr>     ,       .    тАФ   ,     N  .      ""-CPU     ,       (9.6     /    1024 = 9370 ,      ) 1/9370 = 0.0001067 .      8-   .  ,   ,    ,     " ".      ,   ,  ,           "".      37    (256  0.0001067 = 0.027315; 0.027315  37 = 1.01065 ~= 1s). </p><br>
<p>  :     - (HW ,     1024 ),   8   тАФ    ,         ,    .</p><br>
<p><strong></strong>: <em> globalTimer   volatile,  ,         ,  ,     CPU        ,           </em>.</p><br>
<pre><code class="cpp">#include &lt;avr/io.h&gt;         //     IDE -  
#include &lt;avr/sleep.h&gt;      // ,  
#include &lt;avr/interrupt.h&gt;          //   
volatile uint16_t  globalTimer;     //     64   
//  -    globalTimer  1/37 
ISR(TIM0_OVF_vect){
    globalTimer++;  //       . , ,  while(1)   .
}
int main() {
    //     "  -". 
    set_sleep_mode(SLEEP_MODE_IDLE);    //   - .
    sleep_enable();                 //    
    TCCR0B = _BV(CS02) | _BV(CS00); //  0 - clock frequency / 1024
    TIMSK0 |= _BV(TOIE0);           //      overflow interrupt
    sei();                          //    
    while(1){
        //.........   
        sleep_cpu();    //     -   .
    }
}
//Program size: 128 bytes (used 13% of a 1 024 byte maximum) (0,86 secs)
//Minimum Memory Usage: 2 bytes (3% of a 64 byte maximum)</code></pre><br>
<h4 id="u-koshki-4-nogi-vhod-vyhod-zemlya-i-pitanies-zhalostlivaya-studencheskaya-pesnya">"  4 : , ,   "()   </h4><br>
<p> , ,       .<br>
   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> </a>,   ,    CPU,   /  /    .     <abbr title="General-Purpose Input/Output,  / (I/O)  ">GPIO</abbr>.</p><br>
<p>      Arduino   :     Arduino  pin_number      ( ):</p><br>
<pre><code class="cpp">pinMode(pin_number, OUTPUT); //   INPUT -   </code></pre><br>
<p>    /     ,   тАФ       .</p><br>
<pre><code class="cpp">Value = digitalRead(pin_input_number);  //Value -  HIGH  LOW (1  0)
digitalWrite(pin_outpit_number, Value);       //   pin_outpit_number - HIGH  LOW</code></pre><br>
<p> ""  ,   Wiring    ,  ,    Arduino (        )     (  )     (  ) (    ).</p><br>
<p><img src="https://habrastorage.org/webt/fp/di/ni/fpdiniruiiujuodrtyzrcfyljr8.png"></p><br>
<p>..   Arduino 7    11  PD7 тАФ    D.<br>
  digitalRead, digitalWrite, pinMode  ..,             ,   , ,      Wiring-      ,       .</p><br>
<p>   тАФ   ,    . ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">DIHALT</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>          .</p><br>
<p><img src="https://habrastorage.org/webt/rk/y8/sj/rky8sjzln3u1k3lndv0inksdxjm.jpeg"></p><br>
<p>   -    (<abbr title=" -  ">GPIO</abbr>)     ,  8-   тАФ  8    .     ,   6     (. ATtiny13 pinout,   ),  PB0  PB5,      PB5 тАФ     MK    .    -    : (     "B") <abbr title="Data Direction Register B,   -   ">DDRB</abbr>, <abbr title="Port B Input Pins Register,    0  1  ,  ">PINB</abbr>  <abbr title="Port B Data Register,      ">PORTB</abbr>.    тАФ  ,    ,   .  PB0, PB1, PB2, PB3, PB4, PB5 тАФ       B.      #include &lt;avr/io.h&gt; (   iotn13.h  ),      (PB0  0,..., PB5 тАФ 5)      IDE,        Arduino. </p><br>
<p><strong></strong>: <em>      ,    ,       .  ,  -      , , ,   DDRx GPIO ,   тАФ .       PORTx тАФ    ,  "-    ",   ,      тАФ   ,    PINx.       ,  50       0  1.        ,      </em>.</p><br>
<div class="spoiler"><b class="spoiler_title">, </b><div class="spoiler_text"><p>  PB2   HIGH, +5,   PB3  LOW, 0,    PB0 ,  тАФ      .<br>
DDRB   ,    PB0,   ( ) = 0 (PB0   ),     = 1 (PB2, PB3 тАФ ), ..     110,   тАФ  ,  1  0 тАФ    . </p><br>
<pre><code class="cpp">DDRB = 12;  //  000001100    - 12
//        (!)
//        pinMode().</code></pre><br>
<p>      тАФ  PORTB ,    =1 (PB2  HIGH),   тАФ  (PB3  LOW),  тАФ  , 01</p><br>
<pre><code class="cpp">PORTB = 8;  //(dec)8 === (bin)000001000
//  -        .</code></pre><br>
<p>             PINB,   ,    тАФ      .<br>
  ,          тАФ  .<br>
    3 (PB3)  :   1   ,    3  .<br>
3&lt;&lt;00000001 === PB3&lt;&lt;1 //  тАФ 00001000<br>
     , _BV(x),      (x&lt;&lt;1), .. _BV(PB3) тАФ     1.<br>
 _BV(PB3) | _BV(PB2)      00001100 (| тАФ   ).<br>
<strong></strong>: <em>      ,       ,     </em>.</p><br>
<pre><code class="cpp">PORTB |= _BV(PB3) | _BV(PB2); // 2  3   == 1,     PB2  PB3  HIGH,   PORTB  </code></pre><br>
<p>  0    ,          ,    .     0     1  .       ,  ,  1     ,   0 тАФ   0 .</p><br>
<pre><code class="cpp">PORTB &amp;= ~(_BV(PB3) | _BV(PB2)); //   PORTB 2  3  -  , LOW,   .</code></pre></div></div><br>
<p>     HW , - 0, Timer0.   GPIO,    ,   ,      datasheet ATtiny13,  -     -,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <abbr title="     328,     .">Ilya Ananev</abbr>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">- 0</a>   ATmega328. </p><br>
<p>   ,    ,   .</p><br>
<pre><code class="cpp">TCCR0B = _BV(CS02) | _BV(CS00);    //    CS02  CS00  1 -   0 = clock frequency / 1024
TIMSK0 |= _BV(TOIE0);           //   TOIE0  1 -     TIM0_OVF
//      TIMSK0 = _BV(TOIE0);</code></pre><br>
<h4 id="gost-ili-zakon-est-zakon">    .</h4><br>
<p>      ,       .    ,    ,          .    -  ,        ,      ,    (!)   . </p><br>
<p>    ,       .           "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">   27.02.13</a>"  7    52289-2004     ,          .<br>
     (  ): ,   , ,  , , .</p><br>
<p>"*    "  "     2 ,    тАФ 3 . </p><br>
<p>               3        1 /.*"</p><br>
<p>   ,      (    ,      /  тАФ PERIOD_0  PERIOD_4,    тАФ  ).</p><br>
<pre><code class="cpp">#define ONE_SECOND  37      //     1 
#define QT_SECOND   9       //  

#define PERIOD_FLASH_GREEN  QT_SECOND           //    ( ) -    
#define PERIOD_FLASH_YELLOW ONE_SECOND * 1      //    -    - 
                                                        //  --- 
#define PERIOD_0    ONE_SECOND * 10 //R G R G   0.  ---   (10 )
#define PERIOD_1    ONE_SECOND * 3  //R g R g   1.  ---   (3 )     
#define PERIOD_2    ONE_SECOND * 1  //R Y R Y   2.  ---  (1 )
#define PERIOD_3    ONE_SECOND * 2  //RY Y RY Y 3. + ---  (2 ) 
#define PERIOD_4    ONE_SECOND * 7  //G R G R   4.  ---   (7 )
#define PERIOD_5    ONE_SECOND * 3  //g R g R   5.   --- (3 )
#define PERIOD_6    ONE_SECOND * 1  //Y R Y R   6.  ---  (1 )
#define PERIOD_7    ONE_SECOND * 2  //Y RY Y RY 7.  --- + (2 )</code></pre><br>
<p>  ,      ,    .</p><br>
<pre><code class="cpp">typedef struct{
    const uint8_t ddr_val_0;    // DDRB value -   
    const uint8_t port_val_0;   // PORTB value   -   
    const uint8_t ddr_val_1;    // DDRB value  -   "",   
    const uint8_t port_val_1;   // PORTB value - 
    const uint16_t flash_period;    // period of flashing -   _val_1  _val_0
    const uint16_t signal_period;   // period of this lighting state
}lightSignalization;            //   , _0  _1 -   , flash_long -   
// flash_period == 0,   ,   _val_0.
// signal_period == 0,         .</code></pre><br>
<p>  ,        128  тАФ     ,      .</p><br>
<h4 id="kak-nayti-v-attiny13-vosem-ili-devyat-pinov-vvoda-vyvoda">   ATtiny13  ( ?)  -</h4><br>
<p>   ,  ,   -  -     ,  :       6  . -  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">denvo</a>   "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> ?  RESET</a>"       5-     ,     ,      ,      ,   -   .</p><br>
<p>   -     :    --, ..      ,  7  .</p><br>
<p>     тАФ   , ,  ,   8,  ? </p><br>
<p> ,  -,      "reset", PB5,      . </p><br>
<p>   ,  ? , ,   ,    . , , ,  ,   ,  .</p><br>
<p> ,  , 8  9  -  ,    8  тАФ       .    ,    -,   , , ,   . </p><br>
<p>   тАФ    .</p><br>
<p>   :           тАФ         .           .</p><br>
<p>        :</p><br>
<p><img src="https://habrastorage.org/webt/hw/6_/6a/hw6_6aeekqqdlt7a0cqnk9kf2pa.png"></p><br>
<p> 1    PORTB |= _BV(GREEN_PIN) тАФ    (  ) ,   0 .. PORTB &amp;= ~(_BV(GREEN_PIN)) тАФ  (  ).<br>
  ,     ,      ?<br>
     (DDRB |= _BV(GREEN_PIN))   , DDRB &amp;= ~(_BV(GREEN_PIN)), GREEN_PIN   Hi-Z      .      (2.2 * 4)    5,   <abbr title=".  ,       ,        .">   </abbr>.</p><br>
<p>          .<br>
            тАФ ..    ,     ,    .</p><br>
<div class="spoiler"><b class="spoiler_title">, ,      </b><div class="spoiler_text"><p>,               .   ,    тАФ     ,   37/2=18      ,          ,    . :<br>
)   ,     ,  ,  ,     ;<br>
)   тАФ        ,      " "       4  ;<br>
)  ,       4 ( PERIOD_2-&gt;PERIOD_3  PERIOD_6-&gt;PERIOD_7);<br>
)  4                 .</p></div></div><br>
<p>  .</p><br>
<p><img src="https://habrastorage.org/webt/35/in/ym/35inymyguij4kl6qnsuckgz_ukq.png"></p><br>
<pre><code class="cpp">// PINB === 0 0 0 g r y0 btt y1
#define RED_PIN     PB3     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 
#define YELLOW0_PIN PB2     // OUT: 1 -  "-" 
#define YELLOW1_PIN PB0     // OUT: 1 -  "-" 
#define GREEN_PIN   PB4     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 

#define RED     _BV(RED_PIN)        // _BV -     (), 1&lt;&lt;VALUE
#define YELL0   _BV(YELLOW0_PIN)        //    -
#define YELL1   _BV(YELLOW1_PIN)
#define GREEN   _BV(GREEN_PIN)      //    - (  0 -   -)  DDRB.GreenPin=1</code></pre><br>
<p> тАФ  <abbr title=" ,      reset,     ISP "> </abbr> .    ,            ,   тАФ      ,    .</p><br>
<pre><code class="cpp">#define BUTTON_PIN      PB1
#define BUTTON_ON  !(PINB &amp; _BV(BUTTON_PIN))    //( (PINB &amp; _BV(BUTTON_PIN)) == 0)  //  " " -   LOW
#define BUTTON_OFF (PINB &amp; _BV(BUTTON_PIN))     //  " " -    HIGH, (     )</code></pre><br>
<p><strong><em>       ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>,   n   ( ) n(nтИТ1) = n┬▓тИТn .  4   12  ,         .   <abbr title=" +  + ">┬л , ┬╗</abbr>  <abbr title=" + ">┬л ,   ┬╗</abbr>        .</em></strong></p><br>
<div class="spoiler"><b class="spoiler_title">    12 LED</b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/oq/sn/le/oqsnlertvho7jlbhqt5ehp_fcks.png"></p></div></div><br>
<p>*** тАФ   ,         DDRx|PORTx,       , ..       .          тАФ   ,        ,         . </p><br>
<p>                     .***</p><br>
<h4 id="paru-slov-o-pyatom-izmerenii-kak-vpihnut-nevpihuemoe">    :   ?</h4><br>
<p>         lightSignalization.    lightSignalization        .    0  7  , 8 тАФ  ,  9 тАФ ,   ""   .     ,         0  7,      . ,  ,      .     3    ( 0  7)  8   --             .   if-   ,    .     ,   .</p><br>
<pre><code class="cpp">lightSignalization traffic_signals[] = {//   
 // {DDRB0, PORTB0,   DDRB_when_flashingif, PORTB_when_flasingif (if flashing),   continous of half-period flashing,   continous curr mode runing}
    {RED|GREEN, RED,   0, 0,   0, PERIOD_0},                    // R G R G
    {RED, RED,  RED|GREEN, RED,   QT_SECOND, PERIOD_1},     // R g R g - flash east green
    {RED|YELL1, RED|YELL1,   0, 0,   0, PERIOD_2 },         // R Y1 R Y1
    {RED|YELL0|YELL1, RED|YELL0|YELL1,  0, 0,   0, PERIOD_3 },  // RY0 Y1 RY0 Y1
    {RED|GREEN, GREEN,   0, 0,   0, PERIOD_4},              // G R G R
    {RED|GREEN, GREEN,   RED, 0,    QT_SECOND, PERIOD_5 },  // g R g R - flash nord green
    {RED|YELL0, YELL0,   0, 0,   0, PERIOD_6},                  // Y0 R Y0 R
    {RED|YELL0|YELL1,  YELL0|YELL1,   0, 0,   0, PERIOD_7  },       // Y0 RY1 Y0 RY1

    {YELL0|YELL1, YELL0|YELL1,   YELL0|YELL1, 0,  ONE_SECOND, 0},   // y0 y1 y0 y1 - flash yellows lights 
    {0, 0,   0, 0,   0, 0}          // traffic lights off, DDR in, Hi-Z
};

//       lightSignalization traffic_signals[]
#define LIGHT_NUM_YELLOW_FLASH  8       //       -  - flash yellows lights
#define LIGHT_NUM_STD_START     0       //       
#define LIGHT_NUM_LIGHTS_OFF    9       //      -   - traffic lights off</code></pre><br>
<p>  lightSignalization  8   . ..     traffic_signals[]  10     80  (,  64  ,  2     ).  ,        .</p><br>
<p> ,  , ,          тАФ    ROM,  ,    RAM   ,     .</p><br>
<p>-     </p><br>
<pre><code class="plaintext">const lightSignalization traffic_signals[] PROGMEM= {...</code></pre><br>
<p> ,           </p><br>
<pre><code class="plaintext">&lt;avr/pgmspace.h&gt; pgm_read_byte_near()  pgm_read_word_near()</code></pre><br>
<p> char  shortint .</p><br>
<p>     3   . </p><br>
<ol>
<li><p> ,   .<br>
   traffic_signals[] тАФ <strong>LIGHT_NUM_LIGHTS_OFF</strong><br>
{0, 0, 0, 0, 0, 0} // traffic lights off<br>
   тАФ  lightSignalization  ,     тАФ ,   lightSignalization.signal_period==0 (.. ),   lightSignalization.flash_period==0, ..   . </p><br>
</li>
<li><p> ,  .<br>
   traffic_signals[] тАФ <strong>LIGHT_NUM_YELLOW_FLASH</strong><br>
{YELL0|YELL1, YELL0|YELL1, YELL0|YELL1, 0, ONE_SECOND, 0}, // y0 y1 y0 y1 тАФ flash yellows lights<br>
   : lightSignalization.signal_period==0.      lightSignalization.flash_period=ONE_SECOND,    :</p><br>
<pre><code class="cpp">DDRB = YELL0|YELL1;     // YELL0, YELL1 - 
PORTB = YELL0|YELL1;    // YELL0, YELL1 = HIGH -  </code></pre><br>
<p></p><br>
<pre><code class="cpp">DDRB = YELL0|YELL1;     // // YELL0, YELL1 -   
PORTB = 0;              // YELL0, YELL1 = LOW -  </code></pre><br>
</li>
<li><p> , --.</p><br>
</li>
</ol><br>
<p> ,   . </p><br>
<p>  traffic_signals[]     тАФ <strong>LIGHT_NUM_STD_START</strong><br>
{RED|GREEN, RED, 0, 0, 0, PERIOD_0}, // R G R G<br>
   : lightSignalization.flash_period==0.<br>
DDRB = RED|GREEN; //RED  GREEN тАФ  ,  .<br>
PORTB = RED; //  RED тАФ HIGH (-      )<br>
//   GREEN тАФ LOW (  ,  - тАФ  )<br>
      lightSignalization.signal_period==PERIOD_0,       . </p><br>
<p>        current_signal.   2   тАФ        ,     lightSignalization.</p><br>
<pre><code class="cpp">uint8_t current_signal;     // 1    ,   traffic_signals
uint16_t tl_flash_end;      // 2       ( !0), 
uint16_t tl_signal_end;     // 2            ( !0)</code></pre><br>
<p> tl_signal_end != 0,   globalTimer&gt;tl_signal_end  current_signal.     0   current_signal,  3, .<br>
current_signal = current_signal &amp; B00000111;<br>
  </p><br>
<pre><code class="plaintext">current_signal &amp;= LIGHT_NUM_STD_MASK ;   //current_signal &amp; B00000111;</code></pre><br>
<p>  current_signal  ,       0  7.<br>
   globalTimer тАФ       . </p><br>
<div class="spoiler"><b class="spoiler_title">   </b><div class="spoiler_text"><pre><code class="cpp">#include &lt;limits.h&gt;         // USHRT_MAX
#include &lt;avr/sleep.h&gt;      // ,  
#include &lt;avr/interrupt.h&gt;  //   
#include &lt;avr/pgmspace.h&gt;   //    

#define ONE_SECOND  37      //     1 
#define QT_SECOND   9       //  
#define MAX_GLOBAL_TIMER_VALUE  (USHRT_MAX / 2)     // uint16_t globalTimer -   . 65535 /2 
//     ,  MAX_GLOBAL_TIMER_VALUE - 1
#define PERIOD_FLASH_GREEN  QT_SECOND           //    ( ) -    
#define PERIOD_FLASH_YELLOW ONE_SECOND * 1      //    -    - 
                                                        //  --- 
#define PERIOD_0        ONE_SECOND * 10     //R G R G   0.  ---   (15 )
#define PERIOD_1        ONE_SECOND * 3      //R g R g   1.  ---   (3 )     
#define PERIOD_2        ONE_SECOND * 1      //R Y R Y   2.  ---  (1 )
#define PERIOD_3        ONE_SECOND * 2      //RY Y RY Y 3. + ---  (2 ) 
#define PERIOD_4        ONE_SECOND * 7      //G R G R   4.  ---   (10 )
#define PERIOD_5        ONE_SECOND * 3      //g R g R   5.   --- (3 )
#define PERIOD_6        ONE_SECOND * 1      //Y R Y R   6.  ---  (1 )
#define PERIOD_7        ONE_SECOND * 2      //Y RY Y RY 7.  --- + (2 )

typedef struct{
    const uint8_t ddr_val_0;    // DDRB value    
    const uint8_t port_val_0;   // PORTB value  
    const uint8_t ddr_val_1;    // DDRB value    
    const uint8_t port_val_1;   // PORTB value
    const uint16_t flash_period;    // period of flashing -   _val_1  _val_0
    const uint16_t signal_period;   // period of this lighting state
}lightSignalization;            //   , _0  _1 -   , flash_long -   

//    (PINS === 0 0 0 g r y0 btt y1):
 //     ""     
#define BUTTON      PB1
#define RED_PIN     PB3     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 
#define YELLOW0_PIN PB2     // OUT: 1 -  "-" 
#define YELLOW1_PIN PB0     // OUT: 1 -  "-" 
#define GREEN_PIN   PB4     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 

#define BUTTON_ON  !(PINB &amp; _BV(BUTTON))    //( (PINB &amp; _BV(BUTTON)) == 0)  //  " "
#define BUTTON_OFF  (PINB &amp; _BV(BUTTON))    // ~(PINB &amp; _BV(BUTTON)) -\\- " "

#define RED     _BV(RED_PIN)            // _BV -     (), 1&lt;&lt;VALUE
#define YELL0   _BV(YELLOW0_PIN)        //
#define YELL1   _BV(YELLOW1_PIN)
#define GREEN   _BV(GREEN_PIN)

//       lightSignalization traffic_signals[]
#define LIGHT_NUM_YELLOW_FLASH  8       //       -  - flash yellows lights
#define LIGHT_NUM_STD_START     0       //       
#define LIGHT_NUM_LIGHTS_OFF    9       //      -   - traffic lights off
#define LIGHT_NUM_STD_MASK      7       // ___++ &amp;LIGHT_NUM_STD_MASK -    0  7   

//....................................  
// 
const lightSignalization traffic_signals[] PROGMEM= {   //   ,  ,   -, PINS === 0 0 0 g r y0 btt y1
 // {DDRB0, PORTB0,   DDRB_flashing, PORTB_flasinf (if flashing),   continuous of half-period flashing,   continuous id mode running}
    {RED|GREEN, RED,   0, 0,   0, PERIOD_0},                    // R G R G
    {RED, RED,  RED|GREEN, RED,   QT_SECOND, PERIOD_1},     // R g R g - flash east green
    {RED|YELL1, RED|YELL1,   0, 0,   0, PERIOD_2 },             // R Y1 R Y1
    {RED|YELL0|YELL1, RED|YELL0|YELL1,  0, 0,   0, PERIOD_3 },  // RY0 Y1 RY0 Y1
    {RED|GREEN, GREEN,   0, 0,   0, PERIOD_4},                  // G R G R
    {RED|GREEN, GREEN,   RED, 0,    QT_SECOND, PERIOD_5 },      // g R g R - flash nord green
    {RED|YELL0, YELL0,   0, 0,   0, PERIOD_6},                  // Y0 R Y0 R
    {RED|YELL0|YELL1,  YELL0|YELL1,   0, 0,   0, PERIOD_7  },   // Y0 RY1 Y0 RY1

    {YELL0|YELL1, YELL0|YELL1,   YELL0|YELL1, 0,  ONE_SECOND, 0},   // y0 y1 y0 y1 - flash yellows lights 
    {0, 0,   0, 0,   0, 0}              //  traffic lights off, 
};

volatile uint16_t  globalTimer;     //     64   
uint8_t current_signal;     // 1    ,   traffic_signals
uint16_t tl_flash_end;      // 2       ( !0), 
uint16_t tl_signal_end;     // 2            ( !0)

//....................................  
void setPeriods(uint8_t num, bool set_both_flash_and_signal);   //  tl_flash_end, tl_signal_end
void setPorts(uint8_t num, bool use_main_values);               //    

//....................................  
//
//  -    globalTimer  1/37 
ISR(TIM0_OVF_vect){
    globalTimer++;  //       . ,   while(1)   .
}

int main() {
//
bool use_main_values = true;            // lightSignalization._val_0 (1)  lightSignalization._val_1 (0)? -  
current_signal = LIGHT_NUM_STD_START;   //   .     .

    //     "  -". 
    set_sleep_mode(SLEEP_MODE_IDLE);    //   - .
    sleep_enable();                 //    

    TCCR0B = _BV(CS02) | _BV(CS00); //  0 - clock frequency / 1024
    TIMSK0 |= _BV(TOIE0);           //      overflow interrupt

    sei();      //    
    while(1){
        //   ? 
        if(globalTimer &gt; MAX_GLOBAL_TIMER_VALUE){
            globalTimer -= MAX_GLOBAL_TIMER_VALUE;          //   
            // 
            if(tl_flash_end){
                tl_flash_end -= MAX_GLOBAL_TIMER_VALUE;     //   ,  
            }
            if(tl_signal_end){
                tl_signal_end -= MAX_GLOBAL_TIMER_VALUE;    // //   ,  
            }
            // setPeriods(currentMode, false); //   12  ,  tl_.._end   ,     
        }

                //      (tl_flash_end !=0 )
        if(tl_flash_end){
            //     
            if(globalTimer &gt; tl_flash_end){
                use_main_values = !use_main_values;             // !use_main_values -      ))
                setPorts(current_signal, use_main_values);      //      
                setPeriods(current_signal, false);              //     ,   
            }
        }

        //         -    operating_std     - --
        if(tl_signal_end){
            //       (use_main_values -       -  )
            if((globalTimer &gt; tl_signal_end)  &amp;&amp; use_main_values){
                current_signal ++;                          //   
                current_signal &amp;= LIGHT_NUM_STD_MASK;       //    3-,        0  7
                use_main_values = true;                     //  -    
                setPorts(current_signal, use_main_values);  //        
                setPeriods(current_signal, true);           //       
            }
        }

        sleep_cpu();    //      -   .
    }
}

    //   
 void setPorts(uint8_t num, bool use_main_values){
    uint8_t val;
    DDRB = 0; PORTB = 0;
    //    () - ddr_val_0, else = ddr_val_1
//  val = (use_main_values) ? pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_0))
//                          : pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_1));

    //   ,  , ,  ,   ,   14 (!!!)   .
    val = pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_0)+( (use_main_values) ? 0 : 2) ); 
    val &amp;= ~_BV(BUTTON);    //     - 
    DDRB = val;             //    

    val = (use_main_values) ? pgm_read_byte_near(&amp;(traffic_signals[num].port_val_0)) 
                            : pgm_read_byte_near(&amp;(traffic_signals[num].port_val_1));
    val|= _BV(BUTTON);  //     -  -    
    PORTB = val;        //      
}

 //     ( 
void setPeriods(uint8_t num, bool set_both_flash_and_signal){
//  
    tl_flash_end = pgm_read_word_near (&amp;(traffic_signals[num].flash_period));   //  
    tl_flash_end = (tl_flash_end)? tl_flash_end + globalTimer : 0;  //    -      
    //if(tl_flash_end){         tl_flash_end += globalTimer;    } &lt;-     8  

    //     -    
    if(set_both_flash_and_signal){
        tl_signal_end = pgm_read_word_near(&amp;(traffic_signals[num].signal_period));  
        tl_signal_end = (tl_signal_end)? tl_signal_end + globalTimer : 0;           //     ,    
    }
}

//Program size: 610 bytes (used 60% of a 1 024 byte maximum) (0,58 secs)
//Minimum Memory Usage: 7 bytes (11% of a 64 byte maximum)</code></pre></div></div><br>
<h4 id="slozhnaya-logika-prostoy-knopki">   </h4><br>
<p>     ,          .         тАФ   btn_cnt (     ),    (        )               .</p><br>
<pre><code class="cpp">#define PERIOD_PRESS_BUTTON_SHORT   QT_SECOND           //      -  
#define PERIOD_PRESS_BUTTON_LONG    QT_SECOND*6         //      - /
uint8_t scan_button_cnt;    //    
        //  
        if(BUTTON_ON){
            if(scan_button_cnt&lt;USHRT_MAX){
                scan_button_cnt++;      //   1/37     
            }
            if(scan_button_cnt &gt; PERIOD_PRESS_BUTTON_SHORT){
                    // ,     
            }
            if(scan_button_cnt &gt; PERIOD_PRESS_BUTTON_LONG){
                    //     
            }
        }
</code></pre><br>
<p>    тАФ      .</p><br>
<p><img src="https://habrastorage.org/webt/fe/k6/6_/fek66_j4lcziqglnpmyudph1ujc.jpeg"></p><br>
<p>     SLEEP_MODE_IDLE (     CPU),   PwrDown    SLEEP_MODE_PWR_DOWN тАФ         <del>  </del>   watchdog     INT0,   ,     тАФ      INT0.</p><br>
<p><img src="https://habrastorage.org/webt/0w/82/0k/0w820klrlwg0enib-pznejydfp0.png"></p><br>
<p> <abbr title=""></abbr>      .   7.Power management and sleep modes   ATtiny13  ,      5-10 ,          . </p><br>
<p>             8- ,    тАФ 2        . </p><br>
<pre><code class="cpp">//  uint8_t f_button_state_flags;       //        

//      MODES:  wakeup 11 -&gt; work 00 -&gt; tosleep 01 -&gt; pwrdown 11 -&gt; wakeup 11
#define MODE_LBIT 0
#define MODE_HBIT 1
#define FORCE_SET_NEW_SIGNAL_BIT        2   //             current_signal
//    3
#define LIGHT_SIGNAL_ALT_MODE_BIT       4   // =0 (--)  =1 ( )   
#define USE_FIRST_VALUES_LIGHT_BIT      5   //     -  lightSignalization  
#define SHORT_PRESS_FLAG_BIT    6   // , 1       
#define LONG_PRESS_FLAG_BIT     7 // , 1       </code></pre><br>
<p> ,       тАФ    ,    тАФ   CPU     .          ,         if-.</p><br>
<div class="spoiler"><b class="spoiler_title">   </b><div class="spoiler_text"><pre><code class="cpp">#include &lt;limits.h&gt;         // USHRT_MAX
#include &lt;avr/io.h&gt;         //     IDE
#include &lt;avr/sleep.h&gt;      // ,     
#include &lt;avr/interrupt.h&gt;  //   
#include &lt;avr/pgmspace.h&gt;   //    

#ifdef GIMSK    //  ATtiny13 -       
#define F_CPU 9600000UL     //      ,   
#define ONE_SECOND  37      //     1 
#define QT_SECOND   9       //  
// GIMSK &amp;= ~_BV(INT0); -   INT0  
#define DISABLE_EXTERNAL_INT0   GIMSK &amp;= ~(_BV(INT0)); GIFR  &amp;= ~(_BV(INTF0))   //EIMSK/EIFR  
//GIMSK |= _BV(INT0) -   INT0
#define ENABLE_EXTERNAL_INT0    GIMSK |= _BV(INT0)  ; GIFR  &amp;= ~(_BV(INTF0))
#else           // 328 -   
#define F_CPU 16000000UL
#define ONE_SECOND  64      //     1  - .   
#define QT_SECOND   16      //  
// 328 INT0 -  PD2...     ,       (,  ),            
#define DISABLE_EXTERNAL_INT0   EIMSK &amp;= ~(_BV(INT0)); EIFR  &amp;= ~(_BV(INTF0)) 
// ,   -  EICRA - ISC00-ISC01 == 00, lo level, EIMSK - INT0, EIFR-INTF0  
#define ENABLE_EXTERNAL_INT0    EIMSK |= _BV(INT0)  ; EIFR  &amp;= ~(_BV(INTF0))
#endif

#define MAX_GLOBAL_TIMER_VALUE  (USHRT_MAX / 2)     // uint16_t globalTimer -   . 65535 /2 
//     ,  MAX_GLOBAL_TIMER_VALUE - 1
#define PERIOD_PRESS_BUTTON_SHORT   QT_SECOND/2         //      ( - ) -  
#define PERIOD_PRESS_BUTTON_LONG    QT_SECOND*4         //      - /
#define PERIOD_FLASH_GREEN          QT_SECOND           //     ( ) -    
#define PERIOD_FLASH_YELLOW         ONE_SECOND * 1      //     -    - 

                                            //  --- 
#define PERIOD_0        ONE_SECOND * 5      // R G R G  0.  ---   (5 )
#define PERIOD_1        ONE_SECOND * 3      //R g R g   1.  ---   (3 )     
#define PERIOD_2        ONE_SECOND * 1      //R Y R Y   2.  ---  (1 )
#define PERIOD_3        ONE_SECOND * 2      //RY Y RY Y 3. + ---  (2 ) 
#define PERIOD_4        ONE_SECOND * 7      // G R G R  4.  ---   (7 )
#define PERIOD_5        ONE_SECOND * 3      //g R g R   5.   --- (3 )
#define PERIOD_6        ONE_SECOND * 1      //Y R Y R   6.  ---  (1 )
#define PERIOD_7        ONE_SECOND * 2      //Y RY Y RY 7.  --- + (2 )

//  /  .     -     
typedef struct{
    const uint8_t ddr_val_0;    // DDRB value    
    const uint8_t port_val_0;   // PORTB value  
    const uint8_t ddr_val_1;    // DDRB value    
    const uint8_t port_val_1;   // PORTB value
    const uint16_t flash_period;    // period of flashing -   _val_1  _val_0 ( =0,  )
    const uint16_t signal_period;   // period of this lighting state ( =0,       )
}lightSignalization;            //   , _0  _1 -   , flash_long -   

//    (PINS === 0 0 0 g r y0 btt y1):
 //     ""     
#define BUTTON_PIN  PB1     // ,   INT0. ,   ,  = LOW
#define RED_PIN     PB3     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 
#define YELLOW0_PIN PB2     // OUT: 1 -  "-" 
#define YELLOW1_PIN PB0     // OUT: 1 -  "-" 
#define GREEN_PIN   PB4     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 

#define BUTTON_ON  !(PINB &amp; _BV(BUTTON_PIN))    //( (PINB &amp; _BV(BUTTON)) == 0)  //  " "
#define BUTTON_OFF  (PINB &amp; _BV(BUTTON_PIN))    // ~(PINB &amp; _BV(BUTTON)) -\\- " "

#define RED     _BV(RED_PIN)            // _BV -     (), 1&lt;&lt;VALUE
#define YELL0   _BV(YELLOW0_PIN)        //    -
#define YELL1   _BV(YELLOW1_PIN)
#define GREEN   _BV(GREEN_PIN)          //    - (  0 -   -)  DDR=1

//      lightSignalization traffic_signals[]
#define LIGHT_NUM_YELLOW_FLASH  8       //       ( ) -  - flash yellows lights
#define LIGHT_NUM_STD_START     0       //        (--)
#define LIGHT_NUM_LIGHTS_OFF    9       //      -   - traffic lights off
#define LIGHT_NUM_START_SHOW    10      //         
#define LIGHT_NUM_ERR           11      //   -     

#define MASK_LIGHT_NUM_STD      7       // ___++ &amp;= LIGHT_NUM_STD_MASK -    0  7   

//....................................  
// 
const lightSignalization traffic_signals[] PROGMEM= {   //   ,  ,   -, PINS === 0 0 0 g r y0 btt y1
 // {DDRB0, PORTB0,   DDRB_flashing, PORTB_flasinf (if flashing),   continuous of half-period flashing,   continuous id mode running}
    {RED|GREEN, RED,   0, 0,   0, PERIOD_0},                    // R G R G
    {RED, RED,  RED|GREEN, RED,   QT_SECOND, PERIOD_1},         // R g R g - flash east green
    {RED|YELL1, RED|YELL1,   0, 0,   0, PERIOD_2 },             // R Y1 R Y1
    {RED|YELL0|YELL1, RED|YELL0|YELL1,  0, 0,   0, PERIOD_3 },  // RY0 Y1 RY0 Y1
    {RED|GREEN, GREEN,   0, 0,   0, PERIOD_4},                  // G R G R
    {RED|GREEN, GREEN,   RED, 0,    QT_SECOND, PERIOD_5 },      // g R g R - flash nord green
    {RED|YELL0, YELL0,   0, 0,   0, PERIOD_6},                  // Y0 R Y0 R
    {RED|YELL0|YELL1,  YELL0|YELL1,   0, 0,   0, PERIOD_7  },   // Y0 RY1 Y0 RY1

    {YELL0|YELL1, YELL0|YELL1,   YELL0|YELL1, 0,  ONE_SECOND, 0},   // y0 y1 y0 y1 - flash yellows lights 
    {0, 0,   0, 0,   0, 0},             //  traffic lights off, 
    {RED|GREEN|YELL0, RED|YELL0,   RED|GREEN|YELL1, GREEN|YELL1,   1, PERIOD_2},        //  PERIOD_2  -      ,     

    {YELL0|GREEN, YELL0,   YELL1|GREEN, YELL1|GREEN,  1, 0}     //  -     
};

volatile uint16_t  globalTimer; //      64   
uint8_t scan_button_cnt;        //      
uint16_t tl_flash_end;          // 2       ( !0), 
uint16_t tl_signal_end;         // 2            ( !0) 
uint8_t f_button_state_flags;   // 1,        
// , 8    

#pragma region bits_of_f_button_state_flags 
    //      MODES:  wakeup 11 -&gt; work 00 -&gt; tosleep 01 -&gt; pwrdown 11 -&gt; wakeup 11
#define MODE_LBIT 0
#define MODE_HBIT 1
#define MODE_VALUE          ( f_button_state_flags &amp; 3 )    //  -   MODE_
#define SET_MODE_WORK       f_button_state_flags &amp;= ~(_BV(MODE_HBIT) );  f_button_state_flags &amp;= ~(_BV(MODE_LBIT) );// 00 - work
//  f_button_state_flags &amp;= ~( _BV(MODE_HBIT) | _BV(MODE_LBIT) ) -    ,  
#define MODE_WORK_VALUE     0
#define SET_MODE_TOSLEEP    f_button_state_flags &amp;= ~(_BV(MODE_HBIT)); f_button_state_flags |= _BV(MODE_LBIT)   // 01 - tosleep
#define MODE_TOSLEEP_VALUE  1
#define SET_MODE_PWRDOWN    f_button_state_flags |= _BV(MODE_HBIT); f_button_state_flags &amp;= ~(_BV(MODE_LBIT))   // 10 - pwrdown 
#define MODE_PWRDOWN_VALUE  2
#define SET_MODE_WAKEUP     f_button_state_flags |= _BV(MODE_HBIT); f_button_state_flags |= _BV(MODE_LBIT)      // 11 - wakeup  
#define MODE_WAKEUP_VALUE   3

#define FORCE_SET_NEW_SIGNAL_BIT        2   //             current_signal
#define IF_FORCE_SET_SIGNAL_FLAG        ( f_button_state_flags &amp; _BV(FORCE_SET_NEW_SIGNAL_BIT) )    // IF_ -    
#define SET_FORCE_SET_SIGNAL_FLAG       f_button_state_flags |=  _BV(FORCE_SET_NEW_SIGNAL_BIT)      // SET_ -    1
#define RES_FORCE_SET_SIGNAL_FLAG       f_button_state_flags &amp;= ~( _BV(FORCE_SET_NEW_SIGNAL_BIT) )  // RES_ -    0

//  3   

#define LIGHT_SIGNAL_ALT_MODE_BIT       4   // =0 (--)  =1 ( )   
#define IF_LIGHT_SIGNAL_ALT_MODE_FLAG   ( f_button_state_flags &amp; _BV(LIGHT_SIGNAL_ALT_MODE_BIT) )   //1( )  0(--)   ?
#define SET_LIGHT_SIGNAL_ALT_MODE_FLAG  f_button_state_flags |=  _BV(LIGHT_SIGNAL_ALT_MODE_BIT)
#define RES_LIGHT_SIGNAL_ALT_MODE_FLAG  f_button_state_flags &amp;= ~( _BV(LIGHT_SIGNAL_ALT_MODE_BIT) )
#define FLIP_LIGHT_SIGNAL_ALT_MODE_FLAG f_button_state_flags ^= _BV(LIGHT_SIGNAL_ALT_MODE_BIT)

#define USE_FIRST_VALUES_LIGHT_BIT      5   //     -  lightSignalization  
#define IF_USE_FIRST_VALUES_LIGHT_FLAG  (f_button_state_flags &amp; _BV(USE_FIRST_VALUES_LIGHT_BIT)) // lightSignalization._val_0 (1)  lightSignalization._val_1 (0)? -  
#define SET_USE_FIRST_VALUES_LIGHT_FLAG     f_button_state_flags |= _BV(USE_FIRST_VALUES_LIGHT_BIT)
#define RES_USE_FIRST_VALUES_LIGHT_FLAG     f_button_state_flags &amp;= ~( _BV(USE_FIRST_VALUES_LIGHT_BIT))
#define FLIP_USE_FIRST_VALUES_LIGHT_FLAG    f_button_state_flags ^= _BV(USE_FIRST_VALUES_LIGHT_BIT)     //  

#define SHORT_PRESS_FLAG_BIT    6   // , 1       
#define IF_SHORT_PRESS_FLAG     ( f_button_state_flags &amp; _BV(SHORT_PRESS_FLAG_BIT) )        // -   == 1
#define SET_SHORT_PRESS_FLAG    f_button_state_flags |= _BV(SHORT_PRESS_FLAG_BIT)
#define RES_SHORT_PRESS_FLAG    f_button_state_flags &amp;= ~(_BV(SHORT_PRESS_FLAG_BIT))

#define LONG_PRESS_FLAG_BIT     7 // , 1       
#define IF_LONG_PRESS_FLAG      ( f_button_state_flags &amp; _BV(LONG_PRESS_FLAG_BIT) )     // -   == 1
#define SET_LONG_PRESS_FLAG     f_button_state_flags |= _BV(LONG_PRESS_FLAG_BIT)
#define RES_LONG_PRESS_FLAG     f_button_state_flags &amp;= ~(_BV(LONG_PRESS_FLAG_BIT))
#pragma endregion

//....................................  
void setPeriods(uint8_t num, bool set_both_flash_and_signal);   //  tl_flash_end, tl_signal_end
void setPorts(uint8_t num, bool use_main_values);               //    
void inline init_timer_clock(){     //     
#ifdef GIMSK    //  ATtiny13 - 
    TCCR0B = _BV(CS02) | _BV(CS00); //  0 - clock frequency / 1024
    TIMSK0 |= _BV(TOIE0);           //      overflow interrupt
#else           //   , 328/16
    // 100 - prescaler 64; Foverflow = 16M/64*256 ~=976.56Hz,
    TCCR2B = (1&lt;&lt;CS22) | (1&lt;&lt;CS21) | (1&lt;&lt;CS20) ;  // 111 - CLK/1024, 16M/1024*254 - 1/64 
    TIMSK2 |=(1&lt;&lt;TOIE0);  // interrupt ovfl enable
    //Serial.begin(115200);
#endif
}

//....................................  
//
//  -  -    globalTimer  1/37 
#ifdef GIMSK    //  ATtiny13
ISR(TIM0_OVF_vect){
    globalTimer++;  //       . ,   while(1)   .
}
#else
//   0 -     , -   - -     2
ISR(TIMER2_OVF_vect){
    globalTimer++;
}
#endif
//   -    (,  ,    0)
ISR(INT0_vect){
    DISABLE_EXTERNAL_INT0;
    SET_MODE_WAKEUP;        //      POWER DOWN
    globalTimer = 0;        //  -  
    scan_button_cnt = 0;    //   
    RES_SHORT_PRESS_FLAG;   //
    RES_LONG_PRESS_FLAG;    //  
}

/*
//   - 
void inline dbg(){
    DDRB |= YELL0; PORTB ^= YELL0;
}
*/

//....................................  
//
int main() {
    uint8_t current_signal;             // 1    ,   traffic_signals

#pragma region Initialisation&amp;setup
    //     "  -". 
    set_sleep_mode(SLEEP_MODE_IDLE);    //   - .
    sleep_enable();             //    

    init_timer_clock();         //     

    globalTimer = 0;            //  -  
    SET_MODE_WORK;              //    
    SET_USE_FIRST_VALUES_LIGHT_FLAG;    //  
    scan_button_cnt = 0;        //   

    //       
    current_signal = LIGHT_NUM_START_SHOW;  //     -   /
    SET_FORCE_SET_SIGNAL_FLAG;              //    current_signal

    sei();      //    

#pragma endregion
    while(1){

#pragma region TimerOVF
        //   ? 
        if(globalTimer &gt; MAX_GLOBAL_TIMER_VALUE){
            globalTimer -= MAX_GLOBAL_TIMER_VALUE;          //   
            // 
            if(tl_flash_end){
                tl_flash_end -= MAX_GLOBAL_TIMER_VALUE;     //   ,  
            }
            if(tl_signal_end){
                tl_signal_end -= MAX_GLOBAL_TIMER_VALUE;    // //   ,  
            }
            // setPeriods(currentMode, false); //   12  ,  tl_.._end   ,     
        }
#pragma endregion

#pragma region ButtonState
        //  
        if(BUTTON_ON){
            if(scan_button_cnt &lt; USHRT_MAX){
                scan_button_cnt++;              //   1/37     
            }
            //   -  ,    
            if(scan_button_cnt &gt; PERIOD_PRESS_BUTTON_SHORT){
                SET_SHORT_PRESS_FLAG;       // ,     , 
            }
            if(scan_button_cnt &gt; PERIOD_PRESS_BUTTON_LONG){
                SET_LONG_PRESS_FLAG;        //     
            }
        }
#pragma endregion
#pragma region LightWorkLogic
        //      (tl_flash_end !=0 )
        if(tl_flash_end){
            //     
            if(globalTimer &gt; tl_flash_end){
                FLIP_USE_FIRST_VALUES_LIGHT_FLAG;               // !use_main_values -      ))
                setPorts(current_signal, IF_USE_FIRST_VALUES_LIGHT_FLAG);       //      
                setPeriods(current_signal, false);          //     ,   
            }
        }

        //         
        // -    operating_std     - -- 
        //    ,   +1   7
        if(tl_signal_end){
            //       (use_main_values -       -  )
            if((globalTimer &gt; tl_signal_end)  &amp;&amp; IF_USE_FIRST_VALUES_LIGHT_FLAG){
                current_signal ++;                          //   
                current_signal &amp;= MASK_LIGHT_NUM_STD;       //    3-,        0  7
                SET_FORCE_SET_SIGNAL_FLAG;      //    current_signal
            }
        }
#pragma endregion

#pragma region MODE_VALUELogic
        //   , 2  f_button_state_flags
        //? MODE_VALUE === pwrdown -&gt; wakeup -&gt; work -&gt; tosleep -&gt; pwrdown
        switch (MODE_VALUE){
        case (MODE_WAKEUP_VALUE):
            set_sleep_mode(SLEEP_MODE_IDLE);        //  !
            //   ,       - IF_BUTTON_LONG_FLAG
            if(IF_LONG_PRESS_FLAG){
                //      ?   !
                if(current_signal == LIGHT_NUM_LIGHTS_OFF){
                    //          ? LIGHT_NUM_ERR
                    current_signal = (IF_LIGHT_SIGNAL_ALT_MODE_FLAG) ? LIGHT_NUM_YELLOW_FLASH : LIGHT_NUM_STD_START;
                    SET_FORCE_SET_SIGNAL_FLAG;      //    current_signal
                }
            }
            //,  ...
            if(BUTTON_OFF){
                //      ,   
                if(IF_LONG_PRESS_FLAG){
                    SET_MODE_WORK;
                }else{  
                    //  , ,   ,  
                    SET_MODE_PWRDOWN;   //        
                }
                scan_button_cnt = 0;    //       
                RES_SHORT_PRESS_FLAG;   //   , 
                RES_LONG_PRESS_FLAG;
            }
            break;

        case (MODE_WORK_VALUE):
            //  ?
            if(scan_button_cnt &gt; 0){
                //   ?
                if(IF_LONG_PRESS_FLAG){
                    current_signal = LIGHT_NUM_LIGHTS_OFF;      //  
                    SET_FORCE_SET_SIGNAL_FLAG;                  //   -   " "
                    SET_MODE_TOSLEEP;                           //   !
                }
                // ? 
                if(BUTTON_OFF){
                    //     ?
                    if(IF_SHORT_PRESS_FLAG){
                        FLIP_LIGHT_SIGNAL_ALT_MODE_FLAG;    //     
                        current_signal = (IF_LIGHT_SIGNAL_ALT_MODE_FLAG) ? LIGHT_NUM_YELLOW_FLASH : LIGHT_NUM_STD_START; //    . 
                        SET_FORCE_SET_SIGNAL_FLAG;          //      current_signal
                    }
                    scan_button_cnt=0;
                    RES_SHORT_PRESS_FLAG; //    
                    RES_LONG_PRESS_FLAG;
                }
            }
            break;

        case (MODE_TOSLEEP_VALUE):
            //    -    .
            if(BUTTON_OFF){
                SET_MODE_PWRDOWN;       //    
            }
            break;

        case (MODE_PWRDOWN_VALUE):
            // !  , !  ?
            if(BUTTON_ON){
                set_sleep_mode(SLEEP_MODE_IDLE);
                SET_MODE_WAKEUP;
            }else{  
                //  ?  .
                scan_button_cnt = 0;
                RES_LONG_PRESS_FLAG;
                RES_SHORT_PRESS_FLAG;
                current_signal = LIGHT_NUM_LIGHTS_OFF;      // 
                SET_FORCE_SET_SIGNAL_FLAG;
                set_sleep_mode(SLEEP_MODE_PWR_DOWN);    //    -   while(1)
                ENABLE_EXTERNAL_INT0;                   //     
            }
            break;

        default:
            //!       -    .  -      
            current_signal = LIGHT_NUM_ERR;
            SET_FORCE_SET_SIGNAL_FLAG;
            //setPorts(current_signal,true);
            //setPeriods(current_signal,true);
            break;
        }
#pragma endregion

        //   ,      - ?
        if(IF_FORCE_SET_SIGNAL_FLAG){       //       current_signal
            RES_FORCE_SET_SIGNAL_FLAG;      //  
            SET_USE_FIRST_VALUES_LIGHT_FLAG;    //   -   0-   -
            setPorts(current_signal, IF_USE_FIRST_VALUES_LIGHT_FLAG);   //      #current_signal  
            setPeriods(current_signal, true);
        }

        //    1/37 . , ,  .
        sleep_cpu();    //       -   .
        }
}

//.................................... 
//
//    
 void setPorts(uint8_t num, bool  use_main_values){
    uint8_t val;
    DDRB = 0; PORTB = 0;
    //    () - ddr_val_0, else = ddr_val_1
//  val = (use_main_values) ? pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_0))
//                          : pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_1));

    //   ,    ,  ,   ,   14 (!!!)   .
    val = pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_0)+( (use_main_values) ? 0 : sizeof(uint8_t)*2 ) ); 

    val &amp;= ~_BV(BUTTON_PIN);    //    ,    - 
    DDRB = val;                 //    

    val = (use_main_values) ? pgm_read_byte_near(&amp;(traffic_signals[num].port_val_0)) 
                            : pgm_read_byte_near(&amp;(traffic_signals[num].port_val_1));
    val|= _BV(BUTTON_PIN);  //     -  -    
    PORTB = val;        //      
}

 //     (    )
void setPeriods(uint8_t num, bool set_both_flash_and_signal){
//  
    tl_flash_end = pgm_read_word_near (&amp;(traffic_signals[num].flash_period));   //  
    tl_flash_end = (tl_flash_end)? tl_flash_end + globalTimer : 0;  //    -      
    //if(tl_flash_end){         tl_flash_end += globalTimer;    } &lt;-     8  

    //     -    
    if(set_both_flash_and_signal){
        tl_signal_end = pgm_read_word_near(&amp;(traffic_signals[num].signal_period));  
        tl_signal_end = (tl_signal_end)? tl_signal_end + globalTimer : 0;           //     ,    
    }
}
//Program size: 976 bytes (used 95% of a 1 024 byte maximum) (0,83 secs)
//Minimum Memory Usage: 8 bytes (13% of a 64 byte maximum)</code></pre></div></div><br>
<p><em>Program size: 976 bytes (used 95% of a 1 024 byte maximum) (0,83 secs)<br>
Minimum Memory Usage: 8 bytes (13% of a 64 byte maximum)</em></p><br>
<p>.</p><br>
<p>    <del>  </del>      ATtiny13 .</p><br>
<h3 id="anatomiya--samshitovo-samannogo-svetofora"> - </h3><br>
<p>  (    ?)   .   тАФ   .           ,    ,  ,   .  ,     ,    .</p><br>
<div class="spoiler"><b class="spoiler_title">,  </b><div class="spoiler_text"><h4 id="mozgi"></h4><br>
<p> DipTrace       ┬л┬╗      ┬лPCB Layout┬╗,     .        ,    . </p><br>
<p><img src="https://habrastorage.org/webt/0j/vq/ag/0jvqagommqperqd6t4vsqpuywbg.png"></p><br>
<p>   тАФ       .</p><br>
<p><img src="https://habrastorage.org/webt/ye/zr/b0/yezrb07pnfknal2yrkkkt8z24ew.jpeg"></p><br>
<p>,           ,    .</p><br>
<p>              (      ,      80-    ).</p><br>
<p><img src="https://habrastorage.org/webt/a-/vw/zq/a-vwzqrzc8ttmxfyidyx5gku_e0.jpeg"></p><br>
<p>       CD .</p><br>
<p><img src="https://habrastorage.org/webt/be/84/yr/be84yr9lcf5qr9xmhfubcc0xi-q.jpeg"></p><br>
<p>  , ,  ,  .</p><br>
<p><img src="https://habrastorage.org/webt/4w/4p/ed/4w4pedh-im9ttbm6uhngc24vpge.jpeg"></p><br>
<p>  тАФ    .</p><br>
<p><strong></strong>: <em>        ,                 </em>.</p><br>
<p> ,  ,             .    тАФ   ,    .</p><br>
<p><img src="https://habrastorage.org/webt/wd/mv/p_/wdmvp_puf54uysk-0og-9lhogvk.jpeg"></p><br>
<h4 id="vnutrennosti"></h4><br>
<p>       тАФ  .  -  - "Craft&amp;Clay" 50-     70.    ,        .</p><br>
<p><img src="https://habrastorage.org/webt/v2/jw/q6/v2jwq6mmb4gvxkpljgamjqavhj4.jpeg"></p><br>
<p>          .</p><br>
<p><img src="https://habrastorage.org/webt/w9/jf/8f/w9jf8f1ze2h5lytg9rgy0c4yy8s.jpeg"></p><br>
<p>       15     130   .</p><br>
<p><img src="https://habrastorage.org/webt/a4/uf/n-/a4ufn-djsbpg3386o4pvqqcpjua.jpeg"></p><br>
<p>      тАФ    .</p><br>
<p><img src="https://habrastorage.org/webt/ud/tf/nz/udtfnznphbnuq_wmaap31rafnuq.jpeg"></p><br>
<p><img src="https://habrastorage.org/webt/ex/7j/xb/ex7jxbgh1bhqsmzbep9t9fnrije.jpeg"></p><br>
<p>   тАФ    .</p><br>
<p><img src="https://habrastorage.org/webt/5i/qs/1v/5iqs1v1pa6jqhnmjjfyuxmcqhgy.jpeg"></p><br>
<p>  тАФ     .</p><br>
<p><img src="https://habrastorage.org/webt/8l/hs/8x/8lhs8xpxud7pcd-w9ixy-qg-9a0.jpeg"></p><br>
<p>     .</p><br>
<p><img src="https://habrastorage.org/webt/xj/se/tn/xjsetne6jay2dlqlk_3mgsq4ica.jpeg"></p><br>
<p>  4     ,   2-3  , <br>
  ,      .</p><br>
<p><img src="https://habrastorage.org/webt/xu/6y/pl/xu6yplqtnq8o2yhdtj2cyjcbd3e.jpeg"></p><br>
<p>  .  , ,   ,  "   ". </p><br>
<p><img src="https://habrastorage.org/webt/ck/w7/id/ckw7idpowfs9zlrxpok7gqrhsso.jpeg"></p><br>
<p>,          . </p><br>
<p><img src="https://habrastorage.org/webt/wo/jn/rj/wojnrj1diuqw5hf8h56sxjdxyzs.jpeg"></p><br>
<p>       KSP.        тАФ    4  LED     5     .</p><br>
<p><img src="https://habrastorage.org/webt/kg/f7/qy/kgf7qyhiebdqb5seavzrvekyqaq.jpeg"></p><br>
<p>                ,    ,   DC-DC 0.9-5  ,     .</p><br>
<p><img src="https://habrastorage.org/webt/ol/5v/bz/ol5vbz1tlc-lmcmuczwf77obixc.jpeg"></p><br>
<p>     .  ,    ,         .</p><br>
<p><img src="https://habrastorage.org/webt/fb/jf/8-/fbjf8-u-p8gjm2u3ccnwfk9wzdk.jpeg"></p><br>
<h4 id="ozhivlenie"></h4><br>
<p>, ,  ,   .</p><br>
<p><img src="https://habrastorage.org/webt/wm/8v/ej/wm8vejbxienobpdzeretpbxp3yi.jpeg"></p><br>
<p>      ISP     10-   .</p><br>
<p><img src="https://habrastorage.org/webt/tn/eu/7u/tneu7uxc7bewhl9g_lfsajgx9ra.png"></p></div></div><br>
<h3 id="izuchenie-zhiznedeyatelnosti-svetofora">  </h3><br>
<p>     , ,  ,  -   .        ,     ,      "  ".      1.5 ,         тАФ   .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  </a>     ,      .</p><br>
<table>
<thead>
<tr>
<th> </th>
<th>, </th>
<th>, %/</th>
<th> , </th>
</tr>
</thead>
<tbody>
<tr>
<td>CR1212</td>
<td>18</td>
<td>1</td>
<td>0.250</td>
</tr>
<tr>
<td>CR1620</td>
<td>68</td>
<td>1</td>
<td>0.950</td>
</tr>
<tr>
<td>CR2032</td>
<td>210</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>NiCD AAA</td>
<td>350</td>
<td>20</td>
<td>98</td>
</tr>
<tr>
<td>NiMH AAA</td>
<td>900</td>
<td>30</td>
<td>375</td>
</tr>
<tr>
<td>NiCd AA</td>
<td>1000</td>
<td>20</td>
<td>270</td>
</tr>
<tr>
<td>Alkaline AAA</td>
<td>1250</td>
<td>2</td>
<td>35</td>
</tr>
<tr>
<td>NiMH AA</td>
<td>2400</td>
<td>30</td>
<td>1000</td>
</tr>
<tr>
<td><strong>Alkaline AA</strong></td>
<td><strong>2890</strong></td>
<td><strong>2</strong></td>
<td><strong>80</strong></td>
</tr>
<tr>
<td>Li-Ion</td>
<td>4400</td>
<td>10</td>
<td>600</td>
</tr>
</tbody>
</table><br>
<p>     ,      . ,    ,     (2/100)<em>2890/(24</em>30) = 80 .  ,    2    ,  32      ATtiny13.</p><br>
<p>         :       ,    GPIO,      .    тАФ ,        ( 4   14   ""),      ,        40 . </p><br>
<p>,        тАФ    .      ,      .  ,      :      5      DC-DC ,   ,          DC-DC      1.5  -&gt; 5 .        , -       +-20%,   .</p><br>
<p><img src="https://habrastorage.org/webt/ab/3v/sb/ab3vsbnwkhp2rc9tvyzv6ltyypy.png"></p><br>
<p>  ,     ""   4-5 (5 ) ,    , 25 (1.5 ),    </p><br>
<p><img src="https://habrastorage.org/webt/wx/nl/q5/wxnlq5fnsspt1cpgsdpwngtbwos.png"></p><br>
<p>.. 2890       116 ,    .   ATtiny13    POWER DOWN        . ,       тАФ       .         20-50 ,    , Hi-Z,   1 .  ,   DC-DC      .</p><br>
<p>         2  5 . :         .</p><br>
<h2 id="nekotorye-processy-mozhno-tolko-prekratit-no-ne-zakonchit">    ,   </h2><br>
<p>  ,      :</p><br>
<ul>
<li>   ,   тАФ ,      R2,       ,    .     .</li>
<li>   .           тАФ         1/37 ,          .</li>
<li>               ,      ,  .    POWER_DOWN     30 ,      ,     ,         .</li>
<li>  traffic_signals   8   4,   .   4 pin тАФ  1     DDR  PORTB</li>
<li>  uint16_t  signal_period  flash_period тАФ  ,     ,   1    .</li>
<li>   тАФ  ROM    2 ,    тАФ     -      .</li>
<li>             /UART.</li>
<li>   main   тАФ      тАФ  +50   ROM.</li>
<li>       9,6    128 ,       .</li>
</ul><br>
<p>.</p><br>
<p>       :    " ", ,  8 ,   ,    ┬л┬╗    .</p><br>
<p>         .</p><br>
<h2 id="video-raboty"> </h2><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/23ju4JVKMeA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Github</a>,   MIT.</p></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi443188/">https://habr.com/ru/post/hi443188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi443178/index.html">рдХреНрд░рд┐рд╕реНрдЯрд▓ рдмреНрд▓реЙрдХрдЪреЗрди рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕: рд╣рдХреНрд╕ рдПрдВрдб рдереЗрдлреНрдЯ рдХреЗ рдорд╛рдорд▓реЛрдВ рдХреА рдЬрд╛рдВрдЪ</a></li>
<li><a href="../hi443180/index.html">рдХреНрд░реВ рдбреНрд░реИрдЧрди рд▓реИрдВрдбрд┐рдВрдЧ рдФрд░ рдХреНрд╖реБрджреНрд░рдЧреНрд░рд╣ рд╡реАрдбрд┐рдпреЛ рд╢реЙрдЯ</a></li>
<li><a href="../hi443182/index.html">рдХрдореЛрдбреЛрд░ 64 рд╕реЗ YPbPr рдЦреАрдВрдЪреЛ</a></li>
<li><a href="../hi443184/index.html">рдкреНрдпрд╛рд░ рд╕реЗ рд▓реЗрдХрд░ рдПрдХ рдХрджрдо рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рд░рдЦрдиреЗ рддрдХ</a></li>
<li><a href="../hi443186/index.html">3CX рддрдХрдиреАрдХреА рд╕рд╣рд╛рдпрддрд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдПрдВ - 5 IP PBX рд╕реБрд░рдХреНрд╖рд╛ рдирд┐рдпрдо</a></li>
<li><a href="../hi443190/index.html">рд╕реБрд░рдХреНрд╖рд╛ рдкреЗрд╢реЗрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдиреАрддрд┐рдпреЛрдВ рдХрд╛ рдкрд░рд┐рдЪрдп</a></li>
<li><a href="../hi443192/index.html">рдкрд╛рдпрдерди рдореЗрдВ рдЕрдВрдбрд░рд╕реНрдХреЛрд░ рдФрд░ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рдмрд┐рдирд╛ рдирд┐рдЬреА рддрд░реАрдХреЗ</a></li>
<li><a href="../hi443194/index.html">рдбрдмреНрд▓реНрдпреВрдПрдлрдЖрдИрдЖрд░рдПрдо рдЗрдВрдЬреАрдирд┐рдпрд░реЛрдВ рдиреЗ рдПрдХ рдмрд╛рдпреЛрдкреНрд░рд┐рдВрдЯрд░ рдХрд╛ рдЖрд╡рд┐рд╖реНрдХрд╛рд░ рдХрд┐рдпрд╛ рдЬреЛ рдПрдХ рдШрд╛рд╡ рдкрд░ рд╕реАрдзреЗ рддреНрд╡рдЪрд╛ рдХреЛ рдкреНрд░рд┐рдВрдЯ рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi443196/index.html">рдПрдХ рдорд┐рдирдЯ рдСрдлрд╝рд▓рд╛рдЗрди рдирд╣реАрдВ - рдПрдХ рдФрджреНрдпреЛрдЧрд┐рдХ рдПрд▓рдЯреАрдИ рд░рд╛рдЙрдЯрд░ рдЪреБрдирдирд╛</a></li>
<li><a href="../hi443198/index.html">рдорд╛рд░реНрдХ рдЬреБрдХрд░рдмрд░реНрдЧ рдХрд╛ рдХрд╣рдирд╛ рд╣реИ рдХрд┐ рдлреЗрд╕рдмреБрдХ рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рддрдВрддреНрд░рд┐рдХрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>