<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌝 🗻 🤲🏽 Comment rendre le cadre de la Terre du Milieu: L'Ombre du Mordor 👨‍👧‍👧 👦 💃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Middle Earth: Shadow of Mordor a été lancé en 2014. Le jeu lui-même a été une grande surprise, et le fait qu'il s'agissait d'un spin-off de l'histoire...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment rendre le cadre de la Terre du Milieu: L'Ombre du Mordor</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430518/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ow/br/se/owbrsedfx4zll9o8sxbxx2fbnza.gif"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">Middle Earth: Shadow of Mordor a</a> été lancé en 2014.  Le jeu lui-même a été une grande surprise, et le fait qu'il s'agissait d'un spin-off de l'histoire de l'univers du Seigneur de l'Anneau était assez inattendu.  Le jeu a remporté un grand succès, et au moment de la rédaction, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">Monolith</a> a déjà publié une suite - Shadow of War.  Les graphismes du jeu sont très beaux, d'autant plus qu'il est sorti pour différentes générations de consoles, dont la Xbox 360 et la PS3.  La version PC est assez bien polie, contient des options graphiques supplémentaires et des packs de textures haute résolution qui révèlent pleinement le potentiel du jeu. <br><br>  Le jeu utilise le rendu différé DX11 relativement nouveau.  J'ai utilisé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Renderdoc</a> pour apprendre en profondeur les techniques de rendu du jeu.  Lors du travail, le maximum de paramètres graphiques possibles (ultra) a été utilisé et toutes les «lotions» possibles ont été incluses, telles que la transparence indépendante de l'ordre, la mosaïque, l'occlusion dans l'espace de l'écran et divers flous de mouvement. <br><a name="habracut"></a><br><h2>  Cadre </h2><br>  Voici un cadre que nous analyserons.  Le joueur est situé sur une plateforme en bois dans la région d'Udun.  Shadow of Mordor utilise des mécanismes similaires à ceux de jeux comme Assassin's Creed, où vous pouvez escalader des bâtiments et des tours, puis profiter du paysage numérique environnant depuis les toits. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/73d/325/3e0/73d3253e0323327f95babf989f060f93.jpg" alt="image"></div><br><h2>  Passage en profondeur </h2><br>  Les quelque 140 premiers appels de rendu font une passe préliminaire rapide pour rendre les éléments d'élévation et les bâtiments les plus grands au tampon de profondeur.  La plupart des objets ne tombent pas dans cette passe préliminaire, mais cela aide lorsque le jeu a un très grand nombre d'appels de tirage et que vous pouvez regarder loin.  Fait intéressant, un personnage qui est toujours au centre de l'écran et occupe une fraction décente de l'espace d'écran ne tombe pas dans ce passage.  Comme dans de nombreux autres jeux en monde ouvert, le moteur utilise les valeurs z inverses.  Cette technique lie le plan proche à 1,0 et le plan lointain à 0,0 pour augmenter la précision à de grandes distances et éviter les conflits z.  En savoir plus sur la précision du tampon z <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/181/ba6/57d/181ba657ddc430ee3a892e852cc276e9.png" alt="image"></div><br><h4>  G-buffer </h4><br>  Immédiatement après cela, la passe du tampon G commence, qui est effectuée dans environ 2700 appels de tirage.  Si vous avez lu mon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">analyse précédente de Castlevania: Lords of Shadow 2</a> ou étudié d'autres articles similaires, ce passage devrait vous être familier.  La propriété des surfaces est enregistrée dans un ensemble de tampons, qui sont ensuite lus dans les passes du calcul d'éclairage pour calculer les réactions des surfaces à la lumière.  Shadow of Mordor utilise un rendu différé classique, mais un nombre relativement faible de cibles de rendu du G-buffer est utilisé pour atteindre cet objectif (3).  A titre de comparaison: Unreal Engine dans ce passage utilise 5-6 tampons.  G-buffer a le schéma suivant: <br><br><h5>  Tampon normal </h5><br><table><tbody><tr><td>  <strong><font color="#ff0000">R</font></strong> </td><td>  <strong><font color="#00ff00">G</font></strong> </td><td>  <strong><font color="#0000ff">B</font></strong> </td><td>  <strong>Un</strong> </td></tr><tr><td>  <strong>Normal.x</strong> </td><td>  <strong>Normal.y</strong> </td><td>  <strong>Normal.z</strong> </td><td>  <strong>Identifiant</strong> </td></tr></tbody></table><br>  Le tampon des normales stocke les normales dans l'espace mondial au format «8 bits par canal».  Cela suffit à peine, et parfois pas du tout, pour décrire des surfaces plates variant en douceur.  Si vous regardez attentivement, cela peut être vu dans certaines flaques d'eau dans le jeu.  Le canal alpha est utilisé comme identifiant qui marque différents types d'objets.  Par exemple, j'ai découvert que 255 fait référence au personnage, 128 à la partie animée du drapeau, et le ciel est marqué avec ID 1, car plus tard ces identifiants sont utilisés pour le filtrer au stade de l'ajout (le ciel obtient sa propre floraison radiale). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/za/jf/y8/zajfy84cg-abqarjiybgm3qcztw.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9k/aq/4v/9kaq4vempyj-n14_kdfte3d51ss.png"></div><br>  <i>Dans l'article d'origine, ces images et bien d'autres sont animées pour plus de clarté, donc je vous recommande d'y regarder.</i> <br><br><h5>  Albedo tampon </h5><br><table><tbody><tr><td>  <strong><font color="#ff0000">R</font></strong> </td><td>  <strong><font color="#00ff00">G</font></strong> </td><td>  <strong><font color="#0000ff">B</font></strong> </td><td>  <strong>Un</strong> </td></tr><tr><td>  <strong>Albedo.r</strong> </td><td>  <strong>Albedo.g</strong> </td><td>  <strong>Albedo.b</strong> </td><td>  <b>Occlusion de la cavité</b> </td></tr></tbody></table><br>  Le tampon d'albédo stocke les trois composants de l'albédo et une occlusion à petite échelle (parfois appelée occlusion de cavité), qui est utilisée pour ombrer de petits détails qui ne peuvent pas être obtenus avec une carte d'ombre ou un post-traitement dans l'espace de l'écran.  Il est principalement utilisé à des fins décoratives, par exemple, des trous et des plis sur les vêtements, de petites fissures dans un arbre, de petits motifs sur les vêtements de Talion, etc. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t6/ul/bz/t6ulbzqtlw3ncodrlnd49uxtmwa.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/28/52/lr/2852lrdq75bxtqpkywvutfsm4se.png"></div><br>  Lors du traitement des ennemis dans le shader, l'albédo prend en compte la texture du sang (il est intéressant de noter que Talion n'a jamais de blessures visibles).  La texture du sang est l'entrée pour la phase de rendu des vêtements et du corps des ennemis, mais elle ne spécifie pas la couleur du sang, qui est l'entrée dans le tampon constant, mais détermine les facteurs / niveaux de sang pour contrôler la quantité de sang affichée.  De plus, l'orientation normale est utilisée pour mettre à l'échelle l'effet, vous permettant de contrôler la direction des éclaboussures de sang.  Ensuite, l'albédo s'obscurcit essentiellement avec la luminosité des blessures reçues par l'ennemi, prises à l'endroit correspondant sur la carte du sang, et modifie également d'autres propriétés, telles que spéculaires, pour obtenir un effet sanguin convaincant.  Je n'ai pas pu trouver la partie du cadre dans laquelle la carte est rendue, mais je suppose qu'elles sont enregistrées dès le début du cadre lorsque l'épée est exposée, puis utilisées ici. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1y/_r/rt/1y_rrtgi8bsuryvjmqmpdvzwpfk.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mi/tv/nu/mitvnumojb0zx4qhzohrgrj810e.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qp/wx/t7/qpwxt7y4r-k3ugakdasysx1vtvm.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6d/-r/lz/6d-rlzgi7fvdep6xrxnakmjp9yg.png"></div><br><h5>  Tampon spéculaire </h5><br><table><tbody><tr><td>  <strong><font color="#ff0000">R</font></strong> </td><td>  <strong><font color="#00ff00">G</font></strong> </td><td>  <strong><font color="#0000ff">B</font></strong> </td><td>  <strong>Un</strong> </td></tr><tr><td>  <b>Rugosité</b> </td><td>  <b>Intensité spéculaire</b> </td><td>  <b>Fresnel</b> </td><td>  <b>Facteur de diffusion souterraine</b> </td></tr></tbody></table><br>  Le tampon spéculaire contient d'autres propriétés de surface que l'on peut s'attendre à voir dans les jeux, telles que la rugosité (ce n'est pas tout à fait de la rugosité, mais un degré spéculaire à l'échelle, mais il peut être interprété de cette façon), l'intensité spéculaire (la luminosité de la réflexion spéculaire) qui évolue l'albédo pour obtenir le facteur de réflexion spéculaire de couleur correct (communément appelé F0 dans la littérature, car il s'agit de l'entrée de la réponse du miroir de Fresnel) et du composant de diffusion souterraine (diffusion souterraine).  Ce dernier composant est utilisé pour éclairer les matériaux translucides tels que les tissus fins, les plantes et la peau.  Si plus tard nous plongons dans l'étude du shader d'éclairage, nous constatons que nous utilisons ici la variation du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modèle spéculaire normalisé selon Blinn-Fong</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qx/rv/8c/qxrv8c9xk-4-akibiogsgnvxszw.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wv/xw/_f/wvxw_f6h-5vgmu6cvlucuum3sei.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fb/f3/v1/fbf3v1y8ardyfkjtshlv8zf5ld8.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ql/zq/lz/qlzqlzbbxwy_mlx05pwxwpxmrga.png"></div><br><h5>  Autocollants différés </h5><br>  Comme nous l'avons vu ci-dessus, Shadow of Mordor affiche des traces de sang assez détaillées sur les personnages blessés.  Lorsque Talion agite son épée, l'environnement reçoit également sa part de sang d'orque noir.  Cependant, une autre technique est utilisée pour les environnements - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">décalcomanies différées</a> .  Cette technique consiste à projeter un ensemble de textures plates sur la surface de ce qui a été précédemment rendu.  De cette façon, le contenu du G-buffer est remplacé par ce nouveau contenu avant d'effectuer la passe d'éclairage.  Dans le cas du sang, une simple pulvérisation sanglante suffit, et lors du rendu de nombreux décalques à tour de rôle, un paysage plutôt sombre est rapidement créé. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8_/zo/no/8_zonoux0rx6h_cemftpprebcke.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pk/sc/qn/pkscqng3m2s0c2hj-e-fs1eonis.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/a4/uf/rs/a4ufrsgki8blucgm4g8zq3n95ha.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dj/jl/3c/djjl3c5s2dsimxwtoim-c5vk3rg.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wj/hj/cb/wjhjcbcfdu0ts1kpnmh_2_tvhdq.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8r/tk/fi/8rtkfinzlyym0jweyx0gpizv4zs.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uh/ns/pw/uhnspwmomqsrlnoctsokx8q878a.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/di/7m/70/di7m700h63pqtmaiydgrezyt0w4.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8t/ky/sz/8tkyszkhinic56jqebsteeudram.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0a/tu/kj/0atukjo4vjzv3djehm6sttjhqps.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-5/vm/ja/-5vmjatrsxyfdjhqm5nhsmu_vxw.png"></div><br>  La dernière chose qui est rendue dans le passage du tampon G est le ciel, la texture du ciel est en très haute résolution (8192 × 2048) au format HDR BC6H.  J'ai dû faire une petite correction de tonalité, car en HDR toutes les couleurs sont trop sombres. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/95a/6b2/dda/95a6b2dda3a632aebe8fc902f143232d.jpg" alt="image"></div><br><h3>  Tessellation </h3><br>  Une «fonctionnalité» très intéressante du jeu (si elle est activée) est la tessellation.  Il est utilisé pour de nombreuses choses différentes, du terrain au rendu des personnages (ainsi que des accessoires et des objets de personnages).  Ici, la tessellation ne subdivise pas le maillage low poly, mais crée des polygones à partir d'un nuage de points, en utilisant le degré de subdivision nécessaire, en fonction des critères du niveau de détail, par exemple, de la distance à la caméra.  Un exemple intéressant est la cape Talion, qui est transmise au GPU sous forme de nuage de points (après simulation physique), et le shader de pavage recrée les polygones. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1i/jf/3i/1ijf3ikncscrhyvhjyyan6kdx80.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wj/fp/il/wjfpil_rw7_t1z7pxrfntobcrse.png"></div><br><h3>  Transparence indépendante des commandes </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b78/f09/897/b78f09897b7ed45f990f51f91291c967.png"></div><br>  L'une des premières choses qui m'a frappé par son étrangeté est le traitement capillaire, car il effectue un shader spécial très complexe.  Dans les options graphiques, l'option OIT (Order-Independent Transparency) pour les cheveux est mentionnée, c'est-à-dire qu'elle devrait l'être.  Premièrement, il effectue la sortie vers un tampon séparé et calcule le nombre total de pixels transparents superposés les uns aux autres, tout en sauvegardant les propriétés dans une structure "profonde" similaire à un tampon G.  Plus tard, un autre shader trie les fragments individuels selon leur profondeur.  Il semble que les flèches rendent également de cette façon (probablement, leur plumage nécessite un tri approprié).  C'est un effet très subtil qui n'ajoute aucune différence graphique particulière, mais c'est quand même un détail intéressant.  Voici un exemple simple: l'image ci-dessus montre le nombre de fragments qui se chevauchent (le plus rouge, le plus de fragments).  La transparence régulière est toujours triée par le processeur et rendue en alpha traditionnel.  Seules les entités individuelles tombent dans la passe OIT. <br><br><h3>  Ombres du Mordor </h3><br>  SoM a de nombreuses sources d'ombre.  En plus des cartes d'ombre traditionnelles des sources de lumière dynamiques, SoM utilise une occlusion ambiante à deux canaux dans l'espace de l'écran, une occlusion à micro-échelle créée pour presque tous les objets du jeu et une texture d'occlusion similaire à une carte de hauteur avec une vue de dessus. <br><br><h5>  Occlusion dans l'espace écran </h5><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2cb/58c/fc5/2cb58cfc57777d65a15af4813977c962.png"></div><br>  Le premier passage est rendu en utilisant le tampon G ambiant et l'occlusion spéculaire dans l'espace d'écran.  Le shader lui-même est un énorme cycle déplié qui échantillonne à la fois la carte de profondeur en taille réelle et la carte de profondeur moyenne précédemment réduite, à la recherche d'échantillons voisins dans un modèle donné.  Il utilise une texture carrée 4x4 pour sélectionner des vecteurs pseudo-aléatoires à la recherche de sources d'occlusion.  Il rend un tampon d'occlusion bruyant, qui est ensuite lissé par un simple flou en deux passes.  La caractéristique la plus intéressante ici est qu'il existe deux canaux d'occlusion différents: l'un d'eux est utilisé comme occlusion spéculaire et l'autre comme occlusion diffuse.  Dans les implémentations SSAO standard, un canal est calculé qui s'applique à tout l'éclairage cuit.  Ici, la carte SSAO est également lue pour être transmise au passage d'éclairage directionnel, le cas échéant. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/re/xf/kj/rexfkjx49htyufzecfeg2n7lsau.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dl/va/nz/dlvanzzg8bpcqughsrout8kaxlg.png"></div><br><h5>  Cartes fantômes </h5><br>  L'événement suivant est le rendu de la carte d'ombre.  Étant donné que l'action du jeu se déroule principalement dans des espaces ouverts, la plupart de la lumière et des ombres proviennent de la lumière directionnelle principale.  Nous utilisons ici la technique des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cartes d'ombres en cascade</a> (dont une variante est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://">des cartes d'ombres divisées parallèles</a> ), une technique assez standard pour appliquer des ombres sur de longues distances, qui consiste à rendre la même scène d'un point de vue de la source lumineuse pour différentes zones de l'espace.  Habituellement, les cartes ombrées éloignées de la zone de couverture de la caméra sont à de grandes distances ou ont une résolution inférieure aux précédentes, ce qui réduit essentiellement la résolution dans les zones où les détails ne sont toujours pas nécessaires en raison du fait que la géométrie est trop éloignée.  Dans cette scène, le jeu affiche trois cascades d'ombres 4096 × 4096 (en fait, le jeu a une place pour quatre).  La cascade supérieure est très proche de Talion, et celle du bas comprend des montagnes et des objets très loin de la caméra.  Lorsque vous travaillez avec des ombres, le jeu utilise la même astuce avec la coordonnée z inverse que dans la carte de profondeur. \ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/347/7bc/a65/3477bca65b8cff92dfcfd68c9d66b8a8.jpg"></div><br><h5>  Tampon d'ombre </h5><br>  L'étape suivante consiste à créer un tampon caché.  Il s'agit d'une texture monocanal, basée sur les informations d'occlusion des cartes d'ombre précédentes, elle code un facteur d'ombre dans l'intervalle [0, 1].  Pour créer un lissage autour des bords, la carte d'ombre est échantillonnée 4 fois en utilisant l'état d'un échantillonneur bilinéaire spécial, qui reçoit 4 échantillons et les compare avec une valeur donnée (c'est ce qu'on appelle le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://">filtrage de fermeture en pourcentage</a> ).  L'obtention de plusieurs échantillons et la moyenne de leurs résultats sont souvent appelées <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ombres douces plus proches en pourcentage</a> .  En plus de lire la carte des ombres, la dernière composante du tampon spéculaire (c'est-à-dire le coefficient de diffusion souterraine) est également échantillonnée, qui est multipliée par le «facteur de saignement léger».  Il semble que cela soit nécessaire pour éliminer l'ombrage de ces objets, afin qu'un peu plus de lumière les traverse. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b7f/b55/63f/b7fb5563faae1553e0f970374ee0b774.jpg"></div><br><h5>  Texture de projection directionnelle </h5><br>  Une autre source de lumière et d'ombre est une texture vue de dessus échantillonnée par une source de lumière directionnelle.  Il s'agit de la dominante de couleur ajoutée à la couleur de la source de lumière directionnelle, plus l'effet de l'ombrage global qui s'applique à l'éclairage directionnel.  Il semble que certains d'entre eux ont été créés manuellement au-dessus d'une carte d'éclairage de niveau générée automatiquement avec une vue de dessus.  Il semble que les bords des ombres pour la géométrie statique soient ajustés manuellement (peut-être pour éviter les conflits avec la vraie carte des ombres), et certaines parties semblent également être légèrement teintées à la main.  La tâche de cette texture est probablement l'ajout à faible coût d'occlusion ambiante à grande échelle et de simulations d'éclairage global légères en plus de l'éclairage directionnel.  Les images ci-dessous montrent la teinte, l'occlusion et le produit des deux facteurs, ce qui nous donne une idée de ce à quoi ressemble le masque de couleur final. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6v/vf/6a/6vvf6aaf5khdrbclmwpzp9_faka.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7e/fs/fe/7efsferrjbdtsu9megpk0gtfidc.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sd/bk/sv/sdbksv3a4jlkgzxui4nvl-suylq.png"></div><br>  Le résultat de toutes les passes d'éclairage est enregistré dans la cible de rendu du format R11G11B10F.  Voici à quoi ressemble le résultat.  J'ai effectué une correction tonale des résultats pour rendre plus visible l'effet de l'éclairage directionnel au niveau. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2a/28e/a63/f2a28ea6372642667b3778dfc32b193f.jpg"></div><br>  Toutes les montagnes éloignées (non représentées dans l'image ci-dessus) sont également éclairées par la lumière directionnelle, mais elles sont mises en évidence comme un boîtier séparé afin que l'éclairage puisse être mieux contrôlé.  Certains sont à l'échelle, mais ceux plus loin sont en fait des imposteurs avec des cartes normales et albédo intelligemment créées.  Ils ont des sources spéciales d'éclairage directionnel qui n'affectent que les montagnes. <br><br><h3>  Éclairage statique </h3><br>  Shadow of Mordor utilise une implémentation d'éclairage statique très gourmande en mémoire, qui utilise des textures de très grand volume.  L'image ci-dessous montre trois textures statiques pour la quantité d'éclairage utilisée pour éclairer de manière diffuse une partie de cette zone.  Chacun d'eux est une énorme texture compressée 512x512x128 BC6H, c'est-à-dire qu'ils occupent 32 Mo par texture ou 96 Mo en général (nous jouons avec des paramètres de qualité maximale).  La texture de la couleur indique l'intensité entrant dans le voxel.  Les deux autres indiquent la force ou l'amplitude de cette intensité dans les six directions xyz et -xyz, et la normale est utilisée pour sélectionner trois composantes (xyz positive ou négative, celles qui sont les plus cohérentes avec la normale).  Après avoir construit ce vecteur, nous prenons son produit vectoriel par le carré de la normale, et cela devient le facteur d'échelle pour l'intensité.  La formule est la suivante: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l9/yw/vk/l9ywvkgxuoti8bbppke_2c8o068.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ez/j3/uf/ezj3ufolhefyqxafjqskci0msho.png"></div><br>  Les volumes de lumière statique rendent également une carte cubique pour l'éclairage spéculaire, qui est probablement capturé au centre du SLV.  Chose intéressante, les textures de volume stockent des valeurs HDR compressées au BC6H et les cartes cubiques sont stockées au format BC3 (DXT5), qui ne peut pas stocker de valeurs à virgule flottante.  Pour compenser cette limitation, le canal alpha conserve la luminosité, qui passe ensuite de 1 à 10.  C'est une décision un peu bizarre, et pour moi, cela ressemble plus à une implémentation Legacy.  N'oubliez pas que le jeu a été publié pour les consoles de génération précédente, qui ne prennent pas en charge les nouveaux formats de texture HDR. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/k3/qo/z-/k3qoz-zblorjdxi7jyqthripztg.png"></div><br>  Les cadres ci-dessous montrent les résultats «avant et après» en tenant compte de l'impact de l'image moyenne.  Pour la visualisation, j'ai effectué une correction tonale. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4i/iq/yo/4iiqyosjg2tmdud840rxbhstofa.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/su/of/cd/suofcd-ls4myfuivd5vqb9ykbgi.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/37/rq/wb/37rqwb76ngards_rywaxhb_x9xw.png"></div><br><h3>  Brouillard atmosphérique </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9af/086/c47/9af086c474cada9250daae007ec3c8bc.jpg"></div><br>  Shadow of Mordor a un système météo et horaire, grâce auquel le soleil brille ou la pluie se déverse à travers le jeu dans Mordor.  Ce système est contrôlé par la somme des composants, et l'un des plus importants est le brouillard.  Shadow of Mordor utilise un modèle de brouillard atmosphérique assez simple mais physiquement solide, y compris <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la</a> diffusion de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rayleigh</a> unique, ainsi que la diffusion par une particule sphérique (diffusion Mie). <br><br>  Il commence par calculer la position de la caméra par rapport au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">centre de la terre</a> .  Plusieurs formules trigonométriques permettent de déterminer où se trouve la caméra dans l'atmosphère, où se trouve le pixel, et quelle distance le faisceau parcourt dans l'atmosphère à une hauteur maximale donnée de l'atmosphère.  Dans notre cas, l'atmosphère est située à une hauteur de 65 000 mètres au-dessus de la surface de la planète.  Compte tenu de ces informations, Rayleigh et les coefficients de particules sphériques sont utilisés pour calculer à la fois les types de densités des particules de brouillard et leurs couleurs.  Ces densités obscurcissent les pixels déjà ombrés, diffusant la lumière entrant dans la caméra depuis la surface ombragée et contribuant au brouillard.  Lors de la simulation d'une telle diffusion, la luminosité et la direction du soleil sont prises en compte. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ye/at/id/yeatidzdiemga1gntnm1zg9uz8k.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zj/39/zr/zj39zryuhmwdyadmcp0nb_g1uz8.png"></div><br><h3>  Vitesse d'obturation et correction de tonalité </h3><br>  Lors du calcul de la vitesse d'obturation, une approche assez standard est utilisée: la réduction séquentielle de la résolution du tampon de luminosité, calculée à partir du tampon de couleur HDR principal, en une chaîne de textures, chacune ayant la moitié de la taille de la texture précédente, en commençant par une texture 1/3 du tampon de cadre principal.  Avec cette diminution de résolution, 4 échantillons sont prélevés, faisant la moyenne des valeurs des pixels voisins, c'est-à-dire qu'après avoir converti toutes les valeurs moyennes en un seul texel, le résultat final devient une luminosité moyenne.  Une fois que la texture atteint la taille de 16 × 9 texels, un shader de calcul est lancé, résumant tous les texels restants.  Cette valeur est immédiatement lue dans la passe de correction de tonalité pour modifier les valeurs de luminosité. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ig/bi/h4/igbih41dc2x9aytucfgq1z_iuye.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/os/gw/t8/osgwt8co0pqgvomovsydsemapuw.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qh/bc/qv/qhbcqvqxy5hgvtn9x0c9kd1an6e.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/g-/dw/fm/g-dwfm48oqtvuu1bizc1sikm7sq.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zg/8w/oz/zg8wozwpviq0nnt4-kef9b9azis.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/56/ik/dc/56ikdcoixmrbo0whghswhxdzxhk.png"></div><br>  Pour la correction de tonalité, l'opérateur Reinhardt est utilisé, dont une formule optimisée peut être trouvée <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  En code hlsl, cela ressemblera à ceci: <br><br><pre><code class="cpp hljs">float3 hdrColor = tex2D(HDRTexture, uv.xy); hdrColor *= exposureValue; <span class="hljs-comment"><span class="hljs-comment">// This was calculated by the compute shader in the luminance downsampling pass float3 x = max(0.0, hdrColor - 0.004); float3 finalColor = (x * (6.2 * x + 0.5)) / (x * (6.2 * x + 1.7) + 0.06);</span></span></code> </pre> <br>  Si nous traçons cette courbe, nous verrons que cet opérateur rejette 10% des valeurs blanches même avec une valeur d'entrée de 2,0, tout en laissant de force une petite partie de l'intervalle inférieur complètement noire.  Cela crée une image sombre et désaturée. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cc2/ea1/097/cc2ea10970239fb761b995496c049a8b.jpg" alt="image"></div><br><h3>  Stade Alpha </h3><br>  L'étape alpha est un peu inhabituelle car elle rend les objets directement dans le tampon LDR.  D'autres jeux les rendent également dans le tampon HDR afin qu'ils puissent participer au passage d'obturateur.  Quoi qu'il en soit, la texture de luminosité précédemment calculée est limitée à tous les objets illuminés par alpha (dans certains cas, par exemple, pour les objets électroluminescents, la vitesse d'obturation est calculée en utilisant les constantes de shader, pas la recherche de texture), et donc la vitesse d'obturation est appliquée automatiquement lors du rendu, et non effectuée en post-traitement.  Un cas très spécifique d'utilisation de l'alpha dans un jeu est une transition vers le mode fantôme (le fantôme de Celebrimbor y est rendu au-dessus du personnage du joueur, forgé dans les anneaux souverains de l'univers LOTR; ainsi, le jeu montre qu'il est toujours à proximité, bien qu'invisible).  Le jeu transmet plusieurs paramètres aux mailles des deux personnages, qui contrôlent l'opacité et permettent au jeu d'obscurcir partiellement Talion et de montrer progressivement Celebrimore.  D'autres objets du jeu en mode fantôme rendent également des versions fantômes au-dessus d'objets opaques, tels que des ennemis et des tours.  Voici une autre scène avec la transition vers le monde fantomatique. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ux/ca/zs/uxcazsok9pqzuusfrb__dutdphw.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6g/1c/9e/6g1c9esdqit50db_mbck516ma-0.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f_/dq/ss/f_dqss-avlzlyrb4s6_z6kqog0e.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uw/yy/va/uwyyvakydfnsksy49ntfltpbwp8.png"></div><br><h3>  La pluie </h3><br>  Dans le cadre principal que nous avons examiné, il n'y a pas de pluie, mais la météo est une partie tellement importante du jeu que je voudrais le mentionner ici.  Il est généré et simulé dans le GPU, et rendu juste à la fin de la phase alpha.  Un shader de calcul est exécuté qui exécute la simulation et écrit les positions dans le tampon.  Ces positions sont prises par un autre shader qui, à l'aide d'un appel indirect instancié, rend autant d'instances de quads que les positions ont été calculées lors de la passe précédente.  Le vertex shader a un simple quad qui, si nécessaire, est déformé et tourne vers la caméra.  Pour empêcher la pluie de pénétrer dans les surfaces, le vertex shader lit également les cartes de hauteur à partir d'une vue de dessus, ce qui vous permet de rejeter toutes les gouttes sous la surface qui se chevauchent.  Cette carte de hauteur est rendue juste au début du cadre.  Le même vertex shader indique au pixel shader où obtenir l'échantillon de la texture de goutte;  si la goutte est proche de la surface, elle sélectionne une zone de texture contenant une animation de démarrage.  De plus, les gouttes de pluie effectuent des calculs de brouillard dans le pixel shader pour se fondre parfaitement avec le reste de la scène.  Voici une capture d'écran du même point de vue un jour de pluie. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xv/yv/ds/xvyvds_w25ybjxilgvr5crbcpo4.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3c/ox/ax/3coxaxhejifprppkaheiahszfcm.png"></div><br>  Lorsque l'effet de pluie est activé, le tampon spéculaire est globalement modifié pour créer des surfaces humides et les vagues de pluie sont restituées dans le tampon normal.  L'animation est chronométrée, donc une seule image de l'animation en boucle est utilisée.  Le tampon normal illustré ci-dessous est modifié pour afficher les ondes rendues dans le tampon. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ur/du/mz/urdumzhuebf1o2pnud_b2ztlfik.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p3/cv/t_/p3cvt_qq7vo9txgwycf7l2oec2y.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vc/3d/u3/vc3du3ytthqfsw1h7vwzr0tfxom.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6y/tk/rk/6ytkrkj0w38kvccrtrjpey95c_w.png"></div><br><h3>  Fusées éclairantes et Bloom </h3><br>  Une fois le rendu alpha terminé, les reflets de l'objectif sont rendus par-dessus.  Une série de quads décalés est rendue à partir du point d'où vient la lumière directionnelle (dans notre cas, le soleil).  Immédiatement après cela, une passe de floraison est effectuée.  Il s'agit d'une technique assez standard, qui consiste en une série de textures de taille réduite et floues contenant des pixels dont la luminosité dépasse un certain seuil.  Deux passes de floraison sont utilisées, communes avec le flou gaussien pour toute la scène et un flou radial spécial qui ne s'applique qu'au ciel.  Le flou radial est l'une des opérations qui utilise un identifiant spécial du tampon G des cartes normales, car seuls les pixels du ciel sont pris en compte.  En prime, ce flou échantillonnera la carte de profondeur et peut créer des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rayons crépusculaires à</a> faible coût.  Puisque nous travaillons avec un tampon LDR à ce stade, la valeur du seuil de floraison est différente de la valeur du tapis HDR (les valeurs supérieures au seuil, généralement 1,0, conduisent au calcul), ce qui signifie que la valeur de la floraison obtenue à partir de celui-ci est légèrement limitée.  En tout cas, c'est bon pour le jeu et voici les résultats.  Dans les images ci-dessous, les couleurs de la texture du mip de floraison semblent un peu étranges car chaque pixel est mis à l'échelle par la luminosité contenue dans le canal alpha.  Cette luminosité a été calculée plus tôt, au stade de la correction tonale.  Dans la composition finale, la floraison est calculée comme <strong>bloom.rgb · bloom.a · bloomScale</strong> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/h3/2y/ra/h32yra8lvz_-pxsab9raxyfobei.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/le/2k/dx/le2kdxxuaqtjrdnhdvxfobubyhw.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jb/kz/mk/jbkzmkd2ans3vxvs_we9eowudvs.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xs/gs/dg/xsgsdgnvhckxgckfhs7k4hvpc7u.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/v3/yr/hh/v3yrhhxazolya5nu8fn7id66p6k.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q8/r1/wl/q8r1wlekxf0tae6ivo6bfyjngie.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/5c/tj/gw5ctjh8owpukokne73nskb4n48.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8k/te/sg/8ktesgsr6ser_l6ssaorfcpniww.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j6/u6/ts/j6u6tsvqcjuwqqzepsfeogf330i.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ee/tf/vg/eetfvgkcuahvbbonuhfnpinh32w.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/m-/zw/bc/m-zwbcp4qvnr69vn1unq1clh3ws.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ei/ta/-s/eita-ssnu2cqzwkspcrjan42-ua.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/db/cb/cs/dbcbcsoo_znq2ex30ixasi-c8le.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i4/ja/ro/i4jarols6px4f0nnbai-rk5r87u.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/na/ag/mj/naagmjq8e75kxcxmyhberqpslag.png"></div><br><h3>  Anticrénelage + profondeur de champ </h3><br>  Il n'y a pas grand-chose à dire sur ces deux opérations; des approches standard de l'industrie sont utilisées.  Un simple passage à travers l'anticrénelage FXAA est effectué immédiatement après la composition de la floraison avec l'image LDR, et la profondeur de champ est effectuée immédiatement après.  Pour la profondeur de champ, le jeu rend deux versions floues diminuées du tampon final.  Ensuite, la profondeur de pixel est utilisée pour mélanger des images floues et normales, ce qui donne un effet de défocalisation.  Pour plus de clarté, dans cette capture, j'ai exagéré l'effet de la profondeur de champ.  Le jeu dispose d'un mode capture d'écran intégré, vous permettant de configurer facilement ces conditions. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ug/et/zf/ugetzfmh2jbbcpvrzb1e6dpwbhu.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p_/x4/fk/p_x4fkleolfxxnpvs9vnveywipy.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bi/vg/bp/bivgbpqa_nmzkx4zgiuzmu3nm6e.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/w2/vn/hg/w2vnhg6eoxe92rjat51qf65pggo.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uf/0g/kj/uf0gkjnripqq4ctkcpsremqrqnk.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bx/k5/z4/bxk5z47piwcgchqepehqpyypwgu.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/dc/xq/uedcxqx7svcjyq6g0-tp4uc1gho.png"></div><br><h3>  Flou de mouvement </h3><br>  Le flou de mouvement se compose de deux passes.  Tout d'abord, les données des orientations précédente et actuelle de la caméra sont transférées vers le tampon de vitesse plein écran.  Dans ce cas, deux canaux de la texture sont remplis de vitesse dans l'espace d'écran.  Maintenant, le canal r contient l'amplitude du changement de pixel dans la direction horizontale de l'écran, et le canal g contient l'amplitude dans la direction verticale.  C'est ainsi que les rayures radiales sont obtenues lors du déplacement de la caméra.  Le personnage est à nouveau rendu, remplissant cette fois le canal bleu en fonction de ses poses actuelles et précédentes, comme c'est le cas avec la caméra.  Le canal bleu est utilisé pour marquer si le rendu doit être rendu ou non.  Le canal alpha est également rempli d'une valeur constante (0,0598), mais je n'ai pas étudié sa valeur ou ses objectifs.  La résolution du tampon de vitesse est réduite à une très petite texture en faisant la moyenne sur une plage de vitesses relativement large dans la texture d'origine.  Dans la dernière passe, cela donne à chaque pixel une idée approximative de ce que sera le rayon de flou dans une vraie passe de flou. <br><br>  Ensuite, la passe de flou lit les textures de vitesse, une carte de profondeur, le tampon de couleurs d'origine et la texture de bruit.  Cette dernière sert à masquer l'effet d'une image miroir, ce qui peut se produire avec ce type de flou à grand rayon.  Ensuite, le tampon d'image est échantillonné plusieurs fois dans la direction indiquée par le tampon de vitesse, les couleurs sont moyennées, ce qui conduit à un flou de l'image dans la direction des vecteurs de mouvement.  En outre, cet effet est mis à l'échelle en fonction de la fréquence d'images avec laquelle le jeu fonctionne.  Pour cette capture, j'ai dû limiter le jeu à 30fps, car à 60fps et plus, c'est à peine perceptible. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zn/4r/-7/zn4r-7rgnvx9zuh6asjnzqxknno.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hr/x_/yu/hrx_yug350grzjbnn6r6d9b7spa.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/94/i5/bc/94i5bcpjozmzuykcwfh9vksqjk8.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/n7/mr/zo/n7mrzoppnprexpqv5h7uj-xobvu.png"></div><br><h3>  Correction des couleurs </h3><br>  La dernière passe de correction des couleurs est effectuée à l'aide des «cubes de couleur».  Un cube de couleur est une texture 3D dont les composants RVB s'accrochent aux coordonnées xyz de la texture.  Ces coordonnées xyz contiennent la couleur dont nous avons besoin pour remplacer la couleur d'origine.  Dans notre cas, la table de recherche (LUT) est neutre (c'est-à-dire que les coordonnées et la couleur contiennent la même valeur), j'ai donc modifié la même scène en utilisant les préréglages fournis par le jeu dans l'éditeur de caméra. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-i/dk/rd/-idkrdltmru5ndotkyzhmdbwth4.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/az/-x/it/az-xitiqseycg8t_mz0kuhjxh1m.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/em/p0/ds/emp0dsyarj3nhdi-s453p0p0rsa.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1e/9q/fa/1e9qfapyuezjdafa8licevb6csu.png"></div><br><h3>  Cadre final </h3><br>  Après la création du cadre principal dans un tampon séparé, l'interface utilisateur est rendue.  Cela garantit que, quelle que soit la taille sélectionnée pour le tampon arrière, l'interface utilisateur restera toujours claire et belle dans la taille de la fenêtre native, tandis que le jeu peut modifier la résolution si nécessaire pour garantir la vitesse.  Au final, les deux textures sont mélangées ensemble sur la base des données du canal alpha de l'interface utilisateur, puis rendues dans le tampon de trame final, qui est prêt à être affiché à l'écran. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cv/ba/t9/cvbat95whbpymp0cfpnjmohp_oo.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i0/y0/qm/i0y0qmb9x6liyqlpcd4vs2rli3y.png"></div><br>  J'espère que vous avez apprécié mon analyse.  Je tiens à remercier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">Adrian Correge</a> pour le travail incroyable qui m'a inspiré à étudier les graphismes, ainsi que le personnel du studio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Monolith</a> pour ce jeu vraiment inoubliable. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430518/">https://habr.com/ru/post/fr430518/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430506/index.html">Art sombre de la résurrection: comment récupérer des données à partir de supports endommagés</a></li>
<li><a href="../fr430508/index.html">DevOps: qu'est-ce que c'est vraiment</a></li>
<li><a href="../fr430510/index.html">Comment écrire du code que tout le monde comprendra?</a></li>
<li><a href="../fr430512/index.html">Comment vivent les pigistes: ne travaillez pas avec des clients omniscients et laissez-vous tergiverser</a></li>
<li><a href="../fr430514/index.html">Blockchain Charity - DataArt remporte le hackathon du sommet de la blockchain de Malte</a></li>
<li><a href="../fr430520/index.html">Présentation de Spring Data MongoDB</a></li>
<li><a href="../fr430522/index.html">Avez-vous besoin d'une culture d'entreprise en informatique? Confession du chef de marque du studio Krasnodar Plarium</a></li>
<li><a href="../fr430524/index.html">Architecture de réseau de neurones</a></li>
<li><a href="../fr430526/index.html">Machines à sous: d'où viennent-elles en URSS et comment sont-elles arrangées</a></li>
<li><a href="../fr430528/index.html">Programmation avec PyUSB 1.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>