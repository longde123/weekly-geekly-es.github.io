<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëßüèø üå≤ üôåüèº Escribimos "¬°Hola, mundo!" Aplicaci√≥n web Haskell (Spock) üë®‚Äç‚ù§Ô∏è‚Äçüë® üë®üèæ‚Äçüéì ü•É</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Estaba aburrido de escribir en Python, quer√≠a algo inusual. Decid√≠ probar Haskell. No s√© el idioma, pero no quer√≠a escribir programas de entrenamiento...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Escribimos "¬°Hola, mundo!" Aplicaci√≥n web Haskell (Spock)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449628/"><p> Estaba aburrido de escribir en Python, quer√≠a algo inusual.  Decid√≠ probar Haskell.  No s√© el idioma, pero no quer√≠a escribir programas de entrenamiento de consola, como el c√°lculo factorial.  Despu√©s de estudiar una gran cantidad de publicaciones sobre Haskell y su aplicaci√≥n en la vida real, me di cuenta de que uno de los puntos potenciales del crecimiento de la popularidad del lenguaje es escribir aplicaciones web.  Por extra√±o que parezca, hay bastantes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">marcos web</a> bajo Haskell.  Mi elecci√≥n recay√≥ en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Spock</a> , porque, a juzgar por la descripci√≥n, es un marco simple y r√°pido de desarrollar.  Tengo cierta experiencia escribiendo aplicaciones web en Flask, as√≠ que pens√© que ser√≠a interesante comparar enfoques tan diferentes para resolver problemas similares.  En el art√≠culo, intentar√© dar mi forma m√°s detallada de prueba y error en el estudio de Haskell usando el ejemplo de escribir la aplicaci√≥n web de Spock m√°s simple.  Quiz√°s esto sea √∫til para aquellos que dudan si intentar estudiar Haskell y si ser√° √∫til en la vida real. </p><a name="habracut"></a><br><h2 id="nemnogo-pro-haskell-i-kak-ego-gotovit">  Un poco sobre Haskell y c√≥mo cocinarlo </h2><br><p>  Lo primero que enfrenta todo desarrollador al aprender un nuevo idioma es elegir y configurar un entorno de desarrollo.  Por supuesto, puede escribir en un cuaderno, pero si tiene al menos algo de experiencia en el desarrollo de proyectos de producci√≥n, este m√©todo le causar√° dolor.  Por cierto, Haskell es un lenguaje bastante antiguo y com√∫n y tiene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">soporte</a> para los editores e ide m√°s famosos.  Mi amigo Haskellist usa emacs.  Estoy acostumbrado al IDE normal, as√≠ que instal√© el complemento para IntelliJ. </p><br><p>  Adem√°s, para el desarrollo, necesita <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">stack</a> , que ahora es el est√°ndar y combina un compilador, un sistema de administraci√≥n de paquetes, un sistema de compilaci√≥n y prueba. </p><br><p>  Todo parece bastante amigable, no hubo problemas con la instalaci√≥n.  Para el desarrollo, uso Mac OS, no lo he probado en otros sistemas, pero sospecho que en Linux todo comenzar√° sin problemas tampoco. </p><br><h2 id="hello-world">  Hola mundo </h2><br><h3 id="podgotovka">  Preparaci√≥n </h3><br><p> Vamos al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tutorial</a> e intentamos hacer todo de acuerdo con las instrucciones.  All√≠ sugieren crear primero un proyecto est√°ndar a trav√©s de stack: <code>stack new MyLovelyProlect</code> .  El proyecto est√°ndar es una carpeta con tres subcarpetas: <code>app</code> , <code>src</code> , <code>test</code> .  Parece bastante l√≥gico: una carpeta para la aplicaci√≥n principal, una para funciones auxiliares, la tercera para pruebas.  Como escribimos "¬°Hola, mundo!", No necesitamos las carpetas <code>src</code> y <code>test</code> , pero no necesitamos eliminarlas, porque de lo contrario tendremos que limpiar cuidadosamente otros archivos, por ejemplo, <code>HelloWorld.cabal</code> . </p><br><h3 id="sobstvenno-kod">  En realidad, el c√≥digo </h3><br><p>  M√°s adelante en el tutorial se propone copiar alg√∫n c√≥digo en <code>Main.hs</code>  Lo simplificaremos un poco m√°s para compararlo con lo que ofrece el matraz. </p><br><pre> <code class="haskell hljs"><span class="hljs-meta"><span class="hljs-meta">{-# LANGUAGE OverloadedStrings #-}</span></span> <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> Main <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Web.Spock <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Web.Spock.Config app :: SpockM () () () () app = get root $ text "Hello World!" main :: IO () main = do cfg &lt;- defaultSpockCfg () PCNoDatabase () let mw = spock cfg app runSpock 8080 mw</code> </pre> <br><p>  A modo de comparaci√≥n, dar√© el mismo c√≥digo en el matraz: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> flask <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Flask app = Flask(__name__) @app.route(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span> app.run()</code> </pre> <br><p>  Por el n√∫mero de l√≠neas, el matraz a√∫n gana: 8 contra 13. Pero teniendo en cuenta que Haskell es un lenguaje est√°ticamente tipado y 2 l√≠neas ocupan la determinaci√≥n del tipo, la diferencia, en mi opini√≥n, es peque√±a.  Al menos el c√≥digo anterior no me asust√≥ de seguir aprendiendo el idioma. </p><br><h3 id="sborka-i-zapusk">  Montaje y lanzamiento </h3><br><p>  A continuaci√≥n, vaya a <code>HelloWorld.cabal</code> y agregue el <code>executable HelloWorld-exe</code> a la secci√≥n <code>build-depends:</code> la <code>build-depends:</code> l√≠nea <code>Spock &gt;=0.13</code> .  En el tutorial en el sitio, se propone incluir 2 dependencias m√°s, pero para mi prop√≥sito a√∫n no son necesarias.  Si ahora intentamos compilar la aplicaci√≥n usando <code>stack build --fast --pedantic</code> , obtenemos el siguiente error: </p><br><pre> <code class="plaintext hljs">Error: While constructing the build plan, the following exceptions were encountered: In the dependencies for HelloWorld-0.1.0.0: Spock must match &gt;=0.13, but the stack configuration has no specified version (latest matching version is 0.13.0.0) needed since HelloWorld is a build target. Some different approaches to resolving this: * Consider trying 'stack solver', which uses the cabal-install solver to attempt to find some working build configuration. This can be convenient when dealing with many complicated constraint errors, but results may be unpredictable. * Recommended action: try adding the following to your extra-deps in /Users/dkvasov/Documents/Haskell/Spock/HelloWorld/stack.yaml: Spock-0.13.0.0@sha256:8115862eb4fb84a26fb7bcd34f30acf036bd2e7c4eaf813c185c5562d138bba2 Plan construction failed.</code> </pre> <br><p>  Est√° bastante claro: stack no sabe qu√© versi√≥n de Spock debe instalarse, por lo que debe escribirse en el archivo <code>stack.yaml</code> .  Agregue <code>extra-deps</code> e intente construir de nuevo.  All√≠ aparecer√°n otros errores similares, y como resultado, en el archivo <code>stack.yaml</code> , obtuve lo siguiente: </p><br><pre> <code class="plaintext hljs">extra-deps: - Spock-0.13.0.0 - Spock-core-0.13.0.0 - reroute-0.5.0.0 - stm-containers-0.2.16 - focus-0.1.5.2</code> </pre> <br><p>  Despu√©s de eso, todo se reuni√≥.  Los artefactos de mi colecci√≥n estaban en la <code>.stack-work/dist/x86_64-osx/Cabal-2.4.0.1/build</code> . </p><br><p>  Todo comenz√≥ con el comando <code>stack exec HelloWorld-exe</code> , y en <code>localhost:8080</code> Vi la bienvenida "Hello, world!".  No se necesitaba bailar con una pandereta. </p><br><h3 id="probuem-razobratsya-chto-voobsche-proishodit">  Estamos tratando de descubrir qu√© est√° pasando. </h3><br><p>  Hasta ahora, no hemos utilizado ning√∫n conocimiento espec√≠fico de programaci√≥n funcional (FP) y el lenguaje Haskell.  Utilizamos el sentido com√∫n y el conocimiento de los conceptos b√°sicos del desarrollo.  No puedes hacer eso m√°s all√°.  Para una mayor comprensi√≥n, necesitamos saber algunas cosas sobre la FA.  AF no es la ant√≠poda de OOP.  Aquellos familiarizados con el lenguaje Scala saben que ambos conceptos coexisten f√°cilmente.  La ant√≠poda de FP es una programaci√≥n imperativa.  Mientras que el modelo funcional de c√°lculos se basa en la composici√≥n de funciones, el modelo imperativo se basa en el proceso de cambios sucesivos en los estados del sistema.  De ello se deduce que en lenguajes puramente funcionales como Haskell, se supone que las funciones son "puras", es decir, no contienen un estado mutable y "efectos secundarios", adem√°s del valor de retorno.  Esto facilita la creaci√≥n de composiciones de caracter√≠sticas.  En realidad, el requisito de "pureza" impone muchas restricciones al uso de lenguajes funcionales en el mundo real.  Sin embargo, dado que hay aplicaciones de producci√≥n en Haskell, a√∫n puede utilizar de alguna manera funciones puras en el mundo real.  Echemos un vistazo m√°s de cerca a nuestro <code>Main.hs</code> </p><br><p>  Seg√∫n tengo entendido, la aplicaci√≥n de la <code>app</code> es una variable de tipo <code>SpockM</code> , que es una <em>m√≥nada</em> .  Lo m√°s probable es que si no est√° familiarizado con el estilo funcional de la programaci√≥n y la teor√≠a de categor√≠as, no entender√° la primera vez qu√© es y por qu√© lo necesita.  Sin embargo, es necesario tratar esto al menos en el nivel b√°sico, ya que las m√≥nadas son la base para la aplicaci√≥n del lenguaje Haskell.  Hay bastantes art√≠culos de diversos grados de detalle sobre este tema, incluido Habr√©.  Por supuesto, no los traer√© aqu√≠.  Hasta ahora, propongo considerar que las m√≥nadas son una magia que te permite producir los llamados efectos secundarios.  Hay otra m√≥nada en nuestra aplicaci√≥n: <code>IO</code> .  Su efecto secundario es la entrada / salida de datos. </p><br><p>  SpockM est√° parametrizado por otros cuatro tipos.  Corresponden a la conexi√≥n de la base de datos, sesi√≥n, estado y valor de retorno.  Para una aplicaci√≥n vac√≠a, no se necesita nada de esto, por lo que siempre usaremos el tipo <code>()</code> , que se llama Unidad.  Dentro de la <code>app</code> vinculamos caminos a las acciones.  En este caso, determinamos la ruta base <code>/</code> y la acci√≥n <code>   "Hello, world!  get-</code> . </p><br><p>  A continuaci√≥n, creamos una configuraci√≥n predeterminada y la asignamos a <code>cfg</code> .  Luego, usando la funci√≥n <code>spock</code> cree middleware para la aplicaci√≥n y cfg y transfi√©ralo a <code>runSpock</code> junto con el puerto de inicio deseado. </p><br><h3 id="zaklyuchenie">  Conclusi√≥n </h3><br><p>  Est√° claro que todo lo que se describe aqu√≠ es muy simple, y todos los que hablen ingl√©s y est√©n equipados con un cerebro podr√°n hacer lo mismo mirando el tutorial inicial de spock.  Este art√≠culo fue m√°s sobre c√≥mo me familiaric√© con el lenguaje Haskell.  Que sigue  Adem√°s, casi todos los recursos de aprendizaje sugieren usar el estado y escribir una aplicaci√≥n de tareas pendientes, luego conectar la base de datos y luego ... Quiz√°s en el futuro escriba una secuela. </p><br><h2 id="ssylki">  Referencias </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Su primera aplicaci√≥n web con Spock</a> es un video bastante detallado en ingl√©s con un an√°lisis de un Hello World similar. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/449628/">https://habr.com/ru/post/449628/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449616/index.html">Entrevista de Fibonacci</a></li>
<li><a href="../449618/index.html">El futuro esta en las nubes</a></li>
<li><a href="../449622/index.html">Personal√≠zalo: personaliza tus tel√©fonos Snom</a></li>
<li><a href="../449624/index.html">C√≥mo y por qu√© leer hojas de datos, si los microcontroladores son su pasatiempo</a></li>
<li><a href="../449626/index.html">Alisado cognitivo: una sesi√≥n de ilusi√≥n de exposici√≥n completa</a></li>
<li><a href="../449630/index.html">"Sugirieron familiarizarse con los c√°lculos de un indicador, y hay dos hojas con integrales y segundas derivadas"</a></li>
<li><a href="../449632/index.html">AMA con Habr. V.8.0. Incorporaci√≥n, noticias para todos, PWA</a></li>
<li><a href="../449634/index.html">Amo el IoT</a></li>
<li><a href="../449636/index.html">C√≥mo evitar la picadura de un insecto besador</a></li>
<li><a href="../449640/index.html">Dise√±o de videojuegos: debes entender que heredas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>