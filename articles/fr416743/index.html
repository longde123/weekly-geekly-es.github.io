<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéóÔ∏è üõÄüèª üå•Ô∏è Bot pour Starcraft dans Rust, C et toute autre langue üë©üèæ‚Äçüîß ‚è¨ üèáüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="StarCraft: Brood War . Combien cela signifie pour moi. Et pour beaucoup d'entre vous. Tellement que je doutais de donner un lien vers le wiki. 


 Une...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bot pour Starcraft dans Rust, C et toute autre langue</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416743/"><p><img src="https://habrastorage.org/webt/qv/fa/ex/qvfaexsnkzmckmwrt_spqmc7nr4.png" align="left">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">StarCraft: Brood War</a> .  Combien cela signifie pour moi.  Et pour beaucoup d'entre vous.  Tellement que je doutais de donner un lien vers le wiki. </p><br><p>  Une fois, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Halt</a> m'a frapp√© dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">e</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">mail</a> personnel et m'a propos√© d'apprendre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rust</a> .  Comme toute personne normale, nous avons d√©cid√© de commencer par <del>  bonjour le monde </del>  √©crire une biblioth√®que dynamique pour Windows qui pourrait se charger dans l'espace d'adressage d'un jeu StarCraft et g√©rer les unit√©s. </p><br><p> L'article d√©crira le processus de recherche de solutions, en utilisant des technologies, des techniques qui vous permettront d'apprendre de nouvelles choses dans le langage Rust et son √©cosyst√®me ou d'√™tre inspir√© pour impl√©menter un bot dans votre langage pr√©f√©r√©, que ce soit C, C ++, ruby, python, etc. </p><a name="habracut"></a><br><p>  Cet article m√©rite certainement d'√™tre lu sous l'hymne de la Cor√©e du Sud: </p><br><div class="spoiler">  <b class="spoiler_title">Starcraft OST</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/pNt0iVG2VOA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><br><h2 id="bwapi">  Bwapi </h2><br><p>  Ce jeu a d√©j√† 20 ans.  Et il est toujours <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">populaire</a> , les championnats rassemblent des salles enti√®res de personnes aux √âtats-Unis, m√™me <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">en 2017</a> , o√π la bataille des grands ma√Ætres Jaedong vs Bisu a eu lieu.  En plus des joueurs en direct, les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voitures sans √¢me</a> participent √©galement aux batailles!  Et cela est possible gr√¢ce √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BWAPI</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Liens</a> plus utiles. </p><br><p>  Depuis plus d'une d√©cennie, il existe une communaut√© de d√©veloppeurs de bots autour de ce jeu.  Les amateurs √©crivent des bots et participent √† divers championnats.  Beaucoup d'entre eux √©tudient l'IA et l'apprentissage automatique.  BWAPI est utilis√© par les universit√©s pour √©duquer leurs √©tudiants.  Il existe m√™me une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cha√Æne Twitch</a> qui diffuse des jeux. </p><br><p>  Il y a quelques ann√©es, une √©quipe de fans a invers√© les internes de Starcraft et a √©crit une API C ++ qui vous permet d'√©crire des bots, de vous int√©grer au processus de jeu et de dominer les petites personnes path√©tiques. </p><br><p>  Comme cela arrive souvent avant <del>  pour construire une maison, il faut se procurer du minerai, forger des outils ... </del>  √©crire un bot, vous devez impl√©menter l'API.  Qu'est-ce que Rust peut offrir? </p><br><h2 id="ffi">  Ffi </h2><br><p>  L'interaction avec d'autres langues de Rust est assez simple.  Il y a <abbr title="Interface de fonction √©trang√®re">FFI</abbr> pour cela.  Permettez-moi de vous fournir un bref extrait de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . </p><br><p>  Supposons que nous ayons une biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">snappy</a> qui a un fichier d'en <a href="">-</a> t√™te <a href="">snappy-ch √†</a> partir duquel nous copierons les d√©clarations de fonction. </p><br><p>  Cr√©ez un projet en utilisant le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fret</a> . </p><br><pre><code class="bash hljs">$ cargo new --bin snappy Created binary (application) `snappy` project $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> snappy snappy$ tree . ‚îú‚îÄ‚îÄ Cargo.toml ‚îî‚îÄ‚îÄ src ‚îî‚îÄ‚îÄ main.rs 1 directory, 2 files</code> </pre> <br><p>  Cargo a cr√©√© une structure de fichiers standard pour le projet. </p><br><p>  Dans <code>Cargo.toml</code> sp√©cifiez la d√©pendance √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">libc</a> : </p><br><pre> <code class="hljs powershell">[<span class="hljs-type"><span class="hljs-type">dependencies</span></span>] libc = <span class="hljs-string"><span class="hljs-string">"0.2"</span></span></code> </pre> <br><p>  <code>src/main.rs</code> fichier <code>src/main.rs</code> ressemblera √† ceci: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">crate</span></span> libc; <span class="hljs-comment"><span class="hljs-comment">//   C ,     size_t use libc::size_t; #[link(name = "snappy")] //       extern { //    ,    //  C  : // size_t snappy_max_compressed_length(size_t source_length); fn snappy_max_compressed_length(source_length: size_t) -&gt; size_t; } fn main() { let x = unsafe { snappy_max_compressed_length(100) }; println!("max compressed length of a 100 byte buffer: {}", x); }</span></span></code> </pre> <br><p>  Nous collectons et g√©rons: </p><br><pre> <code class="bash hljs">snappy$ cargo build ... snappy$ cargo run Finished dev [unoptimized + debuginfo] target(s) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 0.02s Running `target/debug/snappy` max compressed length of a 100 byte buffer: 148</code> </pre> <br><p>  Vous ne pouvez appeler que <code>cargo run</code> , qui avant le lancement appelle <code>cargo build</code> .  Ou cr√©ez un projet et appelez directement le binaire: </p><br><pre> <code class="bash hljs">snappy$ ./target/debug/snappy max compressed length of a 100 byte buffer: 148</code> </pre> <br><p>  Le code se compile √† condition que la biblioth√®que snappy soit install√©e (pour Ubuntu, le paquet libsnappy-dev doit √™tre install√©). </p><br><pre> <code class="bash hljs">snappy$ ldd target/debug/snappy ... libsnappy.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libsnappy.so.1 (0x00007f8de07cf000)</code> </pre> <br><p>  Comme vous pouvez le voir, notre binaire est li√© √† la biblioth√®que partag√©e libsnappy.  Et l'appel <code>snappy_max_compressed_length</code> est un appel de fonction de cette biblioth√®que. </p><br><h2 id="rust-bindgen">  rouille-bindgen </h2><br><p>  Ce serait bien si nous pouvions g√©n√©rer automatiquement des FFI.  Heureusement, il existe un tel utilitaire dans l'arsenal de rastomanov appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rust-bindgen</a> .  Elle est capable de g√©n√©rer des liaisons FFI vers des biblioth√®ques C (et certaines C ++). </p><br><p>  Installation: </p><br><pre> <code class="bash hljs">$ cargo install bindgen</code> </pre> <br><p>  √Ä quoi ressemble l'utilisation de <strong>rust-bindgen</strong> ?  Nous prenons les fichiers d'en-t√™te C / C ++, d√©finissons l'utilitaire <strong>bindgen</strong> sur eux et nous obtenons le code Rust g√©n√©r√© avec les d√©finitions des structures et des fonctions de la structure.  Voici √† quoi ressemble la g√©n√©ration FFI pour Snappy: </p><br><pre> <code class="rust hljs">$ bindgen /usr/include/snappy-ch | grep -C <span class="hljs-number"><span class="hljs-number">1</span></span> snappy_max_compressed_length <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">snappy_max_compressed_length</span></span></span></span>(source_length: <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>; }</code> </pre> <br><p>  Il s'est av√©r√© que bindgen passe devant les en-t√™tes BWAPI, g√©n√©rant des tonnes de feuilles de code non utilisables (en raison des fonctions membres virtuelles, std :: string dans l'API publique, etc.).  Le fait est que BWAPI est √©crit en C ++.  C ++ est g√©n√©ralement difficile √† utiliser m√™me √† partir de projets C ++.  Une fois qu'une biblioth√®que compil√©e est pr√©f√©rable de lier avec le m√™me √©diteur de liens (versions identiques), les fichiers d'en-t√™te sont mieux analys√©s avec le m√™me compilateur (versions identiques).  Parce que de nombreux facteurs peuvent affecter le r√©sultat.  Par exemple, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mangling</a> , que GNU GCC ne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">peut</a> toujours <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas impl√©menter sans erreurs</a> .  Ces facteurs sont si importants qu'ils ne pouvaient pas √™tre surmont√©s m√™me dans <abbr title="Cadre de test C ++ de Google">gtest</abbr> , et la documentation <a href="">indiquait</a> qu'il serait pr√©f√©rable pour vous de construire gtest dans le cadre du projet avec le m√™me compilateur et le m√™me √©diteur de liens. </p><br><h2 id="bwapi-c">  Bwapi-c </h2><br><p>  C est une programmation en lingua franca.  Si rust-bindgen fonctionne bien pour le langage C, pourquoi ne pas impl√©menter le BWAPI pour C puis utiliser son API?  Bonne id√©e! </p><br><p>  Oui, c'est une bonne id√©e jusqu'√† ce que vous examiniez les tripes de BWAPI et que vous voyiez le nombre de classes et de m√©thodes que vous devez impl√©menter = (en particulier toutes ces dispositions de structures en m√©moire, assembleurs, correctifs de m√©moire et autres horreurs pour lesquelles nous n'avons pas le temps. Il est n√©cessaire d'utiliser au maximum la solution existante. </p><br><p>  Mais nous devons en quelque sorte g√©rer le mangling, le code C ++, l'h√©ritage et les fonctions membres virtuelles. </p><br><p>  En C ++, il existe deux outils puissants que nous utiliserons pour r√©soudre notre probl√®me, ce sont les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pointeurs opaques</a> et les <code>extern "C"</code> . </p><br><p>  <code>extern "C" {}</code> permet au code C ++ de se d√©guiser en C. Cela vous permet de g√©n√©rer des noms de fonction purs sans alt√©ration. </p><br><p>  Les pointeurs opaques nous permettent d'effacer un type et de cr√©er un pointeur vers "un certain type" dont nous ne fournissons pas l'impl√©mentation.  Comme il ne s'agit que d'une d√©claration d'un certain type, et non de son impl√©mentation, il est impossible d'utiliser ce type par valeur, il ne peut √™tre utilis√© que par pointeur. </p><br><p>  Disons que nous avons un tel code C ++: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> cpp { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bar; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;bar; } }; } <span class="hljs-comment"><span class="hljs-comment">// namespace cpp</span></span></code> </pre> <br><p>  Nous pouvons le transformer en un en-t√™te C comme ceci: </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo_</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">//    Foo //  cpp::Foo::get_bar int Foo_get_bar(Foo* self); }</span></span></code> </pre> <br><p>  Et la partie C ++, qui sera le lien entre l'en-t√™te C et l'impl√©mentation C ++: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Foo_get_bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Foo* self)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      cpp::Foo    ::get_bar return reinterpret_cast&lt;cpp::Foo*&gt;(self)-&gt;get_bar(); }</span></span></code> </pre> <br><p>  Toutes les m√©thodes de classe ne devaient pas √™tre g√©r√©es de cette fa√ßon.  Il existe des classes dans BWAPI, op√©rations sur lesquelles vous pouvez vous impl√©menter en utilisant les valeurs de champ de ces structures, par exemple <code>typedef struct Position { int x; int y; } Position;</code> <code>typedef struct Position { int x; int y; } Position;</code>  et des m√©thodes comme <code>Position::get_distance</code> . </p><br><p>  Il y avait ceux qui devaient √™tre jug√©s d'une mani√®re sp√©ciale.  Par exemple, un AIModule doit √™tre un pointeur vers une classe C ++ avec un ensemble sp√©cifique de fonctions membres virtuelles.  Cependant, voici le <a href="">titre</a> et l' <a href="">impl√©mentation</a> . </p><br><p>  Ainsi, apr√®s plusieurs mois de dur labeur, <strong>554</strong> m√©thodes et une douzaine de classes, la biblioth√®que multiplateforme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BWAPI-C</a> est n√©e, qui vous permet <a href="">d'√©crire des bots en C.</a>  Le sous-produit √©tait une compilation crois√©e et la possibilit√© d'impl√©menter l'API dans n'importe quel autre langage prenant en charge FFI et la convention d'appel cdecl. </p><br><p>  Si vous √©crivez une biblioth√®que, veuillez √©crire l'API C. </p><br><p>  La caract√©ristique la plus importante de BWAPI-C est la plus large capacit√© d'int√©gration avec d'autres langues.  <code>Python</code> , <code>Ruby</code> , <code>Rust</code> , <code>PHP</code> , <code>Java</code> et bien d'autres savent travailler avec C, donc vous pouvez √©galement √©crire un bot dessus, si vous travaillez un peu avec un fichier et impl√©mentez vos wrappers. </p><br><h2 id="pishem-bota-na-c">  √âcrire un bot en C </h2><br><p>  Cette partie d√©crit les principes g√©n√©raux de la conception des modules Starcraft. </p><br><p>  Il existe 2 types de bots: module et client.  Nous allons voir un exemple d'√©criture d'un module. </p><br><p>  Un module est une biblioth√®que t√©l√©chargeable, le principe g√©n√©ral du chargement peut √™tre vu <a href="">ici</a> .  Le module devrait exporter 2 fonctions: <code>newAIModule</code> et <code>gameInit</code> . </p><br><p>  Avec <code>gameInit</code> tout est simple, cette fonction est appel√©e pour passer un pointeur sur le jeu en cours.  Ce pointeur est tr√®s important, car dans la nature de BWAPI vit une variable statique globale qui est utilis√©e dans certaines parties du code.  <code>gameInit</code> : </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">DLLEXPORT </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gameInit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* game</span></span></span><span class="hljs-function">)</span></span> { BWAPIC_setGame(game); }</code> </pre> <br><p>  <code>newAIModule</code> peu plus compliqu√©.  Il doit renvoyer un pointeur vers une classe C ++ qui a une table de m√©thode virtuelle avec les noms <strong>onXXXXX</strong> qui sont appel√©s sur certains √©v√©nements de jeu.  D√©finissez la structure du module: </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExampleAIModule</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AIModule_vtable* vtable_; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* name; } ExampleAIModule;</code> </pre> <br><p>  Le premier champ doit √™tre un pointeur vers un tableau de m√©thodes (magie, tout).  Ainsi, la fonction <code>newAIModule</code> : </p><br><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-function">DLLEXPORT </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newAIModule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ExampleAIModule* <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> = (ExampleAIModule*) <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(ExampleAIModule) ); <span class="hljs-keyword"><span class="hljs-keyword">module</span></span>-&gt;name = <span class="hljs-string"><span class="hljs-string">"ExampleAIModule"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">module</span></span>-&gt;vtable_ = &amp;module_vtable; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> createAIModuleWrapper( (AIModule*) <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> ); }</code> </pre> <br><p>  <code>createAIModuleWrapper</code> est une autre magie qui transforme un pointeur C en pointeur vers une classe C ++ avec virtual <del>  les m√©thodes </del>  fonctions des membres. </p><br><p>  <code>module_vtable</code> est une variable statique sur la table des m√©thodes, les valeurs des m√©thodes sont remplies de pointeurs vers des fonctions globales: </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> AIModule_vtable module_vtable = { onStart, onEnd, onFrame, onSendText, onReceiveText, onPlayerLeft, onNukeDetect, onUnitDiscover, onUnitEvade, onUnitShow, onUnitHide, onUnitCreate, onUnitDestroy, onUnitMorph, onUnitRenegade, onSaveGame, onUnitComplete }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onEnd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> isWinner)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onFrame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSendText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* text)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceiveText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Player* player, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* text)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPlayerLeft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Player* player)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNukeDetect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Position target)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitDiscover</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitEvade</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitShow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitHide</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitDestroy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitMorph</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitRenegade</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSaveGame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* gameName)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{}</code> </pre> <br><p>  Par le nom des fonctions et leurs signatures, il est clair dans quelles conditions et avec quels arguments elles sont appel√©es.  Par exemple, j'ai rendu toutes les fonctions vides sauf </p><br><pre> <code class="hljs java"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ ExampleAIModule* self = (ExampleAIModule*) <span class="hljs-keyword"><span class="hljs-keyword">module</span></span>; Game* game = BWAPIC_getGame(); Game_sendText(game, <span class="hljs-string"><span class="hljs-string">"Hello from bwapi-c!"</span></span>); Game_sendText(game, <span class="hljs-string"><span class="hljs-string">"My name is %s"</span></span>, self-&gt;name); }</code> </pre> <br><p>  Cette fonction est appel√©e au d√©marrage du jeu.  Un pointeur vers le module actuel est pass√© en argument.  <code>BWAPIC_getGame</code> renvoie un pointeur global sur le jeu que nous avons d√©fini en appelant <code>BWAPIC_setGame</code> .  Nous allons donc montrer un exemple de compilation crois√©e et de fonctionnement de module: </p><br><pre> <code class="bash hljs">bwapi-c/example$ tree . ‚îú‚îÄ‚îÄ BWAPIC.dll ‚îî‚îÄ‚îÄ Dll.c 0 directories, 2 files bwapi-c/example$ i686-w64-mingw32-gcc -mabi=ms -shared -o Dll.dll Dll.c -I../include -L. -lBWAPIC bwapi-c/example$ cp Dll.dll ~/Starcraft/bwapi-data/ bwapi-c/example$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/Starcraft/bwapi-data/ Starcraft$ wine bwheadless.exe -e StarCraft.exe -l bwapi-data/BWAPI.dll --headful ... ... ...</code> </pre> <br><p>  Nous poussons des boutons et commen√ßons le jeu.  Vous pouvez en savoir plus sur le lancement sur le site Web de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BWAPI</a> et dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BWAPI-C</a> . </p><br><p>  Le r√©sultat du module: </p><br><p><img src="https://habrastorage.org/webt/cw/a-/41/cwa-41ihsyva-pj2stpef1xjn2g.png" alt="image"></p><br><p>  Un exemple un peu plus complexe d'un module qui montre le travail avec les it√©rateurs, le contr√¥le d'unit√©, la recherche de min√©raux et les statistiques se trouve dans <a href="">bwapi-c / example / Dll.c.</a> </p><br><h2 id="bwapi-sys">  bwapi-sys </h2><br><p>  Dans l'√©cosyst√®me Rasta, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">il est habituel</a> d'appeler les packages d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une</a> certaine mani√®re qui sont li√©s aux biblioth√®ques natives.  Tout paquet foo-sys a deux fonctions importantes: </p><br><ul><li>  Lien vers la biblioth√®que libfoo native </li><li>  Fournit des d√©clarations de fonction √† partir de la biblioth√®que libfoo.  Mais seules les d√©clarations, les abstractions de haut niveau dans les caisses * -sys ne sont pas fournies. </li></ul><br><p>  Pour que le package * -sys puisse r√©ussir la liaison, ils y int√®grent une <a href="">recherche de</a> biblioth√®que native et / ou un <a href="">assemblage</a> de biblioth√®que √† partir des sources. </p><br><p>  Pour que le package * -sys fournisse des d√©clarations, il faut soit les √©crire √† la main, soit les g√©n√©rer √† l'aide de bindgen.  Encore une fois bindgen.  Tentative num√©ro deux =) </p><br><p>  La g√©n√©ration de liants avec bwapi-c devient obsc√®ne: </p><br><pre> <code class="bash hljs">bindgen BWAPI.h -o lib.rs \ --opaque-type <span class="hljs-string"><span class="hljs-string">".+_"</span></span> \ --blacklist-type <span class="hljs-string"><span class="hljs-string">"std.*|__.+|.+_$|Game_v(Send|Print|Draw).*|va_list|.+_t$"</span></span> \ --no-layout-tests \ --no-derive-debug \ --raw-line <span class="hljs-string"><span class="hljs-string">"#![allow(improper_ctypes, non_snake_case)]"</span></span> \ -- -I../submodules/bwapi-c/include sed -i -r -- <span class="hljs-string"><span class="hljs-string">'s/.+\s+(.+)_;/pub struct \1;/'</span></span> lib.rs</code> </pre> <br><p>  O√π <code>BWAPI.h</code> est le fichier avec les inclusions de tous les en-t√™tes d'en-t√™te de BWAPI-C. </p><br><p>  Par exemple, pour des fonctions d√©j√† connues, bindgen a g√©n√©r√© les d√©clarations suivantes: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> { <span class="hljs-comment"><span class="hljs-comment">/// BWAPIC_setGame must be called from gameInit to initialize BWAPI::BroodwarPtr pub fn BWAPIC_setGame(game: *mut Game); } extern "C" { pub fn BWAPIC_getGame() -&gt; *mut Game; }</span></span></code> </pre> <br><p>  Il existe 2 strat√©gies: stocker le code g√©n√©r√© dans le r√©f√©rentiel et g√©n√©rer du code √† la vol√©e lors de l'assemblage.  Ces deux approches ont leurs avantages et leurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">inconv√©nients</a> . </p><br><p>  Bienvenue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bwapi-sys</a> , un autre petit pas vers notre objectif. </p><br><p>  Rappelez-vous, j'ai parl√© de multiplateforme?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Nlinker a</a> rejoint le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">projet</a> et a mis en ≈ìuvre une strat√©gie d√©licate.  Si la cible est Windows, t√©l√©chargez le BWAPIC d√©j√† assembl√© depuis le github.  Et pour les cibles restantes, nous collectons BWAPI-C √† partir des sources d'OpenBW (je vous le dirai un peu plus tard). </p><br><h2 id="bwapi-rs">  bwapi-rs </h2><br><p>  Maintenant que nous avons les liants, nous pouvons d√©crire des abstractions de haut niveau.  Nous avons 2 types avec lesquels travailler: des valeurs pures et des pointeurs opaques. </p><br><p>  Avec des valeurs pures, tout est plus simple.  Prenons l'exemple de la couleur.  Nous devons faciliter l'utilisation du code Rust afin de pouvoir utiliser les couleurs de mani√®re pratique et naturelle: </p><br><pre> <code class="rust hljs">game.draw_line(CoordinateType::Screen, (<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>), (<span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>), Color::Red); ^^^</code> </pre> <br><p>  Donc, pour une utilisation pratique, il sera n√©cessaire de d√©finir un idiomatique pour l'√©num√©ration du langage Rust avec des <a href="">constantes</a> de C ++ et de d√©finir des m√©thodes de conversion dans bwapi_sys :: Color en utilisant le trait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">std :: convert :: From</a> : </p><br><pre> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// FFI version #[repr(C)] #[derive(Copy, Clone)] pub struct Color { pub color: ::std::os::raw::c_int, } // Idiomatic version #[derive(PartialEq, PartialOrd, Copy, Clone)] pub enum Color { Black = 0, Brown = 19, ...</span></span></code> </pre> <br><p>  Bien que pour plus de commodit√©, vous pouvez utiliser la caisse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">enum-primitive-derive</a> . </p><br><p>  Avec des pointeurs opaques, ce n'est pas plus difficile.  Pour ce faire, utilisez le mod√®le <a href="">Newtype</a> : </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Player</span></span></span></span>(*<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> sys::Player);</code> </pre> <br><p>  Autrement dit, Player est une certaine structure avec un champ priv√© - un pointeur opaque brut de C. Et voici comment vous pouvez d√©crire la m√©thode Player :: color: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Player { <span class="hljs-comment"><span class="hljs-comment">//    Player::getColor  bwapi-sys //extern "C" { // pub fn Player_getColor(self_: *mut Player) -&gt; Color; //} pub fn color(&amp;self) -&gt; Color { // bwapi_sys::Player_getColor -    BWAPI-C // self.0 -   let color = unsafe { bwapi_sys::Player_getColor(self.0) }; color.into() //  bwapi_sys::Color -&gt; Color } }</span></span></code> </pre> <br><p>  Nous pouvons maintenant √©crire notre premier bot en rouille! </p><br><h2 id="pishem-bota-na-rust">  √âcrire un bot en rouille </h2><br><p>  Comme preuve de concept, le bot ressemblera √† un pays c√©l√®bre: toutes ses fonctionnalit√©s seront d'embaucher des travailleurs et de collecter des min√©raux. </p><br><p><img src="https://habrastorage.org/webt/hx/r_/jm/hxr_jmj2fbsitx-tfw96p2pa2tu.png" alt="Cor√©e du Nord"></p><br><p><img src="https://habrastorage.org/webt/ww/gf/lr/wwgflrekcnxtv75thaurrwcm0g8.png" alt="Cor√©e du sud"></p><br><p>  Commen√ßons par les <code>newAIModule</code> <code>gameInit</code> et <code>newAIModule</code> : </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[no_mangle]</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gameInit</span></span></span></span>(game: *<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> void) { bwapi_sys::BWAPIC_setGame(game <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> bwapi_sys::Game); } <span class="hljs-meta"><span class="hljs-meta">#[no_mangle]</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newAIModule</span></span></span></span>() -&gt; *<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> void { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> module = ExampleAIModule { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>::from(<span class="hljs-string"><span class="hljs-string">"ExampleAIModule"</span></span>) }; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> result = wrap_handler(<span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>::new(module)); result }</code> </pre> <br><p>  <code>#[no_mangle]</code> remplit la m√™me fonction que l' <code>extern "C"</code> en C ++.  Dans <code>wrap_handler</code> , toutes sortes de magie se produisent avec la substitution de la table de fonction virtuelle et se d√©guisent en classe C ++. </p><br><p>  La description de la structure du module est encore plus simple et plus belle qu'en C: </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExampleAIModule</span></span></span></span> { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, }</code> </pre> <br><p>  Ajoutez quelques m√©thodes pour rendre les statistiques et donner des ordres: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> ExampleAIModule { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw_stat</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> game = Game::get(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> message = <span class="hljs-built_in"><span class="hljs-built_in">format!</span></span>(<span class="hljs-string"><span class="hljs-string">"Frame {}"</span></span>, game.frame_count()); game.draw_text(CoordinateType::Screen, (<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>), &amp;message); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">give_orders</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> player = Game::get().self_player(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> unit <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> player.units() { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> unit.get_type() { UnitType::Terran_SCV | UnitType::Zerg_Drone | UnitType::Protoss_Probe =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> !unit.is_idle() { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> unit.is_carrying_gas() || unit.is_carrying_minerals() { unit.return_cargo(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(mineral) = Game::get() .minerals() .min_by_key(|m| unit.distance_to(m)) { <span class="hljs-comment"><span class="hljs-comment">// WE REQUIRE MORE MINERALS unit.right_click(&amp;mineral, false); } } UnitType::Terran_Command_Center =&gt; { unit.train(UnitType::Terran_SCV); } UnitType::Protoss_Nexus =&gt; { unit.train(UnitType::Protoss_Probe); } UnitType::Zerg_Hatchery | UnitType::Zerg_Lair | UnitType::Zerg_Hive =&gt; { unit.train(UnitType::Zerg_Drone); } _ =&gt; {} }; } } }</span></span></code> </pre> <br><p>  Pour que le type ExampleAIModule devienne un v√©ritable module, vous devez lui apprendre √† r√©pondre aux √©v√©nements <strong>onXXXX</strong> , pour lesquels vous devez impl√©menter le type EventHandler, qui est un analogue de la table virtuelle AIModule_vtable de C: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> EventHandler <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ExampleAIModule { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_start</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { Game::get().send_text(&amp;<span class="hljs-built_in"><span class="hljs-built_in">format!</span></span>(<span class="hljs-string"><span class="hljs-string">"Hello from Rust! My name is {}"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.name)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_end</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _is_winner: <span class="hljs-built_in"><span class="hljs-built_in">bool</span></span>) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_frame</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.draw_stat(); <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.give_orders(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_send_text</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _text: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_receive_text</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _player: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Player, _text: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_player_left</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _player: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Player) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_nuke_detect</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _target: Position) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_discover</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_evade</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_show</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_hide</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_create</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_destroy</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_morph</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_renegade</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_save_game</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _game_name: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_complete</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} }</code> </pre> <br><p>  Construire et d√©marrer le module est aussi simple que pour C: </p><br><pre> <code class="bash hljs">bwapi-rs$ cargo build --example dll --target=i686-pc-windows-gnu bwapi-rs$ cp ./target/i686-pc-windows-gnu/debug/examples/dll.dll ~/Starcraft/bwapi-data/Dll.dll bwapi-rs$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/Starcraft/bwapi-data/ Starcraft$ wine bwheadless.exe -e StarCraft.exe -l bwapi-data/BWAPI.dll --headful ... ... ...</code> </pre> <br><p>  Et la vid√©o de travail: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/rACbnWpI01M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 id="nemnogo-o-krosskompilyacii">  Un peu sur la compilation crois√©e </h2><br><p>  Bref, Rust est magnifique!  En deux clics, vous pouvez mettre en place de nombreuses cha√Ænes d'outils pour diff√©rentes plateformes.  Plus pr√©cis√©ment, la cha√Æne d'outils i686-pc-windows-gnu est d√©finie par la commande: </p><br><pre> <code class="bash hljs">rustup target add i686-pc-windows-gnu</code> </pre> <br><p>  Vous pouvez √©galement sp√©cifier le kofig pour la cargaison √† la racine du projet <code>.cargo/config</code> : </p><br><pre> <code class="hljs powershell">[<span class="hljs-type"><span class="hljs-type">target.i686</span></span>-<span class="hljs-type"><span class="hljs-type">pc</span></span>-<span class="hljs-type"><span class="hljs-type">windows</span></span>-<span class="hljs-type"><span class="hljs-type">gnu</span></span>] linker = <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32-gcc"</span></span> ar = <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32-ar"</span></span> runner = <span class="hljs-string"><span class="hljs-string">"wine"</span></span></code> </pre> <br><p>  Et c'est tout ce que vous devez faire pour compiler votre projet Rust √† partir de Linux sur Windows. </p><br><h2 id="openbw">  Openbw </h2><br><p>  Ces gars sont all√©s encore plus loin.  Ils ont d√©cid√© d'√©crire une version open-source du jeu SC: BW!  Et ils s'en sortent plut√¥t bien.  L'un de leurs objectifs √©tait d'impl√©menter des images HD, mais SC: Remastered les a devanc√©s = (Pour le moment, vous pouvez utiliser leur API pour √©crire des bots (oui, √©galement en C ++). Mais la fonctionnalit√© la plus √©tonnante est la possibilit√© d'afficher les rediffusions <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">directement dans le navigateur</a> . </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Un probl√®me non r√©solu est rest√© pendant la mise en ≈ìuvre: nous ne contr√¥lons pas l'unicit√© des liens, et l'existence simultan√©e de <code>&amp;mut</code> et <code>&amp;</code> lorsque vous changez un objet entra√Ænera un comportement ind√©fini.  Trouble.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Halt a</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">essay√© de</a> mettre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">en</a> ≈ìuvre des liaisons idiomatiques, mais son fusible s'est l√©g√®rement estomp√©.  De plus, pour r√©soudre ce probl√®me, vous devrez pelleter qualitativement l'API C ++ et d√©finir correctement les qualificateurs <code>const</code> . </p><br><p>  J'ai vraiment aim√© travailler sur ce projet, j'ai regard√© les rediffusions et plong√© profond√©ment dans l'atmosph√®re.  Ce jeu a laiss√© un h√©ritage √† ÎØøÏñ¥ ÎØøÏñ¥ ÏïäÏùÑ Ï†ïÎèÑ Ïù∏.  Aucun jeu n'est populaire aupr√®s de SC: BW, et son impact sur ÎåÄÌïúÎØºÍµ≠ Ï†ïÏπò ÏóêÍ≤å √©tait impensable.  Les pro-gamers en Cor√©e ÏïÑÎßàÎèÑ sont aussi populaires que dram Ï£ºÏó∞ Î∞∞Ïö∞ Îì§ les drames cor√©ens diffus√©s aux heures de grande √©coute.  ÎòêÌïú, ÌïúÍµ≠ ÏóêÏÑú ÌîÑÎ°ú Í≤åÏù¥Î®∏ ÎùºÎ©¥ Íµ∞ÎåÄ Ïùò ÌäπÎ≥ÑÌïú Ïú°Íµ∞ Ïóê ÏûÖÎåÄ Ìï† Ïàò ÏûàÎã§. </p><br><p>  Vive StarCraft! </p><br><h2 id="ssylki">  Les r√©f√©rences </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gitter</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bwapi-rs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bwapi-sys</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bwapi-c</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bwapi</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">openbw</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416743/">https://habr.com/ru/post/fr416743/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416729/index.html">Le programme PYCON RUSSIA est pr√™t: 25 rapports et 3 ateliers de conf√©renciers de Google, Red Hat, Yelp, Yandex</a></li>
<li><a href="../fr416731/index.html">Frost on glass: comment fabriquer du plastique metglass robuste</a></li>
<li><a href="../fr416737/index.html">Un * algorithme de recherche de chemin dans un jeu Voxel 3d Unity</a></li>
<li><a href="../fr416739/index.html">Nouvel ASUS au Computex 2018</a></li>
<li><a href="../fr416741/index.html">Les attaquants ont utilis√© des certificats D-Link vol√©s dans leur logiciel de vol de mot de passe</a></li>
<li><a href="../fr416745/index.html">Nouveau ASUS ROG au Computex 2018</a></li>
<li><a href="../fr416751/index.html">Collecte d'informations contextuelles pour la journalisation</a></li>
<li><a href="../fr416753/index.html">Plugin VPN Hola populaire compromis</a></li>
<li><a href="../fr416755/index.html">Extreme Likes - Comit√© d'enqu√™te contre</a></li>
<li><a href="../fr416757/index.html">Tests feuillet√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>