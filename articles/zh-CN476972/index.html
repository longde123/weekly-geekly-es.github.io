<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌊 🏦 🌞 Deno：Node.JS时间用完了吗？ ⛽️ 🙇🏽 👩🏾‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="自Deno内部发布以来已经过去了18个月，发布了预览版本，在Habré上发表了几篇文章，Ryan参加了会议并谈论了他。 但是，我从未在任何地方看到过对该项目的深入分析-由于某些原因，每个人都只能翻译文档... 


好吧，让我们现在尝试做。 在过去的五年中，我一直在Node.JS上进行写作，而我现在...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Deno：Node.JS时间用完了吗？</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476972/"><p><img src="https://habrastorage.org/webt/ph/0g/t5/ph0gt5rsvagsf2ysoqple3gg7oo.png"></p><br><p> 自Deno内部发布以来已经过去了18个月，发布了预览版本，在Habré上发表了几篇文章，Ryan参加了会议并谈论了他。 但是，我从未在任何地方看到过对该项目的深入分析-由于某些原因，每个人都只能翻译文档... </p><br><p>好吧，让我们现在尝试做。 在过去的五年中，我一直在Node.JS上进行写作，而我现在正在工作的OneTwoTrip公司已经在节点上编写了大约9年的项目（是的，我<a href="https://habr.com/ru/post/459206/">在节点上的整体中</a>写了大约<a href="https://habr.com/ru/post/459206/">9年</a>的故事）。 因此分析应该很好。 此外，我已经在<a href="https://axept.timepad.ru/event/1110942/">Moscow Node.JS Meetup 10上</a>告诉过他，这很有趣。 顺便说一句，如果您更方便听而不是阅读，那么您<a href="https://youtu.be/4414kjKYekM">可以在这里</a>收听和观看。 我的第二个讲话，我是穿着粉红色衬衫的家伙。 </p><a name="habracut"></a><br><p> 奇怪的是，为了了解项目的来源和原因，有必要落入过去。 因此，我们投入了一些p，举起了delorean的大门，然后踏上了征途-回顾使Node.JS成为现在的样子的重要十年。 </p><br><p><img src="https://habrastorage.org/webt/sv/f7/xa/svf7xamhyfsi4rzxzdkwxlkfum0.jpeg"></p><br><h2 id="vperyod-v-proshloe"> 转发过去 </h2><br><h3 id="2009">  2009年 </h3><br><p>  Ryan Dahl <a href="https://www.youtube.com/watch%3Fv%3DztspvPYybIY">在这里</a>宣布了Node.JS， <a href="https://www.youtube.com/watch%3Fv%3DztspvPYybIY">这</a>是JSConf 2009上的第一个演示。 </p><br><h3 id="2010">  2010 </h3><br><p>  Express，socket.io出现-目前的主要组成部分几乎是所有服务。 </p><br><p> 确实有一些疯狂的人真正在编写服务器代码！ </p><br><h3 id="2011">  2011年 </h3><br><p> 大个子开始与Node.JS调情-包括Uber和Linkedin。 </p><br><p>  Npm 1.0版本。 </p><br><p> 节点开始在Windows上运行。 </p><br><h3 id="2012">  2012年 </h3><br><p>  Ryan不再开发Node.JS。  <strong>请记住</strong> 。 那是2012年。 因此，瑞安（Ryan）当然是创造者，并且为生态系统做出了很多贡献-但是接下来的7年<strong>没有</strong>他的参与<strong>而</strong>过去了。 </p><br><h3 id="2013">  2013年 </h3><br><p>  Paypal，沃尔玛，eBay的节点。 </p><br><p>  Koa出现-还记得关于发生器的多少份副本被破坏吗？ </p><br><h3 id="2014">  2014年 </h3><br><p>  Netflix上的节点。 人们开始尝试将项目正式化为更成熟的形式，并采用一种开放的模式来管理顾问委员会。 导致io.js分叉的技术停滞。 </p><br><h3 id="2015">  2015年 </h3><br><p> 处理错误。 在Node Foundation的主持下以及Node 4的发布下，io.js和Node的狂喜合并。我必须说，这是我认为是第一个确实可以开发某些东西的版本。 如果有人在版本0.xx上写-那么您会记得var，回调地狱，一堆用于简化异步工作的不同库（例如step和async。是的，async不仅是async await，而且是npm库）。 </p><br><h3 id="2016">  2016年 </h3><br><p> 左派事件仍然是邪恶的舌头，使人回想起了生态系统。 多少文章和攻击。 仇恨者会讨厌。 但是，已经从中吸取了重要的教训。 </p><br><h3 id="2017">  2017年 </h3><br><p> 突破的一年。 我不会提及该节点的所有版本以及使用npm的模块安装数量的增加，但是，今年Node.JS上的服务数量超过了800万，每周的安装数量为30亿。 很难想象的绝对宇宙数字。 </p><br><p>  N-API也出现了，Node.JS在Ayo.js中又被派生了。 关于SJW的一个非常有趣且具有启发性的故事-值得单独写一篇文章，所以我不再赘述-我只建议您在闲暇时阅读。 仅向前扰流器表明，前叉安全地死了。 </p><br><h3 id="2018">  2018年 </h3><br><p> 自左撇子以来的第二次狂躁症-现在是关于事件流如何窃取比特币。 数百篇有关生态系统不安全的帖子。  Fantasy帖子介绍了npm软件包如何窃取信用卡信息。 社区正在像软管一样喷洒泥浆。 我必须说，这非常有用，并且还得出了一些结论-稍后再得出结论。 </p><br><p> 此外，Ryan突然在社区上发布了有关值得在Go上编写严肃的服务这一事实的帖子，描述了Node中他遗憾的10件事，并宣布了解决所有问题的Deno。 </p><br><h3 id="2019">  2019年 </h3><br><p>  Deno进入预览版，中心上出现了很多文章，现在您正在阅读其中的一篇。 </p><br><p><img src="https://habrastorage.org/webt/r2/df/4i/r2df4igff7g0bhkz6a0sl0hq_cs.jpeg"></p><br><h2 id="nazad-v-nastoyaschee"> 回到现在 </h2><br><p> 我希望这次巡回演出后，能更清楚地了解生态系统存在什么样的痛点以及它是如何发展的-在这种情况下，更容易了解现在的情况。 </p><br><h2 id="10-veschey-v-nodejs-o-kotoryh-sozhaleet-rayan-dal">  Ryan Dahl对Node.JS感到遗憾的十件事 </h2><br><p> 不幸的是，我没有找到随报告翻译而来的文章，因此我将在此处简要列出它们，并在此处进行评论。 </p><br><ol><li>  <strong>旅程开始时缺乏对承诺的支持</strong> 。 是的，如果Ryan不兑现承诺，将其简化会更加简单，因为它们是在节点开发之初并未产生的额外复杂性。 所有这些回调地狱所浪费的时间肯定是可惜的-但是在2019年，所有理智的库都将诺言作为主要界面。 而且，甚至系统库也最终提供了承诺。 </li><li>  <strong>系统调用和网络调用的安全性。</strong> 一方面-是的，当一切都安全的时候很好。 另一方面，目前尚不清楚该节点在这方面比任何其他媒介都差。 </li><li>  <strong>使用GYP构建本机模块。</strong> 是的，可能是多余的，但是谁能知道铬会离开她。 再次-如果镀铬消失了，那么我们也可以离开.... </li><li>  <strong>过多的package.json。</strong>  <strong>NPM作为垄断登记册。</strong> 关于package.json的参数有点奇怪。 例如，瑞安（Ryan）说那里有任何垃圾，就像牌照一样。 但是，如果不存在，您如何迅速找出项目中使用的模块的许可证？..关于NPM的争论更像是事实，但我们稍后将对此进行详细介绍。 </li><li>  <strong>节点模块。</strong>  <strong>依赖项的复杂解析无法像在浏览器中那样工作。</strong> 是的，没错。 稳定的依赖关系开始出现在npm的4-5版本上，没有任何奇迹。 但是该机制有效，并允许您做一些令人惊奇的事情-目前还可以。 至于与浏览器的兼容性，无论您做什么，仍然会有处理代码的阶段，例如编译和收集包。 因此，节点模块在这种情况下不太可能具有任何意义。 </li><li>  <strong>需求无延伸及其不确定性</strong> 。 是的，可能不好。 但还不足以提及... </li><li>  <strong>index.js是不必要的并发症。</strong> 也无足轻重而无聊点来描述。 </li></ol><br><p> 顺便说一句，请注意，我说瑞安后悔了10件事，但仅是7分，这不是一个错误，我多次审查了他的报告和报告的评论。 要么是关于处理数值的话题，这是一个复杂的笑话，要么是Ryan太害羞以至于无法再说3点... </p><br><p> 但是好吧，我们了解了问题并继续前进。 从逻辑上讲，在Deno中，Ryan决定摆脱Node.JS的所有问题。 让我们看看他发生了什么。 </p><br><h2 id="iz-chego-sostoit-deno"> 迪诺由什么组成 </h2><br><ol><li>  Deno用Rust编写。 </li><li> 作为事件循环，Deno使用Tokio，它再次用Rust编写。 </li><li>  Deno开箱即用地支持Typescript。 </li><li> 嗯，代码是使用同一V8执行的，该V8捕获了整个世界。 </li></ol><br><p> 乍一看听起来不错，但让我们仔细看看这些要点。 </p><br><p>  <strong>铁锈</strong> 。 不，请正确理解我的知识-我相信Rust和Go是很棒的语言，我对此感到非常高兴。 与使用C ++相比，它们使编写低级代码变得更快，更安全。 但是，有一个细微差别-在最佳情况下，它不会比C ++中的实现慢。 因此，我个人看不出编写系统链和事件循环的完整模拟的意义-不太可能带来任何实际好处，因为这些东西在某些时候只是达到了最佳状态，而实际上并未进一步优化。 </p><br><p>  <strong>打字稿</strong> 再说一次-我对TS没有任何看法。 许多公司和开发人员都在使用它，并且它已经显示出了它的价值。 但是Deno只是将转译器隐藏在二进制文件中，而将转译的代码隐藏在特殊目录中。 也就是说，引擎盖下的所有东西都是一样的，除了美观之外，没有任何好处。 但是有一个缺点-编译器版本与Deno版本紧密相关。 我不确定这是否很好-很容易想到要更新转译器或运行时的情况。 但不是两者都一次。 </p><br><p> 因此，虽然看不到任何美味。 让我们进一步看一下主要功能。 </p><br><h2 id="osnovnye-otlichiya-deno-i-nodejs">  Deno和Node.JS之间的主要区别 </h2><br><h3 id="deno-ne-ispolzuet-npm-net-centralizovannogo-reestra-moduli-importiruyutsya-po-url-net-packagejson">  Deno不使用npm。 没有中央注册表。 模块通过URL导入。 没有package.json。 </h3><br><p> 也就是说，代码看起来像这样： </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { test, runIfMain } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"https://deno.land/std/testing/mod.ts"</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { assertEquals } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"https://deno.land/std/testing/asserts.ts"</span></span>;

test(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">t1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  assertEquals(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>, <span class="hljs-string"><span class="hljs-string">"hello"</span></span>);
});
</code></pre><br>
<p>      ,    .        .  ,       .       :</p><br>
<ol>
<li>      .         ,    ,      . .  ,     :<br>
1.1.  ,      ,      .<br>
1.2.    ,       ,    ,       .<br>
1.3.       ,         .       2012 ,  npm  ,  ?     , " "?</li>
<li> ,  .      github, gitlab,    ,       .   .   .  npm , ,  —   ,     ?       —   .     Entropic, , ,   —    .</li>
</ol><br>
<p>     .    ,     -       (       ) —   …        …    2019? ,    ,   2012   Node.JS   shrinkwrap,   lock file?      ,   ?</p><br>
<p>  ,    URL —     ,    —     .</p><br>
<h3 id="vse-asinhronnye-operacii-v-deno-vozvraschayut-promise">    Deno  Promise.</h3><br>
<p>  , .   2012      —          .        .     -  .</p><br>
<h3 id="deno-vsegda-zavershaet-rabotu-na-uncaught-errors">Deno     Uncaught Errors</h3><br>
<p>      .  Node.JS       .    .</p><br>
<h3 id="ispolzuyutsya-es-modules-a-ne-require"> ES Modules,   require</h3><br>
<p>, ,        .  ,  Node.JS     ES Modules...</p><br>
<h3 id="deno-trebuet-razresheniya-na-rabotu-s-setyu-faylami-i-peremennymi-okruzheniya">Deno      ,    .</h3><br>
<p> !  …  —     allow-read, allow-net, allow-run, allow-env.   - :</p><br>
<pre><code class="bash hljs">deno --allow-read=/etc https://deno.land/std/examples/cat.ts /etc/passwd</code></pre><br>
<p>      :</p><br>
<ol>
<li>        .</li>
<li> ,          --allow-all.</li>
<li>        .      .    ,                ,    .       .   ,     —   .</li>
<li>  .    ,     ,      .      .  ,     2019       2012,      —        ...</li>
</ol><br>
<h2 id="nashe-vremya-nashi-dni-npm"> .  . NPM.</h2><br>
<p><img src="https://habrastorage.org/webt/zk/gz/ei/zkgzeiqxfwe_gxqhgbndrhi3sem.png"></p><br>
<p>      ,    npm  2012 :</p><br>
<ol>
<li>  .      .</li>
<li>Lock file   .</li>
<li>  .    github, snyk   npm.</li>
<li>    .</li>
<li>  .</li>
<li>       — , ,  .</li>
<li>  .</li>
</ol><br>
<p>   npm  … ,         .  ,  ,   …   " ",        — facebook, google, microsoft, gitlab…         ,  npm       .</p><br>
<h2 id="podvodya-itogi"> </h2><br>
<p>  :</p><br>
<ol>
<li>Rust —  .</li>
<li>TypeScript —  .</li>
<li>   URL  NPM —    .</li>
<li>  —  .</li>
<li>  .   .  .  !</li>
</ol><br>
<p><img src="https://habrastorage.org/webt/qw/v8/qc/qwv8qcrwbqujdxridpefbeet4-0.png"></p><br>
<p>         Deno.     " ,  " — ,     ,  Deno   —      .</p><br>
<p>     ,    ,    ,     ,       .    Deno  , ,      Moscow Node.JS Meetup —       .        — ,     -     ?</p></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN476972/">https://habr.com/ru/post/zh-CN476972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN476948/index.html">量子轨迹及其与之一起吃的东西</a></li>
<li><a href="../zh-CN476954/index.html">工作不是狼，第3部分。初学者-生长还是生存？</a></li>
<li><a href="../zh-CN476956/index.html">没有zone.js的Angular：最高性能</a></li>
<li><a href="../zh-CN476958/index.html">欧米茄Red + PS1 Emulator = Kojima Genius</a></li>
<li><a href="../zh-CN476970/index.html">EkbDotNet第1次会议-叶卡捷琳堡加入DotNet.Ru社区</a></li>
<li><a href="../zh-CN476974/index.html">在5分钟内学习自适应Web设计</a></li>
<li><a href="../zh-CN476976/index.html">会议上公开演讲的6个错误</a></li>
<li><a href="../zh-CN476980/index.html">什么是法律支持：对IT公司律师的建议</a></li>
<li><a href="../zh-CN476982/index.html">远程站点上的开发人员-从头到尾</a></li>
<li><a href="../zh-CN476984/index.html">Narcade的案例：土耳其开发人员谈论手机游戏的本地化和土耳其游戏市场</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>