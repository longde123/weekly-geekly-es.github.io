<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äçüíº üßôüèæ ‚ôíÔ∏è Huawei Cloud: il fait nuageux dans PVS-Studio aujourd'hui üë∑ üè™ üëà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au cours de ce si√®cle, tout le monde a entendu parler des services cloud. De nombreuses entreprises ont ma√Ætris√© ce segment de march√© et cr√©√© leurs se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Huawei Cloud: il fait nuageux dans PVS-Studio aujourd'hui</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/477566/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ac/bd2/47b/2acbd247b999e7f8e9e45f77181e2f06.png" alt="Image 2"></div><br>  Au cours de ce si√®cle, tout le monde a entendu parler des services cloud.  De nombreuses entreprises ont ma√Ætris√© ce segment de march√© et cr√©√© leurs services cloud dans diff√©rentes directions.  Notre √©quipe s'est √©galement r√©cemment int√©ress√©e √† ces services en termes d'int√©gration de l'analyseur de code PVS-Studio avec eux.  Nous pensons que nos lecteurs r√©guliers devinent d√©j√† quel type de projet nous allons v√©rifier cette fois.  Le choix s'est port√© sur le code des services cloud de Huawei. <br><a name="habracut"></a><br><h2>  Pr√©sentation </h2><br>  Si vous suivez l'√©quipe PVS-Studio, vous avez probablement remarqu√© que r√©cemment nous nous sommes beaucoup int√©ress√©s aux technologies cloud.  Nous avons d√©j√† publi√© plusieurs articles li√©s √† ce sujet: <br><br><ul><li>  <a href="https://www.viva64.com/ru/b/0670/">PVS-Studio passe aux nuages: Azure DevOps</a> </li><li>  <a href="https://www.viva64.com/ru/b/0636/">PVS-Studio passe aux nuages: Travis CI</a> </li><li>  <a href="https://www.viva64.com/ru/b/0676/">PVS-Studio passe aux nuages: CircleCI</a> </li><li>  <a href="https://www.viva64.com/ru/b/0686/">PVS-Studio passe aux nuages: GitLab CI / CD</a> </li></ul><br>  Et donc, quand je prenais un autre projet int√©ressant pour le prochain article, j'ai re√ßu une offre d'emploi de <a href="https://www.huawei.com/en/">Huawei</a> par la poste.  Lors de la collecte d'informations sur cette soci√©t√©, il s'est av√©r√© qu'ils avaient leurs propres services cloud, mais l'essentiel est que le code source de ces services est disponible gratuitement sur GitHub.  C'√©tait la principale raison du choix de cette entreprise pour cet article.  Comme l'a dit un sage chinois: "Les accidents ne sont pas accidentels." <br><br>  Maintenant, parlons un peu de notre analyseur.  PVS-Studio est un analyseur de code statique qui identifie les erreurs et les vuln√©rabilit√©s dans le code source des programmes √©crits en C, C ++, C # et Java.  L'analyseur fonctionne sur les plateformes Windows, Linux et macOS.  En plus des plugins pour des environnements de d√©veloppement classiques tels que Visual Studio ou IntelliJ IDEA, l'analyseur a la capacit√© de s'int√©grer avec SonarQube et Jenkins: <br><br><ul><li>  <a href="https://www.viva64.com/ru/m/0037/">Int√©gration des r√©sultats d'analyse PVS-Studio dans SonarQube</a> </li><li>  <a href="https://www.viva64.com/ru/m/0048/">Lancez PVS-Studio √† Jenkins</a> </li></ul><br><h2>  Analyse de projet </h2><br>  Au cours de la recherche d'informations pour l'article, j'ai d√©couvert que Huawei dispose d'un <a href="https://developer.huaweicloud.com/en-us">centre de d√©veloppement</a> o√π vous pouvez obtenir des informations, des guides et le code source de leurs services cloud.  Divers langages de programmation ont √©t√© utilis√©s pour cr√©er ces services, mais des langages tels que Go, Java et Python se sont av√©r√©s √™tre les plus populaires. <br><br>  Comme je suis sp√©cialis√© en Java, les projets ont √©t√© choisis en cons√©quence.  Les sources des projets analys√©s dans l'article peuvent √™tre obtenues dans le r√©f√©rentiel GitHub <a href="https://github.com/huaweicloud/">huaweicloud</a> . <br><br>  Pour analyser les projets, je n'avais besoin d'effectuer que quelques actions: <br><br><ul><li>  Obtenez des projets √† partir du r√©f√©rentiel; </li><li>  Utilisez les <a href="https://www.viva64.com/ru/m/0044/">instructions</a> pour d√©marrer l'analyseur Java et d√©marrer l'analyse sur chacun des projets. </li></ul><br>  Apr√®s avoir analys√© les projets, nous avons r√©ussi √† n'en distinguer que trois auxquels je voudrais pr√™ter attention.  Cela est d√ª au fait que la taille des projets Java restants √©tait trop petite. <br><br>  R√©sultats de l'analyse du projet (nombre d'avertissements et nombre de fichiers): <br><br><ul><li>  <a href="https://github.com/huaweicloud/huaweicloud-sdk-java">huaweicloud-sdk-java</a> : 31 - Haute, 2 - Moyenne et 16 - Basse, 2700+ fichiers. </li><li>  <a href="https://github.com/huaweicloud/huaweicloud-dis-agent">huaweicloud-dis-agent</a> : 7 - High, 6 - Medium et 6 - Low, 100+ fichiers. </li><li>  <a href="https://github.com/huaweicloud/huaweicloud-sdk-java-dis">huaweicloud-sdk-java-dis</a> : 15 - High, 6 - Medium et 16 - Low, 270+ fichiers. </li></ul><br>  Il y a peu d'avertissements, donc en g√©n√©ral on peut dire de la bonne qualit√© du code.  De plus, toutes les op√©rations ne sont pas des erreurs valides.  Cela est d√ª au fait que l'analyseur n'a parfois pas suffisamment d'informations pour distinguer le code correct du code incorrect.  Par cons√©quent, les diagnostics de l'analyseur sont am√©lior√©s chaque jour √† l'aide des informations re√ßues des utilisateurs.  Voir √©galement l'article " <a href="https://www.viva64.com/ru/b/0488/">Comment et pourquoi les analyseurs statiques combattent les faux positifs</a> ". <br><br>  Dans le processus d'analyse des projets, j'ai s√©lectionn√© les avertissements les plus int√©ressants, dont je parlerai dans cet article. <br><br><h2>  Ordre d'initialisation des champs </h2><br>  <a href="https://www.viva64.com/ru/w/v6050/">Le</a> cycle d'initialisation de la classe <a href="https://www.viva64.com/ru/w/v6050/">V6050</a> est pr√©sent.  L'initialisation de 'INSTANCE' appara√Æt avant l'initialisation de 'LOG'.  UntrustedSSL.java (32), UntrustedSSL.java (59), UntrustedSSL.java (33) <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UntrustedSSL</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> UntrustedSSL INSTANCE = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UntrustedSSL(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger LOG = LoggerFactory.getLogger(UntrustedSSL.class); .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UntrustedSSL</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { .... } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Throwable t) { LOG.error(t.getMessage(), t); <span class="hljs-comment"><span class="hljs-comment">// &lt;= } } }</span></span></code> </pre> <br>  Si une exception se produit dans le constructeur de la classe <i>UntrustedSSL</i> , les informations sur cette exception sont enregistr√©es dans le <i>bloc catch</i> √† l'aide de l'enregistreur <i>LOG</i> .  Cependant, en raison de l'ordre d'initialisation des champs statiques, le <i>LOG</i> au moment de l'initialisation du champ <i>INSTANCE</i> n'est pas encore initialis√©.  Par cons√©quent, lors de la journalisation des informations d'exception dans le constructeur, une exception <i>NullPointerException</i> sera lev√©e.  Cette exception est la cause d'une autre <i>exception ExceptionInInitializerError</i> qui est lev√©e si une exception s'est produite lors de l'initialisation du champ statique.  Tout ce qui est n√©cessaire pour r√©soudre le probl√®me d√©crit est de placer l'initialisation <i>LOG</i> avant l'initialisation <i>INSTANCE</i> . <br><br><h2>  Faute de frappe invisible </h2><br>  <a href="https://www.viva64.com/ru/w/v6005/">V6005</a> La variable 'this.metricSchema' est assign√©e √† elle-m√™me.  OpenTSDBSchema.java (72) <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenTSDBSchema</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@JsonProperty</span></span>(<span class="hljs-string"><span class="hljs-string">"metric"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;SchemaField&gt; metricSchema; .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMetricsSchema</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;SchemaField&gt; metricsSchema)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.metricSchema = metricSchema; <span class="hljs-comment"><span class="hljs-comment">// &lt;= } public void setMetricSchema(List&lt;SchemaField&gt; metricSchema) { this.metricSchema = metricSchema; } .... }</span></span></code> </pre> <br>  Les deux m√©thodes d√©finissent le champ <i>metricSchema</i> , mais les noms de m√©thode diff√®rent par leur caract√®re.  Le programmeur a nomm√© les arguments de ces m√©thodes en fonction du nom de la m√©thode.  Par cons√©quent, dans la ligne point√©e par l'analyseur, le champ <i>metricSchema est</i> assign√© √† lui-m√™me et l'argument de la m√©thode <i>metricsSchema n'est</i> pas utilis√©. <br><br>  <a href="https://www.viva64.com/ru/w/v6005/">V6005</a> La variable 'suspend' est assign√©e √† elle-m√™me.  SuspendTransferTaskRequest.java (77) <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SuspendTransferTaskRequest</span></span></span><span class="hljs-class"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> suspend; .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSuspend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> suspend)</span></span></span><span class="hljs-function"> </span></span>{ suspend = suspend; } .... }</code> </pre> <br>  Voici une erreur banale li√©e √† la n√©gligence, √† cause de laquelle l'affectation de l'argument <i>suspendre</i> √† lui-m√™me se produit.  Par cons√©quent, la valeur de l'argument arriv√© ne sera pas affect√©e au champ de <i>suspension</i> , comme implicite.  Correctement: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSuspend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> suspend)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.suspend = suspend; }</code> </pre> <br><h2>  Conditions pr√©d√©termin√©es </h2><br>  Comme cela arrive souvent, la r√®gle <a href="https://www.viva64.com/ru/w/v6007/">V6007 prend de l'</a> avance en termes de nombre d'avertissements. <br><br>  <a href="https://www.viva64.com/ru/w/v6007/">V6007 L'</a> expression ¬´firewallPolicyId == null¬ª est toujours fausse.  FirewallPolicyServiceImpl.java (125) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> FirewallPolicy </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeFirewallRuleFromPolicy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String firewallPolicyId, String firewallRuleId)</span></span></span><span class="hljs-function"> </span></span>{ checkNotNull(firewallPolicyId); checkNotNull(firewallRuleId); checkState(!(firewallPolicyId == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; firewallRuleId == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>), <span class="hljs-string"><span class="hljs-string">"Either a Firewall Policy or Firewall Rule identifier must be set"</span></span>); .... }</code> </pre> <br>  Dans cette m√©thode, les arguments sont v√©rifi√©s pour <i>null</i> par la m√©thode <i>checkNotNull</i> : <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@CanIgnoreReturnValue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkNotNull</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T reference)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reference == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NullPointerException(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reference; } }</code> </pre> <br>  Apr√®s avoir v√©rifi√© l'argument avec la m√©thode <i>checkNotNull</i> , vous pouvez √™tre s√ªr √† 100% que l'argument pass√© √† cette m√©thode n'est pas <i>nul</i> .  √âtant donn√© que les deux arguments de la m√©thode <i>removeFirewallRuleFromPolicy sont</i> v√©rifi√©s par la m√©thode <i>checkNotNull</i> , il est inutile de v√©rifier √† nouveau les arguments pour <i>les</i> <i>valeurs</i> <i>nulles</i> .  Cependant, une expression est pass√©e √† la m√©thode <i>checkState</i> comme premier argument, o√π les arguments <i>firewallPolicyId</i> et <i>firewallRuleId</i> sont rev√©rifi√©s pour <i>null</i> . <br><br>  Un avertissement similaire est √©mis pour <i>firewallRuleId</i> : <br><br><ul><li>  V6007 L'expression 'firewallRuleId == null' est toujours fausse.  FirewallPolicyServiceImpl.java (125) </li></ul><br>  <a href="https://www.viva64.com/ru/w/v6007/">V6007 L'</a> expression 'filteringParams! = Null' est toujours vraie.  NetworkPolicyServiceImpl.java (60) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Invocation&lt;NetworkServicePolicies&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildInvocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Map&lt;String, String&gt; filteringParams)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (filteringParams == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> servicePoliciesInvocation; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (filteringParams != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... } return servicePoliciesInvocation; }</span></span></code> </pre> <br>  Dans cette m√©thode, si l'argument <i>filteringParams</i> est <i>nul</i> , la m√©thode se ferme et renvoie une valeur.  Par cons√©quent, le test point√© par l'analyseur sera toujours vrai, ce qui signifie que ce test n'a pas de sens. <br><br>  La m√™me chose se produit dans 13 classes: <br><br><ul><li>  V6007 L'expression 'filteringParams! = Null' est toujours vraie.  PolicyRuleServiceImpl.java (58) </li><li>  V6007 L'expression 'filteringParams! = Null' est toujours vraie.  GroupServiceImpl.java (58) </li><li>  V6007 L'expression 'filteringParams! = Null' est toujours vraie.  ExternalSegmentServiceImpl.java (57) </li><li>  V6007 L'expression 'filteringParams! = Null' est toujours vraie.  L3policyServiceImpl.java (57) </li><li>  V6007 L'expression 'filteringParams! = Null' est toujours vraie.  PolicyRuleSetServiceImpl.java (58) </li><li>  et ainsi de suite ... </li></ul><br><h2>  R√©f√©rence nulle </h2><br>  <a href="https://www.viva64.com/ru/w/v6008/">V6008 D√©r√©f√©rence</a> nulle potentielle de 'm.blockDeviceMapping'.  NovaServerCreate.java (390) <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ServerCreateBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">blockDevice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BlockDeviceMappingCreate blockDevice)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (blockDevice != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; m.blockDeviceMapping == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { m.blockDeviceMapping = Lists.newArrayList(); } m.blockDeviceMapping.add(blockDevice); <span class="hljs-comment"><span class="hljs-comment">// &lt;= return this; }</span></span></code> </pre> <br>  Dans cette m√©thode, l'initialisation du champ de r√©f√©rence <i>m.blockDeviceMapping</i> ne se produira pas si l'argument <i>blockDevice</i> est <i>nul</i> .  Ce champ est initialis√© uniquement dans cette m√©thode, donc lorsque la m√©thode <i>add</i> est appel√©e, le champ <i>m.blockDeviceMapping l√®vera</i> une <i>NullPointerException</i> . <br><br>  <a href="https://www.viva64.com/ru/w/v6008/">V6008 D√©r√©f√©rence</a> nulle potentielle de 'FileId.get (chemin)' dans la fonction '&lt;init&gt;'.  TrackedFile.java (140), TrackedFile.java (115) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TrackedFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FileFlow&lt;?&gt; flow, Path path)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>(flow, path, FileId.get(path), ....); }</code> </pre> <br>  Le r√©sultat de la m√©thode statique <i>FileId.get (chemin)</i> est transmis au constructeur de la classe <i>TrackedFile</i> comme troisi√®me argument.  Mais cette m√©thode peut retourner <i>null</i> : <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> FileId </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Path file)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Files.exists(file)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } .... }</code> </pre> <br>  Dans le constructeur appel√© par <i>ce</i> biais, l'argument <i>id</i> ne change pas tant qu'il n'est pas utilis√© pour la premi√®re fois: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TrackedFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...., ...., FileId id, ....)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ .... FileId newId = FileId.get(path); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!id.equals(newId)) { .... } }</code> </pre> <br>  Par cons√©quent, si <i>null</i> est pass√© √† la m√©thode comme troisi√®me argument, une exception se produit. <br><br>  Une situation similaire se produit dans un autre cas: <br><br><ul><li>  V6008 D√©r√©f√©rence nulle potentielle de ¬´tampon¬ª.  PublishingQueue.java (518) </li></ul><br>  <a href="https://www.viva64.com/ru/w/v6008/">V6008 D√©r√©f√©rence</a> nulle potentielle de 'dataTmpFile'.  CacheManager.java (91) <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">putToCache</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PutRecordsRequest putRecordsRequest)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dataTmpFile == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || !dataTmpFile.exists()) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { dataTmpFile.createNewFile(); <span class="hljs-comment"><span class="hljs-comment">// &lt;= } catch (IOException e) { LOGGER.error("Failed to create cache tmp file, return.", e); return ; } } .... }</span></span></code> </pre> <br>  Et encore NPE.  Un certain nombre de v√©rifications dans l'instruction conditionnelle permettent √† l'objet <i>dataTmpFile</i> d'√™tre null pour un d√©r√©f√©rencement ult√©rieur.  Je pense qu'il y a deux fautes de frappe ici, et le ch√®que devrait en fait √™tre comme ceci: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dataTmpFile != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; !dataTmpFile.exists())</code> </pre> <br><h2>  Sous-cha√Ænes et nombres n√©gatifs </h2><br>  <a href="https://www.viva64.com/ru/w/v6009/">V6009</a> La fonction 'substring' pourrait recevoir la valeur '-1' alors qu'une valeur non n√©gative est attendue.  Inspectez l'argument: 2. RemoveVersionProjectIdFromURL.java (37) <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String url)</span></span></span><span class="hljs-function"> </span></span>{ String urlRmovePojectId = url.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, url.lastIndexOf(<span class="hljs-string"><span class="hljs-string">"/"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> urlRmovePojectId.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, urlRmovePojectId.lastIndexOf(<span class="hljs-string"><span class="hljs-string">"/"</span></span>)); }</code> </pre> <br>  Il est entendu que l'URL est transmise √† cette m√©thode sous forme de cha√Æne, qui n'est en aucun cas valid√©e.  Apr√®s cette cha√Æne est d√©coup√©e plusieurs fois √† l'aide de la m√©thode <i>lastIndexOf</i> .  Si <i>lastIndexOf</i> ne trouve pas de correspondance dans la cha√Æne, il renverra -1.  Cela <i>l√®vera</i> une <i>StringIndexOutOfBoundsException</i> , car les arguments de la m√©thode de <i>sous</i> - <i>cha√Æne</i> doivent √™tre des nombres non n√©gatifs.  Pour que la m√©thode fonctionne correctement, vous devez ajouter la validation de l'argument d'entr√©e ou v√©rifier que les r√©sultats des m√©thodes <i>lastIndexOf</i> ne sont pas des nombres n√©gatifs. <br><br>  Voici d'autres endroits o√π cela se produit: <br><br><ul><li>  V6009 La fonction 'substring' pourrait recevoir la valeur '-1' alors qu'une valeur non n√©gative est attendue.  Inspectez l'argument: 2. RemoveProjectIdFromURL.java (37) </li><li>  V6009 La fonction 'substring' pourrait recevoir la valeur '-1' alors qu'une valeur non n√©gative est attendue.  Inspectez l'argument: 2. RemoveVersionProjectIdFromURL.java (38) </li></ul><br><h2>  R√©sultat oubli√© </h2><br>  <a href="https://www.viva64.com/ru/w/v6010/">V6010</a> La valeur de retour de la fonction 'concat' doit √™tre utilis√©e.  AKSK.java (278) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildCanonicalHost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(URL url)</span></span></span><span class="hljs-function"> </span></span>{ String host = url.getHost(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> port = url.getPort(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (port &gt; -<span class="hljs-number"><span class="hljs-number">1</span></span>) { host.concat(<span class="hljs-string"><span class="hljs-string">":"</span></span> + Integer.toString(port)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> host; }</code> </pre> <br>  Lors de l'√©criture de ce code, il n'a pas √©t√© pris en compte que l'appel de la m√©thode <i>concat</i> ne changera pas la cha√Æne <i>h√¥te en</i> raison de l'immuabilit√© des objets de type <i>String</i> .  Pour que la m√©thode fonctionne correctement, vous devez affecter le r√©sultat de la m√©thode <i>concat</i> √† la variable <i>h√¥te</i> dans le bloc <i>if</i> .  Correctement: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (port &gt; -<span class="hljs-number"><span class="hljs-number">1</span></span>) { host = host.concat(<span class="hljs-string"><span class="hljs-string">":"</span></span> + Integer.toString(port)); }</code> </pre> <br><h2>  Variables inutilis√©es </h2><br>  <a href="https://www.viva64.com/ru/w/v6021/">V6021</a> L'URL variable n'est pas utilis√©e.  TriggerV2Service.java (95) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteAllTriggersForFunction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String functionUrn)</span></span></span><span class="hljs-function"> </span></span>{ checkArgument(!Strings.isNullOrEmpty(functionUrn), ....); String url = ClientConstants.FGS_TRIGGERS_V2 + ClientConstants.URI_SEP + functionUrn; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> deleteWithResponse(uri(triggersUrlFmt, functionUrn)).execute(); }</code> </pre> <br>  Dans cette m√©thode, la variable <i>url</i> n'est pas utilis√©e apr√®s l'initialisation.  Tr√®s probablement, la variable <i>url</i> doit √™tre pass√©e √† la m√©thode <i>uri</i> comme deuxi√®me argument au lieu de <i>functionUrn</i> , car la variable <i>functionUrn est</i> impliqu√©e dans l'initialisation de la variable <i>url</i> . <br><br><h2>  Argument non utilis√© dans le constructeur </h2><br>  <a href="https://www.viva64.com/ru/w/v6022/">V6022 Le</a> param√®tre 'returnType' n'est pas utilis√© dans le corps du constructeur.  HttpRequest.java (68) <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HttpReQuest</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class">&gt; </span></span>{ .... Class&lt;R&gt; returnType; .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HttpRequest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...., Class&lt;R&gt; returnType)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">// &lt;= { this.endpoint = endpoint; this.path = path; this.method = method; this.entity = entity; } .... public Class&lt;R&gt; getReturnType() { return returnType; } .... }</span></span></span></span></code> </pre> <br>  Dans ce constructeur, ils ont oubli√© d'utiliser l'argument <i>returnType</i> et d'assigner sa valeur au champ <i>returnType</i> .  Par cons√©quent, lorsque la m√©thode <i>getReturnType</i> est <i>appel√©e</i> , l'objet cr√©√© par ce constructeur renverra la valeur par d√©faut <i>null</i> , bien qu'il √©tait tr√®s probablement destin√© √† obtenir l'objet qui a √©t√© pr√©c√©demment transmis au constructeur. <br><br><h2>  M√™me fonctionnalit√© </h2><br>  <a href="https://www.viva64.com/ru/w/v6032/">V6032</a> Il est √©trange que le corps de la m√©thode 'enable' soit enti√®rement √©quivalent au corps d'une autre m√©thode 'disable'.  ServiceAction.java (32), ServiceAction.java (36) <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ServiceAction</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ModelEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String binary; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String host; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ServiceAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String binary, String host)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.binary = binary; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.host = host; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ServiceAction </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String binary, String host)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// &lt;= return new ServiceAction(binary, host); } public static ServiceAction disable(String binary, String host) { // &lt;= return new ServiceAction(binary, host); } .... }</span></span></code> </pre> <br>  La pr√©sence de deux m√©thodes identiques n'est pas une erreur, mais le fait que deux m√©thodes effectuent la m√™me action est au moins √©trange.  En regardant les noms des m√©thodes ci-dessus, nous pouvons supposer qu'elles effectuent les actions oppos√©es.  En fait, les deux m√©thodes font la m√™me chose: elles cr√©ent et renvoient un objet <i>ServiceAction</i> .  Tr√®s probablement, la m√©thode <i>disable a</i> √©t√© cr√©√©e en copiant le code de la m√©thode <i>enable</i> , mais a oubli√© de changer le corps de la m√©thode. <br><br><h2>  J'ai oubli√© de v√©rifier la chose principale </h2><br>  <a href="https://www.viva64.com/ru/w/v6060/">V6060</a> La r√©f√©rence "params" a √©t√© utilis√©e avant d'√™tre v√©rifi√©e par rapport √† null.  DomainService.java (49), DomainService.java (46) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Domains </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">list</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Map&lt;String, String&gt; params)</span></span></span><span class="hljs-function"> </span></span>{ Preconditions.checkNotNull(params.get(<span class="hljs-string"><span class="hljs-string">"page_size"</span></span>), ....); Preconditions.checkNotNull(params.get(<span class="hljs-string"><span class="hljs-string">"page_number"</span></span>), ....); Invocation&lt;Domains&gt; domainInvocation = get(Domains.class, uri(<span class="hljs-string"><span class="hljs-string">"/domains"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (params != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... } return domainInvocation.execute(this.buildExecutionOptions(Domains.class)); }</span></span></code> </pre> <br>  Dans cette m√©thode, nous avons d√©cid√© de v√©rifier le contenu d'une structure de type <i>Map</i> pour l'in√©galit√© <i>nulle</i> .  Pour ce faire, l'argument <i>params</i> appelle deux fois la m√©thode <i>get</i> , dont le r√©sultat est pass√© √† la m√©thode <i>checkNotNull</i> .  Tout semble logique, mais peu importe comment!  Dans <i>if</i> , l'argument <i>params</i> est v√©rifi√© pour <i>null</i> .  Apr√®s quoi, on peut supposer que l'argument d'entr√©e peut √™tre <i>nul</i> , mais avant cette v√©rification, la m√©thode <i>get</i> √©tait d√©j√† appel√©e deux fois sur les <i>param√®tres</i> .  Si <i>null</i> est pass√© comme argument √† cette m√©thode, la premi√®re fois que la m√©thode <i>get</i> est appel√©e, une exception sera lev√©e. <br><br>  Une situation similaire se produit √† trois autres endroits: <br><br><ul><li>  V6060 La r√©f√©rence "params" a √©t√© utilis√©e avant d'√™tre v√©rifi√©e par rapport √† null.  DomainService.java (389), DomainService.java (387) </li><li>  V6060 La r√©f√©rence "params" a √©t√© utilis√©e avant d'√™tre v√©rifi√©e par rapport √† null.  DomainService.java (372), DomainService.java (369) </li><li>  V6060 La r√©f√©rence "params" a √©t√© utilis√©e avant d'√™tre v√©rifi√©e par rapport √† null.  DomainService.java (353), DomainService.java (350) </li></ul><br><h2>  Conclusion </h2><br>  De nos jours, les grandes entreprises modernes ne peuvent tout simplement pas se passer de l'utilisation des services cloud.  Un grand nombre de personnes utilisent ces services, donc m√™me la moindre erreur dans le service peut entra√Æner des probl√®mes pour de nombreuses personnes, ainsi que des co√ªts suppl√©mentaires pour l'entreprise afin de corriger les cons√©quences de cette erreur.  Lors du d√©veloppement, il est toujours n√©cessaire de prendre en compte le facteur humain, car toute personne fait t√¥t ou tard des erreurs, et cet article en est un exemple.  C'est pourquoi vous devez utiliser tous les outils possibles pour am√©liorer la qualit√© du code. <br><br>  PVS-Studio informera certainement Huawei des r√©sultats de la v√©rification de leurs services cloud afin que les d√©veloppeurs de cette soci√©t√© puissent les √©tudier plus en d√©tail. <br><br>  L'utilisation ponctuelle de l'analyse de code statique d√©montr√©e dans l'article ne peut pas montrer tous ses avantages.  Des informations plus d√©taill√©es sur la fa√ßon d'utiliser correctement l'analyse statique peuvent √™tre trouv√©es <a href="https://www.viva64.com/ru/b/0594/">ici</a> et <a href="https://www.viva64.com/ru/b/0639/">ici</a> .  Vous pouvez t√©l√©charger l'analyseur PVS-Studio <a href="https://www.viva64.com/ru/pvs-studio-download/">ici</a> . <br><br><p> <a href="https://habr.com/en/company/pvs-studio/blog/477558/"><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br>  Si vous souhaitez partager cet article avec un public anglophone, veuillez utiliser le lien vers la traduction: Valery Komarov.  <a href="https://habr.com/en/company/pvs-studio/blog/477558/">Huawei Cloud: c'est nuageux dans PVS-Studio aujourd'hui</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr477566/">https://habr.com/ru/post/fr477566/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr477554/index.html">La zone de domaine .ORG est vendue √† une entreprise priv√©e. Le public appelle l'ICANN √† r√©silier le contrat</a></li>
<li><a href="../fr477558/index.html">Huawei Cloud: c'est nuageux dans PVS-Studio aujourd'hui</a></li>
<li><a href="../fr477560/index.html">Changez votre √©tat d'esprit avec SwiftUI</a></li>
<li><a href="../fr477562/index.html">Conception d'interface pour le jeu, dessinez un pack d'ic√¥nes</a></li>
<li><a href="../fr477564/index.html">Clients complexes: comment en prot√©ger votre √©quipe</a></li>
<li><a href="../fr477568/index.html">Le service est un retour inconditionnel facile. Poste russe</a></li>
<li><a href="../fr477578/index.html">Comment choisir un langage de programmation pour cr√©er une application Android</a></li>
<li><a href="../fr477580/index.html">Meilleurs cadres PHP pour le d√©veloppement Web</a></li>
<li><a href="../fr477584/index.html">Classique intemporel: ce que les jeux d'action modernes devraient apprendre de DOOM</a></li>
<li><a href="../fr477590/index.html">Int√©gration de code et danger de logiciels pirat√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>