<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📫 🤦🏿 🦊 Instalación, configuración del sistema y control de cámaras. 👩‍👩‍👧‍👦 🕺🏽 🧑🏿‍🤝‍🧑🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entonces, comencemos, usaremos: 



- Sistema: Ubuntu Server 12.04 
- DVR: Zoneminder; 
- Cámaras: dlink analógico e IP; 
- Tarjeta de captura de vide...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Instalación, configuración del sistema y control de cámaras.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416125/">  Entonces, comencemos, usaremos: <br><br><ul><li>  Sistema: Ubuntu Server 12.04 </li><li>  DVR: Zoneminder; </li><li>  Cámaras: dlink analógico e IP; </li><li>  Tarjeta de captura de video: Puente PCI: Puente Hint Corp HiNT HB4 PCI-PCI (PCI6150) </li><li>  El requisito principal: elevar el servidor de videovigilancia para producción </li></ul><br>  IP que se utilizarán en nuestros procedimientos: <br>  192.168.110.151 - la dirección de nuestro DVR en sí; <br>  192.168.107.103 - Dirección IP de la cámara. <br><a name="habracut"></a><br>  1) Instrucciones detalladas de instalación para el servidor Ubuntu 12.04.  Se incluyen capturas de pantalla paso a paso. <br><br>  Para instalar Ubuntu 12.04 Server, descargue la imagen iso en la página, grábela en un CD y arranque desde ella.  La primera ventana, seleccione el idioma de instalación, en nuestro caso, selecciono ruso: <br><br><img src="https://habrastorage.org/storage3/bfb/7c5/3ea/bfb7c53ea988a8c28cead31fdf749dbb.jpeg" alt="imagen"><br><br>  Comenzamos la instalación de Ubuntu 12.04: <br><br><img src="https://habrastorage.org/storage3/e55/e66/f79/e55e66f7956a015005252b125f58313f.jpeg" alt="imagen"><br><br>  Elige un pais: <br><br><img src="https://habrastorage.org/storage3/85e/c7d/7bb/85ec7d7bb9cb6ab84493e5e561e28335.jpeg" alt="imagen"><br><br>  No estoy de acuerdo con la detección automática del teclado: <br><br><img src="https://habrastorage.org/storage3/30a/c1d/ee6/30ac1dee6d0beb0d28e68b12dd89d7f5.jpeg" alt="imagen"><br><br>  Elija el idioma del diseño: <br><br><img src="https://habrastorage.org/storage3/c34/a9c/54e/c34a9c54e4011b4fc42ee07a7583acca.jpeg"><br><br>  Elegimos la forma de cambiar el teclado, prefiero Ctrl + Shift, en su caso podría ser diferente: <br><br><img src="https://habrastorage.org/storage3/129/a69/0ce/129a690ce2e684242f008f9f00286a96.jpeg" alt="imagen"><br><br>  La red será configurada por dhcp: <br><br><img src="https://habrastorage.org/storage3/450/ac5/119/450ac5119c1a39369e2f52babe871213.jpeg"><br><br>  Esto no nos conviene, por lo tanto, presionamos el botón "Volver" <br><br><img src="https://habrastorage.org/storage3/370/0eb/987/3700eb98730c66998c8d74e334280a79.jpeg"><br><br>  Seleccione "Configurar manualmente la red" <br><br><img src="https://habrastorage.org/storage3/d49/419/8d4/d494198d4d17c2b089e583cf0c92944d.jpeg"><br><br>  Además en las ventanas propuestas, escribimos la configuración de nuestra red, puerta de enlace y DNS.  La siguiente ventana le pedirá que escriba el nombre de la computadora en mi caso, este es el probador.  Escribimos el nombre de usuario: <br><br><img src="https://habrastorage.org/storage3/eae/cc4/15b/eaecc415bd5881c4b9df9567a821d052.jpeg"><br><br>  Ingrese la contraseña, después de escribirla en el cuaderno: <br><br><img src="https://habrastorage.org/storage3/866/0da/d00/8660dad0091e80677cb98181ae97b638.jpeg"><br><br>  El siguiente es el ajuste automático de la zona horaria y pregunta si esta es la zona horaria correcta: <br><br><img src="https://habrastorage.org/storage3/85a/ca5/4ea/85aca54ea9e90301a11804cdcce7b725.jpeg"><br><br>  Hoy elegiré el particionamiento automático del disco: <br><br><img src="https://habrastorage.org/storage3/1c5/238/876/1c52388768ab4e405c33137e215adda7.jpeg"><br><br>  Selecciona un disco: <br><br><img src="https://habrastorage.org/storage3/49b/4dc/d4c/49b4dcd4c2bfbf9dc2e9a90596807cff.jpeg"><br><br>  y registra los cambios: <br><br><img src="https://habrastorage.org/storage3/b33/1d9/7fb/b331d97fb571802b6c1accab118004c8.jpeg"><br><br>  El siguiente es el proceso de instalación para el servidor Ubuntu 12.04 en sí: <br><br>  Durante el proceso de instalación, si usa un proxy, debe especificar la dirección del servidor proxy: <br><br><img src="https://habrastorage.org/storage3/70f/8d1/33b/70f8d133bf7f3b516790cc27d6032043.jpeg"><br><br>  Deshabilitar actualizaciones, porque  pueden causar inestabilidad del sistema: <br><br><img src="https://habrastorage.org/storage3/0f9/2ab/ac7/0f92abac77cbc867ef073617c2e1b166.jpeg"><br><br>  Bueno, casi hemos completado la instalación del Servidor Ubuntu 12.04 y hemos llegado a la etapa de elegir el destino de nuestro sistema.  La elección de los elementos en este paso depende del papel que desempeñará su nuevo servidor Ubuntu: puede ser un servidor de base de datos o un servidor de correo, etc.  En nuestro caso, definitivamente debe elegir la lámpara y el servidor openssh. <br><br><img src="https://habrastorage.org/storage3/572/a16/416/572a16416afd1504ac586e0570f86091.jpeg"><br><br>  Ingrese la contraseña de root para mysql: <br><br><img src="https://habrastorage.org/storage3/404/217/3c2/4042173c2352d6c2a47a2da3fd015400.jpeg"><br><br>  En la última etapa, el instalador ofrecerá instalar el gestor de arranque del sistema en el registro de arranque principal: <br><br><img src="https://habrastorage.org/storage3/0e5/1a5/38b/0e51a538bf86ab93edc973d4711c9b9c.jpeg"><br><br>  Unos segundos y puede quitar el disco del Servidor Ubuntu 12.04 de la unidad y hacer clic en "Continuar": <br><br><img src="https://habrastorage.org/storage3/8bc/de1/8b2/8bcde18b2c35ee92f25b42abce9487bc.jpeg"><br><br>  Cuando el servidor se reinicia correctamente, puede iniciar sesión con su nombre de usuario y contraseña. <br><br>  2) Instalación, configuración de la grabadora de video Zoneminder <br><br>  Zoneminder 1.25.0 en Ubuntu 12.04 <br>  Para un trabajo exitoso, necesitamos instalar OpenSSH Server y LAMP Server, lo cual hicimos en el párrafo anterior. <br><br>  1. Inicie sesión como root: <br><br><pre><code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#sudo su</span></span></code> </pre> <br>  2. Instale actualizaciones y reinicie: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$apt</span></span><span class="hljs-literal"><span class="hljs-literal">-get</span></span> update <span class="hljs-variable"><span class="hljs-variable">$apt</span></span><span class="hljs-literal"><span class="hljs-literal">-get</span></span> upgrade <span class="hljs-variable"><span class="hljs-variable">$apt</span></span><span class="hljs-literal"><span class="hljs-literal">-get</span></span> dist<span class="hljs-literal"><span class="hljs-literal">-upgrade</span></span> <span class="hljs-variable"><span class="hljs-variable">$reboot</span></span></code> </pre> <br>  3. Necesitamos: IP estática <br><br><pre> <code class="hljs perl">$nano /etc/network/interfaces</code> </pre> <br>  4. Allí escribimos: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">auto</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">eth0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">iface</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">eth0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">inet</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">static</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">address</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.110</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.151</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">netmask</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">gateway</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.110</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.220</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">dns-nameservers</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.110</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.5</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.110</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.6</span></span></code> </pre> <br>  5. Guarde el documento. <br><br>  6. Reiniciar: <br><br><pre> <code class="hljs perl">$reboot</code> </pre> <br>  7. Procedemos directamente a la instalación de zoneminder: <br><br><pre> <code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#sudo</span></span> su <span class="hljs-string"><span class="hljs-string">$a</span></span>pt-get install zoneminder</code> </pre> <br>  8. Editamos el script Zoneminder mismo, porque  no se inicia automáticamente al cargar: <br><br><pre> <code class="hljs swift">$nano /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/zoneminder</code> </pre> <br>  Insertamos en el documento antes de la línea "zmfix -a", esta es sleep 15. <br><br>  9. Guarde el documento. <br><br>  10. Hacemos un enlace simbólico: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$ln</span></span> <span class="hljs-literal"><span class="hljs-literal">-s</span></span> /etc/zm/apache.conf /etc/apache2/conf.d/zoneminder.conf</code> </pre> <br>  11. Reinicie el servidor web: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span>/etc/init.d/apache2 force<span class="hljs-literal"><span class="hljs-literal">-reload</span></span></code> </pre> <br>  12. Agregue el usuario de quien se manipulará el video: <br><br><pre> <code class="hljs haskell">$adduser www-<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> video</span></span></code> </pre> <br>  13. Instale cambozola para admitir la reproducción de la transmisión de video: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$cd</span></span> /usr/src &amp;&amp; wget http://www.charliemouse.com:<span class="hljs-number"><span class="hljs-number">8080</span></span>/code/cambozola/cambozola<span class="hljs-literal"><span class="hljs-literal">-latest</span></span>.tar.gz <span class="hljs-variable"><span class="hljs-variable">$tar</span></span> <span class="hljs-literal"><span class="hljs-literal">-xzvf</span></span> cambozola<span class="hljs-literal"><span class="hljs-literal">-latest</span></span>.tar.gz <span class="hljs-variable"><span class="hljs-variable">$cp</span></span> cambozola<span class="hljs-literal"><span class="hljs-literal">-0</span></span>.<span class="hljs-number"><span class="hljs-number">92</span></span>/dist/cambozola.jar /usr/share/zoneminder</code> </pre> <br>  14. Agregue certificados para el servidor web: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$make</span></span><span class="hljs-literal"><span class="hljs-literal">-ssl</span></span><span class="hljs-literal"><span class="hljs-literal">-cert</span></span> generate<span class="hljs-literal"><span class="hljs-literal">-default</span></span><span class="hljs-literal"><span class="hljs-literal">-snakeoil</span></span> -<span class="hljs-literal"><span class="hljs-literal">-force</span></span><span class="hljs-literal"><span class="hljs-literal">-overwrite</span></span></code> </pre> <br>  15. Actívalos: <br><br><pre> <code class="hljs perl">$a2enmod ssl</code> </pre> <br>  16. Activamos el host ssl-virtual predeterminado: <br><br><pre> <code class="hljs mel">$a2ensite <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>-ssl</code> </pre> <br>  17. Reinicie el servidor web: <br><br><pre> <code class="hljs perl">$service apache2 restart</code> </pre> <br>  18. Para utilizar con éxito https, hacemos lo siguiente: <br><br><pre> <code class="hljs perl">$nano /etc/cron.daily/ntpdate</code> </pre> <br>  19. Inserte estas dos líneas: <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#!/bin/sh ntpdate ntp.ubuntu.com</span></span></code> </pre> <br>  20. Guardamos el documento. <br><br>  21. Le damos derechos: <br><br><pre> <code class="hljs perl">$chmod <span class="hljs-number"><span class="hljs-number">755</span></span> /etc/cron.daily/ntpdate</code> </pre> <br>  22. Editamos el archivo sysctl.conf para dejar en claro al kernel cuánta memoria usaremos en zoneminder (de lo contrario habrá una pantalla en negro): <br><br><pre> <code class="hljs perl">$nano /etc/sysctl.conf</code> </pre> <br>  23. Inserte las siguientes dos líneas en la parte inferior del documento: <br><br><pre> <code class="hljs">kernel.shmall = 134217728 kernel.shmmax = 134217728</code> </pre> <br>  24. Transfiera estos valores al núcleo: <br><br><pre> <code class="hljs ruby">$echo <span class="hljs-number"><span class="hljs-number">134217728</span></span> &gt;<span class="hljs-regexp"><span class="hljs-regexp">/proc/sys</span></span><span class="hljs-regexp"><span class="hljs-regexp">/kernel/shmall</span></span> $echo <span class="hljs-number"><span class="hljs-number">134217728</span></span> &gt;<span class="hljs-regexp"><span class="hljs-regexp">/proc/sys</span></span><span class="hljs-regexp"><span class="hljs-regexp">/kernel/shmmax</span></span></code> </pre> <br>  25. Reiniciar: <br><br><pre> <code class="hljs perl">$reboot</code> </pre> <br>  26. Ir a Zoneminder: <br><br><pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//192.168.110.151/zm</span></span></code> </pre> <br>  27. En la consola, haga clic en el botón "Opciones" <br>  LANG_DEFAULT Idioma predeterminado utilizado por la interfaz web, establezca el valor en "ru_ru" <br>  La capacidad de ver la interfaz rusa. <br><br><img src="https://habrastorage.org/storage3/f96/09f/eeb/f9609feebfae5c921ad543de72132fb4.jpeg"><br><br>  28. Haga clic en agregar monitor. <br><br>  29. Y llena las dos columnas con opciones. <br><br><img src="https://habrastorage.org/storage3/57d/06b/dd4/57d06bdd4ebc09a0c724b2978cfbaeaa.jpeg"><br><br><img src="https://habrastorage.org/storage3/a77/a4b/145/a77a4b145f77afdbb908830c0e9ec9ae.jpeg"><br><br>  30. Cuando veamos el monitor, lo más probable es que veamos una pantalla negra, después de jugar con las opciones, es posible ver la imagen, pero con gran interferencia. <br><br>  31. Cómo resolver este problema lo describiré en el siguiente párrafo, configurando cámaras. <br><br>  32. Con las cámaras IP, todo es un poco más fácil, vamos a la consola de administración de nuestra cámara IP, necesitamos tres parámetros: 1) nombre de usuario y contraseña para acceder a la cámara a través de http, 2) la ruta a la cámara, 3) su resolución. <br><br>  33. Vamos a la consola de control de la cámara a través del navegador: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">192.168.107.103</a> <br><br>  34. Agregue un nuevo usuario (por ejemplo, prueba con la prueba de contraseña): <br><br><img src="https://habrastorage.org/storage3/f68/a6d/cc8/f68a6dcc84570b296e16fcb0440eb59e.jpeg"><br><br>  35. Buscamos permiso: <br><br><img src="https://habrastorage.org/storage3/b05/3b8/0b6/b053b80b64b1443b0fc5fe8aad03d761.jpeg"><br><br>  Sí, lo tenemos 320x240. <br><br>  36. Ahora miramos el camino hacia la cámara&gt; <br><br><img src="https://habrastorage.org/storage3/99e/e1a/956/99ee1a95673d3607a3b758c26961a853.jpeg"><br><br>  37. Haga clic en Zoneminder, "Agregar monitor".  Ingresamos las siguientes opciones en las pestañas "General" y "Fuente": <br><br><img src="https://habrastorage.org/storage3/814/64a/f1f/81464af1f34f04b9284aed1eeafb62e7.jpeg"><br><br><img src="https://habrastorage.org/storage3/0c9/a45/039/0c9a450399eb4d05bd5fc8a57704df17.jpeg"><br><br>  3) Configuración de cámaras analógicas en una tarjeta de captura de video de puente PCI: Puente Hint Corp HiNT HB4 PCI-PCI (PCI6150). <br><br>  1. Instale los siguientes paquetes: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$apt</span></span><span class="hljs-literal"><span class="hljs-literal">-get</span></span> install v4l<span class="hljs-literal"><span class="hljs-literal">-conf</span></span> libv4l<span class="hljs-literal"><span class="hljs-literal">-0</span></span> v4l2ucp v4l<span class="hljs-literal"><span class="hljs-literal">-conf</span></span> v4l<span class="hljs-literal"><span class="hljs-literal">-utils</span></span></code> </pre> <br>  2. Observamos si nuestros dispositivos de video fueron definidos: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$ls</span></span> <span class="hljs-literal"><span class="hljs-literal">-l</span></span> /dev/video*</code> </pre> <br>  Debe llegar a una conclusión. <br><br><pre> <code class="hljs powershell">crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video0 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video1 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video2 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video3 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video4 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video5 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>  <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span> /dev/video6 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video7</code> </pre> <br>  Entonces, nuestros dispositivos de salida de video analógico están definidos en el sistema. <br><br>  3. Observamos la información sobre nuestro dispositivo (todos los dispositivos de video analógico se almacenan en el formulario / dev / video): <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$v4l</span></span><span class="hljs-literal"><span class="hljs-literal">-info</span></span> /dev/video0 | head <span class="hljs-literal"><span class="hljs-literal">-n</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> | grep <span class="hljs-string"><span class="hljs-string">"^card"</span></span></code> </pre> <br>  Obtenemos la siguiente conclusión: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">card</span></span> : <span class="hljs-string"><span class="hljs-string">"BT878 video ( *** UNKNOWN/GENER"</span></span></code> </pre> <br>  Esa fue la razón por la cual nuestro dispositivo no se mostraba correctamente en Zoneminder.  Esto no es bueno porque  los parámetros del controlador de nuestro dispositivo no se pasan al kernel, buscamos más allá. <br><br>  4. Necesitamos descargar el módulo: <br><br><pre> <code class="hljs perl">$rmmod bttv</code> </pre> <br>  5. Lo que obtenemos una respuesta no afirmativa: <br><br><pre> <code class="hljs vhdl"><span class="hljs-literal"><span class="hljs-literal">Error</span></span>: Module bttv <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span></code> </pre> <br>  Pasé mucho tiempo reconstruyendo el núcleo y otras basuras, la respuesta fue simple.  Se utilizó nuestro dispositivo analógico, y fue utilizado por el DVR, así que lo que hacemos. <br><br>  6. Detenga el zoneminder: <br><br><pre> <code class="hljs swift">$/etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/zoneminder /stop</code> </pre> <br>  7. Intentamos descargar el módulo: <br><br><pre> <code class="hljs perl">$rmmod bttv</code> </pre> <br>  8. Como puede ver, se tragó el comando normalmente, así que tratamos de pasar los parámetros al núcleo manualmente: <br><br><pre> <code class="hljs powershell">modprobe <span class="hljs-literal"><span class="hljs-literal">-v</span></span> bttv card=<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69 tuner=<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span> autoload=<span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  9. Observamos la información sobre nuestro dispositivo (todos los dispositivos de video analógico se almacenan en el formulario / dev / video): <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$v4l</span></span><span class="hljs-literal"><span class="hljs-literal">-info</span></span> /dev/video0 | head <span class="hljs-literal"><span class="hljs-literal">-n</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> | grep <span class="hljs-string"><span class="hljs-string">"^card"</span></span></code> </pre> <br>  Y ahora tenemos la siguiente conclusión: <br><br><pre> <code class="hljs">card: “BT878 video (ProVideo PV143)”</code> </pre> <br>  Lo que significa que todo salió bien y los controladores aplicaron. <br><br>  10. Por si acaso, damos derechos a las cámaras: <br><br><pre> <code class="hljs perl">$chmod a+rwx /dev/video*</code> </pre> <br>  11. Inicie Zoneminder: <br><br><pre> <code class="hljs swift">$/etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.dzoneminder start</code> </pre> <br>  12. Vaya a Zoneminder: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">192.168.110.151/zm</a> <br><br>  Verificamos nuestra cámara analógica y podemos asegurarnos de que todo está bien con la imagen y podemos observarla fácilmente en nuestro DVR.  Además, todo esto es necesario para nosotros automáticamente, para que se eleve en el núcleo, sin inicio manual. <br><br>  13. Cree el archivo bttv.conf: <br><br><pre> <code class="hljs swift">$nano /et <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>/modprobe.d/bttv.conf</code> </pre> <br>  14. Inserte el siguiente contenido en él: <br><br><pre> <code class="hljs powershell">alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-0</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-1</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-2</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-3</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-4</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-6</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-7</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-8</span></span> bttv options bttv card=<span class="hljs-number"><span class="hljs-number">0</span></span>x69 tuner=<span class="hljs-literal"><span class="hljs-literal">-1</span></span> autoload=<span class="hljs-number"><span class="hljs-number">0</span></span> i2c_scan=<span class="hljs-number"><span class="hljs-number">0</span></span> i2c_hw=<span class="hljs-literal"><span class="hljs-literal">-1</span></span> options bttv card=<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69 tuner=<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span> autoload=<span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  15. Reiniciar: <br><br><pre> <code class="hljs perl">$reboot</code> </pre> <br>  16. Admiramos el resultado: <br><br><img src="https://habrastorage.org/storage3/d0a/688/cbd/d0a688cbd5462eaf808c5e24e971c9cf.jpeg"><br><br>  4) Posibles problemas que deberán encontrarse al realizar mi CÓMO. <br><br>  1. Fuente rusa en la consola: <br><br>  • en cualquier editor de texto con privilegios de root, agregue la línea FRAMEBUFFER = Y al archivo /etc/initramfs-tools/initramfs.conf.  También puede hacerlo ejecutando los siguientes comandos: <br><br><pre> <code class="hljs ruby">$sudo -i $echo <span class="hljs-string"><span class="hljs-string">'FRAMEBUFFER=Y'</span></span> <span class="hljs-meta"><span class="hljs-meta">&gt;&gt; </span></span>/etc/initramfs-tools/initramfs.conf $exit</code> </pre> <br>  • Actualice la imagen de ramdisk del período de inicialización del núcleo (initrd): <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$update</span></span><span class="hljs-literal"><span class="hljs-literal">-initramfs</span></span> –u</code> </pre> <br>  • Campo de estas configuraciones de manipulaciones realizadas por el comando: <br><br><pre> <code class="hljs powershell">sudo dpkg<span class="hljs-literal"><span class="hljs-literal">-reconfigure</span></span> console<span class="hljs-literal"><span class="hljs-literal">-setup</span></span></code> </pre> <br>  • finalmente comenzará a funcionar: todo se mostrará en fuentes rusas desde el principio, es decir,  incluso una solicitud de verificación de discos (que surge en el proceso de inicialización del núcleo) se mostrará en cirílico en lugar de cuadrados. <br><br>  2. Ubuntu no ve el monitor. <br><br>  No todos los tipos de monitores ven Ubuntu después de la instalación, la mayoría de las veces verá “Modo no óptimo de 1024x768.  Modo óptimo 1240 x 860 ": <br><br>  • Vaya a / etc / default / grub <br>  • Eliminar el comentario de la línea <br><br><pre> <code class="hljs">GRUB_GFXMODE=640x480</code> </pre> <br>  • Actualización del gestor de arranque <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$update</span></span><span class="hljs-literal"><span class="hljs-literal">-grub</span></span></code> </pre> <br>  • reiniciar el sistema <br><br><pre> <code class="hljs perl">$reboot</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">3) Fuentes que se utilizaron para implementar este proyecto</b> <div class="spoiler_text">  Ubuntu <br><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.ithowto.ru/666-ustanovka-ubuntu-12-04-server.html</a> <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">softnastroy.com/content/instrukciya-po-ustanovke-ubuntu-1204-lts-server-c-podrobnymi-skrinshotami.html</a> <br>  3. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">help.ubuntu.ru/wiki/russian_font_in_console</a> <br><br>  Problemas de cámara <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">4.avreg.net/howto_linux-capture-cards.html</a> <br>  5. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.lecam.ru/articles/avreg</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">6.devhead.ru/read/organizaciya-videonablyudeniya-zoneminder-ubuntu</a> <br>  7. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.linuxtv.org/wiki/index.php/Bttv_devices_%28bt848</a> , _bt878% 29 # Driver <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">8.www.zoneminder.com/wiki/index.php/Ubuntu_9.04_%28Jaunty%29_desktop_with_graphical_interface</a> <br>  9. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">forum.ubuntu.ru/index.php?topic=30146.0</a> <br>  10. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">unixforum.org/index.php?showtopic=117969</a> <br><br>  Zoneminder <br><br>  11. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.zoneminder.com/wiki/index.php/Ubuntu_Server_12.04_64-bit_with_Zoneminder_1.25.0_the_easy_way</a> <br>  12. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">blog.sighworld.com/page/3</a> </div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es416125/">https://habr.com/ru/post/es416125/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es416113/index.html">Steven Wolfram: Memorias de Steve Jobs</a></li>
<li><a href="../es416115/index.html">10 pequeños errores de diseño que aún cometemos</a></li>
<li><a href="../es416119/index.html">Publicación del viernes el miércoles: los mejores paquetes de NPM más "esenciales"</a></li>
<li><a href="../es416121/index.html">Fujitsu Artificial Intelligence calcula la geometría de los materiales magnéticos.</a></li>
<li><a href="../es416123/index.html">Reconocimiento de productos en estanterías que utilizan redes neuronales que utilizan las tecnologías API Keras y Tensorflow Object Detection</a></li>
<li><a href="../es416127/index.html">CUDA y GPU remota</a></li>
<li><a href="../es416129/index.html">Cómo AI aprende a generar imágenes de gatos</a></li>
<li><a href="../es416131/index.html">Cómo manejar la EP en la Federación de Rusia y no violar la ley</a></li>
<li><a href="../es416135/index.html">Aplicación GUI menor a 1 kb</a></li>
<li><a href="../es416137/index.html">Zabbix como escáner de seguridad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>