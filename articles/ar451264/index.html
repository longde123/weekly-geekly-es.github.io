<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ป ๐ ๐ด ุงูุชุทุจูู ุงูุนููู ูู ELK. ุชูููู logstash ๐๏ธ ๐๐ฟ ๐๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ 
 ูุดุฑ ุงููุธุงู ุงูุชุงูู ุ ูู ููุงุฌูุฉ ุงูุญุงุฌุฉ ุฅูู ูุนุงูุฌุฉ ุนุฏุฏ ูุจูุฑ ูู ุงูุณุฌูุงุช ุงููุฎุชููุฉ. ููุง ุงุฎุชุงุฑุช ุงูุฃุฏุงุฉ ELK. ูุฐู ุงูููุงูุฉ ุณูู ุชูุงูุด ุชุฌุฑุจุชูุง ูุน ุถุจุท ูุฐุง ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุชุทุจูู ุงูุนููู ูู ELK. ุชูููู logstash</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451264/" style=";text-align:right;direction:rtl"><h1 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h1><br>  ูุดุฑ ุงููุธุงู ุงูุชุงูู ุ ูู ููุงุฌูุฉ ุงูุญุงุฌุฉ ุฅูู ูุนุงูุฌุฉ ุนุฏุฏ ูุจูุฑ ูู ุงูุณุฌูุงุช ุงููุฎุชููุฉ.  ููุง ุงุฎุชุงุฑุช ุงูุฃุฏุงุฉ ELK.  ูุฐู ุงูููุงูุฉ ุณูู ุชูุงูุด ุชุฌุฑุจุชูุง ูุน ุถุจุท ูุฐุง ุงูููุฏุณ. <br><br>  ูุญู ูุง ูุถุน ูุฏููุง ููุตู ุฌููุน ุฅููุงููุงุชู ุ ููููุง ูุฑูุฏ ุงูุชุฑููุฒ ุจุฏูุฉ ุนูู ุญู ุงููุดููุงุช ุงูุนูููุฉ.  ููุฑุฌุน ุฐูู ุฅูู ุญูููุฉ ุฃูู ูู ูุฌูุฏ ูููุฉ ูุจูุฑุฉ ุจูุง ูููู ูู ุงููุซุงุฆู ูุงูุตูุฑ ุงูุฌุงูุฒุฉ ุ ููุงู ุงููุซูุฑ ูู ุงููุฒุงูู ุ ุนูู ุงูุฃูู ูุฌุฏูุงูุง. <br><a name="habracut"></a><br>  ูุดุฑูุง ุงูููุฏุณ ุนุจุฑ ุนุงูู ุงููููุงุก.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุงู ูุฏููุง ุนุงูู ุชุฑุณูู compose.yml ููุชูุจ ุฌูุฏูุง ุ ูุงูุฐู ุณูุญ ููุง ุจุฑูุน ุงูุฑุตุฉ ุฏูู ุฃู ูุดุงูู ุชูุฑูุจูุง.  ูุจุฏุง ููุง ุฃู ุงููุตุฑ ูุงู ูุฑูุจูุง ุจุงููุนู ุ ูุงูุขู ุณูุญุฑู ููููุงู ูุชูุงุณุจ ุงุญุชูุงุฌุงุชูุง ููุฐุง ูู ุดูุก. <br><br>  ูุณูุก ุงูุญุธ ุ ูุฅู ูุญุงููุฉ ุถุจุท ุงููุธุงู ูุชููู ุงูุณุฌูุงุช ููุนุงูุฌุชูุง ูู ุชุทุจูููุง ูู ุชุชูุฌ ุจุงููุฌุงุญ.  ูุฐูู ุ ูุฑุฑูุง ุฃู ุงูุฃูุฑ ูุณุชุญู ุงุณุชูุดุงู ูู ูููู ุนูู ุญุฏุฉ ุ ุซู ุงูุนูุฏุฉ ุฅูู ุนูุงูุงุชูู. <br><br>  ูุฐูู ุ ุจุฏุฃูุง ูุน logstash. <br><br><h1 style=";text-align:right;direction:rtl">  ุงูุจูุฆุฉ ุ ุงููุดุฑ ุ ุฅุทูุงู Logstash ูู ุงูุญุงููุฉ </h1><br>  ุจุงููุณุจุฉ ูููุดุฑ ุ ูุณุชุฎุฏู ุนุงูู ุงูุชุซุจูุช ุ ููุฏ ุฃุฌุฑูุช ุงูุชุฌุงุฑุจ ุงูููุตููุฉ ููุง ุนูู ูุธุงูู MacOS ู Ubuntu 18.0.4. <br><br>  ุตูุฑุฉ logstash ุงูุชู ุชู ุชุณุฌูููุง ูุนูุง ูู ุนุงูู ุงูุชุญููู ุงูุฃุตูู - compose.yml ูู docker.elastic.co/logstash/logstash:6.3.2 <br><br>  ุณูู ูุณุชุฎุฏููุง ููุชุฌุงุฑุจ. <br><br>  ูุชุดุบูู logstash ุ ูุชุจูุง ูููุตูุฉ ุนุงูู ูููุงุก compose.yml.  ุจุงูุทุจุน ุ ูุงู ูู ุงููููู ุฅุทูุงู ุงูุตูุฑุฉ ูู ุณุทุฑ ุงูุฃูุงูุฑ ุ ููููุง ูููุง ุจุญู ูุดููุฉ ูุนููุฉ ุ ุญูุซ ุชู ุฅุทูุงู ูู ุดูุก ูู ุนุงูู ุงูุชุฃุณูุณ. <br><br><h2 style=";text-align:right;direction:rtl">  ููุชุฑุฉ ูุฌูุฒุฉ ุญูู ูููุงุช ุงูุชูููู </h2><br>  ุนูู ุงููุญู ุงูุชุงูู ูู ุงููุตู ุ ูููู ุชุดุบูู logstash ุนูู ุญุฏ ุณูุงุก ูููุงุฉ ูุงุญุฏุฉ ุ ูู ูุฐู ุงูุญุงูุฉ ุ ุชุญุชุงุฌ ุฅูู ููู ููู * .conf ุฃู ูุนุฏุฉ ูููุงุช ุ ูู ูุฐู ุงูุญุงูุฉ ุ ูุฌุจ ููู ููู pipelines.yml ุ ูุงูุฐู ุจุฏูุฑู ุณูุฑุจุท ุจุงููููุงุช .conf ููู ููุงุฉ. <br>  ุฐูุจูุง ูู ุงูุทุฑูู ุงูุซุงูู.  ุจุฏุง ููุง ุฃูุซุฑ ุนุงูููุฉ ููุงุจูุฉ ููุชุทููุฑ.  ูุฐูู ุ ุฃูุดุฃูุง pipelines.yml ุ ููููุง ุจุฅูุดุงุก ุฏููู ุฎุทูุท ุงูุฃูุงุจูุจ ุงูุฐู ุณูุถุน ููู ูููุงุช .conf ููู ููุงุฉ. <br><br>  ุฏุงุฎู ุงูุญุงููุฉ ููุฌุฏ ููู ุชูููู ุขุฎุฑ - logstash.yml.  ูุญู ูุง ูููุณูุง ุ ุงุณุชุฎุฏููุง ููุง ูู. <br><br>  ูุฐูู ุ ูููู ุงูุฏูุงุฆู ูุฏููุง: <br><br><img src="https://habrastorage.org/webt/ci/zd/49/cizd49eci9alvlbi1fwk8nyyaky.png"><br><br>  ููุญุตูู ุนูู ุงููุฏุฎูุงุช ุ ูู ุงูููุช ุงูุญุงูู ุ ูุนุชูุฏ ุฃูู ุจุฑูุงูุฌ tcp ุนูู ุงููููุฐ 5046 ุ ููุฃูู ุณูู ูุณุชุฎุฏู stdout. <br><br>  ููุง ูู ูุซู ูุฐุง ุงูุชูููู ุงูุจุณูุท ูุฃูู ูุฑุฉ.  ููุฐ ุงููููุฉ ุงูุฃููู ูู ุฅุทูุงู. <br><br>  ูุฐูู ุ ูุฏููุง ูุฐุง ุนุงูู ูููุงุก compose.yml <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">version: '3' networks: elk: volumes: elasticsearch: driver: local services: logstash: container_name: logstash_one_channel image: docker.elastic.co/logstash/logstash:6.3.2 networks: - elk ports: - 5046:5046 volumes: - ./config/pipelines.yml:/usr/share/logstash/config/pipelines.yml:ro - ./config/pipelines:/usr/share/logstash/config/pipelines:ro</code> </pre> <br>  ูุงุฐุง ูุฑู ููุงุ <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชู ุฃุฎุฐ ุงูุดุจูุงุช ูุงููุฌูุฏุงุช ูู ุนุงูู ุงูุชุฑุณูู ุงูุฃุตูู compose.yml (ูุงุญุฏ ุญูุซ ุชู ุฅุทูุงู ุงูููุฏุณ ุจุงููุงูู) ูุฃุนุชูุฏ ุฃููุง ูุง ุชุคุซุฑ ุจุดูู ูุจูุฑ ุนูู ุงูุตูุฑุฉ ุงูุนุงูุฉ ููุง. </li><li style=";text-align:right;direction:rtl">  ูููู ุจุฅูุดุงุก ุฎุฏูุฉ logstash ูุงุญุฏุฉ ูู ุตูุฑุฉ docker.elastic.co/logstash/logstash:6.3.2 ูููุญูุง ุงุณู logstash_one_channel. </li><li style=";text-align:right;direction:rtl">  ูููู ุจุฅุนุงุฏุฉ ุชูุฌูู ุงููููุฐ 5046 ุฏุงุฎู ุงูุญุงููุฉ ุฅูู ููุณ ุงููููุฐ ุงูุฏุงุฎูู. </li><li style=";text-align:right;direction:rtl">  ูููู ุจุชุนููู ููู ุฅุนุฏุงุฏุงุช ููุงุชูุง ./config/pipelines.yml ุฅูู ุงูููู /usr/share/logstash/config/pipelines.yml ุฏุงุฎู ุงูุญุงููุฉ ุ ุญูุซ ุณูููู logstash ุจุงุณุชูุงูู ูุฌุนูู ูููุฑุงุกุฉ ููุท ุ ูู ุญุงูุฉ ุญุฏูุซ ุฐูู. </li><li style=";text-align:right;direction:rtl">  ูุนุฑุถ ุฏููู ./config/pipelines ุ ุญูุซ ูุฏููุง ูููุงุช ุฅุนุฏุงุฏุงุช ุงูููุงุฉ ุ ูู ุฏููู / usr / share / logstash / config / pipelines ููุฌุนูู ุฃูุถูุง ูููุฑุงุกุฉ ููุท. </li></ol><br><img src="https://habrastorage.org/webt/5u/s3/dw/5us3dwu8forutzwmtlfnlcjt-ic.png"><br><br>  ููู Pipelines.yml <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">- pipeline.id: HABR pipeline.workers: 1 pipeline.batch.size: 1 path.config: "./config/pipelines/habr_pipeline.conf"</code> </pre><br>  ููุง ุ ูุชู ูุตู ููุงุฉ ูุงุญุฏุฉ ูุน ูุนุฑู HABR ูุงููุณุงุฑ ุฅูู ููู ุงูุชูููู ุงูุฎุงุต ุจูุง. <br><br>  ูุฃุฎูุฑุงู ุงูููู "./config/pipelines/habr_pipeline.conf" <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">input { tcp { port =&gt; "5046" } } filter { mutate { add_field =&gt; [ "habra_field", "Hello Habr" ] } } output { stdout { } }</code> </pre><br>  ุฏุนููุง ูุง ูุฐูุจ ุฅูู ูุตูู ุงูุขู ุ ุญุงูู ุฃู ุชุฌุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">docker-compose up</code> </pre><br>  ูุงุฐุง ูุฑูุ <br><br>  ุจุฏุฃุช ุงูุญุงููุฉ.  ูููููุง ุงูุชุญูู ูู ุนูููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'13123123123123123123123213123213'</span></span> | nc localhost 5046</code> </pre><br>  ููุญู ูุฑู ุงูุฌูุงุจ ูู ูุญุฏุฉ ุงูุชุญูู ูู ุงูุญุงููุฉ: <br><br><img src="https://habrastorage.org/webt/uj/oy/tz/ujoytzcsc_mmiagm05savxahnzm.jpeg"><br><br>  ููู ูู ุงูููุช ููุณู ุ ูุฑู ุฃูุถูุง: <br><br>  <font color="ยซ#38B9C7ยป">logstash_one_channel |</font>  [2019-04-29T11: 28: 59ุ790] <font color="ยซCC0000ยป">[ุฎุทุฃ] [logstash.licensechecker.licensereader] ุบูุฑ ูุงุฏุฑ ุนูู ุงุณุชุฑุฏุงุฏ ูุนูููุงุช ุงูุชุฑุฎูุต ูู ุฎุงุฏู ุงูุชุฑุฎูุต {: message =&gt; "Elasticsearch Unreachable: [http: // elasticsearch: 9200 /]</font> [Manticore :: ResolutionFailure] elasticsearch "ุ ... <br><br>  <font color="ยซ#38B9C7ยป">logstash_one_channel |</font>  [2019-04-29T11: 28: 59ุ894] [INFO] [logstash.pipeline] <font color="green">ุจุฏุฃ ุชุดุบูู ุฎุท ุงูุฃูุงุจูุจ ุจูุฌุงุญ</font> {: pipeline_id =&gt; ". Monitoring-logstash" ุ: thread =&gt; "# &lt;Thread: 0x119abb86 run&gt;"} <br><br>  <font color="ยซ#38B9C7ยป">logstash_one_channel |</font>  [2019-04-29T11: 28: 59ุ988] [INFO] [logstash.agent] ุฎุทูุท ุงูุฃูุงุจูุจ ุงูุชู ุชุดุบู {: count =&gt; 2 ุ: running_pipelines =&gt; [: HABR ุ: ". Monitoring-logstash"] ุ: non_running_pipelines =&gt; [ ]} <br>  <font color="ยซ#38B9C7ยป">logstash_one_channel |</font>  [2019-04-29T11: 29: 00ุ015] <font color="ยซCC0000ยป">[ุฎุทุฃ] [logstash.inputs.metrics] ุชู ุชุซุจูุช X-Pack ุนูู Logstash ูููู ููุณ ุนูู Elasticsearch.</font>  <font color="ยซCC0000ยป">ุงูุฑุฌุงุก ุชุซุจูุช X-Pack ุนูู Elasticsearch ูุงุณุชุฎุฏุงู ููุฒุฉ ุงููุฑุงูุจุฉ.</font>  <font color="ยซCC0000ยป">ููุฒุงุช ุฃุฎุฑู ูุฏ ุชููู ูุชุงุญุฉ.</font> <br>  <font color="ยซ#38B9C7ยป">logstash_one_channel |</font>  [2019-04-29T11: 29: 00ุ526] [INFO] [logstash.agent] ุชู ุงูุจุฏุก ุจูุฌุงุญ ูู ููุทุฉ ููุงูุฉ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช Logstash {: port =&gt; 9600} <br>  <font color="ยซ#38B9C7ยป">logstash_one_channel |</font>  [2019-04-29T11: 29: 04ุ478] [INFO] [logstash.outputs.elasticsearch] ุชุดุบูู ุงูุชุญูู ูู ุงูุตุญุฉ ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงุชุตุงู Elasticsearch ูุนูู {: healthcheck_url =&gt; http: // elasticsearch: 9200 / ุ: path =&gt; "/"} <br>  ู <font color="ยซ#38B9C7ยป">ogstash_one_channel |</font>  [2019-04-29T11: 29: 04ุ487] <font color="orange">[WARN] [logstash.outputs.elasticsearch] ุญุงูู ุฅุนุงุฏุฉ ุฅุญูุงุก ุงูุงุชุตุงู ุจูุซุงู ES ุงูููุช ุ ููู ุญุตู ุฎุทุฃ.</font>  <font color="orange">{: url =&gt; "elasticsearch: 9200 /" ุ: error_type =&gt; LogStash :: ุงููุฎุฑุฌุงุช :: ElasticSearch :: HttpClient :: Pool :: HostUnreachableError ุ: error =&gt; "Elasticsearch Unreachable: [http: // elasticsearch: 9200 / ] [Manticore :: ResolutionFailure] elasticsearch โ}</font> <br>  <font color="ยซ#38B9C7ยป">logstash_one_channel |</font>  [2019-04-29T11: 29: 04ุ704] [INFO] [logstash.licensechecker.licensereader] ุฅุฌุฑุงุก ูุญุต ุตุญู ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงุชุตุงู Elasticsearch ูุนูู {: healthcheck_url =&gt; http: // elasticsearch: 9200 / ุ: path =&gt; "/"} <br>  <font color="ยซ#38B9C7ยป">logstash_one_channel |</font>  [2019-04-29T11: 29: 04ุ710] <font color="orange">[WARN] [logstash.licensechecker.licensereader] ุญุงูู ุฅุนุงุฏุฉ ุฅุญูุงุก ุงูุงุชุตุงู ุจูุซุงู ES ุงูููุช ุ ููู ุญุตู ุฎุทุฃ.</font>  <font color="orange">{: url =&gt; "elasticsearch: 9200 /" ุ: error_type =&gt; LogStash :: ุงููุฎุฑุฌุงุช :: ElasticSearch :: HttpClient :: Pool :: HostUnreachableError ุ: error =&gt; "Elasticsearch Unreachable: [http: // elasticsearch: 9200 / ] [Manticore :: ResolutionFailure] elasticsearch โ}</font> <br><br>  ูุณุฌููุง ูุฒุญู ุทูุงู ุงูููุช. <br><br>  ุฃุจุฑุฒุช ููุง ุจุงูููู ุงูุฃุฎุถุฑ ุฑุณุงูุฉ ุชููุฏ ุจุฃู ุฎุท ุงูุฃูุงุจูุจ ุจุฏุฃ ุจูุฌุงุญ ุ ุฑุณุงูุฉ ุญูุฑุงุก - ุฑุณุงูุฉ ุฎุทุฃ ูุตูุฑุงุก - ุฑุณุงูุฉ ุญูู ูุญุงููุฉ ุงูุงุชุตุงู ุจู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">elasticsearch</a> : 9200. <br>  ูุญุฏุซ ูุฐุง ูุฃู logstash.conf ุงููุถููุฉ ูู ุงูุตูุฑุฉ ูุฏูู ูุญุต ููุชุญูู ูู ุชููุฑ elasticsearch.  ุจุนุฏ ูู ุดูุก ุ ููุชุฑุถ logstash ุฃูู ูุนูู ูุฌุฒุก ูู ููุฏุณ Elk ุ ููููุง ุจูุตูู. <br><br>  ููููู ุงูุนูู ุ ูููู ููุณุช ูุฑูุญุฉ. <br><br>  ูููู ุงูุญู ูู ุชุนุทูู ูุฐุง ุงููุญุต ูู ุฎูุงู ูุชุบูุฑ ุงูุจูุฆุฉ XPACK_MONITORING_ENABLED. <br><br>  ูู ุจุฅุฌุฑุงุก ุชุบููุฑ ุนูู docker-compose.yml ูุชุดุบููู ูุฑุฉ ุฃุฎุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">version: '3' networks: elk: volumes: elasticsearch: driver: local services: logstash: container_name: logstash_one_channel image: docker.elastic.co/logstash/logstash:6.3.2 networks: - elk environment: XPACK_MONITORING_ENABLED: "false" ports: - 5046:5046 volumes: - ./config/pipelines.yml:/usr/share/logstash/config/pipelines.yml:ro - ./config/pipelines:/usr/share/logstash/config/pipelines:ro</code> </pre><br>  ุงูุขู ุ ูู ุดูุก ุนูู ูุง ูุฑุงู.  ุงูุญุงููุฉ ุฌุงูุฒุฉ ููุชุฌุฑูุจ. <br><br>  ูููููุง ูุฑุฉ ุฃุฎุฑู ุงููุชุงุจุฉ ูู ูุญุฏุฉ ุงูุชุญูู ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'13123123123123123123123213123213'</span></span> | nc localhost 5046</code> </pre><br>  ูุงูุธุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">logstash_one_channel | { logstash_one_channel | "message" =&gt; "13123123123123123123123213123213", logstash_one_channel | "@timestamp" =&gt; 2019-04-29T11:43:44.582Z, logstash_one_channel | "@version" =&gt; "1", logstash_one_channel | "habra_field" =&gt; "Hello Habr", logstash_one_channel | "host" =&gt; "gateway", logstash_one_channel | "port" =&gt; 49418 logstash_one_channel | }</code> </pre><br><h1 style=";text-align:right;direction:rtl">  ุงูุนูู ุฏุงุฎู ููุงุฉ ูุงุญุฏุฉ </h1><br>  ูุฐูู ุ ุจุฏุฃูุง.  ุงูุขู ููููู ุจุงููุนู ูุถุงุก ุงูููุช ูุชูููู logstash ูุจุงุดุฑุฉ.  ูู ูููุณ ููู pipelines.yml ุงูุขู ุ ูุณูุฑู ูุง ููููู ุงูุญุตูู ุนููู ูู ุฎูุงู ุงูุนูู ูุน ููุงุฉ ูุงุญุฏุฉ. <br><br>  ูุฌุจ ุฃู ุฃููู ุฃู ุงููุจุฏุฃ ุงูุนุงู ููุนูู ูุน ููู ุชูููู ุงูููุงุฉ ููุตูู ุฌูุฏูุง ูู ุงูุฏููู ุงูุฑุณูู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> <br>  ุฅุฐุง ููุช ุชุฑูุฏ ุงููุฑุงุกุฉ ุจุงููุบุฉ ุงูุฑูุณูุฉ ุ ููุฏ ุงุณุชุฎุฏููุง ูุฐู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ ููุง</a> (ูููู ุจูุงุก ุฌููุฉ ุงูุงุณุชุนูุงู ูุฏูู ููุงู ุ ูุฌุจ ุฃู ูุฃุฎุฐ ุฐูู ูู ุงูุงุนุชุจุงุฑ). <br><br>  ุฏุนูุง ูุฐูุจ ุจุงูุชุชุงุจุน ูู ูุณู ุงูุฅุฏุฎุงู.  ููุฏ ุฑุฃููุง ุจุงููุนู ุงูุนูู ุนูู ุจุฑูุงูุฌ ุงูุชุนุงูู ุงูููู.  ูุงุฐุง ูููู ุฃู ูููู ููุถุน ุงูุชูุงู ููุงุ <br><br><h2 style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงูุฑุณุงุฆู ุจุงุณุชุฎุฏุงู ูุจุถุงุช </h2><br>  ููุงู ูุฑุตุฉ ูุซูุฑุฉ ููุงูุชูุงู ูุฅูุดุงุก ุฑุณุงุฆู ุงุฎุชุจุงุฑ ุชููุงุฆูุฉ. <br>  ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุถููู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ heartbean ูู ูุณู ุงูุฅุฏุฎุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">input { heartbeat { message =&gt; "HeartBeat!" } }</code> </pre><br>  ุจุฏูุฑู ุ ุชุจุฏุฃ ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุฏูููุฉ ูุชููู <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">logstash_one_channel | { logstash_one_channel | "@timestamp" =&gt; 2019-04-29T13:52:04.567Z, logstash_one_channel | "habra_field" =&gt; "Hello Habr", logstash_one_channel | "message" =&gt; "HeartBeat!", logstash_one_channel | "@version" =&gt; "1", logstash_one_channel | "host" =&gt; "a0667e5c57ec" logstash_one_channel | }</code> </pre><br>  ูุฑูุฏ ุงูุญุตูู ุนูู ุฃูุซุฑ ูู ูุฑุฉ ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุงููุนููุฉ ุงููุงุตู. <br>  ููุฐุง ูุชููู ุฑุณุงูุฉ ูู 10 ุซูุงูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">input { heartbeat { message =&gt; "HeartBeat!" interval =&gt; 10 } }</code> </pre><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชุฑุฏุงุฏ ุงูุจูุงูุงุช ูู ููู </h2><br>  ูุฑุฑูุง ุฃูุถูุง ุฑุคูุฉ ูุถุน ุงูููู.  ุฅุฐุง ูุงู ูุนูู ุจุดูู ุทุจูุนู ูุน ุงูููู ุ ููู ุงููุญุชูู ุฃูู ูู ุชููู ููุงู ุญุงุฌุฉ ุฅูู ูููู ุ ุญุณููุง ุ ุนูู ุงูุฃูู ููุงุณุชุฎุฏุงู ุงููุญูู. <br><br>  ููููุง ูููุตู ุ ูุฌุจ ุฃู ูููู ูุถุน ุงูุชุดุบูู ูุดุงุจููุง ููุฐูู -f ุ ุนูู ุณุจูู ุงููุซุงู  ููุฑุฃ ุงูุฃุณุทุฑ ุงูุฌุฏูุฏุฉ ุฃู ุ ูุฎูุงุฑ ุ ููุฑุฃ ุงูููู ุจุฃูููู. <br><br>  ุฅุฐู ูุง ูุฑูุฏ ุงูุญุตูู ุนููู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฑูุฏ ุงูุญุตูู ุนูู ุฎุทูุท ูุชู ุฅูุญุงููุง ุจููู ุณุฌู ูุงุญุฏ. </li><li style=";text-align:right;direction:rtl">  ูุฑูุฏ ุชููู ุงูุจูุงูุงุช ุงูููุชูุจุฉ ุฅูู ุนุฏุฉ ูููุงุช ุณุฌู ุ ูุน ุงูุชููู ูู ูุดุงุฑูุฉ ูุง ุฌุงุก ูููุง. </li><li style=";text-align:right;direction:rtl">  ูุฑูุฏ ุงูุชุญูู ูู ุฃูู ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู logstash ุ ูู ุชุชููู ูุฐู ุงูุจูุงูุงุช ูุฑุฉ ุฃุฎุฑู. </li><li style=";text-align:right;direction:rtl">  ูุฑูุฏ ุงูุชุญูู ูู ุฃูู ูู ุญุงูุฉ ุชุนุทูู logstash ุ ูุงุณุชูุฑุงุฑ ูุชุงุจุฉ ุงูุจูุงูุงุช ุฅูู ุงููููุงุช ุ ูุนูุฏ ุชุดุบูููุง ุ ุณูุญุตู ุนูู ูุฐู ุงูุจูุงูุงุช. </li></ol><br>  ูุฅุฌุฑุงุก ุงูุชุฌุฑุจุฉ ุ ุฃุถู ุณุทุฑูุง ุขุฎุฑ ุฅูู docker-compose.yml ุ ูุงูุชุญ ุงูุฏููู ุงูุฐู ูุถุน ููู ุงููููุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">version: '3' networks: elk: volumes: elasticsearch: driver: local services: logstash: container_name: logstash_one_channel image: docker.elastic.co/logstash/logstash:6.3.2 networks: - elk environment: XPACK_MONITORING_ENABLED: "false" ports: - 5046:5046 volumes: - ./config/pipelines.yml:/usr/share/logstash/config/pipelines.yml:ro - ./config/pipelines:/usr/share/logstash/config/pipelines:ro - ./logs:/usr/share/logstash/input</code> </pre><br>  ูุชุบููุฑ ูุณู ุงูุฅุฏุฎุงู ูู habr_pipeline.conf <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">input { file { path =&gt; "/usr/share/logstash/input/*.log" } }</code> </pre><br>  ูุจุฏุฃ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">docker-compose up</code> </pre><br>  ูุฅูุดุงุก ูููุงุช ุงูุณุฌู ูุชุณุฌูููุง ุ ุณูุณุชุฎุฏู ุงูุฃูุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'1'</span></span> &gt;&gt; logs/number1.log</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">{ logstash_one_channel | "host" =&gt; "ac2d4e3ef70f", logstash_one_channel | "habra_field" =&gt; "Hello Habr", logstash_one_channel | "@timestamp" =&gt; 2019-04-29T14:28:53.876Z, logstash_one_channel | "@version" =&gt; "1", logstash_one_channel | "message" =&gt; "1", logstash_one_channel | "path" =&gt; "/usr/share/logstash/input/number1.log" logstash_one_channel | }</code> </pre><br>  ูุนู ุ ุฅูู ูุนูู! <br><br>  ูู ุงูููุช ููุณู ุ ูุฑู ุฃููุง ุฃุถููุง ุญูู ุงููุณุงุฑ ุชููุงุฆููุง.  ูุฐูู ูู ุงููุณุชูุจู ุ ูููููุง ุชุตููุฉ ุงูุณุฌูุงุช ุจู. <br><br>  ุฏุนููุง ูุญุงูู ูุฑุฉ ุฃุฎุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'2'</span></span> &gt;&gt; logs/number1.log</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">{ logstash_one_channel | "host" =&gt; "ac2d4e3ef70f", logstash_one_channel | "habra_field" =&gt; "Hello Habr", logstash_one_channel | "@timestamp" =&gt; 2019-04-29T14:28:59.906Z, logstash_one_channel | "@version" =&gt; "1", logstash_one_channel | "message" =&gt; "2", logstash_one_channel | "path" =&gt; "/usr/share/logstash/input/number1.log" logstash_one_channel | }</code> </pre><br><br>  ูุงูุขู ุฅูู ููู ุขุฎุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'1'</span></span> &gt;&gt; logs/number2.log</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">{ logstash_one_channel | "host" =&gt; "ac2d4e3ef70f", logstash_one_channel | "habra_field" =&gt; "Hello Habr", logstash_one_channel | "@timestamp" =&gt; 2019-04-29T14:29:26.061Z, logstash_one_channel | "@version" =&gt; "1", logstash_one_channel | "message" =&gt; "1", logstash_one_channel | "path" =&gt; "/usr/share/logstash/input/number2.log" logstash_one_channel | }</code> </pre><br>  ! ููุชุงุฒ  ุชู ุงูุชูุงุท ุงูููู ุ ูุงู ุงููุณุงุฑ ุตุญูุญูุง ุ ูู ุดูุก ุนูู ูุง ูุฑุงู. <br><br>  ููู logstash ูุฅุนุงุฏุฉ ุชุดุบูู.  ูููุชุธุฑ  ุงูุตูุช.  ุฃู  ูุญู ูุง ูุชููู ูุฐู ุงูุณุฌูุงุช ูุฑุฉ ุฃุฎุฑู. <br><br>  ูุงูุขู ุงูุชุฌุฑุจุฉ ุงูุฃูุซุฑ ุฌุฑุฃุฉ. <br><br>  ูุถุน logstash ูุชูููุฐ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'3'</span></span> &gt;&gt; logs/number2.log <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'4'</span></span> &gt;&gt; logs/number1.log</code> </pre><br>  ูู ุจุชุดุบูู logstash ูุฑุฉ ุฃุฎุฑู ูุงูุธุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">logstash_one_channel | { logstash_one_channel | "host" =&gt; "ac2d4e3ef70f", logstash_one_channel | "habra_field" =&gt; "Hello Habr", logstash_one_channel | "message" =&gt; "3", logstash_one_channel | "@version" =&gt; "1", logstash_one_channel | "path" =&gt; "/usr/share/logstash/input/number2.log", logstash_one_channel | "@timestamp" =&gt; 2019-04-29T14:48:50.589Z logstash_one_channel | } logstash_one_channel | { logstash_one_channel | "host" =&gt; "ac2d4e3ef70f", logstash_one_channel | "habra_field" =&gt; "Hello Habr", logstash_one_channel | "message" =&gt; "4", logstash_one_channel | "@version" =&gt; "1", logstash_one_channel | "path" =&gt; "/usr/share/logstash/input/number1.log", logstash_one_channel | "@timestamp" =&gt; 2019-04-29T14:48:50.856Z logstash_one_channel | }</code> </pre><br>  ุงูุตูุญุฉ!  ุชู ุงูุชูุงุท ูู ุดูุก. <br><br>  ูููู ุ ูุฌุจ ุฃู ูุญุฐุฑ ููุง ููู.  ุฅุฐุง ุชู ุญุฐู ุงูุญุงููุฉ ุงูุชู ุชุญุชูู ุนูู logstash (ุนุงูู ุงูุฅููุงู ุ logstash_one_channel &amp;&amp; docker rm logstash_one_channel) ุ ููู ูุชู ุงูุชูุงุท ุฃู ุดูุก.  ุฏุงุฎู ุงูุญุงููุฉ ุ ุชู ุญูุธ ููุถุน ุงูููู ุงูุฐู ุชูุช ูุฑุงุกุชู.  ุฅุฐุง ุชู ุงูุชุดุบูู ูู ููุทุฉ ุงูุตูุฑ ุ ูุณูุชู ูุจูู ุงูุฎุทูุท ุงูุฌุฏูุฏุฉ ููุท. <br><br><h3 style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุงููููุงุช ุงูููุฌูุฏุฉ </h3><br>  ูููุชุฑุถ ุฃููุง ูููุง ุจุชุดุบูู logstash ูุฃูู ูุฑุฉ ุ ูููู ูุฏููุง ุจุงููุนู ุณุฌูุงุช ูููุฏ ูุนุงูุฌุชูุง. <br>  ุฅุฐุง ูููุง ุจุชุดุบูู logstash ุจุงุณุชุฎุฏุงู ูุณู ุงูุฅุฏุฎุงู ุงูุฐู ุงุณุชุฎุฏููุงู ุฃุนูุงู ุ ููู ูุญุตู ุนูู ุฃู ุดูุก.  ุณูุชู ูุนุงูุฌุฉ ุงูุฃุณุทุฑ ุงูุฌุฏูุฏุฉ ููุท ุจูุงุณุทุฉ logstash. <br><br>  ูู ุฃุฌู ุณุญุจ ุงูุฎุทูุท ูู ุงููููุงุช ุงูููุฌูุฏุฉ ุ ุฃุถู ุณุทุฑูุง ุฅุถุงูููุง ุฅูู ูุณู ุงูุฅุฏุฎุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">input { file { start_position =&gt; "beginning" path =&gt; "/usr/share/logstash/input/*.log" } }</code> </pre><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ููุงู ูุงุฑู ุจุณูุท ุ ููุฐุง ูุคุซุฑ ููุท ุนูู ุงููููุงุช ุงูุฌุฏูุฏุฉ ุงูุชู ูู ูุฑูุง logstash ุญุชู ุงูุขู.  ุจุงููุณุจุฉ ูููุณ ุงููููุงุช ุงูุชู ุณูุทุช ุจุงููุนู ูู ูุฌุงู ุนุฑุถ logstash ุ ููุฏ ุชุฐูุฑ ุญุฌููุง ุจุงููุนู ูุณูุฃุฎุฐ ุงูุขู ุฅุฏุฎุงูุงุช ุฌุฏูุฏุฉ ูููุง ููุท. <br><br>  ุฏุนููุง ูุชูุงูู ุฏุฑุงุณุฉ ูุณู ุงููุฏุฎูุงุช.  ููุงู ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุงุช ุ ููู ุจุงููุณุจุฉ ููุง ุ ูููู ุฅุฌุฑุงุก ูุฒูุฏ ูู ุงูุชุฌุงุฑุจ ูู ุงูููุช ุงูุญุงูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุชูุฌูู ูุชุญููู ุงูุจูุงูุงุช </h2><br>  ุฏุนููุง ูุญุงูู ุญู ุงููุดููุฉ ุงูุชุงููุฉ ุ ุฏุนูุง ูููู ุฃู ูุฏููุง ุฑุณุงุฆู ูู ููุงุฉ ูุงุญุฏุฉ ุ ุจุนุถูุง ุฅุนูุงูู ุ ูุฑุณุงูุฉ ุฎุทุฃ ุฌุฒุฆููุง.  ุชุฎุชูู ูู ุงูุนูุงูุฉ.  ุจุนุถ ุงููุนูููุงุช ุ ูุงูุจุนุถ ุงูุขุฎุฑ ุฎุทุฃ. <br><br>  ูุญู ุจุญุงุฌุฉ ุฅูู ูุตููุง ูู ุงูุฅุฎุฑุงุฌ.  ุฃู  ููุชุจ ุฑุณุงุฆู ุฅุนูุงููุฉ ูู ููุงุฉ ูุงุญุฏุฉ ุ ูุฑุณุงุฆู ุฎุทุฃ ูู ููุงุฉ ุฃุฎุฑู. <br><br>  ููููุงู ุจุฐูู ุ ุงูุชูู ูู ูุณู ุงูุฅุฏุฎุงู ุฅูู ุงูุชุตููุฉ ูุงูุฅุฎุฑุงุฌ. <br><br>  ุจุงุณุชุฎุฏุงู ูุณู ุงูุชุตููุฉ ุ ุณูููู ุจุชุญููู ุงูุฑุณุงูุฉ ุงููุงุฑุฏุฉ ุ ููุณุชุฎุฑุฌ ูููุง ุชุฌุฒุฆุฉ (ุฃุฒูุงุฌ ูููุฉ ุงูููุชุงุญ) ุ ูุงูุชู ููููู ุงูุนูู ูุนูุง ุจุงููุนู ุ ุฃู  ุชูููู ุญุณุจ ุงูุธุฑูู.  ููู ูุณู ุงูุฅุฎุฑุงุฌ ุ ูุฎุชุงุฑ ุงูุฑุณุงุฆู ููุฑุณู ูู ูููุง ุฅูู ููุงุชูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุญููู ุฑุณุงูุฉ ุจุงุณุชุฎุฏุงู grok </h3><br>  ูู ุฃุฌู ุชุญููู ุงูุณูุงุณู ุงููุตูุฉ ูุงูุญุตูู ุนูู ูุฌููุนุฉ ูู ุงูุญููู ูููุง ุ ููุงู ูููู ุฅุถุงูู ุฎุงุต ูู ูุณู ุงูุชุตููุฉ - grok. <br><br>  ูุง ุชูุฏู ุฅูู ุฅุนุทุงุก ููุง ูุตูุงู ููุตูุงู ููุง (ููุฐุง ุฃุดูุฑ ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุซุงุฆู ุงูุฑุณููุฉ</a> ) ุ ุณุฃูุฏู ูุซุงูู ุงูุจุณูุท. <br><br>  ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุชูุณูู ุฎุทูุท ุงูุฅุฏุฎุงู.  ูุฏู ููู: <br><br>  1 INFO message1 <br>  2 ุฑุณุงูุฉ ุฎุทุฃ 2 <br><br>  ุฃู  ูุฃุชู ุงููุนุฑู ุฃููุงู ุ ุซู INFO / ERROR ุ ุซู ุจุนุถ ุงููููุงุช ุจุฏูู ูุณุงูุงุช. <br>  ููุณุช ุตุนุจุฉ ุ ูููู ูููู ูููู ููู ูุนูู. <br><br>  ูุฐูู ุ ูู ูุณู ุงูุชุตููุฉ ุ ูู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ grok ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ููุท ูุชุญููู ุฎุทูุทูุง. <br><br>  ุณูุจุฏู ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">filter { grok { match =&gt; { "message" =&gt; ["%{INT:message_id} %{LOGLEVEL:message_type} %{WORD:message_text}"] } } }</code> </pre><br>  ูุฐุง ูู ูู ุงูุฃุณุงุณ ุชุนุจูุฑ ููุชุธู.  ูุชู ุงุณุชุฎุฏุงู ุงูุฃููุงุท ุงูุฌุงูุฒุฉ ุ ูุซู INT ู LOGLEVEL ู WORD.  ูุตููู ุ ููุฐูู ุฃููุงุท ุฃุฎุฑู ุ ููููู ุงูุงุทูุงุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง.</a> <br><br>  ุงูุขู ุ ูุฑูุฑุงู ุจุนุงูู ุงูุชุตููุฉ ูุฐุง ุ ุณูู ุชุชุญูู ุงูุณูุณูุฉ ุฅูู ุชุฌุฒุฆุฉ ูู ุซูุงุซุฉ ุญููู: message_id ุ message_type ุ message_text. <br><br>  ุณูุชู ุนุฑุถูุง ูู ูุณู ุงูุฅุฎุฑุงุฌ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชูุฌูู ุงูุฑุณุงุฆู ูู ูุณู ุงูุฅุฎุฑุงุฌ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ if </h3><br>  ูู ูุณู ุงููุฎุฑุฌุงุช ุ ููุง ูุชุฐูุฑ ุ ููุง ุณููุณู ุงูุฑุณุงุฆู ุฅูู ุฏูููู.  ุจุนุถ - ููู iNFO ุ ุณูู ูุฎุฑุฌ ุฅูู ูุญุฏุฉ ุงูุชุญูู ุ ููุน ูุฌูุฏ ุฃุฎุทุงุก ุ ุณูู ูุฎุฑุฌ ุฅูู ููู. <br><br>  ููู ูููููุง ุชูุณูู ูุฐู ุงููุธุงุฆูุ  ุดุฑุท ุงููุดููุฉ ูุทุงูุจ ุจุงููุนู ุงูุญู - ูุฏููุง ุจุงููุนู ุญูู message_type ุงููุญุฏุฏ ุ ูุงูุฐู ูููู ุฃู ูุฃุฎุฐ ูููุชูู ููุท INFO ู ERROR.  ูู ุจุงููุณุจุฉ ูู ุฃููุง ุณูู ูุฎุชุงุฑ ุฎูุงุฑ ุงุณุชุฎุฏุงู ุงูุนุจุงุฑุฉ if. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">if [message_type] == "ERROR" { #     } else { #    stdout }</code> </pre><br>  ูููู ุงูุนุซูุฑ ุนูู ูุตู ููุนูู ูุน ุงูุญููู ูุงููุดุบููู ูู ูุฐุง ุงููุณู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฏููู ุงูุฑุณูู</a> . <br><br>  ุงูุขู ุ ุญูู ุงูุงุณุชูุชุงุฌ ุงููุนูู ููุณู. <br><br>  ุงูุฅุฎุฑุงุฌ ุฅูู ูุญุฏุฉ ุงูุชุญูู ุ ูู ุดูุก ูุงุถุญ ููุง - stdout {} <br><br>  ูููุง ูู ุงูุฅุฎุฑุงุฌ ุฅูู ุงูููู - ุชุฐูุฑ ุฃููุง ูุฏูุฑ ูู ุดูุก ูู ุงูุญุงููุฉ ุ ูุจุงูุชุงูู ูุฅู ุงูููู ุงูุฐู ููุชุจ ุงููุชูุฌุฉ ุฅููู ูููู ุงููุตูู ุฅููู ูู ุงูุฎุงุฑุฌ ุ ูุญุชุงุฌ ุฅูู ูุชุญ ูุฐุง ุงูุฏููู ูู docker-compose.yml. <br><br>  ุงููุฌููุน: <br><br>  ูุจุฏู ูุณู ุงูุฅุฎุฑุงุฌ ูู ููููุง ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> output { if [message_type] == "ERROR" { file { path =&gt; "/usr/share/logstash/output/test.log" codec =&gt; line { format =&gt; "custom format: %{message}"} } } else {stdout { } } }</code> </pre><br>  ูู docker-compose.yml ุฃุถู ูุญุฏุฉ ุชุฎุฒูู ุฃุฎุฑู ูุฅุฎุฑุงุฌูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">version: '3' networks: elk: volumes: elasticsearch: driver: local services: logstash: container_name: logstash_one_channel image: docker.elastic.co/logstash/logstash:6.3.2 networks: - elk environment: XPACK_MONITORING_ENABLED: "false" ports: - 5046:5046 volumes: - ./config/pipelines.yml:/usr/share/logstash/config/pipelines.yml:ro - ./config/pipelines:/usr/share/logstash/config/pipelines:ro - ./logs:/usr/share/logstash/input - ./output:/usr/share/logstash/output</code> </pre><br>  ูุจุฏุฃ ุ ูุญุงูู ุ ูุฑู ุงูุชูุณูู ุฅูู ูุณููู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar451264/">https://habr.com/ru/post/ar451264/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar451254/index.html">ุงููุฆุฉ: ุงูุญุฏูุฏ ุฃููุจูุฅูุณููุบ ูููุฑ IaaS</a></li>
<li><a href="../ar451256/index.html">ูุง ูู ูุธุงู ุงูุฅุจูุงุบ ุงููุซุงูู. ูู ูู ุงููุงูุนู ุฃู ูููู ูุง ูุญุฏุซ ูู ุงูุดุฑูุฉุ</a></li>
<li><a href="../ar451258/index.html">ุงูุณููู ุงุฐุง ุงุณุชุทุนุช. ุฎุทุงุจ ุงููุฏูุฑ</a></li>
<li><a href="../ar451260/index.html">10 ุฃุญุฏุงุซ ููุถูุนูุฉ ูู ุฌุงูุนุฉ ITMO</a></li>
<li><a href="../ar451262/index.html">ุนููุงุก ูู ุฌุงูุนุฉ ุณุชุงูููุฑุฏ: ุฃุฏุงุฉ ูููู ูุถุนูุง ูู ุงูุฃุฐู ุณุชููู ูุงุฏุฑุฉ ุนูู ูุฑุงูุจุฉ ุฃุฏุงุก ุงูุฏูุงุบ</a></li>
<li><a href="../ar451266/index.html">ุงูููุฐุฌุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูู ุงูุนุงูู ุงูุญุฏูุซ</a></li>
<li><a href="../ar451268/index.html">ูููุชูุฑ ุฌุงููู ุนู Kafka Streams IQ ุนูู jug.msk.ru</a></li>
<li><a href="../ar451270/index.html">ุจ = ุงูุงูุชูุงู ุ ุฃู ููููุฉ ุฎูู ุงูููุช</a></li>
<li><a href="../ar451272/index.html">ุฅุฐุง ููุช ุชุฏู ุงูุจุงุจ ุจุงููุนู: ููููุฉ ุญูุงูุฉ ุงููุนูููุงุช ุนูู ุงูุฃุฌูุฒุฉ</a></li>
<li><a href="../ar451274/index.html">ุณูุงุญ ูุซุงูู ุ ุญุฑุจ ูุฌูุงุช ูุธุฑ ูุฅูุณุงู ูุตู ุฅูู ุงูุณูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>