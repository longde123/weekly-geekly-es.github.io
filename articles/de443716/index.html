<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲 👩🏿‍🤝‍👨🏽 🎾 "Ich habe ein Backup auf meinem Band." Ich-Geschichte 🧝🏻 🧒🏾 👐🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im vorherigen Artikel haben wir Sie über neue Funktionen in der im Januar veröffentlichten Version 4 von Update 4 für Veeam Backup & Replication 9.5 (...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"Ich habe ein Backup auf meinem Band." Ich-Geschichte</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/443716/">  Im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorherigen Artikel haben</a> wir Sie über neue Funktionen in der im Januar veröffentlichten Version 4 von Update 4 für Veeam Backup &amp; Replication 9.5 (VBR) informiert, in der die Sicherungen auf dem Band nicht bewusst erwähnt wurden.  Die Geschichte über diesen Bereich verdient einen separaten Artikel, da es wirklich viele neue Funktionen gab. <br><br>  <i>- QA Jungs, einen Artikel schreiben?</i> <i><br></i>  <i>- Warum nicht!</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/no/jg/36/nojg36lajf54g2qfjil2wmnesgm.jpeg"></div><a name="habracut"></a><br><h1>  Bandlaufwerke im 21. Jahrhundert </h1><br>  Das Speichern von Daten auf Magnetbändern (Kassetten, <b>Teips</b> , wie wir sie in Forschung und Entwicklung nennen) ist nicht auf den ZX-Spectrum-Computer beschränkt, der der Vergangenheit angehörte. Ein Spiel, für das mehrere Minuten lang von einer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bandkassette</a> in 48 KB RAM geladen werden konnte.  Während eines Vierteljahrhunderts nahmen die Geschwindigkeit und Kapazität der Kassetten um 6-7 Größenordnungen zu.  Dieser Vergleich ist nicht ganz richtig und der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LTO-</a> Standard hält nicht mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Moores Gesetz</a> Schritt.  Moderne Technologien ermöglichen jedoch die Aufzeichnung von 12 Terabyte Daten auf einem Kilometer Band eines Bandes (bis zu 30 Terabyte im Komprimierungsmodus), sodass das 160-Dollar-Laufwerk die Konkurrenten bei den Kosten für die Langzeitspeicherung einer großen Datenmenge zurücklässt, selbst wenn Investitionen in Aufzeichnungsgeräte berücksichtigt werden Ich lese.  Daten auf solchen Bändern werden zuverlässig für 15-30 Jahre gespeichert. <br><br>  Ich komme von der anderen Seite.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ransomware-Viren</a> haben in letzter Zeit ein neues Niveau erreicht.  Sie können ihre Zeit in der Infrastruktur eines großen Unternehmens wochen- und monatelang warten und mit dem Aufkommen einer weiteren Zero-Day-Sicherheitslücke nicht nur alle Daten, sondern auch alle erreichbaren Backups zerstören (nicht ohne menschliche Hilfe, da viel Geld auf dem Spiel steht) .  Hier ist ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">neues Beispiel dafür,</a> wann ein Unternehmen Ransomware bezahlen musste.  Der sogenannte <b>Luftspalt</b> , d. H. Backups, die physisch von der Infrastruktur isoliert waren, wurde in der Tat die einzige zuverlässige Rettung aus solchen Geschichten.  Magnetband ist hier eine der zeitlosen Lösungen. <br><br><img src="https://habrastorage.org/webt/40/dt/bq/40dtbqtgogepivirfrdlofwocaw.jpeg"><br><br>  Eine Spezifikation und technologische Neuheiten bei Eisen und Bariumferrit von führenden Herstellern (IBM, HPE, Oracle, Dell) für zuverlässigen Datenschutz reichen jedoch nicht aus. Sie benötigen eine gute Software.  Bei Veeam beschäftigt sich unser gesamtes Team mit Bandsicherungen. Ungefähr 10 Personen analysieren, planen, recherchieren, entwickeln und testen täglich.  Sie konnten die Ergebnisse dieser Arbeit in früheren Artikeln ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eins</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zwei</a> ) sehen.  Was wurde im letzten Jahr getan? <br><br><h1>  Glossar </h1><br>  Es besteht die Wahl zwischen Freiheiten in Bezug auf die Muttersprache und der Schwierigkeit der Lesbarkeit des Klerikalismus.  Ich bevorzuge das erste, also entschuldige ich mich im Voraus, wenn jemand Slang-Wörter aus der Liste unten das Auge verletzt.  Hier werde ich kurz daran erinnern, was ein bestimmter Begriff bedeutet. <br><br><div class="spoiler">  <b class="spoiler_title">Leuchten VBR dieser Teil kann übersprungen werden</b> <div class="spoiler_text">  <b>Joba</b> - Job - Sicherungsjob.  Eigentlich ist der gesamte VBR auf Job aufgebaut.  Zusätzlich zur Sicherung und Replikation kann es auch auf Magnetband kopiert werden (Sicherung auf Bandjob, Bandjob).  Ich werde reservieren, dass das Wiederherstellen von einer Sicherungskopie (Wiederherstellen) ebenfalls eine Aufgabe ist, aber in diesem Artikel bedeutet dieses Wort Sicherung. <br><br>  <b>Storaj</b> - Speicher - historisch etablierter Name.  Dies sind Dateien im <b>Repository</b> (Repository - Speicher), die Sicherungskopien enthalten - <b>vollständig</b> und <b>inkrementell</b> .  In einer Geschichte kann es eine oder mehrere virtuelle Maschinen geben. <br><br>  <b>Kette</b> - Eine Kette ist eine Folge verwandter Geschichten.  Um Daten aus dem n-ten inkrementellen Speicher wiederherzustellen, werden alle vorherigen vom (n-1) -st bis zum ersten und vollständigen Speicher benötigt, auf den sich der erste inkrementelle Speicher bezieht. <br><br>  <b>Quelle</b> , <b>Ziel</b> - Quelle, Ziel.  Quelle ist die ursprüngliche Entität, die der Job verarbeitet.  Bei Backups / Replikaten handelt es sich normalerweise um eine virtuelle Maschine im Hypervisor.  Im Fall von Bandjobs ist die Sicherung der Sicherungsjob selbst (naja, oder Dateien im Fall von Datei-zu-Band-Jobs).  Ein Sicherungsjobziel ist ein Repository, in dem Sicherungen gespeichert werden.  Für Bandarbeiten ist dies ein Medienpool. <br><br>  <b>Medienpool</b> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Medienpool</a> - in unserem Fall ein Pool von Speichermedien - Bänder.  Ein vom Benutzer erstellter logischer Container, der die Kassetten einer oder mehrerer Bibliotheken enthält.  Der Bandjob hat also immer einen Medienpool als Ziel, dh die Daten werden nicht auf ein bestimmtes Band oder auf ein Band in der Bibliothek geschrieben, sondern auf einen bestimmten Satz davon.  Der Medienpool verfügt über eine Einstellung für die Datenspeicherzeit, nach der die Kassette überschrieben werden kann.  Der Benutzer kann Standardpools und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GFS-Pools</a> erstellen.  Jede dieser Arten kann jetzt Wurm und Nicht-Wurm sein, mehr dazu weiter unten. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mediensatz</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mediensatz</a> - Ein Satz von Bändern im Medienpool, auf die kontinuierlich Sicherungen / Dateien geschrieben werden.  Bei GFS-Pools sind Mediensätze auch an ein Intervall gebunden (z. B. jährlich - jährlich). Kassetten drehen sich nur innerhalb ihres Intervalls. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Laufwerk</b> , <b>Wechsler</b></a> - Elemente der Bandbibliothek.  Ein Laufwerk liest eine Kassette und spult sie zurück. Ein Wechsler ist ein Roboter, der Kassetten zwischen Speichersteckplätzen, Entladeschächten und dem Laufwerk bewegt.  Es gibt eigenständige <b>Laufwerke</b> (eigenständig - freistehend), die Rolle des Wechslers wird hier von einer Person wahrgenommen.  Für ein Laufwerk ist auf dem Windows-Computer, auf dem die Bibliothek angeschlossen ist, ein korrekt installierter Herstellertreiber erforderlich.  Mit nativem SCSI können wir mit einem Wechsler ohne Treiber arbeiten. <br></div></div><br><h1>  Mieter auf Band.  Anbieter geschützt - Kunden geschützt </h1><br>  Trumpfkarten sofort auf den Tisch legen.  Die ehrgeizigste Funktion unseres Updates für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cloud-Anbieter</a> , die VBR in ihrer Infrastruktur verwenden.  Die Entwicklung wurde vor zwei Jahren begonnen.  Bald stellten wir fest, dass wir für die nächste Version keine Zeit haben, um eine so ernste Aufgabe zu bewältigen, machten eine kurze Pause und veröffentlichten schließlich eine Funktion in 9.5 Update 4. <br><br>  Kurz gesagt, Anbieter haben jetzt die Möglichkeit, Sicherungen ihrer Kunden mithilfe eines Bandauftrags im GFS-Pool auf Kassetten zu kopieren.  Dies gibt Anbietern - und das sind sehr große Leute, die uns und der Handelsabteilung am Herzen liegen - zwei Möglichkeiten: <br><br><ul><li>  Schützen Sie Ihre Kunden (Mieter, Mieter - Mieter) vor Datenverlust durch versehentliches Löschen oder Infrastrukturprobleme ("Überschwemmung im Serverraum"). </li><li>  Bieten Sie Mandanten einen zusätzlichen Service zum Wiederherstellen von Daten aus einer alten Sicherung, die gemäß der Datenspeicherungsrichtlinie lange Zeit aus dem Cloud-Repository entfernt wurde, aber weiterhin auf Band verbleibt. </li></ul><br>  Aus Sicht des Marketings ist die Funktionalität aus unserer Sicht sehr "lecker" - nicht weniger schwierig zu implementieren. <br><br><h2>  Entwicklung </h2><br>  Das Hauptproblem ist die Datenverschlüsselung.  Die meisten Cloud-Backups sind verschlüsselt, Statistiken sagen etwa ⅔ der Gesamtzahl aus.  Für uns war diese Zahl eine Überraschung, es wurde angenommen, dass fast alles verschlüsselt ist, aber nein - viele Kunden scheinen bedingungslos Vertrauen in ihre Anbieter zu haben. <br><br>  Das Paradigma ist einfach: Der Anbieter sollte nicht in der Lage sein, die Daten seiner Mieter zu entschlüsseln.  Gleichzeitig ist es als Teil der neuen Funktion auf Anbieterseite erforderlich, Speicher mit Backups zu öffnen.  Dies ist erforderlich, um Datenblöcke zu übertragen, um beispielsweise eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">virtuelle vollständige Sicherung</a> zu erstellen.  Die Hauptsache ist, dies unabhängig vom Mandanten zu tun, wenn die erforderlichen Schlüssel während der Ausführung des Auftrags nicht an den Anbieter übertragen werden. <br><br>  Die Lösung für dieses Problem, die übrigens in einem anderen wichtigen Merkmal des freigegebenen Add-Ons - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Capacity Tier</a> - verwendet wird, besteht darin, einen zusätzlichen Verschlüsselungsschlüssel hinzuzufügen.  Der Archivschlüssel (Archivschlüssel) wird verschlüsselt in der Provider-Datenbank gespeichert.  Nach einem kniffligen Schema auf der Anbieterseite kann es verwendet werden, um das Geschäft zu öffnen, Datenblöcke zwischen den Geschäften zu verschieben und neu zu verschlüsseln (schließlich hat jeder seinen eigenen Schlüssel), aber die Daten selbst können nicht entschlüsselt werden. <br><br><img src="https://habrastorage.org/webt/ly/jv/3n/lyjv3ncjo_oymwfosymomr8jqsc.jpeg"><br>  <sup>Tricky Schema (Arbeitsversion)</sup> <br><br>  Ich füge hinzu, dass alle Ingenieure in Forschung und Entwicklung die Verschlüsselung in unserem Produkt sehr mögen, aber niemand im Detail weiß, wie es funktioniert.  (Es gab immer noch einen Witz "und warum es überhaupt funktioniert", aber die Redakteure haben es nicht verpasst.) <br><br><h2>  Testen </h2><br>  Hunderte von Fehlern wurden in der Funktion aufgezeichnet.  Die schwierigsten Bereiche sind Verschlüsselung, Benutzeroberfläche und Probleme bei der Wiederherstellung. <br><br>  Unter dem Gesichtspunkt des Testens stellte die große Variabilität die „Kombinatorik“ der Typen und Typen von Mandantenjobs und -repositorys dar - ich meine sowohl Quelle als auch Ziel beim Wiederherstellen von Sicherungen in der Infrastruktur.  All dies hängt von der Logik im Rahmen des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GFS-Modells ab</a> (einschließlich des neuen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Modells</a> - Parallelität und tägliche Medien, mehr dazu weiter unten) und im Großen und Ganzen von Cloud-Besonderheiten, die für Teips ungewöhnlich sind.  Denken Sie daran, mit viel Verschlüsselung zu würzen.  Um die Metapher fortzusetzen, haben wir viel von diesem Gericht gegessen - aber es auch von allen Seiten probiert. <br><br><img src="https://habrastorage.org/webt/oh/0r/td/oh0rtdrrznov74bycbusv3ehjqo.png"><br>  <sup>Fragment des Testplans</sup> <br><br><h2>  Ergebend </h2><br>  Eine ausführliche Beschreibung finden Sie im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Benutzerhandbuch</a> (bisher in englischer Sprache): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Backup</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Recovery</a> .  Ich werde auf die Hauptpunkte eingehen. <br><br><h3>  Backup </h3><br>  Der Anbieter fügt dem Teip-Job Mandanten mit dem GFS-Pool als Ziel hinzu.  Wenn im zweiten Schritt des Assistenten eine Cloud-Lizenz vorhanden ist, ist die Option <b>Mandanten</b> verfügbar.  Sie können alle Mandanten gleichzeitig oder separat hinzufügen oder nur ein separates Kontingent (aber kein Unterquot) eines einzelnen Mandanten auswählen.  Sie können Mandanten-Backups und reguläre lokale Backups nicht im selben Job mischen. <br><br><img src="https://habrastorage.org/webt/l-/cq/6n/l-cq6nkc0caco4speq4accpw8kw.png"><br><br>  Der Rest der Tinkturen ist fast vollständig identisch mit dem üblichen Job im GFS-Pool. <br><br>  Die Wiederherstellung von Daten ist sowohl auf der Seite des Anbieters als auch auf der Seite des Mieters selbst möglich. <br><br><h3>  Anbieterseitige Wiederherstellung </h3><br>  Wird über einen neuen Assistenten ausgeführt.  Hier können Sie bereits zu einem separaten Job wechseln. Die gesamte Kette, die sich an einem bestimmten Tag im Repository befand, wird wiederhergestellt. <br><br><img src="https://habrastorage.org/webt/hs/zb/dq/hszbdqv2oy0tnjuiquaoqsocrha.png"><br><br>  Es gibt drei Restaurantoptionen: <br><br><ol><li>  Am ursprünglichen Ort.  In diesem Fall wird die ursprüngliche Sicherung, falls vorhanden, gelöscht.  Mandantenjobs werden automatisch für die wiederhergestellte Kette neu konfiguriert.  Es versteht sich, dass eine solche Wiederherstellung für den Client im Allgemeinen unsichtbar ist, nur für kurze Zeit wird sie vom Cloud-Repository getrennt. </li><li>  In ein neues Kontingent / Repository.  Ein Anbieter kann zu diesem Zweck beispielsweise ein separates temporäres Konto erstellen, das er anschließend löscht.  Die Sicherung wird nach der Synchronisierung mit der Anbieterdatenbank in der Mandanteninfrastruktur angezeigt. </li><li>  Nur auf ein Linux- oder Windows-Serverlaufwerk, das in der Infrastruktur des Anbieters registriert ist.  Außerdem kann diese Kette auf einem Flash-Laufwerk aufgezeichnet und ein Mieter gesendet werden. </li></ol><br><img src="https://habrastorage.org/webt/sl/wt/ln/slwtlntmc4rklwog0bnawpphmsw.png"><br><br><h3>  Mieterwiederherstellung </h3><br>  Diese Option impliziert, dass der Kunde über eine eigene Teip-Infrastruktur und eine große Datenmenge für das Restaurant verfügt.  Der Anbieter kann das Band mit den aufgezeichneten Backups vom Lieferservice physisch an den Kunden senden, er katalogisiert es auf seinem Gerät, entschlüsselt die Bänder und Backups und arbeitet mit den Backups so, als hätte er sie selbst auf Band geschrieben.  Hier ist ein Life-Hack, um Terabytes nicht über WAN herunterzuladen. <br><br><h1>  Umfangreiche Verbesserungen des GFS-Pools </h1><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GFS-</a> Medienpools wurden vor zwei Jahren in VBR in Version 9.5 veröffentlicht.  Im neuesten Update haben wir diese Funktionalität sowohl im Zusammenhang mit dem Erscheinen der Tenant-to-Tape-Funktion als auch auf Wunsch der Benutzer gut gepumpt. <br><br><h2>  Tägliche Mediensätze </h2><br>  Ein neues <b>tägliches</b> Medienset ist erschienen.  Jetzt können Sie im GFS-Pool Backups für jeden Tag speichern, und zwar nicht nur vollständig, sondern auch inkrementell.  Letztere nehmen deutlich weniger Platz ein, und dies wurde durchgeführt, um Band zu sparen.  Es versteht sich, dass diese Kassetten in der Bibliothek ständig gedreht und nicht zum entfernten Speicher transportiert werden.  Gleichzeitig benötigen Sie für ein Restaurant von einem inkrementellen Punkt aus die Bänder eines der älteren Mediensets (wöchentlich, monatlich, vierteljährlich oder jährlich).  Es ist unmöglich, das tägliche Medienset ohne das wöchentliche einzuschalten, so dass in den meisten Fällen wöchentliche Kassetten erforderlich sind, um eine inkrementelle Kopie wiederherzustellen.  Sie befinden sich entweder immer in der Bibliothek oder in einem nicht so entfernten Lagerhaus. <br><br><img src="https://habrastorage.org/webt/hw/89/hb/hw89hbkwt8n5_labggo84mg_jds.png"><br><br>  Die Logik für die Arbeit mit Bandjobs im GFS-Medienpool ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nicht die einfachste</a> . Technische Redakteure lassen Sie nicht lügen.  Kurz gesagt, ohne die Details werden nur vollständige Sicherungen (einschließlich virtueller vollständiger Sicherungen) in die wöchentlichen und älteren Mediensätze kopiert, eine für jedes Datum und in die tägliche Sicherung alle Sicherungen, die sich für den aktuellen Tag im Repository befinden, da die Sicherung -Job kann öfter als einmal am Tag beginnen. <br><br><h2>  Parallelität, Startzeit und Wartezeit in GFS-Pools </h2><br>  Jetzt ist die parallele Aufzeichnung mehrerer Ketten oder die Arbeit an mehreren Bibliothekslaufwerken auch in GFS-Medienpools möglich (früher - nur im Normalfall).  Es ist im Schritt <b>Optionen</b> des Medienpools enthalten. <br><br><img src="https://habrastorage.org/webt/50/al/mh/50almhfbumzpwdqsxy8zzfgur2w.png"><br><br>  <b>Eine wichtige Klarstellung</b> : Dieselbe Datei wird immer in denselben Stream geschrieben. Bei mehreren großen virtuellen Maschinen wird daher empfohlen, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Konfiguration pro VM im Repository</a> zu aktivieren, damit die Sicherung aus mehreren Ketten besteht. <br><br>  Außerdem konnte <b>die Startzeit des GFS-Jobs selbst gewählt werden</b> .  Viele Benutzer mochten es nicht, um Mitternacht zu beginnen und dann fast den ganzen Tag zu warten, bis der Beschaffungsjob beendet war.  Jetzt kann diese Zeit zum Beispiel am späten Abend eingestellt werden, wenn bereits etwas auf Band kopiert werden muss.  Darüber hinaus haben wir auf Wunsch der Benutzer in den erweiterten Einstellungen eine Option hinzugefügt, die bisher nur mit dem Registrierungsschlüssel aktiviert werden konnte.  Es reicht aus, <b>den letzten Wiederherstellungspunkt verarbeiten</b> auszuwählen <b>, anstatt zu warten</b> - und was sich zum Zeitpunkt des Starts des Bandauftrags im Repository befindet (z. B. der Punkt für gestern), wird auf das Band kopiert, es wird überhaupt nicht gewartet. <br><br><img src="https://habrastorage.org/webt/5c/lw/tr/5clwtrg4ea-h_cinvjj4cbcnwb8.png"><br><br><h1>  Verbesserte Arbeit mit mehreren Bibliotheken </h1><br>  Es geht um die Situation, wenn mehr als eine Bibliothek zu einem Medienpool hinzugefügt wird.  Wir haben dies bereits unterstützt, aber von Zeit zu Zeit kamen Kunden mit Beschwerden über nicht ganz vorhersehbares Verhalten. <br><br><h2>  War </h2><br><img src="https://habrastorage.org/webt/lm/em/zb/lmemzbkxcz0vs8vjamt2u7xt9xu.png"><br><br>  Zum Beispiel wurde der Bandjob gestartet, es wurden zwei Laufwerke in der ersten Bibliothek benötigt, aber die Einstellungen für die Parallelität ermöglichen es, 4 Laufwerke gleichzeitig zu verwenden.  Sollte dieser Job in die zweite Bibliothek des Medienpools wechseln und diese auch verwenden, oder ist dies eine Verschwendung von Ressourcen? <br><br>  Ein anderer Fall.  Eine Option wurde ausgewählt, um durch die Bedingung "Es sind keine Kassetten verfügbar" zu wechseln. In der ersten Bibliothek gibt es nur eine Kassette, aber alle Daten werden möglicherweise darauf abgelegt.  Mit den Einstellungen können Sie jedoch parallel auf zwei Kassetten schreiben.  Sollte die zweite Bibliothek in diesen Fall involviert sein? <br><br>  Wir haben uns entschlossen, diesen Bereich in Ordnung zu bringen, damit das Verhalten explizit angepasst werden kann. <br><br><h2>  Ist geworden </h2><br><img src="https://habrastorage.org/webt/jq/wc/0d/jqwc0dneyn9cpqpkwoqq6fzyno4.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bibliotheken im Medienpool</a> erschienen Rollen - <b>aktiv</b> und <b>passiv</b> .  Der Medienpool selbst verfügt über zwei Modi: Fail-Safe oder Failover und <b>Parallelisierung</b> .  Abhängig von den Anforderungen können Sie den Medienpool jetzt auf verschiedene Arten konfigurieren. <br><br><ul><li>  Wenn Sie mehrere Peer-Bibliotheken haben und die Aufzeichnung in ihnen parallelisieren müssen, aktivieren Sie den parallelen Aufzeichnungsmodus. Dazu müssen allen Bibliotheken aktive Rollen zugewiesen werden.  In diesem Fall werden die neuen Bänder und Laufwerke sofort aktiviert, sobald dies erforderlich ist, unabhängig davon, in welcher Bibliothek sie sich befinden.  Es gibt immer noch Priorität - zuerst werden wir versuchen, Ressourcen in der Bibliothek zu finden, die sich weiter oben in der Liste befindet. </li><li>  Wenn sich eine Hauptbibliothek und ein altes oder eigenständiges Laufwerk in Reserve befinden, aktivieren Sie den Feylover-Modus, indem Sie die Hauptbibliothek ganz oben auf der Liste platzieren und eine passive Rolle für Sicherungsgeräte auswählen.  Der Wechsel zu einem solchen Gerät erfolgt nur dann, wenn es wirklich notwendig ist, dass der Job zumindest irgendwie funktioniert.  Diese Situation wird als abnormal angesehen, und es wird eine Benachrichtigung per E-Mail gesendet. </li></ul><br>  Es gibt eine kompliziertere Situation, die wir noch nicht unterstützen - mehrere aktive Bibliotheken mit passiven.  Das Feedback zeigt, ob solche Konfigurationen erforderlich sind und ob die Funktion in Zukunft "beendet" werden muss.  Standardpraxis. <br><br><h1>  WORM-Unterstützung </h1><br>  <b>WORM</b> - Write Once Read Many - Bänder, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die auf Eisen-Ebene</a> nicht gelöscht oder überschrieben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">werden</a> können, können nur Daten anhängen.  Ihre obligatorische Verwendung wird durch die Regeln einiger Organisationen geregelt, beispielsweise derjenigen, die auf dem Gebiet der Medizin tätig sind.  Das Hauptproblem bei solchen Bändern war zuvor, dass VBR während der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Inventarisierung</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Katalogisierung</a> eine Überschrift aufzeichnete, die in Zukunft nicht mehr gelöscht werden konnte, und Bandaufträge während eines solchen Versuchs mit einem Fehler fielen. <br><br>  In 9.5 Update 4 ist die vollständige Unterstützung für solche Bänder implementiert.  Es wurden WORM-Medienpools (regulär und GFS) hinzugefügt, in denen Sie nur Bänder dieses Typs ablegen können. <br><br><img src="https://habrastorage.org/webt/jw/xn/kh/jwxnkhju_i7nadbdv3y2nnuubzg.png"><br><br>  Neue Kassetten haben ein blaues, eingefrorenes Symbol.  Aus Sicht des Benutzers unterscheidet sich die Arbeit mit WORM-Kassetten nicht von der Arbeit mit normalen Kassetten. <br><br>  Der "Vorschub" der Kassetten wird anfänglich durch das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Barcode-</a> Suffix bestimmt. Wenn der Barcode auf ihnen regelmäßig oder nicht lesbar ist, gibt das Laufwerk Informationen aus, wenn die Kassette zum ersten Mal eingesetzt wird.  Legen Sie WORM-Bänder in einen regulären Medienpool und schreiben Sie darauf. Das funktioniert nicht.  Aus dem Witzigen: Es gab bereits Benutzer, die WORM-Barcodes auf normale Kassetten klebten und nach dem Update von den Änderungen in ihrer Infrastruktur überrascht waren. <br><br><h2>  Kartuschenchip </h2><br>  Mit der Einführung nicht wiederbeschreibbarer Kassetten begannen sie mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Chip zu arbeiten</a> .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir haben vorher keine Standardattribute im Chip verwendet, jetzt schreiben und lesen wir einige davon, aber wir nehmen sie nicht als Hauptdatenquelle wahr. </font><font style="vertical-align: inherit;">Die Hauptrichtlinie ist immer noch der Titel der Kassette. </font><font style="vertical-align: inherit;">Diese Entscheidung stellte sich als richtig heraus: Nach einem Monat nach der Veröffentlichung sehen wir, wie der „Zoo“ des Benutzereisens Überraschungen in Bezug auf die Arbeit mit dem Chip bringt.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bandsicherung von NDMP-Volumes </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abschließend über die Funktion, die von der Anzahl der Überprüfungen dieses Updates am häufigsten angefordert wird. Die Sicherung von NDMP-Volumes auf Bändern wurde verfügbar. Es ist erforderlich, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> VBR-Infrastruktur </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">einen NDMP-Server hinzuzufügen. Danach können</font></a><font style="vertical-align: inherit;"> im File-Teip-Job Volumes von diesem Host ausgewählt werden. Sie fallen in Form von Dateien mit einem speziellen Attribut auf die Kassette, um sie von der üblichen Katalogisierung zu unterscheiden. </font></font><br><br><img src="https://habrastorage.org/webt/de/_q/wn/de_qwns8hgdyko372yoji6jhamq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der ersten Implementierung gibt es bestimmte Einschränkungen: Erweiterungen werden nicht unterstützt, und das Sichern und Wiederherstellen nur des gesamten Volumes, jedoch nicht einzelner Dateien, ist möglich. Backup läuft durch </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">den Dump</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (im Fall von NetApp - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die ufsdump</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), gibt es seine eigenen Besonderheiten: die maximale Anzahl von inkrementalen Punkten - 9, und dann vollständige Sicherung gezwungen wird.</font></font><br><br><h1>  Abschließend </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dies waren nur die größten Neuerungen im Bereich der Sicherung auf Band in VBR 9.5 Update 4. Weitere Änderungen sind nachstehend aufgeführt: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die Möglichkeit, die Reihenfolge der Beschaffungsjobs und -dateien in Bandjobs festzulegen; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Bandoperatorrolle wurde hinzugefügt (der Benutzer kann alles außer der Wiederherstellung vom Band ausführen - hierfür gibt es einen Wiederherstellungsoperator). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vollständige Einschluss- / Ausschlussmasken im Dateibandjob hinzugefügt (außer NDMP); </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Wiederherstellung im Datei-Teip-Job wurde verbessert (der Ordner wird mit den Dateien wiederhergestellt, die zum Zeitpunkt der Sicherung vorhanden waren, und nicht mit allen Dateien, die jemals in der Geschichte der Sicherungen enthalten waren - übrigens eine sehr beliebte Funktion). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erhöhte Wiederherstellungsgeschwindigkeit einer sehr großen Anzahl von Dateien von Kassetten; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der Algorithmus zur Auswahl des nächsten Bandes für die Aufnahme wurde verbessert, insbesondere ceteris paribus. Wir berücksichtigen die Menge der Daten, die über die gesamte Lebensdauer geschrieben / gelesen wurden. Wir berücksichtigen die aktuellsten Daten. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verbesserte Produktstabilität. </font></font></li></ul><br><h1>  Nützliche Links </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zur Abwechslung werde ich einige Links zu russischsprachigen Ressourcen geben: </font></font><br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testversion für VBR 9.5 Update 4 herunterladen</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel über Habr "Nützliche Tipps zum Archivieren von Veeam-Backups auf Magnetband"</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel über Habr "7 nützliche Tipps zum Schutz von Backups vor kryptografischen Viren"</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Teip-Abschnitt der Bedienungsanleitung (auf Englisch)</font></font></a> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nun, die Review-Videos „How it works“ (obwohl bisher auf Englisch) sind an ihren früheren Platz zurückgekehrt - Sie können sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ansehen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Das Teiping ist auf den Folien 95 - 102 beschrieben.</font></font></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de443716/">https://habr.com/ru/post/de443716/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de443702/index.html">So delegieren Sie einfache Berichte an den Roboter. Schreiben eines Bots in Python und Google BigQuery</a></li>
<li><a href="../de443704/index.html">Nach den Ergebnissen des Börsengangs von 2019 könnten im Silicon Valley 5.000 neue Millionäre auftauchen</a></li>
<li><a href="../de443708/index.html">Die Chang'e 4 Mission ist der dritte Mondtag. Rover "Yutu-2" auf der Suche nach ... Steinen</a></li>
<li><a href="../de443710/index.html">Java Challengers # 4: Vergleichen von Objekten mit equals () und hashCode ()</a></li>
<li><a href="../de443714/index.html">ControlValueAccessor und contenteditable in Angular</a></li>
<li><a href="../de443718/index.html">Fantasy-Spiel mit 300.000 Rennen</a></li>
<li><a href="../de443720/index.html">Details</a></li>
<li><a href="../de443722/index.html">Design und Benennung von Warteschlangen</a></li>
<li><a href="../de443724/index.html">AMD Radeon VII: High-End-Chip (Teil 1)</a></li>
<li><a href="../de443726/index.html">Setup-Funktionen von Palo Alto Networks: SSL VPN</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>