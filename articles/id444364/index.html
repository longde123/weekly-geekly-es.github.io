<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â˜ï¸ ğŸ§–ğŸ» ğŸ¤·ğŸ½ 24 jam permainan Rust: pengalaman pengembangan pribadi ğŸ“¶ ğŸšœ âœï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada artikel ini saya akan berbicara tentang pengalaman pribadi saya dalam mengembangkan game kecil di Rust. Butuh sekitar 24 jam untuk membuat versi ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>24 jam permainan Rust: pengalaman pengembangan pribadi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/444364/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/019/753/9bf/0197539bf7364b198561856cd6dfd961.png" alt="gambar"></div><br>  Pada artikel ini saya akan berbicara tentang pengalaman pribadi saya dalam mengembangkan game kecil di Rust.  Butuh sekitar 24 jam untuk membuat versi yang berfungsi (saya terutama bekerja di malam hari atau pada akhir pekan).  Game ini masih jauh dari selesai, tapi saya pikir pengalaman itu akan berguna.  Saya akan memberi tahu Anda apa yang saya pelajari dan beberapa pengamatan yang dilakukan saat membangun game dari awal. <br><a name="habracut"></a><br><blockquote>  <b>Skillbox merekomendasikan:</b> Kursus praktis dua tahun <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Saya seorang Pengembang Web PRO</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"</a> <br><br>  <b>Kami mengingatkan Anda:</b> <i>untuk semua pembaca "Habr" - diskon 10.000 rubel saat mendaftar untuk kursus Skillbox apa pun menggunakan kode promo "Habr".</i> </blockquote><br><h3>  Kenapa berkarat? </h3><br>  Saya memilih bahasa ini karena saya mendengar banyak hal baik tentangnya dan saya melihat bahwa bahasa ini menjadi semakin populer di bidang pengembangan game.  Sebelum menulis permainan, saya memiliki sedikit pengalaman mengembangkan aplikasi sederhana di Rust.  Ini cukup untuk merasakan kebebasan tertentu saat menulis permainan. <br><br><h3>  Mengapa tepatnya gim dan jenis gim apa? </h3><br>  Membuat game itu menyenangkan!  Saya ingin lebih banyak alasan, tetapi untuk proyek "rumah" saya memilih topik yang tidak terlalu terkait dengan pekerjaan saya yang biasa.  Game seperti apa?  Saya ingin melakukan sesuatu seperti simulator tenis yang menggabungkan Kota Skylines, Zoo Tycoon, Prison Architect dan tenis itu sendiri.  Secara umum, ternyata permainan tentang akademi tenis, di mana orang-orang datang untuk bermain. <br><br><h3>  Pelatihan teknis </h3><br>  Saya ingin menggunakan Rust, tetapi saya tidak tahu persis bagaimana "dari awal" saya harus memulai.  Saya tidak ingin menulis pixel shader dan menggunakan drag-n-drop, jadi saya mencari solusi yang paling fleksibel. <br><br>  Menemukan sumber daya bermanfaat yang saya bagikan dengan Anda: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apakah kita game</a> - daftar elemen Rust yang dibutuhkan untuk pengembangan game; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rust game dev subreddit;</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Seni piksel gratis.</a> </li></ul><br>  Saya menjelajahi beberapa mesin game Rust, akhirnya memilih Piston dan ggez.  Saya menemukan mereka ketika mengerjakan proyek sebelumnya.  Pada akhirnya, saya memilih ggez, karena sepertinya lebih cocok untuk mengimplementasikan game 2D kecil.  Struktur modular Piston terlalu rumit untuk pengembang pemula (atau seseorang yang bekerja dengan Rust untuk pertama kalinya). <br><br><h3>  Struktur permainan </h3><br>  Saya menghabiskan sedikit waktu untuk memikirkan arsitektur proyek.  Langkah pertama adalah membuat "tanah", orang-orang dan lapangan tenis.  Orang-orang harus berkeliling pengadilan dan menunggu.  Pemain harus memiliki keterampilan yang meningkat seiring waktu.  Plus, harus ada editor yang memungkinkan Anda untuk menambah orang dan pengadilan baru, tetapi ini tidak lagi gratis. <br><br>  Memikirkan segalanya, saya mulai bekerja. <br><br><h3>  Pembuatan game </h3><br>  <b>Mulai: Lingkaran dan Abstraksi</b> <br><br>  Saya mengambil contoh dari ggez dan mendapat lingkaran di layar.  Luar biasa  Sekarang beberapa abstraksi.  Sepertinya saya senang mengabaikan gagasan tentang objek game.  Setiap objek harus dirender dan diperbarui sebagaimana ditunjukkan di sini: <br><br><pre><code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// the game object trait trait GameObject { fn update(&amp;mut self, _ctx: &amp;mut Context) -&gt; GameResult&lt;()&gt;; fn draw(&amp;mut self, ctx: &amp;mut Context) -&gt; GameResult&lt;()&gt;; } // a specific game object - Circle struct Circle { position: Point2, } impl Circle { fn new(position: Point2) -&gt; Circle { Circle { position } } } impl GameObject for Circle { fn update(&amp;mut self, _ctx: &amp;mut Context) -&gt; GameResult&lt;()&gt; { Ok(()) } fn draw(&amp;mut self, ctx: &amp;mut Context) -&gt; GameResult&lt;()&gt; { let circle = graphics::Mesh::new_circle(ctx, graphics::DrawMode::Fill, self.position, 100.0, 2.0)?; graphics::draw(ctx, &amp;circle, na::Point2::new(0.0, 0.0), 0.0)?; Ok(()) } }</span></span></code> </pre> <br>  Sepotong kode ini memungkinkan saya untuk mendapatkan daftar objek yang sangat bagus yang dapat saya perbarui dan render dalam satu lingkaran yang sama baiknya. <br><br><pre> <code class="rust hljs">mpl event::EventHandler <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MainState { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, context: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Context) -&gt; GameResult&lt;()&gt; { <span class="hljs-comment"><span class="hljs-comment">// Update all objects for object in self.objects.iter_mut() { object.update(context)?; } Ok(()) } fn draw(&amp;mut self, context: &amp;mut Context) -&gt; GameResult&lt;()&gt; { graphics::clear(context); // Draw all objects for object in self.objects.iter_mut() { object.draw(context)?; } graphics::present(context); Ok(()) } }</span></span></code> </pre> <br>  main.rs diperlukan karena mengandung semua baris kode.  Saya menghabiskan sedikit waktu untuk memisahkan file dan mengoptimalkan struktur direktori.  Begini caranya semuanya mulai terlihat setelah itu: <br><br>  <i>sumber daya -&gt; ini adalah tempat semua aset (gambar)</i> <i><br></i>  <i>src</i> <i><br></i>  <i>- entitas</i> <i><br></i>  <i>- game_object.rs</i> <i><br></i>  <i>- circle.rs</i> <i><br></i>  <i>- main.rs -&gt; loop utama</i> <br><br>  <b>Orang, lantai, dan gambar</b> <br><br>  Langkah selanjutnya adalah membuat objek game Person dan memuat gambar.  Semuanya harus didasarkan pada ubin berukuran 32 * 32. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/642/4c6/65c/6424c665cb9442c5471a49d987954880.png"><br><br>  <b>Lapangan tenis</b> <br><br>  Setelah mempelajari bagaimana tampilan lapangan tenis, saya memutuskan untuk membuatnya dari ubin 4 * 2.  Awalnya, dimungkinkan untuk membuat gambar sebesar ini atau membuat 8 ubin terpisah.  Tetapi kemudian saya menyadari bahwa hanya dua ubin unik yang diperlukan, dan itulah sebabnya. <br><br>  Secara total, kami memiliki dua ubin: 1 dan 2. <br><br>  Setiap bagian pengadilan terdiri dari ubin 1 atau ubin 2. Mereka dapat diatur seperti biasa atau terbalik 180 derajat. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/26d/de1/e6f/26dde1e6f7ec2459c89752754a048c04.png"><br><br>  <b>Mode utama konstruksi (perakitan)</b> <br><br>  Setelah saya berhasil mencapai rendering situs, orang, dan peta, saya menyadari bahwa mode pembangunan dasar juga diperlukan.  Diimplementasikan seperti ini: ketika tombol ditekan, objek dipilih, dan klik menempatkannya di tempat yang tepat.  Jadi, tombol 1 memungkinkan Anda memilih pengadilan, dan tombol 2 memungkinkan Anda memilih pemain. <br><br>  Tapi Anda masih perlu mengingat apa yang kami maksud 1 dan 2, jadi saya menambahkan wireframe sehingga jelas objek mana yang dipilih.  Ini tampilannya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e96/63d/e17/e9663de17e6b402f43cab61e3905c874.gif"></div><br>  <b>Pertanyaan tentang arsitektur dan refactoring</b> <br><br>  Sekarang saya memiliki beberapa objek permainan: orang, lapangan dan lantai.  Tetapi agar wireframe berfungsi, Anda perlu memberi tahu setiap entitas objek apakah objek itu sendiri dalam mode demonstrasi, atau jika sebuah bingkai hanya digambar.  Ini sangat tidak nyaman. <br><br>  Sepertinya saya perlu memikirkan kembali arsitekturnya sehingga beberapa batasan terungkap: <br><br><ul><li>  Kehadiran entitas yang menampilkan dan memperbarui itu sendiri adalah masalah, karena entitas ini tidak akan dapat "tahu" apa yang harus dirender - gambar dan gambar rangka; </li><li>  kurangnya alat untuk bertukar properti dan perilaku antara entitas individu (misalnya, properti is_build_mode atau perilaku rendering).  Warisan dapat digunakan, meskipun tidak ada cara normal untuk mengimplementasikannya di Rust.  Yang benar-benar saya butuhkan adalah tata letak; </li><li>  alat untuk interaksi entitas di antara mereka diperlukan untuk menugaskan orang ke pengadilan; </li><li>  entitas itu sendiri adalah campuran data dan logika, yang dengan cepat lepas kendali. </li></ul><br><blockquote>  <i>Saya melakukan riset lebih lanjut dan menemukan arsitektur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ECS - Entity Component System</a> , yang biasa digunakan dalam gim.</i>  <i>Berikut adalah manfaat ECS:</i> <i><br><br></i> <ul><li>  data dipisahkan dari logika; </li><li>  tata letak bukan warisan; </li><li>  arsitektur berorientasi data. </li></ul></blockquote><br>  ECS ditandai oleh tiga konsep dasar: <br><br><ul><li>  entitas - jenis objek yang dirujuk oleh pengidentifikasi (bisa berupa pemain, bola, atau yang lainnya); </li><li>  komponen - entitas terdiri dari mereka.  Contohnya adalah komponen rendering, tata letak, dan lainnya.  Ini adalah gudang data; </li><li>  sistem - mereka menggunakan objek dan komponen, ditambah lagi mengandung perilaku dan logika yang didasarkan pada data ini.  Contohnya adalah sistem rendering yang beralih di atas semua entitas dengan komponen untuk rendering dan terlibat dalam rendering. </li></ul><br>  Setelah mempelajarinya menjadi jelas bahwa ECS memecahkan masalah seperti itu: <br><br><ul><li>  menggunakan tata letak alih-alih warisan untuk sistem organisasi entitas; </li><li>  menyingkirkan hash kode karena sistem kontrol; </li><li>  menggunakan metode seperti is_build_mode untuk menyimpan logika wireframe di tempat yang sama - di sistem rendering. </li></ul><br>  Inilah yang terjadi setelah menerapkan ECS. <br><br>  <i>sumber daya -&gt; ini adalah tempat semua aset (gambar)</i> <i><br></i>  <i>src</i> <i><br></i>  <i>- komponen</i> <i><br></i>  <i>- position.rs</i> <i><br></i>  <i>- person.rs</i> <i><br></i>  <i>- tennis_court.rs</i> <i><br></i>  <i>- floor.rs</i> <i><br></i>  <i>- gambar rangka.rs</i> <i><br></i>  <i>- mouse_tracked.rs</i> <i><br></i>  <i>- sumber daya</i> <i><br></i>  <i>- mouse.rs</i> <i><br></i>  <i>- sistem</i> <i><br></i>  <i>- rendering.rs</i> <i><br></i>  <i>- constants.rs</i> <i><br></i>  <i>- utils.rs</i> <i><br></i>  <i>- world_factory.rs -&gt; fungsi pabrik dunia</i> <i><br></i>  <i>- main.rs -&gt; loop utama</i> <br><br><h3>  Tetapkan orang ke pengadilan </h3><br>  ECS membuat hidup lebih mudah.  Sekarang saya punya cara sistematis untuk menambahkan data ke entitas dan menambahkan logika berdasarkan data ini.  Dan ini, pada gilirannya, memungkinkan untuk mengatur distribusi orang oleh pengadilan. <br><br>  Apa yang saya lakukan: <br><br><ul><li>  menambahkan data tentang pengadilan yang ditugaskan kepada Orang; </li><li>  menambahkan data tentang orang yang didistribusikan ke TennisCourt; </li><li>  menambahkan CourtChoosingSystem, yang memungkinkan Anda untuk menganalisis orang dan situs, menemukan pengadilan yang tersedia dan mendistribusikan pemain kepada mereka; </li><li>  menambahkan sistem PersonMovementSystem, yang mencari orang-orang yang ditugaskan ke pengadilan, dan jika mereka tidak ada di sana, itu mengirim orang-orang di mana diperlukan. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b0/c8e/c95/7b0c8ec951007ad4d5895716c3ca7618.gif"></div><br><h3>  Untuk meringkas </h3><br>  Saya sangat menikmati mengerjakan game sederhana ini.  Selain itu, saya senang saya menggunakan Rust untuk menulisnya, karena: <br><br><ul><li>  Rust memberi Anda apa yang Anda butuhkan; </li><li>  ia memiliki dokumentasi yang sangat bagus, Rust sangat elegan; </li><li>  kekonstanan itu keren; </li><li>  Anda tidak perlu menggunakan kloning, menyalin, atau tindakan serupa lainnya, yang sering saya lakukan di C ++; </li><li>  Opsi sangat nyaman untuk bekerja, mereka juga menangani kesalahan dengan sempurna; </li><li>  jika proyek dapat dikompilasi, maka dalam 99% berhasil, dan persis seperti seharusnya.  Menurut saya, pesan kesalahan kompiler adalah yang terbaik dari yang pernah saya lihat. </li></ul><br>  Pengembangan game di Rust baru saja dimulai.  Tetapi sudah ada komunitas yang stabil dan cukup besar yang bekerja untuk membuka Rust bagi semua orang.  Oleh karena itu, saya melihat masa depan bahasa dengan optimisme, menantikan hasil kerja kita bersama. <br><br><blockquote>  <b>Skillbox merekomendasikan:</b> <br><br><ul><li>  Kursus online <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Pengembang profesional frontend</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"</a> </li><li>  Kursus praktis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"PRO Pengembang Seluler"</a> . </li><li>  Kursus tahunan praktis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Pengembang PHP dari 0 hingga PRO"</a> . </li></ul><br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id444364/">https://habr.com/ru/post/id444364/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id444352/index.html">Kontur.Kampus: kami mengundang Anda ke kemah mahasiswa gratis pengembangan industri dekat St. Petersburg</a></li>
<li><a href="../id444356/index.html">React Tutorial Bagian 24: Pelajaran Bentuk Kedua</a></li>
<li><a href="../id444358/index.html">Enumerable: Cara menghasilkan nilai bisnis</a></li>
<li><a href="../id444360/index.html">Ketidakadilan Google Play sebagai pengalaman hidup yang baik</a></li>
<li><a href="../id444362/index.html">Unity dan Havok sedang mengerjakan mesin fisika baru</a></li>
<li><a href="../id444366/index.html">Seminar "Persyaratan Keamanan Informasi: Bagaimana Bisnis Bisa Hidup Bersama Mereka"</a></li>
<li><a href="../id444368/index.html">Kami baru saja mencetak mikrofon pada printer 3D di laboratorium - dan kemudian akan ada fiksi ilmiah lengkap</a></li>
<li><a href="../id444370/index.html">Apa yang mampu dilakukan oleh format Mini PCI-e?</a></li>
<li><a href="../id444372/index.html">Orientasi mesin jarak jauh menggunakan pembelajaran yang diperkuat</a></li>
<li><a href="../id444374/index.html">Efek hipster: mengapa orang yang tidak patuh sering terlihat sama</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>