<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🌾 💠 😬 Microservice الهندسة المعمارية على كومة حديثة من تقنيات جافا 🌞 🖕🏾 🤲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="كان لدينا JDK 11 و Kotlin و Spring 5 و Spring Boot 2 و Gradle 5 مع Kotlin DSL الجاهزة للإنتاج و JUnit 5 وعشرات مكتبات تكديس Spring Cloud لاكتشاف الخدم...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Microservice الهندسة المعمارية على كومة حديثة من تقنيات جافا</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431474/" style=";text-align:right;direction:rtl">  <i>كان لدينا JDK 11 و Kotlin و Spring 5 و Spring Boot 2 و Gradle 5 مع Kotlin DSL الجاهزة للإنتاج و JUnit 5 وعشرات مكتبات تكديس Spring Cloud لاكتشاف الخدمة وإنشاء واجهات برمجة التطبيقات الخاصة بالبوابة وموازنة العميل وتنفيذ قواطع دوائر كتابة عملاء HTTP التعريفي والتتبع الموزع وكل ذلك.</i>  <i>ليس هذا كل ما هو مطلوب لإنشاء بنية microservice - فقط للمتعة فقط ...</i> <br><a name="habracut"></a><br><h1 style=";text-align:right;direction:rtl">  الدخول </h1><br>  في هذه المقالة ، سترى مثالًا على بنية الخدمات الميكروية باستخدام التقنيات ذات الصلة في عالم Java ، والتي يتم تقديم أهمها أدناه (يتم استخدام الإصدارات المشار إليها في المشروع في وقت النشر): <br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><tbody><tr><th>  نوع التكنولوجيا </th><th>  العنوان </th><th>  الإصدار </th></tr><tr><td>  منصة </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">جدك</a> </td><td>  11.0.1 </td></tr><tr><td>  لغة البرمجة </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">كوتلين</a> </td><td>  1.3.10 </td></tr><tr><td rowspan="2">  إطار التطبيق </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">إطار الربيع</a> </td><td>  5.0.9 </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">التمهيد الربيع</a> </td><td>  2.0.5 </td></tr><tr><td rowspan="2">  بناء النظام </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Gradle</a> </td><td>  5.0 </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Gradle Kotlin DSL</a> </td><td>  1.0.4 </td></tr><tr><td>  إطار اختبار الوحدة </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Junit</a> </td><td>  5.1.1 </td></tr><tr><td colspan="3" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">سحابة الربيع</a> </td></tr><tr><td>  نقطة وصول واحدة (بوابة API) </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">بوابة سحابة الربيع</a> </td><td rowspan="7">  مشمول في مشروع قطار الإصدار Finchley SR2 Spring Cloud </td></tr><tr><td>  التكوين المركزي </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">التكوين سحابة الربيع</a> </td></tr><tr><td>  طلب التتبع (التتبع الموزع) </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">سحابة الربيع</a> </td></tr><tr><td>  عميل HTTP التعريفي </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">سحابة الربيع OpenFeign</a> </td></tr><tr><td>  اكتشاف الخدمة </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Spring Cloud Netflix Eureka</a> </td></tr><tr><td>  قاطع الدائرة </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Spring Cloud Netflix Hystrix</a> </td></tr><tr><td>  موازنة التحميل من جانب العميل </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">سحابة الربيع نيتفليكس الشريط</a> </td></tr></tbody></table></div><br>  يتكون المشروع من 5 خدمات مصغرة: 3 بنية أساسية (خادم التهيئة ، خادم اكتشاف الخدمة ، بوابة واجهة المستخدم) وأمثلة من الواجهة الأمامية (العناصر واجهة المستخدم) والجهة الخلفية (خدمة العناصر): <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/jz/rw/ia/jzrwiaehuhksnkj2dzmjea-43fy.png"></div><br>  كل منهم سوف ينظر بالتتابع أدناه.  في مشروع "قتالي" ، من الواضح ، سيكون هناك المزيد من الخدمات المصغرة التي تنفذ أي وظيفة تجارية.  تتم إضافتها إلى بنية مشابهة تقنيًا بالطريقة نفسها مثل خدمة عناصر واجهة المستخدم والعناصر. <br><br><h3 style=";text-align:right;direction:rtl">  إخلاء المسؤولية </h3><br>  لا تعتبر المقالة أدوات لتعبئة الحاويات وتنسيقها ، حيث أنها لا تُستخدم في الوقت الحالي في المشروع. <br><br><h1 style=";text-align:right;direction:rtl">  خادم التكوين </h1><br>  تم استخدام Spring Cloud Config لإنشاء مستودع مركزي لتكوينات التطبيق.  يمكن قراءة Configs من مصادر مختلفة ، على سبيل المثال ، مستودع git منفصل ؛  في هذا المشروع ، للبساطة والوضوح ، فهي في موارد التطبيق: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/sm/35/af/sm35aft9609348sicenfjgosw1k.png"></div><br>  في هذه الحالة ، يبدو تكوين خادم التكوين ( <code>application.yml</code> ) نفسه كما يلي: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">spring: profiles: active: native cloud: config: server: native: search-locations: classpath:/config server: port: 8888</code> </pre> <br>  باستخدام المنفذ 8888 يسمح لعملاء ملقم التكوين بعدم تحديد منفذه بشكل صريح في <code>bootstrap.yml</code> .  عند بدء التشغيل ، يقومون بتحميل التكوين الخاص بهم عن طريق تنفيذ طلب GET على خادم HTTP API Config. <br><br>  يتكون رمز البرنامج لهذه الخدمة المجهرية من ملف واحد فقط ، يحتوي على إعلان فئة التطبيق والطريقة الرئيسية ، والتي ، على عكس كود جافا المكافئ ، هي وظيفة من المستوى الأعلى: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableConfigServer</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConfigServerApplication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fun</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">main</span></span></span></span>(args: Array&lt;String&gt;) { runApplication&lt;ConfigServerApplication&gt;(*args) }</code> </pre> <br>  فئات التطبيق والأساليب الرئيسية في الخدمات الصغيرة الأخرى لها مظهر مماثل. <br><br><h1 style=";text-align:right;direction:rtl">  خادم اكتشاف الخدمة </h1><br>  اكتشاف الخدمة هو نمط هندسة الخدمة المصغرة الذي يتيح لك تبسيط التفاعل بين التطبيقات في مواجهة تغيير محتمل في عدد مثيلاتها وموقع الشبكة.  أحد المكونات الرئيسية في هذا النهج هو سجل الخدمة - قاعدة بيانات عن الخدمات المصغرة ومثيلاتها ومواقع الشبكة (مزيد من التفاصيل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">هنا</a> ). <br><br>  في هذا المشروع ، يتم تطبيق اكتشاف الخدمة على أساس Netflix Eureka ، وهو <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">اكتشاف للخدمة من جانب العميل</a> : يقوم خادم Eureka بوظيفة سجل الخدمة ، وعميل Eureka ، قبل تنفيذ طلب إلى أي خدمة microservices ، اتصل بخادم Eureka للحصول على قائمة بمثيلات التطبيق الذي تم استدعاؤه ، تحميل (باستخدام Netflix Ribbon).  يتكامل Netflix Eureka ، مثل بعض مكونات مكدس OSS الأخرى من Netflix (مثل Hystrix و Ribbon) مع تطبيقات Spring Boot باستخدام <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Spring Cloud Netflix</a> . <br><br>  في تكوين خادم اكتشاف الخدمة الموجود في موارده ( <code>bootstrap.yml</code> ) ، يتم الإشارة فقط إلى اسم التطبيق والمعلمة التي تشير إلى أن بداية الخدمة المصغرة ستتم مقاطعة إذا كان من المستحيل الاتصال بخادم التكوين: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">spring: application: name: eureka-server cloud: config: fail-fast: true</code> </pre> <br>  يوجد باقي تكوين التطبيق في <code>eureka-server.yml</code> في موارد خادم التكوين: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">server: port: 8761 eureka: client: register-with-eureka: true fetch-registry: false</code> </pre> <br>  يستخدم خادم Eureka المنفذ 8761 ، والذي يسمح لجميع عملاء Eureka بعدم تحديده باستخدام القيمة الافتراضية.  تعني قيمة <code>register-with-eureka</code> (المشار إليها للتوضيح ، <code>register-with-eureka</code> يتم استخدامها أيضًا بشكل افتراضي) أن التطبيق نفسه ، مثله مثل خدمات microservices الأخرى ، سيتم تسجيله في خادم Eureka.  تحدد معلمة <code>fetch-registry</code> ما إذا كان عميل Eureka سيتلقى بيانات من سجل الخدمة. <br><br>  تتوفر قائمة بالطلبات المسجلة وغيرها من المعلومات على <code>http://localhost:8761/</code> : <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/sh/co/lz/shcolza08r8j3qkdmgb42exawqs.png"></div><br>  بدائل تطبيق اكتشاف الخدمة هي القنصل و Zookeeper وغيرها. <br><br><h1 style=";text-align:right;direction:rtl">  خدمة البنود </h1><br>  هذا التطبيق هو مثال على النهاية الخلفية مع تطبيق REST API باستخدام إطار WebFlux الذي ظهر في Spring 5 (الوثائق <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">هنا</a> ) ، أو بالأحرى Kotlin DSL له: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">itemsRouter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ItemHandler</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = router { path(<span class="hljs-string"><span class="hljs-string">"/items"</span></span>).nest { GET(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, handler::getAll) POST(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, handler::add) GET(<span class="hljs-string"><span class="hljs-string">"/{id}"</span></span>, handler::getOne) PUT(<span class="hljs-string"><span class="hljs-string">"/{id}"</span></span>, handler::update) } }</code> </pre> <br>  معالجة طلبات HTTP المستلمة يتم تفويضها إلى فئة برامج <code>ItemHandler</code> .  على سبيل المثال ، طريقة للحصول على قائمة كائنات بعض الكيان تبدو كما يلي: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ServerRequest</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = ServerResponse.ok() .contentType(APPLICATION_JSON_UTF8) .body(fromObject(itemRepository.findAll()))</code> </pre> <br>  يصبح التطبيق عميل خادم Eureka ، أي أنه يسجل ويستقبل البيانات من سجل الخدمة ، بسبب وجود <code>spring-cloud-starter-netflix-eureka-client</code> .  بعد التسجيل ، يرسل التطبيق وحدات hartbits إلى خادم Eureka بتردد معين ، وإذا كانت نسبة البتات التي يستلمها خادم Eureka لفترة زمنية محددة تنخفض عن عتبة معينة ، فسيتم حذف التطبيق من سجل الخدمة. <br><br>  ضع في اعتبارك إحدى الطرق لإرسال بيانات تعريف إضافية إلى خادم Eureka: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@PostConstruct</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addMetadata</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = aim.registerAppMetadata(mapOf(<span class="hljs-string"><span class="hljs-string">"description"</span></span> to <span class="hljs-string"><span class="hljs-string">"Some description"</span></span>))</code> </pre> <br>  تأكد من تلقي هذه البيانات بواسطة خادم Eureka من خلال الانتقال إلى <code>http://localhost:8761/eureka/apps/items-service</code> عبر Postman: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/5l/0v/xg/5l0vxgolfgjzyuceskxhmdv-0kc.png"></div><br><br><h1 style=";text-align:right;direction:rtl">  عناصر واجهة المستخدم </h1><br>  تؤدي هذه الخدمة المصغرة ، بالإضافة إلى إظهار التفاعل مع بوابة واجهة المستخدم (ستظهر في القسم التالي) ، وظيفة الواجهة الأمامية لخدمة العناصر ، والتي يمكن أن تتفاعل مع واجهة برمجة تطبيقات REST بعدة طرق: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  العميل إلى REST API مكتوب باستخدام OpenFeign: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@FeignClient(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"items-service"</span></span></span><span class="hljs-meta">, fallbackFactory = ItemsServiceFeignClient.ItemsServiceFeignClientFallbackFactory::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemsServiceFeignClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@GetMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/items/{id}"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-meta"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">@PathVariable(</span></span></span><span class="hljs-meta-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta"><span class="hljs-meta-string">"id"</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">)</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String <span class="hljs-meta"><span class="hljs-meta">@GetMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/not-existing-path"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testHystrixFallback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemsServiceFeignClientFallbackFactory</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">FallbackFactory</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ItemsServiceFeignClient</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> log = LoggerFactory.getLogger(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">override</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fun</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">create</span></span></span></span>(cause: Throwable) = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : ItemsServiceFeignClient { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String { log.error(<span class="hljs-string"><span class="hljs-string">"Cannot get item with id=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$id</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ItemsUiException(cause) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testHystrixFallback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String { log.error(<span class="hljs-string"><span class="hljs-string">"This is expected error"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"{\"error\" : \"Some error\"}"</span></span> } } } }</code> </pre> </li><li style=";text-align:right;direction:rtl">  فول <code>RestTemplate</code> <br>  يتم إنشاء سلة في java config: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-meta"><span class="hljs-meta">@LoadBalanced</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">restTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = RestTemplate()</code> </pre> <br>  واستخدمت بهذه الطريقة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requestWithRestTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String = restTemplate.getForEntity(<span class="hljs-string"><span class="hljs-string">"http://items-service/items/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$id</span></span></span><span class="hljs-string">"</span></span>, String::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class"> ?: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">"No result"</span></span></span></span></code> </pre> </li><li style=";text-align:right;direction:rtl">  <code>WebClient</code> فئة <code>WebClient</code> (طريقة خاصة بإطار WebFlux) <br>  يتم إنشاء سلة في java config: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">webClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(loadBalancerClient: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">LoadBalancerClient</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = WebClient.builder() .filter(LoadBalancerExchangeFilterFunction(loadBalancerClient)) .build()</code> </pre> <br>  واستخدمت بهذه الطريقة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requestWithWebClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Mono&lt;String&gt; = webClient.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>().uri(<span class="hljs-string"><span class="hljs-string">"http://items-service/items/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$id</span></span></span><span class="hljs-string">"</span></span>).retrieve().bodyToMono(String::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">)</span></span></code> </pre> </li></ol><br>  يمكن التحقق من حقيقة أن كل الطرق الثلاث ترجع نفس النتيجة من خلال الانتقال إلى <code>http://localhost:8081/example</code> : <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ma/c8/oz/mac8ozz07cju5mitffz_qiew9mc.png"></div><br>  أفضل الخيار باستخدام OpenFeign ، لأنه يجعل من الممكن تطوير عقد للتفاعل مع microservice ، والذي يتم تنفيذه بواسطة Spring.  يتم حقن الكائن الذي ينفذ هذا العقد ويستخدم مثل الحبة العادية: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs">itemsServiceFeignClient.getItem(<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br>  إذا فشل الطلب لسبب ما ، فسيتم استدعاء الأسلوب المقابل للفئة التي تنفذ واجهة <code>FallbackFactory</code> ، والتي تحتاج إلى معالجة الخطأ وإرجاع الاستجابة الافتراضية (أو رمي استثناء إضافي).  في حالة فشل عدد معين من المكالمات المتتالية ، سيفتح Fuse الدائرة (المزيد حول قواطع الدائرة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">هنا</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">وهنا</a> ) ، مما يتيح الوقت لاستعادة الخدمة الميكروية الساقطة. <br><br>  لاستخدام عميل Feign ، يلزمك إضافة تعليق توضيحي إلى <code>@EnableFeignClients</code> التطبيق <code>@EnableFeignClients</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableFeignClients(clients = [ItemsServiceFeignClient::class])</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemsUiApplication</span></span></span></span></code> </pre> <br>  لكي تعمل أداة الإرجاع Hystrix في عميل Feign ، تحتاج إلى إضافة ما يلي إلى تهيئة التطبيق: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">feign: hystrix: enabled: true</code> </pre> <br>  لاختبار تشغيل Hbackrix backback في عميل Feign ، ما عليك سوى الانتقال إلى <code>http://localhost:8081/hystrix-fallback</code> .  سيحاول عميل Feign تنفيذ الطلب على مسار غير موجود في خدمة العناصر ، مما سيؤدي إلى عودة الاستجابة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{<span class="hljs-attr"><span class="hljs-attr">"error"</span></span> : <span class="hljs-string"><span class="hljs-string">"Some error"</span></span>}</code> </pre> <br><h1 style=";text-align:right;direction:rtl">  بوابة واجهة المستخدم </h1><br>  يتيح لك نمط عبّارة واجهة برمجة التطبيقات إنشاء نقطة إدخال واحدة لواجهة برمجة التطبيقات التي توفرها خدمات microservices الأخرى (مزيد من التفاصيل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">هنا</a> ).  يقوم أحد التطبيقات التي تنفذ هذا النمط بإجراء توجيه (توجيه) لطلبات الخدمات الصغيرة ، ويمكنه أيضًا تنفيذ وظائف إضافية ، على سبيل المثال ، المصادقة. <br><br>  في هذا المشروع ، لمزيد من الوضوح ، يتم تنفيذ بوابة واجهة المستخدم ، أي نقطة دخول واحدة لوحدات واجهة مستخدم مختلفة ؛  من الواضح ، أن بوابة API يتم تنفيذها بالمثل.  يتم تنفيذ الخدمة المصغرة على أساس إطار Spring Cloud Gateway.  البديل هو Netflix Zuul ، وهو جزء من Netflix OSS ومتكامل مع Spring Boot باستخدام Spring Cloud Netflix. <br>  تعمل بوابة واجهة المستخدم على المنفذ 443 باستخدام شهادة SSL التي تم إنشاؤها (الموجودة في المشروع).  تم تكوين SSL و HTTPS على النحو التالي: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">server: port: 443 ssl: key-store: classpath:keystore.p12 key-store-password: qwerty key-alias: test_key key-store-type: PKCS12</code> </pre> <br>  يتم تخزين تسجيلات دخول المستخدم وكلمات المرور في تطبيق قائم على الخريطة لواجهة <code>ReactiveUserDetailsService</code> الخاصة بـ WebFlux: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reactiveUserDetailsService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: ReactiveUserDetailsService { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> user = User.withDefaultPasswordEncoder() .username(<span class="hljs-string"><span class="hljs-string">"john_doe"</span></span>).password(<span class="hljs-string"><span class="hljs-string">"qwerty"</span></span>).roles(<span class="hljs-string"><span class="hljs-string">"USER"</span></span>) .build() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> admin = User.withDefaultPasswordEncoder() .username(<span class="hljs-string"><span class="hljs-string">"admin"</span></span>).password(<span class="hljs-string"><span class="hljs-string">"admin"</span></span>).roles(<span class="hljs-string"><span class="hljs-string">"ADMIN"</span></span>) .build() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MapReactiveUserDetailsService(user, admin) }</code> </pre> <br>  يتم تكوين إعدادات الأمان على النحو التالي: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">springWebFilterChain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(http: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ServerHttpSecurity</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: SecurityWebFilterChain = http .formLogin().loginPage(<span class="hljs-string"><span class="hljs-string">"/login"</span></span>) .and() .authorizeExchange() .pathMatchers(<span class="hljs-string"><span class="hljs-string">"/login"</span></span>).permitAll() .pathMatchers(<span class="hljs-string"><span class="hljs-string">"/static/**"</span></span>).permitAll() .pathMatchers(<span class="hljs-string"><span class="hljs-string">"/favicon.ico"</span></span>).permitAll() .pathMatchers(<span class="hljs-string"><span class="hljs-string">"/webjars/**"</span></span>).permitAll() .pathMatchers(<span class="hljs-string"><span class="hljs-string">"/actuator/**"</span></span>).permitAll() .anyExchange().authenticated() .and() .csrf().disable() .build()</code> </pre> <br>  يحدد التكوين المحدد أن جزءًا من موارد الويب (على سبيل المثال ، الإحصائيات) متاح لجميع المستخدمين ، بما في ذلك أولئك الذين لم تتم المصادقة ، وكل شيء آخر ( <code>.anyExchange()</code> ) مصادق عليه فقط.  إذا حاولت إدخال عنوان URL يتطلب المصادقة ، فسيتم إعادة توجيهه إلى صفحة تسجيل الدخول ( <code>https://localhost/login</code> ): <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/vz/eu/yx/vzeuyxohx_kfb17mrg4llnv4n8q.png"></div><br>  تستخدم هذه الصفحة أدوات إطار عمل Bootstrap ، والذي يتصل بالمشروع باستخدام Webjars ، مما يجعل من الممكن إدارة المكتبات من جانب العميل كتبعيات منتظمة.  يستخدم الزعتر لتشكيل صفحات HTML.  تم تكوين الوصول إلى صفحة تسجيل الدخول باستخدام WebFlux: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">routes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = router { GET(<span class="hljs-string"><span class="hljs-string">"/login"</span></span>) { ServerResponse.ok().contentType(MediaType.TEXT_HTML).render(<span class="hljs-string"><span class="hljs-string">"login"</span></span>) } }</code> </pre> <br>  يمكن تكوين توجيه Spring Cloud Gateway بتكوين YAML أو java.  يتم تعيين المسارات إلى الخدمات الصغيرة إما يدويًا أو يتم إنشاؤها تلقائيًا استنادًا إلى البيانات الواردة من سجل الخدمة.  مع وجود عدد كبير بما فيه الكفاية من واجهات المستخدم التي تتطلب التوجيه ، سيكون من الأنسب استخدام التكامل مع سجل الخدمة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">spring: cloud: gateway: discovery: locator: enabled: true lower-case-service-id: true include-expression: serviceId.endsWith('-UI') url-expression: "'lb:http://'+serviceId"</code> </pre> <br>  تشير قيمة معلمة <code>include-expression</code> إلى أنه سيتم إنشاء التوجيهات فقط للخدمات الميكروية التي تنتهي أسماؤها في <i>واجهة المستخدم</i> ، وقيمة معلمة <code>url-expression</code> هي أنه يمكن الوصول إليها عبر بروتوكول HTTP ، على عكس بوابة واجهة المستخدم التي تعمل عبر HTTPS ، وعند الوصول إليها سوف يستخدمون موازنة تحميل العميل (يتم تنفيذها باستخدام Netflix Ribbon). <br><br>  فكر في مثال إنشاء طرق في java config يدويًا (بدون تكامل مع سجل الخدمة): <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">routeLocator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(builder: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">RouteLocatorBuilder</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = builder.routes { route(<span class="hljs-string"><span class="hljs-string">"eureka-gui"</span></span>) { path(<span class="hljs-string"><span class="hljs-string">"/eureka"</span></span>) filters { rewritePath(<span class="hljs-string"><span class="hljs-string">"/eureka"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>) } uri(<span class="hljs-string"><span class="hljs-string">"lb:http://eureka-server"</span></span>) } route(<span class="hljs-string"><span class="hljs-string">"eureka-internals"</span></span>) { path(<span class="hljs-string"><span class="hljs-string">"/eureka/**"</span></span>) uri(<span class="hljs-string"><span class="hljs-string">"lb:http://eureka-server"</span></span>) } }</code> </pre> <br>  طرق التوجيه الأولى إلى الصفحة الرئيسية لخادم Eureka المعروضة سابقًا ( <code>http://localhost:8761</code> ) ، والثاني مطلوب لتحميل الموارد على هذه الصفحة. <br><br>  تتوفر جميع المسارات التي أنشأها التطبيق على <code>https://localhost/actuator/gateway/routes</code> . <br><br>  في الخدمات المصغرة الأساسية ، قد يكون من الضروري الوصول إلى تسجيل الدخول و / أو أدوار المستخدم المصادق عليها في بوابة واجهة المستخدم.  للقيام بذلك ، قمت بإنشاء عامل تصفية يضيف الرؤوس المناسبة إلى الطلب: <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddCredentialsGlobalFilter</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GlobalFilter { private val loggedInUserHeader = "logged-in-user" private val loggedInUserRolesHeader = "logged-in-user-roles" override fun filter</span></span></span></span>(exchange: ServerWebExchange, chain: GatewayFilterChain) = exchange.getPrincipal&lt;Principal&gt;() .flatMap { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> request = exchange.request.mutate() .header(loggedInUserHeader, it.name) .header(loggedInUserRolesHeader, (it <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Authentication).authorities?.joinToString(<span class="hljs-string"><span class="hljs-string">";"</span></span>) ?: <span class="hljs-string"><span class="hljs-string">""</span></span>) .build() chain.filter(exchange.mutate().request(request).build()) } }</code> </pre> <br>  الآن دعنا ننتقل إلى واجهة مستخدم العناصر باستخدام بوابة واجهة المستخدم - <code>https://localhost/items-ui/greeting</code> ، على افتراض أن معالجة هذه الرؤوس قد تم تنفيذها بالفعل في عناصر واجهة المستخدم: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/rc/sl/_s/rcsl_sdjuf6vkxkite5h3rgzoui.png"></div><br>  Spring Cloud Sleuth هو حل لتتبع الاستعلام في نظام موزع.  تتم إضافة معرف التتبع (معرف التمرير) و Span Id (وحدة معرف العمل) إلى رؤوس الطلب التي تمر عبر العديد من الخدمات المصغرة (لتسهيل الفهم ، قمت بتبسيط المخطط ؛ وفيما يلي شرح أكثر تفصيلًا): <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/sp/1q/em/sp1qem4a6silx9bo3kh83enn_mu.png"></div><br>  هذه الوظيفة متصلة ببساطة عن طريق إضافة <code>spring-cloud-starter-sleuth</code> . <br><br>  من خلال تحديد إعدادات التسجيل المناسبة ، في وحدة التحكم الخاصة بالخدمات المصاحبة المقابلة ، يمكنك رؤية شيء مثل التالي (معرّف التتبع ومعرف Span معروضان بعد اسم الخدمة المصغرة): <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">DEBUG [ui-gateway,009b085bfab5d0f2,009b085bfab5d0f2,false] oscghRoutePredicateHandlerMapping : Route matched: CompositeDiscoveryClient_ITEMS-UI DEBUG [items-ui,009b085bfab5d0f2,947bff0ce8d184f4,false] oswrfunction.server.RouterFunctions : Predicate "(GET &amp;&amp; /example)" matches against "GET /example" DEBUG [items-service,009b085bfab5d0f2,dd3fa674cd994b01,false] oswrfunction.server.RouterFunctions : Predicate "(GET &amp;&amp; /{id})" matches against "GET /1"</code> </pre> <br>  للحصول على تمثيل رسومي للتتبع الموزع ، يمكنك استخدام Zipkin ، على سبيل المثال ، والذي سيكون بمثابة خادم يقوم بتجميع المعلومات حول طلبات HTTP من خدمات microservices الأخرى (مزيد من التفاصيل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">هنا</a> ). <br><br><h1 style=";text-align:right;direction:rtl">  الجمعية </h1><br>  اعتمادًا على نظام التشغيل ، يتم <code>gradlew clean build</code> <code>./gradlew clean build</code> أو <code>./gradlew clean build</code> . <br><br>  نظرًا لإمكانية استخدام برنامج <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Gradle wrapper</a> ، ليست هناك حاجة إلى برنامج Gradle مثبت محليًا. <br><br>  بناء والإطلاق اللاحق بنجاح على JDK 11.0.1.  قبل ذلك ، كان المشروع يعمل على JDK 10 ، لذلك افترض أنه لن يكون هناك أي مشكلة في التجميع والإطلاق على هذا الإصدار.  ليس لدي أي بيانات حول الإصدارات السابقة من JDK.  أيضًا ، ضع في اعتبارك أن Gradle 5 المستخدمة تتطلب JDK 8 على الأقل. <br><br><h1 style=";text-align:right;direction:rtl">  إطلاق </h1><br>  أوصي ببدء تشغيل التطبيقات بالترتيب الموضح في هذه المقالة.  إذا كنت تستخدم Intellij IDEA مع تمكين Run Dashboard ، فيجب أن تحصل على شيء مثل التالي: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/7h/yb/t0/7hybt0ljfcfnrkckajkikwctj-g.png"></div><br><h1 style=";text-align:right;direction:rtl">  الخاتمة </h1><br>  درس المقال مثالًا على بنية الخدمات المصغرة على حزمة التكنولوجيا الحالية في عالم Java ومكوناته الرئيسية وبعض الميزات.  آمل أن تكون المادة مفيدة.  شكرا لاهتمامكم! <br><br><h1 style=";text-align:right;direction:rtl">  المراجع </h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  مشروع <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">جيثب</a> كود المصدر </li><li style=";text-align:right;direction:rtl">  كريس ريتشاردسون <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Microservice المواد</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">مقال عن الخدمات الدقيقة</a> لمارتن فاولر </li><li style=";text-align:right;direction:rtl">  توجه <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">إلى</a> مارتن فاولر Microservices </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar431474/">https://habr.com/ru/post/ar431474/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar431460/index.html">"التقويم تستر" لشهر نوفمبر. اختبار زوج معقول</a></li>
<li><a href="../ar431462/index.html">كيف صنعنا ماسح ضوئي للسفن</a></li>
<li><a href="../ar431466/index.html">كيف تتوقف عن السعي لتحقيق التميز وتحقيق أقصى قدر من الإنتاجية</a></li>
<li><a href="../ar431468/index.html">تطبيق عملي لمولد التحويل باستخدام Verilog HDL</a></li>
<li><a href="../ar431470/index.html">هذا يمكنك (الكمبيوتر). قصة عن برنامج تلفزيوني منسي</a></li>
<li><a href="../ar431478/index.html">مؤتمر Roskomnadzor "حماية البيانات الشخصية"</a></li>
<li><a href="../ar431480/index.html">أصدرت Magento إصدار منصة رئيسية جديدة - 2.3.0 GA</a></li>
<li><a href="../ar431482/index.html">وأنت يا يوتا ...</a></li>
<li><a href="../ar431486/index.html">الذباب غير المرئي: طريقة جديدة لدراسة الجهاز العصبي من خلال تصبغ الأنسجة</a></li>
<li><a href="../ar431488/index.html">تعديل الصوت</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>