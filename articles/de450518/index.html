<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👢 🔉 📛 Arduino und Verarbeitung. So steuern Sie einen Mikrocontroller über einen COM-Port. Zwei-Wege-Kommunikation 🕴🏿 🙎🏿 🙋🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Im Internet gibt es ein Missverständnis, dass zur Steuerung eines Computers mit hausgemachter Elektronik nur spezielle Karten benöti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arduino und Verarbeitung. So steuern Sie einen Mikrocontroller über einen COM-Port. Zwei-Wege-Kommunikation</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450518/">  Hallo allerseits!  Im Internet gibt es ein Missverständnis, dass zur Steuerung eines Computers mit hausgemachter Elektronik nur spezielle Karten benötigt werden, die als USB-HID-Geräte erkannt werden können.  Und in Bezug auf <u><i>Arduino sprechen</i></u> alle nur über <u><i>Arduino Leanardo</i></u> .  Beliebte Bibliotheken wie <b>Tastatur</b> und <b>Maus</b> , mit denen Sie mithilfe des Mikrocontrollers eine Emulation der Maus oder Tastatur erstellen können, sind nur für ein Paar Arduino-Leonardo-Boards vorgesehen. <br><br>  Ich werde darüber sprechen, wie ein Arduino-Mikrocontroller (z. B. <u><i>Arduino Uno</i></u> ) und sein Verarbeitungsprogramm angeschlossen werden.  Nachdem Sie das Wissen über Java, auf dem Processing basiert, zu allem anderen hinzugefügt haben, können Sie ein Projekt unter der Kontrolle des gesamten Computers und nicht nur seiner eigenen Anwendung hinzufügen.  Das Thema der Steuerung eines Computerprogramms in Java ist kein Geheimnis, Google und Sie werden alles finden, das versichere ich Ihnen. <br><a name="habracut"></a><br><h3>  Download Entwicklungsumgebung (IDE) </h3><br>  Es gibt viele integrierte Entwicklungsumgebungen zum Programmieren von Mikrocontrollern in reinem C.  Von diesen kann das bequemste festgestellt werden: Atollic, Eclipse, Keil. <br><br>  Zur Vereinfachung und Zugänglichkeit dieses Handbuchs werde ich jedoch den Arduino IDE-Editor verwenden und in Arduino C schreiben.  Sie können einen solchen Editor von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der offiziellen Arduino-Website herunterladen</a> . <br><br>  Die Entwicklungsumgebung für die Programmierung auf Procrssing kann auch von der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offiziellen Website heruntergeladen werden</a> . <br><br>  Aus Gründen des Anstands ist anzumerken, dass die IDE-Daten sehr ähnlich sind, da sie auf derselben Engine geschrieben sind.  Und als Arduino erstellt wurde, versuchten die Gründer, ihren Code-Editor so weit wie möglich zu vereinfachen, wie dies im Verarbeitungs-Editor der Fall war. <br><br><h3>  Arduino  Wir bauen die Schaltung zusammen und schreiben den Code </h3><br>  In diesem Beispiel werde ich Arduino Uno verwenden.  Eine Taste, ein Potentiometer und eine LED werden daran angeschlossen.  Dementsprechend kann ich eine logische 0 oder 1 ausgeben. Lesen Sie eine logische 0 oder 1. Und führen Sie eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Analog-Digital-Wandlung</a> (ADC oder ADC) durch, wobei Sie abhängig von der Position des Potentiometers Zahlen von 0 bis 1023 (im Arduino Uno einen 10-Bit-ADC) erhalten.  Für ein Beispiel brauchen Sie nicht viel mehr, da dies die Hauptfunktionen sind, die ein Mikrocontroller ausführen kann. <br><br>  Schaltplan: <br><br><img src="https://habrastorage.org/webt/az/9e/vw/az9evwie9gjp4uojleeaoyjrnuk.png"><br><br>  In dem Diagramm ist die Anoden-LED über einen Begrenzungswiderstand (mindestens 220 Ohm, vorzugsweise 500 Ohm) über die Kathode an Pin D11 mit 5 V verbunden.  Der Knopf schließt den Boden und Pin D2.  Potentiometer ändert Potential an Pin A1. <br><br>  Der Mikrocontroller hat folgende Aufgabe: Wenn die Meldung „LED - H“ an der seriellen Schnittstelle (serieller COM-Anschluss) ankommt, leuchtet die LED auf.  Wenn die Meldung „LED - L“ eintrifft, löschen Sie die LED.  Alle 250 ms senden Sie eine Nachricht an die serielle Schnittstelle (in diesem Fall an den Computerbildschirm), die Nachricht „Pot -“ und die Nummer, die durch analoges Lesen von Pin A1 empfangen wurde.  Wenn eine Taste gedrückt wird, senden Sie einmal die Nachricht „Taste wird gedrückt!“. <br><br>  Hier ist mein Vorschlag zur Lösung dieses Problems (kein Beispiel, dem ich folgen soll): <br><br><div class="spoiler">  <b class="spoiler_title">Firmware für Arduino Uno</b> <div class="spoiler_text"><pre> <code class="hljs lua"><code class="cpp">#define pinPot A1 #define pinLed <span class="hljs-number"><span class="hljs-number">11</span></span> #define pinBtn <span class="hljs-number"><span class="hljs-number">2</span></span> void setup() { pinMode(pinPot, INPUT); pinMode(pinLed, OUTPUT); pinMode(pinBtn, INPUT_PULLUP); Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>); Serial.println(<span class="hljs-string"><span class="hljs-string">"The program starts.\n\n"</span></span>); } void loop() { /* INITIAL VARIABLES. Segment <span class="hljs-number"><span class="hljs-number">1</span></span> */ static <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> potMes[] = <span class="hljs-string"><span class="hljs-string">"Pot - "</span></span>; static <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> btnMes[] = <span class="hljs-string"><span class="hljs-string">"Button is pressed!"</span></span>; static <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> passLight[] = <span class="hljs-string"><span class="hljs-string">"Led - "</span></span>; static int passLength = sizeof(passLight) - <span class="hljs-number"><span class="hljs-number">1</span></span>; static int sizepm = sizeof(potMes) - <span class="hljs-number"><span class="hljs-number">1</span></span>; static int sizebtn = sizeof(btnMes) - <span class="hljs-number"><span class="hljs-number">1</span></span>; static bool flagLedState = LOW; static bool flagBtnPress = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; static long int curTime = <span class="hljs-number"><span class="hljs-number">0</span></span>; static const int period = <span class="hljs-number"><span class="hljs-number">200</span></span>; static bool flagEnableRead = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; /* INITIAL VARIABLES. Segment <span class="hljs-number"><span class="hljs-number">1</span></span> */ /* FUNCTIONS CALL. Segment <span class="hljs-number"><span class="hljs-number">2</span></span> */ /* * Led is attached to HIGH voltage from one side * And to pin on the other side * By that the inverting logic */ ReadSerialForLed(passLight, passLength, &amp;flagLedState); digitalWrite(pinLed, !flagLedState); /* * Button pin always is pulled to the HIGH voltage * And only when button is pressed - Voltage on pin goes to GROUND * So it is need to invert logic when <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> pins */ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!Bounce(pinBtn) &amp;&amp; flagBtnPress == <span class="hljs-literal"><span class="hljs-literal">false</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(int i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; sizebtn; i++){ Serial.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(btnMes[i]); } Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>); flagBtnPress = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!flagEnableRead){ curTime = millis(); flagEnableRead = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Bounce(pinBtn)){ flagBtnPress = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } /* * Read <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> send Info <span class="hljs-string"><span class="hljs-string">"Pot - "</span></span> + var Only after first press on button * Every <span class="hljs-string"><span class="hljs-string">'period'</span></span>ms */ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(millis() - curTime &gt; period &amp;&amp; flagEnableRead){ SendData(pinPot, potMes, sizepm); curTime = millis(); } /* FUNCTIONS CALL. Segment <span class="hljs-number"><span class="hljs-number">2</span></span> */ } /* * Pot - pin with potentiometer * pMes - Array with message before Pot value * sp - size of potentiometer message */ void SendData(int Pot, <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>* pMes, int sp){ static int varP[<span class="hljs-number"><span class="hljs-number">2</span></span>]; varP[<span class="hljs-number"><span class="hljs-number">0</span></span>] = analogRead(Pot); varP[<span class="hljs-number"><span class="hljs-number">1</span></span>] = varP[<span class="hljs-number"><span class="hljs-number">0</span></span>]/<span class="hljs-number"><span class="hljs-number">256</span></span>; // <span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-number"><span class="hljs-number">256</span></span> - <span class="hljs-number"><span class="hljs-number">1024</span></span>) varP[<span class="hljs-number"><span class="hljs-number">0</span></span>] = varP[<span class="hljs-number"><span class="hljs-number">0</span></span>]%<span class="hljs-number"><span class="hljs-number">256</span></span>; // <span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">255</span></span> //Send Message <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(int i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; sp; i++){ Serial.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">char</span></span>(pMes[i])); } //Send <span class="hljs-number"><span class="hljs-number">2</span></span> bits of data //Serial.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(varP[<span class="hljs-number"><span class="hljs-number">0</span></span>]); //Serial.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(varP[<span class="hljs-number"><span class="hljs-number">1</span></span>]); Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(analogRead(Pot)); Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>); } /* * Function, which is reads button pin with the bounce */ bool Bounce(int btn){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(btn) == <span class="hljs-literal"><span class="hljs-literal">true</span></span>){ delay(<span class="hljs-number"><span class="hljs-number">15</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(btn) == <span class="hljs-literal"><span class="hljs-literal">true</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } /* * If Message from Serial port, which you <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> will be the same to passLight * So look at the <span class="hljs-built_in"><span class="hljs-built_in">next</span></span> symbol after Pass Message. If it is symbol <span class="hljs-string"><span class="hljs-string">'H'</span></span> - make LED to light * If it is <span class="hljs-string"><span class="hljs-string">'L'</span></span> - make LED off. */ void ReadSerialForLed(<span class="hljs-built_in"><span class="hljs-built_in">char</span></span> *passLight_f, int passLength_f, bool* flagLedState_f){ static <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> sym; static int cntPass = <span class="hljs-number"><span class="hljs-number">0</span></span>; static bool readyGetLed = LOW; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Serial.available() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { sym = Serial.<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sym == passLight_f[cntPass] &amp;&amp; !readyGetLed){ cntPass++; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!readyGetLed){ cntPass = <span class="hljs-number"><span class="hljs-number">0</span></span>; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(readyGetLed){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sym == <span class="hljs-string"><span class="hljs-string">'H'</span></span>){ *flagLedState_f = HIGH; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sym == <span class="hljs-string"><span class="hljs-string">'L'</span></span>){ *flagLedState_f = LOW; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cntPass == passLength_f){ readyGetLed = HIGH; } } }</code></code> </pre> </div></div><br>  <i>Kommentar: Die LED ist über die Anode mit der Stromversorgung verbunden.</i>  <i>Dies kehrt die Logik des LED-Zustands um und profitiert nicht mehr.</i>  <i>Der Knopf ist aus wirtschaftlichen Gründen nicht mit einem Pull-up-Widerstand verbunden, da Arduino Uno eingebaute Pull-up-Widerstände enthält, die in der Schaltung enthalten sind, wenn der Pin in den INPUT_PULLUP-Modus initialisiert wird.</i> <i><br></i>  <i>Auch in der Firmware werden Meldungen über den vom Potentiometer übernommenen Wert erst nach dem ersten Knopfdruck gesendet!</i> <br><br>  Vergessen Sie nicht, den Port und die Karte auszuwählen, um die Firmware in die Karte zu füllen. <br><br><img src="https://habrastorage.org/webt/tt/ow/bu/ttowbuw18xkgx2celq3d3yksvdk.jpeg"><br><br>  Wenn Sie nicht wissen, welchen COM-Anschluss Sie für das Arduino-Board haben, gehen Sie unter Windows zu <br>  Systemsteuerung -&gt; Geräte-Manager und klicken Sie auf die Registerkarte „COM-Anschlüsse“ <br><br><img src="https://habrastorage.org/webt/im/ij/0b/imij0buxklsl9lolioy0z-_ozfm.jpeg"><br><br>  Wenn Ihr COM-Port nicht als meiner signiert ist, können Sie das Arduino jederzeit trennen und sehen, welcher Port weg ist.  Aber wenn niemand verschwunden ist und Arduin vom Computer überhaupt nicht erkannt wird, ist es Zeit, im Internet nach einer Lösung zu suchen.  Beginnen Sie jedoch mit der Aktualisierung der Treiber oder dem Wechsel der Karte. <br><br>  Wenn alles funktioniert, öffnen Sie den Anschlussmonitor und geben Sie „Led-H“, „Led-L“ ein, drücken Sie die Taste, drehen Sie das Potentiometer und schauen Sie auf den Bildschirm, um festzustellen, ob alles korrekt angezeigt wird. <br><br>  Habe genug gespielt - ändere den Code leicht. <br><br>  Ersetzen Sie die letzte Zeile durch den Code aus dem Kommentar. <br><br><pre> <code class="cpp hljs"> <span class="hljs-comment"><span class="hljs-comment">//Send 2 bits of data //Serial.write(varP[0]); //Serial.write(varP[1]); Serial.print(analogRead(Pot));</span></span></code> </pre> <br>  Jetzt sehen die Werte vom Potentiometer nicht mehr lesbar aus, aber ein solches Manöver ist für das Verarbeitungsprogramm erforderlich. <br><br><h3>  Verarbeitung.  Wir schreiben ein Programm, das mit einem Mikrocontroller interagiert </h3><br>  Das Wesen der Kommunikation zwischen dem Verarbeitungsprogramm und dem Mikrocontroller ist sehr einfach.  Für diese Programmiersprache gibt es eine serielle Bibliothek, mit der Sie Nachrichten empfangen können, die als <code>Serial.write();</code> gesendet werden <code>Serial.write();</code>  und ermöglicht es Ihnen auch, Nachrichten als <code>Serial.print();</code> zu senden <code>Serial.print();</code>  .  Es ist wichtig zu beachten, dass eine solche gesendete Nachricht in den Portpuffer geschrieben wird, was bedeutet, dass sie vom Mikrocontroller gelesen wird.  Wir müssen uns also nur mit dem gewünschten seriellen Port verbinden und Nachrichten empfangen / senden. <br><br>  Das folgende Programm verbindet die serielle Bibliothek und schreibt in die Editor-Konsole eine Liste aller COM-Ports, mit denen Sie eine Verbindung herstellen können. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> processing.serial.*; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String[] port = Serial.list(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; port.length; i++){ print(<span class="hljs-string"><span class="hljs-string">"Port number #"</span></span> + i + <span class="hljs-string"><span class="hljs-string">" "</span></span>); println(Serial.list()[<span class="hljs-number"><span class="hljs-number">0</span></span>]); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{}</code> </pre> <br>  Wenn Sie den Code in den Editor schreiben und auf die Schaltfläche „Start“ klicken (Pfeil 1 im Bild), wird das Anwendungsfenster angezeigt (2) und die Liste der COM-Anschlüsse in der Konsole angezeigt (3). <br><br><img src="https://habrastorage.org/webt/e9/v6/cx/e9v6cxk0zwyi_dxchv7nnc-fieo.jpeg"><br><br>  Ich habe nur einen solchen COM-Port und im Blatt, wie im Array, wird es die Nummer 0 sein. Aus diesen Gründen ist das Objekt der seriellen Klasse: <code>Serial port;</code>  Wenn es erstellt wird, wird das erste Element der <code>port = new Serial(this, Serial.list()[0], 9600);</code> angegeben. <code>port = new Serial(this, Serial.list()[0], 9600);</code> <br><br>  Gießen Sie mit einer Änderung unsere neueste Firmware in Arduin ein.  Dann schreiben Sie dieses Programm und führen es aus.  Darin Alle 500 Millisekunden wird eine Nachricht an den COM-Port gesendet, um die LED zu löschen oder zu leuchten.  Und wenn alles richtig gemacht ist, sollte die LED nach dem Start der Anwendung blinken. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> processing.serial.*; Serial port; <span class="hljs-comment"><span class="hljs-comment">// Create object from Serial class void setup(){ port = new Serial(this, Serial.list()[0], 9600); } void draw(){ delay(500); port.write("Led - H"); delay(500); port.write("Led - L"); }</span></span></code> </pre> <br>  Oder hier ist ein anderes Beispiel.  Die LED ändert ihren Status nach jedem Klick auf das Anwendungsfenster (mit den Abmessungen 800 x 800 Pixel) mit der Maustaste. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> processing.serial.*; Serial port; <span class="hljs-comment"><span class="hljs-comment">// Create object from Serial class int cnt = 0; void setup(){ size(800, 800); port = new Serial(this, Serial.list()[0], 9600); } void draw(){} void mousePressed() { cnt++; if(cnt % 2 == 1){ port.write("Led - H"); }else{ port.write("Led - L"); } }</span></span></code> </pre> <br><h3>  Verarbeitung.  Funktionsreiches Anwendungsbeispiel </h3><br>  Diese elementare Anwendung simuliert einen "Flug im Weltraum", wenn man es so nennen kann.  Der Wert vom Potentiometer ändert die Fluggeschwindigkeit, durch Drücken der Taste wird die Flugrichtung geändert.  Und jeder Mausklick im Anwendungsfenster ändert den Status der LED (ja, ich habe mir nichts Originelleres ausgedacht). <br><br>  Mein Code ist alles andere als perfekt. Nehmen Sie ihn nicht als gutes Beispiel.  Dies ist nur ein Beispiel, das funktioniert.  Hier ist er. <br><br><div class="spoiler">  <b class="spoiler_title">Beispiel für ein multifunktionales Programm</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> processing.serial.*; Serial port; <span class="hljs-comment"><span class="hljs-comment">// Create object from Serial class int val; // Data received from the serial port (symbol) int pot; // Data from potentiometer String potMes = "Pot - "; String btnMes = "Button is pressed!"; int cntPM = 0; // Counter Potentiometer Message. // When it equals to length of Pot Mess - get value. int cntBM = 0; int cntBtnPress = 0; int cntMousePress = 0; Star[] stars = new Star[1000]; float speed; int dir = 1; void setup(){ size(800, 800); for(int i = 0; i &lt; stars.length; i++){ stars[i] = new Star(); } frameRate(60); // 60 Frames per second port = new Serial(this, Serial.list()[0], 9600); // Wait for first message from Arduino delay(2000); while (port.available() &gt; 0) { val = port.read(); print(char(val)); } } void draw(){ if (port.available() &gt; 0) { val = port.read(); cntPM = CheckSymbol(potMes, cntPM, char(val), cntPM); cntBM = CheckSymbol(btnMes, cntBM, char(val), cntBM); } DrawRain(pot, 0, 1023); } void DrawRain(int speed_f, int min, int max){ background(0); translate(width/2,height/2); speed = dir*map(speed_f, min, max, 0, 50); for(int i = 0; i &lt; stars.length; i++){ stars[i].go(); stars[i].update(); stars[i].show(); } } int CheckSymbol(String mes, int index, char sym, int ret_val){ if(mes.charAt(index) == sym &amp;&amp; ret_val &lt; (mes.length() - 1)){ return (ret_val + 1); }else if( ret_val == (mes.length() - 1) &amp;&amp; mes.equals(potMes) ){ if(port.available() &gt; 0){ pot = port.read(); // First 0-255 value } if(port.available() &gt; 0){ pot += 256*port.read(); // Last 2 bits 256 - 1024 } }else if( ret_val == (mes.length() - 1) &amp;&amp; mes.equals(btnMes) ){ cntBtnPress++; dir = -dir; } return 0; } void mousePressed() { cntMousePress++; if(cntMousePress % 2 == 1){ port.write("Led - H"); }else{ port.write("Led - L"); } }</span></span></code> </pre> </div></div><br><h3>  Fazit </h3><br>  Ich denke, es ist notwendig zu schreiben, dass ich die Idee des letzten Programms von einem Programmierer aufgegriffen habe - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Daniel Shiffman</a> , der Videos dreht, die selbst für Kinder über das Programmieren in der Verarbeitung verständlich sind ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mehr als 140 visuelle Aufgaben wurden gelöst</a> ). <br><br>  Als ich versuchte herauszufinden, was und wie die Verarbeitung und die Arduino-Kommunikation selbst durchgeführt werden sollen, haben mir diese Websites wirklich geholfen: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">developer.alexanderklimov.ru/arduino/processing.php</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">arduino-diy.com/arduino-processing-osnovi</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de450518/">https://habr.com/ru/post/de450518/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de450506/index.html">So erstellen Sie eine Anwendung von der Website aus und stellen sie in wenigen Stunden auf Google Play. Teil 2/2: Vertrauenswürdige Webaktivität</a></li>
<li><a href="../de450508/index.html">Joe Armstrong über Elixir, Erlang, FP und OOP</a></li>
<li><a href="../de450510/index.html">Fünf Probleme im Betriebs- und Supportprozess von Highload-IT-Systemen</a></li>
<li><a href="../de450514/index.html">CVT gegen Zustand</a></li>
<li><a href="../de450516/index.html">Qualifizierte MacOS-Signatur</a></li>
<li><a href="../de450520/index.html">Erstellen einer zuverlässigen und verifizierten KI: Einhaltung von Spezifikationen, zuverlässige Schulung und formale Verifizierung</a></li>
<li><a href="../de450522/index.html">Internet-Geschichte: Zerfall, Teil 1</a></li>
<li><a href="../de450524/index.html">Computersteuerung per Telegramm</a></li>
<li><a href="../de450526/index.html">10. Check Point Erste Schritte R80.20. Identitätsbewusstsein</a></li>
<li><a href="../de450528/index.html">Das Verständnis von Joins ist gebrochen. Fortsetzung folgt. Versuch einer alternativen Visualisierung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>