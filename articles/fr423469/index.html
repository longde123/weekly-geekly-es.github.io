<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÅ üë©üèº‚Äçüî¨ ü§∑üèø Num√©ros √† virgule flottante Far West les plus rapides üîà üëåüèø üßëüèø‚Äçü§ù‚Äçüßëüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lors de la mise en ≈ìuvre d'un ¬´lecteur¬ª, un probl√®me s'est pos√© avec une pr√©cision accrue des calculs. L'algorithme de calcul a fonctionn√© rapidement ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Num√©ros √† virgule flottante Far West les plus rapides</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423469/"> Lors de la mise en ≈ìuvre d'un ¬´lecteur¬ª, un probl√®me s'est pos√© avec une pr√©cision accrue des calculs.  L'algorithme de calcul a fonctionn√© rapidement sur les nombres √† virgule flottante standard, mais lorsque les biblioth√®ques pour les calculs pr√©cis ont √©t√© connect√©es, tout a commenc√© √† ralentir sauvagement.  Dans cet article, nous consid√©rerons les algorithmes d'expansion des nombres √† virgule flottante en utilisant une approche multi-composants, gr√¢ce √† laquelle il a √©t√© possible d'obtenir une acc√©l√©ration, car l'arithm√©tique flottante est impl√©ment√©e sur une puce cp.  Cette approche sera utile pour un calcul plus pr√©cis de la d√©riv√©e num√©rique, de l'inversion matricielle, du d√©coupage polygonal ou d'autres probl√®mes g√©om√©triques.  Il est donc possible d'√©muler un flottant 64 bits sur des cartes vid√©o qui ne les prennent pas en charge. <br><br><img src="https://habrastorage.org/webt/54/1e/jo/541ejotttsu8hl3swtihly-liro.png" alt="benchmark double.js"><br><br><a name="habracut"></a><br><br><h3>  Pr√©sentation </h3><br>  Comme Nikluas Wirth nous a l√©gu√© de garder les chiffres 0 et 1, nous les stockons donc en eux.  Et est-ce que les humains vivent dans le syst√®me d√©cimal, et les nombres apparemment ordinaires 0,1 et 0,3 ne sont pas repr√©sentables dans le syst√®me binaire par une fraction finie?  Nous subissons un choc culturel lorsque nous effectuons des calculs √† leur sujet.  Bien s√ªr, des tentatives sont faites <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pour</a> cr√©er des biblioth√®ques pour les processeurs bas√©s sur le syst√®me d√©cimal et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IEEE a</a> m√™me des formats standardis√©s. <br><br>  Mais pour l'instant, nous prenons en compte le stockage binaire partout et effectuons tous les calculs d'argent avec des biblioth√®ques pour des calculs exacts, tels que bignumber, ce qui entra√Æne une perte de performances.  Les Asiks consid√®rent la crypto, et dans les processeurs, il y a si peu d'espace pour cette arithm√©tique d√©cimale, selon les sp√©cialistes du marketing.  Par cons√©quent, une approche √† plusieurs composants, lorsqu'un nombre est stock√© sous la forme d'une somme de nombres non transform√©e, est une astuce pratique et une sph√®re en d√©veloppement actif dans le domaine de l'informatique th√©orique.  Bien que Decker ait encore appris √† se multiplier correctement, sans perte de pr√©cision, en 1971, des biblioth√®ques pr√™tes √† l'emploi sont apparues beaucoup plus tard (MPFR, QD) et pas dans toutes les langues, apparemment car toutes ne prenaient pas en charge les normes IEEE, mais des preuves rigoureuses d'erreur de calcul encore plus tard, par exemple en 2017 pour l'arithm√©tique des mots doubles. <br><br><h3>  Arithm√©tique √† deux mots </h3><br>  √Ä quoi √ßa sert?  Dans les temps barbus, quand il n'y avait pas de normes pour les nombres flottants, pour √©viter des probl√®mes avec la mise en ≈ìuvre de l'arrondi, M√∏ller est venu avec, et Knuth a prouv√© plus tard qu'il y avait une sommation sans erreur.  Courir de cette fa√ßon <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quickTwoSum</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> s = a + b; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> z = s - a; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> e = b - z; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [s, e]; }</code> </pre> <br>  Dans cet algorithme, on a suppos√© que si <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mo>&amp;gt;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>b</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.913ex" height="2.66ex" viewBox="0 -832 3407.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-7C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMATHI-61" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-7C" x="808" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-3E" x="1364" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-7C" x="2420" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMATHI-62" x="2699" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-7C" x="3128" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mo>&gt;</mo><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>b</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-1"> | a | > | b | </script>  , alors leur somme exacte peut √™tre repr√©sent√©e comme la somme de deux nombres <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>s</mi><mo>+</mo><mi>e</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.014ex" height="1.937ex" viewBox="0 -676.4 2158.9 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-2B" x="691" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMATHI-65" x="1692" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>s</mi><mo>+</mo><mi>e</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> s + e </script>  et vous pouvez les stocker par paires pour les calculs ult√©rieurs, et la soustraction est r√©duite √† l'addition avec un nombre n√©gatif. <br><br><img src="https://habrastorage.org/webt/6o/5b/h3/6o5bh3at9xelrvk2yslo4qk0jl0.png" alt="arrondi √† la banque la plus proche"><br><br>  Par la suite, Dekker a montr√© que si des nombres √† virgule flottante sont utilis√©s qui utilisent l'arrondi au nombre pair le plus proche (liens arrondis au plus proche √† pair, ce qui est g√©n√©ralement une proc√©dure correcte qui ne conduit pas √† de grandes erreurs dans le processus de longs calculs et la norme IEEE), puis il y a un algorithme de multiplication sans erreur. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">twoMult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> A = split(a); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> B = split(b); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> r1 = a * b; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> t1 = -r1 + A[<span class="hljs-number"><span class="hljs-number">0</span></span>] * B[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> t2 = t1 + A[<span class="hljs-number"><span class="hljs-number">0</span></span>] * B[<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> t3 = t2 + A[<span class="hljs-number"><span class="hljs-number">1</span></span>] * B[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [r1, t3 + A[<span class="hljs-number"><span class="hljs-number">1</span></span>] * B[<span class="hljs-number"><span class="hljs-number">1</span></span>]]; }</code> </pre><br>  o√π split () est l'algorithme de M. Weltkamp pour diviser un nombre <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> splitter = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.pow(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">split</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> t = splitter * a; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> d = a - t; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> xh = t + d; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> xl = a - xh; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [xh, xl]; }</code> </pre><br>  en utilisant constante <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><mo>=</mo><msup><mn>2</mn><mi>s</mi></msup><mo>+</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.033ex" height="2.178ex" viewBox="0 -780.1 4750.5 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-3D" x="1038" y="0"></use><g transform="translate(2094,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMATHI-73" x="707" y="557"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-2B" x="3249" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-31" x="4249" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo>=</mo><msup><mn>2</mn><mi>s</mi></msup><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-3"> C = 2 ^ s + 1 </script>  ce qui √©quivaut √† un peu plus de la moiti√© de la longueur de la mantisse, ce qui ne conduit pas √† un d√©bordement de nombres en cours de multiplication et divise la mantisse en deux moiti√©s.  Par exemple, avec une longueur de mot de 64 bits, la longueur de la mantisse est 53 puis s = 27. <br><br><img src="https://habrastorage.org/webt/ut/k-/rl/utk-rlv912w0uw44uvm4cce4uts.gif" alt="flotteur double"><br><br>  De cette fa√ßon, Dekker a fourni l'ensemble presque complet n√©cessaire au calcul en arithm√©tique des mots doubles.  Depuis, il a √©galement √©t√© indiqu√© comment multiplier, diviser et mettre au carr√© deux nombres de deux mots. <br><br>  Son algorithme quickTwoSum pour additionner deux mots doubles √©tait partout ¬´en ligne¬ª, et la v√©rification a √©t√© utilis√©e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mo>&amp;gt;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>b</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.913ex" height="2.66ex" viewBox="0 -832 3407.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-7C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMATHI-61" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-7C" x="808" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-3E" x="1364" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-7C" x="2420" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMATHI-62" x="2699" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/423469/&amp;usg=ALkJrhgbTf6IGtrrZfE9EZdzRZBtFEBgPw#MJMAIN-7C" x="3128" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mo>&gt;</mo><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>b</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-4"> | a | > | b | </script>  .  Sur les processeurs modernes, comme d√©crit dans [4], il est moins co√ªteux d'utiliser des op√©rations suppl√©mentaires avec des nombres que de ramifier l'algorithme.  Par cons√©quent, l'algorithme suivant est maintenant plus appropri√© pour ajouter deux nombres d'un seul mot <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">twoSum</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> s = a + b; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a1 = s - b; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b1 = s - a1; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> da = a - a1; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> db = b - b1; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [s, da + db]; }</code> </pre><br>  Et c'est donc la somme et la multiplication des nombres √† double mot. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add22</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">X, Y</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> S = twoSum(X[<span class="hljs-number"><span class="hljs-number">0</span></span>], Y[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> E = twoSum(X[<span class="hljs-number"><span class="hljs-number">1</span></span>], Y[<span class="hljs-number"><span class="hljs-number">1</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> c = S[<span class="hljs-number"><span class="hljs-number">1</span></span>] + E[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> V = quickTwoSum(S[<span class="hljs-number"><span class="hljs-number">0</span></span>], c); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> w = V[<span class="hljs-number"><span class="hljs-number">1</span></span>] + E[<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> quickTwoSum(V[<span class="hljs-number"><span class="hljs-number">0</span></span>], w); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mul22</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">X, Y</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> S = twoMult(X[<span class="hljs-number"><span class="hljs-number">0</span></span>], Y[<span class="hljs-number"><span class="hljs-number">0</span></span>]); S[<span class="hljs-number"><span class="hljs-number">1</span></span>] += X[<span class="hljs-number"><span class="hljs-number">0</span></span>] * Y[<span class="hljs-number"><span class="hljs-number">1</span></span>] + X[<span class="hljs-number"><span class="hljs-number">1</span></span>] * Y[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> quickTwoSum(S[<span class="hljs-number"><span class="hljs-number">0</span></span>], S[<span class="hljs-number"><span class="hljs-number">1</span></span>]); }</code> </pre><br>  De mani√®re g√©n√©rale, la liste la plus compl√®te et la plus pr√©cise des algorithmes pour l'arithm√©tique des mots doubles, les limites d'erreur th√©orique et la mise en ≈ìuvre pratique sont d√©crits dans le lien [3] de 2017.  Par cons√©quent, si vous √™tes int√©ress√©, je vous recommande fortement d'y aller directement.  En g√©n√©ral, un algorithme pour quadruple mot est donn√© dans [6] et dans [5] pour une extension multicomposant de longueur arbitraire.  Seulement l√†, apr√®s chaque op√©ration, le processus de renormalisation est utilis√©, ce qui n'est pas toujours optimal pour les petites tailles, et la pr√©cision des calculs dans QD n'est pas strictement d√©finie.  En g√©n√©ral, il convient bien s√ªr de r√©fl√©chir aux limites d'applicabilit√© de ces approches. <br><br><h3>  Histoires d'horreur javascript-a.  Comparaison de decimal.js vs bignumber.js vs big.js. </h3><br>  Il se trouve que presque toutes les biblioth√®ques pour les calculs exacts en js ont √©t√© √©crites par une seule personne.  L'illusion du choix est cr√©√©e, bien qu'elles soient presque toutes les m√™mes.  De plus, la documentation n'indique pas explicitement que si vous n'arrondissez pas les nombres apr√®s chaque op√©ration de multiplication / division, la taille de votre nombre doublera tout le temps et la complexit√© de l'algorithme peut devenir facile en x3500.  Par exemple, une comparaison de leur temps de calcul pourrait ressembler √† ceci si vous n'avez pas arrondi les nombres. <br><br><img src="https://habrastorage.org/webt/lj/6r/pk/lj6rpkl_lenvq7vabfyqqhdwh8y.png"><br><br>  Autrement dit, vous d√©finissez la pr√©cision √† 32 d√©cimales et ... Oups, vous avez d√©j√† 64 chiffres, 128. Nous pensons tr√®s pr√©cis√©ment!  256, 512 ... Mais j'en ai r√©gl√© 32! .. 1024, 2048 ... Quelque chose comme √ßa appara√Æt au dessus de 3500 fois.  La documentation indique que si vous avez des calculs scientifiques, alors probablement decimal.js est mieux pour vous.  Bien qu'en fait, si vous arrondissez p√©riodiquement, Bignumber.js fonctionne un peu plus rapidement pour les calculs scientifiques (voir Fig. 1).  Qui doit compter les centi√®mes de centime s'ils ne peuvent pas √™tre donn√©s en monnaie?  Y a-t-il un cas o√π j'ai besoin de stocker plus de num√©ros indiqu√©s et que je ne peux pas sortir avec quelques caract√®res suppl√©mentaires?  Comment faut-il prendre le sinus d'un tel nombre de monstres, alors que personne ne conna√Æt la stricte pr√©cision de la convergence de la s√©rie de Taylor pour des nombres arbitraires?  En g√©n√©ral, il n'y a pas de soup√ßons non fond√©s qu'il soit possible d'augmenter la vitesse de calcul l√†-bas, en utilisant des algorithmes de multiplication de Schoenhage-Strassen et en trouvant le sinus avec des calculs Cordic, par exemple. <br><br><h3>  Double.js </h3><br>  <s>Je voudrais dire, bien s√ªr, que Double.js compte rapidement et avec pr√©cision.</s>  <s>Mais ce n'est pas tout √† fait vrai, c'est-√†-dire qu'il est 10 fois plus rapide qu'il le consid√®re, mais ce n'est pas toujours exact.</s>  <s>Par exemple, 0.3-0.1, il peut le traiter, passant en double stockage et vice versa.</s>  <s>Mais le nombre Pi peut √™tre r√©solu avec une double pr√©cision de pr√®s de 32 chiffres et cela ne fonctionne pas en arri√®re.</s>  <s>Une erreur est g√©n√©r√©e le 16, comme si un d√©bordement se produisait.</s>  <s>En g√©n√©ral, j'exhorte la communaut√© js √† travailler ensemble pour essayer de r√©soudre le probl√®me de l'analyse, car je suis coinc√©.</s>  <s>J'ai essay√© d'analyser num√©riquement et de diviser en double pr√©cision, comme dans QD, de diviser en lots de 16 chiffres et de diviser en double pr√©cision, de diviser la mantisse en utilisant Big.js comme dans l'une des biblioth√®ques Julia.</s>  <s>Maintenant, je p√®che sur un bogue dans .parseFloat (), car les normes IEEE avec arrondi √† l'entier le plus proche sont prises en charge m√™me avec ECMAScript 1. Bien que vous puissiez bien s√ªr essayer de lier le tampon binaire et regarder tous les 0 et 1. En g√©n√©ral, si vous pouvez r√©soudre ce probl√®me, alors il sera alors possible de faire des calculs avec une pr√©cision arbitraire avec une acc√©l√©ration en x10-x20 √† partir de bignumber.js.</s>  <s>Cependant, de nombreux Mandelbrot rendent d√©j√† la qualit√© et vous pouvez l'utiliser pour des t√¢ches g√©om√©triques.</s> <br><br>  Un an plus tard, je suis revenu ici et j'ai toujours r√©solu un probl√®me d'analyse.  Le probl√®me n'√©tait que d'une pr√©cision insuffisante, lorsqu'il √©tait multipli√© par 10 ^ (- n).  Tous les algorithmes ont √©t√© r√©vis√©s √† partir de z√©ro et fonctionnent d√©sormais avec une pr√©cision et une vitesse effrayantes. <br><br><img src="https://habrastorage.org/webt/ax/gx/mb/axgxmb_wfffxczzejqaxa9mqdpy.png" alt="double.js vs nombre"><br><br>  Voici un lien vers la <a href="">lib</a> , il y a un benchmark interactif et un bac √† sable o√π vous pouvez jouer avec. <br><br><h3>  Sources utilis√©es </h3><br><ol><li>  O. M√∏ller.  <i>Quasi double pr√©cision en arithm√©tique √† virgule flottante.</i>  , 1965. </li><li>  Theodorus Dekker.  <i>Une technique √† virgule flottante pour √©tendre la pr√©cision disponible</i> , 1971. [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Visionneuse</a> ] </li><li>  Mioara Joldes, Jean-Michel Muller, Valentina Popescu.  <i>Limites d'erreur strictes et rigoureuses pour les blocs de construction de base de l'arithm√©tique des mots doubles</i> , 2017. [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PDF</a> ] </li><li>  Muller, J.-M.  Brisebarre, N. de Dinechin, etc.  Manuel d'arithm√©tique √† virgule flottante, chapitre 14, 2010. </li><li>  Jonathan Shewchuk.  <i>Pr√©dicats g√©om√©triques adaptatifs √† virgule flottante robustes</i> , 1964. [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PDF</a> ] </li><li>  Yozo Hida, Xiaoye Li, David Bailey.  <i>Biblioth√®que d'arithm√©tique double-double et quad-double</i> , 2000. [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PDF</a> ] </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr423469/">https://habr.com/ru/post/fr423469/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr423459/index.html">Diff√©rences entre Phoenix et Rails √† travers les yeux d'un converti</a></li>
<li><a href="../fr423461/index.html">Automne suborbital</a></li>
<li><a href="../fr423463/index.html">Comme nous avons √©crit un autre algorithme d'analyse RFM</a></li>
<li><a href="../fr423465/index.html">Que lire sur l'ITSM: livres, blogs et derniers articles</a></li>
<li><a href="../fr423467/index.html">Les d√©veloppeurs russes publieront un catalogue de compatibilit√© des produits</a></li>
<li><a href="../fr423475/index.html">Pirater le code du vieillissement: une nouvelle science sur le vieillissement et ce que signifie rester jeune</a></li>
<li><a href="../fr423477/index.html">Soyez un ninja de la s√©curit√©: commencez votre chemin vers les hauteurs de l'IB</a></li>
<li><a href="../fr423479/index.html">"First": s'il faut voler vers Mars</a></li>
<li><a href="../fr423481/index.html">Je dois augmenter le cluster Kubernetes, mais je ne suis qu'un programmeur de code. Il y a un moyen de sortir</a></li>
<li><a href="../fr423483/index.html">Trouver la bonne fa√ßon de s√©parer le contenu d'un site Web √† l'aide de Webpack</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>