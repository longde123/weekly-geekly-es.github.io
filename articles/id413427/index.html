<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔫 🎿 🍨 Pemrograman untuk Insinyur Jaringan: Bekerja dengan Konfigurasi 🙅 ⚗️ 🥟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bahkan dalam jaringan yang baik, dari sudut pandang desain, dari waktu ke waktu perlu untuk melakukan pekerjaan memperbarui konfigurasi entitas terten...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pemrograman untuk Insinyur Jaringan: Bekerja dengan Konfigurasi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413427/">  Bahkan dalam jaringan yang baik, dari sudut pandang desain, dari waktu ke waktu perlu untuk melakukan pekerjaan memperbarui konfigurasi entitas tertentu.  Di antara alasan yang paling menarik dan diantisipasi untuk kegiatan tersebut, migrasi dapat dicatat untuk mengoordinasikan bidang fisik dan logis, pengembangan jaringan sebagai bagian dari proses evolusi teknologi, harmonisasi arsitektur dari segmen yang terhubung dan solusi dari masalah pertumbuhan.  Faktanya, siklus hidup suatu jaringan hampir selalu terdiri dari perubahan dengan satu atau lebih tingkat risiko dan efek menyeluruh pada layanan, di mana penilaian faktor manusia tidak dapat diabaikan.  Meskipun akan sangat tepat untuk menggeneralisasikan deskripsi ini ke sebagian besar bidang aktivitas manusia, berfungsinya jaringan komunikasi memiliki beberapa fitur yang pantas dipahami, atau setidaknya diperhatikan, - elemen-elemen jaringan komunikasi dalam komunikasi yang ketat, berinteraksi erat dan membuat tidak hanya langsung, tetapi juga tidak langsung berdampak satu sama lain.  Oleh karena itu, strategi yang kompeten dari pekerjaan yang sedang berjalan hanya akan menjadi lebih produktif jika didukung oleh mekanisme yang sejauh mungkin mengurangi kemungkinan kesalahan manusia.  Dalam artikel selanjutnya dari seri <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Mengapa program insinyur jaringan",</a> saya akan berbicara tentang opsi untuk menggunakan otomatisasi dalam satu tugas semacam ini. <br><a name="habracut"></a><br>  Dalam banyak "primer" pada arsitektur jaringan, istilah jaringan skala besar dan jaringan hierarkis digunakan hampir secara sinonim, berkenaan dengan desain domain IGP, desain sederhana dan, pada pandangan pertama, dapat dimengerti diindikasikan - memecah domain menjadi domain.  Pada saat yang sama, ambang saturasi adalah hal yang murni individual, dalam beberapa kasus, seribu router modern biasanya dapat hidup berdampingan dalam satu area IGP, jika tidak tiga ratus cukup untuk secara signifikan mengurangi karakteristik operasional.  Sebagian besar, ambang batas ini ditentukan oleh protokol yang diberlakukan pada IGP, oleh karena itu, dalam kondisi beberapa variabilitas dan ketidakpastian batas dan skala jaringan masa depan, "bison" industri menemukan cara yang lebih fleksibel untuk membangun domain datar dengan migrasi selanjutnya dari bagian-bagian yang terbentuk ke area terpisah.  Dengan kata lain, jika Anda tidak dapat "melihat besok besok", bangun jaringan datar dan bagilah dengan munculnya tanda-tanda pertama penurunan waktu konvergensi atau kompleksitas eksploitasi yang berlebihan, karena tidak adanya hierarki masih lebih baik daripada yang salah yang dipilih dengan ketidakpastian. struktur [1, 2, 3]. <br><br>  Cukup gambaran umum dan contoh-contoh abstrak, misalkan kita berhadapan dengan wilayah yang terlalu banyak pada domain OSPFv2, topologi dari serat / saluran fisik yang sudah memungkinkan untuk melihat batas-batas daerah di masa depan dalam struktur amorf.  Saya bukan pendukung mengubah sesuatu berdasarkan prinsip “semua atau tidak sama sekali”, mungkin terjadi karena keadaan yang tidak terduga, ruang peluang akan menjadi terlalu sempit, dan risiko yang diharapkan terlalu besar.  Mengubah wilayah OSPFv2 adalah operasi yang merusak, oleh karena itu skema proses migrasi yang paling mudah, yang terdiri dari pengalihan router secara berurutan ke wilayah baru di sepanjang jalan dari perbatasan masa depan ke bawah, jauh lebih nyaman di semua topologi.  Untungnya, beberapa waktu lalu, dalam rekomendasi untuk pengembangan OSPF, kemungkinan membangun konektivitas di beberapa area diuraikan [4].  Dengan menggunakan kesempatan ini, kami dapat membagi migrasi menjadi tiga tahap: <br><br><ol><li>  Membangun konektivitas tambahan (sekunder) di area baru </li><li>  Transfer area baru ke mode utama, dan yang lama ke area tambahan </li><li>  Menghapus konektivitas dalam lingkup lama </li></ol><br>  Pada tahap pertama, topologi wilayah baru berangsur-angsur meluas, pada tahap kedua, topologi wilayah lama semakin menyempit.  Tunduk pada kongruensi topologi area lama dan baru, kami memperoleh rute yang konsisten antara node yang diterjemahkan dan yang tidak diterjemahkan, dan ini, pada gilirannya, memungkinkan untuk membagi tahapan menjadi sub-tahap independen, di mana masing-masing pekerjaan dapat dilakukan dengan beberapa bagian dari node.  Dianjurkan untuk mendekati pilihan node untuk bekerja dalam kerangka sub-tahap dari sudut pandang pemanfaatan aktual saluran dalam jaringan tertentu sehingga untuk mencegah reload di perbatasan area lama dan baru.  Terlepas dari kenyataan bahwa artikel ini ditujukan untuk pemrograman, saya pikir tidak akan berlebihan untuk mengatakan beberapa kata tentang perilaku protokol yang diterapkan pada IGP dalam konteks perubahan domain.  LDP berperilaku cukup mudah ditebak, terjemahan lancar dicapai dengan menyediakan konektivitas IP antara target alamat transportasi dan sesi.  Karena fakta bahwa BGP adalah protokol yang sangat fleksibel, Anda harus memperhatikan pesawat ini.  Baik jika BGP tidak memperkenalkan kebebasan khusus pada node yang diterjemahkan dalam bentuk perubahan dalam Preferensi Lokal atau kriteria lain yang menentukan keputusan rute lokal yang tidak konsisten antara node.  Dengan kata lain, perilaku BGP juga dapat diprediksi jika pemilihan rute di wilayah tersebut tidak bertentangan dengan aturan jalur IGP.  Ada titik halus yang terkait dengan pekerjaan RSVP selama periode waktu koeksistensi dua area.  Fakta mengisi tabel TED dari dua sumber dengan visibilitas yang berbeda memunculkan pemikiran, misalnya, Anda mungkin kehilangan mekanisme FRR sampai pekerjaan selesai.  Ini dapat terjadi jika router dengan visibilitas lebih tinggi, yang berada di dua area, menghitung ERO melalui router dengan visibilitas yang lebih rendah, mis.  melalui segmen jaringan yang diterjemahkan tanpa informasi topologi tentang area lain.  Ini tidak bisa disebut bencana, karena jalan akhirnya akan dibangun, tetapi Anda tidak boleh melupakannya.  Seni khusus memerlukan menggabungkan pekerjaan memperkenalkan hierarki IGP dengan jenis pekerjaan yang sama di pesawat BGP, misalnya, dengan memigrasikan jala penuh ke reflektor rute.  Pengenalan hierarki di pesawat yang berbeda lebih baik dilakukan secara berurutan, hal yang sama, menurut saya, berlaku untuk semua hal yang menyembunyikan informasi routing, peringkasan lebih mudah untuk dibangun di atas fondasi IGP hirarki yang stabil daripada menggabungkan tahapan-tahapan ini. <br><br>  Jadi, kami memiliki rencana umum, dan jika Anda belum berubah pikiran, mari kita pikirkan implementasi perangkat lunak pada Pyez, sesuatu seperti ini dalam gambar. <br><br><img src="https://habrastorage.org/webt/xm/0v/4s/xm0v4shfndzjxnvn1rirhmajgdq.png" alt="gambar"><br><br>  Setiap oval yang indah dapat berupa entitas perangkat lunak yang terpisah, mis.  suatu hal yang berfungsi dan menyiapkan data untuk langkah selanjutnya.  Data awal berarti informasi dari jaringan, misalnya, untuk menyiapkan konfigurasi area OSPF baru, Anda perlu mendapatkan nama-nama antarmuka aktif milik area lama dan bobotnya, yang berarti bahwa kita akan memerlukan keterampilan dalam bekerja dengan tabel dan tampilan Operasi.  Konsep-konsep ini dapat ditemukan di artikel sebelumnya dalam seri <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Programming for Network Engineers: The First Case"</a> .  Pada tahap pertama, generator menyimpan dalam file perintah yang diperlukan untuk mengaktifkan area baru, pada tahap kedua - untuk menghapus yang lama dan memindahkan yang baru ke mode utama, pada tahap ketiga - perintah untuk menghapus area yang lama.  Ke depan, saya akan mengatakan bahwa untuk artikel ini saya sengaja tidak menggunakan visualisator template seperti Jinja2.  Agar tidak teralihkan dari topik target, kode ditulis sesederhana mungkin.  Jika seseorang tertarik pada dokumentasi di tautan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Dokumentasi Jinja2"</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Langkah Konfigurasi Kode Generasi</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> yaml <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos.factory.factory_loader <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FactoryLoader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Device <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getConnection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_host, p_user)</span></span></span><span class="hljs-function">:</span></span> acc = {<span class="hljs-string"><span class="hljs-string">'lab'</span></span>: <span class="hljs-string"><span class="hljs-string">'lab123'</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- getting ssh connection to '</span></span> + p_host l_dev = Device(host=p_host, user=p_user, password=acc[p_user], auto_probe=<span class="hljs-number"><span class="hljs-number">2</span></span>, gather_facts=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, port=<span class="hljs-number"><span class="hljs-number">22</span></span>) l_dev.open() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (l_dev.connected): l_dev.timeout = <span class="hljs-number"><span class="hljs-number">900</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh cionnection to host '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' established'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- connection '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' named '</span></span> + l_dev.facts[<span class="hljs-string"><span class="hljs-string">'hostname'</span></span>] + <span class="hljs-string"><span class="hljs-string">' established '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> l_dev <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception(<span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- getConnection : connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established. ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close_dev</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(d)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: d.close() <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- close_dev : connection to cant be closed. ex:'</span></span> + str(ex) yml = <span class="hljs-string"><span class="hljs-string">''' --- OSPFInterface: rpc: get-ospf-interface-information args: area: '0.0.0.200' detail: True item: ospf-interface view: OSPFInterfaceView OSPFInterfaceView: fields: name: interface-name type: interface-type cost: interface-cost '''</span></span> globals().update(FactoryLoader().load(yaml.load(yml))) node_list = [<span class="hljs-string"><span class="hljs-string">'10.83.20.68'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.69'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.70'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.71'</span></span>] abr_list = [<span class="hljs-string"><span class="hljs-string">'10.83.20.66'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.67'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> node <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> node_list + abr_list: ddev = getConnection(node, <span class="hljs-string"><span class="hljs-string">'lab'</span></span>) ospf_interfaces = OSPFInterface(ddev).get() <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'st1-'</span></span> + node + <span class="hljs-string"><span class="hljs-string">'.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">"w"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f_st1: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ospf_interface <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ospf_interfaces: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-string"><span class="hljs-string">'ge'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ospf_interface.name ): f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.250 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' secondary'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.250 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' interface-type p2p'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.250 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' metric '</span></span> + ospf_interface.cost + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'st2-'</span></span> + node + <span class="hljs-string"><span class="hljs-string">'.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">"w"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f_st1: f_st1.write(<span class="hljs-string"><span class="hljs-string">'delete protocols ospf area 0.0.0.200'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'delete protocols ospf area 0.0.0.250'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ospf_interface <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ospf_interfaces: f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.250 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' interface-type p2p'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.200 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' secondary'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.200 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' interface-type p2p'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ospf_interface.cost != <span class="hljs-string"><span class="hljs-string">'0'</span></span>): f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.250 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' metric '</span></span> + ospf_interface.cost + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.200 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' metric '</span></span> + ospf_interface.cost + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'st3-'</span></span> + node + <span class="hljs-string"><span class="hljs-string">'.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">"w"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f_st1: f_st1.write(<span class="hljs-string"><span class="hljs-string">'delete protocols ospf area 0.0.0.200'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>)</code> </pre> <br></div></div><br>  Untuk kejelasan, saya disatukan dalam jaringan seperti itu di vMX. <br><br><img src="https://habrastorage.org/webt/mk/hr/6i/mkhr6ig4wjo3n4hxkswba2xej4q.png" alt="gambar"><br><br>  vMX adalah router perangkat lunak berfitur lengkap dari Juniper Networks, yang sebagian besar mengulangi perilaku kakak besinya, MX Iron.  Bukannya itu adalah produk yang perlu diperkenalkan, itu hanya berguna untuk menjaga hal-hal ini berguna untuk latihan pemrograman atau tes laboratorium.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Uji coba</a> dapat diunduh di sini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Unduhan Percobaan vMX"</a> , dan instruksi pemasangan pada tautan ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Mempersiapkan Sistem untuk Menginstal vMX"</a> . <br><br>  Router bb, abr1 dan abr2 membentuk daerah nol, router r1, r2, r3 dan r4 - harus dipindahkan dari wilayah ke-200 ke ke-250. <br><br><div class="spoiler">  <b class="spoiler_title">lab @ bb&gt; tampilkan protokol konfigurasi</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { passive; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">2.0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">lab @ abr1&gt; tampilkan protokol konfigurasi</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface-type p2p; } } area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1.0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">lab @ abr2&gt; tampilkan protokol konfigurasi</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">2.0</span></span> { interface-type p2p; } } area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1.0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">lab @ r1&gt; tampilkan protokol konfigurasi</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">2.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">lab @ r2&gt; tampilkan protokol konfigurasi</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">lab @ r3&gt; tampilkan protokol konfigurasi</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">lab @ r4&gt; tampilkan protokol konfigurasi</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">2.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } } }</code> </pre> <br></div></div><br>  Untuk router r2, serangkaian perintah berikut akan dihasilkan. <br><br><div class="spoiler">  <b class="spoiler_title">Untuk tahap pertama</b> <div class="spoiler_text">  <i>mengatur protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 1.0 sekunder</i> <i><br></i>  <i>atur protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 1.0 antarmuka-tipe p2p</i> <i><br></i>  <i>setel protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 1.0 metrik 1</i> <i><br></i>  <i>atur protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 2.0 sekunder</i> <i><br></i>  <i>atur protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 2.0 antarmuka-tipe p2p</i> <i><br></i>  <i>setel protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 2.0 metrik 1</i> <i><br></i>  <i>mengatur protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 3.0 sekunder</i> <i><br></i>  <i>atur protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 3.0 antarmuka-tipe p2p</i> <i><br></i>  <i>setel protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 3.0 metrik 1</i> <i><br></i> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Untuk tahap kedua</b> <div class="spoiler_text">  <i>hapus protokol area ospf 0.0.0.200</i> <i><br></i>  <i>hapus protokol area ospf 0.0.0.250</i> <i><br></i>  <i>atur protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 1.0 antarmuka-tipe p2p</i> <i><br></i>  <i>mengatur protokol area ospf 0.0.0.200 antarmuka ge-0/0 / 1.0 sekunder</i> <i><br></i>  <i>set protokol area ospf 0.0.0.200 antarmuka ge-0/0 / 1.0 antarmuka-tipe p2p</i> <i><br></i>  <i>setel protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 1.0 metrik 1</i> <i><br></i>  <i>setel protokol area ospf 0.0.0.200 antarmuka ge-0/0 / 1.0 metrik 1</i> <i><br></i>  <i>atur protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 2.0 antarmuka-tipe p2p</i> <i><br></i>  <i>mengatur protokol area ospf 0.0.0.200 antarmuka ge-0/0 / 2.0 sekunder</i> <i><br></i>  <i>atur protokol area ospf 0.0.0.200 antarmuka ge-0/0 / 2.0 antarmuka-tipe p2p</i> <i><br></i>  <i>setel protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 2.0 metrik 1</i> <i><br></i>  <i>setel protokol area ospf 0.0.0.200 antarmuka ge-0/0 / 2.0 metrik 1</i> <i><br></i>  <i>atur protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 3.0 antarmuka-tipe p2p</i> <i><br></i>  <i>mengatur protokol area ospf 0.0.0.200 antarmuka ge-0/0 / 3.0 sekunder</i> <i><br></i>  <i>atur protokol area ospf 0.0.0.200 antarmuka ge-0/0 / 3.0 antarmuka-tipe p2p</i> <i><br></i>  <i>setel protokol area ospf 0.0.0.250 antarmuka ge-0/0 / 3.0 metrik 1</i> <i><br></i>  <i>setel protokol area ospf 0.0.0.200 antarmuka ge-0/0 / 3.0 metrik 1</i> <i><br></i>  <i>atur protokol area ospf 0.0.0.250 antarmuka lo0.0 antarmuka-tipe p2p</i> <i><br></i>  <i>mengatur protokol area ospf 0.0.0.200 antarmuka lo0.0 sekunder</i> <i><br></i>  <i>set protokol area ospf 0.0.0.200 antarmuka lo0.0 antarmuka-tipe p2p</i> <i><br></i> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Untuk tahap ketiga</b> <div class="spoiler_text">  <i>hapus protokol area ospf 0.0.0.200</i> <i><br></i> <br></div></div><br>  Seperti yang sudah saya tulis, elemen-elemen jaringan memiliki keadaan internal, sekitar dan di dalamnya sesuatu yang terus-menerus terjadi terlepas dari apakah kita menginginkannya atau tidak.  Terjadinya peristiwa seperti kegagalan transceiver, pemadaman listrik pada sebuah node, atau putusnya saluran optik harus diperhitungkan begitu saja dan diperhitungkan selama bekerja.  Saya mengusulkan untuk memperhatikan fakta ini dalam konteks pilihan verifikasi keberhasilan tahapan migrasi.  Tidak peduli seberapa paradoksal ini terdengar, dalam hal ini tidak perlu bagi kita untuk memeriksa apakah lingkungan OSPF muncul pada antarmuka ini atau itu, karena alasan ketidakhadirannya dapat berada di pesawat yang sama sekali berbeda.  Selain hal di atas, kesalahan atau ketidaktepatan selalu dapat masuk ke sumber data, misalnya, dalam bentuk antarmuka yang terlupakan yang harus dihapus, tetapi saat ini sedang mencari ke dalam "void".  Dalam proses menghasilkan cek, penting untuk naik satu tingkat untuk melihat jaringan dari sudut pandang layanan yang diberikan dan protokol yang diberlakukan, karena pada akhirnya keadaan hanya hal-hal ini memungkinkan Anda untuk membuat keputusan tentang keberhasilan tahap tertentu.  Beberapa pelanggan setuju dengan artikel publik berdasarkan hasil pekerjaan mereka, itulah sebabnya saya mengumpulkan lingkungan virtual untuk demonstrasi.  Dalam lingkungan ini, saya akan membatasi diri untuk memeriksa status sesi BGP, yang dibangun atas dasar satu-ke-satu antara router, ini akan menjadi layanan yang diberlakukan, dan layanan kami.  Jika, setelah bekerja, kondisi untuk kinerjanya terpenuhi dalam bentuk konektivitas IP masing-masing, maka ada alasan untuk percaya bahwa pekerjaan itu berhasil.  Dalam proyek nyata, cek biasanya terbatas pada volume layanan dan protokol yang diberlakukan, yang ditetapkan sebagai kritis bisnis dalam jaringan tertentu.  Ini tidak berlaku untuk pemrograman, namun, saya tidak bisa tidak fokus pada masalah ini, karena pilihan kriteria keberhasilan adalah kunci untuk tidur yang baik setelah pekerjaan selesai. <br><br><div class="spoiler">  <b class="spoiler_title">Kode Verifikasi Sesi BGP</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> yaml <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos.factory.factory_loader <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FactoryLoader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Device <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getConnection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_host, p_user)</span></span></span><span class="hljs-function">:</span></span> acc = {<span class="hljs-string"><span class="hljs-string">'lab'</span></span>: <span class="hljs-string"><span class="hljs-string">'lab123'</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- getting ssh connection to '</span></span> + p_host l_dev = Device(host=p_host, user=p_user, password=acc[p_user], auto_probe=<span class="hljs-number"><span class="hljs-number">2</span></span>, gather_facts=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, port=<span class="hljs-number"><span class="hljs-number">22</span></span>) l_dev.open() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (l_dev.connected): l_dev.timeout = <span class="hljs-number"><span class="hljs-number">900</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh cionnection to host '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' established'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- connection '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' named '</span></span> + l_dev.facts[<span class="hljs-string"><span class="hljs-string">'hostname'</span></span>] + <span class="hljs-string"><span class="hljs-string">' established '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> l_dev <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception(<span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- getConnection : connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established. ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close_dev</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(d)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: d.close() <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- close_dev : connection to cant be closed. ex:'</span></span> + str(ex) ip_f_name = <span class="hljs-string"><span class="hljs-string">'ip-list-1.txt'</span></span> yml = <span class="hljs-string"><span class="hljs-string">''' --- BGPGroup: rpc: get-bgp-group-information args: group-name: 'int' item: bgp-group view: BGPGroupView BGPGroupView: fields: count: peer-count established: established-count '''</span></span> globals().update(FactoryLoader().load(yaml.load(yml))) node_list = [<span class="hljs-string"><span class="hljs-string">'10.83.20.68'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.69'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.70'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.71'</span></span>] abr_list = [<span class="hljs-string"><span class="hljs-string">'10.83.20.66'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.67'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> node <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> node_list + abr_list: ddev = getConnection(node, <span class="hljs-string"><span class="hljs-string">'lab'</span></span>) bgp_group = BGPGroup(ddev).get() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> group <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bgp_group: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (group.count != group.established): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'bgp connection lost'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'dont panic!'</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Hasil karyanya</b> <div class="spoiler_text">  DEBUG - mendapatkan koneksi ssh ke 10.83.20.68 <br>  DEBUG - ssh cionnection menjadi tuan rumah 10.83.20.68 didirikan <br>  DEBUG - koneksi 10.83.20.68 bernama r1 didirikan <br>  jangan panik! <br>  DEBUG - mendapatkan koneksi ssh ke 10.83.20.69 <br>  DEBUG - ssh cionnection menjadi tuan rumah 10.83.20.69 didirikan <br>  DEBUG - koneksi 10.83.20.69 bernama r2 didirikan <br>  jangan panik! <br>  DEBUG - mendapatkan koneksi ssh ke 10.83.20.70 <br>  DEBUG - ssh cionnection menjadi tuan rumah 10.83.20.70 didirikan <br>  DEBUG - koneksi 10.83.20.70 bernama r3 didirikan <br>  jangan panik! <br>  DEBUG - mendapatkan koneksi ssh ke 10.83.20.71 <br>  DEBUG - ssh cionnection menjadi tuan rumah 10.83.20.71 didirikan <br>  DEBUG - koneksi 10.83.20.71 bernama r4 didirikan <br>  jangan panik! <br>  DEBUG - mendapatkan koneksi ssh ke 10.83.20.66 <br>  DEBUG - ssh cionnection menjadi tuan rumah 10.83.20.66 didirikan <br>  DEBUG - koneksi 10.83.20.66 bernama abr1 didirikan <br>  jangan panik! <br>  DEBUG - mendapatkan koneksi ssh ke 10.83.20.67 <br>  DEBUG - ssh cionnection menjadi tuan rumah 10.83.20.67 didirikan <br>  DEBUG - koneksi 10.83.20.67 bernama abr2 didirikan <br>  jangan panik! <br></div></div><br>  Hingga saat ini, kami lebih banyak berbicara tentang beberapa hal jaringan, tetapi saya masih belum mengatakan sepatah kata pun tentang kode program, yang tampaknya menjadi pusat perhatian dalam sebuah artikel dengan nama ini.  Pertama, menurut saya pemikiran jauh lebih penting daripada kode, setelah memformalkan entitas di kepala, seorang insinyur akan dapat mengubahnya menjadi alat dan menyatakannya dalam bentuk kode.  Kedua, saya tidak ingin mengulang sendiri, segala sesuatu yang mungkin tidak tampak jelas dalam contoh-contoh ini, serta pengetahuan minimum yang diperlukan untuk mulai bekerja dengan Python dan Pyez, terkandung dalam artikel sebelumnya dalam seri.  Ketiga, kode persiapan konfigurasi melakukan pekerjaannya, yang disebut offline dan tidak memiliki efek langsung pada jaringan, sehingga tidak mungkin menimbulkan minat.  Hal-hal agak berbeda dengan kode implementasi fase implementasi, pengembangan prosedur ini menimbulkan pertanyaan berikut: <br><br><ul><li>  Bagaimana memeriksa bahwa seluruh volume perintah diterima dengan baik oleh penerjemah? </li><li>  Bagaimana cara memverifikasi bahwa perubahan yang dilakukan pada konfigurasi telah diterapkan? </li><li>  Bagaimana cara menerapkan skema konfigurasi transaksional? </li><li>  Bagaimana cara mengembalikan konfigurasi jika kehilangan kontrol? </li><li>  Bagaimana cara membersihkan jika penerjemah melaporkan kesalahan selama transfer perintah? </li></ul><br>  Semakin banyak perhatian diberikan pada masalah-masalah ini, semakin sedikit kejutan akan disajikan pada tahap eksekusi.  Bayangkan kerumitan kesalahan sintaks yang menggambarkan kebijakan perutean ketika pengklasifikasi kebijakan ini hanya disetujui sebagian oleh penerjemah.  Jika Anda tidak mengontrol baris demi baris proses penggabungan kebijakan ini dengan konfigurasi saat ini, Anda dapat menempatkan tumpukan peralatan ke kondisi tidak memadai dengan satu klik tombol.  Oleh karena itu, saya mematuhi kira-kira seperti blok diagram tahap eksekusi. <br><br><img src="https://habrastorage.org/webt/ou/kz/8q/oukz8qzqdaq9oqp6weqsg9-xpu4.png" alt="gambar"><br><br>  Dipersenjatai dengan dokumentasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pyez</a> , kode loader konfigurasi universal berikut dikompilasi, yang dapat Anda gunakan dalam pekerjaan sehari-hari, sama seperti saya menggunakannya di tambang. <br><br><div class="spoiler">  <b class="spoiler_title">conf_change.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> yaml <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos.factory.factory_loader <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FactoryLoader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Device <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos.utils.config <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> copy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> traceback <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos.exception <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os.path yml = <span class="hljs-string"><span class="hljs-string">''' --- VersionInfo: rpc: get-software-information item: software-information view: VersionInfoView VersionInfoView: fields: name: host-name '''</span></span> Device.auto_probe = <span class="hljs-number"><span class="hljs-number">3</span></span> ip_f_name = <span class="hljs-string"><span class="hljs-string">'ip-list-1.txt'</span></span> cur_stage=<span class="hljs-string"><span class="hljs-string">'2'</span></span> globals().update(FactoryLoader().load(yaml.load(yml))) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doTestOSPF</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_dev, p_node, f_do)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doTestOSPF : at '</span></span> + p_node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( p_dev == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doTestOSPF : connection to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' is None'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: d_conf = p_dev.cli(<span class="hljs-string"><span class="hljs-string">"show configuration | display set"</span></span>).split(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>) ret_val = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> set_found = <span class="hljs-number"><span class="hljs-number">0</span></span> c_path = <span class="hljs-string"><span class="hljs-string">'st'</span></span> + cur_stage + <span class="hljs-string"><span class="hljs-string">'-'</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">'.txt'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(c_path, <span class="hljs-string"><span class="hljs-string">"r"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> f: c_line = line.replace(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>).replace(<span class="hljs-string"><span class="hljs-string">'\r\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">'delete '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> c_line): set_found = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (c_line <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> d_conf) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (c_line != <span class="hljs-string"><span class="hljs-string">''</span></span>)): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doTestOSPF found missing line '</span></span> + c_line ret_val = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> f.close() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (set_found == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (f_do == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret_val <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doTestOSPF : connection to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' was not established. ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_dev, p_node, f_do)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> doTestOSPF(p_dev, p_node, f_do) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close_dev</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(d)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: d.close() <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- close_dev : connection to cant be closed. ex:'</span></span> + str(ex) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getConnection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_host, p_user)</span></span></span><span class="hljs-function">:</span></span> acc = {<span class="hljs-string"><span class="hljs-string">'lab'</span></span>: <span class="hljs-string"><span class="hljs-string">'lab123'</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- getting ssh connection to '</span></span> + p_host l_dev = Device(host=p_host, user=p_user, password=acc[p_user], auto_probe=<span class="hljs-number"><span class="hljs-number">2</span></span>, gather_facts=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, port=<span class="hljs-number"><span class="hljs-number">22</span></span>) l_dev.open() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (l_dev.connected): l_dev.timeout = <span class="hljs-number"><span class="hljs-number">900</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh cionnection to host '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' established'</span></span> v = VersionInfo(l_dev).get() <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- connection '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' named '</span></span> + l_dev.facts[<span class="hljs-string"><span class="hljs-string">'hostname'</span></span>] + <span class="hljs-string"><span class="hljs-string">' established '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> l_dev <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception(<span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- getConnection : connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established. ex:'</span></span> + str(ex) traceback.print_exc() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doCompare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_conf, p_node)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doCompare at '</span></span> + p_node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( p_conf.diff() == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doCompare : conf.diff at '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_conf, p_node)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doLoad at '</span></span> + p_node c_path = <span class="hljs-string"><span class="hljs-string">'st'</span></span> + cur_stage + <span class="hljs-string"><span class="hljs-string">'-'</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">'.txt'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (os.path.isfile(c_path)): p_conf.load(path=c_path, format=<span class="hljs-string"><span class="hljs-string">'set'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doLoad : cant load config to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doRollback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_conf, p_node, p_r)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doRollback at '</span></span> + p_node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( p_conf.rollback(rb_id=p_r) == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doRollback : cant rollback config to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doCommitCheck</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_conf, p_node)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doCommitCheck at '</span></span> + p_node p_conf.commit_check() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doCommitCheck : cant config commit check config to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doCommit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_conf, p_node, p_confirm_m=None)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doCommit at '</span></span> + p_node commit_res = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p_confirm_m == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>): commit_res = p_conf.commit(timeout=<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: commit_res = p_conf.commit(confirm=p_confirm_m, timeout=<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (commit_res == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> CommitError <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> c_ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doCommit : cant config commit at '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(c_ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> RpcTimeoutError <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> t_ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doCommit : config was commited at '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' with the following ex:'</span></span> + str(t_ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doJob</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_dev, p_node)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doJob at '</span></span> + p_node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( p_dev == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : connection to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' is None'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> Config(p_dev) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> conf: is_compare = doCompare(conf, node) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( is_compare == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : at config compare '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( is_compare == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : configuration locked at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- starting to do config changes at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( doLoad(conf, node) != <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : conf.load '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( doCompare(conf, node) != <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doJob : doing rollback after load at '</span></span> + node + <span class="hljs-string"><span class="hljs-string">' deleting :'</span></span> + str(conf.diff()) doRollback(conf, node, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- commit check at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doCommitCheck(conf, node) != <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : conf.doCommitCheck failed at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( doCompare(conf, node) != <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doJob : doing rollback after load at '</span></span> + node + <span class="hljs-string"><span class="hljs-string">' deleting :'</span></span> + str(conf.diff()) doRollback(conf, node, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> commit_m = <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- commiting changes at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doCommit(conf, node, commit_m) != <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : conf.commit '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( doCompare(conf, node) != <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doJob : doing rollback after commit at '</span></span> + node + <span class="hljs-string"><span class="hljs-string">' deleting :'</span></span> + str(conf.diff()) doRollback(conf, node, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : cant do job '</span></span> + node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node_list = [] result_list = {} <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(ip_f_name, <span class="hljs-string"><span class="hljs-string">"r"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f_ip: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> f_ip: c_ip_line = line.replace(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>).replace(<span class="hljs-string"><span class="hljs-string">'\r\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c_ip_line != <span class="hljs-string"><span class="hljs-string">''</span></span>): node_list.append(c_ip_line) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> node <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> node_list: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- ************************************ '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- checking '</span></span> + node result_list.setdefault(node, {}) cur_dev = getConnection(node, <span class="hljs-string"><span class="hljs-string">'lab'</span></span>) is_test = doTest(cur_dev, node, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_test == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- error'</span></span> result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'error'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_test == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- conf exist'</span></span> result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'nn'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_test == <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- conf not exist, doing change'</span></span> is_job = doJob(cur_dev, node) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_job == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- cant do job at '</span></span> + node result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'error'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_job == <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- cant do job at '</span></span> + node result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'not_done'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_job == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- done job at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- going sleep at '</span></span> + node time.sleep(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- checking job status '</span></span> + node cur_dev_confirm = getConnection(node, <span class="hljs-string"><span class="hljs-string">'lab'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( cur_dev_confirm != <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doTest(cur_dev, node, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- commiting the configuration at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doCommit(Config(cur_dev_confirm), node) != <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- ERROR cant commit the configuration at '</span></span> + node result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'not_done'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- configuration commited at '</span></span> + node result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'done'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- ERROR cant find conf after job '</span></span> + node result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'not_done'</span></span>) close_dev(cur_dev_confirm) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- ERROR cant access '</span></span> + node + <span class="hljs-string"><span class="hljs-string">' for commiting'</span></span> result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'not_done'</span></span>) close_dev(cur_dev) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> result_list</code> </pre><br></div></div><br>  Dan hasil karyanya dalam tiga tahap <br><br><div class="spoiler">  <b class="spoiler_title">Teks tersembunyi</b> <div class="spoiler_text"> <code>Python 2.7.14 (v2.7.14:84471935ed, Sep 16 2017, 20:19:30) [MSC v.1500 32 bit (Intel)] on win32 <br> Type "copyright", "credits" or "license()" for more information. <br> &gt;&gt;&gt; <br> ==== RESTART: C:\Users\and_andreev\Desktop\tools\lab-case2\conf_change.py ==== <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.66 <br> DEBUG --- doCompare at 10.83.20.66 <br> DEBUG --- starting to do config changes at 10.83.20.66 <br> DEBUG --- doLoad at 10.83.20.66 <br> DEBUG --- commit check at 10.83.20.66 <br> DEBUG --- doCommitCheck at 10.83.20.66 <br> DEBUG --- commiting changes at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- done job at 10.83.20.66 <br> FLOW -- going sleep at 10.83.20.66 <br> FLOW -- checking job status 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> FLOW -- commiting the configuration at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- configuration commited at 10.83.20.66 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.67 <br> DEBUG --- doCompare at 10.83.20.67 <br> DEBUG --- starting to do config changes at 10.83.20.67 <br> DEBUG --- doLoad at 10.83.20.67 <br> DEBUG --- commit check at 10.83.20.67 <br> DEBUG --- doCommitCheck at 10.83.20.67 <br> DEBUG --- commiting changes at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- done job at 10.83.20.67 <br> FLOW -- going sleep at 10.83.20.67 <br> FLOW -- checking job status 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> FLOW -- commiting the configuration at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- configuration commited at 10.83.20.67 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.68 <br> DEBUG --- doCompare at 10.83.20.68 <br> DEBUG --- starting to do config changes at 10.83.20.68 <br> DEBUG --- doLoad at 10.83.20.68 <br> DEBUG --- commit check at 10.83.20.68 <br> DEBUG --- doCommitCheck at 10.83.20.68 <br> DEBUG --- commiting changes at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- done job at 10.83.20.68 <br> FLOW -- going sleep at 10.83.20.68 <br> FLOW -- checking job status 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> FLOW -- commiting the configuration at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- configuration commited at 10.83.20.68 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.69 <br> DEBUG --- doCompare at 10.83.20.69 <br> DEBUG --- starting to do config changes at 10.83.20.69 <br> DEBUG --- doLoad at 10.83.20.69 <br> DEBUG --- commit check at 10.83.20.69 <br> DEBUG --- doCommitCheck at 10.83.20.69 <br> DEBUG --- commiting changes at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- done job at 10.83.20.69 <br> FLOW -- going sleep at 10.83.20.69 <br> FLOW -- checking job status 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> FLOW -- commiting the configuration at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- configuration commited at 10.83.20.69 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.70 <br> DEBUG --- doCompare at 10.83.20.70 <br> DEBUG --- starting to do config changes at 10.83.20.70 <br> DEBUG --- doLoad at 10.83.20.70 <br> DEBUG --- commit check at 10.83.20.70 <br> DEBUG --- doCommitCheck at 10.83.20.70 <br> DEBUG --- commiting changes at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- done job at 10.83.20.70 <br> FLOW -- going sleep at 10.83.20.70 <br> FLOW -- checking job status 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> FLOW -- commiting the configuration at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- configuration commited at 10.83.20.70 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.71 <br> DEBUG --- doCompare at 10.83.20.71 <br> DEBUG --- starting to do config changes at 10.83.20.71 <br> DEBUG --- doLoad at 10.83.20.71 <br> DEBUG --- commit check at 10.83.20.71 <br> DEBUG --- doCommitCheck at 10.83.20.71 <br> DEBUG --- commiting changes at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- done job at 10.83.20.71 <br> FLOW -- going sleep at 10.83.20.71 <br> FLOW -- checking job status 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> FLOW -- commiting the configuration at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- configuration commited at 10.83.20.71 <br> {'10.83.20.70': {'status': 'done'}, '10.83.20.71': {'status': 'done'}, '10.83.20.67': {'status': 'done'}, '10.83.20.66': {'status': 'done'}, '10.83.20.69': {'status': 'done'}, '10.83.20.68': {'status': 'done'}} <br> &gt;&gt;&gt; <br> &gt;&gt;&gt; <br> &gt;&gt;&gt; <br> ==== RESTART: C:\Users\and_andreev\Desktop\tools\lab-case2\conf_change.py ==== <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.66 <br> DEBUG --- doCompare at 10.83.20.66 <br> DEBUG --- starting to do config changes at 10.83.20.66 <br> DEBUG --- doLoad at 10.83.20.66 <br> DEBUG --- commit check at 10.83.20.66 <br> DEBUG --- doCommitCheck at 10.83.20.66 <br> DEBUG --- commiting changes at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- done job at 10.83.20.66 <br> FLOW -- going sleep at 10.83.20.66 <br> FLOW -- checking job status 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> FLOW -- commiting the configuration at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- configuration commited at 10.83.20.66 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.67 <br> DEBUG --- doCompare at 10.83.20.67 <br> DEBUG --- starting to do config changes at 10.83.20.67 <br> DEBUG --- doLoad at 10.83.20.67 <br> DEBUG --- commit check at 10.83.20.67 <br> DEBUG --- doCommitCheck at 10.83.20.67 <br> DEBUG --- commiting changes at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- done job at 10.83.20.67 <br> FLOW -- going sleep at 10.83.20.67 <br> FLOW -- checking job status 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> FLOW -- commiting the configuration at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- configuration commited at 10.83.20.67 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/2.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/2.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface lo0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface lo0.0 secondary <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.68 <br> DEBUG --- doCompare at 10.83.20.68 <br> DEBUG --- starting to do config changes at 10.83.20.68 <br> DEBUG --- doLoad at 10.83.20.68 <br> DEBUG --- commit check at 10.83.20.68 <br> DEBUG --- doCommitCheck at 10.83.20.68 <br> DEBUG --- commiting changes at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- done job at 10.83.20.68 <br> FLOW -- going sleep at 10.83.20.68 <br> FLOW -- checking job status 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> FLOW -- commiting the configuration at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- configuration commited at 10.83.20.68 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/0.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/0.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface lo0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface lo0.0 secondary <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.69 <br> DEBUG --- doCompare at 10.83.20.69 <br> DEBUG --- starting to do config changes at 10.83.20.69 <br> DEBUG --- doLoad at 10.83.20.69 <br> DEBUG --- commit check at 10.83.20.69 <br> DEBUG --- doCommitCheck at 10.83.20.69 <br> DEBUG --- commiting changes at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- done job at 10.83.20.69 <br> FLOW -- going sleep at 10.83.20.69 <br> FLOW -- checking job status 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> FLOW -- commiting the configuration at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- configuration commited at 10.83.20.69 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/0.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/0.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface lo0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface lo0.0 secondary <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.70 <br> DEBUG --- doCompare at 10.83.20.70 <br> DEBUG --- starting to do config changes at 10.83.20.70 <br> DEBUG --- doLoad at 10.83.20.70 <br> DEBUG --- commit check at 10.83.20.70 <br> DEBUG --- doCommitCheck at 10.83.20.70 <br> DEBUG --- commiting changes at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- done job at 10.83.20.70 <br> FLOW -- going sleep at 10.83.20.70 <br> FLOW -- checking job status 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> FLOW -- commiting the configuration at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- configuration commited at 10.83.20.70 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/2.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/2.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface lo0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface lo0.0 secondary <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.71 <br> DEBUG --- doCompare at 10.83.20.71 <br> DEBUG --- starting to do config changes at 10.83.20.71 <br> DEBUG --- doLoad at 10.83.20.71 <br> DEBUG --- commit check at 10.83.20.71 <br> DEBUG --- doCommitCheck at 10.83.20.71 <br> DEBUG --- commiting changes at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- done job at 10.83.20.71 <br> FLOW -- going sleep at 10.83.20.71 <br> FLOW -- checking job status 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> FLOW -- commiting the configuration at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- configuration commited at 10.83.20.71 <br> {'10.83.20.70': {'status': 'done'}, '10.83.20.71': {'status': 'done'}, '10.83.20.67': {'status': 'done'}, '10.83.20.66': {'status': 'done'}, '10.83.20.69': {'status': 'done'}, '10.83.20.68': {'status': 'done'}} <br> &gt;&gt;&gt; <br> ==== RESTART: C:\Users\and_andreev\Desktop\tools\lab-case2\conf_change.py ==== <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.66 <br> DEBUG --- doCompare at 10.83.20.66 <br> DEBUG --- starting to do config changes at 10.83.20.66 <br> DEBUG --- doLoad at 10.83.20.66 <br> DEBUG --- commit check at 10.83.20.66 <br> DEBUG --- doCommitCheck at 10.83.20.66 <br> DEBUG --- commiting changes at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- done job at 10.83.20.66 <br> FLOW -- going sleep at 10.83.20.66 <br> FLOW -- checking job status 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> FLOW -- commiting the configuration at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- configuration commited at 10.83.20.66 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.67 <br> DEBUG --- doCompare at 10.83.20.67 <br> DEBUG --- starting to do config changes at 10.83.20.67 <br> DEBUG --- doLoad at 10.83.20.67 <br> DEBUG --- commit check at 10.83.20.67 <br> DEBUG --- doCommitCheck at 10.83.20.67 <br> DEBUG --- commiting changes at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- done job at 10.83.20.67 <br> FLOW -- going sleep at 10.83.20.67 <br> FLOW -- checking job status 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> FLOW -- commiting the configuration at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- configuration commited at 10.83.20.67 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.68 <br> DEBUG --- doCompare at 10.83.20.68 <br> DEBUG --- starting to do config changes at 10.83.20.68 <br> DEBUG --- doLoad at 10.83.20.68 <br> DEBUG --- commit check at 10.83.20.68 <br> DEBUG --- doCommitCheck at 10.83.20.68 <br> DEBUG --- commiting changes at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- done job at 10.83.20.68 <br> FLOW -- going sleep at 10.83.20.68 <br> FLOW -- checking job status 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> FLOW -- commiting the configuration at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- configuration commited at 10.83.20.68 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.69 <br> DEBUG --- doCompare at 10.83.20.69 <br> DEBUG --- starting to do config changes at 10.83.20.69 <br> DEBUG --- doLoad at 10.83.20.69 <br> DEBUG --- commit check at 10.83.20.69 <br> DEBUG --- doCommitCheck at 10.83.20.69 <br> DEBUG --- commiting changes at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- done job at 10.83.20.69 <br> FLOW -- going sleep at 10.83.20.69 <br> FLOW -- checking job status 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> FLOW -- commiting the configuration at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- configuration commited at 10.83.20.69 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.70 <br> DEBUG --- doCompare at 10.83.20.70 <br> DEBUG --- starting to do config changes at 10.83.20.70 <br> DEBUG --- doLoad at 10.83.20.70 <br> DEBUG --- commit check at 10.83.20.70 <br> DEBUG --- doCommitCheck at 10.83.20.70 <br> DEBUG --- commiting changes at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- done job at 10.83.20.70 <br> FLOW -- going sleep at 10.83.20.70 <br> FLOW -- checking job status 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> FLOW -- commiting the configuration at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- configuration commited at 10.83.20.70 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.71 <br> DEBUG --- doCompare at 10.83.20.71 <br> DEBUG --- starting to do config changes at 10.83.20.71 <br> DEBUG --- doLoad at 10.83.20.71 <br> DEBUG --- commit check at 10.83.20.71 <br> DEBUG --- doCommitCheck at 10.83.20.71 <br> DEBUG --- commiting changes at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- done job at 10.83.20.71 <br> FLOW -- going sleep at 10.83.20.71 <br> FLOW -- checking job status 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> FLOW -- commiting the configuration at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- configuration commited at 10.83.20.71 <br> {'10.83.20.70': {'status': 'done'}, '10.83.20.71': {'status': 'done'}, '10.83.20.67': {'status': 'done'}, '10.83.20.66': {'status': 'done'}, '10.83.20.69': {'status': 'done'}, '10.83.20.68': {'status': 'done'}} <br> &gt;&gt;&gt; <br></code> <br></div></div><br><ol><li>  Protokol Perutean IS-IS Lengkap - Hannes Gredler, Walter Goralski </li><li>  OSPF  Anatomi Protokol Perutean Internet - John T. Moy </li><li>  Penggabungan dan Migrasi Jaringan: Desain dan Implementasi Junos - Gonzalo Gomez Herrero, Jan Anton Bernal Van Der Ven </li><li>  OSPF Multi-Area Adjacency - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc5185</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id413427/">https://habr.com/ru/post/id413427/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413415/index.html">Batas konkurensi adaptif di Netflix</a></li>
<li><a href="../id413417/index.html">Efisiensi Energi: Pendekatan yang Kami Uji di Rusia</a></li>
<li><a href="../id413419/index.html">Intisari berita PostgreSQL. Edisi No. 7</a></li>
<li><a href="../id413421/index.html">Kemungkinan ketidakpastian dalam karier seorang programmer</a></li>
<li><a href="../id413423/index.html">Solusi Akses Jarak Jauh di Mars IS</a></li>
<li><a href="../id413429/index.html">Kami sedang menulis sebuah plugin untuk menerima sertifikat wildcard Let's Encrypt</a></li>
<li><a href="../id413431/index.html">Lokakarya tentang mengembangkan kontrak pintar tentang Soliditas</a></li>
<li><a href="../id413433/index.html">65% profesional TI Rusia ingin bekerja di luar negeri</a></li>
<li><a href="../id413435/index.html">Keturunan Melampaui Genetika</a></li>
<li><a href="../id413437/index.html">Utusan segalanya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>