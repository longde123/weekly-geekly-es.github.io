<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§πüèæ üë∏ üî≥ Meu jeito de guerreiro, ou como eu preparei uma aplica√ß√£o para a vida em Sailfish üçï üßìüèº ‚åöÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A arte de um guerreiro √© manter o equil√≠brio 
 entre o horror de ser humano e o milagre de ser humano. 
 "Viagem a Ixtlan" 

 Meu caminho de guerreiro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Meu jeito de guerreiro, ou como eu preparei uma aplica√ß√£o para a vida em Sailfish</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/digdes/blog/420491/">  <i>A arte de um guerreiro √© manter o equil√≠brio</i> <i><br></i>  <i>entre o horror de ser humano e o milagre de ser humano.</i> <i><br></i>  <i>"Viagem a Ixtlan"</i> <br><br>  Meu caminho de guerreiro - um desenvolvedor brutal de front-end para os profissionais - era encontrar um equil√≠brio entre o desenvolvimento de um aplicativo que roda no Sailfish e um aplicativo de plataforma cruzada. <br><br>  Recentemente, tenho trabalhado na posi√ß√£o de desenvolvedor da Digital Design e, √†s vezes, tenho que lidar com tarefas que n√£o encontrei antes.  √â interessante e muitas vezes divertido.  Agora, por exemplo, estou escrevendo um aplicativo corporativo para o Sailfish OS e quero compartilhar minha experi√™ncia com voc√™ - isso ser√° discutido abaixo.  Siga-me sob o corte, se voc√™ √© um desenvolvedor iniciante ou, assim como eu, enfrentou a tarefa de adaptar um aplicativo corporativo para o OS Sailfish e n√£o sabe por onde come√ßar, assim como aqueles que n√£o ouviram falar dos recursos do Qt e do Sailfish. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zr/xh/si/zrxhsitmn-nk4wa5iic71hc7wfu.jpeg"></div><a name="habracut"></a><br><h3>  Um pouco de fundo, ou por que eu fiz isso </h3><br>  Quando a empresa desenvolveu a solu√ß√£o Areopad ISCO para iPad (iOS) h√° 5 anos, ningu√©m poderia pensar que os clientes precisariam de um aplicativo para trabalhar em um dispositivo com o sistema operacional Sailfish (ent√£o o sistema operacional pertencia √† empresa finlandesa Jolla, agora tamb√©m).  Mas em 2016, a empresa russa Open Mobile Platform adquiriu uma licen√ßa para seu uso, modifica√ß√£o, distribui√ß√£o e o lembrou: adaptou dispositivos e usu√°rios m√≥veis dom√©sticos (principalmente empresas e √≥rg√£os governamentais) e registrou o Sailfish Mobile OS RUS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no registro</a> .  E agora, pode-se dizer, este √© o √∫nico sistema operacional russo oficial para dispositivos m√≥veis. <br><br>  Naturalmente, quer√≠amos entender - j√° conquistamos o resto do sistema operacional e o Sailfish, aparentemente, tem um grande futuro (sim, estou falando sobre substitui√ß√£o de importa√ß√µes).  De tudo isso segue-se que o pedido de Sailfish para ser!  A primeira aplica√ß√£o a ser testada foi o Sistema de Informa√ß√µes da aplica√ß√£o m√≥vel para o trabalho dos √≥rg√£os colegiados da Areopad (estava apenas na fase de moderniza√ß√£o). <br><br><h3>  Agora sobre qt </h3><br>  Uma maravilhosa ferramenta de plataforma cruzada que inclui um ambiente de desenvolvimento, v√°rias bibliotecas √∫teis e convenientes e at√© sua pr√≥pria linguagem de marca√ß√£o QML.  N√£o vou insistir nisso por muito tempo, porque muitos artigos foram escritos sobre esse milagre no Habr√©, e voc√™ tamb√©m pode ler a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> , que √© lida f√°cil e naturalmente. <br><br>  S√≥ para esclarecer, vou esclarecer que os c√°lculos e o mapeamento ocorrem em diferentes idiomas em diferentes m√≥dulos (C ++ e QML) que interagem entre si usando m√©todos complicados especiais (propriedade, slot de sinal). <br><br>  E o Qt √© a principal estrutura usada no desenvolvimento de software para o Sailfish. <br><br><h3>  Abordagens para resolver o problema: v√° para a esquerda - voc√™ ganhar√° uma muleta, v√° para a direita - perder√° recursos </h3><br>  No in√≠cio, inspirado na id√©ia de plataforma cruzada e no fato de implement√°-la, pensei que um aplicativo escrito para o Sailfish n√£o decolaria, mas seria feliz em qualquer outro sistema operacional, mesmo em uma geladeira ou chaleira.  Mas minha felicidade durou exatamente at√© o momento em que me sentei para execut√°-la no Android - ent√£o fiquei triste.  O Sailfish n√£o √© de todo adaptado para este neg√≥cio e definitivamente n√£o pretende mudar nada. <br><br>  Se o Android ou iOS permitir que voc√™ use a compila√ß√£o condicional e forne√ßa algum tipo de kit de ferramentas para isso, o Sailfish n√£o poder√° ser distinguido do Linux (no Qt, √© claro). <br><br>  Em seguida, surge o problema de compatibilidade QML: no Sailfish, a vers√£o desatualizada do Qt Quick (2.6 para Sailfish e j√° 2.11 para todos os outros), o Android n√£o conhece Silica, o Sailfish n√£o conhece QtQuick.Controls.  Portanto, para sistemas operacionais diferentes, √© necess√°rio extrair os mesmos componentes de bibliotecas diferentes, o que produz quase os mesmos arquivos para cada sistema operacional. <br>  Ao mesmo tempo, o Silica provavelmente possui todos os mesmos recursos do QtQuick.Controls, mas se recusa a executar em qualquer outra plataforma. <br><br><h3>  Recursos do Sailfish </h3><br>  Sendo uma pessoa criativa <s>pregui√ßosa e</s> criativa quanto poss√≠vel, com o desejo de otimizar os custos trabalhistas, segui o caminho da menor <s>resist√™ncia</s> funcional e escrevi minha obra-prima em Qt puro, sem usar QtQuick.Controls e Silica.  Como resultado, tudo funciona decentemente e nobremente no Sailfish, mas no Android, metade dos elementos, apesar da minha estrita ordem de ficar parado, foi para algum lugar por seus assuntos provavelmente importantes, portanto o pr√≥ximo passo ainda ser√° feito em um adulto e divorciado arquivos de marca√ß√£o para cada sistema operacional em √¢ngulos diferentes.  [O que fiz depois, enquanto preparava um artigo para publica√ß√£o.  Esta hist√≥ria baseia-se em um artigo separado].  Lembre-se e aceite: constantes m√°gicas s√£o m√°s (por exemplo, largura: 15).  E em dois dispositivos quase id√™nticos, mesmo com o mesmo sistema operacional, eles podem diferir 2 vezes. <br><br>  No entanto, n√£o posso deixar de notar que h√° coisas definitivamente interessantes na vers√£o Sailfish.  Claro, por um per√≠odo t√£o curto que eu o conhe√ßo, √© quase imposs√≠vel conhecer todo o rico mundo interior de Sailfish - nosso relacionamento com ele est√° no est√°gio do "per√≠odo do buqu√™ de doces", e muito do qual ainda n√£o estudei em seu car√°ter complexo.  Al√©m disso, foi decidido desenhar um aplicativo universal para todos os sistemas operacionais, ent√£o n√£o tive a chance de usar mecanismos mais sofisticados para us√°-la, mas provavelmente vou falar sobre alguns pontos interessantes. <br><br>  Falaremos apenas de uma biblioteca para implementar a GUI do Silica, porque o restante que eu consegui aprender e entender n√£o √© diferente da programa√ß√£o QML padr√£o. <br><br><ul><li>  <b>Tema.</b> </li></ul><br>  Essa ferramenta me interessou mais porque n√£o vi um anal√≥gico em outros sistemas operacionais e tamb√©m √© simples.  A conclus√£o √© que o design do aplicativo n√£o √© uma constante, mas depende do t√≥pico escolhido. <br><br>  O elemento Tema cont√©m informa√ß√µes sobre o t√≥pico atualmente selecionado: cores prim√°rias, tamanhos de fonte, recuos e componentes.  Assim, ao escrever aplicativos, voc√™ n√£o precisa codificar as cores, ajustar o tamanho para caber na tela e, geralmente, observar o layout (perdoe os designers, voc√™ j√° tem muito trabalho), basta extrair tudo do elemento Tema.  Bem, isso n√£o √© legal! <br><br><img src="https://habrastorage.org/webt/ak/pr/wa/akprwaderu8np2wpkch4j_qo9xa.png"><br><br><ul><li>  <b>Menu</b> </li></ul><br>  Tamb√©m √© um recurso do Sailfish (embora possa ser poss√≠vel no Android, mas ainda n√£o o vi). <br><br>  Existem tr√™s tipos de menus: <br>  <b>PullDownMenu - PushUpMenu - ContextMenu</b> <br><br><img src="https://habrastorage.org/webt/bu/y7/a5/buy7a5tkeexpsohiexbtm4oydfm.jpeg"><img src="https://habrastorage.org/webt/jk/sl/4n/jksl4n-kik82otj40tdtcn9q4jq.jpeg"><img src="https://habrastorage.org/webt/ny/ti/tw/nytitwwksf94j2c1oraw50qea7q.jpeg"><br><br>  Quanto ao Silica ... View - eles n√£o s√£o diferentes do padr√£o ... View (s√£o ¬± algumas propriedades n√£o muito vis√≠veis), e o componente Button deixa voc√™ bastante nervoso - a altura do bot√£o n√£o pode ser alterada, voc√™ deve escrever Rectangle e MouseArea em todos os lugares.  Se eu estivesse solicitando apenas o Sailfish, usando o design padr√£o deste sistema operacional, n√£o seria necess√°rio alterar a altura do bot√£o ou seria poss√≠vel usar um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">componente da Silica</a> .  Mas como eu estou escrevendo um aplicativo para todos os dispositivos, foi decidido usar o design mais maci√ßo (Android), para que todos fiquem familiarizados e confort√°veis.  Muitos discordam de mim e afirmam que voc√™ precisa usar elementos de interface do usu√°rio nativos para cada plataforma, mas esse √© um t√≥pico completamente diferente. Ele √© objeto de holivares h√° muitos anos. Durante esse per√≠odo, mais de uma gera√ß√£o de desenvolvedores cresceu. <br><br><h3>  Voe na pomada para o desenvolvimento m√≥vel no Qt </h3><br><ul><li>  <b>Assicronismo</b> </li></ul><br>  No Qt, para se comunicar com o servidor, chamar uma fun√ß√£o n√£o √© suficiente, voc√™ precisa enviar uma solicita√ß√£o e solicitar um objeto especial respons√°vel pela resposta do servidor, chamar a fun√ß√£o de processamento de resposta (que, √© claro, n√≥s nos escrevemos), quando a resposta √© recebida: <br><br><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-function">QNetworkRequest </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">request</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"http://www.leningrad.spb.ru"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; QNetworkReply *reply = mngr-&gt;get(request); connect(reply, &amp;QNetworkReply::finished, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, &amp;Class:: onReplyFinished); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReplyFinished</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ QNetworkReply *reply = (QNetworkReply*)sender(); QByteArray ans = reply-&gt;readAll(); qDebug() &lt;&lt; ans; }</code> </pre> <br>  A fun√ß√£o onReplyFinished ser√° chamada quando uma resposta for recebida do servidor, e isso pode levar n√£o importa quanto tempo dependa da qualidade da conex√£o e do lado do servidor.  Agora imagine como tudo isso ser√° organizado com solicita√ß√µes 1500-2000, que neste caso dependem umas das outras e devem ser executadas em ordem estrita.  E se voc√™ se lembrar de que toda a parte da interface do usu√°rio depende da resposta, ela se torna completamente assustadora. <br><br><ul><li>  <b>Programa√ß√£o orientada para muletas ou uma abordagem criativa para resolver problemas</b> </li></ul><br>  Outro t√≥pico √© o ListView, que √© um problema Qt muito local, mas ainda desagrad√°vel. <br><br>  Qualquer ListView que se preze deve ter um componente de cabe√ßalho, que, como o primeiro delegado, insere algum elemento fundamentalmente diferente do restante.  Sim, ele faz, sim, ele pinta tudo perfeitamente, se n√£o fosse um "mas": meu delegado ocupa a tela inteira e precisa ser rolado, mas assim que tento rolar para a esquerda no cabe√ßalho a partir do √≠ndice zero, ele basicamente se recusa a isso mostrar cabe√ßalho.  O que fazer sobre isso?  Coisas com uma muleta.  Uma parte do meu c√≥digo de forma√ß√£o de modelo para este ListView na parte cpp, que descreve o que est√° acontecendo com a maior precis√£o poss√≠vel: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (QVariant quest, QQuestions) { Questions.append(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Question(client, quest)); } kostilQuestions = Questions; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Questions.size() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) kostilQuestions.prepend(Questions[<span class="hljs-number"><span class="hljs-number">0</span></span>]);</code> </pre> <br>  Em seguida, 2 itens independentes s√£o criados no delegado, cuja visibilidade depende do √≠ndice. <br>  Quando o √≠ndice √© zero, vemos um, caso contr√°rio, o outro. <br><br><h4>  Sum√°rio </h4><br>  Como resultado, recebi um aplicativo que ‚Äúvoa‚Äù no Android e iOS e no Sailfish, mais precisamente um aplicativo flex√≠vel que se adapta a esses sistemas operacionais.  E magia n√£o tem nada a ver com isso.  Encontrei uma maneira de evitar conflitos e fazer amigos de todos os sistemas operacionais com o Sailfish substituindo alguns arquivos pelo Sailfish e por todos os outros.  Isso nos permitiu selecionar as camadas da interface do usu√°rio para cada sistema operacional no c√≥digo do aplicativo. <br><br>  Podemos assumir que demos o primeiro passo - fizemos amizade com o Sailfish.  Mas o trabalho ainda n√£o foi conclu√≠do. Sailfish e eu vamos para um novo n√≠vel de relacionamento - estamos preparando o aplicativo Areopad CSIS para registro no registro (como o aplicativo Sailfish), o que significa que precisaremos adapt√°-lo tamb√©m para o registro. <br><br>  Espero que tenha sido interessante.  Para ser continuado. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt420491/">https://habr.com/ru/post/pt420491/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt420475/index.html">Compara√ß√£o das m√°quinas de corte a laser Raylogic 11G e Raylogic V12</a></li>
<li><a href="../pt420477/index.html">Revis√£o do HyperX Cloud Stinger Core: um headset leve e resistente para personagens</a></li>
<li><a href="../pt420479/index.html">Inje√ß√£o de depend√™ncia no servi√ßo Apache Ignite.NET</a></li>
<li><a href="../pt420487/index.html">As empresas solicitam o direito a dados pessoais dos usu√°rios</a></li>
<li><a href="../pt420489/index.html">Novos processadores ARM podem competir com o Core i5</a></li>
<li><a href="../pt420493/index.html">O servi√ßo de pedidos de comida americano pode se tornar Amaz√¥nia no mundo dos restaurantes</a></li>
<li><a href="../pt420495/index.html">Tela de renderiza√ß√£o de √°gua</a></li>
<li><a href="../pt420497/index.html">Singularidade de vegetais: Kroger lan√ßa robocouriers para clientes de frutas e vegetais no Arizona</a></li>
<li><a href="../pt420499/index.html">Anatomia de sistemas de recomenda√ß√£o. Parte um</a></li>
<li><a href="../pt420501/index.html">Linux na RAM: debirf way 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>