<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСиЁЯП╛тАНЁЯОУ ЁЯЩОЁЯП╝ ЁЯО╡ XGBoost рдХреЗ рдЕрдВрджрд░ рдХреНрдпрд╛ рд╣реИ, рдФрд░ Go рдХреЛ рдЗрд╕рд╕реЗ рдХреНрдпрд╛ рд▓реЗрдирд╛ рджреЗрдирд╛ рд╣реИ? тЫ╣ЁЯП╝ ЁЯО╛ ЁЯН║</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдорд╢реАрди рд╕реАрдЦрдиреЗ рдХреА рджреБрдирд┐рдпрд╛ рдореЗрдВ, рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдкреНрд░рдХрд╛рд░ рдХреЗ рдореЙрдбрд▓ рдореЗрдВ рд╕реЗ рдПрдХ рдирд┐рд░реНрдгрд╛рдпрдХ рдкреЗрдбрд╝ рд╣реИ рдФрд░ рдЙрди рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╕рдорд╛рдирддрд╛рдПрдВ рд╣реИрдВред рдкреЗрдбрд╝реЛрдВ рдХреЗ рдлрд╛рдпрджреЗ рд╣реИрдВ: рд╡реНрдпрд╛рдЦреНрдпрд╛ рдореЗрдВ рдЖрд╕рд╛рди...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>XGBoost рдХреЗ рдЕрдВрджрд░ рдХреНрдпрд╛ рд╣реИ, рдФрд░ Go рдХреЛ рдЗрд╕рд╕реЗ рдХреНрдпрд╛ рд▓реЗрдирд╛ рджреЗрдирд╛ рд╣реИ?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423495/"> рдорд╢реАрди рд╕реАрдЦрдиреЗ рдХреА рджреБрдирд┐рдпрд╛ рдореЗрдВ, рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдкреНрд░рдХрд╛рд░ рдХреЗ рдореЙрдбрд▓ рдореЗрдВ рд╕реЗ рдПрдХ рдирд┐рд░реНрдгрд╛рдпрдХ рдкреЗрдбрд╝ рд╣реИ рдФрд░ рдЙрди рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╕рдорд╛рдирддрд╛рдПрдВ рд╣реИрдВред  рдкреЗрдбрд╝реЛрдВ рдХреЗ рдлрд╛рдпрджреЗ рд╣реИрдВ: рд╡реНрдпрд╛рдЦреНрдпрд╛ рдореЗрдВ рдЖрд╕рд╛рдиреА, рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдирд┐рд░реНрднрд░рддрд╛ рдХреЗ рдкреНрд░рдХрд╛рд░ рдкрд░ рдХреЛрдИ рдкреНрд░рддрд┐рдмрдВрдз рдирд╣реАрдВ рд╣реИ, рдирдореВрдиреЗ рдХреЗ рдЖрдХрд╛рд░ рдкрд░ рдирд░рдо рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рд╣реИрдВред  рдкреЗрдбрд╝реЛрдВ рдХрд╛ рднреА рдПрдХ рдкреНрд░рдореБрдЦ рджреЛрд╖ рд╣реИ - рдкреАрдЫреЗ рд╣рдЯрдиреЗ рдХреА рдкреНрд░рд╡реГрддреНрддрд┐ред  рдЗрд╕рд▓рд┐рдП, рд▓рдЧрднрдЧ рд╣рдореЗрд╢рд╛ рдкреЗрдбрд╝реЛрдВ рдХреЛ рдЯреБрдХрдбрд╝рд┐рдпреЛрдВ рдореЗрдВ рдЬреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рд╡рди, рдврд╛рд▓ рдмрдврд╝рд╛рдиреЗ рдЖрджрд┐, рдЬрдЯрд┐рд▓ рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рдФрд░ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдХрд╛рд░реНрдп рдкреЗрдбрд╝реЛрдВ рдХреЛ рд░рдЪрдирд╛ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЯреБрдХрдбрд╝рд┐рдпреЛрдВ рдореЗрдВ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░рдирд╛ рд╣реИред <br><br>  рдПрдХ рд╣реА рд▓реЗрдЦ рдореЗрдВ, рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреНрд░рд╢рд┐рдХреНрд╖рд┐рдд рдкреЗрдбрд╝ рдкрд╣рдирд╛рд╡рд╛ рдореЙрдбрд▓ рд╕реЗ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгрд┐рдпреЛрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ, рд▓реЛрдХрдкреНрд░рд┐рдп рдЧреНрд░реЗрдбрд┐рдВрдЧ рдмреВрд╕реНрдЯрд┐рдВрдЧ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>XGBoost</code></a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>LightGBM</code></a> рдореЗрдВ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реБрд╡рд┐рдзрд╛рдПрдБред  рдФрд░ рдкрд╛рдардХ рдХреЛ рдЧреЛ рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>leaves</code></a> рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╕реЗ рднреА рдкрд░рд┐рдЪрд┐рдд рдХрд░рд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬреЛ рдЖрдкрдХреЛ рдореВрд▓ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЗ рд╕реА рдПрдкреАрдЖрдИ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рдкреЗрдбрд╝ рдЯреБрдХрдбрд╝рд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгрд┐рдпрд╛рдВ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред <br><a name="habracut"></a><br><h2>  рдкреЗрдбрд╝ рдХрд╣рд╛рдБ рд╕реЗ рдЙрдЧрддреЗ рд╣реИрдВ? </h2><br>  рдкрд╣рд▓реЗ рд╕рд╛рдорд╛рдиреНрдп рдкреНрд░рд╛рд╡рдзрд╛рдиреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред  рд╡реЗ рдЖрдорддреМрд░ рдкрд░ рдкреЗрдбрд╝реЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ: <br><br><ol><li>  рдиреЛрдб рдореЗрдВ рд╡рд┐рднрд╛рдЬрди рдПрдХ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╣реЛрддрд╛ рд╣реИ </li><li>  рдмрд╛рдЗрдирд░реА рдЯреНрд░реА - рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдореЗрдВ рдПрдХ рдмрд╛рдПрдВ рдФрд░ рджрд╛рдПрдВ рд╡рдВрд╢рдЬ рд╣реИрдВ </li><li>  рдПрдХ рднреМрддрд┐рдХ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдирд┐рд░реНрдгрдп рдирд┐рдпрдо рдореЗрдВ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рдореВрд▓реНрдп рдХреА рд╕реАрдорд╛ рдореВрд▓реНрдп рдХреЗ рд╕рд╛рде рддреБрд▓рдирд╛ рдХрд░рдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реИ </li></ol><br>  рдореИрдВрдиреЗ рдЗрд╕ рдЪрд┐рддреНрд░рдг рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">XGBoost рдкреНрд░рд▓реЗрдЦрди</a> рд╕реЗ рд▓рд┐рдпрд╛ рд╣реИ <br><br><img src="https://habrastorage.org/webt/is/kk/wt/iskkwtpwjobce6ix23itjf0l48i.png" width="400"><br><br>  рдЗрд╕ рдкреЗрдбрд╝ рдореЗрдВ рд╣рдорд╛рд░реЗ 2 рдиреЛрдбреНрд╕, 2 рдирд┐рд░реНрдгрдп рдирд┐рдпрдо рдФрд░ 3 рд╢реАрдЯ рд╣реИрдВред  рдордВрдбрд▓рд┐рдпреЛрдВ рдХреЗ рддрд╣рдд, рдореВрд▓реНрдпреЛрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдХрд┐рд╕реА рд╡рд╕реНрддреБ рдХреЛ рдкреЗрдбрд╝ рд▓рдЧрд╛рдиреЗ рдХрд╛ рдкрд░рд┐рдгрд╛рдоред  рдЖрдорддреМрд░ рдкрд░, рдПрдХ рдкрд░рд┐рд╡рд░реНрддрди рдлрд╝рдВрдХреНрд╢рди рдПрдХ рдкреЗрдбрд╝ рдпрд╛ рдкреЗрдбрд╝ рдХреА рдЯреБрдХрдбрд╝реА рдХреА рдЧрдгрдирд╛ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рджреНрд╡рд┐рдЖрдзрд╛рд░реА рд╡рд░реНрдЧреАрдХрд░рдг рд╕рдорд╕реНрдпрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд┐рдЧреНрдореЙрдЗрдб</a> ред <br><br>  рдзреАрд░реЗ-рдзреАрд░реЗ рдмреВрд╕реНрдЯрд┐рдВрдЧ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╛рдкреНрдд рдкреЗрдбрд╝реЛрдВ рдХреА рдЯреБрдХрдбрд╝реА рд╕реЗ рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕рднреА рдкреЗрдбрд╝реЛрдВ рдХреА рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгрд┐рдпреЛрдВ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">double</span></span> pred = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; tree: trees) pred += tree-&gt;Predict(feature_values);</code> </pre><br>  рдЗрд╕рдХреЗ рдмрд╛рдж, <code>C++</code> , рдЬреИрд╕рд╛ рдХрд┐  рдпрд╣ рдЗрд╕ рднрд╛рд╖рд╛ рдореЗрдВ рд╣реИ рдХрд┐ <code>XGBoost</code> рдФрд░ <code>LightGBM</code> рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдореИрдВ рдЕрдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЛ рдЫреЛрдбрд╝ рджреВрдВрдЧрд╛ рдФрд░ рд╕рдмрд╕реЗ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдХреЛрдб рджреЗрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реВрдВрдЧрд╛ред <br><br>  рдЕрдЧрд▓рд╛, рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ рдХрд┐ <code>Predict</code> рдореЗрдВ рдХреНрдпрд╛ рдЫрд┐рдкрд╛ рд╣реИ рдФрд░ рдкреЗрдбрд╝ рдХреА рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛ рдХреИрд╕реЗ рд╕рдВрд░рдЪрд┐рдд рд╣реИред <br><br><h2>  XGBoost рдкреЗрдбрд╝ </h2><br>  <code>XGBoost</code> рдореЗрдВ <code>XGBoost</code> рдХреА рдХрдИ рдХрдХреНрд╖рд╛рдПрдВ (OOP рдХреЗ рдЕрд░реНрде рдореЗрдВ) рд╣реИрдВред  рд╣рдо <code>RegTree</code> рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реЗрдВрдЧреЗ (рджреЗрдЦреЗрдВ <code>include/xgboost/tree_model.h</code> ), рдЬреЛ рдкреНрд░рд▓реЗрдЦрди рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдореБрдЦреНрдп рд╣реИред  рдпрджрд┐ рдЖрдк рдХреЗрд╡рд▓ рдЕрдиреБрдорд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╡рд░рдг рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВ, рддреЛ рдХрдХреНрд╖рд╛ рдХреЗ рд╕рджрд╕реНрдп рдпрдерд╛рд╕рдВрднрд╡ рд╕рд░рд▓ рджрд┐рдЦрддреЗ рд╣реИрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RegTree</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// vector of nodes std::vector&lt;Node&gt; nodes_; };</span></span></code> </pre><br>  <code>GetNext</code> рдирд┐рдпрдо <code>GetNext</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛ <code>GetNext</code> рд╣реИред  рдЧрдгрдирд╛ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд┐рдП рдмрд┐рдирд╛, рдХреЛрдб рдХреЛ рдереЛрдбрд╝рд╛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// get next position of the tree given current pid int RegTree::GetNext(int pid, float fvalue, bool is_unknown) const { const auto&amp; node = nodes_[pid] float split_value = node.info_.split_cond; if (is_unknown) { return node.DefaultLeft() ? node.cleft_ : node.cright_; } else { if (fvalue &lt; split_value) { return node.cleft_; } else { return node.cright_; } } }</span></span></code> </pre><br>  рдпрд╣рд╛рдБ рд╕реЗ рджреЛ рдмрд╛рддреЗрдВ рдЕрдиреБрд╕рд░рдг рдХрд░рддреА рд╣реИрдВ: <br><br><ol><li>  <code>RegTree</code> рдХреЗрд╡рд▓ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ (рдкреНрд░рдХрд╛рд░ <code>float</code> ) </li><li>  рд╕реНрдХрд┐рдк рдХрд┐рдП рдЧрдП рдЪрд╛рд░рд┐рддреНрд░рд┐рдХ рдореВрд▓реНрдп рд╕рдорд░реНрдерд┐рдд рд╣реИрдВ </li></ol><br>  рдХреЗрдВрджреНрд░ рдмрд┐рдВрджреБ <code>Node</code> рд╡рд░реНрдЧ рд╣реИред  рдЗрд╕рдореЗрдВ рдкреЗрдбрд╝ рдХреА рд╕реНрдерд╛рдиреАрдп рд╕рдВрд░рдЪрдирд╛, рдирд┐рд░реНрдгрдп рдирд┐рдпрдо рдФрд░ рд╢реАрдЯ рдХрд╛ рдореВрд▓реНрдп рд╢рд╛рдорд┐рд▓ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-comment"><span class="hljs-comment">// feature index of split condition unsigned SplitIndex() const { return sindex_ &amp; ((1U &lt;&lt; 31) - 1U); } // when feature is unknown, whether goes to left child bool DefaultLeft() const { return (sindex_ &gt;&gt; 31) != 0; } // whether current node is leaf node bool IsLeaf() const { return cleft_ == -1; } private: // in leaf node, we have weights, in non-leaf nodes, we have split condition union Info { float leaf_value; float split_cond; } info_; // pointer to left, right int cleft_, cright_; // split feature index, left split or right split depends on the highest bit unsigned sindex_{0}; };</span></span></code> </pre><br>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдкреНрд░рддрд┐рд╖реНрдард┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><ol><li>  рдЪрд╛рджрд░реЛрдВ рдХреЛ рдиреЛрдбреНрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП <code>cleft_ = -1</code> </li><li>  <code>info_</code> рдлрд╝реАрд▓реНрдб рдХреЛ <code>union</code> рд░реВрдк <code>union</code> рджрд░реНрд╢рд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЕрд░реНрдерд╛рдд  рджреЛ рдкреНрд░рдХрд╛рд░ рдХреЗ рдбреЗрдЯрд╛ (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рд╕рдорд╛рди) рдиреЛрдб рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдореЗрдореЛрд░реА рдХрд╛ рдПрдХ рдЯреБрдХрдбрд╝рд╛ рд╕рд╛рдЭрд╛ рдХрд░рддреЗ рд╣реИрдВ </li><li>  <code>sindex_</code> рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдЯ рдЙрд╕ рд╡рд╕реНрддреБ рдХреЗ рд▓рд┐рдП рдЬрд╝рд┐рдореНрдореЗрджрд╛рд░ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЧреБрдг рдорд╛рди рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </li></ol><br>  <code>RegTree::Predict</code> рдЙрддреНрддрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА <code>RegTree::Predict</code> рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рд╕реЗ рдорд╛рд░реНрдЧ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВ рджреЛ рдмрд╛рд░ рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рдПрдЧрд╛: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> RegTree::Predict(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> RegTree::FVec&amp; feat, <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> root_id) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pid = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;GetLeafIndex(feat, root_id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nodes_[pid].leaf_value; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> RegTree::GetLeafIndex(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> RegTree::FVec&amp; feat, <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> root_id) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> pid = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(root_id); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!nodes_[pid].IsLeaf()) { <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> split_index = nodes_[pid].SplitIndex(); pid = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;GetNext(pid, feat.Fvalue(split_index), feat.IsMissing(split_index)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pid; }</code> </pre><br>  <code>GetLeafIndex</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ <code>GetLeafIndex</code> рд╣рдо рдкреЗрдбрд╝ рдХреЗ рдиреЛрдбреНрд╕ рдХреЛ рдПрдХ рд▓реВрдк рдореЗрдВ рдиреАрдЪреЗ <code>GetLeafIndex</code> рдЬрдм рддрдХ рд╣рдо рдкрддреНрддреА рдХреЛ рдирд╣реАрдВ рдорд╛рд░рддреЗред <br><br><h2>  рд▓рд╛рдЗрдЯ рдЬреАрдмреАрдПрдо рдЯреНрд░реАрдЬрд╝ </h2><br>  рд▓рд╛рдЗрдЯ рдЬреАрдмреАрдПрдо рдореЗрдВ рдиреЛрдб рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛ рдирд╣реАрдВ рд╣реИред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдЯреНрд░реА <code>Tree</code> рдХреА рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛ ( <code>include/LightGBM/tree.h</code> рдлрд╝рд╛рдЗрд▓ рд╢рд╛рдорд┐рд▓ рд╣реИ) рдореЗрдВ рдореВрд▓реНрдпреЛрдВ рдХреЗ рдПрд░реЗ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬрд╣рд╛рдВ рдиреЛрдб рд╕рдВрдЦреНрдпрд╛ рдПрдХ рд╕реВрдЪрдХрд╛рдВрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИред  рдкрддреНрддрд┐рдпреЛрдВ рдореЗрдВ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рд░рдгрд┐рдпреЛрдВ рдореЗрдВ рднреА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tree</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// Number of current leaves int num_leaves_; // A non-leaf node's left child std::vector&lt;int&gt; left_child_; // A non-leaf node's right child std::vector&lt;int&gt; right_child_; // A non-leaf node's split feature, the original index std::vector&lt;int&gt; split_feature_; //A non-leaf node's split threshold in feature value std::vector&lt;double&gt; threshold_; std::vector&lt;int&gt; cat_boundaries_; std::vector&lt;uint32_t&gt; cat_threshold_; // Store the information for categorical feature handle and mising value handle. std::vector&lt;int8_t&gt; decision_type_; // Output of leaves std::vector&lt;double&gt; leaf_value_; };</span></span></code> </pre><br>  <code>LightGBM</code> рд╢реНрд░реЗрдгреАрдмрджреНрдз рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред  рд╕рдорд░реНрдерди рдПрдХ рдмрд┐рдЯ рдлрд╝реАрд▓реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╕рднреА рдиреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП <code>cat_threshold_</code> рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддрд╛ рд╣реИред  <code>cat_boundaries_</code> рдЙрд╕ рдиреЛрдб рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдмрд┐рдЯ рдлрд╝реАрд▓реНрдб рдХреЗ рдХрд┐рд╕ рднрд╛рдЧ рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИред  рд╢реНрд░реЗрдгреАрдмрджреНрдз рдорд╛рдорд▓реЗ рдХреЗ рд▓рд┐рдП <code>threshold_</code> рдлрд╝реАрд▓реНрдб рдХреЛ <code>int</code> рдореЗрдВ <code>cat_boundaries_</code> рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдмрд┐рдЯ рдХреНрд╖реЗрддреНрд░ рдХреА рд╢реБрд░реБрдЖрдд рдХреЗ рд▓рд┐рдП рдЦреЛрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>cat_boundaries_</code> рдореЗрдВ рд╕реВрдЪрдХрд╛рдВрдХ рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИред <br><br>  рдПрдХ рд╕реНрдкрд╖реНрдЯ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдгрд╛рдпрдХ рдирд┐рдпрдо рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CategoricalDecision</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fval, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> node)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> missing_type = GetMissingType(decision_type_[node]); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> int_fval = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(fval); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (int_fval &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> right_child_[node];; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::isnan(fval)) { <span class="hljs-comment"><span class="hljs-comment">// NaN is always in the right if (missing_type == 2) { return right_child_[node]; } int_fval = 0; } int cat_idx = static_cast&lt;int&gt;(threshold_[node]); if (FindInBitset(cat_threshold_.data() + cat_boundaries_[cat_idx], cat_boundaries_[cat_idx + 1] - cat_boundaries_[cat_idx], int_fval)) { return left_child_[node]; } return right_child_[node]; }</span></span></code> </pre><br>  рдпрд╣ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐, <code>missing_type</code> рдЖрдзрд╛рд░ рдкрд░ <code>missing_type</code> рдорд╛рди <code>NaN</code> рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкреЗрдбрд╝ рдХреА рджрд╛рдИрдВ рд╢рд╛рдЦрд╛ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдзрд╛рди рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред  рдЕрдиреНрдпрдерд╛, <code>NaN</code> рдХреЛ 0. рд╕реЗ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдмрд┐рдЯ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдорд╛рди рдХреА рдЦреЛрдЬ рдХрд░рдирд╛ рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindInBitset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">* bits, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pos)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i1 = pos / <span class="hljs-number"><span class="hljs-number">32</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i1 &gt;= n) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i2 = pos % <span class="hljs-number"><span class="hljs-number">32</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (bits[i1] &gt;&gt; i2) &amp; <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br>  рдпрд╛рдиреА, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╢реНрд░реЗрдгреАрдмрджреНрдз рд╡рд┐рд╢реЗрд╖рддрд╛ <code>int_fval=42</code> рдЬрд╛рдБрдЪ рдХреА <code>int_fval=42</code> рд╣реИ рдХрд┐ рдХреНрдпрд╛ рд╕рд░рдгреА рдореЗрдВ 41 рд╡рд╛рдВ (0 рд╕реЗ рдХреНрд░рдорд╛рдВрдХрди) рдмрд┐рдЯ рд╕реЗрдЯ рд╣реИ рдпрд╛ рдирд╣реАрдВред <br><br>  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдореЗрдВ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХрдореА рд╣реИ: рдпрджрд┐ рдПрдХ рд╢реНрд░реЗрдгреАрдЧрдд рд╡рд┐рд╢реЗрд╖рддрд╛ рдмрдбрд╝реЗ рдорд╛рди рд▓реЗ рд╕рдХрддреА рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП 100500, рддреЛ рдЗрд╕ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ рдирд┐рд░реНрдгрдп рдирд┐рдпрдо рдХреЗ рд▓рд┐рдП рдЖрдХрд╛рд░ рдореЗрдВ 12564 рдмрд╛рдЗрдЯреНрд╕ рддрдХ рдПрдХ рдмрд┐рдЯ рдлрд╝реАрд▓реНрдб рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛! <br><br>  <b>рдЗрд╕рд▓рд┐рдП, рд╢реНрд░реЗрдгреАрдмрджреНрдз рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рд╡рд╛рдВрдЫрдиреАрдп рд╣реИ рддрд╛рдХрд┐ рд╡реЗ 0 рд╕реЗ рдЕрдзрд┐рдХрддрдо рдореВрд▓реНрдп рддрдХ рд▓рдЧрд╛рддрд╛рд░ рдЬрд╛рдПрдВ</b> ред <br><br>  рдЕрдкрдиреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ <code>LightGBM</code> рд╡реНрдпрд╛рдЦреНрдпрд╛рддреНрдордХ рдкрд░рд┐рд╡рд░реНрддрди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд┐рдП</a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЙрдиреНрд╣реЗрдВ рд╕реНрд╡реАрдХрд╛рд░ рдХрд┐рдпрд╛</a> ред <br><br>  рднреМрддрд┐рдХ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рдирд╛ <code>XGBoost</code> рд╕реЗ рдмрд╣реБрдд рдЕрд▓рдЧ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдореИрдВ рдЗрд╕реЗ рд╕рдВрдХреНрд╖рд┐рдкреНрддрддрд╛ рдХреЗ рд▓рд┐рдП рдЫреЛрдбрд╝ рджреВрдВрдЧрд╛ред <br><br><h2>  рдкрддреНрддрд┐рдпрд╛рдВ - рдЧреЛ рдореЗрдВ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкреБрд╕реНрддрдХрд╛рд▓рдп </h2><br>  <code>XGBoost</code> рдФрд░ <code>LightGBM</code> рдирд┐рд░реНрдгрдп рдкреЗрдбрд╝реЛрдВ рдкрд░ рдврд╛рд▓ <code>LightGBM</code> рдореЙрдбрд▓ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╣реИрдВред  рдмреИрдХрдПрдВрдб рд╕реЗрд╡рд╛ рдореЗрдВ рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЬрд╣рд╛рдВ рдорд╢реАрди рд▓рд░реНрдирд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╣рд▓ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ: <br><br><ol><li>  рдореЙрдбрд▓ рдХрд╛ рдЖрд╡рдзрд┐рдХ рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдСрдлрд╝рд▓рд╛рдЗрди </li><li>  рдмреИрдХрдПрдВрдб рд╕реЗрд╡рд╛ рдореЗрдВ рдореЙрдбрд▓ рдХрд╛ рд╡рд┐рддрд░рдг </li><li>  рдкреЛрд▓ рдореЙрдбрд▓ рдСрдирд▓рд╛рдЗрди </li></ol><br>  рднрд░реА рд╣реБрдИ рдмреИрдХреЗрдВрдб рд╕реЗрд╡рд╛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, <code>Go</code> рдПрдХ рд▓реЛрдХрдкреНрд░рд┐рдп рднрд╛рд╖рд╛ рд╣реИред  C API рдФрд░ <code>LightGBM</code> рдорд╛рдзреНрдпрдо рд╕реЗ <code>XGBoost</code> рдпрд╛ <code>LightGBM</code> <code>XGBoost</code> рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рд╕рдорд╛рдзрд╛рди рдирд╣реАрдВ рд╣реИ - рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдЬрдЯрд┐рд▓ рд╣реИ, рд▓рд╛рдкрд░рд╡рд╛рд╣ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдХреЗ рдХрд╛рд░рдг, рдЖрдк <code>SIGTERM</code> рдХреЛ рдкрдХрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рд┐рд╕реНрдЯрдо рдереНрд░реЗрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдПрдВ (рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рд╕рд╛рде рдУрдкрдирдПрдордкреА рдмрдирд╛рдо рд░рдирдЯрд╛рдЗрдо рдереНрд░реЗрдбреНрд╕)ред <br><br>  рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ <code>XGBoost</code> рдпрд╛ <code>LightGBM</code> рдореЗрдВ рдирд┐рд░реНрдорд┐рдд рдореЙрдбрд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╢реБрджреНрдз <code>Go</code> рдкрд░ рдПрдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд▓рд┐рдЦрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред  рдЗрд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>leaves</code></a> рдХрд╣рддреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>leaves</code></a> ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c31/ac7/577/c31ac7577425653a4902dcff8a3b9456.png" alt="рдкрддреНрддреЗ"><br><br>  рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреА рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ: <br><br><ul><li>  <code>LightGBM</code> рдореЙрдбрд▓ рдХреЗ рд▓рд┐рдП <br><ul><li>  рдорд╛рдирдХ рдкреНрд░рд╛рд░реВрдк (рдкрд╛рда) рд╕реЗ рдореЙрдбрд▓ рдкрдврд╝рдирд╛ </li><li>  рднреМрддрд┐рдХ рдФрд░ рд╢реНрд░реЗрдгреАрдмрджреНрдз рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди </li><li>  рдЧреБрдо рдорд╛рди рд╕рдорд░реНрдерди </li><li>  рд╢реНрд░реЗрдгреАрдмрджреНрдз рдЪрд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд╛ рдЕрдиреБрдХреВрд▓рди </li><li>  рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА-рдХреЗрд╡рд▓ рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЗ рд╕рд╛рде рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рдЕрдиреБрдХреВрд▓рди </li></ul><br></li><li>  <code>XGBoost</code> рдореЙрдбрд▓ рдХреЗ рд▓рд┐рдП <br><ul><li>  рдорд╛рдирдХ рдкреНрд░рд╛рд░реВрдк (рдмрд╛рдЗрдирд░реА) рд╕реЗ рдореЙрдбрд▓ рдкрдврд╝рдирд╛ </li><li>  рдЧреБрдо рдорд╛рди рд╕рдорд░реНрдерди </li><li>  рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рдЕрдиреБрдХреВрд▓рди </li></ul><br></li></ul><br>  рдпрд╣рд╛рдВ рдПрдХ рдиреНрдпреВрдирддрдо <code>Go</code> рдХрд╛рд░реНрдпрдХреНрд░рдо рд╣реИ рдЬреЛ рдбрд┐рд╕реНрдХ рд╕реЗ рдПрдХ рдореЙрдбрд▓ рдХреЛ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИ рдФрд░ рдПрдХ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рджрд┐рдЦрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">package main </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">import</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"bufio"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"fmt"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"os"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"github.com/dmitryikh/leaves"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span><span class="hljs-function"> func </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// 1.     path := "lightgbm_model.txt" reader, err := os.Open(path) if err != nil { panic(err) } defer reader.Close() // 2.   LightGBM model, err := leaves.LGEnsembleFromReader(bufio.NewReader(reader)) if err != nil { panic(err) } // 3.  ! fvals := []float64{1.0, 2.0, 3.0} p := model.Predict(fvals, 0) fmt.Printf("Prediction for %v: %f\n", fvals, p) }</span></span></code> </pre><br>  рд▓рд╛рдЗрдмреНрд░реЗрд░реА API рдиреНрдпреВрдирддрдо рд╣реИред  <code>XGBoost</code> рдореЙрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>XGBoost</code> рдмрд╕ рдКрдкрд░ рджрд┐рдП рдЧрдП <code>leaves.XGEnsembleFromReader</code> рдмрдЬрд╛рдп <code>leaves.XGEnsembleFromReader</code> рдХреЙрд▓ рдХрд░реЗрдВред <code>leaves.XGEnsembleFromReader</code> рд╡рд┐рдзрд┐ред  рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгрд┐рдпреЛрдВ рдХреЛ <code>PredictDense</code> рдпрд╛ <code>model.PredictCSR</code> рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  <a href="">рдкрддреНрддрд┐рдпреЛрдВ рдХреЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ</a> рдореЗрдВ рдЕрдзрд┐рдХ рдЙрдкрдпреЛрдЧ рдкрд░рд┐рджреГрд╢реНрдп рдкрд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЗрд╕ рддрдереНрдп рдХреЗ рдмрд╛рд╡рдЬреВрдж рдХрд┐ <code>Go</code> , <code>C++</code> рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдзреАрдореА рдЧрддрд┐ рд╕реЗ рдЪрд▓рддрд╛ рд╣реИ (рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рднрд╛рд░реА рд░рдирдЯрд╛рдЗрдо рдФрд░ рд░рдирдЯрд╛рдЗрдо рдЪреЗрдХ рдХреЗ рдХрд╛рд░рдг), рдХрдИ рдЕрдиреБрдХреВрд▓рди рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдореВрд▓ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЗ рд╕реА рдПрдкреАрдЖрдИ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреБрд▓рдиреАрдп рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рдЧрддрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдерд╛ред <br><img src="https://habrastorage.org/webt/xl/rw/bi/xlrwbiikgtfpor6luj5_n0gm4c8.png" width="600"><br><br>  рддреБрд▓рдирд╛ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдФрд░ рд╡рд┐рдзрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬреАрдердм рдкрд░ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА</a> рдореЗрдВ рд╣реИрдВред <br><br><h2>  рдЬрдбрд╝ рдХреЛ рджреЗрдЦреЗрдВ </h2><br>  рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдпрд╣ рд▓реЗрдЦ <code>XGBoost</code> рдФрд░ <code>LightGBM</code> рдореЗрдВ рдкреЗрдбрд╝реЛрдВ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдП рджреНрд╡рд╛рд░ рдЦреЛрд▓рддрд╛ рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдмреБрдирд┐рдпрд╛рджреА рдирд┐рд░реНрдорд╛рдг рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИрдВ, рдФрд░ рдореИрдВ рдкрд╛рдардХреЛрдВ рдХреЛ рдЦреБрд▓реЗ рд╕реНрд░реЛрдд рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрддреНрд╕рд╛рд╣рд┐рдд рдХрд░рддрд╛ рд╣реВрдВ - рдХреЛрдб рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрдм рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреНрд░рд╢реНрди рд╣реИрдВред <br><br>  рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЬреЛ рдЧреЛ рднрд╛рд╖рд╛ рдореЗрдВ рдЕрдкрдиреА рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рдврд╛рд▓ рдмрдврд╝рд╛рдиреЗ рд╡рд╛рд▓реЗ рдореЙрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд╡рд┐рд╖рдп рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рдореИрдВ рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдЦреБрдж рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрддреНрддрд┐рдпреЛрдВ рдХреЗ</a> рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рдХрд░рд╛рдПрдВред  <code>leaves</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП <code>leaves</code> рдЖрдк рдореВрд▓ C ++ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЧрддрд┐ рдЦреЛрдП рдмрд┐рдирд╛, рдЕрдкрдиреЗ рдЙрддреНрдкрд╛рджрди рдкрд░рд┐рд╡реЗрд╢ рдореЗрдВ рдорд╢реАрди рд▓рд░реНрдирд┐рдВрдЧ рдореЗрдВ рдЕрдЧреНрд░рдгреА рдмрдврд╝рдд рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХрд╛ рдЖрд╕рд╛рдиреА рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЕ рдЫрд╛! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi423495/">https://habr.com/ru/post/hi423495/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi423485/index.html">IntersectionObserver рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрд▓рд╕реА рд▓реЛрдбрд┐рдВрдЧ рдЫрд╡рд┐рдпрд╛рдВ</a></li>
<li><a href="../hi423487/index.html">рдиреЛрдб.рдЬреЗрдПрд╕ рдмрд┐рдирд╛ рдиреЛрдб_рдореЙрдбреНрдпреВрд▓ рдХреЗ</a></li>
<li><a href="../hi423489/index.html">рдореИрдВ рдПрдХ рдЖрдкрд╛рддрдХрд╛рд▓реАрди рдЪрд┐рдХрд┐рддреНрд╕рдХ рд╣реВрдВ рдФрд░ рдореИрдВ рдирдП Apple рд╡реЙрдЪ рдЗрд▓реЗрдХреНрдЯреНрд░реЛрдХрд╛рд░реНрдбрд┐рдпреЛрдЧреНрд░рд╛рдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ</a></li>
<li><a href="../hi423491/index.html">PHP рдбрд╛рдЗрдЬреЗрд╕реНрдЯ рдирдВрдмрд░ 139 (3 рд╕рд┐рддрдВрдмрд░ - 17, 2018)</a></li>
<li><a href="../hi423493/index.html">рдПрдВрдбреНрд░реЙрдЗрдб рдЧреЛ рднрд╡рд┐рд╖реНрдп рдХреЗ рдЕрд░рдм рдбрд┐рд╡рд╛рдЗрд╕ рдФрд░ 50 рдПрдордмреА рдХреА рд╕реАрдорд╛ рд╣реИред рдпрд╛рдВрдбреЗрдХреНрд╕ рд╡реНрдпрд╛рдЦреНрдпрд╛рди</a></li>
<li><a href="../hi423497/index.html">рдЖрдЗрдП рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд рд░рд╛рдЬреНрдп рдорд╢реАрдиреЛрдВ рдФрд░ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ SObjectizer-5 рдореЗрдВ рдЙрдирдХреЗ рд╕рдорд░реНрдерди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ</a></li>
<li><a href="../hi423499/index.html">рджреЗрд╡рдмреЙрдп - рдореИрдВрдиреЗ рдПрдХ рдУрдкрди рд╕реЛрд░реНрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдФрд░ рдХрд┐рдХрд╕реНрдЯрд╛рд░реНрдЯрд░ рдкрд░ рдПрдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛</a></li>
<li><a href="../hi423501/index.html">рдПрдХ рдбрд┐рдЬрд╛рдЗрди рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рджреГрд╢реНрдп рд╢реИрд▓реА рдХреА рдЦреЛрдЬ рдФрд░ рдирд┐рд░реНрдорд╛рдг</a></li>
<li><a href="../hi423503/index.html">рдЬрд░реНрдордиреА рдореЗрдВ рд░рд╣рдиреЗ, рд░рд╣рдиреЗ рдФрд░ рдЕрдзреНрдпрдпрди рдХрд╛ рдореЗрд░рд╛ рдЕрдиреБрднрд╡</a></li>
<li><a href="../hi423505/index.html">рдЬреБрдХрд░рдмрд░реНрдЧ рдиреЗ 13 рдЕрд░рдм рдбреЙрд▓рд░ рдореЗрдВ рдлреЗрд╕рдмреБрдХ рдХреЗ рд╢реЗрдпрд░ рдмреЗрдЪреЗ рддрд╛рдХрд┐ "рд╣рдорд╛рд░реЗ рдмрдЪреНрдЪреЛрдВ рдХреЛ рдХрднреА рдмреАрдорд╛рд░ рди рд╣реЛрдирд╛ рдкрдбрд╝реЗ"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>