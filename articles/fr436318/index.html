<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüç≥ üàöÔ∏è üëäüèΩ Nouvelles fonctionnalit√©s d'automatisation r√©seau dans Red Hat Ansible üë®üèº‚Äçüé® ü§∑üèª üëø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="√Ä la lumi√®re des am√©liorations significatives mises en ≈ìuvre dans Ansible Engine 2.6, ainsi que de la prise en compte de la sortie d'Ansible Tower 3.3...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nouvelles fonctionnalit√©s d'automatisation r√©seau dans Red Hat Ansible</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/436318/">  √Ä la lumi√®re des am√©liorations significatives mises en ≈ìuvre dans Ansible Engine 2.6, ainsi que de la prise en compte de la sortie d'Ansible Tower 3.3 et de la r√©cente version d'Ansible Engine 2.7, examinons de plus pr√®s les perspectives d'automatisation du r√©seau. <br><br><img src="https://habrastorage.org/webt/id/hd/2q/idhd2qop4een4zu8tyq_l1dyy8u.png" width="100%"><br><br>  Dans cet article: <br><br><ul><li>  Plugin de connexion Httpapi. <ul><li>  Prise en charge d'Arista eAPI et de Cisco NX-API. </li></ul></li><li>  Nouveaux modules d'automatisation de r√©seau. <ul><li>  net_get et net_put. </li><li>  netconf_get, netconf_rpc et netconf_config. </li><li>  cli_command et cli_config. </li></ul></li><li>  Am√©lioration de l'interface Web d'Ansible Tower. </li><li>  G√©rez les informations d'identification dans Ansible Tower lorsque vous travaillez avec des p√©riph√©riques r√©seau. </li><li>  Utilisation de diff√©rentes versions d'Ansible dans Tower en m√™me temps </li></ul><br>  N'oubliez pas que la sortie de chaque nouvelle version d'Ansible est accompagn√©e d'une mise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√†</a> jour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">du guide de portage</a> , ce qui facilitera grandement la transition vers la nouvelle version. <br><a name="habracut"></a><br><h3>  Plugin de connexion HTTPAPI </h3><br>  Les plugins de connexion permettent √† Ansible de se connecter aux h√¥tes cibles, puis d'effectuer des t√¢ches sur eux.  Depuis Ansible 2.5, un nouveau plugin de ce type appel√© network_cli est apparu.  Il √©limine le besoin d'utiliser le param√®tre du fournisseur et standardise l'ordre d'ex√©cution des modules r√©seau, √† la suite de quoi les playbooks pour les p√©riph√©riques r√©seau sont maintenant ex√©cut√©s, ex√©cut√©s et fonctionnent de la m√™me mani√®re que les playbooks pour les h√¥tes Linux.  √Ä son tour, pour Ansible Tower, la diff√©rence entre les p√©riph√©riques r√©seau et les h√¥tes dispara√Æt et il n'est plus n√©cessaire de faire la distinction entre les noms d'utilisateur et les mots de passe pour les p√©riph√©riques r√©seau et pour les machines.  Cela a √©t√© discut√© plus en d√©tail <a href="">ici</a> , mais en bref, les mots de passe de connexion pour le serveur Linux et le commutateur Arista EOS ou routeur Cisco peuvent maintenant √™tre utilis√©s et stock√©s de mani√®re similaire. <br><br>  Dans Ansible 2.5, la connexion via les m√©thodes eAPI et NX-API n'√©tait possible qu'en utilisant l'ancienne m√©thode du fournisseur.  Ansible 2.6 n'a plus cette limitation et vous pouvez utiliser librement la m√©thode de connexion httpapi de haut niveau.  Voyons comment cela se fait. <br><br>  Vous devez d'abord activer l'eAPI ou l'API NX sur le p√©riph√©rique r√©seau pour pouvoir ensuite utiliser la m√©thode httpapi.  Cela se fait facilement avec la commande Ansible appropri√©e, par exemple, voici comment activer eAPI sur un commutateur Arista EOS. <br><br><pre><code class="plaintext hljs">[user@rhel7]$ ansible -m eos_eapi -c network_cli leaf01 leaf01 | SUCCESS =&gt; { "ansible_facts": { "eos_eapi_urls": { "Ethernet1": [ "https://192.168.0.14:443" ], "Management1": [ "https://10.0.2.15:443" ] } }, "changed": false, "commands": [] }</code> </pre> <br>  Lorsqu'elle est connect√©e √† un v√©ritable commutateur EOS Arista, la commande show management api http-commandes montrera que l'API est activ√©e: <br><br><pre> <code class="plaintext hljs">leaf01# show management api http-commands Enabled: Yes HTTPS server: running, set to use port 443 &lt;&lt;&lt;rest of output removed for brevity&gt;&gt;&gt;</code> </pre><br>  Le script Ansible Playbook ci-dessous ex√©cute simplement la commande show version, puis dans la section de d√©bogage renvoie uniquement la version √† partir de la sortie JSON de la t√¢che. <br><br><pre> <code class="plaintext hljs">--- - hosts: leaf01 connection: httpapi gather_facts: false tasks: - name: type a simple arista command eos_command: commands: - show version | json register: command_output - name: print command output to terminal window debug: var: command_output.stdout[0]["version"]</code> </pre><br>  L'ex√©cution de ce script entra√Ænera le r√©sultat suivant: <br><br><pre> <code class="plaintext hljs">[user@rhel7]$ ansible-playbook playbook.yml PLAY [leaf01]******************************************************** TASK [type a simple arista command] ********************************* ok: [leaf01] TASK [print command output to terminal window] ********************** ok: [leaf01] =&gt; { "command_output.stdout[0][\"version\"]": "4.20.1F" } PLAY RECAP*********************************************************** leaf01 : ok=2 changed=0 unreachable=0 failed=0</code> </pre><br>  REMARQUE: Arista eAPI ne prend pas en charge les versions raccourcies des commandes (telles que ¬´show ver¬ª au lieu de ¬´show version2), vous devez donc toutes les √©crire.  Pour plus d'informations sur le plug-in de connexion httpapi, consultez la documentation. <br><br><h3>  Nouveaux modules d'automatisation de r√©seau </h3><br>  Ansible 2.6 et la version 2.7 lanc√©e en octobre offrent sept nouveaux modules pour l'automatisation du r√©seau. <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">net_get</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Copie un</a> fichier d'un p√©riph√©rique r√©seau vers Ansible Controller. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">net_put</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Copie un</a> fichier d'Ansible Controller sur un p√©riph√©rique r√©seau. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">netconf_get</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©cup√®re</a> les donn√©es de configuration / √©tat d'un p√©riph√©rique r√©seau avec NETCONF activ√©. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">netconf_rpc</a> - Effectue des op√©rations sur un p√©riph√©rique r√©seau avec NETCONF activ√©. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">netconf_config</a> - configuration du p√©riph√©rique <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">netconf</a> , le module permet √† l'utilisateur d'envoyer un fichier XML aux p√©riph√©riques netconf et de v√©rifier si la configuration a chang√©. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cli_command</a> - ex√©cute la commande cli sur les p√©riph√©riques r√©seau qui ont une interface de commande (cli). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cli_config</a> - Envoie (push) la configuration du texte aux p√©riph√©riques r√©seau via network_cli. </li></ul><br><h3>  net_get et net_put </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">net_get</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Copie un</a> fichier d'un p√©riph√©rique r√©seau vers Ansible Controller. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">net_put</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Copie un</a> fichier d'Ansible Controller sur un p√©riph√©rique r√©seau. </li></ul><br>  Les modules net_get et net_put ne sont li√©s √† l'√©quipement d'aucun fabricant particulier et copient simplement les fichiers du p√©riph√©rique r√©seau vers des p√©riph√©riques utilisant des protocoles de transfert SCP ou SFTP standard (sp√©cifi√©s par le param√®tre de protocole).  Ces deux modules n√©cessitent l'utilisation de la m√©thode de connexion network_cli et ne fonctionnent √©galement que si scp (pip install scp) est install√© sur le contr√¥leur et SCP ou SFTP est activ√© sur le p√©riph√©rique r√©seau. <br><br>  Nous supposons que dans l'exemple de notre playbook, nous avons d√©j√† ex√©cut√© la commande suivante sur le p√©riph√©rique Leaf01: <br><br><pre> <code class="plaintext hljs">leaf01#copy running-config flash:running_cfg_eos1.txt Copy completed successfully.</code> </pre><br>  Voici √† quoi ressemble un playbook avec deux t√¢ches (le premier copie le fichier du p√©riph√©rique Leaf01 et le second copie le fichier sur le p√©riph√©rique Leaf01): <br><br><pre> <code class="plaintext hljs">--- - hosts: leaf01 connection: network_cli gather_facts: false tasks: - name: COPY FILE FROM THE NETWORK DEVICE TO ANSIBLE CONTROLLER net_get: src: running_cfg_eos1.txt - name: COPY FILE FROM THE ANSIBLE CONTROLLER TO THE NETWORK DEVICE net_put: src: temp.txt</code> </pre><br><h3>  netconf_get, netconf_rpc et netconf_config </h3><br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">netconf_get</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©cup√®re</a> les donn√©es de configuration / √©tat d'un p√©riph√©rique r√©seau avec NETCONF activ√©. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">netconf_rpc</a> - Effectue des op√©rations sur un p√©riph√©rique r√©seau avec NETCONF activ√©. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">netconf_config</a> - configuration du p√©riph√©rique <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">netconf</a> , le module permet √† l'utilisateur d'envoyer un fichier XML aux p√©riph√©riques netconf et de v√©rifier si la configuration a chang√©. </li></ul><br>  Le protocole de gestion de r√©seau NETCONF (Network Configuration Protocol) est d√©velopp√© et normalis√© par l'IETF.  Selon la RFC 6241, NETCONF peut √™tre utilis√© pour installer, manipuler et supprimer des configurations de p√©riph√©riques r√©seau.  NETCONF est une alternative √† la ligne de commande SSH (network_cli) et aux API comme Cisco NX-API ou Arista eAPI (httpapi). <br><br>  Pour illustrer les nouveaux modules netconf, nous activons d'abord netconf sur les routeurs Juniper en utilisant le module <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">junos_netconf</a> .  Netconf n'est pas pris en charge sur tous les mod√®les d'√©quipement r√©seau, v√©rifiez donc votre documentation avant de l'utiliser. <br><br><pre> <code class="plaintext hljs">[user@rhel7 ~]$ ansible -m junos_netconf juniper -c network_cli rtr4 | CHANGED =&gt; { "changed": true, "commands": [ "set system services netconf ssh port 830" ] } rtr3 | CHANGED =&gt; { "changed": true, "commands": [ "set system services netconf ssh port 830" ] }</code> </pre><br>  Juniper Networks propose l'explorateur d'API XML Junos pour les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">balises op√©rationnelles</a> et les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">balises</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">configuration</a> .  Prenons l'exemple de la demande op√©rationnelle que Juniper Networks utilise dans sa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation pour</a> illustrer la demande RPC pour une interface sp√©cifique. <br><br><pre> <code class="plaintext hljs">&lt;rpc&gt; &lt;get-interface-information&gt; &lt;interface-name&gt;ge-2/3/0&lt;/interface-name&gt; &lt;detail/&gt; &lt;/get-interface-information&gt; &lt;/rpc&gt; ]]&gt;]]&gt;</code> </pre><br>  Il est facilement traduit en Ansible Playbook.  get-interface-information est un appel RPC et des param√®tres suppl√©mentaires sont sp√©cifi√©s sous forme de paires cl√©-valeur.  Dans cet exemple, il n'y a qu'un seul param√®tre - nom-interface - et sur notre p√©riph√©rique r√©seau, nous voulons simplement regarder em1.0.  Nous utilisons le param√®tre de registre qui a √©t√© d√©fini pour la t√¢che, juste pour enregistrer les r√©sultats, nous utilisons donc le module de d√©bogage et affichons les r√©sultats sur l'√©cran du terminal.  Le module netconf_rpc vous permet √©galement de traduire la sortie XML directement en JSON. <br><br><pre> <code class="plaintext hljs">--- - name: RUN A NETCONF COMMAND hosts: juniper gather_facts: no connection: netconf tasks: - name: GET INTERFACE INFO netconf_rpc: display: json rpc: get-interface-information content: interface-name: "em1.0" register: netconf_info - name: PRINT OUTPUT TO TERMINAL WINDOW debug: var: netconf_info</code> </pre><br>  Apr√®s avoir d√©marr√© le playbook, nous obtenons ceci: <br><br><pre> <code class="plaintext hljs">ok: [rtr4] =&gt; { "netconf_info": { "changed": false, "failed": false, "output": { "rpc-reply": { "interface-information": { "logical-interface": { "address-family": [ { "address-family-flags": { "ifff-is-primary": "" }, "address-family-name": "inet", "interface-address": [ { "ifa-broadcast": "10.255.255.255", "ifa-destination": "10/8", "ifa-flags": { "ifaf-current-preferred": "" }, "ifa-local": "10.0.0.4" }, &lt;&lt;&lt;rest of output removed for brevity&gt;&gt;&gt;</code> </pre><br>  Pour plus d'informations, consultez le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Juniper Platform Guide</a> et la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation NETCONF</a> . <br><br><h3>  cli_command et cli_config </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cli_command</a> - ex√©cute une commande sur les p√©riph√©riques r√©seau en utilisant leur interface de ligne de commande (s'il y en a une). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cli_config</a> - Envoie (push) la configuration du texte aux p√©riph√©riques r√©seau via network_cli. </li></ul><br>  Les modules cli_command et cli_config qui sont apparus dans Ansible Engine 2.7 ne sont pas non plus li√©s √† l'√©quipement d'un fabricant particulier et peuvent √™tre utilis√©s pour automatiser diverses plates-formes r√©seau.  Ils sont bas√©s sur la valeur de la variable ansible_network_os (d√©finie dans le fichier d'inventaire ou dans le dossier group_vars) pour utiliser le plugin cliconf souhait√©.  Une liste de toutes les valeurs de la variable ansible_network_os est fournie dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> .  Dans cette version d'Ansible, vous pouvez toujours utiliser les anciens modules pour des plateformes sp√©cifiques, alors prenez votre temps pour r√©√©crire les playbooks existants.  Pour plus d'informations, consultez les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">guides de portage officiels</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9c/se/hp/9csehpg6fbtd_op985auxtaj0ty.png"></div><br><br>  Voyons comment ces modules sont utilis√©s dans Ansible Playbook.  Ce playbook s'ex√©cutera sur deux syst√®mes Cisco Cloud Services Routers (CSR) ex√©cutant IOS-XE.  La variable ansible_network_os dans le fichier d'inventaire est d√©finie sur ios. <br><br><pre> <code class="plaintext hljs">&lt;config snippet from inventory&gt; [cisco] rtr1 ansible_host=34.203.197.120 rtr2 ansible_host=34.224.60.230 [cisco:vars] ansible_ssh_user=ec2-user ansible_network_os=ios</code> </pre><br>  Voici comment cli_config et cli_command sont utilis√©s: <br><br><pre> <code class="plaintext hljs">--- - name: AGNOSTIC PLAYBOOK hosts: cisco gather_facts: no connection: network_cli tasks: - name: CONFIGURE DNS cli_config: config: ip name-server 8.8.8.8 - name: CHECK CONFIGURATION cli_command: command: show run | i ip name-server register: cisco_output - name: PRINT OUTPUT TO SCREEN debug: var: cisco_output.stdout</code> </pre><br>  Et voici la sortie de ce playbook: <br><br><pre> <code class="plaintext hljs">[user@rhel7 ~]$ ansible-playbook cli.yml PLAY [AGNOSTIC PLAYBOOK] ********************************************* TASK [CONFIGURE DNS] ************************************************* ok: [rtr1] ok: [rtr2] TASK [CHECK CONFIGURATION] ******************************************* ok: [rtr1] ok: [rtr2] TASK [PRINT OUTPUT TO SCREEN] **************************************** ok: [rtr1] =&gt; { "cisco_output.stdout": "ip name-server 8.8.8.8" } ok: [rtr2] =&gt; { "cisco_output.stdout": "ip name-server 8.8.8.8" } PLAY RECAP ********************************************************** rtr1 : ok=3 changed=0 unreachable=0 failed=0 rtr2 : ok=3 changed=0 unreachable=0 failed=0</code> </pre><br>  Veuillez noter que ces modules sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">idempotents</a> tant que vous utilisez la syntaxe appropri√©e pour les p√©riph√©riques r√©seau correspondants. <br><br><h3>  Interface de tour Ansible am√©lior√©e </h3><br>  L'interface Web de Red Hat Ansible Tower 3.3 est devenue plus pratique et fonctionnelle, permettant moins de clics lors de l'ex√©cution de diverses t√¢ches. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/af/ll/9w/afll9wu5oydzr0cm5_w25nm5vum.png"></div><br><br>  La gestion des informations d'identification, le planificateur de t√¢ches, les scripts d'inventaire, le contr√¥le d'acc√®s bas√© sur les r√¥les, les notifications et bien plus sont d√©sormais collect√©s dans le menu principal sur le c√¥t√© gauche de l'√©cran et sont disponibles en un clic.  L'√©cran d'affichage des travaux d'affichage des travaux affiche imm√©diatement des informations suppl√©mentaires importantes: qui a commenc√© la t√¢che et quand;  quel inventaire a √©t√© √©labor√© au cours de sa mise en ≈ìuvre;  de quel projet le livre de jeu est-il tir√©? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tx/fs/76/txfs761e3rvtucyej_tt6dls_km.png"></div><br><br><h3>  G√©rer les informations d'identification pour les p√©riph√©riques r√©seau dans Ansible Tower </h3><br>  Red Hat Ansible Tower 3.3 facilite la gestion des mots de passe de connexion pour les p√©riph√©riques r√©seau.  Dans la nouvelle interface Web, la commande Credentials se trouve imm√©diatement dans le menu principal, dans le groupe Resources. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wb/kx/va/wbkxva0twgq2chggh2hdl3_k4-s.png"></div><br><br>  Ansible Tower 3.3 a laiss√© un type d'informations d'identification appel√© ¬´r√©seau¬ª sp√©cial (r√©seau), qui d√©finit les variables d'environnement ANSIBLE_NET_USERNAME et ANSIBLE_NET_PASSWORD utilis√©es dans l'ancienne m√©thode du fournisseur.  Tout cela fonctionne toujours, comme indiqu√© dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> , afin que vous puissiez utiliser les scripts Ansible Playbooks existants. Cependant, pour les nouvelles m√©thodes de haut niveau de connexion de httpapi et network_cli, le type d'informations d'identification r√©seau n'est plus n√©cessaire, car d√©sormais Ansible fonctionne de la m√™me mani√®re avec les connexions par mot de passe qu'avec connexion aux p√©riph√©riques r√©seau, et donc lors de la connexion aux h√¥tes Linxu.  Par cons√©quent, pour les p√©riph√©riques r√©seau, vous devez maintenant s√©lectionner le type d'informations d'identification de la machine - il suffit de le s√©lectionner et d'entrer votre mot de passe de connexion ou de fournir une cl√© SSH. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/he/hz/45/hehz456b54gft88sdrgpdhsopty.png"></div><br><br>  REMARQUE: Ansible Tower crypte le mot de passe imm√©diatement apr√®s avoir enregistr√© les informations d'identification. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7q/oa/37/7qoa37ykv-veitbpdra4kpfyc6w.png"></div><br><br>  Gr√¢ce au chiffrement, les informations d'identification peuvent √™tre d√©l√©gu√©es en toute s√©curit√© √† d'autres utilisateurs et groupes - ils ne verront ou ne reconna√Ætront tout simplement pas le mot de passe.  Pour plus d'informations sur le fonctionnement des informations d'identification, le chiffrement utilis√© et les autres types d'informations d'identification (tels qu'Amazon AWS, Microsoft Azure et Google GCE) se trouvent dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation Ansible Tower</a> . <br><br>  Une description plus d√©taill√©e de Red Hat Ansible Tower 3.3 peut √™tre trouv√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h3>  Utilisation de diff√©rentes versions d'Ansible dans Tower en m√™me temps </h3><br>  Supposons que nous souhaitons que certains playbooks s'ex√©cutent via Ansible Engine 2.4.2 et d'autres via Ansible Engine 2.6.4.  Tower dispose d'un outil virtualenv sp√©cial pour cr√©er des sandbox Python afin d'√©viter les conflits avec les d√©pendances conflictuelles et les diff√©rentes versions.  Ansible Tower 3.3 vous permet de d√©finir virtualenv √† diff√©rents niveaux: organisation, projet ou mod√®le de t√¢che.  Voici √† quoi ressemble le mod√®le de t√¢che que nous avons cr√©√© dans Ansible Tower pour sauvegarder notre r√©seau. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/po/s4/zv/pos4zvk54sl3u1tn-pesf8iieps.png"></div><br><br>  Lorsque vous disposez d'au moins deux environnements virtuels, le menu d√©roulant Environnement Ansible appara√Æt dans le menu principal d'Ansible Tower, o√π vous pouvez facilement sp√©cifier la version d'Ansible √† utiliser lors de l'ex√©cution de la t√¢che. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dd/0s/1x/dd0s1xczwzlre4ywiplhlnsuff8.png"></div><br><br>  Par cons√©quent, si vous disposez d'un m√©lange de playbooks pour automatiser le r√©seau, dont certains utilisent l'ancienne m√©thode du fournisseur (Ansible 2.4 et versions pr√©c√©dentes), et certains utilisent de nouveaux plugins httpapi ou network_cli (Ansible 2.5 et sup√©rieur), vous pouvez facilement affecter chaque t√¢che Version ansible.  De plus, cette fonctionnalit√© sera utile si les d√©veloppeurs et la production utilisent des versions diff√©rentes d'Ansible.  En d'autres termes, vous pouvez mettre √† jour Tower en toute s√©curit√©, sans vous soucier qu'apr√®s cela, vous devrez passer √† n'importe quelle version d'Ansible Engine, ce qui augmente consid√©rablement la flexibilit√© dans l'automatisation de divers types d'√©quipements et d'environnements r√©seau, ainsi que des sc√©narios d'utilisation. <br><br>  Pour plus d'informations sur l'utilisation de virtualenv, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436318/">https://habr.com/ru/post/fr436318/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436308/index.html">Rostelecom pourrait devenir un monopole sur le march√© des centres de donn√©es</a></li>
<li><a href="../fr436310/index.html">Comme l'a fait Ivan Metrics DevOps. Objet d'influence</a></li>
<li><a href="../fr436312/index.html">Synth√®se de la parole du r√©seau neuronal √† l'aide de l'architecture Tacotron 2, ou ¬´Obtenez l'alignement ou essayez de mourir¬ª</a></li>
<li><a href="../fr436314/index.html">Un h√¥tel-robot japonais a "licenci√©" la moiti√© de ses robots en raison des probl√®mes qu'ils cr√©ent</a></li>
<li><a href="../fr436316/index.html">Comment les cartes √† puce aident √† stimuler les projets informatiques</a></li>
<li><a href="../fr436320/index.html">De nombreuses propri√©t√©s ou propri√©t√©-objet: crit√®res de s√©lection</a></li>
<li><a href="../fr436322/index.html">@Pythonetc d√©cembre 2018</a></li>
<li><a href="../fr436324/index.html">Trucs et astuces de ma cha√Æne Telegram @pythonetc, d√©cembre 2018</a></li>
<li><a href="../fr436326/index.html">Re-d√©centralisation du web. Pour toujours cette fois</a></li>
<li><a href="../fr436328/index.html">PVS-Studio 7.00</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>