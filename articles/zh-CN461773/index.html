<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤘 🎁 🍡 Airtest IDE-测试手机游戏自动化的新方法？ 🌉 🌕 🤾🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今天，我想向您介绍一个称为Airtest的相当新的用于自动化测试的开源工具。 将来，我将再写几篇文章，详细介绍此工具包的各个元素以及如何使用它们，现在我的目标是向您介绍该工具包并给出一个大致的概念。 


 这是三篇文章的第一篇。 第二部分描述了图像识别框架（Image Recognition） -...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Airtest IDE-测试手机游戏自动化的新方法？</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461773/"><p> 今天，我想向您介绍一个称为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Airtest</a>的相当新的用于自动化测试的开源工具。 将来，我将再写几篇文章，详细介绍此工具包的各个元素以及如何使用它们，现在我的目标是向您介绍该工具包并给出一个大致的概念。 </p><br><p> 这是三篇文章的第一篇。 第二部分描述了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">图像识别框架（Image Recognition）</a> <strong>-AirTest</strong> ，第三部分也是最后一部分<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">通过编写代码</a>致力于<strong>Poco</strong> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">UI自动化框架</a> 。 </p><br><p> AirTest IDE由<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">网易</a>开发，旨在用于“难以自动化”的应用程序，例如游戏。 实际上，它们是开发人员的主要重点，尽管这不会停止将AirTest用于其他任何应用程序。 </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">AirTest IDE</a>在Windows，MacOS X和Linux上运行，并包含2个框架：AirTest和Poco。 刘鑫在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2018年Android游戏开发者峰会上</a>提出了这个发展。  Python 2.7和Python 3.3+用于编写测试。 支持在大量设备上立即运行测试，开源代码和免费应用程序以及易于编写的测试等重要的事情-这些是开发人员所强调的优势。 该应用程序可在Windows和MacOS上使用，并允许您从以下操作系统自动执行应用程序：Windows，iOS，Android。 </p><br><p>  GitHub上<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的AirTest项目</a>包含4个项目： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Airtest</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Poco</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">iOS-Tangent</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">multi-device-runner</a> 。 <br> 还值得一提的是，网易为其自动测试提供了自己的物理设备场，称为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">AirLab</a> 。 </p><br><img src="https://habrastorage.org/webt/go/fi/bj/gofibjhnktjohm0yb4m6jczbrfg.png" alt="图片"><a name="habracut"></a><br><p> 简要介绍框架。 </p><br><p>  <strong>Airtest</strong>是基于图像<strong>阈</strong>值的用于手机游戏和应用程序的图像识别跨平台框架。  AirTest IDE允许您使用以下命令与应用程序进行交互： <br> 触摸，等待，滑动，存在，文本，按键事件，快照，睡眠，assert_exists，assert_not_exists，assert_equal，assert_not_equal。 我将在另一篇文章中讨论命令的功能和参数，该文章专门研究AirTest和Poco框架。 现在值得一提的是，keyevent命令负责“按下设备的物理按钮”，例如Home，Power，Menu，Back。 使用大多数命令时，系统会提示用户突出显示工作设备屏幕的一部分，该屏幕快照将用于相应的命令（触摸，滑动，确定等）。 </p><br><img src="https://habrastorage.org/webt/cm/ad/ko/cmadko_9kom-sbotvmbodeawito.gif" alt="图片"><br><p> 下班后，我可以强调一下Airtest的优势： </p><br><ol><li> 快速清晰的代码编写。 实际上，一切都已完成，在自动模式下，您只需要选择必要的参数，调整时间并小心选择图像即可。 </li><li> 在活动的工作设备上，代码中使用的图片的确切定义。 另外，报告还指出了代码中使用的图像与工作设备屏幕上的图像的重合（比较）百分比。 </li><li> 谈到报告。 每次启动后，您可以使用键盘快捷键Ctrl \ Cmd + L创建报告。 方便的报告提供以下信息：声明其结果的类型，以及在单独的小节中突出显示每个测试步骤，以及有关AirTest单击的位置，期望的图片位置，匹配图片的百分比等信息。 </li><li> 编写代码后，即可在任何设备上使用它。 </li><li> 多线程：连接多个测试设备并并行运行它们。 </li></ol><br><p> 缺点Airtest，下班后我可以重点介绍一下： </p><br><ol><li> 如果在此过程中存在视觉上看起来相同的元素，例如滑块，按钮等，则AirTest极有可能不了解您要使用哪个控件。 这将在相应的错误中指出。 但是，使用第二个框架（Poco）可以轻松省去这个负数，下面将对此进行讨论。 </li><li> 图像的比较（根据代码和屏幕上的实际图像）为黑白。 值得考虑的是您是否很重要，例如角色的视觉外观（他的颜色，不同的衣服等）。 如果字符在视觉上有所不同，但是它们以相同的方式（一个姿势等）显示在屏幕上，则检查很可能会成功。 图像识别选项带有一个“ rgb”复选标记，您可以使用它，但如果图像较小，则效果不佳。 </li><li> 使用应用程序准确拍摄所需的屏幕截图时，您无法“冻结”屏幕。 您不时需要“捕捉”所需的框架。 </li><li> 因为 公开测试版中的应用程序，则可能会遇到各种令人讨厌的错误或不准确之处，例如，无法使用Windows上的内置应用程序调整窗口大小。 现在，作者每隔几个月更新一次AirTest IDE，我希望这些疏忽将很快得到解决。 </li></ol><br><p>  <strong>Poco</strong>是用于自动化用户界面（UI）的通用框架，它提供独立于（游戏）引擎的强大API。 这些依次在运行时检索UI元素的层次结构。 因此，只需单击几下即可使用户“到达”当前页面的整个元素层次结构，依此类推。 此外，该框架还允许您“冻结”当前屏幕以根据当前窗口元素的层次结构来编写代码。  Poco旨在帮助AirTest了解测试所讨论的UI类型，但是没有人会打扰您仅使用此框架编写所有测试。 <br> 所有测试都是用Python编写的。 可以在相应的API中找到命令实现： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">airtest.core.api模块</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">airtest.core.android软件包</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">airtest.core.ios软件包</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">airtest.core.win软件包</a> </p><br><p><img src="https://habrastorage.org/webt/fl/-j/m-/fl-jm-i8pxvlejgwf_a2wcj__fy.gif" alt="图片"></p><br><p> 下班后我可以强调的Poco优势： </p><br><ol><li> 它支持许多重要的游戏引擎，包括Unity3D，cocos2dx-js，cocos2dx-lua，NetEase内部引擎，以及对本机Android / iOS应用程序的支持。 如果要使用不在“受支持”的引擎列表中的引擎，则可以按照<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">相应的说明</a>编写自己的引擎。 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">官方文档中</a>提到了虚幻引擎，但是到目前为止，所有内容都仅限于短语“即将推出”。 </li><li> 屏幕上的UI元素的层次结构会实时返回。 </li><li> 快速启动并运行测试。 </li><li> 就像在AirTest中一样，我只编写了一次代码-随处使用。  Python 2.7和3.3+支持 </li><li> 可以将任何外部库连接到您的项目 </li><li> 从文档来看，它支持GPS，加速计和陀螺仪传感器，并支持纵向和横向显示模式。 </li></ol><br><p> 下班后，我可以重点介绍Poco缺点： </p><br><ol><li> 在Windows 7上工作期间，我没有发现基本问题。 这可能会妨碍成熟的工作，但是目前它们是在Windows 10上使用的。主要问题是在某些情况下对象的移动不正确（滑动命令）。 例如，我指示要移动的对象以及第二个对象的坐标，这是最后一个点。 在这些极少数情况下，Poco会错过最终位置，但报告显示正确的位移数据（矢量），并且该步骤被认为是成功的。 </li><li> 当您选择一些具有大布局（布局）的元素时，该选择可能会与Poco Assistant窗口重叠，并且您将无法选择其他元素，直到将选择从当前元素中删除为止。 要删除选择，可以使用键盘快捷键Alt + F4 </li></ol><br><p> 为了完善图片，值得一提的是Airtest IDE拥有自己的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><strong>Selenium插件</strong></a> ，您可以使用其<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><strong>插件</strong></a>自动执行Web项目，但仅使用Chrome浏览器。 目前不支持其他功能。 就我个人而言，我还没有与他合作过，所以我不能说他的工作，但是在这个简短的描述中不可能错过他。 </p><br><p><img src="https://habrastorage.org/webt/dy/vu/fq/dyvufqnt6-ayoctow3pff4xi0s0.png" alt="图片"></p><br><p> 因此，我想说AirTest IDE是一个非常有前途的开发，旨在使游戏中的UI自动化，但是目前不适合测试这样的游戏过程。 如果您有很多UI元素和/或许多设备要检查，而又不想花费很多工时，那么此IDE很可能成为您的救星。 要开始编写最简单的测试，您不需要具备自动化和编程方面的丰富知识，只需具备使用Python的基本知识即可。 当然，通过这种方式，您不会走得太远，您将不得不学习这种编程语言，但是要开始并理解该程序如何适合您，就足够了。 目前唯一令人沮丧的是各种烦人的错误，例如与嵌入工作设备（Windows应用程序）后无法调整窗口大小，与主程序界面的较大选定对象重叠等相关的错误，但这很可能尤其是考虑到应用程序处于Beta阶段这一事实。 </p><br><p><img src="https://habrastorage.org/webt/ej/bg/qg/ejbgqgnierz11rcdas3evm9bzoy.png" alt="图片"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN461773/">https://habr.com/ru/post/zh-CN461773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN461763/index.html">广告代理机构可以在旅程开始之初扼杀业务吗</a></li>
<li><a href="../zh-CN461765/index.html">我们通过Kafka跨过k8s，保存容器，在Ansible中逃脱垃圾：DevOops 2018的十大报告</a></li>
<li><a href="../zh-CN461767/index.html">SVLAB Search搜索引擎算法</a></li>
<li><a href="../zh-CN461769/index.html">我如何制作（几乎）无用的Javascript网络摄像头流</a></li>
<li><a href="../zh-CN461771/index.html">拒绝沉默：从托儿所到办公室</a></li>
<li><a href="../zh-CN461775/index.html">在Django应用程序中使用Celery的3种情况</a></li>
<li><a href="../zh-CN461779/index.html">您无法使用公司80％的数据。 怎么办呢？</a></li>
<li><a href="../zh-CN461781/index.html">“ Ycombinator创业学校2019。” 前三周的视频</a></li>
<li><a href="../zh-CN461785/index.html">RISC-V的缺点</a></li>
<li><a href="../zh-CN461787/index.html">Android文字显示</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>