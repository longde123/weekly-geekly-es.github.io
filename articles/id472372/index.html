<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍🎓 📐 🌞 Otomatisasi Android Panduan super mudah untuk membuat tes Espresso pertama Anda 🏧 👟 👨🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo teman-teman. Untuk mengantisipasi dimulainya kursus Mobile QA Engineer , kami ingin membagikan terjemahan materi yang menarik kepada Anda. 



 A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Otomatisasi Android Panduan super mudah untuk membuat tes Espresso pertama Anda</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/472372/">  Halo teman-teman.  Untuk mengantisipasi dimulainya kursus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mobile QA Engineer</a> , kami ingin membagikan terjemahan materi yang menarik kepada Anda. <br><br><img src="https://habrastorage.org/webt/he/52/7b/he527bnnfyevgfpavom-jhtt-c8.png"><br><hr><br><h3>  Apa itu Espresso? </h3><br>  Tidak, ini bukan minuman yang Anda minum setiap hari untuk menghibur.  Espresso adalah kerangka uji sumber terbuka yang dikembangkan oleh Google.  Ini memungkinkan Anda untuk melakukan tes antarmuka pengguna yang kompleks pada perangkat atau emulator nyata.  Apakah perlu waktu untuk mulai menulis tes kompleks untuk Android? <br><br>  Mungkin  Tapi tidak ada yang mencegah Anda mengambil langkah pertama dan belajar bagaimana menulis kasus uji sederhana untuk Android menggunakan kerangka kerja Espresso sekarang. <br><a name="habracut"></a><br><h3>  Ceritakan lebih lanjut tentang otomasi? </h3><br>  Tentu saja  Otomasi adalah cara untuk mempercepat tes, membuatnya lebih efisien dan terukur.  Pengujian manual sangat penting, tetapi memiliki tes otomatis adalah pilihan yang jauh lebih baik di masa depan. <br><br>  Pada dasarnya ada dua jenis kerangka kerja pengujian: <br><br><ol><li>  Kerangka kerja yang tidak memerlukan akses ke kode sumber dan yang tidak terintegrasi sebagai bagian dari proyek.  Misalnya, <b>WebDriver, Appium, QTP</b> . </li><li>  Kerangka kerja yang membutuhkan akses ke kode sumber.  Misalnya, <b>Espresso, KIF (Keep It Functional)</b> . </li></ol><br>  Espresso adalah kerangka kerja yang membutuhkan akses ke kode sumber, jadi untuk otomatisasi kita memerlukan akses ke kode proyek.  Karena kita membutuhkan proyek untuk bekerja, mari kita buat! <br><br><h3>  Komponen utama Espresso </h3><br>  Ada tiga jenis metode yang tersedia di Espresso: <br><br><ol><li>  <b>ViewMatchers</b> - memungkinkan Anda menemukan objek dalam hierarki tampilan saat ini </li><li>  <b>ViewAssertions</b> - memungkinkan Anda untuk memeriksa keadaan objek dan mengonfirmasi bahwa negara memenuhi kriteria </li><li>  <b>ViewActions</b> - metode ini memungkinkan Anda untuk melakukan berbagai tindakan dengan objek. </li></ol><br>  Mari kita menggali lebih dalam dan melihat bagaimana semuanya bekerja dengan contoh nyata. <br><br><h4>  Buat aplikasi otomatisasi sederhana </h4><br>  Hal pertama yang perlu kita lakukan adalah membuat aplikasi yang akan kita otomatisasi.  Mari buat proyek di Android Studio.  Untuk ini, tentu saja, Anda perlu Android Studio diinstal di komputer Anda. <br><br>  <b>1. Buka Android Studio dan buat Aktivitas Navigasi Bawah.</b> <br><br><img src="https://habrastorage.org/webt/xg/uo/n8/xguon8rdo7fubabo4t6v-l2r5o4.png"><br>  <i>Android Studio.</i>  <i>Buat Jendela Proyek Baru</i> <br><br>  <b>2. Beri nama proyek dan pilih bahasa pemrograman.</b> <br><br><img src="https://habrastorage.org/webt/uh/ua/lq/uhualqvx5pe7nd5qsrqfogx9z00.png"><br>  <i>Android Studio.</i>  <i>Nama Proyek</i> <br><br>  <b>3. Buka folder androidTest</b> <br><br><img src="https://habrastorage.org/webt/ay/ha/j4/ayhaj4hexlnyhsfj4vhgiy5mkv0.png"><br>  <i>Android Studio.</i>  <i>Tes instrumental.</i> <br><br>  Seperti yang Anda lihat, hanya satu tes yang ditulis di sana, dan ini bukan tes UI, tetapi tes JUnit. <br><br>  Sekarang kita perlu menambahkan tes antarmuka pengguna yang sederhana.  Untuk melakukan ini, pertama buat aturan untuk membuka <i>MainActivity</i> . <br><br>  Mari tambahkan impor anotasi Aturan <b>JUnit</b> : <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.Rule;</code> </pre> <br>  Hal selanjutnya yang harus dilakukan adalah menambahkan baris kode di bawah ini untuk melengkapi anotasi <b>RunWith</b> : <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@Rule public ActivityTestRule&lt;MainActivity&gt; activityActivityTestRule = new ActivityTestRule&lt;&gt;(MainActivity.class);</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/sp/qo/mv/spqomvmsf_qcyud5wvqhnkaautq.png"><br><br>  Sekarang kita melihat bahwa <b>ActivityTestRule</b> disorot dengan warna merah.  Ini berarti bahwa kita perlu mengimpor fungsi <b>ActivityTestRule</b> .  Tapi pertama-tama, kita perlu menambahkan perpustakaan yang bisa melakukan ini.  Singkatnya, untuk tugas ini kita memerlukan bantuan <b>Gradle</b> - sistem otomasi perakitan yang dibuat khusus untuk tujuan ini. <br><br>  Mari kita pergi ke file konfigurasi <b>Gradle</b> dan menambahkan perpustakaan ini.  Buka file bernama <b>build.gradle (Module: app)</b> dan tambahkan baris di bawah ini: <br><br><pre> <code class="python hljs">androidTestImplementation <span class="hljs-string"><span class="hljs-string">'com.android.support.test:rules:1.0.2'</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/u0/j0/db/u0j0dbsn9nfp0ch1kzc2ls1kg44.png"><br>  <i>Android Studio.</i>  <i>Tambahkan ketergantungan.</i> <br><br>  Setelah menambahkan, Anda perlu mengklik tombol untuk menyinkronkan proyek dan kemudian kembali ke file dengan implementasi tes. <br><br>  Sekarang perpustakaan telah ditambahkan, langkah selanjutnya adalah mengimpornya ke file dengan tes instrumental: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> androidx.test.rule.ActivityTestRule;</code> </pre><br><img src="https://habrastorage.org/webt/y0/2n/in/y02ninubbghtx5-satkczvbchaa.png"><br>  <i>Android Studio.</i>  <i>Impor ActivityTestRule.</i> <br><br>  Oke, sekarang kami siap untuk menambahkan tes pertama kami.  Masukkan kode ini di <b>ExampleInstrumentedTest</b> : <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@Test public void clickButtonHome(){ onView(withId(R.id.navigation_home)).perform(click()).check(matches(isDisplayed())); }</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/wx/mx/sc/wxmxscovvmszyncpeloi3adugzm.png"><br>  <i>Android Studio.</i>  <i>Menambahkan tes dan mengimpor item tambahan</i> <br><br>  Untuk pengujian kami, kami perlu mengimpor elemen tambahan sebelum mulai berfungsi.  Klik <b>tombol OK</b> , dan kami, pada kenyataannya, siap untuk meluncurkan pengujian kami! <br><br><h3>  Menjalankan Tes Espresso </h3><br>  Klik kanan pada pengujian kami di sebelah kiri dan pilih <b>"Jalankan ExampleInstrumentedTest"</b> . <br><br><img src="https://habrastorage.org/webt/wf/lt/kr/wfltkr-p33ettdkkjwyufp4gf0u.png"><br><br>  Karena ini adalah <b>tes UI</b> , bukan tes <b>unit</b> , maka kita akan melihat jendela dengan pilihan perangkat yang ingin kita jalankan.  Saya sudah memiliki "Nexus 5X" sebagai perangkat, jadi saya hanya perlu memilihnya. <br><br><img src="https://habrastorage.org/webt/gu/ix/7r/guix7ri_bswxzv0jqytwa59lrr0.png"><br><br>  Dalam kasus Anda, jika Anda belum pernah menggunakan proyek Android, pilih perangkat Android Anda yang sebenarnya atau klik <b>"Buat Perangkat Virtual Baru"</b> dan buat perangkat yang ditiru baru untuk menjalankan tes.  Ini bisa berupa perangkat apa pun dari daftar yang ingin Anda jalankan pengujiannya. <br><br>  Klik <b>OK</b> dan bersiap-siap untuk melihat keajaiban! <br><br><img src="https://habrastorage.org/webt/4r/b5/ad/4rb5adnhp7rbv4vr1ji9zuvpw68.png"><br>  <i>Android Studio.</i>  <i>Hasil tes</i> <br><br>  Seperti yang Anda lihat, kami memiliki serangkaian dua tes yang lulus: tes unit, yang sudah ada di sana setelah proyek dibuat, dan uji <i>clickHomeButton</i> kami, yang baru saja kami tulis. <br><br><img src="https://habrastorage.org/webt/9a/rr/we/9arrwejmr_cf7edvwh8uojyt5qu.png"><br>  <i>Android Studio.</i>  <i>Tes selesai.</i> <br><br>  Seperti namanya, kami hanya mengklik satu tombol di bilah navigasi bawah, yang disebut <b>"navigation_home"</b> di hierarki <b>MainActivity</b> . <br><br>  Mari kita menganalisis apa yang kami lakukan dalam rangkaian metode ini: <br><br><pre> <code class="python hljs">public void clickButtonHome(){ onView(withId(R.id.navigation_home)).perform(click()).check(matches(isDisplayed())); }</code> </pre> <br><ol><li>  1. Panggil <b>onView</b> .  Metode ini adalah metode tipe <b>ViewMatchers</b> .  Kami menemukan objek dalam Aktivitas kami untuk melakukan sesuatu. </li><li>  2. Selanjutnya, kami memanggil <b>perform (klik ())</b> .  Metode ini adalah metode tipe <b>ViewActions</b> .  Kami menunjukkan tindakan spesifik yang perlu dilakukan dalam kasus ini - untuk membuat satu klik (klik).  Ada banyak metode tindakan yang tersedia di Espresso, misalnya: </li><li>  3. Hal terakhir yang perlu kita lakukan adalah mengonfirmasi bahwa tindakan yang kita lakukan benar-benar cocok dengan kriteria kita, dan untuk ini kita menjalankan metode <b>check (isDisplayed ())</b> , yang merupakan metode ketik <b>ViewAssertions</b> .  Dalam hal ini, kami memverifikasi bahwa objek ini (tampilan) memang ditampilkan di layar setelah tindakan klik dilakukan. </li></ol><br><h3>  Hirarki tampilan Android </h3><br>  Pembaca yang budiman, saya harap saya bisa menjelaskan kepada Anda bagaimana menulis <b>tes UI</b> dasar <b>untuk Android</b> menggunakan Espresso. <br><br>  Namun, mungkin tidak begitu mudah untuk memahami apa yang sebenarnya terjadi di sini jika Anda tidak tahu dari mana semua tombol ini berada dan dari mana mereka berasal.  Untuk mengetahuinya, kita harus pergi ke folder <b>"res"</b> di sebelah kiri, buka folder <b>"menu"</b> dan pilih <b>"bottom_nav_menu.xml"</b> . <br>  Inilah yang akan kita lihat di sana: <br><br><img src="https://habrastorage.org/webt/yc/fe/a8/ycfea8uzwehgirzskb2cn8ysszc.png"><br>  <i>Android Studio.</i>  <i>Hirarki presentasi menu navigasi bawah.</i> <br>  Seperti yang Anda lihat, ini adalah baris yang memberikan nama ke item menu: <br><br><pre> <code class="plaintext hljs">android:id="@+id/navigation_home"</code> </pre> <br>  Itulah yang kami gunakan dalam kode kami untuk menjalankan tes.  Ada juga tombol menu <b>navigation_dashboard</b> dan <b>navigation_notifications</b> tersedia di bagian bawah, jadi mari kita lanjutkan dan menggunakannya dalam pengujian kami. <br><br><h3>  Tes Espresso Lebih Banyak </h3><br>  Kita perlu kembali ke file <b>ExampleInstrumentedTest</b> dan menambahkan beberapa fungsi tes lagi: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@Test public void clickButtonDashboard(){ onView(withId(R.id.navigation_dashboard)).perform(click()).check(matches(isDisplayed())); } @Test public void clickButtonNotification(){ onView(withId(R.id.navigation_notifications)).perform(click()).check(matches(isDisplayed())); }</span></span></code> </pre> <br>  Satu-satunya hal yang kami tambahkan adalah memeriksa beberapa item menu lagi: <b>"navigation_dashboard"</b> dan <b>"navigation_notifications"</b> . <br><br><img src="https://habrastorage.org/webt/e9/0o/zf/e90ozfefjwmrpzurm8i0958jllk.png"><br>  <i>Android Studio.</i>  <i>Tambahkan dua tes lagi.</i> <br><br>  Tentu saja, tes ini dapat disederhanakan bahkan lebih, tetapi untuk menunjukkan bagaimana semua ini bekerja, mari kita asumsikan bahwa mereka sangat cocok untuk keperluan kita. <br><br>  Mari kita lanjutkan dan jalankan tes ini lagi.  Klik tombol <b>Jalankan</b> . <br><br><img src="https://habrastorage.org/webt/2s/nm/19/2snm19yru3-sthnx3rs9q6v24oc.png"><br>  <i>Android Studio.</i>  <i>Hasil tes.</i> <br><br>  Semua 4 tes lulus.  Semua tampilan ditemukan, diklik, dan dikonfirmasi dalam hierarki tampilan. <br><br><h3>  Kesimpulan </h3><br>  Espresso adalah solusi ampuh untuk menjalankan tes UI.  Sekarang setelah Anda tahu cara membuatnya, Anda siap untuk menulis tes yang jauh lebih kuat dan kompleks. <br><br>  Selamat mencoba! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id472372/">https://habr.com/ru/post/id472372/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id472360/index.html">Memindai kode Orchard CMS for Bugs</a></li>
<li><a href="../id472362/index.html">Kami mencari dan menganalisis kesalahan dalam kode CMS Orchard</a></li>
<li><a href="../id472364/index.html">PostgreSQL dan catat pengaturan konsistensi untuk setiap koneksi tertentu</a></li>
<li><a href="../id472366/index.html">Algoritma Path Finder Baru di Factorio</a></li>
<li><a href="../id472368/index.html">Pidato memancing: kami menganalisis metode serangan dan metode perlindungan terhadap mereka</a></li>
<li><a href="../id472374/index.html">Mengapa kami memindahkan server ke Islandia</a></li>
<li><a href="../id472378/index.html">Keandalan flash: diharapkan dan tidak terduga. Bagian 2. Konferensi XIV dari asosiasi USENIX. Teknologi penyimpanan file</a></li>
<li><a href="../id472380/index.html">MIRO - platform robot terbuka dalam ruangan</a></li>
<li><a href="../id472384/index.html">Melihat pembaruan Android dari perspektif pengembang</a></li>
<li><a href="../id472386/index.html">ZIO & Cats Effect: aliansi yang berhasil</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>