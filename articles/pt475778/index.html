<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ûüèª üï¥üèª üöµüèΩ WebAssembly: o que e como üåï ‚úäüèæ üìä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo √© baseado na minha apresenta√ß√£o na confer√™ncia ITSubbotnik, realizada em 2 de novembro de 2019 em Moscou. 


 Em geral, sou um programador...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>WebAssembly: o que e como</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475778/"><p><img src="https://habrastorage.org/webt/ss/-n/ix/ss-nixhppesfhxvizle2xwcd7sa.png"></p><br><p>  Este artigo √© baseado na minha apresenta√ß√£o na confer√™ncia ITSubbotnik, realizada em 2 de novembro de 2019 em Moscou. </p><br><p> Em geral, sou um programador de back-end, mas estava interessado nessa tecnologia, que me permite usar meu conhecimento de back-end na frente. </p><br><h2 id="problema">  O problema </h2><br><p>  Vamos come√ßar com o problema que est√° sendo resolvido por essa tecnologia (relativamente nova).  Esse problema √© <strong>executar rapidamente o c√≥digo em um navegador</strong> .  R√°pido - significa "mais r√°pido que JavaScript", idealmente t√£o r√°pido quanto o nosso processador atual permite. <a name="habracut"></a><br>  Al√©m disso, historicamente, requisitos adicionais importantes surgiram gradualmente em torno desse problema: </p><br><ul><li>  <strong>Configura√ß√£o zero</strong> - deve ser uma solu√ß√£o "pronta para uso", nada al√©m de um navegador. </li><li>  <strong>Seguro</strong> - a nova tecnologia n√£o deve criar novas amea√ßas, j√° temos algo a ver com seguran√ßa. </li><li>  <strong>Plataforma cruzada</strong> - os navegadores s√£o executados em todos os principais processadores, incluindo plataformas m√≥veis. </li><li>  <strong>Conveniente para desenvolvedores</strong> - ou seja, para n√≥s. </li></ul><br><h2 id="istoriya-do-wasm">  Hist√≥ria antes de Wasm </h2><br><p>  Vimos muitas op√ß√µes para executar c√≥digo em um navegador.  Podemos dizer que existem vencedores e perdedores neste campo. </p><br><p><img src="https://habrastorage.org/webt/24/cd/be/24cdbepmn1xputvkq2jbwuz7n64.png"></p><br><p>  Vencedores: Este √© definitivamente JavaScript;  o mecanismo V8 que tornou o JS t√£o r√°pido;  bem como HTML5. </p><br><p>  Perdedores: ActiveX - se voc√™ se lembra, essa tecnologia permite que voc√™ fa√ßa qualquer coisa com a m√°quina em geral, ou seja,  a seguran√ßa era muito ruim;  Flash - agora estamos testemunhando a era do decl√≠nio do Flash, embora o ActionScript funcione dentro dele, essencialmente o mesmo JavaScript;  Silverlight - ele deve ter aparecido tarde demais para ocupar um nicho s√©rio. <br>  Como resultado, todos os plugins foram perdidos, inclusive devido a problemas de seguran√ßa. </p><br><p>  Houve outras tentativas para resolver o problema, j√° no navegador: </p><br><ul><li>  NaCl - Cliente nativo proposto pelo Google;  c√≥digo nativo diretamente no navegador, o que naturalmente atrai a plataforma cruzada;  A Mozilla n√£o apoiou essa iniciativa, como resultado, a implementa√ß√£o foi apenas no Chrome. </li><li>  PNaCl - Portable Native Client - um subconjunto de LLVM IR foi usado como c√≥digo port√°til;  tamb√©m n√£o era suportado no Mozilla, novamente apenas no Chrome.  Como resultado, o Google se recusou a oferecer suporte ao PNaCl em maio de 2017. </li></ul><br><h2 id="asmjs">  asm.js </h2><br><p>  <strong>O asm.js</strong> √© outra iniciativa interessante, j√° da Mozilla Foundation, que nos aproxima do t√≥pico WebAssembly.  Apareceu em 2010 e, em 2013, tornou-se dispon√≠vel ao p√∫blico. </p><br><p>  asm.js √© um subconjunto de JavaScript, voc√™ pode compilar c√≥digo de C e C ++ usando o compilador Emscripten. </p><br><p>  Como tamb√©m √© JavaScript, esse c√≥digo ser√° executado em qualquer navegador.  Al√©m disso, os principais navegadores modernos conseguem reconhecer rapidamente o asm.js e compil√°-lo com efici√™ncia no c√≥digo nativo do processador.  Comparado ao c√≥digo nativo obtido diretamente do C / C ++, o c√≥digo obtido do asm.js √© mais lento em apenas 1,5-2 vezes (50-67%). </p><br><p><img src="https://habrastorage.org/webt/mk/--/i-/mk--i-r7f1ionj80by3qbies0ks.png"></p><br><p> √Ä esquerda, est√° o c√≥digo da fun√ß√£o mais simples em C / C ++, √† direita, √© mostrado o que transforma ap√≥s a compila√ß√£o em asm.js.  Primeiramente, vemos a linha <code>'use asm'</code> , este √© um marcador, que deixa claro que o c√≥digo para asm.js segue em seguida.  E neste c√≥digo, vemos constru√ß√µes no formato <code>|0</code> , esta √© uma opera√ß√£o OR bit a bit com valor zero.  De acordo com a especifica√ß√£o, o resultado desta opera√ß√£o √© um n√∫mero inteiro assinado de 32 bits.  Mas esse tipo nem est√° em JavaScript.  No entanto, esse tipo surge como resultado dessa opera√ß√£o, ou seja,  √© essencialmente uma convers√£o para um determinado tipo. </p><br><p>  Em geral, asm.js √© o uso de nosso conhecimento de como o mecanismo do navegador compila JS para otimizar este trabalho. </p><br><h2 id="chto-zhe-takoe-webassembly">  O que √© o WebAssembly? </h2><br><p><img src="https://habrastorage.org/webt/h2/f-/be/h2f-beaumjejbndrbscr3e6-n3s.png"></p><br><p>  <strong>O WebAssembly</strong> (ou <strong>Wasm</strong> ) √© um formato bin√°rio executado em um navegador, uma m√°quina virtual e o resultado da compila√ß√£o a partir de um idioma de alto n√≠vel. </p><br><p>  Wasm n√£o √© uma linguagem de programa√ß√£o, assim como o bytecode Java n√£o √© uma linguagem de programa√ß√£o, mas um resultado de compila√ß√£o e um bloco de c√≥digo em execu√ß√£o. </p><br><p>  Algu√©m muito esperto disse que o nome <strong>web assembly</strong> (ou seja, "assembler para a web") est√° completamente incorreto, porque n√£o √© assembler (n√£o √© uma linguagem de programa√ß√£o) e n√£o tem nada a ver com a web (porque √© apenas uma m√°quina virtual). </p><br><p>  Os criadores do WebAssembly foram guiados pelos seguintes objetivos e limita√ß√µes - veja o v√≠deo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Evolving Wasm em um nome impr√≥prio apropriado: Andreas Rossberg</a> . </p><br><p><img src="https://habrastorage.org/webt/hx/qg/xc/hxqgxczg-vl7wds82p5rk9-_lku.png"></p><br><p>  Na verdade, eles se resumem a tr√™s coisas - multiplataforma, compacta, velocidade.  Mas havia outro requisito importante: era "vendabilidade" - os desenvolvedores dos principais navegadores deveriam ter tomado e tomado a iniciativa.  Como resultado, foi poss√≠vel "vender", representantes do Google, Mozilla, Microsoft e Apple participaram do desenvolvimento da especifica√ß√£o. </p><br><p>  Vamos ver o que Wasm √© como uma m√°quina virtual. </p><br><p><img src="https://habrastorage.org/webt/tn/yx/7j/tnyx7j12olss0rbvec5stpaajwc.png"></p><br><p>  Este √© um "processador fict√≠cio", mas sem registros, tudo √© feito atrav√©s da pilha.  Apenas quatro tipos de dados: dois inteiros, dois flutuantes.  Conjunto de opera√ß√µes relativamente simples - consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">especifica√ß√£o</a> e a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tabela interativa</a> . </p><br><p><img src="https://habrastorage.org/webt/ux/ch/dj/uxchdjjzisdir4nnsgrwvo9k70a.png"></p><br><p>  Modelo de mem√≥ria plana: um √∫nico bloco √© alocado para a mem√≥ria, cujo tamanho √© m√∫ltiplo de 64 KB.  Aqui est√£o o c√≥digo, dados, constantes, vari√°veis ‚Äã‚Äãglobais, a pilha crescendo, a pilha crescendo.  Voc√™ pode fazer o heap crescer automaticamente, se necess√°rio, enquanto o bloco de mem√≥ria se expande em um m√∫ltiplo de 64 KB. </p><br><p>  Ponteiros n√£o s√£o usados ‚Äã‚Äã(isso √© feito por seguran√ßa); um √≠ndice √© usado.  O √≠ndice √© de 32 bits e, portanto, endere√ßa at√© 4 GB de mem√≥ria. </p><br><p>  Toda a mem√≥ria do WebAssembly √© totalmente acess√≠vel a partir do JavaScript, tanto para leitura quanto para grava√ß√£o. </p><br><p><img src="https://habrastorage.org/webt/3f/_x/2e/3f_x2ekh3ggdky_m1ip-8ezhzim.png"></p><br><p>  Vamos dar uma olhada no modelo de tempo de execu√ß√£o do WebAssembly.  Wasm √© sempre carregado e chamado SOMENTE do JavaScript.  Al√©m disso, JS e Wasm trabalham na mesma caixa de prote√ß√£o e s√£o executados pelo mesmo mecanismo. </p><br><p>  Observe que voc√™ tamb√©m pode chamar JS do Wasm.  Pode ser uma chamada de fun√ß√£o com passagem de argumentos e retorno de um valor, ou pode estar apenas executando uma sequ√™ncia arbitr√°ria como c√≥digo JS. </p><br><h2 id="probuem-webassembly">  Tentando WebAssembly </h2><br><p>  Para come√ßar o WebAssembly, recomendo usar o site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WasmFiddle</a> ou o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WebAssembly Studio</a> - essa √© uma maneira simples e visual de entender por si mesmo o que realmente √© o Wasm. </p><br><p><img src="https://habrastorage.org/webt/1q/hz/8z/1qhz8z55kl1qrnkrfsjnbro4hmm.png"></p><br><p>  Aqui, o c√≥digo-fonte em C / C ++ est√° no canto superior esquerdo (neste caso, a fun√ß√£o recursiva para calcular o n√∫mero de Fibonacci), no canto superior direito √© o c√≥digo JS para carregar o Wasm, instanciar o m√≥dulo Wasm e chamar a fun√ß√£o <code>fib()</code> partir dele.  Quando pressionamos o bot√£o Build, obtemos um bloco de c√≥digo Wasm (arquivo .wasm), que sempre podemos expandir para uma representa√ß√£o textual (arquivo .wat). </p><br><p>  Essa representa√ß√£o textual com um monte de colchetes √© essencialmente uma √°rvore de sintaxe abstrata (AST).  Bem, na verdade, com um bracketing, ele se parece com a linguagem Lisp.  Em teoria, podemos editar o c√≥digo como uma representa√ß√£o de texto e, em seguida, recolh√™-lo novamente em um formato bin√°rio - isso √© uma reminisc√™ncia da programa√ß√£o em linguagem assembly.  Mas geralmente obtemos Wasm bin√°rio como resultado da compila√ß√£o de uma linguagem de alto n√≠vel. </p><br><h2 id="2017-god-production-ready">  2017: Produ√ß√£o pronta </h2><br><p>  Em novembro de 2017, o WebAssembly foi declarado "pronto para uso na produ√ß√£o".  A especifica√ß√£o para todas as partes principais do Wasm foi preparada, a implementa√ß√£o do Wasm foi lan√ßada em todos os principais navegadores.  Assim, para o WebAssembly, o MVP foi lan√ßado - Produto M√≠nimo Viavel, vers√£o 1.0, com o qual estamos lidando agora. </p><br><h2 id="podderzhka-v-brauzerah">  Suporte do navegador </h2><br><p>  No final de 2017, foram lan√ßadas as vers√µes de todos os principais navegadores com suporte para WebAssembly: </p><br><p><img src="https://habrastorage.org/webt/wf/jv/1v/wfjv1vfutkgfezhoallogkapcaq.png"></p><br><p>  A exce√ß√£o √© o IE11, n√£o h√° suporte para isso e, provavelmente, ele desapareceu.  Supunha-se que, para navegadores mais antigos, haver√° um polyfill - a capacidade de converter o Wasm em asm.js;  existem tais prot√≥tipos, mas at√© onde eu vi, esses projetos s√£o abandonados, aparentemente, a comunidade n√£o depende deles. </p><br><p>  Agora, entre todos os navegadores instalados, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">~ 88% suportam o Wasm</a> . </p><br><p><img src="https://habrastorage.org/webt/ci/w0/6_/ciw06_js_cfccf9gmcy_o8qo0cw.png"></p><br><h2 id="podderzhka-yazykov">  Suporte de idioma </h2><br><p>  Para que seu idioma favorito seja compilado no Wasm, voc√™ precisa do compilador para fornecer esse objetivo de compila√ß√£o.  Agora, muitos idiomas suportam o Wasm, e h√° mais e mais deles todos os meses.  Veja <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">appcypher / awesome-wasm-langs</a> . </p><br><ul><li>  C / C ++ - atrav√©s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Emscripten</a> , suporte muito bom. </li><li>  Rust - O suporte Wasm apareceu h√° muito tempo, o ecossistema em torno de Wasm √© constru√≠do em grande parte com base no Rust. </li><li>  Java - por meio do TeaVM, JWebAssembly, Bytecoder - em um n√≠vel experimental. </li><li>  Kotlin - existe suporte no Kotlin / Native via LLVM backend - experimental. </li><li>  Go </li><li>  C # - atrav√©s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Blazor</a> (mono) e no futuro na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plataforma Uno</a> . </li><li>  TypeScript - atrav√©s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AssemblyScript</a> . </li></ul><br><p>  N√£o faz muito tempo, havia not√≠cias de que o LLVM agora suporta o Wasm como um destino de compila√ß√£o.  Isso torna mais f√°cil para os desenvolvedores de linguagens de programa√ß√£o compilarem ainda mais linguagens no Wasm. </p><br><h2 id="scenarii-ispolzovaniya">  Casos de uso </h2><br><p>  Esta √© provavelmente uma das principais perguntas - "Como posso usar o Wasm?" </p><br><p>  O WebAssembly j√° est√° usando ativamente: </p><br><ul><li>  Jogos, mecanismos de jogos, mecanismos de f√≠sica, VR / AR - por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Godot</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Doom 3</a> </li><li>  Emuladores, m√°quinas virtuais - por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DOSBox</a> </li><li>  Editores gr√°ficos / 3D - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Figma</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AutoCAD</a> </li><li>  Clientes da Web para plataformas de negocia√ß√£o financeira - vi apresenta√ß√µes sobre dois desses clientes </li><li>  Codecs e filtros de √°udio / v√≠deo - por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ffmpeg</a> </li><li>  Bancos de dados - por exemplo, sqlite </li></ul><br><p>  Outros cen√°rios poss√≠veis: </p><br><ul><li>  Aplicativos da Web progressivos (PWA) </li><li>  Reconhecimento por uma rede neural treinada </li></ul><br><h2 id="proizvoditelnost">  Desempenho </h2><br><p>  O desempenho do wasm foi um dos principais fatores de venda, mas o que realmente acontece? </p><br><p>  Comparado ao JavaScript, verifica-se que, em m√©dia, o Wasm √© mais r√°pido, mas em cada caso espec√≠fico voc√™ precisa fazer uma compara√ß√£o JS / Wasm, porque pode ser muitas vezes melhor e v√°rias vezes pior.  Tamb√©m pode ser altamente dependente do navegador usado. </p><br><p>  De fato, o desempenho m√°ximo de JS e Wasm √© o mesmo, pois ambos acabam se transformando em c√≥digo de processador nativo.  Mas o JS √© muito mais f√°cil de perder no desempenho, e o Wasm fornece uma abordagem mais "uniforme". </p><br><p>  Como regra, o Wasm tem um bom desempenho na computa√ß√£o volum√©trica.  Onde existem muitas opera√ß√µes de mem√≥ria, o Wasm perde.  Bem, o principal problema em aplicativos reais √© a lenta interoperabilidade JS &lt;-&gt; Wasm.  Veja, por exemplo, uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">refer√™ncia</a> . </p><br><p><img src="https://habrastorage.org/webt/ii/61/oa/ii61oac4klecbtbae8ydzpymba8.png"></p><br><p>  Em julho de 2019, o artigo cient√≠fico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚ÄúN√£o √© t√£o r√°pido: analisando o desempenho do WebAssembly vs.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C√≥digo nativo "</a> .  Os autores implementaram a capacidade de executar utilit√°rios de console Linux no WebAssembly para executar benchmarks e usaram benchmarks SPEC para avaliar o desempenho do Wasm em compara√ß√£o com os mesmos testes em asm.js. e c√≥digo nativo. </p><br><p>  Os resultados s√£o os seguintes: </p><br><ul><li>  Wasm 30% mais r√°pido que JavaScript (m√©dia para esses testes) </li><li>  Wasm √© 50% mais lento que o c√≥digo nativo (em m√©dia nesses testes) </li></ul><br><p>  Os autores do artigo tamb√©m analisaram os motivos pelos quais Wasm "desacelera": </p><br><ul><li>  cerca de duas vezes mais opera√ß√µes de carregamento / salvamento de dados em compara√ß√£o com o c√≥digo nativo; </li><li>  mais ramifica√ß√µes - causadas pela necessidade de verifica√ß√µes adicionais ao acessar a mem√≥ria; </li><li>  mais falta o cache L1 passado. </li></ul><br><p>  Em geral, de fato, o desempenho n√£o √© t√£o ruim.  Al√©m disso, essa an√°lise permitir√° que os desenvolvedores de navegadores tornem o Wasm ainda mais r√°pido. </p><br><p>  No futuro, o Wem acelerar√° n√£o apenas devido a uma melhor otimiza√ß√£o nos navegadores, mas tamb√©m a novos recursos, como: opera√ß√µes de bloqueio de mem√≥ria, suporte para instru√ß√µes SIMD, suporte para threads. </p><br><h2 id="chto-budet-dalshe">  O que acontecer√° depois? </h2><br><p>  Como o WebAssembly est√° se desenvolvendo? </p><br><p>  Primeiro, a equipe de especifica√ß√£o para Wasm continua seu trabalho.  As especifica√ß√µes est√£o em diferentes est√°gios (fases), existe um certo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"roteiro" para</a> este trabalho. </p><br><p>  Em particular, em um futuro pr√≥ximo, esperamos ver ainda mais esses recursos: </p><br><ul><li>  Convers√µes de flutua√ß√£o <strong>para int sem captura</strong> - agora a convers√£o de um valor flutuante para um n√∫mero inteiro em algumas condi√ß√µes pode causar uma exce√ß√£o;  Para um programador, isso √© inesperado; portanto, todas essas convers√µes precisam ser conclu√≠das, perdendo o desempenho.  Esse recurso resolve o problema. </li><li>  <strong>M√∫ltiplos valores</strong> - a capacidade de retornar mais de um valor de uma fun√ß√£o, a capacidade de criar novas instru√ß√µes que retornam mais de um valor - por exemplo, o resultado da divis√£o e o restante da divis√£o, ou o resultado da adi√ß√£o e do bit de transporte. </li><li>  <strong>Tipos de refer√™ncia</strong> √© uma introdu√ß√£o ao tipo anyref, que significa "link para algo no heap JS", o primeiro passo para acelerar a intera√ß√£o com o JS. </li></ul><br><p>  Em segundo lugar, os desenvolvedores de navegadores, por sua vez, implementam essas especifica√ß√µes, ou seja,  gradualmente, novos recursos s√£o adicionados ao Wasm, primeiro ocultos "sob a bandeira" nas configura√ß√µes e depois ativados por padr√£o. </p><br><p>  Por exemplo, aqui est√° uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lista de recursos do Chrome relacionados ao WebAssembly</a> . <br>  Para o Firefox, uma lista semelhante pode ser encontrada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><h2 id="webassembly-vne-brauzera">  WebAssembly fora do navegador </h2><br><p>  Como mencionado acima, o Wasm n√£o est√° essencialmente conectado √† Web, √© apenas uma m√°quina virtual.  Isso significa que tamb√©m pode ser usado fora da web. </p><br><p>  Agora, existem v√°rios cen√°rios para o uso do Wasm fora do navegador: </p><br><ul><li>  Node.js - O Node.js √© baseado no mecanismo V8 que suporta Wasm. </li><li>  Um aplicativo de console separado, o c√≥digo do aplicativo √© executado no Wasm VM - exemplos desse tempo de execu√ß√£o: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wasmtime</a> , wasmer. </li><li>  O Wasm VM √© usado como uma biblioteca de outros idiomas - por exemplo, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wasmer</a> permite que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">voc√™</a> se chame de uma d√∫zia de idiomas diferentes. </li></ul><br><p>  Para o Wasm trabalhando fora do navegador, as restri√ß√µes do sandbox n√£o s√£o mais necess√°rias; pelo contr√°rio, o acesso √†s fun√ß√µes do sistema √© necess√°rio - o sistema de arquivos e os arquivos, E / S do console etc.  Isso levou √† cria√ß√£o da WebAssembly System Interface (WASI), uma especifica√ß√£o de API de plataforma cruzada semelhante ao POSIX.  Consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WebAssembly / WASI</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wasi.dev</a> . </p><br><p><img src="https://habrastorage.org/webt/rw/w9/qz/rww9qzljwdtjnkvolzwjckiik4c.png"></p><br><p>  O pr√≥ximo passo foi criar um gerenciador de pacotes - <strong>Wasm Package Manager</strong> (WAPM) - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wapm.io.</a>  Aqui voc√™ pode pegar o arquivo .wasm finalizado e us√°-lo em seu aplicativo.  Normalmente, estamos falando de vers√µes Wasm de algumas bibliotecas conhecidas.  Alguns pacotes s√£o marcados com a tag WASI, o que significa que eles s√≥ podem ser usados ‚Äã‚Äãem cen√°rios fora do navegador. </p><br><h2 id="zaklyuchenie">  Conclus√£o </h2><br><p>  Portanto, o WebAssembly √© bem poss√≠vel de usar, j√° est√° "pronto para produ√ß√£o" h√° dois anos. <br>  O uso do Wasm pode muito bem acelerar o c√≥digo JavaScript semelhante, mas voc√™ deve sempre verificar se recebe um aumento de velocidade. <br>  O suporte Wasm das linguagens de programa√ß√£o est√° em constante evolu√ß√£o. </p><br><p>  Bem, e mais importante, o WebAssembly ‚Äúmudou o cen√°rio‚Äù da Web - nos forneceu novos cen√°rios de uso que podemos implementar em nossos aplicativos. </p><br><h2 id="ssylki">  Refer√™ncias </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">webassembly.org</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github.com/webassembly</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">developer.mozilla.org/en-US/docs/WebAssembly</a> </li></ul><br><p>  Listagens impressionantes: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mbasso / awesome-wasm</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">appcypher / awesome-wasm-langs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">appcypher / awesome-wasm-runtimes</a> </li></ul><br><p>  V√≠deo: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WebAssembly para desenvolvedores da Web (Google I / O '19)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que √© o WebAssembly?</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Por alguns de seus criadores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Evoluindo Wasm em um nome impr√≥prio apropriado: Andreas Rossberg</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C ++ R√∫ssia 2018: Pavel Bulatov, transi√ß√£o para o WebAssembly: o jogo vale a pena?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Andrey Nagikh - Desenvolvimento para WebAssembly: rake real e exemplos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sergey Rubanov - Entenda o WebAssembly</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WebAssembly no navegador e al√©m por Dan Callahan |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mozilla Developer Roadshow EU 2019</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475778/">https://habr.com/ru/post/pt475778/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475764/index.html">Cadeias de Markov para gera√ß√£o processual de edif√≠cios</a></li>
<li><a href="../pt475768/index.html">Kotlin: Como √© uma √≥tima op√ß√£o para o desenvolvimento de aplicativos Android?</a></li>
<li><a href="../pt475770/index.html">Universidade de Stanford - visita e revis√£o</a></li>
<li><a href="../pt475774/index.html">‚ÄúEssas s√£o regras tolas que incomodam a todos‚Äù: discuss√£o das pr√°ticas de campo de senha</a></li>
<li><a href="../pt475776/index.html">Fa√ßa voc√™ mesmo para tr√™s guitarras</a></li>
<li><a href="../pt475780/index.html">Decodificador cir√≠lico de impress√£o entre aspas</a></li>
<li><a href="../pt475782/index.html">Testes tautol√≥gicos, bons e ruins</a></li>
<li><a href="../pt475784/index.html">Medindo a qualidade do c√≥digo do aplicativo Android com Sonarqube e Jacoco em 2019</a></li>
<li><a href="../pt475788/index.html">"Aparentemente, h√° uma grande batalha pela frente." O que espera o setor de TI em um futuro pr√≥ximo</a></li>
<li><a href="../pt475790/index.html">Startups que podem surpreender</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>