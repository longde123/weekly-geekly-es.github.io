<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòÉ üßôüèΩ ü•ß Die h√§ufigsten Fehler in Ihrem React-Code, die Sie (m√∂glicherweise) machen ‚ú°Ô∏è üë®üèæ‚Äçüîß üé©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inspiriert von den gelesenen Artikeln auf dem Medium, habe ich beschlossen, meinen Artikel zu schreiben und Ihnen zu erkl√§ren, wie Sie die h√§ufigsten ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die h√§ufigsten Fehler in Ihrem React-Code, die Sie (m√∂glicherweise) machen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416511/"><p><img src="https://habrastorage.org/webt/oj/se/qd/ojseqdaqgpr-i6ksye6ydimplp8.jpeg"></p><br><p>  Inspiriert von den gelesenen Artikeln auf dem Medium, habe ich beschlossen, meinen Artikel zu schreiben und Ihnen zu erkl√§ren, wie Sie die h√§ufigsten Fehler in Ihrer React-Anwendung vermeiden und warum Sie dies tun m√ºssen. </p><br><p>  Der gesamte Code ist im ES6-Stil geschrieben. Um ihn zu wiederholen, m√ºssen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Babel</a> in Ihrem Projekt verwenden (und es gibt andere, die ihn nicht verwenden?). </p><br><p>  Ich habe versucht, jeden Fehler so detailliert wie m√∂glich zu erkl√§ren. Daher konzentriert sich mein Artikel mehr auf junge Entwickler, die immer noch auf der Suche nach neuem Wissen sind.  Obwohl es mir so scheint, kann ein erfahrener Entwickler in diesem Artikel einige interessante Dinge f√ºr sich finden. </p><br><p>  Wenn Sie interessiert sind, dann willkommen bei cat. </p><a name="habracut"></a><br><p>  In Klammern vor jedem Absatz habe ich einen Link zur Eslint-Regel hinterlassen.  Sie k√∂nnen sie sp√§ter <a href="" rel="nofollow">in git finden</a> und Ihrem Projekt hinzuf√ºgen. </p><br><br><h3 id="reactforbid-component-props">  (reagieren / verbieten-Komponenten-Requisiten) </h3><br><p>  Der erste h√§ufige Fehler besteht darin, "style" und "className" als Requisiten an Ihre Komponente zu √ºbergeben.  Vermeiden Sie dies, da Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Ihren Komponenten viel Komplexit√§t hinzuf√ºgen.</a> </p><br><p>  Stattdessen k√∂nnen Sie die Bibliothek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">'Klassennamen'</a> verwenden und Ihrer Komponente interessante Variationen hinzuf√ºgen (wenn Sie CSS-Klassen verwenden): </p><br><pre><code class="plaintext hljs">const { hasError, hasBorder } = this.props; const componentClasses = classnames({ 'your-component-main-class': true, 'your-component-main-class_with-error': hasError, 'your-component-main-class_with-border': hasBorder, });</code> </pre> <br><br><h3 id="reactforbid-prop-types">  (reagieren / verbieten-Prop-Typen) </h3><br><p>  Der n√§chste Fehler sind keine informativen PropTypes.  Verwenden Sie nicht PropTypes.any, PropTypes.array und PropTypes.object.  Beschreibe deine Requisiten so detailliert wie m√∂glich.  Auf diese Weise k√∂nnen Sie eine gute Dokumentation f√ºr die Zukunft hinterlassen, und Sie (oder ein anderer Entwickler) werden es Ihnen oft danken. </p><br><pre> <code class="plaintext hljs">class MyComponent extends React.Component { static propTypes = { user: PropTypes.shape({ id: PropTypes.number, name: PropTypes.string, }), policies: PropTypes.arrayOf(PropTypes.shape({ id: PropTypes.number, type: PropTypes.string, value: PropTypes.string, }), } }</code> </pre> <br><br><h3 id="reactforbid-foreign-prop-types">  (reagieren / verbieten-fremde-Requisiten-Typen) </h3><br><p>  Fahren wir mit propTypes fort.  Verwenden Sie keine PropTypes einer anderen Komponente: </p><br><pre> <code class="plaintext hljs">import SomeComponent from './SomeComponent'; SomeComponent.propTypes;</code> </pre> <br><p>  Erstellen Sie eine Datei, in der Sie Ihre globalen PropTypes in der richtigen Reihenfolge aufbewahren: </p><br><pre> <code class="plaintext hljs">import { userShape, policiesArray } from '../common/global_prop_types';</code> </pre> <br><p>  Dies hilft <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">babel-plugin-transform-react-remove-prop-types</a> , propTypes aus dem Produktionscode zu entfernen und Ihre Anwendung ein wenig zu vereinfachen. </p><br><br><h3 id="reactno-access-state-in-setstate">  (reagieren / kein Zugriffsstatus im eingestellten Zustand) </h3><br><p>  Der folgende Fehler ist sehr interessant: </p><br><pre> <code class="plaintext hljs">class MyComponent extends React.Component { state = { counter: 1, }; incrementCounter = () =&gt; this.setState({ counter: this.state.counter + 1 }); massIncrement = () =&gt; { // this code will lead to not what you expect this.incrementCounter(); this.incrementCounter(); } }</code> </pre> <br><p>  Da setState eine asynchrone Statusfunktion ist, ist die Statusfunktion in beiden F√§llen gleich. <br>  this.state.counter wird 1 sein und wir werden bekommen: </p><br><pre> <code class="plaintext hljs">incrementCounter = () =&gt; this.setState({ counter: 1 + 1 }); incrementCounter = () =&gt; this.setState({ counter: 1 + 1 });</code> </pre> <br><p>  Um dies zu vermeiden, k√∂nnen Sie den setState-R√ºckruf verwenden, der den Status state als Argument empf√§ngt: </p><br><pre> <code class="plaintext hljs">incrementCounter = () =&gt; this.setState((prevState) =&gt; ({ counter: prevState.counter + 1 }));</code> </pre> <br><br><h3 id="reactno-array-index-key">  (Reagieren / No-Array-Index-Schl√ºssel) </h3><br><p>  Dieser Fehler ist auch sehr h√§ufig. Lesen Sie ihn daher sorgf√§ltig durch und vermeiden Sie ihn in Zukunft: </p><br><pre> <code class="plaintext hljs">users.map((user, index) =&gt; ( &lt;UserComponent {...user} key={index} /&gt; ));</code> </pre> <br><p>  React verwendet den Prop-Schl√ºssel als Verkn√ºpfung zum DOM-Element, wodurch die erforderliche Komponente schnell gefunden und gerendert werden kann (alles ist nat√ºrlich komplizierter, aber ich habe es absichtlich vereinfacht). <br>  Was passiert, wenn Sie in der Mitte des Arrays einen neuen Benutzer hinzuf√ºgen?  React wird gezwungen sein, alle UserComponents nach dem Hinzuf√ºgen einer neuen neu zu rendern, da der Index f√ºr eine gro√üe Anzahl von Komponenten ge√§ndert wird.  Verwenden Sie stattdessen eindeutige Schl√ºssel.  Ein sehr einfacher Ausweg ist die ID, die Sie aus Ihrer Datenbank erhalten: </p><br><pre> <code class="plaintext hljs">users.map((user) =&gt; ( &lt;UserComponent {...user} key={user.id} /&gt; ));</code> </pre> <br><br><h3 id="reactno-did-mount-set-state-reactno-did-update-set-state">  (reagieren / no-did-mount-set-state), (reagieren / no-did-update-set-state) </h3><br><p>  Dieser Fehler ist auch in meiner Praxis sehr h√§ufig.  Wenn Sie versuchen, den Status in der componentDidUpdate-Methode zu aktualisieren, erhalten Sie eine Endlosschleife f√ºr das erneute Rendern.  React startet eine √úberpr√ºfung auf erneutes Rendern, wenn die Komponente den Status oder die Requisiten √§ndert.  Wenn Sie den Status √§ndern, nachdem die Komponente im DOM bereitgestellt oder bereits aktualisiert wurde, f√ºhren Sie die Pr√ºfung immer wieder und immer wieder aus ... <br>  Wenn Sie den Status in componentDidMount aktualisieren, k√∂nnen Sie das erneute Rendern der Komponente noch einmal aufrufen, da die Funktion nach dem Mounten der Komponente im DOM einmal aufgerufen wird. <br>  Wenn Sie die Daten nach dem Mounten der Komponente aktualisieren m√ºssen, empfehle ich die Verwendung von Klassenvariablen: </p><br><pre> <code class="plaintext hljs">class MyComponent extends React.Component { componentDidMount() { this.veryImportantDataThatCanBeStoredOnlyAfterMount = 'I'll be back!'; } veryImportantDataThatCanBeStoredOnlyAfterMount = void 0; render() { return &lt;div /&gt; } }</code> </pre> <br><br><h3 id="reactno-direct-mutation-state">  (reagieren / kein direkter Mutationszustand) </h3><br><p>  Die Staatsmutation ist ein sehr gro√üer Fehler.  Eine unkontrollierte Zustandsmutation f√ºhrt zu nicht nachweisbaren Fehlern und infolgedessen zu gro√üen Problemen.  Meine pers√∂nliche Meinung ist , zu verwenden , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">die unver√§nderlichen-js</a> , als eine Bibliothek, die immutabelnye Struktur hinzuf√ºgt.  Und Sie k√∂nnen sie mit Redux / MobX / Any State Management Library verwenden.  Sie k√∂nnen auch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">deepClone von lodash verwenden</a> , um den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Status</a> zu klonen und dann den Klon zu mutieren, oder die neue JS-Funktion verwenden - Destrukturierung: </p><br><pre> <code class="plaintext hljs">updateStateWrong = () =&gt; this.state.imRambo = true; updateStateRight = () =&gt; { const clonedState = cloneDeep(this.state); clonedState.imAGoodMan = true; this.setState(clonedState); } updateWithImmutabelJS = () =&gt; { const newState = this.state.data.set('iUseImmutableStructure', true); this.setState(data: newState); } updateWithDestructuring = () =&gt; this.setState({ ...this.state, iUseDestructuring: true });</code> </pre> <br><br><h3 id="reactprefer-stateless-function">  (reagieren / bevorzugen-staatenlose-Funktion) </h3><br><p>  Diese Regel beschreibt mehr Verbesserungen Ihres Codes und Ihrer Anwendung als einen Fehler. Ich empfehle jedoch weiterhin, diese Regel zu befolgen.  Wenn Ihre Komponente den Status nicht verwendet, machen Sie sie zu einer zustandslosen Komponente (ich bevorzuge den Begriff "reine Komponente"): </p><br><pre> <code class="plaintext hljs">class MyComponentWithoutState extends React.Component { render() { return &lt;div&gt;I like to write a lot of unneeded code&lt;/div&gt; } } const MyPureComponent = (props) =&gt; &lt;div&gt;Less code === less support&lt;/div&gt;</code> </pre> <br><br><h3 id="reactprop-types">  (reagieren / Requisitentypen) </h3><br><p>  Bitte f√ºgen Sie immer eine Requisitentyppr√ºfung (propTypes) hinzu, wenn Ihre Komponente Requisiten erh√§lt.  Stellen Sie sich vor, Sie dokumentieren Ihren Code.  Mehr als einmal wirst du dir daf√ºr 'Danke' sagen (und vielleicht zu mir :)).  PropTypes hilft Ihnen zu verstehen und zu verstehen, was Ihre Komponente rendern kann und was sie zum Rendern ben√∂tigt. </p><br><pre> <code class="plaintext hljs">MyPureComponent.propTypes = { id: PropTypes.number.isRequired, // And I know that without id component will not render at all, and this is good. }</code> </pre> <br><br><h3 id="reactjsx-no-bind">  (reagieren / jsx-no-bind) </h3><br><p>  Ein sehr h√§ufiger und gro√üer Fehler, den ich oft im Code gesehen habe.  Verwenden Sie in Jsx keine Bind- und Pfeilfunktion.  Niemals.  Mehr. <br>  Der hei√üeste Ort in der H√∂lle erwartet denjenigen, der .bind (this) in JSX im Event-Handler schreibt. <br>  Jedes Mal, wenn eine Komponente gerendert wird, wird Ihre Funktion neu erstellt, was Ihre Anwendung erheblich verlangsamen kann (dies liegt an der Tatsache, dass der Garbage Collector viel h√§ufiger ausgef√ºhrt werden muss).  Anstelle von .bind (this) k√∂nnen Sie die Pfeilfunktionen auf eine bestimmte Weise verwenden: </p><br><pre> <code class="plaintext hljs">class RightWayToCallFunctionsInRender extends React.Component { handleDivClick = (event) =&gt; event; render() { return &lt;div onClick={this.handleDivClick} /&gt; } } const handleDivClick = (event) =&gt; event; const AndInPureComponent = () =&gt; { return &lt;div onClick={handleDivClick} /&gt; }</code> </pre> <br><br><h3 id="reactjsx-no-target-blank">  (reagieren / jsx-no-target-blank) </h3><br><p>  Sicherheitsl√ºcke.  Es scheint mir sehr seltsam, dass die Leute diesen Fehler immer noch machen.  Viele Leute haben 2017 viele Artikel zu diesem Thema geschrieben. <br>  Wenn Sie einen Link mit dem Attribut target = '_ blank' erstellen, m√ºssen Sie rel = 'noreferrer noopener' hinzuf√ºgen.  Sehr einfach: </p><br><pre> <code class="plaintext hljs">&lt;a href="https://example.com" target="_blank" rel="noreferrer noopener" /&gt;</code> </pre> <br><h2 id="spasibo-vam">  Danke Ihnen! </h2><br><p>  Das ist alles, was ich Ihnen im Rahmen dieses Artikels sagen m√∂chte.  Ich bin Ihnen sehr dankbar, wenn Sie, meine Leser, mir Ihr Feedback oder Ihren Kommentar hinterlassen und Ihre Meinung zu den in diesem Artikel beschriebenen Problemen mitteilen.  Sie k√∂nnen mir auch √ºber meine und Ihre Fehler im Code und √ºber alles erz√§hlen, was Sie f√ºr notwendig halten, um es zu erz√§hlen.  Nochmals vielen Dank! <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de416511/">https://habr.com/ru/post/de416511/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de416495/index.html">SamsPcbGuide Teil 6: Verfolgen von Signalleitungen. Verlust- und √úbersprechmodelle</a></li>
<li><a href="../de416497/index.html">Ein Beispiel f√ºr die Berechnung der Signalreaktion mithilfe der Fourier-Transformation in MATLAB</a></li>
<li><a href="../de416501/index.html">Schreiben Sie mir einen GraphQL-Server in C #</a></li>
<li><a href="../de416505/index.html">Wir schreiben eine virtuelle Stapelmaschine auf Rust'e</a></li>
<li><a href="../de416507/index.html">So √ºberpr√ºfen Sie die Zuverl√§ssigkeit des Rechenzentrums: 3 Hauptpunkte, auf die Sie achten m√ºssen</a></li>
<li><a href="../de416513/index.html">Die Zusammenfassung interessanter Materialien f√ºr den mobilen Entwickler # 260 (2. Juli - 8. Juli)</a></li>
<li><a href="../de416515/index.html">Bewertungsartikel zum Hinzuf√ºgen zu Favoriten</a></li>
<li><a href="../de416517/index.html">Hackathon-Ph√§nomen: Motive, Methoden und Ergebnisse der Teilnehmer. Zusammenfassung der Feldstudie</a></li>
<li><a href="../de416519/index.html">Ist wirklich alles GLONASS ausgebrannt?</a></li>
<li><a href="../de416521/index.html">Der einfachste Weg, ein Spiel zu erstellen (aber das ist nicht korrekt)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>