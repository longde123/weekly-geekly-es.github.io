<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>↔️ 👩🏿‍🔬 😌 Gestion des erreurs dans Vue 🕵🏾 🗯️ ⚪️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Toute l'année dernière, j'ai travaillé avec mon framework préféré, Vue.js, pour le décrire et le représenter. Et j'ai réalisé que je n'avais pas encor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gestion des erreurs dans Vue</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/460539/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/uc/ur/ja/ucurjalrgazboinj11chmjhp1h4.jpeg"></div><br>  Toute l'année dernière, j'ai travaillé avec mon framework préféré, Vue.js, pour le décrire et le représenter.  Et j'ai réalisé que je n'avais pas encore compris la gestion des erreurs dans Vue.  Je voudrais expliquer cela en disant que j'écris du code parfait, mais nous savons tous comment les choses sont vraiment.  Au cours des derniers jours, j'ai expérimenté les différentes méthodes de gestion des erreurs fournies par Vue et j'ai décidé de partager mes découvertes.  Évidemment, cette revue ne couvrira pas tous les scénarios possibles, mais j'espère qu'elle vous aidera! <a name="habracut"></a><br><br><h2>  Erreurs </h2><br>  Pour tester différentes méthodes de traitement, j'ai décidé de prendre trois types d'erreurs différents (au moins pour commencer).  Dans le premier cas, c'était juste un appel à une variable inexistante: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-cloak</span></span></span><span class="hljs-tag">&gt;</span></span> Hello, {{name}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Dans cet exemple, l'utilisateur ne reçoit pas de message d'erreur, mais un avertissement [Vue warn] s'affiche dans la console. <br><br><img src="https://habrastorage.org/webt/0h/er/r7/0herr79zvq2adraeve6kuavuavm.png"><br><br>  Voici à quoi ressemble l'exécution de cet exemple: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/cfjedimaster/embed/preview/qweOKB" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Dans le deuxième exemple, j'ai essayé de lier une variable à une propriété calculée qui devrait générer une erreur: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-cloak</span></span></span><span class="hljs-tag">&gt;</span></span> Hello, {{name2}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-attr"><span class="hljs-attr">el</span></span>:<span class="hljs-string"><span class="hljs-string">'#app'</span></span>, <span class="hljs-attr"><span class="hljs-attr">computed</span></span>:{ name2() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x; } } })</code> </pre><br>  Dans ce cas, l'avertissement [Vue warn] et le message d'erreur habituel sont affichés dans la console, mais rien n'est émis à l'utilisateur. <br><br><img src="https://habrastorage.org/webt/x5/vf/vx/x5vfvxxzegbkolkkcttdgp5me8k.png"><br><br>  Voici comment s'exécute le code de cet exemple: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/cfjedimaster/embed/preview/BEXoOw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Dans le troisième exemple, j'ai utilisé une méthode qui devrait générer une erreur. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-cloak</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"doIt"</span></span></span><span class="hljs-tag">&gt;</span></span>Do It<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-attr"><span class="hljs-attr">el</span></span>:<span class="hljs-string"><span class="hljs-string">'#app'</span></span>, <span class="hljs-attr"><span class="hljs-attr">methods</span></span>:{ doIt() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x; } } })</code> </pre><br>  Comme dans le cas précédent, un message sur cette erreur dans la console sera affiché deux fois: un avertissement et un message sur cette erreur.  Mais, contrairement à lui, une erreur ne se produit que lorsque le bouton est réellement enfoncé. <br><br><img src="https://habrastorage.org/webt/qc/d5/dm/qcd5dmvfjaq_qs4zpxt375rjil8.png"><br><br>  Et voici une démo pour cet exemple: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/cfjedimaster/embed/preview/oOKjJb" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Avant de continuer, je tiens à préciser que ces exemples ne montrent pas tous les types d'erreurs que vous pouvez faire.  Ce ne sont que quelques-uns des principaux, qui, à mon avis, peuvent souvent être trouvés dans des applications basées sur Vue.js. <br><br>  Alors, comment pouvez-vous gérer les erreurs dans les applications Vue?  Je dois dire que j'ai été un peu surpris que dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">guide</a> principal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">du framework Vue</a> il n'y ait pas de section sur la gestion des erreurs. <br><br><img src="https://habrastorage.org/webt/p9/uu/lu/p9uuluauw5egp5h5y9p3ss1t8ws.png"><br><br>  Oui, il y a une section similaire dans le manuel, mais elle est très courte, et toute sa signification correspond à la citation suivante: <br><br>  <i>«Si une erreur d'exécution se produit pendant le rendu du composant, elle sera transmise à la fonction de configuration globale Vue.config.errorHandler, si une a été spécifiée.</i>  <i>Il serait probablement utile d'utiliser ce crochet en conjonction avec un service de suivi des bogues tel que Sentry, d'autant plus que son intégration avec Vue est officiellement prise en charge. »</i> <br><br>  À mon avis, ce sujet devrait être couvert un peu plus dans la documentation (et je pense que cela pourrait aider à le compléter).  En général, la gestion des erreurs dans Vue se résume aux moyens suivants: <br><br><ul><li>  <b>errorHandler;</b> </li><li>  <b>warnHandler;</b> </li><li>  <b>renderError;</b> </li><li>  <b>errorCaptured;</b> </li><li>  <b>window.onerror</b> (cet outil n'est pas spécifique à Vue). </li></ul><br>  Examinons de plus près ces astuces. <br><br><h2>  Gestionnaire d'erreurs numéro un: errorHandler </h2><br>  Le premier remède est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">errorHandler</a> .  Comme vous l'avez probablement deviné, il s'agit du gestionnaire d'erreurs standard pour les applications Vue.js.  Vous pouvez l'affecter comme suit: <br><br><pre> <code class="javascript hljs">Vue.config.errorHandler = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, vm, info</span></span></span><span class="hljs-function">) </span></span>{ }</code> </pre><br>  Dans la déclaration de fonction ci-dessus, err est la description de l'erreur actuelle, info est la chaîne d'informations d'erreur spécifique à Vue et vm est l'application Vue actuelle.  N'oubliez pas que plusieurs applications Vue peuvent s'exécuter sur la même page Web en même temps.  Ce gestionnaire d'erreurs s'appliquera à tous.  Prenons l'exemple simple suivant: <br><br><pre> <code class="javascript hljs">Vue.config.errorHandler = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, vm, info</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Error: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${err.toString()}</span></span></span><span class="hljs-string">\nInfo: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${info}</span></span></span><span class="hljs-string">`</span></span>); }</code> </pre><br>  Dans le cas de la première erreur, ce code n'effectue aucune action.  Si vous vous en souvenez, cela génère un <i>avertissement</i> , pas un message d'erreur. <br><br>  Dans le second cas, l'erreur est traitée et le texte suivant s'affiche: <br><br><pre> <code class="bash hljs">Error: ReferenceError: x is not defined Info: render</code> </pre> <br>  Enfin, le troisième exemple donne le résultat suivant: <br><br><pre> <code class="bash hljs">Error: ReferenceError: x is not defined Info: v-on handler</code> </pre> <br>  Remarquez à quel point les informations sont «utiles» sous le titre Info dans les deux exemples précédents.  Voyons maintenant comment l'outil suivant fonctionne. <br><br><h2>  Gestionnaire d'erreurs numéro deux: warnHandler </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">warnHandler</a> gère - qu'en pensez-vous?  - Avertissements de vue.  Notez qu'en production, ce gestionnaire est ignoré.  Le gestionnaire de cette méthode est également légèrement différent du précédent: <br><br><pre> <code class="javascript hljs">Vue.config.warnHandler = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">msg, vm, trace</span></span></span><span class="hljs-function">) </span></span>{ }</code> </pre> <br>  Les deux premiers arguments - msg et vm - ne nécessitent aucune explication supplémentaire et l'argument trace doit être une arborescence de composants.  Prenons un exemple: <br><br><pre> <code class="javascript hljs">Vue.config.warnHandler = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">msg, vm, trace</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Warn: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${msg}</span></span></span><span class="hljs-string">\nTrace: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${trace}</span></span></span><span class="hljs-string">`</span></span>); }</code> </pre> <br>  Le premier exemple a maintenant un gestionnaire pour l'avertissement qu'il génère, et il renvoie ce qui suit: <br><br><img src="https://habrastorage.org/webt/n-/vs/b5/n-vsb5ddofte7axiscbaduwoymw.png"><br><br>  Les deuxième et troisième exemples ne sont pas modifiés.  Des exemples en direct pour les trois cas sont présentés ci-dessous. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/cfjedimaster/embed/preview/oOKxEa" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/cfjedimaster/embed/preview/PgMNao" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/cfjedimaster/embed/preview/wZVGEK" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Gestionnaire d'erreur numéro trois: renderError </h2><br>  Je vais maintenant montrer une troisième méthode de gestion des erreurs: renderError.  Contrairement aux deux précédents, cet outil dépend du composant et n'est pas universel.  Comme avec warnHandler, ce gestionnaire de production est désactivé. <br><br>  Pour l'utiliser, insérez-le dans votre composant / application.  Voici un exemple modifié de la documentation. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-attr"><span class="hljs-attr">el</span></span>:<span class="hljs-string"><span class="hljs-string">'#app'</span></span>, renderError (h, err) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(<span class="hljs-string"><span class="hljs-string">'pre'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">style</span></span>: { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'red'</span></span> }}, err.stack) } })</code> </pre><br>  Si ce gestionnaire d'erreurs est utilisé dans le premier exemple, il ne fait rien, ce qui, si vous y réfléchissez, <i>semble être</i> logique, car le premier exemple donne un avertissement, pas une erreur.  Si vous cochez ce gestionnaire dans le deuxième exemple, où la propriété calculée donne une erreur, vous verrez que son résultat est affiché à l'écran.  Vous pouvez le voir dans la démonstration de codePen ci-dessous. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/cfjedimaster/embed/preview/NmQrwa" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Honnêtement, je ne comprends pas très bien pourquoi utiliser cet outil lorsque la console est beaucoup plus pratique, mais si le service de contrôle de la qualité ou d'autres testeurs ne connaissent pas la console du navigateur, un message d'erreur plus simple à l'écran peut les aider. <br><br><h2>  Gestionnaire d'erreur numéro quatre: errorCaptured </h2><br>  Enfin, il y a l'outil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">errorCaptured</a> (spécifique à Vue) qui m'a dérouté et, franchement, est toujours un peu déroutant.  La documentation indique ce qui suit: <br><br>  <i>«Appelé si une erreur est commise dans un composant enfant.</i>  <i>Ce hook reçoit trois arguments: une erreur, une instance du composant qui a provoqué l'erreur et une chaîne contenant des informations sur l'endroit où l'erreur a été enregistrée.</i>  <i>Le crochet peut renvoyer false pour empêcher la propagation de l'erreur. "</i> <br><br>  Selon mes recherches (encore une fois, j'en doute fortement), ce gestionnaire d'erreur ne devrait être utilisé que par le composant parent qui gère l'erreur du composant enfant.  Pour autant que je sache, il ne peut pas être utilisé dans l'instance principale de Vue, mais ne peut être utilisé que dans un composant qui a des enfants. <br><br>  Pour vérifier cela, j'ai créé cet ensemble de composants parents et enfants: <br><br><pre> <code class="javascript hljs">Vue.component(<span class="hljs-string"><span class="hljs-string">'cat'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">template</span></span>:<span class="hljs-string"><span class="hljs-string">` &lt;div&gt;&lt;h1&gt;Cat: &lt;/h1&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/div&gt;`</span></span>, <span class="hljs-attr"><span class="hljs-attr">props</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">name</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">required</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">type</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">String</span></span> } }, errorCaptured(err,vm,info) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`cat EC: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${err.toString()}</span></span></span><span class="hljs-string">\ninfo: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${info}</span></span></span><span class="hljs-string">`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }); Vue.component(<span class="hljs-string"><span class="hljs-string">'kitten'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">template</span></span>:<span class="hljs-string"><span class="hljs-string">'&lt;div&gt;&lt;h1&gt;Kitten: {{ dontexist() }}&lt;/h1&gt;&lt;/div&gt;'</span></span>, <span class="hljs-attr"><span class="hljs-attr">props</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">name</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">required</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">type</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">String</span></span> } } });</code> </pre> <br>  Notez que le composant chaton contient une erreur.  Maintenant, si j'essaie d'utiliser ce composant comme suit, <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-cloak</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">cat</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"my cat"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kitten</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kitten</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">cat</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Je vais recevoir un message du gestionnaire: <br><br><pre> <code class="bash hljs">cat EC: TypeError: dontexist is not a <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> info: render</code> </pre> <br>  Vous pouvez le voir dans l'exemple ci-dessous. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/cfjedimaster/embed/preview/MRMbYJ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Alors oui, un outil intéressant.  Je crois qu'il sera principalement utilisé par ceux qui créent des bibliothèques de composants avec des relations parent / enfant.  Cet outil est plus adapté au développeur de bibliothèque qu'au développeur ordinaire, si une telle division est logique.  Mais encore une fois, ce n'est que ma première impression de cet outil. <br><br><h2>  Un seul outil pour tout gérer dans le monde: window.onerror </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hf/2z/hv/hf2zhv1yy2sxrrj-qcq68cci9qa.png"></div><br>  La dernière option (et la plus puissante) consiste à utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">window.onerror</a> , un gestionnaire d'erreur global pour <i>tout ce</i> qui peut se produire lorsque votre code JavaScript est exécuté.  Ce gestionnaire a le format suivant: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.onerror = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message, source, line, column, error</span></span></span><span class="hljs-function">) </span></span>{ }</code> </pre><br>  La seule chose que vous ne pouvez pas deviner dans le code ci-dessus est probablement la signification de l'argument source, qui est l'URL du script. <br><br>  C'est là que le plaisir commence.  Si vous définissez cette fonction, mais <i>n'utilisez pas</i> Vue.config.errorHandler, cela ne vous aidera pas.  Vue s'attend à ce que vous définissiez Vue.config.errorHandler, et si vous ne le faites pas, il ne propagera pas l'erreur au-delà de ses limites.  Probablement, cela a un certain sens ... Je ne sais même pas, pour moi, cela n'a pas beaucoup de sens.  Une chose encore plus étrange: disons qu'il y a une erreur dans votre gestionnaire d'erreurs Vue lui-même.  Il n'atteint pas non plus le gestionnaire window.onerror. <br><br>  Voici une démo sur CodePen avec un exemple correspondant.  J'ai commenté l'erreur dans errorHandler, mais si vous supprimez le commentaire, vous verrez que le gestionnaire d'erreur global ne fonctionnera pas.  Cela ne fonctionnera que dans un cas: si vous appuyez sur le deuxième bouton. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/cfjedimaster/embed/preview/WWVowN" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Conclusion </h2><br>  J'espère que le contenu de cet article sera utile aux lecteurs.  Comme déjà écrit au tout début, je viens de commencer à traiter ce sujet, donc, bien sûr, j'attends des commentaires, des commentaires et des suggestions.  Je suis heureux de lire comment d’autres développeurs utilisent ces outils dans leurs applications! <br><br>  <i>Photo au début de l'article: auteur - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">David Kovalenko</a> , site Unsplash</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr460539/">https://habr.com/ru/post/fr460539/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr460527/index.html">Résolution de problèmes avec pwnable.kr 06 - aléatoire et 09 - erreur</a></li>
<li><a href="../fr460531/index.html">Curieuses perversions du monde informatique - 5</a></li>
<li><a href="../fr460533/index.html">Vous avez eu l'idée d'un produit informatique, quelle est la prochaine</a></li>
<li><a href="../fr460535/index.html">Création d'un conteneur Docker minimal pour les applications Go</a></li>
<li><a href="../fr460537/index.html">ZuriHac: pratiquer la programmation fonctionnelle</a></li>
<li><a href="../fr460541/index.html">Recherche des contours du visage en une milliseconde à l'aide d'un ensemble d'arbres de régression</a></li>
<li><a href="../fr460543/index.html">Nouvelles certifications pour les développeurs de Cisco. Aperçu de la certification de l'industrie</a></li>
<li><a href="../fr460547/index.html">Antiquités: Psion 5MX et vie à la retraite</a></li>
<li><a href="../fr460551/index.html">Le Portugal Les meilleures plages et mille startups par an</a></li>
<li><a href="../fr460553/index.html">Technologie, externalisation et mentalité: comment nous avons implémenté Microsoft Dynamics 365 au bureau allemand de Lamoda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>