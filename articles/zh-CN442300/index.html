<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘²ğŸ¾ ğŸ‘†ğŸ½ ğŸ‘¸ğŸ½ æˆ‘çœ‹ç€æˆ‘æƒ³è¦çš„åœ°æ–¹å¬ã€‚ å°†Chromecasté›†æˆåˆ°Androidåº”ç”¨ä¸­ ğŸ¤´ğŸ¼ ğŸ”Œ ğŸ¤±ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨å¤§è¡—ä¸Šï¼Œæˆ‘ç»å¸¸å¬æ™ºèƒ½æ‰‹æœºä¸Šçš„æœ‰å£°è¯»ç‰©å’Œæ’­å®¢ã€‚ åˆ°å®¶åï¼Œæˆ‘æƒ³ç»§ç»­åœ¨Android TVæˆ–Google Homeä¸Šæ”¶å¬å®ƒä»¬ã€‚ ä½†å¹¶éæ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½æ”¯æŒChromecastã€‚ è¿™æ ·ä¼šå¾ˆæ–¹ä¾¿ã€‚ 


 æ ¹æ®Googleè¿‡å»3å¹´çš„ç»Ÿè®¡ ï¼ŒAndroid TVä¸Šçš„è®¾å¤‡æ•°é‡å¢åŠ äº†4å€ï¼Œåˆ¶é€ åˆä½œä¼™ä¼´çš„æ•°é‡å·²ç»è¶…è¿‡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æˆ‘çœ‹ç€æˆ‘æƒ³è¦çš„åœ°æ–¹å¬ã€‚ å°†Chromecasté›†æˆåˆ°Androidåº”ç”¨ä¸­</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mobileup/blog/442300/"><p><img src="https://habrastorage.org/webt/bq/i8/s9/bqi8s9jzjckcmyylz2djxicszli.png"></p><br><p> åœ¨å¤§è¡—ä¸Šï¼Œæˆ‘ç»å¸¸å¬æ™ºèƒ½æ‰‹æœºä¸Šçš„æœ‰å£°è¯»ç‰©å’Œæ’­å®¢ã€‚ åˆ°å®¶åï¼Œæˆ‘æƒ³ç»§ç»­åœ¨Android TVæˆ–Google Homeä¸Šæ”¶å¬å®ƒä»¬ã€‚ ä½†å¹¶éæ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½æ”¯æŒChromecastã€‚ è¿™æ ·ä¼šå¾ˆæ–¹ä¾¿ã€‚ </p><br><p> æ ¹æ®Googleè¿‡å»3å¹´çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç»Ÿè®¡</a> ï¼ŒAndroid TVä¸Šçš„è®¾å¤‡æ•°é‡å¢åŠ äº†4å€ï¼Œåˆ¶é€ åˆä½œä¼™ä¼´çš„æ•°é‡å·²ç»è¶…è¿‡äº†100ï¼šâ€œæ™ºèƒ½â€ç”µè§†ï¼Œæ‰¬å£°å™¨ï¼Œæœºé¡¶ç›’ã€‚ å®ƒä»¬éƒ½æ”¯æŒChromecastã€‚ ä½†æ˜¯å¸‚åœºä¸Šä»ç„¶æœ‰è®¸å¤šåº”ç”¨æ˜¾ç„¶ç¼ºä¹ä¸ä¹‹é›†æˆã€‚ </p><br><p> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æƒ³åˆ†äº«ä¸€ä¸‹æˆ‘å°†Chromecasté›†æˆåˆ°ç”¨äºæ’­æ”¾åª’ä½“å†…å®¹çš„Androidåº”ç”¨ç¨‹åºä¸­çš„ç»éªŒã€‚ </p><a name="habracut"></a><br><h1 id="kak-eto-rabotaet"> å¦‚ä½•è¿ä½œ </h1><br><p> å¦‚æœè¿™æ˜¯æ‚¨ç¬¬ä¸€æ¬¡å¬åˆ°â€œ Chromecastâ€ä¸€è¯ï¼Œæˆ‘ä¼šå°è¯•ç®€å•åœ°å‘Šè¯‰æ‚¨ã€‚ åœ¨ç”¨æ³•æ–¹é¢ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><ol><li> ç”¨æˆ·é€šè¿‡åº”ç”¨ç¨‹åºæˆ–ç½‘ç«™æ”¶å¬éŸ³ä¹æˆ–è§‚çœ‹è§†é¢‘ã€‚ </li><li>  Chromecastè®¾å¤‡å‡ºç°åœ¨æœ¬åœ°ç½‘ç»œä¸Šã€‚ </li><li> ç›¸åº”çš„æŒ‰é’®åº”å‡ºç°åœ¨æ’­æ”¾å™¨çš„ç•Œé¢ä¸­ã€‚ </li><li> é€šè¿‡å•å‡»å®ƒï¼Œç”¨æˆ·å¯ä»¥ä»åˆ—è¡¨ä¸­é€‰æ‹©æ‰€éœ€çš„è®¾å¤‡ã€‚ å®ƒå¯ä»¥æ˜¯Nexus Playerï¼ŒAndroid TVæˆ–æ™ºèƒ½æ‰¬å£°å™¨ã€‚ </li><li> æ­¤è®¾å¤‡ç»§ç»­æ’­æ”¾ã€‚ </li></ol><br><p><img src="https://habrastorage.org/webt/qc/eb/pu/qcebpuhqkjtb7hcjpzvkm73pzyk.jpeg"></p><br><p> ä»æŠ€æœ¯ä¸Šè®²ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼š </p><br><ol><li>  GoogleæœåŠ¡é€šè¿‡å¹¿æ’­ç›‘è§†æœ¬åœ°ç½‘ç»œä¸ŠChromecastè®¾å¤‡çš„å­˜åœ¨ã€‚ </li><li> å¦‚æœ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MediaRouterå·²</a>è¿æ¥åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œåˆ™æ‚¨å°†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ”¶åˆ°</a>æœ‰å…³æ­¤äº‹ä»¶ã€‚ </li><li> å½“ç”¨æˆ·é€‰æ‹©Castè®¾å¤‡å¹¶è¿æ¥åˆ°å®ƒæ—¶ï¼Œå°†æ‰“å¼€ä¸€ä¸ªæ–°çš„åª’ä½“ä¼šè¯ï¼ˆCastSessionï¼‰ã€‚ </li><li> åœ¨åˆ›å»ºçš„ä¼šè¯ä¸­ï¼Œæˆ‘ä»¬å°†ä¼ è¾“å†…å®¹ä»¥è¿›è¡Œå›æ”¾ã€‚ <br> å¬èµ·æ¥å¾ˆç®€å•ã€‚ </li></ol><br><h1 id="integraciya"> æ•´åˆæ€§ </h1><br><p>  Googleæ‹¥æœ‰è‡ªå·±çš„Chromecast <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SDK</a> ï¼Œä½†å…¶æ–‡æ¡£è¦†ç›–ç‡å¾ˆä½ï¼Œå¹¶ä¸”å…¶ä»£ç è¢«æ··æ·†äº†ã€‚ å› æ­¤ï¼Œè®¸å¤šäº‹æƒ…å¿…é¡»é€šè¿‡é”®å…¥æ£€æŸ¥ã€‚ è®©æˆ‘ä»¬æ•´ç†ä¸€åˆ‡ã€‚ </p><br><h2 id="inicializaciya"> åˆå§‹åŒ– </h2><br><p> é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è¿æ¥Caståº”ç”¨ç¨‹åºæ¡†æ¶å’ŒMediaRouterï¼š </p><br><pre><code class="java hljs">implementation <span class="hljs-string"><span class="hljs-string">"com.google.android.gms:play-services-cast-framework:16.1.0"</span></span> implementation <span class="hljs-string"><span class="hljs-string">"androidx.mediarouter:mediarouter:1.0.0"</span></span></code> </pre> <br><p> ç„¶åï¼ŒCast Frameworkåº”è¯¥è·å–åº”ç”¨ç¨‹åºæ ‡è¯†ç¬¦ï¼ˆç¨åä¼šè¯¦ç»†ä»‹ç»ï¼‰ä»¥åŠæ”¯æŒçš„åª’ä½“å†…å®¹çš„ç±»å‹ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä»…æ’­æ”¾è§†é¢‘ï¼Œåˆ™å°†æ— æ³•æŠ•å°„åˆ°Google Homeåˆ—ï¼Œå¹¶ä¸”ä¸åœ¨è®¾å¤‡åˆ—è¡¨ä¸­ã€‚ ä¸ºæ­¤ï¼Œè¯·åˆ›å»ºOptionsProviderçš„å®ç°ï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CastOptionsProvider</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OptionsProvider { override fun getCastOptions</span></span></span></span>(context: Context): CastOptions { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CastOptions.Builder() .setReceiverApplicationId(BuildConfig.CHROMECAST_APP_ID) .build() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAdditionalSessionProviders</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Context</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: MutableList&lt;SessionProvider&gt;? { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span> } }</code> </pre> <br><p> å¹¶åœ¨æ¸…å•ä¸­å£°æ˜ï¼š </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.gms.cast.framework.OPTIONS_PROVIDER_CLASS_NAME"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"your.app.package.CastOptionsProvider"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><h2 id="registriruem-prilozhenie"> æ³¨å†Œç”³è¯· </h2><br><p> ä¸ºäº†ä½¿Chromecastä¸æˆ‘ä»¬çš„åº”ç”¨ä¸€èµ·ä½¿ç”¨ï¼Œå¿…é¡»åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Google Cast SDKå¼€å‘è€…æ§åˆ¶å°ä¸­</a>æ³¨å†Œå®ƒã€‚ è¿™éœ€è¦ä¸€ä¸ªChromecastå¼€å‘è€…å¸æˆ·ï¼ˆä¸è¦ä¸Google Playå¼€å‘è€…å¸æˆ·æ··æ·†ï¼‰ã€‚ æ³¨å†Œæ—¶ï¼Œæ‚¨å°†éœ€è¦æ”¯ä»˜5ç¾å…ƒçš„ä¸€æ¬¡æ€§è´¹ç”¨ã€‚ å‘å¸ƒChromeCaståº”ç”¨ç¨‹åºåï¼Œæ‚¨éœ€è¦ç¨ç­‰ç‰‡åˆ»ã€‚ <br> åœ¨æ§åˆ¶å°ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å±å¹•æ›´æ”¹è®¾å¤‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„</a> Castæ’­æ”¾å™¨çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¤–è§‚ï¼Œ</a>å¹¶æŸ¥çœ‹åº”ç”¨ç¨‹åº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸­çš„</a> Caståˆ†æã€‚ </p><br><h2 id="mediarouter"> åª’ä½“è·¯ç”±å™¨ </h2><br><p>  MediaRouteFrameworkæ˜¯ä¸€ç§å…è®¸æ‚¨æŸ¥æ‰¾ç”¨æˆ·é™„è¿‘çš„æ‰€æœ‰è¿œç¨‹æ’­æ”¾è®¾å¤‡çš„æœºåˆ¶ã€‚ è¿™ä¸ä»…å¯ä»¥æ˜¯Chromecastï¼Œä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åè®®çš„è¿œç¨‹æ˜¾ç¤ºå™¨å’Œæ‰¬å£°å™¨ã€‚ ä½†æ˜¯è®©æˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯Chromecastã€‚ </p><br><p><img src="https://habrastorage.org/webt/nb/tb/hn/nbtbhnq7266gmh_2ntfqjhign_m.png"></p><br><p>  MediaRouteFrameworkå…·æœ‰ä¸€ä¸ªå¯åæ˜ åª’ä½“æ»‘æ¿è½¦çŠ¶æ€çš„è§†å›¾ã€‚ æœ‰ä¸¤ç§è¿æ¥æ–¹æ³•ï¼š </p><br><p>  1ï¼‰é€šè¿‡èœå•ï¼š </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">menu</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/menu_media_route"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/cast"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:actionProviderClass</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"androidx.mediarouter.app.MediaRouteActionProvider"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:showAsAction</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"always"</span></span></span><span class="hljs-tag">/&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">menu</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  2ï¼‰é€šè¿‡å¸ƒå±€ï¼š </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidx.mediarouter.app.MediaRouteButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/mediaRouteButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:mediaRouteTypes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"user"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br><p> ä»ä»£ç ä¸­ï¼Œæ‚¨åªéœ€è¦åœ¨CastButtonFactoryä¸­æ³¨å†ŒæŒ‰é’®ã€‚ åˆ™åª’ä½“æ»‘æ¿è½¦çš„å½“å‰çŠ¶æ€å°†è¢«æŠ›å‡ºï¼š </p><br><pre> <code class="kotlin hljs">CastButtonFactory.setUpMediaRouteButton(applicationContext, view.mediaRouteButton)</code> </pre> <br><p> ç°åœ¨å·²ç»æ³¨å†Œäº†åº”ç”¨ç¨‹åºå¹¶é…ç½®äº†MediaRouterï¼Œæ‚¨å¯ä»¥è¿æ¥åˆ°ChromeCastè®¾å¤‡å¹¶æ‰“å¼€ä¸å®ƒä»¬çš„ä¼šè¯ã€‚ </p><br><h1 id="kasting-mediakontenta"> æŠ•æ”¾åª’ä½“å†…å®¹ </h1><br><p>  ChromeCastæ”¯æŒä¸‰ç§ä¸»è¦çš„å†…å®¹ç±»å‹ï¼š </p><br><ul><li> éŸ³è®¯ </li><li> å½•å½±å¸¦ </li><li> ç›¸ç‰‡ </li></ul><br><p> æ ¹æ®æ’­æ”¾å™¨çš„è®¾ç½®ï¼ˆä¾‹å¦‚åª’ä½“å†…å®¹å’ŒæŠ•å°„è®¾å¤‡ï¼‰ï¼Œæ’­æ”¾å™¨çš„ç•Œé¢å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚ </p><br><h2 id="castsession"> æ¼”å‘˜è¡¨ </h2><br><p> å› æ­¤ï¼Œç”¨æˆ·é€‰æ‹©äº†æ‰€éœ€çš„è®¾å¤‡ï¼ŒCastFrameworkæ‰“å¼€äº†ä¸€ä¸ªæ–°ä¼šè¯ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬çš„ä»»åŠ¡æ˜¯å¯¹æ­¤åšå‡ºå“åº”ï¼Œå¹¶å°†ä¿¡æ¯ä¼ é€’ç»™è®¾å¤‡è¿›è¡Œæ’­æ”¾ã€‚ <br> è¦æŸ¥æ‰¾ä¼šè¯çš„å½“å‰çŠ¶æ€å¹¶æ³¨å†Œä»¥æ›´æ–°æ­¤çŠ¶æ€ï¼Œè¯·ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SessionManager</a>å¯¹è±¡ï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mediaSessionListener = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : SessionManagerListener&lt;CastSession&gt; { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSessionStarted</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(session: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CastSession</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sessionId: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { currentSession = session <span class="hljs-comment"><span class="hljs-comment">//  ,      checkAndStartCasting() } override fun onSessionEnding(session: CastSession) { stopCasting() } override fun onSessionResumed(session: CastSession, wasSuspended: Boolean) { currentSession = session checkAndStartCasting() } override fun onSessionStartFailed(session: CastSession, p1: Int) { stopCasting() } override fun onSessionEnded(session: CastSession, p1: Int) { // do nothing } override fun onSessionResumeFailed(session: CastSession, p1: Int) { // do nothing } override fun onSessionSuspended(session: CastSession, p1: Int) { // do nothing } override fun onSessionStarting(session: CastSession) { // do nothing } override fun onSessionResuming(session: CastSession, sessionId: String) { // do nothing } } val sessionManager = CastContext.getSharedInstance(context).sessionManager sessionManager.addSessionManagerListener(mediaSessionListener, CastSession::class.java)</span></span></code> </pre> <br><p> æˆ‘ä»¬è¿˜å¯ä»¥äº†è§£å½“å‰æ˜¯å¦æœ‰å…¬å¼€ä¼šè®®ï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> currentSession: CastSession? = sessionManager.currentCastSession</code> </pre> <br><p> æˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸»è¦æ¡ä»¶å¯ä»¥å¼€å§‹æŠ•å°„ï¼š </p><br><ol><li> ä¼šè¯å·²ç»æ‰“å¼€ã€‚ </li><li> æœ‰é“¸é€ çš„å†…å®¹ã€‚ </li></ol><br><p> åœ¨è¿™ä¸¤ä¸ªäº‹ä»¶çš„æ¯ä¸€ä¸ªä¸­ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æ£€æŸ¥çŠ¶æ€ï¼Œå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåˆ™å¯ä»¥å¼€å§‹æŠ•å°„ã€‚ </p><br><h2 id="kasting"> é“¸ä»¶ </h2><br><p> ç°åœ¨æˆ‘ä»¬æœ‰äº†è¦æŠ•å°„çš„ä¸œè¥¿å’Œè¦æŠ•å°„çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è¿›è¡Œæœ€é‡è¦çš„äº‹æƒ…ã€‚ é™¤å…¶ä»–äº‹é¡¹å¤–ï¼ŒCastSessionå…·æœ‰ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RemoteMediaClient</a>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£åª’ä½“å†…å®¹çš„æ’­æ”¾çŠ¶æ€ã€‚ æˆ‘ä»¬å°†ä¸ä»–åˆä½œã€‚ </p><br><p> è®©æˆ‘ä»¬åˆ›å»º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MediaMetadata</a> ï¼Œå…¶ä¸­å°†å­˜å‚¨æœ‰å…³ä½œè€…ï¼Œä¸“è¾‘ç­‰çš„ä¿¡æ¯ï¼Œè¿™ä¸å¼€å§‹æœ¬åœ°å›æ”¾æ—¶ä¼ è¾“åˆ°MediaSessionçš„ä¿¡æ¯éå¸¸ç›¸ä¼¼ã€‚ </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mediaMetadata = MediaMetadata(MediaMetadata.MEDIA_TYPE_MUSIC_TRACK ).apply { putString(MediaMetadata.KEY_TITLE, â€œIn Câ€) putString(MediaMetadata.KEY_ARTIST, â€œTerry Rileyâ€) mediaContent?.metadata?.posterUrl?.let { poster -&gt; addImage(WebImage(Uri.parse(â€œhttps:<span class="hljs-comment"><span class="hljs-comment">//habrastorage.org/webt/wk/oi/pf/wkoipfkdyy2ctoa5evnd8vhxtem.pngâ€))) } }</span></span></code> </pre> <br><p>  MediaMetadataæœ‰å¾ˆå¤šå‚æ•°ï¼Œæœ€å¥½åœ¨æ–‡æ¡£ä¸­æŸ¥çœ‹å®ƒä»¬ã€‚ æˆ‘å¾ˆæƒŠè®¶æ‚¨å¯ä»¥ä¸é€šè¿‡ä½å›¾è€Œæ˜¯ä»…é€šè¿‡WebImageå†…çš„é“¾æ¥æ¥æ·»åŠ å›¾åƒã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MediaInfo</a>å¯¹è±¡æºå¸¦æœ‰å…³å†…å®¹å…ƒæ•°æ®çš„ä¿¡æ¯ï¼Œå¹¶å°†è®¨è®ºåª’ä½“å†…å®¹æ¥è‡ªä½•å¤„ï¼Œå®ƒæ˜¯ä»€ä¹ˆç±»å‹ï¼Œå¦‚ä½•æ’­æ”¾ï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mediaInfo = MediaInfo.Builder(â€œhttps:<span class="hljs-comment"><span class="hljs-comment">//you-address.com/in_c.mp3â€) .setContentType(â€œaudio/mp3â€) .setStreamType(MediaInfo.STREAM_TYPE_BUFFERED) .setMetadata(mediaMetadata) .build()</span></span></code> </pre> <br><p> è®©æˆ‘æé†’æ‚¨ï¼Œæ ¹æ®<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MIME</a>è§„èŒƒï¼ŒcontentTypeæ˜¯ä¸€ç§å†…å®¹ç±»å‹ã€‚ <br> æ‚¨è¿˜å¯ä»¥å°†å¹¿å‘Šæ’å…¥å†…å®¹è½¬ç§»åˆ°MediaInfoï¼š </p><br><ul><li>  setAdBreakClips-æ¥å—<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">AdBreakClipInfo</a>å¹¿å‘Šçš„åˆ—è¡¨ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…¶ä¸­</a>åŒ…å«æŒ‡å‘å†…å®¹ï¼Œæ ‡é¢˜ï¼Œæ—¶é—´ä»¥åŠè·³è¿‡å¹¿å‘Šçš„æ—¶é—´çš„é“¾æ¥ã€‚ </li><li>  setAdBreaks-æœ‰å…³å¹¿å‘Šæ’å…¥çš„å¸ƒå±€å’Œæ—¶é—´å®‰æ’çš„ä¿¡æ¯ã€‚ </li></ul><br><p> åœ¨MediaLoadOptionsä¸­ï¼Œæˆ‘ä»¬æè¿°äº†å¦‚ä½•å¤„ç†åª’ä½“æµï¼ˆé€Ÿåº¦ï¼Œèµ·å§‹ä½ç½®ï¼‰ã€‚ è¯¥æ–‡æ¡£è¿˜è¯´ï¼Œæ‚¨å¯ä»¥é€šè¿‡setCredentialsä¼ é€’è¯·æ±‚æ ‡å¤´ä»¥è¿›è¡Œæˆæƒï¼Œä½†æ˜¯æˆ‘ä»Chromecastå‘å‡ºçš„è¯·æ±‚ä¸­å¹¶æœªåŒ…å«æ‰€è¯·æ±‚çš„æˆæƒå­—æ®µã€‚ </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mediaLoadOptions = MediaLoadOptions.Builder() .setPlayPosition(position!!) .setAutoplay(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) .setPlaybackRate(playbackSpeed) .setCredentials(context.getString(R.string.bearer_token, authGateway.authState.accessToken!!)) .setCredentialsType(context.getString(R.string.authorization_header_key)) .build()</code> </pre> <br><p> ä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰æ•°æ®æä¾›ç»™RemoteMediaClientï¼Œç„¶åChromecastå°†å¼€å§‹æ’­æ”¾ã€‚ æš‚åœæœ¬åœ°æ’­æ”¾å¾ˆé‡è¦ã€‚ </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> remoteMediaClient = currentSession!!.remoteMediaClient remoteMediaClient.load(mediaInfo, mediaLoadOptions)</code> </pre> <br><h2 id="obrabotka-sobytiy"> äº‹ä»¶å¤„ç† </h2><br><p> è§†é¢‘å¼€å§‹æ’­æ”¾ï¼Œç„¶åå‘¢ï¼Ÿ å¦‚æœç”¨æˆ·æš‚åœç”µè§†æ€ä¹ˆåŠï¼Ÿ è¦ä»Chromecastä¾§é¢äº†è§£äº‹ä»¶ï¼ŒRemoteMediaClientå…·æœ‰å›è°ƒï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> castStatusCallback = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : RemoteMediaClient.Callback() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStatusUpdated</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// check and update current state } } remoteMediaClient.registerCallback(castStatusCallback)</span></span></code> </pre> <br><p> è¦çŸ¥é“å½“å‰çš„è¿›åº¦ä¹Ÿå¾ˆç®€å•ï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> periodMills = <span class="hljs-number"><span class="hljs-number">1000L</span></span> remoteMediaClient.addProgressListener( RemoteMediaClient.ProgressListener { progressMills, durationMills -&gt; <span class="hljs-comment"><span class="hljs-comment">// show progress in your UI }, periodMills )</span></span></code> </pre> <br><h1 id="opyt-integracii-s-suschestvuyuschim-pleerom"> ä¸ç°æœ‰æ’­æ”¾å™¨é›†æˆçš„ç»éªŒ </h1><br><p> æˆ‘æ­£åœ¨å¤„ç†çš„åº”ç”¨ç¨‹åºå·²ç»æœ‰ç°æˆçš„åª’ä½“æ’­æ”¾å™¨ã€‚ ç›®æ ‡æ˜¯å°†Chromecastæ”¯æŒé›†æˆåˆ°å…¶ä¸­ã€‚ åª’ä½“æ’­æ”¾å™¨åŸºäºçŠ¶æ€æœºï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯æ·»åŠ ä¸€ä¸ªæ–°çŠ¶æ€ï¼šâ€œ CastingStateâ€ã€‚ ä½†æ˜¯è¿™ä¸ªæƒ³æ³•ç«‹å³è¢«æ‹’ç»äº†ï¼Œå› ä¸ºæ¯ä¸ªæ’­æ”¾å™¨çŠ¶æ€éƒ½åæ˜ äº†æ’­æ”¾çŠ¶æ€ï¼Œå¹¶ä¸”ä»€ä¹ˆç”¨ä½œExoPlayeræˆ–ChromeCastçš„å®ç°éƒ½æ— å…³ç´§è¦ã€‚ <br> ç„¶åï¼Œæå‡ºäº†åˆ›å»ºå…·æœ‰ä¸€å®šä¼˜å…ˆçº§å¹¶å¤„ç†ç©å®¶â€œç”Ÿå‘½å‘¨æœŸâ€çš„ä»£è¡¨ç³»ç»Ÿçš„æƒ³æ³•ã€‚ æ‰€æœ‰ä»£è¡¨éƒ½å¯ä»¥æ¥æ”¶æ’­æ”¾å™¨çŠ¶æ€äº‹ä»¶ï¼šæ’­æ”¾ï¼Œæš‚åœç­‰ã€‚  -ä½†åªæœ‰é¦–å¸­ä»£è¡¨æ‰èƒ½æ’­æ”¾åª’ä½“å†…å®¹ã€‚ </p><br><p><img src="https://habrastorage.org/webt/bq/3d/ha/bq3dhavugibyob-itbb6zmlxt1o.png"></p><br><p> æˆ‘ä»¬æœ‰è¿™æ ·çš„æ’­æ”¾å™¨ç•Œé¢ï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Player</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> isPlaying: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> isReleased: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> duration: <span class="hljs-built_in"><span class="hljs-built_in">Long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> positionInMillis: <span class="hljs-built_in"><span class="hljs-built_in">Long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> speed: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> volume: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> loop: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(listener: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">PlayerCallback</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(listener: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">PlayerCallback</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getListeners</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: MutableSet&lt;PlayerCallback&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mediaContent: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">MediaContent</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">release</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerCallback</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPlaying</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(currentPosition: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPaused</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(currentPosition: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPreparing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPrepared</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onLoadingChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(isLoading: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDurationChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(duration: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSetSpeed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(speed: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSeekTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fromTimeInMillis: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">, toTimeInMillis: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onWaitingForNetwork</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReleased</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPlayerProgress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(currentPosition: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> } }</code> </pre> <br><p> å®ƒçš„å†…éƒ¨å°†æ˜¯ä¸€ä¸ªå…·æœ‰è®¸å¤šçŠ¶æ€çš„çŠ¶æ€æœºï¼š </p><br><ul><li> ç©º-åˆå§‹åŒ–ä¹‹å‰çš„åˆå§‹çŠ¶æ€ã€‚ </li><li> å‡†å¤‡-æ’­æ”¾å™¨å¯åŠ¨åª’ä½“å†…å®¹çš„æ’­æ”¾ã€‚ </li><li> å·²å‡†å¤‡-åª’ä½“å·²ä¸Šä¼ å¹¶å¯ä»¥æ’­æ”¾ã€‚ </li><li> ç© </li><li> å·²æš‚åœ </li><li> ç­‰å¾…ç½‘ç»œ </li><li> å¤±è¯¯ </li></ul><br><p><img src="https://habrastorage.org/webt/vo/bf/pj/vobfpjedi8xqla3huav88k0xrdw.png"></p><br><p> ä»¥å‰ï¼Œåˆå§‹åŒ–æœŸé—´çš„æ¯ä¸ªçŠ¶æ€éƒ½ä¼šåœ¨ExoPlayerä¸­å‘å¸ƒå‘½ä»¤ã€‚ ç°åœ¨ï¼Œå®ƒå°†å‘½ä»¤å‘å¸ƒåˆ°â€œæ’­æ”¾â€å§”æ‰˜äººåˆ—è¡¨ä¸­ï¼Œâ€œ Leadâ€å§”æ‰˜äººå°†èƒ½å¤Ÿå¯¹å…¶è¿›è¡Œå¤„ç†ã€‚ ç”±äºå§”æ‰˜å®ç°äº†æ’­æ”¾å™¨çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå› æ­¤å®ƒä¹Ÿå¯ä»¥ä»æ’­æ”¾å™¨çš„ç•Œé¢ç»§æ‰¿ï¼Œå¹¶åœ¨å¿…è¦æ—¶å•ç‹¬ä½¿ç”¨ã€‚ ç„¶åï¼ŒæŠ½è±¡å§”æ‰˜å°†å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayingDelegate</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> playerCallback: Player.PlayerCallback, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isLeading: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> ) : Player { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setIsLeading</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(isLeading: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params">, positionMills: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">, isPlaying: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.isLeading = isLeading <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isLeading) { onLeading(positionMills, isPlaying) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { onDormant() } } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(listener: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Player</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">PlayerCallback</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// do nothing } final override fun removeListener(listener: Player.PlayerCallback): Boolean { return false } final override fun getListeners(): MutableSet&lt;Player.PlayerCallback&gt; { return mutableSetOf() } /** *    */ open fun netwarkIsRestored() { // do nothing } /** *      */ abstract fun onLeading(positionMills: Long, isPlaying: Boolean) /** *      */ abstract fun onIdle() /** *     . *      , *       . */ abstract fun readyForLeading(): Boolean }</span></span></code> </pre> <br><p> ä¾‹å¦‚ï¼Œæˆ‘ç®€åŒ–äº†æ¥å£ã€‚ å®é™…ä¸Šï¼Œè¿˜æœ‰æ›´å¤šäº‹ä»¶ã€‚ <br> å¯ä»¥æœ‰ä¸å¤åˆ¶æºä¸€æ ·å¤šçš„ä»£è¡¨ã€‚  Chromecastä»£è¡¨å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">ChromeCastDelegate.kt</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ChromeCastDelegate</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> context: Context, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> castCallback: ChromeCastListener, playerCallback: Player.PlayerCallback ) : PlayingDelegate(playerCallback) { <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> CONTENT_TYPE_VIDEO = <span class="hljs-string"><span class="hljs-string">"videos/mp4"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> CONTENT_TYPE_AUDIO = <span class="hljs-string"><span class="hljs-string">"audio/mp3"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> PROGRESS_DELAY_MILLS = <span class="hljs-number"><span class="hljs-number">500L</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ChromeCastListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCastStarted</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCastStopped</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sessionManager: SessionManager? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentSession: CastSession? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mediaContent: MediaContent? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentPosition: <span class="hljs-built_in"><span class="hljs-built_in">Long</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mediaSessionListener = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : SessionManagerListener&lt;CastSession&gt; { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSessionStarted</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(session: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CastSession</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sessionId: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { currentSession = session castCallback.onCastStarted() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSessionEnding</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(session: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CastSession</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { currentPosition = session.remoteMediaClient?.approximateStreamPosition ?: currentPosition stopCasting() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSessionResumed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(session: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CastSession</span></span></span></span><span class="hljs-function"><span class="hljs-params">, wasSuspended: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { currentSession = session castCallback.onCastStarted() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSessionStartFailed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(session: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CastSession</span></span></span></span><span class="hljs-function"><span class="hljs-params">, p1: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { stopCasting() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSessionEnded</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(session: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CastSession</span></span></span></span><span class="hljs-function"><span class="hljs-params">, p1: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// do nothing } override fun onSessionResumeFailed(session: CastSession, p1: Int) { // do nothing } override fun onSessionSuspended(session: CastSession, p1: Int) { // do nothing } override fun onSessionStarting(session: CastSession) { // do nothing } override fun onSessionResuming(session: CastSession, sessionId: String) { // do nothing } } private val castStatusCallback = object : RemoteMediaClient.Callback() { override fun onStatusUpdated() { if (currentSession == null) return val playerState = currentSession!!.remoteMediaClient.playerState when (playerState) { MediaStatus.PLAYER_STATE_PLAYING -&gt; playerCallback.onPlaying(positionInMillis) MediaStatus.PLAYER_STATE_PAUSED -&gt; playerCallback.onPaused(positionInMillis) } } } private val progressListener = RemoteMediaClient.ProgressListener { progressMs, durationMs -&gt; playerCallback.onPlayerProgress(progressMs) } // Playing delegate override val isReleased: Boolean = false override var loop: Boolean = false override val isPlaying: Boolean get() = currentSession?.remoteMediaClient?.isPlaying ?: false override val duration: Long get() = currentSession?.remoteMediaClient?.streamDuration ?: 0 override var positionInMillis: Long get() { currentPosition = currentSession?.remoteMediaClient?.approximateStreamPosition ?: currentPosition return currentPosition } set(value) { currentPosition = value checkAndStartCasting() } override var speed: Float = SpeedProvider.default() set(value) { field = value checkAndStartCasting() } override var volume: Float get() = currentSession?.volume?.toFloat() ?: 0F set(value) { currentSession?.volume = value.toDouble() } override fun prepare(mediaContent: MediaContent) { sessionManager = CastContext.getSharedInstance(context).sessionManager sessionManager?.addSessionManagerListener(mediaSessionListener, CastSession::class.java) currentSession = sessionManager?.currentCastSession this.mediaContent = mediaContent playerCallback.onPrepared() } override fun play() { if (isLeading) { currentSession?.remoteMediaClient?.play() } } override fun pause() { if (isLeading) { currentSession?.remoteMediaClient?.pause() } } override fun release() { stopCasting(true) } override fun onLeading(positionMills: Long, isPlaying: Boolean) { currentPosition = positionMills checkAndStartCasting() } override fun onIdle() { // TODO } override fun readyForLeading(): Boolean { return currentSession != null } // internal private fun checkAndStartCasting() { if (currentSession != null &amp;&amp; mediaContent?.metadata != null &amp;&amp; isLeading) { val mediaMetadata = MediaMetadata(getMetadataType(mediaContent!!.type)).apply { putString(MediaMetadata.KEY_TITLE, mediaContent?.metadata?.title.orEmpty()) putString(MediaMetadata.KEY_ARTIST, mediaContent?.metadata?.author.orEmpty()) mediaContent?.metadata?.posterUrl?.let { poster -&gt; addImage(WebImage(Uri.parse(poster))) } } val mediaInfo = MediaInfo.Builder(mediaContent!!.contentUri.toString()) .setContentType(getContentType(mediaContent!!.type)) .setStreamType(MediaInfo.STREAM_TYPE_BUFFERED) .setMetadata(mediaMetadata) .build() val mediaLoadOptions = MediaLoadOptions.Builder() .setPlayPosition(currentPosition) .setAutoplay(true) .setPlaybackRate(speed.toDouble()) .build() val remoteMediaClient = currentSession!!.remoteMediaClient remoteMediaClient.unregisterCallback(castStatusCallback) remoteMediaClient.load(mediaInfo, mediaLoadOptions) remoteMediaClient.registerCallback(castStatusCallback) remoteMediaClient.addProgressListener(progressListener, PROGRESS_DELAY_MILLS) } } private fun stopCasting(removeListener: Boolean = false) { if (removeListener) { sessionManager?.removeSessionManagerListener(mediaSessionListener, CastSession::class.java) } currentSession?.remoteMediaClient?.unregisterCallback(castStatusCallback) currentSession?.remoteMediaClient?.removeProgressListener(progressListener) currentSession?.remoteMediaClient?.stop() currentSession = null if (isLeading) { castCallback.onCastStopped() } } private fun getContentType(mediaType: MediaContent.Type) = when (mediaType) { MediaContent.Type.AUDIO -&gt; CONTENT_TYPE_AUDIO MediaContent.Type.VIDEO -&gt; CONTENT_TYPE_VIDEO } private fun getMetadataType(mediaType: MediaContent.Type) = when (mediaType) { MediaContent.Type.AUDIO -&gt; MediaMetadata.MEDIA_TYPE_MUSIC_TRACK MediaContent.Type.VIDEO -&gt; MediaMetadata.MEDIA_TYPE_MOVIE } }</span></span></code> </pre> </div></div><br><p> åœ¨å‘å‡ºæœ‰å…³å¤åˆ¶çš„å‘½ä»¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šä¸»è¦ä»£è¡¨ã€‚ ä¸ºæ­¤ï¼Œå°†å®ƒä»¬æŒ‰ä¼˜å…ˆçº§æ·»åŠ åˆ°æ’­æ”¾å™¨ï¼Œå¹¶ä¸”å®ƒä»¬æ¯ä¸ªéƒ½å¯ä»¥åœ¨readyForLeadingï¼ˆï¼‰æ–¹æ³•ä¸­ç»™å‡ºå…¶å‡†å¤‡çŠ¶æ€ã€‚ å®Œæ•´çš„ç¤ºä¾‹ä»£ç å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHub</a>ä¸Š<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‰¾åˆ°</a> ã€‚ </p><br><h1 id="est-li-zhizn-posle-chromecast">  ChromeCastä¹‹åæœ‰ç”Ÿå‘½å— </h1><br><p><img src="https://habrastorage.org/webt/zo/pj/sk/zopjsk1u1rzsmxfucmf6dfkntv8.png"></p><br><p> å°†Chromecastæ”¯æŒé›†æˆåˆ°åº”ç”¨ç¨‹åºåï¼Œæˆ‘å¾ˆé«˜å…´å›åˆ°å®¶ï¼Œä¸ä»…å¯ä»¥é€šè¿‡è€³æœºï¼Œè€Œä¸”å¯ä»¥é€šè¿‡Google Homeæ¬£èµæœ‰å£°è¯»ç‰©ã€‚ è‡³äºä½“ç³»ç»“æ„ï¼Œæ’­æ”¾å™¨åœ¨ä¸åŒåº”ç”¨ç¨‹åºä¸­çš„å®ç°å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œå› æ­¤è¿™ç§æ–¹æ³•å¹¶ä¸é€‚åˆæ‰€æœ‰åœ°æ–¹ã€‚ ä½†æ˜¯å¯¹äºæˆ‘ä»¬çš„ä½“ç³»ç»“æ„ï¼Œå®ƒæ¥äº†ã€‚ æˆ‘å¸Œæœ›æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œå¹¶ä¸”åœ¨ä¸ä¹…çš„å°†æ¥ï¼Œå°†ä¼šæœ‰æ›´å¤šå¯ä»¥ä¸æ•°å­—ç¯å¢ƒé›†æˆçš„åº”ç”¨ç¨‹åºï¼ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN442300/">https://habr.com/ru/post/zh-CN442300/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN442288/index.html">è¾å°„ï¼šæ¥æº</a></li>
<li><a href="../zh-CN442290/index.html">ç”¨ä¸­æ–‡ST-Link V2åˆ¶ä½œST-Link V2.1</a></li>
<li><a href="../zh-CN442292/index.html">Sberseasonså®ä¹ ï¼šPythonï¼ŒUX / UIï¼Œæ•°æ®ä»¥åŠæ›´å¤šå­¦ç”Ÿ</a></li>
<li><a href="../zh-CN442294/index.html">å¥¥åˆ—æ ¼Â·é˜¿å¡”è«è¯ºå¤«ï¼ˆOleg Artamonovï¼‰æœ‰ä»€ä¹ˆé”™è¯¯</a></li>
<li><a href="../zh-CN442298/index.html">Gatsby.jsè¯¦ç»†</a></li>
<li><a href="../zh-CN442304/index.html">æŠ˜å å¼æ™ºèƒ½æ‰‹æœºï¼šåº”ç”¨ç¨‹åºå¦‚ä½•ï¼Ÿ</a></li>
<li><a href="../zh-CN442306/index.html">å¦‚ä½•å°†ä¸€ä¸ªgitä¾›åº”åˆ°å¦ä¸€ä¸ªgit</a></li>
<li><a href="../zh-CN442310/index.html">é€šè¿‡Raspberry Piçš„Sonoff Basicå›ºä»¶</a></li>
<li><a href="../zh-CN442312/index.html">RPZåˆ†å‘çš„DoT</a></li>
<li><a href="../zh-CN442316/index.html">ä¸€ä¸ªç´§å‡‘çš„C ++åº“ï¼Œç”¨äºå¯¹ç®—å­é£æ ¼çš„æœ‰é™å·®åˆ†æ–¹æ³•è¿›è¡Œç¼–ç¨‹ã€‚ ç¬¬1éƒ¨åˆ†ã€‚è¯­ä¹‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>