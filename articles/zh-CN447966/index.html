<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸˆ´ ğŸ‘¨ğŸ½â€ğŸ“ ğŸš å¦‚ä½•è¿æ¥GitLabå’ŒPantheonå¹¶ä¼˜åŒ–Drupalå’ŒWordPresså·¥ä½œæµç¨‹ â˜¢ï¸ ğŸ¤³ğŸ¼ ğŸ‘©â€ğŸ¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘ä»¬çš„å˜‰å®¾æ˜¯Pantheonå¼€å‘äººå‘˜å·¥å…·çš„åˆ›å»ºè€…ï¼Œè®¨è®ºäº†å¦‚ä½•ä½¿ç”¨GitLab CI / CDè‡ªåŠ¨æ‰§è¡ŒWordPresséƒ¨ç½²ã€‚ 


 åœ¨Pantheonï¼Œæˆ‘è´Ÿè´£å¼€å‘äººå‘˜å…³ç³»ï¼Œå› æ­¤æˆ‘ä¸€ç›´åœ¨å¯»æ‰¾æ–°æ–¹æ³•æ¥å¸®åŠ©WordPresså’ŒDrupalå¼€å‘äººå‘˜è§£å†³å…¶å·¥ä½œæµç¨‹ä¸­çš„è‡ªåŠ¨åŒ–é—®é¢˜ã€‚ ä¸ºæ­¤ï¼Œæˆ‘å–œæ¬¢å°è¯•ä½¿ç”¨æ–°å·¥å…·...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•è¿æ¥GitLabå’ŒPantheonå¹¶ä¼˜åŒ–Drupalå’ŒWordPresså·¥ä½œæµç¨‹</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/447966/"><p><img src="https://habrastorage.org/webt/ja/h2/ef/jah2efouevm2la2v9vkt3vuojm8.png"></p><br><p> æˆ‘ä»¬çš„å˜‰å®¾æ˜¯Pantheonå¼€å‘äººå‘˜å·¥å…·çš„åˆ›å»ºè€…ï¼Œè®¨è®ºäº†å¦‚ä½•ä½¿ç”¨GitLab CI / CDè‡ªåŠ¨æ‰§è¡ŒWordPresséƒ¨ç½²ã€‚ </p><br><p> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pantheonï¼Œ</a>æˆ‘è´Ÿè´£å¼€å‘äººå‘˜å…³ç³»ï¼Œå› æ­¤æˆ‘ä¸€ç›´åœ¨å¯»æ‰¾æ–°æ–¹æ³•æ¥å¸®åŠ©WordPresså’ŒDrupalå¼€å‘äººå‘˜è§£å†³å…¶å·¥ä½œæµç¨‹ä¸­çš„è‡ªåŠ¨åŒ–é—®é¢˜ã€‚ ä¸ºæ­¤ï¼Œæˆ‘å–œæ¬¢å°è¯•ä½¿ç”¨æ–°å·¥å…·å¹¶å°†å®ƒä»¬ç›¸äº’ç»“åˆä»¥è¿›è¡Œæœ‰æ•ˆçš„å·¥ä½œã€‚ </p><br><p>  <strong>æˆ‘ç»å¸¸çœ‹åˆ°å¼€å‘äººå‘˜è¢«ä¸€å°å¼€å‘æœåŠ¡å™¨æŠ˜ç£¨ã€‚</strong> </p><br><p>å¤ªæœ‰è¶£äº†-ç­‰å¾…è½®åˆ°æ‚¨ä½¿ç”¨æœåŠ¡å™¨æˆ–å‘å®¢æˆ·ç«¯å‘é€å¸¦æœ‰æ³¨é‡Šçš„URLï¼šâ€œçœ‹è¿™é‡Œï¼Œä½†ä¸è¦çœ‹è¿™é‡Œâ€ã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Multidevç¯å¢ƒ</a>æ˜¯Pantheonçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å‡ºè‰²</a>å·¥å…·ä¹‹ä¸€ï¼Œå¯ä»¥è§£å†³æ­¤é—®é¢˜ï¼Œå› ä¸ºæœ‰äº†å®ƒä»¬ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¸ºGitåˆ†æ”¯åˆ›å»ºç¯å¢ƒã€‚ æ¯ä¸ªmultidevç¯å¢ƒéƒ½æœ‰å…¶è‡ªå·±çš„URLå’Œæ•°æ®åº“ï¼Œå› æ­¤å¼€å‘äººå‘˜å¯ä»¥å®‰é™åœ°å·¥ä½œï¼Œæ£€æŸ¥è´¨é‡å¹¶è·å¾—æ‰¹å‡†ï¼Œè€Œä¸ä¼šäº’ç›¸å½±å“ã€‚ </p><br><p> ä½†æ˜¯Pantheonæ²¡æœ‰ç”¨äºç‰ˆæœ¬æ§åˆ¶æˆ–æŒç»­é›†æˆå’Œéƒ¨ç½²ï¼ˆCI / CDï¼‰çš„å·¥å…·ã€‚ ä½†è¿™æ˜¯ä¸€ä¸ªçµæ´»çš„å¹³å°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒé›†æˆä»»ä½•å·¥å…·ã€‚ </p><br><p>  <strong>æˆ‘è¿˜æ³¨æ„åˆ°ï¼Œå¯¹äºå›¢é˜Ÿçš„å‘å±•ï¼Œä»–ä»¬ä½¿ç”¨ä¸€ç§å·¥å…·ï¼Œè€Œåœ¨ç»„è£…å’Œéƒ¨ç½²ä¸­åˆ™ä½¿ç”¨å…¶ä»–å·¥å…·ã€‚</strong> </p><br><p> ä¾‹å¦‚ï¼Œä»–ä»¬å…·æœ‰ç”¨äºç‰ˆæœ¬æ§åˆ¶å’ŒCI / CDçš„ä¸åŒå·¥å…·ã€‚ æ‚¨å¿…é¡»å››å¤„ä¹±é€›ï¼Œå¹¶åœ¨å„ç§å·¥å…·ä¹‹é—´åˆ‡æ¢ä»¥ç¼–è¾‘ä»£ç å’Œè¯Šæ–­é—®é¢˜ã€‚ </p><a name="habracut"></a><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitLab</a>æœ‰ä¸€å¥—å®Œå–„çš„å¼€å‘å·¥å…·ï¼šç”¨äºç‰ˆæœ¬æ§åˆ¶ï¼Œç¥¨è¯ï¼Œåˆå¹¶è¯·æ±‚ï¼ŒåŒç±»ä¸­æœ€å¥½çš„CI / CDç®¡é“ï¼Œå®¹å™¨å¯„å­˜å™¨ä»¥åŠæ‰€æœ‰è¿™äº›ä¸œè¥¿ã€‚ æˆ‘æ²¡æœ‰ç¢°åˆ°è¿‡å¤ªå¤šéœ€è¦ç®¡ç†å¼€å‘å·¥ä½œæµç¨‹çš„åº”ç”¨ç¨‹åºã€‚ </p><br><p> æˆ‘å–œæ¬¢è‡ªåŠ¨åŒ–ï¼Œæ‰€ä»¥æˆ‘å­¦ä¹ äº†å¦‚ä½•å°†Pantheonè¿æ¥åˆ°GitLabï¼Œä»¥ä¾¿å°†å¯¹GitLabçš„ä¸»è¦åˆ†æ”¯çš„æäº¤éƒ¨ç½²åˆ°Pantheonçš„ä¸»è¦å¼€å‘ç¯å¢ƒä¸­ã€‚  GitLabä¸Šçš„åˆå¹¶è¯·æ±‚å¯ä»¥åˆ›å»ºä»£ç å¹¶å°†å…¶éƒ¨ç½²åˆ°Pantheonçš„multidevç¯å¢ƒä¸­ã€‚ </p><br><p> åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨GitLabå’ŒPantheonä¹‹é—´å»ºç«‹è¿æ¥ä»¥åŠå¦‚ä½•ä¼˜åŒ–WordPresså’ŒDrupalå·¥ä½œæµç¨‹ã€‚ </p><br><p> å½“ç„¶ï¼Œæ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é•œåƒGitLabå­˜å‚¨åº“</a> ï¼Œä½†æ˜¯æˆ‘ä»¬å°†ç”¨ç¬”åšæ‰€æœ‰äº‹æƒ…æ¥æŒ–æ˜<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitLab CIï¼Œ</a>å¹¶ä¸ä»…å°†å…¶ç”¨äºå°†æ¥çš„éƒ¨ç½²ã€‚ </p><br><h3 id="vvedenie"> å¼•è¨€ </h3><br><p> å¯¹äºè¿™ç¯‡æ–‡ç« ï¼Œæ‚¨éœ€è¦äº†è§£Pantheonå°†æ¯ä¸ªç«™ç‚¹åˆ†ä¸ºä¸‰ä¸ªå…ƒç´ ï¼šä»£ç ï¼Œæ•°æ®åº“å’Œæ–‡ä»¶ã€‚ </p><br><p> è¯¥ä»£ç åŒ…æ‹¬CMSæ–‡ä»¶ï¼Œä¾‹å¦‚å†…æ ¸ï¼Œæ’ä»¶å’ŒWordPressä¸»é¢˜ã€‚ è¿™äº›æ–‡ä»¶åœ¨Pantheonæ‰˜ç®¡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„Gitå­˜å‚¨åº“ä¸­</a>è¿›è¡Œç®¡ç†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Gitå°†ä»£ç ä»GitLabéƒ¨ç½²åˆ°Pantheonã€‚ <br> ä¸‡ç¥æ®¿ä¸­çš„æ–‡ä»¶ç§°ä¸ºåª’ä½“æ–‡ä»¶ï¼Œå³ç½‘ç«™çš„å›¾ç‰‡ã€‚ é€šå¸¸ï¼Œå®ƒä»¬æ˜¯ç”±ç”¨æˆ·ä¸‹è½½çš„ï¼Œè€ŒGitä¼šå¿½ç•¥å®ƒä»¬ã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆ›å»ºä¸€ä¸ªå…è´¹å¸æˆ·</a> ï¼Œäº†è§£æœ‰å…³<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pantheonå·¥ä½œæµç¨‹çš„</a>æ›´å¤šä¿¡æ¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼Œ</a>æˆ–åœ¨pantheon.ioä¸Š<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ³¨å†Œæ¼”ç¤º</a> ã€‚ </p><br><h3 id="predpolozheniya"> å‡è®¾æ¡ä»¶ </h3><br><p>æˆ‘åœ¨Pantheonå’ŒGitLabä¸Šçš„é¡¹ç›®ç§°ä¸º<code>pantheon-gitlab-blog-demo</code> ã€‚ é¡¹ç›®çš„åç§°å¿…é¡»å”¯ä¸€ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä¸WordPressç½‘ç«™åˆä½œã€‚ æ‚¨å¯ä»¥é‡‡ç”¨Drupalï¼Œä½†éœ€è¦è¿›è¡Œä¸€äº›æ›´æ”¹ã€‚ </p><br><p> æˆ‘å°†ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Gitå‘½ä»¤è¡Œ</a> ï¼Œå¹¶ä¸”æ‚¨å¯ä»¥æ ¹æ®éœ€è¦åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GUIä¸­</a>å·¥ä½œã€‚ </p><br><h3 id="sozdaem-proekt"> å»ºç«‹ä¸“æ¡ˆ </h3><br><p> é¦–å…ˆï¼Œåˆ›å»º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸€ä¸ªGitLabé¡¹ç›®</a> ï¼ˆæˆ‘ä»¬å°†å›åˆ°è¯¥é¡¹ç›®ï¼‰ã€‚ </p><br><p> ç°åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨Pantheonä¸Šåˆ›å»ºä¸€ä¸ªWordPressç½‘ç«™</a> ã€‚ ç„¶åä¸ºä»ªè¡¨æ¿ç«™ç‚¹å®‰è£…WordPressã€‚ </p><br><blockquote> å¦‚æœæ‚¨çš„æ‰‹å‘ç—’ï¼Œè¯·è¿›è¡Œä¸€äº›æ›´æ”¹ï¼Œä¾‹å¦‚ï¼Œåˆ é™¤å¹¶æ·»åŠ æ’ä»¶ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚ è¯¥ç«™ç‚¹å°šæœªè¿æ¥åˆ°GitLabï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰ä»£ç æ›´æ”¹éƒ½é€šè¿‡GitLabã€‚ </blockquote><p> å½“æˆ‘ä»¬å®‰è£…WordPressæ—¶ï¼Œæˆ‘ä»¬å°†è¿”å›Pantheonç½‘ç«™ä»ªè¡¨æ¿å¹¶å°†å¼€å‘æ¨¡å¼æ›´æ”¹ä¸ºGitã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/up/zf/50/upzf50ocuma107rer9uxiybvjnc.png"></a> </p><br><h3 id="nachalnyy-kommit-na-gitlab">  GitLabåˆå§‹æäº¤ </h3><br><p> ç°åœ¨ï¼Œæ‚¨éœ€è¦å°†åˆå§‹çš„WordPressä»£ç ä»Pantheonç½‘ç«™è½¬ç§»åˆ°GitLabã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä»æœ¬åœ°çš„Pantheonç½‘ç«™çš„Gitå­˜å‚¨åº“ä¸­å…‹éš†ä»£ç ï¼Œç„¶åå°†å…¶å‘é€åˆ°GitLabå­˜å‚¨åº“ã€‚ </p><br><p> ä¸ºäº†ä½¿å…¶æ›´ç®€å•ï¼Œæ›´å®‰å…¨ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘ä»¬å°†SSHå¯†é’¥æ·»åŠ åˆ°Pantheonï¼Œ</a>å¹¶ä¸”åœ¨æ¯æ¬¡å…‹éš†Pantheon Gitå­˜å‚¨åº“æ—¶éƒ½ä¸ä¼šè¾“å…¥å¯†ç ã€‚ åŒæ—¶ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘ä»¬</a>å°†å‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitLabæ·»åŠ SSHå¯†é’¥</a> ã€‚ </p><br><p> ä¸ºæ­¤ï¼Œæˆ‘ä»¬é€šè¿‡å¤åˆ¶ç«™ç‚¹ä»ªè¡¨æ¿ä¸Šçš„â€œä½¿ç”¨Gitå…‹éš†â€å­—æ®µä¸­çš„å‘½ä»¤æ¥åœ¨æœ¬åœ°å…‹éš†Pantheonç«™ç‚¹ã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/em/qz/ga/emqzgamloafdlzbj3xp0ssrt2o0.png"></a> <br>  <em>å¦‚æœéœ€è¦å¸®åŠ©ï¼Œè¯·é˜…è¯»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pantheon</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Gitå…¥é—¨</a>æ–‡æ¡£ã€‚</em> </p><br><p> ç°åœ¨å°†<code>git remote origin</code>æ›´æ”¹ä¸ºæŒ‡å‘GitLabè€Œä¸æ˜¯Pantheonã€‚ è¿™å¯ä»¥é€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code> git remote</code></a>æ¥å®Œæˆã€‚ </p><br><p> è®©æˆ‘ä»¬è½¬åˆ°GitLabé¡¹ç›®ï¼Œç„¶åä»é¡¹ç›®è¯¦ç»†ä¿¡æ¯é¡µé¢ä¸Šçš„â€œå…‹éš†â€ä¸‹æ‹‰åˆ—è¡¨ä¸­å¤åˆ¶å­˜å‚¨åº“URLã€‚ æˆ‘ä»¬å·²ç»é€‰æ‹©äº†â€œä½¿ç”¨SSHå…‹éš†â€é€‰é¡¹ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»é…ç½®äº†SSHå¯†é’¥ã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/6m/4o/ea/6m4oeailmhmcggywg27uptq7aio.png"></a> </p><br><p> é»˜è®¤æƒ…å†µä¸‹ï¼Œä»£ç å­˜å‚¨åº“æœ¬åœ°å‰¯æœ¬çš„<code>git remote</code>æ˜¯<code>origin</code> ã€‚ å¯ä»¥ä½¿ç”¨<code>git remote set-url origin [URL  GitLab]</code>è¿›è¡Œæ›´æ”¹ï¼Œåœ¨è¿™é‡Œè¾“å…¥å®é™…URLä»£æ›¿æ‹¬å·ã€‚ </p><br><p> æœ€åï¼Œè¿è¡Œ<code>git push origin master --force</code>å°†æ‚¨çš„WordPressä»£ç ä»Pantheonæäº¤åˆ°GitLabã€‚ </p><br><blockquote>  â€“forceé€‰é¡¹ä»…éœ€è¦ä¸€æ¬¡ã€‚ ç„¶ååœ¨GitLabä¸Šçš„<code>git push</code>å‘½ä»¤ä¸­å°±ä¸ä¼šäº†ã€‚ </blockquote><br><h3 id="nastraivaem-uchetnye-dannye-i-peremennye"> é…ç½®å‡­è¯å’Œå˜é‡ </h3><br><p> è¿˜è®°å¾—æˆ‘ä»¬å¦‚ä½•åœ¨æœ¬åœ°æ·»åŠ SSHå¯†é’¥ä»¥ç™»å½•Pantheonå’ŒGitLabå—ï¼Ÿ  SSHä»¤ç‰Œå¯ç”¨äºæˆæƒGitLabå’ŒPantheonã€‚ </p><br><p>  GitLabæœ‰ä¸€äº›å¾ˆæ£’çš„æ–‡æ¡£ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹æœ‰å…³<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨GitLab CI / CDä¸Šä½¿ç”¨SSHå¯†é’¥çš„æ–‡æ¡£ä¸­æœ‰å…³ä½¿ç”¨Dockeræ‰§è¡Œç¨‹åºæ—¶SSHå¯†é’¥</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">éƒ¨åˆ†</a> ã€‚ </p><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å°†å®Œæˆå‰ä¸¤ä¸ªæ­¥éª¤ï¼š <em>ä½¿ç”¨ssh-keygenåœ¨æœ¬åœ°åˆ›å»ºä¸€å¯¹æ–°çš„SSHå¯†é’¥ï¼Œå¹¶å°†ç§é’¥ä½œä¸ºå˜é‡æ·»åŠ åˆ°é¡¹ç›®ä¸­</em> ã€‚ </p><br><p> ç„¶åï¼Œåœ¨é¡¹ç›®è®¾ç½®ä¸­å°†<code>SSH_PRIVATE_KEY</code>è®¾ç½®ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitLab CI / CDç¯å¢ƒå˜é‡</a> ã€‚ <br> åœ¨ç¬¬ä¸‰æ­¥å’Œç¬¬å››æ­¥ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª<code>.gitlab-ci.yml</code> ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š </p><br><pre> <code class="plaintext hljs">before_script: # See https://docs.gitlab.com/ee/ci/ssh_keys/README.html - eval $(ssh-agent -s) - echo "$SSH_PRIVATE_KEY" | tr -d '\r' | ssh-add - &gt; /dev/null - mkdir -p $HOME/.ssh &amp;&amp; echo "StrictHostKeyChecking no" &gt;&gt; "$HOME/.ssh/config" - git config --global user.email "$GITLAB_USER_EMAIL" - git config --global user.name "Gitlab CI"</code> </pre> <br><p> åœ¨æäº¤<code>.gitlab-ci.yml</code> ï¼Œéœ€è¦å‘å…¶æ·»åŠ å…¶ä»–å†…å®¹ã€‚ </p><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬æ‰§è¡Œç¬¬äº”æ­¥ï¼Œ <em>å¹¶å°†åœ¨</em>ç¬¬ä¸€æ­¥ä¸­<em>åˆ›å»ºçš„å…¬é’¥æ·»åŠ åˆ°æ„å»ºç¯å¢ƒä¸­éœ€è¦è®¿é—®çš„æœåŠ¡ä¸­</em> ã€‚ </p><br><p> åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬æƒ³ä»GitLabè®¿é—®Pantheonã€‚ è¯·æŒ‰ç…§Pantheonæ–‡æ¡£ä¸­çš„è¯´æ˜ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å°†SSHå¯†é’¥æ·»åŠ åˆ°Pantheonï¼Œ</a>ç„¶åå®Œæˆæ­¤æ­¥éª¤ã€‚ </p><br><blockquote> åˆ‡è®°ï¼šåœ¨GitLabä¸­å…³é—­SSHï¼Œåœ¨ä¸‡ç¥æ®¿ä¸­æ‰“å¼€ã€‚ </blockquote><p> è®¾ç½®æ›´å¤šçš„ç¯å¢ƒå˜é‡ã€‚ ç¬¬ä¸€ä¸ªç§°ä¸ºPANTHEON_SITEã€‚ å®ƒçš„å«ä¹‰æ˜¯è®¡ç®—æœºä¸Šä¸‡ç¥æ®¿ç«™ç‚¹çš„åç§°ã€‚ </p><br><p> è®¡ç®—æœºä¸Šçš„åç§°åœ¨â€œä½¿ç”¨Gitå…‹éš†â€å‘½ä»¤çš„æœ«å°¾æŒ‡ç¤ºã€‚ æ‚¨å·²ç»åœ¨æœ¬åœ°å…‹éš†äº†ç«™ç‚¹ï¼Œå› æ­¤è¿™å°†æ˜¯æœ¬åœ°å­˜å‚¨åº“ç›®å½•çš„åç§°ã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/rf/3p/gb/rf3pgbmo_2u0xsri8d1hq5f-xxw.png"></a> </p><br><p> æ¥ä¸‹æ¥ï¼Œè®¾ç½®<code>PANTHEON_GIT_URL</code>ç¯å¢ƒ<code>PANTHEON_GIT_URL</code> ã€‚ è¿™æ˜¯æˆ‘ä»¬å·²ç»ä½¿ç”¨çš„Pantheonç½‘ç«™çš„Gitå­˜å‚¨åº“URLã€‚ </p><br><blockquote> æˆ‘ä»¬ä»…è¾“å…¥SSHä¿¡æ¯åº“çš„URLï¼Œæœ€åæ²¡æœ‰<code>git clone</code>å’Œç«™ç‚¹åç§°ã€‚ </blockquote><p> å”·ã€‚ è¿™æ ·å°±å®Œæˆäº†ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å®Œæˆ<code>.gitlab-ci.yml</code> ã€‚ </p><br><h3 id="sozdaem-zadachu-deploya"> åˆ›å»ºéƒ¨ç½²ä»»åŠ¡ </h3><br><p> æˆ‘ä»¬æœ€åˆä½¿ç”¨GitLab CIæ‰€åšçš„å·¥ä½œä¸ä¹‹å‰ä½¿ç”¨Gitå­˜å‚¨åº“æ‰€åšçš„éå¸¸ç›¸ä¼¼ã€‚ ä½†æ˜¯è¿™ä¸€æ¬¡ï¼Œå°†Pantheonå­˜å‚¨åº“æ·»åŠ ä¸ºç¬¬äºŒä¸ªè¿œç¨‹Gitæºï¼Œç„¶åå°†ä»£ç ä»GitLabå‘é€åˆ°Pantheonã€‚ </p><br><p> ä¸ºæ­¤ï¼Œè¯·é…ç½®<code>deploy</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é˜¶æ®µ</a>å’Œ<code>deploy:dev</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»»åŠ¡</a> ï¼Œå› ä¸ºæˆ‘ä»¬å°†éƒ¨ç½²åˆ°Pantheonä¸Šçš„å¼€å‘ç¯å¢ƒã€‚ ç»“æœï¼Œ <code>.gitlab-ci.yml</code>å°†å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="plaintext hljs">stages: - deploy before_script: # See https://docs.gitlab.com/ee/ci/ssh_keys/README.html - eval $(ssh-agent -s) - echo "$SSH_PRIVATE_KEY" | tr -d '\r' | ssh-add - &gt; /dev/null - mkdir -p $HOME/.ssh &amp;&amp; echo "StrictHostKeyChecking no" &gt;&gt; "$HOME/.ssh/config" - git config --global user.email "$GITLAB_USER_EMAIL" - git config --global user.name "Gitlab CI" deploy:dev: stage: deploy environment: name: dev url: https://dev-$PANTHEON_SITE.pantheonsite.io/ script: - git remote add pantheon $PANTHEON_GIT_URL - git push pantheon master --force only: - master</code> </pre> <br><p> å˜é‡<code>SSH_PRIVATE_KEY, PANTHEON_SITE</code>å’Œ<code>PANTHEON_GIT_URL</code>åº”è¯¥çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰-æˆ‘ä»¬ä¹‹å‰å·²ç»è®¾ç½®äº†è¿™äº›ç¯å¢ƒå˜é‡ã€‚ ä½¿ç”¨è¿™äº›å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥å¤šæ¬¡ä½¿ç”¨<code>.gitlab-ci.yml</code>çš„å€¼ï¼Œå¹¶ä¸”åªéœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹æ›´æ–°å®ƒä»¬å³å¯ã€‚ </p><br><p> æœ€åï¼Œæ·»åŠ <code>.gitlab-ci.yml</code>å¹¶å°†å…¶<code>.gitlab-ci.yml</code>åˆ°GitLabã€‚ </p><br><h3 id="proveryaem-deploy"> æ£€æŸ¥éƒ¨ç½² </h3><br><p> å¦‚æœæˆ‘ä»¬åšå¯¹äº†æ‰€æœ‰äº‹æƒ…ï¼Œé‚£ä¹ˆ<code>deploy:dev</code>ä»»åŠ¡å°†åœ¨GitLab CI / CDä¸­æˆåŠŸå®Œæˆï¼Œå¹¶å°†<code>.gitlab-ci.yml</code>å‘é€ç»™Pantheonã€‚ è®©æˆ‘ä»¬çœ‹çœ‹ã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ex/pu/to/exputo8aihdn0sxv1aavrpa-rg4.png"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/2w/4_/zs/2w4_zszf0r6dxu8jvgo-ogfzzqi.png"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/6z/tk/ir/6ztkirsm-22bbcegra12_lyx3zg.png"></a> </p><br><h3 id="otpravlyaem-vetki-merzh-rekvestov-v-pantheon"> æˆ‘ä»¬å°†åˆå¹¶è¯·æ±‚çš„åˆ†æ”¯å‘é€åˆ°ä¸‡ç¥æ®¿ </h3><br><p> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æˆ‘æœ€å–œæ¬¢çš„PantheonåŠŸèƒ½<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-multidev</a> ï¼Œæ‚¨å¯ä»¥æ ¹æ®è¦æ±‚ä¸ºGitåˆ†æ”¯åˆ›å»ºå…¶ä»–Pantheonç¯å¢ƒã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯¹multidevçš„è®¿é—®å—åˆ°é™åˆ¶</a> ï¼Œå› æ­¤æ­¤éƒ¨åˆ†æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯é€‰çš„</a> ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæœ‰è®¿é—®æƒé™ï¼Œåˆ™å¯ä»¥é€šè¿‡ä»GitLabåˆå¹¶è¯·æ±‚åœ¨Pantheonä¸Šè®¾ç½®è‡ªåŠ¨åˆ›å»ºmultidevç¯å¢ƒæ¥ä¸¥é‡æé«˜ç”Ÿäº§ç‡ã€‚ </p><br><p> é¦–å…ˆï¼Œä½¿ç”¨<code>git checkout -b multidev-support</code>åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–°çš„Gitåˆ†æ”¯ã€‚ ç°åœ¨ï¼Œ <code>.gitlab-ci.yml</code>æŸäº›å†…å®¹å°†å†æ¬¡æ›´æ”¹ã€‚ </p><br><p> æˆ‘æƒ³åœ¨Pantheonç¯å¢ƒåç§°ä¸­æŒ‡å‡ºåˆå¹¶è¯·æ±‚ç¼–å·ã€‚ ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªåˆå¹¶è¯·æ±‚æ˜¯<code>mr-1</code> ï¼Œç¬¬äºŒä¸ªæ˜¯<code>mr-2</code> ï¼Œ <code>mr-2</code> ã€‚ </p><br><p> åˆå¹¶è¯·æ±‚æ­£åœ¨æ›´æ”¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åŠ¨æ€è¯†åˆ«Pantheonåˆ†æ”¯åç§°ã€‚ åœ¨GitLabä¸Šï¼Œè¿™å¾ˆç®€å•-æ‚¨éœ€è¦ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¢„å®šä¹‰çš„ç¯å¢ƒå˜é‡</a> ã€‚ </p><br><p> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>$CI_MERGE_REQUEST_IID</code>æ¥æŒ‡ç¤ºåˆå¹¶è¯·æ±‚å·ã€‚ è®©æˆ‘ä»¬å°†æ‰€æœ‰è¿™äº›ä¸ä¹‹å‰æŒ‡å®šçš„å…¨å±€ç¯å¢ƒå˜é‡ä¸€èµ·åº”ç”¨ï¼Œå¹¶åœ¨<code>.gitlab-ci.yml</code>æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°çš„deployï¼š <code>.gitlab-ci.yml</code>ä»»åŠ¡ã€‚ </p><br><pre> <code class="plaintext hljs">deploy:multidev: stage: deploy environment: name: multidev/mr-$CI_MERGE_REQUEST_IID url: https://mr-$CI_MERGE_REQUEST_IID-$PANTHEON_SITE.pantheonsite.io/ script: # Checkout the merge request source branch - git checkout $CI_COMMIT_REF_NAME # Add the Pantheon git repository as an additional remote - git remote add pantheon $PANTHEON_GIT_URL # Push the merge request source branch to Pantheon - git push pantheon $CI_COMMIT_REF_NAME:mr-$CI_MERGE_REQUEST_IID --force only: - merge_requests</code> </pre> <br><p> å®ƒå°†ç±»ä¼¼äºæˆ‘ä»¬çš„<code>deploy:dev</code>ä»»åŠ¡ï¼Œä»…å°†åˆ†æ”¯å‘é€ç»™Pantheonï¼Œè€Œä¸å‘é€ç»™<code>master</code> ã€‚ </p><br><p> æˆ‘ä»¬æ·»åŠ å¹¶æäº¤äº†æ›´æ–°çš„<code>.gitlab-ci.yml</code> ï¼Œç°åœ¨ä½¿ç”¨<code>git push -u origin multidev-support</code> <code>.gitlab-ci.yml</code>å°†æ–°åˆ†æ”¯å‘é€åˆ°GitLabã€‚ </p><br><p> ç°åœ¨ï¼Œé€šè¿‡å•å‡»<em>åˆ›å»ºåˆå¹¶è¯·æ±‚</em>ä»<code>multidev-support</code>åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„<em>åˆå¹¶è¯·æ±‚</em> ã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/bi/bv/gt/bibvgthkwykacqew-cswygjdmig.png"></a> </p><br><p> åˆ›å»ºåˆå¹¶è¯·æ±‚åï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•æ‰§è¡ŒCI / CD <code>deploy:multidev</code> ã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ck/ev/lq/ckevlqnrfbfanoj0dlmjt26wxpw.png"></a> </p><br><p> è¯·å‚é˜…-æ–°åˆ†æ”¯å·²å‘é€è‡³ä¸‡ç¥æ®¿ã€‚ ä½†æ˜¯ï¼Œå¦‚æœè½¬åˆ°Pantheonç½‘ç«™ä»ªè¡¨æ¿ä¸Šçš„multidevéƒ¨åˆ†ï¼Œåˆ™çœ‹ä¸åˆ°é‚£é‡Œçš„æ–°ç¯å¢ƒã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/yy/yy/bz/yyyybzmedtphnsj-6humcyu2hmu.png"></a> </p><br><p> çœ‹ä¸€ä¸‹â€œ Gitåˆ†æ”¯â€éƒ¨åˆ†ã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/hp/_o/bl/hp_obl6r7pv4ihuot7i6gx4rqwm.png"></a> </p><br><p> ç»“æœï¼Œæˆ‘ä»¬çš„<code>mr-1</code>åˆ†æ”¯åˆ°è¾¾äº†ä¸‡ç¥æ®¿ã€‚ ä»<code>mr-1</code>åˆ†æ”¯åˆ›å»ºç¯å¢ƒã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/2v/xg/ez/2vxgez9ugraihe2bdyn-5cxevjm.png"></a> </p><br><p> æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªmultidevç¯å¢ƒï¼Œç°åœ¨å›åˆ°GitLabå¹¶æŸ¥çœ‹<em>Operations&gt; Environments</em>éƒ¨åˆ†ã€‚ æˆ‘ä»¬å°†çœ‹åˆ°<code>dev</code>å’Œ<code>mr-1</code>æ¡ç›®ã€‚ </p><br><p> è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨CI / CDä»»åŠ¡ä¸­æ·»åŠ äº†ä¸€ä¸ªåä¸º<code>name</code>å’Œ<code>url</code>çš„<code>environment</code>æ¡ç›®ã€‚ å¦‚æœå•å‡»æ‰“å¼€ç¯å¢ƒå›¾æ ‡ï¼Œæˆ‘ä»¬å°†è½¬åˆ°Pantheon multidevç¯å¢ƒURLã€‚ </p><br><h3 id="avtomatiziruem-sozdanie-multidev"> è‡ªåŠ¨åˆ›å»ºmultidev </h3><br><p> åŸåˆ™ä¸Šï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œåœä¸‹æ¥ï¼Œåªè®°å¾—ä¸ºæ¯ä¸ªåˆå¹¶è¯·æ±‚åˆ›å»ºä¸€ä¸ªmultidevç¯å¢ƒï¼Œä½†æ˜¯æ­¤è¿‡ç¨‹å¯ä»¥è‡ªåŠ¨åŒ–ã€‚ </p><br><p>  Pantheonæœ‰ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Terminus</a>å‘½ä»¤è¡Œå·¥å…·ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­è‡ªåŠ¨ä½¿ç”¨å¹³å°ã€‚ åœ¨Terminusä¸­ï¼Œæ‚¨å¯ä»¥ä»å‘½ä»¤è¡Œåˆ›å»ºMultidevç¯å¢ƒï¼Œè¿™æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitLab CIçš„</a>ç†æƒ³é€‰æ‹©ã€‚ </p><br><p> æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„åˆå¹¶è¯·æ±‚æ¥å¯¹å…¶è¿›è¡Œæµ‹è¯•ã€‚ ä½¿ç”¨<code>git checkout -b auto-multidev-creation</code>åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ã€‚ </p><br><p> è¦åœ¨GitLab CI / CDä»»åŠ¡ä¸­ä½¿ç”¨Terminusï¼Œæ‚¨éœ€è¦åœ¨Terminusä¸­è¿›è¡Œèº«ä»½éªŒè¯çš„æœºå™¨ä»¤ç‰Œå’Œå¸¦æœ‰Terminusçš„å®¹å™¨æ˜ åƒã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆ›å»ºPantheonæœºå™¨ä»¤ç‰Œ</a> ï¼Œå°†å…¶ä¿å­˜åœ¨å®‰å…¨çš„åœ°æ–¹ï¼Œå¹¶å°†å…¶æ·»åŠ ä¸ºGitLabä¸­çš„å…¨å±€ç¯å¢ƒå˜é‡ï¼Œåç§°ä¸º<code>PANTHEON_MACHINE_TOKEN</code> ã€‚ </p><br><blockquote> å¦‚æœæ‚¨å¿˜è®°äº†å¦‚ä½•æ·»åŠ GitLabç¯å¢ƒå˜é‡ï¼Œè¯·å›åˆ°å®šä¹‰<code>PANTHEON_SITE</code> ã€‚ </blockquote><br><h3 id="sozdaem-dockerfile-s-terminus"> ç”¨Terminusåˆ›å»ºä¸€ä¸ªDockerfile </h3><br><p> å¦‚æœæ‚¨ä¸ä½¿ç”¨Dockeræˆ–ä¸å–œæ¬¢<code>Dockerfile</code> ï¼Œè¯·ä½¿ç”¨æˆ‘çš„<code>registry.gitlab.com/ataylorme/pantheon-gitlab-blog-demo:latest</code>å›¾åƒï¼Œå¹¶è·³è¿‡æ­¤éƒ¨åˆ†ã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitLabæœ‰ä¸€ä¸ªå®¹å™¨æ³¨å†Œè¡¨</a> ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­ä¸ºæˆ‘ä»¬çš„é¡¹ç›®æ„å»ºå’Œæ‰˜ç®¡Dockerfileã€‚ è®©æˆ‘ä»¬ç”¨Terminusåˆ›å»ºä¸€ä¸ªDockerfileä¸Pantheonä¸€èµ·ä½¿ç”¨ã€‚ </p><br><p>  Terminusæ˜¯PHPä¸­çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå› æ­¤è®©æˆ‘ä»¬ä»PHPæ˜ åƒå¼€å§‹ã€‚ æˆ‘é€šè¿‡Composerå®‰è£…Terminusï¼Œæ‰€ä»¥æˆ‘å°†ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®˜æ–¹çš„Docker Composeræ˜ åƒ</a>ä¸ºåŸºç¡€ã€‚ åœ¨æœ¬åœ°å­˜å‚¨åº“ç›®å½•ä¸­åˆ›å»ºå…·æœ‰ä»¥ä¸‹å†…å®¹çš„<code>Dockerfile</code> ï¼š </p><br><pre> <code class="plaintext hljs"># Use the official Composer image as a parent image FROM composer:1.8 # Update/upgrade apk RUN apk update RUN apk upgrade # Make the Terminus directory RUN mkdir -p /usr/local/share/terminus # Install Terminus 2.x with Composer RUN /usr/bin/env COMPOSER_BIN_DIR=/usr/local/bin composer -n --working-dir=/usr/local/share/terminus require pantheon-systems/terminus:"^2"</code> </pre> <br><p> è¯·éµå¾ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®¹å™¨æ³¨å†Œè¡¨æ–‡æ¡£ä¸­</a> â€œ <em>æ„å»ºå¹¶æ¨é€å›¾åƒâ€</em>éƒ¨åˆ†ä¸­æœ‰å…³ç»„è£…å’Œå‘é€å›¾åƒçš„è¯´æ˜ï¼Œä»¥ä»<code>Dockerfile</code>æ”¶é›†å›¾åƒå¹¶å°†å…¶å‘é€åˆ°GitLabã€‚ </p><br><p> åœ¨GitLabé¡¹ç›®ä¸­æ‰“å¼€â€œ <em>æ³¨å†Œè¡¨â€</em>éƒ¨åˆ†ã€‚ å¦‚æœä¸€åˆ‡æŒ‰è®¡åˆ’è¿›è¡Œï¼Œå°†æœ‰æˆ‘ä»¬çš„å½¢è±¡ã€‚ è®°å½•æŒ‡å‘å›¾åƒæ ‡ç­¾çš„é“¾æ¥<code>.gitlab-ci.yml</code>éœ€è¦å®ƒã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/_x/ta/yn/_xtayn5xz10hq5kuv7abvqvskgq.png"></a> </p><br><p>  <code>deploy:multidev</code>çš„<code>script</code>éƒ¨åˆ†å¼€å§‹å¢é•¿ï¼Œå› æ­¤è®©æˆ‘ä»¬å°†å…¶ç§»åŠ¨åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚ åˆ›å»ºä¸€ä¸ªæ–°çš„<code>private/multidev-deploy.sh:</code> </p><br><pre> <code class="plaintext hljs">#!/bin/bash # Store the mr- environment name export PANTHEON_ENV=mr-$CI_MERGE_REQUEST_IID # Authenticate with Terminus terminus auth:login --machine-token=$PANTHEON_MACHINE_TOKEN # Checkout the merge request source branch git checkout $CI_COMMIT_REF_NAME # Add the Pantheon Git repository as an additional remote git remote add pantheon $PANTHEON_GIT_URL # Push the merge request source branch to Pantheon git push pantheon $CI_COMMIT_REF_NAME:$PANTHEON_ENV --force # Create a function for determining if a multidev exists TERMINUS_DOES_MULTIDEV_EXIST() { # Stash a list of Pantheon multidev environments PANTHEON_MULTIDEV_LIST="$(terminus multidev:list ${PANTHEON_SITE} --format=list --field=id)" while read -r multiDev; do if [[ "${multiDev}" == "$1" ]] then return 0; fi done &lt;&lt;&lt; "$PANTHEON_MULTIDEV_LIST" return 1; } # If the mutltidev doesn't exist if ! TERMINUS_DOES_MULTIDEV_EXIST $PANTHEON_ENV then # Create it with Terminus echo "No multidev for $PANTHEON_ENV found, creating one..." terminus multidev:create $PANTHEON_SITE.dev $PANTHEON_ENV else echo "The multidev $PANTHEON_ENV already exists, skipping creating it..." fi</code> </pre> <br><p> è¯¥è„šæœ¬ä½äºç§æœ‰ç›®å½•ä¸­ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¹¶ä¸”ä¸æä¾›Pantheonä¸Šçš„Webè®¿é—®</a> ã€‚ æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨äºmultidevé€»è¾‘çš„è„šæœ¬ã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ›´æ–°<code>.gitlab-ci.yml</code>æ–‡ä»¶çš„<code>deploy:multidev</code> <code>.gitlab-ci.yml</code> <code>deploy:multidev</code>ä»¥è·å–æ­¤ä¿¡æ¯ï¼š </p><br><pre> <code class="plaintext hljs">deploy:multidev: stage: deploy environment: name: multidev/mr-$CI_MERGE_REQUEST_IID url: https://mr-$CI_MERGE_REQUEST_IID-$PANTHEON_SITE.pantheonsite.io/ script: # Run the multidev deploy script - "/bin/bash ./private/multidev-deploy.sh" only: - merge_requests</code> </pre> <br><p> æˆ‘ä»¬éœ€è¦ç¡®ä¿æˆ‘ä»¬çš„ä»»åŠ¡åœ¨åˆ›å»ºçš„è‡ªå®šä¹‰æ˜ åƒä¸­æ‰§è¡Œï¼Œå› æ­¤æˆ‘ä»¬åœ¨<code>.gitlab-ci.yml</code>æ·»åŠ å¸¦æœ‰æ³¨å†Œè¡¨URLçš„å®šä¹‰<code>image</code> ã€‚ ç»“æœï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä»¥ä¸‹<code>.gitlab-ci.yml</code> ï¼š </p><br><pre> <code class="plaintext hljs">image: registry.gitlab.com/ataylorme/pantheon-gitlab-blog-demo:latest stages: - deploy before_script: # See https://docs.gitlab.com/ee/ci/ssh_keys/README.html - eval $(ssh-agent -s) - echo "$SSH_PRIVATE_KEY" | tr -d '\r' | ssh-add - &gt; /dev/null - mkdir -p $HOME/.ssh &amp;&amp; echo "StrictHostKeyChecking no" &gt;&gt; "$HOME/.ssh/config" - git config --global user.email "$GITLAB_USER_EMAIL" - git config --global user.name "Gitlab CI" deploy:dev: stage: deploy environment: name: dev url: https://dev-$PANTHEON_SITE.pantheonsite.io/ script: - git remote add pantheon $PANTHEON_GIT_URL - git push pantheon master --force only: - master deploy:multidev: stage: deploy environment: name: multidev/mr-$CI_MERGE_REQUEST_IID url: https://mr-$CI_MERGE_REQUEST_IID-$PANTHEON_SITE.pantheonsite.io/ script: # Run the multidev deploy script - "/bin/bash ./private/multidev-deploy.sh" only: - merge_requests</code> </pre> <br><p> æ·»åŠ ï¼Œæäº¤å’Œå‘é€<code>private/multidev-deploy.sh</code> <code>.gitlab-ci.yml</code>å’Œ<code>.gitlab-ci.yml</code> ã€‚ ç°åœ¨å›åˆ°GitLabå¹¶ç­‰å¾…CI / CDä»»åŠ¡å®Œæˆã€‚ è¯·è€å¿ƒï¼šmultidevå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿã€‚ </p><br><p> ç„¶åæˆ‘ä»¬å»çœ‹ä¸‡ç¥æ®¿çš„multidevåˆ—è¡¨ã€‚ å“¦ï¼Œå¥‡è¿¹ï¼  multidev <code>mr-2</code>ç¯å¢ƒå·²ç»åœ¨è¿™é‡Œã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/webt/gx/jf/ab/gxjfabnawlvvtncrg268q7nwkiw.png"></a> </p><br><h3 id="zaklyuchenie"> ç»“è®º </h3><br><p> å½“æˆ‘ä»¬å¼€å§‹æ‰“å¼€åˆå¹¶è¯·æ±‚å¹¶è‡ªåŠ¨åˆ›å»ºç¯å¢ƒæ—¶ï¼Œæˆ‘çš„å›¢é˜Ÿè·å¾—äº†å¾ˆå¤šä¹è¶£ã€‚ </p><br><p> ä½¿ç”¨åŠŸèƒ½å¼ºå¤§çš„GitLabå’ŒPantheonå·¥å…·ï¼Œæ‚¨å¯ä»¥å°†GitLabè‡ªåŠ¨è¿æ¥åˆ°Pantheonã€‚ </p><br><p> ä¸€æ—¦æˆ‘ä»¬ä½¿ç”¨äº†GitLab CI / CDï¼Œæˆ‘ä»¬çš„å·¥ä½œæµç¨‹å°†åœ¨å“ªé‡Œå‘å±•ã€‚ è¿™é‡Œæœ‰ä¸€äº›å…¥é—¨æ€è·¯ï¼š </p><br><ul><li> æ·»åŠ ä¸€ä¸ªæ„å»ºæ­¥éª¤ã€‚ </li><li> æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ </li><li> æ·»åŠ ä»»åŠ¡ä»¥ç¡®ä¿ç¬¦åˆä»£ç æ ‡å‡†ã€‚ </li><li> æ·»åŠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŠ¨æ€åº”ç”¨ç¨‹åºå®‰å…¨æ€§æµ‹è¯•</a> ã€‚ </li></ul><br><p> å†™å‡ºæ‚¨å¯¹GitLabï¼Œä¸‡ç¥æ®¿å’Œè‡ªåŠ¨åŒ–çš„çœ‹æ³•ã€‚ </p><br><p>  PSæ‚¨æ˜¯å¦çŸ¥é“<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯ä»¥é€šè¿‡æ’ä»¶æ‰©å±•</a> Pantheonå‘½ä»¤è¡Œå·¥å…·Terminusï¼Ÿ </p><br><p> æˆ‘ä»¬åœ¨ä¸‡ç¥æ®¿ï¼ˆPantheonï¼‰åŠªåŠ›<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸ºæ”¯æŒ</a> GitLabçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Terminusæ„å»ºå·¥å…·å¼€å‘æ’ä»¶çš„ç¬¬äºŒ</a>ç‰ˆã€‚ å¦‚æœæ‚¨ä¸æƒ³ä¿®æ”¹æ¯ä¸ªé¡¹ç›®çš„è®¾ç½®ï¼Œè¯·å°è¯•ä½¿ç”¨æ­¤æ’ä»¶å¹¶å¸®åŠ©æˆ‘ä»¬æµ‹è¯•Beta v2ã€‚ å¯¹äºTerminus <code>build:project:create</code>å‘½ä»¤ï¼Œæ‚¨ä»…éœ€è¦Pantheonä»¤ç‰Œå’ŒGitLabä»¤ç‰Œã€‚ å¥¹å°†ä½¿ç”¨Composerå’Œè‡ªåŠ¨åŒ–æµ‹è¯•éƒ¨ç½²ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ï¼Œåœ¨æ–°çš„Pantheonç«™ç‚¹GitLabä¸­åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå¹¶ä½¿ç”¨ç¯å¢ƒå˜é‡å’ŒSSHå¯†é’¥å°†å®ƒä»¬è¿æ¥èµ·æ¥ã€‚ </p><br><h3 id="ob-avtore"> å…³äºä½œè€… </h3><br><p> å®‰å¾·é²Â·æ³°å‹’ï¼ˆAndrew Taylorï¼‰åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸‡ç¥æ®¿ï¼ˆPantheonï¼‰</a>åˆ›å»ºå¼€å‘äººå‘˜å·¥å…·ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN447966/">https://habr.com/ru/post/zh-CN447966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN447956/index.html">ITMOå¤§å­¦çš„é‡å­é€šä¿¡-ç‰¢ä¸å¯ç ´çš„æ•°æ®ä¼ è¾“ç³»ç»Ÿé¡¹ç›®</a></li>
<li><a href="../zh-CN447958/index.html">CJMç”¨äºé”™è¯¯è§¦å‘DrWebé˜²ç—…æ¯’</a></li>
<li><a href="../zh-CN447960/index.html">Elbrus OSä¸Šçš„Veeam Linuxå¤‡ä»½ã€‚ å¯¼å…¥æ›¿æ¢['ï¼Ÿ' | 'ã€‚' | 'ï¼']</a></li>
<li><a href="../zh-CN447962/index.html">é»‘å®¢å¯ä»¥ä½¿ç”¨è‡ªåŠ¨é©¾é©¶ä»ªç³»ç»Ÿè¿œç¨‹æ§åˆ¶Tesla Model S</a></li>
<li><a href="../zh-CN447964/index.html">ç‰©è”ç½‘å¾®æœºæµ‹è¯•</a></li>
<li><a href="../zh-CN447968/index.html">ç”¨Rust + CUDA Cç¼–å†™</a></li>
<li><a href="../zh-CN447970/index.html">è¶…çº§ç®€å•çš„Javascriptè®°å½•-ä¸¤ä¸ªè£…é¥°å™¨ï¼Œå¹¶å®Œæˆ</a></li>
<li><a href="../zh-CN447976/index.html">ç…§ç›¸ç¯çš„å¼€å‘å’Œç»„è£…</a></li>
<li><a href="../zh-CN447980/index.html">ä¸ºä»€ä¹ˆå¿…é¡»ä¸ºæ‚¨çš„ä¼ä¸šæŠ•èµ„å’Œå¼€å‘å“ç‰Œçš„å‡ºç§Ÿè½¦åº”ç”¨ç¨‹åºï¼Ÿ</a></li>
<li><a href="../zh-CN447982/index.html">æ‘˜è¦ï¼šæœ‰å…³å®¶åº­å½±é™¢å±å¹•å’ŒæŠ•å½±ä»ªçš„10ç§ææ–™</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>