<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úâÔ∏è üßû ‚óæÔ∏è Wie man den Code auf "Habr√©" richtig f√§rbt und warum es so schwierig ist üë©üèæ‚Äçüè´ üôáüèº üí´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor ein paar Monaten habe ich meinen ersten Beitrag auf Habr√© ver√∂ffentlicht. Vielleicht werden einige von Ihnen feststellen, dass der Code im Artikel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie man den Code auf "Habr√©" richtig f√§rbt und warum es so schwierig ist</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/custis/blog/472446/"><img src="https://habrastorage.org/webt/xg/ma/eu/xgmaeu4rba2fisi1m-lv2k5ggeo.jpeg"><br><br>  Vor ein paar Monaten habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">meinen ersten Beitrag</a> auf Habr√© ver√∂ffentlicht.  Vielleicht werden einige von Ihnen feststellen, dass der Code im Artikel auf ungew√∂hnliche Weise und vor allem korrekt gef√§rbt ist, obwohl der integrierte Texteditor auf der Website das urspr√ºngliche Markup des Codes nicht unterst√ºtzt und seine Elemente h√§ufig falsch hervorhebt.  Gleichzeitig wird der Code nicht in das Bild eingef√ºgt, wie es einige v√∂llig verzweifelte Schriftsteller tun. <br><br>  In meinem Fall war es besonders wichtig, das Markup beizubehalten, da der Artikel eine Beschreibung der Arbeit mit dem Code enthielt.  Um das Problem zu l√∂sen, habe ich ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tool erstellt</a> , mit dem Sie die Code-Hervorhebung im ausgew√§hlten Schema von IDEA auf einen Artikel √ºber Habr√© √ºbertragen k√∂nnen.  Ich werde √ºber den Prozess der Erstellung eines Tools und die Funktionen seiner Verwendung sprechen. <br><a name="habracut"></a><br><h2>  Warum das alles? </h2><br>  Auf den ersten Blick scheint es, dass dies aus Unfug geschieht, einfach weil die durch das <code>&lt;source&gt;</code> -Tag implementierte Standardbeleuchtung nicht passt. <br><br>  In gewisser Weise ist dies nat√ºrlich wahr, aber nicht ganz. <br><br>  Erstens kann die Hervorhebung in der <code>&lt;source&gt;</code> nicht mit Codeteilen funktionieren, da nicht gen√ºgend Informationen zum F√§rben vorhanden sind.  Alle au√üerhalb des Geltungsbereichs des St√ºcks deklarierten Elemente werden nach dem Zufallsprinzip gemalt.  Dieses Problem hat keine L√∂sung, da meines Wissens keiner der Dienste f√ºr Online-F√§rbung eine der folgenden Aktionen erm√∂glicht: <br><br><ol><li>  F√ºgen Sie den vollst√§ndigen Projektcode in den Artikel ein, ohne ihn vollst√§ndig anzuzeigen, oder f√ºgen Sie den Link zum Commit auf GitHub ein.  Verwenden Sie an bestimmten Stellen im Artikel Zeilenausschnitte aus dem vollst√§ndigen Code (mit einem Bereich).  In diesem Fall sollte die Hintergrundbeleuchtung nat√ºrlich anhand des vollst√§ndigen Codes bestimmt werden. </li><li>  Geben Sie explizite Metainformationen f√ºr undefinierte Elemente an.  Ein ziemlich schwieriger Weg f√ºr den Benutzer, aber ich w√ºrde so etwas zustimmen. </li></ol><br>  Zweitens entspricht die Hervorhebung in der <code>&lt;source&gt;</code> niemals der Anzahl der verschiedenen Elementtypen mit einer regul√§ren IDE.  Und aufgrund des oben beschriebenen Problems macht es keinen Sinn, erweiterte Farben zu erstellen: Niemand f√ºgt den vollst√§ndigen Projektcode in den Artikel ein, sodass diese Funktionalit√§t nicht funktioniert. <br><br>  Gleichzeitig ist die Realit√§t, dass Codeteile in Artikel eingef√ºgt werden m√ºssen, und je kleiner sie sind, desto besser. <br><br>  Sie k√∂nnen den Code lesen, ohne ihn hervorzuheben, aber warum. <br><br><h2>  Eigenschaften von Habr </h2><br>  IntelliJ IDEA bietet integrierte Unterst√ºtzung f√ºr den Export von Code nach HTML.  Durch regelm√§√üiges Kopieren des Codes wird in die Zwischenablage verschoben, einschlie√ülich farbigem Code, der als HTML gelesen werden kann. <br><br>  Leider erlaubt Habr die direkte Verwendung von HTML-Markups in Artikeln nicht.  Die Gr√ºnde daf√ºr sind ein R√§tsel, das in der Dunkelheit verborgen ist, aber vielleicht liegt dies an der Vereinheitlichung des Erscheinungsbilds der Artikel.  Wenn Sie die Verwendung von HTML in Artikeln zulassen, k√∂nnen Sie dies nachholen, sodass Probleme beim Anzeigen auftreten. <br><br>  Ich unterst√ºtze im Allgemeinen die Idee, HTML in Artikeln zu verbieten, aber es gibt eine Einschr√§nkung.  Eine Ressource f√ºr IT-Experten, in der Code h√§ufig diskutiert wird und es keine M√∂glichkeit gibt, ihn korrekt in einen Artikel einzuf√ºgen, ist irgendwie seltsam. <br><br>  Wir haben also die Tags <code>&lt;b&gt;</code> , <code>&lt;i&gt;</code> , <code>&lt;font&gt;</code> .  Dar√ºber hinaus funktioniert dies alles innerhalb des <code>&lt;code&gt;</code> , das f√ºr die Formatierung ben√∂tigt wird.  Nun, <code>&amp;nbsp</code> <code>;</code>  Sie haben uns auch gerettet, was f√ºr lange Codezeilen und Einr√ºckungen n√ºtzlich ist. <br><br>  Es ist unn√∂tig zu erw√§hnen, dass alle Standardmethoden zum Abrufen von HTML-Code von IDEA √ºberhaupt kein solches HTML enthalten, sodass die Konvertierungsarbeit ziemlich umfangreich sein wird. <br><br><h2>  Der Ansatz </h2><br>  Zun√§chst lohnt es sich, dem Autor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">capslocky</a> f√ºr sein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Material</a> zu diesem Thema zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">danken</a> .  Ich habe das im Artikel vorgeschlagene Tool nicht direkt verwendet, und es w√§re kaum passiert, aber dank dieses Materials habe ich die gesamte Tiefe des Problems verstanden und gleichzeitig den Wind der Hoffnung gesp√ºrt. <br><br>  Das einzige Minus dieser Ver√∂ffentlichung ist die gro√üe Menge an Code, kombiniert mit einer sehr mageren Erkl√§rung dessen, was es tut und warum. <br><br>  Ich werde versuchen, die Situation zu korrigieren und zu beschreiben, was Sie mit Ihrem HTML-Markup tun m√ºssen, wenn Sie es in ein Formular bringen m√∂chten, das zum Einf√ºgen in Habr bereit ist. <br><br><ol><li>  Vor dem Export m√ºssen Sie das gew√ºnschte Farbschema in IDEA festlegen, z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf der Website</a> f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Farbthemen</a> .  Der Code wird mit dem ausgew√§hlten Schema exportiert.  Es ist besser, ein Schema mit wei√üem Hintergrund (da der Hintergrund auf dem Habr√© nicht eingestellt werden kann) und ohne Unterstreichung zu w√§hlen.  Ich habe nicht daran gedacht, wie einfach es ist, sie zu ziehen, weil ich es nicht wirklich wollte. </li><li>  Wir arbeiten nur mit den Interna des <code>&lt;pre&gt;</code> .  Selbst wenn Sie den Export nicht aus IDEA, sondern aus einem anderen verwenden, wird dieses Tag wahrscheinlich im HTML-Markup enthalten sein, da es ohne es schwierig ist, den Code korrekt zu formatieren.  Das Tag selbst wird entfernt und durch <code>&lt;code&gt;</code> . </li><li>  Der Text wird h√∂chstwahrscheinlich als <code>&lt;span&gt;</code> mit verschiedenen Stilen dargestellt.  Sie m√ºssen alle loswerden.  Viele Maldienste bringen Stile in ein Stylesheet, was logisch ist, und verwenden Links zu Stilnamen.  Insbesondere macht IDEA dies noch nicht, was die Aufgabe etwas erleichtert (Stileinstellungen liegen direkt im <code>&lt;span&gt;</code> ). </li><li>  Stellen Sie die Schriftfarbe √ºber das <code>&lt;font&gt;</code> .  Leider kann die Hintergrundfarbe nicht eingestellt werden. </li><li>  Wir verwandeln die Eigenschaft <code>font-style:italic</code> in ein Paar von <code>&lt;i&gt;</code> <code>&lt;/i&gt;</code> -Tags und <code>font-weight:bold</code> in <code>&lt;b&gt;</code> <code>&lt;/b&gt;</code> . </li><li>  Ersetzen Sie alle Leerzeichen durch <code>&amp;nbsp</code> <code>;</code>  . </li><li>  Zeilenumbr√ºche in Form von <code>&lt;br&gt;</code> durch <code>\n</code> . </li><li>  HTML-Markup in IDEA erzeugt Leerzeilen mit Stilen und Leerzeichen aus Leerzeichen mit Stilen.  Es ist besser, solche Stile wegzuwerfen: Dies verringert die L√§nge erheblich und erh√∂ht die Verst√§ndlichkeit des Codes. </li><li>  Stellen Sie sicher, dass Zeilenvorsch√ºbe keinen Stil haben.  Andernfalls treten Probleme mit Leerzeilen auf. </li></ol><br>  Der letzte Absatz wird durch ein Beispiel veranschaulicht: <br><br> <code>&lt;code&gt;</code> <br>  <code>1</code> <code>&lt;font color="000000"&gt;</code> <br>  <code>&lt;/font&gt;</code> <code>2</code> <br> <code>&lt;/code&gt;</code> <br> <br>  Der angegebene Code wird von "Habr" in <code>12</code> .  Gleiches gilt f√ºr die Tags <code>&lt;b&gt;</code> und <code>&lt;i&gt;</code> sowie f√ºr jede Kombination davon.  Zeilenumbr√ºche sollten keinen Stil haben, und dann ist alles in Ordnung. <br><br><h2>  Implementierung </h2><br>  Die Aufgabe, einen Konverter f√ºr beliebigen HTML-Code zu schreiben, erschien mir zun√§chst ziemlich kompliziert.  Wenn Sie sich jedoch f√ºr eine bestimmte HTML-Version entscheiden, ist nicht alles so schlecht.  Ich habe es geschafft, alles auf reinem RegExp zu machen, das hei√üt, auch ohne HTML-Analyse.  Das Hauptproblem bestand darin, die Merkmale des Markups "Habr" zu identifizieren. <br><br>  Damit Zeilenvorsch√ºbe keine Stile hatten, musste ich ziemlich knifflige Ersetzungen vornehmen, die wahrscheinlich am unverst√§ndlichsten sind (siehe die Funktion popupBr).  Die Idee ist, dass die Tags <code>&lt;br&gt;</code> nach jedem Austausch aus der Tiefe der Formatierungs-Tags nach au√üen "auftauchen".  Daher ist das Tag <code>&lt;br&gt;</code> nach allen Ersetzungen nicht mehr formatiert. <br><br>  Dar√ºber hinaus stellte sich heraus, dass IDEA nicht nur Rich Text in die Zwischenablage <code>application/x-java-jvm-local-objectref</code> , sondern auch ziemlich knifflige Objekte wie <code>application/x-java-jvm-local-objectref</code> .  Das Problem ist, dass das Vorhandensein solcher Objekte in der Zwischenablage zu dauerhaften Fehlern in meiner Konsole beim Erstellen von DataFlavor f√ºhrt.  Leider k√∂nnen Sie nichts tun: JDK funktioniert nur mit der Zwischenablage.  F√ºr mich war die Entdeckung eines <a href="">solchen Codes</a> eine Entdeckung.  Anscheinend glauben die klugen Onkel, die dies geschrieben haben, dass es funktionieren wird.  Haben Sie im Allgemeinen keine Angst vor Fehlern, die bei der Arbeit mit dem Werkzeug auftreten k√∂nnen. <br><br>  Das Projekt ist in Kotlin geschrieben und lebt auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> . <br><br><p>  Verbesserungsvorschl√§ge sind willkommen!  Zum Beispiel w√§re es sch√∂n, dieses Tool als Plugin f√ºr IDEA zu entwerfen.  Ich habe noch keinen einfachen Weg gefunden, dies zu tun: Die Quellen des Plugins "Als HTML kopieren" sind leider geschlossen, und es dauert zu lange, um herauszufinden, wie man ein solches Plugin von Grund auf neu schreibt. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472446/">https://habr.com/ru/post/de472446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472434/index.html">Aktualisieren Sie Ihre Releases</a></li>
<li><a href="../de472438/index.html">Verwendung von Proxys in der Informationssicherheit: 6 praktische Anwendungsf√§lle</a></li>
<li><a href="../de472440/index.html">Ein Tag bei Joker 2019</a></li>
<li><a href="../de472442/index.html">Die Situation: Alle reden √ºber die R√ºckkehr vergessener Audioformate - warum sie dazu bestimmt sind, eine Nische zu bleiben</a></li>
<li><a href="../de472444/index.html">Die besten Produkte gehen von echten Problemen aus: Gegensprechanlage √ºber zu erledigende Jobs. Teil 3 endg√ºltig</a></li>
<li><a href="../de472448/index.html">Themen der Frontend-Sektion bei DUMP Kazan: ML f√ºr einen Front-End-Entwickler, Pixel Magic, SvelteJS, Lachen, Schwei√ü und Tr√§nen</a></li>
<li><a href="../de472452/index.html">Wie f√ºge ich Unterst√ºtzung f√ºr die Nachfrist (Billing Grace Period) in der iOS-Anwendung hinzu?</a></li>
<li><a href="../de472454/index.html">√úbersicht √ºber g√ºnstige VPS-Server</a></li>
<li><a href="../de472462/index.html">iFest in Nischni Nowgorod: IT ist beeindruckend</a></li>
<li><a href="../de472464/index.html">5 M√∂glichkeiten, einen Python-Server auf einem Raspberry Pi zu erstellen Teil 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>