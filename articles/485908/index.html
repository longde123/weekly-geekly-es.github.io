<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßïüèø üöï üßôüèΩ Gracias a la sorprendente falla en Ocarina of Time, fue posible agregar modelos de Star Fox 64 üë®üèº‚Äçü§ù‚Äçüë®üèª üë©üèæ‚Äç‚öñÔ∏è ü§≤üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A lo largo de los a√±os de escribir art√≠culos sobre juegos, habl√© sobre muchos problemas t√©cnicos sorprendentes , c√≥digos desconocidos durante mucho ti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gracias a la sorprendente falla en Ocarina of Time, fue posible agregar modelos de Star Fox 64</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485908/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/57c/4bb/e19/57c4bbe1942225f6f87df254b77ca7de.jpg" alt="imagen"></div><br>  A lo largo de los a√±os de escribir art√≠culos sobre juegos, habl√© sobre muchos <a href="https://arstechnica.com/gaming/2019/02/after-glitch-grants-access-bethesda-says-locked-fallout-76-vault-will-open/">problemas t√©cnicos sorprendentes</a> , <a href="https://arstechnica.com/gaming/2016/02/decades-later-players-are-still-unlocking-secrets-in-classic-mortal-kombat/">c√≥digos desconocidos durante mucho tiempo</a> , <a href="https://arstechnica.com/gaming/2014/01/how-an-emulator-fueled-robot-reprogrammed-super-mario-world-on-the-fly/">trucos con la ejecuci√≥n de c√≥digo arbitrario</a> y <a href="https://arstechnica.com/gaming/2017/09/searching-for-the-hidden-motion-to-unlock-the-switchs-nes-emulator/">b√∫squedas de contenido profundamente oculto</a> dentro de juegos y equipos cl√°sicos.  Pero nada podr√≠a prepararme para <a href="https://www.twitch.tv/zfg1/clip/StylishTallYogurtYee%3Ffilter%3Dclips%26amp%3Brange%3D7d%26amp%3Bsort%3Dtime">este video de Twitch</a> en el que una flota de Arwing volador de <em>Star Fox 64</em> invade el mundo de <em>Ocarina of Time</em> para atacar a Link. <br><br>  Esperas ver tal escena solo en una caricatura creada por un fan√°tico o en un truco de ROM que a Nintendo <a href="https://arstechnica.com/gaming/2016/12/nintendo-sends-cease-and-desist-notice-to-pokemon-rom-hacker/">le encanta tomar de Internet</a> .  Pero lo m√°s sorprendente de este video es que muestra una versi√≥n no modificada de la ROM japonesa original <em>Ocarina of Time</em> usando la consola est√°ndar y los controladores N64. <br><br>  Toda la ma√±ana descubr√≠ c√≥mo esto es posible.  Para explicar esto, tendr√°s que profundizar en el n√∫cleo de las instrucciones del lenguaje de m√°quina de Nintendo 64, <em>la</em> gesti√≥n de memoria <em>Ocarina of Time</em> y el proceso de desarrollo del juego de mediados de los 90.  Si eres tan curioso como yo, √∫nete a nosotros. <br><a name="habracut"></a><br><h2>  Enlaces obsoletos y c√≥digo nuevo </h2><br>  Este sorprendente pasaje comenz√≥ con el descubrimiento de un problema t√©cnico importante en octubre del a√±o pasado: el jugador Glitches0and0stuff usando emuladores y un estudio cuidadoso de las √°reas de memoria de Nintendo 64 <a href="https://www.youtube.com/watch%3Fv%3DFX_1u7JaYLc">descubrieron una forma de manipular enlaces obsoletos</a> en <em>Ocarina of Time</em> . <br><br>  De hecho, la falla es que el jugador recoge el elemento y luego enga√±a al juego para descargarlo directamente de las manos de Link cuando cruza el umbral de una nueva ubicaci√≥n de carga (por ejemplo, la habitaci√≥n de al lado).  En esta etapa, el juego libera el √°rea de memoria ocupada por este elemento para que pueda usarse para otros objetos en el juego durante su carga.  Pero al mismo tiempo, el juego piensa que Link est√° sosteniendo <em>algo</em> , por lo que contin√∫a actualizando el puntero al "enlace desactualizado" en la memoria liberada, escribiendo datos que representan la posici√≥n y el √°ngulo de un objeto inexistente.  Con una manipulaci√≥n cuidadosa, este puntero se puede utilizar para "corromper" los datos del objeto reci√©n cargado con valores arbitrarios. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/246/283/c4e/246283c4ea2d7a7e728215345d8006be.png"></div><br>  <i>Los luchadores espaciales no pueden compararse con Link.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c17/551/016/c175510164f143b6eff520c137a01d09.png"></div><br>  <i>Arwing de <em>Star Fox 64</em> puede recibir da√±o y disparar a Link porque siempre est√°n en el juego.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/57c/4bb/e19/57c4bbe1942225f6f87df254b77ca7de.jpg"></div><br>  <i>Apuntar con el bot√≥n Z facilita apuntar un boomerang en la parte inferior del Arwing.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abc/30b/e25/abc30be25dd61c7ed1890738c44270dc.png"></div><br>  <i>El enlace contiene un objeto "vac√≠o": la preparaci√≥n para la falla se realiza con la ejecuci√≥n de c√≥digo arbitrario.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/284/b1c/9a5/284b1c9a5fe7b372b0343e6dc6f01424.png"></div><br>  <i>La parte m√°s importante de la t√©cnica es congelar la c√°mara en la posici√≥n de falla.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d5/0f2/8bf/5d50f28bfc957af49c3c292e6c526dab.png"></div><br>  <i>Un dispositivo para mantener los botones / posiciones necesarios del joystick anal√≥gico del controlador 3 para ir directamente a los t√≠tulos.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c80/dd9/ad9/c80dd9ad93f3e8a357bbee17f42f4e61.png"></div><br>  <i>Despu√©s de diez minutos de ingresar el nombre del archivo, el c√≥digo Arwing est√° listo para descargar</i> <br><br>  Inicialmente, este truco se us√≥ simplemente para "estropear" el juego, por ejemplo, para <a href="https://www.youtube.com/watch%3Fv%3DFX_1u7JaYLc">cargar nuevos elementos en cofres del tesoro</a> o para cambiar las posiciones de otros elementos dentro de la habitaci√≥n (como se <a href="https://www.youtube.com/watch%3Fv%3D_7E4dFD8Bmw">explica en detalle aqu√≠</a> ).  Sin embargo, despu√©s de un tiempo, los jugadores descubrieron que se puede usar el mismo m√©todo para <a href="https://www.youtube.com/watch%3Fv%3DRoEmGCNsbno">modificar los c√≥digos de salto individuales del ensamblador</a> , dici√©ndole al juego d√≥nde debe buscar la siguiente instrucci√≥n al realizar ciertos eventos del juego. <br><br>  Despu√©s de insertar el c√≥digo deseado de esta manera, puede forzar al juego a ir al √°rea de memoria que contiene los √∫ltimos valores de rotaci√≥n conocidos para las tirachinas X e Y.  Si <em>estos</em> valores se especifican exactamente, se interpretar√°n como <em>otro</em> c√≥digo de salto que ejecuta una transici√≥n al √°rea de memoria donde se almacena el nombre del archivo actual.  Luego, este nombre de archivo se interpretar√° como un c√≥digo de m√°quina N64 normal, por lo que el jugador puede moverse r√°pidamente a cualquier lugar del juego que necesite (por supuesto, si convierte correctamente los caracteres binarios del nombre del archivo a los <a href="https://www.zophar.net/documents/n64/n64-opcodes-list.html">c√≥digos de operaci√≥n correspondientes</a> ). <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_7E4dFD8Bmw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Explicaci√≥n de falla con un enlace desactualizado que se us√≥ originalmente para reemplazar elementos en cofres.</i> <br><br>  El primer ejemplo serio de usar esta manipulaci√≥n con c√≥digos de transici√≥n fue <a href="https://www.youtube.com/watch%3Fv%3DwdRJWDKb5Bo">cargar la escena del juego con subt√≠tulos</a> .  Por lo tanto, el jugador estableci√≥ un <a href="https://www.thegamer.com/ocarina-of-time-new-speedrun-record/">nuevo r√©cord mundial para el speedran del juego en la categor√≠a "Cualquier%"</a> .  Para hacer esto r√°pidamente en el √°rea inicial del juego, debes usar otros problemas t√©cnicos, incluido <a href="https://www.zeldaspeedruns.com/oot/misc/walking-while-talking">el problema t√©cnico de la c√°mara "caminar durante la conversaci√≥n"</a> , que te permite cargar y descargar piedras en el momento y lugares perfectos.  Adem√°s, para esto, debe mantener ciertos botones y posiciones del joystick anal√≥gico de los controles conectados al primer y tercer puerto de Nintendo 64 para que sus se√±ales se interpreten como un c√≥digo de ubicaci√≥n de escena con subt√≠tulos. <br><br><h2>  Desbloquear Arwing </h2><br>  El m√©todo descrito anteriormente es bastante bueno si solo quieres ir a la escena.  Pero tiene una seria limitaci√≥n: el sistema de archivos <em>Ocarina of Time</em> est√° limitado a ocho caracteres, es decir, el nombre del archivo solo se puede convertir en un par de instrucciones de c√≥digo de m√°quina.  Afortunadamente, estos dos espacios de instrucciones tambi√©n se pueden utilizar para eliminar pr√°cticamente el l√≠mite de caracteres. <br><br>  Esto se hace de una manera extremadamente confusa, descrita en detalle en <a href="https://pastebin.com/29hHtupt">este Pastebin</a> y <a href="https://www.youtube.com/watch%3Fv%3DwIyEUScOMxc">este video</a> .  Baste decir que usa el m√©todo descrito anteriormente tres veces, que elimina las verificaciones importantes del indicador de posici√≥n del nombre de archivo, y luego establece este puntero en un valor de posici√≥n negativo. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/RoEmGCNsbno" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Explicaci√≥n detallada de la ejecuci√≥n de c√≥digo arbitrario en <em>Ocarina of Time</em></i> <br><br>  Como resultado, los jugadores tienen la oportunidad de ingresar un c√≥digo de cientos de caracteres, lo que les permite precargar secuencias de instrucciones de m√°quina mucho m√°s complejas para implementar el m√©todo de transici√≥n de c√≥digo descrito anteriormente.  Pero esto a√∫n no es suficiente para codificar los gr√°ficos, las animaciones y la l√≥gica de juego necesarios para atacar a Arwing.  Afortunadamente, Nintendo nos ayud√≥ mucho al ocultar convenientemente todo este c√≥digo Arwing en el fondo de todos los cartuchos <em>de Ocarina of Time</em> . <br><br>  Por qu√©  El dise√±ador gr√°fico y de personajes Satoru Takizawa <a href="http://iwataasks.nintendo.com/interviews/">le dijo a Iwata Asks en una entrevista de 2011</a> que era solo una forma de reutilizar el c√≥digo para mover a uno de los enemigos en <em>Zelda</em> : <br><br><blockquote>  <a href="https://zelda.gamepedia.com/Volvagia">Volvagia</a> es un drag√≥n, por lo que se mueve y se mueve en oleadas.  Acabo de entregarle al programador jefe Kazuaki Morita partes del modelo de drag√≥n, e inmediatamente lo puso en movimiento.  Para m√≠ fue un misterio c√≥mo tuvo √©xito ... as√≠ que no pude resistir no preguntarle.  √âl respondi√≥ que era lo mismo que programar para <em>Star Fox 64</em> .  Hay una escena en este juego en la que otro luchador cuelga de la cola de Arwing, y los movimientos de vuelo del luchador son exactamente los mismos que los de Volvagia.  Me sorprendi√≥, fue un verdadero milagro para m√≠. </blockquote><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/H10Tl3sTpWM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Un video de 2007 que muestra a Arwing volando sobre el bosque de Kokiri (se utilizan c√≥digos y emulador de GameShark).</i> <br><br>  Despu√©s de copiar las animaciones necesarias para Volvagia, Morita parece haber dejado todo el bloque de c√≥digo Arwing en los datos basura del juego.  Hace muchos a√±os, <a href="https://tcrf.net/Notes:The_Legend_of_Zelda:_Ocarina_of_Time">los investigadores de datos</a> aprendieron sobre esto.  Y <a href="https://www.engadget.com/2005/10/05/hidden-star-fox-arwing-in-ocarina-of-time/">durante m√°s de una d√©cada, los</a> jugadores han sabido c√≥mo acceder a estas partes ocultas del c√≥digo utilizando <a href="http://www.eeggs.com/items/46440.html">dispositivos trampa como GameShark</a> , que cambian los valores en la memoria para reemplazar a los enemigos con Arwing. <br><br>  Pero gracias a los trucos con las manipulaciones de memoria descritos en el art√≠culo, ya no se necesita un dispositivo de trampa externo.  El 23 de enero, el reproductor ZFG1 <a href="https://www.twitch.tv/zfg1/clip/StylishTallYogurtYee%3Ffilter%3Dclips%26amp%3Brange%3D7d%26amp%3Bsort%3Dtime">demostr√≥ esto de una vez por todas</a> cargando Arwing usando la ROM Zelda no modificada y la consola Nintendo 64 est√°ndar en una transmisi√≥n de Twitch.  El resultado fue un juego en el que Arwing reemplaz√≥ todas las puertas, volando alrededor de Ling, atac√°ndolo con disparos da√±inos de blasters e incluso cayendo al suelo cuando se derrib√≥. <br><br>  La preparaci√≥n para grabar este clip <a href="https://www.twitch.tv/videos/540663120%3Ft%3D2h11m15s">tom√≥ m√°s de una hora</a> , durante la cual se crearon tres ciclos de ejecuci√≥n de c√≥digo arbitrario y en 10 minutos se ingres√≥ minuciosamente el nombre del archivo para cargar Arwing.  Pero al mismo tiempo, este clip fue la culminaci√≥n de meses y a√±os de trabajo de una comunidad obsesionada con el deseo de comprender y dominar completamente el juego cl√°sico y sus problemas t√©cnicos. <br><br>  Adem√°s del valor de entretenimiento, el clip "Arwings in Zelda" demostr√≥ que la comunidad, un grupo de especialistas en computaci√≥n, con suficiente tiempo y esfuerzo, puede hacer cosas incre√≠bles con equipos y software de juegos cl√°sicos. </div></div><p>Source: <a href="https://habr.com/ru/post/485908/">https://habr.com/ru/post/485908/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../485888/index.html">Falsificaci√≥n de solicitud de servidor, operaci√≥n SSRF ciega</a></li>
<li><a href="../485892/index.html">El fin de la era del Tridente</a></li>
<li><a href="../485896/index.html">Base de datos paralela masiva Greenplum: un breve programa educativo</a></li>
<li><a href="../485898/index.html">Exporte Google Forms + descargue Google Script a trav√©s de REST API (Python)</a></li>
<li><a href="../485904/index.html">Meetup de prueba de carga en Raiffeisenbank</a></li>
<li><a href="../485910/index.html">Implementaci√≥n de API con AWS Elastic Beanstalk</a></li>
<li><a href="../485912/index.html">Por qu√© translit en los nombres es malo y otras caracter√≠sticas interesantes de nuestra percepci√≥n del c√≥digo</a></li>
<li><a href="../485914/index.html">Desarrollado por ZeroTier. Una gu√≠a pr√°ctica para construir redes virtuales. Parte 1</a></li>
<li><a href="../485916/index.html">Eliminar innecesaria [borrar la programaci√≥n de innecesaria]</a></li>
<li><a href="../485918/index.html">Los navegadores independientes ya no son competitivos.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>