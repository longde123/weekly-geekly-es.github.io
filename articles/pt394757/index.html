<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôà üí± ‚óªÔ∏è Desenvolvendo dispositivos IoT usando Bluetooth LE üé¶ üéµ üë©üèΩ‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A tecnologia Bluetooth est√° quebrando energicamente seu lugar na Internet das coisas. Alguma desta tecnologia, conhecida como o Bluetooth LE  ( o Blue...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desenvolvendo dispositivos IoT usando Bluetooth LE</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/394757/"><a href=""><div style="text-align:center;"><img width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/054/28f/426/05428f4260bd302f20e5a277359c591e.png"></div></a> <br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
tecnologia </font><b><font style="vertical-align: inherit;">Bluetooth</font></b><font style="vertical-align: inherit;"> est√° </font><font style="vertical-align: inherit;">quebrando energicamente seu lugar na Internet das coisas. Alguma desta tecnologia, conhecida como </font></font><font color="#C00000"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o Bluetooth </font></font></b><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LE</font></font></font> </font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o Bluetooth A baixa energia</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , √© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o Bluetooth Smart</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aka </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) diretamente se posicionou como a escolha ideal para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a Internet das coisas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">da Internet das coisas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Dif√≠cil de discordar. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> j√° sabe como direcionar o tr√°fego da Internet, determinar coordenadas nas salas, conectar controladores l√≥gicos program√°veis ‚Äã‚Äãindustriais, dar suporte a </font><font style="vertical-align: inherit;">servidores </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WEB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , conectar balan√ßas, term√¥metros, monitores de freq√º√™ncia card√≠aca, ox√≠metros, monitores de press√£o arterial e muitas outras coisas. C </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ble</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Muitos problemas inerentes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√†s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solu√ß√µes </font><b><font style="vertical-align: inherit;">Wi-Fi</font></b><font style="vertical-align: inherit;"> s√£o resolvidos automaticamente </font><font style="vertical-align: inherit;">. N√£o muito antes do momento em que os dispositivos com </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> podem ser organizados na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rede MESH</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , usando uma tecnologia semelhante ao </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZigBee</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Isso j√° est√° refletido na especifica√ß√£o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth 5.0.</font></font></b><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, ao desenvolver meu </font><font style="vertical-align: inherit;">m√≥dulo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IoT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , preferi incondicionalmente o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em vez de usar o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-Fi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Considerarei a </font><font style="vertical-align: inherit;">parte perif√©rica da rede </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usando o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√≥dulo de depura√ß√£o </font><b><font style="vertical-align: inherit;">K66BLEZ</font></b><font style="vertical-align: inherit;"> como </font><b><font style="vertical-align: inherit;">exemplo</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, eu gostaria de descrever minha rota de desenvolvimento, da quase completa ignor√¢ncia do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† produ√ß√£o em s√©rie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A familiaridade com o m√≥dulo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K66BLEZ1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> foi iniciada nestes artigos:</font></font><br>
<blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     .  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     .  FatFs</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     .  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O m√≥dulo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K66BLEZ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usa o chip </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">MKW40Z160</font></a><font style="vertical-align: inherit;"> ( </font><b><i><font style="vertical-align: inherit;">Cortex-M0 + 48 MHz, Flash de 160 KB, RAM de 20 KB</font></i></b><font style="vertical-align: inherit;"> ) produzido pelo </font><b><font style="vertical-align: inherit;">NXP</font></b><font style="vertical-align: inherit;"> como um transceptor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O chip √© interessante, pois, juntamente com o BLE, tamb√©m pode funcionar como um transceptor de sinais do padr√£o </font><b><font style="vertical-align: inherit;">802.15.4</font></b><font style="vertical-align: inherit;"> . E o padr√£o </font><b><font style="vertical-align: inherit;">802.15.4</font></b><font style="vertical-align: inherit;"> , como voc√™ sabe, √© o portador da tecnologia </font><b><font style="vertical-align: inherit;">ZigBee</font></b><font style="vertical-align: inherit;"> . A pilha do </font><b><font style="vertical-align: inherit;">ZigBee</font></b><font style="vertical-align: inherit;"> para o </font><b><font style="vertical-align: inherit;">MKW40Z</font></b><font style="vertical-align: inherit;"> n√£o foi lan√ßada, mas j√° √© oferecido um firmware em que o </font><b><font style="vertical-align: inherit;">802.15.4</font></b><font style="vertical-align: inherit;"> trabalha simultaneamente com o </font><b><font style="vertical-align: inherit;">BLE</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Um diagrama de uma parte de um m√≥dulo com um chip BLE √© mostrado abaixo.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><b><i><font style="vertical-align: inherit;"></font></i></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/b5d/0c0/158/b5d0c01586e8bc42182a764c0b7e8716.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
No lugar do chip</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MKW40</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> j√° tem chip de</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MKW41</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com um volume de 128 KB de RAM, 512 capacidade KB Flash e suporte para todos os protocolos populares:</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> BLE 4.2, BLE o Mesh, o ZigBee, Thread A, o IPv6 6LoBLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ainda n√£o existe documenta√ß√£o aberta sobre o novo chip, mas ele promete ser compat√≠vel com os pinos do MKW40.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O chip MKW40 BLE no m√≥dulo se conecta ao microcontrolador principal MK66 com interfaces SPI e I2C. A interface I2C tamb√©m conecta o chip ao chip do carregador. O principal canal de comunica√ß√£o √© implementado na interface SPI com uma taxa de bits de 6 Mbit / s.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A depura√ß√£o do programa no chip MKW40 pode ser realizada atrav√©s da interface SWD usando o adaptador JTAG e atrav√©s da interface de depura√ß√£o UART0 tamb√©m transmitida para o conector do depurador X4.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O NXP fornece mais de duas dezenas de exemplos da implementa√ß√£o de v√°rias aplica√ß√µes no chip MKW40, incluindo: press√£o, glicose, temperatura, sensores de proximidade, medidores de freq√º√™ncia card√≠aca, etc. </font><font style="vertical-align: inherit;">Existem aplicativos para UART sem fio e carregador de inicializa√ß√£o sem fio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fiz uma refatora√ß√£o profunda da estrutura NXP para esses chips e criei novos perfis com programas de demonstra√ß√£o no PC com Windows que n√£o exigem um adaptador separado no lado do PC. </font><font style="vertical-align: inherit;">Mas mais sobre isso mais tarde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â dif√≠cil aprender o Bluetooth LE. </font><font style="vertical-align: inherit;">O motivo √© a volumosa especifica√ß√£o e um grande n√∫mero de suas breves par√°frases na documenta√ß√£o dos fabricantes, come√ßando imediatamente com uma terminologia incomum. </font><font style="vertical-align: inherit;">Ent√£o, vamos come√ßar com isso.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decodifica√ß√£o e tradu√ß√£o de termos e abrevia√ß√µes, g√≠rias.</font></font></h1><br>
<ul>
<li><b><font color="#C00000">Pairing</font> </b> ‚Äî  ().    BLE           .      ,     PIN .</li>
<li><b><font color="#C00000">Bonding</font> </b> ‚Äî ().             BLE .</li>
<li><b><font color="#C00000">Device </font><font color="#C00000">authentication</font> </b> ‚Äî ()   ,       .</li>
<li><b><font color="#C00000">Advertising</font> </b> ‚Äî    BLE   ().         ,   ,  ,    .</li>
<li><b><font color="#C00000">Scanning</font> </b> ‚Äî       BLE    .           ,    .</li>
<li><b><font color="#C00000">Profile</font> </b> ‚Äî .   , ,         .</li>
<li><b><font color="#C00000">UUID</font> </b> ‚Äî universally unique identifier. 128-    .</li>
<li><b><font color="#C00000">BLE </font><font color="#C00000">Host</font> </b> ‚Äî .     BLE    ,             .   GAP, GATT,   GATT, L2CA.</li>
<li><b><font color="#C00000">BLE </font><font color="#C00000">Controller</font> </b> ‚Äî .     BLE   - Bluetooth.</li>
<li><b><font color="#C00000">HCI</font> </b> ‚Äî Host Controller Interface.   API        BLE   BLE .</li>
<li><b><font color="#C00000">GAP</font> </b> ‚Äî Generic Access Profile,   .      layer ().       .       ,          BLE .</li>
<li><b><font color="#C00000">GATT</font> </b> ‚Äî Generic Attribute Profile,   .          .  ‚Äî      (, , ...)         , ,   ..   ,     UUID.</li>
<li><b><font color="#C00000">L2CA</font> </b> ‚Äî Logical Link Control and Adaptation Layer.             .   ,  ,  ,  ,      .   BLE .</li>
<li><b><font color="#C00000">SMP</font> </b> ‚Äî Security Manager Protocol.    .      L2CA.</li>
<li><b><font color="#C00000">LTK</font> </b> ‚Äî Long-Term Key.      BLE .</li>
<li><b><font color="#C00000">IRK</font> </b> ‚Äî Identity Resolving Key.         .</li>
<li><b><font color="#C00000">CSRK</font> </b> ‚Äî Connection Signature Resolving Key.    .</li>
<li><b><font color="#C00000">RAND</font> </b> ‚Äî 64-   ,    LTK</li>
<li><b><font color="#C00000">EDIV</font> </b> ‚Äî 16-   ,    LTK</li>
<li><b><font color="#C00000">MITM</font> </b> ‚Äî man-in-the-middle.                  .</li>
<li><b><font color="#C00000">Message </font><font color="#C00000">integrity </font></b> ‚Äî    .</li>
<li><b><font color="#C00000"></font> </b> ‚Äî         ,              .     BSP (board support package), HAL (hardware abstraction layer), OSA (OS abstraction layer),    (middleware)  :  ,  ,     .</li>
</ul><br>
<h1>  </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao escolher um chip para o BLE, realizei uma pequena an√°lise de ofertas dos fabricantes mais famosos. </font><font style="vertical-align: inherit;">Acima de tudo, eu estava interessado na composi√ß√£o do software proposto, estruturas e ferramentas de compila√ß√£o-montagem-depura√ß√£o para projetos sob o n√∫cleo do ARM. </font><font style="vertical-align: inherit;">Um fator importante foi a continuidade com o ambiente IAR e a estrutura </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RTOS MQX</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">que s√£o usadas no desenvolvimento do aplicativo no processador principal do m√≥dulo.</font></font><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEMICONDUTOR N√ìRDICO</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fornece um SDK para o chip </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nRF51822</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com o </font></font><font color="#C00000"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫cleo Cortex</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M0</font></font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Compilado em IAR, KEIL, GCC. A pilha BLE √© representada por uma biblioteca monol√≠tica sem c√≥digos-fonte chamada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SoftDevice, na</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qual todas as APIs s√£o implementadas: GAP, GATT, L2CA, HCI. Em torno desta biblioteca √© constru√≠da uma estrutura com drivers. A estrutura vem com dois RTOS: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RL-ARM RTX de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Keil e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FreeRTOS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A estrutura usa a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tecnologia de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> serializa√ß√£o </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">protobuf</font></a><font style="vertical-align: inherit;"> e a depura√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segger RTT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, o </font><b><font style="vertical-align: inherit;">nrf5 IoT SDK √©</font></b><font style="vertical-align: inherit;"> oferecido.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Inclui os c√≥digos-fonte dos protocolos MQTT, COAP, TLS (extra√≠dos do projeto MBED), cJSON, lwip (pilha de protocolos TCP / IPv4 / IPv6 gr√°tis), interface de soquete, adaptador IPv6. </font><font style="vertical-align: inherit;">H√° tamb√©m </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6LoWPAN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas sem c√≥digo fonte.</font></font><br>
<br>
<h2><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texas Instruments</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no ARM, ele fabrica apenas chips BLE de dois n√∫cleos </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CC2640</font></font></a> </b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cortex-M3 e Cortex-M0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), mas as especifica√ß√µes correspondentes s√£o o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth </font></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2.Para</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fazer o download, fornece o SDK </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">SimpleLink Bluetooth de baixa energia Software Stack 2.2.0</font></a><font style="vertical-align: inherit;"> √â compilado pelo pr√≥prio ambiente de desenvolvimento do Code Composer Studio no ambiente IAR. Ele vem com seu pr√≥prio RTOS </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TI-RTOS 2.16</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e uma estrutura desenvolvida em torno das bibliotecas de pilha BLE. O SDK como um dos cen√°rios envolve o uso de um processador de aplicativo externo - Simple Application Processor (SAP). O </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pr√≥prio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> chip </font><b><font style="vertical-align: inherit;">CC2640 √©</font></b><font style="vertical-align: inherit;"> conhecido como SNP (Simple Network Processor). Entre eles, a comunica√ß√£o √© estabelecida sob um protocolo chamado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unified Network Processor Interface</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(NPI). </font><font style="vertical-align: inherit;">No lado do CC2640, o TI-RTOS √© necessariamente usado; no lado do processador SAP, voc√™ pode usar o RTOS a seu crit√©rio. </font><font style="vertical-align: inherit;">O c√≥digo-fonte para o protocolo NPI √© fornecido com o SDK para o lado SAP e o SNP. </font><font style="vertical-align: inherit;">Esta √© a tecnologia </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleLink</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pr√≥pria pilha do BLE √© dividida em 3 bibliotecas pr√©-compiladas sem fontes: host, controlador, HCI. </font><font style="vertical-align: inherit;">Todas as tr√™s bibliotecas funcionam apenas no processador Cortex-M3, que faz parte do chip CC2640. </font><font style="vertical-align: inherit;">Al√©m de estudar o TI-RTOS, o usu√°rio precisar√° estudar um mecanismo ou protocolo de software especial para interagir com a pilha BLE chamada iCall.</font></font><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microchip-atmel</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fabrica chips </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATBTLC1000</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bluetooth LE </font><font style="vertical-align: inherit;">no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫cleo Cortex-M0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Toda a pilha de chips √© gravada na ROM. </font><font style="vertical-align: inherit;">Nenhuma ferramenta aberta para programar esses chips foi encontrada no site da Atmel. </font><font style="vertical-align: inherit;">Em vez disso, a Atmel sugere o uso de um microcontrolador externo para interagir com o ATBTLC1000. </font><font style="vertical-align: inherit;">O software para um microcontrolador externo e exemplos est√£o no Atmel Software Framework. </font><font style="vertical-align: inherit;">Compila no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atmel Studio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (shell para GCC) ou no IAR.</font></font><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cypress Semiconductor Corp.</font></font></a> </h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">produz uma fam√≠lia de chips BLE program√°veis ‚Äã‚Äãbaseados no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫cleo Cortex-M0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSoC 4: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSoC 4XX8</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PRoC CYBL1XX7X que</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suportam a especifica√ß√£o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth 4.2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Projetos para chips s√£o criados em um IDE </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">PSoC Creator</font></a><font style="vertical-align: inherit;"> especial</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Os chips do Cypress diferem pelo fato de n√£o haver configura√ß√£o perif√©rica pronta (UART, SPI, I2S, PWM etc.), eles devem ser criados a partir de elementos de biblioteca em um editor de circuitos com a adi√ß√£o de bibliotecas de software. </font><font style="vertical-align: inherit;">Isso foi projetado para fornecer alguma flexibilidade. </font><font style="vertical-align: inherit;">Embora isso adicione muito trabalho ao desenvolvedor. </font><font style="vertical-align: inherit;">Um projeto configurado pode ser compilado por uma das cadeias de ferramentas: GCC, IAR, Keil. </font><font style="vertical-align: inherit;">BLE existe uma das bibliotecas. </font><font style="vertical-align: inherit;">A pilha BLE √© entregue como uma biblioteca monol√≠tica pr√©-compilada sem c√≥digos-fonte que combinam o host BLE, o controlador BLE e o HCI. </font><font style="vertical-align: inherit;">No entanto, a empresa publicou o c√≥digo-fonte para aplicativos Android e iOS que trabalham com o BLE.</font></font><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laborat√≥rios de sil√≠cio</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fabrica </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SoCs Smart Bluetooth EFR32 Blue Gecko</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baseados no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫cleo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ARM </font><b><font style="vertical-align: inherit;">Cortex-M4 que</font></b><font style="vertical-align: inherit;"> suporta a especifica√ß√£o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth 4.2 </font></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os chips do</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tipo </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">EFR32BG1P332F256GMxx</font></a><font style="vertical-align: inherit;"> podem </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">fornecer</font></a><font style="vertical-align: inherit;"> pot√™ncia de at√© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19,5 dBm</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e combinar um canal de r√°dio separado de 868 MHz com pot√™ncia de at√© 20 dBm e sensibilidade -121,4 dBm. O chip Silicon Labs √© uma grande variedade de fun√ß√µes alternativas de pinos e um sistema chamado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistema de Reflexo Perif√©rico</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(PRS). Embora os perif√©ricos n√£o possam ser criados como chips Cypress, mas sua conex√£o com os pinos seja quase arbitr√°ria, a presen√ßa do PRS torna poss√≠vel interagir uns com os outros sem envolver o processador. Pilha BLE da Silicon Labs capaz de aceitar resultados de gera√ß√£o de perfil pelo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth Developer Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que ser√° discutido abaixo. </font><font style="vertical-align: inherit;">O Silicon Labs oferece duas pilhas Bluetooth. </font><font style="vertical-align: inherit;">Um deles foi projetado para m√≥dulos Bluegiga e, al√©m do BLE, tamb√©m suporta Bluetooth comum. </font><font style="vertical-align: inherit;">A segunda pilha est√° em conformidade com a especifica√ß√£o 4.2 e apenas LE. </font><font style="vertical-align: inherit;">A pilha BLE √© entregue como uma biblioteca pr√©-compilada monol√≠tica sem fontes. </font><font style="vertical-align: inherit;">Para a op√ß√£o com um microcontrolador externo, √© oferecido um protocolo serial e API nas fontes. </font><font style="vertical-align: inherit;">O GCC, o IAR e o Keil podem compilar. </font><font style="vertical-align: inherit;">Tudo √© feito em um √∫nico ambiente de desenvolvimento </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplicity Studio V4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A estrutura da pilha que o acompanha n√£o √© suportada pelo RTOS. </font><font style="vertical-align: inherit;">Mas no c√≥digo-fonte do Simplicity Studio voc√™ pode encontrar p√©rolas como Speex a 8 kbps, adequadas para transmitir voz sobre BLE e uma poderosa GUI de janela da Segger.</font></font><br>
 <br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STMicroelectronics</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fabrica chips controladores de rede </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlueNRG</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baseados no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cortex-M0 que</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cont√™m uma pilha BLE de acordo com a especifica√ß√£o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth 4.1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os pr√≥prios chips n√£o s√£o program√°veis, mas possuem uma interface de comando de aplicativo serial (ACI) atrav√©s da qual um microcontrolador externo deve se comunicar com eles. </font><font style="vertical-align: inherit;">Uma estrutura foi desenvolvida para a ACI e pode ser inclu√≠da como parte do ambiente de desenvolvimento propriet√°rio da ST, STM32Cube.</font></font><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PLC CSR</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o fabrica chips BLE no ARM Cortex, mas est√° interessado em implementar a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rede MESH nos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√≥dulos </font><b><font style="vertical-align: inherit;">Bluetooth</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O v√≠deo est√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Os c√≥digos-fonte de v√°rios aplicativos BLE para Android e iOS s√£o apresentados. </font><font style="vertical-align: inherit;">Existe um SDK.</font></font><br>
 <br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renesas</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">produz chips BLE em seu n√∫cleo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RL78 de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 16 bits </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">A pilha BLE √© emitida apenas para usu√°rios premium. </font><font style="vertical-align: inherit;">Todos eles pr√≥prios - compilador, RTOS, microcontrolador host. </font><font style="vertical-align: inherit;">Mas h√° um plug-in para o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth Developer Studio</font></font></a><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dialog Semiconductor</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oferecem, como afirmam, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">os menores chips BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . No entanto, os chips com mem√≥ria Flash </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DA14583</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (o restante √© apenas com ROM) n√£o podem ser chamados de menores - 5x5 mm. O n√∫cleo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cortex-a M0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pot√™ncia m√°xima </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 dBm</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Suporte para a especifica√ß√£o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth 4.1.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para obter o SDK da empresa, voc√™ precisa se registrar e passar no teste. Mas com esses par√¢metros de chip, nem tentei obter um SDK. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, as fontes de MQTT, COAP, TLS, SPEEX, LwIP e assim por diante. aqueles em diferentes SDKs nos interessam pouco, eles podem ser encontrados livremente no Github sem vincular a estruturas espec√≠ficas. O suporte para a especifica√ß√£o Bluetooth 4.2 faz pouco, pois n√£o √© poss√≠vel us√°-lo em um PC.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RTOS de nicho, como TI-RTOS ou agendadores especiais, dificultam o dom√≠nio; tentamos evitar essas decis√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fiquei satisfeito por ter escolhido a solu√ß√£o no Kinetis.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que √© interessante sobre a pilha NXP Bluetooth LE para a fam√≠lia Kinetis.</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pilha BLE do Kinetis, como outras, vem na forma de bibliotecas pr√©-compiladas. Em torno dessas bibliotecas, √© criada uma estrutura de multitarefa que inclui drivers e uma camada de abstra√ß√£o de hardware no c√≥digo-fonte independente do sistema operacional. A estrutura pode ser configurada para funcionar sem um sistema operacional ou pode ser usada. Imediatamente na entrega, a estrutura √© adaptada para o FreeRTOS. Mas ele interage com o FreeRTOS atrav√©s de um conjunto auxiliar de fun√ß√µes chamado camada de abstra√ß√£o do sistema operacional (abstra√ß√£o do SO, OSA). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gra√ßas ao OSA, em vez do FreeRTOS, voc√™ pode substituir qualquer outro sistema operacional que suporte filas de mensagens, preem√ß√µes, sinalizadores e cron√¥metros. Por exemplo, RTOS MQX. A pilha compila, por incr√≠vel que pare√ßa, apenas no ambiente IAR. Felizmente, no meu caso, isso n√£o √© um problema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â mais interessante que a pilha seja dividida em duas bibliotecas - host BLE e controlador BLE. </font><font style="vertical-align: inherit;">E a biblioteca host BLE pode funcionar em outro chip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As bibliotecas interagem entre si neste caso atrav√©s do protocolo HCI. </font><font style="vertical-align: inherit;">I.e. </font><font style="vertical-align: inherit;">onde outros fabricantes criam outro protocolo de comunica√ß√£o para a intera√ß√£o do aplicativo no microcontrolador externo com a pilha BLE (lembre-se do SimpleLink), o NXP oferece uma solu√ß√£o padr√£o. </font><font style="vertical-align: inherit;">E o mais importante, com essa abordagem, movendo o host BLE para um microcontrolador externo mais poderoso, aumentamos significativamente os recursos de nosso banco de dados e servi√ßos GATT.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brevemente sobre BLE</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma vers√£o aberta 4.2 da especifica√ß√£o do bluetooth est√° dispon√≠vel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A descri√ß√£o do n√≠vel mais baixo de BLE (n√≠vel do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controlador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) est√° inclu√≠da como </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Pacote do sistema principal do Vol.6 [volume do controlador de baixa energia]"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da p√°gina 2544. O n√≠vel superior (n√≠vel do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">host</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) com uma descri√ß√£o do protocolo ATT e perfil do GATT est√° localizado no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"vol.3 Pacote do sistema principal [volume do host] ‚Äùdo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> documento da p√°gina 1693. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faixa de frequ√™ncia usada </font></font><br>
<a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/3fb/e8a/e0e/3fbe8ae0e3e35ab16e27593cef024fff.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tr√™s frequ√™ncias (na figura acima s√£o indicadas pelos n√∫meros de canal 37.38.39) s√£o alocadas para pacotes sem endere√ßo de broadcast e o restante para transmiss√£o de pacotes ao estabelecer canais de comunica√ß√£o l√≥gicos entre dispositivos. Uma caracter√≠stica bem conhecida do Bluetooth √© que, ao transmitir pacotes, cada pacote subsequente √© transmitido em uma frequ√™ncia diferente, selecionado pseudo-aleatoriamente na lista de permitidos. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os dados nos pacotes BLE podem ser criptografados e autenticados. A gera√ß√£o aleat√≥ria din√¢mica de endere√ßos de dispositivos e sua identifica√ß√£o usando hash tamb√©m s√£o usadas, ou seja, Tendo interceptado o endere√ßo do dispositivo no ar, n√£o poderemos us√°-lo por mais de 15 minutos, porque o endere√ßo ser√° alterado de acordo com um algoritmo desconhecido para n√≥s durante esse per√≠odo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os m√≥dulos BLE podem operar como transmissores unidirecionais, ou seja, sem estabelecer uma conex√£o bidirecional, basta transmitir alguns dados na forma de pacotes de an√∫ncios, por exemplo, temperatura. O tipo de dados nos </font><font style="vertical-align: inherit;">pacotes de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publicidade</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> designados como </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dados espec√≠ficos do fabricante</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pode ser usado para isso </font><font style="vertical-align: inherit;">. Um computador ou tablet pode receber dados de centenas desses transmissores sem etapas preliminares desnecess√°rias para pesquisar, estabelecer uma conex√£o, inserir um c√≥digo PIN e assim por diante. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra possibilidade de transferir dados sem instalar um canal de comunica√ß√£o √© a transmiss√£o no modo solicita√ß√£o-resposta (a solicita√ß√£o √© o pacote </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScanRequest</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a resposta do m√≥dulo √© o pacote </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScanResponce</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Esse </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE √©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> significativamente diferente do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-Fi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, onde, mesmo para o term√¥metro mais simples, √© necess√°rio estabelecer uma conex√£o que consome os recursos do roteador. </font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pilha de protocolos BLE</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A figura abaixo mostra o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como um programador de microcontrolador v√™. A pilha BLE consiste em duas partes de software: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controlador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> software </font><b><font style="vertical-align: inherit;">host</font></b><font style="vertical-align: inherit;"> lida com fun√ß√µes de alto n√≠vel de organiza√ß√£o e gerenciamento de dados, conex√µes e o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gerencia a periferia f√≠sica do transceptor, trabalha com chaves secretas e lida com outras fun√ß√µes de baixo n√≠vel. As partes nomeadas s√£o conectadas pela </font><b><font style="vertical-align: inherit;">interface do</font></b><font style="vertical-align: inherit;"> software </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HCI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host Controller Interface</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Em uma implementa√ß√£o de PC, a parte </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© executada em um computador e a parte </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© executada em um transceptor de hardware</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Bluetooth</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e o protocolo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HCI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> costumam ser transmitidos via </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Na implementa√ß√£o no microcontrolador, ambas as partes operam no mesmo chip, e a interface </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HCI se</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> transforma simplesmente em transfer√™ncia direta de dados da tarefa host (m√≥dulo de software) para a tarefa do controlador (m√≥dulo de software) e vice-versa. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato, o programador v√™ v√°rios conjuntos de APIs funcionando no n√≠vel do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">host</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : chamados </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GATT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GAP, L2CA, SMP, HCI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Usando a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API GAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o modo de opera√ß√£o do dispositivo √© definido - </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Central, Perif√©rico, Observador, Locutor</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e a conex√£o √© estabelecida quando necess√°rio. E com a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API do GATT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A transmiss√£o e recep√ß√£o direta de dados √∫teis e sua an√°lise s√£o realizadas. </font></font><br>
<a href=""><img align="left" width="691" src="https://habrastorage.org/getpro/geektimes/post_images/4df/ce8/06a/4dfce806ac92c29f99024ede56bba3d6.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
A maioria dos dispositivos existentes atualmente suporta o BLE 4.1, apesar da exist√™ncia da vers√£o 4.2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas as diferen√ßas da vers√£o 4.2 da anterior se referem especificamente a melhorias na parte BLE: maior velocidade, capacidade de transmitir protocolo IP e tr√°fego HTTP, maior prote√ß√£o criptogr√°fica e irreconhecibilidade para observadores externos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma caracter√≠stica importante do BLE em compara√ß√£o com o Wi-Fi √© a especifica√ß√£o n√£o apenas do canal de comunica√ß√£o, mas tamb√©m dos pr√≥prios aplicativos que o utilizam. Isso √© chamado de perfis e servi√ßos. Os perfis com servi√ßos descrevem as fun√ß√µes dos dispositivos, a finalidade dos dados, a composi√ß√£o e o formato dos dados, a prote√ß√£o dos dados, a ordem, os tipos e os eventos da troca, e n√£o apenas como os dados s√£o transmitidos. Isso permite que voc√™ n√£o reinvente a roda dos protocolos ao desenvolver, por exemplo, um sensor de temperatura corporal ou um medidor de pulso. As especifica√ß√µes j√° foram fornecidas, ele permanece no lado do dispositivo apenas para preencher os campos necess√°rios para o envio dos resultados da medi√ß√£o. Os clientes desses dispositivos na forma de smartphones, tablets, PCs ou utens√≠lios de cozinha reconhecer√£o esses dados automaticamente e os exibir√£o ou os usar√£o de acordo. Tudo gra√ßas aque todos os fabricantes sigam as mesmas especifica√ß√µes BLE sobre como os dados de temperatura ou freq√º√™ncia card√≠aca s√£o apresentados e como trabalhar com eles. Mas ainda h√° espa√ßo para a imagina√ß√£o do desenvolvedor, pois os perfis t√™m mecanismos para expandir a funcionalidade.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, √© apresentada uma hierarquia aproximada de atributos em um dispositivo BLE. </font></font><br>
<a href=""><img align="left" width="609" src="https://habrastorage.org/getpro/geektimes/post_images/7df/ca0/0fe/7dfca00fe6427b57e47b1ba1e10c4767.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Abaixo est√° uma √°rvore de atributos t√≠picos um pouco mais detalhada. Esta n√£o √© uma √°rvore completa; a maioria √© omitida porque ocuparia muito espa√ßo. As cores destacam os n√≠veis da √°rvore, cada atributo tem um n√∫mero exclusivo - UUID. A grava√ß√£o de n√∫meros padr√£o √© reduzida para 16 bits. Nesta figura, todos os n√∫meros s√£o padr√£o. Os perfis GAP e GATT tamb√©m s√£o apresentados como servi√ßos com seus recursos padr√£o. Cada servi√ßo pode ter seu pr√≥prio modelo de seguran√ßa e autoriza√ß√£o. A √°rvore inteira no dispositivo √© armazenada como um banco de dados chamado banco de dados GATT, geralmente na forma de uma tabela simples com refer√™ncias cruzadas. </font></font><br>
<br>
<a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/3b1/d8c/5e7/3b1d8c5e7718f9e8e334af7de0a694b7.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar)</font></font></em></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As caracter√≠sticas do servi√ßo t√™m muitas caracter√≠sticas, como mostrado abaixo. </font><font style="vertical-align: inherit;">Aqui voc√™ precisa se desculpar pela tautologia, mas no BLE realmente h√° algum tipo de crise de terminologia. </font><font style="vertical-align: inherit;">Em uma palavra, as caracter√≠sticas do servi√ßo pertencente a ele podem especificar a leitura, grava√ß√£o, a necessidade de notifica√ß√µes, confirma√ß√µes, assinaturas etc. </font></font><br>
<br>
<a href=""><img align="left" width="752" src="https://habrastorage.org/getpro/geektimes/post_images/c7b/dd6/c8c/c7bdd6c8cc8b066c8390a00634a7927f.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar) O</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
BLE √© uma tecnologia s√©ria, muito foi feito para garantir a seguran√ßa e a formaliza√ß√£o m√°xima, o que por sua vez deve facilitar a obten√ß√£o de compatibilidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A troca de dados entre dispositivos BLE √© realizada escrevendo e lendo os valores das caracter√≠sticas. </font><font style="vertical-align: inherit;">Canais de streaming como TCP ou UART n√£o est√£o aqui. </font><font style="vertical-align: inherit;">E se os dispositivos os tiverem, eles ser√£o organizados por complementos de software de n√≠vel superior.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ferramentas de desenvolvimento</font></font></h1><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ferramentas de desenvolvimento com o site proposto pelo Bluetooth Special Interest Group (Bluetooth SIG) </font></font></b> <font color="#BA5555"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.bluetooth.com/develop-with-bluetooth/developer-resources-tools</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
As </font><font style="vertical-align: inherit;">seguintes ferramentas √∫teis s√£o oferecidas </font><font style="vertical-align: inherit;">no site da principal organiza√ß√£o de padroniza√ß√£o - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth SIG</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth Developer Studio</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Bluetooth Developer Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma ferramenta que permite formar e inserir corretamente perfis, servi√ßos, caracter√≠sticas e descritores na implementa√ß√£o de um </font><font style="vertical-align: inherit;">dispositivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ou seja, crie um banco de dados. Se voc√™ comprar um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adaptador Bluetooth de hardware</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adicional </font><font style="vertical-align: inherit;">por US $ 99, o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">programa permitir√° interceptar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , descriptografar e exibir pacotes de protocolo Bluetooth. O programa tamb√©m tem a capacidade de depurar e testar os servi√ßos criados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Porque no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perfis aprovados s√£o descritos em grande detalhe, at√© pequenos erros em rela√ß√£o a formato, numera√ß√£o, acessibilidade etc. nesses perfis causar√° problemas de compatibilidade. Por√©m, para perfis n√£o padronizados, √© muito dif√≠cil prescindir de uma ferramenta que construa com precis√£o uma √°rvore de servi√ßos, caracter√≠sticas e descritores em conformidade com todas as especifica√ß√µes. √â f√°cil confundir os nomes dos servi√ßos, caracter√≠sticas, descritores e seus n√∫meros √∫nicos de v√°rios bytes - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UUID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O resultado da ferramenta, em particular, s√£o os </font><font style="vertical-align: inherit;">arquivos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gerados </font><font style="vertical-align: inherit;">que descrevem perfis, servi√ßos, caracter√≠sticas e descritores no projeto do usu√°rio. Esses arquivos XML s√£o usados ‚Äã‚Äãdiretamente pelo Silicon Labs Simplicity IDE para integrar projetos embarcados para seus chips. </font></font><br>
<br>
<a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/a38/1de/850/a381de850e5724e57c5e607d78568eff.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro resultado da ferramenta pode ser o c√≥digo fonte do dispositivo que trabalha com o banco de dados </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Mas, para isso, o usu√°rio precisa escrever seu plugin em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O programa tamb√©m fornece plug-in acesso do usu√°rio ao banco de dados atrav√©s de uma especial </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v√°rios plug-ins prontos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que geram v√°rios arquivos de texto de origem adequados para compila√ß√£o em ambientes de terceiros e estruturas de software. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainda </font><font style="vertical-align: inherit;">n√£o existem plugins </font><font style="vertical-align: inherit;">para solu√ß√µes baseadas na estrutura do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">software NXP Kinetis KW40Z Connectivity</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acelerador de aplicativo</font></font></h2><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application accelerator 2.1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - um conjunto de projetos de demonstra√ß√£o com textos de origem para diferentes sistemas operacionais </font></font><font color="#C00000"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android </font></font></b><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blackberry</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iOS </font></font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tizen </font></font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 </font></font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows </font></font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Para o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 10, os</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> projetos s√£o apenas para o ambiente de desenvolvimento do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visual Studio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para a </font><font style="vertical-align: inherit;">arquitetura </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Universal Windows Platform (UWP).</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I.e. esses projetos n√£o podem ser compilados nas estruturas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Forms</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WPF</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.NET</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . E pontes para traduzir aplicativos regulares do Windows para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UWP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apenas sendo criado. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UWP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> possibilita colocar aplicativos na </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas n√£o cria um </font><font style="vertical-align: inherit;">arquivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.exe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> execut√°vel simples </font><font style="vertical-align: inherit;">, que voc√™ pode simplesmente copiar e executar. </font><font style="vertical-align: inherit;">O primeiro lan√ßamento de um aplicativo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UWP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© </font><font style="vertical-align: inherit;">sempre acompanhado por uma instala√ß√£o. </font><font style="vertical-align: inherit;">Tudo isso cria dificuldades para o desenvolvedor. </font><font style="vertical-align: inherit;">E a funcionalidade dos projetos de demonstra√ß√£o deixa muito a desejar.</font></font><br>
<br>
<a href=""><div style="text-align:center;"><img width="376" src="https://habrastorage.org/getpro/geektimes/post_images/fd8/213/747/fd82137474453134c3bd6744473908a8.png"></div><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Acima est√° uma captura de tela do √∫nico aplicativo de demonstra√ß√£o para</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Windows - BLEServiceBrowser</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kit Gateway Smart Satarter</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gateway Smart Starter Kit </font></font></a> <font color="#BA5555"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></font><font color="#000F00"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O projeto do </font></font></b><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gateway do </font></font></font><font style="vertical-align: inherit;"><font color="#000F00"><font style="vertical-align: inherit;">dispositivo </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE </font></font></font><font style="vertical-align: inherit;"><font color="#000F00"><font style="vertical-align: inherit;">para o </font></font><font color="#000F00"><font style="vertical-align: inherit;">servidor </font></font><font color="#000F00"><font style="vertical-align: inherit;">WEB </font></font><font color="#000F00"><font style="vertical-align: inherit;">e </font></font><font color="#000F00"><font style="vertical-align: inherit;">o </font></font><font color="#000F00"><font style="vertical-align: inherit;">pr√≥prio servidor </font></font><font color="#000F00"><font style="vertical-align: inherit;">WEB</font></font></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font> </font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> implementando a </font></font></font><font style="vertical-align: inherit;"><font color="#000F00"><font style="vertical-align: inherit;">interface </font></font><font color="#000F00"><font style="vertical-align: inherit;">do </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usu√°rio</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para a rede de </font><font style="vertical-align: inherit;">dispositivos </font><b><font style="vertical-align: inherit;">BLE</font></b><font style="vertical-align: inherit;"> . Tudo √© implementado no Node.js. Prop√µe-se </font><b><font style="vertical-align: inherit;">implantar</font></b><font style="vertical-align: inherit;"> em um microcomputador </font><b><font style="vertical-align: inherit;">Raspberry Pi 2 modelo B</font></b><font style="vertical-align: inherit;"> com o sistema operacional </font><b><font style="vertical-align: inherit;">Raspbian Jessie</font></b><font style="vertical-align: inherit;"> . A conex√£o direta do </font><b><font style="vertical-align: inherit;">Raspberry Pi</font></b><font style="vertical-align: inherit;"> a dispositivos </font><b><font style="vertical-align: inherit;">BLE</font></b><font style="vertical-align: inherit;"> usa a </font><font style="vertical-align: inherit;">interface </font><b><font style="vertical-align: inherit;">Bluetooth HCI</font></b><font style="vertical-align: inherit;"> dos soquetes para o n√≠vel </font><b><font style="vertical-align: inherit;">L2CAP</font></b><font style="vertical-align: inherit;"> e o </font><b><font style="vertical-align: inherit;">USB HCI</font></b></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adaptador. </font><font style="vertical-align: inherit;">Para executar no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> voc√™ precisa instalar um substituto especial para o driver </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth HCI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> padr√£o </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">A solu√ß√£o funciona em um n√∫mero muito limitado de tipos de adaptadores de hardware devido ao driver HCI limitado.</font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/156/371/75e/15637175e9313970bef4ee048bc18b56.png"> <br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peryton</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entre as ferramentas comerciais, um interessante </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analisador de tr√°fego BLE da Perytons √©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o programa analisador, que roda em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com </font><b><font style="vertical-align: inherit;">Windows a</font></b><font style="vertical-align: inherit;"> partir da vers√£o 7. </font><font style="vertical-align: inherit;">Este √© um ponto importante, pois os drivers BLE nativos para Windows funcionam apenas a partir da vers√£o 8. </font><font style="vertical-align: inherit;">O analisador trabalha com uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lista</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> limitada </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">de adaptadores BLE de hardware</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com adaptadores, tamb√©m existem limita√ß√µes na an√°lise causadas pela criptografia de tr√°fego no BLE. </font></font><br>
<br>
<a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/1e3/c09/488/1e3c094883e576474a719aff13a0b422.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, mesmo na vers√£o de teste do programa, voc√™ pode obter muitos benef√≠cios. </font><font style="vertical-align: inherit;">O programa √© acompanhado por grava√ß√µes de demonstra√ß√£o de intercepta√ß√µes trocando dispositivos reais. </font><font style="vertical-align: inherit;">Esses registros, depois de carregados no programa, fornecem uma imagem detalhada da opera√ß√£o de toda a pilha de protocolos BLE. </font><font style="vertical-align: inherit;">A visualiza√ß√£o de uma dessas intercepta√ß√µes substitui a explora√ß√£o de toda a especifica√ß√£o Bluetooth.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√£o de ca√ßa</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ s√≥ precisa monitorar de alguma forma a atividade entre o computador e o dispositivo BLE e pode fazer isso sem uma an√°lise detalhada do protocolo, o conhecido interceptador de tr√°fego de driver do Windows chamado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bus Hound o far√°</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na captura de tela abaixo, voc√™ pode ver o fluxo de pacotes de publicidade recebidos. </font><font style="vertical-align: inherit;">A irregularidade dos intervalos de tempo de recep√ß√£o de pacotes √© claramente vis√≠vel. </font><font style="vertical-align: inherit;">Isso indica perda significativa de pacotes. </font><font style="vertical-align: inherit;">O intervalo de tempo limite para o dispositivo BLE foi definido para 20 ms. </font></font><br>
<br>
<a href=""><img align="left" width="784" src="https://habrastorage.org/getpro/geektimes/post_images/302/242/408/30224240815c37125998cb7eabbb7184.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar) A</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
captura de tela abaixo mostra a representa√ß√£o do dispositivo BLE na janela Bus Hound ap√≥s o pareamento com um PC. </font><font style="vertical-align: inherit;">Para cada servi√ßo de dispositivo, ap√≥s o peering, um canal de comunica√ß√£o l√≥gica √© exibido. </font><font style="vertical-align: inherit;">Aqui voc√™ pode ver o UUID do dispositivo e servi√ßos.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/0ac/28d/99d/0ac28d99d49e38dea38c2da5caa46658.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analisador de tr√°fego BLE (sniffer) USB-KW40Z</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta √© uma ferramenta do kit de suporte ao desenvolvimento Kinetis. Portanto, vou me debru√ßar sobre isso em mais detalhes. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P√°gina do sniffer do</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> NXP. </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/ef1/108/1c9/ef11081c9b38097c1b2fdcd91cb01094.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sniffer foi desenvolvido pela NXP (ou melhor, a antiga Freescale) e pode ser comprado barato em lojas populares de componentes de r√°dio on-line: Mouser, Digi-Key, Farnell ... √â oferecido pelo NXP como uma ferramenta para monitorar pacotes de r√°dio enviados por dispositivos BLE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando este dispositivo, voc√™ pode estudar a estrutura dos pacotes, registr√°-los em um log e analisar a densidade do tr√°fego. O circuito farejador est√° aberto para estudo, mas o programa de microcontrolador √© fornecido como um arquivo bin√°rio. O sniffer permite filtrar pacotes pelo valor do endere√ßo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode fazer o download do software do PC para o sniffer atrav√©s da seguinte consulta de pesquisa no site </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.nxp.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kinetis_Protocol_Analyzer_Adapter.exe</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Como o sniffer, al√©m da fun√ß√£o principal, tamb√©m pode ser uma plataforma de depura√ß√£o para diferentes aplicativos, s√£o anexados arquivos bin√°rios de firmware b√°sico, com os quais Voc√™ pode restaurar a funcionalidade do sniffer ap√≥s experimentar. Os arquivos v√™m com o pacote do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">software de conectividade KW40Z</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que √© baixado de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.nxp.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para a consulta de pesquisa KW40Z_Connectivity_Software. Os arquivos ser√£o chamados </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sniffer_processing_core_usbkw40z_k22f.bin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (para o microcontrolador MK22FN512 na placa sniffer) e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sniffer_radio_core_usbkw40z_kw40z.bin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(para o microcontrolador MKW40Z na placa sniffer). Os arquivos s√£o programados usando depuradores SWD: JLink, STLink, OpenSDA ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do lado do PC, o dispositivo √© percebido como um dispositivo USB composto com uma porta COM e uma porta de depura√ß√£o de acordo com a especifica√ß√£o OpenSDA com firmware CMSIS-DAP. Portanto, no ambiente IAR, voc√™ pode programar e depurar livremente o chip sniffer MKW40Z usando seu outro chip MK22FN512 como portador da funcionalidade do adaptador de depura√ß√£o. Mas os dois chips da placa possuem conectores SWD padr√£o para um adaptador de depura√ß√£o externo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O farejador n√£o garante a recep√ß√£o de todos os pacotes transmitidos no ar. √â f√°cil inund√°-lo, ap√≥s o qual ele deixa de aceitar pacotes, portanto, √© recomend√°vel ativar a filtragem por endere√ßo para receber apenas pacotes do n√≥ de interesse com tr√°fego bastante raro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A janela a seguir mostra o programa analisador de pacotes. A janela inclui intercepta√ß√£o nos tr√™s canais: </font></font><br>
<br>
<a href=""><img align="left" width="746" src="https://habrastorage.org/getpro/geektimes/post_images/900/756/ae8/900756ae87aa2a06256d83774460fbd5.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ao instalar o software analisador em um PC, ele cria um adaptador Ethernet virtual, que converte pacotes disparados pela porta COM do sniffer virtual em pacotes Ethernet. No meu caso, esse adaptador virtual recebeu automaticamente um nome simples - Ethernet. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ver os pacotes, voc√™ tamb√©m precisa instalar o programa sniffer de pacotes Wireshark Ethernet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vista da janela principal do programa Wireshark enquanto monitora o tr√°fego. </font><font style="vertical-align: inherit;">O Wireshark descreve detalhadamente todos os campos de bits do pacote de protocolo Link Layer (LE LL), no entanto, ap√≥s estabelecer uma conex√£o entre os dispositivos e iniciar o protocolo L2CAP, o conte√∫do do pacote n√£o √© reconhecido porque √© transmitido criptografado. </font></font><br>
<br>
<a href=""><img align="left" width="736" src="https://habrastorage.org/getpro/geektimes/post_images/762/d12/cde/762d12cdec62b23d94b1f5e254d19c4f.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Clique para ampliar)</font></font></em></a><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualiza√ß√£o da janela do Wireshark com decodifica√ß√£o do pacote de an√∫ncio</font></font></b><div class="spoiler_text"><a href=""><img align="left" width="745" src="https://habrastorage.org/getpro/geektimes/post_images/37a/bbd/8ba/37abbd8ba6306e22b6c2dbd50e92f3c2.png"><br clear="left">
<em>(  )</em></a><br>
<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conte√∫do do pacote de solicita√ß√£o de digitaliza√ß√£o</font></font></b><div class="spoiler_text"><a href=""><img align="left" width="740" src="https://habrastorage.org/getpro/geektimes/post_images/5d7/4fb/fd5/5d74fbfd589f42c9ebaed86c0bef7f3a.png"><br clear="left">
<em>(  )</em></a><br>
<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conte√∫do do pacote Scan Responce</font></font></b><div class="spoiler_text"><a href=""><img align="left" width="741" src="https://habrastorage.org/getpro/geektimes/post_images/012/627/201/012627201de64dfc530926aa9241c20c.png"><br clear="left">
<em>(  )</em></a><br>
<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O conte√∫do do pacote de solicita√ß√£o de conex√£o com par√¢metros que determinam a velocidade do canal de comunica√ß√£o</font></font></b><div class="spoiler_text"><a href=""><img align="left" width="755" src="https://habrastorage.org/getpro/geektimes/post_images/7a8/032/eeb/7a8032eeb21f6834f6f9bfc19d6bfd8e.png"><br clear="left">
<em>(  )</em></a><br>
<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sequ√™ncia de pacotes de conex√£o</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/7e7/baf/5c9/7e7baf5c91ecdc461aa878c8148a6d48.png"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Coment√°rios, adi√ß√µes, corre√ß√µes e obje√ß√µes √†s informa√ß√µes contidas neste artigo s√£o bem-vindos.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt394757/">https://habr.com/ru/post/pt394757/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt394747/index.html">AlphaGo vai jogar com o campe√£o chin√™s Ke Jie</a></li>
<li><a href="../pt394749/index.html">Um buraco cr√≠tico no cora√ß√£o das redes celulares</a></li>
<li><a href="../pt394751/index.html">Fabrica√ß√£o de gabinetes de colunas: vis√£o geral do material</a></li>
<li><a href="../pt394753/index.html">Jogos para programadores</a></li>
<li><a href="../pt394755/index.html">Conhecimento de f√≠sica ajuda a vencer cassinos de roleta</a></li>
<li><a href="../pt394759/index.html">Como o Departamento de Defesa dos EUA protege os ouvidos dos soldados</a></li>
<li><a href="../pt394761/index.html">O adaptador sem fio "Morecard" do tamanho de um cart√£o de cr√©dito permitir√° que o iPhone permane√ßa nas redes de duas operadoras simultaneamente</a></li>
<li><a href="../pt394767/index.html">Mensageiros "consomem" as operadoras de telecomunica√ß√µes, eles est√£o preparando uma greve de retalia√ß√£o</a></li>
<li><a href="../pt394769/index.html">O sistema artificial superou a folha natural na efici√™ncia da fotoss√≠ntese.</a></li>
<li><a href="../pt394771/index.html">Modelos ISS na Terra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>