<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñêÔ∏è üëñ üßùüèΩ Nous utilisons Yii2. Nous √©crivons un autre CMS ou une tentative d'acc√©l√©rer consid√©rablement le d√©veloppement avec un minimum de frais g√©n√©raux üë®üèø‚Äçüíº üÜï üë©üèΩ‚Äçüç≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Presque chaque d√©veloppeur qui travaille depuis longtemps avec un certain framework dispose d'un ensemble de ses propres outils qui permet d'acc√©l√©rer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous utilisons Yii2. Nous √©crivons un autre CMS ou une tentative d'acc√©l√©rer consid√©rablement le d√©veloppement avec un minimum de frais g√©n√©raux</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454914/">  Presque chaque d√©veloppeur qui travaille depuis longtemps avec un certain framework dispose d'un ensemble de ses propres outils qui permet d'acc√©l√©rer le d√©veloppement du site.  Cependant, souvent, ils sont mal structur√©s, n'ont pas de documentation et sont finalis√©s dans le ¬´processus¬ª de production. <br><br>  L'id√©e du projet yicms √©tait de collecter tous les d√©veloppements pour le framework Yii2, ce qui semblait commode dans un certain syst√®me, au premier rang desquels il faut mettre la facilit√© d'utilisation, la flexibilit√© et la capacit√© d'acc√©l√©rer consid√©rablement le d√©veloppement de sites standards avec ses outils.  Ce projet a √©t√© d√©velopp√© par moi pour "l'√¢me", mais pour le moment il est d√©j√† en beta. <br><a name="habracut"></a><br>  L'essence des yicms se situe quelque part entre les capacit√©s du framework et les capacit√©s habituelles du CMS.  Ce n'est pas un CMS au sens habituel du terme, mais juste un ensemble de modules qui peuvent acc√©l√©rer consid√©rablement le d√©veloppement du site √† l'aide de ses outils, tout en ayant un ¬´acc√®s¬ª complet aux capacit√©s du framework.  Les principales fonctionnalit√©s int√©gr√©es dans yicms sont le panneau d'administration g√©n√©r√© √† la vol√©e et les classes annot√©es automatiquement qui vous permettent d'utiliser la saisie semi-automatique IDE et d'avoir une interface intuitive. <br><br><h3>  Installation et configuration </h3><br>  Commen√ßons donc par yicms en l'installant.  Pour les rencontres, le moyen le plus simple consiste √† utiliser Open Server ou toute autre plate-forme de serveur similaire.  √âtant donn√© que yicms d√©pend fortement de Yii, nous allons l'installer en premier.  Pour plus de simplicit√©, nous utiliserons le mod√®le de base: <br><br> <code>composer create-project --prefer-dist yiisoft/yii2-app-basic basic</code> <br> <br>  Une fois que composer a install√© le framework, ajoutez la section require du fichier composer.json avec les quatre modules yicms et ex√©cutez la mise √† jour de composer. <br><br><pre> <code class="json hljs"> <span class="hljs-string"><span class="hljs-string">"require"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"php"</span></span>: <span class="hljs-string"><span class="hljs-string">"&gt;=5.4.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"yiisoft/yii2"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.14"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"yiisoft/yii2-bootstrap"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"yiisoft/yii2-swiftmailer"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.0 || ~2.1.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-common"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-pages"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-essences"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-feedback"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span> },</code> </pre><br>  Chaque module repr√©sente un ensemble de fonctionnalit√©s sp√©cifiques, qui seront envisag√©es √† l'avenir.  Pour l'instant, installez-les tous. <br><br>  Ensuite, vous devez vous rappeler de configurer le serveur.  Dans Open Server, nous utilisons Apache et configurons .htaccess comme suit: <br><br>  Pour le fichier racine .htaccess: <br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">Options</span></span></span></span> +FollowSymLinks IndexIgnore */* RewriteEngine <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !^/(web) RewriteRule ^assets/(.*)$ /web/assets/<span class="hljs-number"><span class="hljs-number">$1</span></span><span class="hljs-meta"><span class="hljs-meta"> [L] RewriteRule ^css/(.*)$ web/css/$1 [L] RewriteRule ^js/(.*)$ web/js/$1 [L] RewriteRule ^images/(.*)$ web/images/$1 [L] RewriteRule ^files/(.*)$ web/files/$1 [L] RewriteRule (.*) /web/$1 RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d RewriteRule . web/index.php</span></span></code> </pre><br>  Pour le fichier .htaccess dans le r√©pertoire web <br><br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_FILENAME}</span></span> !-f RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_FILENAME}</span></span> !-d RewriteRule . index.php</code> </pre><br>  L'√©tape suivante consiste √† rouler la migration de chaque module yicms dans la base de donn√©es.  Dans la console, nous ex√©cutons s√©quentiellement les commandes suivantes: <br><br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-common/Migrations</code> <br> <br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-pages/Migrations</code> <br> <br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-essences/Migrations</code> <br> <br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-feedback/Migrations</code> <br> <br>  Commen√ßons maintenant la configuration dans le fichier config / web.php. <br><br>  La section des modules est configur√©e comme suit: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'modules'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'common'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsCommon\CommonModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'pages'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsPages\PagesModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'essences'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsEssences\EssencesModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'feedback'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsFeedback\FeedbackModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'redactor'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'yii\redactor\RedactorModule'</span></span>, ],</code> </pre><br>  La section d'amor√ßage est configur√©e comme suit: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'bootstrap'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'log'</span></span>, <span class="hljs-string"><span class="hljs-string">'common'</span></span>, <span class="hljs-string"><span class="hljs-string">'pages'</span></span>, <span class="hljs-string"><span class="hljs-string">'essences'</span></span>, <span class="hljs-string"><span class="hljs-string">'feedback'</span></span>],</code> </pre> <br>  La section utilisateur est configur√©e comme suit: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'user'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'identityClass'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsCommon\Base\CommonUser'</span></span>, <span class="hljs-string"><span class="hljs-string">'enableAutoLogin'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, ],</code> </pre><br>  Supprimez la section des commentaires urlManager: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'urlManager'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'enablePrettyUrl'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'showScriptName'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-string"><span class="hljs-string">'rules'</span></span> =&gt; [ ], ],</code> </pre><br>  Le framework Yii2 et le syst√®me yicms ont √©t√© correctement configur√©s. <br><br>  Apr√®s le premier d√©marrage, si tout a √©t√© configur√© correctement, le r√©pertoire yicms doit √™tre cr√©√© dans le r√©pertoire racine du projet qui contiendra les fichiers disponibles pour les modifications utilisateur et les classes annot√©es automatiquement seront √©galement cr√©√©es dans celui-ci. <br><br><img src="https://habrastorage.org/webt/ws/zc/n6/wszcn6cnsn9mjmguj_cq5mwkt8k.jpeg"><br><br><h3>  Description des modules Common et Pages </h3><br>  Le syst√®me yicms se compose de deux sections.  Section Dev, qui ne doit √™tre accessible qu'au d√©veloppeur (le code peut y √™tre bris√©) et la section Admin doit √™tre accessible √† l'administrateur du site (la gestion de contenu y est effectu√©e).  Pour commencer, vous devez vous rendre dans la section Dev, pour cela vous devez utiliser l'URL suivante: <br><br> <code>http://&lt;  &gt;/web/common/dev/login-as-dev?hash=123456&amp;asDev</code> <br> <br>  Apr√®s cela, le panneau Dev devrait s'ouvrir: <br><br><img src="https://habrastorage.org/webt/hy/2m/zr/hy2mzrfv8ln9m2jtpk_xbnx4b1q.jpeg"><br><br>  Commen√ßons maintenant avec la fonctionnalit√© yicms.  Tout d'abord, dans le module Pages, nous allons cr√©er une page appel√©e index, qui sera la page principale du site.  Acc√©dez √† la liste des pages et cr√©ez une nouvelle page appel√©e index.  Par d√©faut, les champs title, meta_description et meta_keywords seront cr√©√©s pour la page.  De plus, nous allons cr√©er un autre champ via le bouton Ajouter un nouveau champ avec le nom du texte, nous laisserons tous ses param√®tres par d√©faut. <br><br>  Maintenant, si vous suivez le lien <br><br> <code>http://&lt;  &gt;/web/pages/admin</code> <br> <br>  la section admin s'ouvrira.  La page d'index y sera disponible pour remplir le contenu.  Remplissez tous les champs avec du texte libre. <br><br>  Au moment de cr√©er la section d'index dans la section dev de la page d'index, la classe Index a √©t√© cr√©√©e dans le r√©pertoire yicms / Pages / Models dans lequel des annotations ont √©galement √©t√© cr√©√©es pour les champs title, meta_description, meta_keywords, ainsi que pour le champ de texte que nous avons cr√©√© √† la vol√©e.  Un objet de cette classe que nous pouvons utiliser pour obtenir la valeur des champs.  Consid√©rez comment cela peut √™tre fait.  Dans le contr√¥leur SiteController standard du mod√®le de base dans actionIndex, √©crivez ce qui suit: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Displays homepage. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> \Iliich246\YicmsPages\Base\PagesException */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionIndex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $indexPage = \app\yicms\Pages\Models\Index::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'index'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'indexPage'</span></span> =&gt; $ indexPage ]); }</code> </pre><br>  √âtant donn√© que la classe \ app \ yicms \ Pages \ Models \ Index a √©t√© g√©n√©r√©e automatiquement, l'auto-compl√©tion pour elle fonctionnera dans l'EDI.  Maintenant, $ indexPage peut √™tre utilis√© comme index.  Ouvrez maintenant la vue d'index.  Nous en supprimons tout ce qui est inutile et √©crivons: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $indexPage \app\yicms\Pages\Models\Index */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;title = $indexPage-&gt;title; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;registerMetaTag([ <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'description'</span></span>, <span class="hljs-string"><span class="hljs-string">'content'</span></span> =&gt; $indexPage-&gt;meta_description ]); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;registerMetaTag([ <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'keywords'</span></span>, <span class="hljs-string"><span class="hljs-string">'content'</span></span> =&gt; $indexPage-&gt;meta_keywords ]); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">site</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jumbotron</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt;&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content</span></span></span><span class="hljs-class">"&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  L'annotation de la variable $ indexPage est n√©cessaire pour l'auto-compl√©tion IDE.  Utilisez maintenant l'objet $ indexPage.  Tous les champs que nous avons cr√©√©s dans la section dev pour la page d'index sont disponibles dans l'objet de la classe Index, qui, gr√¢ce √† l'annotation automatique, est compl√©t√© par l'EDI apr√®s avoir entr√© l'op√©rateur fl√®che. <br><br>  Au total, en peu de temps, nous avons cr√©√© une page d'index pour laquelle un panneau d'administration a √©t√© automatiquement cr√©√© pour modifier son contenu.  Nous avons utilis√© la programmation uniquement pour cr√©er l'objet page dans le contr√¥leur standard du framework, et sous la forme dans laquelle nous pouvions rapidement utiliser l'objet page gr√¢ce √† la saisie semi-automatique et √† une interface intuitive. <br><br>  Nous n'avons examin√© que la plus petite partie des capacit√©s des yicms.  Maintenant, nous allons compliquer un peu la page principale du site en utilisant yicms. <br><br>  yicms prend en charge le multilinguisme pr√™t √† l'emploi.  Pour activer la deuxi√®me langue dans la section dev du module commun, s√©lectionnez la liste des langues, puis s√©lectionnez la langue russe et activez-la dedans: <br><br><img src="https://habrastorage.org/webt/ka/eh/uw/kaehuwkq6y1qeubwmue9obzqtv4.jpeg"><br><br>  Maintenant, dans le panneau d'administration, nous pouvons remplir les champs pour plusieurs langues.  Vous pouvez cr√©er de nouvelles langues dans le syst√®me.  Cependant, il sera n√©cessaire de traduire le panneau d'administration √† l'aide des outils de framework habituels.  Par cons√©quent, lors de la cr√©ation d'un nouveau langage, vous devez adh√©rer √† l'ISO.  Pour les contr√¥les de contenu, une nouvelle plaque avec une nouvelle langue sera simplement ajout√©e. <br><br><h4>  Blocs de fichiers de composants </h4><br>  Ensuite, consid√©rez l'√©l√©ment de blocs de fichiers.  Dans le panneau de d√©veloppement de la page d'index, cr√©ez un bloc de fichiers avec le document de nom de programme.  Les autres param√®tres de blocage seront laiss√©s par d√©faut.  Maintenant, dans le panneau d'administration pour l'√©dition de la page d'index du fichier de document est devenu disponible.  T√©l√©chargez un fichier arbitraire.  Maintenant, le lien pour le t√©l√©charger peut √™tre affich√© sur la page d'index du site: <br><br><pre> <code class="php hljs">‚Ä¶ &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Document</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">document</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">uploadUrl</span></span></span><span class="hljs-class">() ?&gt;"&gt; &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">document</span></span></span><span class="hljs-class"> ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; ‚Ä¶ &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Maintenant, sur la page, le lien chargera le fichier que nous avons t√©l√©charg√© sur le panneau d'administration.  Par d√©faut, le bloc de fichiers fonctionne en mode fichier unique dans toutes les langues.  Cependant, dans le panneau de d√©veloppement, vous pouvez basculer le type de langue sur le type traduisible, puis pour chaque langue, il sera n√©cessaire de t√©l√©charger son propre fichier.  Dans ce cas, le fichier dont la langue est actuellement active sur le site sera t√©l√©charg√© via le lien.  Bien s√ªr, vous pouvez t√©l√©charger pour une langue sp√©cifique, qui sera discut√©e plus tard. <br><br>  L'√©tape suivante dans le panneau de d√©veloppement consiste √† cr√©er un bloc de fichier de recettes pour lequel nous sp√©cifierons le type comme type multiple.  Dans ce mode, vous pouvez t√©l√©charger de nombreux fichiers pour un bloc de fichiers.  Pour ce faire, dans le panneau d'administration, dans l'onglet recettes qui appara√Æt, t√©l√©chargez plusieurs fichiers arbitraires. <br>  Apr√®s cela, sous forme d'index, nous listons les fichiers: <br><br><pre> <code class="php hljs">‚Ä¶ &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Recipes</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class"> ($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipes</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipe</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipe</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">uploadUrl</span></span></span><span class="hljs-class">() ?&gt;"&gt; &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipe</span></span></span><span class="hljs-class"> ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; ‚Ä¶</span></span></code> </pre><br>  En mode de type multiple, un bloc de fichiers peut √™tre contourn√© via foreach ou un it√©rateur. <br><br><h4>  Composant de bloc d'images </h4><br>  Consid√©rons maintenant l'√©l√©ment de bloc d'images.  Cr√©ez un bloc d'image pour la page d'index, en laissant tous les param√®tres par d√©faut.  De m√™me pour les blocs de fichiers dans le panneau d'administration, il est devenu possible de t√©l√©charger une image.  T√©l√©chargez une image arbitraire.  Maintenant, sous forme d'index, nous √©crivons ce qui suit: <br><br><pre> <code class="php hljs">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Image</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">picture</span></span></span><span class="hljs-class"> ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">=""&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  De m√™me que pour les fichiers image, un est charg√© par d√©faut dans toutes les langues, cependant, pour les images, ce comportement peut √™tre modifi√© dans le panneau de d√©veloppement et t√©l√©charger votre propre image pour chaque langue.  Vous pouvez √©galement t√©l√©charger de nombreuses images dans un seul bloc. <br><br>  Cr√©ez un bloc de galerie d'images dans le panneau de d√©veloppement, dont le type sera d√©fini comme Images multiples.  Pour les images, vous pouvez √©galement suspendre des champs de texte √† la vol√©e.  Par cons√©quent, dans la fen√™tre modale pour d√©finir le bloc de la galerie, passons √† la section ¬´Afficher le champ du bloc d'image¬ª.  Dans cette section pour les images, cr√©ez des champs avec les noms alt et name.  Maintenant, dans le panneau d'administration pour chaque image, il est possible de d√©finir les champs de texte alt et name.  Dans les yicms pour les images hors de la bo√Æte est √©galement disponible la possibilit√© de "recadrer" et de cr√©er des vignettes.  Par exemple, cr√©ez un mod√®le de miniature pour le bloc de la galerie.  Dans la fen√™tre modale du bloc d'image, acc√©dez √† la section "Vignettes de configuration des images".  Nous y cr√©erons un configurateur de vignettes avec le nom ¬´x2¬ª et les param√®tres diviseur = 2 et qualit√© = 80. Par nom, nous pourrons acc√©der √† la vignette, le diviseur d√©terminera de combien r√©duire la taille de l'image originale, la qualit√© d√©termine la qualit√© de compression de la vignette.  Ensuite, cr√©ez un autre mod√®le de miniature avec les param√®tres: nom_programme = "x5", diviseur = 5, qualit√© = 50. Maintenant, lorsque nous chargeons l'image √† partir du panneau d'administration, deux miniatures seront automatiquement cr√©√©es pour elle avec les param√®tres que nous avons s√©lectionn√©s. <br><br>  T√©l√©chargez maintenant quelques images dans le panneau d'administration du groupe de galeries.  Une fois l'image cr√©√©e et t√©l√©charg√©e, vous pouvez remplir les champs alt et name, dont nous avons cr√©√© les mod√®les dans le panneau de d√©veloppement.  Voyons comment afficher tout cela sur le site. <br><br><pre> <code class="php hljs">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gallery</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getImages</span></span></span><span class="hljs-class">() </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">col</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lg</span></span></span><span class="hljs-class">-4"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class"> ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">width</span></span></span><span class="hljs-class">="100%" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class"> ?&gt;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">outputThumbnail</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x2</span></span></span><span class="hljs-class">') ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class"> ?&gt;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">outputThumbnail</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x5</span></span></span><span class="hljs-class">') ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class"> ?&gt;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">&gt;&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Ici, la m√©thode getImages () renvoie un tableau d'objets de la classe annot√©e automatiquement app \ yicms \ Pages \ Models \ Index \ Images \ GalleryImage dans laquelle des annotations ont √©t√© cr√©√©es pour les champs alt et name que nous avons cr√©√©s √† la vol√©e et l'auto-compl√©tion IDE leur est disponible.  De plus, en appelant la m√©thode outputThumbnail (&lt;Nom du mod√®le de miniature&gt;) sur l'objet, nous basculons l'objet en mode de sortie miniature. <br><br>  Pour les blocs d'images, il est possible de cr√©er non seulement des champs mais aussi des conditions, que nous consid√©rerons un peu plus tard.  Des champs et des conditions peuvent √©galement √™tre cr√©√©s pour les blocs de fichiers.  Cela fonctionne sur un principe similaire. <br><br><h4>  Conditions des composants </h4><br>  Consid√©rons maintenant l'√©l√©ment suivant.  Ce sont des conditions.  Les conditions sont pratiques pour la cr√©ation dans les listes du panneau d'administration, les cases √† cocher, etc.  Ce qui d√©terminera certains comportements lors du travail des pages.  Regardons un exemple.  Cr√©ez une condition appel√©e arri√®re-plan dans le panneau de d√©veloppement de la page d'index.  Tapez s√©lectionnez ¬´s√©lectionner le type de liste d√©roulante¬ª.  Apr√®s avoir cr√©√© la condition, nous irons √† la section "Options de configuration de la condition".  Cr√©ez trois valeurs de condition avec les valeurs transparent, rouge et vert. <br><br>  Apr√®s cela, une condition avec une liste d√©roulante avec les valeurs TRANSPARENT, RED et GREEN appara√Ætra dans le panneau d'administration de la page d'index.  Ils sont convertis en majuscules, car dans la classe cr√©√©e annot√©e automatiquement, ils sont repr√©sent√©s sous forme de constantes. <br><br>  Essayons maintenant d'utiliser la condition cr√©√©e.  Nous l'utilisons d'une mani√®re l√©g√®rement diff√©rente pour montrer d'autres possibilit√©s.  √âtant donn√© que la page d'index est la page principale du site, il sera s√©mantiquement vrai de changer la couleur d'arri√®re-plan du site √† partir de ses param√®tres.  Par cons√©quent, notre condition sera de changer la couleur d'arri√®re-plan sur tout le site, nous allons donc l'ins√©rer dans la disposition du contr√¥leur.  Ouvrez le fichier de mod√®le de mise en page du framework Yii2 de base et cr√©ez un objet Index: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/* </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this \yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $content string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">widgets</span></span>\<span class="hljs-title"><span class="hljs-title">Alert</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">helpers</span></span>\<span class="hljs-title"><span class="hljs-title">Html</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">bootstrap</span></span>\<span class="hljs-title"><span class="hljs-title">Nav</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">bootstrap</span></span>\<span class="hljs-title"><span class="hljs-title">NavBar</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">widgets</span></span>\<span class="hljs-title"><span class="hljs-title">Breadcrumbs</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">assets</span></span>\<span class="hljs-title"><span class="hljs-title">AppAsset</span></span>; AppAsset::register(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>); $pagesIndex = \app\yicms\Pages\Models\Index::getInstance(); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginPage() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;!DOCTYPE html&gt; &lt;html lang=<span class="hljs-string"><span class="hljs-string">"&lt;?= Yii::$app-&gt;language ?&gt;"</span></span>&gt; &lt;head&gt; &lt;meta charset=<span class="hljs-string"><span class="hljs-string">"&lt;?= Yii::$app-&gt;charset ?&gt;"</span></span>&gt; &lt;meta http-equiv=<span class="hljs-string"><span class="hljs-string">"X-UA-Compatible"</span></span> content=<span class="hljs-string"><span class="hljs-string">"IE=edge"</span></span>&gt; &lt;meta name=<span class="hljs-string"><span class="hljs-string">"viewport"</span></span> content=<span class="hljs-string"><span class="hljs-string">"width=device-width, initial-scale=1"</span></span>&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;registerCsrfMetaTags() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;title&gt;<span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= Html::encode(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;title) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/title&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;head() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;/head&gt; &lt;body&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginBody() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> ‚Ä¶</code> </pre><br>  √âtant donn√© que l'objet de la classe Index est quelque chose comme un singleton, nous pouvons appeler la m√©thode statique getInstance () autant que nous le voulons sans risquer de cr√©er des requ√™tes de base de donn√©es en double suppl√©mentaires et d'autres frais g√©n√©raux lors de sa cr√©ation.  Maintenant, en utilisant l'objet $ pagesIndex, nous allons changer la balise en lui ajoutant un style en ligne: <br><br><pre> <code class="php hljs">&lt;body style=<span class="hljs-string"><span class="hljs-string">"background-color: &lt;?php if ($pagesIndex-&gt;background-&gt;value() == \app\yicms\Pages\Models\Index\Conditions\Background::TRANSPARENT):?&gt; transparent; &lt;?php elseif ($pagesIndex-&gt;background-&gt;value() == \app\yicms\Pages\Models\Index\Conditions\Background::RED):?&gt; #FFD3D3 &lt;?php else: ?&gt; #BBFFC8 &lt;?php endif; ?&gt; "</span></span>&gt;</code> </pre><br>  En appelant $ pagesIndex-&gt; ‚Äã‚Äãbackground-&gt; value () et en comparant avec la constante qui a √©t√© cr√©√©e dans la classe annot√©e automatiquement \ app \ yicms \ Pages \ Models \ Index \ Conditions \ Background, nous s√©lectionnons la couleur d'arri√®re-plan du site. <br><br>  Ensuite, consid√©rez les capacit√©s des classes √† annotation automatique.  Pendant que yicms est en cours d'ex√©cution, de nombreux √©v√©nements se produisent qui peuvent √™tre g√©r√©s par le framework Yii.  Nous donnons un exemple. <br><br><pre> <code class="php hljs">app\yicms\Pages\Models\Index\Fields\Text</code> </pre> <br>  Ce fichier a √©t√© cr√©√© par un annotateur automatique lorsque nous avons cr√©√© le champ de texte pour la page d'index dans le panneau de d√©veloppement.  Lorsque nous √©crivons &lt;? = $ IndexPage-&gt; text?&gt; Dans le mod√®le, quelque chose de similaire au singleton de cette classe particuli√®re est cr√©√©, qui dans le mod√®le est converti en cha√Æne √† l'aide de la magie __toString (). <br><br>  Pour modifier le contenu, nous nous abonnons √† l'√©v√©nement et le traitons via la fonction de rappel: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Text</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Field</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;on(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::EVENT_BEFORE_OUTPUT, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $event \Iliich246\YicmsCommon\Base\HookEvent */</span></span> }); } }</code> </pre><br>  L'√©v√©nement EVENT_BEFORE_OUTPUT se produit avant l'affichage du contenu du champ.  Essayons de le changer.  Pour ce faire, nous utilisons l'objet √©v√©nement \ Iliich246 \ YicmsCommon \ Base \ HookEvent: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;on(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::EVENT_BEFORE_OUTPUT, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $event \Iliich246\YicmsCommon\Base\HookEvent */</span></span> $value = $event-&gt;getHook(); $value = strrev($value); $event-&gt;setHook($value); });</code> </pre><br>  L'√©v√©nement HookEvent obtient la valeur du champ avant le d√©clenchement de l'√©v√©nement.  Dans l'√©v√©nement, vous pouvez obtenir cette valeur via $ event-&gt; getHook (), la modifier et la renvoyer √† l'objet via l'√©v√©nement en utilisant $ event-&gt; setHook ($ value).  Ainsi, dans le cas contraire, nous avons invers√© le texte que le champ Texte affiche. <br><br>  Presque chaque classe auto-lou√©e a un certain nombre d'√©v√©nements qui peuvent √™tre connect√©s de mani√®re similaire, mais leur examen d√©passe le cadre de l'article d'enqu√™te. <br><br>  Au total, dans cet article, nous avons examin√© deux modules yicms, √† savoir les modules Common et Pages.  Le module commun comprend des composants tels que les champs, les blocs de fichiers, les blocs d'images et les conditions.  Le module Pages est charg√© de cr√©er des objets de page qui contiennent tous les √©l√©ments du module Commun.  C'est-√†-dire  tous les modules yicms d√©pendent du module commun principal. <br><br><h3>  Module Yii2-yicms-essences </h3><br>  Maintenant, familiarisons-nous avec le module Essences.  Ce module est con√ßu pour cr√©er des entit√©s de type cat√©gorie-&gt; entit√©, par exemple, la cat√©gorie de biens-&gt; biens, type de v√©hicule (voitures, moto) -&gt; v√©hicule sp√©cifique, etc.  Dans le module, ces √©l√©ments sont appel√©s cat√©gories et repr√©sentations. <br><br>  √Ä titre d'exemple, nous montrons la cr√©ation d'un simple catalogue de la cat√©gorie-&gt; type de produit pour une boutique en ligne. <br><br>  Dans la section Dev du module Essences, allez √† la liste des essences et l√† nous allons √† la section Cr√©er une nouvelle essence.  Nous lui donnons le nom du programme produits et laissons le reste des param√®tres par d√©faut.  Par d√©faut, une entit√© avec un comportement est cr√©√©e: une vue peut appartenir √† une cat√©gorie.  Cependant, vous pouvez sp√©cifier d'autres comportements: cr√©er simplement des vues sans cat√©gories, ou une vue peut appartenir √† plusieurs cat√©gories. <br><br>  Les cat√©gories elles-m√™mes sont construites sur un principe arborescent, lorsqu'une cat√©gorie a un parent (√† l'exception de la plus haute).  C'est-√†-dire  Les cat√©gories sont des feuilles d'une structure de donn√©es de type arbre. <br><br>  Total des produits d'entit√© cr√©√©s.  Pour elle, des classes annot√©es automatiquement ont √©t√© cr√©√©es dans le r√©pertoire app \ yicms \ Essences \ Models.  Ensuite, dans le panneau de d√©veloppement, nous devons cr√©er des mod√®les de classe et des mod√®les de pr√©sentation.  Tout cela est similaire √† la fa√ßon dont nous les avons cr√©√©s pour la page d'index.  Les √©l√©ments Champs, Blocs de fichiers, Blocs d'images et Conditions sont disponibles pour eux en mode de cr√©ation √† la vol√©e.  Une fois que nous avons fini de cr√©er des mod√®les dans le panneau d'administration, il devient disponible pour cr√©er des cat√©gories et des vues avec les √©l√©ments de mod√®le que nous avons d√©finis dans le panneau de d√©veloppement. <br><br>  Nous allons donc cr√©er plusieurs cat√©gories de marchandises.  Et pour chaque cat√©gorie de produits, il existe plusieurs produits.  Une fois cela fait, le tout peut √™tre affich√© sur le site principal.  Consid√©rez comment cela se fait.  Dans SiteController, cr√©ez une action actionProcuts: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionProducts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $productsEssence = Products::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'products'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'productsEssence'</span></span> =&gt; $productsEssence ]); }</code> </pre><br>  Cr√©ez une vue des produits pour elle <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $productsEssence \app\yicms\Essences\Models\Products */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content</span></span></span><span class="hljs-class">"&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">productsEssence</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">categories</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">category</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt;: &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">category</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">category</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">represents</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">product</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h2</span></span></span><span class="hljs-class">&gt;: &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">product</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h2</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Gr√¢ce au m√©canisme d'annotation automatique, la m√©thode $ productsEssence-&gt; categories renvoie un tableau d'objets de la classe annot√©e automatiquement app \ yicms \ Essences \ Models \ ProductsCategory.  Comme dans les classes auto-annot√©es pr√©c√©dentes de cette classe, il y a des annotations sur les champs que nous avons cr√©√©s √† la vol√©e, l'EDI pourra utiliser l'auto-compl√©tion.  Il convient √©galement de noter que les classes auto-annot√©es ont √©t√© d√©velopp√©es avec l'id√©e que l'utilisateur yicms pourra y placer sa propre logique m√©tier, c'est-√†-dire  vous pouvez y √©crire votre propre code et le m√©canisme d'annotation automatique modifie les zones sp√©cialement marqu√©es et aucun code utilisateur ne sera affect√©. <br><br>  La m√©thode $ category-&gt; represent renvoie √©galement un tableau d'objets app \ yicms \ Essences \ Models \ ProductsRepresent qui ont tous les m√™mes avantages d'annotation automatique que pour les cat√©gories.  Bien s√ªr, il existe des m√©thodes plus souples pour obtenir des id√©es.  Par exemple, $ category-&gt; getRepresentQuery () retournera un objet ActiveQuery du framework Yii2, qui peut √™tre personnalis√© pour affiner la requ√™te de base de donn√©es, utilis√© pour cr√©er une pagination ou un chargement paresseux. <br><br>  Au total, le module Essenses vous permet de cr√©er rapidement un squelette des fonctionnalit√©s de la boutique, avec le panneau d'administration fonctionnant d√©j√†.  Une logique m√©tier suppl√©mentaire peut √™tre √©crite dans des classes annot√©es automatiquement. <br><br><h3>  Module de r√©troaction Yii2-yicms </h3><br>  Ce module est destin√© √† construire des formulaires de saisie d'informations sur le site par les visiteurs et les utilisateurs du site.  L'id√©ologie du travail reste la m√™me, d'abord dans le panneau de d√©veloppement, nous tapons les champs requis pour le formulaire. <br><br>  Prenons l'exemple du fonctionnement du module.  Cr√©ez un enregistrement avec les messages de nom de programme dans le panneau de d√©veloppement du module de r√©troaction.  Sur la page des param√®tres des messages, nous pouvons voir le bouton Mod√®les de pages de commentaires.  En utilisant ce lien, nous pouvons cr√©er des √©l√©ments du champ type, bloc de fichiers, bloc d'images, conditions qui peuvent √™tre utilis√©es pour formater le contenu de la page des messages.  Ils ne sont pas diff√©rents de ceux que nous avons consid√©r√©s pour le module Pages.  Maintenant, nous sommes plus int√©ress√©s par la section Mod√®les de saisie de commentaires.  Dans cette section, nous pouvons cr√©er des entit√©s telles que des champs d'entr√©e, des fichiers d'entr√©e, des images d'entr√©e et des conditions d'entr√©e.  Ces entit√©s sont exactement ce dont vous avez besoin pour cr√©er des formulaires de saisie personnalis√©s. <br><br>  Cr√©ez deux champs de saisie avec les noms nom et pr√©nom.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Image d'entr√©e nomm√©e photo. </font><font style="vertical-align: inherit;">Condition d'entr√©e nomm√©e accord. </font><font style="vertical-align: inherit;">Pour l'instant, laissons tous les param√®tres de ces entit√©s par d√©faut. </font><font style="vertical-align: inherit;">Plus loin dans cet exemple, nous allons configurer des validateurs qui sont √©galement suspendus √† ces entit√©s √† la vol√©e (les validateurs sont √©galement disponibles pour les entit√©s du module commun et fonctionnent selon la m√™me logique que pour le module de r√©troaction. Nous en discuterons un peu plus tard). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appliquez maintenant le module sur notre site Web. </font><font style="vertical-align: inherit;">Tout d'abord, cr√©ez une nouvelle action dans SiteController:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $messages = \app\yicms\Feedback\Models\Messages::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'messages'</span></span> =&gt; $messages ]); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ensuite, cr√©ez une vue de message et √©crivez ce qui suit: </font></font><br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $message \app\yicms\Feedback\Models\Messages */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $form = \yii\bootstrap\ActiveForm::begin([ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'some-form'</span></span>, <span class="hljs-string"><span class="hljs-string">'options'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'data-pjax'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, ], ]); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">col</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">xs</span></span></span><span class="hljs-class">-12"&gt; &lt;?= \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">helpers</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Html</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">submitButton</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Save</span></span></span><span class="hljs-class">', ['</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">' =&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">btn</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">btn</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">success</span></span></span><span class="hljs-class">']) ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bootstrap</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveForm</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class">(); ?&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour cr√©er le formulaire, nous utiliserons les outils standards du framework. </font><font style="vertical-align: inherit;">Afin de profiter du module de r√©troaction, nous √©crirons ce qui suit:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_name-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_name, $messages-&gt;input_name-&gt;key) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_surname-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_surname, $messages-&gt;input_surname-&gt;key) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_photo-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_photo, $messages-&gt;input_photo-&gt;key) -&gt;fileInput() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_agreement-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_agreement, $messages-&gt;input_agreement-&gt;key)-&gt;checkbox() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour les entit√©s de type entr√©e, vous devez utiliser le pr√©fixe input_, sinon, les annotations automatiques fonctionnent pour elles de la m√™me mani√®re que pour le reste des choses en yicms. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au d√©but, il y a une v√©rification de l'activit√© du champ, si le champ est inactif, alors il ne doit pas √™tre rendu, et m√™me s'il est rendu, les donn√©es qui ont √©t√© remplies ne seront pas t√©l√©charg√©es sur le serveur. L'activit√© sur le terrain peut √™tre activ√©e / d√©sactiv√©e dans le panneau de d√©veloppement. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vient ensuite la forme standard du cadre o√π vous devez √©crire comme ceci</font></font><br><br><pre> <code class="php hljs">$form-&gt;field($messages-&gt;input_name, $messages-&gt;input_name-&gt;key)</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ messages-&gt; nom_entr√©e renverra un objet de la classe app \ yicms \ Feedback \ Models \ Message \ InputFields \ Name qui est le descendant du framework Model Yii2 et peut √™tre utilis√© dans les formulaires, $ messages-&gt; nom_entr√©e-&gt; key retournera la valeur de cl√© correcte, dans l'ordre afin que le formulaire puisse √™tre charg√©. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant, lorsque nous allons √† la page avec le formulaire, tous ses champs sont rendus, mais le chargement sur le serveur ne fonctionne pas encore. C'est tr√®s simple √† faire. J'ai essay√© de rendre l'interface de travail de r√©troaction aussi similaire que possible √† l'interface de travail du mod√®le dans le cadre. Oui, j'ai d√ª "sacrifier" un peu d'architecture, mais dans l'ensemble cela s'est av√©r√© comme ceci:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $messages = \app\yicms\Feedback\Models\Messages::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;load(Yii::$app-&gt;request-&gt;post()) &amp;&amp; $messages-&gt;validate()) { $messages-&gt;handle(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'messages'</span></span> =&gt; $messages ]); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le formulaire va maintenant se charger, valider et enregistrer sur le serveur. </font><font style="vertical-align: inherit;">Dans la section admin, nous pouvons voir les informations qui ont √©t√© saisies dans le formulaire. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bien s√ªr, vous pouvez utiliser une classe annot√©e automatiquement:</font></font><br><br> <code>\app\yicms\Feedback\Models\Messages</code> <br> <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Messages</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Feedback</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> self instance . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInstance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::getByName(<span class="hljs-string"><span class="hljs-string">'messages'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@inheritdoc</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;on(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::EVENT_AFTER_HANDLE, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($event)</span></span></span><span class="hljs-function"> </span></span>{ Yii::$app-&gt;mailer-&gt;compose(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'message'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span> ]) -&gt;setFrom(<span class="hljs-string"><span class="hljs-string">'from@domain.com'</span></span>) -&gt;setTo(<span class="hljs-string"><span class="hljs-string">'to@domain.com'</span></span>) -&gt;setSubject(<span class="hljs-string"><span class="hljs-string">'Message subject'</span></span>) -&gt;send(); }); } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet exemple, nous nous sommes inscrits √† l'√©v√©nement EVENT_AFTER_HANDLE. </font><font style="vertical-align: inherit;">L'√©v√©nement se produit apr√®s que les donn√©es du formulaire ont √©t√© enregistr√©es sur le serveur. </font><font style="vertical-align: inherit;">Dans ce cas, nous envoyons une lettre au mod√®le dont nous pouvons ins√©rer les donn√©es de formulaire enregistr√©es:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this \yii\web\View view component instance */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $message \app\yicms\Feedback\Models\Message */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;h1&gt;Mail on message&lt;/h1&gt; &lt;h1&gt;Name: <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $message-&gt;input_name-&gt;value <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/h1&gt; &lt;h2&gt;Surname: <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $message-&gt;input_surname-&gt;value <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/h2&gt;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ message-&gt; input_name-&gt; value renvoie simplement les donn√©es actuelles qui ont √©t√© stock√©es dans la base de donn√©es. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voyons maintenant comment fonctionnent les validateurs. Dans le panneau de d√©veloppement de l'entit√© de champ de saisie portant le nom, ajoutez le validateur requis. Il s'agit du validateur de framework yii \ validators \ RequiredValidator standard. Lorsque nous l'avons ajout√©, il n'est pas encore actif, car le bouton avec son nom est blanc. Pour l'activer, vous devez cliquer sur ce bouton, la fen√™tre des param√®tres du validateur s'ouvrira. L√†, vous devez installer la case √† cocher et l'activer. Dans le m√™me temps, vous pouvez configurer tous les autres param√®tres du validateur, tels que les messages d'erreur dans toutes les langues du syst√®me, etc. Apr√®s l'enregistrement, l'ic√¥ne du validateur devient verte, ce qui signifie qu'elle est devenue active et sera appliqu√©e lors de la validation des formulaires.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä l'entr√©e_condition avec l'accord de nom, nous suspendons le validateur de comparaison. </font><font style="vertical-align: inherit;">Et configurez-le pour comparer avec 1, tapez num√©ro et l'op√©rateur ==. </font><font style="vertical-align: inherit;">De plus, vous pouvez √©crire un message dans les champs de texte d'erreur, tel que ¬´Vous devez accepter les termes de l'offre¬ª. </font><font style="vertical-align: inherit;">D√©sormais sur le formulaire, la validation n'aura lieu que si la case √† cocher de l'accord est coch√©e. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au total, dans cet article, nous avons examin√© les principales caract√©ristiques du syst√®me yicms.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr454914/">https://habr.com/ru/post/fr454914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr454896/index.html">Pourquoi j'ai chang√© d'ind√©pendant pour une √©quipe √† distance</a></li>
<li><a href="../fr454898/index.html">La programmation est plus que du codage</a></li>
<li><a href="../fr454900/index.html">Comment rendre les formulaires Web sur le site pratiques et s√ªrs: outils de d√©veloppement et constructeurs</a></li>
<li><a href="../fr454906/index.html">√âvaluation des plates-formes d'enseignement suppl√©mentaires en informatique: selon les r√©sultats de l'√©tude My Circle</a></li>
<li><a href="../fr454912/index.html">Dwarf Fortress Tarn Adams parle de d√©veloppement de jeux</a></li>
<li><a href="../fr454916/index.html">Architecture de r√©seau neuronal pour impl√©menter l'algorithme RL avec la possibilit√© de d√©finir simultan√©ment des actions en cours d'ex√©cution</a></li>
<li><a href="../fr454918/index.html">Comment combiner le dos de deux d√©taillants sur SAP en 12 heures</a></li>
<li><a href="../fr454920/index.html">Performances frontales: analyse des mesures importantes</a></li>
<li><a href="../fr454922/index.html">Contes sur les clients √©trangers et leurs caract√©ristiques du travail en Russie apr√®s la loi PD</a></li>
<li><a href="../fr454924/index.html">Param√®tres d'authentification dans Veeam Backup pour Microsoft Office 365 v3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>