<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👦🏾 🍉 🧛 我在搜索智能家居的物理控制面板 🚶🏾 🧛🏻 💅🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="很久以前，我有个想法要安装一个控制面板，该面板位于公寓/房屋内前门的旁边。 


有几种实现此想法的选项： 


- PLC操作员触摸屏 
- 平板电脑 
- 触摸显示器连接到微型计算机。 



 另一个立即限制设备选择的要求：当触发运动传感器时（并且仅在家里有人在家的情况下），来自外部摄像机的图...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我在搜索智能家居的物理控制面板</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482800/"><p> 很久以前，我有个想法要安装一个控制面板，该面板位于公寓/房屋内前门的旁边。 </p><br><p>有几种实现此想法的选项： </p><br><ul><li>  <abbr title="可编程逻辑控制器">PLC</abbr>操作员触摸屏 </li><li> 平板电脑 </li><li> 触摸显示器连接到微型计算机。 </li></ul><br><p><img src="https://habrastorage.org/webt/fl/nj/ad/flnjadfhyyyzg5zt5aesfig8fyg.gif"><br> 另一个立即限制设备选择的要求：当触发运动传感器时（并且仅在家里有人在家的情况下），来自外部摄像机的图像应自动显示在控制面板上。 </p><a name="habracut"></a><br><h2 id="1vybor-devaysa">  1.选择设备 </h2><br><p> 明确提出要求后，我不知道如何从外部进行控制的iPad消失了（这很可惜，因为它们有大量的壁挂式安装选择）和诸如<a href="https://nextion.tech/" rel="nofollow">Nextion之</a>类的<abbr title="人机界面">HMI</abbr>设备，因为无法在其上显示相机图像。 </p><br><p><img src="https://habrastorage.org/webt/n2/xs/od/n2xsodz7s1ciurk5uvqcmuojshq.jpeg"><br>  <em>Loxone的iPad Wallmount的选项之一</em> </p><br><p> 并且尽管现在市场上已经出现了专用设备，例如： </p><br><ul><li>  <a href="https://store.google.com/us/product/google_nest_hub%3Fhl%3Den-US" rel="nofollow">Google Nest枢纽</a> </li><li>  <a href="https://www.facebook.com/PortalFromFacebook/" rel="nofollow">来自Facebook的门户</a> </li><li>  <a href="https://www.amazon.com/Echo-Show-8/dp/B07PF1Y28C" rel="nofollow">亚马逊回声秀</a> </li></ul><br><p> 但是，据我所知，这些设备的外部控制问题仍然存在，并且尚未完全解决。 </p><br><p> 除了面板的程序部分之外，对我而言，另一个重要的部分是在将该面板物理固定到墙上时没有“集体农场”，这意味着在该面板的安装位置将至少一根电缆连接到该设备以及墙上足够大的墙上的安装接线盒中，以进行隐藏电源面板的位置。 </p><br><p><img src="https://habrastorage.org/webt/ti/sp/4n/tisp4n5xa4ac3nu5sgelwf5rz3k.jpeg"><br>  <em>安装盒</em> </p><br><h2 id="2-vliyanie-chyornoy-pyatnicy-na-vybor">  2.“黑色星期五”对选择的影响 </h2><br><p> 当我在2019年黑色星期五的前夕再次想起自己的想法时，我决定购买便宜的东西进行测试。 我不想麻烦焊接和将触摸屏连接到Raspberry Pi，所以选择以29.99美元（约合1,700英镑）的价格购买了<a href="https://www.amazon.com/gp/product/B07FKR6KXF/" rel="nofollow">Amazon Fire 7平板电脑</a> 。 我认为在法式长棍面包车间中，可以制造出合适尺寸的适当框架，以将平板电脑放在墙上。 </p><br><p><img src="https://habrastorage.org/webt/bv/nj/s6/bvnjs6u-n2tqmvuwcra0okxawhg.jpeg"><br>  <em>Amazon Fire 7平板电脑上的团队胜利恢复项目（TWRP）</em> </p><br><p> 此外，按照流行资源xda-developers.com上的<a href="https://forum.xda-developers.com/amazon-fire/orig-development/fire-7-2019-mustang-unbrick-downgrade-t3944365" rel="nofollow">说明进行操作</a> ，我设法以编程方式解锁了Fire 7平板电脑加载器并安装了TWRP，而无需进行物理拆卸。 </p><br><p><img src="https://habrastorage.org/webt/b8/ga/pe/b8gape_ziak4jx0ofkqsmini_re.png"><br>  <em>在解锁Fire 7（2019，Mustang）的过程中</em> </p><br><p> 我想指出的是，该指令最初看上去令人生畏，但结果-此处的所有描述都非常透明。 由于最初没有使用<a href="https://ru.wikipedia.org/wiki/Fire_OS" rel="nofollow">Fire OS的</a>计划，因此我安装了<a href="https://ru.wikipedia.org/wiki/LineageOS" rel="nofollow">全新的LineageOS Android发行版，</a>没有其他应用程序，也没有Google服务，即没有安装GApp。 </p><br><p><img src="https://habrastorage.org/webt/dt/f7/if/dtf7ifsb8hba6uoep5wyvp6cpym.jpeg"><br>  <em>Amazon Fire 7 Tablet上的LineageOS（2019，野马）</em> </p><br><p> 我想获得一个干净的设备，其最少的程序不受任何帐户限制。 </p><br><h2 id="3-udalennoe-upravlenie-cherez-adb">  3.通过亚行进行远程控制 </h2><br><p> 由于我手上已经扎根（完全访问权限）Android平板电脑，因此程序选择应该没有问题。 <br> 但是，我想使用一些标准工具，因此选择了<abbr title="Android调试桥">ADB</abbr> 。 这适用于所有制造商未故意阻止此功能的Android设备-只需多次单击“内部版本号”菜单项，然后将打开一个新的“供开发人员使用”菜单项，进行所有设置。 </p><br><p> 由于我需要播放来自IP摄像机的视频流（在我的情况下为<abbr title="实时流协议">RTSP</abbr> ，为此，我需要一个<a href="https://yandex.ru/search/%3Ftext%3Dvlc%2520apk%26lr%3D50" rel="nofollow">VLC播放器</a> ，以及<a href="https://yandex.ru/search/%3Ftext%3Dchrome%2520apk%26lr%3D50" rel="nofollow">Google Chrome浏览器，</a>以便全屏显示智能家居面板。为了通过计算机上的终端对平板电脑进行必要的操作，执行以下命令。 </p><br><p>通过命令行在平板电脑上安装应用程序： <br> <code>adb install VLC.apk</code> <br> 通过命令行打开/关闭平板电脑： <br> <code>adb shell input keyevent KEYCODE_POWER</code> <br> 通过命令行从摄像机开始广播： <br> <code>adb shell am start -a android.intent.action.VIEW -d rtsp://login:pass@192.168.15.21:88/videoMain -t video/mp4</code> <br> 通过命令行，在浏览器中启动智能家居控制面板： <br> <code>adb shell am start -a android.intent.action.VIEW -d http://192.168.15.10:8123/lovelace/default_view</code> </p> <br><p> 为了正常工作，我设置了扩展屏幕的设置-当控制面板完全隐藏时。 </p><br><p><img src="https://habrastorage.org/webt/rc/rb/oc/rcrbocie4yuknkqszuwg_6pahzy.png"><br>  <em>配置LineageOS</em> </p><br><p> 当然，我关闭了屏幕锁定-没有这个，很难使某些东西自动化。 </p><br><p><img src="https://habrastorage.org/webt/oj/x0/xv/ojx0xval66av7ezk4njg2ngwmba.png"><br>  <em>配置LineageOS</em> </p><br><p> 这是一个<a href="https://gist.github.com/mcfrojd/9e6875e1db5c089b1e3ddeb7dba0f304" rel="nofollow">小小的生活技巧</a> ，您可以找到所有已安装的应用程序和用于启动它们的命令的列表。 首先，登录到控制台： <br> <code>adb shell</code> <br> 然后执行： <br> <code>pm list packages | sed -e "s/package://" | while read x; do cmd package resolve-activity --brief $x | tail -n 1 | grep -v "No activity found"; done</code> <br> 这将列出所有程序： </p><br><p><img src="https://habrastorage.org/webt/_l/3z/21/_l3z21t2uwufktefq52xnglcix8.png"><br>  <em>执行命令以显示设备上的所有程序</em> </p><br><p> 您可以自行决定使用所获得的信息，例如，启动时钟： <br> <code>adb shell am start -a android.intent.action.VIEW -d -n com.android.deskclock/.DeskClock</code> </p> <br><h2 id="4-home-assistant">  4.家庭助理 </h2><br><p> 以上所有只是为自动显示平板电脑屏幕上的相机和软件控制面板所做的准备。 我在前门上方的两个位置有两个摄像头选项： </p><br><ol><li> 具有集成运动传感器的海康威视DS-2CD2463G0-IW摄像机。 </li><li> 球型摄像机与隐藏在通道走廊吊顶上方的微波运动传感器配对，并与<a href="https://www.ab-log.ru/smart-house/ethernet/megad-2561" rel="nofollow">MegaD-2561</a>多功能<a href="https://www.ab-log.ru/smart-house/ethernet/megad-2561" rel="nofollow">以太网控制器</a>相连。 肉眼看不见运动传感器，但可以使用。 摄像机是普通的，不是隐藏的安装。 </li></ol><br><p> 首先，您需要通过网络启用ADB： </p><br><p><img src="https://habrastorage.org/webt/rr/ty/vh/rrtyvhhrwwzteayiwjwqvsuwwes.png"><br>  <em>配置LineageOS</em> </p><br><p> 之后，平板电脑即可进行远程控制。 </p><br><p> 由于使用<a href="https://www.home-assistant.io/hassio/" rel="nofollow">Hass.io</a> ，因此使用了特殊的<a href="https://github.com/hassio-addons/addon-adb" rel="nofollow">ADB</a>附加组件<a href="https://github.com/hassio-addons/addon-adb" rel="nofollow">-Android Debug Bridge</a> ，它使您可以控制任何支持ADB控制的设备。 在此附加组件的配置中，他指出了他唯一的设备： </p><br><pre> <code class="plaintext hljs">{ "devices": [ "192.168.15.24" ], "reconnect_timeout": 90 }</code> </pre> <br><p> 此后，这有点奇怪，但是所有这些设备都需要在Home Assistant中配置为<code>androidtv</code> 。 </p><br><div class="spoiler">  <b class="spoiler_title">configuration.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">media_player: - platform: androidtv name: Amazon Fire 7 host: 192.168.15.24 adb_server_ip: 127.0.0.1</code> </pre> </div></div><br><p> 最后一步是注册自动化，该操作会在平板电脑的屏幕上显示相机，然后关闭应用程序，然后显示Home Assistant控制面板，并过一会儿再将其关闭： </p><br><div class="spoiler">  <b class="spoiler_title">automations.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">################################################### # # #  android  # # # ################################################### - alias: Amazon Fire 7 Mikhail trigger: - platform: state entity_id: binary_sensor.kamera_u_liftov_pir_alarm from: 'off' to: 'on' condition: - condition: state entity_id: device_tracker.7c_xx_5c_b5_xx_1b # state: 'home' action: - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent KEYCODE_POWER - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: am start -a android.intent.action.VIEW -d rtsp://login:pass@192.168.15.21:88/videoMain -t video/mp4 - delay: '00:00:30' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent KEYCODE_APP_SWITCH - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent DEL - delay: '00:00:01' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: am start -a android.intent.action.VIEW -d http://192.168.15.10:8123/lovelace/default_view - delay: '00:00:10' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent KEYCODE_APP_SWITCH - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent DEL - delay: '00:00:01' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: HOME</code> </pre> </div></div><br><p> 最终结果还不是在现场，而是在工作场所： </p><br><p><img src="https://habrastorage.org/webt/jt/jk/32/jtjk32ag1ty-nawvtkwzeylkxuc.jpeg"><br>  <em>后视图</em> </p><br><p> 我还删除了实际使用的面板，但无法弄清楚如何覆盖视频中的所有个人数据，结果发现其中有很多，所以我只介绍了后视图:) </p><br><h2 id="itog"> 总结 </h2><br><p> 可以创建具有指定特征的物理控制面板。 主要成本中-仅便宜的平板电脑。 仍然需要在使用地点安装高质量的设备来解决该问题，但这已经是一个更具建设性的话题。 </p><br><p> 发表者： <a href="https://www.facebook.com/mikhail.shardin" rel="nofollow">Mikhail Shardin</a> ， <br>  2020年1月4日 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN482800/">https://habr.com/ru/post/zh-CN482800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN482788/index.html">Google Coral Edge TPU的内在功能：测试速度和解析设备</a></li>
<li><a href="../zh-CN482790/index.html">忘记同态加密：现在我们有了功能加密</a></li>
<li><a href="../zh-CN482792/index.html">ITER项目在2019年</a></li>
<li><a href="../zh-CN482794/index.html">神经网络。 都去哪儿了</a></li>
<li><a href="../zh-CN482798/index.html">看到树后的森林</a></li>
<li><a href="../zh-CN482802/index.html">从Telegram v 2.0远程包含Mikrotik脚本</a></li>
<li><a href="../zh-CN482804/index.html">Java：使用Spring and Logback或Log4j2将多行日志折叠成单行日志</a></li>
<li><a href="../zh-CN482806/index.html">2019年关于编程的极权主义政权，反犹太主义和同性恋恐惧症的宣传？ -有可能</a></li>
<li><a href="../zh-CN482812/index.html">数学家在“危险”问题的研究上取得了突破</a></li>
<li><a href="../zh-CN482814/index.html">树的一般视图，不仅实现而且</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>