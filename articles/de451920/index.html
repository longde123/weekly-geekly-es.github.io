<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🌾 👨🏽‍🚒 🙅🏻 Optimieren Sie den E-Mail-Speicher in der Zimbra Collaboration Suite 🚵🏽 🧓 👨🏻‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In einem unserer vorherigen Artikel zur Infrastrukturplanung während der Implementierung der Zimbra Collabortion Suite im Unternehmen wurde gesagt, da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimieren Sie den E-Mail-Speicher in der Zimbra Collaboration Suite</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/451920/">  In einem unserer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorherigen Artikel</a> zur Infrastrukturplanung während der Implementierung der Zimbra Collabortion Suite im Unternehmen wurde gesagt, dass die Hauptbeschränkung bei der Arbeit dieser Lösung die Eingabe- / Ausgabegeschwindigkeit von Festplattengeräten in Mail-Speichern ist.  In einer Zeit, in der mehrere hundert Mitarbeiter des Unternehmens gleichzeitig auf denselben Mailspeicher zugreifen, reicht die Kanalbreite zum Schreiben und Lesen von Informationen von Festplatten möglicherweise nicht für den reaktionsschnellen Dienst aus.  Und wenn dies für kleine Zimbra-Installationen kein besonderes Problem darstellt, kann dies bei großen Unternehmen und SaaS-Anbietern dazu führen, dass die E-Mail-Arbeit nicht mehr reagiert und die Effizienz der Mitarbeiter sowie die SLA verletzt werden.  Aus diesem Grund sollte beim Entwurf und Betrieb großer Zimbra-Installationen besonderes Augenmerk auf die Optimierung des Betriebs von Festplatten im E-Mail-Speicher gelegt werden.  Schauen wir uns zwei Fälle an und versuchen herauszufinden, welche Methoden zur Optimierung der Belastung von Festplattenspeichern in jedem Fall angewendet werden können. <br><br><img src="https://habrastorage.org/web/524/a74/d9d/524a74d9dc834ae581c7893fc079c693.png" alt="Bild"><a name="habracut"></a><br><br>  <b>1. Optimierung beim Entwurf einer groß angelegten Zimbra-Installation</b> <br><br>  In der Entwurfsphase einer hoch geladenen Zimbra-Installation muss der Administrator entscheiden, welches Datenspeichersystem verwendet werden soll.  Um sich für dieses Problem zu entscheiden, sollten Sie wissen, dass die Hauptlast auf Festplatten vom MariaDB-DBMS, dem Apache Lucene-Suchsystem sowie dem Blob-Speicher erstellt wird, der Teil der Zimbra Collaboration Suite ist.  Aus diesem Grund ist es für den Betrieb dieser Softwareprodukte unter hoher Last erforderlich, schnelle und zuverlässige Geräte zu verwenden. <br><br>  Unter normalen Bedingungen kann Zimbra sowohl auf RAID von Festplatten als auch auf Speicher installiert werden, der über das NFS-Protokoll verbunden ist.  Bei sehr kleinen Installationen können Sie Zimbra auf einem normalen SATA-Laufwerk installieren.  In großen Installationen weisen alle diese Technologien jedoch verschiedene Nachteile in Form einer verringerten Schreibgeschwindigkeit oder einer geringen Zuverlässigkeit auf, was für große Unternehmen und insbesondere für SaaS-Anbieter nicht akzeptabel ist. <br><br>  Aus diesem Grund ist es für Zimbra am besten, unter Bedingungen großer Infrastrukturen SAN zu verwenden.  Es ist derzeit in der Lage, den höchsten Durchsatz für Speichergeräte bereitzustellen, und gleichzeitig birgt seine Verwendung aufgrund der Fähigkeit, eine große Anzahl von Caches zu verbinden, praktisch keine signifikanten Risiken für das Unternehmen.  Eine gute Idee wäre die Verwendung von NVRAM, das in vielen SANs verwendet wird, um die Aufzeichnungsleistung zu beschleunigen.  Das Zwischenspeichern aufgezeichneter Daten auf den Festplatten selbst ist jedoch besser zu deaktivieren, da dies bei Stromproblemen zu irreparablen Schäden an den Medien und Datenverlust führen kann. <br><br>  Für die Wahl des Dateisystems ist es am besten, den Standard für Linux Ext3 / Ext4 zu verwenden.  Die <b>Hauptnuance</b> des Dateisystems besteht darin, dass es mit der <b>Option -noatime gemountet werden sollte</b> .  Dieser Parameter deaktiviert die Funktion zum Festlegen der Zeit des letzten Zugriffs auf Dateien, was bedeutet, dass die Lese- und Schreiblast erheblich reduziert wird.  Im Allgemeinen sollten beim Erstellen eines ext3- oder ext4-Dateisystems für Zimbra die folgenden Parameter des Dienstprogramms <b>mke2fs</b> verwendet werden: <br><br><blockquote> <b>-j</b> - Erstellt das Dateisystem mit einem ext3 / ext4-Journal. <br>  <b>-L TITLE</b> - Um einen Datenträgernamen zu erstellen, verwenden Sie ihn in / etc / fstab <br>  <b>-O dir_index</b> - Um einen Hash-Suchbaum zu verwenden, um die Dateisuche in großen Verzeichnissen zu beschleunigen <br>  <b>-m 2</b> - Zum Reservieren von 2% des Volumes in großen Dateisystemen im Stammverzeichnis <br>  <b>-J size = 400</b> - Zum Erstellen eines großen Protokolls <br>  <b>-b 4096</b> - Zum Bestimmen der Größe des Blocks in Bytes <br>  <b>-i 10240</b> - Für den Nachrichtenspeicher sollte diese Option der durchschnittlichen Nachrichtengröße entsprechen.  Sie sollten diesen Parameter sorgfältig prüfen, da sein Wert anschließend nicht mehr geändert werden kann </blockquote><br>  Darüber hinaus empfehlen wir, <b>Dirsync</b> für den Blob-Speicher, den <b>Metadatenspeicher</b> für die Lucene-Suche und den MTA-Warteschlangenspeicher zu aktivieren.  Dies sollte aus dem Grund erfolgen, dass Zimbra normalerweise das Dienstprogramm <b>fsync</b> verwendet, um <b>sicherzustellen</b> , dass ein Blob mit Daten auf die Festplatte geschrieben wird.  Wenn das Zimbra-Postfach oder der MTA während der Nachrichtenübermittlung neue Dateien erstellt, müssen die Änderungen, die in den entsprechenden Ordnern vorgenommen wurden, auf die Festplatte geschrieben werden.  Selbst wenn die Datei bereits mit <b>fsync</b> auf die Festplatte <b>geschrieben wurde</b> , hat der Datensatz zum Hinzufügen zu Verzeichnissen möglicherweise keine Zeit zum Schreiben auf die Festplatte und kann daher aufgrund eines plötzlichen Serverausfalls verloren gehen.  Durch die Verwendung von <b>Dirsync können</b> diese Probleme vermieden werden. <br><br>  <b>2. Optimierung mit einer funktionierenden Zimbra-Infrastruktur</b> <br><br>  Es kommt häufig vor, dass nach mehreren Betriebsjahren von Zimbra die Anzahl der Benutzer erheblich zunimmt und der Dienst von Tag zu Tag weniger ansprechbar wird.  Der Ausweg aus dieser Situation liegt auf der Hand: Sie müssen lediglich neue Server zur Infrastruktur hinzufügen, damit der Dienst wieder so schnell wie zuvor funktioniert.  In der Zwischenzeit ist es bei weitem nicht immer möglich, sofort neue Server zur Infrastruktur hinzuzufügen, um deren Geschwindigkeit zu erhöhen.  Oft müssen IT-Manager den Kauf neuer Server lange Zeit mit der Buchhaltungs- oder Sicherheitsabteilung koordinieren. Außerdem können Lieferanten den neuen Server häufig nicht zu spät bringen oder liefern nicht das, was benötigt wird. <br><br>  Natürlich ist es am besten, Ihre Zimbra-Infrastruktur mit einer Marge aufzubauen, um immer eine Marge für ihre Erweiterung zu haben und von niemandem abhängig zu sein. Wenn der Fehler jedoch bereits gemacht wurde, kann der IT-Manager nur die Konsequenzen ausgleichen.  Beispielsweise kann ein IT-Manager eine geringfügige Produktivitätssteigerung erzielen, indem er vorübergehend Linux-Systemdienste deaktiviert, die während des Betriebs regelmäßig auf Festplatten zugreifen und daher die Geschwindigkeit von Zimbra beeinträchtigen können.  So können Sie für eine Weile deaktivieren: <br><br><blockquote>  <b>autofs, netfs</b> - Remote-Dateisystem- <b>Erkennungsdienste</b> <br>  <b>Tassen</b> - Druckservice <br>  <b>xinetd, vsftpd</b> - Integrierte * NIX-Dienste, die Sie höchstwahrscheinlich nicht benötigen <br>  <b>portmap, rpcsvcgssd, rpcgssd, rpcidmapd</b> - <b>Remoteprozeduraufrufdienste</b> , die üblicherweise in Verbindung mit Netzwerkdateisystemen verwendet werden <br>  <b>dovecot, cyrus-imapd, sendmail, exim, postfix, ldap</b> - Duplikate der wichtigsten Dienstprogramme, die in der Zimbra Collaboration Suite enthalten sind <br>  <b>slocate / aktualisiertes b</b> - Da Zimbra jede Nachricht in einer separaten Datei speichert, kann das tägliche Starten des <b>aktualisierten b-</b> Dienstes Probleme verursachen. Daher können Sie dies manuell bei der geringsten Serverlast tun </blockquote><br>  Das Einsparen von Systemressourcen infolge der Deaktivierung dieser Dienste ist nicht sehr wichtig, aber selbst dies kann unter Bedingungen höherer Gewalt sehr nützlich sein.  Nach dem Hinzufügen des neuen Servers zur Zimbra-Infrastruktur wird empfohlen, zuvor deaktivierte Dienste wieder zu aktivieren. <br><br>  Es ist auch möglich, den Zimbra-Betrieb zu optimieren, indem der Syslog-Dienst auf einen separaten Server verschoben wird, damit während des Betriebs keine E-Mail-Speicherfestplatten geladen werden.  Für diese Zwecke ist fast jeder Computer geeignet, bis hin zu einem billigen Single-Board-Raspberry Pi. <br><br>  Bei allen Fragen zur Zextras Suite können Sie sich per E-Mail an katerina@zextras.com an den Vertreter der Firma "Zextras" Katerina Triandafilidi wenden </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de451920/">https://habr.com/ru/post/de451920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de451906/index.html">Exchange-Sicherheitsanfälligkeit: Ermitteln der Erhöhung der Berechtigung für einen Domänenadministrator</a></li>
<li><a href="../de451908/index.html">Die Geschichte der Computer: eine Nacht im Yandex Museum</a></li>
<li><a href="../de451912/index.html">Das tiefe neuronale Netzwerk von MuseNet schreibt Musik</a></li>
<li><a href="../de451916/index.html">Asynchrones PHP und die Geschichte eines Fahrrads</a></li>
<li><a href="../de451918/index.html">Auf die Frage von TI</a></li>
<li><a href="../de451922/index.html">Festkomma-Arithmetik in C ++</a></li>
<li><a href="../de451926/index.html">Über Live-Code nach 130 Streams</a></li>
<li><a href="../de451928/index.html">So richten Sie Webanalysen auf AMP-Seiten ein</a></li>
<li><a href="../de451930/index.html">Automatisierung der Treppenhausbeleuchtung</a></li>
<li><a href="../de451932/index.html">PHDays 9: Willkommen im Bereich Sichere Entwicklung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>