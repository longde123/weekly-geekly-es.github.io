<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∫üèø üöÇ üèáüèø Personal f√ºr den Weihnachtsmann üë®üèª‚Äçüè≠ üêØ üé•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jedes Jahr am 31. Dezember fahre ich im Kost√ºm des Weihnachtsmanns und meiner Frau in der Rolle der Schneewittchens mit Gl√ºckw√ºnschen zu meinen Freund...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Personal f√ºr den Weihnachtsmann</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479404/"><img src="https://habrastorage.org/webt/_m/qk/q9/_mqkq91grdlhtsaiv0-utvh-2r4.jpeg"><br><br>  Jedes Jahr am 31. Dezember fahre ich im Kost√ºm des Weihnachtsmanns und meiner Frau in der Rolle der Schneewittchens mit Gl√ºckw√ºnschen zu meinen Freunden durch die Stadt.  Da das neue Jahr bald kommt, entschloss ich mich zu pr√ºfen, ob ich alles f√ºr ihn bereit habe, und holte mein abgenutztes Personal aus dem Keller.  Zu meiner √úberraschung hat er, nachdem er ein Jahr im Keller gelegen hatte, auch jetzt noch richtig gearbeitet!  Sein Akku ist noch irgendwie aufgeladen!  Das Personal ist nicht sehr hell, aber es leuchtet.  Nat√ºrlich muss ich aufladen und sehe zu, dass eine LED nicht mehr funktioniert, aber das ist reparabel - wir werden es beheben. <br><br>  Ich habe dieses Personal im Jahr 2012 gemacht, und seitdem hat es mir treu gedient.  Die Sache ist ganz einfach, aber sehr effektiv, vor allem die Kinder freuen sich dar√ºber.  Er ist fast wie ein Jedi-Schwert - nur ein Stab, und f√ºr den echten Weihnachtsmann ist das eine notwendige Sache.  Ich habe mich entschlossen, hier auf Habr√© √ºber ihn zu schreiben - pl√∂tzlich wird sich jemand von der Idee inspirieren lassen und dies bis zum neuen Jahr selbst machen, es ist noch Zeit. <br><a name="habracut"></a><br>  Um einen Stab zu machen, ben√∂tigen Sie: <br><br><ul><li>  ein St√ºck Plastikwasserleitung 1,3 Meter; </li><li>  ein wenig gl√§nzend selbstklebend zur Dekoration; </li><li>  ein St√ºck UTP-5-Netzwerkkabel oder ein anderes geeignetes Kabel; </li><li>  blaue LEDs, mindestens 24 St√ºck; </li><li>  Batterie </li><li>  Ein- / Ausschalter; </li><li>  jeder kleine Mikrocontroller oder jede FPGA-Karte, die etwas enth√§lt, das Sie programmieren k√∂nnen; </li><li>  Ein gro√ües Ball-Weihnachtsbaumspielzeug, das in zwei H√§lften geteilt werden kann, sodass sowohl das Brett als auch der Akku darin versteckt werden k√∂nnen. </li></ul><br>  Die notwendigen Teile sind auf diesem Foto zu sehen: <br><br><img src="https://habrastorage.org/webt/wi/8f/zd/wi8fzdau34zglx89jlc59vd7js8.jpeg"><br><br>  Das Ger√§t des Personals ist sehr einfach.  Es gibt vor allem nichts zu schreiben.  Wir nehmen eine wei√üe Kunststoffwasserleitung und bohren mehrere L√∂cher im gleichen Abstand von 200 mm.  Ich habe 6 L√∂cher. <br><br>  Wir l√∂sen das UTP-5-Kabel in mehrere verdrillte Paare auf.  Es werden sechs Adernpaare ben√∂tigt.  Wir schleudern sie in die L√∂cher und geben sie durch ein Ende der Leitung ab, wo sich die magische Kugel des Stabes befinden wird.  Wo Paare von Dr√§hten in die L√∂cher des Rohrs gehen, reinigen wir sie und wickeln sie in einem gewissen Abstand fest um das Rohr.  Wir l√∂ten.  An den entstehenden "Bus" im Stabkreis l√∂ten parallel 4 blaue LEDs: <br><br><img src="https://habrastorage.org/webt/l1/je/dl/l1jedl9jftto90xq6rkkl-k22pm.jpeg"><br><br>  Oben in der Leitung m√ºssen Sie ein gr√∂√üeres Loch bohren und dort den Netzschalter der Steuerplatine einf√ºgen: <br><br><img src="https://habrastorage.org/webt/3u/73/b1/3u73b1fpnh8xlup4lq1l-hrzej4.jpeg"><br><br>  Ich habe den Mars-Rover-Schal als Steuerplatine.  Hier steht der FPGA Altera MAX II, und da das Board urspr√ºnglich zum Anschluss von Spielzeugmotoren mit geringer Leistung gedacht war, sind die Chip-Ausg√§nge auf dem Board in 10 Teilen zusammengefasst, um ein wenig mehr Strom zu liefern.  Es gibt nur 6 solcher kombinierten Pins auf der Platine - dies sind die "Signale" der Platine f0, f1, f2, f3, f4, f5.  So kann ich die LEDs aus diesen Schlussfolgerungen direkt mit Strom versorgen, ohne bef√ºrchten zu m√ºssen, den Ausgang des FPGA zu verbrennen.  Auch auf der Platine selbst befinden sich 8 gelbe LEDs - diese k√∂nnen auch gez√ºndet werden.  Wenn der Ball oben auf dem Stab durchscheinend ist, sorgt dies auch f√ºr einen visuellen Effekt. <br><br>  Wenn Sie Arduino zum Beispiel in einem Stab verwenden, m√ºssen Sie m√∂glicherweise einen kleinen Schal mit Transistortasten l√∂ten, um viele LEDs zu steuern, da es besser ist, nicht mehr als 10-15 mA von einem Pin des Mikrocontrollers abzunehmen, aber wir brauchen viel mehr f√ºr LEDs. <br><br>  Die Karte muss mit dem Steuerprogramm geflasht werden.  Die Idee ist, dass, wenn Sie den Knopf auf dem Stab dr√ºcken, das Brett sich einschaltet und es sofort anf√§ngt, die Lichter auf dem Stab anzuz√ºnden.  Wer hat dann welche Fantasie.  Ich z√ºnde der Reihe nach alle LEDs von der ersten bis zur sechsten Reihe an und schalte dann die Kurven von der sechsten bis zur ersten Reihe aus. <br><br>  Verilog HDL-Code wird wahrscheinlich besser erkl√§ren, was ich meine: <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">module</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">effect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( input wire clk, input wire mclk, output wire [</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">:</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">]leds, output wire f0, output wire f1, output wire f2, output wire f3, output wire f4, output wire f5 )</span></span></span></span>; reg [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]cnt; reg [<span class="hljs-number"><span class="hljs-number">5</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]bits; initial begin bits= <span class="hljs-number"><span class="hljs-number">6'</span></span>h00; cnt = <span class="hljs-number"><span class="hljs-number">4'</span></span>h0; end always @(posedge clk) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cnt==<span class="hljs-number"><span class="hljs-number">11</span></span>) cnt&lt;=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> cnt &lt;= cnt + <span class="hljs-number"><span class="hljs-number">1'b</span></span>1; always @* <span class="hljs-function"><span class="hljs-function">begin </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">case</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cnt)</span></span></span><span class="hljs-function"> 4'h0: bits </span></span>= <span class="hljs-number"><span class="hljs-number">6'b</span></span>000001; <span class="hljs-number"><span class="hljs-number">4'</span></span>h1: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000011; <span class="hljs-number"><span class="hljs-number">4'</span></span>h2: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h3: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>001111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h4: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>011111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h5: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>111111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h6: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>011111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h7: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>001111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h8: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h9: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000011; <span class="hljs-number"><span class="hljs-number">4'</span></span>ha: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000001; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000000; endcase end assign f0 = bits[<span class="hljs-number"><span class="hljs-number">0</span></span>] &amp; mclk; assign f1 = bits[<span class="hljs-number"><span class="hljs-number">1</span></span>] &amp; mclk; assign f2 = bits[<span class="hljs-number"><span class="hljs-number">2</span></span>] &amp; mclk; assign f3 = bits[<span class="hljs-number"><span class="hljs-number">3</span></span>] &amp; mclk; assign f4 = bits[<span class="hljs-number"><span class="hljs-number">4</span></span>] &amp; mclk; assign f5 = bits[<span class="hljs-number"><span class="hljs-number">5</span></span>] &amp; mclk; assign leds = {bits[<span class="hljs-number"><span class="hljs-number">5</span></span>],bits[<span class="hljs-number"><span class="hljs-number">5</span></span>],bits[<span class="hljs-number"><span class="hljs-number">4</span></span>],bits[<span class="hljs-number"><span class="hljs-number">3</span></span>],bits[<span class="hljs-number"><span class="hljs-number">2</span></span>],bits[<span class="hljs-number"><span class="hljs-number">1</span></span>],bits[<span class="hljs-number"><span class="hljs-number">0</span></span>],bits[<span class="hljs-number"><span class="hljs-number">0</span></span>]}; endmodule</code> </pre> <br>  Hierbei handelt es sich nicht um ein Top-Level-Modul, sondern um ein effect.v-Modul Vom Top-Modul werden hier zwei Taktfrequenzen von clk ~ 40Hz geliefert - diese Frequenz bestimmt die Geschwindigkeit des Effekts und die zweite Frequenz mclk ~ 320Hz, achtmal h√∂her.  Das mclk-Signal moduliert zus√§tzlich die Ausg√§nge wieder, so dass diese nicht immer eingeschaltet sind, die LEDs nicht so hell leuchten und sich der Chip nicht erw√§rmt. <br><br>  Ich wei√ü nicht, ob ich mir diesen Artikel merken muss.  Aber nur f√ºr den Fall, ich schreibe, dass der obige Verilog-Code mit dieser Testbench vollst√§ndig simuliert werden kann: <br><br><pre> <code class="cpp hljs">`timescale <span class="hljs-number"><span class="hljs-number">1</span></span>ms / <span class="hljs-number"><span class="hljs-number">1u</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> tb; reg clock = <span class="hljs-number"><span class="hljs-number">1'b</span></span>0; always #<span class="hljs-number"><span class="hljs-number">10</span></span> clock = ~clock; reg [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]counter=<span class="hljs-number"><span class="hljs-number">0</span></span>; always @(posedge clock) counter &lt;= counter+<span class="hljs-number"><span class="hljs-number">1</span></span>; wire [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]wleds; wire wf0,wf1,wf2,wf3,wf4,wf5; <span class="hljs-function"><span class="hljs-function">effect </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inst</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( .clk( counter[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">] ), .mclk( clock ), .leds( wleds ), .f0( wf0 ), .f1( wf1 ), .f2( wf2 ), .f3( wf3 ), .f4( wf4 ), .f5( wf5 ) )</span></span></span></span>; initial begin $dumpfile(<span class="hljs-string"><span class="hljs-string">"out.vcd"</span></span>); $dumpvars(<span class="hljs-number"><span class="hljs-number">0</span></span>,tb); #<span class="hljs-number"><span class="hljs-number">10000</span></span>; $finish(); end endmodule</code> </pre><br>  Wie genau die Simulation von Projekten ist, k√∂nnen Sie beispielsweise <a href="https://marsohod.org/11-blog/113-icarus" rel="nofollow">hier</a> nachlesen. <br><br>  Nun, gem√§√ü den Ergebnissen der Simulation k√∂nnen Sie diese Zeitdiagramme von Signalen erhalten: <br><br><img src="https://habrastorage.org/webt/fr/y-/sz/fry-szzviv-w_nhslins4ops3be.png"><br><br>  Wenn Sie dieses Projekt auf Arduin durchf√ºhren m√∂chten, ist dies ebenfalls m√∂glich.  Ich bin wirklich kein gro√üer Kenner von Arduina, aber es scheint mir, dass der Code ungef√§hr so ‚Äã‚Äãaussieht: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> start_pin = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> end_pin = <span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start_pin; i&lt; end_pin; i++ ) pinMode(i, OUTPUT); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start_pin; i&lt; end_pin; i++ ) { digitalWrite(i, HIGH); delay(<span class="hljs-number"><span class="hljs-number">250</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start_pin; i&lt; end_pin; i++ ) { digitalWrite(i, LOW); delay(<span class="hljs-number"><span class="hljs-number">250</span></span>); } }</code> </pre><br>  Das Ergebnis sollte ungef√§hr so ‚Äã‚Äãaussehen: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/UjECakae2AY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Trotz der Tatsache, dass das Projekt insgesamt sehr einfach ist, sind die Zuschauer und zuf√§lligen Passanten am 31. Dezember ausnahmslos begeistert.  Besonders wenn Sie in einem Anzug von Santa Claus auf einer verschneiten Stra√üe aus dem Auto steigen, n√§hern Sie sich einem zuf√§lligen Passanten und beleuchten mit einem Stab den Weg, Sie geben eine Mandarinenente. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de479404/">https://habr.com/ru/post/de479404/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de479392/index.html">Pinebook Pro: Kein Chromebook mehr</a></li>
<li><a href="../de479394/index.html">Wie ich unter 15 L√∂sungen nach Helpdesk gesucht habe und ... nicht gefunden habe</a></li>
<li><a href="../de479398/index.html">Wir bringen die lineare Regressionsgleichung in Matrixform</a></li>
<li><a href="../de479400/index.html">Wie man aus einem neuronalen Netzwerk einen Journalisten macht oder "Geheimnisse der wortlosen Reduzierung des Textes auf Habr√©"</a></li>
<li><a href="../de479402/index.html">So zahlen Sie offiziell f√ºr Freiberufler im Ausland, zahlen 0% Steuern und nicht f√ºr Feed-Payment-Systeme</a></li>
<li><a href="../de479406/index.html">16 Entwicklungstipps f√ºr Android in Kotlin. Teil 1</a></li>
<li><a href="../de479414/index.html">Wege, um das Ziel zu finden. Die Rolle des Zufalls</a></li>
<li><a href="../de479416/index.html">Sehen Sie, wohin Sie gehen (periphere Sicht vs. kognitive Belastung)</a></li>
<li><a href="../de479420/index.html">Mikrofon √∂ffnen: Backend. Gastregistrierung</a></li>
<li><a href="../de479422/index.html">[Videoanimation] Kabelgebundene Welt: Wie in 35 Jahren ein Netz von U-Boot-Kabeln den Globus umh√ºllte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>