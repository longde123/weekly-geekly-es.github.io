<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤦 🌉 👃🏼 Grigory Petrov: bekerja dengan jaringan di Ruby ⚫️ 👨‍👨‍👦 👂🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada tanggal 28 September, di konferensi Evrone RubyRussia DevRel, Grigory Petrov akan berbicara tentang bagaimana komunikasi microservices. Dalam waw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Grigory Petrov: bekerja dengan jaringan di Ruby</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/railsclub/blog/467029/"> Pada tanggal 28 September, di konferensi Evrone <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RubyRussia</a> DevRel, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Grigory Petrov</a> akan berbicara tentang bagaimana komunikasi microservices.  Dalam wawancara hari ini, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ivan Solovyov</a> berbicara dengan Grigory tentang topik pidatonya yang akan datang dan tidak hanya tentang itu. <br><br><img src="https://habrastorage.org/webt/ad/kk/zw/adkkzw_mzi2qkhsckkinvqcsi_w.jpeg" alt="gambar"><br><br>  <b>Ceritakan tentang diri Anda, apa yang Anda lakukan di Evrone?</b> <br><a name="habracut"></a><br>  Saya terlibat dalam hubungan pengembang - ini adalah sesuatu antara DevRel dan Technology Evangelist, seorang pengembang yang dapat berbicara di konferensi.  Bekerja seperti Robin Hood: berkomunikasi dengan tim pengembangan di dalam perusahaan, mengumpulkan berbagai hal menarik dari apa yang mereka lakukan, dan membicarakannya di konferensi.  Ruby Russia akan menjadi salah satu konferensi pertama di mana saya akan berbicara atas nama perusahaan. <br><br>  <b>Saya tahu Anda sebagai salah satu penyelenggara berbagai konferensi Python.</b>  <b>Katakan bagaimana Anda datang ke dunia Ruby?</b> <br><br>  Saya tidak pernah meninggalkan dunia Ruby.  Salah satu kuliah pertama saya adalah Python vs Ruby.  Bertahun-tahun yang lalu, ketika saya menulis di C ++, saya membutuhkan mekanisme otomatisasi tingkat tinggi untuk setiap pengujian, pembuatan dokumentasi.  Lalu saya menulis dengan Python dan Ruby, dan sedikit dalam PHP.  Saya mencari cara terbaik untuk menyelesaikan masalah yang saya miliki. <br><br>  <b>Berapa banyak laporan Anda akan dipinjam dari tim pengembangan di dalam perusahaan?</b>  <b>Saya tahu Anda menulis dalam banyak bahasa: Ruby, Python, PHP, TypeScript, JavaScript, C ++ dan tidak hanya.</b> <br><br>  Laporan ini akan membahas tentang komunikasi layanan mikro di antara mereka sendiri melalui jaringan, protokol yang digunakan untuk ini dan kesulitan yang muncul.  Sebenarnya, saya memiliki hubungan yang panjang dengan grid.  Saya lakukan Radmin, ini adalah alat jaringan untuk remote control.  Proyek NPTV (di mana saya juga bekerja DevRel) adalah televisi interaktif yang secara aktif menggunakan grid dan dikendalikan oleh Ruby.  Voximplant (tempat saya mempelajari DevRel lagi) adalah telepon yang dapat diprogram di mana saya bertemu VoIP.  Grid sangat dekat dengan saya.  Saya bisa membuat laporan berdasarkan pengalaman saya, tetapi dengan cara ini saya tidak akan membawa nilai maksimum kepada para tamu konferensi, tetapi saya ingin menanggung manfaat maksimal.  Selama persiapan awal laporan, saya mewawancarai beberapa tim Evrone.  Perusahaan ini bergerak dalam pengembangan kustom perangkat lunak yang kompleks dan berkualitas tinggi, banyak tim bekerja pada berbagai proyek.  Kami menelepon di Zoom dan berbicara selama satu jam atau lebih.  Mereka membahas apa dan bagaimana mereka melakukannya, kesulitan apa, tumpukan apa yang mereka gunakan.  Laporan saya akan setengah tentang grid, protokol jaringan, kompleksitas dan aplikasi, dan setengah tentang bagaimana itu digunakan di Ruby oleh tim yang berbeda. <br><br>  <b>Anda memiliki banyak komunikasi dengan pengembang.</b>  <b>Menurut Anda seberapa spesifik bekerja dengan jaringan di Ruby?</b> <br><br>  Jaringan terdiri dari beberapa bagian.  Pertama-tama, karya bahasa pemrograman dan ekosistemnya secara langsung dengan byte yang dikirimkan melalui jaringan.  Tumpukan jaringan level terendah.  Misalnya, JS dan Node yang sama menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">libuv</a> , model asinkron.  Ada aliran utama, dan Anda akhirnya bekerja dengan jaringan.  Anda memiliki coroutine untuk ini.  Anda membuat banyak harapan, Anda menunggu untuk menerima data, Anda menunggu agar data dikirim.  Utas tunggal ini menyediakan ribuan dan puluhan ribu kueri per detik. <br><br>  Di atas fondasi ini, kerangka kerja dikembangkan, apa pun itu.  Misalnya, JS tidak memiliki kerangka kerja yang serius untuk bekerja dengan kisi (yang Anda dapat memberi selamat padanya!).  Dengan pengecualian express.js, yang hampir tidak merupakan kerangka kerja lengkap.  Python beralih ke model yang serupa, dan kerangka kerja Django yang paling populer tetap pada model sebelumnya.  Sekarang ada semacam perselisihan - kerangka kerja sinkron yang mencoba untuk diperbanyak dengan memblokir utas, proses dengan GIL menggantungnya, dan di samping ada beberapa hal baru yang mencoba untuk bekerja pada model asinkron, misalnya Saluran Django.  Ruby masih dalam model sinkron dan diperbanyak dengan proses.  Oleh karena itu, inilah ekosistem yang sesuai, pendekatan dan posisi yang sangat kuat dari Rails. <br><br>  Apa kekuatan Ruby?  Pertama-tama, dalam DSL, Bahasa khusus domain.  Ketika kita berbicara tentang grid, Ruby memainkan yang terbaik di bidang yang paling kuat.  Ketika kami menggunakan GraphQL, itu berarti bahwa perpustakaan untuk menggunakan GraphQL ada di mana-mana.  Di Ruby, mereka akan menggunakan sintaks DSL yang sangat baik untuk mendefinisikan skema.  Dan integrasi antara sintaks DSL ini dan sintaks DSL ORM dalam ActiveRecord.  Inilah yang bisa kita harapkan dari Ruby.  Pada saat yang sama, kami tidak akan memiliki operasi asinkron (menunggu), kami akan diskalakan oleh proses dan kami akan memiliki persyaratan server yang sesuai. <br><br>  <b>Laporan Anda menyatakan beberapa protokol interaksi.</b>  <b>JSON yang sama: API dan sebagainya.</b>  <b>Dari mana Anda melihat perkembangan selanjutnya, akankah kita semua meluncur ke GraphQL?</b> <br><br>  Pertanyaan yang sangat resonan.  Menurut pendapat saya, itu dimulai dengan fakta bahwa grid lambat.  Aplikasi pada awalnya sederhana.  Sebagai aturan, semua aplikasi, baik Ruby, Python, dan Node, menggunakan titik akhir HTTP biasa untuk komunikasi.  Di dalamnya mereka menggunakan semacam muatan.  Sebelumnya XML, sekarang JSON.  Mereka baik-baik saja selama beberapa bulan atau tahun pertama, seolah-olah mereka beruntung.  Selanjutnya, bisnis mulai mengajukan pertanyaan kompleks.  Misalnya, Anda perlu mendapatkan beberapa pengguna, dan untuk setiap pengguna untuk mendapatkan daftar perusahaan tempat ia bekerja.  Di sini muncul masalah: jika Anda hanya menggunakan titik akhir, maka itu akan menjadi beberapa puluh atau ratusan permintaan, dan kisi-kisi itu santai: permintaan, respons, paket yang hilang.  Ini akan menjadi sangat lambat dan banyak data yang perlu dikirim melalui jaringan.  100 kali lebih banyak dari data yang dibutuhkan.  Sistem kami runtuh, karena sistem otomasi bisnis besar runtuh di bawah permintaan seperti itu, yang dalam 10 tahun tumbuh menjadi monster, di mana pertanyaan sulit dari antarmuka bisa memakan waktu beberapa menit, berjam-jam.  Selama ini, basis data di backend akan mengerjakan banyak permintaan yang identik, dan banyak permintaan yang identik akan mengejar seluruh jaringan.  Kami mencoba menyelesaikannya dengan berbagai cara. <br><br>  <b>Berikan contoh nyata dari masalah seperti itu?</b> <br><br>  Facebook sangat menonjol, mereka memiliki masalah ini sangat akut: ada banyak data yang mereka sukai untuk membuat kueri yang kompleks.  Sebagai contoh: tunjukkan kepada saya orang-orang yang berkomentar di posting ini dan teman-teman mereka  Agar tidak membuat jutaan permintaan, Facebook menggunakan opsi berbeda.  Misalnya, FQL, Facebook Query Language.  Setelah mengumpulkan semua keahlian mereka, mereka membuat GraphQL - suatu hal yang memungkinkan Anda untuk membuat query seperti SQL pada klien.  Tapi ini bukan SQL, karena kita tidak bisa dilampirkan ke database, tetapi permintaan dalam hal API backend.  Anda mengirim satu permintaan dan Anda mendapatkan satu (atau bagaimana kelanjutannya) menjawab. <br><br>  Masalah besar kedua adalah apa yang harus dilakukan jika kita ingin mendapatkan banyak data dari backend.  Misalnya, lima ribu pengguna atau log in 10mb.  Sangat menakutkan untuk melakukan semuanya dengan satu permintaan http-respons.  Karena jika jala runtuh, permintaan harus diulangi secara keseluruhan, dan ini bisa bertahan selamanya.  Kembali ke Facebook: mereka membuat GraphQL, penopang di atas kisi.  Dan kemudian orang lain melakukan HTTP / 2, yang memecahkan masalah kisi.  HTTP / 2 membuat satu koneksi asinkron, di mana kita dapat membuat banyak permintaan kecil.  HTTP / 2 melawan GraphQL jika server GraphQL tidak memiliki banyak keajaiban untuk mengoptimalkan jumlah permintaan ke database di backend.  Dan dalam pembicaraan, kita akan berbicara tentang apa yang Ruby tawarkan untuk sihir ini.  Dengan HTTP / 2, GraphQL mungkin tidak diperlukan.  Kita dapat membuat 100 permintaan HTTP / 2 ke titik akhir kita, dan dari sudut pandang byte, ini tidak akan menjadi overhead yang lebih besar daripada jika kita menggunakan GraphQL.  Google Protocol Buffer dan gRPC mendekati masalah ini dari ujung ketiga.  Mereka menggunakan protokol transport biner, terutama HTTP / 2, mereka menawarkan skema tertentu untuk api.  Di sini mereka bersaing dengan REST yang biasa. <br><br>  Dalam praktiknya, di sebagian besar perusahaan yang menggunakan JSON, programmer Vasya duduk dan menulis JSON ini dengan tangannya.  Enam bulan kemudian, Vasya mengetahui bahwa tanggal dan waktu dapat ditransmisikan dalam seratus cara berbeda.  Horor dimulai!  Tetapi jika pengembang yang baik duduk di perusahaan, mereka menulis tidak hanya JSON, tetapi menggunakan semacam standar.  Menggunakan Skema OpenAPI atau JSON, semua hal menarik ini yang bersaing dengan gRPC.  Seluruh kebun binatang modern ini memecahkan beberapa masalah yang disuarakan.  Dan apa yang akan terjadi pada kebun binatang ini di masa depan, saya tidak dapat memprediksi sama sekali.  Tapi saya mengundang pengembang untuk datang dan membahas masalah ini: apa yang menanti kita di tahun mendatang, 3, 5, 10 dan apa disposisi pasukan sekarang. <br><br>  <b>Mari kita bicara tentang masa depan Ruby sebagai bahasa pemrograman?</b> <br><br>  Sulit untuk memprediksi masa depan.  Saya benar-benar ingin melihat tipe yang bagus di Ruby.  Ruby 3 sekarang berada pada tahap awal implementasi tipe.  Saya ingin sintaks ini menjadi cantik.  Saya melihat proposal, titik botak saya berdiri di ujungnya.  Sintaks yang mengerikan, sangat verbose yang tidak akan digunakan siapa pun. <br><br>  <b>Mengapa menurut Anda begitu?</b> <br><br>  Saya seorang ahli neurofisiologi amatir.  Pemikiran intuitif bahwa setiap orang suka membuat segala macam keputusan aneh.  Jika, misalnya, Anda perlu menulis banyak surat, maka ini buruk.  Jenis ini bisa sangat keren, tetapi karena Anda harus menulis satu setengah kali lebih banyak kode, kita akan merasakan emosi "Saya tidak mau".  Dan kami sangat sensitif terhadap emosi kami, jadi tidak ada yang akan menggunakannya.  Saya sangat suka cara jenis disampaikan dengan Python dan TypeScript: melalui titik dua.  Ini memberikan overhead minimal.  Kami menulis pengidentifikasi - tampak.  Saya tahu pasti bahwa akan ada nomor, Anda perlu menjebak.  Pengembang menulis titik dua dan hanya itu, jebakan diinstal.  Setelah beberapa minggu, ketika dia secara tidak sengaja melewati daftar atau baris di sana, jebakan akan bekerja dan menyelamatkan pengembang beberapa jam atau minggu dari debugging. <br><br>  <b>Apa lagi yang ingin Anda lihat di Ruby?</b> <br><br>  Selama beberapa tahun terakhir, saya telah melihat banyak async dengan coroutine.  Saya sangat suka ini karena kode async dengan coroutine mudah dibaca.  Dapat dimengerti, memungkinkan Anda untuk menjejalkan hal-hal kompleks menjadi sintaksis sederhana.  Ini diimplementasikan dengan baik di Python terbaru dan diimplementasikan dengan baik dalam JavaScript.  Saya benar-benar ingin Ruby membawa sesuatu seperti itu ... Sebenarnya, Ruby memiliki serat.  Akan lebih baik untuk menambahkan sesuatu seperti Node sehingga Anda dapat menulis aplikasi Ruby asinkron menggunakan serat atau primitif lainnya.  Dan di bawah tenda, itu sendiri akan menggunakan libuv atau sistem operasi primitif lainnya untuk bekerja dengan grid. <br><br>  Atau akan meletakkan sesuatu di sungai.  Akan menggunakan sesuatu untuk memenuhi semua permintaan jaringan, permintaan basis data, permintaan sistem file secara kompetitif.  Dan saya hanya akan menulis coroutine pada tingkat potongan kecil kode yang dieksekusi pada permintaan atau timer yang masuk, kemudian memberikan perintah dan menunggu eksekusi mereka.  Lebih lanjut di bawah tenda banyak keajaiban, semua ini dilakukan secara paralel, memakan mobil Amazon besar sebesar 100% dan memiliki puluhan ribu permintaan per detik.  Dalam kasus Go, ratusan ribu permintaan per detik. <br><br>  <b>Kembali ke tipe.</b>  <b>Ini mungkin akan menjadi pengenalan tipe secara bertahap, Mengetik Bertahap?</b> <br><br>  Pengetikan Bertahap adalah mega skyrocket yang pertama kali ditambahkan ke Python.  Kami membuatnya sehingga jenis dapat ditambahkan sedikit.  Menurut pendapat saya, seluruh paradigma pengembangan telah muncul ketika pada awalnya kode ditulis dengan sangat cepat tanpa tipe, dan kemudian ketika pengembang melihat bahwa beberapa bagian dari kode telah stabil, tipe mulai menambah bagian kode ini.  Di sinilah stabil dan perlu mengatur jebakan sehingga di masa depan tidak ada yang rusak dengan yang stabil ini.  Akan keren jika mereka melakukan sesuatu yang mirip dengan Ruby. <br><br>  <b>Pertanyaan apa yang ingin Anda tanyakan pada Yukihiro Matsumoto di konferensi?</b> <br><br>  Saya telah belajar bahasa Jepang selama 4 tahun, dan bahasa Jepang saya mungkin cukup untuk mengatakan "terima kasih" kepadanya.  Saya akan berlatih! <br><br>  <b>Sampai jumpa di RubyRussia!</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Daftarkan</a> , kenaikan harga berikutnya diperkirakan setelah 15 September, sudah ada 700 peserta bersama kami. <br><br>  Dan terima kasih tradisional kepada perusahaan yang mendukung kami: <br><br>  Penyelenggara - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Evrone</a> <br>  Mitra Umum - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Toptal</a> <br>  Mitra Emas - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Gett</a> <br>  Mitra Perak - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">JetBrains</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bookmate</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cashwagon</a> <br>  Mitra Perunggu - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">InSales</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467029/">https://habr.com/ru/post/id467029/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467017/index.html">Apa itu HED / MRSD dan untuk apa ini?</a></li>
<li><a href="../id467019/index.html">Merancang dasbor untuk situs web analitik e-commerce Bagian 3: Saluran SEO</a></li>
<li><a href="../id467021/index.html">Bagaimana Robot Nurani berkomunikasi dengan pelanggan</a></li>
<li><a href="../id467023/index.html">Kami membuat plugin di Grafana untuk memantau k8: sudah ada di toko Grafana resmi</a></li>
<li><a href="../id467025/index.html">Tentang model jaringan dalam game untuk pemula</a></li>
<li><a href="../id467033/index.html">Pilihan makalah teknis keren dari Chaos Communication Camp 2019</a></li>
<li><a href="../id467035/index.html">Merancang dasbor untuk situs web analitik e-commerce Bagian 4: Saluran Youtube</a></li>
<li><a href="../id467037/index.html">Anjak piutang: cara mendapatkan uang untuk kursi</a></li>
<li><a href="../id467039/index.html">Cara melakukan tinjauan kode</a></li>
<li><a href="../id467041/index.html">Bagaimana kami mendigitalkan Kazakhstan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>