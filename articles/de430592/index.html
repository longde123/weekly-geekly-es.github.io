<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🤝‍👨🏽 👌 👨‍🌾 Client-Internet in einer QEMU-isolierten virtuellen Maschine mithilfe von Port-Tunneling über einen SPICE-Kanal ✋🏻 🤵🏾 ⚾️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der übliche Ansatz zum Verbinden einer virtuellen Maschine mit dem Internet ähnelt dem Verbinden eines anderen Geräts mit dem Netzwerk und besteht dar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Client-Internet in einer QEMU-isolierten virtuellen Maschine mithilfe von Port-Tunneling über einen SPICE-Kanal</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430592/"><p> Der übliche Ansatz zum Verbinden einer virtuellen Maschine mit dem Internet ähnelt dem Verbinden eines anderen Geräts mit dem Netzwerk und besteht darin, eine virtuelle oder reale reale Netzwerkschnittstelle zu verbinden sowie Netzwerkverbindungen, Dienste, Routingregeln und das Filtern des Datenverkehrs usw. einzurichten und zu überprüfen. </p><br><p>  Wenn die virtuelle Maschine ein Server oder ein virtueller Desktop ist und einem bestimmten Benutzer zugewiesen ist, ist dieser Ansatz völlig gerechtfertigt. Was ist jedoch, wenn die virtuelle Maschine ein öffentlicher virtueller Desktop ist und jeder kostenlos eine Verbindung dazu herstellen kann? </p><a name="habracut"></a><br><p>  Es muss sichergestellt werden, dass das Internet in der virtuellen Maschine nicht von der Hostseite, sondern von der Clientseite aus gestartet wird. </p><br><p>  Durch Verbinden einer virtuellen Maschine mit dem Internetkanal des Clients können Sie: </p><br><ul><li>  Reduzieren Sie den Rechenaufwand für Netzwerkemulation und Netzwerkschnittstelle. </li><li>  Schließen Sie die Möglichkeit eines Hackerangriffs auf eine virtuelle Maschine aus dem Internet und dem virtuellen Netzwerk aus. </li><li>  Entlasten Sie in den folgenden Fällen die Verantwortung des Hostadministrators für die Aktionen des Benutzers der virtuellen Maschine: <br><ul><li>  Spam </li><li>  Illegale / verbotene Inhalte herunterladen / veröffentlichen, </li><li>  Hacking oder Hacking-Angriff auf die Internet-Ressourcen des Hosting-Administrators, Dritter, </li><li>  Bergbau </li><li>  usw... </li></ul></li><li>  Reduzieren Sie die Zeit zum Überprüfen und Konfigurieren des Zugriffs auf die virtuelle Internetmaschine </li></ul><br><p>  Der einfachste Weg, um das Internet vom Client zu erhalten, besteht darin, den USB-Netzwerkadapter oder das USB-Modem weiterzuleiten.  Diese Methode stellt jedoch hohe Anforderungen an die Qualität des Netzwerks.  Wenn sich die virtuelle Maschine im Ausland befindet, ist es wahrscheinlich, dass es zu Verzögerungen und Einfrierungen kommt. </p><br><p>  Eine Alternative zum Weiterleiten von USB-Geräten kann das Port-Tunneling zwischen dem Client und der virtuellen Maschine über den SPICE-Kanal sein, ähnlich wie das Port-Tunneling in SSH. </p><br><p>  In virtuellen QEMU-Maschinen gibt es einen Kanal zum Übertragen von Daten vom Client zur virtuellen Maschine, den sogenannten SPICE-Kanal.  Dieser Kanal überträgt Eingabegerätedaten, Inhalte der Zwischenablage und mehr. </p><br><p>  Theoretisch können Sie die lokalen Client-Ports (IP-Adresse 127.0.0.1) an die virtuelle Maschine weiterleiten und als lokal anordnen. </p><br><p>  Ein Beispielalgorithmus für die Verbindung zum Internetkanal eines Clients durch Port-Tunneling: </p><br><ul><li>  Auf der Clientseite können Sie einen Proxyserver oder einen VPN-Server einrichten, der den Zugriff auf das Netzwerk ermöglicht. </li><li>  Im SPICE-Client ist das Port-Tunneling so konfiguriert, dass die Ports des Proxyservers oder VPN-Servers in der virtuellen Maschine wie lokale Ports aussehen. </li><li>  Im Betriebssystem und im Browser ist ein lokales Proxy-Subsystem so konfiguriert, dass es über den lokalen Port eine Verbindung zum Proxyserver herstellt, oder es ist ein VPN-Client konfiguriert, der eine Verbindung zum VPN-Server auf dem lokalen Host herstellt und ein virtuelles Netzwerkgerät emuliert (bei OpenVPN optimieren oder tippen). </li></ul><br><p>  Implementierung </p><br><p>  Alles, was getan werden muss, um das Port-Tunneling Wirklichkeit werden zu lassen, ist, den Quellcode des SPICE-Clients und der SPICE-Gast-Add-Ons zu optimieren, Patches zu erstellen und an die Entwickler zu senden.  All dies ist möglich, weil der Quellcode für SPICE offen ist. </p><br><p>  Darüber hinaus stellte sich bei Verhandlungen mit SPICE-Entwicklern heraus, dass diese Funktionalität in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FlexVDI-</a> Gabel von SPICE implementiert wurde.  Der Fork-Quellcode wird teilweise im Repository [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/flexvdi</a> ] veröffentlicht. Es heißt, es gibt ein Fragment, das für das Tunneln verantwortlich ist. </p><br><p>  Die Aufzeichnung von Konversationen ist auf dem Mailing-Kanal von <strong>Spice-Devel</strong> verfügbar. Das Thema lautet " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Funktionsvorschlag: Port-Tunneling zwischen VM und Client über Spice-Channel</a> ". </p><br><p>  Anwendungsgebiet </p><br><p>  Diese Technologie kann häufig in Demonstrations- und öffentlichen virtuellen Maschinen sowie beim normalen VDI-Hosting eingesetzt werden. </p><br><p>  Wenn jemand bei der Implementierung dieser Funktionalität helfen möchte, können Sie diese Funktionalität implementieren und Patches erstellen. Wenn Sie Kommentare und Vorschläge haben, können Sie Kommentare hinterlassen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de430592/">https://habr.com/ru/post/de430592/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de430572/index.html">Cisco HyperFlex in Aktion</a></li>
<li><a href="../de430574/index.html">Die ersten Patienten erhielten eine Zelltherapie gegen die Parkinson-Krankheit</a></li>
<li><a href="../de430576/index.html">Guter Code erreicht Google nicht</a></li>
<li><a href="../de430580/index.html">Top-Bücher zum Django-Framework</a></li>
<li><a href="../de430590/index.html">In Deutschland entwickelten sich die Anforderungen für Heimrouter</a></li>
<li><a href="../de430596/index.html">Wie bereite ich eine Produktstrategie vor? Produktmanager-Handbuch</a></li>
<li><a href="../de430600/index.html">Mars - von Schokolade zu Robotern</a></li>
<li><a href="../de430602/index.html">Sicherheitslücken in Etherium Smart-Verträgen. Codebeispiele</a></li>
<li><a href="../de430604/index.html">Technologien, die im PVS-Studio Code Analyzer verwendet werden, um nach Fehlern und potenziellen Schwachstellen zu suchen</a></li>
<li><a href="../de430606/index.html">Group-IB-Webinar: „Forensische Untersuchung von RDP-Artefakten unter Windows“</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>