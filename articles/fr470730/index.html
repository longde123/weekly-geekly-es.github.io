<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëåüèø üë¶üèª üåø Azure PowerShell: ¬´principalement inoffensif¬ª ü§¶üèº üóëÔ∏è üßõüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous. Aujourd'hui, nous avons un autre projet Microsoft √† l'essai. Par le titre de l'article, vous pouvez deviner que cette fois les d√©velop...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Azure PowerShell: ¬´principalement inoffensif¬ª</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/470730/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5dd/f61/f7d/5ddf61f7dcf2f891ee258f9d580d3dbd.png" alt="Image 6"></div><br>  Bonjour √† tous.  Aujourd'hui, nous avons un autre projet Microsoft √† l'essai.  Par le titre de l'article, vous pouvez deviner que cette fois les d√©veloppeurs n'ont pas pu nous plaire avec un grand nombre d'erreurs.  Nous esp√©rons que les auteurs du projet ne seront pas offens√©s par ce nom.  Apr√®s tout, un petit nombre d'erreurs est excellent, n'est-ce pas?  Cependant, quelque chose d'int√©ressant a √©t√© trouv√© dans le code Azure PowerShell.  Nous vous sugg√©rons de vous familiariser avec les fonctionnalit√©s de ce projet et de regarder les erreurs trouv√©es avec l'analyseur PV # C PVS-Studio. <br><a name="habracut"></a><br><h2>  √Ä propos du projet </h2><br>  Azure PowerShell est une applet de commande qui vous permet de g√©rer les ressources <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Azure</a> directement √† partir de la ligne de commande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PowerShell</a> .  L'objectif principal de cet ensemble est de simplifier l'apprentissage et le d√©marrage rapide du d√©veloppement pour Azure.  Azure PowerShell fournit aux administrateurs et aux d√©veloppeurs de puissantes fonctionnalit√©s pour cr√©er, d√©ployer et g√©rer des applications Microsoft Azure. <br><br>  Azure PowerShell est d√©velopp√© dans l'environnement .NET Standard et est pris en charge par PowerShell 5.1 pour Windows et PowerShell 6.x et versions ult√©rieures pour toutes les plateformes.  Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code source</a> Azure PowerShell est disponible sur GitHub. <br><br>  R√©cemment, les projets Microsoft ont souvent attir√© mon attention.  √Ä mon avis, la qualit√© de ces projets est g√©n√©ralement √† son meilleur.  Bien s√ªr, non sans exception, tout comme l'article " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WinForms: Erreurs, Holmes</a> ".  Cependant, cette fois, tout est normal.  Le projet est volumineux: 6845 fichiers .cs le code source contient environ 700 mille lignes, hors vide (tests, ainsi que des avertissements du troisi√®me niveau de fiabilit√©, je n'ai pas pris en compte).  Il y avait tr√®s peu d'erreurs pour un tel volume de code: pas plus d'une centaine.  Il y a beaucoup de situations du m√™me type, donc pour l'article, j'ai s√©lectionn√© les points positifs les plus int√©ressants.  Les erreurs, comme je le fais habituellement, sont tri√©es par les num√©ros de diagnostic PVS-Studio. <br><br>  J'ai √©galement rencontr√© des fragments de code qui ressemblent √† des erreurs, mais je ne pouvais pas tirer de conclusion sans ambigu√Øt√© sur l'existence d'un probl√®me r√©el, car je ne connaissais pas suffisamment les fonctionnalit√©s de conception de PowerShell.  J'esp√®re que parmi les lecteurs il y aura des experts en la mati√®re et m'aidera.  √Ä ce sujet ci-dessous. <br><br>  Avant le d√©but du ¬´d√©briefing¬ª, je note la particularit√© du projet en termes de structure.  Le code source Azure PowerShell comprend plus de soixante-dix solutions Visual Studio.  Certaines solutions incluent des projets d'autres solutions.  Une telle structure a un peu ralenti l'analyse (pas beaucoup).  Le reste de la v√©rification n'a pas caus√© de difficult√©s.  Pour plus de commodit√©, dans la ligne du message d'erreur (entre parenth√®ses), je vais indiquer le nom de la solution dans laquelle cette erreur a √©t√© d√©tect√©e. <br><br><h2>  R√©sultats de validation </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3001</a> Il existe des sous-expressions identiques 'strTimespan.Contains ("M")' √† gauche et √† droite de '||'  op√©rateur.  AzureServiceBusCmdletBase.cs 187 (EventGrid) <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> TimeSpan </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ParseTimespan</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> strTimespan</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"P"</span></span>) || strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"D"</span></span>) || strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"T"</span></span>) || strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"H"</span></span>) || strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"M"</span></span>) || strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"M"</span></span>)) .... }</code> </pre> <br>  Un exemple d'une erreur assez √©vidente, que seul le d√©veloppeur est capable de corriger.  Dans ce cas, il est totalement incompr√©hensible que nous ayons affaire √† une duplication de code qui n'affecte rien, ou au lieu de <i>¬´M¬ª,</i> quelque chose d'autre devrait appara√Ætre dans l'un des deux derniers contr√¥les. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3001</a> Il existe des sous-expressions identiques 'this.AggregationType! = Null' √† gauche et √† droite de l'op√©rateur '&amp;&amp;'.  GetAzureRmMetricCommand.cs 156 (moniteur) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> AggregationType? AggregationType { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessRecordInternal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> aggregation = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregationType != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregationType.HasValue) ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregationType.Value.ToString() : <span class="hljs-literal"><span class="hljs-literal">null</span></span>; .... }</code> </pre> <br>  Il n'y a probablement pas d'erreur ici.  Ceci est un exemple de code redondant.  Parfois, un tel code peut indiquer un niveau insuffisant de connaissances des d√©veloppeurs.  Le fait est que <i>this.AggregationType! = Null</i> et <i>this.AggregationType.HasValue sont</i> identiques.  Il suffit d'en utiliser un (n'importe lequel).  Personnellement, je pr√©f√®re l' <i>option HasValue</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> aggregation = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregationType.HasValue ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregationType.Value.ToString() : <span class="hljs-literal"><span class="hljs-literal">null</span></span>;</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3003</a> L'utilisation du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mod√®le</a> 'if (A) {...} else if (A) {...}' a √©t√© d√©tect√©e.  Il y a une probabilit√© de pr√©sence d'erreur logique.  V√©rifiez les lignes: 152, 163. GetAzureRmRecoveryServicesBackupProtectionPolicy.cs 152 (RecoveryServices) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( WorkloadType == Models.WorkloadType.AzureVM ) { .... } .... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( WorkloadType == Models.WorkloadType.AzureFiles ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( BackupManagementType != Models.BackupManagementType.AzureStorage ) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException( Resources.AzureFileUnsupportedBackupManagementTypeException ); } serviceClientProviderType = ServiceClientHelpers. GetServiceClientProviderType( Models.WorkloadType.AzureFiles ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( WorkloadType == Models.WorkloadType.AzureFiles ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( BackupManagementType != Models.BackupManagementType.AzureStorage ) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException( Resources.AzureFileUnsupportedBackupManagementTypeException ); } serviceClientProviderType = ServiceClientHelpers. GetServiceClientProviderType( Models.WorkloadType.AzureFiles ); } .... }</code> </pre> <br>  Les deux <i>autres</i> √©l√©ments <i>si les</i> blocs sont absolument identiques, y compris la condition et le corps du bloc.  Ces erreurs sont g√©n√©ralement commises lors de l'utilisation de la m√©thode copier-coller dans le travail.  La question est encore la criticit√© de cette erreur.  S'il ne s'agit pas d'une simple duplication de code, alors nous pouvons parler du manque de v√©rification n√©cessaire et de l'ensemble d'actions correspondant.  L'auteur doit modifier le code. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3005</a> La variable 'this.VM.OSProfile.WindowsConfiguration.ProvisionVMAgent' est affect√©e √† elle-m√™me.  SetAzureVMOperatingSystemCommand.cs 298 (Calcul) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-comment"><span class="hljs-comment">// OS Profile this.VM.OSProfile.WindowsConfiguration.ProvisionVMAgent = this.VM.OSProfile.WindowsConfiguration.ProvisionVMAgent; .... }</span></span></code> </pre> <br>  La valeur de la propri√©t√© est assign√©e √† elle-m√™me.  Jetez un ≈ìil √† son annonce: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">JsonProperty(PropertyName = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"provisionVMAgent"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>? ProvisionVMAgent { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br>  La description de <i>JsonProperty</i> indique ¬´Demande au Newtonsoft.Json.JsonSerializer de toujours s√©rialiser le membre avec le nom sp√©cifi√©¬ª.  Il semble que tout soit simple et il y a une erreur √©vidente.  Il est √©galement d√©routant de l'utiliser explicitement pour acc√©der √† une propri√©t√©.  Peut-√™tre, par erreur, une autre variable n'a pas √©t√© sp√©cifi√©e √† la place de <i>cela</i> .  Mais pour l'instant, nous ne tirerons pas de conclusions.  Le fait est que dans le code Azure PowerShell, j'ai rencontr√© beaucoup de ces affectations (la propri√©t√© est assign√©e √† elle-m√™me).  Voici un autre exemple d'affectation tr√®s similaire √† une erreur: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3005</a> La variable 'this.LastHeartbeat' est assign√©e √† elle-m√™me.  PSFabricDetails.cs 804 (RecoveryServices) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ASRInMageAzureV2SpecificRPIDetails</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> InMageAzureV2ReplicationDetails details</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LastHeartbeat = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LastHeartbeat; <span class="hljs-comment"><span class="hljs-comment">// &lt;= this.RecoveryAvailabilitySetId = details.RecoveryAvailabilitySetId; this.AgentVersion = details.AgentVersion; this.DiscoveryType = details.DiscoveryType; .... }</span></span></code> </pre> <br>  Faites attention √† la deuxi√®me affectation et aux suivantes.  Du c√¥t√© droit de l'expression, ce n'est pas <i>cela</i> qui appara√Æt du tout, mais les <i>d√©tails</i> .  <i>Jetez un</i> ≈ìil √† la d√©claration de <i>cette</i> propri√©t√©. <i>LastHeartbeat</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime? LastHeartbeat { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br>  Enfin, recherchez une propri√©t√© du m√™me nom dans la classe <i>InMageAzureV2ReplicationDetails</i> .  Une telle propri√©t√© y est d√©clar√©e: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">InMageAzureV2ReplicationDetails</span></span> : <span class="hljs-title"><span class="hljs-title">ReplicationProviderSpecificSettings</span></span> { .... [JsonProperty(PropertyName = <span class="hljs-string"><span class="hljs-string">"lastHeartbeat"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime? LastHeartbeat { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } .... }</code> </pre> <br>  Eh bien, dans ce cas, je suis pr√™t √† admettre que ce d√©clenchement est une v√©ritable erreur.  Mais que faire des d√©clencheurs suivants?  En eux, contrairement aux deux fragments de code pr√©c√©dents, il y a une affectation multiple de propri√©t√©s √† eux-m√™mes.  C'est d√©j√† moins comme une erreur: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3005</a> La variable 'this.ResourceGroupName' est assign√©e √† elle-m√™me.  RemoveAzureRmExpressRouteConnectionCommand.cs 84 (CognitiveServices) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3005</a> La variable 'this.ExpressRouteGatewayName' est assign√©e √† elle-m√™me.  RemoveAzureRmExpressRouteConnectionCommand.cs 85 (CognitiveServices) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3005</a> La variable 'this.Name' est assign√©e √† elle-m√™me.  RemoveAzureRmExpressRouteConnectionCommand.cs 86 (CognitiveServices) </li></ul><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Cmdlet(VerbsCommon.Remove, ResourceManager.Common.AzureRMConstants.AzureRMPrefix + </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ExpressRouteConnection"</span></span></span><span class="hljs-meta">, DefaultParameterSetName = CortexParameterSetNames.ByExpressRouteConnectionName, SupportsShouldProcess = true), OutputType(typeof(bool))</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RemoveExpressRouteConnectionCommand</span></span> : <span class="hljs-title"><span class="hljs-title">ExpressRouteConnectionBaseCmdlet</span></span> { [Parameter( Mandatory = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, ParameterSetName = CortexParameterSetNames.ByExpressRouteConnectionName, HelpMessage = <span class="hljs-string"><span class="hljs-string">"The resource group name."</span></span>)] [ResourceGroupCompleter] [ValidateNotNullOrEmpty] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ResourceGroupName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Execute</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ResourceGroupName = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ResourceGroupName; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ExpressRouteGatewayName = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ExpressRouteGatewayName; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name; } .... } .... }</code> </pre> <br>  La m√©thode <i>Execute</i> contient trois affectations cons√©cutives de propri√©t√©s √† elles-m√™mes.  Au cas o√π, j'ai donn√© une d√©claration compl√®te de la classe <i>RemoveExpressRouteConnectionCommand</i> avec tous ses attributs, ainsi qu'une d√©claration de la propri√©t√© <i>ResourceGroupName</i> (les deux autres propri√©t√©s sont d√©clar√©es de la m√™me mani√®re).  C'est un tel d√©clenchement qui m'a fait r√©fl√©chir √† la question: "Est-ce une erreur?"  Je soup√ßonne qu'une sorte de magie interne du d√©veloppement PowerShell peut se produire ici.  J'esp√®re que parmi les lecteurs, il y a des experts qui connaissent bien la question.  Je ne suis pas pr√™t √† tirer aucune conclusion dans ce cas. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3006</a> L'objet a √©t√© cr√©√© mais il n'est pas utilis√©.  Le mot cl√© 'throw' peut √™tre manquant: throw new ArgumentException (FOO).  StartAzureRmRecoveryServicesAsrTestFailoverJob.cs 259 (RecoveryServices) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartRPITestFailover</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException( Resources .UnsupportedDirectionForTFO); <span class="hljs-comment"><span class="hljs-comment">// Throw Unsupported Direction // Exception } .... }</span></span></code> </pre> <br>  Le mot cl√© <i>throw a √©t√©</i> ignor√©.  De plus, le commentaire dit que l'exception devrait simplement √™tre lev√©e.  Dans la solution <i>RecoveryServices</i> , j'ai rencontr√© plusieurs erreurs similaires: <br><br><ul><li>  V3006 L'objet a √©t√© cr√©√© mais il n'est pas utilis√©.  Le mot cl√© 'throw' peut √™tre manquant: throw new ArgumentException (FOO).  StartAzureRmRecoveryServicesAsrTestFailoverJob.cs 305 (RecoveryServices) </li><li>  V3006 L'objet a √©t√© cr√©√© mais il n'est pas utilis√©.  Le mot cl√© 'throw' peut √™tre manquant: throw new ArgumentException (FOO).  StartAzureRmRecoveryServicesAsrUnPlannedFailover.cs 278 (RecoveryServices) </li><li>  V3006 L'objet a √©t√© cr√©√© mais il n'est pas utilis√©.  Le mot cl√© 'throw' peut √™tre manquant: throw new ArgumentException (FOO).  StartAzureRmRecoveryServicesAsrUnPlannedFailover.cs 322 (RecoveryServices) </li><li>  V3006 L'objet a √©t√© cr√©√© mais il n'est pas utilis√©.  Le mot cl√© 'throw' peut √™tre manquant: throw new ArgumentException (FOO).  UpdateAzureRmRecoveryServicesAsrProtectionDirection.cs 421 (RecoveryServices) </li><li>  V3006 L'objet a √©t√© cr√©√© mais il n'est pas utilis√©.  Le mot cl√© 'throw' peut √™tre manquant: throw new ArgumentException (FOO).  UpdateAzureRmRecoveryServicesAsrProtectionDirection.cs 452 (RecoveryServices) </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3022 L'</a> expression 'apiType.HasValue' est toujours fausse.  ApiManagementClient.cs 1134 (ApiManagement) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetApiTypeForImport</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...., PsApiManagementApiType? apiType</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (apiType.HasValue) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(apiType.Value) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> PsApiManagementApiType.Http: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SoapApiType.SoapToRest; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> PsApiManagementApiType.Soap: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SoapApiType.SoapPassThrough; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SoapApiType.SoapPassThrough; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> apiType.HasValue ? <span class="hljs-comment"><span class="hljs-comment">// &lt;= apiType.Value.ToString("g") : PsApiManagementApiType.Http.ToString("g"); }</span></span></code> </pre> <br>  La logique du travail est viol√©e.  Si <i>apiType</i> contient une valeur, le contr√¥le n'atteindra pas l'expression de <i>retour</i> √† la fin de la m√©thode (toutes les branches de <i>commutateur</i> contiennent <i>return</i> ).  Sinon, la m√©thode renverra toujours <i>PsApiManagementApiType.Http.ToString ("g")</i> et <i>apiType.Value.ToString ("g")</i> , respectivement, ne sera jamais renvoy√©. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3022 L'</a> expression 'automationJob! = Null &amp;&amp; automationJob == null' est toujours fausse.  NodeConfigurationDeployment.cs 199 (Automation) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NodeConfigurationDeployment</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> ...., Management.Automation.Models.Job automationJob = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span><span class="hljs-function"><span class="hljs-params">, ....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (automationJob != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; automationJob == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; .... }</code> </pre> <br>  Le code paradoxal.  Deux contr√¥les qui se contredisent.  La deuxi√®me v√©rification d'√©galit√© <i>nulle</i> contient probablement la mauvaise variable. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3022 L'</a> expression est toujours fausse.  DataFactoryClient.Encrypt.cs 37 (DataFactory) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPremisesEncryptString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( linkedServiceType == LinkedServiceType.OnPremisesSqlLinkedService &amp;&amp; linkedServiceType == LinkedServiceType.OnPremisesOracleLinkedService &amp;&amp; linkedServiceType == LinkedServiceType.OnPremisesFileSystemLinkedService &amp;&amp; (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-string"><span class="hljs-string">"value"</span></span>); } .... }</code> </pre> <br>  La v√©rification est inutile et une exception ne sera jamais lev√©e.  La condition requiert l'√©galit√© simultan√©e de la variable <i>linkedServiceType avec</i> trois valeurs diff√©rentes.  Les op√©rateurs &amp;&amp; et || sont probablement confus.  Code corrig√©: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( linkedServiceType == LinkedServiceType.OnPremisesSqlLinkedService || linkedServiceType == LinkedServiceType.OnPremisesOracleLinkedService || linkedServiceType == LinkedServiceType.OnPremisesFileSystemLinkedService) &amp;&amp; (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>)) ....</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3022 L'</a> expression 'Ekus == null' est toujours fausse.  PSKeyVaultCertificatePolicy.cs 129 (KeyVault) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> CertificatePolicy </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToCertificatePolicy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ekus != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { x509CertificateProperties.Ekus = Ekus == <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? <span class="hljs-literal"><span class="hljs-literal">null</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(Ekus); } .... }</code> </pre> <br>  V√©rification superflue de la variable <i>Ekus</i> pour l'√©galit√© <i>nulle</i> .  Probablement rien de mal, mais le code a l'air moche. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3023</a> Envisagez d'inspecter cette expression.  L'expression est excessive ou contient une erreur d'impression.  PolicyRetentionObjects.cs 207 (RecoveryServices) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Validate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (RetentionTimes == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || RetentionTimes.Count == <span class="hljs-number"><span class="hljs-number">0</span></span> || RetentionTimes.Count != <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException( Resources.InvalidRetentionTimesInPolicyException); } }</code> </pre> <br>  Contr√¥le excessif ou condition erron√©e.  V√©rifier <i>RetentionTimes.Count == 0</i> n'a aucun sens, car apr√®s cette v√©rification <i>RetentionTimes.Count! = 1</i> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3025</a> Format incorrect.  Un nombre diff√©rent d'√©l√©ments de format est attendu lors de l'appel de la fonction 'Format'.  Arguments non utilis√©s: this.ResourceGroupName.  NewScheduledQueryRuleCommand.cs 117 (Moniteur) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessRecordInternal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ShouldProcess(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format(<span class="hljs-string"><span class="hljs-string">"Creating Log Alert Rule '{0}' in resource group {0}"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ResourceGroupName))) { .... } .... }</code> </pre> <br>  Erreur dans la cha√Æne de format.  Le qualificatif <i>{0}</i> est utilis√© deux fois, avec deux arguments pass√©s √† la m√©thode <i>Format</i> .  L'option correcte: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ShouldProcess(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format(<span class="hljs-string"><span class="hljs-string">"Creating Log Alert Rule '{0}' in resource group {1}"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ResourceGroupName))) ....</code> </pre> <br>  Une autre erreur similaire: <br><br><ul><li>  V3025 Format incorrect.  Un nombre diff√©rent d'√©l√©ments de format est attendu lors de l'appel de la fonction 'Format'.  Arguments non utilis√©s: this.ResourceGroupName.  RemoveScheduledQueryRuleCommand.cs 88 (Moniteur) </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3042</a> Exception <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NullReferenceException</a> possible.  Le '?.'  et '.'  les op√©rateurs sont utilis√©s pour acc√©der aux membres de l'objet 'imageAndOsType' VirtualMachineScaleSetStrategy.cs 81 (Compute) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ResourceConfig&lt;VirtualMachineScaleSet&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateVirtualMachineScaleSetConfig</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...., ImageAndOsType imageAndOsType, ....</span></span></span><span class="hljs-function">)</span></span> { .... VirtualMachineProfile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VirtualMachineScaleSetVMProfile { OsProfile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VirtualMachineScaleSetOSProfile { ...., WindowsConfiguration = imageAndOsType.CreateWindowsConfiguration(), <span class="hljs-comment"><span class="hljs-comment">// &lt;= ...., }, StorageProfile = new VirtualMachineScaleSetStorageProfile { ImageReference = imageAndOsType?.Image, // &lt;= DataDisks = DataDiskStrategy.CreateVmssDataDisks( imageAndOsType?.DataDiskLuns, dataDisks) // &lt;= }, }, .... }</span></span></code> </pre> <br>  Lors de la cr√©ation d'un objet <i>VirtualMachineScaleSetVMProfile</i> , la variable <i>imageAndOsType</i> <i>est</i> utilis√©e sans v√©rifier la valeur <i>null</i> .  Cependant, lors de la cr√©ation de <i>VirtualMachineScaleSetStorageProfile</i> , cette variable est d√©j√† v√©rifi√©e √† l'aide de l'op√©rateur d'acc√®s conditionnel, et deux fois.  Le code semble dangereux. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3042</a> Exception <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NullReferenceException</a> possible.  Le '?.'  et '.'  les op√©rateurs sont utilis√©s pour acc√©der aux membres de l'objet 'existingContacts' RemoveAzureKeyVaultCertificateContact.cs 123 (KeyVault) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... List&lt;PSKeyVaultCertificateContact&gt; existingContacts; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { existingContacts = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.DataServiceClient. GetCertificateContacts(VaultName)?.ToList(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (KeyVaultErrorException exception) { .... existingContacts = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> email <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> EmailAddress) { existingContacts.RemoveAll(....); <span class="hljs-comment"><span class="hljs-comment">// &lt;= } .... }</span></span></code> </pre> <br>  Comme dans le cas d'une ex√©cution normale, et suite √† la gestion de l'exception, la variable <i>existingContacts</i> peut obtenir la valeur <i>Null</i> , apr√®s quoi le travail se poursuivra.  Plus loin dans le code, cette variable est utilis√©e sans aucune v√©rification. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3066</a> Ordre incorrect possible des arguments pass√©s √† la m√©thode 'PersistSyncServerRegistration': 'storageSyncServiceUid' et 'discoveryUri'.  EcsManagementInteropClient.cs 364 (StorageSync) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">EcsManagementInteropClient</span></span> : <span class="hljs-title"><span class="hljs-title">IEcsManagement</span></span> { .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PersistSyncServerRegistration</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m_managementObject.PersistSyncServerRegistration( serviceUri, subscriptionId, storageSyncServiceName, resourceGroupName, clusterId, clusterName, storageSyncServiceUid, <span class="hljs-comment"><span class="hljs-comment">// &lt;= discoveryUri, // &lt;= serviceLocation, resourceLocation); } .... }</span></span></code> </pre> <br>  L'analyseur suspectait que l'ordre de transmission des arguments √† la m√©thode <i>PersistSyncServerRegistration</i> √©tait <i>confus</i> .  D√©claration de m√©thode: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IEcsManagement</span></span> : <span class="hljs-title"><span class="hljs-title">IDisposable</span></span> { .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PersistSyncServerRegistration</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> [In, MarshalAs(UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> serviceUri, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> subscriptionId, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> storageSyncServiceName, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> resourceGroupName, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> clusterId, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> clusterName, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> discoveryUri, </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">// &lt;= [In, MarshalAs(UnmanagedType.BStr)] string storageSyncServiceUid, // &lt;= [In, MarshalAs(UnmanagedType.BStr)] string serviceLocation, [In, MarshalAs(UnmanagedType.BStr)] string resourceLocation); .... }</span></span></span></span></code> </pre> <br>  En effet, quelque chose est m√©lang√© ici avec les arguments num√©ro sept et huit.  La v√©rification du code par l'auteur est requise. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3077</a> Le setter de la propri√©t√© 'GetGuid' n'utilise pas son param√®tre 'value'.  RecoveryServicesBackupCmdletBase.cs 54 (RecoveryServices) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RecoveryServicesBackupCmdletBase</span></span> : <span class="hljs-title"><span class="hljs-title">AzureRMCmdlet</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _guid; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> GetGuid { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _guid; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _guid = Guid.NewGuid().ToString(); } } .... }</code> </pre> <br>  Le passeur n'utilise pas le param√®tre transmis.  Au lieu de cela, ils obtiennent un nouveau GUID et l'affectent au champ <i>_guid</i> .  Je pense que la plupart des lecteurs conviendront que ce code semble au moins laid.  L'utilisation d'une telle construction n'est pas tr√®s pratique: pour (re) initialiser la propri√©t√© <i>GetGuid</i> , <i>vous</i> devez lui attribuer une fausse valeur, ce qui n'est pas du tout √©vident.  Mais surtout, j'ai √©t√© amus√© par le moment o√π les auteurs eux-m√™mes utilisent cette construction.  Il n'y a qu'un seul endroit dans le code o√π <i>GetGuid fonctionne</i> .  Jetez un oeil: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> itemResponse = ServiceClientAdapter.CreateOrUpdateProtectionIntent( GetGuid ?? Guid.NewGuid().ToString(), ....); .... }</code> </pre> <br>  Super! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3091</a> Analyse empirique.  Il est possible qu'une faute de frappe soit pr√©sente √† l'int√©rieur du litt√©ral de cha√Æne: "ID du groupe de gestion".  Le mot ¬´Id¬ª est suspect.  Constants.cs 36 (Ressources) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HelpMessages</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SubscriptionId = <span class="hljs-string"><span class="hljs-string">"Subscription Id of the subscription associated with the management"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> GroupId = <span class="hljs-string"><span class="hljs-string">"Management Group Id"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= public const string Recurse = "Recursively list the children of the management group"; public const string ParentId = "Parent Id of the management group"; public const string GroupName = "Management Group Id"; // &lt;= public const string DisplayName = "Display Name of the management group"; public const string Expand = "Expand the output to list the children of the management group"; public const string Force = "Force the action and skip confirmations"; public const string InputObject = "Input Object from the Get call"; public const string ParentObject = "Parent Object"; }</span></span></code> </pre> <br>  L'analyseur a indiqu√© une erreur possible dans la cha√Æne affect√©e √† la constante <i>GroupName</i> .  La conclusion est bas√©e sur une analyse empirique d'autres affectations en tenant compte des noms de variables.  Je pense que dans ce cas, l'analyseur a raison, et la valeur de la constante <i>GroupName</i> devrait √™tre de la forme ¬´Management Group name¬ª.  L'erreur est probablement due au fait que la valeur de la constante <i>GroupId a</i> √©t√© <i>copi√©e</i> , mais ils ont oubli√© de la modifier. <br><br>  Une autre erreur similaire: <br><br><ul><li>  V3091 Analyse empirique.  Il est possible qu'une faute de frappe soit pr√©sente √† l'int√©rieur du litt√©ral de cha√Æne.  Le mot ¬´Nom¬ª est suspect.  ParamHelpMsgs.cs 153 (RecoveryServices) </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3093</a> Le '|'  L'op√©rateur √©value les deux op√©randes.  Peut-√™tre un court-circuit '||'  l'op√©rateur doit √™tre utilis√© √† la place.  PSKeyVaultCertificatePolicy.cs 114 (KeyVault) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> CertificatePolicy </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToCertificatePolicy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(SubjectName) || DnsNames != <span class="hljs-literal"><span class="hljs-literal">null</span></span> || Ekus != <span class="hljs-literal"><span class="hljs-literal">null</span></span> || KeyUsage != <span class="hljs-literal"><span class="hljs-literal">null</span></span> | <span class="hljs-comment"><span class="hljs-comment">// &lt;= ValidityInMonths.HasValue) { .... } .... }</span></span></code> </pre> <br>  On soup√ßonne qu'une erreur a √©t√© commise et l'op√©rateur || doit √©galement √™tre utilis√© entre les derni√®res conditions du bloc <i>if</i> .  La r√©ponse exacte, comme cela arrive souvent, ne peut √™tre donn√©e que par le d√©veloppeur. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3095</a> L'objet 'certificate' a √©t√© utilis√© avant d'√™tre v√©rifi√© par rapport √† null.  V√©rifiez les lignes: 41, 43. CertificateInfo.cs 41 (Automation) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CertificateInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> ...., Azure.Management.Automation.Models.Certificate certificate</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name = certificate.Name; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (certificate == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; .... }</code> </pre> <br>  Classique  L'objet est utilis√© en premier, et alors seulement le lien est v√©rifi√© pour <i>null</i> .  Nous rencontrons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tr√®s souvent de</a> telles erreurs.  Consid√©rez une autre erreur similaire. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3095</a> L'objet 'clusterCred' a √©t√© utilis√© avant d'√™tre v√©rifi√© par rapport √† null.  V√©rifiez les lignes: 115, 118. InvokeHiveCommand.cs 115 (HDInsight) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... _credential = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BasicAuthenticationCloudCredentials { Username = clusterCred.UserName, Password = clusterCred.Password.ConvertToString() }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (clusterConnection == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || clusterCred == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) .... }</code> </pre> <br>  Et quelques erreurs plus similaires: <br><br><ul><li>  V3095 L'objet '_profile' a √©t√© utilis√© avant d'√™tre v√©rifi√© par rapport √† null.  V√©rifiez les lignes: 47, 49. RMProfileClient.cs 47 (Comptes) </li><li>  V3095 L'objet 'this.LoadBalancer.BackendAddressPools' a √©t√© utilis√© avant d'√™tre v√©rifi√© par rapport √† null.  V√©rifiez les lignes: 56, 63. AddAzureRmLoadBalancerBackendAddressPoolConfigCommand.cs 56 (CognitiveServices) </li><li>  En g√©n√©ral, dans le code Azure PowerShell, j'ai rencontr√© beaucoup plus d'erreurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3095</a> .  Mais ils sont tous assez similaires, donc je ne m'attarderai pas l√†-dessus plus en d√©tail. </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3125</a> L'objet 'startTime' a √©t√© utilis√© apr√®s avoir √©t√© v√©rifi√© par rapport √† null.  V√©rifiez les lignes: 1752, 1738. AutomationPSClientDSC.cs 1752 (Automation) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetNodeReportListFilterString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> ...., DateTimeOffset? startTime, ...., DateTimeOffset? lastModifiedTime</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (startTime.HasValue) { odataFilter.Add(<span class="hljs-string"><span class="hljs-string">"properties/startTime ge "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.FormatDateTime(startTime.Value)); <span class="hljs-comment"><span class="hljs-comment">// &lt;= } .... if (lastModifiedTime.HasValue) { odataFilter.Add("properties/lastModifiedTime ge " + this.FormatDateTime(startTime.Value)); // &lt;= } .... }</span></span></code> </pre> <br>  √âgalement un type d'erreur assez courant.  La variable <i>startTime a √©t√©</i> v√©rifi√©e pour la valeur lors de la premi√®re utilisation.  La prochaine fois que vous l'utiliserez, ne le faites pas.  Mais cela pourrait √™tre encore pire.  Jetez un ≈ìil au deuxi√®me bloc <i>if</i> .  Je pense qu'il ne devrait pas y avoir du <i>tout de</i> variable <i>startTime</i> .  Ceci est indiqu√© √† la fois par l'absence de sa v√©rification de la pr√©sence d'une valeur avant utilisation et par la cha√Æne form√©e pour passer √† la m√©thode <i>Add</i> .  La premi√®re partie de cette ligne mentionne une autre variable ( <i>lastModifiedTime</i> ). <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3125</a> L'objet 'firstPage' a √©t√© utilis√© apr√®s avoir √©t√© v√©rifi√© par rapport √† null.  V√©rifiez les lignes: 113, 108. IntegrationAccountAgreementOperations.cs 113 (LogicApp) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IList&lt;IntegrationAccountAgreement&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ListIntegrationAccountAgreements</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> compositeList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;IntegrationAccountAgreement&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstPage = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LogicManagementClient. IntegrationAccountAgreements.List(....); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (firstPage != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { compositeList.AddRange(firstPage); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(firstPage.NextPageLink)) <span class="hljs-comment"><span class="hljs-comment">// &lt;= { .... } .... }</span></span></code> </pre> <br>  Une autre erreur √©vidente.  La variable <i>firstPage est</i> utilis√©e de mani√®re non s√©curis√©e, bien que plus t√¥t dans le code, il y ait une utilisation de cette variable avec une v√©rification pr√©liminaire de <i>null</i> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La V3125</a> dans le code Azure PowerShell a √©t√© encore plus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©ussie</a> que la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3095</a> d√©crite pr√©c√©demment.  Tous sont √©galement du m√™me type.  Je pense que nous pouvons nous limiter aux deux que nous avons examin√©s. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3137</a> La variable 'apiVersionSetId' est affect√©e mais n'est pas utilis√©e √† la fin de la fonction.  GetAzureApiManagementApiVersionSet.cs 69 (ApiManagement) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String ApiVersionSetId { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteApiManagementCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> apiVersionSetId; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ParameterSetName.Equals(ContextParameterSet)) { .... apiVersionSetId = ApiVersionSetId; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { apiVersionSetId = ....; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(ApiVersionSetId)) <span class="hljs-comment"><span class="hljs-comment">// &lt;= { WriteObject(....); } else { WriteObject(Client.GetApiVersionSet(...., ApiVersionSetId)) // &lt;= } }</span></span></code> </pre> <br>  L'analyseur signale que la variable locale <i>apiVersionSetId a</i> √©t√© initialis√©e, mais n'a pas √©t√© utilis√©e.  Un tel sch√©ma indique souvent une erreur.  Je pense que dans ce cas, la probabilit√© d'erreur est √©lev√©e, √©tant donn√© que le nom de la variable locale <i>apiVersionSetId</i> et le nom de la propri√©t√© <i>ApiVersionSetId</i> ne diff√®rent que dans la premi√®re lettre.  Jetez un ≈ìil au code.  Apr√®s avoir initialis√© <i>apiVersionSetId</i> (d'une mani√®re ou d'une autre), seule la propri√©t√© <i>ApiVersionSetId</i> est utilis√©e dans le code.  Tr√®s, tr√®s suspect. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3137</a> La variable 'cacheId' est affect√©e mais n'est pas utilis√©e √† la fin de la fonction.  RemoveAzureApiManagementCache.cs 94 (ApiManagement) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String CacheId { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteApiManagementCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> cacheId; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... cacheId = InputObject.CacheId; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... cacheId = cache.CacheId; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { .... cacheId = CacheId; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actionDescription = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format(...., CacheId); <span class="hljs-comment"><span class="hljs-comment">// &lt;= var actionWarning = string.Format(...., CacheId); // &lt;= .... Client.CacheRemove(resourceGroupName, serviceName, CacheId); // &lt;= .... }</span></span></code> </pre> <br>  La situation, en r√©p√©tant presque exactement le pr√©c√©dent.  La variable locale <i>cacheId</i> n'est pas utilis√©e apr√®s l'initialisation.  Au lieu de cela, ils utilisent une propri√©t√© avec un nom tr√®s similaire, <i>CacheId</i> .  Je ne sais pas, c'est peut-√™tre un tel mod√®le chez les d√©veloppeurs Azure PowerShell.  Mais cela ressemble √† une erreur. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3143</a> Le param√®tre 'value' est r√©√©crit dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">configurateur de</a> propri√©t√©s et n'est plus utilis√© par la suite.  NewAzureIntegrationAccountPartnerCommand.cs 67 (LogicApp) <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Parameter(Mandatory = false, HelpMessage = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"The integration account partner type."</span></span></span><span class="hljs-meta">, ValueFromPipelineByPropertyName = false)</span></span>] [ValidateSet(<span class="hljs-string"><span class="hljs-string">"B2B"</span></span>, IgnoreCase = <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] [ValidateNotNullOrEmpty] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> PartnerType { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.partnerType; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.partnerType; } <span class="hljs-comment"><span class="hljs-comment">// &lt;= }</span></span></code> </pre> <br>  Le champ <i>partnerType est</i> d√©clar√© comme <i>suit</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Default partner type. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> private string partnerType = "B2B";</span></span></code> </pre> <br>  Contrairement au nom de la solution dans laquelle cette erreur a √©t√© d√©tect√©e (LogicApp), je ne vois pas la logique ici.  L'utilisation de la <i>valeur</i> dans un setter pour l'enregistrement n'est pas si rare, mais dans ce cas, nous parlons de perdre la valeur d'origine.  √áa a l'air bizarre.  Le code dispose d'un acc√®s en lecture unique √† cette propri√©t√©.  Vous devriez peut-√™tre √† nouveau demander l'avis d'un expert.  Peut-√™tre que je ne comprends pas quelque chose.  Le fait est que j'ai rencontr√© un peu plus des m√™mes sch√©mas: <br><br><ul><li>  V3143 Le param√®tre 'value' est r√©√©crit dans un configurateur de propri√©t√©s et n'est plus utilis√© par la suite.  NewAzureIntegrationAccountSchemaCommand.cs 79 (LogicApp) </li><li>  V3143 Le param√®tre 'value' est r√©√©crit dans un configurateur de propri√©t√©s et n'est plus utilis√© par la suite.  NewAzureIntegrationAccountSchemaCommand.cs 87 (LogicApp) </li><li>  V3143 Le param√®tre 'value' est r√©√©crit dans un configurateur de propri√©t√©s et n'est plus utilis√© par la suite.  UpdateAzureIntegrationAccountPartnerCommand.cs 67 (LogicApp) </li><li>  V3143 Le param√®tre 'value' est r√©√©crit dans un configurateur de propri√©t√©s et n'est plus utilis√© par la suite.  UpdateAzureIntegrationAccountSchemaCommand.cs 80 (LogicApp) </li><li>  V3143 Le param√®tre 'value' est r√©√©crit dans un configurateur de propri√©t√©s et n'est plus utilis√© par la suite.  UpdateAzureIntegrationAccountSchemaCommand.cs 88 (LogicApp) </li></ul><br><h2>  Conclusion </h2><br>  C'est tous les bogues int√©ressants qui ont √©t√© trouv√©s dans le code Azure PowerShell.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passionn√©s et simplement int√©ress√©s, je propose de mener une √©tude ind√©pendante des erreurs dans le code de ce (ou de tout autre) projet. </font><font style="vertical-align: inherit;">J'aurais probablement pu manquer quelque chose d'autre d'int√©ressant. </font><font style="vertical-align: inherit;">Pour ce faire, il vous suffit de t√©l√©charger et d'installer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Merci d'avoir lu. </font><font style="vertical-align: inherit;">Un code sans code!</font></font><br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br>  Si vous souhaitez partager cet article avec un public anglophone, veuillez utiliser le lien vers la traduction: Sergey Khrenov. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure PowerShell: principalement inoffensif</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470730/">https://habr.com/ru/post/fr470730/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470718/index.html">"Effets alg√©briques" dans le langage humain</a></li>
<li><a href="../fr470720/index.html">Comment √©crire un contrat intelligent avec Python sur l'ontologie? Partie 2: API de stockage</a></li>
<li><a href="../fr470722/index.html">Comment √©crire un contrat intelligent avec Python sur l'ontologie? Partie 3: API d'ex√©cution</a></li>
<li><a href="../fr470726/index.html">Comment ne pas se noyer dans la routine, ou notre exp√©rience en comparant les d√©charges AWR pendant les tests de r√©sistance</a></li>
<li><a href="../fr470728/index.html">Azure PowerShell: principalement inoffensif</a></li>
<li><a href="../fr470732/index.html">S√©lection d'automne: que pensez-vous des parapluies intelligents?</a></li>
<li><a href="../fr470734/index.html">Contes de la crypte (de 40 ans de travail du programmeur)</a></li>
<li><a href="../fr470736/index.html">WWDC 2019: instruments personnalis√©s et symboles SF, ainsi que de nouvelles approches pour le d√©veloppement d'applications iOS</a></li>
<li><a href="../fr470742/index.html">√âquation de Navier-Stokes et simulation des fluides sur CUDA</a></li>
<li><a href="../fr470744/index.html">Les math√©matiques r√©v√®lent les secrets de la r√©troaction des cellules en direct</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>