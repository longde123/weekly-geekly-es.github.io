<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úãüèΩ üßùüèæ üßìüèª Como eu fiz sombras 2D no Unity üë©üèø‚Äç‚öñÔ∏è üëâüèº üßëüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O que vem √† mente de um desenvolvedor de jogos independente quando se depara com a necessidade de adicionar um recurso que ele n√£o tem id√©ia sobre a i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como eu fiz sombras 2D no Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484744/">  O que vem √† mente de um desenvolvedor de jogos independente quando se depara com a necessidade de adicionar um recurso que ele n√£o tem id√©ia sobre a implementa√ß√£o?  Obviamente, ele procurar√° tra√ßos daqueles que j√° percorreram esse caminho e se deram ao trabalho de anotar suas experi√™ncias.  Ent√£o fiz isso h√° algum tempo, come√ßando a criar sombras no meu jogo.  Encontrar a informa√ß√£o certa - na forma de artigos, li√ß√µes e guias - n√£o foi dif√≠cil.  No entanto, para minha surpresa, descobri que nenhuma das solu√ß√µes descritas me convinha.  Portanto, tendo realizado o meu, decidi contar ao mundo. <br><br>  Vale a pena avisar com anteced√™ncia que este texto n√£o pretende ser uma esp√©cie de guia de ultimato ou master class.  O m√©todo que usei pode n√£o ser universal, longe de ser o mais eficaz e n√£o cobre a tarefa de criar sombras bidimensionais por completo.  √â mais uma hist√≥ria sobre quais truques um desenvolvedor inexperiente na minha cara teve que recorrer para alcan√ßar um resultado que satisfizesse seus requisitos. <br><br>  O resultado em si est√° diante de voc√™: <br><br> <a href=""><img src="https://habrastorage.org/webt/-y/kc/nf/-ykcnfou6b_na1a44jvq-v3-nts.png"></a> <br><br>  E os detalhes do caminho para sua conquista est√£o esperando por voc√™. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Um pouco sobre o jogo em si</b> <div class="spoiler_text">  O Dwarfinator √© um shooter bidimensional de defesa de base / rolagem lateral desenvolvido de olho nos segmentos m√≥vel e de desktop.  A jogabilidade consiste na destrui√ß√£o sistem√°tica das ondas inimigas em dois modos alternados - defesa e persegui√ß√£o.  A progress√£o de um jogador envolve bombear um "tanque" melhorando e substituindo v√°rios elementos dele, como armas, motores e rodas, bem como elevando o n√≠vel e aprendendo habilidades ativas e passivas.  A progress√£o do ambiente envolve um aumento constante no n√∫mero de monstros na onda, a adi√ß√£o de novos tipos de inimigos √† onda √† medida que progridem no local e a mudan√ßa sucessiva de v√°rios locais, cada um com seu pr√≥prio conjunto de oponentes. <br></div></div><br><h3>  Declara√ß√£o do problema </h3><br>  Ent√£o, no momento da decis√£o de adicionar sombras ao jogo, eu tinha: <br><br><ul><li>  localiza√ß√£o na forma de dois sprites, um para exibir atr√°s de mobs e outras entidades, o segundo para exibir na frente deles; </li></ul><br> <a href=""><img src="https://habrastorage.org/webt/7e/e7/8s/7ee78soifwhkx6g3bgetf4nvfhy.png"></a> <br><br><ul><li>  mobs e objetos est√°ticos destrut√≠veis, constantemente animados e consistindo de sprites separados em uma quantidade de algumas a algumas d√∫zias; </li></ul><br><img src="https://habrastorage.org/webt/yp/ea/my/ypeamyommcilthpim0gr2o820mu.png"><br><br><ul><li>  conchas pr√≥prias e inimigas, representadas na maioria dos casos por um sprite ou por um sistema de part√≠culas; neste √∫ltimo caso, nenhuma sombra era necess√°ria; </li></ul><br><img src="https://habrastorage.org/webt/bt/9n/ml/bt9nmlkym2iuq6qtrqntzkzil7s.png"><br><br><ul><li>  um tanque constitu√≠do por v√°rias partes montadas de acordo com o mesmo esquema que os mobs; </li></ul><br><img src="https://habrastorage.org/webt/uv/1y/ed/uv1yedokb8lqcxfwmt788egsvne.png"><br><br><ul><li>  paredes com v√°rios estados fixos, que, novamente, s√£o um conjunto de sprites separados. </li></ul><br><img src="https://habrastorage.org/webt/3f/we/7s/3fwe7srgtopajqnn6rvg3kyoiq4.png"><br><br>  Por tudo isso, as sombras mais simples eram necess√°rias, repetindo os contornos do objeto e projetadas a partir de uma √∫nica fonte de luz fixa. <br><br>  Ao mesmo tempo, deve-se ter uma atitude agu√ßada em rela√ß√£o √† produtividade.  Devido √†s especificidades do g√™nero e √†s peculiaridades de sua implementa√ß√£o, a maioria dos objetos que projetam sombras est√£o localizados diretamente na tela a qualquer momento.  E o n√∫mero total deles pode ser superior a cem, se falamos de entidades de jogos, e alguns milhares, se falamos de sprites individuais. <br><br><h3>  Implementa√ß√£o </h3><br>  Na verdade, o principal problema foi que Dwarfinator, grosso modo, √© um jogo 2.5D.  A grande maioria dos objetos existe no espa√ßo bidimensional com os eixos X e Y, e o eixo Z √© usado raramente.  Visualmente e parcialmente em jogabilidade, o eixo Y √© usado para exibir altura e profundidade, dividindo-se da mesma maneira nos eixos virtual Y e Z. N√£o foi poss√≠vel usar as ferramentas padr√£o do Unity nessa situa√ß√£o para criar sombras. <br><br>  Mas, na verdade, eu n√£o precisava de ilumina√ß√£o honesta, bastava criar manualmente uma sombra para cada objeto.  Portanto, a coisa mais simples que me ocorreu foi simplesmente colocar uma c√≥pia dela atr√°s de cada entidade, girada no espa√ßo tridimensional, de modo a simular um local na superf√≠cie.  Todos os sprites dessa pseudo-sombra foram definidos como pretos, enquanto a estrutura hier√°rquica do propriet√°rio da sombra foi preservada, o que permitiu que ela fosse animada em sincroniza√ß√£o com o propriet√°rio pelo mesmo animador. <br><br>  Essa anima√ß√£o s√≠ncrona se parecia com isso: <br><br><img src="https://habrastorage.org/webt/wv/on/vc/wvonvcn2zlzubgo5orcwcjjuu5e.gif"><br><br>  No entanto, a sombra exigia transpar√™ncia.  A solu√ß√£o mais simples foi configur√°-lo para cada sprite de sombra.  Mas essa implementa√ß√£o n√£o parecia satisfat√≥ria - os sprites se sobrepunham, formando √°reas menos transparentes no local da sobreposi√ß√£o. <br><br>  A captura de tela abaixo mostra como √© a sombra de v√°rios segmentos transl√∫cidos.  Os par√¢metros de distor√ß√£o de sombra usados ‚Äã‚Äãtamb√©m s√£o vis√≠veis: a rota√ß√£o no eixo X em -50 graus, a rota√ß√£o no eixo Y em -140 graus e a escala no eixo X aumentaram 1,3 vezes em rela√ß√£o ao objeto pai. <br><br><img src="https://habrastorage.org/webt/6w/2k/m-/6w2km-vc4g_hhblm2fz3tofrdzq.png"><br><br>  Tornou-se √≥bvio que a transpar√™ncia deveria ser imposta √† sombra como um objeto s√≥lido.  O primeiro experimento sobre esse t√≥pico foi suspenso na sombra da c√¢mera, renderizando essa sombra no RenderTexture, que foi usado como material anexado ao pai da sombra do plano.  Ele j√° podia definir a transpar√™ncia sem problemas.  As sombras estavam fora do quadro para evitar a sobreposi√ß√£o de √°reas de captura da c√¢mera.  A abordagem funcionou, mas acabou que algumas d√∫zias de sombras causavam s√©rios problemas de desempenho, principalmente por causa do n√∫mero de c√¢meras no palco.  Al√©m disso, v√°rias anima√ß√µes assumiram um movimento significativo de sprites individuais de mob dentro da estrutura de seu objeto raiz, devido ao qual deveria ser localizada uma √°rea de c√¢mera que excederia significativamente o tamanho da imagem real em um determinado momento. <br><br>  A solu√ß√£o foi encontrada rapidamente - se voc√™ n√£o pode desenhar cada sombra com uma c√¢mera separada - por que n√£o desenhar todas as sombras com uma c√¢mera?  Tudo o que precisava ser feito era colocar uma √°rea separada da cena sob a sombra, um pouco mais alta que o campo de vis√£o da c√¢mera principal, enviar uma c√¢mera adicional para essa √°rea e exibir sua sa√≠da entre o local e outras entidades. <br><br>  Abaixo voc√™ pode ver um exemplo da sa√≠da desta c√¢mera: <br><br> <a href=""><img src="https://habrastorage.org/webt/in/bt/vm/inbtvmwj2slb2wn8f8wqqqkhbke.png"></a> <br><br>  A produtividade dessa implementa√ß√£o sofreu muito menos; portanto, a solu√ß√£o foi considerada funcionando e aplicada a todos os mobs, objetos est√°ticos e shells.  Isso foi seguido pela localiza√ß√£o do sprite.  Era imposs√≠vel usar um sprite em todos os objetos, como foi implementado anteriormente.  O uso de uma c√≥pia de um objeto como sombra s√≥ funciona bem desde que o objeto seja completamente plano.  Mesmo ao criar sombras para mobs, era not√°vel que os pontos de contato com a superf√≠cie espa√ßada ao longo da terceira coordenada violam a corre√ß√£o da sombra em rela√ß√£o a esses pontos. <br><br>  A captura de tela a seguir mostra um exemplo dessa viola√ß√£o.  O calcanhar da multid√£o √© considerado o ponto de contato com a superf√≠cie, mas as sombras dos p√©s j√° est√£o al√©m dos pr√≥prios p√©s. <br><br><img src="https://habrastorage.org/webt/-d/zu/an/-dzuan6-5vwdisaiafgysqizvnc.png"><br><br>  E se no caso das pernas do ogro voc√™ ainda pode mudar ligeiramente a posi√ß√£o da sombra e mascarar o problema, ent√£o para v√°rias dezenas de troncos de √°rvores n√£o h√° chance.  Todos os objetos de localiza√ß√£o que deveriam projetar uma sombra devem ser separados em GameObject.  Foi exatamente isso que fiz colocando c√≥pias dos objetos destrut√≠veis correspondentes na pr√©-fabricada local e desativando os scripts que n√£o s√£o usados ‚Äã‚Äãnessa posi√ß√£o.  Ao mesmo tempo, gra√ßas a isso, tornou-se poss√≠vel inclu√≠-los na classifica√ß√£o geral dos objetos da cena, e as conchas que voavam fora do local n√£o eram mais desenhadas estritamente em cima de todos os objetos, mas voavam entre eles.  Al√©m disso, tornou-se poss√≠vel animar os objetos. <br><br>  Mas ent√£o um novo problema me esperava.  Com sombras e dezenas de novos objetos, o n√∫mero m√°ximo de GameObjects simultaneamente no palco e, com eles, os componentes Animator e SpriteRenderer, mais que dobraram.  Quando soltei toda a onda de multid√µes no local, que totalizava cerca de 150 pe√ßas, o Profiler me mostrou reprovadoramente cerca de 40ms, que foram embora apenas para renderiza√ß√£o e anima√ß√£o, e a taxa de quadros geralmente variava em torno de 10. Otimizei desesperadamente meus pr√≥prios scripts, lutando a cada milissegundo, mas isso n√£o foi suficiente. <br><br>  Em busca de ferramentas de otimiza√ß√£o adicionais, me deparei com a vasta documenta√ß√£o e guias para lotes din√¢micos. <br><br><div class="spoiler">  <b class="spoiler_title">Um pouco mais sobre lotes</b> <div class="spoiler_text">  Em resumo, o lote √© um mecanismo para minimizar o n√∫mero de chamadas de empate e, com ele, o tempo gasto no momento de renderizar o quadro na intera√ß√£o entre a CPU e a GPU.  Quando usado em vez de enviar cada elemento individualmente para renderiza√ß√£o, elementos semelhantes s√£o agrupados e desenhados juntos por vez.  No caso do Unity, o pr√≥prio mecanismo tenta fazer o m√°ximo uso desse mecanismo e quase nenhuma a√ß√£o adicional √© necess√°ria ao desenvolvedor. <br></div></div><br>  O Frame Debugger mostrou que eu tenho, na melhor das hip√≥teses, os detalhes de cada objeto ou mob separadamente.  Tendo criado sprites para o primeiro e o segundo no atlas, consegui sombrear as sombras com apenas algumas chamadas, mas os donos dessas sombras se recusaram teimosamente a lutar contra si mesmos. <br><br>  Experimentos em uma cena separada mostraram que o lote din√¢mico √© interrompido quando os objetos t√™m um componente SortingGroup, que eu usei para classificar a exibi√ß√£o de entidades na tela.  Era poss√≠vel ficar sem ele, em teoria, no entanto, definir os valores de classifica√ß√£o para cada sprite e sistema de part√≠culas em um objeto separadamente poderia ser ainda mais caro do que a falta de lotes. <br><br>  Mas algo me assombrou.  O objeto de sombra, sendo um descendente do objeto host na cena real, tecnicamente pertencia ao mesmo SortingGroup, no entanto, n√£o havia problemas com os objetos de sombra din√¢micos sombreados.  A √∫nica diferen√ßa era que os objetos host foram desenhados diretamente na tela pela c√¢mera principal e os objetos shadow foram renderizados primeiro no RenderTexture. <br><br>  Essa foi a pegadinha.  O motivo exato desse comportamento √© desconhecido para a Internet, mas ao renderizar as imagens da c√¢mera no RenderTexture, o SortingGroup n√£o interrompe mais o lote.  A decis√£o parecia muito estranha, il√≥gica e, em geral, a mais muleta.  Mas, ao implementar a renderiza√ß√£o de entidades usando o mesmo m√©todo que a renderiza√ß√£o de sombras, e assim obtendo, al√©m da camada de sombra, uma camada de entidade, eu j√° atingi valores de desempenho bastante aceit√°veis. <br><br>  A captura de tela abaixo mostra um exemplo de renderiza√ß√£o de uma camada de entidade. <br><br> <a href=""><img src="https://habrastorage.org/webt/vn/q_/r3/vnq_r3631min5ao58fksxjgcmt0.png"></a> <br><br>  Portanto, em geral, renderizar uma certa entidade na coordenada Y se parece com isso: <br><br><ol><li>  A entidade √© colocada em Y-20; </li><li>  Uma entidade √© renderizada por uma c√¢mera observando essa coordenada em uma RenderTexture para entidades; </li><li>  A sombra da entidade √© colocada em Y + 20; </li><li>  A sombra de uma entidade √© desenhada por uma c√¢mera observando essa coordenada em uma RenderTexture para sombras; </li><li>  A c√¢mera principal desenha o sprite de localiza√ß√£o principal na tela - o √∫nico elemento atualmente sendo renderizado diretamente na tela; </li><li>  A c√¢mera principal desenha um plano na tela com sombras RenderTexture como material; </li><li>  A c√¢mera principal desenha um plano na tela com uma RenderTexture de entidades como material. </li></ol><br>  Um bolo de camada. <br><br>  Na captura de tela abaixo, a c√¢mera do editor est√° configurada para o modo tridimensional para demonstrar a localiza√ß√£o das camadas entre si. <br><br> <a href=""><img src="https://habrastorage.org/webt/pz/ix/0v/pzix0vcz_uw8gh4yppbukrsujjw.png"></a> <br><br><h3>  Nuances </h3><br>  Por√©m, como ocorreu durante o processo de replica√ß√£o da decis√£o para outras entidades, o caso geral n√£o abrangeu todos os cen√°rios poss√≠veis.  Por exemplo, havia entidades que estavam em alguma altura em rela√ß√£o √† superf√≠cie, em particular, conchas e alguns caracteres de cena.  Al√©m disso, as conchas tamb√©m tinham a capacidade de girar dependendo da dire√ß√£o do movimento na tela, pelo que, al√©m de definir o ponto de intersec√ß√£o do objeto e sua sombra, era necess√°rio selecionar a parte rotativa como um objeto filho separado, para corrigir a l√≥gica de rota√ß√£o do proj√©til e sua anima√ß√£o. <br><br>  A captura de tela a seguir mostra um exemplo da rota√ß√£o de conchas e suas sombras. <br><br><img src="https://habrastorage.org/webt/53/a1/dm/53a1dm21tezb3p8wktfmfyibubu.png"><br><br>  Personagens voadores, bem como mobs voadores planejados, tamb√©m podem se mover dentro de suas coordenadas Y virtuais, o que exigiu a cria√ß√£o de um mecanismo para calcular a posi√ß√£o da sombra a partir da posi√ß√£o de seu propriet√°rio no eixo Y virtual. <br><br>  O GIF abaixo mostra um exemplo de movimenta√ß√£o de um objeto em altura. <br><br><img src="https://habrastorage.org/webt/wh/m8/vz/whm8vzwjlsobsbyhzeapuggku4s.gif"><br><br>  Outro caso que saiu do conceito geral foi um tanque.  Ao contr√°rio de todas as outras entidades, o tanque tem um tamanho muito substancial ao longo do eixo Z virtual, e a implementa√ß√£o geral das sombras, como j√° mencionado, exige que o objeto seja quase plano.  A maneira mais f√°cil de contornar isso era desenhar manualmente formas de sombra para partes individuais do tanque, pois voc√™ poderia colocar qualquer coisa na camada de sombra. <br><br>  Para a constru√ß√£o correta de sombras desenhadas √† m√£o, tive que montar um design de linhas com base na captura de tela de uma sombra existente, que pode ser vista na captura de tela abaixo. <br><br><img src="https://habrastorage.org/webt/md/of/np/mdofnpoa7xwtlus9bkqvnalzpri.png"><br><br>  Se voc√™ dimensionar e posicionar essa estrutura de forma que a parte superior esteja em algum ponto do objeto pai e a parte inferior no ponto de contato com a superf√≠cie, o canto direito da estrutura mostrar√° o local onde o ponto de sombra correspondente deve estar.  Tendo projetado v√°rios pontos-chave dessa maneira, n√£o √© dif√≠cil construir toda a sombra sobre eles. <br><br>  Al√©m disso, partes individuais do tanque podem ter alturas diferentes para anexar partes menores, o que, como no caso de personagens voadores e monstros, requeria o ajuste da posi√ß√£o da sombra de cada parte espec√≠fica. <br><br>  A captura de tela abaixo mostra o tanque, seu conjunto de sombras e tamb√©m na forma de pe√ßas separadas. <br><br><img src="https://habrastorage.org/webt/67/bu/5m/67bu5mgmclx_x53nv2efh9mxnqe.png"><br><br>  Sombras das paredes acabaram sendo uma dor separada.  No in√≠cio do trabalho nas sombras, as paredes eram da mesma natureza que os detalhes do tanque - um objeto de v√°rias d√∫zias de sprites separados.  No entanto, as paredes tinham v√°rios estados controlados pelo animador. <br><br>  Pensando muito sobre o que fazer com eles, cheguei √† conclus√£o de que o conceito de paredes precisa ser mudado.  Como resultado, as paredes foram divididas em se√ß√µes, cada uma com seu pr√≥prio conjunto de estados, seu pr√≥prio animador e sua pr√≥pria sombra.  Isso nos permitiu usar a mesma abordagem para criar sombras para as se√ß√µes paralelas do eixo X que as mobs, e para as se√ß√µes que n√£o se encaixavam nessa regra, tivemos que criar algo pr√≥prio.  Em alguns casos, tive que criar meu pr√≥prio animador para a sombra de se√ß√£o e definir manualmente a posi√ß√£o dos sprites. <br><br>  Por exemplo, no caso da se√ß√£o mostrada na captura de tela abaixo, a sombra √© feita aplicando distor√ß√£o para cada log individual em vez da se√ß√£o inteira. <br><br><img src="https://habrastorage.org/webt/bc/ef/sm/bcefsmatcqoghwbttkwfhbrpeme.png"><br><br><h3>  Conclus√£o </h3><br>  Isso, de fato, √© tudo.  Apesar de todas as nuances acima, a tarefa original foi conclu√≠da na √≠ntegra, e agora meu projeto pode apresentar sombras bastante decentes, embora de origem um tanto duvidosa.  Espero que, gra√ßas a este artigo, para o pr√≥ximo desenvolvedor independente que fez uma pergunta semelhante a mim, a Internet se torne um pouco mais √∫til, se n√£o como um exemplo a seguir, pelo menos como o erro de outra pessoa em seu pr√≥prio aprendizado. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt484744/">https://habr.com/ru/post/pt484744/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt484732/index.html">O que √© o VMware e por que √© importante a compatibilidade com SSDs?</a></li>
<li><a href="../pt484734/index.html">O que poderia ter sido apresentado na CES nos s√©culos XIX e XX</a></li>
<li><a href="../pt484736/index.html">Linux: removendo o conjunto de bloqueios / dev / random</a></li>
<li><a href="../pt484738/index.html">Passo a passo de integra√ß√£o cont√≠nua para o Laravel 6 no Google Cloud Run</a></li>
<li><a href="../pt484740/index.html">Semana 04 de seguran√ßa: problemas de criptografia no Windows 10</a></li>
<li><a href="../pt484750/index.html">Esquizofrenia: um cuidado</a></li>
<li><a href="../pt484752/index.html">Escrever um driver de laptop para divers√£o e lucro ou Como se comprometer com o kernel, mesmo que voc√™ n√£o seja t√£o inteligente</a></li>
<li><a href="../pt484754/index.html">A Intel n√£o pode decidir quem √© mais r√°pido: Comet Lake ou Ice Lake</a></li>
<li><a href="../pt484756/index.html">Teoria da Informa√ß√£o Visual (Parte 2)</a></li>
<li><a href="../pt484758/index.html">O que √© comum entre programar e iniciar um neg√≥cio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>