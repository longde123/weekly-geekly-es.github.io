<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦄 👩‍🎓 ♎️ Da habe ich eine zentralisierte Kryptowährung in PHP geschrieben. (Teil 1 - Grundlegende Zusammenfassungen + Schnellstart) 🤪 👨🏽‍🔬 👨‍👩‍👧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vorwort 
 Ja, Sie müssen nur darüber nachdenken, eine zentralisierte Kryptowährung in PHP, das ist nicht richtig. Aber meine Grenzen für Ideen haben s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Da habe ich eine zentralisierte Kryptowährung in PHP geschrieben. (Teil 1 - Grundlegende Zusammenfassungen + Schnellstart)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481392/"><h1>  Vorwort </h1><br>  Ja, Sie müssen nur darüber nachdenken, eine zentralisierte Kryptowährung in PHP, das ist nicht richtig.  Aber meine Grenzen für Ideen haben sich trotzdem durchgesetzt, und deshalb habe ich, wie Sie vielleicht vermutet haben, beschlossen, darüber zu schreiben.  Im allerersten Teil erklären wir Ihnen, was Kryptowährung ist, besprechen die ersten Hinweise und erstellen ein Brieftaschensystem.  Jetzt fangen wir an. <br><a name="habracut"></a><br><h2>  Kryptowährung, wie ist das? </h2><br>  <i>Informationen stammen aus <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D0%25B8%25D0%25BF%25D1%2582%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BB%25D1%258E%25D1%2582%25D0%25B0" rel="nofollow">Wikipedia</a></i> <br><br><img align="left" src="https://habrastorage.org/webt/tc/tm/td/tctmtd68gowbmixyb4syaphyxm4.jpeg" width="45%" height="50%">  Kryptowährung ist eine Art digitaler Währung, deren Abrechnung von internen Abrechnungseinheiten durch ein dezentrales Zahlungssystem (es gibt keinen internen oder externen Administrator oder ein ähnliches System) im vollautomatischen Modus sichergestellt wird. <br><br>  Die Kryptowährung selbst hat kein spezielles Material oder keine spezielle elektronische Form - es handelt sich lediglich um eine Zahl, die die Datenmenge von Abrechnungseinheiten angibt, die an der entsprechenden Stelle im Informationspaket des Datenübertragungsprotokolls steht und oftmals nicht einmal verschlüsselt ist, wie alle anderen Informationen über Transaktionen zwischen Systemadressen. <br><br>  Kurz gesagt, Kryptowährung funktioniert folgendermaßen: <br><br><ol><li>  Ein Netzwerkbenutzer mit einem Guthaben sendet eine Transaktion an einen anderen anonymen Benutzer. </li><li>  Die Transaktion tritt in das Netzwerk ein. </li><li>  Miner (oder Benutzer, die Blöcke erstellen) lösen ein Problem, das von einem speziellen Algorithmus mit Bedingungen generiert wird (z. B. für das Vorhandensein der vorherigen 10-30 Nullen im Hash oder umgekehrt). </li><li>  Wenn in einem Hash eine Bedingung (oder Bedingungen) erfüllt ist, sendet der Miner dank dieser eine Nachricht an das Netzwerk, in der er über die Erstellung eines neuen Blocks und die Transaktion informiert. </li><li>  Der Empfänger erhält das Geld und der Bergmann die Vergütung in Form einer Provision, die bei der Vorbereitung der Aufgabe berechnet wird. </li></ol><br><h2>  Ist es sinnvoll, eine zentralisierte Kryptowährung und auch in PHP zu schreiben? </h2><br>  Ich denke nicht sehr.  Aber versuchen Sie es noch einmal, wie es sollte. <br><br><h2>  Wir betrachten Notizen vor der Entwicklung </h2><br>  Wir werden ein doppeltes Hash-Verifizierungssystem verwenden, das Proof-of-Work verwendet.  Es ist sinnvoll, die Hashes auf Software- und Netzwerkanwendungsebene zu überprüfen.  Dies liegt an der Optimierung der Serverauslastung.  Denn wenn wir zum Server gehen, um den Hash mehrmals zu überprüfen, erscheint eine solche Last.  Daher schlage ich folgende Methode vor: <br><br><ol><li>  Überprüfen Sie auf einem Software Miner lokal den Hash, um die Bedingungen zu erfüllen. </li><li>  Wenn die Bedingungen auf dem Software Miner mit den erforderlichen Bedingungen übereinstimmen, führen wir eine Überprüfung auf der Netzwerkebene der Anwendung (auf der Serverebene) durch. </li></ol><br>  Dies ist meiner Meinung nach der beste Weg, um die Last zu verteilen.  Es ist einfacher, mehrere Male lokal auf dem Computer zu überprüfen, als mehrere Male Spam-Anfragen an den Server zu senden. <br><br>  Der Name - ich hatte einen einfachen und vielleicht einprägsamen Namen - FlyCoin mit einem dreistelligen FLC-Währungscode. <br><br>  Datenbank - Ich verwende eine einfache und bequeme Option, PDO. <br><br>  Crypto-Wallets - werden mit der GUID und mt_rand generiert und die POSIX-Zeit wird als Seed verwendet. <br><br>  Sind Sie zu faul, um eine Hash-Check-Funktion zu haben?  - Ja, also habe ich beschlossen, den Code von einem alten (Open Source) Miner für eine solche (bereits verstorbene) Kryptowährung Entropy zu nehmen, meinem Freund Nikita. <br><br><div class="spoiler">  <b class="spoiler_title">Ich kann nicht glauben, dass er nur eine Kryptowährung erstellt hat.</b>  <b class="spoiler_title">Gibt es noch etwas anderes?</b> <div class="spoiler_text">  Im Allgemeinen sind alle seine Kreationen (die ich manchmal sogar benutze) in seiner <a href="https://vk.com/hphp_convertation" rel="nofollow">VKontakte-</a> Gruppe zu finden.  Ich hoffe, dass sie auch nützlich sind. <br></div></div><br><h2>  Lass uns gehen! </h2><br>  Beginnen wir damit, den Rahmen für unser zukünftiges System festzulegen.  Beginnen wir mit der Entwicklung der Anwendungs-API für unsere Kryptowährung.  Und der Rahmen sieht soweit so leer aus. <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/* * The API for FlyCoin */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkHash</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($hash, $exp)</span></span></span><span class="hljs-function"> //  $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hash</span></span></span><span class="hljs-function"> -     ,  $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exp</span></span></span><span class="hljs-function"> - .    </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Entropy</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Miner</span></span></span><span class="hljs-function">,   . </span></span>{ $sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    . $len = strlen ($hash); // C  . for ($i = 0; $i &lt; $len; ++$i) $sum += 2 * base_convert ($hash[$i], 16, 10); //        return $sum % 10 == 0 &amp;&amp; substr ($hash, -$exp) === str_repeat ('0', $exp); //  false       true,         . } class Block { public $id; // ID  public $prev_hash; //    public $from; //   public $to; //  public $ammount; //  public $difficult; //   } class API { protected $db; public function __construct () { $dsn = "mysql:host=localhost;dbname=flc"; // DSN   $this-&gt;db = new PDO ($dsn, $username, $password); //     try { return true; //  . } catch (PDOException $exception) { return false; //  . } } }</span></span></code> </pre> <br>  Hier ist der Rahmen unseres Wunders.  Zunächst implementieren wir die Registrierung und Generierung von GUIDs für unsere Geldbörsen.  Ich habe sofort eine leere API-Funktionsdefinition erstellt und auch eine GUID-Generierungsfunktion in Google gefunden.  Saatgut nicht vergessen.  Ich habe gerade eine Funktion gefunden, um einen Startwert zu erhalten, um eine eindeutige GUID zu erhalten. <br><br><pre> <code class="php hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make_seed</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> //      </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PHP</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> ($usec, $sec) = explode (<span class="hljs-string"><span class="hljs-string">' '</span></span>, microtime ()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $sec + $usec * <span class="hljs-number"><span class="hljs-number">1000000</span></span>; } mt_srand (make_seed ());</code> </pre><br>  Großartig.  Und die Funktion zum Generieren der GUID für die Brieftasche sieht dementsprechend so aus (wie auch der Stub selbst): <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">register</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> //    </span></span>{ } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">genGUID4</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> //  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Google</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sprintf (<span class="hljs-string"><span class="hljs-string">'%04x%04x-%04x-%04x-%04x-%04x%04x%04x'</span></span>, mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0fff</span></span>) | <span class="hljs-number"><span class="hljs-number">0x4000</span></span>, mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0x3fff</span></span>) | <span class="hljs-number"><span class="hljs-number">0x8000</span></span>, mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//     ,   . }</span></span></code> </pre><br>  Da wir alles anonym machen, speichern wir keine IP oder E-Mail.  Keine Bestätigung.  Wir werden genug sein.  In ~ 25 Minuten habe ich eine Registrierungsfunktion geschrieben.  Es wird nur ein Passwort von uns benötigt.  Die API-Funktion sendet die Brieftasche an uns zurück. <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">register</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($password)</span></span></span><span class="hljs-function"> //  $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">password</span></span></span><span class="hljs-function"> -    </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db) <span class="hljs-comment"><span class="hljs-comment">//    { $walletId = 'FLC@' . $this-&gt;genGUID4 (); //      $hash = crc32 ($walletId) . $walletId . hash_hmac ('sha512', str_rot13 ($password), 'FLC'); //     . $hash = hash_hmac ('sha512', $hash, 'FLC2'); //     . $newUser = $this-&gt;db-&gt;prepare (" INSERT INTO `wallets` (walletId, loginHash, balance) VALUES (:walletId, :hash, :startBalance) "); //    . $newUser-&gt;bindParam (':walletId', $walletId, PDO::PARAM_STR); //     $newUser-&gt;bindParam (':hash', $hash, PDO::PARAM_STR); //     $newUser-&gt;bindParam (':startBalance', 0, PDO::PARAM_INT); //    (   ,   0!)   $newUser-&gt;execute (); //  . return ['walletId' =&gt; $walletId]; //     ( ) } else return false; //      . }</span></span></code> </pre><br>  Hier habe ich kurz beschrieben, was diese oder jene Zeile macht. <br><br><div class="spoiler">  <b class="spoiler_title">Faire Botschaft für faire Leute und Programmierer.</b> <div class="spoiler_text">  Wenn Sie Ihre Kontakte auf der Site belassen haben (auf der sich möglicherweise diese Kryptowährung befindet) und sie Ihnen so etwas schreiben: <br><br>  "Hallo, kannst du helfen?"  Ich habe Mani in Ihrer Blockchain behalten und plötzlich habe ich mein Passwort verloren, bitte helfen Sie, und Sie werden es gut haben. “- Sie können dieses Angebot jederzeit ablehnen.  Die Essenz der Kryptowährung ist die sichere Speicherung von Zahlen.  Niemand kann beweisen, dass er oder sie ein Konto besitzt.  Somit kann jeder Angreifer <b>auch ohne Beteiligung des Opfers</b> die Gelder anderer Personen stehlen <b>!</b>  Es spielt keine Rolle, obwohl diese Person wirklich der Eigentümer des Kontos ist, ist es besser, dies abzulehnen.  Wenn Sie Geld verloren haben, bedeutet dies, dass Sie die Daten vom Konto nicht richtig gespeichert haben.  Aus Sicherheitsgründen wird die Kennwortwiederherstellung nicht mehr implementiert. <br></div></div><br>  Die hier vorgestellte Hash-Funktion kann wie folgt dargestellt werden: <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo stretchy=&quot;false&quot;>(</mo><mi>w</mi><mo>,</mo><mi>p</mi><mi>w</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>c</mi><mi>r</mi><mi>c</mi><mn>32</mn><mo stretchy=&quot;false&quot;>(</mo><mi>w</mi><mo stretchy=&quot;false&quot;>)</mo><mo>.</mo><mi>w</mi><mo>.</mo><mi>h</mi><mi>m</mi><mi>a</mi><mi>c</mi><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mi>w</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="38.289ex" height="2.66ex" viewBox="0 -832 16485.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-61" x="576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-73" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-68" x="1575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-28" x="2152" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-77" x="2541" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-2C" x="3258" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-70" x="3703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-77" x="4206" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-29" x="4923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-3D" x="5590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-63" x="6646" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-72" x="7080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-63" x="7531" y="0"></use><g transform="translate(7965,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-28" x="8966" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-77" x="9355" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-29" x="10072" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-2E" x="10461" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-77" x="10906" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-2E" x="11623" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-68" x="12068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-6D" x="12645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-61" x="13523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-63" x="14053" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-28" x="14486" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-70" x="14876" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMATHI-77" x="15379" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700002,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhjj28364yotMN4YqWfI1Dz4lv2y1g#MJMAIN-29" x="16096" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo stretchy="false">(</mo><mi>w</mi><mo>,</mo><mi>p</mi><mi>w</mi><mo stretchy="false">)</mo><mo>=</mo><mi>c</mi><mi>r</mi><mi>c</mi><mn>32</mn><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo><mo>.</mo><mi>w</mi><mo>.</mo><mi>h</mi><mi>m</mi><mi>a</mi><mi>c</mi><mo stretchy="false">(</mo><mi>p</mi><mi>w</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> hash (w, pw) = crc32 (w) .w.hmac (pw) </script><br><br>  Die Funktion funktioniert so: <br><br>  Ein Passwort wird eingegeben, wir prüfen, ob die Datenbank verbunden ist: <br><br><div class="spoiler">  <b class="spoiler_title">Ja, verbunden.</b>  <b class="spoiler_title">(Machen wir ein Passwort 12345)</b> <div class="spoiler_text">  Wir generieren die Brieftaschenadresse und schreiben $ walletId - wir erhalten so etwas: <b>FLC @ c1cbe61d-a19d-4c82-ba17-3a577df0aeb5</b> (diese GUID wurde von einer anderen Site generiert und ich habe ihr dann das FLC @ <b>-Präfix</b> hinzugefügt). <br><br>  Wir berechnen den Klartext-Hash.  In der ersten Reihe, erhalten wir <b>folgendes: 0087196442FLC @ c1cbe61d-a19d-4c82</b> -ba17-3a577df0aeb59ee77779db5a44ef3f60044fcb0e1170218e642cb9adc0789ddd08871ad95c7e1d3b1391c6c79774d319b5141bd3b13b717c3d389206ede659cb280949feac66 ( viele Briefe, seien Sie nicht überrascht). <br>  In der zweiten Runde wird der Hash zu einhundert Prozent zu HMAC: <br><br>  Wir schreiben alles in die Datenbank. <br><br>  Als Antwort schreiben wir die Brieftaschennummer, über die Sie sich anmelden können. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Nein, nicht verbunden.</b> <div class="spoiler_text">  In diesem Fall müssen Sie nichts Wertvolles erwarten. Geben Sie FALSE zurück. <br></div></div><br>  So sieht ein ausgeklügeltes Registrierungssystem aus.  In der Tat sieht es sehr einfach aus.  Und was den Code angeht - viel komplizierter. <br><br>  Wir werden mehr Zeit aufwenden und die Autorisierung durchführen.  Mit der Autorisierung ist die Situation einfacher.  Wir suchen ein Konto und versuchen uns anzumelden, da wir die bekannten Algorithmen zur Erzeugung von Passwort-Hashs kennen.  Dann überprüfen wir, und wenn die Daten korrekt sind, geben wir dem Client eine wichtige Zeile, in der Daten für die Kommunikation zwischen dem Server und dem Miner gespeichert werden. <br><br><div class="spoiler">  <b class="spoiler_title">Von mir.</b> <div class="spoiler_text">  Es hört sich so an, als ob wir keine Kryptowährung betreiben, sondern ein Autorisierungssystem zwischen PHP auf dem Server und PHP unter Verwendung von php.exe.  Im zweiten Teil werden wir einen zweiten Kuchen zu unserem „Kuchen“ hinzufügen, in dem wir etwas sehen, das mit Bergbau, Blockchain und Transaktionen zu tun hat. <br></div></div><br>  Nach weiteren 15-25 Minuten war die Autorisierungsfunktion fertig.  Siehe diesen Code unten: <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($walletId, $password)</span></span></span><span class="hljs-function"> //  </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db) <span class="hljs-comment"><span class="hljs-comment">//    { $hash = crc32 ($walletId) . $walletId . hash_hmac ('sha512', str_rot13 ($password), 'FLC'); //     . $hash = hash_hmac ('sha512', $hash, 'FLC2'); //     . $newUser = $this-&gt;db-&gt;prepare (" SELECT * FROM `wallets` WHERE walletId = :walletId AND loginHash = :hash LIMIT 0, 1 "); //    . $newUser-&gt;bindParam (':walletId', $walletId, PDO::PARAM_STR); //     $newUser-&gt;bindParam (':hash', $hash, PDO::PARAM_STR); //     $newUser-&gt;execute (); //  . $object = $newUser-&gt;fetch_object (); //   ,     if ($object AND hash_equals ($object-&gt;hash, $hash)) //   ,   . { $loginString = new stdClass; //    stdClass $loginString-&gt;hash = $hash; //       . $loginString-&gt;wallet = $walletId; return ['token' =&gt; serialize ($loginString)]; //      ,   . } else return false; //   / . } else return false; //    }</span></span></code> </pre><br>  Dieser Code entspricht fast der Registrierung, arbeitet jedoch im umgekehrten Algorithmus.  Die Arbeit mit Benutzern ist beendet. <br><br><h2>  Nachbedingung </h2><br>  Während dieser interessanten Zeit beim Lesen des Artikels haben wir Folgendes getan: <br><br><ul><li>  Wir haben uns kurz mit Cryptocurrency vertraut gemacht und wie es korrekt aufgebaut sein sollte. </li><li>  Sie beantworteten kurz die Frage: "Ist es sinnvoll, eine zentralisierte Kryptowährung zu erstellen, und das auch in PHP?" </li><li>  Besprochen Notizen vor dem Ausführen dieser Aufgabe </li><li>  Implementierte ein System von Kryptokonten. </li></ul><br>  Und jetzt können Sie lesen, was sich hinter den Jalousien befand: <br><br><div class="spoiler">  <b class="spoiler_title">Unter dem Vorhang</b> <div class="spoiler_text">  Dieser Artikel wurde ca. 4-5 Stunden (alle Sonnenuntergang und Abend) geschrieben.  Während dieser Zeit, wie ich schrieb, entwickelte ich mich, aber wenn ich einen Artikel über Habrahabr schrieb, schwand mein Wunsch, meinen Traum zu erfüllen, nicht dahin.  In der Tat war es für mich aufgrund des einfachen Konzepts von OOP einfacher, es zu verwenden als MySQLi oder schlimmer noch gewöhnliche Funktionen mit dem Präfix mysql_, die als veraltet gelten und nicht mehr für die Entwicklung in PHP geeignet sind. <br></div></div><br>  Was wir nächstes Mal machen werden: <br><br><ul><li>  Machen wir den Bergbau. </li><li>  Betrachten wir, wie Transaktionen und Blöcke angeordnet sind. </li><li>  Wir werden Transaktionen durchführen und der nicht verwendeten Block-Klasse einen Sinn geben. </li></ul><br>  Danke fürs Lesen!  Wir sehen uns noch!  Dies ist mein erster Artikel - ich warte auf Kritik. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481392/">https://habr.com/ru/post/de481392/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481378/index.html">So optimieren Sie die Anwendungsentwicklung</a></li>
<li><a href="../de481382/index.html">Windows Native Applications und Acronis Active Restore</a></li>
<li><a href="../de481386/index.html">Dithering: Rauschendes Signal zur Verbesserung</a></li>
<li><a href="../de481388/index.html">Wie Kryptowährungsbörsen ihre Blockchains aufbauen, die DeFi trotzen</a></li>
<li><a href="../de481390/index.html">Nachrichten aus der Welt von OpenStreetMap Nr. 490 (12/03/2019 - 09/12/2019)</a></li>
<li><a href="../de481394/index.html">Neuerstellung in einem neuen Spiel, was wir für das alte geliebt haben</a></li>
<li><a href="../de481398/index.html">Grundlegende Linux-Befehle für Tester und mehr</a></li>
<li><a href="../de481402/index.html">Verspätete Implementierung des Durchlaufens eines untergeordneten Baums der QObject-Klasse</a></li>
<li><a href="../de481406/index.html">Tiefes Eintauchen in die Investition von Ilona Mask</a></li>
<li><a href="../de481416/index.html">Ankündigung des zweiten AWS Meetups in Minsk (13.02.2020)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>