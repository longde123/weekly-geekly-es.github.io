<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📚 🐍 💏 Apakah Persatuan Lambat? Perhatian LINQ 👦🏻 👵 💕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sering dikatakan bahwa Persatuan itu lambat. Tetapi berapa banyak? Saya sedang mengembangkan aplikasi Pixel Studio, ini adalah editor seni pixel. Bagi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apakah Persatuan Lambat? Perhatian LINQ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415923/">  Sering dikatakan bahwa Persatuan itu lambat.  Tetapi berapa banyak?  Saya sedang mengembangkan aplikasi Pixel Studio, ini adalah editor seni pixel.  Baginya, saya menulis implementasi format GIF saya.  Operasi yang paling memakan waktu adalah pengkodean GIF, yaitu algoritma kompresi LZW.  Mari kita lihat bagaimana Unity menangani ini. <br><br><div style="text-align:center;"><img src="http://boexpert.ru/wp-content/uploads/2016/05/slowMT.jpg" alt="gambar"></div><a name="habracut"></a><br>  Pertama, saya akan segera menjelaskan mengapa saya harus menulis perpustakaan saya sendiri.  Ya, semuanya sederhana, perpustakaan System.Windows.Media.Imaging, yang berisi GifBitmapEncoder yang luar biasa, tidak dapat dihubungkan ke Unity.  Karena itu saya membaca artikel di hub tentang GIF, mengambil spesifikasi dan membuat GIF saya dengan blackjack. <br><br>  Tentu saja, saya mulai menulis dan men-debug perpustakaan di Visual Studio, dalam aplikasi konsol.  Saya akan menghilangkan momen ini, membosankan dan lama untuk debug, butuh 3 hari.  Dalam algoritma seperti itu, saya tidak memiliki pengalaman, biasanya melakukan permainan.  Oke, perpustakaan sudah siap.  Misalnya, tes "berat" GIF dalam 200 bingkai dan resolusi 256x256 dikodekan dalam 15 detik (Ryzen 7, tentu saja, pada perangkat keras saya).  Banyak, pikirku, dan dengan tangan pria itu aku membuat proses kompresi sejajar (seperti Unity harus mendukung utas).  Tes GIF dikodekan dalam 5 detik.  Hebat! <br><br>  Cukup salin semua kode sumber ke Unity untuk memeriksa apakah itu berfungsi.  Uji pengodean GIF membutuhkan waktu 120 detik.  Dalam mode multi-utas (ya, utas dalam Unity berfungsi, yang terpenting adalah tidak menyentuh UI) menyandi gif membutuhkan waktu 180 detik.  Facepalm. <br><br>  Google - masalahnya, ternyata, adalah hal biasa.  Menurut laporan serupa, kode algoritmik di Unity berjalan 10-20 kali lebih lambat.  Ini diduga terkait dengan implementasi pengumpulan sampah lainnya dan Editor Overhead yang berkabut.  Dalam majelis (Windows, Android) situasinya serupa.  Dalam rakitan .exe, misalnya, ia bekerja sedikit lebih cepat, sebesar 20%. <br><br>  Pertanyaan kepada pembaca - apakah saya melakukan sesuatu yang salah, atau apakah ada masalah? <br><br>  Tautan ke implementasi GIF, yang tertarik: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> .  Perpustakaan ditulis di bawah C # versi 6 dan. NET 3.5 agar kompatibel dengan versi Unity yang lebih lama.  Proyek ini dapat dialihkan ke .NET 4.0, lalu ThreadPool akan bekerja lebih cepat. <br><br>  UPD: Terima kasih atas komentarnya!  Semuanya ternyata agak membingungkan: kedua utas dengan kunci, dan implementasi kurva.  Jadi saya menyiapkan kasus sederhana - operasi menjalankan melalui array di LINQ.  Yaitu, operasi seperti itu dilakukan selama kompresi LZW (hanya ada pemeriksaan kunci dalam kamus). <br><br><img src="https://c.radikal.ru/c09/1807/b3/79339124ddd5.png" alt="gambar"><br><br>  Kami mengeksekusi di aplikasi konsol - 5 ms. <br>  Berjalan di Unity - 2100 ms. <br><br>  UPD: Bagian dari masalah ditemukan di LINQ.  Misalnya, memanggil Contains beberapa kali lebih lambat daripada Array.IndexOf.  LINQ hebat, menghemat waktu dan membuat kode lebih indah.  Tetapi tidak dalam tugas-tugas terapan seperti bekerja dengan array objek besar.  Ini berlaku untuk implementasi LINQ tertentu di Unity. <br><br>  UPD: Mengoptimalkan algoritma kompresi LZW, menghapus kunci string dalam kamus.  LINQ dihapus untuk koleksi besar jika memungkinkan.  Saya tidak menyentuh implementasi multithreading.  Dan semuanya terbang, bahkan di Android.  Tentu saja, perbedaan antara kecepatan aplikasi konsol tetap, tetapi tidak begitu signifikan. <br><br>  Terima kasih khusus kepada WNeZRoS untuk bantuannya dalam mengoptimalkan kode dan untuk semua peserta dalam diskusi!  Meskipun penyebab rem di LINQ tetap belum terpecahkan. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id415923/">https://habr.com/ru/post/id415923/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id415911/index.html">Akses ke indeks array yang tidak ada</a></li>
<li><a href="../id415913/index.html">Lakukan pemanasan untuk mereka yang bisa menggunakan Python</a></li>
<li><a href="../id415915/index.html">Praktik keras: apa jenis nirkabel yang kita miliki untuk pelaku bisnis perhotelan</a></li>
<li><a href="../id415917/index.html">"Hukum Musim Semi" mulai berlaku: selanjutnya apa?</a></li>
<li><a href="../id415919/index.html">Refactoring program on Go: akselerasi hingga 23 kali</a></li>
<li><a href="../id415925/index.html">MasterCard mematenkan teknologi blockchain anonim</a></li>
<li><a href="../id415927/index.html">Lampu Industri Breeze 50</a></li>
<li><a href="../id415929/index.html">Optimalisasi Arsitektur Kecerdasan Buatan: Perlombaan Dimulai</a></li>
<li><a href="../id415933/index.html">Bagaimana membangun arsitektur IIoT do-it-yourself</a></li>
<li><a href="../id415935/index.html">Urutan Penyisipan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>