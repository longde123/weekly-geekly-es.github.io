<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßíüèª üçó ü§± Qu'est-ce que c'est ici? Fonctionnement interne des objets JavaScript üôåüèΩ üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø ‚è´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Photo: Curieuse Liliana Saeb (CC BY 2.0) 


 JavaScript est un langage multi-paradigme qui prend en charge la programmation orient√©e objet et la liais...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Qu'est-ce que c'est ici? Fonctionnement interne des objets JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452192/"><p><img src="https://habrastorage.org/getpro/habr/post_images/e7b/99c/5ab/e7b99c5ab4652dbe38cb0e5b6fa0da90.jpg"><br>  <em>Photo: Curieuse Liliana Saeb (CC BY 2.0)</em> </p><br><p> JavaScript est un langage multi-paradigme qui prend en charge la programmation orient√©e objet et la liaison dynamique.  La liaison dynamique est un concept puissant qui vous permet de modifier la structure du code JavaScript au moment de l'ex√©cution, mais cette puissance et cette flexibilit√© suppl√©mentaires sont obtenues au prix d'une certaine confusion, dont la plupart est li√©e √† <code>this</code> comportement en JavaScript. </p><br><h1 id="dinamicheskoe-svyazyvanie">  Liaison dynamique </h1><br><p>  Avec la liaison dynamique, la d√©finition de la m√©thode √† appeler se produit au moment de l'ex√©cution et non au moment de la compilation.  JavaScript le fait avec <code>this</code> et la cha√Æne de prototypes.  En particulier, √† l'int√©rieur de la m√©thode, <code>this</code> est d√©termin√© lors de l'appel, et sa valeur sera diff√©rente selon la fa√ßon dont la m√©thode a √©t√© d√©finie. </p><br><p>  Jouons √† un jeu.  Je l'appelle "Qu'est- <code>this</code> ici?" <a name="habracut"></a></p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-string"><span class="hljs-string">'a'</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj = { <span class="hljs-attr"><span class="hljs-attr">getThis</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, getThis2 () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } }; obj.getThis3 = obj.getThis.bind(obj); obj.getThis4 = obj.getThis2.bind(obj); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> answers = [ obj.getThis(), obj.getThis.call(a), obj.getThis2(), obj.getThis2.call(a), obj.getThis3(), obj.getThis3.call(a), obj.getThis4(), obj.getThis4.call(a) ];</code> </pre> <br><p>  R√©fl√©chissez aux valeurs du tableau de <code>answers</code> et v√©rifiez vos r√©ponses avec <code>console.log()</code> .  Devin√©? </p><br><p>  Commen√ßons par le premier cas et continuons dans l'ordre.  <code>obj.getThis()</code> renvoie <code>undefined</code> , mais pourquoi?  Les fonctions fl√©ch√©es n'ont jamais <code>this</code> .  Au lieu de cela, ils prennent toujours <code>this</code> de la port√©e lexicale ( <em>environ <a href="">lexical ceci</a></em> ).  Pour la racine du module ES6, la r√©gion lexicale aura une valeur <code>undefined</code> de <code>this</code> .  <code>obj.getThis.call(a)</code> pas non plus d√©fini pour la m√™me raison.  Pour les fonctions fl√©ch√©es, <code>this</code> ne peut pas √™tre remplac√©, m√™me avec <code>.call()</code> ou <code>.bind()</code> .  <code>this</code> sera toujours pris dans le domaine lexical. </p><br><p>  <code>obj.getThis2()</code> obtient la liaison lors de l'appel de m√©thode.  S'il n'y avait pas cette liaison pour cette fonction auparavant, cela peut y √™tre li√© (car il ne s'agit pas d'une fonction de fl√®che).  Dans ce cas, <code>this</code> s'agit d'un objet <code>obj</code> qui est li√© au moment o√π la m√©thode est appel√©e avec <code>.</code>  ou la syntaxe d'acc√®s √† la propri√©t√© <code>[squareBracket]</code> .  ( <em>noter <a href="">la liaison implicite</a></em> ) </p><br><p>  <code>obj.getThis2.call(a)</code> peu plus compliqu√©.  La m√©thode <code>call()</code> appelle une fonction avec cette valeur donn√©e et des arguments facultatifs.  En d'autres termes, la m√©thode obtient la liaison <code>this</code> partir du param√®tre <code>obj.getThis2.call(a)</code> , donc <code>obj.getThis2.call(a)</code> renvoie l'objet <code>a</code> .  ( <em>noter <a href="">la liaison explicite</a></em> ) </p><br><p>  Dans le cas de <code>obj.getThis3 = obj.getThis.bind(obj);</code>  nous essayons d'obtenir une fonction de fl√®che avec <code>this</code> attach√©, qui, comme nous l'avons d√©j√† compris, ne fonctionnera pas, donc nous ne sommes pas <code>undefined</code> pour <code>obj.getThis3()</code> et <code>obj.getThis3.call(a)</code> respectivement. </p><br><p>  Pour les m√©thodes r√©guli√®res, vous pouvez lier, donc <code>obj.getThis4()</code> renvoie <code>obj</code> , comme pr√©vu.  Il a d√©j√† obtenu sa liaison ici <code>obj.getThis4 = obj.getThis2.bind(obj);</code>  et <code>obj.getThis4.call(a)</code> prend en compte la premi√®re liaison et renvoie <code>obj</code> au lieu de <code>a</code> . </p><br><h1 id="kruchenyy-myach">  Boule torsad√©e </h1><br><p>  Nous allons r√©soudre le m√™me probl√®me, mais cette fois, nous utilisons une <code>class</code> avec des champs publics pour d√©crire l'objet (les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">innovations de Stage 3</a> au moment d'√©crire ces lignes sont disponibles dans Chrome par d√©faut et avec <code>@babel/plugin-offer-class-properties</code> ): </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Obj</span></span></span><span class="hljs-class"> </span></span>{ getThis = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> getThis2 () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Obj(); obj2.getThis3 = obj2.getThis.bind(obj2); obj2.getThis4 = obj2.getThis2.bind(obj2); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> answers2 = [ obj2.getThis(), obj2.getThis.call(a), obj2.getThis2(), obj2.getThis2.call(a), obj2.getThis3(), obj2.getThis3.call(a), obj2.getThis4(), obj2.getThis4.call(a) ];</code> </pre> <br><p>  R√©fl√©chissez aux r√©ponses avant de continuer. </p><br><p>  √ätes-vous pr√™t? </p><br><p>  Tous les appels sauf <code>obj2.getThis2.call(a)</code> renvoient une instance de l'objet.  <code>obj2.getThis2.call(a)</code> renvoie <code>a</code> .  Les fonctions fl√©ch√©es tirent toujours <code>this</code> de leur environnement lexical.  Il existe une diff√©rence dans la fa√ßon dont <code>this</code> est d√©fini √† partir de l'environnement lexical pour les propri√©t√©s de classe.  √Ä l'int√©rieur, l'initialisation des propri√©t√©s de classe ressemble √† ceci: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Obj</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getThis = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } ...</code> </pre> <br><p>  En d'autres termes, la fonction fl√®che est d√©finie dans le contexte du constructeur.  Comme il s'agit d'une classe, la seule fa√ßon de cr√©er une instance est d'utiliser le <code>new</code> mot-cl√© (en omettant <code>new</code> entra√Ænera une erreur).  L'une des choses les plus importantes du <code>new</code> mot cl√© est de cr√©er une nouvelle instance de l'objet et de la lier √† celle-ci dans le constructeur.  Ce comportement, combin√© avec d'autres comportements que nous avons mentionn√©s ci-dessus, devrait expliquer le reste. </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  Avez-vous r√©ussi?  Une bonne compr√©hension de la fa√ßon dont <code>this</code> se comporte en JavaScript vous fera gagner beaucoup de temps lors du d√©bogage de probl√®mes complexes.  Si vous avez fait une erreur dans les r√©ponses, cela signifie que vous devez vous entra√Æner un peu.  Entra√Ænez-vous avec les exemples, puis revenez en arri√®re et v√©rifiez √† nouveau jusqu'√† ce que vous puissiez ex√©cuter le test et expliquer √† quelqu'un d'autre pourquoi les m√©thodes renvoient ce qu'elles renvoient. </p><br><p>  Si cela a √©t√© plus difficile que pr√©vu, vous n'√™tes pas seul.  J'ai demand√© √† beaucoup de d√©veloppeurs sur ce sujet et je pense que jusqu'√† pr√©sent, un seul d'entre eux a fait face √† cette t√¢che. </p><br><p>  Ce qui a commenc√© comme une recherche de m√©thodes dynamiques que vous pouvez rediriger avec <code>.call()</code> , <code>.bind()</code> ou <code>.apply()</code> est devenu beaucoup plus compliqu√© avec l'ajout de m√©thodes de classe et de fonctions fl√®ches.  Vous devriez peut-√™tre √† nouveau vous concentrer sur ce point.  Rappelez-vous que les fonctions fl√©ch√©es prennent toujours <code>this</code> de la port√©e lexicale, et la <code>class</code> est en fait limit√©e lexicalement par le constructeur de la classe sous le capot.  Si vous en doutez, n'oubliez pas que vous pouvez utiliser un d√©bogueur pour v√©rifier sa valeur. </p><br><p>  N'oubliez pas qu'en r√©solvant de nombreuses t√¢ches JavaScript, vous pouvez vous en passer.  D'apr√®s mon exp√©rience, presque tout peut √™tre red√©fini en termes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fonctions pures</a> qui prennent tous les arguments utilis√©s comme param√®tres explicites ( <code>this</code> peut √™tre consid√©r√© comme une variable implicite).  La logique d√©crite par les fonctions pures est d√©terministe, ce qui la rend plus testable.  De plus, avec cette approche, il n'y a pas d'effets secondaires, par cons√©quent, contrairement aux moments de manipulation, il est peu probable que vous cassiez quelque chose.  Chaque fois que <code>this</code> d√©fini, quelque chose en fonction de sa valeur peut se casser. </p><br><p>  Cependant, <code>this</code> est parfois utile.  Par exemple, pour √©changer des m√©thodes entre un grand nombre d'objets.  M√™me en programmation fonctionnelle, <code>this</code> peut √™tre utilis√© pour acc√©der √† d'autres m√©thodes d'objet afin d'impl√©menter les transformations alg√©briques n√©cessaires pour construire de nouvelles alg√®bres par-dessus celles existantes.  Ainsi, <code>.flatMap()</code> universel peut √™tre obtenu en utilisant <code>this.map()</code> et <code>this.constructor.of()</code> . </p><br><hr><br><p>  Merci pour l'aide √† la traduction de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">wksmirnowa</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">VIBaH_dev</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr452192/">https://habr.com/ru/post/fr452192/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr452182/index.html">Enqu√™te aupr√®s des employ√©s. L'erreur principale</a></li>
<li><a href="../fr452184/index.html">√Ä propos de l'anonymat dans les cha√Ænes de blocs bas√©es sur les comptes</a></li>
<li><a href="../fr452186/index.html">Les langages de programmation les plus rares et les plus chers</a></li>
<li><a href="../fr452188/index.html">Test d'unit√© de s√©rialisation Json dans Spring Boot</a></li>
<li><a href="../fr452190/index.html">Utilisation de WebAssembly 20x Web Application Accelerated</a></li>
<li><a href="../fr452198/index.html">Que devrait savoir chaque ing√©nieur QA √† propos de Selenium 4?</a></li>
<li><a href="../fr452200/index.html">GOSTIM: P2P F2F E2EE IM en une soir√©e avec la cryptographie GOST</a></li>
<li><a href="../fr452202/index.html">Revue de Sprint: Bas - Bas</a></li>
<li><a href="../fr452204/index.html">Alors que j'√©crivais ma premi√®re IA</a></li>
<li><a href="../fr452206/index.html">E - Exp√©rience. Ou comment la science aide √† concevoir des interfaces</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>