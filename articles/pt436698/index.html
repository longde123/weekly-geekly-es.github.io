<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôìÔ∏è ‚úçüèø ü§Ωüèª De quantas maneiras posso escrever fatorial para Scheme? üôéüèª üë∏üèø üçá</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Linguagens malignas afirmam que linguagens de programa√ß√£o funcionais s√£o "linguagens fatoriais de escrita". Isso geralmente √© definido como a linguage...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>De quantas maneiras posso escrever fatorial para Scheme?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436698/"><p> Linguagens malignas afirmam que linguagens de programa√ß√£o funcionais s√£o "linguagens fatoriais de escrita".  Isso geralmente √© definido como a linguagem Haskell, mas come√ßaremos com a linguagem funcional que influenciou bastante o Haskell e um subconjunto das ferramentas de programa√ß√£o funcional de muitas outras linguagens - a linguagem Scheme.  No m√≠nimo, <code>map</code> e, <code>for-each</code> , <code>filter</code> e <code>reduce</code> , al√©m de <code>apply</code> e <code>eval</code> chegou √†s nossas linguagens de programa√ß√£o favoritas, se n√£o do Scheme, a partir da√≠. </p><br><p>  Considere <em>algumas</em> maneiras poss√≠veis de escrever c√°lculos fatoriais.  Ao mesmo tempo, voc√™ recebe uma esp√©cie de ode √† linguagem de programa√ß√£o Scheme.  Eu acho que essa linguagem maravilhosa merece. </p><br><p>  Eu tenho 10 op√ß√µes para escrever defini√ß√µes de fun√ß√µes, que podem ser reduzidas a 3 m√©todos principais de c√°lculo: o processo computacional linear recursivo tradicional, itera√ß√£o, gera√ß√£o de uma sequ√™ncia de n√∫meros, seguido pela multiplica√ß√£o por convolu√ß√£o.  Proponho considerar essas op√ß√µes com mais detalhes.  Ao longo do caminho, consideraremos: otimiza√ß√£o da recurs√£o da cauda, ‚Äã‚Äãfun√ß√µes de ordem superior e metaprograma√ß√£o, c√°lculos adiados, listas sem fim, memoriza√ß√£o, uma maneira de criar uma vari√°vel est√°tica no esquema e macros de higiene. </p><a name="habracut"></a><br><p>  Para experimentos, usamos o bom e velho esquema de dialetos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">R5RS</a> e o princ√≠pio popular da arte "meios m√≠nimos - impress√µes m√°ximas". </p><br><p>  Todos os exemplos de esquema foram preparados no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DrRacket</a> 6.2 no modo R5RS.  As medi√ß√µes de tempo de execu√ß√£o foram feitas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Guile</a> 2.0 no ambiente do OpenSUSE Leap 15 OS. </p><br><p>  Para come√ßar, voc√™ pode usar uma defini√ß√£o recursiva de fatorial e simplesmente reescrever a f√≥rmula no esquema: </p><br><pre> <code class="plaintext hljs">(define (factorial-classic n) (if (zero? n) 1 (* n (factorial-classic (- n 1)))))</code> </pre> <br><p>  O resultado foi uma defini√ß√£o de uma fun√ß√£o (em termos de Scheme - um procedimento, embora de fato seja uma fun√ß√£o) para calcular o fatorial, que pode ser visto em in√∫meros guias de programa√ß√£o, come√ßando com o livro imortal de H. Abelson e D. Sassman "Estrutura e interpreta√ß√£o de programas de computador" . </p><br><p>  Voc√™ pode ler e entender esse c√≥digo assim: fatorial <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> n </script>  est√° ai <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mn" id="MJXp-Span-4">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 1 </script>  se <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">n</span><span class="MJXp-mo" id="MJXp-Span-7" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-8">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.656ex" height="1.937ex" viewBox="0 -728.2 2435.1 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMAIN-3D" x="878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMAIN-30" x="1934" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> n = 0 </script>  caso contr√°rio - <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">n</span><span class="MJXp-mtext" id="MJXp-Span-11">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15">t</span><span class="MJXp-mo" id="MJXp-Span-16" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17">n</span><span class="MJXp-mo" id="MJXp-Span-18" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-19">1</span><span class="MJXp-mo" id="MJXp-Span-20" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0.111em; margin-right: 0em;">!</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.019ex" height="2.66ex" viewBox="0 -832 6035.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-63" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-64" x="1284" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-6F" x="1807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-74" x="2293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMAIN-28" x="2654" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-6E" x="3044" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMAIN-2212" x="3866" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMAIN-31" x="4867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMAIN-29" x="5367" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMAIN-21" x="5757" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> n \ cdot (n-1)! </script>  .  Assim, esse c√≥digo corresponde √† defini√ß√£o recursiva de fatorial, adotada na matem√°tica.  A √∫nica coisa que n√£o verificamos afilia√ß√£o <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-22"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> n </script>  n√∫meros n√£o negativos. </p><br><p>  Sendo recursivo, o c√≥digo acima cont√©m uma restri√ß√£o √≥bvia ao valor <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-24"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> n </script>  : os dados da chamada recursiva se acumular√£o na pilha at√© <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-26"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> n </script>  n√£o atingir√° 0. Isso pode causar um estouro de pilha em geral <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhibTufxQQYaBONXyxJAGyDF0wToAQ#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> n </script>  . </p><br><p>  Como posso remover esta restri√ß√£o?  √â necess√°rio otimizar a recurs√£o da cauda: reescreva o c√≥digo para que a chamada recursiva se torne <em>cauda</em> (ou seja, a √∫ltima no procedimento).  Isso permitir√° que o int√©rprete do esquema execute a otimiza√ß√£o - substitua a computa√ß√£o recursiva pela iterativa. </p><br><p>  Se voc√™ usar as recomenda√ß√µes dos autores do livro acima, poder√° obter o seguinte: </p><br><pre> <code class="plaintext hljs">(define (factorial-classic-tco n) (define (iteration product counter) (if (&gt; counter n) product (iteration (* product counter) (+ counter 1)))) (iteration 1 1))</code> </pre> <br><p>  Este c√≥digo √© um exemplo comum e, come√ßando com o livro "A estrutura e interpreta√ß√£o de programas de computador", √© nele que a otimiza√ß√£o da recurs√£o da cauda √© geralmente explicada. </p><br><p>  Foi um cl√°ssico.  Mas Scheme √© a pr√≥pria flexibilidade, √© poss√≠vel escrever a mesma coisa de uma maneira fundamentalmente diferente?  E de prefer√™ncia ainda mais curto?  Por exemplo, de acordo com a entrada <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-30"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">n</span><span class="MJXp-mo" id="MJXp-Span-32" style="margin-left: 0.111em; margin-right: 0em;">!</span><span class="MJXp-mo" id="MJXp-Span-33" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-34">1</span><span class="MJXp-mtext" id="MJXp-Span-35">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">t</span><span class="MJXp-mn" id="MJXp-Span-40">2</span><span class="MJXp-mtext" id="MJXp-Span-41">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">t</span><span class="MJXp-mn" id="MJXp-Span-46">3</span><span class="MJXp-mtext" id="MJXp-Span-47">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">t</span><span class="MJXp-mtext" id="MJXp-Span-52">&nbsp;</span><span class="MJXp-mtext" id="MJXp-Span-53">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">s</span><span class="MJXp-mtext" id="MJXp-Span-59">&nbsp;</span><span class="MJXp-mtext" id="MJXp-Span-60">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> n! = 1 \ cdot 2 \ cdot 3 \ cdot ~ \ cdots ~ \ cdot n </script>  formar uma sequ√™ncia de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-66"><span class="MJXp-mn" id="MJXp-Span-67">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-10"> 1 </script>  antes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-68"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-11"> n </script>  (ou de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-70"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-12"> n </script>  antes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-72"><span class="MJXp-mn" id="MJXp-Span-73">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> 1 </script>  ) e depois recolh√™-lo por multiplica√ß√£o?  Felizmente, em Scheme, isso √© bastante simples, gra√ßas ao procedimento de <code>apply</code> interno, que aplica um procedimento com um n√∫mero arbitr√°rio de argumentos √† lista: </p><br><pre> <code class="plaintext hljs">(define (iota n) (define (iteration sequence i) (if (&gt; in) sequence (iteration (cons i sequence) (+ i 1)))) (iteration '() 1)) (define (factorial-fold n) (apply * (iota n)))</code> </pre> <br><p>  O esquema √© famoso por sua conveni√™ncia para c√°lculos simb√≥licos devido √† "unidade de c√≥digo e dados" (como costumam dizer sobre os idiomas da fam√≠lia Lisp).  Usamos esse recurso: formamos uma express√£o para calcular o fatorial de um n√∫mero <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-74"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-14"> n </script>  e depois calcule: </p><br><pre> <code class="plaintext hljs">(define (factorial-eval n) (define expression `(* ,@(iota n))) (eval expression (interaction-environment)))</code> </pre> <br><p>  O s√≠mbolo ‚Äúaspas simples‚Äù significa quase-cota√ß√£o.  Sem quase-cita√ß√£o, a obten√ß√£o de uma express√£o para c√°lculos adicionais poderia ser obtida usando o c√≥digo <code>(cons '* (iota n))</code> .  Uma cita√ß√£o simples (cota√ß√£o, cota√ß√£o) significa que <code>*</code> deve ser substitu√≠do na express√£o exatamente como um nome (s√≠mbolo), e n√£o o valor correspondente (aqui - o procedimento).  Ent√£o, com <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-76"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">n</span><span class="MJXp-mo" id="MJXp-Span-78" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-79">3</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> n = 3 </script>  n√≥s obtemos <code>(* 3 2 1)</code> .  Esta lista √© uma express√£o no esquema.  Seu valor pode ser realizado em um ambiente adequado, o melhor de tudo - em um ambiente <code>(interaction-environment)</code> ambiente de <code>(interaction-environment)</code> contendo os procedimentos internos e os procedimentos definidos por n√≥s no programa.  Na verdade, √© isso que fazemos no corpo da avalia√ß√£o <code>factorial-eval</code> . </p><br><p>  O esquema suporta computa√ß√£o adiada.  Haskell, que foi fortemente influenciado pelo Scheme, usa um modelo de c√°lculo lento, ou seja,  n√£o calcula o valor da express√£o at√© que o resultado desses c√°lculos seja reivindicado.  Isso permite que os programas tenham estruturas de dados t√£o peculiares quanto listas intermin√°veis.  Se apenas a parte necess√°ria para c√°lculos adicionais for retirada, o programa n√£o ser√° executado em ciclos: </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">ghci</span></span>&gt; take <span class="hljs-number"><span class="hljs-number">4</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span> ..] [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>]</code> </pre> <br><p>  A express√£o <code>[1 ..]</code> gera uma lista infinita de n√∫meros inteiros.  A express√£o <code>take 4</code> obt√©m os 4 primeiros elementos dessa lista.  Como os itens de lista subsequentes permanecem n√£o reivindicados, eles n√£o s√£o calculados. </p><br><p>  Na Haskell, obtendo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-80"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">n</span><span class="MJXp-mo" id="MJXp-Span-82" style="margin-left: 0.111em; margin-right: 0em;">!</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> n! </script>  de uma lista intermin√°vel, voc√™ pode escrever assim </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">factorials</span></span> :: [<span class="hljs-type"><span class="hljs-type">Integer</span></span>] factorials = next <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> next n fact = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> n' = n + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> fact : next n' (fact * n') factorial :: <span class="hljs-type"><span class="hljs-type">Integer</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Integer</span></span> factorial n = factorials !! fromIntegral n</code> </pre> <br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">ghci</span></span>&gt; take <span class="hljs-number"><span class="hljs-number">7</span></span> $ factorials [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">24</span></span>,<span class="hljs-number"><span class="hljs-number">120</span></span>,<span class="hljs-number"><span class="hljs-number">720</span></span>] ghci&gt; factorial <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">720</span></span></code> </pre> <br><p>  Usando algumas formas de <code>delay</code> / <code>force</code> do esquema <code>force</code> vamos tentar fazer algo semelhante.  A palavra-chave <code>delay</code> cria uma promessa para avaliar o valor de uma express√£o.  A palavra <code>force</code> chave <code>force</code> instrui a executar esses c√°lculos, o valor resultante √© calculado e armazenado.  Ap√≥s o acesso repetido, novos c√°lculos n√£o s√£o executados, mas o valor calculado anteriormente √© retornado. </p><br><p>  Nos idiomas da fam√≠lia Lisp, as listas s√£o constru√≠das a partir de pares.  Para construir listas infinitas, introduzimos o tipo de ‚Äúpar lento‚Äù - um par no qual o primeiro elemento √© o valor calculado e o segundo √© a promessa de calcular o valor.  Para fazer isso, precisamos suplementar a "trindade sagrada" das l√≠nguas da fam√≠lia Lisp ( <code>cons</code> , <code>car</code> , <code>cdr</code> ) com suas vers√µes pregui√ßosas: </p><br><pre> <code class="plaintext hljs">(define-syntax lazy-cons (syntax-rules () ((_ first second) (cons first (delay second))))) (define lazy-car car) (define (lazy-cdr lazy-pair) (force (cdr lazy-pair)))</code> </pre> <br><p>  O construtor do par <code>lazy-cons</code> √© implementado como uma macro.  Isso √© feito para evitar o c√°lculo do valor do segundo elemento do par ao cri√°-lo. </p><br><p>  A id√©ia √© criar uma lista intermin√°vel de valores e, em seguida, extrair dela o que voc√™ precisa.  Para fazer isso, defina a vers√£o lenta do procedimento para obter o elemento pelo √≠ndice: </p><br><pre> <code class="plaintext hljs">(define (lazy-list-ref lazy-list index) (if (zero? index) (lazy-car lazy-list) (lazy-list-ref (lazy-cdr lazy-list) (- index 1)))) (define (generate-factorials) (define (next nn!) (define n+1 (+ n 1)) (lazy-cons n! (next n+1 (* n! n+1)))) (next 0 1))</code> </pre> <br><p>  Aqui <code>n!</code>  e <code>n+1</code> s√£o os nomes das vari√°veis.  No esquema, em compara√ß√£o com outros idiomas, existem muito poucos caracteres que n√£o podem ser usados ‚Äã‚Äãnos identificadores. </p><br><p>  Observe que os fatores geradores de gerador de lista infinita n√£o cont√™m uma maneira de sair da recurs√£o.  No entanto, ele n√£o ser√° executado em loop, pois quando for chamado, apenas o cabe√ßalho da lista ser√° calculado, enquanto a cauda ser√° representada por uma promessa de calcular o valor. </p><br><p>  Agora voc√™ pode definir <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-83"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">n</span><span class="MJXp-mo" id="MJXp-Span-85" style="margin-left: 0.111em; margin-right: 0em;">!</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> n! </script>  como chegar <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-86"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> n </script>  th elemento da lista de fatoriais: </p><br><pre> <code class="plaintext hljs">(define lazy-factorials (generate-factorials)) (define (factorial-lazy n) (lazy-list-ref lazy-factorials n))</code> </pre> <br><p>  Isso funciona.  Ao mesmo tempo, se fatores de n√∫meros diferentes forem calculados em uma sess√£o do int√©rprete, os c√°lculos ocorrer√£o mais rapidamente do que nas vers√µes estritas, porque alguns dos valores da lista lenta j√° ser√£o calculados. </p><br><p>  A prop√≥sito, o c√≥digo no Scheme √© muito pr√≥ximo ao do Haskell.  Ent√£o, a declara√ß√£o de recebimento <code>!!</code>  corresponde aproximadamente ao procedimento <code>lazy-list-ref</code> construtor da <code>lazy-list-ref</code> <code>:</code> corresponde a <code>lazy-cons</code> .  Do mesmo modo, porque Haskell, apesar de professar um modelo de c√°lculo pregui√ßoso, no entanto, diferentemente do <code>delay</code> / <code>force</code> no Esquema, ele n√£o se lembra dos valores calculados. </p><br><p>  A prop√≥sito, para aumentar a produtividade, voc√™ pode aplicar a memoriza√ß√£o de valores j√° calculados - memoriza√ß√£o.  Armazenaremos os valores calculados em uma lista associativa, na qual as chaves s√£o n√∫meros e os valores s√£o seus fatoriais.  Quando chamado, examinaremos a lista em busca de valores j√° calculados.  Se o valor estiver na lista, retornaremos esse valor armazenado.  Se o valor n√£o estiver na lista, vamos calcul√°-lo, coloc√°-lo na lista e somente ent√£o devolv√™-lo.  Para garantir que essa lista esteja sempre com a fun√ß√£o chamada e n√£o no ambiente global, coloque-a em uma vari√°vel est√°tica: </p><br><pre> <code class="plaintext hljs">(define factorial-memoized (let ((memo '())) (lambda (n) (let ((memoized (assq n memo))) (if memoized (cadr memoized) (if (zero? n) 1 (let ((computed (* n (factorial-memoized (- n 1))))) (set! memo (cons (list n computed) memo)) computed)))))))</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Vari√°veis ‚Äã‚Äãest√°ticas no esquema</b> <div class="spoiler_text"><p>  Ver c√≥digo </p><br><pre> <code class="plaintext hljs">(define proc (let ((static-var initial-value)) (lambda args ...)))</code> </pre> <br><p>  √© uma maneira aceita pelo esquema de criar um procedimento com uma vari√°vel est√°tica.  O princ√≠pio de tal an√∫ncio pode ser convenientemente explicado com um exemplo mais curto - um procedimento que retorna o n√∫mero de chamadas: </p><br><pre> <code class="plaintext hljs">(define count (let ((n 0)) (lambda () (set! n (+ n 1)) n)))</code> </pre> <br><p>  Em uma sess√£o de int√©rprete, a primeira chamada <code>(count)</code> retornar√° 1, a segunda - 2, a terceira - 3, etc.  Como isso funciona? </p><br><p>  Sem a√ß√∫car sint√°tico, a defini√ß√£o de <code>count</code> √© assim: </p><br><pre> <code class="plaintext hljs">(define count ((lambda (n) (lambda () (set! n (+ n 1)) n)) 0))</code> </pre> <br><p>  Assim, o procedimento sem argumentos <code>(lambda () (set! n (+ n 1)) n)</code> , que inclui livremente <code>n</code> est√° associado √† <code>count</code> nomes.  Acontece que <code>n</code> definido no ambiente externo em rela√ß√£o a <code>(lambda () (set! n (+ n 1)) n)</code> , o que significa que o valor de <code>n</code> ser√° preservado entre as chamadas para <code>count</code> .  O valor <code>n</code> inicializado como zero quando o programa √© iniciado, pois <code>(lambda (n) ...)</code> √© aplicado ao argumento 0. Portanto, <code>n</code> ausente no ambiente global, mas sempre √© acess√≠vel a partir da <code>count</code> . </p></div></div><br><p>  Essa implementa√ß√£o tamb√©m promete ganhos de desempenho, calculando repetidamente fatoriais de v√°rios n√∫meros em uma sess√£o de int√©rprete. </p><br><p>  Obviamente, a otimiza√ß√£o da recurs√£o da cauda tamb√©m √© poss√≠vel aqui: </p><br><pre> <code class="plaintext hljs">(define factorial-memoized-tco (let ((memo '())) (lambda (n) (define (iteration product counter) (cond ((&gt; counter n) product) (else (set! memo (cons (list counter product) memo)) (iteration (* product counter) (+ counter 1))))) (iteration 1 1))))</code> </pre> <br><p>  ‚ÄúPor que essas dan√ßas com um pandeiro?‚Äù, Pode o leitor dizer.  Nas linguagens de programa√ß√£o imperativas, a mesma coisa √© escrita de forma simples - atrav√©s de um loop, ela funciona rapidamente e sem custos desnecess√°rios de mem√≥ria.  O esquema possui um subconjunto para programa√ß√£o imperativa, tamb√©m possui um meio para organizar loops - uma <em>forma especial de</em> <code>do</code> .  O procedimento para calcular o fatorial, escrito com sua ajuda, pode ser assim: </p><br><pre> <code class="plaintext hljs">(define (factorial-do n) (define product 1) (do ((i 1 (+ i 1))) ((&gt; in) product) (set! product (* product i))))</code> </pre> <br><p>  A constru√ß√£o do √© bastante vers√°til, e √© por isso que n√£o √© muito leg√≠vel.  N√£o √© melhor organizar seu pr√≥prio ciclo em um estilo imperativo?  As macros ajudar√£o com isso: </p><br><pre> <code class="plaintext hljs">(define-syntax for (syntax-rules () ((_ (variable init test step) . body) (let loop ((variable init)) (if test (begin (begin . body) (loop step)))))))</code> </pre><br><p>  Gra√ßas √† otimiza√ß√£o da recurs√£o da cauda pelo int√©rprete, obtemos um loop com o qual estamos acostumados em linguagens de programa√ß√£o imperativas.  Ao otimizar a recurs√£o da cauda, ‚Äã‚Äãa pilha n√£o aumentar√°. </p><br><p>  Definindo fatorial usando <code>for</code> : </p><br><pre> <code class="plaintext hljs">(define (factorial-for n) (define product 1) (for (i 1 (&lt;= in) (+ i 1)) (set! product (* product i))) product)</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Como isso funciona</b> <div class="spoiler_text"><p>  Neste exemplo, a express√£o <code>(for (i 1 (&lt;= in) (+ i 1)) (set! product (* product i)))</code> ser√° correspondida com o padr√£o <code>(_ (variable init test step) . body)</code> regra de sintaxe.  As seguintes substitui√ß√µes ser√£o realizadas: </p><br><pre> <code class="plaintext hljs">for ‚Üí _ i ‚Üí variable 1 ‚Üí init (&lt;= in) ‚Üí test (+ i 1) ‚Üí step (set! product (* product i)) ‚Üí body</code> </pre> <br><p>  A partir daqui, o seguinte c√≥digo ser√° gerado pelo modelo de regra de sintaxe: </p><br><pre> <code class="plaintext hljs">(define (factorial-for n) (define product 1) (let loop ((i 1)) ;   (if (&lt;= in) ;  (begin (begin (set! product (* product i))) ;  (loop (+ i 1))))) ;  for product)</code> </pre> </div></div><br><p>  H√° outra op√ß√£o que se parece com o imperativo <code>for</code> loop - com o procedimento interno <code>for-each</code> procedimento: </p><br><pre> <code class="plaintext hljs">(define (factorial-for-each n) (define product 1) (for-each (lambda (i) (set! product (* product i))) (iota n)) product)</code> </pre> <br><p>  Grande e poderosa linguagem Scheme!  E o desempenho? </p><br><p>  Usaremos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GNU Guile</a> para medir o desempenho - nesse ambiente, voc√™ pode medir o tempo necess√°rio para avaliar uma express√£o de maneira mais simples. </p><br><p>  O Guile funciona da seguinte maneira: compila o c√≥digo-fonte do programa no bytecode, que √© ent√£o executado pela m√°quina virtual.  Esta √© apenas uma das implementa√ß√µes e uma das v√°rias maneiras poss√≠veis de executar um programa Scheme, existem outras: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Racket</a> (usa compila√ß√£o JIT), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Chicken Scheme</a> (usa uma interpreta√ß√£o ou compila√ß√£o ‚Äúhonesta‚Äù em um subconjunto de C), etc.  Obviamente, as limita√ß√µes e o desempenho dos programas nesses ambientes podem variar um pouco. </p><br><p>  Vamos fazer medi√ß√µes com um certo valor <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-88"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> n </script>  .  O que deveria ser <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-90"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> n </script>  ?  Ent√£o, com o qual o maior <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-92"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> n </script>  ser√° capaz de "lidar" com as op√ß√µes propostas.  Com as configura√ß√µes padr√£o do Guile 2.0, em um PC com Intel Core i5 e 4 GB de RAM, obtive o seguinte: </p><br><table><thead><tr><th>  Procedimento </th><th>  O problema </th></tr></thead><tbody><tr><td> <code>factorial-classic</code> </td> <td>  estouro de pilha ativado <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-94"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">n</span><span class="MJXp-mo" id="MJXp-Span-96" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-97">10</span><span class="MJXp-mspace" id="MJXp-Span-98" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-99">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> n> 10 \, 000 </script></td></tr><tr><td> <code>factorial-classic-tco</code> </td> <td>  n√£o ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-100"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">n</span><span class="MJXp-mo" id="MJXp-Span-102" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-103">100</span><span class="MJXp-mspace" id="MJXp-Span-104" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-105">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> n = 100 \, 000 </script>  ) </td></tr><tr><td> <code>factorial-fold</code> </td> <td>  estouro de pilha ativado <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-106"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">n</span><span class="MJXp-mo" id="MJXp-Span-108" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-109">10</span><span class="MJXp-mspace" id="MJXp-Span-110" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-111">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> n> 10 \, 000 </script></td></tr><tr><td> <code>factorial-eval</code> </td> <td>  estouro de pilha ativado <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-112"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">n</span><span class="MJXp-mo" id="MJXp-Span-114" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-115">8</span><span class="MJXp-mspace" id="MJXp-Span-116" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-117">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> n> 8 \, 000 </script></td></tr><tr><td> <code>factorial-lazy</code> </td> <td>  √†s <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-118"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">n</span><span class="MJXp-mo" id="MJXp-Span-120" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-121">100</span><span class="MJXp-mspace" id="MJXp-Span-122" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-123">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> n = 100 \, 000 </script>  usa parti√ß√£o swap e congela </td></tr><tr><td> <code>factorial-memoized</code> </td> <td>  estouro de pilha ativado <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-124"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">n</span><span class="MJXp-mo" id="MJXp-Span-126" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-127">10000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> n> 10000 </script>  somente na primeira partida </td></tr><tr><td> <code>factorial-memoized-tco</code> </td> <td>  √†s <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-128"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">n</span><span class="MJXp-mo" id="MJXp-Span-130" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-131">1</span><span class="MJXp-mspace" id="MJXp-Span-132" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-133">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> n> 1 \, 000 </script>  usa parti√ß√£o swap e congela </td></tr><tr><td> <code>factorial-do</code> </td> <td>  n√£o ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-134"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">n</span><span class="MJXp-mo" id="MJXp-Span-136" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-137">100</span><span class="MJXp-mspace" id="MJXp-Span-138" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-139">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> n = 100 \, 000 </script>  ) </td></tr><tr><td> <code>factorial-for</code> </td> <td>  n√£o ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-140"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">n</span><span class="MJXp-mo" id="MJXp-Span-142" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-143">100</span><span class="MJXp-mspace" id="MJXp-Span-144" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-145">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> n = 100 \, 000 </script>  ) </td></tr><tr><td> <code>factorial-for-each</code> </td> <td>  n√£o ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-146"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">n</span><span class="MJXp-mo" id="MJXp-Span-148" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-149">100</span><span class="MJXp-mspace" id="MJXp-Span-150" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-151">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> n = 100 \, 000 </script>  ) </td></tr></tbody></table><br><p>  A partir daqui, testes de desempenho foram realizados em <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-152"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">n</span><span class="MJXp-mo" id="MJXp-Span-154" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-155">8</span><span class="MJXp-mspace" id="MJXp-Span-156" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-157">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> n = 8 \, 000 </script>  .  Os resultados s√£o apresentados na tabela abaixo, onde <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-158"><span class="MJXp-msubsup" id="MJXp-Span-159"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-161" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">n</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> t_ {run} </script>  - prazo de entrega <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-165"><span class="MJXp-msubsup" id="MJXp-Span-166"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-168" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">C</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34"> t_ {GC} </script>  - tempo de execu√ß√£o do coletor de lixo em segundos. <br>  Para todos os procedimentos, exceto os pregui√ßosos e os memorizados, s√£o obtidos os menores valores de tempo de execu√ß√£o e o tempo correspondente do coletor de lixo, obtidos ap√≥s tr√™s lan√ßamentos no <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-171"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">n</span><span class="MJXp-mo" id="MJXp-Span-173" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-174">8</span><span class="MJXp-mspace" id="MJXp-Span-175" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-176">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35"> n = 8 \, 000 </script>  . <br>  Para procedimentos memorizados e pregui√ßosos, o tempo de execu√ß√£o da primeira chamada √© indicado e, em seguida, a menor das tr√™s chamadas. </p><br><table><thead><tr><th>  Procedimento </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-177"><span class="MJXp-msubsup" id="MJXp-Span-178"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-180" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">n</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> t_ {run} </script>  com </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-184"><span class="MJXp-msubsup" id="MJXp-Span-185"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-187" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">C</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37"> t_ {GC} </script>  com </th><th>  Anota√ß√µes </th></tr></thead><tbody><tr><td> <code>factorial-classic</code> </td> <td>  0,051 </td><td>  0,034 </td><td></td></tr><tr><td> <code>factorial-classic-tco</code> </td> <td>  0,055 </td><td>  0,041 </td><td></td></tr><tr><td> <code>factorial-fold</code> </td> <td>  0,065 </td><td>  0,059 </td><td></td></tr><tr><td> <code>factorial-eval</code> </td> <td>  0,070 </td><td>  0,040 </td><td></td></tr><tr><td> <code>factorial-lazy</code> </td> <td>  0,076 </td><td>  0,036 </td><td>  primeira chamada </td></tr><tr><td> <code>factorial-lazy</code> </td> <td>  0,009 </td><td>  - </td><td>  chamadas subsequentes </td></tr><tr><td> <code>factorial-memoized</code> </td> <td>  0,077 </td><td>  0,041 </td><td>  primeira chamada </td></tr><tr><td> <code>factorial-memoized</code> </td> <td>  0,002 </td><td>  - </td><td>  chamadas subsequentes </td></tr><tr><td> <code>factorial-memoized-tco</code> </td> <td>  0,077 </td><td>  0,041 </td><td>  primeira chamada </td></tr><tr><td> <code>factorial-memoized-tco</code> </td> <td>  0,002 </td><td>  - </td><td>  chamadas subsequentes </td></tr><tr><td> <code>factorial-do</code> </td> <td>  0,052 </td><td>  0,025 </td><td></td></tr><tr><td> <code>factorial-for</code> </td> <td>  0,059 </td><td>  0,044 </td><td></td></tr><tr><td> <code>factorial-for-each</code> </td> <td>  0,066 </td><td>  0,042 </td><td></td></tr></tbody></table><br><p>  Temos 4 op√ß√µes que podem trabalhar com grandes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-190"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38"> n </script>  .  At <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-192"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">n</span><span class="MJXp-mo" id="MJXp-Span-194" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-195">100</span><span class="MJXp-mspace" id="MJXp-Span-196" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-197">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39"> n = 100 \, 000 </script>  eles t√™m os seguintes tempos de c√°lculo e coleta de lixo: </p><br><table><thead><tr><th>  Procedimento </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-198"><span class="MJXp-msubsup" id="MJXp-Span-199"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-201" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">n</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> t_ {run} </script>  com </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-205"><span class="MJXp-msubsup" id="MJXp-Span-206"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-208" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">C</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41"> t_ {GC} </script>  com </th></tr></thead><tbody><tr><td> <code>factorial-classic-tco</code> </td> <td>  8.468 </td><td>  6.628 </td></tr><tr><td> <code>factorial-do</code> </td> <td>  8.470 </td><td>  6.632 </td></tr><tr><td> <code>factorial-for</code> </td> <td>  8.440 </td><td>  6.601 </td></tr><tr><td> <code>factorial-for-each</code> </td> <td>  9,998 </td><td>  7.985 </td></tr></tbody></table><br><p>  Voc√™ pode ver que com n√£o muito grande <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-211"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> n </script>  o mais r√°pido e, ao mesmo tempo, o mais curto √© o primeiro.  A mesma op√ß√£o corresponde totalmente √† defini√ß√£o matem√°tica de fatorial.  A op√ß√£o de otimiza√ß√£o da recurs√£o da cauda n√£o √© muito inferior a ela no desempenho.  Ambas as op√ß√µes s√£o idiom√°ticas recomendadas pelos autores do idioma.  A conclus√£o √© bastante √≥bvia: a menos que especificado de outra forma, a abordagem, que √© "t√≠pica" para a linguagem, √© preferida, pelo menos para a primeira implementa√ß√£o de um algoritmo ou m√©todo. </p><br><p>  Ao mesmo tempo, a linguagem Scheme nos permitiu escrever muitas op√ß√µes para implementar a computa√ß√£o fatorial usando um conjunto muito limitado de primitivas (as "m√©dias m√≠nimas - impress√µes m√°ximas").  Portanto, apesar de sua idade vener√°vel e n√£o muito difundida, essa linguagem ainda pode ser recomendada para a programa√ß√£o de pesquisas: parece que voc√™ pode implementar qualquer coisa nela de qualquer <em>maneira</em> (e de <em>qualquer</em> maneira) <em>conveniente</em> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt436698/">https://habr.com/ru/post/pt436698/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt436688/index.html">A gigante de TI sai do mercado de chips para data centers - conte-nos o que isso significa para a ind√∫stria</a></li>
<li><a href="../pt436690/index.html">[Pergunte - responda] sobre propriedade intelectual e prote√ß√£o de dados</a></li>
<li><a href="../pt436692/index.html">(in) Guerra Finita</a></li>
<li><a href="../pt436694/index.html">Meu compilador Pascal e arte contempor√¢nea polonesa</a></li>
<li><a href="../pt436696/index.html">Como gerar som binaural em uma faixa de √°udio monocanal - o v√≠deo ajudar√°</a></li>
<li><a href="../pt436700/index.html">Anti-spoofing: como os sistemas de reconhecimento de rosto resistem aos golpistas?</a></li>
<li><a href="../pt436704/index.html">A hist√≥ria de como escolhemos balan√ßas para automa√ß√£o de caixas registradoras</a></li>
<li><a href="../pt436708/index.html">Em que consiste a IoT</a></li>
<li><a href="../pt436710/index.html">As tend√™ncias do mercado gamedev do ano 2019 IMHO. Descentraliza√ß√£o?</a></li>
<li><a href="../pt436712/index.html">Como promover um jogo incremental? Gratuito, r√°pido e eficaz *</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>