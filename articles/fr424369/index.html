<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîò ü§üüèΩ üî£ Mon fichier pr√©f√©r√© dans la base de code Chromium üëä üë®üèº ‚ôæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le code Chrome est tr√®s complet, chacun y trouvera son bonheur. Et maintenant, j'ai d√©cid√© de parler de mon fichier pr√©f√©r√© (en avez-vous un?). Ce fic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mon fichier pr√©f√©r√© dans la base de code Chromium</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/infopulse/blog/424369/"><img src="https://habrastorage.org/webt/co/r8/bz/cor8bzyorueirbrfti332pr0-fy.png" align="right">  Le code Chrome est tr√®s complet, chacun y trouvera son bonheur.  Et maintenant, j'ai d√©cid√© de parler de mon fichier pr√©f√©r√© (en avez-vous un?).  Ce fichier refl√®te tout: la douleur, la d√©ception, l'espoir, la pers√©v√©rance, la volont√©, la responsabilit√© des √©checs des autres et le sacrifice de soi.  Parfois, je le lis, je <s>pleure</s> et je comprends ce qu'une √©norme partie de l'iceberg est cach√©e sous l'eau.  En g√©n√©ral, ce n'est m√™me pas un fichier de code.  Il s'agit d'un fichier avec une configuration d√©crivant les bugs de la carte vid√©o que Chromium doit contourner afin d'afficher ses pages sur diff√©rentes plateformes.  Le voici: <a href="">https://cs.chromium.org/chromium/src/gpu/config/gpu_driver_bug_list.json</a> <br><br>  De quoi parle-t-on?  Rappelons-nous comment fonctionne le navigateur: vous tapez une adresse dans la barre d'adresse, le navigateur charge le contenu et l'affiche.  Le bon article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Que se passe-t-il lorsque vous tapez google.com dans votre navigateur et appuyez sur Entr√©e?" En</a> dit un peu plus √† ce sujet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">.</a>  (et aussit√¥t <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plusieurs</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">traductions de celui-ci</a> sur Habr√©).  Un des derniers points y est mentionn√©, disent-ils, ¬´et maintenant que tout est pr√™t, nous dessinons une image √† l'√©cran¬ª.  Oui, prenez-le et dessinez-le comme √ßa, bien s√ªr. <br><a name="habracut"></a><br><br>  Pour commencer, dans les langages de programmation pour une raison quelconque, il n'y a pas de fonction ¬´prendre et dessiner √† l'√©cran¬ª hors de la bo√Æte.  Les langues et leurs biblioth√®ques standard ne sont pas int√©ress√©es par de telles bagatelles.  En cons√©quence, le code universel multiplateforme pour le dessin n'est pas si facile √† √©crire.  Toutes sortes de jeux sympas AAA contournent cette restriction de mani√®re assez simple: ¬´Vous devriez avoir une telle console ou un tel syst√®me d'exploitation avec une carte vid√©o pour 800 $, alors cela fonctionnera d'une mani√®re ou d'une autre.  Probablement. "  Merci pour l'astuce!  Mais le navigateur n'est pas un jeu.  Le navigateur devrait fonctionner toujours et partout.  L'utilisateur du PC m√™me le plus mort, achet√© il y a 10 ans (et m√™me alors - lors d'une vente) ne s'attend pas √† jouer le dernier sorceleur, mais sera v√©ritablement scandalis√© s'il ne peut pas ouvrir son courrier dans le navigateur ou quelque chose sur google.  D'un autre c√¥t√©, le joueur qui a fait don d'un rein pour une carte vid√©o voudra regarder une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vid√©o 8k</a> dans un navigateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">, faire</a> tourner des mod√®les 3D, et il peut m√™me d√©filer en douceur sur une bande Facebook. <br><br>  Tout cela fait litt√©ralement exploser les d√©veloppeurs de Chromium: d'une part, ils prennent toujours en charge le dessin avec des technologies anciennes comme GDI et DirectX9 pour travailler sur des √©quipements obsol√®tes, mais d'autre part, ils ont vu la prise en charge des derni√®res versions d'OpenGL, DirectX11 (ou d√©j√† 12?) Et Vulkan - qui permet de d√©ployer sur des appareils modernes et complets (y compris mobiles). <br><br>  Mais tout cela aurait √©t√© la moiti√© du probl√®me si tout ce zoo fonctionnait comme il devrait fonctionner selon les sp√©cifications.  Ce qui ne se produit pas du tout.  Le vrai mat√©riel et ses pilotes cassent tout: promesses marketing aux clients, sp√©cifications techniques, normes g√©n√©ralement accept√©es, tests de certification, compatibilit√© OS, plans de mise √† jour, etc.  Mais, en plus du vrai mat√©riel et de ses pilotes, nous n'avons rien d'autre.  Par cons√©quent, vous devez travailler sur ce qui est.  C'est ce que dit le fichier <a href="">gpu_driver_bug_list.json</a> susmentionn√©. <br><br>  Soit dit en passant, la mesure dans laquelle le navigateur tente de "survivre √† tout prix" m√©rite le respect.  Ainsi, avec des probl√®mes non critiques, par exemple, avec DirectX11, des tentatives seront faites pour d√©sactiver certaines parties de ses fonctionnalit√©s, sacrifiant les performances, mais maintenant l'op√©rabilit√©.  Pour les bogues plus graves - DirectX11 sera d√©sactiv√© et le navigateur passera √† DirectX9, o√π √©galement (si n√©cessaire) les composants probl√©matiques seront "coup√©s et jet√©s".  Eh bien, avec une d√©faillance compl√®te du syst√®me DirectX, il y aura un basculement vers GDI - qui affectera la consommation du processeur et de la RAM, mais gardera toujours les performances des pages ordinaires (sans vid√©o ou 3D lourde) √† un niveau auquel l'utilisateur ne comprendra probablement m√™me pas que quelque chose ne va pas.  L√† o√π d'autres programmes vous demanderont d√©j√† de mettre √† jour le pilote ou de changer la carte vid√©o - Chromium continuera simplement √† fonctionner.  L'√©poustouflant. <br><br>  Regardons le contenu du fichier que j'ai mentionn√©.  Le nombre d'entr√©es individuelles en elle: 215 pi√®ces.  215 fois quand le d√©veloppeur de fer a menti, √©tait trop paresseux, stupide ou gourmand.  215 fois j'ai d√ª chercher la configuration mat√©rielle et logicielle correcte pour reproduire le probl√®me et trouver sa solution.  Il est difficile de dire combien de fois il a √©t√© d√©cid√© de ne pas r√©soudre le probl√®me - mais comme il y a beaucoup de gens autour de nous avec du vieux fer et en quelque sorte tr√®s peu qui ont "Google n'ouvre pas dans Chrome", nous pouvons supposer qu'il y avait tr√®s peu de tels cas. <br><br>  L'observation int√©ressante suivante est la distribution par OS: 89 - android, 44 - macosx, 34 - linux, 26 - win, 8 - chromeos.  Les conclusions d'ici peuvent √™tre faites diff√©remment.  D'une part, il est √©vident qu'Android est une plate-forme cl√© pour Google et d'√©normes fonds ont √©t√© d√©truits pour y rem√©dier.  D'un autre c√¥t√©, on ne sait pas pourquoi ils ont √©t√© pirat√©s dans des correctifs dans la base de code Chromium, et non dans les pilotes ou le syst√®me d'exploitation (apr√®s tout, Google a un niveau de contr√¥le assez √©lev√© √† toutes les √©tapes).  Les corrections y b√©n√©ficieraient √† tous les logiciels sur Android, et ici seulement √† Chromeium.  Le probl√®me r√©side probablement dans l'interaction des d√©partements, quand il est plus facile pour le programmeur Chromium de r√©soudre le probl√®me dans son code ici et maintenant que de l'escalader de 3-4 niveaux vers le haut, puis sur le c√¥t√©, puis 3-4 niveaux vers le bas.  Il y a moins de personnes int√©ress√©es par une entreprise que cela ne serait n√©cessaire. <br><br>  J'ai √©t√© tr√®s surpris qu'il y ait presque deux fois plus de bugs de rendu dans Mac Os que dans Windows.  Il me semblait que tout y est tr√®s limit√© en mat√©riel et l√©ch√© par les pilotes.  Mais il s'est av√©r√© que le zoo de Windows est deux fois plus tenace et stable.  Directement "Cath√©drale et Bazar" dans les illustrations.  Ou les d√©veloppeurs Google testent-ils le code uniquement sur les coquelicots? <br><br>  La division des fournisseurs est √©galement int√©ressante: Nvidia - 22, AMD / ATI - 17, Intel - 30. Je ne pense pas que le logiciel ou le mat√©riel Intel soit directement pire - plut√¥t, la production de masse affecte.  Quiconque n'ach√®te pas sp√©cifiquement un ¬´ordinateur de jeu¬ª est susceptible d'acheter quelque chose avec une carte graphique Intel int√©gr√©e.  Un bogue qui se produit avec 0,001% des utilisateurs vivra sur la carte vid√©o de NVidia ou ATI pendant des ann√©es, mais il entra√Ænera une bande d'utilisateurs en col√®re sur les forums et les r√©seaux sociaux dans le cas d'Intel.  "Un grand pouvoir implique une grande responsabilit√©." <br><br>  La s√©paration entre les bogues OpenGL et DirectX est dr√¥le: OpenGL est 16, DirectX est 0. Mais ce n'est pas parce que OpenGL est si mauvais et DirectX est si bon.  Le fait est que tous les bogues de la cat√©gorie ¬´gagnant¬ª (ce sont 26 pi√®ces) sont en fait des bogues DirectX (enfin, ok, pas tous, mais presque tous). <br><br>  Mais d'accord, arr√™tez ici de bl√¢mer tout le monde d'affil√©e g√©n√©ralis√©e.  Soyons personnels <s>, et l√†, avant la bagarre, vous voyez, pas loin</s> ! <br><br>  Ici, par exemple, l' <a href="">entr√©e 211</a> , faisant r√©f√©rence au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bogue 672380</a> .  Pour les gens, le moins unaire et la fonction arc tangente sur certains mat√©riels d'Intel et de NVidia ont cess√© de fonctionner dans le code.  <b>Moins unaire</b> , bon sang, et <b>trigonom√©trie de base</b> !  Il semblerait, quoi de plus √† croire?  Mais non, ils l'ont r√©par√© et √ßa fonctionne. <br><br>  Ou voici des enregistrements de "couleurs mal affich√©es" comme les <a href="">n ¬∞ 185</a> , <a href="">219</a> , <a href="">220</a> et quelques autres.  Le programmeur a tout fait correctement, toutes les fonctions ont fonctionn√© et ont renvoy√© le "succ√®s", mais sur l'√©cran, en cons√©quence, un pixel de la mauvaise couleur est affich√©.  Oh oui - uniquement sur ces cartes vid√©o et ces versions de pilotes.  Soit dit en passant, une question pour les fans de la th√©orie selon laquelle les tests peuvent tout couvrir: comment couvririez-vous cela avec des tests? <br><br>  Voici une autre chose int√©ressante, <a href=""># 224</a> : "Le d√©codage VPx n'est pas pris en charge bien avant la mise √† jour des cr√©ateurs de Windows 10."  Eh bien, c'est-√†-dire que le syst√®me d'exploitation est sorti, tout le monde a tromp√© qu'elle avait une acc√©l√©ration du d√©codage de telle ou telle vid√©o.  Mais en pratique, il s'est av√©r√© qu'elle existe, mais de telle sorte qu'il vaudrait mieux qu'elle n'existe pas du tout.  Et il vaut mieux le d√©sactiver.  En cons√©quence, le d√©veloppeur du syst√®me d'exploitation vend un autre milliard de syst√®mes d'exploitation pay√©s, et le d√©veloppeur du navigateur gratuit recueille des plaintes selon lesquelles la vid√©o ne joue pas aussi bien que nous le souhaiterions, bien qu'il semble que le mat√©riel et le syst√®me d'exploitation devraient le permettre!  "O√π sont mes 60 fps et pourquoi votre navigateur a-t-il mang√© 4 Go de RAM" - une conversation famili√®re, non? <br><br>  Et tout de suite, elle est rattrap√©e par le nombre record <a href="">225</a> : "Le d√©codage VPx est trop lent sur Intel Broadwell, Skylake et CherryView."  Nous avons d√©velopp√©, ce qui signifie que nous avons d√©velopp√© successivement de nouvelles g√©n√©rations de processeurs, annonc√©s, vendus.  Mais les probl√®mes de l'utilisateur final sont les probl√®mes de l'utilisateur final, dont ils se soucient.  Laissez les candidats s'y √©craser avec une b√©quille, puis nous le r√©parerons. <br><br>  Une chanson distincte est ce qu'on appelle les ¬´graphiques commutables¬ª, dans lesquels les vendeurs dans les magasins s'engagent tr√®s activement.  Eh bien, disent-ils, quel bon ordinateur portable avec deux cartes vid√©o - tout sera rapide dans les jeux, mais dans les programmes de bureau (comme un navigateur), il sera tr√®s √©conome en √©nergie, il fonctionnera pendant dix heures!  Et maintenant, nous regardons l'am√®re v√©rit√© de la vie: sous Windows, cela entra√Ænera un rejet complet de DirectX11 (enregistrement <a href="">n ¬∞ 100</a> ), et sur les coquelicots, il se bloquera si souvent que nous ferions mieux de d√©sactiver compl√®tement une carte non discr√®te (enregistrement <a href="">n ¬∞ 228</a> ). <br><br>  Ou voici le <a href="">num√©ro 242</a> : "Le code produit par l'initialisation de variable locale d√©clenche souvent des plantages dans le pilote Marshmallow Adreno."  La solution est tr√®s bien aussi: "dont_initialize_uninitialized_locals".  Eh bien, quel genre de gens normaux accepteraient d'√©crire quelque chose sous la plate-forme, o√π les variables locales ne peuvent pas √™tre initialis√©es pendant la d√©claration, car le pilote se bloque √† partir de cela?  Mais dans le code d'un produit aussi massif que le chrome - vous devez vivre avec cela. <br><br>  <a href="">N ¬∞ 26</a> : "D√©sactiver l'utilisation de Direct3D 11 sur Windows Vista."  DirectX10 √©tait l'une des principales caract√©ristiques de Vista lors de la sortie, et apr√®s un certain temps, DirectX11 en est sorti, je me souviens encore des bo√Ætes de cartes vid√©o de cette √©poque avec de fi√®res inscriptions ¬´compatibles DirectX11¬ª.  Et pour beaucoup, c'√©tait g√©n√©ralement la seule raison de passer d'un XP familier et stable.  Des ann√©es ont pass√© - et la prise en charge de DirectX11 (produit Microsoft) dans Windows Vista (produit Microsoft) est d√©sormais consid√©r√©e comme "non prise en charge".  Reconnaissance directe du m√©rite! <br><br>  D'accord, je suis fatigu√© d'en choisir un en particulier, lisez le reste vous-m√™me - les raisons des bogues et des b√©quilles impl√©ment√©es y sont bien d√©crites, en plus il y a des liens vers le bugtracker (le champ "cr_bugs"). <br><br><h2>  Moral </h2><br>  Premi√®rement, tout le monde ment.  Deuxi√®mement, m√™me dans des conditions o√π tout le monde ment, il est toujours possible d'√©crire des logiciels de haute qualit√©.  Et troisi√®mement, la prochaine fois, quelqu'un vous dira comment le Web moderne a r√©ussi gr√¢ce √† la ¬´puissance du HTML, du CSS et du magnifique langage Javascript¬ª - montrez-lui cet article et demandez comment cela fonctionnerait et √† qui c'√©tait n√©cessaire sans ce travail h√©ro√Øque de personnes invisibles pour "d√©coller avec toutes ces ordures". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr424369/">https://habr.com/ru/post/fr424369/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr424355/index.html">Moulage par injection: comment √ßa marche</a></li>
<li><a href="../fr424361/index.html">Comment la gamification am√©liore l'exp√©rience utilisateur</a></li>
<li><a href="../fr424363/index.html">"Si vous voulez cr√©er quelque chose de vraiment cool, vous devez creuser plus profond√©ment et savoir comment fonctionne votre code dans le syst√®me, sur le mat√©riel"</a></li>
<li><a href="../fr424365/index.html">Fonctionnement de la trace de pile sur ARM</a></li>
<li><a href="../fr424367/index.html">La lutte pour les ressources, partie 2: Nous jouons avec les param√®tres de Cgroups</a></li>
<li><a href="../fr424371/index.html">D√©ployer vCloud Extender</a></li>
<li><a href="../fr424373/index.html">O√π travailler en informatique, num√©ro 1: Voximplant</a></li>
<li><a href="../fr424375/index.html">Examen de la moulureuse sous vide Mayku FormBox: laissez les pi√®ces se propager</a></li>
<li><a href="../fr424377/index.html">Playme TIO Review: DVR √† montage magn√©tique haut de gamme</a></li>
<li><a href="../fr424379/index.html">Reconnaissance des √©colabels √† l'aide d'Azure Custom Vision √† partir d'une application mobile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>