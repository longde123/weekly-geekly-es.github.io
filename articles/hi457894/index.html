<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯЫАЁЯП╛ тЦля╕П тШЭЁЯП╛ рдПрдХ Proxmox рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВ: рд╕реНрдерд╛рдкрдирд╛, рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрдЕрдк, ZFS, рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдирд╛ ЁЯО▒ ЁЯРм ЁЯЪЬ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд┐рдЫрд▓реЗ рдХреБрдЫ рд╡рд░реНрд╖реЛрдВ рдореЗрдВ, рдореИрдВ рдкреНрд░реЙрдХреНрд╕реЙрдХреНрд╕ рдХреНрд▓рд╕реНрдЯрд░реНрд╕ рдХреЗ рд╕рд╛рде рдмрд╣реБрдд рдирд┐рдХрдЯрддрд╛ рд╕реЗ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реВрдВ: рдХрдИ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдПрдХ Proxmox рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВ: рд╕реНрдерд╛рдкрдирд╛, рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрдЕрдк, ZFS, рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457894/"> рдкрд┐рдЫрд▓реЗ рдХреБрдЫ рд╡рд░реНрд╖реЛрдВ рдореЗрдВ, рдореИрдВ рдкреНрд░реЙрдХреНрд╕реЙрдХреНрд╕ рдХреНрд▓рд╕реНрдЯрд░реНрд╕ рдХреЗ рд╕рд╛рде рдмрд╣реБрдд рдирд┐рдХрдЯрддрд╛ рд╕реЗ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реВрдВ: рдХрдИ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдЬрд╣рд╛рдВ рд╡реЗ рдЕрдкрдиреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣реА рдХрд╛рд░рдг рд╣реИ рдХрд┐ рдореИрдВ рдЖрдкрдХреЛ рд╕рдмрд╕реЗ рд╕рд╛рдорд╛рдиреНрдп рдЧрд▓рддрд┐рдпреЛрдВ рдФрд░ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛ рд╕рдХрддрд╛ рд╣реВрдВ рдЬреЛ рдЖрдкрдХреЗ рд╕рд╛рдордиреЗ рдЖ рд╕рдХрддреА рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдЦрд░реЛрдВрдЪ рд╕реЗ рддреАрди рдиреЛрдбреНрд╕ рдХреЗ рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВрдЧреЗред <br><img src="https://habrastorage.org/webt/jz/j-/lq/jzj-lqgwozo7rze1o8ij7bvzday.png"><br><a name="habracut"></a><br>  рдПрдХ Proxmox рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рджреЛ рдпрд╛ рдЕрдзрд┐рдХ рд╕рд░реНрд╡рд░ рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдиреЛрдбреНрд╕ рдХреА рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ 32 рдЯреБрдХрдбрд╝реЗ рд╣реИред  рд╣рдорд╛рд░реЗ рд╕реНрд╡рдпрдВ рдХреЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдПрдХ рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ рдкрд░ рддреАрди рдиреЛрдбреНрд╕ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВрдЧреЗ (рд▓реЗрдЦ рдореЗрдВ рдореИрдВ рдпрд╣ рднреА рдмрддрд╛рдКрдВрдЧрд╛ рдХрд┐ рдЕрджреНрд╡рд┐рддреАрдпрддрд╛ рдкрд░ рдХреНрд▓рд╕реНрдЯрд░ рдХреИрд╕реЗ рдмрдврд╝рд╛рдПрдБ - рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдпрджрд┐ рдЖрдк рдЕрдкрдиреЗ рдХреНрд▓рд╕реНрдЯрд░ рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдХреЛ рд╣реЗрдЯреНрдЬрдиреЗрд░ рдпрд╛ рдУрд╡реАрдПрдЪ рдкрд░, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП) рдЖрдзрд╛рд░ рдмрдирд╛рддреЗ рд╣реИрдВред  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ рдПрдХ рд╕рд╛рде рдХрдИ рдиреЛрдбреНрд╕ рдореЗрдВ рдбреЗрдЯрд╛ рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдПрдХ рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ рдХреЗ рд╕рд╛рде, рд╣рдо рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдиреЛрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рд╕реЛрдЪ рд╕рдХрддреЗ рд╣реИрдВ (рдКрдкрд░ рдХреА рд╕реАрдорд╛рдУрдВ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рддреЗ рд╣реБрдП)ред <br><br>  рдХреНрд▓рд╕реНрдЯрд░ рд╕реНрд╡рдпрдВ рдПрдХ рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ (рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдЖрдИрдкреА рдкрддреЗ рдПрдХ рд╣реА рд╕рдмрдиреЗрдЯ рдкрд░ рд╣реИрдВ), рдПрдХ рд╣реА рд╣реЗрдЯреНрдЬрдиреЗрд░ рдФрд░ рдУрд╡реАрдПрдЪ рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрд╡рд┐рдЪ (рд╣реЗрдЯреНрдЬрдиреЗрд░) рдФрд░ рд╡реАрдЖрд░рдПрдХреЗ (рдУрд╡реАрдПрдЪ) рддрдХрдиреАрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдбреЗрдЯрд╛ рдХреЗрдВрджреНрд░реЛрдВ рдореЗрдВ рдиреЛрдбреНрд╕ рдХреЛ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИ - рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрд╡рд┐рдЪ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣рдо рд▓реЗрдЦ рдореЗрдВ рднреА рдмрд╛рдд рдХрд░реЗрдВрдЧреЗред  рдпрджрд┐ рдЖрдкрдХреЗ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдкрд╛рд╕ рдХрд╛рдо рдкрд░ рд╕рдорд╛рди рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХрд┐рдпрд╛рдВ рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рдЖрдк рдУрд╡реАрдПрд╕ (рдУрдкрди рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрд╡рд┐рдЪ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдореВрд▓ рд░реВрдк рд╕реЗ рдкреНрд░реЛрдХреНрд╕рдореЙрдХреНрд╕ рджреНрд╡рд╛рд░рд╛ рд╕рдорд░реНрдерд┐рдд рд╣реИ, рдпрд╛ рд╡реАрдкреАрдПрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореИрдВ рдпреВрдирд┐рдХрд╕реНрдЯ рдХреЛ рдХрдо рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдиреЛрдбреНрд╕ рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ - рдРрд╕реА рд╕реНрдерд┐рддрд┐рдпрд╛рдВ рдЕрдХреНрд╕рд░ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИрдВ рдЬрд╣рд╛рдВ рдХреНрд▓рд╕реНрдЯрд░ рдРрд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ "рдЕрд▓рдЧ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ" рдФрд░ рдЙрд╕реЗ рдмрд╣рд╛рд▓ рдХрд░рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдореИрдВ рдЕрдкрдиреЗ рдХрд╛рдо рдореЗрдВ рдУрд╡реАрдПрдЪ рдФрд░ рд╣реЗрдЯреНрдЬрд╝рдирд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реВрдВ - рдореИрдВрдиреЗ рдЗрд╕ рддрд░рд╣ рдХреА рдШрдЯрдирд╛рдУрдВ рдХреЛ рдХрдо рджреЗрдЦрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░реЗрдВ рдЬреЛ рд╣реЛрд╕реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: рдХреНрдпрд╛ рдЗрд╕рдХреЗ рдкрд╛рд╕ рд╡реИрдХрд▓реНрдкрд┐рдХ рддрдХрдиреАрдХ рд╣реИ, рдХреНрдпрд╛ рд╕рдорд╛рдзрд╛рди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдХреНрдпрд╛ рдпрд╣ рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЗрд╕реА рддрд░рд╣ ред <br><br><h3>  Proxmox рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </h3><br>  рдкреНрд░реЙрдХреНрд╕рдореЛрдХреНрд╕ рдХреЛ рджреЛ рддрд░реАрдХреЛрдВ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: рдЖрдИрдПрд╕рдУ-рдЗрдВрд╕реНрдЯреЙрд▓рд░ рдФрд░ рд╢реЗрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдерд╛рдкрдирд╛ред  рд╣рдо рджреВрд╕рд░реА рд╡рд┐рдзрд┐ рдЪреБрдирддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╕рд░реНрд╡рд░ рдкрд░ рдбреЗрдмрд┐рдпрди рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред <br><br>  рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рд╕рд░реНрд╡рд░ рдкрд░ Proxmox рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд▓рд┐рдП рд╕реАрдзреЗ рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВред  рд╕реНрдерд╛рдкрдирд╛ рдЕрддреНрдпрдВрдд рд╕рд░рд▓ рд╣реИ рдФрд░ рдпрд╣рд╛рдВ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдкреНрд░рд▓реЗрдЦрди рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╣реИред <br><br>  рдкреНрд░реЙрдХреНрд╕реЙрдХреНрд╕ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдФрд░ рдЗрд╕ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреА рдХреБрдВрдЬреА рдЬреЛрдбрд╝реЗрдВ: <br><br><pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"deb http://download.proxmox.com/debian/pve stretch pve-no-subscription"</span></span> &gt; /etc/apt/sources.list.d/pve-install-repo.list wget http://download.proxmox.com/debian/proxmox-ve-release-5.x.gpg -O /etc/apt/trusted.gpg.d/proxmox-ve-release-5.x.gpg chmod +r /etc/apt/trusted.gpg.d/proxmox-ve-release-5.x.gpg <span class="hljs-comment"><span class="hljs-comment"># optional, if you have a changed default umask</span></span></code> </pre> <br>  рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╣реА рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛: <br><br><pre> <code class="bash hljs">apt update &amp;&amp; apt dist-upgrade</code> </pre> <br>  рдПрдХ рд╕рдлрд▓ рдЕрджреНрдпрддрди рдХреЗ рдмрд╛рдж, рдЖрд╡рд╢реНрдпрдХ рдкреНрд░реЙрдХреНрд╕рдореЙрдХреНрд╕ рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">apt install proxmox-ve postfix open-iscsi</code> </pre> <br>  <b>рдиреЛрдЯ</b> : рдкреЛрд╕реНрдЯрдлрд╝рд┐рдХреНрд╕ рдФрд░ рдЧреНрд░рдм рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рджреМрд░рд╛рди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗ - рдЙрдирдореЗрдВ рд╕реЗ рдПрдХ рд╡рд┐рдлрд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рд╢рд╛рдпрдж рдпрд╣ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рд╣реЛрдЧрд╛ рдХрд┐ рд╣реЛрд╕реНрдЯрдирд╛рдо рдирд╛рдо рд╕реЗ рд╣рд▓ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред  рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреА рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпреЛрдВ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░реЗрдВ рдФрд░ рдЙрдкрдпреБрдХреНрдд рдЕрджреНрдпрддрди рдХрд░реЗрдВ <br><br>  рдЕрдм рд╕реЗ, рд╣рдо https: // &lt;рдмрд╛рд╣рд░реА-рдЖрдИрдкреА-рдкрддрд╛&gt;: 8006 (рдЖрдк рдХрдиреЗрдХреНрд╢рди рдХреЗ рджреМрд░рд╛рди рдПрдХ рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдкреНрд░рдорд╛рдг рдкрддреНрд░ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░реЗрдВрдЧреЗ) рдореЗрдВ рдкреНрд░реЙрдХреНрд╕рдореЙрдХреНрд╕ рд╡реЗрдм рдЗрдВрдЯрд░рдлреЗрд╕ рдореЗрдВ рд▓реЙрдЧ рдЗрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/webt/e_/cg/mv/e_cgmvs9rrh3qwq0su222v2j0iw.png"><br>  <b>рдЫрд╡рд┐ 1.</b> рдкреНрд░реЙрдХреНрд╕реЙрдХреНрд╕ рдиреЛрдб рд╡реЗрдм рдЗрдВрдЯрд░рдлрд╝реЗрд╕ <br><br><h3>  Nginx рдФрд░ LetтАЩs Encrypt Certificate рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ </h3><br>  рдореИрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдкреНрд░рдорд╛рдг рдкрддреНрд░ рдФрд░ рдЖрдИрдкреА рдкрддреЗ рдХреЗ рд╕рд╛рде рд╕реНрдерд┐рддрд┐ рдХреЛ рдкрд╕рдВрдж рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реВрдВ, рдЗрд╕рд▓рд┐рдП рдореИрдВ Nginx рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рд▓реЗрдЯреНрд╕ рдПрдирдХреНрд░рд┐рдкреНрдЯ рдХреНрд░рд┐рдкреНрдЯ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ рд╣реВрдВред  рдореИрдВ Nginx рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХрд╛ рд╡рд░реНрдгрди рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛, рдореИрдВ рдХреЗрд╡рд▓ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдирдХреНрд░рд┐рдкреНрдЯ рдХреЗ рдкреНрд░рдорд╛рдг рдкрддреНрд░ рдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рдЫреЛрдбрд╝ рджреВрдВрдЧрд╛: <br><br><div class="spoiler">  <b class="spoiler_title">/etc/nginx/snippets/letsencrypt.conf</b> <div class="spoiler_text"><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">location</span></span><span class="hljs-regexp"><span class="hljs-regexp"> ^~</span></span> /.well-known/acme-challenge/ { <span class="hljs-attribute"><span class="hljs-attribute">allow</span></span> all; <span class="hljs-attribute"><span class="hljs-attribute">root</span></span> /var/lib/letsencrypt/; <span class="hljs-attribute"><span class="hljs-attribute">default_type</span></span> <span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">try_files</span></span> <span class="hljs-variable"><span class="hljs-variable">$uri</span></span> =<span class="hljs-number"><span class="hljs-number">404</span></span>; }</code> </pre><br><br></div></div><br>  рдПрд╕рдПрд╕рдПрд▓ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдЬрд╛рд░реА рдХрд░рдиреЗ рдХреА рдХрдорд╛рди: <br><br><pre> <code class="bash hljs">certbot certonly --agree-tos --email sos@livelinux.info --webroot -w /var/lib/letsencrypt/ -d proxmox1.domain.name</code> </pre><br><div class="spoiler">  <b class="spoiler_title">NGINX рдореЗрдВ рд╕рд╛рдЗрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди</b> <div class="spoiler_text"><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">upstream</span></span> proxmox1.domain.name { <span class="hljs-attribute"><span class="hljs-attribute">server</span></span> <span class="hljs-number"><span class="hljs-number">127.0.0.1:8006</span></span>; } <span class="hljs-section"><span class="hljs-section">server</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">listen</span></span> <span class="hljs-number"><span class="hljs-number">80</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">server_name</span></span> proxmox1.domain.name; <span class="hljs-attribute"><span class="hljs-attribute">include</span></span> snippets/letsencrypt.conf; <span class="hljs-attribute"><span class="hljs-attribute">return</span></span> <span class="hljs-number"><span class="hljs-number">301</span></span> https://<span class="hljs-variable"><span class="hljs-variable">$host</span></span><span class="hljs-variable"><span class="hljs-variable">$request_uri</span></span>; } <span class="hljs-section"><span class="hljs-section">server</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">listen</span></span> <span class="hljs-number"><span class="hljs-number">443</span></span> ssl; <span class="hljs-attribute"><span class="hljs-attribute">server_name</span></span> proxmox1.domain.name; <span class="hljs-attribute"><span class="hljs-attribute">access_log</span></span> /var/log/nginx/proxmox1.domain.name.access.log; <span class="hljs-attribute"><span class="hljs-attribute">error_log</span></span> /var/log/nginx/proxmox1.domain.name.<span class="hljs-literal"><span class="hljs-literal">error</span></span>.log; <span class="hljs-attribute"><span class="hljs-attribute">include</span></span> snippets/letsencrypt.conf; <span class="hljs-attribute"><span class="hljs-attribute">ssl_certificate</span></span> /etc/letsencrypt/live/proxmox1.domain.name/fullchain.pem; <span class="hljs-attribute"><span class="hljs-attribute">ssl_certificate_key</span></span> /etc/letsencrypt/live/proxmox1.domain.name/privkey.pem; <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> / { <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass</span></span> https://proxmox1.domain.name; <span class="hljs-attribute"><span class="hljs-attribute">proxy_next_upstream</span></span> <span class="hljs-literal"><span class="hljs-literal">error</span></span> timeout invalid_header http_500 http_502 http_503 http_504; <span class="hljs-attribute"><span class="hljs-attribute">proxy_redirect</span></span> <span class="hljs-literal"><span class="hljs-literal">off</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_buffering</span></span> <span class="hljs-literal"><span class="hljs-literal">off</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Host <span class="hljs-variable"><span class="hljs-variable">$host</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> X-Real-IP <span class="hljs-variable"><span class="hljs-variable">$remote_addr</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> X-Forwarded-For <span class="hljs-variable"><span class="hljs-variable">$proxy_add_x_forwarded_for</span></span>; }</code> </pre> <br></div></div><br>  рдПрд╕рдПрд╕рдПрд▓ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЗрд╕реЗ рдХреНрд░реЛрди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдСрдЯреЛ-рд░рд┐рдиреНрдпреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯ рдХрд░рдирд╛ рди рднреВрд▓реЗрдВ: <br><br><pre> <code class="bash hljs">0 */12 * * * /usr/bin/certbot -a \! -d /run/systemd/system &amp;&amp; perl -e <span class="hljs-string"><span class="hljs-string">'sleep int(rand(3600))'</span></span> &amp;&amp; certbot -q renew --renew-hook <span class="hljs-string"><span class="hljs-string">"systemctl reload nginx"</span></span></code> </pre> <br>  рдмрд╣реБрдд рдмрдврд╝рд┐рдпрд╛!  рдЕрдм рд╣рдо HTTPS рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрдиреЗ рдбреЛрдореЗрди рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  <b>рдиреЛрдЯ</b> : рд╕рджрд╕реНрдпрддрд╛ рд╕реВрдЪрдирд╛ рд╡рд┐рдВрдбреЛ рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ: <br><br><pre> <code class="bash hljs">sed -i.bak <span class="hljs-string"><span class="hljs-string">"s/data.status !== 'Active'/false/g"</span></span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js &amp;&amp; systemctl restart pveproxy.service</code> </pre> <br>  <b>рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕</b> <br><br>  рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рд╛рдЗрдкрд░рд╡рд┐рдЬрд░ рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдЖрдИрдкреА рдкрддреЗ рдФрд░ рд╕рд░реНрд╡рд░ рдирд╛рдореЛрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░ рд╢реЗрд╖ рдиреЛрдбреНрд╕ рдХрд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЕрд▓рдЧ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рдЙрдирдХреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреА рдирдХрд▓ рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛ред <br><br>  рд╣рдо рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдмреНрд░рд┐рдЬ рдмрдирд╛рдПрдВрдЧреЗ рддрд╛рдХрд┐ рд╣рдорд╛рд░реА рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЗрдВ (рдореЗрд░реЗ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдПрд▓рдПрдХреНрд╕рд╕реА рдХрдВрдЯреЗрдирд░ рд╣реЛ), рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╡реЗ рд╣рд╛рдЗрдкрд░рд╡рд┐рдЬрд╝рд░ рдХреЗ рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реБрдП рд╣реИрдВ рдФрд░ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рджреВрд╕рд░реЗ, рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж рд╣рдо рдмрд╛рд╣рд░реА рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреБрд▓ рдЬреЛрдбрд╝ рджреЗрдВрдЧреЗ рддрд╛рдХрд┐ рдЖрднрд╛рд╕реА рдорд╢реАрдиреЛрдВ рдХрд╛ рдЕрдкрдирд╛ рдмрд╛рд╣рд░реА рдЖрдИрдкреА рдкрддрд╛ рд╣реЛред  рддрджрдиреБрд╕рд╛рд░, рдХрдВрдЯреЗрдирд░ рд╣рдорд╛рд░реЗ рд╕рд╛рде NAT'om рдХреЗ рдкреАрдЫреЗ рд╣реЛрдВрдЧреЗред <br><br>  Proxmox рдиреЗрдЯрд╡рд░реНрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рджреЛ рддрд░реАрдХреЗ рд╣реИрдВ: рд╡реЗрдм рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдпрд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ / etc / рдиреЗрдЯрд╡рд░реНрдХ / рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред  рдкрд╣рд▓реЗ рд╡рд┐рдХрд▓реНрдк рдореЗрдВ, рдЖрдкрдХреЛ рд╕рд░реНрд╡рд░ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА (рдпрд╛ рдЖрдк рдХреЗрд╡рд▓ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рд▓рд┐рдП рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛ рдирд╛рдо рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕реЗрд╡рд╛ рдХреЛ рдкреБрдирдГ рдЖрд░рдВрдн рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ)ред  рдпрджрд┐ рдЖрдк рдЕрднреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдФрд░ рдЕрднреА рддрдХ рдХреЛрдИ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдпрд╛ рдПрд▓рдПрдХреНрд╕рд╕реА рдХрдВрдЯреЗрдирд░ рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рдмрд╛рдж рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рдирд╛ рдЙрдЪрд┐рдд рд╣реИред <br><br>  рдЕрдм Proxmox рд╡реЗрдм рдкреИрдирд▓ рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЯреИрдм рдореЗрдВ vmbr1 рдирд╛рдордХ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдмреНрд░рд┐рдЬ рдмрдирд╛рдПрдВред <br><br><img src="https://habrastorage.org/webt/i3/6k/wp/i36kwpe0ky3khngufngwifulwcs.png"><br>  <b>рдЪрд┐рддреНрд░ 2.</b> рдкреНрд░реЙрдХреНрд╕рдореЛрдХреНрд╕ 1 рдиреЛрдб рдХрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ <br><br><img src="https://habrastorage.org/webt/ro/k6/tg/rok6tgyuqyvte_dswvl-0xgvbxe.png"><br>  <b>рдЪрд┐рддреНрд░рд╛ 3.</b> рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдмреНрд░рд┐рдЬ рдмрдирд╛рдирд╛ <br><br><img src="https://habrastorage.org/webt/kx/xu/kg/kxxukgzgym97cjezlvrczgtji8g.png"><br>  <b>рдЪрд┐рддреНрд░рд╛ 4.</b> vmbr1 рдиреЗрдЯрд╡рд░реНрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ <br><br>  рд╕реЗрдЯрдЕрдк рдмреЗрд╣рдж рд╕рд░рд▓ рд╣реИ - рд╣рдореЗрдВ vmbr1 рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рдЗрдВрдЯрд░рдиреЗрдЯ рддрдХ рдкрд╣реБрдВрдЪ рдорд┐рд▓ рд╕рдХреЗред <br><br>  рдЕрдм рд╣рдорд╛рд░реЗ рд╣рд╛рдЗрдкрд░рд╡рд┐рдЬрд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░реЗрдВ рдФрд░ рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/cx/b9/ga/cxb9ga2zhwn0fefphugyihuj6fg.png"><br>  <b>рдЪрд┐рддреНрд░рд╛ 5.</b> рдПрдХ рдХрдорд╛рдВрдб рдЖрдЙрдЯрдкреБрдЯ рдЖрдИрдкреА рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ vmbr1 <br><br>  рдиреЛрдЯ: рдореЗрд░реЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕реБрдирд┐рд╢реНрдЪрд┐рдд 19 рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИ - рдпрд╣ рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд╛рд▓рд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдЕрдиреНрдп рджреЛ рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд╝рд░ рдкрд░ рдЗрди рдЪрд░рдгреЛрдВ рдХреЛ рджреЛрд╣рд░рд╛рдПрдВ, рдФрд░ рдлрд┐рд░ рдЕрдЧрд▓реЗ рдЪрд░рдг рдкрд░ рдЬрд╛рдПрдВ - рдХреНрд▓рд╕реНрдЯрд░ рддреИрдпрд╛рд░ рдХрд░рдирд╛ред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЪрд░рдг рдЕрдм рдкреИрдХреЗрдЯ рдЕрдЧреНрд░реЗрд╖рдг рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдирд╛ рд╣реИ - рдЗрд╕рдХреЗ рдмрд┐рдирд╛, рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрд╕ рдмрд╛рд╣рд░реА рдиреЗрдЯрд╡рд░реНрдХ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  Sysctl.conf рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ рдФрд░ net.ipv4.ip_forward рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рдорд╛рди рдХреЛ 1 рдореЗрдВ рдмрджрд▓реЗрдВ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рджрд░реНрдЬ рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">sysctl -p</code> </pre> <br>  рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдЖрдкрдХреЛ net.ipv4.ip_forward рдирд┐рд░реНрджреЗрд╢ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП (рдпрджрд┐ рдЖрдкрдиреЗ рдЗрд╕реЗ рдкрд╣рд▓реЗ рдирд╣реАрдВ рдмрджрд▓рд╛ рд╣реИ) <br><br>  <b>рдПрдХ Proxmox рдХреНрд▓рд╕реНрдЯрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛</b> <br><br>  рдЕрдм рд╕реАрдзреЗ рдХреНрд▓рд╕реНрдЯрд░ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдХреЛ рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдЦреБрдж рдХреЛ рдФрд░ рдЕрдиреНрдп рдиреЛрдбреНрд╕ рдХреЛ рд╣рд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЗрд╕рдХреЗ рд▓рд┐рдП рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреЗ рд░рд┐рдХреЙрд░реНрдб рдореЗрдВ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдмрджрд▓рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ (рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдореЗрдВ рджреВрд╕рд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд░рд┐рдХреЙрд░реНрдб рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП): <br><br><pre> <code class="bash hljs">172.30.0.15 proxmox1.livelinux.info proxmox1 172.30.0.16 proxmox2.livelinux.info proxmox2 172.30.0.17 proxmox3.livelinux.info proxmox3</code> </pre><br>  рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдХреА рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЛ рджреВрд╕рд░реЛрдВ рд╕реЗ рдЬреЛрдбрд╝рдирд╛ рднреА рдЖрд╡рд╢реНрдпрдХ рд╣реИ - рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИред <br><br>  рд╡реЗрдм рдкреИрдирд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдПрдБ: <br><br><img src="https://habrastorage.org/webt/vl/rm/rh/vlrmrhkpwn5dle9gcnomfueoega.png"><br>  <b>рдЪрд┐рддреНрд░ 6.</b> рд╡реЗрдм рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдирд╛ <br><br>  рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдПрдХ рд╣реА рдЯреИрдм рдкрд░ рдЬрд╛рдПрдВ рдФрд░ "рд╕реВрдЪрдирд╛ рд╢рд╛рдорд┐рд▓ рдХрд░реЗрдВ" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ: <br><br><img src="https://habrastorage.org/webt/gj/ur/t2/gjurt2tqr_pgtlfsxv7l3hrz398.png"><br>  <b>рдЪрд┐рддреНрд░ 7.</b> рдирд┐рд░реНрдорд┐рдд рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА <br><br>  рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рджреВрд╕рд░реЗ рдФрд░ рддреАрд╕рд░реЗ рдиреЛрдб рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдиреЗ рдкрд░ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИред  рд╣рдо рджреВрд╕рд░реЗ рдиреЛрдб рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реБрдП рд╣реИрдВ рдФрд░ рдХреНрд▓рд╕реНрдЯрд░ рдЯреИрдм рдореЗрдВ тАЬрдЬреНрд╡рд╛рдЗрди рдХреНрд▓рд╕реНрдЯрд░тАЭ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ: <br><br><img src="https://habrastorage.org/webt/fo/8u/zh/fo8uzhx-lzxfyqkapqdqsfuoalq.png"><br>  <b>рдЪрд┐рддреНрд░рд╛ 8.</b> рдПрдХ рдиреЛрдб рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ <br><br>  рдЖрдЗрдП рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ: <br><br><ol><li>  <b>рд╕рд╣рдХрд░реНрдореА рдХрд╛ рдкрддрд╛:</b> рдкрд╣рд▓реЗ рд╕рд░реНрд╡рд░ рдХрд╛ рдЖрдИрдкреА рдкрддрд╛ (рдЬрд┐рд╕ рдкрд░ рд╣рдо рдХрдиреЗрдХреНрдЯ рдХрд░ рд░рд╣реЗ рд╣реИрдВ) </li><li>  <b>рдкрд╛рд╕рд╡рд░реНрдб:</b> рдкрд╣рд▓реЗ рд╕рд░реНрд╡рд░ рдХрд╛ рдкрд╛рд╕рд╡рд░реНрдб </li><li>  <b>рдлрд╝рд┐рдВрдЧрд░рдкреНрд░рд┐рдВрдЯ:</b> рд╣рдореЗрдВ рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рдХреНрд▓рд╕реНрдЯрд░ рдЬрд╛рдирдХрд╛рд░реА рд╕реЗ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреА рд╣реИ </li></ol><br><img src="https://habrastorage.org/webt/l4/zp/eo/l4zpeodynxiuqubl1fjc4b9iona.png"><br>  <b>рдЪрд┐рддреНрд░ 9.</b> рджреВрд╕рд░реЗ рдиреЛрдб рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж рдХреНрд▓рд╕реНрдЯрд░ рд╕реНрдерд┐рддрд┐ <br><br>  рджреВрд╕рд░рд╛ рдиреЛрдб рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ!  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдРрд╕рд╛ рд╣рдореЗрд╢рд╛ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдк рдЧрд▓рдд рддрд░реАрдХреЗ рд╕реЗ рдЪрд░рдгреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реИрдВ рдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдХреА рд╕рдорд╕реНрдпрд╛рдПрдВ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИрдВ, рддреЛ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдирд╛ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдХреНрд▓рд╕реНрдЯрд░ рд╕реНрд╡рдпрдВ "рдЯреВрдЯ рдЬрд╛рдПрдЧрд╛"ред  рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╕рдорд╛рдзрд╛рди рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ рдиреЛрдб рдХреЛ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рд╣реИ, рдЙрд╕ рдкрд░ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рд╣рдЯрд╛рдПрдВ, рдлрд┐рд░ рд╕рд░реНрд╡рд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░реЗрдВ рдФрд░ рдкрд┐рдЫрд▓реЗ рдЪрд░рдгреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред  рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ рдиреЛрдб рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ?  рдкрд╣рд▓реЗ, рдЗрд╕реЗ рдкрд╣рд▓реЗ рд╕рд░реНрд╡рд░ рдкрд░ рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ рд╣рдЯрд╛ рджреЗрдВ: <br><br><pre> <code class="bash hljs">pvecm del proxmox2</code> </pre> <br>  рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ рдиреЛрдб рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рдЕрдм рдЯреВрдЯреЗ рд╣реБрдП рдиреЛрдб рдкрд░ рдЬрд╛рдПрдВ рдФрд░ рдЙрд╕ рдкрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдЕрдХреНрд╖рдо рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">systemctl stop pvestatd.service systemctl stop pvedaemon.service systemctl stop pve-cluster.service systemctl stop corosync systemctl stop pve-cluster</code> </pre><br>  Proxmox рдХреНрд▓рд╕реНрдЯрд░ sqlite рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдЕрдкрдиреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдЗрд╕реЗ рднреА рд╕рд╛рдлрд╝ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">sqlite3 /var/lib/pve-cluster/config.db delete from tree <span class="hljs-built_in"><span class="hljs-built_in">where</span></span> name = <span class="hljs-string"><span class="hljs-string">'corosync.conf'</span></span>; .quit</code> </pre><br>  рдЫрд╛рд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рд╢реЗрд╖ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрдВ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рд╕реНрдЯреИрдВрдбрдЕрд▓реЛрди рдореЛрдб рдореЗрдВ рдХреНрд▓рд╕реНрдЯрд░ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">pmxcfs -l rm /etc/pve/corosync.conf rm /etc/corosync/* rm /var/lib/corosync/* rm -rf /etc/pve/nodes/*</code> </pre><br>  рд╣рдо рд╕рд░реНрд╡рд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рддреЗ рд╣реИрдВ (рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдо рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИрдВ: рд╕рднреА рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдЕрдВрдд рдореЗрдВ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЙрдардирд╛ рдФрд░ рдЪрд▓рдирд╛ рдЪрд╛рд╣рд┐рдПред рдХреБрдЫ рднреА рдпрд╛рдж рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдкреБрдирдГ рдЖрд░рдВрдн рдХрд░реЗрдВрдЧреЗ)ред  рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рдкрд┐рдЫрд▓реЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХрд┐рд╕реА рднреА рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рдмрд┐рдирд╛ рдПрдХ рдЦрд╛рд▓реА рдиреЛрдб рдорд┐рд▓реЗрдЧрд╛ рдФрд░ рд╣рдо рдлрд┐рд░ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h3>  ZFS рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </h3><br>  ZFS рдПрдХ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ Proxmox рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рд╕рд╛рде, рдЖрдк рдЦреБрдж рдХреЛ рдХрд┐рд╕реА рдЕрдиреНрдп рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд░ рдХреЛ рдбреЗрдЯрд╛ рджреЛрд╣рд░рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗ рд╕рдХрддреЗ рд╣реИрдВ, рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди / рдПрд▓рдПрдХреНрд╕рд╕реА рдХрдВрдЯреЗрдирд░ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдореЗрдЬрдмрд╛рди рд╕рд┐рд╕реНрдЯрдо рд╕реЗ рдПрд▓рдПрдХреНрд╕рд╕реА рдХрдВрдЯреЗрдирд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕реА рддрд░рд╣ред  рдЗрд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ, рдЪрд▓реЛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝реЗрдВред  рдореЗрд░реЗ рд╕рд░реНрд╡рд░ рдкрд░ рддреАрди SSD рдЙрдкрд▓рдмреНрдз рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ рд╣рдо рдПрдХ RAID рд╕рд░рдгреА рдореЗрдВ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░реЗрдВрдЧреЗред <br><br>  рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="bash hljs">nano /etc/apt/sources.list.d/stretch-backports.list deb http://deb.debian.org/debian stretch-backports main contrib deb-src http://deb.debian.org/debian stretch-backports main contrib nano /etc/apt/preferences.d/90_zfs Package: libnvpair1linux libuutil1linux libzfs2linux libzpool2linux spl-dkms zfs-dkms zfs-test zfsutils-linux zfsutils-linux-dev zfs-zed Pin: release n=stretch-backports Pin-Priority: 990</code> </pre><br>  рд╕рдВрдХреБрд▓ рдХреА рд╕реВрдЪреА рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛: <br><br><pre> <code class="bash hljs">apt update</code> </pre> <br>  рдЖрд╡рд╢реНрдпрдХ рдирд┐рд░реНрднрд░рддрд╛рдПрдБ рд╕реЗрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs"> apt install --yes dpkg-dev linux-headers-$(uname -r) linux-image-amd64</code> </pre> <br>  ZFS рдХреЛ рд╣реА рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">apt-get install zfs-dkms zfsutils-linux</code> </pre> <br>  рдпрджрд┐ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЖрдкрдХреЛ рдПрдХ рддреНрд░реБрдЯрд┐ fusermount рдорд┐рд▓рддреА рд╣реИ: рдлрд╝реНрдпреВрдЬрд╝ рдбрд┐рд╡рд╛рдЗрд╕ рдирд╣реАрдВ рдорд┐рд▓рд╛, рддреЛ 'modprobe рдлрд╝реНрдпреВрдЬрд╝' рдХреЛ рдкрд╣рд▓реЗ рдЖрдЬрд╝рдорд╛рдПрдБ, рдлрд┐рд░ рдирд┐рдореНрди рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ: <br><br><pre> <code class="bash hljs">modprobe fuse</code> </pre> <br>  рдЕрдм рд╣рдо рд╕реАрдзреЗ рд╕реЗрдЯрдЕрдк рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВред  рдкрд╣рд▓реЗ рд╣рдореЗрдВ SSDs рдХреЛ рдкреНрд░рд╛рд░реВрдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╡рд┐рднрд╛рдЬрди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><div class="spoiler">  <b class="spoiler_title">рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ / рджреЗрд╡ / sda</b> <div class="spoiler_text"><pre> <code class="bash hljs">parted /dev/sda (parted) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> Model: ATA SAMSUNG MZ7LM480 (scsi) Disk /dev/sda: 480GB Sector size (logical/physical): 512B/512B Partition Table: msdos Disk Flags: Number Start End Size Type File system Flags 1 1049kB 4296MB 4295MB primary raid 2 4296MB 4833MB 537MB primary raid 3 4833MB 37,0GB 32,2GB primary raid (parted) mkpart Partition <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>? primary/extended? primary File system <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>? [ext2]? zfs Start? 33GB End? 480GB Warning: You requested a partition from 33,0GB to 480GB (sectors 64453125..937500000). The closest location we can manage is 37,0GB to 480GB (sectors 72353792..937703087). Is this still acceptable to you? Yes/No? yes</code> </pre><br></div></div><br>  рдЕрдиреНрдп рдбреНрд░рд╛рдЗрд╡реНрд╕ рдХреЗ рд▓рд┐рдП рднреА рдЗрд╕реА рддрд░рд╣ рдХреА рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдПред  рд╕рднреА рдбрд┐рд╕реНрдХ рддреИрдпрд╛рд░ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдЕрдЧрд▓реЗ рдЪрд░рдг рдкрд░ рдЬрд╛рдПрдВ: <br><br>  zpool create -f -o ashift = 12 rpool / dev / sda4 / dev / sdb4 / dev / dd4 <br><br>  рд╣рдо рдкреНрд░рджрд░реНрд╢рди рдХрд╛рд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП ashift = 12 рдЪреБрдирддреЗ рд╣реИрдВ - рдпрд╣ рдЦреБрдж zfsonlinux рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рд╣реИ, рдЖрдк рдЙрдирдХреЗ рд╡рд┐рдХреА рдореЗрдВ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">github.com/zfsonlinux/zfs/wiki/faq#performance-considerations</a> <br><br>  ZFS рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд▓рд╛рдЧреВ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">zfs <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> atime=off rpool zfs <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> compression=lz4 rpool zfs <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> dedup=off rpool zfs <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> snapdir=visible rpool zfs <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> primarycache=all rpool zfs <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> aclinherit=passthrough rpool zfs inherit acltype rpool zfs get -r acltype rpool zfs get all rpool | grep compressratio</code> </pre><br>  рдЕрдм рд╣рдореЗрдВ zfs_arc_max рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдЪрд░ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдореИрдВ рдЗрд╕реЗ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рдХрд░рддрд╛ рд╣реВрдВ: <br><br><pre> <code class="bash hljs">mem =`free --giga | grep Mem | awk <span class="hljs-string"><span class="hljs-string">'{print $2}'</span></span>` partofmem=$((<span class="hljs-variable"><span class="hljs-variable">$mem</span></span>/10)) <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$setzfscache</span></span> &gt; /sys/module/zfs/parameters/zfs_arc_max grep c_max /proc/spl/kstat/zfs/arcstats zfs create rpool/data cat &gt; /etc/modprobe.d/zfs.conf &lt;&lt; EOL options zfs zfs_arc_max=<span class="hljs-variable"><span class="hljs-variable">$setzfscache</span></span> EOL <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$setzfscache</span></span> &gt; /sys/module/zfs/parameters/zfs_arc_max grep c_max /proc/spl/kstat/zfs/arcstats</code> </pre> <br>  рдлрд┐рд▓рд╣рд╛рд▓, рдкреВрд▓ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╣рдордиреЗ рдПрдХ рдбреЗрдЯрд╛ рдЙрдкрдкрдЯреНрдЯ рднреА рдмрдирд╛рдпрд╛ рд╣реИред  рдЖрдк рдЕрдкрдиреЗ рдкреВрд▓ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдЬрд╝реВрд▓реВ рд╕реНрдерд┐рддрд┐ рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдХреНрд░рд┐рдпрд╛ рд╕рднреА рд╣рд╛рдпрдкрд░рд╡рд╛рдЗрдЬрд╝рд░реНрд╕ рдкрд░ рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдП, рдФрд░ рдлрд┐рд░ рдЕрдЧрд▓реЗ рдЪрд░рдг рдкрд░ рдЖрдЧреЗ рдмрдврд╝реЗрдВред <br><br>  рдЕрдм ZFS рдХреЛ Proxmox рдореЗрдВ рдЬреЛрдбрд╝реЗрдВред  рд╣рдо "рд╕рдВрдЧреНрд░рд╣рдг" рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдбреЗрдЯрд╛ рдХреЗрдВрджреНрд░ (рдЕрд░реНрдерд╛рдд рдпрд╣, рдФрд░ рдЕрд▓рдЧ рдиреЛрдб рдирд╣реАрдВ) рдХреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВ, "рдЬреЛрдбрд╝реЗрдВ" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ "рдЬреЗрдбрдПрдлрдПрд╕" рд╡рд┐рдХрд▓реНрдк рдЪреБрдиреЗрдВ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреИрд░рд╛рдореАрдЯрд░ рджреЗрдЦреЗрдВрдЧреЗ: <br><br>  рдЖрдИрдбреА: рд╕реМ рдХрд╛ рдирд╛рдоред  рдореИрдВрдиреЗ рдЗрд╕реЗ рд╕реНрдерд╛рдиреАрдп-рдирд╛рдо рджрд┐рдпрд╛ <br>  ZFS Pool: рд╣рдордиреЗ рд░реЛрдк / рдбреЗрдЯрд╛ рдмрдирд╛рдпрд╛, рдФрд░ рд╣рдо рдЗрд╕реЗ рдпрд╣рд╛рдБ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред <br>  рдиреЛрдбреНрд╕: рд╕рднреА рдЙрдкрд▓рдмреНрдз рдиреЛрдбреНрд╕ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ <br><br>  рдпрд╣ рдХрдорд╛рдВрдб рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдЪреБрдиреЗ рдЧрдП рдбреНрд░рд╛рдЗрд╡ рдХреЗ рд╕рд╛рде рдПрдХ рдирдпрд╛ рдкреВрд▓ рдмрдирд╛рддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд╝рд░ рдкрд░, рдПрдХ рдирдпрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рджрд┐рдЦрд╛рдИ рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрд┐рд╕реЗ рд▓реЛрдХрд▓-рдЬрд╝реИрдлрд╝реНрд╕ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдЖрдк рдЕрдкрдиреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХреЛ рд▓реЛрдХрд▓ рд╕реНрдЯреЛрд░реЗрдЬ рд╕реЗ ZFS рдореЗрдВ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h3>  рдкрдбрд╝реЛрд╕реА рд╣рд╛рдЗрдкрд░рд╡рд┐рдЬрд░ рдХреЛ рдЙрджрд╛рд╣рд░рдг рджреЗрдирд╛ </h3><br>  Proxmox рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдПрдХ рд╣рд╛рдЗрдкрд░рд╡рд┐рдЬрд╝рд░ рд╕реЗ рджреВрд╕рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ рдХреЛ рджреЛрд╣рд░рд╛рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реЛрддреА рд╣реИ: рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдЖрдкрдХреЛ рдЙрджрд╛рд╣рд░рдг рдХреЛ рдПрдХ рд╕рд░реНрд╡рд░ рд╕реЗ рджреВрд╕рд░реЗ рд╕рд░реНрд╡рд░ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдбреЗрдЯрд╛ рдЕрдВрддрд┐рдо рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рд╕рдордп рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╣реЛрдЧрд╛ - рдЗрд╕рдХрд╛ рд╕рдордп рдкреНрд░рддрд┐рдХреГрддрд┐ рдмрдирд╛рддреЗ рд╕рдордп рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (15 рдорд┐рдирдЯ рдорд╛рдирдХ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ)ред  рдХрд┐рд╕реА рдЕрдиреНрдп рдкреНрд░реЙрдХреНрд╕реЙрдХреНрд╕ рдиреЛрдб рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЛ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░рдиреЗ рдХреЗ рджреЛ рддрд░реАрдХреЗ рд╣реИрдВ: рдореИрдиреБрдЕрд▓ рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рддред  рдЖрдЗрдП рдкрд╣рд▓реЗ рдореИрдиреБрдЕрд▓ рд╡рд┐рдХрд▓реНрдк рджреЗрдЦреЗрдВ, рдФрд░ рдЕрдВрдд рдореЗрдВ рдореИрдВ рдЖрдкрдХреЛ рдкрд╛рдпрдерди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рджреВрдВрдЧрд╛ рдЬреЛ рдЖрдкрдХреЛ рд╣рд╛рдЗрдкрд░рд╡рд┐рдЬрд╝рд░ рдореЗрдВ рд╕реЗ рдПрдХ рдЕрдиреБрдкрд▓рдмреНрдз рд╣реЛрдиреЗ рдкрд░ рдПрдХ рд╕реБрд▓рдн рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд╝рд░ рдкрд░ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред <br><br>  рдкреНрд░рддрд┐рдХреГрддрд┐ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, Proxmox рд╡реЗрдм рдкреИрдирд▓ рдкрд░ рдЬрд╛рдПрдВ рдФрд░ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдпрд╛ LXC рдХрдВрдЯреЗрдирд░ рдмрдирд╛рдПрдВред  рдкрд┐рдЫрд▓реЗ рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдореЗрдВ, рд╣рдордиреЗ vmbr1 рдмреНрд░рд┐рдЬ рдХреЛ NAT рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рд╣реИ, рдЬреЛ рд╣рдореЗрдВ рдмрд╛рд╣рд░реА рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдЬрд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред  рдореИрдВ рдкреНрд░рддрд┐рдХреГрддрд┐ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░реАрдХреНрд╖рдг рд╕рд╛рдЗрдЯ рдХреЗ рд╕рд╛рде MySQL, Nginx рдФрд░ PHP-FPM рдХреЗ рд╕рд╛рде рдПрдХ LXC рдХрдВрдЯреЗрдирд░ рдмрдирд╛рдКрдВрдЧрд╛ред  рдиреАрдЪреЗ рдПрдХ рдЪрд░рдг-рджрд░-рдЪрд░рдг рдирд┐рд░реНрджреЗрд╢ рд╣реИред <br><br>  рд╣рдо рдЙрдкрдпреБрдХреНрдд рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЛ рд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВ (рд╕реНрдЯреЛрд░реЗрдЬ рдкрд░ рдЬрд╛рдПрдБ -&gt; рд╕рд╛рдордЧреНрд░реА -&gt; рдЯреЗрдореНрдкрд▓реЗрдЯ), рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ рдореЗрдВ рдПрдХ рдЙрджрд╛рд╣рд░рдг: <br><br><img src="https://habrastorage.org/webt/sd/bd/57/sdbd579lmmzxefsigiivaftvpce.png"><br>  <b>рдЫрд╡рд┐ 10.</b> рд╡реАрдПрдо рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдФрд░ рдЫрд╡рд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг <br><br>  "рдЯреЗрдореНрдкрд▓реЗрдЯ" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ LXC рдХрдВрдЯреЗрдирд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЛ рд▓реЛрдб рдХрд░реЗрдВ рдЬрд┐рд╕рдХреА рд╣рдореЗрдВ рдЬрд╝рд░реВрд░рдд рд╣реИ: <br><br><img src="https://habrastorage.org/webt/qx/ug/he/qxughewqdsfniccmaamka9idie0.png"><br>  <b>рдЫрд╡рд┐ 11.</b> рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рдФрд░ рдЙрд╕реЗ рд▓реЛрдб рдХрд░рдирд╛ <br><br>  рдЕрдм рд╣рдо рдЗрд╕рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдирдП LXC рдХрдВрдЯреЗрдирд░ рдмрдирд╛рддреЗ рд╕рдордп рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдкрд╣рд▓реЗ рд╣рд╛рдЗрдкрд░рд╡рд┐рдЬрд░ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ рдФрд░ рдКрдкрд░реА рджрд╛рдПрдВ рдХреЛрдиреЗ рдореЗрдВ "рд╕реАрдЯреА рдмрдирд╛рдПрдВ" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ: рд╣рдо рдПрдХ рдирдпрд╛ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкреИрдирд▓ рджреЗрдЦреЗрдВрдЧреЗред  рд╕реНрдерд╛рдкрдирд╛ рдЪрд░рдг рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИрдВ рдФрд░ рдореИрдВ рдЗрд╕ LXC рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рджреВрдВрдЧрд╛: <br><br><pre> <code class="bash hljs">arch: amd64 cores: 3 memory: 2048 nameserver: 8.8.8.8 net0: name=eth0,bridge=vmbr1,firewall=1,gw=172.16.0.1,hwaddr=D6:60:C5:39:98:A0,ip=172.16.0.2/24,<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>=veth ostype: centos rootfs: <span class="hljs-built_in"><span class="hljs-built_in">local</span></span>:100/vm-100-disk-1.raw,size=10G swap: 512 unprivileged:</code> </pre><br>  рдХрдВрдЯреЗрдирд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЖрдк рдкреАрд╕реАрдЯреА рдХрдорд╛рдВрдб рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрд▓рдПрдХреНрд╕рд╕реА рдХрдВрдЯреЗрдирд░реЛрдВ рд╕реЗ рдЬреБрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ, рдореИрдВрдиреЗ рдПрд╕рдПрд╕рдПрдЪ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реАрдзреЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдерд╛рдкрдирд╛ рд╕реЗ рдкрд╣рд▓реЗ рд╣рд╛рдЗрдкрд░рд╡рд┐рдЬрд░ рдПрд╕рдПрд╕рдПрдЪ рдХреБрдВрдЬреА рднреА рдЬреЛрдбрд╝рд╛ (рдкреАрд╕реАрдЯреА рдореЗрдВ рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╕реНрдкреНрд▓реЗ рдХреЗ рд╕рд╛рде рдХреБрдЫ рд╕рдорд╕реНрдпрд╛рдПрдВ рд╣реИрдВ)ред  рдореИрдВрдиреЗ рд╕рд░реНрд╡рд░ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдФрд░ рд╡рд╣рд╛рдВ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рд╕рд░реНрд╡рд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдП, рдЕрдм рдЖрдк рдкреНрд░рддрд┐рдХреГрддрд┐ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рд╣рдо LXC рдХрдВрдЯреЗрдирд░ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ "рдкреНрд░рддрд┐рдХреГрддрд┐" рдЯреИрдм рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ рд╣рдо "рдЬреЛрдбрд╝реЗрдВ" рдмрдЯрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рддрд┐рдХреГрддрд┐ рдкреИрд░рд╛рдореАрдЯрд░ рдмрдирд╛рддреЗ рд╣реИрдВ: <br><br><img src="https://habrastorage.org/webt/ub/ac/si/ubacsivqghyu5w9np8dlnjdqe3g.png"><br>  <b>рдЪрд┐рддреНрд░рд╛ 12.</b> Proxmox рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдкреНрд░рддрд┐рдХреГрддрд┐ рдмрдирд╛рдирд╛ <br><br><img src="https://habrastorage.org/webt/ea/mb/48/eamb489i0yqndxdcknvr2f1vefi.png"><br>  <b>рдЫрд╡рд┐ 13.</b> рдиреМрдХрд░реА рд╕реГрдЬрди рдЦрд┐рдбрд╝рдХреА рдХреА рдкреНрд░рддрд┐рдХреГрддрд┐ <br><br>  рдореИрдВрдиреЗ рдХрдВрдЯреЗрдирд░ рдХреЛ рджреВрд╕рд░реЗ рдиреЛрдб рдореЗрдВ рджреЛрд╣рд░рд╛рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рдмрдирд╛рдпрд╛, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЕрдЧрд▓реЗ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕рдлрд▓ рд░рд╣реА - "рд╕реНрдерд┐рддрд┐" рдлрд╝реАрд▓реНрдб рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ, рдпрд╣ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕реНрдерд┐рддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рдбреЗрдЯрд╛ рдЕрд╡рдзрд┐ рдХрд┐рддрдиреА рджреЗрд░ рддрдХ рдЪрд▓рддреА рд╣реИ, рдпрд╣ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП "рдЕрд╡рдзрд┐" рдлрд╝реАрд▓реНрдб рдкрд░ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИред <br><br><img src="https://habrastorage.org/webt/wr/hd/t7/wrhdt7uk4szufdqrvboovxwr6t0.png"><br>  <b>рдЫрд╡рд┐ 14.</b> рд╡реАрдПрдо рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рд╕реВрдЪреА <br><br>  рдЕрдм "рдорд╛рдЗрдЧреНрд░реЗрдЯ" рдмрдЯрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдорд╢реАрди рдХреЛ рджреВрд╕рд░реЗ рдиреЛрдб рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ <br><br>  рдХрдВрдЯреЗрдирд░ рдХрд╛ рдкреНрд░рд╡рд╛рд╕ рд╢реБрд░реВ рд╣реЛ рдЬрд╛рдПрдЧрд╛, рд▓реЙрдЧ рдХреЛ рдХрд╛рд░реНрдпреЛрдВ рдХреА рд╕реВрдЪреА рдореЗрдВ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ - рд╡рд╣рд╛рдВ рд╣рдорд╛рд░рд╛ рдкреНрд░рд╡рд╛рд╕ рд╣реЛрдЧрд╛ред  рдЙрд╕рдХреЗ рдмрд╛рдж, рдХрдВрдЯреЗрдирд░ рдХреЛ рджреВрд╕рд░реЗ рдиреЛрдб рдореЗрдВ рд▓реЗ рдЬрд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  <b>"рд╣реЛрд╕реНрдЯ рдХреБрдВрдЬреА рд╕рддреНрдпрд╛рдкрди рд╡рд┐рдлрд▓" рддреНрд░реБрдЯрд┐</b> <br><br>  рдХрднреА-рдХрднреА рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╕рдордп, рдПрдХ рд╕рдорд╛рди рд╕рдорд╕реНрдпрд╛ рдЙрддреНрдкрдиреНрди рд╣реЛ рд╕рдХрддреА рд╣реИ - рдпрд╣ рдорд╢реАрдиреЛрдВ рдХреЛ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░рдиреЗ рдФрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рдмрдирд╛рдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИ, рдЬреЛ рдХреНрд▓рд╕реНрдЯрд░ рд╕рдорд╛рдзрд╛рди рдХреЗ рдлрд╛рдпрджреЗ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рддреНрд░реБрдЯрд┐ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЬреНрдЮрд╛рдд_рд╣реЛрд╕реНрдЯ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╣рдЯрд╛рдПрдБ рдФрд░ SSH рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд░рд╕реНрдкрд░ рд╡рд┐рд░реЛрдзреА рдиреЛрдб рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">/usr/bin/ssh -o <span class="hljs-string"><span class="hljs-string">'HostKeyAlias=proxmox2'</span></span> root@172.30.0.16</code> </pre><br>  Hostkey рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ рдФрд░ рдЗрд╕ рдХрдорд╛рдВрдб рдХреЛ рджрд░реНрдЬ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ, рдпрд╣ рдЖрдкрдХреЛ рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="bash hljs">/usr/bin/ssh -o <span class="hljs-string"><span class="hljs-string">'BatchMode=yes'</span></span> -o <span class="hljs-string"><span class="hljs-string">'HostKeyAlias=proxmox2'</span></span> root@172.30.0.16</code> </pre><br><h3>  Hetzner рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ </h3><br>  рд░реЛрдмреЛрдЯ рдкреИрдирд▓ рдкрд░ рдЬрд╛рдПрдВ рдФрд░ "рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрд╡рд┐рдЪ" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  рдЕрдЧрд▓реЗ рдкреГрд╖реНрда рдкрд░ рдЖрдкрдХреЛ рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрд╡рд┐рдЪ рдЗрдВрдЯрд░рдлреЗрд╕ рдмрдирд╛рдиреЗ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреИрдирд▓ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛: рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рдЗрд╕реЗ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдЗрд╕реЗ "рдХрдиреЗрдХреНрдЯ" рд╕рдорд░реНрдкрд┐рдд рд╕рд░реНрд╡рд░ред  рдЦреЛрдЬ рдореЗрдВ, рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕рд░реНрд╡рд░ рдЬреЛрдбрд╝реЗрдВ - рдЙрдиреНрд╣реЗрдВ рд░рд┐рдмреВрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреЗрд╡рд▓ 10-15 рдорд┐рдирдЯ рддрдХ рдЗрдВрддрдЬрд╛рд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдЬрдм рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрд╡рд┐рдЪ рдХрд╛ рдХрдиреЗрдХреНрд╢рди рд╕рдХреНрд░рд┐рдп рд╣реЛрдЧрд╛ред <br><br>  рд╡реЗрдм рдкреИрдирд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрд╡рд┐рдЪ рдореЗрдВ рд╕рд░реНрд╡рд░ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЦреЛрд▓рддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ рд╣рдо рдПрдХ рдирдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдирд╛рддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">auto enp4s0.4000 iface enp4s0.4000 inet static address 10.1.0.11/24 mtu 1400 vlan-raw-device enp4s0</code> </pre> <br>  рдЖрдЗрдП рдЗрд╕ рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВред  рдЗрд╕рдХреЗ рдореВрд▓ рдореЗрдВ, рдпрд╣ рдПрдХ рд╡реАрдПрд▓рдПрдПрди рд╣реИ рдЬреЛ рдПрдХ рднреМрддрд┐рдХ рдЗрдВрдЯрд░рдлреЗрд╕ рд╕реЗ рдЬреБрдбрд╝рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ enp4s0 рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ (рдпрд╣ рдЖрдкрдХреЗ рд▓рд┐рдП рднрд┐рдиреНрди рд╣реЛ рд╕рдХрддрд╛ рд╣реИ), рдПрдХ рд╡реАрдПрд▓рдПрдПрди рдирдВрдмрд░ рдХреЗ рд╕рд╛рде - рдпрд╣ рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрд╡рд┐рдЪ рдирдВрдмрд░ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рд╣реЗрдЯреНрдЬрд╝рдирд░ рд░реЛрдмреЛрдЯ рд╡реЗрдм рдкреИрдирд▓ рдореЗрдВ рдмрдирд╛рдпрд╛ рд╣реИред  рдЖрдк рдХрд┐рд╕реА рднреА рдкрддреЗ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрдм рддрдХ рдХрд┐ рд╡рд╣ рд╕реНрдерд╛рдиреАрдп рд╣реЛред <br><br>  рдореИрдВ рдзреНрдпрд╛рди рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдкрдХреЛ рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣ enp4s0 рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕рдореЗрдВ рдПрдХ рдмрд╛рд╣рд░реА рдЖрдИрдкреА рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдЬреЛ рдЖрдкрдХреЗ рднреМрддрд┐рдХ рд╕рд░реНрд╡рд░ рдХреЛ рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЗрди рдЪрд░рдгреЛрдВ рдХреЛ рдЕрдиреНрдп рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд╝рд░ рдкрд░ рджреЛрд╣рд░рд╛рдПрдВ, рдлрд┐рд░ рдЙрди рдкрд░ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕реЗрд╡рд╛ рдХреЛ рд░реАрдмреВрдЯ рдХрд░реЗрдВ, рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрд╡рд┐рдЪ рдЖрдИрдкреА рдкрддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкрдбрд╝реЛрд╕реА рдиреЛрдб рдкрд░ рдкрд┐рдВрдЧ рдХрд░реЗрдВред  рдпрджрд┐ рдкрд┐рдВрдЧ рд╕рдлрд▓ рдерд╛, рддреЛ рдЖрдкрдиреЗ рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрд╡рд┐рдЪ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд░реНрд╡рд░ рдХреЗ рдмреАрдЪ рдПрдХ рдХрдиреЗрдХреНрд╢рди рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рд╣реИред <br><br>  рдореИрдВ sysctl.conf рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рднреА рд╕рдВрд▓рдЧреНрди рдХрд░реВрдВрдЧрд╛, рдЕрдЧрд░ рдЖрдкрдХреЛ рдЕрдЧреНрд░реЗрд╖рдг рдкреИрдХреЗрдЬ рдФрд░ рдЕрдиреНрдп рдиреЗрдЯрд╡рд░реНрдХ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛ рд╣реИ, рддреЛ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА: <br><br><pre> <code class="bash hljs">net.ipv6.conf.all.disable_ipv6=0 net.ipv6.conf.default.disable_ipv6 = 0 net.ipv6.conf.all.forwarding=1 net.ipv4.conf.all.rp_filter=1 net.ipv4.tcp_syncookies=1 net.ipv4.ip_forward=1 net.ipv4.conf.all.send_redirects=0</code> </pre><br>  <b>Hetzner рдореЗрдВ IPv4 рд╕рдмрдиреЗрдЯ рдХреЛ рдЬреЛрдбрд╝рдирд╛</b> <br><br>  рдХрд╛рдо рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рд╣реЗрдЯреНрдЬрд╝рдирд░ рдореЗрдВ рдПрдХ рд╕рдмрдиреЗрдЯ рдСрд░реНрдбрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЖрдк рдЗрд╕реЗ рд░реЛрдмреЛрдЯ рдкреИрдирд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдкрддреЗ рдХреЗ рд╕рд╛рде рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдмреНрд░рд┐рдЬ рдмрдирд╛рдПрдВ рдЬреЛ рдЗрд╕ рд╕рдмрдиреЗрдЯ рд╕реЗ рд╣реЛрдЧрд╛ред  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЙрджрд╛рд╣рд░рдг: <br><br><pre> <code class="bash hljs">auto vmbr2 iface vmbr2 inet static address ip-address netmask 29 bridge-ports none bridge-stp off bridge-fd 0</code> </pre> <br>  рдЕрдм рдкреНрд░реЙрдХреНрд╕рдореЛрдХреНрд╕ рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкрд░ рдЬрд╛рдПрдВ рдФрд░ рдПрдХ рдирдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдирд╛рдПрдВ рдЬреЛ vmbr2 рдмреНрд░рд┐рдЬ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛрдЧрд╛ред  рдореИрдВ рдПрд▓рдПрдХреНрд╕рд╕реА рдХрдВрдЯреЗрдирд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ, рдЗрд╕рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рддреБрд░рдВрдд рдкреНрд░реЛрдХреНрд╕рдореЙрдХреНрд╕ рдореЗрдВ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдбреЗрдмрд┐рдпрди рдХреЗ рд▓рд┐рдП рдЕрдВрддрд┐рдо рд╡рд┐рдиреНрдпрд╛рд╕: <br><br><pre> <code class="bash hljs">auto eth0 iface eth0 inet static address ip-address netmask 26 gateway bridge-address</code> </pre> <br>  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ: рдореИрдВрдиреЗ 26 рдорд╛рд╕реНрдХ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛, 29 рдирд╣реАрдВ - рдпрд╣ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдкрд░ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред <br><br>  <b>Hetzner рдХреЛ IPv4 рдПрдбреНрд░реЗрд╕ рдЬреЛрдбрд╝рдирд╛</b> <br><br>  рдПрдХ рдПрдХрд▓ рдЖрдИрдкреА рдкрддреЗ рдХреЗ рд╕рд╛рде рд╕реНрдерд┐рддрд┐ рдЕрд▓рдЧ рд╣реИ - рдЖрдорддреМрд░ рдкрд░ рд╣реЗрдЯреНрдЬрдиреЗрд░ рд╣рдореЗрдВ рд╕рд░реНрд╡рд░ рд╕рдмрдиреЗрдЯ рд╕реЗ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдкрддрд╛ рджреЗрддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ vmbr2 рдХреЗ рдмрдЬрд╛рдп рд╣рдореЗрдВ vmbr0 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдлрд┐рд▓рд╣рд╛рд▓ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдпрд╣ рдирд╣реАрдВ рд╣реИред  рд▓рдмреНрдмреЛрд▓реБрдЖрдм рдпрд╣ рд╣реИ рдХрд┐ vmbr0 рдореЗрдВ рд▓реЛрд╣реЗ рдХреЗ рд╕рд░реНрд╡рд░ рдХрд╛ IP рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (рдЕрд░реНрдерд╛рдд, рдЙрд╕ рдкрддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬреЛ рднреМрддрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ enp2s0 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ)ред  рдкрддреЗ рдХреЛ vmbr0 рдкрд░ рд▓реЗ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдирд┐рдореНрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЗрд╕рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ (рдореИрдВ рдЖрдкрдХреЛ KVM рдСрд░реНрдбрд░ рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ, рдЬрд┐рд╕рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдСрдкрд░реЗрд╢рди рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП): <br><br><pre> <code class="bash hljs">auto enp2s0 iface enp2s0 inet manual auto vmbr0 iface vmbr0 inet static address ip-address netmask 255.255.255.192 gateway ip-gateway bridge-ports enp2s0 bridge-stp off bridge-fd 0</code> </pre><br>  рд╕рд░реНрд╡рд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░реЗрдВ, рдпрджрд┐ рд╕рдВрднрд╡ рд╣реЛ (рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕реЗрд╡рд╛ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░реЗрдВ), рдФрд░ рдлрд┐рд░ рдЖрдИрдкреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master vmbr0 state UP group default qlen 1000 link/ether 44:8a:5b:2c:30:c2 brd ff:ff:ff:ff:ff:ff</code> </pre><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдпрд╣рд╛рдБ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, enp2s0 vmbr0 рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ IP рдкрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕реЗ vmbr0 рдХреЛ рдкреБрди: рдЕрд╕рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br><br>  рдЕрдм рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ, рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдЬреЛрдбрд╝реЗрдВ рдЬреЛ vmbr0 рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛрдЧрд╛ред  рдкреНрд░рд╡реЗрд╢ рджреНрд╡рд╛рд░ рдХреЗ рд▓рд┐рдП, vmbr0 рд╕реЗ рдЬреБрдбрд╝реЗ рдкрддреЗ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВред <br><br><h3>  рдЖрдЦрд┐рд░ рдореЗрдВ </h3><br>  рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдЬрдм рдЖрдк рд╣реЗрдЯреНрдЬрд╝рдирд░ рдореЗрдВ рдкреНрд░реЙрдХреНрд╕рдореЛрдХреНрд╕ рдХреНрд▓рд╕реНрдЯрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВрдЧреЗ рддреЛ рдпрд╣ рд▓реЗрдЦ рдХрд╛рдо рдЖрдПрдЧрд╛ред  рдпрджрд┐ рд╕рдордп рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рддреЛ рдореИрдВ рд▓реЗрдЦ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░реВрдВрдЧрд╛ рдФрд░ рдУрд╡реАрдПрдЪ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢ рдЬреЛрдбрд╝реВрдВрдЧрд╛ - рд╡рд╣рд╛рдВ рднреА, рд╕рдм рдХреБрдЫ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкрд╣рд▓реА рдирдЬрд╝рд░ рдореЗрдВ рд▓рдЧрддрд╛ рд╣реИред  рдпрд╣ рд╕рд╛рдордЧреНрд░реА рдХрд╛рдлреА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдирд┐рдХрд▓реА, рдпрджрд┐ рдЖрдкрдХреЛ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рд▓рдЧрддреА рд╣реИрдВ, рддреЛ рдХреГрдкрдпрд╛ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд▓рд┐рдЦреЗрдВ, рдореИрдВ рдЙрдиреНрд╣реЗрдВ рд╕рд╣реА рдХрд░реВрдВрдЧрд╛ред  рдзреНрдпрд╛рди рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рд╕рднреА рдХрд╛ рдзрдиреНрдпрд╡рд╛рджред <br><br>  <i>рдПрд▓реЗрдХреНрд╕рд┐рдпрд╛ рдЬрд╝рд╛рджрд╛рди рдФрд░ рд▓рд╛рдЗрд╡ рд▓рд┐рдирдХреНрд╕ рдЯреАрдо рджреНрд╡рд╛рд░рд╛ рд╕рдВрдкрд╛рджрд┐рдд рдЗрд▓реНрдпрд╛ рдПрдВрдбреНрд░реАрд╡ рджреНрд╡рд╛рд░рд╛ рдкреЛрд╕реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi457894/">https://habr.com/ru/post/hi457894/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi457876/index.html">рдЕрдиреБрд╡рд╛рдж: IEEE 802.15.4z рдорд╛рдирдХ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рд╣рдореЗрдВ рдХрд┐рд╕ рдмрд╛рдд рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рд╣реИ?</a></li>
<li><a href="../hi457884/index.html">рд╕рдВрдкреНрд░рднреБ рдЗрдВрдЯрд░рдиреЗрдЯ - рдЖрджреЗрд╢реЛрдВ рдХреЛ рд╕реНрдкрд╖реНрдЯ рдХрд░рдирд╛</a></li>
<li><a href="../hi457886/index.html">USB рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд╛рдЗрдЯ рдкрд░ рджреЛ-рдХрд╛рд░рдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдгред рдЕрдм рд▓рд┐рдирдХреНрд╕ рдХреЗ рд▓рд┐рдП</a></li>
<li><a href="../hi457888/index.html">рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрди рдкрд░реАрдХреНрд╖рдг: рдкрд░реАрдХреНрд╖рдг рдкрд░реАрдХреНрд╖рдг</a></li>
<li><a href="../hi457892/index.html">рд░реВрд▓реЗ рдкреНрд░реЛ</a></li>
<li><a href="../hi457896/index.html">рдЬреЛрдореНрдмреНрд░рд╛ рдФрд░ рд╕рд░реНрд╡рд░ рдЕрдзрд┐рднрд╛рд░ рд╕рдВрд░рдХреНрд╖рдг</a></li>
<li><a href="../hi457900/index.html">рдореМрд╕рдо рд╡рд┐рдЬреНрдЮрд╛рдирд┐рдпреЛрдВ рдХреЗ рдЦрд┐рд▓рд╛рдл рдЕрдореЗрд░рд┐рдХреА рд╕рдВрдШреАрдп рд╕рдВрдЪрд╛рд░ рдЖрдпреЛрдЧ</a></li>
<li><a href="../hi457902/index.html">рдбрд╛рдЯрд╛ рд╕рд╛рдЗрдВрд╕ рдХреЗ рд▓рд┐рдП рдореНрдпреВрдЯрд╛рдк</a></li>
<li><a href="../hi457904/index.html">рдкрд░рдорд╛рдгреБ рд░реЗрдбрд┐рдпреЛ - рдкрд╣рд▓рд╛ рд╕рдВрдЧреАрддрдордп рдкреНрд░рд╕рд╛рд░рдг</a></li>
<li><a href="../hi457906/index.html">рдбреЙрдХреНрдЯрд░реЛрдВ рдХрд╛ рдорд╛рдирдирд╛ тАЛтАЛрд╣реИ рдХрд┐ рдирд┐рдХрдЯ рднрд╡рд┐рд╖реНрдп рдореЗрдВ, рд╡реИрдХреНрд╕реАрди рдмрдирд╛рдиреЗ рд╡рд╛рд▓реЗ рдЙрдкрдХрд░рдг рдШрд░реЛрдВ рдФрд░ рдлрд╛рд░реНрдореЗрд╕рд┐рдпреЛрдВ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреЗ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>