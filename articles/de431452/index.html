<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🔧 🚂 🏮 Praktisches TypeScript. Reagiere + Redux 🗽 👨‍👩‍👦 🐯</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Derzeit ist die Entwicklung einer modernen Front-End-Anwendung komplizierter als die hello world Ebene, auf der das Team arbeitet (deren Zusammensetzu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Praktisches TypeScript. Reagiere + Redux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431452/"><p><img src="https://habrastorage.org/webt/xp/2y/dv/xp2ydv74geelce0lpmmoyglorlq.png" alt="Ich verstehe nicht, wie Sie im Allgemeinen ohne strikte Eingabe leben. Was machen Sie. Den ganzen Tag belasten?"><br><br>  Derzeit ist die Entwicklung einer modernen Front-End-Anwendung komplizierter als die <code>hello world</code> Ebene, auf der das Team arbeitet (deren Zusammensetzung sich regelmäßig ändert), und stellt hohe Anforderungen an die Qualität der Codebasis.  Um das Qualitätsniveau des Codes auf dem richtigen Niveau zu halten, halten wir uns im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Front-End-</a> Team <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">#gostgroup</a> auf dem Laufenden und haben keine Angst davor, moderne Technologien <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einzusetzen</a> , die ihren praktischen Nutzen in Projekten von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unternehmen verschiedener Größenordnungen zeigen</a> . </p><a name="habracut"></a><br><p>  Die statistische Typisierung und ihre Vorteile am Beispiel von TypeScript wurden in verschiedenen Artikeln ausführlich diskutiert. Daher konzentrieren wir uns heute auf mehr angewandte Aufgaben, mit denen Front-End-Entwickler als Beispiel für den Lieblingsstapel unseres Teams (React + Redux) konfrontiert sind. </p><br><h3 id="ne-ponimayu-kak-vy-voobsche-zhivyote-bez-strogoy-tipizacii-chem-zanimaetes-debazhite-celymi-dnyami---ne-izvestnyy-mne-avtor">  "Ich verstehe nicht, wie du im Allgemeinen ohne strenge Eingabe lebst. Was machst du? Tagelang belasten?"  - Der Autor ist mir nicht bekannt. </h3><br><h3 id="net-pishem-celymi-dnyami-tipy---moy-kollega">  "Nein, wir schreiben den ganzen Tag Typen" - mein Kollege. </h3><br><p>  Beim Schreiben von Code in TypeScript (im Folgenden wird der Betreffstapel impliziert) beklagen sich viele, dass sie viel Zeit damit verbringen müssen, Typen manuell zu schreiben.  Ein gutes Beispiel für das Problem ist die <code>connect</code> Connector-Funktion aus der <code>react-redux</code> .  Werfen wir einen Blick auf den folgenden Code: </p><br><pre> <code class="javascript hljs">type Props = { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: number, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: string; action1: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a: number</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>; action2: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">b: string</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PureComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Props</span></span></span><span class="hljs-class">&gt; </span></span>{ } connect( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state: RootStore</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">a</span></span>: state.a, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: state.b, }), { action1, action2, }, )(Component);</code> </pre> <br><p>  Was ist das Problem hier?  Das Problem ist, dass wir für jede neue Eigenschaft, die über den Connector eingefügt wird, den Typ dieser Eigenschaft im allgemeinen Typ der Komponenteneigenschaften (React) beschreiben müssen.  Keine sehr interessante Beschäftigung, sagen Sie, Sie möchten immer noch in der Lage sein, die Art der Eigenschaften aus dem Konnektor in einer Art zu sammeln, die dann einmal mit der allgemeinen Art der Eigenschaften der Komponente "verbunden" wird.  Ich habe gute Nachrichten für dich.  Mit TypeScript können Sie dies heute tun!  Bist du bereit  Lass uns gehen! </p><br><h3 id="mosch-typescript">  Die Kraft von TypeScript </h3><br><p>  TypeScript steht nicht still und entwickelt sich ständig weiter (wofür ich es liebe).  Ab Version 2.8 erschien darin eine sehr interessante Funktion (bedingte Typen), mit der Typen anhand von bedingten Ausdrücken zugeordnet werden können.  Ich werde hier nicht auf Details eingehen, sondern nur einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link zur Dokumentation</a> hinterlassen und zur Veranschaulichung einen Code daraus einfügen: </p><br><pre> <code class="javascript hljs">type TypeName&lt;T&gt; = T extends string ? <span class="hljs-string"><span class="hljs-string">"string"</span></span> : T extends number ? <span class="hljs-string"><span class="hljs-string">"number"</span></span> : T extends boolean ? <span class="hljs-string"><span class="hljs-string">"boolean"</span></span> : T extends <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> ? <span class="hljs-string"><span class="hljs-string">"undefined"</span></span> : T extends <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span> ? <span class="hljs-string"><span class="hljs-string">"function"</span></span> : <span class="hljs-string"><span class="hljs-string">"object"</span></span>; type T0 = TypeName&lt;string&gt;; <span class="hljs-comment"><span class="hljs-comment">// "string" type T1 = TypeName&lt;"a"&gt;; // "string" type T2 = TypeName&lt;true&gt;; // "boolean" type T3 = TypeName&lt;() =&gt; void&gt;; // "function" type T4 = TypeName&lt;string[]&gt;; // "object"</span></span></code> </pre> <br><p>  Wie diese Funktion in unserem Fall hilft.  <code>react-redux</code> der <a href="">Beschreibung</a> der <code>InferableComponentEnhancerWithProps</code> <code>react-redux</code> Bibliothekstypen finden Sie den <code>InferableComponentEnhancerWithProps</code> Typ, der dafür verantwortlich ist, dass die Typen der injizierten Eigenschaften nicht in den externen Typ der Komponenteneigenschaften fallen, den wir beim Instanziieren der Komponente explizit festlegen müssen.  Der Typ <code>InferableComponentEnhancerWithProps</code> verfügt über zwei allgemeine Parameter: <code>TInjectedProps</code> und <code>TNeedsProps</code> .  Wir interessieren uns für die erste.  Versuchen wir, diesen Typ aus diesem Anschluss herauszuziehen! </p><br><pre> <code class="javascript hljs">type TypeOfConnect&lt;T&gt; = T extends InferableComponentEnhancerWithProps&lt;infer Props, infer _&gt; ? Props : never ;</code> </pre> <br><p>  Und ziehen Sie den Typ direkt aus einem realen Beispiel aus dem <a href="">Repository</a> (das Sie dort klonen und ein Testprogramm ausführen können): </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { RootStore, init, TypeOfConnect, thunkAction, unboxThunk } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'src/redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> storeEnhancer = connect( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state: RootStore</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ ...state, }), { init, <span class="hljs-attr"><span class="hljs-attr">thunkAction</span></span>: unboxThunk(thunkAction), } ); type AppProps = {} &amp; TypeOfConnect&lt;<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> storeEnhancer&gt; ; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PureComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppProps</span></span></span><span class="hljs-class">&gt; </span></span>{ componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.init(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.thunkAction(<span class="hljs-number"><span class="hljs-number">3000</span></span>); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{this.props.a}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{this.props.b}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{String(this.props.c)}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/&gt;</span></span></span><span class="xml"> ); } } export default storeEnhancer(App);</span></span></code> </pre> <br><p>  Im obigen Beispiel teilen wir die Verbindung zum Repository (Redux) in zwei Stufen auf.  In der ersten Phase erhalten wir einen KomponentenspeicherEnhancer höherer Ordnung (auch bekannt als <code>InferableComponentEnhancerWithProps</code> ), mit dem Sie mithilfe unseres <code>TypeOfConnect</code> <code>InferableComponentEnhancerWithProps</code> Eigenschaftstypen <code>TypeOfConnect</code> und die erhaltenen Eigenschaftstypen (über den Schnittpunkt von <code>&amp;</code> types) mit nativen Eigenschaftstypen der Komponente weiter kombinieren können.  In der zweiten Phase dekorieren wir einfach unsere Originalkomponente.  Was auch immer Sie dem Connector hinzufügen, es fällt automatisch in die Komponenteneigenschaftstypen.  Großartig, was wir erreichen wollten! </p><br><p>  Ein aufmerksamer Leser bemerkte, dass Aktionsgeneratoren (der Kürze <code>unboxThunk</code> vereinfachen wir den Begriff für Aktion) mit Nebenwirkungen (Thunk-Aktionsersteller) mithilfe der Funktion <code>unboxThunk</code> einer zusätzlichen Verarbeitung <code>unboxThunk</code> werden.  Was hat eine solche zusätzliche Maßnahme verursacht?  Lass es uns richtig machen.  Schauen wir uns zunächst die Signatur einer solchen Aktion am Beispiel eines Programms aus dem Repository an: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> thunkAction = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">delay: number</span></span></span><span class="hljs-function">): </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ThunkAction</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">void</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RootStore</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">void</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AnyAction</span></span></span><span class="hljs-function">&gt; =&gt;</span></span> (dispatch) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'waiting for'</span></span>, delay); setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'reset'</span></span>); dispatch(reset()); }, delay); };</code> </pre> <br><p>  Wie Sie der Signatur entnehmen können, gibt unsere Aktion nicht sofort die Zielfunktion zurück, sondern zunächst eine Zwischenfunktion, die <code>redux-middleware</code> aufnimmt, um Nebenwirkungen in unserer Hauptfunktion zu ermöglichen.  Wenn Sie diese Funktion jedoch in der verbundenen Form in den Eigenschaften der Komponente verwenden, wird die Signatur dieser Funktion mit Ausnahme der Zwischenfunktion reduziert.  Wie beschreibt man es in Typen?  Benötigen Sie eine spezielle Konverterfunktion.  Wieder zeigt TypeScript seine Kraft.  Zunächst beschreiben wir den Typ, der die Zwischenfunktion aus der Signatur entfernt: </p><br><pre> <code class="javascript hljs">CutMiddleFunction&lt;T&gt; = T extends (...arg: infer Args) =&gt; <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...args: any[]</span></span></span><span class="hljs-function">) =&gt;</span></span> infer R ? <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...arg: Args</span></span></span><span class="hljs-function">) =&gt;</span></span> R : never ;</code> </pre> <br><p>  Hier verwenden wir zusätzlich zu bedingten Typen eine neuere Innovation aus TypeScript 3.0, mit der wir den Typ einer beliebigen Anzahl von Funktionsargumenten (Restparameter) ableiten können.  Einzelheiten finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> .  Jetzt bleibt es, den überschüssigen Teil auf ziemlich starre Weise aus unserer Handlung herauszuschneiden: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> unboxThunk = &lt;Args extends any[], R, S, E, A extends Action&lt;any&gt;&gt;( thunkFn: (...args: Args) =&gt; ThunkAction&lt;R, S, E, A&gt;, ) =&gt; ( thunkFn as any as CutMiddleFunction&lt;typeof thunkFn&gt; );</code> </pre> <br><p>  Wenn wir die Aktion durch einen solchen Konverter leiten, erhalten wir die Signatur, die wir am Ausgang benötigen.  Jetzt kann die Aktion im Connector verwendet werden. </p><br><p>  Durch einfache Manipulationen reduzieren wir unsere manuelle Arbeit beim Schreiben von typisiertem Code auf unseren Stapel.  Wenn wir etwas weiter gehen, können wir auch die Eingabe von Aktionen und Reduzierern vereinfachen, wie wir es im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Redux-Modus</a> getan haben. </p><br><p>  <strong>PS</strong> Wenn Sie die dynamische Bindung von Aktionen im Connector über die Funktion und <code>redux.bindActionCreators</code> müssen Sie für eine korrektere Typisierung dieses Dienstprogramms sorgen (möglicherweise durch Schreiben eines eigenen Wrappers). </p><br><p>  <strong>Update 0</strong> <br>  Wenn jemand diese Lösung für praktisch hielt, kann sie Ihnen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gefallen</a> , sodass das Dienstprogramm type dem <code>@types/react-redux</code> hinzugefügt wird. </p><br><p>  <strong>Update 1</strong> <br>  Einige weitere Typen, bei denen Sie den Typ der injizierten Requisiten des Sprunggelenks nicht explizit angeben müssen.  Nehmen Sie einfach den Hoki und ziehen Sie die Typen heraus: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> type BasicHoc&lt;T&gt; = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component: React.ComponentType&lt;T&gt;</span></span></span><span class="hljs-function">) =&gt;</span></span> React.ComponentType&lt;any&gt;; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> type ConfiguredHoc&lt;T&gt; = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...args: any[]</span></span></span><span class="hljs-function">) =&gt;</span></span> (Component: React.ComponentType&lt;T&gt;) =&gt; React.ComponentType&lt;any&gt;; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> type BasicHocProps&lt;T&gt; = T extends BasicHoc&lt;infer Props&gt; ? Props : never; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> type ConfiguredHocProps&lt;T&gt; = T extends ConfiguredHoc&lt;infer Props&gt; ? Props : never; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> type HocProps&lt;T&gt; = T extends BasicHoc&lt;any&gt; ? BasicHocProps&lt;T&gt; : T extends ConfiguredHoc&lt;any&gt; ? ConfiguredHocProps&lt;T&gt; : never ; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> basicHoc = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component: React.ComponentType&lt;{a: number}&gt;</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> configuredHoc = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">opts: any</span></span></span><span class="hljs-function">) =&gt;</span></span> (Component: React.ComponentType&lt;{<span class="hljs-attr"><span class="hljs-attr">a</span></span>: number}&gt;) =&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{}; type props1 = HocProps&lt;<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> basicHoc&gt;; <span class="hljs-comment"><span class="hljs-comment">// {a: number} type props2 = HocProps&lt;typeof configuredHoc&gt;; // {a: number}</span></span></code> </pre> <br><p>  <strong>Update2</strong> <br>  Der Typ aus dem Betreff befindet sich jetzt in <code>@types/react-redux</code> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ConnectedProps</a> ). </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de431452/">https://habr.com/ru/post/de431452/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de431442/index.html">Aktualisiertes WD Black NVMe: Was kann 3D NAND wirklich?</a></li>
<li><a href="../de431444/index.html">So planen Sie einen zweiwöchigen Sprint</a></li>
<li><a href="../de431446/index.html">Licht? Die Kamera? OSMO! DJI stellte die kleinste OSMO Pocket Steadicam vor</a></li>
<li><a href="../de431448/index.html">Samsung Buds 2019: Geheimnisvolles Update für Gear IconX oder potenzielle Killer von Apple AirPods</a></li>
<li><a href="../de431450/index.html">Wer verkauft Ihre Konten?</a></li>
<li><a href="../de431454/index.html">Lidar von Luminar und Volvo hilft bei der Bestimmung der Fußgängeraktivität in einer Entfernung von einem Viertelkilometer</a></li>
<li><a href="../de431456/index.html">50 Fragen zur Bearbeitung der Dokumentation</a></li>
<li><a href="../de431458/index.html">Wir werden zu Assistenten in der Programmierung. Teil 2</a></li>
<li><a href="../de431460/index.html">"Testerkalender" für November. Angemessene Paartests</a></li>
<li><a href="../de431462/index.html">Wie wir einen Buchscanner für Schiffe gemacht haben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>