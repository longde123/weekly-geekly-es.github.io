<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>◾️ 🤘🏽 😱 ATtiny13 vs PLC, atau cara mendapatkan 14 I / O dari pengontrol 8-kaki 👨🏽‍🏭 ♒️ ⚱️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sebelum melanjutkan, saya ingin memperingatkan pembaca yang rajin. 



1. Apa yang saya jelaskan tidak dapat dilakukan karena banyak alasan, alasan-al...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ATtiny13 vs PLC, atau cara mendapatkan 14 I / O dari pengontrol 8-kaki</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443978/"><img src="https://habrastorage.org/webt/lk/bp/pb/lkbppbhy4dv1ifgmfeoc3w_mcua.jpeg" alt="gambar"><br><br>  Sebelum melanjutkan, saya ingin memperingatkan pembaca yang rajin. <br><br><ol><li>  Apa yang saya jelaskan tidak dapat dilakukan karena banyak alasan, alasan-alasan ini akan ditunjukkan dengan gembira kepada Anda di komentar, dan saya sama sekali tidak mendesak Anda untuk melakukannya.  Dan dalam hal apa pun saya tidak mengklaim bahwa perangkat yang dijelaskan di bawah ini dapat menggantikan PLC yang sebenarnya.  Semua yang dijelaskan hanya dilakukan untuk membuktikan kepada diri sendiri bahwa ini secara teknis memungkinkan dan tidak berlaku untuk peralatan nyata. </li><li>  Jika Anda merasa sakit hanya karena menyebutkan kata "Arduino", Anda sebaiknya tidak membaca.  Saya melakukan semua tindakan dengan pengontrol di Arduino IDE, lebih mudah bagi saya.  Tetapi tidak ada yang mencegah untuk melakukan hal yang sama tanpa menggunakannya. </li></ol><a name="habracut"></a><br>  Untuk waktu yang lama saya ingin menulis artikel tentang percobaan saya dengan ATtiny13, tetapi saya terutama takut dengan sikap para arduino di situs tersebut.  Selain itu, saya telah bekerja dengan pengontrol hanya beberapa tahun (terima kasih lagi kepada Arduino, oh, di mana saja Anda sebelumnya!).  Komentar pada artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tiga mata menggantung pada posting ...</a> menunjukkan bahwa topik ini masih menarik bagi pengguna yang cukup.  Ngomong-ngomong, judul artikel seharusnya adalah "PLC pada ATtiny13", tetapi dalam komentar yang sama, mereka dengan sopan menjelaskan kepada saya <s>di atas meja</s> bahwa perangkat yang dijelaskan tidak dapat disebut "PLC".  Ya, tidak. <br><br><h3>  Apa yang kita butuhkan dari PLC? </h3><br>  Itu dimulai dengan fakta bahwa saya ingin membuat analog fungsional dari PLC yang digunakan di perusahaan saya, dengan mempertimbangkan bagaimana mereka digunakan.  Sebagian besar sirkuit kontrol kami miliki relay dengan semua kekurangan berikutnya.  Berbagai jenis PLC juga digunakan di berbagai tempat, mulai dari tahun 90-an.  Pada dasarnya, mereka melakukan tugas logis dari rangkaian kontrol, mulai dari keadaan sakelar batas dan sensor proximity. <br><br>  Tidak ada antarmuka yang kompleks, tidak ada sinyal analog.  Nyala / Mati.  Itu saja.  Sebagian besar, bahkan beban untuk output PLC disediakan oleh relay yang sama sehingga mereka sangat ingin menyingkirkannya.  (Yang lucu adalah bahwa hampir di mana-mana output relai PLC digunakan, yang beralih relay eksternal, yang beralih elektromagnet dari distributor hidrolik ... Kadang-kadang satu lagi tautan dari starter ditambahkan.) Jadi, apa yang saya butuhkan dari PLC: <br><br><ol><li>  Input diskrit untuk level sinyal 24 volt. </li><li>  Keluaran diskrit dengan tegangan 24 volt. </li><li>  Menguji algoritma internal sesuai dengan skema yang diberikan, yang dapat diubah jika perlu (terutama selama debugging). </li><li>  Kecepatan sekitar 50 ms, tidak perlu lagi mengganti sirkuit relai. </li></ol><br>  Dan itu dia.  Tidak ada antarmuka.  Tidak ada interupsi.  Tidak ada layar.  Ah, ya, layarnya ... Tidak ada ruginya menampilkan status input dan output; di sini, LED belum menghasilkan LED yang lebih andal.  Nah, jangan lupa bahwa semuanya dilakukan karena minat olahraga, masing-masing, anggaran jatuh di pundak pengembang.  By the way, insentif yang sangat bagus. <br><br>  Jika Anda tidak memperhitungkan level sinyal 24 volt, maka mikrokontroler apa pun dengan jumlah I / O (input / output) tidak kurang dari yang diperlukan dapat dengan mudah mengatasi tugas tersebut. <br><br><h3>  Kami berurusan dengan level </h3><br>  Awalnya, saya ingin menggunakan optocoupler di input.  Siapa pun yang kurang lebih berpengalaman dalam elektronik, terutama industri, tahu bahwa tidak ada banyak optocoupler.  Komentar akan memberi tahu Anda secara terperinci mengapa tidak mungkin tanpa optocoupler.  Tetapi saya menimbang pro dan kontra, dan memutuskan untuk menolak.  Jadi beberapa mungkin tidak membaca lebih lanjut, dan segera melanjutkan untuk menulis komentar. <br>  Jadi, kami memiliki sinyal input 24 volt, atau 0 volt tanpa adanya sinyal.  Ini akan memungkinkan penggunaan sensor posisi induktif non-kontak atau sakelar batas kontak konvensional.  Dari 24 volt Anda perlu mendapatkan voltase dari unit logis yang aman untuk controller.  Pembagi tegangan lama yang baik berupaya dengan ini sebaik mungkin. <br><br><img src="https://habrastorage.org/webt/k4/mh/5u/k4mh5u-z5xmykgkjexscgcu_pba.jpeg" alt="gambar"><br><br>  Resistor dihitung dengan mempertimbangkan bahwa untuk setiap penyimpangan tegangan input dengan plus atau minus 20% dari tegangan nominal pada input mikrokontroler, harus ada lebih dari tegangan switching (biasanya ini adalah setengah dari tegangan controller), tetapi tidak lebih dari tegangan controller, kami menganggapnya sama dengan 5 V.  Cocok untuk pengontrol apa pun dalam keluarga AVR.  Selain itu, perkiraan arus melalui pembagi adalah sekitar 7 mA, yang mengurangi kemungkinan gangguan, dan pada saat yang sama tidak banyak memuat output sensor dan sumber daya.  Dioda 4,7 V zener berfungsi untuk melindungi dari lonjakan lonjakan pada gangguan yang sama.  Masih ada bouncing kontak, kita bisa bertarung dengannya secara terprogram atau tidak sama sekali, itu hanya mockup.  Sekarang saya masih harus menunjukkan status input.  Dan di sini Anda dapat menerapkan lifehack, membunuh dua burung dengan satu batu: <br><br><img src="https://habrastorage.org/webt/q9/rd/bj/q9rdbjjfnccqucc0cl6h9_19pr0.jpeg" alt="gambar"><br><br>  LED pada rangkaian melakukan dua fungsi - berfungsi seperti dioda zener, membatasi tegangan menjadi 2,8 ... 2,9 volt (hanya untuk LED biru dan putih!), Ya, itu juga bersinar.  Saya harus memperingatkan Anda bahwa dalam beberapa kasus tegangan pada LED tidak cukup untuk mengganti input controller!  Saat menggunakan beberapa input pengontrol, kami menyederhanakan instalasi dan menyimpan beberapa dioda zener.  Dengan meningkatkan tegangan input dengan lancar, Anda dapat melihat bahwa saat penyalaan LED dan saat pengalihan input tidak bersamaan.  Tapi ini tidak terlalu mengganggu kami, karena seharusnya tidak ada level menengah pada input, hanya 0 V atau 24 V. Secara alami, pada saat ini Anda harus memiliki setidaknya firmware uji minimum untuk satu input dan satu output di controller. <br><br>  Sekarang sinyal keluaran dari pengontrol juga perlu disesuaikan untuk 24 V, dan dengan mempertimbangkan bahwa kabel bersama, yang juga merupakan minus, adalah umum untuk semua relay keluaran.  Di sini Anda memerlukan setidaknya 2 transistor dan 2 resistor: <br><br><div class="spoiler">  <b class="spoiler_title">skema</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/v6/ap/um/v6apumv_nl09p0ozminlcjzajp8.jpeg" alt="gambar"><br></div></div><br>  Bahkan, satu resistor lagi akan diperlukan, dan dioda pelindung sejajar dengan relay, tetapi ini bukan tentang itu.  Awalnya saya menggunakan sirkuit ini.  Tetapi pada satu titik, saya menarik perhatian pada optocoupler, yang saya tolak pada awalnya. <br><blockquote>  Orang yang mengganggu kita akan membantu kita </blockquote><br><div class="spoiler">  <b class="spoiler_title">skema</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/gr/hp/hf/grhphftzdbeeqn4qplwr1pup8z4.jpeg" alt="gambar"><br></div></div>  Kami melihat parameter optocoupler dengan lembar data: PC817C termurah dan paling terjangkau dengan output memungkinkan Anda untuk beralih U: 35 V: I o: 50 mA.  Relai yang terhubung ke PLC di tempat kami (di perusahaan) membutuhkan waktu hingga 45 mA.  Tanpa stok, tapi cukup cocok.  Kebanyakan relay berukuran kecil pada 24 V tarikan sama sekali hingga 15 ... 20 mA.  Pada akhirnya, Anda dapat membeli optocoupler yang lebih mahal, jika Anda benar-benar membutuhkannya, ada arus baik hingga 80 mA, dan tegangan hingga 60 V. Kami cocok untuk tata letak dan 817.  Agar Anda tidak belajar dari kesalahan Anda, saya memperingatkan Anda bahwa untuk arus keluaran maksimum melalui LED optocoupler, Anda harus melewati lebih dari 7 mA. <br><br>  Sekali lagi, ingat indikasinya.  Untuk menampilkan status output, kami menambahkan seri LED dengan LED optocoupler, kami masih memiliki lebih dari 3 volt jatuh idle di sana.  Dan inilah saatnya untuk menggambar dioda pelindung sebelum Anda membakar optocoupler.  By the way, saya tidak dapat menemukan metode untuk memilih dioda pelindung, tergantung pada parameter relay.  Di satu sisi, itu harus berdenyut, di sisi lain, tegangan tinggi.  Selain itu, dapat ditempatkan paralel dengan transistor, mana yang lebih baik?  Praktek menunjukkan bahwa diode IN4148 daya rendah cukup dalam hal ini, tapi saya ingin pembenaran teoretis. <br><br><div class="spoiler">  <b class="spoiler_title">skema</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/yb/w6/-y/ybw6-ymcrmjzgumo8m3bcss2gek.jpeg" alt="gambar"><br></div></div><br>  Sebuah resistor 220 ohm ditunjukkan dengan perhitungan lagi pada LED biru atau putih, jika Anda menempatkan merah, arus dalam rangkaian dari 3,5 mA akan meningkat menjadi 9 mA, ini harus diperhitungkan. <br><br><h3>  Sedikit tentang pemrograman </h3><br>  Yah, ada begitu banyak surat, tetapi saya masih belum sampai ke bagian bawah judul, atau ke ATtiny13.  Untuk memprogram pengontrol saya, saya menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">proyek FLProg</a> , lingkungan pemrograman visual yang membuat pemrograman pengontrol sedekat mungkin dengan pemrograman PLC di LAD dan FBD.  Sirkuit yang dibuat di lingkungan ini, yang juga merupakan proyek, dikompilasi menjadi sketsa Arduino, yang sudah saya unggah dari Arduino ke ATtiny13 atau pengontrol lain dari keluarga AVR.  Misalnya, skema yang begitu sederhana <br><br><img src="https://habrastorage.org/webt/wl/i9/1m/wli91mdh38s505j7e5qlz4dpxym.png" alt="gambar"><br><br>  kompilasi menjadi kode seperti ini: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _k1 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{
pinMode(<span class="hljs-number"><span class="hljs-number">1</span></span>, INPUT);
pinMode(<span class="hljs-number"><span class="hljs-number">2</span></span>, INPUT);
pinMode(<span class="hljs-number"><span class="hljs-number">3</span></span>, OUTPUT);
}
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{
_k1 = (((((!(digitalRead (<span class="hljs-number"><span class="hljs-number">1</span></span>)))) &amp;&amp;((digitalRead (<span class="hljs-number"><span class="hljs-number">2</span></span>))))) || ((((!(digitalRead (<span class="hljs-number"><span class="hljs-number">1</span></span>)))) &amp;&amp;(_k1))));
digitalWrite (<span class="hljs-number"><span class="hljs-number">3</span></span>, _k1);
}</code></pre><br>
     -   - ,   .     FLProg  ,       «»    .       ,      . , pin     –      ,      .      ATtiny13,    : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">    Attiny13  Attiny13a   Arduino IDE</a> ,  : FLProg     ATtiny13 (     ),   ,     ,  ATmega168.  FLProg     ,    ATtiny13,     .    Arduino IDE     ,    .<br>
<br>
<h3>    </h3><br>
    ?    ATtiny13,      5 ,       .   ,   6 ,   ,  , : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> ?  RESET</a>.<br>
<br>
,  6,   .   ?<br>
<br>
  :<br>
<br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/i-/bo/y8/i-boy8fj5pf1ryijqu4pjdpyjto.jpeg" alt="image"><br>
</div></div><br>
 ,           .      .       ,    .  . <br>
<br>
  ,       50 . ,    50     ,    ,       .     ,   . <br>
<br>
        0   2,8 ,       ,           .  ,      ,    1,1  (   )  2,9 ,   4 .      ,  .<br>
<br>
   .      ,        ,  .      ,       ,    5 ,      --  ,       .          3  (   )  680 .      ,     .         ,   ,           .<br>
<br>
    ?       50 ,    1 ,    50 .  ,  1     ,             .       ,    .<br>
<br>
   ,     .       ,     . <br>
<br>
    6+6=12 -,    2?<br>
<br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><img src="https://habrastorage.org/webt/kf/rj/nu/kfrjnufoiyvhmwvetvqlf8x3mx4.jpeg" alt="image"><br>
</div></div><br>
,   ?     ,    )   4 , ,      ,     .          0 ,        ,  2,8 ,       (    ).        24,    0,  ,    2  – 0,93   1,87 .         ,       .   Arduino IDE       ,            ATtiny,   .       ,    .<br>
<br>
,  , 6   10 (!)    ATtiny13     (     ). ,     ,     .         ,     «»  ATtiny. ,         ATmega8,     .     :-)<br>
<br>
            ,      .<br>
<br>
        ,        ,    ,     .   I/O     . ,   (8/6)    ,       ,     «   ».<br>
<br>
 ,       , ,       «»,    <s></s>.  .<br>
<br>
P.S.       ,  : «    ?»<br>
<br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/uu/9d/ah/uu9dahstj6whlhfckbfknzfdth4.png" alt="image"><br>
</div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id443978/">https://habr.com/ru/post/id443978/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id443966/index.html">Google Documents - obrolan favorit di antara para siswa</a></li>
<li><a href="../id443968/index.html">Bagaimana kami membeli rumah dengan panel surya, dan apa yang terjadi</a></li>
<li><a href="../id443972/index.html">Yandex akan mencari bajak laut menggunakan robot</a></li>
<li><a href="../id443974/index.html">Memory and Span pt. 1</a></li>
<li><a href="../id443976/index.html">Memory and Span pt. 2</a></li>
<li><a href="../id443980/index.html">Memory and Span pt. 3</a></li>
<li><a href="../id443984/index.html">Standar baru berdasarkan PCIe 5.0 akan "menghubungkan" CPU dan GPU - apa yang diketahui tentang itu</a></li>
<li><a href="../id443986/index.html">Seperti tupai di roda atau sedikit tentang penelitian pengguna dalam pengaturan cacat</a></li>
<li><a href="../id443988/index.html">Arsitektur Microservice = Komputasi Terdistribusi</a></li>
<li><a href="../id443990/index.html">13 game baru diperkenalkan sebagai bagian dari program ID @ Xbox</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>