<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌠 🦀 🧖🏽 Où est son bouton?! Comment une simple personne peut-elle décharger des données de Kibana et Elasticsearch et ne pas forcer les développeurs ⏏️ 🕋 🏈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Elasticsearch, Kibana et Logstash (ELK) sont une excellente boîte à outils pour collecter et visualiser de grandes quantités de données. 

 Journaux, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Où est son bouton?! Comment une simple personne peut-elle décharger des données de Kibana et Elasticsearch et ne pas forcer les développeurs</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414581/"> Elasticsearch, Kibana et Logstash (ELK) sont une excellente boîte à outils pour collecter et visualiser de grandes quantités de données. <br><br>  Journaux, magazines, événements - tout cela est assez facile à assembler, à cartographier et à afficher dans une seule boîte à outils.  Logstash mappe les données, Elasticsearch les stocke et Kibana les affiche sous forme de graphiques. <br><br>  Avec toute la puissance de cet ensemble, bien sûr, il y a des tâches qui ne peuvent pas être réalisées grâce aux fonctionnalités intégrées. <br><br>  Par exemple, Kibana affiche parfaitement les données dans une seule table (index), mais dès qu'il s'agit de combiner différents index en un seul échantillon, il lève impuissant la main. <br><br>  Et la seule façon de résoudre le problème dans ce cas est de décharger les données de Kibana et de les combiner dans n'importe quel autre outil, par exemple, dans Excel. <br><br>  Un exemple simple.  Imaginez que votre arbre de Noël (ELK) collecte et stocke les événements Jira - pour tout changement dans l'une des tâches du tracker de tâches. <br><br>  Dans ce cas, l'index Elasticsearch stockera plusieurs enregistrements pour une tâche: <br><br><img src="https://habrastorage.org/webt/n5/es/_l/n5es_l0gutmilv1g72-k0k6itao.png"><br><a name="habracut"></a><br>  Si vous souhaitez créer un calendrier d'événements Jira montrant la conversion des tâches par état, alors avec Kibana, vous ne pourrez probablement pas le faire.  En raison des particularités de noSQL, vous aurez besoin de tous les événements d'une tâche pour les «conduire» dans un enregistrement Elasticsearch. <br><br>  Il est assez difficile de le faire sans impliquer les développeurs et réécrire les configurations de Logstash. <br><br>  La première chose qui vous vient à l'esprit est de décharger les données de Kibana pour les tordre manuellement dans Excel standard. <br><br>  Mais la recherche du bouton de téléchargement, à votre grande surprise, échouera, surtout si Kibana est une entreprise et a des limitations sur le module Reporting: <br><br><img src="https://habrastorage.org/webt/4x/fo/ub/4xfoubdea8vmtyosrlugbv-wbfa.png"><br><br>  Alors, que se passe-t-il, il y a des données, mais vous ne pouvez pas les utiliser? <br>  Il y a en fait une voie secrète.  Grâce au rapport de tableau standard Data Table. <br><br>  Dans l'onglet «Visualiser», vous pouvez créer de nombreux rapports différents, mais uniquement dans le tableau de données se trouve un bouton pour télécharger les données au format csv. <br><br><img src="https://habrastorage.org/webt/us/2g/63/us2g63xvo0pec7ju0ino3jirnc8.png"><br><br>  Si vous travaillez avec Kibana, vous percevez probablement le tableau de données comme un agrégat, c'est-à-dire  un tableau dans lequel vous pouvez calculer le nombre total de quelque chose, mais il est impossible de répertorier tous les enregistrements.  Cependant, ce n'est pas entièrement vrai. <br><br>  Le tableau a une fonction merveilleuse - Nombre unique (pour compter le nombre d'éléments uniques), que vous pouvez utiliser pour afficher la liste complète des enregistrements dans le tableau. <br><br>  Cliquez sur "+" dans l'onglet Visualiser, sélectionnez "Tableau de données" et spécifiez l'index à partir duquel vous souhaitez décharger.  Dans les paramètres du tableau, spécifiez l'agrégat - «Nombre unique» et juste en dessous du champ avec un ID unique. <br><br><img src="https://habrastorage.org/webt/ka/n6/xu/kan6xu9kwfkqnmz1mnhdga3a1jk.png"><br><br>  Si vous lancez le recomptage, Kibana affichera le nombre d'entrées uniques dans l'index. <br>  Comment transformer un numéro en une liste d'enregistrements?  Très simple - en utilisant le bouton "Split Rows" <br>  Cliquez dessus et sélectionnez «Termes» comme un agrégat (ventilation par valeur de champ). <br>  Il s'agit d'un point clé: dans «Champ», spécifiez un champ avec un ID d'enregistrement unique. <br><br>  Et voilà, un seul chiffre lors du recomptage d'une table se transforme par magie en table! <br>  Le voici, le moment de vérité. <br><br>  Qu'avez-vous fait?  En bref, vous avez dit à Kibana que vous souhaitez compter le nombre d'enregistrements uniques et avez également indiqué le regroupement des enregistrements par attribut, à savoir, par les valeurs uniques du champ que vous avez spécifié. <br><br>  Maintenant, Kibana compte séparément le nombre d'éléments dans chaque groupe.  comme valeurs vous avez spécifié un ID d'enregistrement unique, Kibana a commencé à compter le nombre d'enregistrements uniques groupés par un ID unique, c.-à-d.  en fait, à côté de chaque ligne du tableau, la métrique «Compte unique» sera égale à «1». <br><br>  Vous avez obtenu le résultat souhaité - affiché tous les enregistrements et calculé en outre combien de lignes vous avez dans l'index avec le même ID. <br><br><img src="https://habrastorage.org/webt/6b/oy/tn/6boytng4ypu6ajrivjasoksuxqy.png"><br><br>  Maintenant, si les colonnes du tableau ne suffisent pas, ajoutez des champs supplémentaires en utilisant le bouton "Ajouter des sous-compartiments" puis "Fractionner les lignes". <br><br><img src="https://habrastorage.org/webt/86/bn/-k/86bn-k8pachweobxqwaao7npuni.png"><br><br>  Partout, sélectionnez «Termes» comme agrégat et spécifiez les noms des champs que vous souhaitez ajouter au tableau. <br><br><img src="https://habrastorage.org/webt/je/jl/wn/jejlwnvhoo6aymu-vmtzq7mprxk.png"><br><br>  C'est fait.  Vous avez reçu un téléchargement complet de l'index. <br>  Il ne reste plus qu'à enregistrer la visualisation et à cliquer sur le bouton «Exporter brut» ou «Exporter formaté». <br><br><img src="https://habrastorage.org/webt/ng/ha/wd/nghawdmii16zzs8stpyhildlufk.png"><br><br>  Raw décharge tout ce qui est brut et Formaté reformate les données en fonction des paramètres régionaux définis dans Kibana. <br>  C’est tout. <br><br>  Comme vous pouvez le voir, le téléchargement à partir de Kibana vers une personne simple qui ne connaît pas la programmation est toujours possible, bien que la solution ne se trouve pas à la surface. <br><br>  J'espère que ce petit truc me facilitera la vie pour quelqu'un et me donnera l'opportunité d'analyser rapidement les données sans impliquer les développeurs dans les téléchargements. <br><br>  Si mon expérience vous a aidé, je serai heureux de voir votre commentaire sur cet article. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414581/">https://habr.com/ru/post/fr414581/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414569/index.html">Les récifs coralliens gardent les secrets du passé et de l'avenir des océans</a></li>
<li><a href="../fr414571/index.html">La relativité inattendue du GPS intégré au cerveau</a></li>
<li><a href="../fr414573/index.html">IP DoorBell - Sonnette interactive</a></li>
<li><a href="../fr414577/index.html">Devilution: projet de reverse engineering Diablo</a></li>
<li><a href="../fr414579/index.html">Google AI a appris à prédire quand un patient mourra (mais tout n'est pas si sombre)</a></li>
<li><a href="../fr414583/index.html">RIT ++, Tech RaDarts et tout-tout-tout</a></li>
<li><a href="../fr414585/index.html">Comment mon String.getBytes (UTF_8) s'est cassé et ce que j'en ai fait</a></li>
<li><a href="../fr414587/index.html">Drone autonome bricolage avec contrôle sur Internet. Partie 2 sur les logiciels</a></li>
<li><a href="../fr414593/index.html">Comparaison de C # et JavaScript. Les bases</a></li>
<li><a href="../fr414595/index.html">Blocage de Roskomnadzor par l'hymne de la Fédération de Russie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>