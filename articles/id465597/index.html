<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧕🏽 📹 👇🏾 Belajar STM8S Mulai Lambat. Bagian 0 🌞 🈷️ 🐴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="STM8S keluarga MK relatif terhadap STM8L / 32 memiliki persenjataan peripheral yang lebih kecil, tetapi memungkinkan Anda untuk dengan mudah memahami ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Belajar STM8S Mulai Lambat. Bagian 0</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465597/"> STM8S keluarga <abbr title="Mikrokontroler">MK</abbr> relatif terhadap STM8L / 32 memiliki persenjataan peripheral yang lebih kecil, tetapi memungkinkan Anda untuk dengan mudah memahami dasar-dasarnya dan mendapatkan keterampilan yang diperlukan untuk bekerja dengan saudara-saudaranya yang lebih tua. <br><br><h2>  0. Kepada siapa materiil berorientasi, mengapa dan mengapa </h2><br>  Saat menulis artikel ini, saya berasumsi bahwa pembaca dapat: <br><br><ul><li>  Baca dengan seksama (yang jarang) </li><li>  Sedikit bekerja dengan literatur teknis berbahasa Inggris (baik, atau motivasi untuk belajar, karena bahasa pertama programmer adalah bahasa Inggris) </li><li>  Solder (setidaknya keterampilan minimal) </li><li>  Pemrograman dalam C (sekali lagi, tidak semuanya begitu rumit) </li><li>  Google (tanpanya di mana saja) </li><li>  Gunakan multimeter dan memiliki keterampilan dasar lainnya (seperti "jangan letakkan jari Anda di soket") </li></ul><br>  Saya mempertimbangkan tujuan artikel: <br><br><ul><li>  Gambaran umum untuk dijalankan melalui semua tahap pengembangan sistem berdasarkan mikrokontroler </li><li>  Berikan catatan pengantar yang diperlukan untuk orang yang praktis tidak berdedikasi </li><li>  Jika memungkinkan, pembaca akan memiliki pemahaman tentang di mana, apa dan bagaimana menemukan </li></ul><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">(Tidak signifikan)</b> <div class="spoiler_text">  Kenapa dan mengapa? <br><br>  Saya pikir masuk akal untuk membuat kursus pemrograman MK yang terperinci. <br><br>  Saya akan menjadi kesempatan untuk mempelajari seluruh pinggiran secara lebih rinci dan sepanjang jalan akan membantu orang lain. <br>  Saya tahu bahwa sudah ada banyak artikel dan bahkan kursus pelatihan, tetapi saya memiliki pendekatan yang sedikit berbeda.  (Mungkin saya akan mendapatkan kritik yang memadai, berubah pikiran dan bergabung dengan MX Cube guys). <br><br>  Sangat menyedihkan melihat bagaimana pengendali stm berubah menjadi Arduino. <br><br>  Mengenai Arduino: <br><br>  Ada 3 (diketahui oleh saya, MB, saya hanya belum tumbuh) pendekatan untuk pengembangan <abbr title="Perangkat lunak">perangkat lunak</abbr> di MK: <br><br><ol><li>  Pengembangan Assembler </li><li>  Pengembangan untuk model MK tertentu </li><li>  Pengembangan menggunakan HAL dan perpustakaan serupa </li></ol><br>  1) Saya adalah pendukung pendapat bahwa jika Anda membangun rumah, maka Anda tidak boleh membakar setiap bata tanah liat dengan tangan Anda sendiri, karena assembler menghilang (walaupun dimulai dengan ini).  Kecepatan pengembangan terlalu rendah. <br><br>  2) Perpustakaan HAL, dll.  Bagi seorang pemula, terlalu banyak momen "tulis saja seperti ini" tidak jelas.  Karena - juga di tempat sampah. <br><br>  3) Saya menganggap proses pembuatan perangkat lunak untuk MK tertentu pilihan paling sehat untuk pemula; keterampilan yang diperoleh akan memungkinkan untuk berurusan dengan seri 8L dan 32 (meskipun menyakitkan untuk melakukannya sendiri sesuai dengan dokumentasi). <br><br>  Anda mungkin memperhatikan bahwa arduino tidak muncul dalam daftar ini, karena arduino adalah platform <u>pendidikan</u> dan tidak dimaksudkan untuk pengembangan perangkat ringkas berdasarkan basisnya.  Tetapi pendekatan untuk pemrograman itu untuk beberapa alasan (saya tidak tahu) ditransfer dan menyebar di Internet.  Dan bahkan digunakan dalam proyek komersial nyata.  (menyatakan, “Saya mengunduh perpustakaan di forum, terhubung, berfungsi, saya tidak tahu cara kerjanya”). <br><br>  Saya menyarankan, dari sudut pandang saya, pendekatan yang lebih bermakna secara akademis dan metodis. <br></div></div><br><h2>  1. Pilihan mikrokontroler </h2><br>  Saya memiliki beberapa STM8S105K6 dalam paket LQFP32, ini berasal dari keluarga ini, jadi saya memilihnya. <br><br>  Anda dapat memilih MK apa pun dalam seri. <br><br>  Ada papan Penemuan siap dari ST, Anda dapat membeli dari Cina atau memesan dari sumber lain.  Ada papan siap pakai untuk STM8S103F3P6 dan sejenisnya dari Cina. <br><br>  Namun, perlu dicatat bahwa papan yang sudah jadi dirancang untuk pelatihan. <br><br>  Di situs web produsen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">st.com</a> , kami menemukan MK kami dan mengunduh dokumen untuknya: <br><br>  Referensi manual: RM0016 - dokumen umum untuk semua keluarga MK STM8S dan STM8AF.  Berikutnya adalah RM. <br>  Datasheet: Saya punya dokumen DS5855 untuk STM8S105C4 / 6, STM8S105K4 / 6 dan STM8S105S4 / 6.  Berikutnya adalah DS. <br><br>  Dari hal-hal lezat yang dimilikinya (secara dangkal): <br><br><ul><li>  Dukungan 16 MHz </li><li>  32 KB Flash, 1 KB EEPROM, dan 2 KB RAM </li><li>  Daya 2.95-5.5V </li><li>  Pengatur waktu 8-bit dan 16-bit </li><li>  UART, SPI, I2C </li><li>  10-bit <abbr title="Konverter analog ke digital">ADC</abbr> </li><li>  hingga 38 input / output terpisah </li></ul><br><h2>  2. Peralatan yang dibutuhkan </h2><br>  Saya melihat dua opsi untuk bekerja dengan MK: <br><br><ol><li><div class="spoiler">  <b class="spoiler_title">Merakit tata letak dari komponen individual</b> <div class="spoiler_text">  Bagus, keren, aku suka itu.  Begitu banyak orang. <br><br>  Dalam hal ini, MK akan membutuhkan apa yang disebut strapping.  Rencananya sederhana: <br><br><ol><li>  Kami mengambil papan tempat memotong roti, dalam kasus saya TQFP (32-64PIN) 0.8MM, solder MK untuk itu </li><li>  Kami mengambil sisir baris ganda solder PLS-2x40 ke lubang yang mengarah ke kesimpulan MK </li><li>  Kami mengambil papan tempat memotong roti cetakan (saya punya 9x15 cm) dan menyolder sandwich terakhir ke atasnya </li><li>  Kami melihat poin RM 7. Power supply, <u>kita baca</u> .  Ada tertulis bahwa Anda memerlukan kapasitor yang menghubungkan pin VCAP dan catu daya 0V kami.  Juga tertulis bahwa Anda perlu melihat lebih detail dalam DS ke MK tertentu di bagian karakteristik elektrik.  Bagi saya, ini adalah pasal 10.3.1 dari kapasitor eksternal VCAP dengan mengacu pada Tabel 18 di mana nilai nominalnya adalah 470 - 3300 nF.  Saya mengambil 1 mF (di sirkuit C3).  (mengapa Anda membutuhkannya, saya harap Anda membacanya sendiri dalam RM) </li><li>  Ibid. Dalam DS dalam klausul 10.3.8.  Atur ulang karakteristik pin, kami menemukan nilai kapasitor 0,1mF (pada sirkuit C4).  Resistor R4 dengan nilai nominal 10 kOhm digunakan di papan debug dan berbagai catatan aplikasi, meskipun di dalam MK sudah ada resistor pull-up dengan nilai nominal 30 hingga 80 kOhm (jika Anda percaya DS yang sama).  Secara paralel dengan kapasitor C4 kami menempatkan tombol reset kami.  Pola reset seperti itu dapat dilihat, misalnya, dalam catatan Desighn DN0005. </li><li>  Juga, ST suka menambahkan kapasitor daya 100nF ke papan debug, dalam jumlah pin N yang terhubung ke daya +1.  Diagram hanya menunjukkan potongan C1, C2 dan C5 3, dan saya tidak menyoldernya di papan, tetapi Anda mengerti artinya.  Ini akan bekerja di atas meja tanpa mereka, tetapi dalam pengembangan komersial nyata lebih baik untuk mengurus masalah ini saat membiakkan papan perangkat. </li><li>  Penghapusan konektor pemrograman SWIM (Saya buat dari PLS-1x40) </li></ol><br>  Saya mendapat keajaiban seperti itu: <br><br><img src="https://habrastorage.org/webt/oh/ll/d5/ohlld5z9iiuxmlnc6djwgbqe_-w.png"><br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Membeli papan jadi (yang tidak menyelamatkan Anda dari bekerja dengan besi solder)</b> <div class="spoiler_text">  Bagus, keren, aku suka itu.  Begitu banyak orang. <br><br>  Perlu dibiasakan dengan konfigurasi papan, jika itu adalah papan dari ST, maka langsung dengan programmer dan terhubung dengan kabel tipe B USB.  Situs ST akan memiliki diagram pada halaman produk.  Di papan tulis akan ada tombol, LED, tweeter, tombol kapasitif dan daya tarik lainnya yang dapat Anda mainkan. <br><br>  Jika papan adalah bahasa Cina, maka sering papan tanpa programmer, Anda akan membutuhkan seorang programmer. <br><br>  Silkscreens dari nama-nama kesimpulan lebih baik untuk tidak percaya dan periksa dibandingkan dengan DS. <br></div></div></li></ol><br>  Saya tidak mempertimbangkan bekerja dengan papan tempat kontak karena saya tidak menggunakannya. <br><br>  Plus saya butuh programmer, saya punya ST2 Cina ST-Link.  Mampu memprogram dan STM8 dan STM32. <br><br><h2>  3. Memilih IDE </h2><br>  Bagi saya, pertanyaan tentang pilihan belum relevan, saya bekerja di IAR untuk STM8, karena itu membuat proyek di mana saya saat ini bekerja, untuk alasan yang sama versi lama. <br><br>  Kita masuk ke situs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">iar.com</a> , dalam pencarian kita ketikkan model MK kita. <br>  Unduh IAR Embedded Workbench for STM8, pilih evaluasi terbatas ukuran saat memasang, dan tahan dengan batas kode 8 KB.  Atau beli.  Ada versi yang diretas pada sumber daya yang dilarang di wilayah Federasi Rusia, tetapi tidak cocok untuk proyek komersial. <br><br>  Petunjuk instalasi ada di installer atau di Google. <br>  Saya menggunakan versi 6.5.3.2581. <br>  Instal lingkungan, bersama dengan itu driver untuk programmer. <br><br><h2>  4. Membuat proyek </h2><br>  Pergi ke IDE, pergi ke Project -&gt; Buat proyek baru -&gt; C ++ <br><br>  Klik OK, pilih direktori (lebih disukai tanpa Cyrillic dan spasi), pilih nama (tanpa spasi dan Cyrillic). <br><br>  Kami pergi ke folder root IDE kami dan menemukan folder inc, bagi saya path: <br><br><pre><code class="plaintext hljs">C:\Program Files (x86)\IAR Systems\Embedded Workbench 6.5\stm8\inc</code> </pre> <br><br>  Di antara file header iostm8 kami menemukan model MK kami, untuk saya: <br><br><pre> <code class="plaintext hljs">iostm8s105k6.h</code> </pre> <br>  Kami menghubungkannya di awal dan menambahkan loop tak terbatas. <br><br><div class="spoiler">  <b class="spoiler_title">Hasil:</b> <div class="spoiler_text"><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#include&lt;iostm8s105k6.h&gt; //  int main() { while(1){ //  } return 0; }</span></span></code> </pre><br></div></div><br>  Dalam menu Project -&gt; Options -&gt; General Options di kolom Device pilih MK Anda. <br><br>  Dalam Project -&gt; Options -&gt; Debugger di kolom Driver pilih ST-LINK. <br><br>  Temukan tombol Unduh dan Debug pada bilah alat. <br>  Pada kompilasi pertama, lingkungan akan meminta Anda untuk memilih nama file .eww.  (Nama saya sama dengan proyek.) <br><br>  Di bagian bawah jendela Debug Log harus ada pesan yang: <br><br><ul><li>  Preprocessor untuk STM8 - preprocessor dimulai </li><li>  Debugger untuk STM8 - debugger dimulai </li><li>  Terhubung ke sistem STM8 SWIM Debugging - terhubung ke MK </li><li>  Debugee yang dimuat - Telah terjadi unduhan firmware </li><li>  Atur ulang target - telah terjadi reset </li></ul><br>  Kami berada dalam mode debug, tetapi program ini dijeda. <br>  Di tempat yang sama pada bilah alat kami menemukan dan menekan tombol Go. <br>  Kami meluncurkan MK dalam mode debug. <br><br>  Klik Stop debugging, debugging stops, tetapi MK didukung oleh programmer dan kemudian menjalankan program, yaitu, ia memutar loop tanpa akhir dan tidak melakukan apa-apa. <br><br><h2>  Ringkasan </h2><br>  Hasilnya adalah gambaran singkat dan pengantar pemrograman seri STM8S dari MK tanpa pemrograman itu sendiri.  Ternyata hanya dasar untuk bekerja, dari ini biasanya semuanya dimulai - dengan perakitan tata letak. <br><br>  Saya tidak melihat intinya secara lebih rinci. <br><br>  Dalam banyak artikel, setelah pengantar, secara harfiah setelah beberapa baris, LED berkedip, yang saya tidak mengerti. <br><br>  Bagaimana pencapaian tujuan dapat dinilai dengan apakah pemula berhasil melakukan sesuatu sendiri, menggunakan informasi yang saya usulkan.  (jendela indikator Debug log) <br><br>  Terima kasih atas perhatian anda </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id465597/">https://habr.com/ru/post/id465597/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id465585/index.html">Bagaimana mengelola Bereaksi Data Grid melalui Redux</a></li>
<li><a href="../id465587/index.html">Analisis: apa pasar OTC, dan transaksi apa yang dilakukan di sana</a></li>
<li><a href="../id465589/index.html">Panduan Ringkas Pilot dan PoC</a></li>
<li><a href="../id465591/index.html">Konferensi PHP Eropa Tengah dibatalkan karena fakta bahwa tidak ada wanita di antara pembicara</a></li>
<li><a href="../id465595/index.html">5G datang kepada kita?</a></li>
<li><a href="../id465599/index.html">IPFS tanpa rasa sakit (tapi itu tidak akurat)</a></li>
<li><a href="../id465601/index.html">Mengapa Anda membutuhkan DevOps dan yang merupakan spesialis DevOps</a></li>
<li><a href="../id465603/index.html">Kursus vs magang. Bagaimana cara kita mengajar midbell di SimbirSoft</a></li>
<li><a href="../id465605/index.html">Buku “Pembelajaran penguatan dalam Python. OpenAI Gym dan TensorFlow untuk Pro »</a></li>
<li><a href="../id465607/index.html">Memahami Lean dan Agile dalam Pengembangan Perangkat Lunak</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>