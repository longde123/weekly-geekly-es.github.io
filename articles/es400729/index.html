<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùÑÔ∏è ü§∞üèª üìß Conexi√≥n de fuentes de alimentaci√≥n controladas, sensores y rel√©s a las placas base del servidor. Sin arduino üí∑ ‚ö±Ô∏è ü§ü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Conexi√≥n de varios sensores, sensores, rel√©s, expansores GPIO y otras instalaciones "Arduino" a trav√©s del bus I¬≤C directamente a las placas base del ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Conexi√≥n de fuentes de alimentaci√≥n controladas, sensores y rel√©s a las placas base del servidor. Sin arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/400729/"><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conexi√≥n de varios sensores, sensores, rel√©s, expansores GPIO y otras instalaciones "Arduino" a trav√©s del bus I¬≤C directamente a las placas base del servidor a trav√©s de la interfaz IPMI del controlador a bordo (BMC). Ejemplos pr√°cticos de dispositivos I¬≤C y trabajar con ellos desde la utilidad de l√≠nea de comandos </font></font><code>ipmitool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. SMBus, PMBus y gesti√≥n de fuentes de alimentaci√≥n. Restricciones y problemas de seguridad poco documentados. Exponiendo la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedad</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><br>
<img align="left" width="300" height="160" src="https://habrastorage.org/files/74c/158/4d9/74c1584d9f3341ddb97d685b82813161.jpg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despu√©s de instalar el servidor en un dise√±o improvisado, a veces desea conectarle algo m√°s: por ejemplo, sensores de temperatura, presi√≥n, humedad, pantallas LCD o incluso controladores de motor PWM. Hay dispositivos externos con fallas que se deben restablecer de forma remota y completa mediante rel√©s, no niveles, mientras que todo el servidor. ¬øO tal vez el lector solo quer√≠a un peine GPIO con una guirnalda de LED? Si no se trata de una Raspberry Pi de placa √∫nica, sino de un servidor de tama√±o completo, debe colgar el microcontrolador y meterse con √©l: escribir firmware, probar, establecer una uni√≥n con el host, etc. A veces esto es interesante en s√≠ mismo, pero sucede al rev√©s: ser√≠a m√°s r√°pido escribir un script y ejecutarlo, finalmente, si solo funcionara.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los conectores inusuales en el hierro siempre despertaron sentimientos encontrados de picaz√≥n t√©cnico-t√©cnica y fetichismo ventilatorio en el autor. </font><font style="vertical-align: inherit;">Estos conectores entretenidos se analizan aqu√≠.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargo de responsabilidad</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si est√° leyendo este art√≠culo en alg√∫n lugar fuera del portal Geektimes, le recomiendo que busque un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enlace aut√©ntico</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en una o dos semanas </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">El hecho es que los comentarios m√°s interesantes de los lectores aparecer√°n all√≠ (es decir, aqu√≠) en las inserciones, no estoy hablando de eliminar defectos y errores. </font><font style="vertical-align: inherit;">Sucede que los residentes enojados de un club literalmente rompen en pedazos un art√≠culo malo, al mismo tiempo que env√≠an al autor a un abismo k√°rmico. </font><font style="vertical-align: inherit;">En otras palabras, si un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enlace aut√©ntico</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no se abre, entonces no debe leer m√°s all√° de este lugar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El autor env√≠a sus saludos al Lejano Oriente (directamente desde el cielo sobre el Atl√°ntico Norte), y tambi√©n se disculpa con los reporteros de marcas respetadas: no necesitan tanta publicidad que les invento nombres c√≥micos. Por lo tanto, el art√≠culo es aplicable a los productos Super Miron, pero el autor tiene pocas dudas sobre la presencia de mecanismos similares en los productos de Kharlampiy-Pankrat, Ivan Bral Maryu, Iltan, Dolyan y otros: los conectores entretenidos se pueden encontrar con mayor frecuencia en fuentes de alimentaci√≥n y cestas de discos. Al mismo tiempo, intentaremos exponer el elogiado Enlace Kobzar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estimados expertos en plataformas de servidores, IPMI, I¬≤C, SMBus y PMBus, corrija si algo sale mal. </font><font style="vertical-align: inherit;">Por lo general, el autor expresa gratitud a los lectores creativos con puntos k√°rmicos, pero se disculpa con aquellos residentes del club para quienes la gratitud ya se ha escrito, simplemente el OVNI no ordena hacer esto dos veces. </font><font style="vertical-align: inherit;">Te deseo una lectura agradable.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De lo que era</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El autor no se averg√ºenza de comprar placas base de servidor usadas por un centavo y darles una segunda vida. </font><font style="vertical-align: inherit;">Los viejos y ruidosos mecanismos del servidor (con fuentes de alimentaci√≥n) se env√≠an a la chatarra y se reemplazan con nuevos productos, aunque de clase de consumo, pero de alta calidad y silenciosos. </font><font style="vertical-align: inherit;">Pero incluso con las series Super Miron X8 y X9 antiguas, todav√≠a obtienes un </font><font style="vertical-align: inherit;">NAS </font><font style="vertical-align: inherit;">simplemente </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incre√≠ble</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para las peque√±as empresas que combinan funciones empresariales, una "m√°quina del tiempo" de archivos contra troyanos de ransomware y replicaci√≥n de red ...</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Burl√°ndose del programa amarillo</font></font></b><div class="spoiler_text">    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">FreeNAS</a>        Windows-,        USB-.    ,   1    -,   .   Linux? -  , . , -    1 ‚Äî   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> (, ).   USB     <code>jail</code>  VirtualBox  ...</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, hace unos 20 a√±os, para la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">granja colectiva</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como GPIO, los artesanos usaban un puerto paralelo para la impresora, pero intentan encontrarlo ahora. </font><font style="vertical-align: inherit;">El mundo ha cambiado, en cuanto a m√≠, para mejor :)</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inspecci√≥n visual</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya tengo un producto X9SCM-F (Intel C204 Express) casi f√≥sil pero bastante funcional, m√°s su hermano menor X9SCL-F (C202) ha estado trabajando durante un par de a√±os en una instalaci√≥n cercana. Si gira el producto, como en la documentaci√≥n, con el conector de alimentaci√≥n ATX de 24 pines hacia el norte, los puertos SATA estar√°n en alg√∫n lugar del √°rea de Khabarovsk. Al este, como Petropavlovsk-Kamchatsky, hay un par de conectores T-SGPIO 1 y 2 que llaman la atenci√≥n con la combinaci√≥n de las letras "GPIO". El autor activ√≥ esta combinaci√≥n, pero los reflejos del ge√≥logo-investigador de la electr√≥nica f√≥sil resultaron ser falsos. En realidad, la palabra clave aqu√≠ es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SGPIO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es un bus de se√±alizaci√≥n d√∫plex por divisi√≥n de tiempo que usa tramas de longitud constante. El bus a su vez transmite tres bits para cada puerto SATA: en el HBA, el estado de la cesta, y en la cesta, el estado de los discos (activo, fallido, localizador). Esta es una tecnolog√≠a anticuada; las cestas modernas usan I¬≤C. No profundic√© mucho, pero parece que 6 puertos SATA a bordo se dividieron en grupos de dos del norte y cuatro del sur, y cada grupo colg√≥ su propio peine T-SGPIO. Engorroso, inc√≥modo, pero para </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la agricultura colectiva</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi√©n in√∫til. Adelante, hay un peque√±o conector JWF1 en el √°rea de Yuzhno-Sakhalinsk, pero solo tiene una potencia de 5V para el disco SATA DOM, que no tengo. En el Lejano Oriente no hay nada m√°s que hacer. A lo largo de las fronteras del sur se extiende una serie completa de conectores USB de 9 pines y un segundo puerto RS232, todo est√° claro con ellos. En el noroeste de COM2, se descubrieron un par de puentes JI2C1 / JI2C2, lo que permite el acceso a dispositivos PCIe. Este kit de herramientas ha sido un misterio para m√≠ hasta ahora, pero estoy bastante seguro de que, de hecho, JI2C1 / JI2C2 son las salidas en vivo de SCL y SDA, que simplemente est√°n separadas de la fuente de alimentaci√≥n de 3,3 V y la tierra, que ya est√°n en PCIe. D√©jalo por ahora. El conector JTPM es dolorosamente sofisticado, esto es una emergencia. Y solo el LED UID se puede extraer del conector del panel frontal JF1 conect√°ndolo al opto-rel√©. Por cierto, esto es m. incluso conveniente: una resistencia de terminaci√≥n ya est√° integrada en el circuito,Encendi√≥ el LED UID - abri√≥ (cerr√≥) el rel√©. Para reinicio remoto</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quiz√°s </font><i><font style="vertical-align: inherit;">un dispositivo externo</font></i><font style="vertical-align: inherit;"> sea ‚Äã‚Äãsuficiente. Lo principal es que el operador, despu√©s de ingresar a la interfaz web de BMC un a√±o despu√©s, no enciende el LED UID de esa manera, al mismo tiempo que reinicia el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dispositivo externo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Bien, estamos regresando al </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">servidor</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> extremo </font><font style="vertical-align: inherit;">norte, est√° all√≠, cerca de la potencia ATX, y se encuentra el conector JPI2C. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debo decir que la documentaci√≥n sobre JPI2C es bastante optimista. Se deduce que esta es la salida del bus I¬≤C para monitorear el estado de la fuente de alimentaci√≥n "nativa". F√≠sicamente, el JPI2C es un conector SL tipo Molex de 5 pines con un paso de 0.1 "(2.54 mm) y una </font><font style="vertical-align: inherit;">llave </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tonta</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con polaridad invertida, presumiblemente el c√≥digo de cat√°logo 70543-0004. La parte de respuesta (en la imagen en la parte inferior izquierda) es Molex 70066-0179 para engarzar Engarzadora (aka </font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BL-05F</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Sospecho que en todas las placas base Super Miron, el bus I¬≤C se usa para controlar el estado de la fuente de alimentaci√≥n del servidor y se deriva del conector Molex SL de 5 pines ( </font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BL-05M</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Mirando hacia el futuro, dir√© que algunos usuarios han tenido √©xito en la ingenier√≠a inversa y han encontrado una forma de eliminar todo tipo de utilidades, como la temperatura y los voltios con amperios de sus fuentes de alimentaci√≥n nativas de Super Miron, contin√∫e leyendo.</font></font><br>
<br>
<blockquote><img align="right" width="148" height="182" src="https://habrastorage.org/files/7e9/b96/f08/7e9b96f088bd4bcba512615f7e6be477.png"><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuente de alimentaci√≥n Conector I¬≤C</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fuente de alimentaci√≥n El conector I¬≤C, ubicado en JPI2C, monitorea el estado de la fuente de alimentaci√≥n, el ventilador y la temperatura del sistema. </font><font style="vertical-align: inherit;">Consulte la tabla de la derecha para ver las definiciones de los pines.</font></font><br clear="all">
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El conector JPI2C vac√≠o se burl√≥ abiertamente con los pines de bus I¬≤C est√°ndar: SCL, SDA, GND y VCC. </font><font style="vertical-align: inherit;">En el medio est√° la alarma de falla de la fuente de alimentaci√≥n. </font><font style="vertical-align: inherit;">Mirando hacia el futuro, me atrevo a sugerir que este Power Fail es la √∫nica forma de activar una alarma para un evento externo sin usar un microcontrolador externo. </font><font style="vertical-align: inherit;">Luego encontramos el art√≠culo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID de preguntas frecuentes 9492 con</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fecha del 30 de marzo de 2010, que claramente insinuaba la posibilidad de sondear el bus I¬≤C directamente desde la l√≠nea de comando. </font><font style="vertical-align: inherit;">Dado que BMC est√° claramente involucrado en el monitoreo del estado de la fuente de alimentaci√≥n, y el equipo es </font></font><code>ipmitool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">claramente capaz de "hablar" con el bus I¬≤C con fuentes de alimentaci√≥n, nada deber√≠a interferir con la conexi√≥n de algo m√°s a JPI2C.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© conector: BL o BLS?</font></font></b><div class="spoiler_text">        MP3,    4- <i></i>,  CD-   . ,   <i></i>      <nobr>BLS-4</nobr>,   CD-          <i></i>,     . , ,       <i></i>     BL-04F,          .  MP3     ,  <i></i>       ...</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© soy yo? </font><font style="vertical-align: inherit;">Adem√°s, el conector JPI2C en las placas Super Miron se ve exactamente como el conector de audio en una unidad de CD antigua, solo tiene 5 pines en lugar de 4. JPI2C incluir√° un </font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLS-5</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simple de una fila </font><font style="vertical-align: inherit;">, pero es mejor tener un conector con una clave de polaridad f√≠sica tipo </font></font><b><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BL-05F</font></font></nobr></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cuando trabaje con una placa base ya instalada en la carcasa, ser√° demasiado f√°cil cometer un error. </font><font style="vertical-align: inherit;">Ahorra tu tiempo.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lazo universal</font></font></b><div class="spoiler_text"><img width="300" height="238" align="left" src="https://habrastorage.org/files/34f/8f4/335/34f8f4335b8a4b4bafd78c86b3b5ba78.JPG">     ¬´¬ª 40- ,     <i></i>    .     ,    , ..   .        <nobr>BLS-1</nobr> M-F, M-M  F-F.   aliexpress: ¬´dupont cable¬ª.</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabajando con dispositivos I¬≤C desde la l√≠nea de comando</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conect√© un sensor BMP180, una vez comprado en aliexpress, a JPI2C. </font><font style="vertical-align: inherit;">Al principio, nada sali√≥ de eso. </font><font style="vertical-align: inherit;">El direccionamiento en su conjunto tambi√©n estaba perplejo, y el argumento de </font></font><code>bus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elegir un autob√∫s no est√° claro de cu√°ntos. </font><font style="vertical-align: inherit;">Pero luego hice un script para iterar (escanear) los buses y comparar el resultado de su trabajo antes de conectar el BMP180 y despu√©s. </font><font style="vertical-align: inherit;">Con el X9SCM-F, el sensor se detect√≥ inmediatamente en el bus n. ¬∞ 3 en las direcciones </font></font><code>0xee</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>0xef</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(vea el comentario a continuaci√≥n). </font><font style="vertical-align: inherit;">Ser√° necesario reorganizar el JI2C1 / JI2C2 a la posici√≥n ENABLE y ver si de repente las tarjetas PCIe responden ...</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ipmiscan.sh</font></font></b><div class="spoiler_text">      ,  -  progress bar  ,       (0, 1, 2  3).  bash 3.0+.<pre><code class="bash hljs"><span class="hljs-meta"><span class="hljs-meta">#!/bin/bash
</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> bus <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 0 1 2 3; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>
        <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Bus <span class="hljs-variable"><span class="hljs-variable">$bus</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> {16..238..2}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>
                <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span> -v args <span class="hljs-string"><span class="hljs-string">"i2c bus=%d 0x%02x 0x01"</span></span> <span class="hljs-variable"><span class="hljs-variable">$bus</span></span> <span class="hljs-variable"><span class="hljs-variable">$i</span></span>
                <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span> <span class="hljs-string"><span class="hljs-string">" 0x%02x"</span></span> <span class="hljs-variable"><span class="hljs-variable">$i</span></span>
                ipmitool <span class="hljs-variable"><span class="hljs-variable">$args</span></span> 2&gt;/dev/null &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"(bus </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$bus</span></span></span><span class="hljs-string">)"</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>
        <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El script enumera solo las direcciones pares y no toca las </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reservadas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En I¬≤C, el bit menos significativo es un signo de lectura-escritura: cada dispositivo parece ocupar dos direcciones (lectura impar, escritura par). Art√≠culo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID pregunta frecuente 9492</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> me confundi√≥, porque las encuestas solo par. Pero en el caso de </font></font><code>ipmitool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">leer o escribir, no est√° determinado por la direcci√≥n, sino por el contexto del comando, ¬øverdad? La importante </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">especificaci√≥n IPMI 2.0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pone todo en su lugar: el bit menos significativo de la direcci√≥n en el comando Master Read-Write ( </font></font><code>0x06 0x52</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) generalmente </font><font style="vertical-align: inherit;">est√° </font><font style="vertical-align: inherit;">reservado y debe restablecerse (igual a cero). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sensor BMP180, conectado al JPI2C en el X9SCM-F, respondi√≥ a (bus = 3) en la direcci√≥n </font></font><code>0xee</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(y </font></font><code>0xef</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aunque esto es lo mismo). Es decir la direcci√≥n l√≥gica del dispositivo result√≥ ser</font></font><code>0x77</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como deber√≠a estar en la hoja de datos (Bosch tom√≥ la direcci√≥n superior de 8 bits). Mi error inicial fue buscar el BMP180 en una direcci√≥n IPMI sin procesar </font></font><code>0x77</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, esto no es cierto, para IPMI solo necesita multiplicar la direcci√≥n l√≥gica I¬≤C por dos (desplazar un bit a la izquierda). Cuando se trabaja con I¬≤C, este es el error m√°s com√∫n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El autob√∫s I¬≤C que cuelga as√≠ no es interesante en el aire, mucho menos en un vac√≠o esf√©rico. </font><font style="vertical-align: inherit;">Una plataforma conocida a pedido del "sensor i2c" ofrecer√° a un lector respetado una amplia gama de sensores ya vinculados a minitarjetas. </font><font style="vertical-align: inherit;">Por lo general, todo lo que queda es soldar el peine de contacto, para esto hay suficiente deseo y un soldador de 30W con soldadura y fundente, no se requieren habilidades. </font><font style="vertical-align: inherit;">Para probar la teor√≠a, decid√≠ medir la temperatura con el sensor BMP180, pero result√≥ ser un poco m√°s complicado de lo que pensaba: el sensor es un ejemplo de un dispositivo con estado complejo, y ser√≠a m√°s correcto decir "extraer lecturas de temperatura y presi√≥n de un medidor de precisi√≥n teniendo en cuenta los coeficientes de calibraci√≥n". </font><font style="vertical-align: inherit;">Pero primero, todav√≠a rendimos homenaje al vendedor respetado.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuentes de alimentaci√≥n de telemetr√≠a</font></font></b><div class="spoiler_text"> ,    .. , ,          :       ,  ,           ,     ,  .       IPMI,         .  DIY                 .<br>
<br>
 <b>Andrew Grekhov</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>       ,    ,   .  ,   ,           .  ,       <code>ipmitool</code>      ,   -H, -U  -P,   <code><nobr>raw 0x06 0x52 0x07</nobr></code>      <code><nobr>i2c bus=3</nobr></code>, ¬´¬ª   , .   Master Read-Write  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> IPMI</a>.<br>
<br>
   <b>Andrew Grekhov</b>,          (  ) .  ,     PMBus,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>  . .  PMBus     SMBus    ,   SMBus,   ,   I¬≤C.  ,            PMBus.        PMBus  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>,   :    ?  ,   .<br>
<br>
,   ,     (),    , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PMBus rev 1.1</a>.    ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.pmbus.org</a>,        PMBus Specification Part II Rev. 1.1.     , .  26   APPENDIX I. Command Summary.  , ,  - 0x78 (STATUS_BYTE), 0x88 (READ_VIN), 0x89 (READ_IIN), 0x95 (READ_FREQUENCY)  :        ,      .    26,     (Read Byte  Read Word)    .    ,       byte  word?<br>
<br>
  :      I¬≤C    0x30 (COEFFICIENTS),     SMBus?  ,   -    ,   ..     ,      SMBus      0x30    2,          (0x88  READ_VIN)   ,       .        1 + 5 + 1    <i>m</i>, <i>B</i>  <i>R</i>,       .   ‚Äî ,  ‚Äî PEC ( ). ..    ,      SMBus  I¬≤C, ,  :<br>
<br>
<pre><code class="bash hljs">ipmitool i2c bus=3 0x70 0x07 0x30 0x02 0x88 0x01</code></pre><br>
      <code><nobr>0x30 0x02 0x88 0x01</nobr></code>     <code>0x70</code>,    ‚Ññ3,      7  (    ,   ,   PEC).        (   <code>0x78</code>,   ‚Äî  ),   7     6 ( PEC).   -      , ,    production,      :)    ,         ,    .</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medici√≥n de temperatura con BMP180</font></font></b><div class="spoiler_text"><img width="200" height="200" align="left" src="https://habrastorage.org/files/ab5/0cc/82d/ab50cc82d6814350887749017115c4f1.jpg"> BMP180    .       ,        IPMI- <code>0xee</code>       .     BMP180 stateful-, ..    ( ..     ).  BMP180  BMP085,   ‚Äî BMP280,    .<br clear="all">
     ,      ,   .        <code>0x2e</code>   <code>0xf4</code>:<br>
<br>
<pre><code class="bash hljs">ipmitool i2c bus=3 0xee 0x00 0xf4 0x2e</code></pre><br>
 <code>0x00</code> ,        <code>0xee</code>,     .   4.5   16-  UT (¬´ ¬ª)   <code>0xf6</code>  :<br>
<br>
<pre><code class="bash hljs">ipmitool i2c bus=3 0xee 0x02 0xf6</code></pre><br>
     <code>0xf6</code>   <code>0xee</code> (..  <code>0x77</code>,  BMP180),       .  IPMI Master Write-Read     stateful-.<br>
<br>
   UT  <code>0x6a 0x48</code>,    27208 (.. -  27¬∞C  ¬´¬ª ,      BMP180, , ).   UT  <code>0x8000</code>,   ,     .<br>
<br>
       :     AC5, AC6, MC  MD   <code>0xb2, 0xb4, 0xbc</code>  <code>0xbe</code>, ,    <i></i>   (,   !).<br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>X</mi><mn>1</mn><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>U</mi><mi>T</mi><mo>&amp;#x2212;</mo><mi>A</mi><mi>C</mi><mn>6</mn><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#xB7;</mo><mi>A</mi><mi>C</mi><mn>5</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>15</mn></mrow></msup></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.533ex" height="3.037ex" viewBox="0 -950 12715.8 1307.5" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-58" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-31" x="852" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-3D" x="1630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-28" x="2687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-55" x="3076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-54" x="3844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-2212" x="4770" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-41" x="5771" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-43" x="6522" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-36" x="7282" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-29" x="7783" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-22C5" x="8394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-41" x="8895" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-43" x="9645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-35" x="10406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-2F" x="10906" y="0"></use><g transform="translate(11407,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-35" x="500" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>X</mi><mn>1</mn><mo>=</mo><mo stretchy="false">(</mo><mi>U</mi><mi>T</mi><mo>‚àí</mo><mi>A</mi><mi>C</mi><mn>6</mn><mo stretchy="false">)</mo><mo>¬∑</mo><mi>A</mi><mi>C</mi><mn>5</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>15</mn></mrow></msup></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">X1=(UT-AC6)¬∑AC5/2^{15}</script></p><br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>X</mi><mn>2</mn><mo>=</mo><mi>M</mi><mi>C</mi><mo>&amp;#xB7;</mo><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>11</mn></mrow></msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mo stretchy=&quot;false&quot;>(</mo><mi>X</mi><mn>1</mn><mo>+</mo><mi>M</mi><mi>D</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.488ex" height="3.037ex" viewBox="0 -950 12265.8 1307.5" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-58" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-32" x="852" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-3D" x="1630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-4D" x="2687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-43" x="3738" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-22C5" x="4721" y="0"></use><g transform="translate(5222,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-31" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-2F" x="6530" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-28" x="7030" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-58" x="7420" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-31" x="8272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-2B" x="8995" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-4D" x="9996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-44" x="11047" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-29" x="11876" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>X</mi><mn>2</mn><mo>=</mo><mi>M</mi><mi>C</mi><mo>¬∑</mo><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>11</mn></mrow></msup><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mo stretchy="false">(</mo><mi>X</mi><mn>1</mn><mo>+</mo><mi>M</mi><mi>D</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2">X2=MC¬∑2^{11}/(X1+MD)</script></p><br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>B</mi><mn>5</mn><mo>=</mo><mi>X</mi><mn>1</mn><mo>+</mo><mi>X</mi><mn>2</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.15ex" height="2.211ex" viewBox="0 -772.3 6523 952" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.417ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-42" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-35" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-3D" x="1537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-58" x="2594" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-31" x="3446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-2B" x="4169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-58" x="5170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-32" x="6022" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>B</mi><mn>5</mn><mo>=</mo><mi>X</mi><mn>1</mn><mo>+</mo><mi>X</mi><mn>2</mn></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3">B5=X1+X2</script></p><br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>T</mi><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>B</mi><mn>5</mn><mo>+</mo><mn>8</mn><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><msup><mn>2</mn><mn>4</mn></msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>10</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.34ex" height="3.174ex" viewBox="0 -1009.3 8757.4 1366.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-3D" x="982" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-28" x="2038" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMATHI-42" x="2428" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-35" x="3187" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-2B" x="3910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-38" x="4911" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-29" x="5411" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-2F" x="5801" y="0"></use><g transform="translate(6301,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-34" x="707" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-2F" x="7255" y="0"></use><g transform="translate(7756,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/400729/&amp;usg=ALkJrhgYQyetNy5x2Br0C9qHKdcKWY91gA#MJMAIN-30" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>T</mi><mo>=</mo><mo stretchy="false">(</mo><mi>B</mi><mn>5</mn><mo>+</mo><mn>8</mn><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><msup><mn>2</mn><mn>4</mn></msup><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>10</mn></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4">T=(B5 + 8)/2^4/10</script></p><br>
<br>
    10, ..       .        <i>  </i>,      ,     15      11  . ,      ,            <code>0xf4</code>. ?  ,   :)<br>
<br>
   <b>41j</b>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>.</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPIO</font></font></b><div class="spoiler_text"><img width="300" height="278" align="left" src="https://habrastorage.org/files/f44/adf/b7b/f44adfb7be3544f89ce78626ac54bbfb.JPG">       ,  ,   ,          .  BMP180    I¬≤C     8-  GPIO   PCF8574AT.<br>
 ,  PCF8574A (   PCF8574)     <code>0x38</code> ( PCF8574  <code>0x20</code>),        .  ,  , -      8 ,         .        8 ,   64  GPIO.   , .   I¬≤C   .</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I¬≤C Switch</font></font></b><div class="spoiler_text"><img width="300" height="213" align="left" src="https://habrastorage.org/files/062/0b8/71c/0620b871c4984efea9f0f5ecb03c7a4e.JPG"> ,       BMP180,    <code>0x77</code> (.. <code>0xee</code>)  ?      ,   (),       TCA9548A     -  ,    .  ()   8  ,        . <s>       ,          GPIO,     .</s>    : -     I¬≤C SDA  SCL,     .  , ,   8   BMP180,     c    A0-A2      <code>0x70</code> (. <code>0xe0</code>   <code>ipmitool</code>).   A0=A1=A2=1      <code>0x77</code>, , ,    BMP180. ,   TCA9548A,    I¬≤C    56   -.        ,      .  , ,       .</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limitaciones</font></font></h4><br><font style="vertical-align: inherit;"></font><code>ipmitool(1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realic√© </font><font style="vertical-align: inherit;">
todos los experimentos usando el comando </font><font style="vertical-align: inherit;">v1.8.15 trabajando a trav√©s de la interfaz de host (kernel) de FreeBSD 10. Si usa este comando en scripts, tendr√° que analizar su salida, adem√°s, stderr, no stdout. Evito espec√≠ficamente los analizadores en este art√≠culo. Estar√≠a agradecido si alguno de los lectores compartiera </font><font style="vertical-align: inherit;">bibliotecas </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">probadas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para trabajar con IPMI a trav√©s de la interfaz de host en lenguajes de script populares (perl, Python), al menos en modo de comando sin procesar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque</font></font><code>ipmitool(1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y puede funcionar a trav√©s de una red (623 / tcp), cuando el host en el JPI2C est√° apagado, no hay energ√≠a en espera, el bus est√° desenergizado. No intent√© alimentar los sensores por separado e interrogarlos a trav√©s de la interfaz de red IPMI con el host apagado. Pero si necesita sensores aut√≥nomos conectados a la red, es mejor usar un dispositivo de placa √∫nica, por ejemplo, el mismo Raspberry Prog (lo siento, llam√© a Raspberry Pi en mi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre c√≥mo proteger las tarjetas microSD del desgaste prematuro al cambiar al sistema de archivos de solo lectura).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ya se mencion√≥, el m√©todo descrito aqu√≠ sin un microcontrolador externo pr√°cticamente elimina la reacci√≥n a las interrupciones por eventos externos, a excepci√≥n de la se√±al "falla de la fuente de alimentaci√≥n". </font><font style="vertical-align: inherit;">Te√≥ricamente, una se√±al de falla de energ√≠a puede generar un evento SNMP, pero no lo he probado. </font><font style="vertical-align: inherit;">Y aqu√≠ nuevamente quiero decir: si se necesitan interrupciones de los sensores, entonces necesitamos un microcontrolador o, en el peor de los casos, una placa √∫nica dedicada. </font><font style="vertical-align: inherit;">C√©sar es C√©sar.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manejo de conflictos I¬≤C</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si no hay una fuente de alimentaci√≥n "nativa" en el bus I¬≤C, gracias a Dios hay menos problemas. Pero si aparece una fuente de alimentaci√≥n "nativa" con una interfaz I¬≤C en el sistema, en teor√≠a no est√° prohibido conectar otros dispositivos en paralelo, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">despu√©s de haber montado el</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adaptador correspondiente. ¬øQu√© pasar√° en este caso? Si todos los dispositivos est√°n ubicados en sus direcciones, no deber√≠a ocurrir nada malo hasta que el host decida </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controlar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> estrictamente </font><font style="vertical-align: inherit;">la fuente de alimentaci√≥n. Si no sabe lo que est√° haciendo, lim√≠tese a leer. A juzgar por la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID de pregunta frecuente 9492</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , las fuentes de alimentaci√≥n (simple, doble, triple) se encuentran en direcciones l√≥gicas </font></font><code>0x38, 0x39, 0x3a, ...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(son direcciones IPMI divididas por la mitad).</font></font><br>
<br>
<img width="209" height="241" align="left" src="https://habrastorage.org/files/e66/b36/5f5/e66b365f54d548bca3726e6f4458dd30.png"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tengo una teor√≠a con respecto a IPMI y su papel en el acceso a I¬≤C: si todos los comandos de escritura solo seleccionan un registro para la lectura posterior, entonces cada interacci√≥n con el dispositivo encaja en un comando de escritura-lectura maestro de IPMI. Desde la muy pesada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">especificaci√≥n de IPMI 2.0,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le recomiendo que lea el p√°rrafo 22.11, que describe este comando. Seg√∫n tengo entendido, una </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el bus I¬≤C es leer o escribir una secuencia de bytes en una sola direcci√≥n. Pero la especificaci√≥n IPMI con el comando Master Write-Read introduce algo m√°s: un par de operaciones de escritura-lectura, conveniente para los sensores, se asemeja a una </font><i><font style="vertical-align: inherit;">transacci√≥n</font></i><font style="vertical-align: inherit;"> completa</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adem√°s, IPMI estipula la longitud m√°xima del b√∫fer (aproximadamente 30 bytes). Tambi√©n supongo que (a) el BMC es siempre el dispositivo principal en el bus I¬≤C y (b) el BMC tiene un mecanismo de bloqueo incorporado, es decir √©l no intentar√° tomar el autob√∫s de s√≠ mismo en medio de la transacci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Asumiendo que el comando IPMI Master Write-Read (de dos operaciones) es de hecho una transacci√≥n indivisible, el BMC hace m√°s que solo mostrar I¬≤C: es un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complemento transaccional</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobre I¬≤C, adem√°s con un host o interfaz de red. </font><font style="vertical-align: inherit;">En otras palabras, resulta ser algo as√≠ como una pila de protocolos primitivos de 4 niveles para trabajar con sensores I¬≤C a trav√©s de la interfaz IPMI, que me atrev√≠ a dibujar. </font><font style="vertical-align: inherit;">Si a un lector respetado no le gust√≥ la imagen, imagine que soy un artista y veo el mundo as√≠, tenga en cuenta esencialmente, por favor :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, el bus SMBus, adem√°s de contactos adicionales, difiere de I¬≤C precisamente en modo por lotes, y la </font><font style="vertical-align: inherit;">operaci√≥n de escritura / lectura se </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en √©l </font><font style="vertical-align: inherit;">Bloque </font><font style="vertical-align: inherit;">Pero esto ya es parte del protocolo del bus SMBus en s√≠, IPMI en este caso desempe√±ar√≠a el papel de un simple contenedor operativo, en lugar de un complemento transaccional. </font><font style="vertical-align: inherit;">Sin embargo, las longitudes m√°ximas de bloque en las especificaciones IPMI y SMBus son tan similares que supongo una conexi√≥n directa entre ellas, sin siquiera profundizar en el tema.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seguridad</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un BMC conectado a una red inform√°tica es un servidor y es potencialmente vulnerable. </font><font style="vertical-align: inherit;">Es por eso que, por ejemplo, es necesario fortalecer las medidas de seguridad en la consola del sistema operativo "local", que a trav√©s del KVM virtual est√° de hecho expuesto a la red. </font><font style="vertical-align: inherit;">El firmware antiguo de los controladores BMC Super Miron contiene una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vulnerabilidad</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desagradable </font><font style="vertical-align: inherit;">, por lo que la operaci√≥n deber√≠a comenzar con la actualizaci√≥n del firmware BMC (adem√°s del BIOS).</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Control de clima con retroalimentaci√≥n</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algunos fabricantes traen la idea colgante, por as√≠ decirlo, en el aire de enfriamiento con retroalimentaci√≥n directamente al culto, bastante en polvo por el marketing con un velo de secreto:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Culto de Kobzar</font></font></b><div class="spoiler_text">   , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>:<br>
<blockquote>In some ways, Corsair Link is one of our best kept secrets. It had a very rocky start, but continued and continuing development has turned it into an extremely useful combination of hardware and software. It allows you to connect several products within our ecosystem to a software-based control panel, but there's so much more to it than that.</blockquote><br>
,      ,       , ,    ,      . ,   <i></i>         <i></i>   .<br>
<br>
,   Corsair Link Commander Mini    USB HID,       SMBus,     ¬´¬ª    PMBus,    .            SMBus,        0x98 (PMBUS_REVISION).    ,  .  PMBus                  .         ,      ,  (  )     .<br>
<br>
,     ¬´¬ª       community-   ,    .   ,     , ..   .  , , .</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras tanto, la comunidad no permanece:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recetas populares</font></font></b><div class="spoiler_text"> <b>Kevin Horton</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>  FreeNAS          Perl.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>  .         ,   -, ,  X10   .       ,      SMART.      ,   .   .<br>
<br>
         X9 (socket 1155)   :   X9SCL/X9SCM <s>   </s>       ¬´¬ª  ¬´¬ª    BIOS     (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>). , IPMI  ...</div></div><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></b><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternativas a IPMI I¬≤C - Convertidores de interfaz</font></font></h4><br>
 ,     I¬≤C     ?    USB- I¬≤C/SMBus,    USB HID.<br>
<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">x893</a>     -: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CP2112</a> - Silicon Labs  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MCP2221A</a> - Microchip.    ,     ¬´A¬ª       460  115.       ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CP2112EK</a>   $40,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ADM00559</a>   MCP2221    . ,    / ,          .<br>
<br>
,    ,  USB   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  </a>,    USB HID        .      : ,    HID,    ,   CDC, ..  COM-.   USB HID <i></i>      .         ,   ,   Python.      USB HID, Microchip     Linux,     .     ,       :)</blockquote><br>
<br>
<h4></h4><br>
<ul>
<li>         I¬≤C,    IPMI.</li>
<li>  ¬´ ¬ª    I¬≤C- (, , GPIO),        .</li>
<li> ,         I¬≤C-  ,  IPMI.</li>
<li>BMC-,   IPMI,  <i> </i>  I¬≤C     Master Write-Read,      .</li>
<li>             ,  -        .</li>
<li>          PMBus,     I¬≤C/SMBus.</li>
</ul><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><blockquote>Intelligent Platform Management Interface Specification v2.0<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.intel.com/content/dam/www/public/us/en/documents/product-briefs/second-gen-interface-spec-v2.pdf</a><br>
<br>
IPMItool<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sourceforge.net/projects/ipmitool</a><br>
<br>
I¬≤C Bus (   telos)<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.i2c-bus.org</a><br>
<br>
System Management Bus (SMBus) description<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.smbus.org/specs/smbdef.htm</a><br>
<br>
PMBus, Power Management Bus<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pmbus.org</a><br>
<br>
FreeNAS, Enterprise-Grade Features, Open Source, BSD Licensed<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.freenas.org</a><br>
<br>
SGPIO, Serial General Purpose Input/Output <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.wikipedia.org/wiki/SGPIO</a><br>
<br>
SuperMicro FAQ ID 9242, Monitoring of PSU using IPMITool<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.supermicro.com/support/faqs/faq.cfm?faq=9492</a><br>
<br>
LM25056, System Power Measurement IC with PMBus<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.ti.com/product/LM25056</a><br>
<br>
PCF8574A, Remote 8-Bit I/O Expander for I2C-Bus<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.ti.com/product/PCF8574A</a><br>
<br>
TCA9548A, Low-Voltage 8-Channel I2C Switch With Reset<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.ti.com/product/TCA9548A</a><br>
<br>
BMP180, Barometric Pressure Sensor<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.bosch-sensortec.com/bst/products/all_products/bmp180</a><br>
<br>
 , BMP180 Barometric Pressure Sensor<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">41j.com/blog/2015/01/bmp180-barometric-pressure-sensor</a><br>
<br>
 ,       .  SuperMicro ( X8)<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">3nity.ru/viewtopic.php?p=135736#p135736</a><br>
<br>
 FreeNAS, Script to control fan speed in response to hard drive temperatures<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">forums.freenas.org/index.php?threads/script-to-control-fan-speed-in-response-to-hard-drive-temperatures.41294</a><br>
<br>
Computer Cheese, IPMI Messaging Support commands, <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">computercheese.blogspot.com/2013/05/ipmi-messaging-support-commands.html</a><br>
<br>
Corsair Link<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.corsair.com/en/support/faqs/corsair-link</a><br>
<br>
EEVblog Electronics Community Forum<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.eevblog.com/forum/chat/corsair-link</a><br>
</blockquote></div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es400729/">https://habr.com/ru/post/es400729/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es400717/index.html">11 incubadoras inusuales para startups de blockchain</a></li>
<li><a href="../es400719/index.html">Mercado desconocido C√≥mo intercambiar art√≠culos en el juego se ha convertido en una esfera multimillonaria</a></li>
<li><a href="../es400723/index.html">C√≥mo atrapar delincuentes en la Web profunda</a></li>
<li><a href="../es400725/index.html">WeChat total o dominio del comercio electr√≥nico</a></li>
<li><a href="../es400727/index.html">Comparaci√≥n de Google Home y Amazon Alexa</a></li>
<li><a href="../es400731/index.html">Impresi√≥n 3D con metales: tecnolog√≠as e impresoras</a></li>
<li><a href="../es400733/index.html">Anti-smartphone es una forma f√°cil de deshacerse de la adicci√≥n a los tel√©fonos inteligentes. Viernes post</a></li>
<li><a href="../es400735/index.html">De la tierra a la luna. Historia y matem√°tica. Parte 2</a></li>
<li><a href="../es400737/index.html">Los cient√≠ficos han encontrado una conexi√≥n entre abuso y honestidad</a></li>
<li><a href="../es400739/index.html">M√©dicos suizos crean un marcapasos aut√≥nomo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>