<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏽 👨‍👨‍👦 👧🏻 Kami membuat aplikasi desktop asli lintas platform di Angular 👸🏿 ♂️ 🎸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seperti yang mungkin sudah Anda ketahui, Angular sudah ada di banyak platform: 


- Ionic ( https://ionicframework.com/ ) 
- NativeScript ( https://ww...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami membuat aplikasi desktop asli lintas platform di Angular</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480396/"><p><img src="https://habrastorage.org/getpro/habr/post_images/f3f/72b/000/f3f72b000ad7efa23f81443c177b5209.png" alt="angular-nodegui"></p><br><p>  Seperti yang mungkin sudah Anda ketahui, Angular sudah ada di banyak platform: </p><br><ul><li>  Ionic ( <a href="https://ionicframework.com/" rel="nofollow">https://ionicframework.com/</a> ) </li><li>  NativeScript ( <a href="https://www.nativescript.org/" rel="nofollow">https://www.nativescript.org/</a> ) </li><li>  NestJs ( <a href="https://nestjs.com/" rel="nofollow">https://nestjs.com/</a> ) </li><li>  Universal ( <a href="https://github.com/angular/universal" rel="nofollow">https://github.com/angular/universal</a> ) </li><li>  Platform-terminal, aplikasi konsol ( <a href="https://github.com/Tibing/platform-terminal" rel="nofollow">https://github.com/Tibing/platform-terminal</a> ) </li></ul><br><p>  Yah, tentu saja, tidak ada cukup desktop di sini (jangan bicara tentang Electron). </p><a name="habracut"></a><br><p> Untuk membuat aplikasi desktop, ada banyak solusi menggunakan templat, misalnya, solusi seperti JavaFx, Qt, WPF.  Semuanya, kecuali yang terakhir, adalah cross-platform. </p><br><p>  Tetapi bagaimana jika kita ingin menggunakan kerangka kerja yang sudah dikenal dan membuat aplikasi asli di atasnya?  Sebenarnya, itulah yang saya lakukan. </p><br><p>  Untuk memulainya, saya melihat apa yang saat ini tersedia, dan apa yang mungkin telah dilakukan di bawah Angular. </p><br><blockquote>  Sebenarnya, dengan cara ini saya ingin menunjukkan bahwa Anda dapat melakukan apa saja pada Angular, dan saya telah melakukan segala macam <a href="https://gist.github.com/irustm/b0de33afa58dfb4ca1c0791dab051929" rel="nofollow">hal selama</a> beberapa tahun berturut-turut. </blockquote><br><h2 id="poisk">  Cari </h2><br><h3 id="libui-node">  libui-node </h3><br><p>  Ini adalah pustaka GUI yang ringan dan portabel yang memanfaatkan fitur asli GUI untuk setiap platform yang didukungnya.  Itu datang sebagai alternatif untuk Elektron. </p><br><p>  Contoh aplikasi sederhana: </p><br><pre><code class="plaintext hljs">const win = new libui.UiWindow('Test window', 800, 600, false);</code> </pre> <br><p>  Di bawah tenda, ia memiliki pengikat libui sederhana.  (Libui: perpustakaan GUI portabel untuk C).  Semua ini dilakukan melalui node-gyp, sebuah utilitas yang dirancang untuk mengkompilasi ekstensi asli untuk Node.js.  libui-node mencakup lebih dari 30 komponen yang sudah jadi, yah, dan jika Anda tiba-tiba memutuskan untuk membuat sesuatu yang kustom, Anda perlu menyelami kode dalam C. Dan selain itu, komponen itu sendiri ditulis 2 tahun yang lalu, dan sejak itu diperbarui.  Mungkin semuanya begitu baik sehingga tidak perlu melakukan perubahan, dan 30 komponen ini cukup untuk pengembangan, baik, atau tidak ada yang membutuhkan proyek sama sekali. </p><br><p>  Sebenarnya, aplikasi yang sudah selesai mungkin terlihat seperti ini: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/770/479/1d6/7704791d6885a578edae404b43de415a.png" alt="libui-node">  <em>libui-node</em> </p><br><h3 id="proton-native-i-vuido">  <strong>Pribumi proton dan Vuido</strong> </h3><br><p>  Dan ini dia sedikit lebih menarik, asli proton dan vuido adalah libui-node yang sama, hanya di bawah React and Vue.  Pembungkus yang sesuai ditulis di bawah komponen libui-node.  Meskipun jumlah bintang di github (9k dan 6k), proyek-proyek tersebut ditinggalkan, dan hampir tidak ada yang menggunakannya.  Dari semua yang saya dapat temukan, ini adalah aplikasi yang sangat sederhana.  Masalah lain yang saya <a href="https://github.com/mimecorg/vuido/issues/62" rel="nofollow">temukan</a> adalah masalah dengan kustomisasi UI itu sendiri, tidak mungkin untuk melakukannya dalam libui, dan penulis proyek sedang mempertimbangkan untuk menulis ulang semuanya di Qt. </p><br><blockquote>  Libui sendiri cukup populer untuk menulis semua jenis binding, penggemar bahkan menyeretnya dalam <a href="https://github.com/krakjoe/ui" rel="nofollow">php</a> </blockquote><p>  Aplikasi yang sudah selesai mungkin terlihat seperti ini: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b45/454/19a/b4545419a7f7cec8ec108b31ce712696.png" alt="Asli proton">  <em>Asli proton</em> </p><br><p>  Antarmuka yang agak membosankan tanpa penyesuaian, sehingga opsi ini segera menghilang. </p><br><h2 id="a-mozhet-vzyat-qt">  Atau mungkin menggunakan Qt? </h2><br><h3 id="qt-js-css">  Qt, js, css </h3><br><p>  Tentu saja Anda mendengar tentang Qt, dan fakta bahwa itu dapat ditemukan di mana-mana, tetapi tidak banyak yang mendengar bahwa itu sekarang terintegrasi dengan Javascript di luar kotak.  QML memungkinkan konstruksi deklaratif antarmuka pengguna menggunakan binder properti dan, dengan demikian, memperluas kemampuan elemen QML yang ada.  Tentu saja, ini adalah Javascript yang lebih ketat daripada di web.  Anda dapat menulis sesuatu yang mirip dengan ES5 menggunakan objek QML, tetapi Anda tidak akan memiliki DOM API. </p><br><p>  Hanya catatan singkat, bagaimana Anda menulis dalam Qt di bawah C ++: </p><br><pre> <code class="plaintext hljs">#include &lt;QApplication&gt; #include &lt;QPushButton&gt; int main(int argc, char *argv[]) { QApplication app(argc, argv); *// Important * QPushButton hello("Hello world!"); hello.resize(100, 30); hello.show(); return app.exec(); *// Important *}</code> </pre> <br><p>  Seperti apa kode Anda dalam Qml: </p><br><pre> <code class="plaintext hljs">Item { function factorial(a) { a = parseInt(a); if (a &lt;= 0) return 1; else return a * factorial(a - 1); } MouseArea { anchors.fill: parent onClicked: console.log(factorial(10)) } }</code> </pre> <br><p>  Komponen-komponen ini dapat dibuat secara dinamis. </p><br><p>  QML juga memiliki sistem <a href="https://doc.qt.io/qt-5/qmltypes.html" rel="nofollow">tipe</a> besar, yang pasti akan berguna ketika mendefinisikan semua ini dalam naskah. </p><br><p>  Anda juga dapat dengan mudah menyesuaikan komponen: </p><br><pre> <code class="plaintext hljs">Reactangle { id: redRectId width: 50 color: red }</code> </pre> <br><p>  Hampir seperti CSS, bukan? </p><br><p>  Yang masih harus ditambahkan adalah apa yang dapat dilakukan Qt pada kebanyakan platform. </p><br><h2 id="a-nam-by-esche-nodejs">  Dan kita akan memiliki Node.js </h2><br><p>  Saat mencari "nodejs + qt", kami akan segera mendapatkan <a href="https://github.com/arturadib/node-qt" rel="nofollow">node-qt</a> , tetapi segera menarik perhatian bahwa produk telah lama mati, dan terakhir kali menunjukkan tanda-tanda kehidupan 8 tahun yang lalu. </p><br><p>  Namun demikian, dalam pencarian Anda dapat menemukan proyek yang sangat baru - NodeGui. </p><br><h3 id="nodegui">  NodeGui </h3><br><p>  Seperti banyak perpustakaan untuk Gui, Qt menggunakan loop acara / pesannya untuk memproses acara dari widget.  Oleh karena itu, ketika kami memanggil app.exec (), Qt memulai loop pesan dan memblokirnya di sana.  Semua ini baik ketika hanya ada satu loop pesan di seluruh aplikasi.  Tetapi karena kita perlu menggunakan Qt dengan NodeJs, dan yang terakhir juga memiliki loop acara sendiri, tidak mungkin untuk mengintegrasikannya dengan mudah.  Tetapi keputusan seperti itu telah dibuat, misalnya, bundel yang sama dengan Electron atau yode.  Solusi ini memiliki kekhasan sendiri, mereka meningkatkan setidaknya 2 proses - untuk utas utama, dan untuk penyaji.  Meskipun demikian, pendekatan ini memiliki keuntungan yang signifikan, tidak perlu memodifikasi NodeJs atau Chromium. </p><br><p>  Dalam kasus NodeGui, situasinya sedikit berbeda, ada satu proses untuk semuanya, dan dengan demikian, tidak perlu meleset peristiwa antara proses.  Nodejs bercabang dua untuk ini - dan perbaikan kecil dilakukan untuk pengikat yang diperlukan di Qt.  Dan sekarang Anda perlu memulai proses tidak seperti mainnj mainnode, tetapi qode main.js.  Untungnya, qode diterbitkan sebagai modul npm di paket @ nodegui / qode.  Untuk memulai dunia halo sederhana, Anda perlu menginstal beberapa paket lagi, untuk detail lebih lanjut untuk setiap OS yang dapat Anda lihat di situs web resmi: <a href="https://docs.nodegui.org/docs/guides/getting-started" rel="nofollow">https://docs.nodegui.org/docs/guides/getting-started</a> </p><br><p>  Secara default, di nodegui, semuanya adalah widget, dan mereka dapat dipasangi berbagai templat.  Saat ini ada 2 jenis template di nodegui: FlexLayout dan QGridLayout. </p><br><p>  <strong>Gaya dalam Nodegui</strong> </p><br><p>  Saat ini, Anda dapat mengatur gaya untuk widget baik inline maupun melalui styleSheet. </p><br><pre> <code class="plaintext hljs">widget.setInlineStyle(`color: green`) view.setStyleSheet(` `#helloLabel { color: red; padding: 10px; } #worldLabel { color: green; padding: 10px; } #rootView { background-color: black; } `);</code> </pre> <br><p>  Qt secara default mendukung semua penyeleksi CSS2 ( <a href="https://doc.qt.io/qt-5/stylesheet-syntax.html" rel="nofollow">https://doc.qt.io/qt-5/stylesheet-syntax.html#selector-types</a> ) </p><br><p>  Itu juga tidak dilakukan tanpa properti khusus untuk komponen penataan gaya.  Untungnya, properti seperti itu sudah dijelaskan di dok Qt dan dikunyah di stackoverflow. </p><br><pre> <code class="plaintext hljs">*QPushButton* { qproperty-iconsize: 20px 20px; }</code> </pre> <br><h2 id="angular">  Sudut </h2><br><blockquote>  Penulis proyek telah menerapkan dukungan untuk bereaksi, tetapi tentu saja, semua orang lupa tentang keberadaan Angular. </blockquote><p>  Seperti yang sudah ditulis di awal, Angular dapat melakukan sebagian besar platform, tetapi sejauh ini belum ada platform untuk desktop.  Karena API Angular yang dirancang dengan baik dan terstruktur, implementasi nodegui di bawah Angular bermula untuk menulis platformBrowserDynamic kustom dengan Renderer dan menggantinya dalam aplikasi. </p><br><p>  <strong>Tapi bagaimana cara kerjanya dari dalam ke luar?</strong> </p><br><p>  Kami memiliki main.ts bersyarat, dan kami akan mulai dengan itu. </p><br><p>  Proses boot terdiri dari dua bagian: membuat platform dan melemparkan modul awal ke dalamnya. </p><br><pre> <code class="plaintext hljs">platformBrowserDynamic().bootstrapModule(AppModule);</code> </pre> <br><p>  Melalui createPlatformFactory, kami dapat membuat benar-benar semua platform yang Anda butuhkan.  Bagi kami, ini berarti bahwa kami tidak ingin bekerja dengan DOM yang biasa, dan sebagai tambahan kami akan membahas deskripsi skema interaksi elemen ketika bekerja dengan render.  Informasi lebih lanjut tentang membuat platform dapat ditemukan di sumber. </p><br><p>  Pada modul awal, kami menjelaskan komponen mana yang akan di-render terlebih dahulu.  Saat membuat instance komponen, Angular memanggil <code>renderComponent</code> dan, mengaitkannya dengan render yang diinginkan yang diterimanya, dengan instance komponen itu.  Segala sesuatu yang akan dilakukan Angular mengenai rendering komponen (membuat elemen, mengatur atribut, berlangganan acara, dll.) Akan melalui renderer ini.  Oleh karena itu, kita perlu mengganti RendererFactory. </p><br><p>  Pertama-tama, di Renderer kami akan tertarik dengan metode createElement.  Dalam metode ini, kita mendapatkan nama tag, dan dari sana kita perlu membuat komponen yang diinginkan.  Untungnya, nodegui memiliki satu set komponen dasar, yang saya teliti dengan hati-hati dan menjelaskan bagaimana mereka akan dirender dalam kerangka Angular, melemparkan semuanya ke direktori komponen umum.  Tindakan lain dengan komponen standar juga akan melewati penyaji ini.  <a href="" rel="nofollow">Lebih detail</a> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/cee/24b/6ef/cee24b6ef9d13815c2640dc6dc80c5dd.png" alt="[https://blog.nrwl.io/†(https://blog.nrwl.io/)">  <em><a href="https://blog.nrwl.io/" rel="nofollow">https://blog.nrwl.io/</a></em> </p><br><p>  Untuk mendengarkan acara di renderer, nama acara dilemparkan, dan untuk komponen ini kita menggantung eventListener yang biasa. </p><br><pre> <code class="plaintext hljs">listen(target: any, eventName: string, callback: (event: any) =&gt; boolean | void): () =&gt; void { const callbackFunc = (e: NativeEvent) =&gt; callback.call(target, e); target.addEventListener(eventName, callbackFunc); return () =&gt; target.removeEventListener(eventName, callbackFunc); }</code> </pre> <br><p>  Peristiwa komponen persis sama dengan Qt, misalnya, alih-alih yang biasa <code>(click)=”clickFunc($event)”</code> Anda harus menulis <code>(clicked) = ”clickFunc($event)”</code> . </p><br><p>  Saat ini 16 komponen standar tersedia.  Tetapi jika Anda perlu menulis komponen khusus Anda, maka selalu ada peluang untuk melakukan ini melalui QWidget. </p><br><p>  Router juga dibuat untuk membuat aplikasi kita serapat mungkin dengan Angular. </p><br><pre> <code class="plaintext hljs">const appRoutes: Routes = [ { path: 'home', component: HomeComponent }, { path: 'about', component: AboutComponent } ]; // AppModule imports ... NodeguiRouterModule.forRoot(appRoutes),</code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/342/601/fdc/342601fdc2e1966941b62b6344ff0199.png" alt="Aplikasi nodegui sudut"><br>  <em>Aplikasi nodegui sudut</em> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/102/1bf/dc7/1021bfdc7072181099313790edfdc408.png" alt="aplikasi cuaca"><br>  <em>aplikasi cuaca</em> </p><br><h2 id="sobiraem-v-prod">  Kami mengumpulkan dalam prod </h2><br><p>  Untuk membangun aplikasi yang sudah jadi, nodegui memiliki paket sendiri - <code>@nodegui/packer.</code> </p><br><p>  Utilitasnya sangat sederhana, sejauh ini terdiri dari 2 tim. </p><br><p>  <em>npx nodegui-packer - init myapp</em> </p><br><p>  Perintah ini akan membuat folder pengemasan yang berisi templat.  Anda dapat mengubah konten untuk menambahkan ikon, mengubah nama, deskripsi, dan informasi aplikasi lainnya, serta menambahkan dependensi yang diperlukan. </p><br><p>  <em>npx nodegui-packer - pack</em> <br></p><p>  Perintah ini meluncurkan alat yang diperlukan untuk pengemasan (misalnya, macdeployqt untuk mac) dan mengemas dependensi. </p><br><h2 id="v-zaklyuchenie">  Kesimpulannya </h2><br><p>  Sebagai kesimpulan, saya ingin membandingkan hasilnya dengan solusi web lain di desktop (hasil peluncuran di bawah Mac OS). </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ba5/cec/b59/ba5cecb59da4212fed93ef4d22bc55e2.png" alt="ukuran unduhan">  <em>ukuran unduhan</em> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/1a0/aeb/2be/1a0aeb2bec9bc454066d7ded783e3bdb.png" alt="penggunaan memori">  <em>penggunaan memori</em> </p><br><br><p>  Tautan ke proyek: <br>  <a href="https://github.com/irustm/angular-nodegui" rel="nofollow"><strong>irustm / angular-nodegui</strong></a> <a href="https://github.com/irustm/angular-nodegui" rel="nofollow"><br></a>  <a href="https://github.com/irustm/angular-nodegui" rel="nofollow">* Bangun aplikasi desktop berkinerja tinggi, asli dan lintas platform dengan Angular.</a>  <a href="https://github.com/irustm/angular-nodegui" rel="nofollow">NodeGUI Angular didukung oleh Angular</a> </p><br><p>  Informasi tentang proyek: <br>  <a href="https://t.me/ngFanatic" rel="nofollow">https://t.me/ngFanatic</a> </p><br><p>  Informasi tentang proyek open source saya <br>  <a href="https://twitter.com/irustm" rel="nofollow">https://twitter.com/irustm</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id480396/">https://habr.com/ru/post/id480396/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id480386/index.html">Auto-backup peralatan jaringan dan penyimpanannya dalam sistem kontrol versi</a></li>
<li><a href="../id480388/index.html">Konferensi HACKTIVITY 2012. Teori Big Bang: Evolusi Pentesting dalam Peningkatan Keamanan. Bagian 1</a></li>
<li><a href="../id480390/index.html">ONYX BOOX Livingstone - pembaca format populer dalam desain yang tidak biasa</a></li>
<li><a href="../id480392/index.html">Konferensi HACKTIVITY 2012. Teori Big Bang: Evolusi Pentesting dalam Peningkatan Keamanan. Bagian 2</a></li>
<li><a href="../id480394/index.html">Entri akuntansi duplikat dalam database relasional</a></li>
<li><a href="../id480398/index.html">9 tips JavaScript yang sangat berguna</a></li>
<li><a href="../id480400/index.html">Apakah Kubernetes Linux baru? Wawancara dengan Pavel Selivanov</a></li>
<li><a href="../id480402/index.html">Bagaimana p̶е Androidр Tв̶ы̶й̶ mitap Android kedua dari Tinkoff</a></li>
<li><a href="../id480404/index.html">Mikrotik dan Linux. Rutin dan Otomasi</a></li>
<li><a href="../id480408/index.html">52 dataset untuk proyek pelatihan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>