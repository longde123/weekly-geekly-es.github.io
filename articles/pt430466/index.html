<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëî üö∂üèø üõçÔ∏è Mini AI Cup # 3: Escrevendo um Top Bot ‚úâÔ∏è ‚ôÇÔ∏è üë©‚Äçüîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No in√≠cio do outono, a competi√ß√£o para escrever bots Mini AI Cup # 3 (tamb√©m conhecida como Mad Cars) foi conclu√≠da, na qual os participantes tiveram ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mini AI Cup # 3: Escrevendo um Top Bot</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/430466/"><p><img src="https://habrastorage.org/webt/uk/nd/_2/uknd_2qxbi4b0qt85hqcoxgvt7i.png"></p><br><p>  No in√≠cio do outono, a competi√ß√£o para escrever bots <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mini AI Cup # 3</a> (tamb√©m conhecida como Mad Cars) foi conclu√≠da, na qual os participantes tiveram que lutar em carros.  Os participantes discutiram muito sobre o que vai funcionar e o que n√£o vai funcionar, id√©ias foram expressas e testadas desde simples ifs at√© o treinamento de redes neurais, mas os principais lugares foram ocupados pelos caras com a chamada "simula√ß√£o".  Vamos tentar descobrir o que √©, comparar solu√ß√µes para o 1¬∫, 3¬∫ e 4¬∫ lugares e discutir outras solu√ß√µes poss√≠veis. </p><a name="habracut"></a><br><h1 id="diskleymer">  Isen√ß√£o de responsabilidade </h1><br><p>  O artigo foi escrito em colabora√ß√£o com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Alexei Dichkovsky (Commandos)</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Vladimir Kiselev (Valdemar)</a> . </p><br><p>  Para quem quer apenas ler sobre as decis√µes dos vencedores, aconselho que comece imediatamente com o item ‚ÄúSimula√ß√£o‚Äù. </p><br><h1 id="postanovka-zadachi">  Declara√ß√£o do problema </h1><br><p> Desta vez, a mec√¢nica do mundo era muito parecida com o jogo m√≥vel Drive Ahead: os jogadores receberam um carro com um bot√£o localizado;  a tarefa √© pressionar o bot√£o do inimigo mais r√°pido do que ele.  Se ningu√©m vence em 600 ticks de jogo, o cart√£o come√ßa a afundar em uma pilha de lixo, que tamb√©m pode pressionar um bot√£o.  Em outras palavras, voc√™ precisa proteger seu bot√£o dos inimigos, do mundo ao seu redor e montes de lixo (vitalmente, sim).  Cada jogador recebeu 5 vidas, o jogo passou de 5 para 9 rodadas, enquanto algu√©m n√£o acabou com suas vidas.  Cada rodada foi realizada em um mapa aleat√≥rio e carros, o mesmo para os dois participantes.  No total, havia 6 cartas diferentes e 3 tipos de carros - um total de 18 combina√ß√µes diferentes. </p><br><p> Cada rodada √© dividida em carrapatos.  Um carrapato √© uma jogada, como no xadrez.  A √∫nica diferen√ßa √© que os dois jogadores v√£o ao mesmo tempo.  Existem competi√ß√µes em que todos se revezam, ou voc√™ pode executar uma a√ß√£o apenas uma vez a cada poucos movimentos e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">selecionar unidades como um quadro</a> . <br>  Cada tick para o bot chega a um estado de paz e tem a oportunidade de realizar tr√™s a√ß√µes: <code></code> , <code></code> , <code></code> .  Essas a√ß√µes fazem o carro seguir uma das dire√ß√µes e, ao mesmo tempo em que n√£o toca nas rodas da terra, eles d√£o uma pequena rota√ß√£o ao corpo inteiro (um pouco da f√≠sica dos fliperamas).  Depois que os dois oponentes escolhem uma a√ß√£o, uma simula√ß√£o do mundo do jogo √© iniciada, um novo estado √© considerado e enviado aos jogadores.  Se algu√©m clicar em um bot√£o, a rodada termina e a pr√≥xima come√ßa.  Tudo √© simples, mas h√° nuances. </p><br><p>  Regras mais completas podem ser encontradas <a href="">aqui</a> .  E veja os jogos finais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><h1 id="obschee-opisanie-resheniya">  Descri√ß√£o geral da solu√ß√£o </h1><br><p>  A maioria das competi√ß√µes de cria√ß√£o de bots √© muito semelhante: h√° um n√∫mero finito de ticks (h√° cerca de 1.500 no m√°ximo por uma rodada), h√° um n√∫mero finito de a√ß√µes poss√≠veis, voc√™ precisa escolher uma sequ√™ncia de a√ß√µes para ser melhor que seus oponentes.  Um pouco mais tarde, retornaremos ao que significa ser melhor, mas, por enquanto, descobriremos como lidar com o problema principal - um grande n√∫mero de op√ß√µes: no in√≠cio, temos um estado inicial, ent√£o cada m√°quina pode se mover de tr√™s maneiras diferentes, o que nos d√° 9 combina√ß√µes diferentes para dois carros, pelo 1500¬∫ movimento ser√£o 9 ^ 1500 combina√ß√µes diferentes ... O que √© um pouco mais do que gostar√≠amos se planej√°ssemos resolv√™-los durante a exist√™ncia do Universo. </p><br><p>  Aqui chegamos ao que <strong>√© simula√ß√£o</strong> .  Este n√£o √© um tipo de algoritmo, mas simplesmente uma recria√ß√£o das regras do jogo com precis√£o suficiente ou completa, para que seja poss√≠vel classificar as solu√ß√µes.  Obviamente, n√£o analisaremos todas as solu√ß√µes, mas apenas parte delas.  Um algoritmo de busca ser√° usado para isso - na √°rvore de estados do jogo, estamos procurando o melhor para n√≥s.  Existem muitos algoritmos (do minimax ao MCTS), cada um com suas pr√≥prias nuances.  √â melhor se familiarizar com as decis√µes que os participantes das competi√ß√µes anteriores de IA escreveram.  Isso fornecer√° um entendimento b√°sico de quais condi√ß√µes os algoritmos funcionam e em que condi√ß√µes n√£o.  Existem muitos links para isso em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio especial</a> . </p><br><p>  Ao escolher um algoritmo, voc√™ deve considerar: </p><br><ul><li>  prazo para 1 tick (aqui eu calculei mal este ano, mas consegui ficar em 3¬∫ lugar); </li><li>  n√∫mero de jogadores.  Por exemplo, se houver tr√™s jogadores, ser√° dif√≠cil usar o minimax; </li><li>  precis√£o da simula√ß√£o, como  isso pode permitir a reutiliza√ß√£o de c√°lculos antigos; </li><li>  ‚ÄúRamifica√ß√£o‚Äù da √°rvore de estados (√© poss√≠vel calcular todos os estados poss√≠veis pelo menos 10 passos adiante); </li><li>  bom senso - n√£o comece a escrever o MCTS se a competi√ß√£o durar 4 horas. </li></ul><br><p>  Nesta competi√ß√£o, 1 tick deu 10-13ms (2 minutos para o jogo inteiro).  Durante esse per√≠odo, o bot teve que ler os dados, tomar uma decis√£o e enviar um comando para se mover.  Isso foi suficiente para estimular cerca de 500-1000 movimentos.  Iterar sobre todos os estados.  O algoritmo de pesquisa mais simples pode parecer uma compara√ß√£o de tr√™s op√ß√µes de movimento: "50 ticks v√£o para a esquerda", "50 ticks v√£o para a direita", "50 ticks clicam em parar".  E, por mais simples que pare√ßa, n√£o est√° muito longe da decis√£o do vencedor. </p><br><p>  Porque  contamos apenas 50 movimentos √† frente, o que na maioria dos casos n√£o conta at√© o final do jogo, precisamos de <strong>uma fun√ß√£o de avalia√ß√£o</strong> que diga como √© bom e ruim o estado do mundo para n√≥s.  Na maioria das vezes, ele se baseia em heur√≠sticas e na compreens√£o do que √© importante para a vit√≥ria.  Por exemplo, na competi√ß√£o da Copa da AI russa de 2014, havia corridas, mas voc√™ poderia ganhar se chegasse por √∫ltimo, se obtiver mais pontos de b√¥nus.  Portanto, a fun√ß√£o de classifica√ß√£o deve estimular a coleta de pontos ao mesmo tempo que o movimento r√°pido ao longo da rodovia.  A pontua√ß√£o s√≥ pode ser calculada para o √∫ltimo estado da simula√ß√£o (ap√≥s 50 ticks) ou como a soma das estimativas dos estados intermedi√°rios.  Freq√ºentemente, a estimativa "diminui" no tempo, para que os estados que ocorrem mais cedo sejam mais influenciados.  Porque  n√£o podemos com certeza prever o inimigo, ent√£o √© menos prov√°vel que op√ß√µes futuras aconte√ßam, n√£o dependeremos muito delas.  Al√©m disso, essa t√©cnica torna o bot mais r√°pido para concluir suas tarefas e n√£o adiar tudo para mais tarde.  Mas vale a pena notar que o bot correr√° menos riscos por causa dos benef√≠cios subsequentes. </p><br><p>  Como vamos prever o estado do mundo em resposta √†s nossas a√ß√µes, precisamos modelar o comportamento dos inimigos.  N√£o h√° nada complicado e existem algumas op√ß√µes comuns: </p><br><ul><li>  <strong>Esbo√ßo ou heur√≠stica</strong> <br>  Uma l√≥gica simples de comportamento √© escrita onde o inimigo simplesmente n√£o faz nada ou escolhe a√ß√µes com base em heur√≠sticas simples (por exemplo, voc√™ pode usar suas primeiras vers√µes da estrat√©gia ou simplesmente repetir o movimento anterior do oponente). </li><li>  <strong>Use o mesmo algoritmo que voc√™ mesmo</strong> <br>  Primeiro, tentamos encontrar as melhores a√ß√µes para o inimigo (contra o nosso melhor conjunto de a√ß√µes desde o √∫ltimo movimento ou contra um esbo√ßo) e depois procuramos a melhor a√ß√£o para n√≥s mesmos, usando o comportamento que o inimigo encontrou.  Aqui o bot tentar√° resistir a inimigos complicados.  Essa l√≥gica n√£o funciona bem no in√≠cio da competi√ß√£o, porque  muitos bots ainda s√£o muito fracos e sua decis√£o ser√° muito cautelosa com eles. </li><li>  <strong>Outros</strong> <br>  O mesmo minimax repete todos os movimentos dos jogadores ao mesmo tempo, e ele simplesmente n√£o precisar√° de heur√≠sticas. </li></ul><br><p>  Se voc√™ implementar todas as etapas acima, provavelmente obter√° um bot muito bom, especialmente se voc√™ conseguir uma boa fun√ß√£o de classifica√ß√£o.  Mas, olhando atrav√©s de suas lutas, voc√™ pode ver que em certas situa√ß√µes ele se comporta de maneira estranha.  A corre√ß√£o da fun√ß√£o de avalia√ß√£o para essas situa√ß√µes pode ser dif√≠cil ou existe um grande risco de quebrar outra l√≥gica.  Aqui muletas e ifs v√™m em socorro.  Sim, os √∫ltimos dias da competi√ß√£o geralmente se resumem a escrever muletas e ifs para corrigir as falhas em quaisquer condi√ß√µes espec√≠ficas.  Pessoalmente, eu realmente n√£o gosto dessa parte, mas notei mais de uma vez que s√£o muletas nas finais que podem afetar a organiza√ß√£o dos lugares entre os dez primeiros, o que significa que um n√£o-escrito se pode custar um pr√™mio (meu cora√ß√£o d√≥i quando escrevo essas palavras, Eu tamb√©m amo belos algoritmos e solu√ß√µes). </p><br><p>  <strong>P: √â poss√≠vel fazer sem simula√ß√£o?</strong> <br>  <em>R: Sim, voc√™ pode usar solu√ß√µes em heur√≠sticas (√°rvores de decis√£o, v√°rios ifs etc.).</em>  <em>H√° um bom <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> com arquiteturas de IA sobre heur√≠sticas.</em> </p><br><p>  <strong>P: Quanto melhor o uso da simula√ß√£o do que as abordagens heur√≠sticas?</strong> <br>  <em>A: Tudo depende da tarefa.</em>  <em>Por exemplo, aqui algumas combina√ß√µes de cartas e carros podem ser codificadas com ifs e sempre vencer (ou empatar).</em>  <em>No entanto, muitas vezes a simula√ß√£o encontra solu√ß√µes dif√≠ceis de pensar por si mesmo ou dif√≠ceis de implementar heur√≠sticas.</em>  <em>Nesta competi√ß√£o, quando voc√™ vira outra m√°quina, as decis√µes nas simula√ß√µes colocam sua roda na roda do inimigo, que apaga a bandeira "no ar", o que significa que o inimigo n√£o pode aplicar a rota√ß√£o do corpo e voltar as rodas.</em>  <em>Mas a decis√£o n√£o pensou no significado disso, apenas encontrou op√ß√µes em que o inimigo cairia mais r√°pido no telhado e pressionaria o bot√£o dele.</em> </p><br><p><img src="https://habrastorage.org/webt/in/i4/wk/ini4wk8qqxl7dfzdzlcegwpmyyq.gif"></p><br><p>  <strong>P: Redes neurais e RL?</strong> <br>  <em>R: Por mais popular que seja, nas competi√ß√µes de bot essas solu√ß√µes raramente t√™m bom desempenho.</em>  <em>Embora as redes neurais n√£o precisem de simula√ß√£o, porque</em>  <em>eles podem simplesmente emitir uma a√ß√£o com base nos par√¢metros de entrada do estado atual, ainda precisam aprender alguma coisa e, para isso, muitas vezes precisam criar um simulador para conduzir milhares de jogos localmente.</em>  <em>Pessoalmente, acredito que eles t√™m potencial.</em>  <em>Talvez eles possam resolver parte do problema ou us√°-lo em condi√ß√µes de tempo de resposta muito limitado.</em> </p><br><p>  <strong>Nota</strong> <br>  <em>Em rela√ß√£o ao n√∫mero finito de a√ß√µes poss√≠veis, vale esclarecer que √†s vezes √© permitido "suavemente" ajustar algum par√¢metro.</em>  <em>Por exemplo, n√£o apenas avance, mas com alguma porcentagem de energia.</em>  <em>Nesse caso, a ‚Äúfinitude‚Äù do n√∫mero de conclus√µes pode ser facilmente alcan√ßada simplesmente usando v√°rios valores, por exemplo, 0%, 25%, 50%, 75% e 100%.</em>  <em>Na maioria das vezes, apenas dois s√£o suficientes: "totalmente ligado" e "completamente desligado".</em> </p><br><h1 id="simulyaciya">  Simula√ß√£o </h1><br><p>  Nesta competi√ß√£o, usamos o mecanismo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">f√≠sico de esquilo</a> pronto.  As expectativas dos organizadores eram de que ele era velho, testado pelo tempo e tem muitos inv√≥lucros para que todos possam inclu√≠-lo em sua decis√£o ... </p><br><p>  Na dura realidade, o mecanismo produzia valores diferentes a cada vez, o que dificultava o rein√≠cio para calcular as op√ß√µes de movimentos.  O problema foi resolvido "de frente" - um alocador de mem√≥ria foi escrito em C e um peda√ßo de mem√≥ria com o estado do mundo foi completamente copiado.  Esse alocador p√¥s fim √† capacidade de escrever solu√ß√µes em idiomas diferentes do C ++ (na verdade, era poss√≠vel, mas com muito trabalho e um alocador ainda teria que ser escrito em C).  Al√©m disso, a precis√£o da previs√£o foi influenciada pela ordem de adicionar elementos ao mundo do jogo, o que exigiu uma c√≥pia muito precisa do c√≥digo que os organizadores usavam para calcular os jogos.  Mas ele j√° estava em Python.  O √∫ltimo destaque no caix√£o de outras linguagens de programa√ß√£o foi que o mecanismo √© antigo e cont√©m muitas otimiza√ß√µes que n√£o podem ser recriadas com precis√£o durante a competi√ß√£o para obter sua pr√≥pria vers√£o reduzida da simula√ß√£o de f√≠sica. </p><br><p>  Como resultado, o mecanismo, que deveria dar a todos os participantes condi√ß√µes iguais para simular movimentos, tornou-se o obst√°culo mais dif√≠cil para isso.  Mais de 10 pessoas foram capazes de super√°-lo.Os primeiros 7 lugares na tabela de classifica√ß√£o foram ocupados exclusivamente pelos caras que fizeram a simula√ß√£o exata, o que pode servir como prova de sua import√¢ncia em tais competi√ß√µes. </p><br><p>  Com exce√ß√£o de alguns participantes que foram capazes de entrar no esquilo e otimizar a c√≥pia de seu estado, o resto teve uma simula√ß√£o de aproximadamente o mesmo desempenho (o que tornou a competi√ß√£o um pouco mais interessante, porque voc√™ sabe que a luta √© pelo algoritmo de decis√£o, n√£o "quem conta mais os movimentos"). </p><br><h1 id="algoritm-poiska-i-predskazanie-protivnika">  Algoritmo para pesquisar e prever um advers√°rio </h1><br><p>  A partir deste ponto, uma descri√ß√£o separada das solu√ß√µes come√ßa.  Os algoritmos ser√£o descritos em nome de seu autor. </p><br><h3 id="vladimir-kiselev-valdemar-4-mesto">  Vladimir Kiselev (Valdemar) 4¬∫ lugar </h3><br><p>  Uma pesquisa aleat√≥ria (Monte Carlo) foi usada para pesquisar o espa√ßo da solu√ß√£o.  O algoritmo √© o seguinte: </p><br><ol><li>  Inicializamos o genoma - uma sequ√™ncia de a√ß√µes (esquerda, direita, parada) para 60 ticks - dados aleat√≥rios. </li><li>  Pegue o melhor genoma encontrado </li><li>  Alterar aleatoriamente uma das a√ß√µes </li><li>  Usando a fun√ß√£o de avalia√ß√£o, obtemos um n√∫mero - um indicador de qu√£o bom √© o novo genoma </li><li>  Se voc√™ obtiver uma solu√ß√£o melhor, atualize a melhor solu√ß√£o. </li><li>  Repita novamente da etapa 2 </li></ol><br><p>  Meu simulador produziu ~ 100k simula√ß√µes do mundo em 1 segundo, considerando que h√° uma m√©dia de ~ 12ms por tick, obtemos 1200 a√ß√µes por tick.  Ou seja, em 1 tick, conseguimos realizar o ciclo completo cerca de 20 vezes. </p><br><p>  Para encontrar a solu√ß√£o ideal, esse n√∫mero de itera√ß√µes claramente n√£o foi suficiente.  Portanto, a id√©ia com a√ß√µes de ‚Äúalongamento‚Äù foi implementada: em vez de um genoma de 60 movimentos, operaremos com uma cadeia de 12 movimentos ‚Äúalongados‚Äù - acreditamos que cada a√ß√£o dura 5 tiques seguidos. <br>  Mais: Melhorando a qualidade das muta√ß√µes reduzindo o comprimento do genoma, a simula√ß√£o tamb√©m pode ser executada a cada 5 carrapatos e checar 100 genomas em vez de 20 (para evitar quedas no limite de tempo, eventualmente interrompido aos 70). <br>  Menos: a√ß√µes de alongamento podem levar a solu√ß√µes n√£o ideais (por exemplo, girar no para-choque, em vez de um rack est√°vel) </p><br><p>  Deve-se notar as t√©cnicas que melhoraram significativamente a qualidade do algoritmo: </p><br><ul><li>  Realizamos a inicializa√ß√£o aleat√≥ria apenas no primeiro tick, e no restante do tempo reutilizamos a melhor solu√ß√£o encontrada com um turno de 1 movimento (a a√ß√£o no 2¬∫ tick √© deslocada para o 1¬∫, etc., uma a√ß√£o aleat√≥ria √© adicionada ao final).  Isso melhora muito a qualidade da pesquisa, porque, caso contr√°rio, o algoritmo "esquece" o que ele faria no √∫ltimo tique e faz solavancos sem sentido em dire√ß√µes diferentes. </li><li>  No in√≠cio do curso, fazemos altera√ß√µes mais intensivas (alteramos o genoma 2 ou 3 vezes em vez de uma) na esperan√ßa de quebrar o m√°ximo local (semelhan√ßa de temperatura no m√©todo de simula√ß√£o do recozimento). <br>  A intensidade foi selecionada manualmente: as primeiras 30 itera√ß√µes produzem 3 muta√ß√µes, as pr√≥ximas 10 por 2 e depois 1. </li><li>  Muito importante √© a previs√£o de a√ß√µes inimigas.  Em detrimento do tempo para procurar nossa pr√≥pria solu√ß√£o, lan√ßamos uma pesquisa aleat√≥ria do lado do oponente, com 20 itera√ß√µes e depois 50 para n√≥s mesmos, usando informa√ß√µes sobre os movimentos ideais do oponente. <br>  A melhor decis√£o do oponente tamb√©m √© reutilizada no pr√≥ximo lance com um deslocamento.  Ao mesmo tempo, ao procurar uma solu√ß√£o para o inimigo, o genoma do √∫ltimo movimento √© usado como minhas a√ß√µes pretendidas. </li></ul><br><p>  Durante a competi√ß√£o, ele usou ativamente ferramentas para o desenvolvimento local, o que tornou poss√≠vel encontrar rapidamente erros e se concentrar nos pontos fracos da estrat√©gia: </p><br><ul><li>  arena local - lan√ßamento de muitas partidas contra a vers√£o anterior; </li><li>  visualizador para comportamento de depura√ß√£o; </li><li>  um script para coletar estat√≠sticas sobre correspond√™ncias do site - permite entender em quais mapas e m√°quinas a derrota ocorre com mais frequ√™ncia. </li></ul><br><blockquote>  <strong>mortido:</strong> <br>  Contar a cada 5 ticks parece arriscado, especialmente se o inimigo estiver se afastando das op√ß√µes que voc√™ previu.  Por outro lado, neste mundo de jogo por 5 ticks, n√£o aconteceu muita coisa. <br>  Al√©m disso, na minha decis√£o, adicionei combina√ß√µes aleat√≥rias a cada tick, mas definitivamente n√£o vou dizer como isso afetou a decis√£o. <br><br>  <strong>Comandos:</strong> <br>  Alterar algumas a√ß√µes com um n√∫mero t√£o grande de simula√ß√µes n√£o parece muito significativo, porque poucas mudan√ßas ocorrem em uma a√ß√£o.  Mas quando voc√™ estica uma a√ß√£o para 5 pontos de significado, ela parece se tornar mais. <br>  Tamb√©m n√£o gosto da ideia em si - pegamos o melhor conjunto e tentamos edit√°-lo em algum lugar no come√ßo.  Parece il√≥gico que a mudan√ßa dos primeiros ticks deixe os subsequentes pelo menos relativamente adequados. </blockquote><br><h3 id="aleksandr-kiselev-mortido-3-mesto">  Alexander Kiselev (mortido) 3¬∫ lugar </h3><br><p>  Armado com artigos de vencedores de outras competi√ß√µes, decidi usar o algoritmo gen√©tico.  Aconteceu, no entanto, algo semelhante a uma pesquisa aleat√≥ria ou mesmo uma imita√ß√£o de recozimento, mas mais sobre isso mais tarde. </p><br><p>  Codificamos a solu√ß√£o com uma matriz de 40 n√∫meros, onde -1, 0 e 1 correspondem aos movimentos <code></code> , <code></code> e <code></code> . </p><br><p>  No in√≠cio de cada rodada, calculei quanto tempo j√° havia gasto durante todo o jogo, contei um novo limite de tempo com base em quantas rodadas ainda haveriam, e cada rodada que presumi ter 1200 ticks.  T.O.  Inicialmente, tentei gastar n√£o mais do que 11ms por turno, mas poderia "andar um pouco" no final se as rodadas anteriores fossem mais r√°pidas que 1200 ticks. </p><br><blockquote>  <strong>Valdemar:</strong> <br>  Curiosamente, esse chip piorou o jogo para mim.  Verificou-se que √© sempre melhor gastar 20-30ms do que 11 primeiro e 60 no final </blockquote><p>  Um ter√ßo desse tempo, eu estava procurando a melhor jogada do inimigo, o resto foi calculado por minha pr√≥pria decis√£o.  Ao procurar uma jogada para o inimigo, meu comportamento foi modelado como o melhor da √∫ltima jogada, alterado em 1 ponto.  I.e.  como se eu continuasse a agir de acordo com o plano elaborado no √∫ltimo tick, e ele estivesse tentando resistir a mim. </p><br><p>  A busca pela solu√ß√£o em si foi a mesma para ela e para o oponente: </p><br><ol><li>  Tomamos a decis√£o da √∫ltima jogada e a alteramos em 1 jogada (o que j√° fizemos) </li><li>  Provamos para a popula√ß√£o de solu√ß√µes aleat√≥rias at√© preenchermos tudo </li><li>  Simulamos todas as decis√µes e ajustamos a adequa√ß√£o usando a fun√ß√£o de avalia√ß√£o.  Lembramos o melhor. </li><li>  Enquanto houver tempo para c√°lculos <br><ol><li>  Dica, sempre adicione 1 muta√ß√£o da melhor solu√ß√£o atual √† popula√ß√£o, lembre-se se for melhor </li><li>  Contanto que haja um lugar na nova popula√ß√£o e o tempo para c√°lculos n√£o tenha sido excedido (voc√™ pode ir no ch√£o de uma popula√ß√£o povoada) <br><ol><li>  Tomamos dois indiv√≠duos diferentes e sa√≠mos com a melhor forma - m√£e </li><li>  Tomamos dois indiv√≠duos diferentes e sa√≠mos com o melhor condicionamento f√≠sico - pai (n√£o deve coincidir com a m√£e) </li><li>  Atravess√°-los </li><li>  <code>RND &lt;  </code> se <code>RND &lt;  </code> </li><li>  Simulamos uma solu√ß√£o e lembramos, se √© a melhor </li></ol></li></ol></li></ol><br><p>  Como resultado, retornaremos a sequ√™ncia de a√ß√µes que √© considerada ideal.  O primeiro movimento √© enviado como uma a√ß√£o de bot.  Infelizmente, houve uma s√©ria desvantagem no meu plano, pois  o n√∫mero de simula√ß√µes que podem ser feitas em um tick foi muito pequeno (inclusive devido √† longa fun√ß√£o de avalia√ß√£o); no servidor da competi√ß√£o, 4 pontos foram realizados apenas 1 vez e, para o inimigo, n√£o foi realizado.  Isso tornou o algoritmo mais parecido com uma pesquisa aleat√≥ria ou um recozimento simulado (desde que conseguimos alterar a solu√ß√£o 1 vez desde a √∫ltima jogada).  J√° era tarde demais para mudar alguma coisa, e conseguimos manter o 3¬∫ lugar. </p><br><p>  √â importante implementar os algoritmos de cruzamento, muta√ß√£o e gera√ß√£o de solu√ß√µes aleat√≥rias iniciais, pois  depende de quais decis√µes ser√£o testadas e uma aleat√≥ria completa n√£o √© t√£o boa quanto parece √† primeira vista (funcionar√°, mas ser√£o necess√°rias muito mais op√ß√µes). </p><br><p>  Na vers√£o final, decis√µes aleat√≥rias foram geradas em segmentos, que exclu√≠ram solu√ß√µes "repuxas" em um s√≥ lugar: </p><br><ol><li>  Equipe aleat√≥ria selecionada </li><li>  Durante todo o comprimento da solu√ß√£o (40 movimentos) <br><ol><li>  Escrevemos o comando atual na c√©lula </li><li>  Com uma probabilidade de 10%, mudamos a equipe atual para uma aleat√≥ria </li></ol></li></ol><br><p>  De acordo com uma tecnologia semelhante, tamb√©m ocorreu uma muta√ß√£o - um segmento aleat√≥rio da solu√ß√£o foi substitu√≠do por um comando aleat√≥rio.  O cruzamento ocorreu escolhendo o ponto em que a decis√£o foi tomada de um dos pais e depois do segundo. </p><br><p>  Gostei que us√°ssemos todo o tempo dispon√≠vel para encontrar a melhor solu√ß√£o.  N√£o √© grande coisa se a solu√ß√£o n√£o √© a melhor - podemos melhor√°-la no pr√≥ximo tick, porque  a otimiza√ß√£o acaba sendo "borrada" a tempo.     ,        .  ,      -  ,    .           ,           </p><br><blockquote> <strong>Valdemar:</strong> <br>   1     , ,             . <br><br> <strong>Commandos:</strong> <br>    ‚Äî   -        . <br>         ‚Äî    ,     .         ,     ‚Ä¶      ,        .    "    ‚Äù.         -. </blockquote><br><h3 id="aleksey-dichkovskiy-commandos-1-mesto">   (Commandos) 1  </h3><br><p>        (  ),   <strong>n</strong>  <strong>m</strong>  .    3^2=9 .       <strong>m</strong> + <strong>n</strong>      40 . </p><br><p>  : </p><br><pre> <code class="plaintext hljs">|----------- n  -----------|---------- m  --------| |   ...   |   ...   |</code> </pre> <br><p>          :     ,  ,  .      (   ). </p><br><p>       <strong>n</strong>  <strong>m</strong> ,          .       ,     . </p><br><p>        : </p><br><ol><li>     ,       (       ,   ): <br><ul><li>   ,     ,   ,     . </li><li>       ,      ,   .           .                .            ,       ,      ,     . </li><li>         .   ;        (           ). </li></ul></li><li>       <strong>n</strong>  <strong>m</strong>  .      ,    .1,      ,          .     -  (    )  ,        ‚Äî        ,      ; </li><li>             .   ,     ‚Äî      .    ,       (       ). </li></ol><br><blockquote> <strong>Valdemar:</strong> <br> ,       2    .    .         ,    . <br><br> <strong>mortido:</strong> <br> !   ,       .    .  ,   2    ,   40-60       .  ,        3   . <br> n + m == const ? </blockquote><p>   .  <code>n + m != const</code> ,              .      ,  .  -   . </p><br><h1 id="funkciya-ocenki">   </h1><br><h3 id="vladimir-kiselev-valdemar-4-mesto-1">   (Valdemar) 4  </h3><br><p>   ,       . ,    (  , ,   ..)    [0..1]. <br>           .     :   ,        . <br>            ,    ,      :      ,          . </p><br><p> ,   : </p><br><ul><li>    ‚Äî    70  180  (  :         ). <br>       ,       . </li><li>       0..500 </li><li>   ‚Äî  [2pi, pi/4]   [0, 1] </li><li>    ‚Äî    ,       (    ),   (  ,      ,        ) </li><li>   ‚Äî ,      ,     ,           . <br>      ,  ,       . </li><li>  ‚Äî     .          . </li><li>     Y   ‚Äî    . </li><li>           </li></ul><br><p>  ,       2           , . </p><br><p>           . </p><br><p>         : </p><br><ul><li>  ‚Äú‚Äù      ,       </li><li>  ‚Äú  ‚Äù        ,   ,        . </li></ul><br><blockquote> <strong>mortido:</strong> <br>    , ..      ,     . <br><br> <strong>Commandos:</strong> <br>      ,      .    -  </blockquote><br><h3 id="aleksandr-kiselev-mortido-3-mesto-1">   (mortido) 3  </h3><br><p>        ,      chipmunk.              .     ,      ,     ,   ,   .        . </p><br><p>                    3   <del>  </del>   . </p><br><p>   ,        ( ,     ,   ): </p><br><ul><li>   .          ,  ,        (       ,     ); </li><li>    ,    ‚Äî       ,     ;      ,     1  ; </li><li>   ; </li><li>      (    ,  ); </li><li>       (   ‚Äú+‚Äù,    ‚Äú-‚Äù); <br> -     (   ‚Äú+‚Äù,    ‚Äú-‚Äù);   ,     ,      ,          ; <br>   30    ,       ,      (   ); </li><li>  ,         . </li></ul><br><p>  ,        ,         (,            ,     ) </p><br><blockquote> <strong>Valdemar:</strong> <br>         .    ,     ‚Äú  ,     ,    ‚Äù     ,      (     ..)     . </blockquote><p>  ,    ,        .    . </p><br><blockquote> <strong>Commandos:</strong> <br>   ,   ,   ‚Äú‚Äù‚Ä¶      ?              ,   ‚Äú‚Äù . </blockquote><br><h3 id="aleksey-dichkovskiy-commandos-1-mesto-1">   (Commandos) 1  </h3><br><p>      <code>SquaredWheelsBuggy</code> ,      ..  ,       .     Buggy   ,          ,          (         /). <br> : </p><br><ol><li>   ; </li><li>     ;         ‚Äî ,     ,   1  0; ..        ; </li><li>     .        ;          10      (            ); </li><li>             (       ,    ); </li><li>     (,          ); </li><li>       ‚Äî -    ,   ; </li><li> /     ;       ,       ‚Äî   ;             . </li></ol><br><p>  1-5      ,   .   2     ‚Äú  ‚Äù. </p><br><blockquote> <strong>Valdemar:</strong> <br>     ,        .       ,      . <br><br> <strong>mortido:</strong> <br>      ,     10 . </blockquote><br><h1 id="kostyli-i-ify">   IF' </h1><br><h3 id="vladimir-kiselev-valdemar-4-mesto-2">   (Valdemar) 4  </h3><br><p>      ,            if'.         3    ,         ,           . ,        ,         -. <br>  :      ,    ‚Äú‚Äù   ‚Äî      ,   - ,           (  ,   ) ‚Äî   . </p><br><p>     : </p><br><ul><li>     .      ,        . </li><li>      ‚Äî     ,                  . </li><li>   .      ‚Äú  ‚Äù      . <br>      ,        ,         . <br>                ,      ,      . </li></ul><br><p>        ,    :     .   ,       ,   if'     . </p><br><blockquote> <strong>mortido:</strong> <br>     ,       .            . <br><br> <strong>Commandos:</strong> <br>   if'.   ,    ,    ‚Ä¶          ,     ,     . </blockquote><br><h3 id="aleksandr-kiselev-mortido-3-mesto-2">   (mortido) 3  </h3><br><p>              - . </p><br><p>     3  .    .         .  ‚Äú‚Äù,                  .        ,      ,    . </p><br><p>          ,     ‚Äú‚Äù   .       .     ,        , ,      -  .        .     ,       , ..    . </p><br><p>    ,      ,  ,     ,           ,       .     ‚Ä¶         .    -       ‚Äî  ,     (      ,     ). </p><br><blockquote> <strong>Valdemar:</strong> <br>    ,     .          .        ‚Äú‚Äù ,       if'.  ,           ‚Äî             . </blockquote><p>          ,       +      . ,       . </p><br><blockquote> <strong>Commandos:</strong> <br>   ‚Ä¶  ,  -   ‚Äî   ,      ,   .        ,     ,                . </blockquote><br><h3 id="aleksey-dichkovskiy-commandos-1-mesto-2">   (Commandos) 1  </h3><br><p>         .      (,     ,    ).         (  )   /. </p><br><p>    pill carcass map        ,       ,             (         ).      island map,      ,     . </p><br><p>             island hole  buggy.    /      ,     ,      (  ).       ‚Äî    .  ,          ,    .   SquaredWheelBuggy           .    ,      ,      ,    .  ,   ‚Ä¶    ,      ,     . </p><br><p>    (Pill map, Bus)                 ,        (     /  100% ). </p><br><p>         pill hubble map.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> (    ),     .       . </p><br><p>               ‚Äî         ,   ... </p><br><p>       ,     .                ,    .          (     ). </p><br><blockquote> <strong>Valdemar:</strong> <br>   ,          ‚Äî        .   ,     . <br><br> <strong>mortido:</strong> <br>     ,     ‚Äú‚Äù  . </blockquote><br><h1 id="emocii">  </h1><br><blockquote> <strong>Valdemar:</strong> <br>     .           ,      .    (   )      . <br>                  .  ‚Äú‚Äù,      ,          , ,  :) <br>  ,  mailru  ,     . <br><br> <strong>mortido:</strong> <br>        :               ,          ‚Ä¶   ,      ,       (      ).     ,     3   ,    ,   ‚Ä¶      . <br><br> <strong>Commandos:</strong> <br> -     ,     . , ,   ,  .    ‚Ä¶       .         ‚Äî     ,      . <br>     ‚Äî       ++.       .       ,       .     1  <del>       </del>     -. </blockquote><br><h1 id="itak">  </h1><br><p> ,           .    ,              .      ,      ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> . </p><br><p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>  Mail.Ru Group   . </p><br><h1 id="bonus">  </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Valdemar</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mortido</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a> </p><br><div class="spoiler"> <b class="spoiler_title"> ,    </b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/bz/b8/cd/bzb8cdwabur3c-7qbcwzmjokx0o.gif"></p><br><p><img src="https://habrastorage.org/webt/tw/nw/cw/twnwcwndcdjglzq2hhuh0ulxohc.gif"></p><br><p><img src="https://habrastorage.org/webt/ib/jh/vq/ibjhvquma8mwq6meckt2qzteicy.gif"></p><br><p><img src="https://habrastorage.org/webt/4e/eg/c9/4eegc9jvtcg-0namubh_9cqx2ok.gif"></p><br><p><img src="https://habrastorage.org/webt/4f/uw/w8/4fuww8dcs4-fx4nuar8bcur0lpm.gif"></p><br><p><img src="https://habrastorage.org/webt/fz/q3/6u/fzq36ufo15jgjwbd9ev_cnc6mso.gif"></p><br><p><img src="https://habrastorage.org/webt/og/55/dt/og55dtgv4ohguhiucwhn0qwqiak.gif"></p></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430466/">https://habr.com/ru/post/pt430466/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430454/index.html">Estou cercado por idiotas ou como trabalhar em equipe</a></li>
<li><a href="../pt430456/index.html">Livros de Gerenciamento de Projetos Legais do PMI</a></li>
<li><a href="../pt430458/index.html">Supercondutor de grafeno multicamada: investiga√ß√£o de zonas planas</a></li>
<li><a href="../pt430460/index.html">Trojan Penguin: Criando um v√≠rus para Linux</a></li>
<li><a href="../pt430462/index.html">Na R√∫ssia, apareceu uma lei sobre o fornecimento de dados de usu√°rios de redes sociais para um c√≠rculo ilimitado de pessoas. Redes sociais contra</a></li>
<li><a href="../pt430468/index.html">Sensibilizar os cidad√£os</a></li>
<li><a href="../pt430470/index.html">Por que manter o contexto na conta do cliente - de maneira honesta e lucrativa</a></li>
<li><a href="../pt430472/index.html">Rede DECT sem costura DIY</a></li>
<li><a href="../pt430474/index.html">CephFS vs GlusterFS</a></li>
<li><a href="../pt430476/index.html">NCBI Genome Workbench: Pesquisa em Perigo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>