<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëèüèΩ üöî ‚õΩÔ∏è Escopo e fechamento lexical do JavaScript üòπ üèì ü§õüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tradu√ß√£o do ambiente JavaScript, Lexical Scope and Closures . 

 Vamos falar sobre o meio ambiente. Nosso enorme planeta √© um por todos. Durante a con...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Escopo e fechamento lexical do JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nix/blog/460861/"><img src="https://habrastorage.org/webt/gt/2d/tm/gt2dtmxt1qpzp2s6vulutjmsqtu.jpeg"><br><br>  <i>Tradu√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ambiente JavaScript, Lexical Scope and Closures</a> .</i> <br><br>  Vamos falar sobre o meio ambiente.  Nosso enorme planeta √© um por todos.  Durante a constru√ß√£o de uma nova f√°brica de produtos qu√≠micos, seria bom isol√°-la para que todos os processos internos n√£o deixem suas fronteiras.  Podemos dizer que o ambiente e o microclima desta planta s√£o isolados do ambiente externo. <br><br>  O programa √© organizado de forma semelhante.  O que voc√™ cria externamente - fun√ß√µes externas, instru√ß√µes condicionais, loops e outros blocos - √© um ambiente global externo. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/5d9/520/99a/5d952099ac1d37fa7363b686d4fb5706.png"><br><br>  A <code>age</code> constante, a fun√ß√£o <code>multiplier</code> e a vari√°vel <code>result</code> est√£o no ambiente externo.  Esses componentes t√™m um escopo global.  Um escopo √© a √°rea na qual um componente est√° dispon√≠vel. <br><br>  Nesse caso, <code>x</code> √© uma constante dentro da fun√ß√£o <code>multiplier</code> .  Como est√° dentro de um bloco de c√≥digo, √© uma constante local, n√£o global.  √â vis√≠vel apenas dentro da fun√ß√£o, mas n√£o fora - seu escopo √© local. <br><br>  A fun√ß√£o <code>multiplier</code> possui outro componente do escopo local - este √© o argumento <code>num</code> .  Defini-lo √© mais dif√≠cil do que uma constante ou vari√°vel, mas se comporta aproximadamente como uma vari√°vel local. <br><br>  N√£o temos acesso externo a <code>x</code> - parece n√£o existir: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8a9/b34/99d/8a9b3499d5d7e8ac27215dd0ddfbc25a.png"><br><br>  <code>console.log</code> chamado <code>x</code> em um ambiente global no qual n√£o est√° definido.  Como resultado, obtivemos um ReferenceError. <br><br>  Podemos definir <code>x</code> globalmente: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/221/2ad/141/2212ad141fba03a6ae359f48c1b5e7f4.png"><br><br>  Temos um <code>x</code> global com um valor conhecido, mas o <code>x</code> local na fun√ß√£o <code>multiplier</code> ainda √© vis√≠vel apenas por dentro.  Esses <code>x</code> n√£o est√£o conectados de forma alguma - eles est√£o em ambientes diferentes.  Apesar do mesmo nome, eles n√£o se misturam. <br><br>  Qualquer bloco de c√≥digo entre chaves se torna um ambiente local.  Aqui est√° um exemplo de uso <code>if</code> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/96f/fa1/b6d/96ffa1b6d175b4a45ef36d5b4c85a53b.png"><br><br>  O mesmo acontece com <code>while</code> e <code>for</code> loops. <br><br>  Ent√£o local significa invis√≠vel do lado de fora.  Ou seja, global √© vis√≠vel em todos os lugares, mesmo dentro de objetos?  Sim <br><br><img src="https://habrastorage.org/getpro/habr/post_images/94d/7b9/076/94d7b907635aae8a948ef28c4bdf7bd3.png"><br><br>  A vari√°vel global <code>a</code> mudou dentro da fun√ß√£o <code>changer</code> .  A fun√ß√£o entra em vigor somente quando chamada, n√£o quando definida; portanto, inicialmente <code>a=0</code> e, quando chamada, o <code>changer</code> assume o valor <code>1</code> . <br><br>  √â f√°cil sucumbir √† tenta√ß√£o e colocar tudo em um escopo global, esquecendo todas as complexidades dos ambientes individuais - mas essa √© uma p√©ssima id√©ia.  Vari√°veis ‚Äã‚Äãglobais tornam seu c√≥digo extremamente fr√°gil, qualquer elemento pode quebrar qualquer outro a qualquer momento.  Portanto, n√£o use o escopo global e mantenha tudo no lugar. <br><br><h2>  Parte II  √Çmbito lexical </h2><br>  D√™ uma olhada neste programa: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/52c/1e0/040/52c1e00405beb67af2a8d5865afd0b97.png"><br><br>  A fun√ß√£o <code>multiplier</code> retorna os resultados da multiplica√ß√£o <code>a</code> e <code>b</code> .  <code>a</code> dado internamente, mas <code>b</code> n√£o <code>b</code> . <br><br>  Ao tentar executar a opera√ß√£o de multiplica√ß√£o <code>a*b</code> , o JavaScript procura os valores de <code>a</code> e <code>b</code> .  Ele come√ßa a procurar dentro e depois sai, estudando uma √°rea ap√≥s a outra, at√© encontrar o que estava procurando ou n√£o entender que √© imposs√≠vel encontrar. <br><br>  Portanto, neste exemplo, o JavaScript come√ßa a procurar dentro da √°rea local - dentro da fun√ß√£o <code>multiplier</code> .  Ele imediatamente encontra o valor e vai para <code>b</code> .  <code>b</code> ele n√£o encontra no ambiente local, ent√£o vai al√©m.  L√° ele aprende que <code>b</code> √© <code>10</code> .  Ent√£o <code>a*b</code> transforma em <code>5*10</code> e depois em <code>50</code> . <br><br>  Esse peda√ßo de c√≥digo pode estar dentro de outra fun√ß√£o, que tamb√©m est√° dentro de outra fun√ß√£o.  Sem encontrar <code>b</code> na primeira camada, o JavaScript continuaria pesquisando tudo em novas e novas camadas, cada vez mais. <br><br>  Observe que <code>a=7</code> n√£o afeta o resultado dos c√°lculos de forma alguma: o valor de <code>a</code> foi encontrado dentro, portanto, o externo <code>a</code> n√£o desempenha <code>a</code> papel. <br><br>  Isso √© chamado de escopo lexical.  O escopo de qualquer componente √© determinado pela localiza√ß√£o desse componente no c√≥digo, e os blocos aninhados t√™m acesso a √°reas externas. <br><br><h2>  Parte III  Curto-circuito </h2><br>  Ambientes e escopos s√£o suportados pela maioria das linguagens de programa√ß√£o, e esse mecanismo permite a introdu√ß√£o de fechamentos.  O fechamento √© inerentemente uma fun√ß√£o que "lembra" entidades externas usadas internamente. <br><br>  Antes de continuar, vamos relembrar como as fun√ß√µes s√£o criadas e usadas: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/913/8ac/6ff/9138ac6ff7157ae64d83b27cb12ec49c.png"><br><br>  <code>f</code> √© uma fun√ß√£o bastante in√∫til que sempre retorna <code>0</code> .  O conjunto consiste em duas partes - uma constante e a pr√≥pria fun√ß√£o. <br><br>  √â importante lembrar que esses s√£o componentes separados.  O primeiro componente √© uma constante chamada <code>f</code> .  Seu valor pode ser um n√∫mero ou um valor de sequ√™ncia.  Nesse caso, o valor √© uma fun√ß√£o. <br><br>  Nas li√ß√µes anteriores, citamos uma analogia: as constantes s√£o como folhas de papel com um nome de um lado e um valor do outro.  Assim, <code>f</code> √© um peda√ßo de papel com <code>f</code> escrito de um lado e uma descri√ß√£o da fun√ß√£o sendo lan√ßada do outro. <br><br>  Ao chamar esta fun√ß√£o: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/839/cf7/58d/839cf758df8d6eda757f5453bd0a5973.png"><br><br>  Uma nova "caixa" √© criada com base na descri√ß√£o de uma folha de papel. <br><br>  De volta aos fechamentos.  Aqui est√° um c√≥digo de exemplo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3d/2e2/70e/c3d2e270e439532af643a25e78427321.png"><br><br>  A fun√ß√£o <code>createPrinter</code> cria uma constante de <code>name</code> e, em seguida, uma fun√ß√£o chamada <code>printName</code> .  Ambos s√£o locais para a fun√ß√£o <code>createPrinter</code> e est√£o dispon√≠veis apenas dentro dela. <br><br>  <code>printName</code> pr√≥prio <code>printName</code> n√£o possui componentes locais, mas h√° acesso ao escopo em que √© criado e ao ambiente externo, onde √© atribu√≠do um <code>name</code> √† constante. <br><br>  A fun√ß√£o <code>createPrinter</code> retorna a fun√ß√£o <code>printName</code> .  Lembre-se de que as defini√ß√µes de fun√ß√£o s√£o descri√ß√µes de fun√ß√µes em execu√ß√£o, s√£o apenas elementos de dados, como n√∫meros ou cadeias.  Portanto, podemos retornar a defini√ß√£o de uma fun√ß√£o da mesma maneira que retornamos n√∫meros. <br><br>  No escopo externo, criamos a constante <code>myPrinter</code> e configuramos o valor de retorno como <code>createPrinter</code> .  Como uma fun√ß√£o √© retornada, o <code>myPrinter</code> tamb√©m se torna uma fun√ß√£o.  Quando voc√™ chama, <code>King</code> aparece na tela. <br><br>  O engra√ßado √© que a constante <code>name</code> foi criada dentro da fun√ß√£o <code>createPrinter</code> .  A fun√ß√£o foi chamada e executada.  Como voc√™ sabe, quando uma fun√ß√£o termina de funcionar, ela deixa de existir.  A caixa m√°gica desaparece junto com todo o conte√∫do. <br><br>  Mas ele retornou outra fun√ß√£o que de alguma forma lembrava o <code>name</code> constante.  Assim, ao chamar <code>myPrinter</code> obtivemos <code>King</code> - o valor que a fun√ß√£o lembra, apesar de essa √°rea n√£o existir mais. <br><br>  A fun√ß√£o que <code>createPrinter</code> retorna √© chamada de fechamento.  Um fechamento √© uma combina√ß√£o de uma fun√ß√£o e o ambiente em que foi definido.  A fun√ß√£o "inclu√≠a" em si certas informa√ß√µes recebidas no escopo. <br><br>  Isso pode parecer uma peculiaridade estranha do JavaScript, mas o uso inteligente de fechamentos pode ajudar a tornar seu c√≥digo mais agrad√°vel, limpo e leg√≠vel.  O princ√≠pio de retornar fun√ß√µes, como retornar n√∫meros e valores de string, oferece mais liberdade de manobra. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt460861/">https://habr.com/ru/post/pt460861/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt460849/index.html">Parte 4. Um modelo de gr√°fico para calcular fun√ß√µes l√≥gicas para processos paralelos ass√≠ncronos</a></li>
<li><a href="../pt460851/index.html">SamsPcbGuide, Parte 10: Tecnologia - Componentes sem solda de chumbo</a></li>
<li><a href="../pt460855/index.html">Como usar o PHP para implementar microsservi√ßos?</a></li>
<li><a href="../pt460857/index.html">Como a pesquisa da Namecoin Blockchain previu ataques cibern√©ticos RTM</a></li>
<li><a href="../pt460859/index.html">Confer√™ncia IThink # 3 em Kharkov - com base na WWDC 2019</a></li>
<li><a href="../pt460863/index.html">Cloudflare crash details 2 de julho de 2019</a></li>
<li><a href="../pt460865/index.html">Pessoas na lua. Fontes</a></li>
<li><a href="../pt460867/index.html">Sourcery para converter automaticamente em estruturas de objetos do Dom√≠nio</a></li>
<li><a href="../pt460869/index.html">Reconhecimento de objetos em tempo real no iOS usando YOLOv3</a></li>
<li><a href="../pt460873/index.html">Por que Turok: Dinosaur Hunter para N64 est√° anos √† frente de seu tempo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>