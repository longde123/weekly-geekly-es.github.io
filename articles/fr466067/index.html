<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüéì üíÇ üîå √âconomiseur d'√©cran enchanteur pour Kodi üë™ üõ£Ô∏è ü§æüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Attribuer un √©conomiseur d'√©cran √† Kodi 
 Le projet est con√ßu pour cr√©er un √©conomiseur d'√©cran "Enchanting" avec une quantit√© minimale de code source...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√âconomiseur d'√©cran enchanteur pour Kodi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466067/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ob/ao/xp/obaoxpyes3hokgu9-el2ra488ya.png" alt="image alt"></div><br><h2>  Attribuer un √©conomiseur d'√©cran √† Kodi </h2><br>  Le projet est con√ßu pour cr√©er un √©conomiseur d'√©cran <strong>"Enchanting"</strong> avec une quantit√© minimale de code source en Python.  Le projet est le plugin le plus simple pour le centre multim√©dia Kodi. <br><br>  Le projet montre comment cr√©er un tr√®s beau √©conomiseur d'√©cran enti√®rement bas√© sur le travail de la communaut√© "OpenSource".  Un projet d'int√©gration, c'est un exemple d'√©criture de deux composants ind√©pendants, chacun prenant environ 80 lignes de code.  Le premier composant est un g√©n√©rateur de contenu, un script shell, le deuxi√®me composant est un plugin Kodi multim√©dia center, qui est responsable de l'affichage du contenu. <br><br>  Et enfin, si vous √™tes un programmeur et utilisez le syst√®me de contr√¥le de version Git, vous pouvez visualiser votre travail, l'√©crire dans un fichier vid√©o et profiter du r√©sultat sur un √©cran de t√©l√©vision ou d'ordinateur, en vous appuyant sur votre chaise avec une tasse de caf√©.  Et lors des fra√Æches soir√©es d'automne, vous pouvez dormir tranquillement sous votre √©conomiseur d'√©cran, sans oublier de r√©gler la minuterie de l'appareil dans Kodi. <br><a name="habracut"></a><br><h2>  Pr√©ambule </h2><br>  <strong>Vous pouvez sans cesse regarder trois choses:</strong> <strong><br></strong>  <strong>comment le feu br√ªle, comment l'eau coule et comment les autres travaillent.</strong> <br><br>  Puisque le plugin est √©crit pour le "Kodi Multimedia Center", je vais donc visualiser le travail de la super √©quipe de "Kodi Programmers". <br><br><h2>  Utiliser des plugins dans Kodi </h2><br>  Le Kodi Multimedia Center est un programme tr√®s puissant et flexible, fonctionnant en conjonction avec la biblioth√®que externe ffmpeg, pour d√©coder les fichiers audio et vid√©o. <br><br>  Pour cr√©er une application tierce, Kodi utilise le m√©canisme d'extension ¬´addons¬ª ou simplement des plug-ins.  Pour cr√©er mon propre plugin, j'ai besoin de quelques comp√©tences et d'un peu de connaissance du langage de programmation Python. <br><br>  Le m√©canisme du plugin Kodi est extr√™mement flexible et pratique.  Python est un langage interpr√©t√©, ce qui signifie que je n'ai pas besoin de compiler quoi que ce soit, de le compiler dans un package logiciel s√©par√©, de souffrir avec des fichiers de construction comme "makefile", etc. <br><br>  Pour la distribution finale du plugin Kodi, il suffit de l'emballer dans l'archive Zip, en respectant certaines r√®gles sur la structure du r√©pertoire.  Ayant la derni√®re archive Zip sous la main, elle peut √™tre install√©e sur n'importe quel appareil sur lequel Kodi fonctionne: un ordinateur, une tablette et enfin un t√©l√©viseur (c'est-√†-dire un tas de TV + une seule plaque), en sp√©cifiant l'archive comme source de plug-in. <br><br><h2>  Structure du plugin Kodi </h2><br><pre> ‚îî‚îÄ‚îÄ screensaver.kodi.universe
     ‚îú‚îÄ‚îÄ README.md
     ‚îú‚îÄ‚îÄ addon.xml
     ‚îú‚îÄ‚îÄ changelog.txt
     ‚îú‚îÄ‚îÄ create.sh
     ‚îú‚îÄ‚îÄ fanart.jpg
     ‚îú‚îÄ‚îÄ icon.png
     ‚îú‚îÄ‚îÄ ressources
     ‚îÇ ‚îú‚îÄ‚îÄ langue
     ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ anglais
     ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ strings.po
     ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ russe
     ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ strings.po
     ‚îÇ ‚îú‚îÄ‚îÄ settings.xml
     ‚îÇ ‚îî‚îÄ‚îÄ peaux
     ‚îÇ ‚îî‚îÄ‚îÄ par d√©faut
     ‚îÇ ‚îú‚îÄ‚îÄ 720p
     ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ kodi-univers.xml
     ‚îÇ ‚îú‚îÄ‚îÄ 1080i
     ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ kodi-univers.xml
     ‚îÇ ‚îî‚îÄ‚îÄ m√©dias
     ‚îÇ ‚îú‚îÄ‚îÄ black.jpg
     ‚îÇ ‚îú‚îÄ‚îÄ buran.jpg
     ‚îÇ ‚îî‚îÄ‚îÄ kodi-univers.mkv
     ‚îî‚îÄ‚îÄ screensaver.py
</pre><br><br><ul><li>  README.md - fichier facultatif, contient une description du projet pour github.com </li><li>  addon.xml - un fichier avec une description du plugin; il contient le type de plugin, l'encodage, la version, les d√©pendances, le nom de l'auteur, etc. </li><li>  changelog.txt - un fichier optionnel avec une liste des modifications du projet </li><li>  create.sh est un fichier facultatif, un script bash est con√ßu pour cr√©er un √©conomiseur d'√©cran d'archive Zip (a) et g√©n√©rer un fichier vid√©o √† partir de l'historique Git √† l'aide de l'outil Gource, le fichier n'a pas de relation avec le plugin Kodi lui-m√™me, il est n√©cessaire pour une distribution pratique du plugin.  Il est enti√®rement autonome, c'est-√†-dire  n'ayant que ce fichier, vous pouvez toujours cr√©er une archive Zip compl√®te du plugin (si vous avez une connexion Internet). </li><li>  fanart.jpg - image d'arri√®re-plan du plugin </li><li>  icon.png - l'ic√¥ne principale </li><li>  resources - r√©pertoire avec les ressources du plugin </li><li>  screensaver.py - le fichier principal du plugin, contient tout le code source du plugin en Python, le nom du fichier peut √™tre n'importe quoi, l'essentiel est que ce nom soit √©crit dans le fichier addon.xml </li></ul><br><h3>  Description des ressources du plugin </h3><br>  Le r√©pertoire des ressources contient les fichiers suivants: <br><br><ul><li>  language / English / strings.po - cha√Ænes d'interface de plugin originales en anglais </li><li>  language / Russian / strings.po - traduction en russe, le fichier est inclus dans le m√©canisme Kodi standard pour traduire le contenu dans les langues nationales des pays, le d√©but du fichier contient un en-t√™te de texte standard de plusieurs lignes (un exemple peut √™tre trouv√© sur le site Web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">kodi.wiki</a> , section plugins) , puis il existe des sauts de ligne compos√©s de trois champs: <br><br><ul><li>  <strong>msgctxt</strong> - lien vers un num√©ro de ligne unique </li><li>  <strong>msgstr</strong> - identifiant de la cha√Æne de texte d'origine en anglais </li><li>  <strong>msgstr</strong> - traduction de la valeur <strong>msgid</strong> dans la langue nationale, dans ce cas, en russe (r√©pertoire russe) </li></ul><br></li><li>  settings.xml - le fichier principal des param√®tres du plugin, d√©crit le menu graphique des propri√©t√©s du plugin, dont les param√®tres de cha√Æne peuvent √™tre modifi√©s, o√π: <br><br><ul><li>  <strong>id</strong> - identifiant de ressource texte </li><li>  <strong>label</strong> - une √©tiquette num√©rique unique pour le champ de texte (correspond au champ msgctxt dans le fichier de traductions strings.po) </li><li>  <strong>type</strong> - un type de ressource pr√©d√©fini (tous les types possibles sont d√©crits sur le site Web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">kodi.wiki</a> , section plugins) </li><li>  <strong>default</strong> - la valeur <strong>par d√©faut</strong> du param√®tre (vous pouvez r√©initialiser le param√®tre √† cette valeur en utilisant le menu Kodi du m√™me nom) </li></ul><br></li><li>  resources / skins / default / 1080i / kodi-univers.xml - fichier de configuration xml </li><li>  resources / skins / default / 720p / kodi-univers.xml - fichier xml de configuration qui d√©crit l'emplacement des contr√¥les du plug-in (contr√¥les), leur g√©om√©trie, la taille globale, la position des √©l√©ments, le type de visibilit√©, etc.  Le nom de la configuration est d√©termin√© en fonction du mode de l'adaptateur vid√©o (par exemple, 1080i ou 720p) <br></li></ul><br><div class="spoiler">  <b class="spoiler_title">contenu de Russian / strings.po</b> <div class="spoiler_text"><pre><code class="xml hljs"># Kodi Media Center language file # Addon Name: Screensaver Kodi Universe # Addon id: screensaver.kodi.universe # Addon Provider: berserktv msgid "" msgstr "" "Project-Id-Version: Kodi Addons\n" "Report-Msgid-Bugs-To: alanwww1@kodi.org\n" "POT-Creation-Date: YEAR-MO-DA HO:MI+ZONE\n" "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" "Last-Translator: Kodi Translation Team\n" "Language-Team: English \ (http://www.transifex.com/projects/p/xbmc-addons/language/en/)\n" "MIME-Version: 1.0\n" "Content-Type: text/plain; charset=UTF-8\n" "Content-Transfer-Encoding: 8bit\n" "Language: en\n" "Plural-Forms: nplurals=2; plural=(n != 1);\n" msgctxt "#32001" msgid "Screensaver" msgstr " " msgctxt "#32002" msgid "Video file" msgstr "" msgctxt "#32003" msgid "Not Video" msgstr "  "</code> </pre> <br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">contenu de settings.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">settings</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"800"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"32001"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">setting</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"videofile"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"32002"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">setting</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"not-video"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bool"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"32003"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">default</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">settings</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  <strong>Ressources m√©dia du plugin:</strong> <br><br><ul><li>  resources / skins / default / media / black.jpg - fond noir qui remplit l'√©cran avant de d√©marrer la vid√©o </li><li>  resources / skins / default / media / buran.jpg - image futuriste du vaisseau spatial "Bourane, sur les ailes d'un r√™ve" </li><li>  resources / skins / default / media / kodi-univers.mkv - le fichier vid√©o principal qui est lu cycliquement par le plugin jusqu'√† l'√©v√©nement d'√©veil </li></ul><br><h2>  Fichier de configuration racine du plugin - addon.xml </h2><br>  Addon.xml - est le fichier de configuration principal du plugin, √† partir duquel Kodi prend toutes les informations n√©cessaires pour lancer le plugin et l'int√©grer dans le centre multim√©dia. <br><br><div class="spoiler">  <b class="spoiler_title">contenu addon.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screensaver.kodi.universe"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Kodi Universe"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.1.2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">provider-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"berserktv"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">addon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.python"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.7"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.ui.screensaver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">library</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screensaver.py"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.addon.metadata"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>all<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span>https://github.com/berserktv/screensaver.kodi.universe <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>Kodi Universe<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>Screensaver - Kodi Universe <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span>  -  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">license</span></span></span><span class="hljs-tag">&gt;</span></span>GNU GENERAL PUBLIC LICENSE. Version 2, June 1991<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">license</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Les principaux param√®tres du plugin sont: <br><br><ul><li>  <strong>Section compl√©mentaire</strong> <br><ul><li>  <strong>id</strong> - identifiant texte unique du plugin </li><li>  <strong>name</strong> - nom du plugin </li><li>  <strong>version</strong> - version plugin </li><li>  <strong>provider-name</strong> - nom du fournisseur du plugin </li></ul><br></li><li>  <strong>Section requise</strong> - d√©pendances <br>  dans cette section les modules dont d√©pend le fonctionnement de ce plug-in <br></li><li>  <strong>Section d'</strong> extension - extensions <br>  dans cette section (il peut y en avoir plusieurs), le type du plugin est indiqu√©, <br>  point d'entr√©e principal du plugin: <br>  point = "xbmc.ui.screensaver" library = "screensaver.py" <br><br>  dans notre cas, le plugin est le ¬´Screen Saver¬ª auquel il est transmis <br>  contr√¥le en appelant un script python appel√© "screensaver.py" <br><br>  point = "xbmc.addon.metadata" peut √©galement √™tre sp√©cifi√© dans la section extensions <br>  avec le type de plateforme sur laquelle le plugin peut fonctionner, le nom et la description du plugin <br>  dans une langue / des langues particuli√®res, ainsi que le type de plugin LICENCE <br>  La quantit√© totale de m√©tadonn√©es pouvant √™tre sp√©cifi√©es dans cette section d'extension peut √™tre <br>  Vous pouvez trouver suffisamment d'informations volumineuses et plus d√©taill√©es sur le site Web <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">kodi.tv</a> <br></li></ul><br><h2>  Impl√©mentation du plugin </h2><br>  √âtant donn√© que le plugin doit √™tre extr√™mement simple et direct, dans sa mise en ≈ìuvre, je me limiterai √† un fichier source principal screensaver.py situ√© dans le r√©pertoire racine de screensaver (a) <br><br>  Pour que le script python soit appel√©, je l'ai enregistr√© dans le fichier addon.xml, voir la section ci-dessus <br><br>  Le langage de programmation Python est assez flexible, il vous permet d'effectuer la m√™me action de plusieurs fa√ßons, et pour plus de clart√©, j'utiliserai l'approche orient√©e objet avec les classes. <br><br><div class="spoiler">  <b class="spoiler_title">contenu screensaver.py</b> <div class="spoiler_text"><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- # Plugin for Kodi mediacenter # Kodi Universe - Very Simple Screensaver # GNU GENERAL PUBLIC LICENSE. Version 2, June 1991 import os import sys import xbmc import urllib import xbmcgui import xbmcaddon __id__ = 'screensaver.kodi.universe' __addon__ = xbmcaddon.Addon(id=__id__) __path__ = __addon__.getAddonInfo('path') def_video_url = __path__+'/resources/skins/default/media/kodi-universe.mkv' class BsPlaylist: def __init__(self,): pass def getPlaylist(self,): try: xbmc.PlayList(1).clear() except: pass self.playlist = xbmc.PlayList(1) item = xbmcgui.ListItem("item1") self.playlist.add(__addon__.getSetting("videofile"),item) return self.playlist class BsPlayer(xbmc.Player): def __init__(self,): pass def onPlayBackStarted(self): xbmc.executebuiltin("PlayerControl(RepeatAll)") def onPlayBackStopped(self): return class Screensaver(xbmcgui.WindowXMLDialog): def __init__( self, *args, **kwargs ): pass def onInit(self): video_url = __addon__.getSetting("videofile") if (video_url == ""): video_url = def_video_url __addon__.setSetting("videofile", video_url) if (__addon__.getSetting("not-video") == "true" \ or not os.path.isfile(video_url) ): return li = BsPlaylist() self.vpl = li.getPlaylist() if self.vpl: xbmc.sleep(2000) self.getControl(1).setImage("black.jpg") self.player = BsPlayer() if not xbmc.getCondVisibility("Player.HasMedia"): self.player.play(self.vpl,windowed=True) def onAction(self,action): try: xbmc.PlayList(1).clear() except: pass try: xbmc.Player().stop() except: pass try: self.close() except: pass if __name__ == '__main__': scr = Screensaver( 'kodi-universe.xml', __path__, 'default', '', ) scr.doModal() del scr</span></span></code> </pre><br></div></div><br><h4>  √©conomiseur d'√©cran de classe (xbmcgui.WindowXMLDialog) </h4><br>  La classe principale de l'√©conomiseur d'√©cran <br><br>  L'API Python Kodi comprend plusieurs modules principaux: <strong>xbmc, xbmcgui, xbmcplugin, xbmcaddon et xbmcvfs</strong> .  Pour travailler avec l'interface graphique Kodi, j'utiliserai le module xbmcgui.  Ce module contient des classes responsables de diff√©rents √©l√©ments d'interface. <br><br>  Pour cr√©er une bo√Æte de dialogue de plugin avec son interface d√©crite dans le fichier de configuration xml, la classe <strong>xbmcgui</strong> est <strong>utilis√©e.WindowXMLDialog</strong> <br><br><div class="spoiler">  <b class="spoiler_title">Contenu kodi-univers.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">window</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"window"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">controls</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Background image<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">colordiffuse</span></span></span><span class="hljs-tag">&gt;</span></span>FF555555<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">colordiffuse</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aspectratio</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">scalediffuse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aligny</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag">&gt;</span></span>scale<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aspectratio</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span>1920<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span>1080<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">texture</span></span></span><span class="hljs-tag">&gt;</span></span>buran.jpg<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">texture</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"videowindow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>VideoWindow<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span>1920<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span>1080<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">visible</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">visible</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">controls</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">window</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Le fichier de configuration XML d√©crit deux √©l√©ments de contr√¥le: <br><br>  Le premier avec l'identifiant - <strong>1</strong> , est une image de fond - "Temp√™te de neige, sur les ailes d'un r√™ve", de certaines tailles, align√©e au centre de l'√©cran. <br><br>  Le deuxi√®me √©l√©ment avec l'identifiant - <strong>2</strong> , est une fen√™tre de lecture de la vid√©o, avec un signe de visibilit√© et certaines dimensions g√©om√©triques. <br><br>  La classe Screensaver h√©rite de la classe WindowXMLDialog et poss√®de trois m√©thodes: <br><br><ul><li>  La m√©thode constructeur <strong>__init__</strong> est appel√©e automatiquement lorsque l'objet est cr√©√© </li><li>  <strong>OnInit</strong> - m√©thode d'initialisation graphique, appel√©e avant la premi√®re fen√™tre d'affichage </li><li>  La m√©thode <strong>onAction</strong> est une m√©thode de traitement d'√©v√©nements qui est appel√©e lorsque certains √©v√©nements se produisent, dans ce cas, lorsqu'un √©v√©nement d'√©veil se produit, c'est-√†-dire  en cliquant sur le bouton de la souris, le clavier, en d√©pla√ßant le pointeur de la souris ou l'arriv√©e de tout √©v√©nement √† partir du panneau de commande </li></ul><br>  La classe Screensaver utilise deux classes d'assistance: <br><br><ul><li>  Classe <strong>BsPlayer</strong> - h√©rit√©e de la classe standard de lecteur vid√©o XBMC <strong>xbmc.Player</strong> , la classe contient trois m√©thodes: <br><ol><li>  La m√©thode constructeur <strong>__init__</strong> est appel√©e automatiquement lorsque l'objet est cr√©√© </li><li>  <strong>Substitution</strong> de la <strong>m√©thode de d√©marrage</strong> vid√©o <strong>onPlayBackStarted</strong> </li><li>  <strong>Substitution</strong> de la m√©thode de fin de vid√©o <strong>onPlayBackStopped</strong> <br><br>  Remarque: depuis que j'ai red√©fini la m√©thode d'arr√™t de la lecture et qu'elle est vide, <br>  alors la r√®gle fonctionnera: N'arr√™tons pas, allons-y <br></li></ol><br></li><li>  Classe <strong>BsPlaylist</strong> - une classe de liste con√ßue pour renvoyer un objet <strong>xbmc.PlayList</strong> <br>  la classe contient deux m√©thodes: <br><br><ol><li>  La m√©thode constructeur <strong>__init__</strong> est appel√©e automatiquement lorsque l'objet est cr√©√© </li><li>  La m√©thode <strong>getPlaylist</strong> pour d√©finir une liste de lecture √† l'aide de la liste XBMC standard - xbmc.PlayList </li></ol></li></ul><br>  L'algorithme g√©n√©ral de l'√©conomiseur d'√©cran (a) est le suivant: <br><br><ol><li>  Lorsque l'√©v√©nement d'appel Screensaver se produit (a) - l'inactivit√© de l'utilisateur pendant le nombre sp√©cifi√© de minutes et l'absence de lecture vid√©o / audio active, Kodi transf√®re le contr√¥le au script screensaver.py </li><li>  Sur la base du fichier de configuration xml, la fen√™tre graphique principale du plugin est cr√©√©e.  Lorsque la fen√™tre graphique est initialis√©e, les ressources de cha√Æne des param√®tres du plugin sont charg√©es (le menu est ¬´param√®tres¬ª). </li></ol><br>  Si le fichier vid√©o n'est pas sp√©cifi√© <br>  <strong>__addon __. getSetting ("fichier vid√©o")</strong> <br><br>  il est rempli avec un param√®tre par d√©faut <br>  <strong>video_url = def_video_url</strong> <br>  <strong>__addon __. setSetting ("videofile", video_url)</strong> <br><br>  s'il n'y a pas d'indicateur - "d√©sactiver la lecture vid√©o" <br>  <strong>__addon __. getSetting ("non-vid√©o")</strong> <br><br>  l'image futuriste ¬´Temp√™te de neige sur les ailes du r√™ve¬ª est affich√©e pendant deux secondes <br>  <strong>xbmc.sleep (2000)</strong> <br><br>  en outre par l'identifiant de la commande 1, une image de fond noir est d√©finie <br>  <strong>self.getControl (1) .setImage ("black.jpg")</strong> <br><br>  puis le lecteur vid√©o XBMC commence par une liste de lecture √† fichier unique <br>  <strong>self.player.play (self.vpl, windowed = True)</strong> <br><br>  Le fichier vid√©o est lu en cercle jusqu'au moment o√π il arrive <br>  √©v√©nement √©veill√©, c.-√†-d.  toute action utilisateur active <br><br><h2>  Cr√©ation de visualisations pour le plugin Kodi dans Ubuntu </h2><br>  <strong>Remarque:</strong> <strong><br></strong>  <strong>Toutes les instructions d√©crites ci-dessous seront ex√©cut√©es sous le syst√®me d'exploitation Linux, √† savoir la distribution Ubuntu</strong> <br><br>  Il est √©galement possible d'effectuer les √©tapes d√©crites ci-dessous dans un syst√®me d'exploitation compatible Debian - la condition principale pour le lancement sera la pr√©sence du gestionnaire de paquets <strong>Apt</strong> dans le syst√®me, c'est-√†-dire  un gestionnaire qui vous permet d'installer le logiciel <strong>Deb</strong> dans le syst√®me.  Bien s√ªr, vous pouvez effectuer les √©tapes suivantes sur n'importe quel syst√®me Linux, mais cela n√©cessitera des actions suppl√©mentaires de votre part et il est possible de modifier la s√©quence de certaines commandes (par exemple: installer des packages RPM au lieu de Deb, etc.) <br><br>  Gource est un projet tr√®s int√©ressant et fascinant.  <strong>Gource</strong> est nomm√© d'apr√®s la source, c'est-√†-dire  code source + G (graphique).  Cette application vous permet de visualiser l'historique des changements dans le syst√®me de contr√¥le de version.  Gource comprend nativement Git, pour d'autres syst√®mes tels que SVN, Mercurial, il existe des convertisseurs qui vous permettent de convertir la base de stockage au format Git. <br><br>  <strong>Gource</strong> - <strong>rend</strong> incroyablement beau avec OpenGL, et dispose d'un grand nombre de param√®tres pour son travail.  Cet outil incroyablement puissant pour g√©n√©rer une visualisation "Enchanting" que j'utiliserai. <br><br>  Pour cr√©er une visualisation, j'ai besoin d'une s√©quence de commandes d√©crite dans un script <strong>bash</strong> <br><br>  Pour g√©n√©rer la vid√©o, j'ai besoin de deux programmes principaux: <br>  <strong>Gource</strong> - pour cr√©er le fichier vid√©o source pour l'historique Git de tout projet sp√©cifi√© <br>  <strong>FFmpeg</strong> - une biblioth√®que pour l'encodage et le d√©codage vid√©o et audio <br><br><h2>  Script pour g√©n√©rer un fichier vid√©o de plugin </h2><br><div class="spoiler">  <b class="spoiler_title">contenu create.sh</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # This is script of the generation video from "Gource". # # project: Screensaver Kodi Universe (https://berserk.tv) # This script creates a ZIP archive of a Kodi screensaver. # GNU GENERAL PUBLIC LICENSE. Version 2, June 1991 # #     , #        # git zip ffmpeg gource    sudo OUT_DIR="output" OUT="kodi-universe.mkv" NAME_PROJ="screensaver.kodi.universe" MEDIA_PATH="${NAME_PROJ}/resources/skins/default/media" NAME_REP="https://github.com/berserktv/${NAME_PROJ}.git" GSFILE="output.ppm" SECONDS_PER_DAY="1" GOURCE_FRAME_RATE="30" RESOLUTION="-1920x1080" CODEC_OUT_FRAME_RATE="25" # -vcodec -     , # libx264         (h.264) # -profile -    (baseline, main, high, # high10, high422, high444) # -pix_fmt -    (yuv420p, yuv422p, yuv444p) FFPARAM="-vcodec libx264 -profile:v high422 -pix_fmt yuv420p" GSPARAM1="--camera-mode track ${RESOLUTION} --stop-position 1.0 \ --seconds-per-day ${SECONDS_PER_DAY}" GSPARAM2="--git-branch origin/master --multi-sampling \ --stop-at-end --hide-filenames" GSPARAM3="--highlight-users --file-idle-time 13 --max-files 0 --hide date" GSPARAM4="--title Kodi --bloom-multiplier 1.0 --bloom-intensity 1.0" VIS="visualize" # GIT         GIT_REP="https://github.com/xbmc/xbmc.git" # arg1 -   git , #         # example: ./create.sh "https://github.com/facebook/react.git" if [ -n "$1" ]; then GIT_REP="$1"; fi #   git zip ffmpeg  gource packages="git zip ffmpeg gource" for i in $packages; do if ! dpkg -s $i | grep -q "install ok installed"; then sudo apt-get install -y $i; fi done #    test -d ${OUT_DIR} &amp;&amp; rm -rf ${OUT_DIR} test -d ${OUT_DIR} || mkdir -p ${OUT_DIR} cd ${OUT_DIR} #  Screensaver  GIT ,   if ! git clone ${NAME_REP} ${NAME_PROJ}; then echo "Error, not load ${NAME_REP}, exit ..."; exit 1; fi if ! git clone ${GIT_REP} ${VIS}; then echo "Error, not load ${GIT_REP}, exit ..."; exit 2; fi #    Screensaver(a) gource ${VIS} ${GSPARAM1} ${GSPARAM2} ${GSPARAM3} ${GSPARAM4} \ --output-framerate ${GOURCE_FRAME_RATE} --output-ppm-stream ${GSFILE} ffmpeg -y -r ${GOURCE_FRAME_RATE} -f image2pipe -vcodec ppm \ -i ${GSFILE} ${FFPARAM} -r ${CODEC_OUT_FRAME_RATE} ${OUT} &amp;&amp; sync mv -f ${OUT} ${MEDIA_PATH} rm -f ${GSFILE} #     #   GIT    screensaver() test -d ${NAME_PROJ}/.git &amp;&amp; rm -fr ${NAME_PROJ}/.git zip -r ${NAME_PROJ}.zip ${NAME_PROJ}</span></span></code> </pre><br></div></div><br>  Le script doit √™tre ex√©cut√© en tant qu'utilisateur normal, mais au d√©marrage, le script n√©cessite l'installation des programmes <strong>git zip ffmpeg gource suivants</strong> <br><br>  S'ils sont absents, le script tentera de les installer √† l'aide de la <strong>commande d'</strong> augmentation des privil√®ges - <strong>sudo</strong> . <br><br>  En bref, le script fait ce qui suit: <br><br><ul><li>  Il t√©l√©charge deux projets depuis Internet avec Github. <br>  Le premier projet est Screensaver lui-m√™me <br>  Deuxi√®me projet - XBMC (Kodi) <br><br>  si vous sp√©cifiez un argument sur la ligne de commande repr√©sentant un chemin Git, vous pouvez charger n'importe quel projet Git pour la visualisation, un exemple de chargement d'un autre projet Git: <br><br><pre> <code class="bash hljs">./create.sh https://github.com/facebook/react.git</code> </pre> <br>  dans ce cas, je prends le c√©l√®bre moteur Facebook pour la visualisation - React <br></li><li>  Ex√©cute le programme <strong>Gource</strong> avec des arguments de ligne de commande pour g√©n√©rer des fragments vid√©o au format PPM non compress√©. <br>  La vid√©o sera g√©n√©r√©e jusqu'√† ce que l'utilisateur ferme la fen√™tre Gource avec la souris (en cliquant sur la croix) ou jusqu'√† ce que l'utilisateur appuie sur la touche <strong>ESC</strong> <br><br><div class="spoiler">  <b class="spoiler_title">Remarque:</b> <div class="spoiler_text"><blockquote>  Je ne vous recommande pas de g√©n√©rer une vid√©o d'une dur√©e sup√©rieure √† <strong>trois minutes</strong> , car cela peut prendre un certain temps et vous obligera √† stocker plus de <strong>30 Go d'</strong> espace libre sur votre disque dur.  Une minute d'images avec une r√©solution de 1920 √ó 1080 (FullHD) et une fr√©quence de 30 images par seconde n√©cessite environ 10 Go d'espace sur le disque dur.  Il s'agit d'un fichier temporaire et apr√®s avoir g√©n√©r√© le conteneur vid√©o MKV correct (codec h.264) √† l'aide de FFmpeg, ce fichier est supprim√© et le fichier r√©sultant reste, ce qui prend 20 Mo pour une minute de vid√©o FullHD √† 25 images par seconde. <br><br>  Avec ces param√®tres Gource que le script utilise, vous avez la possibilit√© de s√©lectionner n'importe quelle section de temps depuis le d√©but du d√©veloppement du projet jusqu'√† pr√©sent, l'√©chelle lin√©aire en bas de la fen√™tre Gource en est responsable.  Vous pouvez utiliser la souris pour s√©lectionner √† tout moment, et la visualisation commence √† partir de ce moment, c'est-√†-dire  tous les objets pr√©c√©dents √† l'√©cran disparaissent, ce qui rend la vid√©o plus dynamique. <br></blockquote><br></div></div><br></li><li>  D√©marre le programme FFmpeg avec une liste d'arguments pour cr√©er un conteneur MKV √† partir de l'ensemble d'images Gource d'origine; </li><li>  Cr√©e l'archive Zip finale avec le projet Screensaver (a) et le fichier vid√©o g√©n√©r√©; </li></ul><br><h2>  Options de Gource </h2><br><ul><li>  01 <strong>- mode</strong> cam√©ra de <strong>piste en</strong> mode cam√©ra <br>  (suit les utilisateurs actifs actuels) <br></li><li>  02 <strong>- position d'</strong> arr√™t <strong>1.0</strong> position finale <br>  (d√©finit la position finale pour la lecture, plage de 0,0 √† 1,0) <br></li><li>  03 <strong>--secondes par jour 1</strong> nombre de jours par seconde vid√©o <br>  (le param√®tre d√©termine la quantit√© de travail que vous verrez dans l'intervalle d'une seconde de la vid√©o) <br></li><li>  04 <strong>--Git-Branch Origin / Master</strong> Project <strong>Work</strong> Branch </li><li>  05 <strong>-</strong> arr√™t de <strong>fin</strong> apr√®s la <strong>fin du</strong> journal git </li><li>  06 <strong>- le</strong> lissage <strong>multi-√©chantillonnage</strong> permet </li><li>  07 <strong>--hide-filenames</strong> supprimer les noms de fichiers </li><li>  08 <strong>- les utilisateurs en</strong> surbrillance mettent en √©vidence les noms d'utilisateur </li><li>  09 <strong>--file-idle-time 13</strong> temps d'arr√™t pour le fichier <br>  (la dur√©e apr√®s laquelle le nom de fichier est supprim√© de l'affichage) <br></li><li>  10 <strong>--max-files 0</strong> nombre maximum de fichiers <br>  (une valeur de 0 supprime la limite du nombre de noms de fichiers affich√©s) <br></li><li>  11 - <strong>masquer la date</strong> supprimer la date pour laquelle le cadre actuel est affich√© </li><li>  12 - <strong>titre Kodi le</strong> nom qui <strong>appara√Æt</strong> dans le coin inf√©rieur gauche de la vid√©o </li><li>  13 <strong>--bloom-multiplier 1.0</strong> contr√¥le l'effet de la "floraison l√©g√®re" en utilisant le rayon. </li><li>  14 - L' <strong>intensit√© de floraison 1.0</strong> contr√¥le l'effet de la ¬´floraison l√©g√®re¬ª en utilisant l'intensit√©. </li><li>  15 <strong>- cadence de</strong> sortie <strong>30</strong> trames de sortie par seconde </li><li>  16 <strong>--output-ppm-stream name nom</strong> du fichier de sortie au format PPM </li></ul><br>  remarque: certains param√®tres peuvent s'exclure mutuellement, <br>  Une liste compl√®te des param√®tres peut √™tre trouv√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h4>  Petit didacticiel vid√©o pour l'√©conomiseur d'√©cran (a) </h4><br><br><div class="spoiler">  <b class="spoiler_title">1) T√©l√©chargez le projet depuis github:</b> <div class="spoiler_text"><pre> <code class="bash hljs"> git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/berserktv/screensaver.kodi.universe.git</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">2) G√©n√©rez une vid√©o et cr√©ez une archive Zip du plugin:</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> screensaver.kodi.universe chmod u+x create.sh ./create.sh</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3) Temps de g√©n√©ration vid√©o et utilisation de l'espace disque libre:</b> <div class="spoiler_text"><pre> <code class="bash hljs">      .           -    20      Gource (PPM)   MKV      FFmpeg. (  h.264)  ,   Git  XBMC (Kodi)   700            .       PPM   10     ( FullHD, 30   ).</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">4) Installez l'√©conomiseur d'√©cran dans Kodi</b> <div class="spoiler_text"><pre> <code class="bash hljs">    <span class="hljs-string"><span class="hljs-string">""</span></span>   Kodi (        )   Kodi - <span class="hljs-string"><span class="hljs-string">""</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">" "</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">" Zip "</span></span>   ,     Kodi Universe    Screensaver(),     .  Settings ( ) =&gt; <span class="hljs-string"><span class="hljs-string">" "</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466067/">https://habr.com/ru/post/fr466067/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466049/index.html">Du copier-coller aux composants: r√©utiliser le code dans diff√©rentes applications</a></li>
<li><a href="../fr466051/index.html">Automatisation du profilage Java Meetup 10/09</a></li>
<li><a href="../fr466053/index.html">Repr√©sentation des soci√©t√©s informatiques russes √† Singapour: pourquoi pas?</a></li>
<li><a href="../fr466059/index.html">Livre ¬´Design Thinking. De la perspicacit√© aux nouveaux produits et march√©s ¬ª</a></li>
<li><a href="../fr466065/index.html">R√©sum√© des nouvelles de PostgreSQL. Num√©ro 17</a></li>
<li><a href="../fr466069/index.html">Comment amener l'√©quipe √† rechercher des id√©es plus productives</a></li>
<li><a href="../fr466071/index.html">10,3 secondes par hachage: extraction sur l'ordinateur de contr√¥le embarqu√© du vaisseau spatial Apollo</a></li>
<li><a href="../fr466075/index.html">Comment j'ai quitt√© la science fondamentale dans une startup</a></li>
<li><a href="../fr466077/index.html">Journ√©e Techdir de diffusion √† Saint-P√©tersbourg</a></li>
<li><a href="../fr466081/index.html">3 septembre</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>