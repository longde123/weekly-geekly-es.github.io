<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèà üë¥üèæ üàÅ Acerca del funcionamiento de una PC con el ejemplo de Windows 10 y el teclado, parte 1 üòä üì¥ üë∑üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mi nombre es Andrey Artemyev, trabajo en Microsoft en el n√∫cleo de Windows 10, anteriormente trabaj√© en Windows 10x (WCOS), XBox, Windows Phone y Micr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Acerca del funcionamiento de una PC con el ejemplo de Windows 10 y el teclado, parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483330/"><img src="https://habrastorage.org/getpro/habr/post_images/168/a19/873/168a198732c9cf76e19132b28ceaf04d.png" alt="imagen"><br><br>  Mi nombre es Andrey Artemyev, trabajo en Microsoft en el n√∫cleo de Windows 10, anteriormente trabaj√© en Windows 10x (WCOS), XBox, Windows Phone y Microsoft Edge.  Quiero popularmente, con fines educativos, contar c√≥mo funciona la computadora en el ejemplo de entrada de teclado y Windows 10. Esta serie de art√≠culos est√° dise√±ada principalmente para estudiantes de especialidades t√©cnicas.  Consideraremos qu√© ruta va a mostrar la informaci√≥n sobre la tecla presionada desde el teclado en Notepad.exe.  Debido a la inmensidad e interdisciplinariedad del tema, puede haber imprecisiones en los art√≠culos, que se informan en los comentarios.  Parte de la informaci√≥n puede estar desactualizada debido a la velocidad con la que se est√° desarrollando Windows. <br><a name="habracut"></a><br><h3>  ¬øCu√°n profundo nos sumergimos en el tema? </h3><br>  Primero hablemos sobre los niveles en los que se puede considerar una computadora.  Cada nivel se basa en el anterior.  Comencemos desde arriba. <br><br>  <i>Nivel de aplicaci√≥n</i>  Todas las aplicaciones de usuario se encuentran aqu√≠, este es un navegador, Microsoft Office, bloc de notas, as√≠ como el servidor web IIS, SQL Server, varios middleware como Java y .Net y todos los lenguajes de secuencias de comandos, ya sea Ruby, PHP o Bat-files. <br><br>  <i>Nivel del sistema operativo</i> .  El SO se puede considerar como: <br><br><ul><li>  Administrador de recursos: memoria, discos duros, impresoras, pantalla, teclado, recursos limitados que comparten los programas que se ejecutan en la computadora. </li><li>  M√°quina virtual: un archivo es un buen ejemplo de un objeto virtual.  Representa una abstracci√≥n de datos en el disco, una API para trabajar con √©l, y tambi√©n agrega el concepto de derechos de acceso.  En lugar de un archivo, podr√≠a existir el concepto de un contenedor de datos y una API completamente diferente.  Hay muchos de estos objetos virtuales en el sistema operativo. </li><li>  Plataforma: el sistema operativo proporciona modelos de software y primitivas para crear programas.  Por ejemplo, el Marco de controladores de Windows le permite desarrollar controladores r√°pidamente, las ventanas en Windows se utilizan para construir interfaces de usuario complejas.  Dll: proporciona un modelo para expandir la funcionalidad del programa a trav√©s de complementos, as√≠ como un mecanismo para implementar el lector de pantalla a trav√©s de trampas de teclado (consulte el gancho LowLevelKeyboard). </li></ul>  El sistema operativo se divide en capas y componentes.  En general, la arquitectura de Windows 10 se ve as√≠.  Hablaremos en detalle un poco m√°s adelante. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a8/b8d/4c8/5a8b8d4c8c9538c8dc7e8ed97882ff90.png" alt="imagen"></div><br>  <i>Nivel de arquitectura inform√°tica</i> .  Est√° representado por una placa base que tiene un factor de forma espec√≠fico, funciones integradas codificadas en microcircuitos llamadas un conjunto de chips y puertos a trav√©s de los cuales puede ampliar la funcionalidad de su computadora conectando una tarjeta gr√°fica, tarjeta de red, memoria adicional de acceso aleatorio (RAM), discos duros, teclado, etc. Los puertos afectan la velocidad y las capacidades de la computadora, lo que determinar√° su prop√≥sito, ya sea un servidor para procesar miles de solicitudes por segundo, una tableta para usar Internet o una PC para juegos con varios videos  arty.  El sistema operativo resume las caracter√≠sticas de la placa base. <br><br>  Los microcircuitos se ven como en la imagen a continuaci√≥n y son una mini computadora que realiza programas simples para tareas de bajo nivel, por ejemplo, lee datos del teclado y los transfiere a√∫n m√°s para que finalmente lleguen al procesador.  Como regla, se implementan como un microcircuito o microcontrolador anal√≥gico no programable programable en C. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/352/c4e/d2f/352c4ed2f9d9a581dd63afc6561f2b84.png" alt="imagen"></div><br><br>  La placa base puede considerarse como una colonia de microcircuitos que se comunican entre s√≠ a trav√©s de buses y, a trav√©s de ellos, los datos de los dispositivos conectados al procesador y viceversa circulan.  El conjunto de chips es una especie de sistema nervioso inform√°tico.  Todos los chips en la placa base fueron creados originalmente para trabajar entre s√≠.  Algunos de ellos pueden tener funciones especiales, por ejemplo, un temporizador o almacenamiento de la configuraci√≥n del BIOS.  Quiz√°s el m√°s importante de ellos es el que tiene un programa incorporado (firmware, BIOS, UEFI) que comienza a funcionar tan pronto como aparece la electricidad.  Encuentra el disco duro con el cargador de arranque de Windows y le transfiere el control, que a su vez lanza el archivo ejecutable del sistema operativo, que puede llamarse Windows10.exe, en realidad NtOsKrnl.exe.  El BIOS sabe qu√© buscar gracias a un acuerdo entre fabricantes de hardware y sistemas operativos. <br><br>  Alrededor de la placa base, puede ensamblar un tel√©fono m√≥vil, consola de juegos, estaci√≥n de servidor o dispositivo inteligente.  En la siguiente imagen, los factores de forma comunes de las placas base. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/970/4b1/225/9704b1225b1a0a9308b395a918c9490c.png" alt="imagen"></div><br>  <i>El nivel de microarquitectura</i> est√° representado por el procesador (CPU), este es el coraz√≥n de la placa base y se necesita todo el conjunto de chips para dar servicio a la CPU.  Un procesador es una computadora en una computadora, un microcontrolador m√°s potente y avanzado que no necesita firmware, porque el flujo de comandos se produce sobre la marcha cuando el programador de subprocesos cambi√≥ el contexto del procesador.  El funcional del procesador se divide en subsistemas, por ejemplo, un componente involucrado en operaciones matem√°ticas y l√≥gicas, un coprocesador matem√°tico y un cach√©.  Algunos de ellos sol√≠an ser un chip separado en la placa base, pero ahora se han convertido en parte de la CPU, por ejemplo, un controlador de interrupci√≥n y un chip llamado North Bridge, lo que aument√≥ la velocidad del trabajo. <br><br>  La microarquitectura no es lo mismo que la <i>arquitectura</i> .  Toda la funcionalidad de la CPU se divide en componentes que funcionan juntos.  Estos componentes y su interacci√≥n es la microarquitectura.  En el diagrama de flujo a continuaci√≥n, est√°n representados por rect√°ngulos y cuadrados de colores. <br><br><div class="scrollable-table"><table><tbody><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/e7e/755/180/e7e755180f7556d131c52d5bae9e4bbb.png" alt="imagen" width="130"></td><td><img src="https://habrastorage.org/getpro/habr/post_images/879/214/4bf/8792144bf447a9af66f11fb803d4f082.png" alt="imagen" align="right"></td></tr></tbody></table></div><br>  <i>La arquitectura del procesador</i> es esencialmente un documento que describe qu√© funcionalidad deber√≠a tener para corresponder, por ejemplo, a la arquitectura x86, x64 o ARM utilizada en dispositivos m√≥viles.  Este documento describe qu√© comandos, asignaciones de registros y l√≥gica de operaci√≥n deber√≠an ser compatibles.  Los creadores de los procesadores Intel, AMD, Elbrus pueden implementar esta funcionalidad como quieran y agregarle nuevas funciones en forma de comandos, registros, indicadores, interrupciones, y si el sistema operativo los conoce, puede usarla.  En t√©rminos de OOP, la arquitectura de la CPU es la interfaz y la microarquitectura es su implementaci√≥n. <br><br>  <i>Circuitos l√≥gicos</i> .  Los rect√°ngulos coloreados del diagrama de bloques de la CPU consisten en circuitos l√≥gicos que realizan sus operaciones en secuencias de ceros y unos.  El procesador ve todos los datos e instrucciones en forma de bits (0 y 1), de acuerdo con la f√≥rmula, cualquier n√∫mero decimal puede representarse como una secuencia de 0 y 1, pero lo que significa un n√∫mero particular depende del contexto.  Puede ser un c√≥digo, n√∫mero, letra.  La unidad aritm√©tica y l√≥gica (ALU) puede agregar dos n√∫meros a trav√©s de operaciones bit a bit.  Los algoritmos bit a bit de suma, resta, multiplicaci√≥n y divisi√≥n se conocen desde hace mucho tiempo; los desarrolladores del circuito l√≥gico solo necesitan implementarlos de manera efectiva. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/295/ec3/90e/295ec390e94e6f5a747108c18a90718d.png" alt="imagen"></div><br>  Los circuitos digitales funcionan con datos a nivel de ceros y unos, mientras que los circuitos anal√≥gicos se basan en la explotaci√≥n de las leyes de la f√≠sica.  Realizan manipulaciones de bits simples, como cambios, AND, OR, XOR.  A trav√©s de estas primitivas se implementan operaciones m√°s complejas.  La siguiente imagen muestra el operador anal√≥gico Y implementado a trav√©s de transistores.  En la salida del circuito, solo existir√° un voltaje distinto de cero si est√° en ambos contactos de entrada (Bx1 y Bx2), de lo contrario, cero voltios.  El operador &amp;&amp; en C # funciona de la misma manera.  Los circuitos digitales se basan en √∫ltima instancia en anal√≥gicos.  Los elementos f√≠sicamente l√≥gicos en los circuitos l√≥gicos se pueden implementar no solo de forma electr√≥nica, sino tambi√©n mec√°nica, hidr√°ulica, √≥ptica y de otro tipo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/861/bc3/9db/861bc39db7794a592e6e58896a363e0b.png" alt="imagen"></div><br>  <i>El nivel de radioelementos</i> .  F√≠sicamente, los circuitos anal√≥gicos dependen de elementos de radio que realmente explotan las leyes de la f√≠sica.  En su mayor√≠a, estos son semiconductores, es decir  bajo ciertas condiciones, pueden conducir electricidad, pero no pueden.  El diodo conduce la corriente en una sola direcci√≥n, si no est√° soldada, gira 180 y vuelve a soldar, entonces la corriente no la atravesar√°.  El transistor pasa corriente solo si hay voltaje en la pata de control.  La humanidad ha aprendido a hacer microsc√≥picos los transistores y, por lo tanto, se pueden colocar en una peque√±a placa por millones.  En las im√°genes a continuaci√≥n, elementos de radio semiconductores y un transistor convencional junto a un nano transistor bajo un microscopio electr√≥nico. <br><div class="scrollable-table"><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/n-/ux/k5/n-uxk5c1ocjoowqllgwa6rcpt8a.png" alt="imagen"></div><br></td><td><img src="https://habrastorage.org/getpro/habr/post_images/c55/e83/c82/c55e83c825722050e5e461a8a6521c52.png" alt="imagen"><br></td></tr></tbody></table></div>  <i>El nivel de las leyes de la f√≠sica</i> .  Y finalmente, el nivel m√°s bajo es el nivel de las leyes de la f√≠sica que est√°n encerradas en radioelementos semiconductores. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78b/e31/48d/78be3148d40c073b92a9b33b744cb3a3.png" alt="imagen"></div><br>  Hablaremos mucho sobre el nivel del sistema operativo y un poco menos sobre la arquitectura de la computadora, la microarquitectura, los circuitos anal√≥gicos y los elementos de radio.  Para la √∫ltima parte, debe comprender c√≥mo funciona todo esto en conjunto. <br><br><h3>  Conceptos b√°sicos del sistema operativo </h3><br>  Cuando fuimos al lenguaje ensamblador en la universidad, muchos estudiantes ten√≠an un estupor por palabras tan ingeniosas como "kernel y modos de usuario", bajo los cuales el sistema de autenticaci√≥n de roles realmente conocido est√° oculto en todos, en todos los sitios hay al menos un "Administrador" con acceso a Todas las p√°ginas y el "Usuario" tienen acceso limitado.  Del mismo modo, la funci√≥n "Core" tiene acceso a todas las capacidades de la CPU, y la funci√≥n "Usuario" puede no causar todos los comandos del procesador y no con todos los argumentos.  Adem√°s de este modelo a seguir, el sistema operativo se basa en el principio de la arquitectura cliente-servidor, donde el servidor es el n√∫cleo que implementa la funcionalidad del sistema operativo y el cliente son los programas de usuario.  En el mundo de la Web, el cliente y el servidor est√°n f√≠sicamente separados: estas son dos computadoras diferentes que se comunican a trav√©s de la red.  En el sistema operativo, el cliente y el servidor viven en la misma m√°quina y en el mismo hardware.  El servidor tiene una determinada API que permite a los clientes cambiar su estado, por ejemplo, la API de Twitter le permite crear publicaciones, iniciar sesi√≥n y cargar un feed de tweets a un cliente m√≥vil.  Windows tiene una API Win, que es m√°s engorrosa debido a una gama m√°s amplia de tareas; hoy, Windows tiene aproximadamente 330,000 API m√°s una API para aplicaciones UWP.  Si los conceptos de Twitter son m√°s o menos claros para todos (publicaci√≥n, usuario, feed), entonces los conceptos del sistema operativo pueden requerir cierta profundizaci√≥n en su interior.  Por lo tanto, las API de Windows pueden ser dif√≠ciles de entender sin comprender la estructura interna del sistema operativo. <br><br>  <i>En realidad, el n√∫cleo significa tres cosas diferentes.</i>  <i>El n√∫cleo es como todo el c√≥digo del sistema operativo.</i>  <i>El kernel como subsistema responsable de los mecanismos del sistema operativo, como el programador de subprocesos, el cambio de contexto, el manejo de interrupciones, el intercambio de memoria virtual a f√≠sica (Kernel) y el subsistema del kernel para admitir otros sistemas operativos: CSRSS.exe (Windows), PSXSS.exe (POSIX), OS2SS.exe (OS / 2) o WSL (Subsistema de Windows para Linux).</i>  <i>En este contexto, se entiende el primer significado: todo el c√≥digo del sistema operativo.</i> <br><br>  Cuando aparece una ventana en la pantalla, aparece una estructura de datos en la parte del servidor del sistema operativo (modo kernel) que describe esta ventana: su posici√≥n en la pantalla, tama√±o, texto del t√≠tulo, funci√≥n de ventana a trav√©s de la cual el sistema operativo permite que la aplicaci√≥n responda a los eventos.  Dado que hay muchos subsistemas en el sistema operativo, puede haber varias estructuras de datos que describen un objeto, por ejemplo, la informaci√≥n sobre el proceso del usuario est√° en los componentes: <br><br><ul><li>  <i>Ejecutivo</i> : aqu√≠ est√° la l√≥gica del sistema operativo.  Esta capa verifica qu√© procesos pueden y no pueden hacer.  Este archivo contiene informaci√≥n sobre el proceso principal, los par√°metros de inicio del proceso (Bloque de entorno del proceso), la cuenta de usuario asociada, el nombre del archivo exe del proceso. </li><li>  <i>Kernel</i> : aqu√≠ se implementan mecanismos del sistema operativo, como un programador de subprocesos.  Almacena cu√°nto tiempo pasa el proceso en modo usuario y kernel, a qu√© procesadores est√°n conectados sus hilos, la prioridad b√°sica de los hilos del proceso. </li><li>  <i>Subsistema de</i> ventanas: informaci√≥n sobre los objetos GDI que se utilizan para dibujar en la ventana.  Estos son primitivos como pinceles, bol√≠grafo, etc. </li><li>  <i>DirectX</i> : todo lo relacionado con DirectX: sombreadores, superficies, objetos DX, contadores de rendimiento de GPU, configuraciones de memoria para memoria gr√°fica. </li><li>  <i>El subsistema de Windows</i> que est√° representado por el proceso CSRSS.exe (Client Server Runtime SubsSystem).  Windows admit√≠a anteriormente OS POSIX (proceso PSXSS.exe) y OS / 2 (OS2SS.exe).  En esos d√≠as, surgi√≥ la idea de hacer de Windows el mismo subsistema, pero esto fue lento y muy pronto parte de CSRSS.exe se transfiri√≥ a win32k.sys, que ahora se divide en varios archivos: win32k.sys, win32kbase.sys y win32kfull.sys.  Aqu√≠ se almacena informaci√≥n sobre datos de grupo de procesos, nivel de apagado, datos de sesi√≥n, etc. </li></ul><br>  El soporte para POSIX y OS / 2 era m√°s probable formal, porque para transferir el programa desde estos sistemas operativos, ten√≠a que encontrar el c√≥digo fuente y recompilarlo de una manera especial para obtener un archivo exe en el que todas las llamadas a la API del sistema operativo se redirigieran a PSXdll.dll (NETAPI.DLL y DOSCALLS.DLL para OS / 2 y User32.dll para aplicaciones de Windows), que era una envoltura delgada sobre la API de Windows.  El estado de algunas API se almacen√≥ en el proceso del subsistema PSXSS.exe (OS2SS.exe).  Como no todas las API se pueden asignar a 1 a 1, dicho programa funcion√≥ de manera inestable.  El soporte de Linux se agreg√≥ en Windows 10 y funciona de una manera completamente diferente.  El subsistema de Linux est√° alojado en modo kernel y la diferencia entre el subsistema de Windows para Linux y Linux es aproximadamente la misma que entre diferentes compilaciones.  Especialmente para WSL, se introdujo un nuevo tipo de proceso: el proceso PICO. <br><br>  <i>¬øQu√© es un componente?</i>  <i>Esta es una funcionalidad agrupada l√≥gicamente.</i>  <i>Un componente se puede llamar una clase OOP, dll, carpeta, conjunto de funciones con un prefijo com√∫n, espacio de nombres, capa en la arquitectura.</i> <br><br><h3>  M√°s sobre particionamiento cliente-servidor </h3><br>  La separaci√≥n del cliente y el servidor se implementa utilizando la funcionalidad integrada de la CPU, el intercambio de memoria y las comprobaciones de software. <br><br>  Los fabricantes de equipos colaboran con los desarrolladores del sistema operativo, por lo tanto, el procesador tiene mecanismos creados teniendo en cuenta las necesidades de los creadores de los sistemas operativos.  En todos los procesadores modernos, se implementa el mecanismo de rol de usuario, donde el usuario se entiende como el c√≥digo ejecutable actualmente.  En las aplicaciones web, el rol del usuario conectado se almacena en una variable y, adem√°s del nombre claro Administrador o Usuario, tiene un Id de este rol, que a menudo se usa durante la autorizaci√≥n, porque comparar n√∫meros es m√°s r√°pido y f√°cil que las cadenas.  En el procesador, la funci√≥n del usuario actual se almacena en un campo llamado "Anillo de seguridad", no "CurrentUser.Role.Id".  En la mayor√≠a de los procesadores, este campo toma cuatro valores de 0 a 3. Windows usa 0 para el rol llamado "Modo Kernel", porque es el modo m√°s privilegiado y el mayor valor para el rol es "Modo de usuario", porque es el rol m√°s limitado.  Los roles restantes no se usan porque la diferencia entre 0 y 1, 2 y 3 es insignificante.  Estas funciones limitan las p√°ginas de memoria que pueden abordarse, no puede llamar algunas instrucciones o no puede llamarlas con ciertos argumentos.  Tambi√©n existen restricciones sobre el uso de la tecnolog√≠a de puertos de E / S para el intercambio de datos con dispositivos como un teclado, pero no se ha utilizado durante 10 a√±os.  El cambio al modo kernel ocurre a trav√©s del comando syscall, que por √≠ndice encuentra la funci√≥n que se llamar√° en la matriz de punteros a las API de Windows.  Un puntero a esta matriz se almacena en un registro de procesador especial durante el arranque del sistema operativo. <br><br>  Espec√≠ficamente llam√© a la CPU registrar un campo.  Cuando escribe un programa en C #, puede agregar tantos campos a su clase como desee y darles nombres descriptivos.  Para procesadores y microcontroladores, los campos se denominan registros.  Cuando dise√±a una pieza de hierro, debe comprender en esta etapa cu√°ntos registros (campos) necesita, qu√© tama√±o deben tener y qu√© funcionalidad asignarles, de modo que sea suficiente para todas las ocasiones en todas las situaciones imaginables e inconcebibles.  Imagine que necesita escribir un programa en un lenguaje de programaci√≥n similar a C # que tiene 16 campos predefinidos en la clase y no puede usar variables locales.  Es decir  el mismo campo se puede usar para almacenar el usuario conectado, la matriz ordenada, los datos temporales o el resultado del m√©todo.  Los nombres de dichos campos deben ser lo m√°s comunes posible, en lugar de tempData, funcResult, habr√° nombres extra√±os EAX, AH, AL, DX, etc. Si escribi√≥ un emulador del procesador en la arquitectura x86 en C #, el c√≥digo podr√≠a verse as√≠ (DIV - dividir, comando divisi√≥n entera): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/714/e34/338/714e34338ea1330cc82b04d548fb25b0.png" alt="imagen"></div><br>  Para ilustrar, agregu√© una verificaci√≥n de modo de n√∫cleo.  Si se produce un error de divisi√≥n por cero, el procesador notifica al sistema operativo a trav√©s de una interrupci√≥n (lanza un evento).  En el momento del arranque, el sistema operativo proporciona al procesador una matriz unidimensional de punteros a una funci√≥n llamada vector de interrupci√≥n, donde cada √≠ndice corresponde a alg√∫n tipo de evento, por ejemplo, divisi√≥n por cero.  El sistema operativo conoce la arquitectura del procesador en el que se est√° ejecutando y, en consecuencia, puede organizar punteros de funci√≥n en una matriz.  La CPU llama a esta funci√≥n y el sistema operativo tiene su propio c√≥digo.  Por ejemplo, Windows busca en el registro si hay un depurador instalado y muestra un mensaje de que se ha producido un error y es posible ejecutar un depurador para ver el lugar donde se produjo.  Una interrupci√≥n se llama interrupci√≥n porque interviene en el curso normal de ejecuci√≥n del programa y hace posible que el controlador de interrupciones se ejecute y solo despu√©s de su finalizaci√≥n el procesador puede volver a la ejecuci√≥n del programa. <br><br>  Las interrupciones pueden ser generadas no solo por el procesador sino tambi√©n por dispositivos externos (teclado, mouse) o c√≥digo de programa.  El programador de subprocesos establece un temporizador que a intervalos de un cuanto (de forma predeterminada, aproximadamente 15 ms, en Windows Server m√°s) genera una interrupci√≥n para asignar otro subproceso para su ejecuci√≥n de acuerdo con el algoritmo interno.  La ejecuci√≥n paso a paso del programa en Visual Studio tambi√©n se basa en el mecanismo de interrupci√≥n: se establece un indicador en el procesador que, despu√©s de cada comando, provoca una interrupci√≥n procesada por el motor de depuraci√≥n de Windows y notificada a trav√©s de la API de Visual Studio. <br><br>  El intercambio de memoria se implementa gracias a la memoria virtual.  Dije anteriormente que el sistema operativo es un administrador de recursos y una m√°quina virtual.     1 RAM 32  Windows          4 , ..    1,   4.              (  ).              .         4096  (4),  : <br><br><ul><li>  . . CPU      ,         .         ,    ,      ,    ,     .          . </li><li>    ,        .   RAM        4.      RAM ,        . </li><li>        ,         ( new  ++)       / . Exe-     ,                 c .    . </li><li>    RAM  .                           / -     .       RAM  ,         ,     .  Windows 10   ,   . </li></ul><br> Windows 10       ,    ‚Äî    (  ),        . <br><div class="scrollable-table"><table><tbody><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/960/f15/ba2/960f15ba232ef507dc327a742ec9b63b.png" alt="imagen"></td><td><img src="https://habrastorage.org/getpro/habr/post_images/d81/9c5/c68/d819c5c68f4a10b9bc924ef54dbc84f8.png" alt="imagen"></td></tr></tbody></table></div> 64     16 ,  18,446,744,073,709,551,616  .         RAM      48  ,  16   .  Win x64     ,      .    ,  64  Windows ‚Äú‚Äù 256 Tb .  8TB     IA64  7TB  x64.     Windows 10 ‚Äî 2TB,        .   RAM  Windows 10     ,    . <br><br> <i>     (HEX) ,     ?       ,              .           ,    ‚Äî    . CPU       ‚Äî       CPU         .  HEX         .     , 32  ( 64)   .   ‚Äî    ,   HEX       ,    . <br></i> <br>     - ( - )     .                 /     .        -,       . <br><br><h3>    Windows? </h3><br>                Windows    - .    -   ‚Äî  , , dll, .         *.sys, *.dll ,     API        ,      C,     .      C++.      : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a8/b8d/4c8/5a8b8d4c8c9538c8dc7e8ed97882ff90.png" alt="imagen"></div><br>        : <br><br><ul><li> <i>Hyper-V Hypervisor</i> ‚Äî      Windows    .  ,  Hyper-V     ,              ,           . </li><li> <i>HAL.dll</i> ‚Äî Hardware Abtraction Layer ‚Äî       ‚Äî ,  ,  ‚Äî       Windows      HAL.dll,        .        ,   ,  .    ,       -   ACPI.sys. <br><br> <i>  Advanced Configuration and Power Interface?  1996       UI,                . <br></i> <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/425/8b8/115/4258b811515337cc25af8634a22f5e03.png" alt="imagen"></div><br>  1996    ACPI,            , ..          . ACPI       ,   CD drive, ..      . <br></li><li> <i>Device Drivers</i> ‚Äî    .         *.sys,          ,            . Process Explorer  SysInternals          . </li><li> <i>Kernel</i> ‚Äî <i>Kernel Mode Execution Environment</i> ,   ,   ,  ,    .     . </li><li> <i>Executive</i> ‚Äî    ,      - . </li><li> <i>Windowing &amp; Graphics</i> ‚Äî    DirectX       . </li><li> <i>NtDll.dll</i> ‚Äî                      .   dll   ,       ( ..  dll)    . Nt   Native,       Native American.  Es decir  API  ,     .      dll   Nt (NtDestroyMenu).  Win API         User32.dll.          NtDll.dll,    Nt*       (level of indirection) ‚Äî subsystem dll   User32.dll  PSXdll.dll  DOSCALLS.DLL      Windows. NtDll.dll        ( <b>S</b> ession <b>M</b> anagement <b>S</b> ub <b>S</b> ystem <b>.exe</b> , <b>Win</b> dows <b>Init</b> itialize <b>.exe</b>  .),       . </li><li> <i>SubSystem dlls</i> ‚Äî        .  Windows      User32.dll. - API            ,    Nt*   NtDll.dll,   CreateFile     NtCreateFile). </li><li> <i>Environment Subsystems</i> ‚Äî CSRSS.exe,  Windows.     POSIX ( PSXSS.exe)  OS/2 (OS2SS.exe). Windows Subsystem for Linux   -. </li><li> <i>System Processes</i> ‚Äî       ,   LSASS.exe (Local Security Authority SubSystem)       . </li><li> <i>Service Processes</i> ‚Äî   Windows ( Plug and Play Manager)       *.exe .     SvcHost.exe      ,    *.dll-.         SvcHost'. </li><li> <i>User Processes</i> ‚Äî  .        ‚Äî , ,    .        . </li></ul><br>     .       . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/483330/">https://habr.com/ru/post/483330/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../483318/index.html">Bot para monitorear servicios web en media hora: telegram + bash + cron</a></li>
<li><a href="../483320/index.html">Creaci√≥n de un museo medieval de realidad virtual.</a></li>
<li><a href="../483322/index.html">Desarrollo de API REST: ¬øcu√°l es el enfoque de Code First?</a></li>
<li><a href="../483324/index.html">Procesos flexibles en el equipo de TI.</a></li>
<li><a href="../483328/index.html">API REST - ¬øQu√© es HATEOAS?</a></li>
<li><a href="../483332/index.html">CES 2020, IBM y el primer uso comercial verdadero de la nueva computadora cu√°ntica</a></li>
<li><a href="../483336/index.html">Mejoras de C ++ Inliner: el Zipliner</a></li>
<li><a href="../483340/index.html">ICD lanz√≥ una b√∫squeda de realidad aumentada</a></li>
<li><a href="../483342/index.html">Python en Visual Studio Code - Versi√≥n de enero de 2020</a></li>
<li><a href="../483344/index.html">.NET docs novedades (diciembre de 2019)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>