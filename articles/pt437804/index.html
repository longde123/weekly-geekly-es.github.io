<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê∑ üë©üèª‚Äçü§ù‚Äçüë®üèæ üò• Posso usar o Redux em um servidor? üë®üèø‚Äçüîß üë©üèΩ‚Äçü§ù‚Äçüë©üèª üîä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O Redux √© uma excelente ferramenta para gerenciar o estado de aplicativos front-end complexos. O autor do material, cuja tradu√ß√£o publicamos hoje, enc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Posso usar o Redux em um servidor?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/437804/">  O Redux √© uma excelente ferramenta para gerenciar o estado de aplicativos front-end complexos.  O autor do material, cuja tradu√ß√£o publicamos hoje, encontrar√° a resposta para a quest√£o de saber se √© poss√≠vel tirar proveito dos recursos do Redux no ambiente do servidor. <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/4ff/f8d/685/4fff8d685687bacff24db95abaadd05b.png" alt="imagem"></a> <a name="habracut"></a><br><h2>  <font color="#3AC1EF">Por que eu preciso de uma biblioteca Redux?</font> </h2><br>  A <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">p√°gina inicial da</a> biblioteca Redux diz que √© um "cont√™iner de estado previs√≠vel para aplicativos JavaScript".  O Redux √© geralmente referido como uma ferramenta para gerenciar o estado de um aplicativo e, embora essa biblioteca seja usada principalmente com o React, ela pode ser usada em qualquer projeto baseado em JavaScript. <br><br>  J√° mencionamos que o Redux √© usado para controlar o estado de um aplicativo.  Agora vamos falar sobre o que √© uma "condi√ß√£o".  Esse conceito √© bastante dif√≠cil de definir, mas ainda tentamos descrev√™-lo. <br><br>  Considerando o "estado", se estamos falando de pessoas ou de objetos do mundo material, procuramos descrever, de fato, o estado deles no momento em que estamos falando deles, possivelmente considerando um ou mais par√¢metros.  Por exemplo, podemos dizer sobre o lago: "A √°gua est√° muito quente" ou: "A √°gua est√° congelada".  Nestas declara√ß√µes, descrevemos o estado do lago em termos de temperatura da √°gua. <br><br>  Quando algu√©m diz sobre si mesmo: "Estou encalhado", ele considera a quantidade de dinheiro que tem.  √â claro que em cada um desses exemplos estamos falando apenas de um aspecto do estado dos objetos.  Mas, no exemplo sobre dinheiro, a declara√ß√£o pode ser aquela que descreve v√°rios par√¢metros: "Estou encalhado, n√£o como h√° muito tempo, mas estou feliz!".  √â muito importante notar aqui que o estado √© algo impermanente.  Isso significa que pode mudar.  Portanto, quando aprendemos sobre o estado atual de um determinado objeto, entendemos que seu estado real pode mudar alguns segundos ou minutos depois de aprendermos sobre ele. <br><br>  Quando lidamos com programas, alguns recursos est√£o associados ao conceito de "estado".  Em primeiro lugar, o estado do aplicativo √© representado por dados armazenados em algum lugar.  Por exemplo, esses dados podem ser armazenados na mem√≥ria (por exemplo, como um objeto JavaScript), mas podem ser armazenados em um arquivo, em um banco de dados e usando algum mecanismo de cache como o Redis.  Em segundo lugar, o estado de um aplicativo geralmente est√° vinculado √† sua inst√¢ncia espec√≠fica.  Portanto, quando falamos sobre o estado do aplicativo, queremos dizer uma inst√¢ncia espec√≠fica desse aplicativo, um processo, um ambiente de trabalho organizado no aplicativo para um usu√°rio espec√≠fico.  Um estado de aplicativo pode incluir, por exemplo, as seguintes informa√ß√µes: <br><br><ul><li>  O usu√°rio est√° logado ou n√£o?  Em caso afirmativo, quanto tempo dura a sess√£o e quando expirar√°? </li><li>  Quantos pontos o usu√°rio marcou?  Essa pergunta √© relevante, por exemplo, para um determinado jogo. </li><li>  Onde exatamente o usu√°rio pausou o v√≠deo?  Esta pergunta pode ser feita sobre o aplicativo player de v√≠deo. </li></ul><br>  Se falarmos sobre o estado dos aplicativos em um n√≠vel inferior, ele poder√° incluir, por exemplo, as seguintes informa√ß√µes: <br><br><ul><li>  Quais vari√°veis ‚Äã‚Äãs√£o definidas no ambiente atual em que o aplicativo est√° sendo executado (isso se refere √†s chamadas "vari√°veis ‚Äã‚Äãde ambiente"). </li><li>  Quais arquivos o programa est√° usando atualmente? </li></ul><br>  Observando o "instant√¢neo" (geralmente chamado de "instant√¢neos" - do instant√¢neo) do estado do aplicativo a qualquer momento, podemos aprender sobre as condi√ß√µes em que o aplicativo funcionou naquele momento e, se necess√°rio, recriar essas condi√ß√µes: aplicativo para o estado em que estava no momento de receber o instant√¢neo. <br><br>  O estado pode ser modificado durante a execu√ß√£o de determinadas a√ß√µes pelo usu√°rio.  Por exemplo, se o usu√°rio mover corretamente o personagem do jogo em um jogo simples, isso poder√° aumentar o n√∫mero de pontos.  Em aplica√ß√µes bastante complexas, a abordagem para modificar um estado pode se tornar mais complicada; as altera√ß√µes de estado podem vir de diferentes fontes. <br><br>  Por exemplo, em um jogo multiplayer, quantos pontos um usu√°rio depende n√£o apenas de suas a√ß√µes, mas tamb√©m das a√ß√µes daqueles que jogam com ele no mesmo time.  E se um personagem controlado por computador atacar com sucesso um personagem do jogo que o usu√°rio controla, o usu√°rio poder√° perder uma certa quantidade de pontos. <br><br>  Imagine que estamos desenvolvendo um aplicativo front-end como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PWA Twitter</a> .  Este √© um aplicativo de uma p√°gina em que existem v√°rias guias, por exemplo - P√°gina inicial, Pesquisa, Notifica√ß√µes e Mensagens.  Cada uma dessas guias possui seu pr√≥prio espa√ßo de trabalho, destinado a exibir determinadas informa√ß√µes e a sua modifica√ß√£o.  Todos esses dados formam o estado do aplicativo.  Assim, novos tweets, notifica√ß√µes e mensagens chegam no aplicativo a cada poucos segundos.  O usu√°rio pode trabalhar com o programa e com esses dados.  Por exemplo, ele pode criar um tweet ou exclu√≠-lo, ele pode retuitar um tweet, ele pode ler notifica√ß√µes, enviar mensagens para algu√©m e assim por diante.  Tudo o que foi discutido modifica o estado do aplicativo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f01/221/468/f01221468374f7a04c099abb43513871.png"></div><br>  <i><font color="#999999">Todas essas guias t√™m seu pr√≥prio conjunto de componentes da interface do usu√°rio usados ‚Äã‚Äãpara exibir e modificar dados.</font></i>  <i><font color="#999999">O estado do aplicativo pode ser afetado pelos dados que entram no aplicativo de fora e pelas a√ß√µes do usu√°rio</font></i> <br><br>  √â claro que em tal aplicativo, as fontes de altera√ß√µes de estado podem ser entidades diferentes, enquanto as altera√ß√µes iniciadas por fontes diferentes podem ocorrer quase simultaneamente.  Se gerenciarmos o estado manualmente, pode ser dif√≠cil monitorar o que est√° acontecendo.  Essas dificuldades levam a contradi√ß√µes.  Por exemplo, um tweet pode ser exclu√≠do, mas ainda ser√° exibido no fluxo de tweets.  Ou, digamos, o usu√°rio possa ler a notifica√ß√£o ou a mensagem, mas ainda ser√° exibida no programa como n√£o visualizada. <br><br>  O usu√°rio pode gostar do tweet, um cora√ß√£o aparecer√° na interface do programa, mas uma solicita√ß√£o de rede que envia informa√ß√µes sobre o mesmo para o servidor n√£o funcionar√°.  Como resultado, o que o usu√°rio v√™ ser√° diferente do que est√° armazenado no servidor.  √â para evitar tais situa√ß√µes que o Redux pode ser necess√°rio. <br><br><h2>  <font color="#3AC1EF">Como o Redux funciona?</font> </h2><br>  Na biblioteca Redux, existem tr√™s conceitos principais que visam tornar o gerenciamento do estado do aplicativo simples e direto: <br><br><ol><li>  Armazenamento (loja).  Um reposit√≥rio Redux √© um objeto JavaScript que representa o estado de um aplicativo.  Ela desempenha o papel de "a √∫nica fonte de dados confi√°veis".  Isso significa que o aplicativo inteiro deve confiar no armazenamento como a √∫nica entidade respons√°vel por representar o estado. </li><li>  Ac√ß√µes  O armazenamento de estado √© somente leitura.  Isso significa que n√£o pode ser modificado acessando-o diretamente.  A √∫nica maneira de modificar o conte√∫do do reposit√≥rio √© usar a√ß√µes.  Qualquer componente que queira alterar o estado deve executar a a√ß√£o apropriada. </li><li>  Redutores (redutores), tamb√©m chamados de "conversores".  Um redutor √© uma fun√ß√£o pura que descreve como um estado √© modificado por meio de a√ß√µes.  O redutor assume o estado e a a√ß√£o atuais, cuja execu√ß√£o foi solicitada por um determinado componente do aplicativo, ap√≥s o qual retorna o estado transformado. </li></ol><br>  O uso desses tr√™s conceitos significa que o aplicativo n√£o deve mais monitorar diretamente eventos que s√£o fontes de altera√ß√µes de estado (a√ß√µes do usu√°rio, respostas da API, ocorr√™ncia de eventos associados ao recebimento de determinados dados por meio do protocolo WebSocket etc.) e tomar decis√µes sobre como esses eventos afetar√£o a condi√ß√£o. <br><br>  Ao usar o modelo Redux, esses eventos podem acionar a√ß√µes que mudar√£o de estado.  Os componentes que precisam usar dados armazenados no estado do aplicativo podem simplesmente se inscrever nas altera√ß√µes de estado e receber informa√ß√µes de seu interesse.  Ao usar todos esses mecanismos, o Redux est√° comprometido em fazer altera√ß√µes previs√≠veis no estado do aplicativo. <br><br>  Aqui est√° um exemplo esquem√°tico que demonstra como voc√™ pode organizar um sistema simples de gerenciamento de estado usando o Redux em nosso aplicativo fict√≠cio: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createStore } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  const tweets = (state = {tweets: []}, action) =&gt; {  switch (action.type) {    //     ,     .    case 'SHOW_NEW_TWEETS':      state.numberOfNewTweets = action.count;      return state.tweets.concat([action.tweets]);    default:      return state;  } }; //  ,     . SHOW_NEW_TWEETS const newTweetsAction = (tweets) =&gt; {  return {      type: 'SHOW_NEW_TWEETS',      tweets: tweets,      count: tweets.length  }; }; const store = createStore(tweets); twitterApi.fetchTweets()  .then(response =&gt; {    //  ,        ,    //    Redux.    store.dispatch(newTweetsAction(response.data));  }); //  ,    SHOW_NEW_TWEETS     //         . const postTweet = (text) =&gt; {  twitterApi.postTweet(text)  .then(response =&gt; {    store.dispatch(newTweetsAction([response.data]));  }); }; // ,  ,   WebSocket,   . //         . SHOW_NEW_TWEETS socket.on('newTweets', (tweets) =&gt; { store.dispatch(newTweetsAction(tweets)); }; //     ,  React,       , // ,         . //         , //    . store.subscribe(() =&gt; {  const { tweets } = store.getSTate();  render(tweets); });</span></span></code> </pre> <br>  Tomando esse c√≥digo como base, podemos equipar nosso sistema de gerenciamento de estados de aplicativos com a√ß√µes adicionais e envi√°-los de diferentes locais do aplicativo sem correr o risco de ficar confuso. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui est√° o</a> material com o qual voc√™ pode aprender mais sobre os tr√™s princ√≠pios fundamentais do Redux. <br><br>  Agora vamos falar sobre o uso do Redux em um ambiente de servidor. <br><br><h2>  <font color="#3AC1EF">Migrando princ√≠pios de Redux para o ambiente do servidor</font> </h2><br>  Exploramos os recursos do Redux usados ‚Äã‚Äãno desenvolvimento de aplicativos clientes.  Mas, como o Redux √© uma biblioteca JavaScript, teoricamente tamb√©m pode ser usado em um ambiente de servidor.  Vamos refletir sobre como os princ√≠pios acima podem ser aplicados no servidor. <br><br>  Lembra-se de como conversamos sobre como √© o estado do aplicativo cliente?  Note-se que existem algumas diferen√ßas conceituais entre aplicativos cliente e servidor.  Portanto, os aplicativos clientes tendem a manter o estado entre v√°rios eventos, por exemplo, entre a execu√ß√£o de solicita√ß√µes ao servidor.  Esses aplicativos s√£o chamados de aplicativos com estado. <br><br>  Se eles n√£o se esfor√ßarem para armazenar o estado, ent√£o, por exemplo, ao trabalhar com um determinado servi√ßo da Web que exija login e senha, o usu√°rio dever√° executar este procedimento sempre que acessar uma nova p√°gina da interface da Web correspondente. <br><br>  Os aplicativos de back-end, por outro lado, se esfor√ßam para n√£o armazenar o estado (eles tamb√©m s√£o chamados de aplicativos sem estado).  Aqui, falando em "aplicativos de back-end", queremos dizer principalmente projetos baseados em certas APIs separadas dos aplicativos de front-end.  Isso significa que as informa√ß√µes sobre o estado do sistema devem ser fornecidas a aplicativos similares sempre que acessadas.  Por exemplo, a API n√£o monitora se o usu√°rio est√° logado ou n√£o.  Ele determina seu status analisando o token de autentica√ß√£o em seus pedidos para esta API. <br><br>  Isso nos leva a uma raz√£o importante pela qual o Redux dificilmente seria usado em servidores na forma em que descrevemos seus recursos acima. <br><br>  O fato √© que o Redux foi projetado para armazenar o estado tempor√°rio do aplicativo.  Mas o estado do aplicativo armazenado no servidor geralmente deve existir por tempo suficiente.  Se voc√™ usasse o reposit√≥rio Redux no aplicativo Node.js. do lado do servidor, o estado desse aplicativo seria limpo toda vez que o processo do <code>node</code> parar.  E se estamos falando de um servidor PHP que implementa um esquema de gerenciamento de estado semelhante, o estado ser√° limpo quando cada nova solicita√ß√£o chegar ao servidor. <br><br>  A situa√ß√£o √© ainda mais complicada se considerarmos os aplicativos de servidor em termos de escalabilidade.  Se voc√™ tivesse que escalar o aplicativo horizontalmente, aumentando o n√∫mero de servidores, haveria muitos processos Node.js. em execu√ß√£o ao mesmo tempo, e cada um deles teria sua pr√≥pria op√ß√£o de estado.  Isso significa que, com o recebimento simult√¢neo de duas solicita√ß√µes id√™nticas ao back-end, diferentes respostas poderiam ter sido fornecidas. <br><br>  Como aplicar os princ√≠pios de gerenciamento de estado discutidos por n√≥s no servidor?  Vamos dar uma outra olhada nos conceitos de Redux e ver como eles geralmente s√£o usados ‚Äã‚Äãem um ambiente de servidor: <br><br><ol><li>  Reposit√≥rio.  No back-end, "a √∫nica fonte de dados confi√°veis" √© geralmente um banco de dados.  √Äs vezes, para facilitar o acesso aos dados que geralmente s√£o necess√°rios ou por algum outro motivo, uma c√≥pia de parte do banco de dados pode ser feita - na forma de um cache ou na forma de um arquivo.  Normalmente, essas c√≥pias s√£o somente leitura.  Os mecanismos que os controlam s√£o inscritos nas altera√ß√µes no reposit√≥rio principal e, quando essas altera√ß√µes ocorrem, atualizam o conte√∫do das c√≥pias. </li><li>  A√ß√µes e redutores.  Eles s√£o os √∫nicos mecanismos usados ‚Äã‚Äãpara mudar de estado.  Na maioria dos aplicativos de back-end, o c√≥digo √© escrito em um estilo imperativo, o que n√£o √© particularmente prop√≠cio ao uso de conceitos e redutores de a√ß√£o. </li></ol><br>  Considere dois padr√µes de design que, por sua natureza, s√£o semelhantes ao que a biblioteca Redux pretende fazer.  Estes s√£o CQRS e Event Sourcing.  De fato, eles apareceram antes do Redux, sua implementa√ß√£o pode ser extremamente dif√≠cil, ent√£o falaremos sobre eles muito brevemente. <br><br><h2>  <font color="#3AC1EF">CQRS e fornecimento de eventos</font> </h2><br>  CQRS (Segrega√ß√£o de responsabilidade de consulta de comando) √© um padr√£o de design, na implementa√ß√£o em que o aplicativo l√™ dados do armazenamento usando apenas consultas e gravando apenas usando comandos. <br><br>  Ao usar o CQRS, a √∫nica maneira de alterar o estado de um aplicativo √© enviar um comando.  Os comandos s√£o semelhantes √†s a√ß√µes do Redux.  Por exemplo, no Redux, voc√™ pode escrever um c√≥digo que corresponda a esse esquema: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> action = { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'CREATE_NEW_USER'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: ... }; store.dispatch(action); <span class="hljs-comment"><span class="hljs-comment">//      const createUser = (state = {}, action) =&gt; { // };</span></span></code> </pre> <br>  Ao usar o CQRS, algo assim seria assim: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      class Command { handle() { } } class CreateUserCommand extends Command { constructor(user) {   super();   this.user = user; } handle() {   //        } } const createUser = new CreateUserCommand(user); //   (   handle()) dispatch(createUser); //      CommandHandler commandHandler.handle(createUser);</span></span></code> </pre> <br>  As consultas s√£o mecanismos de leitura de dados no modelo CQRS.  Eles s√£o equivalentes √† constru√ß√£o <code>store.getState()</code> .  Em uma implementa√ß√£o simples do CQRS, as consultas interagir√£o diretamente com o banco de dados, recuperando registros dele. <br><br>  O modelo de fornecimento de eventos foi projetado para registrar todas as altera√ß√µes no estado do aplicativo como uma sequ√™ncia de eventos.  Este modelo √© mais adequado para aplicativos que precisam saber n√£o apenas sobre seu estado atual, mas tamb√©m sobre o hist√≥rico de suas altera√ß√µes, sobre como o aplicativo atingiu seu estado atual.  Como exemplos, voc√™ pode citar o hist√≥rico de opera√ß√µes com contas banc√°rias, rastreamento de encomendas, trabalho com pedidos em lojas on-line, organiza√ß√£o de transporte de carga e log√≠stica. <br><br>  Aqui est√° um exemplo de implementa√ß√£o do modelo de Event Sourcing: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    Event Sourcing function transferMoneyBetweenAccounts(amount, fromAccount, toAccount) {   BankAccount.where({ id: fromAccount.id })     .decrement({ amount });   BankAccount.where({ id: toAccount.id })     .increment({ amount }); } function makeOnlinePayment(account, amount) {   BankAccount.where({ id: account.id })     .decrement({ amount }); } //    Event Sourcing function transferMoneyBetweenAccounts(amount, fromAccount, toAccount) {   dispatchEvent(new TransferFrom(fromAccount, amount, toAccount));   dispatchEvent(new TransferTo(toAccount, amount, fromAccount)); } function makeOnlinePayment(account, amount) {   dispatchEvent(new OnlinePaymentFrom(account, amount)); } class TransferFrom extends Event {   constructor(account, amount, toAccount) {     this.account = account;     this.amount = amount;     this.toAccount = toAccount;   }     handle() {     //    OutwardTransfer        OutwardTransfer.create({ from: this.account, to: this.toAccount, amount: this.amount, date: Date.now() });         //          BankAccount.where({ id: this.account.id })       .decrement({ amount: this.amount });   } } class TransferTo extends Event {   constructor(account, amount, fromAccount) {     this.account = account;     this.amount = amount;     this.fromAccount = fromAccount;   }     handle() {     //    InwardTransfer        InwardTransfer.create({ from: this.fromAccount, to: this.account, amount: this.amount, date: Date.now() });         //          BankAccount.where({ id: this.account.id })       .increment({ amount: this.amount });   } } class OnlinePaymentFrom extends Event {   constructor(account, amount) {     this.account = account;     this.amount = amount;   }     handle() {     //    OnlinePayment        OnlinePayment.create({ from: this.account, amount: this.amount, date: Date.now() });         //          BankAccount.where({ id: this.account.id })       .decrement({ amount: this.amount });   } }</span></span></code> </pre> <br>  O que acontece aqui tamb√©m se assemelha ao trabalho com a√ß√µes Redux. <br><br>  No entanto, o mecanismo de registro de eventos tamb√©m organiza o armazenamento de informa√ß√µes a longo prazo sobre cada altera√ß√£o de estado, e n√£o apenas o armazenamento do pr√≥prio estado.  Isso nos permite reproduzir essas altera√ß√µes no momento em que precisamos, restaurando assim o conte√∫do do estado do aplicativo nesse momento.  Por exemplo, se precisamos entender quanto dinheiro havia na conta banc√°ria para uma determinada data, precisamos reproduzir apenas os eventos que ocorreram com a conta banc√°ria at√© chegarmos √† data certa.  Os eventos nesse caso s√£o representados por recebimentos de fundos na conta e debitados deles, debitando a comiss√£o do banco e outras opera√ß√µes similares.  Se ocorrerem erros (ou seja, quando ocorrerem eventos contendo dados incorretos), podemos invalidar o estado atual do aplicativo, corrigir os dados correspondentes e retornar ao estado atual do aplicativo, agora formado sem erros. <br><br>  Os modelos CQRS e Event Sourcing s√£o frequentemente usados ‚Äã‚Äãjuntos.  E, curiosamente, o Redux, de fato, √© parcialmente baseado nesses modelos.  Os comandos podem ser escritos para que, quando chamados, enviem eventos.  Em seguida, os eventos interagem com o reposit√≥rio (banco de dados) e atualizam o estado.  Em aplicativos em tempo real, os objetos de consulta tamb√©m podem ouvir eventos e receber informa√ß√µes de status atualizadas do reposit√≥rio. <br><br>  O uso de qualquer um desses modelos em um aplicativo simples pode complic√°-lo desnecessariamente.  No entanto, no caso de aplicativos criados para solucionar problemas complexos de neg√≥cios, o CQRS e o Event Sourcing s√£o abstra√ß√µes poderosas que ajudam a modelar melhor a √°rea de assunto desses aplicativos e melhorar o gerenciamento de estado. <br><br>  Observe que os padr√µes CQRS e Event Sourcing podem ser implementados de maneiras diferentes, enquanto algumas de suas implementa√ß√µes s√£o mais complexas que outras.  Consideramos apenas exemplos muito simples de sua implementa√ß√£o.  Se voc√™ estiver criando aplicativos de servidor no Node.js, d√™ uma olhada no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wolkenkit</a> .  Essa estrutura, entre as encontradas nesta √°rea, fornece ao desenvolvedor uma das interfaces mais simples para implementar os modelos CQRS e Event Sourcing. <br><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>  O Redux √© uma √≥tima ferramenta para gerenciar o estado de um aplicativo, a fim de tornar previs√≠veis as altera√ß√µes de estado.  Neste artigo, falamos sobre os principais conceitos desta biblioteca e descobrimos que, embora o Redux em um ambiente de servidor provavelmente n√£o seja uma boa ideia, voc√™ pode aplicar princ√≠pios semelhantes em um servidor usando os modelos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CQRS</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Event Sourcing</a> . <br><br>  <b>Caros leitores!</b>  Como voc√™ organiza o gerenciamento de estado dos aplicativos cliente e servidor? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt437804/">https://habr.com/ru/post/pt437804/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt437792/index.html">G√™meos obteve resultados "misteriosos" ao verificar 5 servi√ßos de pesquisa de ancestrais do DNA</a></li>
<li><a href="../pt437794/index.html">Backup de dados r√°pido e confi√°vel na nuvem 2</a></li>
<li><a href="../pt437796/index.html">AlphaStar implementou a velocidade sobre-humana como um patch para erros de treinamento em simula√ß√£o?</a></li>
<li><a href="../pt437800/index.html">ScrumMas na equipe de an√°lise: antes da decolagem</a></li>
<li><a href="../pt437802/index.html">Inove a tecnologia da nuvem: nuvem catastr√≥fica</a></li>
<li><a href="../pt437806/index.html">EcmaScript 10 - JavaScript deste ano (ES2019)</a></li>
<li><a href="../pt437808/index.html">Perf e flamegraphs</a></li>
<li><a href="../pt437810/index.html">Realidade corporativa</a></li>
<li><a href="../pt437812/index.html">Xcode 10.2, macOS Mojave 10.14.4, iOS 12.1 e outros betas</a></li>
<li><a href="../pt437814/index.html">Xcode 10.2, macOS Mojave 10.14.4, iOS 12.1 e outras vers√µes beta</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>