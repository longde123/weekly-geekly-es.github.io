<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯеЯ ЁЯСРЁЯП╗ ЁЯСйЁЯП╛тАНЁЯПл рднрд╛рдЧ 2: рдПрдХ 3 рдбреА рдкреНрд░рд┐рдВрдЯрд░ рдореЗрдВ рд╡реНрдпрд╡рдзрд╛рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдХрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд░реВ рдХреЗ рдпреВрдбреАрдмреА рдкреАрдПрд╕рдУрд╕реА рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ ЁЯРн ЁЯСИЁЯП╛ тП▒я╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд┐рдЫрд▓реА рдмрд╛рд░, рд╣рдордиреЗ рд╕реНрдЯреЗрдкрд░ рдореЛрдЯрд░реНрд╕ рдХреЗ рд▓рд┐рдП рджрд╛рд▓реЛрдВ рдХреЗ рдЙрддреНрдкрд╛рджрди рдХреЗ рд╡рд┐рдХрд▓реНрдк рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛, рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕реЗ рдлрд░реНрдорд╡реЗрдпрд░ рд╕реНрддрд░ рддрдХ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ред рдкреВрд░реНрдг рд╕рдлрд▓рддрд╛ рдХ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рднрд╛рдЧ 2: рдПрдХ 3 рдбреА рдкреНрд░рд┐рдВрдЯрд░ рдореЗрдВ рд╡реНрдпрд╡рдзрд╛рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдХрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд░реВ рдХреЗ рдпреВрдбреАрдмреА рдкреАрдПрд╕рдУрд╕реА рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434742/"><img src="https://habrastorage.org/webt/vx/mr/gy/vxmrgyrhaaffninezudmxyiex9c.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд┐рдЫрд▓реА рдмрд╛рд░,</a> рд╣рдордиреЗ рд╕реНрдЯреЗрдкрд░ рдореЛрдЯрд░реНрд╕ рдХреЗ рд▓рд┐рдП рджрд╛рд▓реЛрдВ рдХреЗ рдЙрддреНрдкрд╛рджрди рдХреЗ рд╡рд┐рдХрд▓реНрдк рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛, рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕реЗ рдлрд░реНрдорд╡реЗрдпрд░ рд╕реНрддрд░ рддрдХ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ред  рдкреВрд░реНрдг рд╕рдлрд▓рддрд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ 40 kHz рддрдХ рдХреА рдЖрд╡реГрддреНрддрд┐ рдХреЗ рд╕рд╛рде рдЖрдиреЗ рд╡рд╛рд▓реЗ рд╡реНрдпрд╡рдзрд╛рдиреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреА рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рдХрд╛ рд╡рд╛рджрд╛ рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЙрд╕ рд╡рд┐рдХрд▓реНрдк рдореЗрдВ рдХрдИ рд╕реНрдкрд╖реНрдЯ рдЦрд╛рдорд┐рдпрд╛рдВ рд╣реИрдВред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╡рд╣рд╛рдБ рддреНрд╡рд░рдг рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рджреВрд╕рд░реЗ, рдЙрд╕ рд╕рдорд╛рдзрд╛рди рдореЗрдВ рдЕрдиреБрдореЗрдп рдЪрд░рдг рдЖрд╡реГрддреНрддрд┐рдпреЛрдВ рдХреА рдЧреНрд░реЗрдиреНрдпреБрд▓рд┐рдЯреА рд╕реИрдХрдбрд╝реЛрдВ рд╣рд░реНрдЯреНрдЬ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, 40,000 рд╣рд░реНрдЯреНрдЬ рдФрд░ 39966 рд╣рд░реНрдЯреНрдЬ рдХреА рдЖрд╡реГрддреНрддрд┐рдпреЛрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрди рджреЛ рдореВрд▓реНрдпреЛрдВ рдХреЗ рдмреАрдЪ рдПрдХ рдкрд░рд┐рдорд╛рдг рдХреЗ рд╕рд╛рде рдЖрд╡реГрддреНрддрд┐рдпреЛрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рдирд╛ рдЕрд╕рдВрднрд╡ рд╣реИ)ред <br><a name="habracut"></a><br><h2>  рддреНрд╡рд░рдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди </h2><br>  рдХреНрдпрд╛ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдЬрдЯрд┐рд▓ рдХрд┐рдП рдмрд┐рдирд╛ рд╕рдорд╛рди рдпреВрдбреАрдмреА рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрдХреЗрддрд┐рдд рдиреБрдХрд╕рд╛рди рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ?  рдЪрд▓реЛ рдареАрдХ рд╣реИред  рдЪрд▓реЛ рд╕рдмрд╕реЗ рдореБрд╢реНрдХрд┐рд▓ рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ - рддреНрд╡рд░рдг рдХреЗ рд╕рд╛рдеред  рдкрде рдХреА рд╢реБрд░реБрдЖрдд рдФрд░ рдЕрдВрдд рдореЗрдВ рддреНрд╡рд░рдг рдЬреЛрдбрд╝реЗ рдЬрд╛рддреЗ рд╣реИрдВред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЕрдЧрд░ рдЙрдЪреНрдЪ рдЖрд╡реГрддреНрддрд┐ рд╡рд╛рд▓реЗ рджрд╛рд▓реЛрдВ рдХреЛ рддреБрд░рдВрдд рд╕реНрдЯреЗрдкрд░ рдореЛрдЯрд░ рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдСрдкрд░реЗрд╢рди рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рд╕реЗ рдЕрдзрд┐рдХ рд╡рд░реНрддрдорд╛рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  рдЙрдЪреНрдЪ рдЕрдиреБрдореЗрдп рд╡рд░реНрддрдорд╛рди рд╣реАрдЯрд┐рдВрдЧ рдФрд░ рд╢реЛрд░ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рд╕реАрдорд┐рдд рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред  рд▓реЗрдХрд┐рди рддрдм рдЗрдВрдЬрди рд╢реБрд░реВ рдореЗрдВ рд╣реА рдХрджрдореЛрдВ рдХреЛ рдЫреЛрдбрд╝ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП рдЗрдВрдЬрди рдХреЛ рд╕реБрдЪрд╛рд░реВ рд░реВрдк рд╕реЗ рдЧрддрд┐ рджреЗрдирд╛ рдмреЗрд╣рддрд░ рд╣реИред  рджреВрд╕рд░реЗ, рдпрджрд┐ рдХреЛрдИ рднрд╛рд░реА рд╕рд┐рд░ рдЕрдЪрд╛рдирдХ рд░реБрдХ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдЬрдбрд╝рддрд╛ рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реЗ рд░реЛрдЧрд┐рдпреЛрдВ рдХрд╛ рдЕрдиреБрднрд╡ рдХрд░рддрд╛ рд╣реИред  рд▓рд╣рд░реЗрдВ рдкреНрд▓рд╛рд╕реНрдЯрд┐рдХ рдкрд░ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдпрд╣ рди рдХреЗрд╡рд▓ рддрд┐рддрд░ рдмрд┐рддрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд▓реНрдХрд┐ рд╕рд┐рд░ рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдЖрд╕рд╛рдиреА рд╕реЗ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рд╢рд╛рд╕реНрддреНрд░реАрдп рд░реВрдк рд╕реЗ, рдЯреНрд░реЗрдкреЗрдЬрд╝реЙрдЗрдб рдХреЗ рд░реВрдк рдореЗрдВ рдЗрдВрдЬрди рдХреА рдЧрддрд┐ рдХрд╛ рдПрдХ рдЧреНрд░рд╛рдл рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣рд╛рдБ рдорд╛рд░реНрд▓рд┐рди рдлрд╝рд░реНрдорд╡реЗрдпрд░ рдХреЗ рд╕реНрд░реЛрдд рдХреЛрдб рд╕реЗ рдПрдХ рдЕрдВрд╢ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/wm/gg/ce/wmggcetcc0vy5tfgs3xsr2ewwoc.png"><br><br>  рдореИрдВ рдпрд╣ рднреА рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдпреВрдбреАрдмреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред  рдпрд╣ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рд╣реИ рдХрд┐ рдПрдХ рдФрд░ рдкреНрд░рдХрд╛рд░ рдХрд╛ рддреНрд╡рд░рдг рдЕрдм рдлреИрд╢рди рдореЗрдВ рд╣реИ: рдЯреНрд░реЗрдкреЛрдЬрд╝рд╛рдЗрдбрд▓ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдПрд╕-рдХрд░реНрд╡ред  рдЙрдирдХрд╛ рд╢реЗрдбреНрдпреВрд▓ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/rs/hy/q9/rshyq94_sz6et-lgsbrpprdmyks.png"><br><br>  рдпрд╣ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдпреВрдбреАрдмреА рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рд╣реИред  рдЫреЛрдбрд╝ рджреЗрдирд╛?  рдмрд┐рд▓рдХреБрд▓ рдирд╣реАрдВ!  рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рд╣реА рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рд╣реИ рдХрд┐ рдпреВрдбреАрдмреА рдПрдХ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд▓рд╛рдЧреВ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдмрд╕ рдЖрдкрдХреЛ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕реЗ рдлрд░реНрдорд╡реЗрдпрд░ рд╕реНрддрд░ рддрдХ рдХреЛрдб рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рдХреЗрдВрджреНрд░реАрдп рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рджреЗрдВ, рдФрд░ рдЪрд░рдг рджрд╛рд▓реЛрдВ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдЕрднреА рднреА рдпреВрдбреАрдмреА рдХрд░рддрд╛ рд╣реИред  рдХреЗрдВрджреНрд░реАрдп рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рдкрд╛рд╕ рдЧрдгрдирд╛ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕рдордп рд╣реИред  рдмрд╛рд░-рдмрд╛рд░ рдЖрдиреЗ рд╡рд╛рд▓реА рд░реБрдХрд╛рд╡рдЯреЛрдВ рдХреЛ рджреВрд░ рдХрд░рдиреЗ рдХрд╛ рдХрд╛рдо рдХрд╛рдлреА рд╢рд╛рдиреНрддрд┐ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд░рд╣реЗрдЧрд╛, рдФрд░ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдлрд░реНрдорд╡реЗрдпрд░ рд╕реНрддрд░ рдкрд░ рд▓реЗ рдЬрд╛рдиреЗ рдХреА рдХрд┐рд╕реА рдиреЗ рднреА рдпреЛрдЬрдирд╛ рдирд╣реАрдВ рдмрдирд╛рдИ рд╣реИред <br><br>  рдмреЗрд╢рдХ, рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рдореЗрдореЛрд░реА рдореЗрдВ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рдФрд░ UDB DMA рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд╣рд╛рдВ рд╕реЗ рдбреЗрдЯрд╛ рдЙрдард╛рдПрдВрдЧреЗред  рд▓реЗрдХрд┐рди рдХрд┐рддрдиреА рдореЗрдореЛрд░реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ?  рдПрдХ рдорд┐рд▓реАрдореАрдЯрд░ рдХреЛ 200 рдЪрд░рдгреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдЕрдм 24-рдмрд┐рдЯ рдПрдиреНрдХреЛрдбрд┐рдВрдЧ рдХреЗ рд╕рд╛рде, рдпрд╣ 600 рдорд┐рдореА рдкреНрд░рддрд┐ 1 рдорд┐рдореА рд╕рд┐рд░ рдЖрдВрджреЛрд▓рди рд╣реИ!  рдПрдХ рдмрд╛рд░ рдлрд┐рд░, рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рдЯреБрдХрдбрд╝реЛрдВ рдореЗрдВ рд╕рдм рдХреБрдЫ рд╕рдВрдЪрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рдЧрд╛рддрд╛рд░ рдирд╣реАрдВ, рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА рд▓рдЧрд╛рддрд╛рд░ рд░реБрдХрд╛рд╡рдЯреЗрдВ?  рд╕рдЪ рдореЗрдВ рдирд╣реАрдВ!  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдкреАрдПрд╕рдУрд╕реА рдХрд╛ рдбреАрдПрдордП рддрдВрддреНрд░ рд╡рд┐рд╡рд░рдгрдХреЛрдВ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред  рдПрдХ рд╡рд┐рд╡рд░рдгрдХ рд╕реЗ рдХрд╛рд░реНрдп рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдбреАрдПрдордП рдирд┐рдпрдВрддреНрд░рдХ рдЖрдЧреЗ рдмрдврд╝рддрд╛ рд╣реИред  рдФрд░ рдЗрд╕рд▓рд┐рдП, рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ рд╕рд╛рде, рдЖрдк рдмрд╣реБрдд рд╕рд╛рд░реЗ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо рдЗрд╕реЗ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рджрд╕реНрддрд╛рд╡реЗрдЬ рд╕реЗ рдХреБрдЫ рдбреНрд░рд╛рдЗрдВрдЧ рдХреЗ рд╕рд╛рде рдЪрд┐рддреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ: <br><br><img src="https://habrastorage.org/webt/ju/hv/6b/juhv6bqptp3uagog5bfgxlmxw0q.png"><br><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдЗрд╕ рдкреНрд░рдгрд╛рд▓реА рдХрд╛ рдЙрдкрдпреЛрдЧ рддреАрди рд╡рд┐рд╡рд░рдгрдХреЛрдВ рдХреА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рдХреЗ рднреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><table><tbody><tr><th>  рд╕рдВрдЦреНрдпрд╛ </th><th>  рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг </th></tr><tr><td>  1 </td><td>  рдкрддрд╛ рд╡реГрджреНрдзрд┐ рдХреЗ рд╕рд╛рде рдореЗрдореЛрд░реА рд╕реЗ FIFO рддрдХред  рдПрдХ рддреНрд╡рд░рдг рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде рдПрдХ рдЕрдиреБрднрд╛рдЧ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред </td></tr><tr><td>  2 </td><td>  рдкрддрд╛ рд╡реГрджреНрдзрд┐ рдХреЗ рдмрд┐рдирд╛ рд╕реНрдореГрддрд┐ рд╕реЗ рдлреАрдлреЛ рддрдХред  рдирд┐рд░рдВрддрд░ рдЧрддрд┐ рдХреЗ рд▓рд┐рдП рд╕реНрдореГрддрд┐ рдореЗрдВ рдПрдХ рд╣реА рд╢рдмреНрдж рдХреЗ рд▓рд┐рдП рд╣рд░ рд╕рдордп рднреЗрдЬрддрд╛ рд╣реИред </td></tr><tr><td>  3 </td><td>  рдкрддрд╛ рд╡реГрджреНрдзрд┐ рдХреЗ рд╕рд╛рде рдореЗрдореЛрд░реА рд╕реЗ FIFO рддрдХред  рдмреНрд░реЗрдХрд┐рдВрдЧ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде рдПрдХ рдЕрдиреБрднрд╛рдЧ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред <br></td></tr></tbody></table><br>  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдореБрдЦреНрдп рдкрде рдЪрд░рдг 2 рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╣реИ, рдФрд░ рд╡рд╣рд╛рдВ рдПрдХ рд╣реА рд╢рдмреНрдж рдХрд╛ рд╢рд╛рд░реАрд░рд┐рдХ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдирд┐рд░рдВрддрд░ рдЧрддрд┐ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдореЗрдореЛрд░реА рдХреА рдЦрдкрдд рдмрдбрд╝реА рдирд╣реАрдВ рд╣реИред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рджреВрд╕рд░реЗ рд╡рд┐рд╡рд░рдгрдХ рдХреЛ рднреМрддрд┐рдХ рд░реВрдк рд╕реЗ рджреЛ рдпрд╛ рддреАрди рд╡рд┐рд╡рд░рдгрдХреЛрдВ рджреНрд╡рд╛рд░рд╛ рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рд╣реИ рдХрд┐ рдЯреАрдЖрд░рдПрдо рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЕрдзрд┐рдХрддрдо рдкрдВрдкрд┐рдВрдЧ рдХреА рд▓рдВрдмрд╛рдИ 64 рдХрд┐рд▓реЛрдмрд╛рдЗрдЯ (рд╕рдВрд╢реЛрдзрди рдХрдо рд╣реЛрдЧреА) рд╣реЛ рд╕рдХрддреА рд╣реИред  рдпрд╛рдиреА 32,767 рд╢рдмреНрджред  200 рдорд┐рд▓реАрдореАрдЯрд░ рдкреНрд░рддрд┐ рдорд┐рд▓реАрдореАрдЯрд░ рдХреА рджрд░ рд╕реЗ рдпрд╣ 163 рдорд┐рд▓реАрдореАрдЯрд░ рдХреЗ рдкрде рдХреЗ рдЕрдиреБрд░реВрдк рд╣реЛрдЧрд╛ред  рдЗрдВрдЬрди рдХреЛ рдПрдХ рдмрд╛рд░ рдореЗрдВ рдЕрдзрд┐рдХрддрдо рджреВрд░реА рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдЖрдкрдХреЛ рджреЛ рдпрд╛ рддреАрди рднрд╛рдЧреЛрдВ рдХрд╛ рдПрдХ рдЦрдВрдб рдмрдирд╛рдирд╛ рдкрдбрд╝ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдлрд┐рд░ рднреА, рдореЗрдореЛрд░реА (рдФрд░ рдпреВрдбреАрдмреА рдмреНрд▓реЙрдХреЛрдВ рдХреЗ рдЦрд░реНрдЪ) рдХреЛ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВ 24-рдмрд┐рдЯ рдбрд╛рдЯрд╛рдкрд╛рде рдмреНрд▓реЙрдХреЛрдВ рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рдХрд░рддрд╛ рд╣реВрдВ, рдЕрдзрд┐рдХ рдХрд┐рдлрд╛рдпрддреА 16-рдмрд┐рдЯреНрд╕ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░ рд░рд╣рд╛ рд╣реВрдВред <br><br>  <b>So.</b>  <b>рд╕рдВрд╢реЛрдзрди рдХрд╛ рдкрд╣рд▓рд╛ рдкреНрд░рд╕реНрддрд╛рд╡ред</b> <b><br><br></b>  <b>рд╕реНрдореГрддрд┐ рдореЗрдВ рдПрд░рд░реНрд╕ рддреИрдпрд╛рд░ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рдЬреЛ рдЪрд░рдгреЛрдВ рдХреА рдЕрд╡рдзрд┐ рдХреЛ рдПрдиреНрдХреЛрдб рдХрд░рддреЗ рд╣реИрдВред</b>  <b>рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА DMA рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ UDB рдХреЛ рдЬрд╛рддреА рд╣реИред</b>  <b>рдЖрдпрддрд╛рдХрд╛рд░ рдЦрдВрдб рдПрдХ рддрддреНрд╡ рдХреА рдПрдХ рд╕рд░рдгреА рджреНрд╡рд╛рд░рд╛ рдПрдиреНрдХреЛрдб рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдбреАрдПрдордП рдмреНрд▓реЙрдХ рдкрддреЗ рдХреЛ рдирд╣реАрдВ рдмрдврд╝рд╛рддрд╛ рд╣реИ, рд╣рд░ рд╕рдордп рдПрдХ рд╣реА рддрддреНрд╡ рдХрд╛ рдЪрдпрди рдХрд░рддрд╛ рд╣реИред</b>  <b>рддреНрд╡рд░рдг, рдЖрдпрддрд╛рдХрд╛рд░ рдФрд░ рдмреНрд░реЗрдХрд┐рдВрдЧ рдЕрдиреБрднрд╛рдЧ рдбреАрдПрдордП рдирд┐рдпрдВрддреНрд░рдХ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╕рд╛рдзрдиреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЬреБрдбрд╝реЗ рд╣реБрдП рд╣реИрдВред</b> <br><br><h2>  рд▓рд▓рд┐рдд рдзреБрди рдорд┐рдбрд░реЗрдВрдЬ </h2><br>  рдЕрдм рд╣рдо рдЗрд╕ рдмрд╛рдд рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ рдХрд┐ рдлрд╝реНрд░реАрдХреНрд╡реЗрдВрд╕реА рдЧреНрд░реИрдиреНрдпреБрд▓реИрд░рд┐рдЯреА рдХреА рд╕рдорд╕реНрдпрд╛ рдХреЛ рдХреИрд╕реЗ рджреВрд░ рдХрд┐рдпрд╛ рдЬрд╛рдПред  рдмреЗрд╢рдХ, рдЗрд╕реЗ рдареАрдХ рд╕реЗ рд╕реЗрдЯ рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред  рд▓реЗрдХрд┐рди, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдореВрд▓ "рдлрд░реНрдорд╡реЗрдпрд░" рднреА рдРрд╕рд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╡реЗ рдмреНрд░реЗрд╕реЗрдирд╣реИрдо рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдХреБрдЫ рдЪрд░рдгреЛрдВ рдореЗрдВ рдПрдХ рдЙрдкрд╛рдп рдХреА рджреЗрд░реА рдХреЛ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдирддреАрдЬрддрди, рдФрд╕рдд рдЖрд╡реГрддреНрддрд┐ рдПрдХ рдЫреЛрдЯреЗ рдФрд░ рдмрдбрд╝реЗ рдореВрд▓реНрдп рдХреЗ рдмреАрдЪ рдордзреНрдпрд╡рд░реНрддреА рд╣реЛ рдЬрд╛рддреА рд╣реИред  рдирд┐рдпрдорд┐рдд рдФрд░ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдЕрд╡рдзрд┐ рдХреЗ рдЕрдиреБрдкрд╛рдд рдХреЛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░рдХреЗ, рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ рдФрд╕рдд рдЖрд╡реГрддреНрддрд┐ рдХреЛ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред  рдпрджрд┐ рд╣рдорд╛рд░реА рдЧрддрд┐ рдЕрдм рдбреЗрдЯрд╛ рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди FIFO рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░реЗрд╖рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ, рдФрд░ рджрд╛рд▓реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдЖрдо рддреМрд░ рдкрд░ рдбреАрдПрдордП рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░реЗрд╖рд┐рдд рд╢рдмреНрджреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реЗрдЯ рдХреА рдЬрд╛рддреА рд╣реИ, рддреЛ рдпреВрдбреАрдмреА рдореЗрдВ рджреЛрдиреЛрдВ рдбреЗрдЯрд╛ рд░рдЬрд┐рд╕реНрдЯрд░ рдореБрдХреНрдд рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдмреИрдЯрд░реА рдореЗрдВ рд╕реЗ рдПрдХ, рдЬреЛ рджрд╛рд▓реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдЧрд┐рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреЛ рднреА рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣рд╛рдБ рд╣рдо рдЙрди рдкрд░ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд PWM рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░реЗрдВрдЧреЗред <br><br>  рдЖрдорддреМрд░ рдкрд░, ALU рдПрдХ рд╣реА рд╕реВрдЪрдХрд╛рдВрдХ рдХреЗ рд╕рд╛рде рд░рдЬрд┐рд╕реНрдЯрд░ рдХреА рддреБрд▓рдирд╛ рдФрд░ рдЕрд╕рд╛рдЗрди рдХрд░рддреЗ рд╣реИрдВред  рдЬрдм рдПрдХ рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВ 0 рдХрд╛ рд╕реВрдЪрдХрд╛рдВрдХ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рджреВрд╕рд░реЗ рдореЗрдВ 1 рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдСрдкрд░реЗрд╢рди рдХреЗ рд╣рд░ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рд▓рд╛рдЧреВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдореИрдВ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рд╕реЗ рд╕реЙрд▓рд┐рдЯреЗрдпрд░ рдХреЛ рдПрдХ рд╕рд╛рде рд░рдЦрдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣рд╛ рдЬрд┐рд╕рдХреЗ рддрд╣рдд PWM рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ рдЪрд┐рддреНрд░ рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/nc/yv/vq/ncyvvqcqptj3lm4an82idlrrl-c.png"><br><br>  рдЬрдм A0 &lt;D1 рдХреА рд╢рд░реНрдд рдкреВрд░реА рд╣реЛ рдЬрд╛рддреА рд╣реИ, рддреЛ рд╣рдо рджрд┐рдП рдЧрдП рдирд╛рдбрд╝реА рдХреА рд▓рдВрдмрд╛рдИ рдореЗрдВ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рд╣рд░рд╛ рдЬреЛрдбрд╝ рджреЗрдВрдЧреЗред  рдЬрдм рд╣рд╛рд▓рдд рд╕рдВрддреБрд╖реНрдЯ рдирд╣реАрдВ рд╣реЛрдЧреА, рд╣рдо рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред <br><br><h2>  рд╕рд╛рдорд╛рдиреНрдп рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдЧреЛрд▓рд╛рдХрд╛рд░ рдШреЛрдбрд╝рд╛ </h2><br>  рдЗрд╕рд▓рд┐рдП, рд╣рдо рдирдП рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП, UDB рдХреЗ рд▓рд┐рдП рд╡рд┐рдХрд╕рд┐рдд рдмреНрд▓реЙрдХ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред  рджрддреНрддрдкрд╛рда рдХреА рдЧрд╣рд░рд╛рдИ рдХреЛ рдмрджрд▓реЗрдВ: <br><br><img src="https://habrastorage.org/webt/cj/-m/ae/cj-mae3coaxgzro0er5mkraun4q.png"><br><br>  рд╣рдореЗрдВ рдкрд┐рдЫрд▓реА рдмрд╛рд░ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рджрддреНрддрдкрд╛рда рд╕реЗ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдирд┐рдХрд╛рд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред <br><br><img src="https://habrastorage.org/webt/ua/td/hn/uatdhnswe_uzmqinll0wyhsyifg.png"><br><br>  рдЙрди рдкрд░ рдбрдмрд▓-рдХреНрд▓рд┐рдХ рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рд╡рд┐рд╡рд░рдг рджреЗрдЦрддреЗ рд╣реИрдВ: <br><br><img src="https://habrastorage.org/webt/vq/3p/24/vq3p24frqv0uiumytbvn-ewhi1w.png"><br><br>  <b>рд░рд╛рдЬреНрдп</b> рдЪрд░ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рдЕрдВрдХ рд╣реИрдВ, рдкреБрд░рд╛рдиреЗ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдордд рднреВрд▓рдирд╛ !!!  рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ, рд▓рдЧрд╛рддрд╛рд░ 0 рдерд╛ред <br><br><img src="https://habrastorage.org/webt/0l/dm/fy/0ldmfyci2byicjdsksvkdkg8k04.png"><br><br>  рдЖрдЯреЛрдореЗрдЯрди рдХрд╛ рд╕рдВрдХреНрд░рдордг рдЧреНрд░рд╛рдл рдореБрдЭреЗ рдЗрд╕ рддрд░рд╣ рдорд┐рд▓рд╛: <br><br><img src="https://habrastorage.org/webt/hb/5u/nq/hb5unqu_fmfc6sd9k7m3_x0wr7s.png"><br><br>  рд╣рдо <b>рдирд┐рд╖реНрдХреНрд░рд┐рдп</b> рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рд╣реИрдВ рдЬрдмрдХрд┐ FIFO1 рдЦрд╛рд▓реА рд╣реИред  рд╡реИрд╕реЗ, FIFO1 рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдФрд░ FIFO0 рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рддреНрдпрд╛рдЧреА рдХреЗ рдмрд╣реБрдд рдЧрдарди рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╣реИред  рдкреАрдбрдмреНрд▓реВрдПрдо рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░рдЬрд┐рд╕реНрдЯрд░ рдП 0 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдкрд▓реНрд╕ рдХреА рдЪреМрдбрд╝рд╛рдИ рд░рдЬрд┐рд╕реНрдЯрд░ рдП 1 рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред  рдФрд░ рдореИрдВ рдЗрд╕реЗ рдХреЗрд╡рд▓ FIFO1 рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ (рд╢рд╛рдпрдж рдЕрдиреНрдп рдЧреБрдкреНрдд рддрд░реАрдХреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╡реЗ рдореБрдЭреЗ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ)ред  рдЗрд╕рд▓рд┐рдП, рдбреАрдПрдордП FIFO1 рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рдЕрдкрд▓реЛрдб рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдпрд╣ FIFO1 рдХреЗ рд▓рд┐рдП <b>"рдЦрд╛рд▓реА рдирд╣реАрдВ"</b> рд╕реНрдерд┐рддрд┐ рд╣реИ рдЬреЛ <b>рдЖрдЗрдбрд▓</b> рд░рд╛рдЬреНрдп рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддрд╛ рд╣реИред <br><br>  <b>рдЖрдИрдбреАрдПрд▓рдИ</b> рд░рд╛рдЬреНрдп рдореЗрдВ ALU рд░рдЬрд┐рд╕реНрдЯрд░ A0 рдХреЛ рд╢реВрдиреНрдп рдХрд░рддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/1r/i5/-i/1ri5-iydlu00cfobufepmiaqucg.png"><br><br>  рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рддрд╛рдХрд┐ PWM рдСрдкрд░реЗрд╢рди рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ, рдпрд╣ рд╣рдореЗрд╢рд╛ рд╢реБрд░реБрдЖрдд рд╕реЗ рд╣реА рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗред <br>  рд▓реЗрдХрд┐рди рдбреЗрдЯрд╛ рдлреАрдлреЛ рдореЗрдВ рдорд┐рд▓ рдЧрдпрд╛ред  рдорд╢реАрди <b>рд▓реЛрдбрдбрд╛рдЯрд╛</b> рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ <b>рдЬрд╛рддреА</b> рд╣реИ: <br><br><img src="https://habrastorage.org/webt/3v/rf/dx/3vrfdxwme_jw6m69bwrpybhiots.png"><br><br>  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, ALU рдЕрдЧрд▓рд╛ рд╢рдмреНрдж FIFO рд╕реЗ рд░рдЬрд┐рд╕реНрдЯрд░ A1 рдореЗрдВ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рддрд░рд╣ рд╕реЗ, рдЕрдирд╛рд╡рд╢реНрдпрдХ рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрд╛рдЙрдВрдЯрд░ A0 рдХрд╛ рдорд╛рди, рдЬреЛ PWM рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/t4/ki/je/t4kijee95z-kbmn1n3ikcgtc9qk.png"><br><br>  рдпрджрд┐ рдХрд╛рдЙрдВрдЯрд░ A0 рдЕрднреА рддрдХ рдорд╛рди D0 рддрдХ рдирд╣реАрдВ рдкрд╣реБрдВрдЪрд╛ рд╣реИ (рдЕрд░реНрдерд╛рдд, A0 &lt;D0 рдХреА рд╕реНрдерд┐рддрд┐ рдЯреНрд░рд┐рдЧрд░ рд╣реЛ рдЧрдИ рд╣реИ, рдзреНрд╡рдЬ <b>NoNeedReloadA0 рдХреЛ рд▓рд╛рджрддреЗ рд╣реБрдП</b> ), рд╣рдо <b>рдПрдХ</b> рд░рд╛рдЬреНрдп рдореЗрдВ рдЬрд╛рддреЗ рд╣реИрдВред  рдЕрдиреНрдпрдерд╛, рд╕реНрдерд┐рддрд┐ <b>ClearA0 рд╣реИ</b> ред <br><br>  <b>ClearA0</b> рд╕реНрдерд┐рддрд┐ рдореЗрдВ <b>,</b> ALU рдмрд╕ A0 рдХрд╛ рдорд╛рди рд╢реВрдиреНрдп рдХрд░рддрд╛ рд╣реИ, рдПрдХ рдирдпрд╛ PWM рдЪрдХреНрд░ рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/0_/pj/ah/0_pjahunjhl34izkpv5k9lplxem.png"><br><br>  рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдорд╢реАрди рднреА <b>рдПрдХ</b> рд░рд╛рдЬреНрдп рдореЗрдВ рдЪрд▓реА рдЬрд╛рддреА рд╣реИ, рдмрд╕ рдПрдХ рдмрд╛рдж рдореЗрдВ рд╣рд░рд╛ рджреЗрддреА рд╣реИред <br><br>  рдорд╢реАрди рдХреЗ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдг рд╕реЗ <b>рдПрдХ</b> рдкрд░рд┐рдЪрд┐рдд рд╣реИред  рдЗрд╕рдореЗрдВ ALU рдХреЛрдИ рдХрд╛рд░реНрдп рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред <br><br>  рдФрд░ рдЗрд╕рд▓рд┐рдП - рдЗрд╕ рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ, <b>Out_Step</b> рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдкрд░ рдПрдХ рдпреВрдирд┐рдЯ рддреИрдпрд╛рд░ рдХреА <b>рдЬрд╛рддреА рд╣реИ</b> (рдпрд╣рд╛рдБ рдкрд░ рдЕрдиреБрдХреВрд▓рдХ рдиреЗ рдмреЗрд╣рддрд░ рдХрд╛рдо рдХрд┐рдпрд╛, рдЬрдм рдпреВрдирд┐рдЯ рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрд╛рджрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╣ рдЕрдиреБрднрд╡рдЬрдиреНрдп рд░реВрдк рд╕реЗ рдкрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛)ред <br><br><img src="https://habrastorage.org/webt/aq/mj/ml/aqmjmluzxutxzq_caddtls15hfc.png"><br><br>  рд╣рдо рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реИрдВ рдЬрдм рддрдХ рдХрд┐ рд╕рд╛рдд-рдмрд┐рдЯ рдХрд╛рдЙрдВрдЯрд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЬреНрдЮрд╛рдд рд╣реЛ, рд╢реВрдиреНрдп рдкрд░ рд░реАрд╕реЗрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдкрд╣рд▓реЗ рд╣рдо рдПрдХ рд░рд╛рд╕реНрддреЗ рд╕реЗ рдЗрд╕ рд░рд╛рдЬреНрдп рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддреЗ рдереЗ, рддреЛ рдЕрдм рджреЛ рд░рд╛рд╕реНрддреЗ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ: рд╕реАрдзреЗ рдФрд░ рджреЗрд░реА рд╕реЗ рдмреАрдЯред <br><br><img src="https://habrastorage.org/webt/53/fk/qc/53fkqcxnlvsf52sxzb8e1ijnpkk.png"><br><br>  рдпрджрд┐ <b>AddCycle</b> рдзреНрд╡рдЬ <b>рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</b> , рддреЛ рд╣рдо рдПрдХреНрд╕рдЯреНрд░рд╛ рд╕реНрдЯреЗрдЯ рдореЗрдВ <b>рдкрд╣реБрдВрдЪ рдЬрд╛рдПрдВрдЧреЗ</b> , рдЬрд┐рд╕реЗ A0 &lt;D1 рдХреА рд╢рд░реНрдд рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реМрдВрдкрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕ рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ, ALU рдХреЛрдИ рд▓рд╛рднрдХрд╛рд░реА рдХреНрд░рд┐рдпрд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рд╕рд┐рд░реНрдл рдЗрддрдирд╛ рд╣реИ рдХрд┐ рдЪрдХреНрд░ рдХреЛ 1 рдмреАрдЯ рдЕрдзрд┐рдХ рд╕рдордп рд▓рдЧрддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рднреА рд░рд╛рд╕реНрддреЗ <b>рд╡рд┐рд▓рдВрдм</b> рд░рд╛рдЬреНрдп рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рд╣реЛрддреЗ рд╣реИрдВред <br><br>  рдпрд╣ рд╕реНрдерд┐рддрд┐ рдирд╛рдбрд╝реА рдХреА рдЕрд╡рдзрд┐ рдХреЛ рдорд╛рдкрддреА рд╣реИред  A1 ( <b>рд▓реЛрдб</b> рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд░рд╣рддреЗ рд╣реБрдП рднреА <b>рд▓реЛрдб</b> ) рд╢реВрдиреНрдп рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рддрдХ рдХрдо рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/bi/ct/jt/bictjtwgqikkvuz4pqmp7owacii.png"><br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрд╕ рдмрд╛рдд рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдПрдлрдЖрдИрдПрдлрдУ рдореЗрдВ рдЕрддрд┐рд░рд┐рдХреНрдд рдбреЗрдЯрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВ, рдорд╢реАрди <b>рд▓реЛрдб</b> рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдпрд╛ <b>рдирд┐рд╖реНрдХреНрд░рд┐рдп</b> рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЕрдЧрд▓рд╛ рднрд╛рдЧ рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдЧреАред  рдЖрдЗрдП рдЗрд╕реЗ рдЖрдХреГрддрд┐ рдореЗрдВ рди рджреЗрдЦреЗрдВ (рд▓рдВрдмреЗ рддреАрд░ рд╣реИрдВ, рд╕рдм рдХреБрдЫ рдЫреЛрдЯрд╛ рд╣реЛрдЧрд╛), рд▓реЗрдХрд┐рди рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд░реВрдк рдореЗрдВ, <b>рд╡рд┐рд▓рдВрдм</b> рд╕реНрдерд┐рддрд┐ рдкрд░ рдбрдмрд▓-рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ: <br><br><img src="https://habrastorage.org/webt/bb/cr/dq/bbcrdq1jfhxret5vbaoexfsr-iq.png"><br><br>  рдЕрдм UDB рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддрд╛ рд╣реИред  рдореИрдВрдиреЗ <b>рдЖрдЗрдбрд▓</b> рд╕реНрдЯреЗрдЯ рдореЗрдВ рд╣реЛрдиреЗ рдХреЗ рдЭрдВрдбреЗ рдХреЛ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рддреБрд▓рдирд╛ рдореЗрдВ рдмрджрд▓ рджрд┐рдпрд╛ (рдкрд┐рдЫрд▓реЗ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдПрдХ рдЯреНрд░рд┐рдЧрд░ рдерд╛ рдЬрд┐рд╕реЗ рд╡рд┐рднрд┐рдиреНрди рд░рд╛рдЬреНрдпреЛрдВ рдореЗрдВ рдХреЙрдХреНрдб рдФрд░ рд░реАрд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛), рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдХреЗ рд▓рд┐рдП рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝рд░ рдиреЗ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рдкрд░рд┐рдгрд╛рдо рджрд┐рдЦрд╛рдпрд╛ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдбреАрдПрдордП рдЗрдХрд╛рдИ рдХреЛ рд╕рдВрдХреЗрдд рджреЗрддреЗ рд╣реБрдП, <b>рд╣рдВрдЧреНрд░реА</b> рдзреНрд╡рдЬ рдХреЛ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рдерд╛, рдЬреЛ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдерд╛ред  рдпрд╣ рдзреНрд╡рдЬ рдкрд░ рдШрд╛рд╡ рд╣реИ <b>"FIFO1 рднреАрдбрд╝ рдирд╣реАрдВ рд╣реИ"</b> ред  рдЪреВрдВрдХрд┐ рдпрд╣ рднреАрдбрд╝ рдирд╣реАрдВ рд╣реИ, рдбреАрдПрдордП рд╡рд╣рд╛рдВ рдПрдХ рдФрд░ рдбреЗрдЯрд╛ рд╢рдмреНрдж рд▓реЛрдб рдХрд░ рд╕рдХрддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/w8/ea/b-/w8eab-2dwdxvtvyr3hfukjrev9w.png"><br><br>  рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рднрд╛рдЧ рдкрд░ - рдпрд╣реА рд╣реИред <br><br>  рдореБрдЦреНрдп рдкрд░рд┐рдпреЛрдЬрдирд╛ рдЖрд░реЗрдЦ рдореЗрдВ рдбреАрдПрдордП рдмреНрд▓реЙрдХ рдЬреЛрдбрд╝реЗрдВред  рдХреБрдЫ рд╕рдордп рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рдбреАрдПрдордП рд╕рдорд╛рдкреНрддрд┐ рдЭрдВрдбреЗ рдХреЛ рдмрд╛рдзрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛, рд▓реЗрдХрд┐рди рддрдереНрдп рдпрд╣ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдпрд╣ рд╕рд╣реА рд╣реИред  рдЬрдм рдореЗрдореЛрд░реА рддрдХ рд╕реАрдзреЗ рдкрд╣реБрдВрдЪ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреВрд░реА рд╣реЛ рдЬрд╛рддреА рд╣реИ, рддреЛ рдЖрдк рдЙрд╕реА рд╕реЗрдЧрдореЗрдВрдЯ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдПрдХ рдирдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдк рдирдП рд╕реЗрдЧрдореЗрдВрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рднрд░рдирд╛ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред  рдлреАрдлреЛ рдореЗрдВ рдЕрднреА рднреА рддреАрди рд╕реЗ рдЪрд╛рд░ рддрддреНрд╡ рд╣реИрдВред  рдЗрд╕ рд╕рдордп, UDB рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмреНрд▓реЙрдХ рдХреЗ D0 рдФрд░ D1 рдХреЗ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рдЬреЛрдбрд╝рдирд╛ рдЕрд╕рдВрднрд╡ рд╣реИ, рдлрд┐рд░ рднреА рдЙрдиреНрд╣реЗрдВ рдСрдкрд░реЗрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ <b>Out_Idle</b> рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╡реНрдпрд╡рдзрд╛рди <b>рдмрд╛рдж рдореЗрдВ</b> рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ред  рд▓реЗрдХрд┐рди рд╡рд╣ рд░рд╕реЛрдИ рдЕрдм UDB рдмреНрд▓реЙрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдирд╣реАрдВ рд╣реЛрдЧреА, рдЗрд╕рд▓рд┐рдП рд╣рдо рдХреЗрд╡рд▓ рдЗрд╕реЗ рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдЙрд▓реНрд▓реЗрдЦ рдХрд░реЗрдВрдЧреЗред <br><br><img src="https://habrastorage.org/webt/4o/g7/y2/4og7y21diqgqr6qn7_iehukiqho.png"><br><br><h2>  рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдкреНрд░рдпреЛрдЧ </h2><br>  рдЪреВрдВрдХрд┐ рдЕрдм рд╕рдм рдХреБрдЫ рдЬреНрдЮрд╛рдд рдирд╣реАрдВ рд╣реИ, рд╣рдо рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдХрд╛рд░реНрдп рдирд╣реАрдВ рд▓рд┐рдЦреЗрдВрдЧреЗред  рд╕рднреА рдЬрд╛рдВрдЪ "рдорд╛рдереЗ рдкрд░" рдХреА рдЬрд╛рдПрдЧреАред  рдлрд┐рд░, рд╕рдлрд▓ рдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдПрдкреАрдЖрдИ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  So.  рд╣рдо <b>рдореБрдЦреНрдп ()</b> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдиреНрдпреВрдирддрдо рдмрдирд╛рддреЗ рд╣реИрдВред  рдпрд╣ рдмрд╕ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЪрдпрдирд┐рдд рдЯреЗрд╕реНрдЯ рдХреЛ рдЖрдордВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ CyGlobalIntEnable; <span class="hljs-comment"><span class="hljs-comment">/* Enable global interrupts. */</span></span> <span class="hljs-comment"><span class="hljs-comment">// isr_1_StartEx(StepperFinished); StepperController_X_Start(); StepperController_Y_Start(); StepperController_Z_Start(); StepperController_E0_Start(); StepperController_E1_Start(); // TestShortSteps(); TestWithPacking (); for(;;) { }</span></span></code> </pre> <br>  рдЪрд▓реЛ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рджрд╛рд▓реЛрдВ рдХрд╛ рдПрдХ рдкреИрдХреЗрдЯ рднреЗрдЬрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ, рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдирд╛рдбрд╝реА рдбрд╛рд▓рдиреЗ рдХреЗ рддрдереНрдп рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВред  рдлрд╝рдВрдХреНрд╢рди рдХреЙрд▓ рд╕рд░рд▓ рд╣реИ: <br><br><pre> <code class="plaintext hljs">TestShortSteps();</code> </pre><br>  рд▓реЗрдХрд┐рди рд╢рд░реАрд░ рдХреЛ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <div class="spoiler">  <b class="spoiler_title">рдореИрдВ рдкреВрд░реЗ рд╕рдорд╛рд░реЛрд╣ рдХреЛ рдкрд╣рд▓реЗ рджреВрдВрдЧрд╛</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void TestShortSteps() { //   ,   //      //   ,  DMA    !!! //    ,   !!! StepperController_X_SingleVibrator_WritePeriod (6); //     //    тАФ   CY_SET_REG16(StepperController_X_Datapath_1_D0_PTR, 4); CY_SET_REG16(StepperController_X_Datapath_1_D1_PTR, 2); //         . //         static const uint16 steps[] = { 0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001, 0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001 }; //  DMA  ,      uint8 channel = DMA_X_DmaInitialize (sizeof(steps[0]),1,HI16(steps),HI16(StepperController_X_Datapath_1_F1_PTR)); CyDmaChRoundRobin (channel,true); //       ,       uint8 td = CyDmaTdAllocate(); //       .  ,    . CyDmaTdSetConfiguration(td, sizeof(steps), CY_DMA_DISABLE_TD, TD_INC_SRC_ADR | TD_AUTO_EXEC_NEXT); //       CyDmaTdSetAddress(td, LO16((uint32)steps), LO16((uint32)StepperController_X_Datapath_1_F1_PTR)); //      CyDmaChSetInitialTd(channel, td); //         CyDmaChEnable(channel, 1); }</code> </pre><br></div></div><br>  рдЕрдм рдЗрд╕рдХреЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рднрд╛рдЧреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред <br><br>  рдпрджрд┐ рдирд╛рдбрд╝реА рдХреЗ рд╕рдХрд╛рд░рд╛рддреНрдордХ рднрд╛рдЧ рдХреА рд▓рдВрдмрд╛рдИ 92 рдШрдбрд╝реА рдЪрдХреНрд░ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИ, рддреЛ рдЖрд╕реНрдЯрд╕реАрд▓рд╕реНрдХрдк рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реЛрдЧрд╛ рдХрд┐ рдирдХрд╛рд░рд╛рддреНрдордХ рднрд╛рдЧ рдореЗрдВ рдПрдХрд▓-рдЪрдХреНрд░ рд╕рдореНрдорд┐рд▓рд┐рдд рд╣реИ рдпрд╛ рдирд╣реАрдВред  рдкреИрдорд╛рдирд╛ рд╕рдорд╛рди рдирд╣реАрдВ рд╣реЛрдЧрд╛ред  рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рд╕рдХрд╛рд░рд╛рддреНрдордХ рднрд╛рдЧ рдХреЛ рдпрдерд╛рд╕рдВрднрд╡ рдЫреЛрдЯрд╛ рдХрд┐рдпрд╛ рдЬрд╛рдП рддрд╛рдХрд┐ рдХреБрд▓ рдкрд▓реНрд╕ рд╕рдореНрдорд┐рд▓рд┐рдд рд╣рд░рд╛ рдХреЗ рд╕рд╛рде рдкреИрдорд╛рдиреЗ рдкрд░ рддреБрд▓рдиреАрдп рд╣реЛред  рдЗрд╕рд▓рд┐рдП, рдореИрдВ рдЬрдмрд░рджрд╕реНрддреА рдЙрд╕ рдХрд╛рдЙрдВрдЯрд░ рдХреА рдЕрд╡рдзрд┐ рдХреЛ рдмрджрд▓рддрд╛ рд╣реВрдВ рдЬреЛ рдкрд▓реНрд╕ рдХреЗ рд╕рдХрд╛рд░рд╛рддреНрдордХ рднрд╛рдЧ рдХреА рдЕрд╡рдзрд┐ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs"> //   ,   //      //   ,  DMA    !!! //    ,   !!! StepperController_X_SingleVibrator_WritePeriod (6);</code> </pre><br>  рд▓реЗрдХрд┐рди рдЫрд╣ рдкреВрд░реЗ рдЙрдкрд╛рдп рдХреНрдпреЛрдВ?  рддреАрди рдХреНрдпреЛрдВ рдирд╣реАрдВ?  рджреЛ рдХреНрдпреЛрдВ рдирд╣реАрдВ?  рдЖрдЦрд┐рд░рдХрд╛рд░, рдПрдХ рдХреНрдпреЛрдВ рдирд╣реАрдВ?  рдпрд╣ рдПрдХ рджреБрдЦрдж рдХрд╣рд╛рдиреА рд╣реИред  рдпрджрд┐ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдирд╛рдбрд╝реА 6 рдЪрдХреНрд░реЛрдВ рд╕реЗ рдЫреЛрдЯреА рд╣реИ, рддреЛ рд╕рд┐рд╕реНрдЯрдо рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдПрдХ рдЖрд╕реНрдЯрд╕реАрд▓рд╕реНрдХрдк рдкрд░ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдбрд┐рдмрдЧрд┐рдВрдЧ рдмрд╛рд╣рд░ рд╕реЗ рдкрд░реАрдХреНрд╖рдг рд▓рд╛рдЗрдиреЛрдВ рдХреЗ рдЙрддреНрдкрд╛рджрди рдХреЗ рд╕рд╛рде рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рдХрд┐ рдбреАрдПрдордП рдПрдХ рддреЗрдЬ рдЪреАрдЬ рдирд╣реАрдВ рд╣реИред  рдпрджрд┐ рдорд╢реАрди рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЕрд╡рдзрд┐ рд╕реЗ рдХрдо рд╕рдордп рдХреЗ рд▓рд┐рдП рдЪрд▓ рд░рд╣реА рд╣реИ, рддреЛ рдЬрдм рддрдХ рдпрд╣ <b>рд╡рд┐рд▓рдВрдм</b> рд╕реНрдерд┐рддрд┐ рдХреЛ <b>рдЫреЛрдбрд╝ рджреЗрддрд╛ рд╣реИ</b> , рддрдм рддрдХ FIFO рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рдЦрд╛рд▓реА рд╣реЛрддрд╛ рд╣реИред  рдпрд╣ рдЕрднреА рддрдХ рдПрдХ рднреА рдирдпрд╛ рдбреЗрдЯрд╛ рд╢рдмреНрдж рдирд╣реАрдВ рд░рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ!  рдФрд░ рдХреЗрд╡рд▓ рдЬрдм рдирд╛рдбрд╝реА рдХреЗ рд╕рдХрд╛рд░рд╛рддреНрдордХ рднрд╛рдЧ рдХреА рдЕрд╡рдзрд┐ 6 рдЪрдХреНрд░ рд╣реЛрддреА рд╣реИ, рддреЛ FIFO рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордп рдХреА рдЧрд╛рд░рдВрдЯреА рд╣реЛрддреА рд╣реИ ... <br><br><h2>  рд╡рд┐рд▓рдВрдмрддрд╛ рд╡рд┐рд╖рдпрд╛рдВрддрд░ </h2><br>  рдПрдХ рдФрд░ рд╡рд┐рдЪрд╛рд░ рдЬреЛ рдореЗрд░реЗ рд╕рд┐рд░ рдореЗрдВ рдмреИрдарддрд╛ рд╣реИ рд╡рд╣ рд╣реИ рд╣рдорд╛рд░реЗ RTOS MAX рдХреЗ рдХрд░реНрдиреЗрд▓ рдХреЗ рдХреБрдЫ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рддреНрд╡рд░рдгред  рд▓реЗрдХрд┐рди рдЕрдлрд╕реЛрд╕, рдореЗрд░реЗ рд╕рднреА рд╕рдмрд╕реЗ рдЕрдЪреНрдЫреЗ рд╡рд┐рдЪрд╛рд░ рдЙрдиреНрд╣реАрдВ рдЕрдХреНрд╖рд╛рдВрд╢реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИрдВред <br><br>  рдПрдХ рдорд╛рдорд▓рд╛ рдерд╛, рдореИрдВрдиреЗ рд╕рд╛рдЗрдХреНрд▓реЛрди рд╡реА SoC рдХреЗ рд▓рд┐рдП рдирдВрдЧреЗ рдзрд╛рддреБ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд┐рдпрд╛ред  рд▓реЗрдХрд┐рди рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рд╕рд┐рдВрдЧрд▓ рдПрдлрдкреАрдЬреАрдП рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ (рдЬрдм рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ рдЙрдиреНрд╣реЗрдВ рд▓рд┐рдЦрдирд╛ рд╣реИ, рддреЛ рдЙрдирд╕реЗ рдкрдврд╝рдирд╛) рдХреЛрд░ рдСрдкрд░реЗрд╢рди рдХреЛ рд╕реИрдХрдбрд╝реЛрдВ (!!!) рдХрдо рдХрд░ рджреЗрддрд╛ рд╣реИред  рдЖрдкрдиреЗ рд╕рд╣реА рд╕реБрдирд╛ред  рдпрд╣ рд╕реИрдХрдбрд╝реЛрдВ рдореЗрдВ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рд╕рдм рдЦрд░рд╛рдм рджрд╕реНрддрд╛рд╡реЗрдЬ рд╣реИ, рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рддреЛ рдореБрдЭреЗ рдЕрдВрджрд░ рд╕реЗ рд╣реЛрд╢ рдЖрдпрд╛, рдФрд░ рдлрд┐рд░ рдкреНрд░рд▓реЗрдЦрди рд╕реЗ рд╡рд╛рдХреНрдпрд╛рдВрд╢реЛрдВ рдХреЗ рд╕реНрдХреНрд░реИрдк рд╕реЗ рд╕рд╛рдмрд┐рдд рд╣реБрдЖ рдХрд┐ рдкреБрд▓реЛрдВ рдХреЗ рдПрдХ рдЭреБрдВрдб рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдиреБрд░реЛрдз рдкрд╛рд░рд┐рдд рдХрд░рддреЗ рд╕рдордп рд╡рд┐рд▓рдВрдмрддрд╛ рджреЛрд╖реА рдереЗред  рдпрджрд┐ рдЖрдкрдХреЛ рдПрдХ рдмрдбрд╝реЗ рд╕рд░рдгреА рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рд╡рд┐рд▓рдВрдмрддрд╛ рднреА рд╣реЛрдЧреА, рд▓реЗрдХрд┐рди рдПрдХ рдкрдВрдк рдХрд┐рдП рдЧрдП рд╢рдмреНрдж рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ, рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реЛрдЧрд╛ред  рдЬрдм рдЕрдиреБрд░реЛрдз рдПрдХрд▓ рд╣реЛрддреЗ рд╣реИрдВ (рдФрд░ рдУрдПрд╕ рдХрд░реНрдиреЗрд▓ рдХреЗ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рддреНрд╡рд░рдг рдХрд╛ рддрд╛рддреНрдкрд░реНрдп рд╕рд┐рд░реНрдл рдЙрдирд╕реЗ рд╣реЛрддрд╛ рд╣реИ), рдордВрджреА рдареАрдХ рд╕реИрдХрдбрд╝реЛрдВ рдмрд╛рд░ рдЬрд╛рддреА рд╣реИред  рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╢реБрджреНрдз рд░реВрдк рд╕реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдореЗрдЯрд┐рдХ рддрд░реАрдХреЗ рд╕реЗ рд╕рдм рдХреБрдЫ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рддреЗрдЬ рд╣реЛрдЧрд╛, рдЬрдм рдкреНрд░реЛрдЧреНрд░рд╛рдо рдореБрдЦреНрдп рдореЗрдореЛрд░реА рдХреЗ рд╕рд╛рде рдПрдХ рдЙрдиреНрдорддреНрдд рдЧрддрд┐ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред <br><br>  PSoC рдкрд░, рдореЗрд░реА рднреА рдХреБрдЫ рдпреЛрдЬрдирд╛рдПрдБ рдереАрдВред  рдЙрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЖрдк рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд░реВрдк рд╕реЗ рдбреАрдПрдордП рдФрд░ рдпреВрдбреАрдмреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╕рд░рдгреА рдореЗрдВ рдбреЗрдЯрд╛ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рд╣реИ!  рдбреАрдПрдордП рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рдХрд╛рд░рдг, рдпреЗ рдирд┐рдпрдВрддреНрд░рдХ рд▓рд┐рдВрдХ рдХрд┐рдП рдЧрдП рд╕реВрдЪрд┐рдпреЛрдВ рдореЗрдВ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдЦреЛрдЬ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ!  рд▓реЗрдХрд┐рди рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рдкреНрд▓рдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдореБрдЭреЗ рдПрд╣рд╕рд╛рд╕ рд╣реБрдЖ рдХрд┐ рдпрд╣ рднреА рд╡рд┐рд▓рдВрдмрддрд╛ рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИред  рдпрд╣рд╛рдБ, рдЗрд╕ рд╡рд┐рд▓рдВрдмрддрд╛ рдХреЛ рдкреНрд░рд▓реЗрдЦрди рдореЗрдВ рдЦреВрдмрд╕реВрд░рддреА рд╕реЗ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рджреЛрдиреЛрдВ рдкрд░рд┐рд╡рд╛рд░ TRM рдореЗрдВ рдФрд░ рдПрдХ рдЕрд▓рдЧ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ <b>AN84810 рдореЗрдВ - PSoC 3 рдФрд░ PSoC 5LP рдПрдбрд╡рд╛рдВрд╕реНрдб DMA рдЯреЙрдкрд┐рдХреНрд╕</b> ред  рд╡рд╣рд╛рдБ рдЦрдВрдб 3.2 рдЗрд╕рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд рд╣реИред  рдЗрд╕рд▓рд┐рдП рдЕрдЧрд▓рд╛ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рддреНрд╡рд░рдг рд░рджреНрдж рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдПрдХ рджрдпрд╛ред  рд▓реЗрдХрд┐рди, рдХреЗ рд░реВрдк рдореЗрдВ Semyon Semyonovich Gorbunkov рдиреЗ рдХрд╣рд╛: "рд╣рдо рдЦреЛрдЬ рдХрд░реЗрдВрдЧреЗред" <br><br><h2>  рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рдЬрд╛рд░реА рд░рдЦрдирд╛ </h2><br>  рдЕрдЧрд▓рд╛, рдореИрдВрдиреЗ рдмреНрд░реЗрд╕реЗрдирд╣реИрдо рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs"> //     //    тАФ   CY_SET_REG16(StepperController_X_Datapath_1_D0_PTR, 4); CY_SET_REG16(StepperController_X_Datapath_1_D1_PTR, 2);</code> </pre><br>  рдЦреИрд░, рдлрд┐рд░ рдирд┐рдпрдорд┐рдд рдХреЛрдб рдЖрддрд╛ рд╣реИ рдЬреЛ рдЗрдВрдЬрди рдХрдВрдЯреНрд░реЛрд▓ рдпреВрдирд┐рдЯ X рдХреЗ FIFO1 рдХреЗ рд▓рд┐рдП DMA рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╢рдмреНрджреЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рдкрд░рд┐рдгрд╛рдо рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдпрд╣рд╛рдБ рдпрд╣ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/bi/hg/ie/bihgiepg_iskg-wor_g4iqnv1ti.png"><br><br>  рдЬрдм рдорд╢реАрди <b>рдПрдХ</b> рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рд╣реЛрддреА рд╣реИ рддреЛ рдХрд╛рдЙрдВрдЯрд░ A0 рдХрд╛ рдорд╛рди рд▓рд╛рд▓ рд░рдВрдЧ рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЧреНрд░реАрди рддрд╛рд░рд╛рдВрдХрди рдорд╛рдорд▓реЛрдВ рдХреЛ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдЬрдм рдорд╢реАрди <b>рдПрдХреНрд╕реНрдЯреНрд░рд╛рдЯреАрдХ</b> рд░рд╛рдЬреНрдп рдореЗрдВ рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг рд╡рд┐рд▓рдВрдм рдбрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдРрд╕реА рдкрдЯреНрдЯрд┐рдпрд╛рдВ рднреА рд╣реИрдВ рдЬрд╣рд╛рдВ <b>рдХреНрд▓рд┐рдпрд░ рдПрдПрдП 0</b> рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг рджреЗрд░реА рд╣реЛ рд░рд╣реА рд╣реИ, рдЙрдиреНрд╣реЗрдВ рдиреАрд▓реЗ рдЧреНрд░рд┐рдб рдХреЗ рд╕рд╛рде рдЪрд┐рд╣реНрдирд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрдм рдЖрдк рдкрд╣рд▓реА рдмрд╛рд░ рдкреНрд░рд╡реЗрд╢ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рдкрд╣рд▓реА рджреЗрд░реА рдЦреЛ рдЬрд╛рддреА рд╣реИред  рдпрд╣ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рд╣реИ рдХрд┐ <b>рдЖрдЗрдбрд▓</b> рдореЗрдВ рд╣реЛрдиреЗ рдкрд░ A0 рд░реАрд╕реЗрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЬрдм рдпрд╣ <b>рд▓реЛрдбрдбрд╛рдЯрд╛ рдореЗрдВ</b> рдкреНрд░рд╡реЗрд╢ рдХрд░рддрд╛ рд╣реИ рддреЛ рдмрдврд╝ <b>рдЬрд╛рддрд╛ рд╣реИ</b> ред  рдЗрд╕рд▓рд┐рдП, рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рдмрд┐рдВрджреБ ( <b>рдПрдХ</b> рдХреЗ рд░рд╛рдЬреНрдп рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ) рдХреЗ рд▓рд┐рдП, рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХрддрд╛ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИред  рдЦрд╛рддрд╛ рдЙрд╕рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдпрд╣ рдордзреНрдп рдЖрд╡реГрддреНрддрд┐ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  рдмрд╕ рдЗрд╕реЗ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ A0 рдХреЛ рд░реАрд╕реЗрдЯ рдХрд░рддреЗ рд╕рдордп, рдШрдбрд╝реА рднреА рдбрд╛рд▓реА рдЬрд╛рдПрдЧреАред  рдФрд╕рдд рдЖрд╡реГрддреНрддрд┐ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╕рдордп рдЗрд╕реЗ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рд▓реЗрдХрд┐рди рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рджрд╛рд▓реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕рд╣реА рд╣реИред  рдЙрдирдХреА рдЕрд╡рдзрд┐ рднреА рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╣реИред <br>  рдЪрд▓реЛ рд╡рд░реНрдгрдирдХрд░реНрддрд╛рдУрдВ рдХреА рдЕрдзрд┐рдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, <br><br><div class="spoiler">  <b class="spoiler_title">рддреНрд╡рд░рдг, рд░реИрдЦрд┐рдХ рдЧрддрд┐ рдФрд░ рдмреНрд░реЗрдХрд┐рдВрдЧ рдХреЗ рдПрдХ рдЪрд░рдг рд╕реЗ рдорд┐рд▓рдХрд░ред</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void TestWithPacking(int countOnLinearStage) { //   ,   //     . //   ,  DMA    !!! //    ,   !!! StepperController_X_SingleVibrator_WritePeriod (6); //     //    тАФ   CY_SET_REG16(StepperController_X_Datapath_1_D0_PTR, 4); CY_SET_REG16(StepperController_X_Datapath_1_D1_PTR, 2); //    static const uint16 accelerate[] = {0x0010,0x0008,0x0004}; //    static const uint16 deccelerate[] = {0x004,0x0008,0x0010}; //  .    . static const uint16 steps[] = {0x0001}; //  DMA  ,      uint8 channel = DMA_X_DmaInitialize (sizeof(steps[0]),1,HI16(steps),HI16(StepperController_X_Datapath_1_F1_PTR)); CyDmaChRoundRobin (channel,true); //   uint8 tdDeccelerate = CyDmaTdAllocate(); CyDmaTdSetConfiguration(tdDeccelerate, sizeof(deccelerate), CY_DMA_DISABLE_TD, TD_INC_SRC_ADR | TD_AUTO_EXEC_NEXT); CyDmaTdSetAddress(tdDeccelerate, LO16((uint32)deccelerate), LO16((uint32)StepperController_X_Datapath_1_F1_PTR)); //       uint8 tdSteps = CyDmaTdAllocate(); //   !!! //     !!! CyDmaTdSetConfiguration(tdSteps, countOnLinearStage, tdDeccelerate, /*TD_INC_SRC_ADR |*/ TD_AUTO_EXEC_NEXT); CyDmaTdSetAddress(tdSteps, LO16((uint32)steps), LO16((uint32)StepperController_X_Datapath_1_F1_PTR)); //   //     !!! uint8 tdAccelerate = CyDmaTdAllocate(); CyDmaTdSetConfiguration(tdAccelerate, sizeof(accelerate), tdSteps, TD_INC_SRC_ADR | TD_AUTO_EXEC_NEXT); CyDmaTdSetAddress(tdAccelerate, LO16((uint32)accelerate), LO16((uint32)StepperController_X_Datapath_1_F1_PTR)); //      CyDmaChSetInitialTd(channel, tdAccelerate); //         CyDmaChEnable(channel, 1); }</code> </pre><br></div></div><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╕рдорд╛рди рджрд╕ рдЪрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдХрд░реЗрдВ (рдбреАрдПрдордП рдореЗрдВ, 20 рдмрд╛рдЗрдЯреНрд╕ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЬрд╛рддреЗ рд╣реИрдВ): <br><br><pre> <code class="plaintext hljs">TestWithPacking (20);</code> </pre><br>  рдкрд░рд┐рдгрд╛рдо рдЕрдкреЗрдХреНрд╖рд┐рдд рд╣реИред  рд╢реБрд░реБрдЖрдд рдореЗрдВ, рддреНрд╡рд░рдг рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИред  рдФрд░ <b>рдЖрдИрдбреАрдПрд▓рдИ</b> (рдиреАрд▓реА рдХрд┐рд░рдг) рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдирд╛ рдЖрдЦрд┐рд░реА рдкрд▓реНрд╕ рд╕реЗ рдмрдбрд╝реА рджреЗрд░реА рдХреЗ рд╕рд╛рде рд╣реЛрддрд╛ рд╣реИ, рдлрд┐рд░ рдЕрдВрддрд┐рдо рдЪрд░рдг рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкреВрд░рд╛ рд╣реЛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рдХрд╛ рдореВрд▓реНрдп рдкрд╣рд▓реЗ рдХреЗ рдореВрд▓реНрдп рдХреЗ рд▓рдЧрднрдЧ рдмрд░рд╛рдмрд░ рд╣реИред <br><br><img src="https://habrastorage.org/webt/5y/tb/na/5ytbna9ixcuxv5-i35tinzixy0e.png"><br><br><h2>  рд╕рд╛рдорд╛рдиреНрдп рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдЕрд╕рд▓реА рдШреЛрдбрд╝рд╛ </h2><br>  рдЙрдкрдХрд░рдг рдХреЛ рд░реАрдореЙрдбреЗрд▓ рдХрд░рддреЗ рд╕рдордп, рдореИрдВрдиреЗ рдХрд┐рд╕реА рддрд░рд╣ 24-рдмрд┐рдЯ рдкрд▓реНрд╕ рдЪреМрдбрд╝рд╛рдИ рд╕реЗ 16-рдмрд┐рдЯ рдиреМрдХрд░реА рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕рд┐рджреНрдз рдХрд┐рдпрд╛ред  рд▓реЗрдХрд┐рди рд╣рдореЗрдВ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдпрд╣ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: рдиреНрдпреВрдирддрдо рдкрд▓реНрд╕ рдЖрд╡реГрддреНрддрд┐ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╣реЛрдЧреАред  рдореИрдВрдиреЗ рдЬрд╛рдирдмреВрдЭрдХрд░ рдРрд╕рд╛ рдХрд┐рдпрд╛ред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ 16-рдмрд┐рдЯ рдХрд╛рдЙрдВрдЯрд░ рдХреА рдмрд┐рдЯ рдХреНрд╖рдорддрд╛ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдиреЗ рдХреА рддрдХрдиреАрдХ рдЗрддрдиреА рдЬрдЯрд┐рд▓ рд╣реЛ рдЧрдИ рд╣реИ рдХрд┐ рдЕрдЧрд░ рдореИрдВрдиреЗ рдЗрд╕реЗ рдореБрдЦреНрдп рдорд╢реАрди рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░ рд╡рд░реНрдгрди рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛ рд╣реИ, рддреЛ рдпрд╣ рд╕рднреА рдХрд╛ рдзреНрдпрд╛рди рдЖрдХрд░реНрд╖рд┐рдд рдХрд░реЗрдЧрд╛ред  рдЗрд╕рд▓рд┐рдП, рд╣рдо рдЗрд╕реЗ рдЕрд▓рдЧ рд╕реЗ рдорд╛рдирддреЗ рд╣реИрдВред <br><br>  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 16-рдмрд┐рдЯ рдмреИрдЯрд░реА рд╣реИред  рдореИрдВрдиреЗ рд╕рд╛рдд-рдмрд┐рдЯ рдХрд╛рдЙрдВрдЯрд░ рдорд╛рдирдХ рдЗрдХрд╛рдИ рдХреЛ рдЙрдЪреНрдЪ рдмрд┐рдЯреНрд╕ рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред  рдпрд╣ рд╕рд╛рдд-рдмрд┐рдЯ рдХрд╛рдЙрдВрдЯрд░ рдХреНрдпрд╛ рд╣реИ?  рдпрд╣ рд╡рд╣ рдбрд┐рдЬрд╝рд╛рдЗрди рд╣реИ рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ UDB рдмреНрд▓реЙрдХ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИ (рдЖрдзрд╛рд░ UDB рдмреНрд▓реЙрдХ рдореЗрдВ рд╕рднреА 8-рдмрд┐рдЯ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреА рдереЛрдбрд╝реА рдЪреМрдбрд╝рд╛рдИ рд╣реИ, рдмрд┐рдЯ рдЧрд╣рд░рд╛рдИ рдореЗрдВ рд╡реГрджреНрдзрд┐ рд╕рдореВрд╣реЛрдВ рдореЗрдВ рдмреНрд▓реЙрдХ рдХреЗ рд╕рдВрдпреЛрдЬрди рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╣реЛрддреА рд╣реИ)ред  рд╕рдорд╛рди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдореЗрдВ рд╕реЗ, <b>рдирд┐рдпрдВрддреНрд░рдг / рд╕реНрдерд┐рддрд┐</b> рд░рдЬрд┐рд╕реНрдЯрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдХрд╛рдЙрдВрдЯрд░ рд╣реИ рдФрд░ 16 рдмрд┐рдЯ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рднреА <b>рдХрдВрдЯреНрд░реЛрд▓ / рд╕реНрдЯреЗрдЯрд╕</b> рдкреЗрдпрд░ рдирд╣реАрдВ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдПрдХ рдФрд░ рдХрд╛рдЙрдВрдЯрд░ рдЬреЛрдбрд╝рдиреЗ рдкрд░, рд╣рдо рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдореЗрдВ рджреЗрд░реА рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред  рд╣рдо рд╕рд┐рд░реНрдл рд╡рд╣реА рд▓реЗрддреЗ рд╣реИрдВ рдЬреЛ рд╣рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рдЖрд╡рдВрдЯрд┐рдд рд╣реИред  рдпрд╣ рдЕрдЪреНрдЫрд╛ рд╣реИ!  рд╣рдо рдЗрд╕ рддрдВрддреНрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд▓реНрд╕ рдЪреМрдбрд╝рд╛рдИ рдХрд╛рдЙрдВрдЯрд░ рдХреЗ рдЙрдЪреНрдЪ рдмрд╛рдЗрдЯ рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ 23 рдмрд┐рдЯреНрд╕ рдХреЗ рдмрд░рд╛рдмрд░ рдкрд▓реНрд╕ рдЪреМрдбрд╝рд╛рдИ рдХрд╛рдЙрдВрдЯрд░ рдХреА рдХреБрд▓ рдЪреМрдбрд╝рд╛рдИ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/webt/_k/nc/-h/_knc-hzlxwos6a8jdzopy3pj2ww.png"><br><br>  рдкрд╣рд▓реЗ рдореИрдВ рд╡рд╣реА рдХрд╣реВрдВрдЧрд╛ рдЬреЛ рдореИрдВ рд╕реЛрдЪ рд░рд╣рд╛ рдерд╛ред  рдореИрдВрдиреЗ рд╕реЛрдЪрд╛ рдерд╛ рдХрд┐ <b>рджреЗрд░реА рдХреА</b> рд╕реНрдерд┐рддрд┐ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВ рдЗрд╕ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╛рдЙрдВрдЯрд░ рдХреА рдЧрд┐рдирддреА рдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреА рдЬрд╛рдВрдЪ рдХрд░реВрдВрдЧрд╛ред  рдпрджрд┐ рдЙрд╕рдиреЗ рдЧрд┐рдирддреА рдкреВрд░реА рдирд╣реАрдВ рдХреА рд╣реИ, рддреЛ рдореИрдВ рдЗрд╕рдХреЗ рдореВрд▓реНрдп рдХреЛ рдХрдо рдХрд░ рджреВрдВрдЧрд╛ рдФрд░ рдлрд┐рд░ рд╕реЗ <b>рджреЗрд░реА рдХреА</b> рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЖ <b>рдЬрд╛рдКрдВрдЧрд╛</b> ред  рдпрджрд┐ рдЖрдкрдиреЗ рдЧрд┐рдирд╛ рд╣реИ, рддреЛ рддрд░реНрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдЪрдХреНрд░ рдХреЛ рдЬреЛрдбрд╝реЗ рдмрд┐рдирд╛ рд╣реА рд░рд╣реЗрдЧрд╛ред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрд╕ рдХрд╛рдЙрдВрдЯрд░ рдХреЗ рд▓рд┐рдП рдкреНрд░рд▓реЗрдЦрди рдХрд╣рддрд╛ рд╣реИ рдХрд┐ рдореИрдВ рд╕рд╣реА рд╣реВрдВред  рд╕рдЪрдореБрдЪ рдпрд╣ рдХрд╣рддрд╛ рд╣реИ: <br><blockquote>  рдЕрд╡рдзрд┐ <br>  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЕрд╡рдзрд┐ рд░рдЬрд┐рд╕реНрдЯрд░ рдореВрд▓реНрдп рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдПрди рдШрдбрд╝рд┐рдпреЛрдВ рдХреА рдЕрд╡рдзрд┐ рдХреЗ рд▓рд┐рдП, рдЕрд╡рдзрд┐ рдореВрд▓реНрдп рдХреЛ рдПрди -1 рдХреЗ рдореВрд▓реНрдп рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдХрд╛рдЙрдВрдЯрд░ рдПрди -1 рд╕реЗ рдиреАрдЪреЗ 0 рддрдХ рдЧрд┐рдирд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдПрди рдШрдбрд╝реА рдЪрдХреНрд░ рдХреА рдЕрд╡рдзрд┐ рд╣реЛрдЧреАред  <b><i>0 рдХреА рдЕрд╡рдзрд┐ рд░рдЬрд┐рд╕реНрдЯрд░ рдореВрд▓реНрдп рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рд▓рдЧрд╛рддрд╛рд░ рдЙрдЪреНрдЪ рд░рд╛рдЬреНрдп рдореЗрдВ рдЖрдпреЛрдЬрд┐рдд рдЯрд░реНрдорд┐рдирд▓ рдХрд╛рдЙрдВрдЯ рдЖрдЙрдЯрдкреБрдЯ рд╣реЛрдЧрд╛ред</i></b> </blockquote>  рдЬреАрд╡рди рдиреЗ рджрд┐рдЦрд╛рдпрд╛ рд╣реИ рдХрд┐ рд╕рдм рдХреБрдЫ рдЕрд▓рдЧ рд╣реИред  рдореИрдВрдиреЗ рдЖрд╕реНрдЯрд╕реАрд▓рд╕реНрдХрдк рдкрд░ <b>рдЯрд░реНрдорд┐рдирд▓ рдХрд╛рдЙрдВрдЯ</b> рд▓рд╛рдЗрди рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдШрдЯрд╛рдпрд╛ рдФрд░ <b>рдкреАрд░рд┐рдпрдб</b> рдореЗрдВ рдкреНрд░реАрд▓реЛрдбреЗрдб рд╢реВрдиреНрдп рдкрд░ рдФрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд▓реЛрдбрд┐рдВрдЧ рдХреЗ рджреМрд░рд╛рди рдЗрд╕рдХрд╛ рдореВрд▓реНрдп рджреЗрдЦрд╛ред  рдХрд╛рд╢ рдФрд░ рдЖрд╣ред  рдХреЛрдИ <b>рдирд┐рд░рдВрддрд░ рдЙрдЪреНрдЪ рдЕрд╡рд╕реНрдерд╛</b> рдирд╣реАрдВ рдереА! <br><br>  рдкрд░реАрдХреНрд╖рдг рдФрд░ рддреНрд░реБрдЯрд┐ рд╕реЗ, рдореИрдВ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣рд╛, рд▓реЗрдХрд┐рди рдРрд╕рд╛ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рдХрд╛рдЙрдВрдЯрд░ рд╕реЗ рдХрдо рд╕реЗ рдХрдо рдПрдХ рдШрдЯрд╛рд╡ рдЕрд╡рд╢реНрдп рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП!  <b>"рдШрдЯрд╛рд╡"</b> рдХреА рдирдИ рд╕реНрдерд┐рддрд┐ рдкрдХреНрд╖ рдореЗрдВ рдирд╣реАрдВ рд╣реИред  рдЗрд╕реЗ рдЖрд╡рд╢реНрдпрдХ рдорд╛рд░реНрдЧ рдореЗрдВ рдмрджрд▓рдирд╛ рдкрдбрд╝рд╛ред  рдпрд╣ <b>рджреЗрд░реА</b> рд░рд╛рдЬреНрдп рдХреЗ рд╕рд╛рдордиреЗ рд╕реНрдерд┐рдд рд╣реИ рдФрд░ рдЗрд╕реЗ <b>рдиреЗрдХреНрд╕реНрдЯ 65536</b> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/cp/6f/oz/cp6fozy_kflvs6eu6w-ho9ebmcu.png"><br><br>  рдЗрд╕ рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ ALU рдХреЛрдИ рдЙрдкрдпреЛрдЧреА рдХреНрд░рд┐рдпрд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдХреЗрд╡рд▓ рдПрдХ рдирдпрд╛ рдХрд╛рдЙрдВрдЯрд░ рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реЛрдиреЗ рдХреЗ рддрдереНрдп рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИред  рдпрд╣рд╛рдБ рдпрд╣ рдЖрд░реЗрдЦ рдореЗрдВ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/mh/tb/br/mhtbbr8strxue23n6jmg_giocjc.png"><br><br>  рдпрд╣рд╛рдБ рдЗрд╕рдХреЗ рдЧреБрдг рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╣реИрдВ: <br><br><img src="https://habrastorage.org/webt/oo/t5/rs/oot5rs3_cdplwr94gno3poavzkq.png"><br><br>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП, рдЗрд╕ рдХрд╛рдЙрдВрдЯрд░ рдХрд╛ рд╕рд╛рд░ рд╕реНрдкрд╖реНрдЯ рд╣реИред  рдХреЗрд╡рд▓ <b>рд╕рдХреНрд╖рдо</b> рд░реЗрдЦрд╛ рдкреАрдбрд╝рд┐рдд рд╣реИред  рдлрд┐рд░ рд╕реЗ, рдореБрдЭреЗ рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рдордЭ рдореЗрдВ рдирд╣реАрдВ рдЖрдпрд╛ рд╣реИ рдХрд┐ рдЬрдм рдорд╢реАрди <b>рд▓реЛрдбрдбреИрдЯреНрдЯрд╛</b> рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реИ, рддреЛ рдЗрд╕реЗ рдЪрд╛рд▓реВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП (рдлрд┐рд░ рдХрд╛рдЙрдВрдЯрд░ рдЕрд╡рдзрд┐ рдорд╛рди рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИ)ред  рдореИрдВрдиреЗ рдпрд╣ рдЪрд╛рд▓ рдХрд╛рдЙрдВрдЯрд░ рдХреЗ рдЧреБрдгреЛрдВ рд╕реЗ рдЙрдзрд╛рд░ рд▓реА рдЬреЛ рдПрд▓ рдИ рдбреА рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЙрди рдПрд▓ рдИ рдбреА рдХреЗ рд▓рд┐рдП рдирд┐рдпрдВрддреНрд░рдг рдЗрдХрд╛рдИ рдХреЗ рдЕрдВрдЧреНрд░реЗрдЬреА рд▓реЗрдЦрдХ рд╕реЗ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдмрд┐рдирд╛, рдЕрд╡рдзрд┐ рдХрд╛ рд╢реВрдиреНрдп рдорд╛рди рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд╡рд╣ рдЙрд╕рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреА рд╣реИред <br><br>  рдПрдкреАрдЖрдИ рдХреЛрдб рдореЗрдВ, рд╣рдо рдПрдХ рдирдП рдХрд╛рдЙрдВрдЯрд░ рдХреЗ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рдЕрдм рд╢реБрд░реВ рд╕рдорд╛рд░реЛрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">void `$INSTANCE_NAME`_Start() { `$INSTANCE_NAME`_SingleVibrator_Start(); //"One" Generator start `$INSTANCE_NAME`_Plus65536_Start(); }</code> </pre><br>  рдЖрдЗрдП рдирдИ рдкреНрд░рдгрд╛рд▓реА рджреЗрдЦреЗрдВред  рдпрд╣рд╛рдБ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди рдХреЛрдб рд╣реИ <br><br><div class="spoiler">  <b class="spoiler_title">(рдЗрд╕рдореЗрдВ, рдХреЗрд╡рд▓ рдкрд╣рд▓реА рдкрдВрдХреНрддрд┐ рдкрд╣рд▓реЗ рд╕реЗ рдЬреНрдЮрд╛рдд рдПрдХ рд╕реЗ рдЕрд▓рдЧ рд╣реИ):</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void JustTest(int extra65536s) { //      65536  StepperController_X_Plus65536_WritePeriod((uint8) extra65536s); //     //    тАФ   CY_SET_REG16(StepperController_X_Datapath_1_D0_PTR, 4); CY_SET_REG16(StepperController_X_Datapath_1_D1_PTR, 2); //         . //         static const uint16 steps[] = { 0x1000,0x1000,0x1000,0x1000 }; //  DMA  ,      uint8 channel = DMA_X_DmaInitialize (sizeof(steps[0]),1,HI16(steps),HI16(StepperController_X_Datapath_1_F1_PTR)); CyDmaChRoundRobin (channel,true); //       ,       uint8 td = CyDmaTdAllocate(); //       .  ,    . CyDmaTdSetConfiguration(td, sizeof(steps), CY_DMA_DISABLE_TD, TD_INC_SRC_ADR | TD_AUTO_EXEC_NEXT); //       CyDmaTdSetAddress(td, LO16((uint32)steps), LO16((uint32)StepperController_X_Datapath_1_F1_PTR)); //      CyDmaChSetInitialTd(channel, td); //         CyDmaChEnable(channel, 1); }</code> </pre><br></div></div><br>  рд╣рдо рдЗрд╕реЗ рдЗрд╕ рддрд░рд╣ рдХрд╣рддреЗ рд╣реИрдВ: <br><br><pre> <code class="plaintext hljs"> JustTest(0);</code> </pre><br>  рдСрд╕рд┐рд▓реЛрд╕реНрдХреЛрдк рдкрд░ рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд (рдкреАрд▓реА рдХрд┐рд░рдг - рдПрд╕рдЯреАрдИрдкреА рдЖрдЙрдЯрдкреБрдЯ, рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рдирд┐рдпрдВрддреНрд░рдг рдХреЗ рд▓рд┐рдП рдХрд╛рдЙрдВрдЯрд░ рдЯреАрд╕реА рдЖрдЙрдЯрдкреБрдЯ рдХрд╛ рдиреАрд▓рд╛ - рдореВрд▓реНрдп) рджреЗрдЦрддреЗ рд╣реИрдВред  рдкрд▓реНрд╕ рдЕрд╡рдзрд┐ <b>рдЪрд░рдг</b> рд╕рд░рдгреА рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рдг рдкрд░, рдЕрд╡рдзрд┐ 0x1000 рдЙрдкрд╛рдп рд╣реИред <br><br><img src="https://habrastorage.org/webt/ap/q7/df/apq7dfk6t5kns3qtzjmkuzzw-44.png"><br><br>  рдХрд┐рд╕реА рдЕрдиреНрдп рд╕реНрдХреИрди рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ рддрд╛рдХрд┐ рд╡рд┐рднрд┐рдиреНрди рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдЧрддрддрд╛ рд╣реЛ: <br><br><img src="https://habrastorage.org/webt/zl/6s/2o/zl6s2oop2bft0ndatbawfdrtacw.png"><br><br>  рдлрд╝рдВрдХреНрд╢рди рдХреЙрд▓ рдХреЛ рдЗрд╕рдореЗрдВ рдмрджрд▓реЗрдВ: <br><br><pre> <code class="plaintext hljs"> JustTest(1);</code> </pre><br>  рдкрд░рд┐рдгрд╛рдо рдЕрдкреЗрдХреНрд╖рд┐рдд рд╣реИред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, 0x1000 рдЪрдХреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рдЯреАрд╕реА рдЖрдЙрдЯрдкреБрдЯ рд╢реВрдиреНрдп рд╣реИ, рдлрд┐рд░ - 0x10000 (65536d) рдЪрдХреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЗрдХрд╛рдИред  рдЖрд╡реГрддреНрддрд┐ рд▓рдЧрднрдЧ 700 рд╣рд░реНрдЯреНрдЬ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИ, рд╣рдореЗрдВ рд▓реЗрдЦ рдХреЗ рдЕрдВрддрд┐рдо рднрд╛рдЧ рдореЗрдВ рдкрддрд╛ рдЪрд▓рд╛, рдЗрд╕рд▓рд┐рдП рд╕рдм рдХреБрдЫ рд╕рд╣реА рд╣реИред <br><br><img src="https://habrastorage.org/webt/nm/5q/6s/nm5q6s73zb7yqxtvuxzrxis4f5i.png"><br><br>  рдареАрдХ рд╣реИ, рдЪрд▓реЛ рдПрдХ рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="plaintext hljs"> JustTest(2);</code> </pre><br>  рд╣рдореЗрдВ рдорд┐рд▓рддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/ah/sp/7y/ahsp7ymdefdyl04acuefc3ufct8.png"><br><br>  рдпрд╣ рд╕рд╣реА рд╣реИред  рдЯреАрд╕реА рдЖрдЙрдЯрдкреБрдЯ рдкрд┐рдЫрд▓реЗ 65536 рдШрдбрд╝реА рдЪрдХреНрд░реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдореЗрдВ рдлрд╝реНрд▓рд┐рдк рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ, рд╡рд╣ 0x1000 + 0x10000 рдЪрдХреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╢реВрдиреНрдп рдкрд░ рдерд╛ред <br><br>  рдмреЗрд╢рдХ, рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд╕рд╛рде, рд╕рднреА рджрд╛рд▓реЛрдВ рдХреЛ рдирдП рдХрд╛рдЙрдВрдЯрд░ рдХреЗ рд╕рдорд╛рди рдореВрд▓реНрдп рдХреЗ рд╕рд╛рде рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рддреНрд╡рд░рдг рдХреЗ рджреМрд░рд╛рди рдЙрдЪреНрдЪрддрдо рдмрд╛рдЗрдЯ рдХреЗ рд╕рд╛рде рдПрдХ рдкрд▓реНрд╕ рдмрдирд╛рдирд╛ рдЕрд╕рдВрднрд╡ рд╣реИ, 1, рдлрд┐рд░ 1, рдлрд┐рд░ 0. рддреЛред рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдХрдо рдЖрд╡реГрддреНрддрд┐рдпреЛрдВ рдкрд░ (рд╕рд╛рдд рд╕реМ рд╣рд░реНрдЯреНрдЬ рд╕реЗ рдХрдо) рддреНрд╡рд░рдг рдХрд╛ рднреМрддрд┐рдХ рдЕрд░реНрде рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рдирдХрд╛рд░рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ рдЖрд╡реГрддреНрддрд┐ рдкрд░, рдЖрдк рдЗрдВрдЬрди рдХреЗ рд╕рд╛рде рд░реИрдЦрд┐рдХ рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h2>  рдорд░рд╣рдо рдореЗрдВ рдЙрдбрд╝рдирд╛ </h2><br>  PSoC5LP рдкрд░рд┐рд╡рд╛рд░ рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рд▓рд┐рдП TRM рджрд╕реНрддрд╛рд╡реЗрдЬрд╝: <br><blockquote>  рдкреНрд░рддреНрдпреЗрдХ рд▓реЗрдирджреЗрди 1 рд╕реЗ 64 рдХреЗрдмреА рддрдХ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ </blockquote>  рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╡рд░реНрдгрд┐рдд AN84810 рдореЗрдВ рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рд╡рд╛рдХреНрдпрд╛рдВрд╢ рд╣реИ: <br><blockquote>  1. рдЖрдк рдбреАрдПрдордП рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ 4095 рдмрд╛рдЗрдЯреНрд╕ рд╕реЗ рдЕрдзрд┐рдХ рдмрдлрд░ рдХреИрд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ? <br>  рдЯреАрдбреА рдХреА рдЕрдзрд┐рдХрддрдо рдЕрдВрддрд░рдг рд╕рдВрдЦреНрдпрд╛ 4095 рдмрд╛рдЗрдЯреНрд╕ рддрдХ рд╕реАрдорд┐рдд рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЛ рдПрдХ рдПрдХрд▓ рдбреАрдПрдордП рдЪреИрдирд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ 4095 рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рдЗрдЯреНрд╕ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдХрдИ рдЯреАрдбреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЪреЗрди рдХрд░реЗрдВ рдЬреИрд╕рд╛ рдХрд┐ рдЙрджрд╛рд╣рд░рдг 5 рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред </blockquote>  рдХреМрди рд╕рд╣реА рд╣реИ?  рдпрджрд┐ рдЖрдк рдкреНрд░рдпреЛрдЧреЛрдВ рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдкрд░рд┐рдгрд╛рдо рдмрдпрд╛рдиреЛрдВ рдХреЗ рд╕рдмрд╕реЗ рдЦрд░рд╛рдм рдХреЗ рдкрдХреНрд╖ рдореЗрдВ рдЭреБрдХрд╛рдП рдЬрд╛рдПрдВрдЧреЗ, рд▓реЗрдХрд┐рди рд╡реНрдпрд╡рд╣рд╛рд░ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рдордЭ рд╕реЗ рдмрд╛рд╣рд░ рд╣реЛрдЧрд╛ред  рдкреВрд░реА рдЧрд▓рддреА рдПрдкреАрдЖрдИ рдореЗрдВ рдЗрд╕ рдЬрд╛рдБрдЪ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/ib/5s/i2/ib5si2yxxn4e_idcohactjo2j-u.png"><br><br><div class="spoiler">  <b class="spoiler_title">рдПрдХ рд╣реА рдкрд╛рдаред</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">cystatus CyDmaTdSetConfiguration(uint8 tdHandle, uint16 transferCount, uint8 nextTd, uint8 configuration) \ { cystatus status = CYRET_BAD_PARAM; if((tdHandle &lt; CY_DMA_NUMBEROF_TDS) &amp;&amp; (0u == (0xF000u &amp; transferCount))) { /* Set 12 bits transfer count. */ reg16 *convert = (reg16 *) &amp;CY_DMA_TDMEM_STRUCT_PTR[tdHandle].TD0[0u]; CY_SET_REG16(convert, transferCount); /* Set Next TD pointer. */ CY_DMA_TDMEM_STRUCT_PTR[tdHandle].TD0[2u] = nextTd; /* Configure the TD */ CY_DMA_TDMEM_STRUCT_PTR[tdHandle].TD0[3u] = configuration; status = CYRET_SUCCESS; } return(status); }</code> </pre><br></div></div><br>  рдпрджрд┐ рдХреЛрдИ рд▓реЗрдирджреЗрди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЬреЛ 4095 рдмрд╛рдЗрдЯреНрд╕ рд╕реЗ рдЕрдзрд┐рдХ рд╣реИ, рддреЛ рдкрд┐рдЫрд▓реА рд╕реЗрдЯрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рд╣рд╛рдВ, рдореИрдВрдиреЗ рддреНрд░реБрдЯрд┐ рдХреЛрдб рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рд╕реЛрдЪрд╛ рдерд╛ ... <br><br>  рдкреНрд░рдпреЛрдЧреЛрдВ рд╕реЗ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдпрджрд┐ рдЖрдк рдЗрд╕ рдЪреЗрдХ рдХреЛ рд╣рдЯрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд▓рдВрдмрд╛рдИ рдореБрдЦреМрдЯрд╛ 0xfff (4096205 = 0901000) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд╛рдЯ рджреА рдЬрд╛рдПрдЧреАред  рдХрд╛рд╢ рдФрд░ рдЖрд╣ред  рдПрдХ рд╕реБрдЦрдж рдиреМрдХрд░реА рдХреЗ рд▓рд┐рдП рд╕рднреА рдЖрд╢рд╛рдПрдВ рдзреНрд╡рд╕реНрдд рд╣реЛ рдЧрдИрдВред  рдЖрдк рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ 4K рдореЗрдВ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд┐рд╡рд░рдгрдХреЛрдВ рдХреА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди, рдХрд╣рддреЗ рд╣реИрдВ, 64K 16 рдЪреЗрди рд╣реИред  рддреАрди рд╕рдХреНрд░рд┐рдп рдЗрдВрдЬрди (рдПрдХреНрд╕рдЯреНрд░реВрдбрд░ рдореЗрдВ рдХрдо рдЪрд░рдг рд╣реЛрдВрдЧреЗ) - 48 рдЪреЗрдиред  рдкреНрд░рддреНрдпреЗрдХ рдЦрдВрдб рд╕реЗ рдкрд╣рд▓реЗ рд╕рдмрд╕реЗ рдЦрд░рд╛рдм рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрддрдирд╛ рднрд░рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╢рд╛рдпрдж рдпрд╣ рд╕рдордп рдореЗрдВ рд╕реНрд╡реАрдХрд╛рд░реНрдп рд╣реИред  рдХрдо рд╕реЗ рдХрдо, 127 рд╡рд░реНрдгрдирдХрд░реНрддрд╛ рдЙрдкрд▓рдмреНрдз рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдкрд░реНрдпрд╛рдкреНрдд рдореЗрдореЛрд░реА рд╣реЛрдЧреАред <br><br>  рдЖрдк рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ рд▓рд╛рдкрддрд╛ рдбреЗрдЯрд╛ рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВред  рдПрдХ рд░реБрдХрд╛рд╡рдЯ рдпрд╣ рдЖрдИ рдХрд┐ рдбреАрдПрдордП рдЪреИрдирд▓ рдиреЗ рдХрд╛рдо рдкреВрд░рд╛ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ, рд╣рдо рдЗрд╕реЗ рдПрдХ рдФрд░ рд╕реЗрдЧрдореЗрдВрдЯ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХрд┐рд╕реА рднреА рдЧрдгрдирд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЦрдВрдб рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмрдирд╛ рд╣реБрдЖ рд╣реИ, рд╕рдм рдХреБрдЫ рддреЗрдЬреА рд╕реЗ рд╣реЛрдЧрд╛ред  рдФрд░ рдХреЛрдИ рдкреНрд░рджрд░реНрд╢рди рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рдирд╣реАрдВ рд╣реИрдВ: рдЬрдм рдПрдХ рдмрд╛рдзрд╛ рдЕрдиреБрд░реЛрдз рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдлреАрдлреЛ рдореЗрдВ 4 рдФрд░ рддрддреНрд╡ рд╣реЛрдВрдЧреЗ рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рдХреЛ рдХрдИ рд╕реМ рдпрд╛ рд╣рдЬрд╛рд░реЛрдВ рдШрдбрд╝реА рдЪрдХреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╕реЗрд╡рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдпрд╛рдиреА рд╕рдмрдХреБрдЫ рдЕрд╕рд▓реА рд╣реИред  рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХрд╛рд░реНрдп рдХреЗ рджреМрд░рд╛рди рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░рдгрдиреАрддрд┐ рдЪреБрдирдирд╛ рдЖрд╕рд╛рди рд╣реЛрдЧрд╛ред  рд▓реЗрдХрд┐рди рдкреНрд░рд▓реЗрдЦрди (TRM) рдореЗрдВ рдПрдХ рддреНрд░реБрдЯрд┐ рдиреЗ рдкреВрд░реЗ рдореВрдб рдХреЛ рдЦрд░рд╛рдм рдХрд░ рджрд┐рдпрд╛ред  рдпрджрд┐ рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рдерд╛, рддреЛ рд╢рд╛рдпрдж рдореИрдВрдиреЗ рдХрд╛рд░реНрдпрдкреНрд░рдгрд╛рд▓реА рдХреА рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХреА рд╣реЛрдЧреАред <br><br><h2>  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br>  рдЙрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╡рд┐рдХрд╕рд┐рдд рд╕рд╣рд╛рдпрдХ рдлрд░реНрдорд╡реЗрдпрд░ рдЙрдкрдХрд░рдг рд╕реНрд╡реАрдХрд╛рд░реНрдп рд╣реЛ рдЧрдпрд╛ рддрд╛рдХрд┐ рдЗрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░ "рдлрд░реНрдорд╡реЗрдпрд░" рдХрд╛ рдПрдХ рд╕рдВрд╕реНрдХрд░рдг рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрднрд╡ рд╣реЛ рд╕рдХреЗ, рдХрд╣рддреЗ рд╣реИрдВ, рдорд░реНрд▓рд┐рди, рдЬреЛ рд╕реНрдЯреЗрдкрд░ рдореЛрдЯрд░реНрд╕ рдХреЗ рд▓рд┐рдП рд▓рдЧрд╛рддрд╛рд░ рдмрд╛рдзрд╛ рд╣реИрдВрдбрд▓рд░ рдореЗрдВ рдирд╣реАрдВ рд╣реИред  рдЬрд╣рд╛рдВ рддрдХ тАЛтАЛрдореБрдЭреЗ рдкрддрд╛ рд╣реИ, рдпрд╣ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдбреЗрд▓реНрдЯрд╛ рдкреНрд░рд┐рдВрдЯрд░ рдХреЗ рд▓рд┐рдП рд╕рдЪ рд╣реИ, рдЬрд╣рд╛рдВ рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рдорд╛рдВрдЧ рдХрд╛рдлреА рдЕрдзрд┐рдХ рд╣реИред  рд╢рд╛рдпрдж рдпрд╣ рдореЗрд░реЗ рдбреЗрд▓реНрдЯрд╛ рдкрд░ рд╣реЛрдиреЗ рд╡рд╛рд▓реА рдмрд╛рдврд╝ рдХреЛ рдЙрди рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рд╕рдорд╛рдкреНрдд рдХрд░ рджреЗрдЧрд╛ рдЬрд╣рд╛рдВ рд╕рд┐рд░ рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрдиреНрд╣реАрдВ рд╕реНрдерд╛рдиреЛрдВ рдкрд░ MZ3D рдкрд░ рдХреЛрдИ рдмрд╛рдврд╝ рдирд╣реАрдВ рджреЗрдЦреА рдЬрд╛рддреА рд╣реИред  рдпрд╣ рд╕рдЪ рд╣реИ рдпрд╛ рдирд╣реАрдВ, рдпрд╣ рд╕рдордп рдмрддрд╛рдПрдЧрд╛, рдФрд░ рдЗрд╕ рдкрд░ рд░рд┐рдкреЛрд░реНрдЯ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрд▓рдЧ рд╢рд╛рдЦрд╛ рдореЗрдВ рдкреЛрд╕реНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br>  рдЗрд╕ рдмреАрдЪ, рд╣рдордиреЗ рджреЗрдЦрд╛ рд╣реИ рдХрд┐ UDB рдмреНрд▓реЙрдХ рдкрд░, рдЕрдкрдиреА рд╕рднреА рд╕рд╛рджрдЧреА рдХреЗ рд▓рд┐рдП, рдореБрдЦреНрдп рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░ рдПрдХ рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХреЛрдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдФрд░ рдЗрд╕реЗ рдЕрдирд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдирд╛ рдХрд╛рдлреА рд╕рдВрднрд╡ рд╣реИред  рдФрд░ рдЬрдм рдЗрдирдореЗрдВ рд╕реЗ рдмрд╣реБрдд рд╕рд╛рд░реА рдЗрдХрд╛рдЗрдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВ, рддреЛ рд╕рд╣рд╕рдВрд╕рд╛рдзрдХ рд╕рдорд╛рдирд╛рдВрддрд░ рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  DMA рдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рд▓рд┐рдП рдкреНрд░рд▓реЗрдЦрди рдореЗрдВ рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рдХрд╛рд░рдг рдкрд░рд┐рдгрд╛рдо рдзреБрдВрдзрд▓рд╛ рд╣реЛ рдЧрдпрд╛ред  рд░реБрдХрд╛рд╡рдЯреЛрдВ рдХреА рдЕрднреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рд╣реА рдЖрд╡реГрддреНрддрд┐ рдкрд░ рдирд╣реАрдВ рдФрд░ рдЙрд╕ рд╕рдордп рдХреА рдЖрд▓реЛрдЪрдирд╛рддреНрдордХрддрд╛ рдХреЗ рд╕рд╛рде рдирд╣реАрдВ рдЬреЛ рдореВрд▓ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдереАред  рддреЛ рдореВрдб рдЦрд░рд╛рдм рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди UDB рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдПрдХ "рдХреЙрдкреНрд░реЗрд╕реЛрд╕реЗрд╕рд░" рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрднреА рднреА рд╡рд┐рд╢реБрджреНрдз рд░реВрдк рд╕реЗ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХрд╛рдо рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдХрд╛рдлреА рд▓рд╛рдн рджреЗрддрд╛ рд╣реИред <br><br>  рд╕рд╛рде рд╣реА, рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдбреАрдПрдордП рдХрд╛рдлреА рдХрдо рдЧрддрд┐ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, PSoC5LP рдФрд░ STM32 рдкрд░ рдХреБрдЫ рдорд╛рдк рдХрд┐рдП рдЧрдПред  рдкрд░рд┐рдгрд╛рдо рдПрдХ рдФрд░ рд▓реЗрдЦ рдЦреАрдВрдЪрддреЗ рд╣реИрдВред  рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдХрд┐рд╕реА рджрд┐рди рдЕрдЧрд░ рд╡рд┐рд╖рдп рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛ рдЬрд╛рдП рддреЛ рдореИрдВ рдЗрд╕реЗ рдХрд░ рджреВрдВред <br><br>  рдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдПрдХ рд╣реА рдмрд╛рд░ рдореЗрдВ рджреЛ рдкрд░реАрдХреНрд╖рдг рдкрд░рд┐рдпреЛрдЬрдирд╛рдПрдВ рдкреНрд░рд╛рдкреНрдд рд╣реБрдИрдВред  рдкрд╣рд▓реЗ рдХреЛ рд╕рдордЭрдирд╛ рдЖрд╕рд╛рди рд╣реИред  рдЖрдк рдЗрд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> рд▓реЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рджреВрд╕рд░реЗ рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд╛рдд-рдмрд┐рдЯ рдХрд╛рдЙрдВрдЯрд░ рдФрд░ рд╕рдВрдмрдВрдзрд┐рдд рддрд░реНрдХ рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╕рдордп рдЙрд▓рдЭрди рдореЗрдВ рд╣реИред  рдЖрдк рдЗрд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> рд▓реЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдмреЗрд╢рдХ, рдпреЗ рдЙрджрд╛рд╣рд░рдг рдХреЗрд╡рд▓ рдкрд░реАрдХреНрд╖рдг рд╡рд╛рд▓реЗ рд╣реИрдВред  рд╡рд╛рд╕реНрддрд╡рд┐рдХ "рдлрд░реНрдорд╡реЗрдпрд░" рдореЗрдВ рдПрдореНрдмреЗрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрднреА рддрдХ рдХреЛрдИ рдЦрд╛рд▓реА рд╕рдордп рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди рдЗрди рд▓реЗрдЦреЛрдВ рдХреЗ рдврд╛рдВрдЪреЗ рдХреЗ рднреАрддрд░, UDB рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░рдирд╛ рдЕрдзрд┐рдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi434742/">https://habr.com/ru/post/hi434742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi434732/index.html">6200 рдбреАрдкреАрдЖрдИ рдкрд░ рдЬреАрд╡рдиред рд╣рд╛рдЗрдкрд░рдХреНрд╕ рдкрд▓реНрд╕рдлрд╛рдпрд░ рдХреЛрд░ рд░рд┐рд╡реНрдпреВ</a></li>
<li><a href="../hi434734/index.html">рдлреВрд░рд┐рдпрд░ рд░реВрдкрд╛рдВрддрд░рдгред рд╡реНрд░рдд рдФрд░ рдЙрдЧреНрд░</a></li>
<li><a href="../hi434736/index.html">рдЬрд╛рдирд╡рд░ рдмрд▓ рдХреЛ рджрдмрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдорд┐рдХрд░реЛрдЯрд┐рдХ рд▓реЙрдЧ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛</a></li>
<li><a href="../hi434738/index.html">рдкрд╛рдпрдерди рдореЗрдВ рд╕реБрджреГрдвреАрдХрд░рдг рд╕реАрдЦрдирд╛</a></li>
<li><a href="../hi434740/index.html">рддрдВрддреНрд░рд┐рдХрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдиреЗ рдЙрдкрдЧреНрд░рд╣ рдЪрд┐рддреНрд░реЛрдВ рдореЗрдВ рд╕реМрд░ рдкреИрдирд▓реЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛ рдФрд░ рдЙрдирдХреЗ рд╡рд┐рддрд░рдг рдХреЗ рд╕реНрддрд░ рдХреА рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рдХрд░рдирд╛ рд╕рд┐рдЦрд╛рдпрд╛</a></li>
<li><a href="../hi434744/index.html">рд╕реИрдорд╕рдВрдЧ SSD 860 QVO 1 рдЯреАрдмреА рдФрд░ 4 рдЯреАрдмреА: рдкрд╣рд▓рд╛ рдЙрдкрднреЛрдХреНрддрд╛ SATA QLC (2 рднрд╛рдЧ)</a></li>
<li><a href="../hi434746/index.html">рдорд╛рдЗрдХреНрд░реЛрд╕реНрдХреЛрдк рдХреЗ рддрд╣рдд BLE 4</a></li>
<li><a href="../hi434750/index.html">рдЕрдкрдиреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЛ рдХреИрд╕реЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПред рдЕрдзреНрдпрд╛рдп рджреЛ рд╕рдлрд╛рдИ рдФрд░ рдкреНрд░рд▓реЗрдЦрди</a></li>
<li><a href="../hi434752/index.html">рд░реЛрдмреЛрдореЛрд░реЛрдЬрд╝: рдирдП рд╕рд╛рд▓ рдХреЗ рдореБрдЦреНрдп рдЪрд░рд┐рддреНрд░ рдХрд╛ рднрд╡рд┐рд╖реНрдп</a></li>
<li><a href="../hi434756/index.html">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХрд╛ рднрд╡рд┐рд╖реНрдп рдЖрднрд╛рд╕реА рдорд╢реАрдиреЛрдВ рдХреЗ рд╕рд╛рде рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>