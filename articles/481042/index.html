<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title> 拣  El sabor de Django nos entusiasma y atrae ご う </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Han pasado varias semanas desde el lanzamiento oficial de la versi贸n 3 de Django. Trabaj茅 con esta versi贸n incluso antes de la publicaci贸n del lanzami...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El sabor de Django nos entusiasma y atrae</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481042/"><img src="https://habrastorage.org/webt/97/5s/xh/975sxhi3n81qsvs2rmothgwiq3s.jpeg" alt="Comer cactus"><br><br>  Han pasado varias semanas desde el lanzamiento oficial de la versi贸n 3 de Django.  Trabaj茅 con esta versi贸n incluso antes de la publicaci贸n del lanzamiento oficial y, desafortunadamente, not茅 que el desarrollo de Django se desaceler贸 significativamente.  La versi贸n 1.3 a veces difiere de la 1.7, pero la versi贸n 3 contiene cambios cosm茅ticos en la rama 2 y nada m谩s. <br><br>  Mi proyecto winePad comenz贸 con Django 1.3, y ahora ha redefinido alrededor del 12% del c贸digo interno de Django. <br><br>  Al ver el c贸digo para la nueva versi贸n, entiendo que las ediciones que yo o mis colegas hicimos mientras trabajaban con versiones anteriores ir谩n m谩s all谩.  Pero mirando la hoja de ruta y los lentos cambios en el repositorio oficial, no tenemos que esperar a que los errores se corrijan en futuras versiones. <br><br>  Esto es de lo que quiero hablar sobre trabajar en errores: <br><a name="habracut"></a><br><h3>  Obtener el m茅todo </h3><br>  Pocas personas se dan cuenta de que hubo un error en el m茅todo get django est谩ndar desde el principio.  El m茅todo get deber铆a devolverle un objeto, advertirle que se encontraron varios objetos o informar que no hay objetos. <br><br><pre><code class="python hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> clone = self._chain() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.query.combinator <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> self.filter(*args, **kwargs) <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.query.can_filter() <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> self.query.distinct_fields: <span class="hljs-number"><span class="hljs-number">4</span></span> clone = clone.order_by() <span class="hljs-number"><span class="hljs-number">5</span></span> limit = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> clone.query.select_for_update <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> connections[clone.db].features.supports_select_for_update_with_limit: <span class="hljs-number"><span class="hljs-number">7</span></span> limit = MAX_GET_RESULTS <span class="hljs-number"><span class="hljs-number">8</span></span> clone.query.set_limits(high=limit) <span class="hljs-number"><span class="hljs-number">9</span></span> num = len(clone) <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> num == <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> clone._result_cache[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> num: <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> self.model.DoesNotExist() <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> self.model.MultipleObjectsReturned()</code> </pre> <br>  La l铆nea 9 recibe datos de TODOS los registros que se especifican en el conjunto de consultas y los traduce en un conjunto de objetos.  Hay una advertencia sobre esto en la documentaci贸n. <br><br>  Antes de la versi贸n 3, no hab铆a l铆mite en el n煤mero de objetos solicitados.  Esto significa que recibe absolutamente todos los datos y los convierte en objetos, antes de advertir que hay muchos objetos. <br><br>  Como resultado, podr铆a obtener varios millones de objetos en la memoria, solo para descubrir que se encontr贸 m谩s de 1 objeto.  Ahora hay l铆neas 5,7,8.  Y ahora con orgullo solo obtienes MAX_GET_RESULTS = 21 objetos antes de saber que hay m谩s de 1 objetos. <br>  Con "__init__" pesado el retraso ser谩 significativo.  C贸mo tratar: <br>  Anular MAX_GET_RESULTS en django.db.models.query.py <br>  anular GET o antes de llamar a GET use: <br><br><pre> <code class="python hljs">vars(queryset.query).update({<span class="hljs-string"><span class="hljs-string">'high_mark'</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'low_mark'</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>})  queryset.query.set_limits(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br><h3>  M茅todo __Init__ de modelos Django </h3><br>  La declaraci贸n en el c贸digo del m茅todo incorporado __init__ no est谩 del todo clara <br><br><pre> <code class="python hljs">_setattr=setattr</code> </pre> <br>  Esto es probablemente para seudo-endurecer el c贸digo mediante la transferencia de la referencia de funci贸n al diccionario local, pero no se trata de eso.  Hay varios problemas: <br><br>  1. Si pasa pares de atributos = valores adicionales en el modelo __init__, obtendr谩 "un argumento de palabra clave inesperado". <br><br>  En este caso, sugiero no cargar el m茅todo __init__, sino agregar atributos despu茅s de la inicializaci贸n: <br><br><pre> <code class="python hljs">obj = MyClass() vars(obj).update({<span class="hljs-string"><span class="hljs-string">'attr'</span></span>:val, <span class="hljs-string"><span class="hljs-string">'attr2'</span></span>:val2 ...})</code> </pre><br>  2. El nuevo Django agreg贸 la capacidad de redefinir descriptores en cualquier campo del modelo (Field.descriptor_class).  Pero ni un solo descriptor sabe si el objeto se inicializa o no.  Esto es necesario, por ejemplo, si el descriptor utilizar谩 datos de objetos prefetch_related que aparecer谩n solo despu茅s de la inicializaci贸n del objeto principal. <br><br>  No me gusta usar la se帽al del final de la inicializaci贸n, porque puede haber muchos suscriptores. <br><br>  En este caso, no se me ocurri贸 nada m谩s inteligente que anular __init__ y agregar un atributo para finalizar la inicializaci贸n. <br><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> super().__init__(*args, **kwargs) self._end_init = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre><br><h3>  Conjuntos de consultas </h3><br>  El EmptyQuerySet / DateQuerySet codificado se ha eliminado, ya est谩 bien.  Sin embargo, la situaci贸n con queryset como administrador ideol贸gicamente no me gusta. <br><br>  Si deseo anular la clase QuerySet creada por los administradores, agrego el atributo _queryset_class <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyManager</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(models.Manager)</span></span></span><span class="hljs-class">:</span></span> _queryset_class = MyQuerySet</code> </pre><br>  Atenci贸n, para versiones anteriores esto no funciona, por ejemplo, puede hacer esto: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyManager</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(models.Manager)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_query_set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> response = super(MyManager, self).get_query_set() response.__class__ = MyQuerySet <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response</code> </pre><br><h3>  panel de administraci贸n de inlineFormset </h3><br>  Hay varios problemas: <br><br>  1. No es posible mostrar registros est谩ndar en l铆nea de conjunto de formularios que no tienen una conexi贸n directa con el objeto de formulario principal.  Por ejemplo: un formulario para editar precios de productos.  En el medio se encuentra la forma estad铆stica de referencia Tabularinline de los precios de compra al por mayor para bienes "similares". <br><br>  Se resuelve anulando el m茅todo del modelo en l铆nea get_formset y creando su propio MyFormSet heredado de BaseInlineFormSet <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_formset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, request, obj=None, **kwargs)</span></span></span><span class="hljs-function">:</span></span> kwargs[<span class="hljs-string"><span class="hljs-string">'formset'</span></span>] = MyFormSet super().get_formset(request, obj, **kwargs) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFormSet</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(BaseInlineFormSet)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br>  2. Si est谩 editando un objeto con un conjunto de formularios en l铆nea en el panel de administraci贸n, y en este momento alguien eliminar谩 uno de los registros de objetos dentro del conjunto de formularios en l铆nea a trav茅s de otro mecanismo, recibir谩 un error y no podr谩 guardar el objeto.  Solo a trav茅s de kopy paste en una nueva ventana del navegador. <br><br>  Hasta ahora solo he encontrado una soluci贸n: no use inlineformset. <br><br><h3>  Panel de administraci贸n </h3><br>  La "caracter铆stica asesina" de Django, es el cactus m谩s grande del proyecto: <br><br>  1. La acci贸n "Eliminar objetos" en los administradores de modelos es visible de forma predeterminada, no importa si el usuario tiene derechos para eliminar o no. <br><br>  Se resuelve deshabilitando esta acci贸n por defecto: <br><br><pre> <code class="python hljs">admin.site.disable_action(<span class="hljs-string"><span class="hljs-string">'delete_selected'</span></span>)</code> </pre><br>  2. No ser谩 posible crear derechos de usuario adicionales desde el panel de administraci贸n hasta que habilite el administrador del modelo Permisos: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.contrib.auth.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Permission <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PermissionsAdmin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(admin.ModelAdmin)</span></span></span><span class="hljs-class">:</span></span> search_fields = (<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'codename'</span></span>,<span class="hljs-string"><span class="hljs-string">'content_type__app_label'</span></span>, <span class="hljs-string"><span class="hljs-string">'content_type__model'</span></span>) list_display = (<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'codename'</span></span>,) actions = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> admin.site.register(Permission, PermissionsAdmin)</code> </pre><br>  3. Desgraciadamente, el derecho a acceder solo a ciertos objetos en Django no existe. <br><br>  Esto se puede resolver escribiendo una entrada en djangoAdminLog con un indicador especial. <br>  Y luego verifique la bandera: <br><br><pre> <code class="python hljs">user.logentry_set.filter(action_flag=ENABLED, .....).exists()</code> </pre><br>  4. Si crea acciones de administrador como se describe en la documentaci贸n, recuerde que no se registran autom谩ticamente en djangoAdminLog. <br><br>  5. Otro inconveniente de esta parte de la documentaci贸n es que todos los ejemplos son solo sobre funciones.  驴Pero qu茅 hay de GCBV?  En mis proyectos, todas las acciones de los administradores de modelos se transfieren a GCBV.  <a href="https://bitbucket.org/danilovmy/actions">Repositorio.</a> <br><br>  La conexi贸n de acci贸n es est谩ndar: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAdmin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(admin.ModelAdmin)</span></span></span><span class="hljs-class">:</span></span> actions = (MyActionBasedOnActionView.as_view(),)</code> </pre><br><h3>  ContentType - registro de modelo django </h3><br>  50% de genio / 50% de opacidad. <br>  Ninguno de los modelos tiene acceso al registro de modelo predeterminado. <br>  En nuestros proyectos, se resuelve agregando un mixin a todas las clases: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.contrib.contenttypes.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ContentType <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExportMixin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasattr(cls, <span class="hljs-string"><span class="hljs-string">'_ct'</span></span>): cls._ct, create = ContentType.objects.get_or_create(**cls.get_app_model_dict()) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> create: cls._ct.name = cls._ct.model._meta.verbose_name cls._ct.save() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls._ct @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_model_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasattr(cls, <span class="hljs-string"><span class="hljs-string">'_model_name'</span></span>): cls._model_name = cls.__name__.lower() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls._model_name @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_app_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasattr(cls, <span class="hljs-string"><span class="hljs-string">'_app_name'</span></span>): cls._app_name = cls._meta.app_label.lower() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls._app_name @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_app_model_dict</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasattr(cls, <span class="hljs-string"><span class="hljs-string">'_format_kwargs'</span></span>): cls._format_kwargs = {<span class="hljs-string"><span class="hljs-string">'app_label'</span></span>: cls.get_app_name(), <span class="hljs-string"><span class="hljs-string">'model'</span></span>: cls.get_model_name()} <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls._format_kwargs</code> </pre><br>  ahora podemos llamar a obj.ct () si es necesario. <br><br><h3>  Modelo de usuario </h3><br>  La capacidad de anular el modelo de usuario apareci贸 en la versi贸n 1.5. <br><br>  Pero para la versi贸n 3, no arreglaron model = User en el est谩ndar UserCreationForm / UserChangeForm. <br>  Se resuelve: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.contrib.auth.forms <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UserCreationForm <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.contrib.auth <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> get_user_model <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyUserCreationForm</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(UserCreationForm)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> model= get_user_model()</code> </pre><br><h3>  Sistema de traducci贸n </h3><br>  Las etiquetas visibles para el usuario est谩n etiquetadas <br><br><pre> <code class="python hljs">{% trans %}</code> </pre> <br>  o en c贸digo a trav茅s de <br><br><pre> <code class="python hljs">gettext_lazy</code> </pre> <br>  Sin embargo, no hay administraci贸n de estos recursos en el panel de administraci贸n.  En general <br><br>  Hay soluciones externas, todas funcionan de alguna manera. <br><br>  Por ejemplo, Rosetta pierde sistem谩ticamente los textos y la interfaz funciona con errores.  No hay verificaci贸n de los derechos de acceso a las traducciones en ning煤n lugar.  Se necesitan mensajes de compilaci贸n / mensajes sistem谩ticos para trabajar ... <br><br>  En winePad, las etiquetas trans, blocktrans y gettext_lazy se redefinieron y comenzamos a recibir textos del cach茅.  Si no hay cach茅, la solicitud almacenada en cach茅 de la base get_or_create tambi茅n nos salv贸 de los mensajes de creaci贸n. <br><br>  El tema del multiling眉ismo es generalmente complicado.  La soluci贸n integrada de Django solo funciona para textos est谩ticos.  Pero todav铆a es necesario traducir estos modelos.  Intent茅 a mi manera resolver el problema de traducir textos din谩micos en el proyecto <a href="https://github.com/mom1/django-tof">django-TOF</a> , donde combin茅 las capacidades de traducci贸n de modelos y Parler / Hvad.  Probablemente alguien estar谩 interesado en mirar. <br><br>  Por ahora, detendr茅 la narrativa, ya que el art铆culo de correcci贸n de errores de Django podr铆a convertirse f谩cilmente en un hilo largo. <br><br>  Por favor, dime c贸mo est谩s mejorando tu Django.  Si hay una continuaci贸n, sistematizo las ideas que han surgido. <br><br>  <b>ps</b> Algunos c贸digos est谩n escritos en la antigua notaci贸n, espero entender, no siempre se encuentra el tiempo o el personal para la refactorizaci贸n. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/481042/">https://habr.com/ru/post/481042/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../481030/index.html">驴Qu茅 tipo de cyberdec me gustar铆a hacer por m铆 mismo?</a></li>
<li><a href="../481032/index.html">驴Por qu茅 fue posible hackear? Probablemente porque el atacante</a></li>
<li><a href="../481034/index.html">T煤nel VPN directo entre computadoras a trav茅s de proveedores NAT (sin VPS, usando un servidor STUN y Yandex.Disk)</a></li>
<li><a href="../481036/index.html">30 utilidades para herramientas de desarrollo de Firefox</a></li>
<li><a href="../481038/index.html">Confesi贸n de un adicto al dise帽o. C贸mo hicimos el juego "IT Alchemy" en un mes</a></li>
<li><a href="../481044/index.html">Qu茅 presentar para 2020: gu铆a de A帽o Nuevo Madrobots</a></li>
<li><a href="../481048/index.html">Reconocimiento de circuitos digitales. Elemento C generalizado</a></li>
<li><a href="../481052/index.html">Crear una red privada Ethereum Geth en contenedores Docker</a></li>
<li><a href="../481054/index.html">YouTrack 2019.3: lista de tareas actualizada y mucho m谩s</a></li>
<li><a href="../481056/index.html">Las principales tecnolog铆as de la d茅cada seg煤n Habr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>