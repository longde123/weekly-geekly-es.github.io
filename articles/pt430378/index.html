<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîÅ ü¶Ö üòæ J2CL - Antes tarde do que nunca üëà ü§±üèæ ‚úçüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ningu√©m ainda se atrasou para o funeral. 
 Valentin Domil 


 Na semana passada, uma equipe do Google finalmente publicou o c√≥digo-fonte para o framew...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>J2CL - Antes tarde do que nunca</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/430378/"><p>  <em>Ningu√©m ainda se atrasou para o funeral.</em> <em><br></em>  <em>Valentin Domil</em> </p><br><p>  Na semana passada, uma equipe do Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">finalmente publicou o c√≥digo-fonte para o framework J2CL</a> , sobre o qual se fala desde 2015.  A id√©ia de traduzir Java para JavaScript est√° longe de ser nova, e todo mundo encheu os cones com o Google Web Toolkit, mas a comunidade estava esperando por este produto como nenhum outro - eles conversaram sobre isso e fizeram discursos, mas ningu√©m viu. </p><br><img src="https://habrastorage.org/webt/ye/fe/6k/yefe6kgvdo8449ifrxfzlfenbve.png"><br><p>  ‚Äå‚Äå‚Äç‚Äç <br>  Mais de 3 anos se passaram desde o primeiro an√∫ncio e parece que o produto perdeu o mercado sem sequer nascer.  Hoje, temos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Scala.js</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Kotlin.js</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JSweet</a> , sem mencionar que o desenvolvimento da Web foi invadido pelo TypeScript e n√£o resta espa√ßo para Java.  Durante esse per√≠odo, muitos, mesmo os javistas mais dedicados, perderam a f√© no ‚ÄúJava for Front-end‚Äù e restringiram essa ou aquela estrutura JavaScript. </p><br><p>  Desde que o lan√ßamento aconteceu, vamos ver o que aconteceu e para quem pode ser √∫til. </p><a name="habracut"></a><br><h2 id="ideya">  Id√©ia </h2><br><p>  Fundamentalmente, emular JVMs em um navegador √© uma tarefa dif√≠cil.  Os desenvolvedores do Google Web Toolkit v√™m resolvendo esse problema h√° muito tempo e alcan√ßaram certos sucessos: eles criaram um tradutor, desenvolveram mecanismos de emula√ß√£o para a biblioteca Java padr√£o e forneceram ajustes para o desenvolvimento de aplicativos. </p><br><p>  H√° muitas vantagens nessa abordagem: digita√ß√£o est√°tica, capacidade de reutilizar o c√≥digo do servidor em um navegador e ferramentas prontas na forma de um IDE Java.  Muitas das abordagens originalmente estabelecidas no GWT agora s√£o vistas no TypeScript, Web Pack e outras ferramentas de desenvolvimento front-end. </p><br><p>  O antigo Google Web Toolkit n√£o era apreciado por seu volume e abstra√ß√£o por criar uma interface do usu√°rio.  A id√©ia do J2CL √© mais simples, permitindo que voc√™ traduza Java para JavaScript pelo menor custo poss√≠vel, para que voc√™ possa facilmente chamar Java de JavaScript e vice-versa. </p><br><p>  E se em 2015 realmente houvesse um tradutor Java de alta qualidade em JS sem lixo desnecess√°rio, n√£o se sabe como o desenvolvimento da Web se desenvolveria ainda mais. </p><br><h2 id="predystoriya-j2cl">  J2CL em segundo plano </h2><br><p>  No in√≠cio de 2015, a equipe do Google GWT tomou uma decis√£o dif√≠cil, mas necess√°ria - desenvolver um novo produto que permita usar Java no desenvolvimento front-end. </p><br><p>  Isso ocorreu principalmente devido √†s novas tend√™ncias no desenvolvimento da Web e a seus novos clientes internos, que viam o Java para a Web n√£o como um ecossistema isolado, mas como parte integrante de uma grande pilha.  Isso exigiu uma vis√£o completamente nova e a cria√ß√£o de ferramentas do zero, que devem ser estreitamente integradas ao restante do ecossistema. </p><br><p>  Com o GWT, era quase imposs√≠vel alcan√ßar esses objetivos.  Embora houvesse ferramentas para intera√ß√£o bidirecional com o JavaScipt no GWT, a estrutura n√£o conseguia se livrar de muita bagagem na forma de uma interface do usu√°rio, biblioteca RPC e outras APIs de aplicativos. </p><br><h2 id="chto-eto-za-zver">  O que √© essa fera </h2><br><p>  Segundo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">os desenvolvedores</a> , o J2CL fornece integra√ß√£o perfeita do c√≥digo Java em aplicativos JavaScript.  √â um conversor de Java para JavaScript simples e leve, com foco na otimiza√ß√£o de c√≥digo usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Closure Compiler</a> . </p><br><ul><li>  Voc√™ pode facilmente misturar Java e JavaScript em um projeto, obtendo o melhor de cada um dos idiomas. </li><li> Permite a reutiliza√ß√£o de c√≥digo entre uma solu√ß√£o de servidor, um aplicativo Web e a plataforma Android.  Um grande n√∫mero de bibliotecas Java est√° dispon√≠vel, como: Guava, Dagger e AutoValue. </li><li>  Moderno e confort√°vel.  A montagem dos projetos √© baseada no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bazel</a> , suportado pelo Live-reload. </li><li>  Verificado.  Alega-se que o J2CL √© usado na produ√ß√£o em projetos do GSuite: GMail, Docs, Slides e Calendar. </li></ul><br><p>  Essencialmente, o J2CL converte o c√≥digo-fonte Java em c√≥digo JavaScript sem usar o bytecode da classe Java.  Isso significa que, como no caso do Google Web Toolkit, o c√≥digo-fonte de todas as bibliotecas usadas √© necess√°rio para compilar o projeto.  Al√©m disso, isso levanta quest√µes sobre o suporte aos recursos da linguagem Java em novos lan√ßamentos.  No momento, os desenvolvedores prometem suporte para todos os recursos de sintaxe do Java 11. </p><br><p>  O J2CL n√£o suportar√° Widgets GWT, GWT RPC e outras bibliotecas GWT - apenas Java b√°sico e o mecanismo de integra√ß√£o JavaScript, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JSInterop</a> . </p><br><p>  I.e.  Esta √© uma vers√£o muito limitada do GWT com um transportador completamente novo.  E, como o novo produto n√£o √© mais compat√≠vel com o GWT, ele √© chamado n√£o de GWT, mas de J2CL.  Como resultado, a libera√ß√£o planejada do GWT 3 ser√° uma estrutura sobre o J2CL, onde todas as bibliotecas de aplicativos ser√£o separadas do n√≠vel do sistema do pr√≥prio tradutor. </p><br><p>  As restri√ß√µes de compatibilidade Java existentes s√£o descritas <a href="">no GitHub</a> .  Basicamente, eles permaneceram os mesmos do GWT - n√£o h√° suporte para reflex√£o, nem API de rede Java.  Mas algo √© diferente - a sem√¢ntica de matrizes e listas n√£o √© emulada, por exemplo, o √≠ndice n√£o verifica se h√° ocorr√™ncias nos limites das matrizes.  Os desenvolvedores n√£o se concentram em emular o comportamento da JVM, mas na sintaxe da linguagem para garantir uma sobrecarga m√≠nima e n√£o gerar toneladas de JavaScript para garantir compatibilidade total. </p><br><p>  Embora o J2CL esteja pronto para produ√ß√£o, sua vers√£o do OSS ainda est√° longe disso.  Por exemplo, h√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">problemas ao iniciar projetos no Windows</a> e os desenvolvedores n√£o prometem uma API est√°vel. </p><br><p>  √â f√°cil explicar a escolha de Bazel como o sistema de cria√ß√£o do produto interno do Google, mas n√£o h√° vantagens para a comunidade e n√£o h√° outra maneira de usar o J2CL a n√£o ser aprender esse sistema de cria√ß√£o.  Tudo o que resta √© esperar a comunidade escrever plugins para o Maven / Gradle. </p><br><h2 id="probuem">  Experimente </h2><br><p>  Primeiro, para experimentar o J2CL agora, voc√™ precisa do Mac OS ou Linux. <br>  Em segundo lugar, voc√™ precisa instalar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bazel</a> - um sistema de cria√ß√£o um tanto ex√≥tico do Google. </p><br><p>  Agora voc√™ pode pelo menos coletar algo, por exemplo, HelloWorld <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no reposit√≥rio oficial.</a> </p><br><pre><code class="plaintext hljs">&gt; bazel build src/main/java/com/google/j2cl/samples/helloworld:helloworld</code> </pre> <br><p>  Se olharmos para a conclus√£o, ficaremos agradavelmente surpreendidos: </p><br><pre> <code class="plaintext hljs">&gt; cat bazel-bin/src/main/java/com/google/j2cl/samples/helloworld/helloworld.js document.write('Hello from Java! and JS!');</code> </pre> <br><p>  Obviamente, isso n√£o prova nada, mas est√° muito satisfeito com seu minimalismo ap√≥s os m√≥dulos GWT.  Ainda n√£o existem √≥timos exemplos de aplicativos; aguardaremos o aparecimento deles. </p><br><h2 id="zachem-eto-nuzhno-esli-est-xxxjs">  Por que √© necess√°rio se houver xxx.js </h2><br><p>  A resposta √† pergunta por que isso precisa ser encontrado ainda √© dif√≠cil.  √Ä primeira vista, o J2CL tem uma id√©ia muito forte - reutilizar o Java para o front-end, assim como as pessoas usam o TypeScript.  Por outro lado, o projeto parece estar atrasado. </p><br><p>  Projetos de transportadores mais recentes em JS, como Kotlin.js e Scala.js, s√£o implementados como plug-ins de compilador e n√£o precisam analisar novamente o c√≥digo-fonte.  E nesse sentido, o J2CL est√° um passo atr√°s, porque precisa do c√≥digo-fonte que analisar√°. </p><br><p>  Um ponto separado √© a pr√≥pria linguagem Java.  Por que escrever em Java detalhado, se voc√™ pode escrever a parte do servidor e do cliente no Kotlin conciso? </p><br><p>  Embora, quando comparado com outro projeto semelhante - o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JSweet</a> , confio mais no J2CL.  As ferramentas do JSweet s√£o muito mais amig√°veis ‚Äã‚Äãe mais prontas para uso, mas o JSweet tem uma pequena comunidade e √© quase todo escrito por uma pessoa. </p><br><h2 id="kod-govorite-otkrytyy">  Voc√™ diz c√≥digo fonte aberto? </h2><br><p>  Certamente satisfeito por o projeto ter uma licen√ßa aberta para o Apache 2.0. </p><br><p>  Infelizmente, <em>c√≥digo aberto</em> n√£o significa <em>um processo de desenvolvimento aberto</em> .  A <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">maior decep√ß√£o</a> da comunidade veio da situa√ß√£o, o projeto J2CL foi anunciado h√° 3 anos, mas ningu√©m mostra seu c√≥digo-fonte, voc√™ n√£o pode influenciar sua API final e n√£o acelerar o processo de desenvolvimento, porque n√£o h√° para onde enviar patches. </p><br><p>  Vamos torcer para que a situa√ß√£o melhore e o produto se torne vi√°vel. </p><br><p>  <strong>Atualiza√ß√£o:</strong> primeiro aplicativo J2CL portado do GWT2 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://github.com/DominoKit/dominodo</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430378/">https://habr.com/ru/post/pt430378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430364/index.html">‚ÄúParece-me que estamos chegando ao momento em que todos ser√£o capazes de codificar. C√≥digo √© liberdade.</a></li>
<li><a href="../pt430366/index.html">VR-kitchen: o que n√£o √© vis√≠vel no capacete</a></li>
<li><a href="../pt430372/index.html">Carro de hidrog√™nio. √â hora de dizer adeus √† gasolina?</a></li>
<li><a href="../pt430374/index.html">Engenharia de dados e muito mais: grava√ß√µes de v√≠deo e slides da reuni√£o</a></li>
<li><a href="../pt430376/index.html">Guia do JavaScript Parte 6: Exce√ß√µes, ponto e v√≠rgula, literais de modelo</a></li>
<li><a href="../pt430380/index.html">Guia JavaScript Parte 5: matrizes e loops</a></li>
<li><a href="../pt430382/index.html">Guia de JavaScript Parte 4: Recursos</a></li>
<li><a href="../pt430384/index.html">Criando mapas a partir de recursos de ru√≠do</a></li>
<li><a href="../pt430386/index.html">Usina de armazenamento de estado s√≥lido a ser constru√≠da na √çndia</a></li>
<li><a href="../pt430388/index.html">Desconfian√ßa na Web Summit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>