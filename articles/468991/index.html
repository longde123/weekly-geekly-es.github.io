<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöº üî° üíä Personajes de sprites modulares y su animaci√≥n. üë∂üèø üë®üèº‚Äçüöí üòï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Esta publicaci√≥n de blog est√° completamente dedicada a mi sistema de animaci√≥n de personajes, est√° llena de consejos √∫tiles y fragmentos de c√≥digo. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Personajes de sprites modulares y su animaci√≥n.</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468991/"> Esta publicaci√≥n de blog est√° completamente dedicada a mi sistema de animaci√≥n de personajes, est√° llena de consejos √∫tiles y fragmentos de c√≥digo. <br><br>  En los √∫ltimos dos meses, he creado hasta 9 nuevas acciones de jugadores (cosas divertidas como bloquear con un escudo, esquivar un salto y armas), 17 nuevos elementos port√°tiles, 3 conjuntos de armadura (placa, seda y cuero) y 6 tipos de peinados.  Tambi√©n termin√© de crear toda la automatizaci√≥n y las herramientas, por lo que todo ya est√° en uso en el juego.  ¬°En el art√≠culo contar√© c√≥mo logr√© esto! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ef/52a/188/2ef52a1887cdbe639fd35d9df414c38d.gif"></div><br>  <i>Espero que esta informaci√≥n sea √∫til y demuestre que no es necesario ser un genio para crear independientemente tales herramientas / automatizaci√≥n.</i> <br><br><h2>  Breve descripci√≥n </h2><br>  Inicialmente, quer√≠a comprobar si es posible combinar sprites superpuestos entre s√≠ con animadores sincronizados para crear un personaje modular con peinados reemplazables, equipos y art√≠culos port√°tiles.  ¬øEs posible combinar la animaci√≥n de p√≠xeles dibujados a mano con un personaje verdaderamente personalizable? <br><br>  Por supuesto, tales funciones se usan activamente en juegos 3D y 2D con sprites pre-renderizados o en juegos 2D con animaci√≥n esquel√©tica, pero que yo sepa, no hay muchos juegos que combinen animaci√≥n creada manualmente y personajes modulares (generalmente porque el proceso resulta ser demasiado mon√≥tono) <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/412/7a9/d23/4127a9d23d4d84e28671deee781495cb.gif"></div><br>  <i>Descubr√≠ este antiguo GIF de mi primer mes con Unity.</i>  <i>¬°De hecho, este sprite modular fue uno de mis primeros experimentos en el desarrollo de juegos!</i> <br><br>  Cre√© un prototipo usando el sistema de animaci√≥n Unity, y luego agregu√© una camisa, un par de pantalones, un peinado y tres elementos para probar el concepto.  Esto requiri√≥ 26 animaciones separadas. <br><br>  En ese momento, cre√© toda mi animaci√≥n en Photoshop y no me molest√© con la automatizaci√≥n del proceso, por lo que fue muy aburrido.  Entonces pens√©: "Entonces, la idea b√°sica funcion√≥, luego agregar√© nuevas animaciones y equipos".  Result√≥ que "m√°s tarde" es unos a√±os m√°s tarde. <br><br>  En marzo de este a√±o, dibuj√© el dise√±o de una gran cantidad de armadura (vea mi publicaci√≥n anterior) y not√© c√≥mo este proceso puede hacerse m√°s conveniente.  Continu√© posponiendo la implementaci√≥n, porque incluso con la automatizaci√≥n estaba nerviosa de que nada funcionar√≠a. <br><br>  Esperaba tener que abandonar la personalizaci√≥n del personaje y crear el √∫nico personaje principal, como en la mayor√≠a de los juegos con animaci√≥n manual.  Pero ten√≠a un plan de acci√≥n, ¬°y era hora de comprobar si pod√≠a derrotar a este monstruo! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/88b/030/c5a/88b030c5a82c6cd801f7ce4d8b08ff6d.gif"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddd/55f/12c/ddd55f12cb35e4fa22093cdddecd63d4.gif" width="500"></div><br>  <i>Spoiler: Todo sali√≥ genial.</i>  <i>A continuaci√≥n revelar√© mis *** secretos ***</i> <br><br><h2>  Sistema de sprites modulares </h2><br><h4>  I. Conozca sus l√≠mites </h4><br>  Anteriormente, realic√© muchas pruebas de arte y control de tiempo para averiguar cu√°nto tiempo puede llevar ese trabajo y si un nivel similar de calidad ser√° alcanzable para m√≠. <br><br>  Escrib√≠ todas mis ideas para la animaci√≥n, las reun√≠ en una hoja de c√°lculo y las organic√© de acuerdo con varios criterios, como la utilidad, la belleza y el uso repetido.  Para mi sorpresa, el primero en esta lista fue la animaci√≥n del art√≠culo (pociones, bombas, cuchillos, hachas, bolas). <br><br>  Se me ocurri√≥ una puntuaci√≥n num√©rica para cada animaci√≥n y abandon√© todo con un bajo rendimiento.  Inicialmente, plane√© crear 6 conjuntos de armadura, pero r√°pidamente me di cuenta de que era demasiado y descart√© tres tipos. <br><br>  El aspecto del seguimiento del tiempo result√≥ ser muy importante, y recomiendo usarlo para responder preguntas como: "¬øCu√°ntos enemigos puedo darme el lujo de crear en el juego?".  Despu√©s de solo unas pocas pruebas, logr√© extrapolar una estimaci√≥n bastante precisa.  Con m√°s trabajo en animaciones, continu√© haciendo un seguimiento del tiempo y revisando mis expectativas. <br><br>  <i>Compartir√© una copia de mi diario de trabajo durante los √∫ltimos dos meses.</i>  <i>Tenga en cuenta que este tiempo es adicional a mi trabajo habitual, donde paso 30 horas a la semana:</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.google.com/spreadsheets/d/1Nbr7lujZTB4pWMsuedVcgBYS6n5V-rHrk1PxeGxr6Ck/edit?usp=sharing</a> <br><br><h4>  II  Cambiar la paleta para un futuro mejor </h4><br>  Usando sabiamente los colores en el dise√±o del sprite, puede dibujar un sprite y crear muchas variaciones diferentes cambiando la paleta.  Puede cambiar no solo los colores, sino tambi√©n crear varios elementos de encendido y apagado (por ejemplo, reemplazando los colores con transparencia). <br><br>  Cada conjunto de armadura tiene 3 variaciones, y al mezclar las partes superior e inferior, puedes obtener muchas combinaciones.  Planeo implementar un sistema en el que puedas recolectar un conjunto de armadura para la apariencia del personaje, y otro para sus caracter√≠sticas (como en Terraria). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/873/80c/0b9/87380c0b99d150828af05b1a0cf33ef6.gif"></div><br>  <i>En el proceso, me sorprendieron gratamente las combinaciones curiosas descubiertas.</i>  <i>Si conecta la parte superior de la placa con un fondo de seda, puede obtener algo al estilo de un mago de guerra.</i> <br><br>  Es mejor cambiar las paletas usando los colores que codifican el valor en el sprite para que luego pueda tomarlas para encontrar el color real de la paleta.  S√© que estoy simplificando un poco, as√≠ que aqu√≠ hay un video para comenzar: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/u4Iz5AJa31Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  No explicar√© todo en detalle, sino que hablar√© sobre formas de implementar esta t√©cnica en Unity, y sus ventajas y desventajas. <br><br><h4>  1. Buscar textura para cada paleta </h4><br>  Esta es la mejor estrategia para crear variaciones de enemigos, fondos y todo donde muchos sprites tienen la misma paleta / material.  No se pueden agrupar diferentes materiales en lotes, incluso si usan el mismo sprite / atlas.  Trabajar con texturas es bastante doloroso, pero puede cambiar las paletas en tiempo real reemplazando materiales usando SpriteRenderer.sharedMaterial.SetTexture o MaterialPropertyBlock si necesita diferentes paletas para cada instancia del material.  Aqu√≠ hay un ejemplo de una funci√≥n de fragmento de sombreador: <br><br><pre><code class="cpp hljs">sampler2D _MainTex; sampler2D _PaletteTex; float4 _PaletteTex_TexelSize; <span class="hljs-function"><span class="hljs-function">half4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v2f input)</span></span></span><span class="hljs-function"> : SV_TARGET </span></span>{ half4 lookup = tex2D(_MainTex, input.uv); half4 color = tex2D(_PaletteTex, half2(lookup.r * (_PaletteTex_TexelSize.x / <span class="hljs-number"><span class="hljs-number">0.00390625f</span></span>), <span class="hljs-number"><span class="hljs-number">0.5</span></span>)); color.a *= lookup.a; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> color * input.color; }</code> </pre> <br><h4>  2. Matriz de colores. </h4><br>  Me decid√≠ por esta decisi√≥n porque necesitaba reemplazar las paletas cada vez que cambiaba la apariencia del personaje (por ejemplo, al ponerme elementos), y crear algunas paletas din√°micamente (para mostrar los colores de piel y cabello elegidos por el jugador).  Me pareci√≥ que en tiempo de ejecuci√≥n y en el editor para estos fines ser√≠a mucho m√°s f√°cil trabajar con matrices. <br><br>  C√≥digo: <br><br><pre> <code class="cpp hljs">sampler2D _MainTex; half4 _Colors[<span class="hljs-number"><span class="hljs-number">32</span></span>]; <span class="hljs-function"><span class="hljs-function">half4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v2f input)</span></span></span><span class="hljs-function"> : SV_TARGET </span></span>{ half4 lookup = tex2D(_MainTex, input.uv); half4 color = _Colors[round(lookup.r * <span class="hljs-number"><span class="hljs-number">255</span></span>)]; color.a *= lookup.a; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> color * input.color; }</code> </pre> <br>  Present√© mis paletas como un tipo ScriptableObject y utilic√© la herramienta MonoBehaviour para editarlas.  Despu√©s de haber trabajado durante mucho tiempo en la edici√≥n de paletas en el proceso de creaci√≥n de animaciones en Aseprite, me di cuenta de las herramientas que necesitaba y escrib√≠ estos scripts en consecuencia.  Si desea escribir su propia herramienta para editar paletas, aqu√≠ hay algunas funciones que definitivamente recomiendo implementar: <br><br>  - Actualizaci√≥n de paletas en diversos materiales al editar colores para mostrar los cambios en tiempo real. <br><br>  - Asignaci√≥n de nombres y cambio del orden de los colores en la paleta (use el campo para almacenar el √≠ndice de color, no su orden en la matriz). <br><br>  - Seleccione y edite m√∫ltiples colores a la vez.  (Consejo: puede copiar y pegar los campos de Color en Unity: simplemente haga clic en un color, copie, haga clic en otro color, pegue, ¬°ahora son iguales!) <br><br>  - Aplicar color superpuesto a toda la paleta <br><br>  - Grabar paleta en textura <br><br><h4>  3. Una textura de b√∫squeda √∫nica para todas las paletas. </h4><br>  Si desea cambiar las paletas sobre la marcha, pero al mismo tiempo necesita agrupar para reducir el n√∫mero de llamadas de extracci√≥n, puede utilizar esta t√©cnica.  Puede ser √∫til para plataformas m√≥viles, pero usarlo es bastante inconveniente. <br><br>  En primer lugar, deber√° empacar todas las paletas en una textura grande.  Luego, utiliza el color especificado en el componente SpriteRenderer (color de v√©rtice AKA) para determinar la l√≠nea que se leer√° desde la textura de la paleta en el sombreador.  Es decir, la paleta de este sprite se controla a trav√©s de SpriteRenderer.color.  El color del v√©rtice es la √∫nica propiedad de SpriteRenderer que se puede cambiar sin romper la condici√≥n (siempre que todos los materiales sean iguales). <br><br>  En la mayor√≠a de los casos, es mejor usar el canal alfa para controlar el √≠ndice, porque probablemente no necesitar√° un mont√≥n de sprites con diferente transparencia. <br><br>  C√≥digo: <br><br><pre> <code class="cpp hljs">sampler2D _MainTex; sampler2D _PaletteTex; float4 _PaletteTex_TexelSize; <span class="hljs-function"><span class="hljs-function">half4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v2f input)</span></span></span><span class="hljs-function"> : SV_TARGET </span></span>{ half4 lookup = tex2D(_MainTex, input.uv); half2 paletteUV = half2( lookup.r * _(PaletteTex_TexelSize.x / <span class="hljs-number"><span class="hljs-number">0.00390625f</span></span>), input.color.a * _(PaletteTex_TexelSize.y / <span class="hljs-number"><span class="hljs-number">0.00390625f</span></span>) ) half4 color = tex2D(_PaletteTex, paletteUV); color.a *= lookup.a; color.rgb *= input.color.rgb; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> color; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/47c/f90/895/47cf908951a0ba9f8f65a57711a5c85c.gif"></div><br>  <i>Las maravillas de reemplazar paletas y capas de sprites.</i>  <i>Tantas combinaciones</i> <br><br><h4>  III.  Automatice todo y use las herramientas adecuadas. </h4><br>  Para implementar esta funci√≥n, la automatizaci√≥n era absolutamente necesaria, porque como resultado obtuve unas 300 animaciones y miles de sprites. <br><br>  Mi primer paso fue crear un exportador para Aseprite para administrar mi esquema de capa de sprite loco usando una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">interfaz de l√≠nea de comando</a> conveniente.  Este es solo un script en perl que omite todas las capas y etiquetas en mi archivo Aseprite y exporta im√°genes en un directorio espec√≠fico y una estructura de nombres para que pueda leerlas m√°s tarde. <br><br>  Luego escrib√≠ un importador para Unity.  Aseprite muestra un conveniente archivo JSON con datos de cuadros, para que pueda crear activos de animaci√≥n mediante programaci√≥n.  Manejar Aseprite JSON y escribir este tipo de datos result√≥ ser bastante tedioso, as√≠ que los traigo aqu√≠.  Puede cargarlos f√°cilmente en Unity utilizando JsonUtility.FromJson &lt;AespriteData&gt;, solo recuerde ejecutar Aseprite con la opci√≥n --format 'json-array'. <br><br>  C√≥digo: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">System.Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> AespriteData { [System.Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Size { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> w; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> h; } [System.Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Position { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> w; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> h; } [System.Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Frame { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> filename; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Position frame; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> rotated; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> trimmed; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Position spriteSourceSize; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Size sourceSize; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> duration; } [System.Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Metadata { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> app; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> version; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> format; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Size size; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> scale; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Frame[] frames; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Metadata meta; }</code> </pre> <br>  En el lado de la Unidad, tuve serios problemas en dos lugares: cargar / cortar una hoja de sprite y construir un clip de animaci√≥n.  Un ejemplo claro me ayudar√≠a mucho, as√≠ que aqu√≠ hay un fragmento de c√≥digo de mi importador para que no sufras tanto: <br><br>  C√≥digo: <br><br><pre> <code class="cs hljs">TextureImporter textureImporter = AssetImporter.GetAtPath(spritePath) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> TextureImporter; textureImporter.spriteImportMode = SpriteImportMode.Multiple; SpriteMetaData[] spriteMetaData = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpriteMetaData[aespriteData.frames.Length]; <span class="hljs-comment"><span class="hljs-comment">// Slice the spritesheet according to the aesprite data. for (int i = 0; i &lt; aespriteData.frames.Length; i++) { AespriteData.Position spritePosition = aespriteData.frames[i].frame; spriteMetaData[i].name = aespriteData.frames[i].filename; spriteMetaData[i].rect = new Rect(spritePosition.x, spritePosition.y, spritePosition.w, spritePosition.h); spriteMetaData[i].alignment = (int)SpriteAlignment.Custom; // Same as "Pivot" in Sprite Editor. spriteMetaData[i].pivot = new Vector2(0.5f, 0f); // Same as "Custom Pivot" in Sprite Editor. Ignored if alignment isn't "Custom". } textureImporter.spritesheet = spriteMetaData; AssetDatabase.ImportAsset(spritePath, ImportAssetOptions.ForceUpdate); Object[] assets = AssetDatabase.LoadAllAssetsAtPath(spritePath); // The first element in this array is actually a Texture2D (ie the sheet itself). for (int i = 1; i &lt; assets.Length; i++) { sprites[i - 1] = assets[i] as Sprite; } // Create the animation. AnimationClip clip = new AnimationClip(); clip.frameRate = 40f; float frameLength = 1f / clip.frameRate; ObjectReferenceKeyframe[] keyframes = new ObjectReferenceKeyframe[aespriteData.frames.Length + 1]; // One extra keyframe is required at the end to express the last frame's duration. float time = 0f; for (int i = 0; i &lt; keyframes.Length; i++) { bool lastFrame = i == keyframes.Length - 1; ObjectReferenceKeyframe keyframe = new ObjectReferenceKeyframe(); keyframe.value = sprites[lastFrame ? i - 1 : i]; keyframe.time = time - (lastFrame ? frameLength : 0f); keyframes[i] = keyframe; time += lastFrame ? 0f : aespriteData.frames[i].duration / 1000f; } EditorCurveBinding binding = new EditorCurveBinding(); binding.type = typeof(SpriteRenderer); binding.path = ""; binding.propertyName = "m_Sprite"; AnimationUtility.SetObjectReferenceCurve(clip, binding, keyframes); AssetDatabase.CreateAsset(clip, "Assets/Animation/" + name + ".anim"); AssetDatabase.SaveAssets();</span></span></code> </pre> <br>  Si a√∫n no lo ha hecho, cr√©ame, es muy f√°cil comenzar a crear sus propias herramientas.  El truco m√°s f√°cil es colocar un GameObject en la escena con el MonoBehaviour adjunto, que tiene el atributo [ExecuteInEditMode].  ¬°Agrega un bot√≥n y estar√°s listo para la batalla!  Recuerde que sus herramientas personales no tienen que verse bien, pueden ser puramente utilitarias. <br><br>  C√≥digo: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">ExecuteInEditMode</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyCoolTool</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> button; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (button) { button = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; DoThing(); } } }</code> </pre> <br>  Cuando se trabaja con sprites, es bastante f√°cil automatizar tareas est√°ndar (por ejemplo, crear texturas de paleta o reemplazar colores por lotes en varios archivos sprite).  Aqu√≠ hay un ejemplo a partir del cual puedes comenzar a aprender c√≥mo cambiar tus sprites. <br><br>  C√≥digo: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = <span class="hljs-string"><span class="hljs-string">"Assets/Whatever/Sprite.png"</span></span>; Texture2D texture = AssetDatabase.LoadAssetAtPath&lt;Texture2D&gt;(path); TextureImporter textureImporter = AssetImporter.GetAtPath(path) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> TextureImporter; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!textureImporter.isReadable) { textureImporter.isReadable = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; AssetDatabase.ImportAsset(path, ImportAssetOptions.ForceUpdate); } Color[] pixels = texture.GetPixels(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, texture.width, texture.height); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; pixels.Length; i++) { <span class="hljs-comment"><span class="hljs-comment">// Do something with the pixels, eg replace one color with another. } texture.SetPixels(pixels); texture.Apply(); textureImporter.isReadable = false; // Make sure textures are marked as un-readable when you're done. There's a performance cost to using readable textures in your project that you should avoid unless you plan to change a sprite at runtime. byte[] bytes = ImageConversion.EncodeToPNG(texture); File.WriteAllBytes(Application.dataPath + path.Substring(6), bytes); AssetDatabase.ImportAsset(path, ImportAssetOptions.ForceUpdate);</span></span></code> </pre> <br><h4>  C√≥mo super√© las oportunidades de Mecanim: queja </h4><br>  Con el tiempo, el prototipo de sistema de sprites modulares que cre√© usando Mecanim se convirti√≥ en el mayor problema al actualizar Unity, porque la API estaba cambiando constantemente y estaba mal documentada.  En el caso de una m√°quina de estado simple, ser√≠a aconsejable poder consultar el estado de cada clip o cambiar los clips en tiempo de ejecuci√≥n.  Pero no!  Por razones de rendimiento, Unity hornea clips en su estado y nos obliga a usar un sistema de redefinici√≥n torpe para cambiarlos. <br><br>  Mecanim en s√≠ no es un sistema tan malo, pero me parece que no logra darse cuenta de su caracter√≠stica principal declarada: la simplicidad.  La idea de los desarrolladores era reemplazar lo que parec√≠a complicado y doloroso (scripting) con algo simple (m√°quina de estado visual).  Sin embargo: <br><br>  - Cualquier m√°quina de estado finito no trivial se convierte r√°pidamente en una red salvaje de nodos y conexiones, cuya l√≥gica est√° dispersa en diferentes capas. <br><br>  - Los casos de uso simples se ven obstaculizados por los requisitos generales del sistema.  Para reproducir una o dos animaciones, debe crear un nuevo controlador y asignar estados / transiciones.  Por supuesto, hay un desperdicio excesivo de recursos. <br><br>  - Es curioso que, como resultado, todav√≠a tenga que escribir c√≥digo, porque para que la m√°quina de estado haga algo interesante, necesita un script que llame a Animator.SetBool y m√©todos similares. <br><br>  - Para el uso m√∫ltiple de la m√°quina de estado con otros clips, debe duplicarlo y reemplazar los clips manualmente.  En el futuro, deber√° realizar cambios en varios lugares. <br><br>  - Si desea cambiar lo que est√° en un estado en tiempo de ejecuci√≥n, entonces tiene problemas.  La soluci√≥n es una API incorrecta o un gr√°fico loco con un nodo para cada animaci√≥n posible. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/8VgQ5PpTqjc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>La historia de c√≥mo los desarrolladores de Firewatch se metieron en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">infierno de las secuencias de comandos visuales</a> .</i>  <i>Lo curioso es que cuando el hablante muestra los ejemplos m√°s simples, todav√≠a se ven locos.</i>  <i>Los espectadores literalmente gimen a las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">12:41</a> .</i>  <i>Agregue enormes costos de mantenimiento y comprender√° por qu√© no me gusta mucho este sistema.</i> <br><br>  Muchos de estos problemas ni siquiera son culpa de los desarrolladores de Mecanim, sino simplemente el resultado natural de ideas incompatibles: no se puede crear un sistema com√∫n y al mismo tiempo simple, y describir la l√≥gica usando im√°genes es m√°s dif√≠cil que solo palabras / s√≠mbolos (¬øalguien recuerda los diagramas de flujo UML?) .  Record√© un fragmento del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">informe</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Zack McClendon en Practice NYC 2018</a> , y si tiene tiempo, ¬°le recomiendo que vea el video completo! <br><br>  Sin embargo, lo descubr√≠.  Las secuencias de comandos visuales siempre son censuradas por nerds agresivos de "escribe tu propio motor" que no entienden las necesidades del artista.  Adem√°s, no se puede negar que la mayor parte del c√≥digo parece una jerga t√©cnica incomprensible. <br><br>  Si ya eres un peque√±o programador y haces juegos con sprites, entonces debes pensarlo dos veces.  Cuando comenc√©, estaba seguro de que nunca podr√≠a escribir algo relacionado con el motor mejor que los desarrolladores de Unity. <br><br>  ¬øY sabes que?  Result√≥ que el animador de sprites es solo un script que cambia el sprite despu√©s de un n√∫mero espec√≠fico de segundos.  Sea como fuere, todav√≠a ten√≠a que escribir el m√≠o.  Desde entonces he agregado eventos de animaci√≥n y otras funciones a mi proyecto espec√≠fico, pero la versi√≥n b√°sica que escrib√≠ en medio d√≠a cubre el 90% de mis necesidades.  Consta de solo 120 l√≠neas y se puede descargar de forma gratuita desde aqu√≠: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://pastebin.com/m9Lfmd94</a> .  Gracias por leer mi art√≠culo.  Hasta pronto! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/468991/">https://habr.com/ru/post/468991/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../468967/index.html">"Tecnolog√≠a" de obtenci√≥n de ecuaciones de din√°mica de TAU. ¬øY por qu√© la identificaci√≥n del sistema es una mierda y las reglas de "f√≠sica honesta"</a></li>
<li><a href="../468969/index.html">Crear usuarios de Google desde PowerShell a trav√©s de API</a></li>
<li><a href="../468971/index.html">Escribir en Java para Nintendo DS</a></li>
<li><a href="../468973/index.html">Red neuronal para clasificar im√°genes de sat√©lite usando Tensorflow en Python</a></li>
<li><a href="../468989/index.html">El mercado de la UEBA muere - Larga vida a la UEBA</a></li>
<li><a href="../468993/index.html">Oculus Quest se conecta a una PC y ve manos</a></li>
<li><a href="../468995/index.html">Pol√≠tica de apertura: c√≥mo los usuarios influyen en el proyecto</a></li>
<li><a href="../468997/index.html">Mentoring: ¬øun must-have o un buen bono?</a></li>
<li><a href="../468999/index.html">¬øQu√© pa√≠ses tienen la Internet "m√°s lenta" y qui√©n corrige la situaci√≥n en las regiones de dif√≠cil acceso?</a></li>
<li><a href="../469001/index.html">Como cocinar gachas de avena de microservicios</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>