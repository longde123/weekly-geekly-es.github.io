<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ›´ ğŸš¶ â£ï¸ å¦‚ä½•åœ¨JavaScriptå’ŒReactjsä¸­ä½¿ç”¨Control Inversionæ¥ç®€åŒ–ä»£ç å¤„ç† ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘©ğŸ½ ğŸ‘¨ğŸ¼â€âš–ï¸ ğŸŒ°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ§åˆ¶åè½¬æ˜¯ä¸€ä¸ªç›¸å½“å®¹æ˜“ç†è§£çš„ç¼–ç¨‹åŸç†ï¼ŒåŒæ—¶å¯ä»¥æ˜¾ç€æ”¹å–„æ‚¨çš„ä»£ç ã€‚ æœ¬æ–‡å°†æ¼”ç¤ºå¦‚ä½•åœ¨JavaScriptå’ŒReactjsä¸­åº”ç”¨æ§ä»¶åè½¬ã€‚ 


 å¦‚æœæ‚¨å·²ç»ç¼–å†™äº†åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨çš„ä»£ç ï¼Œé‚£ä¹ˆæ‚¨å°†ç†Ÿæ‚‰è¿™ç§æƒ…å†µï¼š 


1. æ‚¨åˆ›å»ºä¸€æ®µå¯é‡ç”¨çš„ä»£ç ï¼ˆå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒReactç»„ä»¶ï¼ŒReacté’©å­ç­‰ï¼‰å¹¶å…±äº«...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•åœ¨JavaScriptå’ŒReactjsä¸­ä½¿ç”¨Control Inversionæ¥ç®€åŒ–ä»£ç å¤„ç†</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485012/"><p><img src="https://habrastorage.org/getpro/habr/post_images/ca6/d2e/e7c/ca6d2ee7cdf0a14a1357e78d9f266507.webp" alt="å¦‚ä½•åœ¨JavaScriptå’ŒReactjsä¸­ä½¿ç”¨Control Inversionæ¥ç®€åŒ–ä»£ç å¤„ç†"></p><br><p>  <em>æ§åˆ¶åè½¬æ˜¯ä¸€ä¸ªç›¸å½“å®¹æ˜“ç†è§£çš„ç¼–ç¨‹åŸç†ï¼ŒåŒæ—¶å¯ä»¥æ˜¾ç€æ”¹å–„æ‚¨çš„ä»£ç ã€‚</em>  <em>æœ¬æ–‡å°†æ¼”ç¤ºå¦‚ä½•åœ¨JavaScriptå’ŒReactjsä¸­åº”ç”¨æ§ä»¶åè½¬ã€‚</em> </p><br><p> å¦‚æœæ‚¨å·²ç»ç¼–å†™äº†åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨çš„ä»£ç ï¼Œé‚£ä¹ˆæ‚¨å°†ç†Ÿæ‚‰è¿™ç§æƒ…å†µï¼š </p><br><ol><li> æ‚¨åˆ›å»ºä¸€æ®µå¯é‡ç”¨çš„ä»£ç ï¼ˆå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒReactç»„ä»¶ï¼ŒReacté’©å­ç­‰ï¼‰å¹¶å…±äº«ï¼ˆç”¨äºåä½œæˆ–åœ¨å¼€æºä¸­å‘å¸ƒï¼‰ã€‚ </li><li> æœ‰äººè¦æ±‚æ‚¨æ·»åŠ æ–°åŠŸèƒ½ã€‚ æ‚¨çš„ä»£ç ä¸æ”¯æŒå»ºè®®çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¦‚æœæ‚¨è¿›è¡Œäº†å°‘é‡æ›´æ”¹ï¼Œåˆ™å¯ä»¥ã€‚ </li><li> æ‚¨å¯ä»¥åœ¨ä»£ç åŠå…¶å…³è”çš„é€»è¾‘ä¸­æ·»åŠ æ–°çš„è‡ªå˜é‡/ prop /é€‰é¡¹ï¼Œä»¥ä½¿æ­¤æ–°åŠŸèƒ½æ­£å¸¸è¿è¡Œã€‚ </li><li> é‡å¤æ­¥éª¤2å’Œ3å‡ æ¬¡ï¼ˆæˆ–å¤šæ¬¡ï¼‰ã€‚ </li><li>ç°åœ¨ï¼Œæ‚¨çš„å¯é‡ç”¨ä»£ç å¾ˆéš¾ä½¿ç”¨å’Œç»´æŠ¤ã€‚ </li></ol><br><p> æ˜¯ä»€ä¹ˆä½¿ä»£ç æˆä¸ºä½¿ç”¨å’Œç»´æŠ¤çš„å™©æ¢¦ï¼Ÿ æœ‰å‡ ä¸ªæ–¹é¢ä¼šä½¿æ‚¨çš„ä»£ç æœ‰é—®é¢˜ï¼š </p><a name="habracut"></a><br><ol><li>  <strong>å°è£…å¤§å°å’Œ/æˆ–æ€§èƒ½ï¼š</strong>åœ¨è®¾å¤‡ä¸Šè¿è¡Œçš„ä»£ç è¿‡å¤šä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ æœ‰æ—¶ï¼Œè¿™å¯èƒ½å¯¼è‡´äººä»¬åªæ˜¯æ‹’ç»ä½¿ç”¨æ‚¨çš„ä»£ç ã€‚ </li><li>  <strong>éš¾ä»¥ç»´æŠ¤ï¼š</strong>ä»¥å‰ï¼Œæ‚¨çš„å¯é‡ç”¨ä»£ç åªæœ‰å¾ˆå°‘çš„é€‰æ‹©ï¼Œå¹¶ä¸”ä¸“æ³¨äºåšå¥½ä¸€ä»¶äº‹æƒ…ï¼Œä½†æ˜¯ç°åœ¨å®ƒå¯ä»¥åšå¾ˆå¤šä¸åŒçš„äº‹æƒ…ï¼Œæ‚¨éœ€è¦å…¨éƒ¨è®°å½•ä¸‹æ¥ã€‚ æ­¤å¤–ï¼Œäººä»¬ä¼šå¼€å§‹é—®æ‚¨æœ‰å…³å¦‚ä½•åœ¨æŸäº›ç”¨ä¾‹ä¸Šä½¿ç”¨æ‚¨çš„ä»£ç çš„é—®é¢˜ï¼Œè¿™äº›ç”¨ä¾‹å¯èƒ½ä¸æ‚¨å·²ç»æ·»åŠ äº†æ”¯æŒçš„ç”¨ä¾‹ä¸ç›¸ä¸Šä¸‹ã€‚ æ‚¨ç”šè‡³å¯èƒ½æ‹¥æœ‰ä¸¤ä¸ªå‡ ä¹å®Œå…¨ç›¸åŒçš„ç”¨ä¾‹ï¼Œä½†å®ƒä»¬ä¹‹é—´ç•¥æœ‰ä¸åŒï¼Œå› æ­¤æ‚¨å°†ä¸å¾—ä¸å›ç­”æœ‰å…³åœ¨ç»™å®šæƒ…å†µä¸‹æœ€ä½³ä½¿ç”¨æƒ…å†µçš„é—®é¢˜ã€‚ </li><li> <strong>å®ç°å¤æ‚æ€§</strong> ï¼šæ¯æ¬¡è¿™<em>ä¸ä»…æ˜¯</em>å¦ä¸€ä¸ª<code>if</code> ï¼Œä»£ç é€»è¾‘çš„æ¯ä¸ªåˆ†æ”¯éƒ½ä¸ç°æœ‰çš„é€»è¾‘åˆ†æ”¯å…±å­˜ã€‚ å®é™…ä¸Šï¼Œå½“æ‚¨å°è¯•ç»´æŠ¤ç”šè‡³æ²¡æœ‰äººä½¿ç”¨è¿‡çš„å‚æ•°/é€‰é¡¹/é“å…·çš„ç»„åˆæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œä½†æ˜¯æ‚¨ä»ç„¶éœ€è¦è€ƒè™‘ä»»ä½•å¯èƒ½çš„é€‰é¡¹ï¼Œå› ä¸ºæ‚¨ä¸ç¡®åˆ‡çŸ¥é“æ˜¯å¦æœ‰äººä¼šä½¿ç”¨è¿™äº›ç»„åˆã€‚ </li><li>  <strong>å¤æ‚çš„API</strong> ï¼šæ·»åŠ åˆ°å¯é‡ç”¨ä»£ç ä¸­çš„æ¯ä¸ªæ–°å‚æ•°/é€‰é¡¹/å±æ€§éƒ½å¾ˆéš¾ä½¿ç”¨ï¼Œå› ä¸ºç°åœ¨æ‚¨æ‹¥æœ‰åºå¤§çš„è‡ªè¿°æ–‡ä»¶æˆ–è®°å½•æ‰€æœ‰å¯ç”¨åŠŸèƒ½çš„ç«™ç‚¹ï¼Œäººä»¬å¿…é¡»å­¦ä¹ æ‰€æœ‰è¿™äº›å†…å®¹æ‰èƒ½æœ‰æ•ˆä½¿ç”¨æ‚¨çš„ä»£ç ã€‚ ä½¿ç”¨å®ƒå¹¶ä¸æ–¹ä¾¿ï¼Œå› ä¸ºAPIçš„å¤æ‚æ€§ä¼šæ¸—é€åˆ°ä½¿ç”¨å®ƒçš„å¼€å‘äººå‘˜çš„ä»£ç ä¸­ï¼Œè¿™ä¼šä½¿å®ƒçš„ä»£ç å¤æ‚åŒ–ã€‚ </li></ol><br><p> ç»“æœï¼Œæ¯ä¸ªäººéƒ½å—è‹¦ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ€ç»ˆè®¡åˆ’çš„å®æ–½æ˜¯å‘å±•çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ›´å¤šåœ°è€ƒè™‘æŠ½è±¡çš„å®ç°ï¼ˆè¯·å‚é˜…<a href="https://kentcdodds.com/blog/aha-programming" rel="nofollow">â€œ AHAç¼–ç¨‹â€</a> ï¼‰ï¼Œé‚£å°±å¤ªå¥½äº†ã€‚ æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥å‡å°‘å¯é‡ç”¨ä»£ç çš„é—®é¢˜ï¼Œå¹¶ä»ç„¶è·å¾—ä½¿ç”¨æŠ½è±¡çš„å¥½å¤„ï¼Ÿ </p><br><h2 id="inversiya-upravleniya"> æ§åˆ¶åè½¬ </h2><br><p> æ§åˆ¶åè½¬æ˜¯çœŸæ­£ç®€åŒ–æŠ½è±¡çš„åˆ›å»ºå’Œä½¿ç”¨çš„åŸç†ã€‚ è¿™æ˜¯ç»´åŸºç™¾ç§‘æ‰€è¯´çš„ï¼š </p><br><blockquote>  ...åœ¨ä¼ ç»Ÿç¼–ç¨‹ä¸­ï¼Œè¡¨è¾¾ç¨‹åºç›®çš„çš„ç”¨æˆ·ä»£ç åœ¨å¯é‡ç”¨çš„åº“ä¸­è¢«è°ƒç”¨ä»¥è§£å†³å¸¸è§é—®é¢˜ï¼Œä½†æ˜¯éšç€æ§ä»¶çš„å€’ç½®ï¼Œå®ƒæ˜¯ä¸€ç§è°ƒç”¨è‡ªå®šä¹‰æˆ–ç‰¹å®šäºä»»åŠ¡çš„ä»£ç çš„ç¯å¢ƒï¼Œ </blockquote><p> å¯ä»¥è¿™æ ·è€ƒè™‘ï¼šâ€œå‡å°‘æŠ½è±¡çš„åŠŸèƒ½ï¼Œå¹¶ä½¿å…¶æˆä¸ºå¯èƒ½ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥å®ç°æ‰€éœ€çš„åŠŸèƒ½ã€‚â€ è¿™ä¼¼ä¹æ˜¯å®Œå…¨è’è°¬çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨æŠ½è±¡æ¥éšè—å¤æ‚ä¸”é‡å¤çš„ä»»åŠ¡ï¼Œä»è€Œä½¿æˆ‘ä»¬çš„ä»£ç æ›´â€œå¹²å‡€â€å’Œâ€œç®€æ´â€ã€‚ ä½†æ˜¯ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œä¼ ç»Ÿçš„æŠ½è±¡æ–¹æ³•å¹¶ä¸æ€»æ˜¯ç®€åŒ–ä»£ç ã€‚ </p><br><h1 id="chto-takoe-inversiya-upravleniya-v-kode"> ä»€ä¹ˆæ˜¯ä»£ç ç®¡ç†åè½¬ï¼Ÿ </h1><br><p> é¦–å…ˆï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸äººä¸ºçš„ç¤ºä¾‹ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   Array.prototype.filter   function filter(array) { let newArray = [] for (let index = 0; index &lt; array.length; index++) { const element = array[index] if (element !== null &amp;&amp; element !== undefined) { newArray[newArray.length] = element } } return newArray } // : filter([0, 1, undefined, 2, null, 3, 'four', '']) // [0, 1, 2, 3, 'four', '']</span></span></code> </pre> <br><p> ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç©ä¸€ä¸ªå…¸å‹çš„â€œæŠ½è±¡ç”Ÿå‘½å‘¨æœŸâ€ï¼Œåœ¨æ­¤æŠ½è±¡ä¸­æ·»åŠ æ–°çš„ç”¨ä¾‹ï¼Œå¹¶â€œæ— æ„é—´æ”¹è¿›â€å®ƒä»¥æ”¯æŒè¿™äº›æ–°çš„ç”¨ä¾‹ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   Array.prototype.filter   function filter( array, { filterNull = true, filterUndefined = true, filterZero = false, filterEmptyString = false, } = {}, ) { let newArray = [] for (let index = 0; index &lt; array.length; index++) { const element = array[index] if ( (filterNull &amp;&amp; element === null) || (filterUndefined &amp;&amp; element === undefined) || (filterZero &amp;&amp; element === 0) || (filterEmptyString &amp;&amp; element === '') ) { continue } newArray[newArray.length] = element } return newArray } filter([0, 1, undefined, 2, null, 3, 'four', '']) // [0, 1, 2, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], {filterNull: false}) // [0, 1, 2, null, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], {filterUndefined: false}) // [0, 1, 2, undefined, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], {filterZero: true}) // [1, 2, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], {filterEmptyString: true}) // [0, 1, 2, 3, 'four']</span></span></code> </pre> <br><p> å› æ­¤ï¼Œæˆ‘ä»¬çš„ç¨‹åºä»…é€‚ç”¨äºå…­ä¸ªç”¨ä¾‹ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬æ”¯æŒä»»ä½•å¯èƒ½çš„åŠŸèƒ½ç»„åˆï¼Œå¹¶ä¸”å¤šè¾¾25ç§è¿™æ ·çš„ç»„åˆï¼ˆå¦‚æœæˆ‘è®¡ç®—æ­£ç¡®çš„è¯ï¼‰ã€‚ </p><br><p> é€šå¸¸ï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å½“ç®€å•çš„æŠ½è±¡ã€‚ ä½†æ˜¯å¯ä»¥ç®€åŒ–ã€‚ é€šå¸¸ä¼šå‘ç”Ÿè¿™æ ·çš„æƒ…å†µï¼šå¯¹äºå®é™…æ”¯æŒçš„ç”¨ä¾‹ï¼Œæ·»åŠ æ–°åŠŸèƒ½çš„æŠ½è±¡å¯èƒ½ä¼šå¤§å¤§ç®€åŒ–ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œä¸€æ—¦æŠ½è±¡å¼€å§‹æ”¯æŒæŸç§ä¸œè¥¿ï¼ˆä¾‹å¦‚ï¼Œæ‰§è¡Œ<code>{ filterZero: true, filterUndefined: false }</code> ï¼‰ï¼Œæˆ‘ä»¬å°±å®³æ€•åˆ é™¤æ­¤åŠŸèƒ½ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šç ´åä¾èµ–å®ƒçš„ä»£ç ã€‚ </p><br><p> æˆ‘ä»¬ç”šè‡³ä¸ºå®é™…ä¸Šæ²¡æœ‰çš„ç”¨ä¾‹ç¼–å†™æµ‹è¯•ï¼Œè¿™ä»…ä»…æ˜¯å› ä¸ºæˆ‘ä»¬çš„æŠ½è±¡æ”¯æŒè¿™äº›æ–¹æ¡ˆï¼Œå¹¶ä¸”å°†æ¥æˆ‘ä»¬å¯èƒ½éœ€è¦è¿™æ ·åšã€‚ å½“è¿™äº›ç”¨ä¾‹æˆ–å…¶ä»–ç”¨ä¾‹å¯¹æˆ‘ä»¬è€Œè¨€ä¸å¿…è¦æ—¶ï¼Œæˆ‘ä»¬ä¸ä¼šç§»é™¤å®ƒä»¬çš„æ”¯æŒï¼Œå› ä¸ºæˆ‘ä»¬åªæ˜¯å¿˜è®°äº†å®ƒï¼Œæˆ–è€…è®¤ä¸ºå®ƒå°†æ¥å¯èƒ½å¯¹æˆ‘ä»¬æœ‰ç”¨ï¼Œæˆ–è€…åªæ˜¯æˆ‘ä»¬å®³æ€•ç ´åæŸäº›ä¸œè¥¿ã€‚ </p><br><p> å¥½çš„ï¼Œç°åœ¨è®©æˆ‘ä»¬å¯¹è¯¥å‡½æ•°ç¼–å†™æ›´è¯¦ç»†çš„æŠ½è±¡ï¼Œå¹¶åº”ç”¨æ§ä»¶åè½¬æ–¹æ³•æ¥æ”¯æŒæˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰ç”¨ä¾‹ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   Array.prototype.filter   function filter(array, filterFn) { let newArray = [] for (let index = 0; index &lt; array.length; index++) { const element = array[index] if (filterFn(element)) { newArray[newArray.length] = element } } return newArray } filter( [0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== null &amp;&amp; el !== undefined, ) // [0, 1, 2, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== undefined) // [0, 1, 2, null, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== null) // [0, 1, 2, undefined, 3, 'four', ''] filter( [0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== undefined &amp;&amp; el !== null &amp;&amp; el !== 0, ) // [1, 2, 3, 'four', ''] filter( [0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== undefined &amp;&amp; el !== null &amp;&amp; el !== '', ) // [0, 1, 2, 3, 'four']</span></span></code> </pre> <br><p> å¤ªå¥½äº†ï¼ äº‹å®è¯æ˜è¦å®¹æ˜“å¾—å¤šã€‚ æˆ‘ä»¬åªæ˜¯å¯¹å‡½æ•°è¿›è¡Œäº†æ§åˆ¶ï¼Œå°†è´Ÿè´£ç¡®å®šå“ªä¸ªå…ƒç´ è½å…¥æ–°æ•°ç»„çš„è´£ä»»ä»<code>filter</code>åŠŸèƒ½è½¬ç§»åˆ°äº†è°ƒç”¨è¿‡æ»¤å™¨åŠŸèƒ½çš„åŠŸèƒ½ã€‚ æ³¨æ„ï¼Œ <code>filter</code>å‡½æ•°æœ¬èº«ä»ç„¶æ˜¯æœ‰ç”¨çš„æŠ½è±¡ï¼Œä½†æ˜¯ç°åœ¨å®ƒæ›´åŠ çµæ´»ã€‚ </p><br><p> ä½†æ˜¯ï¼Œè¿™ç§æŠ½è±¡çš„å…ˆå‰ç‰ˆæœ¬æ˜¯å¦‚æ­¤ç³Ÿç³•å—ï¼Ÿ å¯èƒ½ä¸æ˜¯ã€‚ ä½†æ˜¯è‡ªä»æˆ‘ä»¬å°†æ§åˆ¶æƒç§»äº¤ç»™æˆ‘ä»¬ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ”¯æŒæ›´å¤šç‹¬ç‰¹çš„ç”¨ä¾‹ï¼š </p><br><pre> <code class="javascript hljs">filter( [ {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'dolphin'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'eagle'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'robin'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'salmon'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, ], animal =&gt; animal.legs === <span class="hljs-number"><span class="hljs-number">0</span></span>, ) <span class="hljs-comment"><span class="hljs-comment">// [ // {name: 'dolphin', legs: 0, mammal: true}, // {name: 'salmon', legs: 0, mammal: false}, // ]</span></span></code> </pre> <br><p> è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœéœ€è¦åœ¨ä¸åº”ç”¨æ§ä»¶åè½¬çš„æƒ…å†µä¸‹å¢åŠ å¯¹æ­¤ç”¨ä¾‹çš„æ”¯æŒï¼Ÿ æ˜¯çš„ï¼Œé‚£å¤ªè’è°¬äº†ã€‚ </p><br><h1 id="plohoy-api">  APIé”™è¯¯ï¼Ÿ </h1><br><p> æˆ‘å¬åˆ°äººä»¬å¯¹ä½¿ç”¨æ§åˆ¶åè½¬çš„APIçš„æœ€æ™®éçš„æŠ±æ€¨ä¹‹ä¸€æ˜¯ï¼šâ€œæ˜¯çš„ï¼Œä½†æ˜¯ç°åœ¨æ¯”ä»¥å‰æ›´éš¾ä½¿ç”¨äº†ã€‚â€ ä¸¾ä¸ªä¾‹å­ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  filter([0, 1, undefined, 2, null, 3, 'four', '']) //  filter( [0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== null &amp;&amp; el !== undefined, )</span></span></code> </pre> <br><p> æ˜¯çš„ï¼Œå…¶ä¸­ä¸€ä¸ªé€‰é¡¹æ˜¾ç„¶æ¯”å¦ä¸€ä¸ªé€‰é¡¹æ›´æ˜“äºä½¿ç”¨ã€‚ ä½†æ˜¯ï¼Œæ§åˆ¶åè½¬çš„å¥½å¤„ä¹‹ä¸€æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä½¿ç”¨æ§åˆ¶åè½¬çš„APIé‡æ–°å®ç°æ—§çš„APIã€‚ è¿™é€šå¸¸å¾ˆç®€å•ã€‚ ä¾‹å¦‚ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">filterWithOptions</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> array, { filterNull = true, filterUndefined = true, filterZero = false, filterEmptyString = false, } = {}, </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> filter( array, element =&gt; !( (filterNull &amp;&amp; element === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) || (filterUndefined &amp;&amp; element === <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>) || (filterZero &amp;&amp; element === <span class="hljs-number"><span class="hljs-number">0</span></span>) || (filterEmptyString &amp;&amp; element === <span class="hljs-string"><span class="hljs-string">''</span></span>) ), ) }</code> </pre> <br><p> é…·å§ï¼Ÿ è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åº”ç”¨äº†æ§ä»¶åè½¬çš„APIä¹‹ä¸Šåˆ›å»ºæŠ½è±¡ï¼Œä»è€Œåˆ›å»ºæ›´ç®€å•çš„APIã€‚ è€Œä¸”ï¼Œå¦‚æœæˆ‘ä»¬çš„â€œç®€å•â€ APIä¸­æ²¡æœ‰è¶³å¤Ÿçš„ç”¨ä¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸åˆ›å»ºé«˜çº§APIæ—¶æ‰€ä½¿ç”¨çš„ç›¸åŒçš„æ„å»ºå—ï¼Œæ¥ä¸ºæ›´å¤æ‚çš„ä»»åŠ¡å¼€å‘è§£å†³æ–¹æ¡ˆã€‚ ä»–ä»¬ä¸éœ€è¦è®©æˆ‘ä»¬å‘<code>filterWithOptions</code>æ·»åŠ æ–°åŠŸèƒ½å¹¶ç­‰å¾…å…¶å®ç°ã€‚ ä»–ä»¬å·²ç»æ‹¥æœ‰å¯ä»¥ç‹¬ç«‹å¼€å‘æ‰€éœ€å…¶ä»–åŠŸèƒ½çš„å·¥å…·ã€‚ </p><br><p> è€Œä¸”ï¼Œä»…é’ˆå¯¹ç²‰ä¸ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">filterByLegCount</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">array, legCount</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> filter(array, animal =&gt; animal.legs === legCount) } filterByLegCount( [ {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'dolphin'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'eagle'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'robin'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'salmon'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, ], <span class="hljs-number"><span class="hljs-number">0</span></span>, ) <span class="hljs-comment"><span class="hljs-comment">// [ // {name: 'dolphin', legs: 0, mammal: true}, // {name: 'salmon', legs: 0, mammal: false}, // ]</span></span></code> </pre> <br><p> æ‚¨å¯ä»¥ä¸ºç»å¸¸å‘ç”Ÿçš„ä»»ä½•æƒ…å†µåˆ›å»ºç‰¹æ®ŠåŠŸèƒ½ã€‚ </p><br><h2 id="primery-iz-realnoy-zhizni"> ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­ </h2><br><p> æ‰€ä»¥ï¼Œè¿™åœ¨ç®€å•çš„æƒ…å†µä¸‹å¯è¡Œï¼Œä½†æ˜¯è¿™ä¸ªæ¦‚å¿µé€‚åˆç°å®ç”Ÿæ´»å—ï¼Ÿ å¥½å§ï¼Œå¾ˆå¯èƒ½æ‚¨ä¸€ç›´åœ¨ä½¿ç”¨æ§åˆ¶åè½¬ã€‚ ä¾‹å¦‚ï¼Œå‡½æ•°<code>Array.prototype.filter</code>åº”ç”¨é€†æ§åˆ¶ã€‚ ç±»ä¼¼äº<code>Array.prototype.map</code>å‡½æ•°ã€‚ </p><br><p> æ‚¨å¯èƒ½å·²ç»ç†Ÿæ‚‰äº†å¤šç§æ¨¡å¼ï¼Œå®ƒä»¬åªæ˜¯æ§åˆ¶åè½¬çš„ä¸€ç§å½¢å¼ã€‚ </p><br><p> è¿™æ˜¯æˆ‘æœ€å–œæ¬¢å±•ç¤ºçš„ä¸¤ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯<a href="https://kentcdodds.com/blog/compound-components-with-react-hooks" rel="nofollow">â€œå¤åˆæˆåˆ†â€</a>å’Œ<a href="https://kentcdodds.com/blog/the-state-reducer-pattern" rel="nofollow">â€œçŠ¶æ€è¿˜åŸå‰‚â€</a> ã€‚ ä¸‹é¢æ˜¯å¦‚ä½•åº”ç”¨è¿™äº›æ¨¡å¼çš„ç®€è¦ç¤ºä¾‹ã€‚ </p><br><h3 id="sostavnye-komponenty-compound-components"> å¤åˆæˆåˆ† </h3><br><p> å‡è®¾æ‚¨è¦åˆ›å»ºä¸€ä¸ª<code>Menu</code>ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å…·æœ‰ä¸€ä¸ªç”¨äºæ‰“å¼€èœå•çš„æŒ‰é’®å’Œä¸€ä¸ªå•å‡»è¯¥æŒ‰é’®æ—¶å°†æ˜¾ç¤ºçš„èœå•é¡¹åˆ—è¡¨ã€‚ ç„¶åï¼Œå½“é€‰æ‹©è¯¥é¡¹ç›®æ—¶ï¼Œå®ƒå°†æ‰§è¡Œä¸€äº›æ“ä½œã€‚ é€šå¸¸ï¼Œè¦å®ç°æ­¤ç›®çš„ï¼Œä»–ä»¬åªéœ€åˆ›å»ºé“å…·ï¼š </p><br><pre> <code class="xml hljs">function App() { return ( <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Menu</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">buttonContents</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag"> &lt;&gt;</span></span> Actions <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-hidden</span></span></span><span class="hljs-tag">&gt;</span></span>â–¾<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/&gt;</span></span> } items={[ {contents: 'Download', onSelect: () =&gt; alert('Download')}, {contents: 'Create a Copy', onSelect: () =&gt; alert('Create a Copy')}, {contents: 'Delete', onSelect: () =&gt; alert('Delete')}, ]} /&gt; ) }</code> </pre> <br><p> è¿™ä½¿æˆ‘ä»¬å¯ä»¥åœ¨èœå•é¡¹ä¸­é…ç½®å¾ˆå¤šä¸œè¥¿ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨â€œåˆ é™¤â€èœå•é¡¹ä¹‹å‰æ’å…¥ä¸€è¡Œæ€ä¹ˆåŠï¼Ÿ æˆ‘ä»¬æ˜¯å¦åº”è¯¥ä¸ºä¸<code>items</code>ç›¸å…³çš„å¯¹è±¡æ·»åŠ ç‰¹æ®Šé€‰é¡¹ï¼Ÿ å¥½å§ï¼Œæˆ‘ä¸çŸ¥é“ï¼Œä¾‹å¦‚ï¼š <code>precedeWithLine</code> ï¼Ÿ é©¬é©¬è™è™çš„æƒ³æ³•ã€‚ </p><br><p> ä¹Ÿè®¸åˆ›å»ºä¸€ç§ç‰¹æ®Šçš„èœå•é¡¹ï¼Œä¾‹å¦‚<code>{contents: &lt;hr /&gt;}</code> ã€‚ æˆ‘è®¤ä¸ºè¿™ä¼šèµ·ä½œç”¨ï¼Œä½†æ˜¯éšåæˆ‘ä»¬å°†ä¸å¾—ä¸å¤„ç†æ²¡æœ‰<code>onSelect</code> ã€‚ è€å®è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å°´å°¬çš„APIã€‚ </p><br><p> å½“æ‚¨è€ƒè™‘å¦‚ä½•ä¸ºè¯•å›¾åšä¸€äº›ä¸åŒçš„äº‹æƒ…çš„äººåˆ›å»ºä¸€ä¸ªå¥½çš„APIæ—¶ï¼Œè€Œä¸æ˜¯å°è¯•ä½¿ç”¨<code>if</code>è¯­å¥æ—¶ï¼Œè¯·å°è¯•åè½¬æ§ä»¶ã€‚ å¦‚æœæˆ‘ä»¬å°†èœå•å¯è§†åŒ–çš„è´£ä»»è½¬ç§»ç»™ç”¨æˆ·æ€ä¹ˆåŠï¼Ÿ æˆ‘ä»¬ä½¿ç”¨ååº”çš„ä¼˜åŠ¿ä¹‹ä¸€ï¼š </p><br><pre> <code class="xml hljs">function App() { return ( <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Menu</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuButton</span></span></span><span class="hljs-tag">&gt;</span></span> Actions <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-hidden</span></span></span><span class="hljs-tag">&gt;</span></span>â–¾<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuButton</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuList</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onSelect</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{()</span></span></span><span class="hljs-tag"> =&gt;</span></span> alert('Download')}&gt;Download<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onSelect</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{()</span></span></span><span class="hljs-tag"> =&gt;</span></span> alert('Copy')}&gt;Create a Copy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onSelect</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{()</span></span></span><span class="hljs-tag"> =&gt;</span></span> alert('Delete')}&gt;Delete<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuList</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Menu</span></span></span><span class="hljs-tag">&gt;</span></span> ) }</code> </pre> <br><p> è¦æ³¨æ„çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼Œç”¨æˆ·æ²¡æœ‰å¯è§çš„ç»„ä»¶çŠ¶æ€ã€‚ çŠ¶æ€åœ¨è¿™äº›ç»„ä»¶ä¹‹é—´éšå¼å…±äº«ã€‚ è¿™æ˜¯ç»„ä»¶æ¨¡å¼çš„æ ¸å¿ƒä»·å€¼ã€‚ åˆ©ç”¨è¿™ä¸ªæœºä¼šï¼Œæˆ‘ä»¬å°†å¯¹æ¸²æŸ“çš„æ§åˆ¶æƒäº¤ç»™äº†æˆ‘ä»¬çš„ç»„ä»¶ç”¨æˆ·ï¼Œç°åœ¨æ·»åŠ ä¸€æ¡é¢å¤–çš„è¡Œï¼ˆæˆ–å…¶ä»–å†…å®¹ï¼‰æ˜¯ä¸€ç§ç®€å•è€Œç›´è§‚çš„æ“ä½œã€‚ æ²¡æœ‰é¢å¤–çš„æ–‡æ¡£ï¼Œæ²¡æœ‰é¢å¤–çš„åŠŸèƒ½ï¼Œæ²¡æœ‰é¢å¤–çš„ä»£ç æˆ–æµ‹è¯•ã€‚ æ¯ä¸ªäººéƒ½èµ¢ã€‚ </p><br><p> æ‚¨å¯ä»¥<a href="https://kentcdodds.com/blog/compound-components-with-react-hooks" rel="nofollow">åœ¨æ­¤å¤„</a>é˜…è¯»æœ‰å…³æ­¤æ¨¡å¼çš„æ›´å¤šä¿¡æ¯ã€‚ æ„Ÿè°¢<a href="https://twitter.com/ryanflorence" rel="nofollow">Ryan Florence</a> ï¼Œä»–æ•™äº†æˆ‘è¿™ä¸€ç‚¹ã€‚ </p><br><h3 id="redyuser-sostoyaniya-state-reducer"> çŠ¶æ€è¿˜åŸå™¨ </h3><br><p> æˆ‘æƒ³å‡ºäº†è¿™ç§æ¨¡å¼æ¥è§£å†³è®¾ç½®ç»„ä»¶é€»è¾‘çš„é—®é¢˜ã€‚ æ‚¨å¯ä»¥åœ¨æˆ‘çš„åšå®¢<a href="https://kentcdodds.com/blog/the-state-reducer-pattern" rel="nofollow">The State Reducer Pattern</a>ä¸Šäº†è§£æœ‰å…³æ­¤æƒ…å†µçš„æ›´å¤šä¿¡æ¯ï¼Œä½†ä¸»è¦è¦ç‚¹æ˜¯æˆ‘æœ‰ä¸€ä¸ªåä¸º<code>Downshift</code>çš„æœç´¢/è‡ªåŠ¨å®Œæˆ/è¾“å…¥åº“ï¼Œè¯¥åº“çš„ç”¨æˆ·ä¹‹ä¸€æ­£åœ¨å¼€å‘å¤šé€‰ç»„ä»¶ç‰ˆæœ¬ï¼Œå› æ­¤ï¼Œä»–å¸Œæœ›èœå•å³ä½¿åœ¨é€‰æ‹©ä¸€ä¸ªé¡¹ç›®åä¹Ÿä¿æŒæ‰“å¼€çŠ¶æ€ã€‚ </p><br><p>  <code>Downshift</code>èƒŒåçš„é€»è¾‘è¡¨æ˜ï¼Œåšå‡ºé€‰æ‹©åï¼Œèœå•åº”è¯¥å…³é—­ã€‚ éœ€è¦æ›´æ”¹å…¶åŠŸèƒ½çš„åº“ç”¨æˆ·å»ºè®®æ·»åŠ prop <code>closeOnSelection</code> ã€‚ æˆ‘æ‹’ç»äº†è¿™ä¸ªæè®®ï¼Œå› ä¸ºä¸€æ—¦æˆ‘èµ°ä¸Šäº†å¯¼è‡´<a href="https://twitter.com/gurlcode/status/1002110517094371328" rel="nofollow">ç ´äº§</a>çš„é“è·¯ï¼Œå¹¶æƒ³é¿å…è¿™æ ·åšã€‚ </p><br><p> ç›¸åï¼Œæˆ‘åˆ¶ä½œäº†APIï¼Œä»¥ä¾¿ç”¨æˆ·è‡ªå·±å¯ä»¥æ§åˆ¶çŠ¶æ€æ›´æ”¹çš„å‘ç”Ÿæ–¹å¼ã€‚ å¯ä»¥å°†çŠ¶æ€ç¼©å‡å™¨è§†ä¸ºæ¯æ¬¡ç»„ä»¶çŠ¶æ€æ›´æ”¹æ—¶éƒ½ä¼šè°ƒç”¨çš„å‡½æ•°çš„çŠ¶æ€ï¼Œå¹¶ä½¿åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜èƒ½å¤Ÿå½±å“å³å°†å‘ç”Ÿçš„çŠ¶æ€æ›´æ”¹ã€‚ </p><br><p> ä¸€ä¸ªä½¿ç”¨<code>Downshift</code>åº“ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·å•å‡»æ‰€é€‰é¡¹ç›®åä¸å…³é—­èœå•çš„ç¤ºä¾‹ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stateReducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, changes</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (changes.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Downshift.stateChangeTypes.keyDownEnter: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Downshift.stateChangeTypes.clickItem: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...changes, <span class="hljs-comment"><span class="hljs-comment">//     Downshift   //       isOpen  highlightedIndex //      isOpen: state.isOpen, highlightedIndex: state.highlightedIndex, } default: return changes } } // ,   // &lt;Downshift stateReducer={stateReducer} {...restOfTheProps} /&gt;</span></span></code> </pre> <br><p> æ·»åŠ æ­¤é“å…·åï¼Œæˆ‘ä»¬å¼€å§‹æ”¶åˆ°æ›´å°‘çš„è¯·æ±‚æ¥æ·»åŠ æ­¤ç»„ä»¶çš„æ–°è®¾ç½®ã€‚ è¯¥ç»„ä»¶å˜å¾—æ›´åŠ çµæ´»ï¼Œå¹¶ä¸”å¼€å‘äººå‘˜å¯ä»¥æ ¹æ®éœ€è¦è½»æ¾é…ç½®å®ƒã€‚ </p><br><h3 id="render-propsy-render-props"> æ¸²æŸ“é“å…· </h3><br><p> å€¼å¾—ä¸€æçš„æ˜¯<a href="https://reactjs.org/docs/render-props.html" rel="nofollow">â€œæ¸²æŸ“é“å…·â€</a>æ¨¡å¼ã€‚ è¿™ç§æ¨¡å¼æ˜¯ä½¿ç”¨æ§åˆ¶åè½¬çš„ç†æƒ³ç¤ºä¾‹ï¼Œä½†æˆ‘ä»¬å°¤å…¶ä¸éœ€è¦å®ƒã€‚ åœ¨æ­¤å¤„äº†è§£æ›´å¤šä¿¡æ¯ï¼š <a href="https://kentcdodds.com/blog/react-hooks-whats-going-to-happen-to-render-props" rel="nofollow">ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸å†éœ€è¦Render Propsäº†</a> ã€‚ </p><br><h2 id="preduprezhdenie"> è­¦å‘Š </h2><br><p> æ§åˆ¶åè½¬æ˜¯è§£å†³å…³äºå°†æ¥å¦‚ä½•ä½¿ç”¨ä»£ç çš„è¯¯è§£çš„å¥½æ–¹æ³•ã€‚ ä½†æ˜¯åœ¨ç»“æŸä¹‹å‰ï¼Œæˆ‘æƒ³ç»™æ‚¨ä¸€äº›å»ºè®®ã€‚ </p><br><p> è®©æˆ‘ä»¬å›åˆ°ç‰µå¼ºçš„ä¾‹å­ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   Array.prototype.filter   function filter(array) { let newArray = [] for (let index = 0; index &lt; array.length; index++) { const element = array[index] if (element !== null &amp;&amp; element !== undefined) { newArray[newArray.length] = element } } return newArray } // : filter([0, 1, undefined, 2, null, 3, 'four', '']) // [0, 1, 2, 3, 'four', '']</span></span></code> </pre><br><p> å¦‚æœè¿™æ˜¯æˆ‘ä»¬<code>filter</code>åŠŸèƒ½æ‰€éœ€çš„å…¨éƒ¨å‘¢ï¼Ÿ è€Œä¸”ï¼Œæˆ‘ä»¬ä»æ¥æ²¡æœ‰é‡åˆ°è¿‡éœ€è¦è¿‡æ»¤é™¤<code>null</code>å’Œ<code>undefined</code>ä»¥å¤–çš„ä»»ä½•å†…å®¹çš„æƒ…å†µï¼Ÿ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºå•ä¸ªç”¨ä¾‹æ·»åŠ æ§ä»¶å€’ç½®åªä¼šä½¿ä»£ç å¤æ‚åŒ–ï¼Œè€Œä¸ä¼šå¸¦æ¥å¤ªå¤šå¥½å¤„ã€‚ </p><br><p> ä¸ä»»ä½•æŠ½è±¡ä¸€æ ·ï¼Œè¯·å°å¿ƒåº”ç”¨<a href="https://kentcdodds.com/blog/aha-programming" rel="nofollow">AHAç¼–ç¨‹</a>çš„åŸç†ï¼Œå¹¶é¿å…è‰ç‡æŠ½è±¡ï¼ </p><br><h2 id="vyvody"> ç»“è®º </h2><br><p> æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰ç”¨ã€‚ æˆ‘å±•ç¤ºäº†å¦‚ä½•åœ¨ååº”ä¸­åº”ç”¨æ§åˆ¶åè½¬çš„æ¦‚å¿µã€‚ è¿™ä¸ªæ¦‚å¿µå½“ç„¶ä¸ä»…é€‚ç”¨äºReactï¼ˆæ­£å¦‚æˆ‘ä»¬åœ¨<code>filter</code>å‡½æ•°ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼‰ã€‚ ä¸‹æ¬¡æ‚¨å‘ç°è¦åœ¨åº”ç”¨ç¨‹åºçš„<code>coreBusinessLogic</code>å‡½æ•°ä¸­æ·»åŠ å¦ä¸€ä¸ª<code>if</code> ï¼Œè¯·è€ƒè™‘å¦‚ä½•åè½¬æ§ä»¶å¹¶å°†é€»è¾‘è½¬ç§»åˆ°ä½¿ç”¨å®ƒçš„ä½ç½®ï¼ˆæˆ–è€…ï¼Œå¦‚æœå®ƒåœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œåˆ™å¯ä»¥ä¸ºæ­¤åˆ›å»ºæ›´ä¸“ä¸šçš„æŠ½è±¡ï¼‰å…·ä½“æƒ…å†µï¼‰ã€‚ </p><br><p> å¦‚æœéœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨<a href="https://codesandbox.io/s/inversion-of-control-qunm8%3Ffontsize%3D14%26hidenavigation%3D1%26theme%3Ddark" rel="nofollow">CodeSandbox</a>ä¸Šçš„æ–‡ç« ä¸­çš„ç¤ºä¾‹ä½œä¸º<a href="https://codesandbox.io/s/inversion-of-control-qunm8%3Ffontsize%3D14%26hidenavigation%3D1%26theme%3Ddark" rel="nofollow">å‚è€ƒ</a> ã€‚ </p><br><p> ç¥æ‚¨å¥½è¿ï¼Œæ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼ </p><br><p>  PSã€‚ å¦‚æœæ‚¨å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œåˆ™å¯èƒ½ä¼šå–œæ¬¢è¿™ä¸ªè¯é¢˜ï¼š <a href="https://youtu.be/AiJ8tRRH0f8" rel="nofollow">youtube Kent C Dodds-Simply React</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN485012/">https://habr.com/ru/post/zh-CN485012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN485000/index.html">ç¾å›½çš„äº¤é€šæ˜‚è´µå—ï¼Ÿ</a></li>
<li><a href="../zh-CN485002/index.html">Flutter BloCæ¨¡å¼+æä¾›ç¨‹åº+æµ‹è¯•+è®°ä½çŠ¶æ€</a></li>
<li><a href="../zh-CN485006/index.html">ä¹¦ï¼ˆå­˜åœ¨ï¼Ÿï¼‰ã€‚ å…³äºæ€æƒ³æœ¬è´¨çš„æ€è€ƒã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN485008/index.html">Swiftå±æ€§åŒ…è£…å™¨</a></li>
<li><a href="../zh-CN485010/index.html">åˆ«å“­äº†ï¼Œå¥³å­©ï¼ åœ¨å…³äºå“ˆå¸ƒé›·çš„ä¿¡ä¸­ç”¨vc.ruå›å¤ä½œè€…</a></li>
<li><a href="../zh-CN485014/index.html">æˆ‘åº”è¯¥æŠ±æ€¨é‡‡è®¿å—ï¼Ÿ</a></li>
<li><a href="../zh-CN485016/index.html">Selectelçš„æ‰˜ç®¡æ•°æ®åº“ï¼šæ¬¢è¿ä½¿ç”¨Beta</a></li>
<li><a href="../zh-CN485018/index.html">åœ¨Unity LWRPä¸­ä½¿ç”¨ä»£ç ç¼–å†™ç€è‰²å™¨</a></li>
<li><a href="../zh-CN485022/index.html">Playme Sigmaï¼šåŠŸèƒ½é½å…¨ä¸”ä»·æ ¼åˆç†çš„DVR</a></li>
<li><a href="../zh-CN485024/index.html">ä»€ä¹ˆæ˜¯GraalVMç¼–è¯‘å™¨ä¼˜åŒ–çš„å†…å¹•ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>