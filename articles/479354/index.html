<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143967986-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-143967986-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>„äóÔ∏è üñ•Ô∏è üíÖüèø Telegram Open Network: theory and practice from the network validator üë©üèø‚Äçüåæ üó£Ô∏è üë®‚Äçüë®‚Äçüë¶‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the past few months, all the attention of the world blockchain community has been riveted to the launch of one of the largest cryptocurrency projec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Telegram Open Network: theory and practice from the network validator</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mercuryo/blog/479354/"><img src="https://habrastorage.org/webt/dv/br/cr/dvbrcry8avlorp_luis0jjona4i.jpeg"><br><br>  In the past few months, all the attention of the world blockchain community has been riveted to the launch of one of the largest cryptocurrency projects - Telegram Open Network (TON). <br>  What is the TON blockchain really like?  Is the TON network truly decentralized?  What are its real scalability?  How to become a network validator? <br><br>  The answers to these and other questions were tried to find by the team of the <a href="https://mercuryo.io/ru/%3Futm_source%3Dhabr%26utm_medium%3Dhabr%26utm_campaign%3DHabr">Mercuryo</a> project, which has been an active participant in the test network since the beginning of September 2019. <br><br>  On November 15, 2019, Telegram services moved to testnet 2 and the third phase of testing started.  Our team continued to participate in testing, becoming the first validators on the network after TON. <br><br>  To participate in the validation process, the user is required not only to have a sufficient number of coins (GRAM tokens), but also a constantly running full network node (TON Blockchain Full Node). <br><br>  Theoretically, any user can become a validator subject to the condition that he owns the minimum necessary share of the asset (in Gram coins) in the master chain, but in practice a number of questions arise that our team will answer in this article. <br><br>  In addition, we want to share experience on the use of <b>tonlib-cli</b> , as  currently there is practically no documented information, unlike the basic version described in detail in <a href="https://test.ton.org/HOWTO.txt">HowTo.</a> <a name="habracut"></a><br><br><h3>  TON Blockchain </h3><br>  The main component of the Telegram Open Network is a flexible blockchain system, hereinafter referred to as TON Blockchain, which, according to the developers themselves, is capable of processing millions of transactions per second, supporting Turing Complete Smart Contracts, updated official blockchain specifications, multicurrency transfers, as well as micropayment channels for off-chain (Off-Chain) payment networks. <br><br>  ‚ÄúThe TON Blockchain architecture is unique because it has specific features such as a‚Äú self-healing ‚Äùvertical blockchain mechanism and Instant Hypercube Routing, which allows the blockchain to be both fast, reliable scalable and sustainable. ‚Äù <br><br>  As mentioned above, <b>TON Blockchain</b> is the conventional name for a decentralized network (a set of block chains) or a 2D blockchain consisting of three main types of blockchains. <br><cut></cut><br>  Master blockchain or Masterchain is a unique chain of blocks containing general information about the protocol and the current values ‚Äã‚Äãof its parameters, a set of validators and their shares, a set of currently active workchains and their ‚Äúshards‚Äù, as well as a set of hashes of the last blocks masterchains and shardchaynov. <br><br>  <b>Working blockchains or Workchains</b> - a set (up to 232) of blockchains that are ‚Äúworkhorses‚Äù that contain asset transfer transactions and smart contracts.  At the same time, individual workchains can have their own ‚Äúrules‚Äù, account address formats, transaction formats, various virtual machines (VMs) for smart contracts, different basic tokens or cryptocurrencies, etc.  But all of them must satisfy some basic criteria of interoperability in order to ensure relatively simple interaction among themselves.  Thus, the TON Blockchain is inherently heterogeneous, just like the EOS and Polkadot blockchains. <br><br>  <b>Shard blockchains or Shardchains</b> - a subset of blockchains (up to 260) within a set of workchains, ensuring the operation of the sharding system and having the same rules and block format as the workchains.  Shardchains contain only a subset of accounts, depending on the first few (most significant) bits of the address of each particular account.  Since all shardchains have a common format and rules for building blocks, the TON blockchain in this respect is homogeneous and meets the requirements described in one of the Ethereum scaling proposals. <br><br><img src="https://habrastorage.org/webt/nn/m7/4i/nnm74iexx7lj9xjp4jyajurkick.png"><br><br>  Each block of the shardchain (as well as the masterchain) is actually not just a block, but a small blockchain.  As a rule, this ‚Äúblock blockchain‚Äù or ‚Äúvertical blockchain‚Äù consists of exactly one block, so it can be considered just a block of the corresponding ‚Äúordinary‚Äù blockchain (or ‚Äúhorizontal block chain‚Äù).  However, if it becomes necessary to correct incorrect blocks, a new block is entered into the ‚Äúvertical chain of blocks‚Äù, containing either the replacement of the existing ‚Äúhorizontal‚Äù block, or the ‚Äúblock difference‚Äù, containing only a description of those parts of the previous version of the block that need to be replaced.  This TON-specific mechanism for replacing detected invalid blocks without the need for a hard fork is called a <b>2D blockchain</b> , or <b>simply 2-blockchain.</b> <br><br><h3>  Consensus Algorithms and Network Protection Mechanism </h3><br>  TON offers a blockchain based on the <b>Infinite Sharding Paradigm</b> (Proof of Stake or PoS).  According to the developer documentation: <br><br>  ‚ÄúAlmost all implementations of blockchains using sharding are based on the top-down model: first we imagine one blockchain, and then we decide how to divide it into several parts interacting with each other (shardchains) to increase efficiency and increase scalability. <br><br>  TON's approach to sharding is based on the bottom-up principle, which means that the original blockchain is extremely scalable, and each individual shardchain contains only one account or smart contract.  At the next level, we have a huge number of ‚Äúaccount chains‚Äù, each of which describes the transitions between the states of only one account and sends each other messages containing information about transactions.  At the same time, it is impractical to have hundreds of millions of blockchains, updates (i.e. new blocks) in each of them appear rather rarely, therefore, for their more effective implementation, we grouped these ‚Äúaccount chains‚Äù into ‚Äúshardchains‚Äù, each block of which is essentially is a collection of blocks of chains of accounts that have been tied to this particular shard.  Thus, ‚Äúaccount chains‚Äù are actually just virtual or logical blocks within the really existing ‚Äúshardchains‚Äù.  This mechanism sheds light on many of the design decisions of the TON blockchain and we call it the ‚ÄúInfinite Sharding Paradigm‚Äù. <br><br>  The TON consensus network consists of various types of nodes: <b>validators, nominators, phishers, and collators.</b> <br><br><img src="https://habrastorage.org/webt/ze/ui/kr/zeuikreid-4ifyrg6aizdb02szc.png"><br><br>  <b>Validators</b> are PoS nodes and block manufacturers.  <b>Fishers</b> monitor the consensus network in order to find an error or identify a supposedly malicious consensus node, and if the phisher unambiguously confirms that the node is such, it receives a reward in the form of confiscation of part of the share of this validator. <br><br>  The task of <b>collators</b> is to prepare shardchain blocks and provide them for validation to PoS nodes, for which they receive their part of the reward for creating the block.  At the same time, collators are essentially additional participants in the consensus, since validators almost always generate blocks on their own. <br><br>  <b>Nominators</b> lend their assets ( <b>Gram</b> tokens) to the validators for profit.  In fact, nominees are not included in the infrastructure of validators, but only share their large initial share of the asset between them in exchange for a proportional percentage of the total remuneration.  Thus, the scheme and the amount of remuneration that the nominees receive depends entirely on the results of the work of the validators, while the nominees ‚Äúvote‚Äù for the validators, lending them Gram tokens.  The nominators can be either individual token holders or pools that manage the funds of individual TON users and at the same time act as validators, acting as delegates through the TON smart contract.  In this case, the total remuneration of such a pool is distributed between its participants in proportion to their contributions. <br><br>  The very process of generating new blocks proceeds as follows: a certain number of validators select a master chain (shards) suitable for validation using a special algorithm, then a smaller subset of validators is selected for each such shard in the order determined by a pseudo-random method with an interval of approximately every 1024 blocks. <br><br>  Thus, for each block, there is a pseudo-randomly selected set of validators to determine whose candidate block has the highest priority.  Validators and other nodes verify the validity of the proposed block candidates.  If the validator automatically (not intentionally) signs an invalid candidate for blocks, then he is punished with the loss of part or all of his remuneration, or with the suspension from participation in the selection of validators for some time. <br><br>  Next, validators need to reach a consensus based on the BFT (Byzantine Resiliency Protocol) algorithm, similar to the <b>pBFT</b> or <b>Honey Badger BFT</b> protocol.  Then, after consensus is reached, a new block is created, while transaction fees are distributed among the validators. <br><br>  It should be noted that each validator can be selected to participate in several subsets of validators; therefore, it is assumed that all validation and consensus algorithms are run in parallel. <br><br>  After all the new blocks of shards of the chain are generated or the timeout is over, a message appears that a new block of the master chain has been created, which includes hashes of the last blocks of all shards based on the pBFT consensus of all validators. <br><br><h2>  TON Testnet: hands-on experience in the Telegram Open Network </h2><br>  The <a href="https://mercuryo.io/ru/%3Futm_source%3Dhabr%26utm_medium%3Dhabr%26utm_campaign%3DHabr">Mercuryo</a> project team has <a href="https://mercuryo.io/ru/%3Futm_source%3Dhabr%26utm_medium%3Dhabr%26utm_campaign%3DHabr">been</a> an active participant in the test network since September 2019, and during the testing period we have gained some experience that we would like to share with you. <br><br><h3>  Network Access Methods </h3><br>  Interaction with the TON network, one way or another, boils down to using TL specifications that describe how to interact with the API.  Specification files are available <a href="https://github.com/ton-blockchain/ton/tree/master/tl/generate/scheme">here</a> . <br><br>  There are three types of APIs: <br><br>  <b>ton_api</b> - for interacting with Full Node validator-engine-console <br>  <b>lite_api</b> - for working with lite-client <br>  <b>tonlib</b> - everything about the wallet is collected here and this is the only publicly available <b>tonlib-cli API</b> <br><br><h3>  Wallet Creation </h3><br>  The easiest way to create a wallet is to use the Test Gram Wallet, which is available on the official <a href="https://wallet.ton.org/">website</a> for the Windows, macOS and Linux operating systems. <br><br><img src="https://habrastorage.org/webt/my/em/6v/myem6vpqzwfyzxc17pyp5ddimwy.png"><br><img src="https://habrastorage.org/webt/pu/iz/n4/puizn4ai30qgix2biqtzbkax74c.png"><br><br>  There are also several ways to interact through the command line interface: basic and using <b>tonlib-cli</b> .  Unfortunately, at the moment there is no compatibility between them. <br><br>  Here we will consider only those tools that the TON developers themselves offer.  If the basic version is documented in detail in <a href="https://test.ton.org/HOWTO.txt">HowTo</a> , then information on using <b>tonlib-cli is</b> practically absent. <br><br>  As mentioned above, in TON there are 3 APIs for different tasks.  The functions associated with the operation of the wallet are responsible for <b>tonlib</b> . <br><br>  To start working with <b>tonlib-cli</b> , in addition to the command line interface itself, you must have a configuration file for connecting to the public TON network liteserver, which is available <a href="">here</a> . <br><br>  Connection is carried out by the team <br><br>  <b>tonlib-cli -c ton-lite-client-test1.config.json -v 0</b> <br><br>  where -v 0 is the parameter responsible for the output of debugging information. <br><br><h3>  List of commands: </h3><br><img src="https://habrastorage.org/webt/hh/i8/in/hhi8inliqyjpl11cmbf_glax-bq.png"><br><br>  To create a wallet address, use the <b>genkey</b> command and a list of mnemonic phrases that may be necessary to restore access to the address in case of loss of the private key. <br><br><img src="https://habrastorage.org/webt/mt/we/cq/mtwecq-g9afzaxiyf5neygidnqq.png"><br><br><h3>  Key List </h3><br>  The <b>keys</b> command displays a list of keys.  For further operations when executing other commands, it is necessary to use their serial number, i.e.  for the first key there will be <b>id 0</b> . <br><br><img src="https://habrastorage.org/webt/sa/xd/q0/saxdq0xebpvyzr033qnb5qi96jm.png"><br><br><h3>  Address initialization </h3><br>  After creating the address, it must be registered on the network.  To do this, you must first replenish it.  Initially, a special smart contract was used for this - <b>testgiver</b> , but now it‚Äôs easier and more convenient to use a special bot in the <b>@test_ton_bot</b> telegram. <br><br>  Immediately after replenishment, the status of the account is defined as uninited_accountState and will only change after you send GRM test tokens from this address. <br><br>  If you already have tokens on your balance and you need to activate another wallet, then you can use the <b>transferf</b> command and then, along with the wallet replenishment, it will be initialized. <br><br><img src="https://habrastorage.org/webt/v_/0h/mi/v_0hmiomkiqguimn1ptf1zk-dhy.png"><br><br>  You can find out the status of the wallet using the <b>getstate 0</b> command <b>.</b> <br><br><img src="https://habrastorage.org/webt/fs/mw/sz/fsmwszaop6impkokx1m519-zphw.png"><br><br>  Get transaction history using the command <br><br>  <b>gethistory &lt;num_of_key&gt;</b> <br><br>  where &lt;num_of_key&gt; is the key sequence number <br><br><img src="https://habrastorage.org/webt/wc/8i/yw/wc8iywbafrylnebycxbt5qvro9s.png"><br><br><h3>  Network basis </h3><br>  As with most existing blockchains, TON is based on servers that store a complete history of all blockchains that have ever been created on the network. <br><br>  To run a full node in the TON test network, 8 productive cores, 4-8 GB of RAM are enough, at the time of writing, the data occupied about 50GB of hard disk, but it is better to have a margin of at least 100GB.  It should be noted that it is better to use an SSD drive, as  A large number of IOPS are required for recording, otherwise synchronization with the network will be very slow. <br><br>  As a working OS, it is best to use Ubuntu 18.04, as  most of the community tests are conducted on it. <br><br>  <b>Installation Guides</b> <br><br>  <a href="https://test.ton.org/README.txt">README.txt</a> <br>  <a href="https://test.ton.org/FullNode-HOWTO.txt">FullNode-HOWTO.txt</a> <br>  <a href="https://test.ton.org/Validator-HOWTO.txt">Validator-HOWTO.txt</a> <br><br><h3>  Validator system </h3><br>  It is known that the TON blockchain consists of shardchain and masterchain blocks, which are created and verified by special designated nodes called validators.  Validators receive some reward for their ‚Äúwork‚Äù: maintaining the health of the TON blockchain, while income is distributed proportionally within the validator community. <br><br>  At first glance, everything is clear, but in practice, a number of questions arise in connection with this: <br><br><ul><li>  <b>Is there a network restriction on the maximum validator steak?</b> </li></ul><br>  The limit on the size of a share for one validator can always be checked with the <b>getconfig 17</b> command, which will show the actual sizes of allowable steaks: <br><br><img src="https://habrastorage.org/webt/ai/hh/zq/aihhzqztupdjgzsxkox665modzu.png"><br><br>  The screenshot shows that at the moment the minimum share size is 10,000 GRAM.  However, if a validator does not get more than 100,000 GRAM for a round of voting, he is not entitled to participate in the elections.  At the same time, the maximum number of tokens per validator cannot exceed 10,000,000 GRAM and in order for the vote to take place, the minimum size of the total steak must exceed 1,000,000 GRAM. <br><br><ul><li>  <b>How are validators selected?</b> </li></ul><br>  To apply for participation in the validation process, you must have a minimum of 10,000 GRAM.  The election process algorithm is described in detail in the smart contract <b>elector-code.fc</b> <br>  Most likely, the contract will be different in the main network, so the current version is applicable only for the test network. <br><br>  A share of 10,000 GRAM does not mean that you can become a validator, as  receiving test tokens could be easily automated by requests to <b>testgiver</b> . <br><br>  At the moment, almost all validators, when participating in the voting, set max-factor in the amount of 2.7 and a steak in the amount of 120,000 GRAM, since there are most such bets, because of their weight the minimum steak rises to 120,000 / 2.7 = 45,000 GRAM (unlike 100,000 according to official documentation).  But even with such a minimal steak, your chances are practically zero, since the three top validators have a max-factor of 2, which raises the minimum share to 60,000 GRAM, which allows you to become a validator in the testnet. <br><br>  If all the current validators increased their max factor or reduced the size of the steak, then it would be possible to become a validator with a minimum steak, given that the maximum number of validators (1000 nodes) would not be exceeded. <br><br><ul><li>  <b>If the validator system is centralized, then the whole blockchain too?</b> </li></ul><br>  There are no checks, i.e.  no one centrally controls the validators; nominators themselves determine the risks when choosing a validator. <br><br><ul><li>  <b>What types of fines are provided for validators?</b> </li></ul><br>  There is no information at the moment, most likely there will be a consensus mechanism in the document, because even the out-of-sync nodes received awards in the testnet. <br><br><ul><li>  <b>Smart contracts</b> </li></ul><br>  To create TON smart contracts, two special programming languages ‚Äã‚Äãare used: <b>Fift</b> and <b>FunC</b> .  If <b>Fift</b> has at least general <a href="https://test.ton.org/fiftbase.pdf">documentation</a> , then finding information about <b>FunC is</b> almost impossible (even in the <a href="https://rb.ru/news/telegram-contest/">conditions of</a> a development <a href="https://rb.ru/news/telegram-contest/">contest it is</a> indicated that it can only be obtained by analyzing its source code). <br><br>  During testing, it was possible to find out that the <b>FunC</b> code base <b>is</b> not so voluminous (compared to <b>Fift</b> ) and allows you to learn it much faster, so working with <b>FunC is</b> much easier than with <b>Fift</b> . <br><br><ul><li>  <b>Actual / urgent / open questions</b> </li></ul><br>  Slow sync <br>  <a href="https://github.com/ton-blockchain/ton/issues/100">https://github.com/ton-blockchain/ton/issues/100</a> <br><br>  Permissions for validation-engine <br>  +0 = usual lite-client queries <br>  +1 = full node statistics queries <br>  +2 = full code configuration modification queries <br>  +4 = potentially dangerous queries (such as private key export or signing arbitrary strings) <br>  +8 = reserved for future extensions (does nothing at the moment) <br><br><ul><li>  <b>How to make PIPE work with lite-client?</b> </li></ul><br>  By default, lite-client output is sent to stderr, so to process it, you must first redirect the output from stderr to stdout: <br><br>  $ lite-client 2&gt;&gt; (grep ...) <br><br><ul><li>  <b>What are the options for programmatic network access?</b> </li></ul><br>  <a href="https://github.com/ton-blockchain/ton/issues/76">https://github.com/ton-blockchain/ton/issues/76</a> <br><br><ul><li>  <b>What server configuration is required for the validator?</b> </li></ul><br>  The use of a dual-processor server is officially recommended (at least 8 cores per processor).  The software is not very demanding on RAM, so 16 GB is enough.  You must use an SSD as the primary drive, the minimum recommended size of which is 512 GB.  An 8TB HDD is sufficient for storing archived data. <br><br>  It is imperative that you have a high-speed Internet connection: with a predicted average load of 100 Mbit / sec, you must be able to handle peak loads of up to 1Gbit / sec. <br><br>  It is recommended to use XFS as the file system, since information about each block is stored in a separate file.  It is known that, for example, ext4 does not work very well with a large number of small files and can lead to a situation where you simply do not have free inodes with enough disk space. <br><br><ul><li>  <b>How do I know that a node is synchronized?</b> </li></ul><br>  The log will complete the sync message, or using <b>validator-engine-console -c "getstats"</b> unixtime and masterchainblocktime should be almost the same. <br><br><ul><li>  <b>How many validators can be online?</b> </li></ul><br>  Getconfig 16 <br>  max_validators: 1000 max_main_validators: 100 min_validators: 5 <br><br><ul><li>  <b>How to find out current active validators?</b> </li></ul><br>  Getconfig 34 <br><br>  Previous getconfig 32 validator set <br><br><ul><li>  <b>Time for which validators are selected?</b> </li></ul><br>  The whitepaper indicates that the validators are selected for a month, but in the testnet this time is much less and you can find it out from the <b>getconfig 15 config.</b> <br><br>  After restarting testnet, the time intervals for validators have changed: <br><br>  ConfigParam (15) = (validators_elected_for: 65536 elections_start_before: 32768 elections_end_before: 8192 stake_held_for: 32768) <br><br>  From which it follows that a group of validators is selected for 65536 seconds. <br><br><ul><li>  <b>How are the validators selected for the next round?</b> </li></ul><br>  The application process is described in detail in the <a href="https://test.ton.org/Validator-HOWTO.txt">Validator-HOWTO</a> .  Validators are selected using a smart contract, the current address of which can always be found using the <b>getconfig 1</b> command.  Then you need to track the start of the vote. <br><br><img src="https://habrastorage.org/webt/-b/ka/ux/-bkauxbdrcknqeqglguol2ecfwa.png"><br><br>  If the answer is result: [0], then the vote is not active, but if the response contains timestamp, then you can apply for participation.  Even if you are not going to participate, applications from other selection participants can always be viewed: <br><br>  &gt; runmethod -1: A4C2C7C05B093D470DE2316DBA089FA0DD775FD9B1EBFC9DC9D04B498D3A2DDA participant_list <br><br><ul><li>  <b>Is it possible to block TON?</b> </li></ul><br>  Despite the complex design of the network stack based on overlay networks, UDP and TCP are still used as TON transport protocols.  It is known that today Telegram locks are quite unsuccessful, because  It is possible to change IP addresses, use proxies and update settings through push.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, TON will not have such opportunities: it is not possible to quickly move nodes, while validators will not want to risk their shares. Therefore, most likely, in the near future, Telegram developers will introduce new solutions to bypass locks, for example, using ADNL Proxy. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Below is the traffic of one full node after processing 10 million packets. A list of 159 IP addresses running full testnet nodes is as follows: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">126 DIGITAL OCEAN (presumably servers running TON) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13 AMAZON </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 GOOGLE </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 HETZNER </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 ALIBABA CLOUD </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 OVH </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 SELECTEL </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 ONLINE.NET </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 LINODE </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 hosteurope. de </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 contabo.de</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and 1 person possibly hosting it at home in Italy telecomitalia.it </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Therefore, it will not be difficult for the regulator to obtain a list of IP addresses of the network core. However, this is a problem not only of TON, but of any other Internet service. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fact, the Telegram Open Network is an attempt to implement an independent decentralized Internet based on the concept of WEB 3.0 within the existing global network, the interaction with which is carried out through the already created information infrastructure of the Telegram messenger. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">From a technical point of view, TON is a unique project, the technological stack of which was created from scratch, without using existing ready-made solutions. Today it is already possible to say that:</font></font><br><br><ul><li>      ,       ; </li><li>        - (Fift  FunC),           ; </li><li>   ,       ; </li><li>  telegram-,     TON; </li></ul><br><h3>     TON </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Infinite Sharding Paradigm sounds impressive, but it needs to be carefully tested in practice, as as the number of shards increases, the number of cross-chains grows, which is likely to lead to a decrease in transaction processing speed, thus, in fact, there is an effective upper limit on throughput. TON plans to use what the creators themselves call ‚Äúinstant routing in the hypercube‚Äù to route cross-chains and blocks between char-chains. However, although a routing path can be found efficiently, this is not the final solution to the underlying problem of scaling the TON blockchain and increasing throughput.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> While it is impossible to unequivocally say that the TON sharding approach is unsuccessful, nevertheless it should be noted that the ‚ÄúParadigm of Infinite Sharding‚Äù is a bit misleading, and the number of shardchains should most likely remain within reasonable limits. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Decentralization and consensus </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fact, in order to be eligible to participate in consensus building, TON nodes must have a certain share of the asset (Gram tokens) on deposit. The disadvantage of this model is that it can lead to the fact that the rich will become even richer, since the share of the asset is the only determining factor and, accordingly, TON provides rich people with the means to finance the management of PoS nodes, which means that only large organizations with sufficient funding will be receive rewards from most sites without effort and technical know-how.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The consensus PoS nodes are responsible for producing blocks for each shardchain on the network. </font><font style="vertical-align: inherit;">As a result, the number of such mini-blockchains will dynamically increase depending on the transaction load, while PoS nodes are pseudo-randomly assigned to control a specific sector of the shardchains, but the number of consensus nodes themselves does not grow proportionally. </font><font style="vertical-align: inherit;">Initially, there will be only about a hundred PoS nodes that are responsible for creating, distributing, and synchronizing all blocks and shardchains. </font><font style="vertical-align: inherit;">Thus, this creates a large load on PoS nodes both in terms of the required bandwidth and processing power.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Grams Wallet - Gram Token Storage App </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the light of the recently published set of rules on the use of the blockchain service for storing native </font></font><a href="https://telegram.org/tos/wallet"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TON Grams Wallet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tokens </font><font style="vertical-align: inherit;">, which will be integrated directly into the Telegram messenger, many members of the blockchain community have concerns that the Telegram FZ-LLC management intends to block suspicious accounts and unconditionally execute any instructions from regulators in all jurisdictions (even authoritarian countries).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> However, with a more detailed study of the document, it becomes clear that this User Agreement does not contain such measures or restrictions, but only that the user must be over 18 years old and does not plan to use the application for purposes that violate legal norms, regulatory conditions and regulations acting in specific jurisdictions and in case of violation of these rules and regulations, Telegram FZ-LLC is not responsible for the actions of such users. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thus, this document is a standard disclaimer that can be encountered with any other open source software (such as the Linux distribution). </font><font style="vertical-align: inherit;">In this case, special attention should be paid to one very important section (p. 4, p. 4.3), which refers to the fact that the company does not manage the Telegram Open Network blockchain:</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚ÄúWe do not control the TON Blockchain and are unable to cancel or modify the data of transactions already completed.‚Äù </font></font></blockquote><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Our open source </font></font></h2><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go-binding library</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As already mentioned, the only way to interact with the TON network is to use the TONLIB library. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since the Mercuryo project is developing in Go language, we decided to share our achievements with the community by publishing a wrapper library that we use ourselves. </font></font><br> <a href="https://github.com/mercuryoio/tonlib-go"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/mercuryoio/tonlib-go</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tonlib api</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> specification is </font><font style="vertical-align: inherit;">still far from its final state, but now you can use it to perform almost any action related to wallet functionality:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Key operations (create / delete / export / import / change password); </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sending messages / gram / boc files in a transaction; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Getting the status of the wallet and information about it; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Getting a list of transactions by wallet; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tongo is a lightweight wallet utility; </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> At the moment, the priority in the development of the library are: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Network monitoring. </font><font style="vertical-align: inherit;">The ability to receive information on each transaction from all network blocks. </font><font style="vertical-align: inherit;">We are really looking forward to support from tonlib itself;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interactions with contracts. </font><font style="vertical-align: inherit;">Work is already underway;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extending the functionality of the tongo console assistant. </font><font style="vertical-align: inherit;">We are trying to add something new with each release;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generation of interface structures according to tl specification. </font><font style="vertical-align: inherit;">It will allow us to be more mobile and release updates with minimal delays;</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We will continue a series of posts about testing the Telegram Open Network, Grams Wallet and will share our observations. </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List of sources</font></font></b> <div class="spoiler_text"> <a href="https://test.ton.org/ton.pdf"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Whitepaper. </font></font></a> <a href="https://test.ton.org/ton.pdf"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test.ton.org/ton.pdf </font></font></a> <br> <a href="https://github.com/ton-blockchain/ton"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... </font></font><a href="https://github.com/ton-blockchain/ton"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/ton-blockchain/ton </font></font></a> <br> <a href="https://test.ton.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test docks </font></font></a> <br> <a href="https://docs.ton.dev/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Developer </font></font></a> <a href="https://docs.ton.dev/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs docs.ton.dev </font></font></a> <br> <a href="https://en.bitcoinwiki.org/wiki/TON%3Ffbclid%3DIwAR1xGVsR1g7TSNTxfH09wbPXr0QhpPDAGd84dM6OA_sFUry3rVk5xdy32KA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TON - Telegram Open Network </font></font></a> <br> <a href="https://telegram.org/tos/wallet"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grams Wallet</font></font></a> </div></div></div></div><p>Source: <a href="https://habr.com/ru/post/479354/">https://habr.com/ru/post/479354/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../479344/index.html">Introducing the AWS Landing Zone Programmable Terraform Module</a></li>
<li><a href="../479346/index.html">Text with meaning: video from the first mitap for UX editors</a></li>
<li><a href="../479348/index.html">Roskosmos would be useful analogue of the Spinoff program</a></li>
<li><a href="../479350/index.html">Tooltips in FAQ.Net notes program or navigation on RTF documents without changing the documents themselves</a></li>
<li><a href="../479352/index.html">Enter IT: My research on moving to IT from other industries</a></li>
<li><a href="../479356/index.html">Background: the main thing about the new "plugs" AirPods Pro</a></li>
<li><a href="../479360/index.html">Create an open source project for Angels in a couple of clicks</a></li>
<li><a href="../479364/index.html">Rating of the best CPUs for gaming PCs in 2019</a></li>
<li><a href="../479366/index.html">Friday Mobile Survey Results</a></li>
<li><a href="../479368/index.html">How to achieve CMM Level 5 QA and Testing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter54458986 = new Ya.Metrika({
                  id:54458986,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/54458986" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-143967986-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=IU0EG0jaqnehka2lu5TyzAcchrZXI4Yb1QXKQvJxpqE&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>