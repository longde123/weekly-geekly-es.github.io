<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÄ ü§üüèø ‚ñ´Ô∏è Por que fazemos o Enterprise Service Mesh üè∞ üåñ üëàüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O Service Mesh √© um padr√£o arquitetural conhecido para integrar microsservi√ßos e mudar para a infraestrutura em nuvem. Hoje, no mundo dos cont√™ineres ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Por que fazemos o Enterprise Service Mesh</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/456136/">  O Service Mesh √© um padr√£o arquitetural conhecido para integrar microsservi√ßos e mudar para a infraestrutura em nuvem.  Hoje, no mundo dos cont√™ineres na nuvem, √© bastante dif√≠cil ficar sem ele.  V√°rias implementa√ß√µes de malha de servi√ßo de c√≥digo-fonte aberto j√° est√£o dispon√≠veis no mercado, mas sua funcionalidade, confiabilidade e seguran√ßa est√£o longe de ser sempre suficientes, especialmente quando se trata dos requisitos de grandes empresas financeiras em todo o pa√≠s.  Portanto, na Sbertech decidimos personalizar o Service Mesh e queremos falar sobre o que √© interessante no Service Mesh, o que n√£o √© muito e o que faremos com ele. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/610/635/fbf/610635fbfe1b4214c5598679e06bf4aa.png"><br><a name="habracut"></a><br>  A popularidade do modelo de Malha de Servi√ßo est√° crescendo com a popularidade da tecnologia em nuvem.  √â uma camada de infraestrutura dedicada que simplifica a intera√ß√£o entre diferentes servi√ßos de rede.  Os aplicativos modernos de nuvem consistem em centenas e at√© milhares desses servi√ßos, cada um dos quais com milhares de c√≥pias. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/394/a6f/ca9/394a6fca966e4ef70ad205c6eb79af34.png"><br><br>  A intera√ß√£o entre esses servi√ßos e seu gerenciamento √© uma tarefa fundamental do Service Mesh.  De fato, este √© um modelo de rede de uma variedade de proxies, gerenciados centralmente e executando um conjunto de fun√ß√µes muito √∫teis. <br><br>  <i>No n√≠vel do proxy (plano de dados):</i> <br><br><ul><li>  Atribuir e distribuir pol√≠ticas de roteamento e balanceamento de tr√°fego <br></li><li>  Distribui√ß√£o de chaves, certificados, tokens <br></li><li>  Coleta de telemetria, forma√ß√£o de m√©tricas de monitoramento <br></li><li>  Integra√ß√£o com infraestrutura de seguran√ßa e monitoramento <br></li></ul><br>  <i>No n√≠vel do plano de controle:</i> <br><br><ul><li>  Aplicar pol√≠ticas de roteamento e balanceamento de tr√°fego <br></li><li>  Gerenciamento de novas tentativas e tempos limite, defini√ß√£o de n√≥s "mortos" (quebra de circuito), gerenciamento de situa√ß√µes de falha (inje√ß√£o de falhas) e garantia da resili√™ncia dos servi√ßos por meio de outros mecanismos <br></li><li>  Autentica√ß√£o / Autoriza√ß√£o de Chamada <br></li><li>  Descartando m√©tricas (observabilidade) <br></li></ul><br>  O c√≠rculo de usu√°rios interessados ‚Äã‚Äãno desenvolvimento dessa tecnologia √© muito amplo - desde pequenas startups a grandes corpora√ß√µes de Internet, por exemplo, PayPal. <br><br><h2>  Para que serve o Service Mesh no setor corporativo? </h2><br>  O uso do Service Mesh traz muitos benef√≠cios √≥bvios.  Antes de tudo, √© conveniente para os desenvolvedores: <i>uma plataforma de tecnologia aparece</i> para escrever c√≥digo que simplifica significativamente a integra√ß√£o na infraestrutura da nuvem, devido ao fato de a camada de transporte estar completamente isolada da l√≥gica do aplicativo. <br><br>  Al√©m disso, o <i>Service Mesh simplifica o relacionamento entre fornecedores e consumidores.</i>  Hoje, √© muito mais f√°cil para fornecedores e consumidores da API concordar com interfaces e contratos por conta pr√≥pria, sem envolver um intermedi√°rio de integra√ß√£o especial e um √°rbitro para isso - um barramento de servi√ßo corporativo.  Essa abordagem afeta significativamente dois indicadores.  A velocidade de trazer novas funcionalidades ao mercado (time-to-market) est√° aumentando, mas ao mesmo tempo o custo da solu√ß√£o est√° aumentando, uma vez que a integra√ß√£o deve ser feita de forma independente.  O uso do Service Mesh pelas equipes de desenvolvimento de neg√≥cios ajuda a manter o equil√≠brio aqui.  Como resultado, os provedores de API podem se concentrar exclusivamente no componente de aplicativo de seu servi√ßo e simplesmente public√°-lo no Service Mesh - a API ficar√° imediatamente dispon√≠vel para todos os clientes, e a qualidade da integra√ß√£o estar√° pronta para produ√ß√£o e n√£o exigir√° uma √∫nica linha de c√≥digo adicional. <br><br>  Outra vantagem √© que o <i>desenvolvedor, usando o Service Mesh, concentra-se apenas na funcionalidade do neg√≥cio</i> - no produto, e n√£o no componente tecnol√≥gico de seu servi√ßo.  Por exemplo, voc√™ n√£o precisa pensar no fato de que, em uma situa√ß√£o em que o servi√ßo ser√° chamado pela rede, em algum lugar a conex√£o poder√° ser interrompida.  Al√©m disso, o Service Mesh ajuda a equilibrar o tr√°fego entre c√≥pias do mesmo servi√ßo: se uma das c√≥pias "morreu", o sistema alternar√° todo o tr√°fego para as c√≥pias ativas restantes. <br><br>  <i>O Service Mesh</i> √© <i>uma boa base para a cria√ß√£o de aplicativos distribu√≠dos</i> , que oculta ao cliente os detalhes de chamadas para seus servi√ßos, interna e externamente.  Todos os aplicativos que usam o Service Mesh s√£o isolados na camada de transporte da rede e um do outro: n√£o h√° conex√£o entre eles.  Nesse caso, o desenvolvedor obt√©m controle total sobre seus servi√ßos. <br><br>  Deve-se observar que a <i>atualiza√ß√£o de aplicativos distribu√≠dos em um ambiente em que o Service Mesh √© usado est√° se tornando mais f√°cil.</i>  Por exemplo, implanta√ß√£o azul / verde, na qual dois ambientes de aplicativos est√£o dispon√≠veis para instala√ß√£o, um dos quais n√£o √© atualizado e est√° no modo de espera.  A revers√£o para a vers√£o anterior, no caso de uma vers√£o malsucedida, √© realizada por um roteador especial, cuja fun√ß√£o o Service Mesh lida perfeitamente <i>.</i>  Voc√™ pode usar o <i>canary release</i> para executar na nova vers√£o - alterne apenas 10% do tr√°fego ou solicita√ß√µes do grupo de clientes piloto para a nova vers√£o.  O tr√°fego principal vai para a vers√£o antiga, nada quebra. <br><br>  <i>O Service Mesh tamb√©m nos fornece controle de SLA em tempo real</i> .  O sistema de proxies distribu√≠dos n√£o permitir√° inundar o servi√ßo quando um dos clientes exceder a cota emitida para ele.  Se a largura de banda da API for limitada, ningu√©m poder√° estrangul√°-la com um grande n√∫mero de transa√ß√µes: a Malha de Servi√ßo est√° na frente do servi√ßo e n√£o permite tr√°fego extra.  Simplesmente ser√° melhor na camada de integra√ß√£o, e os pr√≥prios servi√ßos continuar√£o a funcionar sem perceber. <br><br>  Se a empresa deseja reduzir o custo de desenvolvimento de solu√ß√µes de integra√ß√£o, o Service Mesh tamb√©m ajuda: <i>voc√™ pode mudar para sua vers√£o de c√≥digo aberto a partir de produtos comerciais</i> .  Nosso Enterprise Service Mesh √© baseado na vers√£o de c√≥digo aberto do Service Mesh. <br><br>  Outra vantagem √© a <i>disponibilidade de um √∫nico conjunto completo de servi√ßos de integra√ß√£o</i> .  Como toda a integra√ß√£o √© constru√≠da atrav√©s dessa camada intermedi√°ria, podemos gerenciar todo o tr√°fego de integra√ß√£o e as conex√µes entre os aplicativos que formam o n√∫cleo de neg√≥cios da empresa.  √â muito conveniente <br><br>  Por fim, o <i>Service Mesh leva a empresa a fazer a transi√ß√£o para uma infraestrutura din√¢mica.</i>  Agora muitos est√£o olhando para a conteineriza√ß√£o.  Vendo um mon√≥lito em microsservi√ßos, √© bonito implementar tudo - o assunto est√° em ascens√£o.  Mas quando voc√™ tenta transferir para uma nova faixa um sistema que est√° em produ√ß√£o h√° muitos anos, voc√™ encontra imediatamente v√°rios problemas: colocar tudo em cont√™ineres e implant√°-lo na plataforma n√£o √© f√°cil.  E a implementa√ß√£o, sincroniza√ß√£o e intera√ß√£o desses componentes distribu√≠dos √© outro t√≥pico dif√≠cil.  Como eles v√£o se comunicar?  Haver√° falhas em cascata?  O Service Mesh permite solucionar alguns desses problemas e facilitar a migra√ß√£o da arquitetura antiga para a nova devido ao fato de voc√™ poder esquecer a l√≥gica da troca de rede. <br><br><h2>  Por que personalizar o Service Mesh </h2><br>  Em nossa empresa, centenas de sistemas e m√≥dulos coexistem juntos, e o tempo de execu√ß√£o √© muito ocupado.  Portanto, um padr√£o simples, quando um sistema liga para outro e recebe uma resposta, n√£o √© suficiente, porque na produ√ß√£o queremos mais.  O que mais voc√™ precisa de um Service Mesh corporativo? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ca4/0e3/e24/ca40e3e2437875712025691aa5c340e3.png"><br><br><h3>  Servi√ßo de Processamento de Eventos </h3><br>  Imagine que precisamos fazer um processamento de eventos em tempo real - um sistema que analise em tempo real as a√ß√µes do cliente e possa imediatamente fazer uma oferta relevante para ele.  Para implementar essa funcionalidade, <i>√© usado</i> um <i>padr√£o de arquitetura chamado EDA (Event-driven Architecture)</i> .  Nenhum dos Service Mesh relevantes suporta nativamente esses padr√µes, mas isso √© muito importante, especialmente para o banco! <br><br>  √â estranho que a RPC (Chamada de Procedimento Remoto) ofere√ßa suporte a todas as vers√µes do Service Mesh e elas n√£o sejam amigas do EDA.  Como o Service Mesh √© uma apar√™ncia de integra√ß√£o distribu√≠da moderna, e o EDA √© um padr√£o arquitetural muito relevante que permite que voc√™ fa√ßa coisas √∫nicas em termos de experi√™ncia do cliente. <br><br>  Nossa malha de servi√ßo corporativo deve resolver esse problema.  Al√©m disso, queremos ver nele a implementa√ß√£o de entrega garantida, streaming e processamento de eventos integrado usando uma variedade de filtros e modelos. <br><br><h3>  Servi√ßo de transfer√™ncia de arquivos </h3><br>  Al√©m do EDA, seria bom poder transferir arquivos: em uma escala corporativa, muitas vezes apenas a integra√ß√£o de arquivos √© poss√≠vel.  Em particular, o padr√£o ETL arquitetural √© usado (Extrair, Transformar, Carregar - ‚Äúextrair, transformar, carregar‚Äù).  Nele, como regra geral, todos trocam arquivos exclusivamente: eles usam big data, o que √© impratic√°vel para enviar pedidos separados.  A capacidade de oferecer suporte nativo √†s transfer√™ncias de arquivos no Enterprise Service Mesh fornece a flexibilidade das necessidades dos neg√≥cios. <br><br><h3>  Servi√ßo de orquestra√ß√£o </h3><br>  Nas grandes organiza√ß√µes, quase sempre existem equipes diferentes que produzem produtos diferentes.  Por exemplo, em um banco, algumas equipes trabalham com dep√≥sitos, enquanto outras trabalham com produtos de cr√©dito, e existem muitos desses casos.  S√£o pessoas diferentes, equipes diferentes que fabricam seus produtos, desenvolvem suas APIs e as fornecem a outras pessoas.  E muitas vezes h√° a necessidade da composi√ß√£o desses servi√ßos, bem como a implementa√ß√£o da l√≥gica complexa da chamada seq√ºencial do conjunto de APIs.  Para resolver esse problema, √© necess√°ria uma solu√ß√£o na camada de integra√ß√£o, que simplificar√° toda essa l√≥gica composta (chamando v√°rias APIs, descrevendo a rota das solicita√ß√µes etc.).  Este √© o servi√ßo de orquestra√ß√£o no Enterprise Service Mesh. <br><br><h3>  AI e ML </h3><br>  Quando os microsservi√ßos se comunicam atrav√©s de uma √∫nica camada de integra√ß√£o, o Service Mesh, √© claro, sabe tudo sobre as chamadas de cada servi√ßo.  Coletamos telemetria: quem ligou para quem, quando, quanto tempo, quantas vezes e assim por diante.  Quando existem centenas de milhares desses servi√ßos e bilh√µes de chamadas, tudo isso acumula e forma Big Data.  Esses dados podem ser analisados ‚Äã‚Äãusando IA, aprendizado de m√°quina etc. e, em seguida, executam algumas a√ß√µes √∫teis com base nos resultados da an√°lise.  Seria apropriado transferir pelo menos parcialmente para a intelig√™ncia artificial o gerenciamento de todo esse tr√°fego de rede e chamadas de aplicativos integradas ao Service Mesh. <br><br><h3>  Servi√ßo de gateway de API </h3><br>  Como regra, o Service Mesh possui proxies e servi√ßos que se acessam dentro do per√≠metro confi√°vel.  Mas tamb√©m existem contrapartes externas.  Os requisitos de API para esse grupo de consumidores s√£o muito mais s√©rios.  Dividimos essa tarefa em duas partes principais. <br><br><ul><li>  <i>Seguran√ßa</i>  Problemas relacionados a ddos, vulnerabilidade de protocolos, aplicativos, sistemas operacionais e assim por diante. <br></li><li>  <i>A balan√ßa</i> .  Quando a conta da API que precisa ser entregue aos clientes chega a milhares ou mesmo centenas de milhares, h√° a necessidade de alguns meios de gerenciar esse conjunto de APIs.  Voc√™ precisa monitorar constantemente a API: eles funcionam ou n√£o, em qual status, qual tr√°fego est√° acontecendo, quais estat√≠sticas etc.  O gateway da API deve lidar com essa tarefa, tornando todo o processo gerenci√°vel e seguro.  Gra√ßas a esse componente, o Enterprise Service Mesh aprende a publicar as APIs internas e externas sem muita dificuldade. <br></li></ul><br><h3>  Servi√ßo de suporte para protocolos e formatos de dados espec√≠ficos (gateway AS) </h3><br>  Atualmente, a maioria das solu√ß√µes Service Mesh pode trabalhar apenas de forma nativa com tr√°fego HTTP e HTTP2 ou no modo truncado no n√≠vel TCP / IP.  O Enterprise Service Mesh possui muitos outros protocolos de transfer√™ncia de dados muito espec√≠ficos.  Alguns sistemas podem usar intermedi√°rios de mensagens, outros s√£o integrados no n√≠vel do banco de dados.  Se a empresa possui SAP, tamb√©m pode usar seu pr√≥prio sistema de integra√ß√£o.  E tudo isso funciona e √© uma parte importante do neg√≥cio. <br><br>  Voc√™ n√£o pode simplesmente dizer: "Vamos abandonar o legado e criar novos sistemas que possam usar o Service Mesh".  Para tornar amigos de todos os sistemas antigos os novos (na arquitetura de microsservi√ßo), os sistemas que podem usar o Service Mesh precisar√£o de algum tipo de adaptador, intermedi√°rio e gateway.  Concordo, seria bom se fosse entregue em uma caixa junto com o servi√ßo.  O gateway AS pode suportar qualquer op√ß√£o de integra√ß√£o.  Imagine que voc√™ acabou de instalar o Enterprise Service Mesh e ele est√° pronto para interagir com todos os protocolos necess√°rios.  Para n√≥s, essa abordagem √© muito importante. <br><br>  <i>√â assim que apresentamos a vers√£o corporativa do Service Mesh (Enterprise Service Mesh).</i>  <i>A personaliza√ß√£o descrita resolve a maioria dos problemas que surgem ao tentar usar vers√µes de c√≥digo-fonte aberto prontas da plataforma de integra√ß√£o.</i>  <i>Tendo aparecido apenas alguns anos atr√°s, a arquitetura do Service Mesh continua a evoluir e estamos felizes por podermos contribuir para o seu desenvolvimento.</i>  <i>Esperamos que nossa experi√™ncia seja √∫til para voc√™.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt456136/">https://habr.com/ru/post/pt456136/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt456126/index.html">Conte uma tonelada de dinheiro e fa√ßa uma explora√ß√£o na mina: como os rob√¥s j√° encontraram um lugar entre n√≥s</a></li>
<li><a href="../pt456128/index.html">MBLT19 :: return</a></li>
<li><a href="../pt456130/index.html">Como resolver problemas NP-hard usando algoritmos parametrizados</a></li>
<li><a href="../pt456132/index.html">Sobre a grava√ß√£o de bugs ou Encontre um gato</a></li>
<li><a href="../pt456134/index.html">Confie, mas verifique! Como testar seu modelo usando a nuvem IBM (Watson OpenScale)</a></li>
<li><a href="../pt456140/index.html">Conhe√ßa o Codeception 3.0</a></li>
<li><a href="../pt456144/index.html">KubeCon EU 2019: 10 principais conclus√µes</a></li>
<li><a href="../pt456146/index.html">DevOps em desenvolvimento: automa√ß√£o de c√≥digo de aplicativo da web</a></li>
<li><a href="../pt456148/index.html">Not√≠cias da semana: Facebook recusa Huawei em aplicativos, Aurora OS em vez de Android, multas por minera√ß√£o</a></li>
<li><a href="../pt456150/index.html">Petty little joy # 4: Radon - qualidade do c√≥digo medida em n√∫meros</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>