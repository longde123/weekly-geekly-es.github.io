<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêì ü§æüèº üßòüèæ Curso MIT "Seguran√ßa de sistemas de computadores". Aula 8: Modelo de Seguran√ßa de Rede, Parte 1 üëãüèø üë©‚Äç‚öñÔ∏è ‚ñ´Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula n¬∫ 6.858. "Seguran√ßa de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguran√ßa de sistemas de computadores". Aula 8: Modelo de Seguran√ßa de Rede, Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418229/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula n¬∫ 6.858.  "Seguran√ßa de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security √© um curso sobre o desenvolvimento e implementa√ß√£o de sistemas de computador seguros.  As palestras abrangem modelos de amea√ßas, ataques que comprometem a seguran√ßa e t√©cnicas de seguran√ßa baseadas em trabalhos cient√≠ficos recentes.  Os t√≥picos incluem seguran√ßa do sistema operacional (SO), recursos, gerenciamento de fluxo de informa√ß√µes, seguran√ßa de idiomas, protocolos de rede, seguran√ßa de hardware e seguran√ßa de aplicativos da web. <br><br>  Palestra 1: ‚ÄúIntrodu√ß√£o: modelos de amea√ßas‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: ‚ÄúControle de ataques de hackers‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: ‚ÄúEstouros de Buffer: Explora√ß√µes e Prote√ß√£o‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: ‚ÄúSepara√ß√£o de Privil√©gios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: ‚ÄúDe onde v√™m os sistemas de seguran√ßa?‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: ‚ÄúOportunidades‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: ‚ÄúSandbox do Cliente Nativo‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 8: ‚ÄúModelo de Seguran√ßa de Rede‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  Vamos come√ßar a pr√≥xima parte de nossa fascinante jornada ao mundo da seguran√ßa de computadores.  Hoje falaremos sobre seguran√ßa na web.  De fato, a seguran√ßa na Internet √© um dos meus t√≥picos favoritos para falar, porque apresenta os verdadeiros horrores deste mundo. <br><br>  Claro, √© f√°cil ser aluno e pensar que tudo vai ficar bem, voc√™ s√≥ precisa se formar.  No entanto, a palestra de hoje e a pr√≥xima lhe dir√£o que, na realidade, n√£o √© assim e voc√™ est√° esperando por horrores cont√≠nuos. <br><br><img src="https://habrastorage.org/webt/is/3k/bi/is3kbiiozo3hkfvkj63g8vfke08.jpeg"><br><br>  Ent√£o, o que √© a internet?  Antigamente, a rede era muito mais simples do que hoje.  Clientes, ou seja, navegadores, n√£o podiam fazer nada com a exibi√ß√£o de conte√∫do fixo ou ativo.  Essencialmente, eles s√≥ podiam receber imagens e textos est√°ticos. <br><br>  Mas o lado do servidor era um pouco mais interessante, mesmo se o lado do cliente tivesse conte√∫do est√°tico.  O servidor pode se comunicar com os bancos de dados, pode "conversar" com outras m√°quinas no lado do servidor.  Assim, por muito tempo, o conceito de seguran√ßa na Web esteve, em princ√≠pio, associado ao que o servidor faz.  De fato, em nossas palestras, usaremos a mesma abordagem. <br><br>  Consideramos um ataque de estouro de buffer.  Como os clientes podem induzir o servidor a for√ß√°-lo a fazer o que n√£o deseja.  Voc√™ tamb√©m olhou para o servidor OKWS e como o isolamento de privil√©gios pode ser feito l√°. <br><br>  At√© agora, observamos a seguran√ßa atrav√©s da experi√™ncia que foi realmente adquirida usando os pr√≥prios recursos de seguran√ßa.  Mas agora os navegadores s√£o objetos muito interessantes do ponto de vista da seguran√ßa, com os quais tudo √© muito complicado. <br><br>  Considere todos os tipos de coisas loucas e din√¢micas que um navegador pode fazer.  Por exemplo, voc√™ provavelmente j√° ouviu falar de JavaScript.  O JavaScript agora permite que as p√°ginas executem o c√≥digo do lado do cliente.  Existe um modelo DOM, sobre o qual falaremos mais detalhadamente hoje.  O modelo DOM essencialmente permite que o c√≥digo JavaScript altere dinamicamente a apar√™ncia da p√°gina, por exemplo, para estilizar fontes e afins. <br><br>  Temos solicita√ß√µes HTTP XML.  Essa √© basicamente uma maneira do JavaScript recuperar o conte√∫do dos servidores de forma ass√≠ncrona.  Voc√™ tamb√©m pode ouvir sobre solicita√ß√µes HTTP XML chamadas AJAX - busca ass√≠ncrona em JavaScript. <br><br>  Existem coisas como soquetes da web.  Esta √© uma API rec√©m-introduzida, uma interface de programa√ß√£o.  Os soquetes da Web permitem a comunica√ß√£o full duplex entre clientes e servidores, ou seja, a comunica√ß√£o nas duas dire√ß√µes. <br><br>  Tamb√©m temos todos os tipos de suporte multim√≠dia, por exemplo, uma tag: <br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Permite que uma p√°gina da web reproduza v√≠deos sem usar um aplicativo Flash.  Ele pode simplesmente reproduzir este v√≠deo nativamente. <br><br><img src="https://habrastorage.org/webt/5_/_v/cb/5__vcb58sx_gbaj47uzqspqrnmq.jpeg"><br><br>  Tamb√©m temos geolocaliza√ß√£o.  Agora a p√°gina da web pode determinar fisicamente onde voc√™ est√°.  Por exemplo, se voc√™ usar uma p√°gina da web em um smartphone, o navegador poder√° acessar o m√≥dulo GPS do seu dispositivo.  Se voc√™ acessar uma p√°gina da Web por meio de um navegador na √°rea de trabalho, ele poder√° visualizar sua conex√£o Wi-Fi e conectar-se ao servi√ßo de geolocaliza√ß√£o Wi-Fi do Google para descobrir exatamente onde voc√™ est√°.  Parece loucura, n√£o √©?  Mas agora as p√°ginas da web podem fazer essas coisas.  Tamb√©m mencionamos algo como o Native Client, que permite que os navegadores executem c√≥digo nativo. <br>  Existem muitos outros recursos no navegador que n√£o mencionei aqui.  Mas basta dizer que um navegador moderno √© uma coisa incrivelmente complexa. <br><br>  Ent√£o, o que isso significa em termos de seguran√ßa?  Em geral, isso significa que estamos em grande dificuldade.  Porque existe realmente um enorme campo de atividade para amea√ßas √† seguran√ßa.  Grosso modo, quando voc√™ pensa em seguran√ßa, pode pensar em um gr√°fico parecido com este: o eixo vertical √© a probabilidade da execu√ß√£o correta das fun√ß√µes e o eixo horizontal √© o n√∫mero de fun√ß√µes dispon√≠veis.  O eixo vertical √© limitado a 100, o que n√£o podemos alcan√ßar mesmo com o c√≥digo mais simples. <br><br><img src="https://habrastorage.org/webt/bb/ez/8c/bbez8ciugvxvpzo1im18s-tfdws.jpeg"><br><br>  De fato, essa curva se parece com isso e os navegadores da Web est√£o aqui, no final do gr√°fico, abaixo da seta.  A depend√™ncia √© simples - quanto mais processos no sistema, menor a probabilidade de serem executados corretamente.  Hoje, discutiremos todos os tipos de erros de seguran√ßa est√∫pidos que ocorrem constantemente.  E assim que os antigos s√£o corrigidos, novos erros aparecem imediatamente, porque as pessoas continuam adicionando novas fun√ß√µes ao navegador, muitas vezes sem pensar nas consequ√™ncias de seguran√ßa que podem causar. <br><br>  Portanto, se voc√™ est√° pensando sobre o que √© um aplicativo da Web hoje, pode dizer que √© um cliente e um servidor.  Um aplicativo Web moderno abrange v√°rias linguagens de programa√ß√£o, v√°rios computadores e muitos programas de hardware. <br>  Por exemplo, voc√™ pode usar o Firefox em um computador com Windows, ent√£o este navegador conversar√° com a m√°quina na nuvem que executa o Linux e "executa" no servidor Apache.  Talvez ele seja executado em um chip ARM que n√£o seja compat√≠vel com a plataforma x86 ou vice-versa.  Em suma, h√° problemas com a composi√ß√£o de v√°rios componentes.  Todos esses n√≠veis de software e todos esses n√≠veis de hardware podem afetar a seguran√ßa. <br><br>  Portanto, tudo isso √© dif√≠cil, pois n√£o temos id√©ia de como cobrir toda essa composi√ß√£o de ‚Äúsoftware‚Äù e ‚Äúhardware‚Äù como um todo.  Por exemplo, um dos problemas comuns da Internet √© a an√°lise de contexto. <br><br>  Suponha que a p√°gina tenha algo parecido com isto: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> x = </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'UNTRUSTED'</span></span></span><span class="actionscript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><img src="https://habrastorage.org/webt/7u/8u/_a/7u8u_akl6_cfutxhj0is1-ce8-0.jpeg"><br><br>  Voc√™ declara uma tag de script, dentro dela existe uma vari√°vel que recebe o valor do lado n√£o confi√°vel - o usu√°rio ou outra m√°quina.  Em seguida, fechamos a tag de script, e essa parte pode ser confi√°vel.  Ou seja, temos uma linha ao longo das bordas na qual existem coisas que podem ser confi√°veis ‚Äã‚Äãe, no meio, c√≥digo n√£o confi√°vel e n√£o confi√°vel.  Por que podemos ter problemas se colocarmos no meio do script algo recebido de uma parte n√£o verificada? <br><br>  <b>P√∫blico:</b> voc√™ pode ter as aspas finais erradas em algum lugar dentro deste c√≥digo que interromper√£o a linha do script. <br><br>  <b>Professor:</b> absolutamente certo!  O problema √© o contexto diferente que pode quebrar esse c√≥digo n√£o confi√°vel em peda√ßos.  Por exemplo, se a cota√ß√£o de fechamento estiver localizada no meio do c√≥digo n√£o confi√°vel, fecharemos a defini√ß√£o dessa linha JavaScript. <br><br><img src="https://habrastorage.org/webt/xl/k7/hj/xlk7hjaccj8njct_nghkomz5myi.jpeg"><br><br>  Assim, depois de adicionarmos o contexto da string JavaScript, iniciamos a execu√ß√£o desse contexto.  Nesse caso, o invasor pode simplesmente colocar a tag de fechamento do script aqui, sair do contexto JavaScript e entrar no contexto HTML, por exemplo, para encontrar novos n√≥s HTML ou algo parecido. <br><br><img src="https://habrastorage.org/webt/x3/17/59/x31759e07z2lp0rom7bwab3qb-4.jpeg"><br><br>  Portanto, voc√™ deve considerar esses problemas de composi√ß√£o em toda a Internet, pois ela usa muitas linguagens diferentes: HTML, CSS, JavaScript, possivelmente MySQL no servidor, e assim por diante.  Ent√£o, dei um exemplo cl√°ssico de por que voc√™ deve fazer o que √© chamado de "padroniza√ß√£o de conte√∫do".  Sempre que voc√™ recebe informa√ß√µes n√£o confi√°veis ‚Äã‚Äãde algu√©m, √© necess√°rio analis√°-las com muito cuidado para garantir que n√£o possa ser usado como vetor de ataque. <br><br>  Outra raz√£o pela qual a seguran√ßa da Internet √© dif√≠cil √© que as especifica√ß√µes da web s√£o incrivelmente longas, tediosas, chatas e muitas vezes inconsistentes.  Quando quero dizer especifica√ß√µes da web, quero dizer coisas como defini√ß√£o JPEG, defini√ß√£o CSS, defini√ß√£o HTML.  Estes documentos t√™m o mesmo tamanho que o tamanho da Constitui√ß√£o da UE e s√£o igualmente dif√≠ceis de entender.  Por fim, quando os fornecedores de navegadores veem todas essas especifica√ß√µes, eles simplesmente precisam dizer aos desenvolvedores: "tudo bem, e obrigado por isso", e depois l√™-los e rir de tudo isso com seus amigos. <br><br>  Portanto, essas especifica√ß√µes s√£o bastante vagas e nem sempre refletem com precis√£o o que os navegadores reais fazem.  Se voc√™ quer entender esse horror, pode visitar o site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://www.quirksmode.org/</a> , mas se quiser ser feliz, √© melhor n√£o ir at√© l√°.  L√°, todas essas terr√≠veis inconsist√™ncias que os navegadores fazem quando o usu√°rio pressiona uma tecla est√£o documentadas l√°.  Neste site voc√™ pode verificar o que acontece. <br><br>  De qualquer forma, nesta palestra, focaremos o lado do cliente do aplicativo da web.  Em particular, veremos como √© poss√≠vel isolar o conte√∫do proveniente de v√°rios provedores da Web, que de alguma forma devem coexistir na mesma m√°quina e no mesmo navegador.  H√° uma diferen√ßa fundamental entre o que voc√™ pensa do aplicativo da √°rea de trabalho e o que pensa do aplicativo da web. <br><br>  Em termos abstratos, a maioria dos aplicativos de √°rea de trabalho que voc√™ usa pode ser percebida como um produto de um desenvolvedor, por exemplo, a Microsoft.  Ou talvez voc√™ esteja usando o software TurboTax do Sr. e da Sra. TurboTax, e assim por diante.  Mas quando voc√™ olha para aplicativos da Web, o que visualmente o procura como um todo consiste na verdade em um monte de aplicativos com conte√∫dos diferentes de um monte de desenvolvedores diferentes. <br><br><img src="https://habrastorage.org/webt/ot/3g/nf/ot3gnfnorwcau6om-8-3kb2kvl4.jpeg"><br><br>  Por exemplo, voc√™ acessa a p√°gina da CNN, parece que tudo aqui est√° localizado em uma guia.  Mas cada uma dessas coisas visuais que voc√™ v√™ pode realmente vir de outra pessoa.  Vejamos um exemplo muito simples. <br><br>  Digamos que entramos online em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">http://foo.com/index.html</a> .  Em que consiste a p√°gina em considera√ß√£o? <br><br><img src="https://habrastorage.org/webt/jn/mg/4j/jnmg4jliomepbmgt3iyyisgrhso.jpeg"><br><br>  No topo, pode haver an√∫ncios que podem ter sido baixados do ads.com.  Um bloco de an√°lise, por exemplo, do google.com.br, pode ser localizado √† esquerda.  Essas bibliotecas s√£o muito populares para rastrear o n√∫mero de pessoas que baixaram esta p√°gina, para monitorar em quais links as pessoas clicam, em quais partes da p√°gina elas est√£o interessadas em interagir e assim por diante. <br><br>  √Ä direita, voc√™ pode ter outra biblioteca JavaScript, como o jQuery, que vem do cdn.foo.com.  Este √© um conte√∫do fornecido para a opera√ß√£o do foo.com. <br><br>  O jQuery √© uma biblioteca muito popular para manipular a GUI; portanto, o jQuery est√° dispon√≠vel em muitos sites, embora eles o obtenham em lugares diferentes.  Mais adiante nesta p√°gina, voc√™ pode ver alguns dados de texto HTML, bot√µes para o usu√°rio, campos de entrada de texto e assim por diante.  Portanto, isso √© apenas HTML simples na p√°gina. <br><br>  Voc√™ pode ver o que eles chamam de c√≥digo JavaScript embutido em foo.com.  Por exemplo, temos uma tag de abertura na parte superior e o c√≥digo JavaScript √© incorporado diretamente no meio entre elas.  No nosso caso, existe o que √© chamado de JavaScript incorporado - este √© o topo da imagem. <br><br>  Abaixo na linha, desenharei o que chamamos de script JavaScript, porque o conte√∫do √© igual a algo que reside no servidor remoto.  Isso √© chamado de defini√ß√£o de conte√∫do JavaScript externo.  O script e o c√≥digo incorporado s√£o diferentes um do outro e, em nossa p√°gina, h√° JavaScript embutido no site foo.com. <br><br><img src="https://habrastorage.org/webt/si/vh/zj/sivhzj3eh3phvw4sqo4hu1bmgyo.jpeg"><br><br>  E mais uma coisa que pode estar aqui √© a moldura.  Um quadro pode ser pensado como um universo JavaScript separado.  Isso √© um pouco equivalente a um processo UNIX.  Talvez esse quadro venha de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">facebook.com/likethis.html</a> e, dentro dele, tenhamos JavaScript embutido no Facebook. <br><br>  Al√©m disso, podemos ter algumas imagens f.jpeg que tamb√©m v√™m do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">facebook.com</a> .  Portanto, tudo isso se parece com uma √∫nica guia, apesar de consistir em v√°rios conte√∫dos que podem potencialmente ser baseados em princ√≠pios completamente diferentes.  Portanto, voc√™ pode fazer v√°rias perguntas interessantes sobre um aplicativo parecido com este. <br><br><img src="https://habrastorage.org/webt/5p/qu/dv/5pqudvbhiasjfvf9rco1jew6r28.jpeg"><br><br>  Por exemplo, este c√≥digo anal√≠tico do google.com pode ter acesso ao conte√∫do JavaScript que est√° no c√≥digo jQuery.  Para uma primeira aproxima√ß√£o, talvez isso pare√ßa uma m√° ideia, porque as duas partes do c√≥digo vieram de lugares diferentes.  Mas, novamente, pode ser que isso seja realmente bom, porque aparentemente o foo.com colocou as duas bibliotecas aqui para que elas possam trabalhar umas com as outras.  Ent√£o quem sabe? <br><br>  Outra pergunta que voc√™ pode ter √© se o c√≥digo de an√°lise pode realmente interagir com o texto colocado no bloco inferior do HTML.  Por exemplo, o c√≥digo de an√°lise pode afetar os manipuladores de eventos? <br><br>  O JavaScript √© um modelo gerenciado de thread √∫nico, portanto, cada quadro tem um loop de eventos que est√° sendo processado constantemente - os principais processos ocorrem aqui, os temporizadores de eventos de rede funcionam e assim por diante.  E se esse c√≥digo JavaScript perceber que existem outros manipuladores que tentam gerenciar esses mesmos eventos, ele se livra deles. <br><br>  Ent√£o, quem deve ser capaz de definir manipuladores de eventos para esse HTML?  Primeiro, o google.com deve conseguir fazer isso.  Tamb√©m pode ser foo.com, ou n√£o. <br>  Outra pergunta: o que vincula esse quadro do Facebook ao quadro grande e comum do foo.com?  O quadro do Facebook √© HTTPS, ou seja, seguro, foo.com √© HTTP, ou seja, uma conex√£o insegura.  Ent√£o, como essas duas coisas podem interagir? <br><br>  Para responder a essas perguntas, os navegadores usam um modelo de seguran√ßa chamado pol√≠tica de mesma origem ou pol√≠tica da mesma origem.  Esse √© um tipo de objetivo vago, porque muitas coisas relacionadas √† seguran√ßa da Web s√£o bastante vagas, porque ningu√©m sabe exatamente o que est√° fazendo.  Mas a id√©ia b√°sica √© que dois sites n√£o devem poder interferir no trabalho um do outro, se n√£o quiserem.  Assim, era mais f√°cil determinar o que significava essa interfer√™ncia quando a pr√≥pria Internet era mais f√°cil.  Mas, √† medida que continuamos adicionando novas APIs, fica cada vez mais dif√≠cil entendermos qual √© o objetivo da pol√≠tica de n√£o interfer√™ncia.  Por exemplo, √© obviamente ruim se dois sites que n√£o confiam um no outro podem exibir seus dados em uma exibi√ß√£o comum.  Isso parece claramente uma coisa ruim, e obviamente uma coisa boa √© quando dois sites que desejam colaborar conseguem trocar dados de maneira segura. <br><br>  Voc√™ pode ter ouvido falar de sites mistos, foi exatamente o que eu disse.  Portanto, na Internet, voc√™ encontrar√° coisas semelhantes quando algu√©m pega dados de um mapa do Google e coloca a localiza√ß√£o de caminh√µes de alimentos sobre eles.  Assim, voc√™ tem essa incr√≠vel ‚Äúpur√™ de batata‚Äù que permite comer mais barato e, ao mesmo tempo, evitar salmonelas.  Mas como exatamente s√£o criadas composi√ß√µes desse tipo? <br><br>  Existem outras coisas complicadas.  Por exemplo, se o c√≥digo JavaScript vem da origem X dentro da p√°gina Y de origem, qual deve ser o conte√∫do desse c√≥digo?  Assim, a estrat√©gia usada por uma pol√≠tica da mesma origem pode ser descrita aproximadamente a seguir. <br><br>  Cada recurso recebe sua pr√≥pria fonte de origem e o c√≥digo JavaScript pode acessar apenas recursos que possuem essa fonte.  Essa √© uma estrat√©gia de alto n√≠vel usada por pol√≠ticos da mesma origem. <br><br>  Mas o diabo est√° nos detalhes, ent√£o h√° muitas exce√ß√µes que veremos em um segundo.  Mas antes de continuarmos, vamos definir o que √© a origem. <br>  Basicamente, a origem √© um diagrama de protocolo de rede mais um nome de host e uma porta.  Por exemplo, podemos ter algo como http: // foo.com/index.html. <br><br><img src="https://habrastorage.org/webt/24/cq/fu/24cqfuyhlzicewjx90pzwoexsig.jpeg"><br><br>  Portanto, o esquema do nosso protocolo de rede √© HTTP, o nome do host √© foo.com e a porta √© 80. Nesse caso, a porta est√° impl√≠cita.  Uma porta √© uma porta do lado do servidor que o usu√°rio usa para se conectar ao servidor.  Portanto, se voc√™ vir uma URL com um esquema HTTP em que n√£o h√° uma porta especificada explicitamente, a porta 80 ser√° usada aqui. <br><br>  Se voc√™ olhar algo como https: // foo.com/index.html, esses dois endere√ßos ter√£o o mesmo nome de host, mas na verdade eles t√™m esquemas diferentes - o protocolo https vs. http.  Al√©m disso, a porta 443 est√° implicitamente presente aqui, que √© a porta padr√£o para o protocolo HTTPS seguro.  Portanto, esses dois URLs s√£o de origem diferente. <br><br>  Como exemplo final, considere o site http: // bar.com:8181 / ... <br><br>  As retic√™ncias ap√≥s a barra indicam que essas coisas n√£o importam com rela√ß√£o √† pol√≠tica da mesma origem, pelo menos com rela√ß√£o a este exemplo muito simples. <br>  Vemos que temos um esquema HTTP, o nome do host √© bar.com e aqui temos uma porta especificada explicitamente.  Nesse caso, essa √© a porta 8181 n√£o padr√£o. Na verdade, essa √© a fonte de origem.  Grosso modo, pode-se pensar na origem como um UID no Unix, onde um quadro √© considerado um processo. <br><br>  Portanto, h√° quatro id√©ias principais subjacentes √† implementa√ß√£o de um navegador da mesma pol√≠tica de origem. <br><br>  Primeira ideia: cada fonte de origem tem uma parte do cliente do recurso.  Este lado do cliente √© cookies.  Os cookies podem ser vistos como uma maneira muito simples de implementar o estado em um protocolo n√£o persistente como o HTTP. <br><br>  Basicamente, um cookie √© um pequeno arquivo associado a todas as fontes originais.  Mais tarde falaremos um pouco sobre essa especificidade. <br><br>  Mas a id√©ia principal √© que, quando o navegador envia uma solicita√ß√£o para um site espec√≠fico, ele inclui todos os cookies que o cliente possui para esse site.  E esses cookies podem ser usados ‚Äã‚Äãpara lembrar uma senha. <br><br>  Por exemplo, se voc√™ estiver acessando um site de com√©rcio eletr√¥nico, esses cookies podem conter men√ß√µes de mercadorias na cesta do usu√°rio e assim por diante. <br><br>  Portanto, os cookies s√£o algo a que toda fonte de origem pode ser associada.  Al√©m disso, voc√™ percebe o reposit√≥rio de modelos de objeto de documento DOM como outra fonte desses recursos.  Essa √© uma interface relativamente nova, mas j√° √© essencial como interface para estruturar documentos HTML e XML. <br><br>  Assim, o reposit√≥rio DOM permite que voc√™ informe √† fonte: ‚Äúpermita-me associar uma determinada chave, que √© uma string, a esse valor especificado, que tamb√©m √© uma string‚Äù. <br><br>  Outra coisa relacionada √† origem √© o espa√ßo para nome JavaScript.  Este espa√ßo para nome determina quais fun√ß√µes e interfaces est√£o dispon√≠veis para a fonte de origem. <br><br>  Algumas dessas interfaces incluem, por exemplo, prot√≥tipos de cadeias e similares.  Em seguida, o aplicativo pode realmente preencher o espa√ßo para nome JavaScript com outro conte√∫do. <br>  Ainda existe uma √°rvore DOM.  Como voc√™ sabe, DOM significa "Modelo de Objeto de Documento".  E a √°rvore Dom √© essencialmente um reflexo do HTML na p√°gina usando JavaScript. <br><br><img src="https://habrastorage.org/webt/wd/uz/yg/wduzyga6x5ewxnolcbzlfynvaii.jpeg"><br><br>  Portanto, voc√™ pode imaginar que, na parte superior da √°rvore do DOM, existe um n√≥ HTML; abaixo, um n√≥ para a tag head message e um n√≥ para o body message tag body, e assim por diante. <br><br><img src="https://habrastorage.org/webt/6a/ly/yn/6alyynjjh05utxbq9lj3rxsbpyy.jpeg"><br><br>  Muitas p√°ginas din√¢micas da web mudam gra√ßas ao c√≥digo JavaScript, que pode acessar os dados dessa estrutura em JavaScript que refletem o conte√∫do HTML. <br>  Assim, voc√™ pode imaginar que a anima√ß√£o na p√°gina do navegador ocorre devido √† altera√ß√£o de alguns n√≥s da √°rvore, a fim de implementar v√°rias organiza√ß√µes de diferentes guias.  Isso √© o que a √°rvore do DOM √©.  H√° tamb√©m uma √°rea de exibi√ß√£o visual, que, como veremos mais adiante, interage de maneira muito estranha com a mesma pol√≠tica de fonte de origem, e assim por diante. <br><br>  Assim, em um n√≠vel alto, cada fonte tem acesso a um determinado conjunto de recursos do cliente dos tipos listados por n√≥s. <br><br>  A segunda ideia √© que cada quadro receba uma fonte de origem para sua URL.  Como mencionei anteriormente, o quadro √© aproximadamente o mesmo que o processo no Unix.  √â um tipo de espa√ßo para nome que re√∫ne v√°rios outros recursos diferentes. <br><br>  A terceira id√©ia √© que os scripts, ou c√≥digo JavaScript, sejam executados com permiss√µes correspondentes √†s da origem de origem do quadro. <br><br>  Isso significa que quando foo.com importa um arquivo JavaScript de bar.com, o arquivo JavaScript poder√° agir com as permiss√µes de foo.com.  Grosso modo, isso √© semelhante ao que acontece no mundo Unix quando voc√™ precisa executar um arquivo bin√°rio pertencente ao diret√≥rio pessoal de outra pessoa.  Isso √© algo que deve ser executado de acordo com seus privil√©gios. <br><br>  A quarta ideia √© conte√∫do passivo.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por conte√∫do passivo, quero dizer imagens ou arquivos CSS, ou seja, coisas que n√£o cont√™m c√≥digo execut√°vel. </font></font><br><br><img src="https://habrastorage.org/webt/f8/bl/xa/f8blxa7nt3pfwvtscxifliau4m4.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assim, o conte√∫do passivo recebe zero privil√©gios do navegador. </font><font style="vertical-align: inherit;">Em um segundo, explicarei as sutilezas da quarta id√©ia. </font><font style="vertical-align: inherit;">Voltando ao nosso exemplo, podemos ver que o script do Google Analytics e o jQuery podem acessar todos os tipos de conte√∫do em foo.com. </font><font style="vertical-align: inherit;">Por exemplo, eles podem ler e escrever cookies, podem anexar um manipulador de eventos aos bot√µes e assim por diante.</font></font><br><br>      Facebook       foo.com,   ,     ,       .        .  ,         .       ,       Post Message.            . <br><br><img src="https://habrastorage.org/webt/6p/js/2s/6pjs2s7q7hhkzigmzyabrrnlufe.jpeg"><br><br>      Post Message   ,   Facebook  ,   , ,   foo.com.  ,   foo.com     ,  Facebook     ,    ,    ,    . <br><br>  ,   JavaScript ,   Facebook,     XML HTTP  foo.com,         ,    . - ,  Facebook.com     origin,  foo.com,           HTML-. <br><br> ,     ,    ,   ads.com.  ,    ,  ,     .   ,       . <br><br>   ,     ‚Äì          ,      ! <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O fato √© que existem preocupa√ß√µes de seguran√ßa. </font><font style="vertical-align: inherit;">Essa √© a sutileza que est√° oculta na 4¬™ ideia. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28:00 min </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continua√ß√£o:</font></font><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "Seguran√ßa de sistemas de computadores".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aula 8: Modelo de Seguran√ßa de Rede, Parte 2</font></font></a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_1C62Twf0vs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A vers√£o completa do curso est√° dispon√≠vel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usu√°rios da Habr em um an√°logo exclusivo de servidores b√°sicos que inventamos para voc√™:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps de US $ 20 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10 GB DDR4 240 GB SSD de 1 Gbps at√© dezembro de gra√ßa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> quando pagar por um per√≠odo de seis meses, voc√™ pode fazer o pedido </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418229/">https://habr.com/ru/post/pt418229/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418219/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 6: Oportunidades, Parte 2</a></li>
<li><a href="../pt418221/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 6: ‚ÄúOportunidades‚Äù, parte 3</a></li>
<li><a href="../pt418223/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 7: A Sandbox do Cliente Nativo, Parte 1</a></li>
<li><a href="../pt418225/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 7: Sandbox do Cliente Nativo Parte 2</a></li>
<li><a href="../pt418227/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 7: A Sandbox do Cliente Nativo, Parte 3</a></li>
<li><a href="../pt418233/index.html">Mnem√¥nicos da BMW para encontrar valores-limite</a></li>
<li><a href="../pt418235/index.html">Saga orquestrada ou como criar transa√ß√µes comerciais em servi√ßos com o banco de dados por padr√£o de servi√ßo</a></li>
<li><a href="../pt418237/index.html">Desenvolvimento de aplicativos multilocat√°rios na plataforma em nuvem SAP na Neo, parte 2: autoriza√ß√£o e autentica√ß√£o</a></li>
<li><a href="../pt418239/index.html">48 megapixels para smartphone</a></li>
<li><a href="../pt418241/index.html">Por que Gauss? (100 maneiras de resolver o sistema de equa√ß√µes)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>