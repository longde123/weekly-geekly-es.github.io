<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍠 🧔🏽 👩🏼‍🤝‍👨🏿 Y a-t-il des nombres aléatoires dans CSS? ⛹🏾 👩🏽‍🚒 ⛹🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="CSS vous permet de créer des mises en page dynamiques et des interfaces de projet Web. Mais CSS est un langage statique. Une fois qu'une certaine vale...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Y a-t-il des nombres aléatoires dans CSS?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/474310/">  CSS vous permet de créer des mises en page dynamiques et des interfaces de projet Web.  Mais CSS est un langage statique.  Une fois qu'une certaine valeur est définie, elle ne peut pas être modifiée.  L'idée de modifier aléatoirement certaines valeurs n'est pas considérée ici. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/bx/8h/6w/bx8h6wkkobmx4xvldcp_o8oxivw.png"></a> <br><br>  La génération de nombres aléatoires est un territoire de JavaScript que CSS n'entre pas.  Mais que se passe-t-il si ce n'est pas entièrement vrai?  En fait, si vous prenez en compte les actions effectuées par l'utilisateur, cela ajoutera un peu de hasard au CSS.  L'auteur du document, dont nous publions la traduction aujourd'hui, propose d'en discuter. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Randomisation CSS externe</font> </h2><br>  Vous pouvez utiliser des variables CSS pour implémenter quelque chose comme la «randomisation dynamique» en CSS.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> quelques bonnes choses à ce sujet.  Cependant, de telles solutions au problème ne sont pas du pur CSS.  Ici, vous devez recourir aux fonctionnalités JavaScript pour écrire de nouvelles valeurs aléatoires dans les variables CSS. <br><br>  Vous pouvez utiliser des préprocesseurs comme Sass ou Less pour générer des valeurs aléatoires.  Mais après avoir compilé et exporté le code CSS, ces valeurs sont fixes et l'élément aléatoire est perdu.  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tweet</a> sur ce sujet, cette approche de la définition des valeurs CSS est comparée à un choix aléatoire du nom du héros du roman, qui, une fois écrit sur papier, ne change pas. <br><br><h2>  <font color="#3AC1EF">Pourquoi suis-je intéressé à utiliser des valeurs aléatoires en CSS?</font> </h2><br>  J'ai déjà développé des applications simples basées uniquement sur CSS.  Ceci est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">quiz</a> , un jeu de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Simon</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des tours de cartes</a> .  Mais je voulais faire quelque chose de plus compliqué.  Je n'aborde pas ici les questions de la justesse de cette approche, les questions de l'utilité ou de l'applicabilité pratique des projets basés uniquement sur CSS. <br><br>  En partant du principe que certains jeux de société peuvent être représentés comme des machines à états finis (FSM), nous pouvons conclure que ces jeux peuvent être implémentés en utilisant uniquement HTML et CSS.  Fort de cette idée, j'ai commencé à développer le jeu " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Snakes and Ladders</a> ".  Ceci est un jeu simple.  Son objectif est de lancer un dé et d'arriver du point de départ du terrain de jeu au dernier, tout en évitant les serpents et en essayant d'utiliser les escaliers. <br><br>  Il m'a semblé que ce projet pouvait se faire en HTML et CSS.  Cependant, je n'ai pas pris en compte quelque chose.  Il s'agit de dés. <br><br>  Le jet de dés (ainsi que le jet de pièce) sont universellement reconnus comme des «générateurs» de valeurs aléatoires.  Chaque fois, en jetant un os ou une pièce de monnaie, nous obtenons quelque chose qui nous était inconnu auparavant. <br><br>
<h2>  <font color="#3AC1EF">Imitation de lancer de dés</font> </h2><br>  J'allais superposer des calques avec des étiquettes et utiliser une animation CSS afin de les «faire défiler», en changeant le calque supérieur.  Il ressemblait à celui illustré ci-dessous. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/50d/3ab/41c/50d3ab41c7b4e106d9c76c774a2943f7.gif"></div><br>  <i><font color="#999999">Simuler des animations de calques dans un navigateur</font></i> <br><br>  Le code qui implémente un tel système pour obtenir des valeurs aléatoires n'est pas particulièrement compliqué.  Il comprend une description de l'animation en utilisant divers délais.  Voici le code: <br><br><pre><code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/*    z-index —     . */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">keyframes</span></span> changeOrder {   <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>; }   <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-comment"><span class="hljs-comment">/*         . */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span> {   <span class="hljs-attribute"><span class="hljs-attribute">animation</span></span>: changeOrder <span class="hljs-number"><span class="hljs-number">3s</span></span> infinite linear;   <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#ddd</span></span>;   <span class="hljs-attribute"><span class="hljs-attribute">cursor</span></span>: pointer;   <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: block;   <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">1rem</span></span>;   <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">1rem</span></span>;   <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute;   <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">1rem</span></span>;   <span class="hljs-attribute"><span class="hljs-attribute">user-select</span></span>: none; }     <span class="hljs-comment"><span class="hljs-comment">/*      ,        */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-of-type(1)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">animation-delay</span></span>: -<span class="hljs-number"><span class="hljs-number">0.0s</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-of-type(2)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">animation-delay</span></span>: -<span class="hljs-number"><span class="hljs-number">0.5s</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-of-type(3)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">animation-delay</span></span>: -<span class="hljs-number"><span class="hljs-number">1.0s</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-of-type(4)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">animation-delay</span></span>: -<span class="hljs-number"><span class="hljs-number">1.5s</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-of-type(5)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">animation-delay</span></span>: -<span class="hljs-number"><span class="hljs-number">2.0s</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-of-type(6)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">animation-delay</span></span>: -<span class="hljs-number"><span class="hljs-number">2.5s</span></span>; }</code> </pre> <br>  Veuillez noter que l'animation a été ralentie afin qu'il soit plus facile d'interagir avec les éléments correspondants (mais elle s'est avérée suffisamment rapide pour provoquer un problème, qui sera discuté ci-dessous).  Ici, la nature pseudo-aléatoire du mécanisme présenté est clairement visible. <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> projet sur CodePen qui vous permet d'explorer cette approche <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a8c/7f3/a10/a8c7f3a10f3354ab7c1d0013793ee52a.png"><br>  <i><font color="#999999">Imitation de lancer de dés</font></i> <br><br>  En fait, ici, je suis tombé sur un problème.  Mon programme a donné des valeurs aléatoires, mais parfois, même lorsque je cliquais sur un bouton simulant un lancer osseux, le système ne retournait rien du tout. <br><br>  J'ai essayé d'augmenter le temps d'animation, ce qui, il me semble, a légèrement amélioré la situation, mais le système s'est toujours mal comporté. <br><br>  C'est alors que j'ai fait ce que font tous les programmeurs, face à un problème qu'ils ne peuvent pas résoudre avec un moteur de recherche.  J'ai posé une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">question</a> sur StackOverflow. <br><br>  À mon bonheur, ils m'ont tout expliqué et ont proposé une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">solution au</a> problème. <br><br>  Une description simplifiée de mon problème peut être représentée comme suit: "Le navigateur déclenche l'événement <code>click</code> d'un élément uniquement lorsque l'élément qui est actif au moment où l'événement <code>mousedown</code> se produit reste actif lorsque l'événement <code>mouseup</code> se produit." <br><br>  Étant donné que les éléments se remplacent constamment - l'élément supérieur sur lequel l'événement <code>mousedown</code> se produit lorsque le bouton de la souris est enfoncé n'est pas toujours le même élément sur lequel, lorsque le bouton est <code>mouseup</code> événement <code>mouseup</code> se produit.  Pour que le bouton soit enfoncé et relâché au moment où le même élément est en haut de la pile, le clic doit être effectué soit assez rapidement (pour que l'élément n'ait pas le temps de quitter le haut de la pile), soit plutôt lentement (pour que l'élément il y a une chance de revenir au sommet, en faisant un cercle complet).  C'est pourquoi une augmentation du temps des animations a permis de masquer le problème. <br><br>  La solution consistait à utiliser la valeur <code>static</code> pour la propriété <code>position</code> de l'élément actif, ce qui la supprimait de la pile d'éléments.  De plus, un pseudo-élément, tel que <code>::before</code> ou <code>::after</code> , auquel une très grande valeur d' <code>z-index</code> été affectée, a pris sa place.  Avec cette approche, l'élément actif serait toujours en haut de la pile lors du relâchement du bouton de la souris. <br><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/*           */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:active</span></span> {  <span class="hljs-attribute"><span class="hljs-attribute">margin-left</span></span>: <span class="hljs-number"><span class="hljs-number">200%</span></span>;  <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: static; } <span class="hljs-comment"><span class="hljs-comment">/* -         z-index */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:active</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::before</span></span> {  <span class="hljs-attribute"><span class="hljs-attribute">content</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>;  <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute;  <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>;  <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>;  <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>;  <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>;  <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>; }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> projet qui implémente cette solution et utilise une animation plus rapide. <br><br>  Après avoir apporté cette modification au projet, je devais simplement ajouter mes réalisations au jeu.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voilà</a> ce que j'ai. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b2a/b74/ff5/b2ab74ff563e39ec4092b41fd9d2ba70.png"></div><br>  <i><font color="#999999">Jeu terminé</font></i> <br><br><h2>  <font color="#3AC1EF">Inconvénients de la méthode</font> </h2><br>  La méthode aléatoire décrite ici présente des inconvénients évidents: <br><br><ul><li>  Pour son travail nécessite la participation des utilisateurs.  La personne doit cliquer sur l'étiquette pour lancer le processus de «génération d'une valeur aléatoire». </li><li>  Il n'évolue pas bien.  Cette méthode est bien adaptée pour travailler avec de petits ensembles de valeurs, mais si vous avez besoin d'obtenir une valeur aléatoire à partir d'une large plage, il est très gênant de l'utiliser. </li><li>  Son application permet d'obtenir des valeurs non aléatoires, mais pseudo-aléatoires.  Le fait est que l'ordinateur peut facilement savoir quelle valeur "aléatoire" sera émise à un moment donné. </li></ul><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>  La méthode présentée ici, malgré les limitations décrites ci-dessus, est basée sur du CSS pur.  Pour l'utiliser, aucun préprocesseur ou certains mécanismes auxiliaires externes ne sont nécessaires.  Et pour l'utilisateur, son utilisation donne l'impression que le programme produit des nombres complètement aléatoires. <br><br>  Et en passant, cette méthode ne convient pas seulement pour générer des nombres aléatoires.  Il vous permet de randomiser n'importe quoi.  Par exemple - dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> projet, il est basé sur le choix «aléatoire» que l'ordinateur fait dans le jeu «Stone, Scissors, Paper». <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3b1/2bc/160/3b12bc160144c35253ae96bd75c704e7.png"><br>  <i><font color="#999999">Le jeu "Stone, ciseaux, papier" en CSS pur</font></i> <br><br>  <b>Chers lecteurs!</b>  Envisagez-vous d'utiliser les idées mises en évidence dans ce document dans vos projets? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/-o/2e/tu/-o2etuqogwhmdnmysb9_vivc9v4.png"></a> </div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr474310/">https://habr.com/ru/post/fr474310/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr474298/index.html">Mise en œuvre d'une opération de transfert de carte à carte de passerelle P2P</a></li>
<li><a href="../fr474300/index.html">Sauvegarde fiable, sécurisée et polyvalente pour U2F</a></li>
<li><a href="../fr474302/index.html">Comment écrire un script de test d'utilisabilité d'application efficace</a></li>
<li><a href="../fr474306/index.html">Rendre les styles de pointage, de mise au point et d'état actif différents</a></li>
<li><a href="../fr474308/index.html">Types pour les API HTTP écrites en Python: expérience Instagram</a></li>
<li><a href="../fr474312/index.html">Installation de l'interface graphique sur Windows Server Core</a></li>
<li><a href="../fr474316/index.html">Voiture électrique faite maison - partie 1. Comment tout a commencé et comment j'ai marqué 1000000 vues sur youtube</a></li>
<li><a href="../fr474318/index.html">Qu'est-ce qu'une table de table virtuelle?</a></li>
<li><a href="../fr474320/index.html">DDD Community Crisis</a></li>
<li><a href="../fr474322/index.html">ScalaConf 2019 - John Preacher, Holy Graal et Professor Haskell</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>