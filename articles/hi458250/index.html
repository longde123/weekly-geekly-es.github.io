<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСиЁЯП╝тАНтЪХя╕П ЁЯМбя╕П ЁЯХЙя╕П рд╕рдмрд╕реЗ рдЫреЛрдЯреЗ рдХреЗ рд▓рд┐рдП BTRFS ЁЯСйтАНЁЯСйтАНЁЯСжтАНЁЯСж ЁЯРм ЁЯОй</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╢реБрдн рджрд┐рди, рдЦрд╛рдмрд░рд╡рдЪреЗрдВред рдореИрдВ рд╡реАрдо рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВ рдФрд░ рд╣рдорд╛рд░реЗ рд▓рд┐рдирдХреНрд╕ рдмреИрдХрдЕрдк рд╕рдорд╛рдзрд╛рди рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реВрдВред рдХрдмреНрдЬреЗ рд╕реЗ, рдореИрдВ рдмреАрдЯреАрдЖрд░рдПрдлрдПрд╕ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдиреЗ рдХреЗ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╕рдмрд╕реЗ рдЫреЛрдЯреЗ рдХреЗ рд▓рд┐рдП BTRFS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/458250/"> рд╢реБрдн рджрд┐рди, рдЦрд╛рдмрд░рд╡рдЪреЗрдВред  рдореИрдВ рд╡реАрдо рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВ рдФрд░ рд╣рдорд╛рд░реЗ рд▓рд┐рдирдХреНрд╕ рдмреИрдХрдЕрдк рд╕рдорд╛рдзрд╛рди рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реВрдВред  рдХрдмреНрдЬреЗ рд╕реЗ, рдореИрдВ рдмреАрдЯреАрдЖрд░рдПрдлрдПрд╕ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реБрдЖред  рд╣рд╛рд▓ рд╣реА рдореЗрдВ, рдпрд╣ "рд╕реНрдерд┐рд░ рдирд╣реАрдВ" рдХреА рд╕реНрдерд┐рддрд┐ рд╕реЗ "рд╕реНрдерд┐рд░" рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЪрд▓рд╛ рдЧрдпрд╛ рд╣реИред  рдФрд░ рдЬрдм рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдЗрд╕рдХреЗ рдкрд╣рд▓реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдорд╕реНрдпрд╛ рдХреНрд╖реЗрддреНрд░реЛрдВ рдФрд░ рд╕реНрдерд┐рд░рддрд╛ рдХреЗ рдореБрджреНрджреЛрдВ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░ рд░рд╣реЗ рдереЗ, рддреЛ рд╣рдо рд╡реАрдо рдиреЗ рдЗрд╕реЗ рдПрдХ рдЫрдбрд╝реА рдХреЗ рд╕рд╛рде рдкреЗрдХ рдХрд┐рдпрд╛ рдФрд░ рдЗрд╕рдХрд╛ рдмреИрдХрдЕрдк рд▓реЗрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреАред  рдпрд╣ рдирд┐рдХрд▓рд╛, рдЗрд╕реЗ рд╣рд▓реНрдХреЗ рдврдВрдЧ рд╕реЗ рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╣реБрдд рдЬреНрдпрд╛рджрд╛ рдирд╣реАрдВ - рдпрд╣ рдмрд╣реБрдд рдЕрд▓рдЧ рд╣реИ, рдкрд╛рд░рдВрдкрд░рд┐рдХ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рддрд░рд╣ рдирд╣реАрдВред  рдореБрдЭреЗ рдХрдИ рдкрд╣рд▓реБрдУрдВ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдирд╛ рдерд╛ рдФрд░ рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рд╣рдо рд╕реАрдЦреЗрдВ рдХрд┐ рдЗрд╕рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рдирд╛ рд╣реИред  рд╕реАрдЦрдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, BTRFS рдореБрдЭреЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣рд╛, рджреЛрдиреЛрдВ рдПрдХ рдЕрдЪреНрдЫреЗ рддрд░реАрдХреЗ рд╕реЗ рдФрд░ рдЗрддрдиреЗ рдкрд░ рдирд╣реАрдВред  рдореБрдЭреЗ рдпрдХреАрди рд╣реИ рдХрд┐ рд╡рд╣ рд▓рд┐рдирдХреНрд╕ рджреБрдирд┐рдпрд╛ рд╕реЗ рдХрд┐рд╕реА рднреА рдЖрдИрдЯреА рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдХреЛ рдЙрджрд╛рд╕реАрди рдирд╣реАрдВ рдЫреЛрдбрд╝реЗрдЧреА: рдХреБрдЫ рдереВрдХреЗрдВрдЧреЗ, рджреВрд╕рд░реЛрдВ рдХреА рдкреНрд░рд╢рдВрд╕рд╛ рдХрд░реЗрдВрдЧреЗред <br><br>  рдпрджрд┐ рдЖрдкрдиреЗ рдЗрд╕ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реБрдирд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рдХрд┐ рдпрд╣ рдХреНрдпреЛрдВ рд╣реИ, рд╡рд┐рд╡рд░рдг рдореЗрдВ рджрд┐рд▓рдЪрд╕реНрдкреА рд╣реИ, рдпрд╛ рдЗрд╕реЗ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛рдВ рд╕реЗ рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реИ, рддреЛ рдореИрдВ рдЖрдкрдХреЛ рдмрд┐рд▓реНрд▓реА рдХреЗ рд▓рд┐рдП рдЖрдордВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реВрдВред <br><a name="habracut"></a><br><h1>  рдкрд░рд┐рдЪрдп </h1><br>  BTRFS (B-Tree Filesystem) - рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдореЗрдВ рдЖрд╕рд╛рдиреА, рдбреЗрдЯрд╛ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрд╛ рдЙрдЪреНрдЪ рд╕реНрддрд░, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд▓рдЪреАрд▓рд╛рдкрди рдФрд░ рдкреНрд░рд╢рд╛рд╕рди рдореЗрдВ рдЖрд╕рд╛рдиреА рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реБрдП, Unix-like рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд▓рд┐рдП рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо, рдХреЙрдкреА рдкрд░ рд░рд╛рдЗрдЯ (CoW) рддрдХрдиреАрдХ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред рдЙрд╕реА рд╕рдордп рдЙрдЪреНрдЪ рдЧрддрд┐ред  рдХрдо рд╕реЗ рдХрдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореБрдЦреНрдп рд╡рд┐рдХреА рдкреГрд╖реНрда рддреЛ рдпрд╣реА</a> рдХрд╣рддрд╛ рд╣реИред <br><br>  рдФрдкрдЪрд╛рд░рд┐рдХрддрд╛рдУрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо btrfs рдХреА рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рддреЗ рд╣реИрдВ: <br><br><ul><li>  рдЕрдзрд┐рдХрддрдо рдлрд╝рд╛рдЗрд▓ рдЖрдХрд╛рд░ 2 ^ 64 рдмрд╛рдЗрдЯреНрд╕ <br></li><li>  рдЧрддрд┐рд╢реАрд▓ рдЗрдирдХреЛрдб рддрд╛рд▓рд┐рдХрд╛ <br></li><li>  рдбреЗрдЯрд╛ рдбрд┐рдбреБрдкреНрд▓реАрдХреЗрд╢рди <br></li><li>  рдмрд╣реБрдд рдЫреЛрдЯреЗ рдФрд░ рдмрд╣реБрдд рдмрдбрд╝реЗ рдЖрдХрд╛рд░ рджреЛрдиреЛрдВ рдХреА рдкреНрд░рднрд╛рд╡реА рдлрд╝рд╛рдЗрд▓ рднрдВрдбрд╛рд░рдг <br></li><li>  рд╕рдмрд╡реЛрд▓рдо рдФрд░ рд╕реНрдиреИрдкрд╢реЙрдЯ рдмрдирд╛рдирд╛ <br></li><li>  рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЛрдЯрд╛ <br></li><li>  рдбреЗрдЯрд╛ рдФрд░ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдЪреЗрдХрд╕рдо <br></li><li>  рдПрдХ рд╣реА рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдХрдИ рдбреНрд░рд╛рдЗрд╡ рдХреЛ рдорд┐рд▓рд╛рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ <br></li><li>  рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╕реНрддрд░ рдкрд░ рдПрдХ RAID рд╡рд┐рдиреНрдпрд╛рд╕ рдмрдирд╛рдирд╛ <br></li><li>  рдбреЗрдЯрд╛ рд╕рдВрдкреАрдбрд╝рди <br></li><li>  рдордХреНрдЦреА рдкрд░ рдбреАрдлрд╝реНрд░реИрдЧреНрдореЗрдиреНрдЯ рдбреЗрдЯрд╛ <br></li></ul><br>  рдореИрдВ рдЖрдкрдХреЛ рддреБрд░рдВрдд рдЪреЗрддрд╛рд╡рдиреА рджреЗрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ BTRFS рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛ рд░рд╣рд╛ рд╣реИ, рдФрд░ рдХреБрдЫ рдмрд┐рдВрджреБ рд╕рдВрд╕реНрдХрд░рдг рд╕реЗ рджреВрд╕рд░реЗ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рднрд┐рдиреНрди рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рд▓рд┐рдВрдХ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://btrfs.wiki.kernel.org/index.php/Changelog,</a> рдЖрдк рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХрдм рдХреМрди рд╕реА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдЬреЛрдбрд╝реА рдЧрдИ, рдмрджрд▓реА рдЧрдИ рдпрд╛ рддрдп рдХреА рдЧрдИред <br><br>  рд╣рд╛рдВ, BTRFS рдПрдХ рдпреБрд╡рд╛ рдФрд░ рдЖрдзреБрдирд┐рдХ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╣реИ рдЬреЛ рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╣рд▓ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреА рдХрдорд┐рдпреЛрдВ рдХреЗ рдмрд┐рдирд╛ рдирд╣реАрдВ: <br><br><ul><li>  рдЗрд╕рдХреЗ рд╕рдХреНрд░рд┐рдп рд╡рд┐рдХрд╛рд╕ рд╕реЗ рдХрд┐рд╕реА рднреА рдкреНрд░рдореБрдЦ рдмрд┐рдВрджреБ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рддреГрддреАрдп-рдкрдХреНрд╖ рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрдм рдЗрд╕рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред <br></li><li>  рдмреАрдЯреАрдЖрд░рдПрдлрдПрд╕ рдХреА рд╕реНрдерд┐рд░рддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рдЖрд╢реНрд╡рд╛рд╕рди рдХреЗ рдмрд╛рд╡рдЬреВрдж, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдЙрди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рд╣рд╛рдирд┐ рдХрд╛ рдХрд╛рд░рдг рдмрдирддреЗ рд╣реИрдВред  рдПрдХ рдирд┐рдпрдо рдХреЗ рд░реВрдк рдореЗрдВ, рд╡реЗ рдкреНрд░рдХреГрддрд┐ рдореЗрдВ "рдЕрд╕реНрдерд╛рдпреА" рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдЙрдиреНрд╣реЗрдВ рдЕрднреА рддрдХ рдЕрдзреНрдпрдпрди рдФрд░ рд╕реБрдзрд╛рд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br></li><li>  рд╡рд┐рдЦрдВрдбрди рдХреЗ рд▓рд┐рдП рдЙрдЪреНрдЪ рд╕рдВрд╡реЗрджрдирд╢реАрд▓рддрд╛ред <br></li><li>  рд╕реНрдХреИрдВрдЯреА рдФрд░ рдХрднреА-рдХрднреА рдкреБрд░рд╛рдиреЗ рджрд╕реНрддрд╛рд╡реЗрдЬред <br></li></ul><br>  рдПрдХ рдкреВрд░рд╛ рдкреГрд╖реНрда рдХрд░реНрдиреЗрд▓ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдкрд░ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд рд╣реИ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://btrfs.wiki.kernel.org/index.php/Gotchas</a> ред  рдореИрдВ рджреГрдврд╝рддрд╛ рд╕реЗ рдЖрдкрдХреЛ рд╡рд╣рд╛рдВ рджреЗрдЦрдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ - рдпрд╣ рдмрд╣реБрдд рд╕рд╛рд░реЗ рджрд┐рд▓рдЪрд╕реНрдк рдФрд░ рдЧреИрд░-рд╕реНрдкрд╖реНрдЯ рд╣реИред <br><br><h1>  BTRFS рд╕рдВрд░рдЪрдирд╛ </h1><br>  рд╕рд░рд▓реАрдХреГрдд BTRFS рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдирд┐рдореНрди рд╕реНрддрд░реЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/zz/n8/zj/zzn8zjyt0dai6ge9rifhgcdwg0q.png"><br><br>  рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рд╕рдмрд╕реЗ рдирд┐рдЪрд▓реЗ рд╕реНрддрд░ рдкрд░ рд╕реНрдерд┐рдд рд╣реИрдВ, рдПрдХ рдпрд╛ рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рднреМрддрд┐рдХ рдкрддрд╛ рд░рд┐рдХреНрдд рд╕реНрдерд╛рди рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреЗ рд╣реИрдВ (рдПрдХ рд╣реА "рднреМрддрд┐рдХ" рд╕реНрд╡рдпрдВ рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд░реВрдк рдореЗрдВ, рд▓реЗрдХрд┐рди рдпреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╡рд┐рд╡рд░рдг рд╣реИрдВ)ред  рд╡рд┐рд╢реЗрд╖ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рдХреЗ рдЖрд╡рдВрдЯрд┐рдд рдмреНрд▓реЙрдХ рдХреЛ рдПрдХ рдПрдХрд▓ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдбреНрд░реЗрд╕ рд╕реНрдкреЗрд╕ рдореЗрдВ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдореЗрдЯрд╛рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ (рдмреНрд▓реЙрдХ) рдХреЗ рд╕рд╛рде рдмреНрд▓реЙрдХ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рддрд╛рд░реНрдХрд┐рдХ рд╕реНрддрд░ рдкрд░ рд╕рдВрдмреЛрдзрд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рддрд╛рд░реНрдХрд┐рдХ рд╕реНрддрд░ рдкрд░ рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рд╕реНрдерд┐рдд рдбреЗрдЯрд╛ рд╡рд┐рднрд┐рдиреНрди рдмреНрд▓реЙрдХ рдЙрдкрдХрд░рдгреЛрдВ рдкрд░ рднреМрддрд┐рдХ рд░реВрдк рд╕реЗ рдирд┐рд╡рд╛рд╕ рдХрд░ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдореЗрдЯрд╛рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рд╕реНрддрд░реЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдмреЗрд╢рдХ, рдореИрдВ рдЙрдиреНрд╣реЗрдВ рд╡рд░реНрдЧреАрдХреГрдд рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛ - рдЙрдирдореЗрдВ рд╕реЗ рдХрдИ рд╣реИрдВ, рдФрд░ рдЗрд╕ рддрд░рд╣ рдХреЗ рдирд┐рдореНрди-рд╕реНрддрд░реАрдп рд╡рд┐рд╡рд░рдг рдПрдХ рдЕрд▓рдЧ рд▓реЗрдЦ рдХрд╛ рд╡рд┐рд╖рдп рд╣реИрдВред  рдпрд╣рд╛рдВ рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдкрджрд╛рдиреБрдХреНрд░рдо рдореЗрдВ рдХреБрдЫ рд╕рдВрд░рдЪрдирд╛рдПрдВ рджреВрд╕рд░реЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЙрдЪреНрдЪ-рд╕реНрддрд░реАрдп рд╣реЛ рдЬрд╛рдПрдВрдЧреА, рдФрд░ рдмрд╣реБрдд рдКрдкрд░ рдПрдХ рдРрд╕реА рд╕рдВрд░рдЪрдирд╛ рд╣реЛрдЧреА рдЬреЛ рдПрдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рд╣реИред <br><br>  рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдПрдХ рддрд░рд╣ рдХрд╛ рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рд╣реИ, рдпрд╛ рдпреЛрдВ рдХрд╣реЗрдВ рдХрд┐ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдореВрд▓ рддрддреНрд╡ рд╣реИрдВред  рд╡реЗ рдбреЗрдЯрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХреА рдПрдХ рдЕрд▓рдЧ рдкрд░рдд рдмрдирд╛рддреЗ рд╣реИрдВ, рдЬреЛ рдирд┐рдЪрд▓реА рдкрд░рддреЛрдВ рдХреЗ рдХрд╛рдо рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рддрд╛ рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рдХреЛ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдХрд░рддрд╛ рд╣реИ: рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдФрд░ рдлрд╛рдЗрд▓реЗрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рдмрд╡реЗ BTRFS рдкрд░ CoW рддрдВрддреНрд░ рдХреЗ рдПрдХ рдкреНрд░рдореБрдЦ рддрддреНрд╡ рд╣реИрдВред  рджреЛ рдЙрдкрд╡рд┐рд╖рдп рдореЗрдВ рдПрдХ рд╣реА рдлрд╛рдЗрд▓реЗрдВ рдирд┐рдЪрд▓реЗ рд╕реНрддрд░ рдкрд░ рд╕рдорд╛рди рдбреЗрдЯрд╛ рд╕реЗрдЯ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред <br><br>  рдЕрдВрддрд┐рдо рдкрд░рдд рдбреЗрдЯрд╛ рдкрд░рдд рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЙрдиреНрд╣реЗрдВ рджреЗрдЦрддрд╛ рд╣реИред  рдпреЗ рдлрд╛рдЗрд▓реЗрдВ рдФрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдПрдВ рд╣реИрдВ рдЬреЛ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИрдВред <br><br>  рд▓реЗрдХрд┐рди рдкрд░реНрдпрд╛рдкреНрдд рд╕рд┐рджреНрдзрд╛рдВрддред  рдпрд╣ рдЕрднреНрдпрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдХрд╛ рд╕рдордп рд╣реИ! <br><br><h1>  Btrfs-progs </h1><br>  рдпрд╣ BTRFS рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдХрд╛ рдПрдХ рдорд╛рдирдХ рд╕реЗрдЯ рд╣реИред  рд╡рд┐рддрд░рдг рдкреИрдХреЗрдЬ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдЗрди рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рд╡рд╛рд▓реЗ рдкреИрдХреЗрдЬ рдХреЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдирд╛рдо рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ: <b>btrfsprogs</b> , <b>btrfs-progs</b> , <b>btrfs-tools</b> , рдЖрджрд┐ред  рдпрджрд┐ рдЖрдкрдХреА рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдХреБрдЫ рднреА рд╕рдорд╛рди рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдк рд╣рдореЗрд╢рд╛ рдЗрд╕реЗ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕рдВрдХрд▓рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕реНрд░реЛрдд рджреВрд░ рдирд╣реАрдВ рд╣реИрдВ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/kdave/btrfs-progs</a> ред <br>  рдЗрд╕ рдкреИрдХреЗрдЬ рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ <b>btrfs</b> рдФрд░ <b>mkfs.btrfs рд╣реИрдВ</b> ред  рджреВрд╕рд░реЗ рд╕реЗ, рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ, рд╕рдм рдХреБрдЫ рдмрд╣реБрдд рд╕реНрдкрд╖реНрдЯ рд╣реИ - рдПрдХ рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ BTRFS рдмрдирд╛рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, <b>btrfs</b> рдореБрдЦреНрдп рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдмрд╛рдХреА рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред  рдПрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ "рд╕реНрд╡рд┐рд╕ рдЪрд╛рдХреВред" <br><br>  рдЗрд╕ рдЖрд▓реЗрдЦ рдореЗрдВ, рдореИрдВрдиреЗ рд╕рдВрд╕реНрдХрд░рдг v4.15.1 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рд╣реИред  рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдмрд╣реБрдд рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛ рд░рд╣реА рд╣реИ, рдФрд░ рд╕рдВрд╕реНрдХрд░рдг рд╕реЗ рд╕рдВрд╕реНрдХрд░рдг рддрдХ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рдЕрдВрддрд░ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЖрд╡рд╢реНрдпрдХ рдХрдорд╛рдВрдб рдирд╣реАрдВ рд╣реИ, рддреЛ <b>btrfs</b> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ, рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреБрд░рд╛рдирд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ, рдкреИрдХреЗрдЬ рдореЗрдВ <b>btrfsck</b> рдФрд░ <b>btrfstune</b> рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдкрд╛рдП рдЬрд╛рддреЗ рд╣реИрдВред <br><br><ul><li>  рдЙрдирдореЗрдВ рд╕реЗ рдкрд╣рд▓реЗ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдФрд░ рдмрд╛рдж рдореЗрдВ рд╕реБрдзрд╛рд░ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдореИрдВ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрд╢рдВрд╕рд╛ рдирд╣реАрдВ рдХрд░рддрд╛ - рдпрд╣ <i>рдкрджрд╛рд╡рдирдд</i> рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реИ, рдЗрд╕рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ <b>btrfs рдЪреЗрдХ</b> рдХрдорд╛рдВрдб рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </li><li>  рджреВрд╕рд░рд╛ рдЖрдкрдХреЛ btrfs рдкрд░ рдХреБрдЫ рдЙрдкрдпреЛрдЧреА рд╕рдВрдЪрд╛рд▓рди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо (FS UUID) рдХреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЛ рдмрджрд▓реЗрдВ, рдпрд╛ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рдирд┐рд╢реНрдЪрд┐рдд рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░реЗрдВред </li></ul><br>  рдКрдкрд░ рд╕реВрдЪреАрдмрджреНрдз рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдкреИрдХреЗрдЬ рдореЗрдВ рдХрдИ рдФрд░ рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ btrfs рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдФрд░ рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рдирд╣реАрдВ рд╣реЛрдЧрд╛ред <br><br><h1>  BTRFS рдореЗрдВ рдПрдХ рдбрд┐рд╕реНрдХ рд╕реНрд╡рд░реВрдкрдг </h1><br>  рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ, рд╕рдм рдХреБрдЫ рд╕рд░рд▓ рд╣реИред  рдПрдХ рдбреНрд░рд╛рдЗрд╡ рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br>  рд╕рд╛рдорд╛рдиреНрдп рдбрд┐рд╕реНрдХ рдХреЗ рд╕рд╛рде btrfs рдореЗрдВ рдПрдХрд▓ рдбрд┐рд╕реНрдХ рд╕реНрд╡рд░реВрдкрд┐рдд рдХрд░рдирд╛ рд╣реЛрддрд╛ рд╣реИ: <br><br><pre><code class="bash hljs">mkfs.btrfs /dev/sdc -L single_drive</code> </pre> <br>  рдЬрд╡рд╛рдм рдореЗрдВ, рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдирд┐рд░реНрдорд┐рдд рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдЖрдЙрдЯрдкреБрдЯ рдХрд░реЗрдЧреА: <br><br><pre> <code class="bash hljs">btrfs-progs v4.15.1 See http://btrfs.wiki.kernel.org <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> more information. Label:       single_drive UUID:        59307d69-6d2f-4d2e-aae2-a5189ad3c256 Node size:     16384 Sector size:    4096 Filesystem size:  1.00GiB Block group profiles: Data:       single 8.00MiB Metadata:     DUP 51.19MiB System:      DUP 8.00MiB SSD detected:    no Incompat features: extref, skinny-metadata Number of devices: 1 Devices:  ID    SIZE PATH   1   1.00GiB /dev/sdc</code> </pre><br>  рдкреНрд░рд╕реНрддреБрдд рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЪрд▓рддреЗ рд╣реИрдВред <br><br><ul><li>  <b>рд▓реЗрдмрд▓</b> - рдПрдХ рд▓реЗрдмрд▓ рдпрд╛ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдирд╛рдоред  рдпрд╣ <code>-L</code> рд╕реНрд╡рд┐рдЪ рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИред </li><li>  <b>UUID</b> рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╣реИ рдЬреЛ btrfs рдХрд░реНрдиреЗрд▓ рдХреЛ рдПрдХ рджреВрд╕рд░реЗ рд╕реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рддрд╛ рд╣реИред </li><li>  <b>рдиреЛрдб рдЖрдХрд╛рд░</b> - рдмреА-рдЯреНрд░реА рддрддреНрд╡реЛрдВ рдХрд╛ рдЖрдХрд╛рд░ рдЬрд┐рд╕рдореЗрдВ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕реЗ <code>-n | --nodesize</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ  <code>-n | --nodesize</code> , рдФрд░ рдпрд╣ <b>рд╕реЗрдХреНрдЯрд░ рдЖрдХрд╛рд░ рдХреЗ</b> рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдиреЛрдб рдХрд╛ рдЫреЛрдЯрд╛ рдЖрдХрд╛рд░ рдмреА-рдЯреНрд░реА (рдиреЛрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡реГрджреНрдзрд┐) рдХреА рдКрдВрдЪрд╛рдИ рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИ рдФрд░, рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдПрдХ рдиреЛрдб рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзрд╛ рдореЗрдВ рдХрдореА рдЖрддреА рд╣реИред  рджреВрд╕рд░реА рдУрд░, рдиреЛрдб рдХрд╛ рдЫреЛрдЯрд╛ рдЖрдХрд╛рд░ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдЖрд╡реГрддреНрддрд┐ рдХреЛ рд╡рд┐рдЦрдВрдбрди рд╕реЗ рдЕрдзрд┐рдХ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред  рджреВрд╕рд░реА рдУрд░, рдмрдбрд╝реЗ рдиреЛрдбреНрд╕, рдбрд┐рд╕реНрдХ рдкрд░ рдмреЗрд╣рддрд░ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдкреИрдХреЗрдЬрд┐рдВрдЧ рдореЗрдВ рдпреЛрдЧрджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рд╡рд┐рдЦрдВрдбрди рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред <br>  рдПрдХ рд╣реА рдиреЛрдб рдХреЛ рдХрдИ рдереНрд░реЗрдбреНрд╕ рджреНрд╡рд╛рд░рд╛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд╛рдЙрдирд╕рд╛рдЗрдб рдХреЛ рдбреЗрдЯрд╛ рдПрдХреНрд╕реЗрд╕ рдЯрд╛рдЗрдо рдмрдврд╝рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  3.11 рд╕реЗ рдЕрдзрд┐рдХ рдкреБрд░рд╛рдиреЗ рдХрд░реНрдиреЗрд▓ рдкрд░, рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдиреЛрдб рдХрд╛ рдЖрдХрд╛рд░ 16384 рдмрд╛рдЗрдЯреНрд╕ рдпрд╛ рдУрдПрд╕ рдореЗрдореЛрд░реА рдкреЗрдЬ рдХрд╛ рдЖрдХрд╛рд░ (рдЗрди рджреЛ рдореВрд▓реНрдпреЛрдВ рдХрд╛ рдмрдбрд╝рд╛) рд╣реИред </li><li>  <b>рд╕реЗрдХреНрдЯрд░ рдХрд╛ рдЖрдХрд╛рд░</b> - рдЕрдВрддрд░рд┐рдХреНрд╖ рдХреА рдорд╛рддреНрд░рд╛ рдЬреЛ рдХрд┐ рдЕрдВрддрд░рд┐рдХреНрд╖ рдХреЗ рдЧреБрдгрдХреЛрдВ рдХреЛ рдЖрд╡рдВрдЯрд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ рдФрд░ рднреМрддрд┐рдХ рд╕реНрддрд░ рдкрд░ рдореБрдХреНрдд рд╣реЛрддреА рд╣реИред  рдпрд╣ рдУрдПрд╕ рдХреЗ рдЖрднрд╛рд╕реА рдореЗрдореЛрд░реА рдХреЗ рдкреГрд╖реНрда рдЖрдХрд╛рд░ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИ, рдЬрдм рддрдХ рдХрд┐ рдЕрдиреНрдпрдерд╛ рдПрд╕ <code>-s</code> рд╕рд╛рде рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  <b>рдлрд╛рдЗрд▓рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдЖрдХрд╛рд░</b> - рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рдХреБрд▓ рдХреНрд╖рдорддрд╛ (рдбреЗрдЯрд╛ рдкреНрд▓рд╕ рдореЗрдЯрд╛рдбреЗрдЯрд╛)ред  рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ <code>-b</code> рд╕реНрд╡рд┐рдЪ рдХреЗ рд╕рд╛рде рд╕реЗрдЯ рдХрд░реЗрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреА рдкреВрд░реА рдорд╛рддреНрд░рд╛ рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  <b>Incompat рд╕реБрд╡рд┐рдзрд╛рдПрдБ</b> - рдирд┐рд░реНрдорд┐рдд btrfs рдкрд░ рд╢рд╛рдорд┐рд▓ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдЬреЛ рдкреБрд░рд╛рдиреЗ рдХрд░реНрдиреЗрд▓ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рдкрд┐рдЫрдбрд╝реЗ рд╕рдВрдЧрддрддрд╛ рдХреЛ рддреЛрдбрд╝рддреА рд╣реИред  рдпрджрд┐ рдкрд╢реНрдЪрдЧрд╛рдореА рд╕рдВрдЧрддрддрд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рддреЛ рдЖрдк рдЕрдХреНрд╖рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">--features ^extref,^skinny-metadata.</code> </pre> <br>  рд╡реИрд╕реЗ, рдЖрдк рдЬрд╛рдБрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╡рд░реНрддрдорд╛рди рдХрд░реНрдиреЗрд▓ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЙрд▓ рджреНрд╡рд╛рд░рд╛ рдХрд┐рди рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">mkfs.btrfs --features list-all</code> </pre> </li><li>  <b>рдЙрдкрдХрд░рдгреЛрдВ рдФрд░ рдЙрдкрдХрд░рдгреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛</b> - рдирд┐рд░реНрдорд┐рдд btrfs рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдХрд┐рддрдиреЗ рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдФрд░ рдХреНрд░рдорд╢рдГ рд╕рднреА рдЙрдкрдХрд░рдгреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреАред </li><li>  рд╣рдореЗрдВ <b>рдмреНрд▓реЙрдХ рдЧреНрд░реБрдк рдкреНрд░реЛрдлрд╛рдЗрд▓</b> рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреА рдмрд╛рдд рдХрд░рдиреА рдЪрд╛рд╣рд┐рдПред  рдпрд╣ рддреАрди рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░реЛрдВ: рдбреЗрдЯрд╛, рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП рд▓рд╛рдЧреВ рд░рд┐рдХреЙрд░реНрдб рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред  Btrfs рдХреА рд╕рд╛рдорд╛рдиреНрдпреАрдХреГрдд рд╕рдВрд░рдЪрдирд╛ рдкрд░ рд▓реМрдЯрдирд╛, рд╣рдо рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐: <br><br><ul><li>  рдбреЗрдЯрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рд╣реИ; </li><li>  рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдПрдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдкрд░рдд рдФрд░ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдФрд░ рдкрд░рддреЛрдВ рдХреА рдПрдХ рдкрд░рдд рдХрд╛ рдПрдХ рд╕рдВрдпреЛрдЬрди рд╣реИ; </li><li>  рд╕рд┐рд╕реНрдЯрдо рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рдХреЗ рдПрдбреНрд░реЗрд╕ рд╕реНрдкреЗрд╕ рдХреЛ рддрд╛рд░реНрдХрд┐рдХ рдкрддреЛрдВ рдХреА рдирд┐рд░рдВрддрд░ рдЬрдЧрд╣ рдореЗрдВ рдореИрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрд░рдЪрдирд╛рдПрдВ рд╣реИрдВред </li></ul><br>  рдПрдХ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рднреМрддрд┐рдХ рд╕реНрддрд░ рдкрд░ рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рд╣реИ: <br><br><ul><li>  рдПрдХрд▓ - рдПрдХрд▓ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдореЗрдВ рдбреЗрдЯрд╛ рднрдВрдбрд╛рд░рдг; </li><li>  рдбреАрдпреВрдкреА - рдПрдХ рдорд╛рдзреНрдпрдо рдкрд░ рдбреЗрдЯрд╛ рдХрд╛ рджреЛрд╣рд░рд╛рд╡; </li><li>  RAIDX, RAID0, RAID1, RAID10, RAID5 рдФрд░ RAID6 рдХреЗ рд╡рд┐рдиреНрдпрд╛рд╕ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред </li></ul><br></li></ul><br>  рдЬрдм рдПрдХ рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ btrfs рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдбреЗрдЯрд╛ рдкрд░ рджреЛрд╣рд░рд╛рд╡ рд▓рд╛рдЧреВ рдХрд░реЗрдЧрд╛, рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рдПрдХ рд╣реА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдореЗрдВ рдореАрдбрд┐рдпрд╛ рдкрд░ рд░рд╣реЗрдЧрд╛ред  рдПрдХ рд╕рд╛рде рдХрдИ рдбрд┐рд╕реНрдХ рдкрд░ btrfs рдмрдирд╛рдирд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП "RAID0" рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдФрд░ "RAID1" рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрдЧрд╛ред <br>  рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рдпрд╣ рд╕рдореВрд╣ рджреЛ рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <code>-d</code> рд▓рд┐рдП <code>-d</code> рдФрд░ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдПред <br><br>  рд▓реЗрдХрд┐рди рдПрдХ рдЕрддрд┐ рд╕реВрдХреНрд╖реНрдо рдЕрдВрддрд░ рд╣реИ ... рдПрд╕рдПрд╕рдбреА рдХреЗ рд╕рд╛рде рдЪреАрдЬреЗрдВ рдЕрд▓рдЧ рд╣реИрдВред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдЕрдЧрд░ рд╣рдо рдПрдХ рдПрд╕рдПрд╕рдбреА рдбреНрд░рд╛рдЗрд╡ (рдпрд╛ рдлреНрд▓реИрд╢ рдбреНрд░рд╛рдЗрд╡) рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░ рд░рд╣реЗ рдереЗ, рддреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреА рдирдХрд▓ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  SSDs рд╕реНрдореГрддрд┐ рддрддреНрд╡реЛрдВ рдХреЗ рдЬреАрд╡рдирдХрд╛рд▓ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рдбрд┐рдбреБрдкреНрд▓реАрдХреЗрд╢рди рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╛рдиреА  рдбреЗрдЯрд╛ рдХреА рджреЛ рддрд╛рд░реНрдХрд┐рдХ рдкреНрд░рддрд┐рдпрд╛рдВ рд╣реЛрдиреЗ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рдорд╛рдзреНрдпрдо рдкрд░ рджрд░реНрдЬ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдирддреАрдЬрддрди, рдЬрдм рдПрдХ рдореЗрдореЛрд░реА рд╕реЗрдЧрдореЗрдВрдЯ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдбреЗрдЯрд╛ рдХреА "рджреЛрдиреЛрдВ рдкреНрд░рддрд┐рдпрд╛рдВ" рдХреНрд╖рддрд┐рдЧреНрд░рд╕реНрдд рд╣реЛ рдЬрд╛рдПрдВрдЧреАред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдбреЗрдЯрд╛ рдХреЛ рджреЛ рдмрд╛рд░ рд▓рд┐рдЦрдиреЗ рд╕реЗ, SSD рд╕рдВрд╕рд╛рдзрди рдХрд╛ рддреЗрдЬреА рд╕реЗ рдЙрдкрднреЛрдЧ рд╣реЛрддрд╛ рд╣реИред <br><br>  рдореАрдбрд┐рдпрд╛ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, btrfs рдлрд╝рд╛рдЗрд▓ <i>/ sys / block / DEV / рдХрддрд╛рд░ / рдШреВрд░реНрдгреА</i> рдХреА рд╕рд╛рдордЧреНрд░реА рдХреА рдЬрд╛рдБрдЪ рдХрд░рддрд╛ рд╣реИ, рдЬрд╣рд╛рдБ "DEV" рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдирд╛рдо рдЬрд╛рдБрдЪ рд░рд╣рд╛ рд╣реИред <br>  рдмреЗрд╢рдХ, рдПрдХ рдПрд╕рдПрд╕рдбреА рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рднреА, рд╕реНрдЯреЛрд░реЗрдЬ рдкреНрд░реЛрдлрд╛рдЗрд▓ рдХреЛ рдордЬрдмреВрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдХрдИ рдЙрдкрдХрд░рдгреЛрдВ рдкрд░ рдПрдХ btrfs рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрдиреНрд╣реЗрдВ рдПрдХ рд╕реНрдерд╛рди рдХреЗ рд╕рд╛рде рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">sudo mkfs.btrfs /dev/sdc /dev/sdd -L double_drive</code> </pre> <br>  рдпрд╛ рдкреНрд░реЛрдлрд╛рдЗрд▓ рдХреЗ рд╕рд╛рде: <br><br><pre> <code class="bash hljs">sudo mkfs.btrfs /dev/sdc /dev/sdd -d raid1 -m raid1 -L raid1_drive</code> </pre> <br>  рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдореАрдбрд┐рдпрд╛ рдХрд╛ рдЖрдХрд╛рд░ рд╕рдорд╛рди рдирд╣реАрдВ рд╣реИ, рднрд▓реЗ рд╣реА рдкреВрд░реНрдг рдорд┐рд░рд░рд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЬреИрд╕реЗ рд╣реА рдореЗрдореЛрд░реА рдХреЛ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЫреЛрдЯреА рдбрд┐рд╕реНрдХ рдкрд░ рдкрд░реНрдпрд╛рдкреНрдд рдЬрдЧрд╣ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдПрдХ рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдЧрд╛ рдЬреЛ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреЛрдИ рдЦрд╛рд▓реА рдЬрдЧрд╣ рдирд╣реАрдВ рд╣реИ, рд╣рд╛рд▓рд╛рдБрдХрд┐ рд╢рд╛рд░реАрд░рд┐рдХ рд░реВрдк рд╕реЗ рдЕрдиреНрдп рдореАрдбрд┐рдпрд╛ рдкрд░ рдЕрднреА рднреА рдХреБрдЫ рдЦрд╛рд▓реА рдЬрдЧрд╣ рд╣реЛ рд╕рдХрддреА рд╣реИред <br><br><h1>  рдмрдврд╝рддреЗ </h1><br>  рд╣реМрд╕рд▓реЗ рд╕реЗ рдирд┐рд░реНрдорд┐рдд btrfs рдХрд╛ рдкрд╣рд▓рд╛ рдорд╛рдЙрдВрдЯ рдЕрдиреНрдп рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╕реЗ рдЕрд▓рдЧ рдирд╣реАрдВ рд╣реИ: <br><br><pre> <code class="bash hljs">mount /dev/sdc /mnt</code> </pre> <br>  рдпрджрд┐ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХрдИ рдбрд┐рд╕реНрдХ рдкрд░ рд╕реНрдерд┐рдд рд╣реИ, рддреЛ рдмрдврд╝рддреЗ рдХреЗ рд▓рд┐рдП рдЙрдирдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред <br><br>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдмрдврд╝рддреЗ рд╣реБрдП рдЯреНрд░рд╛рдЙрдЯ рдореЗрдВ рд╣рдореЗрд╢рд╛ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдмрдврд╝рддреЗ рд╣реИрдВред  рдпрджрд┐ рдорд╛рдЙрдВрдЯ рдХрдорд╛рдВрдб рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рддреЛ рдХреМрди рд╕рд╛ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рддреЛ btrfs рд╡рд┐рд╢реЗрд╖ рд░рд┐рдХреЙрд░реНрдб рд╕реЗ рдкрдврд╝реЗрдВрдЧреЗ, рдЬреЛ рдХрд┐ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреА рдЖрдИрдбреА рд╣реИ, рдЬрд┐рд╕реЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЗрд╕ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреЛ рдмрд╛рдж рдореЗрдВ <code>btrfs set-default</code> рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЬрдм рдЖрдк рдЗрд╕реЗ рдкрд╣рд▓реА рдмрд╛рд░ btrfs рдкрд░ рдорд╛рдЙрдВрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдХреЗрд╡рд▓ рдПрдХ рд╕рдмрд╡реВрд▓реЗрдо рд╣реЛрддрд╛ рд╣реИ - рд░реВрдЯ рд╡рдиред  рдпрд╣ рдмрдврд╝рддреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╣реИред <br><br>  Btrfs рдкрд░ рд░реВрдЯ рд╕рдмрд╡рд░реНрд▓реНрдб рд╣рдореЗрд╢рд╛ рдореМрдЬреВрдж рд╣реЛрддрд╛ рд╣реИред  рдпрд╣ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ рдФрд░ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдХрд┐рд╕реА рднреА рдмрджрд▓рд╛рд╡ рдХреЗ рдЕрдзреАрди рдирд╣реАрдВ рд╣реИред <br><br>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдХрд┐рд╕реА рднреА рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдХреЗ рджреЛ рддрд░реАрдХреЗ рд╣реИрдВ: <br>  рд░реВрдЯ рд╕рдмрд╡реЛрд▓реНрдпреВрдо btrfs рд╕реЗ рдкрде рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">mount -o subvol=/path/to/subvol /dev/sdc /mnt</code> </pre> <br>  рдпрд╛ рддреЛ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдЖрдИрдбреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">mount -o subvolid=257 /dev/sdc /mnt</code> </pre> <br>  рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рд╣реА рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдмреАрдЯреНрд░реЙрдлрд╝ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдкрддрд╛ рдХрд░реЗрдВ рдХрд┐ рдХреМрди рд╕рд╛ рдХрд╛рд░реНрдп рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ: <br><br><pre> <code class="bash hljs">btrfs subvolume get-default /path/to/any/subvolume</code> </pre> <br>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕рдмрдорд╛рдЙрдВрдЯ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">btrfs subvolume <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>-default 258 /path/to/any/subvolume</code> </pre> <br>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рд╕рдмрд╡реЙрд▓реНрдо рдХреЗ рд▓рд┐рдП рдкрде рдХреЛ рдХреЗрд╡рд▓ рд╡рд┐рд╢рд┐рд╖реНрдЯ btrfs рдЙрджрд╛рд╣рд░рдг рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬрд┐рд╕ рдкрд░ рдХрдорд╛рдВрдб рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред  рд╡реИрд╕реЗ, рдЗрд╕ рд╕рдм-рдЕрдВрдбрд░рд╡рд░реНрд▓реНрдб рдХрд╛ рд╣реЛрдирд╛ рдЬрд░реВрд░реА рдирд╣реАрдВ рд╣реИ; рдХрд┐рд╕реА рднреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рд░рд╛рд╕реНрддрд╛ рднреА рдЙрдкрдпреБрдХреНрдд рд╣реИред <br><br>  <code>mount</code> рдХрдорд╛рдВрдб btrfs рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ: рдбреАрдлрд╝реНрд░реИрдЧреНрдореЗрдиреНрдЯреЗрд╢рди, рдХреИрд╢ рдлреНрд▓рд╢рд┐рдВрдЧ, рдХрдореНрдкреНрд░реЗрд╢рди, рдЧрд╛рдп, рд▓реЙрдЧрд┐рдВрдЧ, рдмреИрд▓реЗрдВрд╕, ssd рд╕рдкреЛрд░реНрдЯ, рдФрд░ рдХрдИ рдЕрдиреНрдп рдЪреАрдЬреЗрдВ рдЬреЛ btrfs рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реИрдВред  рдореИрдВ рдЙрдиреНрд╣реЗрдВ рдЗрд╕ рд▓реЗрдЦ рдХреЗ рдврд╛рдВрдЪреЗ рдореЗрдВ рдирд╣реАрдВ рдорд╛рдиреВрдВрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐  рд╡реЗ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИрдВ, рдФрд░ рдЕрдзрд┐рдХрд╛рдВрд╢ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдЖрдк рдЙрдирдХреЗ рдмрд┐рдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h1>  рдЙрдкрд╡рд╕реНрддреНрд░ рд╣реИ </h1><br>  рдПрдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо btrfs рдХрд╛ рдПрдХ рдкреНрд░рдореБрдЦ рддрддреНрд╡ рд╣реИ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ: <br><br><ul><li>  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рдФрд░ рдЕрдиреНрдп рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХрд╛ рднрдВрдбрд╛рд░рдг, <br></li><li>  рдбреЗрдЯрд╛ (рдмрдврд╝рддреЗ) рддрдХ рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рдирд╛, <br></li><li>  рд╕реАрдУрдбрдмреНрд▓реНрдпреВ рддрдВрддреНрд░ <br></li><li>  рд╕реНрдиреИрдкрд╢реЙрдЯ рдмрдирд╛рдирд╛ред <br></li></ul><br>  рдкрд╣рд▓реЗ рд╕рдиреНрдирд┐рдХрдЯрди рдореЗрдВ, рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╣реИред  рдЖрдк рдЙрдирдХрд╛ рдирд╛рдо рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ / рд▓реЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдирдХреА рд╕рд╛рдордЧреНрд░реА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдирдХреЗ рдЕрдВрджрд░ рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред <br><br>  рд╡рд┐рд╢реЗрд╖ рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдорд╛рдЙрдВрдЯ рдХрд┐рдП рдЧрдП btrfs рдкрд░ рдПрдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдмрдирд╛рдирд╛ рдФрд░ рд╣рдЯрд╛рдирд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">btrfs subvolume create /mnt/subvolume_name btrfs subvolume delete /mnt/subvolume_name</code> </pre> <br>  рдореИрдВ рдзреНрдпрд╛рди рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдпрджрд┐ рдЖрдк рдлрд╝рд╛рдЗрд▓ рдкреНрд░рдмрдВрдзрдХ рдпрд╛ <b>рдЖрд░рдПрдо</b> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдСрдкрд░реЗрд╢рди рдПрдХ <i>рдСрдкрд░реЗрд╢рди рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЧрдИ</i> рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛ <i>рдЬрд╛рдПрдЧреА</i> (рдСрдкрд░реЗрд╢рди рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИ)ред <br><br>  <b>UPD:</b> рдХрд░реНрдиреЗрд▓ рд╕рдВрд╕реНрдХрд░рдг 4.18.0 рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рдХреЗ, рдЙрдк-рд╡рд╛рд▓рд┐рдпреЛрдВ рдХреЛ <b>rm</b> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдпрд╛ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рдмрдВрдзрдХ рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рдЯрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдпрд╣ рдПрдХ рдмрдЧ рдерд╛, рдПрдХ рд╕реБрд╡рд┐рдзрд╛ рдирд╣реАрдВред  рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрдЯреЛрдЯрд┐рдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рд╣рдмреНрд░рд╛рд╡рдЪрд╛рдирд┐рди рдХрд╛</a> рдзрдиреНрдпрд╡рд╛рджред <br><br>  рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдЗрд╕рдХреЗ рдЧреБрдг рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">btrfs subvolume show /mnt/subvolume_name Name:          subx UUID:          09af45e8-d2b2-b342-8a92-fa270ac82d0a Parent UUID:      - Received UUID:     - Creation time:     2019-03-23 17:59:28 +0100 Subvolume ID:      268 Generation:       39 Gen at creation:    35 Parent ID:       260 Top level ID:      260 Flags:         - Snapshot(s):</code> </pre> <br>  рдЖрдЗрдП рдЙрдкрд╡рд╕реНрддреНрд░реЛрдВ рдХреЗ рдореБрдЦреНрдп рдЧреБрдгреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдиреЗрдВ: <br><br><ul><li>  <b>рдирд╛рдо</b> - рдЙрдкрд╡рд╕реНрддреНрд░ рдХрд╛ рдирд╛рдо <br></li><li>  <b>UUID</b> рдПрдХ рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╣реИ рдЬреЛ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рд╕рдмрд╡реВрдлрд░-рд╕реНрдиреИрдкрд╢реЙрдЯ рд╕рдВрдмрдВрдзреЛрдВ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ, <br></li><li>  <b>рдореВрд▓ UUID</b> - рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдкреВрд░реНрд╡рдЬ рдХреА рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рд╡рд░реНрддрдорд╛рди рд╡реНрдпреБрддреНрдкрдиреНрди рд╣реИ, <br></li><li>  <b>рдкреНрд░рд╛рдкреНрдд UUID</b> - рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдкреВрд░реНрд╡рдЬ рдХреЗ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЛ <i>btrfs рднреЗрдЬрдиреЗ рдХреЗ</i> рдорд╛рдзреНрдпрдо рд╕реЗ рднреЗрдЬрд╛ рдЧрдпрд╛, <br></li><li>  <b>рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдЖрдИрдбреА</b> - рдмреА-рдЯреНрд░реА рдореЗрдВ рдкреНрд▓реЗрд╕рдореЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛, <br></li><li>  <b>рдЬреЗрдирд░реЗрд╢рди</b> - рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЗ рдЕрдВрддрд┐рдо рдЕрдкрдбреЗрдЯ рдореЗрдВ рд▓реЗрдирджреЗрди рдирдВрдмрд░, <br></li><li>  <b>рдирд┐рд░реНрдорд╛рдг</b> рдХреЗ рд╕рдордп <b>рдЬрдирд░рд▓</b> - рд▓реЗрди-рджреЗрди рд╕рдВрдЦреНрдпрд╛, рдЬрдм рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛, <br></li><li>  <b>рдкреЗрд░реЗрдВрдЯ рдЖрдИрдбреА</b> - рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреА рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдЬрд┐рд╕рдореЗрдВ рд╡рд░реНрддрдорд╛рди рдПрдХ рдПрдореНрдмреЗрдбреЗрдб рд╣реИ, <br></li><li>  <b>рд╢реАрд░реНрд╖ рд╕реНрддрд░ рдХреА рдЖрдИрдбреА</b> рдмрд┐рд▓реНрдХреБрд▓ рдореВрд▓ рдЖрдИрдбреА рдХреЗ рд╕рдорд╛рди рд╣реИ, <br></li><li>  <b>рдЭрдВрдбреЗ</b> - рдЭрдВрдбреЗ (рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреЗрд╡рд▓ 1 рдзреНрд╡рдЬ рдЖрд╕рд╛рдиреА рд╕реЗ рд╣реИ), <br></li><li>  <b>рд╕реНрдиреИрдкрд╢реЙрдЯреНрд╕</b> - рдЗрд╕ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рд╕реЗ рд▓реА рдЧрдИ рд╕реНрдиреИрдкрд╢реЙрдЯреНрд╕ рдХреА рдПрдХ рд╕реВрдЪреАред <br></li></ul><br>  рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореЗрдВ рдПрдХ рдФрд░ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реЛрддрд╛ рд╣реИ - рдпрд╣ рд░реВрдЯ рдПрд▓рд┐рдореЗрдВрдЯ btrfs рд╕реЗ рдЗрд╕рдХрд╛ рд░рд╛рд╕реНрддрд╛ рд╣реИред  рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рддреЗ рд╕рдордп рдкрде рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">btrfs subvolume list /path/to/any/btrfs/mountpoint</code> </pre> <br>  рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рд╕рдм рдХреБрдЫ рд╕рд░рд▓ рдФрд░ рд╕реНрдкрд╖реНрдЯ рд╣реИ - рдпрд╣ рдХрдорд╛рдВрдб рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХрд╛ рд╣рд╡рд╛рд▓рд╛ рджреЗрдиреЗ рдХрд╛ рднреА рдорддрд▓рдм рдирд╣реАрдВ рд╣реИред <br>  рдЬреИрд╕рд╛ рдХрд┐ <code>get-default</code> рдФрд░ <code>set-default</code> рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рд╣реЛрддрд╛ рд╣реИ, рдпрд╣рд╛рдВ рдЖрдк рдХрд┐рд╕реА рднреА рд╕рдмрд╡реЙрд▓реНрдо рдХреЛ рдкрде рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдирд╣реАрдВ рдмрджрд▓реЗрдЧрд╛ред  рд░реВрдЯ рд╕рдмрдмреЛрд▓рдо btrfs рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рдкрде рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдкреВрд░реЗ рд╕реВрдмреЗрджрд╛рд░ рд╡реГрдХреНрд╖ рдХреЛ рдкрдврд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдпрджрд┐ рдЖрдк рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЛ рдХреЙрдкреА рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <b>рд╕реАрдкреА</b> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рд╕рд╛рде, рддреЛ рдХреЙрдкреА рдСрдкрд░реЗрд╢рди рд╕рдлрд▓ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдирд╣реАрдВ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рд╕рд╛рдорд╛рдиреНрдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдРрд╕реА рдкреНрд░рддрд┐рдпрд╛рдВ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП btrfs рдмрд╣реБрдд рдЕрдзрд┐рдХ рд▓рдЪреАрд▓рд╛ рдЙрдкрдХрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ - рд╕реНрдиреИрдкрд╢реЙрдЯред <br><br><h1>  рд╕реНрдиреИрдкрд╢реЙрдЯ рд╣реИ </h1><br>  рд╕реНрдиреИрдкрд╢реЙрдЯ рднреА рдПрдХ рд╕рдмрд╡рд░реНрд▓реНрдб рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдХреЗрд╡рд▓ рдЙрдиреНрдирдд рдЧреБрдг рд╣реИрдВред <br><br>  рдЙрдирдХрд╛ рдореБрдЦреНрдп рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рд╕реНрдиреИрдкрд╢реЙрдЯ рдореЗрдВ рд░рд┐рдХреЙрд░реНрдб рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдХрд┐рд╕ рд╕рдмрд╡реЛрд▓рдо рд╕реЗ рдЗрд╕рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдпреЗ <b>рдкреЗрд░реЗрдВрдЯ UUID</b> рдФрд░ <b>рдкреНрд░рд╛рдкреНрдд UUID</b> рдлрд╝реАрд▓реНрдб рд╣реИрдВред  рд╕рдмрд╡реВрдлрд╝рд░ рдореЗрдВ, рдпреЗ рдХреНрд╖реЗрддреНрд░ рднреА рдореМрдЬреВрдж рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╡реЗ рд╣рдореЗрд╢рд╛ рдЦрд╛рд▓реА рд╣реИрдВред  рддреЛ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдПрдХ рд╕реНрдиреИрдкрд╢реЙрдЯ рдФрд░ рдПрдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдПрдХ рдФрд░ рдПрдХ рд╣реА рд╣реИрдВред <br>  рдмрдирд╛рддреЗ рд╕рдордп, рдЖрдк <code>-r</code> рд╕реНрд╡рд┐рдЪ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><pre> <code class="plaintext hljs">btrfs subvolume snapshot -r /path/to/subvol /path/to/snapshot</code> </pre> <br>  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЙрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд░рд╣рдиреЗ рдХреА рдЧрд╛рд░рдВрдЯреА рджреА рдЬрд╛рддреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╡реЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рдмрдирд╛рдП рдЬрд╛рдиреЗ рдХреЗ рд╕рдордп рдереЗред <br><br>  рд░реАрдб-рдУрдирд▓реА рдлреНрд▓реИрдЧ рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣ рдХрд┐рд╕реА рднреА рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">btrfs property get /path/to/subvol ro btrfs property set /path/to/subvol ro true</code> </pre> <br>  рдпрджрд┐ рд╣рдо рдЕрдм рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЗ рдЧреБрдгреЛрдВ рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рднрд░реЗ рд╣реБрдП <b>рдкреЗрд░реЗрдВрдЯ UUID</b> рдлрд╝реАрд▓реНрдб рджреЗрдЦреЗрдВрдЧреЗ: <br><br><pre> <code class="plaintext hljs">btrfs subvolume show /path/to/snapshot Name:          subx UUID:          d08612d8-596a-11e9-8647-d663bd873d93 Parent UUID:      09af45e8-d2b2-b342-8a92-fa270ac82d0a Received UUID:     - Creation time:     2019-03-23 17:59:28 +0100 Subvolume ID:      269 Generation:       39 Gen at creation:    35 Parent ID:       260 Top level ID:      260 Flags:         - Snapshot(s):</code> </pre> <br>  рд╕реНрдиреИрдкрд╢реЙрдЯ рдСрдкрд░реЗрд╢рди рдХреА рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╢реЗрд╖рддрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ рдЧреИрд░-рдкреБрдирд░рд╛рд╡рд░реНрддреА рд╣реИред  рдиреЗрд╕реНрдЯреЗрдб рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЗ рдмрдЬрд╛рдп, рд╕реНрдиреИрдкрд╢реЙрдЯ рдореЗрдВ рдЦрд╛рд▓реА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдмрдирд╛рдИ рдЬрд╛рдПрдЧреАред <br><br>  рдЖрдЗрдП рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЙрджрд╛рд╣рд░рдг рдХреА рдУрд░ рдореБрдбрд╝реЗрдВред <br><br>  рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдПрдХ рд╕рдмрд╡реВрдлрд╝рд░ "рд╕рдм .0" рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдЕрдВрджрд░ рдПрдХ рд╕рдмрд╡реВрдлрд╝рд░ <i>рд╕рдмрд╛</i> рдФрд░ рдПрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ <i>рдбреАрдЖрдИрдЖрд░рдмреА рд╣реЛрддрд╛ рд╣реИ</i> ред  рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреНрд░рдорд╢рдГ <i>fileA</i> рдФрд░ <i>fileB</i> рд╣реИрдВред <br><br>  рд╕реНрдиреИрдкрд╢реЙрдЯ рдирд┐рдХрд╛рд▓реЗрдВ: <br><br><pre> <code class="plaintext hljs">btrfs subvolume snapshot sub0 snap0</code> </pre> <br><img src="https://habrastorage.org/webt/cf/or/w-/cforw-vhzoma9iub2hcyejkbh84.png"><br><br>  <i>рдмрдирд╛рдпрд╛ рдЧрдпрд╛ Snap0</i> рд╕реНрдиреИрдкрд╢реЙрдЯ рдЕрдкрдиреЗ рдорд╛рддрд╛-рдкрд┐рддрд╛ рдХреА рд╕рднреА рдлрд╝рд╛рдЗрд▓реЛрдВ рдФрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЛ рдЗрдирд╣реЗрд░рд┐рдЯ рдХрд░реЗрдЧрд╛, рд╣рд╛рд▓рд╛рдБрдХрд┐, рд╕рдм- <i>рд╕рдмрд╡реВрдлрд░</i> рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЗ рдЕрдВрджрд░ рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджреЗрдЧрд╛ред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдХреЗрд╡рд▓ рдПрдХ рдЦрд╛рд▓реА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реНрдиреИрдкрд╢реЙрдЯ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдЧреА, рдЕрд░реНрдерд╛рддред  рд╕рдмрд╛ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреА рд╕рд╛рдордЧреНрд░реА рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдирд╣реАрдВ рдорд┐рд▓реЗрдЧреАред <br><br>  рдПрдХ рддрд░рдл, рдпрд╣ рдЕрдЪреНрдЫрд╛ рд╣реИ - рд╣рдо рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рд╕реЗ рдирд┐рдХрд╛рд▓рддреЗ рд╣реИрдВ, рдФрд░ рд╕рднреА рдиреЗрд╕реНрдЯреЗрдб рд╣рдорд╛рд░реЗ рд▓рд┐рдП рд░реБрдЪрд┐ рдирд╣реАрдВ рд╣реИрдВред  рджреВрд╕рд░реА рдУрд░, рдпрджрд┐ рдкреБрдирд░рд╛рд╡рд░реНрддреА рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ btrfs рдХреЗ рдкрд╛рд╕ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рдорд╛рдзрд╛рди рдирд╣реАрдВ рд╣реИред  рд╣рдореЗрдВ рдХрд╛рдо рдХреЗ рдЪрдХреНрдХрд░ рд▓рдЧрд╛рдиреЗ рдкрдбрд╝реЗрдВрдЧреЗред <br><br>  рдкрд╣рд▓рд╛ рд╡рд░реНрдХрдЕрд░рд╛рдЙрдВрдб рдЗрд╕ рддрдереНрдп рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ рдХрд┐ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЛ рдХреЗрд╡рд▓-рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдзреНрд╡рдЬ рдХреЗ рдмрд┐рдирд╛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЬреЛ рдЖрдкрдХреЛ рд╕реНрдерд┐рддрд┐ рдХреЛ рдХрд╛рдлреА рд╣рдж рддрдХ рдареАрдХ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ: <br><br><ul><li>  рд╕реНрдиреИрдкрд╢реЙрдЯ рд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдирд┐рдХрд╛рд▓реЗрдВ <br><br><pre> <code class="plaintext hljs">rmdir snap0/subA</code> </pre> <br></li><li>  рдиреЗрд╕реНрдЯреЗрдб рд╕рдмрд╡реЛрд▓реНрдпреВрдо рд╕реЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рдирд┐рдХрд╛рд▓реЗрдВ <br><br><pre> <code class="plaintext hljs">btrfs subvolume snapshot sub0/subA snap0/subA</code> </pre> <br></li></ul><br><img src="https://habrastorage.org/webt/ja/u3/fy/jau3fyzmzjxzxweajh-tmjld-iw.png"><br><br>  рдпрджрд┐ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЗрд╡рд▓-рдкрдврд╝рдиреЗ рд╡рд╛рд▓реЗ рдзреНрд╡рдЬ рдХреЗ рд╕рд╛рде рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рдЙрдкрд░реЛрдХреНрдд рд╡рд┐рдХрд▓реНрдк рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐  <i>Snap0 рдореЗрдВ</i> рдЖрдк рди рддреЛ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреЛ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рди рд╣реА рд╕реНрдиреИрдкрд╢реЙрдЯ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдХреЗрд╡рд▓ рдПрдХ рд╣реА рд╡рд┐рдХрд▓реНрдк рд╣реИ - рд╕реНрдиреИрдкрд╢реЙрдЯ <i>рд╕рдмрд╡реВрдлрд░ рдХреЗ</i> рдкрд╛рд╕ рдХрд╣реАрдВ рд╕реНрдиреИрдкрд╢реЙрдЯ рд░рдЦреЗрдВ: <br><br><pre> <code class="plaintext hljs">btrfs subvolume snapshot sub0/subA snapA</code> </pre> <br>  рдФрд░ рдлрд┐рд░ <i>SnapA</i> рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЗ рдЕрдВрджрд░ <i>рд╕реНрдиреИрдк рдХреЛ</i> рдорд╛рдЙрдВрдЯ рдХрд░реЗрдВ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╣реИ: <br><br><pre> <code class="plaintext hljs">mount -o subvol=snapA snap0/subA</code> </pre> <br><img src="https://habrastorage.org/webt/mu/-w/nn/mu-wnnj0jiyyinnxokz08nuipag.png"><br><br>  рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рд╕рдордЭрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдкреБрдирд░рд╛рд╡рд░реНрддреА рд╕реНрдиреИрдкрд╢реЙрдЯ рд╕рднреА рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рдордп рдореЗрдВ, рдЕрд▓рдЧ-рдЕрд▓рдЧ рдСрдкрд░реЗрд╢рди рдореЗрдВ рд╢реВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдХрдИ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рд╕реЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЗ рдХрд┐рд╕реА рднреА рдкрд░рдорд╛рдгреБ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреА рдХреЛрдИ рдмрд╛рдд рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИред <br><br><h1>  рд▓рд┐рдЦрдиреЗ рдкрд░ рдХреЙрдкреА рдХрд░реЗрдВ </h1><br>  рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдФрд░ рд╕реАрдУрдбрдмреНрд▓реНрдпреВ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ред  рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдПрдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореМрдЬреВрдж рд╣реИ рдФрд░ рдПрдХ рдлрд╛рдЗрд▓ рдЗрд╕рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИ (рдЖрджрд░реНрд╢ рд╕реНрдерд┐рддрд┐ рд▓реЗрдВ - рдлрд╛рдЗрд▓ рдЦрдВрдбрд┐рдд рдирд╣реАрдВ рд╣реИ)ред  рдЕрдЧрд▓рд╛, рдПрдХ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЛ рд╕рдмрд╡реЙрд▓реА рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/hg/yo/sl/hgyoslduv5eeenpopaqu3dk7qyw.png"><br><br>  рдПрдХ рдирдпрд╛ рд╕рдмрд╡реЛрд▓реНрдпреВрдо (рд╕реНрдиреИрдкрд╢реЙрдЯ) рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдореВрд▓ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЗ рд╕рдорд╛рди рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ред  рд╕реНрдиреИрдкрд╢реЙрдЯ рдмрдирд╛рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд▓рдЧрднрдЧ рддрд╛рддреНрдХрд╛рд▓рд┐рдХ рд╣реИ - рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдбреЗрдЯрд╛ рд╕реНрд╡рдпрдВ рдХреЙрдкреА рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдЕрддрд┐рд░рд┐рдХреНрдд рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдореВрд▓ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЗ рд╕рд╛рде рдПрдХ рд╕реНрдиреИрдкрд╢реЙрдЯ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдорд╛рд▓рд┐рдХ рдмрди рдЬрд╛рддрд╛ рд╣реИред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдбрд┐рд╕реНрдХ рдкрд░ рдХреЗрд╡рд▓ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдереА, рд▓реЗрдХрд┐рди рдЕрдм рдпрд╣ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдФрд░ рд╕реНрдиреИрдкрд╢реЙрдЯ рджреЛрдиреЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИред <br>  рдпрджрд┐ рдЖрдк рдЕрдм рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореЗрдВ рдмрджрд▓рддреЗ рд╣реИрдВ, рддреЛ рдмрджрд▓рд╛рд╡ рд╕реНрдиреИрдкрд╢реЙрдЯ рдореЗрдВ рдлрд╝рд╛рдЗрд▓ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  рдпрджрд┐ рд╕реНрдиреИрдкрд╢реЙрдЯ рдмрдирд╛рддреЗ рд╕рдордп рд░реАрдб-рдУрдирд▓реА рдзреНрд╡рдЬ рд╕реЗрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рд╕реНрдиреИрдкрд╢реЙрдЯ рдореЗрдВ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рднреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/7n/1e/0t/7n1e0tkdlxsuqkpjmtinix0yiys.png"><br><br>  рддрдХрдиреАрдХреА рд░реВрдк рд╕реЗ, рдЬрдм рдХрд┐рд╕реА рдлрд╝рд╛рдЗрд▓ рдХреЛ рдмрджрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХреЗрд╡рд▓ рдпреЗ рдкрд░рд┐рд╡рд░реНрддрди рджрд░реНрдЬ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП рд╕реНрд░реЛрдд рдлрд╝рд╛рдЗрд▓ рдбрд┐рд╕реНрдХ рдкреНрд▓рд╕ рдФрд░ рдХреБрдЫ рдбреЗрд▓реНрдЯрд╛ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХреА рдЬрд╛рдПрдЧреА рдЬреЛ рдореВрд▓ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдПрдХ рд╕реЗ рдЕрд▓рдЧ рдХрд░рддреА рд╣реИред  рдпрджрд┐ рдЖрдк рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рд╣рдЯрд╛рддреЗ рд╣реИрдВ (рджреВрд╕рд░реЗ рд╕реЗ рдореЗрд░рд╛ рдорддрд▓рдм рд╕реНрдиреИрдкрд╢реЙрдЯ рд╣реИ), рддреЛ рдЕрддрд┐рд░рд┐рдХреНрдд рдбреЗрдЯрд╛ рдЬреЛ рдЕрдм рдХрд┐рд╕реА рдХреЗ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЙрд╕реЗ рдбрд┐рд╕реНрдХ рд╕реЗ рдорд┐рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдХреЗрд╡рд▓ рд╡рд░реНрддрдорд╛рди рд╕рдВрд╕реНрдХрд░рдг рдбрд┐рд╕реНрдХ рдкрд░ рд░рд╣реЗрдЧрд╛ (рд╢реЗрд╖ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ)ред <br><br>  <i>рдПрдХ рдЫреЛрдЯрд╛ рдиреЛрдЯ</i> : рд╣рдЯрд╛рдиреЗ рдкрд░, рд╕рдмрд╡реВрдлрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЖрдВрдЦреЛрдВ рд╕реЗ рддреБрд░рдВрдд рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдЯрд░реНрдорд┐рдирд▓ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рд╡рд╛рдкрд╕ рдХрд░ рджреЗрдЧреА, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдбрд┐рд╕реНрдХ рдкрд░ рдбреЗрдЯрд╛ рдХреЛ рдХреБрдЫ рд╕рдордп рдХреЗ рд▓рд┐рдП рдкреГрд╖реНрдарднреВрдорд┐ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рджреНрд╡рд╛рд░рд╛ рд╕рд╛рдл рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдпрд╣реА рд╣реИ, рдПрдХ рдирд┐рдпрдорд┐рдд рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдбрд┐рд▓реАрдЯ рдСрдкрд░реЗрд╢рди рдХреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдорд╛рдкрди рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЛ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рд╛рде рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдФрд░ рдЗрд╕реЗ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдЖрдк рдХреЙрд▓ <b>рд╣рдЯрд╛рддреЗ</b> рд╕рдордп <code>--commit-after</code> рд╕реНрд╡рд┐рдЪ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  <b>Btrfs рд╕рдмрд╡реЛрд▓реНрдпреВрдо рд╕реВрдЪреА</b> рдХрдорд╛рдВрдб, рдЬрд┐рд╕реЗ <code>-d</code> рд╕реНрд╡рд┐рдЪ рдХреЗ рд╕рд╛рде <b>рд▓рдЧрд╛рдпрд╛ рдЬрд╛рддрд╛</b> рд╣реИ, <code>-d</code> рдПрдХ рд╕реВрдЪреА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдбрд┐рд╕реНрдХ рд╕реЗ рд╣рдЯрд╛рдП рдЬрд╛рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╣реИред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, btrfs рдЖрдкрдХреЛ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХрд╛ рд╕рд╣рд╛рд░рд╛ рд▓рд┐рдП рдмрд┐рдирд╛ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдХреНрд▓реЛрди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдпрд╣ <code>--reflink</code> рд╕рд╛рде рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдХреЙрдкреА рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">cp -ax --reflink=always /original/file /copied/file</code> </pre> <br>  <code>reflink=always</code> рдХреБрдВрдЬреА рдЙрд╕ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдмрддрд╛рддреА рд╣реИ рдЬрд┐рд╕реЗ рд╣рдо рдХреЙрдкреА рдХрд░рддреЗ рд╕рдордп CoW рддрдВрддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдХреЙрдкреА рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рддрд╛рдХрд┐ рд╣рдореЗрдВ рд╕реНрдиреИрдкрд╢реЙрдЯ рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж рдЬреИрд╕рд╛ рд╡реНрдпрд╡рд╣рд╛рд░ рд╣реЛред  рддреЛ рдлрд┐рд░ рд╣рдореЗрдВ рд╕рдмрдмреЛрд▓рдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ? <br><br>  рдмреАрдЯреНрд░реЙрдлрд╝ рдкрд░ рд╕рдмрдЯреЛрд▓рдореНрд╕ рдкреВрд░реЗ рдбреЗрдЯрд╛ рд╕реЗрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрдЪреНрдЪ-рд╕реНрддрд░реАрдп рдирд┐рдпрдВрддреНрд░рдг рдЙрдкрдХрд░рдг рдХреА рднреВрдорд┐рдХрд╛ рдирд┐рднрд╛рддреЗ рд╣реИрдВ: рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдПрдХ рд╕рдмрд╡реВрдореНрдпреВрдо рдХреЗ рд╕рднреА рдбреЗрдЯрд╛ рд╕реЗ рдкрд░рдорд╛рдгреБ рд╕реНрдиреИрдкрд╢реЙрдЯ рд╣рдЯрд╛ рд░рд╣рд╛ рд╣реИ (--reflink рдкрд░рдорд╛рдгреБ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдХреЗрд╡рд▓ рдлрд╝рд╛рдЗрд▓ рд╕реНрддрд░ рдкрд░ рд╣реИ), рдФрд░ рджреВрд╕рд░реА рдмрд╛рдд рдпрд╣ рджреЗрдЦрдирд╛ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдпрд╣ рдХрд┐рд╕рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╣реИред , рдпрд╛ рдЬрд▓реНрджреА рд╕реЗ "рд╡рд╛рдкрд╕ рд░реЛрд▓" рдбреЗрдЯрд╛ рдПрдХ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рд╕реЗрдЯ, рдЖрджрд┐ред <br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, btrfs рдЗрди рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рдЙрдЪреНрдЪ-рд╕реНрддрд░реАрдп рд╕рд╛рдзрди рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд╛рдВрдЫрд┐рдд рд╕рдордп рдмрд┐рдВрджреБрдУрдВ рдкрд░ рдлрд╝рд╛рдЗрд▓ рд╕реНрдЯреЗрдЯреНрд╕ рдХреИрдкреНрдЪрд░ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред <br><br><h1>  рд╕рдмрд╡реЛрд▓реНрдпреВрдо рд░рд┐рдХрд╡рд░реА </h1><br>  рд╡рд┐рд╢рд╛рд▓ рд╡рд┐рд╕реНрддрд╛рд░ рдореЗрдВ, рдпрд╣ рд╕рд╡рд╛рд▓ рдЕрдХреНрд╕рд░ рдЙрдарддрд╛ рд╣реИ: "рдореЗрд░реЗ рдкрд╛рд╕ рдПрдХ рд╕рдмрд╡реВрдлрд╝рд░ рд╣реИ, рдореЗрд░реЗ рдкрд╛рд╕ рдПрдХ рд╕реНрдиреИрдкрд╢реЙрдЯ рд╣реИ, рд░рд┐рд╡рд░реНрд╕ рдХреИрд╕реЗ рдХрд░реЗрдВ?"  рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг btrfs рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рд╡рд╣рд╛рдБ рдХреЛрдИ рдореМрдХрд╛ рдирд╣реАрдВ рд╣реИ "рд╡рд╛рдкрд╕ рдЙрдкрдирдЧрд░ рд░реЛрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред"  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, btrfs рдЕрдкрдиреЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЗ рд╕рд╛рде рд╕рдмрд╡реЙрд▓реА рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд░рдгрдиреАрддрд┐ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдХреБрдЫ рд╡рд╛рдкрд╕ рдХреНрдпреЛрдВ рдХрд░реЗрдВ, рдпрджрд┐ рд╕реНрдиреИрдкрд╢реЙрдЯ рд╣реА рдпрд╣ рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдо рд░рд┐рд╡рд░реНрдЯ рдХреЗ рд╕рд╛рде рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред <br><br>  рдЗрд╕ рдкрд░рд┐рджреГрд╢реНрдп рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ: btrfs рдкрд░ рдПрдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рдлрд╛рдЗрд▓реЗрдВ рд╕реНрдерд┐рдд рд╣реИрдВ (рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ, рдпрд╛ рдЕрдиреНрдп рдорд╣рддреНрд╡рдкреВрд░реНрдг рдбреЗрдЯрд╛)ред  рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЛ рд╕рдордп-рд╕рдордп рдкрд░ рдЗрд╕ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдХреБрдЫ рдмрд┐рдВрджреБ рдкрд░ рдбреЗрдЯрд╛ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдмрд╕ рд╕рдмрд╡реЛрд▓реБрдо рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛ рд▓реЗрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдЗрд╕рд╕реЗ рд▓рд┐рдП рдЧрдП рд╕реНрдиреИрдкрд╢реЙрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрддреЗ рд╣реИрдВ, рдпрд╛ - рдпрджрд┐ рд╣рдо рдЗрд╕ рдбреЗрдЯрд╛ рдХреЛ рдЦрд░рд╛рдм рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ - рддреЛ рд╣рдо рд╕реНрдиреИрдкрд╢реЙрдЯ рд╕реЗ рдПрдХ рдФрд░ рд╕реНрдиреИрдкрд╢реЙрдЯ рдирд┐рдХрд╛рд▓рддреЗ рд╣реИрдВред  рдпрджрд┐ рдореВрд▓ рд╕рдмрд╡рд░реНрд▓реНрдб рдХреЛ рдорд╛рдЙрдВрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕реЗ рдпрд╛ рддреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдпрд╛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд / рдирд╛рдо рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рдЗрд╕рдХреЗ рд╕реНрдерд╛рди рдкрд░ рдПрдХ рд╕реНрдиреИрдкрд╢реЙрдЯ рдбрд╛рд▓рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br><img src="https://habrastorage.org/webt/sn/os/od/snosodoezxac3a-2s7xzmpqa-js.png"><br><br>  рдХрдВрд╕реЛрд▓ рдореЗрдВ, рдпрд╣ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ: <br><br><ul><li>  рдЙрдк рдирд╛рдо рдмрджрд▓реЗрдВ <br><br><pre> <code class="plaintext hljs">mv the_subvolume the_subvol.old</code> </pre> </li><li>  рдЙрд╕рдХреЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЛ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЗ рд╕реНрдерд╛рди рдкрд░ рд░рдЦреЗрдВ <br><br><pre> <code class="plaintext hljs">btrfs subvolume snapshot the_snapshot the_subvolume</code> </pre> </li></ul><br>  рдпрджрд┐ рдорд╛рдЙрдВрдЯ рдкреЙрдЗрдВрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдФрд░ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рдпрд╣ рд╕рдмрд╡реЛрд▓реНрдо рдХреЛ рдЕрдирдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдФрд░ рдЗрд╕рдХреЗ рд╕реНрдерд╛рди рдкрд░ рдПрдХ рд╕реНрдиреИрдкрд╢реЙрдЯ рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред <br><br><img src="https://habrastorage.org/webt/4z/mi/sw/4zmisws4w5keyk7mhsr6eaav-ri.png"><br><br><ul><li>  рд╕рдмрд╡реВрдлрд░ рдХреЛ рдЕрдирдорд╛рдЙрдВрдЯ рдХрд░реЗрдВ <br><br><pre> <code class="plaintext hljs">umount /mnt/</code> </pre> </li><li>  рдЖрдк рдПрдХ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХрд╛ рд╕реНрдиреИрдкрд╢реЙрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдЕрдВрддрд┐рдо рдмрдЪреЗ рд╣реБрдП рдбреЗрдЯрд╛ рдХреЛ рдЦрд░рд╛рдм рди рдХрд░реЗрдВ: <br><br><pre> <code class="plaintext hljs">btrfs subvolume snapshot /path/to/snapshot /path/to/snapshot_copy</code> </pre> </li><li>  рдорд╛рдЙрдВрдЯ рд╕реНрдиреИрдкрд╢реЙрдЯ: <br><br><pre> <code class="plaintext hljs">mount -o subvol=path/to/snapshot_copy /mnt</code> </pre> </li></ul><br>  рдкреВрд░реНрдгрддрд╛ рдХреЗ рд▓рд┐рдП, рдореИрдВ рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛ рдФрд░ рдереЛрдбрд╝рд╛ рдЕрд▓рдЧ рдврдВрдЧ рд╕реЗред  рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдЬрд┐рд╕рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрддреЗ рд╣реИрдВ, <i>рдореБрдЦреНрдп</i> рд╢рд╛рдЦрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/gh/pt/m7/ghptm7ykmordfcur4bdddehng6c.jpeg"><br><br>  рд╕реНрдиреИрдкрд╢реЙрдЯ рдмрдирд╛рддреЗ рд╕рдордп, рдбрд┐рд╕реНрдХ рдкрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рд╕реНрдерд┐рддрд┐ рддрдп рд╣реЛ рдЬрд╛рддреА рд╣реИред  рдЕрдм рд╕реЗ, рдПрдХ рд╕реНрдиреИрдкрд╢реЙрдЯ <i>рдореБрдЦреНрдп</i> рд╢рд╛рдЦрд╛ рдХрд╛ рдПрдХ рдмреНрд░рдВрдЪ рд╣реИред  <i>рдореБрдЦреНрдп рдХреЗ</i> рд╕рднреА рдФрд░ рдкрд░рд┐рд╡рд░реНрддрди рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред  рд╕реНрдиреИрдкрдЪреИрдЯ рдкрд░ рд░реЛрд▓рдмреИрдХ рдХрд╛ рдЕрд░реНрде рд╣реИ <i>рдореБрдЦреНрдп</i> рд╢рд╛рдЦрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рд░реЛрдХрдирд╛ рдФрд░ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдмреНрд░рдВрдЪ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдирд╛ред  <i>рдореБрдЦреНрдп</i> рд╢рд╛рдЦрд╛ рдХреЛ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдХреЗ рд░реВрдк рдореЗрдВ рд╣рдЯрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, btrfs рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ рдПрдХ рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рдгрд╛рд▓реА рд╣реИ, рд▓реЗрдХрд┐рди рд╢рд╛рдЦрд╛рдУрдВ рдХреЛ рд╡рд╛рдкрд╕ рдорд░реНрдЬ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреЗ рдмрд┐рдирд╛ред <br><br><h1>  рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдЯреНрд░реА </h1><br>  Btrfs рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдЬреБрдбрд╝реЗ рдПрдХ рд╕реНрдкрд╖реНрдЯ рдмрд┐рдВрджреБ рдпрд╣ рд╣реИ рдХрд┐ рд╕рд┐рд╕реНрдЯрдо рдбреЗрдЯрд╛ рдХреЛ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореЗрдВ рдХреИрд╕реЗ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПред  рдмреЗрд╢рдХ, рдЗрд╕ рдореБрджреНрджреЗ рдкрд░ рдХреЛрдИ "рдЕрдзрд┐рдХрд╛рд░" рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреЗ 3 рддрд░реАрдХреЗ рд╣реИрдВ: рдПрдХ рд╕рдкрд╛рдЯ рд╕рдВрд░рдЪрдирд╛, рдиреЗрд╕реНрдЯреЗрдб рдФрд░ рдорд┐рд╢реНрд░рд┐рддред <br><br>  рдПрдХ рдлреНрд▓реИрдЯ рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЛ рд░реВрдЯ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореЗрдВ рдПрдХ рдлреНрд▓реИрдЯ рд╕реВрдЪреА рдореЗрдВ рд░рдЦрд╛ рдЧрдпрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рдЬрдбрд╝ (рдЗрд╕реЗ <i>рд░реВрдЯ</i> рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ) рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ <i>рд╣реЛрдо</i> , рд╕рд╛рдЗрдЯ <i>/ var / www рдХреЗ</i> рд╕рд╛рде рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ <i>,</i> рдФрд░ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рд╕реНрдерд┐рдд рдбреЗрдЯрд╛рдмреЗрд╕ <i>/ var / рдбреЗрдЯрд╛рдмреЗрд╕</i> рдореЗрдВ рдЕрд▓рдЧ рд╕рдмрд╡реЛрд▓рдо рдХреЗ рд░реВрдк рдореЗрдВред <br><br><img src="https://habrastorage.org/webt/ga/yp/ma/gaypma96_mzvjtlwjyh3atw5qgm.png"><br><br>  рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП, рдХреБрдЫ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдореЗрдВ рд░рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <i>var / www</i> рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВред <br><br>  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд╕рд╛рде, рд╕рднреА рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  <i>рд░реВрдЯ</i> рдЙрдк рдореЗрдВ рдПрдХ рдорд╛рдЙрдВрдЯ рдкреЙрдЗрдВрдЯ / рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рдЗрд╕рдХреЗ рдЕрдВрджрд░ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реАрдЬрд╝ <i>рд╣реЛрдо</i> рдФрд░ <i>var рд╣реИрдВ</i> ред<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрдврд╝рддреЗ рдХреЗ рдмрд╛рдж </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдбрд╝</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ рдШрд░</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sabvolyum рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдШрд░</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрдВ, рдФрд░ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ var / www</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ var / databas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sabvolyumy - рдПрдХ рдИ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var / www</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреЗрдЯрд╛рдмреЗрд╕</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреНрд░рдорд╢ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХрд╛рд░, btrfs-subvolume рдХрд╛ рдкреЗрдбрд╝ рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ OS рдХреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдЙрд╕рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред</font></font><br><br>  рдкреЗрд╢реЗрд╡рд░реЛрдВ: <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗрд╡рд▓ рдорд╛рдЙрдВрдЯреЗрдб рд╕рдмрд╡реЛрд▓реНрдпреВрдо рджреЗрдЦрддрд╛ рд╣реИ, </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдмрд╡реВрдлрд░ рдХреЛ рдмрджрд▓рдирд╛ рдЖрд╕рд╛рди рд╣реИ (рдПрдХ рдХреЛ рдЕрдирдорд╛рдЙрдВрдЯ рдХрд░реЗрдВ, рджреВрд╕рд░реЗ рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░реЗрдВ), </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдмрд╡реВрдлрд░ рд╣рдЯрд╛рдиреЗ рдореЗрдВ рдЖрд╕рд╛рдиред </font></font><br></li></ul><br>  рд╡рд┐рдкрдХреНрд╖: <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬреЛ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЙрд╕реЗ рднреНрд░рдорд┐рдд рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░рддреНрдпреЗрдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЗ рд▓рд┐рдП fstab рдореЗрдВ рдПрдХ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП, рдФрд░ рдпрджрд┐ рд╕реНрдиреИрдкрд╢реЙрдЯ рдореЗрдВ "рд░реЛрд▓рдмреИрдХ" рд╣реИрдВ, рддреЛ fstab рдореЗрдВ рд╕рдВрдмрдВрдзрд┐рдд рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпреЛрдВ рдХреЛ рднреА рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </font></font><br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреА рдиреЗрд╕реНрдЯреЗрдб рд╕рдВрд░рдЪрдирд╛ рдХреБрдЫ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЗ рдмрдЬрд╛рдп рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХреЗ рд╕рд░рд▓ рдЙрдкрдпреЛрдЧ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддреА рд╣реИред </font></font><br><br><img src="https://habrastorage.org/webt/v2/41/e5/v241e5bwrguy3_f76frc2k3ygwk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд░реВрдЯ рд╕рдмрд╡реЙрд▓реНрдо рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрдзрд┐рдХ рдХреБрдЫ рднреА рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред</font></font><br><br>  рдкреЗрд╢реЗрд╡рд░реЛрдВ: <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рднреА рд╕рдмрд╡реЛрд▓реНрдпреВрдо рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВ, рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╕рдордЭрдирд╛ рдЖрд╕рд╛рди рд╣реИ, </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЖрдкрдХреЛ рдлрд┐рд░ рд╕реЗ рдХреБрдЫ рднреА рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд╕рдм рдХреБрдЫ рдПрдХ "рдирд┐рдпрдорд┐рдд" рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рд╣реИред </font></font><br></li></ul><br>  рд╡рд┐рдкрдХреНрд╖: <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рднреА рд╕рдмрд╡реЛрд▓реНрдпреВрдо рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВ, рд╢рд╛рдпрдж рдХреБрдЫ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдЫрд┐рдкрд╛рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ, </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдмрд╡реЛрд▓реБрдо рдХреЛ рд╣рдЯрд╛рдирд╛ / рдмрджрд▓рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИ (рдЗрд╕рдХрд╛ рдХрд╛рд░рдг рдиреЗрд╕реНрдЯреЗрдб рд╕рдмрд╡реЗрдореНрд╕ рд╣реИ)ред </font></font><br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреИрд░, рддреАрд╕рд░рд╛ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдПрдХ рдорд┐рд╢реНрд░рд┐рдд рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рдореЗрдВ рджреЛрдиреЛрдВ рдХреЗ рд▓рд╛рднреЛрдВ рдХреЛ рдЕрдзрд┐рдХрддрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рджреЛ рдХрд╛ рд╕рдВрдпреЛрдЬрди рд╢рд╛рдорд┐рд▓ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдЗрд╕ рд╡рд┐рд╢реЗрд╖ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдлреИрд╕реНрдЯрдм рдореЗрдВ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдЬрдЯрд┐рд▓, рдмрджрд▓рдиреЗ рдореЗрдВ рдореБрд╢реНрдХрд┐рд▓, рднреНрд░рдорд┐рдд рд╕рдВрд░рдЪрдирд╛ рд╣реЛ рдЬрд╛рдПрдЧреАред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕рдм </font><font style="vertical-align: inherit;">рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рд╢рд╛рд╕рдХ </font><font style="vertical-align: inherit;">рдХреА </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдпрдо</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред</font></font><br><br><img src="https://habrastorage.org/webt/bv/qw/zv/bvqwzvl0wqspgvlaknnd3l9eyqo.png"><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдбрд┐рд╕реНрдХ рдЬреЛрдбрд╝реЗрдВ, рдирд┐рдХрд╛рд▓реЗрдВ / рд╕рдВрддреБрд▓рди рдХрд░реЗрдВ </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> btrfs рдЙрддреНрдХреГрд╖реНрдЯ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рджрд╛рд╡рд╛ рдХрд░рддрд╛ рд╣реИ - рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рджреМрд░рд╛рди рд╕реАрдзреЗ "рд╣реЙрдЯ" рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдХреНрд╖рдорддрд╛: </font></font><br><br><pre> <code class="plaintext hljs">btrfs device add /path/to/device /path/to/btrfs</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╛ рд╣рдЯрд╛рдПрдВ: </font></font><br><br><pre> <code class="plaintext hljs">btrfs device remove /path/to/device /path/to/btrfs</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡реИрд╕реЗ, рдПрдХ рдРрдб / рдбрд┐рд▓реАрдЯ рдХреЙрд▓ рдореЗрдВ рдЖрдк рдХрдИ рдбрд┐рд╕реНрдХ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд┐рд░, рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдкрде рдЙрд╕ btrfs рдХреЗ рдХрд┐рд╕реА рднреА рдЙрдк-рд╡рд░реНрдЧ рдХрд╛ рдкрде рд╣реИ, рдЬрд┐рд╕ рдкрд░ рдХрдорд╛рдВрдб рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рдХрд┐рддрдиреЗ рдФрд░ рдХреМрди рд╕реЗ рдмреНрд▓реЙрдХ рдЙрдкрдХрд░рдг btrfs рдХреЗ рдирд┐рдпрдВрддреНрд░рдг рдореЗрдВ рд╣реИрдВ:</font></font><br><br><pre> <code class="plaintext hljs">btrfs filesystem show /path/to/btrfs Label: none uuid: 52961dda-df84-4e2d-9727-e93e7738df81       Total devices 2 FS bytes used 192.00KiB       devid  1 size 20.00GiB used 132.00MiB path /dev/sdc       devid  2 size 50.00GiB used 0.00B path /dev/sdd</code> </pre><br> <i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рдпреБрдХреНрдд</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреНрд╖реЗрддреНрд░ рдореЗрдВ </font><i><font style="vertical-align: inherit;">0.00 рдмреА</font></i><font style="vertical-align: inherit;"> рд╣рдореЗрдВ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдЬреЛрдбрд╝рд╛ рдбрд┐рд╕реНрдХ рдЦрд╛рд▓реА рд╣реИред </font><font style="vertical-align: inherit;">рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЗрд╕реЗ рдбреЗрдЯрд╛ рд╕реЗ рднрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕рдВрддреБрд▓рди рд░рдЦрдирд╛ рд╣реЛрдЧрд╛:</font></font><br><br><pre> <code class="plaintext hljs">btrfs balance start /path/to/btrfs</code> </pre> <br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╢реЗрд╖</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрдорд╛рдВрдб </font><font style="vertical-align: inherit;">рдЪрдпрдирд┐рдд рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдбрд┐рд╕реНрдХ рдкрд░ рдбреЗрдЯрд╛ рдХреЛ рдкреБрдирд░реНрд╡рд┐рддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, RAID1 рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╢реЗрд╖ рдореВрд▓ рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ рдбреЗрдЯрд╛ рдХреЗ рдХреНрд▓реЛрдирд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рд▓реЗ рдЬрд╛рдПрдЧрд╛, RAID0 рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рджреЛ рдбрд┐рд╕реНрдХ, рдЖрджрд┐ рднрд░ рдореЗрдВ рдбреЗрдЯрд╛ рдХреЗ рдЕрдзрд┐рдХ рд╡рд┐рддрд░рдг рдХреЗ рд▓рд┐рдП рдиреЗрддреГрддреНрд╡ рдХрд░реЗрдЧрд╛ред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрддреБрд▓рди рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдпрджрд┐ рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдбрд┐рд╕реНрдХ рдкрд░ voids рдереЗ, рддреЛ рдбрд┐рд╕реНрдХ рдкрд░ рдбреЗрдЯрд╛ рдПрдХ рд╕рдШрди рддрд░реАрдХреЗ рд╕реЗ рд▓рд┐рдЦрд╛ рдЬрд╛рдПрдЧрд╛, рдЕрд░реНрдерд╛рддред рдбреАрдлрд╝реНрд░реИрдЧреНрдореЗрдиреНрдЯреЗрд╢рди рдирд┐рдХрд▓ рдЬрд╛рдПрдЧрд╛ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рд╕рдордЭрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдпрд╣ рдмрд┐рд▓реНрдХреБрд▓ "рдЙрд╕" рдбреАрдлрд╝реНрд░реЗрдЧреНрдореЗрдВрдЯреЗрд╢рди рдирд╣реАрдВ рд╣реИред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреИрд▓реЗрдВрд╕</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрдорд╛рдВрдб </font><font style="vertical-align: inherit;">рддрд╛рд░реНрдХрд┐рдХ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдирд╣реАрдВ рджреЗрдЦрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдбреЗрдЯрд╛ рдмреНрд▓реЙрдХ рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред рд╡рд╣ рдЗрд╕ рддрдереНрдп рдкрд░ рдзреНрдпрд╛рди рдирд╣реАрдВ рджреЗрддреА рд╣реИ рдХрд┐ рдбрд┐рд╕реНрдХ рдкрд░ рдХреЛрдИ рдлрд╝рд╛рдЗрд▓ рдлреИрд▓реА рд╣реБрдИ рд╣реИред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрддреБрд▓рди</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдбреЗрдЯрд╛ рдмреНрд▓реЙрдХ рдХреЛ рдПрдХ рд╕реНрдерд╛рди рд╕реЗ рджреВрд╕рд░реЗ рд╕реНрдерд╛рди рдкрд░ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред</font></font> рдпрд╛рдиреА<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрддреБрд▓рди рдХреЗ рд▓рд┐рдП рдЦрдВрдбрд┐рдд рдПрдХ рдлрд╝рд╛рдЗрд▓ рдЗрд╕рдХреЗ рдмрд╛рдж рдЦрдВрдбрд┐рдд рд░рд╣реЗрдЧреАред рд▓реЗрдХрд┐рди! рдбреЗрдЯрд╛ рдмреНрд▓реЙрдХ рдХреЗ рд╕реНрддрд░ рдкрд░ рд╡рд┐рдЦрдВрдбрди рдЕрднреА рднреА рдХрдо рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рднреНрд░рдо рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП рдЗрд╕реЗ рдХрд╣рддреЗ рд╣реИрдВ: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреИрд▓реЗрдВрд╕</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдСрдкрд░реЗрд╢рди </font><font style="vertical-align: inherit;">рдбреЗрдЯрд╛ рдмреНрд▓реЙрдХ рдХреЗ рд╕реНрддрд░ рдкрд░ рд╡рд┐рдЦрдВрдбрди рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдлрд╝рд╛рдЗрд▓ рд╡рд┐рдЦрдВрдбрди рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рде рд╣реА, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреИрд▓реЗрдВрд╕</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрдорд╛рдВрдб </font><font style="vertical-align: inherit;">рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдкреНрд░реЛрдлрд╛рдЗрд▓ рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдбрд┐рд╕реНрдХ рдкрд░ DUP рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рдбрд┐рд╕реНрдХ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж рдЙрдиреНрд╣реЛрдВрдиреЗ рдкреВрд░реНрдг RAID1 рдмрдирд╛рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ </font></font><code>convert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="plaintext hljs">btrfs balance start -dconvert=raid1 -mconvert=raid1 /path/to/btrfs</code> </pre> <br><font style="vertical-align: inherit;"></font><code>-dconvert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font><font style="vertical-align: inherit;">рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП </font></font><code>-mconvert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдХреНрд░рдорд╢рдГ рдбреЗрдЯрд╛ рдФрд░ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдирдП рд░рд┐рдХреЙрд░реНрдб рдкреНрд░реЛрдлрд╛рдЗрд▓ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЗрд╕рдореЗрдВ -sconvert рд╡рд┐рдХрд▓реНрдк рднреА рд╣реИ, рдЬрд┐рд╕реЗ рд╕рд┐рд╕реНрдЯрдо рдбреЗрдЯрд╛ рд░рд╛рдЗрдЯ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдкрдХреЛ рдСрдкрд░реЗрд╢рди рдХреЛ рдмрд╛рдзреНрдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреЗ рд╕рд╛рде -f (--force) рд╕реНрд╡рд┐рдЪ рднреА рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд╛ рдореБрдЦреНрдп рдЙрджреНрджреЗрд╢реНрдп рд╕рдВрддреБрд▓рди рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП рдирд┐рдпрдореЛрдВ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдирд╛ рд╣реИ: рдЬреЛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП рдмреНрд▓реЙрдХ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЬрд┐рд╕реЗ рд╕реНрдкрд░реНрд╢ рдирд╣реАрдВ рдХрд░рдирд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдХреЗрд╡рд▓ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдкреНрд░реЛрдлрд╛рдЗрд▓ (рдлрд┐рд▓реНрдЯрд░ рдкреНрд░реЛрдлрд╛рдЗрд▓) рдХреЗ рд╕рд╛рде рд░рд┐рдХреЙрд░реНрдб рдХрд┐рдП рдЧрдП рдмреНрд▓реЙрдХ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдкреНрд░рддрд┐рд╢рдд (рдЙрдкрдпреЛрдЧ рдлрд┐рд▓реНрдЯрд░) рдХреЗ рдКрдкрд░ рд░рдЦреЗ рдЧрдП рдмреНрд▓реЙрдХ, рдпрд╛ рдЖрдк рдХреЗрд╡рд▓ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдбрд┐рд╕реНрдХ (рдбреИрд╡рд┐рдб рдлрд┐рд▓реНрдЯрд░), рдЖрджрд┐ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдмреНрд▓реЙрдХреЛрдВ рдХреЗ рд╕рдореВрд╣реЛрдВ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╡реИрд╕реЗ, рд╡реЗ рдЕрднреА рднреА рд╕рдВрдпреБрдХреНрдд рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдлрд╝рд┐рд▓реНрдЯрд░ рдХреА рдХреНрд╖рдорддрд╛рдПрдВ рдмрд╣реБрдд рд╡реНрдпрд╛рдкрдХ рд╣реЛрддреА рд╣реИрдВ рдФрд░ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рдХреЗ рдЪрдпрдирд╛рддреНрдордХ рд╕рдВрддреБрд▓рди рдХреЛ рд╕рдВрдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реЛрддреА рд╣реИрдВред</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡рд┐рдЦрдВрдбрди </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, btrfs, рдЗрд╕рдХреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЗ рдХрд╛рд░рдг, рд╡рд┐рдЦрдВрдбрди рдЬреИрд╕реА рдШрдЯрдирд╛ рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╣реИред </font><font style="vertical-align: inherit;">рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдбреЗрдЯрд╛ рд╣рдореЗрд╢рд╛ рдбрд┐рд╕реНрдХ рдкрд░ рдПрдХ рдирдП рд╕реНрдерд╛рди рдкрд░ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрдЧрд░ рдЖрдк рдлрд╝рд╛рдЗрд▓ рдкрдврд╝рддреЗ рд╣реИрдВ, рддреЛ рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдХреБрдЫ рднреА рди рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ рдЙрд╕реА рдлрд╝рд╛рдЗрд▓ рдкрд░ рд╡рд╛рдкрд╕ рд▓рд┐рдЦреЗрдВ, рдбреЗрдЯрд╛ рдбрд┐рд╕реНрдХ рдкрд░ рдПрдХ рдирдП рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдЬрд╛рдПрдЧрд╛ред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдбреЗрдЯрд╛ рдХреЛ рдХреЗрд╡рд▓ рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рд╡рд╣реА рдмрд╛рдд рд╣реЛрддреА рд╣реИ - рдкрд░рд┐рд╡рд░реНрддрди рдбрд┐рд╕реНрдХ рдкрд░ рдПрдХ рдирдП рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд▓рд┐рдЦреЗ рдЧрдП рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд▓рдЧрд╛рддрд╛рд░ рдХрдИ рдЯреБрдХрдбрд╝реЛрдВ рдореЗрдВ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ, рдЯреБрдХрдбрд╝реЛрдВ рдХреЗ "рдлреИрд▓рд╛рд╡" рдХреЛ рдмрдврд╝рд╛рддреЗ рд╣реБрдП, рдЯреБрдХрдбрд╝реЛрдВ рдХреЛ рдмрд╣реБрдд рджреГрдврд╝рддрд╛ рд╕реЗ рдмрджрд▓ рджреЗрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕реАрдкреАрдпреВ рдФрд░ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдореЗрдореЛрд░реА рдХреА рдЦрдкрдд рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХрд╛ рдХрд╛рд░рдг рдмрдирддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдЦрдВрдбрд┐рдд рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдЗрдореЗрдЬ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдк </font><b><font style="vertical-align: inherit;">рдлрд╝рд╛рдЗрд▓рдлреНрд░реИрдЧ</font></b><font style="vertical-align: inherit;"> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рд╛рдЗрд▓ рд╡рд┐рдЦрдВрдбрди рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (btrfs-progs рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ)ред </font></font><br><br><pre> <code class="plaintext hljs">filefrag /path/to/your/file</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ extents рдХреА рд╕рдВрдЦреНрдпрд╛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╕реАрдзреЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ рдХрд╣реЗрдВ - рдХрдо extents рд╢рд╛рдорд┐рд▓, рдХрдо рдЦрдВрдбрд┐рдд рдлрд╝рд╛рдЗрд▓ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Btrfs рдкрд░ рд╡рд┐рдЦрдВрдбрди рдХрд╛ рдореБрдХрд╛рдмрд▓рд╛ рдХрд░рдиреЗ рдХреЗ рджреЛ рддрд░реАрдХреЗ рд╣реИрдВ: рдбреАрдлрд╝реНрд░реИрдЧреНрдореЗрдиреНрдЯреЗрд╢рди рдФрд░ рдзреНрд╡рдЬ </font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреАрдлрд╝реНрд░реИрдЧреНрдореЗрдиреНрдЯреЗрд╢рди рдХреЛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдпрд╛ рдПрдХ рд╕рдмрд╡реЙрд▓реНрдо / рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдкрд░ рдкреБрдирд░рд╛рд╡рд░реНрддреА рд╕рд╣рд┐рдд рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЖрджреЗрд╢ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИ:</font></font><br><br><pre> <code class="plaintext hljs">btrfs filesystem defragment /path/to/file/or/dir</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЭреЗ рдпрд╣ рдХрд╣рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдпрд╣ рдЯреАрдо рд╣рдореЗрд╢рд╛ рдЕрдкреЗрдХреНрд╖рд┐рдд рдкрд░рд┐рдгрд╛рдо рдирд╣реАрдВ рджреЗрддреА рд╣реИред </font><font style="vertical-align: inherit;">рдбреАрдлрд╝реНрд░реИрдЧреНрдореЗрдиреНрдЯреЗрд╢рди рдХреЗ рдмрд╛рдж рдЫреЛрдЯреА, рдереЛрдбрд╝реА рдЦрдВрдбрд┐рдд рдлрд╝рд╛рдЗрд▓реЗрдВ (10 - 20 рдПрдХреНрд╕рдЯреЗрдВрдб) рдХреЛ рдФрд░ рднреА рдЕрдзрд┐рдХ рднрд╛рдЧреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдХрд░реНрдиреЗрд▓ рдХреЗ рдХреБрдЫ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдкрд░ btrfs рдбреАрдлрд╝реНрд░реИрдЧреНрдореЗрдиреНрдЯреЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рдХрдЯреМрддреА рдХреЛ рддреЛрдбрд╝ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЙрдиреНрд╣реЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рднреМрддрд┐рдХ рдкреНрд░рддрд┐рдпрд╛рдВ рдмрдирд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред</font></font> рдпрд╛рдиреА<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рднреМрддрд┐рдХ рд╕реНрддрд░ рдкрд░ рд╕реНрдиреИрдкрд╢реЙрдЯ рдкреВрд░реНрдг рдкреНрд░рддрд┐рдпрд╛рдВ рдмрди рдЬрд╛рдПрдВрдЧреЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдЦрдВрдбрди рдХрд╛ рдореБрдХрд╛рдмрд▓рд╛ рдХрд░рдиреЗ рдХрд╛ рджреВрд╕рд░рд╛ рддрд░реАрдХрд╛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рд╕рд╛рде рд╣реИ </font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br><br><pre> <code class="plaintext hljs">chattr +C /path/to/file</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рд╢реЗрд╖рддрд╛ </font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗрд╡рд▓ рдПрдХ рдирдИ рдпрд╛ рдЦрд╛рд▓реА рдлрд╝рд╛рдЗрд▓ рдкрд░ рд╕реЗрдЯ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдЦрди</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рддрдВрддреНрд░ </font><i><font style="vertical-align: inherit;">рдкрд░ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдХреЛ</font></i><font style="vertical-align: inherit;"> рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░ рджреЗрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">, рдЗрд╕рд▓рд┐рдП btrfs рд╣рдореЗрд╢рд╛ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдбрд┐рд╕реНрдХ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВрдЧреЗ рдЬрдм рдлрд╝рд╛рдЗрд▓ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдореМрдЬреВрджрд╛ рд▓реЛрдЧреЛрдВ рдкрд░ рдбреЗрдЯрд╛ рд▓рд┐рдЦрдирд╛ (рднреМрддрд┐рдХ рд╕реНрддрд░ рдкрд░)ред </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nocow</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЗ minuses рдХреА </font><font style="vertical-align: inherit;">- рдпрд╣ рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП рдЪреЗрдХрд╕рдо рдХреА рдЬрд╛рдБрдЪ рдХреЛ рднреА рдЕрдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рджреВрд╕рд░реЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рдХреЛрдИ рдЧрд╛рдп рдирд╣реАрдВ - рдХреЛрдИ рдЪреЗрдХрд╕рдо рдирд╣реАрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреЗрд╢рдХ, рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╡рд┐рд╢реЗрд╖рддрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ</font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рд╛рдЗрд▓ рдПрдХ рдзрдиреНрдпрд╡рд╛рдж рд░рд╣рд┐рдд рдХрд╛рд░реНрдп рд╣реИред рдпрджрд┐ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ / рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдХрд╛ рдпрд╣ рдзреНрд╡рдЬ рд╕реЗрдЯ рд╣реИ, рддреЛ рдЗрд╕рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рд╕рднреА рдирдИ рдлрд╛рдЗрд▓реЗрдВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдзреНрд╡рдЬ рдХреЛ рдЗрдирд╣реЗрд░рд┐рдЯ рдХрд░реЗрдВрдЧреАред рд╡рд╣реА рдмрдирд╛рдИ рдЧрдИ рдиреЗрд╕реНрдЯреЗрдб рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред рдпрджрд┐, рдЗрд╕ рд╕рдордп рд╡рд┐рд╢реЗрд╖рддрд╛ рдЪрд╛рд▓реВ рд╣реЛ рдЧрдИ рдереА, рдХреЛрдИ рднреА рдбреЗрдЯрд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдерд╛, рддреЛ рдпрд╣ рдЙрдиреНрд╣реЗрдВ рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ - рд╡рд┐рд╢реЗрд╖рддрд╛ </font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗрд╡рд▓ рдПрдХ рдирдИ рдпрд╛ рдЦрд╛рд▓реА рдлрд╝рд╛рдЗрд▓ рдкрд░ рд╕реЗрдЯ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк </font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реЗ </font><font style="vertical-align: inherit;">рдзреНрд╡рдЬ рдХреЛ рд╕реЗрдЯ рдХрд░рдиреЗ рдХрд╛ рджреВрд╕рд░рд╛ рддрд░реАрдХрд╛ </font><font style="vertical-align: inherit;">рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдирд╛ рд╣реИ </font></font><code>nodatacow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="plaintext hljs">mount -o subvol=path/to/subvol,nodatacow /dev/sdXX /path/to/mountpoint</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рд╡рд┐рдХрд▓реНрдк рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░рдг рд╣реЛрдЧрд╛ </font></font><code>nodatasum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рддрд╛рдХрд┐ рдирдИ рдмрдирд╛рдИ рдЧрдИ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП, рдЪреЗрдХрд╕рдореЛрдВ рдХреА рдЧрдгрдирд╛ рдирд╣реАрдВ рдХреА рдЬрд╛рдПрдЧреАред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣, рдПрдХ рдЕрддрд┐ рд╕реВрдХреНрд╖реНрдо рдЕрдВрддрд░ рд╣реИ: рдЖрдк рдПрдХ рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдХреЗрд╡рд▓ рдПрдХ рд╕рдмрд╡реВрдлрд░ рдорд╛рдЙрдВрдЯ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ </font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдпрд╛ рддреЛ рд╕рднреА рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореЗрдВ рдПрдХ рд╡рд┐рдХрд▓реНрдк рд╣реЛрдЧрд╛ </font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдпрд╛ рдХреЛрдИ рднреА рдирд╣реАрдВред рд╕рдм рдХреБрдЫ рдкрд╣рд▓реЗ рдорд╛рдЙрдВрдЯреЗрдб рд╕рдмрд╡реЛрд▓реНрдпреВрдо рджреНрд╡рд╛рд░рд╛ рддрдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: рдпрджрд┐ рдЗрд╕рдореЗрдВ рдПрдХ рд╡рд┐рдХрд▓реНрдк рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдерд╛ </font></font><code>nodatacow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рддреЛ рдмрд╛рдж рдХреЗ рд╕рднреА рдорд╛рдЙрдВрдЯ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдЬрд╛рдПрдВрдЧреЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рдлрд╝рд╛рдЗрд▓ рдкрд░ рдПрдХ рдзреНрд╡рдЬ </font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓рдЧрд╛рддреЗ рд╣реИрдВ рдФрд░ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рд╕реЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рдирд┐рдХрд╛рд▓рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдпрд╣ рдлрд╝рд╛рдЗрд▓ рд╕реНрдерд┐рдд </font><font style="vertical-align: inherit;">рд╣реИ, рддреЛ рдПрдХ рд╕реНрдкрд╖реНрдЯ рдХреНрд╖рдг рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛ </font><font style="vertical-align: inherit;">рд╣реИред </font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдЕрдкрдбреЗрдЯ рдХрд┐рдП рдЧрдП рдбреЗрдЯрд╛ рдмреНрд▓реЙрдХ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд </font><font style="vertical-align: inherit;">рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, btrfs рдзреНрд╡рдЬ рдХреА рдЙрдкреЗрдХреНрд╖рд╛ </font><font style="vertical-align: inherit;">рдХрд░рддрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП рдЭрдВрдбреЗ рдХреЗ рдмрд╛рд╡рдЬреВрдж</font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рд╡реИрд╕реЗ, рдлрд╛рдЗрд▓ рд╕реНрдиреИрдкрд╢реЙрдЯ рдореЗрдВ рднреА рдЗрд╕реЗ рдЗрдирд╣реЗрд░рд┐рдЯ рдХрд░реЗрдЧреА), рдХрд┐рд╕реА рднреА рдлрд╛рдЗрд▓ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдбрд┐рд╕реНрдХ рдкрд░ рдПрдХ рдирдП рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдлрд╛рдЗрд▓ рдлрд┐рд░ рд╕реЗ рдЯреБрдХрдбрд╝реЗ рдЯреБрдХрдбрд╝реЗ рд╣реЛ рдЬрд╛рдПрдЧреАред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдбреЗрдЯрд╛ рдмреНрд▓реЙрдХ рдХрдИ рдмрд╛рд░ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдкрд╣рд▓реА рдмрд╛рд░ рдпрд╣ рдбрд┐рд╕реНрдХ рдкрд░ рдПрдХ рдирдП рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдЖрдПрдЧрд╛, рдФрд░ рдмрд╛рдж рдХреА рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдЗрд╕реЗ рдЗрд╕ рдирдП рдХреНрд╖реЗрддреНрд░ рдореЗрдВ "рдЬрдЧрд╣" рдореЗрдВ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЯреНрд░рд┐рдХреНрд╕ рдФрд░ рдлреЗрд▓ </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Btrfs-progs рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдЖрдк рдХрдорд╛рдВрдб рдХрд╛ рдкреВрд░рд╛ рдирд╛рдо рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ: </font></font><br><br><pre> <code class="plaintext hljs">btrfs sub cre = btrfs subvolume create</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╣ рдХреЗрд╡рд▓ рдкрд╣рд▓реЗ рдкрд╛рддреНрд░реЛрдВ рдХреЗ рд╕рдВрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рдЬреЛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░реВрдк рд╕реЗ рдХрдорд╛рдВрдб рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░рддреЗ рд╣реИрдВ: </font></font><br><br><pre> <code class="plaintext hljs">su = subvolume, fi = filesystem, ba = balance, de = device;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рд╕рд┐рджреНрдзрд╛рдВрдд рд╕реНрдкрд╖реНрдЯ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рд╢, btrfs рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХрд╛ рд╕реНрдиреИрдкрд╢реЙрдЯ рдирд╣реАрдВ рдмрдирд╛ рд╕рдХрддреЗ, рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рдПрдХ рд╕рдорд╛рдзрд╛рди рд╣реИ:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдмрдирд╛рдПрдБ </font></font><br><br><pre> <code class="plaintext hljs">btrfs subvolume create ./subvol</code> </pre> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗ рд╕рдмрд╡реЛрд▓реНрдпреВрдо рдореЗрдВ рдлрд╛рдЗрд▓ рдХреЙрдкреА рдХрд░реЗрдВ: </font></font><br><br><pre> <code class="plaintext hljs">cp -ax --reflink=always your/dir/. ./subvol</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреБрдВрдЬреА </font></font><code>reflink=always</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoW рддрдВрддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧреА, рдЕрд░реНрдерд╛рдд </font><font style="vertical-align: inherit;">рдбреЗрдЯрд╛ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдирд╣реАрдВ рдмрдирд╛рдИ рдЬрд╛рдПрдЧреА, рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рд▓рд┐рдВрдХ рдирд┐рдореНрди рд╕реНрддрд░ рдХреЗ btrfs рдкрд░ рдмрдирд╛рдП рдЬрд╛рдПрдВрдЧреЗред</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдм рд╕рдмрд╡рд░реНрд▓реНрдб рдореЗрдВ рд╕рднреА рдлрд╛рдЗрд▓реЗрдВ рд╣реИрдВ рдЬреЛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдереАрдВ, рдФрд░ рдЖрдк рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЛ рдЗрд╕рд╕реЗ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВред </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдк </font></font><code>nocow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореМрдЬреВрджрд╛ рдбреЗрдЯрд╛ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ </font><font style="vertical-align: inherit;">рд╡рд┐рд╢реЗрд╖рддрд╛ </font><font style="vertical-align: inherit;">рд╕реЗрдЯ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЖрдк рдирд┐рдореНрди рддрд░реАрдХреЗ рд╕реЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЦрд╛рд▓реА рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ </font></font><br><br><pre> <code class="plaintext hljs">touch nocowfile</code> </pre> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрд╕реЗ рдПрдХ рдЭрдВрдбрд╛ рд▓рдЧрд╛рдУ </font></font><code>nocow</code> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рдирдИ рдлрд╝рд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП рдбрд┐рд╕реНрдХ рд╕реНрдерд╛рди рдЖрд╡рдВрдЯрд┐рдд рдХрд░реЗрдВ </font></font><br><br><pre> <code class="plaintext hljs">fallocate -l10g nocowfile</code> </pre> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд┐рд╕реА рдореМрдЬреВрджрд╛ рдлрд╝рд╛рдЗрд▓ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдХреЙрдкреА рдХрд░реЗрдВ </font></font><br><br><pre> <code class="plaintext hljs">cp -v oldcowfile nocowfile</code> </pre> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ btrfs рдЕрдВрддрд░рд┐рдХреНрд╖ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддреЗ рд╣реИрдВ, рддреЛ рднреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╣рдЯрд╛рдиреЗ рд╕реЗ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рдХреЛрдИ рд╕реНрдерд╛рди рдирд╣реАрдВ рдЫреЛрдбрд╝рд╛"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рддреНрд░реБрдЯрд┐ рд╣реЛ рд╕рдХрддреА рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд╕рдорд╛рдзрд╛рди рдХреЗ рд▓рд┐рдП, рдЕрд╕реНрдерд╛рдпреА рдбреНрд░рд╛рдЗрд╡ рдХреЛ рдЕрдзрд┐рдорд╛рдирддрдГ рдХрдо рд╕реЗ рдХрдо 1GB рдХреЗ рдЖрдХрд╛рд░ рдХреЗ рд╕рд╛рде btrfs рд╕реЗ рдЬреЛрдбрд╝рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред </font><font style="vertical-align: inherit;">рдлрд┐рд░ рдбреЗрдЯрд╛ рдХреЛ рд╕рд╛рдлрд╝ рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдлрд┐рд░ рдЕрд╕реНрдерд╛рдпреА рдбреНрд░рд╛рдЗрд╡ рдХреЛ рд╣рдЯрд╛ рджреЗрдВред </font><b><font style="vertical-align: inherit;">рдмреИрд▓реЗрдВрд╕</font></b></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдСрдкрд░реЗрд╢рди </font><font style="vertical-align: inherit;">, рд░рд╛рдЗрдЯрд┐рдВрдЧ рдкреНрд░реЛрдлрд╛рдЗрд▓ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдП рдмрд┐рдирд╛, рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд░реВрдк рд╕реЗ рдЙрдиреНрд╣реЗрдВ </font><i><font style="vertical-align: inherit;">рдбреБрдк</font></i><font style="vertical-align: inherit;"> рд╕реЗ </font><i><font style="vertical-align: inherit;">рдЫрд╛рдкреЗ</font></i><font style="vertical-align: inherit;"> 1 рдореЗрдВ рдмрджрд▓рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдХреНрдпрд╛, рд╕рдВрдпреЛрдЧрд╡рд╢, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдЧреЛрдЪрд╛рд░реНрд╕</font></a><font style="vertical-align: inherit;"> рдкреГрд╖реНрда рдкрд░ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдбрд┐рд╕реНрдХ рдХреЛ btrfs рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж рдРрд╕рд╛ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ </font><i><font style="vertical-align: inherit;">рдбреБрдкреНрд▓рд┐рдХреЗрдЯ</font></i><font style="vertical-align: inherit;"> рдкреНрд░реЛрдлрд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ btrfs рдореЗрдВ рдПрдХрд▓ рдбреНрд░рд╛рдЗрд╡ рдХреЛ рдкреНрд░рд╛рд░реВрдкрд┐рдд рдХрд░рдиреЗ рд╕реЗ </font><font style="vertical-align: inherit;">рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ </font><i><font style="vertical-align: inherit;">рдбреБрдк</font></i><font style="vertical-align: inherit;"> рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ </font><font style="vertical-align: inherit;">рд╣реЛрддрд╛ рд╣реИред</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╢рд╛рдпрдж рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Btrfs рдХреЗ рд╕рд╛рде рдмреНрд▓реЙрдХ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рдирд┐рдореНрди-рд╕реНрддрд░реАрдп рдХреНрд▓реЛрди рдмрдирд╛рдиреЗ рд╕реЗ рдмрдЪреЗрдВред "рд╕реНрдорд╛рд░реНрдЯ" рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╣реЛрдиреЗ рдХреЗ рдирд╛рддреЗ, рдХреБрдЫ рдСрдкрд░реЗрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП (рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░, рдЬрдм рдмрдврд╝рддреЗ рд╣реИрдВ) btrfs рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рднреА рд╣рд┐рд╕реНрд╕реЛрдВ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдЖрдк рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рд╕рд┐рд╕реНрдЯрдо рдбреЗрдЯрд╛ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрдврд╝рддрд╛ рд╣реИред рдпрджрд┐ рдПрдХ рд╣реА UUID рдХреЗ рд╕рд╛рде рджреЛ рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдЦреЛрдЬ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдкрд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ btrfs рдЙрдиреНрд╣реЗрдВ рдЙрд╕реА рдЙрджрд╛рд╣рд░рдг рдХреЗ рднрд╛рдЧ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВрдЧреЗред рдпрджрд┐ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдпреЗ рджреЛрдиреЛрдВ рдбрд┐рд╡рд╛рдЗрд╕ рдореВрд▓ рдФрд░ рдЗрд╕рдХреЗ рдХреНрд▓реЛрди рдмрди рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЕрдХреЗрд▓реЗ рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреИрд╕реЗ рдХрд╛рдо рдХрд░реЗрдЧрд╛, рд▓реЗрдХрд┐рди рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдпрд╣ рдХреБрдЫ рднреА рдЕрдЪреНрдЫрд╛ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред рд╕рдмрд╕реЗ рдЦрд░рд╛рдм рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдпрд╣ рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп рдбреЗрдЯрд╛ рднреНрд░рд╖реНрдЯрд╛рдЪрд╛рд░ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рд╣реЛрдЧрд╛ред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдирд┐рдореНрди-рд╕реНрддрд░реАрдп рддрд░реАрдХреЗ рд╕реЗ btrfs рдХреЗ рд╕рд╛рде рдбрд┐рд╕реНрдХ рдХреНрд▓реЛрди рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЕрддреНрдпрдзрд┐рдХ рд╕рд╛рд╡рдзрд╛рдиреА рдмрд░рддрдиреА рдЪрд╛рд╣рд┐рдПред </font><font style="vertical-align: inherit;">рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдПрдХ рдХреНрд▓реЛрди рдУрдПрд╕ рдХрд░реНрдиреЗрд▓ рдХреЛ рдПрдХ рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрдмрдХрд┐ рдореВрд▓ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдореМрдЬреВрдж рд╣реИ, рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрддред </font><font style="vertical-align: inherit;">рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдХреЛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реБрдП, рдЖрдк рдХреНрд▓реЛрди рдХрд╛ рдпреВрдпреВрдЖрдИрдбреА (рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ, рдпрд╛ рдореВрд▓, рдпрд╣рд╛рдВ рд╡реИрдХрд▓реНрдкрд┐рдХ) рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Btrfstune</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдкрдпреЛрдЧрд┐рддрд╛ </font><font style="vertical-align: inherit;">рдЬреЛ рдХрд┐ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">btrfs-progs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреИрдХреЗрдЬ рдХреЗ рд╕рд╛рде рдЖрддреА рд╣реИ, </font><b><font style="vertical-align: inherit;">рдорджрдж рдХрд░реЗрдЧреА</font></b><font style="vertical-align: inherit;"> :</font></font><br><br><pre> <code class="plaintext hljs">btrfstune -u /path/to/device</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдлрд┐рд░ рд╕реЗ: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">btrfstune</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , "рд╕реНрдорд╛рд░реНрдЯ" рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╣реЛрдиреЗ рдХреЗ рдирд╛рддреЗ, рди рдХреЗрд╡рд▓ рдбрд┐рд╕реНрдХ рдкрд░, рдмрд▓реНрдХрд┐ рдкреВрд░реЗ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдкрд░ UUID рдХреЛ рдмрджрд▓ рджреЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдЬрдм рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╕рднреА рдЙрдкрдХрд░рдгреЛрдВ рдкрд░ UUID рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рднреА рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдкрдврд╝реЗрдЧрд╛ред</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рдирд┐рд╖реНрдХрд░реНрд╖ рдХреЗ рдмрдЬрд╛рдп </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдЗрд╕ рд╕рдордп рдЖрдк рдХреБрдЫ рднреА рдирд╣реАрдВ рд╕рдордЭрддреЗ рд╣реИрдВ - рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рд╣реИред Btrfs nontrivial рд╣реИ рдФрд░ рддреБрд░рдВрдд рд╕реБрд╕рд╛рдЗрдб рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред рд╣рд░ рдмрд╛рд░ рдЬрдм рдореБрдЭреЗ рдпрд╣ рд▓рдЧрддрд╛ рдерд╛ рдХрд┐ рдЕрдм рдореИрдВ рдЙрд╕реЗ рд╕рдордЭ рдЧрдпрд╛ рд╣реВрдВ, рддреЛ рдЙрд╕рдиреЗ рдЖрд╢реНрдЪрд░реНрдпрдЪрдХрд┐рдд рдХрд░ рджрд┐рдпрд╛ рдФрд░ рдореМрдЬреВрджрд╛ рдЪреАрдЬреЛрдВ рдкрд░ рдкреБрдирд░реНрд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛ред рдореИрдВ рдпрд╣ рдирд╣реАрдВ рдХрд╣ рд╕рдХрддрд╛ рдХрд┐ рдореИрдВрдиреЗ рд╡рд░реНрддрдорд╛рди рд╕рдордп рдореЗрдВ рд╕рдм рдХреБрдЫ рд╕рдордЭрд╛ - рд▓рд┐рдЦрдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдореБрдЭреЗ рдХреБрдЫ рдирдпрд╛ рдорд┐рд▓рд╛, рд╣рд╛рд▓рд╛рдБрдХрд┐ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рд╣реА рдЕрдкрдиреЗ рдЕрдиреБрднрд╡ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд▓рд┐рдЦрд╛ рдерд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореИрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛рддреНрдордХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╢реИрд▓реА рд╕реЗ рдПрдХ рд╡рд╕реНрддреБ-рдЙрдиреНрдореБрдЦ рдХреЗ рд▓рд┐рдП рд╕рдВрдХреНрд░рдордг рдХреЗ рд╕рд╛рде btrfs рдореЗрдВ рдорд╣рд╛рд░рдд рд╣рд╛рд╕рд┐рд▓ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рддреБрд▓рдирд╛ рдХрд░реЗрдЧрд╛ред рдкрд╣рд▓реА рдЫрд╛рдк "рд╡рд╛рд╣, рдХрд┐рддрдиреА рднрдпрд╛рдирдХ рд╣реИ", рд▓реЗрдХрд┐рди рдлрд┐рд░ рдЖрдк рд▓рдЧрд╛рддрд╛рд░ рдХрдХреНрд╖рд╛рдУрдВ рдореЗрдВ рд▓рд┐рдкрдЯреЗ рд╣реБрдП рдкреНрд░рдХреНрд░рд┐рдпрд╛рддреНрдордХ рдХреЛрдб рд▓рд┐рдЦрдирд╛ рдЬрд╛рд░реА рд░рдЦрддреЗ рд╣реИрдВред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдЦ рдореЗрдВ, рдореИрдВрдиреЗ рдкрд╛рдиреА рдбрд╛рд▓рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдирд╣реАрдВ рдХреА - рдорд╛рдорд▓реЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рдм рдХреБрдЫ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдПред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдмрд╛рд╡рдЬреВрдж, рдпрд╣ рдХрд╛рдлреА рд╕реНрд╡реЗрдЪреНрдЫрд╛ рд╕реЗ рдирд┐рдХрд▓рд╛ред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЕрднреА рддрдХ рд╕рдм рдХреБрдЫ рдмрддрд╛рдирд╛ рд╕рдВрднрд╡ рдерд╛ - рдЖрдк рдЕрднреА рднреА btrfs рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓рд┐рдЦ рдФрд░ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдпрд╣ рд▓реЗрдЦ рд╕рд┐рд░реНрдл рд╣рд┐рдорд╢реИрд▓ рдХреЗ рдЯрд┐рдк рд╣реИред </font><font style="vertical-align: inherit;">рдмрд╣реБрдд рд╢реБрд░реБрдЖрдд рдЗрд╕рдХреЗ рджрд░реНрд╢рди рдХреЛ рд╕рдордЭрдирд╛ рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдЕрдм рдпрд╣ рдЦрддреНрдо рд╣реЛрдиреЗ рдХрд╛ рд╕рдордп рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдд рддрдХ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рджред </font><font style="vertical-align: inherit;">рдореБрдЭреЗ рдЖрд╢рд╛ рд╣реИ рдХрд┐ рдердХ рдирд╣реАрдВ рдЬрд╛рдПрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд▓рд┐рдЦреЗрдВ рдХрд┐ рдЖрдк рдФрд░ рдХреНрдпрд╛ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреИрдХрдЕрдк, рд╕рдЬреНрдЬрдиреЛрдВ рдмрдирд╛рдУред </font><font style="vertical-align: inherit;">рдФрд░ рдЙрдиреНрд╣реЗрдВ рдХрднреА рд╣рд╛рде рди рдЖрдиреЗ рджреЗрдВред</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi458250/">https://habr.com/ru/post/hi458250/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi458240/index.html">рдХреИрд╕реЗ рдХреГрддреНрд░рд┐рдо рдмреБрджреНрдзрд┐рдорддреНрддрд╛, рдбреНрд░реЛрди рдФрд░ рдХреИрдорд░реЗ рд╕рдбрд╝рдХреЛрдВ рдФрд░ рдкреБрд▓реЛрдВ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi458242/index.html">C ++ 20 рдореЗрдВ рдирдпрд╛ рд╕реНрдкреЗрд╕рд╢рд┐рдк рдСрдкрд░реЗрдЯрд░</a></li>
<li><a href="../hi458244/index.html">рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╡рд╛рдИ-рдлрд╛рдИ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЬреЛ рдХреБрдЫ рднреА рдЬрд╛рдирдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЙрд╕рдХреА рдПрдХ рдЕрдВрддрд╣реАрди рдФрд░ рд╣рд╛рд╕реНрдпрд╛рд╕реНрдкрдж рд╕реВрдЪреА</a></li>
<li><a href="../hi458246/index.html">рдЬреАрд╡рди рдореЗрдВ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рд╕рдВрдпреЛрдЧ, рдпрд╛ рдпрд╣ рдХреИрд╕реЗ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдЖрдкрдХреЛ рдПрдХ рдЯреНрд░реИрдХреНрдЯрд░ рдХрд╛рд░рдЦрд╛рдиреЗ рдореЗрдВ рдХреЗрдХ рдХреЗ рд╕рд╛рде рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛</a></li>
<li><a href="../hi458248/index.html">рд░реЙрдХреЗрдЯ рд╕рд╛рдЗрдВрд╕ рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рдХреЛрдб рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдПрдВ: C ++ 20 рдХрд╛ рд╕реНрдкреЗрд╕рд╢рд┐рдк рдСрдкрд░реЗрдЯрд░</a></li>
<li><a href="../hi458252/index.html">рд╕реБрдкрд░-рд▓реЙрдиреНрдЧ рд░реЗрдбрд┐рдпреЛ рдЯреЗрд▓реАрд╕реНрдХреЛрдк рдХрд╛ рдЧрдгрд┐рддреАрдп рдореЙрдбрд▓</a></li>
<li><a href="../hi458256/index.html">рдХреНрдпрд╛ рдпрд╣ рдмреНрд░реЗрдирд╡реЙрд╢ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдирд╣реАрдВ рд╣реИ?</a></li>
<li><a href="../hi458260/index.html">рдЬрд╛рд╡рд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП docker рдХреА рдЫрд╡рд┐рдпреЛрдВ рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рдиреЗ рдХрд╛ рджреВрд╕рд░рд╛ рддрд░реАрдХрд╛</a></li>
<li><a href="../hi458262/index.html">рдмреИрдардХ рдХрдХреНрд╖ рдХреЗ рдСрдирд▓рд╛рдЗрди рдбрд┐рдЬрд╛рдЗрдирд░ - рд╡реАрдбрд┐рдпреЛрдХрд╛рдВрдлреНрд░реЗрдВрд╕рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЗрд╖реНрдЯрддрдо рд╕рдорд╛рдзрд╛рди рдХрд╛ рдЪрдпрди</a></li>
<li><a href="../hi458264/index.html">рд╕реНрд╡-рджрд╕реНрддрд╛рд╡реЗрдЬ рдХреЛрдб рдХреЗ 10 рд╕рд┐рджреНрдзрд╛рдВрдд</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>