<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€ğŸ¤ ğŸ˜ ğŸš– Pembelajaran Mesin sebagai Asisten Pemantauan yang Cerdas ğŸ›Œ ğŸ•œ ğŸŒ¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai Habr! 

 Kredit Rumah adalah sistem besar dan sangat dinamis, yang terkadang sulit untuk dilacak. Untuk membantu karyawan mengikuti semua berita d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pembelajaran Mesin sebagai Asisten Pemantauan yang Cerdas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/homecredit/blog/479712/">  Hai Habr! <br><br>  Kredit Rumah adalah sistem besar dan sangat dinamis, yang terkadang sulit untuk dilacak.  Untuk membantu karyawan mengikuti semua berita dan perubahan serta mengikuti perkembangan di mana-mana, kami secara aktif memperkenalkan algoritma pembelajaran mesin.  Di Bank kami, obrolan bot sudah menjadi bagian dari pekerjaan operator, ulasan pelanggan dianalisis tidak hanya oleh para ahli, tetapi juga oleh algoritma cerdas untuk memproses bahasa alami. <br><br>  Hari ini saya akan memberi tahu Anda bagaimana kami membantu spesialis operasi layanan perbankan menyingkirkan kebutuhan untuk terus melihat dasbor sistem pemantauan, yaitu, mereka meminta pembelajaran mesin untuk membantu.  Itu yang kita dapat. <br><br><img src="https://habrastorage.org/webt/jd/w9/xp/jdw9xpbwninwrbz9e8p6heid8o0.png" alt="gambar"><br><a name="habracut"></a><br><h2>  Bagaimana cara kerja pemantauan manual? </h2><br>  Tempat kerja tipikal dari spesialis operasi terlihat seperti pada gambar di atas, dan ia menghabiskan sebagian besar waktunya melihat dashboard.  Setiap aktivitas mencurigakan dalam sistem, misalnya, ketika jaringan jatuh atau NullPointerException telah turun hujan, akan segera menarik perhatian - penyelidikan akan segera dimulai. <br><br>  Manusia bukan mesin.  Dia bisa terganggu, pergi makan malam, menjawab telepon.  Dan ketika jumlah grafik melebihi seratus, menjadi sulit untuk mengikat mereka semua bersama dan sampai ke dasar esensi. <br><br>  Masalah lain adalah bahwa ada keluarga kesalahan yang terjadi terus-menerus, tetapi tidak secara serius mempengaruhi perilaku sistem.  Sebagai contoh, microservice pihak ketiga jatuh dan dashboard terguncang, tetapi kenyataannya sistem ini keluar dari bahaya.  Sepintas, tidak selalu jelas bagaimana perilaku abnormal itu penting, dan apa yang ada di baliknya.  Untuk menetapkan alasan secara rinci, Anda harus pergi ke server dan mempelajari log secara menyeluruh.  Operasi semacam itu harus dilakukan puluhan kali sehari.  Mari kita setidaknya sebagian mempercayakan dia ke mobil. <br><br><h2>  Pembelajaran mesin sebagai asisten yang cerdas </h2><br>  Ada tiga sumber utama data: Zabbix, ElasticSearch, dan sistem pemantauan metrik bisnis internal.  Kami menggunakan Zabbix untuk memantau perangkat keras, jaringan, dan ketersediaan berbagai titik masuk ke dalam sistem.  Menggunakan ElasticSearch, parsing dan ekstrak log pesan.  Berbagai kesalahan, eksekusi, dan kueri digunakan sebagai metrik.  Akan tetapi, analis bisnis memantau kinerja pengguna: jumlah transfer, penjualan, dan aktivitas bisnis lainnya.  Data dikumpulkan pada frekuensi sekali per menit dan ditambahkan ke database.  Nah, data dikumpulkan, saatnya untuk menulis sekelompok jika untuk belajar mesin dalam pertempuran. <br><br>  Kami merumuskan masalah sebagai berikut: memiliki metrik sistem pada input, kami akan mengklasifikasikan status akhir sistem: reguler atau abnormal.  Dalam pengaturan ini, masalahnya cocok dengan paradigma belajar dengan seorang guru.  Ini berarti bahwa seluruh dataset pelatihan kami harus diberi label.  Dengan kata lain, setiap menit operasi sistem harus memiliki label 0 (perilaku normal) atau -1 (perilaku tidak normal). <br><br>  Dalam hidup, ternyata tidak semuanya semerah yang kita inginkan.  Sebagai aturan, tidak semua insiden dicatat di JIRA, banyak yang tersisa di pos dan tidak melampauinya, dan kadang-kadang batas waktu anomali kabur atau tidak akurat.  Ternyata membangun dataset berkualitas tinggi di bidang data historis bukanlah tugas sepele. <br><br>  Sementara data baru baru saja mulai ditata, mari kita coba memeras manfaat dari apa yang sudah kita miliki.  Untuk kasus di mana data tidak memiliki markup, metode pembelajaran tanpa guru digunakan.  Kami akan melanjutkan dari fakta bahwa sebagian besar waktu sistem bekerja dengan benar, tetapi kadang-kadang peristiwa yang tidak terduga terjadi: bug (di mana tanpa mereka), pangkalan jatuh, atau, misalnya, excavator Petr menabrak kabel pusat data.  Oleh karena itu, kami mengurangi tugas kami untuk mencari anomali, yaitu, mencari perilaku sistem baru (Deteksi Baru). <br>  Untuk melakukan ini, gunakan algoritma Hutan Terisolasi.  Itu sudah diterapkan di perpustakaan sklearn.  Kami akan menggunakan metrik dari sistem pemantauan sebagai fitur. <br><br><pre><code class="python hljs">clf = IsolationForest(behaviour=<span class="hljs-string"><span class="hljs-string">'new'</span></span>, max_samples=<span class="hljs-number"><span class="hljs-number">100</span></span>, random_state=rng, contamination=<span class="hljs-string"><span class="hljs-string">'auto'</span></span>)</code> </pre> <br>  Kami akan melatih Hutan Terisolasi pada data historis, dan kami akan menggunakan data baru yang sudah kami tandai untuk menilai kualitas.  Dengan demikian, tetap memilih model hyperparameters dan ukuran dataset untuk pelatihan. <br><br>  Sekarang data status, yang dikumpulkan setiap menit, dimasukkan ke model yang terlatih dan mendapatkan label 0 atau -1. <br><br><img src="https://habrastorage.org/webt/2j/wi/ly/2jwilytbwxdl-guvfftwujzbsjs.png" alt="gambar"><br><br>  Operator hanya dapat melacak satu jadwal.  Pada sumbu X - waktu, pada skor Y - anomali, yaitu, seberapa kuat model menganggap keadaan sistem pada menit ini tidak normal.  Jika nilai kecepatan telah melewati trashhold (yang model pilih sendiri), titik berwarna merah dan anomali dicatat. <br><br>  Sekarang kita belajar bahwa sistem beroperasi dalam mode yang tidak biasa atau bahwa situasi darurat terjadi hampir secara waktu nyata.  Ini sangat bagus, tetapi bagaimana dengan operator pada saat menerima sinyal tentang anomali?  Dasbor apa yang harus dilihat?  Mari kita coba membuka "kotak hitam" model kita dan memahami bagaimana itu membuat keputusan. <br><br><h2>  Menafsirkan model menggunakan LIME </h2><br><br>  Ada beberapa pendekatan berbeda tentang cara membuka kotak hitam model yang terlatih dan memahami apa yang ada dalam pikiran mesin.  Dengan regresi logistik atau pohon keputusan, semuanya jelas, tidak sulit untuk memahami atas dasar keputusan itu dibuat.  Dengan Hutan Terisolasi, segalanya menjadi lebih rumit.  Pertama, ada kecelakaan di dalam algoritma, dan kedua, itu adalah algoritma pembelajaran tanpa guru. <br><br>  Kandidat pertama adalah perpustakaan LIME, yang menggunakan model agnostik pendekatan, yang membantu untuk menafsirkan model apa pun, hal utama adalah bahwa output model memiliki distribusi probabilistik di antara kelas-kelas.  Oke, tentu saja, hasilnya bukan probabilitas, tetapi segera, tetapi mari kita coba menormalkannya dalam kisaran dari 0 hingga 1 dan memperlakukannya sebagai probabilitas.  Dengan demikian, kami dapat memberikan format input yang kompatibel dengan LIME. <br>  Cara LIME menafsirkan hasil itu mengecewakan.  Pertama, sebagai interpretasi, ada beberapa tanda paling penting pada output, dan, dalam kebanyakan kasus, hanya satu dari mereka yang benar-benar mencerminkan esensi keputusan, sisanya menambahkan suara.  Kelemahan kedua adalah bahwa interpretasinya tidak stabil dan sering menghasilkan daftar tanda yang berbeda dari lari ke lari.  Untuk mendapatkan hasil yang lebih stabil, Anda harus menjalankan interpretasi beberapa kali dan hasilnya rata-rata.  Saya tidak benar-benar ingin melakukan ini. <br><br><h2>  SHAP - jembatan dari orang ke mobil </h2><br>  Setelah itu, mata kami tertuju pada perpustakaan lain untuk interpretasi model - SHAP.  Ide di balik perpustakaan berasal dari teori permainan.  Perpustakaan juga memiliki visualisasi yang indah.  Setelah melihat contoh-contohnya, kami menyadari dengan frustrasi bahwa SHAP tidak dapat menafsirkan Hutan Terisolasi, dan kami benar-benar ingin!  Namun, di sisi lain, SHAP dengan percaya diri dapat membedah XGBoost.  Kami berpikir, bagaimana jika kami diajari untuk melakukan XGBoost hal yang sama yang dapat dilakukan oleh Hutan Terisolasi?  Untuk melakukan ini, kami mengambil seluruh dataset kami dan menandainya dengan Hutan Terisolasi.  Selain itu, sebagai target mereka tidak mengambil kelas, tetapi skor, yang ditugaskan ke Hutan Terisolasi.  Kami akan memprediksi dengan semua metrik kecepatan yang akan diberikan Hutan Terisolasi, tetapi hanya dengan XGBoot!  Tidak lebih cepat dikatakan daripada dilakukan.  Kami akan menjalankan dataset yang ditandai melalui XGBoost.  Dan sekarang, sekarang dia tahu bagaimana memprediksi kecepatan dengan cara yang sama seperti Hutan Terisolasi.  Hore, sekarang kita bisa menggunakan SHAP! <br><br>  Langkah pertama adalah membuat objek TreeExplainer, melewati model itu sendiri sebagai parameter.  Selanjutnya, nilai shap dihitung, yang memungkinkan kami untuk memberikan penjelasan tentang bagaimana model membuat keputusan ini atau itu. <br><br><pre> <code class="python hljs">explainer = shap.TreeExplainer(model) shap_values = explainer.shap_values(X)</code> </pre> <br>  SHAP memungkinkan Anda untuk menafsirkan model sebagai keseluruhan dan hasil untuk contoh-contoh spesifik.  Misalnya, Anda bisa mendapatkan penjelasan untuk contoh tertentu menggunakan metode force_plot (), yang menerima nilai input dan nilai-nilai contoh itu sendiri. <br><br><pre> <code class="python hljs">shap.force_plot(explainer.expected_value,shap_values[<span class="hljs-number"><span class="hljs-number">0</span></span>,:], X.iloc[<span class="hljs-number"><span class="hljs-number">0</span></span>,:])</code> </pre> <br>  Ternyata grafik berikut, yang menampilkan fitur mana dari model dan seberapa besar mempengaruhi keputusan. <br><br><img src="https://habrastorage.org/webt/k4/he/-u/k4he-ucq5b7zsyjnyc-rwbpmrtg.png" alt="gambar"><br><br><h2>  Kami membantu bisnis </h2><br>  Sekarang, mengetahui metrik mana yang memberikan kontribusi signifikan terhadap tingkat kelainan keseluruhan, menjadi mungkin untuk menentukan pada tingkat apa masalah muncul, dan yang paling penting apakah itu berdampak pada pengguna akhir sistem. <br><br><img src="https://habrastorage.org/webt/wp/rp/6g/wprp6gc-gzbjzotptcjvb6hlj9a.png" alt="gambar"><br><br>  Setiap kali anomali terdeteksi, daftar metrik yang memiliki dampak terbesar pada keputusan diperoleh.  Jika daftar menyertakan metrik yang secara langsung melacak indikator yang terkait dengan bisnis, ini disebutkan dalam peringatan dengan cara khusus, sehingga secara otomatis meningkatkan prioritas anomali. <br><br>  Ini hanya langkah pertama tetapi penting dalam memperkuat dan mengotomatisasi sistem pemantauan menggunakan pembelajaran mesin, yang secara signifikan dapat meningkatkan kecepatan mengidentifikasi penyebab dan pengaruh perilaku sistem yang abnormal. <br><br>  <b>Referensi:</b> <br><br>  <a href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html">scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html</a> <br>  <a href="https://github.com/marcotcr/lime">github.com/marcotcr/lime</a> <br>  <a href="https://github.com/slundberg/shap">github.com/slundberg/shap</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id479712/">https://habr.com/ru/post/id479712/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id479696/index.html">Beberapa kata tentang Alter Table, atau bagaimana tidak melakukannya</a></li>
<li><a href="../id479700/index.html">CIMON-2: (tidak) Kiamat, atau bagaimana IBM Watson naik ke atas awan</a></li>
<li><a href="../id479702/index.html">Pemanggang roti, Lingkaran saya dan Freelansim menjadi bagian dari Habr</a></li>
<li><a href="../id479704/index.html">Eskalasi hak istimewa dalam klien EA Origin Windows (CVE-2019-19247 dan CVE-2019-19248)</a></li>
<li><a href="../id479708/index.html">Posting tidak resmi tentang rebranding Kompetisi Habr +</a></li>
<li><a href="../id479714/index.html">Penyatuan komponen visual. Bagian 1. Gaya</a></li>
<li><a href="../id479716/index.html">SuperApp "pertama di dunia" lainnya</a></li>
<li><a href="../id479718/index.html">Membangun aplikasi lingkungan arduino menggunakan CI github</a></li>
<li><a href="../id479724/index.html">Tru hacker sudah berakhir</a></li>
<li><a href="../id479726/index.html">Vladimir alias wowik: "OpenStreetMap membutuhkan ide yang tidak dapat direalisasikan dalam sistem lain"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>