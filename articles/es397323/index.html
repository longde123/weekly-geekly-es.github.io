<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéë üë©üèª‚Äçüíº üç° Deja de poner el diodo üë©üèΩ‚Äçüöí ü§≥üèø ü§≥üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No, este no es otro "para siempre".
 
 Despu√©s de leer el art√≠culo sobre la protecci√≥n de los circuitos el√©ctricos de la polaridad de alimentaci√≥n ina...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Deja de poner el diodo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/397323/"><img src="https://habrastorage.org/files/85e/850/9c7/85e8509c767744c4b1d27f6729a89d8e.jpg" width="100%"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No, este no es otro "para siempre".</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Despu√©s de leer el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre la protecci√≥n de los circuitos el√©ctricos de la polaridad de alimentaci√≥n inadecuada utilizando un transistor de efecto de campo, record√© que durante mucho tiempo tuve un problema no resuelto de desconectar autom√°ticamente la bater√≠a del cargador cuando este √∫ltimo estaba desenergizado. Y ten√≠a curiosidad por saber si ser√≠a posible aplicar un enfoque similar en otro caso, donde desde tiempos inmemoriales tambi√©n se ha utilizado un diodo como elemento de puerta.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este art√≠culo es una gu√≠a t√≠pica de ciclismo, ya que </font><font style="vertical-align: inherit;">habla sobre el desarrollo de un circuito cuya funcionalidad se ha implementado durante mucho tiempo en millones de dispositivos terminados. </font><font style="vertical-align: inherit;">Por lo tanto, la solicitud no se aplica a este material, como a algo completamente utilitario. </font><font style="vertical-align: inherit;">M√°s bien, es solo una historia sobre c√≥mo nace un dispositivo electr√≥nico: desde la conciencia de la necesidad hasta un prototipo funcional a trav√©s de todos los obst√°culos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPor qu√© todo esto?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al realizar una copia de seguridad de una fuente de alimentaci√≥n de CC de bajo voltaje, la forma m√°s f√°cil de encender una bater√≠a de plomo-√°cido es usarla como un b√∫fer, justo en paralelo a la fuente de red, como se hac√≠a en los autom√≥viles antes de que tuvieran cerebros complejos. </font><font style="vertical-align: inherit;">La bater√≠a, aunque no funciona en el modo m√°s √≥ptimo, siempre est√° cargada y no requiere ning√∫n cambio de alimentaci√≥n al desconectar o encender la tensi√≥n de red en la entrada de la fuente de alimentaci√≥n. </font><font style="vertical-align: inherit;">M√°s detalladamente sobre algunos problemas de tal inclusi√≥n e intento de resolverlos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antecedentes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hace unos 20 a√±os, esa pregunta no estaba en la agenda. La raz√≥n de esto fue la circuiter√≠a de una fuente de alimentaci√≥n de red (o cargador) t√≠pica, que evit√≥ que la bater√≠a se descargara a su circuito de salida cuando se apag√≥ el voltaje de la red. Veamos el esquema de bloque m√°s simple con rectificaci√≥n de media onda:</font></font><br>
<br>
<img src="https://habrastorage.org/files/767/e02/81b/767e0281bfad4c189c50c699bbb0d166.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es obvio que el mismo diodo que rectifica el voltaje alterno del devanado de la red tambi√©n evitar√° que la bater√≠a se descargue al devanado secundario del transformador cuando se desconecta el voltaje de la red. El circuito puente de media onda del rectificador, a pesar de ser algo menos obvio, tiene exactamente las mismas propiedades. E incluso el uso de un estabilizador de voltaje param√©trico con un amplificador de corriente (como el extenso chip 7812 y sus an√°logos) no cambia la situaci√≥n: de </font></font><br>
<br>
<img src="https://habrastorage.org/files/506/3d8/a4c/5063d8a4cce84369a9aad480cb5ff5a5.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hecho, si observa el circuito simplificado de dicho estabilizador, queda claro que la uni√≥n del emisor del transistor de salida juega el papel de la misma puerta diodo, que se cierra cuando desaparece el voltaje en la salida del rectificador y mantiene intacta la carga de la bater√≠a.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, en los √∫ltimos a√±os, todo ha cambiado. </font><font style="vertical-align: inherit;">Las fuentes de alimentaci√≥n del transformador con estabilizaci√≥n param√©trica han sido reemplazadas por convertidores de voltaje de CA / CC de conmutaci√≥n m√°s compactos y econ√≥micos, que tienen una eficiencia y una relaci√≥n potencia / peso mucho m√°s altas. </font><font style="vertical-align: inherit;">Pero solo con todas las ventajas, estas fuentes de alimentaci√≥n mostraron un inconveniente: sus circuitos de salida tienen un circuito mucho m√°s complejo, que generalmente no proporciona protecci√≥n contra el flujo de corriente inversa del circuito secundario. </font><font style="vertical-align: inherit;">Como resultado, cuando se utiliza dicha fuente en un sistema de la forma "BP -&gt; bater√≠a de reserva -&gt; carga", cuando se desconecta el voltaje de la red, la bater√≠a comienza a descargarse intensamente al circuito de salida de la fuente de alimentaci√≥n.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La forma m√°s simple (diodo)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La soluci√≥n m√°s simple es usar un diodo con una barrera Schottky incluida en el espacio del cable positivo que conecta la fuente de alimentaci√≥n y la bater√≠a: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c9a/f25/c16/c9af25c1694d46e1bcf6d360bf5975ca.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, los principales problemas de esta soluci√≥n ya se han expresado en el art√≠culo anterior. </font><font style="vertical-align: inherit;">Adem√°s, este enfoque puede ser inaceptable por la raz√≥n de que para funcionar en modo buffer, una bater√≠a de plomo-√°cido de 12 voltios necesita un voltaje de al menos 13,6 voltios. </font><font style="vertical-align: inherit;">Y casi la mitad de un voltio que cae sobre el diodo puede hacer que este voltaje sea banal inalcanzable en combinaci√≥n con una fuente de alimentaci√≥n existente (solo mi caso). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo esto nos hace buscar formas alternativas de conmutaci√≥n autom√°tica, que deber√≠an tener las siguientes propiedades:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peque√±a ca√≠da de voltaje directo cuando est√° encendido.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La capacidad de resistir sin calentamiento significativo en el estado encendido la corriente continua consumida por la fuente de alimentaci√≥n por la carga y la bater√≠a de amortiguaci√≥n.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alta ca√≠da de tensi√≥n inversa y bajo autoconsumo en estado apagado.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normalmente apagado, de modo que cuando una bater√≠a cargada se conecta al sistema inicialmente desenergizado, su descarga no comienza.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transici√≥n autom√°tica al estado encendido cuando se aplica la tensi√≥n de red, independientemente de la presencia y el nivel de carga de la bater√≠a.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La transici√≥n autom√°tica m√°s r√°pida al estado apagado cuando falla la tensi√≥n de red.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el diodo fuera un dispositivo ideal, cumplir√≠a todas estas condiciones sin problemas, pero la dura realidad arroja dudas sobre los puntos 1 y 2.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soluci√≥n ingenua (rel√© DC)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al analizar los requisitos, cualquiera que est√© al menos un poco "en el tema" se le ocurrir√° la idea de usar un rel√© electromagn√©tico para este prop√≥sito, que puede cerrar f√≠sicamente los contactos utilizando el campo magn√©tico creado por la corriente de control en el devanado. Y, probablemente, incluso arroja algo como esto en una servilleta:</font></font><br>
<br>
<img src="https://habrastorage.org/files/c40/3b5/f30/c403b5f3049f427f923f8f4f04dd45a8.jpg" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este circuito, los contactos de rel√© normalmente abiertos se cierran solo cuando la corriente fluye a trav√©s del devanado conectado a la salida de la fuente de alimentaci√≥n. Sin embargo, si revisa la lista de requisitos, resulta que este circuito no cumple con el punto 6. Despu√©s de todo, si los contactos del rel√© se cerraron una vez, la falla de energ√≠a no conducir√° a su apertura debido al devanado (y con √©l todo el circuito de salida de la fuente de alimentaci√≥n) permanece conectado a la bater√≠a a trav√©s de los mismos contactos! Hay un caso t√≠pico de retroalimentaci√≥n positiva, cuando el circuito de control tiene una conexi√≥n directa con el ejecutivo y, como resultado, el sistema adquiere las propiedades de un disparador biestable.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, un enfoque tan ingenuo no es una soluci√≥n al problema. </font><font style="vertical-align: inherit;">Adem√°s, si analizamos la situaci√≥n actual de manera l√≥gica, podemos llegar f√°cilmente a la conclusi√≥n de que en el espacio "BP -&gt; bater√≠a de amortiguaci√≥n" en condiciones ideales, simplemente no puede haber otra soluci√≥n que una v√°lvula que conduzca la corriente en una direcci√≥n. </font><font style="vertical-align: inherit;">De hecho, si no utilizamos ninguna se√±al de control externa, hagamos lo que hagamos en este punto del circuito, cualquiera de nuestros elementos de conmutaci√≥n, una vez que se enciende, har√° que la electricidad generada por la bater√≠a sea indistinguible de la electricidad creada por la fuente de alimentaci√≥n.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rotonda (rel√© de CA)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de darse cuenta de todos los problemas del p√°rrafo anterior, a la persona ‚Äútonta‚Äù generalmente se le ocurre la nueva idea de utilizar la fuente de alimentaci√≥n como una v√°lvula conductora unidireccional. Por que no Despu√©s de todo, si la fuente de alimentaci√≥n no es un dispositivo reversible, y el voltaje de la bater√≠a suministrado a su salida no crea 220 voltios en la entrada de CA (como sucede en el 100% de los casos de circuitos reales), entonces esta diferencia puede usarse como una se√±al de control para el elemento de conmutaci√≥n:</font></font><br>
<br>
<a href="" rel="nofollow"><img src="https://habrastorage.org/files/f55/02f/dee/f5502fdeea514274bd63bd0da492e422.png" width="100%"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bingo! Se cumplen todos los puntos de los requisitos y lo √∫nico que se necesita para esto es un rel√© que pueda cerrar los contactos cuando se le aplica la tensi√≥n de red. Puede ser un rel√© de CA especial, dise√±ado para tensi√≥n de red. O un rel√© ordinario con su propia mini-fuente de alimentaci√≥n (aqu√≠ es suficiente cualquier circuito reductor sin transformador con un rectificador simple). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ser√≠a posible celebrar la victoria, pero no me gust√≥ esta decisi√≥n. En primer lugar, debe conectar algo directamente a la red, lo que no es un zumbido en t√©rminos de seguridad. En segundo lugar, el hecho de que este rel√© debe ser conmutado por corrientes significativas, probablemente hasta decenas de amperios, y esto hace que todo el dise√±o no sea tan trivial y compacto como podr√≠a haber parecido inicialmente. Y en tercer lugar, ¬øqu√© pasa con un transistor de efecto de campo tan conveniente?</font></font><br>
<br>
<h3>  (  +   )</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La b√∫squeda de una soluci√≥n m√°s elegante al problema me llev√≥ al hecho de que una bater√≠a que funciona en modo buffer a un voltaje de aproximadamente 13.8 voltios sin "recarga" externa pierde r√°pidamente su voltaje original incluso en ausencia de una carga. Si comienza a descargarse en la PSU, en el primer minuto pierde al menos 0.1 voltios, lo cual es m√°s que suficiente para una fijaci√≥n confiable por un simple comparador. En general, la idea es esta: el comparador controla la puerta del transistor de efecto de campo de conmutaci√≥n. Una de las entradas del comparador est√° conectada a una fuente de voltaje estable. La segunda entrada est√° conectada al divisor de voltaje de la fuente de alimentaci√≥n. Adem√°s, el coeficiente de divisi√≥n se selecciona de modo que el voltaje en la salida del divisor con el PS encendido sea aproximadamente 0.1..0.2 voltios m√°s alto que el voltaje de la fuente estabilizada. Como resultadocuando se enciende la fuente de alimentaci√≥n, el voltaje del divisor siempre prevalecer√°, pero cuando la red se desactiva, a medida que el voltaje de la bater√≠a cae, disminuir√° en proporci√≥n a esta ca√≠da. Despu√©s de un tiempo, el voltaje en la salida del divisor ser√° menor que el voltaje del estabilizador y el comparador interrumpir√° el circuito utilizando un transistor de efecto de campo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un diagrama aproximado de dicho dispositivo:</font></font><br>
<br>
<img src="https://habrastorage.org/files/2b2/99a/20a/2b299a20a8f246ffa44fff380e7e9db9.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, la entrada directa del comparador est√° conectada a la fuente de voltaje estable. El voltaje de esta fuente, en principio, no es importante, lo principal es que est√° dentro de los voltajes de entrada permisibles del comparador, pero es conveniente cuando es aproximadamente la mitad del voltaje de la bater√≠a, es decir, aproximadamente 6 voltios. La entrada inversa del comparador est√° conectada al divisor de voltaje de la fuente de alimentaci√≥n, y la salida a la puerta del transistor de conmutaci√≥n. Cuando el voltaje en la entrada inversa excede el de la entrada directa, la salida del comparador conecta la puerta del transistor de efecto de campo a tierra, como resultado de lo cual el transistor abre y cierra el circuito. Despu√©s de que se desconecta la red el√©ctrica, despu√©s de un tiempo el voltaje de la bater√≠a disminuye, junto con el voltaje en la entrada inversa del comparador, y cuando resulta estar por debajo del nivel en la entrada directa,el comparador "arranca" la puerta del transistor del suelo y, por lo tanto, rompe el circuito. En el futuro, cuando la fuente de alimentaci√≥n vuelva a "cobrar vida", el voltaje en la entrada inversa aumentar√° instant√°neamente a la normalidad y el transistor se abrir√° nuevamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la implementaci√≥n pr√°ctica de este circuito, se utiliz√≥ mi chip LM393 existente. Es muy barato (menos de diez centavos en el comercio minorista), pero al mismo tiempo, un comparador doble es econ√≥mico y tiene caracter√≠sticas bastante buenas. Permite una fuente de alimentaci√≥n de hasta 36 voltios, tiene un coeficiente de transmisi√≥n de al menos 50 V / mV y sus entradas se caracterizan por una impedancia bastante alta. El primero de los potentes MOSFET de canal P FDD6685 disponibles comercialmente se tom√≥ como un transistor de conmutaci√≥n. Despu√©s de varios experimentos, se dedujo el siguiente diagrama pr√°ctico del cambio:</font></font><br>
<br>
<img src="https://habrastorage.org/files/68f/696/c06/68f696c06fe140a0a9526e4028d3cc2e.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En √©l, la fuente abstracta de voltaje estable se reemplaza por un estabilizador param√©trico muy real de la resistencia R2 y el diodo zener D1, y el divisor se basa en una resistencia de corte R1, que le permite ajustar el coeficiente de divisi√≥n al valor deseado. Dado que las entradas del comparador tienen una impedancia muy significativa, la resistencia de amortiguaci√≥n en el estabilizador puede ser superior a cien kOhm, lo que minimiza la corriente de fuga y, por lo tanto, el consumo total del dispositivo. El valor de la resistencia de sintonizaci√≥n no es cr√≠tico en absoluto y sin ninguna consecuencia para la operabilidad del circuito se puede seleccionar en el rango de diez a varios cientos de kOhm. Debido al hecho de que el circuito de salida del comparador LM393 est√° construido de acuerdo con un circuito de colector abierto, tambi√©n se requiere una resistencia de carga R3 para su finalizaci√≥n funcional.resistencia de varios cientos de kOhm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El ajuste del dispositivo se reduce a establecer la posici√≥n del control deslizante de la resistencia del trimmer en una posici√≥n en la que el voltaje en la pata 2 del microcircuito excede el de la pata 3 en aproximadamente 0,1 ... 0,2 voltios. Para el ajuste, es mejor no subir a los circuitos de alta impedancia con un mult√≠metro, sino simplemente instalando el motor de resistencia en la posici√≥n inferior (seg√∫n el diagrama), conecte la unidad de fuente de alimentaci√≥n (todav√≠a no conectamos la bater√≠a) y, midiendo el voltaje en el pin 1 del microcircuito, mueva el contacto de la resistencia hacia arriba. Tan pronto como el voltaje cae a cero, el valor predeterminado puede considerarse completo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No intente apagarlo con una diferencia de voltaje m√≠nima, ya que esto inevitablemente conducir√° a un funcionamiento incorrecto del circuito. En condiciones reales, por el contrario, hay que subestimar espec√≠ficamente la sensibilidad. El hecho es que cuando la carga se enciende, el voltaje en la entrada del circuito inevitablemente se hunde debido a la estabilizaci√≥n no ideal en la fuente de alimentaci√≥n y la resistencia final de los cables de conexi√≥n. Esto puede llevar al hecho de que un dispositivo demasiado sensible considerar√° una reducci√≥n tal como apagar la fuente de alimentaci√≥n y romper el circuito. Como resultado, la fuente de alimentaci√≥n se conectar√° solo cuando no haya carga, y el resto del tiempo la bater√≠a tendr√° que funcionar. Sin embargo, cuando la bater√≠a est√° ligeramente descargada, el diodo interno del transistor de efecto de campo se abre y la corriente de la fuente de alimentaci√≥n comienza a fluir hacia el circuito a trav√©s de √©l. Pero esto conducir√° al sobrecalentamiento del transistor y aque la bater√≠a funcionar√° en un modo de baja carga prolongada. En general, la calibraci√≥n final debe realizarse bajo carga real, controlando el voltaje en el pin 1 del microcircuito y, como resultado, dejando un peque√±o margen de fiabilidad.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado de pruebas pr√°cticas, se obtuvieron dichos resultados. La resistencia en estado abierto corresponde a la resistencia de paso desde la hoja de datos al transistor. En estado cerrado, la corriente parasitaria en el circuito secundario de la fuente de alimentaci√≥n no se pudo medir debido a su insignificancia. El consumo de corriente en modo bater√≠a fue de 1.1 mA, y casi el 100% consiste en la corriente consumida por el chip. Despu√©s de la calibraci√≥n bajo carga m√°xima, el tiempo de respuesta sin carga sali√≥ casi 15 minutos. Se necesitaba mucho tiempo para que mi bater√≠a se descargue al voltaje que proviene de la fuente de alimentaci√≥n al dispositivo bajo carga completa. Es cierto que el apagado a plena carga ocurre casi de inmediato (menos de 10 segundos), pero este tiempo depende de la capacidad, la carga y la "salud" general de la bater√≠a.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las desventajas significativas de este esquema son la relativa complejidad de la calibraci√≥n y la necesidad de soportar las posibles p√©rdidas de energ√≠a de la bater√≠a para un funcionamiento adecuado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El √∫ltimo inconveniente no dio descanso y despu√©s de algunas deliberaciones me llev√≥ a pensar no medir el voltaje de la bater√≠a, sino directamente la direcci√≥n de la corriente en el circuito.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La segunda soluci√≥n (transistor de efecto de campo + medidor de direcci√≥n de corriente)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para medir la direcci√≥n de la corriente, se podr√≠a usar un sensor complicado. Por ejemplo, un sensor Hall que detecta el vector de campo magn√©tico alrededor de un conductor y permite no solo romper el circuito para determinar la direcci√≥n, sino tambi√©n la intensidad de la corriente. Sin embargo, debido a la falta de dicho sensor (y la experiencia con dispositivos similares), se decidi√≥ tratar de medir el signo de la ca√≠da de voltaje a trav√©s del canal del transistor de efecto de campo. Por supuesto, en estado abierto, la resistencia del canal se mide en cent√©simas de ohmio (por el bien de esto y de la idea completa), pero, sin embargo, es bastante finita y puedes intentar jugar esto. Un argumento adicional a favor de tal soluci√≥n es la ausencia de la necesidad de un ajuste fino. Solo mediremos la polaridad de la ca√≠da de voltaje, y no su valor absoluto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seg√∫n los c√°lculos m√°s pesimistas, cuando la resistencia de canal abierto del transistor FDD6685 es de aproximadamente 14 mOhm y la sensibilidad diferencial del comparador LM393 de la columna "min" es de 50 V / mV, tendremos un rango de voltaje completo de 12 voltios en la salida del comparador a una corriente a trav√©s del transistor de poco m√°s de 17 mA. Como puede ver, el valor es bastante real. En la pr√°ctica, deber√≠a ser incluso un orden de magnitud menor, porque la sensibilidad t√≠pica de nuestro comparador es de 200 V / mV, la resistencia del canal del transistor en condiciones reales, teniendo en cuenta la instalaci√≥n, es poco probable que sea inferior a 25 mOhm, y la oscilaci√≥n del voltaje de control en la puerta no puede exceder tres volt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una implementaci√≥n abstracta se ver√° as√≠:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e8d/839/2a7/e8d8392a7e2d46869f8a78e746ec3f55.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠, las entradas del comparador est√°n conectadas directamente al bus positivo en lados opuestos del transistor de efecto de campo. Cuando la corriente lo atraviesa en diferentes direcciones, los voltajes en las entradas del comparador inevitablemente diferir√°n, y el signo de la diferencia corresponder√° a la direcci√≥n de la corriente y la magnitud a su fuerza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primera vista, el circuito es extremadamente simple, pero aqu√≠ hay un problema con la potencia del comparador. Consiste en el hecho de que no podemos alimentar el chip directamente desde los mismos circuitos que deber√≠a medir. Seg√∫n la hoja de datos, el voltaje m√°ximo en las entradas del LM393 no debe ser m√°s alto que el voltaje de suministro menos dos voltios. Si se excede este umbral, el comparador deja de notar la diferencia de voltaje en las entradas directas e inversas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay dos posibles soluciones al problema. El primero, obvio, es aumentar el voltaje de suministro del comparador. El segundo que viene a la mente, si piensa un poco, es reducir igualmente los voltajes de control con la ayuda de dos divisores. As√≠ es como podr√≠a verse:</font></font><br>
<br>
<img src="https://habrastorage.org/files/19d/834/275/19d834275a1047cf8993fae1daac6c2a.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este esquema cautiva con su simplicidad y concisi√≥n, pero en el mundo real, desafortunadamente, no es factible. El hecho es que estamos tratando con una diferencia de voltaje entre las entradas del comparador de solo unos pocos milivoltios. Al mismo tiempo, la propagaci√≥n de las resistencias incluso de la clase de precisi√≥n m√°s alta es 0.1%. Con una relaci√≥n de divisi√≥n m√≠nima aceptable de 2 a 8 y una impedancia total razonable del divisor de 10 kOhm, el error de medici√≥n alcanzar√° 3 mV, que es varias veces mayor que la ca√≠da de voltaje a trav√©s del transistor a una corriente de 17 mA. El uso de un ‚Äúrecortador‚Äù en uno de los divisores desaparece por la misma raz√≥n, porque no es posible seleccionar su resistencia con una precisi√≥n de m√°s del 0.01% incluso cuando se usa una resistencia de precisi√≥n de m√∫ltiples vueltas (adem√°s, no se olvide de la deriva del tiempo y la temperatura). Adem√°s, como ya se mencion√≥ anteriormente,te√≥ricamente, este circuito no deber√≠a necesitar ser calibrado en absoluto debido a su naturaleza casi "digital".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con base en lo anterior, en la pr√°ctica solo hay una opci√≥n para aumentar el voltaje de suministro. En principio, este no es un problema, dado que hay una gran cantidad de microcircuitos especializados que permiten usar solo unas pocas partes para construir un convertidor escalonado para el voltaje deseado. Pero entonces la complejidad del dispositivo y su consumo casi se duplicar√°n, lo que me gustar√≠a evitar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay varias formas de construir un convertidor de refuerzo de baja potencia. Por ejemplo, la mayor√≠a de los convertidores integrados utilizan el voltaje de autoinducci√≥n de un peque√±o inductor conectado en serie con un interruptor de "alimentaci√≥n" ubicado directamente en el chip. Este enfoque se justifica con una conversi√≥n relativamente potente, por ejemplo, para alimentar un LED con una corriente de decenas de miliamperios. En nuestro caso, esto es claramente redundante, ya que debe proporcionar una corriente de solo aproximadamente un miliamperio. Somos mucho m√°s adecuados para duplicar el voltaje de CC utilizando una tecla de control, dos condensadores y dos diodos. El principio de su acci√≥n puede ser entendido por el esquema:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e1c/fcc/ed8/e1cfcced88fe4ee58d7e8a4ce34c5866.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el primer momento, cuando el transistor est√° cerrado, no sucede nada interesante. La corriente del bus de potencia a trav√©s de los diodos D1 y D2 va a la salida, como resultado de lo cual se establece incluso un voltaje ligeramente menor en el condensador C2 que el que se suministra a la entrada. Sin embargo, si el transistor se abre, el condensador C1 a trav√©s del diodo D1 y el transistor se cargar√°n casi a la tensi√≥n de alimentaci√≥n (menos la ca√≠da directa en D1 y el transistor). Ahora, si cerramos el transistor nuevamente, resulta que el capacitor cargado C1 est√° conectado en serie con la resistencia R1 y la fuente de energ√≠a. Como resultado, su voltaje se sumar√° al voltaje de la fuente de energ√≠a y, despu√©s de sufrir algunas p√©rdidas en la resistencia R1 y el diodo D2, cargar√° C2 a casi el doble de Uin. Despu√©s de eso, todo el ciclo puede comenzar de nuevo. Como resultado, si el transistor cambia regularmente y la extracci√≥n de energ√≠a de C2 no es demasiado grande,a partir de 12 voltios, resulta aproximadamente 20 al costo de solo cinco partes (sin contar la clave), entre las cuales no hay un solo elemento de devanado o dimensional.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para implementar dicho duplicador, adem√°s de los elementos ya enumerados, necesitamos un generador de oscilaci√≥n y la propia clave. Puede parecer muchos detalles, pero en realidad no lo es, porque casi todo lo que necesitamos ya est√° en su lugar. ¬øEspero que no hayas olvidado que el LM393 contiene dos comparadores? ¬øY qu√© hemos usado hasta ahora solo uno de ellos? Despu√©s de todo, el comparador tambi√©n es un amplificador, lo que significa que si lo cubre con retroalimentaci√≥n positiva en corriente alterna, se convertir√° en un generador. Al mismo tiempo, su transistor de salida se abrir√° y cerrar√° regularmente, desempe√±ando perfectamente el papel de una tecla duplicadora. Esto es lo que obtenemos cuando intentamos implementar nuestro plan:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e1b/754/479/e1b754479515490b8a8adc85ae6d548e.png" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio, la idea de suministrar voltaje al generador, que en realidad produce durante la operaci√≥n, puede parecer bastante salvaje. Sin embargo, si observa de cerca, puede ver que inicialmente el generador recibe energ√≠a a trav√©s de los diodos D1 y D2, que es suficiente para que arranque. Despu√©s de que se produce la generaci√≥n, el duplicador comienza a funcionar y el voltaje de suministro aumenta gradualmente a unos 20 voltios. Este proceso no lleva m√°s de un segundo, despu√©s de lo cual el generador, y con √©l el primer comparador, reciben energ√≠a que excede significativamente el voltaje de funcionamiento del circuito. Esto nos da la oportunidad de medir directamente la diferencia de voltaje en la fuente y el drenaje del transistor de efecto de campo y lograr nuestro objetivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ est√° el diagrama final de nuestro interruptor:</font></font><br>
<br>
<a href="" rel="nofollow"><img src="https://habrastorage.org/files/9ec/c4a/dea/9ecc4adeafc54bd09515fd0997f85cb0.png" width="100%"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No hay nada que explicar, todo se describe anteriormente. Como puede ver, el dispositivo no contiene ning√∫n elemento de ajuste y, cuando se ensambla correctamente, comienza a funcionar de inmediato. Adem√°s de los elementos activos ya conocidos, solo se agregaron dos diodos, que se pueden usar con cualquier diodo de baja potencia con un voltaje inverso m√°ximo de al menos 25 voltios y una corriente directa m√°xima de 10 mA (por ejemplo, el extendido 1N4148, que se puede quitar de una placa base antigua). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este circuito se prob√≥ en una placa de pruebas donde demostr√≥ ser completamente operativo. Los par√°metros obtenidos son totalmente consistentes con las expectativas: conmutaci√≥n instant√°nea en ambas direcciones, ausencia de una reacci√≥n inadecuada cuando se conecta la carga, el consumo de corriente de la bater√≠a es de solo 2.1 mA.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n se incluye una de las opciones de dise√±o de PCB. </font><font style="vertical-align: inherit;">300 ppp, vista desde el costado de las partes (por lo tanto, debe imprimir en una imagen reflejada). </font><font style="vertical-align: inherit;">El transistor de efecto de campo est√° montado en el lado de los conductores. </font><font style="vertical-align: inherit;">
El dispositivo ensamblado, completamente listo para la instalaci√≥n: lo </font><font style="vertical-align: inherit;">
cri√© a la antigua usanza, por lo que result√≥ un poco torcido, pero sin embargo, el dispositivo ha estado funcionando correctamente durante varios d√≠as en un circuito con una corriente de hasta 15 amperios sin signos de sobrecalentamiento. </font><a href="" rel="nofollow"><font style="vertical-align: inherit;">Archivo con esquemas y archivos de cableado para EAGLE</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Gracias por su atencion</font></font><br>
<br>
<a href="" rel="nofollow"><img src="https://habrastorage.org/files/7b2/bbe/b91/7b2bbeb91acd4fecb4d5b83266fa11dc.png"></a> <a href="" rel="nofollow"><img src="https://habrastorage.org/files/496/413/125/496413125f7149b7b8b324975ad16a4a.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="" rel="nofollow"><img src="https://habrastorage.org/files/e10/385/07d/e1038507d5004b4baa4a43575f3295a9.jpg"></a> <a href="" rel="nofollow"><img src="https://habrastorage.org/files/75c/cf6/1f3/75ccf61f30804dcf8bac01df97612821.jpg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es397323/">https://habr.com/ru/post/es397323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es397313/index.html">Solo agrega agua. Un peque√±o aditivo H‚ÇÇO aumenta la potencia del motor de combusti√≥n interna y ahorra combustible</a></li>
<li><a href="../es397315/index.html">Iluminaci√≥n de escalera autom√°tica</a></li>
<li><a href="../es397317/index.html">Reacondicionado de f√°brica: compramos productos electr√≥nicos a bajo precio y con una garant√≠a</a></li>
<li><a href="../es397319/index.html">Internet de las cosas: LoRa vs. UNB. Parte 2: negocios</a></li>
<li><a href="../es397321/index.html">Sony Xperia XZ y Xperia X Compact presentados oficialmente</a></li>
<li><a href="../es397325/index.html">Propietario del foro de computadoras Ru-Board asesinado</a></li>
<li><a href="../es397327/index.html">WaveNet: discurso humano sintetizado por computadora</a></li>
<li><a href="../es397329/index.html">¬øPor qu√© la piel se arruga en el agua?</a></li>
<li><a href="../es397331/index.html">iBrain ya est√° aqu√≠, y ya en tu tel√©fono</a></li>
<li><a href="../es397333/index.html">La regla de los cinco segundos todav√≠a no funciona.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>