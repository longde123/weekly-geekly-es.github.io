<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äçüé® üêê üßíüèΩ Firewalls de aplicativos da Web ‚ùï ü§± üëà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Firewall de aplicativo da Web 
 Os firewalls de aplicativos da Web (WAFs) s√£o um tipo de sistema de detec√ß√£o e preven√ß√£o de intrus√µes e podem ser uma ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Firewalls de aplicativos da Web</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446518/"><h4>  <font color="#cc0000">Firewall de aplicativo da Web</font> </h4><br>  Os firewalls de aplicativos da Web (WAFs) s√£o um tipo de sistema de detec√ß√£o e preven√ß√£o de intrus√µes e podem ser uma solu√ß√£o de hardware ou software.  Ele foi projetado especificamente para inspecionar HTTP (s) e analisar as solicita√ß√µes GET e POST usando a terr√≠vel l√≥gica de detec√ß√£o explicada abaixo.  O software de firewall de aplicativos da Web geralmente est√° dispon√≠vel como um plug-in de servidor da Web. <br><br>  A WAF tornou-se extremamente popular e v√°rias empresas oferecem uma variedade de solu√ß√µes em diferentes categorias de pre√ßos, desde pequenas empresas a grandes corpora√ß√µes.  O WAF moderno √© popular porque possui uma ampla variedade de tarefas cobertas, para que os desenvolvedores de aplicativos da Web possam confiar nele para v√°rios problemas de seguran√ßa, mas supondo que essa solu√ß√£o n√£o possa garantir prote√ß√£o absoluta.  Um fluxo de trabalho WAF b√°sico √© mostrado abaixo. <br><br><img src="https://habrastorage.org/webt/cr/ld/1a/crld1a6qlyif0we0sfqrhjvkjzc.png"><br><br>  Sua principal fun√ß√£o √© a detec√ß√£o e o bloqueio de consultas nas quais, de acordo com a an√°lise WAF, existem algumas anomalias ou um vetor de ataque √© rastreado.  Essa an√°lise n√£o deve dificultar a intera√ß√£o de usu√°rios leg√≠timos com um aplicativo da Web, mas, ao mesmo tempo, deve detectar com precis√£o e pontualidade qualquer tentativa de ataque.  Para implementar essa funcionalidade, os desenvolvedores do WAF geralmente usam express√µes regulares, tokens, an√°lise comportamental, an√°lise de reputa√ß√£o e aprendizado de m√°quina e, geralmente, todas essas tecnologias s√£o usadas juntas. <br><br><img src="https://habrastorage.org/webt/z-/jz/by/z-jzbyv0m-cblumcvxe-cow6z8o.png"><br><br>  Al√©m disso, o WAF tamb√©m pode fornecer outras funcionalidades: prote√ß√£o contra DDoS, bloqueio de endere√ßos IP de atacantes, rastreamento de endere√ßos IP suspeitos, adi√ß√£o de um sinalizador somente HTTP ao cookie ou adi√ß√£o da funcionalidade de tokens CSRF.  Cada WAF √© individual e possui um arranjo interno exclusivo, mas existem alguns m√©todos t√≠picos usados ‚Äã‚Äãpara an√°lise. <br><a name="habracut"></a><br><h3>  <font color="#cc0000">Express√£o regular</font> </h3><br>  A maioria dos WAFs existentes √© baseada em regras baseadas em express√µes regulares.  Para cri√°-los, alguns conjuntos conhecidos de ataques s√£o estudados pelo desenvolvedor do WAF e, consequentemente, determinadas constru√ß√µes sint√°ticas importantes s√£o determinadas, cuja presen√ßa pode ser reivindicada para executar o ataque.  Com base nos resultados obtidos, s√£o escritas express√µes regulares que podem encontrar essas constru√ß√µes.  Por exemplo, analisando cabe√ßalhos HTTP como Server: Apache Tomcat / 7.0.x, o WAF pode bloquear uma resposta e, assim, impedir o vazamento de informa√ß√µes do servidor ou, alternativamente, gerar um alerta. <br><br>  No entanto, essa abordagem tem v√°rias desvantagens.  O alcance da aplicabilidade de uma express√£o regular √© limitado a uma consulta e, muitas vezes, at√© a um par√¢metro de consulta espec√≠fico, o que obviamente reduz a efic√°cia de tais solicita√ß√µes.  Em segundo lugar, a sintaxe das express√µes regulares, a l√≥gica complexa dos protocolos de texto, permitindo a substitui√ß√£o de constru√ß√µes equivalentes e o uso de diferentes representa√ß√µes de s√≠mbolos, levam a erros ao criar essas regras.  A tabela abaixo mostra as t√©cnicas mais comuns de desvio. <br><br><img src="https://habrastorage.org/webt/nt/fm/0x/ntfm0xcoifqns397zknmrtxjj04.png"><br><br>  Ofusca√ß√£o de SQL.  √â poss√≠vel alterar a express√£o para que, usando a sintaxe do idioma, ele possa se livrar de espa√ßos.  Por exemplo, no SQL, voc√™ pode usar colchetes e estrelas: <br><blockquote>  s / * / e / ** // * e * // * / l / * le * c * // * / ect ~~ / ** / 1 ou / id = 1 + un / ** / ion + sel / ** / ect + 1,2,3-- </blockquote><br>  O outro √© baseado no uso de codifica√ß√µes diferentes, de forma que o WAF n√£o decodifique os dados em determinados locais.  Por exemplo, ap√≥s substituir um caractere por seu c√≥digo de URL no processo de normaliza√ß√£o, o WAF n√£o poder√° entender que √© necess√°rio decodificar os dados e ignorar a solicita√ß√£o, enquanto o mesmo par√¢metro ser√° aceito e decodificado pela web com sucesso. aplica√ß√£o. <br><br><img src="https://habrastorage.org/webt/9f/fs/fj/9ffsfjkccp4a6iqvbj7ppes996y.png"><br><br>  Procure constru√ß√µes sint√°ticas equivalentes at√≠picas.  Esse m√©todo √© usado para encontrar uma maneira de opera√ß√£o que n√£o p√¥de ser considerada pelos desenvolvedores do WAF ou o vetor estava ausente na amostra do estudo para aprendizado de m√°quina.  Uma dessas constru√ß√µes √© a representa√ß√£o de c√≥digo Javascript n√£o alfanum√©rico, um exemplo disso √© mostrado abaixo. <br><br><img src="https://habrastorage.org/webt/1-/os/-h/1-os-hs9dwq5_f01ici2-odymts.png"><br><cut><br><h3>  <font color="#cc0000">M√©todo de cria√ß√£o de pontua√ß√£o</font> </h3><br>  Essa abordagem n√£o detecta ataques, mas complementa outros m√©todos, tornando-os mais precisos e flex√≠veis.  O motivo da introdu√ß√£o da ferramenta √© que a presen√ßa na consulta de algum design suspeito √© insuficiente para detectar um ataque ou, pelo contr√°rio, pode levar a um grande n√∫mero de erros falso-positivos.  Esse problema √© resolvido com a introdu√ß√£o de um sistema de pontua√ß√£o.  Por exemplo, cada regra baseada em express√µes regulares √© complementada com informa√ß√µes sobre a criticidade de sua opera√ß√£o;  Ap√≥s identificar todas as regras trabalhadas, sua criticidade √© resumida.  No caso de superar um determinado valor limite, o ataque √© detectado e a solicita√ß√£o √© bloqueada. <br><br><h3>  <font color="#cc0000">An√°lise comportamental</font> </h3><br>  Detectar tentativas de explorar vulnerabilidades nos par√¢metros de consulta n√£o √© a √∫nica tarefa do WAF.  √â importante identificar o pr√≥prio procedimento de pesquisa de vulnerabilidades, que pode se manifestar nas tentativas de varredura, for√ßa bruta de diret√≥rio, difus√£o de par√¢metros e outros m√©todos de detec√ß√£o de vulnerabilidades que s√£o freq√ºentemente usados ‚Äã‚Äãpor ferramentas automatizadas e reagir de acordo com eles.  WAFs mais avan√ßados ainda sabem como criar um arquivo XML com cadeias de consulta t√≠picas do comportamento normal do usu√°rio e bloquear tentativas de enviar solicita√ß√µes em uma ordem diferente do comportamento padr√£o.  Esse mecanismo n√£o apenas neutraliza ataques, mas tamb√©m complica o processo de encontrar uma vulnerabilidade. <br><br><h3>  <font color="#cc0000">Analisadores de analisador de tokenizador</font> </h3><br>  Essa abordagem para detectar ataques √© um conceito complexo;  no entanto, n√£o √© f√°cil desmont√°-lo no iniciador C ++ da biblioteca Libinjection, que permite detectar com rapidez e precis√£o os ataques de inje√ß√£o SQL.  Atualmente, para a biblioteca Libinjection, existem portas para v√°rias linguagens de programa√ß√£o, incluindo Java, C e Python.  O mecanismo √© reduzido √† pesquisa de assinaturas, representada como uma sequ√™ncia de tokens.  Algumas das assinaturas s√£o adicionadas √† lista negra interna e s√£o consideradas inaceit√°veis ‚Äã‚Äãou maliciosas.  Em outras palavras, antes de analisar qualquer consulta, ela primeiro leva a um conjunto de tokens.  Os tokens s√£o divididos em diferentes tipos, string, char, operador regular, n√∫mero, coment√°rio, vari√°vel, etc. <br><br>  Uma das principais desvantagens desse m√©todo √© que √© poss√≠vel construir um design que levar√° √† forma√ß√£o incorreta de tokens;  portanto, a assinatura da solicita√ß√£o ser√° diferente da esperada. <br><br>  Ataques direcionados a tokenisers est√£o associados a tentativas de quebrar a l√≥gica dividindo a solicita√ß√£o em tokens usando token-breakers.  Esses s√£o os s√≠mbolos que permitem influenciar a escolha de um elemento de sequ√™ncia para corresponder a um token espec√≠fico e, assim, ignorar a pesquisa por assinaturas.  No acesso aberto, existem algumas folhas de dicas, obtidas pelo fuzz do Mysql e pela verifica√ß√£o subsequente de consultas no Libinjection. <br><br><h3>  <font color="#cc0000">An√°lise de reputa√ß√£o</font> </h3><br>  O mecanismo de reputa√ß√£o √© herdado diretamente de firewalls e antiv√≠rus.  Hoje, quase qualquer WAF inclui listas de endere√ßos de servi√ßos VPN, anonimizadores, n√≥s da rede Tor e participantes de botnets que podem ser usados ‚Äã‚Äãpara bloquear solicita√ß√µes originadas em endere√ßos suspeitos.  WAFs mais avan√ßados podem atualizar automaticamente seus bancos de dados e fazer entradas adicionais com base no tr√°fego analisado. <br><br><h3>  <font color="#cc0000">Sum√°rio</font> </h3><br>  Em geral, o Web Application Firewall √© uma ferramenta de prote√ß√£o moderna e boa, e nunca ser√° sup√©rflua para aplicativos da Web.  A id√©ia principal de encontrar maneiras de ignorar o WAF √© levar a consulta solicitada para um formul√°rio em que ainda seja compreens√≠vel para o aplicativo da Web atacado, mas n√£o seja compreens√≠vel ou n√£o pare√ßa inofensivo para o WAF. <br><br>  No entanto, existem v√°rias classes de vulnerabilidades que o WAF n√£o pode detectar.  Isso pode ser qualquer vulnerabilidade l√≥gica, nesse caso, n√£o h√° comportamentos anormais nas solicita√ß√µes.  Al√©m disso, alguns estudos realizados para otimizar as regras do WAF tamb√©m mostram m√©todos para excluir solicita√ß√µes leg√≠timas do processo de inspe√ß√£o, o que pode ser potencialmente perigoso.  √â prov√°vel que o WAF tamb√©m n√£o seja √∫til para identificar rivais, como condi√ß√£o de corrida e autentica√ß√£o de usu√°rio insegura. <br><cut><br><h3>  <font color="#cc0000">Refer√™ncia</font> </h3><br>  Vladimir Ivanov (2016) Tabelas de s√≠mbolos permitidos em diferentes entradas da express√£o SQL, resultado da an√°lise de tabelas fuzz.  Dispon√≠vel em: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.blackhat.com/docs/us-16/materials/us-</a> 16-Ivanov-Web-Application-Firewalls-Analysis-Of-Detection-Logic.pdf <br><br>  Torrano-Gimenez, C., Perez-Villegas, A. e Alvarez, G. (2009) 'A Firewall de aplicativos Web baseados em anomalias de auto-aprendizagem', Springer, Berlim, Heidelberg.  doi: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">doi.org/10.1007/978-3-642-04091-7_11</a> . <br><br>  Ramsingh, C. e Centonze, P. (2017) 'Program Analysis for Database Injections', REVISTA INTERNACIONAL DE COMPUTADORES E TECNOLOGIA, 16 (6), pp.  6977 - 6986. Doi: 10.24297 / ijct.v16i6.6332. <br><br>  Prokhorenko, V., Choo, KKR e Ashman, H. (2016) 'T√©cnicas de prote√ß√£o de aplicativos da Web: Uma taxonomia', Journal of Network and Computer Applications, 60, pp.  95-112.  doi: 10.1016 / j.jnca.2015.11.11.017. <br><br>  Prandl, S., Lazarescu, M. e Pham, D. (2015).  Um estudo de solu√ß√µes de firewall de aplicativos da Web.  Seguran√ßa de sistemas de informa√ß√£o, pp. 501-510.  doi: 10.1007 / 978-3-319-26961-0_29. <br><br>  Positive-Technologies (2016a) 'Firewalls de aplicativos da Web: atacando mecanismos l√≥gicos de detec√ß√£o'.  Dispon√≠vel em: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.blackhat.com/docs/us-16/materials/us-16-Ivanov-</a> Web-Application-Firewalls-Analysis-Of-Detection-Logic.pdf. <br><br>  Inje√ß√£o de SQL do OWASP (2017) ignorando o WAF.  Dispon√≠vel em: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.owasp.org/index.php/SQL_Injection_Bypassing_WAF</a> . </cut></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt446518/">https://habr.com/ru/post/pt446518/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt446508/index.html">Trabalhadores do .NET Core como Servi√ßos do Windows</a></li>
<li><a href="../pt446510/index.html">CLRium # 5: Coletor de Lixo. Maior Workshop .NET</a></li>
<li><a href="../pt446512/index.html">Trabalhadores do .NET Core como Servi√ßos do Windows</a></li>
<li><a href="../pt446514/index.html">O Gmail tem 15 anos</a></li>
<li><a href="../pt446516/index.html">Visualiza√ß√£o do tempo de renascimento de Roshan</a></li>
<li><a href="../pt446520/index.html">Como tudo come√ßou: a hist√≥ria dos drones voadores</a></li>
<li><a href="../pt446522/index.html">Swift 5.1 - o que h√° de novo?</a></li>
<li><a href="../pt446530/index.html">Word2vec em imagens</a></li>
<li><a href="../pt446532/index.html">Upwork introduz uma taxa pelo direito de escrever para um cliente em potencial</a></li>
<li><a href="../pt446534/index.html">Lan√ßamento do Visual Studio 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>