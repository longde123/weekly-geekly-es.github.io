<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍨 🕺🏾 👩🏿‍🔬 Clean Code par Robert Martin. Abstrait. Comment écrire du code clair et beau? 🐣 🤰🏽 🖕🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J'ai décidé d'écrire un recueil du livre, que tout le monde connaît, et l'auteur l'appelle «l'école des professeurs de code pur». Le regard de Martin ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Clean Code par Robert Martin. Abstrait. Comment écrire du code clair et beau?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485118/">  J'ai décidé d'écrire un recueil du livre, que tout le monde connaît, et l'auteur l'appelle «l'école des professeurs de code pur».  Le regard de Martin semble dire: <br><br>  «Je vois à travers toi.  Ne suivez-vous pas à nouveau les principes du code propre? <br><br><img src="https://habrastorage.org/webt/ef/iy/gk/efiygknwshp6q_5wtna1q_dewti.jpeg" alt="image"><br><a name="habracut"></a><br><h3>  Chapitre 1. Code propre </h3><br>  Quel est ce code de version Martin le plus propre en quelques mots?  C'est du code sans duplication, avec un nombre minimum d'entités, facile à lire, simple.  Comme devise, on pourrait choisir: "La clarté c'est avant tout!". <br><br><h3>  Chapitre 2. Noms significatifs </h3><br><h4>  Les noms doivent transmettre les intentions du programmeur </h4><br>  Le nom d'une variable, d'une fonction ou d'une classe doit indiquer pourquoi cette variable existe, ce qu'elle fait et comment elle est utilisée.  Si le nom nécessite des commentaires supplémentaires, il ne traduit pas les intentions du programmeur.  Il vaut mieux écrire ce qui est exactement mesuré et dans quelles unités. <br><br>  Un exemple d'un bon nom de variable: daysSinceCreation; <br>  Objectif: supprimer la non-évidence. <br><br><h4>  Évitez la désinformation </h4><br>  N'utilisez pas de mots avec des significations cachées autres que celles prévues.  Méfiez-vous des différences subtiles dans les noms.  Par exemple, XYZControllerForEfficientHandlingOfStrings et XYZControllerForEfficientStorageOfStrings. <br><br>  On trouve des exemples vraiment effrayants de noms mal informés lors de l'utilisation du «L» minuscule et du «O» majuscule dans les noms de variable, en particulier dans les combinaisons.  Naturellement, des problèmes surviennent du fait que ces lettres ne diffèrent presque pas des constantes "1" et "0", respectivement. <br><br><h4>  Utilisez des différences significatives </h4><br>  Si les noms sont différents, ils doivent indiquer différents concepts. <br><br>  Les "séries de nombres" de la forme (a1, a2, ... aN) sont l'opposé de la dénomination consciente.  Ils ne portent pas d’informations ni ne donnent une idée des intentions de l’auteur. <br><br>  Les mots non informatifs sont redondants.  Le mot variable ne doit jamais apparaître dans les noms de variable.  Le mot table ne doit jamais apparaître dans les noms de table.  Pourquoi NameString est-il meilleur que Name?  Un nom peut-il être, disons, un vrai nombre? <br><br>  Utilisez des noms d'orthographe: generationTimestamp est bien meilleur que genymdhms. <br><br><h4>  Choisissez des noms consultables </h4><br>  Les noms à lettre unique ne peuvent être utilisés que pour les variables locales dans les méthodes courtes. <br><br><h4>  Évitez les schémas de codage de nom </h4><br>  En règle générale, les noms codés sont mal prononcés et il est facile d'y faire une faute de frappe. <br><br><h4>  Interfaces et implémentations </h4><br>  Je (l'auteur du livre) préfère laisser les noms d'interface sans préfixe.  Le préfixe I, si courant dans l'ancien code, distrait au mieux, et au pire - transmet des informations inutiles.  Je ne vais pas dire à mes utilisateurs qu'ils ont affaire à une interface. <br><br><h4>  Noms de classe </h4><br>  Les noms de classe et d'objet doivent être des noms et leurs combinaisons: Customer, WikiPage, Account et AddressParser.  Évitez d'utiliser des mots tels que Manager, Processor, Data ou Info dans les noms de classe.  Le nom de classe ne doit pas être un verbe. <br><br><h4>  Noms des méthodes </h4><br>  Les noms de méthode sont des verbes ou des expressions verbales: postPayment, deletePage, save, etc. Les méthodes de lecture / écriture et les prédicats sont formés à partir de la valeur et du préfixe get, set et sont conformes à la norme javabean. <br><br><h4>  Abstenez-vous des jeux de mots </h4><br>  La tâche de l’auteur est de rendre son code aussi clair que possible.  Le code doit être perçu en un coup d'œil, sans nécessiter d'étude approfondie.  Focus sur le modèle de la littérature populaire, dans lequel l'auteur lui-même doit exprimer librement ses pensées. <br><br><h4>  Ajoutez un contexte significatif. </h4><br>  Le contexte peut être ajouté à l'aide de préfixes: addrFirstName, addrLastName, addrState, etc. Au moins le lecteur de code comprendra que les variables font partie d'une structure plus large.  Bien sûr, il serait plus correct de créer une classe appelée Address, de sorte que même le compilateur sache que les variables font partie de quelque chose de plus. <br><br>  Variables avec un contexte peu clair: <br><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printGuessStatistics</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> candidate, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count)</span></span></span><span class="hljs-function"> </span></span>{ String number; String verb; String pluralModifier; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { number = <span class="hljs-string"><span class="hljs-string">"no"</span></span>; verb = <span class="hljs-string"><span class="hljs-string">"are"</span></span>; pluralModifier = <span class="hljs-string"><span class="hljs-string">"s"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count == <span class="hljs-number"><span class="hljs-number">1</span></span>) { number = ~_~quot quot~_~; verb = <span class="hljs-string"><span class="hljs-string">"is"</span></span>; pluralModifier = <span class="hljs-string"><span class="hljs-string">""</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { number = Integer.toString(count); verb = <span class="hljs-string"><span class="hljs-string">"are"</span></span>; pluralModifier = <span class="hljs-string"><span class="hljs-string">"s"</span></span>; } String guessMessage = String.format( <span class="hljs-string"><span class="hljs-string">"There %s %s %s%s"</span></span>, verb, number, candidate, pluralModifier ); print(guessMessage); }</code> </pre> <br>  La fonction est un peu longue et les variables sont utilisées partout.  Pour diviser la fonction en fragments sémantiques plus petits, vous devez créer la classe GuessStatisticsMessage et faire de trois variables les champs de cette classe.  De cette façon, nous fournirons un contexte évident pour les trois variables - maintenant il est absolument évident que ces variables font partie de GuessStatisticsMessage. <br><br>  Variables avec contexte: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GuessStatisticsMessage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String number; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String verb; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String pluralModifier; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> candidate, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count)</span></span></span><span class="hljs-function"> </span></span>{ createPluralDependentMessageParts(count); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String.format( <span class="hljs-string"><span class="hljs-string">"There %s %s %s%s"</span></span>, verb, number, candidate, pluralModifier ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createPluralDependentMessageParts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { thereAreNoLetters(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count == <span class="hljs-number"><span class="hljs-number">1</span></span>) { thereIsOneLetter(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { thereAreManyLetters(count); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">thereAreManyLetters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count)</span></span></span><span class="hljs-function"> </span></span>{ number = Integer.toString(count); verb = <span class="hljs-string"><span class="hljs-string">"are"</span></span>; pluralModifier = <span class="hljs-string"><span class="hljs-string">"s"</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">thereIsOneLetter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ number = ~_~quot quot~_~; verb = <span class="hljs-string"><span class="hljs-string">"is"</span></span>; pluralModifier = <span class="hljs-string"><span class="hljs-string">""</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">thereAreNoLetters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ number = <span class="hljs-string"><span class="hljs-string">"no"</span></span>; verb = <span class="hljs-string"><span class="hljs-string">"are"</span></span>; pluralModifier = <span class="hljs-string"><span class="hljs-string">"s"</span></span>; } }</code> </pre> <br><h4>  N'ajoutez pas de contexte redondant </h4><br>  Les noms courts sont généralement meilleurs que les noms longs, si seulement leur signification est claire pour le lecteur de code.  N'incluez pas plus de contexte que nécessaire dans le nom. <br><br><h3>  Chapitre 3. Fonctions </h3><br><h4>  Compact! </h4><br>  Première règle: les fonctions doivent être compactes. <br>  Deuxième règle: les fonctions doivent être encore plus compactes. <br><br>  Mon expérience pratique m'a appris (au prix de nombreux essais et erreurs) que les fonctions devraient être très petites.  Il est souhaitable que la longueur de la fonction ne dépasse pas 20 lignes. <br><br><h4>  Règle d'une opération </h4><br>  Une fonction ne doit effectuer qu'une seule opération.  Elle doit bien le faire.  Et elle ne devrait rien faire d'autre.  Si une fonction effectue uniquement les actions qui sont au même niveau sous le nom déclaré de la fonction, alors cette fonction effectue une opération. <br><br><h4>  Sections de fonction </h4><br>  Une fonction qui effectue une seule opération ne peut pas être divisée de manière significative en sections. <br><br><h4>  Un niveau d'abstraction par fonction </h4><br>  Pour s'assurer que la fonction n'effectue «qu'une seule opération», il est nécessaire de vérifier que toutes les commandes de la fonction sont au même niveau d'abstraction. <br><br>  Le mélange des niveaux d'abstraction au sein d'une fonction crée toujours de la confusion. <br><br><h4>  Lecture du code de haut en bas: règle de rétrogradation </h4><br>  Le code doit se lire comme une histoire - de haut en bas. <br><br>  Chaque fonction doit être suivie de fonctions du niveau d'abstraction suivant.  Cela vous permet de lire le code, en descendant séquentiellement les niveaux d'abstraction tout en lisant la liste des fonctions.  J'appelle cette approche la «règle de rétrogradation». <br><br><h4>  Commuter les commandes </h4><br>  L'écriture d'une commande de commutateur compact est assez difficile.  Même une commande de commutation avec seulement deux conditions prend plus de place qu'un bloc ou une fonction unique devrait occuper à mon avis.  Il est également difficile de créer une commande switch qui fait une chose - par nature, les commandes switch effectuent toujours N opérations.  Malheureusement, nous ne pouvons pas toujours nous passer de commandes de commutation, mais au moins nous pouvons nous assurer que ces commandes sont masquées dans une classe de bas niveau et non dupliquées dans le code.  Et bien sûr, le polymorphisme peut nous y aider. <br><br>  L'exemple montre une seule opération, selon le type d'employé. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Money </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculatePay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Employee e)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InvalidEmployeeType </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (e.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> COMMISSIONED: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> calculateCommissionedPay(e); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> HOURLY: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> calculateHourlyPay(e); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SALARIED: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> calculateSalariedPay(e); <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidEmployeeType(e.type); } }</code> </pre> <br>  Cette fonctionnalité présente plusieurs inconvénients.  Premièrement, c'est formidable, et avec l'ajout de nouveaux types de travailleurs, il augmentera.  Deuxièmement, il effectue bien évidemment plus d'une opération.  Troisièmement, il viole le principe de la responsabilité unique, car il peut s'expliquer par plusieurs raisons. <br><br>  Quatrièmement, il viole le principe ouvert et fermé, car le code de fonction doit changer chaque fois que de nouveaux types sont ajoutés. <br><br>  Mais l'inconvénient le plus grave est peut-être que le programme peut contenir un nombre illimité d'autres fonctions avec une structure similaire, par exemple: <br><br>  isPayday (Employé e, Date date) <br><br>  ou <br><br>  deliveryPay (Employé e, Paiement en argent) <br><br>  et ainsi de suite. <br><br>  Toutes ces fonctions auront la même structure imparfaite.  La solution à ce problème consiste à enterrer la commande switch dans les fondations de l'usine abstraite et à ne la montrer à personne.  La fabrique utilise la commande switch pour créer les instances correspondantes des descendants d'Employé et appelle les fonctions CalculatePay, isPayDay, DeliverPay, etc., pour passer le transfert polymorphe via l'interface Employé. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPayday</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> Money </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculatePay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deliverPay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Money pay)</span></span></span></span>; } ----------------- <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmployeeFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Employee </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeEmployee</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EmployeeRecord r)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InvalidEmployeeType</span></span>; } ----------------- <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmployeeFactoryImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmployeeFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Employee </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeEmployee</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EmployeeRecord r)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InvalidEmployeeType </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (r.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> COMMISSIONED: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CommissionedEmployee(r) ; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> HOURLY: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HourlyEmployee(r); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SALARIED: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SalariedEmploye(r); <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidEmployeeType(r.type); } } }</code> </pre> <br>  Ma règle générale concernant les commandes de commutation est que ces commandes sont valides si elles se produisent une fois dans le programme, sont utilisées pour créer des objets polymorphes et se cachent derrière des relations d'héritage pour rester invisibles pour le reste du système.  Bien sûr, il n'y a pas de règles sans exceptions, et dans certaines situations, il est nécessaire de violer une ou plusieurs conditions de cette règle. <br><br><h4>  Utilisez des noms significatifs </h4><br>  La moitié des efforts pour mettre en œuvre ce principe se résume à choisir de bons noms pour les fonctions compactes qui effectuent une seule opération.  Plus la fonction est petite et spécialisée, plus il est facile de lui donner un nom significatif. <br><br>  N'ayez pas peur d'utiliser des noms longs. Un nom long et significatif vaut mieux qu'un nom court et obscur.  Choisissez un schéma qui facilite la lecture des mots dans le nom de la fonction, puis créez un nom à partir de ces mots qui décrit l'objectif de la fonction. <br><br><h4>  Arguments de fonction </h4><br>  Dans le cas idéal, le nombre d'arguments de fonction est nul.  Les fonctions suivantes comportent un argument (unaire) et deux arguments (binaire).  Les fonctions avec trois arguments (ternaire) doivent être évitées autant que possible. <br><br>  Les arguments de sortie confondent la situation encore plus rapidement que l'entrée.  En règle générale, personne ne s'attend à ce qu'une fonction renvoie des informations sous forme d'arguments.  Si vous ne pouvez pas gérer sans arguments, essayez au moins de vous limiter à un argument d'entrée. <br><br>  Les conversions qui utilisent un argument de sortie au lieu d'une valeur de retour confondent le lecteur.  Si la fonction convertit son argument d'entrée, le résultat <br>  doit être passé dans la valeur de retour. <br><br><h4>  Arguments des drapeaux </h4><br>  Les arguments argument sont moches.  Passer le sens logique d'une fonction est une habitude vraiment terrible.  Il complique immédiatement la signature de la méthode, proclamant haut et fort que la fonction effectue plus d'une opération.  Si l'indicateur est vrai, une opération est effectuée et, si elle est fausse, une autre. <br><br><h4>  Fonctions binaires </h4><br>  Une fonction à deux arguments est plus difficile à comprendre qu'une fonction unaire.  Bien sûr, dans certaines situations, une forme à deux arguments est appropriée.  Par exemple, appeler le Point p = nouveau Point (0,0);  absolument raisonnable.  Cependant, deux arguments dans notre cas sont des composants ordonnés de la même valeur. <br><br><h4>  Objets comme arguments </h4><br>  Si une fonction doit recevoir plus de deux ou trois arguments, il est fort probable que certains de ces arguments soient regroupés dans une classe distincte.  Considérez les deux déclarations suivantes: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Circle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeCircle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Circle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeCircle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Point center, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>;</code> </pre> <br>  Si les variables sont transférées ensemble dans leur ensemble (comme les variables x et y dans cet exemple), alors, très probablement, ensemble, elles forment un concept qui mérite son propre nom. <br><br><h4>  Verbes et mots-clés </h4><br>  Choisir un bon nom pour une fonction peut largement expliquer la signification de la fonction, ainsi que l'ordre et la signification de ses arguments.  Dans les fonctions unaires, la fonction elle-même et son argument doivent former une paire verbe / nom naturel.  Par exemple, un appel du formulaire write (name) semble très informatif. <br><br>  Le lecteur comprend que quel que soit le «nom», il est quelque part «écrit».  Encore mieux est l'enregistrement writeField (nom), qui signale que le "nom" est écrit dans le "champ" d'une certaine structure. <br><br>  La dernière entrée est un exemple d'utilisation de mots clés dans un nom de fonction.  Sous cette forme, les noms d'arguments sont codés dans le nom de la fonction.  Par exemple, assertEquals peut être écrit en tant que assertExpectedEqualsActual (attendu, réel).  Cela résout en grande partie le problème de se souvenir de l'ordre des arguments. <br><br><h4>  Séparation des commandes et des requêtes </h4><br>  Une fonction doit faire quelque chose ou répondre à une question, mais pas simultanément.  Soit la fonction modifie l'état de l'objet, soit renvoie des informations sur cet objet.  La combinaison de deux opérations crée souvent de la confusion. <br><br><h4>  Isoler les blocs try / catch </h4><br>  Les blocs try / catch semblent assez laids.  Ils confondent la structure du code et mélangent la gestion des erreurs avec le traitement normal.  Pour cette raison, il est recommandé que les corps des blocs try et catch soient séparés en fonctions distinctes. <br><br><h4>  Gestion des erreurs en une seule opération </h4><br>  Les fonctions doivent effectuer une opération.  La gestion des erreurs est une opération.  Cela signifie que la fonction qui traite les erreurs ne doit rien faire d'autre.  Il s'ensuit que si le mot clé try est présent dans la fonction, alors il doit être le premier mot de la fonction, et après les blocs catch / finally, il ne devrait y avoir rien d'autre. <br><br>  Ceci conclut le chapitre 3. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr485118/">https://habr.com/ru/post/fr485118/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr485100/index.html">Où aller: les prochains événements gratuits pour les développeurs à Moscou (30 janvier - 15 février)</a></li>
<li><a href="../fr485102/index.html">Topleaked: un outil pour détecter les fuites de mémoire</a></li>
<li><a href="../fr485104/index.html">Créer une clé RFID universelle pour les interphones</a></li>
<li><a href="../fr485108/index.html">Statistiques des spécialistes PMI certifiés en Russie au 01/10/2020</a></li>
<li><a href="../fr485110/index.html">Mon expérience du travail à distance efficace</a></li>
<li><a href="../fr485120/index.html">Ajoutez une API JSON très rapide à notre application.</a></li>
<li><a href="../fr485122/index.html">La rubrique «Lisez des articles pour vous». Octobre - décembre 2019</a></li>
<li><a href="../fr485124/index.html">Tests purs en PHP et PHPUnit</a></li>
<li><a href="../fr485126/index.html">Mu-mu, woof-woof, quack-quack: évolution de la communication acoustique</a></li>
<li><a href="../fr485128/index.html">Économisez sur les licences Mikrotik CHR</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>