<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÉüèº üßñüèø ‚úäüèº Mi novia y el primer videojuego. Desarrollo de la unidad. Parte 1 üë©üèª‚Äç‚úàÔ∏è üî≠ üôé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bueno, como el primero ... Excepto por los lanzamientos solo para Android y una docena de proyectos abandonados en la l√≠nea de meta, entonces s√≠, este...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mi novia y el primer videojuego. Desarrollo de la unidad. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443004/"> Bueno, como el primero ... Excepto por los lanzamientos solo para Android y una docena de proyectos abandonados en la l√≠nea de meta, entonces s√≠, este es nuestro primer juego con un swing para m√°s de una plataforma.  ¬øC√≥mo empez√≥ todo?  Y es simple, trabajamos en otro proyecto, llam√©moslo "Proyecto A", trabajamos durante mucho tiempo y decidimos si hacer un juego para nosotros en un par de meses y entrenar nuestras habilidades de marketing en √©l, y lanzaremos "Proyecto A" justo despu√©s Con amplia experiencia en la promoci√≥n de juegos.  Pero las estrellas no estuvieron de acuerdo, el gallo no silb√≥ y el "Proyecto A" se acost√≥ exactamente por un a√±o.  Pero esta historia no es sobre √©l, sino sobre un juego l√≥gico llamado "Cubicity: Slide puzzle". <br><br><img src="https://habrastorage.org/webt/xw/93/vg/xw93vgwunh93oudw5-8848nyzfw.png"><br><a name="habracut"></a><br>  Seg√∫n el primer plan, se planific√≥ lo siguiente: un m√≠nimo de gr√°ficos, un m√≠nimo de interfaz de usuario y todo lo que era posible minimizar, se supon√≠a que el juego ten√≠a el estilo de los juegos casuales de hoy, que son tantos en el mercado como Match-3.  Como resultado, nuestro objetivo era el siguiente, las fichas redondas se conectan en una forma determinada, movi√©ndose con un deslizamiento en 4 direcciones.  Aquellos que ya han jugado Cubicity saben que no nos hemos alejado mucho de esta tarea, sino que hemos dado un gran salto sobre el resto, en cuanto a un equipo compuesto por solo dos personas. <br><br><img src="https://habrastorage.org/webt/4o/eq/w7/4oeqw7uh2jze_civpgc3wyq9vdg.png"><br><br>  Si uno de los lectores espera encontrar el secreto del desarrollo exitoso y r√°pido del juego aqu√≠, entonces debes saber que no hay ning√∫n secreto.  Aqu√≠ no compartimos gran experiencia o conocimiento, aqu√≠ solo se describe la historia de un proyecto de una peque√±a empresa.  Exitoso o no, todav√≠a no lo sabemos.  Pero para muchos de ustedes, nuestros lectores son un mensaje del pasado de los propios desarrolladores. <br><br>  Volviendo a la historia de la creaci√≥n de Cubicity, trabajamos principalmente en Unity y el conjunto est√°ndar de cualquier desarrollador de Unity que se precie est√° aqu√≠: Newtonsoft.json, Zenject, Cinemachine, Dotween, etc. ... Como viste arriba, el primer prototipo del juego se ve√≠a as√≠, cubos y panqueques  Despu√©s de una semana de pensar c√≥mo diversificar el juego y atraer a los jugadores, surgi√≥ una idea brillante ... Mira la tienda de Activos de personajes c√∫bicos o redondos.  Bueno, comenz√≥, algunos paquetes de personajes fueron comprados sin dudarlo.  La misma situaci√≥n ocurri√≥ con los bloques en los que los personajes ahora se est√°n moviendo.  Tambi√©n hicieron una lista de nuevos elementos de juego, a partir de una lista de alrededor de 30 novedades nuevas, se seleccionaron cosas neutrales, como redireccionar bloques / flechas, un ascensor y un teletransportador, para empezar.  Decidieron dejar el resto a nuevos niveles y presentarlos uno a la vez en 30-35 niveles. <br><br><img src="https://habrastorage.org/webt/43/88/pe/4388petqixbawzpjtjf9otnyzgu.png"><br><br>  Honestamente, no podemos recordar qu√© nos impuls√≥ a hacer tantos niveles al principio, pero tal como est√°n, 95 niveles entraron en el primer lanzamiento.  De hecho, mucho, y nos hemos arrepentido m√°s de una vez.  ¬øPor qu√© lo sientes?  Pero debido a que el juego era crudo y muchas cosas cambiaron en el camino.  A menudo ten√≠a que recibir una dosis del "D√≠a de la Marmota" yendo a cada uno de los 95 niveles y haciendo cambios.  Todos los niveles tomaron 2 meses de operaci√≥n continua.  Estos no eran niveles 100% terminados, pero muy cercanos.  En d√≠as productivos, 10 niveles no eran dif√≠ciles de mover de la cabeza al papel, y luego a la escena.  Pero hubo d√≠as en que te sientes como Henk Moody de Lascivious California, experimentando una crisis creativa, crees que todo est√° seco, pero llega un nuevo d√≠a y nuevas ideas. <br><br>  Si hablamos del componente visual, entonces todo es algo m√°s complicado.  El renderizado, como en la mayor√≠a de los juegos, se lleva a cabo en una superficie fuera de la pantalla con una resoluci√≥n inferior a la nativa y brilla en la superficie principal, pero la interfaz de usuario se dibuja para mayor claridad y legibilidad sin ning√∫n cambio en la resoluci√≥n.  Por lo tanto, obtenemos lo mejor de ambos mundos: no una interfaz de usuario borrosa, pero no una representaci√≥n demasiado glotona en el juego.  Para el suavizado, se eligi√≥ 2x MSAA + FXAA experimentalmente, como los que ofrecen la mejor imagen con la menor cantidad de recursos.  A juzgar por un juego l√≥gico que no necesita 60 cuadros por segundo, decidimos no reinventar la rueda y establecer el l√≠mite de cuadros a 30 fps (por no decir nada, incluso las consolas suelen hacer esto).  Establecer el l√≠mite de marco tiene un efecto positivo no solo en el consumo de energ√≠a, sino tambi√©n en el calentamiento del tel√©fono, lo que a su vez evita que el tel√©fono trote debido al sobrecalentamiento. <br><br>  Nos esperaba una decisi√≥n dif√≠cil, y estos son los puntos finales.  Como en cada lanzamiento del nivel, los personajes se seleccionaron al azar de los disponibles para el jugador, ser√≠a problem√°tico dibujar cualquier miniatura de la figura de los personajes.  Puede que no lo creas, pero fue precisamente este problema el que se resolvi√≥ por m√°s tiempo y se retras√≥ para m√°s adelante.  Los cubos al final no parec√≠an una idea tan espeluznante entonces, y la pintura en papel ayud√≥ a pasar el nivel y llevar a todos a su lugar.  Despu√©s de eso, se decidi√≥ usar los mismos caracteres en lugar de cubos, pero los m√°s peque√±os, se volvi√≥ mejor, pero solo para nosotros.  Unos d√≠as m√°s tarde, estos personajes se desplegaron y resaltaron, se hizo mucho m√°s claro qui√©n es qui√©n, pero a√∫n no es satisfactorio.  La versi√≥n final se adopt√≥ un mes despu√©s, por prueba y error, y se dedicaron otras dos semanas a crear iconos para los acabados.  ¬°Adi√≥s verano, hasta pronto! <br><br><img src="https://habrastorage.org/webt/od/3u/nq/od3unqvyizdarlourfngxv5bpl4.png"><br><br>  En nuestra humilde opini√≥n, las nubes resultaron ser bastante agradables en apariencia.  Pero, de hecho, este es el truco m√°s simple y no muy sucio.  Cuando simplemente decidieron agregar las nubes, lo primero que pensaron fue hacer un fondo de video 360.  Este enfoque no ha valido la pena, ya que para plataformas m√≥viles es deseable ajustar el juego al l√≠mite de tama√±o para descargar en LTE.  Para que el video se viera un poco mejor que los chacales de compresi√≥n dados a pedazos, √©l mismo tuvo que asignar 10-15 MB, lo que, en combinaci√≥n con la presencia de niveles nocturnos en el juego con sus nubes, es demasiado (toda la construcci√≥n final del juego en Android toma 61 MB).  El segundo deseo era escribir su propio sistema para las nubes, era tentador como desarrollador, pero como persona que quiere terminar el juego lo antes posible, no era adecuado.  La soluci√≥n lleg√≥ en forma de crear una textura para la nube y crear un sistema de part√≠culas con una vida √∫til de part√≠culas infinita, y tambi√©n un n√∫mero limitado de part√≠culas en total.  Despu√©s de eso, agregamos tama√±os aleatorios entre dos constantes junto con rotaci√≥n aleatoria.  El resultado fue m√°s que satisfactorio: nuestro cielo se llen√≥ de nubes que eran bonitas y no nos dieron ganas de llorar al mirarlas. <br><br><img src="https://habrastorage.org/webt/o0/0o/zi/o00ozi2skh67h5dy3its1rccnku.png"><br><br>  Las sombras en el juego (en la versi√≥n m√≥vil) consisten completamente en quads, que simplemente se arreglan manualmente, porque no quer√≠a agregar sombras reales a la versi√≥n m√≥vil.  Una de las razones es la falta de sombras suaves en plataformas m√≥viles con OpenGLES 2.0 y, por supuesto, la degradaci√≥n del rendimiento en dispositivos d√©biles. <br><br><img src="https://habrastorage.org/webt/wc/xx/mh/wcxxmheadjd5snxzhgvnrakb2cu.png"><br><br>  Como se mencion√≥ anteriormente, usamos 2x MSAA + FXAA para suavizar, ¬°pero eso no es todo!  Adem√°s, AmplifyColor se ha agregado a nuestro proceso de procesamiento posterior, un excelente activo para su dinero que le permite usar diferentes Lut-s para el procesamiento posterior.  Con el lut correcto, la imagen mejora.  Durante el proceso de desarrollo, probamos diferentes enfoques, incluida la pila est√°ndar de procesamiento posterior de la unidad, pero en la construcci√≥n sus sombreadores y opciones ocuparon tanto que ni un cuento de hadas ni un bol√≠grafo para describir.  Algunas de las soluciones eran muy hermosas, pero funcionaron extremadamente mal en tel√©fonos que no eran de la primera frescura (cr√©anme, si creen que ahora todos tienen al menos tel√©fonos "normales", se equivocan. Una gran cantidad de personas todav√≠a van con un chino por $ 40 y en los comentarios se quejan de que su DOOM no entra en su microondas). <br><br>  El equilibrio del juego no siempre es f√°cil, e incluso ahora surgen pensamientos, si los niveles son demasiado complicados o si los niveles dif√≠ciles a menudo se caen, etc.  Despu√©s de haber equilibrado lo m√°s posible con un pie izquierdo, decidimos introducir herramientas para facilitar al jugador (Volver, Bomba, Bloque de hielo, Teletransporte), y s√≠, se hizo m√°s f√°cil vivir, pero no para nosotros, sino solo para futuros jugadores.  Tenemos m√°s trabajo y errores. <br><br>  Llegamos al men√∫ del juego, la fuerza y ‚Äã‚Äãlos nervios al l√≠mite, la naturaleza creativa pis√≥ los frenos, y no nos esconderemos, tuve que inspirarme en otros juegos, por lo que muchas gracias a ellos.  Y ahora "¬°Por la ma√±ana sali√≥ la tortuga!".  No bien a la ma√±ana siguiente, pero sali√≥, la interfaz de usuario estaba lista para los dise√±os creados anteriormente. <br><br><img src="https://habrastorage.org/webt/fk/zu/oa/fkzuoa_egypchqldgd2faaqok74.png"><br><br>  El deseo de ser j√≥venes elegantes y de moda tampoco nos pas√≥ por alto.  Decidimos agregar guardar en la nube y generalmente no nos arrepentimos.  Esta no fue la tarea m√°s f√°cil, ya que en diferentes plataformas, diferentes proveedores de almacenamiento en la nube.  En Steam, es Steamworks, para dispositivos m√≥viles, GooglePlay y GameRoom.  As√≠ que tuve que unificar el sistema de almacenamiento para la posibilidad de sustituci√≥n de la plataforma deseada.  Para empezar, decidimos usar EasyMobile para estos fines, pero lamentablemente, tarde o temprano abandonamos esta idea.  El complemento en s√≠ es bueno y tiene una gran cantidad de caracter√≠sticas, pero realmente no nos gustaron los detalles de trabajar con almacenamiento en la nube nativo.  Como resultado, la elecci√≥n recay√≥ en Firebase Realtime Database y la autenticaci√≥n a trav√©s de Facebook.  En resumen, tuve que pasar por 7 c√≠rculos del infierno para que funcionara (y esto no es una cuesti√≥n de programaci√≥n, sino m√°s bien en 100,500 configuraciones que deben hacerse en 100,500 lugares de la aplicaci√≥n y en Facebook, Firebase, etc.).  Adem√°s, la base de datos tiene l√≠mites de tr√°fico y para guardarla, cada vez que escribimos, creamos un GUID y lo registramos tanto en la base de datos como en el dispositivo.  Por lo tanto, si vemos que los GUID en el dispositivo y en la nube son los mismos, podemos estar seguros de que no necesitamos leer todos los datos de la nube, pero podemos usar una copia local de los datos.  Como resultado, se agreg√≥ la sincronizaci√≥n, pero ... Uno de los errores m√°s extra√±os para nosotros fue el comportamiento no obvio de la base de datos de Firebase en algunos casos.  Como usamos Json, serializamos clases para almacenar el estado, pero Firebase a veces se comporta de manera extra√±a. <br><br>  Si pasamos una Firebase para escribir un objeto de diccionario, por ejemplo, este tipo de: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, SlotState&gt; { { <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() }, { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() }, { <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() };</code> </pre> <br><br>  Cuando lo leemos de la base de datos, no obtenemos un objeto Json, sino una matriz Json (¬øQu√©?) <br>  Bueno, parece que, por supuesto, usaremos listas en todas partes y no experimentaremos problemas, ¬øverdad?  Pero ah√≠ estaba. <br><br>  Si escribimos a Firebase: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, SlotState&gt; { { <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() }, { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() }, { <span class="hljs-number"><span class="hljs-number">100500</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() };</code> </pre> <br>  O incluso: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, SlotState&gt; { { <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() }, { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, { <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() };</code> </pre> <br>  Cuando lo leemos de la base de datos, todav√≠a obtenemos un objeto Json con claves y valores. <br><br>  Es posible comprender la l√≥gica de los desarrolladores hasta cierto punto, pero esto puede conducir a errores que pueden aparecer solo despu√©s de un tiempo (¬øRecuerda los GUID anteriores agregados para guardar? Como resultado, lecturas raras de la base de datos con entradas relativamente frecuentes). <br><br>  ¬øCu√°ndo es el lanzamiento?  Esta pregunta se ha escuchado con mayor frecuencia.  Pero era necesario prepararse a fondo para este d√≠a.  Haga una lista de mercados, elija una fecha de lanzamiento, evite grandes ventas, bastantes matices, por lo que el lanzamiento se ha movido al menos 2 meses.  Despu√©s de escuchar el consejo de un art√≠culo, elegimos el martes y el mi√©rcoles para su lanzamiento.  Decidimos pedir una revisi√≥n exacta en w3bsit3-dns.com, publicar noticias sobre el juego en varios foros y bombardear las redes sociales en particular Instagram (por supuesto, pagado).  De todo lo que funcion√≥, aprenderemos en la segunda parte de esta historia, pero solo m√°s adelante. <br><br>  ¬øQu√© tenemos al final?  Crear un juego r√°pido no siempre es r√°pido.  Y es posible que el tiempo esperado para la creaci√≥n del juego tenga que multiplicarse por 5. Obtenga personas que puedan ayudarlo con consejos pr√°cticos en √°reas que no le son familiares.  Rel√°jese siempre que sea posible, ya que crear algo, no solo juegos, requiere mucha energ√≠a.  No vale la pena ser una salchicha lenta y ser menos √∫til al comenzar un proyecto.  Bueno, dinero, busca dinero, lo necesitar√°s.  Y de parte nuestra, gracias por su atenci√≥n, buena suerte y nos vemos en el pr√≥ximo art√≠culo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/443004/">https://habr.com/ru/post/443004/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../442994/index.html">Anunciando la Calculadora de Abastecimiento Abierto de Windows</a></li>
<li><a href="../442996/index.html">Hacer que el manejo de excepciones de C ++ sea m√°s peque√±o en x64</a></li>
<li><a href="../442998/index.html">An√°lisis debajo de la alfombra: una revisi√≥n de 18 a√±os nuevos</a></li>
<li><a href="../443000/index.html">Una actualizaci√≥n de las versiones de C # y las herramientas de C #</a></li>
<li><a href="../443002/index.html">El estado actual de la ciencia de la conciencia.</a></li>
<li><a href="../443006/index.html">Lanzamiento de Grafana v6: nuevas caracter√≠sticas de una herramienta de visualizaci√≥n abierta</a></li>
<li><a href="../443008/index.html">Oda al d√≠a de un programador</a></li>
<li><a href="../443012/index.html">La compa√±√≠a rusa lanz√≥ la producci√≥n en serie de neuroprocesadores, competidores de Nvidia</a></li>
<li><a href="../443014/index.html">Compartir noticias de transporte: los scooters el√©ctricos no duran mucho; Lyft y Uber van a salir a bolsa</a></li>
<li><a href="../443016/index.html">Aprendizaje profundo: no solo sella en tel√©fonos m√≥viles o c√≥mo diagnosticamos los carros de locomotoras</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>