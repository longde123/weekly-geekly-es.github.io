<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèø‚Äçü§ù‚ÄçüßëüèΩ üë∂üèæ üì§ DynamicData: Colecciones din√°micas, arquitectura MVVM y extensiones reactivas üßùüèΩ üîó üîÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Febrero de 2019 marc√≥ el lanzamiento de ReactiveUI 9 , el marco multiplataforma para crear aplicaciones GUI en la plataforma Microsoft .NET. ReactiveU...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DynamicData: Colecciones din√°micas, arquitectura MVVM y extensiones reactivas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454074/"><p>  Febrero de 2019 marc√≥ el lanzamiento de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ReactiveUI 9</a> , el marco multiplataforma para crear aplicaciones GUI en la plataforma Microsoft .NET.  ReactiveUI es una herramienta para la estrecha integraci√≥n de extensiones reactivas con el patr√≥n de dise√±o MVVM.  Puede familiarizarse con el marco a trav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una serie de videos</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la p√°gina de bienvenida de la documentaci√≥n</a> .  La actualizaci√≥n ReactiveUI 9 incluye <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">numerosas correcciones y mejoras</a> , pero probablemente la m√°s crucial e interesante es la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">integraci√≥n con el marco DynamicData</a> , lo que le permite trabajar con colecciones din√°micas de manera reactiva.  ¬° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Averig√ºemos</a> para qu√© podemos usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> y c√≥mo funciona este poderoso marco reactivo bajo el cap√≥! </p><a name="habracut"></a><br><h1 id="introduction">  Introduccion </h1><br><p> Primero determinemos los casos de uso de DynamicData y descubramos lo que no nos gusta de las herramientas predeterminadas para trabajar con conjuntos de datos din√°micos desde el espacio de nombres <code>System.Collections.ObjectModel</code> . </p><br><p>  La plantilla MVVM, como sabemos, asume la divisi√≥n de responsabilidad entre la capa del modelo, la capa de presentaci√≥n y el modelo de presentaci√≥n de la aplicaci√≥n, tambi√©n conocido como el modelo de vista.  La capa del modelo est√° representada por entidades y servicios de dominio y no sabe nada sobre la capa del modelo de vista.  El modelo encapsula toda la l√≥gica compleja de la aplicaci√≥n, mientras que el modelo de vista delega operaciones al modelo, proporcionando acceso a la informaci√≥n sobre el estado actual de la aplicaci√≥n a trav√©s de propiedades, comandos y colecciones observables.  La herramienta predeterminada para trabajar con propiedades din√°micas es la interfaz <code>INotifyPropertyChanged</code> , para trabajar con acciones del usuario - <code>ICommand</code> , y para trabajar con colecciones - la interfaz <code>INotifyCollectionChanged</code> , as√≠ como las implementaciones, como <code>ObservableCollection&lt;T&gt;</code> y <code>ReadOnlyObservableCollection&lt;T&gt;</code> . </p><br><img width="500" src="https://habrastorage.org/getpro/habr/post_images/504/c83/ab0/504c83ab04fe2e2d1eed037317b8aa2c.jpg"><br><p><br>  Las implementaciones de las <code>INotifyPropertyChanged</code> e <code>ICommand</code> generalmente dependen del desarrollador y del marco MVVM utilizado, pero el uso de la <code>ObservableCollection&lt;T&gt;</code> predeterminada impone una serie de limitaciones.  Por ejemplo, no podemos mutar la colecci√≥n desde un subproceso en segundo plano sin <code>Dispatcher.Invoke</code> o una llamada similar, y eso habr√≠a sido muy √∫til para sincronizar matrices de datos con el servidor a trav√©s de una operaci√≥n en segundo plano.  Vale la pena se√±alar que cuando se usa la arquitectura MVVM limpia, la capa del modelo no debe saber nada sobre el marco GUI utilizado, y debe ser compatible con la capa del modelo en la terminolog√≠a MVC o MVP.  Es por eso que esas numerosas llamadas <code>Dispatcher.Invoke</code> en los servicios de dominio violan el principio de segregaci√≥n de responsabilidad. </p><br><p>  Por supuesto, podr√≠amos declarar un evento en un servicio de dominio y transmitir un fragmento con elementos modificados como argumentos de evento, luego suscribirnos al evento, encapsular el <code>Dispatcher.Invoke</code> llamada detr√°s de una interfaz, por lo que nuestra aplicaci√≥n no depender√° de ninguna GUI framework, llame a esa interfaz desde el modelo de vista y modifique <code>ObservableCollection&lt;T&gt;</code> consecuencia, pero hay una manera mucho m√°s elegante de tratar tales problemas sin la necesidad de reinventar la rueda.  ¬øQu√© estamos esperando entonces? </p><br><h1 id="reactive-extensions-managing-observable-data-streams">  Extensiones reactivas.  Gesti√≥n de flujos de datos observables </h1><br><p>  Para comprender completamente las abstracciones introducidas por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> y c√≥mo trabajar con conjuntos de datos reactivos cambiantes, recordemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">qu√© es la programaci√≥n reactiva y c√≥mo usarla en el contexto de la plataforma Microsoft .NET y el patr√≥n de dise√±o MVVM</a> .  La forma de organizar la interacci√≥n entre los componentes del programa puede ser interactiva o reactiva.  Con el enfoque interactivo, el consumidor recibe datos del productor sincr√≥nicamente (basado en pull, T, IEnumerable), y con el enfoque reactivo, el productor env√≠a los datos al consumidor de forma asincr√≥nica (basado en push, Task, IObservable). </p><br><img width="500" src="https://habrastorage.org/webt/mb/ts/mj/mbtsmjfyhjqeeb4tv8ynotvkdms.png"><br><p><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La programaci√≥n reactiva</a> es la programaci√≥n con flujos de datos as√≠ncronos, y las extensiones reactivas son la implementaci√≥n de la programaci√≥n reactiva, basada en las interfaces <code>IObservable</code> e <code>IObserver</code> del espacio de nombres del sistema, que define una serie de operaciones similares a LINQ en la interfaz <code>IObservable</code> , conocida como LINQ over Observable.  Las extensiones reactivas son compatibles con .NET Standard y se ejecutan donde sea que se ejecute Microsoft .NET. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/ue/qe/80/ueqe80neq0ufivj-bq5hipdrldo.gif"></a> <br><br>  ReactiveUI ofrece a los desarrolladores de aplicaciones que aprovechen el uso de implementaciones reactivas para las interfaces <code>ICommand</code> e <code>INotifyPropertyChanged</code> , proporcionando herramientas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>ReactiveCommand&lt;TIn, TOut&gt;</code></a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>WhenAnyValue</code></a> .  <code>WhenAnyValue</code> permite convertir una propiedad de una clase que implementa la interfaz <code>INotifyPropertyChanged</code> en una secuencia de eventos de tipo <code>IObservable&lt;T&gt;</code> , esto simplifica la implementaci√≥n de propiedades dependientes. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ExampleViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">ReactiveObject</span></span> { [Reactive] <span class="hljs-comment"><span class="hljs-comment">// Attribute from the ReactiveUI.Fody package, // takes care of aspect-oriented INPC implementation // for this particular property. public string Name { get; set; } public ExampleViewModel() { // Here we subscribe to OnPropertyChanged("Name") events. this.WhenAnyValue(x =&gt; x.Name) // IObservable&lt;string&gt; .Subscribe(Console.WriteLine); } }</span></span></code> </pre> <br><p>  <code>ReactiveCommand&lt;TIn, TOut&gt;</code> permite trabajar con un comando como con <code>IObservable&lt;TOut&gt;</code> , que se publica cada vez que un comando completa la ejecuci√≥n.  Adem√°s, cualquier comando tiene una propiedad <code>ThrownExceptions</code> de tipo <code>IObservable&lt;Exception&gt;</code> . </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// ReactiveCommand&lt;Unit, int&gt; var command = ReactiveCommand.Create(() =&gt; 42); command // IObservable&lt;int&gt; .Subscribe(Console.WriteLine); command .ThrownExceptions // IObservable&lt;Exception&gt; .Select(exception =&gt; exception.Message) // IObservable&lt;string&gt; .Subscribe(Console.WriteLine); command.Execute().Subscribe(); // Outputs: 42</span></span></code> </pre> <br><p>  Hasta este momento, hemos estado trabajando con <code>IObservable&lt;T&gt;</code> , como con un evento que publica un nuevo valor de tipo <code>T</code> cada vez que cambia el estado del objeto que se est√° observando.  En pocas palabras, <code>IObservable&lt;T&gt;</code> es una secuencia de eventos, una colecci√≥n de tipo <code>T</code> extendida en el tiempo. </p><br><p>  Por supuesto, podr√≠amos trabajar con colecciones con la misma facilidad y naturalidad: cada vez que cambie una colecci√≥n, podr√≠amos publicar una nueva colecci√≥n con elementos modificados.  En este caso, el valor publicado ser√≠a del tipo <code>IEnumerable&lt;T&gt;</code> o m√°s especializado, y la secuencia observable en s√≠ ser√≠a del tipo <code>IObservable&lt;IEnumerable&lt;T&gt;&gt;</code> .  Pero, como se√±ala correctamente un lector con mentalidad cr√≠tica, esto est√° plagado de problemas cr√≠ticos de rendimiento, especialmente si no hay una docena de elementos en nuestra colecci√≥n, ¬°sino cien, o incluso unos pocos miles! </p><br><h1 id="introduction-to-dynamicdata">  Introducci√≥n a DynamicData </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> es una biblioteca que le permite utilizar el poder de las extensiones reactivas al trabajar con colecciones.  Rx es extremadamente poderoso, pero <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">listo</a> para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">usar</a> no proporciona nada para ayudar con la administraci√≥n de colecciones, y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData lo</a> soluciona.  En la mayor√≠a de las aplicaciones, es necesario actualizar din√°micamente las colecciones; por lo general, una colecci√≥n se llena con elementos cuando se inicia la aplicaci√≥n, y luego la colecci√≥n se actualiza de forma as√≠ncrona, sincronizando la informaci√≥n con un servidor o una base de datos.  Las aplicaciones modernas son bastante complejas y, a menudo, es necesario crear proyecciones de colecciones: filtrar, transformar u ordenar elementos.  DynamicData fue dise√±ado para deshacerse del c√≥digo incre√≠blemente complejo que necesitar√≠amos para administrar conjuntos de datos que cambian din√°micamente.  La herramienta se est√° desarrollando y refinando activamente, y ahora se admiten m√°s de 60 operadores para trabajar con colecciones. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/hn/7j/v3/hn7jv3fv1qgfxlhqrd9g6dokkao.gif"></a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> no es una implementaci√≥n alternativa de <code>ObservableCollection&lt;T&gt;</code> .  La arquitectura de DynamicData se basa principalmente en conceptos de programaci√≥n basados ‚Äã‚Äãen dominio.  La ideolog√≠a de uso se basa en el hecho de que usted controla una determinada fuente de datos, una colecci√≥n a la que tiene acceso el c√≥digo responsable de sincronizar y mutar datos.  Luego, aplica una serie de operadores a la fuente de datos, con la ayuda de esos operadores puede transformar los datos declarativamente sin la necesidad de crear y modificar manualmente otras colecciones.  De hecho, con DynamicData separa las operaciones de lectura y escritura, y solo puede leer de manera reactiva; por lo tanto, las colecciones heredadas siempre permanecer√°n sincronizadas con la fuente. </p><br><p>  En lugar del cl√°sico <code>IObservable&lt;T&gt;</code> , DynamicData define operaciones en <code>IObservable&lt;IChangeSet&lt;T&gt;&gt;</code> e <code>IObservable&lt;IChangeSet&lt;TValue, TKey&gt;&gt;</code> , donde <code>IChangeSet</code> es un fragmento que contiene informaci√≥n sobre el cambio de la colecci√≥n, incluido el tipo de cambio y los elementos afectados.  Este enfoque puede mejorar significativamente el rendimiento del c√≥digo para trabajar con colecciones, escrito de manera reactiva.  Siempre puede transformar <code>IObservable&lt;IChangeSet&lt;T&gt;&gt;</code> en <code>IObservable&lt;IEnumerable&lt;T&gt;&gt;</code> , si es necesario acceder a todos los elementos de una colecci√≥n a la vez.  Si esto suena dif√≠cil, no se preocupe, ¬°los ejemplos de c√≥digo a continuaci√≥n lo aclarar√°n todo! </p><br><h1 id="dynamicdata-in-action">  Datos din√°micos en acci√≥n </h1><br><p>  Veamos una serie de ejemplos para comprender mejor c√≥mo funciona DynamicData, c√≥mo se diferencia del Sistema. Reactivo y qu√© tareas pueden ayudar a resolver los desarrolladores comunes de software GUI.  Comencemos con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un ejemplo completo publicado en GitHub</a> .  En este ejemplo, la fuente de datos es <code>SourceCache&lt;Trade, long&gt;</code> contiene una colecci√≥n de transacciones.  El objetivo es mostrar solo las transacciones activas, transformar los modelos en objetos proxy, ordenar la colecci√≥n. </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// The default collection from the System.Collections.ObjectModel // namespace, to which we bind XAML UI controls. ReadOnlyObservableCollection&lt;TradeProxy&gt; list; // The mutable data source, containing the list of transactions. // We can use Add, Remove, Insert and similar methods on it. var source = new SourceCache&lt;Trade, long&gt;(trade =&gt; trade.Id); var cancellation = source // Here we transform the data source to an observable change set. .Connect() // Now we have IObservable&lt;IChangeSet&lt;Trade, long&gt;&gt; here. // Filter only active transactions. .Filter(trade =&gt; trade.Status == TradeStatus.Live) // Transform the models into proxy objects. .Transform(trade =&gt; new TradeProxy(trade)) // No we have IObservable&lt;IChangeSet&lt;TrandeProxy, long&gt;&gt; // Order the trade proxies by timestamp. .Sort(SortExpressionComparer&lt;TradeProxy&gt; .Descending(trade =&gt; trade.Timestamp)) // Use the dispatcher scheduler to update the GUI. .ObserveOnDispatcher() // Bind the sorted objects to the collection from the // System.Collections.ObjectModel namespace. .Bind(out list) // Ensure that when deleting elements from the // collections, the resources will get disposed. .DisposeMany() .Subscribe();</span></span></code> </pre> <br><p>  En el ejemplo anterior, al cambiar <code>SourceCache</code> que es la fuente de los datos, <code>ReadOnlyObservableCollection</code> tambi√©n cambia en consecuencia.  Al mismo tiempo, al eliminar elementos de la colecci√≥n, se llamar√° al m√©todo <code>Dispose</code> , la colecci√≥n siempre se actualizar√° solo desde el hilo de la GUI y permanecer√° ordenada y filtrada.  Genial, ahora no tenemos <code>Dispatcher.Invoke</code> llamadas y el c√≥digo es simple y legible! </p><br><h1 id="data-sources-sourcelist-and-sourcecache">  Fuentes de datos  SourceList y SourceCache </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> proporciona dos colecciones especializadas que pueden usarse como fuente de datos mutable.  Estas colecciones son <code>SourceList&lt;TObject&gt;</code> y <code>SourceCache&lt;TObject, TKey&gt;</code> .  Se recomienda usar <code>SourceCache</code> siempre que <code>TObject</code> tenga una clave √∫nica; de lo contrario, use <code>SourceList</code> .  Estos objetos proporcionan la API familiar para desarrolladores de .NET para la administraci√≥n de colecciones, tales como <code>Add</code> , <code>Remove</code> , <code>Insert</code> .  Para convertir fuentes de datos a <code>IObservable&lt;IChangeSet&lt;T&gt;&gt;</code> o a <code>IObservable&lt;IChangeSet&lt;T, TKey&gt;&gt;</code> , use el operador <code>.Connect()</code> .  Por ejemplo, si tiene un servicio que actualiza peri√≥dicamente una colecci√≥n de elementos en segundo plano, puede sincronizar f√°cilmente la lista de estos elementos con la GUI, sin <code>Dispatcher.Invoke</code> y un c√≥digo similar: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BackgroundService</span></span> : <span class="hljs-title"><span class="hljs-title">IBackgroundService</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Declare the mutable data source containing trades. private readonly SourceList&lt;Trade&gt; _trades; // Expose the observable change set to the outside world. // If we have more than one subscriber, it is recommended // to use the Publish() operator from reactive extensions. public IObservable&lt;IChangeSet&lt;Trade&gt;&gt; Connect() =&gt; _trades.Connect(); public BackgroundService() { _trades = new SourceList&lt;Trade&gt;(); _trades.Add(new Trade()); // Mutate the source list! // Even from the background thread. } }</span></span></code> </pre> <br><p>  Con la ayuda de los poderosos operadores DynamicData, podemos transformar <code>IObservable&lt;IChangeSet&lt;Trade&gt;&gt;</code> en <code>ReadOnlyObservableCollection</code> declarada en nuestro modelo de vista. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TradesViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">ReactiveObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ReadOnlyObservableCollection&lt;TradeVm&gt; _trades; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReadOnlyObservableCollection&lt;TradeVm&gt; Trades =&gt; _trades; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TradesViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBackgroundService background</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Connect to the data source, transform elements, bind // them to the read-only observable collection. background.Connect() .Transform(x =&gt; new TradeVm(x)) .ObserveOn(RxApp.MainThreadScheduler) .Bind(out _trades) .DisposeMany() .Subscribe(); } }</span></span></code> </pre> <br><p>  Adem√°s de los operadores <code>Transform</code> , <code>Filter</code> y <code>Sort</code> , DynamicData admite agrupaci√≥n, operaciones l√≥gicas, aplanamiento de colecciones, el uso de funciones agregadas, la eliminaci√≥n de elementos id√©nticos, el recuento de elementos e incluso la virtualizaci√≥n a nivel de modelo de vista.  Puede leer m√°s sobre todos los operadores en <a href="">el archivo README del proyecto en GitHub</a> . </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/jy/6-/4a/jy6-4azw__6rou9alucffpjhkrq.gif"></a> <br><br>  Adem√°s de <code>SourceList</code> y <code>SourceCache</code> , la biblioteca DynamicData incluye una implementaci√≥n de colecci√≥n mutable de un solo subproceso: <code>ObservableCollectionExtended</code> .  Para sincronizar dos colecciones en su modelo de vista, declare una de ellas como <code>ObservableCollectionExtended</code> y la otra como <code>ReadOnlyObservableCollection</code> , y luego use el operador <code>ToObservableChangeSet</code> , que hace casi lo mismo que Connect, pero est√° destinado a funcionar con <code>ObservableCollection</code> . </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// Declare the derived collection. ReadOnlyObservableCollection&lt;TradeVm&gt; _derived; // Declare and initialize the source collection. var source = new ObservableCollectionExtended&lt;Trade&gt;(); source.ToObservableChangeSet(trade =&gt; trade.Key) .Transform(trade =&gt; new TradeProxy(trade)) .Filter(proxy =&gt; proxy.IsChecked) .Bind(out _derived) .Subscribe();</span></span></code> </pre> <br><p>  DynamicData tambi√©n admite el seguimiento de cambios en clases que implementan la interfaz <code>INotifyPropertyChanged</code> .  Por ejemplo, si desea recibir notificaciones cada vez que cambia una propiedad, use el operador <code>AutoRefresh</code> y pase el selector de propiedades requerido.  <code>AutoRefresh</code> y otros operadores de DynamicData pueden permitirle validar sin esfuerzo un gran n√∫mero de formularios y formularios anidados que se muestran en la pantalla! </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// IObservable&lt;bool&gt; var isValid = databases .ToObservableChangeSet() // Subscribe only to IsValid property changes. .AutoRefresh(database =&gt; database.IsValid) // Materialize the collection. .ToCollection() // Determine if all forms are valid. .Select(x =&gt; x.All(y =&gt; y.IsValid)); // If ReactiveUI is used, you can transform the // IObservable&lt;bool&gt; variable to a property declared // as ObservableAsPropertyHelper&lt;bool&gt;, eg IsValid. _isValid = isValid .ObserveOn(RxApp.MainThreadScheduler) .ToProperty(this, x =&gt; x.IsValid);</span></span></code> </pre> <br><p>  Puede crear interfaces de usuario complejas utilizando la funcionalidad DynamicData, y es especialmente relevante para sistemas que muestran una gran cantidad de datos en tiempo real, como aplicaciones de mensajer√≠a instant√°nea y sistemas de monitoreo. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/98/nh/ws/98nhws7gl4yzk8kgcovbpvvozoi.gif"></a> <br><br></p><br><h1 id="conclusion">  Conclusi√≥n </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ReactiveX</a> es una herramienta poderosa que le permite trabajar con flujos de eventos y con la interfaz de usuario, escribir c√≥digo port√°til y mantenible y resolver tareas complejas de una manera simple y elegante.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ReactiveUI</a> permite a los desarrolladores de .NET integrar extensiones reactivas en sus proyectos utilizando la arquitectura MVVM con implementaciones reactivas de <code>INotifyPropertyChanged</code> e <code>ICommand</code> , mientras que DynamicData se encarga de la gesti√≥n de la colecci√≥n al implementar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>INotifyCollectionChanged</code></a> , ampliando las capacidades de las extensiones reactivas con enfoque en el rendimiento. </p><br><p>  Las bibliotecas ReactiveUI y DynamicData son totalmente compatibles con todos los marcos de GUI en la plataforma .NET, incluidas Windows Presentation Foundation, Universal Windows Platform, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Avalonia</a> , Xamarin.Android, Xamarin Forms y Xamarin iOS.  Puede comenzar a estudiar DynamicData en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la p√°gina correspondiente de la documentaci√≥n de ReactiveUI</a> .  Tambi√©n tenga cuidado de familiarizarse con el proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData Snippets</a> , que contiene ejemplos de c√≥digo para casi todo lo que pueda necesitar. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/454074/">https://habr.com/ru/post/454074/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454062/index.html">Tel√©fono corporativo, como un cuchillo suizo: para inventario, chat, llamadas de soporte y consultas</a></li>
<li><a href="../454064/index.html">La historia no contada de la IA</a></li>
<li><a href="../454066/index.html">C√≥mo dejar de olvidarse de los √≠ndices y comenzar a verificar el plan de ejecuci√≥n en las pruebas</a></li>
<li><a href="../454070/index.html">Elegir un monowheel para viajar</a></li>
<li><a href="../454072/index.html">Cinco grandes ejemplos de mentiras sobre 5G</a></li>
<li><a href="../454076/index.html">DotNext 2019 Piter: peque√±o informe</a></li>
<li><a href="../454078/index.html">"Contenido m√≥vil" de forma gratuita, sin SMS ni registros. Detalles de fraude de meg√°fono</a></li>
<li><a href="../454082/index.html">Ondas pl√°sticas: desastre ecol√≥gico de los oc√©anos.</a></li>
<li><a href="../454084/index.html">Directrices en vivo: MDX y otros marcos</a></li>
<li><a href="../454086/index.html">¬øQu√© recordaba RIT ++ 2019?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>