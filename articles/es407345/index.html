<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¥ üëû üëäüèΩ Sportiduino. Sistema de marcadores electr√≥nicos para orientaci√≥n. Parte 2 üêÜ üßôüèª üëÇüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚Üí Parte 1 

 Han transcurrido 5 meses desde la redacci√≥n del √∫ltimo art√≠culo, desde entonces se finaliz√≥ el firmware, y ahora las estaciones funcionan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sportiduino. Sistema de marcadores electr√≥nicos para orientaci√≥n. Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/407345/">  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/59/dd/08/59dd0899a856e813516557.jpeg"></div><br>  Han transcurrido 5 meses desde la redacci√≥n del √∫ltimo art√≠culo, desde entonces se finaliz√≥ el firmware, y ahora las estaciones funcionan de manera a√∫n m√°s confiable, y los chips baratos tienen 92 marcas, lo cual es suficiente para satisfacer casi cualquier fantas√≠a de directores.  Tambi√©n prob√≥ con √©xito el sistema en competiciones. <br><a name="habracut"></a><br>  Cuando escrib√≠ la √∫ltima vez, solo se ensamblaron 15 estaciones, el sistema se prob√≥ solo en el laberinto deportivo local, y la pr√≥xima tarea de probar en competiciones m√°s masivas y aut√≥nomas, que era la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Segunda Luz de Mosc√∫"</a> , estaba por delante.  Estas son competiciones de orientaci√≥n tur√≠stica de dos d√≠as con estad√≠a obligatoria de una noche y total autonom√≠a de los participantes.  Solo 41 puntos de control, una gran cantidad de opciones de tr√°fico, la distancia total fue de 55 kil√≥metros en l√≠nea recta.  Participaron alrededor de 150 participantes.  Todo esto plante√≥ un serio desaf√≠o para el sistema de marcado. <br><br>  En primer lugar, era necesario soldar otras 25 estaciones.  No quer√≠a hurgar con el bot√≠n y la fotorresistencia a tal escala, as√≠ que orden√© la fabricaci√≥n en China.  Result√≥ ser muy econ√≥mico y muy conveniente.  Se volvi√≥ mucho m√°s agradable de soldar con tablas prefabricadas, y hab√≠a menos matrimonio para salir, los pa√±uelos se ve√≠an verdes y bastante limpios.  Es cierto que todav√≠a ten√≠a que jugar y pasar varios d√≠as de descanso.  Ahora estoy pensando en una mayor automatizaci√≥n, utilizando plantillas y pasta de soldadura. <br><br><img src="https://habrastorage.org/webt/59/dd/07/59dd07bcaad86559567504.jpeg"><br><br>  No cambi√© las etapas posteriores del ensamblaje, tambi√©n pegu√© las placas a la caja a trav√©s del LED y lo llen√© con un compuesto.  Estaba seco en las competiciones, por lo que no pude probar la supervivencia de las estaciones durante la lluvia, pero las pruebas preliminares de varias estaciones en la naturaleza bajo diferentes condiciones clim√°ticas a√∫n no han revelado la inestabilidad del agua.  Adem√°s, pego tiras reflectantes en la carcasa y la sujeta con un cable de acero con clips. <br><br><img src="https://habrastorage.org/webt/59/dd/07/59dd07bc65fb5446121377.jpeg"><br><br>  El firmware ha sufrido varios cambios.  Se implement√≥ la capacidad de registrar n√∫meros de estaciones marcados con chips debido a la memoria interna EEPROM del microcontrolador.  Si asigna una direcci√≥n a cada bit, hay suficientes para 6000 n√∫meros de chip.  Esto es necesario en caso de resoluci√≥n de cualquier fuerza mayor, por ejemplo, la b√∫squeda de un participante perdido, bueno, y para resolver casos en disputa.  Hasta ahora, solo hay suficiente memoria para registrar el hecho de la marca, el tiempo de la marca no se registra.  En el futuro, con el desarrollo del sistema, estoy pensando en agregar un chip de memoria EEPROM separado para este prop√≥sito. <br><br>  Como el sistema est√° abierto y todas las especificaciones son accesibles para todos, alguien puede grabar cualquier chip maestro utilizando un dispositivo NFC.  Existe la posibilidad de vandalismo - reprogramaci√≥n de estaciones instaladas.  Y aqu√≠, a diferencia de si la estaci√≥n simplemente se rompiera, se puede introducir un error en los resultados, lo cual es dif√≠cil de notar.  Para protegerse contra este fen√≥meno, se introdujo un sistema de contrase√±a.  Tambi√©n se agreg√≥ la capacidad de configurar la estaci√≥n, el uso de estaciones de inicio y finalizaci√≥n.  En este modo, la estaci√≥n de inicio solo aceptar√° chips limpios, otras estaciones responder√°n al chip solo con una marca en la estaci√≥n de inicio, y despu√©s del final, el chip ya no se marcar√° en otras estaciones antes de la limpieza.  Esto evitar√° errores molestos y accidentes. <br><br>  En las competiciones en s√≠, se utiliz√≥ una versi√≥n antigua comprobada del firmware con la capacidad de grabar en chips de hasta 46 marcas, lo cual fue bastante satisfactorio para la competencia.  Pero desde entonces, la posibilidad de aumentar la densidad de grabaci√≥n ya ha sido probada.  La principal preocupaci√≥n era la necesidad de sobrescribir los datos de la marca anterior al grabar marcas pares, ya que la escritura en el chip se realiza en bloques de 16 bytes.  Pero, las pruebas mostraron la fiabilidad de la grabaci√≥n, todav√≠a no pude detectar el error, no importa cu√°n torcidamente haya aplicado el chip.  Adem√°s, los datos grabados se cifran <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">con un c√≥digo Hamming</a> en dos bloques de 4 bytes, lo que tambi√©n aumenta la fiabilidad del sistema. <br><br><img src="https://habrastorage.org/webt/59/dd/07/59dd07bcc6bb0196236295.jpeg"><br><br>  La puerta de enlace desde entonces ha cambiado significativamente.  Se decidi√≥ ir en la direcci√≥n de la simplificaci√≥n, ahora la estaci√≥n consta de un Arduino Nano, un m√≥dulo RFID, un LED, un tweeter y un par de resistencias.  Tambi√©n ped√≠ una bufanda de China, pero no calcul√© un poco el tama√±o, as√≠ que me met√≠ en el caso con dificultad. <br><br><img src="https://habrastorage.org/webt/59/dd/07/59dd07bcca677958621138.jpeg"><br><br>  La opci√≥n result√≥ ser bastante conveniente.  La estaci√≥n est√° conectada a la computadora a trav√©s de USB.  La transferencia de datos ocurre a trav√©s del puerto COM.  Para su uso, debe colocar el chip en la estaci√≥n y enviar un comando seg√∫n el prop√≥sito: leer el chip, borrar el chip, actualizar la hora en la estaci√≥n, etc. <br><br>  Para automatizar el proceso de trabajar con el sistema, se escribi√≥ un programa en el entorno de programaci√≥n de procesamiento.  Dio la casualidad de que el entorno result√≥ ser muy f√°cil de aprender y usar despu√©s de Arduino, aparentemente debido a su afinidad.  Es cierto, el programa fue escrito muy desordenado, las muletas est√°n en todas partes y el c√≥digo est√° tan torcido que yo mismo apenas entiendo ahora qu√© est√° sucediendo d√≥nde.  Pero funciona, la interfaz es bastante simple: <br><br><img src="https://habrastorage.org/webt/59/dd/09/59dd09dccdb0e912768582.png"><br><br>  El programa le permite configurar estaciones, grabar, leer resultados, procesar para diferentes tipos de competiciones por separado para grupos y distancias.  La configuraci√≥n, la introducci√≥n de protocolos y las distancias se realizan manualmente en archivos csv separados.  Los resultados calculados tambi√©n se exportan como una tabla csv.  S√≠, a este respecto, todo sigue siendo primitivo, pero el programa hace frente a la tarea principal.  En competencias anteriores, el programa nos permiti√≥ calcular en tiempo real los resultados que transmitimos en un monitor externo para la conveniencia de los participantes. <br><br><img src="https://habrastorage.org/webt/59/dd/07/59dd07bc7cab0171368523.jpeg"><br><br>  Las pruebas del sistema, as√≠ como las competiciones en s√≠, tuvieron √©xito.  Las 40 estaciones funcionaron correctamente durante dos d√≠as, los resultados se obtuvieron inmediatamente cuando llegaron los participantes.  Probablemente el software es actualmente el sistema m√°s estrecho.  Ahora estoy ocupado con otro proyecto, pero creo que despu√©s del a√±o nuevo me ocupar√© de este problema, quiero aprender Qt como primera aproximaci√≥n y hacer un programa m√°s conveniente en √©l.  Pero si alguien est√° interesado en crear software o soporte sportiduino en el existente, estar√© encantado de cooperar. <br><br>  Tambi√©n existe una capacidad alternativa para trabajar con el sistema a trav√©s del tel√©fono con Android que funciona con NFC.  Puede leer y escribir chips, programar estaciones sin usar una computadora, lo que puede ser especialmente conveniente en el campo. <br><br>  El proyecto existe sobre los principios de Open Sourse.  Todos los esquemas de firmware est√°n disponibles en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Github</a> .  All√≠, en la wiki, se recopilan instrucciones detalladas sobre el ensamblaje y los principios del dispositivo del sistema, hay un manual general en formato pdf en la ra√≠z del repositorio.  Quienes lo deseen pueden crear su propia copia del sistema, as√≠ como realizar cambios en el dise√±o y el software.  Estar√© encantado de comentarios. <br><br>  Tengo la intenci√≥n de seguir desarrollando el proyecto en este sentido.  En primer lugar, debe crear un software normal.  En cuanto a los circuitos, tambi√©n hay planes de desarrollo, quiero hacer un dispositivo m√°s compacto, soldar todo el circuito en una placa, agregar memoria adicional y alimentar todo desde CR123. <br><br>  Expreso mi gratitud a Sergey Titov, Ilya Arkhipovsky y Dmitry Fedotov por una serie de ideas y comentarios valiosos.  Tambi√©n agradezco a la comunidad geektimes y a todos los interesados.  Sus comentarios, ideas y apoyo han jugado mucho en el desarrollo del proyecto. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es407345/">https://habr.com/ru/post/es407345/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es407335/index.html">Nota para el astr√≥nomo: montaje ecuatorial h√°galo usted mismo</a></li>
<li><a href="../es407337/index.html">Hackear una computadora en 3 segundos. Hacer USB Duck desde cero en Arduino</a></li>
<li><a href="../es407339/index.html">Nueva bacteria OGM gen√©ticamente programada para construir un panel t√°ctil</a></li>
<li><a href="../es407341/index.html">Preg√∫ntele a Ethan: si la gravedad atrae, ¬øc√≥mo puede un "reflector dipolo" repeler la V√≠a L√°ctea?</a></li>
<li><a href="../es407343/index.html">C√≥mo calcular de forma independiente el precio de la carcasa de un dispositivo en un par de minutos</a></li>
<li><a href="../es407347/index.html">C√°mara DJI 6K - Zenmuse X7 de 35 mm</a></li>
<li><a href="../es407351/index.html">La startup rusa produce calentadores criptogr√°ficos de habitaciones a $ 4,500 cada uno</a></li>
<li><a href="../es407355/index.html">Nvidia presenta el sistema de realidad virtual compartida Holodeck</a></li>
<li><a href="../es407357/index.html">Los m√©dicos deben prescribir un sue√±o: por qu√© la privaci√≥n del sue√±o puede costarle</a></li>
<li><a href="../es407359/index.html">Fluctuaciones cu√°nticas y su energ√≠a</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>