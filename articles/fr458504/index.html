<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéâ üë®üèæ‚Äçüéì üë®üèΩ‚Äçüíº 13 astuces pour gagner du temps üë©‚Äçüíª üëåüèø üßìüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Chaque jour, des millions de d√©veloppeurs, lors de la cr√©ation de leurs applications JavaScript, se tournent vers npm (ou vers Yarn). L'ex√©cution de c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>13 astuces pour gagner du temps</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/458504/"> Chaque jour, des millions de d√©veloppeurs, lors de la cr√©ation de leurs applications JavaScript, se tournent vers npm (ou vers Yarn).  L'ex√©cution de commandes comme <code>npm init</code> ou <code>npx create-react-app</code> est devenue un moyen familier de commencer √† travailler sur presque tous les projets JavaScript.  Il peut s'agir d'un serveur, d'un client ou m√™me d'une application de bureau. <br><br>  Mais l'utilitaire npm n'est pas seulement capable d'initialiser des projets ou d'installer des packages.  L'auteur du mat√©riel, dont nous publions la traduction aujourd'hui, veut parler de 13 astuces de npm qui vous permettront de tirer tout ce qui est possible de ce syst√®me.  Ici, nous consid√©rerons des techniques de diff√©rentes tailles - de l'utilisation de raccourcis √† la personnalisation du comportement de <code>npm init</code> . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/_5/ae/8r/_5ae8rwztut9iad5acmba7qf23a.jpeg"></a> <br><br>  De nombreux programmeurs utilisent quotidiennement npm.  Cela signifie qu'√† long terme, m√™me un petit gain de temps peut changer quelque chose pour le mieux.  Ce mat√©riel est principalement destin√© aux d√©veloppeurs d√©butants et aux d√©veloppeurs de niveau interm√©diaire.  Cependant, m√™me si vous √™tes un professionnel, l'auteur du document esp√®re que vous trouverez ici quelques choses int√©ressantes que vous n'avez jamais rencontr√©es auparavant. <br><br>  Si vous n'√™tes pas familier avec npm - sachez que le programme qui nous int√©resse est install√© avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Node.js.</a>  Si vous travaillez sous Windows, il est recommand√© d'installer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Git Bash</a> afin de reproduire une partie de ce qui est discut√© ici. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">1. Options br√®ves pour l'enregistrement des commandes de base</font> </h2><br>  Commen√ßons par les bases.  En passant un peu de temps √† explorer les versions abr√©g√©es des commandes npm les plus courantes, vous vous √©pargnerez beaucoup de temps √† l'avenir. <br><br><ul><li>  Installez les packages.  Option normale: <code>npm install</code> .  Raccourci: <code>npm i</code> . </li><li>  Ex√©cution de tests.  Option normale: <code>npm test</code> .  Raccourci: <code>npm t</code> . </li><li>  Aidez-moi.  Option courante: <code>npm --help</code> .  Raccourci: <code>npm -h</code> . </li><li>  Indicateur de param√®tre global.  Option courante: <code>--global</code> .  Raccourci: <code>-g</code> . </li><li>  Indicateur d'installation du package en tant que d√©pendance de d√©veloppement.  L'option habituelle est <code>--save-dev</code> .  Raccourci: <code>-D</code> . </li><li>  <code>npm init</code> param√®tres d' <code>npm init</code> par d√©faut.  L'option habituelle est <code>npm init --yes</code> ou <code>npm init --force</code> .  Raccourci: <code>npm init -y</code> ou <code>npm init -f</code> . </li></ul><br>  D√©sormais, vous n'avez plus besoin d'utiliser l' <code>--save</code> ou <code>-S</code> pour enregistrer les packages.  Les packages sont enregistr√©s par d√©faut.  Et pour installer un paquet sans l'enregistrer, vous pouvez utiliser l'indicateur <code>--no-save</code> . <br><br><h3>  <font color="#3AC1EF">‚ñçOptions d'enregistrement courtes pour les commandes moins courantes</font> </h3><br>  Voici quelques abr√©viations plus utiles, qui ne sont cependant pas utilis√©es aussi largement que celles que nous venons de passer en revue. <br><br><ul><li>  Enregistrement d'un package en tant que d√©pendance facultative.  L'option habituelle: <code>--save-optional</code> .  Raccourci: <code>-O</code> . </li><li>  Enregistrement d'informations sur la version exacte du package.  L'option habituelle est <code>--save-exact</code> .  Raccourci: <code>-E</code> . </li></ul><br>  L'utilisation de la commande <code>npm install</code> avec le <code>--save-bundle</code> ou <code>-B</code> fait appara√Ætre les entr√©es des bundles install√©s dans <code>package.json</code> , dans la section <code>bundledDependencies</code> .  Ces packages seront fournis avec le projet lors de leur publication.  Pour cr√©er un fichier tarball contenant les fichiers de projet et les packages r√©pertori√©s dans <code>bundledDependencies</code> , vous pouvez utiliser la commande <code>npm pack</code> . <br><br><h3>  <font color="#3AC1EF">‚ñç Abr√©viation du r√©pertoire racine</font> </h3><br>  En r√®gle g√©n√©rale, le symbole point ( <code>.</code> ) Est utilis√© pour repr√©senter le r√©pertoire racine d'une application ou (selon le contexte) pour repr√©senter un point d'entr√©e vers une application.  Dans npm, c'est ce qui est d√©fini comme la valeur de la propri√©t√© <code>main</code> dans le fichier <code>package.json</code> : <br><br><pre> <code class="plaintext hljs">{  "main": "index.js" }</code> </pre> <br>  Ce raccourci peut √™tre utilis√©, par exemple, avec des commandes comme <code>npx create-react-app</code> .  Ainsi, au lieu d'ex√©cuter cette commande sous la forme de <code>npx create-react-app my-app</code> (qui conduira √† la cr√©ation d'un nouveau dossier <code>my-app</code> ), vous pouvez ex√©cuter cette commande comme ceci: <code>npx create-react-app .</code>  (faites attention au point qui vient apr√®s la commande).  Cela vous permettra de cr√©er un projet de mod√®le d'application React dans le dossier dans lequel vous vous trouvez au moment o√π la commande est ex√©cut√©e. <br><br><h2>  <font color="#3AC1EF">2. D√©finition des valeurs par d√©faut pour npm init</font> </h2><br>  En ex√©cutant constamment la commande <code>npm init</code> pour cr√©er un nouveau projet, vous constaterez tr√®s probablement que vous entrez les m√™mes donn√©es encore et encore en r√©ponse aux questions du syst√®me.  Par exemple - il est probable que vous √™tes l'auteur de la plupart des projets que vous cr√©ez.  Afin de gagner du temps lors de la saisie des m√™mes donn√©es, vous pouvez d√©finir vos propres valeurs par d√©faut pour les champs correspondants: <br><br><pre> <code class="plaintext hljs">npm config set init.author.name "Joe Bloggs" npm config set init.author.email "joebloggs@gmail.com" npm config set init.author.url  "joebloggs.com" npm config set init.license   "MIT"</code> </pre> <br>  Afin de v√©rifier l'exactitude de l'ajout de telles informations au syst√®me, entrez la commande d' <code>npm config edit</code> .  Cela ouvrira le fichier de configuration dans l'√©diteur syst√®me.  Si vous souhaitez modifier les param√®tres globaux de npm, utilisez la commande <code>npm config edit -g</code> . <br><br>  Afin de revenir aux param√®tres par d√©faut, vous pouvez utiliser le script suivant.  Sa premi√®re ligne supprime les donn√©es de configuration du fichier et la seconde les remplit avec des valeurs par d√©faut. <br><br><pre> <code class="plaintext hljs">echo "" &gt; $(npm config get userconfig) npm config edit</code> </pre> <br>  Le script ci-dessus r√©initialise les valeurs par d√©faut pour l'utilisateur.  Le script suivant r√©initialise les valeurs par d√©faut globales: <br><br><pre> <code class="plaintext hljs">echo "" &gt; $(npm config get globalconfig) npm config --global edit</code> </pre> <br><h2>  <font color="#3AC1EF">3. Scripts multiplateformes</font> </h2><br>  Tout code ex√©cut√© sur la ligne de commande peut rencontrer des probl√®mes de compatibilit√©.  Cela est particuli√®rement vrai pour les incompatibilit√©s entre les syst√®mes Windows et Unix (cela inclut Mac et Linux).  Ce n'est pas un probl√®me si vous et vous seul travaillez sur un certain projet.  Mais dans de nombreux cas, la compatibilit√© des scripts multiplateforme est importante.  Par exemple, travailler ind√©pendamment du syst√®me d'exploitation est un √©norme avantage pour tout projet open source, de formation ou de d√©monstration. <br><br>  Heureusement, la r√©solution du probl√®me de compatibilit√© des scripts n'est pas particuli√®rement difficile.  Nous avons plusieurs options √† notre disposition.  Cependant, ici, je voudrais parler de l'un d'eux, de l'utilisation dont j'ai obtenu les meilleurs r√©sultats.  Il s'agit d'un package <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cross-env</a> .  Il doit √™tre install√© en tant que d√©pendance de d√©veloppement √† l'aide de la commande <code>npm i -D cross-env</code> .  Ensuite, vous devez mettre <code>cross-env</code> devant chaque variable d'environnement.  Par exemple, cela pourrait ressembler √† ceci: <br><br><pre> <code class="plaintext hljs">{  "scripts": {    "build": "cross-env NODE_ENV=production webpack --config build/webpack.config.js" }</code> </pre> <br>  J'ai trouv√© que le package <code>cross-env</code> est l'outil le plus pratique pour atteindre la compatibilit√© des scripts multiplateforme.  Mais il vous sera utile de jeter un ≈ìil aux deux outils populaires suivants qui peuvent vous aider √† r√©soudre ce probl√®me: <br><br><ul><li>  Forfait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rimraf</a> .  Il, pour ex√©cuter des scripts multiplateformes, peut √™tre install√© globalement. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Package ShellJS</a> .  Il s'agit d'une impl√©mentation Node.js portable du shell de commande Unix. </li></ul><br><h2>  <font color="#3AC1EF">4. Ex√©cution parall√®le de scripts</font> </h2><br>  Afin d'organiser l'ex√©cution s√©quentielle des commandes dans le shell Linux, la construction <code>&amp;&amp;</code> est utilis√©e.  Qu'en est-il de l'ex√©cution de scripts parall√®les?  Pour ce faire, vous pouvez choisir le package npm appropri√©.  Les packages les plus populaires de ce type sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">simultan√©ment</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">npm-run-all</a> .  Ici, nous montrons l'utilisation du package simultan√©ment. <br><br>  Tout d'abord, le package s√©lectionn√© doit √™tre install√© en tant que d√©pendance de d√©veloppement: <code>npm i -D concurrently</code> .  Ensuite, dans <code>package.json</code> vous pouvez utiliser une construction de la forme suivante: <br><br><pre> <code class="plaintext hljs">{  "start": "concurrently \"command1 arg\" \"command2 arg\"" }</code> </pre> <br><h2>  <font color="#3AC1EF">5. Ex√©cution de scripts situ√©s dans divers r√©pertoires</font> </h2><br>  Parfois, vous rencontrez des applications qui ont plusieurs fichiers <code>package.json</code> situ√©s dans diff√©rents r√©pertoires.  Il serait pratique, par exemple, d'ex√©cuter des scripts qui y sont d√©clar√©s, se trouvant dans le r√©pertoire racine du projet.  C'est bien mieux que de devoir voyager dans diff√©rents dossiers chaque fois que vous devez ex√©cuter un script.  Pour ce faire, vous pouvez utiliser les deux approches suivantes. <br><br>  Pour commencer, vous pouvez utiliser la <code>cd</code> pour naviguer automatiquement vers le r√©pertoire souhait√©.  Cela peut ressembler √† ceci: <br><br><pre> <code class="plaintext hljs">cd folder &amp;&amp; npm start &amp;&amp; cd ..</code> </pre> <br>  Mais ce probl√®me peut √™tre r√©solu d'une mani√®re plus int√©ressante.  Il consiste √† utiliser l'indicateur <code>--prefix</code> , avec lequel vous pouvez sp√©cifier le chemin: <br><br><pre> <code class="plaintext hljs">npm start --prefix path/to/your/folder</code> </pre> <br>  Voici un exemple d'application de cette solution √† partir d'une application r√©elle.  Ici, nous devons ex√©cuter <code>npm start</code> pour les parties client et serveur du projet.  Leur code, respectivement, se trouve dans les dossiers <code>client</code> et <code>server</code> . <br><br><pre> <code class="plaintext hljs">"start": "concurrently \"(npm start --prefix client)\" \"(npm start --prefix server)\"",</code> </pre> <br><h2>  <font color="#3AC1EF">6. Retarder le lancement du script jusqu'√† ce qu'une ressource soit disponible</font> </h2><br>  Lors du d√©veloppement d'applications √† pile compl√®te, il est souvent n√©cessaire d'ex√©cuter les parties client et serveur de l'application.  Le package d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">attente</a> vous permet de synchroniser l'ex√©cution de certains processus.  Dans notre cas, il est n√©cessaire qu'avant de d√©marrer la partie client de l'application, un certain port soit disponible. <br><br>  Par exemple, il existe un script de d√©veloppement utilis√© dans une application Electron dont l'interface est √©crite √† l'aide de React.  Le script, en utilisant <code>concurrently</code> , ex√©cute la couche de pr√©sentation de l'application et la fen√™tre Electron en parall√®le.  Mais en utilisant l' <code>wait-on</code> vous ne pouvez ouvrir la fen√™tre Electron que lorsque la couche de pr√©sentation React est pr√™te √† l'emploi et est disponible sur <code>http://localhost:3000</code> .  Voici √† quoi ressemble l' <code>wait-on</code> : <br><br><pre> <code class="plaintext hljs">"dev": "concurrently \"cross-env BROWSER=none npm run start\" \"wait-on http://localhost:3000 &amp;&amp; electron .\"",</code> </pre> <br>  De plus, le comportement standard des projets React consiste √† ouvrir automatiquement une fen√™tre de navigateur.  Si vous utilisez React avec Electron, cela n'est pas n√©cessaire.  Ceci peut √™tre <code>BROWSER=none</code> √† l'aide de la variable d'environnement <code>BROWSER=none</code> , avant laquelle, pour des raisons de compatibilit√© multiplateforme de la solution, il existe la commande <code>cross-env</code> . <br><br><h2>  <font color="#3AC1EF">7. Liste et utilisation des scripts disponibles</font> </h2><br>  Afin de lister les scripts disponibles dans <code>package.json</code> , allez simplement dans le r√©pertoire racine du projet et ex√©cutez la commande <code>npm run</code> dans le terminal. <br><br>  Mais il existe un moyen encore plus pratique de r√©pertorier les scripts.  Lorsque vous l'utilisez, le script souhait√© peut √™tre imm√©diatement s√©lectionn√© dans la liste et ex√©cut√©.  Afin d'utiliser cette fa√ßon de travailler avec les scripts, nous devons installer globalement le <code>ntl</code> (Npm Task List): <br><br><pre> <code class="plaintext hljs">npm i -g ntl</code> </pre> <br>  Ensuite, dans le dossier du projet, vous devez ex√©cuter la commande <code>ntl</code> .  Il affichera une liste des scripts disponibles et vous donnera la possibilit√© de s√©lectionner le script √† ex√©cuter.  Voici √† quoi √ßa ressemble. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e7/8e6/7f2/6e78e67f2f7f520bba4d6aef31df3578.png"></div><br>  <i><font color="#999999">Utilisation de la commande ntl</font></i> <br><br>  Cette fonctionnalit√© peut √™tre tr√®s utile si vous ne savez pas exactement quels sont les scripts du projet.  C'est √©galement bon dans les cas o√π le programmeur veut remplacer l'entr√©e d'une commande longue pour ex√©cuter un script par l'entr√©e d'une commande courte et la pression rapide de quelques touches suppl√©mentaires sur le clavier. <br><br><h2>  <font color="#3AC1EF">8. Ex√©cution de pr√©-scripts et post-scripts</font> </h2><br>  Vous connaissez peut-√™tre les scripts de <code>postbuild</code> <code>prebuild</code> et de <code>prebuild</code> - <code>postbuild</code> qui vous permettent d'ex√©cuter du code avant et apr√®s l'ex√©cution du script de <code>build</code> .  Ces pr√©- et post-scripts peuvent √™tre d√©finis pour tout autre script.  Y compris ceux dont les descriptions sont ajout√©es √† p <code>ackage.json</code> par le programmeur. <br><br>  Cela vous permet non seulement de rendre le code plus propre, mais aide √©galement √† ex√©cuter les pr√© et post-scripts de mani√®re isol√©e. <br><br><h2>  <font color="#3AC1EF">9. Contr√¥le de la version de l'application</font> </h2><br>  Au lieu de modifier manuellement la version de l'application, le programmeur peut utiliser des commandes sp√©ciales <code>npm</code> .  Afin d'augmenter la partie correspondante du num√©ro de version de l'application, vous pouvez utiliser la commande <code>npm version</code> suivie de <code>major</code> , <code>minor</code> ou <code>patch</code> : <br><br><pre> <code class="plaintext hljs">// 1.0.0 npm version patch // 1.0.1 npm version minor // 1.1.0 npm version major // 2.0.0</code> </pre> <br>  Selon la fr√©quence √† laquelle vous mettez √† jour votre application, vous pouvez gagner du temps en augmentant automatiquement le num√©ro de version √† chaque fois que vous d√©ployez une nouvelle version de l'application.  Par exemple, comme ceci: <br><br><pre> <code class="plaintext hljs">{  "predeploy": "npm version patch" }</code> </pre> <br><h2>  <font color="#3AC1EF">10. Modification de package.json √† partir de la ligne de commande</font> </h2><br>  Le fichier package.json est un fichier json standard, il peut donc √™tre modifi√© directement √† partir de la ligne de commande √† l'aide de l'utilitaire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">json</a> .  Cela ouvre de nouvelles possibilit√©s dans les situations o√π vous devez modifier <code>package.json</code> , vous permettant de cr√©er vos propres versions raccourcies de commandes.  Installez le package <code>json</code> globalement: <br><br><pre> <code class="plaintext hljs">npm install -g json</code> </pre> <br>  L'utilitaire <code>json</code> peut ensuite √™tre utilis√© pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modifier</a> rapidement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le</a> fichier √† l'aide du <code>-I</code> .  Par exemple, pour ajouter un nouveau script <code>foo</code> avec la <code>bar</code> valeur au fichier, vous pouvez utiliser la commande suivante: <br><br><pre> <code class="plaintext hljs">json -I -f package.json -e 'this.scripts.foo="bar"'</code> </pre> <br>  Dans la section suivante, vous verrez un exemple plus pratique d'utilisation de l'utilitaire <code>json</code> . <br><br><h2>  <font color="#3AC1EF">11. Automatisation de la configuration et de l'ouverture du r√©f√©rentiel</font> </h2><br>  S'il existe une entr√©e <code>"repository"</code> dans votre fichier <code>package.json</code> , cela signifie que vous pouvez ouvrir la page du r√©f√©rentiel dans le navigateur utilis√© par d√©faut par le syst√®me.  Pour ce faire, utilisez la commande <code>npm repo</code> . <br><br>  Si votre projet est d√©j√† connect√© √† un r√©f√©rentiel distant et que l'utilitaire de ligne de commande <code>git</code> install√©, cela signifie que vous pouvez trouver l'adresse de votre r√©f√©rentiel √† l'aide de la commande suivante: <br><br><pre> <code class="plaintext hljs">git config --get remote.origin.url</code> </pre> <br>  Mais ce n'est pas tout.  Si, conform√©ment √† l'astuce pr√©c√©dente, vous avez install√© l'utilitaire <code>json</code> , vous pouvez utiliser le script suivant pour ajouter automatiquement les informations de r√©f√©rentiel correctes √† <code>package.json</code> : <br><br><pre> <code class="plaintext hljs">json -I -f package.json -e "this.repository=\"$(git config --get remote.origin.url)\""</code> </pre> <br><h2>  <font color="#3AC1EF">12. Cr√©ation de votre propre script pour contr√¥ler la commande npm init</font> </h2><br>  Parlons maintenant de la r√©solution d'une t√¢che plus importante.  √Ä savoir, nous allons d√©velopper notre propre script qui contr√¥le le fonctionnement de la commande <code>npm init</code> , qui accepte l'URL du r√©f√©rentiel GitHub et lui envoie automatiquement le premier commit.  Ici, nous parlons de la cr√©ation de tels scripts.  Et dans la section suivante, qui sera notre dernier conseil, nous parlerons de travailler avec <code>git</code> . <br><br>  Vous pouvez personnaliser le comportement de la commande <code>npm init</code> √† l'aide du <code>.npm-init.js</code> .  Cr√©ez un tel fichier dans le r√©pertoire personnel de l'utilisateur actuel (sous Windows, il s'agit g√©n√©ralement de <code>C:/Users/&lt;username&gt;</code> , et sur Mac, <code>/Users/&lt;username&gt;</code> ).  Apr√®s cela, ex√©cutez la commande suivante qui indique √† npm o√π se trouve exactement ce fichier: <br><br><pre> <code class="plaintext hljs">npm config set init-module ~\.npm-init.js</code> </pre> <br>  Avant l'int√©gration avec <code>git</code> , regardons un exemple simple du <code>.npm-init.js</code> , qui reproduit les questions que le syst√®me pose √† l'utilisateur lors de l'utilisation de la commande <code>npm init</code> sans param√®tres suppl√©mentaires: <br><br><pre> <code class="plaintext hljs">module.exports = {  name: prompt('package name', basename || package.name),  version: prompt('version', '0.0.0'),  decription: prompt('description', ''),   main: prompt('entry point', 'index.js'),  repository: prompt('git repository', ''),  keywords: prompt(function (s) { return s.split(/\s+/) }),  author: prompt('author', 'Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)'),  license: prompt('license', 'ISC') }</code> </pre> <br>  Chaque question est bas√©e sur le mod√®le suivant: <br><br><pre> <code class="plaintext hljs">nameInPackage: prompt('nameInPrompt', 'defaultValue')</code> </pre> <br>  Afin d'indiquer une certaine valeur et de ne pas poser de question √† l'utilisateur, supprimez simplement la m√©thode d' <code>prompt</code> . <br><br>  Si vous souhaitez revenir aux param√®tres d' <code>npm init</code> standard, supprimez simplement le <code>.npm-init.js</code> . <br><br><h2>  <font color="#3AC1EF">13. Envoi du premier commit au r√©f√©rentiel GitHub √† l'aide de npm init</font> </h2><br>  Afin d'ex√©cuter des commandes <code>git</code> dans le <code>.npm-init.js</code> nous devons trouver un moyen de travailler avec la ligne de commande.  Vous pouvez utiliser le module <code>child_process</code> pour <code>child_process</code> .  Nous le connectons en haut du fichier, et comme nous n'avons besoin que de la fonction <code>execSync</code> , nous l'importons uniquement, en utilisant la d√©structuration: <br><br><pre> <code class="plaintext hljs">const { execSync } = require('child_process');</code> </pre> <br>  De plus, nous allons cr√©er une fonction d'aide qui affiche les r√©sultats de notre fonction dans la console: <br><br><pre> <code class="plaintext hljs">function run(func) {  console.log(execSync(func).toString()) }</code> </pre> <br>  Et enfin, cr√©ons le bloc d'invite appropri√© pour g√©rer l'URL du r√©f√©rentiel GitHub.  Si le script a l'URL, nous cr√©erons le fichier <code>README.md</code> et enverrons le premier commit au r√©f√©rentiel. <br><br>  Ainsi, l'un des √©l√©ments de l'objet <code>.npm-init.js</code> doit √™tre le code suivant: <br><br><pre> <code class="plaintext hljs">repository: prompt('github repository url', '', function (url) {  if (url) {    run('touch README.md');    run('git init');    run('git add README.md');    run('git commit -m "first commit"');    run(`git remote add origin ${url}`);    run('git push -u origin master');   return url; })</code> </pre> <br>  Voici comment le code complet du fichier <code>.npm-init.js</code> doit se <code>.npm-init.js</code> de cet ajout: <br><br><pre> <code class="plaintext hljs">const { execSync } = require('child_process'); function run(func) {  console.log(execSync(func).toString()) } module.exports = {  name: prompt('package name', basename || package.name),  version: prompt('version', '0.0.0'),  decription: prompt('description', ''),  main: prompt('entry point', 'index.js'),  keywords: prompt(function (s) { return s.split(/\s+/) }),  author: prompt('author', 'Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)'),  license: prompt('license', 'ISC'),  repository: prompt('github repository url', '', function (url) {    if (url) {      run('touch README.md');      run('git init');      run('git add README.md');      run('git commit -m "first commit"');      run(`git remote add origin ${url}`);      run('git push -u origin master');       return url;  }), }</code> </pre> <br>  Voici √† quoi ressemble le fichier <code>package.json</code> que le syst√®me cr√©e √† l'aide de ce <code>.npm-init.js</code> : <br><br><pre> <code class="plaintext hljs">{  "name": "Custom npm init",  "version": "0.0.0",  "decription": "A test project, to demonstrate a custom npm init script.",  "main": "index.js",  "keywords": [],  "author": "Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)",  "license": "ISC",  "repository": {    "type": "git",    "url": "git+https://github.com/JoeBloggs/custom.git"  },  "bugs": {    "url": "https://github.com/JoeBloggs/custom/issues"  },  "homepage": "https://github.com/JoeBloggs/custom#readme" }</code> </pre> <br>  En mettant en place le processus d'initialisation de nouveaux projets, vous pouvez aller plus loin.  Par exemple, pour vous assurer que lors de la cr√©ation d'un projet, un nouveau r√©f√©rentiel sera cr√©√© pour celui-ci. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  J'esp√®re que ce mat√©riel vous a aid√© √† voir ce que vous pouvez r√©aliser avec npm.  Je veux croire que vous avez trouv√© quelque chose ici qui vous permettra de travailler de mani√®re plus productive - que nous parlions de l'utilisation de versions raccourcies de commandes, de scripts de <code>package.json</code> ou de la configuration de <code>npm init</code> en fonction de vos besoins. <br><br>  <b>Chers lecteurs!</b>  Automatisez-vous le travail avec npm? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/b4/fn/f5/b4fnf52x9i3mn80tttdafqtvkfe.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458504/">https://habr.com/ru/post/fr458504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458494/index.html">Un exemple pratique d'utilisation des fonctions de rendu de Vue: cr√©ation d'une grille typographique pour un syst√®me de conception</a></li>
<li><a href="../fr458496/index.html">Lignes directrices pratiques pour le d√©veloppement d'applications React √† grande √©chelle. Planification, actions, sources de donn√©es et API</a></li>
<li><a href="../fr458498/index.html">Lignes directrices pratiques pour le d√©veloppement d'applications React √† grande √©chelle. Partie 2: gestion des √©tats, routage</a></li>
<li><a href="../fr458500/index.html">M√©tamorphose des tests de redux-saga</a></li>
<li><a href="../fr458502/index.html">Le secret principal pour d√©velopper de bonnes applications Electron</a></li>
<li><a href="../fr458506/index.html">Pas Portal 3, mais close: t√©l√©portation quantique d'informations √† l'int√©rieur d'un diamant</a></li>
<li><a href="../fr458508/index.html">Un regard int√©rieur: √©cole doctorale √† l'EPFL. Partie 4.2: l'aspect financier</a></li>
<li><a href="../fr458514/index.html">La violation du RGPD est punie plus activement - de nouvelles amendes et l'impact des r√©glementations en dehors de l'UE</a></li>
<li><a href="../fr458516/index.html">Obtenez un journal de travail de Jira</a></li>
<li><a href="../fr458518/index.html">Python consomme beaucoup de m√©moire ou comment r√©duire la taille des objets?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>