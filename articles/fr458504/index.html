<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎉 👨🏾‍🎓 👨🏽‍💼 13 astuces pour gagner du temps 👩‍💻 👌🏿 🧓🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Chaque jour, des millions de développeurs, lors de la création de leurs applications JavaScript, se tournent vers npm (ou vers Yarn). L'exécution de c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>13 astuces pour gagner du temps</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/458504/"> Chaque jour, des millions de développeurs, lors de la création de leurs applications JavaScript, se tournent vers npm (ou vers Yarn).  L'exécution de commandes comme <code>npm init</code> ou <code>npx create-react-app</code> est devenue un moyen familier de commencer à travailler sur presque tous les projets JavaScript.  Il peut s'agir d'un serveur, d'un client ou même d'une application de bureau. <br><br>  Mais l'utilitaire npm n'est pas seulement capable d'initialiser des projets ou d'installer des packages.  L'auteur du matériel, dont nous publions la traduction aujourd'hui, veut parler de 13 astuces de npm qui vous permettront de tirer tout ce qui est possible de ce système.  Ici, nous considérerons des techniques de différentes tailles - de l'utilisation de raccourcis à la personnalisation du comportement de <code>npm init</code> . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/_5/ae/8r/_5ae8rwztut9iad5acmba7qf23a.jpeg"></a> <br><br>  De nombreux programmeurs utilisent quotidiennement npm.  Cela signifie qu'à long terme, même un petit gain de temps peut changer quelque chose pour le mieux.  Ce matériel est principalement destiné aux développeurs débutants et aux développeurs de niveau intermédiaire.  Cependant, même si vous êtes un professionnel, l'auteur du document espère que vous trouverez ici quelques choses intéressantes que vous n'avez jamais rencontrées auparavant. <br><br>  Si vous n'êtes pas familier avec npm - sachez que le programme qui nous intéresse est installé avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Node.js.</a>  Si vous travaillez sous Windows, il est recommandé d'installer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Git Bash</a> afin de reproduire une partie de ce qui est discuté ici. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">1. Options brèves pour l'enregistrement des commandes de base</font> </h2><br>  Commençons par les bases.  En passant un peu de temps à explorer les versions abrégées des commandes npm les plus courantes, vous vous épargnerez beaucoup de temps à l'avenir. <br><br><ul><li>  Installez les packages.  Option normale: <code>npm install</code> .  Raccourci: <code>npm i</code> . </li><li>  Exécution de tests.  Option normale: <code>npm test</code> .  Raccourci: <code>npm t</code> . </li><li>  Aidez-moi.  Option courante: <code>npm --help</code> .  Raccourci: <code>npm -h</code> . </li><li>  Indicateur de paramètre global.  Option courante: <code>--global</code> .  Raccourci: <code>-g</code> . </li><li>  Indicateur d'installation du package en tant que dépendance de développement.  L'option habituelle est <code>--save-dev</code> .  Raccourci: <code>-D</code> . </li><li>  <code>npm init</code> paramètres d' <code>npm init</code> par défaut.  L'option habituelle est <code>npm init --yes</code> ou <code>npm init --force</code> .  Raccourci: <code>npm init -y</code> ou <code>npm init -f</code> . </li></ul><br>  Désormais, vous n'avez plus besoin d'utiliser l' <code>--save</code> ou <code>-S</code> pour enregistrer les packages.  Les packages sont enregistrés par défaut.  Et pour installer un paquet sans l'enregistrer, vous pouvez utiliser l'indicateur <code>--no-save</code> . <br><br><h3>  <font color="#3AC1EF">▍Options d'enregistrement courtes pour les commandes moins courantes</font> </h3><br>  Voici quelques abréviations plus utiles, qui ne sont cependant pas utilisées aussi largement que celles que nous venons de passer en revue. <br><br><ul><li>  Enregistrement d'un package en tant que dépendance facultative.  L'option habituelle: <code>--save-optional</code> .  Raccourci: <code>-O</code> . </li><li>  Enregistrement d'informations sur la version exacte du package.  L'option habituelle est <code>--save-exact</code> .  Raccourci: <code>-E</code> . </li></ul><br>  L'utilisation de la commande <code>npm install</code> avec le <code>--save-bundle</code> ou <code>-B</code> fait apparaître les entrées des bundles installés dans <code>package.json</code> , dans la section <code>bundledDependencies</code> .  Ces packages seront fournis avec le projet lors de leur publication.  Pour créer un fichier tarball contenant les fichiers de projet et les packages répertoriés dans <code>bundledDependencies</code> , vous pouvez utiliser la commande <code>npm pack</code> . <br><br><h3>  <font color="#3AC1EF">▍ Abréviation du répertoire racine</font> </h3><br>  En règle générale, le symbole point ( <code>.</code> ) Est utilisé pour représenter le répertoire racine d'une application ou (selon le contexte) pour représenter un point d'entrée vers une application.  Dans npm, c'est ce qui est défini comme la valeur de la propriété <code>main</code> dans le fichier <code>package.json</code> : <br><br><pre> <code class="plaintext hljs">{  "main": "index.js" }</code> </pre> <br>  Ce raccourci peut être utilisé, par exemple, avec des commandes comme <code>npx create-react-app</code> .  Ainsi, au lieu d'exécuter cette commande sous la forme de <code>npx create-react-app my-app</code> (qui conduira à la création d'un nouveau dossier <code>my-app</code> ), vous pouvez exécuter cette commande comme ceci: <code>npx create-react-app .</code>  (faites attention au point qui vient après la commande).  Cela vous permettra de créer un projet de modèle d'application React dans le dossier dans lequel vous vous trouvez au moment où la commande est exécutée. <br><br><h2>  <font color="#3AC1EF">2. Définition des valeurs par défaut pour npm init</font> </h2><br>  En exécutant constamment la commande <code>npm init</code> pour créer un nouveau projet, vous constaterez très probablement que vous entrez les mêmes données encore et encore en réponse aux questions du système.  Par exemple - il est probable que vous êtes l'auteur de la plupart des projets que vous créez.  Afin de gagner du temps lors de la saisie des mêmes données, vous pouvez définir vos propres valeurs par défaut pour les champs correspondants: <br><br><pre> <code class="plaintext hljs">npm config set init.author.name "Joe Bloggs" npm config set init.author.email "joebloggs@gmail.com" npm config set init.author.url  "joebloggs.com" npm config set init.license   "MIT"</code> </pre> <br>  Afin de vérifier l'exactitude de l'ajout de telles informations au système, entrez la commande d' <code>npm config edit</code> .  Cela ouvrira le fichier de configuration dans l'éditeur système.  Si vous souhaitez modifier les paramètres globaux de npm, utilisez la commande <code>npm config edit -g</code> . <br><br>  Afin de revenir aux paramètres par défaut, vous pouvez utiliser le script suivant.  Sa première ligne supprime les données de configuration du fichier et la seconde les remplit avec des valeurs par défaut. <br><br><pre> <code class="plaintext hljs">echo "" &gt; $(npm config get userconfig) npm config edit</code> </pre> <br>  Le script ci-dessus réinitialise les valeurs par défaut pour l'utilisateur.  Le script suivant réinitialise les valeurs par défaut globales: <br><br><pre> <code class="plaintext hljs">echo "" &gt; $(npm config get globalconfig) npm config --global edit</code> </pre> <br><h2>  <font color="#3AC1EF">3. Scripts multiplateformes</font> </h2><br>  Tout code exécuté sur la ligne de commande peut rencontrer des problèmes de compatibilité.  Cela est particulièrement vrai pour les incompatibilités entre les systèmes Windows et Unix (cela inclut Mac et Linux).  Ce n'est pas un problème si vous et vous seul travaillez sur un certain projet.  Mais dans de nombreux cas, la compatibilité des scripts multiplateforme est importante.  Par exemple, travailler indépendamment du système d'exploitation est un énorme avantage pour tout projet open source, de formation ou de démonstration. <br><br>  Heureusement, la résolution du problème de compatibilité des scripts n'est pas particulièrement difficile.  Nous avons plusieurs options à notre disposition.  Cependant, ici, je voudrais parler de l'un d'eux, de l'utilisation dont j'ai obtenu les meilleurs résultats.  Il s'agit d'un package <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cross-env</a> .  Il doit être installé en tant que dépendance de développement à l'aide de la commande <code>npm i -D cross-env</code> .  Ensuite, vous devez mettre <code>cross-env</code> devant chaque variable d'environnement.  Par exemple, cela pourrait ressembler à ceci: <br><br><pre> <code class="plaintext hljs">{  "scripts": {    "build": "cross-env NODE_ENV=production webpack --config build/webpack.config.js" }</code> </pre> <br>  J'ai trouvé que le package <code>cross-env</code> est l'outil le plus pratique pour atteindre la compatibilité des scripts multiplateforme.  Mais il vous sera utile de jeter un œil aux deux outils populaires suivants qui peuvent vous aider à résoudre ce problème: <br><br><ul><li>  Forfait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rimraf</a> .  Il, pour exécuter des scripts multiplateformes, peut être installé globalement. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Package ShellJS</a> .  Il s'agit d'une implémentation Node.js portable du shell de commande Unix. </li></ul><br><h2>  <font color="#3AC1EF">4. Exécution parallèle de scripts</font> </h2><br>  Afin d'organiser l'exécution séquentielle des commandes dans le shell Linux, la construction <code>&amp;&amp;</code> est utilisée.  Qu'en est-il de l'exécution de scripts parallèles?  Pour ce faire, vous pouvez choisir le package npm approprié.  Les packages les plus populaires de ce type sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">simultanément</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">npm-run-all</a> .  Ici, nous montrons l'utilisation du package simultanément. <br><br>  Tout d'abord, le package sélectionné doit être installé en tant que dépendance de développement: <code>npm i -D concurrently</code> .  Ensuite, dans <code>package.json</code> vous pouvez utiliser une construction de la forme suivante: <br><br><pre> <code class="plaintext hljs">{  "start": "concurrently \"command1 arg\" \"command2 arg\"" }</code> </pre> <br><h2>  <font color="#3AC1EF">5. Exécution de scripts situés dans divers répertoires</font> </h2><br>  Parfois, vous rencontrez des applications qui ont plusieurs fichiers <code>package.json</code> situés dans différents répertoires.  Il serait pratique, par exemple, d'exécuter des scripts qui y sont déclarés, se trouvant dans le répertoire racine du projet.  C'est bien mieux que de devoir voyager dans différents dossiers chaque fois que vous devez exécuter un script.  Pour ce faire, vous pouvez utiliser les deux approches suivantes. <br><br>  Pour commencer, vous pouvez utiliser la <code>cd</code> pour naviguer automatiquement vers le répertoire souhaité.  Cela peut ressembler à ceci: <br><br><pre> <code class="plaintext hljs">cd folder &amp;&amp; npm start &amp;&amp; cd ..</code> </pre> <br>  Mais ce problème peut être résolu d'une manière plus intéressante.  Il consiste à utiliser l'indicateur <code>--prefix</code> , avec lequel vous pouvez spécifier le chemin: <br><br><pre> <code class="plaintext hljs">npm start --prefix path/to/your/folder</code> </pre> <br>  Voici un exemple d'application de cette solution à partir d'une application réelle.  Ici, nous devons exécuter <code>npm start</code> pour les parties client et serveur du projet.  Leur code, respectivement, se trouve dans les dossiers <code>client</code> et <code>server</code> . <br><br><pre> <code class="plaintext hljs">"start": "concurrently \"(npm start --prefix client)\" \"(npm start --prefix server)\"",</code> </pre> <br><h2>  <font color="#3AC1EF">6. Retarder le lancement du script jusqu'à ce qu'une ressource soit disponible</font> </h2><br>  Lors du développement d'applications à pile complète, il est souvent nécessaire d'exécuter les parties client et serveur de l'application.  Le package d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">attente</a> vous permet de synchroniser l'exécution de certains processus.  Dans notre cas, il est nécessaire qu'avant de démarrer la partie client de l'application, un certain port soit disponible. <br><br>  Par exemple, il existe un script de développement utilisé dans une application Electron dont l'interface est écrite à l'aide de React.  Le script, en utilisant <code>concurrently</code> , exécute la couche de présentation de l'application et la fenêtre Electron en parallèle.  Mais en utilisant l' <code>wait-on</code> vous ne pouvez ouvrir la fenêtre Electron que lorsque la couche de présentation React est prête à l'emploi et est disponible sur <code>http://localhost:3000</code> .  Voici à quoi ressemble l' <code>wait-on</code> : <br><br><pre> <code class="plaintext hljs">"dev": "concurrently \"cross-env BROWSER=none npm run start\" \"wait-on http://localhost:3000 &amp;&amp; electron .\"",</code> </pre> <br>  De plus, le comportement standard des projets React consiste à ouvrir automatiquement une fenêtre de navigateur.  Si vous utilisez React avec Electron, cela n'est pas nécessaire.  Ceci peut être <code>BROWSER=none</code> à l'aide de la variable d'environnement <code>BROWSER=none</code> , avant laquelle, pour des raisons de compatibilité multiplateforme de la solution, il existe la commande <code>cross-env</code> . <br><br><h2>  <font color="#3AC1EF">7. Liste et utilisation des scripts disponibles</font> </h2><br>  Afin de lister les scripts disponibles dans <code>package.json</code> , allez simplement dans le répertoire racine du projet et exécutez la commande <code>npm run</code> dans le terminal. <br><br>  Mais il existe un moyen encore plus pratique de répertorier les scripts.  Lorsque vous l'utilisez, le script souhaité peut être immédiatement sélectionné dans la liste et exécuté.  Afin d'utiliser cette façon de travailler avec les scripts, nous devons installer globalement le <code>ntl</code> (Npm Task List): <br><br><pre> <code class="plaintext hljs">npm i -g ntl</code> </pre> <br>  Ensuite, dans le dossier du projet, vous devez exécuter la commande <code>ntl</code> .  Il affichera une liste des scripts disponibles et vous donnera la possibilité de sélectionner le script à exécuter.  Voici à quoi ça ressemble. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e7/8e6/7f2/6e78e67f2f7f520bba4d6aef31df3578.png"></div><br>  <i><font color="#999999">Utilisation de la commande ntl</font></i> <br><br>  Cette fonctionnalité peut être très utile si vous ne savez pas exactement quels sont les scripts du projet.  C'est également bon dans les cas où le programmeur veut remplacer l'entrée d'une commande longue pour exécuter un script par l'entrée d'une commande courte et la pression rapide de quelques touches supplémentaires sur le clavier. <br><br><h2>  <font color="#3AC1EF">8. Exécution de pré-scripts et post-scripts</font> </h2><br>  Vous connaissez peut-être les scripts de <code>postbuild</code> <code>prebuild</code> et de <code>prebuild</code> - <code>postbuild</code> qui vous permettent d'exécuter du code avant et après l'exécution du script de <code>build</code> .  Ces pré- et post-scripts peuvent être définis pour tout autre script.  Y compris ceux dont les descriptions sont ajoutées à p <code>ackage.json</code> par le programmeur. <br><br>  Cela vous permet non seulement de rendre le code plus propre, mais aide également à exécuter les pré et post-scripts de manière isolée. <br><br><h2>  <font color="#3AC1EF">9. Contrôle de la version de l'application</font> </h2><br>  Au lieu de modifier manuellement la version de l'application, le programmeur peut utiliser des commandes spéciales <code>npm</code> .  Afin d'augmenter la partie correspondante du numéro de version de l'application, vous pouvez utiliser la commande <code>npm version</code> suivie de <code>major</code> , <code>minor</code> ou <code>patch</code> : <br><br><pre> <code class="plaintext hljs">// 1.0.0 npm version patch // 1.0.1 npm version minor // 1.1.0 npm version major // 2.0.0</code> </pre> <br>  Selon la fréquence à laquelle vous mettez à jour votre application, vous pouvez gagner du temps en augmentant automatiquement le numéro de version à chaque fois que vous déployez une nouvelle version de l'application.  Par exemple, comme ceci: <br><br><pre> <code class="plaintext hljs">{  "predeploy": "npm version patch" }</code> </pre> <br><h2>  <font color="#3AC1EF">10. Modification de package.json à partir de la ligne de commande</font> </h2><br>  Le fichier package.json est un fichier json standard, il peut donc être modifié directement à partir de la ligne de commande à l'aide de l'utilitaire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">json</a> .  Cela ouvre de nouvelles possibilités dans les situations où vous devez modifier <code>package.json</code> , vous permettant de créer vos propres versions raccourcies de commandes.  Installez le package <code>json</code> globalement: <br><br><pre> <code class="plaintext hljs">npm install -g json</code> </pre> <br>  L'utilitaire <code>json</code> peut ensuite être utilisé pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modifier</a> rapidement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le</a> fichier à l'aide du <code>-I</code> .  Par exemple, pour ajouter un nouveau script <code>foo</code> avec la <code>bar</code> valeur au fichier, vous pouvez utiliser la commande suivante: <br><br><pre> <code class="plaintext hljs">json -I -f package.json -e 'this.scripts.foo="bar"'</code> </pre> <br>  Dans la section suivante, vous verrez un exemple plus pratique d'utilisation de l'utilitaire <code>json</code> . <br><br><h2>  <font color="#3AC1EF">11. Automatisation de la configuration et de l'ouverture du référentiel</font> </h2><br>  S'il existe une entrée <code>"repository"</code> dans votre fichier <code>package.json</code> , cela signifie que vous pouvez ouvrir la page du référentiel dans le navigateur utilisé par défaut par le système.  Pour ce faire, utilisez la commande <code>npm repo</code> . <br><br>  Si votre projet est déjà connecté à un référentiel distant et que l'utilitaire de ligne de commande <code>git</code> installé, cela signifie que vous pouvez trouver l'adresse de votre référentiel à l'aide de la commande suivante: <br><br><pre> <code class="plaintext hljs">git config --get remote.origin.url</code> </pre> <br>  Mais ce n'est pas tout.  Si, conformément à l'astuce précédente, vous avez installé l'utilitaire <code>json</code> , vous pouvez utiliser le script suivant pour ajouter automatiquement les informations de référentiel correctes à <code>package.json</code> : <br><br><pre> <code class="plaintext hljs">json -I -f package.json -e "this.repository=\"$(git config --get remote.origin.url)\""</code> </pre> <br><h2>  <font color="#3AC1EF">12. Création de votre propre script pour contrôler la commande npm init</font> </h2><br>  Parlons maintenant de la résolution d'une tâche plus importante.  À savoir, nous allons développer notre propre script qui contrôle le fonctionnement de la commande <code>npm init</code> , qui accepte l'URL du référentiel GitHub et lui envoie automatiquement le premier commit.  Ici, nous parlons de la création de tels scripts.  Et dans la section suivante, qui sera notre dernier conseil, nous parlerons de travailler avec <code>git</code> . <br><br>  Vous pouvez personnaliser le comportement de la commande <code>npm init</code> à l'aide du <code>.npm-init.js</code> .  Créez un tel fichier dans le répertoire personnel de l'utilisateur actuel (sous Windows, il s'agit généralement de <code>C:/Users/&lt;username&gt;</code> , et sur Mac, <code>/Users/&lt;username&gt;</code> ).  Après cela, exécutez la commande suivante qui indique à npm où se trouve exactement ce fichier: <br><br><pre> <code class="plaintext hljs">npm config set init-module ~\.npm-init.js</code> </pre> <br>  Avant l'intégration avec <code>git</code> , regardons un exemple simple du <code>.npm-init.js</code> , qui reproduit les questions que le système pose à l'utilisateur lors de l'utilisation de la commande <code>npm init</code> sans paramètres supplémentaires: <br><br><pre> <code class="plaintext hljs">module.exports = {  name: prompt('package name', basename || package.name),  version: prompt('version', '0.0.0'),  decription: prompt('description', ''),   main: prompt('entry point', 'index.js'),  repository: prompt('git repository', ''),  keywords: prompt(function (s) { return s.split(/\s+/) }),  author: prompt('author', 'Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)'),  license: prompt('license', 'ISC') }</code> </pre> <br>  Chaque question est basée sur le modèle suivant: <br><br><pre> <code class="plaintext hljs">nameInPackage: prompt('nameInPrompt', 'defaultValue')</code> </pre> <br>  Afin d'indiquer une certaine valeur et de ne pas poser de question à l'utilisateur, supprimez simplement la méthode d' <code>prompt</code> . <br><br>  Si vous souhaitez revenir aux paramètres d' <code>npm init</code> standard, supprimez simplement le <code>.npm-init.js</code> . <br><br><h2>  <font color="#3AC1EF">13. Envoi du premier commit au référentiel GitHub à l'aide de npm init</font> </h2><br>  Afin d'exécuter des commandes <code>git</code> dans le <code>.npm-init.js</code> nous devons trouver un moyen de travailler avec la ligne de commande.  Vous pouvez utiliser le module <code>child_process</code> pour <code>child_process</code> .  Nous le connectons en haut du fichier, et comme nous n'avons besoin que de la fonction <code>execSync</code> , nous l'importons uniquement, en utilisant la déstructuration: <br><br><pre> <code class="plaintext hljs">const { execSync } = require('child_process');</code> </pre> <br>  De plus, nous allons créer une fonction d'aide qui affiche les résultats de notre fonction dans la console: <br><br><pre> <code class="plaintext hljs">function run(func) {  console.log(execSync(func).toString()) }</code> </pre> <br>  Et enfin, créons le bloc d'invite approprié pour gérer l'URL du référentiel GitHub.  Si le script a l'URL, nous créerons le fichier <code>README.md</code> et enverrons le premier commit au référentiel. <br><br>  Ainsi, l'un des éléments de l'objet <code>.npm-init.js</code> doit être le code suivant: <br><br><pre> <code class="plaintext hljs">repository: prompt('github repository url', '', function (url) {  if (url) {    run('touch README.md');    run('git init');    run('git add README.md');    run('git commit -m "first commit"');    run(`git remote add origin ${url}`);    run('git push -u origin master');   return url; })</code> </pre> <br>  Voici comment le code complet du fichier <code>.npm-init.js</code> doit se <code>.npm-init.js</code> de cet ajout: <br><br><pre> <code class="plaintext hljs">const { execSync } = require('child_process'); function run(func) {  console.log(execSync(func).toString()) } module.exports = {  name: prompt('package name', basename || package.name),  version: prompt('version', '0.0.0'),  decription: prompt('description', ''),  main: prompt('entry point', 'index.js'),  keywords: prompt(function (s) { return s.split(/\s+/) }),  author: prompt('author', 'Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)'),  license: prompt('license', 'ISC'),  repository: prompt('github repository url', '', function (url) {    if (url) {      run('touch README.md');      run('git init');      run('git add README.md');      run('git commit -m "first commit"');      run(`git remote add origin ${url}`);      run('git push -u origin master');       return url;  }), }</code> </pre> <br>  Voici à quoi ressemble le fichier <code>package.json</code> que le système crée à l'aide de ce <code>.npm-init.js</code> : <br><br><pre> <code class="plaintext hljs">{  "name": "Custom npm init",  "version": "0.0.0",  "decription": "A test project, to demonstrate a custom npm init script.",  "main": "index.js",  "keywords": [],  "author": "Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)",  "license": "ISC",  "repository": {    "type": "git",    "url": "git+https://github.com/JoeBloggs/custom.git"  },  "bugs": {    "url": "https://github.com/JoeBloggs/custom/issues"  },  "homepage": "https://github.com/JoeBloggs/custom#readme" }</code> </pre> <br>  En mettant en place le processus d'initialisation de nouveaux projets, vous pouvez aller plus loin.  Par exemple, pour vous assurer que lors de la création d'un projet, un nouveau référentiel sera créé pour celui-ci. <br><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>  J'espère que ce matériel vous a aidé à voir ce que vous pouvez réaliser avec npm.  Je veux croire que vous avez trouvé quelque chose ici qui vous permettra de travailler de manière plus productive - que nous parlions de l'utilisation de versions raccourcies de commandes, de scripts de <code>package.json</code> ou de la configuration de <code>npm init</code> en fonction de vos besoins. <br><br>  <b>Chers lecteurs!</b>  Automatisez-vous le travail avec npm? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/b4/fn/f5/b4fnf52x9i3mn80tttdafqtvkfe.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458504/">https://habr.com/ru/post/fr458504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458494/index.html">Un exemple pratique d'utilisation des fonctions de rendu de Vue: création d'une grille typographique pour un système de conception</a></li>
<li><a href="../fr458496/index.html">Lignes directrices pratiques pour le développement d'applications React à grande échelle. Planification, actions, sources de données et API</a></li>
<li><a href="../fr458498/index.html">Lignes directrices pratiques pour le développement d'applications React à grande échelle. Partie 2: gestion des états, routage</a></li>
<li><a href="../fr458500/index.html">Métamorphose des tests de redux-saga</a></li>
<li><a href="../fr458502/index.html">Le secret principal pour développer de bonnes applications Electron</a></li>
<li><a href="../fr458506/index.html">Pas Portal 3, mais close: téléportation quantique d'informations à l'intérieur d'un diamant</a></li>
<li><a href="../fr458508/index.html">Un regard intérieur: école doctorale à l'EPFL. Partie 4.2: l'aspect financier</a></li>
<li><a href="../fr458514/index.html">La violation du RGPD est punie plus activement - de nouvelles amendes et l'impact des réglementations en dehors de l'UE</a></li>
<li><a href="../fr458516/index.html">Obtenez un journal de travail de Jira</a></li>
<li><a href="../fr458518/index.html">Python consomme beaucoup de mémoire ou comment réduire la taille des objets?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>