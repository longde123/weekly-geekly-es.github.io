<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêæ üêâ ü§¥üèº Animasi dalam Asymptote üìß üç£ üí¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Disalin dari blog saya untuk membuat sumber informasi berbahasa Rusia lainnya tentang topik ini. 

 Halo Ketika dalam proses menguasai program Asympto...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Animasi dalam Asymptote</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468125/">  Disalin dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">blog saya</a> untuk membuat sumber informasi berbahasa Rusia lainnya tentang topik ini. <br><br>  Halo  Ketika dalam proses menguasai program Asymptote, yang terjadi ketika saya mempelajari nuansa pengaturan untuk program yang dijelaskan di sini di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hub ini</a> , saya sepenuhnya menguasai pemrosesan file .asy yang tidak memiliki animasi, saya secara alami berlari ke dalam animasi. <br><br><div class="spoiler">  <b class="spoiler_title">Judul spoiler</b> <div class="spoiler_text">  Berikan animasi kepada massa! <br></div></div><br>  Untungnya, untuk ini, dalam hal format output .pdf, tidak ada program tambahan yang dijelaskan oleh saya di hub menggunakan tautan di atas, setelah program ghostscript diinstal, Anda tidak perlu menginstal, dan bahkan iblis tahu berapa lama ia menggali.  Tapi kemudian saya tidak tahu, yang memperumit masalah ini berkali-kali.  Anda memproses file wheel.asy dan apa?  Nah, .pdf muncul selama pemrosesan di TeXworks (lihat tautan yang diberikan di atas) di folder yang sama dengan file .asy yang diproses, dan ketika dibuka di Explorer (lihat hub yang sama), di <code>C:\Windows\System32</code> .  Jadi apa  Tidak ada animasi di dalamnya dan hanya itu, meskipun Anda retak.  Sebelum animasi di Asymptote, saya belajar cara membuat animasi di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tikz</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pstricks</a> .  Jadi saya tidak berhasil sampai saya menghapus file animate.sty dari <code>C:\Program Files\MiKTeX 2.9\tex\latex\animate</code> folder dan meletakkan file dengan nama yang sama diunduh kemudian.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Itu dia</a> .  Dengan demikian, mengetahui hal ini <a name="habracut"></a>  paket bekerja dengan tikz dan pstricks, saya cenderung berpikir bahwa itu tidak berhasil bagi saya, kemungkinan besar, bukan karena masalah dengan TeX, tetapi karena beberapa alasan lain.  Jadi saya mencari di Internet Lama selama beberapa tahun.  Pada awalnya saya mencari di browser IE, well, tidak ada penerjemah yang nyaman di sana.  Kemudian saya mengendus bahwa Google memiliki penerjemah yang nyaman di dalamnya.  Juga mencari, mencari, mencari, mencari, sampai dia menemukan halaman <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> .  Ternyata untuk beberapa alasan di semua file .asy dari <code>C:\Program Files\Asymptote\examples\animations</code> untuk mendapatkan dari mereka .pdf dengan animasi tidak ada cukup satu baris <br><br><pre> <code class="plaintext hljs">settings.twice=true;</code> </pre> <br>  Saya menambahkan baris ini ke file wheel.asy dari subfolder animasi folder contoh: <br><br><div class="spoiler">  <b class="spoiler_title">Akhirnya animasi !!!!!!!</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">import graph; // Uncomment the following 2 lines to support pdf animations: usepackage("animate"); settings.tex="pdflatex"; settings.twice=true; import animation; size(0,200); defaultpen(3); dotfactor=4; pair wheelpoint(real t) { return (t+cos(t),-sin(t)); } guide wheel(guide g=nullpath, real a, real b, int n) { real width=(ba)/n; for(int i=0; i &lt;= n; ++i) { real t=a+width*i; g=g--wheelpoint(t); } return g; } real t1=0; real t2=t1+2*pi; animation a; draw(circle((0,0),1)); draw(wheel(t1,t2,100),linetype("0 2")); yequals(Label("$y=-1$",1.0),-1,extend=true,linetype("4 4")); xaxis(Label("$x$",align=3SW),0); yaxis("$y$",0,1.2); pair z1=wheelpoint(t1); pair z2=wheelpoint(t2); dot(z1); dot(z2); int n=10; real dt=(t2-t1)/n; for(int i=0; i &lt;= n; ++i) { save(); real t=t1+dt*i; draw(circle((t,0),1),red); dot(wheelpoint(t)); a.add(); // Add currentpicture to animation. restore(); } erase(); // Merge the images into a gif animation. //a.movie(BBox(0.25cm),loops=10,delay=250); // Merge the images into a pdf animation. label(a.pdf(BBox(0.25cm),delay=250,"controls",multipage=false));</code> </pre><br></div></div><br>  Pada saat yang sama, untuk menerima .pdf, mengetahui 300 kata dalam bahasa Inggris, saya menyadari bahwa saya perlu menghapus komentar dalam bentuk file wheel.asy di mana pengguna mendapatkannya dari penulis program Asymptote, 2 baris: <br><br><pre> <code class="plaintext hljs">....................... usepackage("animate"); settings.tex="pdflatex"; .......................</code> </pre><br>  Melihat komentar pada baris ini di akhir file wheel.asy: <br><br><pre> <code class="plaintext hljs">........................ // Merge the images into a gif animation. a.movie(BBox(0.25cm),loops=10,delay=250); // Merge the images into a pdf animation. // label(a.pdf(BBox(0.25cm),delay=250,"controls",multipage=false));</code> </pre><br>  , Saya menyadari bahwa untuk mendapatkan .pdf saya perlu mengulang kode yang saya dapatkan dari penulis program dan berkomentar <br><br><pre> <code class="plaintext hljs">a.movie(BBox(0.25cm),loops=10,delay=250);</code> </pre><br>  , dan batalkan komentar pada garis <br><br><pre> <code class="plaintext hljs">label(a.pdf(BBox(0.25cm),delay=250,"controls",multipage=false));</code> </pre><br>  Dan bagaimana roda saya berguling setelah gerakan tubuh ini!  Logika dari para penulis program Asymptote juga tidak dapat dipahami: untuk mendapatkan .gif satu program tambahan lebih dibutuhkan daripada untuk mendapatkan .pdf.  File dengan contoh kemungkinan besar akan ditonton oleh pengguna yang tidak tahu cara melakukan ini sama sekali.  Nah, lakukan ini agar ketika para pengguna ini segera membuka file-file ini, tanpa mengubah apa pun di dalamnya, mereka dapat menerima format output yang membutuhkan lebih sedikit program tambahan - .pdf, tidak, mereka membuat .gif.  Mengapa ??  Baiklah baiklah  Ya, saya juga akan mencatat bahwa ketika membuka file wheel.asy di Explorer (lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hub saya</a> ) untuk mendapatkan .gif yang berfungsi, keberadaan file config.asy di folder yang sama dengannya (lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hub saya</a> ) adalah opsional.  Biarkan saya mengingatkan Anda bahwa .gif dalam hal ini (ketika dibuka di Explorer) dibentuk di <code>C:\Windows\System32</code> .  Saat memproses file .asy ini di TeXworks, keberadaan config.asy dalam folder yang sama dengan file yang akan diproses adalah wajib (atau termasuk baris yang saya jelaskan di tautan sebelumnya langsung ke file .asy yang diproses itu sendiri).  Nah, ini dia.  Roda saya berputar lurus, saya tertawa, senang.  Itu malam.  Saya pergi tidur.  Bangun dan comp.  Ketika komputer menyala, dia duduk, menggosok tangannya.  Yah, saya pikir, sekarang saya akan secara matematis mulai menggunakan bahan bakar minyak untuk kita.)  Ya, sekarang juga.  Animasi dari subfolder contoh berhasil hampir semuanya, kecuali untuk embeddedmovie.asy, externalmovie.asy dan embeddedu3d.asy.  Saya menunggu 2 file pertama nanti, tetapi tidak berhasil dengan yang terakhir: di sana, seperti yang saya mengerti, beberapa file dadu.u3d perlu diunduh juga dari suatu tempat, dan yang mana merupakan rahasia besar untuk sebuah perusahaan kecil.  Ya, itu, "Oh, kerajaan tidak cukup, tidak ada tempat untuk berkeliaran."  Saya menulis, ada kode seperti itu: <br><br><pre> <code class="plaintext hljs">settings.twice=true; usepackage("animate"); import solids; settings.tex="pdflatex"; import animation; settings.outformat="pdf"; settings.axes3=true; import graph3; import palette; currentprojection=orthographic(1,1,1); limits((-1.3,-1.3,-1.3),(1.3,1.3,1.3)); unitsize(6cm); animation a; int n=44; for(int i=0; i&lt;=n; ++i){ real g(real x) {return sqrt(1-x^2);} pair G(real x) {return (x,g(x));} triple G3(real x) {return (x,g(x),0);} path q=graph(G,1-i/n,1); path3 q3=path3(q); revolution c=revolution(q3,X,0,360); draw(surface(c),red); real f(real x) {return sqrt(1-x^2);} pair F(real x) {return (x,f(x));} triple F3(real x) {return (x,f(x),0);} path p=graph(F,-1,-1+i/n); path3 p3=path3(p); revolution b=revolution(p3,X,0,360); draw(surface(b),green); axes3("$x$","$y$","$z$",Arrow3); a.add(); restore(); } erase(); label(a.pdf("controls,loop",delay=1000));</code> </pre><br>  Saya menerima kesalahan menjanjikan berikut di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">TeXworks</a> : <br><br><pre> <code class="plaintext hljs">error: out of memory</code> </pre> <br>  Saat membuka file .asy ini di Explorer (lihat tautan ke hub tepat di atas) kesalahannya sama.  Ya  Saya sudah dikukus, saya dikukus, saya sudah keruh, saya menemukan itu ketika <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>=</mo><mn>3</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.656ex" height="1.937ex" viewBox="0 -728.2 2435.1 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhh-Fv1R5BR_VVdq1EzkIRgDdppgYQ#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhh-Fv1R5BR_VVdq1EzkIRgDdppgYQ#MJMAIN-3D" x="878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhh-Fv1R5BR_VVdq1EzkIRgDdppgYQ#MJMAIN-33" x="1934" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>=</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-1"> n = 3 </script>  ternyata .pdf dengan animasi, tetapi sudah di <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>=</mo><mn>4</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.656ex" height="2.057ex" viewBox="0 -780.1 2435.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhh-Fv1R5BR_VVdq1EzkIRgDdppgYQ#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhh-Fv1R5BR_VVdq1EzkIRgDdppgYQ#MJMAIN-3D" x="878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhh-Fv1R5BR_VVdq1EzkIRgDdppgYQ#MJMAIN-34" x="1934" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>=</mo><mn>4</mn></math></span></span><script type="math/tex" id="MathJax-Element-2"> n = 4 </script>  bahwa kesalahan ini juga muncul.  Izinkan saya bertanya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">forum</a> Asymptote <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">itu sendiri</a> .  Tetapi Anglo-Saxon adalah orang yang taat hukum yang tidak suka mundur dari instruksi.  Mereka tidak menemukan apa pun.  Apa yang harus dilakukan  Apakah layak menyekop separuh Internet untuk tersandung pada sampah semacam itu?  Yah, tidak ada apa-apa, Rusia tidak menyerah!  Dan selain itu, pahlawan normal selalu berkeliling ... Saya mulai mengamati proses memproses file wheel.asy di TeXworks dan apa yang saya lihat?  Pertama, file _wheel + 0.pdf, _wheel + 1.pdf, ..., _wheel + 10.pdf muncul, kemudian dari file-file ini file multi-halaman _wheel.pdf dibentuk dan selanjutnya pada program.  Dan untuk melakukan semua ini, modul animasi diimpor ke file .asy dari mana mereka akan mendapatkan <i>animasi</i> .  Dan kemudian saya punya ide.  Tetapi bagaimana jika dalam modul ini (file <code>C:\Program Files\Asymptote\animation.asy</code> ) Anda menemukan tempat yang menghasilkan file seperti _wheel + 0.pdf dan mematikannya?  Apakah Anda mencap file-file ini dengan Asymptote yang memproses file .asy yang dihasilkan oleh loopback dalam file batch?  File-file .asy ini dapat dibuat dengan nama <i>name + 0.asy</i> , <i>nama + 1.asy</i> , dan sebagainya, selama diperlukan.  Di mana <i>namanya</i> adalah beberapa set huruf Latin yang terkait dengan animasi yang sedang dibuat, yang kemungkinan besar ingin Anda ubah pada pdf siap pakai dengan animasi.  Tapi nanti.  Sementara itu, setelah membuat file, <i>namanya + 0. mudah</i> , <i>namanya + 1. mudah</i> ... menurut ide saya, pemrosesan oleh Asymptote harus diikuti.  Ini akan membuat <i>nama</i> file <i>+ 0.pdf</i> , <i>nama + 1.pdf</i> ... Dan sebelum kode yang membuat <i>nama</i> file <i>+ 0.asy</i> , <i>nama + 1.asy</i> ..., saya harus memasukkan baris dalam file batch untuk membuat nama file. atau lebih tepatnya, hanya baris untuk masuk ke file ini.  Dan nama file. Mudah akan dibentuk hanya sebagai hasil dari file batch.  Dalam file ini, namanya. Mudah, saya berencana untuk mengimpor modul animasi yang saya konversi bukan modul <i>animasi</i> itu sendiri.  Saya memutuskan untuk membuat awal dari nama file ini. Mudah menjadi yang paling sederhana, dengan semangat awal dari file wheel.asy.  Setelah loop, saya hanya bodoh menyalin garis dari file ini dan menempelkannya ke file batch seperti ini: <br><br><pre> <code class="plaintext hljs">echo  &gt;&gt; .asy</code> </pre><br>  , <br><br><pre> <code class="plaintext hljs">echo  &gt;&gt; .asy</code> </pre><br>  Saya menulis file batch sehingga dalam file yang dibuat nama. Mudah, badan loop kosong, dan di mana untuk itu, itu akan berubah seperti ini: <br><br><pre> <code class="plaintext hljs">for(int i=0; i &lt;= n; ++i) {</code> </pre><br>  Dalam file batch, baris di atas baris kode yang memasukkan baris ini ke nama file. Mudah adalah sebuah baris <br><br><pre> <code class="plaintext hljs">echo int n=%n%; &gt;&gt;%name%.asy</code> </pre><br>  , dan baris ketiga dan keempat dari file batch ini adalah: <br><pre> <code class="plaintext hljs">set n=24 set name=OdnopGip</code> </pre><br>  , jadi pada awal pemrosesan loop dalam nama file. Asymptote mudah sudah tahu nilai n dalam hal ini dan semuanya berfungsi.  Nama variabel lingkungan berarti, dalam terjemahan ke dalam bahasa artikel ini, <i>nama</i> dari <i>name.asy</i> .  Mendeklarasikan dalam hal ini nilai-nilai nama atau n dalam file batch melalui set menurut saya sangat nyaman: mengubah nilai-nilai mereka hanya dalam satu tempat dalam file batch memerlukan mengubah semua nama file .tex, .pdf yang dihasilkan saat memproses file atau nomor .asy tertentu bingkai dalam pdf animasi yang dihasilkan, pada dasarnya mengubah detail animasi.  Nah, ini dia.  Jadi saya menyiapkan <i>nama</i> frame <i>+ 0.pdf</i> , <i>nama + 1.pdf</i> ..., namun, karena setelah persiapan setiap frame dibuka, saya harus memasukkan perintah dalam file batch saya untuk menutupnya.  Karena saya tidak tahu cara menutup jendela dengan judul tertentu dari file batch, saya memasukkan perintah berikut dalam file batch saya di tubuh siklus pemrosesan frame-blank. Mudah: <br><pre> <code class="plaintext hljs">taskkill /IM AcroRd32.exe</code> </pre><br>  , yang ternyata nanti dalam proses menjalankan semua ini, bahkan lebih baik daripada menutup setiap frame tertentu: kadang-kadang frame masih tidak punya waktu untuk muncul di monitor, dan pemrosesan file .asy berikutnya sudah dimulai, pada akhirnya frame berikutnya muncul di monitor, dan final dengan perintah dari langkah selanjutnya dari siklus ini, baik frame dari langkah berikutnya dan frame dari langkah sebelumnya, yang melewati file batch yang berjalan melewati, akan ditutup, meskipun jelas bahwa setelah memasukkan perintah ini dalam file batch selama pelaksanaan buku di .pdf, itu tidak lagi  Saya buruk, ya.  Lebih jauh di sepanjang logika, saya perlu mengubah nama nama file + 0.asy, nama + 1.asy, ... menjadi _name + 0.asy, _name + 1.asy, ..., karena keberadaan file dengan persis nama-nama ini dalam satu Folder dengan file .asy sedang diproses, di mana ada animasi, mengasumsikan bahwa file ini diproses asalkan modul animasi asli diimpor sebelum memulai produksi file name.pdf (ya, saya bisa, di dalam loop file batch dengan variabel k, bukan garis-garis kode yang membentuk bingkai. nama file + k.asy, dan file _name + k.asy, tetapi ini akan membutuhkan lebih banyak input karakter "_". Dan pemrosesan lebih lanjut dari luka Asymptote  . File E dibuat imya.asy Singkatnya, menurut ide asli adalah untuk memiliki file batch terlihat seperti ini: <br><br><pre> <code class="plaintext hljs">cd /d %0\.. echo off set n=99 set name=cvetok echo settings.twice=true; &gt; %name%.asy echo usepackage("animate"); &gt;&gt;%name%.asy echo settings.tex="pdflatex"; &gt;&gt;%name%.asy echo import izgraphiki; &gt;&gt;%name%.asy echo animation a; &gt;&gt;%name%.asy echo int n=%n%; &gt;&gt;%name%.asy echo for(int i=0; i ^&lt;= n; ++i) { &gt;&gt;%name%.asy echo a.add(); &gt;&gt;%name%.asy echo restore(); &gt;&gt;%name%.asy echo } &gt;&gt;%name%.asy echo erase(); &gt;&gt;%name%.asy echo label(a.pdf(BBox(0.25cm),delay=250,"controls",multipage=false)); &gt;&gt;%name%.asy for /l %%k in (0,1,%n%) do ( echo import graph; &gt;&gt; %name%+%%k.asy echo settings.tex="pdflatex"; &gt;&gt; %name%+%%k.asy echo limits((-1.2,-1.2^),(1.2,1.2^)^); &gt;&gt; %name%+%%k.asy echo size(0,100^); &gt;&gt; %name%+%%k.asy echo real f(real t^) {return cos(2*t^);} &gt;&gt; %name%+%%k.asy echo path g=polargraph(f,0,2pi*%%k/%n%,operator ..^)--cycle; &gt;&gt; %name%+%%k.asy echo fill(g,green+white^); &gt;&gt; %name%+%%k.asy echo xaxis("$x$",above=true^); &gt;&gt; %name%+%%k.asy echo yaxis("$y$",above=true^); &gt;&gt; %name%+%%k.asy echo draw(g^); &gt;&gt; %name%+%%k.asy ) for /l %%l in (0,1,%n%) do ( asy %name%+%%l.asy taskkill /IM AcroRd32.exe ) for /l %%l in (0,1,%n%) do ( rename %name%+%%l.pdf _%name%+%%l.pdf ) asy %name%.asy</code> </pre><br>  Di sini kita melihat bahwa saya mengimpor modul animation.asy yang saya modifikasi di atas.  Saya memberi nama sederhana izgraphiki.asy ke modul ini.  Dan untuk file animasi .pdf yang saya dapatkan, saya tidak menemukan nama yang lebih baik daripada cvetok.  Ternyata, karena kelangkaan imajinasinya.  Baiklah, ayolah, bagaimana keadaannya.  Saya akan bercerita tentang modul izgraphiki.asy "saya" di akhir cerita ini, agar tidak kehilangan utas cerita sekarang, tetapi untuk saat ini saya akan mencatat bahwa ada upaya untuk memberikan file ini nama iz-graphiki.asy, dan kemudian iz + graphiki.asy untuk pengujian tidak mengarah ke tujuan yang dimaksud: pekerjaan file batch saya berhenti berjalan lancar dan tidak melanjutkan dalam keadaan apa pun.  Rupanya, modul program Asymptote hanya boleh berisi <u>huruf-</u> huruf alfabet Latin.  Bagaimanapun, kepatuhan dengan kondisi ini tentu tidak akan merugikan.  Jadi, pekerjaan dari file batch yang saya kutip di atas berakhir dengan penampilan file .pdf yang didambakan dengan animasi dari yang besar secara sewenang-wenang (dalam batas yang wajar, agar tidak menunggu 3 jam, berfungsi, animasi .pdf muncul, semuanya baik-baik saja, tetapi komputer memiliki kecepatan operasi hanya final).  Biarkan saya melakukan konstruksi animasi objek 3d.  Dan kemudian masalah lain menjadi jelas.  Saya berhasil memberi cap pada objek-objek ini, tetapi, oh, itu dia.  Pada bingkai-bingkai ini, objek-objek ini ternyata diputar di ruang angkasa, semuanya baik-baik saja di sini, tetapi hanya karena keberadaan volume ini dalam bingkai pdf, mereka tidak dapat digunakan untuk membangun bingkai dalam pdf dengan animasi.  Biarkan saya berpikir lebih jauh.  Menonton pemrosesan file sphere.asy yang sedikit dimodifikasi: <br><br><div class="spoiler">  <b class="spoiler_title">file sphere.asy sedikit dimodifikasi</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">settings.twice=true; usepackage("animate"); import solids; settings.tex="pdflatex"; import animation; settings.outformat="pdf"; currentprojection=orthographic((0,5,2)); currentlight=(0,5,5); int nbpts=200; real step=2*pi/nbpts; int angle=90; unitsize(1cm); triple[] P=new triple[nbpts]; for(int i=0; i &lt; nbpts; ++i) { real t=-pi+i*step; P[i]=(3sin(t)*cos(2t),3sin(t)*sin(2t),3cos(t)); } transform3 t=rotate(angle,(0,0,0),(1,0.25,0.25)); revolution r=sphere(O,3); draw(surface(r),lightgrey); draw(r,backpen=linetype("8 8",8)); animation A; for(int phi=0; phi &lt; 360; phi += angle) { bool[] front=new bool[nbpts]; save(); for(int i=0; i &lt; nbpts; ++i) { P[i]=t*P[i]; front[i]=dot(P[i],currentprojection.camera) &gt; 0; } draw(segment(P,front,operator ..),1mm+blue+extendcap); draw(segment(P,!front,operator ..),grey); A.add(); restore(); } label(A.pdf());</code> </pre><br></div></div><br>  , Saya perhatikan bahwa selama pemrosesan ini semua frame animasi muncul dan tidak menghilang secara berurutan, tetapi hanya mereka, jika boleh saya katakan demikian, dalam versi 2d: menurut pendapat saya ini adalah grafik 3D penuh, tetapi jika Anda mencoba untuk melihatnya dari sisi yang berbeda di jendela Penampil Abode Pembaca dengan bergerak dengan menekan tombol kiri mouse, seperti yang diharapkan dari grafik 3d yang diperoleh menggunakan Asymptote, kecuali kemungkinan pertimbangan ini dimatikan dengan sengaja sebelum memulai produksi .pdf dengan animasi dalam file .asy, ini ternyata tidak mungkin  th.  Nama-nama bingkai 2d ini: _sphere + 0.pdf, _sphere + 1.pdf, ... Setelah mempelajari tentang pembuatan bingkai 2d spasial saat memproses file .asy yang memiliki animasi objek 3d, terpikir oleh saya untuk mendapatkan frame .pdf dari file batch untuk digunakan lebih lanjut dalam memproses file .asy, di mana ada siklus dengan tubuh kosong, yang saya hasilkan di awal file batch, tidak hanya memproses file .asy, tetapi memproses file .asy, yang masing-masing memiliki siklus.  Loop-loop ini di masing-masing bertopik. Mudah bertopik ini untuk menerima bingkai .pdf dari itu saya terdiri dari satu bingkai tunggal: Saya tidak membuat bertopik ini untuk mendapatkan .pdf dengan animasi dari mereka, tetapi untuk mendapatkan bingkai 2d, kebetulan dalam proses memproses masing-masing file rintisan .asy.  Untuk menerima file kosong. Mudah dengan loop seperti itu, saya membuatnya sehingga dalam loop semua file kosong. Mudah, variabel loop ini pada awal dan akhir loop mengambil nilai yang sama - 0. Perbedaan antara frame .pdf yang dihasilkan dari pemrosesan memainkan Asymptote dari file kosong. Mudah disebabkan oleh perbedaan dalam tubuh file loop dari blanks.asy, yang (perbedaan), pada gilirannya, karena pengenalan masing-masing dari nilai-nilai berurutan dari variabel file batch file ke dalam fungsi tubuh file loop dari blanks.asy dibuat oleh file batch ketika variabelnya qi  Kla, mengambil nilai selanjutnya, membeku, menunggu selesainya pembuatan file pengadaan. Mudah, sesuai dengan nilai ini dari variabel loop file batch.  Singkatnya, perbedaan-perbedaan ini dibuat oleh variabel loop file batch.  Nama-nama frame 2d ini dalam bentuk: nama + k + 0.pdf, di mana, karena frame 2d ini adalah hasil dari perubahan dalam variabel loop file batch, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhh-Fv1R5BR_VVdq1EzkIRgDdppgYQ#MJMATHI-6B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> k </script>  mengambil nilai dari 0 hingga nilai akhir variabel loop file batch dengan langkah 1. Untuk mendapatkan animasi .pdf dari file .asy dengan tubuh kosong dari loop yang dibuat oleh file batch sebelumnya, nama frame .pdf harus memiliki bentuk berikut: _name + k.pdf.  Oleh karena itu, tim berikutnya dalam file batch saya menamai frame ini -pdf.  Saya melakukannya dalam satu lingkaran.  Dan akhirnya, tim pengolah menjalankan file Asymptote .asy dengan badan loop kosong.  Setelah pemrosesan ini, .pdf dengan animasi muncul.  Dalam file batch, setelah perintah ini, saya tidak menulis perintah untuk membuka file .pdf dengan animasi, karena pembukaan ini diasumsikan secara default, file .pdf dengan animasi ini tetap terbuka di akhir pemrosesan ini, seperti file .pdf terbuka dihasilkan oleh Asymptote yang memproses file .asy tanpa animasi.  Jika pembaca mengamati proses pemrosesan file mudah dari subfolder dengan animasi dari folder contoh yang terletak di folder program Asymptote, maka ia akan memahami bahwa bagian <i>nama</i> dari _name + k.pdf harus bertepatan dengan nama file .asy dengan badan loop kosong.  File _name + k.pdf adalah hasil dari pengubahan nama beberapa file .pdf lainnya (nama file + k + 0.pdf), yang, pada gilirannya, merupakan produk sampingan dari program yang memproses beberapa file .asy, oleh karena itu, untuk mempermudah tugas, saya membuat file-file ini . mudah dibuat oleh file batch di bawah nama nama + 0. mudah, nama + 1. mudah, ... Jadi, well, saya menggambarkan prinsip kerja file batch yang saya rencanakan, sekarang saatnya untuk memberikan contoh dari salah satu file batch tersebut.  Sebagai contoh, ini: <br><br><pre> <code class="plaintext hljs">cd /d %0\.. echo off set n=44 echo settings.twice=true; &gt;&gt;sphera.asy echo usepackage("animate"); &gt;&gt;sphera.asy echo settings.tex="pdflatex"; &gt;&gt;sphera.asy echo import izgraphiki; &gt;&gt;sphera.asy echo animation a; &gt;&gt;sphera.asy echo int n=%n%; &gt;&gt;sphera.asy echo for(int i=0; i ^&lt;= n; ++i) { &gt;&gt;sphera.asy echo a.add(); &gt;&gt;sphera.asy echo restore(); &gt;&gt;sphera.asy echo } &gt;&gt;sphera.asy echo erase(); &gt;&gt;sphera.asy echo label(a.pdf(BBox(0.25cm),delay=250,"controls,loop,autoplay",multipage=false)); &gt;&gt;sphera.asy for /l %%k in (0,1,%n%) do ( echo settings.twice=true; &gt;&gt; sphera+%%k.asy echo usepackage("animate"^); &gt;&gt; sphera+%%k.asy echo import solids; &gt;&gt; sphera+%%k.asy echo settings.tex="pdflatex"; &gt;&gt; sphera+%%k.asy echo import animation; &gt;&gt; sphera+%%k.asy echo settings.outformat="pdf"; &gt;&gt; sphera+%%k.asy echo settings.axes3=true; &gt;&gt; sphera+%%k.asy echo import graph3; &gt;&gt; sphera+%%k.asy echo import palette; &gt;&gt; sphera+%%k.asy echo currentprojection=orthographic(1,1,1^); &gt;&gt; sphera+%%k.asy echo limits((-1.3,-1.3,-1.3^),(1.3,1.3,1.3^)^); &gt;&gt; sphera+%%k.asy echo unitsize(6cm^); &gt;&gt; sphera+%%k.asy echo animation a=animation(global=false^); //  (global=false^)   &gt;&gt;sphera+%%k.asy echo //C:\Program Files\Asymptote/plain_shipout.asy: 87.10: runtime: Cannot rename _sphera+2+0_.pdf to &gt;&gt;sphera+%%k.asy echo //_sphera+2+0.pdf &gt;&gt;sphera+%%k.asy echo for(int i=0; i ^&lt;= 0; ++i^) { &gt;&gt;sphera+%%k.asy echo real f(real x^) {return sqrt(1-x^^2^);} &gt;&gt; sphera+%%k.asy echo pair F(real x^) {return (x,f(x^)^);} &gt;&gt; sphera+%%k.asy echo triple F3(real x^) {return (x,f(x^),0^);} &gt;&gt; sphera+%%k.asy echo path p=graph(F,-1+i,-1+i+%%k/%n%^); &gt;&gt; sphera+%%k.asy echo path3 p3=path3(p^); &gt;&gt; sphera+%%k.asy echo revolution b=revolution(p3,X,0,360^); &gt;&gt; sphera+%%k.asy echo draw(surface(b^),green^); &gt;&gt; sphera+%%k.asy echo real g(real x^) {return sqrt(1-x^^2^);} &gt;&gt; sphera+%%k.asy echo pair G(real x^) {return (x,f(x^)^);} &gt;&gt; sphera+%%k.asy echo triple G3(real x^) {return (x,g(x^),0^);} &gt;&gt; sphera+%%k.asy echo path q=graph(G,1-i-%%k/%n%,1-i^); &gt;&gt; sphera+%%k.asy echo path3 q3=path3(q^); &gt;&gt; sphera+%%k.asy echo revolution c=revolution(q3,X,0,360^); &gt;&gt; sphera+%%k.asy echo draw(surface(c^),red^); &gt;&gt; sphera+%%k.asy echo axes3("$x$","$y$","$z$",Arrow3^); &gt;&gt; sphera+%%k.asy echo a.add(^); &gt;&gt;sphera+%%k.asy echo restore(^); &gt;&gt;sphera+%%k.asy echo } &gt;&gt;sphera+%%k.asy echo erase(^); &gt;&gt;sphera+%%k.asy echo label(a.pdf(^)^); &gt;&gt;sphera+%%k.asy ) rem for /f %%l in (0,1,%n%) do asy '_sphera+%%l'.asy for /l %%l in (0,1,%n%) do ( asy sphera+%%l.asy taskkill /F /IM AcroRd32.exe ) for /l %%l in (0,1,%n%) do rename sphera+%%l+0.pdf _sphera+%%l.pdf asy sphera.asy</code> </pre><br>  Mohon perhatikan garisnya <br><br><pre> <code class="plaintext hljs">echo for(int i=0; i ^&lt;= n; ++i) { &gt;&gt;sphera.asy</code> </pre><br>  karena simbol <code>&lt;</code> memiliki arti khusus untuk penerjemah baris perintah, agar penerjemah ini mengambil simbol ini dalam arti literal, saya melarikan diri simbol ini dengan meletakkan simbol <code>^</code> di depannya.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk alasan yang sama, saya melindungi simbol itu sendiri </font></font><code>^</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di tubuh siklus file batch, meletakkan simbol lain yang serupa di depannya. </font><font style="vertical-align: inherit;">Selain itu, dalam tubuh siklus file batch ini, saya lolos setiap tanda kurung, jika tidak tanda kurung unshielded pertama yang muncul akan dianggap oleh penerjemah sebagai tanda kurung, pasangan tanda kurung terakhir di tempat file batch</font></font><br><br><pre> <code class="plaintext hljs">for /l %%k in (0,1,%n%) do (</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi, mari kita telusuri apa yang terjadi ketika file batch bekerja dengan struktur yang saya temukan menggunakan contoh spesifik. </font><font style="vertical-align: inherit;">Pada awalnya (dalam hal mengeksekusi file batch, kode yang diberikan oleh saya sedikit di atas, file sphera.asy yang disebutkan di atas dalam artikel ini dibuat lebih dari sekali oleh saya dengan tubuh kosong dari siklus sebagai berikut:</font></font><br><br><pre> <code class="plaintext hljs">settings.twice=true; usepackage("animate"); settings.tex="pdflatex"; import izgraphiki; animation a; int n=44; for(int i=0; i &lt;= n; ++i) { a.add(); restore(); } erase(); label(a.pdf(BBox(0.25cm),delay=250,"controls,loop,autoplay",multipage=false));</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kemudian sphera + 0.asy, sphera + 1.asy, ..., sphera + 44.ketika mudah dihasilkan, pemrosesan masing-masing yang selanjutnya oleh Asymptote sebagai produk sampingan akan memberikan 2d frame sphera + 0.pdf, sphera + 1 .pdf, ..., sphera + 44.pdf. </font><font style="vertical-align: inherit;">Sebagai contoh, isi file sphera + 4.asy akan menjadi sebagai berikut:</font></font><br><br><pre> <code class="plaintext hljs">settings.twice=true; usepackage("animate"); import solids; settings.tex="pdflatex"; import animation; settings.outformat="pdf"; settings.axes3=true; import graph3; import palette; currentprojection=orthographic(1,1,1); limits((-1.3,-1.3,-1.3),(1.3,1.3,1.3)); unitsize(6cm); animation a=animation(global=false); //          (global                  //C:\Program Files\Asymptote/plain_shipout.asy: 87.10: runtime: Cannot rename _sphera+2+0_.pdf to //_sphera+2+0.pdf for(int i=0; i &lt;= 0; ++i) { real f(real x) {return sqrt(1-x^2);} pair F(real x) {return (x,f(x));} triple F3(real x) {return (x,f(x),0);} path p=graph(F,-1+i,-1+i+4/44); path3 p3=path3(p); revolution b=revolution(p3,X,0,360); draw(surface(b),green); real g(real x) {return sqrt(1-x^2);} pair G(real x) {return (x,f(x));} triple G3(real x) {return (x,g(x),0);} path q=graph(G,1-i-4/44,1-i); path3 q3=path3(q); revolution c=revolution(q3,X,0,360); draw(surface(c),red); axes3("$x$","$y$","$z$",Arrow3); a.add(); restore(); } erase(); label(a.pdf());</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya menyalin kode ini dengan membuka file sphera + 4.asy di TeXworks, dan di sana encoding diatur ke UTF-8: </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6f8/0fe/edb/6f80feedb143f6a0369c71dd298b0ff3.jpg" alt="gambar"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File batch adalah encoding ANSI. </font><font style="vertical-align: inherit;">Rupanya, inilah sebabnya komentar saya dalam tubuh siklus file batch kedua digantikan oleh kotak dalam file rintisan mudah ini, yang, bagaimanapun, tidak mengganggu pemrosesan oleh Asymptote. </font><font style="vertical-align: inherit;">Setelah pemrosesan ini, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">frame 2d</font></a><font style="vertical-align: inherit;"> ini diperoleh dari file ini</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Saya secara khusus memberikan tautan untuk mengunduh salah satu bingkai 2d ini, dan jangan menyisipkan gambar bingkai ini di sini sehingga pembaca dapat melihat secara langsung apa bingkai 2d yang saya gunakan. Inti dari file rintisan .asy lainnya adalah sama, hanya saja mereka berbeda satu sama lain dalam nilai-nilai argumen fungsi di tubuh loop. Berikutnya, frame 2d diganti nama menjadi sphera + 0 + 0.pdf, sphera + 1 + 0.pdf, ..., sphera + 44 + 0.pdf ke _sphera + 0.pdf, _sphera + 1.pdf, ..., _sphera + 44.pdf, dan, akhirnya, Asymptote memproses file dengan tubuh kosong dari siklus sphera.asy. Hasilnya adalah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">animasi seperti itu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Saya memberikan tautan ke .gif hanya karena, ketika saya mencoba memasukkan .gif di sini, animasi untuk beberapa alasan tidak muncul sepenuhnya. </font><font style="vertical-align: inherit;">Saya menggunakan .gif, bukan .pdf karena, kemungkinan besar, pembaca mimpi buruk ini tahu bahwa animasi di browser, mis., Di sini, di .pdf tidak ditampilkan, tetapi dalam .gif ditampilkan. </font><font style="vertical-align: inherit;">Saya baru saja mendapatkan .gif ini, dengan mengeksekusi file batch saya hanya tersumbat dengan konten berikut:</font></font><br><br><pre> <code class="plaintext hljs">cd /d %0\.. echo off set n=44 echo import graph; &gt;sphera.asy echo settings.twice=true; &gt;&gt;sphera.asy echo usepackage("animate"); &gt;&gt;sphera.asy echo settings.tex="pdflatex"; &gt;&gt;sphera.asy echo import izgraphikigif; &gt;&gt;sphera.asy echo animation a; &gt;&gt;sphera.asy echo yequals(Label("$y=-1$",1.0),-1,extend=true,linetype("4 4")); &gt;&gt;sphera.asy echo int n=%n%; &gt;&gt;sphera.asy echo for(int i=0; i ^&lt;= n; ++i) { &gt;&gt;sphera.asy echo a.add(); &gt;&gt;sphera.asy echo restore(); &gt;&gt;sphera.asy echo } &gt;&gt;sphera.asy echo erase(); &gt;&gt;sphera.asy echo a.movie(); &gt;&gt;sphera.asy for /l %%k in (0,1,%n%) do ( echo settings.twice=true; &gt; sphera+%%k.asy echo usepackage("animate"^); &gt;&gt; sphera+%%k.asy echo import solids; &gt;&gt; sphera+%%k.asy echo settings.tex="pdflatex"; &gt;&gt; sphera+%%k.asy echo import animation; &gt;&gt; sphera+%%k.asy echo settings.outformat="pdf"; &gt;&gt; sphera+%%k.asy echo settings.axes3=true; &gt;&gt; sphera+%%k.asy echo import graph3; &gt;&gt; sphera+%%k.asy echo import palette; &gt;&gt; sphera+%%k.asy echo currentprojection=orthographic(1,1,1^); &gt;&gt; sphera+%%k.asy echo limits((-1.3,-1.3,-1.3^),(1.3,1.3,1.3^)^); &gt;&gt; sphera+%%k.asy echo unitsize(6cm^); &gt;&gt; sphera+%%k.asy echo animation a=animation(global=false^); //  (global=false^)   &gt;&gt;sphera+%%k.asy echo //C:\Program Files\Asymptote/plain_shipout.asy: 87.10: runtime: Cannot rename _sphera+2+0_.pdf to &gt;&gt;sphera+%%k.asy echo //_sphera+2+0.pdf &gt;&gt;sphera+%%k.asy echo for(int i=0; i ^&lt;= 0; ++i^) { &gt;&gt;sphera+%%k.asy echo real f(real x^) {return sqrt(1-x^^2^);} &gt;&gt; sphera+%%k.asy echo pair F(real x^) {return (x,f(x^)^);} &gt;&gt; sphera+%%k.asy echo triple F3(real x^) {return (x,f(x^),0^);} &gt;&gt; sphera+%%k.asy echo path p=graph(F,-1+i,-1+i+%%k/%n%^); &gt;&gt; sphera+%%k.asy echo path3 p3=path3(p^); &gt;&gt; sphera+%%k.asy echo revolution b=revolution(p3,X,0,360^); &gt;&gt; sphera+%%k.asy echo draw(surface(b^),green^); &gt;&gt; sphera+%%k.asy echo real g(real x^) {return sqrt(1-x^^2^);} &gt;&gt; sphera+%%k.asy echo pair G(real x^) {return (x,f(x^)^);} &gt;&gt; sphera+%%k.asy echo triple G3(real x^) {return (x,g(x^),0^);} &gt;&gt; sphera+%%k.asy echo path q=graph(G,1-i-%%k/%n%,1-i^); &gt;&gt; sphera+%%k.asy echo path3 q3=path3(q^); &gt;&gt; sphera+%%k.asy echo revolution c=revolution(q3,X,0,360^); &gt;&gt; sphera+%%k.asy echo draw(surface(c^),red^); &gt;&gt; sphera+%%k.asy echo axes3("$x$","$y$","$z$",Arrow3^); &gt;&gt; sphera+%%k.asy echo a.add(^); &gt;&gt;sphera+%%k.asy echo restore(^); &gt;&gt;sphera+%%k.asy echo } &gt;&gt;sphera+%%k.asy echo erase(^); &gt;&gt;sphera+%%k.asy echo label(a.pdf(^)^); &gt;&gt;sphera+%%k.asy ) for /l %%l in (0,1,%n%) do ( asy sphera+%%l.asy taskkill /F /IM AcroRd32.exe ) rem for /l %%l in (0,1,%n%) do rename sphera+%%l+0.pdf _sphera+%%l.pdf asy sphera.asy</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya tidak akan menjelaskan secara rinci prinsip pengoperasian file batch ini, pembaca akan memahaminya setelah mengamati proses memperoleh .gif dari file wheel.asy yang sudah lama menderita. </font><font style="vertical-align: inherit;">Saya hanya mencatat bahwa kurangnya garis</font></font><br><br><pre> <code class="plaintext hljs">yequals(Label("$y=-1$",1.0),-1,extend=true,linetype("4 4"));</code> </pre> <br>   sphera.asy   ,    .       ,              /¬´ ¬ª     .asy    .       .gif,   Imagemagick  2d-: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/196/03e/950/19603e950e36d48883c3acf0eb005b26.gif" alt="gambar"><br><br> ,    . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   <s></s> , </a> . ? <br><br>      <code>magick *.eps sphere.gif</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di baris perintah diluncurkan dari folder di mana ada frame 2d dengan ekstensi .eps. Saya masih memiliki bingkai ini dari rakitan .gif dengan file batch terakhir yang diberikan di atas. Seperti yang mereka katakan, temukan 10 perbedaan)). Jadi, sepertinya, belum lupa apa-apa. Tetap hanya untuk memberi tahu, seperti yang saya janjikan, tentang modul yang dimodifikasi oleh saya, yang diperoleh dengan mengubah modul animasi yang sama. Lalu mengapa saya berjanji untuk berbicara tentang satu modul, dan saya akan berbicara tentang beberapa (sekitar dua) modul? Karena dalam proses penulisan artikel ini, saya perlu membuat animasi .gif dari sejumlah besar bingkai. Ternyata modul izgraphiki.asy digunakan oleh saya - sebuah modifikasi dari modul animation.asy - untuk menghasilkan animasi .pdf dengan sejumlah besar bingkai (mungkin dengan (lihatdi atas) grafis 3d pada mereka) sama sekali tidak cocok untuk produksi animasi .gif dengan sejumlah besar bingkai (mungkin dengan, seolah-olah (lihat di atas) grafik 3d pada mereka). Namun, seorang pembaca yang penuh perhatian dapat memperhatikan penggunaan dua modul saya sendiri. Dalam modul ‚Äúsaya‚Äù untuk menghasilkan .pdf, di mana saya menerima salinan dengan mengganti nama file animation.asy, saya harus mengomentari definisi (saya pikir saya melakukannya dengan definisi) dari sesuatu yang semuanya 4 baris yang membentuk esensi dari definisi ini , meninggalkan ini sesuatu itu sendiri, tetapi dengan definisi kosong: menghapus, bersama dengan definisinya, objek ini sendiri menyebabkan kesalahan: itu diindikasikan bahwa objek ini tidak dikenal. Menyimpan objek ini dalam modul, tetapi dengan garis yang dihapus (atau dikomentari) dari definisi ini sendiri menyelesaikan masalah ini.Ini adalah baris-baris dari modul animation.asy:</font></font><br><br><pre> <code class="plaintext hljs">string format=nativeformat(); plain.shipout(name,f,format=format,view=false); files.push(name+"."+format); shipped=false;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dan di sini adalah bagaimana baris yang sama terlihat di modul izgraphiki.asy: </font></font><br><br><pre> <code class="plaintext hljs">//string format=nativeformat(); //plain.shipout(name,f,format=format,view=false); //files.push(name+"."+format); //shipped=false;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dan di sini adalah modul izgraphiki.asy itu sendiri: </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modul izgraphiki.asy</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">/***** * animation.asy * Andy Hammerlindl and John Bowman 2005/11/06 * * Produce GIF, inline PDF, or other animations. *****/ // animation delay is in milliseconds real animationdelay=50; typedef frame enclosure(frame); frame NoBox(frame f) { return f; } enclosure BBox(real xmargin=0, real ymargin=xmargin, pen p=currentpen, filltype filltype=NoFill) { return new frame(frame f) { box(f,xmargin,ymargin,p,filltype,above=false); return f; }; } struct animation { picture[] pictures; string[] files; int index; string prefix; bool global; // If true, use a global scaling for all frames; this requires // extra memory since the actual shipout is deferred until all frames have // been generated. void operator init(string prefix="", bool global=true) { prefix=replace(stripdirectory(outprefix(prefix))," ","_"); this.prefix=prefix; this.global=global; } string basename(string prefix=stripextension(prefix)) { return "_"+prefix; } string name(string prefix, int index) { return stripextension(prefix)+"+"+string(index); } private string nextname() { string name=basename(name(prefix,index)); ++index; return name; } void shipout(string name=nextname(), frame f) { // string format=nativeformat(); // plain.shipout(name,f,format="png",view=false); //generiruet!!!! //files.push(name+"."+format); // shipped=false; } void add(picture pic=currentpicture, enclosure enclosure=NoBox) { if(global) { ++index; pictures.push(pic.copy()); } else this.shipout(enclosure(pic.fit())); } void purge(bool keep=settings.keep) { if(!keep) { for(int i=0; i &lt; files.length; ++i) delete(files[i]); } } int merge(int loops=0, real delay=animationdelay, string format="gif", string options="", bool keep=settings.keep) { string args="-loop " +(string) loops+" -delay "+(string)(delay/10)+ " -alpha Off -dispose Background "+options; for(int i=0; i &lt; files.length; ++i) args += " " +files[i]; int rc=convert(args,prefix+"."+format,format=format); this.purge(keep); if(rc == 0) animate(file=prefix+"."+format,format=format); else abort("merge failed"); return rc; } void glmovie(string prefix=prefix, projection P=currentprojection) { if(!view() || settings.render == 0) return; fit(prefix,pictures,view=true,P); } // Export all frames with the same scaling. void export(string prefix=prefix, enclosure enclosure=NoBox, bool multipage=false, bool view=false, projection P=currentprojection) { if(pictures.length == 0) return; if(!global) multipage=false; bool inlinetex=settings.inlinetex; if(multipage) settings.inlinetex=false; frame multi; frame[] fits=fit(prefix,pictures,view=false,P); for(int i=0; i &lt; fits.length; ++i) { string s=name(prefix,i); if(multipage) { add(multi,enclosure(fits[i])); newpage(multi); files.push(s+"."+nativeformat()); } else { if(pictures[i].empty3() || settings.render &lt;= 0) this.shipout(s,enclosure(fits[i])); else // 3D frames files.push(s+"."+nativeformat()); } } if(multipage) { plain.shipout(prefix,multi,view=view); settings.inlinetex=inlinetex; } shipped=true; } string load(int frames, real delay=animationdelay, string options="", bool multipage=false) { if(!global) multipage=false; string s="\animategraphics["+options+"]{"+format("%.18f",1000/delay,"C")+ "}{"+basename(); if(!multipage) s += "+"; s += "}{0}{"+string(frames-1)+"}"; return s; } bool pdflatex() { return latex() &amp;&amp; pdf(); } string pdf(enclosure enclosure=NoBox, real delay=animationdelay, string options="", bool keep=settings.keep, bool multipage=true) { if(settings.inlinetex) multipage=true; if(!global) multipage=false; if(!pdflatex()) abort("inline pdf animations require -tex pdflatex or -tex xelatex"); if(settings.outformat != "") settings.outformat="pdf"; string filename=basename(); string pdfname=filename+".pdf"; if(global) export(filename,enclosure,multipage=multipage); shipped=false; if(!keep) { exitfcn currentexitfunction=atexit(); void exitfunction() { if(currentexitfunction != null) currentexitfunction(); if(multipage || !settings.inlinetex) this.purge(); if(multipage &amp;&amp; !settings.inlinetex) delete(pdfname); } atexit(exitfunction); } if(!multipage) delete(pdfname); return load(index,delay,options,multipage); } int movie(enclosure enclosure=NoBox, int loops=0, real delay=animationdelay, string format=settings.outformat == "" ? "gif" : settings.outformat, string options="", bool keep=settings.keep) { if(global) { if(format == "pdf") { export(enclosure,multipage=true,view=true); return 0; } export(enclosure); } return merge(loops,delay,format,options,keep); } } animation operator init() { animation a=animation(); return a; }</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Saya perhatikan bahwa garis </font></font><br><br><pre> <code class="plaintext hljs">plain.shipout(name,f,format="png",view=false); //generiruet!!!!</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modul ini berbeda dari garis pra-gambarnya di modul animation.asy, tetapi ini adalah jejak penelitian saya, saya tidak mengubahnya: modul ini tidak mengganggu apa pun, tetapi memiliki efek ketika membatalkan komentar pada baris-baris ini. </font><font style="vertical-align: inherit;">Tetapi untuk mendapatkan animasi .gif dari baris yang saya komentari di modul izgraphiki.asy, saya hanya perlu mengomentari satu baris dalam file animation.asy yang disalin dan diganti namanya menjadi izgraphikigif.asy -</font></font><pre> <code class="plaintext hljs">plain.shipout(name,f,format= format,view=false);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mis. baris ini dalam modul izgraphikigif.asy terlihat seperti ini: </font></font><br><br><pre> <code class="plaintext hljs">//plain.shipout(name,f,format= format,view=false);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentu saja, Anda dapat menghapus baris ini sepenuhnya. </font><font style="vertical-align: inherit;">Dengan demikian, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modul </font><font style="vertical-align: inherit;">animation.asy dan </font><font style="vertical-align: inherit;">izgraphikigif.asy umumnya berbeda hanya dalam satu baris, namun demikian. </font><font style="vertical-align: inherit;">Pada gilirannya, upaya untuk menggunakan modul izgraphikigif.asy untuk membuat animasi .pdf tidak berhasil, sehingga tidak akan berhasil mengurangi 2 modul ini menjadi satu. </font><font style="vertical-align: inherit;">Meskipun, mungkin, entah bagaimana melalui jika, saya tidak tahu, saya tidak akan mengatakan apa-apa: Saya, ternyata, hari ini saya tidak tahu bahasa Asymptote dengan baik. </font><font style="vertical-align: inherit;">Saya perhatikan bahwa, meskipun saya menggunakan file batch, mirip dengan file batch dari struktur yang dijelaskan di atas, untuk membuat animasi lain berfungsi, dalam satu kasus saya tidak berhasil - ketika mencoba untuk mendapatkan epicycloid animasi dengan melakukan file batch seperti itu:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Epicycloid gagal</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">cd /d %0\.. echo off set n=2 set name=kriv echo settings.twice=true; &gt;%name%.asy echo settings.prc=false; &gt;&gt; %name%.asy echo // Uncomment the following 2 lines to support pdf animations: &gt;&gt;%name%.asy echo usepackage("animate"^); &gt;&gt;%name%.asy echo settings.tex="pdflatex"; &gt;&gt;%name%.asy echo import sinoid; &gt;&gt;%name%.asy echo animation a; &gt;&gt;%name%.asy echo int n=%n%; &gt;&gt;%name%.asy echo for(int i=0; i ^&lt;= n; ++i^) { &gt;&gt;%name%.asy echo a.add(^); // Add currentpicture to animation. &gt;&gt;%name%.asy echo restore(^); &gt;&gt;%name%.asy echo } &gt;&gt;%name%.asy echo erase(^); &gt;&gt;%name%.asy echo label(a.pdf(BBox(0.25cm^),delay=250,"controls",multipage=false^)^); &gt;&gt;%name%.asy for /l %%k in (0,1,%n%) do ( echo import graph; &gt; %name%+%%k.asy echo settings.twice=true; &gt;&gt; %name%+%%k.asy echo usepackage("animate"^); &gt;&gt; %name%+%%k.asy echo settings.tex="pdflatex"; &gt;&gt; %name%+%%k.asy echo import animation; &gt;&gt; %name%+%%k.asy echo limits((-6.3,-6.3^),(6.3,6.3^)^); &gt;&gt; %name%+%%k.asy echo size(0,100^); &gt;&gt; %name%+%%k.asy echo animation a=animation(global=false^);&gt;&gt;%name%+%%k.asy echo for(int i=0; i ^&lt;= 0; ++i^) { &gt;&gt;%name%+%%k.asy echo real r=0.925; &gt;&gt; %name%+%%k.asy echo real R=3.61; &gt;&gt; %name%+%%k.asy echo real d=1.39; &gt;&gt; %name%+%%k.asy echo real x(real t^) {return (R+r^)*cos(t^)-d*cos((R+r^)*t/r^);} &gt;&gt; %name%+%%k.asy echo real y(real t^) {return (R+r^)*sin(t^)-d*sin((R+r^)*t/r^);} &gt;&gt; %name%+%%k.asy echo draw(graph(x,y,0,2*pi*%%k/%n%^),green^); &gt;&gt; %name%+%%k.asy echo axes("$x$","$y$",Arrow^); &gt;&gt; %name%+%%k.asy echo a.add(^); // Add currentpicture to animation. &gt;&gt;%name%+%%k.asy echo restore(^); &gt;&gt;%name%+%%k.asy echo } &gt;&gt;%name%+%%k.asy echo erase(^); &gt;&gt;%name%+%%k.asy echo // Merge the images into a pdf animation. &gt;&gt;%name%+%%k.asy echo label(a.pdf(^)^); &gt;&gt;%name%+%%k.asy ) rem for /f %%l in (0,1,%n%) do asy '%name%+%%l'.asy rem asy *.asy for /l %%l in (0,1,%n%) do ( asy %name%+%%l.asy taskkill /IM AcroRd32.exe ) for /l %%l in (0,1,%n%) do rename %name%+%%l.pdf _%name%+%%l.pdf asy %name%.asy</code> </pre><br></div></div><br>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meskipun saya akan membunuh Anda, saya tidak mengerti mengapa itu tidak berhasil: file kriv.asy dengan loop kosong terbentuk, 2d frames.pdf terbentuk, masing-masing memiliki grafik, semuanya OK, Asymptote memproses file kriv.asy tanpa hambatan, file kriv.pdf ukuran non-nol muncul, Anda membukanya, di sana, seperti biasa untuk .pdf diperoleh dari file mudah dari konten seperti: tombol kontrol animasi, persegi panjang putih di atasnya di mana frame animasi harus berkedip. Mereka harus, tetapi mereka tidak berkewajiban: Klik persegi panjang putih atau tombol putar, tombol ini diganti dengan tombol Jeda, semuanya baik-baik saja, tetapi tidak ada bingkai dan hanya itu, satu persegi panjang putih! Mengapa - pertanyaan sejuta. Ngomong-ngomong, ada satu hal lagi yang membuatku bingung: aku menggunakan nama kriv alih-alih nama yang jelas epicykloida.Saat mencoba menggunakan nama ini, tidak ada yang terjadi, itu tidak berhasil, dan saat membuat animasi lain, gunakan nama Astroida. Perubahan dalam kedua kasus dalam file batch nilai hanya satu nama variabel dalam satu kasus di krivaja, yang lain di kriv segera menyebabkan munculnya .pdf dengan animasi yang biasanya ditampilkan. Tetapi jelas bahwa masalah ini disebabkan oleh Asymptote: dan ketika mencoba untuk memproses, misalnya, file dengan tubuh kosong dari siklus Astroida.asy, masalah yang sama diamati. Sedangkan untuk produksi file .mpg dari jumlah frame yang besar (saya ulangi, dalam batas wajar) sewenang-wenang dalam semangat artikel ini, saya belum berurusan dengan ini, tapi, saya pikir, tidak ada masalah yang tidak dapat diatasi muncul. Ya, ketika saya ingat, ini tidak berlaku untuk file batch yang dijelaskan di sini, tetapi mengacu pada animasi di Asymptote secara umum: file .asy,dari mana animasi .pdf diperoleh berbeda dari file .asy, dari mana animasi .gif diperoleh, dengan satu baris, terakhir, baris.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Baris terakhir paling sederhana dari file .asy yang akan menghasilkan animasi .pdf adalah: </font></font><br><br><pre> <code class="plaintext hljs">label(a.pdf());</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Baris terakhir paling sederhana dari file .asy, dari mana animasi .gif akan muncul, terlihat seperti ini: </font></font><br><br><pre> <code class="plaintext hljs">a.movie();</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan baris terakhir yang paling sederhana dari file .asy, yang darinya .mpg yang dapat dikerjakan akan berubah, adalah sama dengan baris terakhir yang paling sederhana dari file .asy, darimana animasi .gif akan muncul. </font><font style="vertical-align: inherit;">Pada saat yang sama, .mpg yang dapat dikerjakan sudah muncul saat memproses file .asy, yang baris yang saya cari begitu lama belum ditulis</font></font><br><br><pre> <code class="plaintext hljs">settings.twice=true;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sekarang, sepertinya, itu saja. </font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id468125/">https://habr.com/ru/post/id468125/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id468107/index.html">Cara membuat model lebih tepat daripada transfermarkt dan tidak memprediksi atau apa yang paling mempengaruhi biaya transfer</a></li>
<li><a href="../id468109/index.html">Mereka mengatakan Samara adalah kota orang-orang Jawa, tetapi kami mengendarainya dengan PHP mit</a></li>
<li><a href="../id468111/index.html">PSD2 - tendangan untuk bank</a></li>
<li><a href="../id468117/index.html">Ethernet, FTP, Telnet, HTTP, Bluetooth - dasar-dasar analisis lalu lintas. Memecahkan masalah pada jaringan dengan r0ot-mi. Bagian 1</a></li>
<li><a href="../id468121/index.html">Bagaimana saya tidak menjadi programmer pada usia 35</a></li>
<li><a href="../id468127/index.html">Evolution CMS 2.0 pada komponen Laravel 6.0 - evolusi alami MODX Evolution</a></li>
<li><a href="../id468135/index.html">10 laporan JPoint 2019 teratas</a></li>
<li><a href="../id468139/index.html">Aftershokz Xtrainerz Berenang Headphone dengan Suara Berperforma Tulang - Keren</a></li>
<li><a href="../id468141/index.html">Tugas: untuk mengekstraksi ekspresi kunci dari teks dalam bahasa Rusia. Python NLP</a></li>
<li><a href="../id468143/index.html">466 terabit: lalu lintas Internet global terus bertambah, bisakah satelit bersaing dengan kabel bawah laut?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>