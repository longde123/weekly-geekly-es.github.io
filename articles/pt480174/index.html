<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüéì üë∏üèΩ ‚õëÔ∏è Semin√°rio on-line sobre decodifica√ß√£o "SRE - hype ou o futuro?" üö∂üèΩ ü•ê üòé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O webinar tem um som ruim e, por isso, o deciframos. 


 Meu nome √© Edward Medvedev. Hoje vou falar sobre o que √© o SRE, como ele apareceu, quais crit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Semin√°rio on-line sobre decodifica√ß√£o "SRE - hype ou o futuro?"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/480174/"><iframe width="560" height="315" src="https://www.youtube.com/embed/JUmR9YDkZdg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  O webinar tem um som ruim e, por isso, o deciframos. </p><br><p>  Meu nome √© Edward Medvedev.  Hoje vou falar sobre o que √© o SRE, como ele apareceu, quais crit√©rios os engenheiros do SRE trabalham, um pouco sobre crit√©rios de confiabilidade, um pouco sobre seu monitoramento.  Subimos as escadas, porque voc√™ n√£o dir√° muito em uma hora, mas darei materiais para familiariza√ß√£o adicional e todos esperamos por voc√™ no <a href="https://slurm.io/sre%3Futm_source%3Dhabr%26utm_medium%3Dwebinarpub%26utm_campaign%3Dsre">Slerm SRE</a> .  em Moscou no final de janeiro. </p><a name="habracut"></a><br><p>  Primeiro, vamos falar sobre o que √© SRE - Site Reliability Engineering.  E como apareceu como uma posi√ß√£o separada, como uma dire√ß√£o separada.  Tudo come√ßou com o fato de que nos c√≠rculos tradicionais de desenvolvimento, Dev e Ops s√£o duas equipes completamente diferentes, geralmente com dois objetivos completamente diferentes.  O objetivo da equipe de desenvolvimento √© implantar novos recursos e atender √†s necessidades dos neg√≥cios.  O objetivo da equipe de opera√ß√µes √© que tudo funcione e nada quebre.  Obviamente, esses objetivos se contradizem diretamente: para que tudo funcione e nada quebre, implantar novos recursos √© o m√≠nimo poss√≠vel.  Por esse motivo, existem muitos conflitos internos que a metodologia, que agora √© chamada DevOps, est√° tentando resolver. </p><br><p>  O problema √© que n√£o temos uma defini√ß√£o clara de DevOps e uma implementa√ß√£o clara de DevOps.  Eu falei em uma confer√™ncia em Ecaterimburgo h√° 2 anos, e at√© agora a se√ß√£o DevOps come√ßou com uma apresenta√ß√£o de "O que √© DevOps".  Em 2017, o devo tem quase 10 anos, mas ainda discutimos o que √©.  E essa √© uma situa√ß√£o muito estranha que o Google tentou resolver h√° v√°rios anos. </p><br><p>  Em 2016, o Google lan√ßou um livro chamado Site Reliability Engineering.  E, de fato, foi a partir deste livro que o movimento SRE come√ßou.  O SRE √© uma op√ß√£o espec√≠fica para implementar o paradigma DevOps em uma empresa espec√≠fica.  Os engenheiros da SRE estabelecem o objetivo de garantir um desempenho confi√°vel do sistema.  Eles s√£o extra√≠dos principalmente de desenvolvedores, √†s vezes de administradores com forte experi√™ncia em desenvolvimento.  E eles est√£o fazendo o que os administradores de sistema fizeram antes, mas uma s√≥lida experi√™ncia no desenvolvimento e conhecimento do sistema em termos de c√≥digo leva ao fato de que essas pessoas n√£o est√£o inclinadas ao trabalho administrativo de rotina, mas tendem √† automa√ß√£o. </p><br><p>  Acontece que o paradigma do DevOps nas equipes de SRE √© implementado pelo fato de existirem engenheiros de SRE que resolvem problemas estruturais.  Aqui est√°, a pr√≥pria conex√£o entre Dev e Ops sobre a qual as pessoas falam h√° 8 anos.  O papel do SRE √© semelhante ao papel de um arquiteto, no sentido de que os rec√©m-chegados ao SRE n√£o.  As pessoas no in√≠cio de uma carreira ainda n√£o t√™m experi√™ncia, n√£o possuem a amplitude necess√°ria de conhecimento.  Porque o SRE requer um conhecimento muito bem do que exatamente e quando exatamente pode dar errado.  Portanto, √© necess√°ria alguma experi√™ncia aqui, como regra, dentro e fora da empresa. </p><br><p> Eles perguntam se a diferen√ßa entre SRE e devops ser√° descrita.  Ela acabou de ser descrita.  Podemos falar sobre o lugar da SRE na organiza√ß√£o.  Diferente dessa abordagem cl√°ssica do DevOps, onde o Ops ainda √© um departamento separado, o SRE faz parte da equipe de desenvolvimento.  Eles est√£o envolvidos no desenvolvimento de produtos.  Existe at√© uma abordagem em que o SRE √© uma fun√ß√£o que se move de um desenvolvedor para outro.  Eles participam de revis√µes de c√≥digo da mesma maneira que, por exemplo, designers de UX, pr√≥prios desenvolvedores e, √†s vezes, gerentes de produto.  O SRE trabalha no mesmo n√≠vel.  Precisamos da atualiza√ß√£o deles, da revis√£o, para que, para cada implanta√ß√£o do SRE, diga: ‚ÄúBem, nesta implanta√ß√£o, este produto n√£o afetar√° negativamente a confiabilidade.  E se isso acontecer, ent√£o at√© certo ponto.  Tamb√©m falaremos sobre isso. </p><br><p>  Consequentemente, o SRE veta mudar o c√≥digo.  E, em geral, isso tamb√©m leva a algum tipo de pequeno conflito se o SRE for implementado incorretamente.  No mesmo livro sobre Engenharia de confiabilidade do site, muitas partes, nem mesmo uma, informam como evitar esses conflitos. </p><br><p>  Eles perguntam como o SRE se relaciona com a seguran√ßa da informa√ß√£o.  O SRE n√£o est√° diretamente envolvido na seguran√ßa da informa√ß√£o.  Basicamente, em grandes empresas, indiv√≠duos, testadores e analistas fazem isso.  Mas o SRE tamb√©m interage com eles no sentido de que algumas opera√ß√µes, algumas confirma√ß√µes, algumas implanta√ß√µes que afetam a seguran√ßa tamb√©m podem afetar a disponibilidade do produto.  Portanto, o SRE como um todo interage com qualquer equipe, incluindo equipes de seguran√ßa, incluindo analistas.  Portanto, a maioria dos SREs √© necess√°ria quando eles tentam implementar o DevOps, mas ao mesmo tempo a carga nos desenvolvedores se torna muito grande.  Ou seja, a pr√≥pria equipe de desenvolvimento n√£o pode mais lidar com o fato de que agora eles tamb√©m precisam ser respons√°veis ‚Äã‚Äãpelas opera√ß√µes.  E um papel separado aparece.  Essa fun√ß√£o est√° planejada no or√ßamento.  √Äs vezes, esse papel √© definido no tamanho da equipe, aparece uma pessoa separada, √†s vezes se torna um dos desenvolvedores.  Portanto, o primeiro SRE aparece na equipe. </p><br><p>  A complexidade do sistema, que √© afetada pelo SRE, a complexidade que afeta a confiabilidade do trabalho, √© necess√°ria e aleat√≥ria.  A complexidade necess√°ria √© quando a complexidade de um produto aumenta na medida em que novos recursos do produto exigem.  Complexidade aleat√≥ria √© quando a complexidade do sistema aumenta, mas o recurso do produto e os requisitos de neg√≥cios n√£o afetam diretamente isso.  Acontece que ou o desenvolvedor cometeu um erro em algum lugar, ou o algoritmo n√£o √© o ideal, ou s√£o introduzidos alguns interesses adicionais que aumentam a complexidade do produto sem necessidade especial.  Um bom SRE sempre deve interromper essa situa√ß√£o.  Ou seja, qualquer confirma√ß√£o, implanta√ß√£o ou solicita√ß√£o de recebimento em que a complexidade aumenta devido a adi√ß√µes aleat√≥rias deve ser bloqueada. </p><br><p>  A quest√£o √©: por que n√£o contratar um engenheiro, um administrador de sistemas com muito conhecimento na equipe.  Dizem que um desenvolvedor no papel de engenheiro n√£o √© a melhor solu√ß√£o de pessoal.  Um desenvolvedor no papel de engenheiro nem sempre √© a melhor solu√ß√£o de equipe, mas o ponto aqui √© que o desenvolvedor que lida com o Ops tem um pouco mais de desejo por automa√ß√£o, tem um pouco mais de conhecimento e habilidades para implementar essa automa√ß√£o.  E, consequentemente, estamos reduzindo n√£o apenas o tempo de opera√ß√µes espec√≠ficas, n√£o apenas a rotina, mas tamb√©m par√¢metros comerciais importantes como MTTR (tempo m√©dio de recupera√ß√£o, tempo de recupera√ß√£o).  Assim, e isso tamb√©m ser√° um pouco mais tarde, economizamos dinheiro para a organiza√ß√£o. </p><br><p>  Agora vamos falar sobre os crit√©rios para o trabalho da SRE.  E antes de tudo sobre confiabilidade.  Nas pequenas empresas, startups, muitas vezes acontece que as pessoas assumem que, se o servi√ßo for bem escrito, se o produto for bem e corretamente escrito, ele funcionar√°, n√£o ser√° interrompido.  √â tudo, escrevemos um bom c√≥digo, ent√£o n√£o h√° nada para quebrar.  O c√≥digo √© muito simples, n√£o h√° nada para quebrar.  S√£o as mesmas pessoas que dizem que n√£o precisamos de testes, porque, veja, esses s√£o tr√™s m√©todos de VPI, por que quebrar? </p><br><p>  Est√° tudo errado, √© claro.  E muitas vezes essas pessoas mordem esse c√≥digo na pr√°tica, porque as coisas quebram.  As coisas √†s vezes quebram da maneira mais imprevis√≠vel.  √Äs vezes as pessoas dizem que n√£o, isso nunca vai acontecer.  E tudo acontece exatamente.  Isso acontece com bastante frequ√™ncia.  E, portanto, ningu√©m nunca se esfor√ßa para 100% de disponibilidade, porque 100% de disponibilidade nunca acontece.  Essa √© a norma.  E, portanto, quando falamos sobre a disponibilidade de um servi√ßo, sempre falamos sobre noves.  2 noves, 3 noves, 4 noves, 5 noves.  Se voc√™ traduzir isso em tempo de inatividade, por exemplo, 5 noves, isso significa um pouco mais de 5 minutos de inatividade por ano, 2 noves s√£o 3,5 dias de inatividade. </p><br><p>  Mas √© √≥bvio que, em algum momento, h√° uma diminui√ß√£o no POI, no retorno do investimento.  Passando de dois a nove, isso significa reduzir o tempo de inatividade em mais de 3 dias.  Passar de quatro para nove reduz o tempo de inatividade em 47 minutos por ano.  E acontece que para uma empresa isso pode n√£o ser cr√≠tico.  E, em geral, a confiabilidade necess√°ria n√£o √© uma quest√£o t√©cnica, antes de tudo, √© uma quest√£o de neg√≥cios, √© uma quest√£o de produto.  Qual n√≠vel de tempo de inatividade √© aceit√°vel para os usu√°rios do produto, o que eles esperam, quanto pagam, por exemplo, quanto dinheiro perdem, quanto dinheiro o sistema perde. </p><br><p>  Uma quest√£o importante nesse caso √© qual √© a confiabilidade dos componentes restantes.  Porque a diferen√ßa entre 4 e 5 noves n√£o ser√° vis√≠vel em um smartphone com 2 noves de confiabilidade.  Grosso modo, se algo quebrar em um smartphone em seu servi√ßo 10 vezes por ano, provavelmente 8 vezes a falha ocorreu precisamente no lado do sistema operacional.  O usu√°rio est√° acostumado a isso e n√£o prestar√° aten√ß√£o uma vez por ano.  √â necess√°rio correlacionar o pre√ßo de aumentar a confiabilidade e aumentar o lucro. <br>  Apenas no livro sobre SRE, h√° um bom exemplo de como aumentar para 4 noves a partir de 3 noves.  Acontece que o aumento na disponibilidade √© um pouco menor que 0,1%.  E se a receita do servi√ßo for de US $ 1 milh√£o por ano, o aumento da receita ser√° de US $ 900.  Se aumentar a acessibilidade em nove nos custa menos de US $ 900 por ano, esse aumento faz sentido financeiro.  Se custa mais de US $ 900 por ano, n√£o faz mais sentido, porque o crescimento da receita simplesmente n√£o compensa os custos de m√£o de obra, os recursos.  E tr√™s noves ser√£o suficientes para n√≥s. </p><br><p>  Obviamente, este √© um exemplo simplificado em que todas as consultas s√£o iguais.  E de 3 a 4, √© muito f√°cil alternar, mas ao mesmo tempo, por exemplo, alternar de 2 para 3 j√° √© uma economia de 9 mil d√≥lares, pode fazer sentido financeiramente.  Naturalmente, na realidade, uma falha em uma solicita√ß√£o de registro √© pior do que uma falha na exibi√ß√£o de uma p√°gina; as solicita√ß√µes t√™m peso diferente.  Eles podem ter crit√©rios muito diferentes do ponto de vista dos neg√≥cios, mas ainda assim, como regra, se n√£o estamos falando de nenhum servi√ßo espec√≠fico, essa √© uma aproxima√ß√£o bastante confi√°vel. <br>  Perguntamos se o SRE √© um dos coordenadores ao escolher uma solu√ß√£o de arquitetura para um servi√ßo.  Vamos assumir, em termos de integra√ß√£o na infraestrutura existente, para que n√£o haja perda de estabilidade.  Sim, os SREs t√™m o mesmo efeito em solicita√ß√µes, confirma√ß√µes, libera√ß√µes, afetam a arquitetura, a introdu√ß√£o de novos servi√ßos, microsservi√ßos e a introdu√ß√£o de novas solu√ß√µes.  Por que eu disse antes que preciso de experi√™ncia, preciso de qualifica√ß√µes.  De fato, o SRE √© uma das vozes de bloqueio em qualquer solu√ß√£o de arquitetura e software.  Assim, o SRE como engenheiro deve, em primeiro lugar, n√£o apenas entender, mas tamb√©m entender como quaisquer solu√ß√µes espec√≠ficas afetar√£o a confiabilidade, a estabilidade e entender como isso se relaciona √†s necessidades do neg√≥cio e de que ponto de vista pode ser. √© permitido e com o que n√£o. </p><br><p>  Portanto, agora podemos apenas falar sobre crit√©rios de confiabilidade, que no SRE s√£o tradicionalmente definidos como SLA (Service Level Agreement).  Provavelmente um termo familiar.  SLI (Indicador de N√≠vel de Servi√ßo).  SLO (objetivo de n√≠vel de servi√ßo).  O Contrato de N√≠vel de Servi√ßo √© possivelmente um termo de refer√™ncia, especialmente se voc√™ trabalhou com redes, fornecedores e hospedagem.  Este √© um acordo geral que descreve o desempenho de todo o seu servi√ßo, penalidade, algumas penalidades por erros, m√©tricas e crit√©rios.  E SLI √© a pr√≥pria m√©trica de disponibilidade.  Ou seja, o que pode ser SLI: tempo de resposta do servi√ßo, o n√∫mero de erros em termos percentuais.  Isso pode ser largura de banda se se trata de algum tipo de hospedagem de arquivo.  Se estamos falando de algoritmos de reconhecimento, um indicador pode ser, por exemplo, at√© a exatid√£o da resposta.  SLO (Service Level Objective) √© uma combina√ß√£o do indicador SLI, seu valor e per√≠odo, respectivamente. </p><br><p>  Digamos que o SLA possa ser assim.  O servi√ßo est√° dispon√≠vel 99,95% do tempo ao longo do ano.  Ou 99 t√≠quetes de suporte cr√≠tico ser√£o fechados dentro de 3 horas por trimestre.  Ou 85% dos pedidos ser√£o respondidos dentro de 1,5 segundos todos os meses.  Ou seja, gradualmente chegamos a entender que erros e falhas s√£o completamente normais.  Esta √© uma situa√ß√£o aceit√°vel, estamos planejando, estamos contando com isso at√© certo ponto.  Ou seja, o SRE cria sistemas que podem cometer erros, que devem responder normalmente aos erros que devem levar em considera√ß√£o.  E, se poss√≠vel, eles devem lidar com os erros de forma que o usu√°rio n√£o os note ou os observe, mas existe uma solu√ß√£o alternativa para a qual tudo n√£o cair√° completamente. </p><br><p>  Por exemplo, se voc√™ enviar um v√≠deo para o YouTube, e o YouTube n√£o puder convert√™-lo imediatamente, se o v√≠deo for muito grande, se o formato n√£o for ideal, a solicita√ß√£o naturalmente n√£o ficar√° esgotada, o YouTube n√£o apresentar√° um erro 502, o YouTube dir√°: "Criamos tudo, Seu v√≠deo est√° sendo processado.  Estar√° pronto em cerca de 10 minutos. ‚Äù  Esse √© o princ√≠pio da degrada√ß√£o graciosa, que √© familiar, por exemplo, no desenvolvimento do frontend, se voc√™ j√° fez isso. </p><br><p>  Os termos a seguir sobre os quais falaremos s√£o muito importantes para trabalhar com confiabilidade, com erros e expectativas: MTBF e MTTR.  MTBF √© o tempo m√©dio entre falhas.  MTTR Mean Time To Recovery, tempo m√©dio para recupera√ß√£o.  Ou seja, quanto tempo se passou desde o momento em que o erro foi detectado, desde o momento em que o erro apareceu at√© o momento em que o servi√ßo foi totalmente restaurado ao normal.  O MTBF √© corrigido principalmente trabalhando na qualidade do c√≥digo.  Ou seja, na medida em que a SRE pode dizer n√£o.  E voc√™ precisa entender toda a equipe que, quando o SRE diz "n√£o", ele diz isso n√£o porque √© prejudicial, n√£o porque √© ruim, mas porque, caso contr√°rio, todos sofrer√£o. </p><br><p>  Novamente, existem muitos artigos, muitos m√©todos, muitas maneiras, mesmo no livro a que me refiro com tanta frequ√™ncia, como impedir que outros desenvolvedores comecem a odiar o SRE.  O MTTR, por outro lado, est√° trabalhando no seu SLO (objetivo de n√≠vel de servi√ßo).  E isso √© principalmente automa√ß√£o.  Porque, por exemplo, nosso SLO √© um tempo de atividade de 4 noves por trimestre.  Isso significa que em tr√™s meses podemos permitir 13 minutos de inatividade.  E acontece que n√£o podemos ter MTTR por mais de 13 minutos.  Se reagirmos por pelo menos 1 tempo de inatividade por 13 minutos, isso significa que j√° esgotamos todo o or√ßamento do trimestre.  Estamos quebrando o SLO.  13 minutos para uma rea√ß√£o e corrigir uma falha √© muito para o carro, mas muito pouco para uma pessoa.  Porque enquanto um alerta chega a uma pessoa, enquanto ela reage, at√© que ele entenda o erro, isso j√° dura alguns minutos.  At√© que uma pessoa entenda como consertar, o que exatamente consertar, o que fazer, isso levar√° mais alguns minutos.  E, de fato, mesmo que voc√™ precise apenas reiniciar o servidor ou criar um novo n√≥, o MTTR manual j√° dura cerca de 7-8 minutos.  Ao automatizar um processo, o MTTR frequentemente atinge um segundo, √†s vezes um milissegundo.  O Google geralmente fala em milissegundos, mas, na realidade, √© claro, as coisas n√£o s√£o t√£o boas. </p><br><p>  Idealmente, o SRE deve automatizar seu trabalho quase completamente, porque afeta diretamente o MTTR, suas m√©tricas, o SLO de todo o servi√ßo e, portanto, o lucro dos neg√≥cios.  Se o tempo for excedido, pergunte-nos se a culpa √© do SRE.  Para o bem, ningu√©m √© o culpado.  E essa √© uma cultura separada chamada postmortem sem balan√ßa, sobre a qual n√£o falaremos hoje, mas analisaremos sobre Slurme.  Este √© um t√≥pico muito interessante que pode ser discutido muito.  Grosso modo, se o tempo alocado para um quarto for excedido, todos ser√£o culpados por um pouco, o que significa que culpar a todos n√£o √© produtivo, deixe-nos, talvez n√£o culpe ningu√©m, mas corrija a situa√ß√£o e trabalhe com o que temos.  Na minha experi√™ncia, essa abordagem para a maioria das equipes, especialmente na R√∫ssia, √© um pouco estranha, mas faz sentido e funciona muito bem.  Portanto, recomendarei no final do artigo e a literatura que pode ser lida sobre este t√≥pico.  Ou venha para Slurm SRE. </p><br><p>  Eu vou explicar  Se o tempo de SLO por trimestre for excedido, se o tempo de inatividade n√£o for 13 minutos, mas 15, quem pode ser o culpado por isso?  √â claro que o SRE pode ser o culpado, porque ele obviamente fez algum tipo de consolida√ß√£o ou implanta√ß√£o incorreta.  O administrador do centro de dados pode ser o culpado por isso, porque, talvez, alguma manuten√ß√£o n√£o programada tenha sido realizada.  Se o administrador do datacenter √© o respons√°vel, o respons√°vel pela opera√ß√£o n√£o calculou a manuten√ß√£o ao coordenar o SLO.  O gerente, diretor t√©cnico ou algu√©m que assinou o contrato do datacenter e n√£o prestou aten√ß√£o ao fato de que o datacenter do SLA n√£o foi projetado para o tempo de inatividade necess√°rio √© o culpado.  Por conseguinte, pouco a pouco todos s√£o os respons√°veis ‚Äã‚Äãpor esta situa√ß√£o.  E isso significa que n√£o faz sentido culpar algu√©m nesta situa√ß√£o.  Mas √© claro que voc√™ precisa corrigi-lo.  Portanto, existem post-mortem.  E se voc√™ ler, por exemplo, o post-mortem do Github, que √© sempre uma hist√≥ria muito interessante, pequena e inesperada em cada caso espec√≠fico, voc√™ pode substituir que ningu√©m nunca diz que essa pessoa em particular √© culpada.  A culpa √© sempre atribu√≠da a processos imperfeitos espec√≠ficos. </p><br><p>  Vamos para a pr√≥xima pergunta.  Automa√ß√£o  Normalmente, quando falo de automa√ß√£o em outros contextos, muitas vezes me refiro a uma tabela que informa quanto tempo voc√™ pode trabalhar na automa√ß√£o de uma tarefa para n√£o demorar mais tempo para automatiz√°-la do que geralmente salva.  H√° um problema.  O problema √© que, quando o SRE automatiza alguma tarefa, eles economizam n√£o apenas tempo, mas tamb√©m dinheiro, porque a automa√ß√£o afeta diretamente o MTTR.  Eles economizam, por assim dizer, o moral dos funcion√°rios e desenvolvedores, que tamb√©m √© um recurso esgot√°vel.  Eles reduzem a rotina.  E tudo isso afeta positivamente o trabalho e, como conseq√º√™ncia, o neg√≥cio, mesmo que pare√ßa que a automa√ß√£o n√£o fa√ßa sentido em termos de custos de tempo. </p><br><p>  De fato, quase sempre aconteceu, e h√° muito poucos casos em que n√£o vale a pena automatizar algo no papel de SRE.  Al√©m disso, falaremos sobre o que √© chamado de or√ßamento de erros, o or√ßamento para erros.  De fato, acontece que se tudo √© muito melhor para voc√™ do que o SLO que voc√™ definiu para si mesmo, isso tamb√©m n√£o √© muito bom.  Isso √© ruim, porque o SLO funciona n√£o apenas como um limite inferior, mas tamb√©m como um limite superior aproximado.  Quando voc√™ define o SLO com 99% de acessibilidade e, na verdade, possui 99,99%, verifica-se que voc√™ tem algum espa√ßo para experimenta√ß√£o que n√£o prejudicar√° os neg√≥cios, porque voc√™ mesmo determinou isso juntos e voc√™ √© o espa√ßo n√£o use.  Voc√™ tem um or√ßamento para erros que n√£o s√£o gastos no seu caso. </p><br><p>  O que estamos fazendo com ele.  N√≥s o usamos literalmente para tudo.  Para testes em condi√ß√µes de produ√ß√£o, para a implanta√ß√£o de novos recursos que podem afetar o desempenho, libera√ß√µes, manuten√ß√£o e paradas programadas.  A regra oposta tamb√©m se aplica: se o or√ßamento estiver esgotado, n√£o podemos descarregar nada novo, pois, caso contr√°rio, o SLO ser√° excedido.  O or√ßamento j√° est√° esgotado, n√£o lan√ßamos algo, se isso afetar√° negativamente a produtividade, ou seja, se n√£o houver algum tipo de corre√ß√£o que aumente diretamente o SLO, ent√£o vamos al√©m do or√ßamento, e essa √© uma situa√ß√£o ruim, ela precisa ser analisada , post-mortem e possivelmente algum tipo de corre√ß√£o do processo. </p><br><p>  Ou seja, acontece que, se o servi√ßo em si funciona mal e o SLO √© gasto e o or√ßamento n√£o √© gasto em experimentos, n√£o em alguns lan√ßamentos, mas por si s√≥, em vez de corre√ß√µes interessantes para desenvolvedores, em vez de recursos interessantes, em vez de interessantes. lan√ßamentos.  Em vez de qualquer tipo de trabalho criativo, voc√™ precisar√° fazer corre√ß√µes est√∫pidas para retornar o or√ßamento ao pedido ou editar o SLO, e esse tamb√©m √© um processo que n√£o deve ocorrer com muita frequ√™ncia. </p><br><p>  Portanto, acontece que em uma situa√ß√£o em que temos mais or√ßamento para erros, todos est√£o interessados: o SRE e os desenvolvedores.  Para os desenvolvedores, um grande or√ßamento para erros significa que voc√™ pode lidar com vers√µes, testes e experimentos.  Para o SRE, o or√ßamento para erros e a entrada nesse or√ßamento significa que eles realmente fazem seu trabalho diretamente bem.  E isso afeta a motiva√ß√£o para algum tipo de colabora√ß√£o.  Se voc√™ ouvir seus SREs como desenvolvedores, ter√° mais espa√ßo para um bom trabalho e muito menos rotina. </p><br><p>  Acontece que a experimenta√ß√£o na produ√ß√£o √© uma parte bastante importante e quase integral do SRE em grandes equipes.  E √© geralmente chamado de engenharia do caos, que veio da equipe da Netflix que lan√ßou um utilit√°rio chamado Chaos Monkey. <br>  O Chaos Monkey se conecta ao pipeline do CI / CD e descarta o servidor aleatoriamente em produ√ß√£o.  Novamente, na estrutura do SRE, estamos falando sobre o fato de que um servidor com falha n√£o √© ruim por si s√≥, √© esperado.  E se estiver inclu√≠do no or√ßamento, √© aceit√°vel e n√£o prejudica os neg√≥cios. ,      ,  ,      ,        ,              . </p><br><p>    -      ,   , Chaos Gorilla,        .      , -,  ,    ,    ,    .  ,     ,     ,     .          ,       ,          , - ,    ,   ,  ,  , .        .   ,        ,       ,  , , CI/CD    .        ,    ,      , ,  ,  ,  ,  . ,  ,  ,    .  ,    . </p><br><p> :     ?   .   ,   .  ,    SRE          . ,  ,     .  ,     , SRE      ,        ,    ,  ,   ,   ,  ,  .  SRE               ,   -     .          ,   SRE,               - . </p><br><p>     ,  ,           .           ,   SRE    ,  ,  .            ,  ,  .      ,    , ,  ,     ,    , . </p><br><p>  ,           .     SRE           ,     .  ,      ,    SLA, SLI, SLO.     ,     SLA   SLO,    .      -       ,    ,     ,  -   ,    ,  .   4 ,      IT ,      .       ,      - . </p><br><p>          .       ,    - ,   ,   Objectives,        ,     3 . </p><br><p>    ,    ,  .       SLA, SLI, SLO,       ,     ,     Objectives,       SLA.     ,     :  - ,     ,        .      .     ,   -.    ,  ,       ,    ,  , -,     ,   :      - .  -,       ,           .         ,   SRE  ,      ,   . </p><br><p>     3  .  ,  ,  .  ‚Äì   ,      .  , ,  ,    .  ‚Äì  ,    . ,  - ,  -  ,   ,          .  ‚Äì   ,    ,       ,      .          ,  -  - ,     .    - .     ,     ,   . </p><br><p>      ,   ,       ,     ,  ,    .  ,  .    .   .     .      .  ,       . </p><br><p>      ,   Observability.          .    ,     .     ,  Observability    .  -   ,     ,     ,        .    :     ,     .   , ,  , .           ,      - Kubernetes,      ,    .   Observability     MTTR.   Observability ,    ,    ,    ,   MTTR. </p><br><p>      ,    ,   ,     ,         SRE.      .      , ,     ,   SRE    .     ,     - .      ,   ,  -,  SRE    .   ,   , ,  - .       ,      .     SRE     .    .     . </p><br><p> , , ,           .         -   , -       .   SRE,  -, ,     .      ,   ,     ,       . </p><br><p>   .  ,      ,   ,   ,  ,   ,   .          .   ,       .    canary,     ,      ,      ,   - , ,     ,        .  ,  ,     ,      ,   . </p><br><p>     SRE.  ,   - ,    SRE,      .     -  ,  - , , ,     canary A/B .     SRE  ,     .   SRE     .       ,  ,     .   SRE    ,   ,     ,         ,     50   50  ,  ,  SRE    .      .   ,        . </p><br><p>       . -     . ,   SRE      .   ,      ,   .    ,  ,   ,  ,   ,      ,   .           SRE. </p><br><p>  SRE ‚Äî    ,       ,    ,     ,   ,  ,      .    .       .       Booking.com     .        ,   .     - .     . <br> ,  .    SRE. <a href="https://landing.google.com/sre/books/"></a>    ,   2   SRE,  .   <a href="https://cloud.google.com/blog/products/gcp/sre-fundamentals-slis-slas-and-slos">   SLA, SLI, SLO</a> ,        .  3    SRE   .  ‚Äì <a href="https://www.youtube.com/watch%3Fv%3Dn4Wf14e2jxQ">Keys to SRE</a> ,       .  ‚Äî <a href="https://www.youtube.com/watch%3Fv%3DggizCjUCCqE">SRE  </a> .     <a href="https://www.youtube.com/watch%3Fv%3DP83XESU3oZ8">SRE  </a> .    <a href="https://www.youtube.com/watch%3Fv%3DkoGaH4ffXaU">SRE  </a> ,    5  SRE   190 .      ,    DevOps           ,   SRE     ,     . </p><br><p>  2    chaos ingeneering: <a href="https://principlesofchaos.org/">(1)</a> , <a href="https://github.com/Netflix/SimianArmy">(2)</a> .     3    Awesome Lists  <a href="https://github.com/dastergon/awesome-chaos-engineering">chaos ingeneering</a> ,  <a href="https://github.com/dastergon/awesome-sre">SRE</a>   <a href="https://github.com/squadcastHQ/awesome-sre-tools">SRE </a> .   SRE  ,     ,   200 .      capacity planning   blameless postmortem. </p><br><p>  : <a href="https://medium.com/%40bellmar/sre-as-a-lifestyle-choice-de9f5a82d73d">SRE as a life choice</a> </p><br><p> ,      . ,   - . ,      ,    .   .   . <br>    . </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS: para quem gosta de ler, Edward deu uma lista de refer√™ncias. </font><font style="vertical-align: inherit;">Aqueles que preferem entender na pr√°tica s√£o bem-vindos no </font></font><a href="https://slurm.io/sre%3Futm_source%3Dhabr%26utm_medium%3Dwebinarpub%26utm_campaign%3Dsre"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sl√∂rme SRE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt480174/">https://habr.com/ru/post/pt480174/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt480158/index.html">Podemos cozinhar Java, Kotlin RestController?</a></li>
<li><a href="../pt480160/index.html">Como estabelecer rela√ß√µes sociais em uma equipe que trabalha remotamente</a></li>
<li><a href="../pt480162/index.html">O que o Rambler Group atingindo a Nginx realmente significa e para o que a ind√∫stria on-line pode se preparar</a></li>
<li><a href="../pt480166/index.html">Scanner de veias</a></li>
<li><a href="../pt480172/index.html">O primeiro programador russo</a></li>
<li><a href="../pt480176/index.html">[Tradu√ß√£o] Da pirataria ao c√≥digo aberto: minha hist√≥ria</a></li>
<li><a href="../pt480178/index.html"># manorOpenSource</a></li>
<li><a href="../pt480180/index.html">Os resultados da semana: Rambler reivindica direitos √† Nginx, a Microsoft cria um novo PL e, na R√∫ssia, fecha o projeto Taigafon</a></li>
<li><a href="../pt480182/index.html">Guia para freelancers: as perguntas mais comuns sobre o trabalho de SP</a></li>
<li><a href="../pt480184/index.html">Uma sele√ß√£o de fatos estat√≠sticos divertidos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>