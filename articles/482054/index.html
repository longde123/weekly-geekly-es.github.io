<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèõÔ∏è üö£üèº üë®‚ÄçüöÄ 3. Pila el√°stica: an√°lisis de registro de seguridad. Tableros üéÖüèø üßï üíâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En art√≠culos anteriores, nos familiarizamos un poco con la pila de alces y configuramos el archivo de configuraci√≥n Logstash para el analizador de reg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>3. Pila el√°stica: an√°lisis de registro de seguridad. Tableros</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tssolution/blog/482054/"><img src="https://habrastorage.org/webt/1h/r_/da/1hr_dazcr60epg8j9trtakaflhq.png"><br><br>  En art√≠culos anteriores, nos familiarizamos un poco con la pila de alces y configuramos el archivo de configuraci√≥n Logstash para el analizador de registros, en este art√≠culo pasaremos a lo m√°s importante desde el punto de vista de an√°lisis, lo que desea ver desde el sistema y para qu√© se cre√≥ todo: estos son gr√°ficos y tablas combinadas en <b>tableros</b> .  Hoy veremos m√°s de cerca el <b>sistema de</b> visualizaci√≥n de <b>Kibana</b> , consideraremos c√≥mo crear gr√°ficos, tablas y, como resultado, crearemos un tablero simple basado en registros del firewall de Check Point. <br><a name="habracut"></a><br>  El primer paso para trabajar con kibana es crear un <b>patr√≥n de √≠ndice</b> , l√≥gicamente, esta es una base de datos de √≠ndices que est√°n unificados por un cierto principio.  Por supuesto, esto es solo una configuraci√≥n para que Kibana busque m√°s convenientemente informaci√≥n sobre todos los √≠ndices al mismo tiempo.  Se especifica haciendo coincidir la cadena, por ejemplo, "punto de control- *" y el nombre del √≠ndice.  Por ejemplo, ‚Äúcheckpoint-2019.12.05‚Äù se ajustar√° al patr√≥n, pero solo ‚Äúcheckpoint‚Äù ya no est√° all√≠.  Vale la pena mencionar por separado que no puede buscar informaci√≥n sobre diferentes patrones de √≠ndice al mismo tiempo, un poco m√°s adelante en art√≠culos posteriores veremos que las solicitudes de API se realizan ya sea por el nombre del √≠ndice o solo por una l√≠nea del patr√≥n, la imagen es clicable: <br><br> <a href=""><img src="https://habrastorage.org/webt/64/nm/tb/64nmtbsfwl-qfysx5n6km6iwr3m.png"></a> <br><br>  Despu√©s de eso, verificamos en el men√∫ Descubrir que todos los registros est√°n indexados y que el analizador correcto est√° configurado.  Si se encuentran inconsistencias, por ejemplo, al cambiar el tipo de datos de una cadena a un entero, debe editar el archivo de configuraci√≥n de Logstash, como resultado, los nuevos registros se registrar√°n correctamente.  Para que los registros antiguos tomen la forma deseada antes del cambio, solo ayuda el proceso de reindexaci√≥n, en art√≠culos posteriores esta operaci√≥n se considerar√° con m√°s detalle.  Aseg√∫rese de que todo est√© en orden, se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/y1/-h/jk/y1-hjkcxrtdpuufzqxqdpqhlvha.png"></a> <br><br>  Los registros estaban en su lugar, lo que significa que puede comenzar a construir paneles.  Basado en el an√°lisis del tablero de instrumentos de los productos de seguridad, puede comprender el estado de la seguridad de la informaci√≥n en una organizaci√≥n, ver claramente las vulnerabilidades en la pol√≠tica actual y desarrollar formas de eliminarlas.  Construyamos un peque√±o tablero usando varias herramientas de visualizaci√≥n.  El tablero constar√° de 5 componentes: <br><br><ol><li>  tabla para calcular el n√∫mero total de registros por cuchillas </li><li>  Tabla de firma cr√≠tica de IPS </li><li>  Gr√°fico circular de eventos de prevenci√≥n de amenazas </li><li>  gr√°fico de los sitios m√°s visitados </li><li>  diagrama para usar las aplicaciones m√°s peligrosas </li></ol><br>  Para crear formas de visualizaci√≥n, debe ir al men√∫ <b>Visualizar</b> y seleccionar la forma deseada que queremos construir.  Vamos en orden. <br><br><h3>  Tabla para calcular el n√∫mero total de registros por cuchillas </h3><br>  Para hacer esto, seleccione la forma de la <b>Tabla de datos</b> , col√≥quela en el complemento para crear gr√°ficos, coloque la configuraci√≥n de la forma a la izquierda y a la derecha c√≥mo se ver√° en la configuraci√≥n actual.  Primero, demostrar√© c√≥mo se ver√° la tabla terminada, despu√©s de eso revisaremos la configuraci√≥n, se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/h6/qh/zs/h6qhzsfawr4qslqtdfybm3zvzsw.png"></a> <br><br>  Configuraci√≥n de forma m√°s detallada, se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/pe/2j/d2/pe2jd28os3xkfs70wi9jl--0kcc.png"></a> <br><br>  Analicemos la configuraci√≥n. <br><br>  La <b>m√©trica se</b> configura inicialmente, este es el valor por el cual se agregar√°n todos los campos.  Las m√©tricas se calculan en funci√≥n de los valores extra√≠dos de una forma u otra de los documentos.  Los valores generalmente se extraen de los <b>campos</b> del documento, pero tambi√©n se pueden generar mediante scripts.  En este caso, agregue <b>Agregaci√≥n: Recuento</b> (el n√∫mero total de registros). <br><br>  Despu√©s de eso, dividimos la tabla en segmentos (campos) por los cuales se considerar√° la m√©trica.  El ajuste de cubos realiza esta funci√≥n, que a su vez consta de 2 opciones de ajuste: <br><br><ol><li>  dividir filas: agregue columnas y luego divida la tabla en filas </li><li>  tabla dividida: divisi√≥n en varias tablas seg√∫n los valores de un campo espec√≠fico. </li></ol><br>  En <b>cubos,</b> puede agregar varias divisiones para crear varias columnas o tablas, las limitaciones aqu√≠ son m√°s l√≥gicas.  En la agregaci√≥n, puede elegir por qu√© m√©todo se producir√° la segmentaci√≥n: rango de ipv4, rango de fechas, t√©rminos, etc.  La opci√≥n m√°s entretenida son los <b>T√©rminos</b> y <b>T√©rminos</b> <b>Significativos</b> , la divisi√≥n en segmentos se lleva a cabo de acuerdo con los valores de un determinado campo de √≠ndice, la diferencia entre ellos es el n√∫mero de valores devueltos y su visualizaci√≥n.  Como deseamos dividir la tabla por el nombre de los blades, seleccione el campo - <b>product.keyword</b> y establezca el tama√±o en la cantidad de 25 valores devueltos. <br><br>  En lugar de cadenas, elasticsearch utiliza 2 tipos de datos: <b>texto</b> y <b>palabra clave</b> .  Si desea realizar una b√∫squeda de texto completo, debe usar el tipo de texto, algo muy conveniente al escribir su servicio de b√∫squeda, por ejemplo, est√° buscando una menci√≥n de una palabra en un valor de campo espec√≠fico (texto).  Si solo desea una coincidencia exacta, debe usar el tipo de palabra clave.  Adem√°s, el tipo de datos de palabra clave debe usarse para campos que requieren clasificaci√≥n o agregaci√≥n, es decir, en nuestro caso. <br><br>  Como resultado, Elasticsearch calcula el n√∫mero de registros durante un tiempo determinado con agregaci√≥n por valor en el campo del producto.  En la etiqueta personalizada establecemos el nombre de la columna que se mostrar√° en la tabla, establecemos el tiempo para el que recopilamos los registros, comenzamos a dibujar: Kibana env√≠a una solicitud a Elasticsearch, espera una respuesta y luego visualiza los datos recibidos.  ¬°La mesa est√° lista! <br><br><h3>  Gr√°fico circular de eventos de prevenci√≥n de amenazas </h3><br>  De particular inter√©s es la informaci√≥n, y cu√°ntos generalmente en el porcentaje de <b>detectar</b> y <b>prevenir</b> reacciones a incidentes de seguridad de la informaci√≥n en la pol√≠tica de seguridad actual.  Para este caso, un gr√°fico circular es muy adecuado.  Seleccione en Visualizar - <b>Gr√°fico circular</b> .  Tambi√©n en la m√©trica establecemos la agregaci√≥n por el n√∫mero de registros.  En cubos, establezca T√©rminos =&gt; acci√≥n. <br><br>  Parece que todo es correcto, pero como resultado, se muestran los valores para todas las cuchillas, solo necesita filtrar para aquellas cuchillas que funcionan bajo la Prevenci√≥n de amenazas.  Por lo tanto, debemos configurar el <b>filtro</b> para buscar informaci√≥n solo en los blades responsables de los incidentes de seguridad de la informaci√≥n - producto: ("Anti-Bot" O "Nuevo antivirus" O "Protector DDoS" O "SmartDefense" O "Emulaci√≥n de amenazas").  Se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/te/1p/wo/te1pwo7es8c1nnssm5tuhtdfxog.png"></a> <br><br>  Y configuraciones m√°s detalladas, se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/20/yf/xs/20yfxs1tflzd3ja05bulm9s8pco.png"></a> <br><br><h3>  Tabla de eventos de IPS </h3><br>  Adem√°s, desde el punto de vista de la seguridad de la informaci√≥n, es muy importante ver y verificar los eventos en los blades <b>IPS</b> y <b>Threat Emulation</b> , que <b>no</b> est√°n <b>bloqueados por la</b> pol√≠tica actual, para luego cambiar la firma para evitar, o si el tr√°fico es v√°lido, no verifique la firma.  Creamos la tabla como para el primer ejemplo, solo con la diferencia de que creamos varias columnas: protections.keyword, severity.keyword, product.keyword, originsicname.keyword.  Aseg√∫rese de configurar el filtro para buscar informaci√≥n solo en los blades responsables de los incidentes de seguridad de la informaci√≥n - producto: ("SmartDefense" O "Threat Emulation").  Se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/gu/pt/q_/guptq_dmmsig3ueo2xoahhgh_ts.png"></a> <br><br>  Configuraciones m√°s detalladas, se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/7h/va/ma/7hvamanbqtsl3vvkbk_r_wgpu4e.png"></a> <br><br><h3>  Gr√°ficos de los sitios m√°s populares visitados </h3><br>  Para hacer esto, cree una forma: <b>barra vertical</b> .  Tambi√©n usamos el recuento m√©trico (el eje Y), y en el eje X usaremos el nombre de los sitios visitados como appi_name como valores.  Hay un peque√±o truco aqu√≠, si ejecuta la configuraci√≥n en la versi√≥n actual, todos los sitios se marcar√°n en el gr√°fico en un color, para que sean coloridos usamos una configuraci√≥n adicional: "serie dividida", que le permite dividir la columna terminada en algunos valores m√°s, dependiendo desde el campo seleccionado, por supuesto!  Esta divisi√≥n se puede usar como una columna multicolor de acuerdo con los valores en modo apilado o en modo normal para crear varias columnas de acuerdo con un cierto valor del eje X. En este caso, usamos el mismo valor que el eje X, esto permite hacer que todas las columnas sean multicolores, desde la parte superior derecha se indicar√°n con colores.  En el filtro que configuramos - producto: "Filtrado de URL" para ver informaci√≥n solo en los sitios visitados, se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/mm/7z/eu/mm7zeuhxbi7mycsbe9iwhfvj-pi.png"></a> <br><br>  Configuraciones: <br><br> <a href=""><img src="https://habrastorage.org/webt/ab/fq/s8/abfqs80dexym6ks4kt_ktyzzzzk.png"></a> <br><br><h3>  Gr√°fico para usar las aplicaciones m√°s peligrosas </h3><br>  Para hacer esto, cree una forma: barra vertical.  Tambi√©n usamos el recuento m√©trico (el eje Y), y en el eje X usaremos el nombre de las aplicaciones utilizadas, "appi_name", como valores.  Lo m√°s importante es la tarea de filtro - producto: "Control de aplicaciones" Y riesgo_aplicaci√≥n: (4 O 5 O 3) Y acci√≥n: "aceptar".  Filtramos los registros por la hoja de control de la Aplicaci√≥n, tomamos solo aquellos sitios que est√°n clasificados como sitios con riesgo de Cr√≠tico, Alto, Medio y solo si se permite el acceso a estos sitios.  Se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/2q/nz/82/2qnz82z39bhtf-eohfvqcfqae-0.png"></a> <br><br>  Configuraci√≥n, cliqueable: <br><br> <a href=""><img src="https://habrastorage.org/webt/pb/aj/6s/pbaj6sk3l1qbc8cgluy4yiaj1qy.png"></a> <br><br><h3>  Tablero de instrumentos </h3><br>  Ver y crear paneles de control se encuentra en un elemento de men√∫ separado: <b>Panel de</b> control.  Aqu√≠ todo es simple, se crea un nuevo tablero, se le agrega visualizaci√≥n, ¬°todo se pone en su lugar! <br><br>  Creamos un panel de control, seg√∫n el cual ser√° posible comprender la situaci√≥n b√°sica del estado de la seguridad de la informaci√≥n en la organizaci√≥n, por supuesto, solo en el nivel de Check Point, se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/ct/9p/lv/ct9plv4cwbpt6ammjhqmn6x76fe.png"></a> <br><br>  Con base en estos gr√°ficos, podemos entender qu√© firmas cr√≠ticas no est√°n bloqueadas en el firewall, a d√≥nde van los usuarios, cu√°les son las aplicaciones m√°s peligrosas que usan. <br><br><h3>  Conclusi√≥n </h3><br>  Examinamos las posibilidades de visualizaci√≥n b√°sica en Kibana y creamos un tablero, pero esto es solo una peque√±a parte.  M√°s adelante en el curso, consideraremos por separado la configuraci√≥n de los mapas, trabajaremos con el sistema Elasticsearch, nos familiarizaremos con las solicitudes de API, la automatizaci√≥n y ¬°mucho m√°s! <br><br>  As√≠ que estad atentos ( <a href="https://t.me/tssolution">Telegram</a> , <a href="https://www.facebook.com/groups/tssolution.info/">Facebook</a> , <a href="https://vk.com/ts_solution">VK</a> , <a href="https://tssolution.ru/blog">TS Solution Blog</a> ), <a href="https://zen.yandex.ru/id/5c7d2162fa818600ae386a52">Yandex.Zen</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/482054/">https://habr.com/ru/post/482054/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../482040/index.html">Ofrece programas de creaci√≥n de perfiles en C ++</a></li>
<li><a href="../482042/index.html">Trabajando con la biblioteca Newtonsoft.Json con un ejemplo real. Parte 2</a></li>
<li><a href="../482044/index.html">10 mejores pr√°cticas para asegurar las im√°genes de Docker. Parte 2</a></li>
<li><a href="../482050/index.html">T√©cnica de reducci√≥n de red de convoluci√≥n Jedi - poda</a></li>
<li><a href="../482052/index.html">Conjunto de datos de A√±o Nuevo 2019: diccionario tonal abierto del idioma ruso</a></li>
<li><a href="../482058/index.html">¬øDepredador o presa? ¬øQui√©n proteger√° a las autoridades de certificaci√≥n?</a></li>
<li><a href="../482060/index.html">Modelo de mandato de control de acceso (MAC): descripci√≥n general y aplicaciones de aplicaci√≥n</a></li>
<li><a href="../482064/index.html">Facilidad de desarrollar sitios multiling√ºes en CMS Umbraco 8</a></li>
<li><a href="../482066/index.html">Reemplazar historia de usuario con historia de trabajo</a></li>
<li><a href="../482068/index.html">¬øNecesito crear una matriz RAID a partir de SSD y qu√© controladores se necesitan para esto?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>