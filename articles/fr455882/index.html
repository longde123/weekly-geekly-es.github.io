<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò∫ üéñÔ∏è üçí Network Factory pour Cisco ACI Data Center - Aide Administrateur ü§¥üèΩ üïé ü••</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Avec cette pi√®ce magique du script Cisco ACI, vous pouvez rapidement configurer votre r√©seau. 

 L'usine de r√©seau pour le centre de donn√©es Cisco ACI...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Network Factory pour Cisco ACI Data Center - Aide Administrateur</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croc/blog/455882/"><img src="https://habrastorage.org/webt/sy/ml/l2/symll2m6gww_cyira-8xkwg5i3a.jpeg"><br>  <i>Avec cette pi√®ce magique du script Cisco ACI, vous pouvez rapidement configurer votre r√©seau.</i> <br><br>  L'usine de r√©seau pour le centre de donn√©es Cisco ACI existe depuis cinq ans, mais rien n'a √©t√© dit √† ce sujet chez Habr, j'ai donc d√©cid√© de le r√©parer un peu.  Je vais vous dire de ma propre exp√©rience ce que c'est, √† quoi il est bon et o√π il a un r√¢teau. <br><br><h3>  De quoi s'agit-il et d'o√π vient-il? </h3><br>  Au moment de l'annonce de ACI (Application Centric Infrastructure) en 2013, les concurrents attaquaient les approches traditionnelles des r√©seaux de centres de donn√©es sur trois c√¥t√©s √† la fois. <br><br>  D'une part, les solutions SDN de ¬´premi√®re g√©n√©ration¬ª bas√©es sur OpenFlow promettaient de rendre les r√©seaux plus flexibles et moins chers √† la fois.  L'id√©e √©tait de prendre des d√©cisions, traditionnellement effectu√©es par le logiciel propri√©taire des commutateurs, sur le contr√¥leur central. <br><br>  Ce contr√¥leur aurait une vision unique de tout ce qui se passait et, sur cette base, programmerait le mat√©riel de tous les commutateurs au niveau des r√®gles de traitement de flux sp√©cifiques. <a name="habracut"></a><br>  D'autre part, les solutions r√©seau de superposition ont permis de mettre en ≈ìuvre les politiques de connectivit√© et de s√©curit√© n√©cessaires sans aucune modification du r√©seau physique, en cr√©ant des tunnels logiciels entre les h√¥tes virtualis√©s.  L'exemple le plus c√©l√®bre de cette approche a √©t√© la d√©cision de Nicira, qui √† cette √©poque avait d√©j√† √©t√© acquise par VMWare pour 1,26 milliard de dollars et a donn√© naissance √† l'actuel VMWare NSX.  √Ä un certain point de la situation, Nicira a √©t√© cofond√©e par les m√™mes personnes qui se tenaient auparavant aux origines d'OpenFlow, affirmant maintenant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">qu'OpenFlow ne convient pas</a> √† la construction d'une usine de centre de donn√©es. <br><br>  Enfin, les puces de commutation disponibles sur le march√© libre (ce qu'on appelle le silicium marchand) ont atteint un degr√© de maturit√© auquel elles sont devenues une menace r√©elle pour les fabricants de commutateurs traditionnels.  Auparavant, chaque fournisseur d√©veloppait lui-m√™me des puces pour ses commutateurs, mais au fil du temps, les puces de fabricants tiers, principalement de Br¬Æadcom, ont commenc√© √† r√©duire la distance avec les puces du fournisseur en termes de fonctions et en termes de rapport prix / performances qu'elles d√©passaient.  Par cons√©quent, beaucoup pensaient que les jours des commutateurs sur des puces de leur propre conception √©taient compt√©s. <br><br>  ACI √©tait la ¬´r√©ponse asym√©trique¬ª de Cisco (ou plut√¥t, Insieme, qui a √©t√© fond√©e par ses anciens employ√©s), √† tout cela. <br><br><h3>  Quelle est la diff√©rence avec OpenFlow? </h3><br>  En termes de distribution des fonctions, ACI est en fait l'oppos√© d'OpenFlow. <br>  Dans l'architecture OpenFlow, le contr√¥leur est responsable de la prescription des r√®gles d√©taill√©es (flux) <br>  dans le mat√©riel de tous les commutateurs, c'est-√†-dire dans un grand r√©seau, il peut √™tre responsable de la maintenance et, surtout, de la modification de dizaines de millions d'enregistrements sur des centaines de points du r√©seau, donc ses performances et sa fiabilit√© dans une mise en ≈ìuvre √† grande √©chelle deviennent un goulot d'√©tranglement. <br><br>  ACI utilise l'approche inverse: le contr√¥leur existe bien s√ªr √©galement, mais les commutateurs re√ßoivent de lui des politiques d√©claratives de haut niveau, et le commutateur lui-m√™me les rend dans les d√©tails des param√®tres sp√©cifiques du mat√©riel.  Le contr√¥leur peut √™tre red√©marr√© ou √©teint compl√®tement, et rien de mauvais n'arrivera au r√©seau, sauf, bien s√ªr, le manque de contr√¥le en ce moment.  Fait int√©ressant, il existe des situations dans ACI dans lesquelles OpenFlow est toujours utilis√©, mais localement au sein de l'h√¥te pour la programmation d'Open vSwitch. <br><br>  ACI est enti√®rement construit sur le transport de superposition bas√© sur VXLAN, mais inclut en m√™me temps le transport IP sous-jacent dans le cadre d'une solution unique.  Cisco a appel√© cela le terme ¬´superposition int√©gr√©e¬ª.  En tant que point de terminaison pour les superpositions dans ACI, dans la plupart des cas, des commutateurs d'usine sont utilis√©s (ils le font √† la vitesse du canal).  Les h√¥tes ne sont pas tenus de conna√Ætre quoi que ce soit sur l'usine, les encapsulations, etc., cependant, dans certains cas (par exemple, pour connecter des h√¥tes OpenStack), le trafic VXLAN peut √©galement leur √™tre apport√©. <br><br>  Les superpositions sont utilis√©es dans ACI non seulement pour fournir une connectivit√© flexible via le r√©seau de transport, mais aussi pour transmettre des m√©ta-informations (elles sont utilis√©es, par exemple, pour appliquer des politiques de s√©curit√©). <br><br>  Les puces Broadcom √©taient auparavant utilis√©es par Cisco dans la s√©rie de commutateurs Nexus 3000. La famille Nexus 9000, sp√©cialement con√ßue pour prendre en charge ACI, a initialement impl√©ment√© un mod√®le hybride appel√© Merchant +.  Le commutateur utilisait simultan√©ment la nouvelle puce Broadcom Trident 2 et la puce de d√©veloppement Cisco qui la compl√®te, r√©alisant toute la magie d'ACI.  Apparemment, cela a permis d'acc√©l√©rer la sortie du produit et de r√©duire le prix du commutateur √† un niveau proche des mod√®les juste pour Trident 2. Cette approche √©tait suffisante pour les deux √† trois premi√®res ann√©es de fourniture d'ACI.  Pendant ce temps, Cisco a d√©velopp√© et lanc√© la nouvelle g√©n√©ration de Nexus 9000 sur ses propres puces avec plus de performances et de fonctionnalit√©s, mais au m√™me niveau de prix.  Les sp√©cifications externes en termes d'interaction en usine sont enti√®rement pr√©serv√©es.  Dans le m√™me temps, le remplissage interne a compl√®tement chang√©: quelque chose comme le refactoring, mais pour le fer. <br><br><h3>  Fonctionnement de l'architecture Cisco ACI </h3><br>  Dans le cas le plus simple, ACI est construit sur la topologie du r√©seau Clos ou, comme on dit souvent, Spine-Leaf.  Les commutateurs au niveau de la colonne vert√©brale peuvent aller de deux (ou un, si nous ne nous soucions pas de la tol√©rance aux pannes) √† six.  En cons√©quence, plus il y en a, plus la tol√©rance aux pannes (r√©duction de la bande passante et de la fiabilit√© en cas d'accident ou de maintenance d'une colonne vert√©brale) et les performances globales sont √©lev√©es.  Toutes les connexions externes vont aux commutateurs de niveau feuille: ce sont les serveurs, et la connexion aux r√©seaux externes via L2 ou L3, et la connexion des contr√¥leurs APIC.  En g√©n√©ral, avec ACI, non seulement la configuration, mais aussi la collecte de statistiques, la surveillance des pannes, etc. - tout se fait via l'interface des contr√¥leurs, qui sont trois dans les impl√©mentations de taille standard. <br><br>  Vous n'avez jamais besoin de vous connecter aux commutateurs avec la console, m√™me pour d√©marrer le r√©seau: le contr√¥leur lui-m√™me d√©tecte les commutateurs et r√©cup√®re l'usine √† partir d'eux, y compris les param√®tres de tous les protocoles de service.Par cons√©quent, il est tr√®s important d'enregistrer les num√©ros de s√©rie de l'√©quipement install√© lors de l'installation afin que vous n'ayez pas √† deviner quel commutateur quel rack est situ√©.  Pour d√©panner, vous pouvez vous connecter aux commutateurs via SSH si n√©cessaire: ils utilisent les commandes Cisco show habituelles assez soigneusement. <br><br>  √Ä l'int√©rieur, l'usine utilise le transport IP, il n'y a donc pas de Spanning Tree et d'autres horreurs du pass√©: tous les liens sont impliqu√©s et la convergence en cas de panne est tr√®s rapide.  Le trafic d'usine est transmis via des tunnels VXLAN.  Plus pr√©cis√©ment, Cisco lui-m√™me appelle l'encapsulation iVXLAN, et il diff√®re du VXLAN habituel en ce que les champs r√©serv√©s dans l'en-t√™te du r√©seau sont utilis√©s pour transmettre des informations de surcharge, principalement sur la relation du trafic avec le groupe EPG.  Cela vous permet de mettre en ≈ìuvre les r√®gles d'interaction entre les groupes dans l'√©quipement, en utilisant leurs num√©ros de la m√™me mani√®re que les adresses sont utilis√©es dans les listes d'acc√®s ordinaires. <br><br>  Les tunnels vous permettent de vous √©tirer √† travers le transport IP interne et les segments L2 et L3 (c'est-√†-dire VRF).  Dans ce cas, la passerelle par d√©faut est distribu√©e.  Cela signifie que chaque commutateur est impliqu√© dans l'acheminement du trafic entrant dans l'usine.  En termes de logique de transfert de trafic, ACI est similaire √† une usine bas√©e sur VXLAN / EVPN. <br><br><h3>  Si oui, quelles sont les diff√©rences?  Pour le reste! </h3><br>  La principale diff√©rence que vous rencontrez dans ACI est la fa√ßon dont les serveurs sont connect√©s au r√©seau.  Dans les r√©seaux traditionnels, l'inclusion de serveurs physiques et de machines virtuelles va aux VLAN, et tout le reste en danse: connectivit√©, s√©curit√©, etc. L'ACI utilise une conception que Cisco appelle EPG (End-point Group), d'o√π il n'y a nulle part s'√©chapper.  Est-il possible de l'assimiler √† un VLAN?  Oui, mais dans ce cas, il y a une chance de perdre la plupart de ce que donne ACI. <br><br>  Concernant EPG, toutes les r√®gles d'acc√®s sont formul√©es, et l'ACI utilise par d√©faut le principe de la ¬´liste blanche¬ª, c'est-√†-dire que seul le trafic est autoris√©, dont la transmission est explicitement autoris√©e.  Autrement dit, nous pouvons cr√©er des groupes EPG ¬´Web¬ª et ¬´MySQL¬ª et d√©finir une r√®gle qui autorise l'interaction entre eux uniquement sur le port 3306. Cela fonctionnera sans r√©f√©rence aux adresses r√©seau et m√™me au sein du m√™me sous-r√©seau! <br><br>  Nous avons des clients qui ont choisi ACI pr√©cis√©ment en raison de cette fonctionnalit√©, car elle vous permet de restreindre l'acc√®s entre les serveurs (virtuels ou physiques - peu importe) sans les faire glisser entre les sous-r√©seaux, et donc sans toucher √† l'adressage.  Oui, oui, nous savons que personne ne prescrit les adresses IP dans les configurations d'application avec ses mains, non? <br><br>  Les r√®gles de circulation ACI sont appel√©es contrats.  Dans un tel contrat, un ou plusieurs groupes ou niveaux dans une application √† plusieurs niveaux deviennent un fournisseur de services (par exemple, un service de base de donn√©es), d'autres deviennent un consommateur.  Un contrat peut simplement ignorer le trafic, ou il peut faire quelque chose de plus d√©licat, par exemple, le diriger vers un pare-feu ou un √©quilibreur, et √©galement modifier la valeur de QoS. <br><br>  Comment les serveurs entrent-ils dans ces groupes?  S'il s'agit de serveurs physiques ou de quelque chose connect√© au r√©seau existant dans lequel nous avons cr√©√© la jonction VLAN, alors pour les placer dans l'EPG, vous devrez pointer vers le port du commutateur et le VLAN utilis√© dessus.  Comme vous pouvez le voir, les VLAN apparaissent l√† o√π vous ne pouvez pas vous en passer. <br><br>  Si les serveurs sont des machines virtuelles, il suffit de se r√©f√©rer √† l'environnement de virtualisation connect√©, puis tout se passera de lui-m√™me: un groupe de ports (en termes de VMWare) sera cr√©√© pour connecter la VM, les VLAN ou VXLAN n√©cessaires seront attribu√©s, ils seront enregistr√©s sur les ports de commutation n√©cessaires, etc. Donc, bien que ACI soit construit autour d'un r√©seau physique, les connexions pour les serveurs virtuels semblent beaucoup plus simples que pour les serveurs physiques.  ACI dispose d√©j√† d'un ensemble avec VMWare et MS Hyper-V, ainsi que la prise en charge de la virtualisation OpenStack et RedHat.  √Ä un moment donn√©, la prise en charge int√©gr√©e des plates-formes de conteneurs est apparue: Kubernetes, OpenShift, Cloud Foundry, et elle s'applique √† la fois √† l'application et √† la surveillance des strat√©gies, c'est-√†-dire que l'administrateur r√©seau peut imm√©diatement voir quels h√¥tes fonctionnent sur quels h√¥tes et √† quels groupes ils appartiennent. <br><br>  En plus d'√™tre inclus dans un groupe de ports particulier, les serveurs virtuels ont des propri√©t√©s suppl√©mentaires: nom, attributs, etc., qui peuvent √™tre utilis√©es comme crit√®res pour les transf√©rer vers un autre groupe, par exemple, lorsque vous renommez une machine virtuelle ou lorsqu'elle a une balise suppl√©mentaire.  Cisco appelle ces groupes de micro-segmentation, bien que dans l'ensemble, la conception elle-m√™me avec la possibilit√© de cr√©er de nombreux segments de s√©curit√© comme EPG dans le m√™me sous-r√©seau soit √©galement une micro-segmentation.  Eh bien, le vendeur sait mieux. <br><br>  Les EPG eux-m√™mes sont des constructions purement logiques qui ne sont pas li√©es √† des commutateurs, serveurs, etc. sp√©cifiques, de sorte qu'avec eux et les constructions bas√©es sur eux (applications et locataires), vous pouvez faire des choses difficiles √† faire sur des r√©seaux r√©guliers, par exemple √† cloner.  Par cons√©quent, disons qu'il est tr√®s facile de cr√©er un clone d'un environnement productif afin d'obtenir un environnement de test qui est garanti identique au productif.  Cela peut √™tre fait manuellement, mais mieux (et plus facilement) - via l'API. <br><br>  En g√©n√©ral, la logique de contr√¥le dans ACI est compl√®tement diff√©rente de ce que vous rencontrez habituellement <br>  dans les r√©seaux traditionnels du m√™me Cisco: l'interface logicielle est principale et l'interface graphique ou la CLI sont secondaires, car elles fonctionnent via la m√™me API.  Par cons√©quent, presque tous ceux qui traitent avec ACI, apr√®s un certain temps, commencent √† naviguer dans le mod√®le d'objet utilis√© pour le contr√¥le et √† automatiser quelque chose pour leurs besoins.  La fa√ßon la plus simple de le faire est d'utiliser Python: il existe des outils pr√™ts √† l'emploi pratiques. <br><br><h3>  R√¢teau promis </h3><br>  Le probl√®me principal est que beaucoup de choses dans ACI sont faites diff√©remment.  Pour commencer √† travailler avec elle normalement, vous devez r√©apprendre.  Cela est particuli√®rement vrai pour les √©quipes d'exploitation de r√©seau chez les gros clients, o√π les ing√©nieurs sont engag√©s depuis des ann√©es dans la ¬´prescription de VLAN¬ª pour les applications.  Le fait que maintenant les VLAN ne sont plus des VLAN, et pour installer de nouveaux r√©seaux dans des h√¥tes virtualis√©s, vous n'avez pas du tout besoin de cr√©er des VLAN avec vos mains, "√©poustoufle" compl√®tement les networkers traditionnels et vous oblige √† vous accrocher √† des approches famili√®res.  Il convient de noter que Cisco a essay√© d'adoucir l√©g√®rement la pilule et a ajout√© une CLI "NXOS-like" au contr√¥leur, qui vous permet de configurer √† partir d'une interface similaire aux commutateurs traditionnels.  Mais encore, pour commencer √† utiliser ACI normalement, vous devrez comprendre comment cela fonctionne. <br><br>  Du point de vue du prix sur les r√©seaux ACI de grande et moyenne taille, il n'est pratiquement pas diff√©rent des r√©seaux traditionnels sur les √©quipements Cisco, car les m√™mes commutateurs sont utilis√©s pour les construire (le Nexus 9000 peut fonctionner √† la fois en ACI et en mode traditionnel, et maintenant le ¬´cheval de bataille¬ª principal pour les nouveaux projets de centres de donn√©es).  Mais pour les centres de donn√©es √† deux commutateurs, la disponibilit√© des contr√¥leurs et de l'architecture Spine-Leaf, bien s√ªr, se fait sentir.  Une usine Mini ACI est r√©cemment apparue, dans laquelle deux des trois contr√¥leurs sont remplac√©s par des machines virtuelles.  Cela vous permet de r√©duire la diff√©rence de co√ªt, mais cela persiste.  Ainsi, pour le client, le choix est dict√© par son int√©r√™t pour les fonctions de s√©curit√©, l'int√©gration avec la virtualisation, un point de gestion unique et plus encore. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr455882/">https://habr.com/ru/post/fr455882/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr455868/index.html">Surmonter la loi de Moore: les technologies des transistors du futur</a></li>
<li><a href="../fr455872/index.html">Quels paris Bezos a-t-il faits en 1997 pour qu'Amazon d√©tienne d√©sormais 50% du march√© du e-commerce aux √âtats-Unis et 14% dans le monde?</a></li>
<li><a href="../fr455874/index.html">Proc√©dure de notification pour les applications Electron pour macOS 10.14.5</a></li>
<li><a href="../fr455878/index.html">Sc√©narios d'utilisation de l'analyse vid√©o dans le commerce de d√©tail. Sur les traces de l'analytique vid√©o dans le commerce de d√©tail</a></li>
<li><a href="../fr455880/index.html">Une nouvelle s√©rialisation peut appara√Ætre en Java</a></li>
<li><a href="../fr455884/index.html">Extension de code VS - Extraits - Je dirai comment gagner du temps</a></li>
<li><a href="../fr455886/index.html">Donnez un nom √† l'√©toile et √† l'exoplan√®te dans le syst√®me HAT-P-3</a></li>
<li><a href="../fr455888/index.html">Internet pour le r√©sident d'√©t√©. Partie 3. Les Russes arrivent</a></li>
<li><a href="../fr455890/index.html">La v√©rit√© sur les paiements sans contact dans les bracelets de fitness</a></li>
<li><a href="../fr455892/index.html">Comment un programmeur peut-il d√©m√©nager aux Pays-Bas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>