<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>уКЧя╕П ЁЯСЙЁЯП╛ ЁЯШТ рд╕рд┐рд▓реНрд╡рд░ рдмреБрд▓реЗрдЯ рдвреВрдБрдврдирд╛: рдПрдХреНрдЯрд░реНрд╕ + рд░рд┐рдПрдХреНрдЯ рдореЗрдВ рдПрдлрдЖрд░рдкреА ЁЯСйтАНЁЯФм ЁЯУА ЁЯд╜ЁЯП╜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЖрдЬрдХрд▓, рдмрд╣реБрдд рдХрдо рд▓реЛрдЧ рдкрд░реНрд▓ рдореЗрдВ рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд▓реИрд░реА рд╡реЙрд▓ рдХреА рдкреНрд░рд╕рд┐рджреНрдз рдХрд╣рд╛рд╡рдд "рд╕рд░рд▓ рдЪреАрдЬреЛрдВ рдХреЛ рдЖрд╕рд╛рди рдФрд░ рдХрдард┐рди рдЪреАрдЬрд╝реЛрдВ рдХреЛ рд╕рдВрднрд╡ рд░рдЦреЗрдВ" рдкреНрд░рднрд╛рд╡реА рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдХреЗ рд▓рд┐рдП рдЖрдо ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╕рд┐рд▓реНрд╡рд░ рдмреБрд▓реЗрдЯ рдвреВрдБрдврдирд╛: рдПрдХреНрдЯрд░реНрд╕ + рд░рд┐рдПрдХреНрдЯ рдореЗрдВ рдПрдлрдЖрд░рдкреА</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438112/"><p>  рдЖрдЬрдХрд▓, рдмрд╣реБрдд рдХрдо рд▓реЛрдЧ рдкрд░реНрд▓ рдореЗрдВ рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд▓реИрд░реА рд╡реЙрд▓ рдХреА рдкреНрд░рд╕рд┐рджреНрдз рдХрд╣рд╛рд╡рдд "рд╕рд░рд▓ рдЪреАрдЬреЛрдВ рдХреЛ рдЖрд╕рд╛рди рдФрд░ рдХрдард┐рди рдЪреАрдЬрд╝реЛрдВ рдХреЛ рд╕рдВрднрд╡ рд░рдЦреЗрдВ" рдкреНрд░рднрд╛рд╡реА рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдХреЗ рд▓рд┐рдП рдЖрдо рддреМрд░ рдкрд░ рд╕реНрд╡реАрдХрд╛рд░ рдХрд┐рдП рдЧрдП рд╕реВрддреНрд░ рдмрди рдЧрдП рд╣реИрдВред  рдпрд╣ рди рдХреЗрд╡рд▓ рдХрд╛рд░реНрдпреЛрдВ рдХреА рдЬрдЯрд┐рд▓рддрд╛, рдмрд▓реНрдХрд┐ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рдкрд╣рд▓реВ рдореЗрдВ рднреА рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ: рдПрдХ рдЖрджрд░реНрд╢ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА, рдПрдХ рддрд░рдл, рдордзреНрдпрдо рдФрд░ рдЫреЛрдЯреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рддреЗрдЬреА рд╕реЗ рд╡рд┐рдХрд╛рд╕ ("рдХреЗрд╡рд▓-рд▓реЗрдЦрди" рд╕рд╣рд┐рдд) рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ, рджреВрд╕рд░реА рдУрд░, рд╡рд┐рдЪрд╛рд░рд╢реАрд▓ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рдЙрдкрдХрд░рдг рдкреНрд░рджрд╛рди рдХрд░реЗрдВред рдЬрдЯрд┐рд▓ рдЕрдиреБрдкреНрд░рдпреЛрдЧ, рдЬрд╣рд╛рдВ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛, рд╕реНрдерд┐рд░рддрд╛ рдФрд░ рд╕рдВрд░рдЪрд┐рддрддрд╛ рд╕рд░реНрд╡реЛрдкрд░рд┐ рд╣реИред  рдпрд╛ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐, рдорд╛рдирд╡ рд╡рд┐рдорд╛рди рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдирд╛: рдЬреЛрдиреНрд╕ рдХреЗ рд▓рд┐рдП рд╕реБрд▓рдн рд╣реЛрдирд╛, рдФрд░ рд╕рд╛рде рд╣реА рд╕рд╛рде рд╣рд╕реНрддрд╛рдХреНрд╖рд░рдХрд░реНрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдирд╛ред </p><br><p>  рдЕрдм рд▓реЛрдХрдкреНрд░рд┐рдп рд╕рдВрдкрд╛рджрдХреЛрдВ рдХреА рджреЛрдиреЛрдВ рдУрд░ рд╕реЗ рдЖрд▓реЛрдЪрдирд╛ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ - рдХрдо рд╕реЗ рдХрдо рдЗрд╕ рддрдереНрдп рдХреЛ рд▓реЗрдВ рдХрд┐ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд▓рд┐рдЦрдиреЗ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдХрдИ рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдХрдИ рдкрдВрдХреНрддрд┐рдпрд╛рдБ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ - рд▓реЗрдХрд┐рди рд╣рдо рдЧрд╣рд░рд╛рдИ рддрдХ рдирд╣реАрдВ рдЧрдП, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдкрд╣рд▓реЗ рд╣реА рдмрд╣реБрдд рдХреБрдЫ рдХрд╣рд╛ рдЬрд╛ рдЪреБрдХрд╛ рд╣реИред </p><br><blockquote> "рдЖрдк рдПрдХ рдХрдорд░реЗ рдореЗрдВ рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдФрд░ рджреВрд╕рд░реЗ рдореЗрдВ рдХреБрд░реНрд╕рд┐рдпрд╛рдБ рд░рдЦрдиреЗ рд╡рд╛рд▓реЗ рд╣реИрдВ" <br>  - рдЬреВрд╣рд╛ рдкрдирдирди, рд╕рдВрдкрд╛рджрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмреЗрдХрди.рдЬреЗрдПрд╕ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреА рдирд┐рд░реНрдорд╛рддрд╛ </blockquote><p>  рдЖрдЬ рдЬрд┐рд╕ рддрдХрдиреАрдХ рдкрд░ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдПрдЧреА, рд╡рд╣ рдЪрд╛рдВрджреА рдХреА рдЧреЛрд▓реА рдирд╣реАрдВ рд╣реИ, рдмрд▓реНрдХрд┐ рдЗрди рдорд╛рдирджрдВрдбреЛрдВ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реЛрдиреЗ рдХрд╛ рджрд╛рд╡рд╛ рд╣реИред </p><a name="habracut"></a><br><p>  Mrr рдПрдХ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╣реИ рдЬреЛ "рд╕рдм рдХреБрдЫ рдкреНрд░рд╡рд╛рд╣ рд╣реИ" рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЛ рдорд╛рдирддрд╛ рд╣реИред  Mrr рдореЗрдВ рдХрд╛рд░реНрдпрд╛рддреНрдордХ-рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рджреГрд╖реНрдЯрд┐рдХреЛрдг рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП рдореБрдЦреНрдп рд▓рд╛рдн рдХреЛрдб рдХреА рд╕реНрдкрд╖реНрдЯрддрд╛, рд╕рд╛рде рд╣реА рд╕рд╛рде рддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдФрд░ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдбреЗрдЯрд╛ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХреАрдХреГрдд рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╣реИрдВред </p><br><p>  рдкрд╣рд▓реА рдирдЬрд╝рд░ рдореЗрдВ, рдпрд╣ рдПрдХ рдРрд╕реА рддрдХрдиреАрдХ рдХреА рдЖрд╡рд╛рдЬрд╝ рдирд╣реАрдВ рд╣реИ рдЬреЛ рд╢реБрд░реБрдЖрддреА рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЖрд╕рд╛рдиреА рд╕реЗ рд╕реБрд▓рдн рд╣реЛрдЧреА: рдПрдХ рдзрд╛рд░рд╛ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЛ рд╕рдордЭрдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣ рдлреНрд░рдВрдЯ-рдПрдВрдб рдкрд░ рдЗрддрдирд╛ рд╡реНрдпрд╛рдкрдХ рдирд╣реАрдВ рд╣реИ, рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдЗрд╕ рддрд░рд╣ рдХреЗ рдЧреВрдВрдЧреЗ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЗ рд╕рд╛рде рдЖрд░рдПрдХреНрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИред  рдФрд░ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд, рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдореВрд▓ "рдПрдХреНрд╢рди-рд░рд┐рдПрдХреНрд╢рди-рдЕрдкрдбреЗрдЯ рдбреЛрдо" рдпреЛрдЬрдирд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдХреИрд╕реЗ рд╕рдордЭрд╛рдпрд╛ рдЬрд╛рдПред  рд▓реЗрдХрд┐рди ... рд╣рдо рдкреНрд░рд╡рд╛рд╣ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рд╛рд░рдЧрд░реНрднрд┐рдд рдмрд╛рдд рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ!  рдЖрдЗрдП рдЕрдзрд┐рдХ рд╕рдордЭрдиреЗ рдпреЛрдЧреНрдп рдЪреАрдЬреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реЗрдВ: рдШрдЯрдирд╛рдПрдВ, рд╕реНрдерд┐рддрд┐ред </p><br><h3 id="gotovim-po-receptu">  рдиреБрд╕реНрдЦрд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЦрд╛рдирд╛ рдмрдирд╛рдирд╛ </h3><br><p>  рдПрдлрдЖрд░рдкреА рдХреЗ рд╡рд┐рдХрд▓реЛрдВ рдореЗрдВ рдЙрддрд░реЗ рдмрд┐рдирд╛, рд╣рдо рд╡рд┐рд╖рдп рдХреНрд╖реЗрддреНрд░ рдХреЛ рдФрдкрдЪрд╛рд░рд┐рдХ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░рд▓ рдпреЛрдЬрдирд╛ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВрдЧреЗ: </p><br><ul><li>  рдбреЗрдЯрд╛ рдХреА рдПрдХ рд╕реВрдЪреА рдмрдирд╛рдПрдВ рдЬреЛ рдкреГрд╖реНрда рдХреА рд╕реНрдерд┐рддрд┐ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ, рд╕рд╛рде рд╣реА рд╕рд╛рде рдЙрдирдХреЗ рдкреНрд░рдХрд╛рд░ рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред </li><li>  рдкреГрд╖реНрда рдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдШрдЯрд┐рдд рдпрд╛ рдЙрддреНрдкрдиреНрди рд╣реЛрдиреЗ рд╡рд╛рд▓реА рдШрдЯрдирд╛рдУрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдмрдирд╛рдПрдВ, рдФрд░ рдЙрдирдХреЗ рд╕рд╛рде рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдбреЗрдЯрд╛ рдХреЗ рдкреНрд░рдХрд╛рд░ </li><li>  рдкреГрд╖реНрда рдкрд░ рд╣реЛрдиреЗ рд╡рд╛рд▓реА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдмрдирд╛рдПрдБ </li><li>  рдЙрдирдХреЗ рдмреАрдЪ рдЕрдиреНрдпреЛрдиреНрдпрд╛рд╢реНрд░рд┐рддрддрд╛рдУрдВ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░реЗрдВред </li><li>  рдЙрдкрдпреБрдХреНрдд рдСрдкрд░реЗрдЯрд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреНрдпреЛрдиреНрдпрд╛рд╢реНрд░рд┐рддрддрд╛рдУрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВред </li></ul><br><p>  рдЗрд╕рдХреЗ рд╕рд╛рде рд╣реА рд╣рдореЗрдВ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдЬреНрдЮрд╛рди рдХреА рднреА рдмрд╣реБрдд рдЕрдВрддрд┐рдо рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рддреЛ, рдЪрд▓реЛ рдПрдХ рд╡реЗрдм рд╕реНрдЯреЛрд░ рдХрд╛ рдПрдХ рд╕рд░рд▓реАрдХреГрдд рдЙрджрд╛рд╣рд░рдг рд▓реЗрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рд╢реНрд░реЗрдгреА рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдкреГрд╖реНрдард╛рдВрдХрди рдФрд░ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХреЗ рд╕рд╛рде рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реИ, рд╕рд╛рде рд╣реА рдПрдХ рдЯреЛрдХрд░реА рднреА рд╣реИред </p><br><ol><li><p>  рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд┐рд╕ рдЖрдзрд╛рд░ рдкрд░ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: </p><br><ul><li>  рдорд╛рд▓ рдХреА рд╕реВрдЪреА (рд╕рд░рдгреА) </li><li>  рдЪрдпрдирд┐рдд рд╢реНрд░реЗрдгреА (рд▓рд╛рдЗрди) </li><li>  рдорд╛рд▓ рдХреЗ рд╕рд╛рде рдкреГрд╖реНрдареЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ (рд╕рдВрдЦреНрдпрд╛) </li><li>  рдЙрди рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рд╕реВрдЪреА рдЬреЛ рдЯреЛрдХрд░реА (рд╕рд░рдгреА) рдореЗрдВ рд╣реИрдВ </li><li>  рд╡рд░реНрддрдорд╛рди рдкреГрд╖реНрда (рд╕рдВрдЦреНрдпрд╛) </li><li>  рдЯреЛрдХрд░реА рдореЗрдВ рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ (рд╕рдВрдЦреНрдпрд╛) </li></ul><br></li><li><p>  рдШрдЯрдирд╛рдПрдБ ("рдШрдЯрдирд╛рдУрдВ" рд╕реЗ рдЙрдирдХрд╛ рдорддрд▓рдм рдХреЗрд╡рд▓ рдХреНрд╖рдгрд┐рдХ рдШрдЯрдирд╛рдПрдБ рд╣реИрдВред рдХреБрдЫ рд╕рдордп рдХреЗ рд▓рд┐рдП рд╣реЛрдиреЗ рд╡рд╛рд▓реА рдХреНрд░рд┐рдпрд╛рдПрдБ - рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ - рдЕрд▓рдЧ-рдЕрд▓рдЧ рдШрдЯрдирд╛рдУрдВ рдореЗрдВ рд╡рд┐рдШрдЯрд┐рдд рд╣реЛрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИрдВ): </p><br><ul><li>  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдкреГрд╖реНрда (рд╢реВрдиреНрдп) </li><li>  рд╢реНрд░реЗрдгреА рдЪрдпрди (рд╕реНрдЯреНрд░рд┐рдВрдЧ) </li><li>  рдЯреЛрдХрд░реА рдореЗрдВ рд╕рд╛рдорд╛рди рдЬреЛрдбрд╝рдирд╛ (рд╡рд╕реНрддреБ "рдорд╛рд▓") </li><li>  рдЯреЛрдХрд░реА рд╕реЗ рдорд╛рд▓ рдирд┐рдХрд╛рд▓рдирд╛ (рд╣рдЯрд╛рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕рд╛рдорд╛рди рдХреА рдЖрдИрдбреА) </li><li>  рдЙрддреНрдкрд╛рдж рд╕реВрдЪреА рдХреЗ рдЕрдЧрд▓реЗ рдкреГрд╖реНрда рдкрд░ рдЬрд╛рдПрдВ (рд╕рдВрдЦреНрдпрд╛ - рдкреГрд╖реНрда рд╕рдВрдЦреНрдпрд╛) </li></ul><br></li><li><p>  рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ: рдпреЗ рдРрд╕реА рдХреНрд░рд┐рдпрд╛рдПрдБ рд╣реИрдВ рдЬреЛ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИрдВ рдФрд░ рдлрд┐рд░ рдПрдХ рдмрд╛рд░ рдпрд╛ рдХреБрдЫ рд╕рдордп рдмрд╛рдж рд╡рд┐рднрд┐рдиреНрди рдШрдЯрдирд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛ рд╕рдХрддреА рд╣реИрдВред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рд╕рд░реНрд╡рд░ рд╕реЗ рдЙрддреНрдкрд╛рдж рдбреЗрдЯрд╛ рдХреЛ рд▓реЛрдб рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЬреЛ рджреЛ рдШрдЯрдирд╛рдУрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИ: рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рд╕рдлрд▓ рд╕рдорд╛рдкрди рдФрд░ рдкреВрд░реНрдгрддрд╛ред </p><br></li><li><p>  рдШрдЯрдирд╛рдУрдВ рдФрд░ рдбреЗрдЯрд╛ рдХреЗ рдмреАрдЪ рдирд┐рд░реНрднрд░рддрд╛ред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рд╕реВрдЪреА рдШрдЯрдирд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░реЗрдЧреА: "рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рд╕реВрдЪреА рдХрд╛ рд╕рдлрд▓ рд▓реЛрдбрд┐рдВрдЧред"  рдФрд░ "рдорд╛рд▓ рдХреА рд╕реВрдЪреА рд▓реЛрдб рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВ" - "рдПрдХ рдкреГрд╖реНрда рдЦреЛрд▓рдиреЗ" рд╕реЗ, "рд╡рд░реНрддрдорд╛рди рдкреГрд╖реНрда рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рд╕реЗ", "рдПрдХ рд╢реНрд░реЗрдгреА рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рд╕реЗ"ред  рдкреНрд░рдкрддреНрд░ [рддрддреНрд╡] рдХреА рд╕реВрдЪреА рдмрдирд╛рдПрдВ: [... рдирд┐рд░реНрднрд░рддрд╛]: </p><br><pre><code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">requestGoods</span></span>: [<span class="hljs-string"><span class="hljs-string">'page'</span></span>, <span class="hljs-string"><span class="hljs-string">'category'</span></span>, <span class="hljs-string"><span class="hljs-string">'pageLoaded'</span></span>], <span class="hljs-attr"><span class="hljs-attr">goods</span></span>: [<span class="hljs-string"><span class="hljs-string">'requestGoods.success'</span></span>], <span class="hljs-attr"><span class="hljs-attr">page</span></span>: [<span class="hljs-string"><span class="hljs-string">'goToPage'</span></span>, <span class="hljs-string"><span class="hljs-string">'totalPages'</span></span>], <span class="hljs-attr"><span class="hljs-attr">totalPages</span></span>: [<span class="hljs-string"><span class="hljs-string">'requestGoods.success'</span></span>], <span class="hljs-attr"><span class="hljs-attr">cart</span></span>: [<span class="hljs-string"><span class="hljs-string">'addToCart'</span></span>, <span class="hljs-string"><span class="hljs-string">'removeFromCart'</span></span>], <span class="hljs-attr"><span class="hljs-attr">goodsInCart</span></span>: [<span class="hljs-string"><span class="hljs-string">'cart'</span></span>], <span class="hljs-attr"><span class="hljs-attr">category</span></span>: [<span class="hljs-string"><span class="hljs-string">'selectCategory'</span></span>] }</code> </pre> <br></li></ol><br><p>  рдУрд╣ ... рд▓реЗрдХрд┐рди рдпрд╣ рд▓рдЧрднрдЧ рд╢реНрд░реА рдХреЗ рд▓рд┐рдП рдХреЛрдб рд╣реИ! </p><br><p><img src="https://habrastorage.org/webt/_x/jg/s7/_xjgs7dbqnztuaffvtgm96auncm.png"></p><br><p>  рдпрд╣ рдХреЗрд╡рд▓ рдЙрди рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдиреА рд╣реБрдИ рд╣реИ рдЬреЛ рд░рд┐рд╢реНрддреЗ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВрдЧреЗред  рдЖрдкрдХреЗ рдкрд╛рд╕ mrr рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдИрд╡реЗрдВрдЯ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкреЗрдХреНрд╖рд┐рдд рдИрд╡реЗрдВрдЯ, рдбреЗрдЯрд╛, рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ - рд▓реЗрдХрд┐рди рдирд╣реАрдВ, рдпрд╣ рд╕рдм рдзрд╛рдЧреЗ рд╣реИрдВ!  рд╣рдорд╛рд░рд╛ рдХрд╛рдо рдЙрдиреНрд╣реЗрдВ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЬреЛрдбрд╝рдирд╛ рд╣реИред </p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рджреЛ рдкреНрд░рдХрд╛рд░ рдХреА рдирд┐рд░реНрднрд░рддрд╛рдПрдВ рд╣реИрдВ: "рдЗрд╡реЗрдВрдЯ" рд╕реЗ "рдбреЗрдЯрд╛" (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, goToPage рд╕реЗ рдкреЗрдЬ) рдФрд░ "рдбреЗрдЯрд╛" рд╕реЗ "рдбреЗрдЯрд╛" (рдХрд╛рд░реНрдЯ рд╕реЗ рд╕рд╛рдорд╛рди)ред  рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╣реИрдВред </p><br><p>  рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ "рдбреЗрдЯрд╛ рд╕реЗ рдбреЗрдЯрд╛" рд╣реИ: рдпрд╣рд╛рдВ рд╣рдо рдХреЗрд╡рд▓ рдПрдХ рд╢реБрджреНрдз рдлрд╝рдВрдХреНрд╢рди, "рд╕реВрддреНрд░" рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ: </p><br><pre> <code class="javascript hljs">goodsInCart: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arr</span></span></span><span class="hljs-function"> =&gt;</span></span> arr.length, <span class="hljs-string"><span class="hljs-string">'cart'</span></span>],</code> </pre> <br><p>  рд╣рд░ рдмрд╛рд░ рдЬрдм рдЧрд╛рдбрд╝реА рдХреА рд╕рд░рдгреА рдмрджрд▓реА рдЬрд╛рддреА рд╣реИ, рддреЛ рдорд╛рд▓ рдХрд╛ рдореВрд▓реНрдп рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдпрджрд┐ рд╣рдорд╛рд░рд╛ рдбреЗрдЯрд╛ рдПрдХ рдШрдЯрдирд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ, рддреЛ рд╕рдм рдХреБрдЫ рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ: </p><br><pre> <code class="javascript hljs">category: <span class="hljs-string"><span class="hljs-string">'selectCategory'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*     category: [a =&gt; a, 'selectCategory'], */</span></span> goods: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resp</span></span></span><span class="hljs-function"> =&gt;</span></span> resp.data, <span class="hljs-string"><span class="hljs-string">'requestGoods.success'</span></span>], <span class="hljs-attr"><span class="hljs-attr">totalPages</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resp</span></span></span><span class="hljs-function"> =&gt;</span></span> resp.totalPages, <span class="hljs-string"><span class="hljs-string">'requestGoods.success'</span></span>],</code> </pre> <br><p>  рдкреНрд░рдкрддреНрд░ рдХрд╛ рдбрд┐рдЬрд╛рдЗрди [рдХрд╛рд░реНрдп, ... рдзрд╛рдЧрд╛-рддрд░реНрдХ] mrr рдХрд╛ рдЖрдзрд╛рд░ рд╣реИред  рд╕рд╣рдЬ рдЬреНрдЮрд╛рди рдпреБрдХреНрдд рд╕рдордЭ рдХреЗ рд▓рд┐рдП, рдПрдХреНрд╕реЗрд▓ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд╛рджреГрд╢реНрдп рдЖрд░реЗрдЦрдг, mrr рдореЗрдВ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рднреА рд╕реЗрд▓ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЬрд┐рди рдХрд╛рд░реНрдпреЛрдВ рд╕реЗ рдЙрдирдХреА рдЧрдгрдирд╛ рдХреА рдЬрд╛рддреА рд╣реИ, рдЙрдиреНрд╣реЗрдВ рд╕реВрддреНрд░ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рд╣рдорд╛рд░рд╛ рдбреЗрдЯрд╛ рдХрдИ рдШрдЯрдирд╛рдУрдВ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдЙрдирдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛, рдФрд░ рдлрд┐рд░ рдорд░реНрдЬ рдСрдкрд░реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдиреНрд╣реЗрдВ рдПрдХ рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* ,  merge -  ,   */</span></span> page: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> =&gt;</span></span> a, <span class="hljs-string"><span class="hljs-string">'goToPage'</span></span>], [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> a &lt; prev ? a : prev, <span class="hljs-string"><span class="hljs-string">'totalPages'</span></span>, <span class="hljs-string"><span class="hljs-string">'-page'</span></span>] ], <span class="hljs-attr"><span class="hljs-attr">cart</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item, arr</span></span></span><span class="hljs-function">) =&gt;</span></span> [...arr, item], <span class="hljs-string"><span class="hljs-string">'addToCart'</span></span>, <span class="hljs-string"><span class="hljs-string">'-cart'</span></span>], [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, arr</span></span></span><span class="hljs-function">) =&gt;</span></span> arr.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function"> =&gt;</span></span> item.id !== id), <span class="hljs-string"><span class="hljs-string">'removeFromCart'</span></span>, <span class="hljs-string"><span class="hljs-string">'-cart'</span></span>], ],</code> </pre> <br><p>  рджреЛрдиреЛрдВ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рд╣рдо рд╕реЗрд▓ рдХреЗ рдкрд┐рдЫрд▓реЗ рдореВрд▓реНрдп рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдПрдХ рдЕрдирдВрдд рд▓реВрдк рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдХрд╛рд░реНрдЯ рдФрд░ рдкреГрд╖реНрда рдХреЛрд╢рд┐рдХрд╛рдУрдВ рдХреЛ <em>рдирд┐рд╖реНрдХреНрд░рд┐рдп</em> рд░реВрдк рд╕реЗ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддреЗ рд╣реИрдВ (рд╕реЗрд▓ рдирд╛рдо рдХреЗ рд╕рд╛рдордиреЗ рдорд╛рдЗрдирд╕ рд╕рд╛рдЗрди): рдЙрдирдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рд╕реВрддреНрд░ рдореЗрдВ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдпрджрд┐ рд╡реЗ рдмрджрд▓рддреЗ рд╣реИрдВ, рддреЛ рдкреБрдирд░реНрдЧрдгрдирд╛ рд╢реБрд░реВ рдирд╣реАрдВ рд╣реЛрдЧреАред </p><br><p>  рд╕рднреА рдереНрд░реЗрдбреНрд╕ рдпрд╛ рддреЛ рдЕрдиреНрдп рдереНрд░реЗрдбреНрд╕ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ рдпрд╛ DOM рд╕реЗ рдЙрддреНрд╕рд░реНрдЬрд┐рдд рд╣реЛрддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди "рд╢реБрд░реБрдЖрддреА рдкреГрд╖реНрда" рд╕реНрдЯреНрд░реАрдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛?  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдЖрдкрдХреЛ рдХрдВрдкреЛрдиреЗрдВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛: рдПрдордЖрд░рдЖрд░ рдореЗрдВ рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╕реНрдЯреНрд░реАрдо $ рд╕реНрдЯрд╛рд░реНрдЯ рд╣реИ, рдЬреЛ рд╕рдВрдХреЗрдд рджреЗрддрд╛ рд╣реИ рдХрд┐ рдХрдВрдкреЛрдиреЗрдВрдЯ рдмрдирд╛рдпрд╛ рдФрд░ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p>  "рдкреНрд░рдХреНрд░рд┐рдпрд╛" рдХреА рдЧрдгрдирд╛ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд░реВрдк рд╕реЗ рдХреА рдЬрд╛рддреА рд╣реИ, рдЬрдмрдХрд┐ рд╣рдо рдЙрдирд╕реЗ рдХреБрдЫ рдШрдЯрдирд╛рдУрдВ рдХрд╛ рдЙрддреНрд╕рд░реНрдЬрди рдХрд░рддреЗ рд╣реИрдВ, "рдиреЗрд╕реНрдЯреЗрдб" рдСрдкрд░реЗрдЯрд░ рд╣рдореЗрдВ рдпрд╣рд╛рдВ рдорджрдж рдХрд░реЗрдЧрд╛: </p><br><pre> <code class="javascript hljs">requestGoods: [<span class="hljs-string"><span class="hljs-string">'nested'</span></span>, (cb, page, category) =&gt; { fetch(<span class="hljs-string"><span class="hljs-string">"..."</span></span>) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'success'</span></span>, res)) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, e)); }, <span class="hljs-string"><span class="hljs-string">'page'</span></span>, <span class="hljs-string"><span class="hljs-string">'category'</span></span>, <span class="hljs-string"><span class="hljs-string">'$start'</span></span>],</code> </pre> <br><p>  рдиреЗрд╕реНрдЯреЗрдб рдСрдкрд░реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдХреБрдЫ рдШрдЯрдирд╛рдУрдВ рдХреЗ рдЙрддреНрд╕рд░реНрдЬрди рдХреЗ рд▓рд┐рдП рдкрд╣рд▓рд╛ рддрд░реНрдХ рд╣рдореЗрдВ рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдмрд╛рд╣рд░ рд╕реЗ рд╡реЗ рд░реВрдЯ рд╕реЗрд▓ рдХреЗ рдирд╛рдо рд╕реНрдерд╛рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реБрд▓рдн рд╣реЛрдВрдЧреЗ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, </p><br><pre> <code class="javascript hljs">cb(<span class="hljs-string"><span class="hljs-string">'success'</span></span>, res)</code> </pre> <br><p>  RequestGoods рд╕реВрддреНрд░ рдХреЗ рдЕрдВрджрд░, requestGoods.success рд╕реЗрд▓ рдХрд╛ рдЕрджреНрдпрддрди рдкрд░рд┐рдгрд╛рдо рджреЗрдЧрд╛ред </p><br><p>  рд╣рдорд╛рд░реЗ рдбреЗрдЯрд╛ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдкреГрд╖реНрда рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдЙрдирдХреЗ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдорд╛рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">goods</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">page</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">cart</span></span>: [], },</code> </pre> <br><p>  рдорд╛рд░реНрдХрдЕрдк рдЬреЛрдбрд╝реЗрдВред  рд╣рдо withMrr рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд░рд┐рдПрдХреНрдЯ рдШрдЯрдХ рдмрдирд╛рддреЗ рд╣реИрдВ, рдЬреЛ рдПрдХ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рд▓рд┐рдВрдХ рдЖрд░реЗрдЦ рдФрд░ рд░реЗрдВрдбрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИред  рдПрдХ рдорд╛рди рдХреЛ рдПрдХ рд╕реНрдЯреНрд░реАрдо рдореЗрдВ "рдбрд╛рд▓рдиреЗ" рдХреЗ рд▓рд┐рдП, рд╣рдо $ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рдЗрд╡реЗрдВрдЯ рд╣реИрдВрдбрд▓рд░ рдмрдирд╛рддрд╛ рд╣реИ (рдФрд░ рдХреИрд╢ рдХрд░рддрд╛ рд╣реИ)ред  рдЕрдм рд╣рдорд╛рд░рд╛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдЖрд╡реЗрджрди рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { withMrr } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mrr'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> App = withMrr({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">goods</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">cart</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">page</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">requestGoods</span></span>: [<span class="hljs-string"><span class="hljs-string">'nested'</span></span>, (cb, page = <span class="hljs-number"><span class="hljs-number">1</span></span>, category = <span class="hljs-string"><span class="hljs-string">'all'</span></span>) =&gt; { fetch(<span class="hljs-string"><span class="hljs-string">'https://reqres.in/api/products?page='</span></span>, page, category).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function"> =&gt;</span></span> r.json()) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'success'</span></span>, res)) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, e)) }, <span class="hljs-string"><span class="hljs-string">'page'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectCategory'</span></span>, <span class="hljs-string"><span class="hljs-string">'$start'</span></span>], <span class="hljs-attr"><span class="hljs-attr">goods</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.data, <span class="hljs-string"><span class="hljs-string">'requestGoods.success'</span></span>], <span class="hljs-attr"><span class="hljs-attr">page</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'goToPage'</span></span>, [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> a &lt; prev ? a : prev, <span class="hljs-string"><span class="hljs-string">'totalPages'</span></span>, <span class="hljs-string"><span class="hljs-string">'-page'</span></span>]], <span class="hljs-attr"><span class="hljs-attr">totalPages</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.total_pages, <span class="hljs-string"><span class="hljs-string">'requestGoods.success'</span></span>], <span class="hljs-attr"><span class="hljs-attr">category</span></span>: <span class="hljs-string"><span class="hljs-string">'selectCategory'</span></span>, <span class="hljs-attr"><span class="hljs-attr">cart</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item, arr</span></span></span><span class="hljs-function">) =&gt;</span></span> [...arr, item], <span class="hljs-string"><span class="hljs-string">'addToCart'</span></span>, <span class="hljs-string"><span class="hljs-string">'-cart'</span></span>], [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, arr</span></span></span><span class="hljs-function">) =&gt;</span></span> arr.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function"> =&gt;</span></span> item.id !== id), <span class="hljs-string"><span class="hljs-string">'removeFromCart'</span></span>, <span class="hljs-string"><span class="hljs-string">'-cart'</span></span>], ], }, (state, props, $) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;section&gt; &lt;h2&gt;Shop&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/h2&gt; &lt;div&gt; Category: &lt;select onChange={$('selectCategory')}&gt; &lt;option&gt;All&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">option&gt; &lt;option&gt;Electronics&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/option&gt; &lt;option&gt;Photo&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">option&gt; &lt;option&gt;Cars&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/option&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">select&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; &lt;ul className="goods"&gt; { state.goods.map((item, i) =&gt; { const cartI = state.cart.findIndex(a =&gt; a.id === item.id); return (&lt;li key={i}&gt; { item.name } &lt;div&gt; { cartI === -1 &amp;&amp; &lt;button onClick={$("addToCart", item)}&gt;Add to cart&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt; } { cartI !== </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">-1</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;&amp; &lt;button onClick={$(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"removeFromCart"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, item.id</span></span></span><span class="hljs-function">)}&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Remove</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">from</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cart</span></span></span><span class="hljs-function">&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">button</span></span></span><span class="hljs-function">&gt; } &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">li</span></span></span><span class="hljs-function">&gt;); }) } &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ul</span></span></span><span class="hljs-function">&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ul</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pages</span></span></span><span class="hljs-function">"&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">new</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Array</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state.totalPages</span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_, p</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> page = <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>(p) + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;li className=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"page"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> onClick={$(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'goToPage'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, page</span></span></span><span class="hljs-function">)} </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">={</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">p</span></span></span><span class="hljs-function">}&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">page</span></span></span><span class="hljs-function"> } &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">li</span></span></span><span class="hljs-function">&gt; ); }) } &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ul</span></span></span><span class="hljs-function">&gt; &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">section</span></span></span><span class="hljs-function">&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">section</span></span></span><span class="hljs-function">&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h2</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Cart</span></span></span><span class="hljs-function">&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h2</span></span></span><span class="hljs-function">&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ul</span></span></span><span class="hljs-function">&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cart</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(item, i</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{i}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { item.name } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{$(</span></span></span></span><span class="xml"><span class="hljs-tag">"</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">removeFromCart</span></span></span></span><span class="xml"><span class="hljs-tag">", </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">item.id</span></span></span></span><span class="xml"><span class="hljs-tag">)}&gt;</span></span></span><span class="xml">Remove from cart</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>); }) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/ul&gt; &lt;/</span></span>section&gt;); }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App;</code> </pre><br><p>  рдбрд┐рдЬрд╝рд╛рдЗрди </p><br><pre> <code class="javascript hljs">&lt;select onChange={$(<span class="hljs-string"><span class="hljs-string">'selectCategory'</span></span>)}&gt;</code> </pre> <br><p>  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдЬрдм рдХреНрд╖реЗрддреНрд░ рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдорд╛рди рдХреЛ "рдЪрдпрдирд┐рдд" рд╢реНрд░реЗрдгреА рдореЗрдВ рдзрдХреЗрд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рдЕрд░реНрде рд╣реИ?  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдпрд╣ event.target.value рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╣рдореЗрдВ рдХреБрдЫ рдФрд░ рдкреБрд╢ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рд╣рдо рдЗрд╕реЗ рджреВрд╕рд░реЗ рддрд░реНрдХ рдХреЗ рд╕рд╛рде рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐: </p><br><pre> <code class="javascript hljs">&lt;button onClick={$(<span class="hljs-string"><span class="hljs-string">"addToCart"</span></span>, item)}&gt;</code> </pre> <br><p>  рдпрд╣рд╛рдБ рд╕рдм рдХреБрдЫ - рдШрдЯрдирд╛рдПрдБ, рдбреЗрдЯрд╛ рдФрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ - рдпреЗ рдкреНрд░рд╡рд╛рд╣ рд╣реИрдВред  рдХрд┐рд╕реА рдШрдЯрдирд╛ рдХреЗ рдЯреНрд░рд┐рдЧрд░ рд╣реЛрдиреЗ рдкрд░ рдЙрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдбреЗрдЯрд╛ рдпрд╛ рдШрдЯрдирд╛рдУрдВ рдХрд╛ рдкреБрдирд░рд╛рд╡рд░реНрддрди рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдЗрд╕реА рддрд░рд╣ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдкрд░ рднреАред  рдЖрд╢реНрд░рд┐рдд рдзрд╛рд░рд╛ рдХреЗ рдореВрд▓реНрдп рдХреА рдЧрдгрдирд╛ рдПрдХ рд╕реВрддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреА рдЬрд╛рддреА рд╣реИ рдЬреЛ рдПрдХ рдореВрд▓реНрдп, рдпрд╛ рдПрдХ рд╡рд╛рджрд╛ (рдлрд┐рд░ mrr рдЕрдкрдиреЗ рд╕рдВрдХрд▓реНрдк рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдЧрд╛) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  Mrr рдПрдкреАрдЖрдИ рдмрд╣реБрдд рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдФрд░ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╣реИ - рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдХреЗрд╡рд▓ 3-4 рдмреБрдирд┐рдпрд╛рджреА рдСрдкрд░реЗрдЯрд░реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдФрд░ рдХрдИ рдЪреАрдЬреЗрдВ рдЙрдирдХреЗ рдмрд┐рдирд╛ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред  рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рд╕реВрдЪреА рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд▓реЛрдб рдирд╣реАрдВ рд╣реЛрдиреЗ рдкрд░ рдПрдХ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рдЬреЛрдбрд╝реЗрдВ, рдЬрд┐рд╕реЗ рдПрдХ рд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: </p><br><pre> <code class="javascript hljs">hideErrorMessage: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> setTimeout(res, <span class="hljs-number"><span class="hljs-number">1000</span></span>)), <span class="hljs-string"><span class="hljs-string">'requestGoods.error'</span></span>], <span class="hljs-attr"><span class="hljs-attr">errorMessageShown</span></span>: [ <span class="hljs-string"><span class="hljs-string">'merge'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">'requestGoods.error'</span></span>], [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">'hideErrorMessage'</span></span>], ],</code> </pre> <br><h3 id="sol-perec-sahar---po-vkusu"><del>  рдирдордХ, рдХрд╛рд▓реА рдорд┐рд░реНрдЪ </del>  рд╕реНрд╡рд╛рдж рдХреЗ рд▓рд┐рдП рдЪреАрдиреА </h3><br><p>  Mrr рдореЗрдВ рд╕рд┐рдВрдЯреИрдХреНрдЯрд┐рдХ рд╢реБрдЧрд░ рднреА рд╣реИ, рдЬреЛ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ рдЧрддрд┐ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЯреЙрдЧрд▓ рдСрдкрд░реЗрдЯрд░: </p><br><pre> <code class="javascript hljs">errorMessageShown: [<span class="hljs-string"><span class="hljs-string">'toggle'</span></span>, <span class="hljs-string"><span class="hljs-string">'requestGoods.error'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> setTimeout(res, <span class="hljs-number"><span class="hljs-number">1000</span></span>)), <span class="hljs-string"><span class="hljs-string">'showErrorMessage'</span></span>]],</code> </pre> <br><p>  рдкрд╣рд▓реЗ рддрд░реНрдХ рдореЗрдВ рдПрдХ рдкрд░рд┐рд╡рд░реНрддрди рд╕реЗрд▓ рдХреЛ рд╕рд╣реА рдкрд░ рд╕реЗрдЯ рдХрд░реЗрдЧрд╛, рдФрд░ рджреВрд╕рд░реЗ рдХреЛ рдЕрд╕рддреНрдп рдореЗрдВред <br>  рд╕рдлрд▓рддрд╛ рдФрд░ рддреНрд░реБрдЯрд┐ рд╕рдмрд╕реНрдХреВрд▓ рдореЗрдВ рдПрдХ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдХрд╛рд░реНрдп рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ "рд╡рд┐рдШрдЯрд┐рдд рдХрд░рдиреЗ" рдХреЗ рд╕рд╛рде рджреГрд╖реНрдЯрд┐рдХреЛрдг рднреА рдЗрддрдирд╛ рд╡реНрдпрд╛рдкрдХ рд╣реИ рдХрд┐ рдЖрдк рд╡рд┐рд╢реЗрд╖ рд╡рд╛рджрд╛ рдСрдкрд░реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЬреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рджреМрдбрд╝ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░ рджреЗрддрд╛ рд╣реИ): </p><br><pre> <code class="javascript hljs"> requestGoods: [ <span class="hljs-string"><span class="hljs-string">'promise'</span></span>, (page = <span class="hljs-number"><span class="hljs-number">1</span></span>, category = <span class="hljs-string"><span class="hljs-string">'all'</span></span>) =&gt; fetch(<span class="hljs-string"><span class="hljs-string">'https://reqres.in/api/products?page='</span></span>, page, category).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function"> =&gt;</span></span> r.json()), <span class="hljs-string"><span class="hljs-string">'page'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectCategory'</span></span>, <span class="hljs-string"><span class="hljs-string">'$start'</span></span> ],</code> </pre> <br><p>  рдмрд╣реБрдд рд╕рд╛рд░реА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдмрд╕ рджреЛ рджрд░реНрдЬрди рд▓рд╛рдЗрдиреЛрдВ рдореЗрдВ рдлрд┐рдЯ рд╣реЛрддреА рд╣реИред  рд╣рдорд╛рд░рд╛ рд╕рд╢рд░реНрдд рдЬреВрди рд╕рдВрддреБрд╖реНрдЯ рд╣реИ - рд╡рд╣ рд╡рд░реНрдХрд┐рдВрдЧ рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣рд╛, рдЬреЛ рдХрд╛рдлреА рдХреЙрдореНрдкреИрдХреНрдЯ рдирд┐рдХрд▓рд╛: рд╕рднреА рддрд░реНрдХ рдПрдХ рдлрд╛рдЗрд▓ рдореЗрдВ рдФрд░ рдПрдХ рд╕реНрдХреНрд░реАрди рдкрд░ рдлрд┐рдЯ рд╣реЛрддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдиреЗ рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд░реВрдк рд╕реЗ рд╕рдВрдХреЗрдд рджрд┐рдпрд╛: рдПрдХрд╛ рдЕрдирджреЗрдЦреА рд╣реИ ... рдЖрдк рдЗрд╕реЗ рд╣реБрдХ / рдкреБрди: рдкреНрд░рд╕реНрддрд╛рд╡ / рдЖрджрд┐ рдкрд░ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рд╣рд╛рдБ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдпрд╣ рд╣реИ!  рдмреЗрд╢рдХ, рдХреЛрдб рдФрд░ рднреА рдЕрдзрд┐рдХ рдХреЙрдореНрдкреИрдХреНрдЯ рдФрд░ рд╕рдВрд░рдЪрд┐рдд рд╣реЛрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдмрд╛рдд рдирд╣реАрдВ рд╣реИред  рдЖрдЗрдП рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛ рд░рд╣реА рд╣реИ, рдФрд░ рд╣рдореЗрдВ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рджреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреГрд╖реНрдареЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдФрд░ рдПрдХ рдЯреЛрдХрд░реАред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЯреЛрдХрд░реА рдбреЗрдЯрд╛, рдЬрд╛рд╣рд┐рд░ рд╣реИ, рджреЛрдиреЛрдВ рдкреГрд╖реНрдареЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реНрд╡ рд╕реНрддрд░ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><h3 id="odin-podhod-odin-interfeys">  рдПрдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг, рдПрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ </h3><br><p>  рдпрд╣рд╛рдВ рд╣рдо рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╡рд┐рдХрд╛рд╕ рдХреА рдПрдХ рдФрд░ рд╕рдорд╕реНрдпрд╛ рдкрд░ рдЖрддреЗ рд╣реИрдВ: рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рд░рд╛рдЬреНрдп рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рд╡рд┐рд╖рдо рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рдЕрд╕реНрддрд┐рддреНрд╡ (рдПрдХ рдШрдЯрдХ рдХреЗ рднреАрддрд░) рдФрд░ рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдк рд╕реЗ рдкреВрд░реЗ рдЖрд╡реЗрджрди рдХреЗ рд╕реНрддрд░ рдкрд░ред  рдХрдИ, рдореБрдЭреЗ рдпрдХреАрди рд╣реИ, рдПрдХ рджреБрд╡рд┐рдзрд╛ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рд╛: рд╕реНрдерд╛рдиреАрдп рд╕реНрддрд░ рдкрд░ рдпрд╛ рд╡рд┐рд╢реНрд╡ рд╕реНрддрд░ рдкрд░ рдХреБрдЫ рддрд░реНрдХ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП?  рдпрд╛ рдПрдХ рдФрд░ рд╕реНрдерд┐рддрд┐: рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рд╕реНрдерд╛рдиреАрдп рдбреЗрдЯрд╛ рдХреЗ рдХреБрдЫ рдЯреБрдХрдбрд╝реЗ рдХреЛ рд╡рд┐рд╢реНрд╡ рд╕реНрддрд░ рдкрд░ рд╕рд╣реЗрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдЖрдкрдХреЛ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛, рдкреБрди: рдкреНрд░рд╕реНрддрд╛рд╡ рд╕реЗ рд╕рдВрдкрд╛рджрдХ рддрдХ ... </p><br><p>  рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рдмреЗрд╢рдХ, рдХреГрддреНрд░рд┐рдо рд╣реИ, рдФрд░ рд╢реНрд░реА рдореЗрдВ рдпрд╣ рдирд╣реАрдВ рд╣реИ: рдпрд╣ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдЕрдЪреНрдЫрд╛ рд╣реИ, рдФрд░ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рд╣реИ - рд╕рдорд╛рди!  - рд╕реНрдерд╛рдиреАрдп рдФрд░ рд╡реИрд╢реНрд╡рд┐рдХ рд░рд╛рдЬреНрдп рдкреНрд░рдмрдВрдзрди рджреЛрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрддред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╣рдореЗрдВ рдХрд┐рд╕реА рднреА рд╡реИрд╢реНрд╡рд┐рдХ рд╕реНрдерд┐рддрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдмрд╕ рдШрдЯрдХреЛрдВ рдХреЗ рдмреАрдЪ рдбреЗрдЯрд╛ рдХрд╛ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореВрд▓ рдШрдЯрдХ рдХреА рд╕реНрдерд┐рддрд┐ "рд╡реИрд╢реНрд╡рд┐рдХ" рд╣реЛрдЧреАред </p><br><p>  рд╣рдорд╛рд░реЗ рдЖрд╡реЗрджрди рдХреА рдпреЛрдЬрдирд╛ рдЕрдм рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: рдЯреЛрдХрд░реА рдореЗрдВ рд╕рд╛рдорд╛рдиреЛрдВ рдХреА рд╕реВрдЪреА рд╡рд╛рд▓рд╛ рд░реВрдЯ рдШрдЯрдХ, рдФрд░ рджреЛ рдЙрдк-рдШрдЯрдХ: рд╕рд╛рдорд╛рди рдФрд░ рдЯреЛрдХрд░реА, рдФрд░ рд╡реИрд╢реНрд╡рд┐рдХ рдШрдЯрдХ "рдкреБрд░реНрдЬреЗ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ" рдХреЛ "рд╕реБрдирдХрд░ рдЯреЛрдХрд░реА рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ" рдФрд░ рдмрд╛рд▓ рдШрдЯрдХреЛрдВ рдХреЗ рд╕рд╛рде "рдЯреЛрдХрд░реА рд╕реЗ рд╣рдЯрд╛ рджреЗрдВ"ред </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> App = withMrr({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">cart</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">currentPage</span></span>: <span class="hljs-string"><span class="hljs-string">'goods'</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">cart</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item, arr</span></span></span><span class="hljs-function">) =&gt;</span></span> [...arr, item], <span class="hljs-string"><span class="hljs-string">'addToCart'</span></span>, <span class="hljs-string"><span class="hljs-string">'-cart'</span></span>], [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, arr</span></span></span><span class="hljs-function">) =&gt;</span></span> arr.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function"> =&gt;</span></span> item.id !== id), <span class="hljs-string"><span class="hljs-string">'removeFromCart'</span></span>, <span class="hljs-string"><span class="hljs-string">'-cart'</span></span>], ], }, (state, props, $, connectAs) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;div&gt; &lt;menu&gt; &lt;li onClick={$('currentPage', 'goods')}&gt;Goods&lt;/li&gt; &lt;li onClick={$('currentPage', 'cart')}&gt;Cart{ state.cart &amp;&amp; state.cart.length ? '(' + state.cart.length + ')' : '' }&lt;/li&gt; &lt;/menu&gt; &lt;div&gt; { state.currentPage === 'goods' &amp;&amp; &lt;Goods {...connectAs('goods', ['addToCart', 'removeFromCart'], ['cart'])}/&gt; } { state.currentPage === 'cart' &amp;&amp; &lt;Cart {...connectAs('cart', { 'removeFromCart': 'remove' }, ['cart'])}/&gt; } &lt;/div&gt; &lt;/div&gt; ); })</code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Goods = withMrr({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">goods</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">page</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">goods</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.data, <span class="hljs-string"><span class="hljs-string">'requestGoods.success'</span></span>], <span class="hljs-attr"><span class="hljs-attr">requestGoods</span></span>: [ <span class="hljs-string"><span class="hljs-string">'promise'</span></span>, (page = <span class="hljs-number"><span class="hljs-number">1</span></span>, category = <span class="hljs-string"><span class="hljs-string">'all'</span></span>) =&gt; fetch(<span class="hljs-string"><span class="hljs-string">'https://reqres.in/api/products?page='</span></span>, page, category).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function"> =&gt;</span></span> r.json()), <span class="hljs-string"><span class="hljs-string">'page'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectCategory'</span></span>, <span class="hljs-string"><span class="hljs-string">'$start'</span></span> ], <span class="hljs-attr"><span class="hljs-attr">page</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'goToPage'</span></span>, [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> a &lt; prev ? a : prev, <span class="hljs-string"><span class="hljs-string">'totalPages'</span></span>, <span class="hljs-string"><span class="hljs-string">'-page'</span></span>]], <span class="hljs-attr"><span class="hljs-attr">totalPages</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.total, <span class="hljs-string"><span class="hljs-string">'requestGoods.success'</span></span>], <span class="hljs-attr"><span class="hljs-attr">category</span></span>: <span class="hljs-string"><span class="hljs-string">'selectCategory'</span></span>, <span class="hljs-attr"><span class="hljs-attr">errorShown</span></span>: [<span class="hljs-string"><span class="hljs-string">'toggle'</span></span>, <span class="hljs-string"><span class="hljs-string">'requestGoods.error'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cb</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> setTimeout(res, <span class="hljs-number"><span class="hljs-number">1000</span></span>)), <span class="hljs-string"><span class="hljs-string">'requestGoods.error'</span></span>]], }, (state, props, $) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ... </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>); });</code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Cart = withMrr({}, (state, props, $) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;div&gt; &lt;h2&gt;Cart&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/h2&gt; &lt;ul&gt; { state.cart.map((item, i) =&gt; { return (&lt;div&gt; { item.name } &lt;div&gt; &lt;button onClick={$('remove', item.id)}&gt;Remove from cart&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">div&gt;</span></span></span><span class="hljs-function">); }) } &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ul</span></span></span><span class="hljs-function">&gt; &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt;); });</span></span></code> </pre><br><p>  рдпрд╣ рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд╣реИ рдХрд┐ рдХреИрд╕реЗ рдереЛрдбрд╝рд╛ рдмрджрд▓ рдЧрдпрд╛ рд╣реИ!  рд╣рдордиреЗ рдХреЗрд╡рд▓ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рд╕рдВрдмрдВрдзрд┐рдд рдШрдЯрдХреЛрдВ рдореЗрдВ рд░рдЦрд╛ рдФрд░ рдЙрдирдХреЗ рдмреАрдЪ "рдкреБрд▓" рдмрд┐рдЫрд╛рдпрд╛!  MrrConnect рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдШрдЯрдХреЛрдВ рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░рдХреЗ, рд╣рдо рдбрд╛рдЙрдирд╕реНрдЯреНрд░реАрдо рдФрд░ рдЕрдкрд╕реНрдЯреНрд░реАрдо рдкреНрд░рд╡рд╛рд╣ рдХреЗ рд▓рд┐рдП рдореИрдкрд┐рдВрдЧ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="javascript hljs">connectAs( <span class="hljs-string"><span class="hljs-string">'goods'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> [<span class="hljs-string"><span class="hljs-string">'addToCart'</span></span>, <span class="hljs-string"><span class="hljs-string">'removeFromCart'</span></span>], <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> [<span class="hljs-string"><span class="hljs-string">'cart'</span></span>] )</code> </pre> <br><p>  рдпрд╣рд╛рдВ, рдЪрд╛рдЗрд▓реНрдб рдХрдВрдкреЛрдиреЗрдВрдЯ рд╕реЗ AddToCart рдФрд░ removeFromCart рд╕реНрдЯреНрд░реАрдо рдЕрднрд┐рднрд╛рд╡рдХ рдХреЗ рдкрд╛рд╕ рдЬрд╛рдПрдВрдЧреЗ, рдФрд░ рдХрд╛рд░реНрдЯ рд╕реНрдЯреНрд░реАрдо рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рдПрдЧреАред  рд╣рдореЗрдВ рд╕рдорд╛рди рд╕реНрдЯреНрд░реАрдо рдирд╛рдореЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рдпрджрд┐ рд╡реЗ рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдореИрдкрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="javascript hljs">connectAs(<span class="hljs-string"><span class="hljs-string">'cart'</span></span>, { <span class="hljs-string"><span class="hljs-string">'removeFromCart'</span></span>: <span class="hljs-string"><span class="hljs-string">'remove'</span></span> })</code> </pre> <br><p>  рдЪрд╛рдЗрд▓реНрдб рдХрдВрдкреЛрдиреЗрдВрдЯ рд╕реЗ рд░рд┐рдореВрд╡ рд╕реНрдЯреНрд░реАрдо рдкреИрд░реЗрдВрдЯ рдореЗрдВ рд░рд┐рдореВрд╡рд▓ рдПрдлрд░реНрдЯ рдХреЗ рд▓рд┐рдП рд╕реЛрд░реНрд╕ рд╣реЛрдЧрд╛ред </p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, mrr рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рд▓реЛрдХреЗрд╢рди рдЪреБрдирдиреЗ рдХреА рд╕рдорд╕реНрдпрд╛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рджреВрд░ рд╣реЛ рдЧрдИ рд╣реИ: рдЖрдк рдбреЗрдЯрд╛ рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рддреЗ рд╣реИрдВ рдЬрд╣рд╛рдБ рдпрд╣ рд▓реЙрдЧ рдЗрди рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╣реЛрддрд╛ рд╣реИред </p><br><p>  рдпрд╣рд╛рдБ рдлрд┐рд░ рд╕реЗ, рдХреЛрдИ рднреА рд╕рдВрдкрд╛рджрдХ рдХреА рдЦрд╛рдореА рдХреЛ рдиреЛрдЯ рдХрд░рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ: рдЗрд╕рдореЗрдВ рдЖрдкрдХреЛ рд╕рднреА рдбреЗрдЯрд╛ рдХреЛ рдПрдХ рд╣реА рдХреЗрдВрджреНрд░реАрдп рднрдВрдбрд╛рд░ рдореЗрдВ рд╕рд╣реЗрдЬрдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдбреЗрдЯрд╛ рдЬреЛ рдХреЗрд╡рд▓ рдПрдХ рдЕрд▓рдЧ рдШрдЯрдХ рдпрд╛ рдЙрд╕рдХреЗ рдЙрдкрдкреНрд░рдХрд╛рд░ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрд░реЛрдз рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ!  рдпрджрд┐ рд╣рдордиреЗ "рд╕рдВрдкрд╛рджрдХреАрдп рд╢реИрд▓реА" рдореЗрдВ рд▓рд┐рдЦрд╛ рд╣реИ, рддреЛ рд╣рдо рд╕рд╛рдорд╛рдиреЛрдВ рдХреА рд▓реЛрдбрд┐рдВрдЧ рдФрд░ рдкреЗрдЬрд┐рдВрдЧ рдХреЛ рднреА рд╡реИрд╢реНрд╡рд┐рдХ рд╕реНрддрд░ рдкрд░ рд▓реЗ рдЬрд╛рдПрдВрдЧреЗ (рдирд┐рд╖реНрдкрдХреНрд╖рддрд╛ рдореЗрдВ - рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг, mrr рдХреЗ рд▓рдЪреАрд▓реЗрдкрди рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдпрд╣ рднреА рд╕рдВрднрд╡ рд╣реИ рдФрд░ рдЬреАрд╡рди рдХрд╛ рдЕрдзрд┐рдХрд╛рд░ рд╣реИ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрд░реЛрдд рдХреЛрдб</a> )ред </p><br><p>  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИред  рд▓реЛрдб рдХрд┐рдП рдЧрдП рд╕рд╛рдорд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреЗрд╡рд▓ рд╕рд╛рдорд╛рди рдХреЗ рдШрдЯрдХ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП, рдЙрдиреНрд╣реЗрдВ рд╡реИрд╢реНрд╡рд┐рдХ рд╕реНрддрд░ рдкрд░ рд▓реЗ рдЬрд╛рдирд╛, рд╣рдо рдХреЗрд╡рд▓ рд╡реИрд╢реНрд╡рд┐рдХ рд░рд╛рдЬреНрдп рдХреЛ рд░реЛрдХрддреЗ рдФрд░ рдлреБрд▓рд╛рддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдореЗрдВ рдкреБрд░рд╛рдиреЗ рдбреЗрдЯрд╛ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреГрд╖реНрдард╛рдВрдХрди рдкреГрд╖реНрда) рдХреЛ рд╕рд╛рдлрд╝ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдлрд┐рд░ рд╕реЗ рдЙрддреНрдкрд╛рдж рдкреГрд╖реНрда рдкрд░ рд▓реМрдЯрддрд╛ рд╣реИред  рдбреЗрдЯрд╛ рднрдВрдбрд╛рд░рдг рдХрд╛ рд╕рд╣реА рд╕реНрддрд░ рдЪреБрдирдирд╛, рд╣рдо рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдРрд╕реА рд╕рдорд╕реНрдпрд╛рдУрдВ рд╕реЗ рдмрдЪрддреЗ рд╣реИрдВред </p><br><p>  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рдПрдХ рдФрд░ рд▓рд╛рдн рдпрд╣ рд╣реИ рдХрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдЬрд┐рдХ рдХреЛ рдкреНрд░реЗрдЬреЗрдВрдЯреЗрд╢рди рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╣рдореЗрдВ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдШрдЯрдХреЛрдВ рдХреЛ "рдЧреВрдВрдЧрд╛" рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХреЗ рдмрдЬрд╛рдп рдкреВрд░реА рддрд░рд╣ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рд╡рд┐рдЬреЗрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдкреБрди: рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╡реИрд╢реНрд╡рд┐рдХ рд╕реНрддрд░ рдкрд░ рдиреНрдпреВрдирддрдо рдЬрд╛рдирдХрд╛рд░реА рд░рдЦрдирд╛ (рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ, рдпрд╣ рдХреЗрд╡рд▓ рд╕рддреНрд░ рдбреЗрдЯрд╛ рд╣реИ) рдФрд░ рдЕрдзрд┐рдХрд╛рдВрд╢ рддрд░реНрдХ рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреГрд╖реНрда рдШрдЯрдХреЛрдВ рдореЗрдВ рдирд┐рдХрд╛рд▓рддреЗ рд╣реБрдП, рд╣рдо рдХреЛрдб рдХреА рд╕реБрд╕рдВрдЧрддрддрд╛ рдХреЛ рдХрдо рдХрд░рддреЗ рд╣реИрдВред  рдмреЗрд╢рдХ, рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рд░реВрдк рд╕реЗ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдРрд╕реЗ рдХрд╛рд░реНрдп рд╣реИрдВ рдЬрд╣рд╛рдВ рд╡реИрд╢реНрд╡рд┐рдХ рд╕реНрдерд┐рддрд┐ рдмрд╣реБрдд рдЫреЛрдЯреА рд╣реИ рдФрд░ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ "рд╕реНрдХреНрд░реАрди" рдПрдХ рджреВрд╕рд░реЗ рд╕реЗ рд▓рдЧрднрдЧ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрд╡рддрдВрддреНрд░ рд╣реИрдВ: рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреНрд░рд╡реЗрд╢, рдЖрджрд┐ред  рд╕рдВрдкрд╛рджрдХ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдЬреЛ рд╣рдореЗрдВ рд╡рд╣ рд╕рдм рдХреБрдЫ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдХрд╕рд╛рддрд╛ рд╣реИ рдЬреЛ рд╡реИрд╢реНрд╡рд┐рдХ рд╕реНрддрд░ рдкрд░ рдЖрд╡рд╢реНрдпрдХ рдФрд░ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ, mrr рдЖрдкрдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЙрдкрдкреНрд░рдХрд╛рд░реЛрдВ рдореЗрдВ рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ, рдкреНрд░реЛрддреНрд╕рд╛рд╣рд┐рдд рдХрд░рдиреЗ рдФрд░ рдПрдиреНрдХреИрдкреНрд╕реБрд▓реЗрд╢рди рд╕рдВрднрд╡ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣рдорд╛рд░реЗ рдЖрд╡реЗрджрди рдХреЛ рдПрдХ рдЕрдЦрдВрдб "рдкрд╛рдИ" рд╕реЗ "рд╕реНрддрд░рд┐рдд" рдХреЗрдХ "рдореЗрдВ рдмрджрд▓ рджреЗрддрд╛ рд╣реИред </p><br><p>  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ: рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рджреГрд╖реНрдЯрд┐рдХреЛрдг рдореЗрдВ рдХреНрд░рд╛рдВрддрд┐рдХрд╛рд░реА рдирдпрд╛ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реИ!  рдШрдЯрдХ, рд╕реНрд╡-рдирд┐рд╣рд┐рдд рд╡рд┐рдЧреЗрдЯреНрд╕, рдЬреЗрдПрд╕ рдлреНрд░реЗрдорд╡рд░реНрдХ рдХреЗ рдЖрдЧрдорди рдХреЗ рдмрд╛рдж рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдмреБрдирд┐рдпрд╛рджреА рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИрдВред  рдПрдХрдорд╛рддреНрд░ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ mrr рдШреЛрд╖рдгрд╛рддреНрдордХ рд╕рд┐рджреНрдзрд╛рдВрдд рдХрд╛ рдкрд╛рд▓рди рдХрд░рддрд╛ рд╣реИ: рдШрдЯрдХ рдХреЗрд╡рд▓ рдЕрдиреНрдп рдШрдЯрдХреЛрдВ рдХреЗ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рд╕реБрди рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдиреАрдЪреЗ-рдКрдкрд░ рдХреА рджрд┐рд╢рд╛, рдпрд╛ рдКрдкрд░-рдиреАрдЪреЗ рдХреА рджрд┐рд╢рд╛ рд╕реЗ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИ, рдЬреЛ рдкреНрд░рд╡рд╛рд╣ рд╕реЗ рднрд┐рдиреНрди рд╣реЛрддрд╛ рд╣реИ) -Suitable)ред  рд╕реНрдорд╛рд░реНрдЯ рдШрдЯрдХ рдЬреЛ рдХреЗрд╡рд▓ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдФрд░ рдореВрд▓ рдШрдЯрдХреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрджреЗрд╢реЛрдВ рдХрд╛ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдлреНрд░рдВрдЯ-рдПрдВрдб рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдореЗрдВ рд▓реЛрдХрдкреНрд░рд┐рдп рд▓реЗрдХрд┐рди рдЕрд▓реНрдкрдЬреНрдЮрд╛рдд рдЕрднрд┐рдиреЗрддрд╛ рдореЙрдбрд▓ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИрдВ (рдлреНрд░рдВрдЯ-рдПрдВрдб рдкрд░ рдЕрднрд┐рдиреЗрддрд╛рдУрдВ рдФрд░ рдереНрд░реЗрдбреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рд╖рдп рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд▓реЗрдЦ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИ) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рддреНрдордХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХрд╛ рдкрд░рд┐рдЪрдп</a> ред <br>  рдмреЗрд╢рдХ, рдпрд╣ рдЕрднрд┐рдиреЗрддрд╛рдУрдВ рдХреЗ рдХреИрдиреЛрдирд┐рдХрд▓ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реЗ рдмрд╣реБрдд рджреВрд░ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд╛рд░ рдмрд┐рд▓реНрдХреБрд▓ рдпрд╣реА рд╣реИ: рдПрдордкреАрдкреА рдзрд╛рд░рд╛рдУрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдВрджреЗрд╢реЛрдВ рдХрд╛ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдШрдЯрдХреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЕрднрд┐рдиреЗрддрд╛рдУрдВ рдХреА рднреВрдорд┐рдХрд╛ рдирд┐рднрд╛рдИ рдЬрд╛рддреА рд╣реИ;  рдПрдХ рдШрдЯрдХ (рдШреЛрд╖рд┐рдд рд░реВрдк рд╕реЗ!) рд╡рд░реНрдЪреБрдЕрд▓ рдбреЛрдо рдФрд░ рд░рд┐рдПрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдЪрд╛рдЗрд▓реНрдб рдХрдВрдкреЛрдиреЗрдВрдЯ рдПрдХреНрдЯрд░реНрд╕ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдФрд░ рд╣рдЯрд╛ рд╕рдХрддрд╛ рд╣реИ: рд░реЗрдВрдбрд░ рдлрд╝рдВрдХреНрд╢рди, рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдЪрд╛рдЗрд▓реНрдб рдПрдХреНрдЯрд░реНрд╕ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ рд╕реНрдерд┐рддрд┐ рдХреЗ рдмрдЬрд╛рдп, рдЬрдм рд╣рдо рдореВрд▓ рдШрдЯрдХ рдХреЛ рдкреНрд░реЙрдкреНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдХреЙрд▓рдмреИрдХ рдореЗрдВ "рдбреНрд░реЙрдк" рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рдорд╛рддрд╛-рдкрд┐рддрд╛ рд╕реЗ рдмрдЪреНрдЪреЗ рдХреЗ рдШрдЯрдХ рдХреЗ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рд╕реБрдирдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрд╣реА рдмрд╛рдд рд╡рд┐рдкрд░реАрдд рджрд┐рд╢рд╛ рдореЗрдВ рд╣реИ, рдорд╛рддрд╛-рдкрд┐рддрд╛ рд╕реЗ рдмрдЪреНрдЪреЗ рддрдХред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдкреВрдЫ рд╕рдХрддреЗ рд╣реИрдВ: рдХрд╛рд░реНрдЯ рдЯреЛрдХрд░реА рдбреЗрдЯрд╛ рдХреЛ рд╕реНрдЯреНрд░реАрдо рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдЯ рдХрдВрдкреЛрдиреЗрдВрдЯ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдВ, рдпрджрд┐ рд╣рдо рдЖрдЧреЗ рдХреА рд╣рд▓рдЪрд▓ рдХреЗ рдмрд┐рдирд╛, рдмрд╕ рдкреНрд░реЙрдкрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдиреНрд╣реЗрдВ рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?  рдЕрдВрддрд░ рдХреНрдпрд╛ рд╣реИ?  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рдЙрдкрдпреЛрдЧ рднреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рддрдм рддрдХ рдЬрдм рддрдХ рдХрд┐ рдкреНрд░реЙрдкреНрд╕ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рди рд╣реЛред  рдпрджрд┐ рдЖрдкрдиреЗ рдХрднреА рдШрдЯрдХWillReceiveProps рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдХреНрдпрд╛ рд╣реИред  рдпрд╣ "рдЧрд░реАрдмреЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓рддрд╛" рдХрд╛ рдПрдХ рдкреНрд░рдХрд╛рд░ рд╣реИ: рдЖрдк рдмрд┐рд▓реНрдХреБрд▓ рд╕рднреА рдмрджрд▓рд╛рд╡реЛрдВ рдХреЛ рд╕реБрдирддреЗ рд╣реИрдВ, рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рдмрджрд▓ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░реЗрдВред  рд▓реЗрдХрд┐рди рдпрд╣ рд╡рд┐рдзрд┐ рдЬрд▓реНрдж рд╣реА рд░рд┐рдПрдХреНрдЯ рд╕реЗ рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рдПрдЧреА, рдФрд░ "рдКрдкрд░ рд╕реЗ рд╕рдВрдХреЗрдд" рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЙрддреНрдкрдиреНрди рд╣реЛ рд╕рдХрддреА рд╣реИред </p><br><p>  Mrr рдореЗрдВ, рдкреНрд░рд╡рд╛рд╣ "рдкреНрд░рд╡рд╛рд╣" рди рдХреЗрд╡рд▓ рдКрдкрд░ рд╣реИ, рдмрд▓реНрдХрд┐ рдШрдЯрдХ рдкрджрд╛рдиреБрдХреНрд░рдо рднреА рдиреАрдЪреЗ рд╣реИ, рддрд╛рдХрд┐ рдШрдЯрдХ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рд░рд╛рдЬреНрдп рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рджреЗ рд╕рдХреЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдореЗрдВ, рдЖрдк mrr рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдЙрдкрдХрд░рдгреЛрдВ рдХреА рдкреВрд░реА рд╢рдХреНрддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Cart = withMrr({ <span class="hljs-attr"><span class="hljs-attr">foo</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">items</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// -  }, 'cart'], }, (state, props, $) =&gt; { ... })</span></span></code> </pre> <br><h3 id="dobavlyaem-nemnozhko-byurokratii">  рдереЛрдбрд╝реА рдиреМрдХрд░рд╢рд╛рд╣реА рдЬреЛрдбрд╝реЗрдВ </h3><br><p>  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдврд╝ рд░рд╣реА рд╣реИ, рдкреНрд░рд╡рд╛рд╣ рдХреЗ рдирд╛рдореЛрдВ рдкрд░ рдирдЬрд╝рд░ рд░рдЦрдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╣реИрдВ - рдУрд╣, рд╣реЙрд░рд░!  - рдкрдВрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИрдВред  рдЦреИрд░, рд╣рдо рд╕реНрдЯреНрд░реАрдо рдирд╛рдореЛрдВ рдХреЗ рд▓рд┐рдП рд╕реНрдерд┐рд░рд╛рдВрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рд╛рде рд╣реА mrr рдХрдердиреЛрдВ рдХреЗ рд▓рд┐рдП рднреАред  рдЕрдм рдПрдХ рдЫреЛрдЯрд╛ рдЯрд╛рдЗрдкреЛ рдмрдирд╛рдиреЗ рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рддреЛрдбрд╝рдирд╛ рдХрдард┐рди рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { withMrr } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mrr'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { merge, toggle, promise } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mrr/operators'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { cell, nested, $start$, passive } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mrr/cell'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> goods$ = cell(<span class="hljs-string"><span class="hljs-string">'goods'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> page$ = cell(<span class="hljs-string"><span class="hljs-string">'page'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> totalPages$ = cell(<span class="hljs-string"><span class="hljs-string">'totalPages'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> category$ = cell(<span class="hljs-string"><span class="hljs-string">'category'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> errorShown$ = cell(<span class="hljs-string"><span class="hljs-string">'errorShown'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addToCart$ = cell(<span class="hljs-string"><span class="hljs-string">'addToCart'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> removeFromCart$ = cell(<span class="hljs-string"><span class="hljs-string">'removeFromCart'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> selectCategory$ = cell(<span class="hljs-string"><span class="hljs-string">'selectCategory'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> goToPage$ = cell(<span class="hljs-string"><span class="hljs-string">'goToPage'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Goods = withMrr({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { [goods$]: [], [page$]: <span class="hljs-number"><span class="hljs-number">1</span></span>, }, [goods$]: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.data, requestGoods$.success], [requestGoods$]: promise(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">page, category</span></span></span><span class="hljs-function">) =&gt;</span></span> fetch(<span class="hljs-string"><span class="hljs-string">'https://reqres.in/api/products?page='</span></span>, page).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function"> =&gt;</span></span> r.json()), page$, category$, $start$), [page$]: merge(goToPage$, [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> a &lt; prev ? a : prev, totalPages$, passive(page$)]), [totalPages$]: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.total, requestGoods$.success], [category$]: selectCategory$, [errorShown$]: toggle(requestGoods$.error, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cb</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> setTimeout(res, <span class="hljs-number"><span class="hljs-number">1000</span></span>)), requestGoods$.error]), }, ...);</code> </pre><br><h3 id="chto-v-chernom-yaschike">  рдмреНрд▓реИрдХ рдмреЙрдХреНрд╕ рдореЗрдВ рдХреНрдпрд╛ рд╣реИ? </h3><br><p>  рдкрд░реАрдХреНрд╖рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛?  Mrr рдШрдЯрдХ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рддрд░реНрдХ рдХреЛ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕реЗ рдЕрд▓рдЧ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ, рдФрд░ рдлрд┐рд░ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВред </p><br><p>  рдЪрд▓рд┐рдП рд╣рдорд╛рд░реА рдлрд╛рдЗрд▓ рд╕реЗ рдЕрд▓рдЧ рд╕реЗ mrr рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдмрдирд╛рддреЗ рд╣реИрдВред </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GoodsStruct = { <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { [goods$]: [], [page$]: <span class="hljs-number"><span class="hljs-number">1</span></span>, }, ... } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Goods = withMrr(GoodsStruct, (state, props, $) =&gt; { ... }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> { GoodsStruct }</code> </pre><br><p>  рдФрд░ рдлрд┐рд░ рд╣рдо рдЗрд╕реЗ рдЕрдкрдиреЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ рдЖрдпрд╛рдд рдХрд░рддреЗ рд╣реИрдВред  рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЖрд╡рд░рдг рдХреЗ рд╕рд╛рде рд╣рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <br>  рдорд╛рди рдХреЛ рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рд░рдЦреЗрдВ (рдЬреИрд╕реЗ рдХрд┐ рдпрд╣ DOM рд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛), рдФрд░ рдлрд┐рд░ рдЙрд╕ рдкрд░ рдирд┐рд░реНрднрд░ рдЕрдиреНрдп рдереНрд░реЗрдбреНрд╕ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { simpleWrapper} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mrr'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { GoodsStruct } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../src/components/Goods'</span></span>; describe(<span class="hljs-string"><span class="hljs-string">'Testing Goods component'</span></span>, () =&gt; { it(<span class="hljs-string"><span class="hljs-string">'should update page if it\'s out of limit '</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = simpleWrapper(GoodsStruct); a.set(<span class="hljs-string"><span class="hljs-string">'page'</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); assert.equal(a.get(<span class="hljs-string"><span class="hljs-string">'page'</span></span>), <span class="hljs-number"><span class="hljs-number">10</span></span>); a.set(<span class="hljs-string"><span class="hljs-string">'requestGoods.success'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">data</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">total</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>}); assert.equal(a.get(<span class="hljs-string"><span class="hljs-string">'page'</span></span>), <span class="hljs-number"><span class="hljs-number">5</span></span>); a.set(<span class="hljs-string"><span class="hljs-string">'requestGoods.success'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">data</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">total</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>}); assert.equal(a.get(<span class="hljs-string"><span class="hljs-string">'page'</span></span>), <span class="hljs-number"><span class="hljs-number">5</span></span>); }) })</code> </pre> <br><h3 id="blesk-i-nischeta-reaktivnosti">  рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдЪрдордХ рдФрд░ рдЧрд░реАрдмреА </h3><br><p>  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рд╕рдВрдкрд╛рджрдХ рдореЗрдВ рдШрдЯрдирд╛рдУрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд░рд╛рдЬреНрдп рдХреЗ "рдореИрдиреБрдЕрд▓" рдЧрдарди рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓рддрд╛ рдЙрдЪреНрдЪ рд╕реНрддрд░ рдХреА рдПрдХ рдЕрдореВрд░реНрддрддрд╛ рд╣реИред  рд╡рд┐рдХрд╛рд╕ рдХреА рд╕реБрд╡рд┐рдзрд╛, рдПрдХ рдУрд░, рдпрд╣ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдкреИрд░ рдореЗрдВ рдЧреЛрд▓реА рдорд╛рд░рдиреЗ рдХреЗ рдЕрд╡рд╕рд░ рдкреИрджрд╛ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рдкрд░рд┐рджреГрд╢реНрдп рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ: рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреГрд╖реНрда рд╕рдВрдЦреНрдпрд╛ 5 рдкрд░ рдЬрд╛рддрд╛ рд╣реИ, рдлрд┐рд░ рдлрд╝рд┐рд▓реНрдЯрд░ "рд╢реНрд░реЗрдгреА" рд╕реНрд╡рд┐рдЪ рдХрд░рддрд╛ рд╣реИред  рд╣рдореЗрдВ рдкрд╛рдВрдЪрд╡реЗрдВ рдкреГрд╖реНрда рдкрд░ рдЪрдпрдирд┐рдд рд╢реНрд░реЗрдгреА рдХреЗ рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рд╕реВрдЪреА рд▓реЛрдб рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдпрд╣ рдкрддрд╛ рдЪрд▓ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдЗрд╕ рд╢реНрд░реЗрдгреА рдХреЗ рд╕рд╛рдорд╛рди рдореЗрдВ рдХреЗрд╡рд▓ рддреАрди рдкреГрд╖реНрда рд╣реЛрдВрдЧреЗред  "рдмреЗрд╡рдХреВрдл" рдмреИрдХрдПрдВрдб рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдорд╛рд░реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреА рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИ: </p><br><ul><li>  рдЕрдиреБрд░реЛрдз рдбреЗрдЯрд╛ рдкреГрд╖реНрда = 5 рдФрд░ рд╢реНрд░реЗрдгреА =% рд╢реНрд░реЗрдгреА% </li><li>  рдЙрддреНрддрд░ рд╕реЗ рдкреГрд╖реНрдареЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рдорд╛рди рд▓реЗрдВ </li><li>  рдпрджрд┐ рд░рд┐рдХреЙрд░реНрдб рдХреА рдПрдХ рд╢реВрдиреНрдп рд╕рдВрдЦреНрдпрд╛ рд▓реМрдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИ, рддреЛ рд╕рдмрд╕реЗ рдмрдбрд╝реЗ рдЙрдкрд▓рдмреНрдз рдкреГрд╖реНрда рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ </li></ul><br><p>  рдпрджрд┐ рд╣рдо рд╕рдВрдкрд╛рджрдХ рдкрд░ рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рд╡рд░реНрдгрд┐рдд рддрд░реНрдХ рдХреЗ рд╕рд╛рде рдПрдХ рдмрдбрд╝реА рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдмрдирд╛рдиреА рд╣реЛрдЧреАред  Mrr рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓рддрд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЗрд╕ рдкрд░рд┐рджреГрд╢реНрдп рдХрд╛ рдЕрд▓рдЧ рд╕реЗ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рд╕рдм рдХреБрдЫ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрди рдкрдВрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИ: </p><br><pre> <code class="javascript hljs"> [requestGoods$]: [<span class="hljs-string"><span class="hljs-string">'nested'</span></span>, (cb, page, category) =&gt; { fetch(<span class="hljs-string"><span class="hljs-string">'https://reqres.in/api/products?page='</span></span>, page).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function"> =&gt;</span></span> r.json()) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'success'</span></span>, res)) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, e)) }, page$, category$, $start$], [totalPages$]: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.total, requestGoods$.success], [page$]: merge(goToPage$, [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> a &lt; prev ? a : prev, totalPages$, passive(page$)]),</code> </pre> <br><p>  рдпрджрд┐ рдирдпрд╛ TotalPages рдорд╛рди рд╡рд░реНрддрдорд╛рди рдкреГрд╖реНрда рд╕реЗ рдХрдо рд╣реИ, рддреЛ рд╣рдо рдкреГрд╖реНрда рдореВрд▓реНрдп рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдЗрд╕ рддрд░рд╣ рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП рджреВрд╕рд░рд╛ рдЕрдиреБрд░реЛрдз рд╢реБрд░реВ рдХрд░реЗрдВрдЧреЗред <br>  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╣рдорд╛рд░рд╛ рдлрд╝рдВрдХреНрд╢рди рд╕рдорд╛рди рдорд╛рди рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕реЗ рдЕрднреА рднреА рдкреГрд╖реНрда рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдирд╛ рдЬрд╛рдПрдЧрд╛, рдЗрд╕рдХреЗ рдмрд╛рдж рд╕рднреА рдирд┐рд░реНрднрд░ рдзрд╛рд░рд╛рдУрдВ рдХреА рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рд╣реЛрдЧреАред  рдЗрд╕рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рд╢реНрд░реА рдХрд╛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЕрд░реНрде рд╣реИ - рдЫреЛрдбрд╝реЗрдВред  рдЗрд╕реЗ рд╡рд╛рдкрд╕ рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рд╕рдВрдХреЗрдд рджреЗрддреЗ рд╣реИрдВ: рдХреЛрдИ рдкрд░рд┐рд╡рд░реНрддрди рдирд╣реАрдВ рд╣реБрдЖ рд╣реИ, рдХреБрдЫ рднреА рдЕрджреНрдпрддрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { withMrr, skip } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mrr'</span></span>; [requestGoods$]: nested(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cb, page, category</span></span></span><span class="hljs-function">) =&gt;</span></span> { fetch(<span class="hljs-string"><span class="hljs-string">'https://reqres.in/api/products?page='</span></span>, page).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function"> =&gt;</span></span> r.json()) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'success'</span></span>, res)) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, e)) }, page$, category$, $start$), [totalPages$]: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.total, requestGoods$.success], [page$]: merge(goToPage$, [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> a &lt; prev ? a : skip, totalPages$, passive(page$)]),</code> </pre> <br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рдЫреЛрдЯреА рд╕реА рдЧрд▓рддреА рд╣рдореЗрдВ рдПрдХ рдЕрдирдВрдд рд▓реВрдк рдореЗрдВ рд▓реЗ рдЬрд╛ рд╕рдХрддреА рд╣реИ: рдпрджрд┐ рд╣рдо "рд╕реНрдХрд┐рдк" рдирд╣реАрдВ рдмрд▓реНрдХрд┐ "рдкреНрд░рдЪрд▓рд┐рдд" рд▓реМрдЯрддреЗ рд╣реИрдВ, рддреЛ рдкреЗрдЬ рд╕реЗрд▓ рдмрджрд▓ рдЬрд╛рдПрдЧрд╛ рдФрд░ рджреВрд╕рд░рд╛ рдЕрдиреБрд░реЛрдз рд╣реЛрдЧрд╛, рдФрд░ рдЗрд╕реА рддрд░рд╣ рдПрдХ рд╕рд░реНрдХрд▓ рдореЗрдВред  рдЗрд╕ рддрд░рд╣ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдмрд╣реБрдд рд╕рдВрднрд╛рд╡рдирд╛, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, FRP рдпрд╛ mrr рдХрд╛ "рджреЛрд╖рдкреВрд░реНрдг рджреЛрд╖" рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдирдВрдд рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдпрд╛ рд▓реВрдк рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреЗ рддреНрд░реБрдЯрд┐рдкреВрд░реНрдг рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдирд╣реАрдВ рдХрд░рддреА рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рд╕рдордЭрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ mrr рдХреЛ рдЕрднреА рднреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓рддрд╛ рдХреЗ рддрдВрддреНрд░ рдХреА рдХреБрдЫ рд╕рдордЭ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЪрд╛рдХреВ рдХреЗ рдкреНрд░рд╕рд┐рджреНрдз рд░реВрдкрдХ рдкрд░ рд▓реМрдЯрдирд╛, рд╢реНрд░реА рдПрдХ рдмрд╣реБрдд рддреЗрдЬ рдЪрд╛рдХреВ рд╣реИ рдЬреЛ рдХрд╛рд░реНрдп рдХреБрд╢рд▓рддрд╛ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рдЕрдпреЛрдЧреНрдп рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдХреЛ рднреА рдШрд╛рдпрд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рд╡реИрд╕реЗ, рдХрд┐рд╕реА рднреА рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдП рдмрд┐рдирд╛ mrr рдкрд░ рдбрд┐рдмреЗрдЯ рдХрд░рдирд╛ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИ: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GoodsStruct = { <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { ... }, <span class="hljs-attr"><span class="hljs-attr">$log</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, ... }</code> </pre> <br><p>  рдмрд╕ $ рд▓реЙрдЧ рдЬреЛрдбрд╝реЗрдВ: mrr рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд╣реИ, рдФрд░ рдХрдХреНрд╖реЛрдВ рдореЗрдВ рд╕рднреА рдкрд░рд┐рд╡рд░реНрддрди рдХрдВрд╕реЛрд▓ рдХреЗ рд▓рд┐рдП рдЖрдЙрдЯрдкреБрдЯ рд╣реЛрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рдкрд░рд┐рд╡рд░реНрддрди рдФрд░ рдХреИрд╕реЗред </p><br><p>  рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╕реБрдирдиреЗ рдпрд╛ рдЫреЛрдбрд╝рдиреЗ рдХреЗ рдЕрд░реНрде рдЬреИрд╕реА рдЕрд╡рдзрд╛рд░рдгрд╛рдПрдВ рд╡рд┐рд╢рд┐рд╖реНрдЯ "рдмреИрд╕рд╛рдЦреА" рдирд╣реАрдВ рд╣реИрдВ: рд╡реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓рддрд╛ рдХреА рд╕рдВрднрд╛рд╡рдирд╛рдУрдВ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдпрд╣ рдЕрдирд┐рд╡рд╛рд░реНрдп рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рд╕рд╣рд╛рд░рд╛ рд▓рд┐рдП рдмрд┐рдирд╛ рдЖрд╕рд╛рдиреА рд╕реЗ рдЖрд╡реЗрджрди рдХреЗ рдкреВрд░реЗ рддрд░реНрдХ рдХрд╛ рд╡рд░реНрдгрди рдХрд░ рд╕рдХреЗред  рдЗрд╕реА рддрд░рд╣ рдХреЗ рддрдВрддреНрд░, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, Rx.js рдореЗрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╡рд╣рд╛рдВ рдЙрдирдХрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрдо рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред            : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Mrr:  FRP  </a> </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">   .</a> </p><br><h3 id="itogi">  рдкрд░рд┐рдгрд╛рдо </h3><br><ul><li>   FRP,     mrr          ,      </li><li>           :    ,         </li><li>     ,        ,            </li><li>         ,    ,         - (   - !) </li><li>            </li><li>  mrr : "  ,   !"            </li><li>      ,       </li><li>   ,          ,    (        ).     ! </li><li>     : ,   ,  ,    TMTOWTDI:          , -              . </li></ul><br><h3 id="ps">  рдкреБрдирд╢реНрдЪ </h3><br><p>        .  ,  mrr      ,    ,    : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> useMrr <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mrr/hooks'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [state, $, connectAs] = useMrr(props, { <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">counter</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">counter</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> =&gt;</span></span> a + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'-counter'</span></span>, <span class="hljs-string"><span class="hljs-string">'incr'</span></span>], [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> =&gt;</span></span> a - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'-counter'</span></span>, <span class="hljs-string"><span class="hljs-string">'decr'</span></span>] ], }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Counter: { state.counter } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">incr</span></span></span></span><span class="xml"><span class="hljs-tag">') }&gt;</span></span></span><span class="xml">increment</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">decr</span></span></span></span><span class="xml"><span class="hljs-tag">') }&gt;</span></span></span><span class="xml">decrement</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Bar</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...connectAs</span></span></span></span><span class="xml"><span class="hljs-tag">('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">bar</span></span></span></span><span class="xml"><span class="hljs-tag">')} /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); }</span></span></code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi438112/">https://habr.com/ru/post/hi438112/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi438100/index.html">рдбреЗрдЯрд╛ рдХрд╣рд╛рдВ рдЬрд╛рддрд╛ рд╣реИ: 12 рд╣рдорд▓реЗ, рд╣реИрдХ рдФрд░ рд▓реАрдХ</a></li>
<li><a href="../hi438104/index.html">рдмреНрд▓реЙрдХрдЪреЗрди рдирд╣реАрдВ</a></li>
<li><a href="../hi438106/index.html">рд╡рд┐рдВрдЯреЗрдЬ рдПрд▓ рдИ рдбреА рдХреЗ рд╕рд╛рде рдЪрдордХрддреА рд╣реБрдИ рдпрд╛ рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдкрд░рд┐рдпреЛрдЬрдирд╛ рдкрд░ "рдЖрдЧ" рдХреА рдЪреЗрддрд╛рд╡рдиреА рджреЗрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi438108/index.html">рдПрд╕рдИрдУ рдФрд░ рд╕рдВрджрд░реНрдн: рдХреНрдпрд╛ рдЪреБрдирдирд╛ рд╣реИ рдФрд░ рдХреНрдпрд╛ рдЪреБрдирдирд╛ рд╣реИ?</a></li>
<li><a href="../hi438110/index.html">рд░реЗрд▓ + рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬ + рдмрд╛рдЗрдВрдбрд┐рдВрдЧ</a></li>
<li><a href="../hi438116/index.html">рд╕рдВрдЧреАрдд рдореАрдбрд┐рдпрд╛ рдХрд╛ рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рдкреНрд░рднрд╛рд╡ рд╡рд┐рд╢реНрд▓реЗрд╖рдг: рдбрд┐рдЬрд┐рдЯрд▓ рд╕рдВрдЧреАрдд, рдПрдирд╛рд▓реЙрдЧ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдФрд░ рд╕реАрдбреА</a></li>
<li><a href="../hi438118/index.html">рдбреЗрдХреНрд╕-рдиреЗрдЯ 4.0 рдПрдВрдмреАрдбреЗрдХреНрд╕реНрдЯреНрд░реЛ рд░реЛрдмреЛрдЯ рдХреЛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ</a></li>
<li><a href="../hi438120/index.html">рдлрд░рд╡рд░реА 2019 рдХреЗ рд▓рд┐рдП рдЖрдИрдЯреА рдХреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдПрдЪрдЖрд░ рдкреЗрд╢реЗрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдШрдЯрдирд╛рдУрдВ рдХрд╛ рдкрд╛рдЪрди</a></li>
<li><a href="../hi438122/index.html">рдПрдордПрд╕ SQL тАЛтАЛрдкрд░ рдиреНрдпреВрдореЗрд░реЛрд▓реЙрдЬреА - рдПрдХ рдордиреЛрд░рдВрдЬрдХ рдкреНрд░рдпреЛрдЧ</a></li>
<li><a href="../hi438124/index.html">рдкрд╛рдЗрдЯрд░ рдЧреНрд░рд╛рдлреНрдХрд┐рди: рд╡рд┐рдЯреНрд░реИрдХ рдореЗрдВ рдорд╛рдЗрдЯреИрдк рд╕реЗ рд╡реАрдбрд┐рдпреЛ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>