<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™ŒğŸ» ğŸ ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘©ğŸ¼ Ø£Ø­Ø§ÙˆÙ„. NET Core + Kubernetes + appmetrics + prometheus + grafana + jobs + check checks â›´ï¸ ğŸ‘¨ğŸ½â€ğŸ¤â€ğŸ‘¨ğŸ¼ ğŸ””</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ù…Ø¹Ø±ÙØ© Ù…ÙˆØ¬Ø²Ø© Ù…Ø¹ kubernetes Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ† Ø¨Ù…Ø«Ø§Ù„ Ù†Ø´Ø± Ù…ÙˆÙ‚Ø¹ Ù‚Ø§Ù„Ø¨ Ø¨Ø³ÙŠØ· ØŒ ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ù‡ Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ØŒ ÙˆØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø© ÙˆØ§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„ØµØ­ÙŠØ© (ÙŠØªÙ… Ø¥Ø±ÙØ§Ù‚ Ø¬Ù…ÙŠØ¹ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ØµØ¯Ø±)...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ø£Ø­Ø§ÙˆÙ„. NET Core + Kubernetes + appmetrics + prometheus + grafana + jobs + check checks</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437286/" style=";text-align:right;direction:rtl">  Ù…Ø¹Ø±ÙØ© Ù…ÙˆØ¬Ø²Ø© Ù…Ø¹ kubernetes Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ† Ø¨Ù…Ø«Ø§Ù„ Ù†Ø´Ø± Ù…ÙˆÙ‚Ø¹ Ù‚Ø§Ù„Ø¨ Ø¨Ø³ÙŠØ· ØŒ ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ù‡ Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ØŒ ÙˆØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø© ÙˆØ§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„ØµØ­ÙŠØ© (ÙŠØªÙ… Ø¥Ø±ÙØ§Ù‚ Ø¬Ù…ÙŠØ¹ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ØµØ¯Ø±) <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ØªØ«Ø¨ÙŠØª Kubernetes</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ØªØ«Ø¨ÙŠØª ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù‚Ù… Ø¨ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ÙÙŠ Ø§Ù„ÙƒØªÙ„Ø©</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø§ÙŠÙŠØ³ Ù…Ø®ØµØµØ© Ø¥Ù„Ù‰ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø¬Ù…Ø¹ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª Ù…Ù† Ø®Ù„Ø§Ù„ Ø¨Ø±ÙˆÙ…ÙŠØ«ÙŠÙˆØ³</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³ ÙÙŠ ØºØ±Ø§ÙØ§Ù†Ø§</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„ØªØ³Ø§Ù…Ø­ Ù…Ø¹ Ø§Ù„Ø®Ø·Ø£</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬Ø§Øª</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹</a> <br><a name="habracut"></a><br><a name="1"></a><h2 style=";text-align:right;direction:rtl">  ØªØ«Ø¨ÙŠØª Kubernetes </h2><br>  <i>Ù„ÙŠØ³Øª Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠ Ù„ÙŠÙ†ÙƒØ³ ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">minikube</a></i> <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø³Ø·Ø­ Ù…ÙƒØªØ¨ Ø¹Ø§Ù…Ù„ Ù…ÙŠÙ†Ø§Ø¡ </li><li style=";text-align:right;direction:rtl">  ÙÙŠ Ø°Ù„Ùƒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØªÙ…ÙƒÙŠÙ† ÙƒØªÙ„Ø© Kubernetes Ø¹Ù‚Ø¯Ø© ÙˆØ§Ø­Ø¯Ø© <br><img src="https://habrastorage.org/webt/zc/ij/zs/zcijzspy007dfz7ilba9xhv3mg0.png"></li><li style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† Ù„Ø¯ÙŠÙƒ api <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http: // localhost: 8001 /</a> Ù„Ù„Ø¹Ù…Ù„ Ù…Ø¹ kubernetis </li><li style=";text-align:right;direction:rtl"> Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù‡ ÙŠØ­Ø¯Ø« Ù…Ù† Ø®Ù„Ø§Ù„ kubectl ÙØ§Ø¦Ø¯Ø© Ù…Ø±ÙŠØ­Ø© <br>  ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥ØµØ¯Ø§Ø±Ù‡ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ù…Ø±&gt; <code>kubectl version</code> <br>  Ø¢Ø®Ø± Ù…Ø§ Ù‡Ùˆ Ù…ÙƒØªÙˆØ¨ Ù‡Ù†Ø§ Ù‡Ùˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://storage.googleapis.com/kubernetes-release/release/stable.txt</a> <br>  ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†Ø²ÙŠÙ„Ù‡ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ <a href="">https://storage.googleapis.com/kubernetes-release/release/v1.13.2/bin/windows/amd64/kubectl.exe</a> </li><li style=";text-align:right;direction:rtl">  <code>kubectl cluster-info</code> Ø£Ù† Ø§Ù„ÙƒØªÙ„Ø© ØªØ¹Ù…Ù„&gt; <code>kubectl cluster-info</code> </li></ol><br><a name="2"></a><h2 style=";text-align:right;direction:rtl">  ØªØ±ÙƒÙŠØ¨ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… </h2><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ÙŠØªÙ… Ù†Ø´Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙƒØªÙ„Ø© <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">kubectl create -f https://raw.githubusercontent.com/kubernetes/dashboard/master/aio/deploy/recommended/kubernetes-dashboard.yaml</code> </pre> </li><li style=";text-align:right;direction:rtl">  Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø±Ù…Ø² Ù…Ù…ÙŠØ² Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© <pre style=";text-align:right;direction:rtl"> <code class="bash hljs">kubectl describe secret</code> </pre> <br>  ÙˆÙ†Ø³Ø®Ø© <br><img src="https://habrastorage.org/webt/9q/kl/fa/9qklfaacfs9863l1s5cy7nnz1-k.png"></li><li style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙˆÙƒÙŠÙ„ <pre style=";text-align:right;direction:rtl"> <code class="bash hljs">kubectl proxy</code> </pre> </li><li style=";text-align:right;direction:rtl">  ÙˆÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=http://localhost:8001/api/v1/namespaces/kube-system/services/">http: // localhost: 8001 / api / v1 / Ù…Ø³Ø§Ø­Ø§Øª Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ / kube-system / services / https: kubernetes-dashboard: / proxy /</a> <img src="https://habrastorage.org/webt/-w/si/i1/-wsii1ckz09obhzqxwsf25yauvm.png"></li></ol><br><br><a name="3"></a><h2 style=";text-align:right;direction:rtl">  ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ÙÙŠ ÙƒØªÙ„Ø© </h2><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ù„Ù‚Ø¯ ØªÙ‚Ø¯Ù…Øª Ø¨Ø·Ù„Ø¨ mc netcoreapp2.1 Ù‚ÙŠØ§Ø³ÙŠ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/SanSYS/kuberfirst</a> </li><li style=";text-align:right;direction:rtl">  Dockerfile: <pre style=";text-align:right;direction:rtl"> <code class="actionscript hljs">FROM microsoft/dotnet:<span class="hljs-number"><span class="hljs-number">2.1</span></span>-aspnetcore-runtime AS base WORKDIR /app EXPOSE <span class="hljs-number"><span class="hljs-number">80</span></span> FROM microsoft/dotnet:<span class="hljs-number"><span class="hljs-number">2.1</span></span>-sdk AS build WORKDIR /src COPY ./MetricsDemo.csproj . RUN ls RUN dotnet restore <span class="hljs-string"><span class="hljs-string">"MetricsDemo.csproj"</span></span> COPY . . RUN dotnet build <span class="hljs-string"><span class="hljs-string">"MetricsDemo.csproj"</span></span> -c Release -o /app FROM build AS publish RUN dotnet publish <span class="hljs-string"><span class="hljs-string">"MetricsDemo.csproj"</span></span> -c Release -o /app FROM base AS <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> WORKDIR /app COPY --from=publish /app . ENTRYPOINT [<span class="hljs-string"><span class="hljs-string">"dotnet"</span></span>, <span class="hljs-string"><span class="hljs-string">"MetricsDemo.dll"</span></span>]</code> </pre> </li><li style=";text-align:right;direction:rtl">  Ø¬Ù…Ø¹Øª Ù‡Ø°Ø§ Ø§Ù„Ø´ÙŠØ¡ Ù…Ø¹ Ø¹Ù„Ø§Ù…Ø© metricsdemo3 <pre style=";text-align:right;direction:rtl"> <code class="bash hljs">docker build -t metricsdemo3 .</code> </pre> </li><li style=";text-align:right;direction:rtl">  Ù„ÙƒÙ†!  ÙŠÙ‚ÙˆÙ… Coober Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§ Ø¨Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ± Ù…Ù† Ø§Ù„Ù…Ø­ÙˆØ± ØŒ Ù„Ø°Ù„Ùƒ Ø£Ø±ÙØ¹ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ù„ÙŠ </li><li style=";text-align:right;direction:rtl">  Ù…Ù„Ø§Ø­Ø¸Ø© - Ù„Ù… ÙŠØ­Ø§ÙˆÙ„ ØªØ´ØºÙŠÙ„ ÙÙŠ kubernetis <pre style=";text-align:right;direction:rtl"> <code class="bash hljs">docker create -p 5000:5000 --restart always --name registry registry:2</code> </pre></li><li style=";text-align:right;direction:rtl">  ÙˆØ£Ù†Ø§ Ø£ØµÙ Ø°Ù„Ùƒ Ø¨Ø£Ù†Ù‡ ØºÙŠØ± Ø¢Ù…Ù†: <br><img src="https://habrastorage.org/webt/0e/h3/5e/0eh35ewv6frgqwrwaqddcriqhpu.png"><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"registry-mirrors"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"insecure-registries"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"localhost:5000"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"debug"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"experimental"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> </li><li style=";text-align:right;direction:rtl">  Ù‚Ø¨Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„ ØŒ Ù„ÙØªØ§Øª Ø£ÙƒØ«Ø± <pre style=";text-align:right;direction:rtl"> <code class="bash hljs">docker start registry docker tag metricsdemo3 localhost:5000/sansys/metricsdemo3 docker push localhost:5000/sansys/metricsdemo3</code> </pre> </li><li style=";text-align:right;direction:rtl">  Ø³ÙŠØ¨Ø¯Ùˆ Ø´ÙŠØ¡ Ù…Ø«Ù„ Ù‡Ø°Ø§: <br><img src="https://habrastorage.org/webt/ep/6i/5o/ep6i5ofhvqdr8cokxqbidrqisvk.png"></li><li style=";text-align:right;direction:rtl"><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø¥Ø·Ù„Ø§Ù‚ Ø¹Ø¨Ø± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tv/oa/ed/tvoaedah5gqbrqftpcxjdlwrkpi.png"><br></div></div></li></ol><br><br><h4 style=";text-align:right;direction:rtl">  Ø¥Ø°Ø§ Ø¨Ø¯Ø£ ØŒ ÙÙƒÙ„ Ø´ÙŠØ¡ Ø¹Ù„Ù‰ Ù…Ø§ ÙŠØ±Ø§Ù… ÙˆÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ </h4><br>  Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ù†Ø´Ø± <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">1-Ù†Ø´Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚. yaml</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">kind: Deployment apiVersion: apps/v1 metadata: name: metricsdemo labels: app: web spec: replicas: 2 <span class="hljs-comment"><span class="hljs-comment">#    (  ) #  ,      selector: matchLabels: app: metricsdemo template: metadata: labels: app: metricsdemo #     selector  kind: Service spec: containers: - name: metricsdemo #   image: localhost:5000/sansys/metricsdemo3 #    ports: - containerPort: 80 #       # :    ,       --- kind: Service apiVersion: v1 metadata: name: metricsdemo #    __meta_kubernetes_service_name="metricsdemo",  https://prometheus.io/docs/prometheus/latest/configuration/configuration/#kubernetes_sd_config labels: apptype: business #    __meta_kubernetes_service_label_apptype="business" -  instancetype: web #    __meta_kubernetes_service_label_instancetype="web" spec: selector: app: metricsdemo #    labels:app type: LoadBalancer #      ports: - protocol: TCP #    _meta_kubernetes_service_port_protocol="TCP" port: 9376 targetPort: 80 name: portapi #    __meta_kubernetes_service_port_name="portapi"</span></span></code> </pre> </div></div><br>  ÙˆØµÙ ØµØºÙŠØ± <ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ø§Ù„Ù†ÙˆØ¹ - ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„ÙƒÙŠØ§Ù† Ø§Ù„Ù…ÙˆØ¶Ø­ Ù…Ù† Ø®Ù„Ø§Ù„ Ù…Ù„Ù yaml </li><li style=";text-align:right;direction:rtl">  apiVersion - Ù…Ø§ api ÙŠØªÙ… Ù†Ù‚Ù„ Ø§Ù„ÙƒØ§Ø¦Ù† Ø¥Ù„Ù‰ </li><li style=";text-align:right;direction:rtl">  Ø§Ù„ØªØ³Ù…ÙŠØ§Øª - ØªØ³Ù…ÙŠØ§Øª ÙÙ‚Ø· ÙÙ‚Ø· (ÙŠÙ…ÙƒÙ† Ø£Ù† ØªÙÙƒØ± Ù…ÙØ§ØªÙŠØ­ Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± ÙˆØ§Ù„Ù‚ÙŠÙ… Ù…Ù† Ù‚Ø¨Ù„ Ù†ÙØ³Ùƒ) </li><li style=";text-align:right;direction:rtl">  Ù…Ø­Ø¯Ø¯ - ÙŠØ³Ù…Ø­ Ù„Ùƒ Ø¨Ø±Ø¨Ø· Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ù…Ø¹ Ø§Ù„Ù†Ø´Ø± ØŒ Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªØ³Ù…ÙŠØ§Øª </li></ul><br>  Ø§Ù„ØªØ§Ù„ÙŠ: <pre style=";text-align:right;direction:rtl"> <code class="bash hljs">kubectl create -f .\1-deployment-app.yaml</code> </pre><br>  ÙˆØ³ØªØ±Ù‰ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=http://localhost:8001/api/v1/namespaces/kube-system/services/">Ø§Ù„Ù†Ø´Ø±</a> ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=http://localhost:8001/api/v1/namespaces/kube-system/services/">http: // localhost: 8001 / api / v1 / Ù…Ø³Ø§Ø­Ø§Øª Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ / kube-system / services / https: kubernetes-dashboard: / proxy / #! / DeploymentØŸ Namespace = default</a> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø§Ù„Ø´Ø§Ø´Ø©</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/8c/sp/gj/8cspgj27ws9tcjd-6euq5s3djig.png"></div></div><br>  ÙŠÙˆØ¬Ø¯ Ø¯Ø§Ø®Ù„Ù‡Ø§ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù…ØªÙ…Ø§Ø«Ù„Ø© ØŒ ÙˆØ§Ù„ØªÙŠ ØªØ¨ÙŠÙ† Ø£Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ù…Ù„ ÙÙŠ Ø­Ø§Ù„ØªÙŠÙ† (Pods) ÙˆÙ‡Ù†Ø§Ùƒ Ø®Ø¯Ù…Ø© ÙˆØ§Ø­Ø¯Ø© Ø°Ø§Øª ØµÙ„Ø© Ø¨Ù‡Ø§ Ø¹Ù†ÙˆØ§Ù† Ù…Ù† Ø§Ù„Ø®Ø§Ø±Ø¬ Ù„ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¯Ø¨Ù„Ø¬ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ù„Ù‚Ø·Ø§Øª</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/zl/ix/tl/zlixtl8tehddvrk36ykdfx6hd48.png"><br><img src="https://habrastorage.org/webt/5u/kq/cx/5ukqcxek-nslcezxse0dqot_cym.png"><br></div></div><br><a name="4"></a><h2 style=";text-align:right;direction:rtl">  Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø§ÙŠÙŠØ³ Ù…Ø®ØµØµØ© Ø¥Ù„Ù‰ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ </h2><br>  Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø²Ù…Ø© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://www.app-metrics.io/ Ø¥Ù„Ù‰</a> Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ <br>  Ù„Ù† Ø£ØµÙ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ ÙƒÙŠÙ Ø³Ø£Ø¶ÙŠÙÙ‡Ù… ØŒ Ù„ÙØªØ±Ø© ÙˆØ¬ÙŠØ²Ø© Ø§Ù„Ø¢Ù† - Ø£Ø³Ø¬Ù„ Ø§Ù„ÙˆØ³ÙŠØ·Ø© Ù„Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø¥Ù„Ù‰ Ø£Ø³Ø§Ù„ÙŠØ¨ api <div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ù‡Ù†Ø§ Ø§Ù„ÙˆØ³ÙŠØ·Ø©</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AutoDiscoverRoutes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HttpContext context</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (context.Request.Path.Value == <span class="hljs-string"><span class="hljs-string">"/favicon.ico"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; keys = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; vals = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> routeData = context.GetRouteData(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (routeData != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { keys.AddRange(routeData.Values.Keys); vals.AddRange(routeData.Values.Values.Select(p =&gt; p.ToString())); } keys.Add(<span class="hljs-string"><span class="hljs-string">"method"</span></span>); vals.Add(context.Request.Method); keys.Add(<span class="hljs-string"><span class="hljs-string">"response"</span></span>); vals.Add(context.Response.StatusCode.ToString()); keys.Add(<span class="hljs-string"><span class="hljs-string">"url"</span></span>); vals.Add(context.Request.Path.Value); Program.Metrics.Measure.Counter.Increment(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CounterOptions { Name = <span class="hljs-string"><span class="hljs-string">"api"</span></span>, <span class="hljs-comment"><span class="hljs-comment">//ResetOnReporting = true, // ,     MeasurementUnit = Unit.Calls, Tags = new MetricTags(keys.ToArray(), vals.ToArray()) }); }</span></span></code> </pre></div></div><br>  ÙˆØ§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„ØªÙŠ ØªÙ… Ø¬Ù…Ø¹Ù‡Ø§ Ù…ØªÙˆÙØ±Ø© ÙÙŠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http: // localhost: 9376 / metrics</a> <br><br><img src="https://habrastorage.org/webt/yc/-h/9n/yc-h9ndhal2nj4kgeablgor4oba.png"><br><br>  * ÙŠÙ…ÙƒÙ† ØªØ³Ø¬ÙŠÙ„ IMetricRoot Ø£Ùˆ ØªØ¬Ø±ÙŠØ¯Ù‡ Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ( <i>services.AddMetrics (Program.Metrics) Ø›</i> ) <br><br><a name="5"></a><h2 style=";text-align:right;direction:rtl">  Ø¬Ù…Ø¹ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª Ù…Ù† Ø®Ù„Ø§Ù„ Ø¨Ø±ÙˆÙ…ÙŠØ«ÙŠÙˆØ³ </h2><br>  Ø£Ø¨Ø³Ø· Ø¨Ø±ÙˆÙ…ÙŠØ«ÙŠÙˆØ³ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯: Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ© Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø®Ø§Øµ Ø¨Ù‡ (prometheus.yml) ÙˆØ¥Ø·Ø¹Ø§Ù…Ù‡Ø§ Ù‡Ø¯Ù Ø¬Ø¯ÙŠØ¯: <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">global: scrape_interval: 15s evaluation_interval: 15s rule_files: <span class="hljs-comment"><span class="hljs-comment"># - "first.rules" # - "second.rules" scrape_configs: - job_name: prometheus static_configs: - targets: ['localhost:9090', '__:']</span></span></code> </pre> <br>  ÙˆÙ„ÙƒÙ† Ù„Ø¯Ù‰ Ø¨Ø±ÙˆÙ…ÙŠØ«ÙŠÙˆØ³ Ø¯Ø¹Ù… Ù…Ø­Ù„ÙŠ Ù„Ø¬Ù…Ø¹ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³ Ù…Ù† kubernetis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://prometheus.io/docs/prometheus/latest/configuration/configuration/#kubernetes_sd_config</a> <br>  Ø£Ø±ØºØ¨ ÙÙŠ Ù…Ø±Ø§Ù‚Ø¨Ø© ÙƒÙ„ Ø®Ø¯Ù…Ø© Ø¹Ù„Ù‰ Ø­Ø¯Ø© Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: Ø¹Ù„Ø§Ù…Ø© ØªØ¬Ø§Ø±ÙŠØ© <br>  Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø±ØµÙŠÙ ØŒ ØªÙƒÙˆÙ† Ø§Ù„Ù…Ù‡Ù…Ø© ÙƒÙ…Ø§ ÙŠÙ„ÙŠ: <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">- job_name: business-metrics <span class="hljs-comment"><span class="hljs-comment">#     metrics_path: /metrics kubernetes_sd_configs: - role: endpoints #   .   service,pod,ingress static_configs: - targets: - localhost:9090 relabel_configs: #       default   c  apptype = business - action: keep regex: default;business source_labels: - __meta_kubernetes_namespace - __meta_kubernetes_service_label_apptype</span></span></code> </pre> <br>  ÙÙŠ kubernetis Ù‡Ù†Ø§Ùƒ Ù…ÙƒØ§Ù† Ø®Ø§Øµ Ù„ØªØ®Ø²ÙŠÙ† Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ConfigMap</a> <br>  Ø£Ù†Ø§ Ø§Ø­ÙØ¸ Ù‡Ø°Ø§ Ø§Ù„ØªÙƒÙˆÙŠÙ† Ù‡Ù†Ø§Ùƒ: <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">2-Ø¨Ø±ÙˆÙ…ÙŠØ«ÙŠÙˆØ³-configmap.yaml</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">apiVersion: v1 kind: ConfigMap <span class="hljs-comment"><span class="hljs-comment">#  ,   metadata: name: prometheus-config #  - namespace: default labels: kubernetes.io/cluster-service: "true" addonmanager.kubernetes.io/mode: EnsureExists data: #     prometheus.yml: | global: scrape_interval: 5s # Default is every 1 minute. evaluation_interval: 5s # The default is every 1 minute. scrape_configs: - job_name: prometheus static_configs: - targets: - localhost:9090 - job_name: business-metrics #     metrics_path: /metrics kubernetes_sd_configs: - role: endpoints #   .   service,pod,ingress static_configs: - targets: - localhost:9090 relabel_configs: #       default   c  apptype = business - action: keep regex: default;business source_labels: - __meta_kubernetes_namespace - __meta_kubernetes_service_label_apptype</span></span></code> </pre></div></div><br>  Ø±Ø­ÙŠÙ„ Ø¥Ù„Ù‰ kubernetis <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">kubectl create -f .\2-prometheus-configmap.yaml</code> </pre> <br>  Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ù†Ø´Ø± prometheus Ù…Ø¹ Ù…Ù„Ù Ø§Ù„ØªÙƒÙˆÙŠÙ† Ù‡Ø°Ø§ <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">kubectl Ø¥Ù†Ø´Ø§Ø¡ -f. \ 3-Ø§Ù„Ø§Ù†ØªØ´Ø§Ø±-prometheus.yaml</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">apiVersion: extensions/v1beta1 kind: Deployment metadata: name: prometheus namespace: default spec: replicas: 1 template: metadata: labels: app: prometheus-server spec: containers: - name: prometheus image: prom/prometheus args: - <span class="hljs-string"><span class="hljs-string">"--config.file=/etc/config/prometheus.yml"</span></span> - <span class="hljs-string"><span class="hljs-string">"--web.enable-lifecycle"</span></span> ports: - containerPort: 9090 volumeMounts: - name: prometheus-config-volume <span class="hljs-comment"><span class="hljs-comment">#    mountPath: /etc/config/ #     volumes: - name: prometheus-config-volume #     configMap: defaultMode: 420 name: prometheus-config #  - --- kind: Service apiVersion: v1 metadata: name: prometheus spec: selector: app: prometheus-server #    labels:app type: LoadBalancer #      ports: - protocol: TCP port: 9090 targetPort: 9090</span></span></code> </pre></div></div><br>  Ø§Ù†ØªØ¨Ù‡ - Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…Ù„Ù prometheus.yml ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† <br>  Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙŠ ØªÙ… ØªØ­Ø¯ÙŠØ¯Ù‡Ø§ ÙÙŠ Ø§Ù„Ø®Ø±ÙŠØ·Ø© config ØªØµØ¨Ø­ Ù…Ù„ÙØ§Øª ÙÙŠ Ù‚Ø³Ù… prometheus-config-volume ØŒ ÙˆØ§Ù„ØªÙŠ ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¯Ù„ÙŠÙ„ / etc / config / <br>  Ø£ÙŠØ¶Ø§ ØŒ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ù„Ø¯ÙŠÙ‡ ÙˆØ³ÙŠØ·Ø§Øª Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø³Ø§Ø± Ø¥Ù„Ù‰ Ø§Ù„ØªÙƒÙˆÙŠÙ† <br>  --web.enable-lifecycle - ÙŠÙ‚ÙˆÙ„ Ø£Ù†Ù‡ ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø­Ø¨ POST / - / Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ ØŒ ÙˆØ§Ù„ØªÙŠ Ø³ØªØ·Ø¨Ù‚ Ø§Ù„ØªÙƒÙˆÙŠÙ†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Ù…ÙÙŠØ¯Ø© Ø¥Ø°Ø§ ØªØºÙŠØ± Ø§Ù„ØªÙƒÙˆÙŠÙ† "Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§ÙŠØ±" ÙˆÙ„Ø§ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ø§ÙˆÙŠØ©) <br><br>  Ù†Ø´Ø± ÙØ¹Ù„Ø§ <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">kubectl create -f .\3-deployment-prometheus.yaml</code> </pre> <br>  Ø§ØªØ¨Ø¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØµØºÙŠØ±Ø© ÙˆØ§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http: // localhost: 9090 / Ø£Ù‡Ø¯Ø§Ù</a> ØŒ ÙŠØ¬Ø¨ Ø£Ù† ØªØ´Ø§Ù‡Ø¯ Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ù„Ø®Ø¯Ù…ØªÙƒ Ù‡Ù†Ø§Ùƒ <br><br><img src="https://habrastorage.org/webt/sz/vw/vg/szvwvg5evcq_gfbusz56mx1k-se.png"><br><br>  ÙˆÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¥Ù„Ù‰ Ø¨Ø±ÙˆÙ…ÙŠØ«ÙŠÙˆØ³ <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sum by (response, action, url, app) (delta(application_api[15s]))</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø´Ø±ÙŠØ·Ø© Ø£Ù† ÙŠÙ‚ÙˆÙ… Ø´Ø®Øµ Ù…Ø§ Ø¨Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØŒ ÙØ³ÙˆÙ ÙŠØªØ­ÙˆÙ„ Ù…Ø«Ù„ Ù‡Ø°Ø§</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/pq/gl/ss/pqglssktt2mud6b2i1nltnqptou.png"><br></div></div><br>  Ù„ØºØ© Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://prometheus.io/docs/prometheus/latest/querying/basics/</a> <br><br><a name="6"></a><h2 style=";text-align:right;direction:rtl">  Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³ ÙÙŠ ØºØ±Ø§ÙØ§Ù†Ø§ </h2><br>  ÙƒÙ†Ø§ Ù…Ø­Ø¸ÙˆØ¸ÙŠÙ† - Ø­ØªÙ‰ Ø§Ù„Ø¥ØµØ¯Ø§Ø± 5 ØŒ ÙŠÙ…ÙƒÙ† ÙÙ‚Ø· ØªÙ‡ÙŠØ¦Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø®Ù„Ø§Ù„ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª HTTP ØŒ ÙˆÙ„ÙƒÙ† Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ù†ÙØ³ Ø§Ù„Ø®Ø¯Ø¹Ø© ÙƒÙ…Ø§ Ù‡Ùˆ Ø§Ù„Ø­Ø§Ù„ Ù…Ø¹ Prometeus <br>  ÙŠÙ…ÙƒÙ† Ù„Ù€ Grafana Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø³Ø­Ø¨ Ù…Ø§ ÙŠØµÙ„ Ø¥Ù„Ù‰</a> Ù…ØµØ¯Ø± Ø¨ÙŠØ§Ù†Ø§Øª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„ØªÙƒÙˆÙŠÙ†Ø§Øª</a> ÙˆÙ„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>/etc/grafana/provisioning/datasources/</code> - Ø§Ù„ØªÙƒÙˆÙŠÙ†Ø§Øª Ø§Ù„Ù…ØµØ¯Ø± (Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ prometeus ØŒ postgres ØŒ zabbiks ØŒ Ù…Ø±Ù†Ø© ØŒ ÙˆÙ…Ø§ Ø¥Ù„Ù‰ Ø°Ù„Ùƒ) </li><li style=";text-align:right;direction:rtl">  <code>/etc/grafana/provisioning/dashboards/</code> - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ <code>/etc/grafana/provisioning/dashboards/</code> </li><li style=";text-align:right;direction:rtl">  <code>/var/lib/grafana/dashboards/</code> - Ù‡Ù†Ø§ Ø³Ø£Ù‚ÙˆÙ… Ø¨ØªØ®Ø²ÙŠÙ† Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø£Ù†ÙØ³Ù‡Ù… ÙÙŠ Ø´ÙƒÙ„ Ù…Ù„ÙØ§Øª json </li></ol><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø§ØªØ¶Ø­ Ù…Ø«Ù„ Ù‡Ø°Ø§</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">apiVersion: v1 kind: ConfigMap metadata: creationTimestamp: null name: grafana-provisioning-datasources namespace: default data: all.yml: | datasources: - name: <span class="hljs-string"><span class="hljs-string">'Prometheus'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: <span class="hljs-string"><span class="hljs-string">'prometheus'</span></span> access: <span class="hljs-string"><span class="hljs-string">'proxy'</span></span> org_id: 1 url: <span class="hljs-string"><span class="hljs-string">'http://prometheus:9090'</span></span> is_default: <span class="hljs-literal"><span class="hljs-literal">true</span></span> version: 1 editable: <span class="hljs-literal"><span class="hljs-literal">true</span></span> --- apiVersion: v1 kind: ConfigMap metadata: creationTimestamp: null name: grafana-provisioning-dashboards namespace: default data: all.yml: | apiVersion: 1 providers: - name: <span class="hljs-string"><span class="hljs-string">'default'</span></span> orgId: 1 folder: <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: file disableDeletion: <span class="hljs-literal"><span class="hljs-literal">false</span></span> updateIntervalSeconds: 10 <span class="hljs-comment"><span class="hljs-comment">#how often Grafana will scan for changed dashboards options: path: /var/lib/grafana/dashboards --- apiVersion: v1 kind: ConfigMap metadata: creationTimestamp: null name: grafana-dashboards namespace: default data: service-http-requests.json: | { "annotations": { "list": [ { "builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations &amp; Alerts", "type": "dashboard" } ] }, "editable": true, "gnetId": null, "graphTooltip": 0, "links": [], "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "fill": 1, "gridPos": { "h": 9, "w": 12, "x": 0, "y": 0 }, "id": 2, "legend": { "alignAsTable": false, "avg": false, "current": false, "max": false, "min": false, "rightSide": true, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum by (response, action, url, app) (delta(application_api[15s]))", "format": "time_series", "interval": "15s", "intervalFactor": 1, "legendFormat": "{{app}} {{response}} - {{url}}", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Http requests", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } } ], "refresh": "5s", "schemaVersion": 16, "style": "dark", "tags": [], "templating": { "list": [] }, "time": { "from": "now-30m", "to": "now" }, "timepicker": { "refresh_intervals": [ "5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ], "time_options": [ "5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d" ] }, "timezone": "", "title": "Business metrics", "uid": "Dm0tD0Qik", "version": 1 }</span></span></code> </pre> </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ù†Ø´Ø± Ù†ÙØ³Ù‡Ø§ ØŒ Ù„Ø§ Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">apiVersion: extensions/v1beta1 kind: Deployment metadata: name: grafana namespace: default labels: app: grafana component: core spec: replicas: 1 template: metadata: labels: app: grafana component: core spec: containers: - image: grafana/grafana name: grafana imagePullPolicy: IfNotPresent resources: limits: cpu: 100m memory: 100Mi requests: cpu: 100m memory: 100Mi env: - name: GF_AUTH_BASIC_ENABLED value: <span class="hljs-string"><span class="hljs-string">"true"</span></span> - name: GF_AUTH_ANONYMOUS_ENABLED value: <span class="hljs-string"><span class="hljs-string">"true"</span></span> - name: GF_AUTH_ANONYMOUS_ORG_ROLE value: Admin readinessProbe: httpGet: path: /login port: 3000 <span class="hljs-comment"><span class="hljs-comment"># initialDelaySeconds: 30 # timeoutSeconds: 1 volumeMounts: - name: grafana-provisioning-datasources mountPath: /etc/grafana/provisioning/datasources/ - name: grafana-provisioning-dashboards mountPath: /etc/grafana/provisioning/dashboards/ - name: grafana-dashboards mountPath: /var/lib/grafana/dashboards/ volumes: - name: grafana-provisioning-datasources configMap: defaultMode: 420 name: grafana-provisioning-datasources - name: grafana-provisioning-dashboards configMap: defaultMode: 420 name: grafana-provisioning-dashboards - name: grafana-dashboards configMap: defaultMode: 420 name: grafana-dashboards nodeSelector: beta.kubernetes.io/os: linux --- apiVersion: v1 kind: Service metadata: name: grafana namespace: default labels: app: grafana component: core spec: type: LoadBalancer ports: - protocol: TCP port: 3000 targetPort: 3000 selector: app: grafana component: core</span></span></code> </pre> </div></div><br>  ØªÙˆØ³ÙŠØ¹ <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">kubectl create -f .\4-grafana-configmap.yaml kubectl create -f .\5-deployment-grafana.yaml</code> </pre> <br>  ØªØ°ÙƒØ± Ø£Ù† Ø§Ù„Ø¹Ù†Ø¨ Ù„Ø§ ÙŠØ±ØªÙØ¹ Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ± ØŒ Ø¨Ù„ Ù‡Ùˆ Ù…Ø¨Ù„Ù„ Ù‚Ù„ÙŠÙ„Ø§ Ù…Ù† Ø§Ù„Ù‡Ø¬Ø±Ø§Øª sqlite ØŒ ÙˆØ§Ù„ØªÙŠ ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=http://localhost:8001/api/v1/namespaces/kube-system/services/">ØªØ±Ù‰ ÙÙŠ Ø³Ø¬Ù„Ø§Øª</a> <br>  Ø§Ø°Ù‡Ø¨ Ø§Ù„Ø¢Ù† Ø¥Ù„Ù‰ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http: // localhost: 3000 /</a> <br>  ÙˆØ§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© <br><br><img src="https://habrastorage.org/webt/-s/qu/vp/-squvpxh7r3uxz75j3oripxch_8.png"><br><img src="https://habrastorage.org/webt/pl/yp/ze/plypzemdf5a1z0lpshu6uli3tyi.png"><br><br>  Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ±ØºØ¨ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø·Ø±ÙŠÙ‚Ø© Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯Ø© Ø£Ùˆ ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø¹Ø±Ø¶ Ø­Ø§Ù„ÙŠØ© - Ù‚Ù… Ø¨ØªØºÙŠÙŠØ±Ù‡Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ØŒ Ø«Ù… Ø§Ù†Ù‚Ø± ÙÙˆÙ‚ Ø­ÙØ¸ ØŒ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ù†Ø§ÙØ°Ø© Ù…Ø´Ø±ÙˆØ·Ø© Ù…Ø¹ json ØŒ ÙˆØ§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ† <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ÙŠØªÙ… Ù†Ø´Ø± ÙƒÙ„ Ø´ÙŠØ¡ ÙˆÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø±Ø§Ø¦Ø¹</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/go/id/tl/goidtlbneravv92p6g-4mkeonro.png"></div></div><br><a name="7"></a><h2 style=";text-align:right;direction:rtl">  Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø© </h2><br>  Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„ØªØ§Ø¬ ÙÙŠ cuber ØŒ Ù‡Ù†Ø§Ùƒ Ù…ÙÙ‡ÙˆÙ… CronJob <br>  Ù…Ø¹ CronJob ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹ÙŠÙŠÙ† Ø¬Ø¯ÙˆÙ„ Ø²Ù…Ù†ÙŠ Ù„Ø£ÙŠ Ù…Ù‡Ù…Ø© ØŒ Ø£Ø¨Ø³Ø· Ù…Ø«Ø§Ù„: <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># https://kubernetes.io/docs/tasks/job/automated-tasks-with-cron-jobs/ apiVersion: batch/v1beta1 kind: CronJob metadata: name: runapijob spec: schedule: "*/1 * * * *" jobTemplate: spec: template: spec: containers: - name: runapijob image: busybox args: - /bin/sh - -c - date; wget -O - http://metricsdemo:9376/api/job/run/wakeUp &gt; /dev/null restartPolicy: OnFailure</span></span></code> </pre> <br>  Ù‚Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ ÙŠØ­Ø¯Ø¯ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ© Ù„Ù„ØªØ§Ø¬ <br>  ÙŠØ¨Ø¯Ø£ Ø§Ù„Ù…Ø´ØºÙ„ Ù‚Ø±Ù†Ø© Ø§Ù„Ø­Ø§ÙˆÙŠØ© (busybox) Ø§Ù„ØªÙŠ Ø£Ø³Ø­Ø¨ ÙÙŠÙ‡Ø§ Ø·Ø±ÙŠÙ‚Ø© api Ù„Ø®Ø¯Ù…Ø© metricsdemo <br>  ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ù…Ø± Ù„ØªØªØ¨Ø¹ Ø§Ù„Ù…Ù‡Ù…Ø©. <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">kubectl.exe get cronjob runapijob --watch</code> </pre> <br><img src="https://habrastorage.org/webt/vt/1y/9v/vt1y9vjfhpygkk3xzokbywcbvnc.png"><br><br>  ÙŠØªÙ… Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ†Ø·Ù„Ù‚ Ù…Ù† Ø§Ù„ÙˆØ¸ÙŠÙØ© ÙÙŠ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø­Ø§Ù„Ø§Øª ØŒ Ù„Ø£Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø¯Ù…Ø© ÙŠØ°Ù‡Ø¨ Ø¥Ù„Ù‰ Ø£Ø­Ø¯ Ø§Ù„Ù…ÙˆÙ‚Ø¯ Ù…Ø¹ Ø§Ù†ØªØ´Ø§Ø± Ù…Ù†ØªØ¸Ù… ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ÙƒÙŠÙ ÙŠØ¨Ø¯Ùˆ ÙÙŠ Ø¨Ø±ÙˆÙ…ÙŠØ«ÙŠÙˆØ³</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/hu/v2/tt/huv2ttrdtjee5ddvgxyk4ucwkou.png"></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ù…Ù† Ø£Ø¬Ù„ ØªØµØ­ÙŠØ­ Ø§Ù„Ù…Ù‡Ù…Ø© ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠÙ‹Ø§</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ev/k2/c7/evk2c7bl5zdr4gdqf1jcwvddu_w.png"></div></div><br>  Ø¹Ø±Ø¶ ØªÙˆØ¶ÙŠØ­ÙŠ ØµØºÙŠØ± Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ Ù„Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ï€ ØŒ Ø­ÙˆÙ„ Ø§Ù„ÙØ±Ù‚ ÙÙŠ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ Ù…Ù† ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ… <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,       -      kubectl run pi --image=perl -- perl -Mbignum=bpi -wle 'print bpi(2000)' #   . , ,  .   -   kubectl run pi --image=perl --restart=OnFailure -- perl -Mbignum=bpi -wle 'print bpi(2000)' #    5  kubectl run pi --image=perl --restart=OnFailure --schedule="0/5 * * * ?" -- perl -Mbignum=bpi -wle 'print bpi(2000)'</span></span></code> </pre> <br><br><a name="8"></a><h2 style=";text-align:right;direction:rtl">  Ø®Ø·Ø£ Ø§Ù„ØªØ³Ø§Ù…Ø­ </h2><br>  Ø¥Ø°Ø§ ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ ØŒ ØªØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© <br>  Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ Ù„Ù‚Ø¯ ØªÙ‚Ø¯Ù…Øª Ø¨Ø·Ø±ÙŠÙ‚Ø© ØªØ³Ù‚Ø· api <br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">HttpGet(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"kill/me"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Kill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(<span class="hljs-string"><span class="hljs-string">"Selfkill"</span></span>); }</code> </pre> <br>  <i>* Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ø°ÙŠ Ø­Ø¯Ø« ÙÙŠ api ÙÙŠ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ÙØ±Ø§Øº ØºÙŠØ± Ø§Ù„Ù…ØªØ²Ø§Ù…Ù† ÙŠØ¹ØªØ¨Ø± Ø§Ø³ØªØ«Ù†Ø§Ø¡ ØºÙŠØ± Ù…Ø¹Ø§Ù„ÙØ¬ ØŒ ÙˆØ§Ù„Ø°ÙŠ ÙŠØ¹Ø·Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</i> <br><br>  Ø£Ù†Ø§Ø´Ø¯ Ù†Ø¯Ø§Ø¡ Ø¥Ù„Ù‰ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http: // localhost: 9376 / api / job / kill / me</a> <br>  ØªØ¸Ù‡Ø± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¯ Ø£Ù†Ù‡ Ù‚Ø¯ ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø£Ø­Ø¯ Ù…Ø¢Ø®Ø° Ø§Ù„Ø®Ø¯Ù…Ø© <br><br><img src="https://habrastorage.org/webt/f9/qr/t3/f9qrt3v1y1oo1ks2bucvt5tarvi.png"><br><br>  ÙŠØ¹Ø±Ø¶ Ø£Ù…Ø± Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØŒ ÙˆØ¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®ÙŠØ§Ø± -p Ø³ÙŠØ¹Ø±Ø¶ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ø«ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚.  Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø¹Ø±ÙØ© Ø³Ø¨Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„. <br><br>  Ø£Ø¹ØªÙ‚Ø¯ Ø¨Ø³Ù‚ÙˆØ· Ø¨Ø³ÙŠØ· ØŒ ÙƒÙ„ Ø´ÙŠØ¡ ÙˆØ§Ø¶Ø­: Ø³Ù‚Ø· - ÙˆØ±Ø¯Ø© <br><br>  Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¨Ø§Ø´Ø±Ù‹Ø§ Ø¹Ù„Ù‰ Ù†Ø­Ùˆ Ù…Ø´Ø±ÙˆØ· ØŒ Ø£ÙŠ  Ù„Ø§ ØªØ³Ù‚Ø· ØŒ ÙˆÙ„ÙƒÙ† Ù„Ø§ ØªÙØ¹Ù„ Ø£ÙŠ Ø´ÙŠØ¡ ØŒ Ø£Ùˆ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø¹Ù…Ù„Ù‡ ØŒ ÙˆÙ„ÙƒÙ† Ø¨Ø¨Ø·Ø¡ <br><br>  ÙˆÙÙ‚Ù‹Ø§ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù„Ù„ÙˆØ«Ø§Ø¦Ù‚ ØŒ</a> Ù‡Ù†Ø§Ùƒ Ù†ÙˆØ¹Ø§Ù† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù…Ù† Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª "Ø§Ù„Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ Ù‚ÙŠØ¯ Ø§Ù„Ø­ÙŠØ§Ø©" Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ø³Ù†ÙØ§Øª <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ - ÙŠØ³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„ØªØ­Ù‚Ù‚ Ù„ÙÙ‡Ù… Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ù† Ø§Ù„Ù…Ù…ÙƒÙ† Ø¨Ø¯Ø¡ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù.  Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ø§Ù„Ø£Ù…Ø± ÙƒØ°Ù„Ùƒ ØŒ ÙŠØªÙ… ØªØ­Ø±ÙŠØ± Ø§Ù„Ø¬Ø±Ø§Ø¨ Ø­ØªÙ‰ ÙŠØ¹ÙˆØ¯ Ø¥Ù„Ù‰ Ø·Ø¨ÙŠØ¹ØªÙ‡. <br></li><li style=";text-align:right;direction:rtl">  Ø­ÙŠÙˆÙŠØ© - Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ "Ù…Ù† Ø£Ø¬Ù„ Ø§Ù„Ø¨Ù‚Ø§Ø¡".  Ø¹Ù„Ù‰ ÙˆØ¬Ù‡ Ø§Ù„Ø®ØµÙˆØµ ØŒ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…ÙˆØ±Ø¯ Ø­ÙŠÙˆÙŠ Ø£Ùˆ Ø¥Ø°Ø§ Ù„Ù… ÙŠØ³ØªØ¬Ø¨ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ (Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ Ø­Ø§Ù„Ø© ØªÙˆÙ‚Ù ØªØ§Ù… ÙˆØ¨Ø§Ù„ØªØ§Ù„ÙŠ Ù…Ù‡Ù„Ø©) ØŒ ÙØ³ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ø§ÙˆÙŠØ©.  Ø¬Ù…ÙŠØ¹ Ø±Ù…ÙˆØ² Ø§Ù„Ù…ØªØ´Ø¹Ø¨ Ø¨ÙŠÙ† 200 Ùˆ 400 ØªØ¹ØªØ¨Ø± Ù†Ø§Ø¬Ø­Ø© ØŒ ÙˆØ§Ù„Ø¨Ø§Ù‚ÙŠ ØªÙØ´Ù„ <br></li></ol><br>  Ø³ÙˆÙ Ø£ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¨Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‡Ù„Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© ØŒ Ù„Ø°Ù„Ùƒ Ø³Ø£Ø¶ÙŠÙ Ø·Ø±ÙŠÙ‚Ø© api Ø¬Ø¯ÙŠØ¯Ø© ØŒ ÙˆØ§Ù„ØªÙŠ ÙˆÙÙ‚Ù‹Ø§ Ù„Ø£Ù…Ø± Ù…Ø¹ÙŠÙ† Ø³ØªØ¨Ø¯Ø£ ÙÙŠ Ø¥Ø¨Ø·Ø§Ø¡ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ù‚Ø§Ø¡ Ù„Ù…Ø¯Ø© 123 Ø«Ø§Ù†ÙŠØ© <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> deadlock; [HttpGet(<span class="hljs-string"><span class="hljs-string">"alive/{cmd}"</span></span>)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Kill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cmd</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cmd == <span class="hljs-string"><span class="hljs-string">"deadlock"</span></span>) { deadlock = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Deadlocked"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deadlock) Thread.Sleep(<span class="hljs-number"><span class="hljs-number">123</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> deadlock ? <span class="hljs-string"><span class="hljs-string">"Deadlocked!!!"</span></span> : <span class="hljs-string"><span class="hljs-string">"Alive"</span></span>; }</code> </pre> <br><br>  Ø£Ù‚ÙˆÙ… Ø¨Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù…ÙŠÙ† Ø¥Ù„Ù‰ Ù…Ù„Ù 1-Ø§Ù„Ø§Ù†ØªØ´Ø§Ø±-app.yaml ÙÙŠ Ø§Ù„Ø­Ø§ÙˆÙŠØ©: <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">containers: - name: metricsdemo image: localhost:5000/sansys/metricsdemo3:6 ports: - containerPort: 80 readinessProbe: <span class="hljs-comment"><span class="hljs-comment">#       httpGet: path: /health port: 80 initialDelaySeconds: 5 periodSeconds: 5 livenessProbe: #      httpGet: path: /api/job/alive/check port: 80 initialDelaySeconds: 5 periodSeconds: 5</span></span></code> </pre> <br>  Redeply ØŒ Ø£Ù†Ø§ Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù‚Ø¯ Ø¨Ø¯Ø£ ÙˆØ§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">kubectl get events --watch</code> </pre> <br>  Ø£Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Deadlock me ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http: // localhost: 9376 / api / job / alive / deadlock</a> ) <br><br><img src="https://habrastorage.org/webt/ed/ir/bb/edirbbiw3gjjoptubdh7992z6yy.png"><br><br>  ÙˆØ®Ù„Ø§Ù„ Ø®Ù…Ø³ Ø«ÙˆØ§Ù† Ø£Ø¨Ø¯Ø£ ÙÙŠ Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙˆØ­Ù„Ù‡Ø§ <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">1s Warning Unhealthy Pod Liveness probe failed: Get http://10.1.0.137:80/api/job/alive/check: net/http: request canceled (Client.Timeout exceeded <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> awaiting headers) 1s Warning Unhealthy Pod Liveness probe failed: Get http://10.1.0.137:80/api/job/alive/check: net/http: request canceled (Client.Timeout exceeded <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> awaiting headers) 0s Warning Unhealthy Pod Liveness probe failed: Get http://10.1.0.137:80/api/job/alive/check: net/http: request canceled (Client.Timeout exceeded <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> awaiting headers) 0s Warning Unhealthy Pod Readiness probe failed: Get http://10.1.0.137:80/health: dial tcp 10.1.0.137:80: connect: connection refused 0s Normal Killing Pod Killing container with id docker://metricsdemo:Container failed liveness probe.. Container will be killed and recreated. 0s Normal Pulled Pod Container image <span class="hljs-string"><span class="hljs-string">"localhost:5000/sansys/metricsdemo3:6"</span></span> already present on machine 0s Normal Created Pod Created container 0s Normal Started Pod Started container</code> </pre> <br><br><a name="9"></a><h2 style=";text-align:right;direction:rtl">  Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬Ø§Øª </h2><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ù…Ù† Ù†Ø§Ø­ÙŠØ© ØŒ ØªØ¨ÙŠÙ† Ø£Ù† Ø­Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ù‚Ù„ Ø¨ÙƒØ«ÙŠØ± Ù…Ù…Ø§ ÙƒÙ†Øª Ø£Ø¹ØªÙ‚Ø¯ ØŒ Ù…Ù† Ù†Ø§Ø­ÙŠØ© Ø£Ø®Ø±Ù‰ ØŒ ÙÙ‡Ùˆ Ù„ÙŠØ³ ÙƒØªÙ„Ø© kubernetes Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ ØŒ ÙˆÙ„ÙƒÙ† ÙÙ‚Ø· ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù…Ø·ÙˆØ±.  ÙˆÙ„Ù… ÙŠØªÙ… Ø§Ù„Ù†Ø¸Ø± ÙÙŠ Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…ÙØ±ÙˆØ¶Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ ØŒ ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ© ØŒ ÙˆØ§Ø®ØªØ¨Ø§Ø± a / b ØŒ ÙˆÙ…Ø§ Ø¥Ù„Ù‰ Ø°Ù„Ùƒ. </li><li style=";text-align:right;direction:rtl">  Ø¬Ø±Ø¨Øª Ø¨Ø±ÙˆÙ…ÙŠØªÙˆØ³ Ø°Ù„Ùƒ Ù„Ù„Ù…Ø±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ ØŒ Ù„ÙƒÙ† Ù‚Ø±Ø§Ø¡Ø© Ù…Ø®ØªÙ„Ù Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ ÙˆØ§Ù„Ø£Ù…Ø«Ù„Ø© Ø®Ù„Ø§Ù„ Ù…Ø±Ø§Ø¬Ø¹Ø© cuber Ø£ÙˆØ¶Ø­Øª Ø£Ù†Ù‡ Ù…Ù† Ø§Ù„Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§ Ø¬Ù…Ø¹ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³ Ù…Ù† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª </li><li style=";text-align:right;direction:rtl">  Ø¥Ù†Ù‡ Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§ Ù„Ø¯Ø±Ø¬Ø© Ø£Ù†Ù‡ ÙŠØ³Ù…Ø­ Ù„Ù„Ù…Ø·ÙˆØ± Ø¨ØªÙ†ÙÙŠØ° Ù…ÙŠØ²Ø© Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø§Ù„Ø®Ø§Øµ Ø¨Ù‡ ÙˆØ¥Ø±ÙØ§Ù‚Ù‡Ø§ ØŒ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„Ù†Ø´Ø± ØŒ ÙˆÙ†Ø´Ø± Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ ÙÙŠ graphan.  ÙˆÙ†ØªÙŠØ¬Ø© Ù„Ø°Ù„Ùƒ ØŒ ÙØ¥Ù† Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¯ÙˆÙ† Ø¥Ø¶Ø§ÙÙŠØ©.  Ø³ØªØ¨Ø¯Ø£ Ø§Ù„Ø¬Ù‡ÙˆØ¯ Ù„ÙŠØªÙ… Ø¹Ø±Ø¶Ù‡Ø§ Ø¹Ù„Ù‰ Ø®Ø´Ø¨Ø© Ø§Ù„Ù…Ø³Ø±Ø­ ÙˆÙ‡Ù…Ø².  Ù…Ø±ÙŠØ­Ø© </li></ol><br><br><a name="10"></a><h2 style=";text-align:right;direction:rtl">  Ù…Ù„Ø§Ø­Ø¸Ø§Øª </h2><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ÙŠÙ…ÙƒÙ† Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø¨Ø¹Ø¶Ù‡Ø§ Ø§Ù„Ø¨Ø¹Ø¶ Ù…Ù† Ø®Ù„Ø§Ù„ <code> :</code> ØŒ ÙˆÙ‡Ùˆ Ù…Ø§ ØªÙ… Ù…Ø¹ grafana â†’ prometeus.  Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø£ÙˆÙ„Ø¦Ùƒ Ø§Ù„Ù…Ø·Ù„Ø¹ÙŠÙ† Ø¹Ù„Ù‰ Ø¹Ø§Ù…Ù„ Ø§Ù„Ù…ÙŠÙ†Ø§Ø¡ ØŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯ </li><li style=";text-align:right;direction:rtl">  <code>kubectl create -f file.yml</code> - Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙŠØ§Ù† </li><li style=";text-align:right;direction:rtl">  <code>kubectl delete -f file.yml</code> - Ø­Ø°Ù ÙƒÙŠØ§Ù† </li><li style=";text-align:right;direction:rtl">  <code>kubectl get pod</code> - Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆÙ‚Ø¯ (Ø§Ù„Ø®Ø¯Ù…Ø© ØŒ Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ...) <ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  - Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø§Ø³Ù… <code>--namespace=kube-system</code> - Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø§Ø³Ù… </li><li style=";text-align:right;direction:rtl">  <code>-n kube-system</code> - Ø¨Ø§Ù„Ù…Ø«Ù„ </li></ul></li><li style=";text-align:right;direction:rtl">  <code>kubectl -it exec grafana-d8d4d9f5c-cvnkh -- /bin/bash</code> - Ù…Ø±ÙÙ‚ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¹ </li><li style=";text-align:right;direction:rtl">  <code>kubectl delete service grafana</code> - Ø­Ø°Ù Ø§Ù„Ø®Ø¯Ù…Ø© ØŒ Ø¬Ø±Ø§Ø¨.  Ù†Ø´Ø± (- Ø¬Ù…ÙŠØ¹ - Ø­Ø°Ù Ø§Ù„ÙƒÙ„) </li><li style=";text-align:right;direction:rtl">  <code>kubectl describe</code> - ÙˆØµÙ Ø§Ù„ÙƒÙŠØ§Ù† (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ù‡ ÙÙŠ ÙˆÙ‚Øª ÙˆØ§Ø­Ø¯) </li><li style=";text-align:right;direction:rtl">  <code>kubectl edit service metricsdemo</code> - ØªØ­Ø±ÙŠØ± Ø¬Ù…ÙŠØ¹ yamls Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§ÙŠØ± Ù…Ù† Ø®Ù„Ø§Ù„ Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù…ÙÙƒØ±Ø© <div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø¹Ø±Ø¶</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xh/nc/c2/xhncc23bokunuyqam3ekkntdxrw.png"></div></div></li><li style=";text-align:right;direction:rtl">  <code>kubectl --help</code> - <code>kubectl --help</code> - <code>kubectl --help</code> ÙƒØ¨ÙŠØ±Ø©) </li><li style=";text-align:right;direction:rtl">  Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ© Ù‡ÙŠ ÙˆØ¬ÙˆØ¯ Ø¬Ø±Ø§Ø¨ (Ø¶Ø¹ ÙÙŠ Ø§Ø¹ØªØ¨Ø§Ø±Ùƒ Ø§Ù„ØµÙˆØ±Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„) ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§ ÙˆÙ„Ø§ ØªÙˆØ¬Ø¯ Ø®ÙŠØ§Ø±Ø§Øª ØŒ Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø£Ù†Ù‡ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ø±ÙŠÙ‚Ø© Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¯Ø§Ø®Ù„ (Ø¹Ø¨Ø± tcpdump / nc ÙˆÙ…Ø§ Ø¥Ù„Ù‰ Ø°Ù„Ùƒ).  - Yuzai kubectl-debug <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">habr.com/ar/company/flant/blog/436112</a> <br></li></ol><br><br><a name="11"></a><h2 style=";text-align:right;direction:rtl">  Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ </h2><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù…Ø§ Ù‡ÙŠ Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŸ</a> </li><li style=";text-align:right;direction:rtl">  Kubernetes <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Kubernetes Ù†Ø´Ø± Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø±</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ØªØ´ØºÙŠÙ„ ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø¯ÙŠÙ…ÙŠ Ø§Ù„Ø¬Ù†Ø³ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ø´Ø±</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù…Ø§ Ù‡Ùˆ ConfigMap</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ÙƒØ±ÙˆÙ†ÙˆØ¨</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„Ø³Ø¨Ø± ØªØ­Ù‚ÙŠÙ‚Ø§Øª Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ÙˆØ±Ù‚Ø© Ø§Ù„ØºØ´ kubectl</a> </li></ul></li><li style=";text-align:right;direction:rtl">  Ø¨Ø±ÙˆÙ…ÙŠØ«ÙŠÙˆØ³ <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù„ØºØ© Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„ØªÙƒÙˆÙŠÙ† Prometeus Ù„ Coober</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø¬Ù‡Ø§Ø² ÙˆØ¢Ù„ÙŠØ© Ø¹Ù…Ù„ Ù…Ø´ØºÙ„ Ø¨Ø±ÙˆÙ…ÙŠØ«ÙŠÙˆØ³ ÙÙŠ Kubernetes</a> </li></ul></li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„ØªÙƒÙˆÙŠÙ† Ù…Ø³Ø¨Ù‚Ø§ grafana</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù„Ù…Ø¹Ø±ÙØ© ÙƒÙŠÙ ÙŠÙØ¹Ù„ Ø§Ù„Ù†Ø§Ø³</a> (ÙˆÙ„ÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø¨Ø§Ù„ÙØ¹Ù„ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„ØªÙŠ Ø¹ÙØ§ Ø¹Ù„ÙŠÙ‡Ø§ Ø§Ù„Ø²Ù…Ù†) - Ù‡Ù†Ø§Ùƒ ØŒ Ù…Ù† Ø­ÙŠØ« Ø§Ù„Ù…Ø¨Ø¯Ø£ ØŒ Ù‡Ù†Ø§Ùƒ Ø£ÙŠØ¶Ø§ Ø­ÙˆÙ„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ØŒ ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ØŒ Ø§Ù„Ø® </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Helm</a> - Ù…Ø¯ÙŠØ± Ø§Ù„Ø­Ø²Ù… ÙÙŠ Kubernetes - Ù…Ù† Ø®Ù„Ø§Ù„Ù‡ ØŒ ÙƒØ§Ù† Ù…Ù† Ø§Ù„Ø³Ù‡Ù„ ØªÙ†Ø¸ÙŠÙ… prometeus + grafana ØŒ Ù„ÙƒÙ† ÙŠØ¯ÙˆÙŠÙ‹Ø§ - ÙŠØ¸Ù‡Ø± Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§Ù‡Ù… </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù…ÙƒØ¹Ø¨Ø§Øª Ø¨Ø±ÙˆÙ…ÙŠØ«ÙŠÙˆØ³ Ù…Ù† ÙƒÙˆØ¨Ø±</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù‚ØµØµ ÙØ´Ù„ Kubernetes</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Kubernetes-HA.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù†Ø´Ø± Ù†Ø¸Ø§Ù… ØªØ¬Ø§ÙˆØ² Ø§Ù„ÙØ´Ù„ Kubernetes Ù…Ø¹ 5 Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø§Øª</a> </li></ol><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://github.com/favicon.ico" width="22"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø´ÙØ±Ø© Ø§Ù„Ù…ØµØ¯Ø± ÙˆØ§Ù„Ù…Ø±Ø¨ÙŠØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø¹Ù„Ù‰ Ø¬ÙŠØ«Ø¨</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar437286/">https://habr.com/ru/post/ar437286/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar437274/index.html">Ø±Ø¤ÙŠØ© Ù†Ø­Ùˆ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© ÙÙŠ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø©</a></li>
<li><a href="../ar437276/index.html">Ù…ØµØ§Ø¨ÙŠØ­ Ø§Ù„Ø·Ø§ÙˆÙ„Ø© Remilicht Ù…Ø¹ Ø§Ù„Ù…ØµØ§Ø¨ÙŠØ­ Sunlike</a></li>
<li><a href="../ar437280/index.html">Ù…Ù† Ø§Ù„Ø³Ù‡Ù„ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ù‡ Ø¨Ù†ÙØ³Ùƒ Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠØ©</a></li>
<li><a href="../ar437282/index.html">Ù…Ù‚Ø¯Ù…Ø© Ø¥Ù„Ù‰ Kubernetes Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠ VMware. Ø§Ù„Ø¬Ø²Ø¡ 2. Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø©</a></li>
<li><a href="../ar437284/index.html">Ø§Ù„Ù…Ù‡Ù† Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨ØµÙ†Ø§Ø¹Ø© Ø§Ù„ØµÙˆØª</a></li>
<li><a href="../ar437292/index.html">Ù„Ù…Ø§Ø°Ø§ Ù†Ù…ÙˆØ°Ø¬ Ù…ØªØ¬Ø± Ø§Ù„ØªØ¬Ø²Ø¦Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ Ù‚Ø¯ Ù…Ø§Øª Ø¨Ø§Ù„ÙØ¹Ù„</a></li>
<li><a href="../ar437296/index.html">Ù„Ù…Ø§Ø°Ø§ Ù„Ø§ ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ø§Ø³ Ø§Ù„Ø£Ø³Ø§Ù„ÙŠØ¨ Ø§Ù„Ø±Ø³Ù…ÙŠØ©ØŸ</a></li>
<li><a href="../ar437298/index.html">Ø¹Ù† Ø´Ø®Øµ ÙˆØ§Ø­Ø¯</a></li>
<li><a href="../ar437300/index.html">10 Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù„Ù„Ù…Ø·ÙˆØ± Ù…Ø¨ØªØ¯Ø¦ Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø±Ù‚Ø§Ø¨Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©</a></li>
<li><a href="../ar437304/index.html">ÙƒÙŠÙÙŠØ© Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ø·Ø§ Ø¥Ø°Ø§ ÙƒÙ†Øª Ù…ØµØ§Ø¨Ù‹Ø§ Ø¨Ø§Ù„Ø¹Ù…Ù‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>