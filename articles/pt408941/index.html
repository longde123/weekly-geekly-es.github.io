<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüé® üö± üññ Conector de diagn√≥stico OBD-II como interface para IoT üö¥üèº ü§∂ üñï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Era uma vez, em meados dos anos 90, durante o advento do processador Pentium Pro, um dos fundadores da Intel Gordon Moore observou que: ‚ÄúSe a ind√∫stri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Conector de diagn√≥stico OBD-II como interface para IoT</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/unet/blog/408941/">  Era uma vez, em meados dos anos 90, durante o advento do processador Pentium Pro, um dos fundadores da Intel Gordon Moore observou que: ‚ÄúSe a ind√∫stria automotiva se desenvolvesse no ritmo da evolu√ß√£o da ind√∫stria de semicondutores, hoje a Rolls-Royce poderia movimentar meio milh√£o milhas por gal√£o de gasolina, e seria mais barato jog√°-lo fora do que pagar pelo estacionamento. ‚Äù  Mas, talvez, j√° hoje a ind√∫stria automotiva esteja dando um passo gigantesco no desenvolvimento, na dire√ß√£o de uma mudan√ßa fundamental no tipo de combust√≠vel e na tecnologia para dirigir um carro.  Quase recentemente, carros el√©tricos comerciais e carros movidos a hidrog√™nio s√£o apresentados, e o piloto autom√°tico est√° se tornando o componente desejado do "enchimento" eletr√¥nico do ve√≠culo.  Na maioria das vezes, apenas um avan√ßo r√°pido na ind√∫stria automotiva se deve ao surgimento de solu√ß√µes confi√°veis ‚Äã‚Äãe seguras baseadas em eletr√¥nicos inteligentes para sistemas de controle a bordo automotivos.  Mas onde est√° a Internet no carro na vida cotidiana, onde est√° a tecnologia da Internet das Coisas (IoT), bem como o conceito bem conhecido de um carro conectado √† rede (Carro Conectado)? <br><br><img src="https://habrastorage.org/webt/wx/d9/lt/wxd9lt00v41ta-q6gyxxgtmssx0.jpeg"><br>  <font color="gray"><i>O Rolls-Royce 103EX.</i></font>  <font color="gray"><i>Rolls-Royce lan√ßa carro-conceito el√©trico sem motorista, completo com assento de seda - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">The Telegraph</a> .</i></font> <br><a name="habracut"></a><br>  De fato, todas as tecnologias acima j√° existem e s√£o usadas, no entanto, apenas em solu√ß√µes suficientemente separadas.  A raz√£o para isso s√£o os rigorosos requisitos de seguran√ßa que certamente devem ser implementados no lan√ßamento de qualquer nova tecnologia ou solu√ß√£o em transporte.  Portanto, n√£o se pode dizer que, quando voc√™ entra em um carro com um smartphone, pode obter automaticamente uma solu√ß√£o IoT ou Connected Car.  Na maioria dos pa√≠ses, e isso √© muito l√≥gico, h√° uma proibi√ß√£o do uso de um smartphone ou outros aparelhos durante a condu√ß√£o e, se falamos de assistentes de voz, na maioria dos casos, eles agora s√£o irritantes e perturbadores, tanto para o motorista quanto para os passageiros.  Por sua vez, o centro de m√≠dia, telas adicionais de v√≠deo e excelente ac√∫stica, √© claro, s√£o componentes muito atraentes de um carro moderno.  Mas eu quero entender a palavra e notar que √© bom abafar a m√∫sica e apenas olhar pela janela as ruas ou a natureza passando.  Obviamente, existem engarrafamentos, mas nesta publica√ß√£o o objetivo √© observar n√£o alguns componentes √©ticos ou considerar os problemas de excesso de informa√ß√µes dos usu√°rios da estrada, mas considerar os componentes "invis√≠veis" das tecnologias IoT que j√° s√£o usadas em ve√≠culos e est√£o dispon√≠veis para uso generalizado. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/gXpDx22dSiU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Hoje, uma solu√ß√£o interessante e muito promissora para a Internet das coisas automotiva √© a plataforma Open Connected Car da Mojio.  Essa plataforma com uma interface aberta (API) fornece um servi√ßo em nuvem para carros "conectados" e ofertas comerciais j√° est√£o dispon√≠veis.  Por exemplo, a gigante de telecomunica√ß√µes T-Mobile, com base nesta plataforma, fornece o servi√ßo SyncUP DRIVE.  Esta √© uma solu√ß√£o de software de hardware baseada em um dispositivo port√°til conectado ao carro atrav√©s do conector de diagn√≥stico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OBD-II</a> e do aplicativo m√≥vel correspondente.  Gra√ßas a essa abordagem, √© poss√≠vel realizar efetivamente o monitoramento cont√≠nuo dos par√¢metros de opera√ß√£o do seu carro e a qualquer momento para obter sua localiza√ß√£o atual.  O aplicativo pode falar sobre estilos de dire√ß√£o, alertar sobre manuten√ß√£o preventiva e tamb√©m notificar o propriet√°rio sobre problemas com o ve√≠culo.  Al√©m disso, o SyncUP DRIVE implementa um ponto de acesso Wi-Fi no carro usando o acesso atrav√©s do protocolo de alta velocidade do padr√£o LTE m√≥vel. <br><br><img src="https://habrastorage.org/webt/em/tc/ps/emtcpswczvhsacuttewampbi6dk.png"><br>  <font color="gray"><i>A plataforma aberta para carros conectados - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mojio</a></i></font> <br><br>  Um conector de diagn√≥stico OBD-II padr√£o √© usado para conectar ao ve√≠culo.  A maioria dos carros de produ√ß√£o produzidos ap√≥s 1996 j√° possui esse conector.  Embora esse conector de diagn√≥stico seja padronizado, ele suporta v√°rios protocolos de v√°rios sistemas de controle do motor (diferentes contatos no conector s√£o usados ‚Äã‚Äãfisicamente) que o m√≥dulo de comunica√ß√£o da IoT deve conhecer.  Consequentemente, em diferentes marcas de autom√≥veis, pode haver diferentes barramentos internos para obter dados de diagn√≥stico da unidade de controle do motor (ECU - Electronic control unit).  Para trabalhar com o servi√ßo SyncUP DRIVE, √© oferecida uma solu√ß√£o baseada no m√≥dulo ZTEWelink VM6200S. <br><br>  O m√≥dulo VM6200S suporta conex√£o via protocolo m√≥vel LTE, cont√©m um sensor de acelera√ß√£o de 3 eixos integrado e girosc√≥pio de 3 eixos, receptor de sinal GPS, chip OBD-II, com suporte para protocolos ISO 15765-4 (CAN), ISO 14230-4 KWP (Protocolo de palavras-chave 2000), ISO 9141-2 (autom√≥veis Chrysler, Euro e asi√°ticos), SAE J1850 PWM (ve√≠culos Ford), SAE J1850 VPW (ve√≠culos GM).  Assim, o m√≥dulo permite implantar um ponto de acesso Wi-Fi 802.11 b / g / n /, registrar eventos durante a condu√ß√£o, realizar diagn√≥sticos do motor, avaliar a economia de combust√≠vel, etc.  E como os parceiros da Mojio s√£o projetos Amazon Alexa, servi√ßo IFTTT e outros, todas as perspectivas se abrem para desenvolvedores e integradores de solu√ß√µes, at√© a cria√ß√£o de uma IoT social baseada em um carro "conectado", como parte dessa infraestrutura. <br><br><img src="https://habrastorage.org/webt/yk/ay/bd/ykaybdys59rvcgp4_fktlbr3w1q.jpeg"><br>  <font color="gray"><i>Dispositivo OBD VM6200S4G - ZTEWelink Corporation</i></font> <br><br>  Mas agora n√£o s√≥ o SyncUP DRIVE est√° no mercado, por exemplo, muitas empresas fornecem algo semelhante.  Obviamente, o rec√©m-lan√ßado dispositivo autom√°tico Samsung Connect √© uma dessas propostas interessantes que transformam o carro em um dispositivo conectado.  A solu√ß√£o da Samsung usa a rede m√≥vel da gera√ß√£o 4G LTE da mesma maneira e implementa um ponto de acesso Wi-Fi dentro do carro: 802.11 a / b / g / n.  O dispositivo Connect Auto suporta Bluetooth v4.1, cont√©m um receptor GPS, sensor de acelera√ß√£o, girosc√≥pio e √© baseado em um processador de 4 n√∫cleos com uma frequ√™ncia de 1,2 GHz e no sistema operacional Tizen.  Deve-se notar que a gigante eletr√¥nica coreana Samsung fala sobre a seguran√ßa do sistema atrav√©s do uso do Samsung Knox - uma solu√ß√£o m√≥vel com prote√ß√£o em n√≠vel empresarial.  De fato, o Samsung Knox √© uma solu√ß√£o de software e hardware para aprimorar a prote√ß√£o do sistema operacional Android. <br><br><img src="https://habrastorage.org/webt/b1/lg/t3/b1lgt3mnkkvh8jouptfu2w8b2gc.jpeg"><br>  <font color="gray"><i>Samsung Connect auto</i></font> <br><br>  Assim, as informa√ß√µes obtidas por meio da leitura dos dados do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OBD-II</a> , as coordenadas atuais da localiza√ß√£o do receptor GPS e os par√¢metros da din√¢mica do ve√≠culo, obtidos dos sensores girosc√≥picos, na atualidade e de fato, tornaram-se a base para transformar qualquer ve√≠culo em Dispositivo IoT.  Al√©m disso, voc√™ pode considerar cen√°rios para o uso de informa√ß√µes agregadas recebidas de carros, aplicar v√°rias t√©cnicas de processamento de Big Data e n√£o esquecer as perspectivas de combinar esses dados com informa√ß√µes da infraestrutura de estradas inteligentes.  Por√©m, antes de come√ßar a processar os dados, primeiro √© necess√°rio obt√™-los; portanto, nesta publica√ß√£o, focaremos no componente de hardware da implementa√ß√£o de cen√°rios de trabalho no n√≠vel do conector de diagn√≥stico OBD-II. <br><br>  De uma maneira ou de outra, mas todas as solu√ß√µes discutidas anteriormente s√£o produtos industriais mais avan√ßados, em compara√ß√£o com um leitor de c√≥digo de diagn√≥stico convencional baseado no chip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ELM327</a> da empresa canadense Elm Electronics.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O ELM327</a> √© um conversor universal de protocolos usado em barramentos de diagn√≥stico de autom√≥veis em um protocolo serial como o RS-232. <br><br><img src="https://habrastorage.org/webt/bd/fl/ti/bdfltiij2wefjc2hs9iegcrg67c.png"><br>  <font color="gray"><i>Diagrama de blocos de um chip ELM327 v2.2 - Elm Electronics</i></font> <br><br>  A intera√ß√£o com o ELM327 √© realizada por comandos AT padr√£o suportados pelo chip.  Voc√™ s√≥ precisa organizar a troca de mensagens de texto usando o protocolo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RS-232</a> , que j√° se tornou um cl√°ssico (ou melhor, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UART</a> , porque estamos falando apenas sobre fluxo de dados, n√£o n√≠veis de sinal).  E a pr√≥pria conex√£o f√≠sica de baixo n√≠vel via USB, Bluetooth ou Wi-Fi √© simplesmente implementada usando os chips UART do protocolo de convers√£o serial.  Acontece que, para transformar o carro em um dispositivo IoT, basta esquecer de coordenar os n√≠veis de tens√£o, conectar o chip ELM327 ao conector de diagn√≥stico OBD-II e, por exemplo, colocar o conversor de interface serial em Bluetooth ou Wi-Fi na sa√≠da desse chip.  Em seguida, voc√™ pode "ler" o diagn√≥stico do ve√≠culo no seu smartphone.  No entanto, existem muitos desses m√≥dulos ou blocos prontos no mercado.  E o pre√ßo no AliExpress varia de US $ 2,50 a US $ 10.  Embora o m√≥dulo n√£o deva consumir muita energia, ser√° muito conveniente se o bot√£o desligar j√° estiver presente.  A prop√≥sito, do ponto de vista da seguran√ßa - isso tamb√©m n√£o √© ruim. <br><br><img src="https://habrastorage.org/webt/2-/yq/4k/2-yq4kpvpmmay4csvmstieigi_c.jpeg"><br>  <font color="gray"><i>Mini-ELM327 Bluetooth OBD-II adaptador de diagn√≥stico de carro v1.5</i></font> <br><br>  Agora voc√™ pode conectar o m√≥dulo Mini ELM327 Bluetooth OBD-II V1.5 padr√£o (√© interessante que em muitas fontes √© recomend√°vel usar m√≥dulos com a vers√£o antiga do firmware 1.5, e n√£o novos com a vers√£o 2.2, ou seja, como um argumento de opera√ß√£o mais est√°vel do m√≥dulo na vers√£o antiga. firmware e suporte para mais carros, mas isso √© muito subjetivo) e experimente conectar o smartphone ao m√≥dulo selecionado, por exemplo, para a plataforma Android, voc√™ pode usar um dos programas de diagn√≥stico mais populares Torque Lite (OBD2 e Carro) ou Torque Pro (OBD 2 e Carro) bem como qualquer coisa n  mais f√°cil de usar, ou suas realiza√ß√µes. <br><br><img src="https://habrastorage.org/webt/nv/ff/qe/nvffqeyv0gpaxedvswhtk6a30e4.jpeg"><br>  <font color="gray"><i>O aplicativo Torque Pro √© executado no Android.</i></font> <br><br>  A prop√≥sito, quero observar um servi√ßo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MockUPhone</a> muito conveniente, com mock-up gratuito de aparelhos modernos, que foi muito √∫til para preparar uma captura de tela do programa Torque.  Mas esta √© uma pequena partida do t√≥pico da publica√ß√£o.  Deve-se notar que, na maioria dos casos, o conector OBD-II, ao qual o m√≥dulo de diagn√≥stico est√° conectado, est√° localizado sob a coluna de dire√ß√£o do carro. <br><br><img src="https://habrastorage.org/webt/gv/gy/fv/gvgyfvzqitu32obmtknn7cnu5da.jpeg"><br>  <font color="gray"><i>Introdu√ß√£o ao OBD-II - SparkFun Electronics</i></font> <br><br>  √â claro que existem muitas solu√ß√µes prontas.  Mas se estivermos falando sobre o desenvolvimento de um servi√ßo baseado na IoT ou mais especificamente - o conceito de carro conectado est√° sendo implementado, √© bastante conveniente usar o emulador de rede de informa√ß√µes a bordo do carro para n√£o correr sempre para o carro.  Por exemplo, a Mojio oferece um simulador de carro on-line para trabalhar com sua API e usando o servi√ßo de nuvem IBM Watson IoT Platform como exemplo, no artigo: ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Enviando dados de ve√≠culo para a plataforma IBM Watson IoT - IBM developerWorks Recipes</a> ‚Äù √© proposto para enviar para a nuvem de dados de um transporte significa usar um aplicativo m√≥vel, por exemplo, ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IBM IoT for Automotive - Aplicativo de gerenciamento de frota OBDII para Android</a> ‚Äù, que interage com o servi√ßo de nuvem implementado ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IBM IoT for Automotive (Bluemix) - Fleet Management Starter Application</a> ‚Äù, mas se voc√™ n√£o se distrair com esses projetos, pode use apenas um emulador de dados: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Car Simulator</a> ".  √â verdade que todas essas solu√ß√µes basicamente imitam os dados j√° recebidos e estamos interessados ‚Äã‚Äãno emulador da rede de informa√ß√µes a bordo.  A solu√ß√£o mais famosa √© o ECUsim 2000, cujo custo come√ßa em US $ 200 e depende do n√∫mero de protocolos emulados suportados. <br><br><img src="https://habrastorage.org/webt/p6/f2/hz/p6f2hzxzn86wrgci0es-j_r0dgk.jpeg"><br>  <font color="gray"><i>Simulador ECUsim 2000 OBD - ScanTool</i></font> <br><br>  Obviamente, um emulador profissional n√£o pode ser substitu√≠do, mas entusiastas e nerds podem muito bem estar interessados ‚Äã‚Äãna implementa√ß√£o independente de um projeto menos complexo em um Arduino ou Raspberry Pi.  Por exemplo, voc√™ pode restringir-se √† interface CAN (Controller Area Network) mais comum.  Ao mesmo tempo, o padr√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CAN</a> proposto pela Bosch fez um progresso significativo no desenvolvimento de sistemas para eletr√¥nicos automotivos.  Se um carro na Internet apareceu apenas recentemente, o conceito de rede dentro de um carro existe desde meados dos anos 80.  A id√©ia √© muito simples e, como a Ethernet fez um avan√ßo nas redes de computadores, a CAN se tornou a base para comunica√ß√µes confi√°veis ‚Äã‚Äãdentro do carro. <br><br><img src="https://habrastorage.org/webt/1-/rr/8e/1-rr8er1qx_evsnys-2hc6ndzcw.png"><br>  <font color="gray"><i>Uma rede de barramento CAN baseada em Arduino - Henry's Bench</i></font> <br><br>  Anteriormente, em um carro, via de regra, barramentos e fios de v√°rios m√≥dulos e dispositivos conectados "flu√≠am" para a unidade central de controle do motor.  O barramento CAN serial de dois fios tornou poss√≠vel a implementa√ß√£o de m√≥dulos inteligentes j√° independentes, por exemplo, a unidade de controle central tornou-se apenas um daqueles m√≥dulos que ‚Äúse comunicam‚Äù de fato atrav√©s do protocolo de rede.  Isso reduz significativamente a quantidade de fia√ß√£o dentro do carro. <br><br>  Ao contr√°rio da Ethernet, a rede CAN √© muito mais confi√°vel, o que levou ao seu uso n√£o apenas na ind√∫stria automotiva, mas tamb√©m em sistemas de automa√ß√£o industrial, solu√ß√µes dom√©sticas inteligentes, etc.  No n√≠vel f√≠sico, o CAN usa uma linha de dois fios, CAN Lo e CAN Hi, que transmitem bit a bit os dados compactados em um pacote.  Nas extremidades do barramento, existem resist√™ncias correspondentes de 120 ohms, e tamb√©m o chicote de fios deve ser usado para suprimir a interfer√™ncia.  A taxa de transfer√™ncia de dados pode atingir 1 Mbps. <br><br><img src="https://habrastorage.org/webt/if/rh/lo/ifrhlo06vmiuaf7ipkjhngrovb4.png"><br>  <font color="gray"><i>Uma rede de √°rea do controlador (barramento CAN)</i></font> <br><br>  A transfer√™ncia de dados para o barramento CAN lembra um pouco o modelo do publicador-assinante, onde cada dispositivo no barramento tem um identificador exclusivo e, quando um dispositivo transmite dados, todos os outros ouvem e tomam uma decis√£o com base nesse identificador - eles precisam especificamente deles? dados para receber e processar ou n√£o.  Em geral, o protocolo √© bastante complicado, mas para um microcontrolador ou microprocessador √© improv√°vel que seja necess√°rio escrever uma implementa√ß√£o CAN, bem como pensar nos recursos do meio f√≠sico de transfer√™ncia de dados.  Para resolver esses problemas, j√° existem controladores de barramento de hardware prontos e, para correspond√™ncia de n√≠vel, s√£o frequentemente usados ‚Äã‚Äãconversores integrados.  Por exemplo, o controlador MCP2515 com SPI e o transceptor (chip de n√≠vel correspondente) MCP2551.  √â com base nesses microcircuitos que o projeto Arduino OBD2 Simulator, publicado na plataforma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instructable</a> , foi proposto.  Para implement√°-lo, voc√™ s√≥ precisa da placa Arduino UNO e do CAN-BUS Shield, por exemplo, Seeed Technology. <br><br><img src="https://habrastorage.org/webt/kg/av/py/kgavpyoaa2n_x3lwvojs8zljiti.jpeg"><br>  <font color="gray"><i>Experimentos usando o Arduino OBD2 Simulator</i></font> <br><br>  Em princ√≠pio, para o desenvolvimento de um emulador de dados OBD-II, uma fonte de alimenta√ß√£o de 12V DC para o m√≥dulo ELM327, bem como um conector OBD-II, n√£o prejudicam.  No entanto, o conversor sem nome DC-DC-USB-TO-12V pode muito bem resolver o problema, porque  talvez v√°rias fontes de alimenta√ß√£o para 5V estejam √† disposi√ß√£o de qualquer desenvolvedor para a Internet das coisas e n√£o apenas.  Para conectar-se ao OBD-II, ser√£o necess√°rios dois fios de informa√ß√£o CAN_H e CAN_L, al√©m da presen√ßa de energia de 12 V, mas como observado anteriormente, 12 V s√£o necess√°rios apenas para garantir a operacionalidade do m√≥dulo ELM327. <br><br><img src="https://habrastorage.org/webt/kz/mw/-c/kzmw-crivoyb07chmevezznxyvy.png"><br>  <font color="gray"><i>CAN-BUS Shield V1.2 - Wiki de Desenvolvimento Apropriado Limitado</i></font> <br><br>  Na placa de expans√£o do CAN-BUS Shield, √© muito conveniente usar n√£o o conector D-SUB, mas simplesmente um bloco de terminais para dois contatos (CAN_H, CAN_L).  Do ponto de vista do desenvolvimento de c√≥digo de software, deve-se notar que os entusiastas do prot√≥tipo postaram no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> .  Agora, as placas Seeed foram alteradas e, em qualquer caso, para o controlador MCP2515, √© melhor usar novos drivers do mesmo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Seeed-Studio</a> .  Obviamente, o programa original precisar√° ser ligeiramente modificado para os novos drivers, mas isso leva alguns minutos. <br><br><img src="https://habrastorage.org/webt/yq/me/li/yqmelislz2chb8q02rgk3cgmwq4.png"><br>  <font color="gray"><i>Trabalhando com CAN-BUS em um Arduino IDE baseado no simulador de ECU OBD2 de baixo custo</i></font> <br><br>  No entanto, o exemplo considerado √© muito primitivo, j√° que todos os par√¢metros enviados pelo protocolo OBD-II s√£o simplesmente gerados aleatoriamente, n√£o h√° conex√£o entre os par√¢metros de opera√ß√£o do motor, etc.  Como continua√ß√£o do projeto, √© √≥bvio o desenvolvimento de um aplicativo semelhante √† GUI do Freematics OBD-II Emulator.  Este √© um shell gr√°fico de c√≥digo aberto usado na solu√ß√£o de hardware do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Freematics OBD-II Emulator</a> . <br><br><img src="https://habrastorage.org/webt/8d/vp/wu/8dvpwumfchp8cs30kwhiwdj5boa.png"><br>  <font color="gray"><i>Freematics OBD-II Emulator GUI - Freematics</i></font> <br><br>  Assim, tendo montado um m√≥dulo baseado no Arduino que permite trabalhar com o CAN, √© bem poss√≠vel criar um emulador OBD-II, pois o protocolo de diagn√≥stico √© bem descrito e n√£o √© dif√≠cil implement√°-lo.  Deve-se observar que a intera√ß√£o entre o microcontrolador e o barramento CAN interno √© uma tarefa completamente diferente e voc√™ precisa entender que os protocolos internos de alto n√≠vel desse barramento n√£o s√£o documentados pelos fabricantes de autom√≥veis e, por outro lado, n√£o devem ser incorporados ao dispositivo interno da eletr√¥nica automotiva, de modo que de maneira alguma reduzir a seguran√ßa dos ve√≠culos.  Se falamos sobre o CAN em geral, √© bem poss√≠vel usar o protocolo CANopen aberto de alto n√≠vel para desenvolver seus dispositivos com base nesse barramento. <br><br>  Continua sendo o caso dos pequenos - um pouco de tempo livre e prazer para realizar o desenvolvimento do seu c√≥digo.  √â verdade, onde √© esse momento para encontrar no final do ano?  Mas seremos otimistas.  Mas, falando sobre o uso de um emulador OBD-II, a dire√ß√£o mais direta √© o desenvolvimento de seu pr√≥prio m√≥dulo para o conector de diagn√≥stico.  Por exemplo, voc√™ pode tomar o projeto aberto Carloop como ponto de partida, que visa criar um m√≥dulo para conectar o carro √† nuvem usando as tecnologias 3G, Wi-Fi ou Bluetooth. <br><br><img src="https://habrastorage.org/webt/qk/lr/sz/qklrszijfy8fd7qhtjwwswowlgu.jpeg"><br>  <font color="gray"><i>Carloop bluetooth</i></font> <br><br>  O projeto Carloop se baseia no uso de placas: Particle Photon (baseado no m√≥dulo Wi-Fi Cypress BCM43362 que suporta 802.11b / g / n; a fam√≠lia de controladores ARM Cortex M3 - STM32F205 a uma frequ√™ncia de 120Mhz; 1MB de mem√≥ria flash; 128KB de RAM) e Electron (placas com suporte para conex√£o a uma rede m√≥vel 3G / 2G).  A plataforma Particle em si √© muito interessante porque √© baseada no servi√ßo de conex√£o de dispositivo IoT baseado em nuvem, um IDE baseado em nuvem para desenvolvimento, por exemplo, baseado em placas Photon, que usam uma linguagem semelhante ao C / C ++ para Arduino.  De fato, Particle √© um t√≥pico separado para publica√ß√£o, e o projeto Carloop definitivamente merece aten√ß√£o especial dos entusiastas do carro, como um dispositivo IoT conectado. <br><br>  Ao conectar o carro aos servi√ßos de Internet e IoT, voc√™ pode implementar muitos cen√°rios que, sem d√∫vida, contribuem para a facilidade de uso dos ve√≠culos, aumentam o conforto e, simplesmente, uma solu√ß√£o eficaz para os problemas cotidianos, √© claro, incluindo a solu√ß√£o de transporte.  Por exemplo, os dados sobre o estilo de dire√ß√£o, a confiabilidade dos componentes do motor e do ve√≠culo j√° podem ser levados em considera√ß√£o pelas companhias de seguros.  A localiza√ß√£o atual do carro ser√° relevante para servi√ßos de t√°xi e aluguel de carros.          IoT,    ,     ,  - . <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/m4ypWq9dMV0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br> ,      ‚Äì           OBD-II,       ,       .     .    ,        Connected Car,  ¬´ ¬ª   , ,   ,      IoT       .           . <br><br><h3>    : </h3><br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Car Hacking:      ? ‚Äì </a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">- 25 ! ‚Äì Computerworld</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">T‚ÄëMobile SyncUP DRIVE ‚Äì T-MOBILE</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ZTE  Mojio        ‚Äì ZTE Corporation</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Samsung Knox ‚Äì SAMSUNG</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> CAN  ‚Äì  ¬´¬ª</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     ‚Äî      ‚Äì IBM developerWorks</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Vehicle telematics analytics using Watson IoT Platform Cloud Analytics ‚Äì IBM developerWorks Recipes</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  CAN   CANopen ‚Äì </a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   CANopen ‚Äì  </a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     Arduino   ‚Äì Geektimes</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Wiring the MCP2515 Controller Area Network CAN BUS Diagnostics ‚Äì 14CORE</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Arduino OBD2 ELM327 I2C-LCD HC05 Bluetooth ‚Äì Instructables</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> Android     OBDII  ‚Äì </a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt408941/">https://habr.com/ru/post/pt408941/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt408929/index.html">Os desenvolvedores de alguns jogos para celular exploram criptomoeda nos smartphones dos usu√°rios</a></li>
<li><a href="../pt408931/index.html">An√°lise do Port√°til ASUS N580VD</a></li>
<li><a href="../pt408933/index.html">Substitui√ß√£o de um pressostato mec√¢nico por um digital (para propriet√°rios de po√ßos)</a></li>
<li><a href="../pt408935/index.html">Antena inteligente para redes LTE</a></li>
<li><a href="../pt408939/index.html">Relat√≥rio final sobre o projeto do sat√©lite Mayak</a></li>
<li><a href="../pt408943/index.html">O que o t√©dio faz com uma pessoa: a ci√™ncia da consci√™ncia errante</a></li>
<li><a href="../pt408945/index.html">Milion√°rio an√¥nimo de bitcoin doa US $ 86 milh√µes para caridade.</a></li>
<li><a href="../pt408947/index.html">Revis√£o do registrador russo muito barato AdvoCam-FD4</a></li>
<li><a href="../pt408949/index.html">Como se controlar nas redes sociais</a></li>
<li><a href="../pt408953/index.html">A Toshiba introduziu um disco r√≠gido "h√©lio" com capacidade de 14 TB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>