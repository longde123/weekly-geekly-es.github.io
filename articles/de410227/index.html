<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🎨 👨🏻 ✊ Pi-Sonos v2.0 oder die Entwicklung des Internetradios auf dem Raspberry Pi 😟 ✡️ 👩‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wie Sie wissen, sind der Perfektion keine Grenzen gesetzt. Selbst für hausgemachte tragbare Akustik, deren Benutzerpublikum nur eine Person umfasst. E...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pi-Sonos v2.0 oder die Entwicklung des Internetradios auf dem Raspberry Pi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/410227/"><img src="https://habrastorage.org/webt/gd/g9/zx/gdg9zxcp2lrffn69l2p0nfjlp5k.png" alt="Bild" align="left">  Wie Sie wissen, sind der Perfektion keine Grenzen gesetzt.  Selbst für hausgemachte tragbare Akustik, deren Benutzerpublikum nur eine Person umfasst.  Eine sehr anspruchsvolle und manchmal wahnsinnig störrische Person.  Nachdem der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erste Beitrag</a> über Pi-Sonos veröffentlicht wurde, vergingen fast 5 Monate.  Während dieser Zeit konnte sich die Software in dieser Akustik zweimal dramatisch ändern.  Der Grund für die Änderungen waren sowohl nützliche Ratschläge der Habrachianer als auch ihrer eigenen UX. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Ein bisschen Geschichte für diejenigen, die zu faul zum Lesen sind oder den ersten Artikel bereits vergessen haben</b> <div class="spoiler_text">  Pi-Sonos ist eine hausgemachte kompakte Akustik, deren Entwicklung von Sonos Play 1 inspiriert wurde. Ziel dieser Akustik war es zunächst, Musik von Internetradiosendern abzuspielen.  Bei der Erstellung habe ich Minimalismus und Komfort in den Vordergrund gestellt: Ich habe es an eine Steckdose angeschlossen und dann überall im Haus Musik von Ihrem Smartphone / Computer / Tablet aus gesteuert. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Worum geht es in diesem Artikel?</b> <div class="spoiler_text">  Zunächst über Ausdauer und Neugier auf dem Weg zum Ideal.  Unter dem Schnitt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Benutzername</a> gibt es weder eine Lösung für ein globales Problem noch eine Beschreibung einer neuen einzigartigen Technologie.  Der Artikel enthält nur einen Vergleich der beliebten Medienzentren für den Raspberry Pi, zeigt deren Vor- und Nachteile sowie meine persönliche Vision des optimalen Rahmens für ein Internetradio auf.  Während ich meine eigene Software für die Kolumne entwickelte, wiederholte ich nur teilweise den Weg der Entwickler von Volumio und erkannte nur von Grund auf eine seiner Funktionen (sprich: „ein anderes Fahrrad erfunden“). <br>  Trotz der Tatsache, dass der Artikel das Thema Softwareentwicklung behandelt, enthält er keinen Code, da der Zweck des Artikels darin besteht, die Idee und Funktionalität und nicht den Prozess seiner Implementierung zu beschreiben.  Wenn das Thema des Codes für die Bewohner interessant ist, werde ich versuchen, einen separaten Artikel zu verfassen, der den Entwicklungsprozess beschreibt. <br></div></div><br>  Ursprünglich war das Software-Stuffing für die Akustik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OSMC</a> , aber weise Leute in den Kommentaren machten darauf aufmerksam, dass Kodi (auch bekannt als OSMC) zu kühn als "Gehirn" für einen Internetradiosender ist.  Er ist zu schlau und groß, nur für Audioprojekte ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Volumio</a> besser.  Eigentlich ist es so gekommen.  Volumio ist leichter, wird durch die Weboberfläche geschärft und verfügt über eine fortschrittlichere und einfach zu entwickelnde API.  Außerdem muss kein HDMI-Kabel von hinten herausragen, da Volumio in jedem Browser vollständig anpassbar ist. <br><br>  Volumio zeigte jedoch auch einige wichtige Mängel, die mich zu weiteren Forschungen veranlassten.  Dies ist zum einen die Downloadzeit und zum anderen das Fehlen der automatischen Wiedergabe.  Nachdem ich die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offizielle Dokumentation studiert hatte</a> (aus der hervorgeht, dass Volumio ein Add-On für mpd (Music Player Daemon) ist), entschied ich, dass es Zeit war, meinen eigenen Wrapper namens RPi-Radio auf js zu schreiben, der diese Probleme lösen würde.  Der Serverteil wird auf Node.js ausgeführt, und der Clientteil (GUI), der React.js verwendet, ist seit OSMC bereit. Er musste nur optimiert werden.  So sieht es jetzt auf dem Smartphone-Bildschirm aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/nz/am/tenzamoyba4r-l2y4ypzu3zpt68.jpeg"></div><br>  Unten sehen Sie eine Tafel, die die Nachteile und Vorteile der einzelnen Frameworks deutlich zeigt. <br><table><tbody><tr><th>  Kriterium </th><th>  <nobr>OSMC</nobr> </th><th>  <nobr>Volumio</nobr> </th><th>  <nobr>RPi-Radio</nobr> </th></tr><tr><td>  Ladezeit </td><td>  <nobr>35 Sek</nobr> </td><td>  <nobr>45 Sek</nobr> </td><td>  <nobr>20 Sek</nobr> </td></tr><tr><td>  Auto Play starten </td><td>  <nobr>Nein*</nobr> </td><td>  <nobr>Nein*</nobr> </td><td>  <nobr>ja</nobr> </td></tr><tr><td>  Die Anzahl der Bänder auf dem Hauptbildschirm der „nativen“ Benutzeroberfläche des Smartphones, um einen Radiosender aus der Favoritenliste auszuwählen ** </td><td>  <nobr>5 + 1 Schriftrolle</nobr> </td><td>  <nobr>4</nobr> </td><td>  <nobr>1</nobr> </td></tr><tr><td>  Die Notwendigkeit für einen Monitor, eine Tastatur und eine Maus *** </td><td>  <nobr>ja</nobr> </td><td>  <nobr>Nein</nobr> </td><td>  <nobr>Nein</nobr> </td></tr><tr><td>  Web-Management </td><td>  <nobr>teilweise</nobr> </td><td>  <nobr>vollständig</nobr> </td><td>  <nobr>teilweise</nobr> </td></tr><tr><td>  Stationsliste bearbeiten </td><td>  <nobr>so la la</nobr> </td><td>  <nobr>die Normen</nobr> </td><td>  <nobr>so la la</nobr> </td></tr><tr><td>  Einfache Ersteinrichtung </td><td>  <nobr>so la la</nobr> </td><td>  <nobr>großartig</nobr> </td><td>  <nobr>mittelmäßig</nobr> </td></tr><tr><td>  Integration mit meiner Smartphone-GUI </td><td>  <nobr>mit Krücken</nobr> </td><td>  <nobr>mit Krücken</nobr> </td><td>  <nobr>out of the box</nobr> </td></tr><tr><td>  Bequemlichkeit des täglichen Gebrauchs </td><td>  <nobr>☆</nobr> </td><td>  <nobr>☆☆</nobr> </td><td>  <nobr>☆☆☆</nobr> </td></tr></tbody></table>  <b>*</b> Eigentlich ja, aber Sie müssen eine Krücke und eine Handfläche aus dem Raspbian-Startup machen.  Im Fall von OSMC ist die Krücke in Python und im Fall von Volumio in js oder bash geschrieben.  Aber in beiden Fällen funktioniert es immer noch nicht so, wie wir es möchten. <br>  <b>**</b> Für OSMC und Volumio sind dies sehr wichtige Parameter, da alle diese Tap-Scrolls jedes Mal ausgeführt werden müssen, wenn Sie die Spalte einschalten.  Für RPi-Radio ist dieser Parameter zwar minimal, aber immer noch nicht so wichtig, da die Spalte beim Einschalten von selbst abgespielt wird. <br>  <b>*** Ich</b> meine die physische Verbindung von Monitor, Tastatur und Maus mit dem Raspberry Pi selbst, d. H.  Fälle, in denen es keine Möglichkeit gibt, die integrierte Weboberfläche oder die SSH-Verbindung zu umgehen. <br><br><div class="spoiler">  <b class="spoiler_title">Unter diesem Spoiler finden Sie eine detaillierte Erläuterung der einzelnen Vergleichspunkte.</b> <div class="spoiler_text"> Eine Startzeit von 20 Sekunden ist meiner Meinung nach das Minimum, das erreicht werden kann, ohne in die Wildnis der Optimierung von Raspbian für dieses Projekt einzutauchen.  So lange braucht Malinka, um das Betriebssystem zu laden und den mpd-Dienst zu starten.  Wahrscheinlich kann dieses Ergebnis verbessert werden, wenn Sie microSDHC durch microSDXC mit einer höheren Lese- / Schreibgeschwindigkeit ersetzen (ich werde dies nach Möglichkeit prüfen).  Überraschenderweise dauert das Laden von Volumio, der vorgibt, leicht und flink zu sein, länger als der OSMC-Monster-Harvester.  45 Sekunden Wartezeit liegen jenseits der Schwelle für eine komfortable Bedienung, und dies war der Hauptgrund, Volumio zu verlassen. <br><br>  Autoplay ist in mpd out of the box vorhanden, ich musste nichts tun, um es zu aktivieren - bequem!  In Volumio wurde diese Funktion, obwohl es sich um einen MPD-Wrapper handelt, für einen schönen Begrüßungsklang erwürgt.  Wie ich bereits geschrieben habe, können Sie ein Skript erstellen und es starten.  Bei OSMC ist die Situation ähnlich. <br><br>  OSMC hat den größten Teil der Benutzerinteraktion über den Monitor: Es gibt eine schöne Oberfläche, die Möglichkeit, Videos, Bilder, Nachrichten zu lesen und das Wetter zu sehen - es gibt viele Dinge, die meine Kolumne in meinem Leben niemals tun wird. <br><br>  Die Webverwaltung von OSMC ist jedoch sehr eingeschränkt, und Sie können die Liste Ihrer Lieblingssender im Radio-Plugin nicht einmal remote konfigurieren - nur über den Monitor.  Bei Volumio - im Gegenteil, alles geschieht nur über das Webinterface.  Das Bearbeiten der Senderliste ist im Browser auf dem Desktop / Laptop am bequemsten, auf Wunsch jedoch auch auf dem Smartphone.  Mit RPi-Radio können Sie nur einen Sender auswählen und den Sound über das Webinterface einstellen.  Die Liste der Stationen und in der Tat alles andere muss über die Konsole über ssh erfolgen.  Die Liste der Sender ist am schwierigsten: Wenn OSMC und Volumio über eigene umfangreiche Bibliotheken mit Internetradiosendern verfügen, musste ich in RPi-Radio die Adressen meiner Lieblingssender manuell im JSON-Format eingeben.  Unbequem, aber nur einmal (oder mehrmals) im Leben. <br><br>  Bei der Ersteinrichtung ist OSMC am schlechtesten.  Zuerst müssen Sie einen Monitor an die "Himbeere" anschließen und das Radio-Plugin konfigurieren, dann müssen Sie die Tonausgabe an den externen IQAudio DAC (der gleiche wie der der Suptronics X400-Karte) über die Konsole oder über ssh konfigurieren.  RPi-Radio hat das gleiche DAC-Setup, aber zumindest alles andere wird auch über ssh erledigt.  Der Marktführer in dieser Kategorie ist natürlich Volumio. Um Sound über einen externen DAC auszugeben, müssen Sie nur das entsprechende Element aus der Dropdown-Liste im Einstellungsmenü auswählen.  Es gibt sogar einen Vergleich auf der offiziellen Suptronics-Website (http://www.suptronics.com/xseries/x400.html). <br><br>  Die GUI in RPi-Radio ist eine einfache Webseite, die auf React.js implementiert ist.  Der Serverteil, der für die Interaktion zwischen der Client-GUI und mpd verantwortlich ist, läuft auf Node.js und ist ein einfacher HTTP- und WebSocket-Server, der auf der <code>express</code> Verbindung <code>Socket.io</code> + <code>http</code> + basiert.  Es wird auf Raspbian als Dienst ausgeführt, wenn das System unmittelbar nach dem Start des mpd-Dienstes eingeschaltet wird und das <code>mpc-js</code> Modul zur Steuerung von mpd verwendet.  Die Client-GUI ist für jeden Browser in meinem Heimnetzwerk einfach über die IP-Adresse oder den Hostnamen "Himbeere" zugänglich.  Perfekt. <br></div></div><br>  RPi-Radio-Quellen werden auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github veröffentlicht</a> .  Im selben Repository, in den entsprechenden Brunchs, finden Sie beide GUI-Anpassungen für die Arbeit mit OSMC und Volumio. <br><br>  Das Ergebnis meiner Übungen, RPi-Radio, geht über den Rahmen einer einfachen Ergänzung einer einzelnen Spalte hinaus.  Dies ist eine Art vorgefertigte Lösung, die nicht nur den Raspberry Pi in einen Internetradioempfänger verwandelt, sondern auch jedes Gerät mit Audioausgang, Internetzugang und der Möglichkeit, mpd und Node.js auszuführen.  Der Hauptvorteil eines solchen Systems ist das Fehlen von allem Überflüssigen.  Eigentlich, wie es in Sonos gemacht wurde, in dem Ideal, das ich erreichen möchte. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de410227/">https://habr.com/ru/post/de410227/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de410213/index.html">Sicheres Android für Baby</a></li>
<li><a href="../de410219/index.html">Acht Beats: Über Sounds in alten Spielen</a></li>
<li><a href="../de410221/index.html">Auswahl eines Heimkino-Projektors</a></li>
<li><a href="../de410223/index.html">Bergmann aus New York musste Geräte aufgrund einer Störung des T-Mobile-Netzwerks trennen</a></li>
<li><a href="../de410225/index.html">Fragen Sie Ethan: Bewegt sich das Licht immer mit der gleichen Geschwindigkeit?</a></li>
<li><a href="../de410229/index.html">Eine schwache körperliche Aktivität wurde mit einem geschwächten Nervengewebe und einem Demenzrisiko in Verbindung gebracht.</a></li>
<li><a href="../de410231/index.html">Schwaches Licht macht es dümmer und Flimmern heilt Alzheimer mit der richtigen Frequenz</a></li>
<li><a href="../de410233/index.html">Valery Litvin, CTO Cyber ​​• Fund, „Blockchain. Template Gap ist eine beliebte Einführung in die Blockchain-Technologie und die Kryptoökonomie. “</a></li>
<li><a href="../de410235/index.html">Enthusiasten müssen mit 15 Monaten Gefängnis rechnen, weil sie kostenlose Dell Restore-CDs gerippt haben</a></li>
<li><a href="../de410237/index.html">Eltern sollten ihre Kinder nicht ausspionieren</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>