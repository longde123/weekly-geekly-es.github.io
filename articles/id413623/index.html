<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ½ ğŸï¸ ğŸšœ Cara membuat bicara Omega 2 atau legenda I2S ğŸ§• ğŸ—» ğŸš³</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apa masalahnya dengan I2S, katamu? Hubungkan kabel ke pin yang diinginkan dan semuanya berfungsi. 

 Saya juga berpikir begitu, tetapi dengan komputer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara membuat bicara Omega 2 atau legenda I2S</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413623/">  Apa masalahnya dengan I2S, katamu?  Hubungkan kabel ke pin yang diinginkan dan semuanya berfungsi. <br><br><img align="left" width="250" src="https://habrastorage.org/webt/io/ka/bd/iokabddcyoi7quzs2gfgy8imhgi.png" alt="Komputer mini Omega2">  Saya juga berpikir begitu, tetapi dengan komputer mini Omega2 ternyata tidak sesederhana itu.  Jadi saya memutuskan untuk menulis artikel ini. <br><br>  Mari kita mulai dengan apa yang saya raih pada akhirnya.  Saya menghubungkan chip TDA1543 (stereo I2S DAC dengan resolusi amplitudo 16 bit) ke komputer mikro Omega 2. Suaranya bagus, saya menikmati mendengarkan stasiun radio Internet (harus ada lelucon tentang suara tabung audiophile dan hangat).  Namun, saya masih tidak mengerti alasan overloading audio, tetapi hanya belajar untuk memotongnya dengan metode kruk.  Dan saya sangat ingin mendengar ide Anda tentang masalah ini. <br><a name="habracut"></a><br>  Mungkin seseorang tidak tahu apa itu Omega2.  Ini adalah komputer mini di mana Linux didasarkan pada LEDE, yang pada dasarnya adalah cabang dari OpenWRT.  Prosesor MT7688, 64 MB RAM dan 16 MB Flash.  Secara umum, Anda dapat membaca lebih lanjut di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Wikipedia</a> , di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> dan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  <b>Penting juga untuk dicatat bahwa semua tindakan dilakukan pada firmware asli versi 0.2.0</b> <br><br>  Dan sekarang, mari kita bicara sedikit tentang <s>rasa sakit</s> ketika saya sampai pada ini. <br>  Pertama-tama, semuanya transparan, kami menghubungkan semua lini I2S TDA'shki dan Omega.  Ini adalah jalur clock CLK, jalur sinkronisasi saluran WS, jalur data DATA, dan ground GND masing-masing.  Plus, kami menambahkan beberapa resistor dan kapasitor, tetapi yang utama adalah tala resistor pada kaki ke-7 dari TDA1543.  Offset nol harus diterapkan pada kaki ini, untuk ini saya pertama kali tertidur.  Faktanya adalah bahwa chip TDA1543, unik untuk waktunya, berjalan pada kekuatan unipolar.  Nah, sinyal suara adalah osilasi berkenaan dengan 0 turun dan naik, jadi Anda perlu menggeser nol ini ke tengah rentang tegangan suplai dan mendapatkan osilasi relatif ke titik ini.  Semuanya ditulis dalam datasheet, tetapi awalnya saya membuat rangkaian dengan resistor konvensional (dari internet Anda) dan menerima distorsi yang tidak saya mengerti untuk waktu yang lama.  Pasang resistor variabel dan dapatkan bias nol jika tidak ada sinyal di input (mode siaga) 1.3-1.5 V (dengan catu daya 3.3 V).  Ternyata skema berikut. <br><br><img src="https://habrastorage.org/webt/nv/wr/wd/nvwrwdpyw7fjsnbhslbvqw7nq5i.png" alt="TDA1543 ke Diagram Koneksi Omega2"><br><br>  Selanjutnya, mengikuti langkah-langkah dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs resmi bawang merah, kami</a> diperbarui untuk mengembangkan versi firmware, yang menambahkan dukungan untuk I2S (saya ingin menulis kurang dari satu tahun, tetapi tidak ada ... berlalu).  Kami memperbarui dan menginstal paket yang diperlukan untuk suara: <br><br><pre><code class="hljs sql">opkg <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> opkg <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> alsa-utils mpg123</code> </pre> <br>  Alihkan GPIO ke mode I2S dengan perintah: <br><br><pre> <code class="hljs swift">omega2-ctrl gpiomux <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> i2s i2s</code> </pre> <br>  Kami menyalin file tes wav, saya menggunakan Suzanne Vega klasik - Tom's Diner.  Dan coba mainkan menggunakan aplay: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">aplay</span></span> za_sebya_i_za_sashky.wav</code> </pre> <br>  Dan kami mendengar distorsi.  Hanya banyak hard overload.  Sedemikian rupa sehingga Anda mungkin tampak seperti kembali pada tahun 2007. Tapi motif kejutan dari lagu tersebut dapat ditelusuri di dalamnya, jadi sesuatu bekerja di sana, bukan? <br><br>  Saya mencoba untuk mengecilkan volume di mixer alsa - tidak berhasil, karena driver diasah oleh chip MAX98090, yang dikendalikan oleh I2C dan karenanya semua pengaturan hanya dikirim ke I2C, dan data I2S itu sendiri tidak berubah. <br><br>  Oke, buka datasheet pada MAX98090.  Dan kita mulai terang.  Microcircuit mendukung banyak format data input: I2S / LJ / RJ / TDM dan dapat mencerna sedikit banyak.  Dan prosesor MT7688 itu sendiri juga bisa lebih besar dan lebih cepat dari TDDA.  Mungkin masalah data di I2S? <br><br>  Saya secara bertahap bermain-main dengan osiloskop. <br><br>  <i>Bit 16 bit?</i>  Ya  Saya menggantung garis WS pada satu saluran di saluran lain, garis CLK.  Dan saya yakin dengan panjang gelombang WS - 16. <br><br>  <i>Frekuensi operasi yang salah?</i>  Tidak.  Frekuensi semuanya sesuai dengan pekerja.  WS - 44100 Hz, CLK - 1411200 Hz. <br><br>  <i>Memformat nomor tipe dalam data?</i>  Format karakter yang benar digunakan (ya, saya pikir unsigned diperlukan).  Dia memeriksa dengan membuat sinus buatan dan memindahkannya ke atas dan ke bawah relatif ke 0 dalam keberanian dan mengubah amplitudo.  Tidak ada perubahan kualitatif. <br>  <i>Apakah ada I2S?</i>  kemungkinan besar ya.  Pertama, karena kemudian semuanya bekerja untuk saya (baik, atau menurut saya seperti itu), dan kedua, saya mencoba memeriksa dengan osiloskop, walaupun tanpa penganalisa logika ini tentu saja sulit.  Mungkin bermanfaat untuk melakukan tes yang lebih akurat dan membawa Beaglebone Anda ke sini. <br><br>  Tampaknya semuanya benar, dan untuk orang-orang dari forum bawang semuanya bekerja, tetapi kebenarannya ada pada chip lain: MAX98357A dan PCM5102.  Secara umum, saya menyerah ide untuk bermain wav'ki dan mendapatkan mpg123 untuk memainkan mp3.  Saya memotongnya dengan flag -C dan mulai menurunkan volume.  Dan di sini saya duduk.  Saat mengatur level volume di program mpg123 menjadi sekitar 1 persen, saya mendapatkan suara yang bagus.  Chip berayun ke amplitudo penuh.  Saya memulai radio dengan flag -f 128: <br><br><pre> <code class="hljs powershell">mpg123 <span class="hljs-operator"><span class="hljs-operator">-f</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span> http://us2.internet<span class="hljs-literal"><span class="hljs-literal">-radio</span></span>.com:<span class="hljs-number"><span class="hljs-number">8443</span></span>/</code> </pre> <br>  Dan suara-suara blues Amerika yang santai bertemu dengan saya.  Omong-omong, tautan ke radio mungkin tidak berfungsi, ambil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dari sini</a> . <br><br><img align="left" width="250" src="https://habrastorage.org/webt/5q/rr/2i/5qrr2ix-zdxzylgae0zhc1-jmr0.png" alt="gambar">  Saya memulai sinyal gigi gergaji dan secara bertahap meningkatkan amplitudo.  Akibatnya, saya melihat bahwa distorsi adalah lompatan kacau dari 0 ke tegangan suplai dan semakin tinggi levelnya, semakin banyak lompatan ini.  Butuh beberapa minggu untuk membuat Omega berbicara.  Saya sangat lelah dan karena itu, pada saat ini saya memutuskan untuk berhenti - itu berhasil! <br><br>  Namun, saya mengerti bahwa ini tidak mungkin, jadi saya akan senang mendengar ide dan saran Anda.  Nah, bagi mereka yang mencoba membuat omega berbicara dengan kesakitan, saya harap saya membantu Anda! <br><br>  Terima kasih semuanya! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id413623/">https://habr.com/ru/post/id413623/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413613/index.html">Pesawat ruang angkasa ini akan datang lebih dekat ke Matahari daripada apa pun yang datang sebelumnya dan tidak akan meleleh</a></li>
<li><a href="../id413615/index.html">Virus VPNFilter, yang menginfeksi 500 ribu router, ternyata bahkan lebih berbahaya daripada yang diperkirakan</a></li>
<li><a href="../id413617/index.html">Mengubah 30% dari kerangka acuan dan dua kali melebihi rencana: bagaimana VTB melaporkan otomatis</a></li>
<li><a href="../id413619/index.html">Informasi baru tentang VPNFilter: melakukan serangan pada perangkat pengguna, memperluas daftar peralatan jaringan</a></li>
<li><a href="../id413621/index.html">Hidup itu. Mati Bangkit kembali Ulangi</a></li>
<li><a href="../id413627/index.html">Generasi Kunci Hierarkis</a></li>
<li><a href="../id413631/index.html">Enkripsi token sertifikat pada token di Linux menggunakan contoh klien email JaCarta, Debian, dan Evolution</a></li>
<li><a href="../id413633/index.html">Bagaimana saya menguasai bahasa Inggris</a></li>
<li><a href="../id413635/index.html">Kami merancang peternakan. Dan gunakan nanoCAD VK?</a></li>
<li><a href="../id413637/index.html">Google menerbitkan 7 prinsip etika AI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>