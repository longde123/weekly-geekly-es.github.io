<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äçü§ù‚Äçüë®üèª üå¨Ô∏è üçΩÔ∏è Definieren der Textcodierung in PHP anstelle von mb_detect_encoding üêé üî™ üë®üèΩ‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es gibt verschiedene Zeichenkodierungen des kyrillischen Alphabets. 

 Verwenden Sie beim Erstellen von Websites im Internet normalerweise Folgendes: ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Definieren der Textcodierung in PHP anstelle von mb_detect_encoding</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466113/">  Es gibt verschiedene Zeichenkodierungen des kyrillischen Alphabets. <br><br>  Verwenden Sie beim Erstellen von Websites im Internet normalerweise Folgendes: <br><br><ul><li>  utf-8 </li><li>  Windows-1251 </li><li>  koi8-r </li></ul><br>  Beliebtere Codierungen: <br><br><ul><li>  ISO-8859-5 </li><li>  ibm866 </li><li>  mac-kyrillisch </li></ul><br>  Dies ist wahrscheinlich nicht die ganze Liste, dies sind die Kodierungen, denen ich oft begegne. <br><br>  Manchmal ist es notwendig, die Kodierung des Textes zu bestimmen.  Und in PHP gibt es daf√ºr sogar eine Funktion: <br><br><pre><code class="php hljs">mb_detect_encoding</code> </pre> <br>  Aber wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">m00t</a> in dem Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Definieren der Textcodierung in PHP schrieb - Ein √úberblick √ºber vorhandene L√∂sungen und ein weiteres Fahrrad</a> <br><blockquote>  Kurz gesagt, es funktioniert nicht. </blockquote>  Nachdem ich die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">m00t-</a> Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gelesen hatte, lie√ü</a> ich mich nicht von der Methode inspirieren und fand diese L√∂sung: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bestimmen der Textcodierung in PHP und Python</a> <br>  Wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">m00t</a> sagte <br><blockquote>  wieder Zeichencodes </blockquote>  Ich habe die Funktion zum Bestimmen der Codierung durch Zeichencodes getestet, das Ergebnis hat mich zufriedengestellt und ich habe diese Funktion einige Jahre lang verwendet. <br><br>  K√ºrzlich habe ich beschlossen, das Projekt, in dem ich diese Funktion verwendet habe, neu zu schreiben. Auf packagist.org <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habe</a> ich ein fertiges Paket gefunden. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cnpait / detect_encoding</a> , in dem die Codierung mithilfe der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">m00t-</a> Methode bestimmt wird <br><br>  Gleichzeitig wurde das angegebene Paket mehr als 1200 Mal installiert, was bedeutet, dass nicht nur f√ºr mich die Aufgabe besteht, die Textcodierung regelm√§√üig zu bestimmen. <br><br>  Ich w√ºrde dieses Paket installieren und mich beruhigen, aber ich beschloss, "verwirrt zu werden". <br><a name="habracut"></a><br>  Im Allgemeinen habe ich mein Paket erstellt: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">onnov / detect-encoding</a> . <br><br>  Wie man es benutzt, ist in README.md geschrieben <br><br>  Ich werde dar√ºber schreiben, wie man es testet und mit dem Paket <b>cnpait / detect_encoding vergleicht</b> . <br><br><h4>  Testmethode </h4><br>  Nehmen Sie den gro√üen Text: Tolstoi - Anna Karenina <br>  Insgesamt - 1'701'480 Zeichen <br><br>  Wir entfernen alles Unn√∂tige, wir lassen nur das kyrillische Alphabet: <br><br><pre> <code class="php hljs">$text = preg_replace(<span class="hljs-string"><span class="hljs-string">'/[^--]/ui'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, $text);</code> </pre> <br>  Es blieben 1'336'252 kyrillische Zeichen. <br><br>  In der Schleife nehmen wir einen Teil des Textes (5, 15, 30, ... Zeichen), konvertieren ihn in eine bekannte Codierung und versuchen, die Codierung durch das Skript zu bestimmen.  Dann richtig vergleichen oder nicht. <br><br>  Hier ist die Tabelle, in der sich die Codierung links befindet, die Anzahl der Zeichen, anhand derer die Codierung oben bestimmt wird. Die Tabelle zeigt das Zuverl√§ssigkeitsergebnis in %% <br><div class="scrollable-table"><table><thead><tr><th>  Buchstaben -&gt; </th><th>  5 </th><th>  15 </th><th>  30 </th><th>  60 </th><th>  120 </th><th>  180 </th><th>  270 </th></tr></thead><tbody><tr><td>  Windows-1251 </td><td>  99,13 </td><td>  98,83 </td><td>  98,54 </td><td>  99.04 </td><td>  99,73 </td><td>  99,93 </td><td>  100,0 </td></tr><tr><td>  koi8-r </td><td>  99,89 </td><td>  99,98 </td><td>  100,0 </td><td>  100,0 </td><td>  100,0 </td><td>  100,0 </td><td>  100,0 </td></tr><tr><td>  ISO-8859-5 </td><td>  81,79 </td><td>  99,27 </td><td>  99,98 </td><td>  100,0 </td><td>  100,0 </td><td>  100,0 </td><td>  100,0 </td></tr><tr><td>  ibm866 </td><td>  99,81 </td><td>  99,99 </td><td>  100,0 </td><td>  100,0 </td><td>  100,0 </td><td>  100,0 </td><td>  100,0 </td></tr><tr><td>  mac-kyrillisch </td><td>  12.79 </td><td>  47,49 </td><td>  73,48 </td><td>  92,15 </td><td>  99,30 </td><td>  99,94 </td><td>  100,0 </td></tr></tbody></table></div><br>  Bei der schlechtesten Genauigkeit mit Mac Cyrillic ben√∂tigen Sie mindestens 60 Zeichen, um diese Codierung mit einer Genauigkeit von 92,15% zu bestimmen.  Die Windows-1251-Codierung weist ebenfalls eine sehr geringe Genauigkeit auf.  Dies liegt an der Tatsache, dass sich die Nummern ihrer Zeichen in den Tabellen stark √ºberschneiden. <br><br>  Gl√ºcklicherweise werden mac-cyrillic- und ibm866-Codierungen nicht zum Codieren von Webseiten verwendet. <br><br>  Versuchen wir es ohne sie: <br><div class="scrollable-table"><table><thead><tr><th>  Buchstaben -&gt; </th><th>  5 </th><th>  10 </th><th>  15 </th><th>  30 </th><th>  60 </th></tr></thead><tbody><tr><td>  Windows-1251 </td><td>  99,40 </td><td>  99,69 </td><td>  99,86 </td><td>  99,97 </td><td>  100,0 </td></tr><tr><td>  koi8-r </td><td>  99,89 </td><td>  99,98 </td><td>  99,98 </td><td>  100,0 </td><td>  100,0 </td></tr><tr><td>  ISO-8859-5 </td><td>  81,79 </td><td>  96,41 </td><td>  99,27 </td><td>  99,98 </td><td>  100,0 </td></tr></tbody></table></div><br>  Die Genauigkeit der Bestimmung ist auch in kurzen S√§tzen von 5 bis 10 Buchstaben hoch.  Und f√ºr S√§tze mit 60 Buchstaben erreicht die Bestimmungsgenauigkeit 100%.  Die Kodierung wird jedoch sehr schnell ermittelt. Beispielsweise wird Text, der l√§nger als 1.300.000 kyrillische Zeichen ist, in 0,00096 Sekunden √ºberpr√ºft.  (auf meinem Computer) <br><br>  Und welche Ergebnisse zeigt die von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">m00t</a> beschriebene statistische Methode: <br><div class="scrollable-table"><table><thead><tr><th>  Buchstaben -&gt; </th><th>  5 </th><th>  10 </th><th>  15 </th><th>  30 </th><th>  60 </th></tr></thead><tbody><tr><td>  Windows-1251 </td><td>  88,75 </td><td>  96,62 </td><td>  98,43 </td><td>  99,90 </td><td>  100,0 </td></tr><tr><td>  koi8-r </td><td>  85,15 </td><td>  95,71 </td><td>  97,96 </td><td>  99,91 </td><td>  100,0 </td></tr><tr><td>  ISO-8859-5 </td><td>  88,60 </td><td>  96,77 </td><td>  98,58 </td><td>  99,93 </td><td>  100,0 </td></tr></tbody></table></div><br>  Wie Sie sehen k√∂nnen, sind die Ergebnisse der Bestimmung der Codierung gut.  Die Geschwindigkeit des Skripts ist hoch, insbesondere bei kurzen Texten, bei gro√üen Texten ist die Geschwindigkeit erheblich geringer.  Text, der l√§nger als 1.300.000 kyrillische Zeichen ist, wird in 0,32 Sekunden √ºberpr√ºft.  (auf meinem Computer). <br><br><h4>  Meine Erkenntnisse </h4><br><ul><li>  Beide Methoden liefern gute Ergebnisse. </li><li>  Die Genauigkeit der Methoden ist nah. </li><li>  Die Geschwindigkeit der Bestimmung durch Zeichencodes ist in gro√üen Texten h√∂her, dies ist jedoch kaum von gro√üer Bedeutung, da  Es ist unwahrscheinlich, dass jemand so gro√üe Texte √ºberpr√ºft. </li><li>  Das statistische Verfahren hat immer noch das Potenzial, die Genauigkeit der Codierungsbestimmung zu erh√∂hen. </li></ul><br>  Welche Methode Sie verwenden m√ºssen, liegt bei Ihnen.  Grunds√§tzlich k√∂nnen Sie beide gleichzeitig verwenden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466113/">https://habr.com/ru/post/de466113/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466103/index.html">√úberwachung der Cloud-Sicherheit</a></li>
<li><a href="../de466105/index.html">√úbertakten der Magento Rest API mit RoadRunner</a></li>
<li><a href="../de466107/index.html">Do-it-yourself-Smart-Home-System</a></li>
<li><a href="../de466109/index.html">Probleml√∂sung mit pwnable.kr 22 - Brainfuck. Ret2libc-Angriff</a></li>
<li><a href="../de466111/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 32. Kennwortwiederherstellung, XODEM / TFTPDNLD und Cisco-Lizenzaktivierung</a></li>
<li><a href="../de466121/index.html">Klangerzeugung auf AVR-Mikrocontrollern mithilfe der Wavetable-Methode mit Polyphonieunterst√ºtzung</a></li>
<li><a href="../de466123/index.html">Wachstum. Gewicht. Drei Nachbarn</a></li>
<li><a href="../de466127/index.html">KKW Kola oder am Reaktor stehen</a></li>
<li><a href="../de466129/index.html">Effizienz des Transports mit Benzin, Batterien und Wasserstoff</a></li>
<li><a href="../de466135/index.html">Megapack: Wie Factorio-Entwickler es geschafft haben, das 200-Spieler-Multiplayer-Problem zu l√∂sen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>