<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôâ üèôÔ∏è üóº Utilisation de modules JavaScript en production: situation actuelle. Partie 1 üë∂üèΩ üî• üíáüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a deux ans, j'ai √©crit sur une technique qui est maintenant commun√©ment appel√©e le mod√®le module / nomodule. Son application vous permet d'√©crire...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation de modules JavaScript en production: situation actuelle. Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/466537/"> Il y a deux ans, j'ai √©crit sur une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">technique</a> qui est maintenant commun√©ment appel√©e le mod√®le module / nomodule.  Son application vous permet d'√©crire du code JavaScript en utilisant les capacit√©s d'ES2015 +, puis d'utiliser des bundlers et des transpilers pour cr√©er deux versions de la base de code.  L'un d'eux contient une syntaxe moderne (il est charg√© √† l'aide d'une structure comme <code>&lt;script type="module"&gt;</code> , et le second est la syntaxe ES5 (il est charg√© √† l'aide de <code>&lt;script nomodule&gt;</code> ). Le mod√®le module / nomodule permet d'envoyer aux navigateurs qui prennent en charge les modules, beaucoup moins de code que les navigateurs qui ne prennent pas en charge cette fonctionnalit√©, ce mod√®le est d√©sormais pris en charge par la plupart des frameworks Web et des outils de ligne de commande. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/sd/_p/je/sd_pjea-digdrv7bbr_b3n4wdtq.jpeg"></a> <br><br>  Auparavant, m√™me en consid√©rant la possibilit√© d'envoyer du code JavaScript moderne en production, et m√™me si la plupart des navigateurs prenaient en charge les modules, je recommandais de collecter le code en bundles. <br><a name="habracut"></a><br>  Pourquoi?  Surtout parce que j'avais l'impression que le chargement des modules dans le navigateur √©tait lent.  M√™me si les protocoles r√©cents, tels que HTTP / 2, prenaient th√©oriquement en charge le chargement efficace de plusieurs fichiers, toutes les √©tudes de performances de l'√©poque ont conclu que l'utilisation de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bundlers</a> est toujours plus efficace que l'utilisation de modules. <br><br>  Mais il faut admettre que ces √©tudes √©taient incompl√®tes.  Les cas de test utilisant les modules qui y √©taient √©tudi√©s consistaient en des fichiers de code source non optimis√©s et non minimis√©s qui √©taient d√©ploy√©s en production.  Il n'y avait aucune comparaison du bundle optimis√© avec des modules avec le script classique optimis√©. <br><br>  Cependant, pour √™tre honn√™te, il n'existait aucun moyen optimal de d√©ployer les modules √† ce moment-l√†.  Mais maintenant, gr√¢ce √† certaines am√©liorations modernes des technologies de bundler, il est possible de d√©ployer du code de production sous la forme de modules ES2015 en utilisant √† la fois des commandes d'importation statiques et dynamiques, et en m√™me temps de recevoir des performances sup√©rieures √† celles qui peuvent √™tre obtenues en utilisant les options disponibles, dans lesquelles les modules ne sont pas utilis√©s. <br><br>  Il est √† noter que sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site</a> sur lequel le mat√©riel original est publi√©, dont la premi√®re partie de la traduction est publi√©e aujourd'hui, les modules sont utilis√©s en production depuis plusieurs mois. <br><br><h2>  <font color="#3AC1EF">Id√©es fausses sur les modules</font> </h2><br>  Beaucoup de gens avec qui j'ai parl√© rejettent compl√®tement les modules, ne les consid√©rant m√™me pas comme l'une des options pour les applications de production √† grande √©chelle.  Beaucoup d'entre eux citent l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©tude m√™me</a> que j'ai d√©j√† mentionn√©e.  √Ä savoir, cette partie de celui-ci, qui stipule que les modules ne doivent pas √™tre utilis√©s en production, sauf s'il s'agit de ¬´petites applications Web qui comprennent moins de 100 modules qui diff√®rent dans un arbre de d√©pendance relativement¬´ petit ¬ª(c'est-√†-dire - un dont la profondeur ne d√©passe pas 5 niveaux). ¬ª <br><br>  Si vous avez d√©j√† consult√© le r√©pertoire <code>node_modules</code> de l'un de vos projets, vous savez probablement que m√™me une petite application peut facilement avoir plus de 100 modules de d√©pendance.  Je veux vous offrir un aper√ßu du nombre de modules disponibles dans certains des packages npm les plus populaires. <br><div class="scrollable-table"><table><tbody><tr><td>  Paquet <br></td><td>  Nombre de modules <br></td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">date-fns</a> <br></td><td>  729 <br></td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lodash-es</a> <br></td><td>  643 <br></td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rxjs</a> <br></td><td>  226 <br></td></tr></tbody></table></div><br>  C'est l√† que la principale id√©e fausse concernant les modules est enracin√©e.  Les programmeurs pensent que lorsqu'il s'agit d'utiliser des modules en production, ils n'ont que deux options.  La premi√®re consiste √† d√©ployer tout le code source dans sa forme existante (y compris le r√©pertoire <code>node_modules</code> ).  La seconde est de ne pas utiliser du tout de modules. <br><br>  Cependant, si vous regardez attentivement les recommandations de l'√©tude cit√©e ci-dessus, vous constaterez qu'il n'y a rien √† dire que le chargement des modules est plus lent que le chargement des scripts r√©guliers.  Il ne dit pas que les modules ne devraient pas √™tre utilis√©s du tout.  Il √©voque simplement le fait que si quelqu'un d√©ploie des centaines de fichiers de module non infect√©s en production, Chrome ne pourra pas les charger aussi rapidement qu'un seul ensemble r√©duit.  En cons√©quence, l'√©tude conseille de continuer √† utiliser des bundlers, des compilateurs et des minificateurs. <br><br>  Mais tu sais quoi?  Le fait est que vous pouvez utiliser tout cela et utiliser des modules en production. <br><br>  En fait, les modules sont un format dans lequel nous devons nous efforcer de convertir le code, car les navigateurs savent d√©j√† comment charger les modules (et les navigateurs qui ne peuvent pas le faire peuvent charger une solution de secours en utilisant le m√©canisme du nomodule).  Si vous regardez le code g√©n√©r√© par les bundlers les plus populaires, vous trouverez de nombreux fragments de mod√®le dont le but est uniquement de charger dynamiquement d'autres codes et de g√©rer les d√©pendances.  Mais tout cela ne sera pas n√©cessaire si nous utilisons simplement les modules et les expressions d' <code>import</code> et d' <code>export</code> . <br><br>  Heureusement, au moins l'un des bundlers modernes populaires ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rollup</a> ) prend en charge les modules sous forme de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">donn√©es</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sortie</a> .  Cela signifie que vous pouvez traiter le code avec un bundler et d√©ployer des modules dans la production (sans utiliser de fragments de mod√®le pour charger le code).  Et, comme Rollup a une excellente impl√©mentation de l'algorithme de tremblement d'arbre (le meilleur que j'ai vu dans les bundlers), la cr√©ation de programmes sous forme de modules √† l'aide de Rollup vous permet d'obtenir un code plus petit que la taille du m√™me code obtenu lors de l'application. d'autres m√©canismes disponibles aujourd'hui. <br><br>  Il convient de noter qu'ils <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pr√©voient d'</a> ajouter la prise en charge des modules dans la prochaine version de Parcel.  Webpack ne prend pas encore en charge les modules en tant que format de sortie, mais le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voici</a> - des discussions qui se concentrent sur ce probl√®me. <br><br>  Une autre id√©e fausse concernant les modules est que certaines personnes pensent que les modules ne peuvent √™tre utilis√©s que si 100% des d√©pendances du projet utilisent des modules.  Malheureusement (je pense que c'est un grand regret), la plupart des packages npm sont toujours en cours de pr√©paration pour publication au format CommonJS (certains modules, m√™me ceux √©crits √† l'aide des fonctionnalit√©s ES2015, sont traduits au format CommonJS avant d'√™tre publi√©s au npm)! <br><br>  Ici, encore une fois, je tiens √† noter que Rollup a un plugin ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rollup-plugin-commonjs</a> ) qui prend le code source d'entr√©e √©crit √† l'aide de CommonJS et le convertit en code ES2015.  Certainement, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">il</a> serait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pr√©f√©rable</a> que le format de d√©pendance utilis√© d√®s le d√©but utilise le format de module ES2015.  Mais si certaines d√©pendances ne le sont pas, cela ne vous emp√™che pas de d√©ployer des projets √† l'aide de modules en production. <br><br>  Dans les parties suivantes de cet article, je vais vous montrer comment je collecte des projets dans des bundles qui utilisent des modules (y compris l'utilisation d'importations dynamiques et de s√©paration de code), je vais vous expliquer pourquoi ces solutions sont g√©n√©ralement plus productives que les scripts classiques, et montrer comment elles fonctionnent avec des navigateurs qui ne prennent pas en charge les modules. <br><br><h2>  <font color="#3AC1EF">Strat√©gie de cr√©ation de code optimale</font> </h2><br>  Le code du b√¢timent pour la production est toujours une tentative d'√©quilibrer les avantages et les inconv√©nients de diverses solutions.  D'une part, le d√©veloppeur souhaite que son code se charge et s'ex√©cute le plus rapidement possible.  En revanche, il ne souhaite pas t√©l√©charger de code qui ne sera pas utilis√© par les utilisateurs du projet. <br><br>  De plus, les d√©veloppeurs ont besoin de savoir que leur code est le mieux adapt√© √† la mise en cache.  Le gros probl√®me du regroupement de code est que tout changement dans le code, m√™me une ligne modifi√©e, entra√Æne l'invalidation du cache de l'ensemble du paquet.  Si vous d√©ployez une application compos√©e de milliers de petits modules (pr√©sent√©s exactement sous la forme dans laquelle ils sont pr√©sents dans le code source), vous pouvez en toute s√©curit√© apporter des modifications mineures au code et en m√™me temps savoir que la plupart du code d'application sera mis en cache .  Mais, comme je l'ai d√©j√† dit, une telle approche du d√©veloppement peut probablement signifier que le chargement du code la premi√®re fois que vous visitez une ressource peut prendre plus de temps que l'utilisation d'approches plus traditionnelles. <br><br>  En cons√©quence, nous sommes confront√©s √† une t√¢che difficile, qui est de trouver la bonne approche pour diviser les faisceaux en plusieurs parties.  Nous devons trouver le bon √©quilibre entre la vitesse de chargement des mat√©riaux et leur mise en cache √† long terme. <br><br>  La plupart des bundlers utilisent par d√©faut des techniques de fractionnement de code bas√©es sur des commandes d'importation dynamique.  Mais je dirais que diviser le code uniquement en mettant l'accent sur l'importation dynamique ne permet pas de le diviser en fragments suffisamment petits.  Cela est particuli√®rement vrai pour les sites avec de nombreux utilisateurs de retour (c'est-√†-dire dans les situations o√π la mise en cache est importante). <br><br>  Je pense que le code doit √™tre divis√© en fragments aussi petits que possible.  Il vaut la peine de r√©duire la taille des fragments jusqu'√† ce que leur nombre augmente tellement que cela affectera la vitesse de t√©l√©chargement du projet.  Et bien que je recommande d√©finitivement √† chacun de faire sa propre analyse de la situation, si vous croyez aux calculs approximatifs effectu√©s dans l'√©tude que j'ai mentionn√©e, lors du chargement de moins de 100 modules, il n'y a pas de ralentissement notable du chargement.  Une √©tude distincte sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://medium.com/%40asyncmax/the-right-way-to-bundle-your-assets-for-faster-sites-over-">les performances HTTP / 2</a> n'a pas r√©v√©l√© de ralentissement notable du projet lors du t√©l√©chargement de moins de 50 fichiers.  L√†, cependant, ils n'ont test√© que des options dans lesquelles le nombre de fichiers √©tait de 1, 6, 50 et 1000. En cons√©quence, probablement 100 fichiers sont une valeur √† laquelle vous pouvez facilement naviguer sans craindre de perdre en vitesse de t√©l√©chargement. <br><br>  Alors, quelle est la meilleure fa√ßon de diviser le code de mani√®re agressive, mais pas trop agressive?  En plus de diviser le code en fonction des commandes d'importation dynamique, je vous conseille de regarder de plus pr√®s le fractionnement du code en packages npm.  Avec cette approche, ce qui est import√© dans le projet √† partir du dossier <code>node_modules</code> tombe dans un fragment s√©par√© du code fini bas√© sur le nom du package. <br><br><h2>  <font color="#3AC1EF">S√©paration des colis</font> </h2><br>  J'ai dit ci-dessus que certaines des capacit√©s modernes des bundlers permettent d'organiser un sch√©ma haute performance pour le d√©ploiement de projets bas√©s sur des modules.  Ce dont je parlais est repr√©sent√© par deux nouvelles fonctionnalit√©s de cumul.  Le premier est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la s√©paration automatique du code</a> via <code>import()</code> commandes d' <code>import()</code> dynamique <code>import()</code> (ajout√©es <a href="">dans la v1.0.0</a> ).  La deuxi√®me option est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la s√©paration manuelle du code</a> effectu√©e par le programme sur la <code>manualChunks</code> option <code>manualChunks</code> (ajout√©e dans la <a href="">v1.11.0</a> ). <br><br>  Gr√¢ce √† ces deux fonctionnalit√©s, il est d√©sormais tr√®s facile de configurer le processus de construction, dans lequel le code est divis√© au niveau du package. <br><br>  Voici un exemple de configuration qui utilise l'option <code>manualChunks</code> , gr√¢ce √† laquelle chaque module import√© de <code>node_modules</code> tombe dans un fragment de code distinct dont le nom correspond au nom du package (techniquement, le nom du r√©pertoire du package dans le dossier <code>node_modules</code> ): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {  <span class="hljs-attr"><span class="hljs-attr">input</span></span>: {    <span class="hljs-attr"><span class="hljs-attr">main</span></span>: <span class="hljs-string"><span class="hljs-string">'src/main.mjs'</span></span>,  },  <span class="hljs-attr"><span class="hljs-attr">output</span></span>: {    <span class="hljs-attr"><span class="hljs-attr">dir</span></span>: <span class="hljs-string"><span class="hljs-string">'build'</span></span>,    <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'esm'</span></span>,    <span class="hljs-attr"><span class="hljs-attr">entryFileNames</span></span>: <span class="hljs-string"><span class="hljs-string">'[name].[hash].mjs'</span></span>,  },  manualChunks(id) {    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (id.includes(<span class="hljs-string"><span class="hljs-string">'node_modules'</span></span>)) {      <span class="hljs-comment"><span class="hljs-comment">//   ,    `node_modules`.      //   - ,       .      const dirs = id.split(path.sep);      return dirs[dirs.lastIndexOf('node_modules') + 1];    }  }, }</span></span></code> </pre> <br>  L'option <code>manualChunk</code> accepte une fonction qui accepte, comme argument unique, le chemin d'acc√®s au fichier de module.  Cette fonction peut renvoyer un nom de cha√Æne.  Ce qu'il renvoie pointera vers un fragment de l'assembly auquel le module actuel doit √™tre ajout√©.  Si la fonction ne renvoie rien, le module sera ajout√© au fragment par d√©faut. <br><br>  Consid√©rons une application qui importe les <code>cloneDeep()</code> , <code>debounce()</code> et <code>find()</code> du <code>lodash-es</code> .  Si vous appliquez la configuration ci-dessus lors de la cr√©ation de cette application, chacun de ces modules (ainsi que chaque module <code>lodash</code> import√© par ces modules) sera plac√© dans un seul fichier de sortie avec un nom comme <code>npm.lodash-es.XXXX.mjs</code> (ici <code>XXXX</code> est unique hachage du fichier module dans le fragment <code>lodash-es</code> ). <br><br>  √Ä la fin du fichier, vous verrez une expression d'exportation comme celle-ci.  Veuillez noter que cette expression ne contient que des commandes d'exportation pour les modules ajout√©s au fragment, et pas tous les modules <code>lodash</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> {cloneDeep, debounce, find};</code> </pre> <br>  Ensuite, si le code de l'un des autres fragments utilise ces modules <code>lodash</code> (peut-√™tre uniquement la m√©thode <code>debounce()</code> ), dans ces fragments, dans leur partie sup√©rieure, il y aura une expression d'importation qui ressemble √† ceci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {debounce} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./npm.lodash.XXXX.mjs'</span></span>;</code> </pre> <br>  Esp√©rons que cet exemple clarifie la question du fonctionnement de la s√©paration manuelle du code dans le correctif cumulatif.  De plus, je pense que les r√©sultats de la s√©paration de code utilisant les expressions d' <code>import</code> et d' <code>export</code> sont beaucoup plus faciles √† lire et √† comprendre que le code de fragments, dont la formation a utilis√© des m√©canismes non standard qui ne sont utilis√©s que dans un certain bundler. <br><br>  Par exemple, il est tr√®s difficile de comprendre ce qui se passe dans le fichier suivant.  Ceci est la sortie d'un de mes anciens projets qui utilisait webpack pour diviser le code.  Presque tout dans ce code n'est pas n√©cessaire dans les navigateurs qui prennent en charge les modules. <br><br><pre> <code class="javascript hljs">(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[<span class="hljs-string"><span class="hljs-string">"webpackJsonp"</span></span>] = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[<span class="hljs-string"><span class="hljs-string">"webpackJsonp"</span></span>] || []).push([[<span class="hljs-string"><span class="hljs-string">"import1"</span></span>],{ <span class="hljs-comment"><span class="hljs-comment">/***/</span></span> <span class="hljs-string"><span class="hljs-string">"tLzr"</span></span>: <span class="hljs-comment"><span class="hljs-comment">/*!*********************************!*\  !*** ./app/scripts/import-1.js ***!  \*********************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*! exports provided: import1 */</span></span> <span class="hljs-comment"><span class="hljs-comment">/***/</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">module, __webpack_exports__, __webpack_require__</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-string"><span class="hljs-string">"use strict"</span></span>; __webpack_require__.r(__webpack_exports__); <span class="hljs-comment"><span class="hljs-comment">/* harmony export (binding) */</span></span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string"><span class="hljs-string">"import1"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> import1; }); <span class="hljs-comment"><span class="hljs-comment">/* harmony import */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _dep_1__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-comment"><span class="hljs-comment">/*! ./dep-1 */</span></span> <span class="hljs-string"><span class="hljs-string">"6xPP"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> import1 = <span class="hljs-string"><span class="hljs-string">"imported: "</span></span> + _dep_1__WEBPACK_IMPORTED_MODULE_0__[<span class="hljs-string"><span class="hljs-string">"dep1"</span></span>]; <span class="hljs-comment"><span class="hljs-comment">/***/</span></span> }) }]);</code> </pre> <br><h2>  <font color="#3AC1EF">Et s'il y a des centaines de d√©pendances npm?</font> </h2><br>  Comme je l'ai dit, je crois que la s√©paration au niveau du code au niveau du package permet g√©n√©ralement au d√©veloppeur de se placer dans une bonne position lorsque la s√©paration du code est agressive, mais pas trop agressive. <br><br>  Bien s√ªr, si votre application importe des modules √† partir de centaines de packages npm diff√©rents, vous pouvez toujours √™tre dans une situation o√π le navigateur ne peut pas tous les charger efficacement. <br><br>  Cependant, si vous avez vraiment de nombreuses d√©pendances npm, vous ne devez pas abandonner compl√®tement cette strat√©gie pour l'instant.  N'oubliez pas que vous ne t√©l√©chargerez probablement pas toutes les d√©pendances npm sur chaque page.  Par cons√©quent, il est important de savoir combien de d√©pendances se chargent r√©ellement. <br><br>  N√©anmoins, je suis s√ªr qu'il existe de vraies applications qui ont tellement de d√©pendances npm que ces d√©pendances ne peuvent tout simplement pas √™tre repr√©sent√©es comme des fragments s√©par√©s.  Si votre projet est juste cela - je vous recommande de chercher un moyen de regrouper les packages o√π le code dans lequel avec une forte probabilit√© peut changer en m√™me temps (comme <code>react</code> et <code>react-dom</code> ) car l' <code>react-dom</code> cache de fragments avec ces packages sera √©galement ex√©cut√©e en m√™me temps.  Plus tard, je montrerai un exemple dans lequel toutes les d√©pendances de React sont regroup√©es dans le m√™me <a href="">fragment</a> . <br><br>  √Ä suivre ... <br><br>  <b>Chers lecteurs!</b>  Comment abordez-vous le probl√®me de la s√©paration du code dans vos projets? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466537/">https://habr.com/ru/post/fr466537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466521/index.html">C for Metal - m√©tal pr√©cieux pour l'informatique sur les cartes graphiques Intel</a></li>
<li><a href="../fr466525/index.html">Qu'est-ce qu'une disposition iPhone PSD et comment l'utiliser?</a></li>
<li><a href="../fr466527/index.html">Test de la fonctionnalit√© utilisateur du site Web avec les objets de page Capybara</a></li>
<li><a href="../fr466529/index.html">Types de compilation dans la JVM: exposer la session Black Magic</a></li>
<li><a href="../fr466535/index.html">Repenser deepClone</a></li>
<li><a href="../fr466539/index.html">Utilisation de modules JavaScript en production: situation actuelle. 2e partie</a></li>
<li><a href="../fr466541/index.html">Utilisation de DbTool pour amorcer des bases de donn√©es dans des applications .NET (Core)</a></li>
<li><a href="../fr466543/index.html">Les pr√™ts Habr Weekly # 17 / Sberbank seront approuv√©s par AI - effrayant, publicit√© dans les produits open source - douteux</a></li>
<li><a href="../fr466547/index.html">Bonne f√™te du programmeur</a></li>
<li><a href="../fr466549/index.html">Principes g√©n√©raux de fonctionnement de QEMU-KVM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>