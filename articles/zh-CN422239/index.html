<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛹🏽 ⌛️ 📓 如何为数百万用户启动交付 🕦 ↙️ 🐓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="你好 我叫丹尼斯。 我是SafeDeal Avito的负责人。 我们开发“送货”和“短期租赁”服务，并使其使用方便，易懂且安全。 今年三月，我们推出了一项在私人用户之间运送商品的服务。 似乎是这样，为什么要为此整篇文章呢？ 所有在线商店都有送货，很多客户都在使用它，并且这项服务没有大的困难。 


...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>如何为数百万用户启动交付</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/422239/"><p> 你好 我叫丹尼斯。 我是SafeDeal Avito的负责人。 我们开发“送货”和“短期租赁”服务，并使其使用方便，易懂且安全。 今年三月，我们推出了一项在私人用户之间运送商品的服务。 似乎是这样，为什么要为此整篇文章呢？ 所有在线商店都有送货，很多客户都在使用它，并且这项服务没有大的困难。 </p><br><p> 是的，是的。 如果卖方是法人或公司代表，则没有问题。 但是，当私人买家和卖家双方都参与此过程时，似乎需要解决许多有趣的任务和问题。 考虑到每月有3400万用户访问过Avito，我们理解使用我们的服务从卖方到买方的商品转移应尽可能简单。 在本文中，我将讨论在Avito上的私人用户之间启动交付的先决条件，我们遇到的问题以及由于与合作伙伴达成协议并关注细节而如何解决这些问题。 我将向您展示该服务的一些内幕：其机制和架构。 </p><br><img src="https://habrastorage.org/webt/pl/sh/ji/plshji-9b2jt2atqsapxqaa4opa.png"><a name="habracut"></a><br><h1 id="zachem-na-avito-poyavilas-dostavka-predposylki"> 为什么交货出现在Avito上：先决条件 </h1><br><h3 id="rasshirit-assortiment-tovarov-dlya-kazhdogo"> 扩大每种产品的范围 </h3><br><p>  Avito是每个地方成千上万的买卖双方小社区。 但是，例如，如果您住在沃罗涅日，而明天您想在阿维多（Avito）购买尺寸为44的滑雪靴，那么在您的城市（撰写本文时）只需要四个广告。 不是一个好选择。 在整个俄罗斯范围内搜索时，您会看到377条广告。 选择增加了94倍。 </p><br><p>有时，由于缺乏选择或不愿从事物流以从另一个地区运送商品的原因，买家离开了Avito，并在Internet和本地商店中搜索所需的商品。 事实证明，这通常更昂贵。 购买新产品并不总是更好。 也就是说，尽管Avito拥有买方喜欢的商品，但他不敢购买。 我们想纠正这种情况。 </p><br><h3 id="reshit-problemy-mezhregionalnyh-prodavcov-i-pokupateley"> 解决跨地区买卖双方的问题 </h3><br><p> 我们有一个分析模型，该模型可以高精度地计算在Avito上进行的交易数量。 她告诉我们，私人用户每年完成6300万笔交易。 其中四分之一是跨地区的。 当然，距离在此过程中会带来某些困难。 </p><br><p> 在交付开始之前，区域间协议在某种程度上是一种“信仰飞跃”。 从其他地区购买商品时，人们通常会为此预先付款。 他们很紧张，依靠卖方的真诚。 并且，如果用户同意买方在收到货物后付款，那么卖方已经处于危险之中。 有时使用货到付款。 卖方通过邮寄方式将包裹寄出，以表明其价值，而买方则取走了货物并付款。 然后，钱去了寄件人。 但是货到付款并不能解决所有问题：收货人必须在货到付款时无法检查内容并确保有（例如）一部iPhone（与购买者同意购买），而不是砖头。 </p><br><p> 此外，通常会有人与谁真正为交付服务本身付费，这是矛盾的，因此交易没有完成。 我们一直试图为用户提供帮助，但首先，我们充当了人们之间的“基础设施桥梁”，而没有参与交易。  Avito将买卖双方联系起来，进一步的协议及其认真执行仍然取决于用户的良心。 这种情况不适合我们。 购买具有利润的产品并不是在机密网站上交易成功的主要标准。 信任和安全事项同样重要。 我们希望创建一个可靠的服务，使交易过程更加轻松，便捷和安全。 </p><br><h3 id="privlech-novyh-pokupateley"> 吸引新客户 </h3><br><p> 在俄罗斯很难找到一个不会听说Avito的人。 但并非所有人都使用该服务。 有人根本不喜欢亲自与卖家见面，了解包裹的功能，将资金转移到未知的帐户和卡中。 因此，我们为交货交易辩护，以便以前未决定在Avito上买卖商品的人尝试使用方便的机制尝试我们的服务。 </p><br><h1 id="kak-eto-rabotaet-mehanika-i-arhitektura"> 工作原理：力学和建筑 </h1><br><h3 id="mehanika"> 机械师 </h3><br><p> 我们试图使在Avito上使用交付的机制变得简单明了。 买方选择商品，单击“随货付款”，然后用信用卡付款并付款。 在收到货物之前，这笔钱将保留在银行的托管帐户中。 卖方收到付款确认书，他有两天的时间将货物带到收货点。 当货物到达取货点时，买主必须在三天内取走包裹。 买方在接机点从SMS拨打代码并接收货物。 可以在15分钟内检查它，然后确认购买。 买方收到货物后，卖方会在Avito上收到一条消息。 他将他的银行卡绑上了-代管帐户中的钱将转入该卡中。 交易已经完成。 </p><br><h3 id="arhitektura"> 建筑学 </h3><br><p> 在本节中，我将讨论在购买，交付和收货阶段负责产品工作的产品和服务的内部。 </p><br><h4 id="pokupka"> 采购 </h4><br><p> 用户通过Avito网站或移动应用程序选择产品时，会将请求发送到Avito-Site服务。  Avito网站的后端与两个系统“通信”： <br>  <strong>1. Avito Delivery Core-</strong>与交付服务联系。 <br>  <strong>2.计费</strong> -向Tinkoff的QIWI发送请求。 </p><br><img src="https://habrastorage.org/webt/v5/eb/my/v5ebmyoach2rwd5sltnat8aqore.gif"><br><p> 买方选择了产品之后，他会转到页面上可以找到成本和交货时间。 </p><br><img src="https://habrastorage.org/webt/kt/qp/nj/ktqpnjsqzbjlslxg2l3m0v5wqpi.png"><br><h4 id="servisy-kotorye-zdes-uchastvuyut"> 参与这里的服务 </h4><br><p>  <strong>阿维托站点。</strong> 发送请求。 <br>  <strong>计算。</strong> 它存储了关税，并考虑到所选产品类别，知道要交付多少费用。 <br>  <strong>终端守护者。</strong> 在接收城市中查找接送点。 <br>  <strong>交货地理。</strong> 它存储有关运送到特定城市的可能性和运送时间的信息。 </p><br><h4 id="shema-raboty-servisov"> 服务方案 </h4><br><img src="https://habrastorage.org/webt/qe/zm/hc/qezmhcv9m-pbdvnn6gszx0srb9u.gif"><br><h4 id="ot-oplaty-k-dostavke"> 从付款到交货 </h4><br><p> 在此阶段，订单已实际创建。 </p><br><h4 id="servisy-kotorye-uchastvuyut-na-etom-etape"> 在此阶段参与的服务 </h4><br><p>  <strong>阿维托站点。</strong> 将请求发送到其他服务。 <br>  <strong>订单控制器。</strong> 代理调用我们的其他内部服务，并对从Avito-Site后端接收的数据执行初始验证。 <br>  <strong>订单到期。</strong> 跟踪订单的生命周期。 如果付款期限已过，则买方的订单必须无效。 <br>  <strong>计算。</strong> 计算运输成本。 <br>  <strong>回调处理器</strong> 通知Avito-Site订单更改。 <br>  <strong>守序者。</strong> 服务，作为API的基础包装。 仍会进行一些业务验证，然后将订单编号提供给订单控制器。 </p><br><h4 id="shema-raboty-servisov-1"> 服务方案 </h4><br><img src="https://habrastorage.org/webt/8h/2q/ac/8h2qacz2kzzym5jw-a_r0qspmhm.gif"><br><p> 当订单控制器发送所需的一切并收到订单号时，它将发送Avito-Site信息：“一切顺利。”  Avito-Site后端正在与Billing（与QIWI或Tinkoff合作）一起敲门，并已支付订单。 </p><br><img src="https://habrastorage.org/webt/g2/ec/fn/g2ecfnlb95q5ifgais0aisnylxc.gif"><br><p> 付款成功后，Avito-Site后端将敲响我们的Order-Controller服务，并说：“确认成功。” </p><br><img src="https://habrastorage.org/webt/qf/jy/li/qfjylikhf3rwes8uxuwmia4ciys.gif"><br><p> 下一步-Order-Controller再次敲击Order-Keeper，说：“我们确认订单。” 保持订单者检查状态。  （突然，此类产品已经交付，取消或发生了其他情况）。 如果验证成功，则服务会将状态转移到交付服务的确认。 </p><br><img src="https://habrastorage.org/webt/qz/r7/yh/qzr7yhdkp_loeoq3ryqura2wzpk.gif"><br><p> 接下来，订单控制器打开订单过期服务，并说订单买方的付款阶段已经结束。 现在，卖方有两到四天的时间将货物带到提货点。 订单到期监视这些截止日期。 如果卖方没有时间，则服务将取消订单，并将款项退还给买方。 </p><br><img src="https://habrastorage.org/webt/uc/4_/ut/uc4_utvdfwyasbvhkpevrgoz0jy.gif"><br><h4 id="dostavka"> 派送 </h4><br><p> 交易的第一部分已完成：买家为订单付款，钱从他的帐户中扣除。 现在，卖方必须在两天内将其货物带到送货服务。 </p><br><h4 id="kakie-servisy-zdes-rabotayut"> 这里有什么服务 </h4><br><p>  <strong>阿维托站点。</strong> 仍在发送请求。 <br>  <strong>订单控制器。</strong> 代理调用其他内部服务，并验证从Avito-Site后端接收的数据。 <br>  <strong>守序者。</strong> 存储订单号和订单的付款信息。 <br>  <strong>交付注册员。</strong> 负责直接在送货服务中注册订单。 <br>  <strong>交付-发送者。</strong> 注册并取消订单，将送货服务分配的编号提供给我们的服务。 <br>  <strong>状态管理员。</strong> 它根据我们的版本存储所有状态，验证传入的信息并通知有关此信息的必要服务。 <br>  <strong>回调处理器</strong> 通知Avito-Site订单已付款。 <br>  <strong>信使</strong> 向用户发送消息。 </p><br><h4 id="kak-eto-proishodit"> 这是怎么发生的 </h4><br><img src="https://habrastorage.org/webt/v4/d0/fr/v4d0fr4mpjo5givl3swihfikpfu.gif"><br><p>  <sub>我们以Boxberry交付服务为例说明服务的操作。</sub>  <sub>但是最近，我们也在与DPD合作。</sub> </p><br><h4 id="poluchenie"> 得到 </h4><br><p> 交易即将完成-订单正在处理中，或已交付给买方。 我们必须在Messenger中将此信息告知用户。 </p><br><h4 id="servisy-uchastvuyuschie-na-poslednem-etape"> 最后阶段涉及的服务 </h4><br><p>  <strong>交付历史记录转换器。</strong> 根据交付服务的版本接收和存储状态：“在途中”，“准备交付”，“退回”。 <br>  <strong>守序者。</strong> 它存储从送货服务获得的有关尺寸，货物重量和收货地点的信息。 <br>  <strong>状态管理员。</strong> 更新最后收到的状态，并向Order-Expiration发送请求。 <br>  <strong>订单到期。</strong> 监视卖方发送货物的时间。 <br>  <strong>回调处理器</strong> 警报Avito-Site。 <br>  <strong>阿维托站点。</strong> 向信使发送信息。 </p><br><h4 id="shema-raboty-servisov-2"> 服务方案 </h4><br><img src="https://habrastorage.org/webt/lv/5r/h6/lv5rh69iww71xg2ln61ykoh5p3o.gif"><br><h1 id="kakie-problemy-pokupateley-i-prodavcov-reshaet-dostavka"> 买卖双方解决交货问题 </h1><br><p> 我将告诉您私人用户还会遇到什么其他问题，以及我们如何通过发布交付解决这些问题。 </p><br><h3 id="fiksirovannaya-cena-dostavki"> 固定运费 </h3><br><p> 通常，专业服务的交付成本取决于商品的大小和重量。 对于专业人员而言，正确指定它们不是问题。 但是私人卖方可能会误以为长度，宽度或重量的参数，然后会给他额外的账单。 因此，我不想使用送货服务。 </p><br><p> 我们提供大量服务-每天，卖家放置超过40万个广告。 我们不希望每个人都对我们的产品不满意，原因仅在于他无法准确指出产品的尺寸。 没有人会连接到交付，使用Avito会使客户感到不舒服。 因此，我们将类别树与Boxberry和DPD的维度和价格进行比较，并将其转换为条件维度。 对于我们在交货中使用的关税，对于相同类别的商品，尺寸和重量始终“相同”。 出售iPad mini或iPad Pro都没关系-尺寸错误无需支付额外费用。 尽管有些服务要求您在卖方错误地指出货物的尺寸和重量时支付佣金。 </p><br><h3 id="upakovka"> 包装方式 </h3><br><p> 在经典交货中，卖方总是自己包装货物。 他为此有机会。 但是，例如，如果您仅出售一台旧电视，则可能会遇到问题：送货服务将不接受没有包装的货物，并且几乎没有工厂包装盒，并且几乎没有仓库可以包装纸张。 我们同意送货服务，他们可以承担这项任务，因此，卖方不会在不必要的行动上浪费时间。 </p><br><h3 id="legkiy-process-otpravleniya-i-polucheniya-tovara"> 收发货物的简便过程 </h3><br><p> 每个订单都有自己的唯一编号，只有卖方和收件人才知道。 为了提交和接收订单，您需要拨打该号码。 您无需执行其他任何操作-例如，填写发票。 在许多送货服务中，没有此操作，您将不会发送或接收任何东西。 </p><br><h3 id="bezopasnost-i-kontrol-sdelki"> 安全和交易控制 </h3><br><p> 运送到Avito的优势在于，这不仅是货物从卖方到买方的转移，而且还包括资金管理。 如果买方不喜欢该产品，则可以拒绝该产品，然后将钱退还给他。 像其他服务一样，无需为退货而支付费用。 我们不仅帮助实际交付货物，而且参与交易，保护买卖双方。 如果出现问题，我们将解决它们。 </p><br><h3 id="nelzya-dvazhdy-kupit-odin-tovar"> 您不能两次购买一种产品 </h3><br><p> 如果货物已经付款，那么我们会在标签上悬挂有关该货物的信息。 这有助于我们避免单笔付款重复付款的混乱。 但是，如果卖方拥有同一产品的多个副本，则不久他也可以指出这一点。 然后，我们只需要更改其编号即可。 </p><br><h1 id="chto-v-itoge"> 结果如何 </h1><br><p> 我们为私人买卖双方提供了便利的服务，为他们提供了新的机会，并帮助他们更好地实现自己的目标。 经过三个月的工作，我们总结了中期结果。 </p><br><p> 现在，交付后您可以购买500万种商品-这占所有待售广告的36％。 当然，其中大多数广告在莫斯科-广告数量超过一百万，而在圣彼得堡-超过50万广告。 这些城市和最“发送”的城市。 自4月初以来，用户已在俄罗斯各地运送了近6.7万种产品。 一天的记录-2 115出发。 </p><br><p> 用户最常在莫斯科市内出发-这条路线占所有货运量的5％。 跟随次数最多的三种最受欢迎​​的送货路线是两个主要城市：莫斯科-圣彼得堡（1.6％）； 圣彼得堡-圣彼得堡（1.5％）; 圣彼得堡-莫斯科（1.1％）。 接下来-从莫斯科出发，前往顿河畔罗斯托夫，下诺夫哥罗德，克拉斯诺达尔，叶卡捷琳堡，新西伯利亚和沃罗涅日。 交付给Avito后，您可以将货物发送到俄罗斯任何地区。 最长的路线是莫斯科-南萨哈林斯克路线：从首都出发的儿童高脚椅飞行了6.6万多公里。 </p><br><p> 这是有关交付给Avito的系列文章中的第一篇。 如果您对此主题感兴趣，在以下文章中，我们将进一步介绍我们的服务技术：代码和其他内部组件。 在评论中问您的问题，我们将尽力回答。 </p><br><p> 敬请期待！ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN422239/">https://habr.com/ru/post/zh-CN422239/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN422227/index.html">石器时代的科学起源？</a></li>
<li><a href="../zh-CN422229/index.html">欢迎来到富士通世界巡回演唱会2018</a></li>
<li><a href="../zh-CN422231/index.html">“完美”的甘特图时间表</a></li>
<li><a href="../zh-CN422233/index.html">献给所有最好的老师...</a></li>
<li><a href="../zh-CN422235/index.html">设计用于Web分析电子商务网站的仪表板。 第1部分：用户友好界面</a></li>
<li><a href="../zh-CN422241/index.html">KPI-三个绊脚字母</a></li>
<li><a href="../zh-CN422243/index.html">小型企业CRM。 需要吗</a></li>
<li><a href="../zh-CN422247/index.html">OK即时游戏杯。 HTML5游戏开发人员竞赛</a></li>
<li><a href="../zh-CN422251/index.html">“高度自律。” 杰弗里·里希特（Jeffrey Richter），介绍如何编写代码，撰写书籍和创建自己的公司</a></li>
<li><a href="../zh-CN422253/index.html">Yew-Rust和WebAssembly前端框架</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>