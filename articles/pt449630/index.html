<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïµÔ∏è üë©üèª‚Äçüîß üë©üèæ‚Äçüç≥ "Eles sugeriram se familiarizar com os c√°lculos de um indicador, e h√° duas folhas com integrais e segundas derivadas" üëâ ‚úåüèΩ ü¶é</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Esta √© uma entrevista com Anton Batiaev do Deutsche Bank Technology Center. Falaremos sobre o que os matem√°ticos financeiros fazem, de onde v√™m os dad...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"Eles sugeriram se familiarizar com os c√°lculos de um indicador, e h√° duas folhas com integrais e segundas derivadas"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/449630/"><p>  Esta √© uma entrevista com Anton Batiaev do Deutsche Bank Technology Center.  Falaremos sobre o que os matem√°ticos financeiros fazem, de onde v√™m os dados dos bancos, como s√£o processados ‚Äã‚Äãe otimizados.  Sobre a complexidade de entrar no setor financeiro, negociar na bolsa e a necessidade geral de bancos. </p><br><p><img src="https://habrastorage.org/webt/xf/xp/3w/xfxp3w9tfj89vxaty-4hul25jzk.jpeg"></p><a name="habracut"></a><br><h1 id="chto-i-kak-schitayut-v-banke">  O que e como eles contam no banco? </h1><br><p>  <strong>- Apresente-se, por favor: diga-me quem voc√™ √©, o que faz.</strong> </p><br><p>  Mudei para o Deutsche Bank TechCenter no in√≠cio de janeiro deste ano e agora estou desenvolvendo o servidor em um projeto que considera v√°rios tipos de riscos de instrumentos financeiros para muitos traders diferentes ao redor do mundo e outras equipes que precisam desses dados. </p><br><p>  O projeto construiu uma infraestrutura bastante extensa que usa muitas estruturas padr√£o populares, bancos de dados n√£o relacionais, trabalha com big data no Kafka.  Tamb√©m trabalhamos com uma grade para dezenas de milhares de CPUs, usamos v√°rios projetos personalizados, otimizamos o trabalho com o protobuf, implementamos c√°lculos em matem√°tica financeira, </p><br><p>  Como parte da infraestrutura, h√° v√°rias otimiza√ß√µes e chips adicionais.  Talvez isso seja √≥bvio, mas √© extremamente dif√≠cil contar de forma consistente e l√≥gica o que est√° acontecendo no banco. Dois por cento investiram e obtiveram recursos financeiros - isso √© matem√°tica complicada, algoritmos e grandes infraestruturas, tarefas t√©cnicas e de otimiza√ß√£o. </p><br><p>  <strong>- Venha em ordem.</strong>  <strong>Voc√™ disse que no TechCenter voc√™ est√° fazendo c√°lculos para a plataforma banc√°ria global.</strong>  <strong>E o que pode ser considerado no banco?</strong> </p><br><p>  Com base na minha experi√™ncia, no √¢mbito das atividades de investimento, s√£o considerados os pre√ßos e v√°rios outros indicadores de v√°rios instrumentos.  Se falamos de a√ß√µes, tudo fica claro: uma cota√ß√£o √© o seu pre√ßo.  Para t√≠tulos, ser√° uma porcentagem do valor nominal. </p><br><p>  Se falamos de derivativos (instrumentos financeiros derivativos), a√≠ o pre√ßo √© o tamanho do pr√™mio que deve ser pago por esse instrumento.  √â calculado por muitas f√≥rmulas diferentes.  Existe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma f√≥rmula de Black-Scholes</a> que estima o valor das op√ß√µes - essa √© uma fun√ß√£o que depende da fun√ß√£o da cota√ß√£o atual, do ativo subjacente, da volatilidade, do tempo de vencimento e de muitos outros fatores. </p><br><p> Existem modelos que permitem calcular o valor do portf√≥lio do trader.  Um departamento ou empresa possui um conjunto de transa√ß√µes, instrumentos financeiros derivativos em um portf√≥lio e voc√™ precisa calcular quanto custam atualmente.  Separadamente, pode haver um pre√ßo, mas agregado - eles podem, de alguma forma, se correlacionar, dar descontos e assim por diante.  Por exemplo, posi√ß√µes sint√©ticas: como criar uma op√ß√£o equivalente a futuros a partir de op√ß√µes.  Isso √© adequado, por exemplo, para ativos n√£o lineares, como op√ß√µes, mas n√£o necessariamente verdadeiro para todos os tipos de derivativos.  A avalia√ß√£o √© baseada na cota√ß√£o do ativo subjacente no qual o derivado √© constru√≠do.  Por exemplo, a cota√ß√£o de um ou mais pares de moedas.  Os derivativos podem ser constru√≠dos sobre diferentes ativos subjacentes: para moeda, os ativos subjacentes ser√£o euro, d√≥lar e assim por diante;  para derivados de commodities - petr√≥leo, ouro, trigo;  para spot - v√°rias a√ß√µes e t√≠tulos. </p><br><p>  Al√©m de avaliar os derivativos, os riscos tamb√©m s√£o considerados - o que acontecer√° se os pre√ßos no mercado sofrerem uma tempestade mais forte (a volatilidade muda).  Ou o que acontecer√° se o d√≥lar n√£o valer 60, mas 100 rublos em rela√ß√£o a uma ou a todas as outras moedas.  O que acontecer√° com um instrumento espec√≠fico, portf√≥lio. </p><br><p>  Voc√™ precisa calcular isso em tempo real e tamb√©m aproximar o estado atual do portf√≥lio a v√°rios resultados adversos dos movimentos de pre√ßos para cada uma das moedas, mudan√ßas na volatilidade do mercado.  Para isso, estamos construindo uma matriz de todas as mudan√ßas poss√≠veis, que mostram o que √© agora, o que acontecer√° amanh√£ e o que acontecer√° se ocorrer uma crise de mercado. </p><br><p>  Isso √© necess√°rio para avaliar o que comprar e vender no momento atual e quais s√£o os riscos.  E, inclusive, avalie o que acontecer√° no futuro, avalie estrat√©gias de negocia√ß√£o e responda com mais precis√£o √†s mudan√ßas do mercado.  Por exemplo, um dos quanta criou um novo algoritmo para calcular riscos - voc√™ precisa verificar dados hist√≥ricos, dirigir, por exemplo, todas as informa√ß√µes de troca por d√©cadas e ver o que acontece. </p><br><p>  Para essas necessidades, h√° infraestrutura conectada a v√°rias plataformas de c√¢mbio que nos transmitem dados de mercado.  Como nossa empresa possui muitos dados em todo o mundo, precisamos armazenar e criar pr√©-agregados de alguma forma para process√°-los rapidamente. </p><br><p>  <strong>- Antes de passarmos para a parte de infraestrutura, gostaria de perguntar sobre o que voc√™ j√° disse.</strong>  <strong>Voc√™ falou sobre v√°rios tipos de algoritmos de an√°lise, de onde eles v√™m?</strong>  <strong>Isso √© algum tipo de conhecimento de livro ou suas melhores pr√°ticas?</strong> </p><br><p>  Existem alguns pontos.  Primeiramente, s√£o adotadas f√≥rmulas conhecidas, algoritmos inventados por matem√°ticos.  Por exemplo, o modelo de precifica√ß√£o de op√ß√£o geralmente aceito √© a f√≥rmula de Black-Scholes.  Mas, al√©m disso, h√° melhorias internas: em particular, usamos outras leis de distribui√ß√£o de pre√ßos, distorcemos os coeficientes nessas f√≥rmulas.  A f√≥rmula para a curva de distribui√ß√£o de pre√ßos, neg√≥cios e outros indicadores pode ser muito diferente. </p><br><p>  Se falamos de otimiza√ß√£o, essas j√° s√£o melhorias internas.  Por exemplo, os desenvolvedores podem, em vez de calcular indicadores em cada ponto, calcular valores-chave e fazer aproxima√ß√µes, o que custar√° 20 vezes menos tempo no computador, mas, ao mesmo tempo, fornecer uma precis√£o aceit√°vel e suficiente. </p><br><p>  Todos os dados est√£o mudando constantemente, e isso √© importante para n√≥s, n√£o apenas para relat√≥rios, mas tamb√©m para fornecer aos traders uma imagem atualizada do estado do mercado. </p><br><p>  <strong>- Essa √© uma informa√ß√£o bastante complicada e provavelmente √© muito dif√≠cil transferir de pessoa para pessoa.</strong>  <strong>Qual √© o tamanho da sua equipe e como voc√™ transfere conhecimento entre voc√™s?</strong> </p><br><p>  Nosso projeto em Moscou emprega 35 pessoas.  Existem v√°rias equipes que lidam com certas partes da funcionalidade: interface do usu√°rio, back-end, infraestrutura, matem√°tica financeira.  Cada uma dessas equipes possui profunda experi√™ncia na funcionalidade de um m√≥dulo espec√≠fico.  Mas al√©m dessas pessoas, h√° tantas pessoas envolvidas em sistemas relacionados ao nosso projeto. </p><br><p>  Todas as informa√ß√µes sobre o nosso projeto s√£o descritas por analistas da Confluence e tamb√©m est√£o contidas nas descri√ß√µes de tarefas no JIRA, onde h√° links para mecanismos padr√£o e f√≥rmulas p√∫blicas.  Exemplos de uso da funcionalidade podem ser encontrados em testes.  Bem, a comunica√ß√£o humana n√£o foi cancelada. </p><br><p>  <strong>- Matem√°ticos financeiros: quantos existem e quem s√£o eles?</strong>  <strong>Algum cientista importante?</strong> </p><br><p>  Sim, s√£o principalmente especialistas (quanta) que trabalham em Londres e constroem modelos financeiros de como o mercado funciona.  Na maioria das vezes, eles t√™m doutorado em finan√ßas ou matem√°tica.  Eles sabem como o mercado funciona, o que os comerciantes precisam e podem criar algum tipo de modelo matem√°tico que descreva o estado do mercado, algoritmos de c√°lculo de risco e avalia√ß√£o correta de derivativos. </p><br><p>  Por exemplo, meu colega Alexander <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">escreveu um artigo sobre Habr√©</a> , onde ele j√° mencionou a experi√™ncia com quantum. </p><br><p>  <strong>- Os desenvolvedores comuns podem se comunicar com eles?</strong>  <strong>Como est√° indo essa comunica√ß√£o?</strong>  <strong>De fato, a matem√°tica e o desenvolvimento convencional t√™m mundos completamente diferentes.</strong> </p><br><p>  Eles podem se comunicar e se comunicar: √© claro que algumas tarefas e conceitos de neg√≥cios de n√≠vel superior s√£o discutidos com os l√≠deres, mas, no √¢mbito de c√°lculos de riscos espec√≠ficos ou outros indicadores, o desenvolvedor se comunica diretamente com o comerciante ou quantum que construiu esse modelo. </p><br><p>  Mas, na realidade, esse √© um processo m√∫tuo de intera√ß√£o, pois o algoritmo te√≥rico nem sempre √© implementado na pr√°tica.  Portanto, os desenvolvedores podem propor altera√ß√µes no modelo para que ele repouse na arquitetura atual do aplicativo. </p><br><p>  H√° muitas maneiras de interagir - o mesmo Skype, telefone, todas as ferramentas de comunica√ß√£o padr√£o. </p><br><p>  <strong>- O software que sai como resultado √© autom√°tico?</strong>  <strong>Existem rob√¥s ou existe algo para os traders envolvidos em an√°lises t√©cnicas - gr√°ficos ou algo mais?</strong> </p><br><p>  Existem v√°rias op√ß√µes para o uso de software: o primeiro √© autom√°tico, ou seja,  rob√¥s de negocia√ß√£o, o segundo √© um assistente do comerciante, que mostra o estado atual do portf√≥lio, detalhando os riscos em v√°rios indicadores, as op√ß√µes de negocia√ß√£o que ele pode fazer agora, bem como o estado futuro do portf√≥lio e os riscos com base nos resultados dessas opera√ß√µes.  Tamb√©m existem indicadores para traders, c√°lculo de risco e dados sobre o status das carteiras. </p><br><p>  <strong>- Outra m√©trica √© a frequ√™ncia da an√°lise dos dados, com que frequ√™ncia voc√™ faz isso?</strong>  <strong>Por um lado, como eu o entendo, alguns microssegundos e, por outro, a an√°lise de big data que pode levar semanas.</strong> </p><br><p>  Dependendo da complexidade e import√¢ncia dos indicadores, esses podem ser indicadores ativos, que s√£o recalculados para cada marca e, em seguida, o c√°lculo √© em milissegundos.  E se calcularmos o custo dos portf√≥lios, as atualiza√ß√µes ocorrer√£o uma vez por segundo, para que o olho humano tenha tempo para perceb√™-lo. </p><br><p>  Se voc√™ descrever c√°lculos longos (por exemplo, alguns riscos complexos), os dados necess√°rios durante o dia, as tarefas ser√£o enviadas para a grade, o cen√°rio de altera√ß√£o das cota√ß√µes da moeda ser√° considerado.  O mecanismo geral √© o seguinte: voc√™ considera todas as novas transa√ß√µes dentro de um determinado ciclo e executa uma tarefa dif√≠cil na grade para recalcular os indicadores para todo o conjunto de transa√ß√µes no estado atual do mercado. </p><br><p>  Essas tarefas podem ser atualizadas uma vez por hora.  Se voc√™ precisar afastar as estrat√©gias de negocia√ß√£o - essa √© uma tarefa longa, elas s√£o descartadas e, por v√°rias horas, s√£o consideradas, dependendo da complexidade e da quantidade de dados.  As tarefas na grade podem ser muito pequenas, por exemplo, calcular uma f√≥rmula e fornecer um resultado, ou grandes, por exemplo, para tabelas nas quais √© necess√°rio calcular as correla√ß√µes de todos os cen√°rios de risco poss√≠veis e fornecer o resultado combinado. </p><br><p>  Aqui aparece a tarefa de otimizar a carga da grade e prever o tempo de c√°lculo da tarefa, dependendo do tipo de ferramenta, da quantidade de dados e de outros indicadores para carreg√°-la ao m√°ximo.  Porque, se voc√™ executar uma grande tarefa, todo mundo espera na fila, embora durante esse tempo voc√™ possa contar outra coisa. </p><br><p>  Em geral, a tarefa de uma mochila e outras otimiza√ß√µes.  Quando o ping na grade for maior que o tempo de c√°lculo, faremos isso no back-end, onde um mini cluster j√° foi implantado para tarefas t√£o pequenas. </p><br><p>  <strong>- Posso de alguma forma coloc√°-lo em algum tipo de estrutura?</strong>  <strong>Tanto quanto eu entendo, diferentes m√©todos de otimiza√ß√£o s√£o aplicados, dependendo do volume de tarefas.</strong>  <strong>Em tarefas pequenas, faz sentido otimizar o compilador JIT e em tarefas grandes, algo mais.</strong>  <strong>Diga-me quais s√£o as √°reas do problema e quais m√©todos s√£o usados ‚Äã‚Äãpara acelerar e otimizar.</strong> </p><br><p>  Um exemplo de uma grande tarefa √© calcular todos os instrumentos e riscos financeiros ao alterar as cota√ß√µes de cada moeda em 1-2-3-10%.  Nesse caso, a otimiza√ß√£o consistir√° no agrupamento de transa√ß√µes em pacotes configur√°veis, para que, dentro de um pacote, existam transa√ß√µes para um tipo de portf√≥lio ou uma moeda. </p><br><p>  Para que n√£o haja muitos c√°lculos de risco para cada transa√ß√£o, apresentamos-os como uma transa√ß√£o para um grande volume e depois dividimos os resultados proporcionalmente.  Assim, reduzimos o n√∫mero de c√°lculos necess√°rios. </p><br><p>  Outro exemplo de otimiza√ß√£o √© desta vez com pares de moedas.  Digamos que existem dois pares de "rublo-d√≥lar" e "rublo-euro".  No primeiro par, voc√™ pode imaginar que o rublo est√° caindo, mas √© poss√≠vel que o d√≥lar esteja crescendo.  De fato, este √© o mesmo.  O mesmo vale para o par rublo-euro.  Dessa forma, podemos considerar pares que s√£o diferentes √† primeira vista em um pacote, com base no fato de o rublo mudar nos dois casos. </p><br><p>  O n√∫mero de c√°lculos √© reduzido e o resultado √© acelerado.  Parece ter mudado uma moeda (no nosso exemplo, o rublo), mas, na verdade, calculamos os riscos de ativos heterog√™neos. </p><br><p>  <strong>- E voc√™ pode resolver o problema de frente e transform√°-lo em um cluster enorme e enorme?</strong> </p><br><p>  Existe um cluster desse tipo, mas ele j√° est√° carregado com muitos c√°lculos.  O cluster n√£o √© de borracha, apesar das dezenas de milhares de CPUs atualmente existentes. </p><br><p>  <strong>- E do ponto de vista do software, DataGrid na mem√≥ria ou Hadoop?</strong> </p><br><p>  Sim, existe o Hadoop e o Kafka para processar tudo isso e o banco de dados ClickHouse para otimizar o trabalho com big data.  Em termos de empilhamento de dados, √© claro que dirigir JSONs √©, para dizer o m√≠nimo, ineficiente.  Nesse sentido, h√° momentos de otimiza√ß√£o com o Protobuf.  √â importante para n√≥s n√£o apenas colocar dados bin√°rios, mas ao mesmo tempo faz√™-lo da maneira mais rigorosa poss√≠vel, usando dicion√°rios. </p><br><p>  Neles, armazenaremos, por exemplo, especifica√ß√µes de contrato do mesmo tipo para todas as transa√ß√µes.  Devido a essa otimiza√ß√£o com dicion√°rios, um colega economizou 30% da mem√≥ria ocupada. </p><br><p>  <strong>- Esses dicion√°rios est√£o em n√≥s espec√≠ficos e est√£o duplicados ou localizados em uma base central?</strong> </p><br><p>  De diferentes maneiras.  Principalmente em uma base central.  E existem dicion√°rios que voc√™ transfere para a grade com v√°rios c√°lculos.  Ela quer ser o mais compacta poss√≠vel para n√£o arrastar muitos dados, pois os canais da Internet n√£o s√£o de borracha. </p><br><p>  Como isso funciona?  Voc√™ envia a tarefa de c√°lculo para a grade com todas as informa√ß√µes necess√°rias, que s√£o agrupadas em dicion√°rios para evitar duplicatas.  Por dentro, j√° haver√° todo o conte√∫do e voc√™ n√£o precisa ir para reposit√≥rios adicionais.  Isso economiza o tr√°fego da rede e reduz a lat√™ncia nos c√°lculos. </p><br><p>  <strong>- At√© onde eu sei, os bancos t√™m uma an√°lise de dados hist√≥ricos, que √© um enorme pacote de dados por gigabyte-terabytes.</strong>  <strong>E a abordagem com um √∫nico banco de dados n√£o funciona?</strong>  <strong>Voc√™ pode colocar 2 TB na chave, mas n√£o √© bom.</strong> </p><br><p>  Sim, esses momentos s√£o decididos por por√ß√µes.  Voc√™ ter√° caches locais por pa√≠s, espalhados por informa√ß√µes de troca, porque o envio de informa√ß√µes sobre todas as transa√ß√µes de Nova York a Cingapura consome muitos recursos.  √â claro que aqui a divis√£o por pa√≠s √© l√≥gica: por exemplo, as transa√ß√µes nos Estados Unidos ser√£o colocadas em data centers americanos.  Uma situa√ß√£o semelhante com aspas - voc√™ precisa criar um roteamento e determinar que tipo de transa√ß√£o √©, em que regi√£o pertence, para entender onde est√£o os caches, envi√°-lo para os armazenamentos e bancos de dados necess√°rios e n√£o para perseguir os dados novamente. </p><br><p>  <strong>- E acontece que voc√™ precisa juntar dados de diferentes regi√µes?</strong> </p><br><p>  Sim, √© verdade, e √© uma tarefa dif√≠cil.  √â claro que n√£o extrairemos terabytes de dados de todas as regi√µes para obter resultados agregados.  Provavelmente, em cada regi√£o, voc√™ calcular√° o agregado local dessa regi√£o e coletar√° todos esses resultados para obter dados resumidos. </p><br><p>  <strong>- Provavelmente, existem dados externos, por exemplo, hist√≥rico de trocas.</strong>  <strong>E como lidar com eles?</strong>  <strong>Voc√™ se espelha por dentro ou h√° maneiras de process√°-los?</strong> </p><br><p>  Existem protocolos e conex√µes com provedores de dados padr√£o: Reuters, Bloomberg, que fornecem informa√ß√µes de troca.  Armazenamos os dados necess√°rios em armazenamentos internos, mas algumas coisas podem ser solicitadas novamente ao provedor de dados.  Novamente, por regi√£o, para n√£o direcionar tr√°fego. </p><br><p>  √â claro que eles tamb√©m implantaram servidores em todo o mundo para garantir velocidade e desempenho. </p><br><p>  <strong>- E os dados para leitura ou leitura / escrita?</strong>  <strong>Se o registro n√£o for assustador para rolar esses volumes?</strong> </p><br><p>  Basicamente, para a leitura, a escrita segue o registro de informa√ß√µes sobre transa√ß√µes e outras informa√ß√µes exigidas pelos reguladores.  Basicamente, c√°lculos para necessidades dom√©sticas: riscos, valor das carteiras e assim por diante.  Esta √© uma cozinha interna, voc√™ entrega os dados de alguma regi√£o ou data center, sem envi√°-los para fora. </p><br><p>  <strong>- Se uma pe√ßa rompe a lua e voa para um data center, o que acontecer√°?</strong>  <strong>Est√° tudo acabado?</strong> </p><br><p>  Os dados nos datacenters s√£o espelhados.  √â claro que, na regi√£o, os dados n√£o est√£o em um disco r√≠gido em um data center.  Caso contr√°rio, como nessa bicicleta, qualquer faxineira poderia acidentalmente cortar o servidor.  Tudo √© copiado on-line: h√° um fluxo de dados nas duas dire√ß√µes, voc√™ l√™ no espelho mais pr√≥ximo e sincroniza com a grava√ß√£o para garantir consist√™ncia. </p><br><p>  Mas, como regra, muito menos informa√ß√µes est√£o dispon√≠veis para grava√ß√£o, porque precisam ser exibidas ao usu√°rio.  Se ele v√™ a recontagem n√£o agora, mas 2 segundos depois de outra fonte, √© triste, mas voc√™ pode viver.  √â claro que os dados necess√°rios para reguladores, profissionais de marketing externos e participantes do mercado s√£o duplicados e sincronizados em v√°rias fontes, para n√£o perder nada. </p><br><h1 id="kak-v-tehcentre-doyche-banka-gotovyat-dannye-i-sobirayut-musor">  Como o Tech Center Deutsche Bank prepara dados e coleta lixo </h1><br><p><img src="https://habrastorage.org/webt/fa/go/hg/fagohgpd0f1b3lfg2jhfcedkk2q.jpeg"></p><br><p>  <strong>- Pergunta sobre prepara√ß√£o de dados.</strong>  <strong>Tanto quanto eu entendo, cada fonte tem seu pr√≥prio formato, e convert√™-las instantaneamente n√£o √© uma boa ideia.</strong>  <strong>De alguma forma, voc√™ os prepara previamente para os c√°lculos?</strong> </p><br><p>  Existe um formato √∫nico interno.  √â claro que √© mais conveniente trabalhar com os mesmos dados, mas isso se traduz na necessidade de convert√™-los.  Existem fluxos de dados e equipes respons√°veis ‚Äã‚Äãpela troca de informa√ß√µes, conectando-se aos fornecedores.  Eles formam e enriquecem dados em nosso √∫nico formato.  Para resolver problemas de desempenho, haver√° dois fluxos de dados, um deles √© um ciclo r√°pido que fornecer√° informa√ß√µes provenientes do fluxo de dados do Exchange.  Devido a isso, √© menos necess√°rio acessar v√°rios armazenamentos e formar uma estrutura padr√£o.  Nele voc√™ pode calcular os indicadores necess√°rios em tempo real. </p><br><p>  E h√° um ciclo mais lento que processa o mesmo fluxo, mas com todo o conjunto de campos necess√°rio, em nosso formato.  Ele executa c√°lculos cada vez mais lentos, que exigem um monte de informa√ß√µes adicionais, campos e tudo mais. </p><br><p>  <strong>- Como √© o ponto de vista do desenvolvedor?</strong>  <strong>Voc√™ sempre sabe qual √°rea do banco de dados √© afetada por c√°lculos pesados?</strong> </p><br><p>  Um evento chega at√© voc√™, os campos nos quais podem ser preenchidos 100% e apenas parcialmente.  Em eventos r√°pidos, voc√™ conta indicadores que s√£o recontados on-line rapidamente.  Em um ciclo longo e mais lento com um conjunto completo de dados, voc√™ reconta tarefas que exigem todos os indicadores.  Isso √© se voc√™ n√£o for fundo, pois tudo depende das especificidades das tarefas. </p><br><p>  <strong>- E os dados s√£o armazenados em qu√™?</strong>  <strong>HDD, SSD, RAM, inteiramente na RAM?</strong> </p><br><p>  Principalmente na mem√≥ria.  Trabalhamos com grandes volumes de dados em back-end que consomem e armazenam dados em estruturas padr√£o em Java ou em alguma grade de dados na mem√≥ria, dependendo da rapidez e da proximidade dos dados necess√°rios.  √â claro que os dados hist√≥ricos dos √∫ltimos dias ser√£o armazenados em SSDs e discos.  Mas o que √© necess√°rio ou pode ser necess√°rio para os c√°lculos ser√° carregado no cache, na mem√≥ria. </p><br><p>  <strong>- √â poss√≠vel fazer algo sem armazenar em cache, mas com a perda de informa√ß√µes, usando c√°lculos imprecisos?</strong> </p><br><p>  Sim  Mencionei um pouco que, √†s vezes, √© necess√°rio calcular o risco na cadeia de altera√ß√µes de um ativo de 0 a 100%, conforme os indicadores foram alterados.  O gr√°fico de distribui√ß√£o √© constru√≠do como uma porcentagem, de acordo com uma f√≥rmula ou um relacionamento linear.  Voc√™ constr√≥i pontos-chave e faz aproxima√ß√µes.  Os resultados aproximados s√£o obtidos, que n√£o coincidir√£o com o valor real em 100% se contamos em cada ponto espec√≠fico do gr√°fico, mas seriam suficientes para trabalhar com esses dados. </p><br><p>  Essa abordagem √© frequentemente usada porque permite, por exemplo, n√£o fazer todos os c√°lculos ao alterar o valor de cada moeda em rela√ß√£o a todas as outras moedas, em incrementos de um centavo.  Voc√™ calcula o movimento com uma etapa rara ou a sele√ß√£o de alguns pontos espec√≠ficos e interpola o restante.  Valores de precis√£o ser√£o suficientes. </p><br><p>  <strong>- √â sempre um grande aquecimento em Java ou est√° tudo fora do quadril?</strong> </p><br><p>  Principalmente encontra-se no quadril. </p><br><p>  <strong>- Como voc√™ luta com a coleta de lixo?</strong> </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al√©m do monitoramento padr√£o de aloca√ß√µes e da frequ√™ncia do coletor de lixo, voc√™ come√ßa a ajustar algumas coisas, como p√°ginas enormes, fazendo v√°rias coisas, como escolher o coletor de lixo certo e assim por diante. </font><font style="vertical-align: inherit;">Por exemplo, voc√™ pode tentar usar Shenandoah. </font><font style="vertical-align: inherit;">Alguns componentes s√£o criados e ajustados com base na falta de um GC completo como um fen√¥meno.</font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este √© um processo iterativo: todos os dias voc√™ coleta um gr√°fico de chama ao vivo, observa quem usa os recursos e onde, observa a frequ√™ncia das aloca√ß√µes e o que eles eliminam e come√ßa a reescrever algoritmos quentes no c√≥digo para os mais ideais ou otimizar o c√°lculo como um todo. </font></font></p><br><p> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- E como voc√™ coleta m√©tricas, como constr√≥i um gr√°fico de chama?</font></font></strong> </p><br><p>     ,   -   Java-,     ,       .       ELK-,       GC-    ,         ,     .    150    ‚Äî ,    .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a>  ,      150      .    ,     . </p><br><p> <strong>‚Äî    Java   GC ?</strong> </p><br><p> Java 8,   11-   .  .     ,  , G1. </p><br><p> <strong>‚Äî    ?</strong> </p><br><p> ,  .      JVM. </p><br><p> <strong>‚Äî   ,      , .   -  ,      ?</strong> </p><br><p> , .      ,           .       .        ( <em>UAT ‚Äî user acceptance testing</em> ) ‚Äî ,    .    ,      ,     .     2 ,    ‚Äî 3 ,  ,   . </p><br><p>    .     ,  ,      ,           .  ,         . </p><br><p> <strong>‚Äî      ,  - ,    ,   ?    ?</strong> </p><br><p>    .       :    ,   GC,  live set    . -  .     ‚Äî           .  ,     .    ,           . </p><br><p>        -, - . ,      .    ,        JSON diff.   JSON      . </p><br><p>   ,    . ,    ,     .   . </p><br><p> <strong>‚Äî         ,    ,    ?</strong> </p><br><p>    ,         ,        .     100     ¬´¬ª,    .         ,     .             . </p><br><p>    master,        ,        ,           .       ,         ,     ,    ,   .               . </p><br><p>   ,       ,  ,     ,    .  ,     ,       .          CI,     . </p><br><p> <strong>‚Äî         ?</strong> </p><br><p>         .  ‚Äî   ,     ,   .  ,   ,   ,      ,   .  - ,     . </p><br><h1 id="o-finansovom-bekende">    </h1><br><p> <strong>‚Äî ,       .</strong> <br>    ‚Äî ,   ,   .       ,   ,    ,    ,  - . </p><br><p>  ,         - ,     ‚Äî    -     ,           UI,   .   ,    ,   ,      ,     UI. </p><br><p> <strong>‚Äî      ?           ¬´¬ª   Spring?</strong> </p><br><p>     Spring, Java, MongoDB  Protobuf,     dependency injection.   UI  React,   gRPC   ,    . </p><br><p> <strong>‚Äî   Mongo,    Oracle.         - ?</strong> </p><br><p> , ,     .            .        -    ,     JDBC .   -     SpringData   ,     JDBC.   ,     ,   ,      . </p><br><p> <strong>‚Äî    -  CQRS?</strong> </p><br><p> , ,      . </p><br><h1 id="ot-bezopasnika-k-fyuchersam">     </h1><br><p> <strong>‚Äî      ? , ‚Ä¶</strong> </p><br><p>  . </p><br><p> <strong>‚Äî      ?    ,    .</strong> </p><br><p>    ,     .   ,        ,  ++ .      GNU/Linux,     Java.     -,        .   ,  .   , , ,  .   . </p><br><p>    ,         . </p><br><p> <strong>‚Äî         ?</strong> </p><br><p>   ,     ¬´¬ª .        ,   , -    ,     - .     ,    ,     -  ¬´¬ª  .  , ,     ,    ,   ,      . </p><br><p> <strong>‚Äî       ?</strong> </p><br><p> -, ,      .  <br>     :  , ,    .     . ,        ,    ,       .      ,   . </p><br><p>     ,          150 ,     .  -   .     ,   . </p><br><p> ,  ,  ,   .       ,       ,    ,      ‚Äî   . ,     ,          . </p><br><h1 id="mozhno-li-volku-odinochke-torgovat-bez-banka-i-kak-eto-sdelat">   -        </h1><br><p><img src="https://habrastorage.org/webt/7a/7x/x_/7a7xx_9f4mhr-clgis-uaxdk7-s.jpeg"></p><br><p> <strong>‚Äî   -  ,       ,    ,    ?</strong> </p><br><p> ,     ‚Äî        .   ,  - ,             - .  ,      .    ,          4,  . </p><br><p>      ,          - .         ‚Äî         .      ,            . </p><br><p>      ,    ,       .    ,         . </p><br><p> <strong>‚Äî  - -         ,    ?</strong> </p><br><p>      ¬´   ¬ª.   ‚Äî      ,     ‚Äî     ,    . </p><br><p>  -   -  ,    ,         -    .       ,   ,    . </p><br><p>     ,     . ,        ,           .    ‚Äî    .   -    ,         .   ,  -. </p><br><p>   ,    ,       .    ,      ,  -  (  -,  - ). </p><br><p> <strong>‚Äî      ?</strong> </p><br><p>     .      ,          .    ,            ,   . </p><br><p>   ‚Äî  ,   ,   ,    - .     ,       ‚Äî    ,     . </p><br><p>        .  ,    :       ,       -   ,         . </p><br><p>     , ,   -     ,          ,      .      ,   ,    ,    ,  ‚Äî   .     ,     ,  ,        . </p><br><h1 id="kak-popast-v-finansovuyu-matematiku-vsyo-ne-tak-strashno-kak-kazhetsya">      (   ,  ) </h1><br><p> <strong>‚Äî          ,        ?     ?</strong> </p><br><p>           , ,         Java.     dependency injection, ,  ,  ‚Äî    ,   .         ,    .         .  :     ,           - . </p><br><p>     ,        .    ,  ,     ,    ,    happens-before.  ,      ,          . </p><br><p> Como voc√™ sabe, coisas como <code>IntStream#distinct</code> envolvem <code>IntStream#distinct</code> primitivas em tipos Java e, posteriormente, a opera√ß√£o reversa.  Parece n√£o muito assustador, mas em grandes quantidades de dados ser√° not√°vel o boxe em massa e o anboxing, a mem√≥ria ser√° usada em v√£o.  Voc√™ precisa entender as entranhas do pr√≥prio Java, porque em pequenas coisas como o boxe, voc√™ pode gerar um monte de aloca√ß√µes adicionais que n√£o s√£o necess√°rias.  E para perceber isso a tempo, voc√™ precisa usar ferramentas para avaliar o desempenho, coletar m√©tricas e entender outras coisas padr√£o. </p><br><p>  <strong>- Voc√™ precisa conhecer as especificidades do banco?</strong> </p><br><p>  N√£o, basicamente.  Todos entendemos que as pessoas que conhecem as especificidades do banco j√° est√£o trabalhando nos bancos.  Quando voc√™ vem de outra esfera, provavelmente n√£o a conhece.  No in√≠cio, voc√™ pode estudar os documentos sobre pontos gerais: o que s√£o futuros, o que √© uma op√ß√£o, como eles diferem, quais s√£o os riscos.  E voc√™ simplesmente mergulha e come√ßa a entender as especificidades do neg√≥cio. </p><br><p>  Mas, no entanto, √© importante.  Inicialmente, voc√™ pode simplesmente implementar funcionalidades que n√£o est√£o vinculadas a uma especificidade comercial espec√≠fica, mas gradualmente aprender coisas mais complexas e espec√≠ficas de assuntos.  O que est√° aqui, o que estava no √∫ltimo local de trabalho (quando eu, como chefe do departamento, contratou funcion√°rios) - voc√™ percebe que se em cada dez pessoas pelo menos uma entende o que s√£o futuros, isso j√° √© bom. </p><br><p>  Se voc√™ tem conhecimento de algoritmos, multithreading e Java em geral, n√£o ser√° dif√≠cil estudar as especifica√ß√µes comerciais.  Acontece quando voc√™ mergulha nesse ambiente, l√™ documentos e entende. </p><br><p>  <strong>- Como voc√™ vai testar um conhecimento t√£o profundo de Java na entrevista?</strong>  <strong>Isso √© real?</strong> </p><br><p>  √â claro que voc√™ provavelmente n√£o os verificar√°.  Mas existem tarefas padr√£o em l√≥gica, algoritmos, entendimento de estruturas internas.  Esta √© uma tarefa de teste e codifica√ß√£o do quadro branco.  Por exemplo, uma tarefa para implementar um cache em uma fila que permita entender se um candidato entende multithreading - ra√ßas, deadlocks e tudo mais.  Ao longo do caminho, voc√™ pode fazer perguntas sobre a quantidade de mem√≥ria que consome, por que o TreeMap, n√£o o HashMap.  Assim, resolvendo um problema geral, voc√™ pode analisar os momentos de diferentes detalhes.  Aqui, antes, a pr√°tica pela qual certas nuances s√£o calculadas. </p><br><p>  <strong>- O que voc√™ acha que precisa ser feito para se tornar melhor como programador?</strong> </p><br><p>  Evoluir!  Codificando e observando o que s√£o tecnologias e algoritmos, quais novas linguagens, resolvendo problemas algor√≠tmicos.  De fato, muito depende da experi√™ncia.  Se voc√™ resolveu muitos problemas em algoritmos, poder√° encontrar algo semelhante em tarefas anteriores em um novo desconhecido.  √â necess√°rio desenvolver o pensamento, a capacidade de encontrar respostas rapidamente.  A capacidade de pesquisar e encontrar solu√ß√µes no StackOverflow √© muito √∫til.  Se voc√™ n√£o sabe algo, mas sabe onde encontr√°-lo, esse √© o caminho para o sucesso. </p><br><p>  Idiomas est√£o mudando, tecnologias e estruturas est√£o sendo transformadas.  Novos padr√µes surgem, mas ainda existem alguns que todos usam.  As confer√™ncias Java sem relat√≥rios sobre o Reactive Streams e as conversas sobre o Kotlin n√£o s√£o mais aprovadas.  Sentar-se em um casulo e n√£o entender que agora a fonte de eventos, em certo sentido, est√° gradualmente dominando o mundo, √© estranho. </p><br><p>  √â necess√°rio desenvolver um plano de fundo.  Por exemplo, os livros de Knut ainda s√£o relevantes.  Base mais novas tecnologias.  E voc√™ precisa saber onde e o que pesquisar no Google. </p><br><p>  <strong>- Qual foi a √∫ltima coisa que ele entendeu?</strong> </p><br><p>  Em Kotlin Coroutines.  Legal, eu gosto disso.  Tanto na sintaxe quanto na l√≥gica.  Eu vejo como trabalhar nele com multithreading e assincronia.  Anteriormente, eu tinha que usar muito pouco o Kotlin.  Agora estou estudando ativamente, alguns projetos j√° est√£o explorando.  Ele ainda existe em alguns pequenos m√≥dulos no prod. </p><br><p><img src="https://habrastorage.org/webt/yh/ez/62/yhez62w11zsgbb3btbesltzyfhc.jpeg"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt449630/">https://habr.com/ru/post/pt449630/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt449618/index.html">O futuro est√° nas nuvens</a></li>
<li><a href="../pt449622/index.html">Personalize: personalize seus telefones Snom</a></li>
<li><a href="../pt449624/index.html">Como e por que ler fichas t√©cnicas, se os microcontroladores s√£o o seu hobby</a></li>
<li><a href="../pt449626/index.html">Alisamento cognitivo: uma sess√£o de ilus√£o de exposi√ß√£o total</a></li>
<li><a href="../pt449628/index.html">N√≥s escrevemos "Ol√°, mundo!" Aplicativo da web Haskell (Spock)</a></li>
<li><a href="../pt449632/index.html">AMA com Habr V.8.0. Onboarding, not√≠cias para todos, PWA</a></li>
<li><a href="../pt449634/index.html">Eu amo a Internet das coisas</a></li>
<li><a href="../pt449636/index.html">Como evitar a picada de um inseto de beijo</a></li>
<li><a href="../pt449640/index.html">Design de videogame: voc√™ precisa entender que herda</a></li>
<li><a href="../pt449644/index.html">Estudo da VW mostra o Golf-E ecol√≥gico ap√≥s 100.000 km</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>