<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐น โฌ๏ธ ๐ ูุฏูุฑ ููุฑุณ SQL - ุฃุฏุงุฉ ูุฌุงููุฉ ูุฅูุบุงุก ุชุฌุฒุฆุฉ ุงูููุงุฑุณ ูุงููุญุงูุธุฉ ุนูููุง ๐จโ๐ป ๐ฃ๐ผ ๐๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุณููุงุช ุนุฏูุฏุฉ ุงูุนูู ูุฎุงุฏู ุฏูุณูุจู SQL ูุงูููุงู ุจุฅุฏุงุฑุฉ ุงูุฎุงุฏู ุ ุซู ุชุญุณูู ุงูุฃุฏุงุก. ุจุดูู ุนุงู ุ ุฃุฑุฏุช ุฃู ุฃูุนู ุดูุฆูุง ูููุฏูุง ูู ููุช ูุฑุงุบู ููููู ูุฒููุงุฆูุง. ูู ุงููู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุฏูุฑ ููุฑุณ SQL - ุฃุฏุงุฉ ูุฌุงููุฉ ูุฅูุบุงุก ุชุฌุฒุฆุฉ ุงูููุงุฑุณ ูุงููุญุงูุธุฉ ุนูููุง</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459914/" style=";text-align:right;direction:rtl">  ูุณููุงุช ุนุฏูุฏุฉ ุงูุนูู ูุฎุงุฏู ุฏูุณูุจู SQL ูุงูููุงู ุจุฅุฏุงุฑุฉ ุงูุฎุงุฏู ุ ุซู ุชุญุณูู ุงูุฃุฏุงุก.  ุจุดูู ุนุงู ุ ุฃุฑุฏุช ุฃู ุฃูุนู ุดูุฆูุง ูููุฏูุง ูู ููุช ูุฑุงุบู ููููู ูุฒููุงุฆูุง.  ูู ุงูููุงูุฉ ุ ุญุตููุง ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุฏุงุฉ</a> ุตูุงูุฉ ููุฑุณ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชูุญ ุงููุตุฏุฑ</a> ุตุบูุฑุฉ ูู SQL Server ู Azure. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/546/8b0/98e/5468b098eea90eb287427b56021c6962.png" alt="ูุฏูุฑ ููุฑุณ SQL"><br><br><a name="habracut"></a><h3 style=";text-align:right;direction:rtl">  ููุฑุฉ </h3><br>  ูู ุจุนุถ ุงูุฃุญูุงู ุ ุนูุฏ ุงูุนูู ููููุง ูุฃููููุงุชูู ุ ูุฏ ูุดุจู ุงูุฃุดุฎุงุต ุจุทุงุฑูุฉ ูู ููุน ุงูุฅุตุจุน - ููุงู ุฑุณูู ุชุญููุฒ ูุงููุฉ ูููุงุด ูุงุญุฏ ููุท ุ ุซู ูุฐุง ูู ุงูุญุงู.  ูุญุชู ููุช ูุฑูุจ ุ ูู ุฃูู ุงุณุชุซูุงุกูุง ูู ูุฐู ุงูููุงุญุธุฉ ููุญูุงุฉ.  ุบุงูุจูุง ูุง ุฒุฑุชูุง ุงูุฃููุงุฑ ูุฅูุดุงุก ุดูุก ุฎุงุต ุจู ุ ููู ุงูุฃููููุงุช ุชุบูุฑุช ููู ูุชู ุงูุชูุตู ุฅูู ุดูุก. <br><br>  ุชู ุชูููุฑ ุชุฃุซูุฑ ููู ุฅูู ุญุฏ ูุง ุนูู ุญุงูุฒู ูุงูุชุทููุฑ ุงููููู ูู ุฎูุงู ุงูุนูู ูู ุดุฑูุฉ ุฎุงุฑููู Devart ุ ุงูุชู ูุงูุช ุชุนูู ูู ุฅูุดุงุก ุจุฑุงูุฌ ูุชุทููุฑ ูุฅุฏุงุฑุฉ ููุงุนุฏ ุจูุงูุงุช SQL Server ู MySQL ู Oracle. <br><br>  ูุจู ุฃู ุขุชู ุฅูููู ุ ูู ููู ูุฏู ุฃู ููุฑุฉ ุนู ุชูุงุตูู ุฅูุดุงุก ุงูููุชุฌ ุงูุฎุงุต ุจู ุ ููููู ุงูุชุณุจุช ุจุงููุนู ุงููุซูุฑ ูู ุงููุนุฑูุฉ ุญูู ุงูุจููุฉ ุงูุฏุงุฎููุฉ ูู SQL Server ูู ุงูุนูููุฉ.  ุจุนุฏ ุฃู ููุช ุจุชุญุณูู ุทูุจุงุช ุงูุจูุงูุงุช ุงููุตููุฉ ูู ุฎุทูุท ุงูุฅูุชุงุฌ ุงูุฎุงุตุฉ ุจูุง ูุฃูุซุฑ ูู ุนุงู ุ ุจุฏุฃุช ุชุฏุฑูุฌูุงู ูู ููู ุงููุธููุฉ ุงููุทููุจุฉ ูู ุงูุณูู ุฃูุซุฑ ูู ุฃู ูุธููุฉ ุฃุฎุฑู. <br><br>  ูู ูุฑุญูุฉ ูุนููุฉ ุ ูุดุฃุช ุงูููุฑุฉ ูุฅูุดุงุก ููุชุฌ ุฌุฏูุฏ ููุงุณุจ ุ ููู ูุธุฑูุง ููุธุฑูู ูู ุชูุทูู ูุฐู ุงูููุฑุฉ.  ูู ุฐูู ุงูููุช ุ ุจุงููุณุจุฉ ูููุดุฑูุน ุงูุฌุฏูุฏ ุ ูู ููู ููุงู ูุง ูููู ูู ุงูููุงุฑุฏ ุงููุฌุงููุฉ ุงููุงููุฉ ุฏุงุฎู ุงูุดุฑูุฉ ุฏูู ุงููุณุงุณ ุจุงูุฃุนูุงู ุงูุฃุณุงุณูุฉ. <br><br>  ุจุงููุนู ุนูุฏูุง ูุงู ูุนูู ูู ููุงู ุฌุฏูุฏ ูุญุงูู ุชูููุฐ ุงููุดุฑูุน ูู ุชููุงุก ููุณู ุ ูุงู ุนููู ุฏุงุฆููุง ุชูุฏูู ุจุนุถ ุงูุชูุงุฒูุงุช.  ุงูููุฑุฉ ุงูุฃูููุฉ ูุฌุนู ููุชุฌ ูุจูุฑ ูููุก ุจุงูููุฒุงุช ุณุฑุนุงู ูุง ุชูุงุดุช ูุชุญููุช ุชุฏุฑูุฌูุงู ุฅูู ุงุชุฌุงู ูุฎุชูู - ููุณุฑ ุงููุธููุฉ ุงููุฎุทุทุฉ ุฅูู ุฃุฏูุงุช ุตุบูุฑุฉ ูููุตูุฉ ูุชูููุฐูุง ุจุดูู ูุณุชูู ุนู ุจุนุถูุง ุงูุจุนุถ. <br><br>  ูุชูุฌุฉ ูุฐูู ุ ุชู ุฅูุดุงุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><b>SQL Index Manager</b></a> - ุฃุฏุงุฉ ุตูุงูุฉ ููุฑุณ ูุฌุงููุฉ ูู SQL Server ู Azure.  ูุงูุช ุงูููุฑุฉ ุงูุฑุฆูุณูุฉ ูู ุฃู ุชุชุฎุฐ ูุจุฏุงุฆู ุชุฌุงุฑูุฉ ูู RedGate ู Devart ููุญุงููุฉ ุชุญุณูู ูุธุงุฆููุง.  ูุชูููุฑ ุ ููู ูู ุงููุจุชุฏุฆูู ูุงููุณุชุฎุฏููู ุฐูู ุงูุฎุจุฑุฉ ุ ุงููุฏุฑุฉ ุนูู ุชุญููู ุงูููุงุฑุณ ูุงูุญูุงุธ ุนูููุง ุจุดูู ูุฑูุญ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุทุจูู </h3><br>  ุจูููุงุช ุ ูู ุดูุก ูุจุฏู ุจุณูุทูุง ุฏุงุฆููุง ... ุฃููู ูุธุฑุฉ ุนูู ุฒูุฌูู ูู vidosikov ุงููุญูุฒูู ุ ูููู ูู ุฑู ูุจุฏุฃ ูู ุตูุน ููุชุฌ ุฑุงุฆุน.  ูููู ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ููุณ ูู ุดูุก ูุฑุฏูุฉ ููุบุงูุฉ ุ ูุธุฑูุง ููุฌูุฏ ุงูุนุฏูุฏ ูู ุงููุฒุงูู ุนูุฏ ุงูุนูู ูุน ูุธููุฉ ุฌุฏูู ุงููุธุงู sys.dm_db_index_physical_stats ููุฐูู ูู ุงูููุงู ุงููุญูุฏ ุงูุฐู ููููู ูู ุฎูุงูู ุงูุญุตูู ุนูู ุงููุนูููุงุช ุฐุงุช ุงูุตูุฉ ุญูู ุชุฌุฒุฆุฉ ุงูููุฑุณ. <br><br>  ูู ุงูุฃูุงู ุงูุฃููู ููุชุทููุฑ ุ ูุงูุช ููุงู ูุฑุตุฉ ูุจูุฑุฉ ูุฅูุดุงุก ูุณุงุฑ ูุฆูุจ ุจูู ุงููุฎุทุทุงุช ุงูููุงุณูุฉ ููุณุฎ ุงูููุทู ุงูุฐู ุชู ุชุตุญูุญู ุจุงููุนู ูุนูู ุงูุชุทุจููุงุช ุงูููุงูุณุฉ ุ ูุน ุฅุถุงูุฉ ุงููููู ูู ุงูููุงูุฉ.  ููู ุจุนุฏ ุชุญููู ุทูุจุงุช ุงูุจูุงูุงุช ุงููุตููุฉ ุ ุฃุฑุฏุช ุฃู ุฃูุนู ุดูุฆูุง ุฃูุซุฑ ุชุญุณูููุง ุ ูุงูุฐู ูุธุฑูุง ููุจูุฑููุฑุงุทูุฉ ุงูุฎุงุตุฉ ุจุงูุดุฑูุงุช ุงููุจูุฑุฉ ุ ูู ูุธูุฑ ุฃุจุฏูุง ูู ููุชุฌุงุชูุง. <br><br>  ุนูุฏ ุชุญููู RedGate SQL Index Manager (1.1.9.1378 - 155 ุฏููุงุฑูุง) ุ ููููู ุฃู ุชุฑู ุฃู ุงูุชุทุจูู ูุณุชุฎุฏู ุทุฑููุฉ ุจุณูุทุฉ ููุบุงูุฉ: ูุน ุงุณุชุนูุงู ูุงุญุฏ ูุญุตู ุนูู ูุงุฆูุฉ ุจุฌุฏุงูู ุงููุณุชุฎุฏู ูุทุฑู ุงูุนุฑุถ ุ ูุจุนุฏ ุงูุงุณุชุนูุงู ุงูุซุงูู ุ ูุชู ุฅุฑุฌุงุน ูุงุฆูุฉ ุจุฌููุน ุงูููุงุฑุณ ุถูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญุฏุฏุฉ. <br><br><pre style=";text-align:right;direction:rtl"><code class="1c hljs">SELECT objects.name AS tableOrViewName , objects.object_id AS tableOrViewId , schemas.name AS schemaName , CAST(ISNULL(lobs.NumLobs, <span class="hljs-number"><span class="hljs-number">0</span></span>) AS BIT) AS ContainsLobs , o.is_memory_optimized FROM sys.objects AS objects JOIN sys.schemas AS schemas ON schemas.schema_id = objects.schema_id LEFT JOIN ( SELECT object_id , COUNT(*) AS NumLobs FROM sys.columns WITH (NOLOCK) WHERE system_type_id IN (<span class="hljs-number"><span class="hljs-number">34</span></span>, <span class="hljs-number"><span class="hljs-number">35</span></span>, <span class="hljs-number"><span class="hljs-number">99</span></span>) OR max_length = -<span class="hljs-number"><span class="hljs-number">1</span></span> GROUP BY object_id ) AS lobs ON objects.object_id = lobs.object_id LEFT JOIN sys.tables AS o ON o.object_id = objects.object_id WHERE objects.type = 'U' OR objects.type = 'V' SELECT i.object_id AS tableOrViewId , i.name AS indexName , i.index_id AS indexId , i.allow_page_locks AS allowPageLocks , p.partition_number AS partitionNumber , CAST((c.numPartitions - <span class="hljs-number"><span class="hljs-number">1</span></span>) AS BIT) AS belongsToPartitionedIndex FROM sys.indexes AS i JOIN sys.partitions AS p ON p.index_id = i.index_id AND p.object_id = i.object_id JOIN ( SELECT COUNT(*) AS numPartitions , object_id , index_id FROM sys.partitions GROUP BY object_id , index_id ) AS c ON c.index_id = i.index_id AND c.object_id = i.object_id WHERE i.index_id &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> -- ignore heaps AND i.is_disabled = <span class="hljs-number"><span class="hljs-number">0</span></span> AND i.is_hypothetical = <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูู ุฏูุฑุฉ ุ ูุชู ุฅุฑุณุงู ุทูุจ ููู ูุณู ูู ุงูููุฑุณ ูุชุญุฏูุฏ ุญุฌู ููุณุชูู ุงูุชุฌุฒุฆุฉ.  ูู ููุงูุฉ ุงููุญุต ุ ูุชู ุชุฌุงูู ุงูููุงุฑุณ ุงูุชู ุชุฒู ุฃูู ูู ุนุชุจุฉ ุงูุฅุฏุฎุงู ุนูู ุงูุนููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="1c hljs">EXEC sp_executesql N' SELECT index_id, avg_fragmentation_in_percent, page_count FROM sys.dm_db_index_physical_stats(@databaseId, @objectId, @indexId, @partitionNr, NULL)' , N'@databaseId int,@objectId int,@indexId int,@partitionNr int' , @databaseId = <span class="hljs-number"><span class="hljs-number">7</span></span>, @objectId = <span class="hljs-number"><span class="hljs-number">2133582639</span></span>, @indexId = <span class="hljs-number"><span class="hljs-number">1</span></span>, @partitionNr = <span class="hljs-number"><span class="hljs-number">1</span></span> EXEC sp_executesql N' SELECT index_id, avg_fragmentation_in_percent, page_count FROM sys.dm_db_index_physical_stats(@databaseId, @objectId, @indexId, @partitionNr, NULL)' , N'@databaseId int,@objectId int,@indexId int,@partitionNr int' , @databaseId = <span class="hljs-number"><span class="hljs-number">7</span></span>, @objectId = <span class="hljs-number"><span class="hljs-number">2133582639</span></span>, @indexId = <span class="hljs-number"><span class="hljs-number">2</span></span>, @partitionNr = <span class="hljs-number"><span class="hljs-number">1</span></span> EXEC sp_executesql N' SELECT index_id, avg_fragmentation_in_percent, page_count FROM sys.dm_db_index_physical_stats(@databaseId, @objectId, @indexId, @partitionNr, NULL)' , N'@databaseId int,@objectId int,@indexId int,@partitionNr int' , @databaseId = <span class="hljs-number"><span class="hljs-number">7</span></span>, @objectId = <span class="hljs-number"><span class="hljs-number">2133582639</span></span>, @indexId = <span class="hljs-number"><span class="hljs-number">3</span></span>, @partitionNr = <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  ุนูุฏ ุชุญููู ููุทู ูุฐุง ุงูุชุทุจูู ุ ููููู ุงูุนุซูุฑ ุนูู ุงูุนุฏูุฏ ูู ุฃูุฌู ุงููุตูุฑ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ุนุซุฑุช ุนูู ุฎุทุฃ ูุน ุชูุงูุงุช ุ ุซู ูุจู ุฅุฑุณุงู ุทูุจ ุ ูุง ูุชู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ุญูู ูุง ุฅุฐุง ูุงู ุงููุณู ุงูุญุงูู ูุญุชูู ุนูู ุณูุงุณู ูุงุณุชุจุนุงุฏ ุงูุฃูุณุงู ุงููุงุฑุบุฉ ูู ุงููุณุญ. <br><br>  ูููู ุงููุดููุฉ ุฃูุซุฑ ุญุฏุฉ ูู ุฌุงูุจ ุขุฎุฑ: ุณูููู ุนุฏุฏ ุทูุจุงุช ุงูุฎุงุฏู ูุณุงูููุง ุชูุฑูุจูุง ูุฅุฌูุงูู ุนุฏุฏ ุงูุฃุณุทุฑ ูู sys.partitions.  ูุธุฑูุง ูุญูููุฉ ุฃู ููุงุนุฏ ุงูุจูุงูุงุช ุงูุญููููุฉ ูููู ุฃู ุชุญุชูู ุนูู ุนุดุฑุงุช ุงูุขูุงู ูู ุงูุฃูุณุงู ุ ูููู ุฃู ุชุคุฏู ูุฐู ุงููุฑูู ุงูุฏูููุฉ ุฅูู ุนุฏุฏ ูุจูุฑ ูู ุงูุทูุจุงุช ุงูููุงุซูุฉ ููุฎุงุฏู.  ูู ุงูุญุงูุฉ ุงูุชู ุชููู ูููุง ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุนูุฏุฉ ุ ุณูุตุจุญ ููุช ุงููุญุต ุฃุทูู ุจุณุจุจ ุฒูุงุฏุฉ ุงูุชุฃุฎูุฑ ูู ุงูุดุจูุฉ ููู ุทูุจ ุ ุญุชู ุฃุจุณุทูุง. <br><br>  ุนูู ุนูุณ RedGate ุ ูุชููู ููุชุฌ ูุดุงุจู ุชู ุชุทููุฑู ูู Devart - dbForge Index Manager ูู SQL Server (1.10.38 - 99 ุฏููุงุฑูุง) ูุนูููุงุช ูู ุงุณุชุนูุงู ูุจูุฑ ูุงุญุฏ ุซู ูุนุฑุถ ูู ุดูุก ุนูู ุงูุนููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="1c hljs">SELECT SCHEMA_NAME(o.[schema_id]) AS [schema_name] , o.name AS parent_name , o.[type] AS parent_type , i.name , i.type_desc , s.avg_fragmentation_in_percent , s.page_count , p.partition_number , p.[rows] , ISNULL(lob.is_lob_legacy, <span class="hljs-number"><span class="hljs-number">0</span></span>) AS is_lob_legacy , ISNULL(lob.is_lob, <span class="hljs-number"><span class="hljs-number">0</span></span>) AS is_lob , CASE WHEN ds.[type] = 'PS' THEN <span class="hljs-number"><span class="hljs-number">1</span></span> ELSE <span class="hljs-number"><span class="hljs-number">0</span></span> END AS is_partitioned FROM sys.dm_db_index_physical_stats(DB_ID(), <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) s JOIN sys.partitions p ON s.[object_id] = p.[object_id] AND s.index_id = p.index_id AND s.partition_number = p.partition_number JOIN sys.indexes i ON i.[object_id] = s.[object_id] AND i.index_id = s.index_id LEFT JOIN ( SELECT c.[object_id] , index_id = ISNULL(i.index_id, <span class="hljs-number"><span class="hljs-number">1</span></span>) , is_lob_legacy = MAX(CASE WHEN c.system_type_id IN (<span class="hljs-number"><span class="hljs-number">34</span></span>, <span class="hljs-number"><span class="hljs-number">35</span></span>, <span class="hljs-number"><span class="hljs-number">99</span></span>) THEN <span class="hljs-number"><span class="hljs-number">1</span></span> END) , is_lob = MAX(CASE WHEN c.max_length = -<span class="hljs-number"><span class="hljs-number">1</span></span> THEN <span class="hljs-number"><span class="hljs-number">1</span></span> END) FROM sys.columns c LEFT JOIN sys.index_columns i ON c.[object_id] = i.[object_id] AND c.column_id = i.column_id AND i.index_id &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> WHERE c.system_type_id IN (<span class="hljs-number"><span class="hljs-number">34</span></span>, <span class="hljs-number"><span class="hljs-number">35</span></span>, <span class="hljs-number"><span class="hljs-number">99</span></span>) OR c.max_length = -<span class="hljs-number"><span class="hljs-number">1</span></span> GROUP BY c.[object_id], i.index_id ) lob ON lob.[object_id] = i.[object_id] AND lob.index_id = i.index_id JOIN sys.objects o ON o.[object_id] = i.[object_id] JOIN sys.data_spaces ds ON i.data_space_id = ds.data_space_id WHERE i.[type] IN (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) AND i.is_disabled = <span class="hljs-number"><span class="hljs-number">0</span></span> AND i.is_hypothetical = <span class="hljs-number"><span class="hljs-number">0</span></span> AND s.index_level = <span class="hljs-number"><span class="hljs-number">0</span></span> AND s.alloc_unit_type_desc = 'IN_ROW_DATA' AND o.[type] IN ('U', 'V')</code> </pre> <br>  ููุฏ ุชูููุง ูู ุงูุชุฎูุต ูู ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ููุญุฌุงุจ ูู ููุณ ุงูููุน ูู ุงูุงุณุชุนูุงูุงุช ูู ููุชุฌ ููุงูุณ ุ ูููู ุนููุจ ูุฐุง ุงูุชุทุจูู ูู ุฃูู ูุง ูุชู ุชูุฑูุฑ ูุนููุงุช ุฅุถุงููุฉ ุฅูู ูุธููุฉ sys.dm_db_index_physical_stats ุงูุชู ูููู ุฃู ุชุญุฏ ูู ูุณุญ ุงูููุงุฑุณ ุบูุฑ ุงูุถุฑูุฑูุฉ ุจุดูู ูุงุถุญ.  ูู ุงููุงูุน ุ ูุคุฏู ูุฐุง ุฅูู ุงูุญุตูู ุนูู ูุนูููุงุช ุญูู ุฌููุน ุงููุคุดุฑุงุช ูู ุงููุธุงู ูุชุญูููุงุช ุฅุถุงููุฉ ูููุฑุต ูู ูุฑุญูุฉ ุงููุณุญ. <br><br>  ูู ุงูููู ููุงุญุธุฉ ุฃู ุงูุจูุงูุงุช ุงูุชู ุชู ุงูุญุตูู ุนูููุง ูู sys.dm_db_index_physical_stats ูู ูุชู ุชุฎุฒูููุง ูุคูุชูุง ุจุดูู ุฏุงุฆู ูู ุชุฌูุน ุงููุฎุฒู ุงููุคูุช ุ ูุจุงูุชุงูู ูุฅู ุชูููู ุงููุฑุงุกุงุช ุงููุงุฏูุฉ ุนูุฏ ุงูุญุตูู ุนูู ูุนูููุงุช ุญูู ุชุฌุฒุฆุฉ ุงูููุฑุณ ูุงู ุฃุญุฏ ุงูููุงู ุฐุงุช ุงูุฃููููุฉ ุฃุซูุงุก ุงูุชุทููุฑ. <br><br>  ุจุนุฏ ุนุฏุฉ ุชุฌุงุฑุจ ุ ุงุชุถุญ ุฃู ุงูุฌูุน ุจูู ููุง ุงูููุฌูู ุ ูุชูุณูู ุงููุณุญ ุฅูู ุฌุฒุฃูู.  ุฃููุงู ุ ูุญุฏุฏ ุฃุญุฏ ุงูุงุณุชุนูุงูุงุช ุงููุจูุฑุฉ ุญุฌู ุงูููุงุทุน ุ ููููู ุจุชุตููุฉ ูุง ุณุจู ุบูุฑ ุงูููุฌูุฏุฉ ูู ูุทุงู ุงูุชุตููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="1c hljs">INSERT INTO <span class="hljs-meta"><span class="hljs-meta">#AllocationUnits (ContainerID, ReservedPages, UsedPages) SELECT [container_id] , SUM([total_pages]) , SUM([used_pages]) FROM sys.allocation_units WITH(NOLOCK) GROUP BY [container_id] HAVING SUM([total_pages]) BETWEEN @MinIndexSize AND @MaxIndexSize</span></span></code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูุญุตู ููุท ุนูู ุงูุฃูุณุงู ุงูุชู ุชุญุชูู ุนูู ุจูุงูุงุช ูุชุฌูุจ ุนูููุงุช ุงููุฑุงุกุฉ ุบูุฑ ุงูุถุฑูุฑูุฉ ูู ููุงุฑุณ ูุงุฑุบุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="1c hljs">SELECT [object_id] , [index_id] , [partition_id] , [partition_number] , [rows] , [data_compression] INTO <span class="hljs-meta"><span class="hljs-meta">#Partitions FROM sys.partitions WITH(NOLOCK) WHERE [object_id] &gt; 255 AND [rows] &gt; 0 AND [object_id] NOT IN (SELECT * FROM #ExcludeList)</span></span></code> </pre> <br>  ููููุง ููุฅุนุฏุงุฏุงุช ุ ูุชู ุงูุญุตูู ุนูู ุฃููุงุน ุงูููุงุฑุณ ุงูุชู ูุฑูุฏ ุงููุณุชุฎุฏู ุชุญููููุง ููุท (ูุชู ุฏุนู ุงูุนูู ูุน ุฃููุงู ุงูููุงุฑุณ ูููุงุฑุณ ุงููุชูุฉ / ุบูุฑ ุงููุชูุฉ ููุคุดุฑุงุช ุงูุฃุนูุฏุฉ). <br><br><pre style=";text-align:right;direction:rtl"> <code class="1c hljs">INSERT INTO <span class="hljs-meta"><span class="hljs-meta">#Indexes SELECT ObjectID = i.[object_id] , IndexID = i.index_id , IndexName = i.[name] , PagesCount = a.ReservedPages , UnusedPagesCount = a.ReservedPages - a.UsedPages , PartitionNumber = p.[partition_number] , RowsCount = ISNULL(p.[rows], 0) , IndexType = i.[type] , IsAllowPageLocks = i.[allow_page_locks] , DataSpaceID = i.[data_space_id] , DataCompression = p.[data_compression] , IsUnique = i.[is_unique] , IsPK = i.[is_primary_key] , FillFactorValue = i.[fill_factor] , IsFiltered = i.[has_filter] FROM #AllocationUnits a JOIN #Partitions p ON a.ContainerID = p.[partition_id] JOIN sys.indexes i WITH(NOLOCK) ON i.[object_id] = p.[object_id] AND p.[index_id] = i.[index_id] WHERE i.[type] IN (0, 1, 2, 5, 6) AND i.[object_id] &gt; 255</span></span></code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูุจุฏุฃ ุงูุณุญุฑ ููููุงู: ุจุงููุณุจุฉ ูุฌููุน ุงููุคุดุฑุงุช ุงูุตุบูุฑุฉ ุ ูุญุฏุฏ ูุณุชูู ุงูุชูุชุช ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ sys.dm_db_index_physical_stats ูุฑุงุฑูุง ูุชูุฑุงุฑูุง ูุน ุฅุดุงุฑุฉ ูุงููุฉ ูุฌููุน ุงููุนููุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="1c hljs">INSERT INTO <span class="hljs-meta"><span class="hljs-meta">#Fragmentation (ObjectID, IndexID, PartitionNumber, Fragmentation) SELECT i.ObjectID , i.IndexID , i.PartitionNumber , r.[avg_fragmentation_in_percent] FROM #Indexes i CROSS APPLY sys.dm_db_index_physical_stats(@DBID, i.ObjectID, i.IndexID, i.PartitionNumber, 'LIMITED') r WHERE i.PagesCount &lt;= @PreDescribeSize AND r.[index_level] = 0 AND r.[alloc_unit_type_desc] = 'IN_ROW_DATA' AND i.IndexType IN (0, 1, 2)</span></span></code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูุฑุฌุน ุฌููุน ุงููุนูููุงุช ุงูููููุฉ ุฅูู ุงูุนููู ุ ูุน ุชุตููุฉ ุงูุจูุงูุงุช ุงูุฒุงุฆุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="1c hljs">SELECT i.ObjectID , i.IndexID , i.IndexName , ObjectName = o.[name] , SchemaName = s.[name] , i.PagesCount , i.UnusedPagesCount , i.PartitionNumber , i.RowsCount , i.IndexType , i.IsAllowPageLocks , u.TotalWrites , u.TotalReads , u.TotalSeeks , u.TotalScans , u.TotalLookups , u.LastUsage , i.DataCompression , f.Fragmentation , IndexStats = STATS_DATE(i.ObjectID, i.IndexID) , IsLobLegacy = ISNULL(lob.IsLobLegacy, <span class="hljs-number"><span class="hljs-number">0</span></span>) , IsLob = ISNULL(lob.IsLob, <span class="hljs-number"><span class="hljs-number">0</span></span>) , IsSparse = CAST(CASE WHEN p.ObjectID IS <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> THEN <span class="hljs-number"><span class="hljs-number">0</span></span> ELSE <span class="hljs-number"><span class="hljs-number">1</span></span> END AS BIT) , IsPartitioned = CAST(CASE WHEN dds.[data_space_id] IS NOT <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> THEN <span class="hljs-number"><span class="hljs-number">1</span></span> ELSE <span class="hljs-number"><span class="hljs-number">0</span></span> END AS BIT) , FileGroupName = fg.[name] , i.IsUnique , i.IsPK , i.FillFactorValue , i.IsFiltered , a.IndexColumns , a.IncludedColumns FROM <span class="hljs-meta"><span class="hljs-meta">#Indexes i JOIN sys.objects o WITH(NOLOCK) ON o.[object_id] = i.ObjectID JOIN sys.schemas s WITH(NOLOCK) ON s.[schema_id] = o.[schema_id] LEFT JOIN #AggColumns a ON a.ObjectID = i.ObjectID AND a.IndexID = i.IndexID LEFT JOIN #Sparse p ON p.ObjectID = i.ObjectID LEFT JOIN #Fragmentation f ON f.ObjectID = i.ObjectID AND f.IndexID = i.IndexID AND f.PartitionNumber = i.PartitionNumber LEFT JOIN ( SELECT ObjectID = [object_id] , IndexID = [index_id] , TotalWrites = NULLIF([user_updates], 0) , TotalReads = NULLIF([user_seeks] + [user_scans] + [user_lookups], 0) , TotalSeeks = NULLIF([user_seeks], 0) , TotalScans = NULLIF([user_scans], 0) , TotalLookups = NULLIF([user_lookups], 0) , LastUsage = ( SELECT MAX(dt) FROM ( VALUES ([last_user_seek]) , ([last_user_scan]) , ([last_user_lookup]) , ([last_user_update]) ) t(dt) ) FROM sys.dm_db_index_usage_stats WITH(NOLOCK) WHERE [database_id] = @DBID ) u ON i.ObjectID = u.ObjectID AND i.IndexID = u.IndexID LEFT JOIN #Lob lob ON lob.ObjectID = i.ObjectID AND lob.IndexID = i.IndexID LEFT JOIN sys.destination_data_spaces dds WITH(NOLOCK) ON i.DataSpaceID = dds.[partition_scheme_id] AND i.PartitionNumber = dds.[destination_id] JOIN sys.filegroups fg WITH(NOLOCK) ON ISNULL(dds.[data_space_id], i.DataSpaceID) = fg.[data_space_id] WHERE o.[type] IN ('V', 'U') AND ( f.Fragmentation &gt;= @Fragmentation OR i.PagesCount &gt; @PreDescribeSize OR i.IndexType IN (5, 6) )</span></span></code> </pre> <br>  ุจุนุฏ ุฐูู ุ ุชุญุฏุฏ ุงุณุชุนูุงูุงุช ุงูููุงุท ูุณุชูู ุชุฌุฒุฆุฉ ุงููุคุดุฑุงุช ุงููุจูุฑุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="1c hljs">EXEC sp_executesql N' DECLARE @DBID INT = DB_ID() SELECT [avg_fragmentation_in_percent] FROM sys.dm_db_index_physical_stats(@DBID, @ObjectID, @IndexID, @PartitionNumber, ''LIMITED'') WHERE [index_level] = 0 AND [alloc_unit_type_desc] = ''IN_ROW_DATA''' , N'@ObjectID int,@IndexID int,@PartitionNumber int' , @ObjectId = <span class="hljs-number"><span class="hljs-number">1044198770</span></span>, @IndexId = <span class="hljs-number"><span class="hljs-number">1</span></span>, @PartitionNumber = <span class="hljs-number"><span class="hljs-number">1</span></span> EXEC sp_executesql N' DECLARE @DBID INT = DB_ID() SELECT [avg_fragmentation_in_percent] FROM sys.dm_db_index_physical_stats(@DBID, @ObjectID, @IndexID, @PartitionNumber, ''LIMITED'') WHERE [index_level] = 0 AND [alloc_unit_type_desc] = ''IN_ROW_DATA''' , N'@ObjectID int,@IndexID int,@PartitionNumber int' , @ObjectId = <span class="hljs-number"><span class="hljs-number">1552724584</span></span>, @IndexId = <span class="hljs-number"><span class="hljs-number">0</span></span>, @PartitionNumber = <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  ูุธุฑูุง ููุฐุง ุงูููุฌ ุ ุนูุฏ ุฅูุดุงุก ุงุณุชุนูุงูุงุช ุ ูุงู ูู ุงููููู ุญู ูุดููุงุช ุฃุฏุงุก ุงููุณุญ ุงูุชู ุชูุช ููุงุฌูุชูุง ูู ุชุทุจููุงุช ุงูููุงูุณูู.  ูููู ุงุณุชููุงู ุฐูู ุ ูููู ูู ุนูููุฉ ุงูุชุทููุฑ ุ ุธูุฑุช ุฃููุงุฑูุง ุฌุฏูุฏุฉ ุชุฏุฑูุฌูุฉ ุณูุญุช ุจุชูุณูุน ูุทุงู ุชุทุจูู ููุชุฌู. <br><br>  ูู ุงูุจุฏุงูุฉ ุ ุชู ุชูููุฐ ุฏุนู ุงูุนูู ูุน WAIT_AT_LOW_PRIORITY ุ ุซู ุฃุตุจุญ ูู ุงููููู ุงุณุชุฎุฏุงู DATA_COMPRESSION ู FILL_FACTOR ูุฅุนุงุฏุฉ ุจูุงุก ุงููุคุดุฑุงุช. <br><br><img src="https://habrastorage.org/webt/kd/em/xj/kdemxjo8sj0hxa4y_omvv3dph6a.png" alt="ุฅุนุฏุงุฏุงุช ูุฏูุฑ ููุฑุณ SQL"><br><br>  ูุงู ุงูุชุทุจูู ูุชุถุฎููุง ููููุงู ูุน ูุธุงุฆู ุบูุฑ ูุฎุทุทุฉ ูุณุจููุง ุ ูุซู ุฎุฏูุฉ ุงูุฃุนูุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="1c hljs">SELECT * FROM ( SELECT IndexID = [index_id] , PartitionNumber = [partition_number] , PagesCount = SUM([size_in_bytes]) / <span class="hljs-number"><span class="hljs-number">8192</span></span> , UnusedPagesCount = ISNULL(SUM(CASE WHEN [state] = <span class="hljs-number"><span class="hljs-number">1</span></span> THEN [size_in_bytes] END), <span class="hljs-number"><span class="hljs-number">0</span></span>) / <span class="hljs-number"><span class="hljs-number">8192</span></span> , Fragmentation = CAST(ISNULL(SUM(CASE WHEN [state] = <span class="hljs-number"><span class="hljs-number">1</span></span> THEN [size_in_bytes] END), <span class="hljs-number"><span class="hljs-number">0</span></span>) * <span class="hljs-number"><span class="hljs-number">100</span></span>. / SUM([size_in_bytes]) AS FLOAT) FROM sys.fn_column_store_row_groups(@ObjectID) GROUP BY [index_id] , [partition_number] ) t WHERE Fragmentation &gt;= @Fragmentation AND PagesCount BETWEEN @MinIndexSize AND @MaxIndexSize</code> </pre> <br>  ุฃู ุงููุฏุฑุฉ ุนูู ุฅูุดุงุก ููุงุฑุณ ุบูุฑ ุนูููุฏูุฉ ุจูุงุกู ุนูู ูุนูููุงุช ูู dm_db_missing_index: <br><br><pre style=";text-align:right;direction:rtl"> <code class="1c hljs">SELECT ObjectID = d.[object_id] , UserImpact = gs.[avg_user_impact] , TotalReads = gs.[user_seeks] + gs.[user_scans] , TotalSeeks = gs.[user_seeks] , TotalScans = gs.[user_scans] , LastUsage = ISNULL(gs.[last_user_scan], gs.[last_user_seek]) , IndexColumns = CASE WHEN d.[equality_columns] IS NOT <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AND d.[inequality_columns] IS NOT <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> THEN d.[equality_columns] + ', ' + d.[inequality_columns] WHEN d.[equality_columns] IS NOT <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AND d.[inequality_columns] IS <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> THEN d.[equality_columns] ELSE d.[inequality_columns] END , IncludedColumns = d.[included_columns] FROM sys.dm_db_missing_index_groups g WITH(NOLOCK) JOIN sys.dm_db_missing_index_group_stats gs WITH(NOLOCK) ON gs.[group_handle] = g.[index_group_handle] JOIN sys.dm_db_missing_index_details d WITH(NOLOCK) ON g.[index_handle] = d.[index_handle] WHERE d.[database_id] = DB_ID()</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h3><br>  ุจุนุฏ ุณุชุฉ ุฃุดูุฑ ูู ูุฑุญูุฉ ุงูุชุทููุฑ ุงููุดุท ุ ูุณุนุฏูู ุฃู ุงูุฎุทุท ูุง ุชูุชูู ุนูุฏ ูุฐุง ุงูุญุฏ ุ ูุฃููู ุฃุฑุบุจ ูู ููุงุตูุฉ ุชุทููุฑ ูุฐุง ุงูููุชุฌ.  ุชุชูุซู ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุฅุถุงูุฉ ูุธููุฉ ููุจุญุซ ุนู ููุงุฑุณ ููุฑุฑุฉ ุฃู ุบูุฑ ูุณุชุฎุฏูุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุชุทุจูู ุฏุนู ูุงูู ูุฎุฏูุฉ ุงูุฅุญุตุงุฆูุงุช ุฏุงุฎู SQL Server. <br><br>  ุงุณุชูุงุฏูุง ุฅูู ุญูููุฉ ุฃู ููุงู ุงูุนุฏูุฏ ูู ุงูุญููู ุงููุฏููุนุฉ ูู ุงูุณูู ุ ุฃุฑูุฏ ุฃู ุฃุตุฏู ุฃูู ูุธุฑูุง ููุฌูุฏ ุชุญุฏูุฏ ุงูููุงูุน ูุฌุงููุง ููุตููุง ููุจูุงูุงุช ุงููุตููุฉ ุงููุญุณูุฉ ุฃูุซุฑ ููุฌูุฏ ุงูุนุฏูุฏ ูู ุงูุฃุดูุงุก ุงูุตุบูุฑุฉ ุงููููุฏุฉ ูุดุฎุต ูุง ุ ูุฅู ูุฐุง ุงูููุชุฌ ุณูุตุจุญ ุจุงูุชุฃููุฏ ูููุฏูุง ูู ุงูููุงู ุงูููููุฉ. <br><br>  ูููู ุชูุฒูู ุงูุฅุตุฏุงุฑ ุงูุญุงูู ูู ุงูุชุทุจูู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><b>GitHub</b></a> .  ุงููุตุงุฏุฑ ูู ููุณ ุงูููุงู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar459914/">https://habr.com/ru/post/ar459914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar459898/index.html">ุนุงุฏุช ุงูุฎุทุฉ ุฅูู ุงูุงูุชุตุงุฏ</a></li>
<li><a href="../ar459900/index.html">ุชุตูุฑ ุนููุฏ ูู DataFrame ุจุงุณุชุฎุฏุงู ููุชุจุฉ Seaborn</a></li>
<li><a href="../ar459902/index.html">ุฎุฑูุทุฉ ุชูุงุนููุฉ ููููุงุทู ุงูุฑูุณูุฉ ูููุจุชุฏุฆูู. ุงูุฃุฎุทุงุก ุงูุชู ุงุฑุชูุจุชูุง ูุงูุชู ูุฌุจ ุฃูุง ุชุฑุชูุจูุง</a></li>
<li><a href="../ar459906/index.html">ุชูู ุชุงู ุชู ุ ุงูุฌุฒุก 3: ุชุฑุงุฌุน / ุงูุฅุนุงุฏุฉ ูุน ุชุฎุฒูู ุงูุฃูุงูุฑ</a></li>
<li><a href="../ar459910/index.html">ุงููููู: ุงูุดุฑูุงุช ููุณุช ูู ุนุฌูุฉ ูู ุฃูุฑูุง ูุชุทููุฑ ุฎุฏูุงุช ููุณุงุนุฏู ุงูุตูุช - ูุง ูู ุงููุฎุงุทุฑ</a></li>
<li><a href="../ar459918/index.html">ุญู ุงููุดููุงุช ุจุงุณุชุฎุฏุงู pwnable.kr 03 - bof. ุชุฌุงูุฒ ุณุนุฉ ุงููุฎุฒู ุงููุคูุช ุนูู ุงูููุฏุณ</a></li>
<li><a href="../ar459922/index.html">ุฅุฒุงูุฉ ุงูุถูุถุงุก ุนุงููุฉ ุงูุชุฑุฏุฏ ูู ุฅุดุงุฑุงุช ุฃุฌูุฒุฉ ุงุณุชุดุนุงุฑ ุงูุงูุชุฒุงุฒ ุฃุซูุงุก ุชุดุฎูุต ุงูุชุฒุงุฒ ุงููุญุงูู</a></li>
<li><a href="../ar459924/index.html">ุฏูุฑุฉ ุงุฎุชุจุงุฑ ุงูุชูุงุนู ุงููุงูู. ุชูุฑูุฑ Auto.ru</a></li>
<li><a href="../ar459928/index.html">ุทุฑูู ุงูุทุงูุจ ูุชุทููุฑ ุชุทุจููุงุช ุงูุฌูุงู</a></li>
<li><a href="../ar459930/index.html">ุจูุซูู ุงุณุชูุฑุงุฏ ุงูุฃุชูุชุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>