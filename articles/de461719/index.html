<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚽 💪🏽 😵 Open Source-Lösung für die Berichtsautomatisierung 🤳 🤹🏼 🤘🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entwickler von Websites und mobilen Anwendungen müssen häufig die Vorbereitung von PDF-Seiten zum Drucken oder zum Versenden per E-Mail an Kunden steu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Open Source-Lösung für die Berichtsautomatisierung</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/461719/">  Entwickler von Websites und mobilen Anwendungen müssen häufig die Vorbereitung von PDF-Seiten zum Drucken oder zum Versenden per E-Mail an Kunden steuern. <br><br>  PDF-Dateien haben die volle Kontrolle über die Anzeige von Text und Grafiken auf der Seite.  Leider sind Bibliotheken zum Generieren von dynamisch aufgefüllten PDF-Dateien nicht in den Standardtools von PHP, JS (Web), Java oder Swift (Android bzw. iOS) enthalten.  In diesem Artikel möchte ich Sie über die Open Source-Lösung zum Generieren von PDF-Dateien informieren. <br><br><img src="https://habrastorage.org/webt/uv/wy/gb/uvwygbohl_trt0rltfob2kyqj4m.png"><br><br><a name="habracut"></a>  <b>JasperReports</b> ist eine Open-Source-Java-Bibliothek zum Generieren dynamisch aufgefüllter Dateien.  Es verfügt über viele Tools zum Erstellen komplexer Berichtsformulare, auch im PDF-Format. Es stehen jedoch auch andere Formate zur Verfügung: RTF, DOCX, HTML, XLS, XLS, CSV und XML.  Mit anderen Worten, es reicht aus, ein Formular zu entwickeln, ein Layout zu erstellen - und es wird möglich sein, es in eines der oben genannten Formate zu exportieren. <br><br>  Es gibt auch gute Bibliotheken wie PDFLib (kommerzielle Version) für PHP und die Open Source-Version von PDFLib-Lite.  Die Bibliothek ist zwar recht teuer, und die Lite-Version wird nur im Quellcode verteilt. Wenn sie in der Entwicklungsumgebung installiert wird, kann diese Einschränkung zu einem Problem werden. <br><br>  PDFbox ist eine weitere Open-Source-Java-Bibliothek für die Arbeit mit PDF-Dokumenten.  Sie können neue PDF-Dokumente erstellen, vorhandene Dokumente verwalten und Inhalte daraus extrahieren.  Im Gegensatz zu JasperReports verfügt es jedoch nicht über eine Benutzeroberfläche. <br><br>  Ich denke, JasperReports ist besonders nützlich in großen Projekten im Zusammenhang mit der Berichterstellung und nicht nur im PDF-Format.  Es bietet alles, was Sie zur Implementierung in Ihrem Projekt benötigen: einfache Erstellung komplexer Berichtsformulare, Benutzeroberfläche für komfortables Layout, Serveranwendung und einfache Integration in die Front. <br><br>  In dem Artikel werde ich folgende Themen behandeln: <br><br><ul><li>  Installieren Sie die Entwicklungsumgebung und die Serveranwendung. </li><li>  Erstellen Sie eine PDF-Datei, die automatisch aus der Datenbank ausgefüllt wird. </li><li>  Integration der Serveranwendung in das Frontend, um das erstellte PDF zu erhalten. </li></ul><br>  Um JasperReports in Ihrem Projekt verwenden zu können, müssen Sie zwei Anwendungen herunterladen: JaspersoftStudio - im Folgenden als <i>Arbeitsumgebung bezeichnet</i> - und JasperServer - als <i>Serveranwendung</i> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JaspersoftStudio</a> ist eine Eclipse-basierte Entwicklungsumgebung mit der integrierten JasperReports-Java-Bibliothek, in der dynamische oder statische PDF-Dateien entwickelt werden: z. B. Tickets, Quittungen, Verträge, Analysediagramme und andere. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JasperServer</a> ist eine Serveranwendung, in der Dateien von JaspersoftStudio bereitgestellt und gespeichert werden.  Sie können von einer mobilen oder Webanwendung aus aufgerufen werden.  JasperServer verfügt über eine Benutzeroberfläche, mit der Sie Berichte anzeigen, Konten für verschiedene Benutzer erstellen und ihnen entsprechenden Zugriff gewähren können.  Sie können die Mailingliste auch für E-Mail konfigurieren (Scheduler). <br><br><h4>  Richten Sie die Arbeitsumgebung und die Serveranwendung ein </h4><br>  Sie können Anwendungen über die obigen Links herunterladen und installieren.  Nach dem Einrichten von zwei Anwendungen muss eine Verbindung von der Arbeitsumgebung zur Serveranwendung hergestellt werden. <br><br>  <i>Server → JasperReports-</i> Serververbindung <i>erstellen →</i> Geben Sie den bevorzugten Servernamen, die <i>URL</i> , den Benutzernamen und das Kennwort an.  Klicken Sie auf Verbindung <i>testen</i> , um zu überprüfen, ob die Verbindung zum Server hergestellt wurde.  Wenn Sie <i>Erfolg sehen,</i> gehen Sie weiter. <br><br><img src="https://habrastorage.org/webt/gi/mp/kc/gimpkcrr7tcber328uuy1sgwetw.png"><br><br><h4>  Erstellen Sie ein dynamisch ausgefülltes PDF und veröffentlichen Sie es </h4><br>  Wir haben die Entwicklungsumgebung und den Server installiert und eine Verbindung zwischen ihnen hergestellt.  Erstellen wir nun eine primitive, dynamisch aufgefüllte PDF-Datei, die beim Start (generiert) Daten aus PostgreSQL entnimmt und auf einer Serveranwendung installiert. <br><br>  Zunächst sollten Sie die Datenquelle (in unserem Fall PostgreSQL) an die Arbeitsumgebung anschließen, von wo aus das PDF die Daten übernimmt.  Dann beginnen wir mit der Entwicklung unserer ersten PDF-Datei. <br><br>  <i>Datenadapter → Datenadapter erstellen → Datenbank-JDBS-Verbindung</i> und geben Sie die Verbindungsdaten an: <br><br><ol><li>  <b>JDBC-Treiber</b> - PostgreSQL (org.postgresql.Driver).  Wenn für Ihr DBMS kein Treiber vorhanden ist, können Sie den erforderlichen Treiber auf der Registerkarte Treiberklassenpfad installieren. </li><li>  <b>JDBC-URL</b> - besteht aus ihrem Host-, Port- und Datenbanknamen. </li><li>  <b>Benutzername</b> und <b>Passwort</b> - Protokollausweis von Ihrem DBMS-Konto. </li></ol><br><img src="https://habrastorage.org/webt/-6/56/-i/-656-ivqhm6xzdrco7ik-hvxqbq.png"><br><br>  Wir klicken auf die uns bereits vertraute Schaltfläche <i>Test</i> und nach erfolgreicher Verbindung (Erfolgreich) mit der Datenbank - <i>Fertig stellen</i> . <br><br>  Aus dieser Datenbank wird das PDF in die Produktionsumgebung eingefügt.  Da wir planen, unsere erste PDF-Datei auch auf dem Server bereitzustellen, schrauben wir dieselbe Datenquelle in die Serveranwendung: <br><br>  <i>Datenquellen → Ressource hinzufügen → Datenquelle</i> und wiederholen Sie alles ab dem obigen Punkt. <br><br>  Jetzt können Sie das PDF erstellen.  Quellen in JasperReports werden im JRXML-Format gespeichert - dies ist XML mit verkabelten Tags und Attributen, mit denen die JasperReports-API arbeitet. <br><br>  Klicken Sie auf <i>Datei → Neu → Jasper-Bericht → Leer A4 → Geben Sie den Namen der JRXML-Datei an → Fertig stellen</i> . <br><br><img src="https://habrastorage.org/webt/1y/iy/8c/1yiy8cfrzq6cyfl9fovgmlzhw8s.png"><br><br>  Nach dem Erstellen eines neuen Projekts sehen Sie das folgende Bild: <br><br><img src="https://habrastorage.org/webt/-k/ja/9q/-kja9qk75ds8hrop-fnv77c_tug.png"><br><br>  Sieben verschiedene Blöcke - jeder Block hat sein eigenes Verhalten, das sich von den anderen unterscheidet.  Weitere Informationen hierzu finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> .  Wenn Sie auf Quelle klicken, sehen Sie die Struktur dieser Blöcke: <br><br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jasperReport</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://jasperreports.sourceforge.net/jasperreports"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Example"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pageWidth</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"595"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pageHeight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"842"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">columnWidth</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"555"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">leftMargin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rightMargin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">topMargin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bottomMargin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">uuid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ae9517f6-ff0b-41bb-a8dc-82196190e940"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">queryString</span></span></span><span class="hljs-tag">&gt;</span></span> &lt;![CDATA[]]&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">queryString</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">background</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">background</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"79"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageHeader</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"35"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageHeader</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">columnHeader</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"61"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">columnHeader</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">detail</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"125"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">detail</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">columnFooter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"45"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">columnFooter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageFooter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"54"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageFooter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"42"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jasperReport</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Entfernen wir also fünf zusätzliche Blöcke und lassen nur zwei übrig: Titel und Detail.  Die Schaltfläche <i>Löschen</i> (Windows) oder die <i>Rücktaste</i> (OS X) helfen uns dabei. <br><br>  Fügen Sie nun zwei Elemente hinzu.  Sie können ein neues Element auf zwei Arten hinzufügen: Registrieren Sie den Container in der XML-Struktur (Schaltfläche <i>Quelle</i> ) oder ziehen Sie das gewünschte Element aus dem oberen rechten <i>Palettenfenster</i> - Statischer Text, in dem Feldnamen und Textfelder enthalten sind, in die die aus der Datenbank gezogenen Variablenfelder eingetragen werden: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jasperReport</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://jasperreports.sourceforge.net/jasperreports"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Example"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pageWidth</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"595"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pageHeight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"842"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">columnWidth</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"555"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">leftMargin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rightMargin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">topMargin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bottomMargin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">uuid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ae9517f6-ff0b-41bb-a8dc-82196190e940"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">queryString</span></span></span><span class="hljs-tag">&gt;</span></span> &lt;![CDATA[]]&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">queryString</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">background</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">background</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">staticText</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">reportElement</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">uuid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"7b697ed9-f52a-483c-965e-f0b2dc6130c1"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> &lt;![CDATA[Static Text]]&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">staticText</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">detail</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"169"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">splitType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stretch"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textField</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">reportElement</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">uuid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"41002e0b-ddb2-4e4b-a049-10810ab51208"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textFieldExpression</span></span></span><span class="hljs-tag">&gt;</span></span> &lt;![CDATA["Text Field"]]&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textFieldExpression</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textField</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">band</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">detail</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jasperReport</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Die Abfrage in der Datenbank kann in das <i>queryString-</i> Tag geschrieben werden oder Sie klicken auf die <i>Dialogschaltfläche DataSet und Query Editor</i> .  Danach öffnet sich ein neues Fenster, in dem Sie eine Datenquelle (1) auswählen, eine Abfrage (2) schreiben und Feldvariablen deklarieren müssen.  Die Schaltfläche Felder lesen (3) liest auf <b>gültige</b> Anfrage automatisch alle Felder.  Klicken Sie zum Anzeigen der Daten auf Datenvorschau (4). <br><br><img src="https://habrastorage.org/webt/tb/c7/cn/tbc7cnq7japhfky8xj94q_zyzrq.png"><br><br>  Großartig!  Wir haben vier Felder vom Typ String, jetzt können wir fast jede Manipulation mit ihnen durchführen.  Zum Beispiel listen wir sie einfach auf und schreiben eine kleine Logik. <br><br>  Wir drucken die Namen der erforderlichen Felder in die statischen Textelemente und platzieren sie im Titelcontainer.  Wir werden variable Felder in den Textfeldelementen im Detailcontainer angeben, da sie sich multiplizieren.  In unserem PDF werden Name, Stadt und E-Mail-Adresse angezeigt.  Um nicht völlig gelangweilt zu sein, schreiben wir eine einfache Logik in das Textfeldelement, wobei wir das vierte Feld verwenden - das Geschlecht des Kunden, Geschlecht. <br><br>  Wir machen Folgendes: Wenn der Kunde eine Frau ist, wird Frau vor dem Namen hinzugefügt, wenn der Mann Herr ist.  Verwenden Sie dazu den ternären Java-Operator: <br><br><pre> <code class="java hljs">&lt;textFieldExpression&gt; &lt;![CDATA[$F{sex}.equals( <span class="hljs-string"><span class="hljs-string">"male"</span></span> )?<span class="hljs-string"><span class="hljs-string">"Mr. "</span></span>+$F{name}:<span class="hljs-string"><span class="hljs-string">"Mrs. "</span></span>+$F{name}]]&gt; &lt;/textFieldExpression&gt;</code> </pre> <br>  Wenn Sie neben der Schaltfläche <i>Quelle</i> auf <i>Vorschau</i> klicken, sehen Sie das Ergebnis: <br><br><img src="https://habrastorage.org/webt/wi/v_/4x/wiv_4x-pktkn6qempti9dayharu.png"><br><br>  Wie Sie auf dem Screenshot sehen können, wurde das PDF erfolgreich zusammengestellt: Es hat alle Werte übernommen und die Logik angewendet, wobei Mrs.  und Mr. <br><br>  Wir erhalten auch den City-Eingabeparameter, damit Daten nach Stadt gefiltert werden können.  Dies kann entweder durch Klicken auf <i>Parameter → Parameter erstellen</i> im Gliederungsfenster oder durch Hinzufügen eines neuen <i>Parameter-</i> Tags mit den <i>Namen-</i> und <i>Klassenattributen erfolgen</i> : <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">parameter</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"City"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"java.lang.String"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  Es bleibt nur der Parameter zur SQL-Abfrage hinzuzufügen: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, sex, city, email <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-keyword"><span class="hljs-keyword">users</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> city = $P{City}</code> </pre><br>  Wir übergeben den Wert San Francisco an den City-Parameter (ich werde Ihnen im nächsten Absatz erklären, wie das geht) und klicken auf <i>Datenvorschau</i> , um das Ergebnis anzuzeigen. <br><br><img src="https://habrastorage.org/webt/kx/dz/eh/kxdzeh0134njlynv19qxycq4jg8.png"><br><br>  <i>Das PDF wurde durch erfolgreiches Filtern der Daten gesammelt.</i>  <i>Wir gehen weiter</i> <br><br>  Da wir bereits eine dynamisch füllende PDF-Datei haben, können wir diese zur weiteren Integration in unsere Front-End-Anwendungen auf den Server hochladen.  Klicken Sie dazu auf die Schaltfläche <i>Bericht auf JasperReports Server veröffentlichen</i> → Doppelklicken Sie, um den Server zu öffnen → Wählen Sie den Serverordner aus, in den die PDF-Datei heruntergeladen werden soll (in unserem Fall <i>Berichte</i> ) → <i>Weiter → Datenquelle aus dem Repository</i> → Wählen Sie die Datenquelle aus, die zuvor in der Serveranwendung erstellt wurde → <i>Fertig stellen</i> . <br><br><h4>  Frontend-Integration </h4><br>  Die JasperReports-API enthält eine eigene RESTful-Implementierung für die Client-Server-Interaktion - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">REST v2</a> .  Wenn es Ihnen nicht passt, können Sie ein einfaches Objektzugriffsprotokoll verwenden - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SOAP</a> . <br><br>  Wir werden REST v2 betrachten. <br><br>  Die vier Hauptmethoden für CRUD-Aktionen (Create-Read-Update-Delete) stehen zur Verfügung: GET (Get), POST (Hinzufügen, Ändern, Löschen), PUT (Hinzufügen, Ersetzen), DELETE (Löschen).  Alle detaillierten Informationen finden Sie in der Dokumentation unter den obigen Links. <br><br>  Wir werden die allgemeinere und relevantere GET-Methode für diesen Artikel betrachten. <br><br><pre> <code class="xml hljs">http://<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span>:<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span>/jasperserver[pro]/rest_v2/reports/path/to/report.<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">format</span></span></span><span class="hljs-tag">&gt;</span></span>?<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Oben sehen Sie eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">synchrone</a> Anfrage, mit der Sie die Ausgabe der Datei (fertiges PDF) in einer Anfrage-Antwort erhalten können (den asynchronen Aufruf finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> ). <br><br>  Ich denke, mit dem Host und dem Port ist alles klar, und <b>/ reports / path / to / report</b> ist der URI der Datei, die aufgerufen wird.  Da wir die Quelle der PDF-Datei (Example.jrxml) im Berichtsserverordner bereitgestellt haben, lautet die ausgefüllte URI-Option: / reports / reports / Example. <br><br>  <b>Format</b> ist ein Format (in unserem Fall PDF). <br>  <b>Argumente</b> sind Parameter. <br><br>  Oben haben wir den Parameter "Stadt" hinzugefügt und übergeben ihn in der Anforderung mit dem Wert "San Francisco", um Daten für diese Stadt zu filtern. <br><br>  Wenn der Anruf nicht aus einer autorisierten Zone stammt, müssen Sie zwei weitere Parameter / Attribute hinzufügen: <i>j_username</i> und <i>j_password</i> (Protokollpass für die Autorisierung).  Standardmäßig lautet der Benutzername und das Kennwort auf dem Server <i>jasperadmin</i> . <br><br>  Somit erhalten wir folgende URL: <br><br><pre> <code class="xml hljs">http://localhost:8080/jasperserver/rest_v2/reports/reports/Example.PDF?city=San Francisco&amp;j_username=jasperadmin&amp;j_password=jasperadmin</code> </pre> <br>  So erhalten wir ein bereits generiertes PDF.  Wenn Sie diese URL beispielsweise über die Adressleiste des Browsers aufrufen, sollte die Datei automatisch heruntergeladen werden. <br><br>  Möglicherweise müssen Sie ein PDF-Bild anzeigen.  Wenn der Client beispielsweise nur die Datei anzeigen möchte, können Sie das Dokument im PNG-Format anzeigen, wenn Sie es herunterladen möchten, dann als PDF. <br><br>  Am Beispiel von Java anhand der PDFbox-Bibliothek wird untersucht, wie Sie eine PDF-Datei aus einer externen Anwendung generieren, auswählen und anschließend in PNG konvertieren können. <br><br>  Unten finden Sie die <i>PullPDF-</i> Klasse mit einer Methode, die eine URL als Argument verwendet. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.image.BufferedImage; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.BufferedInputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.ByteArrayOutputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.URL; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Base64; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.pdfbox.pdmodel.PDDocument; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.pdfbox.rendering.ImageType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.pdfbox.rendering.PDFRenderer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.pdfbox.tools.imageio.ImageIOUtil; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PullPDF</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConvertPDF2PNG</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String valuefromParam)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ BufferedInputStream input_file = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BufferedInputStream(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(valuefromParam).openStream()); ByteArrayOutputStream baos = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ByteArrayOutputStream(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { PDDocument document = PDDocument.load(input_file); PDFRenderer pdfRenderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PDFRenderer(document); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> page = <span class="hljs-number"><span class="hljs-number">0</span></span>; page &lt; document.getNumberOfPages(); ++page) { BufferedImage bim = pdfRenderer.renderImageWithDPI(page, <span class="hljs-number"><span class="hljs-number">300</span></span>, ImageType.RGB); ImageIOUtil.writeImage(bim, <span class="hljs-string"><span class="hljs-string">"png"</span></span>, baos); baos.flush(); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] encodedBytes = Base64.getEncoder().encode(baos.toByteArray()); valuefromParam = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(encodedBytes); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> valuefromParam; } }</code> </pre> <br>  Sie können das gleiche Ergebnis beispielsweise mit dem Spring Framework erzielen.  Aber ich habe versucht, einen universellen Weg aufzuzeigen, der sowohl auf Android als auch auf das Web angewendet werden kann, wenn mit Java gearbeitet wird. <br><br><h4>  Fazit </h4><br>  Wenn Sie die Generierung einer einfachen Prüfung für einen Online-Shop automatisieren möchten und nur begrenzte Zeit zum Erstellen haben, empfehle ich die Verwendung der nativen Tools Ihres Projekts oder des bekannten Frameworks.  Aufgrund des Zeitaufwands für die Installation von JasperReports ist es möglicherweise nicht gerechtfertigt, sich mit der Dokumentation für die Entwicklung komplexerer Berichtsformulare vertraut zu machen.  In anderen Fällen ist JasperReports eine gute Open Source-Lösung für die Berichtsautomatisierung. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de461719/">https://habr.com/ru/post/de461719/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de461707/index.html">Die Abenteuer der schwer fassbaren Malvari, Teil V: Weitere DDE- und COM-Scriptlets</a></li>
<li><a href="../de461709/index.html">Was Sie erwartet, wenn Sie iOS-Entwickler werden möchten</a></li>
<li><a href="../de461713/index.html">4 Möglichkeiten zum Speichern von Cloud-Backups</a></li>
<li><a href="../de461715/index.html">Angst und Abscheu als Techdir</a></li>
<li><a href="../de461717/index.html">So komprimieren Sie bis zu 90% der Speicherung von Sicherungen im Objektspeicher</a></li>
<li><a href="../de461721/index.html">Neue Cluster-Analysemethode</a></li>
<li><a href="../de461723/index.html">Grundlegendes zum Kontextpaket in Golang</a></li>
<li><a href="../de461725/index.html">DataGrip 2019.2: Verbindungsmanagement, Datensuche, Filterung in der Navigation</a></li>
<li><a href="../de461727/index.html">Cisco Small Business Solutions: Ein gutes Netzwerk ist nicht unbedingt teuer</a></li>
<li><a href="../de461729/index.html">Verwenden von Jailbreaking zum Extrahieren von Daten: Risiken und Konsequenzen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>