<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëçüèæ üôÖüèø üïë Banco de dados nas nuvens: para quem e por qu√™ - a opini√£o dos especialistas em Data Egret üë®üèº‚Äç‚öñÔ∏è üëÇ üóûÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Acredita-se que o futuro seja o DB como Servi√ßo. Vale a pena que todos disparem um DBA e acessem uma nuvem p√∫blica ou se esforcem para criar uma nuvem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Banco de dados nas nuvens: para quem e por qu√™ - a opini√£o dos especialistas em Data Egret</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/440332/"> Acredita-se que o futuro seja o DB como Servi√ßo.  Vale a pena que todos disparem um DBA e acessem uma nuvem p√∫blica ou se esforcem para criar uma nuvem privada no Docker com o Kubernetes?  Tr√™s especialistas do Data Egret - Alexei Lesovsky, Viktor Yegorov e Andrey Salnikov - no canal #RuPostgres ao vivo compartilharam suas opini√µes sobre que tipo de projetos os modelos de nuvem s√£o adequados. <br><br>  O moderador e moderador da discuss√£o foi Nikolay Samokhvalov, fundador do Postgres.ai e co-fundador da comunidade RuPostgres.org. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/435/264/8c6/4352648c6057ce6a634580c2b3195212.jpg"><br><br>  Sob o corte - transcri√ß√£o da conversa. <br><a name="habracut"></a><br>  <b>- Hoje falaremos sobre o Postgres nas nuvens.</b>  <b>E come√ßarei com uma pergunta complicada: √© verdade que voc√™ j√° tem mais da metade dos clientes nas nuvens?</b> <br><br>  <b>Alexei:</b> Eu acho que n√£o.  Parece menos da metade.  Todo mundo fica sentado em seus pr√≥prios data centers ou aluga pe√ßas de ferro. <br><br>  Mas antes de falar sobre as nuvens, vamos definir os termos.  O que queremos dizer com "nuvens": Amazon, Google Cloud, DB como servi√ßo? <br><br>  <b>- Diferenciaria o Postgres na nuvem, preparado em uma inst√¢ncia do Amazon EC2 (ou um anal√≥gico do Google), onde voc√™ pode, grosso modo, efetuar login via ssh e corrigir a configura√ß√£o, e o Postgres sob controle (em ingl√™s "gerenciado"), quando acesso direto no n√≠vel do arquivo ou no ssh, mas existe apenas a capacidade de conectar e executar consultas SQL.</b>  <b>Devem, em princ√≠pio, ser considerados separadamente.</b>  <b>E minha primeira pergunta foi sobre o Postgres gerenciado.</b> <br><br>  <b>Alexei:</b> Esses clientes s√£o substancialmente menos da metade. <br><br>  <b>Victor:</b> Bem, no primeiro caso - que vantagens significativas temos da nuvem?  Qual √© o significado da nuvem? <br><br>  <b>- No primeiro caso, usando v√°rias ferramentas modernas, como patroni e kubernetes (falaremos sobre eles separadamente), voc√™ pode obter elasticidade, microsservi√ßos e tudo mais.</b>  <b>Isso n√£o √© o mesmo que apenas um peda√ßo de ferro.</b>  <b>√â como "animais de estima√ß√£o x rebanho" - a atitude de passar a ferro como animal de estima√ß√£o se torna uma rela√ß√£o com m√°quinas virtuais e com um rebanho.</b>  <b>Voc√™ j√° n√£o sabe que tipo de gl√¢ndulas est√£o instaladas l√°.</b>  <b>Voc√™ n√£o os encomendou, n√£o trabalhou com o fornecedor, n√£o pensou na topologia.</b>  <b>Voc√™ pode economizar tempo.</b> <br><br>  <b>Victor:</b> Sim.  Na minha opini√£o, o primeiro caso simplesmente simplifica o processo de compra de ferro novo.  Voc√™ sabe do que precisa: quantos n√∫cleos e RAM, quais unidades.  E voc√™ escolhe uma m√°quina virtual a partir do que elas oferecem.  √â r√°pido  Mas, caso contr√°rio, voc√™ ainda precisar√° configurar e manter este servidor normalmente. <br><br>  <b>- E como voc√™ se sente com a sobrecarga adicionada pelas m√°quinas virtuais (aos processos dentro de uma m√°quina virtual que n√£o possuem bare metal, sobrecarga de desempenho ou dificuldades de administra√ß√£o)?</b>  <b>Algum de voc√™s mediu isso?</b> <br><br>  <b>Alexei: A</b> sobrecarga pode ser medida se voc√™ tiver controle sobre o hipervisor.  Nos servi√ßos p√∫blicos, n√£o √© - o que eles d√£o √© o que voc√™ usa. <br><br>  A sobrecarga dos sistemas de virtualiza√ß√£o usuais que podem ser implantados em casa (KVM, Xen), medi h√° cinco anos e, em seguida, era de 7-8%.  Al√©m disso, dependia das configura√ß√µes da m√°quina virtual e da carga de trabalho.  Por exemplo, havia significativamente mais despesas gerais no Redis e no Postgres do que no Unicorn, que serve back-ends do Rails. <br><br>  Talvez agora os n√∫meros sejam diferentes. <br><br>  <b>- Mesmo 5-7% √© uma sobrecarga aceit√°vel em compara√ß√£o com as vantagens de que Victor falou.</b> <b><br><br></b>  <b>E como voc√™ altera a composi√ß√£o dos clientes: existe algum movimento em dire√ß√£o a bases gerenciadas?</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eef/936/610/eef936610631c542266211cc32d168ae.png"><br><br>  <b>Alexey:</b> N√£o.  A tend√™ncia √© bastante oposta.  As pessoas que trabalham com coisas como o RDS n√£o t√™m flexibilidade para administrar e gerenciar.  Como resultado, temos a mesma atitude de "gostar de animais de estima√ß√£o", mas em casos do EC2. <br><br>  <b>Victor:</b> Essa situa√ß√£o se aproxima.  Existem clientes cujas principais bases de produ√ß√£o est√£o muito ocupadas.  Naturalmente, eles s√£o colocados nos peda√ßos de ferro alocados e sob supervis√£o constante.  Por√©m, quando a empresa cresce, o desenvolvimento exige um grande n√∫mero de inst√¢ncias de teste e desenvolvimento, e elas entram na virtualiza√ß√£o.  Ou seja, este √© um caso h√≠brido: sob testes e ambientes de desenvolvimento, √© poss√≠vel comprar hardware ou alugar m√°quinas virtuais.  Mas a produ√ß√£o permanece em um hardware s√©rio normal. <br><br>  <b>- O Amazon RDS √© usado para isso?</b> <br><br>  <b>Alexey:</b> Nossos clientes, pelo contr√°rio, recusam o RDS.  O motivo, como eu disse, √© a falta de flexibilidade no gerenciamento. <br><blockquote>  As inst√¢ncias falham e, em alguns casos, o problema n√£o √© resolvido apenas com o aluguel de um peda√ßo de ferro mais poderoso. </blockquote><br>  Voc√™ n√£o pode resolver muitos problemas sozinho - apenas com a ajuda do suporte. <br><br>  <b>- √â poss√≠vel dar exemplos?</b>  <b>Parece que recentemente a Amazon comprou o OpenSCG - √≥timos profissionais que deveriam ter desenvolvido o conhecimento interno do Postgres.</b>  <b>E sei por experi√™ncia pr√≥pria que h√° um exame.</b>  <b>Se voc√™ abrir um ticket com o suporte do Amazon RDS e encontrar uma pessoa que n√£o pode ajud√°-lo, feche-o e abra-o novamente, chegando a um mais competente.</b> <br><br>  <b>Alexey: O</b> OpenSCG √©, obviamente, uma equipe de profissionais.  Mas a compra dessa equipe n√£o fecha 100% das situa√ß√µes poss√≠veis.  Existem problemas que suportam rostos pela primeira vez.  Isso tamb√©m acontece conosco. <br><br>  Dessas, em uma das r√©plicas do PostgreSQL 10.6, a m√©dia de carga do cliente no host aumentou repentinamente de 30 a 40 unidades, embora n√£o haja carga.  Uma batida subterr√¢nea t√£o incompreens√≠vel.  Isso n√£o afeta muito, mas a pr√≥pria imagem da recupera√ß√£o m√©dia da carga √© incompreens√≠vel.  E ela irrita os administradores do cliente.  Temos algumas hip√≥teses, o que a causou, mas at√© agora n√£o fomos capazes de test√°-las, porque o sistema √© produtivo e nem tudo pode ser feito rapidamente l√°. <br><br>  E essas "batidas subterr√¢neas" surgem uma vez por ano e voc√™ come√ßa a abordar a tarefa de maneira criativa.  E o Amazon RDS √© um n√∫mero maior de inst√¢ncias, um n√∫mero maior de instala√ß√µes e tickets, respectivamente, e todos os tipos de situa√ß√µes s√£o muito maiores. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fe0/652/ed5/fe0652ed54fd4fbc40ce73f159f001c7.png"><br><br>  <b>Andrew:</b> Gostaria de acrescentar sobre a compara√ß√£o de inst√¢ncias RDS e EC2. <br>  T√≠nhamos um cliente com produ√ß√£o em RDS.  Ele procurou conselhos.  O circuito de desenvolvimento estava localizado no Microsoft Azure; aparentemente, o Azure foi inicialmente considerado como o principal servi√ßo de nuvem. <br><br>  Eu arrastei a base do circuito de desenvolvimento do Azure para a Amazon no EC2 para me aproximar da produ√ß√£o e os problemas de previs√£o se aproximaram do banco de dados do produto. <br><br><blockquote>  Embora o servidor EC2 fosse duas vezes mais simples do que nas inst√¢ncias RDS e a carga de teste fosse maior que o produto, no circuito dev ap√≥s minha instala√ß√£o, os resultados foram muito melhores do que no Amazon na inst√¢ncia RDS em produ√ß√£o. <br></blockquote><br>  Suspeito que, devido √† falta de conhecimento do PostgreSQL na empresa do cliente, o RDS tenha sido usado com a configura√ß√£o padr√£o.  N√≥s torcemos todas as configura√ß√µes. <br><br>  Como resultado, o cliente ficou muito impressionado.  Voltei-me para o gerenciamento com uma proposta, em vez do RDS, para obter e configurar inst√¢ncias simples. <br><br>  <b>- A prop√≥sito, como foi medido, o que √© melhor, o que √© pior?</b> <br><br>  <b>Andrew:</b> O cliente analisou as m√©tricas de seu aplicativo, a rapidez com que os dados foram baixados e processados. <br><br>  <b>- Estamos repreendendo o RDS, mas ele tem enormes vantagens - remove muitas dores de cabe√ßa associadas √† implanta√ß√£o, backups, replica√ß√£o.</b>  <b>Voc√™ concorda</b> <br><br>  <b>Andrew:</b> Sim.  E, provavelmente, o principal motivo pelo qual o cliente permaneceu no RDS foi justamente na falta mencionada de conhecimento do PostgreSQL.  Eles obt√™m tudo o que precisam com o RDS, apenas pagam mais pelas inst√¢ncias. <br><br>  <b>- Al√©m do Amazon RDS, existem outros postgres gerenciados baseados na nuvem.</b>  <b>Voc√™ encontrou, por exemplo, o servi√ßo Yandex?</b> <br><br>  <b>Andrei:</b> Encontrei suas m√°quinas virtuais e n√£o gostei muito delas - as unidades NVMe n√£o s√£o muito honestas por l√°.  De fato, existem unidades conectadas atrav√©s de uma rede. <br><br>  <b>- NVMe honesto (unidades locais) tamb√©m √© um problema.</b>  <b>Google e Amazon t√™m NVMe, mas as unidades s√£o ef√™meras.</b>  <b>Se voc√™ reiniciar a inst√¢ncia, perder√° todos os dados porque recebe outra m√°quina virtual.</b> <br><br>  <b>Andrei:</b> Eles comentaram comigo na Yandex Cloud que eles tinham o NVMe honesto no DB como servi√ßo, mas ainda n√£o encontrei esse servi√ßo.  Aparentemente, existe uma arquitetura ligeiramente diferente no n√≠vel da provis√£o de recursos. <br><br>  Eles trabalham muito duro no DB como servi√ßo, pois o usam em seus servi√ßos.  Apenas existem diferentes pontos de entrada para clientes externos e uso interno. <br><br>  <b>- E o que voc√™ acha, existem perspectivas para o Postgres russo na nuvem?</b>  <b>Vai decolar ou n√£o decolar?</b> <br><br>  <b>Andrew:</b> <br><blockquote>  A Yandex possui uma excelente equipe, bastante experiente, com bons conhecimentos.  Eu acho que eles v√£o decolar. </blockquote><br>  Primeiro, eles pr√≥prios operam muitos Postgres (mais de 1000 bancos de dados em seus projetos) e, desde  explorar, todos os cones e pontos doloridos funcionar√£o e ser√£o corrigidos mais rapidamente.  Penso que o cliente receber√° o servi√ßo final de qualidade bastante boa. <br><br>  E h√° uma demanda por essas solu√ß√µes.  Fa√ßa uma startup que, no in√≠cio, n√£o pode ter o conhecimento necess√°rio no Postgres por v√°rios motivos: caro, eles n√£o entendem o ponto, tente tecnologias diferentes.  Para ele, essa √© uma boa solu√ß√£o, pois nesses servi√ßos existem ‚Äúreviravoltas‚Äù limitadas que n√£o devem ser distorcidas e, se eu acho, haver√° suporte t√©cnico. <br><br>  √â verdade que o Yandex Cloud ainda est√° no in√≠cio, e poucas funcionalidades s√£o apresentadas no momento. <br><br>  <b>- Temos perguntas na sala de bate-papo: o que voc√™ acha do fato de que, ao emitir m√°quinas virtuais, algu√©m pode sentar-se fisicamente nessa m√°quina (limita√ß√£o, tempo de roubo).</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd9/d21/08d/fd9d2108d4134177d49c1785c7336c9a.jpg"><br><br>  <b>Victor:</b> Sim, existe essa experi√™ncia.  Eu s√≥ queria mencionar isso.  Existem clientes que possuem seus pr√≥prios sistemas de virtualiza√ß√£o implantados.  De tempos em tempos, eles pedem para ver um servidor que n√£o √© do produto e vemos uma situa√ß√£o incompreens√≠vel: n√£o observamos os motivos pelos quais ele deve quebrar nesse servidor.  Em seguida, redirecionamos as perguntas para seus administradores com uma solicita√ß√£o para ver o que est√° acontecendo no host. <br><br>  <b>- E o que fazer, existe um efeito semelhante na Amaz√¥nia?</b>  <b>Existem m√©todos para determinar que voc√™ est√° "espremido"?</b>  <b>pgbench para dirigir?</b> <br><br>  <b>Alexei:</b> N√£o me lembro disso.  Mas a maneira usual √© determinar atrav√©s do tempo de roubo.  Nos gr√°ficos de monitoramento, como regra, n√£o vemos grandes valores. <br><br>  <b>- Eu sinto que voc√™ n√£o gosta muito do Postgres gerenciado.</b>  <b>Isso se deve ao fato de o RDS levar o seu trabalho?</b> <br><br>  <b>Alexey:</b> N√£o.  Isso √© mais prov√°vel devido ao fato de que simplesmente n√£o o temos.  O Postgres gerenciado √© bom porque voc√™ pode implantar a infraestrutura com o clique de um bot√£o.  Desde que voc√™ seja uma startup e apenas adicione ou leia dados sem l√≥gica l√≥gica, tudo estar√° bem.  E quando voc√™ cruza uma determinada linha, por exemplo, voc√™ come√ßa a executar muitas JOINs, executa SQL complexo, a tarefa surge para otimizar consultas e o RDS deixa de ser suficiente.  √â preciso mais liberdade e influ√™ncia, mas as ferramentas dispon√≠veis n√£o ajudam a resolver os problemas profundos associados ao descarte de recursos no pr√≥prio Postgres.  H√° apenas a oportunidade de aumentar o poder do peda√ßo de ferro: pagou mais dinheiro - recebido. <br><br>  <b>Andrew:</b> N√£o h√° muita antipatia pelo RDS e medo de trabalhar.  O problema √© diferente.  Suponha que uma startup use o RDS, ele d√™ tudo a eles.  Mas ele n√£o aumentou sua experi√™ncia no Postgres.  Em seguida, digamos um tiro de inicializa√ß√£o.  As cargas est√£o crescendo - a escrita e a leitura aumentaram.  Na aus√™ncia de sua experi√™ncia, uma startup precisa procurar pessoas do lado.  DBAs graves v√™m e veem que n√£o conseguem extrair mais do RDS, mas a partir de uma inst√¢ncia normal do EC2 √© bem poss√≠vel obter mais desempenho, como no exemplo mencionado anteriormente.  Se tiv√©ssemos permiss√£o no RDS, talvez pud√©ssemos ajustar e melhorar o banco de dados, mas n√£o o fizemos. <br><br>  <b>- O problema com o acesso est√° sendo resolvido.</b>  <b>Existem Postgres gerenciados que fornecem acesso ssh (e at√© mesmo completamente root), por exemplo, uma pequena empresa Aiven da Finl√¢ndia.</b>  <b>Por padr√£o, eles n√£o d√£o acesso root, mas o fundador (e eu conversamos com ele algumas vezes) falou sobre sua disponibilidade para conceder acesso mediante solicita√ß√£o.</b> <br><br>  <b>Andrew: A</b> quest√£o n√£o √© apenas o acesso.  Por que estamos melhor com gl√¢ndulas puras?  Porque temos muitos clientes diferentes e cada um tem sua pr√≥pria infraestrutura.  E as infraestruturas est√£o t√£o distantes que a metodologia geral que funciona da mesma maneira em todos os lugares, simplesmente n√£o podemos.  Porque existem aqueles que t√™m seu pr√≥prio hardware, e eles simplesmente n√£o podem hospedar em algum lugar (de acordo com algumas de suas pr√≥prias regras e restri√ß√µes), e h√° aqueles que est√£o nas nuvens. <br><br>  <b>- Voc√™ quer dizer que a defini√ß√£o de √≠ndices n√£o utilizados depende do peda√ßo de ferro?</b>  <b>Ou algumas outras coisas comuns?</b> <br><br>  <b>Andrew:</b> Do ponto de vista da administra√ß√£o, √© o esquema do banco de dados e a defini√ß√£o de √≠ndices n√£o utilizados que as nuvens n√£o s√£o diferentes de seu hardware.  Tudo √© unificado. <br><br>  A diferen√ßa entre uma nuvem e uma pe√ßa real de hardware - na camada entre a base e especificamente o hardware que fica abaixo - √© o sistema operacional e as virtualiza√ß√µes usadas.  Quando voc√™ tem bancos de dados grandes, √© importante para voc√™ a rapidez com que as unidades enviam e recebem dados, com que efici√™ncia a mem√≥ria e o processador s√£o usados, por isso √© extremamente importante reduzir a influ√™ncia dessa camada para que o banco de dados funcione com mais efici√™ncia. <br><br>  <b>- Outra pergunta da plat√©ia: e as configura√ß√µes do kernel?</b> <br><br>  <b>Victor:</b> No EC2, essas coisas s√£o personaliz√°veis. <br><br>  <b>- Existem novas solu√ß√µes para a classe "Postgres gerenciado" de fornecedores conhecidos, al√©m das usuais Amazon e Google.</b>  <b>Por exemplo, a Nutanix e a SAP anunciaram em 2018 a cria√ß√£o de solu√ß√µes baseadas no Postgres.</b>  <b>Voc√™ n√£o acha que todos esses caras nos levam ao surgimento de algumas decis√µes que far√£o o mesmo, mas apenas no seu peda√ßo de ferro?</b>  <b>Para que voc√™ possa clicar no bot√£o e implantar o novo Postgres, onde os backups e a replica√ß√£o j√° est√£o configurados.</b> <br><br>  <b>Alexei:</b> Parece-me que a SAP e outros n√£o s√£o totalmente lucrativos.  Estes s√£o grandes fornecedores de ferro e software.  Eles fazem um produto com o objetivo de ganhar dinheiro.  Venda pelo menos suporte.  Portanto, devemos ver como eles lucram com isso.  Se esse modelo de entrega de produtos √© ben√©fico para eles, por que n√£o? <br><br>  <b>- Eu quis dizer um pouco diferente.</b>  <b>Especificamente, esses caras n√£o publicam nada em c√≥digo aberto e doam de gra√ßa.</b>  <b>Mas voc√™ n√£o acha que algu√©m do menor, mas brincalh√£o, far√° algo assim?</b>  <b>Talvez isso se concentre no Kubernetes, Operator Framework.</b>  <b>J√° existem alguns desenvolvimentos que os operadores est√£o fazendo - Zalando, por exemplo.</b>  <b>E voc√™ n√£o acha que o RDS baseado em nuvem ajuda a uma transi√ß√£o gradual para essas solu√ß√µes?</b>  <b>Vemos como voc√™ pode viver sem subir nas configura√ß√µes com as m√£os.</b> <br><br>  <b>Alexey:</b> Acontece que n√£o √© bem gerenciado. <br><blockquote>  Mesmo assim, voc√™ precisar√° de especialistas que monitorem tudo isso e subam ao palco se algo der errado. <br></blockquote><br>  At√© o pr√≥prio Kubernetes √© uma m√°quina muito complexa, com muitos componentes sob o cap√¥.  Formalmente, s√£o apenas cinco bin√°rios.  Mas a intera√ß√£o entre eles √© descrita por volumes de documenta√ß√£o e muitas informa√ß√µes em salas de bate-papo, boletins informativos e Grupos do Google.  I.e.  voc√™ ainda precisa de um especialista que siga esta cozinha. <br><br>  Al√©m disso, tudo isso est√° se desenvolvendo muito dinamicamente.  A compatibilidade com vers√µes anteriores √© interrompida de uma libera√ß√£o para outra.  I.e.  tudo √© muito inst√°vel e inst√°vel.  Quando tudo se acalmar, talvez tenhamos um produto adequado, est√°vel e confi√°vel.  Mas at√© agora, nem tudo √© muito. <br><br>  <b>Victor:</b> Estamos come√ßando a falar sobre o fato de termos uma camada adicional de infraestrutura que precisa ser gerenciada - para orquestrar esse Kubernetes. <br><br><blockquote>  N√£o concordo que ele sempre funcione magicamente com o clique de um bot√£o da maneira que queremos.  √â necess√°rio manter especialistas relevantes. <br></blockquote><br>  E a segunda - nossos clientes est√£o constantemente se adaptando √†s mudan√ßas nos neg√≥cios.  Consequentemente, a carga no banco de dados est√° mudando constantemente.  E se lambemos tudo h√° tr√™s meses, como resultado de todas as solicita√ß√µes funcionarem como deveriam, e tudo estava bem, uma nova solicita√ß√£o pode ser recebida hoje ou amanh√£, ou devido a altera√ß√µes nos dados, a solicita√ß√£o existente deixar√° de funcionar como deveria.  E precisamos analisar a situa√ß√£o e entrar nas configura√ß√µes do sistema.  E √© essa automa√ß√£o que, ao que me parece, dificulta muito essas inst√¢ncias gerenciadas.  Quando as nuvens atingem tal estado que tamb√©m se adaptam a tais situa√ß√µes, eu n√£o sei.  Por√©m, embora essa seja uma parte significativa do trabalho que precisa ser realizado, √© necess√°rio adaptar as configura√ß√µes do banco de dados √†s mudan√ßas no padr√£o de solicita√ß√µes recebidas. <br><br>  E como a pr√≥pria nuvem √© uma carga administrativa adicional, √© mais f√°cil para n√≥s quando essa camada simplesmente n√£o existe, porque podemos nos concentrar nos problemas do banco de dados. <br><br>  Se o cliente deseja viver na nuvem e possui a experi√™ncia, n√£o temos nada contra.  O principal √© que temos a oportunidade, quando o banco de dados n√£o ficar muito bom, suba (de prefer√™ncia pelo ssh), verifique tudo e tenha acesso a todas as estat√≠sticas. <br><br>  <b>Alexey:</b> N√£o necessariamente pelo ssh.  Mas, em qualquer caso, s√£o necess√°rias ferramentas de diagn√≥stico.  Porque o diagn√≥stico por email √© muito longo e tedioso.  √â irritante quando voc√™ envia um link de bate-papo para a solicita√ß√£o a ser executada, por outro lado, o cliente clica nesse link, copia a solicita√ß√£o e depois copia o resultado para voc√™ ou envia uma captura de tela.  Isso √© o tempo todo. <br><br>  √â muito mais f√°cil conectar-se e ver diretamente, testar algumas de suas hip√≥teses e agir mais a partir delas. <br><br>  <b>- Voc√™ tem algum exemplo ativo de onde o Kubernetes j√° est√° sendo usado e o Postgres mora nele?</b> <br><br>  <b>Alexei:</b> Infelizmente n√£o.  Mas eu realmente gostaria.  Eu realmente gosto de Kubernetes, estou perto de seu conceito e filosofia. <br><br><blockquote>  Na minha opini√£o, o Kubernetes √© algo que incentiva as pessoas a programar mais, criar mais um produto, sem pensar em coisas paralelas, como a estrutura interna da infraestrutura. </blockquote><br>  Um papel semelhante costumava ser desempenhado pelo OOP.  Apareceu e muitas pessoas se interessaram nessa √°rea, porque a programa√ß√£o se tornou um pouco mais f√°cil.  O Kubernetes tamb√©m fecha muitas coisas por si s√≥, as esconde sob o cap√¥ e permite que uma pessoa se concentre no aspecto criativo e programa mais. <br><br>  O Kubernetes implementa suporte para inst√¢ncias, lares e o aplicativo funciona.  Se ele travar repentinamente - bem, o Kubernetes o lan√ßar√° novamente.  I.e.  o desenvolvedor e o administrador est√£o livres de dores de cabe√ßa e rastreamento constante.  Eu gosto dessa resposta √† situa√ß√£o.  Quando algo cai, √© reiniciado automaticamente. <br><br>   , ,       .      ‚Äî    ,       ,   .       . <br><br> <b>‚Äì ,     ?</b> <br><br> <b>:</b>   ,   .  ,     .     -   ,        .     ,  ,     Kubernetes.   Kubernetes .   CNCF      . ,   . <br><br>        ‚Äì      - kubernetes_ru.      github,        Kubernetes:      .    Postgres,    . <br><br> , , ,  .  , Kubernetes ‚Äì    ,   .    -     IT. <br><br> <b>‚Äì      ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Amazon Aurora PostgreSQL Serverless</a> ?    ,    ,         .         ,  . ..      .</b> <br><br> <b>:</b> <br><blockquote>    .      . </blockquote><br> ,     .     ,  ,           .      :   ,    .    ,       - .    . <br><br> <b>‚Äì     .                    .       ,   ,    .</b> <br><br> <b>:</b>    .  ,     .  ,      , ‚Äì     .    ,  ,      ,           ,      . <br><br><blockquote>  I.e.  .     ‚Äì  ,  ,   70% .         .      . <br><br>   ,  ,   ¬´ ¬ª,      . </blockquote><br> <b>‚Äì   .    ,   ,  DBA    : -    ,  - ‚Äî  , ?</b> <br><br> <b>:</b>  , ,   , ‚Äì    DBA,  SQL-developer.     Oracle   SQL-developer,      ,  ,   ,    .    ,     Oracle.          .   DBA     ,   - . <br><br> DBA ‚Äî  -  ¬´¬ª ,        . <br><br>      Kubernetes.      ,     .        .     ,    Kubernetes    .       ,           volume   .  I.e.     ,    .         ,    . <br><br> <b>‚Äì    ?</b> <br><br> <b>:</b> . <br><blockquote>   ,     . ,  ,       .      ,   Postgres (        ).      Postgres   - .  I.e.    (,  ),      . </blockquote><br>       ,             . <br><br>         ,   ,      .       .      .             . <br><br> <b>‚Äì     ?</b> <br><br> <b>:</b>     - . ,    ,    . <br><br> ,     Cassandra.      .  I.e.      ‚Äî   ,    Kubernetes. <br><br><blockquote>   ,  ,   .   ,  ,      . <br><br>  I.e.    .  DBA,  ,       ‚Äì     .   ,    ,      -  ‚Äì       . <br></blockquote><br> <b>‚Äì      ?</b> <br><br> <b>:</b>     . ,    . , ,  ,         Kubernetes .  ,  , ,  ,     - -         Kubernetes (       ). <br><br> <b>:</b>      Kubernetes.      ‚Äì   patroni.    Zalando   Kubernetes.     ,    ,       (     ‚Äì  ,   Amazon   ,    ).   ,          ‚Äì   .    ,  ‚Äì .   ‚Äì  - Kubernetes. <br><br> <b>‚Äì       RDS.    EC2   Postgres   .      patroni ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://github.com/zalando/patroni</a> ),      .</b> <br><br> <b>:</b> ,  ,     -  high availability. <br><br> <b>‚Äì .   ‚Äî   ,        ?</b> <br><br> <b>:</b>  ,       -  . <br>      Zalando     DBA,   patroni.  I.e.   ,        Kubernetes     , DBA . <br><br> <b>‚Äì .     DBA,   DBA  ¬´¬ª  ¬´¬ª.</b> <br><br> <b>:</b> ,     .        .   ,   ,    . <br><br> <b>‚Äì    -  Kubernetes?    ?</b> <br><br> <b>:</b>      -  ,      .   Kubernetes     ‚Äì     ,  .   Kubernetes  -     .                .          DBA.      Kubernetes (,    Kubernetes      ,        ,     ). <br><br>      -   ,       ,     -     -          -. <br><br> <b>:</b>      ( Kubernetes   ),    -   .       ,       ‚Äî      ‚Äî       .     - ,   ,  , , ,  ,         . <br><br> <b>:</b> <br><blockquote>       .    Kubernetes    ,        .     ,    .   . </blockquote><br>      ,      ‚Äî   .    ,     Postgres-    ,    , .     . <br><br> <b>:</b>    ‚Ä¶ <br><br> <b>‚Äì ..      :    -  ‚Äî   dev environment,   production ‚Äì    Kubernetes.  ...</b> <br><br> <b>:</b>     latency    ,    ,  .      . <br><br> <b>‚Äì   ,     .    . <br>    ,                <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> HighLoad++</a> .</b> <br><br> <i>PS      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a></i> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt440332/">https://habr.com/ru/post/pt440332/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt440322/index.html">Por que os HDDs se tornam menos propensos a falhar</a></li>
<li><a href="../pt440324/index.html">Nova funda√ß√£o da Linux Foundation - desenvolver√° computa√ß√£o de ponta</a></li>
<li><a href="../pt440326/index.html">Gerenciamento de mudan√ßas do cliente pelo modelo ADKAR</a></li>
<li><a href="../pt440328/index.html">A probabilidade de ganhar uma partida com a probabilidade conhecida de ganhar um ponto II</a></li>
<li><a href="../pt440330/index.html">Brevemente sobre abstra√ß√µes</a></li>
<li><a href="../pt440336/index.html">HTML perdemos</a></li>
<li><a href="../pt440338/index.html">Como garantir a disponibilidade de um servi√ßo da web na nuvem no caso de uma falha no data center</a></li>
<li><a href="../pt440342/index.html">C√≥digo C # universal para NET e JavaScript</a></li>
<li><a href="../pt440344/index.html">InterNyet - como a Internet foi inventada na Uni√£o Sovi√©tica e por que n√£o funcionou</a></li>
<li><a href="../pt440346/index.html">No final de fevereiro, a Microsoft apresentar√° os √≥culos VR HoloLens 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>