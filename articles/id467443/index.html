<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ… ğŸ‘¨ğŸ½â€ğŸ¤â€ğŸ‘¨ğŸ¼ ğŸ˜¼ Pusat Multimedia "Kodi" dan Proyek Yocto ğŸŒŠ ğŸŒŠ â˜‚ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pengantar Proyek Yocto 
 Yocto Project adalah proyek Open Source kolaboratif untuk menyederhanakan pengembangan distribusi untuk sistem embedded. Yoct...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pusat Multimedia "Kodi" dan Proyek Yocto</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467443/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/q_/p2/ue/q_p2uexsi7n5tjnthirivhuwq2o.png"></div><br><h2>  Pengantar Proyek Yocto </h2><br>  Yocto Project adalah proyek Open Source kolaboratif untuk menyederhanakan pengembangan distribusi untuk sistem embedded.  Yocto berisi sejumlah besar templat, metadata, dan alat bantu bangun.  Di Yocto Project, Anda dapat menghubungkan sejumlah besar lapisan BSP (paket dukungan platform) untuk semua jenis platform perangkat keras. <br><br>  Tujuan utama artikel ini adalah upaya untuk menunjukkan perakitan paket distribusi tipikal di Proyek Yocto menggunakan contoh dari pusat multimedia terkenal Kodi, versi 17.6 untuk komputer papan tunggal Raspberry Pi 3B. <br><br>  Jika di suatu tempat jauh di lubuk hati Anda Anda merasa bahwa Anda seorang kolektor, tetapi belum memutuskan apa yang ingin Anda kumpulkan, maka artikel ini adalah untuk Anda.  Jika Anda sudah menggunakan Proyek Yocto dalam pekerjaan sehari-hari Anda, maka Anda dapat menggulir artikel ini.  Langsung ke bab terakhir dan bersiap-siaplah. <br><br>  Artikel ini murni praktis dan menunjukkan kemungkinan menggunakan pencapaian Proyek Yocto dan OpenEmbedded untuk membangun pusat multimedia "Kodi".  Lapisan Yocto dikelola menggunakan utilitas Repo dari Google.  Artikel dalam Dokumen seri ini. <br><br>  Jadi: ayo pergi. <br><a name="habracut"></a><br><h2>  Konten: </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Instal</a> Proyek Yocto di Ubuntu <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mesin</a> pembuat distribusi di Proyek Yocto <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Menggunakan</a> OpenEmbedded dengan Proyek Yocto <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Paket</a> Dukungan Platform (BSP) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kelola</a> lapisan Yocto dengan Repo <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pasang</a> Repo <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Manifes</a> Build Distribusi <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Konten</a> Manifes <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Deskripsi</a> Manifes <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Struktur b</a> -manifes <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Inisialisasi</a> Variabel Poky <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Inisialisasi</a> Repo <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sinkronisasi</a> Repo <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Membuat</a> Konfigurasi Proyek Yocto <br>  File <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">konfigurasi</a> build / conf / local.conf <br>  File <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">konfigurasi</a> build / conf / bblayers.conf <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lapisan</a> untuk merakit pusat multimedia <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Struktur</a> lapisan <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Konfigurasi</a> lapisan <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Komposisi</a> resep-mengamuk <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Komposisi</a> inti resep <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Komposisi</a> resep-kernel <br>  Resep <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">komposisi</a> -mediacentre <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Komposisi</a> resep-multimedia <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Suplemen Resep</a> Kodi Build <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Menambahkan</a> Item <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Baru</a> ke Menu Pengaturan Kodi <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengaturan</a> buffering <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">maksimum</a> untuk video <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Menonton TV</a> melalui IPTV <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Menonton Youtube</a> dengan Plugin Kodi <br>  Ekstensi konfigurasi jaringan shell <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">konsol</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Resep</a> Pembuatan Distribusi <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Panduan singkat</a> untuk membuat gambar distribusi <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Catatan tambahan</a> <br><br><a name="install_yocto_koditv"></a><h2>  Instal Proyek Yocto di Ubuntu </h2><br>  Untuk membangun distribusi menggunakan Proyek Yocto di Ubuntu, Anda perlu menginstal paket berikut: <br><br><pre><code class="bash hljs">sudo apt-get install -y --no-install-suggests --no-install-recommends \ gawk wget git-core diffstat unzip texinfo gcc-multilib \ build-essential chrpath socat cpio python python3 python3-pip python3-pexpect \ xz-utils debianutils iputils-ping python3-git python3-jinja2 libegl1-mesa libsdl1.2-dev \ xterm</code> </pre> <br>  Paket diinstal dengan menggunakan perintah <strong>apt-get install</strong> dan <strong>sudo perintah</strong> hak istimewa.  Dalam sistem Ubuntu, ini adalah praktik yang tersebar luas ketika perintah sudo digunakan untuk melakukan tindakan administratif (saat membuat pengguna utama sistem, ia secara otomatis terdaftar di grup "sudo"). <br><br>  Anda dapat melihat instruksi instalasi lebih rinci di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini:</a> <br><br><a name="mechanism_build_koditv"></a><h2>  Mesin pembuat distribusi di Proyek Yocto </h2><br>  Dalam Proyek Yocto, setiap unit program dijelaskan menggunakan resep perakitan.  Bahasa deskripsi resep menyerupai "bash" dengan kemampuan untuk memasukkan potongan kode dalam bahasa python.  Anda bisa mendapatkan informasi sintaksis dasar dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">manual Proyek Yocto</a> .  Satu set resep perakitan, tergantung pada tujuannya, dapat digabungkan menjadi lapisan perakitan yang terpisah. <br><br>  Lapisan dibagi menjadi perangkat keras - lapisan BSP, lapisan UI (antarmuka pengguna), lapisan Yocto tertentu, serta lapisan yang menerapkan fungsi tertentu: <br>  mis. lapisan dari OpenEmbedded =&gt; multimedia, python, perl, ruby, jaringan, systemd, server web, dll. <br><br><a name="openembedded_koditv"></a><h2>  Menggunakan OpenEmbedded dengan Proyek Yocto </h2><br>  Namun, jika Anda menggunakan Proyek Yocto, maka pastinya Anda akan membutuhkan lapisan dengan fungsionalitas tambahan yaitu.  Satu set besar resep untuk semua kesempatan.  Dan ada satu set - ini adalah resep dari OpenEmbedded.  OpenEmbedded adalah infrastruktur untuk membangun paket untuk Linux tertanam. <br><br>  OpenEmbedded sepenuhnya kompatibel dengan Proyek Yocto, karena proyek ini diambil sebagai dasar untuk Proyek Yocto.  Mungkin itu sebabnya Proyek Yocto memiliki stabilitas yang sedikit lebih baik, dokumentasi yang lebih baik, dan dukungan yang sedikit lebih baik (tetapi pada dasarnya itu adalah OpenEmbedded yang sama). <br><br><a name="package_bsp_koditv"></a><h2>  Paket Dukungan Platform (BSP) </h2><br>  Paket Dukungan Dewan adalah lapisan khusus yang terpisah untuk papan khusus yang mendefinisikan fitur perangkat keras dari platform yaitu:  mengimplementasikan hal-hal spesifik yang membedakan satu papan dari yang lain: fitur prosesor, interupsi, pengalamatan, fitur bootloader, fitur adaptor video (GPU), dll. <br><br>  Artikel ini menggunakan lapisan BSP - <strong>meta-raspberrypi</strong> <br>  Repositori layer terletak di: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">git.yoctoproject.org/git/meta-raspberrypi</a> <br><br><a name="repo_koditv"></a><h2>  Kelola lapisan Yocto dengan Repo </h2><br>  Proyek Yocto dapat menggunakan sejumlah besar lapisan dari berbagai pemasok - pengembang peralatan, dan semua ini perlu dikelola entah bagaimana.  Bayangkan Anda memiliki selusin papan yang berbeda, dan setiap papan dilengkapi dengan tempat penyimpanan BSP git yang terpisah, dan ini tidak termasuk infrastruktur proyek Yocto itu sendiri, ditambah kemungkinan fungsionalitas tambahan dari OpenEmbedded. <br><br>  Dalam situasi seperti itu, Anda tidak akan keluar dengan skrip instalasi sederhana yang terpisah.  Mau tak mau, harus mencari alat yang bisa melakukannya dengan baik.  Bahkan lebih dari bagus.  Salah satu alat terbaik dari jenis ini adalah utilitas Google - Repo. <br><br>  <strong>Repo</strong> adalah alat utama untuk mengelola repositori GIT ketika membangun sistem operasi Android dengan basis kode yang besar.  Repo memungkinkan Anda untuk mengelola selusin, jika tidak seratus repositori git yang terpisah dalam satu proyek, versi yang dapat Anda tentukan dengan hati-hati dalam satu file xml dari <strong>Manifesto</strong> <br><br>  dan untuk sinkronisasi semua versi semua repositori yang benar, Anda hanya perlu menjalankan satu perintah <br><br>  <strong>sinkronisasi repo</strong> <br><br><a name="install_repo_koditv"></a><h3>  Pasang Repo </h3><br>  Dengan menggunakan set perintah berikut, Anda dapat menginstal Repo di direktori home <strong>~ / bin Anda</strong> <br>  (perintah curl dapat diinstal secara terpisah: sudo apt-get install curl) <br><br><pre> <code class="bash hljs">PATH=<span class="hljs-variable"><span class="hljs-variable">${PATH}</span></span>:~/bin mkdir ~/bin curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo chmod a+x ~/bin/repo</code> </pre><br><br>  dan di masa depan Anda hanya perlu menggunakan perintah di konsol: <strong>repo</strong> <br><br><blockquote>  atau lebih <br>  jika direktori HOME / bin tidak ditambahkan dengan jalur startup standar secara otomatis <br>  lihat file HOME / .profile <br><br>  $ <br>  $ PATH = $ {PATH}: ~ / bin <br>  $ repo <br>  $ <br></blockquote><br><a name="manifest_repo_koditv"></a><h3>  Manifes Build Distribusi </h3><br>  Distribusi dikumpulkan dalam kerangka artikel, saya perlu menyebutnya sesuatu.  Biarlah itu nama <strong>Torvin</strong> .  Dengan nama kode Torvin, ini akan berisi distribusi Linux minimalis dengan perakitan satu program tunggal.  Ini merujuk pada satu program pengguna aplikasi - Kodi, dan tidak lebih (yang lainnya adalah level sistem).  Untuk pusat multimedia, menurut saya ini sudah cukup. <br><br><a name="context_repo_koditv"></a><h3>  Konten Manifes </h3><br>  File <strong>torvin-0.2.5.xml</strong> digunakan untuk mengelola lapisan distribusi <strong>.</strong> <br><br><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">default</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sync-j</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fetch</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://git.yoctoproject.org/git"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yocto"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fetch</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/openembedded"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"oe"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fetch</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/berserktv"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"master"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs-manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/bs-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shell.sh"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/shell.sh"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/base"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/rocko"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yocto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"poky"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/poky"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"oe"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"meta-openembedded"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/meta-openembedded"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yocto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"meta-raspberrypi"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/meta-raspberrypi"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"berserk"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/berserk"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><a name="desc_repo_koditv"></a><h3>  Deskripsi Manifes </h3><br>  Pada awal manifes, tag <strong>jarak jauh</strong> menunjukkan dua repositori GIT utama dan satu tambahan: <br><br>  <strong>https: â„â„git.yoctoproject.org / git</strong> - repositori Yocto dinamai sebagai <strong>yocto</strong> <br>  <strong>https: â„â„github.com / openembedded</strong> - repositori OpenEmbedded bernama <strong>oe</strong> <br>  https: â„â„github.com / berserktv - repositori GIT tambahan bernama <strong>bs</strong> <br><br>  Di bagian selanjutnya dari manifes, menggunakan penamaan yang disingkat, kami bekerja dengan proyek yang berlokasi di repositori ini, tag <strong>proyek</strong> berisi atribut berikut: <br><br>  <strong>remote</strong> - nama repositori bernama remote <br>  <strong>revisi</strong> - nama cabang atau versi hash <br>  <strong>nama</strong> - nama proyek dalam repositori yang ditentukan <br>  <strong>path</strong> - <strong>path</strong> proyek lokal di sistem file Anda <br><br><pre> <code class="html hljs xml">   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"master"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs-manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/bs-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span>  xml      : git clone https://github.com/berserktv/bs-manifest -b master sources/bs-manifest</code> </pre><br>  Di badan tag <strong>proyek</strong> , saya menunjukkan perintah untuk membuat tautan simbolis ke infrastruktur skrip bantu inisialisasi awal dan awal reguler sistem pembangunan <strong>Poky</strong> yang saya <strong>butuhkan</strong> <br><br><pre> <code class="html hljs xml">   linkfile <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"master"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs-manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/bs-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shell.sh"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/shell.sh"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/base"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/rocko"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span>        : ln -s src dest .. #      ln -s sources/bs-manifest/setup-environment setup-environment ln -s sources/bs-manifest/raspberry/shell.sh shell.sh #    ,  #      cd sources ln -s bs-manifest/raspberry/rocko base</code> </pre><br><a name="struct_repo_koditv"></a><h3>  Struktur b-manifes </h3><br><pre> â”œâ”€â”€ COPYING.MIT
 â”œâ”€â”€ raspberry
 â”‚ â”œâ”€â”€ rocko
 â”‚ â”‚ â”œâ”€â”€ conf
 â”‚ â”‚ â”‚ â”œâ”€â”€ bblayers.conf
 â”‚ â”‚ â”‚ â””â”€â”€ local.conf
 â”‚ â”‚ â””â”€â”€ torvin-0.2.5.xml
 â”‚ â””â”€â”€ shell.sh
 â”œâ”€â”€ README.md
 â””â”€â”€ pengaturan-lingkungan
</pre><br><br>  Proyek <strong>bs-manifest</strong> digunakan untuk manajemen konfigurasi yang fleksibel, dengan mempertimbangkan rakitan dari berbagai versi distribusi.  Saya memiliki versi ini - 0.2.5 <br><br><a name="env_repo_koditv"></a><h3>  Inisialisasi Variabel Poky </h3><br>  Lingkungan <strong>penyiapan</strong> skrip inisialisasi diambil dari proyek Komunitas Freescale (dalam lingkungan yocto ini adalah solusi umum).  Script bertanggung jawab untuk inisialisasi variabel sistem build Poky, skrip menciptakan struktur direktori di mana ia dibagi dengan sangat baik: <br><br><ul><li>  <strong>membangun</strong> - <strong>membangun</strong> direktori </li><li>  <strong>sumber</strong> - kode sumber resep perakitan </li><li>  <strong>download</strong> - direktori untuk mengunduh kode program (database git, arsip tar.gz) </li></ul><br>  Isi skrip pengaturan-lingkungan dapat dilihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini:</a> <br><br><div class="spoiler">  <b class="spoiler_title">Isi skrip Shell.sh</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">#!/bin/bash MACHINE='raspberrypi3' source ./setup-environment build echo "you may try 'bitbake core-image-minimal'" bash</span></span></code> </pre><br></div></div><br>  Script root ini berfungsi untuk menginisialisasi variabel konfigurasi lingkungan build dan biasanya dipanggil pada awal sesi. <br><br><a name="init_repo_koditv"></a><h3>  Inisialisasi Repo </h3><br>  Untuk menginisialisasi repo, Anda harus menjalankan perintah: <br><br><pre> <code class="bash hljs">mkdir torvin <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> torvin repo init -u https:â„â„github.com/berserktv/bs-manifest -m raspberry/rocko/torvin-0.2.5.xml</code> </pre><br>  di mana <strong>-u https: â„â„github.com / berserktv / bs-manifest</strong> memberitahu GIT jalan menuju proyek manifes <br><br>  Catatan: Anda juga bisa menentukan <strong>-b tree_name</strong> <br>  (jika Anda tidak menentukan sakelar -b, maka cabang master diasumsikan (secara default)) <br><br>  di mana path <strong>-m raspberry / rocko / torvin-0.2.5.xml</strong> ke file konfigurasi menunjukkan yang berikut: <br><br><ol><li>  Nama platform perangkat keras tempat perakitan dilakukan - <strong>raspberry</strong> </li><li>  Nama cabang kerja Yocto / OpenEmbedded utama adalah <strong>rocko</strong> </li><li>  Nama kode versi ini adalah <strong>torvin</strong> (semua versi dari seri 0.2.x) </li><li>  Nomor versi digital yang sedang dirakit adalah <strong>0.2.5</strong> </li></ol><br><a name="sync_repo_koditv"></a><h3>  Sinkronisasi Repo </h3><br>  untuk bootstrap atau sinkronisasi berikutnya, jalankan saja perintah: <br><br><pre> <code class="bash hljs">repo sync</code> </pre><br>  yang akan mengambil semua versi terbaru dari proyek GIT yang ditentukan dalam file manifes (cabang biasanya ditunjukkan), jika Anda memiliki hash commit atau nama tag dalam atribut revisi, maka versi untuk repositori git ini tidak akan berubah.  Nama tag dapat ditentukan seperti ini: revisi = "ref / tag / v0.2.5" <br><br><a name="config_koditv"></a><h3>  Membuat Konfigurasi Proyek Yocto </h3><br>  Setelah perintah sinkronisasi repo dijalankan, Anda dapat mulai membuat konfigurasi utama Proyek Yocto: <br><br><pre> <code class="bash hljs">./shell.sh</code> </pre><br>  setelah skrip selesai, direktori <strong>build / conf</strong> akan dibuat: <br>  dengan dua file utama: <br><br><ul><li>  <strong>local.conf</strong> - variabel kontrol rakitan: <br>  nama platform, jenis distribusi dan paket pembangunan, dll. </li><li>  <strong>bblayers.conf</strong> - konfigurasi lapisan yang terhubung dari Proyek Yocto </li></ul><br>  secara default, skrip setup-environment mencari <strong>source / base / conf</strong> <br>  konfigurasi awal dan jika <strong>file local.conf</strong> dan <strong>bblayers.conf</strong> <br>  ada, mereka disalin ke <strong>build / conf</strong> <br>  (lihat variabel TEMPLATES di lingkungan pengaturan) <br><br>  yaitu  file diambil dari sumber / bs-manifest / raspberry / rocko / conf <br>  lihat membuat symlink ke basis <br><br><a name="local_conf_config_koditv"></a><h3>  File konfigurasi build / conf / local.conf </h3><br><div class="spoiler">  <b class="spoiler_title">Tampilkan / Sembunyikan</b> <div class="spoiler_text"><pre> <code class="bash hljs"> MACHINE ??= <span class="hljs-string"><span class="hljs-string">'raspberrypi3'</span></span> DISTRO ?= <span class="hljs-string"><span class="hljs-string">'poky'</span></span> PACKAGE_CLASSES ?= <span class="hljs-string"><span class="hljs-string">"package_deb"</span></span> EXTRA_IMAGE_FEATURES ?= <span class="hljs-string"><span class="hljs-string">"debug-tweaks"</span></span> USER_CLASSES ?= <span class="hljs-string"><span class="hljs-string">"buildstats image-mklibs image-prelink"</span></span> PATCHRESOLVE = <span class="hljs-string"><span class="hljs-string">"noop"</span></span> BB_DISKMON_DIRS = <span class="hljs-string"><span class="hljs-string">"\ STOPTASKS,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${TMPDIR}</span></span></span><span class="hljs-string">,1G,100K \ STOPTASKS,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${DL_DIR}</span></span></span><span class="hljs-string">,1G,100K \ STOPTASKS,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${SSTATE_DIR}</span></span></span><span class="hljs-string">,1G,100K \ STOPTASKS,/tmp,100M,100K \ ABORT,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${TMPDIR}</span></span></span><span class="hljs-string">,100M,1K \ ABORT,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${DL_DIR}</span></span></span><span class="hljs-string">,100M,1K \ ABORT,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${SSTATE_DIR}</span></span></span><span class="hljs-string">,100M,1K \ ABORT,/tmp,10M,1K"</span></span> PACKAGECONFIG_append_pn-qemu-native = <span class="hljs-string"><span class="hljs-string">" sdl"</span></span> PACKAGECONFIG_append_pn-nativesdk-qemu = <span class="hljs-string"><span class="hljs-string">" sdl"</span></span> CONF_VERSION = <span class="hljs-string"><span class="hljs-string">"1"</span></span> DL_DIR ?= <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${BSPDIR}</span></span></span><span class="hljs-string">/downloads/"</span></span> <span class="hljs-comment"><span class="hljs-comment"># size memory GPU for Raspberry Pi GPU_MEM = "128" GPU_MEM_256 = "112" GPU_MEM_512 = "160" GPU_MEM_1024 = "320" # for libs: "mpeg2dec libmad ffmpeg x264" LICENSE_FLAGS_WHITELIST += "commercial"</span></span></code> </pre><br></div></div><br><a name="bblayers_conf_config_koditv"></a><h3>  File konfigurasi build / conf / bblayers.conf </h3><br><div class="spoiler">  <b class="spoiler_title">Tampilkan / Sembunyikan</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf # changes incompatibly LCONF_VERSION = "6" POKY_BBLAYERS_CONF_VERSION = "2" BBPATH = "${TOPDIR}" BSPDIR := \ "${@os.path.abspath(os.path.dirname(d.getVar('FILE', True)) + '/../..')}" BBFILES ?= "" BBLAYERS ?= " \ ${BSPDIR}/sources/poky/meta \ ${BSPDIR}/sources/poky/meta-poky \ ${BSPDIR}/sources/poky/meta-yocto-bsp \ ${BSPDIR}/sources/meta-openembedded/meta-oe \ ${BSPDIR}/sources/meta-openembedded/meta-python \ ${BSPDIR}/sources/meta-openembedded/meta-networking \ ${BSPDIR}/sources/meta-openembedded/meta-multimedia \ ${BSPDIR}/sources/meta-openembedded/meta-filesystems \ ${BSPDIR}/sources/meta-raspberrypi \ ${BSPDIR}/sources/berserk/meta-berserk \ "</span></span></code> </pre><br></div></div><br><br>  variabel utama file local.conf - yang perlu Anda perhatikan: <br><br><ul><li>  MESIN - nama platform tempat perakitan dilakukan </li><li>  DISTRO - nama kategori distribusi </li><li>  PACKAGE_CLASSES - format paket untuk menginstal perangkat lunak </li><li>  LICENSE_FLAGS_WHITELIST - penggunaan lisensi tambahan </li></ul><br>  pengaturan khusus untuk keluarga papan Raspberry Pi <br><br><ul><li>  GPU_MEM = "128" - jumlah memori video untuk adaptor video GPU (dialokasikan dari RAM) </li><li>  GPU_MEM_256 = "112" - hanya untuk papan dengan ukuran RAM total = 256MB </li><li>  GPU_MEM_512 = "160" - hanya untuk papan dengan ukuran RAM total = 512MB </li><li>  GPU_MEM_1024 = "320" - hal yang sama hanya untuk papan dengan ukuran RAM total = 1024MB </li></ul><br><blockquote>  catatan: <br>  misalnya, jika Anda hanya menyisakan variabel GPU_MEM = "128", <br>  kemudian untuk semua papan RPI, RPI2, RPI3 <br>  terlepas dari jumlah RAM nyata <br>  di papan akan selalu dialokasikan untuk GPU - 128Mb <br>  (dan total ukuran RAM berkurang dengan nilai ini) <br></blockquote><br>  jika semua variabel ditentukan, arahan GPU_MEM_256, GPU_MEM_512, GPU_MEM_1024 lebih diprioritaskan. <br><br>  Untuk perakitan Pusat Multimedia, selain lapisan Yocto biasa, lihat file bblayers.conf <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/poky/meta \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/poky/meta-poky \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/poky/meta-yocto-bsp \</code> </pre><br>  Saya menghubungkan empat lapisan dengan fungsionalitas tambahan dari OpenEmbedded. <br><br>  Kodi Multimedia Center - adalah program kompleks yang menggunakan sejumlah besar perpustakaan eksternal dan Anda perlu membangun setiap perpustakaan menggunakan resep membangun, jadi jika mungkin saya akan menggunakan semua resep dari OpenEmbedded dalam kategori <strong>Multimedia</strong> <br><br>  Jadi, saya memiliki lapisan Multimedia yang terhubung dan lapisan di mana itu tergantung <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-oe \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-python \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-networking \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-multimedia \</code> </pre><br>  kemudian lapisan OpenEmbedded lain terhubung untuk bekerja dengan sistem file <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-filesystems \</code> </pre><br>  selanjutnya menghubungkan lapisan BSP utama untuk platform Raspberry Pi <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-raspberrypi \</code> </pre><br>  Nah, pada akhirnya, lapisan tambahan terhubung, yang bertanggung jawab untuk merakit gambar distribusi dengan fungsi "Pusat Multimedia" <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/berserk/meta-berserk \</code> </pre><br><a name="layer_koditv"></a><h2>  Lapisan untuk merakit pusat multimedia </h2><br>  Menurut pendapat saya, Proyek Yocto adalah gabungan industri untuk membuat distribusi tertanam.  Tetapi jika Anda pernah bekerja dengan sistem build Buildroot, maka Yocto mungkin tampak rumit bagi Anda.  Ini menggunakan sejumlah besar ruang hard disk kosong.  Untuk operasi normal, Yocto membutuhkan sekitar 80 - 100 GB ruang kosong, dan ini biasanya mempertimbangkan perakitan hanya untuk satu platform. <br><br>  Yocto berupaya dengan tujuan utamanya - mendukung sebanyak mungkin platform perangkat keras yang berbeda, dan ini membutuhkan mekanisme yang paling fleksibel untuk beralih rakitan.  Dan mekanisme ini membutuhkan waktu dan tempat.  Membangun distribusi di Yocto bukanlah proses yang cepat. <br><br>  Jadi, semua fungsi untuk merakit "Pusat Multimedia" yang saya miliki dengan layer terpisah: <br><br><pre> <code class="bash hljs">https://github/berserktv/berserk</code> </pre><br>  (Judul diambil dari buku favorit saya, The Hammer and the Cross, oleh Harry Harrison.) <br>  (Torvin juga tokoh dalam buku ini.) <br><br>  Untuk membuat fungsionalitas yang saya butuhkan, saya akan menggunakan apa yang disebut pengaya untuk resep, yang terletak di file dengan ekstensi .bbappend <br>  dalam file .bbappend, Anda dapat menambahkan panggilan perintah Anda sendiri untuk metode resep membangun biasa, misalnya, ke do_configure, do_compile, metode do_install, dll. <br><br><a name="struct_top_layer_koditv"></a><h3>  Struktur lapisan </h3><br><pre> â”œâ”€â”€ COPYING.MIT
 â”œâ”€â”€ meta-mengamuk
 â”‚ â”œâ”€â”€ conf
 â”‚ â”‚ â””â”€â”€ layer.conf
 â”‚ â”œâ”€â”€ resep-mengamuk
 â”‚ â”‚ â”œâ”€â”€ bs-net
 â”‚ â”‚ â”œâ”€â”€ dijalankan pertama kali
 â”‚ â”‚ â”œâ”€â”€ gambar
 â”‚ â”‚ â””â”€â”€ tv
 â”‚ â”œâ”€â”€ resep-inti
 â”‚ â”‚ â”œâ”€â”€ init-ifupdown
 â”‚ â”‚ â””â”€â”€ psplash
 â”‚ â”œâ”€â”€ resep-kernel
 â”‚ â”‚ â””â”€â”€ linux
 â”‚ â”œâ”€â”€ resep-mediacentre
 â”‚ â”‚ â”œâ”€â”€ kodi
 â”‚ â”‚ â””â”€â”€ plugin kodi
 â”‚ â””â”€â”€ resep-multimedia
 â”‚ â””â”€â”€ ffmpeg
 â”œâ”€â”€ README.md
 â””â”€â”€ changelog.txt
</pre><br><br>  Komposisi lapisan: <br><br><ul><li>  konfigurasi lapisan </li><li>  <strong>resep-mengamuk</strong> - resep membangun distribusi, tv, jaringan dan resep peluncuran pertama </li><li>  <strong>resep-inti</strong> - resep dasar, khususnya modifikasi resep start-up </li><li>  <strong>resep-kernel</strong> - resep membangun kernel Linux </li><li>  <strong>resep-mediacentre</strong> - resep untuk membangun Kodi dan plugin-nya </li><li>  <strong>resep-multimedia</strong> - resep multimedia, perakitan ffmpeg </li></ul><br><a name="config_layer_koditv"></a><h3>  konfigurasi lapisan </h3><br><div class="spoiler">  <b class="spoiler_title">termasuk file layer.conf</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># We have a conf and classes directory, add to BBPATH BBPATH .= ":${LAYERDIR}" # We have a packages directory, add to BBFILES BBFILES += "${LAYERDIR}/recipes-*/*/*.bb \ ${LAYERDIR}/recipes-*/*/*.bbappend" BBFILE_COLLECTIONS += "bs" BBFILE_PATTERN_bs := "^${LAYERDIR}/" BBFILE_PRIORITY_bs = "5" DISTRO_FEATURES_append += " wifi x11" PREFERRED_VERSION_ffmpeg = "3.1.11" SYSVINIT_ENABLED_GETTYS = "1" PREFERRED_VERSION_linux-raspberrypi ?= "4.9%"</span></span></code> </pre><br></div></div><br>  File tersebut berisi indikasi versi perpustakaan ffmpeg, nomor versi kernel linux, serta jumlah konsol virtual (tty), dan termasuk fitur kit distribusi - wifi x11 <br><blockquote>  DISTRO_FEATURES_append + = "wifi x11" <br><br>  PREFERRED_VERSION_ffmpeg = "3.1.11" <br>  SYSVINIT_ENABLED_GETTYS = "1" <br><br>  PREFERRED_VERSION_linux-raspberrypi? = "4,9%" <br></blockquote><br><a name="berserk_layer_koditv"></a><h3>  komposisi resep-mengamuk </h3><br><pre> â”œâ”€â”€ bs-net
 â”‚ â””â”€â”€ bs-net_0.1.3.bb
 â”œâ”€â”€ pertama kali dijalankan
 â”‚ â”œâ”€â”€ file
 â”‚ â”‚ â””â”€â”€ first-run.sh
 â”‚ â””â”€â”€ first-run.bb
 â”œâ”€â”€ gambar
 â”‚ â””â”€â”€ berserk-image.bb
 â””â”€â”€ tv
     â”œâ”€â”€ file
     â”‚ â””â”€â”€ berserk.m3u8
     â”œâ”€â”€ tv-config.bb
     â””â”€â”€ tv-dir.inc
</pre><br><br>  dimana: <br><br><ul><li>  bs-net_0.1.3.bb - resep untuk membangun ekstensi shell untuk antarmuka WLAN / Ethernet </li><li>  first-run.bb - resep untuk menjalankan pertama, partisi disk tambahan </li><li>  first-run.sh - skrip shell dari jalankan pertama (jalankan di jalankan level S) </li><li>  berserk-image.bb - resep untuk membangun gambar distribusi </li><li>  tv-config.bb - resep untuk mengkonfigurasi saluran TV menggunakan IPTV </li><li>  berserk.m3u8 - konfigurasi saluran televisi publik (format m3u8) </li></ul><br><a name="core_layer_koditv"></a><h3>  komposisi resep-inti </h3><br><pre> â”œâ”€â”€ init-ifupdown
 â”‚ â”œâ”€â”€ file
 â”‚ â”‚ â””â”€â”€ antarmuka
 â”‚ â””â”€â”€ init-ifupdown_1.0.bbappend
 â””â”€â”€ psplash
     â”œâ”€â”€ file
     â”‚ â””â”€â”€ psplash-berserk-img.h
     â””â”€â”€ psplash_git.bbappend
</pre><br><br>  dimana: <br><br><ul><li>  interface - file dengan pengaturan jaringan saat ini </li><li>  init-ifupdown_1.0.bbappend - ekstensi untuk resep konfigurasi jaringan </li><li>  psplash-berserk-img.h - gambar screen saver startup <br>  file header diperoleh dengan menggunakan utilitas gdk-pixbuf-csource </li><li>  psplash_git.bbappend - ekstensi resep untuk memulai screen saver startup </li></ul><br>  Konfigurasi jaringan pada perangkat target ada dalam file: <br><br><pre> <code class="bash hljs">/etc/network/interfaces</code> </pre><br>  Setelah menambahkan ekstensi resep init-ifupdown, saya mengganti file konfigurasi biasa dengan saya sendiri, dan mengubah urutan (prioritas) dari skrip yang dijalankan untuk tingkat eksekusi <br><br><pre> <code class="bash hljs">INITSCRIPT_PARAMS = <span class="hljs-string"><span class="hljs-string">"start 98 2 3 4 5 . stop 10 0 6 1 ."</span></span></code> </pre><br>  Saat ini, hampir semua distribusi Linux modern menyertakan layar pembuka.  Biasanya, screen saver startup menunjukkan status saat ini dari unduhan yaitu  Indikator waktu yang berlalu sejak sistem dimulai.  Dalam hal ini, Yocto tidak terkecuali dan Anda dapat mengubah gambar screen saver start-up standar menjadi gambar sewenang-wenang. <br><br>  Untuk melakukan ini, Anda harus: <br><br><ol><li>  FILESEXTRAPATHS_prepend - tambahkan direktori untuk sumber daya </li><li>  SRC_URI - tambahkan file header dengan gambar sewenang-wenang </li><li>  SPLASH_IMAGES - ubah variabel kontrol paket </li></ol><br>  dan selanjutnya dalam resep gambar "berserk-image.bb" perlu menambahkan splash start-up image sebagai fitur gambar <br><br><pre> <code class="bash hljs">IMAGE_FEATURES += <span class="hljs-string"><span class="hljs-string">"splash"</span></span> <span class="hljs-comment"><span class="hljs-comment">#          SPLASH = "psplash-berserk"</span></span></code> </pre><br><a name="kernel_layer_koditv"></a><h2>  komposisi resep-kernel </h2><br><pre> â””â”€â”€ linux
     â”œâ”€â”€ file
     â”‚ â”œâ”€â”€ db.txt.patch
     â”‚ â””â”€â”€ rbpi.cfg
     â””â”€â”€ linux-raspberrypi_4.9.bbappend
</pre><br><br>  dimana: <br><br><ul><li>  db.txt.patch - tambalan dengan basis Domain Regulatory (digunakan untuk WiFi) </li><li>  rbpi.cfg - Fragmen konfigurasi kernel Linux </li><li>  linux-raspberrypi_4.9.bbappend - ekstensi dari 4,9 kernel build resep untuk Raspberry Pi </li></ul><br>  Perangkat Wi-Fi beroperasi pada frekuensi tertentu dan bagi mereka ada yang namanya domain pengaturan - ini adalah parameter yang menunjukkan negara tempat perangkat ini seharusnya bekerja. <br><br>  Kernel Linux memiliki basis data pengiring di mana frekuensi yang diizinkan dan daya yang diizinkan untuknya terdaftar untuk setiap negara. <br><br>  Dalam kasus yang paling sederhana, database ini dapat langsung dimasukkan ke dalam kernel secara statis dengan menetapkan parameter: <br>  <strong>CONFIG_CFG80211_INTERNAL_REGDB = y</strong> <br>  <strong>itulah</strong> yang saya lakukan dengan menghubungkan tambalan dengan basis data <strong>db.txt.patch</strong> ini <br><br>  Dan satu hal lagi: di Yocto ada yang namanya fragmen konfigurasi kernel.  Biasanya, sebuah fragmen konfigurasi, sebuah file dengan ekstensi cfg, hanya berisi parameter-parameter kernel yang jelas Anda perlukan untuk keperluan tertentu.  Dan bagian konfigurasi ini ditambahkan ke parameter default yang sudah ada dalam resep saat membangun kernel. <br><br>  Selain resep bbappend, Anda juga dapat mengubah parameter yang diteruskan ke kernel saat startup: <br><br>  yaitu  timpa variabel <br>  <strong>CMDLINE</strong> lihat file linux-raspberrypi_4.9.bbappend <br><br><div class="spoiler">  <b class="spoiler_title">konten rbpi.cfg</b> <div class="spoiler_text"><pre> <code class="html hljs xml"> # use statically compiled regulatory rules database CONFIG_CFG80211_INTERNAL_REGDB=y #  Wifi  Asus USB-N53 chipset Ralink RT3572 CONFIG_RT2800USB=m #  wifi    Atheros D-Link DWA-126 802.11n (AR9271), # NetGear WNDA3200, NetGear WNA1100, TP-Link TL-WN722N (AR9271), # TL-WN322G v3, TL-WN422G  .. . cateee.net CONFIG_ATH9K_HW=m CONFIG_ATH9K_HTC=m #  Wifi    wpa_supplicant CONFIG_WIRELESS=y CONFIG_WEXT_CORE=y CONFIG_WEXT_PROC=y CONFIG_CRYPTO_AES=y #    IPSec,    Wifi  #   wpa_supplicant   CONFIG_CRYPTO_CCM=m CONFIG_CRYPTO_CTR=m CONFIG_CRYPTO_ARC4=m ######################### #   CONFIG_HAVE_PERF_EVENTS=y CONFIG_PERF_EVENTS=y CONFIG_HAVE_LATENCYTOP_SUPPORT=y CONFIG_LATENCYTOP=y # This option adds support for ASIX AX88xxx # based USB 2.0 10/100 Ethernet adapters. CONFIG_USB_NET_AX8817X=m</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"> linux-raspberrypi_4.9.bbappend</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">#      rpbi.cfg FILESEXTRAPATHS_prepend := "${THISDIR}/files:" SRC_URI += "file://db.txt.patch;patch=1 \ file://rbpi.cfg \ " #  BSP  meta-raspberrypi     # https://github.com/agherzan/meta-raspberrypi/issues/14 #    #   do_kernel_configme   #     arch/    do_kernel_configme_append() { cat ${WORKDIR}/rbpi.cfg &gt;&gt; ${WORKDIR}/defconfig } # CMDLINE for raspberrypi # default CMDLINE = "dwc_otg.lpm_enable=0 console=serial0,115200 # root=/dev/mmcblk0p2 rootfstype=ext4 rootwait" CMDLINE = "quiet dwc_otg.lpm_enable=0 console=serial0,115200 \ root=/dev/mmcblk0p2 rootfstype=ext4 rootwait"</span></span></code> </pre><br></div></div><br><a name="mediacentre_layer_koditv"></a><h3>  recipes-mediacentre </h3><br><pre> <code class="bash hljs">â”œâ”€â”€ kodi â”‚  â”œâ”€â”€ kodi â”‚  â”œâ”€â”€ kodi_17.bbappend â”‚  â”œâ”€â”€ kodi-dir.inc â”‚  â”œâ”€â”€ kodi-runner.bb â”‚  â”œâ”€â”€ kodi-settings.bb â”‚  â””â”€â”€ kodi-version.inc â””â”€â”€ kodi-plugins â”œâ”€â”€ files â”œâ”€â”€ kodi-language-ru_3.0.10.bb â”œâ”€â”€ kodi-pvr-iptvsimple.bb â”œâ”€â”€ plugin-video-youtube_5.5.1.bb â”œâ”€â”€ screensaver-kodi-universe_0.1.2.bb â”œâ”€â”€ script-berserk-network_0.2.5.bb â””â”€â”€ script-module-requests_2.12.4.bb</code> </pre><br>  dimana: <br><br><ol><li> kodi/ <br><ul><li> kodi â€”    <strong>icon,run,settings</strong> <br>           </li><li> kodi_17.bbappend â€”       Kodi </li><li> kodi-dir.inc â€”    Kodi    </li><li> kodi-runner.bb â€”   Kodi     </li><li> kodi-settings.bb â€”     Kodi </li><li> kodi-version.inc â€”        Kodi </li></ul><br></li><li> kodi-plugins/ <br><br><ul><li> files â€”   tar.gz      </li><li> kodi-language-ru_3.0.10.bb â€”     (  Kodi) </li><li> kodi-pvr-iptvsimple.bb â€”   Kodi  pvr-iptvsimple </li><li> plugin-video-youtube_5.5.1.bb â€”   Kodi    Â«YoutubeÂ» </li><li> screensaver-kodi-universe_0.1.2.bb â€”    screensaver-kodi-universe </li><li> script-berserk-network_0.2.5.bb â€”      </li><li> script-module-requests_2.12.4.bb â€”      Youtube </li></ul><br></li></ol><br><a name="multimedia_layer_koditv"></a><h3>  recipes-multimedia </h3><br><pre>â””â”€â”€ ffmpeg<font></font>
    â”œâ”€â”€ ffmpeg<font></font>
    â”‚  â”œâ”€â”€ 0001-ffmpeg-Call-get_format-to-fix-an-issue-with-MMAL-ren.patch<font></font>
    â”‚  â”œâ”€â”€ h264_parser.patch<font></font>
    â”‚  â””â”€â”€ pfcd_hevc_optimisations.patch<font></font>
    â””â”€â”€ ffmpeg_3.1.11.bb<font></font>
</pre><br><br>  dimana: <br><br><ul><li> 0001-ffmpeg-Call-get_format-to-fix-an-issue-with-MMAL-ren.patch â€”   ffmpeg </li><li> h264_parser.patch â€”     h264 </li><li> pfcd_hevc_optimisations.patch â€”      Raspberry Pi </li><li> ffmpeg_3.1.11.bb â€”    ffmpeg (,  ) </li></ul><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FFmpeg</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pustaka OpenSource untuk encoding / decoding sejumlah besar format video dan audio. </font><font style="vertical-align: inherit;">FFmpeg mendukung hampir 400 codec (ffmpeg -codecs) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan lebih dari 300 format (ffmpeg -formats).</font></font><br><br><a name="build_kodi_koditv"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Penambahan Resep Kodi Build </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lapisan OpenEmbedded berisi resep biasa untuk membangun Kodi, tetapi ini cukup umum, dan saya ingin mendapatkan versi yang sedikit lebih stabil dan teruji untuk platform Raspberry Pi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengembang perangkat lunak memiliki sesuatu yang disebut patch port terbalik. Perangkat lunak ini terus diperbarui, dan setiap versi baru mencakup fitur baru dan koreksi kesalahan yang diketahui. Patch porting terbalik memungkinkan Anda untuk mentransfer beberapa perubahan dalam versi baru dari program ke yang lebih lama, sehingga membuatnya lebih stabil. Tapi ini adalah pekerjaan yang sangat sulit dan melelahkan, yang selalu dilakukan oleh sejumlah besar pengembang.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di dunia komunitas OpenSource, ada beberapa proyek terkenal menggunakan Kodi, yang terbaik (menurut saya) adalah LibreElec (OpenElec). </font><font style="vertical-align: inherit;">LibreElec memiliki build yang bagus untuk platform Raspberry Pi. </font><font style="vertical-align: inherit;">Di sini mereka memilikinya dan yang terbaik adalah mengambil patch port terbalik untuk Kodi. </font><font style="vertical-align: inherit;">Dengan demikian, Anda dapat menyingkirkan sejumlah besar masalah tanpa mempelajarinya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pusat multimedia Kodi berfokus pada memainkan konteks "Media", dan menurut saya komponen yang paling penting adalah kombinasi dari Kodi dan FFmpeg, mis. </font><font style="vertical-align: inherit;">interaksi versi tertentu dari program-program ini, perpustakaan lain dapat dibiarkan dari lapisan Yocto dan OpenEmbedded. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk perakitan, saya mengambil versi stabil Kodi 17.6 dan versi FFmpeg 3.1.11</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs">  ,       ,      systemD.         (   (  )).  ,     LibreElec       : <span class="hljs-comment"><span class="hljs-comment">#!/bin/bash HASH_VER="934507d922fb011ce46c76566206f2f1f603360b" git clone https://github.com/LibreELEC/LibreELEC.tv.git libreelec cd libreelec git checkout ${HASH_VER}   Kodi,   : projects/RPi2/patches/kodi (. : kodi-001-backport.patch)    FFmpeg,   : packages/multimedia/ffmpeg/patches</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File deskripsi versi yang disertakan akan menjadi </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kodi-version.inc tersebut</font></font></strong> <br><br><pre> <code class="bash hljs">FILESEXTRAPATHS_prepend := <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${THISDIR}</span></span></span><span class="hljs-string">/kodi:"</span></span> <span class="hljs-comment"><span class="hljs-comment">#  Krypton SRCREV = "a9a7a20071bfd759e72e7053cee92e6f5cfb5e48" PV = "17.6+gitr${SRCPV}"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cabang Yocto dan OpenEmbedded yang saya pertimbangkan - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rocko</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , berisi Kodi versi 17.3, dan untuk meningkatkan ke versi 17.6, cukup tambahkan sedikit tambahan pada resep - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kodi_17.bbappend</font></font></strong> <br><br><pre> <code class="bash hljs">require kodi-version.inc <span class="hljs-comment"><span class="hljs-comment">#     (   17.3) SRC_URI_remove = "file://0013-FTPParse.cpp-use-std-string.patch" #  ,   systemd   SRC_URI_remove = "file://0004-handle-SIGTERM.patch" #      RPI   libreelec SRC_URI_append += "file://kodi-krypton-rpb-backports.patch" #  error adding symbols: DSO missing from command line SRC_URI_append += "file://vchostif.patch" MENU_ICON = "addons/skin.estuary/media/icons/settings" #       ( ) SRC_URI_append += "file://bs-menu.patch file://icon/bs-network.png" do_configure_prepend() { install -m 0644 ${WORKDIR}/icon/bs-network.png ${S}/${MENU_ICON} } #    kodi plugins RRECOMMENDS_${PN}_append = "\ python-xml python-misc python-db \ python-crypt python-threading python-math python-email \ python-io python-netserver python-urllib3 python-datetime" #     Raspberry Pi #  OPENGL    --enable-gles #  kodi     docs/README.linux =&gt; libxmu libxinerama # libxtst xdpyinfo #      DISTRO_FEATURES   "x11" #   kodi  RPI1  RPI2,3    --disable-x11 BS_RPI = " --disable-gl --enable-openmax --enable-player=omxplayer \ --with-platform=raspberry-pi --disable-x11" BS_RPI3 = " --disable-gl --enable-openmax --enable-player=omxplayer \ --with-platform=raspberry-pi2 --disable-x11" EXTRA_OECONF_append = "${@bb.utils.contains('MACHINE', 'raspberrypi', \ '${BS_RPI}', '', d)}" EXTRA_OECONF_append = "${@bb.utils.contains('MACHINE', 'raspberrypi2', \ '${BS_RPI3}', '', d)}" EXTRA_OECONF_append = "${@bb.utils.contains('MACHINE', 'raspberrypi3', \ '${BS_RPI3}', '', d)}" #       Kodi   #  ,  USB  microSDHC  ( ) EXTRA_OECONF_append = " --enable-optical-drive"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opsi build "--enable-optical-drive" memungkinkan Anda untuk menghubungkan mekanisme notifikasi praktis yang digunakan Kodi saat menghubungkan disk optik. </font><font style="vertical-align: inherit;">Dalam hal ini, modul MediaManager (a) (xbmc / storage / MediaManager.cpp) memonitor koneksi / pemutusan partisi disk baru dan menampilkan pesan sembul tentangnya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh udev untuk menghubungkan / memutuskan drive:</font></font><br><br><pre> <code class="bash hljs">ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> ENV{ID_FS_TYPE}==<span class="hljs-string"><span class="hljs-string">"vfat"</span></span> \ KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mkdir -p /media/%k"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mount -o iocharset=utf8,noatime /dev/%k /media/%k"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> ENV{ID_FS_TYPE}==<span class="hljs-string"><span class="hljs-string">"ntfs"</span></span> \ KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mkdir -p /media/%k"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/usr/bin/ntfs-3g -o \ iocharset=utf8,noatime,windows_names /dev/%k /media/%k"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> ENV{ID_FS_TYPE}==<span class="hljs-string"><span class="hljs-string">"ext2|ext3|ext4"</span></span> \ KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mkdir -p /media/%k"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mount -o noatime /dev/%k /media/%k"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"remove"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/umount /media/%k"</span></span>, RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/rmdir /media/%k"</span></span></code> </pre><br><pre> <code class="html hljs xml">:  rmdir     ,       ( Linux    -  )       .</code> </pre><br><a name="add_menu_koditv"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menambahkan Item Baru ke Menu Pengaturan Kodi </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam Kodi 17.6, file konfigurasi xml bertanggung jawab untuk menampilkan item menu. </font><font style="vertical-align: inherit;">Untuk menambahkan satu item lagi di bawah menu "Pengaturan", cukup sesuaikan file: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kodi / addons / skin.estuary / xml / Settings.xml di </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mana skin.estuary adalah tema desain menu default, </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deskripsi </font><font style="vertical-align: inherit;">item </font><font style="vertical-align: inherit;">terlihat seperti ini:</font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;item&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;label&gt; $ LOCALIZE [13279] &lt;/label&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;onclick&gt; RunAddon (script.berserk.network, butnetwork) &lt;/onclick&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;icon&gt; ikon / pengaturan / bs-network.png &lt;/icon&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/item&gt;</font></font><font></font>
</pre><br><br>  dimana: <br><br> <strong>label</strong> â€”    <br> <strong>onclick</strong> â€”       <br> ( ,      Â«butnetworkÂ») <br> <strong>icon</strong> â€”    (  png ) <br><br>   ,      Kodi      bs-menu.patch <br><br><div class="spoiler"> <b class="spoiler_title">/</b> <div class="spoiler_text"><pre> <code class="bash hljs"> diff -Naur a/addons/skin.estuary/xml/Settings.xml b/addons/skin.estuary/xml/Settings.xml --- a/addons/skin.estuary/xml/Settings.xml 2018-02-01 18:17:45.000000000 +0300 +++ b/addons/skin.estuary/xml/Settings.xml 2018-03-08 12:06:50.000000000 +0300 @@ -134,6 +134,11 @@ &lt;icon&gt;icons/settings/interface.png&lt;/icon&gt; &lt;/item&gt; &lt;item&gt; + &lt;label&gt;<span class="hljs-variable"><span class="hljs-variable">$LOCALIZE</span></span>[13279]&lt;/label&gt; + &lt;onclick&gt;RunAddon(script.berserk.network,butnetwork)&lt;/onclick&gt; + &lt;icon&gt;icons/settings/bs-network.png&lt;/icon&gt; + &lt;/item&gt; + &lt;item&gt; &lt;label&gt;<span class="hljs-variable"><span class="hljs-variable">$LOCALIZE</span></span>[20077]&lt;/label&gt; &lt;onclick&gt;ActivateWindow(SkinSettings)&lt;/onclick&gt; &lt;icon&gt;icons/settings/skin.png&lt;/icon&gt; diff -Naur a/system/addon-manifest.xml b/system/addon-manifest.xml --- a/system/addon-manifest.xml 2018-03-07 15:58:24.000000000 +0300 +++ b/system/addon-manifest.xml 2018-05-14 14:06:58.000000000 +0300 @@ -27,6 +27,7 @@ &lt;addon&gt;resource.uisounds.kodi&lt;/addon&gt; &lt;addon&gt;screensaver.xbmc.builtin.black&lt;/addon&gt; &lt;addon&gt;screensaver.xbmc.builtin.dim&lt;/addon&gt; + &lt;addon&gt;screensaver.kodi.universe&lt;/addon&gt; &lt;addon&gt;script.module.pil&lt;/addon&gt; &lt;addon&gt;service.xbmc.versioncheck&lt;/addon&gt; &lt;addon&gt;skin.estuary&lt;/addon&gt; @@ -43,4 +44,8 @@ &lt;addon&gt;xbmc.python&lt;/addon&gt; &lt;addon&gt;xbmc.webinterface&lt;/addon&gt; &lt;addon optional=<span class="hljs-string"><span class="hljs-string">"true"</span></span>&gt;peripheral.joystick&lt;/addon&gt; + &lt;addon&gt;script.berserk.network&lt;/addon&gt; + &lt;addon&gt;resource.language.ru_ru&lt;/addon&gt; + &lt;addon&gt;script.module.requests&lt;/addon&gt; + &lt;addon&gt;plugin.video.youtube&lt;/addon&gt; &lt;/addons&gt;</code> </pre><br></div></div><br><a name="max_set_video_koditv"></a><h3>      </h3><br>    Kodi        : <br><br><pre> <code class="bash hljs">&lt;advancedsettings&gt; &lt;cache&gt; &lt;buffermode&gt;1&lt;/buffermode&gt; &lt;memorysize&gt;139460608&lt;/memorysize&gt; &lt;readfactor&gt;20&lt;/readfactor&gt; &lt;/cache&gt; &lt;/advancedsettings&gt;</code> </pre><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buffermode = 1</font></font></strong> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - permintaan buffer untuk semua sistem file (termasuk lokal) </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">readfactor</font></font></strong> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - menyesuaikan kecepatan unduhan berdasarkan bitrate video rata-rata. </font><font style="vertical-align: inherit;">Jadi, misalnya, jika Anda memutar video dengan kecepatan transfer data rata-rata 5 Mbit / dt dan mengatur rasio pembacaan buffer menjadi 2,0, ini akan membatasi kecepatan unduhan (dan karenanya laju pengisian cache) menjadi sekitar 10 Mbit / dt, dengan demikian: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">readfactor = 20 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menghilangkan batasan pada kecepatan unduh </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memorysize</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 139460608 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ukuran buffer adalah 133 MB, saat menggunakan 133 * 3 RAM yaitu </font><font style="vertical-align: inherit;">RAM sekitar 400 MB</font></font><br><br><a name="iptv_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menonton TV melalui IPTV </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kodi Media Center adalah alat yang sangat kuat untuk melihat konten digital. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fungsi utama yang saya kumpulkan "Media Center" adalah fungsi menonton televisi digital menggunakan IPTV (Internet Protocol Television) yaitu televisi melalui protokol internet. Dengan fungsi ini, Anda dapat menonton televisi digital dari penyedia Internet Anda. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah opsi paling modern dan optimal baik dalam hal kualitas gambar dan dalam hal fitur tambahan yaitu layanan yang diberikan. Misalnya, saluran televisi dapat disediakan dalam arsip, di mana rekaman video yang diinginkan tersedia untuk beberapa waktu setelah siaran. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk mendukung IPTV di Kodi, ada beberapa opsi plugin, yang saya tentukan pada plugin</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pvr.iptvsimple</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Untuk membuat plugin, gunakan resep:</font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    â””â”€â”€ plugin kodi</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        â””â”€â”€ kodi-pvr-iptvsimple.bb</font></font><font></font>
</pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plug-in terhubung / dikonfigurasi melalui: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menu utama Kodi =&gt; â€œAdd-onsâ€ =&gt; â€œAdd-ons sayaâ€ =&gt; â€œKlien PVRâ€ =&gt; â€œPVR IPTV Simple Clientâ€ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk memeriksa pengoperasian televisi IPTV sebagai bagian dari Kodi, saya mengambil beberapa saluran berita publik dan menambahkannya ke daftar dalam format m3u8, dan juga menyalakan peluncuran otomatis "pvr.iptvsimple" di awal pusat media.</font></font><br><br><a name="youtube_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menonton Youtube dengan Plugin Kodi </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmer yang mengembangkan Kodi memberikan fleksibilitas untuk memperluas fungsinya. </font><font style="vertical-align: inherit;">Ini dilakukan agar setiap penggila, jika diinginkan, dapat menambah Kodi apa yang benar-benar dia butuhkan. </font><font style="vertical-align: inherit;">Dan plugin ini untuk Kodi adalah kegelapan.</font></font> Nah, Anda mengerti intinya.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada begitu banyak dari mereka yang layak mendapat deskripsi dalam artikel terpisah. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plugin diinstal dengan sangat sederhana, cukup sambungkan Kodi ke Internet dan tekan beberapa tombol di menu. Anda dapat membacanya di salah satu forum yang didedikasikan untuk Kodi. Tapi rakitannya, ada rakitannya, dan saya akan memasukkan satu lagi plugin dalam kit distribusi sebagai contoh. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plugin yang paling menarik dan tersebar luas (ohm) untuk Kodi menurut saya adalah plugin tampilan Youtube. Kodi adalah pusat multimedia, dan Youtube adalah repositori terbesar dari konten yang sangat multimedia ini, sehingga plug-in Youtube untuk Kodi hampir wajib. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plugin ini ditulis dengan python, dan ini adalah mekanisme plug-in biasa, Anda tidak perlu mengkompilasi apa pun, cukup salin plug-in yang telah selesai ke direktori root dengan plug-in, dan tentukan nama plug-in dalam file manifes xml:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"System / addon-manifest.xml" </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plugin ini diambil dari repositori resmi, dan kode sumbernya disertakan dalam arsip: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resep-mediacentre / kodi-plugins / file / plugin.video.youtube.tar.gz Lihat </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lokasi resep perakitan plugin di bab "komposisi resep-mediacentre"</font></font><br><br><a name="bsnet_layer_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ekstensi konfigurasi jaringan shell konsol </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karena kit distribusi yang dirangkai dalam kerangka artikel ini adalah sebuah demo, persyaratan untuk mengatur "Antarmuka Jaringan" untuk itu sangat minim. </font><font style="vertical-align: inherit;">Saya tidak ingin menyeret manajer jaringan yang berat untuk ini, yang sangat tidak bisa dipahami oleh saya dan sangat besar, dan karena itu saya menulis dua skrip shell yang melengkapi konfigurasi mekanisme konfigurasi reguler:</font></font><br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">############################################################## #     /etc/network/interfaces: ############################################################## auto eth0 iface eth0 inet manual up /etc/network/eth-manual $IFACE up down /etc/network/eth-manual $IFACE down auto wlan0 iface wlan0 inet manual up /etc/network/wlan $IFACE up down /etc/network/wlan $IFACE down</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk dengan mudah mengkonfigurasi antarmuka jaringan Ethernet / WLAN melalui GUI, saya menggunakan plugin Kodi kecil lainnya "script.berserk.network". </font><font style="vertical-align: inherit;">Ini hampir satu-satunya plugin Kodi yang saya temukan, tetapi untuk ini saya harus menulisnya. </font><font style="vertical-align: inherit;">Ini sangat kompak dan minimalis dan ditulis dalam bahasa python. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kedua komponen ini dikumpulkan menggunakan resep:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> resep-mengamuk / bs-net / bs-net_0.1.3.bb </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> resep-mediacentre / kodi-plugins / script-berserk-network_0.2.5.bb </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada titik ini, saya ingin membahas detailnya. </font><font style="vertical-align: inherit;">Jadi semua fleksibilitas menggunakan Yocto terletak pada set resep yang berbeda, yaitu </font><font style="vertical-align: inherit;">terhubung satu set resep - manajer jaringan paling sederhana telah ditambahkan ke kit distribusi, terhubung satu set resep - menambahkan manajer jaringan favorit Anda menggunakan misalnya systemD, dll. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk terhubung secara otomatis ke titik akses WiFi ketika sistem dimulai, saya menggunakan aturan udev: /etc/udev/rules.d/80-wifi-start.rules</font></font><br><br><pre> <code class="bash hljs">SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"net"</span></span>, ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, DRIVERS==<span class="hljs-string"><span class="hljs-string">"?*"</span></span>, KERNEL==<span class="hljs-string"><span class="hljs-string">"wlan*"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/etc/network/wlan-runner </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$env</span></span></span><span class="hljs-string">{INTERFACE} up"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"net"</span></span>, ACTION==<span class="hljs-string"><span class="hljs-string">"remove"</span></span>, DRIVERS==<span class="hljs-string"><span class="hljs-string">"?*"</span></span>, KERNEL==<span class="hljs-string"><span class="hljs-string">"wlan*"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/etc/network/wlan-runner </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$env</span></span></span><span class="hljs-string">{INTERFACE} down"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script wlan-runner hanya menjalankan perintah: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / network / wlan $ IFACE ke atas</font></font><br>  atau <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / etc / network / wlan $ IFACE down </font></font><br><br><a name="distrib_recipe_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Resep Pembuatan Distribusi </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proyek Yocto memiliki mekanisme penggunaan kembali. Ada beberapa kelas tempat Anda mewarisi (direktif "inherit"), dan ada resep dasar yang dapat Anda hubungkan (direktif "termasuk"). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya akan menunjukkan pewarisan menggunakan contoh kelas: </font></font><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">poky / meta / clasess / core-image.bbclass</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kelas bertanggung jawab untuk menggambarkan kelompok paket yang dapat Anda sertakan dalam resep tertentu. Untuk melakukan ini, cukup mengindikasikan konstruksi di awal resep: </font></font><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inherit core-image</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bahkan dalam teks kelas ini Anda dapat melihat fitur-fitur gambar, setiap fitur bertanggung jawab untuk sekelompok fungsi yang termasuk dalam gambar, dan masing-masing kelompok pada akhirnya menggambarkan sekumpulan program atau pustaka yang diinstal. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fitur gambar ditunjukkan sebagai berikut:</font></font><br><br><pre> <code class="bash hljs">IMAGE_FEATURES += <span class="hljs-string"><span class="hljs-string">"ssh-server-dropbear splash"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada juga DISTRO_FEATURES - fitur distribusi yang dapat ditentukan dalam file konfigurasi layer. </font><font style="vertical-align: inherit;">Ini adalah fungsi level distribusi, dan jika misalnya Anda mengubah beberapa fitur (misalnya x11), maka unit selanjutnya akan mulai merakit kembali semua paket yang bergantung pada opsi ini (ini bisa memakan waktu yang cukup lama). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resep dasar dasar yang saya gunakan adalah: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">poky / meta / recipes-core / images / core-image-minimal.bb</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resep membangun gambar</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># Project: "Berserk" - build Kodi for the Raspberry Pi platform # license - The MIT License (MIT) DESCRIPTION = "Berserk - the image for the Raspberry PI" LICENSE = "MIT" MD5_SUM = "md5=0835ade698e0bcf8506ecda2f7b4f302" LIC_FILES_CHKSUM = "file://${COMMON_LICENSE_DIR}/MIT;${MD5_SUM}" IMAGE_FEATURES += "ssh-server-dropbear splash" #    rootfs    (250000kB=~250Mb) IMAGE_ROOTFS_EXTRA_SPACE_append += "+ 250000" # Base this image on core-image-minimal include recipes-core/images/core-image-minimal.bb # Set default password for 'root' user inherit extrausers ROOTUSERNAME = "root" ROOTPASSWORD = "berserk" EXTRA_USERS_PARAMS = "usermod -P ${ROOTPASSWORD} ${ROOTUSERNAME};" #  ,      SPLASH = "psplash-berserk" BS_DEBUG_TOOLS = "ldd strace ltrace" BS_GLIBC = "glibc-thread-db \ glibc-gconv-utf-16 \ glibc-gconv-utf-32 \ glibc-binary-localedata-en-us \ glibc-binary-localedata-ru-ru \ glibc-charmap-utf-8 \ " BS_BASE = "kernel-modules \ lsb \ pciutils \ parted \ tzdata \ dosfstools \ ntp \ ntpdate \ e2fsprogs-resize2fs \ ntfs-3g \ ntfsprogs \ " BS_WLAN = "kernel-module-rt2800usb \ kernel-module-rt2800lib \ kernel-module-rt2x00lib \ kernel-module-rt2x00usb \ kernel-module-cfg80211 \ kernel-module-nls-utf8 \ kernel-module-ath9k-common \ kernel-module-ath9k-hw \ kernel-module-ath9k-htc \ kernel-module-ctr \ kernel-module-ccm \ kernel-module-arc4 \ " BS_WIFI_SUPPORT = " \ iw \ dhcp-client \ wireless-tools \ wpa-supplicant \ linux-firmware \ " BS_SOFT = "mc \ kodi \ kodi-runner \ kodi-settings \ kodi-language-ru \ kodi-pvr-iptvsimple \ bs-net \ tv-config \ first-run \ script-berserk-network \ screensaver-kodi-universe \ plugin-video-youtube \ script-module-requests \ " # Include modules in rootfs IMAGE_INSTALL += " \ ${BS_BASE} \ ${BS_WLAN} \ ${BS_WIFI_SUPPORT} \ ${BS_GLIBC} \ ${BS_SOFT} \ ${BS_DEBUG_TOOLS} \ "</span></span></code> </pre><br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya ingin mengklarifikasi bahwa, sebagai contoh </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, paket kernel-modul</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan menginstal </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semua modul kernel yang ditentukan dalam file defconfig ke dalam image distribusi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi jika Anda sangat menyesuaikan sesuatu, maka tentu saja Anda bahkan mungkin tidak memerlukan semua modul kernel, dalam hal ini nyaman untuk menambahkan setiap modul dengan nama, seperti yang ditunjukkan dalam variabel </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BS_WLAN</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , itu seperti lembar contekan, tentukan hanya apa yang Anda butuhkan dan setelah memeriksa paket. "Kernel-modules" hapus, periksa, dll.</font></font><br><br><a name="instruction_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Panduan singkat untuk membuat gambar distribusi </font></font></h2><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Instal dependensi Yocto Project di Ubuntu:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> sudo apt-get install -y --no-install-suggests --no-install-recommends \ gawk wget git-core diffstat unzip texinfo gcc-multilib build-essential \ chrpath socat cpio python python3 python3-pip python3-pexpect \ xz-utils debianutils iputils-ping python3-git python3-jinja2 \ libegl1-mesa libsdl1.2-dev xterm</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) Unduh dan pasang Repo:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> mkdir ~/bin curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo chmod a+x ~/bin/repo</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) Unduh proyek dari github:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> PATH=<span class="hljs-variable"><span class="hljs-variable">${PATH}</span></span>:~/bin mkdir torvin <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> torvin repo init -u https://github.com/berserktv/bs-manifest \ -m raspberry/rocko/torvin-0.2.5.xml repo sync</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4) Bangun proyek:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> ./shell.sh bitbake berserk-image</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5) Tulis gambar distribusi ke kartu memori:</font></font></b> <div class="spoiler_text"><blockquote>         <br> torvin/build/tmp/deploy/images/raspberrypi3 <br><br>      <br>     : <br> berserk-image-raspberrypi3.rpi-sdimg <br><br> c       <br> c      UTC <br><br>        dd <br><br> : <br>       Â«microSDHCÂ» <br>      . <br><br> $ sudo bash <br> $ cd torvin/build/tmp/deploy/images/raspberrypi3 <br> $ dd if=berserk-image-raspberrypi3.rpi-sdimg of=/dev/sdX bs=1M <br> $ sync <br><br>  /dev/sdX: <br> X   a,b,c  .. <br>        <br><br>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">:</a> <br>     Windows,    <br>  Win32 Disk Imager  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">:</a> <br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">:</a> <br></blockquote><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs">             N      ,      <span class="hljs-string"><span class="hljs-string">""</span></span>          ,    git  (..         <span class="hljs-string"><span class="hljs-string">""</span></span>)   :  - Intel(R) Core(TM) i5-3570 CPU @ 3.40GHz  - 8    -  USB-3.0 1T   - 4  05    - 1     - 274.8 M   torvin/build    (cache ,   ,   ,  ,   ,    ..) -   42    torvin/downloads -  9.1  (git    tar.gz )  rootfs   - 550     /lib/firmware - 212  /lib/modules - 53  :        firmware (   )       ,   200 </code> </pre><br></div></div><br><a name="postscriptum_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Catatan tambahan </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kemampuan OpenSource dalam beberapa tahun terakhir hanya meningkat. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi peluang ini tidak kecil, untuk contoh Anda bahkan tidak perlu melangkah jauh. Tidak mungkin bahwa "Microsoft" yang sama diharapkan bahwa teknologi OpenSource akan membuangnya dari pasar sistem operasi seluler. Maksudku OS dari Google - "Android", yang semalam melemparkan "Pioneer" sistem seluler di sela-sela. Dan tidak jelas apakah Microsoft akan dapat kembali ke sana lagi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentu saja, "Google", sebuah perusahaan besar dengan keuangan hampir tak terbatas dan pengembang yang sangat baik, tetapi tetap, seperti yang mereka katakan "tanpa Core dan tidak di sana-sini." </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proyek OpenSource terbaik dari waktu ke waktu menjadi karya seni (mis. Kodi, Openelec / libre, dll.)</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan hari ini, siapa pun dapat bergabung dengan praktik terbaik di OpenSource, jadi untuk berbicara tanpa keluar dari Github (a). </font><font style="vertical-align: inherit;">Artikel ini tentang itu. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Miliki banyak majelis yang baik dan berbeda untuk Anda, dan ingat "dunia internet akan datang."</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467443/">https://habr.com/ru/post/id467443/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467427/index.html">BudgetTracker - alat open-source lain untuk akuntansi keuangan pribadi</a></li>
<li><a href="../id467429/index.html">Habrastatistics: menjelajahi bagian situs yang paling banyak dikunjungi dan paling tidak dikunjungi</a></li>
<li><a href="../id467435/index.html">Kami mengirim laporan agen Veeam Linux ke email atau di Telegram</a></li>
<li><a href="../id467437/index.html">MVCC di PostgreSQL-1. Isolasi</a></li>
<li><a href="../id467439/index.html">Mengapa vinil kembali, dan bagaimana layanan streaming terkait dengan ini?</a></li>
<li><a href="../id467445/index.html">Daftar pembaruan Windows yang diinstal yang sulit dipahami</a></li>
<li><a href="../id467449/index.html">Deteksi kerentanan dan penilaian resistensi terhadap serangan hacker kartu pintar dan prosesor kripto dengan perlindungan built-in</a></li>
<li><a href="../id467453/index.html">Memecahkan masalah nomor 42 menggunakan superkomputer planet</a></li>
<li><a href="../id467455/index.html">Template QBS untuk pemrograman mikrokontroler di QtCreator menggunakan contoh pengontrol Milander</a></li>
<li><a href="../id467457/index.html">Mulai dari operasi hingga pengembang game atau pengalaman pertama pengembangan ponsel di Unity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>