<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ğŸ» ğŸŒ· ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘ğŸ¼ Benutzerdefiniertes unteres Blatt: wie es funktionieren sollte ğŸ’†ğŸ¾ â™»ï¸ ğŸ•ºğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vorwort 


 Vor nicht allzu langer Zeit habe ich einen Artikel Ã¼ber Bottom Sheet gelesen und nach RÃ¼cksprache mit Kollegen beschlossen, dieses Ding in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Benutzerdefiniertes unteres Blatt: wie es funktionieren sollte</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452628/"><h2 id="predislovie">  Vorwort </h2><br><p>  Vor nicht allzu langer Zeit habe ich einen Artikel Ã¼ber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bottom Sheet</a> gelesen und nach RÃ¼cksprache mit Kollegen beschlossen, dieses Ding in unsere Anwendung zu implementieren.  Nachdem ich genug Stunden damit verbracht hatte, dem Bottom Sheet das Reisen in wenigen Schritten beizubringen (wie bei Google Maps), erkannte ich seine Langeweile und EinschrÃ¤nkungen. <a name="habracut"></a>  Es wurden zwei LÃ¶sungen gefunden: Alles in einen Stream einwickeln, der den Zustand des lÃ¤nglichen Vorhangs in Echtzeit Ã¼berwacht, oder einige Methoden der BottomSheetBehavior-Klasse neu schreiben (zum GlÃ¼ck kÃ¶nnen Sie dies mit der Apache 2.0-Lizenz tun).  Ich habe mich fÃ¼r die zweite Option entschieden, weil sie mir praktikabler erschien, und jetzt werde ich aufgrund meiner Erfahrung versuchen, Ihnen zu sagen, was daraus geworden ist.  Ich hoffe, dass dies fÃ¼r jemanden nÃ¼tzlich ist.  Nun, fangen wir an. </p><br><h2 id="kastomizaciya">  Anpassung </h2><br><p>  Ich Ã¼berspringe die Schritte zum Erstellen eines Projekts und fÃ¼ge das Bottom Sheet von Google hinzu. Wenn Sie dies lesen, haben Sie alle oben genannten Punkte bereits Ã¼berwunden.  Wir mÃ¼ssen zur BottomSheetBehavior-Klasse gehen und ihren Inhalt in die neue CustomBottomSheetBehavior-Klasse kopieren, die wir erstellt haben.  Vergessen Sie nach dem Kopieren nicht, alles, was rot markiert ist, umzubenennen.  AuÃŸerdem sollten wir in der XML-Datei unseres BottomSheet diese Zeile unter Bezugnahme auf unsere neue Klasse umbenennen. Sie sollte ungefÃ¤hr so â€‹â€‹aussehen: </p><br><pre><code class="plaintext hljs">app:layout_behavior="com.my.custombottomsheetexample.CustomBottomSheetBehavior"</code> </pre> <br><p>  Wir haben also mehr als 700 Zeilen Java-Code, der beÃ¤ngstigend aussieht. Was machen Sie damit? <br>  Zuerst mÃ¼ssen Sie die onViewReleased () -Methode finden: <cut></cut></p><br><pre> <code class="plaintext hljs">public void onViewReleased(@NonNull View releasedChild, float xvel, float yvel) { ... }</code> </pre> <br><p>  Wir mÃ¼ssen nur ein paar Zeilen Ã¤ndern.  Wir finden das erste if {...} und ersetzen seinen Inhalt durch diesen Code: </p><br><pre> <code class="plaintext hljs">if (yvel &lt; 0.0F) { currentTop = releasedChild.getTop(); if (currentTop &gt; CustomBottomSheetBehavior.this.halfExpandedOffset) { top = CustomBottomSheetBehavior.this.halfExpandedOffset; targetState = 6; } else { top = 0; targetState = 3; } }</code> </pre> <br><p>  Jetzt schreitet unser BottomSheet in zwei Schritten voran und stoppt in der Mitte: </p><br><p>  ( <img src="https://habrastorage.org/webt/ld/xt/gk/ldxtgkizxvl9ostzhhjjdd6pahq.gif">  ) </p><br><h2 id="izmenenie-vysoty">  HÃ¶henÃ¤nderung </h2><br><p>  Aber das ist noch nicht alles. Sie kÃ¶nnen die durchschnittliche HÃ¶he anpassen.  Suchen Sie dazu alle in derselben Klasse die Initialisierung der Variablen halfExpandedOffset: </p><br><pre> <code class="plaintext hljs">this.halfExpandedOffset = this.parentHeight / 2;</code> </pre> <br><p>  Wenn wir uns diese Linie ansehen, wird klar, dass wir die HÃ¶he nach Belieben anpassen kÃ¶nnen, auch in Prozent.  PersÃ¶nlich habe ich es vorgezogen, mich so zu Ã¤ndern: </p><br><pre> <code class="plaintext hljs">this.halfExpandedOffset = this.parentHeight * 60 / 100;</code> </pre> <br><p>  ( <img src="https://habrastorage.org/webt/ln/hg/nk/lnhgnkwjsldyinnd0srhpmwzzn8.gif">  ) </p><br><p>  Mein BottomSheet erstreckt sich Ã¼ber 40% der HÃ¶he der Hauptansicht.  Das ist alles! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de452628/">https://habr.com/ru/post/de452628/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de452614/index.html">So starten Sie die Programmierung in Adobe Illustrator. Teil zwei</a></li>
<li><a href="../de452618/index.html">Was auf Google I / O 2019 gesagt wurde: Android 10, AR-Anwendungen und vieles mehr</a></li>
<li><a href="../de452620/index.html">Ableiten eines Aktionstyps mithilfe von Typescript</a></li>
<li><a href="../de452622/index.html">EinfÃ¼hrung in die Genomik fÃ¼r Programmierer</a></li>
<li><a href="../de452624/index.html">EinfÃ¼hrung in Spring Boot Actuator</a></li>
<li><a href="../de452630/index.html">Backup, Teil 2: Ãœbersicht und Testen von rsync-basierten Backup-Tools</a></li>
<li><a href="../de452638/index.html">Wie wir 2GIS unter CarPlay gestartet haben und uns immer noch entwirren</a></li>
<li><a href="../de452642/index.html">Die StÃ¤rke der Menge. Wie Chicago einen MÃ¼llroboter entwickelte - einen Flussreiniger</a></li>
<li><a href="../de452644/index.html">DevConf X Web Developer Conference - 21. Juni</a></li>
<li><a href="../de452646/index.html">Was das neuronale Netz auf dem ersten Foto eines Schwarzen Lochs sah</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>