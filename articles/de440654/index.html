<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍🏫 ⛳️ 😴 Python lernen: Argparse-Modul 👷🏻 🏳️ 👩🏽‍🤝‍👩🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie mit Python an der Datenverarbeitung und -analyse beteiligt sind, müssen Sie früher oder später über das Jupyter-Notizbuch hinausgehen und Ihr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python lernen: Argparse-Modul</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/440654/">  Wenn Sie mit Python an der Datenverarbeitung und -analyse beteiligt sind, müssen Sie früher oder später über das Jupyter-Notizbuch hinausgehen und Ihren Code in Skripte konvertieren, die über die Befehlszeile ausgeführt werden können.  Hier bietet sich das Argparse-Modul an.  Für Anfänger, die an das Jupyter-Notebook gewöhnt sind, bedeutet dieser Schritt, dass sie die Komfortzone verlassen und in eine neue Umgebung ziehen müssen.  Das Material, dessen Übersetzung wir heute veröffentlichen, wurde geschrieben, um einen solchen Übergang zu erleichtern. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/17b/7ac/55a/17b7ac55a4b8da7b7fdd54d354da19d9.jpg"></div><br>  <i><font color="#999999">Argparse-Modul</font></i> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Argparse-Modul</font> </h2><br>  Das Argparse-Modul kann mit den Naturgewalten verglichen werden, die Berggipfel errichtet haben, die über den Wolken aufragen.  Dank dieses Moduls in Skripten wird es möglich, mit dem zu arbeiten, was ohne seine Verwendung im Code dieser Skripte verborgen wäre. <br><br>  Es ist zu beachten, dass <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">argparse</a> das empfohlene Standard-Python-Bibliotheksmodul für die Arbeit mit Befehlszeilenargumenten ist.  Ich konnte kein gutes Argparse-Tutorial für Anfänger finden, deshalb habe ich beschlossen, selbst eines zu schreiben. <br><br><h2>  <font color="#3AC1EF">Leben jenseits des Jupyter-Notizbuchs</font> </h2><br>  Als ich im Python-Skript, das ich für ein Projekt in meiner Freizeit benötigte, zum ersten Mal auf Argparse stieß, dachte ich: „Was ist diese mysteriöse Konstruktion?“  Danach habe ich den Code schnell auf das Jupyter-Notizbuch übertragen, aber ein solcher Schritt erwies sich als irrational. <br><br>  Ich musste in der Lage sein, das Skript einfach auszuführen und nicht mit dem Jupyter-Notizbuch damit zu arbeiten.  Ein eigenständiges Skript, das das argparse-Modul verwendet, wäre viel einfacher zu verwenden, und es wäre einfacher, daran zu arbeiten, als sich auf die Funktionen des Jupyter-Notizbuchs zu verlassen.  Dann hatte ich es jedoch eilig und als ich mir die Argparse-Dokumentation ansah, konnte ich ihre Essenz nicht sofort erfassen, so dass ich nicht die Originalversion des Skripts verwendete. <br><br>  Seitdem habe ich Argparse herausgefunden und dieses Modul hat mir sehr gut gefallen.  Jetzt halte ich es für absolut wichtig.  Es ist jedoch nicht so schwierig, es zu meistern. <br><br><h2>  <font color="#3AC1EF">Warum brauchen wir das Argparse-Modul?</font> </h2><br>  Mit dem Argparse-Modul können Sie die Argumente analysieren, die an das Skript übergeben werden, wenn es über die Befehlszeile ausgeführt wird, und diese Argumente im Skript verwenden.  Das heißt, wir sprechen über die Tatsache, dass dieses Modul es dem Skript ermöglicht, einige Daten zum Zeitpunkt seines Starts bereitzustellen, und dass das Skript diese Daten während der Ausführung seines Codes verwenden kann.  Das Argparse-Modul ist ein Tool, mit dem Sie die Kommunikation zwischen dem Autor des Programms und demjenigen, der es verwendet, herstellen können, beispielsweise zwischen Ihnen, wenn Sie heute ein Skript schreiben, und Ihnen, wenn Sie es morgen starten, und etwas an es übergeben. <br><br>  Die Verwendung von argparse bedeutet, dass der Benutzer bei Bedarf das Verhalten des Skripts ändern oder gegebenenfalls einige Daten darauf übertragen muss. Wenn diese vom Skriptautor bereitgestellt werden, muss der Benutzer den Programmcode nicht bearbeiten.  Dadurch erhalten Skripte ein gewisses Maß an Flexibilität. <br><br><h2>  <font color="#3AC1EF">Beispiel</font> </h2><br>  Angenommen, Sie möchten ein Skript schreiben, um Videodateien mithilfe der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OpenCV-Bibliothek</a> in normale Bilder zu konvertieren.  Damit das Skript dieses Problem lösen kann, muss es den Ort kennen, an dem die Videodateien gespeichert sind, und den Ort, an dem Sie das fertige Bild ablegen müssen.  Das heißt, er benötigt Informationen zu zwei Ordnern, deren Pfade, was nicht sehr praktisch ist, im Skriptcode fest codiert werden können, oder, was viel besser ist, Sie können den Benutzer das Skript angeben lassen, indem Sie sie beim Ausführen des Skripts als Befehlszeilenargumente eingeben.  Um das Skript mit einer solchen Möglichkeit auszustatten, ist das argparse-Modul für uns nützlich.  So könnte der Abschnitt des Skripts aussehen (nennen wir dieses Skript <code>videos.py</code> ), in dem die Befehlszeilenargumente analysiert werden: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># videos.py import argparse parser = argparse.ArgumentParser(description='Videos to images') parser.add_argument('indir', type=str, help='Input dir for videos') parser.add_argument('outdir', type=str, help='Output dir for image') args = parser.parse_args() print(args.indir)</span></span></code> </pre> <br>  Hier wird am Anfang der Datei das Argparse-Modul importiert.  Anschließend wird mithilfe des Konstrukts <code>argparse.ArgumentParser()</code> ein <code>argparse.ArgumentParser()</code> mit seiner Beschreibung erstellt.  Als nächstes wird mit der Methode <code>parser.add_argument()</code> die <code>parser.add_argument()</code> Variable <code>indir</code> , in der der Pfad mit Videodateien in den Ordner geschrieben werden soll.  Gleichzeitig wird angezeigt, dass es sich um einen Zeichenfolgentyp handelt, und es werden auch Referenzinformationen dazu festgelegt.  Danach wird auf die gleiche Weise die Variable <code>outdir</code> , in der der Pfad zu dem Ordner <code>outdir</code> wird, in den das Skript die auf der Grundlage von Videodateien erstellten Bilder <code>outdir</code> muss.  Im nächsten Schritt wird das Ergebnis des Parsens der Befehlszeilenargumente in die Variable <code>args</code> .  Was beim Start an das Skript übergeben wird, ist jetzt als <code>indir</code> und <code>outdir</code> Eigenschaft des <code>args</code> Objekts verfügbar.  Jetzt können Sie mit diesen Werten arbeiten.  In diesem Fall drucken wir einfach an die Konsole, was im <code>indir</code> Argument an das Skript <code>indir</code> . <br><br>  So führen Sie dieses Skript über die Befehlszeile aus: <br><br><pre> <code class="python hljs">python videos.py /videos /images</code> </pre> <br>  Beachten Sie, dass die Zeilen <code>/videos</code> und <code>/images</code> nicht in Anführungszeichen gesetzt werden müssen.  Ein auf diese Weise gestartetes Skript gibt die Zeile <code>/videos</code> an das Terminal aus und bestätigt damit die Möglichkeit, die ihm in seinem Code übergebenen Argumente zu verwenden.  Dies ist die Magie von Argparse in Aktion. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a8/e05/614/9a8e056143381f2aba21f091e8ac522d.jpg"></div><br>  <i><font color="#999999">Die Magie des Parsens von Befehlszeilenargumenten</font></i> <br><br><h2>  <font color="#3AC1EF">Argparse Details</font> </h2><br>  Wir haben uns nur ein einfaches Argparse-Beispiel angesehen.  Lassen Sie uns nun einige Details zu Argparse besprechen. <br><br><h3>  <font color="#3AC1EF">▍ Positionsargumente</font> </h3><br>  Die Erstellung des Formulars <code>parser.add_argument('indir', type=str, help='Input dir for videos')</code> <code>videos.py</code> <code>parser.add_argument('indir', type=str, help='Input dir for videos')</code> aus dem Skript <code>videos.py</code> soll ein Positionsargument erstellen.  Beim Aufrufen eines Skripts ist die Reihenfolge wichtig, in der solche Argumente angegeben werden.  Das erste an das Skript übergebene Argument wird also zum ersten Positionsargument, das zweite Argument zum zweiten Positionsargument. <br><br>  Was passiert, wenn das Skript ohne Argumente ausgeführt wird, indem der Befehl <code>python videos.py</code> im Terminal ausgeführt wird? <br><br>  In diesem Fall wird die folgende Fehlermeldung angezeigt: <br><br><pre> <code class="python hljs">videos.py: error: the following arguments are required: indir, outdir</code> </pre> <br>  Infolgedessen stellt sich heraus, dass zum Ausführen eines Skripts, das die Verwendung von Positionsargumenten vorsieht, solche Argumente immer angegeben werden sollten, wenn es ausgeführt wird. <br><br><h3>  <font color="#3AC1EF">▍ Optionale Argumente</font> </h3><br>  Was passiert, wenn unser Skript mit dem Befehl <code>python videos.py --help</code> ausgeführt wird? <br><br>  Als Antwort werden Hilfeinformationen dazu angezeigt.  Dies sind genau die Informationen zu Positionsargumenten, die wir bei der Beschreibung der entsprechenden Variablen angegeben haben: <br><br><pre> <code class="python hljs">usage: videos.py [-h] indir outdir Videos to images positional arguments: indir       Input dir <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> videos outdir      Output dir <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> image optional arguments: -h, --help  show this help message <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> exit</code> </pre> <br>  Das Skript hat uns viele interessante Dinge darüber erzählt, was es vom Benutzer erwartet, und die <code>help</code> ist ein Beispiel für ein optionales Argument.  Beachten Sie, dass <code>--help</code> (oder <code>-h</code> ) das einzige optionale Standardargument ist, das wir bei der Arbeit mit argparse verwenden können. Wenn Sie jedoch andere optionale Argumente benötigen, können Sie diese selbst erstellen. <br><br>  Optionale Argumente werden auf die gleiche Weise wie Positionsargumente erstellt.  Der Hauptunterschied zwischen den Befehlen zum Erstellen besteht darin, dass diese Namen bei der Angabe der Namen solcher Argumente mit einer Folge von Zeichen beginnen <code>--</code> oder bei kurzen Argumenten mit einem Zeichen <code>-</code> .  Beispielsweise könnte ein optionales Argument wie folgt erstellt werden: <br><br><pre> <code class="python hljs">parser.add_argument(<span class="hljs-string"><span class="hljs-string">'-m'</span></span>, <span class="hljs-string"><span class="hljs-string">'--my_optional'</span></span>)</code> </pre> <br>  Hier ist ein Beispiel für das Erstellen und Verwenden optionaler Argumente.  Beachten Sie, dass wir bei der Beschreibung des optionalen Arguments seinen Typ als <code>int</code> .  Das heißt, es ist eine ganze Zahl.  In einer ähnlichen Situation können Sie andere Python-Typen verwenden. <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># my_example.py import argparse parser = argparse.ArgumentParser(description='My example explanation') parser.add_argument(   '--my_optional',   type=int,   default=2,   help='provide an integer (default: 2)' ) my_namespace = parser.parse_args() print(my_namespace.my_optional)</span></span></code> </pre> <br>  Das als <code>--my_optional</code> beschriebene <code>--my_optional</code> ist im Programm als Eigenschaft des <code>my_namespace</code> Objekts mit dem Namen <code>my_optional</code> . <br><br>  Optionalen Argumenten können die Werte zugewiesen werden, die sie standardmäßig haben.  Wenn in unserem Fall beim <code>my_example</code> des <code>my_example</code> Argument <code>my_example</code> kein Wert <code>my_example</code> wird, wird die Nummer 2 darauf geschrieben und an die Konsole ausgegeben.  Um den Wert dieses Arguments während der Skriptausführung festzulegen, können Sie die folgende Konstruktion verwenden: <br><br><pre> <code class="python hljs">python my_example.py  --my_optional=<span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Wofür kann Argparse noch verwendet werden?</font> </h2><br>  Mit dem argparse-Modul können Python-Anwendungen entwickelt werden, die in Docker-Containern gepackt werden sollen.  Wenn Sie beispielsweise beim Starten einer in einem Container gepackten Anwendung Befehlszeilenargumente übergeben müssen, können Sie diese in der Phase der Containerassemblierung in der Docker-Datei mithilfe der Anweisung <code>RUN</code> .  Sie können die <code>ENTRYPOINT</code> oder <code>ENTRYPOINT</code> Anweisungen verwenden, um Skripts während der Containerausführung auszuführen.  Details zu Dockerfiles finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br><h2>  <font color="#3AC1EF">Zusammenfassung</font> </h2><br>  Wir haben die grundlegenden Arbeitsmethoden mit dem argparse-Modul untersucht, mit denen Sie Ihre Skripte mit der Fähigkeit ausstatten können, Befehlszeilenargumente zu akzeptieren und zu verarbeiten.  Es ist zu beachten, dass die Argparse-Funktionen dort nicht enden.  Wenn Sie beispielsweise den Parameter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nargs</a> bei der Beschreibung von Argumenten verwenden, können <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie</a> mit Argumentlisten arbeiten, und mit dem Parameter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">options</a> können <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wertesätze</a> angeben, die Argumente annehmen können.  Nachdem Sie nun die Hauptfunktionen von Argparse beherrschen, können Sie dieses Modul ohne große Schwierigkeiten anhand der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> genauer untersuchen. <br><br>  Wenn Sie es gewohnt sind, mit dem Jupyter-Notizbuch zu arbeiten, und sich von dieser Praxis entfernen möchten, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">finden Sie hier</a> Materialien zum Arbeiten mit Umgebungsvariablen.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier ist das</a> Material zum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">repo2docker-Tool</a> , mit dem Sie Jupyter Notebook-Repositorys in Docker-Images konvertieren können. <br><br>  <b>Liebe Leser!</b>  Wie arbeiten Sie mit Befehlszeilenargumenten in Python-Skripten? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de440654/">https://habr.com/ru/post/de440654/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de440644/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends für die letzte Woche Nr. 352 (11. - 17. Februar 2019)</a></li>
<li><a href="../de440646/index.html">Frontend Weekly Digest (11. - 17. Februar 2019)</a></li>
<li><a href="../de440648/index.html">Überblick über die russische Gesetzgebung im Bereich der Barrierefreiheit im Internet</a></li>
<li><a href="../de440650/index.html">Wie Bewusstsein funktioniert: Schlussfolgerungen aus dem Buch von Alexander Nevzorov</a></li>
<li><a href="../de440652/index.html">Computervideo in 755 Megapixeln: Plenoptik gestern, heute und morgen</a></li>
<li><a href="../de440656/index.html">Professionelle Containerisierung von Node.js-Anwendungen mit Docker</a></li>
<li><a href="../de440658/index.html">Exploring Docker, Teil 4: Reduzieren der Größe von Bildern und Beschleunigen ihrer Montage</a></li>
<li><a href="../de440660/index.html">Docker lernen, Teil 5: Befehle</a></li>
<li><a href="../de440662/index.html">React Tutorial Teil 18: Die sechste Phase der Arbeit an einer TODO-Anwendung</a></li>
<li><a href="../de440666/index.html">Klassifizierung handschriftlicher Zeichnungen. Bericht in Yandex</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>