<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘µğŸ¿ ğŸ”‹ â¤µï¸ æˆ‘å¦‚ä½•ç¼–å†™æ ‡å‡†çš„C ++ 11åº“ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆboostå¦‚æ­¤ä»¤äººææƒ§ã€‚ ç¬¬4.3ç«  ğŸ“¿ â¿ âœğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å…ˆå‰éƒ¨åˆ†çš„æ‘˜è¦ 
 ç”±äºä½¿ç”¨C ++ 11ç¼–è¯‘å™¨çš„èƒ½åŠ›å—åˆ°é™åˆ¶ï¼Œå¹¶ä¸”ç”±äºç¼ºä¹æ›¿ä»£æ€§ï¼Œboostå¸Œæœ›åœ¨ç¼–è¯‘å™¨éšé™„çš„C ++ 98 / C ++ 03åº“ä¹‹ä¸Šç¼–å†™è‡ªå·±çš„æ ‡å‡†C ++ 11åº“å®ç°ã€‚ 

 å®ç°äº†static_assert ï¼Œ noexcept ï¼Œ countof ï¼Œå¹¶ä¸”åœ¨è€ƒè™‘äº†æ‰€æœ‰éæ ‡å‡†å®šä¹‰...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æˆ‘å¦‚ä½•ç¼–å†™æ ‡å‡†çš„C ++ 11åº“ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆboostå¦‚æ­¤ä»¤äººææƒ§ã€‚ ç¬¬4.3ç« </h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418347/"><img src="https://habrastorage.org/webt/lr/zq/if/lrzqifvfeajppx2fdvqbxnwf4ce.png" alt="æˆ‘ä»¬ç»§ç»­å†’é™©ã€‚" width="300" height="350" align="left"><h3> å…ˆå‰éƒ¨åˆ†çš„æ‘˜è¦ </h3><br> ç”±äºä½¿ç”¨C ++ 11ç¼–è¯‘å™¨çš„èƒ½åŠ›å—åˆ°é™åˆ¶ï¼Œå¹¶ä¸”ç”±äºç¼ºä¹æ›¿ä»£æ€§ï¼Œboostå¸Œæœ›åœ¨ç¼–è¯‘å™¨éšé™„çš„C ++ 98 / C ++ 03åº“ä¹‹ä¸Šç¼–å†™è‡ªå·±çš„æ ‡å‡†C ++ 11åº“å®ç°ã€‚ <br><br>  <b>å®ç°äº†static_assert</b> ï¼Œ <b>noexcept</b> ï¼Œ <b>countof</b> ï¼Œå¹¶ä¸”åœ¨è€ƒè™‘äº†æ‰€æœ‰éæ ‡å‡†å®šä¹‰å’Œç¼–è¯‘å™¨åŠŸèƒ½ä¹‹åï¼Œå‡ºç°äº†æœ‰å…³å½“å‰ç¼–è¯‘å™¨æ”¯æŒçš„åŠŸèƒ½çš„ä¿¡æ¯ã€‚  <b>åŒ…å«äº†</b>è‡ªå·±çš„<b>nullptr</b>å®ç°ï¼Œè¯¥å®ç°åœ¨ç¼–è¯‘é˜¶æ®µé€‰æ‹©ã€‚ <br><br> ç°åœ¨æ˜¯ä½¿ç”¨<b>type_traits</b>å’Œæ‰€æœ‰è¿™äº›â€œç‰¹æ®Šæ¨¡æ¿é­”æœ¯â€çš„æ—¶å€™äº†ã€‚ åœ¨æœ¬ç« çš„å‰é¢éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥äº†æˆ‘å¯¹æ ‡å‡†åº“åŸºæœ¬æ¨¡æ¿çš„å®ç°ï¼Œåœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºSFINAEæŠ€æœ¯ä¸æ¨¡æ¿çš„ç»“åˆä»¥åŠä¸€äº›ä»£ç ç”Ÿæˆã€‚ <br><br> é“¾æ¥åˆ°GitHubï¼Œä¸ºä¸è€çƒ¦çš„è¯»è€…å’Œéè¯»è€…æä¾›ä»Šå¤©çš„ç»“æœï¼š <br><blockquote>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¬¢è¿æœ‰å»ºè®¾æ€§çš„æ‰¹è¯„å’Œæ‰¹è¯„</a></b> </blockquote>  catä¸‹æœ‰æ›´å¤šçš„C ++æ¨¡æ¿ã€‚ <br><a name="habracut"></a><br><h4> ç›®å½• </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¼•è¨€</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬1ç« ã€‚Viam supervadet vadens</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬2ç« ã€‚#ifndef __CPP11_SUPPORT__ï¼ƒå®šä¹‰__COMPILER_SPECIFIC_BUILT_IN_AND_MACRO_HELL__ #endif</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬3ç« ã€‚æ‰¾åˆ°ç†æƒ³çš„nullptrå®ç°</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬4ç« C ++æ¨¡æ¿é­”æœ¯</a> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.1æˆ‘ä»¬ä»å°å¤„ç€æ‰‹</a> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.2å…³äºæ—¥å¿—ä¸ºæˆ‘ä»¬ç¼–è¯‘äº†å¤šå°‘ä¸ªå¥‡è¿¹èˆ¬çš„é”™è¯¯</a> <br>  .... <b>4.3æŒ‡é’ˆå’Œæ‰€æœ‰æ‰€æœ‰</b> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.4æ¨¡æ¿åº“è¿˜éœ€è¦ä»€ä¹ˆ</a> <br> ç¬¬äº”ç«  <br>  ... <br><br><h3> ç¬¬4ç« ã€‚æ¨¡æ¿â€œé­”æœ¯â€ C ++ã€‚ å»¶ç»­æ€§ </h3><br><h4>  4.3æŒ‡é’ˆå’Œæ‰€æœ‰æ‰€æœ‰ </h4><br> åœ¨è¿™ä¸€é˜¶æ®µï¼Œæˆ‘åªèƒ½è·å¾—æœ‰å…³ç±»å‹æ˜¯å¦ä¸º<i>std :: is_array</i>çš„æ•°ç»„çš„ä¿¡æ¯ï¼Œå¹¶ä¸”æœ‰å¯èƒ½å¯åŠ¨æŒ‡é’ˆæ¨¡æ¿ã€‚ å®æ–½ä¹Ÿæ˜¯å¾®ä¸è¶³é“çš„ï¼Œä½†å¹¶éæ²¡æœ‰å‡è®¾ã€‚ <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// is_array template&lt;class&gt; struct is_array : public false_type { }; template&lt;class _Tp, std::size_t _Size&gt; struct is_array&lt;_Tp[_Size]&gt; : public true_type { }; /*template&lt;class _Tp&gt; struct is_array&lt;_Tp[]&gt;: public true_type { }; */</span></span></code> </pre> <br> ç»™å®šé•¿åº¦çš„æ•°ç»„çš„ç®€å•æ¨¡æ¿ä¸“é—¨åŒ–å¯ä»¥â€œæ•è·â€æ‰€æœ‰ç±»å‹çš„æ•°ç»„ï¼Œä½†æ˜¯ï¼Œä¸å®Œæ•´çš„ç±»å‹<i>T []</i> ï¼ˆæœªæŒ‡å®šé•¿åº¦çš„æ•°ç»„ï¼‰ä¼šå¼•èµ·é—®é¢˜ã€‚ äº‹å®æ˜¯ï¼Œåœ¨ä¸“é—¨è®¾è®¡æ¨¡æ¿æ—¶ï¼ŒæŸäº›ç¼–è¯‘å™¨ï¼ˆC ++ Builderï¼‰æœªå®šä¹‰æ­¤ç±»å‹ï¼Œå¹¶ä¸”æˆ‘åœ¨è¿™é‡Œè¿˜æ²¡æœ‰æ‰¾åˆ°é€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚ <br><br> åœ¨åº“è¢«â€œæ•™å¯¼â€ä»¥å®šä¹‰å†…ç½®ç±»å‹ï¼Œç±»å‹å­˜å‚¨å™¨ä¸­çš„å¯¹é½æ–¹å¼ï¼Œåœ¨ç¼–è¯‘æ—¶é€šè¿‡æ¨¡æ¿ä½¿ç”¨ç±»å‹ä¿®é¥°ç¬¦å’Œå…¶ä»–åŸºæœ¬åŠŸèƒ½ä¹‹åï¼Œå°±è¯¥ä½¿ç”¨æŒ‡é’ˆå’Œå¼•ç”¨äº†ã€‚ <br><br><img src="https://habrastorage.org/webt/ti/rp/mi/tirpmiwggsavcvlxyjbo8dlv5ee.png" alt="å›¾ç‰‡" width="300" height="280" align="left"> åœ¨C ++ä¸­ï¼Œå¯ä»¥åŒºåˆ†ä¸¤ç»„æŒ‡é’ˆ-æŒ‡å‘ç±»æˆå‘˜çš„æŒ‡é’ˆå’ŒæŒ‡å‘å…¶ä»–å¯¹è±¡çš„æŒ‡é’ˆã€‚ ä¸ºä»€ä¹ˆè¿™ç§åˆ†ç¦»å¯¹äºæ ‡å‡†åº“çš„è¿›ä¸€æ­¥å®æ–½å¾ˆé‡è¦ï¼Ÿ äº‹å®æ˜¯ï¼ŒæŒ‡å‘ç±»æˆå‘˜çš„æŒ‡é’ˆç”±äºå­˜åœ¨<b>thisè€Œ</b>ä¸å…¶ä»–æŒ‡é’ˆæœ‰æ˜¾ç€å·®å¼‚ï¼Œå³ æŒ‡å‘æ­¤ç±»çš„å¯¹è±¡çš„æŒ‡é’ˆã€‚ è€Œä¸”æŒ‰ç…§æ ‡å‡†ï¼ŒæŒ‡å‘ç±»æˆå‘˜çš„æŒ‡é’ˆå…·æœ‰ç”¨äºå®šä¹‰çš„å•ç‹¬è¯­æ³•ï¼Œæ˜¯å•ç‹¬çš„ç±»å‹ï¼Œå¹¶ä¸”ä¸èƒ½é€šè¿‡å¸¸è§„æŒ‡é’ˆè¡¨ç¤ºã€‚ å®é™…ä¸Šï¼Œè¿™è½¬åŒ–ä¸ºä»¥ä¸‹äº‹å®ï¼šæŒ‡å‘ç±»æˆå‘˜çš„æŒ‡é’ˆçš„å¤§å°é€šå¸¸å¤§äºå¸¸è§„æŒ‡é’ˆçš„å¤§å°ï¼ˆ <i>==</i> <b>sizeofï¼ˆvoid *ï¼‰</b> ï¼‰ï¼Œå› ä¸º ä¸ºäº†å®ç°ç±»çš„è™šæ‹Ÿæˆå‘˜å‡½æ•°ä»¥åŠå­˜å‚¨<b>this</b>æŒ‡é’ˆï¼Œç¼–è¯‘å™¨é€šå¸¸å°†æŒ‡å‘ç±»æˆå‘˜çš„æŒ‡é’ˆä½œä¸ºç»“æ„å®ç°ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äº†è§£</a>è™šå‡½æ•°å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">structure</a> ï¼‰ã€‚ æ ¹æ®æ ‡å‡†ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªè¡Œå†³å®šæ˜¯å¦ç»™å‡ºæŒ‡å‘ç±»æˆå‘˜çš„æŒ‡é’ˆçš„æ–¹å¼ï¼Œä½†æ˜¯åœ¨è€ƒè™‘å…¶ä»–ä»£ç æ—¶ï¼Œæˆ‘ä»¬ä¼šè®°ä½å¤§å°å’Œè¡¨ç¤ºæ–¹å¼ä¸Šçš„è¿™ç§å·®å¼‚ã€‚ <br><br> è¦å®šä¹‰æŒ‡å‘å¯¹è±¡çš„å¸¸è§„æŒ‡é’ˆï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªç®€å•çš„<i>is_pointer</i>æ¨¡æ¿ï¼Œä»¥åŠä¸€ä¸ª<i>is_lvalue_reference</i>æ¨¡æ¿ç”¨äºå¯¹è±¡å¼•ç”¨ï¼ˆ <i>æˆ‘ä»¬</i>å°†is_rvalue_reference <i>æ”¾åœ¨ä¸€è¾¹</i> ï¼Œå› ä¸ºç›´åˆ°ç¬¬11ä¸ªæ ‡å‡†ï¼Œéƒ½æ²¡æœ‰<i>&amp;&amp;</i>è¿ç®—ç¬¦ä»¥åŠæ•´ä¸ªmoveè¯­ä¹‰ï¼‰ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_pointer_helper</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> false_type { }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_pointer_helper</span></span></span><span class="hljs-class">&lt;_Tp*&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type { }; } <span class="hljs-comment"><span class="hljs-comment">// is_pointer template&lt;class _Tp&gt; struct is_pointer : public detail::_is_pointer_helper&lt;typename remove_cv&lt;_Tp&gt;::type&gt;::type { }; // is_lvalue_reference template&lt;class&gt; struct is_lvalue_reference : public false_type { }; template&lt;class _Tp&gt; struct is_lvalue_reference&lt;_Tp&amp;&gt; : public true_type { };</span></span></code> </pre><br> è¿™é‡Œä¸å†æœ‰ä»»ä½•æ ¹æœ¬ä¸Šçš„æ–°å†…å®¹ï¼Œæ‰€æœ‰ç›¸åŒçš„æ“ä½œéƒ½åœ¨æœ¬ç« çš„å‰é¢éƒ¨åˆ†è¿›è¡Œè¿‡ã€‚ è®©æˆ‘ä»¬ç»§ç»­å®šä¹‰å¯¹è±¡çš„æŒ‡é’ˆ-ç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å‡½æ•°çš„æŒ‡é’ˆã€‚ <br><blockquote> é‡è¦çš„æ˜¯è¦äº†è§£ï¼Œæ ¹æ®æ ‡å‡†ï¼Œç±»çš„å‡½æ•°å’Œæˆå‘˜å‡½æ•°æ˜¯å®Œå…¨ä¸åŒçš„å®ä½“ï¼š <br><br><ul><li> ç¬¬ä¸€ä¸ªæŒ‡é’ˆå°†æ˜¯æ™®é€šçš„ï¼ˆæŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆï¼‰ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆå°†å…·æœ‰æŒ‡å‘ç±»æˆå‘˜çš„æŒ‡é’ˆã€‚ </li></ul><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> (*func_ptr)(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  'func_ptr'    'void func(int){}' void (ClassType::*mem_func_ptr)(int); //  'mem_func_ptr'  -  'ClassType'  'void ClassType::func(int){}'</span></span></code> </pre><br><ul><li> æ‚¨å¯ä»¥åˆ›å»ºåˆ°ç¬¬ä¸€ä¸ªé“¾æ¥ï¼ˆå¯¹è±¡é“¾æ¥ï¼‰ï¼Œä½†æ˜¯ä¸èƒ½åˆ›å»ºç¬¬äºŒä¸ªé“¾æ¥ã€‚ </li></ul><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> (&amp;func_ref)(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  'func_ref'    'void func(int){}' //-------------------- //   -    </span></span></code> </pre></blockquote> åœ¨è¿™é‡Œï¼Œæˆ‘ä»…æåŠä¸€äº›æœ‰å…³ä»£ç ç”Ÿæˆçš„å†…å®¹ã€‚ ç”±äºåœ¨C ++ 11ä¹‹å‰è¿˜æ²¡æœ‰å‚æ•°æ•°ç›®å¯å˜çš„æ¨¡æ¿ï¼Œå› æ­¤å¯ä»¥<a href="">é€šè¿‡</a>åœ¨è¾“å…¥ç«¯<a href="">å…·æœ‰å¤§é‡å‚æ•°çš„ä¸»æ¨¡æ¿è¿›è¡Œç‰¹æ®ŠåŒ–</a>å¹¶é€šè¿‡é»˜è®¤çš„ä¼ªå‚æ•°å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–æ¥<a href="">ç¡®å®š</a>æ‰€æœ‰å‚æ•°å¯èƒ½ä¸åŒ<a href="">çš„æ¨¡æ¿</a> ã€‚ åŒæ ·çš„æƒ…å†µä¹Ÿé€‚ç”¨äºå‡½æ•°é‡è½½ï¼Œä¾‹å¦‚ ä¹Ÿæ²¡æœ‰å¸¦æœ‰å¯å˜æ•°é‡å‚æ•°çš„å®ã€‚ ç”±äºç”¨æ‰‹ç¼–å†™äº†60-70è¡Œç›¸åŒç±»å‹çš„æ¨¡æ¿ä¸“ä¸šåŒ–ä»£ç ï¼Œå› æ­¤é‡è½½å‡½æ•°æ˜¯ä¸€é¡¹ç›¸å½“ä¹å‘³ä¸”æ— ç”¨çš„ä»»åŠ¡ï¼Œè€Œä¸”è¿˜å……æ»¡äº†çŠ¯é”™è¯¯çš„å¯èƒ½æ€§ï¼Œä¸ºæ­¤æˆ‘ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„æ¨¡æ¿å’Œå‡½æ•°é‡è½½ä»£ç ç”Ÿæˆå™¨ã€‚ æˆ‘å†³å®šé™åˆ¶è‡ªå·±å°†å‡½æ•°å®šä¹‰ä¸º24ä¸ªå‚æ•°ï¼Œè¿™åœ¨ä»£ç ä¸­çœ‹èµ·æ¥å¾ˆéº»çƒ¦ï¼Œä½†ç®€å•æ˜äº†ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_ptr_helper</span></span></span><span class="hljs-class"> :</span></span> false_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class"> &gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_ptr_helper</span></span></span><span class="hljs-class">&lt;R(*)()&gt; :</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class"> &gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_ptr_helper</span></span></span><span class="hljs-class">&lt;R(*)(...)&gt; :</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T0</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_ptr_helper</span></span></span><span class="hljs-class">&lt;R(*)(T0)&gt; :</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T0</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_ptr_helper</span></span></span><span class="hljs-class">&lt;R(*)(T0 ...)&gt; :</span></span> true_type {};</code> </pre><br>  <b>...</b> <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T0</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T1</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T2</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T3</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T4</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T5</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T6</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T7</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T8</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T9</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T10</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T11</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T12</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T13</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T14</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T15</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T16</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T17</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T18</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T19</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T20</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T21</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T22</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T23</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T24</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_ptr_helper</span></span></span><span class="hljs-class">&lt;R(*)(T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24)&gt; :</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T0</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T1</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T2</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T3</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T4</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T5</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T6</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T7</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T8</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T9</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T10</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T11</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T12</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T13</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T14</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T15</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T16</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T17</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T18</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T19</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T20</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T21</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T22</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T23</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T24</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_ptr_helper</span></span></span><span class="hljs-class">&lt;R(*)(T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24 ...)&gt; :</span></span> true_type {}; }</code> </pre><br> æˆ‘ä»¬ä¸ºSFINAEæŠ€æœ¯å®šä¹‰äº†ä¸Šä¸€ç« ä¸­æˆ‘ä»¬ç†Ÿæ‚‰çš„ç±»å‹ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-comment"><span class="hljs-comment">// SFINAE magic typedef char _yes_type; struct _no_type { char padding[8]; }; }</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">ä¸ºäº†æ–¹ä¾¿èµ·è§è¿˜æœ‰ä¸€äº›å®</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _IS_MEM_FUN_PTR_CLR \ template </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(T::*const volatile*)(ARGS)); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(T::*const volatile*)(ARGS...)); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(T::*const volatile*)(ARGS) const); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(T::*const volatile*)(ARGS) volatile); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(T::*const volatile*)(ARGS) const volatile); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(T::*const volatile*)(ARGS...) const); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(T::*const volatile*)(ARGS...) volatile); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(T::*const volatile*)(ARGS...) const volatile); #ifdef _STDEX_CDECL _no_type _STDEX_CDECL _is_mem_function_ptr(...); #define _IS_MEM_FUN_CDECL_PTR \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__cdecl T::*const volatile*)(ARGS)); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__cdecl T::*const volatile*)(ARGS) const); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__cdecl T::*const volatile*)(ARGS) volatile); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__cdecl T::*const volatile*)(ARGS) const volatile); #define _IS_MEM_FUN_STDCALL_PTR \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__stdcall T::*const volatile*)(ARGS)); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__stdcall T::*const volatile*)(ARGS) const); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__stdcall T::*const volatile*)(ARGS) volatile); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__stdcall T::*const volatile*)(ARGS) const volatile); #define _IS_MEM_FUN_FASTCALL_PTR \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__fastcall T::*const volatile*)(ARGS)); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__fastcall T::*const volatile*)(ARGS) const); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__fastcall T::*const volatile*)(ARGS) volatile); \ template &lt;class R, class T TYPES &gt; \ _yes_type _is_mem_function_ptr(R(__fastcall T::*const volatile*)(ARGS) const volatile); #else _no_type _is_mem_function_ptr(...); #define _IS_MEM_FUN_CDECL_PTR #define _IS_MEM_FUN_STDCALL_PTR #define _IS_MEM_FUN_FASTCALL_PTR #endif #define _IS_MEM_FUN_PTR \ _IS_MEM_FUN_PTR_CLR \ _IS_MEM_FUN_CDECL_PTR \ _IS_MEM_FUN_STDCALL_PTR \ _IS_MEM_FUN_FASTCALL_PTR }</span></span></span></span></code> </pre><br></div></div><br> å®šä¹‰äº†å®ï¼Œä»¥ä¾¿é‡æ–°å®šä¹‰<b>TYPES</b>å’Œ<b>ARGS</b>å®šä¹‰ä¸ºç±»å‹å’Œå‚æ•°çš„åˆ—è¡¨ï¼Œç„¶åç”¨<b>_IS_MEM_FUN_PTR</b>å®æ›¿æ¢é¢„å¤„ç†å™¨ä¸ºæ‰€æœ‰å¯èƒ½çš„å‡½æ•°ç±»å‹ç”Ÿæˆå®šä¹‰ï¼Œç›¸å¯¹æ–¹ä¾¿ã€‚ è¿˜å€¼å¾—å…³æ³¨çš„äº‹å®æ˜¯ï¼Œå¯¹äºMicrosoftçš„ç¼–è¯‘å™¨æ¥è¯´ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è°ƒç”¨åè®®</a> ï¼ˆ <b>__fastcall</b> ï¼Œ <b>__stdcall</b>å’Œ<b>__cdecl</b> ï¼‰ä¹Ÿ<b>å¾ˆé‡è¦</b> ï¼Œå› ä¸º ä½¿ç”¨ä¸åŒçš„çº¦å®šï¼Œå‡½æ•°å°†æœ‰æ‰€ä¸åŒï¼Œå°½ç®¡å®ƒä»¬å…·æœ‰ç›¸åŒçš„å‚æ•°é›†å’Œè¿”å›å€¼ã€‚ ç»“æœï¼Œæ•´ä¸ªå®å®è®¾è®¡éå¸¸ç´§å‡‘åœ°ä½¿ç”¨ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TYPES #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ARGS _IS_MEM_FUN_PTR #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> TYPES #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> ARGS #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TYPES , class T0 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ARGS T0 _IS_MEM_FUN_PTR #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> TYPES #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> ARGS #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TYPES , class T0, class T1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ARGS T0, T1 _IS_MEM_FUN_PTR #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> TYPES #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> ARGS</span></span></code> </pre><br>  <b>...</b> <br><pre> <code class="cpp hljs"> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TYPES , class T0, class T1, class T2, class T3, class T4, class T5, class T6, class T7, class T8, class T9, class T10, class T11, class T12, class T13, class T14, class T15, class T16, class T17, class T18, class T19, class T20, class T21, class T22, class T23, class T24 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ARGS T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24 _IS_MEM_FUN_PTR #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> TYPES #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> ARGS </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//      define  : #undef _IS_MEM_FUN_PTR #undef _IS_MEM_FUN_PTR_CLR #undef _IS_MEM_FUN_CDECL_PTR #undef _IS_MEM_FUN_STDCALL_PTR #undef _IS_MEM_FUN_FASTCALL_PTR }</span></span></span></span></code> </pre><br> ç°åœ¨ï¼Œæ‰€æœ‰å†…å®¹éƒ½å†™æˆï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bool</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsRef</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_mem_function_ptr_impl</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> _Tp *p; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> value = (<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(_is_mem_function_ptr(_is_mem_function_ptr_impl::p)) == <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(_yes_type)); <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> integral_constant&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>, _is_mem_function_ptr_impl::value == <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)&gt;::type type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_mem_function_ptr_impl</span></span></span><span class="hljs-class">&lt;_Tp, true&gt;:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> false_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_mem_function_ptr_helper</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> _is_mem_function_ptr_impl&lt;_Tp, is_reference&lt;_Tp&gt;::value&gt;::type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bool</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsMemberFunctionPtr</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_chooser_impl</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> false_type { }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_chooser_impl</span></span></span><span class="hljs-class">&lt;_Tp, false&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> _is_function_ptr_helper&lt;_Tp*&gt; { }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bool</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsRef</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">true</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_chooser</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> false_type { }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function_chooser</span></span></span><span class="hljs-class">&lt;_Tp, false&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> value = _is_function_chooser_impl&lt;_Tp, _is_mem_function_ptr_helper&lt;_Tp&gt;::value&gt;::value; }; }</code> </pre><br> è¦æ£€æŸ¥ç±»å‹æ˜¯å¦ä¸ºç±»çš„æˆå‘˜å‡½æ•°ï¼Œé¦–å…ˆè¦æ£€æŸ¥è¯¥ç±»å‹æ˜¯å¦ä¸ºå¼•ç”¨ã€‚ ç„¶åï¼Œå°†åˆ›å»ºæ­¤ç±»å‹çš„æŒ‡é’ˆå¹¶å°†å…¶æ›¿æ¢ä¸ºprobeå‡½æ•°ã€‚ ä½¿ç”¨SFINAEæŠ€æœ¯ï¼Œç¼–è¯‘å™¨ä¸ºæ­¤ç±»æŒ‡é’ˆé€‰æ‹©æ¢é’ˆå‡½æ•°çš„å¿…è¦é‡è½½ï¼Œå¹¶æ ¹æ®ä¸<i>_yes_type</i>çš„æ¯”è¾ƒç»“æœå½¢æˆç»“æœã€‚ <br><br> åŸºäºå¯¹ç±»çš„æˆå‘˜å‡½æ•°çš„æ£€æŸ¥ï¼Œå¯¹ç±»å‹æ˜¯å¦å±äºå‡½æ•°ç±»å‹è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ æˆ‘ä»¬æ£€æŸ¥ç±»å‹æ˜¯å¦ä¸ºå¼•ç”¨ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¸ºè¯¥ç±»å‹çš„æŒ‡é’ˆå¯»æ‰¾åˆé€‚çš„æ¨¡æ¿æ¢é’ˆç»“æ„ä¸“ä¸šåŒ–ï¼Œå¯¹äºå…·æœ‰æœ€å¤š24ä¸ªå‚æ•°çš„ä»»ä½•å‡½æ•°æŒ‡é’ˆï¼Œå…¶<i>å‡ä¸ºtrue_type</i> ã€‚ <br><br> ç°åœ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ç»“æœæ¥å®ç°<i>is_function</i> ã€‚ åœ¨è¿™é‡Œï¼Œç”±äºä¸<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Šä¸€éƒ¨åˆ†</a>ç›¸åŒçš„åŸå› ï¼Œæˆ‘æ— æ³•ä»<i>integral_constant</i>ç»§æ‰¿æ­¤ç»“æ„ï¼Œå› æ­¤â€œæ¨¡æ‹Ÿâ€äº†<i>integrated_constant</i>çš„è¡Œä¸ºã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// is_function template&lt;class _Tp&gt; struct is_function { static const bool value = detail::_is_function_chooser&lt;_Tp, is_reference&lt;_Tp&gt;::value&gt;::value; typedef const bool value_type; typedef integral_constant&lt;bool, is_function::value == bool(true)&gt; type; operator value_type() const { // return stored value return (value); } value_type operator()() const { // return stored value return (value); } };</span></span></code> </pre><br> ä¸ºäº†å®ç°<i>is_member_function_pointerï¼Œ</i>å®ƒä»ç„¶æ›´åŠ ç®€å•ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// is_member_function_pointer template&lt;class _Tp&gt; struct is_member_function_pointer : public detail::_is_mem_function_ptr_helper&lt;typename remove_cv&lt;_Tp&gt;::type&gt;::type { };</span></span></code> </pre><br> æ­¤å¤–ï¼ŒåŸºäºè¿™äº›æ¨¡å¼ï¼ŒåŸåˆ™ä¸Šæˆ‘ä»¬å¯ä»¥ç¡®å®šç±»å‹æ˜¯å¦æ˜¯è¯¥ç±»çš„æˆå‘˜ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_member_object_pointer_impl1</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> _not_&lt; _or_&lt;_is_function_ptr_helper&lt;_Tp&gt;, _is_mem_function_ptr_helper&lt;_Tp&gt; &gt; &gt;::type { }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_member_object_pointer_impl2</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> false_type { }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_member_object_pointer_impl2</span></span></span><span class="hljs-class">&lt;_Tp _Cp::*&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type { }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_member_object_pointer_helper</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> _and_&lt;_is_member_object_pointer_impl1&lt;_Tp&gt;, _is_member_object_pointer_impl2&lt;_Tp&gt; &gt;::type {}; } <span class="hljs-comment"><span class="hljs-comment">// is_member_object_pointer template&lt;class _Tp&gt; struct is_member_object_pointer : public detail::_is_member_object_pointer_helper&lt;typename remove_cv&lt;_Tp&gt;::type&gt;::type { };</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">ä»ç¬¬ä¸€éƒ¨åˆ†å¼€å§‹å¯¹ç±»å‹ä½¿ç”¨'and'ï¼Œ'or'ï¼Œ'not'é€»è¾‘è¿ç®—</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void_type</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-comment"><span class="hljs-comment">//typedef void void_type; template&lt;class _B1 = void_type, class _B2 = void_type, class _B3 = void_type, class _B4 = void_type&gt; struct _or_ : public conditional&lt;_B1::value, _B1, _or_&lt;_B2, _or_&lt;_B3, _B4&gt; &gt; &gt;::type { }; template&lt;&gt; struct _or_&lt;void_type, void_type, void_type, void_type&gt;; template&lt;class _B1&gt; struct _or_&lt;_B1, void_type, void_type, void_type&gt; : public _B1 { }; template&lt;class _B1, class _B2&gt; struct _or_&lt;_B1, _B2, void_type, void_type&gt; : public conditional&lt;_B1::value, _B1, _B2&gt;::type { }; template&lt;class _B1, class _B2, class _B3&gt; struct _or_&lt;_B1, _B2, _B3, void_type&gt; : public conditional&lt;_B1::value, _B1, _or_&lt;_B2, _B3&gt; &gt;::type { }; template&lt;class _B1 = void_type, class _B2 = void_type, class _B3 = void_type, class _B4 = void_type&gt; struct _and_; template&lt;&gt; struct _and_&lt;void_type, void_type, void_type, void_type&gt;; template&lt;class _B1&gt; struct _and_&lt;_B1, void_type, void_type, void_type&gt; : public _B1 { }; template&lt;class _B1, class _B2&gt; struct _and_&lt;_B1, _B2, void_type, void_type&gt; : public conditional&lt;_B1::value, _B2, _B1&gt;::type { }; template&lt;class _B1, class _B2, class _B3&gt; struct _and_&lt;_B1, _B2, _B3, void_type&gt; : public conditional&lt;_B1::value, _and_&lt;_B2, _B3&gt;, _B1&gt;::type { }; template&lt;class _Pp&gt; struct _not_ { static const bool value = !bool(_Pp::value); typedef const bool value_type; typedef integral_constant&lt;bool, _not_::value == bool(true)&gt; type; operator value_type() const { // return stored value return (value); } value_type operator()() const { // return stored value return (value); } }; }</span></span></code> </pre><br></div></div><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹ç±»å‹ä½¿ç”¨é€»è¾‘è¿ç®—ï¼Œè¿™äº›è¿ç®—åœ¨<i>æ¡ä»¶</i>æ¨¡æ¿çš„å¸®åŠ©<i>ä¸‹</i>æœ€ç»ˆé€‰æ‹©åˆé€‚çš„æ¨¡æ¿ç±»å‹ã€‚ å› æ­¤ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µï¼Œæ¨¡æ¿ç¼–ç¨‹çš„æ‰€æœ‰è¾‰ç…Œä¹‹å¤„ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†æœ‰å…³ç±»å‹æ˜¯å¦ä¸ºç±»æˆå‘˜çš„ä¿¡æ¯ã€‚ ç›¸å½“â€œæ„¤æ€’â€ï¼Œä½†å¤šä¹ˆå£®è§‚å’Œæœ‰æ•ˆï¼ <br><br> åœ¨ç›¸åŒçš„é€»è¾‘å…ƒç´ ä¸Šè¿›è¡Œæ›´å¤šçš„çº¯æ¨¡æ¿ç¼–ç¨‹ï¼Œæˆ‘ä»¬å…·æœ‰<i>is_fundamental</i> ï¼Œ <i>is_compound</i>ç­‰ã€‚ è¿¹è±¡ï¼ˆè¿™ä½¿æˆ‘é«˜å…´ï¼Œä½†æ˜¯æ‚¨å‘¢ï¼Ÿï¼‰ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// is_arithmetic template&lt;class _Tp&gt; struct is_arithmetic : public detail::_or_&lt;is_integral&lt;_Tp&gt;, is_floating_point&lt;_Tp&gt; &gt;::type { }; // is_fundamental template&lt;class _Tp&gt; struct is_fundamental : public detail::_or_&lt;is_arithmetic&lt;_Tp&gt;, is_void&lt;_Tp&gt;, is_null_pointer&lt;_Tp&gt; &gt;::type {}; // is_object template&lt;class _Tp&gt; struct is_object : public detail::_not_&lt; detail::_or_&lt; is_function&lt;_Tp&gt;, is_reference&lt;_Tp&gt;, is_void&lt;_Tp&gt; &gt; &gt;::type {}; // is_scalar template&lt;class _Tp&gt; struct is_scalar : public detail::_or_&lt;is_arithmetic&lt;_Tp&gt;, is_pointer&lt;_Tp&gt;, is_member_pointer&lt;_Tp&gt;, is_null_pointer&lt;_Tp&gt;/*, is_enum&lt;_Tp&gt;*/ &gt;::type {}; // is_compound template&lt;class _Tp&gt; struct is_compound: public detail::_not_&lt;is_fundamental&lt;_Tp&gt; &gt;::type { };</span></span></code> </pre><blockquote> ç»†å¿ƒçš„è¯»è€…ä¼šæ³¨æ„åˆ°<i>is_enum</i>çš„å®šä¹‰<i>å·²è¢«</i>æ³¨é‡Šæ‰ã€‚ äº‹å®æ˜¯æˆ‘æ²¡æœ‰æ‰¾åˆ°å°†<b>æšä¸¾</b>ä¸å…¶ä»–ç±»å‹åŒºåˆ†å¼€çš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºå¦‚æœä¸ä½¿ç”¨ä¾èµ–äºç¼–è¯‘å™¨çš„å®ï¼Œè¿™æ˜¯å¯è¡Œçš„ã€‚ ä¹Ÿè®¸ä¸€ä½ç»†å¿ƒè€Œæœ‰è§è¯†çš„è¯»è€…ä¼šåœ¨è¿™æ–¹é¢å‘Šè¯‰æ‚¨æ‚¨çš„æ–¹å¼æˆ–æ€è·¯ã€‚ </blockquote> è¦ç¡®å®šç±»å‹æ˜¯ç±»è¿™ä¸€äº‹å®ï¼Œç°åœ¨å°±ä¸å†éœ€è¦ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bool</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsReference</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_class_helper</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> integral_constant&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>&gt; type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_class_helper</span></span></span><span class="hljs-class">&lt;_Tp, false&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> integral_constant&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>, (is_scalar&lt;_Tp&gt;::value == <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)) <span class="hljs-comment"><span class="hljs-comment">//&amp;&amp; !is_union&lt;_Tp&gt;::value &gt;::value &amp;&amp; (is_array&lt;_Tp&gt;::value == bool(false)) &amp;&amp; (is_void&lt;_Tp&gt;::value == bool(false)) &amp;&amp; (is_function&lt;_Tp&gt;::value == bool(false))&gt; type; }; } // is_class template&lt;class _Tp&gt; struct is_class : public detail::_is_class_helper&lt;typename remove_cv&lt;_Tp&gt;::type, is_reference&lt;_Tp&gt;::value&gt;::type { };</span></span></code> </pre><br> ä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥çš„ï¼Œä½†æ˜¯åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒC ++ä¸­çš„å¹¶é›†ä¸èƒ½ä¸ç±»åŒºåˆ«å¼€æ¥ã€‚ å› ä¸ºå®ƒä»¬çš„â€œå¤–éƒ¨è¡¨ç°å½¢å¼â€éå¸¸ç›¸ä¼¼ï¼Œå¹¶ä¸”æ²¡æœ‰ç¼–è¯‘é”™è¯¯ï¼Œæˆ‘æ— æ³•éªŒè¯å·®å¼‚ï¼ˆä¾‹å¦‚ï¼Œæ— æ³•ä»<b>union</b>ç»§æ‰¿ï¼‰ã€‚ ä¹Ÿè®¸æœ‰äººä¼šå‘Šè¯‰æ‚¨ä¸€ä¸ªæ£˜æ‰‹çš„æ–¹æ³•æ¥ç¡®å®šç¼–è¯‘æ—¶çš„å¹¶é›†ï¼Œç„¶å<i>is_class</i>å°†å®Œå…¨ç¬¦åˆæ ‡å‡†ã€‚ <br><br> åœ¨æœ¬ç« çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ€åä¸€éƒ¨åˆ†</a> ï¼Œæˆ‘å°†è®¨è®ºå¦‚ä½•å®ç°<i>std ::è¡°å‡</i>å’Œ<i>std :: common_type</i> ï¼Œä»¥åŠè¿˜æœ‰å“ªäº›è¦æ·»åŠ åˆ°<b>type_traitsä¸­</b> ã€‚ <br><br> è°¢è°¢æ‚¨çš„å…³æ³¨ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN418347/">https://habr.com/ru/post/zh-CN418347/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN418335/index.html">ç§¯æHack Days 8çš„å¯¹æŠ—ï¼šè§£ææ”»å‡»é“¾</a></li>
<li><a href="../zh-CN418337/index.html">çƒ­é—¨ï¼Œå¤å­£DataGrip 2018.2</a></li>
<li><a href="../zh-CN418339/index.html">â€œæ‰‹åŠ¨â€æ“çºµå™¨</a></li>
<li><a href="../zh-CN418341/index.html">ç³»ç»Ÿç®¡ç†å‘˜æ—¥å¿«ä¹ï¼ å…·æœ‰æ„ä¹‰çš„è´ºå¡</a></li>
<li><a href="../zh-CN418345/index.html">ä¿¡æ¯äº¤æ¢æ ¼å¼çš„æ–‡æ¡£-ç®€ä¾¿</a></li>
<li><a href="../zh-CN418349/index.html">Azure KubernetesæœåŠ¡ï¼ˆAKSï¼‰å’ŒPowerShell</a></li>
<li><a href="../zh-CN418353/index.html">æ€ç»´å¯¼å›¾è€Œä¸æ˜¯æµ‹è¯•ç”¨ä¾‹ï¼Œæˆ–è€…å¯è§†åŒ–å¦‚ä½•ä½¿æ‚¨æ›´å¿«åœ°æµ‹è¯•åº”ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN418355/index.html">æŒ‰å“ˆå¸Œè¡¨æ’åºï¼ˆä¹ŸæŒ‰æ ‘æ•°å’ŒHashMapæ’åºï¼‰</a></li>
<li><a href="../zh-CN418357/index.html">DEFCON 23.â€œå¯¹ä¸“ä¸šç½‘ç»œè·Ÿè¸ªè€…çš„è‡ªç™½ã€‚â€ è‚¯Â·å¨æ–¯æ±€</a></li>
<li><a href="../zh-CN418359/index.html">é‡‘èç§‘æŠ€æ‘˜è¦ï¼šè¯†åˆ«é‡‘èè¶…å¸‚çš„å…¬æ°‘ï¼ŒQIWIå‰é›‡å‘˜å¼€é‡‡äº†2.4ï¼…çš„æ¯”ç‰¹å¸ï¼Œé‡‘ç –å››å›½å’ŒåŒºå—é“¾</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>