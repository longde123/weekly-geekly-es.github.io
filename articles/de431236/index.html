<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèüÔ∏è üí∏ üèÇ Wie schreibe ich 2018 auf Objective-C? Teil 1 üòì üôÖüèª üì™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die meisten iOS-Projekte wechseln teilweise oder vollst√§ndig zu Swift. Swift ist eine gro√üartige Sprache und damit liegt die Zukunft der iOS-Entwicklu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie schreibe ich 2018 auf Objective-C? Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/joom/blog/431236/"><p>  Die meisten iOS-Projekte wechseln teilweise oder vollst√§ndig zu Swift.  Swift ist eine gro√üartige Sprache und damit liegt die Zukunft der iOS-Entwicklung.  Die Sprache ist jedoch untrennbar mit dem Toolkit verbunden, und das Swift-Toolkit weist Nachteile auf. </p><br><p>  Der Swift-Compiler weist immer noch Fehler auf, die zum Absturz f√ºhren oder falschen Code generieren.  Swift hat keinen stabilen ABI.  Und vor allem laufen Swift-Projekte zu lange. </p><br><p>  In dieser Hinsicht k√∂nnen bestehende Projekte rentabler sein, um die Entwicklung von Ziel-C fortzusetzen.  Und Objective-C ist nicht mehr das, was es fr√ºher war! </p><br><p>  In dieser Artikelserie zeigen wir Ihnen die n√ºtzlichen Funktionen und Verbesserungen von Objective-C, mit denen das Schreiben von Code viel angenehmer wird.  Jeder, der in Objective-C schreibt, findet etwas Interessantes f√ºr sich. </p><br><p><img src="https://habrastorage.org/webt/40/ah/xl/40ahxlidhdgcqetc2vg-m2dz8ja.jpeg"></p><a name="habracut"></a><br>
<h2 id="let-i-var">  <code>let</code> und <code>var</code> </h2><br><p>  Objective-C muss keine Variablentypen mehr explizit angeben: In Xcode 8 wurde die <code>__auto_type</code> , und bevor die Typinferenz von Xcode 8 in Objective-C ++ verf√ºgbar war (unter Verwendung des Schl√ºsselworts <code>auto</code> mit dem Aufkommen von C ++ 0X). </p><br><p>  F√ºgen <code>let</code> Makros <code>let</code> und <code>var</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#define let __auto_type const #define var __auto_type</span></span></code> </pre> <br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//  NSArray&lt;NSString *&gt; *const items = [string componentsSeparatedByString:@","]; void(^const completion)(NSData * _Nullable, NSURLResponse * _Nullable, NSError * _Nullable) = ^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) { // ... }; //  let items = [string componentsSeparatedByString:@","]; let completion = ^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) { // ... };</span></span></code> </pre> <br><p>  Wenn Sie fr√ºher <code>const</code> nach einem Zeiger auf eine Objective-C-Klasse geschrieben haben, war dies ein unzul√§ssiger Luxus, aber jetzt wurde die implizite Deklaration von <code>const</code> (via <code>let</code> ) als selbstverst√§ndlich angesehen.  Der Unterschied macht sich insbesondere beim Speichern eines Blocks in einer Variablen bemerkbar. </p><br><p>  F√ºr uns selbst haben wir eine Regel entwickelt, mit der <code>let</code> und <code>var</code> alle Variablen deklarieren k√∂nnen.  Auch wenn eine Variable auf <code>nil</code> initialisiert wird: </p><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">nullable</span></span> JMSomeResult *)doSomething { var result = (JMSomeResult *)<span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (...) { result = ...; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><p>  Die einzige Ausnahme ist, wenn Sie sicherstellen m√ºssen, dass einer Variablen in jedem Codezweig ein Wert zugewiesen wird: </p><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *value; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (...) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (...) { value = ...; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { value = ...; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { value = ...; }</code> </pre> <br><p>  Nur so erhalten wir eine Compiler-Warnung, wenn wir vergessen, einem der Zweige einen Wert zuzuweisen. </p><br><p>  Und schlie√ülich: <code>-Wno-auto-var-id</code> <code>let</code> und <code>var</code> f√ºr Variablen vom Typ <code>id</code> , m√ºssen Sie die <code>auto-var-id</code> Warnung deaktivieren (f√ºgen Sie <code>-Wno-auto-var-id</code> zu den "Anderen <code>-Wno-auto-var-id</code> " in den Projekteinstellungen hinzu). </p><br><h2 id="avtovyvod-tipa-vozvraschaemogo-znacheniya-bloka">  R√ºckgabewert vom Typ Auto Block </h2><br><p>  Nur wenige Leute wissen, dass der Compiler auf den Typ des R√ºckgabewerts eines Blocks schlie√üen kann: </p><br><pre> <code class="objectivec hljs">let block = ^{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">@"abc"</span></span>; }; <span class="hljs-comment"><span class="hljs-comment">// `block`   `NSString *(^const)(void)`</span></span></code> </pre> <br><p>  Es ist sehr bequem.  Besonders wenn Sie reaktiven Code mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ReactiveObjC</a> schreiben.  Es gibt jedoch eine Reihe von Einschr√§nkungen, unter denen Sie den Typ des R√ºckgabewerts explizit angeben m√ºssen. </p><br><ol><li><p>  Wenn ein Block mehrere <code>return</code> , die Werte unterschiedlichen Typs zur√ºckgeben. </p><br><pre> <code class="objectivec hljs">let block1 = ^<span class="hljs-built_in"><span class="hljs-built_in">NSUInteger</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">NSUInteger</span></span> value){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// `NSNotFound`   `NSInteger` return NSNotFound; } }; let block2 = ^JMSomeBaseClass *(BOOL flag) { if (flag) { return [[JMSomeBaseClass alloc] init]; } else { // `JMSomeDerivedClass`   `JMSomeBaseClass` return [[JMSomeDerivedClass alloc] init]; } };</span></span></code> </pre> <br></li><li><p>  Wenn der Block eine <code>return</code> , die <code>nil</code> zur√ºckgibt. </p><br><pre> <code class="objectivec hljs">let block1 = ^<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> * _Nullable(){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; }; let block2 = ^<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> * _Nullable(<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span> flag) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (flag) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">@"abc"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } };</code> </pre> <br></li><li><p>  Wenn der Block <code>BOOL</code> . </p><br><pre> <code class="objectivec hljs">let predicate = ^<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">NSInteger</span></span> lhs, <span class="hljs-built_in"><span class="hljs-built_in">NSInteger</span></span> rhs){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lhs &gt; rhs; };</code> </pre> <br></li></ol><br><p>  Ausdr√ºcke mit einem Vergleichsoperator in C (und damit in Objective-C) sind vom Typ <code>int</code> .  Daher ist es besser, die Regel so festzulegen, dass der R√ºckgabetyp <code>BOOL</code> immer explizit angegeben <code>BOOL</code> . </p><br><h2 id="generics-i-forin">  Generika und <code>for...in</code> </h2><br><p>  In Xcode 7 wurden in Objective-C Generika (oder besser gesagt Lightweight-Generika) angezeigt.  Wir hoffen, dass Sie sie bereits verwenden.  Wenn nicht, k√∂nnen Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">WWDC-Sitzung</a> ansehen oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> lesen. </p><br><p>  F√ºr uns selbst haben wir eine Regel entwickelt, mit der generische Parameter immer angegeben werden, auch wenn es sich um <code>id</code> ( <code>NSArray&lt;id&gt; *</code> ).  Somit ist es einfach, zwischen Legacy-Code zu unterscheiden, in dem noch keine generischen Parameter angegeben sind. </p><br><p>  Mit den Makros <code>let</code> und <code>var</code> erwarten wir, dass wir sie in einer <code>for...in</code> Schleife verwenden k√∂nnen: </p><br><pre> <code class="objectivec hljs">let items = (<span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *&gt; *)@[<span class="hljs-string"><span class="hljs-string">@"a"</span></span>, <span class="hljs-string"><span class="hljs-string">@"b"</span></span>, <span class="hljs-string"><span class="hljs-string">@"c"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (let item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> items) { <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"%@"</span></span>, item); }</code> </pre> <br><p>  Ein solcher Code wird jedoch nicht kompiliert.  H√∂chstwahrscheinlich wurde <code>__auto_type</code> in <code>for...in</code> nicht unterst√ºtzt, da <code>for...in</code> nur mit Sammlungen funktioniert, die das <code>NSFastEnumeration</code> Protokoll implementieren.  Und f√ºr Protokolle in Objective-C gibt es keine Unterst√ºtzung f√ºr Generika. </p><br><p>  Versuchen Sie, Ihr <code>foreach</code> Makro zu erstellen, um diesen Nachteil zu beheben.  Das erste, was mir in den Sinn kommt: Alle Sammlungen in Foundation haben eine <code>objectEnumerator</code> Eigenschaft, und das Makro k√∂nnte folgenderma√üen aussehen: </p><br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#define foreach(object_, collection_) \ for (typeof([(collection_).objectEnumerator nextObject]) object_ in (collection_))</span></span></code> </pre> <br><p>  Bei <code>NSDictionary</code> und <code>NSMapTable</code> Protokollmethode <code>NSMapTable</code> die Schl√ºssel und nicht die Werte (Sie m√ºssten <code>keyEnumerator</code> und nicht <code>objectEnumerator</code> ). </p><br><p>  Wir m√ºssen eine neue Eigenschaft deklarieren, die nur verwendet wird, um den Typ im Typ des Ausdrucks <code>typeof</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSArray</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__covariant</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForeachSupport</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">readonly</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jm_enumeratedType</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSDictionary</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__covariant</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KeyType</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__covariant</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForeachSupport</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">readonly</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KeyType</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jm_enumeratedType</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> #</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">define</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">object_</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">collection_</span></span></span><span class="hljs-class">) \ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typeof</span></span></span><span class="hljs-class">((</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">collection_</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jm_enumeratedType</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">object_</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">in</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">collection_</span></span></span><span class="hljs-class">))</span></span></code> </pre> <br><p>  Jetzt sieht unser Code viel besser aus: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//  for (MyItemClass *item in items) { NSLog(@"%@", item); } //  foreach (item, items) { NSLog(@"%@", item); }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Snippet f√ºr Xcode</b> <div class="spoiler_text"><pre> <code class="objectivec hljs">foreach (&lt;<span class="hljs-meta"><span class="hljs-meta">#object#&gt;, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#collection#&gt;</span></span></span><span class="hljs-meta">) { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#statements#&gt;</span></span></span><span class="hljs-meta"> }</span></span></code> </pre> </div></div><br><h2 id="generics-i-copymutablecopy">  Generika und <code>copy</code> / <code>mutableCopy</code> </h2><br><p>  Ein weiterer Ort, an dem die Eingabe in Objective-C nicht verf√ºgbar ist, sind die <code>-mutableCopy</code> und <code>-mutableCopy</code> (sowie die Methoden <code>-copyWithZone:</code> und <code>-mutableCopyWithZone:</code> wir jedoch nicht direkt aufrufen). </p><br><p>  Um die Notwendigkeit expliziter Casts zu vermeiden, k√∂nnen Sie Methoden mit dem R√ºckgabetyp neu deklarieren.  F√ºr <code>NSArray</code> w√§ren <code>NSArray</code> Erkl√§rungen beispielsweise: </p><br><pre> <code class="objectivec hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSArray</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__covariant</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TypedCopying</span></span></span><span class="hljs-class">) - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSArray</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class">&gt; *)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">copy</span></span></span><span class="hljs-class">; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSMutableArray</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class">&gt; *)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mutableCopy</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><pre> <code class="objectivec hljs">let items = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *&gt; array]; <span class="hljs-comment"><span class="hljs-comment">// ... //  let itemsCopy = (NSArray&lt;NSString *&gt; *)[items copy]; //  let itemsCopy = [items copy];</span></span></code> </pre> <br><h2 id="warn_unused_result"> <code>warn_unused_result</code> </h2> <br><p>  Da wir die <code>-mutableCopy</code> -copy und <code>-mutableCopy</code> erneut deklariert haben, w√§re es sch√∂n zu garantieren, dass das Ergebnis des Aufrufs dieser Methoden verwendet wird.  Zu diesem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>warn_unused_result</code></a> verf√ºgt Clang √ºber das Attribut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>warn_unused_result</code></a> . </p><br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#define JM_WARN_UNUSED_RESULT __attribute__((warn_unused_result))</span></span></code> </pre> <br><pre> <code class="objectivec hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSArray</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__covariant</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TypedCopying</span></span></span><span class="hljs-class">) - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSArray</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class">&gt; *)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">copy</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JM_WARN_UNUSED_RESULT</span></span></span><span class="hljs-class">; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSMutableArray</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class">&gt; *)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mutableCopy</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JM_WARN_UNUSED_RESULT</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  F√ºr den folgenden Code generiert der Compiler eine Warnung: </p><br><pre> <code class="objectivec hljs">let items = @[<span class="hljs-string"><span class="hljs-string">@"a"</span></span>, <span class="hljs-string"><span class="hljs-string">@"b"</span></span>, <span class="hljs-string"><span class="hljs-string">@"c"</span></span>]; [items mutableCopy]; <span class="hljs-comment"><span class="hljs-comment">// Warning: Ignoring return value of function declared with 'warn_unused_result' attribute.</span></span></code> </pre> <br><h2 id="overloadable"> <code>overloadable</code> </h2> <br><p>  Nur wenige wissen, dass Sie mit Clang Funktionen in der C-Sprache (und damit in Objective-C) neu definieren k√∂nnen.  Mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>overloadable</code></a> Attribut k√∂nnen Sie Funktionen mit demselben Namen, jedoch mit unterschiedlichen Argumenttypen oder mit unterschiedlichen Nummern erstellen. </p><br><p>  <em>√úberschreibbare Funktionen k√∂nnen sich nicht nur in der Art des R√ºckgabewerts unterscheiden.</em> </p><br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#define JM_OVERLOADABLE __attribute__((overloadable))</span></span></code> </pre> <br><pre> <code class="objectivec hljs">JM_OVERLOADABLE <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> JMCompare(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> lhs, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rhs); JM_OVERLOADABLE <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> JMCompare(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> lhs, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rhs, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> accuracy); JM_OVERLOADABLE <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> JMCompare(<span class="hljs-keyword"><span class="hljs-keyword">double</span></span> lhs, <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> rhs); JM_OVERLOADABLE <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> JMCompare(<span class="hljs-keyword"><span class="hljs-keyword">double</span></span> lhs, <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> rhs, <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> accuracy);</code> </pre><br><h2 id="boxed-expressions">  Boxed Ausdr√ºcke </h2><br><p>  Bereits 2012 stellte Apple auf einer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">WWDC 413-Sitzung</a> Literale f√ºr <code>NSNumber</code> , <code>NSArray</code> und <code>NSDictionary</code> sowie Boxed-Ausdr√ºcke vor.  Weitere Informationen zu Literalen und Boxed-Ausdr√ºcken finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Clang-Dokumentation</a> . </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//  @YES // [NSNumber numberWithBool:YES] @NO // [NSNumber numberWithBool:NO] @123 // [NSNumber numberWithInt:123] @3.14 // [NSNumber numberWithDouble:3.14] @[obj1, obj2] // [NSArray arrayWithObjects:obj1, obj2, nil] @{key1: obj1, key2: obj2} // [NSDictionary dictionaryWithObjectsAndKeys:obj1, key1, obj2, key2, nil] // Boxed expressions @(boolVariable) // [NSNumber numberWithBool:boolVariable] @(intVariable) // [NSNumber numberWithInt:intVariable)]</span></span></code> </pre> <br><p>  Mit Literalen und Boxed-Ausdr√ºcken k√∂nnen Sie leicht ein Objekt erhalten, das eine Zahl oder einen Booleschen Wert darstellt.  Um jedoch ein Objekt zu erhalten, das die Struktur umschlie√üt, m√ºssen Sie folgenden Code schreiben: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//  `NSDirectionalEdgeInsets`  `NSValue` let insets = (NSDirectionalEdgeInsets){ ... }; let value = [[NSValue alloc] initWithBytes:&amp;insets objCType:@encode(typeof(insets))]; // ... //  `NSDirectionalEdgeInsets`  `NSValue` var insets = (NSDirectionalEdgeInsets){}; [value getValue:&amp;insets];</span></span></code> </pre> <br><p>  Hilfsmethoden und -eigenschaften sind f√ºr einige Klassen definiert (wie die <code>+[NSValue valueWithCGPoint:]</code> -Methode und die <code>CGPointValue</code> Eigenschaften), dies ist jedoch immer noch nicht so praktisch wie ein Box-Ausdruck! </p><br><p>  Und 2015 hat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Alex Denisov</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Patch</a> f√ºr Clang erstellt, mit dem Sie Boxed-Ausdr√ºcke verwenden k√∂nnen, um alle Strukturen in <code>NSValue</code> . </p><br><p>  Damit unsere Struktur Boxed-Ausdr√ºcke unterst√ºtzt, m√ºssen Sie nur das Attribut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>objc_boxable</code></a> f√ºr die Struktur hinzuf√ºgen. </p><br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#define JM_BOXABLE __attribute__((objc_boxable))</span></span></code> </pre> <br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> JM_BOXABLE JMDimension { JMDimensionUnit unit; <span class="hljs-built_in"><span class="hljs-built_in">CGFloat</span></span> value; } JMDimension;</code> </pre> <br><p>  Und wir k√∂nnen die <code>@(...)</code> Syntax f√ºr unsere Struktur verwenden: </p><br><pre> <code class="objectivec hljs">let dimension = (JMDimension){ ... }; let boxedValue = @(dimension); <span class="hljs-comment"><span class="hljs-comment">//   `NSValue *`</span></span></code> </pre> <br><p>  Sie m√ºssen <code>-[NSValue getValue:]</code> Struktur noch √ºber die Methode <code>-[NSValue getValue:]</code> oder die Kategoriemethode <code>-[NSValue getValue:]</code> . </p><br><p>  CoreGraphics definiert sein eigenes Makro, <code>CG_BOXABLE</code> , und Boxed-Ausdr√ºcke werden bereits f√ºr die <code>CGPoint</code> , <code>CGSize</code> , <code>CGVector</code> und <code>CGRect</code> . </p><br><p>  F√ºr andere h√§ufig verwendete Strukturen k√∂nnen wir selbst Unterst√ºtzung f√ºr Boxed-Ausdr√ºcke hinzuf√ºgen: </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> JM_BOXABLE _NSRange <span class="hljs-built_in"><span class="hljs-built_in">NSRange</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> JM_BOXABLE <span class="hljs-built_in"><span class="hljs-built_in">CGAffineTransform</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CGAffineTransform</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> JM_BOXABLE <span class="hljs-built_in"><span class="hljs-built_in">UIEdgeInsets</span></span> <span class="hljs-built_in"><span class="hljs-built_in">UIEdgeInsets</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> JM_BOXABLE <span class="hljs-built_in"><span class="hljs-built_in">NSDirectionalEdgeInsets</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSDirectionalEdgeInsets</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> JM_BOXABLE <span class="hljs-built_in"><span class="hljs-built_in">UIOffset</span></span> <span class="hljs-built_in"><span class="hljs-built_in">UIOffset</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> JM_BOXABLE <span class="hljs-built_in"><span class="hljs-built_in">CATransform3D</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CATransform3D</span></span>;</code> </pre> <br><h2 id="compound-literals">  Zusammengesetzte Literale </h2><br><p>  Ein weiteres n√ºtzliches Sprachkonstrukt ist das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zusammengesetzte Literal</a> .  Zusammengesetzte Literale wurden in GCC als Spracherweiterung angezeigt und sp√§ter zum C11-Standard hinzugef√ºgt. </p><br><p>  Wenn wir zuvor, nachdem wir den Aufruf von <code>UIEdgeInsetsMake</code> , nur erraten konnten, welche Einr√ºckung wir erhalten w√ºrden (wir mussten die Deklaration der <code>UIEdgeInsetsMake</code> Funktion beobachten), spricht der Code mit zusammengesetzten Literalen f√ºr sich selbst: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//  UIEdgeInsetsMake(1, 2, 3, 4) //  (UIEdgeInsets){ .top = 1, .left = 2, .bottom = 3, .right = 4 }</span></span></code> </pre> <br><p>  Es ist noch bequemer, eine solche Konstruktion zu verwenden, wenn einige der Felder Null sind: </p><br><pre> <code class="objectivec hljs">(<span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span>){ .y = <span class="hljs-number"><span class="hljs-number">10</span></span> } <span class="hljs-comment"><span class="hljs-comment">//  (CGPoint){ .x = 0, .y = 10 } (CGRect){ .size = { .width = 10, .height = 20 } } //  (CGRect){ .origin = { .x = 0, .y = 0 }, .size = { .width = 10, .height = 20 } } (UIEdgeInsets){ .top = 10, .bottom = 20 } //  (UIEdgeInsets){ .top = 20, .left = 0, .bottom = 10, .right = 0 }</span></span></code> </pre> <br><p>  Nat√ºrlich k√∂nnen Sie in zusammengesetzten Literalen nicht nur Konstanten, sondern auch beliebige Ausdr√ºcke verwenden: </p><br><pre> <code class="objectivec hljs">textFrame = (<span class="hljs-built_in"><span class="hljs-built_in">CGRect</span></span>){ .origin = { .y = <span class="hljs-built_in"><span class="hljs-built_in">CGRectGetMaxY</span></span>(buttonFrame) + textMarginTop }, .size = textSize };</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Schnipsel f√ºr Xcode</b> <div class="spoiler_text"><pre> <code class="objectivec hljs">(<span class="hljs-built_in"><span class="hljs-built_in">NSRange</span></span>){ .location = &lt;<span class="hljs-meta"><span class="hljs-meta">#location#&gt;, .length = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#length#&gt;</span></span></span><span class="hljs-meta"> } (CGPoint){ .x = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#x#&gt;</span></span></span><span class="hljs-meta">, .y = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#y#&gt;</span></span></span><span class="hljs-meta"> } (CGSize){ .width = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#width#&gt;</span></span></span><span class="hljs-meta">, .height = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#height#&gt;</span></span></span><span class="hljs-meta"> } (CGRect){ .origin = { .x = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#x#&gt;</span></span></span><span class="hljs-meta">, .y = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#y#&gt;</span></span></span><span class="hljs-meta"> }, .size = { .width = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#width#&gt;</span></span></span><span class="hljs-meta">, .height = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#height#&gt;</span></span></span><span class="hljs-meta"> } } (UIEdgeInsets){ .top = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#top#&gt;</span></span></span><span class="hljs-meta">, .left = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#left#&gt;</span></span></span><span class="hljs-meta">, .bottom = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#bottom#&gt;</span></span></span><span class="hljs-meta">, .right = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#right#&gt;</span></span></span><span class="hljs-meta"> } (NSDirectionalEdgeInsets){ .top = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#top#&gt;</span></span></span><span class="hljs-meta">, .leading = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#leading#&gt;</span></span></span><span class="hljs-meta">, .bottom = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#bottom#&gt;</span></span></span><span class="hljs-meta">, .trailing = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#trailing#&gt;</span></span></span><span class="hljs-meta"> } (UIOffset){ .horizontal = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#horizontal#&gt;</span></span></span><span class="hljs-meta">, .vertical = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;#vertical#&gt;</span></span></span><span class="hljs-meta"> }</span></span></code> </pre> </div></div><br><h2 id="nullability">  Nullbarkeit </h2><br><p>  In Xcode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">6.3.2 wurden</a> in Objective-C <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anmerkungen zur Nullbarkeit angezeigt</a> .  Apple-Entwickler haben sie hinzugef√ºgt, um die Objective-C-API in Swift zu importieren.  Wenn der Sprache jedoch etwas hinzugef√ºgt wird, sollten Sie versuchen, es in Ihren Dienst zu stellen.  Und wir werden erkl√§ren, wie wir die Nullbarkeit in einem Objective-C-Projekt verwenden und welche Einschr√§nkungen bestehen. </p><br><p>  <em>Um Ihr Wissen aufzufrischen, k√∂nnen Sie sich die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">WWDC-Sitzung</a> ansehen.</em> </p><br><p>  Als erstes haben wir begonnen, die <code>NS_ASSUME_NONNULL_END</code> <code>NS_ASSUME_NONNULL_BEGIN</code> / <code>NS_ASSUME_NONNULL_END</code> in alle <code>.m</code> Dateien zu <code>.m</code> .  Um dies nicht von Hand zu tun, patchen wir Dateivorlagen direkt in Xcode. </p><br><p>  Wir haben auch begonnen, die Nullf√§higkeit f√ºr alle privaten Eigenschaften und Methoden korrekt festzulegen. </p><br><p>  Wenn wir die Makros <code>NS_ASSUME_NONNULL_BEGIN</code> / <code>NS_ASSUME_NONNULL_END</code> zu einer vorhandenen <code>.m</code> Datei hinzuf√ºgen, f√ºgen wir sofort die fehlenden <code>nullable</code> , <code>null_resettable</code> und <code>_Nullable</code> in der gesamten Datei hinzu. </p><br><p>  Alle n√ºtzlichen Warnungen des Nullf√§higkeits-Compilers sind standardm√§√üig aktiviert.  Es gibt jedoch eine extreme Warnung, die ich einschlie√üen m√∂chte: - <code>-Wnullable-to-nonnull-conversion</code> (festgelegt in den "Anderen <code>-Wnullable-to-nonnull-conversion</code> " in den Projekteinstellungen).  Der Compiler generiert diese Warnung, wenn eine Variable oder ein Ausdruck mit einem nullbaren Typ implizit in einen nicht null Typ umgewandelt wird. </p><br><pre> <code class="objectivec hljs">+ (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)foo:(<span class="hljs-keyword"><span class="hljs-keyword">nullable</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)string { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> string; <span class="hljs-comment"><span class="hljs-comment">// Implicit conversion from nullable pointer 'NSString * _Nullable' to non-nullable pointer type 'NSString * _Nonnull' }</span></span></code> </pre> <br><p>  Leider <code>__auto_type</code> diese Warnung f√ºr <code>__auto_type</code> (und daher <code>let</code> und <code>var</code> ) nicht.  Der √ºber <code>__auto_type</code> abgeleitete <code>__auto_type</code> verwirft die Annotation zur Nullbarkeit.  Und nach dem Kommentar des Apple-Entwicklers in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">rdar: // 27062504</a> wird sich dieses Verhalten nicht √§ndern.  Es wurde experimentell beobachtet, dass das Hinzuf√ºgen von <code>_Nullable</code> oder <code>_Nonnull</code> zu <code>__auto_type</code> nichts beeinflusst. </p><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)test:(<span class="hljs-keyword"><span class="hljs-keyword">nullable</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)string { let tmp = string; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tmp; <span class="hljs-comment"><span class="hljs-comment">//   }</span></span></code> </pre> <br><p>  Um die <code>nullable-to-nonnull-conversion</code> einer <code>nullable-to-nonnull-conversion</code> zu unterdr√ºcken <code>nullable-to-nonnull-conversion</code> wir ein Makro geschrieben, das "Entpacken erzwingen".  Idee aus dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>RBBNotNil</code></a> Makro.  Aufgrund des Verhaltens von <code>__auto_type</code> es jedoch m√∂glich, die Hilfsklasse loszuwerden. </p><br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#define JMNonnull(obj_) \ ({ \ NSCAssert(obj_, @</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Expected `%@` not to be nil."</span></span></span><span class="hljs-meta">, @#obj_); \ (typeof({ __auto_type result_ = (obj_); result_; }))(obj_); \ })</span></span></code> </pre> <br><p>  Ein Beispiel f√ºr die Verwendung des <code>JMNonnull</code> Makros: </p><br><pre> <code class="objectivec hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JMRobot</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nullable</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JMLeg</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">leftLeg</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nullable</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JMLeg</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rightLeg</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implementation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JMRobot</span></span></span><span class="hljs-class"> - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">stepLeft</span></span></span><span class="hljs-class"> </span></span>{ [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> step:JMNonnull(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.leftLeg)] } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)stepRight { [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> step:JMNonnull(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.rightLeg)] } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)step:(JMLeg *)leg { <span class="hljs-comment"><span class="hljs-comment">// ... } @end</span></span></code> </pre> <br><p>  Beachten Sie, dass zum Zeitpunkt des Schreibens die Warnung zur <code>nullable-to-nonnull-conversion</code> nicht <code>nullable-to-nonnull-conversion</code> nicht <code>nullable-to-nonnull-conversion</code> funktioniert: Der Compiler versteht noch nicht, dass eine <code>nullable</code> Variable nach √úberpr√ºfung auf Ungleichung <code>nil</code> als <code>nonnull</code> <code>nil</code> interpretiert werden <code>nonnull</code> . </p><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)foo:(<span class="hljs-keyword"><span class="hljs-keyword">nullable</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)string { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (string != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> string; <span class="hljs-comment"><span class="hljs-comment">// Implicit conversion from nullable pointer 'NSString * _Nullable' to non-nullable pointer type 'NSString * _Nonnull' } else { return @""; } }</span></span></code> </pre> <br><p>  In Objective-C ++ - Code k√∂nnen Sie diese Einschr√§nkung umgehen, indem Sie das Konstrukt <code>if let</code> verwenden, da Objective-C ++ Variablendeklarationen im Ausdruck einer <code>if</code> zul√§sst. </p><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)foo:(<span class="hljs-keyword"><span class="hljs-keyword">nullable</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)stringOrNil { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (let string = stringOrNil) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> string; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">@""</span></span>; } }</code> </pre> <br><h2 id="poleznye-ssylki">  N√ºtzliche Links </h2><br><p>  Es gibt auch eine Reihe bekannter Makros und Schl√ºsselw√∂rter, die ich erw√§hnen m√∂chte: das Schl√ºsselwort <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>@available</code></a> , die Makros <code>NS_DESIGNATED_INITIALIZER</code> , <code>NS_UNAVAILABLE</code> , <code>NS_REQUIRES_SUPER</code> , <code>NS_NOESCAPE</code> , <code>NS_ENUM</code> , <code>NS_OPTIONS</code> (oder Ihre Makros f√ºr dieselben @ Attribute).  Wir empfehlen Ihnen auch, sich den Rest der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">libextobjc-</a> Bibliothek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">anzusehen</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Was noch zu lesen</b> <div class="spoiler_text"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://pspdfkit.com/blog/2017/even-swiftier-objective-c/</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://medium.com/@maicki/type-inference-with-auto-type-55a38ef56372</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://nshipster.com/__attribute__/</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.bignerdranch.com/blog/bools-sharp-corners/</a> </p></div></div><br><p>  ‚Üí Der Code f√ºr den Artikel ist in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gist ver√∂ffentlicht</a> . </p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Im ersten Teil des Artikels haben wir versucht, √ºber die Hauptfunktionen und einfachen Sprachverbesserungen zu sprechen, die das Schreiben und die Unterst√ºtzung von Objective-C-Code erheblich erleichtern.  Im n√§chsten Teil werden wir zeigen, wie Sie Ihre Produktivit√§t mithilfe von Enums wie in Swift (es handelt sich auch um Fallklassen; es handelt sich auch um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">algebraische Datentypen</a> , ADTs) und die M√∂glichkeit der Implementierung von Methoden auf Protokollebene weiter steigern k√∂nnen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de431236/">https://habr.com/ru/post/de431236/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de431226/index.html">Das Snake-Spiel f√ºr FPGA Cyclone IV (mit VGA- und SPI-Joystick)</a></li>
<li><a href="../de431228/index.html">Hindernislauf f√ºr Licht: Fl√ºssigkristalle helfen</a></li>
<li><a href="../de431230/index.html">Speicher f√ºr HPC-Infrastruktur oder wie wir 65 PB-Speicher im RIKEN Japan Research Center gesammelt haben</a></li>
<li><a href="../de431232/index.html">Wir generieren wundersch√∂ne SVG-Platzhalter auf Node.js.</a></li>
<li><a href="../de431234/index.html">11. Dezember, Moskau - Alfa JS MeetUp</a></li>
<li><a href="../de431238/index.html">Die Zusammenfassung der Ereignisse f√ºr HR-Experten im Bereich IT f√ºr Dezember 2018</a></li>
<li><a href="../de431242/index.html">TLS- und Webzertifikate</a></li>
<li><a href="../de431244/index.html">"Zwei ungefiltert" oder eine einfache M√∂glichkeit, ein Bein zu schie√üen</a></li>
<li><a href="../de431246/index.html">@ OpenStack Meetup bei Mail.Ru Group: 30. November</a></li>
<li><a href="../de431248/index.html">Wer ist agil verantwortlich f√ºr die Qualit√§t der Entwicklung komplexer Projekte oder die Quality Gates-Methodik?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>