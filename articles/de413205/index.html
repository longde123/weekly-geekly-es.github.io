<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💄 🏯 👨🏼‍💼 Erforderliche HTTP-Header ✒️ 📯 🎳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unsere Fastly-Kunden lieben es, HTTP-Header zu manipulieren. Die Auswahl der richtigen Kombination von Headern ist eines der besten Dinge, die Sie tun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erforderliche HTTP-Header</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413205/"> Unsere Fastly-Kunden lieben es, HTTP-Header zu manipulieren.  Die Auswahl der richtigen Kombination von Headern ist eines der besten Dinge, die Sie tun können, um die Sicherheit Ihrer Website zu gewährleisten und einen wesentlichen Beitrag zur Leistung zu leisten. <br><br>  Die meisten Entwickler kennen die wichtigen und nützlichen HTTP-Header.  Die bekanntesten sind <code>Content-Type</code> und <code>Content-Length</code> , dies sind fast universelle Header.  In letzter Zeit wurden jedoch Header wie <code>Content-Security-Policy</code> und <code>Strict-Transport-Security</code> verwendet, um die Sicherheit zu erhöhen, und <code>Link rel=preload</code> , um die Leistung zu verbessern.  Trotz der weit verbreiteten Unterstützung in Browsern verwenden nur wenige diese. <br><br>  In einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">früheren Artikel haben</a> wir uns unnötige Überschriften angesehen.  Lassen Sie uns nun herausfinden, welche Header wirklich für Ihre Site konfiguriert werden sollten. <br><a name="habracut"></a><br><h1>  Hausafgaben </h1><br>  Es gibt verschiedene Dienste im Internet, die Ihre Site analysieren und beraten, welche Header hinzugefügt werden sollen.  Ich habe mir Mozillas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">securityheaders.io</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Observatory angesehen,</a> um mein eigenes Wissen und meine Daten aus dem Fastly-Netzwerk zu ergänzen. <br><br><h1>  Welche Überschriften sollten auf Ihrer Website sein? </h1><br>  Was sind die Hauptheader in Ihren Serverantworten?  Die meisten sind für die Verbesserung der Sicherheit verantwortlich: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Inhaltssicherheitsrichtlinie</a> .  Dient als Firewall im Browser.  Wenn Ihre Site kompromittiert wird, können Sie Schäden begrenzen, indem Sie Verbindungen zu nicht genehmigten Hosts verhindern.  Sehr wichtige Überschrift.  Wenn Sie es nicht haben, müssen Sie es aktivieren. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Referrer-Policy</a> .  Passt den Detaillierungsgrad an, der beim Verlassen der Seite in den <code>Referer</code> Header aufgenommen werden soll.  Verhindert Datenlecks an Websites, an denen Links vorhanden sind.  Sehr zu empfehlen. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Strikte Transportsicherheit</a> .  Verhindert Versuche, über normales HTTP eine Verbindung zur Site herzustellen.  Hilft beim Stoppen von MiTM-Angriffen und verbessert die Sicherheit der Website.  Auch sehr zu empfehlen. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">X-XSS-Schutz</a> .  Verhindert einige Formen von standortübergreifenden Skriptangriffen und verhindert die Ausführung von Skripten, wenn in der Anforderung ein Markup aus einem Dokument in derselben Form vorhanden ist.  Wenn Sie beispielsweise eine Seite mit der Adresse <code>/index.html?foo=&lt;script&gt;alert('foo');&lt;/script&gt;</code> <code>&lt;script&gt;alert('foo');&lt;/script&gt;</code> laden und im Quellcode der Seite <code>&lt;script&gt;alert('foo');&lt;/script&gt;</code> dann wird das Skript blockiert.  In diesen Tagen wird der Titel weitgehend durch CSP ersetzt. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">X-Content-Type-Optionen</a> .  Setzen Sie den Wert auf <code>nosniff</code> , um zu verhindern, dass Browser JavaScript-ähnliche Inhalte ausführen, für die nicht der richtige Wert für den Inhaltstyp festgelegt ist.  Verhindert Angriffe wie das Mischen von MIME. In letzter Zeit wurde Chrome verwendet, um die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Site-Isolation</a> zu aktivieren.  Im Laufe der Zeit wird es aufgrund des verbesserten Verhaltens von Browsern standardmäßig weniger wichtig, gehört aber derzeit immer noch zu den Best Practices. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CORS</a> .  Mit Cross-Origin-Headern für die gemeinsame Nutzung von Ressourcen können Sie eine URL mit einem Skript aus einer anderen Quelle laden.  Dies ist ein optionaler Titel.  Überschriften dieser Art sind zulässig und nicht unerschwinglich, sodass ihre Abwesenheit ein Höchstmaß an Sicherheit bietet. <br><br>  Andere sind für die Leistung: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Timing-Allow-Origin</a> .  Ermöglicht Überwachungstools den Zugriff auf Anforderungszeitdaten.  Dies ist in vielerlei Hinsicht eine wertvolle Information, die die Qualität von Analysen wie Google Analytics oder Speedcurve erheblich verbessern kann. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link rel = Vorspannung</a> .  Informiert den Browser über wichtige Ressourcen, die heruntergeladen werden sollten, auch wenn diese nicht sofort benötigt werden.  Verwenden Sie die Kopfzeile für Schriftarten und wichtiges CSS. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Server-Timing</a>  Stellt Timing-Informationen vom Server bereit, die die Navigations-Timing-API und die Ressourcen-Timing-API mit detaillierteren Informationen über die Zeit ergänzen, die zum Ausführen von Aufgaben auf dem Server benötigt wird (z. B. „Wie viel Zeit haben wir in MySQL verbracht“).  Hervorragend geeignet zur Überwachung von Leistungsdaten in Kombination mit RUM Beacon-Tools. <br><br>  Schauen wir uns einige davon genauer an. <br><br><h1>  Inhaltssicherheitsrichtlinie: Halten Sie sie ein </h1><br>  Obwohl <code>Content-Security-Policy</code> eine der wichtigsten Überschriften ist, ist sie auch eine der ausführlichsten.  Der größte CSP-Header, den ich in HTTPArchive gefunden habe, war 10 KB.  <i>Zehn Kilobyte</i> .  Für einen einzelnen Headerwert.  Schlimmer noch: Während Antwortkörper gestreamt werden können, werden Header von den meisten Servern und Proxys gepuffert und erst nach Abschluss übertragen.  Die HTTP / 2-Komprimierung hilft dabei, sich zwischen den Anforderungen ein <i>wenig</i> zu merken. Dies bedeutet jedoch nicht, dass der 10-KB-Header in Ordnung ist. <br><br>  Wenn Sie das gesamte erste Paket Ihrer Antwort ausfüllen, können Sie den Browser außerdem dazu zwingen, zwei Anrufe beim Server zu tätigen <b>, um den Inhalt zu empfangen</b> .  Denken Sie also nicht nur daran, unnötige Header zu entfernen, sondern auch die vorhandenen zu maximieren. <br><br><h1>  Referrer-Politik </h1><br>  Seit jeher (dh in der Web-Welt seit etwa Ende der 90er Jahre) senden Browser den <code>Referer</code> Header (und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">schreiben ihn falsch</a> ).  Während des größten Teils seiner Geschichte war dies eine der wichtigsten Methoden, um Benutzerbewegungen zwischen Seiten in Analysetools zu verfolgen und den Ursprung des eingehenden Datenverkehrs zu verstehen.  Letzteres ist jedoch mit erheblichen Datenschutzproblemen verbunden.  Wenn ich auf den Link in der E-Mail des E-Mail-Clients klicke, kann die Site meine E-Mail-Domain bestimmen.  Schlimmer noch, wenn Sie die vollständige URL kennen, von der Sie gekommen sind, einschließlich der Anforderungsargumente, werden möglicherweise die Begriffe Ihrer letzten Suchanfrage oder persönliche Daten wie eine E-Mail-Adresse angezeigt. <br><br>  Sie können aus den verfügbaren Referrer-Policy-Optionen mehrere Strategien auswählen. Mein üblicher Rat lautet jedoch "Origin-When-Cross-Origin". Dadurch wird Referer für alle normalen Anforderungen aktiviert, der Wert wird jedoch nur für die Domain abgeschnitten, wenn der Link von einer Domain zur anderen wechselt .  Links auf Ihrer eigenen Website enthalten einen vollständigen Verweis. <br><br><h1>  Server-Timing-Messung auf CDN Edge Server </h1><br>  <code>Server-Timing</code> hat viele nette Funktionen, und eine davon ist, dass Sie als Antwort mehrere Instanzen hinzufügen können - und alle werden in einem Browser oder einem RUM-Tool kombiniert.  Das heißt, wenn die Anforderung - wie im CDN - mehrere Phasen der Serververarbeitung durchläuft, fügt jede Phase ihre eigenen Zeitmetriken hinzu, und sie stehen nicht in Konflikt miteinander.  So fügen Sie dem Header mithilfe von VCL in der Fastly-Dienstkonfiguration Fastly-Metriken hinzu: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">add</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Server</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Timing</span></span> = fastly_info.state {", fastly;desc="Edge <span class="hljs-type"><span class="hljs-type">time</span></span>";dur="} <span class="hljs-type"><span class="hljs-type">time</span></span>.elapsed.msec;</code> </pre> <br>  Diese Zahl enthält die Wartezeit auf das Backend. Im Normalfall sind alle Server-Zeitmetriken kleiner als die Fastly-Zahl.  Wenn wir das Dokument jedoch aus dem Fastly-Cache ausgeben, werden die ursprünglichen Zeitmetriken ab dem Zeitpunkt der Generierung der Seite angezeigt. Die Fastly-Nummer bestätigt jedoch, dass der Gesamtzeitverlust tatsächlich sehr gering ist. <br><br>  Serverzeitmetriken sind über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das Leistungsobjekt in JavaScript</a> verfügbar und werden im Netzwerkbereich von Chrome Devtools angezeigt: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d2e/5e2/349/d2e5e23497238f2cdf12cddf0c6dedb5.png"><br><br>  Derzeit Visualisierung von Indikatoren auf rudimentärer Ebene.  Da sie jedoch hart daran arbeiten, wird sich die Benutzeroberfläche in Zukunft wahrscheinlich erheblich verbessern. <br><br><h1>  Fügen Sie alle richtigen Überschriften hinzu. </h1><br>  Schnell ist ein guter Ort, um alle Sicherheits- und Leistungsheader hinzuzufügen.  Das Folgende zeigt, wie sie alle zusammen aussehen.  Fügen Sie diesen Code in der Übermittlungsphase des Anforderungsflusses hinzu und ändern Sie die Werte in diejenigen, die für Ihre Site geeignet sind ( <b>versuchen Sie nicht zu kopieren und einzufügen,</b> ohne zu überprüfen, ob die Werte für Ihre Site geeignet sind): <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.Content-<span class="hljs-keyword"><span class="hljs-keyword">Security</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Policy</span></span> = "default-src 'self'; frame-ancestors 'self'"; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.Referer-<span class="hljs-keyword"><span class="hljs-keyword">Policy</span></span> = "origin-when-cross-origin"; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Strict</span></span>-Transport-<span class="hljs-keyword"><span class="hljs-keyword">Security</span></span> = "max-age=86400"; # Increase <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> working well <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> prod (a year <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a common final <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.X-XSS-Protection = "1; mode=block"; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.X-Content-<span class="hljs-keyword"><span class="hljs-keyword">Type</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Options</span></span> = "nosniff"; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (req.http.Origin) { # Consider checking this against an allowlist <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Access</span></span>-Control-Allow-Origin = req.http.Origin; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Access</span></span>-Control-Allow-Methods = "GET,HEAD,POST,OPTIONS"; } <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Server</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Timing</span></span> = fastly_info.state {", fastly;desc="Edge <span class="hljs-type"><span class="hljs-type">time</span></span>";dur="} <span class="hljs-type"><span class="hljs-type">time</span></span>.elapsed.msec; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Timing</span></span>-Allow-Origin = "*"; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.Link = "&lt;/fonts/myfont.otf&gt;; rel=preload; as=font";</code> </pre> <br>  Im nächsten Artikel werden wir uns einige der exotischsten Header ansehen, die anfangen, in Browsern zu standardisieren und zu implementieren. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de413205/">https://habr.com/ru/post/de413205/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de413187/index.html">Interview mit Ryan Dahl, Schöpfer von Node.js</a></li>
<li><a href="../de413189/index.html">Sammlung von CSS-Lidschatten Box-Shadows.css</a></li>
<li><a href="../de413195/index.html">Funktionales Denken. Teil 6</a></li>
<li><a href="../de413199/index.html">Versagen von Zukunftsforschern. Ideen aus Filmen, die nicht zustande kamen</a></li>
<li><a href="../de413203/index.html">ICO und Sicherheit: Analyse des Competitive Intelligence Contest bei Positive Hack Days</a></li>
<li><a href="../de413207/index.html">PGCon 2018: Fotos, Dias, Impressionen</a></li>
<li><a href="../de413211/index.html">Analysieren der Avito iOS-App: Fragen Sie mich nach etwas</a></li>
<li><a href="../de413213/index.html">Apple WWDC 2018: Textsendung</a></li>
<li><a href="../de413215/index.html">GitHub ist jetzt offiziell im Besitz von Microsoft</a></li>
<li><a href="../de413217/index.html">Sind Elektroautos so umweltfreundlich?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>