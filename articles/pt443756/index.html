<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÉüèº üíæ üöÜ Design da classe: O que √© bom? üë®üèø‚Äçüéì üëàüèº üë°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Postado por Denis Tsyplakov , arquiteto de solu√ß√µes, DataArt 

 Ao longo dos anos, descobri que os programadores repetem os mesmos erros de tempos em ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Design da classe: O que √© bom?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/443756/"><img src="https://habrastorage.org/webt/rg/pn/co/rgpncowcmrekbk3lgzzkg1qcl-4.jpeg"><br><br>  <i>Postado por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Denis Tsyplakov</a> , arquiteto de solu√ß√µes, DataArt</i> <br><br>  Ao longo dos anos, descobri que os programadores repetem os mesmos erros de tempos em tempos.  Infelizmente, livros sobre aspectos te√≥ricos do desenvolvimento n√£o ajudam a evit√°-los: os livros geralmente n√£o t√™m conselhos pr√°ticos e concretos.  E at√© acho que por que ... <br><br>  A primeira recomenda√ß√£o que vem √† mente quando se trata, por exemplo, de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">log</a> ou design de classe √© muito simples: "N√£o fa√ßa besteira direta".  Mas a experi√™ncia mostra que definitivamente n√£o √© suficiente.  Apenas o design das classes, neste caso, √© um bom exemplo - uma dor de cabe√ßa eterna que surge do fato de todos olharem para esse problema √† sua maneira.  Portanto, decidi reunir dicas b√°sicas em um artigo, ap√≥s o qual voc√™ evitar√° v√°rios problemas t√≠picos e, o mais importante, salve seus colegas deles.  Se alguns princ√≠pios lhe parecem banais (porque s√£o realmente banais!) - bem, eles j√° se estabeleceram no seu subc√≥rtex e sua equipe pode ser parabenizada. <br><br>  Farei uma reserva, na verdade, focaremos nas aulas apenas por simplicidade.  Quase o mesmo pode ser dito sobre as fun√ß√µes ou qualquer outro componente do aplicativo. <a name="habracut"></a><br>  Se o aplicativo funcionar e executar a tarefa, seu design ser√° bom.  Ou n√£o?  Depende da fun√ß√£o objetivo do aplicativo;  o que √© bastante adequado para um aplicativo m√≥vel que precisa ser exibido uma vez na exposi√ß√£o pode n√£o ser adequado para a plataforma de negocia√ß√£o que qualquer banco vem desenvolvendo h√° anos.  At√© certo ponto, a resposta a essa pergunta pode ser chamada de princ√≠pio do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SOLID</a> , mas √© muito geral - quero instru√ß√µes mais espec√≠ficas que possam ser mencionadas em uma conversa com colegas. <br><br><h2>  Aplicativo de destino </h2><br>  Como n√£o pode haver resposta universal, proponho restringir o escopo.  Vamos supor que estamos escrevendo um aplicativo de neg√≥cios padr√£o que aceita solicita√ß√µes via HTTP ou outra interface, implementa alguma l√≥gica acima delas e, em seguida, faz uma solicita√ß√£o para o pr√≥ximo servi√ßo da cadeia ou armazena os dados recebidos em algum lugar.  Por uma quest√£o de simplicidade, vamos supor que estamos usando o Spring IoC Framework, pois ele √© bastante comum agora e o restante dos frameworks √© bastante semelhante a ele.  O que podemos dizer sobre esse aplicativo? <br><br><ul><li>  O tempo que o processador gasta processando uma solicita√ß√£o √© importante, mas n√£o cr√≠tico - um aumento de 0,1% no clima n√£o. </li><li>  N√£o h√° terabytes de mem√≥ria √† nossa disposi√ß√£o, mas se o aplicativo consumir 50 a 100 Kbytes extras, isso n√£o ser√° um desastre. </li><li> Obviamente, quanto menor a hora de in√≠cio, melhor.  Mas n√£o h√° diferen√ßa fundamental entre 6 e 5,9 segundos. </li></ul><br><h2>  Crit√©rios de otimiza√ß√£o </h2><br>  O que √© importante para n√≥s neste caso? <br><br>  √â prov√°vel que o c√≥digo do projeto seja usado pela empresa por v√°rios, talvez mais de dez anos. <br><br>  O c√≥digo em momentos diferentes ser√° modificado por v√°rios desenvolvedores n√£o familiarizados. <br>  √â poss√≠vel que em alguns anos os desenvolvedores desejem usar a nova biblioteca LibXYZ ou a estrutura FrABC. <br><br>  Em algum momento, parte do c√≥digo ou o projeto inteiro pode ser mesclado com a base de c√≥digo de outro projeto. <br><br>  No meio dos gerentes, geralmente √© aceito que esses problemas sejam resolvidos com a ajuda da documenta√ß√£o.  A documenta√ß√£o, √© claro, √© boa e √∫til, porque √© t√£o boa quando voc√™ come√ßa a trabalhar no projeto que tem cinco tickets abertos pendurados, o gerente do projeto pergunta como voc√™ progrediu e voc√™ precisa ler (e lembrar) cerca de 150 p√°ginas de texto escritas longe de escritores brilhantes.  Obviamente, voc√™ teve alguns dias ou at√© algumas semanas para entrar no projeto, mas, se voc√™ usar aritm√©tica simples, por um lado, 5.000.000 bytes de c√≥digo, por outro, digamos, 50 horas de trabalho.  Acontece que, em m√©dia, era necess√°rio injetar 100 Kb de c√≥digo por hora.  E aqui tudo depende muito da qualidade do c√≥digo.  Se estiver limpo: f√°cil de montar, bem estruturado e previs√≠vel, a participa√ß√£o em um projeto parece ser um processo notavelmente menos doloroso.  Nem o √∫ltimo papel nisso √© desempenhado pelo design da classe.  N√£o √© o √∫ltimo. <br><br><h2>  O que queremos do design de classe </h2><br>  De todas as alternativas acima, muitas conclus√µes interessantes podem ser tiradas sobre a arquitetura geral, a pilha de tecnologias, o processo de desenvolvimento etc. Mas, desde o in√≠cio, decidimos falar sobre o design de classes, vamos ver as coisas √∫teis que podemos aprender com o que foi dito anteriormente em rela√ß√£o a ele. <br><br><ul><li>  Eu gostaria que um desenvolvedor que n√£o estivesse totalmente familiarizado com o c√≥digo do aplicativo pudesse entender o que esta classe est√° fazendo ao olhar para uma classe.  E vice-versa - olhando para um requisito funcional ou n√£o-funcional, eu poderia adivinhar rapidamente onde o aplicativo est√° localizado nas classes respons√°veis ‚Äã‚Äãpor ele.  Bem, √© desej√°vel que a implementa√ß√£o dos requisitos n√£o seja "espalhada" por todo o aplicativo, mas concentrada em uma classe ou em um grupo compacto de classes.  Deixe-me explicar com um exemplo que tipo de antipadr√£o eu quero dizer.  Suponha que precisamos verificar se 10 solicita√ß√µes de um determinado tipo s√≥ podem ser executadas por usu√°rios que possuem mais de 20 pontos em sua conta (n√£o importa o que isso signifique).  Uma maneira ruim de implementar esse requisito √© inserir uma verifica√ß√£o no in√≠cio de cada solicita√ß√£o.  Em seguida, a l√≥gica ser√° espalhada por 10 m√©todos, em diferentes controladores.  Uma boa maneira √© criar um filtro ou WebRequestInterceptor e verificar tudo em um s√≥ lugar. </li><li>  Quero que as mudan√ßas em uma classe que n√£o afetem o contrato da classe n√£o afetem, bem, ou (sejamos realistas!) Pelo menos n√£o afetem muito outras classes.  Em outras palavras, quero encapsular a implementa√ß√£o de um contrato de classe. </li><li>  Eu gostaria que fosse poss√≠vel, ao alterar o contrato de classe, percorrendo a cadeia de chamadas e fazendo usos de encontrar, encontre as classes que essa altera√ß√£o afeta.  Ou seja, quero que as classes n√£o tenham depend√™ncias indiretas. </li><li>  Se poss√≠vel, gostaria de ver que os processos de processamento de solicita√ß√£o que consistem em v√°rias etapas de n√≠vel √∫nico n√£o s√£o manchados pelo c√≥digo de v√°rias classes, mas s√£o descritos no mesmo n√≠vel.  √â muito bom se o c√≥digo que descreve esse processo de processamento se encaixa em uma tela dentro de um m√©todo com um nome claro.  Por exemplo, precisamos encontrar todas as palavras em uma linha, fazer uma chamada para um servi√ßo de terceiros para cada palavra, obter uma descri√ß√£o da palavra, aplicar formata√ß√£o √† descri√ß√£o e salvar os resultados no banco de dados.  Esta √© uma sequ√™ncia de a√ß√µes em 4 etapas.  √â muito conveniente entender o c√≥digo e alterar sua l√≥gica quando houver um m√©todo em que essas etapas sigam uma ap√≥s a outra. </li><li>  Eu realmente quero que as mesmas coisas no c√≥digo sejam implementadas da mesma maneira.  Por exemplo, se acessarmos o banco de dados imediatamente a partir do controlador, √© melhor fazer isso em qualquer lugar (embora eu n√£o chamaria essa pr√°tica de bom design).  E se j√° inserimos os n√≠veis de servi√ßos e reposit√≥rios, √© melhor n√£o entrar em contato com o banco de dados diretamente do controlador. </li><li>  Eu gostaria que o n√∫mero de classes / interfaces n√£o diretamente respons√°veis ‚Äã‚Äãpor requisitos funcionais e n√£o funcionais n√£o fosse muito grande.  Trabalhar com um projeto no qual existem duas interfaces para cada classe com l√≥gica, uma hierarquia complexa de heran√ßa de cinco classes, uma f√°brica de classes e uma f√°brica de classes abstrata, √© bastante dif√≠cil. </li></ul><br><h2>  Recomenda√ß√µes pr√°ticas </h2><br>  Tendo formulado desejos, podemos delinear etapas espec√≠ficas que nos permitir√£o alcan√ßar nossos objetivos. <br><br><h3>  M√©todos est√°ticos </h3><br>  Como aquecimento, come√ßarei com uma regra relativamente simples.  Voc√™ n√£o deve criar m√©todos est√°ticos, a menos que sejam necess√°rios para a opera√ß√£o de uma das bibliotecas usadas (por exemplo, voc√™ precisa criar um serializador para um tipo de dados). <br><br>  Em princ√≠pio, n√£o h√° nada de errado em usar m√©todos est√°ticos.  Se o comportamento de um m√©todo depende inteiramente de seus par√¢metros, por que n√£o torn√°-lo realmente est√°tico.  Mas voc√™ precisa levar em conta o fato de que usamos o Spring IoC, que serve para vincular os componentes de nosso aplicativo.  O Spring IoC lida com os conceitos de beans (Beans) e seu escopo (Scope).  Essa abordagem pode ser combinada com m√©todos est√°ticos agrupados em classes, mas entender uma aplica√ß√£o e at√© alterar algo nela (se, por exemplo, voc√™ precisar passar algum par√¢metro global para um m√©todo ou classe) pode ser muito dif√≠cil. <br><br>  Ao mesmo tempo, m√©todos est√°ticos em compara√ß√£o com os compartimentos de IoC oferecem uma vantagem muito insignificante na velocidade de invoca√ß√£o do m√©todo.  E nisso, talvez, as vantagens terminem. <br><br>  Se voc√™ n√£o estiver criando uma fun√ß√£o comercial que exija um grande n√∫mero de chamadas ultra-r√°pidas entre diferentes classes, √© melhor n√£o usar m√©todos est√°ticos. <br><br>  Aqui o leitor pode perguntar: "Mas e as classes StringUtils e IOUtils?"  De fato, uma tradi√ß√£o se desenvolveu no mundo Java - para colocar fun√ß√µes auxiliares para trabalhar com strings e fluxos de entrada e sa√≠da em m√©todos est√°ticos e colet√°-los sob o guarda-chuva das classes SomethingUtils.  Mas essa tradi√ß√£o me parece bastante musgosa.  Se voc√™ segui-lo, √© claro, n√£o se espera grandes danos - todos os programadores Java est√£o acostumados.  Mas n√£o h√° sentido em tal a√ß√£o ritual.  Por um lado, por que n√£o tornar o bean StringUtils, por outro lado, se voc√™ n√£o tornar o bean e todos os m√©todos auxiliares est√°ticos, vamos tornar as classes guarda-chuva est√°ticas StockTradingUtils e BlockChainUtils.  Come√ßando a colocar a l√≥gica em m√©todos est√°ticos, √© dif√≠cil desenhar uma borda e parar.  Eu aconselho voc√™ a n√£o come√ßar. <br><br>  Por fim, n√£o esque√ßa que, pelo Java 11, muitos dos m√©todos auxiliares que vinham vagando pelos desenvolvedores de projeto em projeto por d√©cadas, tornaram-se parte da biblioteca padr√£o ou mesclados em bibliotecas, por exemplo, no Google Guava. <br><br><h3>  Contrato de classe at√¥mica e compacta </h3><br>  Existe uma regra simples que se aplica ao desenvolvimento de qualquer sistema de software.  Olhando para qualquer classe, voc√™ deve ser capaz de explicar de forma r√°pida e compacta, sem recorrer a escava√ß√µes longas, o que essa classe faz.  Se for imposs√≠vel encaixar a explica√ß√£o em um par√°grafo (n√£o √© necess√°rio, no entanto, expresso em uma frase), pode valer a pena pensar e dividir essa classe em v√°rias classes at√¥micas.  Por exemplo, a classe ‚ÄúProcura arquivos de texto em um disco e conta o n√∫mero de letras Z em cada um deles‚Äù - um bom candidato para a decomposi√ß√£o ‚Äúprocura em um disco‚Äù + ‚Äúconta o n√∫mero de letras‚Äù. <br><br>  Por outro lado, n√£o fa√ßa classes muito pequenas, cada uma delas projetada para uma a√ß√£o.  Mas qual o tamanho da classe ent√£o?  As regras b√°sicas s√£o as seguintes: <br><br><ul><li>  Idealmente, quando o contrato de classe corresponde √† descri√ß√£o da fun√ß√£o comercial (ou subfun√ß√£o, dependendo de como os requisitos s√£o organizados).  Isso nem sempre √© poss√≠vel: se uma tentativa de cumprir essa regra levar √† cria√ß√£o de um c√≥digo complicado e n√£o √≥bvio, √© melhor dividir a classe em partes menores. </li><li>  Uma boa m√©trica para avaliar a qualidade de um contrato de classe √© a raz√£o entre sua complexidade intr√≠nseca e a complexidade do contrato.  Por exemplo, um contrato de classe muito bom (embora fant√°stico) pode ser assim: "A classe tem um m√©todo que recebe uma linha com uma descri√ß√£o do assunto em russo na entrada e comp√µe uma hist√≥ria de qualidade ou at√© mesmo uma hist√≥ria sobre um determinado t√≥pico".  Aqui, o contrato √© simples e geralmente entendido.  Sua implementa√ß√£o √© extremamente complexa, mas a complexidade est√° oculta dentro da classe. </li></ul><br>  Por que essa regra √© importante? <br><br><ul><li>  Em primeiro lugar, a capacidade de explicar claramente a si mesmo o que cada uma das classes faz √© sempre √∫til.  Infelizmente, longe de todos os desenvolvedores de projetos, isso √© poss√≠vel.  Voc√™ pode ouvir algo do tipo: ‚ÄúBem, esse √© um inv√≥lucro da classe Path, que de alguma forma criamos e √†s vezes usamos em vez de Path.  Ela tamb√©m possui um m√©todo que pode duplicar todos os caminhos do File.separator - precisamos desse m√©todo ao salvar relat√≥rios na nuvem e, por algum motivo, ele acabou na classe Path. " </li><li>  O c√©rebro humano √© capaz de operar simultaneamente com n√£o mais que cinco a dez objetos.  A maioria das pessoas n√£o tem mais que sete.  Portanto, se um desenvolvedor precisar operar com mais de sete objetos para resolver um problema, ele perder√° algo ou ser√° for√ßado a embalar v√°rios objetos em um "guarda-chuva" l√≥gico.  E se voc√™ ainda precisa empacot√°-lo, por que n√£o faz√™-lo imediatamente, conscientemente, e d√™ a esse guarda-chuva um nome significativo e um contrato claro. </li></ul><br>  Como verificar se tudo √© granular o suficiente?  Pe√ßa a um colega que lhe d√™ 5 (cinco) minutos.  Fa√ßa parte do aplicativo que voc√™ est√° trabalhando atualmente para criar.  Para cada aula, explique a um colega o que exatamente essa aula faz.  Se voc√™ n√£o se encaixa em 5 minutos ou um colega n√£o consegue entender por que essa ou aquela aula √© necess√°ria, talvez voc√™ deva mudar alguma coisa.  Bem, ou n√£o, para mudar e conduzir o experimento novamente, com outro colega. <br><br><h3>  Depend√™ncias de classe </h3><br>  Suponha que precisamos selecionar se√ß√µes de texto vinculadas com mais de 100 bytes para um arquivo PDF compactado em um arquivo ZIP e salv√°-las no banco de dados.  Um antipadr√£o popular nesses casos √© assim: <br><br><ul><li>  Existe uma classe que abre um arquivo ZIP, procura um arquivo PDF e o retorna como um InputStream. </li><li>  Esta classe possui um link para uma classe que pesquisa em par√°grafos de texto em PDF. </li><li>  A classe que trabalha com PDF, por sua vez, possui um link para a classe que armazena dados no banco de dados. </li></ul><br>  Por um lado, tudo parece l√≥gico: dados recebidos, chamados diretamente a pr√≥xima classe da cadeia.  Mas, ao mesmo tempo, os contratos da classe no topo da cadeia se misturam nos contratos e depend√™ncias de todas as classes que est√£o na cadeia por tr√°s dela.  √â muito mais correto tornar essas classes at√¥micas e independentes uma da outra e criar outra classe que realmente implemente a l√≥gica de processamento, conectando essas tr√™s classes uma √† outra. <br><br>  <b>Como n√£o fazer:</b> <br><br><img src="https://habrastorage.org/webt/aj/tc/dm/ajtcdmr07qxyy_6wao0mfffczkq.png"><br><br>  O que h√° de errado aqui?  A classe que trabalha com arquivos ZIP passa os dados para a classe que processa o PDF e, por sua vez, os dados para a classe que trabalha com o banco de dados.  Isso significa que a classe que trabalha com ZIP, como resultado, por algum motivo depende das classes que trabalham com o banco de dados.  Al√©m disso, a l√≥gica de processamento est√° espalhada por tr√™s classes e, para entend√™-la, precisamos passar por todas as tr√™s classes.  E se voc√™ precisar que par√°grafos de texto obtidos em PDF sejam transferidos para um servi√ßo de terceiros por meio de uma chamada REST?  Voc√™ precisar√° alterar a classe que trabalha com PDF e desenhar nela tamb√©m funciona com REST. <br><br>  <b>Como fazer:</b> <br><br><img src="https://habrastorage.org/webt/lu/1k/1f/lu1k1fpwvjc8w660lk9ww295p8s.png"><br><br>  Aqui temos quatro classes: <br><br><ul><li>  Uma classe que funciona apenas com um arquivo ZIP e retorna uma lista de arquivos PDF (pode-se argumentar - retornar arquivos ruins - eles s√£o grandes e quebram o aplicativo. Mas, neste caso, vamos ler a palavra "retorna" em um sentido amplo. Por exemplo, retorna Stream from InputStream ) </li><li>  A segunda classe √© respons√°vel por trabalhar com PDF. </li><li>  A terceira classe n√£o sabe e n√£o pode fazer nada, exceto salvar par√°grafos no banco de dados. </li><li>  E a quarta classe, que consiste literalmente em v√°rias linhas de c√≥digo, cont√©m toda a l√≥gica de neg√≥cios que cabe em uma tela. </li></ul><br>  Enfatizo mais uma vez que em 2019 em Java h√° pelo menos duas boas (e um pouco menos <br>  bom) maneiras de n√£o transferir arquivos e uma lista completa de todos os par√°grafos como objetos na mem√≥ria.  Isto √©: <br><br><ol><li>  API de fluxo Java </li><li>  Retornos de chamada  Ou seja, uma classe com uma fun√ß√£o comercial n√£o transfere dados diretamente, mas diz ZIP Extractor: aqui est√° um retorno de chamada para voc√™, procure arquivos PDF em um arquivo ZIP, crie um InputStream para cada arquivo e chame o retorno transferido com ele. </li></ol><br><h3>  Comportamento impl√≠cito </h3><br>  Quando n√£o estamos tentando resolver um problema completamente novo que n√£o foi resolvido anteriormente por ningu√©m, mas fazer algo que outros desenvolvedores j√° fizeram v√°rias centenas (ou centenas de milhares) de vezes antes, todos os membros da equipe t√™m algumas expectativas em rela√ß√£o √† complexidade ciclom√°tica e intensidade de recursos da solu√ß√£o .  Por exemplo, se precisarmos encontrar em um arquivo todas as palavras que come√ßam com a letra z, essa √© uma leitura sequencial √∫nica do arquivo em blocos do disco.  Ou seja, se voc√™ se concentrar em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://gist.github.com/jboner/2841832 -</a> essa opera√ß√£o levar√° v√°rios microssegundos por 1 MB, talvez, dependendo do ambiente de programa√ß√£o e da carga do sistema, v√°rias dezenas ou at√© cem microssegundos, mas nem um segundo.  Ser√£o necess√°rias v√°rias dezenas de kilobytes de mem√≥ria (deixamos de fora a quest√£o do que estamos fazendo com os resultados, essa √© a preocupa√ß√£o de outra classe) e o c√≥digo provavelmente levar√° cerca de uma tela.  Ao mesmo tempo, esperamos que nenhum outro recurso do sistema seja usado.  Ou seja, o c√≥digo n√£o cria threads, grava dados em disco, envia pacotes pela rede e salva dados no banco de dados. <br><br>  Esta √© a expectativa usual de uma chamada de m√©todo: <br><br><pre><code class="java hljs">zWordFinder.findZWords(inputStream). ...</code> </pre> <br>  Se o c√≥digo da sua classe n√£o atender a esses requisitos por algum motivo razo√°vel, por exemplo, para classificar uma palavra em z e n√£o z, voc√™ precisar√° chamar o m√©todo REST todas as vezes (n√£o sei por que isso pode ser necess√°rio, mas vamos imaginar isso) √© necess√°rio escrever com muito cuidado no contrato da classe e √© muito bom se o nome do m√©todo indicar que o m√©todo est√° sendo executado em algum lugar para consulta. <br><br>  Se voc√™ n√£o tiver um motivo razo√°vel para um comportamento impl√≠cito, reescreva a classe. <br><br>  Como entender as expectativas da complexidade e intensidade dos recursos do m√©todo?  Voc√™ precisa recorrer a uma destas maneiras simples: <br><br><ol><li>  Com a experi√™ncia, obtenha horizontes bastante amplos. </li><li>  Pergunte a um colega - isso sempre pode ser feito. </li><li>  Antes de iniciar o desenvolvimento, converse com os membros da equipe sobre o plano de implementa√ß√£o. </li><li>  Para se perguntar: "Mas n√£o uso muitos recursos redundantes nesse m√©todo?"  Isso geralmente √© suficiente. </li></ol><br>  Voc√™ tamb√©m n√£o precisa se envolver na otimiza√ß√£o - salvar 100 bytes quando usado pela classe 100.000 n√£o faz muito sentido para a maioria dos aplicativos. <br><br>  Essa regra abre uma janela para o rico mundo da engenharia excedente, ocultando respostas a perguntas como "por que voc√™ n√£o gasta um m√™s para salvar 10 bytes de mem√≥ria em um aplicativo que precisa de 10 GB para funcionar"?  Mas n√£o vou desenvolver esse t√≥pico aqui.  Ela merece um artigo separado. <br><br><h3>  Nomes de m√©todos impl√≠citos </h3><br>  Na programa√ß√£o Java, atualmente existem v√°rias conven√ß√µes impl√≠citas sobre nomes de classes e seu comportamento.  N√£o existem muitos, mas √© melhor n√£o quebr√°-los.  Vou tentar listar aqueles que v√™m √† minha mente: <br><br><ul><li>  Construtor - cria uma inst√¢ncia da classe, pode criar algumas estruturas de dados razoavelmente ramificadas, mas n√£o funciona com o banco de dados, n√£o grava em disco, n√£o envia dados pela rede (eu digo, o criador de logs incorporado pode fazer tudo isso, mas essa √© uma hist√≥ria diferente em de qualquer forma, est√° na consci√™ncia do configurador de registro). </li><li>  Getter - getSomething () - retorna algum tipo de estrutura de mem√≥ria das profundezas do objeto.  Novamente, ele n√£o grava no disco, n√£o realiza c√°lculos complexos, n√£o envia dados pela rede, n√£o funciona com o banco de dados (exceto quando este √© um campo ORM lento e essa √© apenas uma das raz√µes pelas quais os campos pregui√ßosos devem ser usados ‚Äã‚Äãcom muito cuidado) . </li><li>  Setter - setSomething (Algo algo) - define o valor da estrutura de dados, n√£o faz c√°lculos complexos, n√£o envia dados pela rede, n√£o funciona com o banco de dados.  Normalmente, n√£o √© esperado que o configurador implique comportamento ou consumo de quaisquer recursos de computa√ß√£o significativos. </li><li>  equals () e hashcode () - nada √© esperado, exceto c√°lculos e compara√ß√µes simples em uma quantidade linearmente dependente do tamanho da estrutura de dados.  Ou seja, se chamarmos c√≥digo hash para um objeto de tr√™s campos primitivos, espera-se que N * 3 instru√ß√µes computacionais simples sejam executadas. </li><li>  toSomething () - tamb√©m √© esperado que esse m√©todo converta um tipo de dados para outro e, para a convers√£o, ele precise apenas de uma quantidade de mem√≥ria compar√°vel ao tamanho das estruturas e do tempo do processador, que depende linearmente do tamanho das estruturas.  Aqui, note-se que nem sempre a convers√£o de tipo pode ser feita linearmente, por exemplo, converter uma imagem de pixel em um formato SVG pode ser uma a√ß√£o n√£o trivial, mas, nesse caso, √© melhor nomear o m√©todo de maneira diferente.  Por exemplo, o nome computeAndConvertToSVG ‚Äã‚Äã() parece um pouco estranho, mas sugere imediatamente que alguns c√°lculos significativos est√£o ocorrendo dentro dele. </li></ul><br>  Eu darei um exemplo  Recentemente, fiz uma auditoria de aplicativos.  Pela l√≥gica do trabalho, eu sei que o aplicativo em algum lugar do c√≥digo assina a fila RabbitMQ.  Estou seguindo o c√≥digo - n√£o consigo encontrar este lugar.  Estou procurando um apelo direto ao coelho, estou come√ßando a subir, vou para o local do fluxo de neg√≥cios em que a assinatura realmente ocorre - estou come√ßando a jurar.  Como fica no c√≥digo: <br><br><ol><li>  O m√©todo service.getQueueListener (tickerName) √© chamado - o resultado retornado √© ignorado.  Isso pode alertar, mas um peda√ßo de c√≥digo em que os resultados do m√©todo s√£o ignorados n√£o √© o √∫nico no aplicativo. </li><li>  Dentro, tickerName √© verificado como nulo e outro m√©todo getQueueListenerByName (tickerName) √© chamado. </li><li>  Dentro dela, uma inst√¢ncia da classe QueueListener √© obtida do hash pelo nome do ticker (se n√£o estiver, √© criada) e o m√©todo getSubscription () √© chamado nela. </li><li>  E agora, dentro do m√©todo getSubscription (), a assinatura realmente ocorre.  E acontece em algum lugar no meio de um m√©todo do tamanho de tr√™s telas. </li></ol><br>  Vou lhe dizer francamente - sem percorrer toda a cadeia e sem ler uma d√∫zia de telas de c√≥digo atentas, n√£o era realista adivinhar onde est√° a assinatura.  Se o m√©todo fosse chamado subscribeToQueueByTicker (tickerName), pouparia muito tempo. <br><br><h3>  Classes de utilidade </h3><br>  H√° um livro maravilhoso Design Patterns: Elements of Reusable Object-Oriented Software (1994), muitas vezes chamado GOF (Gang of Four, pelo n√∫mero de autores).  O benef√≠cio deste livro √© principalmente o fato de oferecer aos desenvolvedores de diferentes pa√≠ses um √∫nico idioma para descrever os padr√µes de design de classe.  Agora, em vez de "garantir que a classe exista em apenas uma inst√¢ncia e ter um ponto de acesso est√°tico", podemos dizer "singleton".  O mesmo livro causou danos vis√≠veis a mentes fr√°geis.  Esse dano √© bem descrito por uma cita√ß√£o de um dos f√≥runs "Colegas, preciso criar uma loja on-line, diga-me com quais modelos preciso come√ßar".  Em outras palavras, alguns programadores tendem a abusar dos padr√µes de design e, onde quer que voc√™ possa gerenciar com uma classe, √†s vezes eles criam cinco ou seis de uma vez - apenas por precau√ß√£o, ‚Äúpara maior flexibilidade‚Äù. <br><br>  Como decidir se voc√™ precisa de uma f√°brica de classes abstratas (ou outro padr√£o mais complicado que uma interface) ou n√£o?  Existem algumas considera√ß√µes simples: <br><br><ol><li>  Se voc√™ estiver escrevendo um aplicativo no Spring, 99% do tempo n√£o ser√° necess√°rio.  O Spring oferece blocos de constru√ß√£o de n√≠vel superior, use-os.  O m√°ximo que voc√™ pode achar √∫til √© uma classe abstrata. </li><li>  Se o ponto 1 ainda n√£o lhe deu uma resposta clara - lembre-se de que cada modelo tem +1000 pontos para a complexidade do aplicativo.  Analise cuidadosamente se os benef√≠cios do uso do modelo superam os danos causados ‚Äã‚Äãpor ele.  Voltando a uma met√°fora, lembre-se de que cada medicamento n√£o apenas cura, mas tamb√©m prejudica levemente.  N√£o beba todos os comprimidos de uma s√≥ vez. </li></ol><br><br>  Um bom exemplo de como voc√™ n√£o precisa, pode ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h2>  Conclus√£o </h2><br>  Para resumir, quero observar que listei as recomenda√ß√µes mais b√°sicas.  Eu nem os mostraria na forma de um artigo - eles s√£o t√£o √≥bvios.  Mas, no ano passado, me deparei com aplicativos com muita frequ√™ncia nas quais muitas dessas recomenda√ß√µes foram violadas.  Vamos escrever um c√≥digo simples, f√°cil de ler e manter. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt443756/">https://habr.com/ru/post/pt443756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt443744/index.html">Enciclop√©dia de Ilumina√ß√£o por Naughty Dog</a></li>
<li><a href="../pt443746/index.html">Mercado de jogos, tend√™ncias e previs√µes - √≥timas an√°lises da App Annie</a></li>
<li><a href="../pt443748/index.html">Apresenta√ß√£o Tesla Model Y - o que esperar e onde procurar</a></li>
<li><a href="../pt443752/index.html">Kotlin como o futuro do desenvolvimento de aplicativos Android</a></li>
<li><a href="../pt443754/index.html">Sobre a adequa√ß√£o do Selenium WebDriverWait</a></li>
<li><a href="../pt443758/index.html">Reconhecimento r√°pido do Doodle de desenho: Como fazer amigos R, C ++ e redes neurais</a></li>
<li><a href="../pt443764/index.html">O que o designer fumava: uma arma de fogo incomum</a></li>
<li><a href="../pt443766/index.html">Tentando a programa√ß√£o de contratos C ++ 20 agora</a></li>
<li><a href="../pt443768/index.html">Mon√≥lito para centenas de vers√µes de clientes: como escrevemos e suportamos testes</a></li>
<li><a href="../pt443770/index.html">Design Orientado a Dom√≠nio: Objetos de Valor e N√∫cleo da Estrutura de Entidades na Pr√°tica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>