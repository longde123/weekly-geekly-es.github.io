<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò∏ üëêüèæ üìê Voc√™ mesmo provedor VDS üôãüèª üëáüèæ ü§®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Se voc√™ deseja tirar proveito do VDS e, ao mesmo tempo, se proteger de uma prote√ß√£o sem escr√∫pulos, quando o provedor obstrui o n√≥ aos olhos e n√£o equ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Voc√™ mesmo provedor VDS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/first/blog/414741/"><img src="https://habrastorage.org/webt/lb/xe/q6/lbxeq6q_bjkeqi_lnwqv4wkrdkk.jpeg"><br><br>  Se voc√™ deseja tirar proveito do VDS e, ao mesmo tempo, se proteger de uma prote√ß√£o sem escr√∫pulos, quando o provedor obstrui o n√≥ aos olhos e n√£o equilibra a carga, h√° duas maneiras. <br><br>  Voc√™ pode encontrar seu hoster VDS confi√°vel.  Ou mate todos os Siths e fa√ßa sua pr√≥pria estrela da morte (n√≥) - pe√ßa um servidor dedicado e transfira todos os seus VDS para l√°.  Afinal, teremos certeza de que todos os recursos s√£o apenas nossos e sempre estar√£o dispon√≠veis.  Sim, e podemos instalar qualquer sistema operacional que desejarmos, qualquer software que seja impaciente e o Bitrix deliciar√° os papagaios devido √† alta frequ√™ncia do processador.  Quem sabe, talvez at√© os chefes se tornem mais generosos e escrevam um b√¥nus.  Vamos l√°! <a name="habracut"></a><br><br><h2>  Consideramos quanto midicloriano temos </h2><br>  Primeiro, voc√™ precisa descobrir o custo total do aluguel de uma frota de VDS e o consumo real de recursos do processador, RAM / mem√≥ria permanente, o n√∫mero de IPs.  Descubra a frequ√™ncia do processador que √© alocado pelo seu VDS.  Aqui, todos os hosters individualmente - examinamos os hor√°rios, consideramos os pre√ßos. <br><br><h2>  Escolhendo o corpo certo </h2><br>  Agora que conhecemos os requisitos atuais de recursos, selecionamos o servidor dedicado apropriado. <br><br><h4>  CPU </h4><br>  Ao escolher um processador, √© importante considerar - a frequ√™ncia principal pode ser significativamente maior do que no VDS atual.  Se tiver o dobro, voc√™ pode considerar um kernel Dedic para dois kernels VDS.  Pode haver uma tempestade de indigna√ß√£o, mas voc√™ deve entender: todos os projetos s√£o diferentes e esta √© a maneira mais f√°cil de escolher um processador.  Em geral, tomamos o n√∫mero de n√∫cleos que s√£o realmente usados ‚Äã‚Äãpelo VDS antigo, se a frequ√™ncia do n√∫cleo de cerca de 2 Ghz for dividida por dois. <br>  O valor resultante √© o n√∫mero m√≠nimo de kernels de dedica necess√°rios. <br><br><h4>  A mem√≥ria </h4><br>  Com RAM e um disco r√≠gido, tudo √© simples.  Resumimos os recursos do VDS, adicionamos 1 GB de RAM e ~ 10 GB de disco r√≠gido.  Esses recursos adicionais s√£o necess√°rios para o sistema operacional e o painel de controle do hipervisor funcionar.  Se voc√™ deseja aumentar a quantidade de conte√∫do - fa√ßa uma reserva de recursos para o crescimento do projeto. <br><br><h4>  Endere√ßos IP </h4><br>  Como no caso da mem√≥ria, usamos o mesmo n√∫mero de endere√ßos do VDS-kah + 1 para o pr√≥prio Dedik. <br><br>  Solicitamos um servidor que atenda aos nossos requisitos e levando em considera√ß√£o as nuances mencionadas.  N√≥s escolhemos o Debian 9 como o sistema operacional; √© nesse sistema operacional que eles criam um painel de controle Proxmox adequado. <br><br><h2>  Desperte o poder </h2><br>  Depois de algum tempo, teremos acesso root ao nov√≠ssimo Dedik. <br>  √â hora de dizer algumas palavras sobre o painel de controle do hipervisor Proxmox, quente e de tubo.  Sim, o painel em si √© gratuito - os desenvolvedores ganham uma assinatura.  Os assinantes, por sua vez, obt√™m uma vers√£o mais est√°vel do painel e a capacidade de adicionar mais n√≥s no modo de cluster.  Mas, para nosso prop√≥sito, a vers√£o gratuita √© suficiente. <br><br>  Recentemente, o painel foi significativamente atualizado, agora parece muito moderno e funcional.  Ele suporta virtualiza√ß√£o KVM e LXC, permite que voc√™ organize sua ceph-cloud, suporta backup, em uma palavra pode fazer tudo o que um usu√°rio comum de uma hospedagem VDS pode precisar. <br><br><h4>  Introdu√ß√£o √† instala√ß√£o do Proxmox </h4><br>  N√≥s nos conectamos ao servidor via ssh usando putty ou outro cliente ssh e executamos os seguintes comandos sequencialmente: <br><br><pre><code class="hljs powershell">echo <span class="hljs-string"><span class="hljs-string">"deb http://download.proxmox.com/debian/pve stretch pve-no-subscription"</span></span> &gt; /etc/apt/sources.list.d/pve<span class="hljs-literal"><span class="hljs-literal">-install</span></span><span class="hljs-literal"><span class="hljs-literal">-repo</span></span>.list wget http://download.proxmox.com/debian/proxmox<span class="hljs-literal"><span class="hljs-literal">-ve</span></span><span class="hljs-literal"><span class="hljs-literal">-release</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span>.x.gpg <span class="hljs-literal"><span class="hljs-literal">-O</span></span> /etc/apt/trusted.gpg.d/proxmox<span class="hljs-literal"><span class="hljs-literal">-ve</span></span><span class="hljs-literal"><span class="hljs-literal">-release</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span>.x.gpg apt update &amp;&amp; apt dist<span class="hljs-literal"><span class="hljs-literal">-upgrade</span></span> apt install <span class="hljs-literal"><span class="hljs-literal">-y</span></span> proxmox<span class="hljs-literal"><span class="hljs-literal">-ve</span></span> postfix <span class="hljs-built_in"><span class="hljs-built_in">open-iscsi</span></span> apt remove <span class="hljs-literal"><span class="hljs-literal">-y</span></span> os<span class="hljs-literal"><span class="hljs-literal">-prober</span></span></code> </pre> <br>  Ap√≥s a conclus√£o da instala√ß√£o, v√° para Proxmox, para obter autoriza√ß√£o, use o navegador na porta 8006 da dedica <code>https://IP-:8006</code> <br><br><img src="https://habrastorage.org/webt/mh/_p/t1/mh_pt1drekhxeglfhg3fnch7rdw.png"><br><br>  Tamb√©m efetuamos login como root, a interface √© muito bem traduzida para o √≥timo e poderoso - voc√™ pode us√°-lo com seguran√ßa. <br><br>  Assim que voc√™ fizer login, voc√™ ver√° uma mensagem com uma dica de inscri√ß√£o.  Isso n√£o √© necess√°rio - o painel n√£o para de funcionar, como √© o caso das vers√µes de avalia√ß√£o dos programas. <br><br><img src="https://habrastorage.org/webt/a-/uv/j2/a-uvj2-6ephahggkfxrba8igeyc.png"><br><br>  Antes de criar o primeiro VDS no novo servidor, voc√™ precisa configurar a ponte de rede para que tudo fique como se fosse de uma maneira adulta.  Nesse est√°gio, voc√™ pode precisar de KVM ou ipmi-kvm (se algo der errado e precisar restaurar a disponibilidade do Dedic pela rede). <br><br>  Retornamos ao ssh e editamos o config / etc / network / interfaces usando o plebeian nano ou Orthodox vim.  Trazemos uma configura√ß√£o para este tipo: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">source</span></span> /etc/network/interfaces.d/* <span class="hljs-comment"><span class="hljs-comment"># The loopback network interface auto lo iface lo inet loopback auto vmbr0 iface vmbr0 inet static address IP- netmask - gateway  bridge_ports ens3 //  ,      .   ,  ,  IP     ¬´ip a¬ª. bridge_stp off bridge_fd 0 bridge_maxwait 0</span></span></code> </pre><br>  Depois de salvar a configura√ß√£o editada, enviamos o Dedik para a reinicializa√ß√£o.  Al√©m de configurar a rede, tamb√©m carregar√° o novo kernel. <br><br>  Depois de iniciar o servidor, recorremos novamente ao SSH para baixar as imagens ISO dos sistemas operacionais para VDS futuro, bem como a imagem sysrescuecd.  As imagens precisam ser colocadas no diret√≥rio / var / lib / vz / template / iso <br>  Para download, usamos os links diretos e wget.  Voc√™ n√£o pode baixar imagens do sistema se apenas deseja transferir o VDS existente para o Dedic.  Mas a imagem sysrescuecd pode ser necess√°ria para atender ao VDS, por isso √© altamente recomend√°vel baix√°-la imediatamente. <br><br><h2>  Vai conquistar uma gal√°xia distante </h2><br>  Est√° na hora de criar o VDS em nosso Dedic: pressione o bot√£o "Criar VM" no canto superior direito do painel Proxmox, preencha os campos em todas as guias usando os dados de qualquer um dos VDS antigos.  O formato da imagem √© selecionado qcow2. <br><br><img src="https://habrastorage.org/webt/bi/q3/z1/biq3z14ds14z_ilhroqytbiqjda.png"><br><br>  As imagens de disco ser√£o criadas ao longo do caminho / var / lib / vz / images / [aqui est√° o ID do novo VDS]. <br><br>  Solicitamos imagens no formato qcow2 do hoster VDS e as carregamos em vez das criadas anteriormente.  Selecione VDS na lista √† esquerda e inicie-o com o bot√£o "Iniciar".  Agora que temos nosso servidor virtual com todos os projetos, resta apenas corrigir as configura√ß√µes de rede no pr√≥prio VDS e alterar o DNS para o IP da nova m√°quina virtual.  Voc√™ pode fazer essas configura√ß√µes atrav√©s do VNC, que est√° dispon√≠vel clicando no bot√£o Console. <br><br><h4>  Monitoramento </h4><br>  Ap√≥s concluir a transfer√™ncia e alterar o DNS, come√ßamos a monitorar os indicadores de carga.  Isso n√£o √© necess√°rio, mas √∫til.  Para esse monitoramento, voc√™ pode visualizar o resumo geral do cluster. <br><br><img src="https://habrastorage.org/webt/iq/bj/ob/iqbjobj-21dpilq18qec995ppk4.png"><br><br>  O resumo do n√≥ tem mais detalhes: <br><br><img src="https://habrastorage.org/webt/pw/0o/6e/pw0o6e60se3f58bhk-7cz3uryb8.png"><br><br>  Se, repentinamente, algum recurso do n√≥ estiver acabando, nos resumos do VDS, voc√™ poder√° determinar qual deles consome muitos recursos e otimizar os servi√ßos do problema do VDS.  Quando os projetos superam o servidor atual, para mudar para um hardware mais produtivo, basta reorganizar os discos de um servidor para outro.  Esse trabalho leva cerca de 15 minutos - muito mais r√°pido que a migra√ß√£o do VDS entre n√≥s. <br><br>  Dedik tamb√©m tem desvantagens, √© claro, mas o Proxmox ajuda a nivel√°-las.  A primeira √© que, se Dedik se deitar, todos os VDS cair√£o.  O problema √© resolvido por redund√¢ncia, mas s√£o necess√°rios mais D√©dicos.  Mesmo ao usar um servidor dedicado, voc√™ precisa configurar o RAID 1 e monitorar o status dos discos usando o smartd (e √© isso que o Proxmox pode fazer).  No caso do VDS, o mesmo problema √© resolvido com o pedido de m√°quinas virtuais de v√°rios fornecedores, mas isso n√£o √© muito conveniente. <br><br>  Mudar para um servidor dedicado √© uma etapa razo√°vel quando o custo do VDS alugado √© compar√°vel ao pre√ßo de um servidor dedicado.  Voc√™ pode escolher uma configura√ß√£o pronta ou criar seu pr√≥prio Dedic no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FirstDEDIC</a> .  Se voc√™ deseja que os projetos voem, escolha discos NVMe de alta velocidade (2-3 vezes mais r√°pido que o SSD). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt414741/">https://habr.com/ru/post/pt414741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt414731/index.html">ngCinimex - Angular Moscow Meetup (07/02/2018)</a></li>
<li><a href="../pt414733/index.html">Entre os dez primeiros: uma hist√≥ria pessoal sobre como se tornar um RHCA e o que voc√™ pode obter dele</a></li>
<li><a href="../pt414735/index.html">Marca de TI. O que falar com as pessoas em confer√™ncias</a></li>
<li><a href="../pt414737/index.html">"Eles n√£o esperaram de onde": o Yahoo ser√° multado em 250 mil libras por violar as regras antigas de trabalho com a PD</a></li>
<li><a href="../pt414739/index.html">go-critical: o analisador est√°tico mais teimoso do Go</a></li>
<li><a href="../pt414743/index.html">Localiza√ß√£o: Case Slack</a></li>
<li><a href="../pt414745/index.html">#BigGun. O cron√≥grafo "frame" mais simples do Arduino (medi√ß√£o da velocidade da bala)</a></li>
<li><a href="../pt414747/index.html">CNS, drogas e rock and roll: uma hist√≥ria sobre um dispositivo que nos fez beber, n√£o dormir e n√£o piscar</a></li>
<li><a href="../pt414749/index.html">Conjunto de sysadmin cavalheiro</a></li>
<li><a href="../pt414751/index.html">Domesticando o WSUS com Ansible e mais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>