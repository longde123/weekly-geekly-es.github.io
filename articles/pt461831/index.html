<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì´ üïã üÖæÔ∏è StealthWatch: Implanta√ß√£o e Personaliza√ß√£o. Parte 2 üëâ üèéÔ∏è üï∫üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° colegas! Depois de determinar os requisitos m√≠nimos para a implanta√ß√£o do StealthWatch na √∫ltima parte , podemos come√ßar a implanta√ß√£o do produto....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>StealthWatch: Implanta√ß√£o e Personaliza√ß√£o. Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tssolution/blog/461831/"><img src="https://habrastorage.org/webt/el/jd/3y/eljd3ycrtg2yb7ifax-um20gnje.png"><br><br>  Ol√° colegas!  Depois de determinar os requisitos m√≠nimos para a implanta√ß√£o do StealthWatch na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√∫ltima parte</a> , podemos come√ßar a implanta√ß√£o do produto. <br><br><h3>  1. Maneiras de implantar o StealthWatch </h3><br>  Existem v√°rias maneiras de "tocar" o StealthWatch: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dcloud</a> - um servi√ßo de laborat√≥rio em nuvem; </li><li>  Baseado em nuvem: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Avalia√ß√£o gratuita do Stealthwatch Cloud</a> - aqui, o Netflow do seu dispositivo ser√° espalhado na nuvem e o software StealthWatch ser√° analisado l√°; </li><li>  POV no local ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">solicita√ß√£o GVE</a> ) - do jeito que eu fui, eles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">soltar√£o</a> 4 arquivos OVF de m√°quinas virtuais com licen√ßas integradas por 90 dias que podem ser implantados em um servidor dedicado na rede corporativa. </li></ul><a name="habracut"></a><br>  Apesar da abund√¢ncia de m√°quinas virtuais baixadas, para uma configura√ß√£o m√≠nima de trabalho, apenas duas s√£o suficientes: StealthWatch Management Console e FlowCollector.  No entanto, se n√£o houver um dispositivo de rede que possa exportar o Netflow para um FlowCollector, ser√° necess√°rio implantar o FlowSensor, pois o √∫ltimo permite coletar o Netflow usando as tecnologias SPAN / RSPAN. <br><br>  Como eu disse anteriormente, sua rede real pode atuar como um suporte de laborat√≥rio, pois o StealthWatch precisa apenas de uma c√≥pia ou, mais corretamente, de uma c√≥pia do tr√°fego.  A figura abaixo mostra minha rede, onde, no Security Gateway, configurarei o Netflow Exporter e, como resultado, enviarei o Netflow para o coletor. <br><br><img src="https://habrastorage.org/webt/zq/-h/qq/zq-hqqpztzl9obji7bgzo_65-jq.png"><br><br>  Para acessar VMs futuras, no firewall, se houver, as seguintes portas devem estar ativadas: <br><br>  <b>TCP 22 l TCP 25 l TCP 389 l TCP 443 l TCP 2393 l TCP 5222 l UDP 53 l UDP 123 l UDP 161 l UDP 162 l UDP 162 l UDP 389 l UDP 514 l UDP 2055 l UDP 6343</b> <br><br>  Alguns deles s√£o servi√ßos conhecidos, outros s√£o reservados para servi√ßos da Cisco. <br>  No meu caso, eu apenas implantei o StelathWatch na mesma rede que o Check Point e n√£o precisei configurar nenhuma regra de permiss√£o. <br><br><h3>  2. Instalando o FlowCollector usando o VMware vSphere como exemplo </h3><br>  2.1  Clique em Procurar e selecione o arquivo OVF1.  Ap√≥s verificar a disponibilidade dos recursos, v√° para o menu Exibir, Invent√°rio ‚Üí Rede (Ctrl + Shift + N). <br><br><img src="https://habrastorage.org/webt/v6/xz/xg/v6xzxgemxql11zyz7digodat_dc.png"><br><br>  2.2  Na guia Rede, selecione Novo grupo de portas distribu√≠das nas configura√ß√µes do comutador virtual. <br><br><img src="https://habrastorage.org/webt/nr/ta/3t/nrta3ti4d3syipr_7kqwklxkjyk.png"><br><br>  2.3  Definimos o nome, seja StealthWatchPortGroup, o restante das configura√ß√µes pode ser feito como na captura de tela e clique em Avan√ßar. <br><br><img src="https://habrastorage.org/webt/nz/lj/z5/nzljz5wsrlnbc__gmvmu1yy2pzk.png"><br><br><img src="https://habrastorage.org/webt/el/77/6p/el776psiknbm1qrl21trgmjkiyw.png"><br><br>  2.4  Conclu√≠mos a cria√ß√£o do grupo de portas com o bot√£o Concluir. <br><br><img src="https://habrastorage.org/webt/ev/nx/dm/evnxdmxaofyxqyufr2igey6noi4.png"><br><br>  2.5  No grupo de portas criado, edite as configura√ß√µes clicando com o bot√£o direito do mouse no grupo de portas, selecione Editar configura√ß√µes.  Na guia Seguran√ßa, certifique-se de ativar o "modo inaud√≠vel", Modo prom√≠scuo ‚Üí Aceitar ‚Üí OK. <br><br><img src="https://habrastorage.org/webt/j3/ga/-s/j3ga-sx9-lb6xfc5aah3ixk9cvi.png"><br><br>  2.6  Como exemplo, importamos o OVF FlowCollector, cujo link de download foi enviado por um engenheiro da Cisco ap√≥s uma solicita√ß√£o GVE.  Clique com o bot√£o direito do mouse no host no qual planeja implantar a VM, selecione Implantar modelo OVF.  Em rela√ß√£o ao espa√ßo alocado, ele ser√° "inicializado" em 50 GB, mas para condi√ß√µes de combate, √© recomend√°vel alocar 200 gigabytes. <br><br><img src="https://habrastorage.org/webt/fb/gc/3a/fbgc3augeta-akzjk1py4ikglzg.png"><br><br>  2.7  Selecione a pasta em que o arquivo OVF est√° localizado. <br><br><img src="https://habrastorage.org/webt/sl/j3/_z/slj3_zkycimo6o9wnkvpty2e6jq.png"><br><br>  2.8  Clique em "Next". <br><br><img src="https://habrastorage.org/webt/tl/0e/dn/tl0ednjv5tdfxhryi1n9i1xuvrw.png"><br><br>  2.9  Indicamos o nome e o servidor em que o implantamos. <br><br><img src="https://habrastorage.org/webt/-n/ai/le/-naileut5oywhdn7cpbb7ff1bvs.png"><br><br>  2.10  Como resultado, obtemos a seguinte imagem e clique em "Concluir". <br><br><img src="https://habrastorage.org/webt/xf/c6/kg/xfc6kgbvccpwusqahl5lwqxhjr4.png"><br><br>  2.11  Seguimos as mesmas etapas para implantar o StealthWatch Management Console. <br><br><img src="https://habrastorage.org/webt/pl/oc/ek/plocekjtzimzvxg8tjwgpkatb1i.png"><br><br>  2.12  Agora voc√™ precisa especificar as redes necess√°rias nas interfaces para que o FlowCollector veja o SMC e os dispositivos dos quais o Netflow ser√° exportado. <br><br><h3>  3. Inicializando o StealthWatch Management Console </h3><br>  3.1  Acessando o console da m√°quina SMCVE instalada, voc√™ ver√° um local para inserir seu login e senha, por padr√£o <b>sysadmin / lan1cope</b> . <br><br><img src="https://habrastorage.org/webt/ji/c2/rx/jic2rxycyyjhf-abh4jm80upnpy.png"><br><br>  3.2  Vamos ao ponto de gerenciamento, configuramos o endere√ßo IP e outros par√¢metros de rede e confirmamos sua altera√ß√£o.  O dispositivo ir√° reiniciar. <br><br><img src="https://habrastorage.org/webt/z0/oz/qe/z0ozqewtvkxzcnhnm0g4oiwjcgu.png"><br><br><img src="https://habrastorage.org/webt/yq/72/df/yq72dfk7prajwydts60rspvumxe.png"><br><br><img src="https://habrastorage.org/webt/i7/ae/li/i7aeli91n8tshejaf6bd7nxa8jm.png"><br><br>  3.3  V√° para a interface da web (via https no endere√ßo que voc√™ especificou SMC) e inicialize o console; o nome de usu√°rio / senha padr√£o √© <b>admin / lan411cope</b> . <br><br>  PS: acontece que o Google Chrome n√£o abre, o Explorer sempre ajudar√°. <br><br><img src="https://habrastorage.org/webt/zd/xs/gj/zdxsgjmf5jx1sytnvxk6ycxafom.png"><br><br>  3.4  Certifique-se de alterar as senhas, definir DNS, servidores NTP, dom√≠nio e muito mais.  As configura√ß√µes s√£o intuitivas. <br><br><img src="https://habrastorage.org/webt/js/aa/jq/jsaajq0ie-2efa4bimgh9w026jo.png"><br><br>  3.5  Depois de clicar no bot√£o "Aplicar", o dispositivo ser√° reiniciado novamente.  Ap√≥s 5 a 7 minutos, voc√™ pode se conectar novamente a este endere√ßo;  O StealthWatch ser√° gerenciado atrav√©s de uma interface da web. <br><br><img src="https://habrastorage.org/webt/00/y5/ze/00y5zegb4ienavlp-8q5alarysa.png"><br><br><h3>  4. Configurando o FlowCollector </h3><br>  4.1  Com o colecionador da mesma forma.  Primeiro, na CLI, especifique o endere√ßo IP, a m√°scara, o dom√≠nio e o FC ser√° reinicializado.  Depois disso, voc√™ pode conectar-se √† interface da web no endere√ßo especificado e executar a mesma configura√ß√£o b√°sica.  Devido ao fato de as configura√ß√µes serem semelhantes, as capturas de tela detalhadas s√£o omitidas.  As <b>credenciais de</b> logon <b>s√£o as mesmas</b> . <br><br><img src="https://habrastorage.org/webt/7l/lx/dr/7llxdr6wrexyw0u-b92hpb7hhja.png"><br><br>  4.2  No pen√∫ltimo item, voc√™ deve especificar o endere√ßo IP do SMC; nesse caso, o console ver√° o dispositivo; ser√° necess√°rio inserir essa credencial para confirmar essa configura√ß√£o. <br><br><img src="https://habrastorage.org/webt/ra/44/yd/ra44ydcvqg-127ysgub3ud5cvse.png"><br><br>  4.3  Selecionamos o dom√≠nio para o StealthWatch, que foi definido anteriormente e a porta <b>2055</b> √© o Netflow normal, se voc√™ trabalha com o sFlow, porta <b>6343</b> . <br><br><img src="https://habrastorage.org/webt/xb/x3/ht/xbx3htreuzwgzeo0y8r5t-ftzhi.png"><br><br><h3>  5. Configura√ß√£o do Exportador do Netflow </h3><br>  5.1  Para configurar o exportador do Netflow, eu recomendo consultar este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recurso</a> , aqui est√£o os principais guias para configurar o exportador do Netflow para muitos dispositivos: Cisco, Check Point, Fortinet. <br><br>  5.2  No nosso caso, repito, exportamos o Netflow do gateway Check Point.  O exportador do Netflow √© configurado em uma guia com um nome semelhante na interface da web (Gaia Portal).  Para fazer isso, clique em "Adicionar", especifique a vers√£o do Netflow e a porta necess√°ria. <br><br><img src="https://habrastorage.org/webt/yb/lw/jh/yblwjhnrugni5pkjyygj9ty4to4.png"><br><br><h3>  6. An√°lise do trabalho do StealthWatch </h3><br>  6.1  Indo para a interface da Web SMC, na primeira p√°gina de Dashboards&gt; Network Security, voc√™ pode ver que o tr√°fego acabou! <br><br><img src="https://habrastorage.org/webt/l0/h2/e8/l0h2e8gr3wnp2hrzomrmo7fsj24.png"><br><br>  6.2  Algumas configura√ß√µes, por exemplo, dividindo hosts em grupos, monitorando interfaces individuais, sua carga de trabalho, gerenciando coletores e muito mais, s√≥ podem ser encontradas no aplicativo Java StealthWatch.  Obviamente, a Cisco est√° transferindo lentamente toda a funcionalidade para a vers√£o do navegador e em breve recusaremos esse cliente de desktop. <br><br>  Para instalar o aplicativo, voc√™ deve primeiro instalar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JRE</a> (eu instalei a vers√£o 8, embora se diga que √© suportado at√© 10) no site oficial da Oracle. <br><br>  No canto superior direito da interface da web do console de gerenciamento, para fazer o download, clique no bot√£o "Desktop Client". <br><br><img src="https://habrastorage.org/webt/70/66/xi/7066xidd88ts1ssot58-9nzyap8.png"><br><br>  Voc√™ salva e instala o cliente √† for√ßa, o java provavelmente jura; talvez seja necess√°rio adicionar o host √†s exce√ß√µes do java. <br><br>  Como resultado, √© aberto um cliente bastante compreens√≠vel, no qual √© f√°cil ver o carregamento de exportadores, interfaces, ataques e seus fluxos. <br><br><img src="https://habrastorage.org/webt/by/d6/id/byd6idovrokyvikqntkugvz62bk.png"><br><br><img src="https://habrastorage.org/webt/k_/if/s6/k_ifs69lxeh7pgcl0zvgwibjpzq.png"><br><br><img src="https://habrastorage.org/webt/tm/q5/uf/tmq5ufnvltaw7y4eogtcknps348.png"><br><br><h3>  7. Gerenciamento Central do StealthWatch </h3><br>  7.1  A guia Gerenciamento Central cont√©m todos os dispositivos que fazem parte do StealthWatch implantado, como: FlowCollector, FlowSensor, UDP-Director e Endpoint Concetrator.  L√°, voc√™ pode gerenciar configura√ß√µes de rede e servi√ßos do dispositivo, licen√ßas e desligar manualmente o dispositivo. <br><br>  Voc√™ pode acessar clicando na "engrenagem" no canto superior direito e selecionando Gerenciamento Central. <br><br><img src="https://habrastorage.org/webt/dk/v5/nm/dkv5nm85eznmmvcbhaill9yfuha.png"><br><br><img src="https://habrastorage.org/webt/ho/6d/wl/ho6dwlzdrzo-lkeeos0dxjdm3zs.png"><br><br>  7.2  Ao acessar a Configura√ß√£o da ferramenta de edi√ß√£o no FlowCollector, voc√™ ver√° SSH, NTP e outras configura√ß√µes de rede relacionadas ao pr√≥prio aplicativo.  Para continuar, selecione A√ß√µes ‚Üí Editar configura√ß√£o do dispositivo no dispositivo necess√°rio. <br><br><img src="https://habrastorage.org/webt/b7/wp/wq/b7wpwq31kcjpe98gaj7qfximmzg.png"><br><br><img src="https://habrastorage.org/webt/b4/ty/1g/b4ty1gu-jm9gi4kugiyc-xdepja.png"><br><br><img src="https://habrastorage.org/webt/ca/gl/tp/cagltpj2itdngisbjgbrn9pannw.png"><br><br>  7.3  O gerenciamento de licen√ßas tamb√©m pode ser encontrado na guia Gerenciamento Central&gt; Gerenciar Licen√ßas.  As licen√ßas de avalia√ß√£o em caso de solicita√ß√£o da GVE s√£o concedidas por <b>90 dias</b> . <br><br><img src="https://habrastorage.org/webt/gl/1u/s0/gl1us0nbplbvjoke3mkczz8gb3q.png"><br><br>  O produto est√° pronto para uso!  Na pr√≥xima parte, veremos como o StealthWatch pode detectar ataques e gerar relat√≥rios. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt461831/">https://habr.com/ru/post/pt461831/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt461819/index.html">Por que o design simples de sites √© melhor cientificamente</a></li>
<li><a href="../pt461821/index.html">Nova imunoterapia removeu todos os tumores de uma mulher com c√¢ncer de mama metast√°tico</a></li>
<li><a href="../pt461823/index.html">Quatro regras aprimoradas para design de software</a></li>
<li><a href="../pt461827/index.html">Desenvolvimento de aplicativos h√≠bridos PHP / Go usando RoadRunner</a></li>
<li><a href="../pt461829/index.html">TCP vs UDP ou o futuro dos protocolos de rede</a></li>
<li><a href="../pt461833/index.html">N√£o se perca em tr√™s pinheiros: uma representa√ß√£o egoc√™ntrica do meio ambiente</a></li>
<li><a href="../pt461835/index.html">Como os gr√°ficos de Gantt simplificam e capacitam o gerenciamento de projetos</a></li>
<li><a href="../pt461841/index.html">PVS-Studio olhou para o Bullet Engine do Red Dead Redemption</a></li>
<li><a href="../pt461845/index.html">Investimentos em bolsa como forma de preservar finan√ßas: 3 m√©todos de trabalho</a></li>
<li><a href="../pt461849/index.html">PVS-Studio olhou para o mecanismo Red Dead Redemption - Bullet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>