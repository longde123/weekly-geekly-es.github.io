<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛌🏿 🧝🏿 🤷🏿 Eine Freundschaft mit VkNet beginnen 🌽 ➡️ 🗒️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich bin mit der VkNet- Bibliothek sehr befreundet. Leider ist die Dokumentation für die Arbeit damit ziemlich veraltet. Deshalb habe ich beschlossen, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Eine Freundschaft mit VkNet beginnen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438874/"><img src="https://habrastorage.org/webt/q4/uo/gn/q4uogneid7fbgmtdy6hbvigww48.png" align="left">  Ich bin mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">VkNet-</a> Bibliothek sehr befreundet.  Leider ist die Dokumentation für die Arbeit damit ziemlich veraltet.  Deshalb habe ich beschlossen, ein kleines Tutorial über die Grundlagen der Arbeit mit dieser Bibliothek zu teilen und zu erstellen. <br><a name="habracut"></a><br>  Zunächst müssen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> die Anwendung erstellen. <br><br><img src="https://habrastorage.org/webt/4h/ss/60/4hss60x66cmg14zhptukfo6dggs.png"><br><br>  Nehmen Sie in den Einstellungen der gerade erstellten Anwendung die App-ID. <br><br><img src="https://habrastorage.org/webt/de/oy/u2/deoyu2_twfs-gliicuuuydn47rk.png"><br><br>  Jetzt können Sie direkt zum Code gehen. <br><br>  Erstellen Sie einen .net-Kern für die Konsolenanwendung und fügen Sie eine Abhängigkeit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">VkNet hinzu</a> . <br><br><img src="https://habrastorage.org/webt/hf/7y/gq/hf7ygqrp59s-hyvmgphntws7thu.png"><br><br>  Erstellen Sie eine Instanz von VkApi. <br><br><pre><code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">VkApi</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">api</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">VkApi</span></span>();</code> </pre> <br><br>  Jetzt müssen Sie sich anmelden. <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Authorize</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ApiAuthParams</span></span>() { Login = "+79*******", Password = "***", ApplicationId = 684***, Settings = Settings.All });</code> </pre> <br>  Holen Sie sich eine Liste der letzten 20 Dialoge <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">var</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">dialogs</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Messages</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.GetConversations</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">GetConversationsParams</span></span>());</code> </pre> <br>  Und jetzt bekommen wir die letzten 20 Nachrichten aus dem ersten Dialog. <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">var</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">messages</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Messages</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.GetHistory</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MessagesGetHistoryParams</span></span>() {PeerId = dialogs.Items[0].Conversation.Peer.Id});</code> </pre> <br>  Und vielleicht drucken Sie die Ergebnisse. <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">foreach</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">var</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">msg</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">in</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">messages</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Messages</span></span>) { Console.WriteLine(msg.Text); }</code> </pre> <br>  Und wir werden eine Testnachricht an den Autor der ersten vorherigen Nachricht senden. <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Messages</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Send</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MessagesSendParams</span></span>() { //        PeerId = messages.Messages.First().Id, Message = "Test", RandomId = new Random().Next() });</code> </pre> <br><img src="https://habrastorage.org/webt/yw/s4/kj/yws4kj5p6yqt3_gclbozx5y9pau.png"><br><br>  Als Beispiel: <br><br><img src="https://habrastorage.org/webt/ds/pv/ju/dspvjuy0te46vdoc3zskb3qaqk8.png"><br><br>  Und so haben wir den endgültigen Code bekommen <br><br><div class="spoiler">  <b class="spoiler_title">hier</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">VkApi</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">api</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">VkApi</span></span>(); <span class="hljs-selector-tag"><span class="hljs-selector-tag">api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Authorize</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ApiAuthParams</span></span>() { Login = "*", Password = "*", ApplicationId = *, Settings = Settings.All }); <span class="hljs-selector-tag"><span class="hljs-selector-tag">var</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">dialogs</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Messages</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.GetConversations</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">GetConversationsParams</span></span>()); <span class="hljs-selector-tag"><span class="hljs-selector-tag">var</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">messages</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Messages</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.GetHistory</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MessagesGetHistoryParams</span></span>() {PeerId = dialogs.Items[0].Conversation.Peer.Id}); <span class="hljs-selector-tag"><span class="hljs-selector-tag">Console</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.OutputEncoding</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">Encoding</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.UTF8</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">foreach</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">var</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">msg</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">in</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">messages</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Messages</span></span>) { Console.WriteLine(msg.Text); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Messages</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Send</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MessagesSendParams</span></span>() { PeerId = messages.Messages.First().Id, Message = "Test", RandomId = new Random().Next() });</code> </pre> <br></div></div><br>  PS <br><br>  Unterstützung finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br>  Oder ein tatsächlicher Link zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">tg</a> für diejenigen, die keine regulären Links öffnen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de438874/">https://habr.com/ru/post/de438874/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de438862/index.html">Stellen Sie eine isomorphe Webanwendung am Beispiel von Nuxt.js bereit.</a></li>
<li><a href="../de438864/index.html">Feature einfrieren C ++ 20. Coroutinen, Module und mehr</a></li>
<li><a href="../de438866/index.html">Builder versus Java-Syntax</a></li>
<li><a href="../de438868/index.html">Sicherheitswoche 06: Live auf FaceTime</a></li>
<li><a href="../de438870/index.html">Lombok gibt die Größe von Java zurück</a></li>
<li><a href="../de438876/index.html">So verkürzen Sie die Markteinführungszeit: eine Geschichte über die Testautomatisierung in M. Video</a></li>
<li><a href="../de438878/index.html">Das Erscheinen des Films in Strömen nach der Premiere erhöht die Abendkasse um 3%</a></li>
<li><a href="../de438880/index.html">Wann man var, let und const in Javascript verwendet [Übersetzung aus dem Artikel von Tyler McGinnis]</a></li>
<li><a href="../de438882/index.html">Die Wahrscheinlichkeit, ein Match mit einer bekannten Wahrscheinlichkeit, einen Punkt zu gewinnen, zu gewinnen</a></li>
<li><a href="../de438884/index.html">Wahre Begebenheit einer Outback-Werbeagentur: Höhen, Tiefen und CRM-Implementierung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>