<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™ğŸ¾ ğŸ˜ˆ ğŸ‘©ğŸ½â€âš–ï¸ OMower dengan ROS, langkah pertama ğŸŒ«ï¸ ğŸ© ğŸ¤´ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Awalnya, OMower dirancang untuk antarmuka kontrol pfodApp dan Modbus yang sederhana. Yang pertama adalah protokol teks tingkat tinggi di mana menu dan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OMower dengan ROS, langkah pertama</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434952/">  Awalnya, OMower dirancang untuk antarmuka kontrol pfodApp dan Modbus yang sederhana.  Yang pertama adalah protokol teks tingkat tinggi di mana menu dan perintah kontrol ditransmisikan, dan yang kedua adalah hal yang terkenal, tetapi tidak terlalu nyaman dalam aplikasi ini, karena itu memerlukan program kontrol untuk terus-menerus memeriksa status semua sensor yang digunakan "secara manual".  Oleh karena itu, diputuskan untuk secara bertahap beralih ke ROS (Robot OS), kerangka kerja yang banyak digunakan untuk mengendalikan berbagai robot. <br><br> <a href=""><img src="https://habrastorage.org/webt/rr/7_/np/rr7_npqnn9lphvkluh3gc2ulsx8.jpeg" width="720"></a> <br><br><a name="habracut"></a><br><br>  Saat ini, dukungan ROS berada pada tahap awal, termasuk hanya transmisi informasi dari sensor dalam bentuk array sederhana (tanpa menggunakan format pesan khusus yang ditawarkan oleh banyak perpustakaan ROS), debug log dan kontrol aliran perintah dalam format pfodApp / Modbus, tanpa kemungkinan benar-benar mengendalikan robot dengan alat ROS standar.  Artinya, untuk memindahkan robot dari tempatnya atau mengubah pengaturan internal robot, Anda harus mengirim perintah teks dalam format pfodApp ke sana.  Tetapi bahkan dalam bentuk terpotong seperti itu - Anda dapat dengan mudah menyiarkan dan merekam apa yang terjadi dengan robot, memvisualisasikan pergerakannya dalam alat ROS (rviz) standar, serta menambahkan layanan untuk fungsi tambahan.  Seperti, misalnya, kesempatan untuk naik ke arah templat visual (kotak-kotak) yang disediakan oleh omower_seeker.py, untuk kedatangan yang akurat di stasiun parkir. <br><br>  Gambar menunjukkan aliran data dalam robot.  Layanan ROS utama dijalankan pada Orange PI Zero, terjebak dalam slot khusus pada papan robot (pada mesin uji Raspberry PI3 digunakan untuk ini, terhubung dengan cara yang sama - melalui port serial).  Melalui antarmuka antarmuka, robot mentransmisikan pesan dari sensor (seperti / imu / orientasi atau / motor / PWM), log debug dalam format teks dan output menu / pesan dalam format pfodApp atau Modbus ke kernel ROS, menerima aliran perintah teks atau Modbus -pertanyaan.  Dua tambahan Raspberry PI Zero datang dengan aliran gambar dari kamera, tetapi seperti yang telah ditunjukkan oleh praktik, tidak mungkin untuk mendapatkan sinkronisasi normal untuk memproses gambar stereo dengan skema seperti itu (kualitasnya terlihat pada gambar di bawah), sehingga kamera stereo normal akan segera diganti. <br><br>  Tingkat integrasi ROS dalam OMower akan berangsur-angsur meluas, hingga memberikan akses penuh ke semua variabel internal robot dan kemampuan untuk mengelolanya melalui alat ROS standar (seperti pesan cmd_vel yang menentukan kecepatan yang diperlukan). <br><br> <a href=""><img src="https://habrastorage.org/webt/id/u6/pw/idu6pwvomgxmosirsfjwpl0silm.png" width="720"></a> <br><br>  Saya akan memberi tahu Anda sedikit lebih banyak tentang modul omower_seeker.py, sebagai contoh menggunakan ROS untuk menambahkan fungsi ke OMower.  Tujuannya cukup sederhana - untuk pergi ke arah papan catur, menyesuaikan rute Anda secara real time.  Fitur ini akan digunakan untuk mendorong mesin pemotong rumput ke stasiun parkir, di mana ia dapat dengan cepat mengisi baterainya.  Menganalisis gambar dari salah satu kamera, modul menghitung dua sudut (sudut deviasi papan dari pusat kamera dan sudut rotasi papan itu sendiri relatif terhadap tegak lurus) dan mentransmisikannya sebagai perintah teks ke modul pencari internal (omower-seeker.h / cpp dalam OMower SDK). <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/gCKC3lw30Vo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Dari luar, ini tampak seperti tugas yang cukup sederhana, tetapi dalam kehidupan nyata ada masalah serius - kecepatan pemrosesan gambar pada komputer mikro yang dibangun ke dalam robot.  Seperti yang diperlihatkan oleh praktik, kecepatan mencari pola dalam OpenGL dalam gambar ketika menggunakan Orange PI yang berdaya rendah dan Raspberry Pi sangat rendah dan tidak stabil, mengambil dari puluhan hingga ratusan milidetik pada resolusi 640x480, yang selama mengemudi berubah menjadi penyimpangan dari rute yang diperlukan, karena robot , bahkan dengan kecepatan rendahnya, berhasil mengubah sudut substansial atau menempuh jarak yang relatif besar selama waktu ini.  Sebenarnya, itulah sebabnya papan catur dengan sel minimum dipilih, karena templat lain membutuhkan lebih banyak waktu. <br><br>  Untuk mengimbangi waktu pencarian yang lama untuk templat visual, skema kompas digunakan - mikrokontroler robot menyimpan nilainya setiap 100 milidetik, menyimpan lima sampel dalam setengah detik terakhir (analisis yang lebih lama dibuang begitu saja, karena tidak banyak digunakan untuk navigasi yang akurat).  Sudut terhitung dari omower_seeker.py (yang juga mentransmisikan waktu pencarian templat ke mikrokontroler) dihitung ulang ke sudut rotasi nyata menggunakan nilai kompas yang disimpan, yang tidak lebih dari 100 milidetik dari waktu pencarian, dan robot bergerak di sepanjang sudut ini.  Ini memungkinkan Anda untuk lebih atau kurang akurat pergi ke arah papan catur dalam garis lurus.  Atau, jika sedikit diputar relatif terhadap tegak lurus - sepanjang busur mengoreksi sudut pendekatan sehingga sedekat mungkin dengan sumbu templat, karena kita tidak hanya perlu mengemudi ke papan, tetapi juga masuk ke rel panduan dan terhubung ke kontak pengisian daya. <br><br>  Algoritma kedatangan penuh di stasiun diimplementasikan dalam tiga tahap.  Dua titik diatur pada bidang GPS - titik awal (di suatu tempat di tengah area kerja), dan titik di depan stasiun, serta sudut rotasi ke stasiun.  Setelah robot tiba dari titik awal ke titik kedua dan beralih ke sudut yang diinginkan ke arah kotak-kotak di stasiun, modul pencari mulai beraksi, menyesuaikan kecepatan motor melalui pengontrol PID.  Jika salah satu langkah gagal, atau sudut deviasi melebihi nilai yang ditetapkan, robot membatalkan balapan dan kembali ke titik awal lagi. <br><br>  Tautan dan video: <br><br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">OMower SDK, perpustakaan untuk Arduino IDE dan tata letak papan sirkuit</a> <br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Firmware siap pakai menggunakan SDK yang mengimplementasikan pfodApp / Modbus dan koneksi ke ROS</a> <br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">paket omower_gateway untuk ROS</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/dyz7xH9U1kY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/mmV4WPHlc7Y" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id434952/">https://habr.com/ru/post/id434952/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id434940/index.html">Bisnis, aku mencintaimu</a></li>
<li><a href="../id434942/index.html">Seni perdukunan atau firmware khusus untuk Olinuxino. UBOOT Bagian 2</a></li>
<li><a href="../id434944/index.html">Catatan seorang phytochemist. Kulit Pisang Menyerang Kembali</a></li>
<li><a href="../id434946/index.html">Kepindahan saya ke Norwegia</a></li>
<li><a href="../id434950/index.html">Masa kini yang akan menentukan masa depan kita</a></li>
<li><a href="../id434956/index.html">Perusahaan IT berkembang, laba tidak terlalu. Apa yang harus dilakukan</a></li>
<li><a href="../id434960/index.html">Tic-tac-toe: demonstrasi proses terkonfigurasi rekonfigurasi struktur DNA</a></li>
<li><a href="../id434962/index.html">Tidak, Anda tidak perlu Express di REST API Anda di Node.js</a></li>
<li><a href="../id434964/index.html">Cukup paranoia atau mengapa Anda tidak bersinar 100 poin dalam Kecepatan Halaman</a></li>
<li><a href="../id434966/index.html">Bahasa Pemrograman Mash Baru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>