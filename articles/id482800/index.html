<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â˜ªï¸ ğŸ ğŸ§”ğŸ¿ Pencarian saya untuk panel kontrol fisik rumah pintar ğŸ‘©ğŸ¾â€âš•ï¸ ğŸ†” ğŸ’‹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beberapa waktu yang lalu, saya mempunyai ide untuk memasang panel kontrol, yang terletak di sebelah pintu depan di dalam apartemen / rumah. 


 Ada be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pencarian saya untuk panel kontrol fisik rumah pintar</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482800/"><p>  Beberapa waktu yang lalu, saya mempunyai ide untuk memasang panel kontrol, yang terletak di sebelah pintu depan di dalam apartemen / rumah. </p><br><p>  Ada beberapa opsi untuk menerapkan ide ini: </p><br><ul><li>  Panel sentuh operator <abbr title="Pengontrol logika yang dapat diprogram">PLC</abbr> </li><li>  tablet; </li><li>  layar sentuh terhubung ke komputer mikro. </li></ul><br><p><img src="https://habrastorage.org/webt/fl/nj/ad/flnjadfhyyyzg5zt5aesfig8fyg.gif"><br>  Persyaratan tambahan yang segera membatasi pilihan perangkat: panel kontrol harus secara otomatis menampilkan gambar dari kamera eksternal ketika sensor gerak dipicu (dan hanya di hadapan orang-orang di rumah). </p><a name="habracut"></a><br><h2 id="1vybor-devaysa">  1. Pilihan perangkat </h2><br><p>  Setelah persyaratan diformulasikan dengan jelas, iPad yang saya tidak tahu cara mengontrol dari luar segera menghilang (sayang sekali karena mereka memiliki banyak pilihan pemasangan di dinding) dan perangkat <abbr title="Antarmuka mesin manusia">HMI</abbr> seperti <a href="https://nextion.tech/" rel="nofollow">Nextion</a> , karena gambar kamera tidak dapat ditampilkan pada mereka. </p><br><p><img src="https://habrastorage.org/webt/n2/xs/od/n2xsodz7s1ciurk5uvqcmuojshq.jpeg"><br>  <em>Salah satu opsi untuk iPad Wallmount dari Loxone</em> </p><br><p>  Dan meskipun perangkat khusus telah muncul di pasaran sekarang, seperti: </p><br><ul><li>  <a href="https://store.google.com/us/product/google_nest_hub%3Fhl%3Den-US" rel="nofollow">Hub sarang Google</a> </li><li>  <a href="https://www.facebook.com/PortalFromFacebook/" rel="nofollow">Portal dari Facebook</a> </li><li>  <a href="https://www.amazon.com/Echo-Show-8/dp/B07PF1Y28C" rel="nofollow">Amazon menunjukkan gema</a> </li></ul><br><p>  Namun, masalah dengan kontrol eksternal dari perangkat ini, seperti yang saya mengerti, juga tetap dan tidak sepenuhnya terselesaikan. </p><br><p>  Selain bagian program panel, bagian penting lain bagi saya adalah tidak adanya â€œpertanian kolektifâ€ ketika secara fisik mengamankan panel ini ke dinding, yang berarti menghubungkan setidaknya satu kabel untuk memberi daya pada perangkat dan kotak sambungan pemasangan di dinding dengan ukuran yang cukup, di lokasi pemasangan panel ini, untuk disembunyikan penempatan panel catu daya. </p><br><p><img src="https://habrastorage.org/webt/ti/sp/4n/tisp4n5xa4ac3nu5sgelwf5rz3k.jpeg"><br>  <em>Kotak Pemasangan</em> </p><br><h2 id="2-vliyanie-chyornoy-pyatnicy-na-vybor">  2. Pengaruh "Black Friday" pada pilihan </h2><br><p>  Ketika saya kembali teringat ide saya pada malam Black Friday 2019, saya memutuskan untuk membeli sesuatu yang murah untuk pengujian.  Saya tidak ingin repot-repot menyolder dan menghubungkan panel sentuh ke Raspberry Pi, dan pilihan jatuh pada <a href="https://www.amazon.com/gp/product/B07FKR6KXF/" rel="nofollow">Tablet Amazon Fire 7</a> seharga $ 29,99 (sekitar 1.700 â‚½).  Saya beralasan bahwa di bengkel baguette maka akan mungkin untuk membuat bingkai yang sesuai dengan ukuran yang tepat untuk menempatkan tablet di dinding. </p><br><p><img src="https://habrastorage.org/webt/bv/nj/s6/bvnjs6u-n2tqmvuwcra0okxawhg.jpeg"><br>  <em>Team Win Recovery Project (TWRP) di Amazon Fire 7 Tablet</em> </p><br><p>  Lebih lanjut, mengikuti <a href="https://forum.xda-developers.com/amazon-fire/orig-development/fire-7-2019-mustang-unbrick-downgrade-t3944365" rel="nofollow">instruksi yang</a> terdapat pada sumber daya populer xda-developers.com, saya berhasil membuka kunci pemuatan tablet Fire 7 dan menginstal TWRP tanpa pembongkaran fisik. </p><br><p><img src="https://habrastorage.org/webt/b8/ga/pe/b8gape_ziak4jx0ofkqsmini_re.png"><br>  <em>Dalam proses membuka Fire 7 (2019, mustang)</em> </p><br><p>  Saya ingin mencatat bahwa instruksi awalnya tampak menakutkan, tetapi sebagai hasilnya - semuanya dijelaskan dengan cukup transparan di sana.  Karena saya awalnya tidak memiliki rencana untuk menggunakan <a href="https://ru.wikipedia.org/wiki/Fire_OS" rel="nofollow">Fire OS</a> , saya menginstal <a href="https://ru.wikipedia.org/wiki/LineageOS" rel="nofollow">LineageOS Android Distribution yang</a> bersih tanpa aplikasi tambahan dan tanpa layanan Google, yaitu, tanpa menginstal GApps. </p><br><p><img src="https://habrastorage.org/webt/dt/f7/if/dtf7ifsb8hba6uoep5wyvp6cpym.jpeg"><br>  <em>LineageOS di Amazon Fire 7 Tablet (2019, mustang)</em> </p><br><p>  Saya ingin mendapatkan perangkat yang bersih dengan minimum program yang tidak terikat dengan akun apa pun. </p><br><h2 id="3-udalennoe-upravlenie-cherez-adb">  3. Remote control melalui ADB </h2><br><p>  Karena saya memiliki tablet Android yang telah di-rooting (dengan akses penuh) di tangan saya, seharusnya tidak ada masalah dengan pilihan program. <br>  Namun, saya ingin menggunakan beberapa alat standar dan karenanya memutuskan untuk menggunakan <abbr title="Android Debug Bridge">ADB</abbr> .  Ini berfungsi pada semua perangkat Android di mana fungsi ini tidak sengaja diblokir oleh pabrikan - cukup klik pada item menu "Bangun nomor" beberapa kali dan item menu "Untuk Pengembang" baru akan terbuka, di mana semua pengaturan dibuat. </p><br><p>  Karena saya harus memutar aliran video dari kamera IP (dalam kasus saya <abbr title="Protokol Streaming Waktu Nyata">RTSP</abbr> , untuk ini saya memerlukan <a href="https://yandex.ru/search/%3Ftext%3Dvlc%2520apk%26lr%3D50" rel="nofollow">pemutar VLC</a> , dan juga <a href="https://yandex.ru/search/%3Ftext%3Dchrome%2520apk%26lr%3D50" rel="nofollow">Google Chrome</a> untuk tampilan layar penuh dari panel rumah pintar. Untuk membuat manipulasi yang diperlukan dengan tablet dari terminal di komputer, jalankan perintah berikut. </p><br><p> Instal aplikasi di tablet melalui baris perintah: <br> <code>adb install VLC.apk</code> <br>  Nyalakan / matikan tablet melalui baris perintah: <br> <code>adb shell input keyevent KEYCODE_POWER</code> <br>  Mulai siaran dari kamera melalui baris perintah: <br> <code>adb shell am start -a android.intent.action.VIEW -d rtsp://login:pass@192.168.15.21:88/videoMain -t video/mp4</code> <br>  Melalui baris perintah, luncurkan panel kontrol rumah pintar di browser: <br> <code>adb shell am start -a android.intent.action.VIEW -d http://192.168.15.10:8123/lovelace/default_view</code> </p> <br><p>  Untuk bekerja dengan benar, saya mengatur pengaturan untuk layar yang diperluas - ketika panel kontrol sepenuhnya tersembunyi. </p><br><p><img src="https://habrastorage.org/webt/rc/rb/oc/rcrbocie4yuknkqszuwg_6pahzy.png"><br>  <em>Konfigurasikan LineageOS</em> </p><br><p>  Dan tentu saja, saya mematikan kunci layar - tanpa ini, sulit untuk mengotomatisasi sesuatu. </p><br><p><img src="https://habrastorage.org/webt/oj/x0/xv/ojx0xval66av7ezk4njg2ngwmba.png"><br>  <em>Konfigurasikan LineageOS</em> </p><br><p>  Ini adalah <a href="https://gist.github.com/mcfrojd/9e6875e1db5c089b1e3ddeb7dba0f304" rel="nofollow">hack kehidupan kecil</a> karena Anda dapat menemukan daftar semua aplikasi dan perintah yang diinstal untuk meluncurkannya.  Untuk memulai, masuk ke konsol: <br> <code>adb shell</code> <br>  dan kemudian lakukan: <br> <code>pm list packages | sed -e "s/package://" | while read x; do cmd package resolve-activity --brief $x | tail -n 1 | grep -v "No activity found"; done</code> <br>  Ini akan mendaftar semua program: </p><br><p><img src="https://habrastorage.org/webt/_l/3z/21/_l3z21t2uwufktefq52xnglcix8.png"><br>  <em>Menjalankan perintah untuk menampilkan semua program pada perangkat</em> </p><br><p>  Informasi yang diperoleh dapat digunakan sesuai kebijaksanaan Anda dan, misalnya, mulai jam: <br> <code>adb shell am start -a android.intent.action.VIEW -d -n com.android.deskclock/.DeskClock</code> </p> <br><h2 id="4-home-assistant">  4. Asisten Rumah </h2><br><p>  Semua hal di atas hanyalah persiapan untuk mengotomatiskan tampilan kamera dan panel kontrol perangkat lunak pada layar tablet.  Saya memiliki dua opsi kamera di atas pintu depan di tempat yang berbeda: </p><br><ol><li>  Kamera Hikvision DS-2CD2463G0-IW dengan sensor gerak terintegrasi. </li><li>  Kamera kubah dipasangkan dengan sensor gerak gelombang mikro yang disembunyikan di atas plafon gantung koridor akses dan terhubung ke <a href="https://www.ab-log.ru/smart-house/ethernet/megad-2561" rel="nofollow">pengontrol Ethernet</a> multi fungsi <a href="https://www.ab-log.ru/smart-house/ethernet/megad-2561" rel="nofollow">MegaD-2561</a> .  Sensor gerak tidak terlihat dengan mata, tetapi berfungsi.  Kamera adalah instalasi biasa, bukan tersembunyi. </li></ol><br><p>  Pertama, Anda perlu mengaktifkan ADB melalui jaringan: </p><br><p><img src="https://habrastorage.org/webt/rr/ty/vh/rrtyvhhrwwzteayiwjwqvsuwwes.png"><br>  <em>Konfigurasikan LineageOS</em> </p><br><p>  Setelah itu, tablet siap untuk remote control. </p><br><p>  Karena saya menggunakan <a href="https://www.home-assistant.io/hassio/" rel="nofollow">Hass.io</a> , saya menggunakan add-on <a href="https://github.com/hassio-addons/addon-adb" rel="nofollow">ADB</a> khusus <a href="https://github.com/hassio-addons/addon-adb" rel="nofollow">- Android Debug Bridge</a> , yang memungkinkan Anda untuk mengontrol perangkat apa pun yang mendukung kontrol ADB.  Dalam konfigurasi untuk add-on ini, ia menunjukkan satu-satunya perangkatnya: </p><br><pre> <code class="plaintext hljs">{ "devices": [ "192.168.15.24" ], "reconnect_timeout": 90 }</code> </pre> <br><p>  Setelah itu, ini sedikit aneh, tetapi semua perangkat seperti itu mengkonfigurasi di Home Assistant sebagai <code>androidtv</code> . </p><br><div class="spoiler">  <b class="spoiler_title">configuration.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">media_player: - platform: androidtv name: Amazon Fire 7 host: 192.168.15.24 adb_server_ip: 127.0.0.1</code> </pre> </div></div><br><p>  Langkah terakhir adalah mendaftarkan otomatisasi, yang menampilkan kamera pada layar tablet, kemudian menutup aplikasi, dan kemudian menampilkan panel kontrol Home Assistant dan juga menutupnya setelah beberapa saat: </p><br><div class="spoiler">  <b class="spoiler_title">automations.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">################################################### # # #  android  # # # ################################################### - alias: Amazon Fire 7 Mikhail trigger: - platform: state entity_id: binary_sensor.kamera_u_liftov_pir_alarm from: 'off' to: 'on' condition: - condition: state entity_id: device_tracker.7c_xx_5c_b5_xx_1b # state: 'home' action: - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent KEYCODE_POWER - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: am start -a android.intent.action.VIEW -d rtsp://login:pass@192.168.15.21:88/videoMain -t video/mp4 - delay: '00:00:30' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent KEYCODE_APP_SWITCH - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent DEL - delay: '00:00:01' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: am start -a android.intent.action.VIEW -d http://192.168.15.10:8123/lovelace/default_view - delay: '00:00:10' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent KEYCODE_APP_SWITCH - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent DEL - delay: '00:00:01' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: HOME</code> </pre> </div></div><br><p>  Hasil yang dihasilkan belum di pintu, tetapi di tempat kerja: </p><br><p><img src="https://habrastorage.org/webt/jt/jk/32/jtjk32ag1ty-nawvtkwzeylkxuc.jpeg"><br>  <em>Tampak belakang</em> </p><br><p>  Saya juga menghapus panel dalam aksi, tetapi saya tidak bisa menemukan cara untuk menutupi semua data pribadi di video, dan ada banyak dari mereka ternyata, jadi saya hanya membawa tampilan belakang :) </p><br><h2 id="itog">  Ringkasan </h2><br><p>  Itu mungkin untuk membuat panel kontrol fisik dengan karakteristik yang ditentukan.  Dari biaya utama - hanya tablet yang murah.  Tetap menyelesaikan masalah dengan instalasi berkualitas di tempat penggunaan, tetapi ini sudah menjadi topik konstruksi yang lebih. </p><br><p>  Dikirim oleh: <a href="https://www.facebook.com/mikhail.shardin" rel="nofollow">Mikhail Shardin</a> , <br>  4 Januari 2020 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id482800/">https://habr.com/ru/post/id482800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id482786/index.html">Teka-teki yang tidak terpecahkan</a></li>
<li><a href="../id482788/index.html">Apa yang ada di dalam Google Coral Edge TPU: tes untuk kecepatan dan penguraian perangkat</a></li>
<li><a href="../id482790/index.html">Lupakan enkripsi homomorfik: sekarang kami memiliki enkripsi fungsional</a></li>
<li><a href="../id482792/index.html">Proyek ITER pada 2019</a></li>
<li><a href="../id482794/index.html">Jaringan saraf. Kemana perginya semua</a></li>
<li><a href="../id482802/index.html">Dimasukkannya jauh skrip Mikrotik dari Telegram v 2.0</a></li>
<li><a href="../id482804/index.html">Java: menciutkan log multi-baris ke log satu-baris menggunakan Spring dan Logback atau Log4j2</a></li>
<li><a href="../id482806/index.html">Propaganda rezim totaliter, anti-Semitisme, dan homofobia dalam buku 2019 tentang pemrograman? - itu mungkin</a></li>
<li><a href="../id482810/index.html">Bisakah Anda mempercayai saran medis bot? Dokter belum yakin.</a></li>
<li><a href="../id482812/index.html">Matematikawan telah mencapai terobosan dalam mempelajari masalah "berbahaya"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>