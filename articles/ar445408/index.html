<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ã€°ï¸ ğŸ¤³ğŸ¿ ğŸš¶ğŸ¾ Ù†Ø´Ø±Ø§Øª Ù…Ø´ØªØ±ÙƒØ© Ù…Ù† Instagram Ø¥Ù„Ù‰ VK Ø§Ù„Ø¹Ø§Ù…Ø© ÙÙŠ Ø¨ÙŠØ«ÙˆÙ† ğŸš¶ğŸ¿ ğŸ“˜ ğŸ’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ù…Ù‚Ø¯Ù…Ø© 
 Ù‚Ø±Ø±Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø³ÙˆÙ‚ Ø¬Ø¯ÙŠØ¯ ØŒ Ø®Ø§ØµØ© ÙˆØ£Ù† Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù Ù„Ù…ØªØ¬Ø±ÙŠ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ØŒ ÙˆØ§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙ…Ù„Ùƒ Ø­Ø³Ø§Ø¨Ø§Øª ÙÙŠ Instagram ØŒ Ù…Ù‡ØªÙ… Ù…Ù†Ø° ÙØªØ±Ø© Ø·ÙˆÙŠÙ„Ø© Ø¨Ø¸Ù‡ÙˆØ± Ù†Ø³Ø®Ø© Ù…...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ù†Ø´Ø±Ø§Øª Ù…Ø´ØªØ±ÙƒØ© Ù…Ù† Instagram Ø¥Ù„Ù‰ VK Ø§Ù„Ø¹Ø§Ù…Ø© ÙÙŠ Ø¨ÙŠØ«ÙˆÙ†</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445408/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/t1/fh/v8/t1fhv8ufbe6zavfrsecrvlk67ls.jpeg"><br><br><h4 style=";text-align:right;direction:rtl">  Ù…Ù‚Ø¯Ù…Ø© </h4><br>  Ù‚Ø±Ø±Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø³ÙˆÙ‚ Ø¬Ø¯ÙŠØ¯ ØŒ Ø®Ø§ØµØ© ÙˆØ£Ù† Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù Ù„Ù…ØªØ¬Ø±ÙŠ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ØŒ ÙˆØ§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙ…Ù„Ùƒ Ø­Ø³Ø§Ø¨Ø§Øª ÙÙŠ Instagram ØŒ Ù…Ù‡ØªÙ… Ù…Ù†Ø° ÙØªØ±Ø© Ø·ÙˆÙŠÙ„Ø© Ø¨Ø¸Ù‡ÙˆØ± Ù†Ø³Ø®Ø© Ù…ÙƒØ±Ø±Ø© Ù…Ù† VK.  Ø§Ù„ÙÙƒØ±Ø© Ø¬ÙŠØ¯Ø© ØŒ Ù„ÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø§Ù„Ù…Ø¦Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© ØŒ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§Ù„ÙŠ ØŒ Ù„Ù… Ø£ÙƒÙ† Ø£Ø±ØºØ¨ ÙÙŠ <i>ctrl + c ctrl + v</i> ÙŠØ¯ÙˆÙŠÙ‹Ø§ ØŒ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø£Ù† Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† ÙØ±Øµ Ø¹Ù…Ù„ Ø§Ù„Ù‚Ø±ÙˆØ¯ Ù„Ù… ØªÙƒÙ† Ù…Ø«ÙŠØ±Ø© Ù„Ù„Ø¥Ø¹Ø¬Ø§Ø¨. <br><br>  ÙˆØ§Ø«Ù‚Ù‹Ø§ Ù…Ù† Ø£Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ù…Ù„ÙŠØ¡ Ø¨Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© ØŒ Ù„Ù‚Ø¯ Ø¨Ø¯Ø£Øª googling.  Ø¨Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø­Ø§Ù„ ØŒ ÙØ¥Ù† Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù…Ù† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ù…Ù„ÙŠØ¦Ø© Ø¨Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© ØŒ Ù…Ø¹ ÙˆØ¸Ø§Ø¦Ù ÙˆØ§Ø³Ø¹Ø© Ø¥Ù„Ù‰ Ø­Ø¯ Ù…Ø§.  Ù„ÙƒÙ† Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„ÙŠ ØŒ ÙÙ‚Ø· Ù„ÙƒÙ„ Ø´ÙŠØ¡ ØŒ Ø§Ø¶Ø·Ø±Ø±Øª Ø¥Ù„Ù‰ Ù†Ù‚Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù…Ù† ØµÙØ­Ø© Instagram Ø¥Ù„Ù‰ VK Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆÙ…Ù† Ø«Ù… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ ÙÙŠ ÙˆÙ‚Øª ÙˆØ§Ø­Ø¯. <br><br>  Ø¹Ø¯Ù… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø´ÙŠØ¡ Ù…Ù†Ø§Ø³Ø¨ ØŒ <s>Ø±Ø¨Ù…Ø§ ÙƒØ§Ù† ÙŠØ¨Ø¯Ùˆ Ø³ÙŠØ¦Ù‹Ø§</s> ØŒ ÙÙ‚Ø¯ <s>Ø®Ù†Ù‚ Ø§Ù„Ø¶ÙØ¯Ø¹</s> Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø¨Ù†ÙØ³Ù‡.  Ø§Ø®ØªØ§Ø± Ù„ØºØ© Ø§Ù„Ø«Ø¹Ø¨Ø§Ù†.  Ø¨Ø³ÙŠØ·Ø© ÙˆÙ…Ø±ÙŠØ­Ø© ØŒ Ø¯ÙˆÙ† Ø²Ø®Ø±ÙØ© Ø¯ÙˆÙ† Ø¯Ø§Ø¹ ØŒ ÙˆØ§Ù„Ø³Ø±Ø¹Ø© Ù„ÙŠØ³Øª Ù…Ù‡Ù…Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø´Ø£Ù†. <br><br>  Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø¹Ù„Ù‰ Instagram api Ùˆ VK Ù…ÙØµÙ„Ø© ØªÙ…Ø§Ù…Ù‹Ø§ ÙˆØ§Ù„Ù…Ù‡Ù…Ø© Ù„Ø§ ØªØ¨Ø¯Ùˆ Ù…Ø¹Ù‚Ø¯Ø©.  Ø¨Ø¹Ø¯ Ø£Ù† Ø­Ø±Ø±Øª Ù†ÙØ³ÙŠ Ø¨Ø¶Ø¹Ø© Ø£Ù…Ø³ÙŠØ§Øª ØŒ Ø¨Ø¯Ø£Øª Ø§Ù„Ø¹Ù…Ù„.  ÙƒØ§Ù†Øª Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù‡ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù…ÙˆØ² ÙÙŠ ÙƒÙ„ Ù…Ù† Instagram Ùˆ VK.  Ù„Ù… ØªÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø´Ø§ÙƒÙ„ Ù…Ø¹ Ù‡Ø°Ø§ ØŒ ØªÙ… Ø§Ø³ØªÙ„Ø§Ù…Ù‡Ù…Ø§ ÙÙŠ Ø¨Ø¶Ø¹ Ø¯Ù‚Ø§Ø¦Ù‚. <br><br>  Ø«Ù… Ø£ÙˆÙ„ Ù…Ø£Ø²Ù‚ ÙŠÙ†ØªØ¸Ø±Ù†ÙŠ ... <br><a name="habracut"></a><br><h4 style=";text-align:right;direction:rtl">  Crossposting Ø£ÙˆÙ„ 20 ÙˆØ¸ÙŠÙØ© </h4><br>  Ù„Ø¯Ù‡Ø´ØªÙŠ ØŒ ÙˆØ¬Ø¯Øª Ø£Ù†Ù‡ Ø¨Ø¹Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ø³ÙŠØ§Ø³Ø© Instagram ØŒ ÙƒØ§Ù† Ù…Ù† Ø§Ù„Ù…Ù…ÙƒÙ† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ù…ÙˆØ³ json (Ø±ÙˆØ§Ø¨Ø· Ù„Ù„ØµÙˆØ± ØŒ ÙˆØµÙ Ù„Ù„Ù†Ø´Ø± ØŒ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø± ...) ÙÙ‚Ø· Ø¥Ù„Ù‰ Ø¢Ø®Ø± 20 Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„ØµÙØ­Ø©.  Ù‡Ø°Ø§ ÙŠÙ†Ø§Ø³Ø¨Ù†ÙŠ Ù„Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© - ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø¨Ù…Ø´Ø§Ø±ÙƒØ§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† ÙˆÙ‚Øª Ù„Ø¢Ø®Ø±.  Ù„Ø£Ù† Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø§ ØªØ¸Ù‡Ø± ÙÙŠ ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ø£Ø­ÙŠØ§Ù† Ù…Ø¹ÙŠ Ùˆ 20 Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù…Ø±ÙŠØ­Ø© Ù„Ù„ØºØ§ÙŠØ©.  ØªÙ‚Ø±Ø± ØªÙˆÙ„ÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø© Ø£ÙˆÙ„Ø§Ù‹. <br><br>  Ù†Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø¬Ù„Ø³Ø© VK ÙˆÙ†Ø¹Ù„Ù† Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©: <br><br><pre style=";text-align:right;direction:rtl"><code class="python hljs">session = vk.Session( access_token=<span class="hljs-string"><span class="hljs-string">'123abc'</span></span>) <span class="hljs-comment"><span class="hljs-comment">#  123abc   vk_api = vk.API(session, v='5.85') groupID = '12345678' #id  vk upload_url = vk_api.photos.getWallUploadServer(group_id=groupID)['upload_url'] #  vk   data = [] photo_id = 0 attachments = [] direct = 'C:/Users/jo/PycharmProjects/repost/foto' #     d = date(2019, 3, 21) # ,      data_parsing = int(time.mktime(d.timetuple())) #    unix </span></span></code> </pre> <br>  Ø¨Ø¹Ø¯ Ø°Ù„Ùƒ ØŒ Ù†ÙƒØªØ¨ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.  Ù„Ù„Ø¨Ø¯Ø¡ ØŒ Ù†Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙŠ Ø³Ù†Ø¹Ù…Ù„ Ø¨Ù‡Ø§: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">answer = get( <span class="hljs-string"><span class="hljs-string">'https://api.instagram.com/v1/users/[id_inst]/media/recent?access_token=[access_token]'</span></span>, verify=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>).json()</code> </pre> <br>  ÙÙŠ Ø§Ù„Ø·Ù„Ø¨ ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø¥Ø¯Ø±Ø§Ø¬ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø£Ù‚ÙˆØ§Ø³ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø©.  ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù Ø§Ù„ØµÙØ­Ø© Ø­Ø³Ø¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØŒ Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù‡Ù†Ø§</a> . <br><br>  Ø¥Ø°Ø§ ØªÙ… Ø¥Ø±Ø¬Ø§Ø¹ Ø´ÙŠØ¡ Ø¥Ù„ÙŠÙ†Ø§ ØŒ ØªØ§Ø¨Ø¹: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> answer: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> answer[<span class="hljs-string"><span class="hljs-string">'data'</span></span>]: <span class="hljs-comment"><span class="hljs-comment">#     json  global photo_id #     photo_id = 0 global attachments attachments = [] global data data = [] date_create = x['created_time'] # date_create    Unix if int(date_create) &gt; data_parsing: n = 0 #     if not os.path.isdir(direct + '/' + date_create): #     os.makedirs(direct + '/' + date_create) if 'carousel_media' in x: #      for a in x['carousel_media']: li = list(a.keys()) #      if li.count('videos') == 0: #    ,      req.urlretrieve(a['images']['standard_resolution']['url'], "foto/" + date_create + "/" + str(n) + ".jpg") #       if x['caption'] is not None: #   text = str(x['caption']['text']) else: text = ' ' n = n + 1 post_foto(date_create, text) else: #      req.urlretrieve(x['images']['standard_resolution']['url'], "foto/" + date_create + "/0.jpg") if x['caption'] is not None: #   text = str(x['caption']['text']) else: text = ' ' post_foto(date_create, text)</span></span></code> </pre><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø£Ù†Ø§ Ø£ØªÙˆØ¨</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  Ø£Ø¹Ù„Ù… Ø£Ù† Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø£Ù…Ø± Ø³ÙŠØ¦ ØŒ Ù„ÙƒÙ† Ø­Ø¬Ù… Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ ÙŠØ³Ù…Ø­ Ù„Ùƒ Ø¨Ø¹Ø¯Ù… Ø§Ù„Ø®ÙˆØ¶ ÙÙŠ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯ <br></div></div><br>  Ù„Ø°Ù„Ùƒ ØŒ Ø¥Ø°Ø§ ÙƒØ§Ù† ØªØ§Ø±ÙŠØ® Ù†Ø´Ø± Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø°ÙŠ Ø­Ø¯Ø¯Ù†Ø§Ù‡ ØŒ ÙÙ‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ Ø¨Ø§Ø³Ù…Ù‡ (Ø¹Ù„Ù… Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… ØŒ Ø­Ø³Ø§Ø³ Ø¨Ø´ÙƒÙ„ Ø®Ø§Øµ Ù„ØªØ®Ø·ÙŠ) ØªØ§Ø±ÙŠØ® Ù†Ø´Ø±Ù‡.  Ø§Ù„ØªØ§Ù„ÙŠ ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ÙÙŠØ¯ÙŠÙˆ.  Ø¨Ø§Ù„ØªØ£ÙƒÙŠØ¯ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±ÙØ§Ù‚Ù‡ ØŒ Ø£Ù†Ø§ ÙÙ‚Ø· Ù„Ø§ Ø£Ø­ØªØ§Ø¬ Ø¥Ù„ÙŠÙ‡.  ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø°ÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.  Ù†Ø£Ø®Ø° ÙˆØµÙ <i>Ø§Ù„Ù…Ù†Ø´ÙˆØ±</i> Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙØªØ§Ø­ <i>Ø§Ù„ØªØ³Ù…ÙŠØ© Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠØ©</i> ÙˆÙ†Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ ÙˆØ¸ÙŠÙØ© <i>post_foto</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">post_foto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(date_create, text)</span></span></span><span class="hljs-function">:</span></span> quantity_foto = len([name <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> os.listdir(direct + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + date_create) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> os.path.isfile(os.path.join(direct + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + date_create, name))]) <span class="hljs-comment"><span class="hljs-comment">#     append_attach(quantity_foto, date_create) params = {'attachments': attachments, 'message': text, 'owner_id': '-' + groupID, 'from_group': '1'} vk_api.wall.post(**params) #    VK   </span></span></code> </pre><br>  Ù†Ø­Ø¯Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ± ÙÙŠ Ø§Ù„Ù…Ø¬Ù„Ø¯ ØŒ ÙˆÙ†Ø±ÙØ¹Ù‡Ø§ Ø¥Ù„Ù‰ Ø®Ø§Ø¯Ù… VK ØŒ ÙˆÙ†Ø¶ÙŠÙ Ø¥Ù„Ù‰ Ù…Ø¹Ù„Ù…Ø§Øª Ø§Ù„Ù†Ø´Ø± ÙˆÙ†Ù†Ø´Ø±Ù‡Ø§ ÙÙŠ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø¹Ø§Ù…Ø©.  ØªØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ¸ÙŠÙØ© <i>append_attach</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append_attach</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, directory)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#     for t in range(x): upload_foto(t, directory) global photo_id photo_id = data[t][0]['id'] global attachments attachments.append('photo' + str(data[t][0]['owner_id']) + '_' + str(photo_id)) #  id    </span></span></code> </pre><br>  ÙˆÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ù…Ø¨Ø§Ø´Ø±Ø© Ø¥Ù„Ù‰ Ø®Ø§Ø¯Ù… VK Ø¨ÙˆØ§Ø³Ø·Ø© ÙˆØ¸ÙŠÙØ© <i>upload_foto</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">upload_foto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(num_foto, directory)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#     request = requests.post(upload_url, files={'photo': open("foto/" + directory + "/" + str(num_foto) + ".jpg", "rb")}) params = {'server': request.json()['server'], 'photo': request.json()['photo'], 'hash': request.json()['hash'], 'group_id': groupID} global data data.append(vk_api.photos.saveWallPhoto(**params))</span></span></code> </pre><br>  Ù‚Ù…Ù†Ø§ Ø¨ØªØ³ÙˆÙŠØ© Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©.  ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ Ø¥Ù…Ø§ Ù…Ù† ØªÙ„Ù‚Ø§Ø¡ Ù†ÙØ³Ù‡ Ø£Ùˆ Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ (Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ ÙÙŠ <i>cron</i> ØŒ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙƒÙ„ 15 Ø¯Ù‚ÙŠÙ‚Ø©).  ÙˆØ§Ù„Ø¢Ù† ÙƒÙŠÙ ØªÙ†Ù‚Ù„ Ø§Ù„Ù…Ø¦Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ØŸ <br><br><h4 style=";text-align:right;direction:rtl">  Ø§Ù„ØªÙØ§Ù Ø§Ù„ØµÙØ­Ø© Ø¨Ø£ÙƒÙ…Ù„Ù‡Ø§ </h4><br>  Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¬Ø§Ù‡Ø² Ø¨Ø§Ù„ÙØ¹Ù„ ØŒ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† Ù…Ø³Ø¤ÙˆÙ„Ø§Ù‹ Ø¹Ù† Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù†ÙØ³Ù‡Ø§ ÙÙŠ VK.  ÙŠØ¨Ù‚Ù‰ Ø£Ù† Ù†Ø¬Ø¯ Ø·Ø±ÙŠÙ‚Ø© Ù„ØªÙ‚Ù„ÙŠØµ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ø£ÙˆØµØ§Ù Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡Ù….  Ù„Ù… Ø£ÙƒÙ† Ù…Ù‡ØªÙ…Ù‹Ø§ Ø¨ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´ÙØ±Ø§Øª Ø§Ù„Ù…ØµØ¯Ø±ÙŠØ© Ù„ØµÙØ­Ø§Øª Instagram ÙˆØ§ØªØ®Ø°Øª Ø­Ù„Ø§Ù‹ Ø¬Ø§Ù‡Ø²Ù‹Ø§.  ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ ØŒ Ø£Ù†Ø§ Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ù‡Ù†Ø§Ùƒ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ ØŒ Ù„Ù‚Ø¯ Ø§Ø³ØªØ®Ø¯Ù…Øª Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ Ø§Ù„Ø£ÙˆÙ„ ( <i>4K Stogram</i> ).  ØªØ³Ù…Ø­ Ù„Ùƒ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ‡ÙŠØ© Ø¨Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ø¨Ø³Ø±Ø¹Ø© Ù…Ø¹ ØªÙ†Ø²ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙˆØ± Ù…Ù† Ø§Ù„ØµÙØ­Ø©.  ØªØ­ØªÙˆÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£ÙŠØ¶Ù‹Ø§ Ø¹Ù„Ù‰ ØªØµØ¯ÙŠØ± Ù„Ø¬Ù…ÙŠØ¹ Ø£ÙˆØµØ§Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª.  Ù†Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ " <i>* .txt</i> ".  ÙŠØ¨Ù‚Ù‰ ÙÙ‚Ø· ÙˆØ¶Ø¹ ÙƒÙ„ Ø§Ù„ØµÙˆØ± ÙÙŠ Ù…Ø¬Ù„Ø¯Ø§Øª (Ù…Ù†Ø´ÙˆØ± ÙˆØ§Ø­Ø¯ - Ù…Ø¬Ù„Ø¯ ÙˆØ§Ø­Ø¯) ÙˆØªØ­Ù„ÙŠÙ„ Ø£ÙˆØµØ§Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù…Ù† Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ Ø¨Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„Ø¹Ø§Ø¯ÙŠ. <br><br>  Ø³ØªØ³Ø§Ø¹Ø¯Ù†Ø§ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ© ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ± ÙÙŠ Ù…Ø¬Ù„Ø¯Ø§Øª: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">i = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> top, dirs, files <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> os.walk(os.getcwd()+<span class="hljs-string"><span class="hljs-string">"\\res\\"</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> nm <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> files: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> re.findall(<span class="hljs-string"><span class="hljs-string">r'\d\d\.\d\d\.\d\d'</span></span>, nm): old_file = os.path.join(top, nm) frq = re.findall(<span class="hljs-string"><span class="hljs-string">r'\d\d\d\d-\d\d-\d\d \d\d\.\d\d\.\d\d'</span></span>, str(nm)) frq = str(frq[<span class="hljs-number"><span class="hljs-number">0</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> os.path.exists(os.getcwd()+<span class="hljs-string"><span class="hljs-string">"\\res\\"</span></span> + frq): i = <span class="hljs-number"><span class="hljs-number">0</span></span> os.makedirs(os.getcwd() + <span class="hljs-string"><span class="hljs-string">"\\res\\"</span></span> + frq) new_file = os.path.join(os.getcwd() + <span class="hljs-string"><span class="hljs-string">"\\res\\"</span></span> + frq, str(i)+<span class="hljs-string"><span class="hljs-string">'.jpg'</span></span>) os.rename(old_file, new_file) i = i+<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: new_file = os.path.join(os.getcwd() + <span class="hljs-string"><span class="hljs-string">"\\res\\"</span></span> + frq, str(i)+<span class="hljs-string"><span class="hljs-string">'.jpg'</span></span>) os.rename(old_file, new_file) i = i+<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br>  Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù‡Ù†Ø§ Ù‡ÙŠ ÙˆÙ‚Øª Ø§Ù„Ù†Ø´Ø± ØŒ ÙˆØ§Ù„Ø°ÙŠ ÙŠØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø¹Ø¯Ø© ØµÙˆØ± ÙÙŠ Ù…Ø¬Ù„Ø¯ ÙˆØ§Ø­Ø¯. <br><br>  Ø­Ø³Ù†Ù‹Ø§ ØŒ ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ø³ÙŠØ·.  Ù†ÙØªØ­ ÙƒÙ„ Ù…Ø¬Ù„Ø¯ ØŒ ÙˆØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… ØŒ ÙˆØ¥Ø±ÙØ§Ù‚ Ø§Ù„ÙˆØµÙ ÙˆÙ†Ø´Ø±.  Ù„Ø§ ØªÙ†Ø³ ØªÙ‚ÙŠÙŠØ¯ VK: Ù„Ø§ ÙŠØ²ÙŠØ¯ Ø¹Ù† 50 Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„ÙŠÙˆÙ…: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">f = open(os.getcwd() + <span class="hljs-string"><span class="hljs-string">"\input_opis\\gusi.txt"</span></span>, <span class="hljs-string"><span class="hljs-string">"rt"</span></span>, errors=<span class="hljs-string"><span class="hljs-string">"ignore"</span></span>, encoding=<span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>) <span class="hljs-comment"><span class="hljs-comment">#     data = f.read() #  ,      result = re.findall(r'"([^\"]*)"', data, re.S) new_x = [el for el, _ in groupby(result)] #     dlina = new_x.__len__() i = 1 f.close() for top, dirs, files in os.walk(os.getcwd() + "\\res\\"): #   for nm in dirs: attachments = [] photo_id = 0 data = [] DIR = 'C:/Users/jo/PycharmProjects/repost/res/' + nm #     quantity_foto = len([name for name in os.listdir(DIR) if os.path.isfile(os.path.join(DIR, name))]) post_foto(quantity_foto, nm) attachments.reverse() #   params = {'attachments': attachments, 'message': new_x[dlina - i], 'owner_id': '-' + groupID, 'from_group': '1'} vk_api.wall.post(**params) i = i + 1</span></span></code> </pre> <br>  Ø±Ø¨Ù…Ø§ Ù„Ù… ÙŠØ³ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø£Ø³Ù‡Ù„ ÙˆØ§Ù„Ø£Ø³Ø±Ø¹ ØŒ ÙˆÙ„ÙƒÙ† ØªÙ… ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ù†ØªÙŠØ¬Ø©.  Ø´ÙƒØ±Ø§ Ù„ÙƒÙ… Ø¬Ù…ÙŠØ¹Ø§ Ø¹Ù„Ù‰ Ø§Ù‡ØªÙ…Ø§Ù…ÙƒÙ… ØŒ ÙˆØ£Ù†Ø§ <s>Ø¹Ù„Ù‰</s> Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ© Ø¹Ù„Ù‰ Ù†ØµÙŠ <s>govnokod</s> . <br><br>  Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø«Ù„Ø§Ø«Ø© ÙÙŠ Ù…Ø¬Ù…Ù„Ù‡Ø§: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Crossposting Ø£ÙˆÙ„ 20 ÙˆØ¸ÙŠÙØ©</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> get <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> urllib.request <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> req <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> vk <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> date session = vk.Session( access_token=<span class="hljs-string"><span class="hljs-string">'123abc'</span></span>) vk_api = vk.API(session, v=<span class="hljs-string"><span class="hljs-string">'5.85'</span></span>) groupID = <span class="hljs-string"><span class="hljs-string">'12345678'</span></span> <span class="hljs-comment"><span class="hljs-comment">#id  vk upload_url = vk_api.photos.getWallUploadServer(group_id=groupID)['upload_url'] #  vk   data = [] photo_id = 0 attachments = [] direct = 'C:/Users/jo/PycharmProjects/repost/foto' #     d = date(2019, 3, 21) # ,      data_parsing = int(time.mktime(d.timetuple())) #    unix  def upload_foto(num_foto, directory): #     request = requests.post(upload_url, files={'photo': open("foto/" + directory + "/" + str(num_foto) + ".jpg", "rb")}) params = {'server': request.json()['server'], 'photo': request.json()['photo'], 'hash': request.json()['hash'], 'group_id': groupID} global data data.append(vk_api.photos.saveWallPhoto(**params)) def append_attach(x, directory): #             for t in range(x): upload_foto(t, directory) global photo_id photo_id = data[t][0]['id'] global attachments attachments.append('photo' + str(data[t][0]['owner_id']) + '_' + str(photo_id)) #  id     def post_foto(date_create, text): quantity_foto = len([name for name in os.listdir(direct + "/" + date_create) if os.path.isfile(os.path.join(direct + "/" + date_create, name))]) #     append_attach(quantity_foto, date_create) params = {'attachments': attachments, 'message': text, 'owner_id': '-' + groupID, 'from_group': '1'} vk_api.wall.post(**params) #    VK    def get_all(): answer = get( 'https://api.instagram.com/v1/users/12345678/media/recent?access_token=123abc', verify=True).json() #     instagram if answer: for x in answer['data']: #     json  global photo_id #     photo_id = 0 global attachments attachments = [] global data data = [] date_create = x['created_time'] # date_create    Unix if int(date_create) &gt; data_parsing: n = 0 #     if not os.path.isdir(direct + '/' + date_create): #     os.makedirs(direct + '/' + date_create) if 'carousel_media' in x: #      for a in x['carousel_media']: li = list(a.keys()) #      if li.count('videos') == 0: #    ,      req.urlretrieve(a['images']['standard_resolution']['url'], "foto/" + date_create + "/" + str(n) + ".jpg") #       if x['caption'] is not None: #   text = str(x['caption']['text']) else: text = ' ' n = n + 1 post_foto(date_create, text) else: #      req.urlretrieve(x['images']['standard_resolution']['url'], "foto/" + date_create + "/0.jpg") if x['caption'] is not None: #   text = str(x['caption']['text']) else: text = ' ' post_foto(date_create, text) get_all()</span></span></code> </pre> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ÙØ±Ø² Ø§Ù„ØµÙˆØ± Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os i = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> top, dirs, files <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> os.walk(os.getcwd()+<span class="hljs-string"><span class="hljs-string">"\\res\\"</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> nm <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> files: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> re.findall(<span class="hljs-string"><span class="hljs-string">r'\d\d\.\d\d\.\d\d'</span></span>, nm): old_file = os.path.join(top, nm) frq = re.findall(<span class="hljs-string"><span class="hljs-string">r'\d\d\d\d-\d\d-\d\d \d\d\.\d\d\.\d\d'</span></span>, str(nm)) frq = str(frq[<span class="hljs-number"><span class="hljs-number">0</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> os.path.exists(os.getcwd()+<span class="hljs-string"><span class="hljs-string">"\\res\\"</span></span> + frq): i = <span class="hljs-number"><span class="hljs-number">0</span></span> os.makedirs(os.getcwd() + <span class="hljs-string"><span class="hljs-string">"\\res\\"</span></span> + frq) new_file = os.path.join(os.getcwd() + <span class="hljs-string"><span class="hljs-string">"\\res\\"</span></span> + frq, str(i)+<span class="hljs-string"><span class="hljs-string">'.jpg'</span></span>) os.rename(old_file, new_file) i = i+<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: new_file = os.path.join(os.getcwd() + <span class="hljs-string"><span class="hljs-string">"\\res\\"</span></span> + frq, str(i)+<span class="hljs-string"><span class="hljs-string">'.jpg'</span></span>) os.rename(old_file, new_file) i = i+<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ù†Ø´Ø± Ø¥Ù„Ù‰ VK Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> vk <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> itertools <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> groupby session = vk.Session( access_token=<span class="hljs-string"><span class="hljs-string">'123abc'</span></span>) vk_api = vk.API(session, v=<span class="hljs-string"><span class="hljs-string">'5.85'</span></span>) groupID = <span class="hljs-string"><span class="hljs-string">'12345678'</span></span> upload_url = vk_api.photos.getWallUploadServer(group_id=groupID)[<span class="hljs-string"><span class="hljs-string">'upload_url'</span></span>] data = [] photo_id = <span class="hljs-number"><span class="hljs-number">0</span></span> attachments = [] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">upload_foto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(num_foto, direc)</span></span></span><span class="hljs-function">:</span></span> request = requests.post(upload_url, files={<span class="hljs-string"><span class="hljs-string">'photo'</span></span>: open(<span class="hljs-string"><span class="hljs-string">'res/'</span></span> + direc + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + str(num_foto) + <span class="hljs-string"><span class="hljs-string">".jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"rb"</span></span>)}) params = {<span class="hljs-string"><span class="hljs-string">'server'</span></span>: request.json()[<span class="hljs-string"><span class="hljs-string">'server'</span></span>], <span class="hljs-string"><span class="hljs-string">'photo'</span></span>: request.json()[<span class="hljs-string"><span class="hljs-string">'photo'</span></span>], <span class="hljs-string"><span class="hljs-string">'hash'</span></span>: request.json()[<span class="hljs-string"><span class="hljs-string">'hash'</span></span>], <span class="hljs-string"><span class="hljs-string">'group_id'</span></span>: groupID} <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> data data.append(vk_api.photos.saveWallPhoto(**params)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">post_foto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, direc)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(x): upload_foto(i, direc) <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> photo_id photo_id = data[i][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'id'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> attachments attachments.append(<span class="hljs-string"><span class="hljs-string">'photo'</span></span> + str(data[i][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'owner_id'</span></span>]) + <span class="hljs-string"><span class="hljs-string">'_'</span></span> + str(photo_id)) f = open(os.getcwd() + <span class="hljs-string"><span class="hljs-string">"\input_opis\\gusi.txt"</span></span>, <span class="hljs-string"><span class="hljs-string">"rt"</span></span>, errors=<span class="hljs-string"><span class="hljs-string">"ignore"</span></span>, encoding=<span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>) <span class="hljs-comment"><span class="hljs-comment">#     data = f.read() #  ,      result = re.findall(r'"([^\"]*)"', data, re.S) new_x = [el for el, _ in groupby(result)] #     dlina = new_x.__len__() i = 1 f.close() for top, dirs, files in os.walk(os.getcwd() + "\\res\\"): #   for nm in dirs: attachments = [] photo_id = 0 data = [] DIR = 'C:/Users/jo/PycharmProjects/repost/res/' + nm #     quantity_foto = len([name for name in os.listdir(DIR) if os.path.isfile(os.path.join(DIR, name))]) post_foto(quantity_foto, nm) attachments.reverse() #   params = {'attachments': attachments, 'message': new_x[dlina - i], 'owner_id': '-' + groupID, 'from_group': '1'} vk_api.wall.post(**params) i = i + 1</span></span></code> </pre><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar445408/">https://habr.com/ru/post/ar445408/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar445392/index.html">MyTarget ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ: ØªÙˆØµÙŠØ§Øª Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ø§Ù„Ø´Ø®ØµÙŠØ©</a></li>
<li><a href="../ar445394/index.html">ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø¢Ù…Ù† Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯: ØªÙ„Ø¨ÙŠØ© 3-D Secure 2.0</a></li>
<li><a href="../ar445398/index.html">Ø¹Ù„Ù… Ø¬ÙˆØ¬ÙˆÙ„ÙˆØ¬ÙŠØ§ (Ù‡Ø°Ø§ Ù„ÙŠØ³ Ø®Ø·Ø£ Ù…Ø·Ø¨Ø¹ÙŠ) Ù„Ù„Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ†</a></li>
<li><a href="../ar445402/index.html">Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù†Ø§Ø± ÙÙŠ Ø§Ù„Ù„ÙŠÙ„ ØŒ Ø£Ùˆ Ù„Ù…Ø§Ø°Ø§ ØªØ­Ù…ÙŠÙ„ Ù‡Ù…Ø² - ÙˆÙ„ÙŠØ³ Ù…Ø®ÙŠÙØ§</a></li>
<li><a href="../ar445406/index.html">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø¨Ø±Ù†Ø§Ù…Ø¬ C ++ Russia 2019. Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù‚Ø§Ø¯Ù… Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù†Ø§ØŸ</a></li>
<li><a href="../ar445410/index.html">Dream big & go global: Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯ÙˆÙ„ÙŠØ© ÙÙŠ Ù…Ø¤ØªÙ…Ø± EMERGE</a></li>
<li><a href="../ar445414/index.html">ÙƒÙŠÙ Ø£ØµØ¨Ø­Øª ÙƒØªØ¨ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø³ÙˆÙÙŠØ§ØªÙŠØ© Ù‚Ø·Ø¹Ø© Ø£Ø«Ø±ÙŠØ© Ø¨ÙŠÙ† Ø¹Ù„Ù…Ø§Ø¡ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„Ù…Ù‡Ù†Ø¯Ø³ÙŠÙ† ÙÙŠ Ø§Ù„Ù‡Ù†Ø¯</a></li>
<li><a href="../ar445416/index.html">Ù„Ù…Ø§Ø°Ø§ Ø§Ù„ÙÙŠÙ†ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ Ù‚ÙŠØ¯ Ø§Ù„Ø­ÙŠØ§Ø© ÙÙŠ Ø§Ù„Ø¹ØµØ± Ø§Ù„Ø±Ù‚Ù…ÙŠ</a></li>
<li><a href="../ar445418/index.html">Ù‡ÙˆÙ…Ùˆ Ø§Ù„Ø¹Ø§Ù‚Ù„ØŸ Ù„Ù… ÙŠØ¹Ø¯</a></li>
<li><a href="../ar445420/index.html">Ù‡Ù†Ø§Ùƒ 17 Ù…Ù„ÙŠØ§Ø± Ø¬Ù‡Ø§Ø² ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙÙŠ Ù‚Ø´Ø±Ø© Ø§Ù„Ø¯Ù…Ø§Øº</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>