<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👙 🧒🏽 👶 Juniper SRX و Cisco ASA: السلسلة التالية 🎦 🗄️ 👩🏽‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="في المرة الأولى التي أنشأت فيها IPSec بين Juniper SRX و Cisco ASA ، عادت إلى عام 2014. حتى مع ذلك ، كان الأمر مؤلماً للغاية ، لأنه كان هناك الكثير من ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Juniper SRX و Cisco ASA: السلسلة التالية</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481620/" style=";text-align:right;direction:rtl">  في المرة الأولى التي أنشأت فيها IPSec بين Juniper SRX و Cisco ASA ، عادت إلى عام 2014.  حتى مع ذلك ، كان الأمر مؤلماً للغاية ، لأنه كان هناك الكثير من المشكلات (عادةً ما يكون هناك نفق ينهار أثناء التجديد) ، كان من الصعب تشخيصه (كانت ASA في مكان عملائنا ، وكانت فرص تصحيح الأخطاء محدودة) ، لكن نجحت بطريقة ما. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/w2/eb/n_/w2ebn_vjpuq9sfxp-vw8lhz090m.jpeg" alt="صورة"></div><br>  منذ ذلك الحين ، تم تحديث JunOS الموصى بها لـ SRX إلى 15.1 (لخط SRX300 ، على الأقل) ، وتعلم ASA كيفية استخدام IPSec القائم على التوجيه (إصدار البرنامج 9.8) ، مما يبسط التكوين قليلاً.  وفي العمل الحالي منذ وقت ليس ببعيد كانت هناك فرصة لتجميع مثل هذا المخطط مرة أخرى.  ومرة أخرى ، دون جدوى - أثناء التجديد ، سقط النفق بأمان (ولم يرتفع دائمًا دون إعادة التشغيل يدويًا).  ومرة أخرى في سجلات الصمت والارتباك ، ولكن بسبب  كان ASA مع شريكنا ، ثم لم يكن هناك طريقة لاول مرة ، على التوالي. <br><br>  والآن أتاحت الفرصة لتجميع مخطط يكون فيه كلا الجانبين (SRX و ASA) تحت سيطرتنا ، على التوالي ، يمكنك اللعب للأبد. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ترتيب </h2><br>  إذن ما لدينا: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Juniper SRX340 (JunOS 15.1X49D150.2) </li><li style=";text-align:right;direction:rtl">  Cisco ASA 5506 (البرنامج 9.8.4) </li><li style=";text-align:right;direction:rtl">  IPSec القائم على الطريق بينهما (سيتم توفير التوجيه بواسطة BGP ، وسأقول أيضًا بضع كلمات عن ذلك) </li></ul><br><h2 style=";text-align:right;direction:rtl">  مخطط </h2><br><img src="https://habrastorage.org/webt/sh/my/jo/shmyjoejv-nyyjfd9xscuppkgqs.jpeg"><br><br><h2 style=";text-align:right;direction:rtl">  ترتيب </h2><br><h3 style=";text-align:right;direction:rtl">  العرعر شجر </h3><br>  لنبدأ بتكوين SRX.  لدي عدد قليل من الأنفاق المختلفة التي بنيت عليها ، في النهاية جئت إلى شيء مثل هذا: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">set security ike policy IKE-ASA mode main set security ike policy IKE-ASA proposals SHA256-AES128-5-86400 set security ike policy IKE-ASA pre-shared-key ascii-text ... set security ike gateway GW-ASA ike-policy IKE-ASA set security ike gateway GW-ASA address 192.0.2.2 set security ike gateway GW-ASA dead-peer-detection interval 10 set security ike gateway GW-ASA dead-peer-detection threshold 3 set security ike gateway GW-ASA local-identity inet 198.51.100.2 set security ike gateway GW-ASA external-interface ae0.4 set security ike gateway GW-ASA version v2-only set security ipsec vpn VPN-ASA bind-interface st0.7 set security ipsec vpn VPN-ASA df-bit clear set security ipsec vpn VPN-ASA vpn-monitor source-interface st0.7 set security ipsec vpn VPN-ASA vpn-monitor destination-ip 169.254.100.2 set security ipsec vpn VPN-ASA ike gateway GW-ASA set security ipsec vpn VPN-ASA ike ipsec-policy SHA256-AES128-3600-14-policy set security ipsec vpn VPN-ASA establish-tunnels immediately set interfaces st0 unit 7 description "ASA AnyConnect router" set interfaces st0 unit 7 family inet mtu 1436 set interfaces st0 unit 7 family inet address 169.254.100.1/30 set routing-options static route 192.0.2.2/32 next-hop 198.51.100.1 set security zones security-zone ZONE-VPN interfaces st0.7 host-inbound-traffic system-services ping set security zones security-zone ZONE-VPN interfaces st0.7 host-inbound-traffic system-services ike set security zones security-zone ZONE-VPN interfaces st0.7 host-inbound-traffic system-services traceroute set security zones security-zone ZONE-VPN interfaces st0.7 host-inbound-traffic protocols bgp</code> </pre> <br>  يمكن ملاحظة أن IKEv2 يستخدم بدون محددات حركة المرور (لدينا بالفعل أموال كافية في ترسانتنا للحد من تدفق حركة المرور - من قوائم بادئة BGP إلى سياسات الأمان).  إلى كومة الذاكرة المؤقتة ، يتم استخدام DPD (اكتشاف نظير ميت) وشاشة vpn (لديهم نوع مختلف تمامًا من الفحوصات ، وأنا أستخدمهما من أجل الموثوقية). <br><br><h3 style=";text-align:right;direction:rtl">  سيسكو </h3><br>  تكوين ASA: <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">crypto ipsec ikev2 ipsec-proposal SHA256-AES128 protocol esp encryption aes-256 aes-192 aes protocol esp integrity sha-256 crypto ipsec profile IPSEC-PROFILE-AMS1-VPN2 set ikev2 ipsec-proposal SHA256-AES128 set pfs group14 set security-association lifetime kilobytes unlimited set security-association lifetime seconds 3600 crypto ikev2 policy 1 encryption aes-256 aes-192 aes integrity sha256 group 5 prf sha256 lifetime seconds 86400 tunnel-group 198.51.100.2 type ipsec-l2l tunnel-group 198.51.100.2 ipsec-attributes isakmp keepalive threshold 30 retry 10 ikev2 remote-authentication pre-shared-key ... ikev2 local-authentication pre-shared-key ... crypto ikev2 enable outside interface Tunnel7 nameif l2l-ams1-vpn2 ip address 169.254.100.2 255.255.255.252 tunnel source interface outside tunnel destination 198.51.100.2 tunnel mode ipsec ipv4 tunnel protection ipsec profile IPSEC-PROFILE-AMS1-VPN2</code> </pre> <br>  هيكل التكوينات هو نفسه تقريبا على كلا الموجهات ، ولكن كالمعتاد ، لا تتطابق أسماء الأقسام على الإطلاق. دعنا نتعرف على ما يتوافق مع ما. <br><br><h3 style=";text-align:right;direction:rtl">  مقارنة التكوين </h3><br><h4 style=";text-align:right;direction:rtl">  سياسة / اقتراح IKE </h4><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">crypto ikev2 policy 1 encryption aes-256 aes-192 aes integrity sha256 group 5 prf sha256 lifetime seconds 86400</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">set security ike proposal SHA256-AES128-5-86400 description ike-phase1-proposal1 set security ike proposal SHA256-AES128-5-86400 authentication-method pre-shared-keys set security ike proposal SHA256-AES128-5-86400 dh-group group5 set security ike proposal SHA256-AES128-5-86400 authentication-algorithm sha-256 set security ike proposal SHA256-AES128-5-86400 encryption-algorithm aes-128-cbc set security ike proposal SHA256-AES128-5-86400 lifetime-seconds 86400 set security ike policy IKE-ASA mode main set security ike policy IKE-ASA proposals SHA256-AES128-5-86400 set security ike policy IKE-ASA pre-shared-key ascii-text ...</code> </pre><br>  هنا يبدأ بعض الالتباس في المصطلحات.  ما تسميه Cisco سياسة IKE ، لدى Juniper اقتراح IKE.  تشبه سياسة IKE Juniper مجموعة النفق ASA ... شخصياً ، أحب أسلوب Juniper أكثر ، ولكن هنا بالطبع ، إنها عادة. <br><br>  يجب أن أقول أن تكوين IKEv2 (خاصةً الطريق المستند إلى) على ASA لا يزال يبدو أكثر منطقية من خرائط التشفير والخزي الآخر الذي كان من قبل. <br><br><h4 style=";text-align:right;direction:rtl">  سياسة / اقتراح IPSec </h4><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">crypto ipsec ikev2 ipsec-proposal SHA256-AES128 protocol esp encryption aes-256 aes-192 aes protocol esp integrity sha-256 crypto ipsec profile IPSEC-PROFILE-SHA256-AES128-3600-14 set ikev2 ipsec-proposal SHA256-AES128 set pfs group14 set security-association lifetime kilobytes unlimited set security-association lifetime seconds 3600</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">set security ipsec proposal SHA256-AES128-3600 description ipsec-phase2-proposal set security ipsec proposal SHA256-AES128-3600 protocol esp set security ipsec proposal SHA256-AES128-3600 authentication-algorithm hmac-sha-256-128 set security ipsec proposal SHA256-AES128-3600 encryption-algorithm aes-128-cbc set security ipsec proposal SHA256-AES128-3600 lifetime-seconds 3600 set security ipsec policy SHA256-AES128-3600-14-policy description SHA256-AES128-3600-14-policy set security ipsec policy SHA256-AES128-3600-14-policy perfect-forward-secrecy keys group14 set security ipsec policy SHA256-AES128-3600-14-policy proposals SHA256-AES128-3600</code> </pre> <br>  هنا ، يقوم كلا البائعين بعمل علامة زائد أو ناقص بالطريقة نفسها - أولاً ، نقوم بإنشاء اقتراح بمعلمات التشفير / المصادقة ، ثم نعلق العمر ونفرض pfs عليه. <br><br><h4 style=";text-align:right;direction:rtl">  بوابة </h4><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">tunnel-group 198.51.100.2 type ipsec-l2l tunnel-group 198.51.100.2 ipsec-attributes isakmp keepalive threshold 30 retry 10 ikev2 remote-authentication pre-shared-key ... ikev2 local-authentication pre-shared-key ...</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">set security ike gateway GW-ASA ike-policy IKE-ASA-LEGAL set security ike gateway GW-ASA address 192.0.2.2 set security ike gateway GW-ASA dead-peer-detection interval 10 set security ike gateway GW-ASA dead-peer-detection threshold 3 set security ike gateway GW-ASA local-identity inet 198.51.100.2 set security ike gateway GW-ASA external-interface ae0.4 set security ike gateway GW-ASA version v2-only</code> </pre> <br>  وهنا الاختلافات أكثر وضوحا.  على ASA PSK يشار مباشرة في إعدادات النظير.  يسمح لك Juniper بتحديد الواجهة الصادرة والخيارات الإضافية مثل الهوية المحلية ، بالإضافة إلى أنه يشير إلى سياسة ike (حيث حددنا PSK). <br><br>  بالمناسبة ، إذا كنت ترغب في تحويل IKEv2 إلى IKEv1 على ASA (والعكس صحيح) ، فستحتاج Cisco إلى إعادة إنشاء مجموعة النفق بأكملها.  وعلى SRX ، فقط قم بتغيير خيار واحد.  <i>(صحيحًا ، قد تأتي الخيارات غير المتوافقة لاحقًا مع الالتزام ، ولكن هذه هي التفاصيل)</i> <br><br><h4 style=";text-align:right;direction:rtl">  VPN / VTI </h4><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">interface Tunnel7 nameif l2l-ams1-vpn2 ip address 169.254.100.2 255.255.255.252 tunnel source interface outside tunnel destination 198.51.100.2 tunnel mode ipsec ipv4 tunnel protection ipsec profile IPSEC-PROFILE-SHA256-AES128-3600-14</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">set security ipsec vpn VPN-ASA bind-interface st0.7 set security ipsec vpn VPN-ASA df-bit clear set security ipsec vpn VPN-ASA vpn-monitor source-interface st0.7 set security ipsec vpn VPN-ASA vpn-monitor destination-ip 169.254.100.2 set security ipsec vpn VPN-ASA ike gateway GW-ASA set security ipsec vpn VPN-ASA ike ipsec-policy SHA256-AES128-3600-14-policy set security ipsec vpn VPN-ASA establish-tunnels immediately set interfaces st0 unit 7 description "AnyConnect router" set interfaces st0 unit 7 family inet mtu 1436 set interfaces st0 unit 7 family inet address 169.254.100.1/30</code> </pre> <br>  ومرة أخرى يبدو أن تكوين جونيبر أكثر منطقية.  يتم تكوين VPN بشكل منفصل (يمكن أن يكون أيضًا مستندًا إلى السياسة) ، ونفق الأمان نفسه منفصل.  شكر خاص على "إنشاء الأنفاق على الفور".  خيار مفيد للغاية ؛) (tsiskovody فهم ما أعنيه).  هناك "مكافأة" أخرى لـ SRX وهي أنه من الممكن إنشاء IPSecs متعددة النقاط ، مع الكشف التلقائي عن الأقران (يعمل ، لسوء الحظ ، فقط بين SRX) ، ومع التوجيه اليدوي.  هذا ، بالطبع ، ليس DMVPN مكتمل ، ولكن الحياة في أجهزة مثل "مركز واحد - العديد من الفروع" تجعل الأمر أسهل بكثير. <br><br><h3 style=";text-align:right;direction:rtl">  واجهات </h3><br>  سأفصل بشكل منفصل عن تكوين الواجهات التي تم بناء IPSec عليها.  بالنسبة لـ Juniper ، فهو ، على التوالي ، <b>ae0.4</b> ، بالنسبة لـ ASA فهو <b>خارج</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">crypto ikev2 enable outside</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">set security zones security-zone ZONE-INTERNET interfaces ae0.4 host-inbound-traffic system-services ike set security zones security-zone ZONE-VPN interfaces st0.7 host-inbound-traffic system-services ping set security zones security-zone ZONE-VPN interfaces st0.7 host-inbound-traffic system-services traceroute set security zones security-zone ZONE-VPN interfaces st0.7 host-inbound-traffic protocols bgp</code> </pre> <br>  في الواجهات ، تحتاج إلى تمكين ike ، وإلا فلن يعمل شيء :) بالإضافة إلى ذلك ، بالنسبة إلى SRX ، تحتاج إلى تمكين bgp / ospf / مهما للاتصالات الواردة على واجهة st0.x. <br><br><h2 style=";text-align:right;direction:rtl">  تكوين BGP </h2><br>  كل شيء عادي جدا هنا (من ناحية) <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">set protocols bgp group ASA type external set protocols bgp group ASA description "AnyConnect router" set protocols bgp group ASA hold-time 30 set protocols bgp group ASA import IMPORT-EBGP-ASA set protocols bgp group ASA export EXPORT-EBGP-ASA set protocols bgp group ASA local-as 64666 set protocols bgp group ASA neighbor 169.254.100.2 peer-as 65001 set policy-options policy-statement EXPORT-EBGP-ASA term 0 from route-filter 10.0.0.0/8 exact set policy-options policy-statement EXPORT-EBGP-ASA term 0 then accept set policy-options policy-statement EXPORT-EBGP-ASA term 1 then reject set policy-options policy-statement IMPORT-EBGP-ASA term 1 then reject</code> </pre> <br>  في ASA نعطي البادئة المجمعة لشبكة LAN الخاصة بنا - سأحصل عليها 10/8.  لا نقبل أي شيء من ASA ، لأنه من إصدار البرنامج 9.8.4 لا يزال يتعذر عليك الإعلان عن عناوين واجهات الإدارة (وهو أمر مفهوم) و BVI (وهو أمر غير مريح للغاية) عبر BGP.  ولكن إذا كان لديك أي شبكات أخرى وراء ASA ، فسوف تحتاج إلى إضافتها إلى السياسة ، بالطبع. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">asa(config-router-af)# network 10.255.32.252 mask 255.255.255.254 ERROR: BGP configuration not supported on management-only/BVI interface</code> </pre> <br>  "لرؤية" الواجهة الداخلية ، ستحتاج إلى تسجيل مسار ثابت على SRX في اتجاه ipsec: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">set routing-options static route 10.255.32.252/31 next-hop 169.254.100.2</code> </pre> <br>  بالإضافة إلى ذلك ، لا يزال ASA لا يعرف كيفية استرجاع الواجهات ، لذلك سوف نرسل جميع / netflow وسجلات أخرى من الداخل. <br><br>  يحتوي ASA5506 على مفتاح مضمن ، بحيث يمكنك استخدام واجهة BVI الافتراضية (مفيدة بشكل خاص عندما يكون لديك نظام توجيه على عصا ، ويتم استخدام منفذ فعلي واحد فقط. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">interface BVI1 nameif inside security-level 100 ip address 10.255.32.253 255.255.255.254 management-access inside</code> </pre> <br>  بعد ذلك ، في الأماكن الصحيحة (التسجيل ، snmp ، التدفق) ، ستحتاج إلى تحديد "الداخل" كواجهة المصدر. <br><br><h2 style=";text-align:right;direction:rtl">  إذا حدث خطأ ما ويعرف أيضًا باسم استكشاف الأخطاء وإصلاحها </h2><br><h3 style=";text-align:right;direction:rtl">  ايك / IPSec </h3><br>  أولاً ، يجب تثبيت مرحلتي IPSec (بالنسبة لـ Juniper ، هذا ، في الواقع ، IKE / IPSec). <br><br>  نحن ننظر: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">admin@srx&gt; show security ike security-associations Index State Initiator cookie Responder cookie Mode Remote Address 2128190 UP ae7d7d447326218a 2be3b3004ae0e36a IKEv2 192.0.2.2 admin@srx&gt; show security ipsec security-associations Total active tunnels: 6 ID Algorithm SPI Life:sec/kb Mon lsys Port Gateway &lt;131077 ESP:aes-cbc-128/sha256 fec3c7d1 2867/ unlim U root 500 192.0.2.2 &gt;131077 ESP:aes-cbc-128/sha256 74d792ca 2867/ unlim U root 500 192.0.2.2</code> </pre> <br>  على ASA: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">asa# sho crypto ikev2 sa IKEv2 SAs: Session-id:5, Status:UP-ACTIVE, IKE count:1, CHILD count:1 Tunnel-id Local Remote Status Role 585564345 192.0.2.2/500 198.51.100.2/500 READY RESPONDER Encr: AES-CBC, keysize: 128, Hash: SHA256, DH Grp:5, Auth sign: PSK, Auth verify: PSK Life/Active Time: 86400/47018 sec Child sa: local selector 0.0.0.0/0 - 255.255.255.255/65535 remote selector 0.0.0.0/0 - 255.255.255.255/65535 ESP spi in/out: 0xc989d9ea/0xcca8b6d5</code> </pre> <br>  في Juniper ، لا يزال بإمكانك مشاهدة إحصائيات على نفق ipsec ، بما في ذلك أسباب السقوط: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">admin@srx&gt; show security ipsec security-associations index 131078 detail ID: 131078 Virtual-system: root, VPN Name: VPN-ASA-LEGAL-PL Local Gateway: 198.51.100.2, Remote Gateway: 192.0.2.2 Local Identity: ipv4_subnet(any:0,[0..7]=0.0.0.0/0) Remote Identity: ipv4_subnet(any:0,[0..7]=0.0.0.0/0) Version: IKEv2 DF-bit: clear, Copy-Outer-DSCP Disabled, Bind-interface: st0.7 Port: 500, Nego#: 734, Fail#: 0, Def-Del#: 0 Flag: 0x600a29 Tunnel events: Mon Dec 09 2019 13:40:35: IPSec SA rekey successfully completed (48 times) Mon Dec 09 2019 00:30:47: IKE SA rekey successfully completed (10 times) Fri Nov 29 2019 02:13:55: IPSec SA negotiation successfully completed (1 times) Fri Nov 29 2019 02:13:55: IKE SA negotiation successfully completed (1 times) Fri Nov 29 2019 02:13:55: No response from peer. Negotiation failed (7 times) Fri Nov 29 2019 02:10:14: DPD detected peer as down. Existing IKE/IPSec SAs cleared (1 times) Fri Nov 29 2019 01:39:15: IPSec SA rekey successfully completed (1 times) Fri Nov 29 2019 00:49:50: IPSec SA negotiation successfully completed (1 times) Fri Nov 29 2019 00:49:50: IKE SA negotiation successfully completed (1 times) Fri Nov 29 2019 00:49:30: No response from peer. Negotiation failed (23 times) Fri Nov 29 2019 00:37:24: DPD detected peer as down. Existing IKE/IPSec SAs cleared (1 times) Fri Nov 29 2019 00:30:00: IPSec SA rekey successfully completed (77 times) Thu Nov 28 2019 20:11:31: IKE SA rekey successfully completed (7 times) Tue Nov 26 2019 08:51:44: IPSec SA negotiation successfully completed (1 times) Thu Nov 21 2019 21:24:32: IKE SA negotiation successfully completed (1 times) Thu Nov 21 2019 01:06:27: IKE SA rekey successfully completed (6 times) Direction: inbound, SPI: 4bd2e2bd, AUX-SPI: 0 , VPN Monitoring: UP Hard lifetime: Expires in 3132 seconds Lifesize Remaining: Unlimited Soft lifetime: Expires in 2495 seconds Mode: Tunnel(10 10), Type: dynamic, State: installed Protocol: ESP, Authentication: hmac-sha256-128, Encryption: aes-cbc (128 bits) Anti-replay service: counter-based enabled, Replay window size: 64 Direction: outbound, SPI: 504f306e, AUX-SPI: 0 , VPN Monitoring: UP Hard lifetime: Expires in 3132 seconds Lifesize Remaining: Unlimited Soft lifetime: Expires in 2495 seconds Mode: Tunnel(10 10), Type: dynamic, State: installed Protocol: ESP, Authentication: hmac-sha256-128, Encryption: aes-cbc (128 bits) Anti-replay service: counter-based enabled, Replay window size: 64</code> </pre><br>  إذا كان كل شيء على ما يرام مع IPSec ، فأنت بحاجة إلى إلقاء نظرة على ACL (سياسات الأمان ، قواعد المضيف الواردة ، وما إلى ذلك).  في الحالات القصوى ، يمكنك محاولة إعادة تحميل المربع (ASA) - كان يستخدم لمساعدتي. <br>  <b>محدث:</b> حول تصحيح IPsec في Juniper قمت بتعيينه بالفعل لـ Habr <br><br><h3 style=";text-align:right;direction:rtl">  BGP </h3><br>  كل شيء قياسي هنا - إذا لم يتم تثبيت الجلسة ، يمكنك معرفة ما إذا كانت BGP-hello تطير في كلا الاتجاهين. <br><br><h3 style=";text-align:right;direction:rtl">  في المجموع </h3><br>  هذا كل شيء.  لا أعرف ما إذا كان البرنامج الجديد هو السبب في ذلك أم أن النجوم تجمعت مع ذلك - لكن نفق ASA &lt;&gt; SRX يبقى ثابتًا ولا يسقط مرة واحدة يوميًا ، كما كان من قبل. <br><br>  أتمنى أن تنجح أيضًا! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar481620/">https://habr.com/ru/post/ar481620/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar481606/index.html">اشتراك ثابت باستخدام قالب Observer باستخدام C ++ و متحكم Cortex M4</a></li>
<li><a href="../ar481610/index.html">PostgreSQL Antipatterns: تحديث جدول كبير تحت التحميل</a></li>
<li><a href="../ar481612/index.html">مساهمتنا الصغيرة في نضال أفالونيا واجهة المستخدم من أجل منصات أقل</a></li>
<li><a href="../ar481616/index.html">القبة الجيوديسية. حول الجهاز وتجربتي في العمليات الحسابية</a></li>
<li><a href="../ar481618/index.html">MVP في الوحدة أو كيفية تبسيط الحياة</a></li>
<li><a href="../ar481624/index.html">كتابة طلب على الرفرفة بالاشتراك مع Redux</a></li>
<li><a href="../ar481626/index.html">مجموعات العرض المعقدة في نظام التشغيل iOS: المشكلات والحلول في مثال موجز VKontakte</a></li>
<li><a href="../ar481628/index.html">قواعد لكتابة الخطوات الأولية في حالات الاختبار</a></li>
<li><a href="../ar481630/index.html">أفضل الأدوات والموارد المفيدة لجعل الشركات الناشئة أكثر ذكاءً في عام 2019</a></li>
<li><a href="../ar481632/index.html">سحابة مقدمي الخدمات: من هو أجمل في السوق؟</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>