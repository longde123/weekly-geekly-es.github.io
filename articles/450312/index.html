<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🎓 😷 🗄️ Docker Compose Starter Guide 👩🏽‍🎓 🖐🏼 👩‍❤️‍💋‍👩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El autor del artículo, cuya traducción publicamos hoy, dice que está destinado a aquellos desarrolladores que desean aprender Docker Compose y van a c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker Compose Starter Guide</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/450312/">  El autor del artículo, cuya traducción publicamos hoy, dice que está destinado a aquellos desarrolladores que desean aprender Docker Compose y van a crear su primera aplicación cliente-servidor con Docker.  Se supone que el lector debe estar familiarizado con los conceptos básicos de Docker.  Si este no es el caso, puede echar un vistazo a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esta</a> serie de materiales, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esta</a> publicación, donde se discuten los conceptos básicos de Docker junto con los conceptos básicos de Kubernetes, y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este</a> artículo para principiantes. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/b4c/71f/be9/b4c71fbe9634709b3e33a72eabca59af.png" alt="imagen"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">¿Qué es Docker Compose?</font> </h2><br>  Docker Compose es una herramienta incluida con Docker.  Está diseñado para resolver los problemas asociados con el despliegue de proyectos. <br><br>  Al estudiar los conceptos básicos de Docker, puede encontrar la creación de aplicaciones simples que funcionan de manera autónoma, independiente de, por ejemplo, fuentes de datos externas o ciertos servicios.  En la práctica, tales aplicaciones son raras.  Los proyectos reales generalmente incluyen un conjunto completo de aplicaciones colaborativas. <br><br>  ¿Cómo sabe si necesita usar Docker Compose al implementar un proyecto?  De hecho, muy simple.  Si se utilizan varios servicios para garantizar el funcionamiento de este proyecto, Docker Compose puede ser útil.  Por ejemplo, en una situación en la que crean un sitio web que, para autenticar a los usuarios, necesita conectarse a la base de datos.  Un proyecto similar puede constar de dos servicios: uno que proporciona el sitio y otro responsable de mantener la base de datos. <br><br>  La tecnología Docker Compose, si se describe de manera simplificada, permite, con un solo comando, lanzar muchos servicios. <br><br><h2>  <font color="#3AC1EF">Diferencia entre Docker y Docker Compose</font> </h2><br>  Docker se usa para administrar los contenedores individuales (servicios) que componen la aplicación. <br><br>  Docker Compose se usa para administrar simultáneamente múltiples contenedores que componen la aplicación.  Esta herramienta ofrece las mismas características que Docker, pero le permite trabajar con aplicaciones más complejas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/859/489/407/85948940715022ca196b8ad6f1e810d0.png"></div><br>  <i><font color="#999999">Docker (contenedor único) y Docker Compose (contenedores múltiples)</font></i> <br><br><h2>  <font color="#3AC1EF">Caso de uso típico de Docker Compose</font> </h2><br>  Docker Compose es, en las manos adecuadas, una herramienta muy poderosa que le permite implementar rápidamente aplicaciones con una arquitectura compleja.  Ahora veremos un ejemplo del uso práctico de Docker Compose, cuyo análisis le permitirá evaluar las ventajas que le dará el uso de Docker Compose. <br><br>  Imagina que eres un desarrollador de un proyecto web.  Este proyecto incluye dos sitios web.  El primero permite a las personas en los negocios crear, con solo unos pocos clics, tiendas en línea.  El segundo está dirigido a la atención al cliente.  Estos dos sitios interactúan con la misma base de datos. <br><br>  Su proyecto se está volviendo más popular y resulta que la potencia del servidor en el que funciona ya no es suficiente.  Como resultado, decide transferir todo el proyecto a otra máquina. <br><br>  Desafortunadamente, no usaste algo como Docker Compose.  Por lo tanto, tendrá que transferir y reconfigurar los servicios uno por uno, con la esperanza de que, en el proceso de este trabajo, no olvide nada. <br><br>  Si usa Docker Compose, transferir su proyecto a un nuevo servidor es un asunto que puede resolverse ejecutando varios comandos.  Para completar la transferencia del proyecto a un nuevo lugar, solo necesita realizar algunas configuraciones y cargar una copia de seguridad de la base de datos en el nuevo servidor. <br><br><h2>  <font color="#3AC1EF">Desarrollar una aplicación cliente-servidor usando Docker Compose</font> </h2><br>  Ahora que sabe para qué vamos a utilizar Docker Compose, es hora de crear su primera aplicación cliente-servidor con esta herramienta.  Es decir, estamos hablando del desarrollo de un pequeño sitio web (servidor) en Python, que puede producir un archivo con un fragmento de texto.  Este archivo es solicitado al servidor por un programa (cliente), también escrito en Python.  Después de recibir el archivo del servidor, el programa muestra el texto almacenado en la pantalla. <br><br>  Tenga en cuenta que esperamos que posea los conceptos básicos de Docker y que ya tenga instalada la plataforma Docker. <br><br>  Vamos a trabajar en el proyecto. <br><br><h3>  <font color="#3AC1EF">▍1.</font>  <font color="#3AC1EF">Creación de proyectos</font> </h3><br>  Para construir su primera aplicación cliente-servidor, sugiero comenzar con la creación de una carpeta de proyecto.  Debe contener los siguientes archivos y carpetas: <br><br><ul><li> <code>docker-compose.yml</code> .  Este es un archivo Docker Compose que contendrá las instrucciones necesarias para iniciar y configurar los servicios. </li><li>  Carpeta del <code>server</code>  Contendrá los archivos necesarios para garantizar el funcionamiento del servidor. </li><li>  Carpeta <code>client</code> .  Aquí estarán los archivos de la aplicación cliente. </li></ul><br>  Como resultado, el contenido de la carpeta principal de su proyecto debería verse así: <br><br><pre> <code class="plaintext hljs">. ├── client/ ├── docker-compose.yml └── server/ 2 directories, 1 file</code> </pre> <br><h3>  <font color="#3AC1EF">▍2.</font>  <font color="#3AC1EF">Creación del servidor</font> </h3><br>  Aquí, en el proceso de creación del servidor, tocaremos algunas cosas básicas relacionadas con Docker. <br><br><h4>  2a.  Creación de archivos </h4><br>  Vaya a la carpeta del <code>server</code> y cree los siguientes archivos en ella: <br><br><ul><li>  <code>server.py</code> archivo.  Contendrá el código del servidor. </li><li>  Archivo <code>index.html</code> .  Este archivo contendrá un texto que la aplicación del cliente debe mostrar. </li><li>  Archivo <code>Dockerfile</code> .  Este es un archivo Docker que contendrá las instrucciones necesarias para crear un entorno de servidor. </li></ul><br>  Así debería verse el contenido de su <code>server/</code> carpeta: <br><br><pre> <code class="plaintext hljs">. ├── Dockerfile ├── index.html └── server.py 0 directories, 3 files</code> </pre> <br><h4>  2b.  Edición de un archivo Python. </h4><br>  Agregue el siguiente código al archivo <code>server.py</code> : <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python3 #    python. #       -. #     - ,      Python. import http.server import socketserver #         . handler = http.server.SimpleHTTPRequestHandler #   ,        1234. #    ,        ,    docker-compose. with socketserver.TCPServer(("", 1234), handler) as httpd:   #       ,    .  httpd.serve_forever()</span></span></code> </pre> <br>  Este código le permite crear un servidor web simple.  Dará a los clientes el archivo <code>index.html</code> , cuyo contenido se mostrará más tarde en la página web. <br><br><h4>  2c.  Edición de archivos HTML </h4><br>  Agregue el siguiente texto al archivo <code>index.html</code> : <br><br><pre> <code class="plaintext hljs">Docker-Compose is magic!</code> </pre> <br>  Este texto será transmitido al cliente. <br><br><h4>  2d.  Edición de Dockerfile </h4><br>  Ahora crearemos un <code>Dockerfile</code> simple, que será responsable de organizar el tiempo de ejecución para el servidor Python.  Utilizaremos la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">imagen oficial</a> destinada a la ejecución de programas escritos en Python como base de la imagen creada.  Aquí están los contenidos del Dockerfile: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    ,  Dockerfile       . #      'FROM'. #      python ( DockerHub). #   ,    ,  'python',     - 'latest'. FROM python:latest #       ,   Python,     'server.py'  'index.html'. #     ,     'ADD'. #  , 'server.py',    ,   . #  , '/server/',  ,        . #        '/server/'. ADD server.py /server/ ADD index.html /server/ #     'WORKDIR', ,   . #      . #    ,      ,   '/server/'. WORKDIR /server/</span></span></code> </pre> <br>  Ahora trabajemos en el cliente. <br><br><h3>  <font color="#3AC1EF">▍3.</font>  <font color="#3AC1EF">Creación de clientes</font> </h3><br>  Al crear la parte del cliente de nuestro proyecto, recordaremos simultáneamente algunos de los conceptos básicos de Docker. <br><br><h4>  3a.  Creación de archivos </h4><br>  Vaya a la carpeta de su proyecto de <code>client</code> y cree los siguientes archivos: <br><br><ul><li>  El archivo <code>client.py</code> .  Este será el código del cliente. </li><li>  Archivo <code>Dockerfile</code> .  Este archivo juega el mismo papel que un archivo similar en la carpeta del servidor.  A saber, contiene instrucciones que describen la creación de un entorno para ejecutar código de cliente. </li></ul><br>  Como resultado, su <code>client/</code> carpeta en esta etapa del trabajo debería verse así: <br><br><pre> <code class="plaintext hljs">. ├── client.py └── Dockerfile 0 directories, 2 files</code> </pre> <br><h4>  3b.  Edición de archivos Python </h4><br>  Agregue el siguiente código al archivo <code>client.py</code> : <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python3 #    Python. #      'index.html'  . #     ,      Python. import urllib.request #      'http://localhost:1234/'. # ,      ,   'http://localhost:1234'. # localhost   ,      . # 1234 -   ,        . fp = urllib.request.urlopen("http://localhost:1234/") # 'encodedContent'     ('index.html'). # 'decodedContent'     (  ,      ). encodedContent = fp.read() decodedContent = encodedContent.decode("utf8") #   ,    ('index.html'). print(decodedContent) #    . fp.close()</span></span></code> </pre> <br>  Gracias a este código, la aplicación cliente puede descargar datos del servidor y mostrarlos en la pantalla. <br><br><h4>  3c.  Edición de Dockerfile </h4><br>  Como en el caso del servidor, creamos un <code>Dockerfile</code> simple para el cliente, responsable de crear el entorno en el que funcionará la aplicación Python del cliente.  Aquí está el código del <code>Dockerfile</code> del cliente: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,     Dockerfile. FROM python:latest #  'client.py'   '/client/'. ADD client.py /client/ #      '/client/'. WORKDIR /client/</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">▍4.</font>  <font color="#3AC1EF">Docker componer</font> </h3><br>  Como habrás notado, creamos dos proyectos diferentes: el servidor y el cliente.  Cada uno de ellos tiene su propio <code>Dockerfile</code> .  Hasta ahora, todo lo que sucede no va más allá de lo básico de trabajar con Docker.  Ahora estamos comenzando con Docker Compose.  Para hacer esto, recurrimos al archivo <code>docker-compose.yml</code> ubicado en la carpeta raíz del proyecto. <br><br>  Tenga en cuenta que aquí no estamos tratando de considerar absolutamente todos los comandos que se pueden usar en <code>docker-compose.yml</code> .  Nuestro objetivo principal es brindarle un ejemplo práctico que le brinde conocimientos básicos de Docker Compose. <br><br>  Aquí está el código para poner en el <code>docker-compose.yml</code> : <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  docker-compose     . #   "3"    -        . version: "3" #  ,  docker-composes   . # 1  = 1 . #    , ,   ... # ,     ,   'services'. services: #    ,       . #  ,     . #   (): . #    ,   . #       . #  ,    ,    'server'. server:   #   "build"     #    Dockerfile,      ,   #    .   #  'server/'     ,   #    Dockerfile.   build: server/   # ,      .   #     "python ./server.py".   command: python ./server.py   #   ,      'server/server.py'   1234.   #          (   ),   #         .   #       'ports'.   #      : [ ]:[ ]   #        1234         # 1234  (         #   ).   ports:     - 1234:1234 #   (): . #    'client'. client:   #  'client/    ,     #  Dockerfile    .   build: client/   # ,      .   #     "python ./client.py".   command: python ./client.py   #   'network_mode'     .   #    ,      'localhost' .   network_mode: host   #   'depends_on'  ,   ,   #   , ,       .   #  ,   'client'       'server'.   depends_on:     - server</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">▍5.</font>  <font color="#3AC1EF">Asamblea de proyecto</font> </h3><br>  Después de incluir todas las instrucciones necesarias en <code>docker-compose.yml</code> , el proyecto debe ser ensamblado.  Este paso de nuestro trabajo se asemeja al uso del <code>docker build</code> , pero el comando correspondiente está relacionado con varios servicios: <br><br><pre> <code class="plaintext hljs">$ docker-compose build</code> </pre> <br><h3>  <font color="#3AC1EF">▍6.</font>  <font color="#3AC1EF">Lanzamiento del proyecto</font> </h3><br>  Ahora que el proyecto está completo, es hora de lanzarlo.  Este paso de nuestro trabajo corresponde al paso en el cual, cuando se trabaja con contenedores individuales, se <code>docker run</code> comando <code>docker run</code> : <br><br><pre> <code class="plaintext hljs">$ docker-compose up</code> </pre> <br>  Después de ejecutar este comando, el terminal debería mostrar el texto descargado por el cliente del servidor: ¡ <code>Docker-Compose is magic!</code>  . <br><br>  Como ya se mencionó, el servidor usa el puerto <code>1234</code> la computadora para atender las solicitudes de los clientes.  Por lo tanto, si va al navegador en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http: // localhost: 1234 /</a> , se mostrará una página con el texto <code>Docker-Compose is magic!</code>  . <br><br><h2>  <font color="#3AC1EF">Comandos útiles</font> </h2><br>  Veamos algunos de los comandos que pueden resultarle útiles al trabajar con Docker Compose. <br><br>  Este comando le permite detener y eliminar contenedores y otros recursos creados por el <code>docker-compose up</code> : <br><br><pre> <code class="plaintext hljs">$ docker-compose down</code> </pre> <br>  Este comando muestra los registros de servicio: <br><br><pre> <code class="plaintext hljs">$ docker-compose logs -f [service name]</code> </pre> <br>  Por ejemplo, en nuestro proyecto se puede usar de la siguiente forma: <code>$ docker-compose logs -f [service name]</code> . <br><br>  Con este comando, puede enumerar los contenedores: <br><br><pre> <code class="plaintext hljs">$ docker-compose ps</code> </pre> <br>  Este comando le permite ejecutar un comando en un contenedor de ejecución: <br><br><pre> <code class="plaintext hljs">$ docker-compose exec [service name] [command]</code> </pre> <br>  Por ejemplo, podría verse así: <code>docker-compose exec server ls</code> . <br><br>  Este comando le permite mostrar una lista de imágenes: <br><br><pre> <code class="plaintext hljs">$ docker-compose images</code> </pre> <br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  Examinamos los conceptos básicos de trabajar con la tecnología Docker Compose, cuyo conocimiento le permitirá utilizar esta tecnología y, si lo desea, comenzar un estudio más profundo.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aquí está el</a> repositorio con el código del proyecto que revisamos aquí. <br><br>  <b>Estimados lectores!</b>  ¿Usas Docker Compose en tus proyectos? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/450312/">https://habr.com/ru/post/450312/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450300/index.html">Deja de discutir sobre programación funcional y POO</a></li>
<li><a href="../450302/index.html">Tecnología de radioaficionados: prototipo de fabricación de placas de circuito en una fábrica china</a></li>
<li><a href="../450304/index.html">Carapuzik montando una hormiga: 100 millones de años de mirmeofilia</a></li>
<li><a href="../450308/index.html">GPU Ray Tracing en Unity - Parte 3</a></li>
<li><a href="../450310/index.html">Cómo funciona Philips VideoWRITER. Primeras imágenes de hierro, luego un poco de tedio.</a></li>
<li><a href="../450314/index.html">TensorFlow para principiantes. Parte 1: información general, instalación de la biblioteca</a></li>
<li><a href="../450316/index.html">TDD: una metodología de desarrollo que cambió mi vida</a></li>
<li><a href="../450318/index.html">Diseñar patrones en el desarrollo moderno de JavaScript</a></li>
<li><a href="../450320/index.html">Los juegos cuánticos simples revelan la máxima complejidad del universo</a></li>
<li><a href="../450322/index.html">¿Por qué necesitamos tantos mensajeros?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>