<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµüèø üë®üèø‚Äçüè≠ üÜó Programa√ß√£o relacional: dor, interesse e dor novamente üåü üç∞ üå∞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No post anterior, falamos detalhadamente o que ensinamos aos alunos no campo da "Programa√ß√£o Industrial". Para aqueles cuja √°rea de interesse se encon...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programa√ß√£o relacional: dor, interesse e dor novamente</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hsespb/blog/441114/"> No <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">post</a> anterior, falamos detalhadamente o que ensinamos aos alunos no campo da "Programa√ß√£o Industrial".  Para aqueles cuja √°rea de interesse se encontra em um campo mais te√≥rico, por exemplo, atra√≠do por novos paradigmas de programa√ß√£o ou matem√°tica abstrata usada na pesquisa te√≥rica sobre programa√ß√£o, existe outra especializa√ß√£o - ‚ÄúLinguagens de Programa√ß√£o‚Äù. <br><br>  Hoje vou falar sobre minha pesquisa no campo da programa√ß√£o relacional, que fa√ßo na universidade e como pesquisadora-estudante no laborat√≥rio de ferramentas de linguagem JetBrains Research. <br><br>  O que √© programa√ß√£o relacional?  Normalmente, executamos uma fun√ß√£o com argumentos e obtemos o resultado.  E, no caso relacional, voc√™ pode fazer o oposto: fixar o resultado e um argumento e obter o segundo argumento.  O principal √© escrever o c√≥digo corretamente, ser paciente e ter um bom cluster. <br><br><img src="https://habrastorage.org/webt/_u/8b/t2/_u8bt2bceznm8e2ujbrvhwn8awy.jpeg"><br><a name="habracut"></a><br><h2>  Sobre mim </h2><br>  Meu nome √© Dmitry Rozplokhas, sou aluno do primeiro ano do HSE de S√£o Petersburgo e, no ano passado, me formei no programa de bacharelado da Universidade Acad√™mica na √°rea de "Linguagens de Programa√ß√£o".  Desde o terceiro ano de gradua√ß√£o, tamb√©m sou estudante de pesquisa no laborat√≥rio de ferramentas de linguagem JetBrains Research. <br><br><h2>  Programa√ß√£o relacional </h2><br><h3>  Fatos gerais </h3><br>  A programa√ß√£o relacional √© quando, em vez de fun√ß√µes, voc√™ descreve a rela√ß√£o entre argumentos e o resultado.  Se o idioma for aprimorado para isso, voc√™ poder√° obter alguns b√¥nus, por exemplo, a capacidade de executar a fun√ß√£o na dire√ß√£o oposta (restaurar os poss√≠veis valores dos argumentos como resultado). <br><br>  Em geral, isso pode ser feito em qualquer linguagem l√≥gica, mas o interesse pela programa√ß√£o relacional surgiu simultaneamente com o advento de uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">miniKanren de</a> linguagem l√≥gica pura minimalista <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">h√°</a> cerca de dez anos, o que tornou poss√≠vel descrever e usar convenientemente essas rela√ß√µes. <br><br>  Aqui est√£o alguns dos casos de uso mais avan√ßados: voc√™ pode escrever um verificador de provas e us√°-lo para encontrar evid√™ncias ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Near et al., 2008</a> ) ou criar um int√©rprete para algum idioma e us√°-lo para gerar programas de su√≠te de testes ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Byrd et al., 2017</a> ). <br><br><h3>  Exemplo de sintaxe e brinquedo </h3><br>  O miniKanren √© uma linguagem pequena; apenas constru√ß√µes matem√°ticas b√°sicas s√£o usadas para descrever rela√ß√µes.  Essa √© uma linguagem incorporada, suas primitivas s√£o uma biblioteca para alguma linguagem externa e pequenos programas miniKanren podem ser usados ‚Äã‚Äãdentro de um programa em outro idioma. <br><br>  Idiomas estrangeiros adequados para miniKanren, um monte.  Inicialmente, havia o Scheme, estamos trabalhando com a vers√£o para Ocaml ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OCanren</a> ), e a lista completa pode ser vista em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">minikanren.org</a> .  Os exemplos deste artigo tamb√©m estar√£o no OCanren.  Muitas implementa√ß√µes adicionam fun√ß√µes auxiliares, mas focaremos apenas no idioma principal. <br><br>  Vamos come√ßar com os tipos de dados.  Convencionalmente, eles podem ser divididos em dois tipos: <br><br><ul><li>  Constantes s√£o alguns dados do idioma em que estamos inseridos.  Strings, n√∫meros e at√© matrizes.  Mas para o miniKanren b√°sico, tudo isso √© uma caixa preta, as constantes s√≥ podem ser verificadas quanto √† igualdade. <br></li><li>  Um "termo" √© uma tupla de v√°rios elementos.  Geralmente usado da mesma maneira que os construtores de dados no Haskell: construtor de dados (string) mais zero ou mais par√¢metros.  OCanren usa construtores de dados regulares do OCaml. <br></li></ul><br>  Por exemplo, se queremos trabalhar com matrizes no pr√≥prio miniKanren, ele deve ser descrito em termos de termos semelhantes √†s linguagens funcionais - como uma lista conectada individualmente.  Uma lista √© uma lista vazia (indicada por algum termo simples) ou um par do primeiro elemento da lista ("cabe√ßalho") e dos elementos restantes ("rabo"). <br><br><pre><code class="plaintext hljs">let emptyList = Nil let list_123 = Cons (1, Cons (2, Cons (3, Nil)))</code> </pre> <br>  Um programa miniKanren √© o relacionamento entre algumas vari√°veis.  Na inicializa√ß√£o, o programa fornece todos os valores poss√≠veis das vari√°veis ‚Äã‚Äãde forma geral.  Muitas vezes, as implementa√ß√µes permitem limitar o n√∫mero de respostas na sa√≠da, por exemplo, encontrar apenas a primeira - a pesquisa nem sempre p√°ra depois de encontrar todas as solu√ß√µes. <br><br>  Voc√™ pode escrever v√°rios relacionamentos que s√£o definidos um pelo outro e at√© chamados recursivamente como fun√ß√µes.  Por exemplo, abaixo, em vez da fun√ß√£o <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mi>c</mi><mi>o</mi><mi>m</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.122ex" height="2.66ex" viewBox="0 -832 8663.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-70" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-70" x="1033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-65" x="1536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-6E" x="2003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-64" x="2603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-28" x="3127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-61" x="3516" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-2C" x="4046" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-62" x="4491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-29" x="4920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-2192" x="5587" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-63" x="6866" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-6F" x="7299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-6D" x="7785" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy="false">(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy="false">)</mo><mo stretchy="false">‚Üí</mo><mi>c</mi><mi>o</mi><mi>m</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> append (a, b) ‚Üí com </script>  definir a rela√ß√£o <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>o</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.502ex" height="2.66ex" viewBox="0 -832 6674.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-70" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-70" x="1033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-65" x="1536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-6E" x="2003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-64" x="2603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-6F" x="3127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-28" x="3612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-61" x="4002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-2C" x="4531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-62" x="4976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-2C" x="5406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-63" x="5851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-29" x="6284" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>o</mi><mo stretchy="false">(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-2"> appendo (a, b, c) </script>  : lista <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.007ex" height="1.455ex" viewBox="0 -520.7 433.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-63" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> c </script>  √© uma concatena√ß√£o de listas <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> a </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.998ex" height="2.057ex" viewBox="0 -780.1 429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-62" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> b </script>  .  As fun√ß√µes que retornam relacionamentos tradicionalmente terminam com um "o" para distingui-las das fun√ß√µes comuns. <br><br>  Uma rela√ß√£o √© escrita como uma declara√ß√£o sobre seus argumentos.  Temos <b>quatro opera√ß√µes b√°sicas</b> : <br><br><ul><li>  Unifica√ß√£o ou igualdade (===) de dois termos, os termos podem incluir vari√°veis.  Por exemplo, voc√™ pode escrever a rela√ß√£o "list <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-6C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>l</mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> l </script>  consiste em um elemento <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-7"> x </script>  ": <br><br><pre> <code class="plaintext hljs">let isSingletono xl = l === Cons (x, Nil)</code> </pre></li><li>  Conjun√ß√£o (l√≥gica ‚Äúe‚Äù) e disjun√ß√£o (l√≥gica ‚Äúou‚Äù) - como na l√≥gica comum.  OCanren √© referido como &amp;&amp;&amp; e |||.  Mas basicamente n√£o h√° nega√ß√£o l√≥gica no MiniKanren. <br></li><li>  Adicionando novas vari√°veis.  Na l√≥gica, √© um quantificador da exist√™ncia.  Por exemplo, para verificar a lista sem vazios, √© necess√°rio verificar se a lista consiste em uma cabe√ßa e uma cauda.  Eles n√£o s√£o argumentos do relacionamento, ent√£o voc√™ precisa criar novas vari√°veis: <br><br><pre> <code class="plaintext hljs">let nonEmptyo l = fresh (ht) (l === Cons (h, t))</code> </pre></li></ul><br>  Um relacionamento pode se chamar recursivamente.  Por exemplo, voc√™ precisa definir o elemento "relacionamento" <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> x </script>  est√° na lista ".  Resolveremos esse problema analisando casos triviais, como em linguagens funcionais: <br><br><ol><li>  Ou o chefe da lista √© <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-9"> x </script><br></li><li>  Ou <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> x </script>  encontra-se na cauda <br></li></ol><br><pre> <code class="plaintext hljs">let membero lx = fresh (ht) ( (l === Cons (h, t)) &amp;&amp;&amp; (x === h ||| membero tx) )</code> </pre><br>  A vers√£o b√°sica do idioma √© constru√≠da nessas quatro opera√ß√µes.  Existem tamb√©m extens√µes que permitem usar outras opera√ß√µes.  O mais √∫til deles √© a restri√ß√£o de desigualdade para definir a desigualdade de dois termos (= / =). <br><br>  Apesar do minimalismo, o miniKanren √© uma linguagem bastante expressiva.  Por exemplo, observe a concatena√ß√£o relacional de duas listas.  A fun√ß√£o de dois argumentos se transforma em uma rela√ß√£o tripla " <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.227ex" height="2.057ex" viewBox="0 -780.1 959 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-62" x="529" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> ab </script>  √© uma concatena√ß√£o de listas <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> a </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.998ex" height="2.057ex" viewBox="0 -780.1 429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-62" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> b </script>  " <br><br><pre> <code class="plaintext hljs">let appendo ab ab = (a === Nil &amp;&amp;&amp; ab === b) ||| (fresh (ht tb) (*  :  fresh   &amp;&amp;&amp; *) (a = Cons (h, t)) (appendo tb tb) (ab === Cons (h, tb)))</code> </pre><br>  A solu√ß√£o n√£o √© estruturalmente diferente de como a escrever√≠amos em uma linguagem funcional.  Analisamos dois casos unidos por uma cl√°usula: <br><br><ol><li>  Se a primeira lista estiver vazia, a segunda lista e o resultado da concatena√ß√£o ser√£o iguais. <br></li><li>  Se a primeira lista n√£o estiver vazia, analisamos-a na cabe√ßa e no final e constru√≠mos o resultado usando uma chamada recursiva da rela√ß√£o. <br></li></ol><br>  Podemos fazer uma solicita√ß√£o para essa rela√ß√£o, corrigindo o primeiro e o segundo argumento - obtemos a concatena√ß√£o de listas: <br><br><pre> <code class="plaintext hljs">run 1 (Œª q -&gt; appendo (Cons (1, Cons (2, Nil))) (Cons (3, Cons (4, Nil))) q)</code> </pre> <br>  ‚áí <br><pre> <code class="plaintext hljs">q = Cons (1, Cons (2, Cons (3, Cons (4, Nil))))</code> </pre> <br>  Podemos consertar o √∫ltimo argumento - dividimos todas as parti√ß√µes desta lista em duas. <br><br><pre> <code class="plaintext hljs">run 4 (Œª qr -&gt; appendo qr (Cons (1, Cons (2, Cons (3, Nil)))))</code> </pre> <br>  ‚áí <br><pre> <code class="plaintext hljs">q = Nil, r = Cons (1, Cons (2, Cons (3, Nil))) | q = Cons (1, Nil), r = Cons (2, Cons (3, Nil)) | q = Cons (1, Cons (2, Nil)), r = Cons (3, Nil) | q = Cons (1, Cons (2, Cons (3, Nil))), r = Nil</code> </pre><br>  Voc√™ pode fazer qualquer outra coisa.  Um exemplo um pouco mais fora do padr√£o, no qual corrigimos apenas parte dos argumentos: <br><br><pre> <code class="plaintext hljs">run 1 (Œª qr -&gt; appendo (Cons (1, Cons (q, Nil))) r (Cons (1, Cons (2, Cons (3, Cons (4, Nil))))))</code> </pre> <br>  ‚áí <br><pre> <code class="plaintext hljs">q = 2, r = Cons (3, Cons (4, Nil))</code> </pre> <br><br><h3>  Como isso funciona </h3><br>  Do ponto de vista da teoria, n√£o h√° nada impressionante aqui: voc√™ sempre pode come√ßar a procurar todas as op√ß√µes poss√≠veis para todos os argumentos, verificando para cada conjunto se eles se comportam em rela√ß√£o a uma determinada fun√ß√£o / relacionamento como gostar√≠amos (consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"O Museu Brit√¢nico do Algoritmo"</a> ) .  De interesse √© o fato de que aqui a busca (em outras palavras, a busca por uma solu√ß√£o) utiliza apenas a estrutura do relacionamento descrito, devido ao qual pode ser relativamente eficaz na pr√°tica. <br><br>  A pesquisa est√° relacionada √† acumula√ß√£o de informa√ß√µes sobre v√°rias vari√°veis ‚Äã‚Äãno estado atual.  N√£o sabemos nada sobre cada vari√°vel ou sabemos como ela √© expressa em termos, valores e outras vari√°veis.  Por exemplo: <br><br> <code>b = Cons (x, y) <br> c = Cons (10, z) <br> x = ? <br> y = ? <br> z = ? <br></code> <br>  Ao passar pela unifica√ß√£o, analisamos dois termos com essas informa√ß√µes em mente e atualizamos o estado ou encerramos a pesquisa se dois termos n√£o puderem ser unificados.  Por exemplo, ao concluir a unifica√ß√£o b = c, obtemos novas informa√ß√µes: x = 10, y = z.  Mas a unifica√ß√£o b = Nil causar√° uma contradi√ß√£o. <br><br>  Procuramos em conjunto sequencialmente (para que a informa√ß√£o se acumule) e, em uma disjun√ß√£o, dividimos a busca em dois ramos paralelos e seguimos em frente, alternando passos neles - essa √© a chamada busca intercalada.  Gra√ßas a essa altern√¢ncia, a pesquisa est√° conclu√≠da - todas as solu√ß√µes adequadas ser√£o encontradas ap√≥s um tempo finito.  Por exemplo, na linguagem Prolog, isso n√£o √© verdade.  Ele faz algo como um rastreamento profundo (que pode ficar pendurado em um galho infinito), e a intercala√ß√£o de pesquisas √© essencialmente uma modifica√ß√£o complicada de rastreamento amplo. <br><br>  Vamos agora ver como a primeira consulta da se√ß√£o anterior funciona.  Como o appendo possui chamadas recursivas, adicionaremos √≠ndices √†s vari√°veis ‚Äã‚Äãpara distingui-las.  A figura abaixo mostra a √°rvore de enumera√ß√£o.  As setas indicam a dire√ß√£o da dissemina√ß√£o da informa√ß√£o (com exce√ß√£o do retorno da recurs√£o).  Entre disjun√ß√µes, as informa√ß√µes n√£o s√£o distribu√≠das e entre conjun√ß√µes, da esquerda para a direita. <br><br><img src="https://habrastorage.org/webt/3j/np/fg/3jnpfgkkgbyyf5-or5g_noicxg4.png"><br><br><ol><li>  Come√ßamos com uma chamada externa para appendo.  Ramo esquerdo da disjun√ß√£o morre devido a controv√©rsia: lista <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> a </script>  n√£o est√° vazio. <br></li><li>  No ramo direito, s√£o introduzidas vari√°veis ‚Äã‚Äãauxiliares, que s√£o usadas para "analisar" a lista <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>a</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.284ex" height="1.696ex" viewBox="0 -520.7 983.4 730.2" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-31" x="748" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>a</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-15"> a_1 </script>  na cabe√ßa e cauda. <br></li><li>  Depois disso, a chamada recorrente recursiva ocorre para a = [2], b = [3, 4], ab = ?, Na qual opera√ß√µes semelhantes ocorrem. <br></li><li>  Mas na terceira chamada para ap√™ndice j√° temos a = [], b = [3,4], ab =?, E ent√£o a disjun√ß√£o esquerda simplesmente funciona, ap√≥s o que obtemos as informa√ß√µes ab = b.  Mas no ramo certo h√° uma contradi√ß√£o. <br></li><li>  Agora podemos escrever todas as informa√ß√µes dispon√≠veis e restaurar a resposta substituindo os valores das vari√°veis: <br><br> <code>a_1 = [1, 2] <br> b_1 = [3, 4] <br> ab_1 = Cons h_1 tb_1 <br> h_1 = 1 <br> a_2 = t_1 = [2] <br> b_2 = b_1 = [3, 4] <br> ab_2 = tb_1 = Cons h_2 tb_2 <br> h_2 = 2 <br> a_3 = t_2 = Nil <br> b_3 = b_2 = b_1 = [3, 4] <br> ab_3 = tb_2 = b_3 = [3, 4] <br></code> <br></li><li>  Segue-se que <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><msub><mi>b</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.282ex" height="2.298ex" viewBox="0 -780.1 1412.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-31" x="607" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><msub><mi>b</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-16"> ab_1 </script>  = Contras (1, Contras (2, [3, 4])) = [1, 2, 3, 4], conforme necess√°rio. <br></li></ol><br><br><h2>  O que eu fiz na gradua√ß√£o </h2><br><h3>  Tudo fica mais lento </h3><br>  Como sempre: eles prometem que tudo ser√° super declarativo, mas, na realidade, voc√™ precisa se adaptar √† linguagem e escrever tudo de uma maneira especial (tendo em mente como tudo ser√° executado) para que pelo menos algo funcione, exceto os exemplos mais simples.  Isso √© decepcionante. <br><br>  Um dos primeiros problemas que um programador iniciante em miniKanren enfrenta √© que depende muito da ordem em que voc√™ descreve as condi√ß√µes (conjuntos) no programa.  Com um pedido, est√° tudo bem, mas duas conjun√ß√µes foram trocadas e tudo come√ßou a funcionar muito devagar ou nem terminou.  Isso √© inesperado. <br><br>  Mesmo no exemplo com appendo, iniciar na dire√ß√£o oposta (gerando dividir a lista em duas) n√£o termina, a menos que voc√™ especifique explicitamente quantas respostas deseja (a pesquisa ser√° encerrada depois que o n√∫mero necess√°rio for encontrado). <br><br>  Suponha que consertemos as vari√°veis ‚Äã‚Äãoriginais da seguinte maneira: a = ?, B = ?, Ab = [1, 2, 3] (veja a figura abaixo) No segundo ramo, essas informa√ß√µes n√£o ser√£o usadas de forma alguma durante a chamada recursiva (a vari√°vel ab e restri√ß√µes de <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>h</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.393ex" height="2.298ex" viewBox="0 -780.1 1030.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-31" x="815" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>h</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-17"> h_1 </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><msub><mi>b</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.891ex" height="2.298ex" viewBox="0 -780.1 1244.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-31" x="607" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><msub><mi>b</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-18"> tb_1 </script>  aparecer somente ap√≥s esta chamada).  Portanto, na primeira chamada recursiva, todos os seus argumentos ser√£o vari√°veis ‚Äã‚Äãlivres.  Essa chamada gerar√° todos os tipos de triplos a partir de duas listas e de suas concatena√ß√µes (e essa gera√ß√£o nunca terminar√°) e, dentre elas, ser√£o escolhidas aquelas para as quais o terceiro elemento resultou exatamente da maneira que precisamos. <br><br><img src="https://habrastorage.org/webt/pg/gn/jg/pggnjghrld84iyiybo9au0nyilk.png"><br><br>  Tudo n√£o √© t√£o ruim quanto parece √† primeira vista, porque vamos resolver esses triplos em grandes grupos.  Listas com o mesmo comprimento, mas elementos diferentes n√£o diferem do ponto de vista da fun√ß√£o, portanto elas se enquadram em uma solu√ß√£o - haver√° vari√°veis ‚Äã‚Äãlivres no lugar dos elementos.  No entanto, ainda estaremos classificando todos os comprimentos de lista poss√≠veis, embora precisemos apenas de um e sabemos qual.  Este √© um uso muito irracional (n√£o-uso) de informa√ß√µes na pesquisa. <br><br>  Este exemplo espec√≠fico √© f√°cil de corrigir: voc√™ s√≥ precisa mover a chamada recursiva para o final e tudo funcionar√° como deveria.  Antes da chamada recursiva, a unifica√ß√£o com a vari√°vel ab ocorrer√° e a chamada recursiva ser√° feita a partir da cauda da lista fornecida (como uma fun√ß√£o recursiva normal).  Essa defini√ß√£o com uma chamada recursiva no final funcionar√° bem em todas as dire√ß√µes: para a chamada recursiva, conseguimos acumular todas as informa√ß√µes poss√≠veis sobre os argumentos. <br><br>  No entanto, em qualquer exemplo um pouco mais complexo, quando existem v√°rias chamadas significativas, n√£o existe uma ordem espec√≠fica para a qual tudo ficar√° bem.  O exemplo mais simples: expandindo uma lista usando concatena√ß√£o.  Consertamos o primeiro argumento - precisamos dessa ordem espec√≠fica, consertamos o segundo - precisamos trocar as chamadas.  Caso contr√°rio, √© pesquisado por um longo tempo e a pesquisa n√£o termina. <br><br><pre> <code class="plaintext hljs">reverso x xr = (x === Nil &amp;&amp;&amp; xr == Nil) ||| (fresh (ht tr) (x === Cons (h, t)) (reverso t tr) (appendo tr (Cons (h, Nil)) xr))</code> </pre><br>  Isso ocorre porque intercalar os processos de pesquisa em conjunto sequencialmente, e ningu√©m poderia pensar em como faz√™-lo de maneira diferente sem perder a efici√™ncia aceit√°vel, apesar de tentarem.  √â claro que um dia todas as solu√ß√µes ser√£o encontradas, mas com a ordem errada, elas ser√£o pesquisadas por um tempo t√£o irrealista que n√£o h√° sentido pr√°tico nisso. <br><br>  Existem t√©cnicas para escrever programas para evitar esse problema.  Mas muitos deles exigem habilidade e imagina√ß√£o especiais para serem usados, e o resultado s√£o programas muito grandes.  Um exemplo √© o termo t√©cnica de delimita√ß√£o de tamanho e a defini√ß√£o de divis√£o bin√°ria com o restante atrav√©s da multiplica√ß√£o com sua ajuda.  Em vez de escrever estupidamente uma defini√ß√£o matem√°tica <br><br><pre> <code class="plaintext hljs">divo nmqr = (fresh (mq) (multo mq mq) (pluso mq rn) (lto rm))</code> </pre><br>  Eu tenho que escrever uma defini√ß√£o recursiva de 20 linhas + uma grande fun√ß√£o auxiliar que n√£o √© realista de ler (eu ainda n√£o entendo o que est√° sendo feito l√°).  Pode ser encontrada na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">disserta√ß√£o de</a> Will Bird na se√ß√£o Aritm√©tica Bin√°ria Pura. <br><br>  Em vista do exposto, gostaria de apresentar algum tipo de modifica√ß√£o de pesquisa para que programas simples e escritos naturalmente tamb√©m funcionem. <br><br><h3>  Otimizar </h3><br>  Percebemos que quando tudo est√° ruim, a pesquisa n√£o termina, a menos que voc√™ indique explicitamente o n√∫mero de respostas e o quebre.  Portanto, eles decidiram lutar precisamente com a incompletude da pesquisa - √© muito mais f√°cil concretizar do que "funciona por muito tempo".  Em geral, √© claro, eu s√≥ quero acelerar a pesquisa, mas √© muito mais dif√≠cil formalizar, ent√£o come√ßamos com uma tarefa menos ambiciosa. <br><br>  Na maioria dos casos, quando a pesquisa diverge, ocorre uma situa√ß√£o f√°cil de rastrear.  Se uma fun√ß√£o √© chamada recursivamente e em uma chamada recursiva, os argumentos s√£o os mesmos ou menos espec√≠ficos; na chamada recursiva, outra subtarefa √© gerada novamente e ocorre uma recurs√£o infinita.  Formalmente, soa assim: h√° uma substitui√ß√£o, aplicando qual aos novos argumentos, obtemos os antigos.  Por exemplo, na figura abaixo, uma chamada recursiva √© uma generaliza√ß√£o do original: voc√™ pode substituir <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>c</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.061ex" height="1.696ex" viewBox="0 -520.7 887.4 730.2" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-32" x="613" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>c</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-19"> c_2 </script>  = [x, 3], <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>d</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.263ex" height="2.298ex" viewBox="0 -780.1 974.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgQJJT5FrwcSXVV_kXf_lr9k0vjfA#MJMAIN-32" x="736" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>d</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-20"> d_2 </script>  = x e receba a liga√ß√£o original. <br><br><img src="https://habrastorage.org/webt/kh/22/mk/kh22mkjyiwzn3as3manr6jftdrm.png"><br><br>  Pode-se tra√ßar que essa situa√ß√£o tamb√©m ocorre nos exemplos de diverg√™ncia que j√° conhecemos.  Como escrevi anteriormente, quando voc√™ executa o appendo na dire√ß√£o oposta, uma chamada recursiva ser√° feita com vari√°veis ‚Äã‚Äãlivres em vez de todas as vari√°veis, o que, √© claro, √© menos espec√≠fico que a chamada original, na qual o terceiro argumento foi corrigido. <br><br>  Se executarmos reverso com x =?  e xr = [1, 2, 3], pode-se ver que a primeira chamada recursiva ocorrer√° novamente com duas vari√°veis ‚Äã‚Äãlivres, de modo que novos argumentos poder√£o ser obviamente transferidos novamente para os anteriores. <br><br><pre> <code class="plaintext hljs">reverso x x_r  (* x = ?, x_r = [1, 2, 3] *) fresh (ht t_r) (x === Cons (h, t)) (* x_r = [1, 2, 3] = Cons 1 (Cons 2 (Cons 3 Nil))) x = Cons (h, t) *) (reverso t t_r) (* :   t=x, t_r=[1,2,3],    *)</code> </pre><br>  Usando esse crit√©rio, podemos detectar diverg√™ncias no processo de execu√ß√£o do programa, entender que tudo est√° ruim com essa ordem e alter√°-la dinamicamente para outra.  Gra√ßas a isso, idealmente, a ordem certa ser√° selecionada para cada chamada. <br>  Voc√™ pode fazer isso de forma ing√™nua: se for encontrada diverg√™ncia no conjunto, martelamos todas as respostas que ele j√° encontrou e adiamos sua execu√ß√£o para mais tarde, ‚Äúpulando para a frente‚Äù no pr√≥ximo conjunto.  Ent√£o, talvez, quando continuarmos a execut√°-lo, mais informa√ß√µes j√° ser√£o conhecidas e diverg√™ncias n√£o surgir√£o.  Em nossos exemplos, isso levar√° aos conjuntos de trocas desejados. <br><br>  Existem maneiras menos ing√™nuas que permitem, por exemplo, n√£o perder o trabalho j√° realizado, adiando o desempenho.  J√° com a variante mais est√∫pida de mudar a ordem, a diverg√™ncia desapareceu em todos os exemplos simples que sofrem com a n√£o comutatividade da conjun√ß√£o que conhecemos, incluindo <br><br><ul><li>  ordenar a lista de n√∫meros (√© tamb√©m a gera√ß√£o de todas as permuta√ß√µes da lista), <br></li><li>  Aritm√©tica peano e aritm√©tica bin√°ria, <br></li><li>  gera√ß√£o de √°rvores bin√°rias de um determinado tamanho. <br></li></ul><br>  Foi uma surpresa inesperada para n√≥s.  Al√©m da diverg√™ncia, a otimiza√ß√£o tamb√©m combate a desacelera√ß√£o do programa.  Os diagramas abaixo mostram o tempo de execu√ß√£o de programas com duas ordens diferentes em conjun√ß√µes (relativamente falando, uma das melhores e uma das muitas ruins).  Foi lan√ßado em um computador com a configura√ß√£o da CPU Intel Core i7 M 620, 2,67 GHz x 4, 8 GB de RAM com o sistema operacional Ubuntu 16.04. <br><br>  Quando a <b>ordem j√° √© √≥tima</b> (n√≥s a selecionamos manualmente), a otimiza√ß√£o diminui um pouco a execu√ß√£o, mas n√£o √© cr√≠tica <br><img src="https://habrastorage.org/webt/3a/si/4z/3asi4zevbggj_7hmjk6j2lilk0u.png"><br><br>  Mas quando o <b>pedido n√£o √© o ideal</b> (por exemplo, adequado apenas para o lan√ßamento na dire√ß√£o oposta), com a otimiza√ß√£o, o resultado √© muito mais r√°pido.  As cruzes significam que mal pod√≠amos esperar pelo fim, funciona muito mais tempo <br><img src="https://habrastorage.org/webt/yw/-_/sn/yw-_snesnrnadqet8zmgbbpk3la.png"><br><br><h3>  Como quebrar nada </h3><br>  Tudo isso foi baseado puramente na intui√ß√£o e quer√≠amos provar isso estritamente.  Teoria, afinal. <br><br>  Para provar algo, precisamos de sem√¢ntica formal da linguagem.  Descrevemos a sem√¢ntica operacional para o miniKanren.  Esta √© uma vers√£o simplificada e matematizada de uma implementa√ß√£o de linguagem real.  Ele usa uma vers√£o muito limitada (portanto f√°cil de usar), na qual voc√™ pode especificar apenas a execu√ß√£o final dos programas (a pesquisa deve ser final).  Mas, para nossos prop√≥sitos, √© exatamente isso que √© necess√°rio. <br><br>  Para provar o crit√©rio, o lema √© formulado primeiro: a execu√ß√£o do programa a partir de um estado mais geral funcionar√° mais.  Formalmente: a √°rvore de sa√≠da na sem√¢ntica tem uma grande altura.  Isso √© provado por indu√ß√£o, mas a afirma√ß√£o deve ser generalizada com muito cuidado, caso contr√°rio, a hip√≥tese indutiva n√£o ser√° suficientemente forte.  Segue-se desse lema que, se um crit√©rio funcionou durante a execu√ß√£o do programa, a √°rvore de sa√≠da possui sua pr√≥pria sub√°rvore de altura maior ou igual.  Isso contradiz, pois para a sem√¢ntica indutivamente dada, todas as √°rvores s√£o finitas.  Isso significa que, em nossa sem√¢ntica, a execu√ß√£o deste programa √© inexprim√≠vel, o que implica que a pesquisa nele n√£o termina. <br><br>  O m√©todo proposto √© conservador: s√≥ mudamos algo quando estamos convencidos de que tudo j√° est√° completamente ruim e imposs√≠vel de piorar; portanto, n√£o quebramos nada em termos de conclus√£o do programa. <br><br>  A prova principal cont√©m muitos detalhes; portanto, t√≠nhamos o desejo de verific√°-la formalmente escrevendo para a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Coq</a> .  No entanto, tecnicamente, era bastante dif√≠cil, ent√£o acalmamos nosso ardor e nos envolvemos seriamente na verifica√ß√£o autom√°tica apenas na magistratura. <br><br><h3>  Postagem </h3><br>  No meio do trabalho, apresentamos este estudo na sess√£o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">p√¥steres</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ICFP-2017 no Student Research Competition</a> .  L√° nos encontramos com os criadores da linguagem - Will Bird e Daniel Friedman - e eles disseram que isso √© significativo e precisamos analis√°-la com mais detalhes.  A prop√≥sito, Will geralmente √© amigo de nosso laborat√≥rio na JetBrains Research.  Toda a nossa pesquisa sobre o miniKanren come√ßou quando, em 2015, Will realizou uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">escola de ver√£o</a> em programa√ß√£o relacional em S√£o Petersburgo. <br><br>  Um ano depois, levamos nosso trabalho a um formul√°rio mais ou menos completo e apresentamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> nos Princ√≠pios e Pr√°ticas da Programa√ß√£o Declarativa 2018. <br><br><h2>  O que eu fa√ßo na p√≥s-gradua√ß√£o </h2><br>  Quer√≠amos continuar engajados na sem√¢ntica formal do miniKanren e na prova rigorosa de todas as suas propriedades.  Na literatura, geralmente propriedades (geralmente longe de √≥bvias) s√£o simplesmente postuladas e demonstradas usando exemplos, mas ningu√©m prova nada.  Por exemplo, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">livro principal</a> sobre programa√ß√£o relacional √© uma lista de perguntas e respostas, cada uma dedicada a um peda√ßo de c√≥digo espec√≠fico.  Mesmo para a declara√ß√£o de integridade da pesquisa intercalada (e essa √© uma das vantagens mais importantes do miniKanren sobre o Prolog padr√£o), √© imposs√≠vel encontrar uma reda√ß√£o rigorosa.  Voc√™ n√£o pode viver assim, decidimos e, tendo recebido uma b√™n√ß√£o de Will, come√ßamos a trabalhar. <br><br>  Deixe-me lembr√°-lo de que a sem√¢ntica que desenvolvemos no est√°gio anterior tinha uma limita√ß√£o significativa: apenas os programas com pesquisa finita foram descritos.  No miniKanren, os programas em execu√ß√£o tamb√©m s√£o interessantes porque podem listar um n√∫mero infinito de respostas.  Portanto, precis√°vamos de uma sem√¢ntica mais interessante. <br><br>  Existem muitas maneiras padr√£o diferentes de definir a sem√¢ntica de uma linguagem de programa√ß√£o, apenas tivemos que escolher uma delas e adapt√°-la a um caso espec√≠fico.  Descrevemos a sem√¢ntica como um sistema de transi√ß√£o rotulado - um conjunto de estados poss√≠veis no processo de pesquisa e transi√ß√µes entre esses estados, alguns dos quais s√£o marcados, o que significa que, nesta etapa da pesquisa, outra resposta foi encontrada.  A execu√ß√£o de um programa em particular √© determinada pela sequ√™ncia de tais transi√ß√µes.  Essas seq√º√™ncias podem ser finitas (chegando ao estado terminal) ou infinitas, descrevendo simultaneamente a finaliza√ß√£o e a n√£o conclus√£o de programas.  Para especificar completamente matematicamente esse objeto, √© necess√°rio usar uma defini√ß√£o coindutiva. <br><br>     <b></b> ‚Äî     .      <b></b> ,            (,          ,  ‚Äî     ..).          ,   miniKanren'      (   ). <br><br>      ,    ,        ‚Äî        .    .  (  ),       ,       . <br>            (    ):        , ,        ,      . <br><br>           , ,  /     . <br><br>             Coq'a.        ,             ,      ¬´. Qed¬ª.      . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt441114/">https://habr.com/ru/post/pt441114/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt441098/index.html">Profundidades do SIEM: correla√ß√µes prontas para uso. Parte 4. Modelo do sistema como um contexto de regras de correla√ß√£o</a></li>
<li><a href="../pt441102/index.html">Kaspersky Mobile Talks - uma reuni√£o para desenvolvedores avan√ßados</a></li>
<li><a href="../pt441104/index.html">Obter informa√ß√µes e ignorar a autentica√ß√£o de dois fatores em cart√µes banc√°rios do TOP-10 (Ucr√¢nia)</a></li>
<li><a href="../pt441108/index.html">J√° n√£o √© um conceito: a Samsung lan√ßou o telefone dobr√°vel Galaxy Fold por US $ 1980</a></li>
<li><a href="../pt441112/index.html">Prendemos a autoriza√ß√£o LDAP ao Kubernetes</a></li>
<li><a href="../pt441116/index.html">KubeSail e seu cluster Kubernetes gratuito para desenvolvedores</a></li>
<li><a href="../pt441118/index.html">Os resultados do experimento com uma semana de trabalho de quatro dias para trabalhadores de escrit√≥rio na Nova Zel√¢ndia</a></li>
<li><a href="../pt441122/index.html">Magento 2 EAV: Vis√£o Geral das Estruturas de Dados</a></li>
<li><a href="../pt441124/index.html">Positivos falsos no PVS-Studio: qu√£o profunda √© a toca do coelho</a></li>
<li><a href="../pt441126/index.html">Falsos positivos no PVS-Studio: qu√£o profunda √© a toca do coelho</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>