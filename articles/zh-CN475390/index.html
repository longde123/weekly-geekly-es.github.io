<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ†— ğŸ’‡ğŸ½ ğŸ‘ˆğŸ» å¦‚ä½•ä½¿ç”¨Goåˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªWebåº”ç”¨ç¨‹åº ğŸ–¨ï¸ ğŸ”¯ ğŸ¥„</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å“ˆHaï¼ æˆ‘å‘æ‚¨å‘ˆç°Ayooluwa Isaiahæ’°å†™çš„æ–‡ç« â€œå¦‚ä½•ä½¿ç”¨Goæ„å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªWebåº”ç”¨ç¨‹åºâ€çš„ç¿»è¯‘ã€‚ 


è¿™æ˜¯æ‚¨ç¬¬ä¸€ä¸ªGo Webåº”ç”¨ç¨‹åºçš„æŒ‡å—ã€‚ æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°é—»åº”ç”¨ç¨‹åº ï¼Œè¯¥æ–°é—»åº”ç”¨ç¨‹åºä½¿ç”¨News APIæ¥æ”¶æœ‰å…³ç‰¹å®šä¸»é¢˜çš„æ–°é—»æ–‡ç« ï¼Œå¹¶æœ€ç»ˆå°†å…¶éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨ã€‚ 


 æ‚¨å¯ä»¥åœ¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•ä½¿ç”¨Goåˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªWebåº”ç”¨ç¨‹åº</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475390/"><p> å“ˆHaï¼ æˆ‘å‘æ‚¨å‘ˆç°Ayooluwa Isaiahæ’°å†™çš„æ–‡ç« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€œå¦‚ä½•ä½¿ç”¨Goæ„å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªWebåº”ç”¨ç¨‹åºâ€</a>çš„ç¿»è¯‘ã€‚ </p><br><p>è¿™æ˜¯æ‚¨ç¬¬ä¸€ä¸ªGo Webåº”ç”¨ç¨‹åºçš„æŒ‡å—ã€‚ æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–°é—»åº”ç”¨ç¨‹åº</a> ï¼Œè¯¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–°é—»åº”ç”¨ç¨‹åº</a>ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">News API</a>æ¥æ”¶æœ‰å…³ç‰¹å®šä¸»é¢˜çš„æ–°é—»æ–‡ç« ï¼Œå¹¶æœ€ç»ˆå°†å…¶éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨ã€‚ </p><a name="habracut"></a><br><p> æ‚¨å¯ä»¥åœ¨æ­¤<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHubå­˜å‚¨åº“ä¸­</a>æ‰¾åˆ°ç”¨äºæœ¬æ•™ç¨‹çš„å®Œæ•´ä»£ç ã€‚ </p><br><h2 id="trebovaniya"> è¦æ±‚æ¡ä»¶ </h2><br><p>æ­¤ä»»åŠ¡çš„å”¯ä¸€è¦æ±‚æ˜¯Goå·²å®‰è£…åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šï¼Œå¹¶ä¸”æ‚¨å¯¹å®ƒçš„è¯­æ³•å’Œæ„é€ æœ‰ç‚¹ç†Ÿæ‚‰ã€‚ åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œæˆ‘ç”¨æ¥åˆ›å»ºåº”ç”¨ç¨‹åºçš„Goç‰ˆæœ¬ä¹Ÿæ˜¯æœ€æ–°çš„ï¼š <strong>1.12.9</strong> ã€‚ è¦æŸ¥çœ‹Goçš„å®‰è£…ç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨<code>go version</code>å‘½ä»¤ã€‚ </p><br><p> å¦‚æœæ‚¨è§‰å¾—è¿™é¡¹å·¥ä½œå¯¹æ‚¨æ¥è¯´å¤ªéš¾äº†ï¼Œè¯·è½¬åˆ°æˆ‘ä¸Šä¸€é—¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…¥é—¨</a>è¯­è¨€<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¯¾</a> ï¼Œè¿™åº”è¯¥å¯ä»¥å¸®åŠ©æ‚¨å…¥é—¨ã€‚ </p><br><h2 id="itak-nachnem"> å› æ­¤ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼ </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘ä»¬åœ¨GitHubä¸Šå…‹éš†å¯åŠ¨æ–‡ä»¶å­˜å‚¨åº“ï¼Œ</a>å¹¶<code>cd</code>åˆ°åˆ›å»ºçš„ç›®å½•ä¸­ã€‚ æˆ‘ä»¬æœ‰ä¸‰ä¸ªä¸»è¦æ–‡ä»¶ï¼šåœ¨<code>main.go</code>æ–‡ä»¶ä¸­<code>main.go</code>æˆ‘ä»¬å°†ä¸ºæ­¤ä»»åŠ¡ç¼–å†™æ‰€æœ‰Goä»£ç ã€‚  <code>index.html</code>æ–‡ä»¶æ˜¯å°†å‘é€åˆ°æµè§ˆå™¨çš„æ¨¡æ¿ï¼Œè¯¥åº”ç”¨ç¨‹åºçš„<code></code>åœ¨<code>assets/styles.css</code> ã€‚ </p><br><h2 id="sozdadim-bazovyy-veb-server"> åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„WebæœåŠ¡å™¨ </h2><br><p> è®©æˆ‘ä»¬å¼€å§‹åˆ›å»ºä¸€ä¸ªæ ¸å¿ƒæœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨åœ¨å¯¹æœåŠ¡å™¨æ ¹ç›®å½•æ‰§è¡ŒGETè¯·æ±‚æ—¶å°†æ–‡æœ¬â€œ Hello Worldï¼â€å‘é€åˆ°æµè§ˆå™¨ã€‚ æ›´æ”¹æ‚¨çš„<code>main.go</code>æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { w.Write([]<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>(<span class="hljs-string"><span class="hljs-string">"&lt;h1&gt;Hello World!&lt;/h1&gt;"</span></span>)) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { port := os.Getenv(<span class="hljs-string"><span class="hljs-string">"PORT"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> port == <span class="hljs-string"><span class="hljs-string">""</span></span> { port = <span class="hljs-string"><span class="hljs-string">"3000"</span></span> } mux := http.NewServeMux() mux.HandleFunc(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, indexHandler) http.ListenAndServe(<span class="hljs-string"><span class="hljs-string">":"</span></span>+port, mux) }</code> </pre> <br><p>  <code>package main</code>çš„ç¬¬ä¸€è¡Œ-å£°æ˜<code>main.go</code>æ–‡ä»¶ä¸­çš„ä»£ç <code>main.go</code> mainè½¯ä»¶åŒ…ã€‚ ä¹‹åï¼Œæˆ‘ä»¬å¯¼å…¥äº†<code>net/http</code>åŒ…ï¼Œè¯¥åŒ…æä¾›äº†ä¾›æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä½¿ç”¨çš„HTTPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å®ç°ã€‚ è¯¥è½¯ä»¶åŒ…æ˜¯æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”éšæ¯ä¸ªGoå®‰è£…ä¸€èµ·æä¾›ã€‚ </p><br><p> åœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œ <code>http.NewServeMux()</code>åˆ›å»ºä¸€ä¸ªæ–°çš„HTTPè¯·æ±‚å¤šè·¯å¤ç”¨å™¨ï¼Œå¹¶å°†å…¶åˆ†é…ç»™<code>mux</code>å˜é‡ã€‚ æœ¬è´¨ä¸Šï¼Œè¯·æ±‚å¤šè·¯å¤ç”¨å™¨å°†ä¼ å…¥è¯·æ±‚çš„URLä¸æ³¨å†Œè·¯å¾„åˆ—è¡¨è¿›è¡ŒåŒ¹é…ï¼Œå¹¶åœ¨æ‰¾åˆ°åŒ¹é…é¡¹æ—¶ä¸ºè¯¥è·¯å¾„è°ƒç”¨é€‚å½“çš„å¤„ç†ç¨‹åºã€‚ </p><br><p> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸ºæ ¹è·¯å¾„<code>/</code>æ³¨å†Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚ æ­¤å¤„ç†å‡½æ•°æ˜¯<code>HandleFunc</code>çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¹¶ä¸”å§‹ç»ˆå…·æœ‰ç­¾å<code>func (w http.ResponseWriter, r * http.Request)</code> ã€‚ </p><br><p> å¦‚æœæŸ¥çœ‹<code>indexHandler</code>å‡½æ•°ï¼Œæ‚¨å°†çœ‹åˆ°å®ƒå…·æœ‰è¿™æ ·çš„ç­¾åï¼Œè¿™ä½¿å…¶æˆä¸º<code>HandleFunc</code>çš„æœ‰æ•ˆç¬¬äºŒä¸ªå‚æ•°ã€‚  <code>w</code>å‚æ•°æ˜¯æˆ‘ä»¬ç”¨æ¥å‘é€å¯¹HTTPè¯·æ±‚çš„å“åº”çš„ç»“æ„ã€‚ å®ƒå®ç°<code>Write()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é‡‡ç”¨ä¸€ä¸ªå­—èŠ‚ç‰‡å¹¶å°†ç»„åˆçš„æ•°æ®ä½œä¸ºHTTPå“åº”çš„ä¸€éƒ¨åˆ†å†™å…¥ã€‚ </p><br><p> å¦ä¸€æ–¹é¢ï¼Œå‚æ•°<code>r</code>è¡¨ç¤ºä»å®¢æˆ·ç«¯æ”¶åˆ°çš„HTTPè¯·æ±‚ã€‚ è¿™å°±æ˜¯æˆ‘ä»¬è®¿é—®æœåŠ¡å™¨ä¸ŠWebæµè§ˆå™¨å‘é€çš„æ•°æ®çš„æ–¹å¼ã€‚ æˆ‘ä»¬ç°åœ¨è¿˜æ²¡æœ‰ä½¿ç”¨å®ƒï¼Œä½†æ˜¯ä»¥åä¸€å®šä¼šä½¿ç”¨ã€‚ </p><br><p> æœ€åï¼Œæˆ‘ä»¬æœ‰<code>http.ListenAndServe()</code>æ–¹æ³•ï¼Œå¦‚æœç¯å¢ƒæœªè®¾ç½®ç«¯å£ï¼Œåˆ™å®ƒå°†åœ¨ç«¯å£3000ä¸Šå¯åŠ¨æœåŠ¡å™¨ã€‚ å¦‚æœæ‚¨çš„è®¡ç®—æœºä¸Šä½¿ç”¨äº†3000ï¼Œè¯·éšæ„ä½¿ç”¨å…¶ä»–ç«¯å£ã€‚ </p><br><p> ç„¶åç¼–è¯‘å¹¶æ‰§è¡Œæ‚¨åˆšåˆšç¼–å†™çš„ä»£ç ï¼š </p><br><pre> <code class="bash hljs">go run main.go</code> </pre> <br><p> å¦‚æœåœ¨æµè§ˆå™¨ä¸­è½¬åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">httpï¼š//æœ¬åœ°ä¸»æœºï¼š3000</a> ï¼Œåˆ™åº”çœ‹åˆ°æ–‡æœ¬â€œ Hello Worldï¼â€ã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/989/645/927/9896459277d1e7aa363ee0f9c444bc92.png" alt="å‹‡æ•¢çš„æµè§ˆå™¨æ˜¾ç¤ºHello Worldæ–‡æœ¬"></a> </p><br><h2 id="shablony-v-go"> è½¬åˆ°æ¨¡æ¿ </h2><br><p> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹Goè¯­è¨€ä¸­æ¨¡æ¿åˆ¶ä½œçš„åŸºæœ¬çŸ¥è¯†ã€‚ å¦‚æœæ‚¨ç†Ÿæ‚‰å…¶ä»–è¯­è¨€çš„æ¨¡æ¿ï¼Œè¿™åº”è¯¥å¾ˆå®¹æ˜“ç†è§£ã€‚ </p><br><p> æ¨¡æ¿æä¾›äº†ä¸€ç§ç®€ä¾¿çš„æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®è·¯ç”±è‡ªå®šä¹‰Webåº”ç”¨ç¨‹åºçš„è¾“å‡ºï¼Œè€Œä¸å¿…åœ¨ä¸åŒçš„åœ°æ–¹ç¼–å†™ç›¸åŒçš„ä»£ç ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå¯¼èˆªæ åˆ›å»ºæ¨¡æ¿ï¼Œå¹¶åœ¨ç½‘ç«™çš„æ‰€æœ‰é¡µé¢ä¸Šä½¿ç”¨å®ƒï¼Œè€Œæ— éœ€é‡å¤ä»£ç ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰æœºä¼šå‘æˆ‘ä»¬çš„ç½‘é¡µæ·»åŠ ä¸€äº›åŸºæœ¬é€»è¾‘ã€‚ </p><br><p>  Goåœ¨å…¶æ ‡å‡†åº“ä¸­æä¾›äº†ä¸¤ä¸ªæ¨¡æ¿åº“ï¼š <code>text/template</code>å’Œ<code>html/template</code> ã€‚ ä¸¤è€…éƒ½æä¾›ç›¸åŒçš„æ¥å£ï¼Œä½†æ˜¯<code>html/template</code>åŒ…ç”¨äºç”Ÿæˆå—ä»£ç æ³¨å…¥ä¿æŠ¤çš„HTMLè¾“å‡ºï¼Œå› æ­¤æˆ‘ä»¬å°†åœ¨è¿™é‡Œä½¿ç”¨å®ƒã€‚ </p><br><p> å°†æ­¤åŒ…å¯¼å…¥åˆ°<code>main.go</code>æ–‡ä»¶ä¸­ï¼Œå¹¶æŒ‰ä»¥ä¸‹æ–¹å¼ä½¿ç”¨å®ƒï¼š </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"html/template"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tpl = template.Must(template.ParseFiles(<span class="hljs-string"><span class="hljs-string">"index.html"</span></span>)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { tpl.Execute(w, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { port := os.Getenv(<span class="hljs-string"><span class="hljs-string">"PORT"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> port == <span class="hljs-string"><span class="hljs-string">""</span></span> { port = <span class="hljs-string"><span class="hljs-string">"3000"</span></span> } mux := http.NewServeMux() mux.HandleFunc(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, indexHandler) http.ListenAndServe(<span class="hljs-string"><span class="hljs-string">":"</span></span>+port, mux) }</code> </pre> <br><p>  <code>tpl</code>æ˜¯ç¨‹åºåŒ…çº§åˆ«çš„å˜é‡ï¼Œç”¨äºæŒ‡ç¤ºæ‰€æä¾›æ–‡ä»¶ä¸­æ¨¡æ¿çš„å®šä¹‰ã€‚  <code>template.ParseFiles</code>è°ƒç”¨å°†åˆ†æé¡¹ç›®ç›®å½•æ ¹ç›®å½•ä¸­çš„<code>index.html</code>æ–‡ä»¶å¹¶æ£€æŸ¥å…¶æœ‰æ•ˆæ€§ã€‚ </p><br><p> æˆ‘ä»¬å°†<code>template.ParseFiles</code>è°ƒç”¨åŒ…è£…åœ¨<code>template.ParseFiles</code>ä¸­ï¼Œä»¥ä¾¿ä»£ç åœ¨å‘ç”Ÿé”™è¯¯æ—¶å¼•èµ·ææ…Œã€‚ æˆ‘ä»¬åœ¨è¿™é‡Œææ…Œè€Œä¸æ˜¯å°è¯•å¤„ç†è¯¥é”™è¯¯çš„åŸå› æ˜¯ï¼Œå¦‚æœæ¨¡æ¿æ— æ•ˆï¼Œç»§ç»­æ‰§è¡Œä»£ç æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ è¿™æ˜¯åœ¨å°è¯•é‡æ–°å¯åŠ¨æœåŠ¡å™¨ä¹‹å‰éœ€è¦è§£å†³çš„é—®é¢˜ã€‚ </p><br><p> åœ¨<code>indexHandler</code>å‡½æ•°ä¸­<code>indexHandler</code>æˆ‘ä»¬é€šè¿‡æä¾›ä¸¤ä¸ªå‚æ•°æ¥æ‰§è¡Œå…ˆå‰åˆ›å»ºçš„æ¨¡æ¿ï¼šæˆ‘ä»¬è¦åœ¨å…¶ä¸­å†™å…¥è¾“å‡ºçš„å†…å®¹å’Œæˆ‘ä»¬è¦ä¼ é€’ç»™æ¨¡æ¿çš„æ•°æ®ã€‚ </p><br><p> åœ¨ä¸Šè¿°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†è¾“å‡ºå†™å…¥<code>ResponseWriter</code>æ¥å£ï¼Œç”±äºç›®å‰æ²¡æœ‰æ•°æ®å¯ä¼ é€’åˆ°æ¨¡æ¿ï¼Œå› æ­¤å°†<code>nil</code>ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ã€‚ </p><br><p> ä½¿ç”¨Ctrl-Cåœæ­¢ç»ˆç«¯ä¸­æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œç„¶åä½¿ç”¨<code>go run main.go</code>å†æ¬¡å¯åŠ¨å®ƒï¼Œç„¶ååˆ·æ–°æµè§ˆå™¨ã€‚ æ‚¨åº”è¯¥åœ¨é¡µé¢ä¸Šçœ‹åˆ°æ–‡æœ¬â€œ News App Demoâ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/8f8/3d2/10b/8f83d210b810eeacb35c3684adcaa827.png" alt="å‹‡æ•¢çš„çš„æµè§ˆå™¨æ˜¾ç¤ºæ–°é—»åº”ç”¨ç¨‹åºç¨‹åºæ¼”ç¤ºæ–‡æœ¬"></a> </p><br><h2 id="dobavlyaem-panel-navigacii-na-stranicu"> åœ¨é¡µé¢ä¸Šæ·»åŠ å¯¼èˆªæ  </h2><br><p> æ›¿æ¢index.htmlæ–‡ä»¶ä¸­<code>&lt;body&gt;</code>çš„å†…å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span><span class="hljs-tag">&gt;</span></span>News Demo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Enter a news topic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"q"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/freshman-tech/news"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button github-button"</span></span></span><span class="hljs-tag">&gt;</span></span>View on Github<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p> ç„¶åé‡æ–°å¯åŠ¨æœåŠ¡å™¨å¹¶åˆ·æ–°æµè§ˆå™¨ã€‚ æ‚¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼š </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/abf/65e/ea8/abf65eea8166c5839ec6e01e19d31eb4.png" alt="æµè§ˆå™¨æ˜¾ç¤ºæ— æ ·å¼çš„å¯¼èˆªæ "></a> </p><br><h2 id="rabota-so-staticheskimi-faylami"> å¤„ç†é™æ€æ–‡ä»¶ </h2><br><p> è¯·æ³¨æ„ï¼Œå°½ç®¡æˆ‘ä»¬å·²ç»åœ¨æ–‡æ¡£çš„<code>&lt;head&gt;</code>æŒ‡å®šäº†æ ·å¼ï¼Œä½†ä¸Šé¢æ·»åŠ çš„å¯¼èˆªæ æ²¡æœ‰æ ·å¼ã€‚ </p><br><p> è¿™æ˜¯å› ä¸ºè·¯å¾„<code>/</code>å®é™…ä¸ŠåŒ¹é…åœ¨å…¶ä»–åœ°æ–¹æœªå¤„ç†çš„æ‰€æœ‰è·¯å¾„ã€‚ å› æ­¤ï¼Œå¦‚æœè½¬åˆ°<a href="">httpï¼š//æœ¬åœ°ä¸»æœºï¼š3000 / asset / style.css</a> ï¼Œåˆ™ä»ä¼šè·å¾—News Demoä¸»é¡µè€Œä¸æ˜¯CSSæ–‡ä»¶ï¼Œå› ä¸ºå°šæœªæ˜ç¡®å£°æ˜<code>/assets/style.css</code>è·¯ç”±ã€‚ </p><br><p> ä½†æ˜¯éœ€è¦å£°æ˜æ‰€æœ‰é™æ€æ–‡ä»¶çš„æ˜¾å¼å¤„ç†ç¨‹åºæ˜¯ä¸ç°å®çš„ï¼Œå¹¶ä¸”æ— æ³•æ‰©å±•ã€‚ å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¤„ç†ç¨‹åºæ¥æœåŠ¡æ‰€æœ‰é™æ€èµ„æºã€‚ </p><br><p> è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯åˆ›å»ºæ–‡ä»¶æœåŠ¡å™¨å¯¹è±¡çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥æˆ‘ä»¬æ‰€æœ‰é™æ€æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼š </p><br><pre> <code class="go hljs">fs := http.FileServer(http.Dir(<span class="hljs-string"><span class="hljs-string">"assets"</span></span>))</code> </pre> <br><p> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰è·¯ç”±å™¨å°†è¿™ä¸ªæ–‡ä»¶æœåŠ¡å™¨å¯¹è±¡ç”¨äºæ‰€æœ‰ä»¥<code>/assets/</code>å‰ç¼€å¼€å¤´çš„è·¯å¾„ï¼š </p><br><pre> <code class="go hljs">mux.Handle(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, http.StripPrefix(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, fs))</code> </pre> <br><p> ç°åœ¨ä¸€èµ·ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// main.go //   func main() { port := os.Getenv("PORT") if port == "" { port = "3000" } mux := http.NewServeMux() //     fs := http.FileServer(http.Dir("assets")) mux.Handle("/assets/", http.StripPrefix("/assets/", fs)) mux.HandleFunc("/", indexHandler) http.ListenAndServe(":"+port, mux) }</span></span></code> </pre> <br><p> é‡æ–°å¯åŠ¨æœåŠ¡å™¨å¹¶åˆ·æ–°æµè§ˆå™¨ã€‚ æ ·å¼åº”å¦‚ä¸‹æ‰€ç¤ºæ‰“å¼€ï¼š </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/933/902/77d/93390277dcb620c2f3a3e0421a4f5e6d.png" alt="å‹‡æ•¢çš„æµè§ˆå™¨æ˜¾ç¤ºæ ·å¼åŒ–çš„å¯¼èˆªæ "></a> </p><br><h2 id="sozdaem-rout-search"> æˆ‘ä»¬åˆ›å»ºä¸€æ¡è·¯çº¿/æœç´¢ </h2><br><p> è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¤„ç†æ–°é—»æ–‡ç« æœç´¢æŸ¥è¯¢çš„è·¯ç”±ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">News API</a>æ¥å¤„ç†è¯·æ±‚ï¼Œå› æ­¤æ‚¨éœ€è¦åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>æ³¨å†Œä»¥è·å–å…è´¹çš„APIå¯†é’¥ã€‚ </p><br><p> æ­¤è·¯ç”±éœ€è¦ä¸¤ä¸ªæŸ¥è¯¢å‚æ•°ï¼š <code>q</code>è¡¨ç¤ºç”¨æˆ·çš„æŸ¥è¯¢ï¼Œ <code>page</code>ç”¨äºæ»šåŠ¨ç»“æœã€‚ æ­¤<code>page</code>å‚æ•°æ˜¯å¯é€‰çš„ã€‚ å¦‚æœURLä¸­æœªåŒ…å«è¯¥å­—ç¬¦ï¼Œæˆ‘ä»¬ä»…å‡è®¾ç»“æœçš„é¡µç è®¾ç½®ä¸ºâ€œ 1â€ã€‚ </p><br><p> åœ¨<code>indexHandler</code>ä¸‹å°†ä»¥ä¸‹å¤„ç†ç¨‹åºæ·»åŠ åˆ°<code>main.go</code>æ–‡ä»¶ä¸­ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { u, err := url.Parse(r.URL.String()) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { w.WriteHeader(http.StatusInternalServerError) w.Write([]<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>(<span class="hljs-string"><span class="hljs-string">"Internal server error"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } params := u.Query() searchKey := params.Get(<span class="hljs-string"><span class="hljs-string">"q"</span></span>) page := params.Get(<span class="hljs-string"><span class="hljs-string">"page"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> page == <span class="hljs-string"><span class="hljs-string">""</span></span> { page = <span class="hljs-string"><span class="hljs-string">"1"</span></span> } fmt.Println(<span class="hljs-string"><span class="hljs-string">"Search Query is: "</span></span>, searchKey) fmt.Println(<span class="hljs-string"><span class="hljs-string">"Results page is: "</span></span>, page) }</code> </pre> <br><p> ä¸Šé¢çš„ä»£ç ä»è¯·æ±‚URLä¸­æå–<code>q</code>å’Œ<code>page</code>å‚æ•°ï¼Œå¹¶å°†å®ƒä»¬éƒ½æ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸­ã€‚ </p><br><p> ç„¶åå°†<code>searchHandler</code>å‡½æ•°æ³¨å†Œä¸º<code>/search</code>è·¯å¾„å¤„ç†ç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { port := os.Getenv(<span class="hljs-string"><span class="hljs-string">"PORT"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> port == <span class="hljs-string"><span class="hljs-string">""</span></span> { port = <span class="hljs-string"><span class="hljs-string">"3000"</span></span> } mux := http.NewServeMux() fs := http.FileServer(http.Dir(<span class="hljs-string"><span class="hljs-string">"assets"</span></span>)) mux.Handle(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, http.StripPrefix(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, fs)) <span class="hljs-comment"><span class="hljs-comment">// Add the next line mux.HandleFunc("/search", searchHandler) mux.HandleFunc("/", indexHandler) http.ListenAndServe(":"+port, mux) }</span></span></code> </pre> <br><p> è¯·è®°ä½ä»ä¸Šé¢å¯¼å…¥<code>fmt</code>å’Œ<code>net/url</code>åŒ…ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"html/template"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"net/url"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> )</code> </pre> <br><p> ç°åœ¨é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œåœ¨æœç´¢å­—æ®µä¸­è¾“å…¥æŸ¥è¯¢å¹¶æ£€æŸ¥ç»ˆç«¯ã€‚ æ‚¨åº”è¯¥åœ¨ç»ˆç«¯ä¸Šçœ‹åˆ°æ‚¨çš„è¯·æ±‚ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><br><br><h2 id="sozdayom-model-dannyh"> åˆ›å»ºæ•°æ®æ¨¡å‹ </h2><br><p> å½“æˆ‘ä»¬å‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>News API/everything</code></a>ç«¯ç‚¹å‘å‡ºè¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬æœŸæœ›ä»¥ä¸‹æ ¼å¼çš„jsonå“åº”ï¼š </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ok"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"totalResults"</span></span>: <span class="hljs-number"><span class="hljs-number">4661</span></span>, <span class="hljs-attr"><span class="hljs-attr">"articles"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"source"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Gizmodo.com"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Jennings Brown"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"World's Dumbest Bitcoin Scammer Tries to Scam Bitcoin Educator, Gets Scammed in The Process"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Ben Perrin is a Canadian cryptocurrency enthusiast and educator who hosts a bitcoin show on YouTube. This is immediately apparent after a quick a look at all his social media. Ten seconds of viewing on of his videos will show that he is knowledgeable about diâ€¦"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://gizmodo.com/worlds-dumbest-bitcoin-scammer-tries-to-scam-bitcoin-ed-1837032058"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"urlToImage"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://i.kinja-img.com/gawker-media/image/upload/s--uLIW_Oxp--/c_fill,fl_progressive,g_center,h_900,q_80,w_1600/s4us4gembzxlsjrkmnbi.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"publishedAt"</span></span>: <span class="hljs-string"><span class="hljs-string">"2019-08-07T16:30:00Z"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"content"</span></span>: <span class="hljs-string"><span class="hljs-string">"Ben Perrin is a Canadian cryptocurrency enthusiast and educator who hosts a bitcoin show on YouTube. This is immediately apparent after a quick a look at all his social media. Ten seconds of viewing on of his videos will show that he is knowledgeable about..."</span></span> } ] }</code> </pre> <br><p> è¦åœ¨Goä¸­ä½¿ç”¨æ­¤æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆä¸€ä¸ªç»“æ„ï¼Œè¯¥ç»“æ„åœ¨è§£ç å“åº”ä¸»ä½“æ—¶ä¼šåæ˜ æ•°æ®ã€‚ å½“ç„¶ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œæ­¤æ“ä½œï¼Œä½†æ˜¯æˆ‘æ›´å–œæ¬¢ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JSON-to-Go</a>ç½‘ç«™ï¼Œè¿™ä½¿æ­¤è¿‡ç¨‹éå¸¸å®¹æ˜“ã€‚ å®ƒç”Ÿæˆä¸€ä¸ªGoç»“æ„ï¼ˆå¸¦æœ‰æ ‡ç­¾ï¼‰ï¼Œè¯¥ç»“æ„é€‚ç”¨äºæ­¤JSONã€‚ </p><br><p> æ‚¨è¦åšçš„å°±æ˜¯å¤åˆ¶JSONå¯¹è±¡å¹¶å°†å…¶ç²˜è´´åˆ°æ ‡æœ‰<strong>JSON</strong>çš„å­—æ®µä¸­ï¼Œç„¶åå¤åˆ¶è¾“å‡ºå¹¶å°†å…¶ç²˜è´´åˆ°æ‚¨çš„ä»£ç ä¸­ã€‚ è¿™æ˜¯ä¸Šé¢çš„JSONå¯¹è±¡å¾—åˆ°çš„ç»“æœï¼š </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> AutoGenerated <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Status <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"status"`</span></span> TotalResults <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-string"><span class="hljs-string">`json:"totalResults"`</span></span> Articles []<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Source <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { ID <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{} <span class="hljs-string"><span class="hljs-string">`json:"id"`</span></span> Name <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"name"`</span></span> } <span class="hljs-string"><span class="hljs-string">`json:"source"`</span></span> Author <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"author"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> URL <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"url"`</span></span> URLToImage <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"urlToImage"`</span></span> PublishedAt time.Time <span class="hljs-string"><span class="hljs-string">`json:"publishedAt"`</span></span> Content <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"content"`</span></span> } <span class="hljs-string"><span class="hljs-string">`json:"articles"`</span></span> }</code> </pre> <br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/ac8/9d9/44f/ac89d944f90e03d2313a02d38364ba0d.png" alt="å‹‡æ•¢çš„æµè§ˆå™¨æ˜¾ç¤ºJSONè½¬å·¥å…·"></a> </p><br><p> æˆ‘é€šè¿‡å°†<code>Articles</code>ç‰‡æ®µåˆ†ä¸ºå…¶è‡ªå·±çš„ç»“æ„å¹¶æ›´æ–°äº†ç»“æ„åç§°ï¼Œå¯¹<code>AutoGenerated</code>ç»“æ„è¿›è¡Œäº†å‡ å¤„æ›´æ”¹ã€‚ å°†ä»¥ä¸‹<code>tpl</code>å˜é‡å£°æ˜ç²˜è´´åˆ°<code>main.go</code> ï¼Œå¹¶å°†<code>time</code>åŒ…æ·»åŠ åˆ°æ‚¨çš„å¯¼å…¥ä¸­ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Source <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { ID <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{} <span class="hljs-string"><span class="hljs-string">`json:"id"`</span></span> Name <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"name"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Article <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Source Source <span class="hljs-string"><span class="hljs-string">`json:"source"`</span></span> Author <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"author"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> URL <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"url"`</span></span> URLToImage <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"urlToImage"`</span></span> PublishedAt time.Time <span class="hljs-string"><span class="hljs-string">`json:"publishedAt"`</span></span> Content <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"content"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Results <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Status <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"status"`</span></span> TotalResults <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-string"><span class="hljs-string">`json:"totalResults"`</span></span> Articles []Article <span class="hljs-string"><span class="hljs-string">`json:"articles"`</span></span> }</code> </pre> <br><p> æ‚¨å¯èƒ½çŸ¥é“ï¼ŒGoè¦æ±‚ç»“æ„ä¸­æ‰€æœ‰å¯¼å‡ºçš„å­—æ®µéƒ½ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚ ä½†æ˜¯ï¼Œä¹ æƒ¯ä¸Šä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">camelCase</a>æˆ–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">snake_case</a>è¡¨ç¤ºJSONå­—æ®µï¼Œå®ƒä»¬ä¸ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚ </p><br><p> å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨è¯¸å¦‚<code>json:"id"</code>ç±»çš„ç»“æ„å­—æ®µæ ‡è®°åœ¨JSONå­—æ®µä¸­æ˜¾å¼æ˜¾ç¤ºç»“æ„å­—æ®µï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚ å¦‚æœéœ€è¦ï¼Œå®ƒè¿˜å…è®¸æ‚¨ä¸ºç»“æ„å­—æ®µå’Œç›¸åº”çš„jsonå­—æ®µä½¿ç”¨å®Œå…¨ä¸åŒçš„åç§°ã€‚ </p><br><p> æœ€åï¼Œè®©æˆ‘ä»¬ä¸ºæ¯ä¸ªæœç´¢æŸ¥è¯¢åˆ›å»ºä¸åŒç±»å‹çš„ç»“æ„ã€‚ å°†å…¶æ·»åŠ åˆ°<code>main.go</code>çš„â€œ <code>Results</code>ç»“æ„<code>main.go</code> ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Search <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { SearchKey <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> NextPage <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TotalPages <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Results Results }</code> </pre> <br><p> è¯¥ç»“æ„è¡¨ç¤ºç”¨æˆ·è¿›è¡Œçš„æ¯ä¸ªæœç´¢æŸ¥è¯¢ã€‚  <code>SearchKey</code>æ˜¯æŸ¥è¯¢æœ¬èº«ï¼Œ <code>NextPage</code>å­—æ®µä½¿<code>NextPage</code>å¯ä»¥æ»šåŠ¨æµè§ˆç»“æœï¼Œ <code>TotalPages</code>æŸ¥è¯¢ç»“æœçš„æ€»é¡µæ•°ï¼Œä»¥åŠ<code>TotalPages</code>æŸ¥è¯¢ç»“æœçš„å½“å‰é¡µã€‚ </p><br><h2 id="otpravlyaem-zapros-po-news-api-i-renderim-rezultaty"> ä½¿ç”¨News APIå‘é€è¯·æ±‚å¹¶å‘ˆç°ç»“æœ </h2><br><p> ç°åœ¨æˆ‘ä»¬æœ‰äº†åº”ç”¨ç¨‹åºçš„æ•°æ®æ¨¡å‹ï¼Œè®©æˆ‘ä»¬ç»§ç»­å¹¶å‘News APIå‘å‡ºè¯·æ±‚ï¼Œç„¶ååœ¨é¡µé¢ä¸Šå‘ˆç°ç»“æœã€‚ </p><br><p> ç”±äºNews APIéœ€è¦APIå¯†é’¥ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ç§æ— éœ€åœ¨ä»£ç ä¸­è¿›è¡Œç¡¬ç¼–ç å³å¯åœ¨åº”ç”¨ç¨‹åºä¸­ä¼ é€’å®ƒçš„æ–¹æ³•ã€‚ ç¯å¢ƒå˜é‡æ˜¯ä¸€ç§å¸¸è§çš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘å†³å®šæ”¹ç”¨å‘½ä»¤è¡Œæ ‡å¿—ã€‚  Goæä¾›äº†ä¸€ä¸ª<code>flag</code>åŒ…ï¼Œå®ƒæ”¯æŒå‘½ä»¤è¡Œæ ‡å¿—çš„åŸºæœ¬åˆ†æï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å°†åœ¨æ­¤å¤„ä½¿ç”¨çš„<code>flag</code>åŒ…ã€‚ </p><br><p> é¦–å…ˆåœ¨<code>tpl</code>å˜é‡ä¸‹å£°æ˜ä¸€ä¸ªæ–°çš„<code>apiKey</code>å˜é‡ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> apiKey *<span class="hljs-keyword"><span class="hljs-keyword">string</span></span></code> </pre> <br><p> ç„¶ååœ¨<code>main</code>åŠŸèƒ½ä¸­ä½¿ç”¨å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { apiKey = flag.String(<span class="hljs-string"><span class="hljs-string">"apikey"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"Newsapi.org access key"</span></span>) flag.Parse() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> *apiKey == <span class="hljs-string"><span class="hljs-string">""</span></span> { log.Fatal(<span class="hljs-string"><span class="hljs-string">"apiKey must be set"</span></span>) } <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code> </pre> <br><p> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è°ƒç”¨<code>flag.String()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…è®¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²æ ‡å¿—ã€‚ æ­¤æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ ‡å¿—åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯é»˜è®¤å€¼ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ç”¨æ³•è¯´æ˜ã€‚ </p><br><p> å®šä¹‰æ‰€æœ‰æ ‡å¿—åï¼Œæ‚¨éœ€è¦è°ƒç”¨<code>flag.Parse()</code>æ¥å®é™…<code>flag.Parse()</code>å®ƒä»¬ã€‚ æœ€åï¼Œç”±äº<code>apikey</code>æ˜¯æ­¤åº”ç”¨ç¨‹åºçš„å¿…éœ€ç»„ä»¶ï¼Œå› æ­¤ï¼Œå¦‚æœåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´æœªè®¾ç½®æ­¤æ ‡å¿—ï¼Œæˆ‘ä»¬å°†ç¡®ä¿ç¨‹åºå´©æºƒã€‚ </p><br><p> ç¡®ä¿å°†<code>flag</code>åŒ…æ·»åŠ åˆ°å¯¼å…¥ä¸­ï¼Œç„¶åé‡æ–°å¯åŠ¨æœåŠ¡å™¨å¹¶ä¼ é€’æ‰€éœ€çš„<code>apikey</code>æ ‡å¿—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="bash hljs">go run main.go -apikey=&lt;your newsapi access key&gt;</code> </pre> <br><p> æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬ç»§ç»­å¹¶æ›´æ–°<code>searchHandler</code>ä»¥ä¾¿å°†ç”¨æˆ·çš„æœç´¢æŸ¥è¯¢å‘é€åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">newsapi.org</a> ï¼Œå¹¶å°†ç»“æœæ˜¾ç¤ºåœ¨æ¨¡æ¿ä¸­ã€‚ </p><br><p> ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢å¯¹<code>searchHandler</code>å‡½æ•°ç»“å°¾å¤„çš„<code>fmt.Println()</code>æ–¹æ³•çš„ä¸¤æ¬¡è°ƒç”¨ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// beginning of the function search := &amp;Search{} search.SearchKey = searchKey next, err := strconv.Atoi(page) if err != nil { http.Error(w, "Unexpected server error", http.StatusInternalServerError) return } search.NextPage = next pageSize := 20 endpoint := fmt.Sprintf("https://newsapi.org/v2/everything?q=%s&amp;pageSize=%d&amp;page=%d&amp;apiKey=%s&amp;sortBy=publishedAt&amp;language=en", url.QueryEscape(search.SearchKey), pageSize, search.NextPage, *apiKey) resp, err := http.Get(endpoint) if err != nil { w.WriteHeader(http.StatusInternalServerError) return } defer resp.Body.Close() if resp.StatusCode != 200 { w.WriteHeader(http.StatusInternalServerError) return } err = json.NewDecoder(resp.Body).Decode(&amp;search.Results) if err != nil { w.WriteHeader(http.StatusInternalServerError) return } search.TotalPages = int(math.Ceil(float64(search.Results.TotalResults / pageSize))) err = tpl.Execute(w, search) if err != nil { w.WriteHeader(http.StatusInternalServerError) } }</span></span></code> </pre> <br><p> é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>Search</code>ç»“æ„çš„æ–°å®ä¾‹ï¼Œå¹¶å°†<code>SearchKey</code>å­—æ®µçš„å€¼è®¾ç½®ä¸ºHTTPè¯·æ±‚ä¸­URLå‚æ•°<code>q</code>çš„å€¼ã€‚ </p><br><p> ä¹‹åï¼Œæˆ‘ä»¬å°†<code>page</code>å˜é‡è½¬æ¢ä¸ºæ•´æ•°ï¼Œå¹¶å°†ç»“æœåˆ†é…ç»™<code>NextPage</code> <code>search</code>å˜é‡çš„<code>NextPage</code>å­—æ®µã€‚ ç„¶åï¼Œæˆ‘ä»¬åˆ›å»º<code>pageSize</code>å˜é‡å¹¶å°†å…¶å€¼è®¾ç½®ä¸º20ã€‚æ­¤<code>pageSize</code>å˜é‡è¡¨ç¤ºæ–°é—»APIå°†åœ¨å…¶å“åº”ä¸­è¿”å›çš„ç»“æœæ•°ã€‚ è¯¥å€¼çš„èŒƒå›´æ˜¯0åˆ°100ã€‚ </p><br><p> ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>fmt.Sprintf()</code>åˆ›å»ºç«¯ç‚¹ï¼Œå¹¶å¯¹å…¶è¿›è¡ŒGETè¯·æ±‚ã€‚ å¦‚æœNews APIçš„å“åº”ä¸æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://freshman.tech/">200 OK</a> ï¼Œæˆ‘ä»¬å°†å‘å®¢æˆ·ç«¯è¿”å›ä¸€èˆ¬æœåŠ¡å™¨é”™è¯¯ã€‚ å¦åˆ™ï¼Œå°†åœ¨<code>search.Results</code>è§£æå“åº”ä¸»ä½“ã€‚ </p><br><p> ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡å°†<code>TotalResults</code>å­—æ®µé™¤ä»¥<code>pageSize</code>æ¥è®¡ç®—æ€»é¡µæ•°ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæŸ¥è¯¢è¿”å›100ä¸ªç»“æœï¼Œè€Œæˆ‘ä»¬ä¸€æ¬¡åªæŸ¥çœ‹20ä¸ªç»“æœï¼Œåˆ™éœ€è¦æ»šåŠ¨æµè§ˆäº”ä¸ªé¡µé¢ä»¥æŸ¥çœ‹è¯¥æŸ¥è¯¢çš„æ‰€æœ‰100ä¸ªç»“æœã€‚ </p><br><p> ä¹‹åï¼Œæˆ‘ä»¬æ¸²æŸ“æ¨¡æ¿å¹¶å°†<code>search</code>å˜é‡ä½œä¸ºæ•°æ®æ¥å£ä¼ é€’ã€‚ å¦‚æ‚¨æ‰€è§ï¼Œè¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿä»æ¨¡æ¿ä¸­çš„JSONå¯¹è±¡è®¿é—®æ•°æ®ã€‚ </p><br><p> åœ¨ç»§ç»­è¿›è¡Œ<code>index.html</code>ä¹‹å‰ï¼Œè¯·ç¡®ä¿å¦‚ä¸‹æ‰€ç¤ºæ›´æ–°å¯¼å…¥ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"encoding/json"</span></span> <span class="hljs-string"><span class="hljs-string">"flag"</span></span> <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"html/template"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"math"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"net/url"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> <span class="hljs-string"><span class="hljs-string">"strconv"</span></span> <span class="hljs-string"><span class="hljs-string">"time"</span></span> )</code> </pre> <br><p> è®©æˆ‘ä»¬ç»§ç»­ï¼Œé€šè¿‡å¦‚ä¸‹æ›´æ”¹<code>index.html</code>æ–‡ä»¶ï¼Œåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºç»“æœã€‚ å°†å…¶æ·»åŠ åˆ°<code>&lt;header&gt;</code> ï¼š </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-results"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ range .Results.Articles }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"news-article"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">target</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_blank"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"noreferrer noopener"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{.URL}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"title"</span></span></span><span class="hljs-tag">&gt;</span></span>{{.Title }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .Description }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"metadata"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"source"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .Source.Name }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"published-date"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .PublishedAt }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"article-image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ .URLToImage }}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p> è¦è®¿é—®æ¨¡æ¿ä¸­çš„ç»“æ„å­—æ®µï¼Œæˆ‘ä»¬ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ã€‚ è¯¥è¿ç®—ç¬¦å¼•ç”¨ä¸€ä¸ªç»“æ„å¯¹è±¡ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ä¸º<code>search</code> ï¼‰ï¼Œç„¶ååœ¨æ¨¡æ¿å†…éƒ¨æˆ‘ä»¬ç®€å•åœ°æŒ‡å®šå­—æ®µåç§°ï¼ˆå¦‚<code>{{.Results}}</code> ï¼‰ã€‚ </p><br><p>  <code>range</code>å—ä½¿æˆ‘ä»¬å¯ä»¥åœ¨Goä¸­çš„ä¸€ä¸ªåˆ‡ç‰‡ä¸Šè¿›è¡Œè¿­ä»£ï¼Œå¹¶ä¸ºè¯¥åˆ‡ç‰‡ä¸­çš„æ¯ä¸ªå…ƒç´ è¾“å‡ºä¸€äº›HTMLã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éå†<code>Articles</code>å­—æ®µä¸­åŒ…å«çš„<code>Article</code>ç»“æ„çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶åœ¨æ¯æ¬¡è¿­ä»£æ—¶æ˜¾ç¤ºHTMLã€‚ </p><br><p> é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œåˆ·æ–°æµè§ˆå™¨å¹¶æœç´¢æœ‰å…³çƒ­é—¨ä¸»é¢˜çš„æ–°é—»ã€‚ æ‚¨åº”è¯¥è·å¾—æ¯é¡µ20æ¡ç»“æœçš„åˆ—è¡¨ï¼Œå¦‚ä¸‹é¢çš„å±å¹•å¿«ç…§æ‰€ç¤ºã€‚ </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/e5b/129/9ff/e5b1299ffc3a2c0ba892cdf3a2097e73.png" alt="æµè§ˆå™¨æ˜¾ç¤ºæ–°é—»åˆ—è¡¨"></a> </p><br><h2 id="sohranyaem-poiskovyy-zapros-v-inputehttpsfreshmantechweb-development-with-gopersist-the-search-query-in-the-input"> å°†æœç´¢æŸ¥è¯¢ä¿å­˜åœ¨å¤–éƒ¨ </h2><br><p> è¯·æ³¨æ„ï¼Œå½“é¡µé¢åˆ·æ–°ç»“æœæ—¶ï¼Œæœç´¢æŸ¥è¯¢å°†ä»è¾“å…¥ä¸­æ¶ˆå¤±ã€‚ ç†æƒ³æƒ…å†µä¸‹ï¼Œåº”ä¿ç•™æŸ¥è¯¢ï¼Œç›´åˆ°ç”¨æˆ·æ‰§è¡Œæ–°æœç´¢ä¸ºæ­¢ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯Googleæœç´¢çš„å·¥ä½œæ–¹å¼ã€‚ </p><br><p> æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼æ›´æ–°<code>index.html</code>æ–‡ä»¶ä¸­<code>input</code>æ ‡ç­¾çš„<code>value</code>å±æ€§æ¥è½»æ¾è§£å†³æ­¤é—®é¢˜ï¼š </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ .SearchKey }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Enter a news topic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"q"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p> é‡æ–°å¯åŠ¨æµè§ˆå™¨å¹¶æ‰§è¡Œæ–°æœç´¢ã€‚ æœç´¢æŸ¥è¯¢å°†è¢«ä¿å­˜ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/88c/c3b/44e/88cc3b44e1bdd882aa9dfde1666c32b3.png"></a> </p><br><h2 id="formatiruem-datu-publikaciihttpsfreshmantechweb-development-with-goformat-the-published-date"> æ ¼å¼å‘å¸ƒæ—¥æœŸ </h2><br><p> å¦‚æœæ‚¨æŸ¥çœ‹æ¯ç¯‡æ–‡ç« ä¸­çš„æ—¥æœŸï¼Œå°†ä¼šå‘ç°å®ƒçš„å¯è¯»æ€§å¾ˆå·®ã€‚ å½“å‰è¾“å‡ºæ˜¾ç¤ºNews APIå¦‚ä½•è¿”å›æ–‡ç« çš„å‘å¸ƒæ—¥æœŸã€‚ ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨<code>Article</code>ç»“æ„ä¸­æ·»åŠ ä¸€ç§æ–¹æ³•å¹¶ä½¿ç”¨å®ƒæ¥æ ¼å¼åŒ–æ—¥æœŸè€Œä¸æ˜¯ä½¿ç”¨é»˜è®¤å€¼æ¥è½»æ¾åœ°æ›´æ”¹æ­¤è®¾ç½®ã€‚ </p><br><p> è®©æˆ‘ä»¬åœ¨<code>main.go</code>çš„<code>Article</code>ç»“æ„ä¸‹æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a *Article)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormatPublishedDate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { year, month, day := a.PublishedAt.Date() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%v %d, %d"</span></span>, month, day, year) }</code> </pre> <br><p> åœ¨è¿™é‡Œï¼Œåœ¨<code>Article</code>ç»“æ„ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<code>FormatPublishedDate</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ ¼å¼åŒ–<code>Article</code>çš„<code>PublishedAt</code>å­—æ®µï¼Œå¹¶ä»¥ä»¥ä¸‹æ ¼å¼è¿”å›å­—ç¬¦ä¸²ï¼š <code>10  2009</code> ã€‚ </p><br><p> è¦åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ­¤æ–°æ–¹æ³•ï¼Œè¯·åœ¨<code>index.html</code>æ–‡ä»¶<code>.FormatPublishedDate</code>æ›¿æ¢ä¸º<code>.FormatPublishedDate</code> ã€‚ ç„¶åé‡æ–°å¯åŠ¨æœåŠ¡å™¨å¹¶é‡å¤ä¸Šä¸€ä¸ªæœç´¢æŸ¥è¯¢ã€‚ è¿™å°†ä»¥æ­£ç¡®çš„æ ¼å¼è¾“å‡ºç»“æœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/444/c8a/92f/444c8a92fbd3ee21d89646c2d5868250.png" alt="å‹‡æ•¢çš„çš„æµè§ˆå™¨æ˜¾ç¤ºæ­£ç¡®æ ¼å¼çš„æ—¥æœŸ"></a> </p><br><h2 id="vyvodim-obschee-kolichestvo-rezultatovhttpsfreshmantechweb-development-with-goshow-the-total-number-of-results"> æ˜¾ç¤ºç»“æœæ€»æ•°ã€‚ </h2><br><p> è®©æˆ‘ä»¬é€šè¿‡åœ¨é¡µé¢é¡¶éƒ¨æŒ‡ç¤ºç»“æœæ€»æ•°æ¥æ”¹å–„æ–°é—»åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ï¼Œç„¶ååœ¨æœªé’ˆå¯¹ç‰¹å®šæŸ¥è¯¢æ‰¾åˆ°ç»“æœçš„æƒ…å†µä¸‹æ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ã€‚ </p><br><p> æ‚¨æ‰€éœ€è¦åšçš„å°±æ˜¯å°†ä»¥ä¸‹ä»£ç ä½œä¸º<code>.container</code>çš„å­é¡¹æ·»åŠ åˆ°<code>index.html</code>æ–‡ä»¶ä¸­<code>.container</code> <code>.search-results</code>å…ƒç´ çš„ä¸Šæ–¹ï¼š </p><br><pre> <code class="go hljs">&lt;div class=<span class="hljs-string"><span class="hljs-string">"result-count"</span></span>&gt; {{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gt .Results.TotalResults <span class="hljs-number"><span class="hljs-number">0</span></span>)}} &lt;p&gt;About &lt;strong&gt;{{ .Results.TotalResults }}&lt;/strong&gt; results were found.&lt;/p&gt; {{ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ne .SearchKey <span class="hljs-string"><span class="hljs-string">""</span></span>) and (eq .Results.TotalResults <span class="hljs-number"><span class="hljs-number">0</span></span>) }} &lt;p&gt;No results found <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> your query: &lt;strong&gt;{{ .SearchKey }}&lt;/strong&gt;.&lt;/p&gt; {{ end }} &lt;/div&gt;</code> </pre> <br><p>  Go    ,     .    <code>gt</code> ,  ,   <code>TotalResults</code>  <code>Results</code>  .   ,         . </p><br><p>   ,  <code>SearchKey</code>     ( <code>(ne .SearchKey "")</code> )  <code>TotalResults</code>   ( <code>(eq .Results.TotalResults 0)</code> ),    Â«No results foundÂ». </p><br><p>         ,        .      Â«No results foundÂ». </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/305/bfc/407/305bfc40758d20abe8e01c1981930d41.png" alt="æµè§ˆå™¨æ˜¾ç¤ºæœªæ‰¾åˆ°ç»“æœæ¶ˆæ¯"></a> </p><br><p>             .      ,   : </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/bbb/30a/c8c/bbb30ac8c3adc70ff1195ed3382ce928.png" alt="Browser showing results count at the top of the page"></a> </p><br><h2 id="paginaciyahttpsfreshmantechweb-development-with-gopagination">  </h2><br><p>      20  ,   ,             . </p><br><p>    <strong>Next</strong>  ,       .  ,      ,        <code>Search</code>  <code>main.go</code> : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s *Search)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsLastPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.NextPage &gt;= s.TotalPages }</code> </pre> <br><p>   ,    <code>NextPage</code> ,   <code>TotalPages</code>   <code>Search</code> .   ,    <code>NextPage</code>  ,     .    : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//   search.TotalPages = int(math.Ceil(float64(search.Results.TotalResults / pageSize))) //   if  if ok := !search.IsLastPage(); ok { search.NextPage++ } //    }</span></span></code> </pre> <br><p> ,   ,        .       <code>.search-results</code>    <code>index.html</code> . </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pagination"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ if (ne .IsLastPage true) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .NextPage }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button next-page"</span></span></span><span class="hljs-tag">&gt;</span></span>Next<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>         ,  <strong>Next</strong>       . </p><br><p>  , <code>href</code>     <code>/search</code>        <code>q</code> ,   <code>NextPage</code>   <code>page</code> . </p><br><p>    <strong>Previous</strong> .        ,     1.   ,      <code>CurrentPage()</code>  <code>Search</code> ,   .     <code>IsLastPage</code> : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s *Search)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CurrentPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> s.NextPage == <span class="hljs-number"><span class="hljs-number">1</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.NextPage } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.NextPage - <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre> <br><p>    <code>NextPage - 1</code> ,   ,  <code>NextPage</code>  1.    ,   1   .     : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s *Search)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PreviousPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.CurrentPage() - <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre> <br><p>  ,         <strong>Previous</strong> ,      1.   <code>.pagination</code>    <code>index.html</code>  : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pagination"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ if (gt .NextPage 2) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .PreviousPage }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button previous-page"</span></span></span><span class="hljs-tag">&gt;</span></span>Previous<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} {{ if (ne .IsLastPage true) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .NextPage }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button next-page"</span></span></span><span class="hljs-tag">&gt;</span></span>Next<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>        .      ,   : </p><br><br><br><h2 id="pokazyvaem-tekuschuyu-stranicuhttpsfreshmantechweb-development-with-goshow-the-current-page">    </h2><br><p>  ,      ,   ,            ,       . </p><br><p>          <code>index.html</code>  : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"result-count"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ if (gt .Results.TotalResults 0)}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>About <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .Results.TotalResults }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span> results were found. You are on page <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .CurrentPage }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span> of <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span> {{ .TotalPages }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> {{ else if (ne .SearchKey "") and (eq .Results.TotalResults 0) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>No results found for your query: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .SearchKey }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  ,        ,                 . </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/071/3cd/5a8/0713cd5a870236b1e64309fd24575847.png" alt="Browser showing current page"></a> </p><br><h2 id="deploim-na-herokuhttpsfreshmantechweb-development-with-godeploy-to-heroku">   Heroku </h2><br><p> ,    ,       Heroku. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   </a> ,     ,    .     .    <strong>freshman-news</strong> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  </a> ,      Heroku   .    <code>heroku login</code>  ,       Heroku. </p><br><p> ,    git-   .  ,   <code>git init</code>     ,     ,   heroku    git-.  <code>freshman-news</code>   . </p><br><pre> <code class="bash hljs">heroku git:remote -a freshman-news</code> </pre> <br><p>   Procfile      ( <code>touch Procfile</code> )    : </p><br><pre> <code class="bash hljs">web: bin/news-demo -apikey <span class="hljs-variable"><span class="hljs-variable">$NEWS_API_KEY</span></span></code> </pre> <br><p>     GitHub      Go,   ,    <code>go.mod</code> ,   .   ,     ,   . </p><br><pre> <code class="go hljs">module github.com/freshman-tech/news-demo <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-number"><span class="hljs-number">1.12</span></span><span class="hljs-number"><span class="hljs-number">.9</span></span></code> </pre> <br><p>       <strong>Settings</strong>    Heroku   <strong>Reveal Config Vars</strong> .      <strong>NEWS_API_KEY</strong> ,           . </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/7e6/ddc/3df/7e6ddc3df666b96b83c892346746f0c3.png" alt="Heroku config variables"></a> </p><br><p> ,         Heroku    : </p><br><pre> <code class="bash hljs">git add . git commit -m <span class="hljs-string"><span class="hljs-string">"Initial commit"</span></span> git push heroku master</code> </pre> <br><p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://__.herokuapp.com</a> ,      . </p><br><h2 id="zaklyucheniehttpsfreshmantechweb-development-with-gowrap-up"> ç»“è®º </h2><br><p>        News     Go  -.   ,      Heroku. </p><br><p>  ,       .     -    ,   ,    . </p><br><p> æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN475390/">https://habr.com/ru/post/zh-CN475390/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN475378/index.html">â€œæˆ‘ä»¬ä¸èƒ½å°†å¤§å®¢æˆ·çš„ä¸ªäººæ•°æ®æƒåˆ©ç•™ç»™å¤§å…¬å¸â€-è‹±å›½ã€Šè¿çº¿ã€‹æ‚å¿—å‰ä¸»ç¼–è°ˆåˆ°æŠ€æœ¯çš„æœªæ¥</a></li>
<li><a href="../zh-CN475382/index.html">æˆ‘ä»¬å¦‚ä½•åœ¨Yandex.Mapsä¸­å®ç°WebAssemblyä»¥åŠä¸ºä»€ä¹ˆè¦ç¦»å¼€JavaScript</a></li>
<li><a href="../zh-CN475384/index.html">Spring Boot 2.2ä¸­æœ‰ä»€ä¹ˆæ–°åŠŸèƒ½ï¼Ÿ</a></li>
<li><a href="../zh-CN475386/index.html">FASè­¦å‘Šï¼šå¦‚ä½•ä¸è¿åå¹¿å‘Šæ³•ã€‚ å¹¿å‘Šå•†å¤‡æ³¨</a></li>
<li><a href="../zh-CN475388/index.html">å®‰å…¨å‘¨46ï¼šéº¦å…‹é£ï¼Œæ¿€å…‰å’Œç»è¿‡åŸ¹è®­çš„æœºå™¨çš„å®‰å…¨æ€§</a></li>
<li><a href="../zh-CN475392/index.html">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨python -m pip</a></li>
<li><a href="../zh-CN475396/index.html">ç¦ç”¨å°åˆ·ç”µè·¯æ¿CADä¸­çš„â€œä¸å¿…è¦â€æ£€æŸ¥çš„é—®é¢˜</a></li>
<li><a href="../zh-CN475398/index.html">11æœˆ11æ—¥è‡³17æ—¥åœ¨è«æ–¯ç§‘ä¸¾è¡Œçš„æ•°å­—æ´»åŠ¨</a></li>
<li><a href="../zh-CN475400/index.html">11æœˆ11æ—¥è‡³17æ—¥åœ¨åœ£å½¼å¾—å ¡ä¸¾è¡Œçš„æ•°å­—æ´»åŠ¨</a></li>
<li><a href="../zh-CN475404/index.html">ä¸€ä¸ªç®€å•ç¤ºä¾‹çš„BLoCæ¨¡å¼</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>