<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲🏾 🧗🏾 😠 MIT-Kurs "Computer Systems Security". Vorlesung 12: Netzwerksicherheit, Teil 1 🤹🏿 ✊ 📕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Massachusetts Institute of Technology. Vorlesung # 6.858. "Sicherheit von Computersystemen." Nikolai Zeldovich, James Mickens. 2014 Jahr 
 Computer Sy...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MIT-Kurs "Computer Systems Security". Vorlesung 12: Netzwerksicherheit, Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/426325/"><h3>  Massachusetts Institute of Technology.  Vorlesung # 6.858.  "Sicherheit von Computersystemen."  Nikolai Zeldovich, James Mickens.  2014 Jahr </h3><br>  Computer Systems Security ist ein Kurs zur Entwicklung und Implementierung sicherer Computersysteme.  Die Vorträge behandeln Bedrohungsmodelle, Angriffe, die die Sicherheit gefährden, und Sicherheitstechniken, die auf jüngsten wissenschaftlichen Arbeiten basieren.  Zu den Themen gehören Betriebssystemsicherheit, Funktionen, Informationsflussmanagement, Sprachsicherheit, Netzwerkprotokolle, Hardwaresicherheit und Sicherheit von Webanwendungen. <br><br>  Vorlesung 1: „Einführung: Bedrohungsmodelle“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 2: „Kontrolle von Hackerangriffen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 3: „Pufferüberläufe: Exploits und Schutz“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 4: „Trennung von Privilegien“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 5: „Woher kommen Sicherheitssysteme?“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> <br>  Vorlesung 6: „Chancen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 7: „Native Client Sandbox“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 8: „Netzwerksicherheitsmodell“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 9: „Sicherheit von Webanwendungen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 10: „Symbolische Ausführung“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 11: „Ur / Web-Programmiersprache“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 12: Netzwerksicherheit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <a name="habracut"></a><br><br>  Heute werden wir insbesondere über Netzwerksicherheit sprechen und einen Artikel von Stephen Bellovin mit dem Titel "Ein Rückblick auf" Sicherheitsprobleme in der TCP / IP-Protokollsuite "" diskutieren.  Dieser Typ hat früher für AT &amp; T gearbeitet und arbeitet jetzt in Kolumbien.  Interessant an dieser Arbeit ist, dass sie relativ alt ist - sie ist mehr als 10 Jahre alt, und tatsächlich handelt es sich um Kommentare zu einem Artikel, der 1989 ein Jahrzehnt zuvor veröffentlicht wurde. <br><br>  Viele von euch fragen, warum wir das untersuchen, wenn viele der dort beschriebenen Probleme in den heutigen Versionen des TCP-Protokolls behoben wurden. <br><br><img src="https://habrastorage.org/webt/bh/t4/ys/bht4ys9zt413cyjbic0nv5qazbm.jpeg"><br><br>  Es ist wahr, dass einige der von Stephen beschriebenen Probleme inzwischen gelöst wurden und einige von ihnen immer noch Probleme bleiben.  In diesem Sinne werden wir sie sortieren und sehen, was passiert.  Sie fragen sich vielleicht, warum die Leute all diese Probleme beim Entwerfen von TCP nicht überhaupt gelöst haben?  Was dachten sie nur? <br><br>  Und das ist eigentlich nicht klar.  Was denkst du?  Warum hatte das TCP-Protokoll angesichts all dieser Überlegungen nicht die erforderliche Sicherheit?  Irgendwelche Vorschläge? <br><br>  <b>Student:</b> Zu dieser Zeit war das Internet ein viel leichtgläubigerer Ort. <br><br>  <b>Professor:</b> Ja, es war buchstäblich ein Zitat aus dem Artikel dieses Mannes.  Ja, zu dieser Zeit im Allgemeinen ... Ich glaube, vor ungefähr 40 Jahren wurde eine Reihe von Internetprotokollen entwickelt.  Die Anforderungen waren völlig unterschiedlich.  Es war nur notwendig, eine Reihe relativ leichtgläubiger Sites, die sich beim Namen kannten, mit einem gemeinsamen Netzwerk zu verbinden. <br><br>  Ich denke, das passiert oft in jedem System, das erfolgreich wird - es braucht Änderungen.  Früher war es ein Protokoll für eine kleine Anzahl von Standorten, jetzt deckt dieses Protokoll die ganze Welt ab.  Und Sie kennen nicht mehr den Namen aller Personen, die mit dem Internet verbunden sind.  Sie können sie nicht anrufen, wenn sie etwas Schlechtes tun, und so weiter. <br><br>  Daher denke ich, dass diese Geschichte für viele der Protokolle, die wir in Betracht ziehen, dieselbe ist.  Und viele von euch stellen eine Frage wie: „Was zum Teufel haben diese Leute gedacht?  Das ist so fehlerhaft! "  In Wirklichkeit haben sie ein völlig anderes System entworfen und es einfach an die modernen Bedürfnisse angepasst. <br><br>  Das Gleiche und das Internet, wie wir es uns in den letzten Wochen angesehen haben, wurden für einen ganz anderen Zweck entwickelt.  Aber es wurde erweitert, und wir hatten neue Bedenken, wie dieses Protokoll an moderne Anforderungen angepasst werden kann. <br><br>  Es gibt noch eine andere Sache, die etwas plötzlich passiert ist: Die Leute mussten die Schwere des Sicherheitsproblems überschätzen.  Früher haben Sie nicht alle Dinge verstanden, über die Sie sich Sorgen machen sollten, weil Sie nicht wussten, was der Angreifer mit Ihrem System tun konnte. <br><br><img src="https://habrastorage.org/webt/03/-2/9h/03-29hpygp5xdgbhevallbavu8s.jpeg"><br><br>  Ich denke, teilweise aus diesem Grund wird es interessant sein zu sehen, was mit der TCP-Sicherheit passiert ist, was schief gelaufen ist, wie wir das beheben können und so weiter.  Infolgedessen müssen wir herausfinden, welche Arten von Problemen bei der Entwicklung unserer eigenen Protokolle vermieden werden sollten und was ein angemessenes Denken über Angriffe dieser Art ausmacht.  Woher wissen Sie, was ein Angreifer in Ihrem eigenen Protokoll tun kann, wenn Sie es gerade entwickeln, um solche Fallstricke zu vermeiden? <br><br>  Okay, lassen wir die Präambel beiseite und sprechen über diesen Artikel. <br><br>  Wie sollten wir also über Netzwerksicherheit denken?  Ich denke, wir könnten mit dem ersten Prinzip beginnen und versuchen, herauszufinden, was unser Bedrohungsmodell ist.  Was kann ein Angreifer in unserem Netzwerk tun? <br><br>  Er hat wahrscheinlich die Fähigkeit, Pakete abzufangen, und vielleicht kann er sie ändern.  Wenn Sie also ein Paket über das Netzwerk senden, ist es ratsam anzunehmen, dass ein Bösewicht Ihr Paket sieht und es ändern kann, bevor es sein Ziel erreicht.  Möglicherweise kann es auch gelöscht und benutzerdefinierte Pakete mit beliebigen Inhalten eingegeben werden, die Sie nie gesendet haben. <br><br><img src="https://habrastorage.org/webt/rm/_a/in/rm_ainrpqlw6awzc2kugqnvtkn8.jpeg"><br><br>  Gefährlicher ist jedoch die Möglichkeit, dass Bösewichte Ihre im Artikel beschriebenen Protokolle stören.  Der Angreifer hat einen eigenen Computer, den er vollständig kontrolliert.  Selbst wenn sich alle Computer, denen Sie vertrauen, ordnungsgemäß verhalten, kann der Bösewicht, der über einen eigenen Computer verfügt, Ihr Protokoll oder System stören. <br><br>  Wenn Sie also ein Routing-Protokoll haben, bei dem viele Leute miteinander sprechen, und eine gewisse Skalierung wahrscheinlich unpraktisch ist, um die Bösen draußen zu halten.  Wenn ein Routing-Protokoll mit 10 Teilnehmern ausgeführt wird, können Sie vielleicht einfach alle anrufen und dann sagen: "Ja, Leute, ich kenne Sie alle." <br><br>  Auf der heutigen Skala des Internets ist es jedoch unmöglich, direkt herauszufinden, wer die anderen Netzwerkmitglieder dieses Protokoll verwenden.  Wahrscheinlich wird ein Bösewicht an Ihren Protokollen oder verteilten Systemen teilnehmen.  Daher ist es wichtig, verteilte Systeme zu entwerfen, die dennoch etwas Vernünftiges daraus machen können. <br><br>  OK, was bedeutet das alles?  Ich denke, wir werden die Liste durchgehen.  Das Abfangen von Paketen ist im Allgemeinen leicht zu verstehen. Sie können keine wichtigen Daten über das Netzwerk senden, wenn Sie erwarten, dass der Bösewicht sie abfängt, oder zumindest nicht im Klartext.  Vielleicht sollten Sie Ihre Daten verschlüsseln. <br><br><img src="https://habrastorage.org/webt/2_/js/e1/2_jse1lo8kw6tsoaaowxxuh4qf4.jpeg"><br><br>  Es scheint relativ einfach zu verstehen, obwohl Sie dies bei der Entwicklung von Protokollen immer noch berücksichtigen müssen.  Die Einführung oder Injektion von Paketen führt zu einem breiteren Spektrum interessanter Probleme, die in diesem Artikel behandelt werden.  Insbesondere können Angreifer Pakete injizieren, die sich als Pakete eines anderen Absenders ausgeben können.  Da der Datenübertragungspfad auf der Verwendung von IP basiert, hat das Paket selbst einen Header, der die Quell-IP des Pakets und die Ziel-IP angibt.  Es prüft jedoch niemand, ob die Quelle unbedingt korrekt ist.  Es gibt heutzutage einige Filter, aber es ist nicht perfekt und es ist schwer, sich darauf zu verlassen. <br><br>  In erster Näherung kann ein Angreifer also eine beliebige IP-Adresse als Quelle einfügen und an das richtige Ziel senden.  Es ist interessant herauszufinden, was ein Angreifer mit der Fähigkeit tun kann, beliebige Pakete zu senden. <br><br>  In den Wochen zuvor haben wir uns mit Pufferüberlaufproblemen im Hinblick auf die Websicherheit befasst.  Wir haben untersucht, wie ein Angreifer einen Implementierungsfehler wie Pufferüberläufe verwenden kann.  Interessanterweise war der Autor dieses Artikels nicht wirklich an Implementierungsfehlern interessiert, er ist mehr an Protokollfehlern interessiert. <br><br>  Was ist das Besondere daran?  Warum hat er die Implementierungsfehler nicht beachtet, obwohl wir mehrere Wochen damit verbracht haben, sie zu untersuchen?  Warum ist das wichtig? <br><br>  <b>Student:</b> weil wir diese Fehler beim Schreiben des Protokolls ausschließen müssen. <br><br>  <b>Professor:</b> Ja, dies ist wirklich ein großer Fehler aufgrund eines Fehlers im Protokolldesign, da es schwierig ist, Änderungen vorzunehmen.  Wenn Sie also einen Implementierungsfehler haben und einen Speicher oder Ausdruck haben, der den Speicherbereich nicht überprüft hat, können Sie diesen Fehler nicht bemerken.  Wenn Sie jedoch eine Bereichsprüfung haben und diese weiterhin funktioniert, können Pufferüberläufe vermieden werden. Das ist also großartig. <br><br>  Wenn Sie jedoch einen Fehler in der Protokollspezifikation haben und wissen möchten, wie das Protokoll funktionieren soll, müssen Sie zur Korrektur eines solchen Fehlers das gesamte Protokoll reparieren. Dies bedeutet eine mögliche Auswirkung auf alle Systeme, die dieses Protokoll sprechen.  Wenn wir also ein Problem im TCP-Protokoll finden, ist es möglicherweise ziemlich destruktiv.  Weil jeder Computer, der TCP verwendet, Änderungen vornehmen muss, da es möglicherweise sehr schwierig ist, ein modifiziertes Protokoll mit dem alten Computer kompatibel zu machen. <br><br>  Die TCP-Protokollfehler, über die Stephen so besorgt war, waren grundlegend, deshalb beschloss er, darüber zu sprechen.  Im ersten Beispiel untersucht er, wie die TCP-SN-Nummern funktionieren. <br><br>  <b>Student:</b> Das ist ein wenig abseits des Themas, aber ich bin nur neugierig.  Angenommen, Sie finden einen Fehler in TCP.  Wie nehmen Sie Änderungen daran vor?  Wie können Sie allen Computern auf der Welt mitteilen, dass dies geändert werden muss? <br><br>  <b>Professor</b> : Ja, ich denke das ist ein großes Problem.  Was tun, wenn in TCP ein Fehler auftritt?  Nun, es ist nicht klar, was zu tun ist.  Ich denke, dass der Autor hier damit zu kämpfen hat.  Wenn Sie TCP neu gestalten könnten, lassen sich viele dieser Fehler relativ einfach beheben, wenn Sie im Voraus wissen, wonach Sie suchen müssen. <br><br>  Da es jedoch schwierig ist, TCP zu reparieren oder zu ändern, geschieht letztendlich Folgendes: Die Entwickler versuchen, abwärtskompatible Einstellungen zu finden, mit denen entweder die alten Implementierungen in Verbindung mit der neuen Implementierung verwendet werden können, oder fügen ein zusätzliches Feld hinzu, das die Verbindung etwas sicherer macht. <br><br><img src="https://habrastorage.org/webt/e4/xr/si/e4xrsiti_bwr-40vt_fctjvkgxu.jpeg"><br><br>  Das ist aber ein großes Problem.  Wenn dies ein Sicherheitsproblem ist, das tief in TCP verwurzelt ist, wird es für alle zu einem großen Problem, da es sehr schwierig ist, einfach auf die TCP-Version zu wechseln, vorausgesetzt, n plus 1. <br><br>  IPv6 kann als Beispiel dafür angesehen werden, dass dies nicht der Fall ist, und wir wissen, dass dieses Problem für weitere 15 oder 20 Jahre auftreten wird.  IPv6 gibt es seit über 10 Jahren, aber es ist schwer, die Leute davon zu überzeugen, sich von IPv4 zu entfernen.  IPv4 ist genug für sie, es scheint zu funktionieren, und sie denken, dass die Umstellung auf ein neues Internetprotokoll zu teuer sein wird.  Sie sagen: "Niemand spricht mehr IPv6. Warum sollte ich dann über dieses seltsame Protokoll sprechen, mit dem niemand mehr mit mir sprechen kann?"  Auf jeden Fall ist dies eine Art Vorwärtsbewegung, aber ich denke, es wird viel Zeit in Anspruch nehmen.  Es wird wirklich eine gewisse Motivation für die Migration geben, und die Abwärtskompatibilität hilft in diesem Fall sehr. <br><br>  IPv6 bietet viele Abwärtskompatibilitätsoptionen. Sie können beispielsweise über IPv6 mit einem IPv4-Host kommunizieren.  Daher versuchen Entwickler, all diese Unterstützung zu entwickeln, aber es ist immer noch schwierig, die Leute von einem Upgrade zu überzeugen. <br><br>  In Anbetracht der TCP-Sequenznummern werden wir also zwei Probleme betrachten, die mit der Funktionsweise des TCP-Handshakes zusammenhängen.  Schauen wir uns also an, wie eine TCP-Verbindung anfänglich hergestellt wird. <br><br>  Es werden drei Pakete gesendet, um eine neue TCP-Verbindung herzustellen.  Unser Client generiert ein Paket für die Verbindung zum Server. Hier steht, dass hier meine Client-IP-Adresse angegeben ist. Ich sende sie an den Server.  Gleichzeitig gibt es eine Paket-Header-Struktur, die aus verschiedenen Bereichen besteht, aber wir werden uns für den Bereich der Seriennummer interessieren.  Hier wird das SYN-Flag mit der Aufschrift "Ich möchte den Status synchronisieren und eine neue Verbindung herstellen" angezeigt, das die Seriennummer des SNc-Clients enthält. <br><br><img src="https://habrastorage.org/webt/wx/2j/cd/wx2jcdmpjnfrv0tmgwbzpttsiwg.jpeg"><br><br>  Wenn der Server dieses Paket empfängt, sagt er: "Der Client möchte eine Verbindung zu mir herstellen, daher sende ich das Paket an diese Adresse zurück, unabhängig davon, wer sagt, dass er versucht, mich zu kontaktieren."  Somit sendet der Server das Paket an den Client, wo er seine eigene SNs-Server-Synchronisationssequenznummer und die ACK-Client-Bestätigungsnummer (SNc) enthält.  Schließlich antwortet der Client mit dem dritten Paket auf den Server, bestätigt die Synchronisation und sendet die Server-ACK-Server-Bestätigungsnummer (SNs).  Jetzt kann der Client mit dem Senden von Daten beginnen. <br><br>  Um Daten zu senden, muss der Client zu Beginn der Verbindung einige Daten in das Paket aufnehmen und die Seriennummer des SNc-Clients anhängen, um anzuzeigen, dass dies tatsächlich legitime Clientdaten sind.  Er weist zum Beispiel darauf hin, dass dies nicht einige Daten aus späteren Nachrichten sind, die gerade jetzt eintreffen, weil der Server einige der ersten Teile der Daten übersehen hat. <br><br><img src="https://habrastorage.org/webt/to/7d/hq/to7dhq2naolp3cxf_t9marythpe.jpeg"><br><br>  Daher sind alle diese Seriennummern in der Regel so ausgelegt, dass sie eine Paketzustellung ermöglichen.  Wenn der Client zwei Pakete überträgt, ist das mit der Startsequenznummer das erste Datenelement, die nächste Sequenznummer das nächste Datenelement.  Es ist auch nützlich, um einige Sicherheitsanforderungen bereitzustellen. <br><br>  Vorher habe ich ein Beispiel gegeben, dass sich diese Anforderungen ändern.  Daher dachte anfangs niemand, dass TCP Sicherheitsfunktionen bereitstellen sollte.  Aber dann begann der TCP, Anwendungen zu verwenden, und sie schienen sich auf diese TCP-Verbindungen zu verlassen, da sie glaubten, dass sie von keinem Angreifer unterbrochen werden konnten oder dass der Angreifer keine schädlichen Daten in die vorhandene TCP-Verbindung einfügen konnte.  Als ob plötzlich dieser Mechanismus, der ursprünglich nur für die Bestellung von Paketen gedacht war, einen gewissen Anschein von Sicherheit für diese Verbindungen zu garantieren begann. <br><br>  Daher gehe ich in diesem Fall davon aus, dass das Problem damit zusammenhängt, was der Server in Bezug auf diese TCP-Verbindung vorgeschlagen haben könnte.  In der Regel geht der Server - wie Sie sich vorstellen können - implizit davon aus, dass diese Verbindung mit dem gewünschten Client unter dieser IP-Adresse C hergestellt wird, und es ist für ihn selbstverständlich, dies zu glauben.  Aber gibt es einen Grund für eine solche Annahme?  Wenn der Server eine Nachricht mit einigen Daten zu dieser Client-Server-Verbindung empfängt und die Sequenznummer C hat, warum kommt der Server zu dem Schluss, dass der echte Client diese Daten gesendet hat? <br><br>  <b>Student:</b> weil die Seriennummer schwer zu erraten ist. <br>  <b>Professor:</b> Richtig, das ist also eine Art implizite Sache, was bedeutet, dass es eine korrekte SNc-Sequenznummer geben muss.  Damit diese Verbindung hergestellt werden kann, muss der Client über eine bestätigte Seriennummer des SN-Servers verfügen, und die Seriennummer des Servers wird vom Server nur an die IP-Adresse des Clients gesendet. <br><br>  <b>Student:</b> Wie viele Bits stehen für die Sequenznummer zur Verfügung? <br><br>  <b>Professor: Die</b> TCP-Sequenznummer ist 32 Bit lang, und obwohl dies keine Zufallszahl ist, ist es nicht leicht zu erraten, es würde viel Bandbreite erfordern. <br><br>  <b>Student: Ist die</b> Seriennummer höher als die ursprüngliche Seriennummer? <br><br>  <b>Professor:</b> Ja, im Prinzip nehmen diese Dinge zu.  Daher wird jedes Mal, wenn Sie SYN senden, 1 Byte mehr als Ihre Sequenznummer betrachtet.  Das heißt, wenn wir in der ersten Zeile das Argument (SNc) hatten, dann wird es in der vierten bereits (SNc + 1) geben, und dann wird die Nummerierung von hier aus fortgesetzt.  Wenn Sie also 5 Bytes übertragen, ist der folgende Wert (SNc) +6.  Es werden einfach die von Ihnen gesendeten Bytes gezählt, wobei jede SYN 1 Byte zählt.  In der TCP-Spezifikation wird empfohlen, diese Seriennummern so zu wählen, dass ihr Inkrement mit einer ungefähr festgelegten Geschwindigkeit erfolgt.  In den ersten Arbeitsdokumenten des RFC-Protokolls wurde vorgeschlagen, diese Werte um ca. 250.000 Einheiten plus 250.000 pro Sekunde zu erhöhen. <br><br><img src="https://habrastorage.org/webt/xk/yv/ve/xkyvvejv9v8b1kgj2p3lo51qb9s.jpeg"><br><br>  Der Grund, warum dies nicht völlig zufällig war, ist, dass diese Sequenznummern tatsächlich verwendet werden, um zu verhindern, dass Pakete nicht eingreifen, oder um Pakete von früheren Verbindungen mit neuen Verbindungen zu mischen.  Jedes Mal, wenn Sie eine neue Verbindung herstellen, wählen Sie eine völlig zufällige Seriennummer.  Gleichzeitig besteht die Möglichkeit, dass ein Paket der vorherigen Verbindung, wenn Sie eine Reihe von Verbindungen immer wieder installieren, eine Sequenznummer hat, die der Sequenznummer Ihrer neuen Verbindung sehr ähnlich ist und daher vom Server als gültiger Teil der Daten für die neue Verbindung akzeptiert wird. <br><br>  Das war es also, worüber TCP-Entwickler sehr besorgt waren - diese ungeordneten oder verzögerten Pakete.  Infolgedessen wollten sie wirklich, dass diese Sequenznummern selbst zwischen Verbindungen eine ziemlich monotone Zeitsequenz sind. <br><br>  Wenn ich eine Verbindung öffne, kann sie dieselbe Quelle und dasselbe Ziel, dieselben Portnummern, dieselben IP-Adressen usw. haben.  Da ich diese Verbindung jetzt und nicht früher hergestellt habe, stimmen die Pakete aus zuvor gesendeten Nachrichten hoffentlich nicht mit den Sequenznummern überein, die ich für meine neue Verbindung habe.  Dies war also ein Mechanismus, um Verwechslungen zwischen sich wiederholenden Verbindungen zu verhindern. <br><br>  <b>Student:</b> Wenn Sie nicht genau wissen, wie der Schritt der Paketsequenz aussehen wird, woher wissen Sie, dass das Paket, das Sie erhalten, das nächste Paket ist und nicht Teil des vorherigen Pakets, das Sie ... <br><br>  <b>Professor:</b> In der Regel erinnern Sie sich an das zuletzt empfangene Paket.  Und die nächste Sequenznummer ist genau das nächste Paket in der Sequenz.  So weiß der Server beispielsweise, dass ich genau einen Teil der Datumsdaten (SNc + 1) gesehen habe. Das nächste ist das SYN-Paket (SNc + 1), da das vorherige Paket zu Beginn der Verbindung SYN (SNc) war. <br><br>  <b>Student:</b> Also, Sie sagen, wenn Sie die Seriennummer einstellen, auch danach ... <br><br>  <b>Professor:</b> Nun, natürlich werden diese Seriennummern zunächst bei der Installation nach einem bestimmten Plan ausgewählt.  Wir werden über diesen Plan sprechen.  Sie könnten denken, dass sie zufällig sind, aber im Laufe der Zeit sollten sie einen sequentiellen Strom von Änderungen in den anfänglichen Sequenznummern für die Verbindung darstellen. <br><br>  Aber innerhalb einer Verbindung endet alles, sobald es hergestellt ist - Seriennummern sind festgelegt.  Und sie kennzeichnen diese Verbindung nur, wenn Daten darüber gesendet werden. <br><br>  Es gab Pläne, die die Verwaltung dieser Seriennummern vorschlugen.           ,   .  ,    ,       ,         . <br><br> , -            ,       250000.   ,    ,     ,   64k  128k,    .      ,     –         ,    SYN . <br><br>     ,      64  .  ,        . <br><br>    ,   . ,   ,     ,     ,      IP-. <br>     ,      ,  ,          ,       ,   .        ,         ,       . <br><br> ,   ?     ,   ,    ,    —             SNc.  ,     ,   -  ,     ,     ,          . <br><br>   ,       .           ACK (SNs). <br><br>  -   . <br><br><img src="https://habrastorage.org/webt/gx/0y/mb/gx0ymbpnfgd2i3bkkifqb_m79fy.jpeg"><br><br>   SNs   ,     ,     ,        IP- C. <br><br>        ,   .    ,    :   ,       ,      ,      data (SNc +1). <br><br><img src="https://habrastorage.org/webt/gb/qz/n4/gbqzn4arqziwsvwrl7qd8tgrfa0.jpeg"><br><br>             (SNs).  Das ist klar? <br><br> <b>:</b>   ,       ? <br><br> <b>:</b>   . ,    ,   ,    ,            . ,          ,                  ,   ,          . <br><br> <b>:</b>  ,    ,       ? <br><br> <b>:</b>          .   ,      ? <br><br>    ,    .      ,  ,      32    ,  ,               . <br><br>         ,       . <br><br> <b>:</b>     ,      ,   ,         .      … <br><br> <b>:</b> ,    TCP        . <br><br> <b>:</b>         ,        . <br><br> <b>:</b> ,  . <br><br> <b>:</b>    ,     ,       . <br><br> <b>:</b>  ,  ,         ,   .        , , 1000               ,          2  32 . <br><br>     ,  -        ,      ,        .       .      ,       . <br><br><img src="https://habrastorage.org/webt/6s/ad/wk/6sadwkqxxddn9pinshbckbt9ig8.jpeg"><br><br> <b>:</b>    -   , ? <br><br> <b>:</b> ,  .      ,    ,         IP-, ? <br><br> <b>:</b>        ? <br><br> <b>:</b>     —    ?          ,     .     ? <br><br> <b>:</b>   ,     ,    , ,   -   . <br><br> <b>:</b> , ,  ,     ,    ,        .       IP-,    TCP     ,  ,      ,     . <br><br>  TCP ,     -  ,    ,    ,     C      RST (SN…), ,    . <br><br><img src="https://habrastorage.org/webt/nu/iw/rs/nuiwrs35wrv-fhi6xcvwf7vowp8.jpeg"><br><br> - ,      ,   C            ,    . <br><br> ,   C   ,        .  ,  S   ,  : «, ,     ,    ». <br><br>    ,    , ,   ,        ,     C  . <br><br> ,   «»  C   ,        .      ,    «» C   ,       .   ,        TCP. <br><br> <b>:</b> ,      . ,      SYN   ,      . <br><br> <b>:</b>   ,     ,      . ,             , , ,     NAT,     .    , NAT    RST   ,      .  ,  ,     ,    , ,   Comcast            ,  RST   . <br><br> <b>:</b>             ? <br><br> <b>:</b> ,  ,     TCP.     ,     .      ,  ,   ,       .        /,              . <br><br>    ,        data (SNc +1). ,       IP-  , : «    »,     ,         S. <br><br><img src="https://habrastorage.org/webt/3c/qc/ch/3cqcchz0agrq_msukm3bd2_jlyo.jpeg"><br><br>    SYN (SNs)        (SNs)    ,    .    —     ,       IP-,     .    ,   SNS    SNS   . <br><br> 25:50  <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MIT-Kurs "Computer Systems Security".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> 12: « »,  2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BZTWXl9QNK8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . <br><br>  Vielen Dank für Ihren Aufenthalt bei uns.  Gefällt dir unser Artikel?  Möchten Sie weitere interessante Materialien sehen?  Unterstützen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder Ihren Freunden empfehlen, einen <b>Rabatt von 30% für Habr-Benutzer auf ein einzigartiges Analogon von Einstiegsservern, das wir für Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit über VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s von $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verfügbar). <br><br> <b>VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps   </b>      ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . <br><br>  <b>Dell R730xd 2 mal günstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b>  Lesen Sie mehr über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgebäudes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern für 9.000 Euro für einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de426325/">https://habr.com/ru/post/de426325/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de426313/index.html">Neues Microsoft Learn</a></li>
<li><a href="../de426315/index.html">Wie kann man mit dem unsichtbaren Internet Python-Freunde finden? Die Grundlagen der Entwicklung von I2P-Anwendungen in Python und Asyncio</a></li>
<li><a href="../de426317/index.html">1155 vs 2011. Einige alte Leute ziehen in die Schlacht</a></li>
<li><a href="../de426319/index.html">Testserver für das Entwicklungsteam</a></li>
<li><a href="../de426323/index.html">Ein Versuch, einen Roboterkoffer mit einem begrenzten Budget herzustellen. Glasmatte und Epoxid</a></li>
<li><a href="../de426327/index.html">Was ist neu in Windows 10 Oktober 2018 Update</a></li>
<li><a href="../de426331/index.html">Sicherheitslücke in PlayStation 4 - Der Zeichensatz in der Nachricht für den Benutzer aus der Ferne verwandelt die Konsole in fast einen "Baustein".</a></li>
<li><a href="../de426333/index.html">Microsoft hat MS-DOS 1.25- und 2.0-Code unter der MIT-Lizenz veröffentlicht</a></li>
<li><a href="../de426335/index.html">„Mars-Technologie“: Warum Rechenzentren auf Brennstoffzellen umstellen</a></li>
<li><a href="../de426339/index.html">25. Oktober 2018 Treffen der Atlassian User Group in der Raiffeisenbank</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>