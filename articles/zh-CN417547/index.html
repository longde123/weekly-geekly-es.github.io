<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€ğŸ‘§â€ğŸ‘§ ğŸ¤¦ğŸ¾ ğŸ‘©â€ğŸ‘¦ æˆ‘å¦‚ä½•ç¼–å†™æ ‡å‡†çš„C ++ 11åº“ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆboostå¦‚æ­¤ä»¤äººææƒ§ã€‚ ç¬¬4.1ç«  ğŸ‘¨ğŸ½â€ğŸ”¬ ğŸ–ğŸ¾ ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å…ˆå‰éƒ¨åˆ†çš„æ‘˜è¦ 
 ç”±äºä½¿ç”¨C ++ 11ç¼–è¯‘å™¨çš„èƒ½åŠ›å—åˆ°é™åˆ¶ï¼Œå¹¶ä¸”ç”±äºç¼ºä¹æ›¿ä»£æ€§ï¼Œboostå¸Œæœ›åœ¨ç¼–è¯‘å™¨éšé™„çš„C ++ 98 / C ++ 03åº“ä¹‹ä¸Šç¼–å†™è‡ªå·±çš„æ ‡å‡†C ++ 11åº“å®ç°ã€‚ 

 å®ç°äº†static_assert ï¼Œ noexcept ï¼Œ countof ï¼Œå¹¶ä¸”åœ¨è€ƒè™‘äº†æ‰€æœ‰éæ ‡å‡†å®šä¹‰...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æˆ‘å¦‚ä½•ç¼–å†™æ ‡å‡†çš„C ++ 11åº“ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆboostå¦‚æ­¤ä»¤äººææƒ§ã€‚ ç¬¬4.1ç« </h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417547/"><img src="https://habrastorage.org/webt/lr/zq/if/lrzqifvfeajppx2fdvqbxnwf4ce.png" alt="æˆ‘ä»¬ç»§ç»­å†’é™©ã€‚" width="300" height="350" align="left"><h3> å…ˆå‰éƒ¨åˆ†çš„æ‘˜è¦ </h3><br> ç”±äºä½¿ç”¨C ++ 11ç¼–è¯‘å™¨çš„èƒ½åŠ›å—åˆ°é™åˆ¶ï¼Œå¹¶ä¸”ç”±äºç¼ºä¹æ›¿ä»£æ€§ï¼Œboostå¸Œæœ›åœ¨ç¼–è¯‘å™¨éšé™„çš„C ++ 98 / C ++ 03åº“ä¹‹ä¸Šç¼–å†™è‡ªå·±çš„æ ‡å‡†C ++ 11åº“å®ç°ã€‚ <br><br>  <b>å®ç°äº†static_assert</b> ï¼Œ <b>noexcept</b> ï¼Œ <b>countof</b> ï¼Œå¹¶ä¸”åœ¨è€ƒè™‘äº†æ‰€æœ‰éæ ‡å‡†å®šä¹‰å’Œç¼–è¯‘å™¨åŠŸèƒ½ä¹‹åï¼Œå‡ºç°äº†æœ‰å…³å½“å‰ç¼–è¯‘å™¨æ”¯æŒçš„åŠŸèƒ½çš„ä¿¡æ¯ã€‚  <b>åŒ…å«äº†</b>è‡ªå·±çš„<b>nullptr</b>å®ç°ï¼Œè¯¥å®ç°åœ¨ç¼–è¯‘é˜¶æ®µé€‰æ‹©ã€‚ <br><br> ç°åœ¨æ˜¯ä½¿ç”¨<b>type_traits</b>å’Œæ‰€æœ‰è¿™äº›â€œç‰¹æ®Šæ¨¡æ¿é­”æœ¯â€çš„æ—¶å€™äº†ã€‚ <br><br> é“¾æ¥åˆ°GitHubï¼Œä¸ºä¸è€çƒ¦çš„è¯»è€…å’Œéè¯»è€…æä¾›ä»Šå¤©çš„ç»“æœï¼š <br><br><blockquote>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¬¢è¿æœ‰å»ºè®¾æ€§çš„æ‰¹è¯„å’Œæ‰¹è¯„</a></b> </blockquote><br> å°†è‡ªå·±æ²‰æµ¸åœ¨â€œæ¨¡æ¿é­”æœ¯â€ C ++çš„ä¸–ç•Œä¸­ã€‚ <br><a name="habracut"></a><br><h4> ç›®å½• </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¼•è¨€</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬1ç« ã€‚Viam supervadet vadens</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬2ç« ã€‚#ifndef __CPP11_SUPPORT__ï¼ƒå®šä¹‰__COMPILER_SPECIFIC_BUILT_IN_AND_MACRO_HELL__ #endif</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬3ç« ã€‚æ‰¾åˆ°ç†æƒ³çš„nullptrå®ç°</a> <br>  <b>ç¬¬4ç« C ++æ¨¡æ¿é­”æœ¯</b> <br>  .... <b>4.1æˆ‘ä»¬ä»å°å¤„ç€æ‰‹</b> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.2å…³äºæ—¥å¿—ä¸ºæˆ‘ä»¬ç¼–è¯‘äº†å¤šå°‘ä¸ªå¥‡è¿¹èˆ¬çš„é”™è¯¯</a> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.3æŒ‡é’ˆå’Œæ‰€æœ‰æ‰€æœ‰</a> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.4æ¨¡æ¿åº“è¿˜éœ€è¦ä»€ä¹ˆ</a> <br> ç¬¬äº”ç«  <br>  ... <br><br><h3> ç¬¬4ç« C ++æ¨¡æ¿é­”æœ¯ </h3><br> å®Œæˆäº†C ++ 11å…³é”®å­—ä»¥åŠå®ƒä»¬çš„å®ç°ä¹‹é—´çš„æ‰€æœ‰ä¾èµ–å®šä¹‰çš„â€œå¼€å…³â€ä¹‹åï¼Œæˆ‘å¼€å§‹å¡«å†™<b>type_traits</b> ã€‚ å®é™…ä¸Šï¼Œæˆ‘å·²ç»æœ‰å¾ˆå¤šç±»ä¼¼äºæ ‡å‡†æ¨¡æ¿ç±»çš„æ¨¡æ¿ç±»ï¼Œå®ƒä»¬å·²ç»åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†å¾ˆé•¿æ—¶é—´ï¼Œå› æ­¤ä»ç„¶éœ€è¦å°†æ‰€æœ‰è¿™äº›éƒ½ä»¥ç›¸åŒçš„å½¢å¼å‘ˆç°ï¼Œå¹¶æ·»åŠ ç¼ºå°‘çš„åŠŸèƒ½ã€‚ <br><br><img src="https://habrastorage.org/webt/g_/vn/rg/g_vnrg9in04st7-ysvmivnbablo.png" alt="å›¾ç‰‡" width="300" height="200" align="left"> è€å®è¯´ï¼Œæˆ‘å—åˆ°æ¨¡æ¿ç¼–ç¨‹çš„å¯å‘ã€‚ å°¤å…¶æ˜¯æ„è¯†åˆ°æ‰€æœ‰è¿™äº›éƒ½æ˜¯å¤šç§é€‰æ‹©çš„ï¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ‰§è¡Œè®¡ç®—ï¼Œä»£ç åˆ†æ”¯ï¼Œæ¡ä»¶ï¼Œé”™è¯¯æ£€æŸ¥ï¼Œè€Œåœ¨æ‰§è¡Œé˜¶æ®µåˆ™ä¸èŠ±ä»»ä½•ä»£ä»·æœ€ç»ˆç¨‹åºã€‚ å¹¶ä¸”ç”±äºC ++ä¸­çš„æ¨¡æ¿æœ¬è´¨ä¸Šæ˜¯ä¸€ç§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å›¾çµå®Œå¤‡çš„ç¼–ç¨‹è¯­è¨€</a> ï¼Œæ‰€ä»¥æˆ‘æœŸå¾…ç€å®ç°ä¸æ¨¡æ¿ç¼–ç¨‹ç›¸å…³çš„æ ‡å‡†éƒ¨åˆ†çš„ä¼˜é›…å’Œç›¸å¯¹å®¹æ˜“ã€‚ ä½†æ˜¯ï¼Œä¸ºäº†ç«‹å³æ¶ˆé™¤æ‰€æœ‰å¹»æƒ³ï¼Œæˆ‘å°†è¯´æ•´ä¸ªå›¾çµå®Œæ•´æ€§ç†è®ºè¢«åˆ†è§£ä¸ºç¼–è¯‘å™¨ä¸­æ¨¡æ¿çš„å…·ä½“å®ç°ã€‚ è€Œç¼–å†™åº“çš„è¿™ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆå’Œæ¨¡æ¿ç¼–ç¨‹çš„â€œæŠ€å·§â€ï¼Œå˜æˆäº†ä¸ç¼–è¯‘å™¨çš„æ¿€çƒˆæ–—äº‰ï¼Œè€Œæ¯ä¸ªäººéƒ½ä»¥è‡ªå·±çš„æ–¹å¼â€œå´©æºƒâ€äº†ï¼Œå¦‚æœå®ƒé™·å…¥äº†ä¸¥é‡çš„å†…éƒ¨ç¼–è¯‘å™¨é”™è¯¯ï¼Œæˆ–è€…ç”šè‡³å´©æºƒäº†ï¼Œé‚£å°±å¾ˆå¥½äº†ã€‚æœªå¤„ç†çš„å¼‚å¸¸ã€‚  GCCï¼ˆg ++ï¼‰è¡¨ç°å‡ºäº†è‡ªå·±æœ€å¥½çš„ä¸€é¢ï¼Œå®ƒä»é€»è¾‘ä¸Šâ€œå’€åš¼â€äº†æ‰€æœ‰æ¨¡æ¿çš„æ„é€ ï¼Œå¹¶ä¸”ä»…åœ¨ç¼ºå°‘æ˜¾å¼<b>typenameçš„</b>åœ°æ–¹è¯…å’’ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼‰ã€‚ <br><br><h4>  4.1ä»å°åšèµ· </h4><br> æˆ‘ä»ç®€å•çš„æ¨¡æ¿å¼€å§‹ï¼Œåˆ†åˆ«æ˜¯<i>std :: integral_constant</i> ï¼Œ <i>std :: bool_constant</i>å’Œç±»ä¼¼çš„å°æ¨¡æ¿ã€‚ <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Val</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">integral_constant</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// convenient template for integral constant types static const _Tp value = Val; typedef const _Tp value_type; typedef integral_constant&lt;_Tp, Val&gt; type; operator value_type() const { // return stored value return (value); } value_type operator()() const { // return stored value return (value); } }; typedef integral_constant&lt;bool, true&gt; true_type; typedef integral_constant&lt;bool, false&gt; false_type; template&lt;bool Val&gt; struct bool_constant : public integral_constant&lt;bool, Val&gt; {}; // Primary template. // Define a member typedef @c type to one of two argument types. template&lt;bool _Cond, class _Iftrue, class _Iffalse&gt; struct conditional { typedef _Iftrue type; }; // Partial specialization for false. template&lt;class _Iftrue, class _Iffalse&gt; struct conditional&lt;false, _Iftrue, _Iffalse&gt; { typedef _Iffalse type; };</span></span></code> </pre> <br> åŸºäº<i>æ¡ä»¶ï¼Œ</i>æ‚¨å¯ä»¥ä¸ºç±»å‹ä¸Šçš„é€»è¾‘æ“ä½œ{â€œ andâ€ï¼Œâ€œ orâ€ï¼Œâ€œ notâ€}è¾“å…¥æ–¹ä¾¿çš„æ¨¡æ¿ï¼ˆæ‰€æœ‰è¿™äº›æ“ä½œéƒ½åœ¨ç¼–è¯‘é˜¶æ®µå°±è¢«è®¤ä¸ºæ˜¯æ­£ç¡®çš„ï¼è¿™å¾ˆå¥½ï¼Œä¸æ˜¯å—ï¼Ÿï¼‰ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void_type</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-comment"><span class="hljs-comment">//typedef void void_type; template&lt;class _B1 = void_type, class _B2 = void_type, class _B3 = void_type, class _B4 = void_type&gt; struct _or_ : public conditional&lt;_B1::value, _B1, _or_&lt;_B2, _or_&lt;_B3, _B4&gt; &gt; &gt;::type { }; template&lt;&gt; struct _or_&lt;void_type, void_type, void_type, void_type&gt;; template&lt;class _B1&gt; struct _or_&lt;_B1, void_type, void_type, void_type&gt; : public _B1 { }; template&lt;class _B1, class _B2&gt; struct _or_&lt;_B1, _B2, void_type, void_type&gt; : public conditional&lt;_B1::value, _B1, _B2&gt;::type { }; template&lt;class _B1, class _B2, class _B3&gt; struct _or_&lt;_B1, _B2, _B3, void_type&gt; : public conditional&lt;_B1::value, _B1, _or_&lt;_B2, _B3&gt; &gt;::type { }; template&lt;class _B1 = void_type, class _B2 = void_type, class _B3 = void_type, class _B4 = void_type&gt; struct _and_; template&lt;&gt; struct _and_&lt;void_type, void_type, void_type, void_type&gt;; template&lt;class _B1&gt; struct _and_&lt;_B1, void_type, void_type, void_type&gt; : public _B1 { }; template&lt;class _B1, class _B2&gt; struct _and_&lt;_B1, _B2, void_type, void_type&gt; : public conditional&lt;_B1::value, _B2, _B1&gt;::type { }; template&lt;class _B1, class _B2, class _B3&gt; struct _and_&lt;_B1, _B2, _B3, void_type&gt; : public conditional&lt;_B1::value, _and_&lt;_B2, _B3&gt;, _B1&gt;::type { }; template&lt;class _Pp&gt; struct _not_ { static const bool value = !bool(_Pp::value); typedef const bool value_type; typedef integral_constant&lt;bool, _not_::value == bool(true)&gt; type; operator value_type() const { // return stored value return (value); } value_type operator()() const { // return stored value return (value); } }; }</span></span></code> </pre><br><blockquote> è¿™é‡Œæœ‰ä¸‰ç‚¹å€¼å¾—å…³æ³¨ï¼š <br><br>  1ï¼‰åŠ¡å¿…åœ¨æ¨¡æ¿çš„å°–æ‹¬å·ï¼ˆ'&lt;'å’Œ'&gt;'ï¼‰ä¹‹é—´æ”¾ç½®ä¸€ä¸ªç©ºæ ¼ï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºåœ¨C ++ 11ä¹‹å‰ï¼Œæ ‡å‡†ä¸­å°šæ— å…³äºå¦‚ä½•è§£é‡Š<i>_or _ &lt;_ B2</i>ç­‰ä»£ç ä¸­çš„'&gt;&gt;'å’Œ'&lt;&lt;'çš„è¯´æ˜<i>ï¼Œ _æˆ–_ &lt;_ B3ï¼Œ_B4 &gt;&gt;</i> ï¼Œå› æ­¤å‡ ä¹æ‰€æœ‰ç¼–è¯‘å™¨éƒ½å°†å…¶è§†ä¸ºç§»ä½è¿ç®—ç¬¦ï¼Œè¿™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚ <br><br>  2ï¼‰åœ¨æŸäº›ç¼–è¯‘å™¨ï¼ˆä¾‹å¦‚Visual Studio 6.0ï¼‰ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªé”™è¯¯ï¼Œè¯¥é”™è¯¯åœ¨äºæ— æ³•å°†<b>void</b>ç±»å‹ç”¨ä½œæ¨¡æ¿å‚æ•°ã€‚ ä¸ºæ­¤ï¼Œåœ¨ä¸Šé¢çš„æ®µè½ä¸­å¼•å…¥äº†ä¸€ä¸ªå•ç‹¬çš„<i>void_type</i>ç±»å‹ï¼Œä»¥æ›¿æ¢éœ€è¦é»˜è®¤æ¨¡æ¿å‚æ•°å€¼çš„<b>void</b>ç±»å‹ã€‚ <br><br>  3ï¼‰éå¸¸è€çš„ç¼–è¯‘å™¨ï¼ˆä¾‹å¦‚ï¼ŒBorland C ++ Builderï¼‰å…·æœ‰å¼¯æ›²çš„å®ç°ç±»å‹<b>bool</b> ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¯¥ç±»å‹çªç„¶â€œè½¬å˜â€ä¸º<b>int</b> ï¼ˆ <b>true-</b> &gt; 1ï¼Œ <b>false-</b> &gt; 0ï¼‰ï¼Œä»¥åŠè¯¥ç±»å‹çš„å¸¸é‡é™æ€å˜é‡ç±»å‹<b>bool</b> ï¼ˆä¸ä»…é™äºå®ƒä»¬ï¼‰ï¼Œå¦‚æœå®ƒä»¬åŒ…å«åœ¨æ¨¡æ¿ç±»ä¸­ã€‚ ç”±äºæ‰€æœ‰è¿™äº›æ··ä¹±ï¼Œå› æ­¤ï¼Œå¯¹äº<i>my_template_type :: static_bool_value == <b>false</b></i>æ ·å¼çš„å®Œå…¨æ— å®³çš„æ¯”è¾ƒ<i><b>ï¼Œ</b></i>ç¼–è¯‘å™¨å¯ä»¥è½»æ¾åœ°å‘å‡º<i>æ— æ³•å°†'undefined type'</i> <i>å¼ºåˆ¶è½¬æ¢</i> <i>ä¸ºintï¼ˆ0ï¼‰ä¹‹ç±»</i>çš„<i>é™„é­”</i> ã€‚ å› æ­¤ï¼Œæœ‰å¿…è¦å§‹ç»ˆå°è¯•æ˜ç¡®æŒ‡å‡ºè¦æ¯”è¾ƒçš„å€¼çš„ç±»å‹ï¼Œä»è€Œå¸®åŠ©ç¼–è¯‘å™¨ç¡®å®šå…¶å¤„ç†çš„ç±»å‹ã€‚ </blockquote><br><br> ä½¿ç”¨<b>const</b>å’Œ<b>volatile</b>å€¼æ·»åŠ æ›´å¤šå·¥ä½œã€‚ é¦–å…ˆï¼Œç®€å•åœ°å®ç°<i>remove_</i> ...ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åªæ˜¯ç®€å•åœ°å¯¹æŸäº›ç±»å‹ä¿®é¥°ç¬¦è¿›è¡Œæ¨¡æ¿ä¸“ç”¨åŒ–-å¦‚æœç±»å‹å¸¦æœ‰ä¿®é¥°ç¬¦ï¼Œåˆ™ç¼–è¯‘å™¨å¿…é¡»åœ¨æŸ¥çœ‹äº†æ¨¡æ¿çš„æ‰€æœ‰ç‰¹å®šæ€§ï¼ˆä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Šä¸€ç« ä¸­</a>å›é¡¾äº†SFINAEåŸç†ï¼‰åï¼Œé€‰æ‹©æœ€åˆé€‚çš„ï¼ˆæ˜ç¡®æŒ‡å‡ºäº†æ‰€éœ€çš„ä¿®é¥°ç¬¦ï¼‰ ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">remove_const</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// remove top level const qualifier typedef _Tp type; }; template&lt;class _Tp&gt; struct remove_const&lt;const _Tp&gt; { // remove top level const qualifier typedef _Tp type; }; template&lt;class _Tp&gt; struct remove_const&lt;const volatile _Tp&gt; { // remove top level const qualifier typedef volatile _Tp type; }; // remove_volatile template&lt;class _Tp&gt; struct remove_volatile { // remove top level volatile qualifier typedef _Tp type; }; template&lt;class _Tp&gt; struct remove_volatile&lt;volatile _Tp&gt; { // remove top level volatile qualifier typedef _Tp type; }; // remove_cv template&lt;class _Tp&gt; struct remove_cv { // remove top level const and volatile qualifiers typedef typename remove_const&lt;typename remove_volatile&lt;_Tp&gt;::type&gt;::type type; };</span></span></code> </pre><br> ç„¶åæˆ‘ä»¬å®ç°<i>add_</i>æ¨¡æ¿...ä¸€åˆ‡éƒ½å·²ç»æœ‰äº›å¤æ‚äº†ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bool</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsFunction</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_const_helper</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_const_helper</span></span></span><span class="hljs-class">&lt;_Tp, true&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bool</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsFunction</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_volatile_helper</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_volatile_helper</span></span></span><span class="hljs-class">&lt;_Tp, true&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bool</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsFunction</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_cv_helper</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_cv_helper</span></span></span><span class="hljs-class">&lt;_Tp, true&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp type; }; } <span class="hljs-comment"><span class="hljs-comment">// add_const template&lt;class _Tp&gt; struct add_const: public detail::_add_const_helper&lt;_Tp, is_function&lt;_Tp&gt;::value&gt; { }; template&lt;class _Tp&gt; struct add_const&lt;_Tp&amp;&gt; { typedef _Tp &amp; type; }; // add_volatile template&lt;class _Tp&gt; struct add_volatile : public detail::_add_volatile_helper&lt;_Tp, is_function&lt;_Tp&gt;::value&gt; { }; template&lt;class _Tp&gt; struct add_volatile&lt;_Tp&amp;&gt; { typedef _Tp &amp; type; }; // add_cv template&lt;class _Tp&gt; struct add_cv : public detail::_add_cv_helper&lt;_Tp, is_function&lt;_Tp&gt;::value&gt; { }; template&lt;class _Tp&gt; struct add_cv&lt;_Tp&amp;&gt; { typedef _Tp &amp; type; };</span></span></code> </pre><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»”ç»†åœ°åˆ†åˆ«å¤„ç†å¼•ç”¨ç±»å‹ï¼Œä»¥å…ä¸¢å¤±é“¾æ¥ã€‚ åŒæ ·ï¼Œæˆ‘ä»¬ä¸ä¼šå¿˜è®°åŸåˆ™ä¸Šä¸å¯èƒ½ä½¿<b>volatile</b>æˆ–<b>const</b>æˆä¸ºå¯èƒ½çš„å‡½æ•°ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬å°†å®ƒä»¬ä¿æŒâ€œåŸæ ·â€ã€‚ æˆ‘å¯ä»¥è¯´æ‰€æœ‰è¿™äº›çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œä½†æ˜¯å½“â€œé­”é¬¼åœ¨ç»†èŠ‚ä¸­â€ï¼Œæˆ–è€…â€œé”™è¯¯åœ¨å®ç°çš„ç»†èŠ‚ä¸­â€æ—¶ï¼Œæƒ…å†µå°±æ˜¯è¿™æ ·ã€‚ <br><br> ç¬¬å››ç« ç¬¬ä¸€éƒ¨åˆ†ç»“æŸã€‚ åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†ä¸­ï¼Œ</a>æˆ‘å°†è®¨è®ºå¦‚ä½•å¯¹ç¼–è¯‘å™¨è¿›è¡Œç¡¬æ¨¡æ¿ç¼–ç¨‹ï¼Œå¹¶ä¸”è¿˜ä¼šæœ‰æ›´å¤šå¾ˆæ£’çš„æ¨¡æ¿é­”æœ¯ã€‚ å—¯ï¼Œä½†æ˜¯-æ ¹æ®å½“ä»Šçš„ä¸€äº›ç¼–è¯‘å™¨<b>ï¼Œ</b>ä¸ºä»€ä¹ˆ<b>é•¿ä¹…ä»¥æ¥</b>éƒ½ä¸æ˜¯<b>æ•´æ•°å¸¸æ•°</b> ã€‚ <br><br> è°¢è°¢æ‚¨çš„å…³æ³¨ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN417547/">https://habr.com/ru/post/zh-CN417547/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN417537/index.html">â€œæ‚¨çš„æ¸¸æˆå¾ˆæ— èŠâ€ï¼Œæˆ–è€…å¦‚ä½•æé«˜ç¬¬ä¸€å¤©å·²ç»å¾ˆé«˜çš„ä¿ç•™ç‡</a></li>
<li><a href="../zh-CN417539/index.html">è°·æ­Œå› è¿åæ¬§æ´²åæ‰˜æ‹‰æ–¯æ³•è¢«ç½šæ¬¾50äº¿ç¾å…ƒ</a></li>
<li><a href="../zh-CN417541/index.html">ä¸ç¾å›½å›½å®¶èˆªç©ºèˆªå¤©å±€ï¼ˆNASAï¼‰é£è¡Œæ§åˆ¶ä¸­å¿ƒæ•°å­—åŒ–çš„é˜¿æ³¢ç½—é£è¡Œä»»åŠ¡è®°å½•</a></li>
<li><a href="../zh-CN417543/index.html">ä¸€åä¸­å›½å¤§å­¦ç”Ÿå› å…¶çˆ¶äº²çš„ä½â€œç¤¾ä¼šç­‰çº§â€è€Œå‡ ä¹è¢«å¼€é™¤ã€‚</a></li>
<li><a href="../zh-CN417545/index.html">ä¿¡æ¯æŠ€æœ¯æœ‰å…¶ç‰¹æ®Šçš„æ°›å›´ã€‚</a></li>
<li><a href="../zh-CN417549/index.html">é—®ä¼Šæ£®ï¼šæ•´ä¸ªä¸å¯è§‚å¯Ÿçš„å®‡å®™æœ‰å¤šå¤§ï¼Ÿ</a></li>
<li><a href="../zh-CN417551/index.html">CRISPRå€¡å¯¼å¹³ç­‰è®¿é—®åŸºå› ç¼–è¾‘</a></li>
<li><a href="../zh-CN417553/index.html">å…¬å¼€ç½‘ç»œç ”è®¨ä¼šâ€œ CSSé¢„å¤„ç†ç¨‹åºâ€</a></li>
<li><a href="../zh-CN417555/index.html">è«æ–¯ç§‘ä¸¾è¡Œè´§è¿å´‡æ‹œç ”è®¨ä¼šï¼šè¥é”€åå‡»</a></li>
<li><a href="../zh-CN417557/index.html">æ¿€å…‰æ•°æ§æœºåºŠæ¦‚è¿°LaserSolid</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>