<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСМЁЯП╝ ЁЯСйЁЯП┐тАНтЬИя╕П ЁЯРи Tidyr рдкреИрдХреЗрдЬ рдФрд░ рдЙрд╕рдХреЗ рдирдП pivot_longer рдФрд░ pivot_wider рдлрд╝рдВрдХреНрд╢рдВрд╕ ЁЯСитАНЁЯФм ЁЯХг ЁЯЦ▓я╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tidyr рдкреИрдХреЗрдЬ рдЖрд░ рднрд╛рд╖рд╛ рдХреЗ рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЗ рдореВрд▓ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ - tidyverse ред 
 рдкреИрдХреЗрдЬ рдХрд╛ рдореБрдЦреНрдп рдЙрджреНрджреЗрд╢реНрдп рдбреЗрдЯрд╛ рдХреЛ рдПрдХ рд╕рд╛рдл рдЙрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ рд▓рд╛рди...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tidyr рдкреИрдХреЗрдЬ рдФрд░ рдЙрд╕рдХреЗ рдирдП pivot_longer рдФрд░ pivot_wider рдлрд╝рдВрдХреНрд╢рдВрд╕</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444622/"><p>  <strong>Tidyr</strong> рдкреИрдХреЗрдЬ рдЖрд░ рднрд╛рд╖рд╛ рдХреЗ рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЗ рдореВрд▓ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ - <strong>tidyverse</strong> ред <br>  рдкреИрдХреЗрдЬ рдХрд╛ рдореБрдЦреНрдп рдЙрджреНрджреЗрд╢реНрдп рдбреЗрдЯрд╛ рдХреЛ рдПрдХ рд╕рд╛рдл рдЙрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ рд▓рд╛рдирд╛ рд╣реИред </p><br><p>  Habr├й рдкрд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕ рдкреИрдХреЗрдЬ рдХреЛ рд╕рдорд░реНрдкрд┐рдд рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рдХрд╛рд╢рди рд╣реИ</a> , рд▓реЗрдХрд┐рди рдпрд╣ 2015 рддрдХ рд╡рд╛рдкрд╕ рдЖрддрд╛ рд╣реИред  рдФрд░ рдореИрдВ рдЖрдкрдХреЛ рд╕рдмрд╕реЗ рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рдЬреЛ рдХрдИ рджрд┐рдиреЛрдВ рдкрд╣рд▓реЗ рдЗрд╕рдХреЗ рд▓реЗрдЦрдХ рд╣реЗрдбрд▓реА рд╡рд┐рдХрдо рдиреЗ рдШреЛрд╖рдгрд╛ рдХреА рдереАред </p><br><img src="https://habrastorage.org/getpro/habr/post_images/21a/cf9/6f5/21acf96f56c9b005b125708f5b122a2b.png" alt="рдЫрд╡рд┐"><br><blockquote> <b>SJK</b> : <b>рдХреНрдпрд╛</b> рдЗрдХрдЯреНрдард╛ () рдФрд░ рдкреНрд░рд╕рд╛рд░ () рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдкрджрд╛рд╡рдирдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛? <br><br>  <b>рд╣реИрдбрд▓реА рд╡рд┐рдХрдо</b> : рдХреБрдЫ рд╣рдж рддрдХред  рд╣рдо рдЗрди рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдФрд░ рдЙрдирдореЗрдВ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╕реБрдзрд╛рд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рдирд╛ рдмрдВрдж рдХрд░ рджреЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рд╡реЗ рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдкреИрдХреЗрдЬ рдореЗрдВ рдореМрдЬреВрдж рд░рд╣реЗрдВрдЧреЗред </blockquote><a name="habracut"></a><br><h2 id="soderzhanie">  рд╕рд╛рдордЧреНрд░реА </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЯрд┐рдбреНрдбрд╛рдЯрд╛ рдХреЙрдиреНрд╕реЗрдкреНрдЯ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЯрд┐рдбрд┐рдпрд░ рдкреИрдХреЗрдЬ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдореБрдЦреНрдп рдХрд╛рд░реНрдп</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдкреНрд░рд╛рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдиреЗ рдХреА рдирдИ рдЕрд╡рдзрд╛рд░рдгрд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Tidyr 0.8.3.9000 рдХрд╛ рд╕рдмрд╕реЗ рд╡рд░реНрддрдорд╛рди рд╕рдВрд╕реНрдХрд░рдг рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдирдИ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдкреНрд░рд╛рд░реВрдк рд╕реЗ рдПрдХ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдбреЗрдЯрд╛ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдирд┐рд░реНрджреЗрд╢</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрдИ рдореВрд▓реНрдпреЛрдВ (.value) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯрддрд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реЙрдиреНрдЧ рд╡рд╛рдЗрдб рд╕реЗ рд╡рд╛рдЗрдб рдлреНрд░реЗрдореНрд╕ рдХреЛ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдирд╛</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдХрд╛рд╕реНрдЯрд┐рдВрдЧ рдХрд╛ рд╕рдмрд╕реЗ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХрд╛рдзрд┐рдХ рд╕реНрд░реЛрдд рдЪрд░ рд╕реЗ рд╕реНрддрдВрдн рдирд╛рдо рдмрдирд╛рдирд╛</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдирдИ tidyr рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдХреБрдЫ рдЙрдиреНрдирдд рдЙрджрд╛рд╣рд░рдг</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдореЗрд░рд┐рдХреА рд░рд╛рдЬрд╕реНрд╡ рдФрд░ рдХрд┐рд░рд╛рдпреЗ рдХреА рдЬрдирдЧрдгрдирд╛ рдбреЗрдЯрд╛рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╕рд╛рдл рдЙрдкрд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рд▓рд╛рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рд╢реНрд╡ рдмреИрдВрдХ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдВрдкрд░реНрдХ рд╕реВрдЪреА</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдирд┐рд╖реНрдХрд░реНрд╖</a> </li></ul><br><h2 id="koncepciya-tidydata">  рдЯрд┐рдбреНрдбрд╛рдЯрд╛ рдХреЙрдиреНрд╕реЗрдкреНрдЯ </h2><br><p>  <strong>Tidyr</strong> рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдЖрдкрдХреЛ рдбреЗрдЯрд╛ рдХреЛ рддрдерд╛рдХрдерд┐рдд рд╕реНрд╡рдЪреНрдЫ рдЙрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ рд▓рд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рдирд╛ рд╣реИред  рд╕рдЯреАрдХ рдбреЗрдЯрд╛ рд╡рд╣ рдбреЗрдЯрд╛ рд╣реИ рдЬрд╣рд╛рдВ: </p><br><ul><li>  рдкреНрд░рддреНрдпреЗрдХ рдЪрд░ рдПрдХ рдХреЙрд▓рдо рдореЗрдВ рд╣реИред </li><li>  рдкреНрд░рддреНрдпреЗрдХ рдЕрд╡рд▓реЛрдХрди рдПрдХ рдкрдВрдХреНрддрд┐ рд╣реИред </li><li>  рдкреНрд░рддреНрдпреЗрдХ рдорд╛рди рдПрдХ рд╕реЗрд▓ рд╣реИред </li></ul><br><p>  рдбреЗрдЯрд╛ рдХреЛ рд╕реБрд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджрд┐рдпрд╛ рдЧрдпрд╛ рдбреЗрдЯрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рджреМрд░рд╛рди рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕рд░рд▓ рдФрд░ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред </p><br><h2 id="osnovnye-funkcii-vhodyaschie-v-paket-tidyr">  рдЯрд┐рдбрд┐рдпрд░ рдкреИрдХреЗрдЬ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдореБрдЦреНрдп рдХрд╛рд░реНрдп </h2><br><p>  рдЯреЗрдмрд▓ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП tidyr рдореЗрдВ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ: </p><br><ul><li> <code>fill()</code> - рдкрд┐рдЫрд▓реЗ рдорд╛рдиреЛрдВ рдХреЗ рд╕рд╛рде рдХреЙрд▓рдо рдореЗрдВ рдЕрдиреБрдкрд▓рдмреНрдз рдорд╛рдиреЛрдВ рдХреЛ рднрд░рдирд╛; </li><li>  <code>separate()</code> - рдПрдХ рд╡рд┐рднрд╛рдЬрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрдИ рдореЗрдВ рдПрдХ рдХреНрд╖реЗрддреНрд░ рдХреЛ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рддрд╛ рд╣реИ; </li><li>  <code>unite()</code> - рдПрдХ рдореЗрдВ рдХрдИ рдлрд╝реАрд▓реНрдбреНрд╕ рдХреЗ рд╕рдВрдпреЛрдЬрди рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд░рддрд╛ рд╣реИ, <code>separate()</code> рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрд▓рдЯрд╛; </li><li>  <code>pivot_longer()</code> - рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдЬреЛ рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдкреНрд░рд╛рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ рдПрдХ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИ; </li><li>  <code>pivot_wider()</code> - рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдЬреЛ рдбреЗрдЯрд╛ рдХреЛ рдПрдХ рд▓рдВрдмреЗ рдкреНрд░рд╛рд░реВрдк рд╕реЗ рд╡рд┐рд╕реНрддреГрдд рдПрдХ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИред  рдСрдкрд░реЗрд╢рди <code>pivot_longer()</code> рдлрд╝рдВрдХреНрд╢рди рджреНрд╡рд╛рд░рд╛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХреЗ рд╡рд┐рдкрд░реАрдд рд╣реИред </li><li>  <code>gather()</code> <strong>рдкрджрд╛рд╡рдирдд</strong> - рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдЬреЛ рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдкреНрд░рд╛рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ рдПрдХ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИ; </li><li>  <code>spread()</code> <strong>рдкрджрд╛рд╡рдирдд</strong> - рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдЬреЛ рдПрдХ рд▓рдВрдмреЗ рдкреНрд░рд╛рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ рд╡рд┐рд╕реНрддреГрдд рд░реВрдк рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИред  <code>gather()</code> рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрд▓реНрдЯрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд░рддрд╛ рд╣реИред </li></ul><br><h2 id="novaya-koncepciya-preobrazovaniya-dannyh-iz-shirokogo-formata-v-dlinnyy-i-naoborot">  рд╡реНрдпрд╛рдкрдХ рдкреНрд░рд╛рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ рд▓рдВрдмреЗ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдиреЗ рдХреА рдирдИ рдЕрд╡рдзрд╛рд░рдгрд╛ рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд </h2><br><p>  рдкрд╣рд▓реЗ, рдЗрд╕ рддрд░рд╣ рдХреЗ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рдВрд╕ <code>gather()</code> рдФрд░ <code>spread()</code> рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ <code>spread()</code> ред  рдЗрди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдЕрд╕реНрддрд┐рддреНрд╡ рдХреЗ рд╡рд░реНрд╖реЛрдВ рдореЗрдВ, рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП, рдкреИрдХреЗрдЬ рдХреЗ рд▓реЗрдЦрдХ рд╕рд╣рд┐рдд, рдЗрди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдирд╛рдо рдФрд░ рдЙрдирдХреЗ рддрд░реНрдХ рдХрд╛рдлреА рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рдереЗ, рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЦреЛрдЬрдиреЗ рдФрд░ рд╕рдордЭрдиреЗ рдореЗрдВ рдХрдард┐рдирд╛рдЗрдпреЛрдВ рдХрд╛ рдХрд╛рд░рдг рдмрдирд╛ рдХрд┐ рдЗрдирдореЗрдВ рд╕реЗ рдХреМрди рд╕рд╛ рдХрд╛рд░реНрдп рд╡реНрдпрд╛рдкрдХ рд░реВрдк рд╕реЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдХреА рддрд╛рд░реАрдЦ рдХреЗ рдлреНрд░реЗрдо рдХреЛ рд▓рд╛рддрд╛ рд╣реИред рдкреНрд░рд╛рд░реВрдк рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрддред </p><br><p>  рдЗрд╕ рд╕рдВрдмрдВрдз рдореЗрдВ, рджреЛ рдирдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХрд╛рд░реНрдпреЛрдВ рдХреЛ <strong>tidyr</strong> рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ <strong>рдерд╛</strong> , рдЬреЛ рдХрд┐ рджрд┐рдирд╛рдВрдХ рдлрд╝реНрд░реЗрдо рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдП рдЧрдП рд╣реИрдВред </p><br><p>  рдирдП рдХрд╛рд░реНрдп <code>pivot_longer()</code> рдФрд░ <code>pivot_wider()</code> рдЬреЙрди рдорд╛рдЙрдВрдЯ рдФрд░ рдиреАрдирд╛ рдЬрд╝реБрдореЗрд▓ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдП рдЧрдП <strong>cdata</strong> рдкреИрдХреЗрдЬ рдореЗрдВ рдХреБрдЫ рдХрд╛рд░реНрдпреЛрдВ рд╕реЗ рдкреНрд░реЗрд░рд┐рдд рдереЗред </p><br><h3 id="ustanovka-naibolee-aktualnoy-versii-tidyr-0839000">  Tidyr 0.8.3.9000 рдХрд╛ рд╕рдмрд╕реЗ рд╡рд░реНрддрдорд╛рди рд╕рдВрд╕реНрдХрд░рдг рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ </h3><br><p>  <strong>Tidyr 0.8.3.9000</strong> <em>рдкреИрдХреЗрдЬ</em> рдХрд╛ рдирдпрд╛, рд╡рд░реНрддрдорд╛рди рд╕рдВрд╕реНрдХрд░рдг рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЬрд┐рд╕рдореЗрдВ рдирдП рдлрд╝рдВрдХреНрд╢рди рдЙрдкрд▓рдмреНрдз рд╣реИрдВ, рдирд┐рдореНрди рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </p><br><p> <code>devtools::install_github("tidyverse/tidyr")</code> </p> <br><p>  рд▓реЗрдЦрди рдХреЗ рд╕рдордп, рдпреЗ рдлрд╝рдВрдХреНрд╢рди рдХреЗрд╡рд▓ GitHub рдкрд░ рдкреИрдХреЗрдЬ рдХреЗ рджреЗрд╡ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИрдВред </p><br><h3 id="perehod-na-novye-funkcii">  рдирдИ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ </h3><br><p>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдирдП рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреБрд░рд╛рдиреА рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рд╣реИ, рдмреЗрд╣рддрд░ рд╕рдордЭ рдХреЗ рд▓рд┐рдП, рдореИрдВ рдкреБрд░рд╛рдиреЗ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХреЗ рдкреНрд░рд▓реЗрдЦрди рд╕реЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд▓реВрдВрдЧрд╛ рдФрд░ рдпрд╣ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рдирдП <code>pivot_*()</code> рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдпреЗ рд╕рдорд╛рди рд╕рдВрдЪрд╛рд▓рди рдХреИрд╕реЗ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред </p><br><p>  рд╡рд┐рд╕реНрддреГрдд рдХреЛ рд▓рдВрдмреЗ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдмрджрд▓реЗрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдирдореВрдирд╛ рдХреЛрдб рдЗрдХрдЯреНрдард╛ рд╕рдорд╛рд░реЛрд╣ рдкреНрд░рд▓реЗрдЦрди рд╕реЗ</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"># example library(dplyr) stocks &lt;- data.frame( time = as.Date('2009-01-01') + 0:9, X = rnorm(10, 0, 1), Y = rnorm(10, 0, 2), Z = rnorm(10, 0, 4) ) # old stocks_gather &lt;- stocks %&gt;% gather(key = stock, value = price, -time) # new stocks_long &lt;- stocks %&gt;% pivot_longer(cols = -time, names_to = "stock", values_to = "price")</code> </pre></div></div><br><p>  рдПрдХ рд▓рдВрдмреЗ рдкреНрд░рд╛рд░реВрдк рдХреЛ рд╡реНрдпрд╛рдкрдХ рд░реВрдк рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдирд╛ред </p><br><div class="spoiler">  <b class="spoiler_title">рдкреНрд░рд╕рд╛рд░ рдлрд╝рдВрдХреНрд╢рди рдкреНрд░рд▓реЗрдЦрди рд╕реЗ рдирдореВрдирд╛ рдХреЛрдб</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"># old stocks_spread &lt;- stocks_gather %&gt;% spread(key = stock, value = price) # new stock_wide &lt;- stocks_long %&gt;% pivot_wider(names_from = "stock", values_from = "price")</code> </pre></div></div><br><p>  рдХреНрдпреЛрдВрдХрд┐  рд╕реНрд░реЛрдд рддрд╛рд▓рд┐рдХрд╛ <em>рд╕реНрдЯреЙрдХ</em> рдореЗрдВ <code>pivot_longer()</code> рдФрд░ <code>pivot_wider()</code> рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдЙрдкрд░реЛрдХреНрдд рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ, <em>names_to</em> рдФрд░ <em>рдорд╛рди_to рддрд░реНрдХреЛрдВ</em> рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рдХреЛрдИ рдХреЙрд▓рдо рдирд╣реАрдВ рд╣реИрдВ <em>,</em> рдЙрдирдХреЗ рдирд╛рдореЛрдВ рдХреЛ рдЙрджреНрдзрд░рдг рдЪрд┐рд╣реНрдиреЛрдВ рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рд╡рд╣ рддрд╛рд▓рд┐рдХрд╛ рдЬрд┐рд╕рдХреА рд╕рд╣рд╛рдпрддрд╛ рд╕реЗ рдЖрдк рд╕рдмрд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛ <strong>рдкрд╛рдПрдВрдЧреЗ</strong> рдХрд┐ рдирдИ <strong>рдЯрд┐рдбрд░</strong> рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ рд╕реНрд╡рд┐рдЪ рдХрд┐рдпрд╛ <strong>рдЬрд╛рдП</strong> ред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/127/fc7/70a/127fc770a8175c98168864954e498199.png" alt="рдЫрд╡рд┐"></p><br><h2 id="primechanie-ot-avtora">  рд▓реЗрдЦрдХ рд╕реЗ рдзреНрдпрд╛рди рджреЗрдВ </h2><br><blockquote>  рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рд╕рднреА рдкрд╛рда рдЕрдиреБрдХреВрд▓реА рд╣реИрдВ, рдореИрдВ рднреА рд╕рд╛рдл-рд╕реБрдерд░реЗ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреА рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕рд╛рдЗрдЯ рд╕реЗ рд╡рд┐рдЧрдиреЗрдЯ рдХрд╛ рдореБрдлреНрдд рдЕрдиреБрд╡рд╛рдж рдХрд╣реВрдВрдЧрд╛ред </blockquote><br><h2 id="prostoy-primer-preobrazovaniya-dannyh-iz-shirokogo-formata-v-dlinnyy">  рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдкреНрд░рд╛рд░реВрдк рд╕реЗ рдПрдХ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдбреЗрдЯрд╛ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг </h2><br><p>  <code>pivot_longer ()</code> - рд╕реНрддрдВрднреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдШрдЯрд╛рдХрд░ рдФрд░ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝рд╛рдХрд░ рдбреЗрдЯрд╛ рд╕реЗрдЯ рдХреЛ рд▓рдВрдмрд╛ рдмрдирд╛рддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/760/8bb/c5d/7608bbc5d0873682bb5cb8ad3fb9857e.png" alt="рдЫрд╡рд┐"></p><br><p>  рд▓реЗрдЦ рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рдЖрд╡рд╢реНрдпрдХ рдкреИрдХреЗрдЬреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛: </p><br><pre> <code class="plaintext hljs">library(tidyr) library(dplyr) library(readr)</code> </pre> <br><p>  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рд╕рд░реНрд╡реЗрдХреНрд╖рдг рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ (рдЕрдиреНрдп рдмрд╛рддреЛрдВ рдХреЗ рдЕрд▓рд╛рд╡рд╛) рд▓реЛрдЧреЛрдВ рд╕реЗ рдЙрдирдХреЗ рдзрд░реНрдо рдФрд░ рд╡рд╛рд░реНрд╖рд┐рдХ рдЖрдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫрд╛ рдЧрдпрд╛ рдерд╛: </p><br><pre> <code class="plaintext hljs">#&gt; # A tibble: 18 x 11 #&gt; religion `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` #&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; #&gt; 1 Agnostic 27 34 60 81 76 137 #&gt; 2 Atheist 12 27 37 52 35 70 #&gt; 3 Buddhist 27 21 30 34 33 58 #&gt; 4 Catholic 418 617 732 670 638 1116 #&gt; 5 Don't kтАж 15 14 15 11 10 35 #&gt; 6 EvangelтАж 575 869 1064 982 881 1486 #&gt; 7 Hindu 1 9 7 9 11 34 #&gt; 8 HistoriтАж 228 244 236 238 197 223 #&gt; 9 JehovahтАж 20 27 24 24 21 30 #&gt; 10 Jewish 19 19 25 25 30 95 #&gt; # тАж with 8 more rows, and 4 more variables: `$75-100k` &lt;dbl&gt;, #&gt; # `$100-150k` &lt;dbl&gt;, `&gt;150k` &lt;dbl&gt;, `Don't know/refused` &lt;dbl&gt;</code> </pre> <br><p>  рдЗрд╕ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рдкреНрд░рддрд┐рд╡рд╛рджреА рдзрд░реНрдо рдбреЗрдЯрд╛ рд╣реИ, рдФрд░ рдЖрдп рдХреЗ рд╕реНрддрд░ рд╕реНрддрдВрдн рдирд╛рдореЛрдВ рдореЗрдВ рдмрд┐рдЦрд░реЗ рд╣реБрдП рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ рд╢реНрд░реЗрдгреА рд╕реЗ рдЙрддреНрддрд░рджрд╛рддрд╛рдУрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдзрд░реНрдо рдФрд░ рдЖрдп рд╕реНрддрд░ рдХреЗ рдЪреМрд░рд╛рд╣реЗ рдкрд░ рд╕реЗрд▓ рдореВрд▓реНрдпреЛрдВ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдиреАрдЯ, рд╕рд╣реА рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╕ <code>pivot_longer()</code> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">pew %&gt;% pivot_longer(cols = -religion, names_to = "income", values_to = "count")</code> </pre> <br><pre> <code class="plaintext hljs">pew %&gt;% pivot_longer(cols = -religion, names_to = "income", values_to = "count") #&gt; # A tibble: 180 x 3 #&gt; religion income count #&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; #&gt; 1 Agnostic &lt;$10k 27 #&gt; 2 Agnostic $10-20k 34 #&gt; 3 Agnostic $20-30k 60 #&gt; 4 Agnostic $30-40k 81 #&gt; 5 Agnostic $40-50k 76 #&gt; 6 Agnostic $50-75k 137 #&gt; 7 Agnostic $75-100k 122 #&gt; 8 Agnostic $100-150k 109 #&gt; 9 Agnostic &gt;150k 84 #&gt; 10 Agnostic Don't know/refused 96 #&gt; # тАж with 170 more rows</code> </pre> <br><p>  <code>pivot_longer()</code> рд▓рд┐рдП рддрд░реНрдХ </p><br><ul><li>  рдкрд╣рд▓рд╛ рддрд░реНрдХ, <em>рдХрд░реНрдирд▓</em> , рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХрд┐рд╕ рдХреЙрд▓рдо рдХреЛ рд╡рд┐рд▓рдп рдХрд░рдирд╛ рд╣реИред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, <em>рд╕рдордп</em> рдХреЛ рдЫреЛрдбрд╝рдХрд░ рд╕рднреА рдХреЙрд▓рдоред </li><li>  рд╡реЛ <em>рдирд╛рдо_рддреЛ</em> рддрд░реНрдХ рдЙрд╕ рдЪрд░ рдХрд╛ рдирд╛рдо рджреЗрддрд╛ рд╣реИ рдЬреЛ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд┐рдП рдЧрдП рд╕реНрддрдВрдн рдирд╛рдореЛрдВ рд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </li><li>  <em>values_to</em> рд╡реИрд░рд┐рдПрдмрд▓ рдХрд╛ рдирд╛рдо рджреЗрддрд╛ рд╣реИ, рдЬреЛ <em>рд╕рдореНрдорд┐рд▓рд┐рдд</em> рдХрд┐рдП рдЧрдП рд╕реНрддрдВрднреЛрдВ рдХреЗ рд╕реЗрд▓ рдорд╛рдиреЛрдВ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдбреЗрдЯрд╛ рд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </li></ul><br><h2 id="specifikacii">  рд╡рд┐рдирд┐рд░реНрджреЗрд╢ </h2><br><p>  рдпрд╣ <strong>рдЯрд┐рдбрд┐рдпрд░</strong> рдкреИрдХреЗрдЬ рдХреА рдирдИ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╣реИ, рдЬреЛ рдЕрдкреНрд░рдЪрд▓рд┐рдд рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп рдкрд╣рд▓реЗ рдЕрдиреБрдкрд▓рдмреНрдз рдерд╛ред </p><br><p>  рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдПрдХ рдбреЗрдЯрд╛ рдлрд╝реНрд░реЗрдо рд╣реИ, рдЬрд┐рд╕рдХреА рдкреНрд░рддреНрдпреЗрдХ рдкрдВрдХреНрддрд┐ рдПрдХ рдирдП рдЖрдЙрдЯрдкреБрдЯ рджрд┐рдирд╛рдВрдХ рдлрд╝реНрд░реЗрдо рдореЗрдВ рдПрдХ рдХреЙрд▓рдо рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИ, рдФрд░ рджреЛ рд╡рд┐рд╢реЗрд╖ рдХреЙрд▓рдо рдЬреЛ рдЗрд╕рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реЛрддреЗ рд╣реИрдВ: </p><br><ul><li>  <em>.name</em> рдореЗрдВ рдХреЙрд▓рдо рдХрд╛ рдореВрд▓ рдирд╛рдо рд╣реЛрддрд╛ рд╣реИред </li><li>  <em>.value</em> рдореЗрдВ рдЙрд╕ рдХреЙрд▓рдо рдХрд╛ рдирд╛рдо рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕реЗрд▓ рд╡реИрд▓реНрдпреВ рдЬрд╛рдПрдЧреАред </li></ul><br><p>  рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдХреЗ рд╢реЗрд╖ рдХреЙрд▓рдо рдпрд╣ рджрд░реНрд╢рд╛рддреЗ рд╣реИрдВ рдХрд┐ рдирдП рдХреЙрд▓рдо рдореЗрдВ <em>.name</em> рд╕реЗ рд╕рдВрдХреБрдЪрд┐рдд рдХрд░рдиреЗ рдпреЛрдЧреНрдп рдХреЙрд▓рдо рдХрд╛ рдирд╛рдо рдХреИрд╕реЗ рдкреНрд░рджрд░реНрд╢рд┐рдд <em>рдХрд┐рдпрд╛</em> рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдХреЙрд▓рдо рдирд╛рдо рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ, рдкреНрд░рддреНрдпреЗрдХ рд╕реНрддрдВрдн рдХреЗ рд▓рд┐рдП рдПрдХ рдкрдВрдХреНрддрд┐ рдФрд░ рд╕реНрддрдВрдн рдирд╛рдо рдХреЗ рд╕рд╛рде рд╕рдВрдпреБрдХреНрдд рдкреНрд░рддреНрдпреЗрдХ рдЪрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдХреЙрд▓рдо, рд╢рд╛рдпрдж рдпрд╣ рдкрд░рд┐рднрд╛рд╖рд╛ рдЕрдм рднреНрд░рд╛рдордХ рд▓рдЧрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдХреБрдЫ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рд╕рдм рдХреБрдЫ рдмрд╣реБрдд рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдХрд╛ рдЕрд░реНрде рдпрд╣ рд╣реИ рдХрд┐ рдЖрдк рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдбреЗрдЯрд╛ рдлрд╝реНрд░реЗрдо рдХреЗ рд▓рд┐рдП рдирдП рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЛ рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд, рд╕рдВрд╢реЛрдзрд┐рдд рдФрд░ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  <code>pivot_longer_spec()</code> рдлрд╝рдВрдХреНрд╢рди рдХрд╛ <code>pivot_longer_spec()</code> рд╡рд┐рд╢рд┐рд╖реНрдЯрддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>pivot_longer_spec()</code> рд╣реИ, рдЬрдм рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдкреНрд░рд╛рд░реВрдк рд╕реЗ рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдкрд░рд┐рд╡рд░реНрддрд┐рдд <code>pivot_longer_spec()</code> рд╣реИред </p><br><p>  рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рдХрд┐рд╕реА рднреА рддрд╛рд░реАрдЦ рдХреЗ рдлреНрд░реЗрдо рдХреЛ рд▓реЗрддрд╛ рд╣реИ, рдФрд░ рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЗрд╕рдХреА рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП рдЙрди рдбреЗрдЯрд╛рд╕реЗрдЯ рдХреЛ рд▓реЗрдВ рдЬреЛ рдХрд┐ <strong>tidyr</strong> рдкреИрдХреЗрдЬ рдХреЗ рд╕рд╛рде рдЖрддреЗ рд╣реИрдВред  рдЗрд╕ рдбреЗрдЯрд╛рд╕реЗрдЯ рдореЗрдВ рдЕрдВрддрд░рд░рд╛рд╖реНрдЯреНрд░реАрдп рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕рдВрдЧрдарди рджреНрд╡рд╛рд░рд╛ рддрдкреЗрджрд┐рдХ рдХреА рдШрдЯрдирд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рджреА рдЧрдИ рд╣реИред </p><br><pre> <code class="plaintext hljs">who #&gt; # A tibble: 7,240 x 60 #&gt; country iso2 iso3 year new_sp_m014 new_sp_m1524 new_sp_m2534 #&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; #&gt; 1 AfghanтАж AF AFG 1980 NA NA NA #&gt; 2 AfghanтАж AF AFG 1981 NA NA NA #&gt; 3 AfghanтАж AF AFG 1982 NA NA NA #&gt; 4 AfghanтАж AF AFG 1983 NA NA NA #&gt; 5 AfghanтАж AF AFG 1984 NA NA NA #&gt; 6 AfghanтАж AF AFG 1985 NA NA NA #&gt; 7 AfghanтАж AF AFG 1986 NA NA NA #&gt; 8 AfghanтАж AF AFG 1987 NA NA NA #&gt; 9 AfghanтАж AF AFG 1988 NA NA NA #&gt; 10 AfghanтАж AF AFG 1989 NA NA NA #&gt; # тАж with 7,230 more rows, and 53 more variables</code> </pre> <br><p>  рд╣рдо рдЗрд╕рдХреЗ рд╡рд┐рдирд┐рд░реНрджреЗрд╢рди рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рддреЗ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">spec &lt;- who %&gt;% pivot_longer_spec(new_sp_m014:newrel_f65, values_to = "count")</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 56 x 3 #&gt; .name .value name #&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; #&gt; 1 new_sp_m014 count new_sp_m014 #&gt; 2 new_sp_m1524 count new_sp_m1524 #&gt; 3 new_sp_m2534 count new_sp_m2534 #&gt; 4 new_sp_m3544 count new_sp_m3544 #&gt; 5 new_sp_m4554 count new_sp_m4554 #&gt; 6 new_sp_m5564 count new_sp_m5564 #&gt; 7 new_sp_m65 count new_sp_m65 #&gt; 8 new_sp_f014 count new_sp_f014 #&gt; 9 new_sp_f1524 count new_sp_f1524 #&gt; 10 new_sp_f2534 count new_sp_f2534 #&gt; # тАж with 46 more rows</code> </pre> <br><p>  рдлрд╝реАрд▓реНрдб <em>рджреЗрд╢</em> , <em>iso2</em> , <em>iso3</em> рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЪрд░ рд░рд╣реЗ рд╣реИрдВред  рд╣рдорд╛рд░рд╛ рдХрд╛рд░реНрдп рдХреЙрд▓рдо рдХреЛ <em>new_sp_m014</em> рд╕реЗ <em>newrel_f65</em> рдкрд░ <em>рдлреНрд▓рд┐рдк рдХрд░рдирд╛ рд╣реИ</em> ред </p><br><p>  рдЗрди рд╕реНрддрдВрднреЛрдВ рдХреЗ рдирд╛рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреЗ рд╣реИрдВ: </p><br><ul><li>  рдЙрдкрд╕рд░реНрдЧ <code>new_</code> рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╕реНрддрдВрдн рдореЗрдВ рддрдкреЗрджрд┐рдХ рдХреЗ рдирдП рдорд╛рдорд▓реЛрдВ рдкрд░ рдбреЗрдЯрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИ, рд╡рд░реНрддрдорд╛рди рддрд┐рдерд┐ рдлрд╝реНрд░реЗрдо рдореЗрдВ рдХреЗрд╡рд▓ рдирдП рд░реЛрдЧреЛрдВ рдХреА рдЬрд╛рдирдХрд╛рд░реА рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╡рд░реНрддрдорд╛рди рд╕рдВрджрд░реНрдн рдореЗрдВ рдпрд╣ рдЙрдкрд╕рд░реНрдЧ рдХреЛрдИ рдЕрд░реНрде рдирд╣реАрдВ рд░рдЦрддрд╛ рд╣реИред </li><li>  <code>sp</code> / <code>rel</code> / <code>sp</code> / <code>ep</code> рдПрдХ рдмреАрдорд╛рд░реА рдХреЗ рдирд┐рджрд╛рди рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рдзрд┐ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИред </li><li>  рд░реЛрдЧреА рдХрд╛ <code>m</code> / <code>f</code> рд▓рд┐рдВрдЧред </li><li>  рд░реЛрдЧреА рдХреА <code>014</code> рдЖрдпреБ рд╕реАрдорд╛ред </li></ul><br><p>  рд╣рдо <code>extract()</code> рдлрдВрдХреНрд╢рди рдХреЛ рд░реЗрдЧреБрд▓рд░ рдПрдХреНрд╕рдкреНрд░реЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрди рдХреЙрд▓рдореЛрдВ рдХреЛ рдЕрд▓рдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">spec &lt;- spec %&gt;% extract(name, c("diagnosis", "gender", "age"), "new_?(.*)_(.)(.*)")</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 56 x 5 #&gt; .name .value diagnosis gender age #&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; #&gt; 1 new_sp_m014 count sp m 014 #&gt; 2 new_sp_m1524 count sp m 1524 #&gt; 3 new_sp_m2534 count sp m 2534 #&gt; 4 new_sp_m3544 count sp m 3544 #&gt; 5 new_sp_m4554 count sp m 4554 #&gt; 6 new_sp_m5564 count sp m 5564 #&gt; 7 new_sp_m65 count sp m 65 #&gt; 8 new_sp_f014 count sp f 014 #&gt; 9 new_sp_f1524 count sp f 1524 #&gt; 10 new_sp_f2534 count sp f 2534 #&gt; # тАж with 46 more rows</code> </pre> <br><p>  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ <em>.name</em> рдХреЙрд▓рдо рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рд░рд╣рдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╕реНрд░реЛрдд рдбреЗрдЯрд╛рд╕реЗрдЯ рдХреЗ рдХреЙрд▓рдо рдирд╛рдореЛрдВ рдореЗрдВ рд╣рдорд╛рд░рд╛ рд╕реВрдЪрдХрд╛рдВрдХ рд╣реИред </p><br><p>  рд▓рд┐рдВрдЧ рдФрд░ рдЖрдпреБ ( <em>рд▓рд┐рдВрдЧ</em> рдФрд░ <em>рдЖрдпреБ</em> рд╕реНрддрдВрдн) рдирд┐рд╢реНрдЪрд┐рдд рдФрд░ рдЬреНрдЮрд╛рдд рдореВрд▓реНрдп рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЗрди рд╕реНрддрдВрднреЛрдВ рдХреЛ рдХрд╛рд░рдХреЛрдВ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИ: </p><br><pre> <code class="plaintext hljs">spec &lt;- spec %&gt;% mutate( gender = factor(gender, levels = c("f", "m")), age = factor(age, levels = unique(age), ordered = TRUE) )</code> </pre> <br><p>  рдЕрдВрдд рдореЗрдВ, рд╣рдордиреЗ рдЙрд╕ рдлреНрд░реЗрдо рдХреА рдореВрд▓ рддрд┐рдерд┐ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдП рдЧрдП рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ <code>pivot_longer()</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ <em>рдпреБрдХреНрддрд┐</em> рддрд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p> <code>who %&gt;% pivot_longer(spec = spec)</code> </p> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 405,440 x 8 #&gt; country iso2 iso3 year diagnosis gender age count #&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;ord&gt; &lt;int&gt; #&gt; 1 Afghanistan AF AFG 1980 sp m 014 NA #&gt; 2 Afghanistan AF AFG 1980 sp m 1524 NA #&gt; 3 Afghanistan AF AFG 1980 sp m 2534 NA #&gt; 4 Afghanistan AF AFG 1980 sp m 3544 NA #&gt; 5 Afghanistan AF AFG 1980 sp m 4554 NA #&gt; 6 Afghanistan AF AFG 1980 sp m 5564 NA #&gt; 7 Afghanistan AF AFG 1980 sp m 65 NA #&gt; 8 Afghanistan AF AFG 1980 sp f 014 NA #&gt; 9 Afghanistan AF AFG 1980 sp f 1524 NA #&gt; 10 Afghanistan AF AFG 1980 sp f 2534 NA #&gt; # тАж with 405,430 more rows</code> </pre> <br><p>  рд╣рдордиреЗ рдЬреЛ рдХреБрдЫ рднреА рдХрд┐рдпрд╛, рдЙрд╕реЗ рдпреЛрдЬрдирд╛рдмрджреНрдз рддрд░реАрдХреЗ рд╕реЗ рдирд┐рдореНрди рдкреНрд░рдХрд╛рд░ рд╕реЗ рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/90c/84b/16d/90c84b16d3e4c9860b8ced6e411757b3.png" alt="рдЫрд╡рд┐"></p><br><h2 id="specifikaciya-s-ispolzovaniem-neskolkih-znacheniyvalue">  рдХрдИ рдореВрд▓реНрдпреЛрдВ (.value) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯрддрд╛ </h2><br><p>  рдЙрдкрд░реЛрдХреНрдд рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, <em>.value</em> рд╡рд┐рдирд┐рд░реНрджреЗрд╢рди рдХреЙрд▓рдо рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рдорд╛рди рд╣реЛрддрд╛ рд╣реИ, рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдРрд╕рд╛ рд╣реЛрддрд╛ рд╣реИред </p><br><p>  рд▓реЗрдХрд┐рди рдХрднреА-рдХрднреА рдПрдХ рд╕реНрдерд┐рддрд┐ рдЙрддреНрдкрдиреНрди рд╣реЛ рд╕рдХрддреА рд╣реИ рдЬрдм рдЖрдкрдХреЛ рдореВрд▓реНрдпреЛрдВ рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдХреЙрд▓рдо рд╕реЗ рдбреЗрдЯрд╛ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдкрджрд╛рд╡рдирдд <code>spread()</code> рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛, рдпрд╣ рдХрд╛рдлреА рдореБрд╢реНрдХрд┐рд▓ рд╣реЛрдЧрд╛ред </p><br><p>  рдирд┐рдореНрди рдЙрджрд╛рд╣рд░рдг <strong>рдбреЗрдЯрд╛рдиреЗрдЯреЗрдмрд▓</strong> рдкреИрдХреЗрдЬ рдХреЗ рд▓рд┐рдП <strong>рд╡рд┐рдЧрдиреЗрдЯ</strong> рд╕реЗ рдЙрдзрд╛рд░ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p>  рдЪрд▓реЛ рдПрдХ рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдбреЗрдЯрд╛ рдлреНрд░реЗрдо рдмрдирд╛рддреЗ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">family &lt;- tibble::tribble( ~family, ~dob_child1, ~dob_child2, ~gender_child1, ~gender_child2, 1L, "1998-11-26", "2000-01-29", 1L, 2L, 2L, "1996-06-22", NA, 2L, NA, 3L, "2002-07-11", "2004-04-05", 2L, 2L, 4L, "2004-10-10", "2009-08-27", 1L, 1L, 5L, "2000-12-05", "2005-02-28", 2L, 1L, ) family &lt;- family %&gt;% mutate_at(vars(starts_with("dob")), parse_date)</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 5 x 5 #&gt; family dob_child1 dob_child2 gender_child1 gender_child2 #&gt; &lt;int&gt; &lt;date&gt; &lt;date&gt; &lt;int&gt; &lt;int&gt; #&gt; 1 1 1998-11-26 2000-01-29 1 2 #&gt; 2 2 1996-06-22 NA 2 NA #&gt; 3 3 2002-07-11 2004-04-05 2 2 #&gt; 4 4 2004-10-10 2009-08-27 1 1 #&gt; 5 5 2000-12-05 2005-02-28 2 1</code> </pre> <br><p>  рдкреНрд░рддреНрдпреЗрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдирд┐рд░реНрдорд┐рдд рджрд┐рдирд╛рдВрдХ рдлрд╝реНрд░реЗрдо рдореЗрдВ рдПрдХ рдкрд░рд┐рд╡рд╛рд░ рдХреЗ рдмрдЪреНрдЪреЛрдВ рдХрд╛ рдбреЗрдЯрд╛ рд╣реЛрддрд╛ рд╣реИред  рдкрд░рд┐рд╡рд╛рд░реЛрдВ рдореЗрдВ рдПрдХ рдпрд╛ рджреЛ рдмрдЪреНрдЪреЗ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ рдмрдЪреНрдЪреЗ рдХреЗ рд▓рд┐рдП, рдЬрдиреНрдо рдХреА рддрд╛рд░реАрдЦ рдФрд░ рд▓рд┐рдВрдЧ рдХрд╛ рдбреЗрдЯрд╛ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдмрдЪреНрдЪреЗ рдХрд╛ рдбреЗрдЯрд╛ рдЕрд▓рдЧ рдХреЙрд▓рдо рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ, рд╣рдорд╛рд░рд╛ рдХрд╛рдо рдЗрд╕ рдбреЗрдЯрд╛ рдХреЛ рдЙрд╕ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд▓рд╛рдирд╛ рд╣реИ рдЬреЛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд╣реИред </p><br><p>  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкреНрд░рддреНрдпреЗрдХ рдмрдЪреНрдЪреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд╕рд╛рде рджреЛ рдЪрд░ рд╣реИрдВ: рдЙрд╕рдХреЗ рд▓рд┐рдВрдЧ рдФрд░ рдЬрдиреНрдо рдХреА рддрд╛рд░реАрдЦ (рдЙрдкрд╕рд░реНрдЧ рдХреЗ рд╕рд╛рде рдХреЙрд▓рдо рдореЗрдВ рдЬрдиреНрдо рдХреА рддрд╛рд░реАрдЦ рд╣реЛрддреА рд╣реИ, рдЙрдкрд╕рд░реНрдЧ <em>рд▓рд┐рдВрдЧ</em> рд╡рд╛рд▓реЗ рдХреЙрд▓рдо рдореЗрдВ рдмрдЪреНрдЪреЗ рдХрд╛ <em>рд▓рд┐рдВрдЧ</em> рд╣реЛрддрд╛ рд╣реИ)ред  рдЕрдкреЗрдХреНрд╖рд┐рдд рдкрд░рд┐рдгрд╛рдо рдореЗрдВ, рдЙрдиреНрд╣реЗрдВ рдЕрд▓рдЧ рдХреЙрд▓рдо рдореЗрдВ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╣рдо рдРрд╕рд╛ рд╡рд┐рдирд┐рд░реНрджреЗрд╢рди рдЙрддреНрдкрдиреНрди рдХрд░рдХреЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ <code>.value</code> рдХреЙрд▓рдо рдореЗрдВ рджреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдорд╛рди рд╣реЛрдВрдЧреЗред </p><br><pre> <code class="plaintext hljs">spec &lt;- family %&gt;% pivot_longer_spec(-family) %&gt;% separate(col = name, into = c(".value", "child"))%&gt;% mutate(child = parse_number(child))</code> </pre><br><pre> <code class="plaintext hljs">#&gt; # A tibble: 4 x 3 #&gt; .name .value child #&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; #&gt; 1 dob_child1 dob 1 #&gt; 2 dob_child2 dob 2 #&gt; 3 gender_child1 gender 1 #&gt; 4 gender_child2 gender 2</code> </pre> <br><p>  рддреЛ, рдЙрдкрд░реЛрдХреНрдд рдЪрд░рдгреЛрдВ рджреНрд╡рд╛рд░рд╛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдЪрд░рдгреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрджрдо рдЙрдард╛рддреЗ рд╣реИрдВред </p><br><ul><li>  <code>pivot_longer_spec(-family)</code> - рдПрдХ рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдмрдирд╛рдПрдБ рдЬреЛ рдкрд╛рд░рд┐рд╡рд╛рд░рд┐рдХ рдХреЙрд▓рдо рдХреЛ рдЫреЛрдбрд╝рдХрд░ рд╕рднреА рдЙрдкрд▓рдмреНрдз рд╕реНрддрдВрднреЛрдВ рдХреЛ рд╕рдВрдХреБрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИред </li><li>  <code>separate(col = name, into = c(".value", "child"))</code> - <em>.name</em> рдХреЙрд▓рдо рдХреЛ рдЕрд▓рдЧ рдХрд░реЗрдВ, рдЬрд┐рд╕рдореЗрдВ рд╕реНрд░реЛрдд рдлрд╝реАрд▓реНрдб рдХреЗ рдирд╛рдо рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЕрдВрдбрд░рд╕реНрдХреЛрд░ рдФрд░ рд╡реИрд▓реНрдпреВ рдХреЛ <em>.value</em> рдФрд░ <em>рдЪрд╛рдЗрд▓реНрдб</em> рдХреЙрд▓рдо рдореЗрдВ рдбрд╛рд▓реЗрдВред </li><li>  <code>mutate(child = parse_number(child))</code> - рдЯреЗрдХреНрд╕реНрдЯ рд╕реЗ рдиреНрдпреВрдореЗрд░рд┐рдХ рдбреЗрдЯрд╛ рдЯрд╛рдЗрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <em>рдЪрд╛рдЗрд▓реНрдб</em> рдлреАрд▓реНрдб рдХреЗ рд╡реИрд▓реНрдпреВрдЬ рдХреЛ рдХрдиреНрд╡рд░реНрдЯ рдХрд░реЗрдВред </li></ul><br><p>  рдЕрдм рд╣рдо рдкреНрд░рд╛рдкреНрдд рд╡рд┐рдирд┐рд░реНрджреЗрд╢рди рдХреЛ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдбреЗрдЯрд╛ рдлреНрд░реЗрдо рдореЗрдВ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рд╡рд╛рдВрдЫрд┐рдд рд░реВрдк рдореЗрдВ рд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">family %&gt;% pivot_longer(spec = spec, na.rm = T)</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 9 x 4 #&gt; family child dob gender #&gt; &lt;int&gt; &lt;dbl&gt; &lt;date&gt; &lt;int&gt; #&gt; 1 1 1 1998-11-26 1 #&gt; 2 1 2 2000-01-29 2 #&gt; 3 2 1 1996-06-22 2 #&gt; 4 3 1 2002-07-11 2 #&gt; 5 3 2 2004-04-05 2 #&gt; 6 4 1 2004-10-10 1 #&gt; 7 4 2 2009-08-27 1 #&gt; 8 5 1 2000-12-05 2 #&gt; 9 5 2 2005-02-28 1</code> </pre> <br><p>  рд╣рдо рддрд░реНрдХ <code>na.rm = TRUE</code> рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рд╡рд░реНрддрдорд╛рди рдбреЗрдЯрд╛ рдлрд╝реЙрд░реНрдо рд╣рдореЗрдВ рдмрд┐рдирд╛ рдХрд┐рд╕реА рдЕрд╡рд▓реЛрдХрдиреЛрдВ рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдкрдВрдХреНрддрд┐рдпрд╛рдБ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рдзреНрдп рдХрд░рддрд╛ рд╣реИред  рдХреНрдпреЛрдВрдХрд┐  рдкрд░рд┐рд╡рд╛рд░ 2 рдХрд╛ рдХреЗрд╡рд▓ рдПрдХ рдмрдЪреНрдЪрд╛ рд╣реИ, <code>na.rm = TRUE</code> рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдкрд░рд┐рд╡рд╛рд░ 2 рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдПрдХ рдкрдВрдХреНрддрд┐ рд╣реЛрдЧреАред </p><br><h2 id="preobrazovanie-data-freymov-iz-dlinnogo-formata-k-shirokomu">  рд▓реЙрдиреНрдЧ рд╡рд╛рдЗрдб рд╕реЗ рд╡рд╛рдЗрдб рдлреНрд░реЗрдореНрд╕ рдХреЛ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдирд╛ </h2><br><p>  <code>pivot_wider()</code> - рдЙрд▓рдЯрд╛ рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ, рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдХрдо рдХрд░рдХреЗ рдлрд╝реНрд░реЗрдо рдХреА рддрд╛рд░реАрдЦ рдореЗрдВ рд╕реНрддрдВрднреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝рд╛рддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b0d/a51/f47/b0da51f47f968a49e485989eba044914.png" alt="рдЫрд╡рд┐"></p><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рдкрд░рд┐рд╡рд░реНрддрди рдХрд╛ рдЙрдкрдпреЛрдЧ рд╢рд╛рдпрдж рд╣реА рдХрднреА рдбреЗрдЯрд╛ рдХреЛ рд╕рд╛рдл-рд╕реБрдерд░рд╛ рджрд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдБрдХрд┐, рдпрд╣ рддрдХрдиреАрдХ рдкреНрд░рд╕реНрддреБрддрд┐рдпреЛрдВ рдореЗрдВ рдкреНрд░рдпреБрдХреНрдд рдзреБрд░реА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдЙрдкрдХрд░рдг рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддреА рд╣реИред </p><br><p>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдлрд╝рдВрдХреНрд╢рди <code>pivot_longer()</code> рдФрд░ <code>pivot_wider()</code> рд╕рдордорд┐рдд рд╣реИрдВ, рдФрд░ рд╡реЗ рд╡рд┐рдкрд░реАрдд рдХреНрд░рд┐рдпрд╛ рдХрд░рддреЗ рд╣реИрдВ, рдЕрд░реНрдерд╛рдд: <code>df %&gt;% pivot_longer(spec = spec) %&gt;% pivot_wider(spec = spec)</code> рдФрд░ <code>df %&gt;% pivot_wider(spec = spec) %&gt;% pivot_longer(spec = spec)</code> рдореВрд▓ df рд▓реМрдЯрд╛рдПрдЧрд╛ред </p><br><h3 id="prosteyshiy-primer-privedeniya-tablicy-k-shirokomu-formatu">  рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдХрд╛рд╕реНрдЯрд┐рдВрдЧ рдХрд╛ рд╕рдмрд╕реЗ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг </h3><br><p>  <code>pivot_wider()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо <em>fish_encounters рдбреЗрдЯрд╛рд╕реЗрдЯ рдХрд╛</em> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ, рдЬреЛ рдЗрд╕ <em>рдмрд╛рдд рдХреА</em> рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдирджреА рдХреЗ рдХрд┐рдирд╛рд░реЗ рд╡рд┐рднрд┐рдиреНрди рд╕реНрдЯреЗрд╢рди рдордЫрд▓реА рдХреЗ рдЖрд╡рд╛рдЧрдорди рдХреЛ рдХреИрд╕реЗ рд░рд┐рдХреЙрд░реНрдб рдХрд░рддреЗ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">#&gt; # A tibble: 114 x 3 #&gt; fish station seen #&gt; &lt;fct&gt; &lt;fct&gt; &lt;int&gt; #&gt; 1 4842 Release 1 #&gt; 2 4842 I80_1 1 #&gt; 3 4842 Lisbon 1 #&gt; 4 4842 Rstr 1 #&gt; 5 4842 Base_TD 1 #&gt; 6 4842 BCE 1 #&gt; 7 4842 BCW 1 #&gt; 8 4842 BCE2 1 #&gt; 9 4842 BCW2 1 #&gt; 10 4842 MAE 1 #&gt; # тАж with 104 more rows</code> </pre> <br><p>  рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдпрд╣ рддрд╛рд▓рд┐рдХрд╛ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реАрдкреВрд░реНрдг рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реЛрдЧреА рдпрджрд┐ рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рд╕реНрдЯреЗрд╢рди рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рдХреЙрд▓рдо рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред </p><br><p> <code>fish_encounters %&gt;% pivot_wider(names_from = station, values_from = seen)</code> </p> <br><pre> <code class="plaintext hljs">fish_encounters %&gt;% pivot_wider(names_from = station, values_from = seen) #&gt; # A tibble: 19 x 12 #&gt; fish Release I80_1 Lisbon Rstr Base_TD BCE BCW BCE2 BCW2 MAE #&gt; &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; #&gt; 1 4842 1 1 1 1 1 1 1 1 1 1 #&gt; 2 4843 1 1 1 1 1 1 1 1 1 1 #&gt; 3 4844 1 1 1 1 1 1 1 1 1 1 #&gt; 4 4845 1 1 1 1 1 NA NA NA NA NA #&gt; 5 4847 1 1 1 NA NA NA NA NA NA NA #&gt; 6 4848 1 1 1 1 NA NA NA NA NA NA #&gt; 7 4849 1 1 NA NA NA NA NA NA NA NA #&gt; 8 4850 1 1 NA 1 1 1 1 NA NA NA #&gt; 9 4851 1 1 NA NA NA NA NA NA NA NA #&gt; 10 4854 1 1 NA NA NA NA NA NA NA NA #&gt; # тАж with 9 more rows, and 1 more variable: MAW &lt;int&gt;</code> </pre> <br><p>  рдпрд╣ рдбреЗрдЯрд╛ рдХреЗрд╡рд▓ рдЙрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рд░рд┐рдХреЙрд░реНрдб рдХрд░рддрд╛ рд╣реИ рдЬрдм рдордЫрд▓реА рдХреЛ рд╕реНрдЯреЗрд╢рди рджреНрд╡рд╛рд░рд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЕрд░реНрдерд╛рддред  рдпрджрд┐ рдХреЛрдИ рдордЫрд▓реА рдХрд┐рд╕реА рд╕реНрдЯреЗрд╢рди рд╕реЗ рддрдп рдирд╣реАрдВ рдХреА рдЧрдИ рдереА, рддреЛ рдпрд╣ рдбреЗрдЯрд╛ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдЙрдЯрдкреБрдЯ рдПрдирдП рджреНрд╡рд╛рд░рд╛ рдЖрдмрд╛рджреА рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рд░рд┐рдХреЙрд░реНрдб рдХреА рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдордЫрд▓реА рдкрд░ рдзреНрдпрд╛рди рдирд╣реАрдВ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЗрд╕рд▓рд┐рдП рд╣рдо <code>pivot_wider()</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ <em>рдорд╛рдиреЛрдВ_рдлрд┐рд▓</em> рддрд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрди рд▓рд╛рдкрддрд╛ рдорд╛рдиреЛрдВ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рднрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">fish_encounters %&gt;% pivot_wider( names_from = station, values_from = seen, values_fill = list(seen = 0) )</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 19 x 12 #&gt; fish Release I80_1 Lisbon Rstr Base_TD BCE BCW BCE2 BCW2 MAE #&gt; &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; #&gt; 1 4842 1 1 1 1 1 1 1 1 1 1 #&gt; 2 4843 1 1 1 1 1 1 1 1 1 1 #&gt; 3 4844 1 1 1 1 1 1 1 1 1 1 #&gt; 4 4845 1 1 1 1 1 0 0 0 0 0 #&gt; 5 4847 1 1 1 0 0 0 0 0 0 0 #&gt; 6 4848 1 1 1 1 0 0 0 0 0 0 #&gt; 7 4849 1 1 0 0 0 0 0 0 0 0 #&gt; 8 4850 1 1 0 1 1 1 1 0 0 0 #&gt; 9 4851 1 1 0 0 0 0 0 0 0 0 #&gt; 10 4854 1 1 0 0 0 0 0 0 0 0 #&gt; # тАж with 9 more rows, and 1 more variable: MAW &lt;int&gt;</code> </pre> <br><h3 id="generaciya-imeni-stolbca-iz-neskolkih-ishodnyh-peremennyh">  рдПрдХрд╛рдзрд┐рдХ рд╕реНрд░реЛрдд рдЪрд░ рд╕реЗ рд╕реНрддрдВрдн рдирд╛рдо рдмрдирд╛рдирд╛ </h3><br><p>  рдХрд▓реНрдкрдирд╛ рдХреАрдЬрд┐рдП рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЙрддреНрдкрд╛рдж, рджреЗрд╢ рдФрд░ рд╡рд░реНрд╖ рдХреЗ рд╕рдВрдпреЛрдЬрди рд╡рд╛рд▓реА рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рд╣реИред  рдПрдХ рдкрд░реАрдХреНрд╖рдг рдлреНрд░реЗрдо рддрд┐рдерд┐ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">df &lt;- expand_grid( product = c("A", "B"), country = c("AI", "EI"), year = 2000:2014 ) %&gt;% filter((product == "A" &amp; country == "AI") | product == "B") %&gt;% mutate(value = rnorm(nrow(.)))</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 45 x 4 #&gt; product country year value #&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; #&gt; 1 A AI 2000 -2.05 #&gt; 2 A AI 2001 -0.676 #&gt; 3 A AI 2002 1.60 #&gt; 4 A AI 2003 -0.353 #&gt; 5 A AI 2004 -0.00530 #&gt; 6 A AI 2005 0.442 #&gt; 7 A AI 2006 -0.610 #&gt; 8 A AI 2007 -2.77 #&gt; 9 A AI 2008 0.899 #&gt; 10 A AI 2009 -0.106 #&gt; # тАж with 35 more rows</code> </pre> <br><p>  рд╣рдорд╛рд░рд╛ рдХрд╛рд░реНрдп рджрд┐рдирд╛рдВрдХ рдлрд╝реНрд░реЗрдо рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдирд╛ рд╣реИ рддрд╛рдХрд┐ рдПрдХ рдХреЙрд▓рдо рдореЗрдВ рдЙрддреНрдкрд╛рдж рдФрд░ рджреЗрд╢ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрдпреЛрдЬрди рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рд╢рд╛рдорд┐рд▓ рд╣реЛред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╕ рд╡реЗрдХреНрдЯрд░ рдХреЛ рдкрд╛рд╕ рдХрд░реЗрдВ рдЬрд┐рд╕рдореЗрдВ рдлрд╝реАрд▓реНрдбреНрд╕ рдХреЗ рдирд╛рдо <em>name_from</em> рддрд░реНрдХ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВред </p><br><pre> <code class="plaintext hljs">df %&gt;% pivot_wider(names_from = c(product, country), values_from = "value")</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 15 x 4 #&gt; year A_AI B_AI B_EI #&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; #&gt; 1 2000 -2.05 0.607 1.20 #&gt; 2 2001 -0.676 1.65 -0.114 #&gt; 3 2002 1.60 -0.0245 0.501 #&gt; 4 2003 -0.353 1.30 -0.459 #&gt; 5 2004 -0.00530 0.921 -0.0589 #&gt; 6 2005 0.442 -1.55 0.594 #&gt; 7 2006 -0.610 0.380 -1.28 #&gt; 8 2007 -2.77 0.830 0.637 #&gt; 9 2008 0.899 0.0175 -1.30 #&gt; 10 2009 -0.106 -0.195 1.03 #&gt; # тАж with 5 more rows</code> </pre> <br><p>  рдЖрдк <code>pivot_wider()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рднреА рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдЬрдм <code>pivot_wider()</code> рдХреЛ рдЖрдкреВрд░реНрддрд┐ рдХреА рдЬрд╛рддреА рд╣реИ <code>pivot_wider()</code> рд╡рд┐рдирд┐рд░реНрджреЗрд╢ <code>pivot_wider()</code> рдХреЗ рд╡рд┐рдкрд░реАрдд рд╣реЛрддрд╛ рд╣реИ: <code>pivot_longer()</code> рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХреЙрд▓рдо <code>pivot_longer()</code> рдФрд░ рдЕрдиреНрдп рдХреЙрд▓рдо рдХреЗ рдорд╛рдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВред </p><br><p>  рдЗрд╕ рдбреЗрдЯрд╛ рд╕реЗрдЯ рдХреЗ рд▓рд┐рдП, рдЖрдк рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрджрд┐ рдЖрдк рджреЗрд╢ рдФрд░ рдЙрддреНрдкрд╛рдж рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдВрдпреЛрдЬрди рдХрд╛ рдЕрдкрдирд╛ рдХреЙрд▓рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдФрд░ рди рдХреЗрд╡рд▓ рдЙрди рдбреЗрдЯрд╛ рдореЗрдВ рдореМрдЬреВрдж рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">spec &lt;- df %&gt;% expand(product, country, .value = "value") %&gt;% unite(".name", product, country, remove = FALSE)</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 4 x 4 #&gt; .name product country .value #&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; #&gt; 1 A_AI A AI value #&gt; 2 A_EI A EI value #&gt; 3 B_AI B AI value #&gt; 4 B_EI B EI value</code> </pre> <br><pre> <code class="plaintext hljs">df %&gt;% pivot_wider(spec = spec) %&gt;% head()</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 6 x 5 #&gt; year A_AI A_EI B_AI B_EI #&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; #&gt; 1 2000 -2.05 NA 0.607 1.20 #&gt; 2 2001 -0.676 NA 1.65 -0.114 #&gt; 3 2002 1.60 NA -0.0245 0.501 #&gt; 4 2003 -0.353 NA 1.30 -0.459 #&gt; 5 2004 -0.00530 NA 0.921 -0.0589 #&gt; 6 2005 0.442 NA -1.55 0.594</code> </pre> <br><h2 id="neskolko-prodvinutyh-primerov-raboty-s-novoy-koncepciey-tidyr">  рдирдИ tidyr рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдХреБрдЫ рдЙрдиреНрдирдд рдЙрджрд╛рд╣рд░рдг </h2><br><h3 id="privedenie-dannyh-k-akkuratnomu-vidu-na-primere-nabora-dannyh-o-perepisi-dohoda-i-arendnoy-platy-v-ssha">  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдореЗрд░рд┐рдХреА рд░рд╛рдЬрд╕реНрд╡ рдФрд░ рдХрд┐рд░рд╛рдпреЗ рдХреА рдЬрдирдЧрдгрдирд╛ рдбреЗрдЯрд╛рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╕рд╛рдл рдЙрдкрд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рд▓рд╛рдирд╛ </h3><br><p>  <em>Us_rent_income рдбреЗрдЯрд╛рд╕реЗрдЯ</em> рдореЗрдВ рдпреВрдПрд╕рдП рдореЗрдВ 2017 рдХреЗ рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ рд░рд╛рдЬреНрдп рдХреА рдФрд╕рдд рдЖрдп рдФрд░ рдХрд┐рд░рд╛рдП рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╣реЛрддреА рд╣реИ (рдбреЗрдЯрд╛рд╕реЗрдЯ <strong>tidycanim</strong> рдкреИрдХреЗрдЬ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИ)ред </p><br><pre> <code class="plaintext hljs">us_rent_income #&gt; # A tibble: 104 x 5 #&gt; GEOID NAME variable estimate moe #&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; #&gt; 1 01 Alabama income 24476 136 #&gt; 2 01 Alabama rent 747 3 #&gt; 3 02 Alaska income 32940 508 #&gt; 4 02 Alaska rent 1200 13 #&gt; 5 04 Arizona income 27517 148 #&gt; 6 04 Arizona rent 972 4 #&gt; 7 05 Arkansas income 23789 165 #&gt; 8 05 Arkansas rent 709 5 #&gt; 9 06 California income 29454 109 #&gt; 10 06 California rent 1358 3 #&gt; # тАж with 94 more rows</code> </pre> <br><p>  рдЬрд┐рд╕ рд░реВрдк рдореЗрдВ рдбреЗрдЯрд╛ us_rent_income <em>рдбреЗрдЯрд╛рд╕реЗрдЯ</em> рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЙрд╕рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдЕрддреНрдпрдВрдд рдЕрд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рд╕реНрддрдВрднреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдбреЗрдЯрд╛ рд╕реЗрдЯ рдмрдирд╛рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ: <em>рдХрд┐рд░рд╛рдпрд╛</em> , <em>rent_moe</em> , <em>рдЖрдУ</em> , <em>income_moe</em> ред  рдЗрд╕ рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рдХрдИ рддрд░реАрдХреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдореБрдЦреНрдп рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╣рдореЗрдВ рдЪрд░ рдореВрд▓реНрдпреЛрдВ рдФрд░ <em>рдЕрдиреБрдорд╛рди / рдореЛ рдХреЗ</em> рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрдпреЛрдЬрди рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рд╕реНрддрдВрдн рдирд╛рдо рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВред </p><br><pre> <code class="plaintext hljs"> spec &lt;- us_rent_income %&gt;% expand(variable, .value = c("estimate", "moe")) %&gt;% mutate( .name = paste0(variable, ifelse(.value == "moe", "_moe", "")) )</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 4 x 3 #&gt; variable .value .name #&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; #&gt; 1 income estimate income #&gt; 2 income moe income_moe #&gt; 3 rent estimate rent #&gt; 4 rent moe rent_moe</code> </pre> <br><p>  <code>pivot_wider()</code> рдХреЛ рдпрд╣ рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рд╣рдореЗрдВ рд╡рд╣ рдкрд░рд┐рдгрд╛рдо рджреЗрддрд╛ рд╣реИ рдЬрд┐рд╕рдХреА рд╣рдо рддрд▓рд╛рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВ: </p><br><p> <code>us_rent_income %&gt;% pivot_wider(spec = spec)</code> </p> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 52 x 6 #&gt; GEOID NAME income income_moe rent rent_moe #&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; #&gt; 1 01 Alabama 24476 136 747 3 #&gt; 2 02 Alaska 32940 508 1200 13 #&gt; 3 04 Arizona 27517 148 972 4 #&gt; 4 05 Arkansas 23789 165 709 5 #&gt; 5 06 California 29454 109 1358 3 #&gt; 6 08 Colorado 32401 109 1125 5 #&gt; 7 09 Connecticut 35326 195 1123 5 #&gt; 8 10 Delaware 31560 247 1076 10 #&gt; 9 11 District of Columbia 43198 681 1424 17 #&gt; 10 12 Florida 25952 70 1077 3 #&gt; # тАж with 42 more rows</code> </pre> <br><h3 id="vsemirnyy-bank">  рд╡рд┐рд╢реНрд╡ рдмреИрдВрдХ </h3><br><p>  рдХрднреА-рдХрднреА рдбреЗрдЯрд╛ рд╕реЗрдЯ рдХреЛ рд╕рд╣реА рд░реВрдк рдореЗрдВ рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдЪрд░рдгреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред <br>  World_bank_pop <em>рдбреЗрдЯрд╛рд╕реЗрдЯ</em> рдореЗрдВ 2000 рд╕реЗ 2018 рддрдХ рдкреНрд░рддреНрдпреЗрдХ рджреЗрд╢ рдХреА рдЬрдирд╕рдВрдЦреНрдпрд╛ рдкрд░ рд╡рд┐рд╢реНрд╡ рдмреИрдВрдХ рдХреЗ рдбреЗрдЯрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">#&gt; # A tibble: 1,056 x 20 #&gt; country indicator `2000` `2001` `2002` `2003` `2004` `2005` `2006` #&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; #&gt; 1 ABW SP.URB.TтАж 4.24e4 4.30e4 4.37e4 4.42e4 4.47e+4 4.49e+4 4.49e+4 #&gt; 2 ABW SP.URB.GтАж 1.18e0 1.41e0 1.43e0 1.31e0 9.51e-1 4.91e-1 -1.78e-2 #&gt; 3 ABW SP.POP.TтАж 9.09e4 9.29e4 9.50e4 9.70e4 9.87e+4 1.00e+5 1.01e+5 #&gt; 4 ABW SP.POP.GтАж 2.06e0 2.23e0 2.23e0 2.11e0 1.76e+0 1.30e+0 7.98e-1 #&gt; 5 AFG SP.URB.TтАж 4.44e6 4.65e6 4.89e6 5.16e6 5.43e+6 5.69e+6 5.93e+6 #&gt; 6 AFG SP.URB.GтАж 3.91e0 4.66e0 5.13e0 5.23e0 5.12e+0 4.77e+0 4.12e+0 #&gt; 7 AFG SP.POP.TтАж 2.01e7 2.10e7 2.20e7 2.31e7 2.41e+7 2.51e+7 2.59e+7 #&gt; 8 AFG SP.POP.GтАж 3.49e0 4.25e0 4.72e0 4.82e0 4.47e+0 3.87e+0 3.23e+0 #&gt; 9 AGO SP.URB.TтАж 8.23e6 8.71e6 9.22e6 9.77e6 1.03e+7 1.09e+7 1.15e+7 #&gt; 10 AGO SP.URB.GтАж 5.44e0 5.59e0 5.70e0 5.76e0 5.75e+0 5.69e+0 4.92e+0 #&gt; # тАж with 1,046 more rows, and 11 more variables: `2007` &lt;dbl&gt;, #&gt; # `2008` &lt;dbl&gt;, `2009` &lt;dbl&gt;, `2010` &lt;dbl&gt;, `2011` &lt;dbl&gt;, `2012` &lt;dbl&gt;, #&gt; # `2013` &lt;dbl&gt;, `2014` &lt;dbl&gt;, `2015` &lt;dbl&gt;, `2016` &lt;dbl&gt;, `2017` &lt;dbl&gt;</code> </pre> <br><p>  рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп рдПрдХ рд╕рд╛рдл рд╕реБрдерд░рд╛ рдбреЗрдЯрд╛рд╕реЗрдЯ рдмрдирд╛рдирд╛ рд╣реИ рдЬрд╣рд╛рдВ рдкреНрд░рддреНрдпреЗрдХ рдЪрд░ рдПрдХ рдЕрд▓рдЧ рдХреЙрд▓рдо рдореЗрдВ рд╣реИред  рдпрд╣ рдЕрднреА рддрдХ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдХреМрди рд╕реЗ рдХрджрдо рдЖрд╡рд╢реНрдпрдХ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдо рд╕рдмрд╕реЗ рд╕реНрдкрд╖реНрдЯ рд╕рдорд╕реНрдпрд╛ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВрдЧреЗ: рд╡рд░реНрд╖ рдХреЛ рдХрдИ рд╕реНрддрдВрднреЛрдВ рдореЗрдВ рд╡рд┐рддрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p>  рдЗрд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ <code>pivot_longer()</code> рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><pre> <code class="plaintext hljs">pop2 &lt;- world_bank_pop %&gt;% pivot_longer(`2000`:`2017`, names_to = "year")</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 19,008 x 4 #&gt; country indicator year value #&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; #&gt; 1 ABW SP.URB.TOTL 2000 42444 #&gt; 2 ABW SP.URB.TOTL 2001 43048 #&gt; 3 ABW SP.URB.TOTL 2002 43670 #&gt; 4 ABW SP.URB.TOTL 2003 44246 #&gt; 5 ABW SP.URB.TOTL 2004 44669 #&gt; 6 ABW SP.URB.TOTL 2005 44889 #&gt; 7 ABW SP.URB.TOTL 2006 44881 #&gt; 8 ABW SP.URB.TOTL 2007 44686 #&gt; 9 ABW SP.URB.TOTL 2008 44375 #&gt; 10 ABW SP.URB.TOTL 2009 44052 #&gt; # тАж with 18,998 more rows</code> </pre> <br><p>   тАФ   indicator. <br> <code>pop2 %&gt;% count(indicator)</code> </p> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 4 x 2 #&gt; indicator n #&gt; &lt;chr&gt; &lt;int&gt; #&gt; 1 SP.POP.GROW 4752 #&gt; 2 SP.POP.TOTL 4752 #&gt; 3 SP.URB.GROW 4752 #&gt; 4 SP.URB.TOTL 4752</code> </pre> <br><p>  SP.POP.GROW тАФ  , SP.POP.TOTL тАФ   ,  SP.URB. *  ,     .       : area тАФ  (total  urban)      (population  growth): </p><br><pre> <code class="plaintext hljs">pop3 &lt;- pop2 %&gt;% separate(indicator, c(NA, "area", "variable"))</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 19,008 x 5 #&gt; country area variable year value #&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; #&gt; 1 ABW URB TOTL 2000 42444 #&gt; 2 ABW URB TOTL 2001 43048 #&gt; 3 ABW URB TOTL 2002 43670 #&gt; 4 ABW URB TOTL 2003 44246 #&gt; 5 ABW URB TOTL 2004 44669 #&gt; 6 ABW URB TOTL 2005 44889 #&gt; 7 ABW URB TOTL 2006 44881 #&gt; 8 ABW URB TOTL 2007 44686 #&gt; 9 ABW URB TOTL 2008 44375 #&gt; 10 ABW URB TOTL 2009 44052 #&gt; # тАж with 18,998 more rows</code> </pre> <br><p>       variable   : </p><br><pre> <code class="plaintext hljs">pop3 %&gt;% pivot_wider(names_from = variable, values_from = value)</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 9,504 x 5 #&gt; country area year TOTL GROW #&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; #&gt; 1 ABW URB 2000 42444 1.18 #&gt; 2 ABW URB 2001 43048 1.41 #&gt; 3 ABW URB 2002 43670 1.43 #&gt; 4 ABW URB 2003 44246 1.31 #&gt; 5 ABW URB 2004 44669 0.951 #&gt; 6 ABW URB 2005 44889 0.491 #&gt; 7 ABW URB 2006 44881 -0.0178 #&gt; 8 ABW URB 2007 44686 -0.435 #&gt; 9 ABW URB 2008 44375 -0.698 #&gt; 10 ABW URB 2009 44052 -0.731 #&gt; # тАж with 9,494 more rows</code> </pre> <br><h3 id="spisok-kontaktov">   </h3><br><p>  , ,      ,       -: </p><br><pre> <code class="plaintext hljs">contacts &lt;- tribble( ~field, ~value, "name", "Jiena McLellan", "company", "Toyota", "name", "John Smith", "company", "google", "email", "john@google.com", "name", "Huxley Ratcliffe" )</code> </pre> <br><p>        ,    ,   ,     .    , ,          ("name"),      ,       ,    field   тАЬnameтАЭ: </p><br><pre> <code class="plaintext hljs">contacts &lt;- contacts %&gt;% mutate( person_id = cumsum(field == "name") ) contacts</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 6 x 3 #&gt; field value person_id #&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; #&gt; 1 name Jiena McLellan 1 #&gt; 2 company Toyota 1 #&gt; 3 name John Smith 2 #&gt; 4 company google 2 #&gt; 5 email john@google.com 2 #&gt; 6 name Huxley Ratcliffe 3</code> </pre> <br><p> ,         ,        : </p><br><pre> <code class="plaintext hljs">contacts %&gt;% pivot_wider(names_from = field, values_from = value)</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; # A tibble: 3 x 4 #&gt; person_id name company email #&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; #&gt; 1 1 Jiena McLellan Toyota &lt;NA&gt; #&gt; 2 2 John Smith google john@google.com #&gt; 3 3 Huxley Ratcliffe &lt;NA&gt; &lt;NA&gt;</code> </pre> <br><h2 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br><p>   ,    <strong>tidyr</strong>    ,        <code>spread()</code>  <code>gather()</code> .        <code>pivot_longer()</code>  <code>pivot_wider()</code> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi444622/">https://habr.com/ru/post/hi444622/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi444610/index.html">рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдореЗрдВ PHP рд▓рд┐рдкрд┐рдпреЛрдВ рдХреА рд╕рд╛рдВрдЦреНрдпрд┐рдХреА рдФрд░ рдирд┐рдЧрд░рд╛рдиреАред рдкрд┐рдВрдХрдмрд╛ рдХреА рдорджрдж рдХреЗ рд▓рд┐рдП рдХреНрд▓рд┐рдХрд╣рд╛рдЙрд╕ рдФрд░ рдЧреНрд░рд╛рдлрд╛рдирд╛ рдЬрд╛рдирд╛</a></li>
<li><a href="../hi444612/index.html">C ++ рдХреЛрдб рдХреЗ рд▓рд┐рдП рдореИрдХреНрд░реЛ рдиреБрдХрд╕рд╛рди</a></li>
<li><a href="../hi444614/index.html">рд▓рд┐рдирдХреНрд╕ рдХрд╛ рдкреВрд░рд╛ рдЗрддрд┐рд╣рд╛рд╕ред рднрд╛рдЧ II: рдХреЙрд░реНрдкреЛрд░реЗрдЯ рдЙрддрд╛рд░-рдЪрдврд╝рд╛рд╡</a></li>
<li><a href="../hi444616/index.html">Kotlin рдХреЗ рд╕рд╛рде рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ Android рд╡реЙрдЗрд╕ рд░рд┐рдХреЙрд░реНрдбрд░ рдмрдирд╛рдПрдВ</a></li>
<li><a href="../hi444620/index.html">рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рдЕрдиреБрдХреНрд░рдо рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛</a></li>
<li><a href="../hi444624/index.html">рдЖрдЧ рдФрд░ рд╕реНрдирд╛рди рдкрд░ рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рдХрд╛рд░реЗрдВ</a></li>
<li><a href="../hi444630/index.html">рдЬрд╛рдирдХрд╛рд░реА рдбреЗрд╕реНрдХ: рд╡реИрд╢реНрд╡рд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд╣рд▓</a></li>
<li><a href="../hi444634/index.html">рдПрдкрд┐рдХ рдЧреЗрдореНрд╕ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ $ 100 рдорд┐рд▓рд┐рдпрди рджреЗрддрд╛ рд╣реИ</a></li>
<li><a href="../hi444636/index.html">рдореИрдВ рдкреИрд╕реЗ рдХреЗ рд▓рд┐рдП рдХреНрдпреЛрдВ рдирд╣реАрдВ рдмрдврд╝ рд╕рдХрддрд╛</a></li>
<li><a href="../hi444638/index.html">рдХреЛрдбрдПрдлреЗрд╕реНрдЯ рдкрд░ рдХреНрдпреВрдПред рд╕реНрд╡рдЪрд╛рд▓рди, рдкреНрд░рдмрдВрдзрди, рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ, рд╕реНрдЯреЛрд░ рдореЗрдВ рдкрдХреМрдбрд╝реА рдХреА рдмрд┐рдХреНрд░реА</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>