<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ñ∂Ô∏è üëØ üßùüèΩ Biblioteca de gerador de c√≥digo Assembler para microcontroladores AVR. Parte 2 ü§öüèº ü§πüèø üóùÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚Üê Parte 1. Primeiro conhecido 


 Parte 3. Endere√ßamento indireto e controle de fluxo ‚Üí 
 Biblioteca do gerador de c√≥digo do assembler para microcontr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Biblioteca de gerador de c√≥digo Assembler para microcontroladores AVR. Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462701/"><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚Üê Parte 1. Primeiro conhecido</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3. Endere√ßamento indireto e controle de fluxo ‚Üí</a> </p><br><h2 id="biblioteka-generatora-assemblernogo-koda-dlya-mikrokontrollerov-avr">  Biblioteca do gerador de c√≥digo do assembler para microcontroladores AVR </h2><br><h3 id="chast-2-nachalo-raboty">  Parte 2. Introdu√ß√£o </h3><br><p>  Conforme planejado, nesta parte, consideraremos mais detalhadamente os recursos de programa√ß√£o usando a biblioteca NanoRTOS.  Aqueles que come√ßaram a ler este post podem se familiarizar com a descri√ß√£o geral e os recursos da biblioteca no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo anterior</a> .  Devido ao escopo limitado da publica√ß√£o planejada, sup√µe-se que um leitor respeitado esteja pelo menos minimamente familiarizado com a programa√ß√£o C # e tamb√©m tenha um entendimento da arquitetura e programa√ß√£o em linguagem assembly dos controladores AVR da s√©rie Mega. </p><a name="habracut"></a><br><p>  O estudo de qualquer tecnologia √© melhor combinado com a execu√ß√£o de exemplos, por isso sugiro fazer o download da biblioteca em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://drive.google.com/open?id=1FfBBpxlJkWC027ikYpn6NXbOGp7DS-5B</a> e tentar conect√°-la ao projeto de aplicativo do console.  Se for bem-sucedido, voc√™ pode seguir em frente com seguran√ßa.  Voc√™ pode usar qualquer aplicativo C # ou projeto UnitTest como um shell para executar exemplos.  Eu pessoalmente gosto mais deste √∫ltimo, porque permite armazenar v√°rios exemplos diferentes em um s√≥ lugar e execut√°-los conforme necess√°rio.  De qualquer forma, apenas o texto do exemplo ser√° inclu√≠do nas listagens para economizar espa√ßo. </p><br><p>  O trabalho com a biblioteca sempre deve come√ßar com um an√∫ncio, como um microcontrolador.  Como os par√¢metros e o conjunto de dispositivos perif√©ricos dependem do tipo de controlador, a escolha de um controlador espec√≠fico afeta a forma√ß√£o do c√≥digo do montador.  A linha de declara√ß√£o do controlador para o qual o programa est√° gravado √© a seguinte </p><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mega328();</code> </pre> <br><p>  Al√©m disso, podem ser seguidas configura√ß√µes adicionais do microcontrolador, como par√¢metros do rel√≥gio ou a atribui√ß√£o de fun√ß√µes do sistema para sa√≠das.  Por exemplo, a permiss√£o para usar a redefini√ß√£o de hardware elimina o uso da sa√≠da como uma porta.  Todos os par√¢metros do controlador t√™m valores padr√£o, e nos exemplos os omitimos, exceto quando √© importante, mas em projetos reais, aconselho que voc√™ os instale sempre.  Por exemplo, uma configura√ß√£o de rel√≥gio pode ser assim </p><br><pre> <code class="cs hljs"> m.FCLK = <span class="hljs-number"><span class="hljs-number">16000000</span></span>; m.CKDIV8 = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;</code> </pre> <br><p>  Essa configura√ß√£o significa que o microcontrolador √© sincronizado com um ressonador de quartzo ou uma fonte externa com uma frequ√™ncia de 16 MHz e o divisor de frequ√™ncia para dispositivos perif√©ricos est√° desativado. <br>  A fun√ß√£o <em>Texto</em> da classe est√°tica <em>AVRASM</em> √© respons√°vel pela sa√≠da do trabalho.  Essa fun√ß√£o sempre ser√° chamada no final do c√≥digo para gerar o resultado no formato assembler.  A inst√¢ncia anteriormente atribu√≠da da classe do controlador, a fun√ß√£o recebe como um par√¢metro.  Portanto, a estrutura mais simples do programa para trabalhar com a biblioteca assume a seguinte forma </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mega328(); <span class="hljs-comment"><span class="hljs-comment">//     //      //          var t = AVRASM.Text(m); //    t</span></span></code> </pre> <br><p>  Se tentarmos executar o programa, ele ter√° √™xito, mas n√£o gerar√° nenhum c√≥digo.  Apesar da futilidade do resultado, isso d√° motivos para concluir que a biblioteca n√£o gera nenhum c√≥digo de quebra. </p><br><p>  N√≥s j√° aprendemos como criar um programa vazio.  Agora vamos tentar criar algum c√≥digo nele.  Vamos come√ßar com o mais primitivo.  Vamos ver como podemos resolver o problema de incremento de uma vari√°vel de oito bits localizada em uma c√©lula RON arbitr√°ria.  Do ponto de vista do montador, este √© o comando <em>inc [register]</em> .  Insira as seguintes linhas no corpo do programa de nossas compras </p><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> r = m.REG(); r++;</code> </pre> <br><p>  O objetivo das equipes √© bastante √≥bvio.  O primeiro comando associa a vari√°vel <em>r</em> a um dos registradores do processador.  O segundo comando fala sobre a necessidade de incrementar essa vari√°vel.  Ap√≥s a execu√ß√£o, obtemos o primeiro resultado da execu√ß√£o do c√≥digo. </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">RESET: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">high</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPH</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">low</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r20</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSEG</span></span></span></span></code> </pre> <br><p>  Vamos dar uma olhada no que aconteceu como resultado.  Os quatro primeiros comandos s√£o a inicializa√ß√£o do ponteiro da pilha.  A seguir, √© a defini√ß√£o do nome da vari√°vel.  E, finalmente, nosso <em>inc</em> , para o qual tudo foi iniciado.  Nada a mais, exceto a inicializa√ß√£o da pilha, n√£o apareceu.  A quest√£o que pode surgir ao analisar esse c√≥digo √© que <em>tipo de R0000</em> ?  Temos uma vari√°vel chamada <em>r</em> ?  Em um programa C #, um programador pode usar conscientemente e legalmente os mesmos nomes, usando o escopo.  Do ponto de vista do montador, todos os r√≥tulos e defini√ß√µes devem ser exclusivos.  Para n√£o for√ßar o programador a monitorar a exclusividade dos nomes, por padr√£o, os nomes s√£o gerados pelo sistema.  No entanto, existe uma situa√ß√£o em que, para fins de depura√ß√£o, voc√™ ainda deseja transferir o nome consciente do programa para o c√≥digo de sa√≠da, para que ele possa ser facilmente encontrado.  N√£o √© assustador.  <em>Substitua m.REG ()</em> por <em>m.REG (‚Äùr‚Äù)</em> e execute o c√≥digo novamente.  Como resultado, veremos o seguinte </p><br><pre> <code class="cs hljs">RESET: ldi r16, high(RAMEND) <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> SPH,r16 ldi r16, low(RAMEND) <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> SPL,r16 .DEF r = r20 inc r .DSEG</code> </pre> <br><p>  Ent√£o, com a nomea√ß√£o dos registros resolvidos.  Agora vamos ver por que de repente os registros come√ßaram a ser atribu√≠dos a partir de 20, e n√£o a partir de 0?  Para responder a essa pergunta, lembramos que a partir de 16, os registros t√™m uma grande oportunidade de inicializ√°-los com constantes.  E como esse recurso √© muito procurado, iniciamos a distribui√ß√£o pela metade superior para aumentar as oportunidades de otimiza√ß√£o.  Ent√£o, tudo a mesma coisa n√£o est√° claro - por que c20 e n√£o 16?  O motivo √© que a convers√£o de v√°rios comandos no c√≥digo do assembler √© imposs√≠vel sem o uso de c√©lulas de armazenamento tempor√°rio.  Para esses prop√≥sitos, alocamos 4 c√©lulas de 16 a 19. Isso n√£o significa que elas se tornaram completamente inacess√≠veis ao programador.  √â apenas que o acesso a eles √© organizado de maneira um pouco diferente, para que o programador esteja ciente das poss√≠veis limita√ß√µes de seu uso e atue conscientemente.  Removemos a defini√ß√£o do registrador <em>r</em> do c√≥digo e substitu√≠mos a linha seguinte por <br>  <em>m.TempL ++;</em> <br>  Vejamos o resultado </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">RESET: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">high</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPH</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">low</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TempL</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSEG</span></span></span></span></code> </pre> <br><p>  Aqui, aparentemente, deve-se notar que o assembler de sa√≠da requer a interpreta√ß√£o correta do arquivo de conex√£o com defini√ß√µes e macros Common.inc do pacote de desenvolvimento.  Na verdade, ele cont√©m todas as macros e defini√ß√µes necess√°rias, incluindo a correspond√™ncia de nomes para c√©lulas de armazenamento tempor√°rio.  Ou seja, TempL = r16, TempH = r17, TempQL = r18, TempQH = r19.  Nesse caso, n√£o usamos nenhum comando que usaria c√©lulas de armazenamento tempor√°rio para funcionar, portanto, nossa decis√£o de us√°-lo na opera√ß√£o TempL √© bastante aceit√°vel.  E o que devemos fazer se tivermos certeza absoluta de que nenhuma atribui√ß√£o de constantes para nossa vari√°vel n√£o brilha e n√£o queremos gastar c√©lulas preciosas da metade superior nela?  Retorne nossa defini√ß√£o para o c√≥digo fonte, alterando-o para <em>var r = m.REGL ("r");</em>  e avaliar o resultado do trabalho </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">RESET: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">high</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPH</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">low</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r4</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSEG</span></span></span></span></code> </pre> <br><p>  O objetivo √© alcan√ßado.  Conseguimos explicar para a biblioteca onde, em nossa opini√£o, a vari√°vel deveria estar localizada.  Vamos mais longe.  Vamos ver o que acontece se v√°rias vari√°veis ‚Äã‚Äãforem declaradas ao mesmo tempo.  Copiamos nossa defini√ß√£o e a√ß√µes mais algumas vezes.  Para uma mudan√ßa, redefiniremos uma nova vari√°vel e reduziremos o valor da outra em 1. O resultado deve ser algo assim. </p><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mega328(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> r = m.REGL(<span class="hljs-string"><span class="hljs-string">"r"</span></span>); r++; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rr = m.REGL(<span class="hljs-string"><span class="hljs-string">"rr"</span></span>); rr--; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rrr = m.REGL(<span class="hljs-string"><span class="hljs-string">"rrr"</span></span>); rrr.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = AVRASM.Text(m);  . RESET: ldi r16, high(RAMEND) <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> SPH,r16 ldi r16, low(RAMEND) <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> SPL,r16 .DEF r = r4 inc r .DEF rr = r5 dec rr .DEF rrr = r6 clr rrr .DSEG</code> </pre> <br><p>  √ìtimo  Foi isso que foi solicitado.  Agora vamos ver como podemos liberar o registro para outros fins, se n√£o precisarmos mais dele.  Aqui, infelizmente, at√© agora tudo est√° √† m√£o.  As regras C # sobre limites de visibilidade e libera√ß√£o autom√°tica de vari√°veis ‚Äã‚Äãao ir para o exterior para o modo de gera√ß√£o de c√≥digo ainda n√£o funcionam.  Vamos ver como voc√™ ainda pode liberar a c√©lula, se necess√°rio.  Adicione apenas uma linha ao nosso programa e veja o resultado. </p><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mega328(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> r = m.REGL(<span class="hljs-string"><span class="hljs-string">"r"</span></span>); r++; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rr = m.REGL(<span class="hljs-string"><span class="hljs-string">"rr"</span></span>); rr--; r.Dispose(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rrr = m.REGL(<span class="hljs-string"><span class="hljs-string">"rrr"</span></span>); rrr.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = AVRASM.Text(m);</code> </pre> <br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">RESET: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">high</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPH</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">low</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r4</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rr</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r5</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dec</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rr</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UNDEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rrr</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r4</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clr</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rrr</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSEG</span></span></span></span></code> </pre> <br><p>  √â f√°cil ver que o quarto registro que liberamos ficou dispon√≠vel novamente para uso.  Considerando o fato de que cada nova declara√ß√£o de vari√°vel captura o registro, podemos concluir que, ao compilar o programa, √© necess√°rio liberar os registros a tempo, se voc√™ n√£o quiser encontrar uma situa√ß√£o em que eles se tornem escassos. </p><br><p>  Ao analisar os exemplos, j√° demonstramos ao longo do caminho como executar opera√ß√µes unicast em registros.  Agora vamos ver como est√£o as coisas com o multicast.  A arquitetura do processador permite o m√°ximo de instru√ß√µes de dois endere√ßos (especialmente as corrosivas, com exce√ß√£o de duas instru√ß√µes para as quais o resultado √© colocado em registros fixos).  Isso deve ser entendido de tal maneira que o primeiro operando na opera√ß√£o ap√≥s sua execu√ß√£o contenha o resultado.  A sintaxe especial <em>[registrador1] [opera√ß√£o] = [registrador2] √©</em> fornecida para este tipo de opera√ß√£o.  Vamos ver como fica na pr√°tica.  Vamos tentar declarar e adicionar duas vari√°veis ‚Äã‚Äãde registro. </p><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mega328(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> op1 = m.REG(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> op2 = m.REG(); op1 += op2; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = AVRASM.Text(m);</code> </pre> <br><p>  Como resultado, veremos </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">RESET: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">high</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPH</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">low</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r20</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0001</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r21</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0001</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSEG</span></span></span></span></code> </pre> <br><p>  Conseguiu o que eles esperavam.  Voc√™ pode experimentar as opera√ß√µes sozinho -, &amp;, |  e verifique se o resultado n√£o √© pior. <br>  At√© agora, todas as op√ß√µes acima claramente n√£o s√£o suficientes para escrever o programa mais simples.  O fato √© que ainda n√£o tocamos na inicializa√ß√£o dos pr√≥prios registros.  A arquitetura do microcontrolador permite inicializar os registradores com uma constante, o valor de outro registrador, o valor da c√©lula de mem√≥ria RAM em um endere√ßo espec√≠fico, o valor da c√©lula de mem√≥ria RAM no ponteiro localizado em um par especial de registros, o valor da c√©lula de entrada / sa√≠da em um endere√ßo espec√≠fico, bem como o valor da c√©lula de mem√≥ria do programa no ponteiro colocado em um par especial de registros.  Mais tarde, trataremos do endere√ßamento indireto, mas, por enquanto, consideraremos casos mais simples.  Escreveremos e executaremos o seguinte programa de teste. </p><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mega328(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> op1 = m.REG(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> op2 = m.REG(); op1.Load(<span class="hljs-number"><span class="hljs-number">0x10</span></span>); op2.Load(<span class="hljs-string"><span class="hljs-string">'s'</span></span>); op1.Load(op2); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = AVRASM.Text(m);</code> </pre> <br><p>  Aqui declaramos e inicializamos duas vari√°veis ‚Äã‚Äãcom o n√∫mero e o s√≠mbolo e, em seguida, copiamos o valor da vari√°vel op2 na c√©lula op1.  Obviamente, o n√∫mero deve estar dentro do intervalo de 0 a 255, para que nenhum erro ocorra.  O resultado ser√° </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">RESET: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">high</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPH</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">low</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r20</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0001</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r21</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,16 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0001</span></span></span><span class="hljs-function">,'</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">s</span></span></span><span class="hljs-function">' </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0001</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSEG</span></span></span></span></code> </pre> <br><p>  Pode-se observar no exemplo que, para todas as opera√ß√µes listadas, uma fun√ß√£o √© usada e a pr√≥pria biblioteca gera o conjunto correto de comandos do assembler.  Como j√° foi mencionado muitas vezes, o carregamento direto de dados no registrador com o comando ldi est√° dispon√≠vel apenas para a metade superior dos registradores.  Vamos tornar nossa biblioteca mais complicada alterando o programa para que ele aloque registros para vari√°veis ‚Äã‚Äãda metade inferior. </p><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mega328(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> op1 = m.REGL(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> op2 = m.REGL(); op1.Load(<span class="hljs-number"><span class="hljs-number">0x10</span></span>); op2.Load(<span class="hljs-string"><span class="hljs-string">'s'</span></span>); op1.Load(op2); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = AVRASM.Text(m);</code> </pre> <br><p>  N√≥s temos </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">RESET: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">high</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPH</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">low</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r4</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0001</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r5</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TempL</span></span></span><span class="hljs-function">,16 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TempL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TempL</span></span></span><span class="hljs-function">,'</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">s</span></span></span><span class="hljs-function">' </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0001</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TempL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0001</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSEG</span></span></span></span></code> </pre> <br><p>  A biblioteca lidou com essa tarefa, gastando ao mesmo tempo o n√∫mero m√≠nimo poss√≠vel de equipes.  E, ao mesmo tempo, vimos por que precis√°vamos alocar registros de armazenamento tempor√°rio.  Bem, finalmente, vamos ver como a matem√°tica √© implementada para trabalhar com constantes.  Sabemos da exist√™ncia do comando subi assembler para subtrair a constante do registrador, e agora tentaremos descrev√™-la em termos da biblioteca. </p><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mega328(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> op1 = m.REG(); op1.Load(<span class="hljs-number"><span class="hljs-number">0x10</span></span>); op1 -= <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = AVRASM.Text(m);</code> </pre> <br><p>  O resultado ser√° </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">RESET: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">high</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPH</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">low</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r20</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,16 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,0</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x0A</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSEG</span></span></span></span></code> </pre> <br><p>  Acabou.  E como a biblioteca se comportar√° se n√£o houver um comando assembler que possa executar a opera√ß√£o necess√°ria?  Por exemplo, se n√£o queremos subtrair, mas adicionar uma constante.  Vamos tentar ver </p><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mega328(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> op1 = m.REG(); op1.Load(<span class="hljs-number"><span class="hljs-number">0x10</span></span>); op1 += <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = AVRASM.Text(m);</code> </pre> <br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">RESET: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">high</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPH</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">low</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r20</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,16 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,0</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">xF6</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSEG</span></span></span></span></code> </pre> <br><p>  A biblioteca saiu subtraindo um valor negativo.  Vamos ver como as coisas est√£o indo com a mudan√ßa.  Mude o valor do registro por 5 para a direita. </p><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mega328(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> op1 = m.REG(); op1.Load(<span class="hljs-number"><span class="hljs-number">0x10</span></span>); op1 &gt;&gt;= <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = AVRASM.Text(m);</code> </pre> <br><p>  O resultado ser√° </p><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">RESET: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">high</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPH</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">low</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RAMEND</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SPL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r16</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEF</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r20</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ldi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,16 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">swap</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">andi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function">,15 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lsr</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">R0000</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSEG</span></span></span></span></code> </pre> <br><p>  Nem tudo √© √≥bvio aqui, mas ele executa duas equipes mais rapidamente do que se uma solu√ß√£o frontal de cinco equipes de turno fosse usada. </p><br><p>  Portanto, neste artigo, examinamos o uso da biblioteca para trabalhar com aritm√©tica de registro.  No pr√≥ximo artigo, continuaremos a descrever como a biblioteca funciona com ponteiros e considerar m√©todos para controlar o fluxo de execu√ß√£o de comandos (loops, transi√ß√µes etc.) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt462701/">https://habr.com/ru/post/pt462701/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt462691/index.html">Como migrar do AD para o LDAP ao usar o Zimbra</a></li>
<li><a href="../pt462693/index.html">No caminho para aplica√ß√µes dur√°veis ‚Äã‚Äãcom o gerador de site est√°tico PSKOV como exemplo</a></li>
<li><a href="../pt462695/index.html">Material como WebComponents</a></li>
<li><a href="../pt462697/index.html">uWSGI para ajudar nas m√©tricas. Relat√≥rio Yandex</a></li>
<li><a href="../pt462699/index.html">Malha de servi√ßo, "Plano de dados" e "Plano de controle" (plano de dados da malha de servi√ßo x plano de controle)</a></li>
<li><a href="../pt462703/index.html">A catraca ‚Äúmais barata‚Äù na R√∫ssia controlada a partir de um smartphone</a></li>
<li><a href="../pt462705/index.html">Os 5 principais erros nos meus aplicativos ReactJS</a></li>
<li><a href="../pt462707/index.html">Kubernetes lan√ßa ferramentas de desenvolvedor de aplicativos</a></li>
<li><a href="../pt462709/index.html">Teste de muta√ß√£o em PHP: uma medida qualitativa para cobertura de c√≥digo</a></li>
<li><a href="../pt462717/index.html">A disputa de dois yokozun</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>