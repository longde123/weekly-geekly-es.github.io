<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⬆️ 👇🏻 🔆 Dell EMC Unity文件部件概述和配置示例 👨🏽‍🍳 🌛 👌🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="本文被认为是对同事的Dell EMC Unity存储系统文件功能的一种描述。 我希望以此身份不仅对他们有用。 本文中的大多数信息是我从供应商的广泛而互不相同的文档中摘录的，以及我的个人设置经验。 Unity块功能不是本文的主题，因此，我将尝试使其“处于局外状态”。 



 一点理论 
 Unity...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dell EMC Unity文件部件概述和配置示例</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419107/"> 本文被认为是对同事的Dell EMC Unity存储系统文件功能的一种描述。 我希望以此身份不仅对他们有用。 本文中的大多数信息是我从供应商的广泛而互不相同的文档中摘录的，以及我的个人设置经验。  Unity块功能不是本文的主题，因此，我将尝试使其“处于局外状态”。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wz/cp/__/wzcp__tbyjypviogdsi_q6ncqaq.jpeg"></div><br><a name="habracut"></a><br><h2> 一点理论 </h2><br>  Unity系统（2016年也为EMC <sup>2</sup> Unity）最初以统一格式发布。 即 这些系统不仅可以通过块协议，而且可以通过文件协议提供对数据的访问。 支持文件协议CIFS（SMB 1），SMB 2，SMB 3.0，SMB 3.02，SMB 3.1.1，NFS v3，NFS v4，NFS v4.1，安全NFS，FTP，SFTP。 同时，在同一对控制器上同时支持块访问和文件访问。 即 与上一代VNX1 / VNX2的系统上一样，没有用于组织文件访问的单独的物理控制器。 从供应商的文档来看，容器化用于分离物理控制器上的功能。 <br><br>  <b>*文章中的所有图像都是可单击的。</b>  <b>另外，该文章有很多篇幅，不是很破坏。</b> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/gg/kn/h2/ggknh25v239un3omaecwil0jy2k.png"></a> <br><br> 通过在存储控制器上创建虚拟文件服务器（NAS服务器）来组织对网络文件夹的访问。 每个文件服务器都有其自己的虚拟以太网接口和网络设置（ip / mask /默认网关/ vlan）。 这些NAS服务器会挂载在磁盘池上创建的文件系统。  NAS服务器本身的配置存储在创建时指定的磁盘池中。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/na/sm/zm/nasmzmnpyjii0edb-jcjkj64uza.png"></a> <br><br> 对于带有SMB球的NAS服务器，您可以加入MS AD并通过本机Windows管理单元对其进行远程管理。 自然，您可以创建未在MS AD中连接的单个（独立）服务器，例如，用于NFS球。 <br><br><h2> 创建NAS服务器 </h2><br> 转到路径“ <b>存储”&gt;“文件”</b>的管理界面（顺便说一下，该界面是用HTML5编写的），然后选择“ <b>NAS服务器”</b>选项卡。 要创建新服务器，请单击“ <b>+</b> ”并进入向导。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/kc/aj/nh/kcajnh4f-udcb77qmxdzhmocg5e.png"></a> <br><br> 在向导中，填写服务器名称。 选择将在其中存储NAS服务器配置的磁盘池。 然后，我们指定创建的服务器将在其上工作的物理控制器（存储处理器）。 如果选定的SP发生故障或重新启动，NAS服务器会发生什么情况，我们将在后面讨论。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/7z/ak/nc/7zakncdk0pff_mhier9hspwdgzi.png"></a> <br><br> 我们进一步浏览向导，并为新的NAS服务器填写网络详细信息。 首先，我们指示将服务器绑定到的控制器上的网络接口。 接下来，指定所需的IP地址，网络掩码（完整或通过前缀），网络网关以及可选的VLAN。 如有必要，以后可以在已创建的服务器上更改这些设置。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/rv/qe/id/rvqeidxl2ypm_glm9tw3agsdxco.png"></a> <br><br> 在下一步，我们被邀请选择我们的NAS服务器将使用的文件协议。 我建议为不同的访问协议分配单独的服务器。 并且仅在确实需要使用一台服务器来使用多种协议的情况下。 如果要同时授予对SMB和NFS上相同数据的访问权限，则需要选择“ <b>多协议”</b>访问类型。 例如，如果网络同时具有Linux和Windows客户端。 如果SMB和NFS都将在同一服务器中使用，那么您可能必须努力工作，并配置Windows用户到unix-uid / gid的正确映射（关联）。 在此处了解更多信息<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">配置多协议文件共享</a> 。 <br><br> 在本例中，我们选择<b>Windows共享</b> ，同时将服务器引入Microsoft域。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/dn/yl/tf/dnyltfi1ua3-vzqnjme17vcbuh8.png"></a> <br><br> 如果您查看<b>Advanced</b> ，则可以配置我们的服务器将进入MS Active Directory的OU（组织单位）。 如果AD中没有OU，则会自动创建它。 默认情况下为“ <b>ou =计算机，ou = EMC NAS服务器</b> ”。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/1a/0r/if/1a0rifq-_vvxmmjo-c_uttpccq0.png"></a> <br><br> 如果它们与最初的Unty设置中指定的不匹配，请继续为NAS服务器配置域DNS服务器。 否则，只需单击<b>下一步</b> 。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/h3/hv/8_/h3hv8_mnthhhhi-zxryuwuddp0k.png"></a> <br><br> 我们将在下面分别讨论配置复制，因此再次讨论。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/so/k3/-h/sok3-hl2902ouypinsew1gxei3k.png"></a> <br><br> 我们检查设置并完成NAS服务器的创建。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/qz/gk/ed/qzgkedxr9r7_2qrkcvyai0rvxx8.png"></a> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/w8/zl/ks/w8zlksdmreym9mitaetj42-vpqe.png"></a> <br><br> 通常，在服务器创建过程完成后，我们可以通过ping来检查其可用性。 自然地，为此，我们已将NAS服务器连接到的存储系统上的物理以太网端口应该已经连接到本地网络。 我们检查： <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/ju/qz/df/juqzdfr0bnbk2mpshailpuw1age.png"></a> <br><br> 在“ <b>Active Directory用户和计算机”</b>管理单元的域中，我们验证是否已创建指定的<b>OU，</b>并且我们的服务器已成功完成加入域的连接。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/an/nz/ox/annzox7uhqobjra5gvqdpxsblg8.png"></a> <br><br> 如果第一次出现问题，您始终可以从已创建的NAS服务器重新加入AD。 最常见的问题之一是存储时间设置不正确。 在Unity的安装和初始配置期间，执行设置本地时间或连接到NTP服务器的操作。 在存储操作期间更改系统时钟可能需要同时重启两个物理控制器。 因此，这将导致服务暂停。 如果Unity中的本地时间与域控制器上的时间相差5分钟以上（MS AD中的默认设置），则NAS服务器将无法正确登录到AD并进行连接。 <br><br> 要重试连接到AD，您可以双击NAS服务器以输入其设置。 转到<b>共享协议</b>选项卡，然后在<b>SMB</b>菜单中。 重新输入Active Directory管理员的登录名和密码。 之后，单击“ <b>应用”</b> 。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/zk/76/j_/zk76j_y9fb69kz1srzn5hcxe4hm.png"></a> <br><br><h2> 更多理论 </h2><br> 在Unity中，供应商使用其自己的专有UFS64文件系统。 该文件系统的主要功能如下所示。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/-w/3t/1u/-w3t1uin4bcnjud1pyzoetvi488.png"></a> <br><br> 我只能补充说，支持UFS64的最大文件大小也是256TB。 <br><br> 功能Unity上的SMB支持该协议特定的许多功能。 它们在下表中列出。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/yj/lv/hc/yjlvhcf4hruktj6rvztadec91ie.png"></a> <br><br>  <b>我从扰流板下面的表格中隐藏了选项的小描述。</b> <br><div class="spoiler">  <b class="spoiler_title">SMB功能的描述</b> <div class="spoiler_text">  <b>启用“启用</b>同步写入”功能使NAS服务器必须立即同步记录接收到的数据，这可能会对SMB球的整体性能产生不利影响。 但是，在各种故障情况下，如果将数据库存储在文件球上，则可以提供更好的数据安全性和完整性。 例如，如计划外的中断。 <br><br>  <b>OPLOCKS ENABLED-</b>允许客户端将文件从球形接收到其RAM并在本地使用文件的功能（添加，修改，删除文件中的数据）。 在这种情况下，客户端不会在文件更改操作后立即将更改写回共享文件夹，而只是定期将其写回共享文件夹，这大大减少了网络流量。 显然，最好不要在此模式下使用关键数据。 启用OPLOCKS时使用数据的功能和方法在很大程度上取决于客户端使用的SMB协议的版本。 <br><br>  <b>通知/启用访问</b> -此选项允许Windows客户端通过WIN32 API在服务器上注册，并接收有关文件更改，目录内容或共享文件夹中对象重命名的信息。 例如，这允许在Windows资源管理器中自动更新小球的内容，而无需强制服务器重新查询。 <br><br>  <b>连续可用性</b> -从名称可以理解，该功能的引入提高了向SMB球开放的会话的容错能力。 此功能仅适用于使用SMB 3.0及更高版本的客户端。 每个会话的服务器存储某些元数据，这使您可以重新打开中断的会话，而无需在NAS服务器上重新授权。 此功能对于使用例如Hyper-V或MS SQL非常有用。 如果出于某种原因发生了短期断开连接，则客户端会认为这是数据传输中的轻微延迟。 例如，短暂下载一个大文件会“暂停”，然后从断开连接的同一位置自动继续下载。 对于Unity，由于NAS服务器位于特定的物理控制器上，因此当该控制器重新启动或发生故障时，NAS服务器将在相邻控制器上重新启动。 因此，在物理上一段时间后，所有SMB会话都会中断。 与具有较旧版本协议的客户端不同，SMB3最有可能不会注意到这一点。 <br><br>  <b>协议加密</b>是SMB3协议版本的功能，它使您可以加密在服务器和客户端之间传输的数据。 在球上启用该​​功能后，所有具有旧版本SMB协议（默认）的客户端将无法登录和访问该球上的数据。 要更改此行为，您需要更正NAS服务器上远程注册表中的设置。 <br><br>  <b>基于访问权限的枚举</b> -文件球形参数，启用后会向用户隐藏用户没有明确读取权限的所有文件和目录。 禁用此选项后，用户将看到所有目录和文件，包括他们没有读取权限但仍无法打开这些目录和文件的目录和文件。 此参数不会影响在NAS服务器上具有管理员特权的用户。 <br><br>  <b>BRANCHCACHE-</b>该参数与具有远程办公室的组织有关。 它使您可以将从本地球接收的文件缓存在本地中心。 为此，可以使用首先从中心办公室请求文件的客户端RAM的一部分，也可以使用远程办公室中经过特殊配置的BranchCache服务器。 因此，下一个请求相同文件的客户端很可能从相邻的计算机/服务器本地接收文件，而无需通过WAN通道从中心办公室下载文件。 当使用很少更改的数据时，此功能最有用，它使您可以将它们存储在负债累累的远程办公室的本地缓存中。 该功能在中央办公室使用哈希文件比较进行工作，并存储在本地缓存中。 <br><br>  <b>离线可用性</b> -启用后，此选项允许客户端在本地缓存文件文件的内容。 并且可以处理文件（包括脱机），而无需与文件球本身建立真正的联系。 <br><br>  <b>UMASK-</b>仅当在NAS服务器上启用<b>多协议</b>模式时，才与SMB球一起使用。 允许您以Unix风格确定默认情况下将在文件共享上创建文件的访问权限。 <br>  <b>扰流端</b> <br></div></div><br>  Dell EMC Unity支持<b>Microsoft分布式文件系统</b> （DFS）。 同时，可以将存储系统上的NAS服务器配置为独立DFS根目录，也可以配置为Active Directory DFS根目录结构中的叶节点。 但是，不幸的是，不支持DFS-R（复制）模式。 如果要组织到远程资源的数据复制，则必须 <br> 在两个Unity阵列之间使用内置的复制功能。 在这种情况下，阵列之一或两者都可以是虚拟的。 <br><br><h2> 创建文件系统和第一个共享目录 </h2><br> 要创建FS，请转到路径“ <b>存储”&gt;“文件”</b>上的管理界面，然后转到“ <b>文件系统”</b>选项卡。 单击“ <b>+</b> ”，进入创建文件系统的向导。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/6k/nu/8x/6knu8x0u2nn96u03cvq-xkol5e8.png"></a> <br><br> 我们选择要在其中安装新文件系统的NAS服务器（如果已经在Unity上创建了多个文件服务器）。 如果创建的服务器支持多个协议选项，则选择将共享创建的FS的协议。 在这种情况下，将立即选择SMB，因为仅对此协议启用了NAS服务器SRV1。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/gj/j8/cj/gjj8cj9pqrrvbqzdv5kascpsou0.png"></a> <br><br> 在“高级设置”中，隐藏了上述多个功能。 即使在创建文件系统后，也可以更改这些设置。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/ic/_j/pw/ic_jpwb6og5sgibmo_4s0jqfy0w.png"></a> <br><br> 进一步进行向导，我们指示文件系统的名称及其简短描述。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/wx/kb/ve/wxkbvetr6xx4ecerlzunvnitm6y.png"></a> <br><br> 在下一步中，您需要选择将在其上创建FS的磁盘池。 它不必与我们放置NAS服务器配置的磁盘池相同。 在这里，我们选择未来FS的大小。 此外，由于存储系统本身管理此文件系统，因此将来我们可以上下更改其大小。 默认情况下，下一步是“ <b>精简”</b>复选框，以便以精简格式创建FS，并且在填充数据时会不断增长。  <b>数据缩减</b>的默认复选框不值得。 <br>  <b>关于扰流器下的数据减少的更多信息。</b> <br><div class="spoiler">  <b class="spoiler_title">数据缩减的简短描述</b> <div class="spoiler_text"> 数据减少是一种机制，可让您对Unity物理控制器的物理内存中的数据进行重复数据删除和压缩，并将已减少容量的数据写入磁盘池。 这样可以节省磁盘空间。 特别是，该机制使您可以确定被零阻塞的数据块，这在很大程度上是重复数据删除的一种特殊情况。 以下是有关数据缩减工作原理的一些很好的图片。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/bn/bu/j-/bnbuj-yg17lg-72fzy6m5hfbkbk.png"></a> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/se/17/rj/se17rjcifc5dneukdyxsu2mjevc.png"></a> <br><br> 数据减少机制对于块卷和文件系统同样有效。 与往常一样，有许多功能： <br><br><ul><li> 如果在已创建的块卷或文件系统上启用该复选框，则先前记录的数据将保持不变。 只有新的录制操作会减小尺寸。 同样，如果关闭“数据缩减”，则重复数据删除和压缩后的数据将以缩减形式存储，直到被删除或覆盖。 </li><li> 如果在启用了数据缩减的情况下将新的唯一8KB块写入LUN或FS上的存储，则将根据上面的框图检查其“可压缩性”。 如果块压缩操作没有节省磁盘空间，则将以其原始大小记录该块。 </li><li> 在向客户端提供通过数据缩减传递的请求数据之前，该数据首先在Unity控制器的内存中还原到其原始状态，然后才返回给客户端。 </li></ul><br> 结果证明不是很简短：）。 但是，它仍然不是30页的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">“ Dell EMC UNITY：数据缩减概述”</a> 。 <br>  <b>扰流端</b> <br></div></div><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/fk/9n/zs/fk9nzspsrnpchnuhfq72tmc2pp4.png"></a> <br><br> 然后，请务必放置“ <b>SMB共享”</b>复选框，并为此文件系统上的第一个共享文件夹指定名称。 如果未创建此第一个默认球，则可能未正确初始化对文件系统的访问权限。 然后可以根据需要从Windows管理控制台中删除并重新创建创建的共享文件夹。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/hs/wg/d4/hswgd4u8i878zv_iw8kiv013sh0.png"></a> <br><br> 我们不会对已创建的球进行任何其他设置，因为将来我们还是会重新创建它。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/z0/aw/om/z0awomntzmu-mj5jww2ebfdi_6i.png"></a> <br><br> 接下来，我们可以设置创建文件系统快照的时间表。 您可以选择Unity上可用的默认时间表之一，也可以通过单击<b>新建时间表</b>来创建自己的默认时间表。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/d6/ye/if/d6yeifwng0fcpayhkeehpeacvuq.png"></a> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/fe/c_/_p/fec__puagjeaa2guoymf7c4ls9k.png"></a> <br><br>  <b>在下面的扰流板下阅读有关SNAPSHOTS的更多信息</b> <br><div class="spoiler">  <b class="spoiler_title">关于文件快照的一些趣味</b> <div class="spoiler_text">  Unity支持根据预定时间表和手动模式创建文件系统快照的机制。 使用写入时重定向（ROW）技术执行快照。 即 创建快照并在必要时覆盖原始数据块之后，新数据块将写入磁盘池的可用空间。 并且原始块保留在其原始位置，并且如果与至少一个快照或原始月亮相关联，则继续使用。 即 实际上，对于原始的月亮，元数据中到已记录块位置的链接只是发生了变化。 在记录读取模式下使用的快照也会发生相同的情况。 文件快照可以安装在NAS服务器上，并可以作为独立的共享目录对其进行访问。 从原理上讲，快照如下。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/1t/na/p7/1tnap7hgt2rwmtnizrm37i4ipsy.png"></a> <br><br> 还支持创建快照的快照。 最多10个嵌套级别。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/rq/1p/6n/rq1p6n0clgzsh8ersxsdcxqiw_e.png"></a> <br><br> 对于文件系统，可以创建快照副本并从快照还原文件系统。 即 文件系统的状态可以返回到创建快照的时间点。 <br><br> 下表列出了Unity系统快照的常规定量特征。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/r_/8a/tl/r_8atly3t5aeozvf17zo0cei3k0.png"></a> <br><br> 您可以预先在Unity中的“ <b>保护和移动性”&gt;“快照计划”中</b>创建自己的快照<b>计划</b> 。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/n5/cn/kq/n5cnkqfcbxbk8qjvvvswisigjn0.png"></a> <br><br> 请注意，快照会立即指示快照在<b>Retain for</b>中存储的时间，此后快照将从磁盘池中删除。 这样做是为了避免用不再需要的快照内容过度填充磁盘池。 如果选择“ <b>池自动删除策略”</b> ，则将应用磁盘池属性中指定的策略。 它根据具有数据的磁盘池的总容量或快照占用的磁盘空间百分比来删除快照。 默认情况下，以下值适用： <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/jv/62/cl/jv62cl8dytigbhq0g0nshaqffja.png"></a> <br><br> 在手动模式下创建快照时，可以指定不能按计划自动删除快照。 但是在这种情况下，当这些快照变得不必要时，不应忘记删除它们。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/na/7v/bp/na7vbpevm7vmz4filvlgcf_08ma.png"></a> <br><br> 由于文件系统完全由阵列控制，因此生成的快照会自动获得一致。  Unity文件系统快照也很方便，因为对于Windows客户端，它们会自动与Windows卷影复制服务（Windows VSS）集成。 这意味着在Windows的所有现代版本中，普通用户可以在共享目录中打开文件夹属性，并通过转到“以前的版本”选项卡来访问快照的内容。  <b>即</b>  <b>普通用户（无需管理员参与）可以从快照中恢复，包括意外删除的文件。</b> 对于先前在SRV1 NAS服务器上创建的球，外观如下。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/i5/ve/tk/i5vetkdmpoimzfrxitp2csdtvii.png"></a> <br><br>        ,             ,    <b>Acceess Type = Share</b> . <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/wv/aq/qr/wvaqqrfsq_ysfz1-b1istwunslg.png"></a> <br><br>     <b>Storage &gt; File</b>   <b>SMB Shares</b>      . <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/st/tx/yj/sttxyj0tiwpx0njzqbeuuiyqddg.png"></a> <br><br>      ,          <b>Snapshot for File System</b> .     ,      . <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/ih/f0/4u/ihf04ukgdmr4ho1kzil6tjplwgw.png"></a> <br><br>       . <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/ca/r5/4j/car54j4renqzdegg9jqk7y7moeu.png"></a> <br><br>          ,   Advanced       . <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/gf/z7/u9/gfz7u9jruwrpjfnfoggg6k4svm8.png"></a> <br><br>   . <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/w2/ux/22/w2ux229l2_dmi993odf6hrs34pi.png"></a> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/8k/dx/py/8kdxpyvqwwyrzndu1orskp_8gsg.png"></a> <br><br>       Windows. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/av/lv/du/avlvdu4_deeoqdgez7mvko5qz_8.png"></a> <br> <b> </b> <br></div></div><br>      Unity   .    <b>Next</b> . <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/xi/vn/66/xivn66aecsd3mkn7jzcy3jig_fi.png"></a> <br><br>       FS. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/8e/qu/yz/8equyzgcv9b9fa41z3hmcmps4oi.png"></a> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/bt/7i/hc/bt7ihcuzhrg7ytrlcp2ukkj8iqg.png"></a> <br><br>  -      : <br><iframe width="560" height="315" src="https://www.youtube.com/embed/vhkfy_iuwVc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  NAS    Windows </h2><br> 如上所述，我们可以管理通过标准Windows管理单元在存储上创建的NAS服务器。 例如，我们可以打开“ <b>计算机管理”管理</b>单元（以任何方便的方式），然后单击“ <b>操作”&gt;“连接到另一台计算机...”</b>当然，要连接并完全管理，我们必须对NAS服务器具有管理员权限。 对于AD中引入的NAS服务器，只需运行具有域管理员权限的“ <b>计算机管理”管理</b>单元。 连接本身需要一些时间，当您尝试扩展远程服务器相对对象中的对象树时，该连接就会显示出来。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/mh/vy/yt/mhvyytvanglnnzzyinbxlywjbpe.png"></a> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/pd/a7/l1/pda7l1us-wniidah96ii-sgulf8.png"></a> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/xm/i_/pz/xmi_pzxbnrggashowehd7ci4ckg.png"></a> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/8h/zq/g2/8hzqg2tsyz6fi9ogeyccob0r1em.png"></a> <br><br> 一旦进入我们NAS服务器的控制设备，我们就可以管理服务器本身及其上的文件球。 原则上，管理与通常管理Windows计算机的区别不大。 自然，与文件功能无关的大多数管理单元都将无法正常工作。 例如，设备管理器。 您可以使用“ <b>系统工具”的</b>小节。 即，需要分别启用“ <b>共享文件夹”</b> ，“ <b>本地用户和组”</b>和“ <b>事件查看器”</b> 。 稍后我将描述如何执行此操作。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/wo/th/_w/woth_wz5mi7nigojxykkceng9yw.png"></a> <br><br> 由于我们默认创建的共享文件夹共享文件系统的根目录，因此在该根目录中可以看到Unix挂载点的典型目录。 其中，在其他方面，没有访问权限。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/vd/kp/pe/vdkppe_xkli6y7gqtanwftvbyru.png"></a> <br><br> 为了避免混淆普通用户，最好在文件系统上创建单独的目录并共享它们。 实际上，这会从按扣中删除默认球。 右键单击目录，然后<b>停止共享</b> 。 然后创建一个新的。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/ez/re/lj/ezreljatmrltac2dtj1dbk8ir8s.png"></a> <br><br> 此外，通过Windows向导，您需要单击“ <b>文件夹”路径</b>中的“ <b>浏览”</b>按钮<b>...</b> ，我们将看到包含所有文件系统和快照的NAS服务器的根目录。 顺便说一下，您可以从此处共享只读快照，这与Unity管理界面不同。 很明显，用这种方式书写是不可能的。 在本例中，我们需要进入<b>FS2</b>文件系统并单击<b>Make New Folder</b> 。 接下来，我们选择创建的文件夹并转到向导。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/lx/p9/3t/lxp93tjg2l7dyoz4smnqmufolz4.png"></a> <br><br> 指定这些球的名称。 或原样离开。 我们指出用户是否可以缓存小球的内容并脱机访问它。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/se/on/9y/seon9yld9gmvhqte9qu-vrta7l0.png"></a> <br><br> 设置对球的默认访问权限。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/zq/ko/ao/zqkoaooah4a7uunysijed8g8iqc.png"></a> <br><br> 结果，我们得到一个干净的空共享目录 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/sw/0r/t6/sw0rt6gaymns-oc2d5z6yf7kyrk.png"></a> <br><br> 此外，我们可以像在常规Windows球上一样更改此共享文件夹上的访问权限。 我认为，最方便的方法是将“ <b>所有人”的“</b>全部”权限授予“ <b>共享权限”</b>选项卡，然后从此处删除其他所有人。 <br><br> <a href="https://" rel="nofollow"><img src="https://habrastorage.org/webt/0j/m2/jw/0jm2jwrp5zncp40-tolgyt34ism.png"></a> <br><br> 然后，由权限本身来引导，然后在“ <b>安全性”</b>选项卡上。 在这里，我们可以指定所需的用户组及其权限。 我们可以从文件系统中删除权限的继承，并根据需要重做所有内容。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/cq/tu/xm/cqtuxmls8z55tndc8wdddxydpf8.png"></a> <br><br> 在Windows管理单元中对共享目录所做的所有更改都应正确显示在存储管理界面中的<b>存储&gt;文件&gt; SMB共享中</b> 。 如果由于某种原因不是这种情况，则可能需要重新启动Unity Management Service。 此过程绝不会影响用户对存储系统上存储的数据的访问。 即 用户将不会注意到任何东西。 仅7至10分钟，控制界面将不可用。 <br> 转到“ <b>服务任务”</b>选项卡的“ <b>系统”&gt;“服务”</b>部分。 在“ <b>存储系统”</b>部分中，选择“ <b>重新启动管理软件”</b> ，然后单击“ <b>执行”</b> 。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/11/je/y5/11jey5pqak336ewcpbuebfbgb9y.png"></a> <br><br> 结果，存储管理界面中的所有内容都应如下所示。 即 在Unisphere中，您可以更改Windows管理单元中创建的文件球的<b>高级</b>设置。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/7r/h6/5m/7rh65mmx_qapowqdu8vhiuevtvq.png"></a> <br><br> 通过AD连接创建的NAS服务器使用域组策略（GPO）。  NAS服务器从域中读取策略，然后定期更新它们。 频率取决于域本身GPO中指定的设置。  <b>支持的策略列表隐藏在下面的破坏器下方。</b> <br><div class="spoiler">  <b class="spoiler_title">支持的GPO列表</b> <div class="spoiler_text">  <b>的Kerberos</b> <br><ul><li> 计算机时钟同步的最大容限（时钟偏斜）。 每个NAS服务器都完成时间同步。 </li><li> 用户票证的最大使用寿命 </li></ul><br>  <b>审核政策</b> <br><ul><li> 审核帐户登录事件 </li><li> 审计账户管理 </li><li> 审核目录服务访问 </li><li> 审核登录事件 </li><li> 审核对象访问 </li><li> 审核政策变更 </li><li> 审核特权的使用 </li><li> 审核流程跟踪 </li><li> 审核系统事件 </li></ul><br>  <b>用户权限</b> <br><ul><li> 从网络访问此计算机 </li><li> 备份文件和目录 </li><li> 绕过遍历检查 </li><li> 拒绝从网络访问此计算机 </li><li> 病毒检查 </li><li> 进行安全审核 </li><li> 管理审核和安全日志 </li><li> 恢复文件和目录 </li><li> 取得文件或其他对象的所有权 </li></ul><br>  <b>安全选项</b> <br><ul><li> 对客户端通信进行数字签名（始终） </li><li> 对客户端通信进行数字签名（如果可能） </li><li> 数字签名服务器通信（始终） </li><li> 数字签名服务器通信（如果可能） </li><li>  LAN Manager身份验证级别 </li></ul><br>  <b>事件记录</b> <br><ul><li> 最大应用程序日志大小 </li><li> 最大安全日志大小 </li><li> 最大系统日志大小 </li><li> 限制访客访问应用程序日志 </li><li> 限制访客访问安全日志 </li><li> 限制访客访问系统日志 </li><li> 保留应用程序日志l保留安全日志 </li><li> 保留系统日志l应用程序日志的保留方法 </li><li> 安全日志的保留方法 </li><li> 系统日志的保留方法 </li></ul><br>  <b>团体政策</b> <br><ul><li> 禁用组策略的后台刷新 </li><li> 计算机的组策略刷新间隔 </li></ul><br>  <b>扰流端</b> <br></div></div><br> 调整阵列上SMB NAS服务器参数的另一个机会是与其注册表的远程连接。 为此，请在Windows c上运行regedit.exe注册表编辑器（具有AD管理员权限）。 并通过<b>文件&gt;连接网络注册表...</b>连接到远程注册表。 之后，远程注册表中的部分参数将可以更改。 而另一部分只能查看，并且在另一个专用的MMC控制台中会更改。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/jd/of/jy/jdofjy5nqd2rn4sibcy2sa3hn1s.png"></a> <br><br> 结果，我们得到以下图片： <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/8f/0j/rb/8f0jrbwado-g-0zgbvw67plltd0.png"></a> <br><br> 除了标准的MMC Windows控制台外，还有其他一些控制台可用于在Unity上使用NAS服务器。 您可以在供应商的服务门户网站上自行分配产品，或要求参与阵列技术支持的服务合作伙伴。 当前可用的最新版本是文件8.1.9.157_Unity_VNXFileCifsMgmt.exe。 顾名思义，同一实用程序还用于为以前的VNX和VNXe阵列上的数据删除器和NAS服务器配置其他功能。 可以在任何域计算机上部署此分发。 下面的屏幕快照显示了已安装的管理单元包含的功能。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/nx/jm/pj/nxjmpj6nuqdzv9cdcrvrdfu0rpa.png"></a> <br><br> 必须使用<b>run</b> （在其中输入<b>mmc / 32</b>命令）在域管理员帐户下启动mmc控制台。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/7a/sq/mt/7asqmtzazetpjkv4kz9c-tmefve.png"></a> <br><br> 在控制台中，选择“ <b>文件”&gt;“添加/删除管理单元...”。</b> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/qh/nm/nb/qhnmnbzzvvd1bchb7ttfpxldtbm.png"></a> <br><br> 在这里，我们有两个新的管理单元。 第一个是<b>Data Mover / NAS服务器管理</b> ，第二个是<b>Unity / VNX / VNXe NAS UNIX用户管理</b> 。 在我们的例子中，选择第一个，然后单击<b>Add&gt;</b> 。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/xl/vd/ef/xlvdefp6c7cmnrtjcwmggyrcfmi.png"></a> <br><br> 结果，我们将打开另一个窗口，需要选择要配置的NAS服务器。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/81/xr/6p/81xr6pvsid0n_gamooeg2qhfto8.png"></a> <br><br> 然后，我们可以访问控制台，在该控制台中，我们可以管理和配置NAS服务器的其他功能。 特别是主目录，共享目录与防病毒程序的集成以及配置许多其他与安全性相关的参数。 <br><br> 但是首先是第一件事。 主目录是允许所有用户以\\ SRV1 \ home形式获得指向同一主网络文件夹的链接的功能，但是每个用户都将被带到具有预定义权限的自己的目录。 此外，如果个人目录不存在，并且用户首先访问上面的链接，则可以自动创建其个人目录。 例如，您可以将其用于AD中的便携式配置文件。 是的，就像可以自动创建的个人网络驱动器一样，并在脚本中为所有驱动器指定公用路径。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/je/bc/ur/jebcurw9htlo5_t89tcev-lts5k.png"></a> <br><br> 创建新的主目录时，允许使用正则表达式。 例如，其帐户以字母a到k开头的所有用户都可以发送到一个FS上的一个目录，其余所有用户发送到另一个FS上的另一个目录。 <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/ky/pv/zb/kypvzbq9r3fetelve_xliv6czge.png"></a> <br><br> 可以在Unity上集成文件工具的防病毒服务器列表： <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/tz/cg/lm/tzcglmx5obuo9gbpg16qygqnan8.png"></a> <br><br>  MMC控制台及其“防病毒”部分使您可以将NAS服务器连接到防病毒服务器，并调整和设置一些参数来处理文件范围内的文件扫描。 <br><br>  “ Data Mover \ NAS安全设置”部分还允许您执行许多与安全性相关的设置，特别是在NAS服务器上启用事件管理器并在连接到该服务器的计算机管理控制台中查看事件。 的确，日志的大小限制为最大512 KB。 到达哪些事件开始旋转。 可以使用以下路径的NAS服务器管理员权限直接访问日志文件： <br><br>  <b>\\ storage_server_netbios_name \ C $ \。etc \ audit \ security.evt</b> <br><br><h2> 连接到企业网络时提供容错能力 </h2><br> 您可以观看一段简短的视频，了解其工作原理以及如何在Unity中配置LACP和FSN。 这很漂亮。 <br><iframe width="560" height="315" src="https://www.youtube.com/embed/hCYBMtDCD-A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br> 附言：不幸的是，我并没有一口气完成这篇文章；因此，在一篇文章的框架内不能完全体现Unity文件部分的所有功能。 另外，当我计划继续我的想法时，他们“从存储系统的立场上吸引了我”。 因此，如果有人对本文感兴趣，那么也许我将在下一部分中描述其余内容。 我绝对没有涉及设置NFS球，具有本地帐户的独立SMB服务器，创建具有不同协议访问相同数据的多协议NAS服务器，文件复制（现在可以在异步和同步版本中使用）等等。 。 但是，该文章已处于草稿形式将近一个月。 因此，我按原样传播了它，突然之间它将对某人派上用场，这将使我有动力继续并创建第二部分。 <br><br>  PsPs Dell EMC具有Unity VSA的虚拟版本，也可以与共享软件许可证一起使用以进行测试。 不幸的是，只有那些在供应商门户网站上拥有帐户的人才能访问它。 获取应用程序的另一种方法是通过Dell EMC合作伙伴提出请求。 同时，对于文件部分，系统本身具有完整的功能，即使复制也可以。 与铁控制器相比，唯一的显着架构差异是单控制器，缺少FC端口以及对具有免费许可证的“ 4 TB”磁盘池的许可数量的限制。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN419107/">https://habr.com/ru/post/zh-CN419107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN419097/index.html">Mambot-孕妇电报中的机器人</a></li>
<li><a href="../zh-CN419099/index.html">Angular中的WebSockets。 第2部分。产品解决方案</a></li>
<li><a href="../zh-CN419101/index.html">在夜间黑客马拉松上创建游戏</a></li>
<li><a href="../zh-CN419103/index.html">用Lisp写一个简单的翻译器-I</a></li>
<li><a href="../zh-CN419105/index.html">链接到Slurm广播（Kubernetes强化课程）</a></li>
<li><a href="../zh-CN419109/index.html">解释一下Android P中的刘海。如何使用Android Cutout？</a></li>
<li><a href="../zh-CN419111/index.html">食品设计文摘2018年7月</a></li>
<li><a href="../zh-CN419115/index.html">一鸣叫可启动CD和复古游戏</a></li>
<li><a href="../zh-CN419117/index.html">“我很难理解没有看到数学之美的数据科学家的动机”-数据科学家Kirill Danilyuk</a></li>
<li><a href="../zh-CN419119/index.html">万宝龙高级智能笔是迄今为止最昂贵的智能笔</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>