<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüöí ü§üüèº üë® Mes petits relais: Triple Brainfuck, ou qu'est-ce que la folie üçç üåÉ üìÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fig.1: Ordinateur relais BrainfuckPC en arri√®re-plan de son auteur 

 Poursuivant la glorieuse tradition du r√©sum√© annuel de mes projets informatiques...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mes petits relais: Triple Brainfuck, ou qu'est-ce que la folie</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442732/"><img src="https://habrastorage.org/webt/ah/3j/_r/ah3j_rjm_v7teyp8upangmiixnc.jpeg"><br>  <i>Fig.1: Ordinateur relais BrainfuckPC en arri√®re-plan de son auteur</i> <br><br>  Poursuivant la glorieuse tradition du r√©sum√© annuel de mes projets informatiques les plus fous, je vous pr√©sente le troisi√®me et <b>dernier</b> article sur le projet informatique de relais BrainfuckPC. <br><br>  Dans les s√©ries pass√©es: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2017: Mes petits relais: l'ordinateur Brainfuck est magique</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2018: Mes petits relais: l'ordinateur Brainfuck est une r√©alit√©</a> </li></ul><br>  Apr√®s dix ans de r√™veries et de r√©flexions, plus de deux ans de travail et d'assemblage sans h√¢te, je peux affirmer avec confiance que le projet informatique relais a eu lieu.  Malgr√© le fait que l'ordinateur est inutile d'un point de vue pratique, et se bloque √©galement r√©guli√®rement, il est devenu le point de d√©part pour les prochains cyber-projets, non moins fous. <br><br>  Sous le cutter se trouvent des blocs de relais qui sonnent, les calculs de relais les plus rapides au monde, des enveloppements, des indicateurs de vide et bien plus encore. <br><a name="habracut"></a><br><h2>  Langage de programmation Brainfuck </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le langage de programmation brainfuck</a> est peut-√™tre le langage de programmation √©sot√©rique le plus populaire au monde.  Et en m√™me temps, le vrai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Turing est un bourbier complet</a> .  Seulement 8 instructions sur lesquelles vous pouvez √©crire n'importe quoi, mais pour tr√®s longtemps. <br>  Par exemple, il m'a fallu trois jours pour √©crire et d√©boguer le programme de division 355/113, qui imprime 6 d√©cimales sur le terminal. <br><img src="https://habrastorage.org/webt/q_/sh/mx/q_shmxehqypxvxhersztfsggnee.jpeg"><br>  <i>Figure 2: instructions de langage brainfuck</i> <br><br>  La syntaxe enti√®re du langage est construite autour de la RAM pour 30 000 cellules de m√©moire, avec une capacit√© de 8 bits. <br><br><ul><li>  Avec deux instructions <b>+</b> et <b>-,</b> nous modifions la valeur de la cellule de donn√©es actuelle d'une unit√© vers le haut ou vers le bas. </li><li>  Avec deux instructions <b>&lt;</b> et <b>&gt;,</b> nous modifions le pointeur sur la cellule de donn√©es en cours, se d√©pla√ßant ainsi vers la gauche ou la droite dans la m√©moire. </li><li>  Deux autres instructions <b>[</b> et <b>]</b> - nous permettent d'organiser les boucles.  Tout √† l'int√©rieur des supports est le corps de la boucle.  Boucles imbriqu√©es autoris√©es.  La logique de l'instruction est simple - si la valeur de la cellule de donn√©es actuelle n'est pas √©gale √† z√©ro - nous allons effectuer une it√©ration de la boucle, si elle est √©gale, puis sortir de la boucle. </li><li>  Les deux derni√®res instructions <b>.</b>  et <b>,</b> - vous permet d'afficher la valeur de la cellule actuelle dans la console, ou entrez sa RAM.  L'interactivit√© est ainsi r√©alis√©e. </li></ul><br>  Oui, c'est plus que suffisant pour √©crire n'importe quel programme.  L'existence de compilateurs C <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans brainfuck</a> semble le sugg√©rer.  Mais la densit√© du code est inexistante.  Pour effectuer des op√©rations simples, telles que l'ajout des valeurs de deux cellules de m√©moire, vous devez ex√©cuter des centaines d'instructions brainfuck. <br><br><h3>  brainfuck ++ </h3><br>  Essayons d'augmenter la densit√© du code au moins un peu.  Lorsque vous √©tudiez des programmes √©crits dans cette langue, vous pouvez faire attention √† ce qu'ils consistent pour la plupart en s√©quences des m√™mes instructions <b>+ - &lt;&gt;</b> .  Cela conduit beaucoup √† l'id√©e de plier la s√©quence de ces instructions en une seule et d'obtenir une petite augmentation de la productivit√©, qui d'un programme √† l'autre peut atteindre des dizaines de pour cent, et donner une augmentation multiple de la vitesse.  Par exemple, nous rempla√ßons 10 op√©rations d'incr√©mentation par une op√©ration +10.  20 op√©rations de d√©placement du pointeur vers la droite de l'op√©ration&gt; 20 et ainsi de suite. <br><br><img src="https://habrastorage.org/webt/bo/t-/kl/bot-kloextizkugd7kd8dobie5w.jpeg"><br>  <i>Figure 3: instructions de langage brainfuck ++</i> <br><br><h3>  De la th√©orie √† la pratique </h3><br>  Comme vous le comprenez, on ne peut pas simplement prendre et √©crire dans le langage du brainfuck l'op√©ration Rb = Ra + Rb, o√π Ra et Rb sont des cellules de m√©moire.  Tout ce que nous pouvons faire est de changer le contenu d'une cellule en une constante et de v√©rifier si elle est nulle.  Par cons√©quent, pour additionner les deux nombres, tout ce qui nous reste √† faire est de faire +1 pour la cellule Rb et -1 pour la cellule Ra, jusqu'√† ce que le contenu de la cellule Ra devienne nul.  Nous √©crivons ceci sous la forme d'un code en C: <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/*(mem+RbPos) += *mem */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addMov</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Memory &amp;mem, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> RbPos)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (*mem) { mem += RbPos; (*mem)++; mem -= RbPos; (*mem)--; } }</code> </pre> <br>  Par cons√©quent, l'ancienne valeur appara√Ætra dans la cellule RbPos plus ce qu'elle √©tait √† l'adresse source.  classe Memory - un conteneur avec 65k cellules enti√®res.  Sa propri√©t√© principale est que le d√©bordement de la valeur du pointeur le ram√®nera au d√©but du tableau.  Comme dans mon vrai mat√©riel. <br><br>  L'inconv√©nient de la fonction d√©crite est la perte de la valeur d'origine - elle sera remise √† z√©ro.  Ajoutez une autre variable Rc pour l'enregistrer: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* *(mem+RcPos) = *mem *(mem+RbPos) += *mem */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addCpy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Memory &amp;mem, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> RbPos, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> RcPos)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (*mem) { mem += RbPos; (*mem)++; mem -= RbPos; (*mem)--; mem += RcPos; (*mem)++; mem -= RcPos; } }</code> </pre> <br>  Par cons√©quent, le terme copi√© se trouvera dans la cellule RcPos.  Eh bien, dans le cas o√π il y avait autrefois z√©ro. <br><br>  Puisque la notation que j'utilise ressemble beaucoup √† brainfuck ++, nous r√©√©crivons simplement notre fonction en caract√®res bfpp, en prenant RbPos pour 4 et RcPos pour 5 comme exemple: <br><br> <code>[ <br> &gt;&gt;&gt;&gt; <br> + <br> &lt;&lt;&lt;&lt; <br> - <br> &gt;&gt;&gt;&gt;&gt; <br> + <br> &lt;&lt;&lt;&lt;&lt; <br> ] <br></code> <br>  Apr√®s avoir d√©crit toutes les primitives, vous pouvez commencer √† les combiner en structures plus complexes et obtenir le programme des fonctionnalit√©s n√©cessaires.  En cons√©quence, vous pouvez obtenir un programme qui divise 355 par 113 (ou tout autre nombre les uns sur les autres sur 16 bits) <br><br><div class="spoiler">  <b class="spoiler_title">Programme en virgule flottante</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Memory</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Memory() { <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(m_mem, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(m_mem)); memPtr = <span class="hljs-number"><span class="hljs-number">0</span></span>; } Memory&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> += (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> ptr) { memPtr += ptr; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } Memory&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> -= (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> ptr) { memPtr -= ptr; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span>&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> [] (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> ptr) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;m_mem[ptr]; } Memory&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> = (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> ptr) { memPtr = ptr; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> &amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> * () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m_mem[memPtr]; } Memory&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> ++ () { memPtr++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } Memory&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> -- () { memPtr--; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> memPtr; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> m_mem[<span class="hljs-number"><span class="hljs-number">65536</span></span>]; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calcPi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Memory mem; *mem = <span class="hljs-number"><span class="hljs-number">22</span></span>; mem += <span class="hljs-number"><span class="hljs-number">1</span></span>; *mem = <span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (*mem) { mem += <span class="hljs-number"><span class="hljs-number">1</span></span>; (*mem)++; mem -= <span class="hljs-number"><span class="hljs-number">1</span></span>; (*mem)--; mem += <span class="hljs-number"><span class="hljs-number">2</span></span>; (*mem)++; mem -= <span class="hljs-number"><span class="hljs-number">2</span></span>; }<span class="hljs-comment"><span class="hljs-comment">//correct -909 while (*mem) { (*mem)--; } mem -= 1; while (*mem) { mem += 2; while (*mem) { mem += 4; (*mem)++; mem -= 4; (*mem)--; } mem += 4; while (*mem) { (*mem)--; mem -= 4; (*mem)++; mem -= 2; (*mem)--; if (!*mem) { //JZ out goto out; } mem += 6; } mem -= 6; out: mem += 6; if (*mem) { while (*mem) { mem -= 6; (*mem)++; mem += 6; (*mem)--; } mem -= 6; if (*mem) goto out1; } mem -= 5; (*mem)++; mem -= 1; } out1: mem += 10; *mem += 0x50;//P putc(*mem, stderr); *mem += 0x19;//i putc(*mem, stderr); *mem -= 0x2C;//= putc(*mem, stderr); mem -= 9; *mem += 0x30; putc(*mem, stderr); mem += 9; *mem -= 0xf; putc(*mem, stderr); mem -= 10; *mem += 6; while (*mem) { (*mem)--; mem += 1;//mem == 1 //nullCell(mem); while (*mem) { (*mem)--; } mem += 1; //mulConst(mem, 1, 10); while (*mem) { (*mem)--; mem -= 1; (*mem) += 10; mem += 1; } mem += 1; //addCpy(mem, 1, 2); while (*mem) { mem += 1; (*mem)++; mem -= 1; (*mem)--; mem += 2; (*mem)++; mem -= 2; } mem += 3; //nullCell(mem); while (*mem) { (*mem)--; } mem -= 5; while (*mem) { mem += 4; while (*mem) { mem += 6; (*mem)++; mem -= 6; (*mem)--; } mem += 6; while (*mem) { (*mem)--; mem -= 6; (*mem)++; mem -= 4; (*mem)--; if (!*mem)//,  ,      { goto out2; } mem += 10; } mem -= 10; out2: mem += 10; if (*mem) { //addMov(mem, -(6+ 4)); while (*mem) { mem -= 10; (*mem)++; mem += 10; (*mem)--; } mem -= 10; if (*mem) goto out3; } mem -= 5; (*mem)++; mem -= 5; } out3: mem += 4; while (*mem) { mem -= 3; (*mem)++; mem += 3; (*mem)--; } mem += 1;//mem == 6 *mem += 0x30; putc(*mem, stderr); mem += 1;//mem == 7 while (*mem) { (*mem)--; } mem -= 3; while (*mem) { mem -= 1; (*mem)++; mem += 1; (*mem)--; } mem -= 4;// mem == 0 } *mem += 0x0a; putc(*mem, stderr); *mem += 3; putc(*mem, stderr); }</span></span></code> </pre><br></div></div><br><h2>  Architecture de l'ordinateur relais </h2><br>  L'√©l√©ment central du processeur de relais est un additionneur complet 16 bits avec report parall√®le.  Deux registres lui sont connect√©s en entr√©e.  TMP est le registre temporaire dans lequel l'ancienne valeur est plac√©e, et CMD est le registre de commande dans lequel l'instruction et la constante par lesquelles l'ancienne valeur sera modifi√©e sont stock√©es. <br><br>  Par cons√©quent, je peux effectuer des op√©rations brainfuck ++ optimis√©es, et en m√™me temps obtenir des sauts conditionnels complets - Jump If Zero et Jump If Not Zero √† n'importe quel c√¥t√© du programme. <br><br>  Le r√©sultat de l'op√©ration de sommation peut √™tre t√©l√©charg√© soit vers l'un des registres de contexte - AP - avec le num√©ro de la cellule de donn√©es courante, soit IP - avec le num√©ro de l'instruction courante.  De plus, le r√©sultat peut √™tre t√©l√©charg√© dans la cellule RAM actuelle, s'il s'agit d'instructions <b>+</b> et <b>-</b> <br><br><img src="https://habrastorage.org/webt/3n/xu/tw/3nxutw1optzayedhsvxxnoo36hi.gif"><br>  <i>Fig. 4: Architecture de l'ordinateur relais en fonctionnement.</i>  <i>L'√©tape de chargement de la nouvelle instruction est remplac√©e par l'√©tape de son ex√©cution.</i> <br><br>  Tout d'abord, nous devons calculer le num√©ro de la prochaine instruction - c'est-√†-dire  effectuer une op√©ration IP ++.  Pour ce faire, une est ajout√©e √† l'ancienne valeur du registre IP, le r√©sultat est r√©√©crit dans le registre IP et l'instruction suivante est charg√©e √† cette nouvelle adresse, dans le registre CMD. <br><br>  La deuxi√®me √©tape est l'ex√©cution de l'instruction nouvellement charg√©e.  S'il fonctionne avec l'additionneur, le processus de son ex√©cution ressemble au processus de chargement d'une nouvelle instruction - l'ancienne valeur est dans le registre temporaire, nous ajoutons la constante se trouvant dans les bits inf√©rieurs du registre CMD et r√©√©crivons le r√©sultat dans le registre ou la cellule de donn√©es actuelle. <br>  Ainsi, l'instruction est ex√©cut√©e en une seule fois du g√©n√©rateur d'horloge.  Sur un front descendant, nous chargeons l'instruction suivante, sur une augmentation - nous l'ex√©cutons. <br><br><div class="spoiler">  <b class="spoiler_title">pas un bug, mais une fonctionnalit√©</b> <div class="spoiler_text">  Et ici, une caract√©ristique a √©t√© r√©v√©l√©e.  Apr√®s avoir allum√© l'ordinateur, le premier front du g√©n√©rateur d'horloge augmentera et donc - nous devrons ex√©cuter l'instruction en cours, que personne n'a encore charg√©e dans le registre CMD - il y a des z√©ros. <br><br>  Suivez les instructions vides et ... faites IP ++! <br><br>  Par cons√©quent, la cellule de m√©moire z√©ro du programme contient z√©ro et ne sera jamais ex√©cut√©e.  La premi√®re instruction charg√©e √† partir de la m√©moire sera l'instruction √† 0x0001. <br></div></div><br><h4>  Jeu d'instructions </h4><br><img src="https://habrastorage.org/webt/o9/kv/7l/o9kv7lrmoqt_cukesaympkjnwee.jpeg"><br>  <i>Fig.5: Jeu d'instructions de l'ordinateur relais</i> <br><br>  Les instructions sont de 16 bits, o√π les 4 bits de poids fort sont responsables du type d'instruction et les 12 bits de poids faible sont la charge utile.  Dans la plupart des cas, c'est une constante. <br><br><ul><li>  Instruction NOP - ignor√©e. </li><li>  L'instruction CTRLIO est une instruction sp√©ciale dont le comportement est cod√© par le masque de bits de la charge utile.  Tout d'abord, il impl√©mente des commandes pour √©crire sur la console et lire √† partir de la console (en modes synchrones ou asynchrones).  Deuxi√®mement, il vous permet de d√©finir le mode de fonctionnement 16 bits ou 8 bits de la machine.  Et troisi√®mement, √† l'aide de l'instruction CTRLIO.HALT, vous pouvez arr√™ter la machine.  Le plus dr√¥le, c'est que les morceaux de masque <br>  non bloquant.  Vous pouvez les d√©finir au moins en une seule fois, mais le comportement de la machine ne sera pas d√©fini. </li><li>  L'instruction ADD est une op√©ration de cellule de donn√©es.  Modifie la valeur de la cellule par la valeur de la constante.  Dans ce cas, le bit 12 est un bit sign√© et est copi√© dans les bits 13-15.  Par cons√©quent, l'instruction 0x2ffe se transforme en l'op√©ration * AP + = 0x0ffe et l'instruction 0x3ffe se transforme en * AP + = 0xfffe.  L'op√©ration de soustraction est remplac√©e par l'addition d'un nombre n√©gatif. </li><li>  Instruction ADA - impl√©mente l'op√©ration AP + = const et vous permet de naviguer dans la m√©moire. </li><li>  Les instructions JZ et JNZ sont conditionnelles.  Selon le drapeau Z, vous pouvez soit sauter quelques instructions en avant ou en arri√®re, soit rester en place.  Selon le mode de fonctionnement de la machine - 16 ou 8 bits, l'√©tat du drapeau Z est d√©termin√© soit par l'octet de donn√©es le moins significatif soit par le mot entier. </li></ul><br><h2>  Sp√©cifications techniques </h2><br>  <b>BrainfuckPC</b> est un ordinateur 16 bits avec un processeur de relais Reed, une architecture Von Neumann et un ensemble d'instructions Brainfuck ++ <br><br><ul><li>  Nombre total de relais: 578 pi√®ces </li><li>  Le nombre total d'√©l√©ments logiques: 157 pi√®ces </li><li>  Largeur du bus d'adresse: 16 bits </li><li>  Adressage: mot par mot </li><li>  RAM: 128 Ko (64 Kslov) </li><li>  Largeur du bus de donn√©es: 16bit / 8bit </li><li>  Fr√©quence d'horloge (actuelle / maximale): 25 Hz / 40 Hz </li><li>  Consommation √©lectrique: 70W </li><li>  Dimensions hors tout: 110kh650kh140mm </li><li>  Poids: 15kg </li></ul><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_FBjSF-MzYA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Au d√©part, on supposait que l'ordinateur fonctionnerait √† des fr√©quences allant jusqu'√† 100 Hz ... Et ce - pendant une minute - 4 octaves de piano.  Malheureusement, les premiers tests ont montr√© que 40 Hz est le plafond, mais il y en a beaucoup pour le circuit de relais.  d'autant plus lorsque la synchronisation externe est n√©cessaire pour appliquer deux impulsions par cycle - en raison des particularit√©s du circuit de synchronisation avec un signal externe.  80Hz pour la musique, c'est d√©j√† quelque chose. <br><br><h3>  Composition informatique </h3><br><img src="https://habrastorage.org/webt/n1/lr/ks/n1lrkssj0p6m4p1bdwtgvbe-p6i.jpeg"><br>  <i>Fig. 6: Composants principaux de l'ordinateur relais.</i> <br><br>  Examinons de plus pr√®s l'ordinateur.  La quasi-totalit√© du volume de la machine est occup√©e par des processeurs relais.  Pour le moment, tout tient dans cinq blocs, mais il y a de la place pour six - donc si vous le voulez vraiment, plus tard la fonctionnalit√© du processeur peut √™tre √©tendue. <br>  Chacun de ces blocs contient 32 modules, dans chaque module il y a 3 ou 4 relais Reed RES55 et RES64.  L'alimentation de chaque unit√© est de 5 V, 3 A. <br><br><img src="https://habrastorage.org/webt/cw/ch/t2/cwcht2rnwry7uheanptz1ab-6m0.jpeg"><br>  <i>Fig. 7: Un ensemble de blocs et de modules d'un processeur de relais, pr√™t √† √™tre install√© sur un ch√¢ssis.</i> <br><br>  Chaque module est unifi√©.  Connecteur 60x44 mm, 16 broches.  Lors de l'assemblage des blocs logiques, j'ai ins√©r√© le module requis dans un emplacement libre et flash√© les connexions. <br><br><img src="https://habrastorage.org/webt/z3/hm/jc/z3hmjcfecusarg1h4g6znd1gjx8.jpeg"><br>  <i>Fig. 8: Les modules √† bascule D sont v√©rifi√©s pour leur fonctionnement.</i> <br><br>  Rang√©e centrale - blocs additionneurs et blocs de registres.  Au-dessus et au-dessous d'eux se trouvent des verrous 16 bits bas√©s sur RES43, qui commutent le flux de donn√©es entre les blocs.  Toutes les donn√©es tournent ici. <br><br>  La ligne du bas est la ligne des blocs logiques du processeur.  Maintenant, deux blocs sont partiellement remplis, mais si vous le souhaitez vraiment, il est plus que possible de modifier et d'√©tendre les fonctionnalit√©s en raison de l'espace libre. <br><br><img src="https://habrastorage.org/webt/9i/-q/r9/9i-qr9ernsascuejrzsis9skz-u.jpeg"><br>  <i>Fig. 9: Le cadre est assembl√© √† partir d'une feuille d'aluminium de 2 mm, sous d√©coupe laser.</i>  <i>Sur la photo - cadre d√©j√† soud√© et appr√™t√©, pr√™t pour la peinture.</i> <br><br>  La partie sup√©rieure est indicatrice.  Sur la gauche se trouve le bloc d'√©tat de la machine - les indicateurs bas√©s sur l'IV-6 affichent le num√©ro de la cellule m√©moire actuelle et la nuit de l'instruction actuelle, l'instruction elle-m√™me et le compteur g√©n√©ral des instructions ex√©cut√©es.  Ce dernier est tr√®s utile, car si l'√©mulateur, par exemple, dit que jusqu'au premier caract√®re de la console, vous devez ex√©cuter 30 mille instructions, le compteur indiquera clairement o√π se trouve la machine maintenant et quand elle finira de compter. <br><br><img src="https://habrastorage.org/webt/f5/22/ib/f522ibd6awa7acioes26xurustc.jpeg"><br>  <i>Fig. 10: La vue finale de la zone d'indicateur.</i>  <i>Dans le processus de fabrication.</i> <br><br>  Sur la droite se trouve la carte m√©moire - l'√©l√©ment le plus controvers√© de la machine.  Bien que je pense que l'ordinateur est toujours relais, le processeur est d√©finitivement 100% relais.  La p√©riph√©rie est plus moderne.  En particulier, la RAM est une puce de m√©moire statique.  Mais presque tous les cr√©ateurs modernes d'ordinateurs relais le font aussi. <br><br><img src="https://habrastorage.org/webt/_u/bx/oo/_ubxooroz54z4hp4-8tc9trxzpw.jpeg"><br>  <i>Fig.11: Programmateur.</i>  <i>16 lignes d'adresse, 16 lignes de donn√©es, lignes d'alimentation, de terre et de lecture.</i>  <i>Total 36 contacts.</i> <br><br>  √âtant donn√© que la m√©moire des programmes et des donn√©es est partag√©e, quelqu'un ou quelque chose, chaque fois que vous allumez l'ordinateur, doit charger le programme dans la RAM.  Cette t√¢che est attribu√©e au programmeur.  Pour le moment, le programmeur est situ√© sur la carte m√©moire elle-m√™me.  Maintenant, il a exactement deux t√¢ches. <br><br><ol><li>  T√©l√©chargez le programme dans la RAM, car chaque fois que vous mettez sous tension pour le faire manuellement √† l'aide des interrupteurs √† bascule, c'est une paresse banale, bien que cette possibilit√© soit pr√©sente. </li><li>  Surveillez l'√©tat d'une certaine r√©gion de m√©moire et affichez-la sur une matrice LED 32x16. </li></ol><br>  Cela n'affecte pas le processeur, et pour voir en temps r√©el ce qui se passe dans la RAM est tr√®s utile lors du d√©bogage.  Par la suite, lorsque le programmateur est externe, le panneau LED servira √† l'un des modules indicateurs.  Il conna√Æt d√©j√† l'adresse, il reste √† lui donner les donn√©es d'entr√©e. <br><br><img src="https://habrastorage.org/webt/tc/_z/lt/tc_zltb4669xf2mzqxox-hdyvb4.jpeg"><br>  <i>Fig. 12: Sch√©ma fonctionnel des p√©riph√©riques du processeur.</i> <br><br>  Ainsi, dans un avenir proche, les circuits des p√©riph√©riques du processeur ressembleront.  Seules les puces de m√©moire et les circuits d'adaptation de signal avec le circuit de relais resteront sur la carte m√©moire. <br><br>  Gr√¢ce au connecteur de programmation √† 36 broches, vous pouvez connecter le programmateur et t√©l√©charger le firmware sur l'ordinateur.  En plus du programmeur, ayant le convertisseur d'interface n√©cessaire, vous pouvez utiliser n'importe quel autre appareil.  Au moins un lecteur de bande perfor√©e (en passant, j'en ai un, avec un punch punch et m√™me une bobine de bande), au moins un panneau avec des interrupteurs √† bascule. <br><br>  En cons√©quence, la logique de relais fournit une certaine interface et le convertisseur d'interface peut √™tre quelconque.  Par ailleurs, le connecteur d'interface parall√®le sera compatible avec LPT ... <br><br><h3>  D√©monstration du travail et de l'√©tat actuel </h3><br>  Tout d'abord, le programme Hello World de l'article wikipedia a √©t√© ex√©cut√© sur l'ordinateur. <br><br>  Le code source est le suivant: <br><br> <code>++++++++++[&gt;+++++++&gt;++++++++++&gt;+++&gt;+&lt;&lt;&lt;&lt;-]&gt;++ <br> .&gt;+.+++++++..+++.&gt;++.&lt;&lt;+++++++++++++++.&gt;.+++. <br> ------.--------.&gt;+.&gt;. <br></code> <br>  Gr√¢ce au panneau LED, vous pouvez voir clairement comment les donn√©es changent: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/B9O2QeLycdM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Bien qu'√† une fr√©quence de 25 Hz, il soit difficile de garder une trace de ce qui se passe dans la RAM. <br><br>  Une t√¢che plus utile et pratique consiste √† calculer les signes du nombre Pi apr√®s la virgule d√©cimale.  Il est clair que les ordinateurs modernes ont r√©solu ce probl√®me <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jusqu'√† 31,4 billions de caract√®res</a> .  Mais le fait m√™me que BrainfuckPC soit capable d'effectuer cette op√©ration sugg√®re que l'ordinateur relais n'est pas 100% inutile, mais seulement 99,9. <br><br>  Tout d'abord, j'ai trouv√© un <a href="">algorithme de calcul</a> pr√™t √† l'emploi <a href="">√©crit en brainfuck</a> . <br><br> <code>&gt; ++++ (4 digits) <br> [&lt;+&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;++++++++++&lt;&lt;&lt;&lt;&lt;&lt;&lt;-]&gt;+++++[&lt;+++++++++&gt;-]+&gt;&gt;&gt;&gt;&gt;&gt;+[&lt;&lt;+++[&gt;&gt;[-&lt;]&lt;[&gt;]&lt;-]&gt;&gt; <br> [&gt;+&gt;]&lt;[&lt;]&gt;]&gt;[[-&gt;&gt;&gt;&gt;+&lt;&lt;&lt;&lt;]&gt;&gt;&gt;+++&gt;-]&lt;[&lt;&lt;&lt;&lt;]&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;+[-&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;[&lt;+[-&gt;&gt;&gt;&gt;+&lt;&lt;&lt;&lt;]&gt; <br> &gt;&gt;&gt;&gt;]&lt;&lt;&lt;&lt;[&gt;&gt;&gt;&gt;&gt;[&lt;&lt;&lt;&lt;+&gt;&gt;&gt;&gt;-]&lt;&lt;&lt;&lt;&lt;-[&lt;&lt;++++++++++&gt;&gt;-]&gt;&gt;&gt;[&lt;&lt;[&lt;+&lt;&lt;+&gt;&gt;&gt;-]&lt;[&gt;+&lt;-]&lt;++&lt;&lt;+ <br> &gt;&gt;&gt;&gt;&gt;&gt;-]&lt;&lt;[-]&lt;&lt;-&lt;[-&gt;&gt;+&lt;-[&gt;&gt;&gt;]&gt;[[&lt;+&gt;-]&gt;+&gt;&gt;]&lt;&lt;&lt;&lt;&lt;]&gt;[-]&gt;+&lt;&lt;&lt;-[&gt;&gt;+&lt;&lt;-]&lt;]&lt;&lt;&lt;&lt;+&gt;&gt;&gt;&gt;&gt;&gt;&gt; <br> &gt;[-]&gt;[&lt;&lt;&lt;+&gt;&gt;&gt;-]&lt;&lt;++++++++++&lt;[-&gt;&gt;+&lt;-[&gt;&gt;&gt;]&gt;[[&lt;+&gt;-]&gt;+&gt;&gt;]&lt;&lt;&lt;&lt;&lt;]&gt;[-]&gt;+&gt;[&lt;&lt;+&lt;+&gt;&gt;&gt;-]&lt;&lt;&lt; <br> &lt;+&lt;+&gt;&gt;[-[-[-[-[-[-[-[-[-&lt;-&gt;[-&lt;+&lt;-&gt;&gt;]]]]]]]]]]&lt;[+++++[&lt;&lt;&lt;++++++++&lt;++++++++&gt;&gt;&gt;&gt;-]&lt; <br> &lt;&lt;&lt;+&lt;-&gt;&gt;&gt;&gt;[&gt;+&lt;&lt;&lt;+++++++++&lt;-&gt;&gt;&gt;-]&lt;&lt;&lt;&lt;&lt;[&gt;&gt;+&lt;&lt;-]+&lt;[-&gt;-&lt;]&gt;[&gt;&gt;.&lt;&lt;&lt;&lt;[+.[-]]&gt;&gt;-]&gt;[&gt;&gt;.&lt;&lt; <br> -]&gt;[-]&gt;[-]&gt;&gt;&gt;[&gt;&gt;[&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;+&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;-]&lt;&lt;-]]&gt;&gt;[-]&lt;&lt;&lt;[-]&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;]++++++++++.</code> <br>  Un probl√®me - bien qu'il soit dit que ce programme est beaucoup plus rapide que certains autres programmes, il calcule toujours le caract√®re suivant, il est extr√™mement lent. <br><br><img src="https://habrastorage.org/webt/oi/g6/hs/oig6hswjryqide_cvpo8v-4mak0.jpeg"><br>  <i>Fig. 13: Temps n√©cessaire pour sortir N chiffres de Pi apr√®s le point d√©cimal.</i> <br><br>  4 d√©cimales devront attendre pr√®s d'une heure et demie ... <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/5M075jXwQHE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Fig.14: - Pi = 3!</i>  <i>- C'est impoli!</i> <br><br>  Cependant, m√™me deux caract√®res n'ont pas vraiment pu √™tre d√©duits; √† la place, l'ordinateur a d√©clar√© que Pi avait 4 ans et a termin√© le travail. <br><br><img src="https://habrastorage.org/webt/yj/uo/g5/yjuog5bey_tf2prv5p-mte1pivy.jpeg"><br>  <i>Fig. 15: Il sait clairement √† propos de la blague qu'en vertu de la loi martiale, pi peut aller jusqu'√† quatre.</i> <br><br>  J'ai d√©cid√© d'aller dans l'autre sens et j'ai √©crit une calculatrice de fraction <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>355</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>113</mn></mrow><mo>=</mo><mn>3</mn><mo>,</mo><mn>141592</mn><mo>.</mo><mo>.</mo><mo>.</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="27.104ex" height="2.419ex" viewBox="0 -780.1 11669.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMATHI-63" x="1781" y="0"></use><g transform="translate(2215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-35" x="1001" y="0"></use></g><g transform="translate(3716,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-33" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-3D" x="5495" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-33" x="6552" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-2C" x="7052" y="0"></use><g transform="translate(7497,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-34" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-31" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-35" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-39" x="2002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-32" x="2502" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-2E" x="10500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-2E" x="10945" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-2E" x="11391" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>355</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>113</mn></mrow><mo>=</mo><mn>3</mn><mo>,</mo><mn>141592</mn><mo>.</mo><mo>.</mo><mo>.</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> \ frac {355} {113} = 3,141592 ... </script>  .  Pr√©cision - 6 d√©cimales!  C'est le r√©sultat le plus pr√©cis pour les fractions avec des nombres de taille ad√©quate. <br><br>  Apr√®s trois nuits blanches, j'ai √©crit un programme sur brainfuck, capable de diviser deux nombres et de produire le r√©sultat avec une virgule flottante sur le terminal.  Le verdict de l'√©mulateur est le suivant - il faudra 60 000 instructions √† ex√©cuter.  Au dernier, 10 mille par signe: <br><br><img src="https://habrastorage.org/webt/1u/ov/_u/1uov_udftj5ihpsl48rxnomvvwg.jpeg"><br>  <i>Fig. 16: Le temps n√©cessaire pour sortir la prochaine d√©cimale lors du calcul de la fraction.</i> <br><br>  √Ä quelle vitesse les prochaines valeurs appara√Ætront-elles?  Je dois dire tr√®s rapidement par rapport au programme pr√©c√©dent! <br><br>  Mais le bonheur a √©t√© de courte dur√©e - l'ordinateur a commenc√© √† √©chouer en mode 16 bits.  Les diagnostics ont montr√© que la carte m√©moire dupe - elle d√©finit constamment le 13e bit.  Je vais faire une nouvelle carte m√©moire et tout passera, mais pour l'instant je me limiterai √† une fraction <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>22</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>7</mn></mrow><mo>=</mo><mn>3</mn><mo>,</mo><mn>14</mn><mo>.</mo><mo>.</mo><mo>.</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.966ex" height="2.419ex" viewBox="0 -780.1 8166.1 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMATHI-63" x="1781" y="0"></use><g transform="translate(2215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-37" x="3216" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-3D" x="3994" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-33" x="5050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-2C" x="5551" y="0"></use><g transform="translate(5996,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-34" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-2E" x="6997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-2E" x="7442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/442732/&amp;usg=ALkJrhjkoGSU6V1IZGGg0qVP623Dpowl6Q#MJMAIN-2E" x="7887" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>22</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>7</mn></mrow><mo>=</mo><mn>3</mn><mo>,</mo><mn>14</mn><mo>.</mo><mo>.</mo><mo>.</mo></math></span></span><script type="math/tex" id="MathJax-Element-2"> \ frac {22} {7} = 3,14 ... </script>  deux d√©cimales et mode de fonctionnement 8 bits.  Plus important encore, il ne n√©cessite que 1600 instructions √† suivre!  √Ä une fr√©quence de 25 Hz, c'est un peu plus d'une minute. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ZdibUTZKseA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  √Ä plusieurs reprises et avec un coup de sifflet, l'ordinateur fait face √† la t√¢che. <br><br><h3>  √Ä suivre ... </h3><br>  Maintenant, sur l'ordinateur, vous pouvez ex√©cuter des programmes qui ne n√©cessitent pas d'entr√©e utilisateur.  Jusqu'√† pr√©sent, je n'ai pas compl√®tement foir√© l'instruction CTRLIO.CIN :) Et je ne vais pas le faire de sit√¥t.  L'ordinateur est actuellement termin√© √† 98%.  Et apr√®s deux ans de travail, de nombreux projets se sont accumul√©s qui attendent le moment o√π je m'occuperai d'eux. <br><br><div class="spoiler">  <b class="spoiler_title">Par cons√©quent, je passe √† d'autres projets</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/wm/kj/sd/wmkjsdk3-jktuluao4xc9fyln4u.jpeg"><br><br>  Tout d'abord, il s'agit d'un ordinateur √† tube bas√© sur des d√©catrons commutateurs.  J'ai d√©j√† √† la fois un coup de poing et les d√©catrons eux-m√™mes (bien que la plupart du temps A101 - l'ordinateur sortira encore plus lentement que le relais sur eux - nous avons besoin d'A103).  M√™me 700 tubes √† vide sont d√©j√† disponibles et bien plus encore ... <br><br><img src="https://habrastorage.org/webt/fr/n0/hh/frn0hhuyfqosh6dzdbelm62u_bw.jpeg"><br><br>  J'ai pr√©par√© une m√©moire pour cela - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">16 morceaux de cubes de m√©moire int√©gr√©s</a> pour 128 mots de 16 bits chacun.  A l'int√©rieur - plaques de ferrite multi-trous, une sorte de branche m√©moire sur des anneaux de ferrite. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Je n‚Äôoublie pas non plus la pneumonie</a> - mon ami Anton est engag√© dans la nature.  exp√©riences, mais plus sur la prochaine fois. <br></div></div><br>  ... laissant les imperfections suivantes.  Je vais r√©soudre une partie du probl√®me pour le festival fin mai, une partie - non: <br><br><ul><li>  Une nouvelle carte m√©moire sur laquelle seules les puces RAM et leur faisceau sont install√©s.  Il y a un circuit imprim√© pour la carte m√©moire, le circuit imprim√© n'a pas encore √©t√© divorc√©.  √Ä la maison, ce sera trop paresseux pour le faire (un bidirectionnel assez dense), donc j'inclurai cette carte dans la commande lorsque je commanderai des cartes pour quelques autres projets - une horloge m√©canique sur un relais et un pneumoscope. </li><li>  Avec la nouvelle carte m√©moire, des indicateurs de num√©rotation, du mat√©riel d'affichage de terminal normal et une logique ind√©pendante pour la mise √† jour du panneau LED viendront. </li><li>  Le programmeur, ou plut√¥t, le d√©veloppement de firmware pour cela.  En g√©n√©ral, si vous avez une ancienne carte m√©moire, elle est redondante, mais comme le connecteur de programmation est disponible, vous pouvez d√©j√† charger le programme avec. </li><li>  La logique du timing.  Ici, je suis compl√®tement paresseux, car il y a litt√©ralement 3 modules logiques.  Je vais certainement le faire pour le festival fin mai. </li><li>  Instruction de lecture depuis la console.  Il est li√© √† la logique du timing (en fonctionnement synchrone, l'ordinateur doit arr√™ter le fonctionnement et attendre que les donn√©es arrivent). </li><li>  Envoyez une demande au Livre Guinness des records ... En tant que processeur de relais le plus rapide et en m√™me temps le plus lent √† lire.  16 milliFlops n'est pas √† vous de ¬´rentrer un manteau de fourrure en slip¬ª (d'apr√®s les commentaires sur youtube). </li></ul><br><img src="https://habrastorage.org/files/1fb/f24/c16/1fbf24c164974f8fabba8e7e03e5856b.jpg" alt="image"><br><br>  Toute la documentation sur l'ordinateur relais est dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©f√©rentiel sur GitHub</a> , et vous pouvez surveiller son √©tat sur n'importe quel r√©seau social en utilisant les liens de mon profil. <br><br>  UPD: J'ai refus√© de participer au festival. <br>  <s>Et pourtant - du 25 au 26 mai, √† Moscou, sur le territoire de la Bread Factory, se tiendra le premier festival de productions artisanales et de culture DIY <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Antifactory</a> .</s>  <s>J'y serai pr√©sent avec un ordinateur relais et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">j'apporterai</a> aussi un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">contr√¥leur de relais pour auto-arrosage</a> .</s>  <s>L'entr√©e √† l'√©v√©nement est gratuite, vous serez donc √† Moscou ces jours-ci - ne manquez pas la chance de voir mon monstre relais en direct.</s>  <s>Si je l'apporte sain et sauf, je vais certainement le d√©montrer au travail.</s> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr442732/">https://habr.com/ru/post/fr442732/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr442720/index.html">G√©n√©ralisation rapide des marqueurs sur une carte WebGL</a></li>
<li><a href="../fr442722/index.html">Arr√™tez de t√©l√©charger et de stocker des z√©ros</a></li>
<li><a href="../fr442724/index.html">Le film ¬´Office Space¬ª a 20 ans: comment cela a chang√© nos m√©tiers</a></li>
<li><a href="../fr442726/index.html">Le robot gu√©pard du MIT peut faire des sauts en arri√®re et courir vite</a></li>
<li><a href="../fr442730/index.html">Microsoft: la Russie devance les √âtats-Unis et l'Europe dans la mise en ≈ìuvre de l'intelligence artificielle</a></li>
<li><a href="../fr442734/index.html">Comment faire une b√©quille pour Tinkoff Investments de vos propres mains ou des notifications d'action n√©cessaires pour prendre des b√©n√©fices / stop loss</a></li>
<li><a href="../fr442736/index.html">6 jeux de soci√©t√© pour niveler l'anglais</a></li>
<li><a href="../fr442738/index.html">Profilage et tra√ßage avec perf</a></li>
<li><a href="../fr442740/index.html">R√©tro-ing√©nierie au format binaire utilisant les fichiers Korg SNG comme exemple 2e partie</a></li>
<li><a href="../fr442742/index.html">Ordinateur portable Compaq LTE 5000, deuxi√®me partie et demie - Bonus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>