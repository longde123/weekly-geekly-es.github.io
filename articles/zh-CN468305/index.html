<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💭 🖕 ♀️ 程序制作月亮 👬 🕟 🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="不久前，我们建立了一个月球创造系统。 我们的目标是制造与我们的太阳系中存在的卫星相似的大小和组成。 主要的困难是获得此类卫星及其内部的广阔表面，以使它们仍然很有趣。 此外，我们需要以清晰的细节渲染卫星，而不管它们之间的距离如何。 

 该系统假定卫星具有球形底。 测地线网格的创建应用于基础球体，以确...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>程序制作月亮</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468305/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/008/121/e0d/008121e0d8197c4d9d6f6708e536d9ad.png" alt="图片"></div><br> 不久前，我们建立了一个月球创造系统。 我们的目标是制造与我们的太阳系中存在的卫星相似的大小和组成。 主要的困难是获得此类卫星及其内部的广阔表面，以使它们仍然很有趣。 此外，我们需要以清晰的细节渲染卫星，而不管它们之间的距离如何。 <br><br> 该系统假定卫星具有球形底。 测地线网格的创建应用于基础球体，以确保曲面所有部分的面积相同。 系统仅将此结构作为程序生成的计算网格应用；月球的实际表面将比生成网格更平滑。 <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b16/ef1/c39/b16ef1c39e3002d49b6d30ecb2a36a5e.png"></div><br>  <i>测地线</i> <br><br> 为了获得小的锯齿状卫星，低频3D噪声会扭曲基本的几何形状。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/39e/971/5de/39e9715de990094a4c155425d6dd9d0f.jpg"></div><br>  <i>噪声失真的测量范围</i> <br><br> 从这个基础开始，系统使用了一系列同心壳。 每个单元确定随后的同心壳的体积特征。 最外层的外壳定义了月球的表面特性。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ff/e29/a6c/1ffe29a6cb9f66fbcda22b4f1e6d7ac4.jpg"></div><br>  <i>同心壳</i> <br><br> 每个包层可能会因该包层特有的低频3D噪声而失真。 如果选择此生成选项，则内壳甚至可能大于外壳。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/064/56f/4ab/06456f4aba57b3eeab4ebbd25a47978a.png"></div><br>  <i>外壳变形</i> <br><br> 在上面的图中，壳体之间的距离和变形量被放大以更清楚地显示施工过程。 实际上，壳之间的距离会更近，并且它们的变形幅度会成比例地变小。 <br><br> 下面我们将讨论如何创建最外壳。 创建内壳时适用相同的原理，因此我们将不对其进行详细介绍。 <br><br> 程序性月球系统需要实时组件和脱机组件。 实时组件在播放器的计算机上运行。 脱机组件在游戏开发者计算机上运行。 脱机生成组件创建可以快速补充实时组件的信息。 <br><br> 球形壳中的每个顶点都被分类为属于一个单独的生物群落。 生物群系是一组表面属性，包括：高度，材料的分布，标本的放置以及材料的着色。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/292/18d/4d3/29218d4d3fb1e588fc742ccf46d94e61.jpg"></div><br>  <i>生物群落的例子</i> <br><br> 生物群系信息包含丰富的熵属性，例如火山口，干燥的海洋，由引力潮引起的表面裂缝。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a10/4cd/a32/a104cda328cc7e51e19a3c321321d64a.jpg"></div><br>  <i>生物群落信息中记录的大火山口</i> <br><br> 生物群落的定义还包含用于放置物体的规则，这些规则决定了小零件（石头，鹅卵石，壁架等）的位置，频率和随机性。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a8/3bb/76a/9a83bb76a7843923d8774f2e0d2e3754.jpg"></div><br>  <i>摇滚实例</i> <br><br> 每个生物群系都是由图块（图块）放置的元素创建的，因此实时组件可以将相同的信息应用于月球的不同部分以及其他卫星。 生物群系信息的生成应使可能的快速变形和重新排列成为可能，从而减少重复和可预测的环境模式的数量。 <br><br> 该系统使用两种类型的生物群落图块：过渡和隔离。 <br><br> 生物群落的过渡信息发生在生物群落进入相邻生物群落的区域。 孤立的生物群落信息发生在系统保证不存在邻近生物群落的区域。 <br><br> 这两个分开的模式是必需的，因为生物群落的某些元素（例如火山口）只能位于生物群落无法转移到另一个生物群落的区域中，因为生物群落之间的过渡会影响浮雕元素的高度轮廓和外观。 <br><br> 以下是月球的简化示例，它使用三种不同的生物群落：极地，热带和赤道，分别以红色，蓝色和绿色着色。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f5d/d51/35f/f5dd5135fa458abddc2384468f770b11.png"></div><br>  <i>月亮与三个生物群落</i> <br><br> 具有孤立生物群落的区域具有统一的颜色；在具有过渡生物群落的区域中，颜色混合。 <br><br> 该系统使用一组预先计算的噪声将可变性引入生物群落之间的过渡区域，从而创建从一个生物群落到另一个生物群落的有趣且独特的过渡。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abb/a7c/d18/abba7cd18459dccae567bbb832a843fe.png"></div><br>  <i>程序噪声应用于生物群落之间的过渡</i> <br><br> 在上面的图像中，生物群系每个部分的大小相对于月球的大小被放大，以便更清楚地显示创建生物群系的技术。 一个单独的生物群落场所将覆盖大约10 x 10 km。 半径为1,500 km的卫星的表面积将为30,000,000 km <sup>2</sup> 。 覆盖该表面将需要近300,000个此类区域。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/707/9d2/f98/7079d2f982a17f506ab76405a96a14c6.png"></div><br>  <i>半径为1,500 km的月球生物群落网格的分辨率</i> <br><br> 生物群落网格的解析可能导致大量生物群落位点。 系统不会单独跟踪每个站点，因为每个站点的位置都可以通过分析计算得出。 可以从高级生物群系图中分配大多数站点的生物群系。 <br><br> 从远处观看时，高级生物群落图可确定卫星的关键特征。 该系统使用这些地图以更接近的形式生成其他细节，从而在从不同距离查看时，可以保持月球定义的均匀性。 <br><br> 高级生物群落图是2D图像，可以使用2D参数化将其放置在月球表面上。 地图的每个点都包含在表面或内壳的相应位置中普遍存在的生物群落的数字标识符。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/214/4a5/682/2144a56825fc99a706f7498ddddf4c54.png"></div><br>  <i>2D生物群落图</i> <br><br> 上图显示了具有四种不同类型的生物群系的地图（蓝色，红色，黄色和白色）。 使用2D参数化将图像叠加到球体上。 一种可能的参数化如下所示： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/97c/b14/da1/97cb14da1a178f0e11e5925bc6997c40.png"></div><br>  <i>生物群落ID映射的2D参数化</i> <br><br> 除了生物群落识别图，该系统还允许使用其他地图，例如包含高度和表面颜色的地图。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7a9/3b5/012/7a93b5012ca67394a4ac79ebbcb6a5e1.png"></div><br>  <i>长距离月影和渲染</i> <br><br> 每个图像中的一个像素可以覆盖4 km <sup>2</sup> ，因此其创建具有成本效益。 这样的高度图和颜色图可以由程序生成或由艺术家绘制。 在仅使用十几个卫星的项目中，每个月亮都应具有丰富而独特的自然属性，因此最好在此阶段使用艺术家的作品。 <br><br> 下图显示了生成护套表面高度和其他属性的过程： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/008/121/e0d/008121e0d8197c4d9d6f6708e536d9ad.png"></div><br>  <i>用于建造月球的三个秤</i> <br><br> 月亮将至少由一个球形壳组成。 如果存在多个壳体，则系统会根据它们的最大半径和壳体高度的函数来挤压内壳，这是通过执行上述不同比例的过程获得的。 <br><br> 月球设计师为每个壳体创建一个高级别的生物群系分布图，该图上找到的生物群落的生物群系定义以及该生物群落中发现的材料的标识。 <br><br> 该系统认为空气是可接受的材料，因此可以用于在任何壳体中创建空腔。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/069/94f/db9/06994fdb95020a907fa281bc0e0baf0b.png"></div><br>  <i>月球浮雕的横截面，可见各种贝壳</i> <br><br> 单独的壳体也可以是体积对象，其深度由一堆材料设置。 堆栈信息存储在生物群系中。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5b/308/002/d5b30800245d119f324fb378ff56d35e.png"></div><br>  <i>一堆由六种材料组成的材料</i> <br><br> 由于地下物质很少到达地面，因此可以用比生物群落表面物质低得多的分辨率来描述它们，并且本地程序噪声的使用对于玩家来说仍然是看不见的。 <br><br> 材料堆栈的功能可能足以进行布局，因为堆栈中的某些材料可能很少。 生物群落设计者可以自定义堆栈上任何材料的流行程度和样式。 <br><br> 程序生成由GPU着色器和体素CPU算法执行。 <br><br> 着色器为三个比例尺的每一个计算片段的颜色，并根据相机和片段之间的距离混合这些样本。 <br><br> 所有太小而无法在几何图形中对齐的零件。 但仍会影响表面的感知复杂性，它们会根据对材料，生物群系的程序确定或用于确定月球的高级图而实时记录在实时生成的法线图中。 因此，场景中的多边形数量很少。 <br><br> 只要在相机中可以看到月亮，就必须为此付出代价，生物群系和高级清晰度图必须存储在GPU中。 您可以仅对渲染月球当前比例所必需的那些mip纹理使用选择性加载。 由于在更改观察者位置时从GPU进行流式加载和卸载，因此所需的GPU内存总量降至最低。 <br><br> 当由于靠近相机而使单个元素变得足够大时，它们会使用实时体素生成开始出现在几何图形的输出中。 这同样适用于玩家变形或挖出的月亮的所有部分。 如果变化足够大并且可以从轨道上观察到，则自适应场景管理器Voxel Farm会提高所有区域的细节级别（LOD），应用程序认为此变化很重要。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN468305/">https://habr.com/ru/post/zh-CN468305/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN468289/index.html">上午</a></li>
<li><a href="../zh-CN468291/index.html">马克·高尔斯顿（Mark Gaulston）的书“我能听见你的经历”的摘要</a></li>
<li><a href="../zh-CN468293/index.html">Vive Cosmos-HTC的新VR集评</a></li>
<li><a href="../zh-CN468295/index.html">matplotlib的50种阴影-主控​​图（带有完整的Python代码）</a></li>
<li><a href="../zh-CN468299/index.html">在2019年及之后为开发人员开发Oracle的内容</a></li>
<li><a href="../zh-CN468307/index.html">数字取证技巧和窍门：基于IM的电报RAT-第一部分</a></li>
<li><a href="../zh-CN468309/index.html">介绍Cascadia代码字体</a></li>
<li><a href="../zh-CN468311/index.html">使用Python程序清除下载文件夹</a></li>
<li><a href="../zh-CN468313/index.html">介绍Cascadia Code字体</a></li>
<li><a href="../zh-CN468315/index.html">如何在OK.RU API中生成正确的签名（SIG）。 我们处理错误104</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>