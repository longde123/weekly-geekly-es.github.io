<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โฝ๏ธ ๐ โฐ ูุฐูุจ ุจุฑูุงูุฌ PVS-Studio ุฅูู ุงูุณุญุจ - ุชุญููู ุงูุฅุทูุงู ุนูู Travis CI ๐ง๐พ ๐ค๐ป ๐ถ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุงูููุช ุงูุญุงูู ุ ุชุนุฏ ุฃูุธูุฉ Cloud CI ุฎุฏูุฉ ุดุงุฆุนุฉ ุฌุฏูุง. ูู ูุฐู ุงูููุงูุฉ ุณูู ููุถุญ ููู ุ ุจุงุณุชุฎุฏุงู ุงูุฃุฏูุงุช ุงููุชุงุญุฉ ูู PVS-Studio ุ ููููู ุฏูุฌ ุชุญููู ุดูุฑุฉ ุงููุต...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุฐูุจ ุจุฑูุงูุฌ PVS-Studio ุฅูู ุงูุณุญุจ - ุชุญููู ุงูุฅุทูุงู ุนูู Travis CI</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/458072/" style=";text-align:right;direction:rtl">  ูู ุงูููุช ุงูุญุงูู ุ ุชุนุฏ ุฃูุธูุฉ Cloud CI ุฎุฏูุฉ ุดุงุฆุนุฉ ุฌุฏูุง.  ูู ูุฐู ุงูููุงูุฉ ุณูู ููุถุญ ููู ุ ุจุงุณุชุฎุฏุงู ุงูุฃุฏูุงุช ุงููุชุงุญุฉ ูู PVS-Studio ุ ููููู ุฏูุฌ ุชุญููู ุดูุฑุฉ ุงููุตุฏุฑ ูุน ูุธุงู CI ุงูุณุญุงุจู ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ Travis CI ููุซุงู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ee1/252/191/ee125219104f0ff7d27f8c9dfc2db8bf.png" alt="ุงูุตูุฑุฉ 1"></div><br><a name="habracut"></a><br>  ููุงุฐุง ููุธุฑ ุฅูู ุณุญุจ ุทุฑู ุซุงูุซ ููุง ูุตูุน ุบููููุงุ  ููุงู ุนุฏุฏ ูู ุงูุฃุณุจุงุจ ุ ูุงูุณุจุจ ุงูุฑุฆูุณู ูู ุฃู SaaS ูู ุฅุฌุฑุงุก ูููู ูุตุนุจ ุฅูู ุญุฏ ูุง.  ูู ุงููุงูุน ุ ูุนุฏ ุฏูุฌ ุชุญููู PVS-Studio ูุจุงุดุฑุฉ ูุน ูุธุงู ุฃุณุงุณู ุณุญุงุจู ุชุงุจุน ูุฌูุฉ ุฎุงุฑุฌูุฉ (ุณูุงุก ุฃูุงู ุฐูู ููุตุงุช ููุชูุญุฉ ูุซู CircleCI ุฃู Travis CI ุฃู GitLab ุฃู ุจุนุถ ุญููู ุงููุคุณุณุงุช ุงููุชุฎุตุตุฉ ุงููุณุชุฎุฏูุฉ ูู ุดุฑูุฉ ูุงุญุฏุฉ ูุญุฏุฏุฉ ููุท) ูููุฉ ุจุณูุทุฉ ุฅูู ุญุฏ ูุง.  ููุฐุง ูุนูู ุฃูู ูููููุง ุงูููู ุฃู <i>PVS-Studio ูุชููุฑ ุจุงููุนู "ูู ุงูุณุญุจ"</i> .  ููุงู ูุณุฃูุฉ ูุฎุชููุฉ ุชูุงููุง ููู ุชูุธูู ูุชูููุฑ ุงูุจููุฉ ุงูุชุญุชูุฉ ููุซู ูุฐุง ุงูุนูู ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ ุทูุงู ุฃูุงู ุงูุฃุณุจูุน.  ูุฐู ูููุฉ ูุฎุชููุฉ ุชูุงููุง ุ ูููุณ ูุฏู PVS-Studio ุฃู ุฎุทุท ูุชูููุฑ ููุตุฉ ุณุญุงุจุฉ ุฎุงุตุฉ ุจูุง ูุจุงุดุฑุฉ ูุฅุฌุฑุงุก ุงูุชุญููู ุนูููุง. <br><br>
<h2 style=";text-align:right;direction:rtl">  ูุนูููุงุช ุญูู ุงูุจุฑูุงูุฌ ุงููุณุชุฎุฏู </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Travis CI</a> ูู ุฎุฏูุฉ ูุฅูุดุงุก ูุงุฎุชุจุงุฑ ุงูุจุฑุงูุฌ ุงูุชู ุชุณุชุฎุฏู GitHub ูุชุฎุฒูู.  ูุง ูุชุทูุจ Travis CI ุชุบููุฑ ุฑูุฒ ุงูุจุฑูุงูุฌ ูุงุณุชุฎุฏุงู ุงูุฎุฏูุฉ ุ ููู ุงูุฅุนุฏุงุฏุงุช ุชุญุฏุซ ูู ููู <i>.travis.yml</i> ุงูููุฌูุฏ ูู ุฌุฐุฑ ุงููุฎุฒูู. <br><br>  ุณูุชุฎุฐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">LXC</a> (ุญุงููุงุช Linux) ููุดุฑูุน ุงุฎุชุจุงุฑ ููุงุฎุชุจุงุฑ ุจุงุณุชุฎุฏุงู PVS-Studio.  ุฅูู ูุธุงู ุธุงูุฑู ุนูู ูุณุชูู ูุธุงู ุงูุชุดุบูู ูุชุดุบูู ูุซููุงุช ูุชุนุฏุฏุฉ ููุธุงู ุงูุชุดุบูู Linux ุนูู ุนูุฏุฉ ูุงุญุฏุฉ. <br><br>  ุงููุดุฑูุน ุตุบูุฑ ุ ููู ุฃูุซุฑ ูู ูุงูู ููุชูุถูุญ.  ุฅุฎุฑุงุฌ ุงูุฃูุฑ cloc: <br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><tbody><tr><td>  ูุบุฉ <br></td><td>  ูููุงุช <br></td><td>  ูุฑุงุบ <br></td><td>  ุชุนููู <br></td><td>  ูุงููู <br></td></tr><tr><td>  C <br></td><td>  124 <br></td><td>  11937 <br></td><td>  6758 <br></td><td>  50836 <br></td></tr><tr><td>  C / C ++ Header <br></td><td>  65 <br></td><td>  1117 <br></td><td>  3676 <br></td><td>  3774 <br></td></tr></tbody></table></div>  <b>ููุงุญุธุฉ:</b> ูุณุชุฎุฏู ูุทูุฑู LXC ุจุงููุนู Travis CI ุ ูุฐูู ุณูุชุฎุฐ ููู ุงูุชูููู ุงูุฎุงุต ุจูู ูุฃุณุงุณ ููููู ุจุชุญุฑูุฑู ูุฃุบุฑุงุถูุง. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุนุฏูู </h2><br>  ููุจุฏุก ูู Travis CI ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุชุจุน ุงูุฑุงุจุท</a> ูุงููุตุงุฏูุฉ ุจุงุณุชุฎุฏุงู ุญุณุงุจ GitHub. <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1ba/8fc/c5a/1ba8fcc5a0caf41da255093cf4feaa8e.png" alt="ุตูุฑุฉ 17"></div><br>  ูู ุงููุงูุฐุฉ ุงูุชู ุชูุชุญ ุ ุชุญุชุงุฌ ุฅูู ุชูููุถ Travis CI. <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2d7/aec/13d/2d7aec13dec45022c952ff0498a6acae.png" alt="ุงูุตูุฑุฉ 16"></div><br>  ุจุนุฏ ุฅุฐู ุ ุฅุนุงุฏุฉ ุชูุฌูู ุฅูู ุตูุญุฉ ุงูุชุฑุญูุจ "ุฃูู ูุฑุฉ ููุงุ  ูุชูุญ ูู ุงูุจุฏุก! "  <b>ุ</b> ุงูุฐู ูุตู ุจุฅูุฌุงุฒ ูุง ูุฌุจ ุงูููุงู ุจู ุจุนุฏ ุงูุจุฏุก: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชูุนูู ุงููุณุชูุฏุนุงุช ุ </li><li style=";text-align:right;direction:rtl">  ุฃุถู ุงูููู .travis.yml ุฅูู ุงููุณุชูุฏุน ุ </li><li style=";text-align:right;direction:rtl">  ุชุดุบูู ุงูุจูุงุก ุงูุฃูู. </li></ul><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/29c/17f/c83/29c17fc830db9fad9d6d9dcb7fa047d7.png" alt="ุตูุฑุฉ 18"></div><br>  ุณูุจุฏุฃ ูู ุชูููุฐ ูุฐู ุงูููุงุท. <br><br>  ูุฅุถุงูุฉ ูุณุชูุฏุนูุง ุฅูู Travis CI ุ ุงูุชูู ุฅูู ุฅุนุฏุงุฏุงุช ุงูููู ุงูุดุฎุตู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนุจุฑ ุงูุฑุงุจุท</a> ูุงููุฑ ุนูู ุฒุฑ "ุชูุดูุท". <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ab8/1f7/75e/ab81f775edc51c92b3238bf30b40527d.png" alt="ุตูุฑุฉ 19"></div><br>  ุจุนุฏ ุงูููุฑ ุ ูุชู ูุชุญ ูุงูุฐุฉ ูุน ุงุฎุชูุงุฑ ุงููุณุชูุฏุนุงุช ุงูุชู ุณูุชู ููุญ ุชุทุจูู Travis CI ุญู ุงููุตูู ุฅูููุง. <br>  <b>ููุงุญุธุฉ:</b> ูุชูููุฑ ุงููุตูู ุฅูู ุงููุณุชูุฏุน ุ ูุฌุจ ุฃู ูููู ููุญุณุงุจ ุญููู ุงููุณุคูู ุนููู. <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1e8/4fe/351/1e84fe351a57fcff37b5b70ec77e9cc5.png" alt="ุตูุฑุฉ 38"></div><br>  ููุฏ ุงุฎุชุฑูุง ุงููุณุชูุฏุน ุงููุฑุบูุจ ููู ุ ููุคูุฏ ูุฐุง ุงูุชุญุฏูุฏ ูู ุฎูุงู ุงูุฒุฑ "ูุจูู ูุชุซุจูุช" ุ ูุณูุชู ุฅุนุงุฏุฉ ุชูุฌูููุง ุฅูู ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูููู ุงูุดุฎุตู. <br><br>  ูู ุจุฅูุดุงุก ุงููุชุบูุฑุงุช ุงูุชู ุณูุณุชุฎุฏููุง ุนูู ุงูููุฑ ูุฅูุดุงุก ููู ุชุฑุฎูุต ุงููุญูู ูุฅุฑุณุงู ุชูุงุฑูุฑู.  ููููุงู ุจุฐูู ุ ุงูุชูู ุฅูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช - ุฒุฑ "ุงูุฅุนุฏุงุฏุงุช" ุนูู ูููู ุงููุณุชูุฏุน ุงููุฑุบูุจ. <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d35/f44/907/d35f449074bd079c1b35140dd8336173.png" alt="ุตูุฑุฉ 39"></div><br>  ุณูุชู ูุชุญ ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช. <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cfe/c5f/1a8/cfec5f1a8ea19bf2c6e9e63c7af4c68c.png" alt="ุตูุฑุฉ 41"></div><br>  ูุตู ูุตูุฑ ููุฅุนุฏุงุฏุงุช: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุณู "ุนุงู" - ุชุญุฏูุฏ ูุดุบูุงุช ููุงู ุงูุชุดุบูู ุงูุชููุงุฆู ุ </li><li style=";text-align:right;direction:rtl">  ูุณู "ุงูุฅูุบุงุก ุงูุชููุงุฆู" - ูุณูุญ ูู ุจุชูููู ุงูุชุฌููุน ุงูุชููุงุฆู ููุฅูุบุงุก ุ </li><li style=";text-align:right;direction:rtl">  ูุชูุญ ูู ูุณู "ูุชุบูุฑุงุช ุงูุจูุฆุฉ" - ุชุญุฏูุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุชู ุชุญุชูู ุนูู ูู ูู ุงููุนูููุงุช ุงูุนุงูุฉ ูุงูุณุฑูุฉ ุ ูุซู ุจูุงูุงุช ุงูุงุนุชูุงุฏ ุฃู ููุงุชูุญ ssh ุ </li><li style=";text-align:right;direction:rtl">  ูุณู "ูุธุงุฆู ูุฑูู" - ุชุญุฏูุฏ ุฌุฏูู ุฅุทูุงู ุงููููุฉ. </li></ul><br>  ูู ูุณู "ูุชุบูุฑุงุช ุงูุจูุฆุฉ" ุ ูููู ุจุฅูุดุงุก ูุชุบูุฑุงุช <i>PVS_USERNAME</i> ู <i>PVS_KEY</i> ุงูุชู ุชุญุชูู ุ ุนูู ุงูุชูุงูู ุ ุนูู ุงุณู ุงููุณุชุฎุฏู ูููุชุงุญ ุงูุชุฑุฎูุต ูููุญูู ุงูุซุงุจุช.  ุฅุฐุง ูู ููู ูุฏูู ุชุฑุฎูุต PVS-Studio ุฏุงุฆู ุ ูููููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุทูุจ ุชุฑุฎูุต ุชุฌุฑูุจู</a> . <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8aa/731/483/8aa731483fc391273980c7de338f83be.png" alt="ุงูุตูุฑุฉ 5"></div><br>  ูู ุจุฅูุดุงุก ุงููุชุบูุฑุงุช <i>MAIL_USER</i> ู <i>MAIL_PASSWORD ููุฑูุง</i> ุงูุชู ุชุญุชูู ุนูู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ <i>ูุตูุฏูู</i> ุงูุจุฑูุฏ ุ ูุงูุชู <i>ุณูุณุชุฎุฏููุง</i> ูุฅุฑุณุงู ุงูุชูุงุฑูุฑ. <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/37d/a42/9b4/37da429b49812239ab900e3b6fe5a90d.png" alt="ุตูุฑุฉ 4"></div><br>  ุนูุฏ ุจุฏุก ุงููููุฉ ุ ูุฃุฎุฐ Travis CI ุชุนูููุงุช ูู ููู .travis.yml ุงูููุฌูุฏ ูู ุฌุฐุฑ ุงููุฎุฒูู. <br><br>  ุจุงุณุชุฎุฏุงู Travis CI ุ ูููููุง ุชุดุบูู ุงูุชุญููู ุงูุซุงุจุช ูุจุงุดุฑุฉ ูู ุงูุฌูุงุฒ ุงูุธุงูุฑู ุ ุฃู ุงุณุชุฎุฏุงู ุญุงููุฉ ููุนุฏุฉ ูุณุจููุง ููุฐุง ุงูุบุฑุถ.  ูุง ุชุฎุชูู ูุชุงุฆุฌ ูุฐู ุงูุทุฑู ุนู ุจุนุถูุง ุงูุจุนุถ ุ ูููู ุงุณุชุฎุฏุงู ุญุงููุฉ ููุนุฏุฉ ูุณุจููุง ูููู ุฃู ูููู ูููุฏูุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงู ูุฏููุง ุจุงููุนู ุญุงููุฉ ูุน ุจุนุถ ุงูุจูุฆุฉ ุงููุญุฏุฏุฉ ุงูุชู ุชู ูููุง ุจูุงุก ููุชุฌ ุงูุจุฑูุงูุฌ ูุงุฎุชุจุงุฑู ุ ูููุณ ููุงู ุฑุบุจุฉ ูู ุงุณุชุนุงุฏุฉ ูุฐู ุงูุจูุฆุฉ ูู Travis CI . <br><br>  ูููู ุจุฅูุดุงุก ุชูููู ูุชุดุบูู ุงููุญูู ูู ุฌูุงุฒ ุงูุชุฑุงุถู. <br><br>  ููุชุฌููุน ูุงูุงุฎุชุจุงุฑ ุ ุณูุณุชุฎุฏู ุฌูุงุฒูุง ุงูุชุฑุงุถููุง ูุณุชูุฏ ุฅูู Ubuntu Trusty ุ ููููู ุงูุนุซูุฑ ุนูู ูุตูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . <br><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุดูุฑ ุฅูู ุฃู ุงููุดุฑูุน ููุชูุจ ุจูุบุฉ C ูุฃููุง ูุฏุฑุฌ ูุงุฆูุฉ ุงููุชุฑุฌููู ุงูุฐูู ุณูุณุชุฎุฏููู ููุชุฌููุน: <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs">language: c compiler: - gcc - clang</code> </pre> <br>  <b>ููุงุญุธุฉ</b> : ุฅุฐุง ุญุฏุฏุช ุฃูุซุฑ ูู ูุชุฑุฌู ุ ูุณูุชู ุชุดุบูู ุงูููุงู ุจุงูุชูุงุฒู ูุน ูู ูููุง.  ุงูุฑุฃ ุงููุฒูุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุงููุซุงุฆู</a> . <br><br>  ูุจู ุจุฏุก ุงูุฅูุดุงุก ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ูุณุชูุฏุน ูุญูู ูุชุซุจูุช ุงูุชุจุนูุงุช ูุญุฒู ุฅุถุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">before_install: - sudo add-apt-repository ppa:ubuntu-lxc/daily -y - wget -q -O - https:<span class="hljs-comment"><span class="hljs-comment">//files.viva64.com/etc/pubkey.txt | sudo apt-key add - - sudo wget -O /etc/apt/sources.list.d/viva64.list https://files.viva64.com/etc/viva64.list - sudo apt-get update -qq - sudo apt-get install -qq coccinelle parallel libapparmor-dev libcap-dev libseccomp-dev python3-dev python3-setuptools docbook2x libgnutls-dev libselinux1-dev linux-libc-dev pvs-studio libio-socket-ssl-perl libnet-ssleay-perl sendemail ca-certificates</span></span></code> </pre> <br>  ูุจู ุจูุงุก ุงููุดุฑูุน ุ ุชุญุชุงุฌ ุฅูู ุฅุนุฏุงุฏ ุงูุจูุฆุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">script: - ./coccinelle/run-coccinelle.sh -i - git diff --<span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>-code - <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> CFLAGS=<span class="hljs-string"><span class="hljs-string">"-Wall -Werror"</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> LDFLAGS=<span class="hljs-string"><span class="hljs-string">"-pthread -lpthread"</span></span> - ./autogen.sh - rm -Rf build - mkdir build - cd build - ../configure --enable-tests --with-distro=unknown</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ููู ุจุชุฑุฎูุต ูุชุดุบูู ุชุญููู ุงููุดุฑูุน. <br><br>  ููุดุฆ ุงูุฃูุฑ ุงูุฃูู ููู ุชุฑุฎูุต ูููุญูู.  ุชุคุฎุฐ ุงูุจูุงูุงุช ูููุชุบูุฑุงุช <i>$ PVS_USERNAME</i> ู <i>$ PVS_KEY</i> ูู ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">- pvs-studio-analyzer credentials $PVS_USERNAME $PVS_KEY -o PVS-Studio.lic</code> </pre> <br>  ูุจุฏุฃ ุงูุฃูุฑ ุงูุชุงูู ูู ุชุชุจุน ุชุฌููุน ุงููุดุฑูุน: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">- pvs-studio-analyzer trace -- make -j4</code> </pre> <br>  ุจุนุฏ ุฃู ูุจุฏุฃ ุงูุชุญููู ุงูุซุงุจุช. <br>  <b>ููุงุญุธุฉ:</b> ุนูุฏ ุงุณุชุฎุฏุงู ุชุฑุฎูุต ุชุฌุฑูุจู ุ ูุฌุจ ุนููู ุชุญุฏูุฏ ุงููุนููุฉ - <i>disableLicenseExpirationCheck</i> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> - pvs-studio-analyzer analyze -j2 -l PVS-Studio.lic -o PVS-Studio-${CC}.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> โ-disableLicenseExpirationCheck</code> </pre> <br>  ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ ุงูุฃุฎูุฑ ุ ูุชู ุชุญููู ููู ูุชุงุฆุฌ ุงููุญูู ุฅูู ุชูุฑูุฑ html. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">- plog-converter -t html PVS-Studio-${CC}.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> -o PVS-Studio-${CC}.html</code> </pre> <br>  ูุธุฑูุง ูุฃู TravisCI ูุง ูุณูุญ ุจุชุบููุฑ ุชูุณูู ุฅุนูุงูุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุ ูุณูู ูุณุชุฎุฏู ุญุฒูุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุฅุฑุณุงู ุงูุชูุงุฑูุฑ ูู ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">- sendemail -t mail@domain.com -u <span class="hljs-string"><span class="hljs-string">"PVS-Studio $CC report, commit:$TRAVIS_COMMIT"</span></span> -m <span class="hljs-string"><span class="hljs-string">"PVS-Studio $CC report, commit:$TRAVIS_COMMIT"</span></span> -s smtp.gmail.com:<span class="hljs-number"><span class="hljs-number">587</span></span> -xu $MAIL_USER -xp $MAIL_PASSWORD -o tls=yes -f $MAIL_USER -a PVS-Studio-${CC}.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> PVS-Studio-${CC}.html</code> </pre> <br>  ุงููุต ุงููุงูู ูููู ุงูุชูููู ูุชุดุบูู ุงููุญูู ูู ุฌูุงุฒ ุงูุชุฑุงุถู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">language: c compiler: - gcc - clang before_install: - sudo add-apt-repository ppa:ubuntu-lxc/daily -y - wget -q -O - https:<span class="hljs-comment"><span class="hljs-comment">//files.viva64.com/etc/pubkey.txt | sudo apt-key add - - sudo wget -O /etc/apt/sources.list.d/viva64.list https://files.viva64.com/etc/viva64.list - sudo apt-get update -qq - sudo apt-get install -qq coccinelle parallel libapparmor-dev libcap-dev libseccomp-dev python3-dev python3-setuptools docbook2x libgnutls-dev libselinux1-dev linux-libc-dev pvs-studio libio-socket-ssl-perl libnet-ssleay-perl sendemail ca-certificates script: - ./coccinelle/run-coccinelle.sh -i - git diff --exit-code - export CFLAGS="-Wall -Werror" - export LDFLAGS="-pthread -lpthread" - ./autogen.sh - rm -Rf build - mkdir build - cd build - ../configure --enable-tests --with-distro=unknown - pvs-studio-analyzer credentials $PVS_USERNAME $PVS_KEY -o PVS-Studio.lic - pvs-studio-analyzer trace -- make -j4 - pvs-studio-analyzer analyze -j2 -l PVS-Studio.lic -o PVS-Studio-${CC}.log --disableLicenseExpirationCheck - plog-converter -t html PVS-Studio-${CC}.log -o PVS-Studio-${CC}.html - sendemail -t mail@domain.com -u "PVS-Studio $CC report, commit:$TRAVIS_COMMIT" -m "PVS-Studio $CC report, commit:$TRAVIS_COMMIT" -s smtp.gmail.com:587 -xu $MAIL_USER -xp $MAIL_PASSWORD -o tls=yes -f $MAIL_USER -a PVS-Studio-${CC}.log PVS-Studio-${CC}.html</span></span></code> </pre> <br>  ูุชุดุบูู ูุญูู ุซุงุจุช ูู ุญุงููุฉ ุ ูู ุฃููุงู ุจุฅูุดุงุฆู ุจุงุณุชุฎุฏุงู Dockerfile ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">FROM docker.io/ubuntu:trusty ENV CFLAGS=<span class="hljs-string"><span class="hljs-string">"-Wall -Werror"</span></span> ENV LDFLAGS=<span class="hljs-string"><span class="hljs-string">"-pthread -lpthread"</span></span> RUN apt-get update &amp;&amp; apt-get install -y software-properties-common wget \ &amp;&amp; wget -q -O - https:<span class="hljs-comment"><span class="hljs-comment">//files.viva64.com/etc/pubkey.txt | sudo apt-key add - \ &amp;&amp; wget -O /etc/apt/sources.list.d/viva64.list https://files.viva64.com/etc/viva64.list \ &amp;&amp; apt-get update \ &amp;&amp; apt-get install -yqq coccinelle parallel libapparmor-dev libcap-dev libseccomp-dev python3-dev python3-setuptools docbook2x libgnutls-dev libselinux1-dev linux-libc-dev pvs-studio git libtool autotools-dev automake pkg-config clang make libio-socket-ssl-perl libnet-ssleay-perl sendemail ca-certificates \ &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span></code> </pre> <br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฏ ูุจุฏู ููู ุงูุชูููู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">before_install: - docker pull docker.io/oandreev/lxc env: - CC=gcc - CC=clang script: - docker run --rm --cap-add SYS_PTRACE -v $(pwd):/pvs -w /pvs docker.io/oandreev/lxc /bin/bash -c <span class="hljs-string"><span class="hljs-string">" ./coccinelle/run-coccinelle.sh -i &amp;&amp; git diff --exit-code &amp;&amp; ./autogen.sh &amp;&amp; mkdir build &amp;&amp; cd build &amp;&amp; ../configure CC=$CC &amp;&amp; pvs-studio-analyzer credentials $PVS_USERNAME $PVS_KEY -o PVS-Studio.lic &amp;&amp; pvs-studio-analyzer trace -- make -j4 &amp;&amp; pvs-studio-analyzer analyze -j2 -l PVS-Studio.lic -o PVS-Studio-$CC.log --disableLicenseExpirationCheck &amp;&amp; plog-converter -t html -o PVS-Studio-$CC.html PVS-Studio-$CC.log &amp;&amp; sendemail -t mail@domain.com -u 'PVS-Studio $CC report, commit:$TRAVIS_COMMIT' -m 'PVS-Studio $CC report, commit:$TRAVIS_COMMIT' -s smtp.gmail.com:587 -xu $MAIL_USER -xp $MAIL_PASSWORD -o tls=yes -f $MAIL_USER -a PVS-Studio-${CC}.log PVS-Studio-${CC}.html"</span></span></code> </pre> <br>  ููุง ุชุฑูู ุ ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ูููู ุจุฃู ุดูุก ุฏุงุฎู ุงูุฌูุงุฒ ุงูุธุงูุฑู ุ ููู ุงูุฅุฌุฑุงุกุงุช ุงูุฎุงุตุฉ ุจุชุฌููุน ุงููุดุฑูุน ูุงุฎุชุจุงุฑู ุชุญุฏุซ ุฏุงุฎู ุงูุญุงููุฉ. <br><br>  <b>ููุงุญุธุฉ</b> : ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุญุงููุฉ ุ ูุฌุจ ุนููู ุชุญุฏูุฏ <i>ุงููุนููุฉ --cap-add SYS_PTRACE</i> ุฃู <i>- Sececp-opt seccomp: ูุนููุฉ ุบูุฑ ูุญุตูุฑุฉ</i> ุ ุญูุซ ูุชู ุงุณุชุฎุฏุงู ุงุณุชุฏุนุงุก ูุธุงู ptrace ูุชุฌููุน ุงูุชุชุจุน. <br><br>  ูููู ุจุชุญููู ููู ุงูุชูููู ูู ุฌุฐุฑ ุงููุณุชูุฏุน ููุฑู ุฃู Travis CI ุชููู ุฅุฎุทุงุฑูุง ุนู ูุฌูุฏ ุชุบููุฑุงุช ูู ุงููุดุฑูุน ูุจุฏุฃูุง ุงูุชุฌููุน ุชููุงุฆููุง. <br><br>  ูููู ุงูุงุทูุงุน ุนูู ูุนูููุงุช ููุตูุฉ ุญูู ุชูุฏู ุงูุชุฌููุน ูุงูุชุญูู ูู ูุญูู ูู ูุญุฏุฉ ุงูุชุญูู. <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/00a/846/95d/00a84695de9e00013c89760219f5292e.png" alt="ุงูุตูุฑุฉ 2"></div><br>  ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูุงุฎุชุจุงุฑุงุช ุ ุณูุชููู ุญุฑููู ูู ุงูุจุฑูุฏ: ุฃุญุฏููุง ูุน ูุชุงุฆุฌ ุงูุชุญููู ุงูุซุงุจุช ูุจูุงุก ุงููุดุฑูุน ุจุงุณุชุฎุฏุงู gcc ุ ูุงูุซุงูู ูุน clang ุ ุนูู ุงูุชูุงูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุจุงุฎุชุตุงุฑ ุนู ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ </h2><br>  ุจุดูู ุนุงู ุ ูุฅู ุงููุดุฑูุน ูุธูู ุชูุงููุง ุ ุญูุซ ุฃุตุฏุฑ ุงููุญูู 24 ุชุญุฐูุฑูุง ูุชูุณุทูุง ู 46 ุชุญุฐูุฑูุง ููุท.  ูุฅุธูุงุฑ ุงูุนูู ุ ููุฑ ูู ุจุนุถ ุงูุฅุนูุงูุงุช ุงููููุฉ: <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุธุฑูู ุงูุฒุงุฆุฏุฉ ูู ุญุงูุฉ </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V590</a> ููุฑ ูู ูุญุต <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุนุจูุฑ</a> 'ret! = (- 1) &amp;&amp; ret == 1'.  ุงูุชุนุจูุฑ ููุฑุท ุฃู ูุญุชูู ุนูู ุฎุทุฃ ูุทุจุนู.  attach.c 107 <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> EOF -1 static struct lxc_proc_context_info *lxc_proc_get_context_info(pid_t pid) { .... while (getline(&amp;</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">line</span></span></span><span class="hljs-meta">, &amp;line_bufsz, proc_file) != -1) { ret = sscanf(</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">line</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CapBnd: %llx"</span></span></span><span class="hljs-meta">, &amp;info-&gt;capability_mask); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (ret != EOF &amp;&amp; ret == 1) </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// &lt;= { found = true; break; } } .... }</span></span></span></span></code> </pre> <br>  ุฅุฐุง ูุงู <i>ret == 1</i> ุ ููู ุจุงูุชุฃููุฏ ูุง ูุณุงูู -1 (EOF).  ุงูุชุญูู ุงูููุฑุท ูู ุงูุตุญุฉ ุ <i>ret! = EOF</i> ูููู ุฅุฒุงูุชูุง. <br><br>  ุชู ุฅุตุฏุงุฑ ุชุญุฐูุฑูู ุขุฎุฑูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V590 ููุฑ ูู ูุญุต ุชุนุจูุฑ 'ret! = (- 1) &amp;&amp; ret == 1'.  ุงูุชุนุจูุฑ ููุฑุท ุฃู ูุญุชูู ุนูู ุฎุทุฃ ูุทุจุนู.  attach.c 579 </li><li style=";text-align:right;direction:rtl">  V590 ููุฑ ูู ูุญุต ุชุนุจูุฑ 'ret! = (- 1) &amp;&amp; ret == 1'.  ุงูุชุนุจูุฑ ููุฑุท ุฃู ูุญุชูู ุนูู ุฎุทุฃ ูุทุจุนู.  attach.c 583 </li></ul><br><h3 style=";text-align:right;direction:rtl">  ููุฏุงู ุจุช ุนุงููุฉ </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V784</a> ุญุฌู ููุงุน ุงูุจุช ุฃูู ูู ุญุฌู ุงููุนุงูู ุงูุฃูู.  ูุฐุง ุณูู ูุณุจุจ ููุฏุงู ุฃุนูู ุจุช.  conf.c 1879 <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mount_opt</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *name; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> clear; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> flag; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse_mntopt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *opt, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *flags, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> **data, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mount_opt</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mo</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/* If opt is found in mount_opt, set or clear flags. * Otherwise append it to data. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (mo = &amp;mount_opt[<span class="hljs-number"><span class="hljs-number">0</span></span>]; mo-&gt;name != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; mo++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">strncmp</span></span>(opt, mo-&gt;name, <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(mo-&gt;name)) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mo-&gt;clear) { *flags &amp;= ~mo-&gt;flag; <span class="hljs-comment"><span class="hljs-comment">// &lt;= } else { *flags |= mo-&gt;flag; } return; } } .... }</span></span></code> </pre> <br>  ุถูู Linux ุ ูุนุฏ <i>long</i> ูุชุบูุฑูุง ุตุญูุญูุง 64 ุจุช ุ <i>ุนูุงูุฉ mo&gt;&gt;</i> ูุชุบูุฑ ุนุฏุฏ ุตุญูุญ 32 ุจุช.  ุฅู ุงุณุชุฎุฏุงู <i>ุนูุงูุฉ mo&gt;&gt;</i> ูููุงุน ููุทู ุณููุชุฌ ุนูู ููุฏ 32 ุจุช.  ุตุจ ุถููู ูู ููุงุน ุงูุจุช ุฅูู ูุชุบูุฑ ุนุฏุฏ ุตุญูุญ 64 ุจุช ุจุนุฏ ุฅุฌุฑุงุก ุงูุนูุงุณ bitwise.  ุงูุจุชุงุช ุงูุนุงููุฉ ููุฐุง ุงูููุงุน ุณุชููู ุตูุฑุง. <br><br>  ุดุฑุญ ูุน ูุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> x; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> y; .... x &amp;= ~y;</code> </pre> <br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1a3/59f/a71/1a359fa7163d8a99c8632ffc17cf7eb0.png" alt="ุงูุตูุฑุฉ 3"></div><br><br>  ุงูููุฏ ุงูุตุญูุญ ูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">*flags &amp;= ~(<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>)(mo-&gt;flag);</code> </pre> <br>  ุฃุตุฏุฑ ุงููุญูู ุชุญุฐูุฑุง ููุงุซูุง ุขุฎุฑ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V784 ุญุฌู ููุงุน ุงูุจุช ุฃูู ูู ุญุฌู ุงููุนุงูู ุงูุฃูู.  ูุฐุง ุณูู ูุณุจุจ ููุฏุงู ุฃุนูู ุจุช.  Conf.c 1933 </li></ul><br><h3 style=";text-align:right;direction:rtl">  ุฏูุฑุฉ ูุดุจููุฉ </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V612</a> "ุนูุฏุฉ" ุบูุฑ ูุดุฑูุทุฉ ุฏุงุฎู ุญููุฉ.  conf.c 3477 <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> lxc_list_for_each(__iterator, __list) \ for (__iterator = (__list)-&gt;next; __iterator != __list; \ __iterator = __iterator-&gt;next) static bool verify_start_hooks(struct lxc_conf *conf) { char path[PATH_MAX]; struct lxc_list *it; lxc_list_for_each (it, &amp;conf-&gt;hooks[LXCHOOK_START]) { int ret; char *hookname = it-&gt;elem; ret = snprintf(path, PATH_MAX, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"%s%s"</span></span></span><span class="hljs-meta">, conf-&gt;rootfs.path ? conf-&gt;rootfs.mount : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, hookname); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (ret </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt; 0 || ret &gt;= PATH_MAX) return false; ret = access(path, X_OK); if (ret &lt; 0) { SYSERROR("Start hook \"%s\" not found in container", hookname); return false; } return true; // &lt;= } return true; }</span></span></span></span></code> </pre> <br>  ุชุจุฏุฃ ุงูุฏูุฑุฉ ูุนูุฏ ุฃูู ุชูุฑุงุฑ ููุง.  ุฑุจูุง ูุฐุง ูุงู ุงูููุตูุฏ ุ ูููู ุจุนุฏ ุฐูู ูููู ุญุฐู ุงูุฏูุฑุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุฌุงูุฒ ุญุฏูุฏ ูุฌููุนุฉ </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V557</a> ูุตูููุฉ ุบูุฑ ููููุฉ.  ูุฏ ุชุตู ูููุฉ ูุคุดุฑ ุงูุจุงูุชุงุช -1 ุฅูู -1.  network.c 2570 <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lxc_create_network_unpriv_exec</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *lxcpath, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *lxcname, struct lxc_netdev *netdev, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">pid_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pid, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hooks_version)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bytes; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> buffer[PATH_MAX] = {<span class="hljs-number"><span class="hljs-number">0</span></span>}; .... bytes = lxc_read_nointr(pipefd[<span class="hljs-number"><span class="hljs-number">0</span></span>], &amp;buffer, PATH_MAX); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bytes &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { SYSERROR(<span class="hljs-string"><span class="hljs-string">"Failed to read from pipe file descriptor"</span></span>); close(pipefd[<span class="hljs-number"><span class="hljs-number">0</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { buffer[bytes - <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; } .... }</code> </pre> <br>  ุชุชู ูุฑุงุกุฉ ุจุงูุช ูู ุงูุฅุฎุฑุงุฌ ูู ุงููุฎุฒู ุงููุคูุช.  ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ ุ <i>ุณุชูุฑุฌุน</i> ุงูุฏุงูุฉ <i>lxc_read_nointr</i> ูููุฉ ุณุงูุจุฉ.  ุฅุฐุง ุณุงุฑุช ุงูุฃููุฑ ุนูู ูุง ูุฑุงู ุ ูุณูุชู ูุชุงุจุฉ ุงููุญุทุฉ ุงูุฎุงููุฉ ุจุงุนุชุจุงุฑูุง ุงูุนูุตุฑ ุงูุฃุฎูุฑ.  ููุน ุฐูู ุ ุฅุฐุง ุชูุช ูุฑุงุกุฉ 0 ุจุงูุช ุ ูุณูุฎุฑุฌ ุงููุฎุฒู ุงููุคูุช ูู ุงูุญุฏูุฏ ุ ููุง ูุคุฏู ุฅูู ุณููู ุบูุฑ ูุญุฏุฏ. <br><br>  ุฃุตุฏุฑ ุงููุญูู ุชุญุฐูุฑุง ููุงุซูุง ุขุฎุฑ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V557 ูุตูููุฉ ุบูุฑ ููููุฉ.  ูุฏ ุชุตู ูููุฉ ูุคุดุฑ ุงูุจุงูุชุงุช -1 ุฅูู -1.  network.c 2725 </li></ul><br><h3 style=";text-align:right;direction:rtl">  ุชุฌุงูุฒ ุณุนุฉ ุงููุฎุฒู ุงููุคูุช </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V576</a> ุชูุณูู ุบูุฑ ุตุญูุญ.  ุงููุธุฑ ูู ุงูุชุญูู ูู ุงููุณูุทุฉ ุงููุนููุฉ ุงูุซุงูุซุฉ ููุฏุงูุฉ 'sscanf'.  ูู ุงูุฎุทูุฑ ุงุณุชุฎุฏุงู ูุญุฏุฏุงุช ุงูุณูุณูุฉ ุฏูู ุชุญุฏูุฏ ููุงุตูุงุช ุงูุนุฑุถ.  ุชุฌุงูุฒ ุณุนุฉ ุงููุฎุฒู ุงููุคูุช ุฃูุฑ ูููู.  lxc_unshare.c 205 <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lookup_user</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *oparg, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uid_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *uid)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> name[PATH_MAX]; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">sscanf</span></span>(oparg, <span class="hljs-string"><span class="hljs-string">"%u"</span></span>, uid) &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/* not a uid -- perhaps a username */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">sscanf</span></span>(oparg, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>, name) &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-comment"><span class="hljs-comment">// &lt;= { free(buf); return false; } .... } .... }</span></span></code> </pre> <br>  ูุฏ ูููู ุงุณุชุฎุฏุงู <i>sscanf</i> ูู ูุฐู ุงูุญุงูุฉ ุฃูุฑูุง ุฎุทูุฑูุง ุ ูุฃูู ุฅุฐุง ูุงู ุทูู ุงููุฎุฒู ุงููุคูุช ูู <i>oparq</i> ุฃูุจุฑ ูู ุทูู ุงููุฎุฒู ุงููุคูุช <i>ููุงุณู</i> ุ ูุณูู ููุชูู ุฅูู ุงูุฎุงุฑุฌ ุนูุฏ ุชูููู ุงููุฎุฒู ุงููุคูุช <i>ููุงุณู</i> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br>  ููุง ุฑุฃููุง ุ ูุนุฏ ุฅุนุฏุงุฏ ูุญุต ุซุงุจุช ููุญูู ุงูููุฏ ููุดุฑูุนูุง ูู ุงูุณุญุงุจุฉ ูููุฉ ุจุณูุทุฉ ุฅูู ุญุฏ ูุง.  ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ููุท ุฅูู ุฅุถุงูุฉ ููู ูุงุญุฏ ุฅูู ุงููุณุชูุฏุน ููุถุงุก ุงูุญุฏ ุงูุฃุฏูู ูู ุงูููุช ูู ุฅุนุฏุงุฏ ูุธุงู CI.  ูุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ุฃุฏุงุฉ ุชุชูุญ ูู ุชุญุฏูุฏ ุงูุดูุฑุฉ ุงูุฅุดูุงููุฉ ูู ูุฑุญูุฉ ุงููุชุงุจุฉ ุ ููุง ุชุณูุญ ููุฃุฎุทุงุก ุจุงููุตูู ุฅูู ุงููุฑุงุญู ุงูุชุงููุฉ ูู ุงูุงุฎุชุจุงุฑ ุ ุญูุซ ูุณุชุบุฑู ุชุตุญูุญูุง ูุฒูุฏูุง ูู ุงูููุช ูุงูููุงุฑุฏ. <br><br>  ุจุงูุทุจุน ุ ูุง ููุชุตุฑ ุงุณุชุฎุฏุงู PVS-Studio ูุน ุงูููุตุงุช ุงูุณุญุงุจูุฉ ุนูู Travis CI.  ููุงุณูุง ุนูู ุงูุทุฑููุฉ ุงูููุถุญุฉ ูู ุงูููุงูุฉ ุ ูุน ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุงุฎุชูุงูุงุช ุ ูููู ุฏูุฌ ุชุญููู PVS-Studio ูุน ุญููู CI ุงูุดุงุฆุนุฉ ุงูุฃุฎุฑู ุงููุณุชูุฏุฉ ุฅูู ูุฌููุนุฉ ุงููุธุฑุงุก ุ ูุซู CircleCI ู GitLab ุ ุฅูุฎ. <br><br><h2 style=";text-align:right;direction:rtl">  ุฑูุงุจุท ูููุฏุฉ </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู ุงูุนุซูุฑ ุนูู ูุนูููุงุช ุฅุถุงููุฉ ุญูู ุฅุทูุงู PVS-Studio ุนูู ูุธุงูู ุงูุชุดุบูู Linux ู MacOS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . </li><li style=";text-align:right;direction:rtl">  ููููู ุฃู ุชูุฑุฃ ุนู ุฅูุดุงุก ูุชูููู ูุงุณุชุฎุฏุงู ุงูุญุงููุงุช ูุน ูุญูู ุซุงุจุช PVS-Studio ุงููุซุจุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุซุงุฆู TravisCI</a> . </li></ul><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png" align="left"></a> </p><br><br>  ุฅุฐุง ููุช ุชุฑุบุจ ูู ูุดุงุฑูุฉ ูุฐู ุงูููุงูุฉ ูุน ุฌูููุฑ ูุชุญุฏุซ ุงูุฅูุฌููุฒูุฉ ุ ูุงูุฑุฌุงุก ุงุณุชุฎุฏุงู ุงูุฑุงุจุท ุงูุฎุงุต ุจุงูุชุฑุฌูุฉ: Oleg Andreev.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PVS-Studio ูู ุงูุณุญุจ - ุชุญููู ุงูุชุญููู ุนูู ุชุฑุงููุณ ุขู</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar458072/">https://habr.com/ru/post/ar458072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar458060/index.html">ุฎูู ุชุธููู ุงูุนุดุจ ูู ูุญุฑู ุงููุญุฏุฉ</a></li>
<li><a href="../ar458062/index.html">ุจุฑูุงูุฌ UserGate Platform</a></li>
<li><a href="../ar458064/index.html">PVS-Studio in the Clouds - ุชุดุบูู ุงูุชุญููู ุนูู Travis CI</a></li>
<li><a href="../ar458068/index.html">PVS- ุณุชูุฏูู ูุจุฑูุงูุฌ Visual Studio</a></li>
<li><a href="../ar458070/index.html">PVS- ุณุชูุฏูู ูุจุฑูุงูุฌ Visual Studio</a></li>
<li><a href="../ar458074/index.html">ุงูุฐูุงุจ ุงููุบุฉ: ุงุฎุชูุงุฑ ORM</a></li>
<li><a href="../ar458076/index.html">ุงูุชุณููู ูุน ML ุตูุน ุงููุฑุงุฑ</a></li>
<li><a href="../ar458080/index.html">25 ููููู ุ ููุณูู - QIWI iOS Meetup</a></li>
<li><a href="../ar458084/index.html">50 ูุงุฏุฉ ูุฎุชุงุฑุฉ ุญูู ุฃุฑุจุงุญ ุงูููุณููููู ุ ูุงูุตูุช ูู ุงูุฃูุนุงุจ ูุงูุฃููุงู ุ ูุงูุฃุฏูุงุช ุบูุฑ ุงูุนุงุฏูุฉ ูุงููุฏููุฉ ุทู ุงููุณูุงู</a></li>
<li><a href="../ar458088/index.html">ุฃูุถู ุชูุฒูุนุงุช ููููุณ ูุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงูุฃูุฏู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>