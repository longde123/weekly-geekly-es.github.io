<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÄ üöΩ üßëüèø‚Äçü§ù‚Äçüßëüèæ Einf√ºhrung in React Hooks ü§¶üèæ üëçüèª ‚Ñ¢Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie Twitter lesen, wissen Sie h√∂chstwahrscheinlich, dass Hooks eine neue React-Funktion ist, aber Sie fragen sich vielleicht, wie wir sie in der ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Einf√ºhrung in React Hooks</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429712/"><img src="https://habrastorage.org/webt/fi/qp/xs/fiqpxsj8dqr3mts4ayrpml4es0u.png"><br><br>  Wenn Sie Twitter lesen, wissen Sie h√∂chstwahrscheinlich, dass Hooks eine neue React-Funktion ist, aber Sie fragen sich vielleicht, <b>wie wir sie in der Praxis einsetzen k√∂nnen</b> .  In diesem Artikel zeigen wir Ihnen einige Beispiele f√ºr die Verwendung von Hooks. <br>  Eine der wichtigsten Ideen, die Sie verstehen sollten, ist, <b>dass Sie mit Hooks Status- und andere React-Funktionen verwenden k√∂nnen, ohne Klassen schreiben zu m√ºssen</b> . <br><a name="habracut"></a><br><h1>  Die Motivation hinter den Haken </h1><br>  Obwohl die komponentenorientierte Architektur es uns erm√∂glicht, die Ansicht in unserer Anwendung wiederzuverwenden, besteht eines der gr√∂√üten Probleme f√ºr Entwickler darin, die <b>zustandsbasierte Logik zwischen Komponenten wiederzuverwenden</b> .  Wenn wir Komponenten mit √§hnlicher Zustandslogik haben, gibt es keine guten L√∂sungen f√ºr die Wiederverwendung von Komponenten, und dies kann manchmal zu einer Verdoppelung der Logik in den Konstruktor- und Lebenszyklusmethoden f√ºhren. <br>  Verwenden Sie normalerweise Folgendes, um dieses Problem zu l√∂sen: <br><br><ul><li>  Komponenten hoher Ordnung </li><li>  Requisiten rendern </li></ul><br>  Beide Muster weisen jedoch Nachteile auf, die zur Komplexit√§t der Codebasis beitragen k√∂nnen. <br><br>  <b>Hooks zielen darauf ab, all diese Probleme zu l√∂sen, sodass Sie Funktionskomponenten schreiben k√∂nnen, die Zugriff auf Status, Kontext, Lebenszyklusmethoden, Ref usw. haben, ohne Klassen schreiben zu m√ºssen.</b> <br><br><h1>  Haken in Alpha </h1><br><blockquote>  Bevor wir tauchen, ist es wichtig zu erw√§hnen, dass die Entwicklung der Hooks-API noch nicht abgeschlossen ist. <br><br>  Dar√ºber hinaus ist die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offizielle Dokumentation</a> sehr gut, und wir empfehlen, sie auch zu lesen, da sie die Motivation f√ºr die Einf√ºhrung von Hooks ausf√ºhrlich beschreibt. <br>  <b>UPD</b> Der Originalartikel, dessen √úbersetzung Sie gerade lesen, wurde zu einem Zeitpunkt geschrieben, als sich diese API im Alpha-Test befand. Derzeit ist React Hooks offiziell einsatzbereit.  Irreversible √Ñnderungen an der Version (im Vergleich zu Alpha) finden Sie am Ende des Artikels oder in den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Versionshinweisen</a> . <br></blockquote><br><h2>  Wie h√§ngen Haken mit Klassen zusammen? </h2><br>  Wenn Sie mit React vertraut sind, k√∂nnen Sie Hooks am besten verstehen, indem Sie sehen, wie wir das Verhalten reproduzieren k√∂nnen, mit dem wir bei der Verwendung von Klassen mit Hooks gewohnt sind. <br><br>  Denken Sie daran, dass wir beim Schreiben von Komponentenklassen h√§ufig Folgendes tun m√ºssen: <br><br><ul><li>  Status verwalten </li><li>  Verwenden Sie Lebenszyklusmethoden wie componentDidMount () und componentDidUpdate () </li><li>  Zugriffskontext (statischer Kontexttyp) </li></ul><br><br>  Mit React Hooks k√∂nnen wir ein √§hnliches Verhalten in Funktionskomponenten reproduzieren: <br><br><ul><li>  Um den Status einer Komponente zu verwenden, verwenden Sie den Hook useState () </li><li>  Verwenden Sie anstelle von Lifecycle-Methoden wie componentDidMount () und componentDidUpdate () den Hook useEffect (). </li><li>  Verwenden Sie anstelle der statischen Eigenschaft contextType den Hook useContext (). </li></ul><br><h2>  F√ºr die Verwendung von Hooks ist die neueste Version von React erforderlich. </h2><br>  Sie k√∂nnen sofort mit Hooks beginnen, indem Sie den Wert von react und react-dom in Ihrer package.json auf "next" √§ndern. <br><br><img src="https://habrastorage.org/webt/ys/tx/47/ystx47s3snw_tfev_vqedjlzqfe.png"><br><br><h1>  UseState () Hook-Beispiel </h1><br>  Der Zustand ist ein wesentlicher Bestandteil von React.  Es erm√∂glicht uns, Variablen zu deklarieren, die Daten enthalten, die wiederum in unserer Anwendung verwendet werden.  Bei Verwendung von Klassen wird der Status normalerweise wie folgt definiert: <br><br><img src="https://habrastorage.org/webt/qs/se/7a/qsse7afsrvty1pgadlncirgnljk.png"><br><br>  Vor Hooks wurde state normalerweise nur in einer Komponente verwendet - einer Klasse, aber wie oben erw√§hnt, <b>k√∂nnen wir mit Hooks auch einer funktionalen Komponente state hinzuf√ºgen</b> . <br>  Sehen wir uns unten ein Beispiel an.  Hier bauen wir einen Schalter mit Hintergrundbeleuchtung, der je nach Statuswert seine Farbe √§ndert.  Daf√ºr verwenden wir hook useState (). <br>  Hier ist der vollst√§ndige Code (und ein ausf√ºhrbares Beispiel) - wir werden uns ansehen, was unten passiert.  Durch Klicken auf das Bild k√∂nnen Sie dieses Beispiel in CodeSandBox anzeigen. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/ct/-f/xa/ct-fxahjxyoqamk8h-rkguxnfia.png"></a> <br><br><h2>  Unsere Komponente ist eine Funktion </h2><br>  Im obigen Codeblock importieren wir zun√§chst <b>useState</b> aus React.  UseState ist eine neue M√∂glichkeit, die M√∂glichkeiten zu nutzen, die this.state bieten k√∂nnte. <br>  Beachten Sie dann, dass diese Komponente <b>eine Funktion und keine Klasse ist</b> .  Interessant! <br><br><h2>  Lese- und Schreibzustand </h2><br>  Innerhalb dieser Funktion rufen wir useState auf, um eine Variable im Status zu erstellen: <br><br><img src="https://habrastorage.org/webt/mw/3n/ti/mw3ntirdvzk3oxyedpzi00q-vv0.png"><br><br>  <b>useState wird zum Deklarieren einer Statusvariablen verwendet</b> und kann mit jedem <b>Werttyp</b> initialisiert werden (im Gegensatz zum Status in Klassen, der ein Objekt sein sollte). <br><br>  Wie oben gezeigt, verwenden wir die Destrukturierung f√ºr den R√ºckgabewert von useState. <br><ul><li>  Der erste Wert, in diesem Fall hell, ist der aktuelle Status (wie this.state). </li><li>  Der zweite Wert ist die Funktion zum Aktualisieren des Statuswerts (erster Wert) (wie this.setState). </li></ul><br>  Dann erstellen wir zwei Funktionen, von denen jede den Status auf unterschiedliche Werte setzt, 0 oder 1. <br><br><img src="https://habrastorage.org/webt/ma/sp/lk/masplkqh6lcp33bsywxmhs9zu7g.png"><br><br>  Dann wenden wir sie als Ereignishandler auf Schaltfl√§chen in der Ansicht an: <br><br><img src="https://habrastorage.org/webt/bu/6y/ht/bu6yhtzsnm1tory2ro257etb2yi.png"><br><br><h2>  Spurstatus reagieren </h2><br>  Wenn die Taste ‚ÄûOn‚Äú gedr√ºckt wird, wird die Funktion setOn aufgerufen, die setLight (1) aufruft.  Durch Aufrufen von setLight (1) wird <b>der Lichtwert f√ºr das n√§chste Rendern aktualisiert</b> .  Dies mag ein wenig magisch erscheinen, aber <b>React verfolgt den Wert dieser Variablen</b> und √ºbergibt einen neuen Wert, wenn diese Komponente gerendert wird. <br>  Dann verwenden wir den aktuellen Zustand ( <b>Licht</b> ), um zu bestimmen, ob die Lampe eingeschaltet sein soll oder nicht.  Das hei√üt, wir stellen die F√ºllfarbe des SVG in Abh√§ngigkeit vom <b>Lichtwert ein</b> .  Wenn das Licht 0 (aus) ist, wird fillColor auf # 000000 gesetzt (und wenn es 1 (ein) ist, wird fillColor auf # ffbb73 gesetzt). <br><br><h2>  Mehrere Zust√§nde </h2><br>  Obwohl wir dies im obigen Beispiel nicht tun, k√∂nnen Sie mehrere Status erstellen, indem Sie useState mehrmals aufrufen.  Zum Beispiel: <br><br><img src="https://habrastorage.org/webt/f6/hc/rt/f6hcrt31natgsnrwwxznmwya2da.png"><br><br><blockquote>  HINWEIS <br>  Es gibt einige Einschr√§nkungen bei der Verwendung von Hooks, die Sie beachten sollten.  Am wichtigsten ist, dass Sie Hooks nur auf der obersten Ebene Ihrer Funktion aufrufen.  Weitere Informationen finden Sie unter ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hooks-Regeln</a> ‚Äú. </blockquote><br><br><h2>  Beispiel f√ºr einen UseEffect () - Hook </h2><br>  <b>Mit UseEffect Hook k√∂nnen Sie Nebenwirkungen in Funktionskomponenten ausf√ºhren</b> .  Zu den Nebenwirkungen k√∂nnen der Zugriff auf die API, das Aktualisieren des DOM und das Abonnieren von Ereignishandlern geh√∂ren. Sie m√∂chten lediglich, dass eine ‚Äûzwingende‚Äú Aktion ausgef√ºhrt wird. <br><br>  Mit dem useEffect () - Hook wei√ü React, dass Sie nach dem Rendern eine bestimmte Aktion ausf√ºhren m√∂chten. <br><br>  Schauen wir uns unten ein Beispiel an.  Wir werden useEffect () verwenden, um die API aufzurufen und eine Antwort zu erhalten. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/d3/s9/wm/d3s9wmjvrllc8z6xfwol0hocesg.png"></a> <br><br>  In diesem Codebeispiel werden sowohl <b>useState</b> als auch <b>useEffect verwendet</b> . Dies liegt daran, dass das Ergebnis des API-Aufrufs in state geschrieben werden soll. <br><br><img src="https://habrastorage.org/webt/l_/ro/uh/l_rouhqptfnk3xxxpevplnsg8qm.png"><br><br><h2>  Daten empfangen und Status aktualisieren </h2><br>  Um den Effekt zu verwenden, m√ºssen wir unsere Aktion in die Funktion <b>useEffect einf√ºgen</b> , <b>dh</b> wir √ºbergeben den Effekt ‚Äûaction‚Äú als anonyme Funktion als erstes Argument f√ºr <b>useEffect</b> . <br>  Im obigen Beispiel verweisen wir auf eine API, die eine Liste von Namen zur√ºckgibt.  Wenn die <b>Antwort</b> zur√ºckkehrt, konvertieren wir sie in JSON und setzen dann <b>setNames (Daten)</b> , um den Status <b>festzulegen</b> . <br><br><img src="https://habrastorage.org/webt/jn/2m/a6/jn2ma6v7m2cdiiy6pwxoscgdtsq.png"><br><br><h2>  Leistungsprobleme bei der Verwendung von Effekten </h2><br><br>  Es gibt jedoch noch etwas zu sagen √ºber die Verwendung von <b>useEffect</b> . <br><br>  Das erste, <b>woran Sie</b> denken sollten, ist, dass unser <b>useEffect</b> standardm√§√üig bei jedem Rendern aufgerufen wird!  Die gute Nachricht ist, dass wir uns keine Gedanken √ºber veraltete Daten machen m√ºssen, aber die schlechte Nachricht ist, dass wir wahrscheinlich nicht f√ºr jedes Rendering eine HTTP-Anfrage stellen m√∂chten (wie in diesem Fall). <br><br>  Sie k√∂nnen Effekte wie in diesem Fall <b>mit dem zweiten Argument useEffect</b> √ºberspringen.  Das zweite Argument f√ºr useEffect ist eine Liste von Variablen, die wir ‚Äûbeobachten‚Äú m√∂chten. Anschlie√üend wird der Effekt nur dann erneut ausgef√ºhrt, wenn sich einer dieser Werte √§ndert. <br><br>  Beachten Sie im obigen Codebeispiel, dass wir als zweites Argument <b>ein leeres Array √ºbergeben</b> .  Wir sagen React, dass wir diesen Effekt nur beim Mounten der Komponente benennen m√∂chten. <br><br><blockquote>  Weitere Informationen zur Effektleistung finden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie in diesem Abschnitt in White Papers.</a> </blockquote><br>  Dar√ºber hinaus k√∂nnen Sie mit useEffect wie mit der useState-Funktion mehrere Instanzen verwenden, was bedeutet, dass Sie mehrere useEffect-Funktionen haben k√∂nnen. <br><br><h2>  Beispiel f√ºr einen UseContext () - Hook </h2><br>  <b>Kontextpunkt</b> <br><br>  Der Kontext in React ist eine M√∂glichkeit f√ºr eine untergeordnete Komponente, auf einen Wert in der √ºbergeordneten Komponente zuzugreifen. <br><br>  Um die Notwendigkeit des Kontexts zu verstehen: Beim Erstellen einer React-Anwendung m√ºssen Sie h√§ufig Werte von oben in Ihrem React-Baum nach unten √ºbergeben.  Wenn Sie keinen Kontext verwenden, leiten Sie Requisiten durch Komponenten, die nichts √ºber sie wissen m√ºssen. <br><br>  Das Weitergeben von Requisiten √ºber den Baum ‚Äûnicht verwandter‚Äú Komponenten wird liebevoll als Requisitenbohren bezeichnet. <br>  React Context l√∂st das Problem beim Bohren von Requisiten, indem Sie Werte √ºber den Komponentenbaum mit jeder Komponente teilen k√∂nnen, die diese Werte anfordert. <br><br>  <b>useContext () vereinfacht die Verwendung von Kontext</b> <br><br>  Mit useContext Hook ist die Verwendung von Kontext einfacher als je zuvor. <br><br>  Die Funktion <b>useContext ()</b> verwendet ein <b>Kontextobjekt</b> , das zun√§chst von <b>React.createContext () zur√ºckgegeben wird</b> , und gibt dann den aktuellen Kontextwert zur√ºck.  Schauen wir uns unten ein Beispiel an. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/aa/uh/w6/aauhw6dryv5g7ltu15gake6yu_a.png"></a> <br><br>  Im obigen Code wird der Kontext des JediContext mit React.createContext () erstellt. <br><br>  Wir verwenden JediContext.Provider in unserer App-Komponente und setzen dort den Wert auf "Luke".  Dies bedeutet, dass jede Komponente, die auf den Kontext zugreifen muss, diesen Wert jetzt lesen kann. <br><br>  Um diesen Wert in der Funktion Display () zu lesen, rufen wir useContext auf und √ºbergeben das JediContext-Argument. <br><br>  Dann √ºbergeben wir das Kontextobjekt, das wir von React.createContext erhalten haben, und es zeigt automatisch den Wert an.  Wenn der Providerwert aktualisiert wird, arbeitet dieser Hook automatisch mit dem letzten Kontextwert. <br><br><h4>  Abrufen eines Links zum Kontext in einer gr√∂√üeren Anwendung </h4><br>  Oben haben wir JediContext in beiden Komponenten erstellt, aber in einer gr√∂√üeren Anwendung befinden sich Display und App in unterschiedlichen Dateien.  Wenn Sie eine √§hnliche Situation haben, fragen Sie sich m√∂glicherweise: "Wie erhalten wir einen Link zu JediContext zwischen Dateien?" <br><br>  Die Antwort ist, dass Sie <b>eine neue Datei erstellen</b> m√ºssen <b>, die den JediContext exportiert</b> . <br>  Beispielsweise k√∂nnten Sie eine Datei context.js haben, die Folgendes enth√§lt: <br><br><img src="https://habrastorage.org/webt/7p/aj/8g/7paj8gv_3osxvml7qa8figr6jnk.png"><br><br>  und dann sollten Sie in App.js (und Display.js) schreiben: <br><br><img src="https://habrastorage.org/webt/3p/sp/f1/3pspf1ab9sgflp2xvfhqn_edcig.png"><br><br>  Danke, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dave</a> ) <br><br><h3>  UseRef () Hook-Beispiel </h3><br>  Refs bietet eine M√∂glichkeit, auf React-Elemente zuzugreifen, die mit der render () -Methode erstellt wurden. <br>  Wenn Sie mit React-Refs noch nicht vertraut sind, k√∂nnen Sie diese <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einf√ºhrung zu React-Refs</a> lesen. <br>  Die Funktion <b>useRef ()</b> gibt ein ref-Objekt zur√ºck. <br><br><img src="https://habrastorage.org/webt/lx/ti/yw/lxtiywoqga-4a5mynvgtmhc9nhq.png"><br><br><h3>  useRef () und Formulare mit Eingabe </h3><br>  Sehen wir uns ein Beispiel mit dem Hook useRef () an. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/kj/5j/kv/kj5jkvt8rawy6g9relz8icq7rks.png"></a> <br><br>  Im obigen Beispiel verwenden wir useRef () in Kombination mit useState (), um den Eingabewert f√ºr das p-Tag zu rendern. <br><br>  Ref wird in der Variablen nameRef erstellt.  Dann kann die Variable nameRef in der Eingabe verwendet werden, angegeben als ref.  Im Wesentlichen bedeutet dies, dass nun der Inhalt des Eingabefeldes √ºber ref zug√§nglich ist. <br><br>  Die Senden-Schaltfl√§che im Code verf√ºgt √ºber einen onClick-Ereignishandler namens submitButton.  Die Funktion submitButton ruft setName auf (erstellt √ºber useState). <br><br>  Wie bereits bei hookState wird setName verwendet, um den Statusnamen festzulegen.  Um den Namen aus dem Eingabe-Tag zu extrahieren, lesen wir den Wert von nameRef.current.value. <br><br>  Ein weiterer Hinweis zu useRef ist, dass es mehr als das ref-Attribut verwendet werden kann. <br><br><h3>  Benutzerdefinierte Hooks verwenden </h3><br>  Eine der coolsten Funktionen von Hooks ist, dass Sie die <b>Logik</b> problemlos <b>zwischen mehreren Komponenten austauschen k√∂nnen, indem Sie Ihren eigenen Hook erstellen.</b> <br><br>  Im folgenden Beispiel erstellen wir einen benutzerdefinierten <b>setCounter () -</b> Hook, mit dem wir den Status verfolgen und benutzerdefinierte <b>Statusaktualisierungsfunktionen</b> bereitstellen k√∂nnen! <br><br><blockquote>  Siehe auch diesen <b>useCounter</b> Hook von <b>React</b> <a href="">-Use</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">useCounter von Kent</a> </blockquote><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/5j/1t/po/5j1tpoviea-npppg002j2vbyydw.png"></a> <br><br>  Im obigen Codeblock erstellen wir eine useCounter-Funktion, die die Logik unseres Hooks speichert. <br><br>  Bitte beachten Sie, dass useCounter m√∂glicherweise andere Hooks verwendet!  Beginnen wir mit der Erstellung eines neuen Hook-Status √ºber useState. <br><br>  Dann definieren wir zwei <b>Hilfsfunktionen</b> : <b>Inkrementieren</b> und <b>Dekrementieren</b> , die <b>setCount aufrufen</b> und die aktuelle <b>Anzahl</b> entsprechend anpassen. <br><br>  Schlie√ülich geben wir die Links zur√ºck, die f√ºr die Interaktion mit unserem Hook erforderlich sind. <br><br>  F: Was passiert, wenn ein Array mit einem Objekt zur√ºckgegeben wird? <br>  A: Nun, wie die meisten Dinge in Hooks sind die API-Konventionen noch nicht vollst√§ndig.  Aber was wir hier tun, gibt ein Array zur√ºck, wobei: <br><br><ul><li>  Das erste Element ist der aktuelle Wert des Hakens. </li><li>  Das zweite Element ist ein Objekt, das die Funktionen enth√§lt, die zur Interaktion mit dem Hook verwendet werden. </li></ul><br>  Mit dieser Konvention k√∂nnen Sie den aktuellen Wert des Hooks einfach ‚Äûumbenennen‚Äú - wie oben bei <b>myCount</b> . <br><br>  Sie k√∂nnen jedoch alles, was Sie m√∂chten, von Ihrem benutzerdefinierten Hook zur√ºckgeben. <br><br>  Im obigen Beispiel verwenden wir in unserer Ansicht <b>Inkremente</b> und <b>Dekremente</b> als <b>onClick-</b> Handler.  Wenn der Benutzer die Tasten dr√ºckt, wird der Z√§hler aktualisiert und in der Ansicht erneut angezeigt (wie bei <b>myCount</b> ). <br><br><h2>  Schreiben von Tests f√ºr React Hooks </h2><br>  Um Tests f√ºr Hooks zu schreiben, verwenden wir die <b>React-Testing-Bibliothek</b> zum Testen. <br><br>  <b>Die</b> React <b>-Testing-Bibliothek</b> ist eine sehr leichte L√∂sung zum Testen von React-Komponenten.  Es ist eine Erweiterung von <b>React-Dom</b> und <b>React-Dom / Test-Utils</b> .  Durch die Verwendung der <b>React-Testing-Bibliothek wird</b> sichergestellt, dass Ihre Tests direkt mit DOM-Knoten funktionieren. <br><br>  Bei Testhaken ist noch nicht alles klar.  Derzeit k√∂nnen Sie den Hook nicht isoliert testen.  Stattdessen m√ºssen Sie Ihren Haken an der Komponente befestigen und diese Komponente testen. <br><br>  Im Folgenden werden wir Tests f√ºr unsere Hooks schreiben, die mit unseren Komponenten interagieren und nicht direkt mit Hooks.  Die gute Nachricht ist, dass unsere Tests wie normale Reaktionstests aussehen werden. <br><br><h3>  Testen des useState () - Hooks </h3><br>  Sehen wir uns ein Beispiel f√ºr das Schreiben von Tests f√ºr <b>useState</b> Hook an.  Im obigen Tutorial testen wir weitere Variationen des oben verwendeten useState-Beispiels.  Wir werden Tests schreiben, um sicherzustellen, dass durch Dr√ºcken der Taste ‚ÄûAus‚Äú der Status auf 0 und durch Dr√ºcken der Taste ‚ÄûEin‚Äú der Status auf 1 gesetzt wird. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/y4/tc/i7/y4tci7evnak6quqqgjfp1ngdg9m.png"></a> <br><br>  Im obigen Codeblock importieren wir zun√§chst einige Helfer aus der <b>React-Testing-Bibliothek</b> und der zu <b>testenden</b> Komponente. <br><br><ul><li>  <b>Rendern</b> , dies hilft bei der Anzeige unserer Komponente.  Es wird in einen Container gerendert, der zu <b>document.body</b> hinzugef√ºgt wird </li><li>  <b>getByTestId ruft</b> das DOM-Element <b>von data-testid ab</b> </li><li>  <b>Mit fireEvent werden</b> DOM-Ereignisse "ausgel√∂st".  Es wird ein Ereignishandler angeh√§ngt, um beispielsweise einige DOM-Ereignisse durch Ereignisdelegierung zu <b>dokumentieren</b> und zu verarbeiten.  durch Klicken auf eine Schaltfl√§che. </li></ul><br>  Au√üerdem legen wir in der <b>Testgenehmigungsfunktion</b> die Werte von Variablen f√ºr Elemente mit <b>data-testid</b> und deren Werte fest, die wir im Test verwenden m√∂chten.  Mit Links zu Elementen im DOM k√∂nnen wir dann die <b>fireEvent-</b> Methode verwenden, um einen Klick auf eine Schaltfl√§che zu simulieren. <br><br>  Der Test √ºberpr√ºft, ob beim Klicken auf <b>onButton der Statuswert</b> auf 1 gesetzt ist und wenn Sie auf <b>offButton</b> klicken, der <b>Status</b> 1 ist. <br><br><h3>  Testen von useEffect () Hook </h3><br>  In diesem Beispiel schreiben wir Tests, um mit <b>useEffect</b> Hook ein Produkt in den Warenkorb zu <b>legen</b> .  Die Anzahl der Elemente wird auch in localStorage gespeichert.  Die Datei index.js in CodeSandbox enth√§lt die eigentliche Logik zum Hinzuf√ºgen von Artikeln zum Warenkorb. <br><br>  Wir werden Tests schreiben, um sicherzustellen, dass die Aktualisierung der Anzahl der Warenkorbartikel auch in localStorage angezeigt wird. Selbst wenn die Seite neu geladen wird, bleibt die Anzahl der Warenkorbartikel gleich. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/74/w8/vj/74w8vjaiwkk_okdrqgrgg4s90bc.png"></a> <br><br>  In der Funktion, die den Test best√§tigt, setzen wir <b>cartItem</b> in <b>localStorage zuerst</b> auf 0, was bedeutet, dass die Anzahl der Warenkorbelemente 0 betr√§gt. Dann erhalten wir durch Destrukturierung sowohl <b>Container</b> als auch <b>Renderer</b> von der <b>App-</b> Komponente.  <b>Durch erneutes Rendern</b> k√∂nnen wir das <b>Neuladen</b> von Seiten simulieren. <br><br>  Dann erhalten wir die Links zu den Schaltfl√§chen und dem p-Tag, das den aktuellen Warenkorbwert anzeigt und sie auf Variablen setzt. <br><br>  Sobald dies erledigt ist, simuliert der Test einen Klick auf <b>addButton</b> und pr√ºft, ob der aktuelle Warenkorbz√§hler 1 ist, und l√§dt die Seite neu. Wenn dann gepr√ºft wird, ob <b>localStorage</b> , wird <b>cartItem</b> auf 1 gesetzt. Dann simuliert er einen Klick auf <b>resetButton</b> und pr√ºft, ob die aktuelle Anzahl der Warenkorbartikel auf 0 gesetzt ist. <br><br><h3>  Testen von useRef () Hook </h3><br>  In diesem Beispiel werden wir <b>useRef</b> Hook testen und das urspr√ºngliche <b>useRef-</b> Beispiel oben als Grundlage f√ºr den Test verwenden.  <b>UseRef wird</b> verwendet, um den Wert aus dem Eingabefeld <b>abzurufen</b> und den Wert dann auf state zu setzen.  Die Datei <b>index.js</b> in <b>CodeSandbox</b> enth√§lt die Logik zum Eingeben und Senden eines Werts. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/zu/m4/yu/zum4yuqeeszwservqx8mzj8ypoy.png"></a> <br><br>  In der Funktion, die den Test genehmigt, setzen wir die Variablen im Eingabefeld, ein p-Tag, das den aktuellen Wert von ref anzeigt, und eine Senden-Schaltfl√§che.  Wir legen auch den Wert fest, den wir in das Eingabefeld f√ºr die Variable newName eingeben m√∂chten.  Dies wird zur √úberpr√ºfung im Test verwendet. <br><br><img src="https://habrastorage.org/webt/pj/gz/jz/pjgzjzqildkkv6tkasce6xy389c.png"><br><br>  Die fireEvent.change-Methode wird verwendet, um einen Wert in das Eingabefeld einzugeben. In diesem Fall wird der in der Konstante newName gespeicherte Name verwendet, wonach die Senden-Schaltfl√§che gedr√ºckt wird. <br><br>  Der Test pr√ºft dann, ob der <b>Referenzwert</b> nach dem Dr√ºcken der Taste <b>mit dem</b> Wert von <b>newName √ºbereinstimmt</b> . <br><br>  Schlie√ülich sollten Sie sehen "Keine Testabst√ºrze, Gl√ºckwunsch!"  Nachricht in der Konsole. <br><br><h3>  Community-Antwort auf Hooks </h3><br>  Seit der Einf√ºhrung von React Hooks war die Community von dieser Funktion begeistert, und wir haben <b>viele</b> Beispiele und Beispiele f√ºr die Verwendung von React Hooks gesehen.  Hier sind einige der wichtigsten: <br><br><ul><li>  Diese <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Seite</a> enth√§lt eine Sammlung von React Hooks. </li><li>  React <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-Use</a> , die Bibliothek, die mit einer Reihe von React Hooks geliefert wird. </li><li>  Dieses <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CodeSandbox-</a> Beispiel zeigt, wie Sie mit useEffect Hook Animationen mit React <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-Spring</a> erstellen </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ein</a> useMutableReducer- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beispiel</a> , mit dem Sie einfach einen Status mutieren k√∂nnen, um ihn in einem Reduzierer zu aktualisieren. </li><li>  Dieses <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beispiel befindet sich</a> in CodeSandbox, das eine komplexe integrierte Verwendung der Eltern-Kind-Kommunikation und die Verwendung von Redisern zeigt. </li><li>  React Hooks <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Switch-Komponente</a> </li><li>  Eine weitere <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sammlung von React Hooks</a> mit Hooks f√ºr Eingabewerte, Ger√§teorientierung und Dokumentensichtbarkeit. </li></ul><br><br><h3>  Verschiedene Arten von Haken </h3><br>  Es gibt verschiedene Arten von Hooks, die Sie in Ihrer React-Anwendung verwenden k√∂nnen.  Sie sind unten aufgef√ºhrt: <br><br><ul><li>  <b>useState</b> - erm√∂glicht es uns, reine Funktionen mit Zugriff auf den Status darin zu schreiben. </li><li>  <b>useEffect</b> - erm√∂glicht es uns, Nebenwirkungen durchzuf√ºhren.  Nebenwirkungen k√∂nnen API-Aufrufe, das Aktualisieren des DOM und das Abonnieren von Ereignishandlern sein. </li><li>  <b>useContext</b> - Erm√∂glicht das Schreiben reiner Funktionen mit Kontext. </li><li>  <b>useReducer</b> - gibt uns einen Link zu einem Redux-√§hnlichen Reduzierer </li><li>  <b>useRef</b> - Erm√∂glicht das Schreiben reiner Funktionen, die ein ver√§nderbares Referenzobjekt zur√ºckgeben. </li><li> <b>useMemo</b> -      . </li><li> <b>useCallback</b> ‚Äî  Hook     . </li><li> <b>useImperativeMethods</b> -   ,       ref. </li><li> <b>useMutationEffects</b> ‚Äî   useEffect Hook   ,     DOM-. </li><li> <b>useLayoutEffect</b> -       DOM   -. </li><li> <b> hooks</b> -        . </li></ul><br><br><h3>  hooks </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Tolle an Hooks ist, dass sie neben dem vorhandenen Code arbeiten, sodass Sie langsam √Ñnderungen vornehmen k√∂nnen, die Hooks implementieren. Sie m√ºssen lediglich ein Upgrade durchf√ºhren. Reagieren Sie auf eine Version, die Hooks unterst√ºtzt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Hooks sind jedoch immer noch eine experimentelle Funktion, und das React-Team hat wiederholt gewarnt, dass sich die API √§ndern kann. Bedenken Sie, dass Sie gewarnt werden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was bedeutet das Aufkommen von Haken f√ºr den Unterricht? Wie das React-Team berichtet, bleiben die Klassen weiterhin bestehen, sie sind ein gro√üer Teil der React-Codebasis und werden h√∂chstwahrscheinlich noch einige Zeit dauern.</font></font><br><br><blockquote>      .  Facebook      ,  , ,    ,     .    React  Hooks,          ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> </blockquote><br> <b>  API- Hooks   ,    Hooks,   ,      .</b> <br><br><h3>  Zus√§tzliche Ressourcen </h3><br><ul><li>  React      React Hooks,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> </li><li> API    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . </li><li>    RFC,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> ,       </li></ul><br><br><blockquote> <b>UPD</b> <br>  : <br>      React 16.8   Hooks API.        -: <br> ‚Äî  useMutationEffect. <br> ‚Äî  useImperativeMethods  useImperativeHandle. <br> ‚Äî         useState  useReducer Hooks. <br> ‚Äî      ,   useEffect/useMemo/useCallback Hooks. <br> ‚Äî  Object.is     useState  useReducer. <br> ‚Äî     Strict Mode (DEV-only). <br> ‚Äî  lazy initialization API  useReducer Hook. <br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de429712/">https://habr.com/ru/post/de429712/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de429702/index.html">Google Analytics Pixel Sync Facebook, VK, Yandex, MyTarget</a></li>
<li><a href="../de429704/index.html">Verbinden Sie den Multipath-LUN-Speicher mit Windows Server 2008 und Windows Server 2012</a></li>
<li><a href="../de429706/index.html">A1: 2017 - Injektionen (Teil 3 und letzte)</a></li>
<li><a href="../de429708/index.html">Teil des HolyJS 2018 Moskau Programms</a></li>
<li><a href="../de429710/index.html">Kohlendioxid auf der ISS</a></li>
<li><a href="../de429714/index.html">Einfacher als MQTT? MQTT / UDP</a></li>
<li><a href="../de429716/index.html">5 besten PC-Spiele zum Englischlernen</a></li>
<li><a href="../de429718/index.html">Ich will alles auf einmal! Wir untersuchen den RAM HyperX Predator DDR4 RGB mit einer Frequenz von 4000 MHz</a></li>
<li><a href="../de429720/index.html">Wie man einem unerfahrenen Entwickler in einem Interview √ºberlebt und bei der Arbeit nicht verr√ºckt wird</a></li>
<li><a href="../de429722/index.html">Wie wir in Yandex.Cash √ºber Google Pay bezahlt haben [aktualisiert]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>