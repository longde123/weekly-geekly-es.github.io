<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🚒 🌨️ 🤨 Contentores para adultos (parte 03): 10 coisas que você não precisa fazer com recipientes 🗝️ 👩🏽‍💻 🤜🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Você finalmente se rendeu à mercê dos contêineres e descobriu que eles resolvem muitos problemas e têm muitas vantagens: 



1. Os contêineres são ina...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Contentores para adultos (parte 03): 10 coisas que você não precisa fazer com recipientes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/421663/">  Você finalmente se rendeu à mercê dos contêineres e descobriu que eles resolvem muitos problemas e têm muitas vantagens: <br><br><ol><li>  Os contêineres são inabaláveis: SO, bibliotecas, pastas e aplicativos - como tudo isso é armazenado diretamente no contêiner, você tem 100% de certeza de que a imagem que foi testada no controle de qualidade sempre estará em produção.  E funcionará exatamente da mesma maneira. </li><li>  Recipientes leves: um contêiner não desperdiça memória.  Em vez de centenas de megabytes e gigabytes, um contêiner precisa apenas de memória para o processo principal. </li><li>  Os contêineres são rápidos: um contêiner é iniciado tão rápido quanto um processo normal do Linux.  Não minutos, mas literalmente segundos. </li></ol><br><img src="https://habrastorage.org/webt/kn/kz/0i/knkz0i3sesbhdq0nj4xvb8jxvsq.png" width="100%"><br><br>  No entanto, muitos ainda acreditam que os contêineres são máquinas virtuais e esquecem sua propriedade mais importante ... <br><a name="habracut"></a><br><h3>  Recipientes efêmeros </h3><br>  A descartabilidade é o motivo pelo qual você deve mudar sua abordagem de como lidar com contêineres. <br><br>  <b>E aqui está o que em nenhum caso deve ser feito para não perder as vantagens dos contêineres:</b> <br><br>  <b>1. Não há necessidade de armazenar dados dentro do contêiner.</b>  Durante o ciclo de vida, os contêineres podem ser suspensos, destruídos e substituídos.  Se o aplicativo for executado em um contêiner, a versão 1.0 desse aplicativo deverá mudar facilmente para a versão 1.1 sem perda de dados e outros problemas.  Portanto, se você deseja salvar dados, eles devem ser escritos nele.  No entanto, você deve tomar cuidado para que os dois contêineres não gravem no mesmo local para não danificar os dados.  Portanto, verifique se os aplicativos gravam corretamente os dados no armazenamento compartilhado. <br><br>  <b>2. Não há necessidade de dividir a entrega do aplicativo.</b>  Algumas pessoas pensam que um contêiner é a mesma máquina virtual.  E a maioria deles acredita que os aplicativos devem ser implantados em contêineres existentes.  De fato, isso também é possível, especialmente na fase de desenvolvimento, quando há depuração e implantação constantes.  Mas eles devem inserir o CD-ROM de entrega contínua para transferência para o departamento de controle de qualidade ou produção apenas como parte de sua própria imagem.  Lembre-se: os contêineres são inabaláveis. <br><br>  <b>3. Não há necessidade de criar imagens grandes.</b>  Uma imagem grande é mais difícil de distribuir.  Portanto, a imagem deve incluir apenas os arquivos e bibliotecas realmente necessários para iniciar o processo de aplicação.  Não há necessidade de instalar pacotes desnecessários ou executar atualizações (yum update), que criam uma nova camada na imagem e gravam muitos arquivos nela. <br><br>  <b>4. Não use recipientes de camada única.</b>  Para usar efetivamente sistemas de arquivos de várias camadas (vários níveis), sempre crie camadas separadas para o SO, para definição de nome de usuário, para configuração e, finalmente, para o próprio aplicativo.  Portanto, será mais fácil recriar, manter e distribuir imagens. <br><br>  <b>5. Não há necessidade de criar imagens a partir de contêineres em execução.</b>  Em outras palavras, não use o comando docker commit para criar uma imagem, pois essas imagens não serão reproduzíveis.  Em vez disso, sempre use um Dockerfile ou outras ferramentas S2I (fonte para imagem) que forneçam reprodutibilidade.  Além disso, no Dockerfile, você pode rastrear facilmente as alterações se armazená-las no repositório de origem (git). <br><br>  <b>6. Não há necessidade de usar apenas a tag mais recente.</b>  Essa tag é algo como INSTANTÂNEO para usuários do Maven.  Devido à natureza de várias camadas do sistema de arquivos do contêiner, as tags são muito úteis.  No entanto, você pode esperar uma surpresa desagradável quando, por exemplo, após uma pausa de meses, decide coletar uma imagem e descobre subitamente que o aplicativo não é mais iniciado porque a camada pai (FROM no idioma do Dockerfile) foi substituída por uma nova versão que não oferece compatibilidade com versões anteriores.  Ou porque a versão errada foi recuperada do cache de construção que você estava esperando.  Além disso, a tag mais recente também deve ser evitada ao implantar contêineres na produção, pois você não poderá rastrear qual versão da imagem está sendo iniciada. <br><br>  <b>7. Não há necessidade de executar mais de um processo em um contêiner.</b>  Os contêineres são ideais para um único processo (daemon http daemon, servidor de aplicativos, DBMS).  Caso contrário, você poderá encontrar todos os tipos de problemas, como cavar nos logs ou atualizar processos separadamente. <br><br>  <b>8. Não há necessidade de armazenar credenciais em uma imagem - use variáveis ​​de ambiente para isso.</b>  Não prescreva logins e senhas na imagem.  Em vez disso, use variáveis ​​de ambiente para extrair dados relevantes de fontes externas ao contêiner.  A imagem do Postgres é um ótimo exemplo de como fazer isso corretamente. <br><br>  <b>9. Não há necessidade de executar processos como root.</b>  “Por padrão, os contêineres do docker são executados como raiz.  (...) No entanto, à medida que a tecnologia evolui, outras opções de inicialização padrão mais seguras podem aparecer.  Sob as condições atuais, o requisito raiz pode ser considerado uma ameaça e pode não ser fornecido em todos os ambientes.  Para especificar um usuário que não seja root, em nome do qual o contêiner será iniciado, a diretiva USER será usada ”(Trecho do Guidance for Docker Image Authors) <br><br>  <b>10. Não há necessidade de confiar em endereços IP.</b>  Cada contêiner possui seu próprio endereço IP interno, que pode mudar após o reinício do contêiner.  Se o aplicativo ou microsserviço precisar se comunicar com outro contêiner, use variáveis ​​de ambiente para transferir o nome do host desejado para o número da porta de um contêiner para outro. <br>  Você se lembra?  Agora você pode usá-lo com segurança.  E dicas práticas para o uso de contêineres podem ser encontradas em nosso blog. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt421663/">https://habr.com/ru/post/pt421663/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt421649/index.html">“Top Expo 3D. Educação digital 2018 ”21 de setembro na Technopolis Moscow</a></li>
<li><a href="../pt421653/index.html">Visão geral e dispositivo dos medidores de eletricidade modernos</a></li>
<li><a href="../pt421655/index.html">Engenheiros do Jetpack: Alexander Fedorovich Andreev</a></li>
<li><a href="../pt421657/index.html">Crescimento Contínuo JSON</a></li>
<li><a href="../pt421659/index.html">Como a Microsoft esqueceu metade do mundo ou leu mensagens de erro</a></li>
<li><a href="../pt421665/index.html">Android Jetpack: transformando aplicativos em foguetes</a></li>
<li><a href="../pt421667/index.html">Meetup de CJM em MegaFon - como foi e o que falamos (reportagens em vídeo)</a></li>
<li><a href="../pt421669/index.html">O tribunal proibiu a distribuição gratuita de arquivos CAD para armas, então o criador começou a vendê-los</a></li>
<li><a href="../pt421671/index.html">Cinco nanotecnologias da natureza que podem nos inspirar a novos desenvolvimentos</a></li>
<li><a href="../pt421675/index.html">Finalmente, houve um problema que apenas computadores quânticos podem resolver</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>