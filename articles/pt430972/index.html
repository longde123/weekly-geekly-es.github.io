<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå± üåú üö£üèæ server.js node.js - trabalhe com erros. Parte 1 üì≥ üßî üêÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Boa tarde 

 Este artigo √© destinado a desenvolvedores familiarizados com o node.js. 

 Recentemente, eu estava preparando material sobre fatos √∫teis ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>server.js node.js - trabalhe com erros. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430972/">  Boa tarde <br><br>  Este artigo √© destinado a desenvolvedores familiarizados com o node.js. <br><br>  Recentemente, eu estava preparando material sobre fatos √∫teis para desenvolvedores no node.js em nosso escrit√≥rio.  Os projetos em que estamos trabalhando s√£o servi√ßos de API que usam o m√≥dulo node.js express como um servidor da web.  O material √© baseado em casos reais em que o c√≥digo funcionou incorretamente ou a l√≥gica nele foi cuidadosamente oculta ou provocou erros durante a expans√£o.  Com base nesse material, foi realizado um workshop de desenvolvimento de equipe. <br><br>  Ent√£o, eu decidi compartilhar.  At√© agora, apenas a primeira parte √© de cerca de 30%.  Se estiver interessado, ser√° continuado! <br><br>  Tentei oferecer uma oportunidade para uma r√°pida familiariza√ß√£o, por isso ocultei exemplos, racioc√≠nios e coment√°rios nos spoilers.  Se as afirma√ß√µes forem √≥bvias, voc√™ pode pular a "√°gua".  Embora o nosso "rake" nos spoilers tamb√©m possa ser interessante. <br><br>  Um colega durante o semin√°rio me fez uma pergunta, por que falar sobre isso, se tudo j√° est√° nesta ou naquela documenta√ß√£o?  Minha resposta foi a seguinte.  Apesar de a mensagem ser verdadeira, tudo est√° realmente na documenta√ß√£o, ainda cometemos erros irritantes relacionados a mal-entendidos ou ignor√¢ncia das coisas b√°sicas. <br><br>  Vamos come√ßar! <br><br><h1>  M√°quina virtual Node.js </h1><br><br><h2>  Rosqueamento √∫nico </h2><br><br>  Diferente do javavm, o nodejs-vm √© de thread √∫nico <sup>**</sup> . <br><br><img src="https://habrastorage.org/webt/vu/am/qu/vuamqumjnxczyrhnjiirjuvbjya.png"><br><br>  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte</a></sup> <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">mais detalhes</b> <div class="spoiler_text">  Ao mesmo tempo, h√° um conjunto de encadeamentos auxiliares usados ‚Äã‚Äãpela pr√≥pria m√°quina virtual, por exemplo, para organizar E / S.  Mas todo o c√≥digo do usu√°rio √© executado em apenas um segmento "principal". <br><br>  Isso simplifica muito a vida, pois n√£o h√° competi√ß√£o.  A execu√ß√£o do c√≥digo n√£o pode ser interrompida em um local arbitr√°rio e continuada em outro.  O c√≥digo √© simplesmente executado at√© que seja necess√°rio aguardar algo, por exemplo, disponibilidade de dados ao ler de um arquivo.  Enquanto aguarda, outro manipulador pode ser executado, at√© que termine de trabalhar ou at√© que tamb√©m comece a esperar por algo. <br><br>  Ou seja, se houver uma estrutura de dados interna, n√£o ser√° necess√°rio se preocupar em sincronizar o acesso a ela! <br><br>  O que fazer se o segmento "principal" n√£o tiver tempo para processar os dados? <br></div></div><br>  O dimensionamento √© feito iniciando outro processo node.js ou, se os recursos do servidor est√£o chegando ao fim, iniciando outro servidor. <br><br><div class="spoiler">  <b class="spoiler_title">consequ√™ncias e nosso "ancinho"</b> <div class="spoiler_text">  Tudo est√° claro aqui tamb√©m.  Voc√™ sempre deve estar preparado para o fato de que pode haver (e provavelmente haver√°) mais de um processo node.js.  E √†s vezes tamb√©m pode haver v√°rios servidores. <br><br><h3>  O "rake" que foi <s>oculto √©</s> encontrado em nosso c√≥digo </h3><br><blockquote>  Linhas paralelas se cruzam no infinito.  √â imposs√≠vel provar, mas eu vi. <br>  Jean Effel, "O romance de Ad√£o e Eva". <br></blockquote>  Foi feita uma tentativa de garantir a exclusividade das inst√¢ncias de entidade no banco de dados exclusivamente pelo aplicativo.  Em geral, isso e isoladamente do contexto <s>n√£o</s> parece muito <s>ruim</s> , mas nessa situa√ß√£o ainda mais.  Sem contratar um servi√ßo de terceiros, essa tarefa me parece n√£o ter solu√ß√£o. <br><br>  O colega que estava envolvido nisso realmente queria implementar isso sem envolver o banco de dados real.  No final, depois de algumas "abordagens ao proj√©til", isso foi realizado ... envolvendo o SharePoint. <br></div></div><br><br><h2>  <sup>**</sup> Multithreading ou "se voc√™ realmente quiser" </h2><br><br>  A partir da vers√£o 10.5.0, o node.js possui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">suporte experimental para multithreading</a> . <br><br><img src="https://habrastorage.org/webt/nx/lh/hk/nxlhhksvxbtchfb6wloktxildqu.png"><br>  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte</a></sup> <br><br><div class="spoiler">  <b class="spoiler_title">Mas o paradigma permanece o mesmo</b> <div class="spoiler_text"><ul><li>  Cada novo fluxo de trabalho cria sua pr√≥pria inst√¢ncia isolada do ambiente da m√°quina virtual node.js. </li><li>  Os fluxos de trabalho n√£o possuem dados mut√°veis ‚Äã‚Äãcomuns.  (Existem algumas reservas, mas basicamente a afirma√ß√£o √© justa.) </li><li>  A comunica√ß√£o √© feita usando mensagens e SharedArrayBuffer. </li></ul><br>  Portanto, o c√≥digo antigo continuar√° funcionando ao usar fluxos de trabalho. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Leia mais aqui.</a> <br></div></div><br><br><h2>  Ciclo de vida do aplicativo </h2><br><br>  O cora√ß√£o do nodejs-vm √© o loop de eventos.  Quando a execu√ß√£o do c√≥digo deve ser suspensa ou o c√≥digo, ao que parece, terminou, o controle passa para ele. <br><br><div class="spoiler">  <b class="spoiler_title">Texto oculto</b> <div class="spoiler_text">  O loop de eventos verifica se (oh) os eventos para os quais registramos os manipuladores ocorreram.  Se algo acontecer, os manipuladores ser√£o chamados.  Caso contr√°rio, ser√° verificado se existem "geradores" de eventos para os quais registramos manipuladores.  Uma conex√£o TCP ou temporizador aberto pode ser um desses geradores.  Se eles n√£o puderam ser encontrados, o programa √© encerrado.  Caso contr√°rio, um desses eventos √© esperado, os manipuladores s√£o chamados e tudo se repete. <br><br>  A conseq√º√™ncia desse comportamento √© o fato de que, quando o c√≥digo parece ter terminado, a sa√≠da do nodejs-vm n√£o ocorre, por exemplo, porque registramos um manipulador de timer, que deve ser chamado depois de algum tempo. <br><br>  Isso √© mostrado no exemplo a seguir. <br><br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'registering timer callbacks'</span></span>); setTimeout( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Timer Event 1'</span></span>); }, <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Is it the end?'</span></span>);</code> </pre> <br><br>  resultado: <br><pre> <code class="plaintext hljs">registering timer callbacks Is it the end? Timer Event 1</code> </pre><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Leia mais aqui.</a> <br><br><h3>  Outro "rake" em nosso c√≥digo </h3><br><br><blockquote>  Todos podem gerenciar o estado! </blockquote>  O sinal de se o usu√°rio √© um administrador foi armazenado em uma vari√°vel global.  Essa vari√°vel foi inicializada como false no in√≠cio do programa.  Mais tarde, quando o administrador se registrou, essa vari√°vel foi configurada como true. <br><br>  Como resultado, se o administrador visitou o sistema, qualquer usu√°rio que acessou essa inst√¢ncia do servi√ßo foi percebido como administrador. <br><br>  Custou-me algum esfor√ßo para mostrar ao meu colega que havia um erro de l√≥gica.  Um colega tinha certeza de que para cada solicita√ß√£o de HTTP √© criado um ambiente completamente novo. <br></div></div><br><br><h1>  package.json - campos que valem a pena preencher </h1><br><br>  package.json √© o arquivo de descri√ß√£o para o nosso pacote.  Nesse contexto, trata-se de <i>nossa</i> aplica√ß√£o, e n√£o de depend√™ncias.  Os campos e explica√ß√µes listados abaixo s√£o por que vale a pena preench√™-los da mesma forma. <br><br><div class="spoiler">  <b class="spoiler_title">Texto oculto</b> <div class="spoiler_text"><h2>  nome </h2><br>  At√© publicarmos o pacote no reposit√≥rio, o campo tamb√©m poder√° ser pontuado.  A quest√£o √© que esse campo seja conveniente para nomear o arquivo de instala√ß√£o ou, por exemplo, para exibir o nome do produto em sua p√°gina da web.  Em geral, "o que voc√™ chama de iate?" <br><br><h2>  vers√£o </h2><br>  A id√©ia principal √© n√£o esquecer de aumentar o n√∫mero da vers√£o enquanto expande a funcionalidade, corrigindo bugs ... Infelizmente, em nosso escrit√≥rio, voc√™ ainda pode encontrar produtos com a vers√£o inalterada 0.0.0.  E ent√£o adivinhe que tipo de funcionalidade funciona para o cliente ... <br><br><h2>  principal </h2><br>  Este <a href="">campo</a> informa qual arquivo ser√° iniciado quando o aplicativo for iniciado (`npm start`).  Se o pacote for usado como uma depend√™ncia, qual arquivo ser√° importado ao usar nosso m√≥dulo por outro aplicativo.  O diret√≥rio atual √© o diret√≥rio em que o arquivo `package.json` est√° localizado. <br><br>  E tamb√©m, se, por exemplo, usarmos <abbr title="editor de texto livre para desenvolvedores 'visual studio code'">vscode</abbr> , o arquivo especificado neste campo ser√° iniciado quando o depurador for chamado ou quando o comando "execute" for executado. <br><br>  A extens√£o ".js" pode ser omitida.  √â uma conseq√º√™ncia de todos os casos de uso poss√≠veis, portanto, n√£o √© explicitada diretamente na documenta√ß√£o. <br><br><h2>  motores </h2><br>  Este campo cont√©m a tupla: {"n√≥": <i>vers√£o</i> , "npm": <i>vers√£o</i> , ...}. <br><br>  Conhe√ßo os campos "n√≥" e "npm".  Eles determinam as vers√µes do node.js e do npm necess√°rias para o nosso aplicativo funcionar.  As vers√µes s√£o verificadas executando o comando npm install. <br><br>  A sintaxe padr√£o para determinar a vers√£o dos pacotes de depend√™ncia √© suportada: sem um prefixo (vers√£o √∫nica), o prefixo "~" (os dois primeiros n√∫meros da vers√£o devem corresponder) e o prefixo "^" (somente o primeiro n√∫mero da vers√£o deve corresponder).  Se houver um prefixo, a vers√£o dever√° ser maior ou igual √† especificada neste campo.  Apenas uma lista de vers√µes;  indica√ß√£o expl√≠cita mais, menos, ... etc.  tamb√©m funciona. <br><br>  Isen√ß√£o de responsabilidade  "Npm install" verifica as vers√µes especificadas nos "mecanismos" apenas se o modo "rigoroso do mecanismo" estiver ativado.  N√≥s o inclu√≠mos para cada projeto, adicionando o arquivo .npmrc com a linha: "engine-strict = true".  Era uma vez, ‚Äúnpm install‚Äù fazia essa verifica√ß√£o por padr√£o. <br><br>  Alguns cont√™ineres, pelo menos na documenta√ß√£o, escrevem que as vers√µes adequadas ser√£o usadas por padr√£o.  Nesse caso, estamos falando do Azure. <br><br>  Um exemplo: <br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"engines"</span></span>: { <span class="hljs-string"><span class="hljs-string">"node"</span></span>: <span class="hljs-string"><span class="hljs-string">"~8.11"</span></span>, <span class="hljs-comment"><span class="hljs-comment">// require node version 8.11.* starting from 8.11.0 "npm": "^6.0.1" // require npm version 6.* starting from 6.0.1 },</span></span></code> </pre><br><br><h3>  "ancinho" regular </h3><br><br><blockquote>  E o rei est√° nu! </blockquote><br>  Foi acordado repetidamente com o cliente que a vers√£o exigida do `node.js` deveria ser pelo menos 8. Quando as vers√µes iniciais do aplicativo foram entregues, tudo funcionou.  "Um dia" ap√≥s a entrega da nova vers√£o no cliente, o aplicativo parou de ser executado.  Tudo funcionou em nossos testes. <br><br>  O problema era que, nesta vers√£o, come√ßamos a usar a funcionalidade suportada apenas na vers√£o 8 node.js.  O campo "engines" n√£o estava preenchido; portanto, ningu√©m havia notado antes que o cliente tinha uma vers√£o antiga do node.js.  (Servi√ßos da Web do Azure padr√£o). <br><br><h2>  scripts </h2><br>  O campo cont√©m uma tupla do formul√°rio: {"script1": <i>script1</i> , "script2": <i>script2</i> , ...}. <br><br>  Existem scripts padr√£o que s√£o executados em uma determinada situa√ß√£o.  Por exemplo, o script "install" ser√° executado ap√≥s a execu√ß√£o do "npm install".  √â muito conveniente, por exemplo, verificar a disponibilidade dos programas necess√°rios para o aplicativo funcionar.  Ou, digamos, para compactar todos os arquivos est√°ticos dispon√≠veis no nosso servi√ßo da Web, para que eles n√£o precisem ser compactados em tempo real. <br><br>  Nesse caso, voc√™ n√£o pode se limitar apenas aos nomes padr√£o.  Para executar um script arbitr√°rio, voc√™ precisa executar "npm run <i>script-name</i> ". <br><br>  √â conveniente coletar todos os scripts usados ‚Äã‚Äãem um s√≥ lugar. <br><br>  Um exemplo: <br><pre> <code class="javascript hljs"> <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"install"</span></span>: <span class="hljs-string"><span class="hljs-string">"node scripts/install-extras"</span></span>, <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"node src/well/hidden/main/server extra_param_1 extra_param_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"another-script"</span></span>: <span class="hljs-string"><span class="hljs-string">"node scripts/another-script"</span></span> }</code> </pre><br><br>  PS A extens√£o ".js" pode ser omitida na maioria dos casos. <br></div></div><br><br><h1>  package-lock.json - ajuda a instalar vers√µes espec√≠ficas de depend√™ncias, n√£o as "mais recentes" </h1><br><br><div class="spoiler">  <b class="spoiler_title">Texto oculto</b> <div class="spoiler_text"><blockquote>  Git ou n√£o git? .. </blockquote><br><br>  Este arquivo apareceu no npm relativamente recentemente.  Seu objetivo √© organizar a repetibilidade da montagem. <br><br><h3>  e mais um "ancinho" </h3><br><blockquote>  Mas n√£o mudei nada no meu programa!  Ontem ela trabalhou! </blockquote><br><br>  Em uma m√°quina par, o aplicativo funcionou muito bem.  Em outro computador em um ambiente id√™ntico, em um aplicativo colocado do git em um novo diret√≥rio, ap√≥s a execu√ß√£o de 'npm install', 'npm start', erros at√© ent√£o in√©ditos apareceram. <br><br>  O problema foi causado pelo fato de o arquivo 'package-lock.json' estar ausente no reposit√≥rio git.  Portanto, durante a instala√ß√£o dos pacotes, todas as depend√™ncias do segundo ou mais n√≠veis (naturalmente, n√£o gravadas no pacote.json) foram instaladas o mais atual poss√≠vel.  No computador de um colega, estava tudo bem.  Um conjunto incompat√≠vel de vers√µes foi selecionado no computador testado. <br><br><h2>  package-lock.json - para o git! </h2><br><br>  Retornando da digress√£o.  O arquivo 'package-lock.json' cont√©m uma lista de <i>todos os</i> m√≥dulos instalados localmente para o nosso aplicativo.  A presen√ßa desse arquivo permite recriar um conjunto individual de vers√µes de m√≥dulos. <br><br>  Resumo: n√£o esque√ßa de colocar o git e inclu√≠-lo no arquivo de entrega (instala√ß√£o) do aplicativo! <br><br>  √ötil: se o arquivo 'package-lock.json' estiver ausente, mas houver um diret√≥rio 'node_modules' com todos os m√≥dulos necess√°rios, o arquivo 'package-lock.json' poder√° ser recriado: <br><pre> <code class="plaintext hljs">npm shrinkwrap rename npm-shrinkwrap.json package-lock.json</code> </pre><br></div></div><br><br>  Voc√™ pode acabar com isso por enquanto.  As informa√ß√µes n√£o inclu√≠das s√£o a t√©cnica de simplifica√ß√£o de c√≥digo usada por nossa equipe. <br><br>  Se forem detectados erros, tentarei corrigi-los rapidamente! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430972/">https://habr.com/ru/post/pt430972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430962/index.html">Suporte do Razor no c√≥digo do Visual Studio</a></li>
<li><a href="../pt430964/index.html">Pensamento declarativo</a></li>
<li><a href="../pt430966/index.html">Sprints gerais na Atlassian Jira Software</a></li>
<li><a href="../pt430968/index.html">"A mente est√° online." Drones est√£o por toda parte</a></li>
<li><a href="../pt430970/index.html">Nuvem pessoal</a></li>
<li><a href="../pt430974/index.html">Grande tour fotogr√°fico da nuvem de Moscou 1cloud</a></li>
<li><a href="../pt430976/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel n¬∫ 276 (de 19 a 25 de novembro)</a></li>
<li><a href="../pt430978/index.html">Quanto tempo voc√™ gastou em filmes?</a></li>
<li><a href="../pt430980/index.html">‚ÄúTodo mundo √†s vezes quer olhar para o gato‚Äù: estamos falando sobre marketing de conte√∫do no podcast GLPH</a></li>
<li><a href="../pt430982/index.html">DEFCON 16. Como posso contat√°-lo? Deixe-me listar os caminhos. Parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>