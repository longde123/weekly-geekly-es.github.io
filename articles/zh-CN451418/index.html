<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🤝‍👩🏾 📜 🌳 为Wikipedia创建位置图的经验 👩🏿‍🤝‍👨🏽 👥 👨🏾‍🤝‍👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="几年来，我一直在处理用于维基百科的俄语和其他语言部分的地图。 我总共创建了300多张卡片 。 我不是专业的制图师，并且在这一领域没有特殊的教育。 显然，我只是喜欢制作卡片:) 


 在本文中，我想分享为Wikipedia创建地图的经验，重点是位置地图。 



 加拿大的实物图 
 位置卡 


...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>为Wikipedia创建位置图的经验</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451418/"><p> 几年来，我一直在处理用于维基百科的俄语和其他语言部分的地图。 我总共创建<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">了300多张卡片</a> 。 我不是专业的制图师，并且在这一领域没有特殊的教育。 显然，我只是喜欢制作卡片:) </p><br><p> 在本文中，我想分享为Wikipedia创建地图的经验，重点是位置地图。 </p><br><p><img src="https://habrastorage.org/webt/hp/su/4t/hpsu4tdkk6v9rrd8kn3n45agwc4.png"><br>  <em><a href="">加拿大的实物图</a></em> </p><a name="habracut"></a><br><h2 id="pozicionnye-karty"> 位置卡 </h2><br><p> 在免费许可下发布的所有Wikipedia图形材料都放置在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wikimedia Commons上</a> ，这使您可以在任何Wikimedia项目和Wikipedia的所有语言部分中使用它们。 </p><br><p>在Wikipedia上的所有类型的地图中，所谓的“位置地图”都很突出。 这里的特殊之处在于它不仅是地图的图像，而且是已知投影中的图像，并且具有已知的角地理坐标。 对于此类地图，将在使用该语言的每个语言部分中创建一个描述此元数据的特殊模板。 有了这样的模板，我们可以通过在地图顶部放置我们感兴趣的对象的标记，将其应用于任何页面。 对象的坐标以地理坐标的形式描述，模板中的公式可精确计算将标记放置在何处。 因此，例如，您可以在有关区域的页面上插入该区域的地图，并在其上标记区域中心和大城市。 </p><br><p><img src="https://habrastorage.org/webt/b_/kt/fd/b_ktfd2ti_blmrd0szjrvbelzs4.png"><br>  <em>在有关<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pebble</a> Island的商品卡中使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">位置图</a>的示例。</em>  <em>红色标记和题字会自动放置在地图图像上方对象的位置上。</em> </p><br><p> 位置图用于所有有关行政单位的文章：国家/地区/城市/城镇等，以及许多有关地理对象的文章。 通常会在创建位置图后立即将其用于20-50条现有的Wikipedia文章中。 </p><br><p> 从理论上讲，位置地图模板应一次使用两个地图绘图：“轮廓” /“政治”地图以及具有相同坐标，投影和尺寸的“物理” /“地理”地图。 轮廓图通常是矢量（SVG），物理图可以是矢量，但最常见的是栅格（通常为PNG）。 </p><br><p><img src="https://habrastorage.org/webt/yd/ym/mf/ydymmfiypxl56rgwzefe6uooaoq.png"><br>  <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">具有两种类型的地图的位置地图模板的示例</a></em> </p><br><p> 位置地图有很多：它们必须涵盖从整个世界到各个区域，小岛等的所有层次。 除了位置图，所谓的  “定位器”是一张地图，上面以亮色突出显示了我们感兴趣的区域（定位器地图<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的示例</a> ）。 在带有位置图的“较高”级别（世界，国家）上，一切都相对好，但是在“较低”（区级），一切通常都很糟糕：没有位置图或有，但是质量很差，或者以不适当/非标准的样式制作。 </p><br><p> 仅对于俄罗斯联邦，我们就有83个实体，如果在其中添加地区，我们可能已经收到了上千个或更多的行政单位，每个行政单位都需要一个位置图，包括等高线图，物理图，定位器图……此外，还不时地“新决议已经出台”的形式有所变化：法律文件的出现改变了行政单位的边界，将其划分/合并等。 当然，在所有这些情况下，您都需要重绘一个或多个位置图。 </p><br><p> 总的来说，我认为您已经了解了-卡非常必要，而且它们非常需要:) </p><br><h2 id="ishodnye-dannye-dlya-kart"> 地图的源数据 </h2><br><p> 对于位置图，必须使用具有免费许可证的图像。 这意味着此类卡的源数据必须是免费的。 </p><br><p> 我使用的卡的初始数据： </p><br><ul><li>  OpenStreetMap-矢量数据的主要来源； 但请记住，数据是通过众包获得的，因此在某些地方它们是密集且高质量的，在某些地方它们是非常不完整的。 数据中也有错误，因此必须仔细检查收到的卡。 </li><li>  GSHHG-GMT的一部分的矢量数据（见下文）； 可用于大比例尺的地图，不适合小比例尺的地图。 </li><li>  ETOPO1（分辨率〜1.85 km，容量〜890 MB），ETOPO2（分辨率2'〜= 3.6 km）-高度图，包括海床浮雕（测深法）。 </li><li>  TOPO30（分辨率〜= 0.9 km，体积〜1800 MB）-高度图，包括海底地形。 </li><li>  GLOBE（分辨率30“〜= 0.9 km）-高度图。 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SRTM</a> （分辨率SRTM3：3“〜= 90m）是一个相当详细的高度图，但是由于它非常重（每个具有1x1度数据的文件的重约2.8 MB），因此您通常只需要下载必要的文件此外，SRTM源数据中的间隙需要通过对相邻点的缺失点进行插值来弥补，您可以自己进行操作，也可以使用“空洞填充”的源（例如SRTM-Plus）。SRTM仅是用于土地的高度图，不包含海底地形数据。 </li></ul><br><h2 id="proekcii"> 投影 </h2><br><p> 在绝大多数情况下，我们使用的投影称为“等距圆柱”。 所有主要的网络地图使用的墨卡托投影及其特殊情况-“ Google投影”或“ Web墨卡托投影”属于同一系列的投影。 此投影的公式非常简单，此外，位置图模板已经“知道”此投影。 </p><br><p> 在剩下的少数情况下，您将必须谷歌搜索所需的投影并阅读特殊文献，以了解如何从纬度和经度准确地获得x，y坐标。  Mediawiki具有一种用于计算表达式（包括具有三角函数的表达式）的发达机制，即使在其上创建位置图模板之前，也可以将其用于检查地图（示例可在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>找到）。 </p><br><h2 id="instrumenty-dlya-sozdaniya-kart"> 地图工具 </h2><br><p> 有很多用于创建地图的工具（地理信息系统，GIS），包括免费和开源的工具。 但是，要使卡打开，就不必使用开放和免费的系统，只要打开源数据就足够了，这样您就可以在完成的卡上放一个开放许可证。  （但是这里可能有很多细微差别，我不认为是版权的领域，不是我的：） </p><br><p> 要创建地图，我主要使用以下三个程序。 </p><br><h3 id="maperitive"> 射影 </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Maperitive</a>是免费但私人的产品。 在使用OpenStreetMap数据时，它非常有用，它可以与OSM网站上的数据以及保存的转储一起使用。 允许您选择一个造型师并将地图保存为SVG格式。 有许多现成的设计师，您可以编写自己的设计师。 我已经准备了几个样式文件，并使用它们将区域的边界导出到SVG，并使用定居点将区域自身的地图导出。 </p><br><h3 id="generic-mapping-tools-gmt"> 通用映射工具（GMT） </h3><br><p> 一般而言，通用地图绘制工具（GMT）是一组免费的命令行实用程序，旨在处理和可视化科学数据，包括许多允许您使用地理数据的工具，即 我们可以将GMT用作控制台GIS。 作为一系列调用实用程序的结果，可以获取完成的地图（或将来的地图的单独图层）。 通常，我编写一个批处理文件，在其中设置所有参数并调用实用程序。 乍一看，它看起来很复杂，但是作为一名程序员，这种方法对我来说似乎很清楚并且很熟悉。 另外，这里提供了可重复性：为了再次创建地图，我总是可以再次运行脚本。 </p><br><p> 批处理文件示例（另请参见<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a> ）： </p><br><pre><code class="plaintext hljs">set PATH=C:\programs\GMT5\bin;%PATH% set GSBIN=C:\PROGRA~1\gs\gs9.04/bin set COORDSCUT=144.7492/157.3007/42.9694/51.3837 rem width = xmaxsvg / 150.0 * 2.54 set PAPERX=14.9352 rem height = ymaxsvg / 150.0 * 2.54 set PAPERY=16.0189333333333 grdcut.exe ETOPO1_Bed_g_gmt4.grd -R%COORDSCUT% -Gh_cor_cut.grd grdgradient h_cor_cut.grd -Ne0.3 -A315 -M -Ghi.grd grdimage h_cor_cut.grd -Ihi.grd -Cwiki-water-verlauf2.cpt -P -R%COORDSCUT% -JX%PAPERX%cd/%PAPERY%cd --PAPER_MEDIA=Custom_%PAPERX%cx%PAPERY%c -X0 -Y0 -K &gt; map.eps pscoast.exe -JX%PAPERX%cd/%PAPERY%cd -R%COORDSCUT% -Gc -P -Df --PAPER_MEDIA=Custom_%PAPERX%cx%PAPERY%c -X0 -Y0 -O -K &gt;&gt; map.eps grdimage h_cor_cut.grd -Ihi.grd -Cmount.cpt -P -R%COORDSCUT% -JX%PAPERX%cd/%PAPERY%cd --PAPER_MEDIA=Custom_%PAPERX%cx%PAPERY%c -X0 -Y0 -O -K &gt;&gt; map.eps pscoast.exe -JX%PAPERX%cd/%PAPERY%cd -R%COORDSCUT% -Q -P -Df --PAPER_MEDIA=Custom_%PAPERX%cx%PAPERY%c -X0 -Y0 -O -K &gt;&gt; map.eps pscoast.exe -JX%PAPERX%cd/%PAPERY%cd -R%COORDSCUT% -Na -Ia/0.25p,#0978AB -W0.25,#0978AB -P -Df --PAPER_MEDIA=Custom_%PAPERX%cx%PAPERY%c -X0 -Y0 -O &gt;&gt; map.eps %GSBIN%\gswin32c.exe -dSAFER -dBATCH -dNOPAUSE -dGraphicsAlphaBits=4 -sDEVICE=pngalpha -dEPSCrop -r150 -sOutputFile=Oblast_etopo.png map.eps</code> </pre> <br><p> 结果： <br><img src="https://habrastorage.org/webt/5t/za/e9/5tzae9e1eymokaachw8zt2faejc.png"></p><br><p> 作为GMT的一部分，还提供了命令行工具以及数据，该数据集称为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GSHHG</a> ，可以使用GMT中包含的<code>pscoast</code>实用程序从这些数据中创建地图。 </p><br><h3 id="inkscape"> 墨迹 </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Inkscape</a>是一个免费且开放的矢量图形编辑器，其主要格式为SVG。 </p><br><p> 我通常将Maperitive和GMT用作准备未来地图各层的工具。 然后，将生成的图层导入到Inkscape文档中的单独图层中，并且地图上的所有最终工作都已经存在。 因此，例如，对于位置图，必须“突出显示”地图上显示的区域-轮廓图上带有颜色，物理图上带有阴影。 这已经是Inkscape中对象和图层上的手动工作。 </p><br><p> 准备地图图像的最后一步是保存SVG（用于矢量地图）或导出PNG（用于栅格）。 </p><br><h2 id="process-sozdaniya-karty"> 地图创建过程 </h2><br><ol><li> 我通常先从未来地图的区域开始，然后查看该区域的原始数据。 我通过GMT在GSHHG数据上创建了原始等高线图，尝试在ETOPO1，TOPO30数据上渲染同一区域的浮雕，并在OpenStreetMap中观察该区域的外观。 如果我发现可用数据不足或它们的质量较差，包含错误或差距较大，那么我会拒绝在此阶段创建地图。 </li><li> 此外，根据近似渲染图，我选择要在哪些数据上绘制地图。 </li><li> 创建单独的地图图层。 通常，分别获得单独的边界层（例如，来自OSM的矢量），单独的陆地浮雕图像和单独的水下浮雕层（测深法），单独的海岸线层以及河流和水库层。 经常会发生两个栅格图层具有不同的分辨率的情况，在这里您必须使用插值法，以便它们在一起看起来或多或少都是有机的。 例如，从ETOPO1获取土地的土地地图是因为该区域可以更好地表示该区域，而测深图则是从TOPO30获取的，并且这两个来源的分辨率相差一半。 然后，对于较低的分辨率，我们通过插值来提高分辨率，以免出现“正方形”，不出现莫尔条纹等。 </li><li> 使用Inkscape，我们可以将地图的各个图层组合在一起。 如有必要，我们会进行必要的体力劳动。 我们尝试将地图导出到栅格，仔细考虑并确定缺陷，然后进行纠正和重复。 结果是准备好要上载到Wikimedia Commons的地图文件。 </li><li> 我们将地图文件上传到Wikimedia Commons，并在那里进行文档编制。 每个文件都应写明它是什么类型的地图，什么对象，什么坐标和什么投影，使用哪些源数据和哪些许可证，完成工作的工具。 </li><li> 我们在ru-wiki中创建或更新位置地图模板，请检查其用法。 我们确保物体在地图上的正确位置，即 正确设置了地图拐角的坐标，并且地图本身对应于这些坐标。 之后，我们将在其他语言部分中更新此位置图的模板。 </li></ol><br><h2 id="zaklyuchenie"> 结论 </h2><br><p> 我花了20到30分钟的时间来创建一张地图（在简单情况下，如在传送带上完成一系列相同类型的区域地图），长达4到6个小时（在困难情况下，当源数据存在问题并且需要进行大量手动操作时）工作）。 花了几天时间绘制了加拿大的实物图（请参阅KDPV）：我花了我拾起轮廓图上已经使用的投影。 </p><br><p> 如果我们谈论“我从中得到什么”，那么大概-从什么样的卡片中获得了很多美学上的乐趣。 </p><br><p> 谢谢您的阅读，希望我的经验会以某种方式派上用场:) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN451418/">https://habr.com/ru/post/zh-CN451418/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN451406/index.html">我们如何在哈萨克斯坦分叉俄罗斯勒洛伊·梅林</a></li>
<li><a href="../zh-CN451408/index.html">超声波GPS</a></li>
<li><a href="../zh-CN451410/index.html">Unstated-next：React应用程序的最低状态管理</a></li>
<li><a href="../zh-CN451412/index.html">火星如何失水-模拟研究</a></li>
<li><a href="../zh-CN451414/index.html">配备数字零售的VR \ AR</a></li>
<li><a href="../zh-CN451420/index.html">网站安全基础知识</a></li>
<li><a href="../zh-CN451422/index.html">世界上最好的编程语言</a></li>
<li><a href="../zh-CN451426/index.html">MSI / 55-旧终端，可在中央商店的分支机构订购商品</a></li>
<li><a href="../zh-CN451432/index.html">＃297移动开发人员的有趣材料摘要（5月6日至12日）</a></li>
<li><a href="../zh-CN451434/index.html">我如何在俄罗斯购买光纤激光打标机以及2018年选择用于雕刻和打标的设备的细微差别</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>