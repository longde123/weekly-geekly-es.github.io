<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÉüèø üöú ü§òüèæ SMPP - Protocolo de mensagens curtas ponto a ponto üôåüèø ‚òùüèæ üõåüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oi Embora mensageiros e redes sociais estejam excluindo os m√©todos tradicionais de comunica√ß√£o todos os dias, isso n√£o diminui a popularidade do SMS. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SMPP - Protocolo de mensagens curtas ponto a ponto</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452842/"> Oi  Embora mensageiros e redes sociais estejam excluindo os m√©todos tradicionais de comunica√ß√£o todos os dias, isso n√£o diminui a popularidade do SMS.  A verifica√ß√£o em um site popular ou a notifica√ß√£o de transa√ß√£o demonstra que eles vivem e viver√£o.  Voc√™ j√° se perguntou como tudo isso funciona?  Muitas vezes, o SMPP √© usado para enviar mensagens em massa, que ser√£o discutidas sob o gato. <br><a name="habracut"></a><br>  J√° havia artigos no Habr sobre smpp, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2</a> , mas seu objetivo n√£o era descrever o protocolo em si.  Claro, voc√™ pode come√ßar imediatamente com a fonte prim√°ria - a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">especifica√ß√£o</a> , mas acho que seria bom ter um breve resumo.  Vou explicar com um exemplo v3.4. Fico feliz em suas cr√≠ticas objetivas. <br><br>  O SMPP √© um protocolo de mensagens ponto a ponto.  Isso significa que cada servidor ponto / hub √© igual.  No caso mais simples, o esquema de mensagens SMS fica assim: <br><br><img src="https://habrastorage.org/webt/pp/ed/if/ppedifjeooamgdvhshv8-8pccgw.jpeg" alt="imagem"><br><br>  No entanto, se o operador nacional n√£o tiver uma rota para alguma regi√£o remota, ele solicita esse hub intermedi√°rio - SMS.  √Äs vezes, para enviar um SMS, voc√™ precisa criar uma cadeia entre v√°rios pa√≠ses ou mesmo continentes. <br><br><h4>  Sobre o protocolo </h4><br>  O SMPP √© um protocolo da camada de aplicativo baseado na troca de <abbr title="Unidade de dados de protocolo">PDU</abbr> e transmitido por sess√µes TCP / IP ou X25 para o envio de mensagens sms e ussd.  Normalmente, o SMPP √© usado no modo de conex√£o constante, o que ajuda a economizar tempo.  O SMPP usa um modelo de comunica√ß√£o cliente-servidor. <br><br><h4>  Modo de comunica√ß√£o </h4><br><img src="https://habrastorage.org/webt/za/i0/lg/zai0lgqtwd2gltfqklwt2ktluke.jpeg" alt="imagem"><br><br>  A troca de mensagens entre o remetente e o <abbr title="Centro de SMS">SMSC</abbr> via SMPP pode ser realizada nos seguintes modos: <br><br>  Transmissor (transmissor) - transmiss√£o de uma mensagem em uma dire√ß√£o, alternadamente <br>  Receptor (receptor) - recebe apenas mensagens do SMSC. <br>  Transreceiver (transceptor) - Mensagens entre SMSC e usu√°rio <br><br><h3>  Estrutura </h3><br><img src="https://habrastorage.org/webt/uc/qf/qp/ucqfqpfoz2hozxwpihaikhs450k.png" alt="imagem"><br><br><h3>  Comprimento da mensagem </h3><br>  Uma mensagem SMS pode conter 70 caracteres ao digitar em cir√≠lico e n√£o mais que 157 caracteres latinos + 3 <abbr title="Cabe√ßalho de dados do usu√°rio">UDH</abbr> se enviados.  SMS com um grande n√∫mero de caracteres, ele ser√° dividido em v√°rios segmentos e combinado no dispositivo receptor.  No caso de segmenta√ß√£o, o n√∫mero de caracteres √© reduzido devido aos cabe√ßalhos da mensagem em que a parte da mensagem √© indicada.  Portanto, ao enviar uma mensagem SMS grande, ela cont√©m no m√°ximo 153 caracteres latinos ou 67 caracteres at√≠picos. <br><br><h3>  Esquema de codifica√ß√£o de dados </h3><br>  No entanto, os caracteres devem ser codificados para transmitir uma mensagem.  No protocolo SMPP, um campo especial √© respons√°vel pela codifica√ß√£o - Data Coding Scheme, ou DCS.  Este √© um campo que indica como as mensagens devem ser reconhecidas.  Al√©m disso, o campo DCS inclui: <br><br><ul><li>  o conjunto de caracteres que define a codifica√ß√£o; </li><li>  mensagem de classe; </li><li>  solicita√ß√£o de exclus√£o autom√°tica ap√≥s a leitura; </li><li>  indica√ß√£o de compacta√ß√£o de mensagem; </li><li>  idioma de transmiss√£o; </li></ul><br>  Alfabeto padr√£o de 7 bits (GSM 03.38).  Foi desenvolvido para o sistema de mensagens GSM.  Essa codifica√ß√£o √© adequada para ingl√™s e algumas l√≠nguas latinas.  Cada caractere consiste em 7 bits e √© codificado em um octeto. <br><br>  UTF-16 (no GSM UCS2) Para incluir caracteres ausentes na codifica√ß√£o de 7 bits, foi desenvolvida a codifica√ß√£o UTF-16 que adiciona caracteres adicionais (incluindo cir√≠lico) ao reduzir o tamanho da mensagem de 160 para 70, esse tipo de codifica√ß√£o repete quase completamente Unicode <br><br>  Dados definidos pelo usu√°rio de 8 bits.  Isso inclui o KOI8-R e o Windows-1251.  Embora essa solu√ß√£o pare√ßa ser mais econ√¥mica em compara√ß√£o com o mesmo UTF-1, para usar essas codifica√ß√µes, √© necess√°ria uma configura√ß√£o preliminar nos dispositivos de recebimento e transmiss√£o.  Se em alguns deles os dados de codifica√ß√£o n√£o forem suportados, a mensagem n√£o ser√° exibida corretamente.  Como nesse caso, os dois dispositivos devem ser configurados com anteced√™ncia. <br><br><h3>  Mensagens de classe </h3><br><ul><li>  Classe 0, ou flash, uma mensagem armazenada na mem√≥ria do telefone, a pedido do usu√°rio; </li><li>  Class1, ou aqueles armazenados no telefone; </li><li>  Classe 2, deve garantir que a mensagem seja armazenada na mem√≥ria do terminal m√≥vel; caso contr√°rio, deve enviar alertas SMSC sobre a incapacidade de salvar; </li><li>  Classe 3 - nesse caso, o telefone deve enviar uma notifica√ß√£o de que a mensagem pode ser salva, independentemente da quantidade de mem√≥ria no dispositivo.  Este tipo de mensagem implica que a mensagem atingiu seu destino; </li></ul><br><h3>  Tipo de mensagem </h3><br>  Mensagem silenciosa (SMS0) Tipo de mensagem SMS sem conte√∫do.  Esse SMS √© enviado sem aviso pr√©vio e n√£o √© exibido na tela do dispositivo. <br><br><h3>  PDU </h3><br>  Cada opera√ß√£o do pdu √© emparelhada e consiste em uma solicita√ß√£o e uma resposta.  Por exemplo: um comando que diz sobre o estabelecimento de uma conex√£o (bind_transmitter / bind_transmitter_resp) ou que a mensagem foi transmitida (deliver_sm / deliver_sm_resp) <br><br><img src="https://habrastorage.org/webt/ut/lo/is/utloisn0bi6fjn_ah4loztajpee.png" alt="imagem"><br><br>  Cada pacote pdu consiste em duas partes - um cabe√ßalho e um corpo.  A estrutura do cabe√ßalho √© a mesma para qualquer pacote pdu: tamanho do comando √© o tamanho do pacote, id √© o nome do pacote e o comando status mostra uma mensagem transmitida com sucesso ou com erro. <br><br><h3>  Op√ß√µes avan√ßadas de TLV </h3><br>  TLV (Tag Length Value) ou campos opcionais.  Tais par√¢metros s√£o usados ‚Äã‚Äãpara estender as fun√ß√µes do protocolo e n√£o s√£o necess√°rios.  Este campo √© indicado no final do campo pdu.  Como exemplo, usando TLV dest_addr_np_information, voc√™ pode organizar a transfer√™ncia de informa√ß√µes sobre como portar um n√∫mero. <br><br><h3>  Ton e Npi </h3><br>  O par√¢metro TON (Type of Number) informa o SMSC sobre o formato de endere√ßamento e o tipo de rede. <br>  Par√¢metro NPI (Identifica√ß√£o do plano de numera√ß√£o) indicando o plano de numera√ß√£o. <br><br><img src="https://habrastorage.org/webt/2i/4w/qo/2i4wqos7rl1qp9i23nkoqwp0uby.png" alt="imagem"><br><br><h3>  Endere√ßo de origem da mensagem ou nome alfa </h3><br>  As mensagens enviadas para o telefone s√£o fornecidas em duas variedades: digital e alfab√©tica.  O digital pode ser longo (semelhante a um n√∫mero de telefone) e curto.  √Äs vezes, os operadores t√™m restri√ß√µes ao envio de nomes neutros, por exemplo, informa√ß√µes, alertas etc.  √Äs vezes, as operadoras n√£o permitem tr√°fego se o nome n√£o estiver registrado em sua rede.  No entanto, s√£o as caracter√≠sticas do operador. <br><br><h3>  Fases de envio </h3><br><img src="https://habrastorage.org/webt/0v/2o/gi/0v2ogi1zis-dnkyyonmld7rjbx8.png" alt="imagem"><br><br>  <b>SMS-SUBMIT</b> est√° enviando uma mensagem MO FSM (mensagem curta de um terminal m√≥vel) <br>  <b>RELAT√ìRIO DE ENVIO DE SMS</b> - confirma√ß√£o de que a mensagem foi enviada por SMSC <br>  <b>SRI SM</b> (SendRoutingInfo) - O SMSC recebe informa√ß√µes do HLR sobre o MSC / VLR da localiza√ß√£o do assinante <br>  <b>SRI SM RESP</b> - resposta do HLR em rela√ß√£o √† carne de posi√ß√£o do assinante <br>  <b>MT-FSM</b> - ap√≥s receber o local, uma mensagem √© enviada usando a opera√ß√£o "Encaminhar mensagem curta" <br>  <b>MT-FSM ACK</b> - resposta do SMSC de que uma mensagem foi enviada <br>  <b>RELAT√ìRIO DE STATUS SMS</b> - O SMSC envia o status de entrega da mensagem. <br><br><h3>  Status de entrega da mensagem </h3><br>  <b>O RELAT√ìRIO DE STATUS DO SMS</b> pode assumir v√°rios valores: <br>  Mensagem <b>ENTREGUE</b> entregue com sucesso <br>  <b>REJECTD</b> - mensagem rejeitada pelo centro de SMS <br>  <b>EXPIRED</b> - a mensagem √© removida da fila de envio ap√≥s o final do TTL (vida √∫til da mensagem) <br>  <b>UNDELIV</b> - outros casos de n√£o entrega <br>  <b>DESCONHECIDO -</b> nenhuma resposta de envio recebida. <br><br><h3>  Erros de transmiss√£o </h3><br>  √Äs vezes, as mensagens n√£o s√£o entregues.  Como resultado, ocorrem erros.  Os erros s√£o retornados para PDUs_sms_resp.  Todos os erros podem ser divididos em tempor√°rio (tempor√°rio) e permanente (permanente). <br><br>  Como exemplo, os tempor√°rios s√£o absent_subscriber, o assinante n√£o est√° dispon√≠vel ou offline e o assinante permanente n√£o existe.  Dependendo dos erros que ocorrem, uma pol√≠tica para encaminhar essas mensagens √© formada. <br><br>  Por exemplo, se um assinante estava ocupado conversando e recebeu um erro de telefone m√≥vel ocupado, a mensagem pode ser enviada novamente em alguns minutos; no entanto, se o assinante tiver um servi√ßo de mensagens bloqueadas, o reenvio n√£o far√° sentido.  Voc√™ pode encontrar a lista de erros nas p√°ginas SMSC, por exemplo, assim. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt452842/">https://habr.com/ru/post/pt452842/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt452832/index.html">Plano completo para o novo programa lunar da NASA ‚ÄúArtemis‚Äù (Artemis)</a></li>
<li><a href="../pt452834/index.html">Microestrutura fina</a></li>
<li><a href="../pt452836/index.html">Ferramentas da Web ou por onde come√ßar um pentester?</a></li>
<li><a href="../pt452838/index.html">Integra√ß√£o da 3CX com o Office 365 por meio da API do Azure</a></li>
<li><a href="../pt452840/index.html">Confer√™ncia VMware EMPOWER 2019: como foi o primeiro dia</a></li>
<li><a href="../pt452844/index.html">Transforma√ß√£o ou palavr√µes: como "digitalizar" operadores de telecomunica√ß√µes</a></li>
<li><a href="../pt452846/index.html">Como constru√≠mos um cluster confi√°vel do PostgreSQL no Patroni</a></li>
<li><a href="../pt452848/index.html">O que acontecer√° em 1¬∫ de fevereiro de 2020?</a></li>
<li><a href="../pt452850/index.html">Sistemas dentro de cartuchos: como os engenheiros expandiram os recursos dos consoles de jogos</a></li>
<li><a href="../pt452852/index.html">Trabalho remoto: mitos √† noite</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>