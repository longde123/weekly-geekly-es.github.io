<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåº üöÑ ü§í Wie wir eine besch√§digte WAV-Datei wiederhergestellt haben üèµÔ∏è „Ä∞Ô∏è üî¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es gab eine interessante Erfahrung, als eine WAV-Datei mit einem Freund wiederhergestellt wurde. Ich beschloss, unseren schmerzhaften Prozess zu besch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie wir eine besch√§digte WAV-Datei wiederhergestellt haben</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433178/"><p>  Es gab eine interessante Erfahrung, als eine WAV-Datei mit einem Freund wiederhergestellt wurde.  Ich beschloss, unseren schmerzhaften Prozess zu beschreiben, pl√∂tzlich wird sich jemand als n√ºtzlich erweisen. </p><br><h3 id="predystoriya">  Hintergrund </h3><br><p>  Es gibt traurige Geschichten, wenn der Rekorder beim Speichern der Datei einfriert oder einen Fehler ausgibt.  Wenn wir versuchen, eine besch√§digte Datei zu √∂ffnen, werden daher folgende Fehler <u>angezeigt</u> : Fehler <u>beim Dekodieren des Formats</u> , <u>falsches Format</u> oder <u>Erkennung des Dateiformats durch</u> das <u>Programm</u> . <a name="habracut"></a></p><br><h3 id="pytaemsya-razobratsya">  Ich versuche es herauszufinden </h3><br><p> Da wir die Datei nicht √∂ffnen konnten, haben wir uns f√ºr Google entschieden.  Wir wollten verstehen, wie man die .wav-Datei dem Player zuf√ºhrt.  Es wurden einige Tipps gefunden: Laden Sie es in Raw (Raw-Format) herunter, spielen Sie mit den Einstellungen usw.  Alle diese Versuche schlugen fehl. </p><br><p>  Wir haben uns entschlossen zu untersuchen, was WAV im Allgemeinen ist, und haben die Informationen zu den Headern und deren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beschreibung gefunden</a> : </p><br><p><img src="http://soundfile.sapp.org/doc/WaveFormat/wav-sound-format.gif" alt="schematische Darstellung des WAV-Dateiformats"></p><br><p>  Wir installieren den Hex-Editor (wxHexEditor), √∂ffnen und versuchen, mindestens etwas √Ñhnliches wie den Titel zu finden. </p><br><p><img src="https://habrastorage.org/webt/kz/9n/pt/kz9npt8uepfbdiiqmgheyxcyrao.png" alt="besch√§digte Datei ohne Header"></p><br><p>  Misserfolg ... es gab keine. </p><br><p>  Wir haben beschlossen, einen neuen Rekord mit einer erfolgreichen Speicherung aufzunehmen.  Wir haben es im Editor ge√∂ffnet und uns die √úberschriften angesehen. </p><br><p><img src="https://habrastorage.org/webt/dp/c9/-k/dpc9-k6vxaw25x8tur2d4pqhnmo.png" alt="normale Aufnahme, kein Titel ausgew√§hlt"></p><br><p>  Kopieren Sie die Header und f√ºgen Sie sie in unsere geschlagene Datei ein (im Folgenden BF)!  Speichern und f√ºhren Sie die Datei fieberhaft im Player aus, und nichts funktioniert!  (Ich begann wie ein richtiger Mann in der Ecke des Raumes zu schluchzen) </p><br><h3 id="pered-tem-kak-chto-to-postroit-nuzhno-chto-to-slomat">  Bevor Sie etwas bauen, m√ºssen Sie etwas zerbrechen. </h3><br><p>  Wir haben uns entschlossen herauszufinden, wie man eine normale Datei kaputt macht und ein so h√§ssliches Bild wie eine besch√§digte Datei erh√§lt. </p><br><p>  Abbildung: BF oben aufgeklebt, normale Aufnahme unten. </p><br><p><img src="https://habrastorage.org/webt/bv/4c/qf/bv4cqfqkdlit7vqt6cobebiy8ra.png" alt="√ñffnen Sie zwei Dateien in Audacity"></p><br><p>  Es stellte sich heraus, dass das Bild √§hnlich wird, wenn Sie 1 Byte im hexRedator in einer normalen Datei l√∂schen und speichern.  Und wenn Sie ein Byte zur√ºckgeben, sogar ein leeres mit Nullen gef√ºlltes, wird alles normal. </p><br><h3 id="napisanie-bash-skripta">  Ein Bash-Skript schreiben </h3><br><p>  Wir haben uns entschlossen, die Datei byteweise zu l√∂schen und zu speichern, um ein normales Bild zu erhalten, wie in der obigen Abbildung dargestellt.  Wir haben 2 Dateien erstellt, eine nur die Header und die andere eine besch√§digte Datei (nachdem sie etwas weniger als ein Megabyte gek√ºrzt wurde). </p><br><p>  Wir haben ein kleines Skript geschrieben, das ein Byte aus der Datei l√∂scht, es mit dem Header zusammenf√ºgt und es dann mit einer Seriennummer speichert. </p><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash for i in {1..1000} do cat header.wav &gt; "./wav/$i.wav" tail -c +$i raw.wav &gt;&gt; "./wav/$i.wav" done</span></span></code> </pre> <br><p>  Wir starten das Skript und warten mit Besorgnis am Rand des Hockers auf das Ergebnis.  Leider mussten wir diese Dateien manuell anzeigen, aber wir wussten nicht, wie wir es auf andere Weise besser machen k√∂nnten.  Sie warfen 250 Dateien in K√ºhnheit und schauten durch die Spuren: </p><br><p><img src="https://habrastorage.org/webt/pm/ed/bv/pmedbvvnlp8blflugm4hi9qkutc.png" alt="ein paar kaputte Dateien"></p><br><p>  Es war nicht notwendig, lange zu scrollen, da wir in der 537-Datei gefunden haben, wonach wir gesucht haben: </p><br><p><img src="https://habrastorage.org/webt/6u/n-/fk/6un-fk4gu7neue2xft294sixhys.png" alt="hier ist es, 537 Datei mit normalem Sound"></p><br><p>  Es bleibt der Fall f√ºr kleine.  Wir sehen uns diese Datei im Hash des Editors an, wo sie aufgeh√∂rt hat.  √ñffnen Sie das BF im Editor und l√∂schen Sie die gew√ºnschte Bytel√§nge nach dem Header.  Das ist alles, eine zweist√ºndige Datei wird normal abgespielt. </p><br><h2 id="ps">  PS </h2><br><p>  Dies k√∂nnte h√∂chstwahrscheinlich erleichtert werden.  Wer wei√ü, wie man die Arbeit erleichtert oder irgendwie optimiert, schreibt, ich werde diesen "Leitfaden" erg√§nzen. </p><br><p>  Vielen Dank f√ºr Ihre Aufmerksamkeit. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de433178/">https://habr.com/ru/post/de433178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de433168/index.html">Warum hat ein Programmierer ein Praktikum in der K√ºche - ein Gespr√§ch mit Dodo Pizza √ºber gemba, .NET und Offenheit</a></li>
<li><a href="../de433170/index.html">Wie wir die Architektur des Unternehmens nicht wiederholen konnten</a></li>
<li><a href="../de433172/index.html">Wir verbinden den Multiplayer mit dem in C ++ geschriebenen Handyspiel "Machen Sie W√∂rter aus W√∂rtern" auf iOS und Android</a></li>
<li><a href="../de433174/index.html">Nicht alle Patches sind gleicherma√üen n√ºtzlich.</a></li>
<li><a href="../de433176/index.html">Docker Remote-API f√ºr Zertifikatauthentifizierung mit Sperr√ºberpr√ºfung</a></li>
<li><a href="../de433180/index.html">L√∂sen von Datentypproblemen in Ruby oder Machen Sie Daten wieder zuverl√§ssig</a></li>
<li><a href="../de433182/index.html">Ist es m√∂glich, einen Agenten f√ºr den Handel an der B√∂rse mit Verst√§rkung auszubilden? Implementierung der R-Sprache</a></li>
<li><a href="../de433184/index.html">ASP.NET Core 2.2 ver√∂ffentlicht. Was gibt's Neues? (2 von 3)</a></li>
<li><a href="../de433186/index.html">Es reicht nicht aus, Polygone zu z√§hlen, um 3D-Modelle zu optimieren</a></li>
<li><a href="../de433188/index.html">Die Staatsduma legte einen Gesetzentwurf zur autonomen Arbeit von Runet vor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>