<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤟 👨🏼‍💼 🚴 CMake: Kasus ketika Kualitas Proyek tidak dapat dimaafkan 🧓🏼 😱 🚶🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="CMake adalah sistem lintas platform untuk mengotomatisasi pembuatan proyek. Sistem ini jauh lebih tua daripada penganalisis kode statis PVS-Studio, te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>CMake: Kasus ketika Kualitas Proyek tidak dapat dimaafkan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/464145/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c40/4a5/994/c404a599454444ac3e9021195c5b3c3c.png" alt="Gambar 1"></div><br>  CMake adalah sistem lintas platform untuk mengotomatisasi pembuatan proyek.  Sistem ini jauh lebih tua daripada penganalisis kode statis PVS-Studio, tetapi tidak ada yang mencoba menerapkan penganalisa pada kodenya dan meninjau kesalahannya.  Ternyata, ada banyak dari mereka.  Audiens CMake sangat besar.  Proyek baru dimulai dan yang lama porting.  Saya ngeri memikirkan berapa banyak pengembang yang bisa mendapatkan kesalahan. <br><a name="habracut"></a><br><h2>  Pendahuluan </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CMake</a> adalah sistem lintas platform untuk mengotomatisasi pembuatan perangkat lunak dari kode sumber.  CMake tidak dimaksudkan secara langsung untuk membangun, itu hanya menghasilkan file untuk mengontrol membangun dari file CMakeLists.txt.  Rilis pertama dari program ini terjadi pada tahun 2000. Sebagai perbandingan, analisa PVS-Studio hanya muncul pada tahun 2008. Pada saat itu, program ini bertujuan untuk mencari bug yang dihasilkan dari porting sistem 32-bit ke sistem 64-bit.  Pada 2010, set pertama tujuan umum diagnostik muncul (V501- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V545</a> ).  Omong-omong, kode CMake memiliki beberapa peringatan dari set pertama ini. <br><br><h2>  Kesalahan yang tidak bisa dimaafkan </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V1040</a> Kemungkinan salah ketik dalam ejaan nama makro yang telah ditentukan sebelumnya.  Makro '__MINGW32_' mirip dengan '__MINGW32__'.  winapi.h 4112 <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* from winternl.h */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> !defined(__UNICODE_STRING_DEFINED) &amp;&amp; defined(__MINGW32_) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> __UNICODE_STRING_DEFINED #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span></code> </pre> <br>  Diagnostik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V1040</a> diimplementasikan belum lama ini.  Kemungkinan besar, pada saat memposting artikel, artikel itu belum dirilis, namun, kami sudah menemukan kesalahan keren dengan bantuannya. <br><br>  Ada kesalahan ketik yang dibuat atas nama <i>__MINGW32_</i> .  Pada akhirnya, satu karakter garis bawah hilang.  Jika Anda mencari kode dengan nama ini, Anda dapat melihat bahwa versi dengan dua karakter garis bawah di kedua sisi digunakan dalam proyek: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed5/ad7/425/ed5ad7425145902765d728287ab5f2fa.png" alt="Gambar 3"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V531</a> Aneh bahwa operator sizeof () dikalikan dengan sizeof ().  cmGlobalVisualStudioGenerator.cxx 558 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsVisualStudioMacrosFileRegistered</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; macrosFile, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; regKeyBase, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; nextAvailableSubKeyName)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ERROR_SUCCESS == result) { <span class="hljs-keyword"><span class="hljs-keyword">wchar_t</span></span> subkeyname[<span class="hljs-number"><span class="hljs-number">256</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// &lt;= DWORD cch_subkeyname = sizeof(subkeyname) * sizeof(subkeyname[0]); // &lt;= wchar_t keyclass[256]; DWORD cch_keyclass = sizeof(keyclass) * sizeof(keyclass[0]); FILETIME lastWriteTime; lastWriteTime.dwHighDateTime = 0; lastWriteTime.dwLowDateTime = 0; while (ERROR_SUCCESS == RegEnumKeyExW(hkey, index, subkeyname, &amp;cch_subkeyname, 0, keyclass, &amp;cch_keyclass, &amp;lastWriteTime)) { .... } .... }</span></span></code> </pre> <br>  Untuk array yang dinyatakan secara statis, <i>sizeof</i> operator akan menghitung ukuran dalam byte, dengan mempertimbangkan jumlah elemen dan ukurannya.  Saat mengevaluasi nilai variabel <i>cch_subkeyname</i> , pengembang tidak memperhitungkannya dan mendapat nilai 4 kali lebih besar dari yang dimaksudkan.  Mari kita jelaskan dari mana "empat kali" berasal. <br><br>  Array dan ukurannya yang salah diteruskan ke fungsi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RegEnumKeyExW</a> : <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">LSTATUS </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegEnumKeyExW</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( HKEY hKey, DWORD dwIndex, LPWSTR lpName, </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">// &lt;= subkeyname LPDWORD lpcchName, // &lt;= cch_subkeyname LPDWORD lpReserved, LPWSTR lpClass, LPDWORD lpcchClass, PFILETIME lpftLastWriteTime );</span></span></span></span></span></span></code> </pre> <br>  Pointer <i>lpcchName</i> harus mengarah ke variabel, berisi ukuran buffer dalam karakter: "Sebuah pointer ke variabel yang menentukan ukuran buffer yang ditentukan oleh parameter <i>lpClass</i> , dalam karakter".  Ukuran array <i>subkeyname</i> adalah 512 byte dan dapat menyimpan 256 karakter dari tipe <i>wchar_t</i> (di Windows, wchar_t adalah 2 byte).  Ini adalah 256 yang harus diteruskan ke fungsi.  Sebaliknya, 512 dikalikan dengan 2 dan kami mendapatkan 1024. <br><br>  Saya pikir, sekarang sudah jelas bagaimana cara memperbaiki kesalahan ini.  Anda perlu menggunakan pembagian alih-alih perkalian: <br><br><pre> <code class="cpp hljs">DWORD cch_subkeyname = <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(subkeyname) / <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(subkeyname[<span class="hljs-number"><span class="hljs-number">0</span></span>]);</code> </pre> <br>  Ngomong-ngomong, kesalahan yang sama terjadi ketika mengevaluasi nilai variabel <i>cch_keyclass</i> . <br><br>  Kesalahan yang dijelaskan berpotensi menyebabkan buffer overflow.  Semua fragmen seperti itu pasti harus diperbaiki: <br><br><ul><li>  V531 Aneh bahwa operator sizeof () dikalikan dengan sizeof ().  cmGlobalVisualStudioGenerator.cxx 556 </li><li>  V531 Aneh bahwa operator sizeof () dikalikan dengan sizeof ().  cmGlobalVisualStudioGenerator.cxx 572 </li><li>  V531 Aneh bahwa operator sizeof () dikalikan dengan sizeof ().  cmGlobalVisualStudioGenerator.cxx 621 </li><li>  V531 Aneh bahwa operator sizeof () dikalikan dengan sizeof ().  cmGlobalVisualStudioGenerator.cxx 622 </li><li>  V531 Aneh bahwa operator sizeof () dikalikan dengan sizeof ().  cmGlobalVisualStudioGenerator.cxx 649 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V595 Pointer</a> 'this-&gt; BuildFileStream' digunakan sebelum diverifikasi terhadap nullptr.  Periksa baris: 133, 134. cmMakefileTargetGenerator.cxx 133 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> cmMakefileTargetGenerator::CreateRuleFile() { .... <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;BuildFileStream-&gt;SetCopyIfDifferent(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;BuildFileStream) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } .... }</code> </pre> <br>  Pointer <i>ini-&gt; BuildFileStream</i> dereferenced tepat sebelum memeriksa validitasnya.  Bukankah itu menimbulkan masalah bagi siapa pun?  Di bawah ini ada contoh lain dari cuplikan tersebut.  Itu dibuat seperti salinan karbon.  Tetapi pada kenyataannya, ada banyak peringatan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V595</a> dan kebanyakan dari mereka tidak begitu jelas.  Dari pengalaman saya, saya dapat mengatakan bahwa mengoreksi peringatan diagnostik ini memakan waktu paling lama. <br><br><ul><li>  V595 Pointer 'this-&gt; FlagFileStream' digunakan sebelum diverifikasi terhadap nullptr.  Periksa baris: 303, 304. cmMakefileTargetGenerator.cxx 303 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V614 Uninitialized</a> pointer 'str' digunakan.  cmVSSetupHelper.h 80 <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SmartBSTR</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: SmartBSTR() { str = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; } SmartBSTR(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SmartBSTR&amp; src) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (src.str != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { str = ::SysAllocStringByteLen((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>*)str, ::SysStringByteLen(str)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { str = ::SysAllocStringByteLen(<span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); } } .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: BSTR str; };</code> </pre> <br>  Analyzer mendeteksi penggunaan penunjuk <i>str yang</i> tidak diinisialisasi.  Itu muncul karena kesalahan ketik biasa.  Saat memanggil fungsi <i>SysAllocStringByteLen</i> , seseorang harus menggunakan pointer <i>src.str</i> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V557</a> Array overrun dimungkinkan.  Nilai indeks 'lensymbol' bisa mencapai 28. archive_read_support_format_rar.c 2749 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> int64_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">expand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct archive_read *a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int64_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> end)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lensymbol = read_next_symbol(a, &amp;rar-&gt;lengthcode)) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> bad_data; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lensymbol &gt; (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(lengthbases)/<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(lengthbases[<span class="hljs-number"><span class="hljs-number">0</span></span>]))) <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> bad_data; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lensymbol &gt; (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(lengthbits)/<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(lengthbits[<span class="hljs-number"><span class="hljs-number">0</span></span>]))) <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> bad_data; len = lengthbases[lensymbol] + <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lengthbits[lensymbol] &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!rar_br_read_ahead(a, br, lengthbits[lensymbol])) <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> truncated_data; len += rar_br_bits(br, lengthbits[lensymbol]); rar_br_consume(br, lengthbits[lensymbol]); } .... }</code> </pre> <br>  Bagian kode ini menyembunyikan beberapa masalah sekaligus.  Saat mengakses array <i>basis</i> <i>panjang</i> dan <i>panjang</i> , indeks array mungkin keluar dari batas, karena pengembang menulis operator '&gt;' alih-alih '&gt; =' di atas.  Pemeriksaan ini mulai kehilangan satu nilai yang tidak dapat diterima.  Di sini kita tidak memiliki apa pun kecuali pola kesalahan klasik yang disebut Kesalahan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Off-by-one</a> . <br><br>  Inilah seluruh daftar operasi akses array oleh indeks yang tidak valid: <br><br><ul><li>  V557 Array overrun dimungkinkan.  Nilai indeks 'lensymbol' bisa mencapai 28. archive_read_support_format_rar.c 2750 </li><li>  V557 Array overrun dimungkinkan.  Nilai indeks 'lensymbol' bisa mencapai 28. archive_read_support_format_rar.c 2751 </li><li>  V557 Array overrun dimungkinkan.  Nilai indeks 'lensymbol' bisa mencapai 28. archive_read_support_format_rar.c 2753 </li><li>  V557 Array overrun dimungkinkan.  Nilai indeks 'lensymbol' bisa mencapai 28. archive_read_support_format_rar.c 2754 </li><li>  V557 Array overrun dimungkinkan.  Nilai indeks 'offssymbol' bisa mencapai 60. archive_read_support_format_rar.c 2797 </li></ul><br><h2>  Kebocoran memori </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V773</a> Fungsi itu keluar tanpa melepaskan pointer 'testRun'.  Kebocoran memori dimungkinkan.  cmCTestMultiProcessHandler.cxx 193 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> cmCTestMultiProcessHandler::FinishTestProcess(cmCTestRunTest* runner, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> started) { .... <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> runner; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (started) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;StartNextTests(); } } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> cmCTestMultiProcessHandler::StartTestProcess(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> test) { .... cmCTestRunTest* testRun = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> cmCTestRunTest(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... if (testRun-&gt;StartTest(this-&gt;Completed, this-&gt;Total)) { return true; // &lt;= } } this-&gt;FinishTestProcess(testRun, false); // &lt;= return false; }</span></span></code> </pre> <br>  Analyzer mendeteksi kebocoran memori.  Memori oleh pointer <i>testRun</i> tidak dirilis, jika fungsi <i>testRun-&gt; StartTest</i> mengembalikan <i>true</i> .  Ketika menjalankan cabang kode lain, memori ini akan dirilis dalam fungsi <i>ini-&gt; FinishTestProcess.</i> <br><br><h2>  Kebocoran sumber daya </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V773</a> Fungsi ini keluar tanpa menutup file yang direferensikan oleh pegangan 'fd'.  Kebocoran sumber daya mungkin terjadi.  rhash.c 450 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">RHASH_API </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rhash_file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ FILE* fd; rhash ctx; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> res; hash_id &amp;= RHASH_ALL_HASHES; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hash_id == <span class="hljs-number"><span class="hljs-number">0</span></span>) { errno = EINVAL; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((fd = fopen(filepath, <span class="hljs-string"><span class="hljs-string">"rb"</span></span>)) == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((ctx = rhash_init(hash_id)) == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= fclose(fd); ??? res = rhash_file_update(ctx, fd); fclose(fd); rhash_final(ctx, result); rhash_free(ctx); return res; }</span></span></code> </pre> <br><h2>  Logika Aneh dalam Kondisi </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V590</a> Pertimbangkan untuk memeriksa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ekspresi</a> '* s! =' \ 0 '&amp;&amp; * s ==' ''.  Ekspresi berlebihan atau mengandung kesalahan cetak.  archive_cmdline.c 76 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ssize_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_argument</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct archive_string *as, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *p)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *s = p; archive_string_empty(as); <span class="hljs-comment"><span class="hljs-comment">/* Skip beginning space characters. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (*s != <span class="hljs-string"><span class="hljs-string">'\0'</span></span> &amp;&amp; *s == <span class="hljs-string"><span class="hljs-string">' '</span></span>) s++; .... }</code> </pre> <br>  <i>*</i> Perbandingan karakter dengan null adalah mubazir.  Kondisi loop <i>sementara</i> hanya bergantung pada apakah karakter sama dengan spasi atau tidak.  Ini bukan kesalahan, tetapi komplikasi kode yang tidak perlu. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V592</a> Ekspresi tertutup oleh tanda kurung dua kali: ((ekspresi)).  Sepasang tanda kurung tidak perlu atau salah cetak ada.  cmCTestTestHandler.cxx 899 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> cmCTestTestHandler::ComputeTestListForRerunFailed() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;ExpandTestsToRunInformationForRerunFailed(); ListOfTests finalList; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cnt = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (cmCTestTestProperties&amp; tp : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;TestList) { cnt++; <span class="hljs-comment"><span class="hljs-comment">// if this test is not in our list of tests to run, then skip it. if ((!this-&gt;TestsToRun.empty() &amp;&amp; std::find(this-&gt;TestsToRun.begin(), this-&gt;TestsToRun.end(), cnt) == this-&gt;TestsToRun.end())) { continue; } tp.Index = cnt; finalList.push_back(tp); } .... }</span></span></code> </pre> <br>  Penganalisa memperingatkan bahwa operasi negasi mungkin harus dikeluarkan dari kurung.  Tampaknya tidak ada bug di sini - hanya kurung ganda yang tidak perlu.  Tetapi kemungkinan besar, ada kesalahan logika dalam kode. <br><br>  Operator <i>lanjutan</i> dieksekusi hanya dalam kasus jika daftar tes <i>ini-&gt; TestsToRun</i> tidak kosong dan <i>cnt</i> tidak ada di dalamnya.  Masuk akal untuk mengasumsikan bahwa jika daftar tes kosong, tindakan yang sama perlu dilakukan.  Kemungkinan besar, kondisinya adalah sebagai berikut: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;TestsToRun.empty() || <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::find(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;TestsToRun.begin(), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;TestsToRun.end(), cnt) == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;TestsToRun.end()) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V592</a> Ekspresi tertutup oleh tanda kurung dua kali: ((ekspresi)).  Sepasang tanda kurung tidak perlu atau salah cetak ada.  cmMessageCommand.cxx 73 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> cmMessageCommand::InitialPass(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>&amp; args, cmExecutionStatus&amp;) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (*i == <span class="hljs-string"><span class="hljs-string">"DEPRECATION"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;Makefile-&gt;IsOn(<span class="hljs-string"><span class="hljs-string">"CMAKE_ERROR_DEPRECATED"</span></span>)) { fatal = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; type = MessageType::DEPRECATION_ERROR; level = cmake::LogLevel::LOG_ERROR; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;Makefile-&gt;IsSet(<span class="hljs-string"><span class="hljs-string">"CMAKE_WARN_DEPRECATED"</span></span>) || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;Makefile-&gt;IsOn(<span class="hljs-string"><span class="hljs-string">"CMAKE_WARN_DEPRECATED"</span></span>))) { type = MessageType::DEPRECATION_WARNING; level = cmake::LogLevel::LOG_WARNING; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } ++i; } .... }</code> </pre> <br>  Ini adalah contoh yang serupa, tetapi kali ini saya lebih yakin bahwa kesalahan terjadi.  Fungsi <i>IsSet ("CMAKE_WARN_DEPRECATED")</i> memeriksa bahwa nilai <i>CMAKE_WARN_DEPRECATED</i> diatur secara global, dan fungsi <i>IsOn ("CMAKE_WARN_DEPRECATED)</i> memeriksa bahwa nilai tersebut diatur dalam konfigurasi proyek.  Kemungkinan besar, operator komplementer itu berlebihan, karena dalam kedua kasus, benar untuk menetapkan nilai <i>tipe</i> dan <i>level yang sama.</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V728</a> Pemeriksaan berlebihan dapat disederhanakan.  The '(A &amp;&amp;! B) ||  Ekspresi (! A &amp;&amp; B) 'sama dengan ekspresi' bool (A)! = Bool (B) '.  cmCTestRunTest.cxx 151 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> cmCTestRunTest::EndTest(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> completed, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> total, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> started) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((success &amp;&amp; !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;TestProperties-&gt;WillFail) || (!success &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;TestProperties-&gt;WillFail)) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;TestResult.Status = cmCTestTestHandler::COMPLETED; outputStream &lt;&lt; <span class="hljs-string"><span class="hljs-string">" Passed "</span></span>; } .... }</code> </pre> <br>  Kode ini bisa lebih sederhana.  Seseorang dapat menulis ulang ekspresi kondisional dengan cara berikut: <br><br><pre> <code class="cpp hljs">} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (success != <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;TestProperties-&gt;WillFail) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;TestResult.Status = cmCTestTestHandler::COMPLETED; outputStream &lt;&lt; <span class="hljs-string"><span class="hljs-string">" Passed "</span></span>; }</code> </pre> <br>  Beberapa tempat lagi untuk disederhanakan: <br><br><ul><li>  V728 Pemeriksaan berlebihan dapat disederhanakan.  The '(A &amp;&amp; B) ||  Ekspresi (! A &amp;&amp;! B) 'sama dengan ekspresi' bool (A) == bool (B) '.  cmCTestTestHandler.cxx 702 </li><li>  V728 Pemeriksaan berlebihan dapat disederhanakan.  The '(A &amp;&amp;! B) ||  Ekspresi (! A &amp;&amp; B) 'sama dengan ekspresi' bool (A)! = Bool (B) '.  digest_sspi.c 443 </li><li>  V728 Pemeriksaan berlebihan dapat disederhanakan.  The '(A &amp;&amp;! B) ||  Ekspresi (! A &amp;&amp; B) 'sama dengan ekspresi' bool (A)! = Bool (B) '.  tcp.c 1295 </li><li>  V728 Pemeriksaan berlebihan dapat disederhanakan.  The '(A &amp;&amp;! B) ||  Ekspresi (! A &amp;&amp; B) 'sama dengan ekspresi' bool (A)! = Bool (B) '.  testDynamicLoader.cxx 58 </li><li>  V728 Pemeriksaan berlebihan dapat disederhanakan.  The '(A &amp;&amp;! B) ||  Ekspresi (! A &amp;&amp; B) 'sama dengan ekspresi' bool (A)! = Bool (B) '.  testDynamicLoader.cxx 65 </li><li>  V728 Pemeriksaan berlebihan dapat disederhanakan.  The '(A &amp;&amp;! B) ||  Ekspresi (! A &amp;&amp; B) 'sama dengan ekspresi' bool (A)! = Bool (B) '.  testDynamicLoader.cxx 72 </li></ul><br><h2>  Berbagai peringatan </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V523</a> Pernyataan 'maka' setara dengan fragmen kode berikutnya.  archive_read_support_format_ar.c 415 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _ar_read_header(struct archive_read *a, struct archive_entry *entry, struct ar *ar, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *h, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> *unconsumed) { .... <span class="hljs-comment"><span class="hljs-comment">/* * "__.SYMDEF" is a BSD archive symbol table. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(filename, <span class="hljs-string"><span class="hljs-string">"__.SYMDEF"</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { archive_entry_copy_pathname(entry, filename); <span class="hljs-comment"><span class="hljs-comment">/* Parse the time, owner, mode, size fields. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (ar_parse_common_header(ar, entry, h)); } <span class="hljs-comment"><span class="hljs-comment">/* * Otherwise, this is a standard entry. The filename * has already been trimmed as much as possible, based * on our current knowledge of the format. */</span></span> archive_entry_copy_pathname(entry, filename); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (ar_parse_common_header(ar, entry, h)); }</code> </pre> <br>  Ekspresi dalam kondisi terakhir mirip dengan dua baris terakhir dari fungsi.  Pengembang dapat menyederhanakan kode ini dengan menghapus ketentuan, atau ada kesalahan dalam kode dan harus diperbaiki. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V535</a> Variabel 'i' digunakan untuk loop ini dan untuk loop luar.  Periksa baris: 2220, 2241. multi.c 2241 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> CURLMcode </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">singlesocket</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct Curl_multi *multi, struct Curl_easy *data)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i = <span class="hljs-number"><span class="hljs-number">0</span></span>; (i&lt; MAX_SOCKSPEREASYHANDLE) &amp;&amp; <span class="hljs-comment"><span class="hljs-comment">// &lt;= (curraction &amp; (GETSOCK_READSOCK(i) | GETSOCK_WRITESOCK(i))); i++) { unsigned int action = CURL_POLL_NONE; unsigned int prevaction = 0; unsigned int comboaction; bool sincebefore = FALSE; s = socks[i]; /* get it from the hash */ entry = sh_getentry(&amp;multi-&gt;sockhash, s); if(curraction &amp; GETSOCK_READSOCK(i)) action |= CURL_POLL_IN; if(curraction &amp; GETSOCK_WRITESOCK(i)) action |= CURL_POLL_OUT; actions[i] = action; if(entry) { /* check if new for this transfer */ for(i = 0; i&lt; data-&gt;numsocks; i++) { // &lt;= if(s == data-&gt;sockets[i]) { prevaction = data-&gt;actions[i]; sincebefore = TRUE; break; } } } .... }</span></span></code> </pre> <br>  Variabel <i>i</i> digunakan sebagai penghitung lingkaran di loop luar dan dalam.  Pada saat yang sama, nilai penghitung kembali dimulai dari nol di loop dalam.  Mungkin ini bukan bug di sini, tetapi kodenya mencurigakan. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V519 Variabel</a> 'tagString' diberi nilai dua kali berturut-turut.  Mungkin ini sebuah kesalahan.  Periksa baris: 84, 86. cmCPackLog.cxx 86 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> cmCPackLog::Log(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tag, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* file, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> line, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* msg, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> length) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tag &amp; LOG_OUTPUT) { output = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; display = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (needTagString) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!tagString.empty()) { tagString += <span class="hljs-string"><span class="hljs-string">","</span></span>; } tagString = <span class="hljs-string"><span class="hljs-string">"VERBOSE"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tag &amp; LOG_WARNING) { warning = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; display = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (needTagString) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!tagString.empty()) { tagString += <span class="hljs-string"><span class="hljs-string">","</span></span>; } tagString = <span class="hljs-string"><span class="hljs-string">"WARNING"</span></span>; } } .... }</code> </pre> <br>  Variabel <i>tagString</i> ditimpa dengan nilai baru di semua tempat.  Sulit mengatakan apa masalahnya atau mengapa mereka melakukannya.  Mungkin, operator '=' dan '+ =' kacau. <br><br>  Seluruh daftar tempat-tempat tersebut: <br><br><ul><li>  V519 Variabel 'tagString' diberi nilai dua kali berturut-turut.  Mungkin ini sebuah kesalahan.  Periksa baris: 94, 96. cmCPackLog.cxx 96 </li><li>  V519 Variabel 'tagString' diberi nilai dua kali berturut-turut.  Mungkin ini sebuah kesalahan.  Periksa baris: 104, 106. cmCPackLog.cxx 106 </li><li>  V519 Variabel 'tagString' diberi nilai dua kali berturut-turut.  Mungkin ini sebuah kesalahan.  Periksa baris: 114, 116. cmCPackLog.cxx 116 </li><li>  V519 Variabel 'tagString' diberi nilai dua kali berturut-turut.  Mungkin ini sebuah kesalahan.  Periksa baris: 125, 127. cmCPackLog.cxx 127 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V519 Variabel</a> 'aes-&gt; aes_set' diberi nilai dua kali berturut-turut.  Mungkin ini sebuah kesalahan.  Periksa baris: 4052, 4054. archive_string.c 4054 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">archive_mstring_copy_utf8</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct archive_mstring *aes, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *utf8)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (utf8 == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { aes-&gt;aes_set = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= } aes-&gt;aes_set = AES_SET_UTF8; // &lt;= .... return (int)strlen(utf8); }</span></span></code> </pre> <br>  Pengaturan paksa nilai <i>AES_SET_UTF8</i> terlihat mencurigakan.  Saya pikir kode seperti itu akan membingungkan pengembang mana pun, yang datang untuk memperbaiki fragmen ini. <br><br>  Kode ini disalin ke tempat lain: <br><br><ul><li>  V519 Variabel 'aes-&gt; aes_set' diberi nilai dua kali berturut-turut.  Mungkin ini sebuah kesalahan.  Periksa baris: 4066, 4068. archive_string.c 4068 </li></ul><br><h2>  Cara Menemukan Bug dalam Proyek di CMake </h2><br>  Pada bagian ini, saya akan secara singkat memberi tahu Anda cara memeriksa proyek-proyek CMake dengan PVS-Studio semudah satu-dua-tiga. <br><br>  <b>Windows / Visual Studio</b> <br><br>  Untuk Visual Studio, Anda dapat membuat file proyek menggunakan CMake GUI atau perintah berikut: <br><br><pre> <code class="cpp hljs">cmake -G <span class="hljs-string"><span class="hljs-string">"Visual Studio 15 2017 Win64"</span></span> ..</code> </pre> <br>  Selanjutnya, Anda dapat membuka file .sln dan memeriksa proyek menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">plugin</a> untuk Visual Studio. <br><br>  <b>Linux / macOS</b> <br><br>  File compile_commands.json digunakan untuk memeriksa sistem ini.  Omong-omong, itu dapat dihasilkan dalam sistem pembangunan yang berbeda.  Ini adalah bagaimana Anda melakukannya di CMake: <br><br><pre> <code class="cpp hljs">cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=On ..</code> </pre> <br>  Hal terakhir yang harus dilakukan adalah menjalankan alat analisa dalam direktori dengan file .json: <br><br><pre> <code class="cpp hljs">pvs-studio-analyzer analyze -l /path/to/PVS-Studio.lic -o /path/to/project.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> -e /path/to/exclude-path -j&lt;N&gt;</code> </pre> <br>  Kami juga telah mengembangkan modul untuk proyek-proyek CMake.  Beberapa orang suka menggunakannya.  Modul CMake dan contoh penggunaannya dapat ditemukan di repositori kami di GitHub: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pvs-studio-cmake-example</a> . <br><br><h2>  Kesimpulan </h2><br>  Sejumlah besar pengguna CMake hebat untuk menguji proyek, tetapi banyak masalah dapat dicegah sebelum rilis dengan menggunakan alat analisis kode statis, seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PVS-Studio</a> . <br><br>  Jika Anda menyukai hasil analisis, tetapi proyek Anda tidak ditulis dalam C dan C ++, saya ingin mengingatkan bahwa analis juga mendukung analisis proyek di C # dan Java.  Anda dapat menguji penganalisa pada proyek Anda dengan membuka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman</a> ini. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id464145/">https://habr.com/ru/post/id464145/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id464131/index.html">Inovasi JavaScript: hasil Google I / O 2019. Bagian 2</a></li>
<li><a href="../id464133/index.html">Performa bukan hanya tentang CPU: membuat profiler Anda sendiri untuk Python</a></li>
<li><a href="../id464137/index.html">Dukungan teknis Miran: cara kerjanya</a></li>
<li><a href="../id464141/index.html">Fantasi tentang masalah metaclasses di C #</a></li>
<li><a href="../id464143/index.html">Obat kanker pribadi. Bagaimana Gen Pasien Mempengaruhi Keberhasilan Perawatan</a></li>
<li><a href="../id464147/index.html">CMake: kasus ketika proyek tidak termaafkan kualitas kodenya</a></li>
<li><a href="../id464149/index.html">Kisah monolit</a></li>
<li><a href="../id464151/index.html">Victor Vyalichkin: “Kebebasan, kesetaraan, persaudaraan hanya ada di OpenStreetMap, di mana semuanya selalu terlihat”</a></li>
<li><a href="../id464155/index.html">AI membantu mempelajari hewan di Afrika</a></li>
<li><a href="../id464161/index.html">SPAM dan GDRP - bagaimana melakukan milis "di sana"?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>