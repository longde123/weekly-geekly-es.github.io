<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßïüèº üö¥üèø üßíüèº Ancinho subaqu√°tico desenvolvimento SmartTV üññüèª üéì üí®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! 

 H√° muito tempo √© uma id√©ia escrever um artigo sobre os problemas do desenvolvimento de SmartTV, mas, quando mergulhamos nessa √°rea, inven...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ancinho subaqu√°tico desenvolvimento SmartTV</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421119/"><img src="https://habrastorage.org/webt/iy/2o/po/iy2opoxjxlendozajpei-1xwvnc.png" alt="imagem"><br><br>  Ol√° Habr! <br><br>  H√° muito tempo √© uma id√©ia escrever um artigo sobre os problemas do desenvolvimento de SmartTV, mas, quando mergulhamos nessa √°rea, inventamos nossa pr√≥pria bicicleta, o que nos ajudou a resolver esses problemas.  Portanto, neste artigo, destacaremos n√£o apenas alguns dos aspectos problem√°ticos do desenvolvimento de SmartTV, mas tamb√©m falaremos sobre como resolv√™-los usando a <s>pr√≥xima</s> nova estrutura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PureQML</a> . <br><br>  Todo mundo que est√° interessado neste t√≥pico ou apenas curioso para ver a nova estrutura, que tamb√©m pode estar na SmartTV, pedimos um gato. <br><a name="habracut"></a><br><h2>  O zool√≥gico </h2><br>  Para come√ßar, na natureza existem muitas plataformas SmartTV e muitas delas s√£o voltadas para o lan√ßamento de aplicativos da web.  Isso pode dar a ilus√£o de que basta escrever o c√≥digo uma vez e us√°-lo em todas as plataformas.  Mas, na realidade, todas as plataformas t√™m algumas diferen√ßas que devem ser levadas em considera√ß√£o.  Entre esses recursos, √© poss√≠vel distinguir o seguinte: <br><br><ul><li> <i>Manipula√ß√£o de bot√µes do controle remoto</i> .  Nem todos os fabricantes usam os mesmos c√≥digos de tecla para os mesmos bot√µes do controle remoto.  Como exemplo, voc√™ pode comparar os c√≥digos-chave da plataforma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">orsay</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">webos</a> .  Para tizen, √© necess√°rio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">registrar</a> explicitamente alguns bot√µes para uso futuro. </li><li>  <i>Video player</i>  Muitas plataformas suportam o player de v√≠deo html5, mas, por exemplo, o tizen usa o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AVPlay</a> e, para o orsay, usa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sua pr√≥pria API</a> para trabalhar com o player nativo. </li><li>  <i>Informa√ß√µes sobre o dispositivo</i> .  A obten√ß√£o de informa√ß√µes sobre o dispositivo em cada plataforma tamb√©m √© implementada de maneira diferente. No NetCast, um objeto especial √© criado com um id-shnik especial; em outros casos, m√©todos espec√≠ficos para cada plataforma s√£o usados. </li><li>  <i>Focus</i>  O aplicativo SmartTV √© focado principalmente no controle remoto e, portanto, a UI / UX deve ser implementada levando em considera√ß√£o o uso dos bot√µes de navega√ß√£o: cima, baixo, direita, esquerda, OK e vice-versa, √© importante n√£o perder o foco e indicar claramente onde est√° agora . </li></ul><br><h2>  A documenta√ß√£o </h2><br>  Al√©m da variedade de plataformas e documenta√ß√£o para essas plataformas, o problema √© que alguns fabricantes lan√ßam novas vers√µes que, √†s vezes, perdem compatibilidade em alguns lugares, ou at√© mudam para novas plataformas, que s√£o basicamente incompat√≠veis com as anteriores (como a transi√ß√£o LG com NetCast no WebOS).  Ao mesmo tempo, novas plataformas est√£o sendo intensamente promovidas, o que dificulta a localiza√ß√£o de informa√ß√µes em plataformas antigas, pois algumas se√ß√µes da documenta√ß√£o s√£o exclu√≠das ou transferidas, o que √†s vezes pode levar a links mortos em dicas de formul√°rios. <br><br><h2>  Instala√ß√£o </h2><br>  Novamente, devido √† variedade de plataformas, o processo de instala√ß√£o de aplicativos nos pr√≥prios dispositivos de depura√ß√£o tamb√©m √© diferente.  Por exemplo, para AndroidTV, voc√™ pode usar adb, tizen tem seu pr√≥prio anal√≥gico - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sdb</a> , para scripts CLI especiais do WebOS, etc.  Cada uma dessas ferramentas precisa ser instalada e configurada.  Aqui voc√™ pode adicionar o problema de atualiza√ß√µes intensivas da plataforma, com a atualiza√ß√£o que acompanha o SDK e o IDE.  Um exemplo desse problema √© o caso do Tizen Studio.  Ap√≥s o download da vers√£o mais recente, voc√™ pode instalar aplicativos apenas em TVs samsung tv4, enquanto n√£o h√° uma maneira f√°cil de instalar o aplicativo em vers√µes anteriores de TVs, que s√£o muito maiores por natureza (se voc√™ encontrar esse problema de repente, consulte o <a href="">link</a> ) e mesmo depois dan√ßa de sucesso com um pandeiro, o IDE perde a capacidade de instalar aplicativos em TVs TV-samsung tv4 ¬Ø \ _ („ÉÑ) _ / ¬Ø <br><br><h2>  Modera√ß√£o </h2><br>  Para publicar o aplicativo, √© necess√°rio passar a modera√ß√£o do respectivo fabricante, e cada um deles tem suas pr√≥prias regras e recursos.  Nesse caso, voc√™ precisa ser paciente, porque  as solicita√ß√µes podem ser verificadas por mais de uma semana e isso deve ser levado em considera√ß√£o ao planejar prazos, ou seja,  o aplicativo precisa ser publicado bem antes do lan√ßamento (se voc√™ estiver subitamente preocupado que os aplicativos apare√ßam antes de qualquer evento de marketing - n√£o tenha medo, ao enviar para modera√ß√£o, h√° um ponto em que voc√™ pode especificar uma data antes da qual o aplicativo n√£o ser√° publicado). <br><br>  Voc√™ tamb√©m precisa estar preparado para o fato de que a causa da rejei√ß√£o pode ser um pouco insignificante, por exemplo, uma resposta incorreta na lista de verifica√ß√£o autom√°tica (uma lista de perguntas que o desenvolvedor deve responder antes de enviar o aplicativo, por exemplo: ‚ÄúSeu aplicativo cont√©m v√≠rus‚Äù etc.) ou devido a um mal-entendido na descri√ß√£o do aplicativo UX.  Pode ser que isso aconte√ßa em situa√ß√µes engra√ßadas, por exemplo, houve um caso em que eles encerraram um aplicativo com canais de televis√£o de streaming, porque pegaram uma linha rastejante no ar de um dos canais como um artefato de gr√°ficos, fazendo parte do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OSD</a> . <br><br><h2>  AndroidTV e tvOS </h2><br>  Tamb√©m devemos mencionar AndroidTV e tvOS, como  essas plataformas n√£o suportam o lan√ßamento expl√≠cito de aplicativos da web.  Para o tvOS, √© usada sua pr√≥pria linguagem semelhante a xml: TVML, e o que √© especialmente interessante, voc√™ pode digitar essa linguagem, mas apenas dentro de um certo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conjunto de modelos</a> , √© bastante dif√≠cil fazer algo completamente arbitr√°rio.  Com a ajuda de tais restri√ß√µes, todos os aplicativos do tvOS s√£o for√ßados a aderir a um √∫nico guia de estilo e, se voc√™ n√£o for muito longe, o processo de cria√ß√£o do aplicativo ser√° simples. <br><br>  No android, a situa√ß√£o √© melhor, porque  Existem maneiras de executar aplicativos da Web, falaremos sobre um deles mais tarde. <br><br><h2>  Como fazemos isso </h2><br>  Diante da realidade, primeiro estudamos as solu√ß√µes existentes, mas infelizmente n√£o gostei de nada universal e conveniente: a caixa inteligente √© inconveniente, a rea√ß√£o n√£o resolve problemas espec√≠ficos de TV, como, de fato, outras estruturas mais orientadas para a Web. <br><br>  Agora vamos ver como o PureQML lida com isso (sobre o qual j√° escrevemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ).  Em resumo, esta √© uma estrutura js que permite descrever declarativamente as UIs em uma linguagem semelhante a qml, o que ajuda a criar rapidamente aplicativos abstraindo de html, css e outras coisas.  Para resolver problemas especificamente de SmartTV, um m√≥dulo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">qmlcore-tv</a> separado foi gravado sob a licen√ßa CC-BY-4.0, que suporta as seguintes plataformas: <br><br><ul><li>  LG webOS </li><li>  LG NetCast </li><li>  Samsung Tizen </li><li>  Samsung Orsay </li><li>  Opera TV </li><li>  Hisense </li><li>  AndroidTV </li></ul><br>  E aqui est√° como ele resolve os problemas acima: <br><br><ul><li>  <i>Processando bot√µes do controle remoto</i> .  Para plataformas suportadas, o mapeamento de c√≥digos de chave √© implementado e no c√≥digo do cliente basta escrever o manipulador desejado, por exemplo, para o bot√£o de fun√ß√£o vermelho do controle remoto, voc√™ pode escrever um manipulador: <br><pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">onRedPressed</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }</code> </pre> </li><li>  <i>Video player</i>  Para trabalhar com o player, existe um componente VideoPlayer especial que descreve a interface para trabalhar com v√≠deo, e a implementa√ß√£o da plataforma √© selecionada para a plataforma de destino no est√°gio de constru√ß√£o.  A seguir, √© apresentado um exemplo de uso: reprodu√ß√£o de um v√≠deo em loop usando um link de tela cheia: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">VideoPlayer</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">autoPlay</span></span>: true; <span class="hljs-attribute"><span class="hljs-attribute">source</span></span>: <span class="hljs-string"><span class="hljs-string">"http://media.w3.org/2010/05/bunny/movie.mp4"</span></span>; }</code> </pre></li><li>  <i>Informa√ß√µes sobre o dispositivo</i> .  Para obter informa√ß√µes sobre o dispositivo, basta usar o controle Device, por analogia com o player, descreve a interface e a implementa√ß√£o √© feita para a plataforma montada.  A seguir, √© apresentado um exemplo de c√≥digo para exibir texto com o ID do dispositivo na tela: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Device</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">id</span></span>: device; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">Text</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">text</span></span>: ‚ÄúDeviceID: ‚Äù + device.deviceId; }</code> </pre></li><li>  <i>Focus</i>  O recurso b√°sico da estrutura em si j√° ajuda aqui, que em um momento existe apenas um √∫nico foco, que existe e n√£o desaparece em lugar algum.  Para trabalhar com o foco, voc√™ pode usar propriedades declarativas: <br>  focus - um sinalizador booleano indicando que este elemento √© focaliz√°vel ou n√£o <br>  activeFocus - um sinalizador booleano que √© verdadeiro quando esse elemento cont√©m foco e falso caso contr√°rio </li><li>  <i>Instala√ß√£o</i>  Para uma instala√ß√£o conveniente de aplicativos PureQML na TV, voc√™ pode usar o script smart-tv-deployer, apenas dobr√°-lo na raiz do projeto PureQML.  Para criar um projeto, digamos, para uma TV webos com o nome "myTV" (pouco antes disso, voc√™ precisa configurar uma TV, para obter mais detalhes sobre como configurar uma TV WebOS, veja <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ), voc√™ precisa chamar o comando: <br><br><pre> <code class="bash hljs">./smart-tv-deployer/build -p webos -t myTV</code> </pre> </li><li>  <i>AndroidTV</i> .  Aqui, como para o Android, o idioma nativo √© o java e, para portar o aplicativo da Web, usamos o projeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cordova</a> .  Essa estrutura permite gerar um aplicativo Android com um WebView, no qual o pr√≥prio aplicativo Web √© iniciado.  Al√©m disso, est√° em andamento um trabalho ativo para converter o c√≥digo PureQML no nativo. </li></ul><br><h2>  Exemplo </h2><br>  Como exemplo, mostramos como portar o aplicativo de um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo anterior</a> para o SmartTV. <br><br>  Como mencionamos acima, o UX na TV √© diferente de um navegador de desktop e voc√™ precisar√° adicionar algumas altera√ß√µes ao c√≥digo para oferecer suporte ao trabalho com os bot√µes remotos: <br><br><pre> <code class="hljs objectivec">onSelectPressed: { osd.toggleActive() } onBackPressed: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (osd.active) osd.toggleActive() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> _globals.closeApp() }</code> </pre><br>  Neste c√≥digo, adicionamos processamento para pressionar os bot√µes "Selecionar" e "Voltar", quando voc√™ pressiona o primeiro liga / desliga o OSD (aquele com o mapa e o ponto de localiza√ß√£o da esta√ß√£o) quando voc√™ pressiona "Voltar", se o OSD estiver aberto, feche-o, se estiver fechado e, em seguida, feche o pr√≥prio aplicativo. <br>  O resultado final pode ser visto no v√≠deo: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/5-ejwuFz84I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Conclus√£o </h2><br>  Como resultado, o PureQML teve um bom desempenho como uma ferramenta para o desenvolvimento de aplicativos SmartTV, e n√≥s mesmos o usamos intensamente para esses fins. <br>  Se voc√™ tiver d√∫vidas ou quiser mais artigos sobre o desenvolvimento de SmartTV ou PureQML - escreva nos coment√°rios ou no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">canal de telegrama</a> , tentaremos responder a tudo. <br><br>  Obrigado pela aten√ß√£o!  =) <br><br><h2>  Refer√™ncias </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Site do projeto</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">P√°gina do Github</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fontes on-line</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Canal de suporte de telegrama</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt421119/">https://habr.com/ru/post/pt421119/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt421107/index.html">Desmontamos e visualizamos certificados qualificados usando Python / Tkinter</a></li>
<li><a href="../pt421109/index.html">(Atualizado) Intel pro√≠be a publica√ß√£o de benchmarks para atualiza√ß√µes de microc√≥digo</a></li>
<li><a href="../pt421111/index.html">Sistema de projeto na Figma. Uma olhada na interface atrav√©s de componentes</a></li>
<li><a href="../pt421113/index.html">Apresentando o DJI Mavic 2 Pro / Zoom</a></li>
<li><a href="../pt421115/index.html">Contexto em um aplicativo Android</a></li>
<li><a href="../pt421121/index.html">Transmiss√£o de v√≠deo atrav√©s de um navegador com lat√™ncia ultra baixa (e WebRTC!)</a></li>
<li><a href="../pt421123/index.html">Resumo dos eventos de TI de setembro</a></li>
<li><a href="../pt421125/index.html">Segmentamos 600 milh√µes de usu√°rios em tempo real todos os dias</a></li>
<li><a href="../pt421127/index.html">Semin√°rios on-line na Skillbox Friday: Design e Desenvolvedores</a></li>
<li><a href="../pt421129/index.html">Como reduzir a revis√£o de c√≥digo de duas semanas para v√°rias horas. A experi√™ncia da equipe Yandex.Market</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>