<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëäüèΩ üôãüèΩ üïØÔ∏è Autoriza√ß√£o local sem uma senha no Ubuntu üöµüèø üé¶ ‚úñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje falaremos sobre como encontramos autoriza√ß√£o local sem uma senha no Ubuntu, que, ao que parece, nunca ser√° fechada. Como tudo aconteceu, leia aba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Autoriza√ß√£o local sem uma senha no Ubuntu</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/acribia/blog/416425/"><img src="https://habrastorage.org/webt/ww/p0/1q/wwp01qrnhwpnkdwjvsmaexhp934.jpeg" alt="imagem"><br><br>  Hoje falaremos sobre como encontramos autoriza√ß√£o local sem uma senha no Ubuntu, que, ao que parece, nunca ser√° fechada.  Como tudo aconteceu, leia abaixo do corte. <br><a name="habracut"></a><br>  Em uma linda noite de ver√£o, o autor do artigo fechou a capa de um laptop em funcionamento do Ubuntu 16.04 Desktop to Unity e voltou para casa.  A noite estava t√£o linda que decidi tirar alguns dias de folga, joguei SMS para meu chefe e ele me soltou. <br><br>  Como se viu, nem todos os meus colegas tiveram a mesma noite maravilhosa.  O laptop de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">C4n</a> quebrou, ent√£o ele me pediu para emprestar o meu, mas com o disco r√≠gido.  Claro, eu permiti. <br><br>  Com isso, nossa fascinante investiga√ß√£o come√ßou. <br><br><h3>  O que aconteceu </h3><br>  Na manh√£ seguinte, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">c4n</a> desmontou meu laptop e inseriu meu disco r√≠gido l√°.  Ele abriu a tampa e viu, em vez de come√ßar a carregar o sistema operacional, a janela de login no meu sistema.  Era clic√°vel e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">c4n</a> come√ßou a digitar senhas aleat√≥rias, no entanto, tudo sem sucesso.  Frustrado, ele apertou o bot√£o liga / desliga e, em seguida, um <b>milagre</b> aconteceu. <br><br>  Em vez de reiniciar o computador, entrei com √™xito no <b>meu</b> sistema e os √∫ltimos programas e documentos que abri tamb√©m foram mostrados.  Vale ressaltar que os documentos n√£o foram apenas mostrados, eles trabalharam por si mesmos!  Voc√™ pode rolar pelos documentos e acessar as guias do navegador.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">O c4n</a> imediatamente fez uma captura de tela para mim. <br><br><img src="https://habrastorage.org/webt/3b/_l/yn/3b_lynsdq6qitwise7xmcufn3lq.png" alt="imagem"><br>  <i>De fato, a captura de tela era diferente.</i>  <i>Ao sair do trabalho, n√£o deixo o KeePass aberto e o site da empresa.</i> <br><br>  Em face da autoriza√ß√£o local sem uma senha! <br><br>  Quando sa√≠ de f√©rias, fiquei imaginando qual √© a culpa desse fen√¥meno, se ele sempre se reproduz e sempre se reproduz da mesma forma, se se reproduz em todos os sistemas. <br><br><h3>  Raz√µes </h3><br>  Como se viu, a falha desse fen√¥meno foi que, quando a tampa foi fechada, meu laptop n√£o entrou em hiberna√ß√£o, mas dormiu (ou seja, deixou energia na RAM) e, ap√≥s abrir a tampa, o SO carregado e os arquivos mais recentes permaneceram na RAM, com com quem trabalhei.  O sistema operacional n√£o sabe que o disco r√≠gido foi removido do computador e continua a funcionar at√© que voc√™ precise acessar o disco r√≠gido. <br><br>  Por que √© poss√≠vel passar a autoriza√ß√£o permanece um mist√©rio para n√≥s.  Pecamos no trabalho dos m√≥dulos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PAM</a> (Pluggable Authentication Modules), <s>que provavelmente n√£o est√£o na RAM, e o Ubuntu 16.04 processa incorretamente sua aus√™ncia, mas depois percebemos que o problema √© outra coisa.</s> <br><br><h3>  √â sempre reproduzido e sempre o mesmo? </h3><br>  Nossos experimentos come√ßaram com o Ubuntu 16.04.  As a√ß√µes foram as seguintes: <br><br><ol><li>  Enviamos o computador para o modo de suspens√£o. </li><li>  Retiramos o disco r√≠gido. </li><li>  Acordamos o computador no modo de suspens√£o. </li></ol><br>  Al√©m disso, como se viu, pode haver v√°rias op√ß√µes para o comportamento do sistema: <br><br><ol><li>  O computador mostra a janela de login, digite uma senha aleat√≥ria =&gt; vemos as janelas do usu√°rio na frente do deslizamento (todas as janelas est√£o funcionando). </li><li>  O computador mostra a janela de login, digite uma senha aleat√≥ria =&gt; o sistema diz que a senha est√° incorreta =&gt; pressione o bot√£o liga / desliga uma vez =&gt; vemos as janelas do usu√°rio antes do deslizamento (todas as janelas est√£o funcionando). </li><li>  O computador mostra uma tela preta (o cursor passa por cima), pressione as teclas aleat√≥rias e Enter =&gt; vemos as janelas do usu√°rio na frente do deslizamento (todas as janelas est√£o funcionando). </li><li>  O computador mostra uma tela preta (o cursor passa sobre ela), pressione as teclas aleat√≥rias e Enter =&gt; nada acontece =&gt; pressione o bot√£o liga / desliga uma vez =&gt; vemos as janelas do usu√°rio antes do deslizamento (todas as janelas est√£o funcionando). </li></ol><br>  Provavelmente, os itens 3-4 s√£o semelhantes aos itens 1-2, apenas por algum motivo, o gr√°fico n√£o desenha uma janela de login. <br><br>  O experimento foi realizado v√°rias vezes e em todos os momentos era poss√≠vel acessar as janelas do usu√°rio, ou seja,  a reprodutibilidade √© 100%.  Isso √© muito legal para um bug t√£o estranho.  √â verdade que vale a pena notar que apenas janelas ativas est√£o dispon√≠veis, n√£o foi poss√≠vel mudar para janelas minimizadas.  Al√©m disso, algumas janelas desapareceram depois de um tempo e, √†s vezes, o efeito de registro foi observado, mas um dos quatro m√©todos de entrada permitiu retornar. <br><br><h3>  PoC </h3><br>  Filmamos um pequeno v√≠deo que demonstra todo o processo de ataque. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/cGu5AFCQ1Uw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Ele funciona em todos os sistemas? </h3><br>  A condi√ß√£o para o teste foi a presen√ßa de todas as atualiza√ß√µes mais recentes no sistema.  Por que precisamos de um bug que est√° fechado h√° muito tempo? <br><br>  Para come√ßar, decidiu-se verificar se o bug √© reproduzido em PCs comuns (n√£o laptops) com o Ubuntu 16.04 com Unity.  Havia uma teoria de que a exibi√ß√£o da janela poderia ser conectada de alguma forma a uma placa de v√≠deo.  Portanto, a verifica√ß√£o foi realizada em um PC com placas gr√°ficas integradas e discretas; em todos os casos, o resultado foi o mesmo - ele atende perfeitamente ao erro. <br><br>  O pr√≥ximo foi o Ubuntu 16.04 com o GNOME.  E aqui ficamos desapontados: n√£o resolvi o problema.  √Äs vezes, ao sair de uma falha, o sistema mostra as √∫ltimas janelas por meio segundo (√© poss√≠vel gravar um v√≠deo), os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pesquisadores relataram isso em 2011</a> , e ainda n√£o foi fechado. <br><br>  Al√©m disso, levamos Arch com Wayland e Xorg - decep√ß√£o, n√£o funciona.  Debian 9 com GNOME e novamente decep√ß√£o.  Tamb√©m n√£o funcionou no novo Ubuntu 18.04 - n√£o surpreendentemente, porque a essa altura j√° come√ßamos a suspeitar que o problema estava no Unity.  Portanto, decidimos fazer o Ubuntu 14.04 para os testes mais recentes e tamb√©m ver o que acontece com o Ubuntu 18.04 se voc√™ alterar o gerenciador de janelas do GNOME para Unity.  No Ubuntu 14.04, tudo funcionou bem (embora as janelas tenham uma vida √∫til muito menor do que em 16/04).  No Ubuntu 18.04 com Unity, depois de sair da falha, o sistema falha imediatamente e n√£o √© poss√≠vel fazer mais experimentos. <br><br>  Conclus√£o: decidimos que as vers√µes do Ubuntu com o Unity instalado nativamente s√£o vulner√°veis, ou seja,  vers√£o <br><br><ul><li>  10,10 </li><li>  11.04 </li><li>  11,10 </li><li>  12.04 </li><li>  12,10 </li><li>  13/04 </li><li>  13.10 </li><li>  14.04 (testado por n√≥s) </li><li>  14.10 </li><li>  15/04 </li><li>  15.10 </li><li>  04.16 (testado por n√≥s) </li><li>  16.10 (testado por n√≥s) </li><li>  04.17 (testado por n√≥s) </li></ul><br>  Lista bastante impressionante, n√£o √©?  Testamos longe de tudo.  Se algu√©m tiver a oportunidade de verificar outras vers√µes que n√£o testamos, teremos o prazer de adicion√°-lo √† postagem. <br><br><h3>  Por que pensamos que isso √© ruim </h3><br>  A vulnerabilidade permite apenas o acesso local aos dados, e n√£o a todos, mas apenas √†queles que s√£o abertos nos aplicativos e implantados.  No entanto, isso ainda √© bastante cr√≠tico, porque: <br><br><ol><li>  Os dados usados ‚Äã‚Äãpodem n√£o ser salvos no disco (por exemplo, um documento edit√°vel). </li><li>  Os dados podem estar em um diret√≥rio inicial criptografado (por exemplo, um arquivo com senhas). </li><li>  Os dados podem estar em uma unidade flash criptografada. </li><li>  Os dados podem exigir autoriza√ß√£o adicional (como em nosso PoC com KeePass). </li></ol><br>  Al√©m disso, no Unity, qualquer pessoa pode enviar um computador para um boleto, simplesmente na tela de login (sem autoriza√ß√£o).  I.e.  √© uma situa√ß√£o bastante real que uma pessoa bloqueie a tela e saia para almo√ßar; nesse momento, o atacante envia o computador para um deslize, retira o disco r√≠gido e examina o que a pessoa fez antes de almo√ßar.  Depois, resta reiniciar o computador j√° com o disco e a pessoa n√£o imaginar√° que seus dados possam estar comprometidos. <br><br>  Os c√©ticos dir√£o que um resultado semelhante pode ser facilmente alcan√ßado com um ataque de bota fria, e os resultados ser√£o ainda melhores, mas com que frequ√™ncia algum de voc√™s carrega uma garrafa t√©rmica com alguns litros de nitrog√™nio l√≠quido? <br><br>  Decidimos que o problema √© cr√≠tico e deve ser escrito no Ubuntu. <br><br><h3>  Como escrevemos no Ubuntu </h3><br>  Para obter um bug, tivemos que se registrar no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">launchpad.net</a> , criar uma descri√ß√£o do bug e adicionar um v√≠deo do PoC.  Temos 406 pontos de classifica√ß√£o e um distintivo de fogueira (o que isso significa).  Eles come√ßaram a esperar.  Iniciamos o bug em 18/06/2018. <br><br>  Ap√≥s uma longa correspond√™ncia, o camarada Marc Deslauriers encerrou nosso debate com uma mensagem que se resumia a: "N√£o vamos consertar nada.  √â o mesmo que ter acesso f√≠sico. " <br><br><img src="https://habrastorage.org/webt/4l/g5/as/4lg5asjshcflbqdjdp0cdz0-5hs.png" alt="imagem"><br><br>  Tentativas de convencer n√£o tiveram √™xito.  Fomos enviados para ignorar por uma semana.  Ap√≥s o qual nos foi dada permiss√£o para publicar este estudo: <br><br><img src="https://habrastorage.org/webt/8p/we/v8/8pwev8g0jgoohsxm_xptktmqv_g.png" alt="imagem"><br><br>  UPD: 9 de julho de 2018, √†s 16 horas, decidimos tornar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bug</a> p√∫blico (obrigado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">amarao</a> ).  Na discuss√£o na barra de lan√ßamento, o bug foi confirmado para o Mate 18.04, e n√£o apenas para o Unity.  A comunidade tamb√©m insiste que o bug existe e n√£o deve ser ignorado. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt416425/">https://habr.com/ru/post/pt416425/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt416415/index.html">N√≥s movemos tudo na montagem de teste Vivaldi 1.16.1230.3</a></li>
<li><a href="../pt416417/index.html">"Rio Celestial" - China criar√° uma chuva artificial de energia sem precedentes</a></li>
<li><a href="../pt416419/index.html">Gerador de caverna bidimensional aleat√≥rio</a></li>
<li><a href="../pt416421/index.html">Uma caminhada no pit lane, ou como as tecnologias IaaS ajudam as equipes de corrida</a></li>
<li><a href="../pt416423/index.html">Como os russos lembraram o processador americano ou uma revis√£o do DVR AdvoCam-FD8 Gold-II (GPS + GLONASS)</a></li>
<li><a href="../pt416427/index.html">O que lemos em junho: not√≠cias sobre o Angular, JWT, esc√¢ndalo de blockchain e um pouco de zen</a></li>
<li><a href="../pt416429/index.html">Princ√≠pios de design pretendidos para Jakarta EE</a></li>
<li><a href="../pt416431/index.html">Os melhores projetos de blockchain. OIC julho 2018 (vota√ß√£o)</a></li>
<li><a href="../pt416433/index.html">Pergunte a Ethan: As perdas de radia√ß√£o estelar podem explicar a energia escura?</a></li>
<li><a href="../pt416435/index.html">Por que o c√©rebro humano √© t√£o eficaz?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>