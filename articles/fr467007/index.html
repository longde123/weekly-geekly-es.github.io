<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîõ üëµüèª üíê FLProg - Int√©gration ind√©pendante dans le programme des contr√¥leurs personnalis√©s ‚öæÔ∏è üì° üò§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pendant longtemps, le projet FLProg n'a pas √©t√© couvert √† Habr√©. Cela est d√ª au manque de temps pour √©crire des articles et m√™me √† mes propres probl√®m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>FLProg - Int√©gration ind√©pendante dans le programme des contr√¥leurs personnalis√©s</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467007/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/m4/sc/xc/m4scxccdteuasxjzm_whvn1bs9q.png"></div><br>  Pendant longtemps, le projet FLProg n'a pas √©t√© couvert √† Habr√©.  Cela est d√ª au manque de temps pour √©crire des articles et m√™me √† mes propres probl√®mes personnels.  Mais le projet n'est pas mort, il vit et se d√©veloppe.  En moyenne une fois par mois, la prochaine version du programme est lanc√©e.  Depuis la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">derni√®re publication</a> , le rendu du sch√©ma a √©t√© enti√®rement refait (gr√¢ce √† cela, les frises ont √©t√© √©limin√©es lors du rendu), le syst√®me de r√©f√©rence crois√©e pour le projet, et un syst√®me d'analyse du projet pour les erreurs ont √©t√© introduits.  Le code du programme lui-m√™me a √©t√© port√© vers une version plus r√©cente du langage de programmation.  Pour cette raison, d'un point de vue positif (de mon point de vue, bien s√ªr, les utilisateurs me soutiennent), l'interface du programme a chang√©.  De nombreux blocs int√©ressants ont √©t√© ajout√©s.  Mise √† l'√©chelle du sch√©ma et recherche de blocs impl√©ment√©es. <br><a name="habracut"></a><br>  Mais encore, le principal probl√®me du projet reste que le d√©veloppeur du programme est une personne (c'est moi), et le nombre de diff√©rentes cartes contr√¥leur, capteurs, capteurs, cartes d'extension fabriqu√©s √† la fois par des chinois et r√©cemment par nos fabricants est en constante augmentation.  Et les utilisateurs veulent les essayer ou les utiliser dans leurs projets.  Pour les p√©riph√©riques, √† un moment donn√©, ce probl√®me a √©t√© plus ou moins r√©solu par moi √† l'aide de la cr√©ation d'un √©diteur de blocs personnalis√©.  Cette √©tape, comme on dit, "shot", et maintenant, presque sur la plupart des cartes p√©riph√©riques existantes, sur Internet ou sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">forum du programme</a> , vous pouvez trouver le bloc utilisateur correspondant.  Eh bien, ou sur le m√™me forum (ou dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">groupe √† Vkontakte</a> ), demandez aux gourous locaux d'en √©crire un.  Habituellement, vous pouvez d'une mani√®re ou d'une autre convenir. <br><br>  Il est maintenant temps de r√©soudre le deuxi√®me probl√®me - ce sont les cartes contr√¥leur. <br><br>  R√©cemment, une version b√™ta du programme avec le num√©ro 6.0 a √©t√© publi√©e.  Dans cette version, l'√©diteur de descriptions utilisateur des contr√¥leurs est impl√©ment√©.  Comme pour les blocs personnalis√©s, les descriptions peuvent √™tre regroup√©es dans des biblioth√®ques, enregistr√©es en tant que descriptions distinctes ainsi que des biblioth√®ques enti√®res sous forme de fichier et partag√©es. <br><br>  Avec cet article, je commence une s√©rie d'au moins deux articles dans lesquels nous verrons comment utiliser cet √©diteur.  Dans le premier article, avec la permission de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">shiotiny,</a> je vais essayer de d√©crire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sa carte ShIoTiny.</a>  Dans le deuxi√®me article, nous allons essayer de trouver virtuellement un analogue d'un v√©ritable contr√¥leur industriel et le d√©crire. <br><br>  Commen√ßons donc. <br><br>  Ouvrez le programme FLProg.  Dans le menu "Tools", s√©lectionnez "Controller Custom Descriptions Editor". <br><br><img src="https://habrastorage.org/webt/x-/ut/xg/x-utxgu-j-yc6o4bxbij3ortuye.png"><br><br>  La fen√™tre de l'√©diteur de description s'ouvre. <br><br>  Les descriptions personnalis√©es peuvent √™tre combin√©es dans la biblioth√®que avec n'importe quelle profondeur d'imbrication.  Par cons√©quent, nous cr√©ons d'abord une biblioth√®que de description. <br><br><img src="https://habrastorage.org/webt/io/kh/cs/iokhcsgn0qt_kgc6zvf4nhmi8a4.png"><br><br>  D√©finissez le nom de la biblioth√®que. <br><br><img src="https://habrastorage.org/webt/ir/l1/bd/irl1bdlbht21as-bsinayisfuzi.png"><br><br>  Apr√®s cela, nous allons cr√©er une description du contr√¥leur dans la biblioth√®que. <br><br><img src="https://habrastorage.org/webt/er/fr/60/erfr60lyicwjbbppzgshkypj6ha.png"><br><br>  Et donnez-lui un nom: <br><br><img src="https://habrastorage.org/webt/zr/vw/of/zrvwofrlxkqwswrwq149hkmxlti.png"><br><br>  Lors de la cr√©ation d'une description de contr√¥leur, nous arrivons imm√©diatement √† la branche des param√®tres g√©n√©raux. <br><br><img src="https://habrastorage.org/webt/t7/u1/ct/t7u1ct8h0myo9vxvfjtapl58vpe.png"><br><br>  Ici, nous pouvons changer le nom, d√©finir le type de CPU, d√©finir la taille de l'EEPROM, changer le num√©ro de version de la description. <br><br>  √âtant donn√© que la carte ShloTiny est bas√©e sur le contr√¥leur ESP8266, nous la s√©lectionnons.  Lors du choix d'un contr√¥leur, le volume EEPROM correspondant est automatiquement appos√©.  Si n√©cessaire, cette valeur peut √™tre modifi√©e.  Le num√©ro de version par d√©faut de la nouvelle description est d√©fini sur 1. <br><br>  √Ä l'avenir, lors de la modification des descriptions existantes, il est recommand√© de la modifier dans le sens de l'augmentation.  Lorsque vous utilisez cette description dans un projet, le programme compare la version de la description dans le projet et dans la biblioth√®que.  Si le num√©ro de version de la description dans la biblioth√®que est sup√©rieur √† celui du projet, l'√©l√©ment de mise √† jour de la description dans le programme appara√Æt dans le menu "Projet" du programme.  Si vice versa, un √©l√©ment appara√Ætra pour mettre √† jour la description dans la biblioth√®que.  Eh bien, si la description du contr√¥leur utilis√© dans le projet ne se trouve pas du tout dans la biblioth√®que, l'√©l√©ment pour entrer la description du projet dans la biblioth√®que appara√Ætra dans le m√™me menu. <br><br>  √âgalement dans ce fil, vous pouvez √©crire une description textuelle du contr√¥leur qui aide √† sa s√©lection. <br><br>  Pour appliquer les modifications apport√©es avant de passer √† une autre branche des param√®tres du contr√¥leur, cliquez sur le bouton "Appliquer".  Si cela n'est pas fait, les modifications ne seront pas enregistr√©es. <br><br>  Consid√©rez maintenant le sch√©ma de circuit de la carte ShloTiny. <br><br><img src="https://habrastorage.org/webt/lq/wt/de/lqwtdebl8ssogd2rvcvvxbz9rd0.png"><br><br>  La carte a trois entr√©es num√©riques, trois sorties num√©riques, une entr√©e analogique et une entr√©e pour le capteur.  Un total de huit conclusions du conseil d'administration. <br><br>  Dans l'√©diteur, allez dans la branche ¬´Conclusions du contr√¥leur¬ª et d√©finissez le nombre de conclusions, n'oubliez pas de cliquer sur le bouton ¬´Appliquer¬ª apr√®s cela. <br><br><img src="https://habrastorage.org/webt/ls/wl/lb/lswllbh_hqil-hof8ydl6z7vn9y.png"><br><br>  Le programme g√©n√©rera le nombre requis de conclusions.  Nous passons au premier d'entre eux. <br><br><img src="https://habrastorage.org/webt/4u/d9/ha/4ud9habaghl5ioujfwby0a-08tc.png"><br><br>  Sur cette branche, vous pouvez sp√©cifier un autre nom de sortie, qui sera affich√© dans le programme.  S'il est absent, le programme affichera PinN o√π N est le num√©ro de broche dans la liste des broches.  Je vous recommande de lui √©crire une inscription au tableau dans le champ du nom alternatif.  Cela facilitera la compr√©hension de la conclusion √† tirer.  Pour la carte d√©crite, nous y mettrons la valeur de Input1 conform√©ment au sch√©ma √©lectrique.  Ainsi, dans ce fil, vous pouvez √©crire une description individuelle de la sortie, par exemple, pour indiquer les fonctionnalit√©s de son application.  Si n√©cessaire, vous pouvez √©galement sp√©cifier un alias pour la sortie, qui sera affich√© dans le programme entre parenth√®ses apr√®s le nom de la sortie. <br><br>  Apr√®s avoir effectu√© les modifications, n'oubliez pas de cliquer sur le bouton "Appliquer".  Par le m√™me principe, appelons les conclusions restantes. <br><br><img src="https://habrastorage.org/webt/bp/y6/1u/bpy61u53hnwuttwg6s4ttl7kq2y.png"><br><br>  Dans la m√™me branche des principaux param√®tres de sortie, les fonctions qu'il ex√©cute lui sont ajout√©es. <br><br><img src="https://habrastorage.org/webt/ks/ol/vt/ksolvtqefuyugg0s1aven_efhps.png"><br><br>  Les fonctions suivantes peuvent √™tre attribu√©es √† chaque broche. <br><br><img src="https://habrastorage.org/webt/y8/04/cd/y804cdepj9pr9qgnji3h9ffan38.png"><br><br><ul><li>  I2C est une fonction de l'une des broches du bus I2C (SDA ou SCL). </li><li>  SPI est une fonction de l'une des broches du bus SPI (MISO, MOSI, SCK, SS). </li><li>  UART est une fonction de l'une des broches de l'interface UART (RX ou TX). </li><li>  Fonction d'entr√©e analogique </li><li>  Fonction de sortie analogique (pas encore utilis√©e dans FLProg, backlog pour le futur). </li><li>  Fonction d'entr√©e / sortie num√©rique. </li></ul><br>  Attribuez la fonction d'entr√©e / sortie num√©rique de la broche 1.  Lors de l'attribution d'une nouvelle fonction (pas encore configur√©e) √† la sortie, la branche ¬´Erreurs¬ª appara√Ætra dans l'arborescence du contr√¥leur et le chemin complet vers la branche de la fonction incorrecte deviendra rouge.  Sur la branche "Erreurs", vous pouvez voir une liste des erreurs trouv√©es dans la description du contr√¥leur. <br><br><img src="https://habrastorage.org/webt/fu/c5/l6/fuc5l68t2uqnnb018st1us7kp84.png"><br><br>  Dans ce cas, l'entr√©e 1 de la fonction ¬´Entr√©e / sortie num√©rique¬ª ne sp√©cifie pas le num√©ro de cette entr√©e comme num√©rique.  Nous passons √† la branche de cette fonction (√† l'avenir, je pr√©vois de faire une transition directe vers la branche souhait√©e lorsque je clique sur une erreur). <br><br><img src="https://habrastorage.org/webt/m5/86/hp/m586hpytkvzarwhavx6lf1a2lcm.png"><br><br>  Selon le sch√©ma √©lectrique de la carte, la sortie ¬´Input1¬ª est connect√©e √† la broche GPIO2 du contr√¥leur.  Nous entrons cette valeur dans le champ ¬´Num√©ro d'entr√©e num√©rique¬ª.  Lors de la compilation d'un projet, cette valeur sera ins√©r√©e dans le code.  √âtant donn√© que l'utilisation de cette entr√©e en tant que sortie n'est pas fournie, nous supprimons la case √† cocher ¬´Peut √™tre utilis√© en tant que sortie¬ª.  Comme toujours, cliquez sur le bouton "Appliquer".  De la m√™me mani√®re, configurez les deux autres entr√©es num√©riques.  Acc√©dez ensuite √† la sortie de l'entr√©e analogique "ADC1" et ajoutez-y la fonction "Entr√©e analogique". <br><br><img src="https://habrastorage.org/webt/i5/vb/6j/i5vb6johktcuk0mym00jifsptqm.png"><br><br>  Dans les param√®tres de cette fonction, vous devez sp√©cifier le num√©ro de cette sortie comme entr√©e analogique.  Selon le sch√©ma, c'est 0 (dans ESP8266, c'est un). <br><br><img src="https://habrastorage.org/webt/jh/yl/vs/jhylvsjhmvsl6dbki2nsnmu-aoe.png"><br><br>  Passez ensuite au param√®tre de sortie "1WIRE".  Ici, nous y ajoutons la fonction d'entr√©e / sortie num√©rique, mais nous interdisons son utilisation √† la fois d'entr√©e et de sortie.  Par cons√©quent, il sera disponible pour la s√©lection uniquement dans les blocs de capteurs et n'est pas disponible lors de la cr√©ation d'entr√©es et de sorties. <br><br><img src="https://habrastorage.org/webt/5o/s-/3i/5os-3i6f-756ojmbhfn0jrblftm.png"><br><br>  Les r√©glages des sorties ¬´K1¬ª - ¬´K3¬ª sont similaires aux r√©glages des entr√©es ¬´Input1¬ª - ¬´Input3¬ª uniquement en cas de sorties, nous interdisons leur utilisation comme entr√©e. <br><br><img src="https://habrastorage.org/webt/wc/vh/nl/wcvhnl5d42ola1rk3cmcgqltpjy.png"><br><br><img src="https://habrastorage.org/webt/e3/qj/1y/e3qj1yyzrzn36t-plzwu_nl7-sq.png"><br><br>  Acc√©dez √† la branche "Images".  Dans celui-ci, nous pouvons ajouter des images charg√©es dans la description du contr√¥leur, par exemple, avec l'apparence du contr√¥leur, le brochage, etc. <br><br>  Veuillez noter que les images sont charg√©es directement dans la description du contr√¥leur et qu'elles sont stock√©es dans un projet cr√©√© √† l'aide de celle-ci.  Par cons√©quent, ne t√©l√©chargez pas de grandes images.  Cela entra√Ænera une augmentation de la taille du projet et affectera la vitesse de son ouverture. <br><br>  L'image est ajout√©e √† l'aide du bouton "Ajouter une image". <br><br><img src="https://habrastorage.org/webt/f_/ar/so/f_arso1h9wd207bcwxg0yx8rbjm.png"><br><br>  Apr√®s avoir s√©lectionn√© et charg√© une image (seul le format PNG est pris en charge), une branche distincte est cr√©√©e pour chaque image de l'arborescence.  Dans cette branche, vous pouvez sp√©cifier un nom pour l'image t√©l√©charg√©e, qui sera affich√© dans les informations du contr√¥leur. <br><br><img src="https://habrastorage.org/webt/9f/th/jb/9fthjbpdldgi5zzbmye2ior6kyw.png"><br><br>  Si n√©cessaire, vous pouvez t√©l√©charger plusieurs images et les d√©finir dans l'ordre souhait√©. <br><br><img src="https://habrastorage.org/webt/b_/cv/lx/b_cvlxb8-0zaxazygmrj300mkhy.png"><br><br><img src="https://habrastorage.org/webt/ru/wh/nu/ruwhnuvfvcuhntsygr0hpapxed0.png"><br><br>  Nous passons √† la branche "Blocs standard". <br><br><img src="https://habrastorage.org/webt/5e/nr/gg/5enrggudk1-qgs36xmh1ryem1f8.png"><br><br>  Cette branche affiche les blocs qui peuvent √™tre repr√©sent√©s dans la biblioth√®que de blocs standard du programme en fonction des param√®tres actuels du programme.  Qu'est-ce que √ßa veut dire.  Certains √©l√©ments constitutifs du programme sont destin√©s uniquement √† certains types de CPU.  Et leur disponibilit√© d√©pend du processeur s√©lectionn√©.  De plus, les blocs con√ßus pour fonctionner avec SPI, I2C, UART n'appara√Ætront dans cette liste que si les fonctions correspondantes sont ajout√©es aux broches du contr√¥leur.  Les blocs con√ßus pour fonctionner avec l'EEPROM n'apparaissent que si la taille de l'EEPROM sp√©cifi√©e sur la branche des param√®tres g√©n√©raux du contr√¥leur est sup√©rieure √† z√©ro, ou si la fonction I2C est ajout√©e aux broches du contr√¥leur.  Par d√©faut, tous les blocs de la biblioth√®que sont interdits d'utilisation (marqu√©s en orange).  Vous pouvez autoriser l'utilisation d'un bloc distinct ou de l'ensemble du dossier de blocs en mettant en surbrillance la branche n√©cessaire et en cliquant sur le bouton "Autoriser" ou dans le menu contextuel. <br><br><img src="https://habrastorage.org/webt/_g/-f/cc/_g-fccqwf5_0twhukgxs6wfxhwo.png"><br><br>  Lorsque vous autorisez l'affichage d'un bloc ou d'un dossier de blocs dans le programme, ils sont peints en noir. <br><br>  Le blocage d'un bloc ou d'un dossier s√©par√© est interdit de la m√™me mani√®re. <br><br><img src="https://habrastorage.org/webt/dc/yo/4p/dcyo4p2p6mj8c1zqtj_p_mymupw.png"><br><br>  Dans un dossier dans lequel tous les blocs ne peuvent pas √™tre affich√©s, ils sont marqu√©s de trois ast√©risques avant et apr√®s le nom. <br><br>  Nous interdisons l'utilisation de moteurs, d'horloges en temps r√©el, d'√©crans, d'unit√©s de commande infrarouge, de capteurs (√† l'exception des capteurs DS18B20 et DHT22 - comme le d√©veloppeur de la carte n'a jusqu'√† pr√©sent annonc√© leur prise en charge), des puces d'extension et d'un haut-parleur pi√©zo. <br><br><img src="https://habrastorage.org/webt/co/ip/ji/coipji0n9m9oho6ed6jjpuatuu8.png"><br><br>  Nous ferons de m√™me pour le langage LAD <br><br><img src="https://habrastorage.org/webt/h9/-u/xe/h9-uxez75k-8pyzyi08vk7z-p4m.png"><br><br>  N'oubliez pas de les appliquer apr√®s avoir apport√© des modifications. <br><br>  Les branches restantes de la description du contr√¥leur seront discut√©es dans le prochain article, tandis que les param√®tres actuels sont suffisants pour utiliser cette carte particuli√®re dans le programme FLProg. <br><br>  Pour l'instant, je dirai bri√®vement que la branche "Blocs sp√©ciaux" est utilis√©e pour charger des blocs personnalis√©s dans la description, qui sera affich√©e dans la biblioth√®que de blocs standard du programme utilisant ce contr√¥leur.  La branche ¬´Code sp√©cial¬ª est utilis√©e pour enregistrer le code qui sera toujours ins√©r√© dans le code compil√©, et la branche ¬´Biblioth√®ques sp√©ciales¬ª est utilis√©e pour charger les biblioth√®ques dans la description du contr√¥leur, qui sera t√©l√©charg√©e dans le dossier \ biblioth√®ques ArduinoIDE avec lequel le programme fonctionne. <br><br>  Apr√®s toutes les modifications, enregistrez la biblioth√®que de description du contr√¥leur. <br><br><img src="https://habrastorage.org/webt/x0/oe/d7/x0oed7fkffsba-owxcfxvgchyjm.png"><br><br>  Essayons maintenant d'utiliser la description du contr√¥leur que nous avons cr√©√©e. <br>  Dans le programme FLProg, nous cr√©ons un nouveau projet pour le contr√¥leur. <br><br><img src="https://habrastorage.org/webt/dx/7w/ya/dx7wyao116azs1a2lwrpoa1tt4i.png"><br><br>  Ouvrez la fen√™tre de s√©lection du contr√¥leur. <br><br><img src="https://habrastorage.org/webt/l4/5f/wt/l45fwtcbztx_s8w9p71skiimmyo.png"><br><br>  Et s√©lectionnez la description que nous avons cr√©√©e. <br><br><img src="https://habrastorage.org/webt/dq/ly/jp/dqlyjprofstw-fkadjd1jiguzl4.png"><br><br>  Lors du choix d'un contr√¥leur, vous pouvez voir ses images et, si n√©cessaire, enregistrer le n√©cessaire dans un fichier. <br><br><img src="https://habrastorage.org/webt/ba/ni/gw/banigw8zc9shyyogovawmcvlyxy.png"><br><br><img src="https://habrastorage.org/webt/rh/ra/ss/rhrasshfamvayeljiqnmceepo3g.png"><br><br>  Vous pouvez √©galement voir d'autres param√®tres <br><br><img src="https://habrastorage.org/webt/gf/6p/wd/gf6pwdh-67cn9e8cbm0k4utlbw0.png"><br><br>  Apr√®s avoir s√©lectionn√© le contr√¥leur, confirmez sa s√©lection: <br><br><img src="https://habrastorage.org/webt/d0/7x/fy/d07xfyaacufag5wf1zqmcokjjd8.png"><br><br>  En cons√©quence, la fen√™tre principale de travail du projet s'ouvre, configur√©e en fonction du contr√¥leur s√©lectionn√©. <br><br><img src="https://habrastorage.org/webt/dz/my/qj/dzmyqjeks591vtjfqnqhqnhvty4.png"><br><br>  Le but de ce poste ne comprend pas la t√¢che de formation pour travailler avec le programme FLProg.  Ceci est assez bien d√©crit dans mes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">articles pr√©c√©dents</a> , sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le site Web du projet</a> et sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">forum</a> du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet</a> .  De plus, il existe d√©j√† beaucoup de cha√Ænes sur YouTube o√π des didacticiels vid√©o sur l'utilisation du programme sont publi√©s.  Par exemple, une tr√®s bonne cha√Æne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´Key to Arduino¬ª</a> , vient de mener une s√©rie de le√ßons, avec une tr√®s bonne pr√©sentation du mat√©riel. <br><br>  Par cons√©quent, par exemple, nous cr√©ons simplement un projet simple et essayons de le compiler. <br>  Tout d'abord, ajoutez l'entr√©e du contr√¥leur. <br><br><img src="https://habrastorage.org/webt/4c/94/wf/4c94wfvporudssfe-mdvmg6fenm.png"><br><br>  Seules les conclusions que nous avons √©t√© autoris√©s √† travailler √† ce titre sont disponibles pour s√©lection en tant qu'intrants. <br><br><img src="https://habrastorage.org/webt/yy/dk/fi/yydkfixeg0aemh73lrqunx1qq_a.png"><br><br>  Cr√©ez ensuite une sortie num√©rique.  Seules les conclusions autoris√©es sont √©galement disponibles ici. <br><br><img src="https://habrastorage.org/webt/mk/cq/qm/mkcqqm7djcs0klswidh2qkm2bt8.png"><br><br>  Nous assemblons le circuit de sorte que lorsque le bouton de l'entr√©e 1 (entr√©e 1) est enfonc√©, le relais K1 (relais 1) s'allume. <br>  Nous retirons √©galement l'unit√© pour lire les informations du capteur DS18B20 sur une carte de circuit imprim√© dans une carte s√©par√©e. <br><br><img src="https://habrastorage.org/webt/xn/wa/2p/xnwa2pfpn7em5w2irs5meayndbc.png"><br><br>  Acc√©dez aux param√®tres de blocage.  Lors de la cr√©ation du nouveau bus OneWire, nous constatons que toutes les entr√©es / sorties num√©riques sont disponibles pour la s√©lection.  Il s'agit d'une faille dans la version 6.0.  Mais comme cette version a toujours le statut b√™ta, elle est excusable.  Dans la version 6.1, il sera possible d'interdire l'utilisation d'une broche comme capteur, capteur ou pour les puces d'extension.  De plus, dans le prochain billet, je vous dirai une autre fa√ßon de r√©soudre ce probl√®me.  Pour l'instant, s√©lectionnez 1 broche FIL. <br><br><img src="https://habrastorage.org/webt/yi/0n/i0/yi0ni02zslfqijbthixnw4yeq_m.png"><br><br>  Nous configurons le capteur pour d√©finir l'adresse via le tableau. <br><br><img src="https://habrastorage.org/webt/nu/ft/9h/nuft9hg43uwk_toqi1yanem1miq.png"><br><br>  Nous ins√©rons une nouvelle carte devant la premi√®re et y retirons le bloc ¬´OneWire Bus Scan¬ª. <br><br><img src="https://habrastorage.org/webt/qv/21/r5/qv21r5i9ggwzcovlis6k9kg3f9u.png"><br><br>  Nous le configurons sur le m√™me bus OneWire et sur la m√™me baie sur laquelle est configur√©e l'unit√© de lecture du capteur DS18B20. <br><br><img src="https://habrastorage.org/webt/vm/cm/ri/vmcmrigupgqdmnxfbb8fcwfuluc.png"><br><br>  Nous assemblons un sch√©ma pour un seul d√©marrage d'un balayage de bus lorsque le contr√¥leur d√©marre, en utilisant le bloc R du d√©clencheur (s√©lection du bord d'attaque). <br><br><img src="https://habrastorage.org/webt/vh/xd/2l/vhxd2l7bxk3afyi7obm1kaix9l0.png"><br><br>  Sur une carte avec une unit√© de lecture de donn√©es du capteur DS18B20, nous assemblons un circuit marche / arr√™t relais avec hyst√©r√©sis.  Pour cela, nous utilisons deux comparateurs et un d√©clencheur SR.  Gr√¢ce √† ce sch√©ma, le relais 2 s'active lorsque la temp√©rature descend en dessous de 10 degr√©s et s'√©teint lorsque la temp√©rature d√©passe 20 degr√©s. <br><br><img src="https://habrastorage.org/webt/55/nw/3y/55nw3y062rknemyx2c7ouyavwgm.png"><br><br>  Nous commen√ßons le sch√©ma de compilation. <br><br><img src="https://habrastorage.org/webt/oh/tr/so/ohtrso3_hk9k13yizhsgy8stp0o.png"><br><br>  En cons√©quence, le code r√©sultant s'ouvrira dans l'IDE Arduino.  En tant que carte, nous s√©lectionnons NodeMCU, sur lequel la m√™me puce est install√©e que sur ShloTiny.  La v√©rification du code montre qu'il est correct et peut √™tre t√©l√©charg√©. <br><br><img src="https://habrastorage.org/webt/lv/jy/dc/lvjydc9b531j1inhq5vuumgn0n0.png"><br><br><div class="spoiler">  <b class="spoiler_title">Code compil√©</b> <div class="spoiler_text"><pre><code class="plaintext hljs">#include &lt;OneWire.h&gt; extern "C" { #include "user_interface.h"; } OneWire _ow13(13); byte _FLPArray133289689[9]; unsigned long _d18x2x1Tti = 0UL; float _d18x2x1O = 0.00; bool _trgr1 = 0; bool _bounseInputD2S = 0; bool _bounseInputD2O = 0; unsigned long _bounseInputD2P = 0UL; bool _trgrt1 = 0; bool _trgrt1I = 0; bool _sowb1_needScan = 0; bool _sowb1_ost = 0; bool _sowb1_Out_1 = 0; void setup() { pinMode(2, INPUT); pinMode(12, OUTPUT); pinMode(14, OUTPUT); _bounseInputD2O = digitalRead(2); } void loop() { bool _bounceInputTmpD2 = (digitalRead (2)); if (_bounseInputD2S) { if (millis() &gt;= (_bounseInputD2P + 40)) { _bounseInputD2O = _bounceInputTmpD2; _bounseInputD2S = 0; } } else { if (_bounceInputTmpD2 != _bounseInputD2O ) { _bounseInputD2S = 1; _bounseInputD2P = millis(); } } //:1 if (1) { if (_trgrt1I) { _trgrt1 = 0; } else { _trgrt1 = 1; _trgrt1I = 1; } } else { _trgrt1 = 0; _trgrt1I = 0; }; if (_sowb1_needScan) { if ( _oneWireSeach (_FLPArray133289689, _ow13)) { _sowb1_Out_1 = 1; } _ow13.reset_search(); _sowb1_needScan = 0; } if (_trgrt1) { if (! _sowb1_ost) { _sowb1_ost = 1; _sowb1_needScan = 1; _sowb1_Out_1 = 0; } } else { _sowb1_ost = 0; } //:2 digitalWrite(12, !(_bounseInputD2O)); //:3 if (_isTimer(_d18x2x1Tti, 1000)) { _d18x2x1Tti = millis(); _d18x2x1O = _readDS18_ow13(_FLPArray133289689, _FLPArray133289689[8]); } if (((_d18x2x1O)) &gt; (20)) _trgr1 = 0; if (((_d18x2x1O)) &lt; (10)) _trgr1 = 1; digitalWrite(14, _trgr1); } bool _isTimer(unsigned long startTime, unsigned long period ) { unsigned long currentTime; currentTime = millis(); if (currentTime &gt;= startTime) { return (currentTime &gt;= (startTime + period)); } else { return (currentTime &gt;= (4294967295 - startTime + period)); } } float _convertDS18x2xData(byte type_s, byte data[12]) { int16_t raw = (data[1] &lt;&lt; 8) | data[0]; if (type_s) { raw = raw &lt;&lt; 3; if (data[7] == 0x10) { raw = (raw &amp; 0xFFF0) + 12 - data[6]; } } else { byte cfg = (data[4] &amp; 0x60); if (cfg == 0x00) raw = raw &amp; ~7; else if (cfg == 0x20) raw = raw &amp; ~3; else if (cfg == 0x40) raw = raw &amp; ~1; } return (float)raw / 16.0; } float _readDS18_ow13(byte addr[8], byte type_s) { byte data[12]; byte i; _ow13.reset(); _ow13.select(addr); _ow13.write(0xBE); for ( i = 0; i &lt; 9; i++) { data[i] = _ow13.read(); } _ow13.reset(); _ow13.select(addr); _ow13.write(0x44, 1); return _convertDS18x2xData(type_s, data); } bool _oneWireSeach (byte array[], OneWire ow ) { byte temp[8]; byte i; if ( !ow.search(temp)) { return false; } if (OneWire::crc8(temp, 7) != temp[7]) { return false; } switch (temp[0]) { case 0x10: array[8] = 1; break; case 0x28: array[8] = 0; break; case 0x22: array[8] = 0; break; default: return false; } for ( i = 0; i &lt; 8; i++) { array[i] = temp[i]; } return true; }</code> </pre> <br></div></div><br>  ‚Üí <a href="">Description du contr√¥leur ShloTiny pour le programme FLProg</a> <br><br>  Nous terminerons cette le√ßon, dans le prochain article, nous essaierons de d√©crire quelque chose de plus s√©rieux et plus proche des ¬´vrais¬ª contr√¥leurs industriels. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr467007/">https://habr.com/ru/post/fr467007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466993/index.html">Configuration du plugin Warnings Next Generation pour l'int√©gration avec PVS-Studio</a></li>
<li><a href="../fr466995/index.html">Configuration du plug-in Warnings Next Generation pour l'int√©gration PVS-Studio</a></li>
<li><a href="../fr466999/index.html">Comparaison des biblioth√®ques CLI populaires pour Python: clic, ciment, feu et autres</a></li>
<li><a href="../fr467003/index.html">Menu rapide, pratique et adaptatif pour 1075 cat√©gories (36000 produits)</a></li>
<li><a href="../fr467005/index.html">Comment colorer correctement les polyn√¥mes</a></li>
<li><a href="../fr467009/index.html">Cr√©er une biblioth√®que personnelle avec Notion et Python</a></li>
<li><a href="../fr467011/index.html">Ce qu'il faut lire et voir pour commencer en science des donn√©es: livres, dictionnaires et cours</a></li>
<li><a href="../fr467015/index.html">JWT: attaque de signature num√©rique contre attaque MAC</a></li>
<li><a href="../fr467017/index.html">Qu'est-ce que HED / MRSD et √† quoi sert-il?</a></li>
<li><a href="../fr467019/index.html">Conception de tableaux de bord pour un site de commerce √©lectronique d'analyse Web. Partie 3: Cha√Æne SEO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>