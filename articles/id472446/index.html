<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👏🏻 🏄 🕝 Cara membuat pewarnaan kode yang benar pada "Habré" dan mengapa itu sangat sulit 🤙🏽 👌🏾 😲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beberapa bulan yang lalu saya menerbitkan posting pertama saya di Habré. Mungkin beberapa dari Anda akan melihat bahwa kode dalam artikel tersebut dil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara membuat pewarnaan kode yang benar pada "Habré" dan mengapa itu sangat sulit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/custis/blog/472446/"><img src="https://habrastorage.org/webt/xg/ma/eu/xgmaeu4rba2fisi1m-lv2k5ggeo.jpeg"><br><br>  Beberapa bulan yang lalu saya menerbitkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">posting pertama saya</a> di Habré.  Mungkin beberapa dari Anda akan melihat bahwa kode dalam artikel tersebut dilukis dengan cara yang tidak biasa, dan yang paling penting - diwarnai dengan benar, terlepas dari kenyataan bahwa editor teks bawaan di situs tidak mendukung markup asli kode dan sering menyoroti elemen-elemennya secara tidak benar.  Pada saat yang sama, kode tersebut tidak dimasukkan oleh gambar, seperti yang dilakukan oleh beberapa penulis yang benar-benar putus asa. <br><br>  Dalam kasus saya, melestarikan markup sangat penting, karena artikel tersebut adalah deskripsi cara bekerja pada kode.  Untuk mengatasi masalah tersebut, saya membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">alat</a> yang memungkinkan Anda untuk mentransfer sorotan kode dalam skema yang dipilih dari IDEA ke sebuah artikel tentang Habr.  Saya akan berbicara tentang proses membuat alat dan fitur penggunaannya. <br><a name="habracut"></a><br><h2>  Kenapa semua ini </h2><br>  Pada pandangan pertama, sepertinya ini dilakukan karena kerusakan, hanya karena penerangan standar yang diterapkan melalui tag <code>&lt;source&gt;</code> tidak sesuai. <br><br>  Di satu sisi, ini, tentu saja, benar, tetapi tidak cukup. <br><br>  Pertama, penyorotan di dalam <code>&lt;source&gt;</code> tidak dapat berfungsi dengan potongan kode, karena tidak akan ada informasi yang cukup untuk pewarnaan.  Semua elemen yang dinyatakan di luar lingkup karya akan dicat secara acak.  Masalah ini tidak memiliki solusi, karena, sejauh yang saya tahu, tidak ada layanan untuk pewarnaan online yang memungkinkan Anda melakukan salah satu dari yang berikut: <br><br><ol><li>  Rekatkan kode proyek lengkap ke dalam artikel tanpa menampilkannya secara keseluruhan, atau tempel tautan ke komit di GitHub.  Di tempat-tempat tertentu dalam artikel, gunakan kliping baris dari kode lengkap (dengan indikasi rentang).  Dalam hal ini, lampu latar harus ditentukan berdasarkan kode lengkap, tentu saja. </li><li>  Tunjukkan informasi meta eksplisit untuk elemen yang tidak ditentukan.  Cara yang cukup sulit bagi pengguna, tetapi saya akan setuju untuk hal seperti itu. </li></ol><br>  Kedua, penyorotan di dalam <code>&lt;source&gt;</code> tidak pernah sama dengan jumlah berbagai jenis elemen dengan IDE biasa.  Dan karena masalah yang dijelaskan di atas, membuat pewarnaan tingkat lanjut tidak masuk akal: tidak ada yang memasukkan kode proyek penuh ke dalam artikel, jadi fungsi ini tidak akan berfungsi. <br><br>  Pada saat yang sama, kenyataannya adalah potongan-potongan kode perlu dimasukkan ke dalam artikel, dan semakin kecil, semakin baik. <br><br>  Anda dapat membaca kode tanpa menyoroti, tetapi mengapa. <br><br><h2>  Fitur Habr </h2><br>  IntelliJ IDEA memiliki dukungan bawaan untuk mengekspor kode ke HTML.  Menyalin kode secara teratur akan ditempatkan di clipboard, termasuk kode berwarna, yang dapat dibaca sebagai HTML. <br><br>  Sayangnya, Habr tidak mengizinkan penggunaan markup HTML dalam artikel secara langsung.  Alasan untuk ini adalah misteri yang tercakup dalam kegelapan, tetapi mungkin ini adalah karena penyatuan penampilan artikel.  Jika Anda mengizinkan penggunaan HTML dalam artikel, akan mungkin untuk mengejar ketinggalan sehingga akan ada masalah dengan tampilan. <br><br>  Saya umumnya mendukung gagasan pelarangan HTML dalam artikel, tetapi ada peringatan.  Sebuah sumber daya untuk para profesional TI, di mana kode sering dibahas dan tidak ada cara untuk memasukkannya dengan benar ke dalam sebuah artikel, entah bagaimana aneh. <br><br>  Jadi, kami memiliki tag pembuangan kami <code>&lt;b&gt;</code> , <code>&lt;i&gt;</code> , <code>&lt;font&gt;</code> <code>&lt;i&gt;</code> <code>&lt;font&gt;</code> .  Selain itu, semua ini berfungsi di dalam <code>&lt;code&gt;</code> , yang diperlukan untuk memformat.  Baiklah, <code>&amp;nbsp</code> <code>;</code>  Mereka juga menyelamatkan kami, yang berguna untuk baris panjang kode dan lekukan. <br><br>  Tidak perlu dikatakan, semua cara standar untuk mendapatkan kode HTML dari IDEA tidak memberikan HTML sama sekali, sehingga pekerjaan konversi akan menjadi agak besar. <br><br><h2>  Pendekatannya </h2><br>  Untuk mulai dengan, ada baiknya mengucapkan terima kasih kepada penulis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">capslocky</a> untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">materi</a> tentang topik ini.  Saya tidak menggunakan alat yang diusulkan dalam artikel secara langsung, dan itu hampir tidak akan terjadi, tetapi berkat materi ini saya memahami seluruh kedalaman masalah dan pada saat yang sama merasakan angin harapan. <br><br>  Satu-satunya minus dari publikasi ini adalah sejumlah besar kode dikombinasikan dengan penjelasan yang sangat sedikit tentang apa yang dilakukannya dan mengapa. <br><br>  Saya akan mencoba untuk memperbaiki situasi dan menjelaskan apa yang harus Anda lakukan dengan markup HTML Anda jika Anda ingin membawanya ke formulir yang siap untuk dimasukkan ke Habr. <br><br><ol><li>  Sebelum mengekspor, Anda perlu mengatur skema warna yang diinginkan di IDEA, misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dari situs web Tema Warna</a> .  Kode akan diekspor dengan skema yang dipilih.  Lebih baik memilih skema dengan latar belakang putih (karena latar belakang tidak dapat ditetapkan pada Habré) dan tanpa menggarisbawahi.  Saya tidak memikirkan betapa mudahnya menyeret mereka, karena saya tidak benar-benar menginginkannya. </li><li>  Kami hanya bekerja dengan internal <code>&lt;pre&gt;</code> .  Bahkan jika Anda menggunakan ekspor bukan dari IDEA, tetapi beberapa yang lain, mungkin akan ada tag ini di markup HTML, karena tanpa itu sulit untuk memformat kode dengan benar.  Tag itu sendiri dihapus, menggantikannya dengan <code>&lt;code&gt;</code> . </li><li>  Teks kemungkinan besar akan disajikan sebagai <code>&lt;span&gt;</code> dengan gaya yang berbeda.  Mereka semua harus singkirkan.  Banyak layanan pewarnaan membawa gaya ke lembar gaya, yang logis, dan menggunakan tautan ke nama gaya.  Secara khusus, IDEA belum melakukan ini, yang membuat tugas sedikit lebih mudah (pengaturan style terletak langsung di <code>&lt;span&gt;</code> ). </li><li>  Atur warna font melalui <code>&lt;font&gt;</code> .  Sayangnya, warna latar belakang tidak dapat diatur. </li><li>  Kami mengubah <code>font-style:italic</code> properti <code>font-style:italic</code> menjadi sepasang <code>&lt;i&gt;</code> <code>&lt;/i&gt;</code> , dan <code>font-weight:bold</code> menjadi <code>&lt;b&gt;</code> <code>&lt;/b&gt;</code> . </li><li>  Ganti semua ruang dengan <code>&amp;nbsp</code> <code>;</code>  . </li><li>  Jeda baris dalam bentuk <code>&lt;br&gt;</code> diganti dengan <code>\n</code> . </li><li>  Markup HTML di IDEA menghasilkan garis-garis kosong dengan gaya dan spasi dari spasi dengan gaya.  Lebih baik membuang gaya seperti itu: ini akan sangat mengurangi panjang dan meningkatkan kelengkapan kode. </li><li>  Pastikan bahwa umpan baris tidak memiliki gaya apa pun.  Jika tidak, akan ada masalah dengan garis kosong. </li></ol><br>  Paragraf terakhir diilustrasikan oleh sebuah contoh: <br><br> <code>&lt;code&gt;</code> <br>  <code>1</code> <code>&lt;font color="000000"&gt;</code> <br>  <code>2</code> <br> <code>&lt;/code&gt;</code> <br> <br>  Kode yang diberikan akan diubah oleh "Habr" dalam <code>12</code> .  Hal yang sama berlaku untuk tag <code>&lt;b&gt;</code> dan <code>&lt;i&gt;</code> , serta kombinasi daripadanya.  Jeda baris seharusnya tidak memiliki gaya, dan kemudian semuanya akan baik-baik saja. <br><br><h2>  Implementasi </h2><br>  Pada awalnya, tugas menulis konverter untuk kode HTML sewenang-wenang tampaknya agak rumit bagi saya.  Namun, jika Anda membuat keputusan untuk versi HTML tertentu, maka semuanya tidak terlalu buruk.  Saya berhasil melakukan segalanya pada RegExp murni, yaitu, bahkan tanpa parsing HTML.  Masalah utama ternyata mengidentifikasi fitur markup "Habr". <br><br>  Agar umpan baris tidak memiliki gaya, saya harus membuat penggantian yang agak rumit, yang mungkin merupakan yang paling tidak dapat dipahami (lihat fungsi popupBr).  Idenya adalah bahwa tag <code>&lt;br&gt;</code> setelah setiap penggantian "pop up" dari kedalaman tag format ke luar.  Jadi, setelah semua penggantian, tag <code>&lt;br&gt;</code> tidak lagi diformat. <br><br>  Selain itu, ternyata IDEA tidak hanya menempatkan Rich Text di clipboard, tetapi juga objek yang agak rumit seperti <code>application/x-java-jvm-local-objectref</code> .  Masalahnya adalah bahwa keberadaan benda-benda seperti itu di clipboard menyebabkan kesalahan terus-menerus di konsol saya pada topik membangun DataFlavor.  Sayangnya, tidak ada yang dapat Anda lakukan: JDK hanya bekerja dengan clipboard.  Bagi saya, itu adalah penemuan untuk memiliki <a href="">kode seperti itu</a> .  Rupanya, paman pintar yang menulis ini percaya bahwa itu akan berhasil.  Secara umum, jangan takut kesalahan yang mungkin terjadi saat bekerja dengan alat ini. <br><br>  Proyek ini ditulis dalam Kotlin dan hidup di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> . <br><br><p>  Saran untuk perbaikan dipersilahkan!  Sebagai contoh, alangkah baiknya mendesain alat ini sebagai plugin untuk IDEA.  Saya belum menemukan cara sederhana untuk melakukan ini: sumber-sumber dari Salin sebagai plugin HTML, sayangnya, ditutup, dan terlalu lama untuk mengetahui bagaimana menulis plugin seperti itu dari awal. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id472446/">https://habr.com/ru/post/id472446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id472434/index.html">Tingkatkan rilis Anda</a></li>
<li><a href="../id472438/index.html">Bagaimana proxy digunakan dalam keamanan informasi: 6 kasus penggunaan praktis</a></li>
<li><a href="../id472440/index.html">Suatu hari di Joker 2019</a></li>
<li><a href="../id472442/index.html">Situasi: semua orang berbicara tentang kembalinya format audio yang terlupakan - mengapa mereka ditakdirkan untuk tetap niche</a></li>
<li><a href="../id472444/index.html">Produk terbaik mulai dari masalah nyata: Interkom tentang Pekerjaan yang akan Dilakukan. Bagian 3 final</a></li>
<li><a href="../id472448/index.html">Tema bagian Frontend di DUMP Kazan: ML untuk pengembang front-end, pixel magic, SvelteJS, tawa, keringat dan air mata</a></li>
<li><a href="../id472452/index.html">Bagaimana cara menambahkan dukungan untuk masa tenggang (Billing Grace Period) di aplikasi iOS?</a></li>
<li><a href="../id472454/index.html">Tinjauan server VPS murah</a></li>
<li><a href="../id472462/index.html">iFest di Nizhny Novgorod: ITU sangat mengesankan</a></li>
<li><a href="../id472464/index.html">5 Cara Membuat Server Python di Raspberry Pi Bagian 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>