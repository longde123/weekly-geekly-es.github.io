<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🤝‍👨🏼 👉🏾 🎾 TON: Empfehlungen und Best Practices ❄️ 👩‍💻 🍖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel ist eine Übersetzung eines Dokuments, das auf der TON-Blockchain-Seite veröffentlicht wurde: smc -richtlinien.txt . Vielleicht hilft di...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TON: Empfehlungen und Best Practices</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470772/"><p>  Dieser Artikel ist eine Übersetzung eines Dokuments, das auf der TON-Blockchain-Seite veröffentlicht wurde: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">smc -richtlinien.txt</a> .  Vielleicht hilft dies jemandem, einen Schritt in Richtung Entwicklung für diese Blockchain zu machen.  Außerdem habe ich am Ende eine kurze Zusammenfassung gemacht. </p><a name="habracut"></a><br><h2 id="vnutrennie-soobscheniya">  Interne Nachrichten </h2><br><p>  Intelligente Verträge interagieren miteinander, indem sie sogenannte interne Nachrichten senden.  Wenn die interne Nachricht ihr angegebenes Ziel erreicht, wird im Namen des Zielkontos eine reguläre Transaktion erstellt und die interne Nachricht gemäß dem angegebenen Code und den konstanten Daten dieses Kontos verarbeitet (Smart Contract).  Insbesondere kann eine Verarbeitungstransaktion eine oder mehrere interne Nachrichten erstellen, von denen einige an die Quelladresse der zu verarbeitenden internen Nachricht adressiert sein können.  Dies kann verwendet werden, um einfache „Client-Server-Anwendungen“ zu erstellen, wenn eine Anforderung in eine interne Nachricht eingebettet (gekapselt) und an einen anderen intelligenten Vertrag gesendet wird, der die Anforderung verarbeitet und die Antwort erneut als interne Nachricht zurücksendet. </p><br><p> Dieser Ansatz führt dazu, dass zwischen internen Nachrichten an "Anfrage" und "Antwort" (als "Abfrage" oder als "Antwort") unterschieden werden muss oder keine zusätzliche Verarbeitung erforderlich ist (z. B. eine einfache Geldüberweisung).  Wenn eine Antwort eintrifft, muss es außerdem eine Möglichkeit geben, zu verstehen, auf welche Anfrage sie sich bezieht. </p><br><p>  Um dieses Ziel zu erreichen, wird empfohlen, die folgende interne Nachrichtenvorlage zu verwenden (denken Sie daran, dass die TON-Blockchain dem Nachrichtentext keine Einschränkungen auferlegt, dh es handelt sich lediglich um eine Empfehlung): </p><br><p>  0) Der Nachrichtentext kann in die Nachricht selbst eingebettet sein oder in einer separaten Zelle (Zelle *) gespeichert werden, auf die in der Nachricht verwiesen wird, wie im TL-B-Fragment des Diagramms angegeben (auf Englisch ist es einfacher zu verstehen: oder in einer separaten Zelle gespeichert) Zelle, auf die in der Nachricht Bezug genommen wird, wie durch das TL-B-Schemafragment angegeben): </p><br><pre><code class="plaintext hljs">message$_ {X:Type} ... body:(Either X ^X) = Message X;</code> </pre> <br><p>  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://core.telegram.org/mtproto</a> - hier können Sie über TL-Schemata lesen) </p><br><p>  Der empfangende Smart-Vertrag muss mindestens interne Nachrichten mit eingebettetem Nachrichtentext akzeptieren (selbst wenn sie in der Zelle platziert sind, in der sich die Nachricht befindet - wann immer sie in die Zelle passen, in der sich die Nachricht befindet - ist nicht ganz klar, was dies bedeutet, daher der Originaltext angehängt).  Wenn der Vertrag Nachrichtentexte in separaten Zellen akzeptiert (unter Verwendung des "richtigen" Konstruktors <code>(Either X ^X)</code> ), sollte die Verarbeitung der eingehenden Nachricht nicht von der bestimmten Methode zum Einbetten des Nachrichtentexts abhängen.  Andererseits ist es absolut legal, den Nachrichtentext überhaupt nicht in einer separaten Zelle zu unterstützen, um Anfragen und Antworten zu vereinfachen. </p><br><p>  1) Der Nachrichtentext beginnt normalerweise mit den folgenden Feldern: </p><br><ul><li>  <em>op</em> - 32-Bit-Ganzzahl ohne Vorzeichen (Big-Endian), die die auszuführende Operation oder die aufzurufende Smart-Contract-Methode angibt. </li><li>  <em>query_id</em> ist eine vorzeichenlose 64-Bit-Ganzzahl (Big-Endian), die in allen internen Frage- und <em>Antwortnachrichten verwendet</em> wird, um die Beziehung der Antwort zur Anforderung zu identifizieren (die <em>Abfrage-ID der</em> Antwort muss der <em>Abfrage-ID der</em> entsprechenden Anforderung entsprechen).  Wenn <em>op</em> keine Anforderungs-Antwort-Methode ist (es ruft eine Methode auf, von der keine Antwort erwartet wird), kann <em>query_id</em> weggelassen werden. </li><li>  Der Rest des Nachrichtentexts ist spezifisch für jeden unterstützten Wert des <em>op-</em> Parameters </li></ul><br><p>  2) Wenn <em>op</em> Null ist, ist die Nachricht eine einfache Übertragungsnachricht mit einem Kommentar.  Der Kommentar ist im Rest der Nachricht enthalten (ohne <em>query_id</em> usw., <em>dh</em> ab dem 5. Byte (Erklärung: Wenn <em>query_id</em> nicht <em>vorhanden ist</em> , nimmt das <em>op-</em> Feld die ersten 4 Bytes ein)).  Wenn es nicht mit dem Byte 0xff beginnt, ist der Kommentar ein Text;);  Es kann dem Endbenutzer der Brieftasche "wie sie ist" angezeigt werden (nachdem ungültige Zeichen und Steuerzeichen gefiltert und überprüft wurden, ob es sich um eine gültige UTF-8-Zeichenfolge handelt).  In diesem Feld können Benutzer beispielsweise den Zweck einer einfachen Übertragung von ihrer Brieftasche auf die Brieftasche eines anderen Benutzers angeben.  Wenn ein Kommentar hingegen mit dem Byte 0xff beginnt, ist der Rest der Nachricht ein „binärer Kommentar“, der dem Endbenutzer nicht als Text angezeigt werden sollte (ggf. nur als Hex-Dump).  Die vorgeschlagene Verwendung von binären Kommentaren besteht beispielsweise darin, eine Zahlungskennung für die Zahlung im Geschäft zu enthalten und automatisch von der Geschäftssoftware generiert und verarbeitet zu werden. </p><br><p>  Die meisten intelligenten Verträge müssen keine nicht trivialen Aktionen ausführen oder eine eingehende Nachricht ablehnen, wenn sie eine „einfache Übertragungsnachricht“ erhalten.  Wenn sich herausstellt, dass <em>op</em> Null ist, sollte die Smart Contract-Funktion zum Verarbeiten eingehender interner Nachrichten (normalerweise als <code>recv_internal()</code> ) sofort mit dem Code 0 beendet werden, was auf Erfolg hinweist (z. B. <code>recv_internal()</code> Ausnahme 0, wenn kein benutzerdefinierter Handler im Smart Contract installiert ist Ausnahmen).  Dies führt dazu, dass der von der Nachricht überwiesene Betrag ohne weitere Auswirkungen dem Konto des Empfängers gutgeschrieben wird. </p><br><p>  3) "Eine einfache Nachrichtenübertragung ohne Kommentare" hat einen leeren Körper (auch ohne das <em>Operationsfeld</em> ).  Die obigen Überlegungen gelten für solche Nachrichten.  Bitte beachten Sie, dass für solche Nachrichten ein eigener Text in die Nachrichtenzelle eingebettet sein muss. </p><br><p>  4) Wir erwarten, dass das <em>Operationsfeld</em> der Anforderungsnachrichten das erste Bit ("höherwertiges Bit", übersetzt als das erste, dies kann falsch sein, aber wie später erläutert wird klar) leer ist, dh der Wert des Feldes sollte im Bereich <code>1 .. 2^31-1</code> , und für Antwortnachrichten sollte das erste (höherwertige) Bit gleich 1 sein, <code>2^31 .. 2^32-1</code> im Bereich <code>2^31 .. 2^32-1</code> .  Wenn die Nachricht weder eine Anforderung noch eine Antwort ist (der Body enthält nicht den Parameter <em>query_id</em> ), muss sie den Parameter <em>op</em> im Bereich wie in der Anforderungsnachricht enthalten: <code>1 .. 2^31 - 1</code> . </p><br><p>  5) Es gibt mehrere "Standard" -Antwortnachrichten, für die <em>op</em> 0xffffffff und 0xffffffffe ist.  Im Allgemeinen sind Operationswerte von 0xfffffff0 bis 0xffffffff für solche Standardantworten reserviert. </p><br><ul><li>  <em>op = 0xffffffff</em> bedeutet "Operation wird nicht unterstützt."  Es folgt eine 64-Bit- <em>Abfrage</em> - <em>ID,</em> die aus der ursprünglichen Abfrage extrahiert wurde, und eine 32-Bit- <em>Operation</em> <em>der</em> ursprünglichen Abfrage.  Alle außer den einfachsten Smart-Verträgen sollten diesen Fehler zurückgeben, wenn sie eine Anfrage mit einer unbekannten <em>Operation</em> im Bereich von 1 ... 2 ^ 31-1 erhalten. </li><li>  <em>op = 0xfffffffe</em> bedeutet "Operation nicht erlaubt".  Es folgt die 64-Bit-Abfrage- <em>ID der</em> ursprünglichen Abfrage und anschließend die 32-Bit- <em>Operation, die aus der</em> ursprünglichen Abfrage extrahiert wurde. </li></ul><br><p>  Beachten Sie, dass unbekannte "Antworten" (mit <em>op</em> im Bereich 2 ^ 31 ... 2 ^ 32-1) ignoriert werden sollten (insbesondere sollten Sie keine Antwort mit <em>op</em> gleich 0xffffffff generieren) sowie unerwartete Rückgabe ( bounce) -nachrichten (mit gesetztem "bounce" -Flag). </p><br><h2 id="oplata-za-obrabotku-zaprosov-i-otpravlenie-otvetov">  Zahlung für die Bearbeitung von Anfragen und das Senden von Antworten </h2><br><p>  Wenn ein Smart-Vertrag eine Anfrage an einen anderen Smart-Vertrag senden möchte, muss er im Allgemeinen für das Senden einer internen Nachricht an den Ziel-Smart-Vertrag (Nachrichtenweiterleitungsgebühren) bezahlen, um diese Nachricht am Zielort zu verarbeiten (Gasgebühr: Gasgebühren) und zum Senden einer Antwort, falls erforderlich (Gebühren für die Weiterleitung von Nachrichten). </p><br><p>  In den meisten Fällen fügt der Absender der internen Nachricht eine kleine Menge Gramm hinzu (z. B. 1 Gramm) (genug, um für die Verarbeitung dieser Nachricht zu bezahlen) und setzt das Flag "Bounce" darauf (dh es wird eine bounceable interne Nachricht gesendet).  Der Empfänger gibt den nicht verwendeten Teil des empfangenen Werts mit der Antwort zurück (abzüglich der Gebühr für das Senden der Nachricht).  Dies wird normalerweise durch Aufrufen von SENDRAWMSG mit mode = 64 erreicht (siehe Anhang A zur TON VM-Dokumentation). </p><br><p>  Wenn der Empfänger die empfangene Nachricht nicht verarbeiten kann und die Ausführung mit einem Exit-Code ungleich Null beendet wird (z. B. aufgrund einer Ausnahme bei der Deserialisierung nicht behandelter Zellen), wird die Nachricht automatisch an den Absender zurückgeschickt, und das Flag "Absprung" wird deaktiviert und gesetzt. Flagge "prallte ab".  Der Text der zurückgesendeten Nachricht entspricht dem der ursprünglichen Nachricht.  Daher ist es wichtig, das "Bounce" -Flag der eingehenden internen Nachricht zu überprüfen, bevor das Operationsfeld im Smart-Vertrag analysiert und die entsprechende Anforderung verarbeitet wird (andernfalls besteht das Risiko, dass die in der Bounce-Nachricht enthaltene Anforderung von ihrem ursprünglichen Absender als neue separate Anforderung verarbeitet wird).  Wenn das Flag "Bounce" gesetzt ist, kann der Spezialcode verstehen, welche Anforderung fehlgeschlagen ist (z. B. durch Deserialisieren von <em>op</em> und <em>query_id</em> aus einer <em>Bounce-</em> Nachricht) und entsprechende Maßnahmen ergreifen.  Ein einfacherer Smart-Vertrag kann einfach alle zurückgegebenen Nachrichten ignorieren (mit einem Exit-Code von Null beenden, wenn das Flag "Bounce" gesetzt ist). </p><br><p>  Andererseits kann der Empfänger die eingehende Anforderung erfolgreich analysieren und feststellen, dass die angeforderte <em>Operationsmethode</em> nicht unterstützt wird oder dass eine andere Fehlerbedingung erfüllt wurde.  Dann sollte eine Antwort mit <em>op</em> gleich 0xffffffff oder einem anderen geeigneten Wert unter Verwendung von SENDRAWMSG mit mode = 64 zurückgesendet werden, wie oben erwähnt. </p><br><p>  In einigen Situationen möchte der Absender gleichzeitig einen bestimmten Geldbetrag überweisen?  an den Absender?  (hier anscheinend ein Fehler und war für den "Empfänger" bestimmt) und erhalten entweder eine Bestätigung oder eine Fehlermeldung.  Beispielsweise erhält ein intelligenter Vertrag für Validatorwahlen eine Aufforderung zur Teilnahme an einer Wahl zusammen mit einem Angebot als Mehrwert.  In solchen Fällen ist es sinnvoll, beispielsweise ein zusätzliches Gramm an den geschätzten Wert [Kosten] anzuhängen (hier wird der Wortwert überall verwendet, im Sinne einer Zahlung für eine Aktion, daher habe ich das Wort "Kosten" verwendet).  Wenn ein Fehler auftritt (z. B. kann das Gebot aus irgendeinem Grund nicht angenommen werden), sollte der gesamte erhaltene Betrag (abzüglich der Bearbeitungsgebühr) zusammen mit der Fehlermeldung an den Absender zurückgesandt werden (z. B. unter Verwendung von SENDRAWMSG mit mode = 64, wie beschrieben) oben).  Bei Erfolg wird eine Bestätigungsnachricht erstellt und genau ein Gramm zurückgesendet (die Nachrichtenübertragungsgebühr wird von diesem Wert abgezogen; dies ist Modus = 1 von SENDRAWMSG). </p><br><h2 id="ispolzovanie-nevozvratnyh-non-bounceable-soobscheniy">  Verwenden von nicht bounceable Nachrichten </h2><br><p>  Fast alle internen Nachrichten, die zwischen intelligenten Verträgen gesendet werden, sollten zurückgegeben werden (Sie können sie als "Bouncing" übersetzen, aber um nicht verwirrt zu werden, ist es einfacher, diese Terminologie zu verwenden), dh das Bit "Bounce" muss nicht leer sein.  Wenn der Smart-Zielvertrag nicht vorhanden ist oder bei der Verarbeitung dieser Nachricht eine unbehandelte Ausnahme entsteht, wird die Nachricht mit dem Rest der anfänglichen Kosten (Wert) (abzüglich aller Gebühren für die Übertragung von Nachrichten und Gas) zurückgesendet.  Die zurückgegebene Nachricht hat denselben Text, jedoch mit deaktiviertem "Bounce" -Flag und gesetztem "Bounce" -Flag.  Daher sollten alle Smart-Verträge das "Bounce" -Flag aller eingehenden Nachrichten überprüfen und diese entweder stillschweigend empfangen (sofort mit einem Null-Exit-Code beenden) oder eine spezielle Verarbeitung durchführen, um festzustellen, welche ausgehende Anforderung fehlgeschlagen ist.  Die im Hauptteil der zurückgegebenen Nachricht enthaltene Anforderung sollte niemals ausgeführt werden. </p><br><p>  In einigen Fällen müssen nicht bounceable interne Nachrichten verwendet werden.  Beispielsweise kann ein neues Konto nicht erstellt werden, ohne dass mindestens eine unwiderrufliche interne Nachricht an das Konto gesendet wurde.  Wenn diese Nachricht kein StateInit mit dem Code und den Daten des neuen Smart-Vertrags enthält, ist es nicht sinnvoll, einen nicht leeren Text in einer nicht zurückkehrenden internen Nachricht zu haben. </p><br><p>  Es ist eine gute Idee, dem Endbenutzer (z. B. der Brieftasche) nicht zu erlauben, unwiderrufliche Nachrichten zu senden, die eine große Menge enthalten (z. B. mehr als fünf Gramm), oder sie zumindest zu warnen, wenn sie dies versuchen.  Es ist besser, zuerst einen kleinen Betrag zu senden, dann einen neuen Smart-Vertrag zu erstellen und dann einen größeren Betrag zu senden. </p><br><h2 id="vneshnie-soobscheniya">  Externe Nachrichten </h2><br><p>  Externe Nachrichten werden extern an intelligente Verträge in der TON-Blockchain gesendet, um sie zur Ausführung bestimmter Aktionen zu zwingen.  Beispielsweise erwartet der Smart-Vertrag der Brieftasche den Empfang externer Nachrichten mit Bestellungen (z. B. interne Nachrichten, die vom Smart-Vertrag der Brieftasche gesendet werden), die vom Brieftaschenbesitzer unterzeichnet wurden.  Wenn eine solche externe Nachricht vom Smart Contract der Brieftasche empfangen wird, überprüft sie zuerst die Signatur, empfängt dann die Nachricht (durch Starten des TVM ACCEPT-Grundelements) und führt dann alle erforderlichen Aktionen aus. </p><br><p>  Bitte beachten Sie, dass alle externen Nachrichten vor Wiederholungsangriffen geschützt werden müssen.  Validatoren entfernen normalerweise eine externe Nachricht aus dem Pool der vorgeschlagenen externen Nachrichten (vom Netzwerk empfangen).  In einigen Situationen kann ein anderer Prüfer dieselbe externe Nachricht jedoch zweimal verarbeiten (wodurch eine zweite Transaktion für dieselbe externe Nachricht erstellt wird, was zu einer Verdoppelung der ursprünglichen Aktion führt).  Schlimmer noch, ein Angreifer kann eine externe Nachricht aus einem Block mit einer Verarbeitungstransaktion extrahieren und später erneut senden.  Dies kann beispielsweise dazu führen, dass ein Smart-Wallet-Vertrag die Zahlung wiederholt. </p><br><p>  Der einfachste Weg, intelligente Verträge vor Sniffing-Angriffen zu schützen, die mit externen Nachrichten verbunden sind, besteht darin, den 32-Bit- <em>Cur-Seqno-Zähler</em> in den konstanten Daten des intelligenten Vertrags zu speichern und auf den <em>Wert</em> für die <em>Anforderung</em> im (signierten Teil) aller eingehenden externen Nachrichten zu warten.  Dann wird die externe Nachricht nur akzeptiert (AKZEPTIERT - ein Hinweis auf das primitive AKZEPTIEREN), wenn die Signatur gültig ist und <em>req-seqno</em> gleich <em>cur-seqno ist</em> .  Nach erfolgreicher Verarbeitung erhöht sich der Wert von <em>cur-seqno</em> in persistenten Daten um eins, sodass dieselbe externe Nachricht nie wieder empfangen wird. </p><br><p>  Sie können das <em>Ablaufdatum auch</em> in eine externe Nachricht aufnehmen und die Nachricht nur akzeptieren, wenn die aktuelle Unix-Zeit unter dem Wert dieses Felds liegt.  Dieser Ansatz kann in Kombination mit <em>seqno verwendet werden</em> ;  Alternativ kann der empfangende Smart-Vertrag einen Satz (Hashes) aller zuletzt (nicht abgelaufenen) empfangenen externen Nachrichten in seinen permanenten Daten speichern und eine neue externe Nachricht ablehnen, wenn es sich um ein Duplikat einer der gespeicherten Nachrichten handelt.  Sie sollten auch das Sammeln und Entfernen abgelaufener Nachrichten in diesem Satz implementieren, um ein unbegrenztes Wachstum persistenter Daten zu vermeiden. </p><br><p>  In der Regel beginnt eine externe Nachricht mit einer 256-Bit-Signatur (falls erforderlich), einer 32-Bit <em>-Anforderungsnummer</em> (falls erforderlich), einem 32-Bit <em>-Ablaufdatum</em> (falls erforderlich) und möglicherweise einer 32-Bit <em>-Operation</em> und anderen erforderlichen Parametern in je nach <em>op</em> .  Die externe Nachrichtenvorlage muss nicht so standardisiert sein wie die interne Nachrichtenvorlage, da externe Nachrichten nicht für die Interaktion zwischen verschiedenen intelligenten Verträgen verwendet werden (von verschiedenen Entwicklern geschrieben und von verschiedenen Eigentümern verwaltet). </p><br><h2 id="get-metody">  Methoden abrufen </h2><br><p>  Von einigen intelligenten Verträgen wird erwartet, dass sie bestimmte genau definierte Get-Methoden implementieren.  Beispielsweise wird erwartet, dass jeder DNS-Resolver-Smart-Vertrag für TON DNS die Methode dnsresolve get implementiert.  Benutzerdefinierte Smart-Verträge können ihre spezifischen Get-Methoden definieren.  Unsere einzige allgemeine Empfehlung im Moment ist die Implementierung der get-Methode "seqno" (ohne Parameter), die die aktuelle <em>seqno des</em> Smart-Vertrags <em>zurückgibt</em> , die Sequenznummern verwendet, um Wiedergabeangriffe zu verhindern, die mit eingehenden externen Methoden verbunden sind, wann immer eine solche Methode vorhanden ist Bedeutung. </p><br><p>  Wörterbuch: </p><br><ul><li>  Zelle - Eine TVM-Zelle besteht aus höchstens 1023 Datenbits und höchstens vier Verweisen auf andere Zellen.  Alle persistenten Daten (einschließlich TVM-Code) in der TON-Blockchain werden als Sammlung von TVM-Zellen dargestellt (vgl. [1, 2.5.14]).  - Eine TVM-Zelle besteht aus nicht mehr als 1023 Datenbits und nicht mehr als vier Verbindungen zu anderen Zellen.  Alle persistenten Daten (einschließlich des TVM-Codes) in der TON-Blockchain werden als Satz von TVM-Zellen dargestellt (vgl. [1, 2.5.14]).  - Auszug aus der Beschreibung der TON Virtual Machine ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://test.ton.org/tvm.pdf</a> ) </li></ul><br><h2 id="kakie-mozhno-sdelat-vyvody-na-osnove-prochitannogo">  Welche Schlussfolgerungen können aus dem, was ich lese, gezogen werden? </h2><br><ol><li>  Sie können externe Nachrichten an Verträge senden, um eine Aktion auszulösen. </li><li>  Angriffe - Es gibt zum Beispiel Wiederholungsangriffe </li><li>  Es lohnt sich, die <em>seqno-</em> Methode zum Schutz vor Wiederholungsangriffen zu verwenden. </li><li>  DNS-Resolver haben die DNS-Auflösungsmethode </li><li>  Sie können Hashes externer Nachrichten speichern, um sich vor Angriffen zu schützen. Sie müssen sie jedoch rechtzeitig löschen. Verwenden Sie dazu das Feld <em>expired_at</em> für externe Nachrichten </li><li>  Nicht zurückgegebene Nachrichten werden nur zum Erstellen von Verträgen benötigt, andernfalls werden alle internen Nachrichten zurückgegeben </li><li>  Anforderungs- / Antwortnachrichten sollten die folgenden Felder enthalten: <em>op, query_id</em> - optional und einige weitere, abhängig vom Wert von <em>op</em> </li><li>  Sie können Textkommentare im UTF-8-Format für Personen und „binäre Kommentare“ zum automatischen Lesen und Verarbeiten durch Software von Drittanbietern anhängen. </li><li>  Es lohnt sich, mit Ausnahmen umzugehen und dies mit Bedacht zu tun </li><li>  "Einfache Nachricht ohne Kommentare" - muss einen leeren Körper haben </li><li>  Das höherwertige Bit von Anforderungs-Antwort-Nachrichten nimmt für Anforderungsnachrichten den Wert 0 und für Antwortnachrichten den Wert 1 an </li><li>  Es gibt Standard-Operationswerte für Antwortnachrichten, um Fehler zu identifizieren </li><li>  Wenn eine Antwortnachricht mit einer unbekannten Operation empfangen wird, sollte sie ignoriert werden, dh die vollständige Ausführung mit Code 0 </li><li>  Sie müssen für das Senden von Nachrichten, für Benzin und für das Senden einer Antwort bezahlen.  Zur gleichen Zeit, wenn er mehr als nötig gesendet hat, wird der Überschuss in der Antwort zurückgegeben. </li><li>  Beim Empfang von Nachrichten lohnt es sich immer, zuerst das zurückgeworfene Flag zu überprüfen <em>.</em> </li></ol><br><p>  Vielen Dank für Ihre Aufmerksamkeit, ich freue mich über konstruktives Feedback! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de470772/">https://habr.com/ru/post/de470772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de470750/index.html">Amazon fing an, Spitzenprodukte zu fangen</a></li>
<li><a href="../de470752/index.html">Parsen von Wechat-Zahlungen</a></li>
<li><a href="../de470754/index.html">RASA Chatbot: Parallelen Erfahrung</a></li>
<li><a href="../de470756/index.html">Erstellen einer Backend-Anwendung für den Apollo-Online-Chat Node.js.</a></li>
<li><a href="../de470758/index.html">Überblick über die Virusaktivität im September 2019</a></li>
<li><a href="../de470774/index.html">Neue Typanmerkungen in Python 3.8 (Protokoll, Final, TypedDict, Literal)</a></li>
<li><a href="../de470778/index.html">Seagate ST2000DM008 Laufwerk Bewertung: schnelle "zwei" ohne Überpreis</a></li>
<li><a href="../de470780/index.html">Die Bar ist genommen - die neue von Seagate zur Aufbewahrung</a></li>
<li><a href="../de470782/index.html">Daten an der Grenze: So erstellen Sie eine neue IT-Architektur</a></li>
<li><a href="../de470784/index.html">Das Farbdesign der mysteriösen Welten der toten Zellen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>