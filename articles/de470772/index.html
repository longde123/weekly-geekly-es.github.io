<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçü§ù‚Äçüë®üèº üëâüèæ üéæ TON: Empfehlungen und Best Practices ‚ùÑÔ∏è üë©‚Äçüíª üçñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel ist eine √úbersetzung eines Dokuments, das auf der TON-Blockchain-Seite ver√∂ffentlicht wurde: smc -richtlinien.txt . Vielleicht hilft di...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TON: Empfehlungen und Best Practices</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470772/"><p>  Dieser Artikel ist eine √úbersetzung eines Dokuments, das auf der TON-Blockchain-Seite ver√∂ffentlicht wurde: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">smc -richtlinien.txt</a> .  Vielleicht hilft dies jemandem, einen Schritt in Richtung Entwicklung f√ºr diese Blockchain zu machen.  Au√üerdem habe ich am Ende eine kurze Zusammenfassung gemacht. </p><a name="habracut"></a><br><h2 id="vnutrennie-soobscheniya">  Interne Nachrichten </h2><br><p>  Intelligente Vertr√§ge interagieren miteinander, indem sie sogenannte interne Nachrichten senden.  Wenn die interne Nachricht ihr angegebenes Ziel erreicht, wird im Namen des Zielkontos eine regul√§re Transaktion erstellt und die interne Nachricht gem√§√ü dem angegebenen Code und den konstanten Daten dieses Kontos verarbeitet (Smart Contract).  Insbesondere kann eine Verarbeitungstransaktion eine oder mehrere interne Nachrichten erstellen, von denen einige an die Quelladresse der zu verarbeitenden internen Nachricht adressiert sein k√∂nnen.  Dies kann verwendet werden, um einfache ‚ÄûClient-Server-Anwendungen‚Äú zu erstellen, wenn eine Anforderung in eine interne Nachricht eingebettet (gekapselt) und an einen anderen intelligenten Vertrag gesendet wird, der die Anforderung verarbeitet und die Antwort erneut als interne Nachricht zur√ºcksendet. </p><br><p> Dieser Ansatz f√ºhrt dazu, dass zwischen internen Nachrichten an "Anfrage" und "Antwort" (als "Abfrage" oder als "Antwort") unterschieden werden muss oder keine zus√§tzliche Verarbeitung erforderlich ist (z. B. eine einfache Geld√ºberweisung).  Wenn eine Antwort eintrifft, muss es au√üerdem eine M√∂glichkeit geben, zu verstehen, auf welche Anfrage sie sich bezieht. </p><br><p>  Um dieses Ziel zu erreichen, wird empfohlen, die folgende interne Nachrichtenvorlage zu verwenden (denken Sie daran, dass die TON-Blockchain dem Nachrichtentext keine Einschr√§nkungen auferlegt, dh es handelt sich lediglich um eine Empfehlung): </p><br><p>  0) Der Nachrichtentext kann in die Nachricht selbst eingebettet sein oder in einer separaten Zelle (Zelle *) gespeichert werden, auf die in der Nachricht verwiesen wird, wie im TL-B-Fragment des Diagramms angegeben (auf Englisch ist es einfacher zu verstehen: oder in einer separaten Zelle gespeichert) Zelle, auf die in der Nachricht Bezug genommen wird, wie durch das TL-B-Schemafragment angegeben): </p><br><pre><code class="plaintext hljs">message$_ {X:Type} ... body:(Either X ^X) = Message X;</code> </pre> <br><p>  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://core.telegram.org/mtproto</a> - hier k√∂nnen Sie √ºber TL-Schemata lesen) </p><br><p>  Der empfangende Smart-Vertrag muss mindestens interne Nachrichten mit eingebettetem Nachrichtentext akzeptieren (selbst wenn sie in der Zelle platziert sind, in der sich die Nachricht befindet - wann immer sie in die Zelle passen, in der sich die Nachricht befindet - ist nicht ganz klar, was dies bedeutet, daher der Originaltext angeh√§ngt).  Wenn der Vertrag Nachrichtentexte in separaten Zellen akzeptiert (unter Verwendung des "richtigen" Konstruktors <code>(Either X ^X)</code> ), sollte die Verarbeitung der eingehenden Nachricht nicht von der bestimmten Methode zum Einbetten des Nachrichtentexts abh√§ngen.  Andererseits ist es absolut legal, den Nachrichtentext √ºberhaupt nicht in einer separaten Zelle zu unterst√ºtzen, um Anfragen und Antworten zu vereinfachen. </p><br><p>  1) Der Nachrichtentext beginnt normalerweise mit den folgenden Feldern: </p><br><ul><li>  <em>op</em> - 32-Bit-Ganzzahl ohne Vorzeichen (Big-Endian), die die auszuf√ºhrende Operation oder die aufzurufende Smart-Contract-Methode angibt. </li><li>  <em>query_id</em> ist eine vorzeichenlose 64-Bit-Ganzzahl (Big-Endian), die in allen internen Frage- und <em>Antwortnachrichten verwendet</em> wird, um die Beziehung der Antwort zur Anforderung zu identifizieren (die <em>Abfrage-ID der</em> Antwort muss der <em>Abfrage-ID der</em> entsprechenden Anforderung entsprechen).  Wenn <em>op</em> keine Anforderungs-Antwort-Methode ist (es ruft eine Methode auf, von der keine Antwort erwartet wird), kann <em>query_id</em> weggelassen werden. </li><li>  Der Rest des Nachrichtentexts ist spezifisch f√ºr jeden unterst√ºtzten Wert des <em>op-</em> Parameters </li></ul><br><p>  2) Wenn <em>op</em> Null ist, ist die Nachricht eine einfache √úbertragungsnachricht mit einem Kommentar.  Der Kommentar ist im Rest der Nachricht enthalten (ohne <em>query_id</em> usw., <em>dh</em> ab dem 5. Byte (Erkl√§rung: Wenn <em>query_id</em> nicht <em>vorhanden ist</em> , nimmt das <em>op-</em> Feld die ersten 4 Bytes ein)).  Wenn es nicht mit dem Byte 0xff beginnt, ist der Kommentar ein Text;);  Es kann dem Endbenutzer der Brieftasche "wie sie ist" angezeigt werden (nachdem ung√ºltige Zeichen und Steuerzeichen gefiltert und √ºberpr√ºft wurden, ob es sich um eine g√ºltige UTF-8-Zeichenfolge handelt).  In diesem Feld k√∂nnen Benutzer beispielsweise den Zweck einer einfachen √úbertragung von ihrer Brieftasche auf die Brieftasche eines anderen Benutzers angeben.  Wenn ein Kommentar hingegen mit dem Byte 0xff beginnt, ist der Rest der Nachricht ein ‚Äûbin√§rer Kommentar‚Äú, der dem Endbenutzer nicht als Text angezeigt werden sollte (ggf. nur als Hex-Dump).  Die vorgeschlagene Verwendung von bin√§ren Kommentaren besteht beispielsweise darin, eine Zahlungskennung f√ºr die Zahlung im Gesch√§ft zu enthalten und automatisch von der Gesch√§ftssoftware generiert und verarbeitet zu werden. </p><br><p>  Die meisten intelligenten Vertr√§ge m√ºssen keine nicht trivialen Aktionen ausf√ºhren oder eine eingehende Nachricht ablehnen, wenn sie eine ‚Äûeinfache √úbertragungsnachricht‚Äú erhalten.  Wenn sich herausstellt, dass <em>op</em> Null ist, sollte die Smart Contract-Funktion zum Verarbeiten eingehender interner Nachrichten (normalerweise als <code>recv_internal()</code> ) sofort mit dem Code 0 beendet werden, was auf Erfolg hinweist (z. B. <code>recv_internal()</code> Ausnahme 0, wenn kein benutzerdefinierter Handler im Smart Contract installiert ist Ausnahmen).  Dies f√ºhrt dazu, dass der von der Nachricht √ºberwiesene Betrag ohne weitere Auswirkungen dem Konto des Empf√§ngers gutgeschrieben wird. </p><br><p>  3) "Eine einfache Nachrichten√ºbertragung ohne Kommentare" hat einen leeren K√∂rper (auch ohne das <em>Operationsfeld</em> ).  Die obigen √úberlegungen gelten f√ºr solche Nachrichten.  Bitte beachten Sie, dass f√ºr solche Nachrichten ein eigener Text in die Nachrichtenzelle eingebettet sein muss. </p><br><p>  4) Wir erwarten, dass das <em>Operationsfeld</em> der Anforderungsnachrichten das erste Bit ("h√∂herwertiges Bit", √ºbersetzt als das erste, dies kann falsch sein, aber wie sp√§ter erl√§utert wird klar) leer ist, dh der Wert des Feldes sollte im Bereich <code>1 .. 2^31-1</code> , und f√ºr Antwortnachrichten sollte das erste (h√∂herwertige) Bit gleich 1 sein, <code>2^31 .. 2^32-1</code> im Bereich <code>2^31 .. 2^32-1</code> .  Wenn die Nachricht weder eine Anforderung noch eine Antwort ist (der Body enth√§lt nicht den Parameter <em>query_id</em> ), muss sie den Parameter <em>op</em> im Bereich wie in der Anforderungsnachricht enthalten: <code>1 .. 2^31 - 1</code> . </p><br><p>  5) Es gibt mehrere "Standard" -Antwortnachrichten, f√ºr die <em>op</em> 0xffffffff und 0xffffffffe ist.  Im Allgemeinen sind Operationswerte von 0xfffffff0 bis 0xffffffff f√ºr solche Standardantworten reserviert. </p><br><ul><li>  <em>op = 0xffffffff</em> bedeutet "Operation wird nicht unterst√ºtzt."  Es folgt eine 64-Bit- <em>Abfrage</em> - <em>ID,</em> die aus der urspr√ºnglichen Abfrage extrahiert wurde, und eine 32-Bit- <em>Operation</em> <em>der</em> urspr√ºnglichen Abfrage.  Alle au√üer den einfachsten Smart-Vertr√§gen sollten diesen Fehler zur√ºckgeben, wenn sie eine Anfrage mit einer unbekannten <em>Operation</em> im Bereich von 1 ... 2 ^ 31-1 erhalten. </li><li>  <em>op = 0xfffffffe</em> bedeutet "Operation nicht erlaubt".  Es folgt die 64-Bit-Abfrage- <em>ID der</em> urspr√ºnglichen Abfrage und anschlie√üend die 32-Bit- <em>Operation, die aus der</em> urspr√ºnglichen Abfrage extrahiert wurde. </li></ul><br><p>  Beachten Sie, dass unbekannte "Antworten" (mit <em>op</em> im Bereich 2 ^ 31 ... 2 ^ 32-1) ignoriert werden sollten (insbesondere sollten Sie keine Antwort mit <em>op</em> gleich 0xffffffff generieren) sowie unerwartete R√ºckgabe ( bounce) -nachrichten (mit gesetztem "bounce" -Flag). </p><br><h2 id="oplata-za-obrabotku-zaprosov-i-otpravlenie-otvetov">  Zahlung f√ºr die Bearbeitung von Anfragen und das Senden von Antworten </h2><br><p>  Wenn ein Smart-Vertrag eine Anfrage an einen anderen Smart-Vertrag senden m√∂chte, muss er im Allgemeinen f√ºr das Senden einer internen Nachricht an den Ziel-Smart-Vertrag (Nachrichtenweiterleitungsgeb√ºhren) bezahlen, um diese Nachricht am Zielort zu verarbeiten (Gasgeb√ºhr: Gasgeb√ºhren) und zum Senden einer Antwort, falls erforderlich (Geb√ºhren f√ºr die Weiterleitung von Nachrichten). </p><br><p>  In den meisten F√§llen f√ºgt der Absender der internen Nachricht eine kleine Menge Gramm hinzu (z. B. 1 Gramm) (genug, um f√ºr die Verarbeitung dieser Nachricht zu bezahlen) und setzt das Flag "Bounce" darauf (dh es wird eine bounceable interne Nachricht gesendet).  Der Empf√§nger gibt den nicht verwendeten Teil des empfangenen Werts mit der Antwort zur√ºck (abz√ºglich der Geb√ºhr f√ºr das Senden der Nachricht).  Dies wird normalerweise durch Aufrufen von SENDRAWMSG mit mode = 64 erreicht (siehe Anhang A zur TON VM-Dokumentation). </p><br><p>  Wenn der Empf√§nger die empfangene Nachricht nicht verarbeiten kann und die Ausf√ºhrung mit einem Exit-Code ungleich Null beendet wird (z. B. aufgrund einer Ausnahme bei der Deserialisierung nicht behandelter Zellen), wird die Nachricht automatisch an den Absender zur√ºckgeschickt, und das Flag "Absprung" wird deaktiviert und gesetzt. Flagge "prallte ab".  Der Text der zur√ºckgesendeten Nachricht entspricht dem der urspr√ºnglichen Nachricht.  Daher ist es wichtig, das "Bounce" -Flag der eingehenden internen Nachricht zu √ºberpr√ºfen, bevor das Operationsfeld im Smart-Vertrag analysiert und die entsprechende Anforderung verarbeitet wird (andernfalls besteht das Risiko, dass die in der Bounce-Nachricht enthaltene Anforderung von ihrem urspr√ºnglichen Absender als neue separate Anforderung verarbeitet wird).  Wenn das Flag "Bounce" gesetzt ist, kann der Spezialcode verstehen, welche Anforderung fehlgeschlagen ist (z. B. durch Deserialisieren von <em>op</em> und <em>query_id</em> aus einer <em>Bounce-</em> Nachricht) und entsprechende Ma√ünahmen ergreifen.  Ein einfacherer Smart-Vertrag kann einfach alle zur√ºckgegebenen Nachrichten ignorieren (mit einem Exit-Code von Null beenden, wenn das Flag "Bounce" gesetzt ist). </p><br><p>  Andererseits kann der Empf√§nger die eingehende Anforderung erfolgreich analysieren und feststellen, dass die angeforderte <em>Operationsmethode</em> nicht unterst√ºtzt wird oder dass eine andere Fehlerbedingung erf√ºllt wurde.  Dann sollte eine Antwort mit <em>op</em> gleich 0xffffffff oder einem anderen geeigneten Wert unter Verwendung von SENDRAWMSG mit mode = 64 zur√ºckgesendet werden, wie oben erw√§hnt. </p><br><p>  In einigen Situationen m√∂chte der Absender gleichzeitig einen bestimmten Geldbetrag √ºberweisen?  an den Absender?  (hier anscheinend ein Fehler und war f√ºr den "Empf√§nger" bestimmt) und erhalten entweder eine Best√§tigung oder eine Fehlermeldung.  Beispielsweise erh√§lt ein intelligenter Vertrag f√ºr Validatorwahlen eine Aufforderung zur Teilnahme an einer Wahl zusammen mit einem Angebot als Mehrwert.  In solchen F√§llen ist es sinnvoll, beispielsweise ein zus√§tzliches Gramm an den gesch√§tzten Wert [Kosten] anzuh√§ngen (hier wird der Wortwert √ºberall verwendet, im Sinne einer Zahlung f√ºr eine Aktion, daher habe ich das Wort "Kosten" verwendet).  Wenn ein Fehler auftritt (z. B. kann das Gebot aus irgendeinem Grund nicht angenommen werden), sollte der gesamte erhaltene Betrag (abz√ºglich der Bearbeitungsgeb√ºhr) zusammen mit der Fehlermeldung an den Absender zur√ºckgesandt werden (z. B. unter Verwendung von SENDRAWMSG mit mode = 64, wie beschrieben) oben).  Bei Erfolg wird eine Best√§tigungsnachricht erstellt und genau ein Gramm zur√ºckgesendet (die Nachrichten√ºbertragungsgeb√ºhr wird von diesem Wert abgezogen; dies ist Modus = 1 von SENDRAWMSG). </p><br><h2 id="ispolzovanie-nevozvratnyh-non-bounceable-soobscheniy">  Verwenden von nicht bounceable Nachrichten </h2><br><p>  Fast alle internen Nachrichten, die zwischen intelligenten Vertr√§gen gesendet werden, sollten zur√ºckgegeben werden (Sie k√∂nnen sie als "Bouncing" √ºbersetzen, aber um nicht verwirrt zu werden, ist es einfacher, diese Terminologie zu verwenden), dh das Bit "Bounce" muss nicht leer sein.  Wenn der Smart-Zielvertrag nicht vorhanden ist oder bei der Verarbeitung dieser Nachricht eine unbehandelte Ausnahme entsteht, wird die Nachricht mit dem Rest der anf√§nglichen Kosten (Wert) (abz√ºglich aller Geb√ºhren f√ºr die √úbertragung von Nachrichten und Gas) zur√ºckgesendet.  Die zur√ºckgegebene Nachricht hat denselben Text, jedoch mit deaktiviertem "Bounce" -Flag und gesetztem "Bounce" -Flag.  Daher sollten alle Smart-Vertr√§ge das "Bounce" -Flag aller eingehenden Nachrichten √ºberpr√ºfen und diese entweder stillschweigend empfangen (sofort mit einem Null-Exit-Code beenden) oder eine spezielle Verarbeitung durchf√ºhren, um festzustellen, welche ausgehende Anforderung fehlgeschlagen ist.  Die im Hauptteil der zur√ºckgegebenen Nachricht enthaltene Anforderung sollte niemals ausgef√ºhrt werden. </p><br><p>  In einigen F√§llen m√ºssen nicht bounceable interne Nachrichten verwendet werden.  Beispielsweise kann ein neues Konto nicht erstellt werden, ohne dass mindestens eine unwiderrufliche interne Nachricht an das Konto gesendet wurde.  Wenn diese Nachricht kein StateInit mit dem Code und den Daten des neuen Smart-Vertrags enth√§lt, ist es nicht sinnvoll, einen nicht leeren Text in einer nicht zur√ºckkehrenden internen Nachricht zu haben. </p><br><p>  Es ist eine gute Idee, dem Endbenutzer (z. B. der Brieftasche) nicht zu erlauben, unwiderrufliche Nachrichten zu senden, die eine gro√üe Menge enthalten (z. B. mehr als f√ºnf Gramm), oder sie zumindest zu warnen, wenn sie dies versuchen.  Es ist besser, zuerst einen kleinen Betrag zu senden, dann einen neuen Smart-Vertrag zu erstellen und dann einen gr√∂√üeren Betrag zu senden. </p><br><h2 id="vneshnie-soobscheniya">  Externe Nachrichten </h2><br><p>  Externe Nachrichten werden extern an intelligente Vertr√§ge in der TON-Blockchain gesendet, um sie zur Ausf√ºhrung bestimmter Aktionen zu zwingen.  Beispielsweise erwartet der Smart-Vertrag der Brieftasche den Empfang externer Nachrichten mit Bestellungen (z. B. interne Nachrichten, die vom Smart-Vertrag der Brieftasche gesendet werden), die vom Brieftaschenbesitzer unterzeichnet wurden.  Wenn eine solche externe Nachricht vom Smart Contract der Brieftasche empfangen wird, √ºberpr√ºft sie zuerst die Signatur, empf√§ngt dann die Nachricht (durch Starten des TVM ACCEPT-Grundelements) und f√ºhrt dann alle erforderlichen Aktionen aus. </p><br><p>  Bitte beachten Sie, dass alle externen Nachrichten vor Wiederholungsangriffen gesch√ºtzt werden m√ºssen.  Validatoren entfernen normalerweise eine externe Nachricht aus dem Pool der vorgeschlagenen externen Nachrichten (vom Netzwerk empfangen).  In einigen Situationen kann ein anderer Pr√ºfer dieselbe externe Nachricht jedoch zweimal verarbeiten (wodurch eine zweite Transaktion f√ºr dieselbe externe Nachricht erstellt wird, was zu einer Verdoppelung der urspr√ºnglichen Aktion f√ºhrt).  Schlimmer noch, ein Angreifer kann eine externe Nachricht aus einem Block mit einer Verarbeitungstransaktion extrahieren und sp√§ter erneut senden.  Dies kann beispielsweise dazu f√ºhren, dass ein Smart-Wallet-Vertrag die Zahlung wiederholt. </p><br><p>  Der einfachste Weg, intelligente Vertr√§ge vor Sniffing-Angriffen zu sch√ºtzen, die mit externen Nachrichten verbunden sind, besteht darin, den 32-Bit- <em>Cur-Seqno-Z√§hler</em> in den konstanten Daten des intelligenten Vertrags zu speichern und auf den <em>Wert</em> f√ºr die <em>Anforderung</em> im (signierten Teil) aller eingehenden externen Nachrichten zu warten.  Dann wird die externe Nachricht nur akzeptiert (AKZEPTIERT - ein Hinweis auf das primitive AKZEPTIEREN), wenn die Signatur g√ºltig ist und <em>req-seqno</em> gleich <em>cur-seqno ist</em> .  Nach erfolgreicher Verarbeitung erh√∂ht sich der Wert von <em>cur-seqno</em> in persistenten Daten um eins, sodass dieselbe externe Nachricht nie wieder empfangen wird. </p><br><p>  Sie k√∂nnen das <em>Ablaufdatum auch</em> in eine externe Nachricht aufnehmen und die Nachricht nur akzeptieren, wenn die aktuelle Unix-Zeit unter dem Wert dieses Felds liegt.  Dieser Ansatz kann in Kombination mit <em>seqno verwendet werden</em> ;  Alternativ kann der empfangende Smart-Vertrag einen Satz (Hashes) aller zuletzt (nicht abgelaufenen) empfangenen externen Nachrichten in seinen permanenten Daten speichern und eine neue externe Nachricht ablehnen, wenn es sich um ein Duplikat einer der gespeicherten Nachrichten handelt.  Sie sollten auch das Sammeln und Entfernen abgelaufener Nachrichten in diesem Satz implementieren, um ein unbegrenztes Wachstum persistenter Daten zu vermeiden. </p><br><p>  In der Regel beginnt eine externe Nachricht mit einer 256-Bit-Signatur (falls erforderlich), einer 32-Bit <em>-Anforderungsnummer</em> (falls erforderlich), einem 32-Bit <em>-Ablaufdatum</em> (falls erforderlich) und m√∂glicherweise einer 32-Bit <em>-Operation</em> und anderen erforderlichen Parametern in je nach <em>op</em> .  Die externe Nachrichtenvorlage muss nicht so standardisiert sein wie die interne Nachrichtenvorlage, da externe Nachrichten nicht f√ºr die Interaktion zwischen verschiedenen intelligenten Vertr√§gen verwendet werden (von verschiedenen Entwicklern geschrieben und von verschiedenen Eigent√ºmern verwaltet). </p><br><h2 id="get-metody">  Methoden abrufen </h2><br><p>  Von einigen intelligenten Vertr√§gen wird erwartet, dass sie bestimmte genau definierte Get-Methoden implementieren.  Beispielsweise wird erwartet, dass jeder DNS-Resolver-Smart-Vertrag f√ºr TON DNS die Methode dnsresolve get implementiert.  Benutzerdefinierte Smart-Vertr√§ge k√∂nnen ihre spezifischen Get-Methoden definieren.  Unsere einzige allgemeine Empfehlung im Moment ist die Implementierung der get-Methode "seqno" (ohne Parameter), die die aktuelle <em>seqno des</em> Smart-Vertrags <em>zur√ºckgibt</em> , die Sequenznummern verwendet, um Wiedergabeangriffe zu verhindern, die mit eingehenden externen Methoden verbunden sind, wann immer eine solche Methode vorhanden ist Bedeutung. </p><br><p>  W√∂rterbuch: </p><br><ul><li>  Zelle - Eine TVM-Zelle besteht aus h√∂chstens 1023 Datenbits und h√∂chstens vier Verweisen auf andere Zellen.  Alle persistenten Daten (einschlie√ülich TVM-Code) in der TON-Blockchain werden als Sammlung von TVM-Zellen dargestellt (vgl. [1, 2.5.14]).  - Eine TVM-Zelle besteht aus nicht mehr als 1023 Datenbits und nicht mehr als vier Verbindungen zu anderen Zellen.  Alle persistenten Daten (einschlie√ülich des TVM-Codes) in der TON-Blockchain werden als Satz von TVM-Zellen dargestellt (vgl. [1, 2.5.14]).  - Auszug aus der Beschreibung der TON Virtual Machine ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://test.ton.org/tvm.pdf</a> ) </li></ul><br><h2 id="kakie-mozhno-sdelat-vyvody-na-osnove-prochitannogo">  Welche Schlussfolgerungen k√∂nnen aus dem, was ich lese, gezogen werden? </h2><br><ol><li>  Sie k√∂nnen externe Nachrichten an Vertr√§ge senden, um eine Aktion auszul√∂sen. </li><li>  Angriffe - Es gibt zum Beispiel Wiederholungsangriffe </li><li>  Es lohnt sich, die <em>seqno-</em> Methode zum Schutz vor Wiederholungsangriffen zu verwenden. </li><li>  DNS-Resolver haben die DNS-Aufl√∂sungsmethode </li><li>  Sie k√∂nnen Hashes externer Nachrichten speichern, um sich vor Angriffen zu sch√ºtzen. Sie m√ºssen sie jedoch rechtzeitig l√∂schen. Verwenden Sie dazu das Feld <em>expired_at</em> f√ºr externe Nachrichten </li><li>  Nicht zur√ºckgegebene Nachrichten werden nur zum Erstellen von Vertr√§gen ben√∂tigt, andernfalls werden alle internen Nachrichten zur√ºckgegeben </li><li>  Anforderungs- / Antwortnachrichten sollten die folgenden Felder enthalten: <em>op, query_id</em> - optional und einige weitere, abh√§ngig vom Wert von <em>op</em> </li><li>  Sie k√∂nnen Textkommentare im UTF-8-Format f√ºr Personen und ‚Äûbin√§re Kommentare‚Äú zum automatischen Lesen und Verarbeiten durch Software von Drittanbietern anh√§ngen. </li><li>  Es lohnt sich, mit Ausnahmen umzugehen und dies mit Bedacht zu tun </li><li>  "Einfache Nachricht ohne Kommentare" - muss einen leeren K√∂rper haben </li><li>  Das h√∂herwertige Bit von Anforderungs-Antwort-Nachrichten nimmt f√ºr Anforderungsnachrichten den Wert 0 und f√ºr Antwortnachrichten den Wert 1 an </li><li>  Es gibt Standard-Operationswerte f√ºr Antwortnachrichten, um Fehler zu identifizieren </li><li>  Wenn eine Antwortnachricht mit einer unbekannten Operation empfangen wird, sollte sie ignoriert werden, dh die vollst√§ndige Ausf√ºhrung mit Code 0 </li><li>  Sie m√ºssen f√ºr das Senden von Nachrichten, f√ºr Benzin und f√ºr das Senden einer Antwort bezahlen.  Zur gleichen Zeit, wenn er mehr als n√∂tig gesendet hat, wird der √úberschuss in der Antwort zur√ºckgegeben. </li><li>  Beim Empfang von Nachrichten lohnt es sich immer, zuerst das zur√ºckgeworfene Flag zu √ºberpr√ºfen <em>.</em> </li></ol><br><p>  Vielen Dank f√ºr Ihre Aufmerksamkeit, ich freue mich √ºber konstruktives Feedback! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de470772/">https://habr.com/ru/post/de470772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de470750/index.html">Amazon fing an, Spitzenprodukte zu fangen</a></li>
<li><a href="../de470752/index.html">Parsen von Wechat-Zahlungen</a></li>
<li><a href="../de470754/index.html">RASA Chatbot: Parallelen Erfahrung</a></li>
<li><a href="../de470756/index.html">Erstellen einer Backend-Anwendung f√ºr den Apollo-Online-Chat Node.js.</a></li>
<li><a href="../de470758/index.html">√úberblick √ºber die Virusaktivit√§t im September 2019</a></li>
<li><a href="../de470774/index.html">Neue Typanmerkungen in Python 3.8 (Protokoll, Final, TypedDict, Literal)</a></li>
<li><a href="../de470778/index.html">Seagate ST2000DM008 Laufwerk Bewertung: schnelle "zwei" ohne √úberpreis</a></li>
<li><a href="../de470780/index.html">Die Bar ist genommen - die neue von Seagate zur Aufbewahrung</a></li>
<li><a href="../de470782/index.html">Daten an der Grenze: So erstellen Sie eine neue IT-Architektur</a></li>
<li><a href="../de470784/index.html">Das Farbdesign der mysteri√∂sen Welten der toten Zellen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>