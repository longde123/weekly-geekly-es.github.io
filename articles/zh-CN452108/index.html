<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ–ğŸ¿ â™“ï¸ ğŸ•´ğŸ½ Dockerï¼šæ— å®³å»ºè®® ğŸ™ğŸ» ğŸ™ğŸ¾ ğŸ˜Š</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨æˆ‘å¯¹Dockeræ–‡ç« çš„è¯„è®ºï¼šä¸å¥½çš„å»ºè®®ä¸­ ï¼Œæœ‰å¾ˆå¤šè¦æ±‚æ¥è§£é‡Šä¸ºä»€ä¹ˆå…¶ä¸­æè¿°çš„Dockerfileå¦‚æ­¤å¯æ€•ã€‚ 


 ä¸Šä¸€ä¸ªç³»åˆ—çš„æ‘˜è¦ ï¼šåœ¨ç´§è¿«çš„æœŸé™å†…æœ‰ä¸¤åå¼€å‘äººå‘˜ç»„æˆäº†Dockerfileã€‚ åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒIsper Igor Ivanovichæ¥äº†ã€‚ ç”Ÿæˆçš„Dockerfileå¤ªç³Ÿç³•äº†ï¼Œä»¥è‡³äºA...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dockerï¼šæ— å®³å»ºè®®</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/452108/"><p> åœ¨æˆ‘å¯¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Docker</a>æ–‡ç« çš„è¯„è®º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼šä¸å¥½çš„å»ºè®®ä¸­</a> ï¼Œæœ‰å¾ˆå¤šè¦æ±‚æ¥è§£é‡Šä¸ºä»€ä¹ˆå…¶ä¸­æè¿°çš„Dockerfileå¦‚æ­¤å¯æ€•ã€‚ </p><br><p>  <em>ä¸Šä¸€ä¸ªç³»åˆ—çš„æ‘˜è¦</em> ï¼šåœ¨ç´§è¿«çš„æœŸé™å†…æœ‰ä¸¤åå¼€å‘äººå‘˜ç»„æˆäº†Dockerfileã€‚ åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒIsper Igor Ivanovichæ¥äº†ã€‚ ç”Ÿæˆçš„Dockerfileå¤ªç³Ÿç³•äº†ï¼Œä»¥è‡³äºAIæ¿’ä¸´å¿ƒè„ç—…å‘ä½œã€‚ </p><br><p><img src="https://habrastorage.org/webt/nl/uj/xm/nlujxmo7chgsgo7dti72jckbk04.jpeg"></p><br><p> ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ‰¾å‡ºè¿™ä¸ªDockerfileæœ‰ä»€ä¹ˆé—®é¢˜ã€‚ </p><br><p> å› æ­¤ï¼Œä¸€å‘¨è¿‡å»äº†ã€‚ </p><a name="habracut"></a><br><p>  Dev Petyaä¸Ops Igor Ivanovichåœ¨é¥­å…è§é¢ï¼Œå–æ¯å’–å•¡ã€‚ </p><br><p> ç—…äººï¼šä¼Šæˆˆå°”Â·ä¼Šä¸‡è¯ºç»´å¥‡ï¼Œä½ å¾ˆå¿™å—ï¼Ÿ æˆ‘æƒ³å¼„æ¸…æ¥šæˆ‘ä»¬åœ¨å“ªé‡Œæç ¸äº†ã€‚ </p><br><p>  AIï¼šè¿™å¾ˆå¥½ï¼Œæ‚¨ä¸ä¼šç»å¸¸é‡åˆ°å¯¹æ“ä½œæ„Ÿå…´è¶£çš„å¼€å‘äººå‘˜ã€‚ <br> é¦–å…ˆï¼Œè®©æˆ‘ä»¬åœ¨ä¸€äº›äº‹æƒ…ä¸Šè¾¾æˆå…±è¯†ï¼š </p><br><ol><li>  Dockeræ„è¯†å½¢æ€ï¼šä¸€ä¸ªå®¹å™¨-ä¸€ä¸ªè¿‡ç¨‹ã€‚ </li><li> å®¹å™¨è¶Šå°è¶Šå¥½ã€‚ </li><li> ä½¿ç”¨çš„ç¼“å­˜è¶Šå¤šè¶Šå¥½ã€‚ </li></ol><br><p> è­¦ï¼šä¸ºä»€ä¹ˆä¸€ä¸ªå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªè¿‡ç¨‹ï¼Ÿ </p><br><p>  AIï¼šDockeråœ¨å®¹å™¨å¯åŠ¨æ—¶ä¼šä½¿ç”¨pid 1ç›‘è§†è¿›ç¨‹çš„çŠ¶æ€ã€‚å¦‚æœè¿›ç¨‹ç»ˆæ­¢ï¼Œåˆ™Dockerå°è¯•é‡æ–°å¯åŠ¨å®¹å™¨ã€‚ å‡è®¾æ‚¨çš„å®¹å™¨ä¸­æ­£åœ¨è¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åºï¼Œæˆ–è€…ä¸»åº”ç”¨ç¨‹åºæœªä½¿ç”¨pid 1å¯åŠ¨ã€‚å¦‚æœè¯¥è¿›ç¨‹ç»ˆæ­¢ï¼Œåˆ™Dockerå°†ä¸çŸ¥é“å®ƒã€‚ </p><br><p> å¦‚æœæ²¡æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·æ˜¾ç¤ºæ‚¨çš„Dockerfileã€‚ </p><br><p>  Petyaæ˜¾ç¤ºï¼š </p><br><pre><code class="plaintext hljs">FROM ubuntu:latest #    COPY ./ /app WORKDIR /app #    RUN apt-get update #   RUN apt-get upgrade #    RUN apt-get -y install libpq-dev imagemagick gsfonts ruby-full ssh supervisor #  bundler RUN gem install bundler #  nodejs     RUN curl -sL https://deb.nodesource.com/setup_9.x | sudo bash - RUN apt-get install -y nodejs #   RUN bundle install --without development test --path vendor/bundle #     RUN rm -rf /usr/local/bundle/cache/*.gem RUN apt-get clean RUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* RUN rake assets:precompile #  ,   ,    . CMD ["/app/init.sh"]</code> </pre> <br><p>  AIï¼šå“¦ï¼Œè®©æˆ‘ä»¬æŒ‰é¡ºåºæ•´ç†ä¸€ä¸‹ã€‚ è®©æˆ‘ä»¬ä»ç¬¬ä¸€è¡Œå¼€å§‹ï¼š </p><br><pre> <code class="plaintext hljs">FROM ubuntu:latest</code> </pre> <br><p> æ‚¨é‡‡ç”¨<code>latest</code>æ ‡ç­¾ã€‚ ä½¿ç”¨<code>latest</code>æ ‡ç­¾ä¼šå¯¼è‡´ä¸å¯é¢„æµ‹çš„åæœã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œæ˜ åƒç»´æŠ¤è€…æ­£åœ¨ä½¿ç”¨å…¶ä»–è½¯ä»¶åˆ—è¡¨æ„å»ºæ˜ åƒçš„æ–°ç‰ˆæœ¬ï¼Œè¯¥æ˜ åƒå°†è·å¾—æœ€æ–°æ ‡ç­¾ã€‚ æœ€å¥½çš„æƒ…å†µæ˜¯ï¼Œæ‚¨çš„å®¹å™¨åœæ­¢æ”¶é›†ï¼Œæœ€åçš„æƒ…å†µä¸‹ï¼Œæ‚¨å°†æ•è·ä»¥å‰ä¸å­˜åœ¨çš„é”™è¯¯ã€‚ </p><br><p> æ‚¨ä½¿ç”¨å…·æœ‰å¾ˆå¤šä¸å¿…è¦è½¯ä»¶çš„å®Œæ•´æ“ä½œç³»ç»Ÿæ‹æ‘„å›¾åƒï¼Œè¿™ä¼šä½¿å®¹å™¨è†¨èƒ€ã€‚ è½¯ä»¶è¶Šå¤šï¼Œæ¼æ´å’Œæ¼æ´å°±è¶Šå¤šã€‚ </p><br><p> æ­¤å¤–ï¼Œå›¾åƒè¶Šå¤§ï¼Œä¸»æœºå’Œæ³¨å†Œè¡¨ä¸­å ç”¨çš„ç©ºé—´å°±è¶Šå¤§ï¼ˆæ‚¨æ˜¯å¦å°†å›¾åƒå­˜å‚¨åœ¨æŸå¤„ï¼‰ï¼Ÿ </p><br><p> è­¦ï¼šæ˜¯çš„ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ³¨å†Œè¡¨ï¼Œæ‚¨å¯ä»¥è®¾ç½®å®ƒã€‚ </p><br><p>  IIï¼šé‚£ä¹ˆï¼Œæˆ‘åœ¨è¯´ä»€ä¹ˆï¼Ÿ..å“¦ï¼Œæ˜¯çš„ï¼Œå·...ç½‘ç»œè´Ÿè½½ä¹Ÿåœ¨å¢é•¿ã€‚ å¯¹äºå•ä¸ªæ˜ åƒï¼Œè¿™æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯å¦‚æœè¿›è¡Œè¿ç»­çš„ç»„è£…ï¼Œæµ‹è¯•å’Œéƒ¨ç½²ï¼Œåˆ™å¯ä»¥çœ‹åˆ°ã€‚ è€Œä¸”ï¼Œå¦‚æœæ‚¨åœ¨AWSä¸Šæ²¡æœ‰ä¸Šå¸çš„æ¨¡å¼ï¼Œæ‚¨è¿˜å°†è·å¾—ä¸€ä¸ªå¤ªç©ºå¸æˆ·ã€‚ </p><br><p> å› æ­¤ï¼Œæ‚¨éœ€è¦é€‰æ‹©æœ€åˆé€‚çš„æ˜ åƒï¼Œä»¥åŠå‡†ç¡®çš„ç‰ˆæœ¬å’Œæœ€ä½çš„è½¯ä»¶ã€‚ ä¾‹å¦‚ï¼Œä»¥ï¼š <code>FROM ruby:2.5.5-stretch</code> </p><br><p> è­¦ï¼šå“¦ï¼Œæˆ‘æ˜ç™½äº†ã€‚ ä»¥åŠå¦‚ä½•ä»¥åŠåœ¨å“ªé‡Œçœ‹åˆ°å¯ç”¨çš„å›¾åƒï¼Ÿ å¦‚ä½•ç†è§£æˆ‘éœ€è¦å“ªä¸€ä¸ªï¼Ÿ </p><br><p>  AIï¼šé€šå¸¸ï¼Œå›¾åƒæ˜¯ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Dockhub</a>æ‹æ‘„çš„ï¼Œä¸è¦ä¸pornhubæ··æ·†ï¼š)ã€‚ é€šå¸¸æœ‰ä¸€ä¸ªå›¾åƒçš„å‡ ä¸ªç¨‹åºé›†ï¼š <br>  <strong>é«˜å±±ï¼ˆAlpineï¼‰</strong> ï¼šæ˜ åƒæ˜¯åœ¨ä»…5 MBçš„ç®€çº¦Linuxæ˜ åƒä¸Šç¼–è¯‘çš„ã€‚ å®ƒçš„ç¼ºç‚¹æ˜¯ï¼šå®ƒæ˜¯ä½¿ç”¨è‡ªå·±çš„libcå®ç°æ„å»ºçš„ï¼Œå…¶ä¸­çš„æ ‡å‡†è½¯ä»¶åŒ…ä¸èµ·ä½œç”¨ã€‚ æŸ¥æ‰¾å¹¶å®‰è£…æ­£ç¡®çš„è½¯ä»¶åŒ…å°†èŠ±è´¹å¤§é‡æ—¶é—´ã€‚ <br>  <strong>Scratch</strong> ï¼šåŸºæœ¬å›¾åƒï¼Œä¸ç”¨äºæ„å»ºå…¶ä»–å›¾åƒã€‚ å®ƒä»…ç”¨äºè¿è¡ŒäºŒè¿›åˆ¶çš„å‡†å¤‡å¥½çš„æ•°æ®ã€‚ éå¸¸é€‚åˆè¿è¡ŒäºŒè¿›åˆ¶åº”ç”¨ç¨‹åºï¼Œå…¶ä¸­åŒ…æ‹¬æ‚¨éœ€è¦çš„ä¸€åˆ‡ï¼Œä¾‹å¦‚go-applicationsã€‚ <br> åŸºäºä»»ä½•æ“ä½œç³»ç»Ÿï¼Œä¾‹å¦‚Ubuntuæˆ–Debianã€‚ å¥½å§ï¼Œæˆ‘è®¤ä¸ºè¿™é‡Œä¸éœ€è¦è§£é‡Šã€‚ </p><br><p>  IIï¼šç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠæ‰€æœ‰å¤šä½™çš„ä¸œè¥¿éƒ½æ”¾è¿›å»ã€‚ æ‰“åŒ…å¹¶æ¸…ç†ç¼“å­˜ã€‚ ç«‹å³æ‚¨å¯ä»¥è¿›è¡Œ<em>apt-get upgrade</em> ã€‚ å¦åˆ™ï¼Œå¯¹äºæ¯ä¸ªç»„ä»¶ï¼Œå°½ç®¡å…·æœ‰åŸºæœ¬å›¾åƒçš„å›ºå®šæ ‡ç­¾ï¼Œä»å°†è·å¾—ä¸åŒçš„å›¾åƒã€‚ æ›´æ–°æ˜ åƒä¸­çš„ç¨‹åºåŒ…æ˜¯ç»´æŠ¤äººå‘˜çš„ä»»åŠ¡ï¼Œå®ƒä¼´éšç€æ ‡ç­¾çš„æ›´æ”¹ã€‚ </p><br><p> è­¦ï¼šæ˜¯çš„ï¼Œæˆ‘å°è¯•è¿™æ ·åšï¼Œç»“æœæ˜¯è¿™æ ·çš„ï¼š </p><br><pre> <code class="plaintext hljs">WORKDIR /app COPY ./ /app RUN curl -sL https://deb.nodesource.com/setup_9.x | bash - \ &amp;&amp; apt-get -y install libpq-dev imagemagick gsfonts ruby-full ssh supervisor nodejs \ &amp;&amp; gem install bundler \ &amp;&amp; bundle install --without development test --path vendor/bundle RUN rm -rf /usr/local/bundle/cache/*.gem \ &amp;&amp; apt-get clean \ &amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*</code> </pre> <br><p>  IIï¼šä¸é”™ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€äº›å·¥ä½œè¦åšã€‚ çœ‹ï¼Œè¿™æ˜¯ä»¥ä¸‹å‘½ä»¤ï¼š </p><br><pre> <code class="plaintext hljs">RUN rm -rf /usr/local/bundle/cache/*.gem \ &amp;&amp; apt-get clean \ &amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*</code> </pre> <br><p>  ...ä¸ä¼šä»æœ€ç»ˆå›¾åƒä¸­åˆ é™¤æ•°æ®ï¼Œè€Œåªä¼šåˆ›å»ºä¸€ä¸ªæ²¡æœ‰æ­¤æ•°æ®çš„é™„åŠ å›¾å±‚ã€‚ æ­£ç¡®çš„æ˜¯ï¼š </p><br><pre> <code class="plaintext hljs">RUN curl -sL https://deb.nodesource.com/setup_9.x | bash - \ &amp;&amp; apt-get -y install libpq-dev imagemagick gsfonts nodejs \ &amp;&amp; gem install bundler \ &amp;&amp; bundle install --without development test --path vendor/bundle \ &amp;&amp; rm -rf /usr/local/bundle/cache/*.gem \ &amp;&amp; apt-get clean \ &amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*</code> </pre> <br><p> ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ã€‚ éœ²æ¯”ï¼Œä½ é‚£é‡Œæœ‰ä»€ä¹ˆï¼Ÿ è¿™æ ·å°±ä¸å¿…åœ¨å¼€å§‹æ—¶å¤åˆ¶æ•´ä¸ªé¡¹ç›®ã€‚ åªéœ€å¤åˆ¶Gemfileå’ŒGemfile.lockã€‚ </p><br><p> ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä»…åœ¨Gemfileæˆ–Gemfile.lockå·²æ›´æ”¹çš„æƒ…å†µä¸‹ï¼Œæ‰å¯¹æºçš„æ¯æ¬¡æ›´æ”¹éƒ½ä¸ä¼šæ‰§è¡Œæ†ç»‘åŒ…å®‰è£…ã€‚ </p><br><p> ç›¸åŒçš„æ–¹æ³•é€‚ç”¨äºä¾èµ–ç®¡ç†å™¨çš„å…¶ä»–è¯­è¨€ï¼Œä¾‹å¦‚npmï¼Œpipï¼Œcomposerä»¥åŠå…¶ä»–åŸºäºä¾èµ–åˆ—è¡¨æ–‡ä»¶çš„è¯­è¨€ã€‚ </p><br><p> æœ€åï¼Œè¿˜è®°å¾—ï¼Œåœ¨å¼€å§‹æ—¶æˆ‘è°ˆåˆ°äº†Dockeræ„è¯†å½¢æ€â€œä¸€ä¸ªå®¹å™¨-ä¸€ä¸ªè¿›ç¨‹â€å—ï¼Ÿ è¿™æ„å‘³ç€ä¸éœ€è¦ä¸»ç®¡ã€‚ åŒæ ·ï¼Œå‡ºäºç›¸åŒçš„åŸå› ï¼Œè¯·ä¸è¦å®‰è£…systemdã€‚ å®é™…ä¸Šï¼ŒDockeræœ¬èº«å°±æ˜¯ä¸»ç®¡ã€‚ å½“æ‚¨å°è¯•åœ¨å…¶ä¸­è¿è¡Œå¤šä¸ªè¿›ç¨‹æ—¶ï¼Œå°±åƒåœ¨ä¸€ä¸ªä¸»ç®¡è¿›ç¨‹ä¸­å¯åŠ¨å¤šä¸ªåº”ç”¨ç¨‹åºä¸€æ ·ã€‚ <br> ç»„è£…æ—¶ï¼Œæ‚¨å°†åˆ¶ä½œä¸€ä¸ªå›¾åƒï¼Œç„¶åè¿è¡Œæ‰€éœ€æ•°é‡çš„å®¹å™¨ï¼Œä»¥ä¾¿æ¯ä¸ªè¿›ç¨‹å…·æœ‰ä¸€ä¸ªè¿›ç¨‹ã€‚ </p><br><p> ä½†æ˜¯ç¨åä¼šæ›´å¤šã€‚ </p><br><p> è­¦ï¼šä¼¼ä¹å¾ˆæ˜ç™½ã€‚ çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼š </p><br><pre> <code class="plaintext hljs">FROM ruby:2.5.5-stretch WORKDIR /app COPY Gemfile* /app RUN curl -sL https://deb.nodesource.com/setup_9.x | bash - \ &amp;&amp; apt-get -y install libpq-dev imagemagick gsfonts nodejs \ &amp;&amp; gem install bundler \ &amp;&amp; bundle install --without development test --path vendor/bundle \ &amp;&amp; rm -rf /usr/local/bundle/cache/*.gem \ &amp;&amp; apt-get clean \ &amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* COPY . /app RUN rake assets:precompile CMD ["bundleâ€, â€œexecâ€, â€œpassengerâ€, â€œstart"]</code> </pre> <br><p> å®¹å™¨å¯åŠ¨æ—¶ä¼šé‡æ–°å®šä¹‰å®ˆæŠ¤ç¨‹åºå—ï¼Ÿ </p><br><p>  AIï¼šæ˜¯çš„ï¼Œæ²¡é”™ã€‚ é¡ºä¾¿è¯´ä¸€å¥ï¼Œæ‚¨å¯ä»¥åŒæ—¶ä½¿ç”¨CMDå’ŒENTRYPOINTã€‚ è¦äº†è§£æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œè¿™æ˜¯æ‚¨çš„ä½œä¸šã€‚  HabrÃ©ä¸Šæœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸€ç¯‡</a>å…³äºè¯¥ä¸»é¢˜çš„å¥½<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡ç« </a> ã€‚ </p><br><p> æ¥å§ æ‚¨ä¸‹è½½äº†è¯¥æ–‡ä»¶ä»¥å®‰è£…èŠ‚ç‚¹ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯å®ƒå°†å…·æœ‰æ‰€éœ€çš„å†…å®¹ã€‚ æœ‰å¿…è¦æ·»åŠ éªŒè¯ã€‚ ä¾‹å¦‚ï¼Œåƒè¿™æ ·ï¼š </p><br><pre> <code class="plaintext hljs">RUN curl -sL https://deb.nodesource.com/setup_9.x &gt; setup_9.x \ &amp;&amp; echo "958c9a95c4974c918dca773edf6d18b1d1a41434 setup_9.x" | sha1sum -c - \ &amp;&amp; bash setup_9.x \ &amp;&amp; rm -rf setup_9.x \ &amp;&amp; apt-get -y install libpq-dev imagemagick gsfonts nodejs \ &amp;&amp; gem install bundler \ &amp;&amp; bundle install --without development test --path vendor/bundle \ &amp;&amp; rm -rf /usr/local/bundle/cache/*.gem \ &amp;&amp; apt-get clean \ &amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*</code> </pre> <br><p> ä½¿ç”¨æ ¡éªŒå’Œï¼Œå¯ä»¥éªŒè¯æ˜¯å¦ä¸‹è½½äº†æ­£ç¡®çš„æ–‡ä»¶ã€‚ </p><br><p>  Pï¼šä½†æ˜¯ï¼Œå¦‚æœæ–‡ä»¶æ›´æ”¹ï¼Œåˆ™ç¨‹åºé›†å°†æ— æ³•å·¥ä½œã€‚ </p><br><p>  IIï¼šæ˜¯çš„ï¼Œå¥‡æ€ªçš„æ˜¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªä¼˜ç‚¹ã€‚ æ‚¨ä¼šå‘ç°è¯¥æ–‡ä»¶å·²æ›´æ”¹ï¼Œå¹¶ä¸”æ‚¨å¯ä»¥åœ¨é‚£é‡Œçœ‹åˆ°æ›´æ”¹çš„å†…å®¹ã€‚ ä»–ä»¬è¯´ï¼Œæ‚¨æ°¸è¿œä¸ä¼šçŸ¥é“ï¼Œè„šæœ¬ä¼šåˆ é™¤åˆ°è¾¾çš„æ‰€æœ‰å†…å®¹æˆ–æ‰§è¡Œåé—¨æ“ä½œã€‚ </p><br><p> è­¦ï¼šè°¢è°¢ã€‚ äº‹å®è¯æ˜ï¼Œæœ€ç»ˆçš„Dockerfileå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="plaintext hljs">FROM ruby:2.5.5-stretch WORKDIR /app COPY Gemfile* /app RUN curl -sL https://deb.nodesource.com/setup_9.x &gt; setup_9.x \ &amp;&amp; echo "958c9a95c4974c918dca773edf6d18b1d1a41434 setup_9.x" | sha1sum -c - \ &amp;&amp; bash setup_9.x \ &amp;&amp; rm -rf setup_9.x \ &amp;&amp; apt-get -y install libpq-dev imagemagick gsfonts nodejs \ &amp;&amp; gem install bundler \ &amp;&amp; bundle install --without development test --path vendor/bundle \ &amp;&amp; rm -rf /usr/local/bundle/cache/*.gem \ &amp;&amp; apt-get clean \ &amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* COPY . /app RUN rake assets:precompile CMD ["bundleâ€, â€œexecâ€, â€œpassengerâ€, â€œstart"]</code> </pre> <br><p> è­¦ï¼šä¼Šæˆˆå°”Â·ä¼Šä¸‡è¯ºç»´å¥‡ï¼Œè°¢è°¢ä½ çš„å¸®åŠ©ã€‚ ç°åœ¨æ˜¯æˆ‘è·‘æ­¥çš„æ—¶å€™äº†ï¼Œä»Šå¤©æˆ‘éœ€è¦å†è¿›è¡Œ10æ¬¡æäº¤ã€‚ </p><br><p> ä¼Šæˆˆå°”Â·ä¼Šä¸‡è¯ºç»´å¥‡ï¼ˆIgor Ivanovichï¼‰æœ›ç€ä»–åŒ†åŒ†å¿™å¿™çš„åŒäº‹ï¼Œ,äº†ä¸€å£æµ“å’–å•¡ã€‚ åœ¨æ€è€ƒäº†99.9ï¼…çš„SLAå’Œæ— é”™è¯¯çš„ä»£ç å‡ ç§’é’Ÿåï¼Œä»–æå‡ºäº†ä¸€ä¸ªé—®é¢˜ã€‚ </p><br><p>  AIï¼šæ‚¨å°†æ—¥å¿—ä¿å­˜åœ¨å“ªé‡Œï¼Ÿ </p><br><p> è­¦ï¼šå½“ç„¶æ˜¯åœ¨production.logä¸­ã€‚ é¡ºä¾¿è¯´ä¸€å¥ï¼Œæ˜¯çš„ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨æ²¡æœ‰sshçš„æƒ…å†µä¸‹è®¿é—®å®ƒä»¬ï¼Ÿ </p><br><p>  IIï¼šå¦‚æœå°†å®ƒä»¬ä¿ç•™åœ¨æ–‡ä»¶ä¸­ï¼Œåˆ™å·²ç»ä¸ºæ‚¨å‘æ˜äº†ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚  docker execå‘½ä»¤å…è®¸æ‚¨æ‰§è¡Œå®¹å™¨ä¸­çš„ä»»ä½•å‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å°†catç”¨ä½œæ—¥å¿—ã€‚ å¹¶ä½¿ç”¨<em>-it</em>å¼€å…³å¹¶è¿è¡Œbashï¼ˆå¦‚æœ<em>å·²å°†</em>å…¶å®‰è£…åœ¨å®¹å™¨ä¸­ï¼‰ï¼Œæ‚¨å°†è·å¾—å¯¹å®¹å™¨çš„äº¤äº’å¼è®¿é—®ã€‚ </p><br><p> ä½†æ˜¯æ‚¨ä¸åº”è¯¥å°†æ—¥å¿—å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ã€‚ è‡³å°‘ï¼Œè¿™å¯¼è‡´äº†å®¹å™¨çš„ä¸å—æ§åˆ¶çš„å¢é•¿ï¼Œä½†æ˜¯æ²¡æœ‰äººæ—‹è½¬åŸæœ¨ã€‚ æ‰€æœ‰æ—¥å¿—éƒ½éœ€è¦æ‰”åˆ°stdoutä¸­ã€‚ åœ¨è¿™é‡Œæ‚¨å·²ç»å¯ä»¥ä½¿ç”¨<em>docker logså‘½ä»¤</em>æŸ¥çœ‹å®ƒä»¬ã€‚ </p><br><p> è­¦ï¼šä¼Šæˆˆå°”Â·ä¼Šä¸‡è¯ºç»´å¥‡ï¼ˆIgor Ivanovichï¼‰ï¼Œä½†æ˜¯å¯ä»¥å°†æ—¥å¿—ä½œä¸ºç”¨æˆ·æ•°æ®æ”¾å…¥ç‰©ç†èŠ‚ç‚¹ä¸Šçš„æŒ‚è½½ç›®å½•ä¸­å—ï¼Ÿ </p><br><p>  AIï¼šæœ€å¥½ä¸è¦å¿˜è®°åˆ é™¤ä¸‹è½½åˆ°èŠ‚ç‚¹ç£ç›˜çš„æ•°æ®ã€‚ ä½¿ç”¨æ—¥å¿—ï¼Œè¿™ä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œåªè®°å¾—è®¾ç½®å¥½è½®æ¢å³å¯ã€‚ <br> æ‰€æœ‰æ‚¨å¯ä»¥è¿è¡Œã€‚ </p><br><p> è­¦ï¼šä¼Šæˆˆå°”Â·ä¼Šä¸‡è¯ºç»´å¥‡ï¼ˆIgor Ivanovichï¼‰ï¼Œä½†å»ºè®®æ‚¨é˜…è¯»äº›ä»€ä¹ˆï¼Ÿ </p><br><p>  AIï¼šé¦–å…ˆï¼Œè¯·é˜…è¯»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Dockerå¼€å‘äººå‘˜</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å»ºè®®</a> ï¼Œå‡ ä¹æ²¡æœ‰äººæ¯”ä»–ä»¬æ›´äº†è§£Dockerã€‚ </p><br><p> å¦‚æœæ‚¨æƒ³ç»ƒä¹ ï¼Œè¯·<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é›†ä¸­ç²¾åŠ›</a> ã€‚ æ¯•ç«Ÿï¼Œæ²¡æœ‰å®è·µçš„ç†è®ºå°±æ­»äº†ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN452108/">https://habr.com/ru/post/zh-CN452108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN452092/index.html">åº”ç”¨ç¨‹åºå†…æ›´æ–°ï¼šåŠ å¿«Androidåº”ç”¨ç¨‹åºæ›´æ–°</a></li>
<li><a href="../zh-CN452094/index.html">.NETï¼šç”¨äºå¤„ç†å¤šçº¿ç¨‹å’Œå¼‚æ­¥çš„å·¥å…·ã€‚ ç¬¬ä¸€éƒ¨åˆ†</a></li>
<li><a href="../zh-CN452098/index.html">å‰ç«¯å¼€å‘äººå‘˜Habrçš„æ—¥å¿—ï¼šé‡æ„å’Œåæ€</a></li>
<li><a href="../zh-CN452102/index.html">é€‚åˆå–œæ¬¢æ— äººæœºçš„äººçš„ç…§ç‰‡æ¸¸æˆï¼šç®€è¦ä»‹ç»AirSelfie 2</a></li>
<li><a href="../zh-CN452106/index.html">æˆ‘ä»¬é‚€è¯·æ¼”è®²è€…å‚åŠ 2019å¹´6æœˆ16æ—¥ä¸¾è¡Œçš„å¤å­£DIYä¼šè®®</a></li>
<li><a href="../zh-CN452110/index.html">ä½¿ç”¨Ansibleè‡ªåŠ¨æ›´æ¢ç£ç›˜</a></li>
<li><a href="../zh-CN452112/index.html">å®¢æˆ·å…³ç³»ç®¡ç†++</a></li>
<li><a href="../zh-CN452114/index.html">HolyJS 2019ï¼šSEMrushæ±‡æŠ¥ï¼ˆç¬¬1éƒ¨åˆ†ï¼‰</a></li>
<li><a href="../zh-CN452116/index.html">PostgreSQLä¸­çš„ç´¢å¼•-8ï¼ˆRUMï¼‰</a></li>
<li><a href="../zh-CN452118/index.html">ç§‘å­¦å®¶æ‰“ç ´äº†ä¼å°¼å¥‘ç¥ç§˜æ‰‹ç¨¿çš„å¯†ç </a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>