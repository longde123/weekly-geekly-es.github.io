<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äçü§ù‚Äçüë®üèª ‚ñ∂Ô∏è üß¢ El mensajero de todo üë©üèº‚Äç‚úàÔ∏è ü•à ‚ôåÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todos los mensajeros existentes tienen sus pros y sus contras, pero cada uno de ellos tira de la manta a un lado debido a la incompatibilidad con los ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El mensajero de todo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413437/"><p>  Todos los mensajeros existentes tienen sus pros y sus contras, pero cada uno de ellos tira de la manta a un lado debido a la incompatibilidad con los dem√°s, y los usuarios sufren de esto. </p><br><p>  XMPP podr√≠a convertirse en un est√°ndar √∫nico, pero, a diferencia del correo electr√≥nico, apareci√≥ relativamente tarde y no logr√≥ ganar suficiente audiencia para que las corporaciones ya no pudieran rechazarlo.  Despu√©s de todo, r√°pidamente se dieron cuenta de que sin retener a la audiencia dentro de su propio ecosistema, no hay mucho que ganar.  Y adem√°s, debo admitir que XMPP ten√≠a suficientes deficiencias debido a la abundancia de extensiones, muchas de las cuales, a pesar de su importancia, permanecieron en estado experimental, y algunas se duplicaron por completo. </p><br><p>  Despu√©s de haber vivido en el "nuevo mundo maravilloso" de una docena de mensajeros instant√°neos en el tel√©fono inteligente, y haber sentido todas las deficiencias de este estado de cosas, finalmente estamos listos para algo nuevo. </p><br><p>  Y s√≠, ¬°necesitamos un nuevo est√°ndar! <a name="habracut"></a></p><br><p>  Un excelente Future Messenger satisface los siguientes requisitos: garantizar confiabilidad, seguridad, a trav√©s del desarrollo abierto y la descentralizaci√≥n, portabilidad (multiplataforma), multiprotocolo (la capacidad de conectarse a otras redes de comunicaci√≥n) y facilidad de uso. </p><br><h2 id="pochemu-vsyo-tak-ploho">  ¬øPor qu√© todo es tan malo? </h2><br><p>  Pero primero, descubramos por qu√© todos simplemente no cambian a un mensajero centralizado ya popular ==, ya sea un WhatsApp condicional o, por ejemplo, Telegram, que tiene una audiencia considerable en Rusia. </p><br><p>  Por supuesto, la construcci√≥n centralizada permite que los propietarios ganen m√°s dinero y, por lo tanto, no solo paguen por el desarrollo, sino que tambi√©n inviertan dinero significativo en publicidad e incluso en la glorificaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">funciones pr√°cticamente ausentes</a> , como la seguridad del servicio, por ejemplo.  Sin embargo, junto con esto, el propietario puede decidir repentinamente cerrar el servicio, el tractor para mover el cable desde el centro de datos, o simplemente un mensajero puede ser prohibido en el territorio de un determinado pa√≠s.  No necesariamente por razones pol√≠ticas, tal vez, y a petici√≥n de los titulares de derechos de autor condicionales, puede haber muchas razones.  Es bueno si, a pesar del tama√±o insignificante del mercado, Telegram contin√∫a trabajando en Rusia con un √©xito variable, pero esto se debe a las cuentas personales del propietario, y en caso de bloquear el mismo WhatsApp, es poco probable que Facebook invierta mucho para evitar los bloqueos. </p><br><p>  Es dif√≠cil hablar de inmediato para todos los mensajeros centralizados, que se acumulan bajo un peine.  Hay un mal absoluto con un cliente, un servidor y un protocolo patentados que incluso funcionan en algunas de las plataformas m√°s populares y no tienen ning√∫n cifrado.  Tambi√©n hay una bondad relativa, por ejemplo, el Signal messenger, que est√° completamente abierto, pero los servidores no admiten el modo federado, por lo que todos dependen del servidor central con todas las consecuencias que se derivan.  Aqu√≠, la clasificaci√≥n debe llevarse a cabo de acuerdo con un principio diferente, pero esto est√° m√°s all√° del alcance de este art√≠culo. </p><br><p>  Bueno, ¬øpor qu√© no cambiar a algo federal?  Por ejemplo, la misma matriz.  No hablar√© sobre HTTP Long Polling, poca resistencia del servidor y el geek expl√≠cito de la interfaz del cliente: todas estas son tareas solucionables, aunque no triviales (a nivel global, esto no cambia nada).  Me gusta que los desarrolladores tengan en cuenta la experiencia de XMPP y desarrollen especificaciones comunes en lugar de un grupo de XEP independientes, pero esta es solo una de las desventajas de XMPP.  Otro problema es el dispositivo cl√°sico de la red federal, cuando nos vemos obligados a elegir alg√∫n servidor y confiamos en su propietario de que se asegurar√° de que el servidor funcione y no lo cierre.  Y en caso de otra falla del centro de datos, estaremos aislados del mundo, no pudiendo comunicarnos con la cuenta anterior en otro servidor.  Incluso si crea una nueva cuenta, y de alguna manera transfiere la lista de sus contactos desde el servidor anterior, cuando se comunique, tendr√° que confirmar de alguna manera nuevamente que realmente es usted, y no alguien que lo presente. </p><br><p>  En este caso, ¬øtal vez abandone completamente el servidor?  Hay varios mensajeros instant√°neos basados ‚Äã‚Äãen tecnolog√≠a sin servidor.  Un caso especial aqu√≠ es el popular en c√≠rculos estrechos Firechat, que utiliza una red de malla de dispositivos wifi y bluetooth para comunicarse con los usuarios.  Este mensajero realmente funciona bien cuando todos los usuarios se concentran, por ejemplo, en el √°rea.  Pero esta es una situaci√≥n bastante espec√≠fica, e incluso si imaginamos una situaci√≥n en la que cada habitante del planeta instala una aplicaci√≥n, esto crea muchos otros problemas, desde interrupciones de la red de malla por signos geogr√°ficos y la velocidad de intercambio de mensajes con usuarios distantes, hasta la cantidad de datos almacenados necesarios en los dispositivos.  Pero, probablemente, este mensajero es eliminado de la masa total y en nuestra comparaci√≥n es superfluo.  Es m√°s experimental que centrado en el usuario. </p><br><p>  Tambi√©n hay proyectos como Tox que intentan implementar un mensajero p2p.  Este enfoque le permite no preocuparse por la seguridad del servidor, y es casi imposible bloquear dicho mensajero.  Tox tiene muchos problemas, pero este es un proyecto muy interesante que tiene su propio nicho.  No tiene sentido enumerar las desventajas espec√≠ficas de Tox, porque el proyecto se est√° desarrollando y, a pesar del hecho de que los servicios p2p son mucho m√°s dif√≠ciles de desarrollar, si establece una tarea de este tipo, puede encontrar varias arquitecturas interesantes para construir dicha red: con sus propias ventajas y desventajas, diferentes requisitos para el ancho del canal de Internet y la cantidad de espacio en el dispositivo, con supernodos, inicio de sesi√≥n simult√°neo desde diferentes dispositivos e incluso entrega de mensajes fuera de l√≠nea.  Pero lo com√∫n siempre ser√° una importante redundancia de tr√°fico en comparaci√≥n con la arquitectura cliente-servidor y un mayor consumo de bater√≠a en los dispositivos m√≥viles debido a la necesidad de mantener constantemente una gran cantidad de conexiones y varios c√°lculos. </p><br><p>  Por lo tanto, aunque p2p es una tecnolog√≠a interesante, resultar√° ineficaz si, por ejemplo, env√≠a sus coordenadas a los rescatistas, est√° en alg√∫n lugar de un √°rbol en la taiga, casi sin conexi√≥n a Internet y con un 1% de carga de la bater√≠a. </p><br><h2 id="kak-eto-ispravit">  ¬øC√≥mo arreglarlo? </h2><br><p>  Por lo tanto, quiero presentar una arquitectura h√≠brida de cliente-servidor que tom√≥ lo mejor de los enfoques existentes y evit√≥ sus inconvenientes. </p><br><p>  Entonces, para que nuestro messenger con los recursos m√≠nimos necesarios funcione en dispositivos m√≥viles, utilizaremos el modelo cliente-servidor, donde el m√°ximo de operaciones inform√°ticas y recursos demandantes de tr√°fico se concentran en los servidores, y en el lado del cliente, los datos se descifran y se muestran al usuario. </p><br><h3 id="adresaciya">  Direccionamiento </h3><br><p>  Cada usuario recibe su direcci√≥n en el formato de correo electr√≥nico, o XMPP, es decir, apodo @ dominio.  Pero a diferencia de los servicios mencionados anteriormente, la especificaci√≥n de un dominio no tiene el mismo rol de direcci√≥n importante en esta arquitectura. </p><br><p>  Es m√°s probable que los dominios se utilicen como registradores de apodos para descartar la posibilidad de que todos los apodos existentes puedan ser ocupados intencionalmente o no. </p><br><p>  Los dominios cuestan dinero en Internet, lo que no impide el registro masivo, pero reduce significativamente su alcance.  En los servicios centralizados, el acceso a menudo es a trav√©s de un enlace a un tel√©fono m√≥vil, que tampoco es un factor exclusivo, ¬°pero las tarjetas SIM tampoco se toman del aire!  Y a este respecto, por cierto, me pregunto c√≥mo van a combatir esto en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://toxme.io/</a> , un servicio para Tox que le permite asociar teclas largas con un apodo corto.  No veo ninguna raz√≥n por la que no se puedan enviar spam con miles de millones de apodos basura. <br>  Adem√°s, el dominio puede tener sentido para varias cuentas para el hogar y el trabajo.  O para organizar una red corporativa interna. </p><br><p>  Desde el punto de vista del usuario, para escribirle a alguien, necesita conocer su nombre de usuario completo o clave p√∫blica. </p><br><p>  Desde el punto de vista del software del servidor, si se solicita a un usuario su huella digital, el servidor busca en su tabla el inicio de sesi√≥n asociado, si se solicita inmediatamente el inicio de sesi√≥n, respectivamente, se omite este paso.  Luego, se realizan el inicio de sesi√≥n y la direcci√≥n del servidor al que se delega actualmente la cuenta.  Si no hay tales entradas, se considera que la cuenta que se indica despu√©s de @ en el inicio de sesi√≥n es responsable de la cuenta. </p><br><h3 id="profil-polzovatelya">  Perfil de usuario </h3><br><p>  La aplicaci√≥n cliente almacena un perfil de usuario que representa: </p><br><ul><li>  Inicio de sesi√≥n completo del usuario </li><li>  Lista de servidores de respaldo </li><li>  Clave de usuario p√∫blica y privada </li><li>  Informaci√≥n de perfil como lista de contactos, configuraci√≥n de chat y perfil de usuario </li></ul><br><p>  Las claves p√∫blicas de cada usuario se distribuyen entre cada uno de los servidores de la red federada.  El usuario puede iniciar sesi√≥n en cualquiera de los servidores, ya que la autenticaci√≥n no utiliza un hash de contrase√±a almacenado en la base de datos del servidor, sino una clave privada del usuario. </p><br><p>  El procedimiento de autorizaci√≥n es el siguiente: el servidor env√≠a un conjunto aleatorio de datos cifrados con la clave p√∫blica del cliente al cliente, el cliente descifra con su clave privada y env√≠a un hash de los datos descifrados al servidor.  Si los hashes de datos coinciden, el servidor autorizar√° al usuario.  Al mismo tiempo, si el usuario cambi√≥ por √∫ltima vez el servidor al que se realiza la conexi√≥n, todos los servidores de la red federada recibir√°n una notificaci√≥n de la nueva ubicaci√≥n del usuario. </p><br><p>  La ausencia de la necesidad de recordar la contrase√±a (sin embargo, el cliente le permite cifrar la clave privada) simplifica la interacci√≥n con el mensajero y crea el riesgo de perder sus claves.  Para evitar esto, se recomienda duplicarlos a otros dispositivos de usuario.  Nada impide chatear bajo la misma cuenta desde m√∫ltiples dispositivos al mismo tiempo, la √∫nica limitaci√≥n es que todos deben estar conectados al mismo servidor, de lo contrario la arquitectura se volver√° demasiado confusa.  Pero esto no es un gran inconveniente. </p><br><h3 id="dopolnenie-dlya-brauzerov">  Complemento para navegadores </h3><br><p>  Para muchos productos, el punto d√©bil es una aplicaci√≥n web.  Y esta soluci√≥n, por supuesto, tiene muchas desventajas.  Tal chat no se descargar√° mientras est√© desconectado, entonces deber√° esperar una descarga completa y la direcci√≥n puede bloquearse o el servidor puede fallar.  Clasificaci√≥n manual de direcciones: no me gustar√≠a particularmente. </p><br><p>  Y a√∫n no se excluye la opci√≥n de que un atacante piratee una aplicaci√≥n web e incruste c√≥digo que fusionar√° todos sus datos, incluso despu√©s de que la otra parte de la aplicaci√≥n los descifre por usted, y usted ni siquiera lo sepa. </p><br><p>  En este sentido, propongo abandonar la aplicaci√≥n web como tal, y propongo instalar un complemento para el navegador, en el que todas estas deficiencias est√°n ausentes por definici√≥n. </p><br><p>  Adem√°s, la ausencia de la necesidad de que los propietarios de los servidores de configuraci√≥n del cliente web reduzcan el umbral de entrada para crear su servidor.  ¬°Cada hogar tiene su propio servidor! </p><br><h3 id="transporty">  Transportes </h3><br><p>  ¬øQui√©n necesita un mensajero en el que no haya nadie con quien comunicarse?  Hay proyectos interesantes de mensajeros inusuales, pero el problema de la falta de audiencia no les permite ganar al menos algo de popularidad.  Como resultado, la mayor√≠a de las veces los mensajeros con una gran audiencia ganan a√∫n m√°s audiencia, y los mensajeros instant√°neos con una peque√±a audiencia lo pierden.  Y la mayor√≠a de las veces esta situaci√≥n solo puede cambiar una inversi√≥n significativa en publicidad. <br>  Bueno, adem√°s, este estado de cosas requiere la instalaci√≥n de otro mensajero, cuando necesita contactar urgentemente a alguien que no est√° en otras redes. </p><br><p>  Por lo tanto, el servidor debe admitir la operaci√≥n de transportes a redes de terceros. <br>  Si el usuario especifica los datos para conectarse a sus cuentas en otros mensajeros instant√°neos, ver√° personas de las redes que se conect√≥ en sus contactos. <br>  La conexi√≥n a redes de terceros se realiza en el lado del servidor, y en el cliente los contactos se muestran como los m√°s comunes, con m√≠nimas diferencias, por ejemplo, se muestra el icono de la red de donde proviene el usuario. </p><br><p>  Como desventaja, se hace necesario confiar en el servidor con sus datos para conectarse a redes de terceros.  No todos est√°n listos para delegar su autoridad a un servidor de terceros, por lo que debe fomentar la creaci√≥n de sus propios servidores en todos los sentidos. </p><br><h3 id="kriptografiya">  Criptograf√≠a </h3><br><p>  Por supuesto, un dispositivo de red descentralizado no logra prescindir del cifrado de todos los datos transmitidos, porque no podemos estar seguros de que incluso en el servidor que se nos ha confiado, no haya alg√∫n tipo de pesta√±a que combine todos los datos. <br>  Anteriormente ya se indic√≥ que el par de claves del usuario se usa para la autorizaci√≥n, todos los mensajes enviados a otros usuarios tambi√©n se firman con la clave privada del remitente y se cifran con la clave p√∫blica del destinatario. </p><br><p>  No hay nada nuevo aqu√≠, se utilizan herramientas de cifrado GPG est√°ndar. <br>  El problema del cifrado en grupos a√∫n no se ha resuelto, pero probablemente pueda usar el mecanismo utilizado en Signal. </p><br><h2 id="chto-uzhe-sdelano">  Lo que ya se ha hecho </h2><br><p>  Por el momento, ya hemos creado un servidor en Python usando Tornado, que implementa las funciones b√°sicas del messenger, hay una versi√≥n web ligeramente congelada que debe convertirse en una adici√≥n para el navegador, hay una biblioteca en Rust, en base a la cual el cliente opera con una interfaz QML. </p><br><p>  La conexi√≥n al servidor se realiza mediante WebSockets, en el que los datos se serializan de forma predeterminada al formato binario de representaci√≥n de datos CBOR, pero al establecer una conexi√≥n WebSockets, es posible solicitar un formato diferente, por ejemplo, protobuf. </p><br><p>  Tambi√©n considero importante tener en cuenta que el cliente utiliza una divisi√≥n en una lista de chats, ordenados por la fecha de los √∫ltimos mensajes, ampliamente utilizados en los mensajeros instant√°neos modernos, y una lista tradicional, con la clasificaci√≥n de los contactos en categor√≠as.  Con el uso activo del messenger, debe interactuar con una gran cantidad de chats, y se hace dif√≠cil buscarlos en un orden de lista siempre cambiante.  En el mismo Telegram se resuelve parcialmente el problema de anclar los chats seleccionados en la parte superior de la lista, pero esto es solo una soluci√≥n temporal al problema. </p><br><p>  ‚Üí Aqu√≠ est√°n los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorios</a> que contienen nuestras ideas </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413437/">https://habr.com/ru/post/es413437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413427/index.html">Programaci√≥n para ingenieros de redes: trabajar con la configuraci√≥n</a></li>
<li><a href="../es413429/index.html">Estamos escribiendo un complemento para recibir certificados de comod√≠n Let's Encrypt</a></li>
<li><a href="../es413431/index.html">Talleres sobre desarrollo de contratos inteligentes sobre Solidez</a></li>
<li><a href="../es413433/index.html">El 65% de los profesionales de TI rusos quieren trabajar en el extranjero.</a></li>
<li><a href="../es413435/index.html">La herencia m√°s all√° de la gen√©tica</a></li>
<li><a href="../es413439/index.html">La memoria del agua, "c√≥mo cargar agua en la televisi√≥n" y otros mitos sobre el agua viva y muerta</a></li>
<li><a href="../es413441/index.html">C√≥mo implementar Minishift en su computadora port√°til y comenzar a vivir</a></li>
<li><a href="../es413443/index.html">Concurso HackBattle 2.0 en Positive Hack Days: c√≥mo fue atacada la cafeter√≠a de la escuela ICO</a></li>
<li><a href="../es413445/index.html">Microsoft inund√≥ el centro de datos en el Mar del Norte durante 5 a√±os</a></li>
<li><a href="../es413447/index.html">BMW ConnectedDrive o "Puedes hablar de ello durante mucho tiempo"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>