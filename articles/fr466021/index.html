<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üàÅ üë©‚Äç‚úàÔ∏è üëáüèº Comment j'ai appris √† Yandex Alice √† parler de jouets sexuels ü§ôüèø üßë‚Äçü§ù‚Äçüßë üí™üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous int√©grons Yandex.Alisa et les sex-shops via Spring Boot. 

 Le sujet des assistants vocaux prend de l'ampleur, et j'ai d√©cid√© de rejoindre cette ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment j'ai appris √† Yandex Alice √† parler de jouets sexuels</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466021/">  Nous int√©grons Yandex.Alisa et les sex-shops via Spring Boot. <br><br>  Le sujet des assistants vocaux prend de l'ampleur, et j'ai d√©cid√© de rejoindre cette tendance, en int√©grant le plus grand fournisseur en gros de biens intimes et Yandex.Alisa. <br><a name="habracut"></a><br>  <b>Id√©e</b> : le fournisseur a des comptes personnels des propri√©taires de boutiques en ligne, et il est n√©cessaire de fournir des donn√©es analytiques du fournisseur via le canal vocal d'Alice. <br><br>  L'int√©gration se composait de deux parties: <br><br><ul><li>  Int√©gration du service web et de l'API REST du fournisseur de marchandises. </li><li>  Int√©gration de Yandex.Alice et d'un service Web pour le traitement des demandes des utilisateurs. </li></ul><br><h2>  Int√©gration du service web et de l'API REST du fournisseur de marchandises </h2><br>  Le service doit comprendre exactement ce que l'utilisateur a demand√© et demander ces donn√©es au serveur du fournisseur.  Nous avons d√©cid√© d'√©crire un service sur Spring Boot. <br><br><h3>  Configuration du projet </h3><br>  Nous cr√©ons un r√©f√©rentiel dans Git et en utilisant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">spring initializr nous</a> d√©ployons le projet sur spring boot (nous sp√©cifions le web dans les d√©pendances). <br><br>  La demande au service est au format JSON.  Il a une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">structure bien document√©e</a> , donc g√©n√©rer des classes est assez simple: <br><br><img src="https://imageshack.com/i/plcr0ysAp" alt="image"><br><br>  De mani√®re pratique, les mots cl√©s sont mis en surbrillance dans la demande, comme une adresse reconnue.  Ils sont situ√©s dans le bloc <code>‚Äúentities‚Äù</code> : <br><br><img src="https://imageshack.com/i/pm0Cso3Sp" alt="image"><br><br>  Mais dans notre cas, il √©tait plus pratique d'utiliser le champ <code>Command</code> .  Il contient le texte dict√© par l'utilisateur.  √âtant donn√© que le service d'int√©gration est engag√© dans la reconnaissance du sens, nous devons analyser les demandes.  Ils sont bien s√©parables les uns des autres (demandes de commandes pass√©es, demandes de commandes en cours de traitement), nous avons donc d√©cid√© d'utiliser des expressions r√©guli√®res pour les analyser. <br><br>  L'int√©gration avec le fournisseur a √©t√© impl√©ment√©e via la biblioth√®que Apache httpclients et la d√©s√©rialisation des r√©ponses XML via jaxb. <br><br>  Nous avons donc tri√© la demande et demand√© des donn√©es au fournisseur.  Mais Alice est une fille stricte et n'acceptera donc pas notre r√©ponse au plus tard trois secondes plus tard.  Et l'utilisateur peut souhaiter obtenir une description comparative de son magasin au cours des deux derni√®res ann√©es, ce qui prendra plus de temps.  Pour r√©soudre ce probl√®me, nous avons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">activ√© la</a> mise en cache via la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ehCache</a> et configur√© le chargement des donn√©es utilisateur.  Face √† une nouvelle nuance: Alice ne donne presque aucune donn√©e utilisateur personnalis√©e.  Autrement dit, vous ne voyez m√™me pas de courrier √©lectronique dans la demande entrante.  Il n'y a que userId qui affiche l'identifiant unique du p√©riph√©rique.  Il a √©t√© fait la cl√© pour identifier les utilisateurs. <br><br>  La cl√© est l√†, le cache est, il reste √† comprendre quand y charger des informations.  L'utilisateur ne demande pas imm√©diatement de donn√©es, mais lance d'abord la comp√©tence (c'est le terme utilis√© dans Alice, j'en parlerai plus loin ci-dessous).  Pour le serveur, cela ressemble √† une demande avec une balise de <code>Command</code> vide.  √Ä ce stade, vous pouvez commencer √† t√©l√©charger les donn√©es client, puis au moment de l'envoi de la premi√®re demande utilisateur, toutes les donn√©es ont d√©j√† √©t√© t√©l√©charg√©es sur notre service. <br><br>  Pour des tests complets et des travaux suppl√©mentaires dans la prod, nous avons d√©cid√© de d√©ployer l'application dans le cloud sur Heroku.  Pour ce faire, acc√©dez au site Web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Heroku</a> , inscrivez-vous, t√©l√©chargez heroku cli et installez-le.  Ouvrez ensuite la console et entrez la <code>heroku login</code> .  Allez dans le r√©pertoire avec le projet cd ~ / myapp et ex√©cutez <code>heroku create</code> . <br><br>  Lorsque vous cr√©ez l'application, Git cr√©e un r√©f√©rentiel distant nomm√© heroku, qui est associ√© √† votre r√©f√©rentiel Git local.  Par d√©faut, Heroku g√©n√®re un nom al√©atoire sur le serveur pour votre projet.  Vous pouvez le remplacer en passant le nom de l'application √† l'aide de <code>heroku create myapp</code> . <br><br>  Pour v√©rifier le lancement de l'application, ex√©cutez la commande. <br><br> <code>heroku ps:scale web=1</code> <br> <br>  Et si vous devez suivre le chemin ¬´/¬ª, nous <code>heroku open</code> . <br>  Le premier point d'int√©gration est pr√™t. <br><br><h2>  Int√©gration de Yandex.Alice et service de traitement des demandes </h2><br>  Nous mettons en ≈ìuvre l'int√©gration par la cr√©ation de la soi-disant comp√©tence sur la plateforme Yandex.  Tout d'abord, inscrivez-vous dans Yandex, puis acc√©dez √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la page du d√©veloppeur</a> .  Cliquez sur "cr√©er un dialogue" et s√©lectionnez le type de dialogue: <br><br><img src="https://imageshack.com/i/pldC2gG5p" alt="image"><br><br>  Sur l'onglet "Param√®tres" et vous devez remplir les champs: <br><br><img src="https://imageshack.com/i/poWuOxHUp" alt="image"><br><br><ul><li>  Nom de la <b>comp√©tence</b> - le nom qui sera affich√© dans le catalogue d'Alice.  Avec elle, l'utilisateur pourra activer la comp√©tence, par exemple, "Lancer la comp√©tence [Nom de la comp√©tence]". </li><li>  <b>Nom d'activation</b> - ici, vous pouvez sp√©cifier diverses options pour acc√©der √† la comp√©tence.  Par d√©faut, une option pour le nom d'activation est le nom de la comp√©tence. </li><li>  <b>Un exemple de demande</b> est une phrase par laquelle Alice active cette comp√©tence.  Les demandes seront pr√©sent√©es sous forme de boutons dans l'annuaire apr√®s publication. </li><li>  <b>URL du Webhook</b> - vous devez sp√©cifier l'URL de notre service Web qui traitera les demandes des utilisateurs. </li><li>  Yandex.Cloud - Yandex peut accorder une subvention √† son cloud, mais nous d√©ploierons le service sur heroku, donc nous ne le cochons pas. </li><li>  <b>Voix</b> - ici, vous pouvez choisir la voix que votre comp√©tence parlera.  Il existe diff√©rentes variantes d'hommes et de femmes.  Mais cela vaut la peine de consid√©rer que l'utilisateur dira tr√®s probablement: "Alice, lance la comp√©tence", et si Alice r√©pond avec le baryton masculin, cela peut √™tre quelque peu d√©routant. </li><li>  <b>Limitations sur les plates-formes utilis√©es</b> - si un √©cran est n√©cessaire lorsque vous travaillez avec une comp√©tence.  Dans notre cas, non, alors ne cochez pas. </li><li>  <b>Confidentialit√©</b> - cochez la case si vous ne voulez pas que la comp√©tence soit refl√©t√©e dans le catalogue. </li><li>  <b>Site de v√©rification de la marque</b> - L'adresse du site pour la comp√©tence.  La comp√©tence pour laquelle vous avez rempli ce champ ne sera mod√©r√©e que si vous avez confirm√© les droits sur le site sp√©cifi√© dans Yandex.Webmaster. </li><li>  <b>Cat√©gorie</b> - dans notre cas, c'est ¬´affaires et finances¬ª. </li><li>  <b>Description</b> - pourquoi avez-vous besoin de vos comp√©tences.  La description des comp√©tences sera affich√©e dans le catalogue des comp√©tences et sera disponible pour les utilisateurs. </li><li>  <b>Notes pour le mod√©rateur</b> - peut-√™tre le domaine le plus int√©ressant.  Pour entrer dans le catalogue, la comp√©tence doit √™tre mod√©r√©e, ce qui signifie qu'elle doit respecter certaines r√®gles d√©crites ici.  Dans ce champ, vous pouvez d√©crire le processus de test.  Par exemple, comment passer par l'autorisation et un sc√©nario utilisateur typique. </li><li>  <b>Restrictions d'√¢ge</b> - malgr√© l'objet de la comp√©tence, nous transmettrons des donn√©es adapt√©es √† tout groupe d'√¢ge.  Par cons√©quent, ne cochez pas. </li><li>  <b>L'ic√¥ne</b> est un must :) </li></ul><br>  Enregistrez la bo√Æte de dialogue.  Toutes les modifications apport√©es au param√®tre de comp√©tence ne prennent effet qu'apr√®s avoir cliqu√© sur le bouton "Enregistrer". <br><br>  Nous avons configur√© l'int√©gration, √©crit le service, vous pouvez maintenant le tester. <br><br>  Acc√©dez √† l'onglet "Test". <br><br><img src="https://imageshack.com/i/plnhhATFp" alt="image"><br><br>  Ici, vous pouvez v√©rifier les performances de la comp√©tence.  Pour des raisons de commodit√©, nous avons ajout√© un acc√®s rapide aux boutons de fonction √† la comp√©tence. <br><br>  Il y a des limites: vous ne pouvez pas v√©rifier la comp√©tence pour l'exactitude de la phrase de d√©part et vous ne pouvez pas v√©rifier l'entr√©e / sortie vocale.  Et s'il ne devrait pas y avoir de probl√®me avec la phrase, la prononciation correcte des r√©ponses ne sera v√©rifi√©e qu'apr√®s la publication de la comp√©tence. <br>  Apr√®s tous les tests, la comp√©tence peut √™tre envoy√©e pour mod√©ration.  Pour ce faire, allez dans l'onglet "Informations g√©n√©rales" et cliquez sur "Mod√©ration". <br><br><img src="https://imageshack.com/i/pmBBZRvtp" alt="image"><br><br>  Apr√®s la mod√©ration, le bouton Publier appara√Ætra √† la place de ce bouton.  Apr√®s la publication, la comp√©tence appara√Ætra dans le catalogue officiel Yandex. <br><br><h2>  Caract√©ristiques et limitations </h2><br>  Pour le moment, les comp√©tences sont quelque peu distinctes d'Alice elle-m√™me (je dois dire ¬´lancer la comp√©tence¬ª), ce qui rend difficile de percevoir Alice comme une assistante vocale √† part enti√®re.  Ce serait formidable de fa√ßonner votre contexte de comp√©tences et de poser des questions directement √† Alice.  Il n'y a aucun moyen d'obtenir des informations utilisateur autres que userId, qui est l'identifiant du p√©riph√©rique.  Par cons√©quent, chaque appareil doit √™tre r√©-autoris√©, ce qui rend difficile le stockage d'une seule session utilisateur.  De plus, la comp√©tence ne peut pas envoyer de messages push, elle ne fonctionnera donc pas pour cr√©er la comp√©tence de rappel. <br><br>  D'un autre c√¥t√©, les comp√©tences peuvent √™tre une bonne plate-forme pour mettre en ≈ìuvre la commande vocale, par exemple, les appareils √©lectrom√©nagers.  En outre, la comp√©tence peut √™tre utile pour la formation ou la r√©alisation d'exp√©riences, pour clarifier les informations sur les commandes, les prix, etc.  En g√©n√©ral, o√π les utilisateurs peuvent poser une question exacte courte ou donner une commande courte. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466021/">https://habr.com/ru/post/fr466021/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr465995/index.html">LDC - Excursion</a></li>
<li><a href="../fr466001/index.html">"Mobile" Feng Shui, ou on dort correctement (caf√©, cafards et intol√©rances sur Habr√©)</a></li>
<li><a href="../fr466015/index.html">Un peu plus sur la trigonom√©trie en informatique</a></li>
<li><a href="../fr466017/index.html">Livy - le maillon manquant de la cha√Æne Hadoop Spark Airflow Python</a></li>
<li><a href="../fr466019/index.html">ABBYY Mobile Web Capture: des photos de documents de haute qualit√© directement dans le navigateur de votre smartphone</a></li>
<li><a href="../fr466027/index.html">Le livre "The Way of Python. Ceinture noire pour le d√©veloppement, la mise √† l'√©chelle, les tests et le d√©ploiement ¬ª</a></li>
<li><a href="../fr466029/index.html">Comment transformer un ordinateur quantique en un g√©n√©rateur de nombres al√©atoires parfait</a></li>
<li><a href="../fr466031/index.html">La mission √©pique de DeepMind pour r√©soudre le probl√®me scientifique le plus complexe</a></li>
<li><a href="../fr466033/index.html">Comment attirer une √©quipe dans le processus de recherche d'id√©es et obtenir bien plus que des id√©es</a></li>
<li><a href="../fr466039/index.html">Biblioth√®ques PHP pour le commerce √©lectronique: travailler avec ATOL et Payture, analyser les codes GS1 et autres t√¢ches</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>