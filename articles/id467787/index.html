<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤚🏾 👲 💫 Cara mengatur pencarian alamat dengan koordinat (dan ke mana mendapatkan direktori yang diperlukan) 🛥️ 😿 💈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada musim semi, kami menambahkan fitur "Reverse Geocoding" ke API DaData.ru, yang juga disebut " Alamat oleh Koordinat ". Namanya mengisyaratkan: met...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara mengatur pencarian alamat dengan koordinat (dan ke mana mendapatkan direktori yang diperlukan)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hflabs/blog/467787/"><img src="https://habrastorage.org/webt/_w/mf/y5/_wmfy5eag0qfwexxhm4qerr0-64.jpeg"><br><br>  Pada musim semi, kami menambahkan fitur "Reverse Geocoding" ke API DaData.ru, yang juga disebut " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Alamat oleh Koordinat</a> ".  Namanya mengisyaratkan: metode ini mengambil geocoordinate dan memberikan data tentang alamat. <br><br>  Produk padat dengan fungsi yang sama menawarkan Yandex - disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Geocoder</a> .  Tetapi layanan Yandex gratis hanya untuk proyek non-komersial terbuka.  Tarif standar - mulai 120 000 ₽ per tahun - tidak cocok untuk semua orang. <br><br>  Kami pikir - jika Anda membuat alternatif gratis atau murah untuk "Geocoder", pengembang mungkin akan mengucapkan terima kasih.  Dan mereka melakukannya.  Dalam artikel ini saya akan memberi tahu Anda bagaimana struktur "Alamat oleh Koordinat" bekerja: bagaimana kami mengatur pencarian, menyusun direktori dan mengemasnya menjadi metode yang sudah jadi. <br><a name="habracut"></a><br><h2>  Di mana kami mendapatkan data dan bagaimana kami mencari alamatnya </h2><br>  Mendekati tugas, kami mempelajari solusi yang sudah jadi: di mana mendapatkan direktori koordinat dengan alamat dan cara mencari objek geografis dari direktori ini.  Ternyata Anda bahkan tidak perlu pergi jauh untuk alat yang tepat. <br><br>  <b>Kami mengambil objek alamat di FIAS</b> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sistem Alamat Informasi Federal</a> .  Ini adalah direktori alamat terbuka dan resmi paling komprehensif.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kami sudah menulis</a> tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Habré</a> secara detail, dan sekarang empat fakta penting: <br><br><ul><li>  FIAS menyimpan semua objek yang dapat dialamatkan di negara itu, dari daerah dan di bawah - ke bangunan dan wilayah tambahan; </li><li>  direktori tersedia secara bebas dalam format DBF dan XML; </li><li>  FIAS tidak sempurna - tidak memiliki puluhan ribu rumah dan banyak jalan, terutama yang baru; </li><li>  Setiap objek alamat dalam direktori sesuai dengan kode ID - FIAS unik.  Kode objek terkadang diubah, tetapi untuk artikel kami ini tidak begitu penting. </li></ul><br>  Objek alamat yang diunduh dari FIAS bersama ID adalah dasar dari direktori kami untuk geocoding terbalik. <br><br>  <b>Unduh koordinat dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">OpenStreetMap</a> (OSM).</b>  OSM adalah proyek dengan lisensi gratis: penggemar mengumpulkan koordinat berbagai objek dan mempostingnya kepada semua orang. <br><br>  Secara sederhana, OSM adalah sekumpulan titik, garis, dan poligon pada peta.  Setiap objek memiliki deskripsi, jenis, dan set koordinatnya sendiri.  Data OSM untuk Rusia terletak di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">needgeo.com</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">osm.sbin.ru/osm_dump/</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">osmosis.svimik.com/latest/</a> . <br><br><img src="https://habrastorage.org/webt/ws/p6/hy/wsp6hyjy8brd4qmc11clfyoulic.png"><br>  <sub>Daftar sumber diterbitkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pada halaman khusus pada "Wiki" proyek</a></sub> <br><br>  Bongkar terdiri dari file PBF - format ini digunakan bukan XML sebagai yang lebih kompak.  Mengubah PBF menjadi OSM XML tidak memerlukan biaya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">banyak utilitas yang disetujui komunitas dapat</a> menangani hal ini. <br><br>  Untuk direktori kami sendiri, kami mengambil objek alamat dari FIAS, dan kemudian mencari koordinatnya di OSM.  Jika ditemukan, simpan data gabungan.  Ternyata persimpangan seperti FIAS dan OSM. <br><br>  Dan semua ini luar biasa, tetapi ada satu masalah: semuanya tidak mudah dengan kualitas data di OSM.  Koordinat objek seringkali tidak sesuai dengan kenyataan.  Misalnya, poligon untuk daerah dan kabupaten sudah memadai.  Tetapi untuk kota dan di bawah - tidak begitu banyak. <br><br><img src="https://habrastorage.org/webt/dc/hn/uh/dchnuhisbetq44m1uyd8sniuy20.png"><br>  <sub>Poligon adalah poligon yang membatasi area pada peta.</sub>  <sub>Mereka terdiri dari serangkaian titik yang terhubung dengan koordinat.</sub>  <sub>Poligon menunjukkan batas wilayah, kabupaten, kota, dan bahkan bangunan</sub> <br><br>  Pekerjaan utama, dan dengan margin yang luas, adalah untuk mengumpulkan data yang memadai dari OSM dan menyingkirkan pernikahan.  Tugas ini sangat banyak sehingga saya mendedikasikan bagian terpisah untuk itu dalam artikel. <br><br>  <b>Kami juga mengunduh rumah yang tidak ada dalam FIAS dari OSM.</b>  Seperti yang saya katakan di atas, ada puluhan ribu rumah di FIAS.  Ini bahkan bukan masalah, tetapi hanya kenyataan, latar belakang.  Karena itu, kami mengisi direktori kami dengan rumah-rumah dari OSM.  Tapi hanya mereka yang ada jalan di FIAS.  Bangunan yang berasal dari OSM tidak memiliki ID FIAS, jadi kami mengidentifikasikannya sebagai <i>kode rumah + nomor FIAS induk</i> . <br><br>  <b>Dalam direktori yang kami cari dengan bantuan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lucene yang</a> cantik</b> - asisten jangka panjang kami.  Terima kasih atas tipnya, kepada orang India yang fasih yang menulis pos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengindeksan Data Geografis Dengan Lucene</a> (tambahan yang baik adalah materi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Iklan spasial ke dalam algoritma pencarian spasial</a> - tentang pohon-pohon kd di mana <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">algoritma pencarian</a> dibangun). <br><br>  Segera setelah kami mengetahui tentang Lucene, masalah pencarian diselesaikan hampir dengan sendirinya.  Bisnis tetap - pergi untuk amplas. <br><br><ol><li>  Kami memuat di Lucene direktori koordinat dan alamat Anda, mendapat indeks pencarian.  Untuk memudahkan, hampir semuanya telah dihapus darinya, hanya menyisakan ID dan koordinat alamat. </li><li>  Kami menyiapkan pencarian berdasarkan indeks: input - koordinat, output - ID objek alamat yang ditemukan.  Pencarian tidak menghasilkan informasi lain, karena indeks benar-benar dipersingkat. </li><li>  Puas penerbitan, memuat data dari FIAS "besar" oleh ID yang ditemukan.  Kami menambahkan banyak segalanya, mulai dari alamat yang dibutuhkan semua orang dalam satu baris hingga tanda ibukota regional kota. </li><li>  Kami menemukan cara menyortir dan memberikan objek yang diterima. </li></ol><br>  Sejauh ini, semuanya terlihat sederhana, tetapi ini hanya sebagian kecil dari pekerjaan.  Tidak ada pencarian untuk alamat berdasarkan koordinat yang akan berhasil, jika kami tidak menyusun direktori yang layak. <br><br><h2>  Cara mengumpulkan basis koordinat dan alamat </h2><br>  Untuk memulai, saya akan meletakkan koper: setelah membaca artikel, lakukan dengan cepat buku pegangan seperti itu tidak berfungsi.  Kami telah mengumpulkannya sejak 2014, terus-menerus menambahnya.  Saya akan berbicara tentang ini sangat jauh. <br><br>  Bagian tersulit ketika menyusun direktori adalah memilah koordinat yang berasal dari OSM.  Pada awalnya, kami memverifikasi mereka sebaik mungkin, termasuk dengan tangan kami.  Tujuan utamanya adalah untuk mendapatkan poin referensi di kota-kota besar dan membuat panduan referensi dari mereka.  Sekarang ada banyak titik seperti itu, hampir tidak perlu secara manual memeriksa data baru.  Pada suatu waktu, kami menambahkan 200.000-300.000 alamat dengan koordinat ke direktori referensi, dan inilah cara kami melakukannya. <br><br>  <b>Kami membentuk alamat lengkap dari tag OSM.</b>  Dalam unggahan OSM, bagian komponen alamat disebarkan oleh berbagai tag: <br><br><ul><li>  <i>addr: kota - desa Bulatnikovo</i> ; </li><li>  <i>addr: street - Central street</i> ; </li><li>  <i>addr: housenumber - 103</i> . </li></ul><br>  Kami membaca tag dan mengumpulkan alamat lengkap dari mereka: <i>desa Bulatnikovo, 103 Central Street</i> . <br><br>  <b>Kami menjalankan setiap alamat baru melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">API standardisasi Dadat</a> .</b>  Layanan ini mengubah alamat menjadi format tunggal "Suka dalam FIAS": <br><br><ul><li>  mengoreksi kesalahan ketik; </li><li>  menerjemahkan singkatan seperti "NiNo" dan "Msk"; </li><li>  mengubah nama lama menjadi yang baru; </li><li>  menemukan kota yang hilang dalam alamat berdasarkan indeks; </li><li>  mendefinisikan kode FIAS. </li></ul><br>  Alamat dari API bersih, meskipun sekarang mereka mengirim surat atau paket. <br><div class="scrollable-table"><table><tbody><tr><th>  Sebelum standardisasi </th><th>  Setelah </th></tr><tr><td>  <i>Desa Bulatnikovo, Central Street, 103</i> </td><td><p>  <i>142718, wilayah Moskow, distrik Leninsky, dengan Bulatnikovo, Central St., 103.</i> </p><br><p>  Kode FIAS - <i>a8b6a52f-e96d-4ec3-a0ff-641013ab0445</i> </p></td></tr></tbody></table></div>  Kami menyimpan rumah, jalan, dan pemukiman standar sebagai satu titik.  Untuk jalan dan desa, titik ini adalah pusatnya.  Akibatnya, semua objek alamat berada di tabel yang sama, di dalam - alamat, ID FIAS, lintang dan bujur. <br><div class="scrollable-table"><table><tbody><tr><th>  Alamatnya </th><th>  ID FIAS </th><th>  Lintang </th><th>  Bujur </th></tr><tr><td>  <i>142718, wilayah Moskow, distrik Leninsky, dengan Bulatnikovo, Central St., 103</i> </td><td>  <i>a8b6a52f-e96d-4ec3-a0ff-641013ab0445</i> </td><td>  <i>55.558773</i> </td><td>  <i>37.667103</i> </td></tr><tr><td>  <i>119034, Moskow, jalur Turchaninov, d 6 bldg. 2</i> </td><td>  <i>8c925e61-9173-48b3-999e-dc85c86d89e7</i> </td><td>  <i>55.737096</i> </td><td>  <i>37.597190</i> </td></tr></tbody></table></div>  <b>Kami menganalisis alamat yang tidak distandarisasi oleh Dadata.</b>  Alamat yang tidak dapat dicocokkan dengan FIAS ditandai dengan bendera oleh layanan.  Kami memeriksanya secara manual, ada beberapa opsi. <br><br><ol><li>  Alamatnya tidak datang dalam tag unggah OSM yang tepat, tetapi iblis tahu di mana.  Bertemu dan tidak mengisi tag alamat, dan kota di tag jalan, dan banyak lagi. </li><li>  Di OSM terletak objek eksotis seperti taman bermain, lapangan sepak bola perguruan tinggi atau bahkan kuburan.  Tidak ada yang seperti ini di FIAS, dan untuk tujuan kami hasil ini tidak cocok.  Objek seperti itu hanya disaring. </li><li>  Kesalahan - dan bukan kesalahan sama sekali.  Misalnya, distrik kota yang tidak ada di FIAS berasal dari OSM.  Atau di OSM, objek tersebut terletak di pemukiman, tetapi dalam FIAS pemukiman ini dilampirkan ke kota dan dihapus.  Kemudian kami menyelesaikan algoritme untuk data yang dimuat dan menjalankannya kembali. </li></ol><br><img src="https://habrastorage.org/webt/_u/yc/1u/_uyc1uds-xef7yiwtpu01vgk7ju.png"><br>  <sub>Mengurai pembongkaran, dan di sana - kebingungan dalam tag</sub> <br><br>  <b>Kami memeriksa seberapa memadai koordinat yang dimuat.</b>  Untuk melakukan ini, kita melihat dengan utilitas khusus apakah koordinat objek baru jatuh ke dalam poligon wilayah induk atau distrik.  Jika alamat menginformasikan bahwa objek tersebut terletak di wilayah Omsk, harap berbaik hati untuk masuk ke tempat pembuangan sampah.  Masuk ke kota tidak diperlukan - tidak semua kota secara akurat dicakup dalam OSM, bagi banyak orang, data tidak diperbarui. <br><br>  Kami memuat referensi poligon dari OSM dan menyimpannya apa adanya - dalam format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GeoJSON</a> .  Untuk memilih poligon mana yang akan dicoba pada suatu titik, lihat di tabel terpisah.  Di dalamnya, kami membandingkan awalan kode CLADR dan ID poligon: Anda menemukan kode CLADR untuk alamat dan Anda melihat poligon mana yang harus dipilih. <br><br><img src="https://habrastorage.org/webt/f_/ud/tt/f_udtt5i_rael-f2i8exqc-4k0g.png"><br>  <sub>Kode KLADR adalah pengidentifikasi unik yang digunakan sebelum FIAS.</sub>  <sub>Sejuta layanan dapat menemukan kode ini untuk alamat</sub> <br><br>  Utilitas memungkinkan objek untuk berdiri 1.700 meter dari TPA.  Aturan ini ditambahkan karena jalan raya yang sering melampaui batas wilayah.  Tetapi jarak yang lebih besar dari 1.700 meter adalah tanda kesalahan, kata statistik. <br><br>  Untuk ini untuk kota dan jalan-jalan, cek berakhir. <br><br>  <b>Sekali lagi, lebih tepatnya, kami memeriksa koordinat rumah yang dimuat.</b>  Utilitas yang disebutkan kembali berperan, dan inilah fungsinya. <br><br><ol><li>  Dia mengambil alamat rumah baru dan menemukan tetangga untuknya di direktori referensi. </li><li>  Menurut koordinat, itu mempertimbangkan jarak antara rumah baru yang belum diverifikasi dan tetangga yang dapat diandalkan. </li></ol><br><img src="https://habrastorage.org/webt/sx/vx/y-/sxvxy-u2l54hlaggzda0zx8u-tw.jpeg"><br>  <sub>Sangat mudah untuk menemukan tetangga: 1. Kami mengambil rumah baru dan menemukan ID FIAS induk.</sub>  <sub>2. Kami memilih dari rumah direktori referensi yang orang tuanya memiliki ID FIAS yang sama</sub> <br><br>  Inspeksi hanya dilakukan di rumah, yang berjarak tidak lebih dari 150 meter dari kolega yang andal.  Selain itu, kami mempertimbangkan setiap rumah baru yang disetujui ketika menganalisis yang berikut.  Begini cara kerjanya. <br><br>  Misalkan, dalam panduan referensi, rumah <i>No. 1, 2, dan 3</i> disimpan di <i>sepanjang Jalan Kommunarov</i> .  Dalam data baru datang rumah <i>No 5, 6 dan 7</i> di jalan yang sama.  Dilihat oleh koordinat, rumah-rumah baru di dekatnya.  Utilitas melihat bahwa <i>nomor</i> rumah <i>5</i> berada di sebelah <i>nomor</i> rumah <i>1, 2, dan 3</i> dan menambahkannya ke direktori referensi.  Jadi, rumah <i>nomor 6 dan 7</i> juga sedang diuji. <br><br>  Dan kemudian nasib data yang berasal dari OSM diputuskan: <br><br><ul><li>  rumah yang telah melewati kedua pemeriksaan: untuk tempat pembuangan sampah dan untuk tetangga, kami menambah direktori referensi; </li><li>  jika objek tidak jatuh ke dalam poligon, data baru tidak cocok.  Sama jika jarak antara rumah dan tetangga terlalu besar; </li><li>  rumah yang tidak memiliki tetangga, kami sedang menunda.  Mereka terletak di database yang terpisah, suatu hari nanti kita akan menganalisis. </li></ul><br>  <b>Kami membagi benda yang diuji menjadi dua bagian.</b>  Mereka akan pergi ke berbagai pelat manual referensi kami. <br><br><img src="https://habrastorage.org/webt/60/mh/30/60mh30nzsamn2rv_gegjgooqusy.png"><br>  <sub>Di tabel pertama - semua objek dengan ID FIAS ke rumah: wilayah, pemukiman, jalan-jalan.</sub>  <sub>Di kedua - di rumah dan tautan ke induk dari tabel pertama</sub> <br><br>  Diperlukan dua tabel untuk menetapkan kunci ke rumah-rumah yang hilang dari FIAS.  Mereka tidak memiliki kode FIAS sendiri, jadi inilah caranya: <br><br><ul><li>  kami mengumpulkan objek alamat ke rumah dalam satu tabel, masing-masing memiliki kode FIAS sendiri; </li><li>  di kedua - hanya di rumah, sambil merujuk ke orang tua di tabel pertama. </li></ul><br>  Sebagai hasil dari bangunan tanpa kode FIAS, kami mengidentifikasi <i>ID + nomor rumah</i> orang <i>tua</i> menggunakan kunci <i>FIAS</i> . <br><br>  <b>Referensi sudah siap, masih harus diuji.</b>  Kami menjalankan layanan uji fungsional semalam dan menguji kinerja.  Kami memeriksa kecepatan di Moskow, meminta semua rumah dalam radius tiga kilometer.  Yang pasti.  Tentu saja, mereka menutupi semuanya dengan autotest. <br><br>  Hal utama setelah pembaruan adalah tidak menjadi lebih buruk. <br><br><h2>  Membalik geocoding melalui mata pengguna </h2><br>  Metode input mengambil tiga parameter: koordinat, jumlah hasil, dan radius pencarian.  Jari-jari default adalah 100 meter, maksimum adalah satu kilometer.  Nilai persisnya diatur dalam pengaturan. <br><br><pre><code class="java hljs">curl -X POST \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: Token ${API_KEY}"</span></span> \ -d <span class="hljs-string"><span class="hljs-string">'{ "lat": 55.878, "lon": 37.653, "radius_meters": 50 }'</span></span> \ https:<span class="hljs-comment"><span class="hljs-comment">//suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address</span></span></code> </pre> <br>  Metode mengembalikan objek yang ditemukan: rumah, jalan, dan permukiman.  Ini memilah mereka dalam urutan akurasi menurun. <br><br><ol><li>  Di rumah </li><li>  Jalanan. </li><li>  Permukiman. </li><li>  Kota </li></ol><br>  Kemudian memilah lagi - dengan jarak dari koordinat yang diberikan.  Jika metode ini telah menemukan empat rumah dan satu jalan, rumah-rumah pertama akan berdiri dalam urutan jarak dari titik tertentu.  Di belakang mereka ada jalan. <br><br>  Setelah semua kastil ini, metode akhirnya mengembalikan objek yang ditemukannya. <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"suggestions"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">" ,  ,  11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"unrestricted_value"</span></span>: <span class="hljs-string"><span class="hljs-string">" ,  ,  11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"data"</span></span>: {...} }, { <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">" ,  ,  11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"unrestricted_value"</span></span>: <span class="hljs-string"><span class="hljs-string">" ,  ,  11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"data"</span></span>: {...} } ] }</code> </pre> <br>  Di dalam - banyak hal berbeda tentang objek yang ditemukan: garis dengan alamat lengkap dan disingkat, nama saat ini dan yang sudah ketinggalan zaman, kode pos, kode FIAS objek induk dan sebagainya. <br><br><img src="https://habrastorage.org/webt/c5/_4/8i/c5_48iyueonoygc22saytynllr4.png"><br>  <sub>Semua data yang diberikan metode ini ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dalam dokumentasi</a></sub> <br><br>  Cakupan oleh koordinat untuk berbagai daerah berbeda, seperti ini dengan rumah: <br><br><ul><li>  Moskow - 96%, </li><li>  St. Petersburg - 88%, </li><li>  juta kota lainnya - 74%, </li><li>  sisa Rusia adalah 47%. </li></ul><br>  Dan ini dia - menutupi jalan-jalan: <br><br><ul><li>  Moskow - 92% </li><li>  St. Petersburg - 79%, </li><li>  kota-kota jutawan lainnya - 75%, </li><li>  sisa Rusia adalah 67%. </li></ul><br>  Mereka tidak mempertimbangkan kota-kota - dalam skala Rusia, bahkan fakta memiliki nama kota yang bangga itu tidak stabil.  Sebagai contoh, <i>wilayah Yaroslavl, distrik Poshekhonsky, s / o Fedorkovsky</i> adalah sebuah kota, menurut direktori resmi FIAS.  Namun pada kenyataannya, dan di alamat - distrik pedesaan.  Secara fisik, distrik pedesaan menyerupai penyatuan beberapa desa dalam noda besar.  Sulit tidak hanya untuk menentukan pusat, tetapi bahkan untuk menemukan penyelesaian di peta. <br><br>  Kami sudah memikirkan apa yang akan ditambahkan ke metode: izinkan penyaringan berdasarkan jenis objek, kembalikan jarak ke titik tertentu, sesuatu yang lain.  Kami memantau permintaan dan memutuskan apakah akan berinvestasi. <br><br>  Kalau tidak, semuanya sudah ada di prod.  Hingga 10.000 permintaan per hari - gratis, lebih banyak - dengan berlangganan mulai dari 5.000 ₽ per tahun.  Jika Anda memerlukan alamat berdasarkan koordinat untuk proyek komersial, dan Geocoder terlalu mahal, coba <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dadati API</a> . <br><br>  <i>Artikel asli diterbitkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di blog HFLabs</a> .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467787/">https://habr.com/ru/post/id467787/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467775/index.html">5 mitos tentang bisnis: mengapa klien salah dan bagaimana melampaui Apple</a></li>
<li><a href="../id467779/index.html">Tentang Godot, GLSL dan WebGL, shader yang digunakan dalam mini-game</a></li>
<li><a href="../id467781/index.html">Kursus C ++ di CS center, bagian pertama</a></li>
<li><a href="../id467783/index.html">Bagaimana profesional TI dapat bekerja dan tinggal di Swiss</a></li>
<li><a href="../id467785/index.html">Cara mengoptimalkan panda saat bekerja dengan dataset besar (esai)</a></li>
<li><a href="../id467789/index.html">Java 13 baru saja tiba. ZGC telah mulai berbagi memori, CDS sendiri mengingat kelas, dan keajaiban teknis lainnya</a></li>
<li><a href="../id467791/index.html">Analisis pengguliran halaman di Google Data Studio</a></li>
<li><a href="../id467793/index.html">Tumpukan teknologi yang membosankan dari perusahaan internet satu orang</a></li>
<li><a href="../id467795/index.html">Catatan tentang cryptocurrency dan regulasi negara</a></li>
<li><a href="../id467797/index.html">"Tertawa demi": mengapa Anda membutuhkan alat perangkat lunak yang tidak memiliki aplikasi "perang"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>