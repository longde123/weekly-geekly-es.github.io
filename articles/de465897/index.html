<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐨 👨🏾‍🌾 🕧 Die 10 häufigsten Spring Framework-Fehler 🌿 👨🏻‍🔬 😧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Ich präsentiere Ihnen die Übersetzung des Artikels „Top 10 der häufigsten Fehler im Frühjahrsrahmen“ von Toni Kukurin. 

 Spring ist wahrs...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die 10 häufigsten Spring Framework-Fehler</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465897/"> Hallo Habr!  Ich präsentiere Ihnen die Übersetzung des Artikels <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„Top 10 der häufigsten Fehler im Frühjahrsrahmen“</a> von Toni Kukurin. <br><br>  Spring ist wahrscheinlich eines der beliebtesten Java-Frameworks und ein mächtiges Tier zum Zähmen.  Obwohl die Grundkonzepte ziemlich einfach zu verstehen sind, braucht es Zeit und Mühe, um ein starker Spring-Entwickler zu werden. <br><br>  In diesem Artikel werden einige der häufigsten Fehler in Spring behandelt, insbesondere diejenigen, die sich auf Webanwendungen und Spring Boot beziehen.  Wie auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Spring Boot-Website angegeben</a> , enthält es eine Vorstellung davon, wie industrielle Anwendungen erstellt werden sollten. In diesem Artikel werden wir versuchen, diese Idee zu demonstrieren und einen Überblick über einige Tipps zu geben, die gut in den Standardentwicklungsprozess für Spring Boot-Webanwendungen passen. <br>  Wenn Sie mit Spring Boot nicht sehr vertraut sind, aber dennoch einige der genannten Dinge ausprobieren möchten, habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das GitHub-Repository erstellt, das diesem Artikel beiliegt</a> .  Wenn Sie das Gefühl haben, irgendwo im Artikel verloren zu sein, empfehle ich, das Repository auf Ihren lokalen Computer zu klonen und mit dem Code zu spielen. <br><a name="habracut"></a><br><h2>  Häufiger Fehler Nr. 1: Runter zu niedrig </h2><br>  Wir stoßen auf diesen häufigen Fehler, weil das Syndrom <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„hier nicht erfunden“</a> in der Welt der Softwareentwicklung weit verbreitet ist. Zu den Symptomen gehört das regelmäßige Umschreiben von Fragmenten häufig verwendeten Codes, und viele Entwickler scheinen darunter zu leiden. <br><br>  Obwohl das Verständnis der Innenseiten einer bestimmten Bibliothek und ihrer Implementierung zum größten Teil gut und notwendig ist (und ein hervorragender Lernprozess sein kann), ist es für Ihre Entwicklung als Softwareentwickler schädlich, ständig dieselben Implementierungsdetails auf niedriger Ebene zu lösen.  Es gibt einen Grund dafür, dass Abstraktionen und Frameworks wie Spring existieren, die Sie strikt von sich wiederholenden manuellen Arbeiten trennen und es Ihnen ermöglichen, sich auf übergeordnete Details zu konzentrieren - Ihre Domänenobjekte und Ihre Geschäftslogik. <br><br>  Verwenden Sie daher Abstraktionen. Wenn Sie das nächste Mal auf ein bestimmtes Problem stoßen, führen Sie zunächst eine schnelle Suche durch und stellen Sie fest, ob die Bibliothek, die dieses Problem löst, in Spring integriert ist.  Derzeit finden Sie höchstwahrscheinlich eine geeignete Lösung.  Als Beispiel für eine nützliche Bibliothek werde ich in den Beispielen des restlichen Artikels die Anmerkungen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">des Lombok-Projekts verwenden</a> .  Lombok wird als Vorlagencode-Generator verwendet und der faule Entwickler in Ihnen sollte hoffentlich kein Problem mit der Idee dieser Bibliothek haben.  Schauen Sie sich als Beispiel an, wie eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„Standard-Java-Bean“</a> mit Lombok aussieht: <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-meta"><span class="hljs-meta">@Setter</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bean</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> firstBeanProperty; String secondBeanProperty; }</code> </pre> <br>  Wie Sie sich vorstellen können, wird der obige Code wie folgt kompiliert: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bean</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> firstBeanProperty; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String secondBeanProperty; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFirstBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.firstBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSecondBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.secondBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFirstBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> firstBeanProperty)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.firstBeanProperty = firstBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSecondBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String secondBeanProperty)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.secondBeanProperty = secondBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre> <br>  Beachten Sie jedoch, dass Sie das Plugin höchstwahrscheinlich installieren müssen, wenn Sie Lombok mit Ihrer IDE verwenden möchten.  Die Plugin-Version für IntelliJ IDEA finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br><h2>  Häufiger Fehler Nr. 2: Undichter interner Inhalt </h2><br>  Das Aufdecken Ihrer internen Struktur ist immer eine schlechte Idee, da dies zu einer Starrheit bei der Gestaltung des Dienstes führt und daher zu einer schlechten Codierungspraxis beiträgt.  Ein „Leck“ an internem Inhalt manifestiert sich in der Tatsache, dass auf die Datenbankstruktur von bestimmten API-Endpunkten aus zugegriffen werden kann.  Angenommen, das folgende POJO ("Plain Old Java Object") repräsentiert eine Tabelle in Ihrer Datenbank: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Integer id; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TopTalentEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; } }</code> </pre> <br>  Angenommen, es gibt einen Endpunkt, der auf TopTalentEntity-Daten zugreifen muss.  Unabhängig davon, wie verlockend es ist, TopTalentEntity-Instanzen zurückzugeben, besteht eine flexiblere Lösung darin, eine neue Klasse zum Anzeigen von TopTalentEntity-Daten auf dem API-Endpunkt zu erstellen: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; }</code> </pre> <br>  Für Änderungen am Datenbank-Backend sind daher keine zusätzlichen Änderungen an der Service-Schicht erforderlich.  Überlegen Sie, was passiert, wenn Sie das Kennwortfeld zu TopTalentEntity hinzufügen, um Benutzerkennwort-Hashes in der Datenbank zu speichern. Wenn Sie ohne einen Connector wie TopTalentData vergessen, den Dienst zu ändern, zeigt das Frontend versehentlich einige sehr unerwünschte geheime Informationen an! <br><br><h2>  Häufiger Fehler Nr. 3: Fehlende Aufgabentrennung </h2><br>  Wenn Ihre Anwendung wächst, wird die Organisation Ihres Codes zu einem immer wichtigeren Thema.  Ironischerweise werden die meisten guten Prinzipien der Softwareentwicklung überall verletzt - insbesondere in den Fällen, in denen dem Entwurf der Anwendungsarchitektur wenig Aufmerksamkeit geschenkt wird.  Einer der häufigsten Fehler, mit denen Entwickler konfrontiert sind, ist das Mischen von Code-Verantwortlichkeiten, und das ist sehr einfach! <br><br>  Was normalerweise gegen das Prinzip der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgabentrennung</a> verstößt, ist das „Hinzufügen“ neuer Funktionen zu vorhandenen Klassen.  Dies ist natürlich eine ausgezeichnete kurzfristige Lösung (für den Anfang erfordert sie weniger Eingabe), aber sie wird in Zukunft unweigerlich zu einem Problem werden, sei es während des Testens, der Wartung oder irgendwo dazwischen.  Betrachten Sie den folgenden Controller, der TopTalentData aus seinem Repository zurückgibt: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentRepository topTalentRepository; <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/toptal/get"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;TopTalentData&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentRepository.findAll() .stream() .map(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::entityToData) .collect(Collectors.toList()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> TopTalentData </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">entityToData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TopTalentEntity topTalentEntity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TopTalentData(topTalentEntity.getName()); } }</code> </pre> <br>  Zunächst fällt nicht auf, dass mit diesem Code etwas nicht stimmt.  Es enthält eine TopTalentData-Liste, die aus TopTalentEntity-Instanzen abgerufen wird.  Wenn Sie genau hinschauen, werden wir jedoch feststellen, dass TopTalentController hier tatsächlich einige Dinge tut.  Das heißt: Es ordnet Anforderungen für einen bestimmten Endpunkt zu, ruft Daten aus dem Repository ab und konvertiert von TopTalentRepository erhaltene Entitäten in ein anderes Format.  Eine „sauberere“ Lösung wäre, diese Verantwortlichkeiten in ihre eigenen Klassen zu unterteilen.  Es könnte ungefähr so ​​aussehen: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/toptal"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentService topTalentService; <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/get"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;TopTalentData&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentService.getTopTalent(); } } <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentRepository topTalentRepository; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentEntityConverter topTalentEntityConverter; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;TopTalentData&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentRepository.findAll() .stream() .map(topTalentEntityConverter::toResponse) .collect(Collectors.toList()); } } <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentEntityConverter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> TopTalentData </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toResponse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TopTalentEntity topTalentEntity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TopTalentData(topTalentEntity.getName()); } }</code> </pre> <br>  Ein zusätzlicher Vorteil dieser Hierarchie besteht darin, dass wir durch einfaches Überprüfen des Klassennamens feststellen können, wo sich die Funktionalität befindet.  Darüber hinaus können wir während des Testens bei Bedarf problemlos jede der Klassen durch eine Scheinimplementierung ersetzen. <br><br><h2>  Häufiger Fehler Nr. 4: Inkonsistenz und schlechte Fehlerbehandlung </h2><br>  Das Thema Konsistenz ist nicht unbedingt nur Spring (oder Java) vorbehalten, aber es ist immer noch ein wichtiger Aspekt, der bei der Arbeit an Spring-Projekten berücksichtigt werden muss.  Während der Stil des Codeschreibens Gegenstand von Diskussionen sein kann (und normalerweise eine Vereinbarung im Team oder im gesamten Unternehmen ist), ist das Vorhandensein eines gemeinsamen Standards eine große Hilfe für die Leistung.  Dies gilt insbesondere für Teams mit mehreren Personen.  Die Konsistenz ermöglicht die Übertragung von Code ohne den Aufwand von Ressourcen für die Wartung oder die Bereitstellung detaillierter Erklärungen zu den Verantwortlichkeiten verschiedener Klassen. <br><br>  Stellen Sie sich ein Spring-Projekt mit verschiedenen Konfigurationsdateien, Diensten und Controllern vor.  Da die Benennung semantisch konsistent ist, wird eine leicht durchsuchbare Struktur erstellt, in der jeder neue Entwickler steuern kann, wie mit dem Code gearbeitet wird: Beispielsweise wird das Suffix Config zu Konfigurationsklassen hinzugefügt, das Service-Suffix zu Diensten und das Controller-Suffix zu Controllern. <br><br>  In enger Beziehung zum Thema Konsistenz verdient die serverseitige Fehlerbehandlung besondere Aufmerksamkeit.  Wenn Sie jemals Ausnahmeantworten von einer schlecht geschriebenen API verarbeiten mussten, wissen Sie wahrscheinlich, warum das Analysieren von Ausnahmen schmerzhaft sein kann, und es ist noch schwieriger, den Grund zu bestimmen, warum diese Ausnahmen ursprünglich aufgetreten sind. <br><br>  Als API-Entwickler möchten Sie idealerweise alle Benutzerendpunkte abdecken und in ein gemeinsames Fehlerformat übersetzen.  Dies bedeutet normalerweise, dass Sie einen allgemeinen Fehlercode und eine allgemeine Beschreibung haben und nicht nur eine Entschuldigung in Form von: a) Zurücksenden der Meldung „500 Internal Server Error“ oder b) Zurücksetzen des Stack-Trace an den Benutzer (was um jeden Preis vermieden werden sollte, da es Ihre Innenseiten zeigt zusätzlich zur Komplexität der Verarbeitung auf der Client-Seite). <br>  Ein Beispiel für ein gängiges Fehlerantwortformat könnte sein: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ErrorResponse</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Integer errorCode; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String errorMessage; }</code> </pre> <br>  Ähnliches findet sich normalerweise in den meisten gängigen APIs und funktioniert normalerweise gut, da es einfach und systematisch dokumentiert werden kann.  Sie können Ausnahmen in dieses Format übersetzen, indem Sie der Methode die Annotation @ExceptionHandler bereitstellen (ein Beispiel für die Annotation finden Sie in Common Mistake # 6). <br><br><h2>  Häufiger Fehler Nr. 5: Falsches Multithreading </h2><br>  Unabhängig davon, ob es in Desktop- oder Webanwendungen gefunden wird, im Frühjahr oder nicht im Frühjahr, kann Multithreading eine entmutigende Aufgabe sein.  Die Probleme, die durch das Ausführen paralleler Programme verursacht werden, sind schwer zu beheben und oft sehr schwer zu debuggen. Aufgrund der Art des Problems sollten Sie den Debugger wahrscheinlich vollständig verlassen und starten, sobald Sie verstanden haben, dass Sie sich mit dem Problem der parallelen Ausführung befassen Überprüfen Sie Ihren Code manuell, bis Sie die Fehlerursache gefunden haben.  Leider gibt es zur Lösung solcher Probleme keine Vorlagenlösung.  Je nach Einzelfall müssen Sie die Situation einschätzen und das Problem dann aus einem Blickwinkel angreifen, den Sie für den besten halten. <br><br>  Idealerweise möchten Sie natürlich die Multithreading-Fehler vollständig vermeiden.  Auch hier gibt es keinen einheitlichen Ansatz, aber hier sind einige praktische Überlegungen zum Debuggen und Verhindern von Multithreading-Fehlern: <br><br><h3>  Vermeiden Sie den globalen Status </h3><br>  Denken Sie immer immer an das Problem des „globalen Staates“.  Wenn Sie eine Multithread-Anwendung erstellen, sollte absolut alles, was global geändert werden kann, sorgfältig überwacht und wenn möglich vollständig entfernt werden.  Wenn es einen Grund gibt, warum die globale Variable veränderbar bleiben sollte, verwenden Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Synchronisierung</a> sorgfältig und überwachen Sie die Leistung Ihrer Anwendung, um sicherzustellen, dass sie aufgrund neuer Wartezeiten nicht langsamer wird. <br><br><h3>  Vermeiden Sie Veränderlichkeit </h3><br>  Dies ergibt sich direkt aus der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">funktionalen Programmierung</a> und besagt laut OOP, dass Klassenvolatilität und Zustandsänderung vermieden werden sollten.  Kurz gesagt bedeutet das Vorstehende das Vorhandensein von Setzern und privaten Endfeldern in allen Klassen des Modells.  Ihre Werte ändern sich nur während des Baus.  So können Sie sicher sein, dass es im Wettlauf um Ressourcen keine Probleme gibt und dass der Zugriff auf die Eigenschaften des Objekts immer die richtigen Werte liefert. <br><br><h3>  Kritische Daten protokollieren </h3><br>  Bewerten Sie, wo Ihre Anwendung Probleme verursachen kann, und protokollieren Sie alle wichtigen Daten vorab.  Wenn ein Fehler auftritt, sind Sie dankbar für Informationen darüber, welche Anfragen eingegangen sind, und Sie können besser verstehen, warum sich Ihre Anwendung schlecht verhält.  Auch hier sollte beachtet werden, dass die Protokollierung die Datei-E / A erhöht, sodass Sie sie nicht missbrauchen sollten, da dies die Leistung Ihrer Anwendung ernsthaft beeinträchtigen kann. <br><br><h3>  Bestehende Implementierungen wiederverwenden </h3><br>  Wenn Sie eigene Threads erstellen müssen (z. B. um asynchrone Anforderungen an verschiedene Dienste zu stellen), verwenden Sie vorhandene sichere Implementierungen erneut, anstatt eigene Lösungen zu erstellen.  In den meisten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fällen</a> würde dies bedeuten, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ExecutorServices</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CompletableFutures</a> im übersichtlichen Funktionsstil von Java 8 zum Erstellen von Threads zu verwenden.  Spring ermöglicht auch die asynchrone Anforderungsverarbeitung über die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DeferredResult-</a> Klasse. <br><br><h2>  Häufiger Fehler Nr. 6: Keine annotationsbasierte Validierung verwenden </h2><br>  Stellen wir uns vor, unser oben genannter TopTalent-Service benötigt einen Endpunkt, um neue Super-Talente hinzuzufügen.  Nehmen wir außerdem an, dass jeder neue Name aus einem wirklich guten Grund genau 10 Zeichen lang sein sollte.  Ein Weg, dies zu tun, könnte wie folgt sein: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/put"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@RequestBody TopTalentData topTalentData)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> nameNonExistentOrHasInvalidLength = Optional.ofNullable(topTalentData) .map(TopTalentData::getName) .map(name -&gt; name.length() == <span class="hljs-number"><span class="hljs-number">10</span></span>) .orElse(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nameNonExistentOrInvalidLength) { <span class="hljs-comment"><span class="hljs-comment">// throw some exception } topTalentService.addTopTalent(topTalentData); }</span></span></code> </pre> <br>  Das oben Genannte (jedoch ist nicht nur schlecht designt) ist auch keine wirklich „saubere“ Lösung.  Wir überprüfen mehr als einen Gültigkeitstyp (nämlich, dass TopTalentData nicht null ist und dass TopTalentData.name nicht null ist und dass TopTalentData.name 10 Zeichen lang ist) und lösen auch eine Ausnahme aus, wenn die Daten ungültig sind. <br><br>  Dies kann mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hibernate-Validator</a> mit Spring viel sauberer durchgeführt werden.  Zuerst schreiben wir die addTopTalent-Methode neu, um die Validierung zu unterstützen: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/put"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Valid @NotNull @RequestBody TopTalentData topTalentData)</span></span></span><span class="hljs-function"> </span></span>{ topTalentService.addTopTalent(topTalentData); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.BAD_REQUEST) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleInvalidTopTalentDataException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MethodArgumentNotValidException methodArgumentNotValidException)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// handle validation exception }</span></span></code> </pre> <br>  Außerdem müssen wir angeben, welche Eigenschaft wir in der TopTalentData-Klasse überprüfen möchten: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Length</span></span>(min = <span class="hljs-number"><span class="hljs-number">10</span></span>, max = <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-meta"><span class="hljs-meta">@NotNull</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; }</code> </pre> <br>  Spring fängt jetzt die Anforderung ab und überprüft sie, bevor die Methode aufgerufen wird. Es sind keine zusätzlichen manuellen Tests erforderlich. <br><br>  Eine andere Möglichkeit, dasselbe zu erreichen, besteht darin, eigene Anmerkungen zu erstellen.  Obwohl benutzerdefinierte Anmerkungen normalerweise nur verwendet werden, wenn Ihre Anforderungen den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">integrierten Satz von Konstanten</a> im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ruhezustand</a> überschreiten, stellen wir uns in diesem Beispiel vor, dass <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Längenanmerkungen</a> nicht vorhanden sind.  Sie müssen einen Validator erstellen, der die Länge einer Zeichenfolge überprüft, indem Sie zwei zusätzliche Klassen erstellen, eine zum Überprüfen und eine zum Kommentieren von Eigenschaften: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Target</span></span>({ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER}) <span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RetentionPolicy.RUNTIME) <span class="hljs-meta"><span class="hljs-meta">@Documented</span></span> <span class="hljs-meta"><span class="hljs-meta">@Constraint</span></span>(validatedBy = { MyAnnotationValidator.class }) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> MyAnnotation { <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">message</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> "String length does not match expected"</span></span>; Class&lt;?&gt;[] groups() <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {}; Class&lt;? extends Payload&gt;[] payload() <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">value</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAnnotationValidator</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConstraintValidator</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAnnotation</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> expectedLength; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MyAnnotation myAnnotation)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expectedLength = myAnnotation.value(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String s, ConstraintValidatorContext constraintValidatorContext)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || s.length() == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expectedLength; } }</code> </pre> <br>  Beachten Sie, dass in diesen Fällen Best Practices für die Aufgabentrennung erfordern, dass Sie eine Eigenschaft als gültig markieren, wenn sie null ist (s == null in der isValid-Methode), und dann die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">NotNull-</a> Annotation verwenden, wenn dies eine zusätzliche Anforderung für die Eigenschaft ist: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@MyAnnotation</span></span>(value = <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-meta"><span class="hljs-meta">@NotNull</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; }</code> </pre> <br><h2>  Häufiger Fehler Nr. 7: Verwenden der (noch) XML-Konfiguration </h2><br>  Obwohl XML für frühere Versionen von Spring erforderlich war, kann der größte Teil der Konfiguration derzeit ausschließlich mit Java-Code / Anmerkungen durchgeführt werden.  XML-Konfigurationen stellen lediglich eine zusätzliche und unnötige Boilerplate dar. <br>  In diesem Artikel (und dem dazugehörigen GitHub-Repository) werden Anmerkungen zum Konfigurieren von Spring verwendet. Spring weiß, welche Beans verbunden werden sollen, da das Stammpaket mit der zusammengesetzten Annotation @SpringBootApplication mit Anmerkungen versehen wurde. Beispiel: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(Application.class, args); } }</code> </pre> <br>  Diese zusammengesetzte Anmerkung (mehr dazu in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spring-</a> Dokumentation) gibt Spring nur einen Hinweis darauf, welche Pakete gescannt werden sollten, um die Beans zu extrahieren.  In unserem speziellen Fall bedeutet dies, dass die folgenden Klassen verwendet werden, um die Beans zu verbinden, beginnend mit dem Paket der obersten Ebene (co.kukurin): <br><br><ul><li> <code>@Component (TopTalentConverter, MyAnnotationValidator) @RestController (TopTalentController) @Repository (TopTalentRepository) @Service (TopTalentService)</code> </li> <li> <code>@Component (TopTalentConverter, MyAnnotationValidator) @RestController (TopTalentController) @Repository (TopTalentRepository) @Service (TopTalentService)</code> </li> <li> <code>@Component (TopTalentConverter, MyAnnotationValidator) @RestController (TopTalentController) @Repository (TopTalentRepository) @Service (TopTalentService)</code> </li> <li> <code>@Component (TopTalentConverter, MyAnnotationValidator) @RestController (TopTalentController) @Repository (TopTalentRepository) @Service (TopTalentService)</code> </li> </ul><br>  Wenn zusätzliche Klassen mit @Configuration versehen wären, würden sie auch auf Java-Konfiguration überprüft. <br><br><h2>  Häufiger Fehler Nummer 8: Profile vergessen </h2><br>  Das Problem, das häufig bei der Entwicklung von Servern auftritt, ist der Unterschied zwischen verschiedenen Arten von Konfigurationen, normalerweise Industrie- und Entwicklungskonfigurationen.  Anstatt die verschiedenen Konfigurationsparameter bei jedem Wechsel vom Test zur Anwendungsbereitstellung manuell zu ändern, besteht eine effizientere Möglichkeit darin, Profile zu verwenden. <br><br>  Betrachten Sie den Fall, wenn Sie die In-Memory-Datenbank für die lokale Entwicklung und die MySQL-Datenbank in PROM verwenden.  Im Wesentlichen bedeutet dies, dass Sie unterschiedliche URLs und (hoffentlich) unterschiedliche Anmeldeinformationen verwenden, um auf jede dieser URLs zuzugreifen.  Mal sehen, wie das mit zwei verschiedenen Konfigurationsdateien gemacht werden kann: <br><br><h4>  DATEI ANWENDUNG.YAML </h4><br><pre> <code class="plaintext hljs"># set default profile to 'dev' spring.profiles.active: dev # production database details spring.datasource.url: 'jdbc:mysql://localhost:3306/toptal' spring.datasource.username: root spring.datasource.password:</code> </pre> <br><h4>  DATEI ANWENDUNG-DEV.YAML </h4><br><pre> <code class="plaintext hljs">spring.datasource.url: 'jdbc:h2:mem:' spring.datasource.platform: h2</code> </pre> <br>  Anscheinend möchten Sie nicht versehentlich Aktionen in Ihrer Industriedatenbank ausführen, während Sie mit dem Code herumspielen. Daher ist es sinnvoll, das Standardprofil in dev festzulegen.  Anschließend können Sie auf dem Server das Konfigurationsprofil manuell überschreiben, indem Sie den Parameter -Dspring.profiles.active = prod für die JVM angeben.  Darüber hinaus können Sie die Umgebungsvariable des Betriebssystems auf das gewünschte Standardprofil einstellen. <br><br><h2>  Häufiger Fehler Nr. 9: Unfähigkeit, Abhängigkeitsinjektion zu akzeptieren </h2><br>  Die ordnungsgemäße Verwendung der Abhängigkeitsinjektion in Spring bedeutet, dass Sie alle Ihre Objekte miteinander verbinden können, indem Sie alle erforderlichen Konfigurationsklassen scannen.  Dies ist nützlich zum Entkoppeln von Beziehungen und erleichtert das Testen erheblich.  Anstatt Klassen fest zu verknüpfen, gehen Sie folgendermaßen vor: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentService topTalentService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.topTalentService = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TopTalentService(); } }</code> </pre> <br><br>  Wir lassen Spring die Bindung für uns machen: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentService topTalentService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TopTalentService topTalentService)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.topTalentService = topTalentService; } }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Misko Hevery von Google Talk erläutert</a> ausführlich die „Gründe“ für die Abhängigkeitsinjektion. Lassen Sie uns stattdessen sehen, wie dies in der Praxis verwendet wird.  In der Aufgabenteilung (Common Mistakes # 3) haben wir Service- und Controller-Klassen erstellt.  Angenommen, wir möchten einen Controller unter der Annahme testen, dass sich TopTalentService korrekt verhält.  Wir können anstelle der eigentlichen Service-Implementierung ein Scheinobjekt einfügen und eine separate Konfigurationsklasse bereitstellen: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SampleUnitTestConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> TopTalentService </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">topTalentService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ TopTalentService topTalentService = Mockito.mock(TopTalentService.class); Mockito.when(topTalentService.getTopTalent()).thenReturn( Stream.of(<span class="hljs-string"><span class="hljs-string">"Mary"</span></span>, <span class="hljs-string"><span class="hljs-string">"Joel"</span></span>) .map(TopTalentData::<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>).collect(Collectors.toList())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentService; } }</code> </pre> <br>  Anschließend können wir das Scheinobjekt einbetten, indem wir Spring anweisen, SampleUnitTestConfig als Konfigurationsanbieter zu verwenden: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ContextConfiguration</span></span>(classes = { SampleUnitTestConfig.class })</code> </pre> <br>  Auf diese Weise können wir die Kontextkonfiguration zum Einbetten der benutzerdefinierten Bean in den Komponententest verwenden. <br><br><h2>  Häufiger Fehler Nr. 10: Fehlende oder falsche Tests </h2><br>  Trotz der Tatsache, dass die Idee des Unit-Tests schon lange bei uns ist, scheinen viele Entwickler dies zu „vergessen“ (insbesondere wenn dies nicht erforderlich ist) oder es einfach für später zu belassen.  Dies ist natürlich unerwünscht, da Tests nicht nur die Richtigkeit Ihres Codes überprüfen, sondern auch als Dokumentation darüber dienen sollen, wie sich die Anwendung in verschiedenen Situationen verhalten soll. <br><br>  Beim Testen von Webdiensten führen Sie selten außergewöhnlich „saubere“ Komponententests durch, da für die Interaktion über HTTP normalerweise DispatcherServlet Spring aufgerufen und überprüft werden muss, was passiert, wenn die eigentliche HttpServletRequest empfangen wird (was es zu einem Integrationstest macht) unter Verwendung von Validierung, Serialisierung usw.).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">REST Assured</a> - Java DSL zum einfachen Testen von REST-Services auf MockMVC erwies sich als sehr elegante Lösung.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Betrachten Sie das folgende Codefragment mit Abhängigkeitsinjektion: </font></font><br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringJUnit4ClassRunner.class) <span class="hljs-meta"><span class="hljs-meta">@ContextConfiguration</span></span>(classes = { Application.class, SampleUnitTestConfig.class }) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RestAssuredTestDemonstration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TopTalentController topTalentController; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldGetMaryAndJoel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// given MockMvcRequestSpecification givenRestAssuredSpecification = RestAssuredMockMvc.given() .standaloneSetup(topTalentController); // when MockMvcResponse response = givenRestAssuredSpecification.when().get("/toptal/get"); // then response.then().statusCode(200); response.then().body("name", hasItems("Mary", "Joel")); } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SampleUnitTestConfig aktiviert die Mock-Implementierung von TopTalentService im TopTalentController, während alle anderen Klassen mit der Standardkonfiguration verbunden sind, die durch das Scannen von Paketen erhalten wird, die Wurzeln im Paket der Application-Klasse haben. </font><font style="vertical-align: inherit;">RestAssuredMockMvc wird einfach verwendet, um eine kompakte Umgebung zu erstellen und eine GET-Anforderung an den Endpunkt / toptal / get zu senden.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Werde ein Frühlingsmeister </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Frühling ist ein leistungsstarkes Framework, mit dem man leicht anfangen kann, das jedoch etwas Engagement und Zeit benötigt, um die volle Meisterschaft zu erlangen. Wenn Sie Zeit damit verbringen, das Framework kennenzulernen, wird es auf lange Sicht sicherlich Ihre Produktivität steigern und Ihnen letztendlich helfen, saubereren Code zu schreiben und ein besserer Entwickler zu werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie nach zusätzlichen Ressourcen suchen, ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring In Action</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ein bewährtes Übungsbuch, das viele Kernthemen des Frühlings abdeckt. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TAGS</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Java SpringFramework</font></font><br><br><h2>  Kommentare </h2><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Timothy Schimandle</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bei # 2 denke ich, dass die Rückgabe eines </font><b><font style="vertical-align: inherit;">Domänenobjekts</font></b><font style="vertical-align: inherit;"> in den meisten Fällen bevorzugt wird. Ihr benutzerdefiniertes Beispielobjekt ist eine von mehreren Klassen mit Feldern, die ausgeblendet werden sollen. Die überwiegende Mehrheit der Objekte, mit denen ich gearbeitet habe, unterliegt jedoch keiner solchen Einschränkung, und das Hinzufügen der Klasse dto ist nur unnötiger Code. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alles in allem ein guter Artikel. Gut gemacht. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GEISTIG zu Timothy Schimandle</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ich stimme vollkommen zu. Es scheint, als ob eine unnötige zusätzliche Codeebene hinzugefügt wurde. Ich denke, dass @JsonIgnore dabei helfen wird, Felder zu ignorieren (wenn auch mit Fehlern in den Standardstrategien für die Repository-Erkennung), aber insgesamt ist dies ein großartiger Blog-Beitrag. Stolz zu stolpern ... </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arokiadoss Asirvatham</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alter, ein weiterer häufiger Anfängerfehler ist: 1) Zyklische Abhängigkeit und 2) Nichteinhaltung grundlegender Lehren für die Deklaration von Singleton-Klassen, z. B. die Verwendung einer Instanzvariablen in Beans mit Singleton-Gültigkeitsbereich. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hlodowig</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In Bezug auf Nummer 8 glaube ich, dass die Herangehensweisen an die Profile sehr unbefriedigend sind. </font><font style="vertical-align: inherit;">Mal sehen:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sicherheit: Einige Leute sagen: Wenn Ihr Repository öffentlich wäre, gäbe es geheime Schlüssel / Passwörter? </font><font style="vertical-align: inherit;">Dies wird höchstwahrscheinlich nach diesem Ansatz der Fall sein. </font><font style="vertical-align: inherit;">Es sei denn, Sie fügen .gitignore Konfigurationsdateien hinzu, dies ist jedoch keine ernsthafte Option.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Duplizierung: Jedes Mal, wenn ich andere Einstellungen habe, muss ich eine neue Eigenschaftendatei erstellen, was ziemlich ärgerlich ist. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portabilität: Ich weiß, dass dies nur ein JVM-Argument ist, aber Null ist besser als Eins. </font><font style="vertical-align: inherit;">Unendlich weniger fehleranfällig.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe versucht, eine Möglichkeit zu finden, Umgebungsvariablen in meinen Konfigurationsdateien zu verwenden, anstatt die Werte „hart zu codieren“, aber bisher ist mir dies nicht gelungen. Ich denke, ich muss mehr Nachforschungen anstellen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toller Artikel Tony, mach weiter so! </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Übersetzung abgeschlossen: tele.gg/middle_java</font></font></b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de465897/">https://habr.com/ru/post/de465897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de465885/index.html">Wie werde ich ein führender Scrum Master und rocke das Team?</a></li>
<li><a href="../de465889/index.html">Wie wir Energieeffizienz betrieben haben</a></li>
<li><a href="../de465891/index.html">Wie man am Beispiel von Vepp einen Produkt- oder Firmennamen erstellt</a></li>
<li><a href="../de465893/index.html">Summ3r von h4ck 2019. Abteilung für Sicherheitsanalyse</a></li>
<li><a href="../de465895/index.html">C ++ Russia 2019 Piter Programmübersicht: Asynchronität, Module, Bibliotheken ... und Taxi</a></li>
<li><a href="../de465899/index.html">Das Buch "Linux Command Prompt. Die komplette Anleitung. 2nd int. ed. "</a></li>
<li><a href="../de465901/index.html">Was sollte eine Fitness-App haben?</a></li>
<li><a href="../de465903/index.html">Willkommen zur Fujitsu World Tour 2019</a></li>
<li><a href="../de465905/index.html">ZeroNights 2019 Konferenz</a></li>
<li><a href="../de465911/index.html">Beschleunigungstreffen 17/09 UPD-Videos und Präsentationen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>