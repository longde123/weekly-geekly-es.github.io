<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👤 👃🏿 ☝️ Geração de texto em russo por modelos 👨🏼‍🎨 📀 ✊🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando eu estava começando a trabalhar no meu jogo de texto, decidi que uma de suas principais características deveria ser belas descrições artísticas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Geração de texto em russo por modelos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471278/">  Quando eu estava começando a trabalhar no meu jogo de texto, decidi que uma de suas principais características deveria ser belas descrições artísticas das ações dos personagens.  Em parte, eu queria "salvar", porque não sabia como agendá-lo.  Salvar não funcionou, mas resultou na biblioteca Python ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pypi</a> ) para gerar textos, levando em consideração a dependência das palavras e seus recursos gramaticais. <br><br>  Por exemplo, no modelo: <br><blockquote> <b>[Herói] [passou | herói]</b> passou por um pátio discreto e de repente <b>[notou | herói]</b> crianças brincando.  Eles corriam com espadas de madeira, paus e máscaras de monstros.  De repente, um dos jogadores parou, colocou <b>[toy | hero.weapon | vn] [hero.weapon | vn]</b> , gritou: “ <b>[eu | herói] [grande | herói] [herói]</b> !  Pegue!  - e correu para a "besta".  Caíram no chão, pularam os braços e as pernas e depois se levantaram, tiraram as máscaras e riram.  <b>[Grunhido | herói]</b> e <b>[ele mesmo | herói] [Herói]</b> , mas não <b>[</b> começou <b>| herói]</b> <b>dirigido</b> ao pequenino. </blockquote>  Podemos obter o seguinte texto (as palavras em mudança estão em negrito): <br><blockquote>  <b>Hallr</b> <b>passou</b> por um pátio discreto e de repente <b>notou</b> crianças brincando.  Eles corriam com espadas de madeira, paus e máscaras de monstros.  De repente, um dos jogadores parou, <b>estendeu uma espada dourada de brinquedo</b> e gritou: “ <b>Eu sou um ótimo Hallr</b> !  Pegue!  - e correu para a "besta".  Caíram no chão, pularam os braços e as pernas e depois se levantaram, tiraram as máscaras e riram.  <b>O</b> <b>próprio</b> <b>Hallr</b> <b>riu</b> , mas não foi para o pequeno. </blockquote>  Ou assim: <br><blockquote>  <b>Fievara</b> <b>passou</b> por um pátio discreto e de repente <b>notou</b> crianças brincando.  Eles corriam com espadas de madeira, paus e máscaras de monstros.  De repente, um dos jogadores parou, <b>colocou um brinquedo de catarro</b> e gritou: “ <b>Eu sou o grande Fievara</b> !  Pegue!  - e correu para a "besta".  Caíram no chão, pularam os braços e as pernas e depois se levantaram, tiraram as máscaras e riram.  <b>A</b> <b>própria</b> <b>Fievara</b> <b>resmungou</b> , mas não foi para o pequeno. </blockquote><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Reservas para casais</b> <div class="spoiler_text">  <b>Isenção de responsabilidade 1</b> .  Eu não sou linguista e a biblioteca foi escrita "para trabalhar" e não "para corresponder exatamente a todas as regras da língua".  Portanto, peço desculpas antecipadamente por imprecisões na terminologia ou por uma interpretação incompleta das regras do idioma russo. <br><br>  <b>Isenção 2</b> .  A biblioteca foi desenvolvida há cerca de 5 anos, agora podem aparecer meios alternativos de geração de texto (ou aumentar para um estado normal).  Por exemplo, algo interessante pode estar no software para localização. <br></div></div><br><h2>  Sobre a complexidade da geração de texto </h2><br>  A língua russa é complexa em muitos de seus aspectos.  Em particular, as palavras têm um grande número de formas morfológicas.  Por exemplo, os adjetivos podem ter uma forma completa e curta, variando por sexo, número, caso, animação e grau de comparação.  A escolha de um formulário específico depende de outras palavras na frase.  Dizemos "mulher bonita", mas "homem bonito".  A palavra “bonito” neste caso depende das palavras “homem” / “mulher” - sua forma é determinada pelo gênero da palavra principal. <br><br>  Portanto, as dificuldades começam quando tentamos entrar em contato com alguém com base em seu sexo.  Ao compilar textos para sites, cartas, jogos, é preciso criar uma redação muito clara (evitando o sexo do usuário), escrever vários textos ao mesmo tempo ou usar linguagens de marcação de vários graus de versatilidade. <br><br>  Eu queria algo mais do que uma simples dependência do gênero do jogador, e mesmo assim os próprios usuários poderiam adicionar novos textos (e o usuário "médio" é bastante analfabeto, como todos sabemos :-)).  Portanto, não encontrando o software certo, decidi fazer isso sozinho. <br><br><h2>  Recursos da biblioteca </h2><br>  O UTG (gerador de texto universal - não é um nome muito modesto) permite criar modelos para gerar texto com o seguinte: <br><br><ul><li>  variáveis ​​(por exemplo, nome do personagem); </li><li>  dependências de palavras em variáveis ​​(por exemplo, um adjetivo em um substantivo); </li><li>  Dependências de algumas variáveis ​​em outras; </li><li>  Propriedades explícitas de palavras e variáveis ​​(por exemplo, você pode especificar que o nome do caractere seja inserido no caso pai); </li></ul><br>  Ao gerar texto a partir de um modelo: <br><br><ul><li>  As propriedades necessárias da palavra principal são transferidas para palavras dependentes.  Por exemplo, o sexo de um substantivo é transferido para o adjetivo. </li><li>  A forma das palavras dependentes é consistente com os números (levando em consideração a forma das palavras dependentes). </li><li>  As preposições são modificadas se necessário (por exemplo, sobre mim / sobre você), o pretexto para isso deve ser marcado. </li></ul><br>  Adicionalmente implementado: <br><br><ul><li>  Um dicionário para armazenar as palavras necessárias. </li><li>  Um repositório de modelos para armazená-los por tipo e escolher aleatórios. </li></ul><br>  A biblioteca “sabe” sobre a existência de substantivos, adjetivos, pronomes, verbos, particípios, números, preposições e “aspas” (texto imutável). <br><br>  As seguintes propriedades das palavras são levadas em consideração: parte da fala, caso, animação, número, gênero, forma verbal, hora, pessoa, tipo, categoria de adjetivo, grau de adjetivo, grau de adjetivo, categoria de pronome, voz, forma de preposição, forma adjetiva, forma de particípio, forma substantiva ( além da forma normal, os substantivos têm uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">contagem</a> ). <br><br><h2>  Formato do modelo e exemplo de uso </h2><br>  Vejamos um modelo simples: <br><blockquote>  Ontem <b>[mob] [mordido | mob] [herói | ext]</b> . </blockquote>  Dependendo dos valores das variáveis, o modelo pode aparecer como uma frase: <br><blockquote>  Ontem, uma hiena mordeu Hallre. </blockquote>  so e so: <br><blockquote>  Os vaga-lumes morderam um fantasma ontem. </blockquote>  Considere o modelo em mais detalhes: <br><br><ul><li> <code></code> - texto simples. </li><li>  <code>[mob]</code> - uma variável, em vez da qual o nome do monstro é substituído. </li><li>  <code>[|mob]</code> - uma palavra dependente de uma variável, parte de suas propriedades será alterada dependendo das propriedades do nome do monstro (por exemplo, um número).  O gerador de texto reconhece automaticamente as propriedades da forma da palavra e tenta salvá-las (por exemplo, o tempo decorrido será reconhecido e salvo, para que você não precise especificá-lo). </li><li>  <code>[hero|]</code> - uma variável, em vez da qual o nome do herói é substituído.  Além disso, é indicado que o nome deve estar no caso acusativo. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Mais modelos de amostra.</b> <div class="spoiler_text">  Alguns exemplos técnicos podem ser encontrados em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">testes</a> . <br><br>  Se você estiver interessado em mais exemplos, poderá vê-los no site de brinquedos.  Um link para ele pode ser encontrado vasculhando meu perfil ou escrevendo em um site pessoal. <br></div></div><br>  As palavras variáveis ​​e dependentes no modelo são destacadas de forma idêntica e têm o seguinte formato: <br><br><ul><li>  <code>[</code> - colchete de abertura. </li><li>  <code></code> dependente de palavra ou identificador de variável.  O gerador primeiro verifica a presença de uma variável com esse nome; se não houver, a palavra é pesquisada no dicionário. </li><li> <code>|</code>  - barra vertical - separador, necessário se especificarmos propriedades adicionais. </li><li>  <code> </code> da variável - a variável da qual o formato da palavra depende pode estar ausente. </li><li> <code>|</code>  - barra vertical - separador, necessário se especificarmos propriedades adicionais. </li><li>  <code>   </code> - uma descrição da forma exigida da palavra (maiúsculas e minúsculas, sexo e assim por diante).  Uma lista deles pode ser encontrada nas páginas do projeto no github e pypi. </li><li>  <code>]</code> É o colchete de fechamento. </li></ul><br>  Você pode especificar quaisquer propriedades adicionais que desejar, elas serão aplicadas na ordem da definição, por exemplo: <br><br> <code>[ 1| 2|,| 3|,,]</code> <br> <br>  Na maioria dos casos, os seguintes formatos são suficientes: <br><br><ul><li>  <code>[]</code> - insira uma variável na forma normal (por exemplo, um substantivo no caso nominativo do singular). </li><li>  <code>[|]</code> - insira uma variável com as propriedades especificadas. </li><li>  <code>[|]</code> - insira uma palavra, combinando-a com uma variável (por exemplo, o adjetivo "beautiful" com um substantivo em gender e case). </li><li>  <code>[||]</code> - insira uma palavra, combinando-a com uma variável e especificando propriedades adicionais. </li></ul><br>  Observe: <br><br><ul><li>  A especificação de propriedades para palavras e variáveis ​​é válida apenas no local de inserção; portanto, para obter a frase "herói bonito", devemos indicar o caso acusativo explicitamente para duas palavras: <code>[|hero|] [hero|]</code> . </li><li>  O gerador de texto pode "adivinhar" as propriedades da palavra por sua forma, por exemplo, na frase <code>[hero] [|hero]</code> você pode omitir o tempo do verbo. </li><li>  As propriedades especificadas posteriormente substituem as propriedades especificadas anteriormente.  Por exemplo, na frase <code>[|hero] [hero|]</code> , o acusativo do adjetivo não será estabelecido, pois será substituído pelo caso nominativo do variável herói. </li><li>  Uma lista de propriedades de palavras pode ser encontrada nas páginas da biblioteca no github e pypi. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Exemplo de código</b> <div class="spoiler_text">  Necessário Python 3 <br><br>  Instalação <br><br><pre> <code class="bash hljs">pip install utg python -m unittest discover utg</code> </pre><br>  Código <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> utg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> relations <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> utg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dictionary <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> utg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> words <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> utg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> templates <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> utg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> constructors <span class="hljs-comment"><span class="hljs-comment">####################################### #     ####################################### coins_forms = [#   '', '', '', '', '', '', #   '', '', '', '', '', '', #   (  , #     autofill_missed_forms) '', '', '', '', '', ''] # : ,   coins_properties = words.Properties(r.ANIMALITY.INANIMATE, r.GENDER.FEMININE) #      ,    coins_word = words.Word(type=r.WORD_TYPE.NOUN, forms=coins_forms, properties=coins_properties) #        . #      , #          : # - utg.data.WORDS_CACHES # - utg.data.INVERTED_WORDS_CACHES ############################## #     ############################## #       # (     utg.data.WORDS_CACHES[r.WORD_TYPE.VERB]) action_forms = (['', '', '', '', ''] + [''] * 15) # : ,   action_properties = words.Properties(r.ASPECT.PERFECTIVE, r.VOICE.DIRECT) action_word = words.Word(type=r.WORD_TYPE.VERB, forms=action_forms, properties=action_properties) #       (  ) action_word.autofill_missed_forms() ############################################## #       ############################################## test_dictionary = dictionary.Dictionary(words=[coins_word, action_word]) ################ #   ################ template = templates.Template() # externals —  ,      template.parse('[Npc] [|npc] [hero|] [coins] [|coins|].', externals=('hero', 'npc', 'coins')) ############################## #    ############################## hero_forms = ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''] # : ,   hero_properties = words.Properties(r.ANIMALITY.ANIMATE, r.GENDER.MASCULINE) hero = words.WordForm(words.Word(type=r.WORD_TYPE.NOUN, forms=hero_forms, properties=hero_properties)) npc_forms = ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''] # : ,   npc_properties = words.Properties(r.ANIMALITY.ANIMATE, r.GENDER.FEMININE) npc = words.WordForm(words.Word(type=r.WORD_TYPE.NOUN, forms=npc_forms, properties=npc_properties)) ########################## #   ########################## result = template.substitute(externals={'hero': hero, 'npc': npc, 'coins': constructors.construct_integer(125)}, dictionary=test_dictionary) ########################## #  ########################## result == '   125 .'</span></span></code> </pre></div></div><br><h2>  Sobre dicionários </h2><br>  Como você deve ter notado, o UTG requer a formação de um dicionário.  Isso é feito "pelas mãos", pois no momento do desenvolvimento: <br><br><ul><li>  Não encontrei dicionários morfológicos qualitativos geralmente acessíveis. </li><li>  A biblioteca de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pymorphy</a> ainda era a primeira versão e, muitas vezes, era <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">apertada</a> (especialmente no caso acusativo), motivo pelo qual tive que abandoná-la. </li></ul><br>  Se você deseja usar um gerador com muitas palavras, antes de conduzi-lo manualmente, tente usar o pymorphy2 ou procure um dicionário pronto e exporte-o. <br><br><h2>  Total </h2><br>  Espero que a biblioteca seja útil. <br><br>  Se você tem idéias para o seu desenvolvimento (ou, melhor ainda, um desejo de participar) - escreva em uma mensagem pessoal, faça solicitações, publique bugs no github. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt471278/">https://habr.com/ru/post/pt471278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt471264/index.html">Escolhendo uma alternativa ao Mailchimp: por que mudar e qual produto escolher</a></li>
<li><a href="../pt471266/index.html">O futuro está aqui ou codificado diretamente no navegador</a></li>
<li><a href="../pt471268/index.html">Entendendo os Corretores de Mensagens. Aprendendo a mecânica das mensagens através do ActiveMQ e Kafka. Capítulo 2. ActiveMQ</a></li>
<li><a href="../pt471270/index.html">Automatizamos o recebimento de dados na velocidade de carregamento de um site do Google PageSpeed ​​Insights [modelo]</a></li>
<li><a href="../pt471272/index.html">Os benefícios da digitação forte em C ++: experiência prática</a></li>
<li><a href="../pt471282/index.html">À procura de pneumonia em raios-x com Fast.ai</a></li>
<li><a href="../pt471288/index.html">Criando o rosto de um personagem para o jogo "OnAir"</a></li>
<li><a href="../pt471294/index.html">Poemas sobre Haskell, C ++ e programadores</a></li>
<li><a href="../pt471296/index.html">Lean Manufacturing - uma ferramenta para a eficiência</a></li>
<li><a href="../pt471298/index.html">Bieber e Bilan acenam com uma caneta. AI agora está cantando músicas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>