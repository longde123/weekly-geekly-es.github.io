<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§üüèø üé∞ üçß Contr√¥leur d'oignon. Nous cassons les √©crans en plusieurs parties üôáüèø ‚ôìÔ∏è üë©üèΩ‚Äçü§ù‚Äçüë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La conception atomique et la conception de syst√®mes sont populaires dans la conception: c'est √† ce moment-l√† que tout est compos√© de composants, des c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Contr√¥leur d'oignon. Nous cassons les √©crans en plusieurs parties</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/434470/"><p>  La conception atomique et la conception de syst√®mes sont populaires dans la conception: c'est √† ce moment-l√† que tout est compos√© de composants, des commandes aux √©crans.  Il n'est pas difficile pour un programmeur d'√©crire des contr√¥les s√©par√©s, mais que faire avec des √©crans entiers? </p><br><p>  Jetons un ≈ìil √† l'exemple du Nouvel An: </p><br><ul><li>  collons tout ensemble; </li><li>  divis√© en contr√¥leurs: s√©lectionnez la navigation, le mod√®le et le contenu; </li><li>  r√©utiliser le code pour d'autres √©crans. </li></ul><br><p><img src="https://habrastorage.org/webt/_5/-_/tz/_5-_tzispwunqkjevxcprqjnxb0.png"></p><a name="habracut"></a><br><h2 id="vsyo-v-kuchu">  Tout en un tas </h2><br><p>  L'√©cran de cette nouvelle ann√©e parle des heures d'ouverture sp√©ciales des pizzerias.  C'est assez simple, donc ce ne sera pas un crime d'en faire un contr√¥leur: </p><br><p><img src="https://habrastorage.org/webt/hw/ra/l5/hwral5o1ajc9znvde9tozjf8tbe.png"></p><br><p>  Mais.  La prochaine fois, lorsque nous aurons besoin d'un √©cran similaire, nous devrons le r√©p√©ter √† nouveau, puis apporter les m√™mes modifications √† tous les √©crans.  Eh bien, cela ne se produit pas sans modifications. </p><br><p>  Par cons√©quent, il est plus raisonnable de le diviser en parties et de l'utiliser pour d'autres √©crans.  J'en ai soulign√© trois: </p><br><ul><li>  navigation </li><li>  un mod√®le avec une zone de contenu et une place pour les actions en bas de l'√©cran, </li><li>  contenu unique au centre. </li></ul><br><p> S√©lectionnez chaque pi√®ce dans son propre <code>UIViewController</code> . </p><br><h2 id="konteyner-navigaciya">  Navigation en conteneurs </h2><br><p>  Les exemples les plus frappants de conteneurs de navigation sont <code>UINavigationController</code> et <code>UITabBarController</code> .  Chacun occupe une bande sur l'√©cran sous ses propres contr√¥les et laisse l'espace restant pour un autre <code>UIViewController</code> . </p><br><p>  Dans notre cas, il y aura un conteneur pour tous les √©crans modaux avec un seul bouton de fermeture. </p><br><div class="spoiler">  <b class="spoiler_title">√Ä quoi √ßa sert?</b> <div class="spoiler_text"><p>  Si nous voulons d√©placer le bouton vers la droite, nous n'aurons besoin de le modifier que dans un seul contr√¥leur. </p><br><p>  Ou, si nous d√©cidons d'afficher toutes les fen√™tres modales avec une animation sp√©ciale, et de fermer de mani√®re interactive avec un glissement, comme dans les cartes d'histoire de l'AppStore.  <code>UIViewControllerTransitioningDelegate</code> devra alors √™tre d√©fini uniquement pour ce contr√¥leur. </p></div></div><br><p><img src="https://habrastorage.org/webt/uv/hy/sk/uvhyskhr-hvxrbzgwgswlc6ul6c.png"></p><br><p>  Vous pouvez utiliser une <code>container view</code> pour s√©parer les contr√¥leurs: elle cr√©era une <code>UIView</code> dans le parent et y ins√©rera l' <code>UIView</code> contr√¥leur enfant. </p><br><p><img src="https://habrastorage.org/webt/xo/pw/ht/xopwhtfz1or0ro86mipsqyfb6y8.png"></p><br><p>  √âtirez la <code>container view</code> jusqu'au bord de l'√©cran.  <code>Safe area</code> s'appliquera automatiquement au contr√¥leur enfant: </p><br><p><img src="https://habrastorage.org/webt/du/gc/rh/dugcrhatpjzzl1essnh-5j0clrk.png"></p><br><h2 id="shablon-ekrana">  Mod√®le d'√©cran </h2><br><p>  Le contenu est √©vident √† l'√©cran: image, titre, texte.  Le bouton semble en faire partie, mais le contenu est dynamique sur diff√©rents iPhones et le bouton est fixe.  Deux syst√®mes avec des t√¢ches diff√©rentes sont visibles: l'un affiche le contenu et l'autre l'incorpore et l'aligne.  Ils doivent √™tre divis√©s en deux contr√¥leurs. </p><br><p><img src="https://habrastorage.org/webt/sc/qf/cr/scqfcryfeq1ginkhko_ypvzzt6o.jpeg"></p><br><p>  Le premier est responsable de la disposition de l'√©cran: le contenu doit √™tre centr√© et le bouton clou√© au bas de l'√©cran.  Le second dessinera le contenu. </p><br><p><img src="https://habrastorage.org/webt/gp/dr/qi/gpdrqi4gjxch0scmu7rh3zzrg8g.jpeg"></p><br><blockquote>  Sans mod√®le, tous les contr√¥leurs sont similaires, mais les √©l√©ments dansent. </blockquote><p>  Les boutons du dernier √©cran sont diff√©rents - cela d√©pend du contenu.  La d√©l√©gation aidera √† r√©soudre le probl√®me: le contr√¥leur-mod√®le demandera des contr√¥les du contenu et les affichera dans son <code>UIStackView</code> . </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingViewController.swift protocol OnboardingViewControllerDatasource { var supportingViews: [UIView] { get } } // NewYearContentViewController.swift extension NewYearContentViewController: OnboardingViewControllerDatasource { var supportingViews: [UIView] { return [view().doneButton] } }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Pourquoi afficher ()?</b> <div class="spoiler_text"><p>  <code>UIViewController</code> pouvez lire comment sp√©cialiser <code>UIView</code> avec <code>UIViewController</code> dans mon dernier article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Controller,</a> <code>UIView</code> <code>UIViewController</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous sortons le code dans UIView.</a> </p></div></div><br><p>  Les boutons peuvent √™tre attach√©s au contr√¥leur via des objets associ√©s.  Leur <code>IBOutlet</code> et <code>IBAction</code> sont stock√©s dans le contr√¥leur de contenu, seuls les √©l√©ments ne sont pas ajout√©s √† la hi√©rarchie. </p><br><p><img src="https://habrastorage.org/webt/7z/se/ub/7zseub0d7hkkc9laghstrr7u8cw.png"></p><br><p>  Vous pouvez obtenir des √©l√©ments du contenu et les ajouter au mod√®le lors de la pr√©paration de <code>UIStoryboardSegue</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingViewController.swift override func prepare(for segue: UIStoryboardSegue, sender: Any?) { if let buttonsDatasource = segue.destination as? OnboardingViewControllerDatasource { view().supportingViews = buttonsDatasource.supportingViews } }</span></span></code> </pre> <br><p>  Dans le setter, nous ajoutons des contr√¥les √† <code>UIStackView</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingView.swift var supportingViews: [UIView] = [] { didSet { for view in supportingViews { stackView.addArrangedSubview(view) } } }</span></span></code> </pre> <br><p>  En cons√©quence, notre contr√¥leur a √©t√© divis√© en trois parties: navigation, mod√®le et contenu.  Dans l'image, toute la <code>container view</code> affich√©e en gris: </p><br><p><img src="https://habrastorage.org/webt/yg/71/v1/yg71v1ajukht7pki8alekccwrcy.png"></p><br><h2 id="dinamicheskiy-razmer-kontrollera">  Taille du contr√¥leur dynamique </h2><br><p>  Le contr√¥leur de contenu a sa propre taille maximale, il est limit√© par des <code>constraints</code> internes. </p><br><p>  <code>Container view</code> ajoute des constores bas√©s sur le <code>Autoresizing mask</code> et ils entrent en conflit avec les dimensions internes du contenu.  Le probl√®me est r√©solu dans le code: dans le contr√¥leur de contenu, vous devez indiquer qu'il n'est pas affect√© par les constores du <code>Autoresizing mask</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// NewYearContentViewController.swift override func loadView() { super.loadView() view.translatesAutoresizingMaskIntoConstraints = false }</span></span></code> </pre> <br><p><img src="https://habrastorage.org/webt/je/5q/dp/je5qdpshqbjzke7vbli8vrflpnq.png"></p><br><p>  Il existe deux autres √©tapes pour Interface Builder: </p><br><p>  <strong>√âtape 1.</strong> Sp√©cifiez la <code>Intrinsic size</code> de l' <code>UIView</code> .  Les vraies valeurs appara√Ætront apr√®s le lancement, mais pour l'instant, nous en mettrons toutes appropri√©es. </p><br><p><img src="https://habrastorage.org/webt/zg/st/lh/zgstlh9ascudcd06z-3c-edpmzi.png"></p><br><p>  <strong>√âtape 2.</strong> Pour le contr√¥leur de contenu, sp√©cifiez <code>Simulated Size</code> .  Il peut ne pas correspondre √† la taille pass√©e. </p><br><div class="spoiler">  <b class="spoiler_title">Il y a eu des erreurs de mise en page, que dois-je faire?</b> <div class="spoiler_text"><p>  Des erreurs se produisent lorsque <code>AutoLayout</code> ne peut pas comprendre comment d√©composer les √©l√©ments dans la taille actuelle. </p><br><p>  Le plus souvent, le probl√®me dispara√Æt apr√®s avoir chang√© les priorit√©s de la constante.  Vous devez les d√©poser afin que l'un des <code>UIView</code> puisse s'√©tendre / se contracter plus que les autres. </p></div></div><br><h2 id="razdelyaem-na-chasti-i-pishem-v-kode">  Nous divisons en parties et √©crivons dans le code </h2><br><p>  Nous avons divis√© le contr√¥leur en plusieurs parties, mais jusqu'√† pr√©sent, nous ne pouvons pas les r√©utiliser, l'interface d' <code>UIStoryboard</code> difficile √† extraire en plusieurs parties.  Si nous devons transf√©rer certaines donn√©es vers le contenu, nous devrons alors les utiliser dans toute la hi√©rarchie.  Cela devrait √™tre l'inverse: prenez d'abord le contenu, configurez-le, puis enveloppez-le dans les conteneurs n√©cessaires.  Comme une ampoule. </p><br><p>  Trois t√¢ches apparaissent sur notre chemin: </p><br><ol><li>  S√©parez chaque contr√¥leur dans son propre <code>UIStoryboard</code> . </li><li>  Refuser la <code>container view</code> , ajouter des contr√¥leurs aux conteneurs dans le code. </li><li>  Attachez tout en arri√®re. </li></ol><br><h3 id="razdelyaem-uistoryboard">  Partager UIStoryboard </h3><br><p>  Vous devez cr√©er deux <code>UIStoryboard</code> suppl√©mentaires et y copier-coller le contr√¥leur de navigation et le contr√¥leur de mod√®le.  <code>Embed segue</code> encha√Ænement <code>Embed segue</code> sera interrompu, mais la <code>container view</code> du <code>container view</code> avec les contraintes configur√©es sera transf√©r√©e.  Les contraintes doivent √™tre enregistr√©es et la <code>container view</code> du <code>container view</code> doit √™tre remplac√©e par une <code>UIView</code> . </p><br><div class="spoiler">  <b class="spoiler_title">Le moyen le plus simple consiste √† modifier le type de vue Conteneur dans le code UIStoryboard.</b> <div class="spoiler_text"><ul><li>  ouvrir <code>UIStoryboard</code> tant que code (menu contextuel du fichier ‚Üí Ouvrir en tant que ... ‚Üí Code source); </li><li><p>  changez le type de <code>containerView</code> en <code>view</code> .  Il est n√©cessaire de modifier les balises d'ouverture et de <strong>fermeture</strong> . </p><br><p>  De la m√™me mani√®re, vous pouvez changer, par exemple, <code>UIView</code> en <code>UIScrollView</code> , si n√©cessaire.  Et vice versa. </p><br></li></ul><br><p><img src="https://habrastorage.org/webt/g8/ae/6d/g8ae6dvzd685hag645eyhc-u__y.png"></p></div></div><br><p>  Nous d√©finissons le contr√¥leur sur la propri√©t√© <code>is initial view controller</code> , et <code>UIStoryboard</code> appellerons <code>UIStoryboard</code> tant que contr√¥leur. </p><br><div class="spoiler">  <b class="spoiler_title">Nous chargeons le contr√¥leur depuis UIStoryboard.</b> <div class="spoiler_text"><p>  Si le nom du contr√¥leur correspond au nom de <code>UIStoryboard</code> , le t√©l√©chargement peut √™tre encapsul√© dans une m√©thode qui trouvera elle-m√™me le fichier souhait√©: </p><br><pre> <code class="objectivec hljs">protocol Storyboardable { } extension Storyboardable where Self: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> func instantiateInitialFromStoryboard() -&gt; Self { let controller = storyboard().instantiateInitialViewController() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> controller! as! Self } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> func storyboard(fileName: String? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">UIStoryboard</span></span> { let storyboard = <span class="hljs-built_in"><span class="hljs-built_in">UIStoryboard</span></span>(name: fileName ?? storyboardIdentifier, bundle: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> storyboard } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> var storyboardIdentifier: String { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String(describing: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> var storyboardName: String { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> storyboardIdentifier } }</code> </pre> <br><p>  Si le contr√¥leur est d√©crit en <code>.xib</code> , le constructeur standard se chargera sans ces danses.  H√©las, <code>.xib</code> ne peut contenir qu'un seul contr√¥leur, souvent cela ne suffit pas: dans un bon cas, un √©cran est compos√© de plusieurs.  Par cons√©quent, nous utilisons <code>UIStoryborad</code> , il est facile de diviser l'√©cran en plusieurs parties. </p></div></div><br><h3 id="dobavlyaem-kontroller-v-kode">  Ajouter un contr√¥leur dans le code </h3><br><p>  Pour que le contr√¥leur fonctionne correctement, nous avons besoin de toutes les m√©thodes de son cycle de vie: <code>will/did-appear/disappear</code> . </p><br><p>  Pour un affichage correct, vous devez appeler 5 √©tapes: </p><br><pre> <code class="objectivec hljs"> willMove(toParent parent: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>?) addChild(_ childController: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>) addSubview(_ subivew: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>) layout didMove(toParent parent: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>?)</code> </pre> <br><p>  Apple sugg√®re de r√©duire le code √† 4 √©tapes, car <code>addChild()</code> lui-m√™me appellera <code>willMove(toParent)</code> .  En r√©sum√©: </p><br><pre> <code class="objectivec hljs"> addChild(_ childController: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>) addSubview(_ subivew: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>) layout didMove(toParent parent: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>?)</code> </pre> <br><p>  Pour plus de simplicit√©, vous pouvez envelopper le tout en <code>extension</code> .  Pour notre cas, nous avons besoin d'une version avec <code>insertSubview()</code> . </p><br><pre> <code class="objectivec hljs">extension <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span> { func insertFullframeChildController(_ childController: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>, toView: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, index: Int) { let containerView: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> = toView ?? view addChild(childController) containerView.insertSubview(childController.view, at: index) containerView.pinToBounds(childController.view) childController.didMove(toParent: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) } }</code> </pre> <br><p>  Pour supprimer, vous avez besoin des m√™mes √©tapes, mais au lieu du contr√¥leur parent, vous devez d√©finir <code>nil</code> .  Maintenant, <code>removeFromParent()</code> appelle <code>didMove(toParent: nil)</code> , et la mise en page n'est pas n√©cessaire.  La version raccourcie est tr√®s diff√©rente: </p><br><pre> <code class="objectivec hljs"> willMove(toParent: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) view.removeFromSuperview() removeFromParent()</code> </pre> <br><h2 id="leyaut">  Disposition </h2><br><h3 id="stavim-konstreynty">  D√©finir des contraintes </h3><br><p>  Pour d√©finir correctement la taille du contr√¥leur, nous utiliserons <code>AutoLayout</code> .  Nous devons clouer tous les c√¥t√©s de tous les c√¥t√©s: </p><br><pre> <code class="objectivec hljs">extension <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> { func pinToBounds(_ view: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>) { view.translatesAutoresizingMaskIntoConstraints = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSLayoutConstraint</span></span>.activate([ view.topAnchor.constraint(equalTo: topAnchor), view.bottomAnchor.constraint(equalTo: bottomAnchor), view.leadingAnchor.constraint(equalTo: leadingAnchor), view.trailingAnchor.constraint(equalTo: trailingAnchor) ]) } }</code> </pre> <br><h2 id="dobavlyaem-docherniy-kontroller-v-kode">  Ajouter un contr√¥leur enfant dans le code </h2><br><p>  Maintenant, tout peut √™tre combin√©: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// ModalContainerViewController.swift public func embedController(_ controller: UIViewController) { insertFullframeChildController(controller, index: 0) }</span></span></code> </pre> <br><p>  En raison de la fr√©quence d'utilisation, nous pouvons envelopper tout cela en <code>extension</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// ModalContainerViewController.swift extension UIViewController { func wrapInModalContainer() -&gt; ModalContainerViewController { let modalController = ModalContainerViewController.instantiateInitialFromStoryboard() modalController.embedController(self) return modalController } }</span></span></code> </pre> <br><p>  Une m√©thode similaire est √©galement n√©cessaire pour le contr√¥leur de mod√®le.  <code>prepare(for segue:)</code> auparavant configur√©es dans <code>prepare(for segue:)</code> , mais vous pouvez maintenant les lier dans la m√©thode d'int√©gration du contr√¥leur: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingViewController.swift public func embedController(_ controller: UIViewController, actionsDatasource: OnboardingViewControllerDatasource) { insertFullframeChildController(controller, toView: view().contentContainerView, index: 0) view().supportingViews = actionsDatasource.supportingViews }</span></span></code> </pre> <br><p>  La cr√©ation d'un contr√¥leur ressemble √† ceci: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// MainViewController.swift @IBAction func showModalControllerDidPress(_ sender: UIButton) { let content = NewYearContentViewController.instantiateInitialFromStoryboard() //     let onboarding = OnboardingViewController.instantiateInitialFromStoryboard() onboarding.embedController(contentController, actionsDatasource: contentController) let modalController = onboarding.wrapInModalContainer() present(modalController, animated: true) }</span></span></code> </pre> <br><p>  La connexion d'un nouvel √©cran au mod√®le est simple: </p><br><ul><li>  supprimer ce qui n'est pas pertinent pour le contenu; </li><li>  sp√©cifier des boutons d'action en impl√©mentant le protocole OnboardingViewControllerDatasource; </li><li>  √©crire une m√©thode qui relie un mod√®le et un contenu. </li></ul><br><h2 id="eschyo-pro-konteynery">  En savoir plus sur les conteneurs </h2><br><h3 id="status-bar">  Barre d'√©tat </h3><br><p>  Il est souvent n√©cessaire que la visibilit√© de la <code>status bar</code> soit contr√¥l√©e par un contr√¥leur avec du contenu, pas un conteneur.  Il y a quelques <code>property</code> pour cela: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// UIView.swift var childForStatusBarStyle: UIViewController? var childForStatusBarHidden: UIViewController?</span></span></code> </pre> <br><p>  En utilisant ces <code>property</code> vous pouvez cr√©er une cha√Æne de contr√¥leurs, ce dernier sera responsable de l'affichage de la <code>status bar</code> . </p><br><h3 id="safe-area">  Zone s√ªre </h3><br><p>  Si les boutons de conteneur chevauchent le contenu, vous devez augmenter la zone <code>safeArea</code> .  Cela peut √™tre fait dans le code: d√©finissez <code>additinalSafeAreaInsets</code> pour les contr√¥leurs enfants.  Vous pouvez l'appeler depuis <code>embedController()</code> : </p><br><pre> <code class="objectivec hljs">private func addSafeArea(to controller: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-meta"><span class="hljs-meta">#available(iOS 11.0, *) { let buttonHeight = CGFloat(30) let topInset = UIEdgeInsets(top: buttonHeight, left: 0, bottom: 0, right: 0) controller.additionalSafeAreaInsets = topInset } }</span></span></code> </pre> <br><p>  Si vous ajoutez 30 points au-dessus, le bouton cessera de chevaucher le contenu et <code>safeArea</code> occupera la zone verte: </p><br><p><img src="https://habrastorage.org/webt/v-/ko/go/v-kogoeqmzsu0gv_x_ugytn5oos.png"></p><br><h3 id="margins-preserve-superview-margins">  Marges.  Pr√©server les marges de superview </h3><br><p>  Les contr√¥leurs ont des <code>margins</code> standard.  Habituellement, ils sont √©gaux √† 16 points de chaque c√¥t√© de l'√©cran et uniquement sur les tailles Plus, ils sont de 20 points. </p><br><p>  En fonction des <code>margins</code> vous pouvez cr√©er des constantes, l'indentation sur le bord sera diff√©rente pour diff√©rents iPhones: </p><br><p><img src="https://habrastorage.org/webt/vn/8y/0w/vn8y0whfciurongx5qmzuhenzq4.png"></p><br><p>  Lorsque nous mettons un <code>UIView</code> dans un autre, les <code>margins</code> sont divis√©es par deux: √† 8 points.  Pour √©viter cela, vous devez inclure <code>Preserve superview margins</code> .  Les <code>margins</code> <code>UIView</code> enfant seront alors √©gales aux <code>margins</code> parent.  Il convient aux conteneurs plein √©cran. </p><br><h2 id="konec">  La fin </h2><br><p>  Les contr√¥leurs de conteneurs sont un outil puissant.  Ils simplifient le code, s√©parent les t√¢ches et peuvent √™tre r√©utilis√©s.  Vous pouvez √©crire des contr√¥leurs imbriqu√©s de n'importe quelle mani√®re: dans <code>UIStoryboard</code> , en <code>.xib</code> ou simplement en code.  Plus important encore, ils sont faciles √† cr√©er et amusants √† utiliser. </p><br><p>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Un exemple d'un article sur GitHub</a> </p><br><p>  Avez-vous des √©crans √† partir desquels il serait utile de cr√©er un mod√®le?  Partagez dans les commentaires! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434470/">https://habr.com/ru/post/fr434470/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434452/index.html">AXIS vs IDIS - la bataille des fabricants de vid√©osurveillance</a></li>
<li><a href="../fr434456/index.html">O√π avons-nous obtenu la bouteille?</a></li>
<li><a href="../fr434460/index.html">Mon client Dropbox √† ligne unique pour Linux</a></li>
<li><a href="../fr434466/index.html">Ce qui d√©termine le co√ªt d'un vol dans la pratique</a></li>
<li><a href="../fr434468/index.html">Enregistrer le contenu vCenter Content Library</a></li>
<li><a href="../fr434474/index.html">Chat vert sur le contenu de l'espace</a></li>
<li><a href="../fr434476/index.html">ChatOps dans GitLab sera accessible √† tous</a></li>
<li><a href="../fr434478/index.html">Le code sans visage tuera la programmation, et nous n'y ferons rien.</a></li>
<li><a href="../fr434480/index.html">Nouvel an, gadgets, feu</a></li>
<li><a href="../fr434482/index.html">Une autre ann√©e de notre blog: r√©sultats de 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>