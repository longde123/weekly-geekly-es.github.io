<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>➡️ 🐋 🎨 Curso MIT "Segurança de sistemas de computadores". Aula 8: Modelo de Segurança de Rede, Parte 2 🙅🏼 👩‍💼 🧝🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula nº 6.858. "Segurança de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Segurança de sistemas de computadores". Aula 8: Modelo de Segurança de Rede, Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/423155/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula nº 6.858.  "Segurança de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security é um curso sobre o desenvolvimento e implementação de sistemas de computador seguros.  As palestras abrangem modelos de ameaças, ataques que comprometem a segurança e técnicas de segurança baseadas em trabalhos científicos recentes.  Os tópicos incluem segurança do sistema operacional (SO), recursos, gerenciamento de fluxo de informações, segurança de idiomas, protocolos de rede, segurança de hardware e segurança de aplicativos da web. <br><br>  Palestra 1: “Introdução: modelos de ameaças” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: “Controle de ataques de hackers” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: “Estouros de Buffer: Explorações e Proteção” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: “Separação de Privilégios” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: “De onde vêm os sistemas de segurança?” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: “Oportunidades” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: “Sandbox do Cliente Nativo” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 8: “Modelo de Segurança de Rede” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  Então, o que acontece se o navegador não processar corretamente o objeto e não conseguir identificar seu tipo?  Nesse caso, você pode ter problemas de segurança.  Um deles é chamado de ataque MIME. <br><br>  Você provavelmente conhece o MIME - este é um tipo de cabeçalho não criptografado como text / html, image.jpeg e assim por diante.  Portanto, versões mais antigas do navegador IE usavam isso porque pensavam que isso ajudaria o usuário.  Às vezes, porém, os servidores da Web atribuem a extensão incorreta ao arquivo do objeto. <br><br>  Um servidor da Web configurado incorretamente pode anexar o sufixo .html ao que realmente possui a extensão .jpeg, ou vice-versa, por exemplo, criar foo.jpg em vez de foo.html. <br><br><img src="https://habrastorage.org/webt/e_/ki/nn/e_kinnj8a4wb3_xvaxxyi6pnrtk.jpeg"><br><br>  Então, nos velhos tempos, o IE estava tentando ajudá-lo.  Ou seja, ele pegou algum tipo de recurso, enquanto pensava: "OK, esse recurso afirma ser desse tipo, de acordo com a extensão do nome do arquivo".  Mas então ele examinará apenas os primeiros 256 bytes disponíveis neste objeto.  E se ele encontrasse certos significados mágicos que indicavam que havia um tipo diferente de extensão para esse objeto, ele simplesmente diria: “ei, eu achei algo legal aqui!  "Acho que o servidor da web definiu esse objeto por engano, então, vamos tratar esse objeto como o tipo que encontrei nesses primeiros 256 bytes". <br>  E então todos se tornam vencedores, porque um navegador como o ajudou no desenvolvedor do servidor web, já que agora o site será exibido corretamente.  E o usuário vai gostar, porque ele poderá desbloquear esse conteúdo, que costumava ser apenas lixo. <br><br>  Mas esta é uma vulnerabilidade clara!  Suponha que a página contenha algum conteúdo passivo, por exemplo, uma imagem de um domínio controlado por um invasor.  No entanto, a página da vítima pensa: "mesmo que seja o conteúdo de um site malicioso de hackers, é apenas conteúdo passivo.  Ele não pode fazer nada comigo!  Em um caso extremo, uma imagem sem êxito será exibida, mas não poderá abrir nenhum código, porque o conteúdo passivo possui zero privilégios. <br><br><img src="https://habrastorage.org/webt/s4/62/z0/s462z0mmu0slljkim8tc2jwkdhm.jpeg"><br><br>  Mas o fato é que o IE pode primeiro "cheirar" essa imagem, seus primeiros 256 bytes.  E um invasor pode intencionalmente colocar código HTML e JavaScript lá.  Acontece que o site da vítima trará o que considera uma imagem e o IE executará código malicioso no contexto da página incorporada. <br><br>  Este é um tipo de exemplo de como os navegadores são complexos e como adicionar uma intenção muito boa pode causar erros de segurança muito sutis.  Então, vamos dar uma olhada em como o navegador protege vários recursos. <br><br>  Vejamos os quadros e objetos da janela (objetos que são uma janela que contém um documento DOM).  Os quadros representam esses universos independentes de JavaScript sobre os quais falamos aqui.  Quero dizer, JavaScript é uma instância do nó DOM, como mostra a figura da árvore DOM. <br><br>  Dessa forma, o quadro existirá como um objeto de nó DOM em algum lugar nesta hierarquia que é visível para JavaScript. <br><br>  No JavaScript, o objeto window é na verdade um alias para o espaço para nome global.  Parece uma ideia estúpida.  Ou seja, se você encontrasse o nome da variável global x, também seria possível acessá-la através do nome window.x. <br><br>  Assim, molduras e objetos de janela são referências muito poderosas para fornecer acessibilidade.  E eles contêm ponteiros um para o outro.  Um quadro pode conter um ponteiro para um objeto de janela vinculado e vice-versa.  De fato, essas duas coisas são equivalentes. <br>  Os quadros e os objetos de janela recebem a origem da origem de origem do quadro da URL ou, como estão sempre em uma parte segura da rede, podem obter o sufixo do nome de domínio original, ou seja, sua origem original. <br><br>  Por exemplo, um quadro pode começar assim: .xyzcom, aqui você pode ignorar o esquema e o protocolo por um segundo. <br><br>  Nesse caso, podemos assumir que a fonte de origem para (document.domain) é o sufixo yzcom.  Da mesma forma, a fonte de origem deste documento é a expressão z.com.  Isso é possível porque z.com é um sufixo do yzcom. <br><br><img src="https://habrastorage.org/webt/5r/pb/fb/5rpbfbklmhp9nszl2vmgm2pedfw.jpeg"><br><br>  A única coisa que não pode servir como fonte é a expressão .ayzcom, porque é o sufixo errado para a origem da origem.  Além disso, o sufixo de origem correto da fonte de origem não pode ser considerado simplesmente .com, porque nesse caso o site poderá afetar de alguma forma cookies ou algo parecido em qualquer site como .com, o que pode ter consequências bastante devastadoras. <br><br>  A motivação para a aceitação desses tipos de coisas é que ela está relacionada a algum tipo de relação de confiança existente.  Parece que, com os três principais parâmetros, tudo está em ordem, e o distúrbio está apenas em .com. <br><br>  <b>Público:</b> verifica <b>-</b> se que é possível fazer essas divisões em qualquer ponto ou no ponto final?  Por exemplo, seu xyzcom pode ser alterado para seu z.com? <br><br>  <b>Professor:</b> não, isso só se aplica a todos os pontos. <br><br><img src="https://habrastorage.org/webt/cl/hw/kb/clhwkbpkjrgytglv9vr0ul-3zdc.jpeg"><br><br>  <b>Público-alvo:</b> existe uma razão para não ter sido feito para que você possa indicar um super ou subdomínio, mas ao mesmo tempo eles devem concordar de alguma forma sobre de onde as informações virão?  Digamos que quero aceitar apenas o que tem a mesma origem que a minha, para que qualquer um desses recursos possa me atacar.  Além disso, tornaríamos essa interação simétrica, para que eu também pudesse influenciá-la.  Afinal, o sufixo de origem .com significa que qualquer coisa que tenha o mesmo sufixo .com pode me afetar. <br><br>  <b>Professor:</b> Sim, isso é difícil, então existem várias respostas para essa pergunta.  Em primeiro lugar, as pessoas estavam muito preocupadas com a possibilidade de um ataque com .com.  Portanto, eles queriam facilitar a compreensão da linguagem de manipulação de domínio.  Assim, eles não permitiram estragar as configurações. <br><br>  Em um segundo, falarei sobre uma coisa que permite que você faça o que está falando, mas apenas sobre sufixos de domínio.  Por enquanto, quero observar que a interface Post Message permite que os domínios se comuniquem se concordarem com isso.  Portanto, na prática, as pessoas usam Post Message para implementar a comunicação entre domínios se não puderem estabelecer a mesma fonte de origem usando os truques descritos acima.  Dessa maneira, os navegadores podem restringir domínios de acordo com esses sufixos do domínio de origem.  E aqui também há uma pequena nuance interessante - os navegadores entendem quando (document.domain) pode ser escrito e quando não pode. <br><br>  Há uma razão para isso, que consideraremos em um segundo.  Assim, dois quadros podem acessar um ao outro se pelo menos uma das duas condições a seguir for verdadeira: <br><br><ul><li>  os dois conjuntos de quadros definidos (documento.domínio) com o mesmo valor; </li><li>  nenhum desses quadros pode mudar (document.domain), apesar do valor desse documento nos dois quadros ser o mesmo. </li></ul><br><img src="https://habrastorage.org/webt/7g/sw/lr/7gswlr-7f7br4psxicyzxe5ulyy.jpeg"><br><br>  A idéia principal dessas regras é que elas protegem o domínio de ataques causados ​​por seus próprios erros ou pela nocividade de um dos subdomínios. <br><br>  Imagine que você tem um domínio xyzcom que está tentando atacar o domínio yzcom porque o primeiro domínio contém um erro ou é malicioso.  Ele tentará encurtar o domínio yzcom para uma aparência .com e depois começará a "quimizar" com o estado do JavaScript, cookies ou outras coisas. <br><br><img src="https://habrastorage.org/webt/ws/9g/7n/ws9g7n_geybc_ajfui0amho8ir4.jpeg"><br><br>  Portanto, essas duas regras significam que, se o yzcom não quiser permitir que ninguém interaja com ele, ele nunca alterará o valor (document.domain).  Portanto, quando o quadro xyzcom quiser reduzi-lo, o navegador dirá: "Sim, você deseja reduzi-lo, mas não tem o direito de fazê-lo!"  Há uma coincidência de valores, mas o domínio yzcom não indicou que deseja participar disso.  Isso está claro?  Nesse caso, pode-se ver que a maioria dos quadros funciona com a mesma política de origem. <br><br>  Agora podemos ver como nosso nó DOM é processado.  É bem simples.  Normalmente, os nós DOM obtêm origem do quadro circundante.  No caso de cookies, isso é um pouco mais complicado.  Os cookies têm um domínio e têm seu próprio caminho.  Por exemplo, você pode imaginar que um cookie possa estar associado às seguintes informações, por exemplo * .mit.edu / 6.858.  Nesse caso, o cookie possui um * .mit.edu / domain e o caminho 6.858. <br><br><img src="https://habrastorage.org/webt/4-/s3/yx/4-s3yxjeuwvhrmnftskqrmbvk30.jpeg"><br><br>  Observe que esse domínio pode ser o sufixo completo das páginas no domínio atual.  Assim, você pode executar os mesmos truques com ele que falamos anteriormente.  Observe que esse caminho 6.858 também pode ser representado como uma barra, seguida por nada, o que indica que todos os caminhos do domínio devem ter acesso ao cookie localizado aqui. <br><br>  Mas, neste caso, temos um endereço de caminho específico.  Portanto, quem define esses cookies, ele tem a chance de ver como é o domínio e o caminho.  E esses valores podem ser definidos no lado do servidor e no cliente.  No lado do cliente, você terá um objeto JavaScript chamado document.cookie.  Este é o formato usado para indicar todos os caminhos para objetos semelhantes. <br><br>  Há um sinalizador de segurança de sinalizador seguro que você pode definir em um cookie para indicar que é um arquivo HTTPS.  Nesse caso, o conteúdo HTTP não deve ter acesso a este cookie.  Essa é a principal idéia dos cookies. <br><br>  Observe que sempre que um navegador gera uma solicitação para um servidor Web específico, ele inclui todos os cookies relevantes nessa solicitação.  Existe um tipo de linha de correspondência e algoritmos que permite descobrir que esses cookies são os corretos que devem ser enviados em resposta a uma solicitação, porque eles podem ter coisas estranhas com sufixos de domínio e assim por diante. <br><br>  <b>Público-alvo:</b> os quadros podem acessar os cookies um do outro se cumprirem essas regras? <br><br>  <b>Professor:</b> sim, os quadros podem fazer isso.  Mas isso depende de como o document.domain está definido, o domínio e o caminho do cookie.  Assim, os quadros podem acessar os cookies um do outro, daí a questão: pode haver um problema se permitirmos que quadros arbitrários escrevam cookies arbitrários para as pessoas?  Basta dizer que será ruim.  A razão pela qual isso é ruim é porque esses cookies permitem que o lado do cliente do aplicativo armazene dados do usuário. <br><br>  Então, você pode imaginar que, se um invasor puder controlar ou substituir os cookies do usuário, ele poderá, por exemplo, alterar o cookie do Gmail para que o usuário efetue login na conta do Gmail pertencente a esse invasor.  Nesse caso, qualquer carta de usuário pode ser lida por um invasor.  Você pode imaginar que alguém poderá se apossar de cookies da Amazon.com para colocar todos os tipos de compras ridículas e coisas semelhantes em sua cesta. <br><br>  Assim, os cookies são um recurso muito importante para proteção.  E muitos ataques de segurança de rede são projetados para roubá-los e usá-los para causar danos. <br>  Há outra questão interessante relacionada aos cookies.  Suponha que você tenha um site foo.co.uk.  E se um site com esse nome de host puder definir cookies para co.uk? <br><br><img src="https://habrastorage.org/webt/5d/96/kj/5d96kjqqlanivfvv7zm8cqud3vk.jpeg"><br><br>  Há uma sutileza aqui relacionada às regras que discutimos anteriormente, porque o primeiro site deve ser capaz de reduzir seu domínio e definir cookies para o segundo, tudo parece legal aqui.  Mas, do ponto de vista humano, olhamos para ele com suspeita, porque entendemos que co.uk é um único domínio atômico.  No entanto, isso é equivalente a .com.  Podemos dizer que os britânicos estragaram tudo que eles deveriam ter aqui.  Mas isso não é culpa deles.  Do ponto de vista moral, esse é um único domínio que não pode ser quebrado.  Portanto, precisamos ter alguma infraestrutura especial para que os cookies funcionem corretamente. <br><br>  A Mozilla tem um site chamado publicsuffix.org que contém listas de regras sobre como os cookies, origem e domínios devem ser encurtados, levando em consideração que pode haver pontos em algumas coisas, enquanto na verdade eles devem ser considerados um único atômico o todo. <br><br>  Portanto, quando seu navegador descobrir como deve manipular cookies diferentes, precisará verificar esse lado do problema.  Ou, de alguma forma, verifique se foo.co.uk não pode reduzir o domínio para co.uk.  Portanto, há um problema muito sensível aqui. <br><br>  Existem muitos outros problemas interessantes de segurança da Web que descobrimos no processo, porque grande parte da infraestrutura original foi desenvolvida especificamente para o idioma inglês.  Por exemplo, texto ASCII ou algo assim.  Não foi originalmente projetado para uso pela comunidade internacional. <br><br>  Mas, à medida que a Internet se tornou mais popular, as pessoas começaram a dizer: "ei, no início, criamos um design bastante amplo de soluções e agora precisamos torná-lo adequado para pessoas que são forçadas a usar nosso entendimento restrito do que significa linguagem".  Portanto, agora enfrentamos todos esses problemas loucos. <br><br>  Considere como as respostas HTTP XML são tratadas pela mesma política de origem.  Por padrão, o JavaScript pode gerar apenas um deles se for construído em seu servidor de origem.  No entanto, há uma nova interface chamada Solicitação de origem cruzada, ou CORS. <br><br>  Portanto, essa é a mesma origem, a menos que o servidor tenha ativado esse dispositivo CORS.  Basicamente, é adicionado um novo cabeçalho de resposta HTTP chamado Access-Control-Allow-Origin. <br><br><img src="https://habrastorage.org/webt/4s/io/ow/4sioowzgalikh7xv3q9qui9vmo8.jpeg"><br><br>  Digamos que o JavaScript de foo.com queira fazer uma solicitação HTTP XML para bar.com.  Conforme descrito nas regras, a origem cruzada ocorre aqui.  E se o servidor bar.com quiser permitir isso, ele retornará sua resposta HTTP com o título: "Sim, deixei o foo.com me enviar essas solicitações XML XML de origem cruzada". <br><br>  Na verdade, o servidor bar.com pode responder "não", ou seja, pode recusar a solicitação.  Nesse caso, o navegador não pode concluir a solicitação XML XML.  Portanto, esse é um tipo de coisa nova, que apareceu principalmente devido a aplicativos mistos.  É necessário para aplicativos de diferentes desenvolvedores e domínios diferentes, para que eles tenham a oportunidade de trocar dados entre si. <br><br><img src="https://habrastorage.org/webt/n9/kd/w5/n9kdw5p-sfayoij0_sxnef7ct9i.jpeg"><br><br>  Portanto, em vez de foo.com, pode haver asteriscos aqui se alguém quiser obter dados de origem cruzada, e assim por diante.  Eu acho que isso é bem simples.  Existem muitos outros recursos que poderíamos ver, como imagens.  Graças ao Access-Control-Allow-Origin, um quadro pode carregar imagens de qualquer fonte que desejar.  Mas ele não pode verificar os bits desta imagem, porque acredita-se que, com diferentes políticas de fontes de origem, não é bom verificar o conteúdo dos arquivos um do outro. <br><br>  Embora o quadro não possa verificar os bits, ele ainda pode inferir o tamanho das imagens, pois vê como elas são colocadas na página.  Portanto, esse é outro desses casos estranhos, quando a mesma política de fonte de origem tenta impedir todo o vazamento de informações.  Mas, de fato, ele não é capaz de impedir tudo isso, porque a incorporação de herança mostra alguns tipos de informações. <br><br>  O CSS é semelhante às imagens, portanto, um quadro pode incorporar o CSS de qualquer fonte.  No entanto, ele não pode verificar diretamente o texto dentro do arquivo CSS se for de outra fonte.  Mas ele pode reconhecer o que esse CSS faz porque simplesmente cria vários nós e observa como o estilo deles muda.  E parece um pouco estranho. <br><br>  JavaScript é o meu exemplo favorito de como essa mesma política de origem tenta oferecer suporte a qualquer tipo de sequência inteligente.  A idéia aqui é que, se você buscar o JavaScript de forma cruzada, isso será permitido.  Você pode ativar a execução de JavaScript externo no contexto de sua própria página, mas não pode olhar o código-fonte. <br><br><img src="https://habrastorage.org/webt/rn/7k/fo/rn7kfohopdovwvtszam718nrnge.jpeg"><br><br>  Portanto, se você tiver uma fonte de tag de script igual a algo fora do seu domínio, quando essa fonte for executada, você poderá iniciar funções nele.  Mas você não poderá visualizar o código-fonte JavaScript nele. <br><br>  Tudo isso parece muito bom, mas tem um monte de "buracos".  Por exemplo, o JavaScript é uma linguagem de script dinâmico.  E funções são objetos de primeira classe.  Assim, para qualquer função f, você pode simplesmente usar a função f.tostring (), e isso fornecerá o código fonte da função f.  E as pessoas fazem isso o tempo todo, reescrevem dinamicamente e coisas assim. <br><br><img src="https://habrastorage.org/webt/yl/0s/cc/yl0scc_w8oeuvq5syu4dajkaer8.jpeg"><br><br>  Portanto, embora as políticas de origem não permitam visualizar diretamente o conteúdo da tag de script, você pode simplesmente executar a operação especificada e obter o código-fonte. <br><br>  Da mesma forma, você pode obter seu servidor doméstico a partir do seu domínio, apenas para obter o código-fonte e enviá-lo de volta para você.  Na verdade, você acabou de solicitar ao seu servidor doméstico que execute o programa Wget para obter o código-fonte dessa maneira.  Portanto, também parece um pouco tolo, ou seja, a política de origem aqui é um pouco estranha. <br><br>  <b>Público-alvo:</b> suponha que o motivo para fazer isso seja impedir o usuário de receber JavaScript, pois os cookies também podem ser enviados.  Ou seja, o usuário poderá adaptar o JavaScript resultante às suas necessidades. <br><br>  <b>Professor:</b> sim, é. <br><br>  <b>Público-alvo:</b> portanto, se você solicitar que seu servidor faça isso, ele não poderá fornecer cookies personalizados. <br><br>  <b>Professor:</b> isso é verdade, embora, na prática, o código-fonte "bruto" não tenha a intenção de ser reformulado pelo usuário.  Mas você está certo de que isso impedirá alguns ataques. <br><br> ,    ,         JavaScript,         . ,   -  ,   -,       ,       .          ,        ,   ,      .   ,  ,     . <br><br>       ,          .       -  - ,     -    HTML  JavaScript. ,    ,        .           . <br><br> ,     JavaScript,   ,   .    Java,         . <br><br><img src="https://habrastorage.org/webt/zj/qj/e1/zjqje1nf_k3svnoo1xfel-l33p0.jpeg"><br><br>       ,    HTML5     , ,      ,     ,     Java.    ,      . <br><br> ,      HTTP,        cookie.    ,     URL,    ? <br><br><img src="https://habrastorage.org/webt/vh/xg/qq/vhxgqqg7q7zf7qpw1dzh8dk8ir0.jpeg"><br><br> ,       URL- bank.com.     ,          - .  ,    URL,   ,    ,      $500     .      ,      . <br><br>    —           ,       origin,  bank.com -   ,   ,       cookie    .       : «, , ,    $500      attacker! ,   ». <br>     .    , ,  ,     ,     .     .  ,         , ,    ,   -          .  ,     ,  CSRF. <br><br>      ,       URL.   ,    c  . <br><br>  ,   -    .  –  ,        ,    : <br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">“/transfer.cdi”…</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  E dentro deste formulário, teremos os dados de entrada, que geralmente são usados ​​para inserir texto, pressionamentos de teclas, cliques no mouse e similares.  De fato, podemos deixar essa entrada oculta para que ela não apareça na página do usuário: tipo de entrada = "oculto", atribua o nome do atributo = "csrf" e o valor do valor aleatório = "a72f ...".  Este formulário será gerado no servidor. <br><br><img src="https://habrastorage.org/webt/70/za/85/70za85q7xzz7ts5bfyhs7pjd-8m.jpeg"><br><br>  Portanto, quando o usuário acessa esta página, no lado do servidor, ele gera esse valor aleatório = "a72f ..." e o incorpora no HTML que o usuário recebe.  Portanto, quando o usuário preencher esse formulário, esse URL do formulário: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bank.com/xfer?amount=500&amp;to=attacker</a> <br><br>  É complementado com um token aleatório: <br><br><pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//bank.com/xfer?amount=500&amp;to=attacker/&amp;csrf=a72f...</span></span></code> </pre> <br>  Isso significa que agora o invasor poderá adivinhar o token específico que o servidor gera para o usuário toda vez que ele for para a página do banco.  Portanto, se tivermos um valor suficientemente aleatório, o hacker não poderá falsificar nada, porque se ele indicar o token errado, as regras do servidor rejeitarão sua solicitação. <br><br>  58:00 min <br><br>  Continuação: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "Segurança de sistemas de computadores".</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aula 8: Modelo de Segurança de Rede, Parte 3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_1C62Twf0vs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  A versão completa do curso está disponível <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Obrigado por ficar conosco.  Você gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usuários da Habr em um análogo exclusivo de servidores básicos que inventamos para você:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 núcleos) 10GB DDR4 240GB SSD 1Gbps da US $ 20 ou como dividir o servidor?</a>  (as opções estão disponíveis com RAID1 e RAID10, até 24 núcleos e até 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 núcleos) 10GB DDR4 240GB SSD de 1Gbps até dezembro de graça</b> quando pagar por um período de seis meses, você pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente nós temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um prédio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt423155/">https://habr.com/ru/post/pt423155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt423145/index.html">Extensão PHP e Kotlin Native. Parte três, provavelmente final</a></li>
<li><a href="../pt423147/index.html">Sobre a estratégia e o formato de armazenamento na era Hadoop</a></li>
<li><a href="../pt423149/index.html">Comparação direta dos métodos de correção da miopia a laser ou o que você paga ao escolher o ReLEx SMILE</a></li>
<li><a href="../pt423151/index.html">Objetos globais em PHP</a></li>
<li><a href="../pt423153/index.html">Guia do Node.js, parte 2: JavaScript, V8, alguns truques de desenvolvimento</a></li>
<li><a href="../pt423157/index.html">Usando a função connect () do react-redux</a></li>
<li><a href="../pt423159/index.html">Feliz dia do programador! Ame seus desenvolvedores</a></li>
<li><a href="../pt423161/index.html">As empresas querem dados pessoais</a></li>
<li><a href="../pt423163/index.html">Conectando o CryptoPro ao Mono</a></li>
<li><a href="../pt423165/index.html">Desenho de malha dinâmica no Unreal Engine 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>