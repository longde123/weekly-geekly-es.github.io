<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍⚖️ 🙇 ⏺️ Prettier, ESLint, Husky, Lint-Staged et EditorConfig: outils pour écrire du code ordonné 😄 👩‍🔬 🕢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous vous efforcez d'écrire du code soigné, mais vous ne savez pas par où commencer ... Vous lisez les guides de style, comme celui d'Airbnb, essayez ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Prettier, ESLint, Husky, Lint-Staged et EditorConfig: outils pour écrire du code ordonné</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/428173/">  Vous vous efforcez d'écrire du code soigné, mais vous ne savez pas par où commencer ... Vous lisez les guides de style, comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">celui</a> d'Airbnb, essayez de suivre les recommandations pratiques des meilleurs experts ... Devez-vous supprimer le code inutilisé?  Vous devez rechercher des variables inutiles?  Essayez-vous d'identifier les mauvais schémas utilisés dans vos programmes?  Par exemple - vous voulez comprendre, en lisant les subtilités du code d'une certaine fonction, s'il retournera quelque chose ou non.  Cela vous semble familier?  Le problème est qu'il est très difficile pour un programmeur de faire beaucoup et d'apprendre beaucoup. <br><br>  Peut-être êtes-vous un chef d'équipe sous la direction duquel travaille une équipe de développeurs de différents niveaux?  Y a-t-il de nouvelles personnes dans votre équipe?  Cela vous dérange-t-il que le code qu'ils écrivent ne réponde pas à vos normes?  Vos journées passent-elles par des tests de code d'autrui, lorsque ces contrôles concernent principalement le respect des normes, et non la logique du programme? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/qg/vq/eo/qgvqeoxevihpbwwmwuogpsfc-ow.jpeg"></a> <br><br>  L'auteur de ce document dit qu'il était confronté à tout ce que les questions qui viennent d'être posées lui sont consacrées.  Ce à quoi il est confronté est fatigant et épuisant.  Ici, il veut parler d'outils, dont l'application correcte nous permet de résoudre les problèmes ci-dessus. <br><br>  À savoir, nous parlerons ici d'outils tels que Prettier, ESLint, Husky, Lint-Staged, EditorConfig et de l'automatisation du formatage et du linting de code.  Ce matériel est principalement axé sur le développement de React, mais les principes discutés ici peuvent être appliqués dans n'importe quel projet Web.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> référentiel où, entre autres, ce qui est discuté ici est compilé. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Plus joli</font> </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Prettier</a> est un outil de formatage de code qui vise à utiliser des règles codées en dur pour concevoir des programmes.  Il formate le code automatiquement.  Voici à quoi ça ressemble. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/731/385/f28/731385f28d65452936073391d84ba02d.gif"></div><br>  <i><font color="#999999">Prettier formate le code en suivant les règles</font></i> <br><br><h3>  <font color="#3AC1EF">▍ Les points forts de Prettier</font> </h3><br>  Voici les fonctionnalités et fonctionnalités de Prettier qui nous permettent de parler de l'utilité de cet outil: <br><br><ul><li> Ranger la base de code existante.  En utilisant Prettier, vous pouvez le faire littéralement avec une seule commande.  Le traitement manuel de grandes quantités de code prendra beaucoup plus de temps.  Imaginez, par exemple, le travail requis pour formater manuellement 20 000 lignes de code. </li><li>  Prettier est facile à mettre en œuvre.  Prettier utilise l'approche «moyenne» et la moins controversée du style lors du formatage du code.  Depuis que le projet est open source, beaucoup y ont contribué, en l'améliorant et en adoucissant les angles vifs. </li><li>  Prettier vous permet de vous concentrer sur l'écriture de code, pas sur son formatage.  Beaucoup ne réalisent tout simplement pas combien de temps et d'efforts sont consacrés à la mise en forme du code.  L'utilisation de Prettier vous permet de ne pas penser au formatage, mais de faire de la programmation à la place.  Dans mon cas, par exemple, l'efficacité du travail, grâce à Prettier, a augmenté de 10%. </li><li>  Prettier aide les débutants.  Si vous êtes un programmeur débutant travaillant dans la même équipe avec des professionnels sérieux et que vous voulez avoir l'air digne de leur expérience, Prettier vous aidera. </li></ul><br><h3>  <font color="#3AC1EF">▍Configuration de Prettier</font> </h3><br>  Voici comment utiliser Prettier dans un nouveau projet.  Créez le dossier d' <code>app</code> et accédez-y, exécutez la commande suivante sur la ligne de commande: <br><br><pre> <code class="hljs swift">npm <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> -y</code> </pre> <br>  Grâce à cette commande, <code>npm</code> initialise un nouveau projet dans le dossier <code>app</code> en y créant le fichier <code>package.json</code> . <br><br>  Dans ce matériau, j'utiliserai du <code>yarn</code> , mais ici, vous pouvez utiliser <code>npm</code> .  Prettier peut également être connecté à un projet existant. <br><br>  Installez le <code>prettier</code> package en tant que dépendance de développement de notre projet: <br><br><pre> <code class="hljs pgsql">yarn <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-comment"><span class="hljs-comment">--dev prettier</span></span></code> </pre> <br>  Grâce à cette commande, une entrée de dépendance de <code>package.json</code> sera ajoutée à <code>package.json</code> qui ressemble à ceci: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-boiler-plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A react boiler plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Adeel Imran"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"prettier --write src/**/*.js"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"devDependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.14.3"</span></span> } }</code> </pre> <br>  Nous parlerons de ce que signifie la ligne la <code>"prettier": "prettier — write src/**/*.js"</code> peu plus loin.  En attendant, créez le dossier <code>src</code> dans le dossier de l' <code>app</code> .  Dans ce dossier, créez le fichier <code>index.js</code> , bien que vous puissiez le nommer comme bon vous semble. <br><br>  Nous allons ajouter le code suivant à ce fichier (sous cette forme disgracieuse): <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> person =                     { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Yoda"</span></span>,               <span class="hljs-attr"><span class="hljs-attr">designation</span></span>: <span class="hljs-string"><span class="hljs-string">'Jedi Master '</span></span>               };             <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trainJedi</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">jediWarrion</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (jediWarrion.name === <span class="hljs-string"><span class="hljs-string">'Yoda'</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'No need! already trained'</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Training </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${jediWarrion.name}</span></span></span><span class="hljs-string"> complete`</span></span>)             } trainJedi(person)             trainJedi({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Adeel'</span></span>,             <span class="hljs-attr"><span class="hljs-attr">designation</span></span>: <span class="hljs-string"><span class="hljs-string">'padawan'</span></span> });</code> </pre> <br>  Donc, pour le moment, nous avons le <code>src/app/index.js</code> , qui contient un code assez mal conçu. <br><br>  Comment y remédier?  Il existe trois approches pour travailler avec du code mal formaté: <br><br><ol><li>  Formatez manuellement ce code. </li><li>  Utilisez un outil automatisé. </li><li>  Laissez-le tel quel et travaillez (je vous demande de ne pas choisir cette approche). </li></ol><br>  Je vais choisir la deuxième option.  Maintenant, dans notre projet, il existe une dépendance correspondante et, en outre, dans la section <code>scripts</code> du fichier <code>package.json</code> , il existe un enregistrement sur Prettier.  Il est clair que nous utiliserons cet outil pour formater le code.  Pour ce faire, créez le fichier <code>prettier.config.js</code> dans le dossier de l' <code>app</code> et ajoutez-y les règles pour Prettier: <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">exports</span></span> = { printWidth: <span class="hljs-number"><span class="hljs-number">100</span></span>, singleQuote: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, trailingComma: <span class="hljs-string"><span class="hljs-string">'all'</span></span>, bracketSpacing: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, jsxBracketSameLine: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, tabWidth: <span class="hljs-number"><span class="hljs-number">2</span></span>, semi: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, };</code> </pre> <br>  Analysons ces règles: <br><br><ul><li>  <code>printWidth: 100</code> - la longueur de la ligne ne doit pas dépasser 100 caractères. </li><li>  <code>singleQuote: true</code> - tous les guillemets doubles seront convertis en guillemets simples.  Voir le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide de</a> style Airbnb pour plus de détails.  J'aime beaucoup ce guide, je l'utilise pour améliorer la qualité de mon code. </li><li>  <code>trailingComma: 'all'</code> - fournit une virgule après la dernière propriété de l'objet.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> bon article sur ce sujet. </li><li>  <code>bracketSpacing: true</code> - responsable de l'insertion d'espaces entre le corps de l'objet et les accolades dans les littéraux d'objet.  Si cette propriété est définie sur <code>true</code> , les objets déclarés à l'aide de littéraux d'objets ressembleront à ceci: <code>{ foo: bar }</code> .  Si vous le définissez sur <code>false</code> , de telles constructions ressembleront à ceci: <code>{foo: bar}</code> . </li><li>  <code>jsxBracketSameLine: false</code> - grâce à cette règle, le symbole <code>&gt;</code> dans les éléments JSX multilignes sera placé sur la dernière ligne.  Voici à quoi ressemble le code si cette règle est définie sur <code>true</code> : </li></ul><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prettier-class"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prettier-id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{this.handleClick}</span></span></span><span class="hljs-tag">&gt;</span></span> Click Here <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Voici ce qui se passe s'il est défini sur <code>false</code> : <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prettier-class"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prettier-id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{this.handleClick}</span></span></span><span class="hljs-tag"> &gt;</span></span> Click Here <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><ul><li>  <code>tabWidth: 2</code> - définit le nombre d'espaces par niveau d'alignement. </li><li>  <code>semi: true</code> - si cette règle est définie sur <code>true</code> , un point-virgule est ajouté à la fin des expressions. </li></ul><br>  Retrouvez toutes les règles Prettier ici. <br><br>  Maintenant que les règles sont configurées, parlons de ce script: <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"prettier  — write src/**/*.js"</span></span></code> </pre> <br>  Grâce à cette conception, Prettier se lance et trouve tous les fichiers <code>.js</code> dans le dossier <code>src</code> .  L'indicateur <code>--write</code> lui dit d'enregistrer les fichiers formatés au fur et à mesure qu'ils sont traités et corrige les erreurs de formatage qui s'y trouvent. <br><br>  Exécutez le script à partir de la ligne de commande: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">yarn</span></span> prettier</code> </pre> <br>  C'est ce qui s'est passé après cela avec le code mal formaté montré ci-dessus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90a/7d3/969/90a7d3969ed2861181de76d899aed951.gif"></div><br>  <i><font color="#999999">Résultat du formatage du code avec Prettier</font></i> <br><br>  Sur ce, nous supposerons qu'avec Prettier nous avons compris.  Parlons des linters. <br><br><h2>  <font color="#3AC1EF">ESLint</font> </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le linting</a> est un type d'analyse de code statique qui est souvent utilisé pour trouver des modèles de conception problématiques ou du code qui ne suit pas certaines directives de style. <br><br>  Il existe des linters conçus pour la plupart des langages de programmation, parfois les compilateurs incluent le linting dans le processus de compilation du code.  Cette définition du peluchage est tirée de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page d'</a> informations open source pour le JavaScript ESLint JavaScript open source, dont nous parlerons. <br><br><h3>  <font color="#3AC1EF">▍Pourquoi ai-je besoin d'un linter pour JavaScript?</font> </h3><br>  Étant donné que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JavaScript</a> est un langage de programmation dynamique avec un typage faible, le code écrit est sujet aux erreurs commises par les développeurs.  JavaScript est un langage interprété, donc la syntaxe et d'autres erreurs dans le code ne sont généralement détectées qu'après l'exécution de ce code. <br><br>  Les linters, comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ESLint</a> , permettent aux développeurs de trouver des problèmes dans le code sans le démarrer. <br><br><h3>  <font color="#3AC1EF">▍Pourquoi ESLint est-il un outil spécial?</font> </h3><br>  Une bonne question a été posée dans le titre de cette section.  Le point ici est que ESLint prend en charge les plugins.  Ainsi, les règles de vérification de code ne doivent pas être un package monolithique.  Tout ce dont vous avez besoin peut être connecté au besoin.  Chaque règle de charpie ajoutée au système est autonome, elle peut être activée ou désactivée, indépendamment des autres.  Chaque règle peut se voir attribuer un niveau d'alerte conformément au souhait du développeur - il peut s'agir d'un avertissement (avertissement) ou d'une erreur (erreur). <br><br>  Lorsque vous utilisez ESLint, vous travaillez avec un système entièrement personnalisable qui peut refléter votre compréhension de ce à quoi devrait ressembler le code correct et capturer l'ensemble de règles que vous suivez. <br><br>  Parmi les guides de style JavaScript existants, les suivants sont très populaires: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide de style Google JavaScript</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide de style JavaScript Airbnb</a> </li></ul><br>  Comme je l'ai déjà mentionné, j'utilise le guide de style Airbnb.  J'ai été conseillé par ce document par mon manager dans l'entreprise où ma carrière professionnelle a commencé, et je considère ce guide de style comme mon atout le plus précieux. <br><br>  Ce guide est activement maintenu - jetez un œil à son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">référentiel</a> sur GitHub.  Ici, je vais utiliser un ensemble de règles basées sur lui. <br><br>  Maintenant, travaillons sur le fichier <code>package.json</code> , ajoutez-y quelques dépendances: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-boiler-plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A react boiler plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Adeel Imran"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"lint"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"lint:write"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/ --fix"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"prettier --write src/**/*.js"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"husky"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"hooks"</span></span>: {     <span class="hljs-attr"><span class="hljs-attr">"pre-commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"lint-staged"</span></span>   } }, <span class="hljs-attr"><span class="hljs-attr">"lint-staged"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"*.(js|jsx)"</span></span>: [<span class="hljs-string"><span class="hljs-string">"npm run lint:write"</span></span>, <span class="hljs-string"><span class="hljs-string">"git add"</span></span>] }, <span class="hljs-attr"><span class="hljs-attr">"devDependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"babel-eslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"^8.2.3"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.19.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-config-airbnb"</span></span>: <span class="hljs-string"><span class="hljs-string">"^17.0.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-config-jest-enzyme"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.0.2"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-babel"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.1.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-import"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.12.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-jest"</span></span>: <span class="hljs-string"><span class="hljs-string">"^21.18.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-jsx-a11y"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.0.3"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.6.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.9.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"husky"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.1.2"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"lint-staged"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.3.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.14.3"</span></span> } }</code> </pre> <br>  Avant de parler de la façon de travailler avec cette configuration, je veux m'attarder sur les dépendances du projet qui sont ajoutées à <code>package.json</code> .  Je crois qu'avant d'utiliser certaines dépendances, vous devez savoir quel rôle elles jouent. <br><br>  Par conséquent, nous discuterons du rôle des packages présentés ici: <br><br><ul><li>  <code>babel-eslint</code> - vous permet d'utiliser le peluchage pour appliquer à tout ce que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Babel</a> donne.  Vous n'avez pas besoin de ce plugin si vous n'utilisez pas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flow</a> ou des fonctionnalités expérimentales qu'ESLint ne prend pas encore en charge. </li><li>  <code>eslint</code> est le principal outil utilisé pour coder le code. </li><li>  <code>eslint-config-airbnb</code> - Fournit des règles Airbnb en tant que configuration pouvant être modifiée. </li><li>  <code>eslint-plugin-babel</code> est un plugin ESLint qui complète le <code>babel-eslint</code> .  Il a repensé les règles qui, lors de l'utilisation de <code>babel-eslint</code> , posent des problèmes lors du traitement des fonctionnalités expérimentales. </li><li>  <code>eslint-plugin-import</code> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> paquet prend en charge la liaison de nouvelles constructions de syntaxe d' <code>import/export</code> et aide à prévenir les problèmes associés à une orthographe incorrecte des chemins de fichiers et des noms des modules importés. </li><li>  <code>eslint-plugin-jsx-a11y</code> - fournit des règles concernant la disponibilité des éléments JSX pour les personnes handicapées.  L'accessibilité du Web est très importante. </li><li>  <code>eslint-plugin-prettier</code> - Aide ESLint et Prettier à travailler ensemble.  Cela ressemble à ceci: lorsque Prettier formate le code, il le fait en tenant compte des règles ESLint. </li><li>  <code>eslint-plugin-react</code> - contient des règles ESLint conçues pour React. </li></ul><br>  Dans cet article, nous ne parlons pas de test de code, mais dans le <code>package.json</code> ci-dessus, il existe des dépendances conçues pour les tests unitaires à l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Jest / Enzyme</a> .  Maintenant, si vous décidez d'utiliser ces outils pour les tests, une description des packages concernés. <br><br><ul><li>  <code>eslint-config-jest-enzyme</code> - ce package est destiné aux cas où vous utilisez <code>jest-environment-enzyme</code> , ce qui conduit au fait que les variables React et Enzyme sont globales.  Grâce à cela, ESLint n'émettra pas d'avertissements sur ces variables. </li><li>  <code>eslint-plugin-jest —</code> Plugin ESlint pour Jest. </li></ul><br>  Il y a quelques autres packages dans le fichier que nous discuterons plus tard, en discutant des problèmes d'automatisation.  C'est <code>husky</code> et <code>lint-staged</code> . <br><br>  Maintenant que nous avons, en termes généraux, discuté de nos outils, nous allons continuer à travailler. <br>  Créez le fichier <code>.eslintrc.js</code> dans le dossier de l' <code>app</code> : <br><br><pre> <code class="hljs powershell">module.exports = {   env: {       es6: true,       browser: true,       node: true,   },   extends: [<span class="hljs-string"><span class="hljs-string">'airbnb'</span></span>, <span class="hljs-string"><span class="hljs-string">'plugin:jest/recommended'</span></span>, <span class="hljs-string"><span class="hljs-string">'jest-enzyme'</span></span>],   plugins: [       <span class="hljs-string"><span class="hljs-string">'babel'</span></span>,       <span class="hljs-string"><span class="hljs-string">'import'</span></span>,       <span class="hljs-string"><span class="hljs-string">'jsx-a11y'</span></span>,       <span class="hljs-string"><span class="hljs-string">'react'</span></span>,       <span class="hljs-string"><span class="hljs-string">'prettier'</span></span>,   ],   parser: <span class="hljs-string"><span class="hljs-string">'babel-eslint'</span></span>,   parserOptions: {       ecmaVersion: <span class="hljs-number"><span class="hljs-number">6</span></span>,       sourceType: <span class="hljs-string"><span class="hljs-string">'module'</span></span>,       ecmaFeatures: {           jsx: true       }   },   rules: {       <span class="hljs-string"><span class="hljs-string">'linebreak-style'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //    Windows.       <span class="hljs-string"><span class="hljs-string">'arrow-parens'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //   prettier       <span class="hljs-string"><span class="hljs-string">'object-curly-newline'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //   prettier       <span class="hljs-string"><span class="hljs-string">'no-mixed-operators'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //   prettier       <span class="hljs-string"><span class="hljs-string">'arrow-body-style'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //  -   ?       <span class="hljs-string"><span class="hljs-string">'function-paren-newline'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //   prettier       <span class="hljs-string"><span class="hljs-string">'no-plusplus'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>,       <span class="hljs-string"><span class="hljs-string">'space-before-function-paren'</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, //   prettier       <span class="hljs-string"><span class="hljs-string">'max-len'</span></span>: [<span class="hljs-string"><span class="hljs-string">'error'</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, { <span class="hljs-type"><span class="hljs-type">ignoreUrls</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span>, }], // airbnb           <span class="hljs-string"><span class="hljs-string">'no-console'</span></span>: <span class="hljs-string"><span class="hljs-string">'error'</span></span>, // airbnb         <span class="hljs-string"><span class="hljs-string">'no-alert'</span></span>: <span class="hljs-string"><span class="hljs-string">'error'</span></span>, // airbnb         <span class="hljs-string"><span class="hljs-string">'no-param-reassign'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //  -   ?       <span class="hljs-string"><span class="hljs-string">"radix"</span></span>: <span class="hljs-string"><span class="hljs-string">"off"</span></span>, // parseInt, parseFloat  radix .    .       <span class="hljs-string"><span class="hljs-string">'react/require-default-props'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, // airbnb           <span class="hljs-string"><span class="hljs-string">'react/forbid-prop-types'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, // airbnb           <span class="hljs-string"><span class="hljs-string">'react/jsx-filename-extension'</span></span>: [<span class="hljs-string"><span class="hljs-string">'error'</span></span>, { <span class="hljs-type"><span class="hljs-type">extensions</span></span>: [<span class="hljs-string"><span class="hljs-string">'.js'</span></span>] }], // airbnb  .jsx       <span class="hljs-string"><span class="hljs-string">'prefer-destructuring'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>,       <span class="hljs-string"><span class="hljs-string">'react/no-find-dom-node'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //           <span class="hljs-string"><span class="hljs-string">'react/no-did-mount-set-state'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>,       <span class="hljs-string"><span class="hljs-string">'react/no-unused-prop-types'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //            <span class="hljs-string"><span class="hljs-string">'react/jsx-one-expression-per-line'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>,       <span class="hljs-string"><span class="hljs-string">"jsx-a11y/anchor-is-valid"</span></span>: [<span class="hljs-string"><span class="hljs-string">"error"</span></span>, { <span class="hljs-string"><span class="hljs-string">"components"</span></span>: [<span class="hljs-string"><span class="hljs-string">"Link"</span></span>], <span class="hljs-string"><span class="hljs-string">"specialLink"</span></span>: [<span class="hljs-string"><span class="hljs-string">"to"</span></span>] }],       <span class="hljs-string"><span class="hljs-string">"jsx-a11y/label-has-for"</span></span>: [<span class="hljs-number"><span class="hljs-number">2</span></span>, {           <span class="hljs-string"><span class="hljs-string">"required"</span></span>: {               <span class="hljs-string"><span class="hljs-string">"every"</span></span>: [<span class="hljs-string"><span class="hljs-string">"id"</span></span>]           }       }], //     htmlFor  label       <span class="hljs-string"><span class="hljs-string">'prettier/prettier'</span></span>: [<span class="hljs-string"><span class="hljs-string">'error'</span></span>],   }, };</code> </pre> <br>  Ajoutez maintenant le fichier <code>.eslintignore</code> dossier de l' <code>app</code> : <br><br><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">/.git /</span></span>.vscode node_modules</code> </pre> <br>  Parlons maintenant de la <code>.eslintrc.js</code> fichier <code>.eslintrc.js</code> et de la signification des constructions qui y sont présentées. <br><br>  Ce fichier a la structure suivante: <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">exports</span></span> = {  env:{},  extends: {},  plugin: {},  parser: {},  parserOptions: {},  rules: {}, };</code> </pre> <br>  Considérez les blocs de ce fichier représentés par des objets avec les noms correspondants: <br><br><ul><li>  <code>env</code> - vous permet de spécifier une liste des environnements pour lesquels vous prévoyez de vérifier le code.  Dans notre cas, les <code>es6</code> , <code>browser</code> et <code>node</code> sont définies sur <code>true</code> .  Le paramètre <code>es6</code> inclut des fonctionnalités ES6, à l'exception des modules (cette fonctionnalité définit automatiquement, dans le bloc <code>parserOptions</code> , le paramètre <code>ecmaVersion</code> sur <code>6</code> ).  Le paramètre de <code>browser</code> des variables de navigateur globales telles que <code>Windows</code> .  Le paramètre <code>node</code> ajoute des variables d'environnement et des étendues globales Node.js, par exemple, <code>global</code> .  Des détails sur les environnements peuvent être trouvés <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </li><li>  <code>extends</code> - est un tableau de lignes avec des configurations, avec chaque configuration supplémentaire étend la précédente.  Les règles de <code>airbnb</code> Airbnb sont utilisées <code>airbnb</code> , qui sont développées en <code>jest</code> puis développées en <code>jest-enzyme</code> . </li><li>  <code>plugins</code> - voici les règles de peluchage que nous voulons utiliser.  Nous appliquons les règles <code>babel</code> , <code>import</code> , <code>jsx-a11y</code> , <code>jsx-a11y</code> , <code>prettier</code> , dont nous avons déjà parlé. </li><li>  <code>parser</code> - ESLint utilise l' <code>parser</code> Espree par défaut, mais puisque nous travaillons avec Babel, nous devons utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Babel-ESLint</a> . </li><li>  <code>parserOptions</code> - puisque nous avons changé l'analyseur standard en <code>babel-eslint</code> , nous devons également définir les propriétés dans ce bloc.  La propriété <code>ecmaVersion</code> définie sur <code>6</code> indique à ESLint que le code ES6 sera vérifié.  Comme nous écrivons du code dans des modules <code>EcmaScript</code> , la propriété <code>sourceType</code> définie sur <code>module</code> .  Et enfin, puisque nous utilisons React, ce qui signifie utiliser JSX, un objet avec la clé <code>jsx</code> définie sur <code>true</code> écrit dans la propriété <code>ecmaFeatures</code> . </li><li>  <code>rules</code> - J'aime le plus cette partie du fichier <code>.eslintrc.js</code> car elle vous permet de configurer les règles ESLint.  Toutes les règles que nous avons développées ou ajoutées à l'aide de plugins peuvent être modifiées ou redéfinies, et cela se fait dans le bloc de <code>rules</code> .  Le texte du fichier contient des commentaires sur les règles. </li></ul><br>  Parlons <code>.eslintignore</code> fichier <code>.eslintignore</code> .  Ce fichier accepte une liste de chemins représentant des dossiers dont le contenu ne doit pas être traité à l'aide d'ESLint. <br><br>  Trois dossiers sont définis ici: <br><br><ul><li>  <code>/.git</code> - Je n'ai pas besoin d'ESLint pour vérifier les fichiers liés à Git. </li><li>  <code>/.vscode</code> - le projet a ce dossier car j'utilise VS Code.  Ici, l'éditeur stocke les informations de configuration qui peuvent être définies pour chaque projet.  Ces données ne doivent pas non plus être traitées par le linter. </li><li>  <code>node-modules</code> - les fichiers de dépendances n'ont pas non plus besoin d'être vérifiés avec un linter. </li></ul><br>  Voyons maintenant quelques nouveaux scripts apparus dans <code>package.json</code> .  Les voici: <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"lint"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/"</span></span> <span class="hljs-string"><span class="hljs-string">"lint:write"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/ --fix"</span></span></code> </pre> <br>  Si vous exécutez le premier d'entre eux, en utilisant la commande <code>yarn lint</code> ou <code>npm run lint</code> , le linter examinera tous les fichiers du répertoire <code>src</code> et affichera un rapport détaillé sur les fichiers dans lesquels il a trouvé des erreurs.  À l'aide de ce rapport, vous pouvez corriger ces erreurs. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a5/568/b35/9a5568b35f1d443687849ba93badea49.gif"></div><br>  <i><font color="#999999">Exécution du script lint</font></i> <br><br>  Si vous exécutez le deuxième script ( <code>yarn lint:write</code> ), ESLint effectuera la même vérification que précédemment.  La seule différence est que dans ce mode, le système essaiera de corriger les erreurs détectées, essayera d'amener le code sous la forme la plus décente possible. <br><br><h2>  <font color="#3AC1EF">Extension ESLint pour VS Code</font> </h2><br>  Nous avons déjà configuré Prettier et ESLint, mais pour utiliser les capacités de ces outils, nous devons exécuter des scripts.  Ce n'est pas très pratique, alors essayez de le réparer.  À savoir, nous voulons nous assurer que le formatage et le peluchage du code sont effectués par la commande pour enregistrer le fichier dans l'éditeur.  De plus, nous souhaitons effectuer le linting et le formatage du code avant de valider. <br><br>  À titre d'exemple, nous utilisons l'éditeur VS Code.  Nous aurons besoin de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'extension ESLint</a> pour VS Code.  Pour l'installer, vous pouvez ouvrir le panneau d'extension VS Code ( <code>ctrl+shift+x</code> ).  Ici, dans le champ de recherche, entrez <code>eslint</code> .  Une liste d'extensions apparaît.  Ce qui nous intéresse est celui dont les informations pour les développeurs sont Dirk Baeumer.  Après avoir installé cette extension, redémarrez l'éditeur. <br><br>  Maintenant, dans le dossier racine du projet ( <code>app</code> ), créez le dossier <code>.vscode</code> (faites attention au point au début du nom - c'est important).  Dans ce dossier, créez un fichier <code>settings.json</code> avec le contenu suivant: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"editor.formatOnSave"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"eslint.autoFixOnSave"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }</code> </pre> <br>  Considérez son contenu. <br><br><ul><li>  La propriété <code>editor.formatOnSave</code> définie sur <code>false</code> indique que nous n'avons pas besoin de la configuration standard pour appliquer au formatage de fichier, car cela peut provoquer un conflit avec ESLint et Prettier. </li><li>  La propriété <code>eslint.autoFixOnSave</code> définie sur <code>true</code> , car il est nécessaire que le plug-in installé se déclenche chaque fois qu'un fichier est enregistré.  Étant donné qu'ESLint et Prettier fonctionnent ensemble dans un projet, l'enregistrement du fichier entraîne à la fois le formatage et le linting de code. </li></ul><br>  Il est important de noter que maintenant, lorsque le script <code>lint:write</code> est exécuté, il effectuera à la fois le linting et le formatage du code. <br><br>  Imaginez vos sentiments si vous obteniez un code de projet de 20 000 lignes que vous auriez besoin de vérifier et d'améliorer.  Imaginez maintenant que vous deviez le faire manuellement.  Un tel travail prendrait probablement un mois.  Et à l'aide des outils d'automatisation ci-dessus, tout cela se fait en une trentaine de secondes. <br><br>  Maintenant, après avoir configuré tout ce dont vous avez besoin, chaque fois que vous enregistrez le fichier avec le code, l'éditeur se chargera de vérifier et de formater le texte du programme.  Cependant, nous parlons ici de l'éditeur VS Code.  Il est possible qu'un membre de votre équipe préfère un autre éditeur.  Il n'y a rien de mal à cela, mais pour que tout le monde puisse travailler plus facilement, nous devrons trouver autre chose à automatiser. <br><br><h2>  <font color="#3AC1EF">Husky</font> </h2><br>  Le paquet Husky vous permet d'utiliser des crochets Git.  Cela signifie que vous avez la possibilité d'effectuer certaines actions avant de valider ou d'envoyer le code du référentiel. <br><br>  Afin de profiter des fonctionnalités de Husky, installez d'abord ce package: <br><br><pre> <code class="hljs pgsql">yarn <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-comment"><span class="hljs-comment">--dev husky</span></span></code> </pre> <br>  Après cela, ajoutez ce qui suit à <code>package.json</code> : <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"husky"</span></span>: {     <span class="hljs-string"><span class="hljs-string">"hooks"</span></span>: {         <span class="hljs-string"><span class="hljs-string">"pre-commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"YOUR_COMMAND_HERE"</span></span>,    <span class="hljs-string"><span class="hljs-string">"pre-push"</span></span>: <span class="hljs-string"><span class="hljs-string">"YOUR_COMMAND_HERE"</span></span>    } },</code> </pre> <br>  Cela conduira au fait qu'avant d'exécuter la commande <code>commit</code> ou <code>push</code> , un certain script sera appelé, qui, par exemple, effectue un test de code ou un formatage. <br><br>  Des détails sur Husky peuvent être trouvés <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h2>  <font color="#3AC1EF">Lint-staged</font> </h2><br>  Le package par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">étapes Lint</a> vous permet de vérifier les fichiers indexés à l'aide du linter, ce qui permet d'éviter que des erreurs soient envoyées au référentiel. <br><br>  Linting est logique avant de valider le code.  Grâce à cela, vous pouvez vous assurer que les erreurs ne pénètrent pas dans le référentiel et fournir un style unifié du code qui y arrive.  Cependant, linting pour vérifier l'ensemble du projet peut être une tâche trop longue, et les résultats d'une telle vérification peuvent être dénués de sens.  En fin de compte, le peluchage peut avoir besoin d'exposer les fichiers que vous prévoyez de valider. <br><br>  Lint-staged vous permet d'effectuer un ensemble de tâches arbitraires sur des fichiers indexés filtrés par un modèle de recherche.  Des détails à ce sujet peuvent être trouvés <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Installez le package par étapes Lint: <br><br><pre> <code class="hljs pgsql">yarn <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-comment"><span class="hljs-comment">--dev lint-staged</span></span></code> </pre> <br>  Ensuite, dans le fichier <code>package.json</code> , ajoutez ce qui suit: <br><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"lint-staged"</span></span>: {     <span class="hljs-string"><span class="hljs-string">"*.(js|jsx)"</span></span>: [<span class="hljs-string"><span class="hljs-string">"npm run lint:write"</span></span>, <span class="hljs-string"><span class="hljs-string">"git add"</span></span>] },</code> </pre> <br>  Grâce à cette construction, la commande <code>lint:write</code> sera exécutée en premier, vérifiant le contenu du fichier et corrigeant les erreurs, après quoi les fichiers seront ajoutés à l'index avec la commande <code>git add</code> .  Maintenant, cette commande vise les fichiers <code>.js</code> et <code>.jsx</code> , mais la même chose peut être faite avec des fichiers d'autres types. <br><br><h2>  <font color="#3AC1EF">Partage Husky et Lint</font> </h2><br>  Considérez un diagramme d'action qui vous permet d'organiser le prochain flux de travail.  Chaque fois que vous validez des fichiers avec du code, avant d'effectuer cette opération, le système exécute le script <code>lint-staged</code> qui, à son tour, exécute le script <code>lint:write</code> , qui effectue le linting et le formatage du code.  Après cela, les fichiers sont ajoutés à l'index puis validés.  Il me semble que c'est très pratique.  En fait, dans le code présenté précédemment du fichier <code>package.json</code> , cela est déjà implémenté, nous n'en avons tout simplement pas parlé auparavant. <br><br>  Voici à nouveau le contenu de notre <code>package.json</code> : <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-boiler-plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A react boiler plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Adeel Imran"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"lint"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"lint:write"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/ --fix"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"prettier --write src/**/*.js"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"husky"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"hooks"</span></span>: {     <span class="hljs-attr"><span class="hljs-attr">"pre-commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"lint-staged"</span></span>   } }, <span class="hljs-attr"><span class="hljs-attr">"lint-staged"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"*.(js|jsx)"</span></span>: [<span class="hljs-string"><span class="hljs-string">"npm run lint:write"</span></span>, <span class="hljs-string"><span class="hljs-string">"git add"</span></span>] }, <span class="hljs-attr"><span class="hljs-attr">"devDependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"babel-eslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"^8.2.3"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.19.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-config-airbnb"</span></span>: <span class="hljs-string"><span class="hljs-string">"^17.0.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-config-jest-enzyme"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.0.2"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-babel"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.1.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-import"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.12.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-jest"</span></span>: <span class="hljs-string"><span class="hljs-string">"^21.18.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-jsx-a11y"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.0.3"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.6.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.9.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"husky"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.1.2"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"lint-staged"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.3.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.14.3"</span></span> } }</code> </pre> <br>  Maintenant que vous connaissez Husky et Lint-Staged, vous pouvez évaluer leur impact sur le travail avec Git.  À savoir, supposons que les commandes suivantes ont été exécutées: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> git add . <span class="hljs-variable"><span class="hljs-variable">$</span></span> git commit <span class="hljs-literal"><span class="hljs-literal">-m</span></span> <span class="hljs-string"><span class="hljs-string">"some descriptive message here"</span></span></code> </pre> <br>  Il est clair qu'avant de s'engager, le code sera vérifié pour la conformité avec les règles spécifiées dans <code>.eslintrc.js</code> et, si nécessaire, corrigé.  Grâce à cela, les erreurs n'entreront jamais dans le référentiel d'un projet en cours. <br><br>  Vous savez maintenant comment intégrer Prettier, ESLint, Husky et Lint-staged dans votre projet. <br><br>  Permettez-moi de vous rappeler que nous avons dit ci-dessus que tous les membres de votre équipe n'utilisent pas mon code VS préféré.  Pour que tous fonctionnent <code>.editorconfig</code> , nous devons traiter le fichier <code>.editorconfig</code> . <br><br><h2>  <font color="#3AC1EF">Fichier .Editorconfig</font> </h2><br>  Différents membres de votre équipe peuvent utiliser différents éditeurs.  Les forçant à utiliser n'importe quel éditeur pour quoi que ce soit.  Cependant, pour que tout le monde utilise les mêmes paramètres, concernant par exemple les retraits ou les sauts de ligne, nous utilisons le fichier.  <code>editorconfig</code> .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il permet de maintenir un ensemble uniforme de règles dans des équipes hétérogènes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur le site Web du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">projet,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous pouvez trouver une liste des éditeurs qui prennent en charge ce fichier. </font><font style="vertical-align: inherit;">En particulier, il comprend WebStorm, AppCode, Atom, Eclipse, Emacs, BBEdit et autres. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créez un fichier dans le dossier de </font></font><code>app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">notre projet </font></font><code>.editorconfig</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et ajoutez-y le code suivant:</font></font><br><br><pre> <code class="hljs pgsql"># EditorConfig -  : http://EditorConfig.org #  EditorConfig   root = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> [*.md] trim_trailing_whitespace = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> [*.js] trim_trailing_whitespace = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> #     Unix       [*] indent_style = space indent_size = <span class="hljs-number"><span class="hljs-number">2</span></span> end_of_line = lf charset = utf<span class="hljs-number"><span class="hljs-number">-8</span></span> insert_final_newline = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> max_line_length = <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Expliquons les paramètres utilisés dans ce fichier: </font></font><br><br><ul><li> <code>trim_trailing_whitespace = false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- la suppression des espaces à la fin des lignes dans les </font></font><code>.md</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichiers n'est pas effectuée. </font><font style="vertical-align: inherit;">Une option similaire pour </font></font><code>.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-files est définie sur </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li> <code>indent_style = space</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - les retraits sont faits d'espaces et non de tabulations. </font></font></li><li> <code>indent_size = 2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - la taille du tiret est de deux espaces. </font></font></li><li> <code>end_of_line = lf</code> —     <code>lf</code> .   ,      ,        .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . </li><li> <code>insert_final_newline = true</code> —       . </li><li> <code>max_line_length = 100</code> —      100 . </li></ul><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br> ,   ,     ,         . ,  ,            . <br><br>  <b>Chers lecteurs!</b>         ?    ? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428173/">https://habr.com/ru/post/fr428173/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428159/index.html">Tableau à partir de la théière ou visualisation de l'analyse des comptes PAMM</a></li>
<li><a href="../fr428161/index.html">Les réformes visant à subventionner les combustibles fossiles qui ont été réalisées grâce à un travail acharné sont en danger</a></li>
<li><a href="../fr428165/index.html">Podcast du noyau Linux avec Open Source Summit Europe 2018</a></li>
<li><a href="../fr428167/index.html">La première usine de robots en Russie et qu'est-ce que la saucisse a à voir avec ça?</a></li>
<li><a href="../fr428169/index.html">DJI annonce Mavic 2 Enterprise - un outil puissant pour les professionnels</a></li>
<li><a href="../fr428175/index.html">Implémentation de l'arbre C de préfixe C</a></li>
<li><a href="../fr428177/index.html">Alors, quel est le problème avec la recherche d'emploi / les travailleurs en informatique?</a></li>
<li><a href="../fr428179/index.html">Lors d'une vente aux enchères japonaise, un prototype de manette Wii, développé pour le GameCube</a></li>
<li><a href="../fr428181/index.html">Machine morale: impitoyable ou vide de sens?</a></li>
<li><a href="../fr428183/index.html">Implémentation de l'algorithme de Levenberg-Marquardt pour l'optimisation des réseaux de neurones sur TensorFlow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>