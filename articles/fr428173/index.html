<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äç‚öñÔ∏è üôá ‚è∫Ô∏è Prettier, ESLint, Husky, Lint-Staged et EditorConfig: outils pour √©crire du code ordonn√© üòÑ üë©‚Äçüî¨ üï¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous vous efforcez d'√©crire du code soign√©, mais vous ne savez pas par o√π commencer ... Vous lisez les guides de style, comme celui d'Airbnb, essayez ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Prettier, ESLint, Husky, Lint-Staged et EditorConfig: outils pour √©crire du code ordonn√©</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/428173/">  Vous vous efforcez d'√©crire du code soign√©, mais vous ne savez pas par o√π commencer ... Vous lisez les guides de style, comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">celui</a> d'Airbnb, essayez de suivre les recommandations pratiques des meilleurs experts ... Devez-vous supprimer le code inutilis√©?  Vous devez rechercher des variables inutiles?  Essayez-vous d'identifier les mauvais sch√©mas utilis√©s dans vos programmes?  Par exemple - vous voulez comprendre, en lisant les subtilit√©s du code d'une certaine fonction, s'il retournera quelque chose ou non.  Cela vous semble familier?  Le probl√®me est qu'il est tr√®s difficile pour un programmeur de faire beaucoup et d'apprendre beaucoup. <br><br>  Peut-√™tre √™tes-vous un chef d'√©quipe sous la direction duquel travaille une √©quipe de d√©veloppeurs de diff√©rents niveaux?  Y a-t-il de nouvelles personnes dans votre √©quipe?  Cela vous d√©range-t-il que le code qu'ils √©crivent ne r√©ponde pas √† vos normes?  Vos journ√©es passent-elles par des tests de code d'autrui, lorsque ces contr√¥les concernent principalement le respect des normes, et non la logique du programme? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/qg/vq/eo/qgvqeoxevihpbwwmwuogpsfc-ow.jpeg"></a> <br><br>  L'auteur de ce document dit qu'il √©tait confront√© √† tout ce que les questions qui viennent d'√™tre pos√©es lui sont consacr√©es.  Ce √† quoi il est confront√© est fatigant et √©puisant.  Ici, il veut parler d'outils, dont l'application correcte nous permet de r√©soudre les probl√®mes ci-dessus. <br><br>  √Ä savoir, nous parlerons ici d'outils tels que Prettier, ESLint, Husky, Lint-Staged, EditorConfig et de l'automatisation du formatage et du linting de code.  Ce mat√©riel est principalement ax√© sur le d√©veloppement de React, mais les principes discut√©s ici peuvent √™tre appliqu√©s dans n'importe quel projet Web.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> r√©f√©rentiel o√π, entre autres, ce qui est discut√© ici est compil√©. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Plus joli</font> </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Prettier</a> est un outil de formatage de code qui vise √† utiliser des r√®gles cod√©es en dur pour concevoir des programmes.  Il formate le code automatiquement.  Voici √† quoi √ßa ressemble. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/731/385/f28/731385f28d65452936073391d84ba02d.gif"></div><br>  <i><font color="#999999">Prettier formate le code en suivant les r√®gles</font></i> <br><br><h3>  <font color="#3AC1EF">‚ñç Les points forts de Prettier</font> </h3><br>  Voici les fonctionnalit√©s et fonctionnalit√©s de Prettier qui nous permettent de parler de l'utilit√© de cet outil: <br><br><ul><li> Ranger la base de code existante.  En utilisant Prettier, vous pouvez le faire litt√©ralement avec une seule commande.  Le traitement manuel de grandes quantit√©s de code prendra beaucoup plus de temps.  Imaginez, par exemple, le travail requis pour formater manuellement 20 000 lignes de code. </li><li>  Prettier est facile √† mettre en ≈ìuvre.  Prettier utilise l'approche ¬´moyenne¬ª et la moins controvers√©e du style lors du formatage du code.  Depuis que le projet est open source, beaucoup y ont contribu√©, en l'am√©liorant et en adoucissant les angles vifs. </li><li>  Prettier vous permet de vous concentrer sur l'√©criture de code, pas sur son formatage.  Beaucoup ne r√©alisent tout simplement pas combien de temps et d'efforts sont consacr√©s √† la mise en forme du code.  L'utilisation de Prettier vous permet de ne pas penser au formatage, mais de faire de la programmation √† la place.  Dans mon cas, par exemple, l'efficacit√© du travail, gr√¢ce √† Prettier, a augment√© de 10%. </li><li>  Prettier aide les d√©butants.  Si vous √™tes un programmeur d√©butant travaillant dans la m√™me √©quipe avec des professionnels s√©rieux et que vous voulez avoir l'air digne de leur exp√©rience, Prettier vous aidera. </li></ul><br><h3>  <font color="#3AC1EF">‚ñçConfiguration de Prettier</font> </h3><br>  Voici comment utiliser Prettier dans un nouveau projet.  Cr√©ez le dossier d' <code>app</code> et acc√©dez-y, ex√©cutez la commande suivante sur la ligne de commande: <br><br><pre> <code class="hljs swift">npm <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> -y</code> </pre> <br>  Gr√¢ce √† cette commande, <code>npm</code> initialise un nouveau projet dans le dossier <code>app</code> en y cr√©ant le fichier <code>package.json</code> . <br><br>  Dans ce mat√©riau, j'utiliserai du <code>yarn</code> , mais ici, vous pouvez utiliser <code>npm</code> .  Prettier peut √©galement √™tre connect√© √† un projet existant. <br><br>  Installez le <code>prettier</code> package en tant que d√©pendance de d√©veloppement de notre projet: <br><br><pre> <code class="hljs pgsql">yarn <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-comment"><span class="hljs-comment">--dev prettier</span></span></code> </pre> <br>  Gr√¢ce √† cette commande, une entr√©e de d√©pendance de <code>package.json</code> sera ajout√©e √† <code>package.json</code> qui ressemble √† ceci: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-boiler-plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A react boiler plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Adeel Imran"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"prettier --write src/**/*.js"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"devDependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.14.3"</span></span> } }</code> </pre> <br>  Nous parlerons de ce que signifie la ligne la <code>"prettier": "prettier ‚Äî write src/**/*.js"</code> peu plus loin.  En attendant, cr√©ez le dossier <code>src</code> dans le dossier de l' <code>app</code> .  Dans ce dossier, cr√©ez le fichier <code>index.js</code> , bien que vous puissiez le nommer comme bon vous semble. <br><br>  Nous allons ajouter le code suivant √† ce fichier (sous cette forme disgracieuse): <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> person =                     { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Yoda"</span></span>,               <span class="hljs-attr"><span class="hljs-attr">designation</span></span>: <span class="hljs-string"><span class="hljs-string">'Jedi Master '</span></span>               };             <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trainJedi</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">jediWarrion</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (jediWarrion.name === <span class="hljs-string"><span class="hljs-string">'Yoda'</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'No need! already trained'</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Training </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${jediWarrion.name}</span></span></span><span class="hljs-string"> complete`</span></span>)             } trainJedi(person)             trainJedi({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Adeel'</span></span>,             <span class="hljs-attr"><span class="hljs-attr">designation</span></span>: <span class="hljs-string"><span class="hljs-string">'padawan'</span></span> });</code> </pre> <br>  Donc, pour le moment, nous avons le <code>src/app/index.js</code> , qui contient un code assez mal con√ßu. <br><br>  Comment y rem√©dier?  Il existe trois approches pour travailler avec du code mal format√©: <br><br><ol><li>  Formatez manuellement ce code. </li><li>  Utilisez un outil automatis√©. </li><li>  Laissez-le tel quel et travaillez (je vous demande de ne pas choisir cette approche). </li></ol><br>  Je vais choisir la deuxi√®me option.  Maintenant, dans notre projet, il existe une d√©pendance correspondante et, en outre, dans la section <code>scripts</code> du fichier <code>package.json</code> , il existe un enregistrement sur Prettier.  Il est clair que nous utiliserons cet outil pour formater le code.  Pour ce faire, cr√©ez le fichier <code>prettier.config.js</code> dans le dossier de l' <code>app</code> et ajoutez-y les r√®gles pour Prettier: <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">exports</span></span> = { printWidth: <span class="hljs-number"><span class="hljs-number">100</span></span>, singleQuote: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, trailingComma: <span class="hljs-string"><span class="hljs-string">'all'</span></span>, bracketSpacing: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, jsxBracketSameLine: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, tabWidth: <span class="hljs-number"><span class="hljs-number">2</span></span>, semi: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, };</code> </pre> <br>  Analysons ces r√®gles: <br><br><ul><li>  <code>printWidth: 100</code> - la longueur de la ligne ne doit pas d√©passer 100 caract√®res. </li><li>  <code>singleQuote: true</code> - tous les guillemets doubles seront convertis en guillemets simples.  Voir le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide de</a> style Airbnb pour plus de d√©tails.  J'aime beaucoup ce guide, je l'utilise pour am√©liorer la qualit√© de mon code. </li><li>  <code>trailingComma: 'all'</code> - fournit une virgule apr√®s la derni√®re propri√©t√© de l'objet.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> bon article sur ce sujet. </li><li>  <code>bracketSpacing: true</code> - responsable de l'insertion d'espaces entre le corps de l'objet et les accolades dans les litt√©raux d'objet.  Si cette propri√©t√© est d√©finie sur <code>true</code> , les objets d√©clar√©s √† l'aide de litt√©raux d'objets ressembleront √† ceci: <code>{ foo: bar }</code> .  Si vous le d√©finissez sur <code>false</code> , de telles constructions ressembleront √† ceci: <code>{foo: bar}</code> . </li><li>  <code>jsxBracketSameLine: false</code> - gr√¢ce √† cette r√®gle, le symbole <code>&gt;</code> dans les √©l√©ments JSX multilignes sera plac√© sur la derni√®re ligne.  Voici √† quoi ressemble le code si cette r√®gle est d√©finie sur <code>true</code> : </li></ul><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prettier-class"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prettier-id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{this.handleClick}</span></span></span><span class="hljs-tag">&gt;</span></span> Click Here <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Voici ce qui se passe s'il est d√©fini sur <code>false</code> : <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prettier-class"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prettier-id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{this.handleClick}</span></span></span><span class="hljs-tag"> &gt;</span></span> Click Here <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><ul><li>  <code>tabWidth: 2</code> - d√©finit le nombre d'espaces par niveau d'alignement. </li><li>  <code>semi: true</code> - si cette r√®gle est d√©finie sur <code>true</code> , un point-virgule est ajout√© √† la fin des expressions. </li></ul><br>  Retrouvez toutes les r√®gles Prettier ici. <br><br>  Maintenant que les r√®gles sont configur√©es, parlons de ce script: <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"prettier  ‚Äî write src/**/*.js"</span></span></code> </pre> <br>  Gr√¢ce √† cette conception, Prettier se lance et trouve tous les fichiers <code>.js</code> dans le dossier <code>src</code> .  L'indicateur <code>--write</code> lui dit d'enregistrer les fichiers format√©s au fur et √† mesure qu'ils sont trait√©s et corrige les erreurs de formatage qui s'y trouvent. <br><br>  Ex√©cutez le script √† partir de la ligne de commande: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">yarn</span></span> prettier</code> </pre> <br>  C'est ce qui s'est pass√© apr√®s cela avec le code mal format√© montr√© ci-dessus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90a/7d3/969/90a7d3969ed2861181de76d899aed951.gif"></div><br>  <i><font color="#999999">R√©sultat du formatage du code avec Prettier</font></i> <br><br>  Sur ce, nous supposerons qu'avec Prettier nous avons compris.  Parlons des linters. <br><br><h2>  <font color="#3AC1EF">ESLint</font> </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le linting</a> est un type d'analyse de code statique qui est souvent utilis√© pour trouver des mod√®les de conception probl√©matiques ou du code qui ne suit pas certaines directives de style. <br><br>  Il existe des linters con√ßus pour la plupart des langages de programmation, parfois les compilateurs incluent le linting dans le processus de compilation du code.  Cette d√©finition du peluchage est tir√©e de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page d'</a> informations open source pour le JavaScript ESLint JavaScript open source, dont nous parlerons. <br><br><h3>  <font color="#3AC1EF">‚ñçPourquoi ai-je besoin d'un linter pour JavaScript?</font> </h3><br>  √âtant donn√© que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JavaScript</a> est un langage de programmation dynamique avec un typage faible, le code √©crit est sujet aux erreurs commises par les d√©veloppeurs.  JavaScript est un langage interpr√©t√©, donc la syntaxe et d'autres erreurs dans le code ne sont g√©n√©ralement d√©tect√©es qu'apr√®s l'ex√©cution de ce code. <br><br>  Les linters, comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ESLint</a> , permettent aux d√©veloppeurs de trouver des probl√®mes dans le code sans le d√©marrer. <br><br><h3>  <font color="#3AC1EF">‚ñçPourquoi ESLint est-il un outil sp√©cial?</font> </h3><br>  Une bonne question a √©t√© pos√©e dans le titre de cette section.  Le point ici est que ESLint prend en charge les plugins.  Ainsi, les r√®gles de v√©rification de code ne doivent pas √™tre un package monolithique.  Tout ce dont vous avez besoin peut √™tre connect√© au besoin.  Chaque r√®gle de charpie ajout√©e au syst√®me est autonome, elle peut √™tre activ√©e ou d√©sactiv√©e, ind√©pendamment des autres.  Chaque r√®gle peut se voir attribuer un niveau d'alerte conform√©ment au souhait du d√©veloppeur - il peut s'agir d'un avertissement (avertissement) ou d'une erreur (erreur). <br><br>  Lorsque vous utilisez ESLint, vous travaillez avec un syst√®me enti√®rement personnalisable qui peut refl√©ter votre compr√©hension de ce √† quoi devrait ressembler le code correct et capturer l'ensemble de r√®gles que vous suivez. <br><br>  Parmi les guides de style JavaScript existants, les suivants sont tr√®s populaires: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide de style Google JavaScript</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide de style JavaScript Airbnb</a> </li></ul><br>  Comme je l'ai d√©j√† mentionn√©, j'utilise le guide de style Airbnb.  J'ai √©t√© conseill√© par ce document par mon manager dans l'entreprise o√π ma carri√®re professionnelle a commenc√©, et je consid√®re ce guide de style comme mon atout le plus pr√©cieux. <br><br>  Ce guide est activement maintenu - jetez un ≈ìil √† son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©f√©rentiel</a> sur GitHub.  Ici, je vais utiliser un ensemble de r√®gles bas√©es sur lui. <br><br>  Maintenant, travaillons sur le fichier <code>package.json</code> , ajoutez-y quelques d√©pendances: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-boiler-plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A react boiler plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Adeel Imran"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"lint"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"lint:write"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/ --fix"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"prettier --write src/**/*.js"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"husky"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"hooks"</span></span>: {     <span class="hljs-attr"><span class="hljs-attr">"pre-commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"lint-staged"</span></span>   } }, <span class="hljs-attr"><span class="hljs-attr">"lint-staged"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"*.(js|jsx)"</span></span>: [<span class="hljs-string"><span class="hljs-string">"npm run lint:write"</span></span>, <span class="hljs-string"><span class="hljs-string">"git add"</span></span>] }, <span class="hljs-attr"><span class="hljs-attr">"devDependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"babel-eslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"^8.2.3"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.19.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-config-airbnb"</span></span>: <span class="hljs-string"><span class="hljs-string">"^17.0.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-config-jest-enzyme"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.0.2"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-babel"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.1.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-import"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.12.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-jest"</span></span>: <span class="hljs-string"><span class="hljs-string">"^21.18.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-jsx-a11y"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.0.3"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.6.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.9.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"husky"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.1.2"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"lint-staged"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.3.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.14.3"</span></span> } }</code> </pre> <br>  Avant de parler de la fa√ßon de travailler avec cette configuration, je veux m'attarder sur les d√©pendances du projet qui sont ajout√©es √† <code>package.json</code> .  Je crois qu'avant d'utiliser certaines d√©pendances, vous devez savoir quel r√¥le elles jouent. <br><br>  Par cons√©quent, nous discuterons du r√¥le des packages pr√©sent√©s ici: <br><br><ul><li>  <code>babel-eslint</code> - vous permet d'utiliser le peluchage pour appliquer √† tout ce que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Babel</a> donne.  Vous n'avez pas besoin de ce plugin si vous n'utilisez pas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flow</a> ou des fonctionnalit√©s exp√©rimentales qu'ESLint ne prend pas encore en charge. </li><li>  <code>eslint</code> est le principal outil utilis√© pour coder le code. </li><li>  <code>eslint-config-airbnb</code> - Fournit des r√®gles Airbnb en tant que configuration pouvant √™tre modifi√©e. </li><li>  <code>eslint-plugin-babel</code> est un plugin ESLint qui compl√®te le <code>babel-eslint</code> .  Il a repens√© les r√®gles qui, lors de l'utilisation de <code>babel-eslint</code> , posent des probl√®mes lors du traitement des fonctionnalit√©s exp√©rimentales. </li><li>  <code>eslint-plugin-import</code> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> paquet prend en charge la liaison de nouvelles constructions de syntaxe d' <code>import/export</code> et aide √† pr√©venir les probl√®mes associ√©s √† une orthographe incorrecte des chemins de fichiers et des noms des modules import√©s. </li><li>  <code>eslint-plugin-jsx-a11y</code> - fournit des r√®gles concernant la disponibilit√© des √©l√©ments JSX pour les personnes handicap√©es.  L'accessibilit√© du Web est tr√®s importante. </li><li>  <code>eslint-plugin-prettier</code> - Aide ESLint et Prettier √† travailler ensemble.  Cela ressemble √† ceci: lorsque Prettier formate le code, il le fait en tenant compte des r√®gles ESLint. </li><li>  <code>eslint-plugin-react</code> - contient des r√®gles ESLint con√ßues pour React. </li></ul><br>  Dans cet article, nous ne parlons pas de test de code, mais dans le <code>package.json</code> ci-dessus, il existe des d√©pendances con√ßues pour les tests unitaires √† l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Jest / Enzyme</a> .  Maintenant, si vous d√©cidez d'utiliser ces outils pour les tests, une description des packages concern√©s. <br><br><ul><li>  <code>eslint-config-jest-enzyme</code> - ce package est destin√© aux cas o√π vous utilisez <code>jest-environment-enzyme</code> , ce qui conduit au fait que les variables React et Enzyme sont globales.  Gr√¢ce √† cela, ESLint n'√©mettra pas d'avertissements sur ces variables. </li><li>  <code>eslint-plugin-jest ‚Äî</code> Plugin ESlint pour Jest. </li></ul><br>  Il y a quelques autres packages dans le fichier que nous discuterons plus tard, en discutant des probl√®mes d'automatisation.  C'est <code>husky</code> et <code>lint-staged</code> . <br><br>  Maintenant que nous avons, en termes g√©n√©raux, discut√© de nos outils, nous allons continuer √† travailler. <br>  Cr√©ez le fichier <code>.eslintrc.js</code> dans le dossier de l' <code>app</code> : <br><br><pre> <code class="hljs powershell">module.exports = {   env: {       es6: true,       browser: true,       node: true,   },   extends: [<span class="hljs-string"><span class="hljs-string">'airbnb'</span></span>, <span class="hljs-string"><span class="hljs-string">'plugin:jest/recommended'</span></span>, <span class="hljs-string"><span class="hljs-string">'jest-enzyme'</span></span>],   plugins: [       <span class="hljs-string"><span class="hljs-string">'babel'</span></span>,       <span class="hljs-string"><span class="hljs-string">'import'</span></span>,       <span class="hljs-string"><span class="hljs-string">'jsx-a11y'</span></span>,       <span class="hljs-string"><span class="hljs-string">'react'</span></span>,       <span class="hljs-string"><span class="hljs-string">'prettier'</span></span>,   ],   parser: <span class="hljs-string"><span class="hljs-string">'babel-eslint'</span></span>,   parserOptions: {       ecmaVersion: <span class="hljs-number"><span class="hljs-number">6</span></span>,       sourceType: <span class="hljs-string"><span class="hljs-string">'module'</span></span>,       ecmaFeatures: {           jsx: true       }   },   rules: {       <span class="hljs-string"><span class="hljs-string">'linebreak-style'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //    Windows.       <span class="hljs-string"><span class="hljs-string">'arrow-parens'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //   prettier       <span class="hljs-string"><span class="hljs-string">'object-curly-newline'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //   prettier       <span class="hljs-string"><span class="hljs-string">'no-mixed-operators'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //   prettier       <span class="hljs-string"><span class="hljs-string">'arrow-body-style'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //  -   ?       <span class="hljs-string"><span class="hljs-string">'function-paren-newline'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //   prettier       <span class="hljs-string"><span class="hljs-string">'no-plusplus'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>,       <span class="hljs-string"><span class="hljs-string">'space-before-function-paren'</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, //   prettier       <span class="hljs-string"><span class="hljs-string">'max-len'</span></span>: [<span class="hljs-string"><span class="hljs-string">'error'</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, { <span class="hljs-type"><span class="hljs-type">ignoreUrls</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span>, }], // airbnb           <span class="hljs-string"><span class="hljs-string">'no-console'</span></span>: <span class="hljs-string"><span class="hljs-string">'error'</span></span>, // airbnb         <span class="hljs-string"><span class="hljs-string">'no-alert'</span></span>: <span class="hljs-string"><span class="hljs-string">'error'</span></span>, // airbnb         <span class="hljs-string"><span class="hljs-string">'no-param-reassign'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //  -   ?       <span class="hljs-string"><span class="hljs-string">"radix"</span></span>: <span class="hljs-string"><span class="hljs-string">"off"</span></span>, // parseInt, parseFloat  radix .    .       <span class="hljs-string"><span class="hljs-string">'react/require-default-props'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, // airbnb           <span class="hljs-string"><span class="hljs-string">'react/forbid-prop-types'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, // airbnb           <span class="hljs-string"><span class="hljs-string">'react/jsx-filename-extension'</span></span>: [<span class="hljs-string"><span class="hljs-string">'error'</span></span>, { <span class="hljs-type"><span class="hljs-type">extensions</span></span>: [<span class="hljs-string"><span class="hljs-string">'.js'</span></span>] }], // airbnb  .jsx       <span class="hljs-string"><span class="hljs-string">'prefer-destructuring'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>,       <span class="hljs-string"><span class="hljs-string">'react/no-find-dom-node'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //           <span class="hljs-string"><span class="hljs-string">'react/no-did-mount-set-state'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>,       <span class="hljs-string"><span class="hljs-string">'react/no-unused-prop-types'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>, //            <span class="hljs-string"><span class="hljs-string">'react/jsx-one-expression-per-line'</span></span>: <span class="hljs-string"><span class="hljs-string">'off'</span></span>,       <span class="hljs-string"><span class="hljs-string">"jsx-a11y/anchor-is-valid"</span></span>: [<span class="hljs-string"><span class="hljs-string">"error"</span></span>, { <span class="hljs-string"><span class="hljs-string">"components"</span></span>: [<span class="hljs-string"><span class="hljs-string">"Link"</span></span>], <span class="hljs-string"><span class="hljs-string">"specialLink"</span></span>: [<span class="hljs-string"><span class="hljs-string">"to"</span></span>] }],       <span class="hljs-string"><span class="hljs-string">"jsx-a11y/label-has-for"</span></span>: [<span class="hljs-number"><span class="hljs-number">2</span></span>, {           <span class="hljs-string"><span class="hljs-string">"required"</span></span>: {               <span class="hljs-string"><span class="hljs-string">"every"</span></span>: [<span class="hljs-string"><span class="hljs-string">"id"</span></span>]           }       }], //     htmlFor  label       <span class="hljs-string"><span class="hljs-string">'prettier/prettier'</span></span>: [<span class="hljs-string"><span class="hljs-string">'error'</span></span>],   }, };</code> </pre> <br>  Ajoutez maintenant le fichier <code>.eslintignore</code> dossier de l' <code>app</code> : <br><br><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">/.git /</span></span>.vscode node_modules</code> </pre> <br>  Parlons maintenant de la <code>.eslintrc.js</code> fichier <code>.eslintrc.js</code> et de la signification des constructions qui y sont pr√©sent√©es. <br><br>  Ce fichier a la structure suivante: <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">exports</span></span> = {  env:{},  extends: {},  plugin: {},  parser: {},  parserOptions: {},  rules: {}, };</code> </pre> <br>  Consid√©rez les blocs de ce fichier repr√©sent√©s par des objets avec les noms correspondants: <br><br><ul><li>  <code>env</code> - vous permet de sp√©cifier une liste des environnements pour lesquels vous pr√©voyez de v√©rifier le code.  Dans notre cas, les <code>es6</code> , <code>browser</code> et <code>node</code> sont d√©finies sur <code>true</code> .  Le param√®tre <code>es6</code> inclut des fonctionnalit√©s ES6, √† l'exception des modules (cette fonctionnalit√© d√©finit automatiquement, dans le bloc <code>parserOptions</code> , le param√®tre <code>ecmaVersion</code> sur <code>6</code> ).  Le param√®tre de <code>browser</code> des variables de navigateur globales telles que <code>Windows</code> .  Le param√®tre <code>node</code> ajoute des variables d'environnement et des √©tendues globales Node.js, par exemple, <code>global</code> .  Des d√©tails sur les environnements peuvent √™tre trouv√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </li><li>  <code>extends</code> - est un tableau de lignes avec des configurations, avec chaque configuration suppl√©mentaire √©tend la pr√©c√©dente.  Les r√®gles de <code>airbnb</code> Airbnb sont utilis√©es <code>airbnb</code> , qui sont d√©velopp√©es en <code>jest</code> puis d√©velopp√©es en <code>jest-enzyme</code> . </li><li>  <code>plugins</code> - voici les r√®gles de peluchage que nous voulons utiliser.  Nous appliquons les r√®gles <code>babel</code> , <code>import</code> , <code>jsx-a11y</code> , <code>jsx-a11y</code> , <code>prettier</code> , dont nous avons d√©j√† parl√©. </li><li>  <code>parser</code> - ESLint utilise l' <code>parser</code> Espree par d√©faut, mais puisque nous travaillons avec Babel, nous devons utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Babel-ESLint</a> . </li><li>  <code>parserOptions</code> - puisque nous avons chang√© l'analyseur standard en <code>babel-eslint</code> , nous devons √©galement d√©finir les propri√©t√©s dans ce bloc.  La propri√©t√© <code>ecmaVersion</code> d√©finie sur <code>6</code> indique √† ESLint que le code ES6 sera v√©rifi√©.  Comme nous √©crivons du code dans des modules <code>EcmaScript</code> , la propri√©t√© <code>sourceType</code> d√©finie sur <code>module</code> .  Et enfin, puisque nous utilisons React, ce qui signifie utiliser JSX, un objet avec la cl√© <code>jsx</code> d√©finie sur <code>true</code> √©crit dans la propri√©t√© <code>ecmaFeatures</code> . </li><li>  <code>rules</code> - J'aime le plus cette partie du fichier <code>.eslintrc.js</code> car elle vous permet de configurer les r√®gles ESLint.  Toutes les r√®gles que nous avons d√©velopp√©es ou ajout√©es √† l'aide de plugins peuvent √™tre modifi√©es ou red√©finies, et cela se fait dans le bloc de <code>rules</code> .  Le texte du fichier contient des commentaires sur les r√®gles. </li></ul><br>  Parlons <code>.eslintignore</code> fichier <code>.eslintignore</code> .  Ce fichier accepte une liste de chemins repr√©sentant des dossiers dont le contenu ne doit pas √™tre trait√© √† l'aide d'ESLint. <br><br>  Trois dossiers sont d√©finis ici: <br><br><ul><li>  <code>/.git</code> - Je n'ai pas besoin d'ESLint pour v√©rifier les fichiers li√©s √† Git. </li><li>  <code>/.vscode</code> - le projet a ce dossier car j'utilise VS Code.  Ici, l'√©diteur stocke les informations de configuration qui peuvent √™tre d√©finies pour chaque projet.  Ces donn√©es ne doivent pas non plus √™tre trait√©es par le linter. </li><li>  <code>node-modules</code> - les fichiers de d√©pendances n'ont pas non plus besoin d'√™tre v√©rifi√©s avec un linter. </li></ul><br>  Voyons maintenant quelques nouveaux scripts apparus dans <code>package.json</code> .  Les voici: <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"lint"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/"</span></span> <span class="hljs-string"><span class="hljs-string">"lint:write"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/ --fix"</span></span></code> </pre> <br>  Si vous ex√©cutez le premier d'entre eux, en utilisant la commande <code>yarn lint</code> ou <code>npm run lint</code> , le linter examinera tous les fichiers du r√©pertoire <code>src</code> et affichera un rapport d√©taill√© sur les fichiers dans lesquels il a trouv√© des erreurs.  √Ä l'aide de ce rapport, vous pouvez corriger ces erreurs. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a5/568/b35/9a5568b35f1d443687849ba93badea49.gif"></div><br>  <i><font color="#999999">Ex√©cution du script lint</font></i> <br><br>  Si vous ex√©cutez le deuxi√®me script ( <code>yarn lint:write</code> ), ESLint effectuera la m√™me v√©rification que pr√©c√©demment.  La seule diff√©rence est que dans ce mode, le syst√®me essaiera de corriger les erreurs d√©tect√©es, essayera d'amener le code sous la forme la plus d√©cente possible. <br><br><h2>  <font color="#3AC1EF">Extension ESLint pour VS Code</font> </h2><br>  Nous avons d√©j√† configur√© Prettier et ESLint, mais pour utiliser les capacit√©s de ces outils, nous devons ex√©cuter des scripts.  Ce n'est pas tr√®s pratique, alors essayez de le r√©parer.  √Ä savoir, nous voulons nous assurer que le formatage et le peluchage du code sont effectu√©s par la commande pour enregistrer le fichier dans l'√©diteur.  De plus, nous souhaitons effectuer le linting et le formatage du code avant de valider. <br><br>  √Ä titre d'exemple, nous utilisons l'√©diteur VS Code.  Nous aurons besoin de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'extension ESLint</a> pour VS Code.  Pour l'installer, vous pouvez ouvrir le panneau d'extension VS Code ( <code>ctrl+shift+x</code> ).  Ici, dans le champ de recherche, entrez <code>eslint</code> .  Une liste d'extensions appara√Æt.  Ce qui nous int√©resse est celui dont les informations pour les d√©veloppeurs sont Dirk Baeumer.  Apr√®s avoir install√© cette extension, red√©marrez l'√©diteur. <br><br>  Maintenant, dans le dossier racine du projet ( <code>app</code> ), cr√©ez le dossier <code>.vscode</code> (faites attention au point au d√©but du nom - c'est important).  Dans ce dossier, cr√©ez un fichier <code>settings.json</code> avec le contenu suivant: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"editor.formatOnSave"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"eslint.autoFixOnSave"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }</code> </pre> <br>  Consid√©rez son contenu. <br><br><ul><li>  La propri√©t√© <code>editor.formatOnSave</code> d√©finie sur <code>false</code> indique que nous n'avons pas besoin de la configuration standard pour appliquer au formatage de fichier, car cela peut provoquer un conflit avec ESLint et Prettier. </li><li>  La propri√©t√© <code>eslint.autoFixOnSave</code> d√©finie sur <code>true</code> , car il est n√©cessaire que le plug-in install√© se d√©clenche chaque fois qu'un fichier est enregistr√©.  √âtant donn√© qu'ESLint et Prettier fonctionnent ensemble dans un projet, l'enregistrement du fichier entra√Æne √† la fois le formatage et le linting de code. </li></ul><br>  Il est important de noter que maintenant, lorsque le script <code>lint:write</code> est ex√©cut√©, il effectuera √† la fois le linting et le formatage du code. <br><br>  Imaginez vos sentiments si vous obteniez un code de projet de 20 000 lignes que vous auriez besoin de v√©rifier et d'am√©liorer.  Imaginez maintenant que vous deviez le faire manuellement.  Un tel travail prendrait probablement un mois.  Et √† l'aide des outils d'automatisation ci-dessus, tout cela se fait en une trentaine de secondes. <br><br>  Maintenant, apr√®s avoir configur√© tout ce dont vous avez besoin, chaque fois que vous enregistrez le fichier avec le code, l'√©diteur se chargera de v√©rifier et de formater le texte du programme.  Cependant, nous parlons ici de l'√©diteur VS Code.  Il est possible qu'un membre de votre √©quipe pr√©f√®re un autre √©diteur.  Il n'y a rien de mal √† cela, mais pour que tout le monde puisse travailler plus facilement, nous devrons trouver autre chose √† automatiser. <br><br><h2>  <font color="#3AC1EF">Husky</font> </h2><br>  Le paquet Husky vous permet d'utiliser des crochets Git.  Cela signifie que vous avez la possibilit√© d'effectuer certaines actions avant de valider ou d'envoyer le code du r√©f√©rentiel. <br><br>  Afin de profiter des fonctionnalit√©s de Husky, installez d'abord ce package: <br><br><pre> <code class="hljs pgsql">yarn <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-comment"><span class="hljs-comment">--dev husky</span></span></code> </pre> <br>  Apr√®s cela, ajoutez ce qui suit √† <code>package.json</code> : <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"husky"</span></span>: {     <span class="hljs-string"><span class="hljs-string">"hooks"</span></span>: {         <span class="hljs-string"><span class="hljs-string">"pre-commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"YOUR_COMMAND_HERE"</span></span>,    <span class="hljs-string"><span class="hljs-string">"pre-push"</span></span>: <span class="hljs-string"><span class="hljs-string">"YOUR_COMMAND_HERE"</span></span>    } },</code> </pre> <br>  Cela conduira au fait qu'avant d'ex√©cuter la commande <code>commit</code> ou <code>push</code> , un certain script sera appel√©, qui, par exemple, effectue un test de code ou un formatage. <br><br>  Des d√©tails sur Husky peuvent √™tre trouv√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h2>  <font color="#3AC1EF">Lint-staged</font> </h2><br>  Le package par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©tapes Lint</a> vous permet de v√©rifier les fichiers index√©s √† l'aide du linter, ce qui permet d'√©viter que des erreurs soient envoy√©es au r√©f√©rentiel. <br><br>  Linting est logique avant de valider le code.  Gr√¢ce √† cela, vous pouvez vous assurer que les erreurs ne p√©n√®trent pas dans le r√©f√©rentiel et fournir un style unifi√© du code qui y arrive.  Cependant, linting pour v√©rifier l'ensemble du projet peut √™tre une t√¢che trop longue, et les r√©sultats d'une telle v√©rification peuvent √™tre d√©nu√©s de sens.  En fin de compte, le peluchage peut avoir besoin d'exposer les fichiers que vous pr√©voyez de valider. <br><br>  Lint-staged vous permet d'effectuer un ensemble de t√¢ches arbitraires sur des fichiers index√©s filtr√©s par un mod√®le de recherche.  Des d√©tails √† ce sujet peuvent √™tre trouv√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Installez le package par √©tapes Lint: <br><br><pre> <code class="hljs pgsql">yarn <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-comment"><span class="hljs-comment">--dev lint-staged</span></span></code> </pre> <br>  Ensuite, dans le fichier <code>package.json</code> , ajoutez ce qui suit: <br><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"lint-staged"</span></span>: {     <span class="hljs-string"><span class="hljs-string">"*.(js|jsx)"</span></span>: [<span class="hljs-string"><span class="hljs-string">"npm run lint:write"</span></span>, <span class="hljs-string"><span class="hljs-string">"git add"</span></span>] },</code> </pre> <br>  Gr√¢ce √† cette construction, la commande <code>lint:write</code> sera ex√©cut√©e en premier, v√©rifiant le contenu du fichier et corrigeant les erreurs, apr√®s quoi les fichiers seront ajout√©s √† l'index avec la commande <code>git add</code> .  Maintenant, cette commande vise les fichiers <code>.js</code> et <code>.jsx</code> , mais la m√™me chose peut √™tre faite avec des fichiers d'autres types. <br><br><h2>  <font color="#3AC1EF">Partage Husky et Lint</font> </h2><br>  Consid√©rez un diagramme d'action qui vous permet d'organiser le prochain flux de travail.  Chaque fois que vous validez des fichiers avec du code, avant d'effectuer cette op√©ration, le syst√®me ex√©cute le script <code>lint-staged</code> qui, √† son tour, ex√©cute le script <code>lint:write</code> , qui effectue le linting et le formatage du code.  Apr√®s cela, les fichiers sont ajout√©s √† l'index puis valid√©s.  Il me semble que c'est tr√®s pratique.  En fait, dans le code pr√©sent√© pr√©c√©demment du fichier <code>package.json</code> , cela est d√©j√† impl√©ment√©, nous n'en avons tout simplement pas parl√© auparavant. <br><br>  Voici √† nouveau le contenu de notre <code>package.json</code> : <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-boiler-plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A react boiler plate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Adeel Imran"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"lint"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"lint:write"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --debug src/ --fix"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"prettier --write src/**/*.js"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"husky"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"hooks"</span></span>: {     <span class="hljs-attr"><span class="hljs-attr">"pre-commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"lint-staged"</span></span>   } }, <span class="hljs-attr"><span class="hljs-attr">"lint-staged"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"*.(js|jsx)"</span></span>: [<span class="hljs-string"><span class="hljs-string">"npm run lint:write"</span></span>, <span class="hljs-string"><span class="hljs-string">"git add"</span></span>] }, <span class="hljs-attr"><span class="hljs-attr">"devDependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"babel-eslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"^8.2.3"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.19.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-config-airbnb"</span></span>: <span class="hljs-string"><span class="hljs-string">"^17.0.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-config-jest-enzyme"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.0.2"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-babel"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.1.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-import"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.12.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-jest"</span></span>: <span class="hljs-string"><span class="hljs-string">"^21.18.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-jsx-a11y"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.0.3"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.6.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eslint-plugin-react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.9.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"husky"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.1.2"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"lint-staged"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.3.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"prettier"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.14.3"</span></span> } }</code> </pre> <br>  Maintenant que vous connaissez Husky et Lint-Staged, vous pouvez √©valuer leur impact sur le travail avec Git.  √Ä savoir, supposons que les commandes suivantes ont √©t√© ex√©cut√©es: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> git add . <span class="hljs-variable"><span class="hljs-variable">$</span></span> git commit <span class="hljs-literal"><span class="hljs-literal">-m</span></span> <span class="hljs-string"><span class="hljs-string">"some descriptive message here"</span></span></code> </pre> <br>  Il est clair qu'avant de s'engager, le code sera v√©rifi√© pour la conformit√© avec les r√®gles sp√©cifi√©es dans <code>.eslintrc.js</code> et, si n√©cessaire, corrig√©.  Gr√¢ce √† cela, les erreurs n'entreront jamais dans le r√©f√©rentiel d'un projet en cours. <br><br>  Vous savez maintenant comment int√©grer Prettier, ESLint, Husky et Lint-staged dans votre projet. <br><br>  Permettez-moi de vous rappeler que nous avons dit ci-dessus que tous les membres de votre √©quipe n'utilisent pas mon code VS pr√©f√©r√©.  Pour que tous fonctionnent <code>.editorconfig</code> , nous devons traiter le fichier <code>.editorconfig</code> . <br><br><h2>  <font color="#3AC1EF">Fichier .Editorconfig</font> </h2><br>  Diff√©rents membres de votre √©quipe peuvent utiliser diff√©rents √©diteurs.  Les for√ßant √† utiliser n'importe quel √©diteur pour quoi que ce soit.  Cependant, pour que tout le monde utilise les m√™mes param√®tres, concernant par exemple les retraits ou les sauts de ligne, nous utilisons le fichier.  <code>editorconfig</code> .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il permet de maintenir un ensemble uniforme de r√®gles dans des √©quipes h√©t√©rog√®nes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur le site Web du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">projet,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous pouvez trouver une liste des √©diteurs qui prennent en charge ce fichier. </font><font style="vertical-align: inherit;">En particulier, il comprend WebStorm, AppCode, Atom, Eclipse, Emacs, BBEdit et autres. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ez un fichier dans le dossier de </font></font><code>app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">notre projet </font></font><code>.editorconfig</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et ajoutez-y le code suivant:</font></font><br><br><pre> <code class="hljs pgsql"># EditorConfig -  : http://EditorConfig.org #  EditorConfig   root = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> [*.md] trim_trailing_whitespace = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> [*.js] trim_trailing_whitespace = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> #     Unix       [*] indent_style = space indent_size = <span class="hljs-number"><span class="hljs-number">2</span></span> end_of_line = lf charset = utf<span class="hljs-number"><span class="hljs-number">-8</span></span> insert_final_newline = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> max_line_length = <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Expliquons les param√®tres utilis√©s dans ce fichier: </font></font><br><br><ul><li> <code>trim_trailing_whitespace = false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- la suppression des espaces √† la fin des lignes dans les </font></font><code>.md</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichiers n'est pas effectu√©e. </font><font style="vertical-align: inherit;">Une option similaire pour </font></font><code>.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-files est d√©finie sur </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li> <code>indent_style = space</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - les retraits sont faits d'espaces et non de tabulations. </font></font></li><li> <code>indent_size = 2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - la taille du tiret est de deux espaces. </font></font></li><li> <code>end_of_line = lf</code> ‚Äî     <code>lf</code> .   ,      ,        .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . </li><li> <code>insert_final_newline = true</code> ‚Äî       . </li><li> <code>max_line_length = 100</code> ‚Äî      100 . </li></ul><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br> ,   ,     ,         . ,  ,            . <br><br>  <b>Chers lecteurs!</b>         ?    ? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428173/">https://habr.com/ru/post/fr428173/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428159/index.html">Tableau √† partir de la th√©i√®re ou visualisation de l'analyse des comptes PAMM</a></li>
<li><a href="../fr428161/index.html">Les r√©formes visant √† subventionner les combustibles fossiles qui ont √©t√© r√©alis√©es gr√¢ce √† un travail acharn√© sont en danger</a></li>
<li><a href="../fr428165/index.html">Podcast du noyau Linux avec Open Source Summit Europe 2018</a></li>
<li><a href="../fr428167/index.html">La premi√®re usine de robots en Russie et qu'est-ce que la saucisse a √† voir avec √ßa?</a></li>
<li><a href="../fr428169/index.html">DJI annonce Mavic 2 Enterprise - un outil puissant pour les professionnels</a></li>
<li><a href="../fr428175/index.html">Impl√©mentation de l'arbre C de pr√©fixe C</a></li>
<li><a href="../fr428177/index.html">Alors, quel est le probl√®me avec la recherche d'emploi / les travailleurs en informatique?</a></li>
<li><a href="../fr428179/index.html">Lors d'une vente aux ench√®res japonaise, un prototype de manette Wii, d√©velopp√© pour le GameCube</a></li>
<li><a href="../fr428181/index.html">Machine morale: impitoyable ou vide de sens?</a></li>
<li><a href="../fr428183/index.html">Impl√©mentation de l'algorithme de Levenberg-Marquardt pour l'optimisation des r√©seaux de neurones sur TensorFlow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>