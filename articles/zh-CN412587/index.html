<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍆 🔵 🙋 木偶+希拉。 挤压最大 🖐🏾 👌🏻 👄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在本文中，我想谈谈我们如何使用Puppet和Hiera配置铁和虚拟服务器。 基本上，这将与我们发明的体系结构和层次结构有关，这将促进服务器配置并使之系统化。 


 我被提示写这篇文章的原因是，在Internet上我并没有特别找到关于如何使用hiera及其用途的好的实际示例。 基本上，这些是带有示例...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>木偶+希拉。 挤压最大</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/semrush/blog/412587/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/vq/z-/bj/vqz-bjm4yx2wvhzcf-frffyuh04.png"></div><br><p> 在本文中，我想谈谈我们如何使用<strong>Puppet</strong>和<strong>Hiera</strong>配置铁和虚拟服务器。 基本上，这将与我们发明的体系结构和层次结构有关，这将促进服务器配置并使之系统化。 </p><br><p> 我被提示写这篇文章的原因是，在Internet上我并没有特别找到关于如何使用hiera及其用途的好的实际示例。 基本上，这些是带有示例的教程，用于输入主题。 但是，这里没有编写hiera的实际应用。 也许我看起来并不好，但是这是一个真实的例子，可能会像我曾经那样帮助您将所有要点放在我身上。 </p><br><h3 id="dlya-kogo-byla-by-polezna-dannaya-statya"> 这篇文章对谁有用 </h3><br><p> 如果： </p><br><ul><li> 您知道Puppet和Hiera是什么，但是您并没有真正一起使用它们，因为不清楚如何做以及为什么 </li><li> 您公司中有很多团队，您需要以某种方式在命令级别区分服务器配置 </li><li> 您使用pappet，并且节点文件已增长到令人难以置信的大小 </li><li> 您是否想以神圣的Yaml格式阅读服务器配置：） </li><li> 您基本上对配置管理和系统管理主题感兴趣。 </li></ul><br><p> 本文适合您。 </p><a name="habracut"></a><br><h3 id="prezhde-chem-nachat"> 开始之前 </h3><br><p> 我会立即警告您，这篇文章原来很长，但是希望对您有用。 另外，可以理解的是，您已经将hiera连接到了puppet，并且至少对puppet有所了解。 如果未连接hiera，则并不难。 </p><br><ul><li> 在此处详细了解Puppet： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">初学者的Puppet</a> 。 </li><li> 希拉的工作原理- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">希拉介绍</a> 。 </li></ul><br><h3 id="vvodnye-dannye"> 输入数据 </h3><br><ul><li>  SEMrush大约有30个开发团队，每个团队都有自己的服务器 </li><li> 每个团队都使用自己的一套技术（PL，DBMS等） </li><li> 团队可以并且应该（理想地）为特定项目使用通用配置（代码重用） </li><li> 团队自己管理将应用程序部署到服务器上（这不是通过pappet完成的） </li></ul><br><h3 id="nemnogo-istorii"> 一点历史 </h3><br><p> 最初，我们在第3版pappet中拥有所有内容，然后我们决定实施第4版pappet，然后将所有新服务器都放置在其中，而旧服务器则慢慢移植到了第4版。 </p><br><p> 在第三篇文章中，我们使用了经典的节点文件和模块系统。 这些模块是在Gitlab中的一组特殊项目中创建的，将它们克隆到pappet服务器（使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">r10k</a> ），然后pappet代理进入向导并收到目录以将其应用于服务器。 </p><br><p> 然后，他们开始尝试不这样做，不使用本地模块，而是将指向必要模块及其存储库的链接放在Puppetfile中。 怎么了 因为这些模块一直受到社区和开发人员的支持和改进（理想情况下），而我们本地的则不是。 后来，他们引入了hiera并将其完全切换到它，节点文件（例如nodes.pp）已被遗忘。 </p><br><p>在第四篇文章中，我们试图完全放弃本地模块，而仅使用远程模块。 不幸的是，应该在这里再次插入保留，因为它“没有完全解决”，有时您仍然必须自己倾斜并完成一些操作。 当然，只有hiera，没有节点文件。 </p><br><p>  <strong>当您有30个团队与一个技术动物园一起使用时，如何保持超过1000台服务器的管理变得尤为棘手。</strong>  <strong>此外，我将告诉您hiera在这方面如何帮助我们。</strong> </p><br><h3 id="ierarhiya"> 层次结构 </h3><br><p> 希拉（事实上，它的名字来源于此）建立了一个层次结构。 与我们一起，看起来像这样： </p><br><pre><code class="hljs axapta">--- :hierarchy: - <span class="hljs-string"><span class="hljs-string">"nodes/%{::fqdn}"</span></span> - <span class="hljs-string"><span class="hljs-string">"teams/%{::team}_team/nodes/%{::fqdn}"</span></span> - <span class="hljs-string"><span class="hljs-string">"teams/%{::team}_team/projects/%{::project}/tiers/%{::tier}"</span></span> - <span class="hljs-string"><span class="hljs-string">"teams/%{::team}_team/projects/%{::project}/%{::role}"</span></span> - <span class="hljs-string"><span class="hljs-string">"teams/%{::team}_team/projects/%{::project}"</span></span> - <span class="hljs-string"><span class="hljs-string">"teams/%{::team}_team/roles/%{::role}"</span></span> - <span class="hljs-string"><span class="hljs-string">"teams/%{::team}_team/%{::team}"</span></span> - <span class="hljs-string"><span class="hljs-string">"projects/%{::project}/tiers/%{::tier}/%{::role}"</span></span> - <span class="hljs-string"><span class="hljs-string">"projects/%{::project}/tiers/%{::tier}"</span></span> - <span class="hljs-string"><span class="hljs-string">"projects/%{::project}/%{::role}"</span></span> - <span class="hljs-string"><span class="hljs-string">"projects/%{::project}"</span></span> - <span class="hljs-string"><span class="hljs-string">"tiers/%{::tier}"</span></span> - <span class="hljs-string"><span class="hljs-string">"virtual/%{::virtual}"</span></span> - <span class="hljs-string"><span class="hljs-string">"os/%{::operatingsystem}/%{::operatingsystemmajrelease}"</span></span> - <span class="hljs-string"><span class="hljs-string">"os/%{::operatingsystem}"</span></span> - users - <span class="hljs-keyword"><span class="hljs-keyword">common</span></span></code> </pre> <br><p> 首先，让我们处理模糊的变量（事实）。 </p><br><p> 理想情况下，SEMrush中的每个服务器都应具有4个公开的特殊事实，以描述其从属关系： </p><br><ul><li>  <strong><code>team</code></strong>事实-它属于哪个团队 </li><li> 事实<strong><code>project</code></strong> -与哪个项目有关 </li><li>  <strong><code>role</code></strong>事实-这个项目有什么作用 </li><li>  <strong><code>tier</code></strong>事实-它具有什么样的阶段（生产，测试，开发） </li></ul><br><p> 如何运作？  Pappet代理进入Pappet主服务器，并根据这些事实为自己搜索文件，并根据我们的层次结构遍历文件夹。 无需指出配置文件属于服务器。 相反，服务器本身仅查看它们的路径和事实就知道哪些文件属于它们。 </p><br><p> 在服务器设置过程中，管理员与开发人员进行交流并指定这些参数（通常，知识渊博的人会与管理员本身联系），以便将来在hiera中构建层次结构，然后基于此层次结构描述服务器配置。 这样的系统有助于重用代码，并在服务器配置方面更加灵活。 </p><br><p> 例如，我们有一个<em>特殊的</em>项目。 在这个项目中，可能有一些带有nginx的前端服务器，一个带有python的后端服务器，一个带有mysql的数据库集群，一个用于缓存的redis服务器。 所有这些服务器都应该放在一个名为<strong>special的</strong>项目中，然后为服务器分配<strong>角色</strong> 。 </p><br><p> 在项目文件中，我们描述了整个项目共有的参数。 首先想到的是在用户的所有服务器上创建要部署的用户，并向其发出必要的权限并推出其ssh密钥。 </p><br><p> 在每台服务器的角色中，通常会描述和定制服务-针对该服务器的用途（nginx，python，mysql等）。在这种情况下，如果我们还需要在开发平台上部署生产环境的副本，则肯定需要该服务，但更改其中的某些内容（例如密码）。 在这种情况下，dev-server和prod-server的区别仅在于将层设置为所需的“位置”（prod或dev）。 然后一点魔术和希拉就可以了。 </p><br><p> 如果我们需要以同一角色部署两个相同的服务器，但是其中的某些内容应该有所不同（例如，配置中的某些行），那么层次结构的另一部分将可以解决。 我们将名称为<strong><code>{fqdn }.yaml</code></strong>格式的文件放在正确的位置（例如， <strong><code>nodes/myserver.domain.net</code></strong> ），在特定服务器级别上设置变量的必要值，pappet将为该角色的两个服务器应用相同的配置，并且每个角色都唯一从服务器。 </p><br><p> 示例：两个带有php代码的后端具有相同的角色，并且完全相同。 显然，我们不想同时备份两个服务器-这没有任何意义。 我们可以创建一个角色来描述两个服务器的相同配置，然后创建另一个<strong><code>nodes/backend1.semrush.net</code></strong>文件，在其中放置用于备份的配置。 </p><br><p> 批处理文件<strong><code>teams/team-name.yaml</code></strong>指示属于该团队的所有服务器的配置。 大多数情况下，它描述了可以与这些服务器进行交互的用户以及他们的访问权限。 </p><br><p> 基于这些变量，我们建立了这个<strong>层次结构</strong> 。 在层次结构中找到的文件越高，在其中指定的配置的优先级越高。 </p><br><p> 因此，可以基于此层次结构<strong>覆盖</strong>变量。 即，角色文件“ <strong><code>projects/%{::project}/%{::role}</code></strong> ”中的变量优先于项目文件“ <strong><code>projects/%{::project}</code></strong> ”中的变量。 如果您以允许您执行此操作的方式编写模块和/或配置文件/角色，则变量也可以在层次结构的所有级别上合并。 通过为所有项目服务器指定mysql配置的公共部分，您可以将具有该角色权重的特殊部分添加到其他层次结构级别的同一变量中（从服务器的配置中将有一个附加部分）。 </p><br><p> 事实证明，沿着路径“ <strong><code>hieradata/nodes/%{::fqdn}</code></strong> ”定位的特定节点的文件具有最高优先级。 接下来是节点文件，但是已经在命令级别。 下面的块描述了其他更普遍的事实： </p><br><pre> <code class="hljs axapta"> - <span class="hljs-string"><span class="hljs-string">"virtual/%{::virtual}"</span></span> - <span class="hljs-string"><span class="hljs-string">"os/%{::operatingsystem}/%{::operatingsystemmajrelease}"</span></span> - <span class="hljs-string"><span class="hljs-string">"os/%{::operatingsystem}"</span></span> - users - <span class="hljs-keyword"><span class="hljs-keyword">common</span></span></code> </pre> <br><p> 相应地，在文件<strong><code>common.yaml</code></strong>我们肯定有一个配置应<strong><code>common.yaml</code></strong> <strong>所有</strong>服务器，在文件<strong><code>users.yaml</code></strong>所有用户均以<strong><code>os/%{::operatingsystem}</code></strong> <strong><code>users.yaml</code></strong>描述（但并非所有用户均在服务器上创建）具有特定操作系统（ <code>::operatingsystem</code>事实<code>::operatingsystem</code> ）的服务器的典型常规配置，依此类推。 </p><br><p> 我认为，从这个层次结构来看，一切都变得清晰了。 下面，我将考虑使用这种层次结构的示例。 但是首先，您需要谈论配置文件。 </p><br><h3 id="profili"> 个人资料 </h3><br><p> 使用模块配置服务器的重要一点是使用配置文件。 它们位于路径<strong><code>site/profiles</code></strong> ，是模块的入口点。 多亏了他们，您可以在服务器上更好地配置挂起的模块并创建必要的资源。 </p><br><p> 考虑一个简单的例子。 有一个<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">模块</a>可以安装和配置redis。 而且我们还想在连接此模块时将sysctl参数<code>vm.overcommit_memory</code>为1，因为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在这里</a> 。 然后，我们编写一个提供此功能的小型配置文件： </p><br><pre> <code class="hljs lua"># standalone redis server class profiles::db::redis ( Hash $<span class="hljs-built_in"><span class="hljs-built_in">config</span></span> = {}, String $output_buffer_limit_slave = <span class="hljs-string"><span class="hljs-string">'256mb 64mb 60'</span></span>, ) { # https://redis.<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>/topics/faq#background-saving-fails-with-a-fork-<span class="hljs-built_in"><span class="hljs-built_in">error</span></span>-under-linux-even-<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>-i-have-a-lot-of-free-ram sysctl { <span class="hljs-string"><span class="hljs-string">'vm.overcommit_memory'</span></span>: ensure =&gt; present, value =&gt; <span class="hljs-string"><span class="hljs-string">'1'</span></span>, } class { <span class="hljs-string"><span class="hljs-string">'::redis'</span></span>: * =&gt; $<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>, } }</code> </pre> <br><p> 如上所述，配置文件是允许您更改/改善模块行为以及减少层次结构中配置数量的工具。 如果使用远程模块，则经常会遇到“经批准”的模块通常不具备所需功能或存在一些错误/缺陷的问题。 然后，原则上，您可以克隆此模块并更正/添加功能。 但是，如果可能的话，正确的决定是编写一个良好的配置文件，以所需的方式“准备”模块。 以下是配置文件的一些示例，您可以更好地理解为什么需要它们。 </p><br><h3 id="sokrytie-sekretov-v-hiera"> 隐藏在希拉的秘密 </h3><br><p> 与裸纸浆相比，hiera的重要优势之一是它能够以加密形式在存储库中将敏感数据存储在配置文件中。 您的密码将是安全的。 </p><br><p> 简而言之，您可以使用公共密钥来加密所需的信息，并将其以这样的一行放置在hiera文件中。 密钥的私有部分存储在pappet master中，您可以使用它解密此数据。 可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">项目</a>页面上找到更多详细信息。 </p><br><p> 在客户端（工作计算机）上，只需使用<strong><code>gem install hiera-eyaml</code></strong>即可安装该工具。 此外，使用形式为<strong><code>eyaml encrypt --pkcs7-public-key=/path/to/public_key.pkcs7.pem -s 'hello'</code></strong>您可以加密数据并将其粘贴到扩展名为eyaml或只是yaml的文件中，具体取决于您的方式配置，然后pappet将弄清楚。 您得到类似的东西： </p><br><pre> <code class="hljs ruby">roles::postrgresql::<span class="hljs-symbol"><span class="hljs-symbol">password:</span></span> <span class="hljs-string"><span class="hljs-string">'ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAbIz1ihQlThMWa9T+Lq194Y6QdElMD1XTev5y+VPSHtkPTu6Al6TJaSrXF+7phJIjue+NF4ZVtJCLkHxUR6nJJqks0fcGS1vF2+6mmM9cy69sIU1A3HqpOHZLuqHAc7jUqljYxpwWSIGOK6I2FygdAp5FfOTewqfcVVmXj97EJdcv3DKrbAlSrIMO2iZRYwQvyv+qnptnZ7pilR2veOCPW2UMm6zagDLutX9Ft5vERbdaiCiEfTOpVa9Qx0GqveNRVJLV/5lfcL5ajdNBJXkvKqDbx8d3ZBtEVAAqeKlw0LqzScgmCbWQx2kUzukX5LSxbTpT0Th984Vp1sl7iPk7UTA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCp5GcwidcEMA+0wjAMblkKgBCR/f9KGXUgLh3/Ok60OIT5]'</span></span></code> </pre> <br><p> 或多行字符串： </p><br><pre> <code class="hljs powershell">roles::postgresql::password: &gt; ENC[<span class="hljs-type"><span class="hljs-type">PKCS7</span></span>,<span class="hljs-type"><span class="hljs-type">MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEw</span></span> <span class="hljs-type"><span class="hljs-type">DQYJKoZIhvcNAQEBBQAEggEAbIz1ihQlThMWa9T</span></span>+<span class="hljs-type"><span class="hljs-type">Lq194Y6QdElMD1XTev5y</span></span> +<span class="hljs-type"><span class="hljs-type">VPSHtkPTu6Al6TJaSrXF</span></span>+<span class="hljs-number"><span class="hljs-number">7</span></span><span class="hljs-type"><span class="hljs-type">phJIjue</span></span>+<span class="hljs-type"><span class="hljs-type">NF4ZVtJCLkHxUR6nJJqks0fcGS1vF</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">6</span></span><span class="hljs-type"><span class="hljs-type">mmM9cy69sIU1A3HqpOHZLuqHAc7jUqljYxpwWSIGOK6I2FygdAp5FfOTe</span></span> <span class="hljs-type"><span class="hljs-type">wqfcVVmXj97EJdcv3DKrbAlSrIMO2iZRYwQvyv</span></span>+<span class="hljs-type"><span class="hljs-type">qnptnZ7pilR2veOCPW2UM</span></span> <span class="hljs-type"><span class="hljs-type">m6zagDLutX9Ft5vERbdaiCiEfTOpVa9Qx0GqveNRVJLV</span></span>/<span class="hljs-number"><span class="hljs-number">5</span></span><span class="hljs-type"><span class="hljs-type">lfcL5ajdNBJXkv</span></span> <span class="hljs-type"><span class="hljs-type">KqDbx8d3ZBtEVAAqeKlw0LqzScgmCbWQx2kUzukX5LSxbTpT0Th984Vp1sl7</span></span> <span class="hljs-type"><span class="hljs-type">iPk7UTA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCp5GcwidcEMA</span></span>+<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">wjAM</span></span> <span class="hljs-type"><span class="hljs-type">blkKgBCR</span></span>/<span class="hljs-type"><span class="hljs-type">f9KGXUgLh3</span></span>/<span class="hljs-type"><span class="hljs-type">Ok60OIT5</span></span>]</code> </pre> <br><p> 看来我们已经做好了准备，现在我们可以考虑一个例子。 </p><br><h3 id="primer-na-palcah"> 手指示例 </h3><br><p>  <strong>Spoiler</strong> ： <em>将会有更多的配置，因此那些对本文仅出于理论上的兴趣的人可以跳过本节，然后继续进行。</em> </p><br><p> 现在，让我们看一个如何在puppet4中使用hiera配置服务器的示例。 我不会发布所有配置文件的代码，因为否则该帖子可能会很大。 我将专注于层次结构和层次结构。 </p><br><p>  <strong>任务是这样的：</strong>我们需要部署： </p><br><ul><li> 在其上部署了postgresql的两个相同的数据库服务器 </li><li> 另外两台服务器-Nginx前端 </li><li> 第五和第六个服务器-Docker中的python后端 </li><li> 除了某些服务器配置外，开发环境上的所有内容都相同 </li></ul><br><p> 我们将按顺序创建层次结构，并从项目文件开始。 </p><br><h4 id="proekt"> 专案 </h4><br><p> 创建项目文件<strong><code>projects/kicker.yaml</code></strong> 。 我们放入了所有服务器共有的东西：我们需要一些存储库和文件夹来进行部署，以及部署用户本人。 </p><br><pre> <code class="hljs ruby">--- <span class="hljs-symbol"><span class="hljs-symbol">classes:</span></span> - apt::debian::semrush <span class="hljs-symbol"><span class="hljs-symbol">files:</span></span> <span class="hljs-string"><span class="hljs-string">"/srv/data"</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">ensure:</span></span> <span class="hljs-string"><span class="hljs-string">'directory'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">owner:</span></span> <span class="hljs-string"><span class="hljs-string">'deploy'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">group:</span></span> <span class="hljs-string"><span class="hljs-string">'www-data'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">mode:</span></span> <span class="hljs-string"><span class="hljs-string">'0755'</span></span> <span class="hljs-string"><span class="hljs-string">'/srv/data/shared_temp'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">ensure:</span></span> <span class="hljs-string"><span class="hljs-string">'directory'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">owner:</span></span> <span class="hljs-string"><span class="hljs-string">'deploy'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">group:</span></span> <span class="hljs-string"><span class="hljs-string">'www-data'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">mode:</span></span> <span class="hljs-string"><span class="hljs-string">'0775'</span></span> user_management::<span class="hljs-symbol"><span class="hljs-symbol">present:</span></span> - deploy</code> </pre> <br><h4 id="rol-db">  db角色 </h4><br><p> 为<strong><code>projects/kicker/db.yaml</code></strong>数据库服务器创建一个角色文件。 到目前为止，我们不会将服务器划分为多个环境： </p><br><pre> <code class="hljs ruby">--- <span class="hljs-symbol"><span class="hljs-symbol">classes:</span></span> - profiles::db::postgresql profiles::db::postgresql::<span class="hljs-symbol"><span class="hljs-symbol">globals:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">manage_package_repo:</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-symbol"><span class="hljs-symbol">version:</span></span> <span class="hljs-string"><span class="hljs-string">'10'</span></span> profiles::db::postgresql::<span class="hljs-symbol"><span class="hljs-symbol">db_configs:</span></span> <span class="hljs-string"><span class="hljs-string">'listen_addresses'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">value:</span></span> <span class="hljs-string"><span class="hljs-string">'*'</span></span> profiles::db::postgresql::<span class="hljs-symbol"><span class="hljs-symbol">databases:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">kicker:</span></span> {} profiles::db::postgresql::<span class="hljs-symbol"><span class="hljs-symbol">hba_rules:</span></span> <span class="hljs-string"><span class="hljs-string">'local connect to kicker'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">type:</span></span> <span class="hljs-string"><span class="hljs-string">'local'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">database:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">user:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">auth_method:</span></span> <span class="hljs-string"><span class="hljs-string">'md5'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">order:</span></span> <span class="hljs-string"><span class="hljs-string">'001'</span></span> <span class="hljs-string"><span class="hljs-string">'allow connect from 192.168.1.100'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">type:</span></span> <span class="hljs-string"><span class="hljs-string">'host'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">database:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">user:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">auth_method:</span></span> <span class="hljs-string"><span class="hljs-string">'md5'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">address:</span></span> <span class="hljs-string"><span class="hljs-string">'192.168.1.100/32'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">order:</span></span> <span class="hljs-string"><span class="hljs-string">'002'</span></span></code> </pre> <br><p> 在这里，我们连接一个供所有希望在其服务器上安装postgres的用户使用的通用配置文件。 我们配置配置文件，并允许您在应用之前灵活配置模块。 </p><br><p> 最令人好奇的是，在此配置文件的代码下方： </p><br><div class="spoiler">  <b class="spoiler_title">资料:: DB :: PostgreSQL</b> <div class="spoiler_text"><pre> <code class="hljs mel">class profiles::db::postgresql ( Hash $globals = {}, Hash $params = {}, Hash $recovery = {}, Hash[String, Hash[String, Variant[String, Boolean, Integer]]] $roles = {}, Hash[String, Hash[String, Variant[String, Boolean]]] $db_configs = {}, Hash[String, Hash[String, Variant[String, Boolean]]] $databases = {}, Hash[String, String] $db_grants = {}, Hash[String, Hash[String, String]] $extensions = {}, Hash[String, String] $table_grants = {}, Hash[String, Hash[String, String]] $hba_rules = {}, Hash[String, String] $indent_rules = {}, Optional[String] $role = undef, # <span class="hljs-string"><span class="hljs-string">'master'</span></span>, <span class="hljs-string"><span class="hljs-string">'slave'</span></span> Optional[String] $master_host = undef, Optional[String] $replication_password = undef, Integer $master_port = <span class="hljs-number"><span class="hljs-number">5432</span></span>, String $replication_user = <span class="hljs-string"><span class="hljs-string">'repl'</span></span>, String $trigger_file = <span class="hljs-string"><span class="hljs-string">'/tmp/pg_trigger.file'</span></span>, ){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> $role { <span class="hljs-string"><span class="hljs-string">'slave'</span></span>: { $_params = { manage_recovery_conf =&gt; true, } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> $globals[<span class="hljs-string"><span class="hljs-string">'datadir'</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> { <span class="hljs-string"><span class="hljs-string">"${globals['datadir']}/recovery.done"</span></span>: ensure =&gt; absent, } } $_recovery = { <span class="hljs-string"><span class="hljs-string">'recovery config'</span></span> =&gt; { standby_mode =&gt; <span class="hljs-string"><span class="hljs-string">'on'</span></span>, primary_conninfo =&gt; <span class="hljs-string"><span class="hljs-string">"host=${master_host} port=${master_port} user=${replication_user} password=${replication_password}"</span></span>, trigger_file =&gt; $trigger_file, } } $_conf = { <span class="hljs-string"><span class="hljs-string">'hot_standby'</span></span> =&gt; { value =&gt; <span class="hljs-string"><span class="hljs-string">'on'</span></span>, }, } <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> { $trigger_file: ensure =&gt; absent, } } <span class="hljs-string"><span class="hljs-string">'master'</span></span>: { $_conf = { <span class="hljs-string"><span class="hljs-string">'wal_level'</span></span> =&gt; { value =&gt; <span class="hljs-string"><span class="hljs-string">'replica'</span></span>, }, <span class="hljs-string"><span class="hljs-string">'max_wal_senders'</span></span> =&gt; { value =&gt; <span class="hljs-number"><span class="hljs-number">5</span></span>, }, <span class="hljs-string"><span class="hljs-string">'wal_keep_segments'</span></span> =&gt; { value =&gt; <span class="hljs-number"><span class="hljs-number">32</span></span>, }, } <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> { $trigger_file: ensure =&gt; present, } } <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: { $_params = {} $_recovery = {} $_conf = {} } } class { <span class="hljs-string"><span class="hljs-string">'::postgresql::globals'</span></span>: * =&gt; $globals, } class { <span class="hljs-string"><span class="hljs-string">'::postgresql::server'</span></span>: * =&gt; deep_merge($_params, $params), } create_resources(<span class="hljs-string"><span class="hljs-string">'::postgresql::server::config_entry'</span></span>, deep_merge($_conf, $db_configs)) create_resources(<span class="hljs-string"><span class="hljs-string">'::postgresql::server::role'</span></span>, $roles) create_resources(<span class="hljs-string"><span class="hljs-string">'::postgresql::server::database'</span></span>, $databases) create_resources(<span class="hljs-string"><span class="hljs-string">'::postgresql::server::database_grant'</span></span>, $db_grants) create_resources(<span class="hljs-string"><span class="hljs-string">'::postgresql::server::extension'</span></span>, $extensions) create_resources(<span class="hljs-string"><span class="hljs-string">'::postgresql::server::table_grant'</span></span>, $table_grants) create_resources(<span class="hljs-string"><span class="hljs-string">'::postgresql::server::pg_hba_rule'</span></span>, $hba_rules) create_resources(<span class="hljs-string"><span class="hljs-string">'::postgresql::server::pg_indent_rule'</span></span>, $indent_rules) create_resources(<span class="hljs-string"><span class="hljs-string">'::postgresql::server::recovery'</span></span>, deep_merge($_recovery, $recovery)) }</code> </pre> </div></div><br><p> 因此，我们<code>Postgresql 10</code>安装了<code>Postgresql 10</code> ，配置了config（ <code>listen</code> ），创建了<code>kicker</code>数据库，并在<code>pg_hba.conf</code>编写了两个访问该数据库的规则。 好酷！ </p><br><h4 id="rol-frontend"> 前端角色 </h4><br><p> 我们承担<code>frontend</code> 。 使用以下内容创建<strong><code>projects/kicker/frontend.yaml</code></strong>文件： </p><br><pre> <code class="hljs ruby">--- <span class="hljs-symbol"><span class="hljs-symbol">classes:</span></span> - profiles::webserver::nginx profiles::webserver::nginx::<span class="hljs-symbol"><span class="hljs-symbol">servers:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker.semrush.com'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">use_default_location:</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-symbol"><span class="hljs-symbol">listen_port:</span></span> <span class="hljs-number"><span class="hljs-number">80</span></span> <span class="hljs-symbol"><span class="hljs-symbol">server_name:</span></span> - <span class="hljs-string"><span class="hljs-string">'kicker.semrush.com'</span></span> profiles::webserver::nginx::<span class="hljs-symbol"><span class="hljs-symbol">locations:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker-root'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">location:</span></span> <span class="hljs-string"><span class="hljs-string">'/'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">server:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker.semrush.com'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">proxy:</span></span> <span class="hljs-string"><span class="hljs-string">'http://kicker-backend.semrush.com:8080'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">proxy_set_header:</span></span> - <span class="hljs-string"><span class="hljs-string">'X-Real-IP $remote_addr'</span></span> - <span class="hljs-string"><span class="hljs-string">'X-Forwarded-for $remote_addr'</span></span> - <span class="hljs-string"><span class="hljs-string">'Host kicker.semrush.com'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">location_cfg_append:</span></span> <span class="hljs-string"><span class="hljs-string">'proxy_next_upstream'</span></span>: <span class="hljs-string"><span class="hljs-string">'error timeout invalid_header http_500 http_502 http_503 http_504'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">proxy_connect_timeout:</span></span> <span class="hljs-string"><span class="hljs-string">'5'</span></span></code> </pre> <br><p> 这里的一切都很简单。 我们连接<strong><code>profiles::webserver::nginx</code></strong>概要文件，该概要文件准备进入nginx模块的条目，并定义变量，尤其是该站点的<code>server</code>和<code>location</code> 。 </p><br><p> 细心的读者会注意到，将站点的描述放在层次结构中更高的位置更合适，因为我们仍然会拥有一个dev环境，并且在那里将使用其他变量（ <code>server_name</code> ， <code>proxy</code> ），但这并不是太重要。 通过这种方式描述角色，我们可以看到如何仅通过层次结构来重新定义这些变量。 </p><br><h4 id="rol-docker">  Docker角色 </h4><br><p>  <strong><code>projects/kicker/docker.yaml</code></strong> ： </p><br><pre> <code class="hljs ruby">--- <span class="hljs-symbol"><span class="hljs-symbol">classes:</span></span> - profiles::docker profiles::docker::<span class="hljs-symbol"><span class="hljs-symbol">params:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">version:</span></span> <span class="hljs-string"><span class="hljs-string">'17.05.0~ce-0~debian-stretch'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">packages:</span></span> <span class="hljs-string"><span class="hljs-string">'python3-pip'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">provider:</span></span> apt <span class="hljs-string"><span class="hljs-string">'Fabric3'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">provider:</span></span> pip3 <span class="hljs-symbol"><span class="hljs-symbol">ensure:</span></span> <span class="hljs-number"><span class="hljs-number">1.12</span></span>.post1 user_management::<span class="hljs-symbol"><span class="hljs-symbol">users:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">deploy:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">groups:</span></span> - docker</code> </pre> <br><p>  <strong><code>profiles/docker.pp</code></strong>非常简单优雅。 我将给出他的代码： </p><br><div class="spoiler">  <b class="spoiler_title">个人资料::码头工人</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">profiles</span></span></span><span class="hljs-class">:</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">:docker </span></span></span></span>( Hash $params = {}, <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> $install_kernel = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, ){ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-string"><span class="hljs-string">'docker'</span></span>: * =&gt; $params, } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($install_kernel) { include profiles::docker::kernel } }</code> </pre> </div></div><br><p> 一切准备就绪。 这足以将我们需要的产品部署到许多服务器上，只需为它们分配特定的项目和角色即可（例如，将文件以所需的格式放在facts.d目录中，该文件的位置取决于安装p的方法）。 </p><br><p> 现在，我们具有以下文件结构： </p><br><pre> <code class="bash hljs">. ├── kicker │ ├── db.yaml │ ├── docker.yaml │ └── frontend.yaml └── kicker.yaml 1 directory, 4 files</code> </pre> <br><p> 现在，我们将讨论环境和特定站点上角色所独有的配置的定义。 </p><br><h4 id="okruzheniya-i-override"> 环境与替代 </h4><br><p> 让我们为所有销售创建常规配置。 文件<strong><code>projects/kicker/tiers/prod.yaml</code></strong>包含一个指示，表明我们需要将带有防火墙的类连接到此环境（当然，prod都一样），以及提供更高安全级别的某个类： </p><br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">--- classes: - semrush_firewall - strict_security_level</span></span></code> </pre> <br><p> 对于开发环境，如果我们需要描述特定的内容，则会创建相同的文件，并在其中输入必要的配置。 </p><br><p> 接下来，您仍然需要为开发环境中的<code>frontend</code>角色的nginx配置重新定义变量。 为此，您需要创建文件<strong><code>projects/kicker/tiers/dev/frontend.yaml</code></strong> 。 注意新的层次结构。 </p><br><pre> <code class="hljs ruby">--- profiles::webserver::nginx::<span class="hljs-symbol"><span class="hljs-symbol">servers:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker-dev.semrush.com'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">use_default_location:</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-symbol"><span class="hljs-symbol">listen_port:</span></span> <span class="hljs-number"><span class="hljs-number">80</span></span> <span class="hljs-symbol"><span class="hljs-symbol">server_name:</span></span> - <span class="hljs-string"><span class="hljs-string">'kicker-dev.semrush.com'</span></span> profiles::webserver::nginx::<span class="hljs-symbol"><span class="hljs-symbol">locations:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker-root'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">location:</span></span> <span class="hljs-string"><span class="hljs-string">'/'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">server:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker-dev.semrush.com'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">proxy:</span></span> <span class="hljs-string"><span class="hljs-string">'http://kicker-backend-dev.semrush.com:8080'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">proxy_set_header:</span></span> - <span class="hljs-string"><span class="hljs-string">'X-Real-IP $remote_addr'</span></span> - <span class="hljs-string"><span class="hljs-string">'X-Forwarded-for $remote_addr'</span></span> - <span class="hljs-string"><span class="hljs-string">'Host kicker-dev.semrush.com'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">location_cfg_append:</span></span> <span class="hljs-string"><span class="hljs-string">'proxy_next_upstream'</span></span>: <span class="hljs-string"><span class="hljs-string">'error timeout invalid_header http_500 http_502 http_503 http_504'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">proxy_connect_timeout:</span></span> <span class="hljs-string"><span class="hljs-string">'5'</span></span></code> </pre> <br><p> 您不再需要指定一个类；它是从层次结构的先前级别继承的。 在这里，我们更改了<code>server_name</code>和<code>proxy_pass</code> 。 具有事实角色= frontend和tier = dev的服务器将首先为其自身找到<strong><code>projects/kicker/frontend.yaml</code></strong>文件，但是此文件中的变量将被优先级更高的<strong><code>projects/kicker/tiers/dev/frontend.yaml</code></strong>文件覆盖。 </p><br><h4 id="sokrytie-parolya-dlya-postgresql">  PostgreSQL的密码隐藏 </h4><br><p> 因此，我们在议程上有最后一项-设置PostgreSQL的密码。 </p><br><p> 密码在环境中应有所不同。 我们将使用eyaml安全地存储密码。 创建密码： </p><br><pre> <code class="bash hljs">eyaml encrypt -s <span class="hljs-string"><span class="hljs-string">'verysecretpassword'</span></span> eyaml encrypt -s <span class="hljs-string"><span class="hljs-string">'testpassword'</span></span></code> </pre> <br><p> 我们将结果行分别粘贴到<code>**projects/kicker/tiers/prod/db.yaml**</code>和<code>**projects/kicker/tiers/dev/db.yaml**</code> （或者您可以使用eyaml扩展名，这是可自定义的）。 这是一个例子： </p><br><pre> <code class="hljs ruby">--- profiles::db::postgresql::<span class="hljs-symbol"><span class="hljs-symbol">roles:</span></span> <span class="hljs-string"><span class="hljs-string">'kicker'</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">password_hash:</span></span> &gt; <span class="hljs-string"><span class="hljs-string">'ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAsdpb2P0axUJzyWr2duRKAjh0WooGYUmoQ5gw0nO9Ym5ftv6uZXv25DRMKh7vsbzrrOR5/lLesx/pAVmcs2qbhd/y0Vr1oc2ohHlZBBKtCSEYwem5VN+kTMhWPvlt93x/S9ERoBp8LrrsIvicSYZByNfpS2DXCFbogSXCfEPxTTmCOtlOnxdjidIc9Q1vfAXv7FRQanYIspr2UytScm56H/ueeAc/8RYK51/nXDMtdPOiAP5VARioUKyTDSk8FqNvdUZRqA3cl+hA+xD5PiBHn5T09pnH8HyE/39q09gE0pXRe5+mOnU/4qfqFPc/EvAgAq5mVawlCR6c/cCKln5wJTA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBDNKijGHBLPCth0sfwAjfl/gBAaPsfvzZQ/Umgjy1n+im0s]'</span></span></code> </pre> <br><p> 接下来，将提供<code>kicker</code>角色的密码，并将其解密并应用于PostgreSQL中的数据库服务器。 </p><br><p> 实际上，仅此而已。 是的，这个例子证明是巨大的，但是，我希望它是可行的，不会留下任何问题，既清晰又有用。 在hiera中得到的层次结构是这样的： </p><br><pre> <code class="bash hljs">. ├── db.yaml ├── docker.yaml ├── frontend.yaml └── tiers ├── dev │ ├── db.yaml │ └── frontend.yaml ├── prod │ └── db.yaml └── prod.yaml 3 directories, 7 files</code> </pre> <br><p> 您可以通过克隆专门创建的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">存储库来</a>实时观看这些文件 </p><br><h3 id="zaklyuchenie"> 结论 </h3><br><p>  Puppet很好，并且易于与hiera一起使用。 我根本不会称它为现代世界中理想的配置工具，但它值得关注。 他很好地处理了一些任务，他的“哲学”保持资源和配置的状态始终相同，可以在确保配置的安全性和统一性方面发挥重要作用。 </p><br><p> 现代世界正在逐步协同发展。 现在很少有人只使用一个配置系统，通常在devops和admin的人员中，一次有多个系统。 这很好，因为有很多选择。 最主要的是，一切都应该是逻辑且可理解的，如何以及在何处进行配置。 </p><br><p> 因此，我们作为管理员的目标是自己不配置任何内容。 理想情况下，所有这些都应由团队自己完成。 我们必须给他们提供一种工具或产品，使我们能够安全，轻松且最重要的是获得准确的结果。 好吧，比起“您需要在服务器上安装PostgreSQL并创建用户”，它还可以帮助解决体系结构和更严重的问题。 卡蒙，2018在院子里！ <del> 因此，丢下木偶和烦恼，走向无服务器的未来。 </del></p><br><p> 随着云，容器化和容器编排系统的发展，配置管理系统正逐渐退回到用户和客户的后台。 您还可以在云中构建容器的故障安全群集，并通过自动滑动，备份，复制，自动发现等将应用程序保存在容器中，而无需为ansible，puppet，chef等编写一行。 您无需照顾任何事情（好了，差不多）。 另一方面，由于云的原因，铁服务器数量较少。 只是您不再需要配置它们，此操作是云提供商的责任。 但是他们不太可能使用与普通凡人相同的系统。 </p><br><h4 id="credits"> 学分 </h4><br><p> 谢谢： </p><br><ul><li>  Dmitry Tupitsin，Dmitry Loginov，Stepan Fedorov和整个系统管理员团队在编写本文时提供了帮助 </li><li> 弗拉基米尔·莱格科斯托波夫（Vladimir Legkostupov）的照片 </li><li>  Yana Tabakova组织了所有这些工作，并帮助完成了所有预发布阶段 </li><li>  Nikita Zakharov在许可事宜上提供协助 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN412587/">https://habr.com/ru/post/zh-CN412587/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN412573/index.html">Geektimes返回Habr有什么问题</a></li>
<li><a href="../zh-CN412575/index.html">每年，流行音乐变得越来越单调，因为同一个人组成了流行音乐</a></li>
<li><a href="../zh-CN412579/index.html">奇迹：无限战争或如何在几分钟内为您的项目收集数据</a></li>
<li><a href="../zh-CN412581/index.html">从石器时代到第二次世界大战：如何使用机器人研究历史文物</a></li>
<li><a href="../zh-CN412583/index.html">我们拆卸Redmond G200S水壶协议并将其连接到HomeAssistant</a></li>
<li><a href="../zh-CN412591/index.html">建造喷气背包：5月29日是温德尔·摩尔纪念日</a></li>
<li><a href="../zh-CN412593/index.html">新产品，平台和全方位服务：HPE网络研讨会</a></li>
<li><a href="../zh-CN412595/index.html">《 2018年罗马俱乐部报告》第1.1.2章：“财务”</a></li>
<li><a href="../zh-CN412597/index.html">杰夫·贝佐斯（Jeff Bezos）将在月球表面建立一个殖民地</a></li>
<li><a href="../zh-CN412603/index.html">奇怪的php语句</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>