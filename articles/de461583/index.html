<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë©‚Äçüë¶‚Äçüë¶ üôÖüèΩ üÖ±Ô∏è Python zum Testen von Strukturprodukten ‚õé üÜñ ü•´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inspiriert von der Werbung f√ºr Strukturprodukte auf Habr√© , passte das Python-Skript f√ºr ihre unabh√§ngigen Tests an. Die Hauptidee ist, dass diese Pro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python zum Testen von Strukturprodukten</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461583/">  Inspiriert von der Werbung f√ºr Strukturprodukte auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Habr√©</a> , passte das Python-Skript f√ºr ihre unabh√§ngigen Tests an.  Die Hauptidee ist, dass diese Produkte 100% Kapitalschutz bieten.  Und angesichts von 10 Jahren Bullenmarkt ist die historische Leistung solcher Produkte mit einem risikofreien Paradies verbl√ºffend. <br><br>  Dieser Artikel ist interessant f√ºr Anf√§nger-Python-Programmierer, die daran interessiert sind, ihr Geld zu verwalten.  Nun, f√ºr einige kann dieses Tool n√ºtzlich sein, um solche Strategien selbst zu entwickeln.  Aber seien Sie vorsichtig, Makler schreiben, dass dies nicht jedermanns Sache ist. <br><br>  Der Code wird auf GitHub als Jupyter-Notizblock ver√∂ffentlicht.  Lass uns gehen! <br><a name="habracut"></a><br><h2>  Ein paar Worte zur Einf√ºhrung </h2><br>  Ich werde an amerikanischen Aktien testen und dort wird die Rendite niedriger sein als in Rubel.  Der russische Markt in absoluten Zahlen in den Charts ist interessanter, birgt aber mehr Risiken.  Das Wesen der Tests √§ndert sich hiervon nicht. <br><br>  Wir beziehen die Daten aus den kostenlosen Alpha Advantages, wo Sie zuerst den Schl√ºssel erhalten m√ºssen, indem Sie die E-Mail-Adresse teilen.  Kurze Anleitung in einem Notizbuch.  Bei Finam k√∂nnen Sie russische Wertpapiere notieren. <br><br><h2>  Strukturelles Produktcharisma </h2><br>  Kurz gesagt, Ihr Kapital ist sicher und die Rendite ist h√∂her als die Bankeinlage (Staatsanleihen).  Hier fehlen nur einige Elemente der Gleichung: <br><br><ul><li>  Es gibt immer Einnahmen aus einer Bankeinlage, aber es besteht das Risiko, Null zu spielen. </li><li>  Sie werden einen Gewinn machen, aber der Makler beansprucht ein bedeutendes St√ºck Kuchen; </li><li>  Die Verwendung von investiertem Geld ist beschr√§nkt. </li><li>  Der Broker tr√§gt praktisch keine Risiken und beteiligt sich nur am Gewinn. </li></ul><br><h2>  Strategie </h2><br>  Betrachten Sie die einfachste Strategie: <br><br><ul><li>  Wir kaufen 90% des Kapitals kurzfristiger Staatsanleihen; </li><li>  F√ºr den Rest kaufen wir einen risikoreichen Verm√∂genswert; </li><li>  Wir haben zu Beginn des Berichtszeitraums einen Stopp bei 10% des Preises eingestellt. </li></ul><br>  Im Zentrum der Strategie: Staatsanleihen geben 1-3% pro Jahr, praktisch ohne Drawdown (wenn es eine Rendite gibt).  10% der Inanspruchnahme eines mit 10% des Kapitals gekauften Verm√∂genswerts sind genau das Risiko, das Anleihen abdecken.  In Zeiten des Bullenmarktes k√∂nnen einige Aktien mehrmals wachsen, was uns gl√ºcklich macht. <br><br>  Um diese Strategie manuell zu wiederholen, m√ºssen Sie die folgenden Schritte ausf√ºhren: <br><br><ul><li>  Anleihen kaufen.  Zum Beispiel in Form eines ETF. </li><li>  Aktien kaufen. </li><li>  Geben Sie eine Stop-Order auf. </li></ul><br><h2>  Wie zu testen </h2><br>  Ich werde einige L√∂sungen mit Code-Ausz√ºgen kurz beschreiben, die das Testen sehr flexibel und bequem machten. <br><br><h3>  Zeitplan </h3><br>  Sie k√∂nnen das Gleichgewicht in den folgenden Zeitr√§umen wieder herstellen: Woche, Monat, Jahr.  Und auch an jedem Tag innerhalb des Zeitraums: dem ersten, dem neunten, dem letzten.  Die Klasse Schedule () ist daf√ºr verantwortlich: <br><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#         df = pd.DataFrame([], index=pd.date_range(start, end, freq='B')) # ... #      ,   df = df[df.index.isin(dates)].copy() # ... #    # ... elif freq == 'week': groupby = ['year', 'week'] elif freq == 'month': groupby = ['year', 'month'] elif freq == 'year': groupby = ['year'] #      grouped = df.groupby(groupby) for idx, grp in grouped: if len(grp) &gt;= abs(day): df.loc[grp.iloc[day].name, 'allow'] = True</span></span></code> </pre> <br><h3>  Datenzyklus </h3><br><pre> <code class="python hljs">StructuredProductMill().run()</code> </pre> <br>  Wie in einem der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel beschrieben</a> , k√∂nnen wir nur Neuausgleichstermine in einem Zyklus umgehen und alle anderen Tage √ºberspringen.  Aber dann verlieren wir Statistiken √ºber Ver√§nderungen der Verm√∂genswerte innerhalb des Zeitraums. Wir werden nicht f√ºr jeden Tag Rentabilit√§t und Drawdowns sehen.  Dieses Skript wird zum Nachteil der Geschwindigkeit jeden Tag ausgef√ºhrt, sodass Sie den Marktwert offener Positionen anzeigen und eine Stop-Order-Pr√ºfung durchf√ºhren k√∂nnen. <br><br><h3>  Neuausrichtung </h3><br><pre> <code class="python hljs">StructuredProductMill().rebalance()</code> </pre> <br>  Hier werden Verm√∂genswerte, die ge√∂ffnet werden k√∂nnen, dem verf√ºgbaren Kapital zugeordnet.  Nach dem Vergleich der Berechnung mit offenen Positionen werden Transaktionen f√ºr die erforderliche Anzahl ausgef√ºhrt: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  :       balance = self._cash + self.position_balance(day) #         df = day.merge(self._positions[['quantity']], how='left', left_index=True, right_index=True) # ... #              day.loc[is_allow, 'size_order'] = day[is_allow]['size'] / day[is_allow]['size'].sum() #        day['position_to'] = (balance * day['size_order']) // day['open'] #     day['order'] = day['position_to'] - day['position'] # ... #   for symbol, row in day[fltr].iterrows(): self.trade(row['dt'], symbol, row.order, row.open, 'O' if row.order &gt; 0 else 'C')</span></span></code> </pre><br><h3>  Angebote </h3><br><pre> <code class="python hljs">StructuredProductMill().trade()</code> </pre> <br>  Und hier k√∂nnen Sie aus Gr√ºnden der Geschwindigkeit Details opfern und nur die √Ñnderung der Rentabilit√§t jeder Position steuern.  Das Skript ber√ºcksichtigt jedoch Provisionen und den Wert von Assets und f√ºhrt auch einen Transaktionsverlauf, sodass Sie an jedem Tag des Tests Transaktionen berechnen und eine Stop-Order ausf√ºhren k√∂nnen.  Diese Methode aktualisiert die Position und Gr√∂√üe des freien Caches. <br><br><h3>  Starten </h3><br>  Zum Ausf√ºhren m√ºssen Sie eine Reihe von Assets mit Freigaben und Testparametern angeben.  Wir werden die Strukturprodukte f√ºr das Kalenderjahr testen: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   portfolio = {'MINT': 0.9, 'AAPL': 0.1,} #   SYMBOLS = list(portfolio.keys()) df = prices(SYMBOLS) params = { 'benchmark': 'SPY', #     'balance': 100_000, #   'portfolio': portfolio, 'rebalance_day': -1, #      'freq': 'year', #    'stop_loss': 0.1, # -  10% #          'reset_position_prices': True, 'allow_method': allow_default, 'start': pd.to_datetime('2011-01-01'), #   } #  ,      pm = StructuredProductMill(params, prices=prices(SYMBOLS + [params['benchmark']]), show_progress=True) pm.check_params().prepare() #   pm.run() #   pm.print_results(); #   pm.charts()</span></span></code> </pre><br>  Am unteren Rand des Notizbuchs befinden sich Diagramme mit Rentabilit√§t und Drawdowns zum Zeitpunkt der Neuausrichtung (zum Jahresende), die die zum Zeitpunkt des Berichts extrem niedrigen Kapitalabnahmen und die stetig wachsende Rentabilit√§t best√§tigen.  Obwohl diese Rentabilit√§t gegen√ºber dem breiten Index der amerikanischen Unternehmen S &amp; P 500 verliert. <br><br><h2>  Ergebnisse </h2><br>  Die Tests umfassten seit 2011 frei gehandelte amerikanische Instrumente: <br><br><ul><li>  BIL - ETF f√ºr kurzfristige Staatsanleihen mit einer Rendite von 2% pro Jahr zum Zeitpunkt des Schreibens.  Denken Sie daran, dass die Raten im Zeitraum von 2009 bis 2017 nahe Null lagen.  Eine Alternative ist die Verwendung von MINT (einem Fonds f√ºr kurzfristige festverzinsliche Instrumente). </li><li>  AAPL - Apple Aktie. </li><li>  MSFT - Microsoft-Aktie. </li><li>  TSLA - Tesla-Aktien. </li></ul><br><h3>  Aapl </h3><br>  Dieses Design brachte 8 Jahre lang einen Umsatz von 24% (durchschnittlich 2,6% pro Jahr) mit einem Drawdown zwischen den Neugewichten von -6%.  Aber um die Jahreswende ist der Drawdown ungef√§hr Null.  Der Stopp wurde nicht ber√ºhrt, der Markt mit 180% des Umsatzes verlor Ordnung. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f3b/02c/db5/f3b02cdb51ee00dee623838a20da0ed5.png" alt="Rentabilit√§t und Drawdown f√ºr jeden Tag"><br><br>  Rentabilit√§t und Drawdown f√ºr jeden Tag (Profitabilit√§t links, Drawdown rechts). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cf3/606/497/cf36064972efc96716ca5ce9b0408a9e.png" alt="Rentabilit√§t und Drawdown zum Jahreswechsel"><br><br>  Rentabilit√§t und Drawdown an der Kreuzung der Jahre (Rentabilit√§t links, Drawdown rechts). <br><br><h3>  Msft </h3><br>  Dieses Design brachte 8 Jahre lang einen Umsatz von 26% (durchschnittlich 2,75% pro Jahr) mit einem Drawdown zwischen den Neugewichten von -2%.  An der Kreuzung der Jahre gibt es keinen Drawdown. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f8/3cd/506/2f83cd5067fa388a85102ae73c8ac3f4.png" alt="Rentabilit√§t und Drawdown f√ºr jeden Tag"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4a6/c36/4d5/4a6c364d5fd322ff88688a8a2e63ed14.png" alt="Rentabilit√§t und Drawdown zum Jahreswechsel"><br><br><h3>  TSLA </h3><br>  Dieses Design brachte 8 Jahre lang einen Umsatz von 45% (durchschnittlich 4,6% pro Jahr) mit einem Drawdown zwischen den Neuausrichtungen von bis zu -15%.  Aber das alles im Jahr 2013, als Tesla fast f√ºnfmal wuchs.  Zum Jahreswechsel betr√§gt der Drawdown bis zu -2%.  Der hektischste, aber auch profitabelste Passagier. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1c/e12/0c0/f1ce120c0f705d3346be336bc7b48cc8.png" alt="Rentabilit√§t und Drawdown f√ºr jeden Tag"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f10/0e4/f6a/f100e4f6acf5154e8999ffe3a5ca6a4c.png" alt="Rentabilit√§t und Drawdown zum Jahreswechsel"><br><br><h2>  Fazit </h2><br>  Mit Notepad k√∂nnen Sie beliebige Portfolio-Kompositionen testen.  Dies k√∂nnen Humerusfonds oder mehrere Unternehmen sein.  Obwohl im Allgemeinen ohne Schutzg√ºter. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub-Repository</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de461583/">https://habr.com/ru/post/de461583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de461569/index.html">Hinweis f√ºr das Frontend: Was ist vor dem Testen zu √ºberpr√ºfen?</a></li>
<li><a href="../de461571/index.html">SVG im wirklichen Leben. Yandex-Bericht</a></li>
<li><a href="../de461575/index.html">Erstellen einer Cloud-basierten 3CX-TK-Anlage auf jedem Openstack-kompatiblen Hosting</a></li>
<li><a href="../de461577/index.html">Teil 5/2 Geb√§ude 1: Kreuzung der RocketChip Avenue und der rutschigen Instrumentierungsspur</a></li>
<li><a href="../de461579/index.html">WebMoney f√ºhrt neue WMP-Geldb√∂rsen ein und √§ndert die Spielregeln</a></li>
<li><a href="../de461587/index.html">Lokalisierung der Anwendung in 10 Schritten</a></li>
<li><a href="../de461589/index.html">Tic Tac Toe: Inhaltszyklus</a></li>
<li><a href="../de461593/index.html">API auf F #. Zugriff auf rollenbasierte Anwendungsmodule</a></li>
<li><a href="../de461595/index.html">Von der Theorie zur Praxis: Wie Studierende der Fakult√§t f√ºr Photonik und Optoinformatik studieren und arbeiten</a></li>
<li><a href="../de461601/index.html">Was ein nicht-technischer Gr√ºnder √ºber Softwareentwicklung wissen sollte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>