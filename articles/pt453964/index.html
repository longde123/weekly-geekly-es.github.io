<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò¨ üë©üèº‚ÄçüöÄ üíâ POO na linguagem R (parte 1): classes S3 ‚ùî üé† üßïüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R √© uma linguagem orientada a objetos. Nele, absolutamente tudo √© um objeto, come√ßando pelas fun√ß√µes e terminando com as tabelas. 


 Por sua vez, tod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>POO na linguagem R (parte 1): classes S3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453964/"><p>  R √© uma linguagem orientada a objetos.  Nele, absolutamente tudo √© um objeto, come√ßando pelas fun√ß√µes e terminando com as tabelas. </p><br><p>  Por sua vez, todo objeto em R pertence a uma classe.  De fato, no mundo √† nossa volta, a situa√ß√£o √© a mesma.  Estamos cercados por objetos, e cada objeto pode ser atribu√≠do a uma classe.  Uma classe determina o conjunto de propriedades e a√ß√µes que podem ser executadas com este objeto. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6c5/79c/992/6c579c992140a44ceb85c0359165ec15.jpg" alt="imagem"></p><a name="habracut"></a><br><p> Por exemplo, em qualquer cozinha, h√° uma mesa e fog√£o.  E a mesa e o fog√£o da cozinha podem ser chamados de equipamentos de cozinha.  As propriedades da tabela, em regra, s√£o limitadas por suas dimens√µes, cor e material a partir do qual √© feita.  O fog√£o possui uma gama mais ampla de propriedades, pelo menos energia, o n√∫mero de queimadores e o tipo de fog√£o (el√©trico ou a g√°s) ser√£o obrigat√≥rios. </p><br><p>  A√ß√µes que podem ser executadas em objetos s√£o chamadas de m√©todos.  Para a mesa e o prato, respectivamente, o conjunto de m√©todos tamb√©m ser√° diferente.  Voc√™ pode jantar √† mesa, cozinhar, mas √© imposs√≠vel tratar os alimentos com calor, para os quais geralmente √© usado um fog√£o. <br><img src="https://habrastorage.org/getpro/habr/post_images/8f8/8a9/06d/8f88a906d52701c8a5059106b2148fca.jpg" alt="imagem"></p><br><h2 id="soderzhanie">  Conte√∫do </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Propriedades da classe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fun√ß√µes Generalizadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que √© uma classe S3 e como criar sua pr√≥pria classe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fun√ß√µes de atribui√ß√£o a classes S3 personalizadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Desenvolvendo m√©todos personalizados para a fun√ß√£o de impress√£o gen√©rica</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Criando uma fun√ß√£o generalizada e m√©todos para ela</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Heran√ßa</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Quando voc√™ pode usar suas pr√≥prias classes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conclus√£o</a> </li></ul><br><h2 id="svoystva-klassov">  Propriedades da classe </h2><br><p>  Em R, cada objeto tamb√©m pertence a uma classe.  Dependendo da classe, ele possui um certo conjunto de propriedades e m√©todos.  Em termos de programa√ß√£o orientada a objetos (OOP), a possibilidade de combinar similar em um conjunto de propriedades e m√©todos de objetos em grupos (classes) √© chamada de <strong>encapsulamento</strong> . </p><br><p>  Um vetor √© a classe mais simples de objetos em R; possui a propriedade length.  Por exemplo, pegaremos as <em>letras</em> vetoriais incorporadas. </p><br><pre><code class="plaintext hljs">length(letters)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 26</code> </pre> <br><p>  Usando a fun√ß√£o <code>length</code> , obtivemos o comprimento do vetor de <em>letras</em> .  Agora vamos tentar aplicar a mesma fun√ß√£o ao quadro de data <em>interno</em> da <em>√≠ris</em> . </p><br><pre> <code class="plaintext hljs">length(iris)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 5</code> </pre> <br><p>  A fun√ß√£o de <code>length</code> , aplic√°vel √†s tabelas, retorna o n√∫mero de colunas. </p><br><p>  As tabelas tamb√©m t√™m outra propriedade, dimens√£o. </p><br><pre> <code class="plaintext hljs">dim(iris)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 150 5</code> </pre> <br><p>  A fun√ß√£o <code>dim</code> no exemplo acima exibe informa√ß√µes de que existem 150 linhas e 5 colunas na tabela de <em>√≠ris</em> . </p><br><p>  Por sua vez, o vetor n√£o tem dimens√£o. </p><br><pre> <code class="plaintext hljs">dim(letters)</code> </pre><br><pre> <code class="plaintext hljs">NULL</code> </pre> <br><p>  Assim, garantimos que objetos de diferentes classes tenham um conjunto diferente de propriedades. </p><br><h2 id="obobschyonnye-funkcii">  Fun√ß√µes Generalizadas </h2><br><p>  R possui muitas fun√ß√µes gen√©ricas: <code>print</code> , <code>plot</code> , <code>summary</code> etc.  Essas fun√ß√µes funcionam de maneira diferente com objetos de diferentes classes. </p><br><p>  Pegue, por exemplo, a fun√ß√£o <code>plot</code> .  Vamos execut√°-lo passando a tabela <em>iris</em> como argumento principal. </p><br><p> <code>plot(iris)</code> </p> <br><p>  <strong>Resultado:</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0ae/432/7ba/0ae4327babecab1c6f76a19b311450d3.png" alt="O resultado da fun√ß√£o plot"></p><br><p>  Agora vamos tentar passar para a fun√ß√£o <code>plot</code> um vetor de 100 n√∫meros aleat√≥rios que t√™m uma distribui√ß√£o normal. </p><br><p> <code>plot(rnorm(100, 50, 30))</code> </p> <br><p>  <strong>Resultado:</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4f7/c3e/85d/4f7c3e85d80cbcdf4484d201bd17ec99.png" alt="O resultado da fun√ß√£o plot"></p><br><p>  Obtivemos gr√°ficos diferentes, no primeiro caso, a matriz de correla√ß√£o, no segundo, o gr√°fico de dispers√£o, no qual o √≠ndice de observa√ß√£o √© exibido ao longo do eixo x e seu valor ao longo do eixo y. </p><br><p>  Assim, a fun√ß√£o <code>plot</code> pode se adaptar ao trabalho com diferentes classes.  Se retornarmos √† terminologia OOP, a capacidade de determinar a classe de um objeto recebido e executar v√°rias a√ß√µes com objetos de diferentes classes √© chamada <strong>polimorfismo</strong> .  Isso se deve ao fato de essa fun√ß√£o ser apenas um inv√≥lucro para uma variedade de m√©todos escritos para trabalhar com diferentes classes.  Voc√™ pode verificar isso com o seguinte comando: </p><br><pre> <code class="plaintext hljs">body(plot)</code> </pre> <br><pre> <code class="plaintext hljs">UseMethod("plot")</code> </pre> <br><p>  O comando <code>body</code> imprime o corpo da fun√ß√£o no console R.  Como voc√™ pode ver, o corpo da fun√ß√£o body consiste em apenas um <code>UseMethod("plot")</code> . </p><br><p>  I.e.  a fun√ß√£o <code>plot</code> , apenas inicia um dos muitos m√©todos gravados nele, dependendo da classe do objeto passado para ele.  Veja uma lista de todos os seus m√©todos da seguinte maneira. </p><br><pre> <code class="plaintext hljs">methods(plot)</code> </pre> <br><pre> <code class="plaintext hljs"> [1] plot.acf* plot.data.frame* plot.decomposed.ts* [4] plot.default plot.dendrogram* plot.density* [7] plot.ecdf plot.factor* plot.formula* [10] plot.function plot.hclust* plot.histogram* [13] plot.HoltWinters* plot.isoreg* plot.lm* [16] plot.medpolish* plot.mlm* plot.ppr* [19] plot.prcomp* plot.princomp* plot.profile.nls* [22] plot.raster* plot.spec* plot.stepfun [25] plot.stl* plot.table* plot.ts [28] plot.tskernel* plot.TukeyHSD*</code> </pre> <br><p>  O resultado indica que a fun√ß√£o plot possui 29 m√©todos, entre os quais existe <em>plot.default</em> , que funciona por padr√£o se a fun√ß√£o receber um objeto de uma classe desconhecida na entrada. </p><br><p>  Usando a fun√ß√£o de <code>methods</code> , voc√™ tamb√©m pode obter um conjunto de todas as fun√ß√µes generalizadas que possuem um m√©todo escrito para qualquer classe. </p><br><pre> <code class="plaintext hljs">methods(, "data.frame")</code> </pre> <br><pre> <code class="plaintext hljs"> [1] $&lt;- [ [[ [[&lt;- [5] [&lt;- aggregate anyDuplicated as.data.frame [9] as.list as.matrix by cbind [13] coerce dim dimnames dimnames&lt;- [17] droplevels duplicated edit format [21] formula head initialize is.na [25] Math merge na.exclude na.omit [29] Ops plot print prompt [33] rbind row.names row.names&lt;- rowsum [37] show slotsFromS3 split split&lt;- [41] stack str subset summary [45] Summary t tail transform [49] type.convert unique unstack within</code> </pre> <br><h2 id="chto-takoe-s3-klass-i-kak-sozdat-sobstvennyy-klass">  O que √© uma classe S3 e como criar sua pr√≥pria classe </h2><br><p>  Existem v√°rias classes no R que voc√™ pode criar por conta pr√≥pria.  Um dos mais populares √© o S3. </p><br><p>  Esta classe √© uma lista na qual v√°rias propriedades da classe que voc√™ criou s√£o armazenadas.  Para criar sua pr√≥pria classe, basta criar uma <em>lista</em> e dar um nome √† classe. </p><br><p>  O livro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"A arte de programar em R"</a> fornece um exemplo da classe de <em>funcion√°rios</em> , que armazena informa√ß√µes sobre o funcion√°rio.  Como exemplo para este artigo, tamb√©m decidi usar um objeto para armazenar informa√ß√µes sobre funcion√°rios.  Mas tornou mais complexo e funcional. </p><br><pre> <code class="plaintext hljs">#    employee1 &lt;- list(name = "Oleg", surname = "Petrov", salary = 1500, salary_datetime = Sys.Date(), previous_sallary = NULL, update = Sys.time()) #    class(employee1) &lt;- "emp"</code> </pre> <br><p>  Assim, criamos nossa pr√≥pria classe, que armazena os seguintes dados em sua estrutura: </p><br><ul><li>  Nome do Funcion√°rio </li><li>  Sobrenome do funcion√°rio </li><li>  Sal√°rio </li><li>  A hora em que o sal√°rio foi estabelecido </li><li>  Sal√°rio anterior </li><li>  Data e hora da √∫ltima atualiza√ß√£o de informa√ß√µes </li></ul><br><p>  Depois disso, com o comando <code>class(employee1) &lt;- "emp"</code> atribu√≠mos a classe <em>emp</em> ao objeto. </p><br><p>  Para a conveni√™ncia de criar objetos da classe <em>emp,</em> voc√™ pode escrever uma fun√ß√£o. </p><br><div class="spoiler">  <b class="spoiler_title">C√≥digo de fun√ß√£o para criar objetos da classe emp</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#     create_employee &lt;- function(name, surname, salary, salary_datetime = Sys.Date(), update = Sys.time()) { out &lt;- list(name = name, surname = surname, salary = salary, salary_datetime = salary_datetime, previous_sallary = NULL, update = update) class(out) &lt;- "emp" return(out) } #    emp    create_employee employee1 &lt;- create_employee("Oleg", "Petrov", 1500) #     class(employee1)</code> </pre> <br><pre> <code class="plaintext hljs">[1] "emp"</code> </pre> </div></div><br><h2 id="funkcii-prisvaivaniya-znacheniy-polzovatelskim-s3-klassam">  Fun√ß√µes de atribui√ß√£o a classes S3 personalizadas </h2><br><p>  Ent√£o, criamos nossa pr√≥pria classe <em>emp</em> , mas at√© agora isso n√£o nos deu nada.  Vamos ver por que criamos nossa pr√≥pria classe e o que podemos fazer com ela. </p><br><p>  Primeiro, voc√™ pode escrever fun√ß√µes de atribui√ß√£o para a turma criada. </p><br><div class="spoiler">  <b class="spoiler_title">Fun√ß√£o de atribui√ß√£o para [</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">"[&lt;-.emp" &lt;- function(x, i, value) { if ( i == "salary" || i == 3 ) { cat(x$name, x$surname, "has changed salary from", x$salary, "to", value) x$previous_sallary &lt;- x$salary x$salary &lt;- value x$salary_datetime &lt;- Sys.Date() x$update &lt;- Sys.time() } else { cat( "You can`t change anything except salary" ) } return(x) }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Fun√ß√£o de atribui√ß√£o para [[</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">"[[&lt;-.emp" &lt;- function(x, i, value) { if ( i == "salary" || i == 3 ) { cat(x$name, x$surname, "has changed salary from", x$salary, "to", value) x$previous_sallary &lt;- x$salary x$salary &lt;- value x$salary_datetime &lt;- Sys.Date() x$update &lt;- Sys.time() } else { cat( "You can`t change anything except salary" ) } return(x) }</code> </pre> </div></div><br><p>  Ao criar, as fun√ß√µes de atribui√ß√£o s√£o sempre citadas e t√™m a seguinte apar√™ncia: <code>"[&lt;-. " / "[[&lt;-. "</code> .  E eles t√™m 3 argumentos obrigat√≥rios. </p><br><ul><li>  <strong>x</strong> - O objeto ao qual o valor ser√° atribu√≠do; </li><li>  <strong>i</strong> - Nome / √≠ndice do elemento do objeto (nome, sobrenome, sal√°rio, sal√°rio_data, data_alta, atualiza√ß√£o); </li><li>  <strong>valor</strong> - o valor atribu√≠do. </li></ul><br><p>  Mais adiante, no corpo da fun√ß√£o, voc√™ escreve como os elementos da sua classe devem mudar.  No meu caso, quero que o usu√°rio possa alterar apenas o sal√°rio <em>(elemento</em> sal√°rio <em>, cujo √≠ndice √© 3)</em> .  Portanto, dentro da fun√ß√£o, escrevo um <code>if ( i == "salary" || i == 3 )</code> check <code>if ( i == "salary" || i == 3 )</code> .  Se o usu√°rio tentar editar outras propriedades, ele receber√° a mensagem <code>"You can't change anything except salary"</code> . </p><br><p>  Quando o elemento do <em>sal√°rio</em> √© <em>alterado,</em> √© exibida <em>uma</em> mensagem contendo o nome e o sobrenome do empregado, seu atual e o novo n√≠vel de sal√°rio.  O sal√°rio atual √© passado para a propriedade <em>previous_sallary</em> e o <em>sal√°rio</em> recebe um novo valor.  Os valores das propriedades <em>employee_datetime</em> e <em>update</em> tamb√©m s√£o atualizados. </p><br><p>  Agora voc√™ pode tentar alterar o sal√°rio. </p><br><pre> <code class="plaintext hljs">employee1["salary"] &lt;- 1750</code> </pre> <br><pre> <code class="plaintext hljs">Oleg Petrov has changed salary from 1500 to 1750</code> </pre> <br><h2 id="razrabotka-sobstvennyh-metodov-dlya-obobschyonnyh-funkciy">  Desenvolvendo M√©todos Customizados para Fun√ß√µes Gen√©ricas </h2><br><p>  Anteriormente, voc√™ j√° aprendeu que em R existem fun√ß√µes generalizadas que alteram seu comportamento, dependendo da classe recebida na entrada do objeto. </p><br><p>  Voc√™ pode adicionar seus m√©todos a fun√ß√µes generalizadas existentes e at√© criar suas pr√≥prias fun√ß√µes generalizadas. </p><br><p>  Uma das fun√ß√µes gen√©ricas mais usadas √© a <code>print</code> .  Essa fun√ß√£o √© acionada toda vez que voc√™ chama um objeto por seu nome.  Agora, a sa√≠da de impress√£o do objeto <em>emp</em> class que criamos se parece com isso: </p><br><pre> <code class="plaintext hljs">$name [1] "Oleg" $surname [1] "Petrov" $salary [1] 1750 $salary_datetime [1] "2019-05-29" $previous_sallary [1] 1500 $update [1] "2019-05-29 11:13:25 EEST"</code> </pre><br><p>  Vamos escrever nosso m√©todo para a fun√ß√£o de impress√£o. </p><br><pre> <code class="plaintext hljs">print.emp &lt;- function(x) { cat("Name:", x$name, x$surname, "\n", "Current salary:", x$salary, "\n", "Days from last udpate:", Sys.Date() - x$salary_datetime, "\n", "Previous salary:", x$previous_sallary) }</code> </pre> <br><p>  Agora, a fun√ß√£o de impress√£o pode imprimir objetos da nossa classe <em>emp</em> .  Basta digitar o nome do objeto no console e obter a seguinte sa√≠da. </p><br><pre> <code class="plaintext hljs">employee1</code> </pre> <br><pre> <code class="plaintext hljs">Name: Oleg Petrov Current salary: 1750 Days from last udpate: 0 Previous salary: 1500</code> </pre> <br><h2 id="sozdanie-obobschyonnoy-funkcii-i-metodov">  Criando Fun√ß√µes e M√©todos Gen√©ricos </h2><br><p>  A maioria das fun√ß√µes gen√©ricas dentro tem a mesma apar√™ncia e apenas usa a fun√ß√£o <code>UseMethod</code> . </p><br><pre> <code class="plaintext hljs">#   get_salary &lt;- function(x, ...) { UseMethod("get_salary") }</code> </pre> <br><p>  Agora, escreveremos dois m√©todos para ele, um para trabalhar com objetos da classe <em>emp</em> , o segundo m√©todo ser√° iniciado por padr√£o para objetos de todas as outras classes, para trabalhar com os quais nossa fun√ß√£o generalizada n√£o possui um m√©todo escrito separadamente. </p><br><pre> <code class="plaintext hljs">#      emp get_salary.emp &lt;- function(x) x$salary #      get_salary.default &lt;- function(x) cat("Work only with emp class objects")</code> </pre> <br><p>  O nome do m√©todo consiste no nome da fun√ß√£o e na classe de objetos que esse m√©todo processar√°.  O m√©todo <em>padr√£o</em> ser√° executado sempre que voc√™ passar um objeto de classe no qual o m√©todo n√£o est√° gravado. </p><br><pre> <code class="plaintext hljs">get_salary(employee1)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 1750</code> </pre> <br><pre> <code class="plaintext hljs">get_salary(iris)</code> </pre> <br><pre> <code class="plaintext hljs">Work only with emp class objects</code> </pre> <br><h2 id="nasledovanie">  Heran√ßa </h2><br><p>  Outro termo que voc√™ encontrar√° ao aprender programa√ß√£o orientada a objetos. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/816/718/892/8167188925cafe5b3224398c7d78b51d.png" alt="imagem"></p><br><p>  Tudo o que √© mostrado na imagem pode ser classificado como uma classe de <em>transporte</em> .  De fato, todos esses objetos t√™m um m√©todo comum - movimento e propriedades comuns, por exemplo, velocidade.  No entanto, todos os 6 objetos podem ser divididos em tr√™s subclasses: terra, √°gua e ar.  Nesse caso, a subclasse herdar√° as propriedades da classe pai, mas tamb√©m ter√° propriedades e m√©todos adicionais.  Uma propriedade semelhante na estrutura da programa√ß√£o orientada a objetos √© chamada <strong>heran√ßa</strong> . </p><br><p>  Em nosso exemplo, podemos alocar trabalhadores remotos para uma subclasse separada de <em>remote_emp</em> .  Esses funcion√°rios ter√£o uma propriedade adicional: cidade de resid√™ncia. </p><br><pre> <code class="plaintext hljs">#    employee2 &lt;- list(name = "Ivan", surname = "Ivanov", salary = 500, salary_datetime = Sys.Date(), previous_sallary = NULL, update = Sys.time(), city = "Moscow") #    remote_emp class(employee2) &lt;- c("remote_emp", "emp") #    class(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">[1] "remote_emp" "emp"</code> </pre> <br><p>  Ao atribuir uma classe, criar uma subclasse, usamos um vetor no qual o primeiro elemento √© o nome da subclasse, seguido pelo nome da classe pai. </p><br><p>  No caso de <strong>heran√ßa,</strong> todas as fun√ß√µes e m√©todos generalizados escritos para trabalhar com a classe pai funcionar√£o corretamente com suas subclasses. </p><br><pre> <code class="plaintext hljs">#    remote_emp   employee2</code> </pre> <br><pre> <code class="plaintext hljs">Name: Ivan Ivanov Current salary: 500 Days from last udpate: 0 Previous salary:</code> </pre> <br><pre> <code class="plaintext hljs">#   salary   remote_emp get_salary(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 500</code> </pre> <br><p>  Mas voc√™ pode desenvolver m√©todos separadamente para cada subclasse. </p><br><pre> <code class="plaintext hljs">#     salary   remote_emp get_salary.remote_emp &lt;- function(x) { cat(x$surname, "remote from", x$city, "\n") return(x$salary) }</code> </pre> <br><pre> <code class="plaintext hljs">#   salary   remote_emp get_salary(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">Ivanov remote from Moscow [1] 500</code> </pre> <br><p>  Funciona da seguinte maneira.  Primeiro, a fun√ß√£o generalizada procura por um m√©todo escrito para a subclasse <em>remote_emp</em> ; se n√£o o encontrar, vai mais longe e procura um m√©todo escrito para a classe pai <em>emp</em> . </p><br><h2 id="kogda-vam-mogut-prigoditsya-sobstvennye-klassy">  Quando voc√™ pode usar suas pr√≥prias classes </h2><br><p>  √â improv√°vel que a funcionalidade de criar suas pr√≥prias classes S3 seja √∫til para aqueles que est√£o apenas come√ßando sua jornada no dom√≠nio da linguagem R. </p><br><p>  Pessoalmente, eles foram √∫teis no desenvolvimento do pacote <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rfacebookstat</a> .  O fato √© que, na API do Facebook, o par√¢metro <em>action_breakdowns</em> existe para carregar eventos e responder a publica√ß√µes de publicidade em v√°rios grupos. </p><br><p>  Ao usar esses agrupamentos, voc√™ obt√©m uma resposta na forma de uma estrutura JSON no seguinte formato: </p><br><pre> <code class="plaintext hljs">{ "action_name": "like", "action_type": "post_reaction", "value": 6 } { "action_type": "comment", "value": 4 }</code> </pre> <br><p>  O n√∫mero e o nome dos elementos para diferentes <em>action_breakdowns s√£o</em> diferentes, portanto, para cada um, voc√™ precisa escrever seu pr√≥prio analisador.  Para resolver esse problema, usei a funcionalidade para criar classes S3 personalizadas e uma fun√ß√£o generalizada com um conjunto de m√©todos. </p><br><p>  Ao solicitar estat√≠sticas sobre eventos com agrupamentos, dependendo dos valores dos argumentos, foi definida uma classe que foi atribu√≠da √† resposta recebida da API.  A resposta foi passada para uma fun√ß√£o gen√©rica e, dependendo da classe especificada anteriormente, foi determinado um m√©todo que analisou o resultado.  Qualquer pessoa interessada em se aprofundar nos detalhes da implementa√ß√£o pode encontrar o c√≥digo para criar uma fun√ß√£o e m√©todos generalizados, e <a href="">aqui est√° o</a> seu uso. </p><br><p>  No meu caso, usei classes e m√©todos para process√°-los exclusivamente dentro do pacote.  Se voc√™ geralmente fornecer ao usu√°rio do pacote uma interface para trabalhar com as classes que voc√™ criou, todos os m√©todos dever√£o ser inclu√≠dos como uma diretiva <code>S3method</code> no arquivo <code>S3method</code> , conforme a seguir. </p><br><pre> <code class="plaintext hljs">S3method(_,) S3method("[&lt;-",emp) S3method("[[&lt;-",emp) S3method("print",emp)</code> </pre> <br><h2 id="zaklyuchenie">  Conclus√£o </h2><br><p>  Como fica claro no t√≠tulo do artigo, esta √© apenas a primeira parte, porque  em R, al√©m das classes <em>S3</em> , existem outras: <em>S4</em> , <em>R5</em> ( <em>RC</em> ), <em>R6</em> .  No futuro, tentarei escrever sobre cada uma dessas implementa√ß√µes OOP.  No entanto, qualquer pessoa com um n√≠vel de ingl√™s que lhes permita ler livremente livros, Headley Wickham √© bastante sucinta e, com exemplos, abordou esse t√≥pico em seu livro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Advanced R"</a> . </p><br><p>  Se de repente, em um artigo, perdi algumas informa√ß√µes importantes sobre as classes S3, ficarei grato se voc√™ escrever sobre isso nos coment√°rios. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt453964/">https://habr.com/ru/post/pt453964/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt453952/index.html">‚ÄúA solicita√ß√£o amadureceu‚Äù: Alexei Fedorov sobre uma nova confer√™ncia sobre sistemas distribu√≠dos</a></li>
<li><a href="../pt453956/index.html">Museum DataArt. Terminal de v√≠deo ADM-3A. O carro √© pesado, confi√°vel, abate</a></li>
<li><a href="../pt453958/index.html">Monoreposit√≥rios: por favor</a></li>
<li><a href="../pt453960/index.html">Global DevOps Bootcamp 2019 em Moscou</a></li>
<li><a href="../pt453962/index.html">RxSwift e Coroutines na Kotlin - desenvolvimento m√≥vel opcional da AGIMA e GeekBrains</a></li>
<li><a href="../pt453968/index.html">Desaprender pr√°ticas de revis√£o de c√≥digo t√≥xico</a></li>
<li><a href="../pt453970/index.html">Escrevemos o proxy reverso socks5 no PowerShell.</a></li>
<li><a href="../pt453972/index.html">Arque√≥logos recriam um alfinete de dois mil anos usando impress√£o e digitaliza√ß√£o 3D</a></li>
<li><a href="../pt453974/index.html">Concorr√™ncia de sistemas ML em material lingu√≠stico. Como aprendemos a preencher os espa√ßos em branco</a></li>
<li><a href="../pt453976/index.html">Programa educacional econ√¥mico para especialistas em TI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>