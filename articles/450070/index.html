<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöü üê∞ ü§Ωüèº 60 millones de campos y 27 cultivos. C√≥mo hicimos un mapa de todos los campos de Europa y EE. UU. üïõ üëãüèæ üèúÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hace unos meses, lanzamos el primer mapa interactivo gratuito del mundo, con el que puede ver informaci√≥n sobre cualquier campo en los EE. UU. Y Europ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>60 millones de campos y 27 cultivos. C√≥mo hicimos un mapa de todos los campos de Europa y EE. UU.</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450070/"><img src="https://habrastorage.org/webt/dq/bf/0b/dqbf0bvkm5hrtuknni-rm60ot9g.jpeg"><br><br>  Hace unos meses, lanzamos el primer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mapa interactivo gratuito</a> del mundo, con el que puede ver informaci√≥n sobre cualquier campo en los EE. UU. Y Europa.  Docenas de publicaciones escribieron sobre el mapa, y en Product Hunt ella recolect√≥ mil quinientos `` me gusta '' sin precedentes para un producto del sector agr√≠cola (y finalmente se convirti√≥ en el Producto de IA y Aprendizaje Autom√°tico del A√±o 2018).  Desarrollamos el mapa durante dos meses, as√≠ fue. <br><a name="habracut"></a><br>  El mapa interactivo se basa en algoritmos de aprendizaje autom√°tico e im√°genes satelitales.  Contiene informaci√≥n sobre 60 millones de campos y 27 culturas en 44 pa√≠ses de Europa y Estados Unidos.  Datos: por tres a√±os.  Reconocimos todos los campos con la ayuda de ML de im√°genes de sat√©lite.  Usando el mapa, puede monitorear tendencias a nivel de pa√≠ses y regiones, y observar el desarrollo de un campo espec√≠fico.  Por ejemplo, puede averiguar cu√°nta tierra ocupaba el ma√≠z en los Estados Unidos en 2016 (49,1 millones de hect√°reas) o qu√© regi√≥n de B√©lgica tiene la mayor cantidad de campos de trigo (Valonia). <br><br><img src="https://habrastorage.org/webt/ot/an/yq/otanyq1ez-dmw0m4xvkpckq5rn4.png"><br>  <i>Europa con un zoom m√≠nimo</i> <br><br>  Usando el mapa, tambi√©n puede encontrar informaci√≥n en un campo separado: su tama√±o, cultura, cronograma de desarrollo y un indicador de campo integral.  Se calcula mediante el √≠ndice NDVI, los indicadores clim√°ticos y la productividad relativa del campo.  En cualquier momento, puede ver c√≥mo se est√°n desarrollando las remolachas en su campo o qu√© √°rea asign√≥ el vecino a las legumbres el a√±o pasado.  Entre otras cosas, es hermoso.  Creamos el bot√≥n "campos hermosos al azar": te lleva a m√°s de 35 lugares en todo el mundo, cada uno de los cuales parece una obra de arte abstracto. <br><br>  La idea de crear dicha tarjeta apareci√≥ en julio del a√±o pasado.  Nos faltaba una herramienta que nos permitiera demostrar claramente todas nuestras capacidades tecnol√≥gicas.  En agosto, todo el equipo comenz√≥ a desarrollarse de cerca. <br><br><h2>  Datos: recopilar, procesar, comprimir </h2><br>  Al desarrollar el mapa, utilizamos im√°genes del sat√©lite Sentinel-2 del programa Cop√©rnico de la Uni√≥n Europea.  En total, se procesaron alrededor de 250 terabytes de informaci√≥n para Europa y EE. UU.  En la primera etapa, realizamos el preprocesamiento de las im√°genes: limpiamos las nubes, las sombras, la nieve y realizamos la compresi√≥n de datos.  Luego, en los 50 terabytes resultantes, lanzaron el proceso de b√∫squeda de l√≠mites de campo y clasificaci√≥n de culturas en nuestros modelos de aprendizaje autom√°tico.  En la salida, recibimos alrededor de 250 gigabytes de mapas vectoriales que contienen geometr√≠as de campo y cultivos. <br><br>  Para procesar datos y calcular estad√≠sticas, utilizamos las bases de datos PostgreSQL y PostGIS.  Despu√©s de exportar los datos vectoriales originales, obtuvimos una base de datos en la que hab√≠a aproximadamente 180 millones de registros de geometr√≠a de campo, as√≠ como m√°s de mil millones de registros de informaci√≥n de atributos adicionales sobre los propios campos durante tres a√±os.  Sobre esta cantidad de datos, calculamos estad√≠sticas, clasificaciones, determinamos la popularidad de diferentes culturas en las regiones del mundo, todo lo que se muestra en el mapa en la columna izquierda y consejos interactivos. <br><br><img src="https://habrastorage.org/webt/h3/hx/ea/h3hxeagfxn1qbfp_qh9pj5f3csm.jpeg"><br>  <i>Campos de croacia</i> <br><br>  Quer√≠amos calcular y mostrar r√°pidamente indicadores agron√≥micos para el campo, as√≠ como visualizar un gr√°fico del desarrollo de la planta durante la temporada.  Para hacer esto, utilizamos nuestro propio enfoque para el almacenamiento en cach√© y la compresi√≥n de datos satelitales.  Esto nos permiti√≥ reducir el tama√±o del almac√©n de datos en 100-200 veces, y reducir la velocidad de obtenci√≥n de informaci√≥n en el campo a 1 segundo. <br><br>  Tambi√©n en esta versi√≥n del mapa, agregamos un indicador integral de Puntuaci√≥n de campo, que le permite evaluar r√°pidamente la calificaci√≥n de campo.  Field Score es el primer paso hacia el pron√≥stico de rendimiento, en el que nuestro equipo est√° trabajando actualmente.  El mapa se hizo en poco tiempo, as√≠ que tuve que inventar muchas soluciones originales sobre la marcha.  Pero aplicamos todas las novedades en el trabajo de nuestro producto principal. <br><br><h2>  Mapa: elija el formato y prepare los datos </h2><br>  Para visualizar los datos, utilizamos Mapbox.  Hay dos enfoques para crear un mapa, probamos los dos.  El primero implica crear un mapa r√°ster.  En este caso, dividimos el mapa en cuadrados, que representamos en im√°genes y almacenamos en el servidor.  El navegador descarga varias im√°genes y las mueve cuando el usuario se mueve por el mapa.  Este enfoque le permite mostrar todos los campos, no necesita filtrar nada.  Esto es hermoso, lo negativo es que el mapa es est√°tico, adem√°s las im√°genes de mapa de bits pesan mucho. <br><br>  El segundo enfoque es crear un mapa vectorial.  El navegador carga los datos del vector y los anima en el lado del cliente.  As√≠ es como funcionan los mapas modernos de Google y Yandex.  Los datos pesan menos que las im√°genes y le permiten cambiar el dise√±o de cualquier elemento.  Este mapa puede ser realizado por el servicio Mapbox, en particular, su biblioteca Mapbox GL es una herramienta de c√≥digo abierto para mostrar mapas en la web.  Entre otras cosas, Mapbox proporciona un servicio de almacenamiento de mapas pago.  Puede cargar manualmente sus datos a sus servidores, y Mapbox distribuir√° r√°pidamente la informaci√≥n, asegurando la operaci√≥n precisa del mapa.  Esta es una parte esencial del trabajo, y gracias al hecho de que Mapbox se encarga de s√≠ misma, la tarea del equipo se ha simplificado enormemente. <br><br><img src="https://habrastorage.org/webt/u_/wo/fv/u_wofvjmemc-piwnprp5pwtmrra.png"><br>  <i>Emilia Romagna, Italia</i> <br><br>  Cuando se trabaja con datos vectoriales, existe una limitaci√≥n condicional: cuanta m√°s informaci√≥n desee mostrar en el mapa, m√°s lento funcionar√° todo.  Para resolver este problema, utilizamos una utilidad de Mapbox llamada Tippecanoe.  En funci√≥n de los algoritmos que seleccionamos, determin√≥ en qu√© zoom ciertos campos ser√°n visibles y cu√°les no, y elimin√≥ los objetos vectoriales invisibles de la capa.  En total, Tippecanoe tiene m√°s de 20 algoritmos de filtrado, probamos todo y seleccionamos algunos b√°sicos.  Preparamos los datos as√≠ preparados usando la tecnolog√≠a mbtiles de Mapbox hasta 50 gigabytes, y luego los cargamos en los servidores de la compa√±√≠a. <br><br>  El uso del marco Next JS, que realiza la representaci√≥n del lado del servidor de la p√°gina, hizo posible acelerar a√∫n m√°s el mapa.  La mayor√≠a de las aplicaciones en el mundo moderno se representan completamente en el lado del cliente: cuando se abre una ventana, el navegador muestra una p√°gina hmtl vac√≠a y un script que carga toda la informaci√≥n.  El marco Next JS representa todo en el servidor, y esto hace que la carga de la aplicaci√≥n sea r√°pida para el cliente. <br><br><h2>  Mapa: configura el visual y crea un "bot√≥n m√°gico" la noche antes del lanzamiento </h2><br>  Mapbox fue un descubrimiento agradable para nuestro dise√±ador.  El servicio simplific√≥ su tarea porque pudo visualizar los datos sin involucrar a un desarrollador front-end.  Desde el exterior puede parecer que es f√°cil colorear los campos en la interfaz terminada, pero hay muchos matices.  Tenemos 27 culturas, y elegir colores para ellas no fue f√°cil.  Para las culturas populares, se necesitan colores contrastantes, para colores menos populares y menos contrastantes, y todos deben ser claramente visibles en diferentes niveles de zoom.  El mapa tiene muchas sugerencias de anidamiento e interactivas, por lo que lo m√°s dif√≠cil fue pensar la l√≥gica de las transiciones a diferentes niveles. <br><br>  La noche anterior al lanzamiento, nos dimos cuenta de que aunque es interesante mirar el mapa y los n√∫meros, no quiero compartir esto en las redes sociales.  Por lo tanto, decidimos agregar el bot√≥n "campos hermosos al azar", que arroja a los usuarios entre diferentes lugares del planeta.  En toda la oficina buscamos lugares hermosos, en una hora apretamos un bot√≥n y lo inventamos todo.  Por la ma√±ana lo probamos y lo empezamos.  Parece que fue esta funci√≥n la que nos dio tanta cobertura.  De lo contrario, nadie habr√≠a prestado atenci√≥n al hecho de que los campos son similares a las pinturas abstractas.  No subestimes el poder de las decisiones de √∫ltima hora. <br><br><img src="https://habrastorage.org/webt/5d/xb/rn/5dxbrnwzr6i-iezjv2qxfz9ef3i.jpeg"><br>  <i>Campos de francia</i> <br><br>  Agregamos otra funci√≥n al mapa despu√©s del lanzamiento.  Sab√≠amos que a veces no reconocemos exactamente los campos y las culturas en el mapa, y los comentarios de los usuarios nos permiten mejorar nuestros algoritmos.  Despu√©s del lanzamiento, los agricultores comenzaron a enviar mensajes sobre inexactitudes en el reconocimiento de cultivos: "Tengo girasol creciendo en el campo, y ustedes tienen ma√≠z".  Para resolver este problema, agregamos un bot√≥n a la tarjeta de campo que nos env√≠a notificaciones de error.  La informaci√≥n que utilizamos se utiliza para mejorar la precisi√≥n de nuestros modelos de reconocimiento de cultivos. <br><br><h2>  Al final </h2><br>  Durante su desarrollo, el concepto de la tarjeta se ha vuelto mucho m√°s complicado.  Si al principio planeamos hacer una visualizaci√≥n simple de los campos y cultivos en todo el mundo, entonces el producto final result√≥ ser mucho m√°s complejo.  Pero la tarjeta vali√≥ la pena.  Despu√©s del lanzamiento, cientos de inversores, fundaciones e investigadores cient√≠ficos nos escribieron.  Utilizaremos parte de soluciones tecnol√≥gicas, por ejemplo, el marco Next JS y la utilidad Tippecanoe, para trabajar en nuestra plataforma web gratuita de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">agricultura de</a> precisi√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OneSoil</a> . <br><br>  Fuimos los primeros en mapear todos los campos de Estados Unidos y Europa en tres a√±os.  Los datos que recibimos son √∫nicos.  Ya sabemos m√°s sobre los campos que cualquier compa√±√≠a o estado.  Y las estad√≠sticas que obtenemos utilizando algoritmos de aprendizaje autom√°tico a menudo son m√°s precisas que las que se recopilaron manualmente.  Hemos dado el primer paso para reconocer autom√°ticamente los campos de todo el mundo: este es nuestro plan para el futuro cercano. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/450070/">https://habr.com/ru/post/450070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450060/index.html">C√≥mo descubr√≠ que mi visa no est√° lista, un mensaje en Slack</a></li>
<li><a href="../450062/index.html">Restaurar la circulaci√≥n en el cerebro unas horas despu√©s de la muerte.</a></li>
<li><a href="../450064/index.html">Microsoft Build 2019 - transmisi√≥n en vivo en ruso</a></li>
<li><a href="../450066/index.html">Prueba: ¬øC√≥mo cumple con los requisitos para el procesamiento de datos personales?</a></li>
<li><a href="../450068/index.html">C√≥mo la tecnolog√≠a manipula tu mente: el aspecto de un ilusionista y experto en √©tica del dise√±o Google</a></li>
<li><a href="../450072/index.html">Elegir un televisor para usted, su amado, desde el punto de vista cient√≠fico, no publicitario</a></li>
<li><a href="../450074/index.html">Avances en los ensayos de la vacuna contra el c√°ncer colorrectal de fase 1</a></li>
<li><a href="../450076/index.html">Refinamos la descripci√≥n de las funciones del sistema usando el diagrama de secuencia</a></li>
<li><a href="../450078/index.html">El cliente de Hertz demanda al integrador de Accenture, reclama $ 32 + millones por la actualizaci√≥n defectuosa del sitio</a></li>
<li><a href="../450080/index.html">Microbios ind√≠genas y digesti√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>