<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßîüèΩ ‚è±Ô∏è üíÉ Installer Vmware ESXi sur Mac Pro 1.1 üÖæÔ∏è üëø üàöÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'article d√©crit mon exp√©rience d'installation de VMware ESXi sur l'ancien Apple Mac Pro 1.1. 

  

 La t√¢che a √©t√© d√©finie par le client - pour √©tend...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Installer Vmware ESXi sur Mac Pro 1.1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476724/">  L'article d√©crit mon exp√©rience d'installation de VMware ESXi sur l'ancien Apple Mac Pro 1.1. <br><br> <a href=""><img src="https://habrastorage.org/webt/ie/fo/vc/iefovccpq3ylsnbc6cs2s0uclfg.jpeg"></a> <br><br>  La t√¢che a √©t√© d√©finie par le client - pour √©tendre le serveur de fichiers.  La fa√ßon dont le serveur de fichiers de l'entreprise a √©t√© cr√©√© sur PowerMac G5 en 2016 et la mani√®re de servir l'h√©ritage cr√©√© m√©ritent un article s√©par√©.  Il a √©t√© d√©cid√© de combiner l'extension avec la mise √† niveau et de cr√©er le serveur de fichiers √† partir du MacPro existant.  Et comme il s'agit d'un processeur Intel, la virtualisation peut √©galement √™tre effectu√©e. <br><br>  La t√¢che est tout √† fait r√©alisable, mais j'ai d√ª faire face √† un certain nombre de difficult√©s et collecter des donn√©es bit √† bit sur leur solution.  De plus, la recherche d'une solution √©tait souvent obscurcie par les r√©sultats sur le probl√®me inverse ¬´installation de mac os sur VMware¬ª. <br><br>  Pour consolider l'exp√©rience acquise, collecter tous les grains en un seul endroit et les traduire en russe, cet article a √©t√© cr√©√©. <br><a name="habracut"></a><br>  Configuration requise pour le lecteur: familiarisez-vous avec l'installation de VMware ESXi sur du mat√©riel compatible avec celui-ci, tel qu'un serveur HP.  Familiarisez-vous avec la technique Apple.  En particulier, je ne donne pas de d√©tails sur le montage-d√©montage du MacPro, et il y a beaucoup de nuances. <br><br><h3>  1. Mat√©riel </h3><br>  MacPro 1.1, alias MA356LL / A, alias A1186 - le premier ordinateur Apple de processeurs Intel, a √©t√© produit en 2006-2008.  Malgr√© l'√¢ge de plus de 10 ans, l'ordinateur est en excellente condition physique.  Aucun des 4 fans les plus puissants n'est bruyant.  Nettoyage et d√©montage standard requis. <br><br>  Processeurs - 2 Xeon 5150 double c≈ìur. Architecture enti√®rement 64 bits, mais chargeur de d√©marrage EFI 32 bits.  C'est tr√®s important, la vie est tr√®s toxique! <br><br>  RAM - 4 Go PC5300 DDR2 ECC 667 MHz standard, peut √™tre facilement √©tendue √† 16 Go, et certains en disent plus.  La m√©moire du serveur convient √† l'ancien HP gen.5-6, et en g√©n√©ral l'ordinateur est tr√®s similaire √† ce serveur uniquement dans un cas diff√©rent. <br><br>  Disque dur - 4 paniers pour 3,5 ‚Äù( <abbr title="Grande usine de forme">LFF</abbr> ).  Avec quelques am√©liorations physiques, 2,5 "( <abbr title="Petite usine de forme">SFF</abbr> ) entre dans les paniers. Pour plus de d√©tails, voir <a href="http://www.efxi.ru/more/upgrade_ssd_mac_pro.html">[8] SSD dans Apple Mac Pro 1.1</a> . <br><br>  Il y a aussi un DVD IDE, jusqu'√† 2 morceaux de format 5.25 ". Mais, il y a aussi des connecteurs SATA. Sur la carte m√®re, ils sont appel√©s ODD SATA (ODD = Optical Disk Drive). Mes exp√©riences ont montr√© que vous pouvez et devez installer des disques durs et SSD √† cet endroit. <br><br><div class="spoiler">  <b class="spoiler_title">Plus avec des photos</b> <div class="spoiler_text">  Vous pouvez certainement combiner des p√©riph√©riques IDE et SATA.  Peut-√™tre qu'ils peuvent m√™me leur mettre 2 IDE et 2 SATA, n'a pas v√©rifi√©. <br><br>  N'oubliez pas quelques difficult√©s avec la nourriture: seulement 2 molex sont √©lev√©s, la capacit√© de charge est inconnue.  L'alimentation n'est pas la m√™me que sur un PC, toute l'alimentation passe par la carte m√®re, les connecteurs ne sont pas standard pour l'alimentation. <br><br>  Connecteur ODD <br><br> <a href=""><img src="https://habrastorage.org/webt/gx/ne/b6/gxneb6nya-2_rhpnpe0txxgvu34.jpeg"></a> <br><br>  Le 0,5m standard est court, il sera resserr√© et il n'est pratique que de le connecter au dernier moment avant la fin du glissement du panier dans le bo√Ætier. <br><br><img src="https://habrastorage.org/webt/aw/pl/rh/awplrhienujjzvlrauuzbc7x5rg.jpeg"><br><br>  Vous aurez besoin d'un c√¢ble SATA 0,8 m, de pr√©f√©rence avec un connecteur coud√©.  1m de trop. <br><br><img src="https://habrastorage.org/webt/vq/eg/w0/vqegw0enihb6tqo7npcs7dfzzio.jpeg"><br><br>  En tant qu'adaptateur physique 5.25-2.5, le cas d'un CD-ROM inutile est parfait.  S'il n'y a pas d'inutile - il le deviendra certainement apr√®s la s√©paration de la garniture du corps. <br><br><img src="https://habrastorage.org/webt/ed/hv/co/edhvco9rjvhxjsilnp4c8cf8xtk.jpeg"><br></div></div><br>  Un aper√ßu du mat√©riel et des possibilit√©s de sa modernisation peut √™tre compl√©t√© √† ce sujet.  Pour l'avenir, je dirai seulement que vous ne devriez pas vous pr√©cipiter pour collecter et installer tout √† la fois, dans le processus dont nous aurons besoin pour extraire le train. <br><br><h3>  2. S√©lection ESXi </h3><br>  En utilisant le <a href="https://www.vmware.com/resources/compatibility/search.php">tableau de compatibilit√© de VMware,</a> vous pouvez comprendre que le Xeon 5150 prend en charge un maximum d'ESXi 5.5 U3.  C'est cette version que nous allons installer. <br><br>  Dans ESXi 6.0, ils ont supprim√© la prise en charge de tout ce qui √©tait ¬´obsol√®te¬ª.  Officiellement, il ne peut pas √™tre mis ici et les plus r√©cents comme 6.7, vraiment - cela peut fonctionner.  Sur Internet, il a √©t√© mentionn√© que cela r√©ussit.  Mais, pas cette fois, mon opinion est que l'incompatibilit√© du processeur est une forte sorcellerie.  En production, cela n'est pas possible, uniquement pour les exp√©riences. <br><br>  Pour les nouvelles versions d'ESXi, les m√©thodes d'ach√®vement des fichiers sont les m√™mes. <br><br><h3>  3. Finalisation du dossier de distribution </h3><br>  La distribution a pris la norme.  C'est possible depuis le site, c'est possible depuis les torrents.  ESXi 5.5 U3. <br><br>  Mais, rappelez-vous, j'ai fait attention √† l'architecture enti√®rement 64 bits, mais le chargeur de d√©marrage EFI est 32 bits?!  Et ici, il se rencontrera.  Lorsque vous essayez de t√©l√©charger le programme d'installation, rien ne se produit. <br>  Il est n√©cessaire de remplacer le chargeur de d√©marrage du programme d'installation par un ancien 32 bits.  Il semble d'une version encore ant√©rieure √† 5.0. <br><br>  <i>Ceci est d√©crit en d√©tail dans l'article <a href="https://communities.vmware.com/thread/327538">[2] Compatibilit√© Mac Pro avec l'installation d'ESXi 5.0</a> , le fichier <a href="">BOOTIA32.EFI</a> en est <a href="">extrait</a> .</i> <br><br>  Nous utilisons le programme d'√©dition iso (par exemple, ultraiso).  Nous trouvons le dossier \ EFI \ BOOT dans iso et rempla√ßons le fichier BOOTIA32.EFI par l'ancien, enregistrez-le, et maintenant tout est d√©j√† charg√©! <br><br><img src="https://habrastorage.org/webt/ma/kv/ba/makvbay7dixrxt7iu60iezesqn4.jpeg"><br><br><h3>  4. Installation d'ESXi </h3><br>  Pas de d√©tails, tout est comme toujours.  L'installation s'est termin√©e avec succ√®s, mais rien ne se charge, c'est normal! <br><br><h3>  5. Finalisation du fichier du chargeur de d√©marrage </h3><br>  <i>L'algorithme d'actions est sp√©cifi√© dans l'article <a href="https://neckercube.com/posts/2016-04-11-bringing-an-old-mac-pro-back-to-life-with-esxi-6-0/">[3] Ramener un ancien Mac Pro √† la vie avec ESXi 6.0</a> , il existe √©galement un lien vers l'archive des <a href="">fichiers de d√©marrage 32 bits</a> .</i> <br><br><h4>  5.1.  Nous retirons le disque dur et le connectons √† un autre ordinateur. </h4>  J'ai utilis√© la version mat√©rielle du MacBook avec l'adaptateur sata-usb, vous pouvez utiliser Linux.  S'il n'y a pas d'ordinateur s√©par√©, vous pouvez utiliser un autre train, le brancher sur MacPro, y installer MacOS et √† partir de celui-ci monter le disque dur ESXi. <br><br>  <b>Vous ne pouvez pas utiliser Windows!</b>  M√™me juste une fois que ce disque est inclus dans le syst√®me Windows, de petites modifications y seront apport√©es sans demande.  Petit et ne d√©range personne, mais dans notre cas, le t√©l√©chargement d'ESXi se terminera par l'erreur ¬´Bank6 not a vmware boot bank no hypervisor found¬ª. <br><br><img src="https://habrastorage.org/webt/tb/ww/ql/tbwwqlf9wmgjooq4mxv6ol9qa04.png"><br><br>  <i>Voici un article avec des d√©tails sur ce qui se passe si vous avez quand m√™me bloqu√© <a href="https://communities.vmware.com/thread/429698">[4] bank6 pas une banque de d√©marrage VMware sans hyperviseur trouv√©</a> .</i>  <i>Mais <a href="https://kb.vmware.com/s/article/2012022">la m√©thode de</a> solution <a href="https://kb.vmware.com/s/article/2012022">est</a> simple et rapide - mettez √† nouveau ESXi!</i> <br><br><h4>  5.2 Monter la partition EFI </h4><br>  Ouvrez le terminal, assurez-vous de passer en mode superutilisateur <br><br><pre><code class="plaintext hljs">Sudo ‚Äìs</code> </pre> <br>  Cr√©er un r√©pertoire pour la future section <br><br><pre> <code class="plaintext hljs">mkdir /Volumes/EFI</code> </pre> <br>  regardez les sections disponibles <br><br><pre> <code class="plaintext hljs">diskutil list</code> </pre> <br>  voici ce dont nous avons besoin, une section EFI appel√©e ESXi <br><br><img src="https://habrastorage.org/webt/6z/-m/uh/6z-muhyejlqbvakoj5m-0f_lmau.png"><br><br>  Montez-le <br><br><pre> <code class="plaintext hljs">mount_msdos /dev/disk2s1 /Volumes/EFI</code> </pre> <br>  Sur le lecteur mont√©, vous devrez remplacer les fichiers par des versions plus anciennes.  Les anciennes versions peuvent √™tre trouv√©es dans <a href="https://neckercube.com/posts/2016-04-11-bringing-an-old-mac-pro-back-to-life-with-esxi-6-0/">[3]</a> , archive de <a href="">fichiers de d√©marrage 32 bits</a> <br><br>  Fichiers √† remplacer: <br><br>  /EFI/BOOT/BOOTIA32.EFI <br>  /EFI/BOOT/BOOTx64.EFI <br>  /EFI/VMware/mboot32.efi <br>  /EFI/VMware/mboot64.efi <br><br><img src="https://habrastorage.org/webt/r7/xu/kd/r7xukdrdgxxifzeuudktui5dt7o.png"><br><br>  Une fois l'op√©ration termin√©e, d√©connectez la partition EFI mont√©e <br><br><pre> <code class="plaintext hljs">umount -f /Volumes/EFI</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Remarque sur la cr√©ation d'une image</b> <div class="spoiler_text"><h4>  Remarque sur la cr√©ation d'une image </h4><br>  Id√©alement, il serait int√©ressant de comprendre o√π se trouvent ces fichiers dans la distribution.  Ensuite, ils peuvent √™tre remplac√©s juste l√†, et lib√©rer leur propre distribution "ESXi 5.5 pour l'ancien MacPro", enti√®rement pr√©par√©e pour une installation sans probl√®me. <br><br>  Je n'ai pas pu les trouver.  Presque tous les fichiers avec des extensions de la forme ".v00" dans la distribution ESXi sont des archives tar de diff√©rents types.  Les archives .Vtar sont enferm√©es dedans, les archives sont aussi dedans ... Avec le programme 7zip, j'ai creus√© ces attachements sans fin pendant longtemps, mais je n'ai rien trouv√© qui ressemble √† la section EFI.  Fondamentalement, il existe des r√©pertoires Linux. <br><br>  Le fichier efiboot.img semblait le plus appropri√©, mais vous pouvez facilement l'ouvrir et voir ce qui ne va pas. <br><br><img src="https://habrastorage.org/webt/vl/44/xk/vl44xkhqttmrhyyhmzba3wlf3sm.png"><br></div></div><br><h4>  5.3.  Nous sortons le train et l'installons dans MacPro </h4><br>  D√©j√† r√©gl√© pour toujours, vissant et assemblant tout. <br><br>  Et maintenant, nous chargeons d√©j√† ESXi! <br><br>  Il peut sembler que ce n'est pas le cas.  Du moment o√π vous l'allumez et de l'√©cran blanc √† l'√©cran noir, ESXi prend un peu plus de temps qu'avant le mac mac Apple habituel. <br><br><h3>  6. FIN. </h3><br>  Ceci termine l'installation, configurez ESXi comme d'habitude pour configurer ESXi. <br><br> <a href=""><img src="https://habrastorage.org/webt/j3/ww/sp/j3wwsppozpfscd7ogqweylw2l3q.jpeg"></a> <br><br>  Il convient de noter que l'installation ult√©rieure de Mac Os sur un tel VMware install√© sur du mat√©riel Apple est l√©gale. <br><br><h3>  Litt√©rature </h3><br>  Liens vers des articles, la plupart en anglais. <br>  [1] Lecteur optique Sata dans Mac Pro 1.1 = remplacement du sidyuk IDE sur SATA, enfin, ou dans le train. <br>  <a href="https://discussions.apple.com/thread/3872488">https://discussions.apple.com/thread/3872488</a> <br>  <a href="http://www.tech.its.iastate.edu/macosx/downloads/MacPro-SATA-INS.pdf">http://www.tech.its.iastate.edu/macosx/downloads/MacPro-SATA-INS.pdf</a> <br>  [2] Compatibilit√© Mac Pro avec l'installation d'ESXi 5.0 = sur le remplacement du chargeur de d√©marrage pour l'installation <br>  <a href="https://communities.vmware.com/thread/327538">https://communities.vmware.com/thread/327538</a> <br>  [3] Redonner vie √† un ancien Mac Pro avec ESXi 6.0 = sur le remplacement des chargeurs de d√©marrage par un ESXi d√©j√† install√©. <br>  <a href="https://neckercube.com/posts/2016-04-11-bringing-an-old-mac-pro-back-to-life-with-esxi-6-0/">https://neckercube.com/posts/2016-04-11-bringing-an-old-mac-pro-back-to-life-with-esxi-6-0/</a> <br>  [4] bank6 pas une banque de d√©marrage VMware aucun hyperviseur trouv√© = que se passera-t-il si vous vous connectez sous Windows <br>  <a href="https://communities.vmware.com/thread/429698">https://communities.vmware.com/thread/429698</a> <br>  [5] L'h√¥te ESXi 5.x ne parvient pas √† red√©marrer apr√®s l'installation avec l'erreur: Pas une banque de d√©marrage VMware.  Aucun hyperviseur trouv√© (2012022) = et des conseils officiels sur la fa√ßon de le r√©parer <br>  <a href="https://kb.vmware.com/s/article/2012022">https://kb.vmware.com/s/article/2012022</a> <br>  [6] Comment monter une partition EFI sur Mac OS <br>  <a href="https://kim.tools/blog/page/kak-primontirovat-efi-razdel-v-mac-os">https://kim.tools/blog/page/kak-primontirovat-efi-razdel-v-mac-os</a> <br>  [7] Guide de compatibilit√© VMware <br>  <a href="https://www.vmware.com/resources/compatibility/search.php">https://www.vmware.com/resources/compatibility/search.php</a> <br>  [8] SSD dans Apple Mac Pro 1.1 = installation de patins 2,5 "dans 3,5" √† la maison <br>  <a href="http://www.efxi.ru/more/upgrade_ssd_mac_pro.html">http://www.efxi.ru/more/upgrade_ssd_mac_pro.html</a> <br>  [9] Offre d'achat d'adaptateurs de tra√Æneau pr√™ts √† l'emploi <br>  <a href="https://everymac.com/systems/apple/mac_pro/faq/mac-pro-how-to-replace-hard-drive-install-ssd.html">https://everymac.com/systems/apple/mac_pro/faq/mac-pro-how-to-replace-hard-drive-install-ssd.html</a> <br>  [10] Sp√©cification du MacPro utilis√© <br>  <a href="https://everymac.com/systems/apple/mac_pro/specs/mac-pro-quad-2.66-specs.html">https://everymac.com/systems/apple/mac_pro/specs/mac-pro-quad-2.66-specs.htm</a> l <br><br><h3>  Liste des fichiers </h3><br>  <a href="">BOOTIA32.EFI</a> bootloader d'installation de [2] <br>  <a href="">Fichiers de</a> d√©marrage <a href="">32 bits</a> , rempla√ßant le chargeur de d√©marrage de [3] </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr476724/">https://habr.com/ru/post/fr476724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr476712/index.html">Service pour des rencontres al√©atoires avec des √©trangers, mais pas de rencontres. Historique de d√©marrage de Coffee al√©atoire</a></li>
<li><a href="../fr476714/index.html">Fonctionnement de l'apprentissage automatique dans Mail.ru Mail</a></li>
<li><a href="../fr476718/index.html">Histoire d'une radio nationale: Mussolini de la radio rurale et Joseph Goebbels des lampes chaudes</a></li>
<li><a href="../fr476720/index.html">Comment identifier un employ√© potentiel √† l'√©tape du CV</a></li>
<li><a href="../fr476722/index.html">Automatisation de la distribution de flux Apache NiFi</a></li>
<li><a href="../fr476726/index.html">Dipl√¥m√© de l'Universit√© Innopolis sur les √©tudes √† l'Universit√© de Grenoble, AI, anglais avec le fran√ßais et fromage avec des punaises de lit</a></li>
<li><a href="../fr476728/index.html">Strat√©gie de contenu pour les entreprises B2B: cas et listes de contr√¥le</a></li>
<li><a href="../fr476734/index.html">Auto-diagnostic des disques durs et r√©cup√©ration de donn√©es</a></li>
<li><a href="../fr476736/index.html">Hunt for Threat Hunters: comment trouver et former des sp√©cialistes comp√©tents?</a></li>
<li><a href="../fr476738/index.html">Slurm Prom: le premier cours sur Prom√©th√©e en russe et son auteur Vladimir Guryanov</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>