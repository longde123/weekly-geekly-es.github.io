<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òùüèª üíÜüèº üîÉ Aide-m√©moire de l'abr√©viation C ++ et plus encore. Partie 1: C ++ ‚úîÔ∏è üåú üåÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Une fois, j'ai √©t√© interview√© pour le poste de d√©veloppeur C ++ dans un bureau d√©cent et m√™me bien connu. J'avais d√©j√† une certaine exp√©rience √† l'√©po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aide-m√©moire de l'abr√©viation C ++ et plus encore. Partie 1: C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470265/">  Une fois, j'ai √©t√© interview√© pour le poste de d√©veloppeur C ++ dans un bureau d√©cent et m√™me bien connu.  J'avais d√©j√† une certaine exp√©rience √† l'√©poque, on m'appelait m√™me un d√©veloppeur leader chez mon employeur √† l'√©poque.  Mais lorsqu'on m'a demand√© si je savais des choses telles que DRY, KISS, YAGNI, NIH, j'ai d√ª r√©pondre ¬´Non¬ª encore et encore. <br><br>  J'ai √©chou√© lamentablement, bien s√ªr.  Mais alors les abr√©viations ci-dessus ont √©t√© googl√© et m√©moris√©es.  En lisant des articles et des livres th√©matiques, en me pr√©parant pour des interviews et en parlant avec des coll√®gues, j'ai appris de nouvelles choses, les ai oubli√©es, googl√© √† nouveau et compris.  Il y a quelques mois, un de mes coll√®gues a mentionn√© avec d√©sinvolture dans le chat de travail IIFE dans le contexte de C ++.  Comme ce grand-p√®re dans une blague, je suis presque tomb√© du po√™le et je suis de nouveau entr√© dans Google. <br><br><img src="https://habrastorage.org/webt/i7/7u/fc/i77ufc8-ui3-rtrvpu-421lmpfq.png"><br><a name="habracut"></a><br>  C'est alors que j'ai d√©cid√© de composer (principalement pour moi) une feuille de triche pour les abr√©viations qui sont utiles pour un d√©veloppeur C ++.  Cela ne signifie pas qu'ils s'appliquent uniquement au C ++, ou qu'ils sont des concepts tout-tout de C ++ (vous pouvez √©crire des volumes sur les idiomes du langage).  Non, ce ne sont que des concepts que j'ai r√©ellement rencontr√©s dans le travail et les entretiens, g√©n√©ralement exprim√©s sous forme d'abr√©viations.  Eh bien, j'ai rat√© des choses absolument triviales comme LIFO, FIFO, CRUD, OOP, GCC et MSVC. <br><br>  N√©anmoins, les abr√©viations sont apparues d√©cemment, j'ai donc divis√© la feuille de triche en 2 parties: fortement caract√©ristique du C ++ et plus courante.  Quand c'√©tait appropri√©, j'ai regroup√© les concepts, sinon je les ai simplement list√©s par ordre alphab√©tique.  En g√©n√©ral, leur ordre n'a pas beaucoup de sens. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Choses de base:</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ODR</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">POD</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">POF</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PIMPL</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RAII</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RTTI</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">STL</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UB</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Subtilit√©s de la langue:</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ADL</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CRTP</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CTAD</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">EBO</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IIFE</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NVI</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RVO et NRVO</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SFINAE</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SBO, SOO, SSO</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b>MISE √Ä JOUR:</b></a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CV</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LTO</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PCH</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PGO</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SEH / VEH</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TMP</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VLA</a> <br><br><h2>  Choses de base <a name="Basics"></a></h2><br><h3>  ODR <a name="ODR"></a></h3><br>  <i>Une r√®gle de d√©finition.</i>  <i>La r√®gle d'une d√©finition.</i>  Simplifi√© signifie ce qui suit: <br><br><ul><li>  Au sein d'une m√™me unit√© de traduction, chaque variable, fonction, classe, etc., ne peut avoir plus d'une d√©finition.  Il y a autant de publicit√©s que possible (sauf pour les transferts sans type de base donn√©, qui ne peuvent tout simplement pas √™tre d√©clar√©s sans d√©finition), mais pas plus d'une d√©finition.  Moins possible si l'entit√© n'est pas utilis√©e. </li><li>  Tout au long du programme, chaque fonction et variable non int√©gr√©e doit avoir exactement une d√©finition.  Chaque fonction en ligne et variable utilis√©e doit avoir une d√©finition dans chaque unit√© de traduction. </li><li>  Certaines entit√©s - par exemple, les classes, les fonctions en ligne et une variable, les mod√®les, les √©num√©rations, etc. - peuvent avoir plusieurs d√©finitions dans un programme (mais pas plus d'une dans une unit√© de traduction).  En fait, cela se produit lorsque le m√™me en-t√™te contenant une classe enti√®rement impl√©ment√©e, par exemple, est connect√© √† plusieurs fichiers .cpp.  Mais ces d√©finitions devraient co√Øncider (je simplifie grandement, mais l'essentiel est le suivant).  Sinon, ce sera <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UB</a> . </li></ul><br>  Le compilateur <i>d√©tectera</i> facilement une violation <i>ODR</i> dans une unit√© de traduction.  Mais il ne pourra rien faire si la r√®gle est viol√©e √† l'√©chelle d'un programme - ne serait-ce que parce que le compilateur traite une unit√© de traduction √† la fois. <br><br>  L'√©diteur de liens peut trouver beaucoup plus de violations, mais, √† proprement parler, il n'est pas oblig√© de le faire (car, selon la norme, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UB est</a> ici) et il peut manquer quelque chose.  En outre, le processus de recherche de violations <i>ODR</i> au stade de la liaison est d'une complexit√© quadratique et l'assemblage de code C ++ n'est pas si rapide. <br><br>  En cons√©quence, la principale responsabilit√© du respect de cette r√®gle (en particulier au niveau du programme) incombe au d√©veloppeur lui-m√™me.  Et oui - seules les entit√©s avec un lien externe peuvent violer le <i>RLL</i> √† l'√©chelle du programme;  ceux de l'int√©rieur (c'est-√†-dire d√©finis dans des espaces de noms anonymes) ne participent pas √† ce carnaval. <br><br>  En savoir plus: une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fois (anglais)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (anglais)</a> <br><br><h3>  Pod <a name="POD"></a></h3><br>  <i>Plain Old Data.</i>  <i>Structure de donn√©es simple.</i>  La d√©finition la plus simple: c'est une telle structure que vous pouvez, comme elle est, sous forme binaire envoyer / recevoir de la biblioth√®que C.  Ou, ce qui est la m√™me chose, copiez correctement avec simple <code>memcpy</code> . <br><br>  De Standard √† Standard, la d√©finition compl√®te a chang√© en d√©tail.  Le dernier <i>POD</i> C ++ 17 d√©finit actuellement comment <br><br><ul><li>  type scalaire </li><li>  ou une classe / structure / union qui: <br>  - il y a une classe triviale <br>  - il y a une classe avec un appareil standard <br>  - ne contient pas de champs non statiques non <i>POD</i> <br></li><li>  ou un tableau de ces types </li></ul><br>  Classe triviale: <br><br><ul><li>  en a au moins un non supprim√©: <br>  - constructeur par d√©faut <br>  - constructeur de copie <br>  - constructeur en mouvement <br>  - op√©rateur d'affectation de copie <br>  - op√©rateur d'affectation de d√©placement <br></li><li>  tous les constructeurs par d√©faut qui copient et d√©placent les constructeurs et les op√©rateurs d'affectation sont triviaux (simplifi√©s - g√©n√©r√©s par le compilateur) ou distants </li><li>  a un destructeur non distant trivial </li><li>  tous les types de base et tous les champs des types de classe ont des destructeurs triviaux </li><li>  pas de m√©thodes virtuelles (y compris destructeur) </li><li>  aucun type de base virtuelle </li></ul><br>  Classe avec un appareil standard (classe de mise en page standard): <br><br><ul><li>  pas de m√©thodes virtuelles </li><li>  aucun type de base virtuelle </li><li>  aucun champ de lien non statique </li><li>  tous les champs non statiques ont le m√™me modificateur d'acc√®s (public / prot√©g√© / priv√©) </li><li>  tous les champs et classes de base non statiques sont √©galement des types avec un p√©riph√©rique standard </li><li>  tous les champs non statiques de la classe elle-m√™me et tous ses anc√™tres sont d√©clar√©s dans une seule classe (c'est-√†-dire dans la classe elle-m√™me ou dans l'un des anc√™tres) </li><li>  Il n'h√©rite pas deux fois du m√™me type, c'est-√†-dire qu'il est impossible de le faire: <br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> :</span></span> A {}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> :</span></span> A{}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">D</span></span></span><span class="hljs-class"> :</span></span> B, C {};</code> </pre> </li><li>  le type du premier champ non statique ou, s'il s'agit d'un tableau, le type de son √©l√©ment ne doit co√Øncider avec aucun des types de base (en raison de l' <i>EBO</i> obligatoire dans ce cas) </li></ul><br>  Cependant, en C ++ 20, il n'y aura plus de concept de type <i>POD</i> , seuls le type trivial et le type avec le p√©riph√©rique standard resteront. <br><br>  En savoir plus: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un (russe)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (anglais)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trois (anglais)</a> <br><br><h3>  POF <a name="POF"></a></h3><br>  <i>Fonction ancienne simple.</i>  <i>Une fonction simple de style C.</i> Mentionn√©e dans la norme avant C ++ 14 inclus uniquement dans le contexte des gestionnaires de signaux.  Les exigences pour cela sont: <br><br><ul><li>  n'utilise que des choses communes √† C et C ++ (c'est-√†-dire pas d'exceptions et <code>try-catch</code> , par exemple) </li><li>  ne provoque pas directement ou indirectement des fonctions non <i>POF</i> , √† l'exception des op√©rations sans bloc atomique ( <code>std::atomic_init</code> , <code>std::atomic_fetch_add</code> , etc.) </li></ul><br>  Seules ces fonctions, qui ont √©galement une liaison C ( <code>extern "C"</code> ), sont autoris√©es par la norme √† √™tre utilis√©es comme gestionnaires de signaux.  La prise en charge d'autres fonctions d√©pend du compilateur. <br><br>  En C ++ 17, le concept de <i>POF</i> dispara√Æt, au lieu de cela appara√Æt une √©valuation s√ªre du signal.  Dans ces calculs sont interdits: <br><br><ul><li>  appels √† toutes les fonctions de la biblioth√®que standard, sauf atomique, sans verrouillage </li><li>  <code>new</code> appels et <code>delete</code> appels </li><li>  en utilisant <code>dynamic_cast</code> </li><li>  appel √† l'entit√© <code>thread_local</code> </li><li>  tout travail avec des exceptions </li><li>  initialisation d'une variable statique locale </li><li>  attendre la fin de l'initialisation de la variable statique </li></ul><br>  Si le gestionnaire de signal fait l'une des actions ci-dessus, la norme promet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UB</a> . <br><br>  Lire la suite: le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">temps (anglais)</a> <br><br><h3>  PIMPL <a name="PIMPL"></a></h3><br>  <i>Pointeur vers la mise en ≈ìuvre.</i>  <i>Pointeur vers l'impl√©mentation.</i>  L'idiome classique en C ++, √©galement connu sous le nom de d-pointer, opaque pointer, compilation firewall.  Cela consiste dans le fait que toutes les m√©thodes priv√©es, les champs et autres d√©tails d'impl√©mentation d'une certaine classe sont allou√©s dans une classe distincte, et seules les m√©thodes publiques (c'est-√†-dire une interface) et un pointeur vers une instance de cette nouvelle classe s√©par√©e restent dans la classe d'origine.  Par exemple: <br><br><div class="spoiler">  <b class="spoiler_title">foo.hpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Foo(); ~Foo(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doThis</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doThat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Impl</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;Impl&gt; pImpl_; };</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">foo.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"foo.hpp"</span></span></span><span class="hljs-meta"> class Foo::Impl { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// implementation }; Foo::Foo() : pImpl_(std::make_unique&lt;Impl&gt;()) {} Foo::~Foo() = default; void Foo::doThis() { pImpl_-&gt;doThis(); } int Foo::doThat() { return pImpl_-&gt;doThat(); }</span></span></span></span></code> </pre> <br></div></div><br>  Pourquoi est-ce n√©cessaire, c'est-√†-dire avantages: <br><br><ul><li>  Encapsulation: les utilisateurs de la classe via la connexion d'en-t√™te ne re√ßoivent que ce dont ils ont besoin - une interface publique.  Si les d√©tails de l'impl√©mentation changent, le code client n'a pas besoin d'√™tre recompil√© (voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ABI</a> ). </li><li>  Temps de compilation: puisque l'en-t√™te public ne sait rien de l'impl√©mentation, il n'inclut pas les nombreux en-t√™tes dont il a besoin.  Par cons√©quent, le nombre d'en-t√™tes connect√©s implicitement dans le code client est r√©duit.  La recherche de noms et la r√©solution des surcharges est √©galement simplifi√©e, car l'en-t√™te public ne contient pas de membres priv√©s (bien qu'ils soient priv√©s, ils participent √† ces processus). </li></ul><br>  Prix, c'est-√†-dire inconv√©nients: <br><br><ul><li>  Plus au moins un d√©r√©f√©rencement de pointeur et plus un appel de fonction lors de l'acc√®s aux m√©thodes publiques. </li><li>  La taille de la classe de m√©moire n√©cessaire est augment√©e de la taille du pointeur. </li><li>  Une partie de cette m√©moire (probablement plus grande) est allou√©e sur le tas, ce qui affecte √©galement n√©gativement les performances. </li><li>  La constance logique peut facilement √™tre viol√©e.  Par exemple, un tel code compile: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Foo::doThis() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { pImpl_-&gt;doThis(); <span class="hljs-comment"><span class="hljs-comment">// cosnt method pImpl_-&gt;doSmthElse(); // non-const method }</span></span></code> </pre> </li></ul><br>  Certaines de ces lacunes peuvent √™tre supprim√©es, mais le prix complique davantage le code et introduit des niveaux d'abstraction suppl√©mentaires (voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FTSE</a> ). <br><br>  En savoir plus: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un (russe)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (russe)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trois (anglais)</a> <br><br><h3>  RAII <a name="RAII"></a></h3><br>  <i>L'acquisition de ressources est l'initialisation.</i>  <i>La capture d'une ressource est l'initialisation.</i>  Le sens de cet idiome est que la r√©tention d'une certaine ressource dure tout au long de la vie de l'objet correspondant.  La capture de la ressource a lieu au moment de la cr√©ation / initialisation de l'objet, la lib√©ration - au moment de la destruction / finalisation du m√™me objet. <br><br>  Curieusement (principalement pour les programmeurs C ++), cet idiome est √©galement utilis√© dans d'autres langages, m√™me ceux avec un garbage collector.  En Java, c'est <code>try--</code> , en Python l'instruction <code>with</code> , en C # la directive <code>using</code> , en Go the <code>defer</code> .  Mais c'est en C ++ avec sa dur√©e de vie des objets absolument pr√©visible que <i>RAII</i> s'int√®gre surtout organiquement. <br><br>  En C ++, une ressource est g√©n√©ralement captur√©e dans le constructeur et lib√©r√©e dans le destructeur.  Par exemple, les pointeurs intelligents contr√¥lent la m√©moire de cette fa√ßon, les flux de fichiers g√®rent les fichiers, les verrous mutex verrouillent les mutex.  La beaut√© est que, quelle que soit la fa√ßon dont le bloc est quitt√© (√©tendue) - est-ce normal √† travers l'un des points de sortie, ou une exception a √©t√© lev√©e - l'objet de contr√¥le des ressources cr√©√© dans ce bloc sera d√©truit et la ressource sera lib√©r√©e.  C'est-√†-dire  En plus d'encapsuler <i>RAII</i> en C ++, il contribue √©galement √† assurer la s√©curit√© au sens des exceptions. <br><br>  Limitations, o√π sans eux.  Les destructeurs en C ++ ne renvoient pas de valeurs et ne devraient cat√©goriquement pas lever d'exceptions.  En cons√©quence, si la lib√©ration de la ressource s'accompagne de l'une ou l'autre, il sera n√©cessaire d'impl√©menter une logique suppl√©mentaire dans le destructeur de l'objet de contr√¥le. <br><br>  Lire la suite: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une fois (russe)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (anglais)</a> <br><br><h3>  RTTI <a name="RTTI"></a></h3><br>  <i>Informations sur le type d'ex√©cution.</i>  <i>Identification du type lors de l'ex√©cution.</i>  Il s'agit d'un m√©canisme permettant d'obtenir des informations sur le type d'un objet ou d'une expression lors de l'ex√©cution.  Il existe dans d'autres langages, mais en C ++ il est utilis√© pour: <br><br><ul><li> <code>dynamic_cast</code> </li> <li>  <code>typeid</code> et <code>type_info</code> </li><li>  attraper l'exception </li></ul><br>  Une limitation importante: <i>RTTI</i> utilise une table de fonctions virtuelles, et ne fonctionne donc que pour les types polymorphes (un destructeur virtuel suffit).  Une explication importante: <code>dynamic_cast</code> et <code>typeid</code> n'utilisent pas toujours <i>RTTI</i> , et fonctionnent donc pour les types non polymorphes.  Par exemple, pour convertir dynamiquement un lien vers un descendant en un lien vers un anc√™tre, <i>RTTI n'est</i> pas n√©cessaire; toutes les informations sont disponibles au moment de la compilation. <br><br>  <i>RTTI n'est</i> pas gratuit, quoique un peu, mais il affecte n√©gativement les performances et la taille de la m√©moire consomm√©e (d'o√π le conseil fr√©quent de ne pas utiliser <code>dynamic_cast</code> raison de sa lenteur).  Par cons√©quent, les compilateurs, en r√®gle g√©n√©rale, vous permettent de d√©sactiver <i>RTTI</i> .  GCC et MSVC promettent que cela n'affectera pas l'exactitude des exceptions de capture. <br><br>  Lire la suite: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une fois (russe)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (anglais)</a> <br><br><h3>  STL <a name="STL"></a></h3><br>  <i>Biblioth√®que de mod√®les standard.</i>  <i>Biblioth√®que de mod√®les standard.</i>  Partie de la biblioth√®que standard C ++ qui fournit des conteneurs g√©n√©riques, des it√©rateurs, des algorithmes et des fonctions d'assistance. <br><br>  Malgr√© son nom bien connu, <i>STL</i> n'a jamais √©t√© ainsi appel√© dans la norme.  √Ä partir des sections de la norme, la <i>STL</i> peut clairement √™tre attribu√©e √† la biblioth√®que Containers, √† la biblioth√®que Iterators, √† la biblioth√®que Algorithm et partiellement √† la biblioth√®que General Utilities. <br><br>  Dans les descriptions de travail, vous pouvez souvent trouver 2 exigences distinctes - la connaissance de C ++ et la familiarit√© avec <i>STL</i> .  Je n'ai jamais compris cela, car <i>STL</i> fait partie int√©grante du langage depuis la premi√®re norme de 1998. <br><br>  Lire la suite: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une fois (russe)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (anglais)</a> <br><br><h3>  UB <a name="UB"></a></h3><br>  <i>Comportement ind√©fini.</i>  <i>Comportement ind√©fini.</i>  Ce comportement est dans les cas d'erreur pour lesquels la norme n'a pas d'exigences.  Beaucoup d'entre eux sont explicitement r√©pertori√©s dans la norme comme conduisant √† l' <i>UB</i> .  Il s'agit, par exemple: <br><br><ul><li>  violation des limites d'un tableau ou d'un conteneur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">STL</a> </li><li>  utilisation d'une variable non initialis√©e </li><li>  d√©r√©f√©rencer un pointeur nul </li><li>  d√©bordement d'entier sign√© </li></ul><br>  Le r√©sultat d' <i>UB</i> d√©pend de tout dans une rang√©e - √† la fois sur la version du compilateur et sur la m√©t√©o sur Mars.  De plus, ce r√©sultat peut √™tre n'importe quoi: une erreur de compilation, une ex√©cution correcte et un crash.  Un comportement ind√©fini est mauvais, il faut s'en d√©barrasser. <br><br>  Un comportement ind√©fini, en revanche, ne doit pas √™tre confondu avec <i>un comportement non sp√©cifi√©</i> .  Un comportement non sp√©cifi√© est le comportement correct du programme correct, mais qui, avec l'autorisation de la norme, d√©pend du compilateur.  Et le compilateur n'est pas tenu de le documenter.  Par exemple, c'est l'ordre dans lequel les arguments d'une fonction sont √©valu√©s ou les d√©tails d'impl√©mentation de <code>std::map</code> . <br><br>  Eh bien, ici, vous pouvez rappeler le comportement d√©fini par l'impl√©mentation.  De non sp√©cifi√© diff√®re dans la disponibilit√© de la documentation.  Exemple: le compilateur est libre de faire le type <code>std::size_t</code> n'importe quelle taille, mais doit indiquer lequel. <br><br>  En savoir plus: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un (russe)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (russe)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trois (anglais)</a> <br><br><h2>  Les subtilit√©s de la langue <a name="Cobwebs"></a></h2><br><h3>  ADL <a name="ADL"></a></h3><br>  <i>Recherche d√©pendante de l'argument.</i>  <i>Recherche d√©pendante de l'argument.</i>  Il est la recherche de Koenig - en l'honneur d'Andrew Koenig.  Il s'agit d'un ensemble de r√®gles pour r√©soudre les noms de fonction non qualifi√©s (c'est-√†-dire les noms sans l'op√©rateur <code>::</code> :), en plus de la r√©solution de nom habituelle.  Autrement dit: le nom d'une fonction est recherch√© dans les espaces de noms li√©s √† ses arguments (c'est l'espace contenant le type de l'argument, le type lui-m√™me, s'il s'agit d'une classe, tous ses anc√™tres, etc.). <br><br><div class="spoiler">  <b class="spoiler_title">Exemple le plus simple</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; namespace N { struct S {}; void f(S) { std::cout &lt;&lt; "f(S)" &lt;&lt; std::endl; }; } int main() { N::S s; f(s); }</span></span></span></span></code> </pre> <br>  La fonction <code>f</code> trouve dans l'espace de noms <code>N</code> uniquement parce que son argument appartient √† cet espace. <br></div></div><br>  M√™me le trivial <code>std::cout &lt;&lt; "Hello World!\n"</code> utilise <i>ADL</i> , <code>std::basic_stream::operator&lt;&lt;</code> pas surcharg√© pour <code>const char*</code> .  Mais le premier argument de cette instruction est <code>std::basic_stream</code> , et le compilateur recherche et trouve une surcharge appropri√©e dans l' <code>std</code> . <br><br>  Quelques d√©tails: <i>ADL n'est</i> pas applicable si une recherche r√©guli√®re a trouv√© une d√©claration d'un membre de classe, ou une d√©claration de fonction dans le bloc courant sans <code>using</code> , ou une d√©claration de non fonction ou mod√®le de fonction.  Ou si le nom de la fonction est indiqu√© entre parenth√®ses (l'exemple ci-dessus ne compile pas avec <code>(f)(s)</code> ; vous devrez √©crire <code>(N::f)(s);</code> ). <br><br>  Parfois, <i>ADL</i> vous oblige √† utiliser des noms de fonction pleinement qualifi√©s l√† o√π cela semble inutile. <br><br><div class="spoiler">  <b class="spoiler_title">Par exemple, ce code ne compile pas</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> N1 { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">S</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(S)</span></span></span><span class="hljs-function"> </span></span>{}; } <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> N2 { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(N1::S)</span></span></span><span class="hljs-function"> </span></span>{}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(N1::S s)</span></span></span><span class="hljs-function"> </span></span>{ foo(s); } }</code> </pre> <br></div></div><br>  En savoir plus: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un (anglais)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (anglais)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trois (anglais)</a> <br><br><h3>  CRTP <a name="CRTP"></a></h3><br>  <i>Mod√®le de mod√®le curieusement r√©current.</i>  <i>Mod√®le r√©cursif √©trange.</i>  L'essence du mod√®le est la suivante: <br><br><ul><li>  une classe h√©rite de la classe mod√®le </li><li>  la classe descendante est utilis√©e comme param√®tre mod√®le de sa classe de base </li></ul><br>  Il est plus facile de donner un exemple: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived</span></span></span><span class="hljs-class"> :</span></span> Base&lt;Derived&gt; {};</code> </pre> <br>  <i>Le CRTP</i> est un excellent exemple de polymorphisme statique.  La classe de base fournit une interface, les classes d√©riv√©es fournissent une impl√©mentation.  Mais contrairement au polymorphisme ordinaire, il n'y a pas de surcharge pour cr√©er et utiliser une table de fonctions virtuelles. <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;T*&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)-&gt;actionImpl(); } }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived</span></span></span><span class="hljs-class"> :</span></span> Base&lt;Derived&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionImpl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ ... } }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arg</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">staticPolymorphicHandler</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arg</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arg</span></span></span><span class="hljs-class">) {</span></span> arg.action(); }</code> </pre> <br>  Lorsqu'il est utilis√© correctement, <code>T</code> toujours un descendant de <code>Base</code> , donc <code>static_cast</code> suffit pour <code>static_cast</code> .  Oui, dans ce cas, la classe de base conna√Æt l'interface descendante. <br></div></div><br>  Un autre domaine d'utilisation <i>courant</i> pour <i>CRTP</i> est l'extension (ou le r√©tr√©cissement) de la fonctionnalit√© des classes h√©rit√©es (quelque chose appel√© mixin dans certaines langues).  Peut-√™tre les exemples les plus c√©l√®bres: <br><br><ul><li> <code>struct Derived : singleton&lt;Derived&gt; { ‚Ä¶ }</code> </li> <li> <code>struct Derived : private boost::noncopyable&lt;Derived&gt; { ‚Ä¶ }</code> </li> <li> <code>struct Derived : std::enable_shared_from_this&lt;Derived&gt; { ‚Ä¶ }</code> </li> <li>  <code>struct Derived : counter&lt;Derived&gt; { ‚Ä¶ }</code> - compte le nombre d'objets cr√©√©s et / ou existants </li></ul><br>  Inconv√©nients, ou plut√¥t, moments n√©cessitant une attention: <br><br><ul><li>  Il n'y a pas de classe de base commune, vous ne pouvez pas cr√©er une collection de diff√©rents descendants et y acc√©der via un pointeur sur le type de base.  Mais si vous le souhaitez, vous pouvez h√©riter Base du type polymorphe habituel. </li><li>  Il existe une opportunit√© suppl√©mentaire de tirer votre pied par n√©gligence: <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived1</span></span></span><span class="hljs-class"> :</span></span> Base&lt;Derived1&gt; {}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived2</span></span></span><span class="hljs-class"> :</span></span> Base&lt;Derived1&gt; {};</code> </pre> <br>  Mais vous pouvez ajouter une protection: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: Base() = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">friend</span></span> T;</code> </pre> </div></div></li><li>  Parce que  Puisque toutes les m√©thodes ne sont pas virtuelles, les m√©thodes du descendant masquent les m√©thodes de la classe de base avec les m√™mes noms.  Par cons√©quent, il est pr√©f√©rable de les appeler diff√©remment. </li><li>  En g√©n√©ral, les descendants ont des m√©thodes publiques qui ne doivent √™tre utilis√©es nulle part sauf la classe de base.  Ce n'est pas bon, mais cela est corrig√© par un niveau d'abstraction suppl√©mentaire (voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FTSE</a> ). </li></ul><br><br>  Lire la suite: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une fois (russe)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (anglais)</a> <br><br><h3>  CTAD <a name="CTAD"></a></h3><br>  <i>D√©duction d'argument de mod√®le de classe.</i>  <i>D√©duire automatiquement le type du param√®tre de mod√®le de classe.</i>  Il s'agit d'une nouvelle fonctionnalit√© de C ++ 17.  Auparavant, seuls les types de variables ( <code>auto</code> ) et les param√®tres de mod√®le de fonction √©taient automatiquement affich√©s, c'est pourquoi des fonctions auxiliaires comme <code>std::make_pair</code> , <code>std::make_tuple</code> , etc. <code>std::make_tuple</code> . Maintenant, pour la plupart, elles ne sont pas n√©cessaires, car le compilateur capable d'afficher automatiquement les param√®tres des mod√®les de classe: <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::pair p{<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2.0</span></span>}; <span class="hljs-comment"><span class="hljs-comment">// -&gt; std::pair&lt;int, double&gt; auto lck = std::lock_guard{mtx}; // -&gt; std::lock_guard&lt;std::mutex&gt;</span></span></code> </pre> <br>  <i>La CTAD</i> est une nouvelle opportunit√©, elle <i>doit</i> encore √©voluer et se d√©velopper (C ++ 20 promet d√©j√† des am√©liorations).  En attendant, les restrictions sont les suivantes: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">L'inf√©rence partielle des types de param√®tres n'est pas prise en charge</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::pair&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt; p{<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>}; <span class="hljs-comment"><span class="hljs-comment">//  std::tuple&lt;&gt; t{1, 2, 3}; // </span></span></code> </pre></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Alias ‚Äã‚Äãde mod√®le non pris en charge</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">U</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyPair</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:pair&lt;T, U&gt;; MyPair p{<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>}; <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre> </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Les constructeurs disponibles uniquement dans les sp√©cialisations de mod√®les ne sont pas pris en charge.</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrapper</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrapper</span></span></span><span class="hljs-class">&lt;int&gt; {</span></span> Wrapper(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) {}; }; Wrapper w{<span class="hljs-number"><span class="hljs-number">5</span></span>}; <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre> </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Les mod√®les imbriqu√©s ne sont pas pris en charge</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">U</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bar</span></span></span><span class="hljs-class"> {</span></span> Bar(T, U) {}; }; }; Foo::Bar x{ <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2.0</span></span> }; <span class="hljs-comment"><span class="hljs-comment">//  Foo&lt;int&gt;::Bar x{1, 2.0}; // OK</span></span></code> </pre> </div></div></li><li><div class="spoiler">  <b class="spoiler_title">√âvidemment, CTAD ne fonctionnera pas si le type du param√®tre de mod√®le n'est pas li√© aux arguments du constructeur.</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class"> {</span></span> Collection(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> size) {}; }; Collection c{<span class="hljs-number"><span class="hljs-number">5</span></span>}; <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre> </div></div></li></ul><br>  Dans certains cas, des r√®gles d'inf√©rence explicites qui devraient √™tre d√©clar√©es dans le m√™me bloc que le mod√®le de classe seront utiles. <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">It</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">It</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">from</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">It</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">to</span></span></span><span class="hljs-class">) {</span></span>}; }; Collection c{v.begin(), v.end()}; <span class="hljs-comment"><span class="hljs-comment">//  template &lt;class It&gt; Collection(It, It)-&gt;Collection&lt;typename std::iterator_traits&lt;It&gt;::value_type&gt;; Collection c{v.begin(), v.end()}; //  OK</span></span></code> </pre> </div></div><br><br>  Lire la suite: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une fois (russe)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (anglais)</a> <br><br><h3>  EBO <a name="EBO"></a></h3><br>  <i>Optimisation de la base vide.</i>  <i>Optimisation d'une classe de base vide.</i>  Aussi appel√© EBCO (Empty Base Class Optimization). <br><br>  Comme vous le savez, en C ++, la taille d'un objet d'une classe ne peut pas √™tre nulle.  Sinon, toute l'arithm√©tique des pointeurs se brisera, car √† une adresse, il sera possible de marquer autant d'objets diff√©rents que vous le souhaitez.  Par cons√©quent, m√™me les objets de classes vides (c'est-√†-dire les classes sans un seul champ non statique) ont une taille non nulle, qui d√©pend du compilateur et du syst√®me d'exploitation et est g√©n√©ralement √©gale √† 1. <br><br>  Ainsi, la m√©moire est gaspill√©e en vain sur tous les objets des classes vides.  Mais pas les objets de leurs descendants, car dans ce cas le Standard fait explicitement une exception.  Le compilateur est autoris√© √† ne pas allouer de m√©moire pour une classe de base vide et √† enregistrer ainsi non seulement 1 octet de la classe vide, mais les 4 (selon la plate-forme), car il y a √©galement alignement. <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> :</span></span> Empty { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(Empty) &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 1 std::cout &lt;&lt; sizeof(Foo) &lt;&lt; std::endl; // 4 std::cout &lt;&lt; sizeof(int) &lt;&lt; std::endl; // 4</span></span></code> </pre> </div></div><br>  Mais <i>comme</i> diff√©rents objets du m√™me type ne peuvent pas √™tre plac√©s √† la m√™me adresse, l' <i>EBO</i> ne fonctionnera pas si: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">Une classe vide se trouve deux fois parmi les anc√™tres</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty2</span></span></span><span class="hljs-class"> :</span></span> Empty {}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> :</span></span> Empty, Empty2 { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(Empty) &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 1 std::cout &lt;&lt; sizeof(Empty2) &lt;&lt; std::endl; // 1 std::cout &lt;&lt; sizeof(Foo) &lt;&lt; std::endl; // 8</span></span></code> </pre> </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Le premier champ non statique est un objet de la m√™me classe vide ou son descendant</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> :</span></span> Empty { Empty e; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(Empty) &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 1 std::cout &lt;&lt; sizeof(Foo) &lt;&lt; std::endl; // 8</span></span></code> </pre> </div></div></li></ul><br>  Dans les cas o√π les objets des classes vides sont des champs non statiques, aucune optimisation n'est fournie (pour l'instant, l'attribut <code>[[no_unique_address]]</code> appara√Ætra en C ++ 20).  Mais d√©penser 4 octets (ou combien le compilateur a besoin) pour chacun de ces champs est une honte, vous pouvez donc ¬´r√©duire¬ª les objets de classes vides avec le premier champ non statique non vide par vous-m√™me. <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty1</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty2</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Member</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> ... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmptyOptimization</span></span></span><span class="hljs-class"> :</span></span> Empty ... { Member member; }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> {</span></span> EmptyOptimization&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, Empty1, Empty2&gt; data; };</code> </pre> <br>  √âtrange, mais dans ce cas, la taille de Foo est diff√©rente pour diff√©rents compilateurs, pour MSVC 2019, elle est de 8, pour GCC 8.3.0, elle est de 4. Mais dans tous les cas, l'augmentation du nombre de classes vides n'affecte pas la taille de <code>Foo</code> . </div></div><br>  En savoir plus: une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fois (anglais)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (anglais)</a> <br><br><h3>  IIFE <a name="IIFE"></a></h3><br>  <i>Expression de fonction imm√©diatement invoqu√©e.</i>  <i>Expression fonctionnelle appel√©e imm√©diatement.</i>  En g√©n√©ral, c'est un idiome en JavaScript, d'o√π Jason Turner l'a emprunt√© avec le nom.  En fait, il s'agit simplement de cr√©er et d'appeler imm√©diatement un lambda: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> myVar = [&amp;] { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition1()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> computeSomeComplexStuff(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> condition2() ? computeSonethingElse() : DEFAULT_VALUE; } ();</code> </pre> <br>  Pourquoi est-ce n√©cessaire?  Eh bien, par exemple, comme dans le code ci-dessus afin d'initialiser une constante par le r√©sultat d'un calcul non trivial et de ne pas obstruer la port√©e avec des variables et des fonctions inutiles. <br><br>  En savoir plus: une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fois (anglais)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux (anglais)</a> <br><br><h3>  NVI <a name="NVI"></a></h3><br>  <i>Interface non virtuelle.</i>  <i>Interface non virtuelle.</i>  Selon cet idiome, une interface de classe ouverte ne devrait pas contenir de fonctions virtuelles.  Toutes les fonctions virtuelles sont rendues priv√©es (prot√©g√©es au maximum) et appel√©es √† l'int√©rieur non ouvertes virtuelles. <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> ~Base() = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// check precondition fooImpl(); // check postconditions } private: virtual void fooImpl() = 0; }; class Derived : public Base { private: void fooImpl() override { } };</span></span></code> </pre> </div></div><br>  Pourquoi est-ce n√©cessaire: <br><br><ul><li>  Chaque fonction virtuelle ouverte fait 2 choses: elle d√©finit l'interface publique de la classe et participe au comportement prioritaire dans les classes descendantes.  L'utilisation de <i>NVI</i> √©limine de telles fonctions avec une double charge: l'interface est d√©finie par certaines fonctions, le changement de comportement par d'autres.  Vous pouvez les modifier tous les deux ind√©pendamment l'un de l'autre. </li><li>            (-  -,    . .),         (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DRY</a> ) ‚Äî    ‚Äî      .  C'est-√†-dire      . </li></ul><br>    <i>NVI</i> ‚Äì   ,    (-    )        (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FBC</a> ). <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h3> RVO  NRVO <a name="RVO"></a></h3><br> <i>(Named) Return Value Optimization.  ()  .</i>      copy elision ‚Äì       ,          .   ,       (    copy elision ‚Äì     ). <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Foo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Foo(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> f = bar(); }</code> </pre> </div></div><br>  <i>RVO</i>       <code>Foo</code>   <code>bar</code> ,                <code>main</code> (   <code>bar</code> ),        <code>f</code>         . <i>RVO</i>       ,   <code>bar</code>   <code>f</code> . <br><br>    :  <code>main</code>         <code>f</code> .  <code>bar</code> (    ),     ,         . <br><br> <i>NRVO</i>   <i>RVO</i> ,     ,        <code>return</code> ,        . <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Foo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Foo result; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> </div></div><br>     , <i>NRVO</i>   ,        . ,          ,        ,       ‚Äî <i>NRVO</i>  . <br><br><div class="spoiler"> <b class="spoiler_title"> NRVO  </b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Foo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> condition)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition) { Foo f1; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> f1; } Foo f2; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> f2; }</code> </pre> </div></div><br>      <i>RVO</i> .    <i>NRVO</i>           . <br><br> <i>RVO</i>  <i>NRVO</i> ‚Äì    .         ,      .     C++17:  <i>RVO</i>   copy elision,  ,        . <br><br> : <i>(N)RVO</i>    ‚Äî  .  C++14      , C++17  <i>RVO</i>   ,   C++20 ‚Äì . <br><br>       . -, <i>(N)RVO</i> - , ..       . -,   <code>result</code>      <code>std::move(result)</code> ,  <i>NRVO</i>   .  : <i>RVO</i>   prvalue, <i>NRVO</i> ‚Äì  lvalue, a <code>std::move(result)</code> ‚Äì  xvalue. <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h3> SFINAE <a name="SFINAE"></a></h3><br> <i>Substitution Failure Is Not An Error.   ‚Äî  .</i> <i>SFINAE</i> ‚Äî      ‚Äî    ‚Äî  ++.   ,       ,    ,    . ,         : <br><br><ol><li>     ‚Äî             (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ADL</a> ). </li><li>    ‚Äî    ,     ,       ,  . . </li><li>          (viable functions),          .           ‚Äî     . </li></ol><br>   <i>SFINAE</i>    :      ,        ,      ,    (  ).    . <br><br> <i>SFINAE</i>     , ,           .       -  , . . ,        . <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;type_traits&gt; #include &lt;utility&gt; template &lt;class, class = void&gt; struct HasToString : std::false_type {}; //    ,      //   -    ,  //     ‚Äî  ,    ,   template &lt;class T&gt; struct HasToString&lt;T, std::void_t&lt;decltype(&amp;T::toString)&gt;&gt; : std::is_same&lt;std::string, decltype(std::declval&lt;T&gt;().toString())&gt; {}; struct Foo { std::string toString() { return {}; } }; int main() { std::cout &lt;&lt; HasToString&lt;Foo&gt;::value &lt;&lt; std::endl; // 1 std::cout &lt;&lt; HasToString&lt;int&gt;::value &lt;&lt; std::endl; // 0 }</span></span></span></span></code> </pre> </div></div><br>   C++17 <code>static if</code>      <i>SFINAE</i> ,    C++20        . . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h3> SBO, SOO, SSO <a name="SBO"></a></h3><br> <i>Small Buffer/Object/String Optimization.   //.</i>   <i>SSO</i>   Small Size Optimization,   ,   ,  <i>SSO</i> ‚Äì   . <i>SBO</i>  <i>SOO</i> ‚Äì  ,  <i>SSO</i> ‚Äì    . <br><br>   ,   ,    -    .    ,     .      ,           (  ),        . <br><br> , std::string     : <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">string</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* begin_; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> size_; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> capacity_; };</code> </pre> </div></div><br>       24  (    ).  C'est-√†-dire    24       .     24, , . .  -       .         8  (   ‚Äî 24 ): <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">string</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> Buffer { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* begin_; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> local_[<span class="hljs-number"><span class="hljs-number">8</span></span>]; }; Buffer buffer_; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> _size; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> _capacity; };</code> </pre> </div></div><br>     ,     ‚Äî    .             . <br><br>    <code>std::string</code>  <i>SSO</i>      <code>std::function</code> .   <code>std::vector</code>     , . .  ,  <code>std::swap</code>          ,       . <i>SBO</i>      ( <code>std::string</code>  ).  <code>boost::container::small_vector</code> ,   ,  <i>SBO</i> . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h2> UDPATE <a name="Update"></a></h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">PyerK</a>     . <br><h3> CV <a name="CV"></a></h3><br> <i>  const  volatile.</i> <code>const</code> ,  /  ,          ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UB</a>   . <code>volatile</code> ,  /       (, -    -  ),        .   <code>volatile</code>    <code>volatile</code>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UB</a> . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h3> LTO <a name="LTO"></a></h3><br> <i>Link Time Optimization.  .</i>    ,      , . .  .    ,     :    ,     .   , . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h3> PCH <a name="PCH"></a></h3><br> <i>Precompiled Headers.   .</i>  ,              .         ,   . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h3> PGO <a name="PGO"></a></h3><br> <i>Profile-Guided Optimization.    .</i>    ,      ,         . ,          . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h3> SEH/VEH <a name="SEH"></a></h3><br> <i>Structured/Vectored Exception Handling.</i>   MSVC     .     <code>try-catch</code> <i>SEH</i>     : <code>__try</code> , <code>__except</code> , <code>__finally</code> ,       ,   ,     ,   -  ,      . . <i>VEH</i>     ,      . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h3> TMP <a name="TMP"></a></h3><br> <i>Template Meta-Programming.  .</i>  ‚Äî          .   C++   .         . ,  <i>TMP</i>  C++    , . .      . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h3> VLA <a name="VLA"></a></h3><br> <i>Variable-Length Arrays.   .</i>  C'est-√†-dire ,      : <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-built_in"><span class="hljs-built_in">array</span></span>[n]; }</code> </pre> <br>  C++   .   , . .     C    C99.     C++   . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> (.)</a> <br><br><h2>  PS </h2><br>   -   -  ‚Äî   .  , ,     ,    C++.  ,    ,   . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470265/">https://habr.com/ru/post/fr470265/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470241/index.html">Historique de d√©marrage: comment d√©velopper une id√©e √©tape par √©tape, p√©n√©trer un march√© inexistant et atteindre une expansion internationale</a></li>
<li><a href="../fr470247/index.html">RESHI.RU - un robot r√©sout et explique les probl√®mes de texte scolaire en math√©matiques</a></li>
<li><a href="../fr470251/index.html">Comment j'ai fait une application de bureau sur Flutter (+ bonus)</a></li>
<li><a href="../fr470255/index.html">Optimisation du portefeuille obligataire avec ALGLIB</a></li>
<li><a href="../fr470259/index.html">Aimybox dans la recherche: le cadre pour cr√©er des assistants vocaux a besoin d'un assistant iOS</a></li>
<li><a href="../fr470267/index.html">Surveillance de temp√©rature certifi√©e</a></li>
<li><a href="../fr470269/index.html">ReactOS 0.4.12: Âçé‰∏∫ Ôºå ‰Ω† ËÆ§‰∏∫ Ëøô‰∏™ ÊÄé‰πà Ê†∑Ôºü</a></li>
<li><a href="../fr470271/index.html">F # 6: Tuples</a></li>
<li><a href="../fr470273/index.html">F # 7: Records</a></li>
<li><a href="../fr470275/index.html">F # 8: Syndicats discrimin√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>