<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÉüèª üôÖüèª üßíüèø Como a IA funciona em Hitman (2016) üíÖüèº üßöüèº üì°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lan√ßado pela IO Interactive em 2016, Hitman retornou a franquia: criando cen√°rios ricos e interessantes nos quais o Agent 47 precisa eliminar seus obj...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como a IA funciona em Hitman (2016)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467301/">  Lan√ßado pela IO Interactive em 2016, <em>Hitman</em> retornou a franquia: criando cen√°rios ricos e interessantes nos quais o Agent 47 precisa eliminar seus objetivos, geralmente de maneira improvisada e impratic√°vel.  Para resolver esse problema, muitos sistemas de IA s√£o usados ‚Äã‚Äãdentro do jogo, e vamos estud√°-los com precis√£o.  Vamos nos aprofundar na estrutura dos sistemas de IA respons√°veis ‚Äã‚Äãpor v√°rias fun√ß√µes na √∫ltima gera√ß√£o de jogos <em>Hitman</em> : a cria√ß√£o de NPCs responsivos √† situa√ß√£o, guarda-costas, sistemas de multid√µes controlados por intelig√™ncia artificial e muito mais. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/576/cfd/b1f/576cfdb1f04d610632ddb9b9b14c1792.png"></div><br><h1>  Sobre Hitman </h1><br>  Os jogadores de <em>Hitman t√™m</em> a tarefa de matar personalidades cru√©is e sem princ√≠pios, cuja morte ningu√©m se arrepender√° particularmente.  Mas em cada caso, o significado est√° mais nas hist√≥rias √∫nicas que o jogador pode criar por conta pr√≥pria, destruindo objetivos de uma maneira complexa ou divertida.  <em>Hitman est√°</em> repleto de sistemas que permitem ao jogador experimentar, improvisar e responder a mudan√ßas no cen√°rio geral que se desenrola.  Disfar√ßar-se de barman e envenenar a v√≠tima com uma bebida, quebrar o pesco√ßo dela fingindo ser massagista, assustar o alvo retratando um m√©dico da peste ou at√© ganhar a confian√ßa da equipe de grava√ß√£o tocando bateria.  O jogo fornece aos usu√°rios uma ampla variedade de m√©todos de penetra√ß√£o interessantes e geralmente pr√©-negociados ou oculta informa√ß√µes deles em cen√°rios mais complexos e demorados. <a name="habracut"></a>  Se voc√™ est√° andando na passarela de uma semana de moda em Paris ou agindo no meio de um golpe pol√≠tico em Marrakech, seus objetivos est√£o sempre em cenas densamente povoadas, animadas e complexas, onde existem guardas pessoais e ag√™ncias locais de aplica√ß√£o da lei, sem mencionar civis interferindo sob os p√©s.  Mas justamente por isso, o jogo se torna realmente interessante: os jogadores devem se fundir com o ambiente, se disfar√ßar e manipular o mundo ao seu redor, para se aproximar um pouco do objetivo, infligir retribui√ß√£o c√°rmica a eles e escapar at√© o mundo ao seu redor suspeitar da presen√ßa do Agente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cda/a29/471/cdaa29471f072eacbd04307d6de0b0aa.png"></div><br>  <em>Hitman</em> traz o maior prazer quando a prepara√ß√£o e o planejamento est√£o corretos e perfeitamente implementados, e para isso voc√™ precisa de muitos sistemas de IA.  Neste artigo, examinaremos quatro elementos principais, explicaremos como eles funcionam e ajudar√£o a criar a jogabilidade <em>Hitman</em> : <br><br><ul><li>  Um sistema de √°rvores comportamentais orientado pela situa√ß√£o, no qual mais de 300 personagens de n√≠vel podem tomar decis√µes sobre suas a√ß√µes futuras com base no que est√° acontecendo ao seu redor e responder a eventos, que geralmente est√£o nas m√£os do jogador. </li><li>  Sistemas responsivos e pr√°ticos de guardas e guarda-costas que complicam o trabalho do Agente e s√£o distribu√≠dos para proteger o jogador que complica o alcance da meta. </li><li>  Um sistema poderoso para controlar e simular o comportamento das multid√µes, permitindo que voc√™ use no n√≠vel da multid√£o at√© 1000 NPCs que respondem √†s a√ß√µes dos jogadores. </li><li>  E, finalmente, uma estrutura de anima√ß√£o cuidadosamente ajustada que fornece a todos esses personagens a apar√™ncia e o comportamento mais realistas. </li></ul><br>  Vou explicar como todos esses sistemas funcionam, bem como falar sobre as configura√ß√µes mais refinadas usadas no jogo de 2016 e na sequ√™ncia de 2018.  No entanto, antes de iniciar uma conversa sobre a IA de qualquer jogo, voc√™ precisa olhar a fonte a partir da qual a cadeia de ferramentas da AI come√ßa e estudar os princ√≠pios b√°sicos de seu design.  Portanto, come√ßaremos com a <em>Hitman Absolution</em> . <br><br>  Lan√ßado em 2012, o <em>Hitman Absolution</em> implementou uma interpreta√ß√£o mais suave e linear da f√≥rmula da franquia.  Apesar de sua popularidade relativamente baixa em compara√ß√£o com os jogos mais recentes, tornou-se a base das tecnologias e ferramentas b√°sicas usadas nos jogos em 2016 e 2018.  Uma das raz√µes mais importantes para isso foi que Absolution foi o primeiro jogo de franquia depois de <em>Hitman: Blood Money em</em> 2006 (no meio, a IO Interactive trabalhou nas s√©ries <em>Kane &amp; Lynch</em> e <em>Mini Ninjas</em> . Portanto, novas ferramentas foram criadas para <em>Absolution</em> e sistemas que refletem melhor as ambi√ß√µes da equipe para o futuro A arquitetura b√°sica da IA ‚Äã‚Äãde personagens n√£o-jogadores da <em>Hitman</em> , bem como sistemas de multid√µes e anima√ß√µes, foram criados para o <em>Absolution</em> e aprimorados para os lan√ßamentos de 2016 e 2018. <br><br><h1>  Arquitetura b√°sica de IA </h1><br>  O <em>Hitman</em> AI foi projetado para tirar proveito dos diferentes estilos de passes dispon√≠veis no <em>Absolution</em> e nos jogos subseq√ºentes.  Isso significa que o sistema permite que voc√™ use furtividade, disfarce e se junte ao meio ambiente (os desenvolvedores chamam de "furtividade social") ou escolha uma abordagem mais agressiva e use armas. <br><br>  Al√©m disso, deve permitir que o NPC viva uma vida normal, √†s vezes at√© tenha procedimentos comportamentais bem estabelecidos: eles servem bebidas, aplicam maquiagem, guardam entradas, preparam alimentos, ou seja, fazem o que √© apropriado para o ambiente da cena.  Esses procedimentos devem ser previs√≠veis e confi√°veis, porque em jogos furtivos, os jogadores devem confiar nessa previsibilidade.  Ao mesmo tempo, a IA deve poder interromp√™-los quando descobrir um dos muitos itens que o jogador pode manipular no mundo.  Por exemplo, quando um jogador desliga o motor, bloqueia o dreno na pia, quebra o tanque de combust√≠vel ou liga o v√≠deo.  Dependendo do tipo de intera√ß√£o, ele atrair√° imediatamente os personagens, pois interfere em suas a√ß√µes ou muda a sequ√™ncia de suas a√ß√µes posteriormente, para que o jogador possa us√°-lo.  Isso √© √∫til para algumas a√ß√µes espec√≠ficas que permitem atrair alvos para o lugar certo.  O jogador n√£o vai querer esperar pelo resultado de 20 minutos, mas a rea√ß√£o instant√¢nea dos personagens pareceria artificial demais. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b13/2ee/5e5/b132ee5e54b675576344a207d6eeffec.png"></div><br>  A IA Fundamental do <em>Hitman</em> usa √°rvores de comportamento - um dos formatos mais comuns de gerenciamento de comportamento da IA ‚Äã‚Äãem jogos modernos.  Nas √°rvores comportamentais, √© constru√≠da uma estrutura de cima para baixo que determina as rea√ß√µes dos personagens a v√°rias condi√ß√µes.  Os comportamentos s√£o selecionados de acordo com as condi√ß√µes espec√≠ficas do mundo circundante e levam a uma a√ß√£o ou cadeia de a√ß√µes como rea√ß√£o √†s a√ß√µes do jogador e de outros sistemas de jogo. <br><br>  Mas antes que a √°rvore do comportamento possa tomar uma decis√£o, cada personagem deve descobrir o que est√° acontecendo no mundo ao seu redor.  Para isso, todo personagem de IA ativo no mundo tem uma base de conhecimento.  A base de conhecimento √© composta por dois conjuntos de dados: conhecimento geral, ou seja, informa√ß√µes conhecidas publicamente sobre um objeto ou personagem, bem como informa√ß√µes que refletem sua condi√ß√£o.  Mas tamb√©m existe o conhecimento privado de que o personagem ret√©m as √∫ltimas posi√ß√µes conhecidas de objetos ou personagens.  Ele tamb√©m mant√©m um hist√≥rico de conhecimentos sobre assuntos espec√≠ficos.  Consequentemente, o personagem come√ßa a perceber que as coisas pr√≥ximas desaparecem ou se movem;  da mesma forma, ele n√£o tentar√° encontrar personagens que desapareceram ou morreram e tamb√©m interagir com eles. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/28e/291/57f/28e29157f78212fae2e2bf0288f216f4.png"></div><br>  A base de conhecimento √© acumulada coletando todas as informa√ß√µes que est√£o acontecendo atualmente em um determinado ponto do mundo do jogo, com sua subsequente filtragem usando sensores e servi√ßos.  Os sensores permitem que os personagens atualizem seus dados pessoais e respondam √†s altera√ß√µes que percebem, al√©m de ouvir o que est√° acontecendo nas proximidades.  Servi√ßos atualiza uma base de conhecimento comum.  Os tr√™s servi√ßos mais comuns s√£o Disfarce (disfarce), Deadbody (cad√°ver) e Hitman (assassino).  O servi√ßo Disfarce √© usado quando o Agente 47 muda para um traje;  ajuda o personagem a saber se a roupa do agente deve suspeitar dele.  O servi√ßo Deadbody ajuda os personagens pr√≥ximos a perceberem que um cad√°ver foi encontrado recentemente perto deles.  Finalmente, o servi√ßo Hitman permite compartilhar conhecimentos gerais sobre o Agente 47, por exemplo, informa√ß√µes sobre se um jogador foi comprometido e onde ele foi visto pela √∫ltima vez.  Uma caracter√≠stica divertida dos sensores √© que eles fornecem um curioso equil√≠brio de conhecimento contextual e, ao mesmo tempo, deixam lacunas que o jogador pode explorar.  Os sensores fornecem informa√ß√µes diretas sobre o mundo, mas suas a√ß√µes podem ser interrompidas ao bloquear o escopo ou distrair os personagens.  Os servi√ßos n√£o s√£o onipotentes e s√£o atualizados apenas em determinados intervalos.  Portanto, a maioria das informa√ß√µes recebidas dos servi√ßos se desatualiza rapidamente, o que permite ao jogador manipular os personagens em seus interesses. <br><br>  Mas quando a IA recebe todas essas informa√ß√µes, precisa tomar decis√µes sobre suas a√ß√µes.  Cada personagem da IA ‚Äã‚Äãpode incluir um conjunto de objetivos para si, que controla suas decis√µes.  Depois de selecionar esses objetivos, ele usa a √°rvore de comportamento para tomar decis√µes sobre o comportamento futuro.  At√© agora, n√£o expliquei isso, mas mais tarde chegaremos a esse t√≥pico. <br><br>  Para diversificar a jogabilidade, o jogo divide AIs de NPCs gerenciados em dois tipos principais: civis e guardas de seguran√ßa.  Essa separa√ß√£o afeta as informa√ß√µes armazenadas em sua base de conhecimento e os tipos de objetivos que eles podem escolher por si mesmos. <br><br>  Vamos come√ßar com os civis.  Esses personagens geralmente s√£o de natureza passiva, mas percebem o comportamento mais provocativo, considerando-o suspeito ou alarmante.  Ao mesmo tempo, eles podem ter objetivos como se opor ao jogador ou avisar os guardas, mas isso n√£o lhes permite entrar em batalha.  Bons exemplos disso s√£o os n√≠veis no desfile de moda de Paris e no hotel Bangkok de 2016 em Bangkok.  Neles, civis com diferentes perfis de base de conhecimento apresentam diferentes comportamentos.  Os convidados s√£o muito mais passivos, mas todos reagem ao comportamento mais flagrante do jogador, enquanto o pessoal e as pessoas que cercam o objetivo do agente t√™m maior probabilidade de reagir √†s suas travessuras e tentar neutraliz√°-lo. <br><br>  Vamos para os guardas.  Naturalmente, eles s√£o os principais oponentes do jogador e entram em batalha com ele, reagindo √†s condi√ß√µes mais extremas, como a descoberta de um cad√°ver ou pessoas inconscientes, al√©m de armas e outros itens estrat√©gicos encontrados no mundo aberto.  Como mencionado acima, em 2016 <em>Hitman</em> apareceu guarda-costas da IA, seguindo ativamente o VIP e protegendo-o quando ele se move ao redor do n√≠vel.  Ao mesmo tempo, eles ainda t√™m livre-arb√≠trio e podem explorar o mundo independentemente.  Para implementar isso, √© necess√°rio um sistema completamente diferente, e um pouco mais tarde falaremos sobre isso. <br><br>  Assim, tendo recebido todas essas informa√ß√µes e ativado os objetivos, o jogo constr√≥i um sistema de √°rvores comportamentais que permite que os personagens ajam de acordo com uma das duas op√ß√µes: realizar os comportamentos por conta pr√≥pria ou participar das ‚Äúsitua√ß√µes‚Äù nas quais os comportamentos s√£o coordenados pelo grupo.  Comportamento √© uma ou mais a√ß√µes, por exemplo, voltando-se para um jogador, interagindo ou conversando com ele, movendo-se para locais do mundo, alternando para o modo de batalha ou interagindo com objetos que o jogador manipulou.  Ao jogar, voc√™ notar√° que muitos dos objetivos cumprem os comportamentos estabelecidos ap√≥s o jogador manipular o mundo de uma certa maneira.  Isso acontece porque corresponde √†s metas definidas que as metas devem cumprir no caso de determinadas condi√ß√µes.  Ou seja, eles intencionalmente se colocam em uma posi√ß√£o arriscada para que o jogador possa mat√°-los. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce0/3b9/eee/ce03b9eee115f6e62b51f8e76fa48bf0.png"></div><br>  Ao mesmo tempo, as situa√ß√µes geralmente surgem quando os eventos que ocorrem no mundo t√™m um impacto mais amplo, por exemplo, quando os personagens descobrem cad√°veres, quando um jogador √© comprometido ou quando o alvo percebe que est√° procurando por ele e tenta escapar.  Nesses casos, os personagens est√£o cientes do que est√° acontecendo ao seu redor e se juntam √† situa√ß√£o.  A situa√ß√£o determina a√ß√µes para cada um deles e todos eles participam dessa performance.  Por exemplo, no caso em que um jogador abre fogo em um desfile de moda, convidados e funcion√°rios geralmente tentam escapar e pedir ajuda, e os guardas de seguran√ßa come√ßam a ca√ßar o jogador e abrir fogo. <br><br>  O sistema de √°rvores de comportamento apareceu pela primeira vez no Absolution e foi bastante aprimorado e complementado pelo lan√ßamento de jogos em 2016 e 2018.  Ele usa um sistema de n√≠veis de detalhe (LOD).  Isso significa que, quando no n√≠vel h√° mais de 300 caracteres ativos de AI controlados por √°rvores de comportamento, aqueles localizados longe do jogador atualizam seu comportamento com menos frequ√™ncia, e a prioridade dos recursos da CPU para atualizar o AI √© atribu√≠da aos personagens mais pr√≥ximos.  Al√©m disso, para esses personagens distantes da IA, as anima√ß√µes s√£o simplificadas ou completamente desativadas.  Como mencionado acima, a grande maioria dos personagens no n√≠vel √© controlada pelo sistema de IA da multid√£o, mas se necess√°rio, cada personagem da multid√£o pode ser dotado de uma √°rvore de comportamento da IA, o que aumenta sua capacidade para um personagem responsivo e coordenado. <br><br><h1>  Multid√µes </h1><br>  Agora, antes de avan√ßarmos para os sistemas projetados para o jogo de 2016, vamos dar uma olhada no segundo sistema b√°sico criado para o Absolution: a estrutura de intelig√™ncia artificial da multid√£o.  Na Absolvi√ß√£o, ele podia suportar at√© 1200 agentes em uma multid√£o, e 500 deles podiam ser vis√≠veis ao mesmo tempo.  Ainda n√£o disse isso, mas os sistemas de multid√µes s√£o muito dif√≠ceis de implementar corretamente.  As multid√µes geralmente consistem em uma infinidade de manequins de IA, que n√£o podem ser comparados em suas mentes a caracteres comuns de AI.  Isso se deve principalmente ao fato de haver muitos deles, mas muitas vezes tamb√©m √© bastante l√≥gico - as pessoas na multid√£o simplesmente obedecem ao instinto da multid√£o e se movem no espa√ßo em dire√ß√£o √† sua meta.  Mas os desenvolvedores do <em>Hitman</em> se propuseram a diminuir a linha entre multid√µes e o comportamento das √°rvores de IA. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/108/706/177/1087061777522d55cad496d23c34cac3.png"></div><br>  Os personagens s√£o colocados na multid√£o como indiv√≠duos, capazes de andar, parar e reconhecer objetos no espa√ßo.  Tamb√©m existem grupos sobre os quais os designers t√™m mais controle.  Um grupo √© muito √∫til quando h√° uma a√ß√£o espec√≠fica que v√°rios personagens devem executar em uma multid√£o, por exemplo, olhar em algum momento e ao mesmo tempo formar uma certa forma, por exemplo, uma figura ou configura√ß√£o grande.  Cada personagem de personalidade implementa um sistema semelhante a uma simples m√°quina de estados finitos, com apenas tr√™s estados b√°sicos de comportamento: ociosidade, caminhada e "espera para caminhar".  O √∫ltimo estado √© √∫til em situa√ß√µes em que o personagem quer se mover, mas ele n√£o tem permiss√£o para fazer isso com uma multid√£o.  Se os personagens estiverem presos na multid√£o, eles decidir√£o a melhor dire√ß√£o do movimento e aguardar√£o uma oportunidade que lhes permita voltar a andar novamente.  De fato, tudo √© mais complicado do que eu descrevo, porque no processo de mudan√ßa os personagens precisam ajustar sua velocidade.  Portanto, cada personagem √© capaz de definir a velocidade preferida e m√°xima usada para manter o fluxo da multid√£o.  Esse sistema √© ainda mais √∫til em caso de p√¢nico, quando as pessoas come√ßam a correr aleatoriamente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/499/e6b/048/499e6b0486b1460aac182fb01f00a08f.png"></div><br>  Um dos perigos reais de ter tantos agentes em um sistema de controle de multid√µes √© que eles interrogam um nomosch para encontrar uma maneira ou apenas verificam se conseguem atingir o ponto desejado.  As malhas de navega√ß√£o s√£o um sistema comumente usado em jogos 3D para mover personagens pelos ambientes.  A empresa de IO percebeu que este era um momento bastante cr√≠tico, portanto, sobrep√¥s uma grade de tomada de decis√µes 2D informando o car√°ter de IA se era poss√≠vel percorrer um determinado espa√ßo, se deveria ser evitado (se essa √© uma √°rea protegida), pontos de sa√≠da para NPCs e √°reas proibidas em caso de p√¢nico causado pelo agente 47 - seria estranho se as pessoas corressem calmamente ao lado dele.  A intelig√™ncia artificial de multid√µes e √°rvores de comportamento possui grades de tomada de decis√£o.  Para √°rvores comportamentais, as grades fornecem uma maneira r√°pida e eficaz de realizar verifica√ß√µes de visibilidade, procurar locais adequados perto de pontos importantes e encontrar locais t√°ticos em rela√ß√£o a um determinado personagem sem sobrecarregar indevidamente a pr√≥pria dobradi√ßa. <br><br>  Mas a parte mais dif√≠cil come√ßa quando o Agente 47 √© adicionado ao sistema.A multid√£o anda ao redor dele e cuida dos seus neg√≥cios, mas quando o jogador come√ßa a causar estragos, os sistemas de IA devem ser capazes de responder a ele.  Os personagens nas imedia√ß√µes do jogador devem ficar em p√¢nico e tentar escapar, mas isso ter√° um efeito cumulativo em toda a multid√£o - come√ßar√° a se mover pelo espa√ßo assim que cada personagem localizado nas proximidades come√ßar a fugir da fonte de alarme.  Esse problema √© resolvido por dois sistemas chamados zonas de comportamento e fluxos de p√¢nico. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/576/cfd/b1f/576cfdb1f04d610632ddb9b9b14c1792.png"></div><br>  Primeiro, qualquer a√ß√£o no mundo que deva influenciar a multid√£o cria uma ou mais zonas de comportamento no ambiente.  A zona de comportamento envia um impulso com um certo raio e √¢ngulo em rela√ß√£o √† fonte do evento, que determina como cada AI da multid√£o que interage com ele deve reagir.  Por exemplo, quando os fogos de artif√≠cio come√ßam a fazer barulho, todos os personagens em um determinado raio se voltam para um ponto importante para observar suas explos√µes.  Se um jogador, enquanto isso, puxa uma arma e a direciona para um espectador inocente, tr√™s zonas de comportamento funcionar√£o: <br><br><ul><li>  O primeiro faz com que aqueles na linha de fogo caiam no ch√£o. </li><li>  O segundo faz o personagem nas imedia√ß√µes do jogador entrar em p√¢nico. </li><li>  O terceiro faz com que todos, dentro de um certo raio do jogador, aprendam sobre a situa√ß√£o e entrem em um estado de ansiedade aumentada. </li></ul><br>  Quando o agente se move pelo espa√ßo com armas, essas zonas comportamentais continuam a enviar impulsos do jogador e fazem com que outros personagens da multid√£o reajam a ele.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A zona de comportamento pode causar muitas rea√ß√µes na IA da multid√£o: observe um ponto importante, evite a fonte da zona de comportamento, notifique-a, fique com medo ou caia no ch√£o. Se a IA da multid√£o estiver entre v√°rias zonas de comportamento, ele prefere a a√ß√£o, o que mais afetar√° seu humor. Al√©m disso, de acordo com minha pesquisa, se um jogador assusta os personagens, n√£o ser√° poss√≠vel acalm√°-los, pois isso s√≥ pode ser pior e √© imposs√≠vel melhorar a situa√ß√£o. O jogador tem um impacto negativo na multid√£o. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tais zonas de comportamento s√£o criadas pelos designers para cada n√≠vel, porque s√£o necess√°rias para os personagens reagirem aos eventos do mundo, mas suas rea√ß√µes far√£o sentido em um contexto espec√≠fico. Por exemplo, se em </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em 2016, uma briga come√ßar√° no bar no desfile de moda, isso ser√° muito inapropriado e a multid√£o reagir√° negativamente. Se um jogador come√ßar uma bagun√ßa no iVixen Club no </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman Absolution</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ele n√£o ser√° levado t√£o a s√©rio, porque as barras de strip t√™m uma atmosfera apropriada e as pessoas podem se comportar como porcos l√°.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas quando um jogador cria o caos, a multid√£o quer sair do caminho e os fluxos de p√¢nico entram aqui. </font><font style="vertical-align: inherit;">Fluxos de p√¢nico s√£o criados com base na grade de decis√£o, que mencionei acima, na qual cada sa√≠da publicada pelos designers faz com que cada c√©lula do mapa calcule o caminho mais curto para essa sa√≠da usando uma variante do algoritmo de Dijkstra. </font><font style="vertical-align: inherit;">Esses caminhos para as sa√≠das s√£o fluxos de p√¢nico, e a multid√£o AI escolhe o melhor fluxo a seguir em caso de perigo. </font><font style="vertical-align: inherit;">Tais fluxos s√£o calculados para todas as sa√≠das em um determinado espa√ßo, o que permite que a multid√£o AI alterne dinamicamente para outra sa√≠da no caso de um "congestionamento", al√©m de resolver situa√ß√µes em que um jogador decide bloquear a sa√≠da mais pr√≥xima.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guarda-costas e VIP </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depois de melhorar os sistemas de IA de √°rvores de comportamento e IA de multid√£o para o </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2016, restou acrescentar outra fun√ß√£o importante: o sistema VIP e guarda-costas. Muitos objetivos importantes no </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman s√£o</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> acompanhados por um ou mais guarda-costas, adicionando outro n√≠vel de dificuldade ao jogador. Obviamente, cada n√≠vel √© projetado para que voc√™ possa encontrar maneiras de contorn√°-los, for√ßando-os a passar para posi√ß√µes mais fracas ou vestindo um traje que lhes permita passar despercebido. Mas, para adicionar esse novo n√≠vel de complexidade, era necess√°rio integrar um sistema completamente diferente √† estrutura de IA finalizada.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0db/1ca/180/0db1ca180d1fb3ced18fa78dfc4008fb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os desenvolvedores precisavam resolver o problema de criar um relacionamento entre guarda-costas e VIPs. Anteriormente, os personagens da IA ‚Äã‚Äãn√£o sabiam da exist√™ncia um do outro. A IA da multid√£o sabia apenas que algo estava impedindo que ela se movesse ao redor do mundo, e a √°rvore de comportamento da AI nunca sabia o que os outros personagens estavam fazendo. Como mencionado acima, gra√ßas ao sistema de situa√ß√µes, parecia que eles estavam coordenados e respondiam a eventos no mundo, mas n√£o podiam se unir significativamente a outros personagens para participar dessa situa√ß√£o e n√£o se comunicaram, porque usavam apenas sensores e servi√ßos. Eles simplesmente permitem que voc√™ se adicione √† situa√ß√£o e um sistema separado os seleciona com base na posi√ß√£o local e em outros crit√©rios. Mas, neste caso, precisamos implementar um relacionamento entre os dois tipos de IA. Os guarda-costas devem sempre seguir o VIP e verificar seu status,se voc√™ n√£o o v√™ h√° um tempo. Ao mesmo tempo, muitas rea√ß√µes sist√™micas aos sistemas de jogo n√£o devem ser tratadas pelo pr√≥prio VIP (afinal, ele √© o chefe) - ele simplesmente ordena que seus guarda-costas os tratem.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isso exigiu completamente novas situa√ß√µes de escolta e evacua√ß√£o VIP que precisam ser integradas ao sistema principal de IA. Nesse caso, as situa√ß√µes devem ter regras muito espec√≠ficas que determinam seu trabalho. Para implement√°-los, o IO criou dois tipos especiais de caracteres. VIP √© um tipo de IA civil que responde √†s situa√ß√µes de maneira um pouco diferente, incluindo uma nova capacidade de comandar outras pessoas. Os guarda-costas s√£o um tipo de guardas de IA que t√™m um conjunto de comportamentos levemente modificados e monitoram ativamente seu VIP atual.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeiro, o sistema permite criar uma situa√ß√£o chamada Ambient VIP Escort, na qual guarda-costas acompanham o VIP em n√≠vel. Os guarda-costas usam sistemas de nomeshme e de localiza√ß√£o de caminhos para ficar perto do personagem e segui-lo. Se o VIP decidir parar, os guarda-costas mudam para comportamentos passivos e esperam at√© que precisem segui-lo mais. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No entanto, isso significa que os VIPs nunca podem ser deixados sozinhos. Naturalmente, um VIP pode precisar ser deixado sozinho para fazer neg√≥cios, o que ajuda o jogador em sua tarefa. Portanto, o VIP pode ordenar que os guarda-costas n√£o o sigam em determinadas √°reas; os designers de n√≠vel colocaram notas no mapa dizendo aos guarda-costas onde eles precisavam esperar pelo chefe.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas isso revela outro ponto fraco - o VIP pode se perder se os guarda-costas ficarem em p√© e n√£o verificarem se o chefe ainda est√° vivo. Isso √© contr√°rio ao seu objetivo. Portanto, outra situa√ß√£o foi adicionada ao jogo - comportamento do Escort-Search. Se o jogo entender que o VIP n√£o pode continuar sua patrulha no mapa (porque ele foi impedido, ele est√° inconsciente ou, provavelmente, morto), o cron√¥metro √© iniciado. Quando atinge um determinado valor, o guarda mais pr√≥ximo come√ßa a verificar o √∫ltimo local conhecido do VIP e, se ele n√£o o encontrar, outros guarda-costas se juntam a ele e se dispersam para procurar uma lista mais ampla de locais pr√≥ximos.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se eles encontrarem um VIP e tudo estiver em ordem com ele, o processo continuar√° da maneira usual. Se o VIP estiver morto, o modo de busca ativo ser√° ativado, mas se o VIP for inconsciente, os guarda-costas implementar√£o a √∫ltima situa√ß√£o adicionada ao jogo de 2016 - Evacue o VIP.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ce/430/06e/6ce43006eacbfb5957ca7e947f6d2361.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A situa√ß√£o de evacua√ß√£o foi criada para que os guarda-costas pudessem mover o VIP para um local seguro. Tudo come√ßa quando o VIP descobre a tentativa de sua vida, no caso de disparos, explos√µes e outros sinais de perigo que surgiram nas proximidades. Em uma situa√ß√£o de evacua√ß√£o, os guardas mais pr√≥ximos cercam o VIP, ap√≥s o qual esse grupo se muda para uma sala segura. Salas seguras s√£o locais que os designers de n√≠vel classificaram como um bom lugar para ocultar o VIP. Quando um grupo est√° prestes a se mudar para uma sala segura, o sistema calcula o espa√ßo de seu impacto na grade de decis√£o, preferindo os caminhos com menos aglomera√ß√£o para evitar a cria√ß√£o de engarrafamentos na multid√£o. Os caminhos calculados s√£o deliberadamente organizados para que o grupo evite ser pressionado nos cantos, porque quando v√°rios guarda-costas protegem um VIP,eles n√£o devem acumular e colidir um com o outro. Se for imposs√≠vel encontrar um quarto seguro ou construir um caminho para ele, eles decidem que a melhor rota de fuga √© manter a posi√ß√£o at√© que uma nova oportunidade de retiro se apresente.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seja como for, para come√ßar a evacua√ß√£o, os guarda-costas devem se alinhar. Para fazer isso, eles precisam de um edif√≠cio, que √© tratado por um sistema de edif√≠cio separado, atribuindo a cada personagem seu pr√≥prio espa√ßo e criando a prioridade de sua adi√ß√£o ao grupo. Ent√£o outro sistema entra em a√ß√£o, apoiando a velocidade do movimento e preservando a constru√ß√£o do grupo, tanto quanto poss√≠vel; o ponto de partida √© VIP. No entanto, se o jogador decidir persegui-los, os guarda-costas podem sair da linha para parar e aceitar a batalha.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depois de chegar em uma sala segura, todos os guardas designados s√£o designados para a sala e executam um comportamento defensivo para proteger o VIP. </font><font style="vertical-align: inherit;">Se depois que um jogador aparecer e colocar em perigo essa sala, o sistema iniciar√° novamente o processo de evacua√ß√£o, ap√≥s o qual os NPCs criar√£o um edif√≠cio e calcular√£o uma nova sala e o caminho para ela.</font></font><br><br><h1>  Anima√ß√µes </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O √∫ltimo componente importante da intelig√™ncia artificial de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s√£o os sistemas de anima√ß√£o que o jogador v√™ em primeiro lugar. </font><font style="vertical-align: inherit;">Anima√ß√µes em jogos s√£o muito importantes para demonstrar as decis√µes tomadas pelos personagens; </font><font style="vertical-align: inherit;">eles s√£o especialmente importantes em jogos furtivos, onde o jogador deve entender o que est√° pensando, porque isso afeta sua estrat√©gia como um todo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tradicionalmente, a anima√ß√£o √© controlada por um controlador: o sistema sabe que, em certos contextos, um personagem passa de um estado de espera passiva para caminhar e correr. Para isso, programadores e animadores geralmente precisam criar esses sistemas de forma que cada personagem n√£o apenas conhe√ßa a anima√ß√£o que ele precisa jogar, mas tamb√©m saiba como executar transi√ß√µes suaves entre anima√ß√µes, bem como lidar com muitas condi√ß√µes sob as quais voc√™ precisa se misturar. v√°rias anima√ß√µes para alcan√ßar o efeito desejado. Se o sistema funcionar mal, os caracteres parecer√£o antinaturais e desajeitados, mas para sua implementa√ß√£o adequada para cada personagem, √© necess√°rio muito trabalho. A tarefa se torna ainda mais dif√≠cil quando os personagens podem estar em novas condi√ß√µes exclusivas e novas anima√ß√µes s√£o adicionadas ao sistema.A Id Software resolveu esse problema adicionando ao</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOOM 2016</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um controlador de anima√ß√£o controlado por anima√ß√£o que minimiza o n√∫mero de anima√ß√µes criadas para cada personagem e permite calcular a melhor maneira de gerenci√°-las no contexto atual. Mas um </font><font style="vertical-align: inherit;">recurso </font><font style="vertical-align: inherit;">exclusivo da </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> era que a IO Interactive n√£o podia se dar ao luxo de ter mais de mil controladores de anima√ß√£o complexos ao mesmo tempo. Portanto, ela precisava de algo menos caro e, no caso ideal, calculado com anteced√™ncia para reduzir a carga na CPU.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd6/cb5/845/fd6cb5845a1b887a7891a88c7c987857.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, a IO Interactive decidiu investigar um sistema chamado Motion Graphs, no qual a tarefa dos designers era conectar todas as anima√ß√µes, e a tarefa da IA ‚Äã‚Äãera descobrir como misturar todas elas. A id√©ia subjacente √© bastante simples: depois de gravar todas essas anima√ß√µes, for√ßaremos o algoritmo a encontrar quadros nos quais duas anima√ß√µes est√£o pr√≥ximas o suficiente uma da outra para que possam ser usadas como uma transi√ß√£o. Isso √© realizado atrav√©s da pesquisa de um par de quadros (um de cada anima√ß√£o), cuja diferen√ßa √© m√≠nima. Ao mesmo tempo, s√£o pesquisados ‚Äã‚Äãn√£o os quadros mais semelhantes entre si, mas os menos diferentes, levando em considera√ß√£o a dura√ß√£o e a velocidade. Depois que a m√©trica de incompatibilidade seleciona o par com o valor mais baixo, ela √© adicionada ao gr√°fico de poss√≠veis transi√ß√µes. Quando o gr√°fico de movimento estiver completo,o personagem pode simplesmente atuar no jogo e determinar a sequ√™ncia de anima√ß√µes necess√°rias para alcan√ßar o efeito desejado.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â aqui que a IA entra em a√ß√£o, porque, apesar do gr√°fico de movimento eliminar a parte do problema do design, ainda precisamos de um sistema para executar as anima√ß√µes necess√°rias. </font><font style="vertical-align: inherit;">Portanto, a partir do Absolution, um novo controlador de anima√ß√£o foi integrado √† s√©rie de jogos, usando aprendizado de m√°quina refor√ßado. </font><font style="vertical-align: inherit;">Se o sistema conhece a anima√ß√£o atual, a dire√ß√£o e a velocidade atuais, ele precisa atender √†s condi√ß√µes da dire√ß√£o e velocidade necess√°rias e tamb√©m descobrir em qual anima√ß√£o atual precisa permanecer e com qual dire√ß√£o e velocidade. </font><font style="vertical-align: inherit;">A primeira vers√£o do sistema usa uma vers√£o simples da pol√≠tica gananciosa padr√£o, mas mais tarde os desenvolvedores estudaram as possibilidades de aprender Q e aproximar uma fun√ß√£o expandindo-a para um sistema de fun√ß√µes b√°sicas (aproxima√ß√£o da fun√ß√£o b√°sica), que pode ser aplicada em novas vers√µes.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hitman 2 </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No processo de mudan√ßa da Absolution para o </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2016, os sistemas b√°sicos de IA foram aprimorados, o sistema de multid√µes foi otimizado e os sistemas de guarda-costas e VIP foram adicionados. O mesmo processo continuou durante o desenvolvimento da sequela de 2018 chamada </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman 2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No momento da reda√ß√£o deste artigo, os detalhes ainda s√£o desconhecidos, mas altera√ß√µes significativas foram feitas no jogo e cada sistema foi revisado e integrado novamente. A mudan√ßa mais not√°vel foi a otimiza√ß√£o adicional do sistema de multid√µes, que agora pode lidar com mais de 2000 NPCs, e isso demonstra completamente o segundo n√≠vel do jogo com a pista de corrida em Miami.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/345/0dc/a55/3450dca55887ea925689352d5b55a41c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O sistema de sensores tamb√©m foi revisado: agora voc√™ pode tirar os olhares suspeitos do NPC de si mesmo, simplesmente se afastando deles - voc√™ n√£o precisa mais sair do campo de vis√£o deles. Al√©m disso, o jogador agora pode se esconder melhor na multid√£o, al√©m de aproveitar a vegeta√ß√£o. Por sua vez, os NPCs aprenderam a ver o jogador nos espelhos, o que torna seu comportamento muito mais realista. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A terceira miss√£o na Col√¥mbia eleva os riscos particularmente altos - ela tem at√© tr√™s objetivos, cada um dos quais se move ao longo de uma rota de patrulha bastante grande. O jogador precisa de mais flexibilidade, porque os sistemas de jogo interrompem essas rotas de destino se ficar √≥bvio que o jogador est√° tentando us√°-las.</font></font><br><br><h1>  Em conclus√£o </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por fim, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um dos recursos mais ricos e os jogos mais complexos que encontrei nas s√©ries AI e Jogos. </font><font style="vertical-align: inherit;">Ele usa um grande n√∫mero de sistemas cuidadosamente ajustados e otimizados que gerenciam um grande n√∫mero de NPCs e, ao mesmo tempo, fornecem uma pequena carga no computador. </font><font style="vertical-align: inherit;">Ele define um novo padr√£o para o tamanho e a escala dos personagens de IA em tempo real, e espero que este n√£o seja o √∫ltimo jogo da franquia IO Interactive.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Refer√™ncias </font></font></h1><br><ul><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Criando a IA para o mundo vivo e respirat√≥rio da absolvi√ß√£o de Hitman"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por Mika Vehkala, GDC Europe 2013.</font></font></li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúMultid√µes em Hitman: Absolvi√ß√£o‚Äù</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Kasper Fauerby, Confer√™ncia Game / AI 2012</font></font></li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúLocomo√ß√£o de personagens baseada em aprendizado por refor√ßo em Hitman: Absolution‚Äù,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Michael B√ºttner, Game / AI Conference 2012.</font></font></li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúGuarda-costas e VIPs: uma an√°lise do comportamento da IA ‚Äã‚Äãdo ambiente, alerta e evacua√ß√£o em Hitman‚Äù,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Jason Schroder e Thomas Egeskov Petersen. </font><font style="vertical-align: inherit;">Confer√™ncia nucl.AI 2016.</font></font></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt467301/">https://habr.com/ru/post/pt467301/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt467283/index.html">Como explicar para sua av√≥ a diferen√ßa entre SQL e NoSQL</a></li>
<li><a href="../pt467289/index.html">Desenvolvendo um sistema operacional monol√≠tico semelhante a Unix - GDT & IDT (5)</a></li>
<li><a href="../pt467291/index.html">iOS para criatividade: desenho</a></li>
<li><a href="../pt467295/index.html">A t√£o esperada liga√ß√£o de exibi√ß√£o no Android</a></li>
<li><a href="../pt467299/index.html">Conceitos: simplificando a implementa√ß√£o das classes do STD Utility</a></li>
<li><a href="../pt467303/index.html">A hist√≥ria do mais jovem programador do PSB: o hackathon tornou-se a porta do banco</a></li>
<li><a href="../pt467305/index.html">Quando a cidade √© inteligente: a experi√™ncia das megacidades</a></li>
<li><a href="../pt467313/index.html">Replica√ß√£o cruzada entre o PostgreSQL e o MySQL</a></li>
<li><a href="../pt467317/index.html">Como o SoftBank engoliu o mundo</a></li>
<li><a href="../pt467323/index.html">Vis√£o geral dos recursos de programa√ß√£o do microcontrolador Qt Creator 4.10 e QBS 1.14</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>