<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÖ ü§∞üèø üïî Usando o servi√ßo AD Federation para autorizar usu√°rios da AWS com distribui√ß√£o de direitos üë©üèΩ‚Äçü§ù‚Äçüë®üèæ üíü üßëüèø‚Äçü§ù‚Äçüßëüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tradu√ß√£o gratuita do artigo de Jeff Wierer " Habilitando a federa√ß√£o para a AWS usando o Windows Active Directory, ADFS e SAML 2.0 " com adi√ß√µes e esc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Usando o servi√ßo AD Federation para autorizar usu√°rios da AWS com distribui√ß√£o de direitos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466859/">  Tradu√ß√£o gratuita do artigo de Jeff Wierer " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Habilitando a federa√ß√£o para a AWS usando o Windows Active Directory, ADFS e SAML 2.0</a> " com adi√ß√µes e esclarecimentos. <br><br>  1. Os dados de origem <br>  2. Prepara√ß√£o <br>  3. configura√ß√£o do AD <br>  4. Instale o ADFS <br>  5. Configurando o ADFS <br>  6. Configurando a AWS <br>  7. Teste <br>  8. Erros conhecidos e suas solu√ß√µes <br><br><img src="https://habrastorage.org/webt/it/ry/2d/itry2ddyzpj1tmqx0eaxawzdd0w.png"><br><a name="habracut"></a><br>  <b>1. Os dados de origem</b> <br><br>  Elevado AD Windows 2016 <br>  O autor usou o EC2 do Windows 2008R2 na Amazon, eu tenho uma m√°quina virtual na rede local do Windows 2016 com acesso √† Internet. <br>  Conta da AWS (que pagar√° por tudo) <br>  Bra√ßos retos <br>  Objetivo: permitir que o usu√°rio do AD efetue login na AWS com os direitos especificados (para obter uma fun√ß√£o), dependendo do grupo do AD. <br><br>  Esquema: <br><br><img src="https://habrastorage.org/webt/it/ry/2d/itry2ddyzpj1tmqx0eaxawzdd0w.png"><br><br>  1. O usu√°rio (ser√° Bob) abre a p√°gina (https://ADFS.domain.name/adfs/ls/IdpInitiatedSignOn.aspx) <br><br>  2. Bob est√° autorizado (o ADFS solicita os campos obrigat√≥rios no AD) <br><br>  3. O navegador de Bob recebe os dados necess√°rios no formato SAML do ADFS <br><br>  4. O navegador envia os dados recebidos para o servi√ßo de autoriza√ß√£o SAML (https://signin.aws.amazon.com/saml) <br><br>  5. Bob Browser Obt√©m o URL de logon para o console da AWS <br><br>  <b>2. Prepara√ß√£o</b> <br><br>  2.1  Voc√™ j√° criou o AD e iniciou usu√°rios que est√£o em grupos diferentes. <br><br>  2.2  IIS aumentado ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">como aumentar a fun√ß√£o do IIS</a> ) <br><br>  2.3  Gere um certificado SSL autoassinado.  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">como gerar um certificado SSL autoassinado</a> ) instale-o imediatamente no site padr√£o. <br><br>  <b>3. configura√ß√£o do AD</b> <br><br>  3.1  Voc√™ precisa criar dois grupos AWS-Production e AWS-Billing <br><br>  3.2  Criar usu√°rio Bob (Aten√ß√£o !!! o usu√°rio deve preencher o campo de email: bob@youdomain.com, caso contr√°rio, voc√™ receber√° um erro ao entrar no console da AWS) <br><br>  3.3  Adicionar Bob aos grupos de produ√ß√£o e de faturamento da AWS criados <br><br>  3.4  Crie outro usu√°rio ADFSSVC.  Conta de servi√ßo especial para conectar-se ao AD. <br><br>  <b>4. Instale o ADFS</b> <br><br>  Existem v√°rias vers√µes do ADFS <br><br><ul><li>  ADFS 1.0 - Windows Server 2003 R2 (download adicional) </li><li>  ADFS 1.1 - Windows Server 2008 e Windows Server 2008 R2 </li><li>  ADFS 2.0 - Windows Server 2008 e Windows Server 2008 R2 (download no Microsoft.com) </li><li>  ADFS 2.1 - Windows Server 2012 </li><li>  ADFS 3.0 - Windows Server 2012 R2 [5] </li></ul><br><ul><li>  <b>ADFS 4.0 - Windows Server 2016</b> - Nossa escolha </li><li>  ADFS 5.0 - Windows Server 2019 </li></ul><br>  O autor baixa o ADFS v2 e o instala. <br>  Vamos elevar o papel do ADFS <br>  N√£o h√° dificuldade, tr√™s capturas de tela o ajudar√£o a clicar no bot√£o pr√≥ximo&gt; <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/7d/7s/zj/7d7szj7lohjuduvwbjhqxnqynmy.png" alt="imagem"><br><img src="https://habrastorage.org/webt/ro/y0/nc/roy0nc-tbpvu5dkpparellem9jq.png" alt="imagem"><br><img src="https://habrastorage.org/webt/vz/qp/j5/vzqpj5aktvi7mkcsgu0i2tkjy7c.png" alt="imagem"><br>  J√° o tenho instalado, por isso parece um pouco diferente. <br>  Pr√≥ximo, Pr√≥ximo, Instalar ... <br></div></div><br>  <b>5. Configurando o ADFS</b> <br><br>  Este link permite chamar o configurador ADFS <br><br><img src="https://habrastorage.org/webt/b2/kk/q3/b2kkq3orbpgff630kbudylwuaca.png" alt="imagem"><br><br><img src="https://habrastorage.org/webt/fm/on/t9/fmont928myb15ufagvzrmhptnko.png" alt="imagem"><br><br><img src="https://habrastorage.org/webt/or/ph/co/orphcodyckiyreemkporlwyxfbo.png" alt="imagem"><br><br>  Conecte-se ao AD com o usu√°rio atual. <br><br><img src="https://habrastorage.org/webt/ew/re/zo/ewrezovprz_njmby2hd5wpn-9rs.png" alt="imagem"><br><br>  Aqui precisamos de um certificado que geramos no IIS (Se√ß√£o 2.3) e do nome do nosso futuro ADFS (adfs.you-domain.com), a linha de exibi√ß√£o √© NOME DA SUA EMPRESA <br><br><img src="https://habrastorage.org/webt/fr/jo/hz/frjohzyayi85ygewnqbqbrth1jw.png" alt="imagem"><br><br>  Selecionamos a conta de servi√ßo <b>ADFSSVC</b> que criamos na <b>se√ß√£o</b> 3.4 <br><br><img src="https://habrastorage.org/webt/4k/pg/f5/4kpgf5vqm5n5aimw50djgilszmq.png" alt="imagem"><br><br>  Crie um novo banco de dados <br><br><img src="https://habrastorage.org/webt/dz/pm/bh/dzpmbh7ks8olzbs3qin5ai0ngue.png" alt="imagem"><br><br>  Verificando ... <br><br><img src="https://habrastorage.org/webt/r3/sv/-e/r3sv-erxdegwvhjlyc1fhfk0tgk.png" alt="imagem"><br>  Verifica√ß√£o de pr√©-instala√ß√£o ... Clique em Configurar <br><br><img src="https://habrastorage.org/webt/yk/zg/yx/ykzgyx8wsmmxq-jtgr64cfmjpgg.png" alt="imagem"><br><br>  Feito. <br><br>  O console come√ßa pesquisando "Gerenciamento de AD" no termo de pesquisa do Windows. <br><br><img src="https://habrastorage.org/webt/yl/y3/0w/yly30wrnmju7zbrzn8wnphjlw_8.png" alt="imagem"><br><br><img src="https://habrastorage.org/webt/mj/u7/lr/mju7lrdkg-3hpslxlyhexeql0aa.png" alt="imagem"><br><br>  Em seguida, v√° para <b>Trust Relationships</b> e escolha <b>Relying Party Trusts</b> <br><br>  Bot√£o Direito -&gt; <b>Adicionar Confian√ßa da Parte Confiante</b> <br><br><img src="https://habrastorage.org/webt/j9/24/hw/j924hwrzhv8anx28tcmccxp3u0g.png" alt="imagem"><br><br>  Escolha de <b>declara√ß√µes cientes</b> <br><br><img src="https://habrastorage.org/webt/5k/rh/m8/5krhm8nid6ljcnzxxqgl5y0-tji.png" alt="imagem"><br><br>  Selecione "Importar dados que a terceira parte confi√°vel publicou on-line ..." e digite a linha <code>https://signin.aws.amazon.com/static/saml-metadata.xml</code> . √â o mesmo para todos e √© fornecida pela AWS. <br><br><img src="https://habrastorage.org/webt/qp/em/dv/qpemdvq4py7cyaflbe3cbko19yo.png" alt="imagem"><br><br>  Dirija o nome " <b>AWS GO</b> " a seu crit√©rio ou deixe como est√°. <br><br><img src="https://habrastorage.org/webt/kp/0a/nq/kp0anq7a_wqtfljgejqmnwjmm-s.png" alt="imagem"><br><br>  Selecionamos "Permitir todos os usu√°rios ..." o acesso √© permitido a todos. <br><br><img src="https://habrastorage.org/webt/eq/vd/el/eqvdelmddw1tqnvguoybgj42hkq.png" alt="imagem"><br><br>  Verifique novamente e pronto. <br><br><img src="https://habrastorage.org/webt/qj/u7/bd/qju7bdgtcyvemkrdpydbd_o8ck0.png" alt="imagem"><br><br>  Clique com o bot√£o direito do mouse em nossos rel√©s e selecione "Editar pol√≠tica de emiss√£o de reivindica√ß√£o" <br><br><img src="https://habrastorage.org/webt/ty/nc/xt/tyncxtll_yw2dnwfergdd8z0zmo.png" alt="imagem"><br><br>  Come√ßamos a adicionar nossas regras: <br><br>  5.1 Obtendo um nome de usu√°rio.  Predefini√ß√£o: <b>Transforme uma reivindica√ß√£o recebida</b> e preencha os campos: <br><br>  a.  Nome da regra de reivindica√ß√£o: <b>NameId</b> <br>  b.  Tipo de reivindica√ß√£o recebida: <b>Nome da Conta do Windows</b> <br>  c.  Tipo de reivindica√ß√£o de sa√≠da: <b>ID do nome</b> <br>  d.  Formato de ID do nome de sa√≠da: <b>Identificador Persistente</b> <br>  e  Passe por todos os valores de reivindica√ß√£o: <b>marcado</b> <br><br><img src="https://habrastorage.org/webt/z5/3o/_t/z53o_tbis-prs57z6noa9pekeqa.png" alt="imagem"><br><br>  Feito. <br><br>  5.2 Obtendo uma lista de fun√ß√µes para o usu√°rio.  Modelo: <b>Enviar atributos LDAP como reivindica√ß√µes</b> , <br><br><img src="https://habrastorage.org/webt/4_/r2/px/4_r2pxcagcz6vlgm3bkkpnvmycg.png" alt="imagem"><br><br>  campos: <br><br>  a.  Nome da regra de reivindica√ß√£o: <b>RoleSessionName</b> <br>  b.  Armazenamento de atributos: <b>Active Directory</b> <br>  c.  Atributo LDAP: <b>endere√ßos de email</b> <br>  d.  Tipo de reivindica√ß√£o de sa√≠da: <br><br><pre> <code class="plaintext hljs">https://aws.amazon.com/SAML/Attributes/RoleSessionName</code> </pre> <br><img src="https://habrastorage.org/webt/ft/u6/bz/ftu6bzdputv_ivsjsruqudjjijo.png" alt="imagem"><br><br>  Conclu√≠do <br><br>  5.3 Nota importante: Nesta regra, todas as fun√ß√µes do usu√°rio ser√£o extra√≠das e mapeadas para fun√ß√µes semelhantes no IAM (ou seja, fun√ß√µes que come√ßam com AWS -...).  Esta regra recupera todas as associa√ß√µes do AD.  Modelo: <b>Enviar Declara√ß√µes Usando uma Regra Personalizada</b> <br><br><img src="https://habrastorage.org/webt/8g/xz/z8/8gxzz8updq4mangrxyip3j0oqj4.png" alt="imagem"><br><br>  campos <br>  a.  Nome da regra de reivindica√ß√£o: <b>obter grupos do AD</b> <br>  b.  Fun√ß√£o personalizada: <br><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">c:[</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Type</span></span></span><span class="hljs-function"> == "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">http</span></span></span><span class="hljs-function">://</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">schemas.microsoft.com</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ws</span></span></span><span class="hljs-function">/2008/06/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">identity</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">claims</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">windowsaccountname</span></span></span><span class="hljs-function">", </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Issuer</span></span></span><span class="hljs-function"> == "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AUTHORITY</span></span></span><span class="hljs-function">"] =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">store</span></span></span><span class="hljs-function"> = "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Active</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Directory</span></span></span><span class="hljs-function">", </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">types</span></span></span><span class="hljs-function"> = ("</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">http</span></span></span><span class="hljs-function">://</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">temp</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">variable</span></span></span><span class="hljs-function">"), </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">query</span></span></span><span class="hljs-function"> = ";</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tokenGroups</span></span></span><span class="hljs-function">;{0}", </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">param</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c.Value</span></span></span><span class="hljs-function">);</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/of/o5/tb/ofo5tbq58zg7zhptd_wvaumhcpe.png" alt="imagem"><br><br>  para adicionar a pr√≥xima regra, voc√™ precisar√° retornar ap√≥s a etapa 6 (ou poder√° adicion√°-la e, posteriormente, alterar o ID) <br><br>  5.4 Adicione outra regra como 5.3, ser√° assim: <br><br>  a.  Nome da regra de reivindica√ß√£o: <b>Roless</b> <br>  b.  Fun√ß√£o personalizada: <br><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">c:[</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Type</span></span></span><span class="hljs-function"> == "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">http</span></span></span><span class="hljs-function">://</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">temp</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">variable</span></span></span><span class="hljs-function">", </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Value</span></span></span><span class="hljs-function"> =~ "(?</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function">)^</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AWS</span></span></span><span class="hljs-function">-"] =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">issue</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Type</span></span></span><span class="hljs-function"> = "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">https</span></span></span><span class="hljs-function">://</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">aws.amazon.com</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SAML</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Attributes</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Role</span></span></span><span class="hljs-function">", </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Value</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegExReplace</span></span></span><span class="hljs-function">(</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c.Value</span></span></span><span class="hljs-function">, "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AWS</span></span></span><span class="hljs-function">-", "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arn:aws</span></span></span><span class="hljs-function">:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">iam</span></span></span><span class="hljs-function">::123456789012:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saml</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">provider</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ADFS</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arn:aws</span></span></span><span class="hljs-function">:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">iam</span></span></span><span class="hljs-function">::123456789012:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">role</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ADFS</span></span></span><span class="hljs-function">-"));</span></span></code> </pre><br><img src="https://habrastorage.org/webt/ho/3x/qf/ho3xqfbhanbwvwig17gkz07gp5c.png" alt="imagem"><br><br>  Aqui voc√™ precisa alterar o valor 123456789012 para o seu pr√≥prio a partir do IAM AWS <br><br><img src="https://habrastorage.org/webt/hz/mz/29/hzmz29c3zzj1hc1aqvvrjtdhv-g.png" alt="imagem"><br><br>  Isso ser√° descrito na cl√°usula 6. <br><br>  <b>6. Configurando a AWS</b> <br><br>  Todas as a√ß√µes ocorrem no console da AWS :) <br><br>  6.1 Criando provedor SAML <br><br>  a.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IAM</a> -&gt; Provedores de identidade -&gt; Criar provedor <br>  Tipo de provedor - SAML <br>  Nome do provedor - <b>ADFS</b> <br>  Documento de metadados - esse bloco precisa ser obtido (baixado) no servidor FS em <b>https: ///FederationMetadata/2007-06/FederationMetadata.xml</b> <br>  se o arquivo estiver indispon√≠vel, consulte o ponto 8 - Erros conhecidos e suas solu√ß√µes <br><br><img src="https://habrastorage.org/webt/dh/97/p9/dh97p9gfsqsamc_g65iq2_ivaoq.png" alt="imagem"><br><br>  b.  Crie duas fun√ß√µes para nossos usu√°rios. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fun√ß√µes do IAM Fun√ß√µes</a> -&gt; Criar Fun√ß√£o <br><br><img src="https://habrastorage.org/webt/xx/tt/cu/xxttcuulynvluqkmzn2utiba0ac.png" alt="imagem"><br><br>  Esboce as pol√≠ticas necess√°rias (por exemplo, Faturamento (pol√≠tica padr√£o) para usu√°rios que monitorar√£o o dinheiro, ou voc√™ pode pr√©-criar sua pr√≥pria pol√≠tica e atribu√≠-la aqui) <br><br><img src="https://habrastorage.org/webt/od/q4/4m/odq44mxn1uq5ynitmw6xba81nu8.png" alt="imagem"><br><br>  atribuir tags, se necess√°rio ... <br><br><img src="https://habrastorage.org/webt/mt/2r/w7/mt2rw7e1jfrtpetifxwlgtgon78.png" alt="imagem"><br><br>  Atribua um nome: o nome ap√≥s "-" deve corresponder ao nome no AD ap√≥s "-" <b>Faturamento</b> ASFS = <b>Faturamento</b> AWS, nesse caso, seu usu√°rio estar√° no grupo correto. <br><br>  E clique em Criar fun√ß√£o <br><br><img src="https://habrastorage.org/webt/zx/-w/e5/zx-we5rpy7im1c9iyuwfgiklxxc.png" alt="imagem"><br><br>  <b>7. Teste</b> <br><br>  7.1 No seu navegador favorito, v√° para a p√°gina do servidor <code>https://localhost/adfs/ls/IdpInitiatedSignOn.aspx</code> (um certificado autoassinado precisar√° ser confirmado) <br><br>  Uma p√°gina com conte√∫do semelhante ser√° aberta. <br><br><img src="https://habrastorage.org/webt/qq/xp/de/qqxpdeqbpdj3w2hqzeju2nqmm28.png" alt="imagem"><br><br>  Digite os dados do nosso usu√°rio AD <br><br><img src="https://habrastorage.org/webt/ud/4c/zl/ud4czlf_z06wzse2efuaeohkray.png" alt="imagem"><br><br>  E somos redirecionados para a p√°gina da AWS com uma proposta da fun√ß√£o sob a qual o usu√°rio trabalhar√° na AWS <br><br><img src="https://habrastorage.org/webt/tr/iz/xb/trizxbhqig9mfalfzv_o319ew9a.png" alt="imagem"><br><br>  isso ocorre porque nosso Bob est√° em dois grupos de an√∫ncios ao mesmo tempo (produ√ß√£o da AWS e faturamento da AWS). <br><br>  Selecionamos o faturamento da AWS e vemos as configura√ß√µes necess√°rias (podemos ver e editar o or√ßamento, mas n√£o temos o direito de criar o EC2 de acordo com as fun√ß√µes que definimos para ele) <br><br><img src="https://habrastorage.org/webt/9q/v4/qf/9qv4qf-nmg6uefdkgymoejkp_hm.png" alt="imagem"><br><br>  <b>8. Erros conhecidos e suas solu√ß√µes</b> <br><br>  8.1 O portal n√£o responde ou n√£o consegue encontrar as p√°ginas necess√°rias.  Por exemplo: <br><br><pre> <code class="plaintext hljs">https://localhost/adfs/ls/IdpInitiatedSignOn.aspx</code> </pre> <br>  <b>Solu√ß√£o:</b> no servidor ADFS, voc√™ deve executar o comando do PowerShell <br><br><pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>-AdfsProperties -EnableIdPInitiatedSignonPage $true</code> </pre> <br>  Voc√™ pode colocar imediatamente o logotipo na p√°gina de boas-vindas <br><br><pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>-AdfsWebTheme -TargetName default -Illustration @{<span class="hljs-built_in"><span class="hljs-built_in">path</span></span>="C:\<span class="hljs-built_in"><span class="hljs-built_in">path</span></span>\adfslogo.jpg"}</code> </pre> <br>  8.2 Ao redirecionar para o console da AWS, voc√™ recebe um erro do formul√°rio: <br><br><pre> <code class="plaintext hljs">RoleSessionName is required in AuthnResponse (Service: AWSSecurityTokenService; Status Code: 400; Error Code: InvalidIdentityToken; Request ID: e4ddf8cd-d7b7-11e9-8729-09c90d2561b0). Please try again</code> </pre> <br>  <b>Solu√ß√£o:</b> provavelmente seu usu√°rio n√£o possui um campo de email no AD <br><br><img src="https://habrastorage.org/webt/ld/ef/9h/ldef9hsofbzfp0j4qkubd8cokku.png" alt="imagem"><br><br>  <b>Solu√ß√£o 2:</b> provavelmente existe um erro ao escrever o grupo no AD e o papel na AWS </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt466859/">https://habr.com/ru/post/pt466859/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt466845/index.html">Entrevista reversa: que perguntas fazer √† empresa?</a></li>
<li><a href="../pt466849/index.html">noexcept-ctcheck ou algumas macros simples para ajudar o compilador a escrever c√≥digo noexcept</a></li>
<li><a href="../pt466851/index.html">Linha Agilex - 10nm Intel FPGA</a></li>
<li><a href="../pt466855/index.html">Criando Tower Defense na Unity: Cen√°rios e Ondas de Inimigos</a></li>
<li><a href="../pt466857/index.html">Execu√ß√£o de aplicativos em segundo plano no iOS 13</a></li>
<li><a href="../pt466861/index.html">Como escapar da realidade usando uma hackathon</a></li>
<li><a href="../pt466863/index.html">Configurando Ass√≠ntota</a></li>
<li><a href="../pt466865/index.html">Esperando o primeiro de novembro: proibi√ß√£o ou legaliza√ß√£o de criptomoedas</a></li>
<li><a href="../pt466873/index.html">As 5 coisas mais novas do JavaScript n√£o entendem</a></li>
<li><a href="../pt466875/index.html">O triste destino dos especificadores de formato de fun√ß√£o printf para caracteres Unicode no Visual C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>