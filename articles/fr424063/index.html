<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüè´ üßÄ ü§ûüèæ Comment nous sommes-nous tu√©s en un clic, en pla√ßant un site et en facturant sur un g√©ocluster, ou nous reparlerons de redondance üêπ üëêüèæ ‚ôæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oui, je suis aussi un cr√©tin. Mais je ne m'y attendais pas. Il semble que ce ne soit "pas la premi√®re ann√©e de mariage". Il semble lire un tas d'artic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous sommes-nous tu√©s en un clic, en pla√ßant un site et en facturant sur un g√©ocluster, ou nous reparlerons de redondance</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/424063/"> Oui, je suis aussi un cr√©tin.  Mais je ne m'y attendais pas.  Il semble que ce ne soit "pas la premi√®re ann√©e de mariage".  Il semble lire un tas d'articles intelligents sur la tol√©rance aux pannes, la redondance, etc., quelque chose de raisonnable a m√™me √©crit ici lui-m√™me.  Depuis plus de 10 ans, je suis PDG d'un fournisseur d'h√©bergement op√©rant sous la marque <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ua-hosting.company</a> et fournissant des services d'h√©bergement et de location de serveurs aux Pays-Bas, aux √âtats-Unis et il y a seulement une semaine au Royaume-Uni (ne demandez pas pourquoi le nom ua, la r√©ponse se trouve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans notre article autobiographique</a> ), nous proposons √† nos clients des solutions de complexit√© variable, parfois telles que m√™me nous-m√™mes avons du mal √† comprendre ce que nous avons fait. <br><br>  Mais bon sang ... Aujourd'hui, je me suis d√©pass√©.  Nous avons nous-m√™mes compl√®tement d√©moli le site et la facturation, avec toutes les transactions, les donn√©es des clients sur les services et autres choses, et c'√©tait ma faute, j'ai dit moi-m√™me ¬´supprimer¬ª.  Certains d'entre vous l'ont d√©j√† remarqu√©.  C'est arriv√© aujourd'hui, vendredi √† 11 h 20, heure normale de l'Est (HNE).  De plus, notre site et notre facturation n'√©tant pas h√©berg√©s sur le m√™me serveur, et m√™me pas dans le cloud, nous avons quitt√© le cloud du data center il y a 2 mois au profit de notre propre solution.  Tout cela √©tait situ√© sur un g√©o-cluster √† tol√©rance de pannes de deux serveurs virtuels - notre nouveau produit, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VPS (KVM) avec des disques d√©di√©s</a> , VPS <b>IND√âPENDANTS</b> , qui √©taient situ√©s sur deux continents - en Europe et aux √âtats-Unis.  L'un √† Amsterdam et l'autre √† Manassas, pr√®s de Washington, par le fait que DC dans deux centres de donn√©es fiables.  Contenu sur lequel √©tait dupliqu√© en permanence et en temps r√©el, et la tol√©rance aux pannes est bas√©e sur un cluster DNS normal, des demandes pouvaient arriver √† n'importe lequel des serveurs, l'un d'eux servait de MA√éTRE, et en cas d'inaccessibilit√©, il assumait les t√¢ches du second. <br><br>  Je pensais que cela ne pouvait tuer qu'une m√©t√©orite, enfin, ou quelque chose de similaire √† la m√©t√©orite mondiale, qui pouvait d√©sactiver deux centres de donn√©es en m√™me temps.  Mais tout s'est av√©r√© plus simple. <a name="habracut"></a><br><br>  Cela peut √™tre nous-m√™mes, nous, si nous sommes des idiots.  Dans le monde, il n'y a que deux choses illimit√©es - l'Univers et la stupidit√© humaine, et si la premi√®re est discutable, la seconde est devenue √©vidente. <br><br>  J'ai toujours adh√©r√© au principe de la bonne redondance, je ne fais pas partie de ces personnes qui crieront "Je perds 1000 $ pour une heure d'inactivit√©", mais en m√™me temps je paie 15 $ pour toute mon infrastructure.  Non, je ne perds certainement pas autant.  M√™me si, parfois, je perds.  La plupart des idiots qui crient √† ce sujet ne pensent m√™me pas que les temps d'arr√™t par seconde peuvent parfois co√ªter 1000 $, 10 000 $ ou m√™me un million de dollars de profit √† long terme.  Comment?  C'est tr√®s simple, en ce moment, un client peut venir qui fera sa premi√®re commande, et √† l'avenir vous apportera ces millions de dollars, car vous avez toujours la possibilit√© de lui prouver votre unicit√© et de m√©riter sa recommandation.  Et s'il voit l'erreur 504 ou ¬´Je suis d√©sol√©, mais le serveur est actuellement indisponible¬ª, la transaction peut ne pas avoir lieu.  Cela nous est arriv√©, non, pas une erreur 504 lors de l'appel d'un visiteur important, mais la premi√®re.  Par pur hasard, je me suis retrouv√© au bon endroit au bon moment, lorsque de gros clients, comme Dmitry Sukhanov, le cr√©ateur de Kinopoisk, ont visit√© notre site, bien que ce ne soit pas un tr√®s bon exemple, car il n'a travaill√© avec nous que 2 ans, jusqu'√† Yandex ne l'a pas achet√© pour 60 millions de dollars ou combien.  Donc, c'est Dmitry plut√¥t que nous qui avons obtenu les millions ici, mais nous √©tions heureux de coop√©rer avec un projet aussi int√©ressant et utile, ce qui, √† son tour, nous a fait une publicit√© et a fourni de nombreux nouveaux clients satisfaits. <br><br>  En g√©n√©ral, pourquoi suis-je tout cela.  Les pertes et la redondance n√©cessaire doivent √™tre √©valu√©es de mani√®re raisonnable.  Bien qu'il existe un risque de perdre plus d'un million de dollars, vous devez examiner la probabilit√© d'un tel √©v√©nement.  Tr√®s probablement, si Dmitry a vu 1 erreur de temps 504, rien de critique ne se serait produit et il nous est revenu.  Pourquoi?  √Ä cette √©poque, nous √©tions probablement l'un des rares √† pouvoir offrir une connectivit√© 1+ Gb / s en Ukraine avec une haute qualit√© et une latence minimale pour un prix abordable, ce qui √©tait extr√™mement important pour leur ressource √† l'√©poque, afin de garantir un acc√®s de haute qualit√© pour le public ukrainien √† portail, le trafic √©tranger √©tant de mauvaise qualit√© et toujours cher.  Il est donc important de garantir l'unicit√© de la solution, puis la disponibilit√© ne sera pas tr√®s critique pour vous.  Et puisque nous sommes uniques - nous pouvons bien nous permettre (m√™me maintenant), ayant des milliers de clients serveurs, d'√™tre inactifs pendant plusieurs heures ou m√™me plus.  Nous n'avons pas besoin de nuages ‚Äã‚Äãm√©ga-tol√©rants aux pannes offrant une disponibilit√© de 99,9999% pour beaucoup d'argent, car m√™me s'ils tombent, et s'ils tombent, alors la pratique les a montr√© depuis tr√®s longtemps, car le probl√®me qui a caus√© l'inaccessibilit√© n'est probablement pas ordinaire.  Et ils n'aideront pas en cas de vuln√©rabilit√©.  Ils n‚Äôaideront pas. <br><br>  Nous avons donc construit notre d√©cision pour nous-m√™mes est tr√®s simple.  Nous avons pris deux VPS (KVM) sur les n≈ìuds Dell R730xd, le m√™me VPS (KVM) que nous proposons √† nos clients, car c'est notre principe initial - pour donner aux gens ce que nous utilisons nous-m√™mes: <br><br>  VPS (KVM) - 2 x Intel Dodeca-Core Xeon E5-2650 v4 (24 c≈ìurs) / 40 Go / 4x240 Go SSD RAID10 / Datatraffic - 40 To - √† partir de 99 $ / mois, et vous pouvez <b>obtenir une remise de 30% sur le premier paiement</b> si vous trouvez une promo code dans notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article publicitaire</a> . <br><br>  Un aux Pays-Bas et un autre aux √âtats-Unis.  Oui, sur ces n≈ìuds, en plus de notre site et de la facturation, il y a 2 autres clients r√©els, chacun pouvant influencer le fonctionnement de notre site en th√©orie et ne peut pas le faire en pratique.  Pourquoi - c'est √©crit dans un article publicitaire, je n'entrerai pas dans les d√©tails ici une deuxi√®me fois.  Maintenant, ce n'est pas √ßa.  En g√©n√©ral, la solution n'est pas pire que les serveurs d'entr√©e de gamme d√©di√©s et peut g√©rer une charge tr√®s importante. <br><br>  Entre autres, il est tol√©rant aux pannes, les donn√©es sont constamment r√©pliqu√©es en temps r√©el.  Et si un serveur n'est pas disponible, le second prendra le r√¥le MASTER.  Id√©alement, vous pouvez faire en sorte que le trafic en provenance du continent am√©ricain soit trait√© par le serveur am√©ricain, et en provenance d'Europe, de Russie et d'Asie - le serveur des Pays-Bas. <br><br>  Nous avons li√© les serveurs √† notre compte dans notre facturation WHMCS, un produit sous licence publique, mais adapt√© pour nous, qui est utilis√© par de nombreux fournisseurs d'h√©bergement √† travers le monde, y compris nous, car √©crire notre propre syst√®me comptable est une franche d√©bilit√© (dans notre cas) .  Surtout dans les cas o√π la fonction souhait√©e est impl√©ment√©e en √©crivant votre propre module sur la facturation existante, ce qui augmente votre tol√©rance aux pannes, car elle r√©duit le risque de vuln√©rabilit√©s critiques.  Apr√®s tout, seul ou m√™me avec une petite √©quipe, vous ne pourrez pas √©crire un syst√®me plus fiable que celui existant, qui a √©t√© √©crit au fil des ans par un tas de d√©veloppeurs tuft√©s, o√π des milliers de bugs ont d√©j√† √©t√© supprim√©s et pour lesquels les d√©veloppeurs demandent maintenant aussi peu que 30 $ / mois pour une licence et re√ßoivent des millions de dollars par an qui peuvent √™tre d√©pens√©s, y compris pour de nouvelles am√©liorations. <br><br>  En parlant de vuln√©rabilit√©s critiques, notre programmeur a r√©cemment fait une erreur en √©crivant l'un des modules de service, qui avait acc√®s √† une base de donn√©es de facturation en lecture seule, qui a √©t√© d√©couvert par un pentester ind√©pendant et nous a demand√© de payer 550 $ pour un bogue trouv√©, car il s'agissait d'une vuln√©rabilit√© SQL -injection: <br><br><blockquote>  L'injection SQL est dans le top 10 OWASP, je vous ai √©crit sur le montant de 550 $, c'est le montant minimum, car la base de donn√©es souffre, compromettant ainsi les donn√©es utilisateur. <br><br>  Mais certains montants vont jusqu'√† 10 000 $ en r√©compense, comme c'est le cas avec vk.com. </blockquote><br>  Bien s√ªr, nous avons soutenu ce d√©but et pay√© une compensation sans aucun doute.  Puisque notre programmeur a examin√© les donn√©es fournies et confirm√© l'existence d'un probl√®me, justification du pentester.  Apr√®s tout, nous ne maintenons pas encore notre propre pentester dans l'√âtat, et ce travail n√©cessite des connaissances et du temps consid√©rables, car il comprend une s√©rie d'√©tudes: <br><br><blockquote>  Audit de s√©curit√© de l'ensemble de la ressource, il s'agit d'un contr√¥le selon les param√®tres suivants, et notre rapport de fin d'audit comprend: <br><br>  ‚Ä¢ Injection de code A1 <br>  ‚Ä¢ A2 Authentification et gestion de session incorrectes <br>  ‚Ä¢ Scriptage Crossite A3 <br>  ‚Ä¢ Violation d'acc√®s A4 <br>  ‚Ä¢ Configuration A5 non s√©curis√©e <br>  ‚Ä¢ Fuite de donn√©es sensibles A6 <br>  ‚Ä¢ A7 Protection contre les attaques insuffisante <br>  ‚Ä¢ Falsification de demande intersite A8 <br>  ‚Ä¢ A9 Utilisation de composants avec des vuln√©rabilit√©s connues <br>  ‚Ä¢ A10 Enregistrement et surveillance inad√©quats </blockquote><br>  Car oui, la d√©cision a √©t√© prise sans √©quivoque et rapidement.  De plus, comme l'a not√© le pentester, ces √©tudes augmentent la s√©curit√© du Web dans son ensemble: <br><blockquote>  C'est mon hobby, si chaque d√©veloppeur comme vous avait un dialogue avec les chasseurs de bogues, Internet serait √† 80% s√ªr. </blockquote><br>  Par cons√©quent, dans l'ensemble, nous avons pay√© beaucoup, surtout si nous divisons le montant par le nombre de mois pendant lesquels l'employ√© responsable des tests de p√©n√©tration n'a pas √©t√© maintenu dans le personnel.  Merci beaucoup au Pentester pour le bug trouv√© et le fait qu'il ait pris le temps pour nous, nous lui sommes vraiment tr√®s reconnaissants.  Si quelqu'un a besoin de ses services, veuillez contacter, nous vous fournirons des contacts avec sa permission. <br><br>  Mais cette fois ce n'est pas la vuln√©rabilit√© qui nous a tu√©s.  C'√©tait nous et la caract√©ristique du produit WHMCS.  Sur chaque note, nous avons install√© un produit de gestion de conteneur virtuel pratique - VM Manager, auquel WHMCS a acc√®s pour cr√©er, suspendre et supprimer, ainsi que des clients - pour g√©rer le conteneur virtuel cr√©√©. <br><br><img src="https://habrastorage.org/files/607/98f/a00/60798fa001694b8f87c12d03c35cfe61.jpg" alt="image"><br><br>  Chaque jour au WHMCS, nous recevons des dizaines voire des centaines de commandes qui doivent √™tre accept√©es (accept√©es), supprim√©es ou marqu√©es comme Fraude si le client essaie de payer une commande avec une carte de cr√©dit vol√©e.  Parfois, il y a un boom de ces commandes et nous ne pouvons pas d√©terminer imm√©diatement quel statut lui attribuer, alors que nous effectuons notre v√©rification interne ou demandons √† l'utilisateur de s'identifier correctement si nous trouvons sa commande suspecte, et ces utilisateurs, bien s√ªr, ne r√©pondent pas ou ne passent pas toujours identification r√©ussie.  Par cons√©quent, de temps en temps, mille ou deux commandes non activ√©es ou de statut inconnu s'accumulent, qui sont plus faciles √† supprimer qu'√† traiter.  Qui a vraiment besoin de - r√©organiser. <br><br>  Il y a deux mois, nous avons d√©cid√© d'abandonner compl√®tement le produit de centre de donn√©es bas√© sur le cloud, car nous avons commenc√© √† fournir notre propre solution avec VM Manager, qui vous permet de mettre le syst√®me en un clic ou m√™me √† partir de votre image: <br><br><img src="https://habrastorage.org/files/457/585/1f7/4575851f79d04242a0a3e0560e52a176.jpg" alt="image"><br><br>  Et ils l'ont m√™me propos√© sur les SSD NVMe PCIe, qui sont un ordre de grandeur plus rapides que les SSD ordinaires pour la lecture et jusqu'√† 3 fois pour l'√©criture, la solution, comme celle du cloud, doit √™tre mise √† niveau, les serveurs co√ªtent √† partir de 15 $ et incluent un panneau de configuration VM Manager et ISP Manager pratique 5 sur demande pour une mise √† niveau gratuite du support avec une √©tape minimale de 5 Go de RAM DDR4, 60 Go de NVMe PCIe SSD et 3 c≈ìurs E5-2650 v4 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vers un plan tarifaire plus √©lev√©</a> √† Amsterdam, Manassas et Londres: <br><br>  VPS (KVM) - E5-2650 v4 (3 c≈ìurs) / 5 Go DDR4 / 60 Go NVMe SSD / 1 Gbit / s 5 To - 15 $ / mois <br>  VPS (KVM) - E5-2650 v4 (6 c≈ìurs) / 10 Go DDR4 / 120 Go NVMe SSD / 1 Gbit / s 10 To - 30 $ / mois <br>  VPS (KVM) - E5-2650 v4 (9 c≈ìurs) / 15 Go DDR4 / 180 Go NVMe SSD / 1 Gbit / s 15 To - 45 $ / mois <br>  ... <br>  VPS (KVM) - E5-2650 v4 (24 c≈ìurs) / 40 Go DDR4 / 480 Go NVMe SSD / 1 Gbit / s 40 To - 120 $ / mois <br>  ... <br>  VPS (KVM) - E5-2650 v4 (24 c≈ìurs) / 65 Go DDR4 / 780 Go NVMe SSD / 1 Gbit / s 65 To - 195 $ / mois <br>  VPS (KVM) - E5-2650 v4 (24 c≈ìurs) / 70 Go DDR4 / 840 Go NVMe SSD / 1 Gbit / s 70 To - 210 $ / mois <br>  VPS (KVM) - E5-2650 v4 (24 c≈ìurs) / 75 Go DDR4 / SSD NVMe 900 Go / 1 Gbit / s 75 To - 225 $ / mois <br><br>  Par cons√©quent, cela n'a aucun sens de louer une grande partie du cloud du centre de donn√©es et d'offrir aux clients les anciens processeurs E3-1230, m√™me si √† partir de 3,99 $ par mois pour nous, il est √©puis√©.  Nous pensons que les clients devraient recevoir la plus haute qualit√© et des performances maximales, √† un prix minimum, oui, nous ne pouvons pas offrir un produit pour 3,99 $ et nous ne couvrons peut-√™tre pas les besoins de certains d√©veloppeurs qui ont besoin de ressources et de performances minimales, mais le n≈ìud co√ªte plus cher 7 000 euros et nous ne pouvons pas nous permettre, du moins pour l'instant, d'y placer plus de 15 clients, car nous sommes pr√™ts √† garantir la qualit√©.  Et la qualit√© implique non seulement la stabilit√©, mais aussi le rapport performance / prix maximal, puis la rentabilit√©. <br><br>  Pour f√™ter √ßa, nous avons annul√© l'int√©gralit√© de l'infrastructure cloud (qui est des milliers de VPS), command√© 2 serveurs virtuels ind√©pendants pour nous (oui, nous nous payons pour nos serveurs), d√©ploy√© un site et factur√© il y a 2 mois une nouvelle solution, comme nous avons tout d√©crit ci-dessus, introduit dans le groupe de protection, pour que le syst√®me ne s'arr√™te pas, si vous avez soudainement oubli√© de payer √† temps ... Il semble avoir tout fait. <br><br>  Et aujourd'hui, apr√®s 2 mois, nous avons d√©cid√© d '¬´Annuler¬ª (ne pas supprimer, un tel bouton est √©galement l√†, mais nous essayons de ne jamais supprimer quoi que ce soit, afin qu'il y ait toujours un historique) 1000+ commandes en attente qui n'ont toujours pas de statut dans la facturation WHMCS .  Devin√©?  Oui, c'est tout.  Ils m'ont demand√© - puis-je annuler?  J'ai confirm√© "supprimer". <br><br>  Parfois, malgr√© le grand nombre de ressources, puisque l'√©chantillonnage des donn√©es est important et que certains processus ne correspondent pas au d√©lai imparti, WHMCS donne une erreur 504, tout est fait et la facturation continue de fonctionner, mais ici nous avons eu l'indisponibilit√©.  La facturation et le site ne sont plus disponibles.  Nous n'avons pas imm√©diatement compris la raison.  Mais alors ils ont r√©alis√©.  La commande de nos 2 VPS n'a pas √©t√© accept√©e (oui, nous n'avons pas accept√© notre commande!) Et, en cons√©quence, a √©t√© ¬´Annul√©e¬ª par le syst√®me, ce qui a conduit au lancement du module et √† la suppression de deux conteneurs √† la fois, soi-disant non cr√©√©s, mais cr√©√©s par les virtuels, √† l'aide de notre bien-aim√© VM Manager.  Apr√®s √™tre entr√© dans l'un des n≈ìuds, comme pr√©vu, nos administrateurs ont vu l'image ¬´Adieu¬ª: <br><br><img src="https://habrastorage.org/webt/mq/wq/pn/mqwqpnutma-z0kdwsmevoax_tfo.png"><br><br>  Qu'est-ce que c'est - une faille dans les d√©veloppeurs WHMCS, qui conduit √† la suppression des commandes non accept√©es, et effectivement cr√©√©es avec leur ID VPS, lorsqu'elles sont annul√©es, ou notre stupidit√© (du service commercial) n'est plus importante.  Le r√©sultat √©tait un - "Adieu au site avec facturation."  Le panneau vient de les essuyer.  Et les administrateurs n'avaient qu'une seule question pour nous (ventes): <br><br><blockquote>  Naher cr√©e un service avec son site principal et sa facturation. <br>  Et puis aussi la tuer en enfer. </blockquote><br>  Et m√™me si nous avions des sauvegardes, √©galement dans deux r√©gions g√©ographiquement r√©parties, je me sentais mal √† l'aise.  Comme je n'√©tais pas s√ªr de la fra√Æcheur des sauvegardes, je n'√©tais pas s√ªr que nos administrateurs aient tout fait correctement, comme cela avait √©t√© initialement prescrit dans ceux-ci.  la t√¢che que la base de donn√©es a √©t√© r√©ellement sauvegard√©e toutes les heures ou plus souvent, et les donn√©es ont √©t√© mises √† jour et plusieurs versions pr√©c√©dentes des fichiers ont √©t√© stock√©es.  Ces sauvegardes pour une erreur logicielle n'ont pas cess√© d'√™tre effectu√©es du tout (apr√®s tout, personnellement, je ne les contr√¥lais pas, pourquoi devrais-je √™tre s√ªr que nos administrateurs s'inqui√©teraient de nos donn√©es si je marquais ce contr√¥le?).  Un tas de pens√©es n√©gatives ... Ne laissez pas l'univers survivre √† cela! <br><br>  J'avais d√©j√† l'id√©e qu'au moins 1 heure, ou pire encore, il n'y aurait pas de transactions, et que vous deviez restaurer les paiements des clients manuellement, comparer les donn√©es sur les transactions pr√©c√©dentes et √©crire aux titulaires de compte que nous avions recr√©√© un compte et pay√© pour cela , pour nous montrer du mauvais c√¥t√©, pour envoyer une notification que nous sommes des imb√©ciles et avons fait un tel dysfonctionnement du logiciel ... Et s'il n'y a pas de nouvelle sauvegarde - c'est g√©n√©ralement un tuyau, cela devrait √™tre tr√®s long et morne pour tout restaurer ... <br><br>  Pour ce cas, nous avons une table interne o√π de nombreuses donn√©es principales sont dupliqu√©es manuellement et qui est mise √† jour par nos soins, ce qui √©limine une panne logicielle et la r√©√©criture de donn√©es incorrectes.  Malgr√© la disponibilit√© des sauvegardes, nous utilisons toujours cette m√©thode.  Apr√®s tout, personne n'annule la possibilit√© d'un zvezdets mondial. <br><br>  Heureusement, tout s'est av√©r√© pas si mal, et m√™me ceux-l√†.  un sp√©cialiste qui a d√ª r√©soudre un probl√®me et qui au d√©but a annonc√©: <br><br><blockquote>  La soir√©e a √©t√© un succ√®s, merci √† tous. <br>  Je suis all√© le chercher. </blockquote><br>  N√©anmoins, la soir√©e a √©t√© un succ√®s.  √âtant donn√© qu'au d√©part, la solution pr√©vue pour l'utilisation de lvm et qu'un nouveau conteneur virtuel n'avaient pas encore √©t√© cr√©√©s - il √©tait possible de restaurer les donn√©es r√©elles, bien qu'avec une danse avec un tambourin: <br><br><blockquote>  Tout via l'utilitaire lvm, √† l'aide de ses commandes, a restaur√© le groupe de volumes virtuels, puis le groupe virtuel, puis a activ√© la partition, l'a mont√©e sur le dossier de gauche, a cr√©√© le serveur et y a mis les donn√©es.  Cela √©tait possible par d'autres moyens, mais cette option dans notre cas √©tait la sp√©cificit√© la plus rapide des param√®tres du serveur virtuel, qui chacun a son propre raid. </blockquote><br>  Quelles conclusions sont tir√©es?  La redondance et la redondance devraient inclure la comptabilit√© des vuln√©rabilit√©s et le sc√©nario de d√©veloppement le plus stupide lorsque tout, m√™me les sauvegardes, peut √™tre d√©truit.  Nous n'avons pas souffert et n'avons pas subi de pertes importantes uniquement du fait que les donn√©es n'ont pas √©t√© compl√®tement supprim√©es.  S'il est n√©cessaire de restaurer √† partir de sauvegardes, il y aurait une perte de transactions par heure et une perte significative de temps de travail.  Il nous a sembl√© que la probabilit√© que les sauvegardes soient utiles lors de l'utilisation d'un g√©ocluster est minime - nous avions tort.  Nous n'avons pas pris en compte qu'il est possible de supprimer les deux serveurs √† la fois et que nous ne supprimerons pas les serveurs, mais nous. <br><br>  Il est toujours n√©cessaire d'avoir un stockage externe ind√©pendant de votre syst√®me, avec acc√®s, de pr√©f√©rence uniquement par un certain code, qui est √©galement r√©serv√©, afin de garantir que les donn√©es ne seront pas perdues.  Pour le moment, malgr√© la pr√©sence de sauvegardes dans notre infrastructure dans deux r√©gions, j'envisage s√©rieusement la possibilit√© d'utiliser quelque chose comme Amazon Glacier, bien que ce dernier soit tr√®s cher.  Selon les administrateurs, tout va bien uniquement en termes de marketing, mais lorsque vous commencez √† l'utiliser, vous √™tes confront√© au fait que la solution est assez ch√®re, car vous devez payer pour chaque demande et chaque fichier qui est tr√®s int√©ressant √† consid√©rer comme leur application aws-cli, surtout si les donn√©es doivent √™tre restaur√©es.  R√©cemment, un client de Grande-Bretagne a demand√© √† y √©tablir une r√©servation, apr√®s quelques mois d'utilisation, il a refus√© - cela s'est av√©r√© tr√®s co√ªteux.  Mais encore, nous devons d√©terminer ce qui est plus cher.                 ‚Äî   .    ‚Äî   ,   ,       .        ,     . <br><br> ,     ‚Äî     ,     ,  ,     .       , ,  ,   ,         ,       . <br><br> PS   ,   (  ,  EST ).    ,  ,    . ,    -      .         ,      ,    . ,    ‚Äî   ,     .       .       ! <br><br>   . <br><br> <b>VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps     </b>      ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,  30%    VPS  , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . <br><br>  <b>Dell R730xd 2 fois moins cher?</b>  Nous avons seulement <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 Go DDR4 6x480 Go SSD 1 Gbps 100 TV √† partir de 249 $</a> aux Pays-Bas et aux √âtats-Unis!</b>  Pour en savoir plus sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cr√©ation d'un b√¢timent d'infrastructure.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">classe utilisant des serveurs Dell R730xd E5-2650 v4 co√ªtant 9 000 euros pour un sou?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr424063/">https://habr.com/ru/post/fr424063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr424049/index.html">Nous pr√©sentons le livre "Harry Potter et les m√©thodes de la pens√©e rationnelle" √† l'Olympiade</a></li>
<li><a href="../fr424051/index.html">The Clean Programmer Manifesto ou Robert Martin's Short Code Book Summary</a></li>
<li><a href="../fr424053/index.html">S√©rie MicroSD faite d'une toile vierge</a></li>
<li><a href="../fr424059/index.html">Faits saillants #GitLabLive du 20 septembre 2018</a></li>
<li><a href="../fr424061/index.html">Cinq ans plus tard, la prochaine version de DOSBox est sortie sous le num√©ro 0.74-2</a></li>
<li><a href="../fr424065/index.html">Firefox installe des extensions sur vos appareils pour collecter des donn√©es √† votre insu ... √† nouveau</a></li>
<li><a href="../fr424069/index.html">iFixit: iPhone XS et XS Max - copies presque exactes de l'iPhone X avec maintenabilit√© 6 sur 10</a></li>
<li><a href="../fr424071/index.html">Th√©orie du bonheur. Thermodynamique des in√©galit√©s de classe</a></li>
<li><a href="../fr424073/index.html">Ex√©cution de code √† distance dans le moteur de base de donn√©es Microsoft JET</a></li>
<li><a href="../fr424077/index.html">La France exige de mondialiser le ¬´droit √† l'oubli¬ª - ce qu'il peut affecter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>