<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîΩ ü§Ω üè¢ Planification de l'infrastructure pour la r√©cup√©ration instantan√©e des machines virtuelles Instant VM Recovery: Part 2 ü¶ç üóìÔ∏è ‚õµÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous continuons le sujet, qui a commenc√© √† √™tre examin√© dans la premi√®re partie . Aujourd'hui, nous allons parler des connexions r√©seau et des serveur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Planification de l'infrastructure pour la r√©cup√©ration instantan√©e des machines virtuelles Instant VM Recovery: Part 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/414547/">  Nous continuons le sujet, qui a commenc√© √† √™tre examin√© dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">premi√®re partie</a> .  Aujourd'hui, nous allons parler des connexions r√©seau et des serveurs cibles, pr√©senter les options possibles et les options de planification de l'infrastructure pour une r√©cup√©ration optimale d'Instant VM Recovery.  Alors bienvenue au chat. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_5/c2/_c/_5c2_c7beo7ac9tamvuvgr2-_c4.png" width="600" height="271"></div><a name="habracut"></a><br><h1>  √Ä propos des connexions r√©seau </h1><br>  Bien s√ªr, il est bon d'avoir un canal avec une bande passante de 10 Gbit / s, √† travers lequel les donn√©es sont transf√©r√©es pendant la sauvegarde.  Cependant, le canal est plus modeste √† restaurer √† partir d'une sauvegarde, mais il est recommand√© d'utiliser l'association NIC avec LACP ou SMB Multichannel, ou une autre option avec agr√©gation de bande passante.  Vous pouvez utiliser, par exemple, des ports LOM dans la version 4x1 Gbit / s.  Cette configuration est recommand√©e pour la connexion ¬´plusieurs p√©riph√©riques source - 1 p√©riph√©rique de sauvegarde cible¬ª, c'est-√†-dire lors de la connexion de ¬´plusieurs √† un¬ª.  (De m√™me, la r√©cup√©ration parall√®le d'un stockage de sauvegarde vers des p√©riph√©riques cibles - en r√®gle g√©n√©rale, ce sont les m√™mes que ceux √† partir desquels les sauvegardes ont √©t√© effectu√©es - est une connexion un-√†-plusieurs.) <br>  Par exemple, vous pouvez configurer plusieurs travaux de sauvegarde √† partir de plusieurs h√¥tes Hyper-V / LUN et enregistrer des sauvegardes sur le m√™me stockage cible.  Si vous avez 10 de ces h√¥tes avec une bande passante totale de canal de 4x1 Gbit / s, alors si vous avez un tuyau de 10 Gbit / s sur le p√©riph√©rique cible, c'est une configuration tout √† fait ad√©quate. <br><br>  Dans le cas o√π le stockage de sauvegarde est un partage SMB, le multicanal fonctionne tr√®s bien (il peut √™tre compl√©t√© par SMB Direct si vous avez des cartes r√©seau avec prise en charge RDMA configur√©e).  Ces fonctionnalit√©s sont d√©sormais prises en charge dans de nombreux d√©ploiements de cluster Hyper-V.  Cependant, le composant de solution Veeam responsable du transfert de donn√©es peut utiliser SMB Multichannel et SMB Direct (l√† encore, avec des cartes r√©seau configur√©es avec prise en charge RDMA) uniquement dans le sc√©nario lorsque vous utilisez des machines virtuelles stock√©es sur le partage de fichiers SMB pour la sauvegarde proxy hors h√¥te.  Ces Veeam Data Movers fonctionnent respectivement sur le proxy de sauvegarde hors h√¥te et sur le r√©f√©rentiel.  Un tel sc√©nario est d√©crit en d√©tail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Autre point important: lors de l'utilisation de l'association de cartes r√©seau Windows en <i>mode ind√©pendant du commutateur</i> , le transfert de donn√©es est autoris√© de tous les participants et ne re√ßoit que d'un seul.  Si vous souhaitez obtenir le d√©bit optimal dans les deux directions pour un processus, vous n'avez pas besoin d'utiliser LACP.  Mais dans ce cas, vous devez vous assurer que plusieurs restaurations sont effectu√©es sur le m√™me h√¥te. <br><br>  Comme vous pouvez le voir, l'agr√©gation de bande passante comporte un certain nombre de limitations et n'est pas compl√®tement identique √† la possession d'un bon canal.  Dans tous les cas, vous devez vous baser sur des sc√©narios d'utilisation planifi√©s. <br><br>  En r√©sum√©: selon votre infrastructure, vous pouvez utiliser le regroupement de cartes r√©seau Windows en mode LACP ou Switch Independent mode / SMB Multichannel.  Cette derni√®re option est utile si vous travaillez avec le partage de fichiers SMB et que vous souhaitez utiliser SMB Direct (n'oubliez pas les fonctionnalit√©s du travail mentionn√© ci-dessus). <br><br><img src="https://habrastorage.org/webt/mm/fr/eo/mmfreonnwcu0xo_g0b7qcd3hg-m.png"><br><br>  Une bande passante √©lev√©e et une faible latence sont n√©cessaires afin de fournir les meilleures performances lors du montage de disques virtuels, lors de l'acc√®s et de la copie de donn√©es pendant la r√©cup√©ration instantan√©e de machine virtuelle. <br><br>  Vous pouvez effectuer plusieurs op√©rations de r√©cup√©ration en m√™me temps sans arr√™ter les travaux de sauvegarde.  Autrement dit, en pr√©sence d'un canal d√©cent, le r√¥le principal est jou√© par la ressource informatique et le stockage.  Si tout cela est correctement con√ßu pour la sauvegarde, la r√©cup√©ration sera efficace. <br><br><h1>  Recommandations pour les appareils cibles </h1><br>  Consid√©rez plusieurs options, parmi lesquelles, tr√®s probablement, vous choisirez la meilleure pour vous-m√™me. <br><br><h3>  Option 1: restauration vers des h√¥tes Hyper-V et directement vers le LUN dans l'infrastructure de production </h3><br>  M√™me si vous avez un syst√®me de stockage haute performance avec une mise en cache en lecture / √©criture ou si le niveau 1 est configur√©, alors, comme mentionn√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans un article pr√©c√©dent</a> , vous devez faire attention de ne pas d√©border.  Sinon, les machines virtuelles de production seront affect√©es.  Et cela peut se produire, par exemple, si vous essayez d'√©crire de grandes quantit√©s de donn√©es dans le syst√®me de stockage aussi rapidement que possible - cela se produit lors de la migration des syst√®mes de stockage.  Dans de telles op√©rations, nous essayons d'√©viter l'utilisation de syst√®mes de stockage de niveau 1.  Des consid√©rations similaires s'appliquent √† la restauration de grandes machines virtuelles. <br><br>  Vous pouvez recommander la restauration sur des LUN s√©par√©s avec des profils diff√©rents.  Les VM restaur√©es peuvent ensuite √™tre migr√©es lentement vers des CSV de production.  Pour garantir une haute disponibilit√©, vous pouvez utiliser le cluster √† l'aide de la migration en direct du stockage (fonctionnalit√© de migration du stockage ¬´en direct¬ª).  Naturellement, vous devez vous concentrer sur les performances de votre baie de stockage. <br><br><h3>  Option 2: restauration vers des h√¥tes Hyper-V avec des disques SSD / NMVe locaux </h3><br>  Autre sc√©nario de reprise en production, assez efficace: utiliser l'h√¥te Hyper-V du stockage local vers SSD ou NVMe.  La taille de l'espace disque d√©pend du nombre de VM que vous souhaitez r√©cup√©rer sur une certaine p√©riode et de la taille de ces VM. <br><br>  En th√©orie, il est peu probable que vous ayez besoin de restaurer tout le monde et tout, donc cette configuration devrait √™tre assez √©conomique.  Par exemple, vous pouvez utiliser un SSD dans chacun des n≈ìuds de cluster, ou seulement dans quelques-uns, ou en g√©n√©ral seulement dans un.  Plus vous utilisez de SSD / NVMe, plus ils peuvent √™tre budg√©taires, tout en maintenant une r√©partition de charge assez efficace entre les h√¥tes.  Au stade final de la proc√©dure de r√©cup√©ration instantan√©e, les machines virtuelles peuvent √™tre facilement transf√©r√©es vers des CSV de production, en utilisant la m√™me fonctionnalit√© de migration en direct du stockage. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fi/o9/bi/fio9bip9q5jezqbtx2xzb6t49lq.png" width="500" height="610"></div><br>  Le diagramme montre une option de planification d'infrastructure.  Bien s√ªr, vous pouvez combiner les approches ci-dessus √† votre discr√©tion. <br><br><h3>  Option 3: restauration vers des h√¥tes Hyper-V d√©di√©s avec des disques SSD / NVMe locaux </h3><br>  Dans cette option, nous allouons un ou plusieurs h√¥tes sp√©cifiquement pour prendre en charge la r√©cup√©ration.  Cela √©vite une √©ventuelle p√©nurie de ressources et l'impact sur le fonctionnement des h√¥tes de production dans le cluster.  Vous pouvez utiliser des disques NVMe.  Nous vous recommandons de tester au pr√©alable les capacit√©s de r√©cup√©ration dans cette configuration afin de comprendre comment les ressources s'√©puisent. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_5/c2/_c/_5c2_c7beo7ac9tamvuvgr2-_c4.png" width="600" height="271"></div><br>  Si vous envisagez d'augmenter leur consommation, pour la migration finale des machines reconditionn√©es vers la production, vous pouvez utiliser la migration dite sans partager les ressources Shared Nothing Live Migration.  (Pour cela, vous devrez d√©finir des param√®tres de s√©curit√© suppl√©mentaires.) En ce qui concerne les ressources r√©seau, vous pouvez utiliser, par exemple, les capacit√©s multicanaux SMB et SMB Direct pour la migration vers CSV / Live Migration / S2D Hyper-V. <br>  Oui, la migration des syst√®mes de stockage (Storage live migration) n'est pas le processus le plus rapide, c'est un inconv√©nient.  Mais il y a un avantage: vos machines virtuelles sont restaur√©es et continuent de fonctionner pendant ce processus. <br><br><h1>  En conclusion </h1><br>  Bien s√ªr, chacun choisit les options pr√©f√©r√©es en fonction du goulot d'√©tranglement d'une infrastructure particuli√®re (serveur source, serveur cible, ressources r√©seau).  De plus, il est tout √† fait possible qu'une √©tude approfondie ne soit n√©cessaire que pour planifier la r√©cup√©ration des machines virtuelles les plus critiques ou pour les consommateurs qui paient pour un tel service. <br><br>  Dans tous les cas, l'objectif principal sera toujours la r√©cup√©ration la plus rapide possible. <br>  Apr√®s cela, il est d√©j√† possible de migrer en toute s√©curit√© vers le syst√®me de stockage en cluster, garantissant une haute disponibilit√© et une tol√©rance aux pannes.  Et, bien s√ªr, les machines virtuelles doivent √™tre prot√©g√©es sous forme de sauvegarde / r√©plication au cas o√π elles devraient √™tre restaur√©es √† nouveau √† un moment donn√©. <br><br><h1>  Quoi d'autre √† lire: </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article Habr sur la planification de l'infrastructure pour la r√©cup√©ration instantan√©e de VM (partie 1)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide de l'utilisateur Veeam Backup &amp; Replication pour Hyper-V (en russe)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide de l'utilisateur Veeam Backup &amp; Replication pour VMware (en russe)</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414547/">https://habr.com/ru/post/fr414547/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414531/index.html">Personne ne sait ce qu'il adviendra des achats en ligne √† partir du 1er juillet</a></li>
<li><a href="../fr414535/index.html">Manchester: berceau du d√©couragement, du post-punk et de deux c√©l√®bres clubs de football</a></li>
<li><a href="../fr414537/index.html">Comment nous avons cr√©√© l'un des meilleurs jeux AR au monde sans trafic payant</a></li>
<li><a href="../fr414539/index.html">Les cybercriminels volent de plus en plus les donn√©es personnelles des Russes</a></li>
<li><a href="../fr414541/index.html">Optimisation de l'application node.js</a></li>
<li><a href="../fr414549/index.html">3000 yeux pour l'intelligence artificielle. Quel est le syst√®me de surveillance des structures du centre de Lakhta?</a></li>
<li><a href="../fr414551/index.html">Instructions d'admission au doctorat aux √âtats-Unis</a></li>
<li><a href="../fr414555/index.html">Comment nous transf√©rons 36 millions de clients vers un service d'assistance technique num√©rique</a></li>
<li><a href="../fr414557/index.html">Piratage de compteurs intelligents √† PHDays 8: analyse du concours MeterH3cker</a></li>
<li><a href="../fr414561/index.html">Ecole fran√ßaise du jeu vid√©o: Another World</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>